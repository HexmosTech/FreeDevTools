<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zshcontrib - user contributions to zsh</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/zsh-common">zsh-common_5.9-6ubuntu3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zshcontrib - user contributions to zsh

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  Zsh source distribution includes a number of items contributed by the user community.  These are not
       inherently a part of the shell, and some may not be  available  in  every  zsh  installation.   The  most
       significant  of  these  are  documented here.  For documentation on other contributed items such as shell
       functions, look for comments in the function source files.

</pre><h4><b>UTILITIES</b></h4><pre>
   <b>Accessing</b> <b>On-Line</b> <b>Help</b>
       The key sequence <b>ESC</b> <b>h</b> is normally bound by ZLE to execute the <b>run-help</b>  widget  (see  <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1)).   This
       invokes  the  <b>run-help</b>  command  with  the  command word from the current input line as its argument.  By
       default, <b>run-help</b> is an alias for the <b>man</b> command, so this often fails when the command word is  a  shell
       builtin  or  a user-defined function.  By redefining the <b>run-help</b> alias, one can improve the on-line help
       provided by the shell.

       The <b>helpfiles</b> utility, found in the <b>Util</b> directory of the distribution, is a Perl  program  that  can  be
       used  to process the zsh manual to produce a separate help file for each shell builtin and for many other
       shell features as well.  The autoloadable <b>run-help</b> function, found in <b>Functions/Misc</b>, searches for  these
       helpfiles and performs several other tests to produce the most complete help possible for the command.

       Help files are installed by default to a subdirectory of <b><a href="file:/usr/share/zsh">/usr/share/zsh</a></b> or <b>/usr/local/share/zsh</b>.

       To  create  your own help files with <b>helpfiles</b>, choose or create a directory where the individual command
       help files will reside.  For example, you might choose <b><a href="file:~/zsh_help">~/zsh_help</a></b>.  If you unpacked the zsh  distribution
       in your home directory, you would use the commands:

              <b>mkdir</b> <b><a href="file:~/zsh_help">~/zsh_help</a></b>
              <b>perl</b> <b><a href="file:~/zsh-5.9/Util/helpfiles">~/zsh-5.9/Util/helpfiles</a></b> <b><a href="file:~/zsh_help">~/zsh_help</a></b>

       The  <b>HELPDIR</b>  parameter  tells <b>run-help</b> where to look for the help files. When unset, it uses the default
       installation path.  To use your own set of help files, set this to the appropriate path in  one  of  your
       startup files:

              <b>HELPDIR=<a href="file:~/zsh_help">~/zsh_help</a></b>

       To  use  the  <b>run-help</b>  function,  you  need  to add lines something like the following to your <b>.zshrc</b> or
       equivalent startup file:

              <b>unalias</b> <b>run-help</b>
              <b>autoload</b> <b>run-help</b>

       Note that in order for `<b>autoload</b> <b>run-help</b>' to work, the <b>run-help</b> file must be in one of  the  directories
       named  in your <b>fpath</b> array (see <u><a href="../man1/zshparam.1.html">zshparam</a></u>(1)).  This should already be the case if you have a standard zsh
       installation; if it is not, copy <b>Functions/Misc/run-help</b> to an appropriate directory.

   <b>Recompiling</b> <b>Functions</b>
       If you frequently edit your zsh functions, or periodically update your  zsh  installation  to  track  the
       latest developments, you may find that function digests compiled with the <b>zcompile</b> builtin are frequently
       out of date with respect to the function source files.  This is not usually a problem, because zsh always
       looks  for  the  newest  file when loading a function, but it may cause slower shell startup and function
       loading.  Also, if a digest file is explicitly used as an element of <b>fpath</b>, zsh won't check  whether  any
       of its source files has changed.

       The <b>zrecompile</b> autoloadable function, found in <b>Functions/Misc</b>, can be used to keep function digests up to
       date.

       <b>zrecompile</b> [ <b>-qt</b> ] [ <u>name</u> ... ]
       <b>zrecompile</b> [ <b>-qt</b> ] <b>-p</b> <u>arg</u> ... [ <b>--</b> <u>arg</u> ... ]
              This  tries  to find <b>*.zwc</b> files and automatically re-compile them if at least one of the original
              files is newer than the compiled file.  This works only if the names stored in the compiled  files
              are full paths or are relative to the directory that contains the <b>.zwc</b> file.

              In  the first form, each <u>name</u> is the name of a compiled file or a directory containing <b>*.zwc</b> files
              that should be checked.  If no arguments are given, the directories and <b>*.zwc</b> files in  <b>fpath</b>  are
              used.

              When  <b>-t</b> is given, no compilation is performed, but a return status of zero (true) is set if there
              are files that need to be re-compiled and non-zero (false) otherwise.  The <b>-q</b>  option  quiets  the
              chatty output that describes what <b>zrecompile</b> is doing.

              Without  the <b>-t</b> option, the return status is zero if all files that needed re-compilation could be
              compiled and non-zero if compilation for at least one of the files failed.

              If the <b>-p</b> option is given, the <u>arg</u>s are interpreted as one or more sets of arguments for <b>zcompile</b>,
              separated by `<b>--</b>'.  For example:

                     <b>zrecompile</b> <b>-p</b> <b>\</b>
                                <b>-R</b> <b><a href="file:~/.zshrc">~/.zshrc</a></b> <b>--</b> <b>\</b>
                                <b>-M</b> <b><a href="file:~/.zcompdump">~/.zcompdump</a></b> <b>--</b> <b>\</b>
                                <b><a href="file:~/zsh/comp.zwc">~/zsh/comp.zwc</a></b> <b><a href="file:~/zsh/Completion/">~/zsh/Completion/</a>*/_*</b>

              This compiles <b><a href="file:~/.zshrc">~/.zshrc</a></b> into <b><a href="file:~/.zshrc.zwc">~/.zshrc.zwc</a></b> if that doesn't exist or if it is  older  than  <b><a href="file:~/.zshrc">~/.zshrc</a></b>.
              The compiled file will be marked for reading instead of mapping. The same is done for <b><a href="file:~/.zcompdump">~/.zcompdump</a></b>
              and  <b><a href="file:~/.zcompdump.zwc">~/.zcompdump.zwc</a></b>,  but this compiled file is marked for mapping. The last line re-creates the
              file <b><a href="file:~/zsh/comp.zwc">~/zsh/comp.zwc</a></b> if any of the files matching the given pattern is newer than it.

              Without the <b>-p</b> option, <b>zrecompile</b> does not create function digests that do not already exist,  nor
              does it add new functions to the digest.

       The  following  shell  loop  is an example of a method for creating function digests for all functions in
       your <b>fpath</b>, assuming that you have write permission to the directories:

              <b>for</b> <b>((i=1;</b> <b>i</b> <b>&lt;=</b> <b>$#fpath;</b> <b>++i));</b> <b>do</b>
                <b>dir=$fpath[i]</b>
                <b>zwc=${dir:t}.zwc</b>
                <b>if</b> <b>[[</b> <b>$dir</b> <b>==</b> <b>(.|..)</b> <b>||</b> <b>$dir</b> <b>==</b> <b>(.|..)/*</b> <b>]];</b> <b>then</b>
                  <b>continue</b>
                <b>fi</b>
                <b>files=($dir/*(N-.))</b>
                <b>if</b> <b>[[</b> <b>-w</b> <b>$dir:h</b> <b>&amp;&amp;</b> <b>-n</b> <b>$files</b> <b>]];</b> <b>then</b>
                  <b>files=(${${(M)files%/*/*}#/})</b>
                  <b>if</b> <b>(</b> <b>cd</b> <b>$dir:h</b> <b>&amp;&amp;</b>
                       <b>zrecompile</b> <b>-p</b> <b>-U</b> <b>-z</b> <b>$zwc</b> <b>$files</b> <b>);</b> <b>then</b>
                    <b>fpath[i]=$fpath[i].zwc</b>
                  <b>fi</b>
                <b>fi</b>
              <b>done</b>

       The <b>-U</b> and <b>-z</b> options are appropriate for functions in the default zsh installation <b>fpath</b>; you  may  need
       to use different options for your personal function directories.

       Once the digests have been created and your <b>fpath</b> modified to refer to them, you can keep them up to date
       by running <b>zrecompile</b> with no arguments.

   <b>Keyboard</b> <b>Definition</b>
       The  large  number  of possible combinations of keyboards, workstations, terminals, emulators, and window
       systems makes it impossible for zsh to have built-in key bindings for every situation.  The <b>zkbd</b> utility,
       found in <b>Functions/Misc</b>, can help you quickly create key bindings for your configuration.

       Run <b>zkbd</b> either as an autoloaded function, or as a shell script:

              <b>zsh</b> <b>-f</b> <b><a href="file:~/zsh-5.9/Functions/Misc/zkbd">~/zsh-5.9/Functions/Misc/zkbd</a></b>

       When you run <b>zkbd</b>, it first asks you to enter your terminal type; if the default it  offers  is  correct,
       just  press return.  It then asks you to press a number of different keys to determine characteristics of
       your keyboard and terminal; <b>zkbd</b> warns you if it finds anything out of the ordinary, such as a Delete key
       that sends neither <b>^H</b> nor <b>^?</b>.

       The keystrokes read by <b>zkbd</b> are recorded as a definition for an associative array named <b>key</b>, written to a
       file in the subdirectory <b>.zkbd</b> within either your <b>HOME</b> or <b>ZDOTDIR</b> directory.  The name  of  the  file  is
       composed from the <b>TERM</b>, <b>VENDOR</b> and <b>OSTYPE</b> parameters, joined by hyphens.

       You  may  read this file into your <b>.zshrc</b> or another startup file with the `<b>source</b>' or `<b>.</b>' commands, then
       reference the <b>key</b> parameter in bindkey commands, like this:

              <b>source</b> <b>${ZDOTDIR:-$HOME}/.zkbd/$TERM-$VENDOR-$OSTYPE</b>
              <b>[[</b> <b>-n</b> <b>${key[Left]}</b> <b>]]</b> <b>&amp;&amp;</b> <b>bindkey</b> <b>"${key[Left]}"</b> <b>backward-char</b>
              <b>[[</b> <b>-n</b> <b>${key[Right]}</b> <b>]]</b> <b>&amp;&amp;</b> <b>bindkey</b> <b>"${key[Right]}"</b> <b>forward-char</b>
              <b>#</b> <b>etc.</b>

       Note that in order for `<b>autoload</b> <b>zkbd</b>' to work, the <b>zkdb</b> file must be in one of the directories named  in
       your  <b>fpath</b>  array  (see  <u><a href="../man1/zshparam.1.html">zshparam</a></u>(1)).   This  should  already  be  the  case if you have a standard zsh
       installation; if it is not, copy <b>Functions/Misc/zkbd</b> to an appropriate directory.

   <b>Dumping</b> <b>Shell</b> <b>State</b>
       Occasionally you may encounter what appears to be a bug in the shell, particularly if  you  are  using  a
       beta  version  of  zsh  or  a development release.  Usually it is sufficient to send a description of the
       problem to one of the zsh mailing lists (see <u><a href="../man1/zsh.1.html">zsh</a></u>(1)), but sometimes one of the zsh developers  will  need
       to recreate your environment in order to track the problem down.

       The script named <b>reporter</b>, found in the <b>Util</b> directory of the distribution, is provided for this purpose.
       (It  is  also  possible  to  <b>autoload</b> <b>reporter</b>, but <b>reporter</b> is not installed in <b>fpath</b> by default.)  This
       script outputs a detailed dump of the shell state, in the form of another script that can  be  read  with
       `<b>zsh</b> <b>-f</b>' to recreate that state.

       To  use  <b>reporter</b>,  read  the  script into your shell with the `<b>.</b>' command and redirect the output into a
       file:

              <b>.</b> <b><a href="file:~/zsh-5.9/Util/reporter">~/zsh-5.9/Util/reporter</a></b> <b>&gt;</b> <b>zsh.report</b>

       You should check the <b>zsh.report</b> file for any sensitive information such as passwords and delete  them  by
       hand  before  sending  the script to the developers.  Also, as the output can be voluminous, it's best to
       wait for the developers to ask for this information before sending it.

       You can also use <b>reporter</b> to dump only a subset of  the  shell  state.   This  is  sometimes  useful  for
       creating  startup  files  for the first time.  Most of the output from reporter is far more detailed than
       usually is necessary for a startup file, but the <b>aliases</b>, <b>options</b>,  and  <b>zstyles</b>  states  may  be  useful
       because  they  include  only  changes  from  the  defaults.  The <b>bindings</b> state may be useful if you have
       created any of your own keymaps, because <b>reporter</b> arranges to dump the keymap creation commands  as  well
       as the bindings for every keymap.

       As is usual with automated tools, if you create a startup file with <b>reporter</b>, you should edit the results
       to remove unnecessary commands.  Note that if you're using the new completion system, you should <u>not</u> dump
       the  <b>functions</b>  state  to  your  startup  files  with  <b>reporter</b>;  use  the <b>compdump</b> function instead (see
       <u><a href="../man1/zshcompsys.1.html">zshcompsys</a></u>(1)).

       <b>reporter</b> [ <u>state</u> ... ]
              Print to standard output the indicated subset of the current shell state.  The <u>state</u> arguments may
              be one or more of:

              <b>all</b>    Output everything listed below.
              <b>aliases</b>
                     Output alias definitions.
              <b>bindings</b>
                     Output ZLE key maps and bindings.
              <b>completion</b>
                     Output old-style <b>compctl</b> commands.  New completion is covered by <b>functions</b> and <b>zstyles</b>.
              <b>functions</b>
                     Output autoloads and function definitions.
              <b>limits</b> Output <b>limit</b> commands.
              <b>options</b>
                     Output <b>setopt</b> commands.
              <b>styles</b> Same as <b>zstyles</b>.
              <b>variables</b>
                     Output shell parameter assignments, plus <b>export</b> commands for any environment variables.
              <b>zstyles</b>
                     Output <b>zstyle</b> commands.

              If the <u>state</u> is omitted, <b>all</b> is assumed.

       With the exception of `<b>all</b>', every <u>state</u> can be abbreviated by any prefix, even a single letter;  thus  <b>a</b>
       is the same as <b>aliases</b>, <b>z</b> is the same as <b>zstyles</b>, etc.

   <b>Manipulating</b> <b>Hook</b> <b>Functions</b>
       <b>add-zsh-hook</b> [ <b>-L</b> | <b>-dD</b> ] [ <b>-Uzk</b> ] <u>hook</u> <u>function</u>
              Several  functions  are  special  to the shell, as described in the section SPECIAL FUNCTIONS, see
              <u><a href="../man1/zshmisc.1.html">zshmisc</a></u>(1), in that they are automatically called at specific points during shell execution.  Each
              has an associated array consisting of names of functions to be called at the same point; these are
              so-called `hook functions'.  The shell function <b>add-zsh-hook</b> provides a simple way  of  adding  or
              removing functions from the array.

              <u>hook</u>  is  one  of <b>chpwd</b>, <b>periodic</b>, <b>precmd</b>, <b>preexec</b>, <b>zshaddhistory</b>, <b>zshexit</b>, or <b>zsh_directory_name</b>,
              the special functions in question.  Note that <b>zsh_directory_name</b> is called in a different way from
              the other functions, but may still be manipulated as a hook.

              <u>function</u> is name of an ordinary shell function.  If no options are given this will be added to the
              array of functions to be executed in the given context.  Functions are invoked in the  order  they
              were added.

              If the option <b>-L</b> is given, the current values for the hook arrays are listed with <b>typeset</b>.

              If the option <b>-d</b> is given, the <u>function</u> is removed from the array of functions to be executed.

              If  the  option  <b>-D</b>  is  given,  the  <u>function</u>  is  treated as a pattern and any matching names of
              functions are removed from the array of functions to be executed.

              The options <b>-U</b>, <b>-z</b> and <b>-k</b> are passed  as  arguments  to  <b>autoload</b>  for  <u>function</u>.   For  functions
              contributed with zsh, the options <b>-Uz</b> are appropriate.

       <b>add-zle-hook-widget</b> [ <b>-L</b> | <b>-dD</b> ] [ <b>-Uzk</b> ] <u>hook</u> <u>widgetname</u>
              Several  widget names are special to the line editor, as described in the section Special Widgets,
              see <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1), in that they are automatically called at specific points  during  editing.   Unlike
              function  hooks, these do not use a predefined array of other names to call at the same point; the
              shell function <b>add-zle-hook-widget</b> maintains a similar array and arranges for the  special  widget
              to invoke those additional widgets.

              <u>hook</u>   is   one   of   <b>isearch-exit</b>,   <b>isearch-update</b>,  <b>line-pre-redraw</b>,  <b>line-init</b>,  <b>line-finish</b>,
              <b>history-line-set</b>, or <b>keymap-select</b>, corresponding to each of the special widgets <b>zle-isearch-exit</b>,
              etc.  The special widget names are also accepted as the <u>hook</u> argument.

              <u>widgetname</u> is the name of a ZLE widget.  If no options are given this is added  to  the  array  of
              widgets  to  be  invoked  in  the  given hook context.  Widgets are invoked in the order they were
              added, with
                     <b>zle</b> <u>widgetname</u> <b>-Nw</b> <b>-f</b> <b>"nolast"</b> <b>--</b> <b>"$@"</b>

              Note that this means that the `<b>WIDGET</b>' special parameter tracks the  <u>widgetname</u>  when  the  widget
              function is called, rather than tracking the name of the corresponding special hook widget.

              If the option <b>-d</b> is given, the <u>widgetname</u> is removed from the array of widgets to be executed.

              If  the  option  <b>-D</b>  is  given,  the  <u>widgetname</u> is treated as a pattern and any matching names of
              widgets are removed from the array.

              If <u>widgetname</u> does not name an existing widget when added to the array, it is assumed that a shell
              function also named <u>widgetname</u> is meant to provide the implementation of the widget.  This name is
              therefore marked for autoloading, and the options <b>-U</b>,  <b>-z</b>  and  <b>-k</b>  are  passed  as  arguments  to
              <b>autoload</b>  as  with <b>add-zsh-hook</b>.  The widget is also created with `<b>zle</b> <b>-N</b> <u>widgetname</u>' to cause the
              corresponding function to be loaded the first time the hook is called.

              The arrays of <u>widgetname</u> are currently maintained in <b>zstyle</b> contexts, one for each  <u>hook</u>  context,
              with  a  style of `<b>widgets</b>'.  If the <b>-L</b> option is given, this set of styles is listed with `<b>zstyle</b>
              <b>-L</b>'.  This implementation may change, and the special widgets that refer to the styles are created
              only if <b>add-zle-hook-widget</b> is called to add at least one widget, so if this function is used  for
              any hooks, then all hooks should be managed only via this function.

</pre><h4><b>REMEMBERING</b> <b>RECENT</b> <b>DIRECTORIES</b></h4><pre>
       The  function  <b>cdr</b> allows you to change the working directory to a previous working directory from a list
       maintained automatically.  It is similar in concept to the directory stack controlled by the <b>pushd</b>,  <b>popd</b>
       and  <b>dirs</b>  builtins,  but  is  more  configurable, and as it stores all entries in files it is maintained
       across sessions and (by default) between terminal emulators  in  the  current  session.   Duplicates  are
       automatically removed, so that the list reflects the single most recent use of each directory.

       Note that the <b>pushd</b> directory stack is not actually modified or used by <b>cdr</b> unless you configure it to do
       so as described in the configuration section below.

   <b>Installation</b>
       The system works by means of a hook function that is called every time the directory changes.  To install
       the system, autoload the required functions and use the <b>add-zsh-hook</b> function described above:

              <b>autoload</b> <b>-Uz</b> <b>chpwd_recent_dirs</b> <b>cdr</b> <b>add-zsh-hook</b>
              <b>add-zsh-hook</b> <b>chpwd</b> <b>chpwd_recent_dirs</b>

       Now every time you change directly interactively, no matter which command you use, the directory to which
       you change will be remembered in most-recent-first order.

   <b>Use</b>
       All direct user interaction is via the <b>cdr</b> function.

       The  argument to cdr is a number <u>N</u> corresponding to the <u>N</u>th most recently changed-to directory.  1 is the
       immediately preceding directory; the current directory is remembered but is not offered as a destination.
       Note that if you have multiple windows open 1 may refer to a directory changed to in another window;  you
       can  avoid  this by having per-terminal files for storing directory as described for the <b>recent-dirs-file</b>
       style below.

       If you set the <b>recent-dirs-default</b> style described below <b>cdr</b> will behave  the  same  as  <b>cd</b>  if  given  a
       non-numeric  argument,  or  more  than  one argument.  The recent directory list is updated just the same
       however you change directory.

       If the argument is omitted, 1 is assumed.  This is similar to <b>pushd</b>'s behaviour of swapping the two  most
       recent directories on the stack.

       Completion  for the argument to <b>cdr</b> is available if compinit has been run; menu selection is recommended,
       using:

              <b>zstyle</b> <b>':completion:*:*:cdr:*:*'</b> <b>menu</b> <b>selection</b>

       to allow you to cycle through recent directories; the order is preserved, so the first choice is the most
       recent directory before the current one.  The verbose style is also recommended to ensure  the  directory
       is shown; this style is on by default so no action is required unless you have changed it.

   <b>Options</b>
       The behaviour of <b>cdr</b> may be modified by the following options.

       <b>-l</b>     lists  the numbers and the corresponding directories in abbreviated form (i.e. with <b>~</b> substitution
              reapplied), one per line.  The directories here are not quoted (this would only be an issue  if  a
              directory name contained a newline).  This is used by the completion system.

       <b>-r</b>     sets  the  variable <b>reply</b> to the current set of directories.  Nothing is printed and the directory
              is not changed.

       <b>-e</b>     allows you to edit the list of directories, one per line.  The list can be edited  to  any  extent
              you  like;  no  sanity  checking  is performed.  Completion is available.  No quoting is necessary
              (except for newlines, where I have in any case no sympathy); directories are in unabbreviated form
              and contain an absolute path, i.e. they start with <b>/</b>.  Usually the first entry should be  left  as
              the current directory.

       <b>-p</b> <b>'</b><u>pattern</u><b>'</b>
              Prunes  any  items  in  the directory list that match the given extended glob pattern; the pattern
              needs to be quoted from immediate expansion on the command line.  The pattern is  matched  against
              each  completely  expanded  file name in the list; the full string must match, so wildcards at the
              end (e.g. <b>'*removeme*'</b>) are needed to remove entries with a given substring.

              If output is to a terminal, then the function will print the new list after pruning and prompt for
              confirmation by the user.  This output and confirmation step can be skipped by using <b>-P</b> instead of
              <b>-p</b>.

   <b>Configuration</b>
       Configuration is by means of the styles mechanism that should be familiar from completion;  if  not,  see
       the  description  of  the  <b>zstyle</b> command in see <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1).  The context for setting styles should be
       <b>':chpwd:*'</b> in case the meaning of the context is extended in future, for example:

              <b>zstyle</b> <b>':chpwd:*'</b> <b>recent-dirs-max</b> <b>0</b>

       sets the value of the <b>recent-dirs-max</b> style to 0.  In practice the style name is specific enough  that  a
       context of '*' should be fine.

       An  exception  is  <b>recent-dirs-insert</b>,  which is used exclusively by the completion system and so has the
       usual completion system context (<b>':completion:*'</b> if nothing more specific is needed),  though  again  <b>'*'</b>
       should be fine in practice.

       <b>recent-dirs-default</b>
              If  true, and the command is expecting a recent directory index, and either there is more than one
              argument or the argument is not an integer, then fall through to "cd".  This allows  the  lazy  to
              use   only   one   command   for   directory  changing.   Completion  recognises  this,  too;  see
              recent-dirs-insert for how to control completion when this option is in use.

       <b>recent-dirs-file</b>
              The    file    where    the    list    of    directories    is    saved.     The    default     is
              <b>${ZDOTDIR:-$HOME}/.chpwd-recent-dirs</b>,  i.e. this is in your home directory unless you have set the
              variable <b>ZDOTDIR</b> to point somewhere else.  Directory names are saved in  <b>$'</b><u>...</u><b>'</b>  quoted  form,  so
              each line in the file can be supplied directly to the shell as an argument.

              The  value of this style may be an array.  In this case, the first file in the list will always be
              used for saving directories while any other files are left untouched.   When  reading  the  recent
              directory  list,  if  there  are  fewer  than the maximum number of entries in the first file, the
              contents of later files in the array will be appended with duplicates removed from the list shown.
              The contents of the two files are not sorted together, i.e. all the entries in the first file  are
              shown  first.   The  special value <b>+</b> can appear in the list to indicate the default file should be
              read at that point.  This allows effects like the following:

                     <b>zstyle</b> <b>':chpwd:*'</b> <b>recent-dirs-file</b> <b>\</b>
                     <b><a href="file:~/.chpwd-recent-dirs-">~/.chpwd-recent-dirs-</a>${TTY##*/}</b> <b>+</b>

              Recent directories are read from a  file  numbered  according  to  the  terminal.   If  there  are
              insufficient entries the list is supplemented from the default file.

              It is possible to use <b>zstyle</b> <b>-e</b> to make the directory configurable at run time:

                     <b>zstyle</b> <b>-e</b> <b>':chpwd:*'</b> <b>recent-dirs-file</b> <b>pick-recent-dirs-file</b>
                     <b>pick-recent-dirs-file()</b> <b>{</b>
                       <b>if</b> <b>[[</b> <b>$PWD</b> <b>=</b> <b><a href="file:~/text/writing">~/text/writing</a>(|/*)</b> <b>]];</b> <b>then</b>
                         <b>reply=(<a href="file:~/.chpwd-recent-dirs-writing">~/.chpwd-recent-dirs-writing</a>)</b>
                       <b>else</b>
                         <b>reply=(+)</b>
                       <b>fi</b>
                     <b>}</b>

              In  this  example,  if the current directory is <b><a href="file:~/text/writing">~/text/writing</a></b> or a directory under it, then use a
              special file for saving recent directories, else use the default.

       <b>recent-dirs-insert</b>
              Used by completion.  If <b>recent-dirs-default</b> is true, then setting this to <b>true</b> causes  the  actual
              directory,  rather than its index, to be inserted on the command line; this has the same effect as
              using the corresponding index, but makes the history clearer and the line easier  to  edit.   With
              this  setting,  if  part of an argument was already typed, normal directory completion rather than
              recent directory completion is done; this is because recent directory completion is expected to be
              done by cycling through entries menu fashion.

              If the value of the style is <b>always</b>, then only recent directories will be completed; in that case,
              use the <b>cd</b> command when you want to complete other directories.

              If the value is <b>fallback</b>, recent directories will be tried first, then normal directory completion
              is performed if recent directory completion failed to find a match.

              Finally, if the value is <b>both</b> then both sets of completions are presented; the usual tag mechanism
              can be used to distinguish results, with recent directories tagged as <b>recent-dirs</b>.  Note that  the
              recent directories inserted are abbreviated with directory names where appropriate.

       <b>recent-dirs-max</b>
              The  maximum  number  of directories to save to the file.  If this is zero or negative there is no
              maximum.  The default is 20.  Note this includes the current directory, which  isn't  offered,  so
              the highest number of directories you will be offered is one less than the maximum.

       <b>recent-dirs-prune</b>
              This  style is an array determining what directories should (or should not) be added to the recent
              list.  Elements of the array can include:

              <b>parent</b> Prune parents (more accurately, ancestors) from the  recent  list.   If  present,  changing
                     directly  down by any number of directories causes the current directory to be overwritten.
                     For example, changing from ~pws to ~pws/some/other/dir causes ~pws not to be  left  on  the
                     recent  directory  stack.   This  only applies to direct changes to descendant directories;
                     earlier  directories  on  the  list  are  not   pruned.    For   example,   changing   from
                     ~pws/yet/another to ~pws/some/other/dir does not cause ~pws to be pruned.

              <b>pattern:</b><u>pattern</u>
                     Gives  a  zsh  pattern  for directories that should not be added to the recent list (if not
                     already there).  This element can be repeated to  add  different  patterns.   For  example,
                     <b>'pattern:<a href="file:/tmp">/tmp</a>(|/*)'</b>  stops  <b><a href="file:/tmp">/tmp</a></b>  or  its  descendants from being added.  The <b>EXTENDED_GLOB</b>
                     option is always turned on for these patterns.

       <b>recent-dirs-pushd</b>
              If set to true, <b>cdr</b> will use <b>pushd</b> instead of <b>cd</b> to change the  directory,  so  the  directory  is
              saved  on  the  directory  stack.   As the directory stack is completely separate from the list of
              files saved by the mechanism used in this file there is no obvious reason to do this.

   <b>Use</b> <b>with</b> <b>dynamic</b> <b>directory</b> <b>naming</b>
       It is possible to refer to recent directories using the  dynamic  directory  name  syntax  by  using  the
       supplied function <b>zsh_directory_name_cdr</b> a hook:

              <b>autoload</b> <b>-Uz</b> <b>add-zsh-hook</b>
              <b>add-zsh-hook</b> <b>-Uz</b> <b>zsh_directory_name</b> <b>zsh_directory_name_cdr</b>

       When  this  is done, <b>~[1]</b> will refer to the most recent directory other than $PWD, and so on.  Completion
       after <b>~[</b><u>...</u>  also works.

   <b>Details</b> <b>of</b> <b>directory</b> <b>handling</b>
       This section is for the curious or confused; most users will not need to know this information.

       Recent directories are saved to a file  immediately  and  hence  are  preserved  across  sessions.   Note
       currently no file locking is applied: the list is updated immediately on interactive commands and nowhere
       else  (unlike  history),  and it is assumed you are only going to change directory in one window at once.
       This is not safe on shared accounts, but in any case the system has limited utility when someone else  is
       changing to a different set of directories behind your back.

       To  make this a little safer, only directory changes instituted from the command line, either directly or
       indirectly through shell function calls (but not through subshells, evals,  traps,  completion  functions
       and  the  like)  are  saved.   Shell  functions should use <b>cd</b> <b>-q</b> or <b>pushd</b> <b>-q</b> to avoid side effects if the
       change to the directory is to be invisible at the  command  line.   See  the  contents  of  the  function
       <b>chpwd_recent_dirs</b> for more details.

</pre><h4><b>ABBREVIATED</b> <b>DYNAMIC</b> <b>REFERENCES</b> <b>TO</b> <b>DIRECTORIES</b></h4><pre>
       The  dynamic  directory  naming  system  is  described in the subsection <u>Dynamic</u> <u>named</u> <u>directories</u> of the
       section <u>Filename</u> <u>Expansion</u> in <u><a href="../man1/zshexpn.1.html">zshexpn</a></u>(1).  In this, a reference to <b>~[</b><u>...</u><b>]</b> is expanded by a function found
       by the hooks mechanism.

       The contributed function <b>zsh_directory_name_generic</b> provides a system  allowing  the  user  to  refer  to
       directories with only a limited amount of new code.  It supports all three of the standard interfaces for
       directory  naming:  converting  from a name to a directory, converting in the reverse direction to find a
       short name, and completion of names.

       The main feature of this function is a path-like  syntax,  combining  abbreviations  at  multiple  levels
       separated by ":".  As an example, ~[g:p:s] might specify:
       <b>g</b>      The  top  level  directory  for your git area.  This first component has to match, or the function
              will return indicating another directory name hook function should be tried.

       <b>p</b>      The name of a project within your git area.

       <b>s</b>      The source area within that project.  This allows you to collapse references to  long  hierarchies
              to  a very compact form, particularly if the hierarchies are similar across different areas of the
              disk.

       Name components may be completed: if a description is shown at the top of the  list  of  completions,  it
       includes the path to which previous components expand, while the description for an individual completion
       shows  the  path  segment it would add.  No additional configuration is needed for this as the completion
       system is aware of the dynamic directory name mechanism.

   <b>Usage</b>
       To use the function, first define a wrapper function for your specific case.  We'll  assume  it's  to  be
       autoloaded.   This  can have any name but we'll refer to it as zdn_mywrapper.  This wrapper function will
       define various variables and then call this function with the same arguments that  the  wrapper  function
       gets.  This configuration is described below.

       Then arrange for the wrapper to be run as a zsh_directory_name hook:

              <b>autoload</b> <b>-Uz</b> <b>add-zsh-hook</b> <b>zsh_directory_name_generic</b> <b>zdn_mywrapper</b>
              <b>add-zsh-hook</b> <b>-U</b> <b>zsh_directory_name</b> <b>zdn_mywrapper</b>

   <b>Configuration</b>
       The  wrapper  function  should  define a local associative array zdn_top.  Alternatively, this can be set
       with a style called <b>mapping</b>.  The context for the style is <b>:zdn:</b><u>wrapper-name</u> where  <u>wrapper-name</u>  is  the
       function calling zsh_directory_name_generic; for example:

              <b>zstyle</b> <b>:zdn:zdn_mywrapper:</b> <b>mapping</b> <b>zdn_mywrapper_top</b>

       The  keys  in  this  associative  array  correspond  to  the first component of the name.  The values are
       matching directories.  They may have an optional suffix with a slash followed by a colon and the name  of
       a variable in the same format to give the next component.  (The slash before the colon is to disambiguate
       the  case  where  a  colon  is needed in the path for a drive.  There is otherwise no syntax for escaping
       this, so path components whose names start  with  a  colon  are  not  supported.)   A  special  component
       <b>:default:</b>  specifies  a  variable in the form <b>/:</b><u>var</u> (the path section is ignored and so is usually empty)
       that will be used for the next component if no variable is given for the  path.   Variables  referred  to
       within <b>zdn_top</b> have the same format as <b>zdn_top</b> itself, but contain relative paths.

       For example,

              <b>local</b> <b>-A</b> <b>zdn_top=(</b>
                <b>g</b>   <b><a href="file:~/git">~/git</a></b>
                <b>ga</b>  <b><a href="file:~/alternate/git">~/alternate/git</a></b>
                <b>gs</b>  <b>/scratch/$USER/git/:second2</b>
                <b>:default:</b> <b>/:second1</b>
              <b>)</b>

       This  specifies  the  behaviour of a directory referred to as <b>~[g:...]</b>  or <b>~[ga:...]</b> or <b>~[gs:...]</b>.  Later
       path components are  optional;  in  that  case  <b>~[g]</b>  expands  to  <b><a href="file:~/git">~/git</a></b>,  and  so  on.   <b>gs</b>  expands  to
       <b>/scratch/$USER/git</b> and uses the associative array <b>second2</b> to match the second component; <b>g</b> and <b>ga</b> use the
       associative array <b>second1</b> to match the second component.

       When  expanding  a  name to a directory, if the first component is not <b>g</b> or <b>ga</b> or <b>gs</b>, it is not an error;
       the function simply returns 1 so that a later hook function can be tried.  However,  matching  the  first
       component  commits the function, so if a later component does not match, an error is printed (though this
       still does not stop later hooks from being executed).

       For components after the first, a relative path is expected, but note  that  multiple  levels  may  still
       appear.  Here is an example of <b>second1</b>:

              <b>local</b> <b>-A</b> <b>second1=(</b>
                <b>p</b>   <b>myproject</b>
                <b>s</b>   <b>somproject</b>
                <b>os</b>  <b>otherproject/subproject/:third</b>
              <b>)</b>

       The   path   as  found  from  <b>zdn_top</b>  is  extended  with  the  matching  directory,  so  <b>~[g:p]</b>  becomes
       <b><a href="file:~/git/myproject">~/git/myproject</a></b>.  The slash between is added automatically (it's not possible to have a  later  component
       modify the name of a directory already matched).  Only <b>os</b> specifies a variable for a third component, and
       there's  no  <b>:default:</b>, so it's an error to use a name like <b>~[g:p:x]</b> or <b>~[ga:s:y]</b> because there's nowhere
       to look up the <b>x</b> or <b>y</b>.

       The associative arrays need to be visible within this  function;  the  generic  function  therefore  uses
       internal variable names beginning <b>_zdn_</b> in order to avoid clashes.  Note that the variable <b>reply</b> needs to
       be passed back to the shell, so should not be local in the calling function.

       The  function  does  not  test whether directories assembled by component actually exist; this allows the
       system to work across automounted file systems.  The error from the command trying to use a  non-existent
       directory should be sufficient to indicate the problem.

   <b>Complete</b> <b>example</b>
       Here  is a full fictitious but usable autoloadable definition of the example function defined by the code
       above.   So  <b>~[gs:p:s]</b>  expands  to  <b>/scratch/$USER/git/myscratchproject/top/srcdir</b>  (with   <b>$USER</b>   also
       expanded).

              <b>local</b> <b>-A</b> <b>zdn_top=(</b>
                <b>g</b>   <b><a href="file:~/git">~/git</a></b>
                <b>ga</b>  <b><a href="file:~/alternate/git">~/alternate/git</a></b>
                <b>gs</b>  <b>/scratch/$USER/git/:second2</b>
                <b>:default:</b> <b>/:second1</b>
              <b>)</b>

              <b>local</b> <b>-A</b> <b>second1=(</b>
                <b>p</b>   <b>myproject</b>
                <b>s</b>   <b>somproject</b>
                <b>os</b>  <b>otherproject/subproject/:third</b>
              <b>)</b>

              <b>local</b> <b>-A</b> <b>second2=(</b>
                <b>p</b>   <b>myscratchproject</b>
                <b>s</b>   <b>somescratchproject</b>
              <b>)</b>

              <b>local</b> <b>-A</b> <b>third=(</b>
                <b>s</b>   <b>top/srcdir</b>
                <b>d</b>   <b>top/documentation</b>
              <b>)</b>

              <b>#</b> <b>autoload</b> <b>not</b> <b>needed</b> <b>if</b> <b>you</b> <b>did</b> <b>this</b> <b>at</b> <b>initialisation...</b>
              <b>autoload</b> <b>-Uz</b> <b>zsh_directory_name_generic</b>
              <b>zsh_directory_name_generic</b> <b>"$@</b>

       It  is  also possible to use global associative arrays, suitably named, and set the style for the context
       of your wrapper function to refer to this.  Then your set up code would contain the following:

              <b>typeset</b> <b>-A</b> <b>zdn_mywrapper_top=(...)</b>
              <b>#</b> <b>...</b> <b>and</b> <b>so</b> <b>on</b> <b>for</b> <b>other</b> <b>associative</b> <b>arrays</b> <b>...</b>
              <b>zstyle</b> <b>':zdn:zdn_mywrapper:'</b> <b>mapping</b> <b>zdn_mywrapper_top</b>
              <b>autoload</b> <b>-Uz</b> <b>add-zsh-hook</b> <b>zsh_directory_name_generic</b> <b>zdn_mywrapper</b>
              <b>add-zsh-hook</b> <b>-U</b> <b>zsh_directory_name</b> <b>zdn_mywrapper</b>

       and the function <b>zdn_mywrapper</b> would contain only the following:

              <b>zsh_directory_name_generic</b> <b>"$@"</b>

</pre><h4><b>GATHERING</b> <b>INFORMATION</b> <b>FROM</b> <b>VERSION</b> <b>CONTROL</b> <b>SYSTEMS</b></h4><pre>
       In a lot of cases, it is nice to automatically retrieve information from version control systems  (VCSs),
       such  as  subversion, CVS or git, to be able to provide it to the user; possibly in the user's prompt. So
       that you can instantly tell which branch you are currently on, for example.

       In order to do that, you may use the <b>vcs_info</b> function.

       The following VCSs are supported, showing the abbreviated name by which they are referred to  within  the
       system:
       Bazaar (<b>bzr</b>)
              <b>https://bazaar.canonical.com/</b>
       Codeville (<b>cdv</b>)
              <b><a href="http://freecode.com/projects/codeville/">http://freecode.com/projects/codeville/</a></b>
       Concurrent Versioning System (<b>cvs</b>)
              <b>https://www.nongnu.org/cvs/</b>
       Darcs (<b>darcs</b>)
              <b><a href="http://darcs.net/">http://darcs.net/</a></b>
       Fossil (<b>fossil</b>)
              <b>https://fossil-scm.org/</b>
       Git (<b>git</b>)
              <b>https://git-scm.com/</b>
       GNU arch (<b>tla</b>)
              <b>https://www.gnu.org/software/gnu-arch/</b>
       Mercurial (<b>hg</b>)
              <b>https://www.mercurial-scm.org/</b>
       Monotone (<b>mtn</b>)
              <b>https://monotone.ca/</b>
       Perforce (<b>p4</b>)
              <b>https://www.perforce.com/</b>
       Subversion (<b>svn</b>)
              <b>https://subversion.apache.org/</b>
       SVK (<b>svk</b>)
              <b>https://svk.bestpractical.com/</b>

       There is also support for the patch management system <b>quilt</b> (<b>https://savannah.nongnu.org/projects/quilt</b>).
       See <b>Quilt</b> <b>Support</b> below for details.

       To load <b>vcs_info</b>:

              <b>autoload</b> <b>-Uz</b> <b>vcs_info</b>

       It  can  be  used  in  any existing prompt, because it does not require any specific <b>$psvar</b> entries to be
       available.

   <b>Quickstart</b>
       To get this feature working quickly (including colors), you can do the following  (assuming,  you  loaded
       <b>vcs_info</b> properly - see above):

              <b>zstyle</b> <b>':vcs_info:*'</b> <b>actionformats</b> <b>\</b>
                  <b>'%F{5}(%f%s%F{5})%F{3}-%F{5}[%F{2}%b%F{3}|%F{1}%a%F{5}]%f</b> <b>'</b>
              <b>zstyle</b> <b>':vcs_info:*'</b> <b>formats</b>       <b>\</b>
                  <b>'%F{5}(%f%s%F{5})%F{3}-%F{5}[%F{2}%b%F{5}]%f</b> <b>'</b>
              <b>zstyle</b> <b>':vcs_info:(sv[nk]|bzr):*'</b> <b>branchformat</b> <b>'%b%F{1}:%F{3}%r'</b>
              <b>precmd</b> <b>()</b> <b>{</b> <b>vcs_info</b> <b>}</b>
              <b>PS1='%F{5}[%F{2}%n%F{5}]</b> <b>%F{3}%3~</b> <b>${vcs_info_msg_0_}%f%#</b> <b>'</b>

       Obviously,  the  last  two  lines are there for demonstration. You need to call <b>vcs_info</b> from your <b>precmd</b>
       function. Once that is done you need a <u>single</u> <u>quoted</u> <b>'${vcs_info_msg_0_}'</b> in your prompt.

       To be able to use <b>'${vcs_info_msg_0_}'</b> directly in your prompt like this,  you  will  need  to  have  the
       <b>PROMPT_SUBST</b> option enabled.

       Now call the <b>vcs_info_printsys</b> utility from the command line:

              <b>%</b> <b>vcs_info_printsys</b>
              <b>##</b> <b>list</b> <b>of</b> <b>supported</b> <b>version</b> <b>control</b> <b>backends:</b>
              <b>##</b> <b>disabled</b> <b>systems</b> <b>are</b> <b>prefixed</b> <b>by</b> <b>a</b> <b>hash</b> <b>sign</b> <b>(#)</b>
              <b>bzr</b>
              <b>cdv</b>
              <b>cvs</b>
              <b>darcs</b>
              <b>fossil</b>
              <b>git</b>
              <b>hg</b>
              <b>mtn</b>
              <b>p4</b>
              <b>svk</b>
              <b>svn</b>
              <b>tla</b>
              <b>##</b> <b>flavours</b> <b>(cannot</b> <b>be</b> <b>used</b> <b>in</b> <b>the</b> <b>enable</b> <b>or</b> <b>disable</b> <b>styles;</b> <b>they</b>
              <b>##</b> <b>are</b> <b>enabled</b> <b>and</b> <b>disabled</b> <b>with</b> <b>their</b> <b>master</b> <b>[git-svn</b> <b>-&gt;</b> <b>git])</b>
              <b>##</b> <b>they</b> <b>*can*</b> <b>be</b> <b>used</b> <b>in</b> <b>contexts:</b> <b>':vcs_info:git-svn:*'.</b>
              <b>git-p4</b>
              <b>git-svn</b>
              <b>hg-git</b>
              <b>hg-hgsubversion</b>
              <b>hg-hgsvn</b>

       You  may not want all of these because there is no point in running the code to detect systems you do not
       use.  So there is a way to disable some backends altogether:

              <b>zstyle</b> <b>':vcs_info:*'</b> <b>disable</b> <b>bzr</b> <b>cdv</b> <b>darcs</b> <b>mtn</b> <b>svk</b> <b>tla</b>

       You may also pick a few from that list and enable only those:

              <b>zstyle</b> <b>':vcs_info:*'</b> <b>enable</b> <b>git</b> <b>cvs</b> <b>svn</b>

       If you rerun <b>vcs_info_printsys</b> after one of these commands, you will  see  the  backends  listed  in  the
       <b>disable</b> style (or backends not in the <b>enable</b> style - if you used that) marked as disabled by a hash sign.
       That means the detection of these systems is skipped <u>completely</u>. No wasted time there.

   <b>Configuration</b>
       The <b>vcs_info</b> feature can be configured via <b>zstyle</b>.

       First, the context in which we are working:
              <b>:vcs_info:</b><u>vcs-string</u><b>:</b><u>user-context</u><b>:</b><u>repo-root-name</u>

       <u>vcs-string</u>
              is one of: <b>git</b>, <b>git-svn</b>, <b>git-p4</b>, <b>hg</b>, <b>hg-git</b>, <b>hg-hgsubversion</b>, <b>hg-hgsvn</b>, <b>darcs</b>, <b>bzr</b>, <b>cdv</b>, <b>mtn</b>, <b>svn</b>,
              <b>cvs</b>,  <b>svk</b>,  <b>tla</b>,  <b>p4</b>  or <b>fossil</b>.  This is followed by `<b>.quilt-</b><u>quilt-mode</u>' in Quilt mode (see <b>Quilt</b>
              <b>Support</b> for details) and by `<b>+</b><u>hook-name</u>' while  hooks  are  active  (see  <b>Hooks</b>  <b>in</b>  <b>vcs_info</b>  for
              details).

              Currently,  hooks in quilt mode don't add the `<b>.quilt-</b><u>quilt-mode</u>' information.  This may change in
              the future.

       <u>user-context</u>
              is a freely configurable string, assignable by the user as the first argument to <b>vcs_info</b> (see its
              description below).

       <u>repo-root-name</u>
              is the name of a repository in which you want a style to match. So, if you want a setting specific
              to <b>/usr/src/zsh</b>, with that being a CVS checkout, you can set <u>repo-root-name</u> to <b>zsh</b> to make it so.

       There are three special values for <u>vcs-string</u>: The first is named <b>-init-</b>, that is in effect  as  long  as
       there  was  no  decision  what VCS backend to use. The second is <b>-preinit-</b>; it is used <u>before</u> <b>vcs_info</b> is
       run, when initializing the data exporting variables. The third special value is <b>formats</b> and  is  used  by
       the <b>vcs_info_lastmsg</b> for looking up its styles.

       The  initial  value  of <u>repo-root-name</u> is <b>-all-</b> and it is replaced with the actual name, as soon as it is
       known. Only use this part of the context for defining the <b>formats</b>, <b>actionformats</b> or <b>branchformat</b>  styles,
       as  it  is  guaranteed that <u>repo-root-name</u> is set up correctly for these only. For all other styles, just
       use <b>'*'</b> instead.

       There are two pre-defined values for <u>user-context</u>:
       <b>default</b>
              the one used if none is specified
       <b>command</b>
              used by vcs_info_lastmsg to lookup its styles

       You can of course use <b>':vcs_info:*'</b> to match all VCSs in all user-contexts at once.

       This is a description of all styles that are looked up.

       <b>formats</b>
              A list of formats, used when actionformats is not used (which is most of the time).

       <b>actionformats</b>
              A list of formats, used if there is a special action going on in your current repository; like  an
              interactive rebase or a merge conflict.

       <b>branchformat</b>
              Some  backends replace <b>%b</b> in the formats and actionformats styles above, not only by a branch name
              but also by a revision number. This style lets you modify how that string should look.

       <b>nvcsformats</b>
              These "formats" are set when we didn't detect a version control system for the  current  directory
              or  <b>vcs_info</b>  was  disabled.  This  is  useful  if  you  want <b>vcs_info</b> to completely take over the
              generation of your prompt. You would do  something  like  <b>PS1='${vcs_info_msg_0_}'</b>  to  accomplish
              that.

       <b>hgrevformat</b>
              <b>hg</b>  uses both a hash and a revision number to reference a specific changeset in a repository. With
              this style you can format the revision string (see <b>branchformat</b>) to include either or  both.  It's
              only  useful  when  <b>get-revision</b> is true. Note, the full 40-character revision id is not available
              (except when using the <b>use-simple</b> option) because executing hg more than once per  prompt  is  too
              slow; you may customize this behavior using hooks.

       <b>max-exports</b>
              Defines the maximum number of <b>vcs_info_msg_*_</b> variables <b>vcs_info</b> will set.

       <b>enable</b> A  list  of backends you want to use. Checked in the <b>-init-</b> context. If this list contains an item
              called <b>NONE</b> no backend is used at all and <b>vcs_info</b> will do nothing. If  this  list  contains  <b>ALL</b>,
              <b>vcs_info</b>  will  use  all  known  backends. Only with <b>ALL</b> in <b>enable</b> will the <b>disable</b> style have any
              effect. <b>ALL</b> and <b>NONE</b> are case insensitive.

       <b>disable</b>
              A list of VCSs you don't want <b>vcs_info</b> to test for repositories (checked in  the  <b>-init-</b>  context,
              too). Only used if <b>enable</b> contains <b>ALL</b>.

       <b>disable-patterns</b>
              A list of patterns that are checked against <b>$PWD</b>. If a pattern matches, <b>vcs_info</b> will be disabled.
              This style is checked in the <b>:vcs_info:-init-:*:-all-</b> context.

              Say,  <b><a href="file:~/.zsh">~/.zsh</a></b> is a directory under version control, in which you do not want <b>vcs_info</b> to be active,
              do:
                     <b>zstyle</b> <b>':vcs_info:*'</b> <b>disable-patterns</b> <b>"${(b)HOME}/.zsh(|/*)"</b>

       <b>use-quilt</b>
              If enabled, the <b>quilt</b> support code is active in `addon' mode.  See <b>Quilt</b> <b>Support</b> for details.

       <b>quilt-standalone</b>
              If enabled, `standalone' mode detection is attempted if no VCS is active in a given directory. See
              <b>Quilt</b> <b>Support</b> for details.

       <b>quilt-patch-dir</b>
              Overwrite the value of the <b>$QUILT_PATCHES</b> environment variable. See <b>Quilt</b> <b>Support</b> for details.

       <b>quiltcommand</b>
              When <b>quilt</b> itself is called in quilt support, the value of this style is used as the command name.

       <b>check-for-changes</b>
              If enabled, this style causes the <b>%c</b> and <b>%u</b> format escapes to show when the working directory  has
              uncommitted  changes.  The  strings displayed by these escapes can be controlled via the <b>stagedstr</b>
              and <b>unstagedstr</b> styles. The only backends that currently support this option are <b>git</b>, <b>hg</b>, and  <b>bzr</b>
              (the latter two only support unstaged).

              For this style to be evaluated with the <b>hg</b> backend, the <b>get-revision</b> style needs to be set and the
              <b>use-simple</b> style needs to be unset. The latter is the default; the former is not.

              With the <b>bzr</b> backend, <u>lightweight</u> <u>checkouts</u> only honor this style if the <b>use-server</b> style is set.

              Note,  the  actions  taken  if  this style is enabled are potentially expensive (read: they may be
              slow, depending on how big the current repository is).  Therefore, it is disabled by default.

       <b>check-for-staged-changes</b>
              This style is like <b>check-for-changes</b>, but it never checks the worktree files, only the metadata in
              the <b>.${vcs}</b> dir.  Therefore, this style initializes only the <b>%c</b> escape (with  <b>stagedstr</b>)  but  not
              the <b>%u</b> escape.  This style is faster than <b>check-for-changes</b>.

              In  the  <b>git</b> backend, this style checks for changes in the index.  Other backends do not currently
              implement this style.

              This style is disabled by default.

       <b>stagedstr</b>
              This string will be used in the <b>%c</b> escape if there are staged changes in the repository.

       <b>unstagedstr</b>
              This string will be used in the <b>%u</b> escape if there are unstaged changes in the repository.

       <b>command</b>
              This style causes <b>vcs_info</b> to use the supplied string as the command to use as the  VCS's  binary.
              Note, that setting this in '<b>:vcs_info:*</b>' is not a good idea.

              If  the  value  of this style is empty (which is the default), the used binary name is the name of
              the backend in use (e.g. <b>svn</b> is used in an <b>svn</b> repository).

              The <b>repo-root-name</b> part in the context is always the default <b>-all-</b> when this style is looked up.

              For example, this style can be used to use binaries  from  non-default  installation  directories.
              Assume,   <b>git</b>   is  installed  in  <a href="file:/usr/bin">/usr/bin</a>  but  your  sysadmin  installed  a  newer  version  in
              /usr/local/bin. Instead of changing the order of your <b>$PATH</b> parameter, you can do this:
                     <b>zstyle</b> <b>':vcs_info:git:*:-all-'</b> <b>command</b> <b>/usr/local/bin/git</b>

       <b>use-server</b>
              This is used by the Perforce backend (<b>p4</b>) to decide if it should contact the  Perforce  server  to
              find  out if a directory is managed by Perforce.  This is the only reliable way of doing this, but
              runs the risk of a delay if the server name cannot be found.  If the  server  (more  specifically,
              the  <u>host</u><b>:</b><u>port</u>  pair  describing  the  server)  cannot  be  contacted,  its  name  is put into the
              associative array <b>vcs_info_p4_dead_servers</b> and is not contacted again during the session until  it
              is  removed  by hand.  If you do not set this style, the <b>p4</b> backend is only usable if you have set
              the environment variable <b>P4CONFIG</b> to a  file  name  and  have  corresponding  files  in  the  root
              directories  of  each  Perforce  client.  See comments in the function <b>VCS_INFO_detect_p4</b> for more
              detail.

              The Bazaar backend (<b>bzr</b>) uses this to permit contacting the server  about  lightweight  checkouts,
              see the <b>check-for-changes</b> style.

       <b>use-simple</b>
              If  there  are  two  different  ways  of  gathering information, you can select the simpler one by
              setting this style to true; the default is to use the not-that-simple code, which is potentially a
              lot slower but might be more accurate in all possible cases. This style is used by  the  <b>bzr</b>,  <b>hg</b>,
              and  <b>git</b>  backends.  In  the  case  of <b>hg</b> it will invoke the external hexdump program to parse the
              binary dirstate cache file; this method will not return the local revision number.

       <b>get-revision</b>
              If set to true, vcs_info goes the extra mile to figure out the revision  of  a  repository's  work
              tree  (currently for the <b>git</b> and <b>hg</b> backends, where this kind of information is not always vital).
              For <b>git</b>, the hash value of the currently checked out commit is available  via  the  <b>%i</b>  expansion.
              With <b>hg</b>, the local revision number and the corresponding global hash are available via <b>%i</b>.

       <b>get-mq</b> If  set  to true, the <b>hg</b> backend will look for a Mercurial Queue (<b>mq</b>) patch directory. Information
              will be available via the `<b>%m</b>' replacement.

       <b>get-bookmarks</b>
              If set to true, the <b>hg</b> backend will try to get a list of current bookmarks. They will be available
              via the `<b>%m</b>' replacement.

              The default is to generate a comma-separated  list  of  all  bookmark  names  that  refer  to  the
              currently  checked  out  revision.   If a bookmark is active, its name is suffixed an asterisk and
              placed first in the list.

       <b>use-prompt-escapes</b>
              Determines if we assume that the assembled string from <b>vcs_info</b> includes prompt escapes. (Used  by
              <b>vcs_info_lastmsg</b>.)

       <b>debug</b>  Enable  debugging  output  to  track  possible  problems.  Currently  this  style  is only used by
              <b>vcs_info</b>'s hooks system.

       <b>hooks</b>  A list style that defines hook-function names. See <b>Hooks</b> <b>in</b> <b>vcs_info</b> below for details.

       <b>patch-format</b>
       <b>nopatch-format</b>
              This pair of styles  format  the  patch  information  used  by  the  <b>%m</b>  expando  in  formats  and
              actionformats for the <b>git</b> and <b>hg</b> backends.  The value is subject to certain <b>%</b>-expansions described
              below.    The   expanded   value   is   made   available  in  the  global  <b>backend_misc</b>  array  as
              <b>${backend_misc[patches]}</b> (also if a <b>set-patch-format</b> hook is used).

       <b>get-unapplied</b>
              This boolean style controls whether a backend should attempt to gather a list of unapplied patches
              (for example with Mercurial Queue patches).

              Used by the <b>quilt</b>, <b>hg</b>, and <b>git</b> backends.

       The default values for these styles in all contexts are:

       <b>formats</b>
              " (%s)-[%b]%u%c-"
       <b>actionformats</b>
              " (%s)-[%b|%a]%u%c-"
       <b>branchformat</b>
              "%b:%r" (for bzr, svn, svk and hg)
       <b>nvcsformats</b>
              ""
       <b>hgrevformat</b>
              "%r:%h"
       <b>max-exports</b>
              2
       <b>enable</b> ALL
       <b>disable</b>
              (empty list)
       <b>disable-patterns</b>
              (empty list)
       <b>check-for-changes</b>
              false
       <b>check-for-staged-changes</b>
              false
       <b>stagedstr</b>
              (string: "S")
       <b>unstagedstr</b>
              (string: "U")
       <b>command</b>
              (empty string)
       <b>use-server</b>
              false
       <b>use-simple</b>
              false
       <b>get-revision</b>
              false
       <b>get-mq</b> true
       <b>get-bookmarks</b>
              false
       <b>use-prompt-escapes</b>
              true
       <b>debug</b>  false
       <b>hooks</b>  (empty list)
       <b>use-quilt</b>
              false
       <b>quilt-standalone</b>
              false
       <b>quilt-patch-dir</b>
              empty - use <b>$QUILT_PATCHES</b>
       <b>quiltcommand</b>
              quilt
       <b>patch-format</b>
              <u>backend</u> <u>dependent</u>
       <b>nopatch-format</b>
              <u>backend</u> <u>dependent</u>
       <b>get-unapplied</b>
              false

       In normal <b>formats</b> and <b>actionformats</b> the following replacements are done:

       <b>%s</b>     The VCS in use (git, hg, svn, etc.).
       <b>%b</b>     Information about the current branch.
       <b>%a</b>     An identifier that describes the action. Only makes sense in <b>actionformats</b>.
       <b>%i</b>     The current revision number or identifier. For <b>hg</b> the <b>hgrevformat</b> style may be used  to  customize
              the output.
       <b>%c</b>     The string from the <b>stagedstr</b> style if there are staged changes in the repository.
       <b>%u</b>     The string from the <b>unstagedstr</b> style if there are unstaged changes in the repository.
       <b>%R</b>     The base directory of the repository.
       <b>%r</b>     The repository name. If <b>%R</b> is <b>/foo/bar/repoXY</b>, <b>%r</b> is <b>repoXY</b>.
       <b>%S</b>     A subdirectory within a repository. If <b>$PWD</b> is <b>/foo/bar/repoXY/beer/tasty</b>, <b>%S</b> is <b>beer/tasty</b>.
       <b>%m</b>     A  "misc"  replacement.  It  is  at  the discretion of the backend to decide what this replacement
              expands to.

              The <b>hg</b> and <b>git</b> backends  use  this  expando  to  display  patch  information.   <b>hg</b>  sources  patch
              information  from  the  <b>mq</b>  extensions; <b>git</b> from in-progress <b>rebase</b> and <b>cherry-pick</b> operations and
              from the <b>stgit</b> extension.  The  <b>patch-format</b>  and  <b>nopatch-format</b>  styles  control  the  generated
              string.  The former is used when at least one patch from the patch queue has been applied, and the
              latter otherwise.

              The <b>hg</b> backend displays bookmark information in this expando (in addition to <b>mq</b> information).  See
              the  <b>get-mq</b>  and  <b>get-bookmarks</b> styles.  Both of these styles may be enabled at the same time.  If
              both are enabled, both resulting strings will be shown  separated  by  a  semicolon  (that  cannot
              currently be customized).

              The <b>quilt</b> `standalone' backend sets this expando to the same value as the <b>%Q</b> expando.

       <b>%Q</b>     Quilt  series  information.   When  quilt  is  used  (either  in `addon' mode or as a `standalone'
              backend), this expando is set to the quilt series' <b>patch-format</b> string.  The <b>set-patch-format</b> hook
              and <b>nopatch-format</b> style are honoured.

              See <b>Quilt</b> <b>Support</b> below for details.

       In <b>branchformat</b> these replacements are done:

       <b>%b</b>     The branch name. For <b>hg</b>, the branch name can include a topic name.
       <b>%r</b>     The current revision number or the <b>hgrevformat</b> style for <b>hg</b>.

       In <b>hgrevformat</b> these replacements are done:

       <b>%r</b>     The current local revision number.
       <b>%h</b>     The current global revision identifier.

       In <b>patch-format</b> and <b>nopatch-format</b> these replacements are done:

       <b>%p</b>     The name of the top-most applied patch; may be overridden by the <b>applied-string</b> hook.
       <b>%u</b>     The number of unapplied patches; may be overridden by the <b>unapplied-string</b> hook.
       <b>%n</b>     The number of applied patches.
       <b>%c</b>     The number of unapplied patches.
       <b>%a</b>     The number of all patches (<b>%a</b> <b>=</b> <b>%n</b> <b>+</b> <b>%c</b>).
       <b>%g</b>     The names of active <b>mq</b> guards (<b>hg</b> backend).
       <b>%G</b>     The number of active <b>mq</b> guards (<b>hg</b> backend).

       Not all VCS backends have to support all replacements. For <b>nvcsformats</b> no replacements are  performed  at
       all, it is just a string.

   <b>Oddities</b>
       If  you want to use the <b>%b</b> (bold off) prompt expansion in <b>formats</b>, which expands <b>%b</b> itself, use <b>%%b</b>. That
       will cause the <b>vcs_info</b> expansion to replace <b>%%b</b> with <b>%b</b>, so that zsh's prompt  expansion  mechanism  can
       handle  it. Similarly, to hand down <b>%b</b> from <b>branchformat</b>, use <b>%%%%b</b>. Sorry for this inconvenience, but it
       cannot be easily avoided. Luckily we do not clash with a lot of prompt expansions and this only needs  to
       be done for those.

       When one of the <b>gen-applied-string</b>, <b>gen-unapplied-string</b>, and <b>set-patch-format</b> hooks is defined, applying
       <b>%</b>-escaping  (`<b>foo=${foo//'%'/%%}</b>') to the interpolated values for use in the prompt is the responsibility
       of those hooks (jointly); when neither of those hooks is defined, <b>vcs_info</b> handles  escaping  by  itself.
       We regret this coupling, but it was required for backwards compatibility.

   <b>Quilt</b> <b>Support</b>
       <b>Quilt</b>  is  not  a  version  control  system,  therefore this is not implemented as a backend. It can help
       keeping track of a series of patches. People use it to keep a set of changes they want to use on  top  of
       software  packages  (which is tightly integrated into the package build process - the Debian project does
       this for a large number of packages). Quilt can also help individual developers keep track of  their  own
       patches on top of real version control systems.

       The <b>vcs_info</b> integration tries to support both ways of using quilt by having two slightly different modes
       of operation: `addon' mode and `standalone' mode).

       Quilt integration is off by default; to enable it, set the <b>use-quilt</b> style, and add <b>%Q</b> to your <b>formats</b> or
       <b>actionformats</b> style:
              <b>zstyle</b> <b>':vcs_info:*'</b> <b>use-quilt</b> <b>true</b>

       Styles  looked  up  from the Quilt support code include `<b>.quilt-</b><u>quilt-mode</u>' in the <u>vcs-string</u> part of the
       context,     where      <u>quilt-mode</u>      is      either      <b>addon</b>      or      <b>standalone</b>.       Example:
       <b>:vcs_info:git.quilt-addon:default:</b><u>repo-root-name</u>.

       For  `addon'  mode  to  become  active  <b>vcs_info</b> must have already detected a real version control system
       controlling the directory. If that is the case, a directory that holds quilt's patches needs to be found.
       That directory is configurable via the `<b>QUILT_PATCHES</b>' environment variable. If that variable exists  its
       value is used, otherwise the value `<b>patches</b>' is assumed. The value from <b>$QUILT_PATCHES</b> can be overwritten
       using  the  `<b>quilt-patch-dir</b>'  style.  (Note:  you  can  use <b>vcs_info</b> to keep the value of <b>$QUILT_PATCHES</b>
       correct all the time via the <b>post-quilt</b> hook).

       When the directory in question is found, quilt is assumed to  be  active.  To  gather  more  information,
       <b>vcs_info</b>  looks  for  a  directory called `.pc'; Quilt uses that directory to track its current state. If
       this directory does not exist we know that quilt has not done anything to the working directory (read: no
       patches have been applied yet).

       If patches are applied, <b>vcs_info</b> will try to find out which. If you want  to  know  which  patches  of  a
       series are not yet applied, you need to activate the <b>get-unapplied</b> style in the appropriate context.

       <b>vcs_info</b>  allows  for  very  detailed  control  over  how  the gathered information is presented (see the
       <b>Configuration</b> and <b>Hooks</b> <b>in</b> <b>vcs_info</b> sections), all of which are documented below. Note there are a number
       of other patch tracking systems that work on top of a certain version control system (like <b>stgit</b> for <b>git</b>,
       or <b>mq</b> for <b>hg</b>); the configuration for systems like that are generally configured the same way as the <b>quilt</b>
       support.

       If the <b>quilt</b> support is working in `addon' mode, the produced string is  available  as  a  simple  format
       replacement (<b>%Q</b> to be precise), which can be used in <b>formats</b> and <b>actionformats</b>; see below for details).

       If,  on  the  other  hand,  the support code is working in `standalone' mode, <b>vcs_info</b> will pretend as if
       <b>quilt</b> were an actual version control system. That means that the version control system identifier (which
       otherwise would be something like `svn' or `cvs') will be set to `<b>-quilt-</b>'. This has implications on  the
       used  style  context  where  this identifier is the second element. <b>vcs_info</b> will have filled in a proper
       value for the "repository's" root directory and the string containing the information about quilt's state
       will be available as the `misc' replacement (and <b>%Q</b> for compatibility with `addon' mode).

       What is left to discuss is how `standalone' mode is  detected.  The  detection  itself  is  a  series  of
       searches for directories. You can have this detection enabled all the time in every directory that is not
       otherwise  under  version  control. If you know there is only a limited set of trees where you would like
       <b>vcs_info</b> to try and look for Quilt in `standalone' mode to minimise the amount of searching on every call
       to <b>vcs_info</b>, there are a number of ways to do that:

       Essentially, `standalone' mode detection is controlled by a style  called  `<b>quilt-standalone</b>'.  It  is  a
       string style and its value can have different effects. The simplest values are: `<b>always</b>' to run detection
       every time <b>vcs_info</b> is run, and `<b>never</b>' to turn the detection off entirely.

       If  the  value  of <b>quilt-standalone</b> is something else, it is interpreted differently. If the value is the
       name of a scalar variable the value of that variable is checked and  that  value  is  used  in  the  same
       `always'/`never' way as described above.

       If  the  value  of  <b>quilt-standalone</b>  is an array, the elements of that array are used as directory names
       under which you want the detection to be active.

       If <b>quilt-standalone</b> is an associative array, the keys are taken as directory names under which  you  want
       the detection to be active, but only if the corresponding value is the string `<b>true</b>'.

       Last,  but  not least, if the value of <b>quilt-standalone</b> is the name of a function, the function is called
       without arguments and the return value decides whether detection should be active. A `0' return value  is
       true; a non-zero return value is interpreted as false.

       Note,  if there is both a function and a variable by the name of <b>quilt-standalone</b>, the function will take
       precedence.

   <b>Function</b> <b>Descriptions</b> <b>(Public</b> <b>API)</b>
       <b>vcs_info</b> [<u>user-context</u>]
              The main function, that runs all backends and assembles all data into <b>${vcs_info_msg_*_}</b>. This  is
              the  function  you  want to call from <b>precmd</b> if you want to include up-to-date information in your
              prompt (see <b>Variable</b> <b>Description</b> below).  If an argument  is  given,  that  string  will  be  used
              instead of <b>default</b> in the <u>user-context</u> field of the style context.

       <b>vcs_info_hookadd</b>
              Statically  registers  a  number  of  functions to a given hook. The hook needs to be given as the
              first argument; what follows is a list of hook-function names to register to the hook. The  `<b>+vi-</b>'
              prefix needs to be left out here. See <b>Hooks</b> <b>in</b> <b>vcs_info</b> below for details.

       <b>vcs_info_hookdel</b>
              Remove  hook-functions  from  a  given  hook.  The  hook needs to be given as the first non-option
              argument; what follows is a list of hook-function names to un-register from the hook. If  `<b>-a</b>'  is
              used  as the first argument, <b>all</b> occurrences of the functions are unregistered. Otherwise only the
              last occurrence is removed (if a function was registered to a hook more  than  once).  The  `<b>+vi-</b>'
              prefix needs to be left out here.  See <b>Hooks</b> <b>in</b> <b>vcs_info</b> below for details.

       <b>vcs_info_lastmsg</b>
              Outputs  the  current  values  of  <b>${vcs_info_msg_*_}</b>.   Takes  into  account  the  value  of  the
              <b>use-prompt-escapes</b> style in <b>':vcs_info:formats:command:-all-'</b>. It  also  only  prints  <b>max-exports</b>
              values.

       <b>vcs_info_printsys</b> [<u>user-context</u>]
              Prints  a list of all supported version control systems. Useful to find out possible contexts (and
              which of them are enabled) or values for the <b>disable</b> style.

       <b>vcs_info_setsys</b>
              Initializes <b>vcs_info</b>'s internal list of available  backends.  With  this  function,  you  can  add
              support for new VCSs without restarting the shell.

       All functions named <b>VCS_INFO_*</b> are for internal use only.

   <b>Variable</b> <b>Description</b>
       <b>${vcs_info_msg_</b><u>N</u><b>_}</b> (Note the trailing underscore)
              Where  <u>N</u>  is  an  integer,  e.g.,  <b>vcs_info_msg_0_</b>.  These  variables  are  the  storage  for  the
              informational message the last <b>vcs_info</b> call has assembled. These are strongly  connected  to  the
              <b>formats</b>,  <b>actionformats</b>  and <b>nvcsformats</b> styles described above. Those styles are lists. The first
              member of that list gets expanded into <b>${vcs_info_msg_0_}</b>, the second into <b>${vcs_info_msg_1_}</b>  and
              the Nth into <b>${vcs_info_msg_N-1_}</b>. (See the <b>max-exports</b> style above.)

       All variables named <b>VCS_INFO_*</b> are for internal use only.

   <b>Hooks</b> <b>in</b> <b>vcs_info</b>
       Hooks  are  places  in  <b>vcs_info</b> where you can run your own code. That code can communicate with the code
       that called it and through that, change the system's behaviour.

       For configuration, hooks change the style context:
              <b>:vcs_info:</b><u>vcs-string</u><b>+</b><u>hook-name</u><b>:</b><u>user-context</u><b>:</b><u>repo-root-name</u>

       To register functions to a hook, you need to list them in the <b>hooks</b> style in the appropriate context.

       Example:
              <b>zstyle</b> <b>':vcs_info:*+foo:*'</b> <b>hooks</b> <b>bar</b> <b>baz</b>

       This registers functions to the hook `foo' for all backends. In order to avoid  namespace  problems,  all
       registered  function  names  are prepended by a `<b>+vi-</b>', so the actual functions called for the `foo' hook
       are `<b>+vi-bar</b>' and `<b>+vi-baz</b>'.

       If you would like to register a function to a hook regardless of the current context,  you  may  use  the
       <b>vcs_info_hookadd</b>  function.  To remove a function that was added like that, the <b>vcs_info_hookdel</b> function
       can be used.

       If something seems weird, you can enable the  `debug'  boolean  style  in  the  proper  context  and  the
       hook-calling code will print what it tried to execute and whether the function in question existed.

       When  you  register  more than one function to a hook, all functions are executed one after another until
       one function returns non-zero or until all functions have been called. Context-sensitive  hook  functions
       are executed <b>before</b> statically registered ones (the ones added by <b>vcs_info_hookadd</b>).

       You may pass data between functions via an associative array, <b>user_data</b>.  For example:
              <b>+vi-git-myfirsthook(){</b>
                  <b>user_data[myval]=$myval</b>
              <b>}</b>
              <b>+vi-git-mysecondhook(){</b>
                  <b>#</b> <b>do</b> <b>something</b> <b>with</b> <b>${user_data[myval]}</b>
              <b>}</b>

       There are a number of variables that are special in hook contexts:

       <b>ret</b>    The  return  value  that  the  hooks  system  will return to the caller. The default is an integer
              `zero'. If and how a changed <b>ret</b> value changes the execution of the caller depends on the specific
              hook. See the hook documentation below for details.

       <b>hook_com</b>
              An associated array which is  used  for  bidirectional  communication  from  the  caller  to  hook
              functions. The used keys depend on the specific hook.

       <b>context</b>
              The  active  context of the hook. Functions that wish to change this variable should make it local
              scope first.

       <b>vcs</b>    The current VCS after it was detected. The same values as in the enable/disable  style  are  used.
              Available in all hooks except <b>start-up</b>.

       Finally, the full list of currently available hooks:

       <b>start-up</b>
              Called  after starting <b>vcs_info</b> but before the VCS in this directory is determined. It can be used
              to deactivate <b>vcs_info</b> temporarily if necessary. When <b>ret</b> is set to <b>1</b>, <b>vcs_info</b>  aborts  and  does
              nothing;  when  set  to  <b>2</b>,  <b>vcs_info</b>  sets up everything as if no version control were active and
              exits.

       <b>pre-get-data</b>
              Same as <b>start-up</b> but after the VCS was detected.

       <b>gen-hg-bookmark-string</b>
              Called in the Mercurial backend  when  a  bookmark  string  is  generated;  the  <b>get-revision</b>  and
              <b>get-bookmarks</b> styles must be true.

              This hook gets the names of the Mercurial bookmarks that <b>vcs_info</b> collected from `hg'.

              If  a  bookmark is active, the key <b>${hook_com[hg-active-bookmark]}</b> is set to its name.  The key is
              otherwise unset.

              When setting <b>ret</b> to non-zero, the string in <b>${hook_com[hg-bookmark-string]}</b> will be used in the <b>%m</b>
              escape in <b>formats</b> and <b>actionformats</b> and will be available in  the  global  <b>backend_misc</b>  array  as
              <b>${backend_misc[bookmarks]}</b>.

       <b>gen-applied-string</b>
              Called  in  the <b>git</b> (with <b>stgit</b> or during rebase or merge), and <b>hg</b> (with <b>mq</b>) backends and in <b>quilt</b>
              support when the <b>applied-string</b> is generated; the <b>use-quilt</b> zstyle must be true for <b>quilt</b> (the  <b>mq</b>
              and <b>stgit</b> backends are active by default).

              The  arguments  to  this hook describe applied patches in the opposite order, which means that the
              first argument is the top-most patch and so forth.

              When the patches' log messages can be extracted, those are embedded within each argument  after  a
              space,  so  each  argument  is  of  the  form  `<u>patch-name</u>  <u>first</u>  <u>line</u> <u>of</u> <u>the</u> <u>log</u> <u>message</u>', where
              <u>patch-name</u> contains no whitespace. The <b>mq</b> backend passes arguments of the form `<u>patch</u> <u>name</u>',  with
              possible embedded spaces, but without extracting the patch's log message.

              When setting <b>ret</b> to non-zero, the string in <b>${hook_com[applied-string]}</b> will be available as <b>%p</b> in
              the  <b>patch-format</b>  and  <b>nopatch-format</b>  styles.   This  hook is, in concert with <b>set-patch-format</b>,
              responsible for <b>%</b>-escaping that value for use in the prompt.  (See the <b>Oddities</b> section.)

              The <b>quilt</b> backend passes to this hook the inputs <b>${hook_com[quilt-patches-dir]}</b>  and,  if  it  has
              been determined, <b>${hook_com[quilt-pc-dir]}</b>.

       <b>gen-unapplied-string</b>
              Called  in  the  <b>git</b>  (with <b>stgit</b> or during rebase), and <b>hg</b> (with <b>mq</b>) backend and in <b>quilt</b> support
              when the <b>unapplied-string</b> is generated; the <b>get-unapplied</b> style must be true.

              This hook gets the names of all unapplied patches which <b>vcs_info</b> in order, which  means  that  the
              first argument is the patch next-in-line to be applied and so forth.

              The format of each argument is as for <b>gen-applied-string</b>, above.

              When  setting <b>ret</b> to non-zero, the string in <b>${hook_com[unapplied-string]}</b> will be available as <b>%u</b>
              in the <b>patch-format</b> and <b>nopatch-format</b> styles.  This hook is, in  concert  with  <b>set-patch-format</b>,
              responsible for <b>%</b>-escaping that value for use in the prompt.  (See the <b>Oddities</b> section.)

              The  <b>quilt</b>  backend  passes  to this hook the inputs <b>${hook_com[quilt-patches-dir]}</b> and, if it has
              been determined, <b>${hook_com[quilt-pc-dir]}</b>.

       <b>gen-mqguards-string</b>
              Called in the <b>hg</b> backend when <b>guards-string</b> is generated; the <b>get-mq</b> style must be true (default).

              This hook gets the names of any active <b>mq</b> guards.

              When setting <b>ret</b> to non-zero, the string in <b>${hook_com[guards-string]}</b> will  be  used  in  the  <b>%g</b>
              escape in the <b>patch-format</b> and <b>nopatch-format</b> styles.

       <b>no-vcs</b> This hooks is called when no version control system was detected.

              The `<b>hook_com</b>' parameter is not used.

       <b>post-backend</b>
              Called as soon as the backend has finished collecting information.

              The `<b>hook_com</b>' keys available are as for the <b>set-message</b> hook.

       <b>post-quilt</b>
              Called  after  the  <b>quilt</b> support is done. The following information is passed as arguments to the
              hook: 1. the quilt-support mode (`addon' or `standalone'); 2.  the  directory  that  contains  the
              patch  series; 3. the directory that holds quilt's status information (the `.pc' directory) or the
              string <b>"-nopc-"</b> if that directory wasn't found.

              The `hook_com' parameter is not used.

       <b>set-branch-format</b>
              Called before `<b>branchformat</b>' is set. The  only  argument  to  the  hook  is  the  format  that  is
              configured at this point.

              The  `<b>hook_com</b>'  keys  considered are `<b>branch</b>' and `<b>revision</b>'.  They are set to the values figured
              out so far by <b>vcs_info</b> and any change will be used directly when the actual replacement is done.

              If <b>ret</b> is set to non-zero, the string in <b>${hook_com[branch-replace]}</b> will be used unchanged as the
              `<b>%b</b>' replacement in the variables set by <b>vcs_info</b>.

       <b>set-hgrev-format</b>
              Called before a `<b>hgrevformat</b>' is set. The only  argument  to  the  hook  is  the  format  that  is
              configured at this point.

              The  `<b>hook_com</b>' keys considered are `<b>hash</b>' and `<b>localrev</b>'.  They are set to the values figured out
              so far by <b>vcs_info</b> and any change will be used directly when the actual replacement is done.

              If <b>ret</b> is set to non-zero, the string in <b>${hook_com[rev-replace]}</b> will be used  unchanged  as  the
              `<b>%i</b>' replacement in the variables set by <b>vcs_info</b>.

       <b>pre-addon-quilt</b>
              This hook is used when <b>vcs_info</b>'s quilt functionality is active in "addon" mode (quilt used on top
              of  a  real  version  control  system).  It is activated right before any quilt specific action is
              taken.

              Setting the `<b>ret</b>' variable in this hook to a non-zero value avoids any quilt specific actions from
              being run at all.

       <b>set-patch-format</b>
              This hook is used to control some of the possible expansions in  <b>patch-format</b>  and  <b>nopatch-format</b>
              styles with patch queue systems such as quilt, mqueue and the like.

              This hook is used in the <b>git</b>, <b>hg</b> and <b>quilt</b> backends.

              The  hook  allows  the  control  of  the <b>%p</b> (<b>${hook_com[applied]}</b>) and <b>%u</b> (<b>${hook_com[unapplied]}</b>)
              expansion  in  all  backends  that  use  the  hook.   With   the   mercurial   backend,   the   <b>%g</b>
              (<b>${hook_com[guards]}</b>) expansion is controllable in addition to that.

              If <b>ret</b> is set to non-zero, the string in <b>${hook_com[patch-replace]}</b> will be used unchanged instead
              of an expanded format from <b>patch-format</b> or <b>nopatch-format</b>.

              This  hook  is,  in  concert with the <b>gen-applied-string</b> or <b>gen-unapplied-string</b> hooks if they are
              defined, responsible for <b>%</b>-escaping the final <b>patch-format</b> value for use in the prompt.  (See  the
              <b>Oddities</b> section.)

              The  <b>quilt</b>  backend  passes  to this hook the inputs <b>${hook_com[quilt-patches-dir]}</b> and, if it has
              been determined, <b>${hook_com[quilt-pc-dir]}</b>.

       <b>set-message</b>
              Called each time before a `<b>vcs_info_msg_</b><u>N</u><b>_</b>' message is set.  It takes  two  arguments;  the  first
              being  the  `<u>N</u>'  in  the  message variable name, the second is the currently configured <b>formats</b> or
              <b>actionformats</b>.

              There are  a  number  of  `<b>hook_com</b>'  keys,  that  are  used  here:  `<b>action</b>',  `<b>branch</b>',  `<b>base</b>',
              `<b>base-name</b>',  `<b>subdir</b>',  `<b>staged</b>', `<b>unstaged</b>', `<b>revision</b>', `<b>misc</b>', `<b>vcs</b>' and one `<b>miscN</b>' entry for
              each backend-specific data field (<b>N</b> starting at zero). They are set to the values figured  out  so
              far by <b>vcs_info</b> and any change will be used directly when the actual replacement is done.

              Since  this  hook is triggered multiple times (once for each configured <b>formats</b> or <b>actionformats</b>),
              each of the `<b>hook_com</b>' keys mentioned  above  (except  for  the  <b>miscN</b>  entries)  has  an  `<b>_orig</b>'
              counterpart, so even if you changed a value to your liking you can still get the original value in
              the next run. Changing the `<b>_orig</b>' values is probably not a good idea.

              If  <b>ret</b>  is  set  to  non-zero,  the  string in <b>${hook_com[message]}</b> will be used unchanged as the
              message by <b>vcs_info</b>.

       If all of this sounds rather confusing, take a look at  the  <b>Examples</b>  section  below  and  also  in  the
       <b>Misc/vcs_info-examples</b> file in the Zsh source.  They contain some explanatory code.

   <b>Examples</b>
       Don't use <b>vcs_info</b> at all (even though it's in your prompt):
              <b>zstyle</b> <b>':vcs_info:*'</b> <b>enable</b> <b>NONE</b>

       Disable the backends for <b>bzr</b> and <b>svk</b>:
              <b>zstyle</b> <b>':vcs_info:*'</b> <b>disable</b> <b>bzr</b> <b>svk</b>

       Disable everything <u>but</u> <b>bzr</b> and <b>svk</b>:
              <b>zstyle</b> <b>':vcs_info:*'</b> <b>enable</b> <b>bzr</b> <b>svk</b>

       Provide a special formats for <b>git</b>:
              <b>zstyle</b> <b>':vcs_info:git:*'</b> <b>formats</b>       <b>'</b> <b>GIT,</b> <b>BABY!</b> <b>[%b]'</b>
              <b>zstyle</b> <b>':vcs_info:git:*'</b> <b>actionformats</b> <b>'</b> <b>GIT</b> <b>ACTION!</b> <b>[%b|%a]'</b>

       All  <b>%x</b>  expansion  in  all sorts of formats (<b>formats</b>, <b>actionformats</b>, <b>branchformat</b>, you name it) are done
       using the `<b>zformat</b>' builtin from the `<b>zsh/zutil</b>' module. That means you can do everything with  these  <b>%x</b>
       items  what  zformat  supports.  In particular, if you want something that is really long to have a fixed
       width, like a hash in a mercurial branchformat, you can do this: <b>%12.12i</b>. That'll shrink the 40 character
       hash to its 12 leading characters. The form is actually `<b>%</b><u>min</u><b>.</b><u>max</u><b>x</b>'. More is possible.  See  the  section
       `The zsh/zutil Module' in <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1) for details.

       Use the quicker <b>bzr</b> backend
              <b>zstyle</b> <b>':vcs_info:bzr:*'</b> <b>use-simple</b> <b>true</b>

       If you do use <b>use-simple</b>, please report if it does `the-right-thing[tm]'.

       Display the revision number in yellow for <b>bzr</b> and <b>svn</b>:
              <b>zstyle</b> <b>':vcs_info:(svn|bzr):*'</b> <b>\</b>
                     <b>branchformat</b> <b>'%b%%F{yellow}:%r'</b>

       The doubled percent sign is explained in the <b>Oddities</b> section.

       Alternatively, one can use the raw colour codes directly:

              <b>zstyle</b> <b>':vcs_info:(svn|bzr):*'</b> <b>\</b>
                     <b>branchformat</b> <b>'%b%{'${fg[yellow]}'%}:%r'</b>

       Normally  when  a  variable  is interpolated into a format string, the variable needs to be <b>%</b>-escaped. In
       this example we skipped that because we assume the value of <b>${fg[yellow]}</b> doesn't contain any <b>%</b> signs.

       Make sure you enclose the color codes in <b>%{</b><u>...</u><b>%}</b> if you want to use the string provided  by  <b>vcs_info</b>  in
       prompts.

       Here is how to print the VCS information as a command (not in a prompt):
              <b>vcsi()</b> <b>{</b> <b>vcs_info</b> <b>interactive;</b> <b>vcs_info_lastmsg</b> <b>}</b>

       This   way,   you   can   even   define   different  formats  for  output  via  <b>vcs_info_lastmsg</b>  in  the
       '<b>:vcs_info:*:interactive:*</b>' namespace.

       Now as promised, some code that uses hooks: say, you'd like to replace the string `svn'  by  `subversion'
       in <b>vcs_info</b>'s <b>%s</b> <b>formats</b> replacement.

       First,  we  will tell <b>vcs_info</b> to call a function when populating the message variables with the gathered
       information:
              <b>zstyle</b> <b>':vcs_info:*+set-message:*'</b> <b>hooks</b> <b>svn2subversion</b>

       Nothing happens. Which is reasonable, since we didn't define the actual function yet.  To  see  what  the
       hooks subsystem is trying to do, enable the `<b>debug</b>' style:
              <b>zstyle</b> <b>':vcs_info:*+*:*'</b> <b>debug</b> <b>true</b>

       That  should  give  you  an  idea what is going on. Specifically, the function that we are looking for is
       `<b>+vi-svn2subversion</b>'. Note, the `<b>+vi-</b>' prefix. So, everything is in order, just as documented.  When  you
       are done checking out the debugging output, disable it again:
              <b>zstyle</b> <b>':vcs_info:*+*:*'</b> <b>debug</b> <b>false</b>

       Now, let's define the function:
              <b>function</b> <b>+vi-svn2subversion()</b> <b>{</b>
                  <b>[[</b> <b>${hook_com[vcs_orig]}</b> <b>==</b> <b>svn</b> <b>]]</b> <b>&amp;&amp;</b> <b>hook_com[vcs]=subversion</b>
              <b>}</b>

       Simple  enough.  And  it  could  have even been simpler, if only we had registered our function in a less
       generic context. If we do it only in the `<b>svn</b>' backend's context, we don't need to test which the  active
       backend is:
              <b>zstyle</b> <b>':vcs_info:svn+set-message:*'</b> <b>hooks</b> <b>svn2subversion</b>
              <b>function</b> <b>+vi-svn2subversion()</b> <b>{</b>
                  <b>hook_com[vcs]=subversion</b>
              <b>}</b>

       And  finally a little more elaborate example, that uses a hook to create a customised bookmark string for
       the <b>hg</b> backend.

       Again, we start off by registering a function:
              <b>zstyle</b> <b>':vcs_info:hg+gen-hg-bookmark-string:*'</b> <b>hooks</b> <b>hgbookmarks</b>

       And then we define the `<b>+vi-hgbookmarks</b>' function:
              <b>function</b> <b>+vi-hgbookmarks()</b> <b>{</b>
                  <b>#</b> <b>The</b> <b>default</b> <b>is</b> <b>to</b> <b>connect</b> <b>all</b> <b>bookmark</b> <b>names</b> <b>by</b>
                  <b>#</b> <b>commas.</b> <b>This</b> <b>mixes</b> <b>things</b> <b>up</b> <b>a</b> <b>little.</b>
                  <b>#</b> <b>Imagine,</b> <b>there's</b> <b>one</b> <b>type</b> <b>of</b> <b>bookmarks</b> <b>that</b> <b>is</b>
                  <b>#</b> <b>special</b> <b>to</b> <b>you.</b> <b>Say,</b> <b>because</b> <b>it's</b> <b>*your*</b> <b>work.</b>
                  <b>#</b> <b>Those</b> <b>bookmarks</b> <b>look</b> <b>always</b> <b>like</b> <b>this:</b> <b>"sh/*"</b>
                  <b>#</b> <b>(because</b> <b>your</b> <b>initials</b> <b>are</b> <b>sh,</b> <b>for</b> <b>example).</b>
                  <b>#</b> <b>This</b> <b>makes</b> <b>the</b> <b>bookmarks</b> <b>string</b> <b>use</b> <b>only</b> <b>those</b>
                  <b>#</b> <b>bookmarks.</b> <b>If</b> <b>there's</b> <b>more</b> <b>than</b> <b>one,</b> <b>it</b>
                  <b>#</b> <b>concatenates</b> <b>them</b> <b>using</b> <b>commas.</b>
                  <b>#</b> <b>The</b> <b>bookmarks</b> <b>returned</b> <b>by</b> <b>`hg'</b> <b>are</b> <b>available</b> <b>in</b>
                  <b>#</b> <b>the</b> <b>function's</b> <b>positional</b> <b>parameters.</b>
                  <b>local</b> <b>s="${(Mj:,:)@:#sh/*}"</b>
                  <b>#</b> <b>Now,</b> <b>the</b> <b>communication</b> <b>with</b> <b>the</b> <b>code</b> <b>that</b> <b>calls</b>
                  <b>#</b> <b>the</b> <b>hook</b> <b>functions</b> <b>is</b> <b>done</b> <b>via</b> <b>the</b> <b>hook_com[]</b>
                  <b>#</b> <b>hash.</b> <b>The</b> <b>key</b> <b>at</b> <b>which</b> <b>the</b> <b>`gen-hg-bookmark-string'</b>
                  <b>#</b> <b>hook</b> <b>looks</b> <b>is</b> <b>`hg-bookmark-string'.</b> <b>So:</b>
                  <b>hook_com[hg-bookmark-string]=$s</b>
                  <b>#</b> <b>And</b> <b>to</b> <b>signal</b> <b>that</b> <b>we</b> <b>want</b> <b>to</b> <b>use</b> <b>the</b> <b>string</b> <b>we</b>
                  <b>#</b> <b>just</b> <b>generated,</b> <b>set</b> <b>the</b> <b>special</b> <b>variable</b> <b>`ret'</b> <b>to</b>
                  <b>#</b> <b>something</b> <b>other</b> <b>than</b> <b>the</b> <b>default</b> <b>zero:</b>
                  <b>ret=1</b>
                  <b>return</b> <b>0</b>
              <b>}</b>

       Some longer examples and code snippets which might be useful are available in the examples  file  located
       at Misc/vcs_info-examples in the Zsh source directory.

       This concludes our guided tour through zsh's <b>vcs_info</b>.

</pre><h4><b>PROMPT</b> <b>THEMES</b></h4><pre>
   <b>Installation</b>
       You  should  make  sure all the functions from the <b>Functions/Prompts</b> directory of the source distribution
       are available; they all begin with the string `<b>prompt_</b>' except for  the  special  function  `<b>promptinit</b>'.
       You  also  need  the  `<b>colors</b>' and `<b>add-zsh-hook</b>' functions from <b>Functions/Misc</b>.  All these functions may
       already be installed on your system; if not, you will need to find them and  copy  them.   The  directory
       should  appear  as  one  of the elements of the <b>fpath</b> array (this should already be the case if they were
       installed), and at least the function <b>promptinit</b>  should  be  autoloaded;  it  will  autoload  the  rest.
       Finally,  to  initialize  the  use of the system you need to call the <b>promptinit</b> function.  The following
       code in your <b>.zshrc</b> will arrange for this; assume the functions are stored in the directory <b><a href="file:~/myfns">~/myfns</a></b>:

              <b>fpath=(<a href="file:~/myfns">~/myfns</a></b> <b>$fpath)</b>
              <b>autoload</b> <b>-U</b> <b>promptinit</b>
              <b>promptinit</b>

   <b>Theme</b> <b>Selection</b>
       Use the <b>prompt</b> command to select your preferred  theme.   This  command  may  be  added  to  your  <b>.zshrc</b>
       following the call to <b>promptinit</b> in order to start zsh with a theme already selected.

       <b>prompt</b> [ <b>-c</b> | <b>-l</b> ]
       <b>prompt</b> [ <b>-p</b> | <b>-h</b> ] [ <u>theme</u> ... ]
       <b>prompt</b> [ <b>-s</b> ] <u>theme</u> [ <u>arg</u> ... ]
              Set  or  examine the prompt theme.  With no options and a <u>theme</u> argument, the theme with that name
              is set as the current theme.  The available themes are determined at run time; use the  <b>-l</b>  option
              to  see a list.  The special <u>theme</u> `<b>random</b>' selects at random one of the available themes and sets
              your prompt to that.

              In some cases the <u>theme</u> may be modified by one or more arguments, which should be given after  the
              theme name.  See the help for each theme for descriptions of these arguments.

              Options are:

              <b>-c</b>     Show the currently selected theme and its parameters, if any.
              <b>-l</b>     List all available prompt themes.
              <b>-p</b>     Preview the theme named by <u>theme</u>, or all themes if no <u>theme</u> is given.
              <b>-h</b>     Show help for the theme named by <u>theme</u>, or for the <b>prompt</b> function if no <u>theme</u> is given.
              <b>-s</b>     Set <u>theme</u> as the current theme and save state.

       <b>prompt_</b><u>theme</u><b>_setup</b>
              Each  available  <u>theme</u> has a setup function which is called by the <b>prompt</b> function to install that
              theme.  This function may define other functions as necessary to maintain  the  prompt,  including
              functions  used to preview the prompt or provide help for its use.  You should not normally call a
              theme's setup function directly.

   <b>Utility</b> <b>Themes</b>
       <b>prompt</b> <b>off</b>
              The theme `<b>off</b>' sets all the prompt variables to minimal values with no special effects.

       <b>prompt</b> <b>default</b>
              The theme `<b>default</b>' sets all prompt variables to the same state  as  if  an  interactive  zsh  was
              started with no initialization files.

       <b>prompt</b> <b>restore</b>
              The  special  theme  `<b>restore</b>'  erases all theme settings and sets prompt variables to their state
              before the first time the `<b>prompt</b>' function was run, provided each theme has properly defined  its
              cleanup (see below).

              Note  that  you  can  undo  `<b>prompt</b>  <b>off</b>' and `<b>prompt</b> <b>default</b>' with `<b>prompt</b> <b>restore</b>', but a second
              restore does not undo the first.

   <b>Writing</b> <b>Themes</b>
       The  first  step  for  adding  your  own  theme  is  to  choose  a  name  for  it,  and  create  a   file
       `<b>prompt_</b><u>name</u><b>_setup</b><u>'</u>  <u>in</u> <u>a</u> <u>directory</u> <u>in</u> <u>your</u> <b>fpath</b><u>,</u> <u>such</u> <u>as</u> <b><a href="file:~/myfns">~/myfns</a></b> <u>in</u> <u>the</u> <u>example</u> <u>above.</u>  <u>The</u> <u>file</u> <u>should</u>
       <u>at</u> <u>minimum</u> <u>contain</u> <u>assignments</u> <u>for</u> <u>the</u> <u>prompt</u> <u>variables</u> <u>that</u> <u>your</u> <u>theme</u> <u>wishes</u> <u>to</u> <u>modify.</u>  <u>By</u> <u>convention,</u>
       <u>themes</u> <u>use</u> <b>PS1</b><u>,</u> <b>PS2</b><u>,</u> <b>RPS1</b><u>,</u> <u>etc.,</u> <u>rather</u> <u>than</u> <u>the</u> <u>longer</u> <b>PROMPT</b> <u>and</u> <b>RPROMPT</b><u>.</u>

       The file is autoloaded as a function in the current shell  context,  so  it  may  contain  any  necessary
       commands  to  customize  your theme, including defining additional functions.  To make some complex tasks
       easier, your setup function may also do any of the following:

       Assign <b>prompt_opts</b>
              The array <b>prompt_opts</b> may be assigned any of <b>"bang"</b>, <b>"cr"</b>,  <b>"percent"</b>,  <b>"sp"</b>,  and/or  <b>"subst"</b>  as
              values.   The  corresponding  setopts  (<b>promptbang</b>,  etc.) are turned on, all other prompt-related
              options are turned off.  The  <b>prompt_opts</b>  array  preserves  setopts  even  beyond  the  scope  of
              <b>localoptions</b>, should your function need that.

       Modify hooks
              Use  of  <b>add-zsh-hook</b>  and <b>add-zle-hook-widget</b> is recommended (see the <b>Manipulating</b> <b>Hook</b> <b>Functions</b>
              section above).  All hooks that follow the  naming  pattern  <b>prompt_</b><u>theme_hook</u>  are  automatically
              removed when the prompt theme changes or is disabled.

       Declare cleanup
              If  your  function  makes any other changes that should be undone when the theme is disabled, your
              setup function may call

                     <b>prompt_cleanup</b> <u>command</u>

              where <u>command</u> should be suitably quoted.  If your theme is ever disabled or replaced  by  another,
              <u>command</u> is executed with <b>eval</b>.  You may declare more than one such cleanup hook.

       Define preview
              Define  or  autoload a function <b>prompt_</b><u>name</u><b>_preview</b> to display a simulated version of your prompt.
              A simple default previewer is defined by <b>promptinit</b> for themes that do not define their own.  This
              preview function is called by `<b>prompt</b> <b>-p</b>'.

       Provide help
              Define or autoload a function <b>prompt_</b><u>name</u><b>_help</b> to display documentation  or  help  text  for  your
              theme.  This help function is called by `<b>prompt</b> <b>-h</b>'.

</pre><h4><b>ZLE</b> <b>FUNCTIONS</b></h4><pre>
   <b>Widgets</b>
       These  functions  all implement user-defined ZLE widgets (see <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1)) which can be bound to keystrokes
       in interactive shells.  To use them, your <b>.zshrc</b> should contain lines of the form

              <b>autoload</b> <u>function</u>
              <b>zle</b> <b>-N</b> <u>function</u>

       followed by an appropriate <b>bindkey</b> command to associate the function  with  a  key  sequence.   Suggested
       bindings are described below.

       bash-style word functions
              If you are looking for functions to implement moving over and editing words in the manner of bash,
              where  only  alphanumeric  characters  are  considered  word characters, you can use the functions
              described in the next section.  The following is sufficient:

                     <b>autoload</b> <b>-U</b> <b>select-word-style</b>
                     <b>select-word-style</b> <b>bash</b>

       <b>forward-word-match</b>, <b>backward-word-match</b>
       <b>kill-word-match</b>, <b>backward-kill-word-match</b>
       <b>transpose-words-match</b>, <b>capitalize-word-match</b>
       <b>up-case-word-match</b>, <b>down-case-word-match</b>
       <b>delete-whole-word-match</b>, <b>select-word-match</b>
       <b>select-word-style</b>, <b>match-word-context</b>, <b>match-words-by-style</b>
              The first eight `<b>-match</b>' functions are drop-in replacements for the builtin  widgets  without  the
              suffix.   By default they behave in a similar way.  However, by the use of styles and the function
              <b>select-word-style</b>, the way words are matched can be altered. <b>select-word-match</b> is intended  to  be
              used  as  a  text  object  in  vi  mode  but  with custom word styles. For comparison, the widgets
              described in <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1) under Text Objects use fixed definitions of words, compatible with the  <b>vim</b>
              editor.

              The  simplest  way  of  configuring the functions is to use <b>select-word-style</b>, which can either be
              called as a normal function with the appropriate argument, or invoked  as  a  user-defined  widget
              that  will  prompt  for  the  first  character of the word style to be used.  The first time it is
              invoked, the first eight <b>-match</b> functions will automatically replace the builtin versions, so they
              do not need to be loaded explicitly.

              The word styles available are as follows.  Only the first character is examined.

              <b>bash</b>   Word characters are alphanumeric characters only.

              <b>normal</b> As in normal shell  operation:   word  characters  are  alphanumeric  characters  plus  any
                     characters present in the string given by the parameter <b>$WORDCHARS</b>.

              <b>shell</b>  Words  are complete shell command arguments, possibly including complete quoted strings, or
                     any tokens special to the shell.

              <b>whitespace</b>
                     Words are any set of characters delimited by whitespace.

              <b>default</b>
                     Restore the default settings; this is usually the same as `<b>normal</b>'.

              All but `<b>default</b>' can be input as an upper case character, which has  the  same  effect  but  with
              subword matching turned on.  In this case, words with upper case characters are treated specially:
              each  separate  run of upper case characters, or an upper case character followed by any number of
              other characters, is considered a  word.   The  style  <b>subword-range</b>  can  supply  an  alternative
              character range to the default `<b>[:upper:]</b>'; the value of the style is treated as the contents of a
              `<b>[</b><u>...</u><b>]</b>' pattern (note that the outer brackets should not be supplied, only those surrounding named
              ranges).

              More  control can be obtained using the <b>zstyle</b> command, as described in <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1).  Each style
              is looked up in the context <b>:zle:</b><u>widget</u> where <u>widget</u> is the name of the user-defined  widget,  not
              the  name  of  the  function  implementing  it,  so  in  the  case  of the definitions supplied by
              <b>select-word-style</b> the appropriate  contexts  are  <b>:zle:forward-word</b>,  and  so  on.   The  function
              <b>select-word-style</b> itself always defines styles for the context `<b>:zle:*</b>' which can be overridden by
              more specific (longer) patterns as well as explicit contexts.

              The style <b>word-style</b> specifies the rules to use.  This may have the following values.

              <b>normal</b> Use  the  standard shell rules, i.e. alphanumerics and <b>$WORDCHARS</b>, unless overridden by the
                     styles <b>word-chars</b> or <b>word-class</b>.

              <b>specified</b>
                     Similar to <b>normal</b>, but <u>only</u> the specified  characters,  and  not  also  alphanumerics,  are
                     considered word characters.

              <b>unspecified</b>
                     The  negation  of  specified.   The given characters are those which will <u>not</u> be considered
                     part of a word.

              <b>shell</b>  Words are obtained by using the syntactic rules for generating shell command arguments.  In
                     addition, special tokens which are never command arguments such as `<b>()</b>' are also treated as
                     words.

              <b>whitespace</b>
                     Words are whitespace-delimited strings of characters.

              The first three of those rules usually use <b>$WORDCHARS</b>, but the  value  in  the  parameter  can  be
              overridden  by  the  style  <b>word-chars</b>,  which  works  in  exactly the same way as <b>$WORDCHARS</b>.  In
              addition, the style  <b>word-class</b>  uses  character  class  syntax  to  group  characters  and  takes
              precedence over <b>word-chars</b> if both are set.  The <b>word-class</b> style does not include the surrounding
              brackets  of  the character class; for example, `<b>-:[:alnum:]</b>' is a valid <b>word-class</b> to include all
              alphanumerics plus the characters `<b>-</b>' and `<b>:</b>'.  Be careful including `<b>]</b>', `<b>^</b>' and `<b>-</b>' as these are
              special inside character classes.

              <b>word-style</b> may also have `<b>-subword</b>' appended  to  its  value  to  turn  on  subword  matching,  as
              described above.

              The style <b>skip-chars</b> is mostly useful for <b>transpose-words</b> and similar functions.  If set, it gives
              a  count  of  characters  starting at the cursor position which will not be considered part of the
              word and are treated as space, regardless of what they actually are.  For example, if

                     <b>zstyle</b> <b>':zle:transpose-words'</b> <b>skip-chars</b> <b>1</b>

              has been set, and <b>transpose-words-match</b> is called with the cursor on the <u>X</u> of <b>foo</b><u>X</u><b>bar</b>, where <u>X</u> can
              be any character, then the resulting expression is <b>bar</b><u>X</u><b>foo</b>.

              Finer grained control can be obtained by setting the style <b>word-context</b> to an array  of  pairs  of
              entries.   Each  pair  of  entries consists of a <u>pattern</u> and a <u>subcontext</u>.  The shell argument the
              cursor is on is matched against each <u>pattern</u> in turn until one matches; if it does, the context is
              extended by a colon and the corresponding <u>subcontext</u>.  Note that the  test  is  made  against  the
              original  word  on the line, with no stripping of quotes.  Special handling is done between words:
              the current context is examined and if it contains the string <b>between</b> the word is set to a  single
              space;  else if it is contains the string <b>back</b>, the word before the cursor is considered, else the
              word after cursor is considered. Some examples are given below.

              The style <b>skip-whitespace-first</b> is only used with the <b>forward-word</b> widget.  If it is set to  true,
              then  <b>forward-word</b>  skips  any  non-word-characters,  followed by any non-word-characters: this is
              similar to the behaviour of other word-orientated widgets, and also that used  by  other  editors,
              however  it  differs  from the standard zsh behaviour.  When using <b>select-word-style</b> the widget is
              set in the context <b>:zle:*</b> to <b>true</b> if the word style is  <b>bash</b>  and  <b>false</b>  otherwise.   It  may  be
              overridden by setting it in the more specific context <b>:zle:forward-word*</b>.

              It  is  possible to create widgets with specific behaviour by defining a new widget implemented by
              the appropriate generic function, then setting a style for the context  of  the  specific  widget.
              For    example,    the    following    defines    a    widget    <b>backward-kill-space-word</b>    using
              <b>backward-kill-word-match</b>,  the  generic  widget  implementing  <b>backward-kill-word</b>  behaviour,  and
              ensures that the new widget always implements space-delimited behaviour.

                     <b>zle</b> <b>-N</b> <b>backward-kill-space-word</b> <b>backward-kill-word-match</b>
                     <b>zstyle</b> <b>:zle:backward-kill-space-word</b> <b>word-style</b> <b>space</b>

              The widget <b>backward-kill-space-word</b> can now be bound to a key.

              Here  are some further examples of use of the styles, actually taken from the simplified interface
              in <b>select-word-style</b>:

                     <b>zstyle</b> <b>':zle:*'</b> <b>word-style</b> <b>standard</b>
                     <b>zstyle</b> <b>':zle:*'</b> <b>word-chars</b> <b>''</b>

              Implements bash-style word handling for all widgets, i.e. only alphanumerics are word  characters;
              equivalent to setting the parameter <b>WORDCHARS</b> empty for the given context.

                     <b>style</b> <b>':zle:*kill*'</b> <b>word-style</b> <b>space</b>

              Uses  space-delimited  words  for widgets with the word `kill' in the name.  Neither of the styles
              <b>word-chars</b> nor <b>word-class</b> is used in this case.

              Here are some examples of use of the <b>word-context</b> style to extend the context.

                     <b>zstyle</b> <b>':zle:*'</b> <b>word-context</b> <b>\</b>
                            <b>"*/*"</b> <b>filename</b> <b>"[[:space:]]"</b> <b>whitespace</b>
                     <b>zstyle</b> <b>':zle:transpose-words:whitespace'</b> <b>word-style</b> <b>shell</b>
                     <b>zstyle</b> <b>':zle:transpose-words:filename'</b> <b>word-style</b> <b>normal</b>
                     <b>zstyle</b> <b>':zle:transpose-words:filename'</b> <b>word-chars</b> <b>''</b>

              This provides two different ways of using <b>transpose-words</b> depending on whether the  cursor  is  on
              whitespace  between words or on a filename, here any word containing a <b>/</b>.  On whitespace, complete
              arguments  as  defined  by  standard  shell  rules  will  be  transposed.   In  a  filename,  only
              alphanumerics will be transposed.  Elsewhere, words will be transposed using the default style for
              <b>:zle:transpose-words</b>.

              The  word matching and all the handling of <b>zstyle</b> settings is actually implemented by the function
              <b>match-words-by-style</b>.  This can be used to create new user-defined widgets.  The calling  function
              should set the local parameter <b>curcontext</b> to <b>:zle:</b><u>widget</u>, create the local parameter <b>matched_words</b>
              and call <b>match-words-by-style</b> with no arguments.  On return, <b>matched_words</b> will be set to an array
              with  the  elements:  (1)  the  start  of the line (2) the word before the cursor (3) any non-word
              characters between that word and the cursor (4) any non-word character at the cursor position plus
              any remaining non-word characters before the next word, including all characters specified by  the
              <b>skip-chars</b>  style,  (5)  the word at or following the cursor (6) any non-word characters following
              that word (7) the remainder of the line.  Any of the elements may be an empty string; the  calling
              function should test for this to decide whether it can perform its function.

              If  the  variable <b>matched_words</b> is defined by the caller to <b>match-words-by-style</b> as an associative
              array (<b>local</b> <b>-A</b> <b>matched_words</b>), then the seven values given above should be retrieved from  it  as
              elements  named  <b>start</b>,  <b>word-before-cursor</b>, <b>ws-before-cursor</b>, <b>ws-after-cursor</b>, <b>word-after-cursor</b>,
              <b>ws-after-word</b>, and <b>end</b>.  In addition the element <b>is-word-start</b> is 1 if the cursor is on the  start
              of  a  word or subword, or on white space before it (the cases can be distinguished by testing the
              <b>ws-after-cursor</b> element) and 0 otherwise.  This form is recommended for future compatibility.

              It is possible to pass options with arguments to  <b>match-words-by-style</b>  to  override  the  use  of
              styles.  The options are:
              <b>-w</b>     <u>word-style</u>
              <b>-s</b>     <u>skip-chars</u>
              <b>-c</b>     <u>word-class</u>
              <b>-C</b>     <u>word-chars</u>
              <b>-r</b>     <u>subword-range</u>

              For example, <b>match-words-by-style</b> <b>-w</b> <b>shell</b> <b>-c</b> <b>0</b> may be used to extract the command argument around
              the cursor.

              The <b>word-context</b> style is implemented by the function <b>match-word-context</b>.  This should not usually
              need to be called directly.

       <b>bracketed-paste-magic</b>
              The  <b>bracketed-paste</b>  widget (see the subsection `Miscellaneous' in <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1)) inserts pasted text
              literally into the editor buffer rather than interpret  it  as  keystrokes.   This  disables  some
              common  usages  where  the  self-insert  widget  is  replaced  in  order  to accomplish some extra
              processing.  An example is the contributed <b>url-quote-magic</b> widget described below.

              The <b>bracketed-paste-magic</b>  widget  is  meant  to  replace  <b>bracketed-paste</b>  with  a  wrapper  that
              re-enables  these  self-insert  actions, and other actions as selected by zstyles.  Therefore this
              widget is installed with

                     <b>autoload</b> <b>-Uz</b> <b>bracketed-paste-magic</b>
                     <b>zle</b> <b>-N</b> <b>bracketed-paste</b> <b>bracketed-paste-magic</b>

              Other  than  enabling  some  widget  processing,  <b>bracketed-paste-magic</b>  attempts   to   replicate
              <b>bracketed-paste</b> as faithfully as possible.

              The  following  zstyles may be set to control processing of pasted text.  All are looked up in the
              context `<b>:bracketed-paste-magic</b>'.

              <b>active-widgets</b>
                     A list of patterns matching widget names that should be activated during  the  paste.   All
                     other  key  sequences  are processed as self-insert-unmeta.  The default is `<b>self-*</b>' so any
                     user-defined widgets named with that prefix are active along with the builtin self-insert.

                     If this style is not set (explicitly deleted) or set to an  empty  value,  no  widgets  are
                     active  and  the pasted text is inserted literally.  If the value includes `<b>undefined-key</b>',
                     any unknown sequences are discarded from the pasted text.

              <b>inactive-keys</b>
                     The inverse of <b>active-widgets</b>, a list of key sequences that always  use  <b>self-insert-unmeta</b>
                     even  when  bound  to an active widget.  Note that this is a list of literal key sequences,
                     not patterns.

              <b>paste-init</b>
                     A list of function names, called in widget context (but not as widgets).  The functions are
                     called in order until one of them  returns  a  non-zero  status.   The  parameter  `<b>PASTED</b>'
                     contains  the  initial state of the pasted text.  All other ZLE parameters such as `<b>BUFFER</b>'
                     have their normal values and side-effects, and full history is available,  so  for  example
                     <b>paste-init</b>  functions may move words from <b>BUFFER</b> into <b>PASTED</b> to make those words visible to
                     the <b>active-widgets</b>.

                     A non-zero return from a <b>paste-init</b>  function  does  <u>not</u>  prevent  the  paste  itself  from
                     proceeding.

                     Loading  <b>bracketed-paste-magic</b>  defines <b>backward-extend-paste</b>, a helper function for use in
                     <b>paste-init</b>.

                            <b>zstyle</b> <b>:bracketed-paste-magic</b> <b>paste-init</b> <b>\</b>
                                   <b>backward-extend-paste</b>

                     When a paste would insert into the middle of a word or append text to a word already on the
                     line, <b>backward-extend-paste</b>  moves  the  prefix  from  <b>LBUFFER</b>  into  <b>PASTED</b>  so  that  the
                     <b>active-widgets</b> see the full word so far.  This may be useful with <b>url-quote-magic</b>.

              <b>paste-finish</b>
                     Another list of function names called in order until one returns non-zero.  These functions
                     are called <u>after</u> the pasted text has been processed by the <b>active-widgets</b>, but <u>before</u> it is
                     inserted into `<b>BUFFER</b>'.  ZLE parameters have their normal values and side-effects.

                     A  non-zero  return  from  a  <b>paste-finish</b>  function does <u>not</u> prevent the paste itself from
                     proceeding.

                     Loading <b>bracketed-paste-magic</b> also defines  <b>quote-paste</b>,  a  helper  function  for  use  in
                     <b>paste-finish</b>.

                            <b>zstyle</b> <b>:bracketed-paste-magic</b> <b>paste-finish</b> <b>\</b>
                                   <b>quote-paste</b>
                            <b>zstyle</b> <b>:bracketed-paste-magic:finish</b> <b>quote-style</b> <b>\</b>
                                   <b>qqq</b>

                     When  the  pasted text is inserted into <b>BUFFER</b>, it is quoted per the <b>quote-style</b> value.  To
                     forcibly turn off the built-in numeric prefix quoting of <b>bracketed-paste</b>, use:

                            <b>zstyle</b> <b>:bracketed-paste-magic:finish</b> <b>quote-style</b> <b>\</b>
                                   <b>none</b>

              <u>Important:</u>  During  <b>active-widgets</b>  processing  of  the  paste  (after   <b>paste-init</b>   and   before
              <b>paste-finish</b>),  <b>BUFFER</b>  starts  empty  and history is restricted, so cursor motions, etc., may not
              pass outside of the pasted content.  Text assigned to <b>BUFFER</b> by the active widgets is copied  back
              into <b>PASTED</b> before <b>paste-finish</b>.

       <b>copy-earlier-word</b>
              This  widget  works  like  a  combination  of <b>insert-last-word</b> and <b>copy-prev-shell-word</b>.  Repeated
              invocations of the widget retrieve earlier words on the relevant history  line.   With  a  numeric
              argument  <u>N</u>, insert the <u>N</u>th word from the history line; <u>N</u> may be negative to count from the end of
              the line.

              If <b>insert-last-word</b> has been used to retrieve the last word on a previous history  line,  repeated
              invocations will replace that word with earlier words from the same line.

              Otherwise,  the  widget applies to words on the line currently being edited.  The <b>widget</b> style can
              be set to the name of another widget that should be called to retrieve words.   This  widget  must
              accept the same three arguments as <b>insert-last-word</b>.

       <b>cycle-completion-positions</b>
              After  inserting  an  unambiguous  string into the command line, the new function based completion
              system may know about multiple places in this string where characters are missing or  differ  from
              at  least one of the possible matches.  It will then place the cursor on the position it considers
              to be the most interesting one, i.e. the one where one can disambiguate between as many matches as
              possible with as little typing as possible.

              This widget allows the cursor to be easily moved to  the  other  interesting  spots.   It  can  be
              invoked repeatedly to cycle between all positions reported by the completion system.

       <b>delete-whole-word-match</b>
              This  is  another function which works like the <b>-match</b> functions described immediately above, i.e.
              using styles to decide the word boundaries.  However, it is not a  replacement  for  any  existing
              function.

              The  basic  behaviour  is  to  delete  the  word  around the cursor.  There is no numeric argument
              handling; only the single word around the cursor is considered.  If the widget contains the string
              <b>kill</b>, the removed text will be placed in the cutbuffer for future yanking.  This can  be  obtained
              by defining <b>kill-whole-word-match</b> as follows:

                     <b>zle</b> <b>-N</b> <b>kill-whole-word-match</b> <b>delete-whole-word-match</b>

              and then binding the widget <b>kill-whole-word-match</b>.

       <b>up-line-or-beginning-search</b>, <b>down-line-or-beginning-search</b>
              These  widgets are similar to the builtin functions <b>up-line-or-search</b> and <b>down-line-or-search</b>:  if
              in a multiline buffer they move up or down within the buffer, otherwise they search for a  history
              line  matching the start of the current line.  In this case, however, they search for a line which
              matches  the  current  line  up   to   the   current   cursor   position,   in   the   manner   of
              <b>history-beginning-search-backward</b> and <b>-forward</b>, rather than the first word on the line.

       <b>edit-command-line</b>
              Edit the command line using your visual editor, as in <b>ksh</b>.

                     <b>bindkey</b> <b>-M</b> <b>vicmd</b> <b>v</b> <b>edit-command-line</b>

              The  editor  to be used can also be specified using the <b>editor</b> style in the context of the widget.
              It is specified as an array of command and arguments:

                     <b>zstyle</b> <b>:zle:edit-command-line</b> <b>editor</b> <b>gvim</b> <b>-f</b>

       <b>expand-absolute-path</b>
              Expand the file name under the cursor to  an  absolute  path,  resolving  symbolic  links.   Where
              possible,  the initial path segment is turned into a named directory or reference to a user's home
              directory.

       <b>history-search-end</b>
              This    function    implements    the    widgets     <b>history-beginning-search-backward-end</b>     and
              <b>history-beginning-search-forward-end</b>.   These  commands  work  by  first calling the corresponding
              builtin widget (see `History Control' in <u><a href="../man1/zshzle.1.html">zshzle</a></u>(1)) and then moving the cursor to the end  of  the
              line.  The original cursor position is remembered and restored before calling the builtin widget a
              second time, so that the same search is repeated to look farther through the history.

              Although  you <b>autoload</b> only one function, the commands to use it are slightly different because it
              implements two widgets.

                     <b>zle</b> <b>-N</b> <b>history-beginning-search-backward-end</b> <b>\</b>
                            <b>history-search-end</b>
                     <b>zle</b> <b>-N</b> <b>history-beginning-search-forward-end</b> <b>\</b>
                            <b>history-search-end</b>
                     <b>bindkey</b> <b>'\e^P'</b> <b>history-beginning-search-backward-end</b>
                     <b>bindkey</b> <b>'\e^N'</b> <b>history-beginning-search-forward-end</b>

       <b>history-beginning-search-menu</b>
              This function implements yet another form of history searching.  The text  before  the  cursor  is
              used  to  select  lines from the history, as for <b>history-beginning-search-backward</b> except that all
              matches are shown in a numbered menu.  Typing the appropriate  digits  inserts  the  full  history
              line.   Note  that  leading  zeroes must be typed (they are only shown when necessary for removing
              ambiguity).  The entire history  is  searched;  there  is  no  distinction  between  forwards  and
              backwards.

              With  a numeric argument, the search is not anchored to the start of the line; the string typed by
              the use may appear anywhere in the line in the history.

              If the widget name contains `<b>-end</b>' the cursor is moved to the end of the line  inserted.   If  the
              widget  name  contains `<b>-space</b>' any space in the text typed is treated as a wildcard and can match
              anything (hence a leading space is equivalent to giving a numeric argument).  Both  forms  can  be
              combined, for example:

                     <b>zle</b> <b>-N</b> <b>history-beginning-search-menu-space-end</b> <b>\</b>
                            <b>history-beginning-search-menu</b>

       <b>history-pattern-search</b>
              The  function  <b>history-pattern-search</b>  implements widgets which prompt for a pattern with which to
              search the history backwards or forwards.  The pattern is in the usual  zsh  format,  however  the
              first character may be <b>^</b> to anchor the search to the start of the line, and the last character may
              be  <b>$</b>  to  anchor the search to the end of the line.  If the search was not anchored to the end of
              the line the cursor is positioned just after the pattern found.

              The commands to create bindable widgets are similar to those in the example immediately above:

                     <b>autoload</b> <b>-U</b> <b>history-pattern-search</b>
                     <b>zle</b> <b>-N</b> <b>history-pattern-search-backward</b> <b>history-pattern-search</b>
                     <b>zle</b> <b>-N</b> <b>history-pattern-search-forward</b> <b>history-pattern-search</b>

       <b>incarg</b> Typing the keystrokes for this widget with the cursor placed on or  to  the  left  of  an  integer
              causes  that integer to be incremented by one.  With a numeric argument, the number is incremented
              by the amount of the argument (decremented if  the  numeric  argument  is  negative).   The  shell
              parameter <b>incarg</b> may be set to change the default increment to something other than one.

                     <b>bindkey</b> <b>'^X+'</b> <b>incarg</b>

       <b>incremental-complete-word</b>
              This  allows  incremental completion of a word.  After starting this command, a list of completion
              choices can be shown after every character you  type,  which  you  can  delete  with  <b>^H</b>  or  <b>DEL</b>.
              Pressing  return  accepts  the  completion  so far and returns you to normal editing (that is, the
              command line is <u>not</u> immediately executed).  You can hit <b>TAB</b> to do normal completion, <b>^G</b>  to  abort
              back to the state when you started, and <b>^D</b> to list the matches.

              This works only with the new function based completion system.

                     <b>bindkey</b> <b>'^Xi'</b> <b>incremental-complete-word</b>

       <b>insert-composed-char</b>
              This  function  allows  you to compose characters that don't appear on the keyboard to be inserted
              into the command line.  The command is followed by two  keys  corresponding  to  ASCII  characters
              (there  is  no  prompt).  For accented characters, the two keys are a base character followed by a
              code for the accent, while for other  special  characters  the  two  characters  together  form  a
              mnemonic for the character to be inserted.  The two-character codes are a subset of those given by
              RFC 1345 (see for example <b><a href="http://www.faqs.org/rfcs/rfc1345.html">http://www.faqs.org/rfcs/rfc1345.html</a></b>).

              The  function  may optionally be followed by up to two characters which replace one or both of the
              characters read from the keyboard; if both  characters  are  supplied,  no  input  is  read.   For
              example,  <b>insert-composed-char</b>  <b>a:</b> can be used within a widget to insert an a with umlaut into the
              command line.  This has the advantages over use of a literal character that it is more portable.

              For best results zsh should have been built with support for multibyte characters (configured with
              <b>--enable-multibyte</b>); however, the function works for the limited range of characters available  in
              single-byte character sets such as ISO-8859-1.

              The character is converted into the local representation and inserted into the command line at the
              cursor  position.   (The  conversion  is  done  within  the shell, using whatever facilities the C
              library provides.)  With a numeric argument, the character and  its  code  are  previewed  in  the
              status line

              The  function  may  be  run  outside  zle  in  which case it prints the character (together with a
              newline) to standard output.  Input is still read from keystrokes.

              See <b>insert-unicode-char</b> for an  alternative  way  of  inserting  Unicode  characters  using  their
              hexadecimal character number.

              The  set  of accented characters is reasonably complete up to Unicode character U+0180, the set of
              special characters less so.  However, it is very sporadic from that point.  Adding new  characters
              is  easy,  however;  see  the  function  <b>define-composed-chars</b>.   Please  send  any  additions  to
              <b><a href="mailto:zsh-workers@zsh.org">zsh-workers@zsh.org</a></b>.

              The codes for the second character when used to accent the first are as follows.   Note  that  not
              every character can take every accent.
              <b>!</b>      Grave.
              <b>'</b>      Acute.
              <b>&gt;</b>      Circumflex.
              <b>?</b>      Tilde.   (This  is  not  <b>~</b>  as  RFC  1345  does not assume that character is present on the
                     keyboard.)
              <b>-</b>      Macron.  (A horizontal bar over the base character.)
              <b>(</b>      Breve.  (A shallow dish shape over the base character.)
              <b>.</b>      Dot above the base character, or in the case of <b>i</b> no dot, or in the  case  of  <b>L</b>  and  <b>l</b>  a
                     centered dot.
              <b>:</b>      Diaeresis (Umlaut).
              <b>c</b>      Cedilla.
              <b>_</b>      Underline, however there are currently no underlined characters.
              <b>/</b>      Stroke through the base character.
              <b>"</b>      Double acute (only supported on a few letters).
              <b>;</b>      Ogonek.  (A little forward facing hook at the bottom right of the character.)
              <b>&lt;</b>      Caron.  (A little v over the letter.)
              <b>0</b>      Circle over the base character.
              <b>2</b>      Hook over the base character.
              <b>9</b>      Horn over the base character.

              The  most  common  characters from the Arabic, Cyrillic, Greek and Hebrew alphabets are available;
              consult RFC 1345 for the appropriate sequences.  In addition, a set of two letter codes not in RFC
              1345 are available for the double-width characters corresponding to ASCII characters from <b>!</b>  to  <b>~</b>
              (0x21 to 0x7e) by preceding the character with <b>^</b>, for example <b>^A</b> for a double-width <b>A</b>.

              The following other two-character sequences are understood.

              ASCII characters
                     These are already present on most keyboards:
              <b>&lt;(</b>     Left square bracket
              <b>//</b>     Backslash (solidus)
              <b>)&gt;</b>     Right square bracket
              <b>(!</b>     Left brace (curly bracket)
              <b>!!</b>     Vertical bar (pipe symbol)
              <b>!)</b>     Right brace (curly bracket)
              <b>'?</b>     Tilde

              Special letters
                     Characters found in various variants of the Latin alphabet:
              <b>ss</b>     Eszett (scharfes S)
              <b>D-</b>, <b>d-</b> Eth
              <b>TH</b>, <b>th</b> Thorn
              <b>kk</b>     Kra
              <b>'n</b>     'n
              <b>NG</b>, <b>ng</b> Ng
              <b>OI</b>, <b>oi</b> Oi
              <b>yr</b>     yr
              <b>ED</b>     ezh

              Currency symbols
              <b>Ct</b>     Cent
              <b>Pd</b>     Pound sterling (also lira and others)
              <b>Cu</b>     Currency
              <b>Ye</b>     Yen
              <b>Eu</b>     Euro (N.B. not in RFC 1345)

              Punctuation characters
                     References  to "right" quotes indicate the shape (like a 9 rather than 6) rather than their
                     grammatical use.  (For example, a "right" low double quote is used to  open  quotations  in
                     German.)
              <b>!I</b>     Inverted exclamation mark
              <b>BB</b>     Broken vertical bar
              <b>SE</b>     Section
              <b>Co</b>     Copyright
              <b>-a</b>     Spanish feminine ordinal indicator
              <b>&lt;&lt;</b>     Left guillemet
              <b>--</b>     Soft hyphen
              <b>Rg</b>     Registered trade mark
              <b>PI</b>     Pilcrow (paragraph)
              <b>-o</b>     Spanish masculine ordinal indicator
              <b>&gt;&gt;</b>     Right guillemet
              <b>?I</b>     Inverted question mark
              <b>-1</b>     Hyphen
              <b>-N</b>     En dash
              <b>-M</b>     Em dash
              <b>-3</b>     Horizontal bar
              <b>:3</b>     Vertical ellipsis
              <b>.3</b>     Horizontal midline ellipsis
              <b>!2</b>     Double vertical line
              <b>=2</b>     Double low line
              <b>'6</b>     Left single quote
              <b>'9</b>     Right single quote
              <b>.9</b>     "Right" low quote
              <b>9'</b>     Reversed "right" quote
              <b>"6</b>     Left double quote
              <b>"9</b>     Right double quote
              <b>:9</b>     "Right" low double quote
              <b>9"</b>     Reversed "right" double quote
              <b>/-</b>     Dagger
              <b>/=</b>     Double dagger

              Mathematical symbols
              <b>DG</b>     Degree
              <b>-2</b>, <b>+-</b>, <b>-+</b>
                     - sign, +/- sign, -/+ sign
              <b>2S</b>     Superscript 2
              <b>3S</b>     Superscript 3
              <b>1S</b>     Superscript 1
              <b>My</b>     Micro
              <b>.M</b>     Middle dot
              <b>14</b>     Quarter
              <b>12</b>     Half
              <b>34</b>     Three quarters
              <b>*X</b>     Multiplication
              <b>-:</b>     Division
              <b>%0</b>     Per mille
              <b>FA</b>, <b>TE</b>, <b>/0</b>
                     For all, there exists, empty set
              <b>dP</b>, <b>DE</b>, <b>NB</b>
                     Partial derivative, delta (increment), del (nabla)
              <b>(-</b>, <b>-)</b> Element of, contains
              <b>*P</b>, <b>+Z</b> Product, sum
              <b>*-</b>, <b>Ob</b>, <b>Sb</b>
                     Asterisk, ring, bullet
              <b>RT</b>, <b>0(</b>, <b>00</b>
                     Root sign, proportional to, infinity

              Other symbols
              <b>cS</b>, <b>cH</b>, <b>cD</b>, <b>cC</b>
                     Card suits: spades, hearts, diamonds, clubs
              <b>Md</b>, <b>M8</b>, <b>M2</b>, <b>Mb</b>, <b>Mx</b>, <b>MX</b>
                     Musical  notation:  crotchet  (quarter  note), quaver (eighth note), semiquavers (sixteenth
                     notes), flag sign, natural sign, sharp sign
              <b>Fm</b>, <b>Ml</b> Female, male

              Accents on their own
              <b>'&gt;</b>     Circumflex (same as caret, <b>^</b>)
              <b>'!</b>     Grave (same as backtick, <b>`</b>)
              <b>',</b>     Cedilla
              <b>':</b>     Diaeresis (Umlaut)
              <b>'m</b>     Macron
              <b>''</b>     Acute

       <b>insert-files</b>
              This function allows you type a file pattern, and see the results of the expansion at  each  step.
              When you hit return, all expansions are inserted into the command line.

                     <b>bindkey</b> <b>'^Xf'</b> <b>insert-files</b>

       <b>insert-unicode-char</b>
              When first executed, the user inputs a set of hexadecimal digits.  This is terminated with another
              call to <b>insert-unicode-char</b>.  The digits are then turned into the corresponding Unicode character.
              For  example,  if  the  widget  is  bound  to  <b>^XU</b>, the character sequence `<b>^XU</b> <b>4</b> <b>c</b> <b>^XU</b>' inserts <b>L</b>
              (Unicode U+004c).

              See <b>insert-composed-char</b> for a way of inserting characters using a two-character mnemonic.

       <b>narrow-to-region</b> [ <b>-p</b> <u>pre</u> ] [ <b>-P</b> <u>post</u> ]
                        [ <b>-S</b> <u>statepm</u> | <b>-R</b> <u>statepm</u> | [ <b>-l</b> <u>lbufvar</u> ] [ <b>-r</b> <u>rbufvar</u> ] ]
                        [ <b>-n</b> ] [ <u>start</u> <u>end</u> ]
       <b>narrow-to-region-invisible</b>
              Narrow the editable portion of the buffer to the region between the cursor and the mark, which may
              be in either order.  The region may not be empty.

              <b>narrow-to-region</b> may be used as a widget or called as a function from a  user-defined  widget;  by
              default,  the  text  outside the editable area remains visible.  A <b>recursive-edit</b> is performed and
              the original widening status is then restored.  Various options and arguments are  available  when
              it is called as a function.

              The  options  <b>-p</b>  <u>pretext</u>  and  <b>-P</b>  <u>posttext</u>  may be used to replace the text before and after the
              display for the duration of the function; either or both may be an empty string.

              If the option <b>-n</b> is also given, <u>pretext</u> or <u>posttext</u> will only be inserted if there is text  before
              or after the region respectively which will be made invisible.

              Two numeric arguments may be given which will be used instead of the cursor and mark positions.

              The  option  <b>-S</b> <u>statepm</u> is used to narrow according to the other options while saving the original
              state in the parameter with name <u>statepm</u>, while the option <b>-R</b> <u>statepm</u> is used to restore the state
              from the parameter; note in both cases the <u>name</u> of the parameter is required.  In the second case,
              other options and arguments are irrelevant.  When  this  method  is  used,  no  <b>recursive-edit</b>  is
              performed;  the  calling  widget  should  call  this  function with the option <b>-S</b>, perform its own
              editing on the command line or pass control to the user via `<b>zle</b> <b>recursive-edit</b>', then  call  this
              function  with  the  option  <b>-R</b>.   The  argument  <u>statepm</u>  must be a suitable name for an ordinary
              parameter, except that parameters beginning with the prefix <b>_ntr_</b>  are  reserved  for  use  within
              <b>narrow-to-region</b>.  Typically the parameter will be local to the calling function.

              The  options  <b>-l</b>  <u>lbufvar</u>  and  <b>-r</b> <u>rbufvar</u> may be used to specify parameters where the widget will
              store the resulting text from the operation.  The  parameter  <u>lbufvar</u>  will  contain  <b>LBUFFER</b>  and
              <u>rbufvar</u> will contain <b>RBUFFER</b>.  Neither of these two options may be used with <b>-S</b> or <b>-R</b>.

              <b>narrow-to-region-invisible</b>  is  a  simple widget which calls <b>narrow-to-region</b> with arguments which
              replace any text outside the region with `<b>...</b>'.  It does not take any arguments.

              The display is restored (and the widget returns) upon any zle command which  would  usually  cause
              the  line  to  be  accepted or aborted.  Hence an additional such command is required to accept or
              abort the current line.

              The return status of both widgets is zero if the line was accepted, else non-zero.

              Here is a trivial example of a widget using this feature.
                     <b>local</b> <b>state</b>
                     <b>narrow-to-region</b> <b>-p</b> <b>$'Editing</b> <b>restricted</b> <b>region\n'</b> <b>\</b>
                       <b>-P</b> <b>''</b> <b>-S</b> <b>state</b>
                     <b>zle</b> <b>recursive-edit</b>
                     <b>narrow-to-region</b> <b>-R</b> <b>state</b>

       <b>predict-on</b>
              This set of functions implements predictive typing using history search.  After <b>predict-on</b>, typing
              characters causes the editor to look backward in the history for the  first  line  beginning  with
              what  you have typed so far.  After <b>predict-off</b>, editing returns to normal for the line found.  In
              fact, you often don't even need to use <b>predict-off</b>, because if the line doesn't match something in
              the history, adding a key performs standard completion, and then inserts itself if no  completions
              were  found.   However,  editing  in the middle of a line is liable to confuse prediction; see the
              <b>toggle</b> style below.

              With the function based completion system (which is needed for this), you should be able  to  type
              <b>TAB</b>  at  almost  any  point  to  advance the cursor to the next ``interesting'' character position
              (usually the end of the current word, but sometimes somewhere in the middle of the word).  And  of
              course as soon as the entire line is what you want, you can accept with return, without needing to
              move the cursor to the end first.

              The first time <b>predict-on</b> is used, it creates several additional widget functions:

              <b>delete-backward-and-predict</b>
                     Replaces the <b>backward-delete-char</b> widget.  You do not need to bind this yourself.
              <b>insert-and-predict</b>
                     Implements  predictive typing by replacing the <b>self-insert</b> widget.  You do not need to bind
                     this yourself.
              <b>predict-off</b>
                     Turns off predictive typing.

              Although you <b>autoload</b> only the <b>predict-on</b> function, it is necessary to  create  a  keybinding  for
              <b>predict-off</b> as well.

                     <b>zle</b> <b>-N</b> <b>predict-on</b>
                     <b>zle</b> <b>-N</b> <b>predict-off</b>
                     <b>bindkey</b> <b>'^X^Z'</b> <b>predict-on</b>
                     <b>bindkey</b> <b>'^Z'</b> <b>predict-off</b>

       <b>read-from-minibuffer</b>
              This  is  most useful when called as a function from inside a widget, but will work correctly as a
              widget in its own right.  It prompts for a value below the current command line; a  value  may  be
              input  using  all of the standard zle operations (and not merely the restricted set available when
              executing, for example, <b>execute-named-cmd</b>).  The value is then returned to the calling function in
              the parameter <b>$REPLY</b> and the editing buffer restored to its  previous  state.   If  the  read  was
              aborted by a keyboard break (typically <b>^G</b>), the function returns status 1 and <b>$REPLY</b> is not set.

              If  one  argument is supplied to the function it is taken as a prompt, otherwise `<b>?</b> ' is used.  If
              two arguments are supplied, they are the prompt and the initial value of <b>$LBUFFER</b>, and if a  third
              argument is given it is the initial value of <b>$RBUFFER</b>.  This provides a default value and starting
              cursor placement.  Upon return the entire buffer is the value of <b>$REPLY</b>.

              One  option is available: `<b>-k</b> <u>num</u>' specifies that <u>num</u> characters are to be read instead of a whole
              line.  The line editor is not invoked recursively in this  case,  so  depending  on  the  terminal
              settings  the  input  may  not  be  visible, and only the input keys are placed in <b>$REPLY</b>, not the
              entire buffer.  Note that unlike the <b>read</b> builtin <u>num</u> must be given; there is no default.

              The name is a slight misnomer, as in fact the shell's own minibuffer is not  used.   Hence  it  is
              still possible to call <b>executed-named-cmd</b> and similar functions while reading a value.

       <b>replace-argument</b>, <b>replace-argument-edit</b>
              The  function  <b>replace-argument</b>  can  be  used  to  replace a command line argument in the current
              command line or, if the current command line is empty, in the last command line executed (the  new
              command line is not executed).  Arguments are as delimited by standard shell syntax,

              If  a  numeric argument is given, that specifies the argument to be replaced.  0 means the command
              name, as in history expansion.  A negative numeric argument counts backward from the last word.

              If no numeric argument is given, the current argument is replaced; this is the  last  argument  if
              the previous history line is being used.

              The function prompts for a replacement argument.

              If the widget contains the string <b>edit</b>, for example is defined as

                     <b>zle</b> <b>-N</b> <b>replace-argument-edit</b> <b>replace-argument</b>

              then  the  function  presents the current value of the argument for editing, otherwise the editing
              buffer for the replacement is initially empty.

       <b>replace-string</b>, <b>replace-pattern</b>
       <b>replace-string-again</b>, <b>replace-pattern-again</b>
              The function <b>replace-string</b> implements three widgets.  If defined  under  the  same  name  as  the
              function,  it  prompts  for  two strings; the first (source) string will be replaced by the second
              everywhere it occurs in the line editing buffer.

              If the widget name contains the word `<b>pattern</b>', for example  by  defining  the  widget  using  the
              command  `<b>zle</b>  <b>-N</b>  <b>replace-pattern</b>  <b>replace-string</b>',  then  the  matching  is  performed using zsh
              patterns.  All zsh extended globbing patterns can be used in the source string; note  that  unlike
              filename generation the pattern does not need to match an entire word, nor do glob qualifiers have
              any  effect.   In addition, the replacement string can contain parameter or command substitutions.
              Furthermore, a `<b>&amp;</b>' in the replacement string will be replaced with the matched source string,  and
              a  backquoted  digit  `<b>\</b><u>N</u>' will be replaced by the <u>N</u>th parenthesised expression matched.  The form
              `<b>\{</b><u>N</u><b>}</b>' may be used to protect the digit from following digits.

              If the widget instead contains the word `<b>regex</b>' (or `<b>regexp</b>'),  then  the  matching  is  performed
              using regular expressions, respecting the setting of the option <b>RE_MATCH_PCRE</b> (see the description
              of  the  function  <b>regexp-replace</b>  below).  The special replacement facilities described above for
              pattern matching are available.

              By default the previous source or replacement string will not be offered  for  editing.   However,
              this  feature  can be activated by setting the style <b>edit-previous</b> in the context <b>:zle:</b><u>widget</u> (for
              example, <b>:zle:replace-string</b>) to <b>true</b>.  In  addition,  a  positive  numeric  argument  forces  the
              previous values to be offered, a negative or zero argument forces them not to be.

              The  function <b>replace-string-again</b> can be used to repeat the previous replacement; no prompting is
              done.  As with <b>replace-string</b>, if the name of the widget contains the word `<b>pattern</b>'  or  `<b>regex</b>',
              pattern or regular expression matching is performed, else a literal string replacement.  Note that
              the  previous  source  and  replacement  text  are the same whether pattern, regular expression or
              string matching is used.

              In addition, <b>replace-string</b> shows the previous replacement above the prompt, so long as there  was
              one  during  the current session; if the source string is empty, that replacement will be repeated
              without the widget prompting for a replacement string.

              For example, starting from the line:

                     <b>print</b> <b>This</b> <b>line</b> <b>contains</b> <b>fan</b> <b>and</b> <b>fond</b>

              and invoking <b>replace-pattern</b> with the source string `<b>f(?)n</b>'  and  the  replacement  string  `<b>c\1r</b>'
              produces the not very useful line:

                     <b>print</b> <b>This</b> <b>line</b> <b>contains</b> <b>car</b> <b>and</b> <b>cord</b>

              The range of the replacement string can be limited by using the <b>narrow-to-region-invisible</b> widget.
              One  limitation  of the current version is that <b>undo</b> will cycle through changes to the replacement
              and source strings before undoing the replacement itself.

       <b>send-invisible</b>
              This is similar to read-from-minibuffer in that it may be called as a function from a widget or as
              a widget of its own, and interactively reads input from the keyboard.  However,  the  input  being
              typed  is  concealed  and a string of asterisks (`<b>*</b>') is shown instead.  The value is saved in the
              parameter <b>$INVISIBLE</b> to which a reference is inserted into the  editing  buffer  at  the  restored
              cursor  position.   If  the  read was aborted by a keyboard break (typically <b>^G</b>) or another escape
              from editing such as <b>push-line</b>, <b>$INVISIBLE</b> is set to empty and the  original  buffer  is  restored
              unchanged.

              If one argument is supplied to the function it is taken as a prompt, otherwise `<b>Non-echoed</b> <b>text:</b> '
              is used (as in emacs).  If a second and third argument are supplied they are used to begin and end
              the  reference  to  <b>$INVISIBLE</b>  that is inserted into the buffer.  The default is to open with <b>${</b>,
              then <b>INVISIBLE</b>, and close with <b>}</b>, but many other effects are possible.

       <b>smart-insert-last-word</b>
              This function may replace the <b>insert-last-word</b> widget, like so:

                     <b>zle</b> <b>-N</b> <b>insert-last-word</b> <b>smart-insert-last-word</b>

              With a numeric argument, or when passed command line arguments in a call from another  widget,  it
              behaves like <b>insert-last-word</b>, except that words in comments are ignored when <b>INTERACTIVE_COMMENTS</b>
              is set.

              Otherwise,  the  rightmost  ``interesting''  word from the previous command is found and inserted.
              The default definition of ``interesting'' is that  the  word  contains  at  least  one  alphabetic
              character, slash, or backslash.  This definition may be overridden by use of the <b>match</b> style.  The
              context used to look up the style is the widget name, so usually the context is <b>:insert-last-word</b>.
              However, you can bind this function to different widgets to use different patterns:

                     <b>zle</b> <b>-N</b> <b>insert-last-assignment</b> <b>smart-insert-last-word</b>
                     <b>zstyle</b> <b>:insert-last-assignment</b> <b>match</b> <b>'[[:alpha:]][][[:alnum:]]#=*'</b>
                     <b>bindkey</b> <b>'\e='</b> <b>insert-last-assignment</b>

              If  no  interesting  word  is found and the <b>auto-previous</b> style is set to a true value, the search
              continues upward through the history.  When <b>auto-previous</b> is unset or  false  (the  default),  the
              widget must be invoked repeatedly in order to search earlier history lines.

       <b>transpose-lines</b>
              Only  useful  with  a  multi-line  editing  buffer;  the  lines  here are lines within the current
              on-screen buffer, not history lines.  The effect is similar to the function of the  same  name  in
              Emacs.

              Transpose  the  current  line  with the previous line and move the cursor to the start of the next
              line.  Repeating this (which can be done by providing a positive numeric argument) has the  effect
              of moving the line above the cursor down by a number of lines.

              With  a  negative  numeric  argument,  requires  two  lines above the cursor.  These two lines are
              transposed and the cursor moved to the start of the previous line.  Using a numeric argument  less
              than -1 has the effect of moving the line above the cursor up by minus that number of lines.

       <b>url-quote-magic</b>
              This  widget  replaces  the  built-in  <b>self-insert</b>  to make it easier to type URLs as command line
              arguments.  As you type, the input character is analyzed and, if it may need quoting, the  current
              word  is checked for a URI scheme.  If one is found and the current word is not already in quotes,
              a backslash is inserted before the input character.

              Styles to control quoting behavior:

              <b>url-metas</b>
                     This style is looked up in the context `<b>:url-quote-magic:</b><u>scheme</u>' (where <u>scheme</u> is  that  of
                     the  current  URL, e.g. "<b>ftp</b>").  The value is a string listing the characters to be treated
                     as globbing metacharacters when appearing in a URL using that scheme.  The  default  is  to
                     quote  all zsh extended globbing characters, excluding '<b>&lt;</b>' and '<b>&gt;</b>' but including braces (as
                     in brace expansion).  See also <b>url-seps</b>.

              <b>url-seps</b>
                     Like <b>url-metas</b>,  but  lists  characters  that  should  be  considered  command  separators,
                     redirections,  history  references, etc.  The default is to quote the standard set of shell
                     separators, excluding those  that  overlap  with  the  extended  globbing  characters,  but
                     including '<b>&lt;</b>' and '<b>&gt;</b>' and the first character of <b>$histchars</b>.

              <b>url-globbers</b>
                     This  style  is  looked  up  in  the context `<b>:url-quote-magic</b>'.  The values form a list of
                     command names that are expected to do their own globbing on the URL string.   This  implies
                     that  they  are  aliased  to  use  the  `<b>noglob</b>' modifier.  When the first word on the line
                     matches one of the values <u>and</u> the URL refers to a local file (see  <b>url-local-schema</b>),  only
                     the  <b>url-seps</b>  characters are quoted; the <b>url-metas</b> are left alone, allowing them to affect
                     command-line parsing, completion, etc.  The default values  are  a  literal  `<b>noglob</b>'  plus
                     (when  the  <b>zsh/parameter</b>  module is available) any commands aliased to the helper function
                     `<b>urlglobber</b>' or its alias `<b>globurl</b>'.

              <b>url-local-schema</b>
                     This style is always looked up in the context `<b>:urlglobber</b>', even though it is used by both
                     url-quote-magic and urlglobber.  The values form a  list  of  URI  schema  that  should  be
                     treated  as  referring  to  local files by their real local path names, as opposed to files
                     which are specified relative to a web-server-defined document root.  The defaults are "<b>ftp</b>"
                     and "<b>file</b>".

              <b>url-other-schema</b>
                     Like  <b>url-local-schema</b>,  but  lists  all  other  URI  schema  upon  which  <b>urlglobber</b>   and
                     <b>url-quote-magic</b>  should  act.   If  the  URI  on  the  command  line does not have a scheme
                     appearing either in this list or in <b>url-local-schema</b>, it  is  not  magically  quoted.   The
                     default  values  are  "<b>http</b>",  "<b>https</b>",  and "<b>ftp</b>".  When a scheme appears both here and in
                     <b>url-local-schema</b>, it is quoted differently depending on whether the command name appears in
                     <b>url-globbers</b>.

              Loading <b>url-quote-magic</b> also defines a helper  function  `<b>urlglobber</b>'  and  aliases  `<b>globurl</b>'  to
              `<b>noglob</b>  <b>urlglobber</b>'.   This function takes a local URL apart, attempts to pattern-match the local
              file portion of the URL path, and then puts the results back into URL format again.

       <b>vi-pipe</b>
              This function reads a movement command from the keyboard and then prompts for an external command.
              The part of the buffer covered by the movement is piped to the external command and then  replaced
              by the command's output. If the movement command is bound to vi-pipe, the current line is used.

              The  function  serves  as  an example for reading a vi movement command from within a user-defined
              widget.

       <b>which-command</b>
              This function is a drop-in replacement for the builtin  widget  <b>which-command</b>.   It  has  enhanced
              behaviour, in that it correctly detects whether or not the command word needs to be expanded as an
              alias;  if  so, it continues tracing the command word from the expanded alias until it reaches the
              command that will be executed.

              The style <b>whence</b> is available in the context <b>:zle:$WIDGET</b>; this may be set to an array to give the
              command and options that will be used to investigate the  command  word  found.   The  default  is
              <b>whence</b> <b>-c</b>.

       <b>zcalc-auto-insert</b>
              This  function  is  useful together with the <b>zcalc</b> function described in the section `Mathematical
              Functions'.  It should be bound to a key representing a binary operator such as `<b>+</b>', `<b>-</b>',  `<b>*</b>'  or
              `<b>/</b>'.   When  running in zcalc, if the key occurs at the start of the line or immediately following
              an open parenthesis, the text <b>"ans</b> <b>"</b> is inserted before the  representation  of  the  key  itself.
              This allows easy use of the answer from the previous calculation in the current line.  The text to
              be   inserted   before   the   symbol   typed   can   be   modified   by   setting   the  variable
              <b>ZCALC_AUTO_INSERT_PREFIX</b>.

              Hence, for example, typing `<b>+12</b>' followed by return adds 12 to the previous result.

              If zcalc is in RPN mode (<b>-r</b> option) the effect of this  binding  is  automatically  suppressed  as
              operators alone on a line are meaningful.

              When not in zcalc, the key simply inserts the symbol itself.

   <b>Utility</b> <b>Functions</b>
       These  functions  are  useful in constructing widgets.  They should be loaded with `<b>autoload</b> <b>-U</b> <u>function</u>'
       and called as indicated from user-defined widgets.

       <b>split-shell-arguments</b>
              This function splits the line currently being edited into shell  arguments  and  whitespace.   The
              result  is  stored  in  the  array  <b>reply</b>.  The array contains all the parts of the line in order,
              starting with any whitespace before the first argument, and finishing with  any  whitespace  after
              the last argument.  Hence (so long as the option <b>KSH_ARRAYS</b> is not set) whitespace is given by odd
              indices  in  the  array  and arguments by even indices.  Note that no stripping of quotes is done;
              joining together all the elements of <b>reply</b> in order is guaranteed to produce the original line.

              The parameter <b>REPLY</b> is set to the index of the word in <b>reply</b> which contains  the  character  after
              the  cursor, where the first element has index 1.  The parameter <b>REPLY2</b> is set to the index of the
              character under the cursor in that word, where the first character has index 1.

              Hence <b>reply</b>, <b>REPLY</b> and <b>REPLY2</b> should all be made local to the enclosing function.

              See the function <b>modify-current-argument</b>, described below, for an example  of  how  to  call  this
              function.

       <b>modify-current-argument</b> [ <u>expr-using-</u><b>$ARG</b> | <u>func</u> ]
              This function provides a simple method of allowing user-defined widgets to modify the command line
              argument  under  the  cursor  (or  immediately  to the left of the cursor if the cursor is between
              arguments).

              The argument can be an expression which when evaluated operates on the shell parameter <b>ARG</b>,  which
              will  have  been  set  to  the  command  line argument under the cursor.  The expression should be
              suitably quoted to prevent it being evaluated too early.

              Alternatively, if the argument does not contain the string <b>ARG</b>,  it  is  assumed  to  be  a  shell
              function, to which the current command line argument is passed as the only argument.  The function
              should  set  the  variable  <b>REPLY</b> to the new value for the command line argument.  If the function
              returns non-zero status, so does the calling function.

              For example, a user-defined widget containing the following code converts the  characters  in  the
              argument under the cursor into all upper case:

                     <b>modify-current-argument</b> <b>'${(U)ARG}'</b>

              The  following  strips any quoting from the current word (whether backslashes or one of the styles
              of quotes), and replaces it with single quoting throughout:

                     <b>modify-current-argument</b> <b>'${(qq)${(Q)ARG}}'</b>

              The following performs directory expansion on the command line argument and  replaces  it  by  the
              absolute path:

                     <b>expand-dir()</b> <b>{</b>
                       <b>REPLY=${~1}</b>
                       <b>REPLY=${REPLY:a}</b>
                     <b>}</b>
                     <b>modify-current-argument</b> <b>expand-dir</b>

              In  practice  the  function  <b>expand-dir</b>  would  probably  not  be  defined within the widget where
              <b>modify-current-argument</b> is called.

   <b>Styles</b>
       The behavior of several of the above widgets can be controlled by the use of the  <b>zstyle</b>  mechanism.   In
       particular,  widgets that interact with the completion system pass along their context to any completions
       that they invoke.

       <b>break-keys</b>
              This style is used by the <b>incremental-complete-word</b> widget. Its value should be a pattern, and all
              keys matching this pattern will cause the widget to stop incremental completion  without  the  key
              having  any further effect. Like all styles used directly by <b>incremental-complete-word</b>, this style
              is looked up using the context `<b>:incremental</b>'.

       <b>completer</b>
              The <b>incremental-complete-word</b> and <b>insert-and-predict</b> widgets set up their top-level  context  name
              before  calling  completion.   This allows one to define different sets of completer functions for
              normal completion and for these widgets.   For  example,  to  use  completion,  approximation  and
              correction  for  normal  completion, completion and correction for incremental completion and only
              completion for prediction one could use:

                     <b>zstyle</b> <b>':completion:*'</b> <b>completer</b> <b>\</b>
                             <b>_complete</b> <b>_correct</b> <b>_approximate</b>
                     <b>zstyle</b> <b>':completion:incremental:*'</b> <b>completer</b> <b>\</b>
                             <b>_complete</b> <b>_correct</b>
                     <b>zstyle</b> <b>':completion:predict:*'</b> <b>completer</b> <b>\</b>
                             <b>_complete</b>

              It is a good idea to restrict the completers used in prediction, because they may be automatically
              invoked as you type.  The <b>_list</b> and <b>_menu</b> completers should never be used  with  prediction.   The
              <b>_approximate</b>,  <b>_correct</b>,  <b>_expand</b>,  and  <b>_match</b> completers may be used, but be aware that they may
              change characters anywhere in the word behind the cursor, so you need to watch carefully that  the
              result is what you intended.

       <b>cursor</b> The <b>insert-and-predict</b> widget uses this style, in the context `<b>:predict</b>', to decide where to place
              the cursor after completion has been tried.  Values are:

              <b>complete</b>
                     The  cursor  is  left  where  it  was  when  completion finished, but only if it is after a
                     character equal to the one just inserted by the user.  If it is  after  another  character,
                     this value is the same as `<b>key</b>'.

              <b>key</b>    The  cursor is left after the <u>n</u>th occurrence of the character just inserted, where <u>n</u> is the
                     number of times that character appeared in the word before completion  was  attempted.   In
                     short, this has the effect of leaving the cursor after the character just typed even if the
                     completion code found out that no other characters need to be inserted at that position.

              Any  other  value  for  this  style  unconditionally  leaves  the cursor at the position where the
              completion code left it.

       <b>list</b>   When using the <b>incremental-complete-word</b> widget, this style says if the matches should  be  listed
              on every key press (if they fit on the screen).  Use the context prefix `<b>:completion:incremental</b>'.

              The  <b>insert-and-predict</b> widget uses this style to decide if the completion should be shown even if
              there is only one possible completion.  This is done if the value of  this  style  is  the  string
              <b>always</b>.  In this case the context is `<b>:predict</b>' (<u>not</u> `<b>:completion:predict</b>').

       <b>match</b>  This  style  is  used  by  <b>smart-insert-last-word</b>  to  provide a pattern (using full <b>EXTENDED_GLOB</b>
              syntax) that matches an interesting word.  The  context  is  the  name  of  the  widget  to  which
              <b>smart-insert-last-word</b>  is  bound  (see above).  The default behavior of <b>smart-insert-last-word</b> is
              equivalent to:

                     <b>zstyle</b> <b>:insert-last-word</b> <b>match</b> <b>'*[[:alpha:]/\\]*'</b>

              However, you might want to include words that contain spaces:

                     <b>zstyle</b> <b>:insert-last-word</b> <b>match</b> <b>'*[[:alpha:][:space:]/\\]*'</b>

              Or include numbers as long as the word is at least two characters long:

                     <b>zstyle</b> <b>:insert-last-word</b> <b>match</b> <b>'*([[:digit:]]?|[[:alpha:]/\\])*'</b>

              The above example causes redirections like "2&gt;" to be included.

       <b>prompt</b> The <b>incremental-complete-word</b> widget shows the value of this  style  in  the  status  line  during
              incremental  completion.   The  string  value  may  contain any of the following substrings in the
              manner of the <b>PS1</b> and other prompt parameters:

              <b>%c</b>     Replaced by the name of the completer function that  generated  the  matches  (without  the
                     leading underscore).

              <b>%l</b>     When  the <b>list</b> style is set, replaced by `<b>...</b>' if the list of matches is too long to fit on
                     the screen and with an empty string otherwise.  If the <b>list</b> style is `false'  or  not  set,
                     `<b>%l</b>' is always removed.

              <b>%n</b>     Replaced by the number of matches generated.

              <b>%s</b>     Replaced  by  `<b>-no</b>  <b>match-</b>',  `<b>-no</b>  <b>prefix-</b>',  or an empty string if there is no completion
                     matching the word on the line, if the matches have no common prefix different from the word
                     on the line, or if there is such a common prefix, respectively.

              <b>%u</b>     Replaced by the unambiguous part of all matches, if there is any, and if  it  is  different
                     from the word on the line.

              Like `<b>break-keys</b>', this uses the `<b>:incremental</b>' context.

       <b>stop-keys</b>
              This style is used by the <b>incremental-complete-word</b> widget.  Its value is treated similarly to the
              one  for  the <b>break-keys</b> style (and uses the same context: `<b>:incremental</b>').  However, in this case
              all keys matching the pattern given as its value will stop incremental completion  and  will  then
              execute their usual function.

       <b>toggle</b> This  boolean  style  is used by <b>predict-on</b> and its related widgets in the context `<b>:predict</b>'.  If
              set to one of the standard `true' values,  predictive  typing  is  automatically  toggled  off  in
              situations  where  it  is unlikely to be useful, such as when editing a multi-line buffer or after
              moving into the middle of a line  and  then  deleting  a  character.   The  default  is  to  leave
              prediction turned on until an explicit call to <b>predict-off</b>.

       <b>verbose</b>
              This  boolean  style  is used by <b>predict-on</b> and its related widgets in the context `<b>:predict</b>'.  If
              set to one of the standard `true' values, these widgets display a message below  the  prompt  when
              the  predictive  state is toggled.  This is most useful in combination with the <b>toggle</b> style.  The
              default does not display these messages.

       <b>widget</b> This style is similar to the <b>command</b> style: For widget  functions  that  use  <b>zle</b>  to  call  other
              widgets, this style can sometimes be used to override the widget which is called.  The context for
              this  style  is  the name of the calling widget (<u>not</u> the name of the calling function, because one
              function may be bound to multiple widget names).

                     <b>zstyle</b> <b>:copy-earlier-word</b> <b>widget</b> <b>smart-insert-last-word</b>

              Check the documentation for the calling widget or function to determine whether the  <b>widget</b>  style
              is used.

</pre><h4><b>EXCEPTION</b> <b>HANDLING</b></h4><pre>
       Two  functions are provided to enable zsh to provide exception handling in a form that should be familiar
       from other languages.

       <b>throw</b> <u>exception</u>
              The function <b>throw</b> throws the named <u>exception</u>.  The name is an arbitrary string and is  only  used
              by  the  <b>throw</b> and <b>catch</b> functions.  An exception is for the most part treated the same as a shell
              error, i.e. an unhandled exception will cause the shell to abort all processing in a  function  or
              script and to return to the top level in an interactive shell.

       <b>catch</b> <u>exception-pattern</u>
              The   function   <b>catch</b>   returns   status  zero  if  an  exception  was  thrown  and  the  pattern
              <u>exception-pattern</u> matches its name.  Otherwise  it  returns  status  1.   <u>exception-pattern</u>  is  a
              standard  shell  pattern,  respecting  the  current setting of the <b>EXTENDED_GLOB</b> option.  An alias
              <b>catch</b> is also defined to prevent the argument to the function from matching filenames, so patterns
              may be used unquoted.  Note that as exceptions are not fundamentally different  from  other  shell
              errors  it  is possible to catch shell errors by using an empty string as the exception name.  The
              shell variable <b>CAUGHT</b> is set by <b>catch</b> to the name of the exception  caught.   It  is  possible  to
              rethrow an exception by calling the <b>throw</b> function again once an exception has been caught.

       The  functions  are designed to be used together with the <b>always</b> construct described in <u><a href="../man1/zshmisc.1.html">zshmisc</a></u>(1).  This
       is important as only this construct provides the required support for exceptions.  A typical  example  is
       as follows.

              <b>{</b>
                <b>#</b> <b>"try"</b> <b>block</b>
                <b>#</b> <b>...</b> <b>nested</b> <b>code</b> <b>here</b> <b>calls</b> <b>"throw</b> <b>MyExcept"</b>
              <b>}</b> <b>always</b> <b>{</b>
                <b>#</b> <b>"always"</b> <b>block</b>
                <b>if</b> <b>catch</b> <b>MyExcept;</b> <b>then</b>
                  <b>print</b> <b>"Caught</b> <b>exception</b> <b>MyExcept"</b>
                <b>elif</b> <b>catch</b> <b>'';</b> <b>then</b>
                  <b>print</b> <b>"Caught</b> <b>a</b> <b>shell</b> <b>error.</b>  <b>Propagating..."</b>
                  <b>throw</b> <b>''</b>
                <b>fi</b>
                <b>#</b> <b>Other</b> <b>exceptions</b> <b>are</b> <b>not</b> <b>handled</b> <b>but</b> <b>may</b> <b>be</b> <b>caught</b> <b>further</b>
                <b>#</b> <b>up</b> <b>the</b> <b>call</b> <b>stack.</b>
              <b>}</b>

       If all exceptions should be caught, the following idiom might be preferable.

              <b>{</b>
                <b>#</b> <b>...</b> <b>nested</b> <b>code</b> <b>here</b> <b>throws</b> <b>an</b> <b>exception</b>
              <b>}</b> <b>always</b> <b>{</b>
                <b>if</b> <b>catch</b> <b>*;</b> <b>then</b>
                  <b>case</b> <b>$CAUGHT</b> <b>in</b>
                    <b>(MyExcept)</b>
                    <b>print</b> <b>"Caught</b> <b>my</b> <b>own</b> <b>exception"</b>
                    <b>;;</b>
                    <b>(*)</b>
                    <b>print</b> <b>"Caught</b> <b>some</b> <b>other</b> <b>exception"</b>
                    <b>;;</b>
                  <b>esac</b>
                <b>fi</b>
              <b>}</b>

       In  common  with exception handling in other languages, the exception may be thrown by code deeply nested
       inside the `try' block.  However, note that it must be thrown inside the current shell, not in a subshell
       forked for a pipeline, parenthesised  current-shell  construct,  or  some  form  of  command  or  process
       substitution.

       The  system  internally  uses  the  shell  variable <b>EXCEPTION</b> to record the name of the exception between
       throwing and catching.  One drawback of this scheme is that if the exception is not handled the  variable
       <b>EXCEPTION</b>  remains  set  and  may  be incorrectly recognised as the name of an exception if a shell error
       subsequently occurs.  Adding <b>unset</b> <b>EXCEPTION</b> at the start of the outermost layer of any  code  that  uses
       exception handling will eliminate this problem.

</pre><h4><b>MIME</b> <b>FUNCTIONS</b></h4><pre>
       Three  functions  are  available  to  provide  handling  of files recognised by extension, for example to
       dispatch a file <b>text.ps</b> when executed as a command to an appropriate viewer.

       <b>zsh-mime-setup</b> [ <b>-fv</b> ] [ <b>-l</b> [ <u>suffix</u> ... ] ]
       <b>zsh-mime-handler</b> [ <b>-l</b> ] <u>command</u> <u>argument</u> ...
              These two functions use the files <b><a href="file:~/.mime.types">~/.mime.types</a></b> and <b><a href="file:/etc/mime.types">/etc/mime.types</a></b>,  which  associate  types  and
              extensions,  as  well as <b><a href="file:~/.mailcap">~/.mailcap</a></b> and <b>/etc/mailcap</b> files, which associate types and the programs
              that handle them.   These  are  provided  on  many  systems  with  the  Multimedia  Internet  Mail
              Extensions.

              To enable the system, the function <b>zsh-mime-setup</b> should be autoloaded and run.  This allows files
              with  extensions  to  be treated as executable; such files be completed by the function completion
              system.  The function <b>zsh-mime-handler</b> should not need to be called by the user.

              The system works by setting up suffix aliases with `<b>alias</b> <b>-s</b>'.  Suffix aliases  already  installed
              by the user will not be overwritten.

              For  suffixes  defined in lower case, upper case variants will also automatically be handled (e.g.
              <b>PDF</b> is automatically handled if handling for the suffix <b>pdf</b> is defined), but not vice versa.

              Repeated calls to <b>zsh-mime-setup</b> do  not  override  the  existing  mapping  between  suffixes  and
              executable  files  unless  the  option  <b>-f</b>  is  given.  Note, however, that this does not override
              existing suffix aliases assigned to handlers other than <b>zsh-mime-handler</b>.

              Calling <b>zsh-mime-setup</b> with the option <b>-l</b> lists  the  existing  mappings  without  altering  them.
              Suffixes  to  list  (which  may  contain  pattern  characters that should be quoted from immediate
              interpretation on the command line) may be given as additional arguments, otherwise  all  suffixes
              are listed.

              Calling  <b>zsh-mime-setup</b>  with  the  option  <b>-v</b>  causes verbose output to be shown during the setup
              operation.

              The system  respects  the  <b>mailcap</b>  flags  <b>needsterminal</b>  and  <b>copiousoutput</b>;  see  <u><a href="../man4/mailcap.4.html">mailcap</a></u>(4)  or
              <u><a href="../man5/mailcap.5.html">mailcap</a></u>(5) (the man page's name varies across platforms).

              The  functions  use  the  following styles, which are defined with the <b>zstyle</b> builtin command (see
              <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1)).  They should be defined before <b>zsh-mime-setup</b> is run.  The contexts used all start
              with <b>:mime:</b>, with additional components in some cases.   It  is  recommended  that  a  trailing  <b>*</b>
              (suitably  quoted)  be  appended to style patterns in case the system is extended in future.  Some
              examples are given below.

              For files that have multiple suffixes, e.g. <b>.pdf.gz</b>, where the context includes the suffix it will
              be looked up starting with the longest possible suffix until a match for the style is found.   For
              example, if <b>.pdf.gz</b> produces a match for the handler, that will be used; otherwise the handler for
              <b>.gz</b>  will  be  used.   Note that, owing to the way suffix aliases work, it is always required that
              there be a handler for the shortest possible suffix, so  in  this  example  <b>.pdf.gz</b>  can  only  be
              handled  if  <b>.gz</b>  is  also handled (though not necessarily in the same way).  Alternatively, if no
              handling for <b>.gz</b> on its own is needed, simply adding the command

                     <b>alias</b> <b>-s</b> <b>gz=zsh-mime-handler</b>

              to the initialisation code is sufficient; <b>.gz</b> will not be handled  on  its  own,  but  may  be  in
              combination with other suffixes.

              <b>current-shell</b>
                     If this boolean style is true, the mailcap handler for the context in question is run using
                     the  <b>eval</b> builtin instead of by starting a new <b>sh</b> process.  This is more efficient, but may
                     not work in the occasional cases where the mailcap handler uses strict POSIX syntax.

              <b>disown</b> If this boolean style is true, mailcap handlers started in the background will be disowned,
                     i.e. not subject to job control within the  parent  shell.   Such  handlers  nearly  always
                     produce  their  own windows, so the only likely harmful side effect of setting the style is
                     that it becomes harder to kill jobs from within the shell.

              <b>execute-as-is</b>
                     This style gives a list of patterns to be matched against files passed for execution with a
                     handler program.  If the file matches the pattern, the entire command line is  executed  in
                     its  current form, with no handler.  This is useful for files which might have suffixes but
                     nonetheless be executable in their own right.  If the style is not set,  the  pattern  <b>*(*)</b>
                     <b>*(/)</b> is used; hence executable files are executed directly and not passed to a handler, and
                     the option <b>AUTO_CD</b> may be used to change to directories that happen to have MIME suffixes.

              <b>execute-never</b>
                     This  style is useful in combination with <b>execute-as-is</b>.  It is set to an array of patterns
                     corresponding to full paths to files that should never be treated as  executable,  even  if
                     the file passed to the MIME handler matches <b>execute-as-is</b>.  This is useful for file systems
                     that  don't  handle  execute  permission or that contain executables from another operating
                     system.  For example, if <b>/mnt/windows</b> is a Windows mount, then

                            <b>zstyle</b> <b>':mime:*'</b> <b>execute-never</b> <b>'/mnt/windows/*'</b>

                     will ensure that any files found in that area will be executed as MIME types even  if  they
                     are  executable.   As  this  example  shows,  the complete file name is matched against the
                     pattern, regardless of how the file was passed to the handler.  The file is resolved  to  a
                     full path using the <b>:P</b> modifier described in the subsection `Modifiers' in <u><a href="../man1/zshexpn.1.html">zshexpn</a></u>(1); this
                     means  that  symbolic  links  are  resolved  where  possible, so that links into other file
                     systems behave in the correct fashion.

              <b>file-path</b>
                     Used if the style <b>find-file-in-path</b> is true for the same  context.   Set  to  an  array  of
                     directories  that  are  used  for  searching for the file to be handled; the default is the
                     command path given by the special parameter <b>path</b>.  The shell option <b>PATH_DIRS</b> is respected;
                     if that is set, the appropriate path will be searched even if the name of the  file  to  be
                     handled  as  it  appears  on  the  command  line  contains  a  `<b>/</b>'.   The  full  context is
                     <b>:mime:.</b><u>suffix</u><b>:</b>, as described for the style <b>handler</b>.

              <b>find-file-in-path</b>
                     If set, allows files whose names do not contain absolute paths to be searched  for  in  the
                     command path or the path specified by the <b>file-path</b> style.  If the file is not found in the
                     path, it is looked for locally (whether or not the current directory is in the path); if it
                     is  not  found  locally, the handler will abort unless the <b>handle-nonexistent</b> style is set.
                     Files found in the path are tested as described for  the  style  <b>execute-as-is</b>.   The  full
                     context is <b>:mime:.</b><u>suffix</u><b>:</b>, as described for the style <b>handler</b>.

              <b>flags</b>  Defines flags to go with a handler; the context is as for the <b>handler</b> style, and the format
                     is as for the flags in <b>mailcap</b>.

              <b>handle-nonexistent</b>
                     By  default, arguments that don't correspond to files are not passed to the MIME handler in
                     order to prevent it from intercepting commands found  in  the  path  that  happen  to  have
                     suffixes.   This  style may be set to an array of extended glob patterns for arguments that
                     will be passed to the handler even if they don't exist.  If it is  not  explicitly  set  it
                     defaults  to <b>[[:alpha:]]#:/*</b> which allows URLs to be passed to the MIME handler even though
                     they don't exist in that format in the file system.  The full context is <b>:mime:.</b><u>suffix</u><b>:</b>, as
                     described for the style <b>handler</b>.

              <b>handler</b>
                     Specifies a handler for a suffix; the suffix is given by the context as <b>:mime:.</b><u>suffix</u><b>:</b>, and
                     the format of the handler is exactly that in <b>mailcap</b>.   Note  in  particular  the  `<b>.</b>'  and
                     trailing  colon  to  distinguish  this  use  of  the  context.   This overrides any handler
                     specified by the <b>mailcap</b> files.  If the handler requires a terminal, the <b>flags</b> style should
                     be set to include the word <b>needsterminal</b>, or if the output is to  be  displayed  through  a
                     pager (but not if the handler is itself a pager), it should include <b>copiousoutput</b>.

              <b>mailcap</b>
                     A  list  of  files  in  the  format of <b><a href="file:~/.mailcap">~/.mailcap</a></b> and <b>/etc/mailcap</b> to be read during setup,
                     replacing the default list which consists of those two files.  The context is <b>:mime:</b>.  A  <b>+</b>
                     in the list will be replaced by the default files.

              <b>mailcap-priorities</b>
                     This style is used to resolve multiple mailcap entries for the same MIME type.  It consists
                     of  an array of the following elements, in descending order of priority; later entries will
                     be used if earlier entries are unable to resolve the entries being compared.   If  none  of
                     the tests resolve the entries, the first entry encountered is retained.

                     <b>files</b>  The  order  of  files  (entries  in  the  <b>mailcap</b>  style)  read.   Earlier files are
                            preferred.  (Note this does not resolve entries in the same file.)

                     <b>priority</b>
                            The priority flag from the mailcap entry.  The priority is an integer from  0  to  9
                            with the default value being 5.

                     <b>flags</b>  The test given by the <b>mailcap-prio-flags</b> option is used to resolve entries.

                     <b>place</b>  Later  entries  are preferred; as the entries are strictly ordered, this test always
                            succeeds.

                     Note that as this style is handled during initialisation, the  context  is  always  <b>:mime:</b>,
                     with no discrimination by suffix.

              <b>mailcap-prio-flags</b>
                     This  style is used when the keyword <b>flags</b> is encountered in the list of tests specified by
                     the <b>mailcap-priorities</b> style.  It should be set to a list of patterns,  each  of  which  is
                     tested  against  the  flags  specified  in  the  mailcap entry (in other words, the sets of
                     assignments found with some entries in the mailcap file).  Earlier patterns in the list are
                     preferred to later ones, and matched patterns are preferred to unmatched ones.

              <b>mime-types</b>
                     A list of files in the format of <b><a href="file:~/.mime.types">~/.mime.types</a></b> and <b><a href="file:/etc/mime.types">/etc/mime.types</a></b> to be read during setup,
                     replacing the default list which consists of those two files.  The context is <b>:mime:</b>.  A  <b>+</b>
                     in the list will be replaced by the default files.

              <b>never-background</b>
                     If  this  boolean  style  is  set,  the  handler for the given context is always run in the
                     foreground, even if the flags provided in the mailcap entry suggest it  need  not  be  (for
                     example, it doesn't require a terminal).

              <b>pager</b>  If  set,  will be used instead of <b>$PAGER</b> or <b>more</b> to handle suffixes where the <b>copiousoutput</b>
                     flag is set.  The context is as for <b>handler</b>, i.e. <b>:mime:.</b><u>suffix</u><b>:</b> for handling a  file  with
                     the given <u>suffix</u>.

              Examples:

                     <b>zstyle</b> <b>':mime:*'</b> <b>mailcap</b> <b><a href="file:~/.mailcap">~/.mailcap</a></b> <b>/usr/local/etc/mailcap</b>
                     <b>zstyle</b> <b>':mime:.txt:'</b> <b>handler</b> <b>less</b> <b>%s</b>
                     <b>zstyle</b> <b>':mime:.txt:'</b> <b>flags</b> <b>needsterminal</b>

              When  <b>zsh-mime-setup</b> is subsequently run, it will look for <b>mailcap</b> entries in the two files given.
              Files of suffix <b>.txt</b> will be handled by running `<b>less</b> <u>file.txt</u>'.  The flag <b>needsterminal</b> is set to
              show that this program must run attached to a terminal.

              As there are several steps to dispatching a command, the following should be checked if attempting
              to execute a file by extension <b>.</b><u>ext</u> does not have the expected effect.

              The command `<b>alias</b> <b>-s</b> <u>ext</u>' should show `<b>ps=zsh-mime-handler</b>'.  If it shows something else, another
              suffix alias was already installed and was not overwritten.  If it shows nothing, no  handler  was
              installed:   this  is  most  likely  because  no  handler was found in the <b>.mime.types</b> and <b>mailcap</b>
              combination for <b>.ext</b> files.  In that case, appropriate handling should be added  to  <b><a href="file:~/.mime.types">~/.mime.types</a></b>
              and <b>mailcap</b>.

              If  the  extension is handled by <b>zsh-mime-handler</b> but the file is not opened correctly, either the
              handler defined for the type is incorrect, or the flags associated with  it  are  in  appropriate.
              Running  <b>zsh-mime-setup</b>  <b>-l</b>  will  show the handler and, if there are any, the flags.  A <b>%s</b> in the
              handler is replaced by the file (suitably quoted if necessary).  Check that  the  handler  program
              listed  lists  and  can  be  run  in  the  way  shown.  Also check that the flags <b>needsterminal</b> or
              <b>copiousoutput</b> are set if the handler needs to be run under a terminal; the second flag is used  if
              the  output  should be sent to a pager.  An example of a suitable <b>mailcap</b> entry for such a program
              is:

                     <b>text/html;</b> <b>/usr/bin/lynx</b> <b>'%s';</b> <b>needsterminal</b>

              Running `<b>zsh-mime-handler</b> <b>-l</b> <u>command</u> <u>line</u>'  prints  the  command  line  that  would  be  executed,
              simplified  to  remove  the  effect  of  any  flags, and quoted so that the output can be run as a
              complete zsh command line.  This is used by the completion system to decide how to complete  after
              a file handled by <b>zsh-mime-setup</b>.

       <b>pick-web-browser</b>
              This function is separate from the two MIME functions described above and can be assigned directly
              to a suffix:

                     <b>autoload</b> <b>-U</b> <b>pick-web-browser</b>
                     <b>alias</b> <b>-s</b> <b>html=pick-web-browser</b>

              It  is  provided as an intelligent front end to dispatch a web browser.  It may be run as either a
              function or a shell script.  The status 255 is returned if no browser could be started.

              Various styles are available to customize the choice of browsers:

              <b>browser-style</b>
                     The value of the style is an array giving preferences in decreasing order for the  type  of
                     browser to use.  The values of elements may be

                     <b>running</b>
                            Use  a  GUI  browser  that is already running when an X Window display is available.
                            The browsers listed in the <b>x-browsers</b> style are tried in order until one  is  found;
                            if  it is, the file will be displayed in that browser, so the user may need to check
                            whether it has appeared.  If no running  browser  is  found,  one  is  not  started.
                            Browsers  other  than  Firefox,  Opera  and  Konqueror are assumed to understand the
                            Mozilla syntax for opening a URL remotely.

                     <b>x</b>      Start a new GUI browser when an X Window  display  is  available.   Search  for  the
                            availability  of  one  of  the browsers listed in the <b>x-browsers</b> style and start the
                            first one that is found.  No check is made for an already running browser.

                     <b>tty</b>    Start a terminal-based browser.  Search for the availability of one of the  browsers
                            listed in the <b>tty-browsers</b> style and start the first one that is found.

                     If the style is not set the default <b>running</b> <b>x</b> <b>tty</b> is used.

              <b>x-browsers</b>
                     An  array  in  decreasing  order  of preference of browsers to use when running under the X
                     Window System.  The array consists of the command name under which to  start  the  browser.
                     They are looked up in the context <b>:mime:</b> (which may be extended in future, so appending `<b>*</b>'
                     is recommended).  For example,

                            <b>zstyle</b> <b>':mime:*'</b> <b>x-browsers</b> <b>opera</b> <b>konqueror</b> <b>firefox</b>

                     specifies  that  <b>pick-web-browser</b>  should  first  look  for  a  running  instance of Opera,
                     Konqueror or Firefox, in that order, and if it fails to find any should  attempt  to  start
                     Opera.  The default is <b>firefox</b> <b>mozilla</b> <b>netscape</b> <b>opera</b> <b>konqueror</b>.

              <b>tty-browsers</b>
                     An  array  similar  to  <b>x-browsers</b>,  except  that it gives browsers to use when no X Window
                     display is available.  The default is <b>elinks</b> <b>links</b> <b>lynx</b>.

              <b>command</b>
                     If it is set this style is used to pick the command used to open a page for a browser.  The
                     context    is    <b>:mime:browser:new:$browser:</b>    to    start    a     new     browser     or
                     <b>:mime:browser:running:$browser:</b> to open a URL in a browser already running on the current X
                     display,  where <b>$browser</b> is the value matched in the <b>x-browsers</b> or <b>tty-browsers</b> style.  The
                     escape sequence <b>%b</b> in the style's value will be replaced by the browser, while <b>%u</b>  will  be
                     replaced  by  the  URL.   If  the  style  is  not set, the default for all new instances is
                     equivalent to <b>%b</b> <b>%u</b> and the defaults for using  running  browsers  are  equivalent  to  the
                     values  <b>kfmclient</b> <b>openURL</b> <b>%u</b> for Konqueror, <b>firefox</b> <b>-new-tab</b> <b>%u</b> for Firefox, <b>opera</b> <b>-newpage</b>
                     <b>%u</b> for Opera, and <b>%b</b> <b>-remote</b> <b>"openUrl(%u)"</b> for all others.

</pre><h4><b>MATHEMATICAL</b> <b>FUNCTIONS</b></h4><pre>
       <b>zcalc</b> [ <b>-erf</b> ] [ <u>expression</u> ... ]
              A reasonably powerful calculator based on zsh's arithmetic evaluation  facility.   The  syntax  is
              similar to that of formulae in most programming languages; see the section `Arithmetic Evaluation'
              in <u><a href="../man1/zshmisc.1.html">zshmisc</a></u>(1) for details.

              Non-programmers  should  note  that, as in many other programming languages, expressions involving
              only integers (whether constants without a `<b>.</b>', variables containing such constants as strings, or
              variables declared to be integers) are by default evaluated using integer arithmetic, which is not
              how an ordinary desk calculator operates.  To force floating point operation, pass the option  <b>-f</b>;
              see further notes below.

              If  the  file <b><a href="file:~/.zcalcrc">~/.zcalcrc</a></b> exists it will be sourced inside the function once it is set up and about
              to process the command line.  This can be used, for example, to set shell options; <b>emulate</b> <b>-L</b>  <b>zsh</b>
              and  <b>setopt</b> <b>extendedglob</b> are in effect at this point.  Any failure to source the file if it exists
              is treated as fatal.  As with other initialisation files, the directory <b>$ZDOTDIR</b> is  used  instead
              of <b>$HOME</b> if it is set.

              The  mathematical  library  <b>zsh/mathfunc</b>  will  be loaded if it is available; see the section `The
              zsh/mathfunc Module' in <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1).  The mathematical functions correspond to  the  raw  system
              libraries, so trigonometric functions are evaluated using radians, and so on.

              Each  line typed is evaluated as an expression.  The prompt shows a number, which corresponds to a
              positional parameter where the result of that calculation is stored.  For example, the  result  of
              the  calculation  on  the line preceded by `<b>4&gt;</b> ' is available as <b>$4</b>.  The last value calculated is
              available as <b>ans</b>.  Full command line editing, including the history of previous  calculations,  is
              available; the history is saved in the file <b><a href="file:~/.zcalc_history">~/.zcalc_history</a></b>.  To exit, enter a blank line or type
              `<b>:q</b>' on its own (`<b>q</b>' is allowed for historical compatibility).

              A  line  ending  with  a  single backslash is treated in the same fashion as it is in command line
              editing:  the backslash is removed, the function prompts for more input (the prompt is preceded by
              `<b>...</b>' to indicate this), and the lines are  combined  into  one  to  get  the  final  result.   In
              addition, if the input so far contains more open than close parentheses <b>zcalc</b> will prompt for more
              input.

              If  arguments  are  given  to  <b>zcalc</b>  on start up, they are used to prime the first few positional
              parameters.  A visual indication of this is given when the calculator starts.

              The constants <b>PI</b> (3.14159...) and <b>E</b> (2.71828...) are provided.  Parameter assignment is  possible,
              but  note  that  all  parameters  will  be put into the global namespace unless the <b>:local</b> special
              command is used.  The function creates local variables whose names start with <b>_</b>, so  users  should
              avoid  doing  so.   The  variables  <b>ans</b> (the last answer) and <b>stack</b> (the stack in RPN mode) may be
              referred to directly; <b>stack</b> is an array but elements of it are  numeric.   Various  other  special
              variables  are  used  locally with their standard meaning, for example <b>compcontext</b>, <b>match</b>, <b>mbegin</b>,
              <b>mend</b>, <b>psvar</b>.

              The output base can be initialised by passing the option `<b>-#</b><u>base</u>', for example `<b>zcalc</b>  <b>-#16</b>'  (the
              `<b>#</b>' may have to be quoted, depending on the globbing options set).

              If  the  option  `<b>-e</b>'  is  set,  the function runs non-interactively: the arguments are treated as
              expressions to be evaluated as if entered interactively line by line.

              If the option `<b>-f</b>' is set, all numbers are treated  as  floating  point,  hence  for  example  the
              expression `<b>3/4</b>' evaluates to 0.75 rather than 0.  Options must appear in separate words.

              If  the  option  `<b>-r</b>'  is  set,  RPN  (Reverse Polish Notation) mode is entered.  This has various
              additional properties:
              Stack  Evaluated values are maintained in a stack; this is contained in an array named <b>stack</b>  with
                     the most recent value in <b>${stack[1]}</b>.

              Operators and functions
                     If  the line entered matches an operator (<b>+</b>, <b>-</b>, <b>*</b>, <b>/</b>, <b>**</b>, <b>^</b>, <b>|</b> or <b>&amp;</b>) or a function supplied
                     by the <b>zsh/mathfunc</b> library, the bottom element or elements of the stack are popped to  use
                     as  the  argument  or  arguments.   The higher elements of stack (least recent) are used as
                     earlier arguments.  The result is then pushed into <b>${stack[1]}</b>.

              Expressions
                     Other expressions are evaluated normally, printed,  and  added  to  the  stack  as  numeric
                     values.   The  syntax  within  expressions on a single line is normal shell arithmetic (not
                     RPN).

              Stack listing
                     If an integer follows the option <b>-r</b> with no space,  then  on  every  evaluation  that  many
                     elements of the stack, where available, are printed instead of just the most recent result.
                     Hence, for example, <b>zcalc</b> <b>-r4</b> shows <b>$stack[4]</b> to <b>$stack[1]</b> each time results are printed.

              Duplication: <b>=</b>
                     The pseudo-operator <b>=</b> causes the most recent element of the stack to be duplicated onto the
                     stack.

              <b>pop</b>    The pseudo-function <b>pop</b> causes the most recent element of the stack to be popped.  A `<b>&gt;</b>' on
                     its own has the same effect.

              <b>&gt;</b><u>ident</u> The  expression  <b>&gt;</b>  followed  (with  no space) by a shell identifier causes the most recent
                     element of the stack to be popped and  assigned  to  the  variable  with  that  name.   The
                     variable is local to the <b>zcalc</b> function.

              <b>&lt;</b><u>ident</u> The  expression  <b>&lt;</b>  followed  (with no space) by a shell identifier causes the value of the
                     variable with that name to be pushed onto the stack.  <u>ident</u> may be  an  integer,  in  which
                     case  the  previous  result  with  that number (as shown before the <b>&gt;</b> in the standard <b>zcalc</b>
                     prompt) is put on the stack.

              Exchange: <b>xy</b>
                     The pseudo-function <b>xy</b> causes the most recent two elements of the stack  to  be  exchanged.
                     `<b>&lt;&gt;</b>' has the same effect.

              The  prompt  is  configurable  via  the  parameter  <b>ZCALCPROMPT</b>,  which  undergoes standard prompt
              expansion.  The index of the current entry is stored locally in the first  element  of  the  array
              <b>psvar</b>, which can be referred to in <b>ZCALCPROMPT</b> as `<b>%1v</b>'.  The default prompt is `<b>%1v&gt;</b> '.

              The variable <b>ZCALC_ACTIVE</b> is set within the function and can be tested by nested functions; it has
              the value <b>rpn</b> if RPN mode is active, else 1.

              A   few  special  commands  are  available;  these  are  introduced  by  a  colon.   For  backward
              compatibility, the colon may be omitted for certain commands.  Completion is available if <b>compinit</b>
              has been run.

              The output precision may be  specified  within  zcalc  by  special  commands  familiar  from  many
              calculators.
              <b>:norm</b>  The  default output format.  It corresponds to the printf <b>%g</b> specification.  Typically this
                     shows six decimal digits.

              <b>:sci</b> <u>digits</u>
                     Scientific notation, corresponding to the printf <b>%g</b> output format with the precision  given
                     by <u>digits</u>.  This produces either fixed point or exponential notation depending on the value
                     output.

              <b>:fix</b> <u>digits</u>
                     Fixed point notation, corresponding to the printf <b>%f</b> output format with the precision given
                     by <u>digits</u>.

              <b>:eng</b> <u>digits</u>
                     Exponential notation, corresponding to the printf <b>%E</b> output format with the precision given
                     by <u>digits</u>.

              <b>:raw</b>   Raw  output:  this is the default form of the output from a math evaluation.  This may show
                     more precision than the number actually possesses.

              Other special commands:
              <b>:!</b><u>line...</u>
                     Execute <u>line...</u> as a normal shell command line.  Note that it is executed in the context of
                     the function, i.e. with local variables.  Space is optional after <b>:!</b>.

              <b>:local</b> <u>arg</u> ...
                     Declare variables local to the function.  Other variables may be used, too, but  they  will
                     be taken from or put into the global scope.

              <b>:function</b> <u>name</u> [ <u>body</u> ]
                     Define  a  mathematical function or (with no <u>body</u>) delete it.  <b>:function</b> may be abbreviated
                     to <b>:func</b> or simply <b>:f</b>.  The <u>name</u> may contain the same characters as a shell function  name.
                     The function is defined using <b>zmathfuncdef</b>, see below.

                     Note that <b>zcalc</b> takes care of all quoting.  Hence for example:

                            <b>:f</b> <b>cube</b> <b>$1</b> <b>*</b> <b>$1</b> <b>*</b> <b>$1</b>

                     defines  a  function  to  cube  the  sole  argument.   Functions  so defined, or indeed any
                     functions defined directly or indirectly using <b>functions</b> <b>-M</b>, are available  to  execute  by
                     typing only the name on the line in RPN mode; this pops the appropriate number of arguments
                     off the stack to pass to the function, i.e. 1 in the case of the example <b>cube</b> function.  If
                     there are optional arguments only the mandatory arguments are supplied by this means.

              <b>[#</b><u>base</u><b>]</b>
                     This  is not a special command, rather part of normal arithmetic syntax; however, when this
                     form appears on a line by itself the default  output  radix  is  set  to  <u>base</u>.   Use,  for
                     example,  `<b>[#16]</b>'  to  display hexadecimal output preceded by an indication of the base, or
                     `<b>[##16]</b>' just to display the raw number in the given base.   Bases  themselves  are  always
                     specified in decimal. `<b>[#]</b>' restores the normal output format.  Note that setting an output
                     base suppresses floating point output; use `<b>[#]</b>' to return to normal operation.

              <b>$</b><u>var</u>   Print out the value of var literally; does not affect the calculation.  To use the value of
                     var, omit the leading `<b>$</b>'.

              See the comments in the function for a few extra tips.

       <b>min(</b><u>arg</u><b>,</b> <b>...)</b>
       <b>max(</b><u>arg</u><b>,</b> <b>...)</b>
       <b>sum(</b><u>arg</u><b>,</b> <b>...)</b>
       <b>zmathfunc</b>
              The  function <b>zmathfunc</b> defines the three mathematical functions <b>min</b>, <b>max</b>, and <b>sum</b>.  The functions
              <b>min</b> and <b>max</b> take one or more arguments.  The function <b>sum</b> takes zero or more arguments.  Arguments
              can be of different types (ints and floats).

              Not to be confused with the <b>zsh/mathfunc</b>  module,  described  in  the  section  `The  zsh/mathfunc
              Module' in <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1).

       <b>zmathfuncdef</b> [ <u>mathfunc</u> [ <u>body</u> ] ]
              A convenient front end to <b>functions</b> <b>-M</b>.

              With two arguments, define a mathematical function named <u>mathfunc</u> which can be used in any form of
              arithmetic  evaluation.   <u>body</u>  is  a  mathematical  expression to implement the function.  It may
              contain references to position parameters <b>$1</b>, <b>$2</b>,  ...   to  refer  to  mandatory  parameters  and
              <b>${1:-</b><u>defvalue</u><b>}</b> ...  to refer to optional parameters.  Note that the forms must be strictly adhered
              to for the function to calculate the correct number of arguments.  The implementation is held in a
              shell  function named <b>zsh_math_func_</b><u>mathfunc</u>; usually the user will not need to refer to the shell
              function directly.  Any existing function of the same name is silently replaced.

              With one argument, remove the mathematical  function  <u>mathfunc</u>  as  well  as  the  shell  function
              implementation.

              With  no  arguments,  list all <u>mathfunc</u> functions in a form suitable for restoring the definition.
              The functions have not necessarily been defined by <b>zmathfuncdef</b>.

</pre><h4><b>USER</b> <b>CONFIGURATION</b> <b>FUNCTIONS</b></h4><pre>
       The <b>zsh/newuser</b> module comes with a function to aid in configuring shell options for new users.   If  the
       module is installed, this function can also be run by hand.  It is available even if the module's default
       behaviour, namely running the function for a new user logging in without startup files, is inhibited.

       <b>zsh-newuser-install</b> [ <b>-f</b> ]
              The  function presents the user with various options for customizing their initialization scripts.
              Currently only <b><a href="file:~/.zshrc">~/.zshrc</a></b> is handled.  <b>$ZDOTDIR/.zshrc</b> is used instead if the parameter  <b>ZDOTDIR</b>  is
              set; this provides a way for the user to configure a file without altering an existing <b>.zshrc</b>.

              By default the function exits immediately if it finds any of the files <b>.zshenv</b>, <b>.zprofile</b>, <b>.zshrc</b>,
              or <b>.zlogin</b> in the appropriate directory.  The option <b>-f</b> is required in order to force the function
              to continue.  Note this may happen even if <b>.zshrc</b> itself does not exist.

              As  currently configured, the function will exit immediately if the user has root privileges; this
              behaviour cannot be overridden.

              Once activated, the function's behaviour is supposed to be self-explanatory.   Menus  are  present
              allowing  the user to alter the value of options and parameters.  Suggestions for improvements are
              always welcome.

              When the script exits, the user is given the opportunity to save the new file or not; changes  are
              not irreversible until this point.  However, the script is careful to restrict changes to the file
              only  to  a  group  marked  by the lines `<b>#</b> <b>Lines</b> <b>configured</b> <b>by</b> <b>zsh-newuser-install</b>' and `<b>#</b> <b>End</b> <b>of</b>
              <b>lines</b> <b>configured</b> <b>by</b> <b>zsh-newuser-install</b>'.  In addition, the old version of <b>.zshrc</b> is  saved  to  a
              file with the suffix <b>.zni</b> appended.

              If  the  function  edits  an existing <b>.zshrc</b>, it is up to the user to ensure that the changes made
              will take effect.  For example, if control usually returns early  from  the  existing  <b>.zshrc</b>  the
              lines will not be executed; or a later initialization file may override options or parameters, and
              so on.  The function itself does not attempt to detect any such conflicts.

</pre><h4><b>OTHER</b> <b>FUNCTIONS</b></h4><pre>
       There  are  a  large number of helpful functions in the <b>Functions/Misc</b> directory of the zsh distribution.
       Most are very simple and do not require documentation here, but a few are worthy of special mention.

   <b>Descriptions</b>
       <b>colors</b> This function initializes several associative arrays to map color names to  (and  from)  the  ANSI
              standard  eight-color terminal codes.  These are used by the prompt theme system (see above).  You
              seldom should need to run <b>colors</b> more than once.

              The eight base colors are: <b>black</b>, <b>red</b>, <b>green</b>, <b>yellow</b>, <b>blue</b>, <b>magenta</b>, <b>cyan</b>,  and  <b>white</b>.   Each  of
              these  has codes for foreground and background.  In addition there are seven intensity attributes:
              <b>bold</b>, <b>faint</b>, <b>standout</b>, <b>underline</b>, <b>blink</b>, <b>reverse</b>, and <b>conceal</b>.  Finally,  there  are  seven  codes
              used  to  negate attributes: <b>none</b> (reset all attributes to the defaults), <b>normal</b> (neither bold nor
              faint), <b>no-standout</b>, <b>no-underline</b>, <b>no-blink</b>, <b>no-reverse</b>, and <b>no-conceal</b>.

              Some terminals do not support all combinations of colors and intensities.

              The associative arrays are:

              <b>color</b>
              <b>colour</b> Map all the color names to their integer codes, and integer codes to the color names.   The
                     eight  base  names map to the foreground color codes, as do names prefixed with `<b>fg-</b>', such
                     as `<b>fg-red</b>'.  Names prefixed with `<b>bg-</b>', such as `<b>bg-blue</b>', refer to the background  codes.
                     The  reverse  mapping  from code to color yields base name for foreground codes and the <b>bg-</b>
                     form for backgrounds.

                     Although it is a misnomer to call them `colors', these arrays also map the  other  fourteen
                     attributes from names to codes and codes to names.

              <b>fg</b>
              <b>fg_bold</b>
              <b>fg_no_bold</b>
                     Map  the  eight  basic  color  names  to  ANSI  terminal  escape  sequences  that  set  the
                     corresponding foreground text properties.   The  <b>fg</b>  sequences  change  the  color  without
                     changing the eight intensity attributes.

              <b>bg</b>
              <b>bg_bold</b>
              <b>bg_no_bold</b>
                     Map  the  eight  basic  color  names  to  ANSI  terminal  escape  sequences  that  set  the
                     corresponding background properties.  The <b>bg</b> sequences change the  color  without  changing
                     the eight intensity attributes.

              In addition, the scalar parameters <b>reset_color</b> and <b>bold_color</b> are set to the ANSI terminal escapes
              that turn off all attributes and turn on bold intensity, respectively.

       <b>fned</b> [ <b>-x</b> <u>num</u> ] <u>name</u>
              Same  as  <b>zed</b>  <b>-f</b>.   This  function does not appear in the zsh distribution, but can be created by
              linking <b>zed</b> to the name <b>fned</b> in some directory in your <b>fpath</b>.

       <b>histed</b> [ [ <u>name</u> ] <u>size</u> ]
              Same as <b>zed</b> <b>-h</b>.  This function does not appear in the zsh distribution,  but  can  be  created  by
              linking <b>zed</b> to the name <b>histed</b> in some directory in your <b>fpath</b>.

       <b>is-at-least</b> <u>needed</u> [ <u>present</u> ]
              Perform  a  greater-than-or-equal-to  comparison of two strings having the format of a zsh version
              number; that is, a string of numbers and text with segments separated by dots or dashes.   If  the
              <u>present</u>  string  is  not provided, <b>$ZSH_VERSION</b> is used.  Segments are paired left-to-right in the
              two strings with leading non-number parts ignored.  If one string  has  fewer  segments  than  the
              other, the missing segments are considered zero.

              This  is  useful  in  startup  files  to set options and other state that are not available in all
              versions of zsh.

                     <b>is-at-least</b> <b>3.1.6-15</b> <b>&amp;&amp;</b> <b>setopt</b> <b>NO_GLOBAL_RCS</b>
                     <b>is-at-least</b> <b>3.1.0</b> <b>&amp;&amp;</b> <b>setopt</b> <b>HIST_REDUCE_BLANKS</b>
                     <b>is-at-least</b> <b>2.6-17</b> <b>||</b> <b>print</b> <b>"You</b> <b>can't</b> <b>use</b> <b>is-at-least</b> <b>here."</b>

       <b>nslookup</b> [ <u>arg</u> ... ]
              This wrapper function for the <b>nslookup</b> command requires the <b>zsh/zpty</b> module  (see  <u><a href="../man1/zshmodules.1.html">zshmodules</a></u>(1)).
              It  behaves  exactly  like  the  standard  <b>nslookup</b>  except  that it provides customizable prompts
              (including a right-side prompt) and completion of nslookup commands, host names, etc. (if you  use
              the  function-based  completion  system).   Completion  styles  may be set with the context prefix
              `<b>:completion:nslookup</b>'.

              See also the <b>pager</b>, <b>prompt</b> and <b>rprompt</b> styles below.

       <b>regexp-replace</b> <u>var</u> <u>regexp</u> <u>replace</u>
              Use regular expressions to perform a global search and replace operation  on  a  variable.   POSIX
              extended  regular  expressions  (ERE)  are  used, unless the option <b>RE_MATCH_PCRE</b> has been set, in
              which case Perl-compatible regular expressions are used (this requires  the  shell  to  be  linked
              against the <b>pcre</b> library).

              <u>var</u>  is  the  name  of  the  variable  containing  the string to be matched.  The variable will be
              modified directly by the function.  The variables <b>MATCH</b>, <b>MBEGIN</b>, <b>MEND</b>, <b>match</b>, <b>mbegin</b>, <b>mend</b>  should
              be avoided as these are used by the regular expression code.

              <u>regexp</u> is the regular expression to match against the string.

              <u>replace</u>  is  the replacement text.  This can contain parameter, command and arithmetic expressions
              which will be replaced:  in particular, a reference to <b>$MATCH</b> will be replaced by the text matched
              by the pattern.

              The return status is 0 if at least one match was performed, else 1.

              Note that if using POSIX EREs, the <b>^</b> or word boundary operators (where  available)  may  not  work
              properly.

       <b>run-help</b> <u>cmd</u>
              This function is designed to be invoked by the <b>run-help</b> ZLE widget, in place of the default alias.
              See `Accessing On-Line Help' above for setup instructions.

              In  the  discussion  which  follows,  if  <u>cmd</u>  is  a  file system path, it is first reduced to its
              rightmost component (the file name).

              Help is first sought by looking for a file named  <u>cmd</u>  in  the  directory  named  by  the  <b>HELPDIR</b>
              parameter.   If  no  file is found, an assistant function, alias, or command named <b>run-help-</b><u>cmd</u> <u>is</u>
              <u>sought.</u>  <u>If</u> <u>found,</u> <u>the</u> <u>assistant</u> <u>is</u> <u>executed</u> <u>with</u> <u>the</u> <u>rest</u> <u>of</u> <u>the</u> <u>current</u> <u>command</u> <u>line</u> <u>(everything</u>
              <u>after</u> <u>the</u> <u>command</u> <u>name</u> <u>cmd)</u> <u>as</u> <u>its</u> <u>arguments.</u>  <u>When</u> <u>neither</u>  <u>file</u>  <u>nor</u>  <u>assistant</u>  <u>is</u>  <u>found,</u>  <u>the</u>
              <u>external</u> <u>command</u> <u>`</u><b>man</b> <u>cmd'</u> <u>is</u> <u>run.</u>

              An example assistant for the "ssh" command:

                     <b>run-help-ssh()</b> <b>{</b>
                         <b>emulate</b> <b>-LR</b> <b>zsh</b>
                         <b>local</b> <b>-a</b> <b>args</b>
                         <b>#</b> <b>Delete</b> <b>the</b> <b>"-l</b> <b>username"</b> <b>option</b>
                         <b>zparseopts</b> <b>-D</b> <b>-E</b> <b>-a</b> <b>args</b> <b>l:</b>
                         <b>#</b> <b>Delete</b> <b>other</b> <b>options,</b> <b>leaving:</b> <b>host</b> <b>command</b>
                         <b>args=(${@:#-*})</b>
                         <b>if</b> <b>[[</b> <b>${#args}</b> <b>-lt</b> <b>2</b> <b>]];</b> <b>then</b>
                             <b>man</b> <b>ssh</b>
                         <b>else</b>
                             <b>run-help</b> <b>$args[2]</b>
                         <b>fi</b>
                     <b>}</b>

              Several  of  these  assistants  are  provided  in  the  <b>Functions/Misc</b>  directory.   These must be
              autoloaded, or placed as executable scripts in your search path, in order to be found and used  by
              <b>run-help</b>.

              <b>run-help-btrfs</b>
              <b>run-help-git</b>
              <b>run-help-ip</b>
              <b>run-help-openssl</b>
              <b>run-help-p4</b>
              <b>run-help-sudo</b>
              <b>run-help-svk</b>
              <b>run-help-svn</b>
                     Assistant functions for the <b>btrfs</b>, <b>git</b>, <b>ip</b>, <b>openssl</b>, <b>p4</b>, <b>sudo</b>, <b>svk</b>, and <b>svn</b>, commands.

       <b>tetris</b> Zsh  was  once  accused  of not being as complete as Emacs, because it lacked a Tetris game.  This
              function was written to refute this vicious slander.

              This function must be used as a ZLE widget:

                     <b>autoload</b> <b>-U</b> <b>tetris</b>
                     <b>zle</b> <b>-N</b> <b>tetris</b>
                     <b>bindkey</b> <u>keys</u> <b>tetris</b>

              To start a game, execute the widget by typing the <u>keys</u>.  Whatever command line  you  were  editing
              disappears  temporarily,  and your keymap is also temporarily replaced by the Tetris control keys.
              The previous editor state is restored when you quit the game (by pressing `<b>q</b>') or when you lose.

              If you quit in the middle of a game, the next invocation of the <b>tetris</b> widget will continue  where
              you left off.  If you lost, it will start a new game.

       <b>tetriscurses</b>
              This  is  a  port  of the above to zcurses.  The input handling is improved a bit so that moving a
              block sideways doesn't automatically advance a  timestep,  and  the  graphics  use  unicode  block
              graphics.

              This version does not save the game state between invocations, and is not invoked as a widget, but
              rather as:

                     <b>autoload</b> <b>-U</b> <b>tetriscurses</b>
                     <b>tetriscurses</b>

       <b>zargs</b> [ <u>option</u> ... <b>--</b> ] [ <u>input</u> ... ] [ <b>--</b> <u>command</u> [ <u>arg</u> ... ] ]
              This  function has a similar purpose to GNU xargs.  Instead of reading lines of arguments from the
              standard input, it takes them from the command line.  This is useful because zsh, especially  with
              recursive  glob  operators, often can construct a command line for a shell function that is longer
              than can be accepted by an external command.

              The <u>option</u> list represents options of the <b>zargs</b> command itself, which are the  same  as  those  of
              <b>xargs</b>.   The  <u>input</u> list is the collection of strings (often file names) that become the arguments
              of the <b>command</b>, analogous to the standard input of <b>xargs</b>.  Finally, the <u>arg</u> list consists of those
              arguments (usually options) that are passed to the <u>command</u>  each  time  it  runs.   The  <u>arg</u>  list
              precedes  the  elements  from  the <b>input</b> list in each run.  If no <u>command</u> is provided, then no <u>arg</u>
              list may be provided, and in that event the default command is `<b>print</b>' with arguments `<b>-r</b> <b>--</b>'.

              For example, to get a long <b>ls</b> listing of all non-hidden plain files in the  current  directory  or
              its subdirectories:

                     <b>autoload</b> <b>-U</b> <b>zargs</b>
                     <b>zargs</b> <b>--</b> <b>**/*(.)</b> <b>--</b> <b>ls</b> <b>-ld</b> <b>--</b>

              The  first  and  third  occurrences  of  `<b>--</b>' are used to mark the end of options for <b>zargs</b> and <b>ls</b>
              respectively to guard against filenames starting with `<b>-</b>', while the second is  used  to  separate
              the list of files from the command to run (`<b>ls</b> <b>-ld</b> <b>--</b>').

              The first `<b>--</b>' would also be needed if there was a chance the list might be empty as in:

                     <b>zargs</b> <b>-r</b> <b>--</b> <b>./*.back(#qN)</b> <b>--</b> <b>rm</b> <b>-f</b>

              In  the  event that the string `<b>--</b>' is or may be an <u>input</u>, the <b>-e</b> option may be used to change the
              end-of-inputs marker.  Note that this does <u>not</u> change the end-of-options marker.  For example,  to
              use `<b>..</b>' as the marker:

                     <b>zargs</b> <b>-e..</b> <b>--</b> <b>**/*(.)</b> <b>..</b> <b>ls</b> <b>-ld</b> <b>--</b>

              This  is  a  good  choice  in  that  example because no plain file can be named `<b>..</b>', but the best
              end-marker depends on the circumstances.

              The options <b>-i</b>, <b>-I</b>, <b>-l</b>, <b>-L</b>, and <b>-n</b> differ slightly from their usage in <b>xargs</b>.  There are no  input
              lines  for  <b>zargs</b> to count, so <b>-l</b> and <b>-L</b> count through the <u>input</u> list, and <b>-n</b> counts the number of
              arguments passed to each execution of <u>command</u>, <u>including</u> any <u>arg</u> list.  Also, any time <b>-i</b> or <b>-I</b> is
              used, each <u>input</u> is processed separately as if by `<b>-L</b> <b>1</b>'.

              For details of the other <b>zargs</b> options, see the <u><a href="../man1/xargs.1.html">xargs</a></u>(1) man page  (but  note  the  difference  in
              function between <b>zargs</b> and <b>xargs</b>) or run <b>zargs</b> with the <b>--help</b> option.

       <b>zed</b> [ <b>-f</b> [ <b>-x</b> <u>num</u> ] ] <u>name</u>
       <b>zed</b> [ <b>-h</b> [ <u>name</u> ] <u>size</u> ]
       <b>zed</b> <b>-b</b> This function uses the ZLE editor to edit a file or function.

              Only  one  <u>name</u> argument is allowed.  If the <b>-f</b> option is given, the name is taken to be that of a
              function; if the function is marked for autoloading, <b>zed</b> searches for it in the  <b>fpath</b>  and  loads
              it.   Note  that  functions  edited this way are installed into the current shell, but <u>not</u> written
              back to the autoload file.  In this case the <b>-x</b> option specifies that leading tabs  indenting  the
              function  according  to  syntax  should  be  converted  into the given number of spaces; `<b>-x</b> <b>2</b>' is
              consistent with the layout of functions distributed with the shell.

              Without <b>-f</b>, <u>name</u> is the path name of the file to edit, which need not  exist;  it  is  created  on
              write, if necessary.  With <b>-h</b>, the file is presumed to contain history events.

              When no file name is provided for <b>-h</b> the current shell history is edited in place.  The history is
              renumbered when zed exits successfully.

              When  editing  history,  multi-line events must have a trailing backslash on every line before the
              last.

              While editing, the function sets the main keymap to <b>zed</b> and the vi command  keymap  to  <b>zed-vicmd</b>.
              These  will be copied from the existing <b>main</b> and <b>vicmd</b> keymaps if they do not exist the first time
              <b>zed</b> is run.  They can be used to provide special key bindings used only in zed.

              If it creates the keymap, <b>zed</b> rebinds the return key to insert a line break and `<b>^X^W</b>'  to  accept
              the edit in the <b>zed</b> keymap, and binds `<b>ZZ</b>' to accept the edit in the <b>zed-vicmd</b> keymap.

              The  bindings  alone  can  be  installed by running `<b>zed</b> <b>-b</b>'.  This is suitable for putting into a
              startup file.  Note that, if rerun, this will overwrite the existing <b>zed</b> and <b>zed-vicmd</b> keymaps.

              Completion is available, and styles may be set with the context prefix `<b>:completion:zed:</b>'.

              A zle widget <b>zed-set-file-name</b> is available.  This can be called by name  from  within  zed  using
              `<b>\ex</b>  <b>zed-set-file-name</b>'  or can be bound to a key in either of the <b>zed</b> or <b>zed-vicmd</b> keymaps after
              `<b>zed</b> <b>-b</b>' has been run.  When the widget is called, it prompts for a new name for  the  file  being
              edited.   When  zed  exits  the file will be written under that name and the original file will be
              left alone.  The widget has no effect when invoked from  `<b>zed</b>  <b>-f</b>'.   The  completion  context  is
              changed  to `<b>:completion:zed-set-file-name:</b>'.  When editing the current history with `<b>zed</b> <b>-h</b>', the
              history is first updated and then the file is written, but the global setting of <b>HISTFILE</b>  is  not
              altered.

              While  <b>zed-set-file-name</b>  is  running, zed uses the keymap <b>zed-normal-keymap</b>, which is linked from
              the main keymap in effect at the time zed initialised its bindings.  (This is to make  the  return
              key  operate  normally.)  The result is that if the main keymap has been changed, the widget won't
              notice.  This is not a concern for most users.

       <b>zcp</b> [ <b>-finqQvwW</b> ] <u>srcpat</u> <u>dest</u>
       <b>zln</b> [ <b>-finqQsvwW</b> ] <u>srcpat</u> <u>dest</u>
              Same as <b>zmv</b> <b>-C</b> and <b>zmv</b> <b>-L</b>, respectively.  These functions do not appear in the  zsh  distribution,
              but can be created by linking <b>zmv</b> to the names <b>zcp</b> and <b>zln</b> in some directory in your <b>fpath</b>.

       <b>zkbd</b>   See `Keyboard Definition' above.

       <b>zmv</b> [ <b>-finqQsvwW</b> ] [ <b>-C</b> | <b>-L</b> | <b>-M</b> | -{<b>p</b>|<b>P</b>} <u>program</u> ] [ <b>-o</b> <u>optstring</u> ]
           <u>srcpat</u> <u>dest</u>
              Move  (usually,  rename)  files matching the pattern <u>srcpat</u> to corresponding files having names of
              the form given by <u>dest</u>, where <u>srcpat</u> contains  parentheses  surrounding  patterns  which  will  be
              replaced in turn by <b>$1</b>, <b>$2</b>, ... in <u>dest</u>.  For example,

                     <b>zmv</b> <b>'(*).lis'</b> <b>'$1.txt'</b>

              renames `<b>foo.lis</b>' to `<b>foo.txt</b>', `<b>my.old.stuff.lis</b>' to `<b>my.old.stuff.txt</b>', and so on.

              The  pattern is always treated as an <b>EXTENDED_GLOB</b> pattern.  Any file whose name is not changed by
              the substitution is simply ignored.  Any error (a substitution resulted in an  empty  string,  two
              substitutions  gave  the  same result, the destination was an existing regular file and <b>-f</b> was not
              given) causes the entire function to abort without doing anything.

              In addition to pattern replacement, the variable <b>$f</b> can be referred to in the second (replacement)
              argument.  This makes it possible to use variable substitution to alter the argument; see examples
              below.

              Options:

              <b>-f</b>     Force overwriting of destination files.  Not currently passed down to the <b>mv</b>/<b>cp</b>/<b>ln</b>  command
                     due to vagaries of implementations (but you can use <b>-o-f</b> to do that).
              <b>-i</b>     Interactive:  show each line to be executed and ask the user whether to execute it.  `<b>Y</b>' or
                     `<b>y</b>' will execute it, anything else will skip it.  Note that  you  just  need  to  type  one
                     character.
              <b>-n</b>     No execution: print what would happen, but don't do it.
              <b>-q</b>     Turn bare glob qualifiers off: now assumed by default, so this has no effect.
              <b>-Q</b>     Force  bare  glob  qualifiers  on.   Don't  turn this on unless you are actually using glob
                     qualifiers in a pattern.
              <b>-s</b>     Symbolic, passed down to <b>ln</b>; only works with <b>-L</b>.
              <b>-v</b>     Verbose: print each command as it's being executed.
              <b>-w</b>     Pick out wildcard parts of the pattern, as described above, and implicitly add  parentheses
                     for referring to them.
              <b>-W</b>     Just  like  <b>-w</b>,  with  the  addition  of  turning wildcards in the replacement pattern into
                     sequential <b>${1}</b> .. <b>${N}</b> references.
              <b>-C</b>
              <b>-L</b>
              <b>-M</b>     Force <b>cp</b>, <b>ln</b> or <b>mv</b>, respectively, regardless of the name of the function.
              <b>-p</b> <u>program</u>
                     Call <u>program</u> instead of <b>cp</b>, <b>ln</b> or <b>mv</b>.  Whatever it does, it should at least understand  the
                     form `<u>program</u> <b>--</b> <u>oldname</u> <u>newname</u>' where <u>oldname</u> and <u>newname</u> are filenames generated by <b>zmv</b>.
                     <u>program</u>  will be split into words, so might be e.g. the name of an archive tool plus a copy
                     or rename subcommand.
              <b>-P</b> <u>program</u>
                     As <b>-p</b> <u>program</u>, except that <u>program</u> does not accept a following <b>--</b> to indicate  the  end  of
                     options.   In  this  case  filenames  must  already  be  in  a sane form for the program in
                     question.
              <b>-o</b> <u>optstring</u>
                     The <u>optstring</u> is split into words and passed down verbatim to the  <b>cp</b>,  <b>ln</b>  or  <b>mv</b>  command
                     called to perform the work.  It should probably begin with a `<b>-</b>'.

              Further examples:

                     <b>zmv</b> <b>-v</b> <b>'(*</b> <b>*)'</b> <b>'${1//</b> <b>/_}'</b>

              For  any file in the current directory with at least one space in the name, replace every space by
              an underscore and display the commands executed.

                     <b>zmv</b> <b>-v</b> <b>'*</b> <b>*'</b> <b>'${f//</b> <b>/_}'</b>

              This does exactly the same by referring to the file name stored in <b>$f</b>.

              For more complete examples and other implementation details, see  the  <b>zmv</b>  source  file,  usually
              located  in  one  of  the  directories  named  in  your <b>fpath</b>, or in <b>Functions/Misc/zmv</b> in the zsh
              distribution.

       <b>zrecompile</b>
              See `Recompiling Functions' above.

       <b>zstyle+</b> <u>context</u> <u>style</u> <u>value</u> [ <b>+</b> <u>subcontext</u> <u>style</u> <u>value</u> ... ]
              This makes defining styles a bit simpler by using a single `<b>+</b>' as a special token that allows  you
              to append a context name to the previously used context name.  Like this:

                     <b>zstyle+</b> <b>':foo:bar'</b> <u>style1</u> <u>value1</u> <b>\</b>
                            <b>+':baz'</b>     <u>style2</u> <u>value2</u> <b>\</b>
                            <b>+':frob'</b>    <u>style3</u> <u>value3</u>

              This defines <u>style1</u> with <u>value1</u> for the context <b>:foo:bar</b> as usual, but it also defines <u>style2</u> with
              <u>value2</u>  for the context <b>:foo:bar:baz</b> and <u>style3</u> with <u>value3</u> for <b>:foo:bar:frob</b>.  Any <u>subcontext</u> may
              be the empty string to re-use the first context unchanged.

   <b>Styles</b>
       <b>insert-tab</b>
              The <b>zed</b> function <u>sets</u> this style in context `<b>:completion:zed:*</b>' to turn off completion when <b>TAB</b> is
              typed at the beginning of a line.  You may override this  by  setting  your  own  value  for  this
              context and style.

       <b>pager</b>  The <b>nslookup</b> function looks up this style in the context `<b>:nslookup</b>' to determine the program used
              to display output that does not fit on a single screen.

       <b>prompt</b>
       <b>rprompt</b>
              The  <b>nslookup</b>  function  looks  up this style in the context `<b>:nslookup</b>' to set the prompt and the
              right-side prompt, respectively.  The usual expansions for the <b>PS1</b> and <b>RPS1</b> parameters may be used
              (see EXPANSION OF PROMPT SEQUENCES in <u><a href="../man1/zshmisc.1.html">zshmisc</a></u>(1)).

zsh 5.9                                           May 14, 2022                                     <u><a href="../man1/ZSHCONTRIB.1.html">ZSHCONTRIB</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>