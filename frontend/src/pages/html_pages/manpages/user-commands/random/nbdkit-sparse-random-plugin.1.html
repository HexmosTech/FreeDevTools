<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbdkit-sparse-random-plugin - make sparse random disks</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nbdkit">nbdkit_1.42.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nbdkit-sparse-random-plugin - make sparse random disks

</pre><h4><b>SYNOPSIS</b></h4><pre>
        nbdkit sparse-random [size=]SIZE [seed=SEED]
                             [percent=N] [runlength=N]
                             [random-content=true]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "nbdkit-sparse-random-plugin" is a plugin for <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1) which makes disks containing sparse blocks of
       random data.  These disks have a similar shape to virtual machine disks, and this plugin can be used to
       benchmark disk copying tools like <b><a href="../man1/nbdcopy.1.html">nbdcopy</a></b>(1).  To get a non-sparse random disk, see
       <b><a href="../man1/nbdkit-random-plugin.1.html">nbdkit-random-plugin</a></b>(1).

       The size of the virtual disk must be specified using the "size" parameter.  If you specify the "seed"
       parameter then you will get the same random data over multiple runs with the same seed.

       The "percent" parameter controls the percentage of the disk which contains random data versus sparse
       empty space.

       The plugin does not generate random data spread evenly over the disk.  Instead to make it look more like
       a real virtual machine disk, it tries to create runs of data and runs of empty space.  The "runlength"
       parameter controls the average length of each run of random data.

       The data in each block normally consists of the same random non-zero byte repeated over the whole block.
       If you want fully random content within each block use "random-content=true".  This is not the default
       because earlier testing of this plugin showed that a great deal of time was spent generating random
       content.  The random content is generated using a method which is <u>not</u> cryptographically secure.

   <b>Writes</b> <b>and</b> <b>testing</b> <b>copying</b>
       Writes to the disk verify that the data written is the same as the data read (if not, returning EIO).
       Thus when testing copies you can use a single instance of this plugin for both read and write:

        nbdkit sparse-random size=1T --run 'nbdcopy "$uri" "$uri"'

       "qemu-img convert" could be used in place of nbdcopy.  See also <b><a href="../man1/nbdkit-checkwrite-filter.1.html">nbdkit-checkwrite-filter</a></b>(1).

</pre><h4><b>PARAMETERS</b></h4><pre>
       <b>percent=</b>N
           Specify  the approximate percentage of the disk which contains random data versus sparse empty space.
           The default is 10 (10%).  "percent=0" will create a completely  empty  disk  and  "percent=100"  will
           create a completely full disk.

       <b>random-content=true</b>
           By  default a single random non-zero byte is repeated over the whole block, which is fast to generate
           and check.  If you want blocks where each byte is random, use this setting.

       <b>runlength=</b>N
           Specify the average length of runs of random  data.   This  is  expressed  in  bytes  and  the  usual
           modifiers  can be used.  The default is 16M, meaning that (on average) data runs will be 16 megabytes
           in length.

       <b>seed=</b>SEED
           Specify the random seed to get repeatable data over multiple runs.

           If not specified then a random seed is chosen.

       [<b>size=</b>]SIZE
           Specify the virtual size of the disk image.

           This parameter is required.

           "size=" is a magic config key and may be omitted in most cases.  See "Magic parameters" in <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1).

</pre><h4><b>FILES</b></h4><pre>
       <u>$plugindir/nbdkit-sparse-random-plugin.so</u>
           The plugin.

           Use "nbdkit --dump-config" to find the location of $plugindir.

</pre><h4><b>VERSION</b></h4><pre>
       "nbdkit-sparse-random-plugin" first appeared in nbdkit 1.24.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1),   <b><a href="../man3/nbdkit-plugin.3.html">nbdkit-plugin</a></b>(3),   <b><a href="../man1/nbdkit-data-plugin.1.html">nbdkit-data-plugin</a></b>(1),   <b><a href="../man1/nbdkit-full-plugin.1.html">nbdkit-full-plugin</a></b>(1),   <b><a href="../man1/nbdkit-null-plugin.1.html">nbdkit-null-plugin</a></b>(1),
       <b><a href="../man1/nbdkit-ones-plugin.1.html">nbdkit-ones-plugin</a></b>(1),    <b><a href="../man1/nbdkit-pattern-plugin.1.html">nbdkit-pattern-plugin</a></b>(1),    <b><a href="../man1/nbdkit-random-plugin.1.html">nbdkit-random-plugin</a></b>(1),    <b><a href="../man1/nbdkit-zero-plugin.1.html">nbdkit-zero-plugin</a></b>(1),
       <b><a href="../man1/nbdcopy.1.html">nbdcopy</a></b>(1), <b><a href="../man1/qemu-img.1.html">qemu-img</a></b>(1).

</pre><h4><b>AUTHORS</b></h4><pre>
       Richard W.M. Jones

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Red Hat

</pre><h4><b>LICENSE</b></h4><pre>
       Redistribution and use in source and binary forms, with or without modification, are  permitted  provided
       that the following conditions are met:

       •   Redistributions  of  source  code must retain the above copyright notice, this list of conditions and
           the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
           the following disclaimer in the documentation and/or other materials provided with the distribution.

       •   Neither the name of Red Hat nor the names of its contributors may  be  used  to  endorse  or  promote
           products derived from this software without specific prior written permission.

       THIS  SOFTWARE  IS  PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES,
       INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND  FITNESS  FOR  A  PARTICULAR
       PURPOSE  ARE  DISCLAIMED.  IN  NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
       INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,  PROCUREMENT  OF
       SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
       ON  ANY  THEORY  OF  LIABILITY,  WHETHER  IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
       OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGE.

nbdkit-1.42.2                                      2025-04-02                     <u><a href="../man1/nbdkit-sparse-random-plugin.1.html">nbdkit-sparse-random-plugin</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>