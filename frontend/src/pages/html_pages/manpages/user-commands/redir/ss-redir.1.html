<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ss-redir - shadowsocks client as transparent proxy, libev port</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/shadowsocks-libev">shadowsocks-libev_3.3.5+ds-16_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ss-redir - shadowsocks client as transparent proxy, libev port

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>ss-redir</b> [-uUv6] [-h|--help] [-s <u>&lt;server_host&gt;</u>] [-p <u>&lt;server_port&gt;</u>] [-l <u>&lt;local_port&gt;</u>] [-k <u>&lt;password&gt;</u>] [-m
       <u>&lt;encrypt_method&gt;</u>] [-f <u>&lt;pid_file&gt;</u>] [-t <u>&lt;timeout&gt;</u>] [-c <u>&lt;config_file&gt;</u>] [-b <u>&lt;local_address&gt;</u>] [-a <u>&lt;user_name&gt;</u>]
       [-n <u>&lt;nofile&gt;</u>] [--mtu <u>&lt;MTU&gt;</u>] [--no-delay] [--plugin <u>&lt;plugin_name&gt;</u>] [--plugin-opts <u>&lt;plugin_options&gt;</u>]
       [--password <u>&lt;password&gt;</u>] [--key <u>&lt;key_in_base64&gt;</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Shadowsocks-libev</b> is a lightweight and secure socks5 proxy. It is a port of the original shadowsocks
       created by clowwindy. <b>Shadowsocks-libev</b> is written in pure C and takes advantage of libev to achieve both
       high performance and low resource consumption.

       <b>Shadowsocks-libev</b> consists of five components. <b><a href="../man1/ss-redir.1.html">ss-redir</a></b>(1) works as a transparent proxy on local machines
       to proxy TCP traffic and requires netfilter’s NAT module. For more information, check out
       <b><a href="../man8/shadowsocks-libev.8.html">shadowsocks-libev</a></b>(8) and the following <u>EXAMPLE</u> section.

</pre><h4><b>OPTIONS</b></h4><pre>
       -s <u>&lt;server_host&gt;</u>
           Set the server’s hostname or IP.

       -p <u>&lt;server_port&gt;</u>
           Set the server’s port number.

       -l <u>&lt;local_port&gt;</u>
           Set the local port number.

       -k <u>&lt;password&gt;</u>, --password <u>&lt;password&gt;</u>
           Set the password. The server and the client should use the same password.

       --key <u>&lt;key_in_base64&gt;</u>
           Set the key directly. The key should be encoded with URL-safe Base64.

       -m <u>&lt;encrypt_method&gt;</u>
           Set the cipher.

           <b>Shadowsocks-libev</b> accepts 19 different ciphers:

           aes-128-gcm, aes-192-gcm, aes-256-gcm, rc4-md5, aes-128-cfb, aes-192-cfb, aes-256-cfb, aes-128-ctr,
           aes-192-ctr, aes-256-ctr, bf-cfb, camellia-128-cfb, camellia-192-cfb, camellia-256-cfb,
           chacha20-ietf-poly1305, xchacha20-ietf-poly1305, salsa20, chacha20 and chacha20-ietf.

           The default cipher is <u>chacha20-ietf-poly1305</u>.

           If built with PolarSSL or custom OpenSSL libraries, some of these ciphers may not work.

       -a <u>&lt;user_name&gt;</u>
           Run as a specific user.

       -f <u>&lt;pid_file&gt;</u>
           Start shadowsocks as a daemon with specific pid file.

       -t <u>&lt;timeout&gt;</u>
           Set the socket timeout in seconds. The default value is 60.

       -c <u>&lt;config_file&gt;</u>
           Use a configuration file.

           Refer to <b><a href="../man8/shadowsocks-libev.8.html">shadowsocks-libev</a></b>(8) <u>CONFIG</u> <u>FILE</u> section for more details.

       -n <u>&lt;number&gt;</u>
           Specify max number of open files.

           Only available on Linux.

       -b <u>&lt;local_address&gt;</u>
           Specify the local address to use while this client is making outbound connections to the server.

       -u
           Enable UDP relay.

           TPROXY is required in redir mode. You may need root permission.

       -U
           Enable UDP relay and disable TCP relay.

       -T
           Use tproxy instead of redirect. (for tcp)

       -6
           Resovle hostname to IPv6 address first.

       --mtu <u>&lt;MTU&gt;</u>
           Specify the MTU of your network interface.

       --mptcp
           Enable Multipath TCP.

           Only available with MPTCP enabled Linux kernel.

       --reuse-port
           Enable port reuse.

           Only available with Linux kernel &gt; 3.9.0.

       --no-delay
           Enable TCP_NODELAY.

       --plugin <u>&lt;plugin_name&gt;</u>
           Enable SIP003 plugin. (Experimental)

       --plugin-opts <u>&lt;plugin_options&gt;</u>
           Set SIP003 plugin options. (Experimental)

       -v
           Enable verbose mode.

       -h|--help
           Print help message.

</pre><h4><b>EXAMPLE</b></h4><pre>
       ss-redir requires netfilter’s NAT function. Here is an example:

           # Create new chain
           iptables -t nat -N SHADOWSOCKS
           iptables -t mangle -N SHADOWSOCKS

           # Ignore your shadowsocks server's addresses
           # It's very IMPORTANT, just be careful.
           iptables -t nat -A SHADOWSOCKS -d 123.123.123.123 -j RETURN

           # Ignore LANs and any other addresses you'd like to bypass the proxy
           # See Wikipedia and RFC5735 for full list of reserved networks.
           # See ashi009/bestroutetb for a highly optimized CHN route list.
           iptables -t nat -A SHADOWSOCKS -d 0.0.0.0/8 -j RETURN
           iptables -t nat -A SHADOWSOCKS -d 10.0.0.0/8 -j RETURN
           iptables -t nat -A SHADOWSOCKS -d 127.0.0.0/8 -j RETURN
           iptables -t nat -A SHADOWSOCKS -d 169.254.0.0/16 -j RETURN
           iptables -t nat -A SHADOWSOCKS -d 172.16.0.0/12 -j RETURN
           iptables -t nat -A SHADOWSOCKS -d 192.168.0.0/16 -j RETURN
           iptables -t nat -A SHADOWSOCKS -d 224.0.0.0/4 -j RETURN
           iptables -t nat -A SHADOWSOCKS -d 240.0.0.0/4 -j RETURN

           # Anything else should be redirected to shadowsocks's local port
           iptables -t nat -A SHADOWSOCKS -p tcp -j REDIRECT --to-ports 12345

           # Add any UDP rules
           ip route add local default dev lo table 100
           ip rule add fwmark 1 lookup 100
           iptables -t mangle -A SHADOWSOCKS -p udp --dport 53 -j TPROXY --on-port 12345 --tproxy-mark 0x01/0x01

           # Apply the rules
           iptables -t nat -A PREROUTING -p tcp -j SHADOWSOCKS
           iptables -t mangle -A PREROUTING -j SHADOWSOCKS

           # Start the shadowsocks-redir
           ss-redir -u -c /etc/config/shadowsocks.json -f /var/run/shadowsocks.pid

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/ss-local.1.html">ss-local</a></b>(1), <b><a href="../man1/ss-server.1.html">ss-server</a></b>(1), <b><a href="../man1/ss-tunnel.1.html">ss-tunnel</a></b>(1), <b><a href="../man1/ss-manager.1.html">ss-manager</a></b>(1), <b><a href="../man8/shadowsocks-libev.8.html">shadowsocks-libev</a></b>(8), <b><a href="../man8/iptables.8.html">iptables</a></b>(8),
       /etc/shadowsocks-libev/config.json

Shadowsocks-libev 3.3.5                            03/03/2025                                        <u><a href="../man1/SS-REDIR.1.html">SS-REDIR</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>