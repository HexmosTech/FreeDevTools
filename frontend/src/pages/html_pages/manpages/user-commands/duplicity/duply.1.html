<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>duply - a shell frontend to duplicity for simplified backups</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/duply">duply_2.5.2-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       duply - a shell frontend to duplicity for simplified backups

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>duply</b> <u>profile</u> <b>create</b>

       <b>duply</b> <u>profile</u> <u>command</u> <u>[options</u> <u>...]</u>

       <b>duply</b> <u>profile</u> <u>command[_command_...]</u> <u>[options</u> <u>...]</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Duply</b> deals as a wrapper for the mighty duplicity magic.  It simplifies running duplicity with cron or on
       command line by:

         - keeping recurring settings in profiles per backup job
         - enabling batch operations eg. backup_verify+purge
         - executing pre/post scripts (different actions possible
           depending on previous or next command or it's exit status)
         - precondition checking for flawless duplicity operation

       For each backup job one configuration profile must be created.  The profile folder will be stored under
       <u><a href="file:~/.duply/">~/.duply/</a>«profile»</u> (where '~' is the current users home directory).

       <u>Hint</u>: If the folder <u>/etc/duply</u> exists, the profiles for the superuser root will be searched and created
       there.

</pre><h4><b>USAGE</b></h4><pre>
       First time usage (profile creation):

           duply &lt;profile&gt; create

       General usage in single mode (see EXAMPLES):

           duply &lt;profile&gt; &lt;command&gt; [&lt;options&gt; ...]

       General usage in batch mode joining commands with '_' (see EXAMPLES):

           duply &lt;profile&gt; &lt;command&gt;[[_|+|-]&lt;command&gt;[_|+|-]...] [&lt;options&gt; ...]

       For batches the conditional separators can also be written as pseudo commands and(+), or(-). See
       SEPARATORS for details.

       Non <b>duply</b> options are passed on to duplicity (see OPTIONS).  All config parameters can also be defined in
       the environment instead.

</pre><h4><b>SEPARATORS</b></h4><pre>
       <b>_</b> <b>(underscore)</b>
           neutral separator

       <b>+</b> <b>(plus</b> <b>sign),</b> <b>_and_</b>
           conditional AND; the next command will only be executed if the previous succeeded

       <b>-</b> <b>(minus</b> <b>sign),</b> <b>_or_</b>
           conditional OR; the next command will only be executed if the previous failed

       Example: 'pre+bkp-verify_post' translates to 'pre_and_bkp_or_verify_post'

</pre><h4><b>PROFILE</b></h4><pre>
   <b>location</b> <b>for</b> <b>profiles</b>
       Indicated  by  a  path  or  a  profile  name i.e. <u>myprofile</u>, which is resolved to <u><a href="file:~/.duply/myprofile">~/.duply/myprofile</a></u> ('~'
       expands to environment variable $HOME).

       Superuser root can place profiles under <u>/etc/duply</u>. Simply create  the  folder  manually  before  running
       duply as superuser.

       ATTENTION:  Already  existing  profiles in root's home folder will cease to work unless they are moved to
       the new location manually.

   <b>using</b> <b>profiles</b>
       Usually only the profile name (here: 'humbug') will be used:

           duply humbug backup

       Alternatively a <u>path</u> might be used.  This  might  be  useful  for  quick  testing,  restoring  or  exotic
       locations. Shell expansion should work as usual:

           duply <a href="file:~/.duplytest/humbug">~/.duplytest/humbug</a> backup

       ATTENTION: The path must contain at least one '/', e.g <u>./test</u> instead of only <u>test</u>.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>usage</b>   Get usage help text.

       <b>and/or</b>  Pseudo commands for better batch cmd readability (see SEPARATORS).

       <b>create</b>  Creates a configuration profile.

       <b>backup</b>  Backup with pre/post script execution (as batch the same as: pre_bkp_post)

               • as <u>full</u> backup if parameter full_if_older matches or no earlier backup is found.

               • as <u>incremental</u> backup in all other cases.

       <b>bkp</b>     As above but without executing pre/post scripts.

       <b>full</b>    Force full backup.

       <b>incr</b>    Force incremental backup.

       <b>pre</b>     Execute only script '&lt;profile&gt;/pre' (for debugging purposes).

       <b>post</b>    Execute only script '&lt;profile&gt;/post' (for debugging purposes).

       <b>list</b> <u>[«age»]</u>
               List all files in backup (as it was at <u>age</u>, default: now).

       <b>status</b>  Print backup sets and chains currently in repository.

       <b>verify</b> <u>[«age»]</u> <u>[--compare-data]</u>
               List files changed, since <u>age</u> if given.

       <b>verifyPath</b> <u>[«rel_path_in_bkp»]</u> <u>[«local_path»]</u> <u>[«age»]</u> <u>[--compare-data]</u>
               List changes of a file or folder path in backup compared to a local path, since <u>age</u> if given.

       <b>restore</b> <u>«target_path»</u> <u>[«age»]</u>
               Restore the complete backup to <u>target_path</u> (as it was at <u>age</u>).

       <b>fetch</b> <u>src_path</u> <u>target_path</u> <u>[«age»]</u>
               Fetch single file/folder from backup (as it was at <u>age</u>).

       <b>purge</b> <u>[«max_age»]</u> <u>[--force]</u>
               List  outdated backup archives (older than <u>max_age</u>).  Use option <u>--force</u> to actually delete these
               files.

       <b>purgeFull</b> <u>[«max_full_backups»]</u> <u>[--force]</u>
               List outdated backup files. <u>max_full_backups</u> being the number  of  full  backups  and  associated
               incrementals  to  keep,  counting  in reverse chronological order. Use option <u>--force</u> to actually
               delete these files.

       <b>purgeIncr</b> <u>[«max_fulls_with_incrs»]</u> <u>[--force]</u>
               List outdated incremental backup files. <u>max_fulls_with_incrs</u> being the  number  of  full  backups
               which  associated incrementals  will be kept, counting in reverse chronological order. Use option
               <u>--force</u> to actually delete these files.

       <b>purgeAuto</b> <u>[--force]</u>
               Convenience batch wrapper for all purge commands above.  purge, purgeFull, purgeIncr are added if
               their conf vars were set. E.g.

                 MAX_AGE=1Y
                 MAX_FULL_BACKUPS=6
                 MAX_FULLS_WITH_INCR=3

               in profile conf file would result in [purge_purgeFull_purgeIncr].

       <b>cleanup</b> <u>[--force]</u>
               List broken backup chain files archives (e.g. after  unfinished  run).   Use  option  <u>--force</u>  to
               actually delete these files.

       <b>changelog</b>
               Print the last changes of duply.

       <b>version</b> Show version information of <b>duply</b> and needed programs.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--force</b>
           Passed to duplicity (see commands: purge, purge-full, purge-incr, cleanup).

       <b>--preview</b>
           Do nothing but print out generated duplicity command lines.

       <b>--disable-encryption</b>
           Disable encryption, override profile settings.

</pre><h4><b>TIME</b> <b>FORMATS</b></h4><pre>
       For  all time related parameters like age, max_age etc.  refer to the duplicity manpage for all available
       formats.  Here some examples:

         · 2002-01-25T07:00:00+02:00 (full date time format string)
         · 2002/3/5 (date string YYYY/MM/DD)
         · 12D (interval, 12 days ago)
         · 1h78m (interval, 1 hour 78 minutes ago)

</pre><h4><b>PRE/POST</b> <b>SCRIPTS</b></h4><pre>
       Some useful internal duply variables are exported to the scripts:

          PROFILE, CONFDIR, SOURCE, TARGET_URL_&lt;PROT|HOSTPATH|USER|PASS&gt;,
          GPG_&lt;KEYS_ENC|KEY_SIGN|PW&gt;, CMD_ERR, RUN_START,
          CMD_&lt;PREV|NEXT&gt; (previous/next command),
          CND_&lt;PREV|NEXT&gt; (condition before/after)

       The CMD_* variables were introduced to allow different actions according to the command the scripts  were
       attached  to  e.g.  'pre_bkp_post_pre_verify_post'  will  call  the  pre  script two times, with CMD_NEXT
       variable set to 'bkp' on the first and to 'verify' on the second run.  CMD_ERR holds the exit code of the
       CMD_PREV.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Create profile 'humbug':

           duply humbug create

       and then edit the resulting <u>conf</u> file of this profile.

       Backup 'humbug' now:

           duply humbug backup

       List available backup sets of profile 'humbug':

           duply humbug status

       List and delete outdated backups of 'humbug':

           duply humbug purge --force

       Restore latest backup of 'humbug' to /mnt/restore:

           duply humbug restore /mnt/restore

       Restore <a href="file:/etc/passwd">/etc/passwd</a> of 'humbug' from 4 days ago to /root/pw:

           duply humbug fetch etc/passwd /root/pw 4D

       See <u>man</u> <u>duplicity</u>, section TIME FORMATS for the time format.

       A one line <u>batch</u> <u>job</u> on 'humbug' for cron execution:

           duply humbug backup_verify_purge --force

       Batch job to run a full backup with pre/post scripts:

           duply humbug pre_full_post

</pre><h4><b>FILES</b></h4><pre>
       Files in profile folder '<a href="file:~/.duply/">~/.duply/</a>&lt;profile&gt;' or '/etc/duply':

         conf .......... profile configuration file
         pre ........... pre script (see above for details)
         post .......... post script (see above for details)
         gpgkey.*.asc .. exported GnuPG key files
         exclude ....... a globbing list of included or excluded files/folders

       The rules for the <u>exclude</u> file can be found in <u>man</u> <u>duplicity</u>, section FILE SELECTION).

</pre><h4><b>IMPORTANT</b></h4><pre>
       Copy the <u>whole</u> profile folder after the first backup to a safe place.  It contains everything  needed  to
       restore  your backups. You will need it if you have to restore the backup from another system (e.g. after
       a system crash). Keep access to these files restricted as they contain <u>all</u>  information  (gpg  data,  ftp
       data) to access and modify your backups.

       Repeat this step after <u>all</u> configuration changes. Some configuration options are crucial for restoration.

</pre><h4><b>BUGS</b></h4><pre>
       This program is still in development. If you find bugs write a bug report on: <a href="http://duply.net/">http://duply.net/</a>.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       For newer versions see <a href="http://sourceforge.net/projects/ftplicity/">http://sourceforge.net/projects/ftplicity/</a>.

</pre><h4><b>COPYRIGHT</b> <b>and</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2006 Christiane Ruetten, 2008-2017 Edgar Soldin

       This  package  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU
       General Public License as published by the Free Software Foundation; either version 2 of the License,  or
       (at your option) any later version.

       On Debian systems, the complete text of the GNU General Public License version 2 can be found in the file
       `<a href="file:/usr/share/common-licenses/GPL-2">/usr/share/common-licenses/GPL-2</a>'.

</pre><h4><b>AUTHOR</b></h4><pre>
       Duply was written by Christiane Ruetten (initial version, named ftplicity) and Edgar Soldin.

       This  manual page was written by Joachim Wiedorn &lt;joodebian at joonet.de&gt; for the Debian project (and may
       be used by others).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/duplicity.1.html">duplicity</a></b>(1)

Version 2.3                                        2020-12-30                                           <u><a href="../man1/DUPLY.1.html">DUPLY</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>