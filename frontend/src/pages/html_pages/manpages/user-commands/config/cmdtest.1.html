<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cmdtest - blackbox testing of Unix command line tools</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/cmdtest">cmdtest_0.32.14.gcdfe14e-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cmdtest - blackbox testing of Unix command line tools

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>cmdtest</b>    [<b>-c</b><u>COMMAND</u>]   [<b>--command</b>=<u>COMMAND</u>]   [<b>--config</b>=<u>FILE</u>]   [<b>--dump-config</b>]   [<b>--dump-setting-names</b>]
       [<b>--generate-manpage</b>=<u>TEMPLATE</u>]    [<b>-h</b>]    [<b>--help</b>]    [<b>--help-all</b>]    [<b>--list-config-files</b>]    [<b>--version</b>]
       [<b>--no-default-configs</b>]    [<b>--dump-memory-profile</b>=<u>METHOD</u>]    [<b>-k</b>]    [<b>--keep</b>]   [<b>--no-keep</b>]   [<b>--log</b>=<u>FILE</u>]
       [<b>--log-keep</b>=<u>N</u>] [<b>--log-level</b>=<u>LEVEL</u>]  [<b>--log-max</b>=<u>SIZE</u>]  [<b>--log-mode</b>=<u>MODE</u>]  [<b>--memory-dump-interval</b>=<u>SECONDS</u>]
       [<b>--output</b>=<u>FILE</u>] [<b>-t</b><u>TEST</u>] [<b>--test</b>=<u>TEST</u>] [<b>--timings</b>] [<b>--no-timings</b>] [<u>FILE</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>cmdtest</b>  black  box  tests  Unix command line tools.  Given some test scripts, their inputs, and expected
       outputs, it verifies that the command line produces the expected output.  If not,  it  reports  problems,
       and shows the differences.

       Each test case <u>foo</u> consists of the following files:

       <u>foo.script</u>
              a script to run the test (this is required)

       <u>foo.stdin</u>
              the file fed to standard input

       <u>foo.stdout</u>
              the expected output to the standard output

       <u>foo.stderr</u>
              the expected output to the standard error

       <u>foo.exit</u>
              the expected exit code

       <u>foo.setup</u>
              a shell script to run before the test

       <u>foo.teardown</u>
              a shell script to run after test

       Usually,  a single test is not enough. All tests are put into the same directory, and they may share some
       setup and teardown code:

       <u>setup-once</u>
              a shell script to run once, before any tests

       <u>setup</u>  a shell script to run before each test

       <u>teardown</u>
              a shell script to run after each test

       <u>teardown-once</u>
              a shell script to run once, after all tests

       <b>cmdtest</b> is given the name of the directory with all the tests, or several such directories, and  it  does
       the following:

       • execute <u>setup-once</u>

       • for each test case (unique prefix <u>foo</u>):

              — execute <u>setup</u>

              — execute <u>foo.setup</u>

              — execute the command, by running <u>foo.script</u>, and redirecting standard input to come from
                <u>foo.stdin</u>, and capturing standard output and error and exit codes

              — execute <u>foo.teardown</u>

              — execute <u>teardown</u>

              — report result of test: does exit code match <u>foo.exit</u>, standard output match <u>foo.stdout</u>, and
                standard error match <u>foo.stderr</u>?

       • execute <u>teardown-once</u>

       Except for <u>foo.script</u>, all of these files are optional.  If a setup or teardown script is missing, it is
       simply not executed.  If one of the standard input, output, or error files is missing, it is treated as
       if it were empty.  If the exit code file is missing, it is treated as if it specified an exit code of ze‐
       ro.

       The shell scripts may use the following environment variables:

       <b>DATADIR</b>
              a temporary directory where files may be created by the test

       <b>TESTNAME</b>
              name of the current test (will be empty for <b>setup-once</b> and <b>teardown-once</b>)

       <b>SRCDIR</b> directory from which <b>cmdtest</b> was launched

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-c</b>, <b>--command</b>=<u>COMMAND</u>
              ignored for backwards compatibility

       <b>--generate-manpage</b>=<u>TEMPLATE</u>
              fill in manual page TEMPLATE

       <b>-h</b>, <b>--help</b>
              show this help message and exit

       <b>-k</b>, <b>--keep</b>
              keep temporary data on failure

       <b>--no-keep</b>
              opposite of --keep

       <b>--output</b>=<u>FILE</u>
              write output to FILE, instead of standard output

       <b>-t</b>, <b>--test</b>=<u>TEST</u>
              run only TEST (can be given many times)

       <b>--timings</b>
              report how long each test takes

       <b>--no-timings</b>
              opposite of --timings

       <b>--version</b>
              show program's version number and exit

   <b>Configuration</b> <b>files</b> <b>and</b> <b>settings</b>
       <b>--config</b>=<u>FILE</u>
              add FILE to config files

       <b>--dump-config</b>
              write out the entire current configuration

       <b>--dump-setting-names</b>
              write out all names of settings and quit

       <b>--help-all</b>
              show all options

       <b>--list-config-files</b>
              list all possible config files

       <b>--no-default-configs</b>
              clear list of configuration files to read

   <b>Logging</b>
       <b>--log</b>=<u>FILE</u>
              write  log entries to FILE (default is to not write log files at all); use "syslog" to log to sys‐
              tem log, "stderr" to log to the standard error output, or "none" to disable logging

       <b>--log-keep</b>=<u>N</u>
              keep last N logs (10)

       <b>--log-level</b>=<u>LEVEL</u>
              log at LEVEL, one of debug, info, warning, error, critical, fatal (default: debug)

       <b>--log-max</b>=<u>SIZE</u>
              rotate logs larger than SIZE, zero for never (default: 0)

       <b>--log-mode</b>=<u>MODE</u>
              set permissions of new log files to MODE (octal; default 0600)

   <b>Peformance</b>
       <b>--dump-memory-profile</b>=<u>METHOD</u>
              make memory profiling dumps using METHOD, which is one of: none, or simple (no meliae support any‐
              more)(default: simple)

       <b>--memory-dump-interval</b>=<u>SECONDS</u>
              make memory profiling dumps at least SECONDS apart

</pre><h4><b>EXAMPLE</b></h4><pre>
       To test that the <b><a href="../man1/echo.1.html">echo</a></b>(1) command outputs the  expected  string,  create  a  file  called  <u>echo-tests/hel‐</u>
       <u>lo.script</u> containing the following content:

              #!<a href="file:/bin/sh">/bin/sh</a>
              echo hello, world

       Also create the file <u>echo-tests/hello.stdout</u> containing:

              hello, world

       Then you can run the tests:

              $ cmdtest echo-tests
              test 1/1
              1/1 tests OK, 0 failures

       If you change the stdout file to be something else, <b>cmdtest</b> will report the differences:

              $ cmdtest echo-tests
              FAIL: hello: stdout diff:
              --- echo-tests/hello.stdout   2011-09-11 19:14:47 +0100
              +++ echo-tests/hello.stdout-actual 2011-09-11 19:14:49 +0100
              @@ -1 +1 @@
              -something else
              +hello, world

              test 1/1
              0/1 tests OK, 1 failures

       Furthermore,  the  <u>echo-tests</u> directory will contain the actual output files, and diffs from the expected
       files.  If one of the actual output files is actually correct, you can actually rename it to be  the  ex‐
       pected  file.   Actually, that's a very convenient way of creating the expected output files: you run the
       test, fixing things, until you've manually checked the actual output is  correct,  then  you  rename  the
       file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/cliapp.5.html">cliapp</a></b>(5).

                                                                                                      <u><a href="../man1/CMDTEST.1.html">CMDTEST</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>