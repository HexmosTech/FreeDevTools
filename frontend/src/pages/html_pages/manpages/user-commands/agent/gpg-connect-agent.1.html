<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>gpg-connect-agent - Communicate with a running agent</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/gpgconf">gpgconf_2.4.4-2ubuntu23.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>gpg-connect-agent</b> - Communicate with a running agent

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>gpg-connect-agent</b> [<u>options</u>]<u>[commands]</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>gpg-connect-agent</b>  is  a utility to communicate with a running <b>gpg-agent</b>.  It is useful to check out
       the commands <b>gpg-agent</b> provides using the Assuan interface.  It might also be useful for scripting simple
       applications.  Input is expected at stdin and output gets printed to stdout.

       It is very similar to running <b>gpg-agent</b> in server mode; but here we connect to a running instance.

       The following options may be used:

       <b>--dirmngr</b>
              Connect to a running directory manager (keyserver client) instead  of  to  the  gpg-agent.   If  a
              dirmngr is not running, start it.

       <b>--keyboxd</b>
              Connect  to  a  running  keybox  daemon instead of to the gpg-agent.  If a keyboxd is not running,
              start it.

       <b>-S</b>
       <b>--raw-socket</b> <u>name</u>
              Connect to socket <u>name</u> assuming  this  is  an  Assuan  style  server.   Do  not  run  any  special
              initializations  or  environment checks.  This may be used to directly connect to any Assuan style
              socket server.

       <b>-E</b>
       <b>--exec</b> Take the rest of the command line as a program and it's arguments and  execute  it  as  an  Assuan
              server. Here is how you would run <b>gpgsm</b>:
          gpg-connect-agent --exec gpgsm --server
       Note that you may not use options on the command line in this case.

       <b>-v</b>
       <b>--verbose</b>
              Output additional information while running.

       <b>-q</b>

       <b>--quiet</b>
              Try to be as quiet as possible.

       <b>--homedir</b> <u>dir</u>
              Set the name of the home directory to <u>dir</u>. If this option is not used, the home directory defaults
              to  ‘<u><a href="file:~/.gnupg">~/.gnupg</a></u>’.  It is only recognized when given on the command line.  It also overrides any home
              directory stated through the environment variable ‘<u>GNUPGHOME</u>’ or (on Windows systems) by means  of
              the Registry entry <u>HKCU\Software\GNU\GnuPG:HomeDir</u>.

              On  Windows  systems it is possible to install GnuPG as a portable application.  In this case only
              this command line option is considered, all other ways to set a home directory are ignored.

       <b>--chuid</b> <u>uid</u>
              Change the current user to <u>uid</u> which may either be a number or a name.  This can be used from  the
              root  account to run gpg-connect-agent for another user.  If <u>uid</u> is not the current UID a standard
              PATH is set and the envvar GNUPGHOME is unset.  To override the latter the option <b>--homedir</b> can be
              used.  This option has only an effect when used on the command line.  This option has currently no
              effect at all on Windows.

       <b>--no-ext-connect</b>
              When using <b>-S</b> or <b>--exec</b>, <b>gpg-connect-agent</b> connects to the Assuan server in extended mode to allow
              descriptor passing.  This option makes it use the old mode.

       <b>--no-autostart</b>
              Do not start the gpg-agent or the dirmngr if it has not yet been started.

       <b>--no-history</b>
              In interactive mode the command line history is usually saved and restored  to  and  from  a  file
              below the GnuPG home directory.  This option inhibits the use of that file.

       <b>--agent-program</b> <u>file</u>
              Specify  the  agent  program to be started if none is running.  The default value is determined by
              running <b>gpgconf</b> with the option <b>--list-dirs</b>.  Note  that  the  pipe  symbol  (<b>|</b>)  is  used  for  a
              regression test suite hack and may thus not be used in the file name.

       <b>--dirmngr-program</b> <u>file</u>
              Specify  the  directory manager (keyserver client) program to be started if none is running.  This
              has only an effect if used together with the option <b>--dirmngr</b>.

       <b>--keyboxd-program</b> <u>file</u>
              Specify the keybox daemon program to be started if none is running.  This has only  an  effect  if
              used together with the option <b>--keyboxd</b>.

       <b>-r</b> <u>file</u>
       <b>--run</b> <u>file</u>
              Run the commands from <u>file</u> at startup and then continue with the regular input method.  Note, that
              commands given on the command line are executed after this file.

       <b>-s</b>
       <b>--subst</b>
              Run the command <b>/subst</b> at startup.

       <b>--hex</b>  Print data lines in a hex format and the ASCII representation of non-control characters.

       <b>--decode</b>
              Decode  data lines.  That is to remove percent escapes but make sure that a new line always starts
              with a D and a space.

       <b>-u</b>
       <b>--unbuffered</b>
              Set stdin and stdout into unbuffered I/O mode.  This this sometimes useful for scripting.

</pre><h4><b>CONTROL</b> <b>COMMANDS</b></h4><pre>
       While reading Assuan commands, gpg-agent also allows a few special commands  to  control  its  operation.
       These control commands all start with a slash (<b>/</b>).

       <b>/echo</b> <u>args</u>
              Just print <u>args</u>.

       <b>/let</b> <u>name</u> <u>value</u>
              Set  the  variable  <u>name</u>  to <u>value</u>.  Variables are only substituted on the input if the <b>/subst</b> has
              been used.  Variables are referenced by prefixing the name  with  a  dollar  sign  and  optionally
              include  the  name  in  curly  braces.  The rules for a valid name are identically to those of the
              standard bourne shell.  This is not yet enforced but may be in the future.  When used  with  curly
              braces no leading or trailing white space is allowed.

              If  a variable is not found, it is searched in the environment and if found copied to the table of
              variables.

              Variable functions are available: The name of the function must be followed by at least one  space
              and the at least one argument.  The following functions are available:

              <b>get</b>    Return a value described by the argument.  Available arguments are:

                     <b>cwd</b>    The current working directory.

                     <b>homedir</b>
                            The gnupg homedir.

                     <b>sysconfdir</b>
                            GnuPG's system configuration directory.

                     <b>bindir</b> GnuPG's binary directory.

                     <b>libdir</b> GnuPG's library directory.

                     <b>libexecdir</b>
                            GnuPG's library directory for executable files.

                     <b>datadir</b>
                            GnuPG's data directory.

                     <b>serverpid</b>
                            The  PID  of the current server. Command <b>/serverpid</b> must have been given to return a
                            useful value.

              <b>unescape</b> <u>args</u>
                     Remove C-style escapes from <u>args</u>.  Note that <b>\0</b> and  <b>\x00</b>  terminate  the  returned  string
                     implicitly.   The  string  to  be  converted  are  the  entire  arguments  right behind the
                     delimiting space of the function name.

              <b>unpercent</b> <u>args</u>
              <b>unpercent+</b> <u>args</u>
                     Remove percent style escaping from <u>args</u>.  Note that <b>%00</b> terminates the  string  implicitly.
                     The  string  to  be converted are the entire arguments right behind the delimiting space of
                     the function name. <b>unpercent+</b> also maps plus signs to a spaces.

              <b>percent</b> <u>args</u>
              <b>percent+</b> <u>args</u>
                     Escape the <u>args</u> using percent style escaping.  Tabs, formfeeds, linefeeds, carriage returns
                     and colons are escaped. <b>percent+</b> also maps spaces to plus signs.

              <b>errcode</b> <u>arg</u>
              <b>errsource</b> <u>arg</u>
              <b>errstring</b> <u>arg</u>
                     Assume <u>arg</u> is an integer and evaluate it using <b>strtol</b>.  Return the  gpg-error  error  code,
                     error source or a formatted string with the error code and error source.

              <b>+</b>
              <b>-</b>
              <b>*</b>
              <b>/</b>
              <b>%</b>      Evaluate  all  arguments as long integers using <b>strtol</b> and apply this operator.  A division
                     by zero yields an empty string.

              <b>!</b>
              <b>|</b>
              <b>&amp;</b>      Evaluate all arguments as long integers using <b>strtol</b> and apply the logical  operators  NOT,
                     OR or AND.  The NOT operator works on the last argument only.

       <b>/definq</b> <u>name</u> <u>var</u>
              Use content of the variable <u>var</u> for inquiries with <u>name</u>.  <u>name</u> may be an asterisk (<b>*</b>) to match any
              inquiry.

       <b>/definqfile</b> <u>name</u> <u>file</u>
              Use content of <u>file</u> for inquiries with <u>name</u>.  <u>name</u> may be an asterisk (<b>*</b>) to match any inquiry.

       <b>/definqprog</b> <u>name</u> <u>prog</u>
              Run <u>prog</u> for inquiries matching <u>name</u> and pass the entire line to it as command line arguments.

       <b>/datafile</b> <u>name</u>
              Write all data lines from the server to the file <u>name</u>.  The file is opened for writing and created
              if  it  does  not exists.  An existing file is first truncated to 0.  The data written to the file
              fully decoded.  Using a single dash for <u>name</u> writes to stdout.  The file is kept open until a  new
              file is set using this command or this command is used without an argument.

       <b>/showdef</b>
              Print all definitions

       <b>/cleardef</b>
              Delete all definitions

       <b>/sendfd</b> <u>file</u> <u>mode</u>
              Open  <u>file</u>  in  <u>mode</u> (which needs to be a valid <b>fopen</b> mode string) and send the file descriptor to
              the server.  This is usually followed by a command like <b>INPUT</b> <b>FD</b> to set the input source for other
              commands.

       <b>/recvfd</b>
              Not yet implemented.

       <b>/open</b> <u>var</u> <u>file</u> <b>[</b><u>mode</u><b>]</b>
              Open <u>file</u> and assign the file descriptor to <u>var</u>.  Warning: This command is experimental and  might
              change in future versions.

       <b>/close</b> <u>fd</u>
              Close  the  file  descriptor <u>fd</u>.  Warning: This command is experimental and might change in future
              versions.

       <b>/showopen</b>
              Show a list of open files.

       <b>/serverpid</b>
              Send the Assuan command <b>GETINFO</b> <b>pid</b> to  the  server  and  store  the  returned  PID  for  internal
              purposes.

       <b>/sleep</b> Sleep for a second.

       <b>/hex</b>
       <b>/nohex</b> Same as the command line option <b>--hex</b>.

       <b>/decode</b>
       <b>/nodecode</b>
              Same as the command line option <b>--decode</b>.

       <b>/subst</b>
       <b>/nosubst</b>
              Enable  and disable variable substitution.  It defaults to disabled unless the command line option
              <b>--subst</b> has been used.  If /subst as been enabled once, leading whitespace is removed  from  input
              lines which makes scripts easier to read.

       <b>/while</b> <u>condition</u>
       <b>/end</b>   These  commands  provide  a  way  for  executing  loops.   All  lines  between  the  <b>while</b> and the
              corresponding <b>end</b> are executed as long as the evaluation of <u>condition</u> yields a non-zero  value  or
              is  the  string  <b>true</b> or <b>yes</b>.  The evaluation is done by passing <u>condition</u> to the <b>strtol</b> function.
              Example:

           /subst
           /let i 3
           /while $i
             /echo loop counter is $i
             /let i ${- $i 1}
           /end

       <b>/if</b> <u>condition</u>
       <b>/end</b>   These commands provide a way for  conditional  execution.   All  lines  between  the  <b>if</b>  and  the
              corresponding  <b>end</b>  are executed only if the evaluation of <u>condition</u> yields a non-zero value or is
              the string <b>true</b> or <b>yes</b>.  The evaluation is done by passing <u>condition</u> to the <b>strtol</b> function.

       <b><a href="file:/run">/run</a></b> <u>file</u>
              Run commands from <u>file</u>.

       <b>/history</b> <b>--clear</b>
              Clear the command history.

       <b>/bye</b>   Terminate the connection and the program.

       <b>/help</b>  Print a list of available control commands.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/gpg-agent.1.html">gpg-agent</a></b>(1), <b><a href="../man1/scdaemon.1.html">scdaemon</a></b>(1)

       The full documentation for this tool is maintained as a Texinfo manual.  If GnuPG and  the  info  program
       are properly installed at your site, the command

         info gnupg

       should give you access to the complete manual including a menu structure and an index.

GnuPG 2.4.4                                        2024-01-25                               <u><a href="../man1/GPG-CONNECT-AGENT.1.html">GPG-CONNECT-AGENT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>