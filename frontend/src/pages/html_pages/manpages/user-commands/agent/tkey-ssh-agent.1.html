<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tkey-ssh-agent — An SSH agent backed by Tillitis TKey</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/tkey-ssh-agent">tkey-ssh-agent_1.0.0+ds-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tkey-ssh-agent — An SSH agent backed by Tillitis TKey

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>tkey-ssh-agent</b>   [<b>-L</b>   |   <b>--list-ports</b>]   [<b>-a</b>   |  <b>--agent-path</b>  <u>path</u>]  [<b>--help</b>]  [<b>-p</b>  |  <b>--show-pubkey</b>]
                      [<b>--pinentry</b>  <u>command</u>]  [<b>--port</b>  <u>path</u>]  [<b>--speed</b>  <u>bit_speed</u>]  [<b>--uss</b>]   [<b>--uss-file</b>   <u>path</u>]
                      [<b>--version</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>tkey-ssh-agent</b> is an alternative SSH agent backed by an Ed25519 signer device-app which it uploads to the
       Tillitis TKey, a small computer in the form of a USB stick.

       It  works  as  an  OpenSSH-compatible  agent  for  all SSH programs, supporting a necessary subset of the
       OpenSSH agent protocol. You can use it to login to other systems or to sign  Git  commits,  for  example.
       Your ephemeral private key never leaves the TKey.

       The  act of uploading the signer app, with an optional User Supplied Secret, creates a new unique, stable
       but ephemeral identity for that specific combination of TKey, signer app binary, and USS.

       The options are as follows:

       <b>-L</b> | <b>--list-ports</b>
               List possible serial ports to use with <b>--port</b> and exit.

       <b>-a</b> | <b>--agent-path</b> <u>path</u>
               Bind the agent to the Unix-domain socket at path.

       <b>--help</b>  Output help text and exit.

       <b>-p</b> | <b>--show-pubkey</b>
               Extract the ssh-ed25519 public key from the TKey and exit.

       <b>--pinentry</b> <u>command</u>
               Specify pinentry command for use by <b>--uss</b>.   The  default  is  found  by  looking  in  your  gpg-
               agent.conf for pinentry-program. If this is not found, the <u><a href="../man1/pinentry.1.html">pinentry</a></u>(1) command is used.

       <b>--port</b> <u>path</u>
               Set serial port device path. If this is not set, auto-detection will be attempted.

       <b>--speed</b> <u>bit_speed</u>
               Set serial port speed in bits per second. Default is 62500 b/s.

       <b>--uss</b>   Interactively  ask  for a secret to be hashed as the User Supplied Secret. The USS is loaded onto
               the TKey along with the signer. A different USS results in a different pair of SSH public/private
               keys.

       <b>--uss-file</b> <u>path</u>
               Read a secret from a file path and hash its contents as the User Supplied Secret to be mixed into
               the TKey identity. Use '-' (dash) to read from stdin. The full  contents  are  hashed  unmodified
               (i.e.  newlines are not stripped).

       <b>--version</b>
               Output version information.

   <b>User</b> <b>Supplied</b> <b>Secret</b>
       You  are encouraged to run <b>tkey-ssh-agent</b> with <b>--uss</b>, meaning that when the signer app is loaded onto the
       TKey, a User Supplied Secret (USS) is loaded as well. In short, changing the USS results in  a  different
       SSH  ed25519  key,  a  new  identity. The USS is input interactively using a <u><a href="../man1/pinentry.1.html">pinentry</a></u>(1) command, see the
       <b>--uss</b> option for more information. If not run with <b>--uss</b>, the TKey/signer combination will have a  single
       identity.

   <b>systemd-based</b> <b>systems</b>
       With  the  source  code  we  provide  a  systemd  unit  file  that can be used to automatically start the
       <b>tkey-ssh-agent</b> when a user logs in. If this unit file is installed (for instance with a package for  your
       operating system) you can run the following (as your own user) to start the agent right now and enable it
       for future logins:

       $ systemctl --user enable --now tkey-ssh-agent

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       To  make <u><a href="../man1/ssh.1.html">ssh</a></u>(1), <u><a href="../man1/ssh-add.1.html">ssh-add</a></u>(1) and other tools use <b>tkey-ssh-agent</b> you must set the <b>SSH_AUTH_SOCK</b> environment
       variable for them, so they can find and communicate with the SSH agent. For your current shell  this  can
       be done like this (bash/zsh):

       export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/tkey-ssh-agent/sock"

       This  line  can  also  be  added to the startup file for your shell, e.g. in <b>.bashrc.</b> This would make all
       tools that honour <b>SSH_AUTH_SOCK</b> use <b>tkey-ssh-agent</b>.

       With <b>SSH_AUTH_SOCK</b> correctly set you can see the current SSH ed25519 public key by running:

       $ ssh-add -L

</pre><h4><b>FILES</b></h4><pre>
       <b>tkey-ssh-agent</b> does not have a configuration file.

       You might, however, want to configure <a href="../man1/ssh.1.html">ssh</a>(1) to use a specific SSH agent ("IdentityAgent")  depending  on
       the  host  you  want  to  access.  Add  the following to <b><a href="file:~/.ssh/config">~/.ssh/config</a></b> to make it use <b>tkey-ssh-agent</b> when
       connecting to "example.com":

         Host example.com
           IdentityAgent ${XDG_RUNTIME_DIR}/tkey-ssh-agent/sock

       Or use <b>tkey-ssh-agent</b> for all hosts except "example.com":

         Host example.com
           IdentityAgent $SSH_AUTH_SOCK

         Host *
           IdentityAgent ${XDG_RUNTIME_DIR}/tkey-ssh-agent/sock

</pre><h4><b>EXAMPLES</b></h4><pre>
       Running manually against a TKey with automatic port detection and interatively ask for the User  Supplied
       Secret:

       $ tkey-ssh-agent -a ./agent.sock --uss

       Running  manually against qemu (look when qemu is starting what device it uses) and interactively ask for
       the User Supplied Secret:

       $ tkey-ssh-agent -a ./agent.sock --port /dev/pts/1 --uss

       Ask the agent about the TKey public key:

       $ SSH_AUTH_SOCK=./agent.sock ssh-add -L

       Login to <b>localhost</b> using the agent (copy the public key to <a href="file:~/.ssh/authorized_key">~/.ssh/authorized_key</a> first):

       $ SSH_AUTH_SOCK=./agent.sock ssh -F /dev/null localhost

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/ssh.1.html">ssh</a></u>(1) <u><a href="../man1/ssh-add.1.html">ssh-add</a></u>(1) <u><a href="../man1/ssh-agent.1.html">ssh-agent</a></u>(1)

</pre><h4><b>STANDARDS</b></h4><pre>
       <b>tkey-ssh-agent</b> attempts to follow a subset of the OpenSSH Agent protocol. It doesn't do anything on calls
       to add/remove keys, or to lock/unlock it with a passphrase.

</pre><h4><b>AUTHORS</b></h4><pre>
       Tillitis AB, https://tillitis.se/

</pre><h4><b>CAVEATS</b></h4><pre>
       The <b>tkey-ssh-agent</b> only connects to the TKey when an SSH agent operation  is  requested  (e.g.  when  you
       attempt to log in somewhere or request the public key) and disconnects soon afterwards. If the signer app
       is not already running on the TKey it is first uploaded to the TKey and started.

       This  means that it will only ask for the User Supplied Secret (if started using the <b>--uss</b> flag) when the
       agent is actually requested to do something for the first time, not when the TKey  is  inserted,  as  the
       user  perhaps  expected.  The  reason  is  that the <b>tkey-ssh-agent</b> shouldn't hog the device and let other
       client apps also be able to speak to it.

Debian                                             $Mdocdate$                                  <u><a href="../man1/tkey-ssh-agent.1.html">tkey-ssh-agent</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>