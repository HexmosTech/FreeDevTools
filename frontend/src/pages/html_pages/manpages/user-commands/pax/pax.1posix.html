<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix">manpages-posix_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       pax — portable archive interchange

</pre><h4><b>SYNOPSIS</b></h4><pre>
       pax <b>[</b>-dv<b>]</b> <b>[</b>-c|-n<b>]</b> <b>[</b>-H|-L<b>]</b> <b>[</b>-o <u>options</u><b>]</b> <b>[</b>-f <u>archive</u><b>]</b> <b>[</b>-s <u>replstr</u><b>]</b>...
           <b>[</b><u>pattern</u>...<b>]</b>

       pax -r<b>[</b>-c|-n<b>]</b> <b>[</b>-dikuv<b>]</b> <b>[</b>-H|-L<b>]</b> <b>[</b>-f <u>archive</u><b>]</b> <b>[</b>-o <u>options</u><b>]</b>... <b>[</b>-p <u>string</u><b>]</b>...
           <b>[</b>-s <u>replstr</u><b>]</b>... <b>[</b><u>pattern</u>...<b>]</b>

       pax -w <b>[</b>-dituvX<b>]</b> <b>[</b>-H|-L<b>]</b> <b>[</b>-b <u>blocksize</u><b>]</b> <b>[[</b>-a<b>]</b> <b>[</b>-f <u>archive</u><b>]]</b> <b>[</b>-o <u>options</u><b>]</b>...
           <b>[</b>-s <u>replstr</u><b>]</b>... <b>[</b>-x <u>format</u><b>]</b> <b>[</b><u>file</u>...<b>]</b>

       pax -r -w <b>[</b>-diklntuvX<b>]</b> <b>[</b>-H|-L<b>]</b> <b>[</b>-o <u>options</u><b>]</b>... <b>[</b>-p <u>string</u><b>]</b>...
           <b>[</b>-s <u>replstr</u><b>]</b>... <b>[</b><u>file</u>...<b>]</b> <u>directory</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>pax</u>  utility  shall  read, write, and write lists of the members of archive files and copy directory
       hierarchies. A variety of archive formats shall be supported; see the <b>-x</b> <u>format</u> option.

       The action to be taken depends on the presence of the <b>-r</b> and <b>-w</b> options. The four combinations of <b>-r</b>  and
       <b>-w</b>  are  referred  to  as  the  four modes of operation: <b>list</b>, <b>read</b>, <b>write</b>, and <b>copy</b> modes, corresponding
       respectively to the four forms shown in the SYNOPSIS section.

       <b>list</b>      In <b>list</b> mode (when neither <b>-r</b> nor <b>-w</b> are specified), <u>pax</u> shall write the names of  the  members
                 of  the  archive  file  read  from  the  standard  input, with pathnames matching the specified
                 patterns, to standard output. If a named file is of type directory, the file  hierarchy  rooted
                 at that file shall be listed as well.

       <b>read</b>      In  <b>read</b>  mode  (when  <b>-r</b>  is  specified,  but <b>-w</b> is not), <u>pax</u> shall extract the members of the
                 archive file read from the standard input, with pathnames matching the specified  patterns.  If
                 an  extracted  file  is  of  type  directory,  the  file hierarchy rooted at that file shall be
                 extracted as well. The extracted files shall be created performing pathname resolution with the
                 directory in which <u>pax</u> was invoked as the current working directory.

                 If an attempt is made to extract a directory when the directory already exists, this shall  not
                 be  considered  an error. If an attempt is made to extract a FIFO when the FIFO already exists,
                 this shall not be considered an error.

                 The ownership, access, and modification  times,  and  file  mode  of  the  restored  files  are
                 discussed under the <b>-p</b> option.

       <b>write</b>     In  <b>write</b>  mode (when <b>-w</b> is specified, but <b>-r</b> is not), <u>pax</u> shall write the contents of the <u>file</u>
                 operands to the standard output in an archive format. If no <u>file</u> operands are specified, a list
                 of files to copy, one per line, shall be read from the standard input and each  entry  in  this
                 list  shall  be  processed as if it had been a <u>file</u> operand on the command line. A file of type
                 directory shall include all of the files in the file hierarchy rooted at the file.

       <b>copy</b>      In <b>copy</b> mode (when both <b>-r</b> and <b>-w</b> are specified), <u>pax</u> shall  copy  the  <u>file</u>  operands  to  the
                 destination directory.

                 If  no  <u>file</u>  operands are specified, a list of files to copy, one per line, shall be read from
                 the standard input. A file of type directory shall  include  all  of  the  files  in  the  file
                 hierarchy rooted at the file.

                 The  effect  of  the  <b>copy</b> shall be as if the copied files were written to a <u>pax</u> format archive
                 file and then subsequently extracted, except that copying of sockets may be supported  even  if
                 archiving  them  in  write  mode is not supported, and that there may be hard links between the
                 original and the copied files. If the destination directory is a subdirectory  of  one  of  the
                 files  to  be  copied, the results are unspecified. If the destination directory is a file of a
                 type  not  defined  by  the  System  Interfaces  volume  of  POSIX.1‐2017,  the   results   are
                 implementation-defined;  otherwise,  it  shall  be an error for the file named by the <u>directory</u>
                 operand not to exist, not be writable by the user, or not be a file of type directory.

       In <b>read</b> or <b>copy</b> modes, if intermediate directories are necessary to extract an archive member, <u>pax</u>  shall
       perform  actions  equivalent  to  the  <u>mkdir</u>()  function  defined  in  the  System  Interfaces  volume of
       POSIX.1‐2017, called with the following arguments:

        *  The intermediate directory used as the <u>path</u> argument

        *  The value of the bitwise-inclusive OR of S_IRWXU, S_IRWXG, and S_IRWXO as the <u>mode</u> argument

       If any specified <u>pattern</u> or <u>file</u> operands are not matched by at least one file  or  archive  member,  <u>pax</u>
       shall  write  a diagnostic message to standard error for each one that did not match and exit with a non-
       zero exit status.

       The archive formats described in the EXTENDED DESCRIPTION section  shall  be  automatically  detected  on
       input. The default output archive format shall be implementation-defined.

       A  single  archive can span multiple files. The <u>pax</u> utility shall determine, in an implementation-defined
       manner, what file to read or write as the next file.

       If the selected archive format supports the specification of linked files, it shall be an error if  these
       files cannot be linked when the archive is extracted. For archive formats that do not store file contents
       with  each  name that causes a hard link, if the file that contains the data is not extracted during this
       <u>pax</u> session, either the data shall be restored from the original file, or a diagnostic message  shall  be
       displayed  with  the  name of a file that can be used to extract the data. In traversing directories, <u>pax</u>
       shall detect infinite loops; that is, entering a previously visited directory that is an ancestor of  the
       last  file  visited.  When  it detects an infinite loop, <u>pax</u> shall write a diagnostic message to standard
       error and shall terminate.

</pre><h4><b>OPTIONS</b></h4><pre>
       The <u>pax</u> utility shall conform to the Base Definitions  volume  of  POSIX.1‐2017,  <u>Section</u>  <u>12.2</u>,  <u>Utility</u>
       <u>Syntax</u> <u>Guidelines</u>, except that the order of presentation of the <b>-o</b>, <b>-p</b>, and <b>-s</b> options is significant.

       The following options shall be supported:

       <b>-r</b>        Read an archive file from standard input.

       <b>-w</b>        Write files to the standard output in the specified archive format.

       <b>-a</b>        Append  files  to  the  end  of  the archive. It is implementation-defined which devices on the
                 system support appending. Additional file formats unspecified by this  volume  of  POSIX.1‐2017
                 may impose restrictions on appending.

       <b>-b</b> <u>blocksize</u>
                 Block  the  output at a positive decimal integer number of bytes per write to the archive file.
                 Devices  and  archive  formats  may  impose  restrictions  on  blocking.  Blocking   shall   be
                 automatically  determined on input. Conforming applications shall not specify a <u>blocksize</u> value
                 larger than 32256. Default blocking when creating archives depends on the archive format.  (See
                 the <b>-x</b> option below.)

       <b>-c</b>        Match all file or archive members except those specified by the <u>pattern</u> or <u>file</u> operands.

       <b>-d</b>        Cause  files  of  type  directory being copied or archived or archive members of type directory
                 being extracted or listed to match only the file or archive member  itself  and  not  the  file
                 hierarchy rooted at the file.

       <b>-f</b> <u>archive</u>
                 Specify  the pathname of the input or output archive, overriding the default standard input (in
                 <b>list</b> or <b>read</b> modes) or standard output (<b>write</b> mode).

       <b>-H</b>        If a symbolic link referencing a file of type directory is specified on the command  line,  <u>pax</u>
                 shall  archive  the file hierarchy rooted in the file referenced by the link, using the name of
                 the link as the root of the file hierarchy.  Otherwise, if a symbolic link referencing  a  file
                 of  any  other  file type which <u>pax</u> can normally archive is specified on the command line, then
                 <u>pax</u> shall archive the file referenced by the link, using the name  of  the  link.  The  default
                 behavior, when neither <b>-H</b> or <b>-L</b> are specified, shall be to archive the symbolic link itself.

       <b>-i</b>        Interactively  rename  files  or  archive  members.  For each archive member matching a <u>pattern</u>
                 operand or file matching a <u>file</u> operand, a prompt shall be written to the file  <b>/dev/tty</b>.   The
                 prompt  shall  contain  the  name  of  the  file or archive member, but the format is otherwise
                 unspecified. A line shall then be read from <b>/dev/tty</b>.  If this  line  is  blank,  the  file  or
                 archive  member shall be skipped. If this line consists of a single period, the file or archive
                 member shall be processed with no modification to  its  name.  Otherwise,  its  name  shall  be
                 replaced  with the contents of the line. The <u>pax</u> utility shall immediately exit with a non-zero
                 exit status if end-of-file is encountered when reading a response  or  if  <b>/dev/tty</b>  cannot  be
                 opened for reading and writing.

                 The  results  of  extracting  a hard link to a file that has been renamed during extraction are
                 unspecified.

       <b>-k</b>        Prevent the overwriting of existing files.

       <b>-l</b>        (The letter ell.) In <b>copy</b> mode, hard links shall be made between  the  source  and  destination
                 file  hierarchies whenever possible. If specified in conjunction with <b>-H</b> or <b>-L</b>, when a symbolic
                 link is encountered, the hard link created in the destination file hierarchy shall  be  to  the
                 file  referenced by the symbolic link. If specified when neither <b>-H</b> nor <b>-L</b> is specified, when a
                 symbolic link is encountered, the implementation shall create a hard link to the symbolic  link
                 in the source file hierarchy or copy the symbolic link to the destination.

       <b>-L</b>        If  a  symbolic  link  referencing a file of type directory is specified on the command line or
                 encountered during the traversal of a file hierarchy, <u>pax</u>  shall  archive  the  file  hierarchy
                 rooted  in  the file referenced by the link, using the name of the link as the root of the file
                 hierarchy.  Otherwise, if a symbolic link referencing a file of any other file type  which  <u>pax</u>
                 can  normally archive is specified on the command line or encountered during the traversal of a
                 file hierarchy, <u>pax</u> shall archive the file referenced by the link, using the name of the  link.
                 The  default  behavior,  when  neither <b>-H</b> or <b>-L</b> are specified, shall be to archive the symbolic
                 link itself.

       <b>-n</b>        Select the first archive member that matches each <u>pattern</u> operand. No  more  than  one  archive
                 member  shall be matched for each pattern (although members of type directory shall still match
                 the file hierarchy rooted at that file).

       <b>-o</b> <u>options</u>
                 Provide information to the implementation to modify the algorithm  for  extracting  or  writing
                 files.  The  value  of  <u>options</u>  shall consist of one or more &lt;comma&gt;-separated keywords of the
                 form:

                     <u>keyword</u><b>[[</b>:<b>]</b>=<u>value</u><b>][</b>,<u>keyword</u><b>[[</b>:<b>]</b>=<u>value</u><b>]</b>, ...<b>]</b>

                 Some keywords apply only to certain file formats, as indicated with each  description.  Use  of
                 keywords that are inapplicable to the file format being processed produces undefined results.

                 Keywords  in  the <u>options</u> argument shall be a string that would be a valid portable filename as
                 described in the Base Definitions volume of  POSIX.1‐2017,  <u>Section</u>  <u>3.282</u>,  <u>Portable</u>  <u>Filename</u>
                 <u>Character</u> <u>Set</u>.

                 <b>Note:</b>     Keywords  are  not  expected  to  be  filenames,  merely to follow the same character
                           composition rules as portable filenames.

                 Keywords can be preceded with white space. The <u>value</u>  field  shall  consist  of  zero  or  more
                 characters; within <u>value</u>, the application shall precede any literal &lt;comma&gt; with a &lt;backslash&gt;,
                 which  shall  be  ignored,  but preserves the &lt;comma&gt; as part of <u>value</u>.  A &lt;comma&gt; as the final
                 character, or a &lt;comma&gt; followed solely by white space as  the  final  characters,  in  <u>options</u>
                 shall  be ignored. Multiple <b>-o</b> options can be specified; if keywords given to these multiple <b>-o</b>
                 options conflict, the keywords and values appearing later in command line sequence  shall  take
                 precedence  and  the earlier shall be silently ignored. The following keyword values of <u>options</u>
                 shall be supported for the file formats as indicated:

                 <b>delete</b>=<u>pattern</u>
                       (Applicable only to the <b>-x</b> <b>pax</b> format.) When used in <b>write</b> or <b>copy</b> mode, <u>pax</u>  shall  omit
                       from  extended  header records that it produces any keywords matching the string pattern.
                       When used in <b>read</b> or <b>list</b> mode, <u>pax</u> shall ignore any keywords matching the string pattern
                       in the extended header records. In both cases, matching  shall  be  performed  using  the
                       pattern  matching  notation  described  in  <u>Section</u>  <u>2.13.1</u>,  <u>Patterns</u>  <u>Matching</u> <u>a</u> <u>Single</u>
                       <u>Character</u> and <u>Section</u> <u>2.13.2</u>, <u>Patterns</u> <u>Matching</u> <u>Multiple</u> <u>Characters</u>.  For example:

                           -o <b>delete</b>=<u>security</u>.*

                       would suppress security-related information. See <u>pax</u> <u>Extended</u> <u>Header</u> for extended  header
                       record keyword usage.

                       When multiple <b>-odelete=pattern</b> options are specified, the patterns shall be additive; all
                       keywords  matching  the  specified  string patterns shall be omitted from extended header
                       records that <u>pax</u> produces.

                 <b>exthdr.name</b>=<u>string</u>
                       (Applicable only to the <b>-x</b> <b>pax</b> format.) This keyword allows user control  over  the  name
                       that  is  written into the <b>ustar</b> header blocks for the extended header produced under the
                       circumstances described in <u>pax</u> <u>Header</u> <u>Block</u>.  The name shall be the contents  of  <u>string</u>,
                       after the following character substitutions have been made:
                                        ┌───────────┬────────────────────────────────────────┐
                                        │  <u>string</u>   │                                        │
                                        │ <b>Includes:</b> │              <b>Replaced</b> <b>by:</b>              │
                                        ├───────────┼────────────────────────────────────────┤
                                        │ %d        │ The   directory   name  of  the  file, │
                                        │           │ equivalent  to  the  result   of   the │
                                        │           │ <u>dirname</u>   utility  on  the  translated │
                                        │           │ pathname.                              │
                                        │ %f        │ The filename of the  file,  equivalent │
                                        │           │ to  the result of the <u>basename</u> utility │
                                        │           │ on the translated pathname.            │
                                        │ %p        │ The process ID of the <u>pax</u> process.     │
                                        │ %%        │ A <b>'%'</b> character.                       │
                                        └───────────┴────────────────────────────────────────┘

                       Any other <b>'%'</b> characters in <u>string</u> produce undefined results.

                       If no <b>-o</b> <b>exthdr.name=string</b> is specified, <u>pax</u> shall use the following default value:

                           %d/PaxHeaders.%p/%f

                 <b>globexthdr.name</b>=<u>string</u>
                       (Applicable only to the <b>-x</b> <b>pax</b> format.)  When  used  in  <b>write</b>  or  <b>copy</b>  mode  with  the
                       appropriate  options,  <u>pax</u>  shall create global extended header records with <b>ustar</b> header
                       blocks that will be treated as regular files by previous versions of <u>pax</u>.   This  keyword
                       allows user control over the name that is written into the <b>ustar</b> header blocks for global
                       extended  header  records.  The name shall be the contents of string, after the following
                       character substitutions have been made:
                                        ┌───────────┬────────────────────────────────────────┐
                                        │  <u>string</u>   │                                        │
                                        │ <b>Includes:</b> │              <b>Replaced</b> <b>by:</b>              │
                                        ├───────────┼────────────────────────────────────────┤
                                        │ %n        │ An   integer   that   represents   the │
                                        │           │ sequence number of the global extended │
                                        │           │ header record in the archive, starting │
                                        │           │ at 1.                                  │
                                        │ %p        │ The process ID of the <u>pax</u> process.     │
                                        │ %%        │ A <b>'%'</b> character.                       │
                                        └───────────┴────────────────────────────────────────┘

                       Any other <b>'%'</b> characters in <u>string</u> produce undefined results.

                       If no <b>-o</b> <b>globexthdr.name=string</b> is specified, <u>pax</u> shall use the following default value:

                           $TMPDIR/GlobalHead.%p.%n

                       where  $<u>TMPDIR</u>  represents the value of the <u>TMPDIR</u> environment variable. If <u>TMPDIR</u> is not
                       set, <u>pax</u> shall use <b><a href="file:/tmp">/tmp</a></b>.

                 <b>invalid</b>=<u>action</u>
                       (Applicable only to the <b>-x</b> <b>pax</b> format.) This keyword allows user control over the  action
                       <u>pax</u>  takes  upon  encountering  values in an extended header record that, in <b>read</b> or <b>copy</b>
                       mode, are invalid in the destination hierarchy or, in <b>list</b> mode, cannot be written in the
                       codeset and current locale of the implementation. The following are invalid  values  that
                       shall be recognized by <u>pax</u>:

                       --  In  <b>read</b>  or  <b>copy</b>  mode,  a  filename or link name that contains character encodings
                           invalid in the destination hierarchy. (For example, the  name  may  contain  embedded
                           NULs.)

                       --  In <b>read</b> or <b>copy</b> mode, a filename or link name that is longer than the maximum allowed
                           in  the  destination  hierarchy  (for  either  a  pathname  component  or  the entire
                           pathname).

                       --  In <b>list</b> mode, any character string value (filename, link name, user name, and so  on)
                           that cannot be written in the codeset and current locale of the implementation.

                       The following mutually-exclusive values of the <u>action</u> argument are supported:

                       <b>binary</b>    In  <b>write</b>  mode,  <u>pax</u> shall generate a <b>hdrcharset</b>=<b>BINARY</b> extended header record
                                 for each file with a filename, link name, group name, owner name, or any  other
                                 field  in  an  extended  header  record  that cannot be translated to the UTF‐8
                                 codeset, allowing the archive to contain  the  files  with  unencoded  extended
                                 header  record values. In <b>read</b> or <b>copy</b> mode, <u>pax</u> shall use the values specified
                                 in the header without translation, regardless of whether this may overwrite  an
                                 existing  file with a valid name. In <b>list</b> mode, <u>pax</u> shall behave identically to
                                 the <b>bypass</b> action.

                       <b>bypass</b>    In <b>read</b> or <b>copy</b> mode, <u>pax</u> shall bypass the  file,  causing  no  change  to  the
                                 destination  hierarchy.   In  <b>list</b>  mode,  <u>pax</u>  shall write all requested valid
                                 values for the file, but its method for writing invalid values is unspecified.

                       <b>rename</b>    In <b>read</b> or <b>copy</b> mode, <u>pax</u> shall act as if the <b>-i</b> option were in effect for each
                                 file with invalid filename or link name values, allowing the user to provide  a
                                 replacement  name interactively.  In <b>list</b> mode, <u>pax</u> shall behave identically to
                                 the <b>bypass</b> action.

                       <b>UTF‐8</b>     When used in <b>read</b>, <b>copy</b>, or <b>list</b> mode and a filename, link name, owner name, or
                                 any other field in an extended header record cannot be translated from the  <b>pax</b>
                                 UTF‐8  codeset  format to the codeset and current locale of the implementation,
                                 <u>pax</u> shall use the actual UTF‐8 encoding for the name. If a <b>hdrcharset</b>  extended
                                 header  record  is in effect for this file, the character set specified by that
                                 record shall be used instead of UTF‐8. If a <b>hdrcharset</b>=<b>BINARY</b>  extended  header
                                 record is in effect for this file, no translation shall be performed.

                       <b>write</b>     In  <b>read</b>  or  <b>copy</b>  mode,  <u>pax</u>  shall  write  the  file,  translating the name,
                                 regardless of whether this may overwrite an existing file with a valid name. In
                                 <b>list</b> mode, <u>pax</u> shall behave identically to the <b>bypass</b> action.

                       If no <b>-o</b>  <b>invalid=option</b>  is  specified,  <u>pax</u>  shall  act  as  if  <b>-oinvalid=bypass</b>  were
                       specified.  Any  overwriting  of  existing  files  that  may be allowed by the <b>-oinvalid=</b>
                       actions shall be subject to permission (<b>-p</b>) and modification time (<b>-u</b>) restrictions,  and
                       shall be suppressed if the <b>-k</b> option is also specified.

                 <b>linkdata</b>
                       (Applicable  only to the <b>-x</b> <b>pax</b> format.) In <b>write</b> mode, <u>pax</u> shall write the contents of a
                       file to the archive even when that file is merely a hard link to a  file  whose  contents
                       have already been written to the archive.

                 <b>listopt</b>=<u>format</u>
                       This  keyword  specifies  the output format of the table of contents produced when the <b>-v</b>
                       option is specified in  <b>list</b>  mode.  See  <u>List</u>  <u>Mode</u>  <u>Format</u>  <u>Specifications</u>.   To  avoid
                       ambiguity,  the  <b>listopt=format</b>  shall  be  the  only or final <b>keyword=value</b> pair in a <b>-o</b>
                       option-argument; all  characters  in  the  remainder  of  the  option-argument  shall  be
                       considered  part  of  the  format  string.  When  multiple  <b>-olistopt=format</b>  options are
                       specified, the  format  strings  shall  be  considered  a  single,  concatenated  string,
                       evaluated in command line order.

                 <b>times</b>
                       (Applicable  only  to  the  <b>-x</b>  <u>pax</u>  format.)  When used in <b>write</b> or <b>copy</b> mode, <u>pax</u> shall
                       include <b>atime</b> and <b>mtime</b> extended header records for each file. See  <u>pax</u>  <u>Extended</u>  <u>Header</u>
                       <u>File</u> <u>Times</u>.

                 In  addition  to  these  keywords,  if  the <b>-x</b> <u>pax</u> format is specified, any of the keywords and
                 values defined in <u>pax</u> <u>Extended</u> <u>Header</u>, including implementation extensions, can be used  in  <b>-o</b>
                 option-arguments, in either of two modes:

                 <b>keyword</b>=<u>value</u>
                       When  used  in  <b>write</b>  or  <b>copy</b>  mode, these keyword/value pairs shall be included at the
                       beginning of the archive as <b>typeflag</b> <b>g</b> global extended header records. When used in  <b>read</b>
                       or <b>list</b> mode, these keyword/value pairs shall act as if they had been at the beginning of
                       the archive as <b>typeflag</b> <b>g</b> global extended header records.

                 <b>keyword</b>:=<u>value</u>
                       When  used  in <b>write</b> or <b>copy</b> mode, these keyword/value pairs shall be included as records
                       at the beginning of a <b>typeflag</b> <b>x</b> extended header for each file. (This shall be equivalent
                       to the &lt;equals-sign&gt; form except that it creates no <b>typeflag</b>  <b>g</b>  global  extended  header
                       records.)  When used in <b>read</b> or <b>list</b> mode, these keyword/value pairs shall act as if they
                       were included as records at the end of each extended header; thus,  they  shall  override
                       any  global  or  file-specific  extended  header  record  keywords of the same names. For
                       example, in the command:

                           pax -r -o "
                           gname:=mygroup,
                           " &lt;archive

                       the group name will be forced to a new value for all files read from the archive.

                 The precedence of <b>-o</b> keywords over various fields in the archive is described in  <u>pax</u>  <u>Extended</u>
                 <u>Header</u>  <u>Keyword</u>  <u>Precedence</u>.   If the <b>-o</b> <b>delete</b>=<u>pattern</u>, <b>-o</b> <b>keyword</b>=<u>value</u>, or <b>-o</b> <b>keyword</b>:=<u>value</u>
                 options are used to override or remove any extended header data needed  to  find  files  in  an
                 archive  (e.g., <b>-o</b> <b>delete=size</b> for a file whose size cannot be represented in a <b>ustar</b> header or
                 <b>-o</b> <b>size=100</b> for a file whose size is not 100 bytes), the behavior is undefined.

       <b>-p</b> <u>string</u> Specify one or more file characteristic options (privileges). The <u>string</u> option-argument  shall
                 be  a  string  specifying  file  characteristics to be retained or discarded on extraction. The
                 string shall consist of the specification characters <b>a</b>, <b>e</b>, <b>m</b>, <b>o</b>, and <b>p</b>.  Other  implementation-
                 defined  characters  can  be  included. Multiple characteristics can be concatenated within the
                 same string and multiple <b>-p</b>  options  can  be  specified.  The  meaning  of  the  specification
                 characters are as follows:

                 a     Do not preserve file access times.

                 e     Preserve  the  user  ID,  group  ID,  file  mode bits (see the Base Definitions volume of
                       POSIX.1‐2017, <u>Section</u> <u>3.169</u>, <u>File</u> <u>Mode</u> <u>Bits</u>), access time,  modification  time,  and  any
                       other implementation-defined file characteristics.

                 m     Do not preserve file modification times.

                 o     Preserve the user ID and group ID.

                 p     Preserve  the  file  mode  bits. Other implementation-defined file mode attributes may be
                       preserved.

                 In the preceding list, ``preserve'' indicates that an attribute stored in the archive shall  be
                 given to the extracted file, subject to the permissions of the invoking process. The access and
                 modification times of the file shall be preserved unless otherwise specified with the <b>-p</b> option
                 or not stored in the archive. All attributes that are not preserved shall be determined as part
                 of the normal file creation action (see <u>Section</u> <u>1.1.1.4</u>, <u>File</u> <u>Read</u>, <u>Write</u>, <u>and</u> <u>Creation</u>).

                 If  neither  the  <b>e</b> nor the <b>o</b> specification character is specified, or the user ID and group ID
                 are not preserved for any reason, <u>pax</u> shall not set the S_ISUID and S_ISGID bits  of  the  file
                 mode.

                 If  the  preservation  of any of these items fails for any reason, <u>pax</u> shall write a diagnostic
                 message to standard error. Failure to preserve these items shall affect the final exit  status,
                 but shall not cause the extracted file to be deleted.

                 If file characteristic letters in any of the <u>string</u> option-arguments are duplicated or conflict
                 with  each  other,  the  ones  given  last  shall  take  precedence.  For example, if <b>-p</b> <b>eme</b> is
                 specified, file modification times are preserved.

       <b>-s</b> <u>replstr</u>
                 Modify file or archive member names  named  by  <u>pattern</u>  or  <u>file</u>  operands  according  to  the
                 substitution  expression  <u>replstr</u>,  using  the  syntax  of  the  <u>ed</u>  utility.  The  concepts of
                 ``address'' and ``line'' are meaningless in the context of the <u>pax</u> utility, and  shall  not  be
                 supplied. The format shall be:

                     -s /<u>old</u>/<u>new</u>/<b>[</b>gp<b>]</b>

                 where  as  in  <u>ed</u>,  <u>old</u>  is a basic regular expression and <u>new</u> can contain an &lt;ampersand&gt;, <b>'\n'</b>
                 (where <u>n</u> is a digit) back-references, or subexpression matching. The <u>old</u> string shall  also  be
                 permitted to contain &lt;newline&gt; characters.

                 Any non-null character can be used as a delimiter (<b>'/'</b> shown here). Multiple <b>-s</b> expressions can
                 be  specified;  the  expressions  shall be applied in the order specified, terminating with the
                 first successful substitution.  The optional trailing <b>'g'</b> is as defined in the <u>ed</u> utility.  The
                 optional  trailing  <b>'p'</b>  shall  cause successful substitutions to be written to standard error.
                 File or archive member names that substitute to the empty string shall be ignored when  reading
                 and writing archives.

       <b>-t</b>        When  reading  files  from  the  file  system,  and if the user has the permissions required by
                 <u>utime</u>() to do so, set the access time of each file read to the access time that it  had  before
                 being read by <u>pax</u>.

       <b>-u</b>        Ignore  files  that are older (having a less recent file modification time) than a pre-existing
                 file or archive member with the same name.  In <b>read</b> mode, an archive member with the same  name
                 as  a  file in the file system shall be extracted if the archive member is newer than the file.
                 In <b>write</b> mode, an archive file member with the same name as a file in the file system shall  be
                 superseded  if  the  file  is  newer  than the archive member. If <b>-a</b> is also specified, this is
                 accomplished by appending to  the  archive;  otherwise,  it  is  unspecified  whether  this  is
                 accomplished by actual replacement in the archive or by appending to the archive. In <b>copy</b> mode,
                 the  file in the destination hierarchy shall be replaced by the file in the source hierarchy or
                 by a link to the file in the source hierarchy if the file in the source hierarchy is newer.

       <b>-v</b>        In <b>list</b> mode, produce a verbose table of contents (see the STDOUT section).   Otherwise,  write
                 archive member pathnames to standard error (see the STDERR section).

       <b>-x</b> <u>format</u> Specify the output archive format. The <u>pax</u> utility shall support the following formats:

                 <b>cpio</b>      The  <b>cpio</b>  interchange  format;  see  the  EXTENDED  DESCRIPTION section. The default
                           <u>blocksize</u> for this  format  for  character  special  archive  files  shall  be  5120.
                           Implementations  shall  support all <u>blocksize</u> values less than or equal to 32256 that
                           are multiples of 512.

                 <b>pax</b>       The <b>pax</b> interchange  format;  see  the  EXTENDED  DESCRIPTION  section.  The  default
                           <u>blocksize</u>  for  this  format  for  character  special  archive  files  shall be 5120.
                           Implementations shall support all <u>blocksize</u> values less than or equal to  32256  that
                           are multiples of 512.

                 <b>ustar</b>     The  <b>tar</b>  interchange  format;  see  the  EXTENDED  DESCRIPTION  section. The default
                           <u>blocksize</u> for this format  for  character  special  archive  files  shall  be  10240.
                           Implementations  shall  support all <u>blocksize</u> values less than or equal to 32256 that
                           are multiples of 512.

                 Implementation-defined formats shall specify a default block size as well as  any  other  block
                 sizes supported for character special archive files.

                 Any attempt to append to an archive file in a format different from the existing archive format
                 shall cause <u>pax</u> to exit immediately with a non-zero exit status.

       <b>-X</b>        When  traversing  the  file  hierarchy  specified  by  a  pathname,  <u>pax</u> shall not descend into
                 directories that have a different device ID  (<u>st_dev</u>;  see  the  System  Interfaces  volume  of
                 POSIX.1‐2017, <u>stat</u>()).

       Specifying more than one of the mutually-exclusive options <b>-H</b> and <b>-L</b> shall not be considered an error and
       the last option specified shall determine the behavior of the utility.

       The  options  that  operate  on  the names of files or archive members (<b>-c</b>, <b>-i</b>, <b>-n</b>, <b>-s</b>, <b>-u</b>, and <b>-v</b>) shall
       interact as follows. In <b>read</b> mode, the archive members shall be  selected  based  on  the  user-specified
       <u>pattern</u>  operands as modified by the <b>-c</b>, <b>-n</b>, and <b>-u</b> options. Then, any <b>-s</b> and <b>-i</b> options shall modify, in
       that order, the names of the selected files.  The <b>-v</b>  option  shall  write  names  resulting  from  these
       modifications.

       In  <b>write</b>  mode,  the files shall be selected based on the user-specified pathnames as modified by the <b>-n</b>
       and <b>-u</b> options. Then, any <b>-s</b> and <b>-i</b> options shall modify, in that order,  the  names  of  these  selected
       files.  The <b>-v</b> option shall write names resulting from these modifications.

       If  both  the  <b>-u</b> and <b>-n</b> options are specified, <u>pax</u> shall not consider a file selected unless it is newer
       than the file to which it is compared.

   <b>List</b> <b>Mode</b> <b>Format</b> <b>Specifications</b>
       In <b>list</b> mode with the <b>-o</b> <b>listopt=format</b> option, the <u>format</u> argument shall be applied  for  each  selected
       file.  The  <u>pax</u> utility shall append a &lt;newline&gt; to the <b>listopt</b> output for each selected file. The <u>format</u>
       argument shall be used as the <u>format</u> string described in the Base  Definitions  volume  of  POSIX.1‐2017,
       <u>Chapter</u>  <u>5</u>,  <u>File</u>  <u>Format</u> <u>Notation</u>, with the exceptions 1. through 6. defined in the EXTENDED DESCRIPTION
       section of <u>printf</u>, plus the following exceptions:

       7.    The sequence (<u>keyword</u>) can occur before a format conversion specifier. The conversion  argument  is
             defined by the value of <u>keyword</u>.  The implementation shall support the following keywords:

             --  Any  of the Field Name entries in <u>Table</u> <u>4-14,</u> <u>ustar</u> <u>Header</u> <u>Block</u> and <u>Table</u> <u>4-16,</u> <u>Octet-Oriented</u>
                 <u>cpio</u> <u>Archive</u> <u>Entry</u>.  The implementation may support the <u>cpio</u> keywords without the leading <b>c_</b> in
                 addition to the form required by <u>Table</u> <u>4-16,</u> <u>Octet-Oriented</u> <u>cpio</u> <u>Archive</u> <u>Entry</u>.

             --  Any keyword defined for the extended header in <u>pax</u> <u>Extended</u> <u>Header</u>.

             --  Any keyword provided as an implementation-defined extension within the extended header  defined
                 in <u>pax</u> <u>Extended</u> <u>Header</u>.

             For example, the sequence <b>"%(charset)s"</b> is the string value of the name of the character set in the
             extended header.

             The  result  of the keyword conversion argument shall be the value from the applicable header field
             or extended header, without any trailing NULs.

             All keyword values used as conversion arguments shall be translated from  the  UTF‐8  encoding  (or
             alternative  encoding  specified  by  any  <b>hdrcharset</b>  extended header record) to the character set
             appropriate for the local file system, user database, and so on, as applicable.

       8.    An additional conversion specifier character, <b>T</b>, shall be used  to  specify  time  formats.  The  <b>T</b>
             conversion specifier character can be preceded by the sequence (<u>keyword=subformat</u>), where <u>subformat</u>
             is  a  date  format as defined by <u>date</u> operands. The default <u>keyword</u> shall be <b>mtime</b> and the default
             subformat shall be:

                 %b %e %H:%M %Y

       9.    An additional conversion specifier character, <b>M</b>, shall be used to specify the file mode  string  as
             defined  in  <u>ls</u>  Standard  Output.  If  (<u>keyword</u>)  is  omitted, the <b>mode</b> keyword shall be used. For
             example, <b>%.1M</b> writes the single character corresponding to the &lt;<u>entry</u> <u>type</u>&gt;  field  of  the  <u>ls</u>  <b>-l</b>
             command.

       10.   An  additional  conversion specifier character, <b>D</b>, shall be used to specify the device for block or
             special files, if applicable, in an implementation-defined format. If not applicable, and (<u>keyword</u>)
             is specified, then this conversion shall be equivalent  to  %(<u>keyword</u>)u.  If  not  applicable,  and
             (<u>keyword</u>) is omitted, then this conversion shall be equivalent to &lt;space&gt;.

       11.   An  additional  conversion  specifier  character,  <b>F</b>,  shall  be  used to specify a pathname. The <b>F</b>
             conversion character can be preceded by a sequence of &lt;comma&gt;-separated keywords:

                 (<u>keyword</u><b>[</b>,<u>keyword</u><b>]</b> ... )

             The values for all the keywords that are non-null shall be concatenated together, each separated by
             a <b>'/'</b>.  The default shall be (<b>path</b>) if the keyword <b>path</b> is defined; otherwise, the default shall be
             (<b>prefix</b>,<b>name</b>).

       12.   An additional conversion specifier  character,  <b>L</b>,  shall  be  used  to  specify  a  symbolic  link
             expansion. If the current file is a symbolic link, then <b>%L</b> shall expand to:

                 "%s -&gt; %s", &lt;<u>value</u> <u>of</u> <u>keyword</u>&gt;, &lt;<u>contents</u> <u>of</u> <u>link</u>&gt;

             Otherwise, the <b>%L</b> conversion specification shall be the equivalent of <b>%F</b>.

</pre><h4><b>OPERANDS</b></h4><pre>
       The following operands shall be supported:

       <u>directory</u> The destination directory pathname for <b>copy</b> mode.

       <u>file</u>      A pathname of a file to be copied or archived.

       <u>pattern</u>   A  pattern  matching  one  or more pathnames of archive members. A pattern must be given in the
                 name-generating notation of the pattern matching notation in  <u>Section</u>  <u>2.13</u>,  <u>Pattern</u>  <u>Matching</u>
                 <u>Notation</u>,  including the filename expansion rules in <u>Section</u> <u>2.13.3</u>, <u>Patterns</u> <u>Used</u> <u>for</u> <u>Filename</u>
                 <u>Expansion</u>.  The default, if no <u>pattern</u> is specified, is to select all members in the archive.

</pre><h4><b>STDIN</b></h4><pre>
       In <b>write</b> mode, the standard input shall be used only if no <u>file</u> operands are specified.  It  shall  be  a
       file containing a list of pathnames, each terminated by a &lt;newline&gt; character.

       In <b>list</b> and <b>read</b> modes, if <b>-f</b> is not specified, the standard input shall be an archive file.

       Otherwise, the standard input shall not be used.

</pre><h4><b>INPUT</b> <b>FILES</b></h4><pre>
       The  input  file  named  by  the <u>archive</u> option-argument, or standard input when the archive is read from
       there, shall be a file formatted according to one of  the  specifications  in  the  EXTENDED  DESCRIPTION
       section or some other implementation-defined format.

       The file <b>/dev/tty</b> shall be used to write prompts and read responses.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The following environment variables shall affect the execution of <u>pax</u>:

       <u>LANG</u>      Provide a default value for the internationalization variables that are unset or null. (See the
                 Base  Definitions  volume  of  POSIX.1‐2017,  <u>Section</u>  <u>8.2</u>,  <u>Internationalization</u> <u>Variables</u> the
                 precedence  of  internationalization  variables  used  to  determine  the  values   of   locale
                 categories.)

       <u>LC_ALL</u>    If  set  to a non-empty string value, override the values of all the other internationalization
                 variables.

       <u>LC_COLLATE</u>
                 Determine the locale for the behavior  of  ranges,  equivalence  classes,  and  multi-character
                 collating  elements used in the pattern matching expressions for the <u>pattern</u> operand, the basic
                 regular expression for the <b>-s</b> option, and the  extended  regular  expression  defined  for  the
                 <b>yesexpr</b> locale keyword in the <u>LC_MESSAGES</u> category.

       <u>LC_CTYPE</u>  Determine  the  locale  for the interpretation of sequences of bytes of text data as characters
                 (for example, single-byte as opposed to multi-byte characters in arguments  and  input  files),
                 the  behavior  of  character  classes  used  in the extended regular expression defined for the
                 <b>yesexpr</b> locale keyword in the <u>LC_MESSAGES</u> category, and pattern matching.

       <u>LC_MESSAGES</u>
                 Determine the locale used to process affirmative responses, and the locale used to  affect  the
                 format and contents of diagnostic messages and prompts written to standard error.

       <u>LC_TIME</u>   Determine the format and contents of date and time strings when the <b>-v</b> option is specified.

       <u>NLSPATH</u>   Determine the location of message catalogs for the processing of <u>LC_MESSAGES</u>.

       <u>TMPDIR</u>    Determine the pathname that provides part of the default global extended header record file, as
                 described for the <b>-o</b> <b>globexthdr=</b> keyword in the OPTIONS section.

       <u>TZ</u>        Determine the timezone used to calculate date and time strings when the <b>-v</b> option is specified.
                 If <u>TZ</u> is unset or null, an unspecified default timezone shall be used.

</pre><h4><b>ASYNCHRONOUS</b> <b>EVENTS</b></h4><pre>
       Default.

</pre><h4><b>STDOUT</b></h4><pre>
       In  <b>write</b>  mode,  if <b>-f</b> is not specified, the standard output shall be the archive formatted according to
       one of the specifications in the EXTENDED  DESCRIPTION  section,  or  some  other  implementation-defined
       format (see <b>-x</b> <u>format</u>).

       In <b>list</b> mode, when the <b>-olistopt</b>=<u>format</u> has been specified, the selected archive members shall be written
       to  standard  output  using  the  format  described  under <u>List</u> <u>Mode</u> <u>Format</u> <u>Specifications</u>.  In <b>list</b> mode
       without the <b>-olistopt</b>=<u>format</u> option, the table of contents of  the  selected  archive  members  shall  be
       written to standard output using the following format:

           "%s\n", &lt;<u>pathname</u>&gt;

       If  the  <b>-v</b> option is specified in <b>list</b> mode, the table of contents of the selected archive members shall
       be written to standard output using the following formats.

       For pathnames representing hard links to previous members of the archive:

           "%s == %s\n", &lt;<u>ls</u> -l <u>listing</u>&gt;, &lt;<u>linkname</u>&gt;

       For all other pathnames:

           "%s\n", &lt;<u>ls</u> -l <u>listing</u>&gt;

       where &lt;<u>ls</u> -l <u>listing</u>&gt; shall be the format specified by the <u>ls</u> utility with the <b>-l</b>  option.  When  writing
       pathnames  in  this format, it is unspecified what is written for fields for which the underlying archive
       format does not have the correct information, although the correct  number  of  &lt;blank&gt;-separated  fields
       shall be written.

       In <b>list</b> mode, standard output shall not be buffered more than a pathname (plus any associated information
       and a &lt;newline&gt; terminator) at a time.

</pre><h4><b>STDERR</b></h4><pre>
       If  <b>-v</b>  is  specified  in  <b>read</b>,  <b>write</b>, or <b>copy</b> modes, <u>pax</u> shall write the pathnames it processes to the
       standard error output using the following format:

           "%s\n", &lt;<u>pathname</u>&gt;

       These pathnames shall be written as soon as processing is begun on the file or archive member, and  shall
       be  flushed  to  standard error. The trailing &lt;newline&gt;, which shall not be buffered, is written when the
       file has been read or written.

       If the <b>-s</b> option is specified, and the replacement string has a  trailing  <b>'p'</b>,  substitutions  shall  be
       written to standard error in the following format:

           "%s &gt;&gt; %s\n", &lt;<u>original</u> <u>pathname</u>&gt;, &lt;<u>new</u> <u>pathname</u>&gt;

       In  all  operating  modes  of  <u>pax</u>,  optional messages of unspecified format concerning the input archive
       format and volume number, the number of files,  blocks,  volumes,  and  media  parts  as  well  as  other
       diagnostic messages may be written to standard error.

       In  all  formats,  for  both  standard  output  and  standard  error, it is unspecified how non-printable
       characters in pathnames or link names are written.

       When using the <b>-xpax</b> archive format, if a filename, link name, group name, owner name, or any other field
       in an extended header record cannot be translated between the codeset in use  for  that  extended  header
       record  and  the  character  set  of the current locale, <u>pax</u> shall write a diagnostic message to standard
       error, shall process the file as described for the <b>-o</b> <b>invalid=</b> option, and then shall continue processing
       with the next file.

</pre><h4><b>OUTPUT</b> <b>FILES</b></h4><pre>
       In <b>read</b> mode, the extracted output files shall be of the archived file type.  In <b>copy</b>  mode,  the  copied
       output  files  shall  be  the  type  of  the  file  being  copied.  In either mode, existing files in the
       destination hierarchy shall be overwritten only when all permission (<b>-p</b>),  modification  time  (<b>-u</b>),  and
       invalid-value (<b>-oinvalid=</b>) tests allow it.

       In <b>write</b> mode, the output file named by the <b>-f</b> option-argument shall be a file formatted according to one
       of the specifications in the EXTENDED DESCRIPTION section, or some other implementation-defined format.

</pre><h4><b>EXTENDED</b> <b>DESCRIPTION</b></h4><pre>
   <b>pax</b> <b>Interchange</b> <b>Format</b>
       A  <u>pax</u>  archive  tape or file produced in the <b>-xpax</b> format shall contain a series of blocks. The physical
       layout of the archive shall be identical to the <b>ustar</b> format described in <u>ustar</u> <u>Interchange</u> <u>Format</u>.  Each
       file archived shall be represented by the following sequence:

        *  An optional header block with extended header records. This header block is of the form described  in
           <u>pax</u>  <u>Header</u>  <u>Block</u>,  with  a <u>typeflag</u> value of <b>x</b> or <b>g</b>.  The extended header records, described in <u>pax</u>
           <u>Extended</u> <u>Header</u>, shall be included as the data for this header block.

        *  A header block that describes the file. Any fields in the preceding optional  extended  header  shall
           override the associated fields in this header block for this file.

        *  Zero or more blocks that contain the contents of the file.

       At  the  end of the archive file there shall be two 512-byte blocks filled with binary zeros, interpreted
       as an end-of-archive indicator.

       A schematic of an example archive with global extended header records and two actual files  is  shown  in
       <u>Figure</u>  <u>4-1,</u>  <u>pax</u> <u>Format</u> <u>Archive</u> <u>Example</u>.  In the example, the second file in the archive has no extended
       header preceding it, presumably because it has no need for extended attributes.

                                        <b>Figure</b> <b>4-1:</b> <b>pax</b> <b>Format</b> <b>Archive</b> <b>Example</b>

   <b>pax</b> <b>Header</b> <b>Block</b>
       The <b>pax</b> header block shall be identical to the <b>ustar</b> header block described in <u>ustar</u> <u>Interchange</u>  <u>Format</u>,
       except that two additional <u>typeflag</u> values are defined:

       x     Represents  extended header records for the following file in the archive (which shall have its own
             <b>ustar</b> header block). The format of these extended header records  shall  be  as  described  in  <u>pax</u>
             <u>Extended</u> <u>Header</u>.

       g     Represents  global  extended  header  records for the following files in the archive. The format of
             these extended header records shall be as described in  <u>pax</u>  <u>Extended</u>  <u>Header</u>.   Each  value  shall
             affect all subsequent files that do not override that value in their own extended header record and
             until  another  global  extended  header record is reached that provides another value for the same
             field. The <u>typeflag</u> <b>g</b> global headers should not be used with interchange media  that  could  suffer
             partial data loss in transporting the archive.

       For  both  of these types, the <u>size</u> field shall be the size of the extended header records in octets. The
       other fields in the header block are not meaningful to this version of the <u>pax</u> utility. However, if  this
       archive is read by a <u>pax</u> utility conforming to the ISO POSIX‐2:1993 standard, the header block fields are
       used  to create a regular file that contains the extended header records as data. Therefore, header block
       field values should be selected to provide reasonable file access to this regular file.

       A further difference from the <b>ustar</b> header block is that data blocks for files of <u>typeflag</u> 1  (the  digit
       one)  (hard  link)  may  be  included, which means that the size field may be greater than zero. Archives
       created by <u>pax</u> <b>-o</b> <b>linkdata</b> shall include these data blocks with the hard links.

   <b>pax</b> <b>Extended</b> <b>Header</b>
       A <b>pax</b> extended header contains values that are inappropriate  for  the  <b>ustar</b>  header  block  because  of
       limitations  in  that  format:  fields  requiring  a  character encoding other than that described in the
       ISO/IEC 646:1991 standard, fields representing file attributes not described in  the  <b>ustar</b>  header,  and
       fields  whose format or length do not fit the requirements of the <b>ustar</b> header. The values in an extended
       header add attributes to the following file (or files; see the  description  of  the  <u>typeflag</u>  <b>g</b>  header
       block)  or  override  values  in  the  following  header  block(s), as indicated in the following list of
       keywords.

       An extended header shall consist of one or more records, each constructed as follows:

           "%d %s=%s\n", &lt;<u>length</u>&gt;, &lt;<u>keyword</u>&gt;, &lt;<u>value</u>&gt;

       The extended header records shall  be  encoded  according  to  the  ISO/IEC 10646‐1:2000  standard  UTF‐8
       encoding.  The  &lt;<u>length</u>&gt;  field,  &lt;blank&gt;,  &lt;equals-sign&gt;,  and  &lt;newline&gt;  shown shall be limited to the
       portable character set, as encoded in UTF‐8. The &lt;<u>keyword</u>&gt; fields  can  be  any  UTF‐8  characters.   The
       &lt;<u>length</u>&gt;  field  shall  be  the  decimal  length  of  the extended header record in octets, including the
       trailing &lt;newline&gt;.  If there is a <b>hdrcharset</b> extended header in effect for a file, the <u>value</u>  field  for
       any  <b>gname</b>,  <b>linkpath</b>,  <b>path</b>,  and <b>uname</b> extended header records shall be encoded using the character set
       specified by the <b>hdrcharset</b> extended header record; otherwise, the <u>value</u> field  shall  be  encoded  using
       UTF‐8. The <u>value</u> field for all other keywords specified by POSIX.1‐2008 shall be encoded using UTF‐8.

       The  &lt;<u>keyword</u>&gt;  field  shall  be  one  of the entries from the following list or a keyword provided as an
       implementation extension.  Keywords consisting entirely of lowercase letters,  digits,  and  periods  are
       reserved  for  future  standardization.  A keyword shall not include an &lt;equals-sign&gt;.  (In the following
       list, the notations ``file(s)'' or ``block(s)'' is  used  to  acknowledge  that  a  keyword  affects  the
       following  single  file after a <u>typeflag</u> <b>x</b> extended header, but possibly multiple files after <u>typeflag</u> <b>g</b>.
       Any requirements in the list for <u>pax</u> to include a record when in <b>write</b> or <b>copy</b> mode shall apply only when
       such a record has not already been provided through the use of the <b>-o</b> option. When used in <b>copy</b> mode, <u>pax</u>
       shall behave as if an archive  had  been  created  with  applicable  extended  header  records  and  then
       extracted.)

       <b>atime</b>     The  file access time for the following file(s), equivalent to the value of the <u>st_atime</u> member
                 of the <b>stat</b> structure for a file, as described by the <u>stat</u>() function. The access time shall be
                 restored if the process has appropriate privileges required to do so. The format of the &lt;<u>value</u>&gt;
                 shall be as described in <u>pax</u> <u>Extended</u> <u>Header</u> <u>File</u> <u>Times</u>.

       <b>charset</b>   The name of the character set used to encode the data in the following file(s). The entries  in
                 the  following table are defined to refer to known standards; additional names may be agreed on
                 between the originator and recipient.
                                  ┌─────────────────────────┬───────────────────────────────┐
                                  │         <b>&lt;value&gt;</b>         │        <b>Formal</b> <b>Standard</b>        │
                                  ├─────────────────────────┼───────────────────────────────┤
                                  │ ISO-IR 646 1990         │ ISO/IEC 646:1990              │
                                  │ ISO-IR 8859 1 1998      │ ISO/IEC 8859‐1:1998           │
                                  │ ISO-IR 8859 2 1999      │ ISO/IEC 8859‐2:1999           │
                                  │ ISO-IR 8859 3 1999      │ ISO/IEC 8859‐3:1999           │
                                  │ ISO-IR 8859 4 1998      │ ISO/IEC 8859‐4:1998           │
                                  │ ISO-IR 8859 5 1999      │ ISO/IEC 8859‐5:1999           │
                                  │ ISO-IR 8859 6 1999      │ ISO/IEC 8859‐6:1999           │
                                  │ ISO-IR 8859 7 1987      │ ISO/IEC 8859‐7:1987           │
                                  │ ISO-IR 8859 8 1999      │ ISO/IEC 8859‐8:1999           │
                                  │ ISO-IR 8859 9 1999      │ ISO/IEC 8859‐9:1999           │
                                  │ ISO-IR 8859 10 1998     │ ISO/IEC 8859‐10:1998          │
                                  │ ISO-IR 8859 13 1998     │ ISO/IEC 8859‐13:1998          │
                                  │ ISO-IR 8859 14 1998     │ ISO/IEC 8859‐14:1998          │
                                  │ ISO-IR 8859 15 1999     │ ISO/IEC 8859‐15:1999          │
                                  │ ISO-IR 10646 2000       │ ISO/IEC 10646:2000            │
                                  │ ISO-IR 10646 2000 UTF-8 │ ISO/IEC 10646, UTF-8 encoding │
                                  │ BINARY                  │ None.                         │
                                  └─────────────────────────┴───────────────────────────────┘

                 The encoding is included in an extended header for  information  only;  when  <u>pax</u>  is  used  as
                 described  in  POSIX.1‐2008,  it shall not translate the file data into any other encoding. The
                 <b>BINARY</b> entry indicates unencoded binary data.

                 When used in <b>write</b> or <b>copy</b> mode, it is implementation-defined whether <u>pax</u>  includes  a  <b>charset</b>
                 extended header record for a file.

       <b>comment</b>   A  series of characters used as a comment. All characters in the &lt;<u>value</u>&gt; field shall be ignored
                 by <u>pax</u>.

       <b>gid</b>       The group ID of the group that owns the file, expressed as a decimal number using  digits  from
                 the ISO/IEC 646:1991 standard. This record shall override the <u>gid</u> field in the following header
                 block(s).  When  used in <b>write</b> or <b>copy</b> mode, <u>pax</u> shall include a <u>gid</u> extended header record for
                 each file whose group ID is greater than 2097151 (octal 7777777).

       <b>gname</b>     The group of the file(s), formatted as a group name in the group database.  This  record  shall
                 override the <u>gid</u> and <u>gname</u> fields in the following header block(s), and any <u>gid</u> extended header
                 record.  When  used in <b>read</b>, <b>copy</b>, or <b>list</b> mode, <u>pax</u> shall translate the name from the encoding
                 in the header record to the character set appropriate for the group database on  the  receiving
                 system.  If  any  of  the  characters  cannot be translated, and if neither the <b>-oinvalid=UTF‐8</b>
                 option nor the <b>-oinvalid=binary</b> option is specified, the  results  are  implementation-defined.
                 When used in <b>write</b> or <b>copy</b> mode, <u>pax</u> shall include a <b>gname</b> extended header record for each file
                 whose  group  name  cannot  be represented entirely with the letters and digits of the portable
                 character set.

       <b>hdrcharset</b>
                 The name of the character set used to encode the value field of the <b>gname</b>, <b>linkpath</b>, <b>path</b>,  and
                 <b>uname</b>  <u>pax</u>  extended header records. The entries in the following table are defined to refer to
                 known standards; additional names may be agreed between the originator and the recipient.
                                  ┌─────────────────────────┬───────────────────────────────┐
                                  │         <b>&lt;value&gt;</b>         │        <b>Formal</b> <b>Standard</b>        │
                                  ├─────────────────────────┼───────────────────────────────┤
                                  │ ISO-IR 10646 2000 UTF-8 │ ISO/IEC 10646, UTF-8 encoding │
                                  │ BINARY                  │ None.                         │
                                  └─────────────────────────┴───────────────────────────────┘

                 If no <b>hdrcharset</b> extended header record is specified, the default character set used to  encode
                 all  values  in  extended  header  records  shall  be  the  ISO/IEC 10646‐1:2000 standard UTF‐8
                 encoding.

                 The <b>BINARY</b> entry indicates that all values recorded in extended headers for affected files  are
                 unencoded binary data from the underlying system.

       <b>linkpath</b>  The  pathname  of  a link being created to another file, of any type, previously archived. This
                 record shall override the <u>linkname</u> field in the following <b>ustar</b> header block(s). The  following
                 <b>ustar</b>  header  block  shall  determine  the  type of link created. If <u>typeflag</u> of the following
                 header block is 1, it shall be a hard link. If <u>typeflag</u> is 2, it shall be a symbolic  link  and
                 the  <b>linkpath</b> value shall be the contents of the symbolic link. The <u>pax</u> utility shall translate
                 the name of the link (contents of the symbolic link) from the encoding in  the  header  to  the
                 character set appropriate for the local file system. When used in <b>write</b> or <b>copy</b> mode, <u>pax</u> shall
                 include  a  <b>linkpath</b>  extended header record for each link whose pathname cannot be represented
                 entirely with the members of the portable character set other than NUL.

       <b>mtime</b>     The file modification time of the following file(s), equivalent to the value  of  the  <u>st_mtime</u>
                 member of the <b>stat</b> structure for a file, as described in the <u>stat</u>() function. This record shall
                 override  the  <u>mtime</u>  field  in  the  following header block(s). The modification time shall be
                 restored if the process has appropriate privileges required to do so. The format of the &lt;<u>value</u>&gt;
                 shall be as described in <u>pax</u> <u>Extended</u> <u>Header</u> <u>File</u> <u>Times</u>.

       <b>path</b>      The pathname of the following file(s). This record shall override the <u>name</u> and <u>prefix</u> fields in
                 the following header block(s). The <u>pax</u> utility shall translate the pathname of  the  file  from
                 the encoding in the header to the character set appropriate for the local file system.

                 When  used in <b>write</b> or <b>copy</b> mode, <u>pax</u> shall include a <u>path</u> extended header record for each file
                 whose pathname cannot be represented entirely with the members of the  portable  character  set
                 other than NUL.

       <b>realtime.</b><u>any</u>
                 The keywords prefixed by ``realtime.'' are reserved for future standardization.

       <b>security.</b><u>any</u>
                 The keywords prefixed by ``security.'' are reserved for future standardization.

       <b>size</b>      The  size  of  the  file  in  octets,  expressed  as  a  decimal  number  using digits from the
                 ISO/IEC 646:1991 standard. This record shall override the <u>size</u> field in  the  following  header
                 block(s).  When used in <b>write</b> or <b>copy</b> mode, <u>pax</u> shall include a <u>size</u> extended header record for
                 each file with a size value greater than 8589934591 (octal 77777777777).

       <b>uid</b>       The user ID  of  the  file  owner,  expressed  as  a  decimal  number  using  digits  from  the
                 ISO/IEC 646:1991  standard.  This  record  shall override the <u>uid</u> field in the following header
                 block(s). When used in <b>write</b> or <b>copy</b> mode, <u>pax</u> shall include a <u>uid</u> extended header  record  for
                 each file whose owner ID is greater than 2097151 (octal 7777777).

       <b>uname</b>     The  owner of the following file(s), formatted as a user name in the user database. This record
                 shall override the <u>uid</u> and <u>uname</u> fields in the following header block(s), and any <u>uid</u>  extended
                 header  record.  When  used  in <b>read</b>, <b>copy</b>, or <b>list</b> mode, <u>pax</u> shall translate the name from the
                 encoding in the header record to the character set appropriate for the  user  database  on  the
                 receiving  system.  If  any  of  the  characters  cannot  be  translated,  and  if  neither the
                 <b>-oinvalid=UTF‐8</b>  option  nor  the  <b>-oinvalid=binary</b>  option  is  specified,  the  results   are
                 implementation-defined.   When  used  in <b>write</b> or <b>copy</b> mode, <u>pax</u> shall include a <b>uname</b> extended
                 header record for each file whose user name cannot be represented entirely with the letters and
                 digits of the portable character set.

       If the &lt;<u>value</u>&gt; field is zero length, it shall delete any header block field, previously entered  extended
       header value, or global extended header value of the same name.

       If  a  keyword  in  an  extended  header  record  (or  in  a  <b>-o</b>  option-argument) overrides or deletes a
       corresponding field in the <b>ustar</b> header block, <u>pax</u> shall ignore the contents of that header block field.

       Unlike the <b>ustar</b> header block fields, NULs shall not delimit &lt;<u>value</u>&gt;s; all characters within the  &lt;<u>value</u>&gt;
       field  shall  be  considered data for the field. None of the length limitations of the <b>ustar</b> header block
       fields in <u>Table</u> <u>4-14,</u> <u>ustar</u> <u>Header</u> <u>Block</u> shall apply to the extended header records.

   <b>pax</b> <b>Extended</b> <b>Header</b> <b>Keyword</b> <b>Precedence</b>
       This section describes the precedence in which the various header records and  fields  and  command  line
       options  are selected to apply to a file in the archive. When <u>pax</u> is used in <b>read</b> or <b>list</b> modes, it shall
       determine a file attribute in the following sequence:

        1. If <b>-odelete=keyword-prefix</b> is used, the affected attributes shall be  determined  from  step  7.,  if
           applicable, or ignored otherwise.

        2. If <b>-o</b><u>keyword</u>:= is used, the affected attributes shall be ignored.

        3. If <b>-okeyword:=value</b> is used, the affected attribute shall be assigned the value.

        4. If  there  is  a  <u>typeflag</u>  <b>x</b>  extended  header  record, the affected attribute shall be assigned the
           &lt;<u>value</u>&gt;. When extended header records  conflict,  the  last  one  given  in  the  header  shall  take
           precedence.

        5. If <b>-okeyword=value</b> is used, the affected attribute shall be assigned the value.

        6. If  there is a <u>typeflag</u> <b>g</b> global extended header record, the affected attribute shall be assigned the
           &lt;<u>value</u>&gt;. When global extended header records conflict, the last one given in the global header  shall
           take precedence.

        7. Otherwise, the attribute shall be determined from the <b>ustar</b> header block.

   <b>pax</b> <b>Extended</b> <b>Header</b> <b>File</b> <b>Times</b>
       The  <u>pax</u>  utility  shall  write  an  <b>mtime</b>  record  for  each  file  in <b>write</b> or <b>copy</b> modes if the file's
       modification time cannot be represented exactly in the <b>ustar</b> header logical  record  described  in  <u>ustar</u>
       <u>Interchange</u>  <u>Format</u>.   This  can  occur  if  the time is out of <b>ustar</b> range, or if the file system of the
       underlying implementation supports non-integer time granularities and the time is not an integer. All  of
       these time records shall be formatted as a decimal representation of the time in seconds since the Epoch.
       If  a  &lt;period&gt;  (<b>'.'</b>)   decimal  point  character is present, the digits to the right of the point shall
       represent the units of a subsecond timing granularity, where the first digit is tenths of  a  second  and
       each  subsequent  digit  is  a  tenth  of the previous digit. In <b>read</b> or <b>copy</b> mode, the <u>pax</u> utility shall
       truncate the time of a file to the greatest value that is not greater than the input header file time. In
       <b>write</b> or <b>copy</b> mode, the <u>pax</u> utility shall output a time exactly if it can be  represented  exactly  as  a
       decimal  number, and otherwise shall generate only enough digits so that the same time shall be recovered
       if the file is extracted on a system whose underlying implementation supports the same time granularity.

   <b>ustar</b> <b>Interchange</b> <b>Format</b>
       A <b>ustar</b> archive tape or file shall contain a series of logical records. Each logical record  shall  be  a
       fixed-size  logical  record  of  512  octets (see below). Although this format may be thought of as being
       stored on 9-track industry-standard 12.7 mm (0.5 in) magnetic tape, other types  of  transportable  media
       are  not  excluded. Each file archived shall be represented by a header logical record that describes the
       file, followed by zero or more logical records that give the contents of the file.  At  the  end  of  the
       archive  file  there  shall  be two 512-octet logical records filled with binary zeros, interpreted as an
       end-of-archive indicator.

       The logical records may be grouped for physical I/O operations, as described under the <b>-b</b><u>blocksize</u> and <b>-x</b>
       <b>ustar</b> options. Each group of logical records may be written with a single  operation  equivalent  to  the
       <u>write</u>()  function.  On magnetic tape, the result of this write shall be a single tape physical block. The
       last physical block shall always be the full size, so logical records after the two zero logical  records
       may contain undefined data.

       The  header  logical  record shall be structured as shown in the following table. All lengths and offsets
       are in decimal.

                                            <b>Table</b> <b>4-14:</b> <b>ustar</b> <b>Header</b> <b>Block</b>
                                  ┌────────────┬──────────────┬────────────────────┐
                                  │ <b>Field</b> <b>Name</b> │ <b>Octet</b> <b>Offset</b> │ <b>Length</b> <b>(in</b> <b>Octets)</b> │
                                  ├────────────┼──────────────┼────────────────────┤
                                  │ <u>name</u>       │       0      │        100         │
                                  │ <u>mode</u>       │     100      │          8         │
                                  │ <u>uid</u>        │     108      │          8         │
                                  │ <u>gid</u>        │     116      │          8         │
                                  │ <u>size</u>       │     124      │         12         │
                                  │ <u>mtime</u>      │     136      │         12         │
                                  │ <u>chksum</u>     │     148      │          8         │
                                  │ <u>typeflag</u>   │     156      │          1         │
                                  │ <u>linkname</u>   │     157      │        100         │
                                  │ <u>magic</u>      │     257      │          6         │
                                  │ <u>version</u>    │     263      │          2         │
                                  │ <u>uname</u>      │     265      │         32         │
                                  │ <u>gname</u>      │     297      │         32         │
                                  │ <u>devmajor</u>   │     329      │          8         │
                                  │ <u>devminor</u>   │     337      │          8         │
                                  │ <u>prefix</u>     │     345      │        155         │
                                  └────────────┴──────────────┴────────────────────┘

       All characters in the header logical record shall be represented  in  the  coded  character  set  of  the
       ISO/IEC 646:1991 standard. For maximum portability between implementations, names should be selected from
       characters  represented  by  the  portable filename character set as octets with the most significant bit
       zero. If an implementation supports the use of characters outside of &lt;slash&gt; and  the  portable  filename
       character  set  in  names  for  files, users, and groups, one or more implementation-defined encodings of
       these characters shall be provided for interchange purposes.

       However, the <u>pax</u> utility shall never create filenames on the local system that cannot be accessed via the
       procedures described in POSIX.1‐2008. If a filename is found on the medium that would create  an  invalid
       filename, it is implementation-defined whether the data from the file is stored on the file hierarchy and
       under  what name it is stored. The <u>pax</u> utility may choose to ignore these files as long as it produces an
       error indicating that the file is being ignored.

       Each field within the header logical record is contiguous; that  is,  there  is  no  padding  used.  Each
       character on the archive medium shall be stored contiguously.

       The  fields  <u>magic</u>, <u>uname</u>, and <u>gname</u> are character strings each terminated by a NUL character. The fields
       <u>name</u>, <u>linkname</u>, and <u>prefix</u> are NUL-terminated character strings except when all characters in  the  array
       contain  non-NUL  characters including the last character. The <u>version</u> field is two octets containing the
       characters <b>"00"</b> (zero-zero). The <u>typeflag</u> contains a single character. All other fields are leading zero-
       filled octal numbers using  digits  from  the  ISO/IEC 646:1991  standard  IRV.  Each  numeric  field  is
       terminated by one or more &lt;space&gt; or NUL characters.

       The <u>name</u> and the <u>prefix</u> fields shall produce the pathname of the file. A new pathname shall be formed, if
       <u>prefix</u>  is not an empty string (its first character is not NUL), by concatenating <u>prefix</u> (up to the first
       NUL character), a &lt;slash&gt; character, and <u>name</u>; otherwise, <u>name</u> is used alone. In  either  case,  <u>name</u>  is
       terminated  at  the  first  NUL character. If <u>prefix</u> begins with a NUL character, it shall be ignored. In
       this manner, pathnames of at most 256 characters can be supported. If a pathname  does  not  fit  in  the
       space  provided,  <u>pax</u> shall notify the user of the error, and shall not store any part of the file—header
       or data—on the medium.

       The <u>linkname</u> field, described below, shall not use the <u>prefix</u> to produce a pathname. As such, a  <u>linkname</u>
       is  limited  to 100 characters. If the name does not fit in the space provided, <u>pax</u> shall notify the user
       of the error, and shall not attempt to store the link on the medium.

       The <u>mode</u> field provides 12 bits encoded in the ISO/IEC 646:1991 standard octal digit representation.  The
       encoded bits shall represent the following values:

                                                <b>Table:</b> <b>ustar</b> <u>mode</u> <b>Field</b>
                  ┌───────────┬──────────────────┬─────────────────────────────────────────────────┐
                  │ <b>Bit</b> <b>Value</b> │ <b>POSIX.1‐2008</b> <b>Bit</b> │                   <b>Description</b>                   │
                  ├───────────┼──────────────────┼─────────────────────────────────────────────────┤
                  │   04000   │ S_ISUID          │ Set UID on execution.                           │
                  │   02000   │ S_ISGID          │ Set GID on execution.                           │
                  │   01000   │ &lt;reserved&gt;       │ Reserved for future standardization.            │
                  │   00400   │ S_IRUSR          │ Read permission for file owner class.           │
                  │   00200   │ S_IWUSR          │ Write permission for file owner class.          │
                  │   00100   │ S_IXUSR          │ Execute/search permission for file owner class. │
                  │   00040   │ S_IRGRP          │ Read permission for file group class.           │
                  │   00020   │ S_IWGRP          │ Write permission for file group class.          │
                  │   00010   │ S_IXGRP          │ Execute/search permission for file group class. │
                  │   00004   │ S_IROTH          │ Read permission for file other class.           │
                  │   00002   │ S_IWOTH          │ Write permission for file other class.          │
                  │   00001   │ S_IXOTH          │ Execute/search permission for file other class. │
                  └───────────┴──────────────────┴─────────────────────────────────────────────────┘

       When appropriate privileges are required to set one of these mode bits, and the user restoring the  files
       from  the  archive  does  not have appropriate privileges, the mode bits for which the user does not have
       appropriate privileges shall be ignored. Some of the mode bits in the archive format  are  not  mentioned
       elsewhere  in this volume of POSIX.1‐2017. If the implementation does not support those bits, they may be
       ignored.

       The <u>uid</u> and <u>gid</u> fields are the user and group ID of the owner and group of the file, respectively.

       The <u>size</u> field is the size of the file in octets. If the <u>typeflag</u> field is set to specify a file to be of
       type 1 (a link) or 2 (a symbolic link), the <u>size</u> field shall be specified as zero. If the <u>typeflag</u>  field
       is  set  to  specify a file of type 5 (directory), the <u>size</u> field shall be interpreted as described under
       the definition of that record type. No data logical records are stored for types 1,  2,  or  5.   If  the
       <u>typeflag</u>  field is set to 3 (character special file), 4 (block special file), or 6 (FIFO), the meaning of
       the <u>size</u> field is unspecified by this volume of POSIX.1‐2017, and no data logical records shall be stored
       on the medium. Additionally, for type 6, the <u>size</u> field shall be ignored when reading.  If  the  <u>typeflag</u>
       field  is  set  to  any  other value, the number of logical records written following the header shall be
       (<u>size</u>+511)/512, ignoring any fraction in the result of the division.

       The <u>mtime</u> field shall be the modification time of the file at  the  time  it  was  archived.  It  is  the
       ISO/IEC 646:1991  standard  representation  of the octal value of the modification time obtained from the
       <u>stat</u>() function.

       The <u>chksum</u> field shall be the ISO/IEC 646:1991 standard IRV representation of  the  octal  value  of  the
       simple  sum  of  all octets in the header logical record. Each octet in the header shall be treated as an
       unsigned value. These values shall be added to an unsigned integer, initialized to zero, the precision of
       which is not less than 17 bits. When calculating the checksum, the <u>chksum</u> field is treated as if it  were
       all &lt;space&gt; characters.

       The <u>typeflag</u> field specifies the type of file archived. If a particular implementation does not recognize
       the  type,  or  the  user  does  not  have  appropriate privileges to create that type, the file shall be
       extracted as if it were a regular file if the file type is defined to have a meaning for the  <u>size</u>  field
       that  could  cause  data  logical  records  to be written on the medium (see the previous description for
       <u>size</u>).  If conversion to a regular file occurs, the <u>pax</u> utility shall produce an  error  indicating  that
       the  conversion  took  place.  All of the <u>typeflag</u> fields shall be coded in the ISO/IEC 646:1991 standard
       IRV:

       0       Represents a regular file. For backwards-compatibility, a <u>typeflag</u> value of  binary  zero  (<b>'\0'</b>)
               should  be  recognized as meaning a regular file when extracting files from the archive. Archives
               written with this version of the archive file format create regular files with a  <u>typeflag</u>  value
               of the ISO/IEC 646:1991 standard IRV <b>'0'</b>.

       1       Represents  a  file  linked  to  another  file,  of any type, previously archived. Such files are
               identified by having the same device and  file  serial  numbers,  and  pathnames  that  refer  to
               different  directory  entries.  All  such files shall be archived as linked files.  The linked-to
               name is specified in the <u>linkname</u> field with a NUL-character terminator if it is  less  than  100
               octets in length.

       2       Represents  a  symbolic  link.  The contents of the symbolic link shall be stored in the <u>linkname</u>
               field.

       3,4     Represent character special files and  block  special  files  respectively.   In  this  case  the
               <u>devmajor</u>  and  <u>devminor</u> fields shall contain information defining the device, the format of which
               is unspecified by this volume of POSIX.1‐2017. Implementations may map the device  specifications
               to their own local specification or may ignore the entry.

       5       Specifies  a  directory  or  subdirectory.  On  systems  where  disk allocation is performed on a
               directory basis, the <u>size</u> field shall contain the maximum number of octets (which may be  rounded
               to  the  nearest  disk  block allocation unit) that the directory may hold.  A <u>size</u> field of zero
               indicates no such limiting. Systems that do not support limiting in this manner should ignore the
               <u>size</u> field.

       6       Specifies a FIFO special file. Note that the archiving of a FIFO file archives the  existence  of
               this file and not its contents.

       7       Reserved  to  represent  a  file  to which an implementation has associated some high-performance
               attribute. Implementations without such extensions should treat this file as a regular file (type
               0).

       A‐Z     The letters <b>'A'</b> to <b>'Z'</b>, inclusive, are reserved for custom implementations. All other values  are
               reserved for future versions of this standard.

       It  is  unspecified  whether  files with pathnames that refer to the same directory entry are archived as
       linked files or as separate files. If they are archived as linked files, this means  that  attempting  to
       extract  both  pathnames  from  the resulting archive will always cause an error (unless the <b>-u</b> option is
       used) because the link cannot be created.

       It is unspecified whether files with the same device and file serial numbers being appended to an archive
       are treated as linked files to members that were in the archive before the append.

       Attempts to archive a socket shall produce a diagnostic message when <b>ustar</b> interchange  format  is  used,
       but  may  be allowed when <b>pax</b> interchange format is used. Handling of other file types is implementation-
       defined.

       The <u>magic</u> field is the specification that this archive was output in this archive format. If  this  field
       contains  <b>ustar</b>  (the  five characters from the ISO/IEC 646:1991 standard IRV shown followed by NUL), the
       <u>uname</u> and <u>gname</u> fields shall contain the ISO/IEC 646:1991 standard IRV representation of  the  owner  and
       group  of  the  file,  respectively  (truncated  to  fit,  if  necessary). When the file is restored by a
       privileged, protection-preserving version of the utility, the user and group databases shall  be  scanned
       for  these names. If found, the user and group IDs contained within these files shall be used rather than
       the values contained within the <u>uid</u> and <u>gid</u> fields.

   <b>cpio</b> <b>Interchange</b> <b>Format</b>
       The octet-oriented <b>cpio</b> archive format shall be a series  of  entries,  each  comprising  a  header  that
       describes the file, the name of the file, and then the contents of the file.

       An  archive may be recorded as a series of fixed-size blocks of octets.  This blocking shall be used only
       to make physical I/O more efficient.  The last group of blocks shall always be at the full size.

       For the octet-oriented <b>cpio</b> archive format, the individual  entry  information  shall  be  in  the  order
       indicated and described by the following table; see also the <u>&lt;cpio.h&gt;</u> header.

                                     <b>Table</b> <b>4-16:</b> <b>Octet-Oriented</b> <b>cpio</b> <b>Archive</b> <b>Entry</b>
                           ┌──────────────────────┬────────────────────┬─────────────────┐
                           │  <b>Header</b> <b>Field</b> <b>Name</b>   │ <b>Length</b> <b>(in</b> <b>Octets)</b> │ <b>Interpreted</b> <b>as</b>  │
                           ├──────────────────────┼────────────────────┼─────────────────┤
                           │ <u>c_magic</u>              │          6         │ Octal number    │
                           │ <u>c_dev</u>                │          6         │ Octal number    │
                           │ <u>c_ino</u>                │          6         │ Octal number    │
                           │ <u>c_mode</u>               │          6         │ Octal number    │
                           │ <u>c_uid</u>                │          6         │ Octal number    │
                           │ <u>c_gid</u>                │          6         │ Octal number    │
                           │ <u>c_nlink</u>              │          6         │ Octal number    │
                           │ <u>c_rdev</u>               │          6         │ Octal number    │
                           │ <u>c_mtime</u>              │         11         │ Octal number    │
                           │ <u>c_namesize</u>           │          6         │ Octal number    │
                           │ <u>c_filesize</u>           │         11         │ Octal number    │
                           ├──────────────────────┼────────────────────┼─────────────────┤
                           │ <b>Filename</b> <b>Field</b> <b>Name</b>  │       <b>Length</b>       │ <b>Interpreted</b> <b>as</b>  │
                           ├──────────────────────┴────────────────────┴─────────────────┤
                           │ <u>c_name</u>                 <u>c_namesize</u>           Pathname string │
                           ├──────────────────────┬────────────────────┬─────────────────┤
                           │ <b>File</b> <b>Data</b> <b>Field</b> <b>Name</b> │       <b>Length</b>       │ <b>Interpreted</b> <b>as</b>  │
                           ├──────────────────────┴────────────────────┴─────────────────┤
                           │ <u>c_filedata</u>             <u>c_filesize</u>           Data            │
                           └─────────────────────────────────────────────────────────────┘

   <b>cpio</b> <b>Header</b>
       For  each  file  in  the archive, a header as defined previously shall be written. The information in the
       header fields is written as streams of the ISO/IEC 646:1991  standard  characters  interpreted  as  octal
       numbers.  The  octal  numbers shall be extended to the necessary length by appending the ISO/IEC 646:1991
       standard IRV zeros at the most-significant-digit end of the number; the result is written  to  the  most-
       significant digit of the stream of octets first.  The fields shall be interpreted as follows:

       <u>c_magic</u>   Identify  the  archive  as  being  a  transportable archive by containing the identifying value
                 <b>"070707"</b>.

       <u>c_dev</u>, <u>c_ino</u>
                 Contains values that uniquely identify the file within the archive (that is, no  files  contain
                 the  same  pair  of  <u>c_dev</u> and <u>c_ino</u> values unless they are links to the same file). The values
                 shall be determined in an unspecified manner.

       <u>c_mode</u>    Contains the file type and access permissions as defined in the following table.

                                            <b>Table</b> <b>4-17:</b> <b>Values</b> <b>for</b> <b>cpio</b> <b>c_mode</b> <b>Field</b>
                 │                ───────┬─────────┬────────────────────────┬─────────────────
--
</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       The following exit values shall be returned:

        0    All files were processed successfully.

       &gt;0    An error occurred.

</pre><h4><b>CONSEQUENCES</b> <b>OF</b> <b>ERRORS</b></h4><pre>
       If <u>pax</u> cannot create a file or a link when reading an archive or cannot  find  a  file  when  writing  an
       archive,  or  cannot  preserve  the  user  ID,  group ID, or file mode when the <b>-p</b> option is specified, a
       diagnostic message shall be written to standard error and a non-zero exit status shall be  returned,  but
       processing  shall  continue.  In  the  case  where  <u>pax</u> cannot create a link to a file, <u>pax</u> shall not, by
       default, create a second copy of the file.

       If the extraction of a file from an archive is prematurely terminated by a signal or error, <u>pax</u> may  have
       only  partially  extracted  the file or (if the <b>-n</b> option was not specified) may have extracted a file of
       the same name as that specified by the user, but which is not the file the  user  wanted.   Additionally,
       the  file  modes  of  extracted directories may have additional bits from the S_IRWXU mask set as well as
       incorrect modification and access times.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       Caution is advised when using the <b>-a</b> option to append to a <u>cpio</u> format archive. If any of the files being
       appended happen to be given the same <u>c_dev</u> and <u>c_ino</u> values as  a  file  in  the  existing  part  of  the
       archive,  then  they may be treated as links to that file on extraction. Thus, it is risky to use <b>-a</b> with
       <u>cpio</u> format except when it is done on the same system that the original archive was created on, and  with
       the  same  <u>pax</u>  utility, and in the knowledge that there has been little or no file system activity since
       the original archive was created that could lead to any of the files appended being given the same  <u>c_dev</u>
       and  <u>c_ino</u>  values  as  an unrelated file in the existing part of the archive. Also, when (intentionally)
       appending additional links to a file in the existing part of the  archive,  the  <u>c_nlink</u>  values  in  the
       modified  archive can be smaller than the number of links to the file in the archive, which may mean that
       the links are not preserved on extraction.

       The <b>-p</b> (privileges) option was  invented  to  reconcile  differences  between  historical  <u>tar</u>  and  <u>cpio</u>
       implementations.  In  particular,  the  two utilities use <b>-m</b> in diametrically opposed ways. The <b>-p</b> option
       also provides a consistent means of extending the ways in which future file attributes can be  addressed,
       such  as for enhanced security systems or high-performance files. Although it may seem complex, there are
       really two modes that are most commonly used:

       <b>-p</b> <b>e</b>    ``Preserve everything''. This would be  used  by  the  historical  superuser,  someone  with  all
               appropriate privileges, to preserve all aspects of the files as they are recorded in the archive.
               The <b>e</b> flag is the sum of <b>o</b> and <b>p</b>, and other implementation-defined attributes.

       <b>-p</b> <b>p</b>    ``Preserve''  the  file  mode  bits.  This  would be used by the user with regular privileges who
               wished to preserve aspects of the file other than the ownership. The file times are preserved  by
               default, but two other flags are offered to disable these and use the time of extraction.

       The  one  pathname per line format of standard input precludes pathnames containing &lt;newline&gt; characters.
       Although such pathnames violate the portable filename guidelines, they may exist and their  presence  may
       inhibit  usage  of  <u>pax</u> within shell scripts. This problem is inherited from historical archive programs.
       The problem can be avoided by listing filename arguments on the  command  line  instead  of  on  standard
       input.

       It  is almost certain that appropriate privileges are required for <u>pax</u> to accomplish parts of this volume
       of POSIX.1‐2017. Specifically, creating files of type block special or character special, restoring  file
       access times unless the files are owned by the user (the <b>-t</b> option), or preserving file owner, group, and
       mode (the <b>-p</b> option) all probably require appropriate privileges.

       In <b>read</b> mode, implementations are permitted to overwrite files when the archive has multiple members with
       the  same  name.  This  may  fail  if permissions on the first version of the file do not permit it to be
       overwritten.

       The <b>cpio</b> and <b>ustar</b> formats can only support files up to 8589934592 bytes (8 ∗ 2^30) in size.

       When archives containing binary header information are listed , the filenames printed may  cause  strange
       behavior on some terminals.

       When all of the following are true:

        1. A file of type directory is being placed into an archive.

        2. The <b>ustar</b> archive format is being used.

        3. The  pathname  of  the  directory  is less than or equal to 155 bytes long (it will fit in the <u>prefix</u>
           field in the <b>ustar</b> header block).

        4. The last component of the pathname of the directory is longer than 100 bytes long (it will not fit in
           the <u>name</u> field in the <b>ustar</b> header block).

       some implementations of the <u>pax</u> utility will place the entire directory pathname in the <u>prefix</u> field, set
       the <u>name</u> field to an empty string, and place the directory in the archive.  Other implementations of  the
       <u>pax</u>  utility will give an error under these conditions because the <u>name</u> field is not large enough to hold
       the last component of the directory name.  This standard allows either behavior. However, when extracting
       a directory from a <b>ustar</b> format archive, this standard requires  that  all  implementations  be  able  to
       extract  a directory even if the <u>name</u> field contains an empty string as long as the <u>prefix</u> field does not
       also contain an empty string.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following command:

           pax -w -f /dev/rmt/1m .

       copies the contents of the current directory to tape drive 1, medium density (assuming historical  System
       V device naming procedures—the historical BSD device name would be <b>/dev/rmt9</b>).

       The following commands:

           mkdir <u>newdir</u>
           pax -rw <u>olddir</u> <u>newdir</u>

       copy the <u>olddir</u> directory hierarchy to <u>newdir</u>.

           pax -r -s ',^//*usr//*,,' -f a.pax

       reads  the  archive <b>a.pax</b>, with all files rooted in <b><a href="file:/usr">/usr</a></b> in the archive extracted relative to the current
       directory.

       Using the option:

           -o listopt="%M %(atime)T %(size)D %(name)s"

       overrides the default output description in Standard Output and instead writes:

           -rw-rw--- Jan 12 15:53 2003 1492 /usr/foo/bar

       Using the options:

           -o listopt='%L\t%(size)D\n%.7' \
           -o listopt='(name)s\n%(atime)T\n%T'

       overrides the default output description in Standard Output and instead writes:

           /usr/foo/bar -&gt; <a href="file:/tmp">/tmp</a>   1492
           /usr/fo
           Jan 12 15:53 1991
           Jan 31 15:53 2003

</pre><h4><b>RATIONALE</b></h4><pre>
       The <u>pax</u> utility was new for the ISO POSIX‐2:1993 standard. It represents a  peaceful  compromise  between
       advocates of the historical <u>tar</u> and <u>cpio</u> utilities.

       A  fundamental  difference between <u>cpio</u> and <u>tar</u> was in the way directories were treated. The <u>cpio</u> utility
       did not treat directories differently from other files, and  to  select  a  directory  and  its  contents
       required that each file in the hierarchy be explicitly specified. For <u>tar</u>, a directory matched every file
       in the file hierarchy it rooted.

       The  <u>pax</u>  utility  offers both interfaces; by default, directories map into the file hierarchy they root.
       The <b>-d</b> option causes <u>pax</u> to skip any file not explicitly referenced, as <u>cpio</u> historically  did.  The  <u>tar</u>
       <b>-</b><u>style</u> behavior was chosen as the default because it was believed that this was the more common usage and
       because  <u>tar</u>  is  the more commonly available interface, as it was historically provided on both System V
       and BSD implementations.

       The data interchange format specification in this volume of POSIX.1‐2017  requires  that  processes  with
       ``appropriate  privileges'' shall always restore the ownership and permissions of extracted files exactly
       as archived. If viewed from the historic equivalence between superuser  and  ``appropriate  privileges'',
       there  are  two  problems  with  this requirement. First, users running as superusers may unknowingly set
       dangerous permissions on extracted files. Second, it is needlessly limiting, in  that  superusers  cannot
       extract  files  and  own them as superuser unless the archive was created by the superuser. (It should be
       noted that restoration of ownerships and  permissions  for  the  superuser,  by  default,  is  historical
       practice  in  <u>cpio</u>,  but not in <u>tar</u>.)  In order to avoid these two problems, the <u>pax</u> specification has an
       additional ``privilege'' mechanism, the <b>-p</b> option. Only a <u>pax</u> invocation with the privileges needed,  and
       which  has  the  <b>-p</b> option set using the <b>e</b> specification character, has appropriate privileges to restore
       full ownership and permission information.

       Note also that this volume of POSIX.1‐2017 requires that the file ownership and access permissions  shall
       be  set, on extraction, in the same fashion as the <u>creat</u>() function when provided with the mode stored in
       the archive. This means that the file creation mask of the user is applied to the file permissions.

       Users should note that directories may be created by <u>pax</u> while extracting files with permissions that are
       different from those that existed at  the  time  the  archive  was  created.  When  extracting  sensitive
       information  into  a  directory  hierarchy  that no longer exists, users are encouraged to set their file
       creation mask appropriately to protect these files during extraction.

       The table of contents output is written to standard output to facilitate pipeline processing.

       An early proposal had hard links displaying for all pathnames. This was removed  because  it  complicates
       the  output of the case where <b>-v</b> is not specified and does not match historical <u>cpio</u> usage. The hard-link
       information is available in the <b>-v</b> display.

       The description of the <b>-l</b> option allows implementations to make hard links to  symbolic  links.   Earlier
       versions  of  this  standard  did  not specify any way to create a hard link to a symbolic link, but many
       implementations provided this capability as an extension. If there are hard links to symbolic links  when
       an  archive is created, the implementation is required to archive the hard link in the archive (unless <b>-H</b>
       or <b>-L</b> is specified). When in <b>read</b> mode and  in  <b>copy</b>  mode,  implementations  supporting  hard  links  to
       symbolic links should use them when appropriate.

       The  archive  formats  inherited  from the POSIX.1‐1990 standard have certain restrictions that have been
       brought along from historical usage. For example, there are  restrictions  on  the  length  of  pathnames
       stored  in  the archive.  When <u>pax</u> is used in <b>copy</b>(<b>-rw</b>) mode (copying directory hierarchies), the ability
       to use extensions from the <b>-xpax</b> format overcomes these restrictions.

       The default <u>blocksize</u> value of 5120 bytes for <u>cpio</u> was selected because it is one of the standard  block-
       size  values  for <u>cpio</u>, set when the <b>-B</b> option is specified. (The other default block-size value for <u>cpio</u>
       is 512 bytes, and this was considered to be too small.) The default block value of 10240  bytes  for  <u>tar</u>
       was  selected because that is the standard block-size value for BSD <u>tar</u>.  The maximum block size of 32256
       bytes (215-512 bytes) is the largest multiple of 512 bytes that fits into a signed 16-bit tape controller
       transfer register. There are known limitations in some  historical  systems  that  would  prevent  larger
       blocks  from  being  accepted.  Historical  values  were  chosen to improve compatibility with historical
       scripts using <u>dd</u> or similar utilities to manipulate archives. Also, default block sizes for any file type
       other than character special file has been deleted from this volume of POSIX.1‐2017  as  unimportant  and
       not likely to affect the structure of the resulting archive.

       Implementations are permitted to modify the block-size value based on the archive format or the device to
       which  the  archive  is  being  written.  This is to provide implementations with the opportunity to take
       advantage of special types of devices, and it should not be used without a great deal of consideration as
       it almost certainly decreases archive portability.

       The intended use of the <b>-n</b> option was to permit extraction of one or more files from the archive  without
       processing  the  entire  archive.  This  was  viewed  by  the standard developers as offering significant
       performance advantages over historical implementations. The  <b>-n</b>  option  in  early  proposals  had  three
       effects;  the  first  was to cause special characters in patterns to not be treated specially. The second
       was to cause only the first file that matched a pattern to be extracted. The third was to  cause  <u>pax</u>  to
       write  a  diagnostic  message to standard error when no file was found matching a specified pattern. Only
       the second behavior is retained by this volume of POSIX.1‐2017, for many reasons. First, it is in general
       not acceptable for a single option to have multiple effects. Second, the ability to make pattern matching
       characters act as normal characters is useful for parts of <u>pax</u> other than file extraction. Third, a finer
       degree of control over the special characters is useful because users may wish to normalize only a single
       special character in a single filename. Fourth, given a  more  general  escape  mechanism,  the  previous
       behavior  of the <b>-n</b> option can be easily obtained using the <b>-s</b> option or a <u>sed</u> script. Finally, writing a
       diagnostic message when a pattern specified by the user is unmatched by any file is  useful  behavior  in
       all cases.

       In  this version, the <b>-n</b> was removed from the <b>copy</b> mode synopsis of <u>pax</u>; it is inapplicable because there
       are no pattern operands specified in this mode.

       There is another method than <u>pax</u> for copying subtrees  in  POSIX.1‐2008  described  as  part  of  the  <u>cp</u>
       utility. Both methods are historical practice: <u>cp</u> provides a simpler, more intuitive interface, while <u>pax</u>
       offers  a  finer  granularity  of  control.  Each  provides  additional  functionality  to  the other; in
       particular, <u>pax</u> maintains the hard-link structure of the hierarchy while <u>cp</u> does not. It is the intention
       of the standard developers that the results be similar (using appropriate  option  combinations  in  both
       utilities).  The results are not required to be identical; there seemed insufficient gain to applications
       to balance the difficulty of implementations having to  guarantee  that  the  results  would  be  exactly
       identical.

       A  single  archive  may span more than one file. It is suggested that implementations provide informative
       messages to the user on standard error whenever the archive file is changed.

       The <b>-d</b> option (do not create intermediate directories not listed in the archive) found in early proposals
       was originally provided as a complement to the historic <b>-d</b> option of <u>cpio</u>.  It has been deleted.

       The <b>-s</b> option in early proposals specified a subset of the substitution command from the <u>ed</u>  utility.  As
       there  was  no reason for only a subset to be supported, the <b>-s</b> option is now compatible with the current
       <u>ed</u> specification. Since the delimiter can be any non-null character,  the  following  usage  with  single
       &lt;space&gt; characters is valid:

           pax -s " foo bar " ...

       The  <b>-t</b>  description  is  worded  so as to note that this may cause the access time update caused by some
       other activity (which occurs while the file is being read) to be overwritten.

       The default behavior  of  <u>pax</u>  with  regard  to  file  modification  times  is  the  same  as  historical
       implementations of <u>tar</u>.  It is not the historical behavior of <u>cpio</u>.

       Because  the  <b>-i</b>  option uses <b>/dev/tty</b>, utilities without a controlling terminal are not able to use this
       option.

       The <b>-y</b> option, found in early proposals, has been deleted because a line containing a single &lt;period&gt; for
       the <b>-i</b> option has equivalent functionality. The special lines for the <b>-i</b> option (a  single  &lt;period&gt;  and
       the empty line) are historical practice in <u>cpio</u>.

       In  early  drafts, a <b>-e</b><u>charmap</u> option was included to increase portability of files between systems using
       different coded character sets. This option was omitted because it was apparent that consensus could  not
       be formed for it. In this version, the use of UTF‐8 should be an adequate substitute.

       The  ISO POSIX‐2:1993  standard  and  ISO POSIX‐1  standard  requirements  for <u>pax</u>, however, made it very
       difficult to create a single archive containing files  created  using  extended  characters  provided  by
       different  locales.   This  version  adds  the <b>hdrcharset</b> keyword to make it possible to archive files in
       these cases without dropping files due to translation errors.

       Translating filenames and other attributes from a locale's encoding to UTF‐8 and then back again can lose
       information, as the resulting filename might not be byte-for-byte equivalent to the  original.  To  avoid
       this  problem,  users can specify the <b>-o</b> <b>hdrcharset=binary</b> option, which will cause the resulting archive
       to use binary format for all names and attributes. Such archives are not portable among  hosts  that  use
       different  native  encodings (e.g., EBCDIC <u>versus</u> ASCII-based encodings), but they will allow interchange
       among the vast majority of POSIX file systems in practical use. Also,  the  <b>-o</b>  <b>hdrcharset=binary</b>  option
       will cause <u>pax</u> in <b>copy</b> mode to behave more like other standard utilities such as <u>cp</u>.

       If  the  values  specified  by  the  <b>-o</b> <b>exthdr.name=value</b>, <b>-o</b> <b>globexthdr.name=value</b>, or by <b>$TMPDIR</b> (if <b>-o</b>
       <b>globexthdr.name</b> is not specified)  require  a  character  encoding  other  than  that  described  in  the
       ISO/IEC 646:1991  standard,  a  <b>path</b>  extended  header  record will have to be created for the file. If a
       <b>hdrcharset</b> extended header record is active for such headers, it will determine the codeset used for  the
       value  field  in these extended <b>path</b> header records. These <b>path</b> extended header records always need to be
       created when writing an archive even if <b>hdrcharset=binary</b> has been specified and would contain  the  same
       (binary)  data  that  appears  in  the  <b>ustar</b>  header  record prefix and <u>name</u> fields. (In other words, an
       extended header <b>path</b> record is always required to be generated if the <u>prefix</u> or <u>name</u> fields contain  non-
       ASCII characters even when <b>hdrcharset=binary</b> is also in effect for that file.)

       The <b>-k</b> option was added to address international concerns about the dangers involved in the character set
       transformations of <b>-e</b> (if the target character set were different from the source, the filenames might be
       transformed  into  names  matching  existing  files)  and  also  was  made  more general to protect files
       transferred between file systems with different {NAME_MAX} values (truncating a  filename  on  a  smaller
       system  might  also inadvertently overwrite existing files). As stated, it prevents any overwriting, even
       if the target file is older than the source. This version adds more granularity of options to solve  this
       problem  by  introducing  the  <b>-oinvalid=option</b>—specifically  the <b>UTF‐8</b> and <b>binary</b> actions. (Note that an
       existing file is still subject to overwriting in this case. The <b>-k</b> option closes that loophole.)

       Some of the file characteristics referenced in this volume of POSIX.1‐2017 might not be supported by some
       archive formats. For example, neither the <b>tar</b> nor <b>cpio</b> formats contain the file  access  time.  For  this
       reason,  the  <b>e</b>  specification  character  has  been provided, intended to cause all file characteristics
       specified in the archive to be retained.

       It is required that extracted directories, by default, have  their  access  and  modification  times  and
       permissions set to the values specified in the archive. This has obvious problems in that the directories
       are  almost  certainly  modified after being extracted and that directory permissions may not permit file
       creation. One possible solution is to create directories with the  mode  specified  in  the  archive,  as
       modified  by  the  <u>umask</u> of the user, with sufficient permissions to allow file creation. After all files
       have been extracted, <u>pax</u> would then reset the access and modification times and permissions as necessary.

       The list-mode formatting description borrows heavily from the one defined by the <u>printf</u> utility. However,
       since there is no separate operand list to get conversion arguments, the format  was  extended  to  allow
       specifying the name of the conversion argument as part of the conversion specification.

       The  <b>T</b>  conversion specifier allows time fields to be displayed in any of the date formats. Unlike the <u>ls</u>
       utility, <u>pax</u> does not adjust the format when the date is less than six months in  the  past.  This  makes
       parsing the output more predictable.

       The  <b>D</b>  conversion  specifier handles the ability to display the major/minor or file size, as with <u>ls</u>, by
       using %-8(<u>size</u>)D.

       The <b>L</b> conversion specifier handles the <u>ls</u> display for symbolic links.

       Conversion specifiers were added to generate existing known types used for <u>ls</u>.

   <b>pax</b> <b>Interchange</b> <b>Format</b>
       The new POSIX data interchange format was developed primarily to satisfy international concerns that  the
       <b>ustar</b>  and  <b>cpio</b>  formats did not provide for file, user, and group names encoded in characters outside a
       subset of the ISO/IEC 646:1991 standard. The standard  developers  realized  that  this  new  POSIX  data
       interchange  format  should  be very extensible because there were other requirements they foresaw in the
       near future:

        *  Support international character encodings and locale information

        *  Support security information (ACLs, and so on)

        *  Support future file types, such as realtime or contiguous files

        *  Include data areas for implementation use

        *  Support systems with words larger than 32 bits and timers with subsecond granularity

       The following were not goals for this format because these are better handled by  separate  utilities  or
       are inappropriate for a portable format:

        *  Encryption

        *  Compression

        *  Data translation between locales and codesets

        *  <u>inode</u> storage

       The format chosen to support the goals is an extension of the <b>ustar</b> format. Of the two formats previously
       available, only the <b>ustar</b> format was selected for extensions because:

        *  It  was easier to extend in an upwards-compatible way. It offered version flags and header block type
           fields with room for future standardization. The <b>cpio</b> format, while possessing a more  flexible  file
           naming methodology, could not be extended without breaking some theoretical implementation or using a
           dummy filename that could be a legitimate filename.

        *  Industry experience since the original ``<u>tar</u> wars'' fought in developing the ISO POSIX‐1 standard has
           clearly  been in favor of the <b>ustar</b> format, which is generally the default output format selected for
           <u>pax</u> implementations on new systems.

       The new format was designed with one additional goal in mind: reasonable behavior when an  older  <u>tar</u>  or
       <u>pax</u> utility happened to read an archive. Since the POSIX.1‐1990 standard mandated that a ``format-reading
       utility''  had to treat unrecognized <u>typeflag</u> values as regular files, this allowed the format to include
       all the extended information in a pseudo-regular file that preceded each real file. An  option  is  given
       that  allows  the  archive creator to set up reasonable names for these files on the older systems. Also,
       the normative text suggests that reasonable file access values be  used  for  this  <b>ustar</b>  header  block.
       Making  these header files inaccessible for convenient reading and deleting would not be reasonable. File
       permissions of 600 or 700 are suggested.

       The <b>ustar</b> <u>typeflag</u> field was used to accommodate the additional functionality of the  new  format  rather
       than magic or version because the POSIX.1‐1990 standard (and, by reference, the previous version of <u>pax</u>),
       mandated  the  behavior  of  the  format-reading utility when it encountered an unknown <u>typeflag</u>, but was
       silent about the other two fields.

       Early proposals for the first version of this standard contained a proposed archive format that was based
       on compatibility with the standard for tape files (ISO 1001, similar to the format used  historically  on
       many  mainframes and minicomputers). This format was overly complex and required considerable overhead in
       volume and header records. Furthermore, the standard developers felt that it would not be  acceptable  to
       the  community  of  POSIX  developers,  so  it  was  later changed to be a format more closely related to
       historical practice on POSIX systems.

       The prefix and name split of pathnames in <b>ustar</b> was replaced by the single path  extended  header  record
       for simplicity.

       The concept of a global extended header (<u>typeflag</u><b>g</b>) was controversial. If this were applied to an archive
       being  recorded on magnetic tape, a few unreadable blocks at the beginning of the tape could be a serious
       problem; a utility attempting to extract as many files as possible from a damaged archive  could  lose  a
       large  percentage  of  file  header  information in this case. However, if the archive were on a reliable
       medium, such as a CD‐ROM, the global extended header offers considerable  potential  size  reductions  by
       eliminating  redundant  information.  Thus, the text warns against using the global method for unreliable
       media and provides a method for implanting global information in  the  extended  header  for  each  file,
       rather than in the <u>typeflag</u> <b>g</b> records.

       No  facility  for  data  translation  or  filtering  on a per-file basis is included because the standard
       developers could not invent an interface that would allow this in an efficient manner. If a filter,  such
       as encryption or compression, is to be applied to all the files, it is more efficient to apply the filter
       to the entire archive as a single file. The standard developers considered interfaces that would invoke a
       shell script for each file going into or out of the archive, but the system overhead in this approach was
       considered to be too high.

       One  such  approach  would  be  to  have <b>filter=</b> records that give a pathname for an executable. When the
       program is invoked, the file and archive would be open for  standard  input/output  and  all  the  header
       fields would be available as environment variables or command-line arguments. The standard developers did
       discuss  such  schemes, but they were omitted from POSIX.1‐2008 due to concerns about excessive overhead.
       Also, the program itself would need to be in the archive if it were to be used portably.

       There is currently no portable means of identifying the character set(s) used for  a  file  in  the  file
       system. Therefore, <u>pax</u> has not been given a mechanism to generate charset records automatically. The only
       portable means of doing this is for the user to write the archive using the <b>-ocharset=string</b> command line
       option.  This  assumes  that all of the files in the archive use the same encoding. The ``implementation-
       defined'' text is included to allow for a system that can identify the encodings used  for  each  of  its
       files.

       The  table  of  standards  that  accompanies  the  charset  record description is acknowledged to be very
       limited. Only a limited number of character set standards is  reasonable  for  maximal  interchange.  Any
       character  set is, of course, possible by prior agreement. It was suggested that EBCDIC be listed, but it
       was omitted because it is not defined by a formal standard. Formal standards, and then  only  those  with
       reasonably  large  followings,  can  be  included  here, simply as a matter of practicality. The &lt;<u>value</u>&gt;s
       represent names of officially registered character sets in  the  format  required  by  the  ISO 2375:1985
       standard.

       The  normal  &lt;comma&gt;  or  &lt;blank&gt;-separated list rules are not followed in the case of keyword options to
       allow ease of argument parsing for <u>getopts</u>.

       Further information on character encodings is in <u>pax</u> <u>Archive</u> <u>Character</u> <u>Set</u> <u>Encoding/Decoding</u>.

       The standard developers have reserved keyword name space for vendor extensions. It is suggested that  the
       format to be used is:

           <u>VENDOR.keyword</u>

       where  <u>VENDOR</u> is the name of the vendor or organization in all uppercase letters. It is further suggested
       that the keyword following the &lt;period&gt; be named differently than any of the standard keywords so that it
       could be used for future standardization, if appropriate, by omitting the <u>VENDOR</u> prefix.

       The &lt;<u>length</u>&gt; field in the extended header record was included to make it  simpler  to  step  through  the
       records,  even  if a record contains an unknown format (to a particular <u>pax</u>) with complex interactions of
       special characters. It also provides a minor integrity checkpoint within the records  to  aid  a  program
       attempting to recover files from a damaged archive.

       There  are no extended header versions of the <u>devmajor</u> and <u>devminor</u> fields because the unspecified format
       <b>ustar</b> header field should be sufficient. If they are not,  vendor-specific  extended  keywords  (such  as
       <u>VENDOR.devmajor</u>) should be used.

       Device  and  <u>i</u>-number  labeling  of files was not adopted from <u>cpio</u>; files are interchanged strictly on a
       symbolic name basis, as in <b>ustar</b>.

       Just as with the <b>ustar</b> format descriptions, the new format makes no special arrangements for multi-volume
       archives. Each of the <u>pax</u> archive types is assumed to be inside a single POSIX file  and  splitting  that
       file over multiple volumes (diskettes, tape cartridges, and so on), processing their labels, and mounting
       each  in  the  proper  sequence  are  considered  to  be  implementation details that cannot be described
       portably.

       The <b>pax</b> format is intended for interchange, not only for backup on a single (family of)  systems.  It  is
       not as densely packed as might be possible for backup:

        *  It contains information as coded characters that could be coded in binary.

        *  It  identifies  extended  records  with  name  fields that could be omitted in favor of a fixed-field
           layout.

        *  It translates names into a portable character set and identifies locale-related information, both  of
           which are probably unnecessary for backup.

       The  requirements  on  restoring  from  an  archive  are  slightly different from the historical wording,
       allowing for non-monolithic privilege to bring forward as much as  possible.  In  particular,  attributes
       such  as  ``high  performance  file''  might  be broadly but not universally granted while set-user-ID or
       <u>chown</u>() might be much more restricted.  There  is  no  implication  in  POSIX.1‐2008  that  the  security
       information  be  honored after it is restored to the file hierarchy, in spite of what might be improperly
       inferred by the silence on that topic. That is a topic for another standard.

       Links are recorded in the fashion described here because a link can be to any file type. It is  desirable
       in  general  to  be  able  to  restore  part  of  an  archive  selectively and restore all of those files
       completely. If the data is not associated with each link, it is not possible to  do  this.  However,  the
       data  associated  with  a  file can be large, and when selective restoration is not needed, this can be a
       significant burden.  The archive is structured so that files that have no associated data can  always  be
       restored  by the name of any link name of any link, and the user may choose whether data is recorded with
       each instance of a file that contains data. The format permits mixing of both types of links in a  single
       archive;  this  can  be  done  for special needs, and <u>pax</u> is expected to interpret such archives on input
       properly, despite the fact that there is no <u>pax</u> option that would force this mixed case on output.  (When
       <b>-o</b>  <b>linkdata</b>  is  used,  the  output  must  contain the duplicate data, but the implementation is free to
       include it or omit it when <b>-o</b> <b>linkdata</b> is not used.)

       The time values are included as extended header records for those implementations needing more  than  the
       eleven  octal  digits  allowed  by  the <b>ustar</b> format. Portable file timestamps cannot be negative. If <u>pax</u>
       encounters a file with a negative timestamp in <b>copy</b> or <b>write</b> mode, it can reject the file,  substitute  a
       non-negative  timestamp,  or  generate  a  non-portable  timestamp  with a leading <b>'-'</b>.  Even though some
       implementations can support finer file-time granularities  than  seconds,  the  normative  text  requires
       support only for seconds since the Epoch because the ISO POSIX‐1 standard states them that way. The <b>ustar</b>
       format  includes  only  <u>mtime</u>;  the  new  format adds <u>atime</u> and <u>ctime</u> for symmetry. The <u>atime</u> access time
       restored to the file system will be affected by the <b>-p</b> <b>a</b> and  <b>-p</b>  <b>e</b>  options.  The  <u>ctime</u>  creation  time
       (actually  <u>inode</u>  modification  time)  is described with appropriate privileges so that it can be ignored
       when writing to the file system. POSIX does not provide a portable means to change  file  creation  time.
       Nothing is intended to prevent a non-portable implementation of <u>pax</u> from restoring the value.

       The  <u>gid</u>,  <u>size</u>,  and  <u>uid</u>  extended  header  records  were  included to allow expansion beyond the sizes
       specified in the regular <u>tar</u> header. New file system architectures are emerging  that  will  exhaust  the
       12-digit  size field. There are probably not many systems requiring more than 8 digits for user and group
       IDs, but the extended header values were included for completeness, allowing overrides  for  all  of  the
       decimal values in the <u>tar</u> header.

       The  standard developers intended to describe the effective results of <u>pax</u> with regard to file ownerships
       and permissions; implementations are not restricted in timing or  sequencing  the  restoration  of  such,
       provided the results are as specified.

       Much  of the text describing the extended headers refers to use in ``<b>write</b> or <b>copy</b> modes''. The <b>copy</b> mode
       references are due to the normative text: ``The effect of the copy shall be as if the copied  files  were
       written  to  an  archive  file  and  then subsequently extracted ...''. There is certainly no way to test
       whether <u>pax</u> is actually generating the extended headers in <b>copy</b> mode, but the effects must be  as  if  it
       had.

   <b>pax</b> <b>Archive</b> <b>Character</b> <b>Set</b> <b>Encoding/Decoding</b>
       There  is  a  need to exchange archives of files between systems of different native codesets. Filenames,
       group names, and user names must be preserved to the fullest extent possible when an archive is  read  on
       the receiving platform. Translation of the contents of files is not within the scope of the <u>pax</u> utility.

       There  will  also  be  the need to represent characters that are not available on the receiving platform.
       These unsupported characters cannot be automatically folded to the local set of  characters  due  to  the
       chance  of collisions. This could result in overwriting previous extracted files from the archive or pre-
       existing files on the system.

       For these reasons, the codeset used to represent characters within the extended header records of the <u>pax</u>
       archive must be sufficiently rich to handle all  commonly  used  character  sets.  The  fields  requiring
       translation   include,   at   a  minimum,  filenames,  user  names,  group  names,  and  link  pathnames.
       Implementations may wish to have localized extended keywords that use non-portable characters.

       The standard developers considered the following options:

        *  The archive creator specifies the well-defined name of the source codeset.  The  receiver  must  then
           recognize the codeset name and perform the appropriate translations to the destination codeset.

        *  The  archive  creator  includes within the archive the character mapping table for the source codeset
           used to encode extended header records.  The receiver must then read the character mapping table  and
           perform the appropriate translations to the destination codeset.

        *  The  archive  creator  translates  the extended header records in the source codeset into a canonical
           form. The receiver must then perform the appropriate translations to the destination codeset.

       The approach that incorporates the name  of  the  source  codeset  poses  the  problem  of  codeset  name
       registration, and makes the archive useless to <u>pax</u> archive decoders that do not recognize that codeset.

       Because  parts  of an archive may be corrupted, the standard developers felt that including the character
       map of the source codeset was too fragile. The loss of this one key component could result in making  the
       entire archive useless. (The difference between this and the global extended header decision was that the
       latter  has  a  workaround—duplicating  extended header records on unreliable media—but this would be too
       burdensome for large character set maps.)

       Both of the above approaches also put an undue burden on the <u>pax</u> archive receiver to  handle  the  cross-
       product of all source and destination codesets.

       To  simplify the translation from the source codeset to the canonical form and from the canonical form to
       the destination codeset, the standard developers decided that the internal  representation  should  be  a
       stateless encoding. A stateless encoding is one where each codepoint has the same meaning, without regard
       to  the decoder being in a specific state. An example of a stateful encoding would be the Japanese Shift-
       JIS; an example of a stateless encoding would be  the  ISO/IEC 646:1991  standard  (equivalent  to  7-bit
       ASCII).

       For  these reasons, the standard developers decided to adopt a canonical format for the representation of
       file information strings. The obvious,  well-endorsed  candidate  is  the  ISO/IEC 10646‐1:2000  standard
       (based  in  part on Unicode), which can be used to represent the characters of virtually all standardized
       character sets. The standard developers initially agreed upon using UCS2 (16-bit Unicode) as the internal
       representation. This repertoire of characters provides a sufficiently rich set to represent all commonly-
       used codesets.

       However, the standard developers found that the 16-bit  Unicode  representation  had  some  problems.  It
       forced  the  issue  of standardizing byte ordering. The 2-byte length of each character made the extended
       header records twice as long for the case of strings coded entirely  from  historical  7-bit  ASCII.  For
       these reasons, the standard developers chose the UTF‐8 defined in the ISO/IEC 10646‐1:2000 standard. This
       multi-byte representation encodes UCS2 or UCS4 characters reliably and deterministically, eliminating the
       need  for  a  canonical byte ordering. In addition, NUL octets and other characters possibly confusing to
       POSIX file systems do not appear, except to represent themselves. It was realized that  certain  national
       codesets  take up more space after the encoding, due to their placement within the UCS range; it was felt
       that the usefulness of the encoding of the names outweighs the disadvantage of size  increase  for  file,
       user, and group names.

       The encoding of UTF‐8 is as follows:

           UCS4 Hex Encoding  UTF-8 Binary Encoding

           00000000-0000007F  0xxxxxxx
           00000080-000007FF  110xxxxx 10xxxxxx
           00000800-0000FFFF  1110xxxx 10xxxxxx 10xxxxxx
           00010000-001FFFFF  11110xxx 10xxxxxx 10xxxxxx 10xxxxxx
           00200000-03FFFFFF  111110xx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx
           04000000-7FFFFFFF  1111110x 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx 10xxxxxx

       where each <b>'x'</b> represents a bit value from the character being translated.

   <b>ustar</b> <b>Interchange</b> <b>Format</b>
       The  description  of  the  <b>ustar</b>  format  reflects  numerous  enhancements  over pre-1988 versions of the
       historical <u>tar</u> utility. The goal of these changes was not only to  provide  the  functional  enhancements
       desired,  but  also  to  retain  compatibility  between new and old versions. This compatibility has been
       retained.  Archives written using the old archive format are compatible with the new format.

       Implementors should be aware that the previous file  format  did  not  include  a  mechanism  to  archive
       directory type files. For this reason, the convention of using a filename ending with &lt;slash&gt; was adopted
       to specify a directory on the archive.

       The  total  size  of  the  <u>name</u>  and  <u>prefix</u>  fields  have  been set to meet the minimum requirements for
       {PATH_MAX}.  If a pathname will fit within the <u>name</u> field, it is recommended that the pathname be  stored
       there  without  the  use of the <u>prefix</u> field. Although the name field is known to be too small to contain
       {PATH_MAX} characters, the value was not changed in this version of the archive  file  format  to  retain
       backwards-compatibility,  and  instead the prefix was introduced. Also, because of the earlier version of
       the format, there is no way to remove the restriction on the <u>linkname</u> field being limited in size to just
       that of the <u>name</u> field.

       The <u>size</u> field is required to be meaningful in all implementation extensions, although it could be  zero.
       This is required so that the data blocks can always be properly counted.

       It  is  suggested  that  if device special files need to be represented that cannot be represented in the
       standard format, that one of the extension types (<b>A</b>‐<b>Z</b>) be used, and that the additional  information  for
       the special file be represented as data and be reflected in the <u>size</u> field.

       Attempting  to  restore a special file type, where it is converted to ordinary data and conflicts with an
       existing filename, need not be specially detected by the utility. If run as an ordinary user, <u>pax</u>  should
       not  be able to overwrite the entries in, for example, <b><a href="file:/dev">/dev</a></b> in any case (whether the file is converted to
       another type or not). If run as a privileged user, it should be able to do so, and it would be considered
       a bug if it did not. The same is true of ordinary data files and similarly named  special  files;  it  is
       impossible  to  anticipate  the needs of the user (who could really intend to overwrite the file), so the
       behavior should be predictable (and thus regular) and rely on the protection system as required.

       The value 7 in the <u>typeflag</u> field is intended to define how contiguous files can be  stored  in  a  <b>ustar</b>
       archive.  POSIX.1‐2008  does not require the contiguous file extension, but does define a standard way of
       archiving such files so that all conforming systems can interpret these file types in  a  meaningful  and
       consistent  manner.  On a system that does not support extended file types, the <u>pax</u> utility should do the
       best it can with the file and go on to the next.

       The file protection modes are those conventionally used by the <u>ls</u> utility. This is  extended  beyond  the
       usage  in  the ISO POSIX‐2 standard to support the ``shared text'' or ``sticky'' bit. It is intended that
       the conformance document should not document anything beyond the existence of and support of such a mode.
       Further extensions are expected to these bits, particularly with overloading  the  set-user-ID  and  set-
       group-ID flags.

   <b>cpio</b> <b>Interchange</b> <b>Format</b>
       The  reference  to  appropriate  privileges in the <b>cpio</b> format refers to an error on standard output; the
       <b>ustar</b> format does not make comparable statements.

       The model for this format was the  historical  System  V  <u>cpio</u><b>-c</b>  data  interchange  format.  This  model
       documents  the  portable version of the <b>cpio</b> format and not the binary version. It has the flexibility to
       transfer data of any type described within  POSIX.1‐2008,  yet  is  extensible  to  transfer  data  types
       specific to extensions beyond POSIX.1‐2008 (for example, contiguous files). Because it describes existing
       practice, there is no question of maintaining upwards-compatibility.

   <b>cpio</b> <b>Header</b>
       There  has  been some concern that the size of the <u>c_ino</u> field of the header is too small to handle those
       systems that have very large <u>inode</u> numbers. However, the <u>c_ino</u> field in the header is used strictly as  a
       hard-link  resolution mechanism for archives. It is not necessarily the same value as the <u>inode</u> number of
       the file in the location from which that file is extracted.

       The name <u>c_magic</u> is based on historical usage.

   <b>cpio</b> <b>Filename</b>
       For most historical implementations of the <u>cpio</u> utility, {PATH_MAX} octets can be used  to  describe  the
       pathname  without  the  addition  of any other header fields (the NUL character would be included in this
       count).  {PATH_MAX} is the minimum value for  pathname  size,  documented  as  256  bytes.   However,  an
       implementation  may  use  <u>c_namesize</u>  to  determine  the  exact  length of the pathname. With the current
       description of the <u>&lt;cpio.h&gt;</u> header, this pathname size can be as large as a number that is  described  in
       six octal digits.

       Two  values  are  documented  under  the  <u>c_mode</u> field values to provide for extensibility for known file
       types:

       <b>0110</b> <b>000</b>  Reserved for contiguous files. The implementation may treat the rest  of  the  information  for
                 this archive like a regular file. If this file type is undefined, the implementation may create
                 the file as a regular file.

       This  provides  for extensibility of the <b>cpio</b> format while allowing for the ability to read old archives.
       Files of an unknown type may be read as ``regular files'' on some implementations.  On a system that does
       not support extended file types, the <u>pax</u> utility should do the best it can with the file and go on to the
       next.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>Chapter</u> <u>2</u>, <u>Shell</u> <u>Command</u> <u>Language</u>, <u>cp</u>, <u>ed</u>, <u>getopts</u>, <u>ls</u>, <u>printf</u>

       The Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>3.169</u>,  <u>File</u>  <u>Mode</u>  <u>Bits</u>,  <u>Chapter</u>  <u>5</u>,  <u>File</u>  <u>Format</u>
       <u>Notation</u>, <u>Chapter</u> <u>8</u>, <u>Environment</u> <u>Variables</u>, <u>Section</u> <u>12.2</u>, <u>Utility</u> <u>Syntax</u> <u>Guidelines</u>, <b>&lt;cpio.h&gt;</b>, <b>&lt;tar.h&gt;</b>

       The  System  Interfaces  volume of POSIX.1‐2017, <u>chown</u>(), <u>creat</u>(), <u>fstatat</u>(), <u>mkdir</u>(), <u>mkfifo</u>(), <u>utime</u>(),
       <u>write</u>()

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                           <u><a href="../man1POSIX/PAX.1POSIX.html">PAX</a></u>(1POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>