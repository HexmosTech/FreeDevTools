<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pki --scep - Enroll an X.509 certificate with a SCEP server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/strongswan-pki">strongswan-pki_5.9.13-2ubuntu4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pki --scep - Enroll an X.509 certificate with a SCEP server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pki</b> <b>--scep</b> <b>--url</b> <u>url</u> [<b>--in</b> <u>file</u>] [<b>--dn</b>  <u>distinguished-name</u>] [<b>--san</b> <u>subjectAltName</u>] [<b>--profile</b> <u>profile</u>]
                  [<b>--password</b> <u>password</u>] <b>--ca-cert-enc</b> <u>file</u> <b>--ca-cert-sig</b> <u>file</u> [<b>--cacert</b> <u>file</u>] <b>[--cert</b> <u>file</u>
                  <b>--key</b> <u>file</u><b>]</b> [<b>--cipher</b> <u>cipher</u>] [<b>--digest</b> <u>digest</u>] [<b>--rsa-padding</b> <u>padding</u>] [<b>--interval</b> <u>time</u>]
                  [<b>--maxpolltime</b> <u>time</u>] [<b>--outform</b> <u>encoding</u>] [<b>--debug</b> <u>level</u>]

       <b>pki</b> <b>--scep</b> <b>--options</b> <u>file</u>

       <b>pki</b> <b>--scep</b> <b>-h</b> | <b>--help</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  sub-command  of  <b><a href="../man1/pki.1.html">pki</a></b>(1)  sends  a  PKCS#10  certificate  request  in an encrypted and signed PKCS#7
       container via HTTP to a SCEP server using the Simple Certificate Enrollment Protocol  (RFC  8894).  After
       successful  authorization  which  with  manual authentication requires periodic polling by the enrollment
       client, the SCEP server returns an X.509 certificate signed by the CA.

       Before the expiry of the current certificate, a new client certificate based on a fresh RSA  private  key
       can  be  requested,  using the old certificate and the old key for automatic authentication with the SCEP
       server.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h,</b> <b>--help</b>
              Print usage information with a summary of the available options.

       <b>-v,</b> <b>--debug</b> <u>level</u>
              Set debug level, default: 1.

       <b>-+,</b> <b>--options</b> <u>file</u>
              Read command line options from <u>file</u>.

       <b>-u,</b> <b>--url</b> <u>url</u>
              URL of the SCEP server.

       <b>-i,</b> <b>--in</b> <u>file</u>
              RSA private key. If not given the key is read from <u>STDIN</u>.

       <b>-d,</b> <b>--dn</b> <u>distinguished-name</u>
              Subject distinguished name (DN). Required unless --cert is given.

       <b>-a,</b> <b>--san</b> <u>subjectAltName</u>
              subjectAltName extension to include in request. Can be used multiple times.

       <b>-P,</b> <b>--profile</b> <u>profile</u>
              Certificate profile name to be included in the  certificate  request.  Can  be  any  UTF8  string.
              Supported  e.g.  by  the <b>openxpki</b> SCEP server with profiles (<u>pc-client</u>, <u>tls-server</u>, etc.) that are
              translated into corresponding Extended Key Usage (EKU) flags in the generated X.509 certificate.

       <b>-p,</b> <b>--password</b> <u>password</u>
              The challengePassword to include in the certificate request.

       <b>-e,</b> <b>--cacert-enc</b> <u>file</u>
              CA or RA certificate for encryption

       <b>-s,</b> <b>--cacert-sig</b> <u>file</u>
              CA certificate for signature verification

       <b>-C,</b> <b>--cacert</b> <u>file</u>
              Additional CA certificate in the trust  chain  used  for  signature  verification.   Can  be  used
              multiple times.

       <b>-c,</b> <b>--cert</b> <u>file</u>
              Client certificate to be renewed.

       <b>-k,</b> <b>--key</b> <u>file</u>
              Client RSA private key to be replaced.

       <b>-E,</b> <b>--cipher</b> <u>cipher</u>
              Cipher used for symmetric encryption. Either <u>aes</u> (the default) or <u>des3</u>.

       <b>-g,</b> <b>--digest</b> <u>digest</u>
              Digest to use for signature creation. One of <u>sha256</u> (the default), <u>sha384</u>, <u>sha512</u>, or <u>sha1</u>.

       <b>-R,</b> <b>--rsa-padding</b> <u>padding</u>
              Padding to use for RSA signatures. Either <u>pkcs1</u> (the default) or <u>pss</u>.

       <b>-t,</b> <b>--interval</b> <u>time</u>
              Poll interval in seconds, defaults to <u>60s</u>.

       <b>-m,</b> <b>--maxpolltime</b> <u>time</u>
              Maximum poll time in seconds, defaults to <u>0</u> which means unlimited polling.

       <b>-f,</b> <b>--outform</b> <u>encoding</u>
              Encoding  of the created certificate file. Either <u>der</u> (ASN.1 DER) or <u>pem</u> (Base64 PEM), defaults to
              <u>der</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To save some typing work the following command line options are stored in a <u>scep.opt</u> file:

       --url <a href="http://pki.strongswan.org">http://pki.strongswan.org</a>:8080/scep
       --cacert-enc myra.crt
       --cacert-sig myca-1.crt
       --cacert myca.crt

       With the following command, an X.509 certificate signed by the intermediate CA is requested from  a  SCEP
       server:

       pki --options scep.opt --in moonKey.der --san "moon.strongswan.org" \
           --dn "C=CH, O=strongSec GmbH, CN=moon.strongswan.org" &gt; moonCert.der

       transaction ID: 4DFCF31CB18A9B5333CCEC6F99CF230E4524E334
         using certificate "C=CH, O=strongSwan Project, CN=SCEP RA"
         using trusted intermediate ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Issuing CA"
         using trusted ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Root CA"
         reached self-signed root ca with a path length of 1
         SCEP request pending, polling indefinitely every 60 seconds
         going to sleep for 60 seconds
       transaction ID: 4DFCF31CB18A9B5333CCEC6F99CF230E4524E334
         ...
         going to sleep for 60 seconds
       Issued certificate "C=CH, O=strongSwan Project, CN=moon.strongswan.org"
         serial: 1e:ff:22:7b:6e:d7:4c:c1:8a:06
         using certificate "C=CH, O=strongSwan Project, CN=moon.strongswan.org"
         using trusted intermediate ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Issuing CA"
         using trusted ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Root CA"
         reached self-signed root ca with a path length of 1
       Issued certificate is trusted, valid from Aug 22 18:56:23 2022 until Aug 22 18:56:23 2023 (currently valid)

       A certificate about to expire can be renewed with the command:

       pki --options scep.opt --in moonNewKey.der --san "moon.strongswan.org" \
           --dn "C=CH, O=strongSec GmbH, CN=moon.strongswan.org" \
           --cert moonCert.der --key moonKey.der &gt; moonNewCert.der

       transaction ID: A9A63D028CC439F68452D125C4DBA025E67DBA95
         using certificate "C=CH, O=strongSwan Project, CN=SCEP RA"
         using trusted intermediate ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Issuing CA"
         using trusted ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Root CA"
         reached self-signed root ca with a path length of 1
       Issued certificate "C=CH, O=strongSwan Project, CN=moon.strongswan.org"
         serial: 1f:ff:b2:78:43:a2:9d:85:00:38
         using certificate "C=CH, O=strongSwan Project, CN=moon.strongswan.org"
         using trusted intermediate ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Issuing CA"
         using trusted ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Root CA"
         reached self-signed root ca with a path length of 1
       Issued certificate is trusted, valid from Jul 20 15:05:33 2023 until Jul 20 15:05:33 2024 (currently valid)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pki.1.html">pki</a></b>(1)

5.9.13                                             2022-08-22                                      <u>PKI</u> <u>--<a href="../man1/SCEP.1.html">SCEP</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>