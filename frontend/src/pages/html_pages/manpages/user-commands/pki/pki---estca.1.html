<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pki --estca - Get CA certificate[s] from an EST server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/strongswan-pki">strongswan-pki_5.9.13-2ubuntu4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pki --estca - Get CA certificate[s] from an EST server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pki</b> <b>--estca</b> <b>--url</b> <u>url</u> [<b>--label</b> <u>label</u>] <b>--cacert</b> <u>file</u> [<b>--caout</b> <u>file</u>] [<b>--outform</b> <u>encoding</u>] [<b>--force</b>]
                   [<b>--debug</b> <u>level</u>]

       <b>pki</b> <b>--estca</b> <b>--options</b> <u>file</u>

       <b>pki</b> <b>--estca</b> <b>-h</b> | <b>--help</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This sub-command of <b><a href="../man1/pki.1.html">pki</a></b>(1) gets CA certificates via https from an EST server using the <u>/cacerts</u> operation
       of the Enrollment over Secure Transport protocol (RFC 7030).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-h,</b> <b>--help</b>
              Print usage information with a summary of the available options.

       <b>-v,</b> <b>--debug</b> <u>level</u>
              Set debug level, default: 1.

       <b>-+,</b> <b>--options</b> <u>file</u>
              Read command line options from <u>file</u>.

       <b>-u,</b> <b>--url</b> <u>url</u>
              URL of the SCEP server.

       <b>-l,</b> <b>--label</b> <u>label</u>
              Label in the EST server path.

       <b>-C,</b> <b>--cacert</b> <u>file</u>
              CA  certificate  in  the  trust chain used for EST TLS server signature verification.  Can be used
              multiple times.

       <b>-c,</b> <b>--caout</b> <u>file</u>
              If present, path where the fetched  root  CA  certificate  file  is  stored  to.   If  several  CA
              certificates  are  downloaded,  then  the  value of <b>--caout</b> is used as a template to derive unique
              filenames (*-1, *-2, etc.) for the intermediate or sub CA  certificates.   If  a  file  suffix  is
              missing,  then  depending  on  the  value  of  <b>--outform</b>  either  .<u>der</u>  (the  default)  or .<u>pem</u> is
              automatically appended.  If the <b>--caout</b> option is missing and <b>--outform</b> is set to <u>pem</u> then a  PEM-
              encoded CA certificate bundle is written to <u>stdout</u>.

       <b>-f,</b> <b>--outform</b> <u>encoding</u>
              Encoding  of the created certificate file. Either <u>der</u> (ASN.1 DER) or <u>pem</u> (Base64 PEM), defaults to
              <u>der</u>.

       <b>-F,</b> <b>--force</b>
              Force overwrite of existing files.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To save some typing work the following command line options are stored in a <u>est.opt</u> file:

       --url https://pki.strongswan.org:8443
       --cacert tlsca.crt
       --cacert tlsca-1.crt

       <b>NOTE:</b> For a successful HTTPS connection, trust must be established into the EST server  certificate.  The
       TLS  trust  chain  including  the root CA certificate and optionally intermediate CA certificates must be
       given using multiple <b>--cacert</b> options.

       An EST server sends a root CA and an intermediate CA certificate:

       pki --estca --options est.opt --caout myca.crt

       negotiated TLS 1.3 using suite TLS_AES_256_GCM_SHA384
       received TLS server certificate 'C=CH, O=strongSwan Project, CN=pki.strongswan.org'
         using certificate "C=CH, O=strongSwan Project, CN=pki.strongswan.org"
         using trusted intermediate ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Issuing CA"
         using trusted ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Root CA"
         reached self-signed root ca with a path length of 1
       Root CA cert "C=CH, O=strongSwan Project, CN=strongSwan Root CA"
         serial: 65:31:00:ca:79:da:16:6b:aa:ac:89:e2:a8:f9:49:c3:10:ab:64:54
         SHA256: 96:70:50:51:cd:b9:e7:94:6b:04:f6:15:45:80:fc:90:85:01:71:2a:f6:4f:d1:1b:2d:a1:7e:eb:bf:dd:be:86
         SHA1  : 8e:f3:78:b0:34:a6:c1:6a:7b:c6:f5:91:eb:e5:46:9b:0d:0a:a7:ba (jvN4sDSmwWp7xvWR6+VGmw0Kp7o)
       Root CA equals trusted TLS Root CA
       Root CA cert is trusted, valid until Aug 12 15:51:34 2032, 'myca.crt'
       Sub CA cert "C=CH, O=strongSwan Project, CN=strongSwan Issuing CA"
         serial: 74:f9:7e:72:7d:b8:fd:f2:c6:e5:1b:fa:37:f9:cb:87:bf:9c:ea:e2
         SHA256: a3:5b:4b:12:d5:8f:68:7b:05:11:08:27:f5:42:62:b8:b5:01:1b:19:37:9c:28:78:5d:37:08:69:6a:8c:07:bf
         SHA1  : 8c:e6:67:67:c2:23:89:7b:d0:bc:b1:50:d2:1c:bc:8d:8d:69:15:11 (jOZnZ8IjiXvQvLFQ0hy8jY1pFRE)
         using certificate "C=CH, O=strongSwan Project, CN=strongSwan Issuing CA"
         using trusted ca certificate "C=CH, O=strongSwan Project, CN=strongSwan Root CA"
         reached self-signed root ca with a path length of 0
       Sub CA cert is trusted, valid until Aug 12 15:51:34 2027, 'myca-1.crt'

       <b>NOTE:</b> The trusthworthiness of the root CA certificate is either verified automatically  if  the  Root  CA
       certificate  of  the  TLS  trust  chain  is the same as that of the Issuing CA. Otherwise trust has to be
       established manually by verifying the SHA256 or SHA1 fingerprint of the DER-encoded certificate  that  is
       e.g. listed on the official PKI website or by some other means.

       The stored certificate files in DER format can be overwritten by PEM-encoded versions with:

       pki --estca --options est.opt --caout myca.crt --outform pem --force

       A CA certificate bundle in PEM format is written to <u>stdout</u>:

       pki --estca --options est.opt --outform pem &gt; cacerts.pem

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pki.1.html">pki</a></b>(1)

5.9.13                                             2022-08-22                                     <u>PKI</u> <u>--<a href="../man1/ESTCA.1.html">ESTCA</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>