<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>h2xs - convert .h C header files to Perl extensions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/perl">perl_5.40.1-2ubuntu0.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       h2xs - convert .h C header files to Perl extensions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>h2xs</b> [<b>OPTIONS</b> ...] [headerfile ... [extra_libraries]]

       <b>h2xs</b> <b>-h</b>|<b>-?</b>|<b>--help</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>h2xs</u> builds a Perl extension from C header files.  The extension will include functions which can be used
       to retrieve the value of any #define statement which was in the C header files.

       The <u>module_name</u> will be used for the name of the extension.  If module_name is not supplied then the name
       of the first header file will be used, with the first character capitalized.

       If the extension might need extra libraries, they should be included here.  The extension Makefile.PL
       will take care of checking whether the libraries actually exist and how they should be loaded.  The extra
       libraries should be specified in the form -lm -lposix, etc, just as on the cc command line.  By default,
       the Makefile.PL will search through the library path determined by Configure.  That path can be augmented
       by including arguments of the form <b>-L/another/library/path</b> in the extra-libraries argument.

       In spite of its name, <u>h2xs</u> may also be used to create a skeleton pure Perl module. See the <b>-X</b> option.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-A</b>, <b>--omit-autoload</b>
            Omit  all  autoload  facilities.   This  is  the  same  as  <b>-c</b> but also removes the "use AutoLoader"
            statement from the .pm file.

       <b>-B</b>, <b>--beta-version</b>
            Use an alpha/beta style version number.   Causes  version  number  to  be  "0.00_01"  unless  <b>-v</b>  is
            specified.

       <b>-C</b>, <b>--omit-changes</b>
            Omits creation of the <u>Changes</u> file, and adds a HISTORY section to the POD template.

       <b>-F</b>, <b>--cpp-flags</b>=<u>addflags</u>
            Additional  flags  to  specify  to  C  preprocessor  when scanning header for function declarations.
            Writes these options in the generated <u>Makefile.PL</u> too.

       <b>-M</b>, <b>--func-mask</b>=<u>regular</u> <u>expression</u>
            selects functions/macros to process.

       <b>-O</b>, <b>--overwrite-ok</b>
            Allows a pre-existing extension directory to be overwritten.

       <b>-P</b>, <b>--omit-pod</b>
            Omit the autogenerated stub POD section.

       <b>-X</b>, <b>--omit-XS</b>
            Omit the XS portion. Used to generate a skeleton pure Perl module.  "-c"  and  "-f"  are  implicitly
            enabled.

       <b>-a</b>, <b>--gen-accessors</b>
            Generate  an accessor method for each element of structs and unions. The generated methods are named
            after the element name; will return the current value of the element if  called  without  additional
            arguments;  and will set the element to the supplied value (and return the new value) if called with
            an additional argument. Embedded structures and unions are returned as a  pointer  rather  than  the
            complete structure, to facilitate chained calls.

            These  methods all apply to the Ptr type for the structure; additionally two methods are constructed
            for the structure type itself, "_to_ptr" which returns a Ptr type pointing to  the  same  structure,
            and a "new" method to construct and return a new structure, initialised to zeroes.

       <b>-b</b>, <b>--compat-version</b>=<u>version</u>
            Generates a .pm file which is backwards compatible with the specified perl version.

            For versions &lt; 5.6.0, the changes are.
                - no use of 'our' (uses 'use vars' instead)
                - no 'use warnings'

            Specifying  a  compatibility  version higher than the version of perl you are using to run h2xs will
            have no effect.  If unspecified h2xs will default to compatibility with the version of perl you  are
            using to run h2xs.

       <b>-c</b>, <b>--omit-constant</b>
            Omit constant() from the .xs file and corresponding specialised "AUTOLOAD" from the .pm file.

       <b>-d</b>, <b>--debugging</b>
            Turn on debugging messages.

       <b>-e</b>, <b>--omit-enums</b>=[<u>regular</u> <u>expression</u>]
            If  <u>regular</u>  <u>expression</u>  is  not  given,  skip  all  constants  that are defined in a C enumeration.
            Otherwise skip only those constants  that  are  defined  in  an  enum  whose  name  matches  <u>regular</u>
            <u>expression</u>.

            Since  <u>regular</u>  <u>expression</u> is optional, make sure that this switch is followed by at least one other
            switch if you omit <u>regular</u> <u>expression</u> and have some pending arguments  such  as  header-file  names.
            This is ok:

                h2xs -e -n Module::Foo foo.h

            This is not ok:

                h2xs -n Module::Foo -e foo.h

            In the latter, foo.h is taken as <u>regular</u> <u>expression</u>.

       <b>-f</b>, <b>--force</b>
            Allows  an extension to be created for a header even if that header is not found in standard include
            directories.

       <b>-g</b>, <b>--global</b>
            Include code for safely storing static data in the .xs file.  Extensions that  do  no  make  use  of
            static data can ignore this option.

       <b>-h</b>, <b>-?</b>, <b>--help</b>
            Print the usage, help and version for this h2xs and exit.

       <b>-k</b>, <b>--omit-const-func</b>
            For function arguments declared as "const", omit the const attribute in the generated XS code.

       <b>-m</b>, <b>--gen-tied-var</b>
            <b>Experimental</b>:  for each variable declared in the header file(s), declare a perl variable of the same
            name magically tied to the C variable.

       <b>-n</b>, <b>--name</b>=<u>module_name</u>
            Specifies a name to be used for the extension, e.g., -n RPC::DCE

       <b>-o</b>, <b>--opaque-re</b>=<u>regular</u> <u>expression</u>
            Use "opaque" data type for the C types matched by the regular expression, even if  these  types  are
            "typedef"-equivalent to types from typemaps.  Should not be used without <b>-x</b>.

            This  may  be  useful since, say, types which are "typedef"-equivalent to integers may represent OS-
            related  handles,  and  one  may  want   to   work   with   these   handles   in   OO-way,   as   in
            "$handle-&gt;do_something()".   Use  "-o  ."  if you want to handle all the "typedef"ed types as opaque
            types.

            The type-to-match is whitewashed (except for commas, which  have  no  whitespace  before  them,  and
            multiple "*" which have no whitespace between them).

       <b>-p</b>, <b>--remove-prefix</b>=<u>prefix</u>
            Specify  a  prefix which should be removed from the Perl function names, e.g., -p sec_rgy_ This sets
            up the XS <b>PREFIX</b> keyword and  removes  the  prefix  from  functions  that  are  autoloaded  via  the
            constant() mechanism.

       <b>-s</b>, <b>--const-subs</b>=<u>sub1,sub2</u>
            Create  a  perl  subroutine  for  the  specified  macros  rather  than  autoload with the <b>constant()</b>
            subroutine.   These  macros   are   assumed   to   have   a   return   type   of   <b>char</b>   <b>*</b>,   e.g.,
            -s sec_rgy_wildcard_name,sec_rgy_wildcard_sid.

       <b>-t</b>, <b>--default-type</b>=<u>type</u>
            Specify  the internal type that the <b>constant()</b> mechanism uses for macros.  The default is IV (signed
            integer).  Currently all macros found during the header scanning process will  be  assumed  to  have
            this type.  Future versions of "h2xs" may gain the ability to make educated guesses.

       <b>--use-new-tests</b>
            When  <b>--compat-version</b>  (<b>-b</b>) is present the generated tests will use "Test::More" rather than "Test"
            which is the default for versions before 5.6.2.  "Test::More" will be  added  to  PREREQ_PM  in  the
            generated "Makefile.PL".

       <b>--use-old-tests</b>
            Will force the generation of test code that uses the older "Test" module.

       <b>--skip-exporter</b>
            Do not use "Exporter" and/or export any symbol.

       <b>--skip-ppport</b>
            Do not use "Devel::PPPort": no portability to older version.

       <b>--skip-autoloader</b>
            Do  not  use  the  module  "AutoLoader";  but  keep  the  <b>constant()</b> function and "sub AUTOLOAD" for
            constants.

       <b>--skip-strict</b>
            Do not use the pragma "strict".

       <b>--skip-warnings</b>
            Do not use the pragma "warnings".

       <b>-v</b>, <b>--version</b>=<u>version</u>
            Specify a version number for this extension.  This version number is added to  the  templates.   The
            default is 0.01, or 0.00_01 if "-B" is specified.  The version specified should be numeric.

       <b>-x</b>, <b>--autogen-xsubs</b>
            Automatically  generate  XSUBs  basing  on  function  declarations  in the header file.  The package
            "C::Scan" should be installed. If this option is specified, the name of the  header  file  may  look
            like  "NAME1,NAME2".  In  this  case  NAME1  is  used instead of the specified string, but XSUBs are
            emitted only for the declarations included from file NAME2.

            Note   that   some   types   of   arguments/return-values    for    functions    may    result    in
            XSUB-declarations/typemap-entries  which  need  hand-editing.  Such  may  be objects which cannot be
            converted from/to a pointer (like "long long"), pointers to functions,  or  arrays.   See  also  the
            section on "LIMITATIONS of <b>-x</b>".

</pre><h4><b>EXAMPLES</b></h4><pre>
           # Default behavior, extension is Rusers
           h2xs rpcsvc/rusers

           # Same, but extension is RUSERS
           h2xs -n RUSERS rpcsvc/rusers

           # Extension is rpcsvc::rusers. Still finds &lt;rpcsvc/rusers.h&gt;
           h2xs rpcsvc::rusers

           # Extension is ONC::RPC.  Still finds &lt;rpcsvc/rusers.h&gt;
           h2xs -n ONC::RPC rpcsvc/rusers

           # Without constant() or AUTOLOAD
           h2xs -c rpcsvc/rusers

           # Creates templates for an extension named RPC
           h2xs -cfn RPC

           # Extension is ONC::RPC.
           h2xs -cfn ONC::RPC

           # Extension is a pure Perl module with no XS code.
           h2xs -X My::Module

           # Extension is Lib::Foo which works at least with Perl5.005_03.
           # Constants are created for all #defines and enums h2xs can find
           # in foo.h.
           h2xs -b 5.5.3 -n Lib::Foo foo.h

           # Extension is Lib::Foo which works at least with Perl5.005_03.
           # Constants are created for all #defines but only for enums
           # whose names do not start with 'bar_'.
           h2xs -b 5.5.3 -e '^bar_' -n Lib::Foo foo.h

           # Makefile.PL will look for library -lrpc in
           # additional directory /opt/net/lib
           h2xs rpcsvc/rusers -L/opt/net/lib -lrpc

           # Extension is DCE::rgynbase
           # prefix "sec_rgy_" is dropped from perl function names
           h2xs -n DCE::rgynbase -p sec_rgy_ dce/rgynbase

           # Extension is DCE::rgynbase
           # prefix "sec_rgy_" is dropped from perl function names
           # subroutines are created for sec_rgy_wildcard_name and
           # sec_rgy_wildcard_sid
           h2xs -n DCE::rgynbase -p sec_rgy_ \
           -s sec_rgy_wildcard_name,sec_rgy_wildcard_sid dce/rgynbase

           # Make XS without defines in perl.h, but with function declarations
           # visible from perl.h. Name of the extension is perl1.
           # When scanning perl.h, define -DEXT=extern -DdEXT= -DINIT(x)=
           # Extra backslashes below because the string is passed to shell.
           # Note that a directory with perl header files would
           #  be added automatically to include path.
           h2xs -xAn perl1 -F "-DEXT=extern -DdEXT= -DINIT\(x\)=" perl.h

           # Same with function declaration in proto.h as visible from perl.h.
           h2xs -xAn perl2 perl.h,proto.h

           # Same but select only functions which match /^av_/
           h2xs -M '^av_' -xAn perl2 perl.h,proto.h

           # Same but treat SV* etc as "opaque" types
           h2xs -o '^[S]V \*$' -M '^av_' -xAn perl2 perl.h,proto.h

   <b>Extension</b> <b>based</b> <b>on</b> <u><b>.h</b></u> <b>and</b> <u><b>.c</b></u> <b>files</b>
       Suppose  that  you have some C files implementing some functionality, and the corresponding header files.
       How to create an extension which makes this functionality accessible in Perl?  The example below  assumes
       that the header files are <u>interface_simple.h</u> and <u>interface_hairy.h</u>, and you want the perl module be named
       as  "Ext::Ension".   If you need some preprocessor directives and/or linking with external libraries, see
       the flags "-F", "-L" and "-l" in "OPTIONS".

       Find the directory name
           Start with a dummy run of h2xs:

             h2xs -Afn Ext::Ension

           The only purpose of this step is to create the needed directories, and let  you  know  the  names  of
           these directories.  From the output you can see that the directory for the extension is <u>Ext/Ension</u>.

       Copy C files
           Copy your header files and C files to this directory <u>Ext/Ension</u>.

       Create the extension
           Run h2xs, overwriting older autogenerated files:

             h2xs -Oxan Ext::Ension interface_simple.h interface_hairy.h

           h2xs  looks  for  header files <u>after</u> changing to the extension directory, so it will find your header
           files OK.

       Archive and test
           As usual, run

             cd Ext/Ension
             perl Makefile.PL
             make dist
             make
             make test

       Hints
           It is important to do "make dist" as early as possible.   This  way  you  can  easily  <b><a href="../man1/merge.1.html">merge</a></b>(1)  your
           changes to autogenerated files if you decide to edit your ".h" files and rerun h2xs.

           Do not forget to edit the documentation in the generated <u>.pm</u> file.

           Consider  the  autogenerated files as skeletons only, you may invent better interfaces than what h2xs
           could guess.

           Consider this section as a guideline only, some other options of h2xs may better suit your needs.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       No environment variables are used.

</pre><h4><b>AUTHOR</b></h4><pre>
       Larry Wall and others

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       perl, perlxstut, ExtUtils::MakeMaker, and AutoLoader.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       The usual warnings if it cannot read or write the files involved.

</pre><h4><b>LIMITATIONS</b> <b>of</b> <b>-x</b></h4><pre>
       <u>h2xs</u> would not distinguish whether an argument to a C function which is of the form, say, "int *", is  an
       input, output, or input/output parameter.  In particular, argument declarations of the form

           int
           foo(n)
               int *n

       should be better rewritten as

           int
           foo(n)
               int &amp;n

       if "n" is an input parameter.

       Additionally, <u>h2xs</u> has no facilities to intuit that a function

          int
          foo(addr,l)
               char *addr
               int   l

       takes a pair of address and length of data at this address, so it is better to rewrite this function as

           int
           foo(sv)
                   SV *addr
               PREINIT:
                   STRLEN len;
                   char *s;
               CODE:
                   s = SvPV(sv,len);
                   RETVAL = foo(s, len);
               OUTPUT:
                   RETVAL

       or alternately

           static int
           my_foo(SV *sv)
           {
               STRLEN len;
               char *s = SvPV(sv,len);

               return foo(s, len);
           }

           MODULE = foo        PACKAGE = foo   PREFIX = my_

           int
           foo(sv)
               SV *sv

       See perlxs and perlxstut for additional details.

perl v5.40.1                                       2025-04-14                                            <u><a href="../man1/H2XS.1.html">H2XS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>