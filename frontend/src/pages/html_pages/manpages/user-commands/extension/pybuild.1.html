<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pybuild  -  invokes  various  build  systems  for requested Python versions in order to build modules and</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/dh-python">dh-python_6.20250308_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pybuild  -  invokes  various  build  systems  for requested Python versions in order to build modules and
       extensions

</pre><h4><b>SYNOPSIS</b></h4><pre>
          pybuild [ACTION] [BUILD SYSTEM ARGUMENTS] [DIRECTORIES] [OPTIONS]

</pre><h4><b>DEBHELPER</b> <b>COMMAND</b> <b>SEQUENCER</b> <b>INTEGRATION</b></h4><pre>
       • build depend on <u>dh-python</u>,

       • build depend on all supported Python interpreters, pybuild will use it to create a list of interpreters
         to build for.  Recognized dependencies:

            • <u>python3-all-dev</u> - for Python extensions that work with Python 3.X interpreters,

            • <u>python3-all-dbg</u> - as above, add this one if you're building -dbg packages,

            • <u>python3-all</u> - for Python modules that work with Python 3.X interpreters,

            • <u>python3-dev</u> - builds  an  extension  for  default  Python  3.X  interpreter  (useful  for  private
              extensions, use python3-all-dev for public ones),

            • <u>python3</u> - as above, used if headers files are not needed to build private module,

       • add <u>--buildsystem=pybuild</u> to dh's arguments in debian/rules,

       • if   more   than  one  binary  package  is  build:  add  debian/python3-foo.install  files,  or  <u>export</u>
         <u>PYBUILD_NAME=modulename</u> (modulename  will  be  used  to  guess  binary  package  prefixes),  or  <u>export</u>
         <u>PYBUILD_DESTDIR</u> env. variables in debian/rules

       • add  <u>--with=python3</u> to dh's arguments in debian/rules (see proper helper's manpage for more details) or
         add <u>dh-sequence-python3</u> to Build-Depends

       debian/rules file example:

          #! /usr/bin/make -f
          export PYBUILD_NAME=foo
          %:
                 dh $@ --with python3 --buildsystem=pybuild

</pre><h4><b>OPTIONS</b></h4><pre>
          Most options can be set (in addition to command line) via environment variables. PyBuild will check:

          • PYBUILD_OPTION_VERSIONED_INTERPRETER (f.e. PYBUILD_CLEAN_ARGS_python3.2)

          • PYBUILD_OPTION_INTERPRETER (f.e. PYBUILD_CONFIGURE_ARGS_python3-dbg)

          • PYBUILD_OPTION (f.e. PYBUILD_INSTALL_ARGS)

   <b>optional</b> <b>arguments</b>
          <b>-h</b>, <b>--help</b>
                 show this help message and exit

          <b>-v</b>, <b>--verbose</b>
                 turn verbose mode on

          <b>-q</b>, <b>--quiet</b>
                 doesn't show external command's output

          <b>-q</b><u>q</u>, <b>--really-quiet</b>
                 be quiet

          <b>--version</b>
                 show program's version number and exit

   <b>ACTION</b>
          The default is to build, install and test the library using detected build system version by  version.
          Selecting  one  of  following  actions, will invoke given action for all versions - one by one - which
          (contrary to the default action) in some build systems can overwrite previous results.

              <b>--detect</b>
                     return the name of detected build system

              <b>--clean</b>
                     clean files using auto-detected build system specific methods

              <b>--configure</b>
                     invoke configure step for all requested Python versions

              <b>--build</b>
                     invoke build step for all requested Python versions

              <b>--install</b>
                     invoke install step for all requested Python versions

              <b>--test</b> invoke tests for auto-detected build system

              <b>--list-systems</b>
                     list available build systems and exit

              <b>--print</b>
                     print pybuild's internal parameters

   <b>TESTS</b>
          unittest's discover from standard library is used in test step by default.

          <b>--test-nose</b>
                 use nose module in test step, remember to add python3-nose to Build-Depends.

          <b>--test-nose2</b>
                 use nose2 module in test step, remember to add python3-nose2 to Build-Depends.

          <b>--test-pytest</b>
                 use pytest module in test step, remember to add python3-pytest to Build-Depends.

          <b>--test-tox</b>
                 use tox command in test step, remember to add tox to Build-Depends.

          <b>--test-stestr</b>
                 use stestr command in test step, remember to add python3-stestr to Build-Depends.

          <b>--test-custom</b>
                 use a custom command in the test step. The full test command is then specified with <u>--test-args</u>
                 or by setting the <u>PYBUILD_TEST_ARGS</u> environment variable. Remember to add any  needed  packages
                 to run the tests to Build-Depends.

   <b>testfiles</b>
          Tests  are  invoked  from  within build directory to make sure newly built files are tested instead of
          source files.  If  test  suite  requires  other  files  in  this  directory,  you  can  list  them  in
          <u>debian/pybuild.testfiles</u>    file    (you    can    also    use   <u>debian/pybuild_pythonX.testfiles</u>   or
          <u>debian/pybuild_pythonX.Y.testfiles</u>) and files listed there will be copied before test step and removed
          before install step.  By default  only  <u>pyproject.toml</u>  and  <u>pytest.ini</u>  files,  and  <u>test</u>  and  <u>tests</u>
          directories are copied to build directory.  If <u>testfiles</u> are provided, it overrides these defaults, if
          still required they need to be explicitly specified.

   <b>BUILD</b> <b>SYSTEM</b> <b>ARGUMENTS</b>
          Additional  arguments  passed  to  the  build  system.   --system=custom  requires complete command in
          --foo-args parameters.

              <b>--before-clean</b> <u>COMMAND</u>
                     invoked before the clean command

              <b>--clean-args</b> <u>ARGUMENTS</u>
                     arguments added to clean command generated by build system plugin

              <b>--after-clean</b> <u>COMMAND</u>
                     invoked after the clean command

              <b>--before-configure</b> <u>COMMAND</u>
                     invoked before the configure command

              <b>--configure-args</b> <u>ARGUMENTS</u>
                     arguments added to configure command generated by build system plugin

              <b>--after-configure</b> <u>COMMAND</u>
                     invoked after the configure command

              <b>--before-build</b> <u>COMMAND</u>
                     invoked before the build command

              <b>--build-args</b> <u>ARGUMENTS</u>
                     arguments added to build command generated by build system plugin

              <b>--after-build</b> <u>COMMAND</u>
                     invoked after the build command

              <b>--before-install</b> <u>COMMAND</u>
                     invoked before the install command

              <b>--install-args</b> <u>ARGUMENTS</u>
                     arguments added to install command generated by build system plugin

              <b>--after-install</b> <u>COMMAND</u>
                     invoked after the install command

              <b>--before-test</b> <u>COMMAND</u>
                     invoked before the test command

              <b>--test-args</b> <u>ARGUMENTS</u>
                     arguments added to test command generated by build system plugin

              <b>--after-test</b> <u>COMMAND</u>
                     invoked after the test command

   <b>variables</b> <b>that</b> <b>can</b> <b>be</b> <b>used</b> <b>in</b> <u><b>ARGUMENTS</b></u> <b>and</b> <u><b>COMMAND</b></u>
       • <u>{version}</u>  will  be  replaced  with  current  Python  version,  you  can  also   use   <u>{version.major}</u>,
         <u>{version.minor}</u>, etc.

       • <u>{interpreter}</u> will be replaced with current interpreter, you can also use <u>{interpreter.include_dir}</u>

       • <u>{dir}</u> will be replaced with sources directory,

       • <u>{destdir}</u> will be replaced with destination directory,

       • <u>{home_dir}</u>  will  be  replaced  with  temporary  HOME  directory,  where  plugins  can  keep their data
         (.pybuild/interpreter_version/ by default),

       • <u>{build_dir}</u> will be replaced with build directory

       • <u>{install_dir}</u> will be replaced with install directory.

       • <u>{package}</u> will be replaced with suggested package name, if --name (or PYBUILD_NAME) is set to <u>foo</u>, this
         variable will be replaced with <u>python3-foo</u>.

   <b>DIRECTORIES</b>
          <b>-d</b> <u>DIR</u>, <b>--dir</b> <u>DIR</u>
                 set source files directory -  base  for  other  relative  dirs  [by  default:  current  working
                 directory]

          <b>--dest-dir</b> <u>DIR</u>
                 set destination directory [default: debian/tmp]

          <b>--ext-dest-dir</b> <u>DIR</u>
                 set destination directory for .so files

          <b>--ext-pattern</b> <u>PATTERN</u>
                 regular  expression  for  files  that  should  be  moved  if  --ext-dest-dir  is  set [default:
                 <u>.so(.[^/]*)?$</u>]

          <b>--ext-sub-pattern</b> <u>PATTERN</u>
                 regular expression for part of path/filename matched in --ext-pattern that should be removed or
                 replaced with --ext-sub-repl

          <b>--ext-sub-repl</b> <u>PATTERN</u>
                 replacement for matches in --ext-sub-pattern

          <b>--install-dir</b> <u>DIR</u>
                 set installation directory [default: .../dist-packages]

          <b>--name</b> <u>NAME</u>
                 use this name to guess destination directories (<u>foo</u>  changes  the  default  <u>--dest-dir</u>  setting
                 <u>debian/python3-foo</u>).   This  name  can also be used to keep multiple builds of unrelated python
                 modules separate from each other. Run <u>pybuild</u> once with <u>--name</u> set to a  different  value,  for
                 each module, at each step of the build.

   <b>variables</b> <b>that</b> <b>can</b> <b>be</b> <b>used</b> <b>in</b> <u><b>DIR</b></u>
       • <u>{version}</u> will be replaced with current Python version,

       • <u>{interpreter}</u> will be replaced with selected interpreter.

   <b>LIMITATIONS</b>
          <b>-s</b> <u>SYSTEM</u>, <b>--system</b> <u>SYSTEM</u>
                 select a build system [default: auto-detection]

          <b>-p</b> <u>VERSIONS</u>, <b>--pyver</b> <u>VERSIONS</u>
                 build  for  Python VERSIONS. This option can be used multiple times.  Versions can be separated
                 by space character.  The default is all Python 3.X supported versions.

          <b>-i</b> <u>INTERPRETER</u>, <b>--interpreter</b> <u>INTERPRETER</u>
                 change interpreter [default: python{version}]

          <b>--disable</b> <u>ITEMS</u>
                 disable action, interpreter,  version  or  any  mix  of  them.   Note  that  f.e.  python3  and
                 python3-dbg   are   two   different   interpreters,   --disable  test/python3  doesn't  disable
                 python3-dbg's tests.

   <b>disable</b> <b>examples</b>
       • <u>--disable</u> <u>test/python3.9-dbg</u> - disables tests for python3.9-dbg

       • <u>--disable</u> <u>'3.8</u> <u>3.9'</u> - disables all actions for version 3.8 and 3.9

       • <u>PYBUILD_DISABLE=python3.9</u> - disables all actions for Python 3.9

       • <u>PYBUILD_DISABLE_python3.3=test</u> - disables tests for Python 3.3

       • <u>PYBUILD_DISABLE=test/python3.3</u> - same as above

       • <u>PYBUILD_DISABLE=configure/python3</u> <u>3.2</u> - disables configure action for all python3 interpreters, and all
         actions for version 3.2

   <b>PLUGINS</b>
       pybuild supports multiple build system plugins.  By default it is automatically selected.  These  systems
       are currently supported:

          * distutils (most commonly used)
          * cmake
          * flit (deprecated)
          * pyproject
          * custom

   <b>flit</b> <b>plugin</b>
       The flit plugin is deprecated, please use the pyproject plugin instead.

       The  flit  plugin  can  be used to build Debian packages based on PEP 517 metadata in <u>pyproject.toml</u> when
       flit is the upstream build system.  These can  be  identified  by  the  presence  of  a  <u>build-backend</u>  <u>=</u>
       <u>"flit_core.buildapi"</u>  element  in  <u>pyproject.toml</u>.   The  flit plugin only supports python3.  To use this
       plugin:

          * build depend on `flit`, and
          * add `export PYBUILD_SYSTEM=flit` to debian/rules to manually select

       debian/rules file example:

          #! /usr/bin/make -f
          export PYBUILD_NAME=foo
          export PYBUILD_SYSTEM=flit
          %:
              dh $@ --with python3 --buildsystem=pybuild

   <b>pyproject</b>
       The pyproject plugin drives the new PEP-517 standard interface for building  Python  packages,  upstream.
       This is configured via <u>pyproject.toml</u>.  This plugin is expected to replace the distutils and flit plugins
       in  the  future.   The  entry  points  generated  by the package are created during the build step (other
       plugins make the entry points during the install step); the entry points are available in PATH during the
       test step, permitting them to be called from tests.

       To use this plugin:

       • build depend on  <u>pybuild-plugin-pyproject</u>  as  well  as  any  build  tools  specified  by  upstream  in
         <u>pyproject.toml</u>.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       As described above in OPTIONS, pybuild can be configured by <u>PYBUILD</u><b>_</b> prefixed environment variables.

       Tests are skipped if <u>nocheck</u> is in the <u>DEB_BUILD_OPTIONS</u> or <u>DEB_BUILD_PROFILES</u> environment variables.

       <u>DESTDIR</u> provides a default a default value to the <u>--dest-dir</u> option.

       Pybuild     will    export    <u>http_proxy=<a href="http://127.0.0.1">http://127.0.0.1</a>:9/</u>,    <u>https_proxy=https://127.0.0.1:9/</u>,    and
       <u>no_proxy=localhost</u> to hopefully block attempts by the package's build-system to access the Internet.   If
       network  access  to  a  loopback  interface  is  needed  and blocked by this, export empty <u>http_proxy</u> and
       <u>https_proxy</u> variables before calling pybuild.

       If     not     set,     <u>LC_ALL</u>,     <u>CCACHE_DIR</u>,     <u>DEB_PYTHON_INSTALL_LAYOUT</u>,     <b>_</b><u>PYTHON_HOST_PLATFORM</u>,
       <b>_</b><u>PYTHON_SYSCONFIGDATA_NAME</u>,  will  all  be  set to appropriate values, before calling the package's build
       script.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       • <a href="../man1/dh_python3.1.html">dh_python3</a>(1)

       •
          &lt;https://wiki.debian.org/Python/Pybuild&gt;

       •
          &lt;<a href="http://deb.li/pybuild">http://deb.li/pybuild</a>&gt;  - most recent version of this document

</pre><h4><b>AUTHOR</b></h4><pre>
       Piotr Ożarowski, 2012-2019

                                                                                                      <u><a href="../man1/PYBUILD.1.html">PYBUILD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>