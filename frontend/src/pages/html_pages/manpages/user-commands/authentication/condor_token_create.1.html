<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>condor_token_create - HTCondor Manual</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/condor">condor_23.6.2+dfsg-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       condor_token_create - HTCondor Manual

       given a password file, create an authentication token for the IDTOKENS authentication method

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>condor_token_create</b>  <b>-identity</b>  <u>user@domain</u>  [<b>-key</b>  <u>keyid</u>]  [<b>-authz</b>  <u>authz</u> ...] [<b>-lifetime</b> <u>value</u>] [<b>-token</b>
       <u>filename</u>] [<b>-debug</b>]

       <b>condor_token_create</b> [<b>-help</b> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>condor_token_create</u> will read an HTCondor password file inside the  <u>SEC_PASSWORD_DIRECTORY</u>  (by  default,
       this is the pool password) and use it to create an authentication token.  The authentication token may be
       subsequently used by clients to authenticate against a remote HTCondor server.  Tokens allow fine-grained
       authentication  as individual HTCondor users as opposed to pool password, where anything in possession of
       the pool password will authenticate as the same user.

       An identity must be specified for the token; this will be the client's resulting identity at  the  remote
       HTCondor  server.  If the <b>-lifetime</b> or (one or more) <b>-authz</b> options are specified, the token will contain
       additional restrictions that limit what the client will be authorized to do.  If an attacker is  able  to
       access the token, they will be able to authenticate with the identity listed in the token (subject to the
       restrictions above).

       If  successful,  the  resulting  token  will  be sent to <b>stdout</b>; by specifying the <b>-token</b> option, it will
       instead be written to the user's token directory.   If  written  to  <u>SEC_TOKEN_SYSTEM_DIRECTORY</u>  (default
       <b>/etc/condor/tokens.d</b>), then the token can be used for daemon-to-daemon authentication.

       <u>condor_token_create</u> is only currently supported on Unix platforms.

</pre><h4><b>OPTIONS</b></h4><pre>
          <b>-authz</b> <u>authz</u>
                 Adds  a restriction to the token so it is only valid to be used for a given authorization level
                 (such as <b>READ</b>, <b>WRITE</b>, <b>DAEMON</b>, <b>ADVERTISE_STARTD</b>).  If multiple authorizations are  needed,  then
                 <b>-authz</b>  must  be  specified  multiple  times.   If  <b>-authz</b>  is  not specified, no authorization
                 restrictions are added and authorization will be solely based on the  token's  identity.   <b>NOTE</b>
                 that  <b>-authz</b>  cannot be used to give an identity additional permissions at the remote host.  If
                 the server's admin only permits the user <b>READ</b> authorization, then specifying <b>-authz</b> <b>WRITE</b> in  a
                 token will not allow the user to perform writes.

          <b>-debug</b> Causes  debugging  information  to  be  sent to <b>stderr</b>, based on the value of the configuration
                 variable <u>TOOL_DEBUG</u>.

          <b>-help</b>  Display brief usage information and exit.

          <b>-identity</b> <u>user@domain</u>
                 Set a specific client identity to be written into the token; a client will authenticate as this
                 identity with a remote server.

          <b>-key</b> <u>keyid</u>
                 Specify a key  file  to  use  under  the  directory  specified  by  the  <u>SEC_PASSWORD_DIRECTORY</u>
                 configuration  variable.  The  key name must match a file in the password directory; the file's
                 contents must be created with <u>condor_store_cred</u> and will be used to sign the  resulting  token.
                 If <b>-key</b> is not set, then the default pool password will be used.

          <b>-lifetime</b> <u>value</u>
                 Specify the lifetime, in seconds, for the token to be valid (the token validity will start when
                 the token is signed).  After the lifetime expires, the token cannot be used for authentication.
                 If not specified, the token will contain no lifetime restrictions.

          <b>-token</b> <u>filename</u>
                 Specifies  a  filename,  relative  to  the  directory  in the <u>SEC_TOKEN_DIRECTORY</u> configuration
                 variable (for example, on Linux this defaults to <b><a href="file:~/.condor/tokens.d">~/.condor/tokens.d</a></b>), where the resulting token
                 is stored.  If not specified, the token will be sent to <b>stdout</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To create a token for <b><a href="mailto:jane@cs.wisc.edu">jane@cs.wisc.edu</a></b> with no additional restrictions:

          $ condor_token_create -identity <a href="mailto:jane@cs.wisc.edu">jane@cs.wisc.edu</a>
          eyJhbGciOiJIUzI1NiIsImtpZCI6Il....bnu3NoO9BGM

       To  create  a  token  for  <b><a href="mailto:worker-node@cs.wisc.edu">worker-node@cs.wisc.edu</a></b>  that  may  advertise  either  a  <u>condor_startd</u>  or  a
       <u>condor_master</u>:

          $ condor_token_create -identity <a href="mailto:worker-node@cs.wisc.edu">worker-node@cs.wisc.edu</a> \
                                -authz ADVERTISE_STARTD \
                                -authz ADVERTISE_MASTER
          eyJhbGciOiJIUzI1NiIsImtpZC.....8wkstyj_OnM0SHsOdw

       To  create  a  token  for  <b><a href="mailto:friend@cs.wisc.edu">friend@cs.wisc.edu</a></b>  that  is only valid for 10 minutes, and then to save it to
       <b><a href="file:~/.condor/tokens.d/friend">~/.condor/tokens.d/friend</a></b>:

          $ condor_token_create -identity <a href="mailto:friend@cs.wisc.edu">friend@cs.wisc.edu</a> -lifetime 600 -token friend

       If the administrator would like to create a specific key for signing tokens, <b>token_key</b>, distinct from the
       default pool password, they would first use <u>condor_store_cred</u> to create the key:

          $ openssl rand -base64 32 | condor_store_cred -f /etc/condor/passwords.d/token_key

       Note, in this case, we created a random 32 character key using SSL instead of providing a  human-friendly
       password.

       Next, the administrator would run run <u>condor_token_create</u>:

          $ condor_token_create -identity <a href="mailto:frida@cs.wisc.edu">frida@cs.wisc.edu</a> -key token_key
          eyJhbGciOiJIUzI1NiIsImtpZCI6I.....eyJpYXQiOUzlN6QA

       If the <b>token_key</b> file is deleted from the <u>SEC_PASSWORD_DIRECTORY</u>, then all of the tokens issued with that
       key will be invalidated.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <u>condor_token_create</u>  will  exit  with a non-zero status value if it fails to read the password file, sign
       the token, write the output, or experiences some other error.  Otherwise, it will exit 0.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/condor_store_cred.1.html">condor_store_cred</a>(1)</b>, <b><a href="../man1/condor_token_fetch.1.html">condor_token_fetch</a>(1)</b>, <b><a href="../man1/condor_token_request.1.html">condor_token_request</a>(1)</b>, <b><a href="../man1/condor_token_list.1.html">condor_token_list</a>(1)</b>

</pre><h4><b>AUTHOR</b></h4><pre>
       Center for High Throughput Computing, University of Wisconsin-Madison

</pre><h4><b>AUTHOR</b></h4><pre>
       HTCondor Team

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1990-2024, Center for High Throughput Computing, Computer Sciences Department, University  of  Wisconsin-
       Madison, Madison, WI, US. Licensed under the Apache License, Version 2.0.

                                                  Jan 04, 2025                            <u><a href="../man1/CONDOR_TOKEN_CREATE.1.html">CONDOR_TOKEN_CREATE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>