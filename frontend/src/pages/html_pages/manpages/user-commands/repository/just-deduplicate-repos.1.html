<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>just-deduplicate-repos - remove duplicate repositories from a multi-repository configuration</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/justbuild">justbuild_1.4.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       just-deduplicate-repos - remove duplicate repositories from a multi-repository configuration

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>just-deduplicate-repos</b> [<u>repository</u> <u>name</u>]...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Read  a  multi-repository  configuration  from  stdin and print to stdout a repository configuration with
       indistinguishable repositories merged to a single repository.  In doing so, keep the  "main"  repository,
       as  well  as  any  repositories  specified as arguments on the command line, even if that means that some
       indistinguishable repositories cannot be merged into one (as both have to be kept).

</pre><h4><b>RATIONALE</b></h4><pre>
       As <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1) is  a  multi-repository  build  system,  typically  imported  dependencies  also  contain
       multi-repository  set  up.   Hence,  a  project  typically  has three components to describe the involved
       logical repositories.

       First, there is a description of the local  repositories,  i.e.,  the  logical  repositories  (as  "file"
       repositories)  that  reside  in  this  physical  repository  in  the  sense of the version-control system
       (typically  <b><a href="../man1/git.1.html">git</a></b>(1)).   They  are  described  in  a   file   often   called   etc/repos.template.json   in
       <b><a href="../man5/just-mr-repository-config.5.html">just-mr-repository-config</a></b>(5) format with open names for the direct dependencies.

       Next,  there is a description of where to get the direct dependencies and which branches to follow there.
       This description is typically a script piping said repos.template.json through a sequence of  invocations
       of <b><a href="../man1/just-import-git.1.html">just-import-git</a></b>(1) which also adds the indirect dependencies.

       Finally, the output of that script is the multi-repository configuration etc/repos.json for this project.
       This  file,  while  being  generated,  is still committed into the repository.  First of all, it contains
       additional information: the precise pinned versions of (all) the dependencies  which  might  change  over
       time.   So  committing this file allows others to build with the precise same dependencies (including for
       old versions of the project).  Moreover, having the multi-repository configuration  materialized  in  the
       repository  allows  offline  builds  once  the  dependencies  have  been fetched (possibly by a different
       project) to <b><a href="../man1/just-mr.1.html">just-mr</a></b>(1)â€™s local build root (possibly by the setup for a different project that happens  to
       have those dependencies as well).  To update the dependencies, the import script can be run again and the
       newly  created  etc/repos.json  committed  in an update commit (after verifying that this update does not
       break anything).  The final reason to commit a generated etc/repos.json is to close the  loop  and  allow
       this  project to be the dependency of another one; to keep the work done by <b><a href="../man1/just-import-git.1.html">just-import-git</a></b>(1) manageable
       it requires the imported repository to have all its (direct or indirect) dependencies described precisely
       in their multi-repository config.

       When a project has more than one direct dependency, it can happen that two  of  the  direct  dependencies
       have  a  common  dependency.  Simply chaining <b><a href="../man1/just-import-git.1.html">just-import-git</a></b>(1) this dependency will end up twice in the
       final repository configuration.  While this will not result in additional actions, it will  increase  the
       cost  of  the  analysis.   Moreover,  not  merging indistinguishable repositories will make the resulting
       etc/repos.json bigger and propagate those redundant copies to other projects  importing  this  one;  that
       mechanism  can,  over  a  long  chain of imports, lead to exponential many of those redundant copies.  To
       avoid this, <b>just-deduplicate-repos</b> can be added as a last step (before the JSON pretty printing)  in  the
       import script.

</pre><h4><b>See</b> <b>also</b></h4><pre>
       <b><a href="../man5/just-mr-repository-config.5.html">just-mr-repository-config</a></b>(5), <b><a href="../man1/just-import-git.1.html">just-import-git</a></b>(1) <b><a href="../man1/just-mr.1.html">just-mr</a></b>(1)

                                                                                       <u><a href="../man1/JUST-DEDUPLICATE-REPOS.1.html">JUST-DEDUPLICATE-REPOS</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>