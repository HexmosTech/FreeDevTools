<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>aptly - Debian repository management tool</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/aptly">aptly_1.6.1+ds1-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>aptly</b> - Debian repository management tool

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Common command format:

       <b>aptly</b> [<u>global</u> <u>options</u>...] <u>command</u> <u>subcommand</u> [<u>options</u>...] <u>arguments</u>

       aptly has integrated help that matches contents of this manual page, to get help, prepend <b>help</b> to command
       name:

       <b>aptly</b> <b>help</b> <b>mirror</b> <b>create</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       aptly  is  a  tool  to create partial and full mirrors of remote repositories, manage local repositories,
       filter them, merge, upgrade  individual  packages,  take  snapshots  and  publish  them  back  as  Debian
       repositories.

       aptly’s goal is to establish repeatability and controlled changes in a package-centric environment. aptly
       allows  one  to  fix  a set of packages in a repository, so that package installation and upgrade becomes
       deterministic. At the same  time  aptly  allows  one  to  perform  controlled,  fine-grained  changes  in
       repository contents to transition your package environment to new version.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       aptly  looks  for  configuration  file  first  in  <b><a href="file:~/.aptly.conf">~/.aptly.conf</a></b>  then  in  <b>/usr/local/etc/aptly.conf</b> and
       <b>/etc/aptly.conf</b>. If no config file found (or they are not readable), a new one is  created  in  the  home
       directory.  If  <b>-config=</b> flag is specified, aptly would use config file at specified location. Also aptly
       needs root directory for database, package and published repository storage. If not specified,  directory
       defaults to <b><a href="file:~/.aptly/">~/.aptly/</a></b>, it will be created if missing.

       With  aptly version 1.6.0, yaml configuration with inline documentation is supported and recommended (see
       <b>debian/aptly.conf</b>).

       The legacy json configuration is still supported (and also supports comments):

           // vim: : filetype=json
           // json configuration file with comments
           // validate with: sed ’/\/\//d’ aptly.conf | json_pp
           {

           // Aptly Configuration File
           ////////////////////////////

             // Root directory for:
             // - downloaded packages (`rootDir`/pool)
             // - database (`rootDir`/db)
             // - published repositories (`rootDir`/public)
             "rootDir": "<a href="file:~/.aptly">~/.aptly</a>",

             // Number of attempts to open database if it’s locked by other instance
             // * -1 (no retry)
             "databaseOpenAttempts": -1,

             // Log Level
             // * debug
             // * info
             // * warning
             // * error
             "logLevel": "info",

             // Log Format
             // * default (text)
             // * json
             "logFormat": "default",

             // Default Architectures
             // empty array defaults to all available architectures
             "architectures": [],

             // Follow contents of `Suggests:` field when processing dependencies for the package
             "dependencyFollowSuggests": false,

             // Follow contents of `Recommends:` field when processing dependencies for the package
             "dependencyFollowRecommends": false,

             // When dependency looks like `package-a | package-b`, follow both variants always
             "dependencyFollowAllVariants": false,

             // Follow dependency from binary package to source package
             "dependencyFollowSource": false,

             // Log additional details while resolving dependencies (useful for debugging)
             "dependencyVerboseResolve": false,

             // Specifies paramaters for short PPA url expansion
             // empty defaults to output of `lsb_release` command
             "ppaDistributorID": "ubuntu",

             // Codename for short PPA url expansion
             "ppaCodename": "",

             // OBSOLETE
             // in aptly up to version 1.0.0, package files were stored in internal package pool
             // with MD5-dervied path, since 1.1.0 package pool layout was changed;
             // if option is enabled, aptly stops checking for legacy paths;
             // by default option is enabled for new aptly installations and disabled when
             // upgrading from older versions
             "skipLegacyPool": true,

           // Aptly Server
           ////////////////

             // Serve published repos as well as API
             "serveInAPIMode": false,

             // Enable metrics for Prometheus client
             "enableMetricsEndpoint": false,

             // Not implemented in this version.
             // Enable API documentation on /docs
             //"enableSwaggerEndpoint": false,

             // OBSOLETE: use via url param ?_async=true
             "AsyncAPI": false,

           // Database
           ////////////

             // Database backend
             // Type must be one of:
             // * leveldb (default)
             // * etcd
             "databaseBackend": {
               // LevelDB
               "type": "leveldb",
               // Path to leveldb files
               // empty dbPath defaults to `rootDir`/db
               "dbPath": ""

               // // etcd
               // "type": "etcd",
               // // URL to db server
               // "url": "127.0.0.1:2379"
             },

           // Mirroring
           /////////////

             // Downloader
             // * "default"
             // * "grab"      (more robust)
             "downloader": "default",

             // Number of parallel download threads to use when downloading packages
             "downloadConcurrency": 4,

             // Limit in kbytes/sec on download speed while mirroring remote repositories
             "downloadSpeedLimit": 0,

             // Number of retries for download attempts
             "downloadRetries": 0,

             // Download source packages per default
             "downloadSourcePackages": false,

           // Signing
           ///////////

             // GPG Provider
             // * "internal" (Go internal implementation)
             // * "gpg"      (External `gpg` utility)
             "gpgProvider": "gpg",

             // Disable signing of published repositories
             "gpgDisableSign": false,

             // Disable signature verification of remote repositories
             "gpgDisableVerify": false,

           // Publishing
           //////////////

             // Do not publish Contents files
             "skipContentsPublishing": false,

             // Do not create bz2 files
             "skipBz2Publishing": false,

           // Storage
           ///////////

             // Filesystem publishing endpoints
             //
             // aptly defaults to publish to a single publish directory under `rootDir`/public. For
             // a more advanced publishing strategy, you can define one or more filesystem endpoints in the
             // `FileSystemPublishEndpoints` list of the aptly configuration file. Each endpoint has a name
             // and the following associated settings.
             //
             // In order to publish to such an endpoint, specify the endpoint as `filesystem:endpoint-name`
             // with `endpoint-name` as the name given in the aptly configuration file. For example:
             //
             //   `aptly publish snapshot wheezy-main filesystem:test1:wheezy/daily`
             //
             "FileSystemPublishEndpoints": {
               // // Endpoint Name
               // "test1": {
               //    // Directory for publishing
               //    "rootDir": "/opt/srv/aptly_public",

               //    // File Link Method for linking files from the internal pool to the published directory
               //    // * hardlink
               //    // * symlink
               //    // * copy
               //    "linkMethod": "hardlink",

               //    // File Copare Method for comparing existing links from the internal pool to the published directory
               //    // Only used when "linkMethod" is set to "copy"
               //    // * md5 (default: compare md5 sum)
               //    // * size (compare file size)
               //    "verifyMethod": "md5"
               // }
             },

             // S3 Endpoint Support
             //
             // cloud storage). First, publishing
             // endpoints should be described in aptly configuration file. Each endpoint has name
             // and associated settings.
             //
             // In order to publish to S3, specify endpoint as `s3:endpoint-name:` before
             // publishing prefix on the command line, e.g.:
             //
             //   `aptly publish snapshot wheezy-main s3:test:`
             //
             "S3PublishEndpoints": {
               // // Endpoint Name
               // "test": {

               //    // Amazon region for S3 bucket
               //    "region": "us-east-1",

               //    // Bucket name
               //    "bucket": "test-bucket",

               //    // Endpoint (optional)
               //    // When using S3-compatible cloud storage, specify hostname of service endpoint here,
               //    // region is ignored if endpoint is set (set region to some human-readable name)
               //    // (should be left blank for real Amazon S3)
               //    "endpoint": "",

               //    // Prefix (optional)
               //    // publishing under specified prefix in the bucket, defaults to
               //    // no prefix (bucket root)
               //    "prefix": "",

               //    // Default ACLs (optional)
               //    // assign ACL to published files (one of the canned ACLs in Amazon
               //    // terminology). Useful values: `private` (default), `public-read` (public
               //    // repository) or `none` (don’t set ACL). Public repositories could be consumed by `apt` using
               //    // HTTP endpoint (Amazon bucket should be configured for "website hosting"),
               //    // for private repositories special apt S3 transport is required.
               //    "acl": "private",

               //    // Credentials (optional)
               //    // Amazon credentials to access S3 bucket. If not supplied,
               //    // environment variables `AWS_ACCESS_KEY_ID` and `AWS_SECRET_ACCESS_KEY`
               //    // are used.
               //    "awsAccessKeyID": "",
               //    "awsSecretAccessKey": "",

               //    // Storage Class (optional)
               //    // Amazon S3 storage class, defaults to `STANDARD`. Other values
               //    // available: `REDUCED_REDUNDANCY` (lower price, lower redundancy)
               //    "storageClass": "STANDARD",

               //    // Encryption Method (optional)
               //    // Server-side encryption method, defaults to none. Currently
               //    // the only available encryption method is `AES256`
               //    "encryptionMethod": "none",

               //    // Plus Workaround (optional)
               //    // Workaround misbehavior in apt and Amazon S3 for files with `+` in filename by
               //    // creating two copies of package files with `+` in filename: one original
               //    // and another one with spaces instead of plus signs
               //    // With `plusWorkaround` enabled, package files with plus sign
               //    // would be stored twice. aptly might not cleanup files with spaces when published
               //    // repository is dropped or updated (switched) to new version of repository (snapshot)
               //    "plusWorkaround": false,

               //    // Disable MultiDel (optional)
               //    // For S3-compatible cloud storages which do not support `MultiDel` S3 API,
               //    // enable this setting (file deletion would be slower with this setting enabled)
               //    "disableMultiDel": false,

               //    // ForceSig2 (optional)
               //    // Disable Signature V4 support, useful with non-AWS S3-compatible object stores
               //    // which do not support SigV4, shouldn’t be enabled for AWS
               //    "forceSigV2": false,

               //    // ForceVirtualHostedStyle (optional)
               //    // Disable path style visit, useful with non-AWS S3-compatible object stores
               //    // which only support virtual hosted style
               //    "forceVirtualHostedStyle": false,

               //    // Debug (optional)
               //    // Enables detailed request/response dump for each S3 operation
               //    "debug": false
               // }
             },

             // Swift Endpoint Support
             //
             // aptly could be configured to publish repository directly to OpenStack Swift. First,
             // publishing endpoints should be described in aptly configuration file. Each endpoint
             // has name and associated settings.
             //
             // In order to publish to Swift, specify endpoint as `swift:endpoint-name:` before
             // publishing prefix on the command line, e.g.:
             //
             //   `aptly publish snapshot jessie-main swift:test:`
             //
             "SwiftPublishEndpoints": {
               // Endpoint Name
               // "test": {

               //    // Container Name
               //    "container": "taylor1",

               //    // Prefix (optional)
               //    // Publish under specified prefix in the container, defaults to no prefix (container root)
               //    "prefix": "",

               //    // Credentials (optional)
               //    // OpenStack credentials to access Keystone. If not supplied, environment variables `OS_USERNAME` and `OS_PASSWORD` are used
               //    "osname": "",
               //    "password": "",

               //    // Tenant (optional)
               //    // OpenStack tenant name and id (in order to use v2 authentication)
               //    "tenant": "",
               //    "tenantid": "",

               //    // Auth URL (optional)
               //    // Full url of Keystone server (including port, and version).
               //    // Example `<a href="http://identity.example.com">http://identity.example.com</a>:5000/v2.0`
               //    "authurl": ""
               // }
             },

             // Azure Endpoint Support
             //
             // aptly can be configured to publish repositories directly to Microsoft Azure Blob
             // Storage. First, publishing endpoints should be described in the aptly
             // configuration file. Each endpoint has its name and associated settings.
             "AzurePublishEndpoints": {
               // // Endpoint Name
               // "test": {

               //    // Container Name
               //    "container": "container1",

               //    // Prefix (optional)
               //    // Publishing under specified prefix in the container, defaults to no prefix (container root)
               //    "prefix": "",

               //    // Credentials
               //    // Azure storage account access key to access blob storage
               //    "accountName": "",
               //    "accountKey": "",

               //    // Endpoint URL
               //    // See: Azure documentation https://docs.microsoft.com/en-us/azure/storage/common/storage-configure-connection-string
               //    // defaults to "https://&lt;accountName&gt;.blob.core.windows.net"
               //    "endpoint": ""
               // }
             },

             // Package Pool
             // Location for storing downloaded packages
             // Type must be one of:
             // * local
             // * azure
             "packagePoolStorage": {
               // Local Pool
               "type": "local",
               // Local Pool Path
               // empty path defaults to `rootDir`/pool
               "path": ""

               // // Azure Azure Blob Storage Pool
               // "type": "azure",
               // "container": "pool1",

               // // Prefix (optional)
               // // Publishing under specified prefix in the container, defaults to no prefix (container root)
               // "prefix": "",

               // // Credentials
               // // Azure storage account access key to access blob storage
               // "accountName": "",
               // "accountKey": "",

               // // Endpoint URL
               // // See: Azure documentation https://docs.microsoft.com/en-us/azure/storage/common/storage-configure-connection-string
               // // defaults to "https://&lt;accountName&gt;.blob.core.windows.net"
               // "endpoint": ""
             }

           // End of config
           }

</pre><h4><b>PACKAGE</b> <b>QUERY</b></h4><pre>
       Some commands accept package queries to identify list of packages to process. Package query syntax almost
       matches <b>reprepro</b> query language. Query consists of the following simple terms:

       direct package reference
              reference to exaclty one package. Format is identical to the way  aptly  lists  packages  in  show
              commands         with         <b>-with-packages</b>         flag:         <b>name_version_arch</b>,        e.g.:
              <b>libmysqlclient18_5.5.35-rel33.0-611.squeeze_amd64</b>

       dependency condition
              syntax  follows  Debian  dependency  specification:  package_name  followed  by  optional  version
              specification and architecture limit, e.g: <b>mysql-client</b> <b>(&gt;=</b> <b>3.6)</b>.

       query against package fields
              syntax  is  the same as for dependency conditions, but instead of package name field name is used,
              e.g: <b>Priority</b> <b>(optional)</b>.

       Supported fields:

       ○   all field names from Debian package control files are supported except for  <b>Filename</b>,  <b>MD5sum</b>,  <b>SHA1</b>,
           <b>SHA256</b>, <b>Size</b>, <b>Files</b>, <b>Checksums-SHA1</b>, <b>Checksums-SHA256</b>.

       ○   <b>$Source</b> is a name of source package (for binary packages)

       ○   <b>$SourceVersion</b> is a version of source package

       ○   <b>$Architecture</b>  is <b>Architecture</b> for binary packages and <b>source</b> for source packages, when matching with
           equal (<b>=</b>) operator, package with <b>any</b> architecture matches all architectures but <b>source</b>.

       ○   <b>$Version</b> has the same value as <b>Version</b>, but comparison operators use Debian version precedence rules

       ○   <b>$PackageType</b> is <b>deb</b> for binary packages and <b>source</b> for source packages

       Operators:

       <b>=</b>      strict match, default operator is no operator is given

       <b>&gt;=</b>, <b>&lt;=</b>, <b>=</b>, <b>&gt;&gt;</b> (strictly greater), <b>&lt;&lt;</b> (strictly less)
              lexicographical comparison for all fields and special rules when comparing package versions

       <b>%</b>      pattern matching, like shell patterns, supported special symbols are:  <b>[^]?*</b>,  e.g.:  <b>$Version</b>  <b>(%</b>
              <b>3.5-*)</b>

       <b>~</b>      regular expression matching, e.g.: <b>Name</b> <b>(~</b> <b>.*-dev)</b>

       Simple  terms  could  be  combined into more complex queries using operators <b>,</b> (and), <b>|</b> (or) and <b>!</b> (not),
       parentheses <b>()</b> are used to change operator precedence. Match value could be enclosed  in  single  (<b>’</b>)  or
       double (<b>"</b>) quotes if required to resolve ambiguity, quotes inside quoted string should escaped with slash
       (<b>\</b>).

       Examples:

       <b>mysql-client</b>
              matches  package  mysql-client  of  any  version and architecture (including source), also matches
              packages that <b>Provide:</b> <b>mysql-client</b>.

       <b>mysql-client</b> <b>(&gt;=</b> <b>3.6)</b>
              matches package mysql-client with version greater or equal to 3.6.  Valid  operators  for  version
              are: <b>&gt;=</b>, <b>&lt;=</b>, <b>=</b>, <b>&gt;&gt;</b> (strictly greater), <b>&lt;&lt;</b> (strictly less).

       <b>mysql-client</b> <b>{i386}</b>
              matches  package <b>mysql-client</b> on architecture <b>i386</b>, architecture <b>all</b> matches all architectures but
              source.

       <b>mysql-client</b> <b>(&gt;=</b> <b>3.6)</b> <b>{i386}</b>
              version and architecture conditions combined.

       <b>libmysqlclient18_5.5.35-rel33.0-611.squeeze_amd64</b>
              direct package reference.

       <b>$Source</b> <b>(nginx)</b>
              all binary packages with <b>nginx</b> as source package.

       <b>!Name</b> <b>(~</b> <b>.*-dev),</b> <b>mail-transport,</b> <b>$Version</b> <b>(&gt;=</b> <b>3.5)</b>
              matches all packages that provide <b>mail-transport</b> with name  that  has  no  suffix  <b>-dev</b>  and  with
              version greater or equal to <b>3.5</b>.

       When  specified  on  command line, query may have to be quoted according to shell rules, so that it stays
       single argument:

       <b>aptly</b> <b>repo</b> <b>import</b> <b>percona</b> <b>stable</b> <b>’mysql-client</b> <b>(&gt;=</b> <b>3.6)’</b>

</pre><h4><b>PACKAGE</b> <b>DISPLAY</b> <b>FORMAT</b></h4><pre>
       Some aptly commands (<b>aptly</b> <b>mirror</b> <b>search</b>, <b>aptly</b> <b>package</b> <b>search</b>, ...) support <b>-format</b> flag which allows to
       customize how search results are printed. Golang templates are used to specify display format,  with  all
       package stanza fields available to template. In addition to package stanza fields aptly provides:

       <b>Key</b>    internal  aptly  package  ID,  unique  for  all  packages  in  aptly  (combination of <b>ShortKey</b> and
              <b>FilesHash</b>).

       <b>FilesHash</b>
              hash that includes MD5 of all packages files.

       <b>ShortKey</b>
              package ID, which is unique in single list (mirror, repo, snapshot, ...), but not unique in  whole
              aptly package collection.

       For   example,   default   aptly   display  format  could  be  presented  with  the  following  template:
       <b>{{.Package}}_{{.Version}}_{{.Architecture}}</b>. To display package name with  dependencies:  <b>{{.Package}}</b>  <b>|</b>
       <b>{{.Depends}}</b>. More information on Golang template syntax: <a href="http://godoc.org/text/template">http://godoc.org/text/template</a>

</pre><h4><b>GLOBAL</b> <b>OPTIONS</b></h4><pre>
       -<b>architectures</b>=
              list of architectures to consider during (comma-separated), default to all available

       -<b>config</b>=
              location    of    configuration    file    (default    locations    in    order:    <a href="file:~/.aptly.conf">~/.aptly.conf</a>,
              /usr/local/etc/aptly.conf, /etc/aptly.conf)

       -<b>db-open-attempts</b>=10
              number of attempts to open DB if it’s locked by other instance

       -<b>dep-follow-all-variants</b>
              when processing dependencies, follow a &amp; b if dependency is ’a|b’

       -<b>dep-follow-recommends</b>
              when processing dependencies, follow Recommends

       -<b>dep-follow-source</b>
              when processing dependencies, follow from binary to Source packages

       -<b>dep-follow-suggests</b>
              when processing dependencies, follow Suggests

       -<b>dep-verbose-resolve</b>
              when processing dependencies, print detailed logs

       -<b>gpg-provider</b>=
              PGP implementation ("gpg",  "gpg1",  "gpg2"  for  external  gpg  or  "internal"  for  Go  internal
              implementation)

</pre><h4><b>CREATE</b> <b>NEW</b> <b>MIRROR</b></h4><pre>
       <b>aptly</b> <b>mirror</b> <b>create</b> <u>name</u> <u>archive</u> <u>url</u> <u>distribution</u> [<u>component1</u> ...]

       Creates  mirror  <u>name</u>  of  remote  repository,  aptly  supports both regular and flat Debian repositories
       exported via HTTP and FTP. aptly would try download Release file from remote repository and  verify  its’
       signature. Command line format resembles apt utlitily <a href="../man5/sources.list.5.html">sources.list</a>(5).

       PPA urls could specified in short format:

       $ aptly mirror create <u>name</u> ppa:<u>user</u>/<u>project</u>

       Example:

       $ aptly mirror create wheezy-main <a href="http://mirror.yandex.ru/debian/">http://mirror.yandex.ru/debian/</a> wheezy main

       Options:

       -<b>filter</b>=
              filter packages in mirror, use ’@file’ to read filter from file or ’@-’ for stdin

       -<b>filter-with-deps</b>
              when filtering, include dependencies of matching packages as well

       -<b>force-architectures</b>
              (only with architecture list) skip check that requested architectures are listed in Release file

       -<b>force-components</b>
              (only with component list) skip check that requested components are listed in Release file

       -<b>ignore-signatures</b>
              disable verification of Release file signatures

       -<b>keyring</b>=
              gpg keyring to use when verifying Release file (could be specified multiple times)

       -<b>max-tries</b>=1
              max download tries till process fails with download error

       -<b>with-installer</b>
              download additional not packaged installer files

       -<b>with-sources</b>
              download source packages in addition to binary packages

       -<b>with-udebs</b>
              download .udeb packages (Debian installer support)

</pre><h4><b>LIST</b> <b>MIRRORS</b></h4><pre>
       <b>aptly</b> <b>mirror</b> <b>list</b>

       List shows full list of remote repository mirrors.

       Example:

       $ aptly mirror list

       Options:

       -<b>json</b>  display list in JSON format

       -<b>raw</b>   display list in machine-readable format

</pre><h4><b>SHOW</b> <b>DETAILS</b> <b>ABOUT</b> <b>MIRROR</b></h4><pre>
       <b>aptly</b> <b>mirror</b> <b>show</b> <u>name</u>

       Shows detailed information about the mirror.

       Example:

       $ aptly mirror show wheezy-main

       Options:

       -<b>json</b>  display record in JSON format

       -<b>with-packages</b>
              show detailed list of packages and versions stored in the mirror

</pre><h4><b>DELETE</b> <b>MIRROR</b></h4><pre>
       <b>aptly</b> <b>mirror</b> <b>drop</b> <u>name</u>

       Drop deletes information about remote repository mirror <u>name</u>. Package data is not deleted (since it could
       still  be  used  by  other mirrors or snapshots). If mirror is used as source to create a snapshot, aptly
       would refuse to delete such mirror, use flag -force to override.

       Example:

       $ aptly mirror drop wheezy-main

       Options:

       -<b>force</b> force mirror deletion even if used by snapshots

</pre><h4><b>UPDATE</b> <b>MIRROR</b></h4><pre>
       <b>aptly</b> <b>mirror</b> <b>update</b> <u>name</u>

       Updates remote mirror (downloads package files and  meta  information).  When  mirror  is  created,  this
       command should be run for the first time to fetch mirror contents. This command can be run multiple times
       to get updated repository contents. If interrupted, command can be safely restarted.

       Example:

       $ aptly mirror update wheezy-main

       Options:

       -<b>download-limit</b>=0
              limit download speed (kbytes/sec)

       -<b>downloader</b>=default
              downloader to use (e.g. grab)

       -<b>force</b> force update mirror even if it is locked by another process

       -<b>ignore-checksums</b>
              ignore checksum mismatches while downloading package files and metadata

       -<b>ignore-signatures</b>
              disable verification of Release file signatures

       -<b>keyring</b>=
              gpg keyring to use when verifying Release file (could be specified multiple times)

       -<b>max-tries</b>=1
              max download tries till process fails with download error

       -<b>skip-existing-packages</b>
              do not check file existence for packages listed in the internal database of the mirror

</pre><h4><b>RENAMES</b> <b>MIRROR</b></h4><pre>
       <b>aptly</b> <b>mirror</b> <b>rename</b> <u>old-name</u> <u>new-name</u>

       Command changes name of the mirror.Mirror name should be unique.

       Example:

       $ aptly mirror rename wheezy-min wheezy-main

</pre><h4><b>EDIT</b> <b>MIRROR</b> <b>SETTINGS</b></h4><pre>
       <b>aptly</b> <b>mirror</b> <b>edit</b> <u>name</u>

       Command edit allows one to change settings of mirror: filters, list of architectures.

       Example:

       $ aptly mirror edit -filter=nginx -filter-with-deps some-mirror

       Options:

       -<b>archive-url</b>=
              archive url is the root of archive

       -<b>filter</b>=
              filter packages in mirror, use ’@file’ to read filter from file or ’@-’ for stdin

       -<b>filter-with-deps</b>
              when filtering, include dependencies of matching packages as well

       -<b>ignore-signatures</b>
              disable verification of Release file signatures

       -<b>keyring</b>=
              gpg keyring to use when verifying Release file (could be specified multiple times)

       -<b>with-installer</b>
              download additional not packaged installer files

       -<b>with-sources</b>
              download source packages in addition to binary packages

       -<b>with-udebs</b>
              download .udeb packages (Debian installer support)

</pre><h4><b>SEARCH</b> <b>MIRROR</b> <b>FOR</b> <b>PACKAGES</b> <b>MATCHING</b> <b>QUERY</b></h4><pre>
       <b>aptly</b> <b>mirror</b> <b>search</b> <u>name</u> [<u>package-query</u>]

       Command search displays list of packages in mirror that match package query

       If query is not specified, all the packages are displayed.

       Example:

           $ aptly mirror search wheezy-main ’$Architecture (i386), Name (% *-dev)’

       Options:

       -<b>format</b>=
              custom format for result printing

       -<b>with-deps</b>
              include dependencies into search results

</pre><h4><b>ADD</b> <b>PACKAGES</b> <b>TO</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>add</b> <u>name</u> <b>(&lt;package</b> <b>file.deb&gt;|&lt;directory&gt;)...</b>

       Command  adds  packages to local repository from .deb, .udeb (binary packages) and .dsc (source packages)
       files. When importing from directory aptly would do recursive scan looking for all files matching <u>.[u]deb</u>
       <u>or</u>.dsc patterns. Every file discovered would be analyzed to  extract  metadata,  package  would  then  be
       created and added to the database. Files would be imported to internal package pool. For source packages,
       all  required files are added automatically as well. Extra files for source package should be in the same
       directory as *.dsc file.

       Example:

       $ aptly repo add testing myapp-0.1.2.deb incoming/

       Options:

       -<b>force-replace</b>
              when adding package that conflicts with existing package, remove existing package

       -<b>remove-files</b>
              remove files that have been imported successfully into repository

</pre><h4><b>COPY</b> <b>PACKAGES</b> <b>BETWEEN</b> <b>LOCAL</b> <b>REPOSITORIES</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>copy</b> <u>src-name</u> <u>dst-name</u> <u>package-query</u> <b>...</b>

       Command copy copies packages matching <u>package-query</u> from local repo <u>src-name</u> to local repo <u>dst-name</u>.

       Example:

       $ aptly repo copy testing stable ’myapp (=0.1.12)’

       Options:

       -<b>dry-run</b>
              don’t copy, just show what would be copied

       -<b>with-deps</b>
              follow dependencies when processing package-spec

</pre><h4><b>CREATE</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>create</b> <u>name</u> [ <b>from</b> <b>snapshot</b> <u>snapshot</u> ]

       Create local package repository. Repository would be empty when created, packages  could  be  added  from
       files, copied or moved from another local repository or imported from the mirror.

       If  local  package  repository  is  created  from snapshot, repo initial contents are copied from snapsot
       contents.

       Example:

       $ aptly repo create testing

       $ aptly repo create mysql35 from snapshot mysql-35-2017

       Options:

       -<b>comment</b>=
              any text that would be used to described local repository

       -<b>component</b>=main
              default component when publishing

       -<b>distribution</b>=
              default distribution when publishing

       -<b>uploaders-file</b>=
              uploaders.json to be used when including .changes into this repository

</pre><h4><b>DELETE</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>drop</b> <u>name</u>

       Drop information about deletions from local repo. Package data is not deleted (since it  could  be  still
       used by other mirrors or snapshots).

       Example:

       $ aptly repo drop local-repo

       Options:

       -<b>force</b> force local repo deletion even if used by snapshots

</pre><h4><b>EDIT</b> <b>PROPERTIES</b> <b>OF</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>edit</b> <u>name</u>

       Command  edit  allows  one  to  change  metadata  of  local repository: comment, default distribution and
       component.

       Example:

       $ aptly repo edit -distribution=wheezy testing

       Options:

       -<b>comment</b>=
              any text that would be used to described local repository

       -<b>component</b>=
              default component when publishing

       -<b>distribution</b>=
              default distribution when publishing

       -<b>uploaders-file</b>=
              uploaders.json to be used when including .changes into this repository

</pre><h4><b>IMPORT</b> <b>PACKAGES</b> <b>FROM</b> <b>MIRROR</b> <b>TO</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>import</b> <u>src-mirror</u> <u>dst-repo</u> <u>package-query</u> <b>...</b>

       Command import looks up packages matching <u>package-query</u> in mirror <u>src-mirror</u> and  copies  them  to  local
       repo <u>dst-repo</u>.

       Example:

       $ aptly repo import wheezy-main testing nginx

       Options:

       -<b>dry-run</b>
              don’t import, just show what would be imported

       -<b>with-deps</b>
              follow dependencies when processing package-spec

</pre><h4><b>LIST</b> <b>LOCAL</b> <b>REPOSITORIES</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>list</b>

       List command shows full list of local package repositories.

       Example:

       $ aptly repo list

       Options:

       -<b>json</b>  display list in JSON format

       -<b>raw</b>   display list in machine-readable format

</pre><h4><b>MOVE</b> <b>PACKAGES</b> <b>BETWEEN</b> <b>LOCAL</b> <b>REPOSITORIES</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>move</b> <u>src-name</u> <u>dst-name</u> <u>package-query</u> <b>...</b>

       Command move moves packages matching <u>package-query</u> from local repo <u>src-name</u> to local repo <u>dst-name</u>.

       Use ’@file’ to read package queries from file or ’@-’ for stdin.

       Example:

       $ aptly repo move testing stable ’myapp (=0.1.12)’

       Options:

       -<b>dry-run</b>
              don’t move, just show what would be moved

       -<b>with-deps</b>
              follow dependencies when processing package-spec

</pre><h4><b>REMOVE</b> <b>PACKAGES</b> <b>FROM</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>remove</b> <u>name</u> <u>package-query</u> <b>...</b>

       Commands  removes packages matching <u>package-query</u> from local repository <u>name</u>. If removed packages are not
       referenced by other repos or snapshots, they can be  removed  completely  (including  files)  by  running
       ’aptly db cleanup’.

       Use ’@file’ to read package queries from file or ’@-’ for stdin.

       Example:

       $ aptly repo remove testing ’myapp (=0.1.12)’

       Options:

       -<b>dry-run</b>
              don’t remove, just show what would be removed

</pre><h4><b>SHOW</b> <b>DETAILS</b> <b>ABOUT</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>show</b> <u>name</u>

       Show command shows full information about local package repository.

       ex: $ aptly repo show testing

       Options:

       -<b>json</b>  display record in JSON format

       -<b>with-packages</b>
              show list of packages

</pre><h4><b>RENAMES</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>rename</b> <u>old-name</u> <u>new-name</u>

       Command changes name of the local repo. Local repo name should be unique.

       Example:

       $ aptly repo rename wheezy-min wheezy-main

</pre><h4><b>SEARCH</b> <b>REPO</b> <b>FOR</b> <b>PACKAGES</b> <b>MATCHING</b> <b>QUERY</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>search</b> <u>name</u> [<u>package-query</u>]

       Command search displays list of packages in local repository that match package query

       If query is not specified, all the packages are displayed.

       Example:

           $ aptly repo search my-software ’$Architecture (i386), Name (% *-dev)’

       Options:

       -<b>format</b>=
              custom format for result printing

       -<b>with-deps</b>
              include dependencies into search results

</pre><h4><b>ADD</b> <b>PACKAGES</b> <b>TO</b> <b>LOCAL</b> <b>REPOSITORIES</b> <b>BASED</b> <b>ON</b> <b>.CHANGES</b> <b>FILES</b></h4><pre>
       <b>aptly</b> <b>repo</b> <b>include</b> <b>(&lt;file.changes&gt;|&lt;directory&gt;)...</b>

       Command  include  looks  for  .changes files in list of arguments or specified directories. Each .changes
       file is verified, parsed, referenced files are put into separate temporary directory and added into local
       repository. Successfully imported files are removed by default.

       Additionally uploads could be restricted with ’uploaders.json’ file. Rules in this file  control  uploads
       based on GPG key ID of .changes file signature and queries on .changes file fields.

       Example:

       $ aptly repo include -repo=foo-release incoming/

       Options:

       -<b>accept-unsigned</b>
              accept unsigned .changes files

       -<b>force-replace</b>
              when adding package that conflicts with existing package, remove existing package

       -<b>ignore-signatures</b>
              disable verification of .changes file signature

       -<b>keyring</b>=
              gpg keyring to use when verifying Release file (could be specified multiple times)

       -<b>no-remove-files</b>
              don’t remove files that have been imported successfully into repository

       -<b>repo</b>={{.Distribution}}
              which repo should files go to, defaults to Distribution field of .changes file

       -<b>uploaders-file</b>=
              path to uploaders.json file

</pre><h4><b>CREATES</b> <b>SNAPSHOT</b> <b>OF</b> <b>MIRROR</b> <b>(LOCAL</b> <b>REPOSITORY)</b> <b>CONTENTS</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>create</b> <u>name</u> <b>(from</b> <b>mirror</b> <u>mirror-name</u> <b>|</b> <b>from</b> <b>repo</b> <u>repo-name</u> <b>|</b> <b>empty)</b>

       Command create <u>name</u> from mirror makes persistent immutable snapshot of remote repository mirror. Snapshot
       could be published or further modified using merge, pull and other aptly features.

       Command  create <u>name</u> from repo makes persistent immutable snapshot of local repository. Snapshot could be
       processed as mirror snapshots, and mixed with snapshots of remote mirrors.

       Command create <u>name</u> empty creates empty snapshot that  could  be  used  as  a  basis  for  snapshot  pull
       operations, for example. As snapshots are immutable, creating one empty snapshot should be enough.

       Example:

       $ aptly snapshot create wheezy-main-today from mirror wheezy-main

</pre><h4><b>LIST</b> <b>SNAPSHOTS</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>list</b>

       Command list shows full list of snapshots created.

       Example:

       $ aptly snapshot list

       Options:

       -<b>json</b>  display list in JSON format

       -<b>raw</b>   display list in machine-readable format

       -<b>sort</b>=name
              display list in ’name’ or creation ’time’ order

</pre><h4><b>SHOWS</b> <b>DETAILS</b> <b>ABOUT</b> <b>SNAPSHOT</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>show</b> <u>name</u>

       Command show displays full information about a snapshot.

       Example:

           $ aptly snapshot show wheezy-main

       Options:

       -<b>json</b>  display record in JSON format

       -<b>with-packages</b>
              show list of packages

</pre><h4><b>VERIFY</b> <b>DEPENDENCIES</b> <b>IN</b> <b>SNAPSHOT</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>verify</b> <u>name</u> [<u>source</u> ...]

       Verify  does  dependency  resolution  in  snapshot  <u>name</u>,  possibly  using additional snapshots <u>source</u> as
       dependency sources. All unsatisfied dependencies are printed.

       Example:

           $ aptly snapshot verify wheezy-main wheezy-contrib wheezy-non-free

</pre><h4><b>PULL</b> <b>PACKAGES</b> <b>FROM</b> <b>ANOTHER</b> <b>SNAPSHOT</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>pull</b> <u>name</u> <u>source</u> <u>destination</u> <u>package-query</u> <b>...</b>

       Command pull pulls new packages along with its’ dependencies to snapshot <u>name</u> from snapshot <u>source</u>.  Pull
       can  upgrade  package  version  in  <u>name</u>  with  versions from <u>source</u> following dependencies. New snapshot
       <u>destination</u> is created as a result of this process. Packages could be specified simply as  ’package-name’
       or as package queries.

       Use ’@file’ syntax to read package queries from file and ’@-’ to read from stdin.

       Example:

           $ aptly snapshot pull wheezy-main wheezy-backports wheezy-new-xorg xorg-server-server

       Options:

       -<b>all-matches</b>
              pull all the packages that satisfy the dependency version requirements

       -<b>dry-run</b>
              don’t create destination snapshot, just show what would be pulled

       -<b>no-deps</b>
              don’t process dependencies, just pull listed packages

       -<b>no-remove</b>
              don’t remove other package versions when pulling package

</pre><h4><b>DIFFERENCE</b> <b>BETWEEN</b> <b>TWO</b> <b>SNAPSHOTS</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>diff</b> <u>name-a</u> <u>name-b</u>

       Displays  difference  in  packages  between  two snapshots. Snapshot is a list of packages, so difference
       between snapshots is a difference between package lists. Package could be either  completely  missing  in
       one snapshot, or package is present in both snapshots with different versions.

       Example:

           $ aptly snapshot diff -only-matching wheezy-main wheezy-backports

       Options:

       -<b>only-matching</b>
              display diff only for matching packages (don’t display missing packages)

</pre><h4><b>MERGES</b> <b>SNAPSHOTS</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>merge</b> <u>destination</u> <u>source</u> [<u>source</u>...]

       Merge  command  merges several <u>source</u> snapshots into one <u>destination</u> snapshot. Merge happens from left to
       right. By default, packages with the same name-architecture pair are replaced during merge (package  from
       latest  snapshot  on  the  list  wins).  If  run  with only one source snapshot, merge copies <u>source</u> into
       <u>destination</u>.

       Example:

           $ aptly snapshot merge wheezy-w-backports wheezy-main wheezy-backports

       Options:

       -<b>latest</b>
              use only the latest version of each package

       -<b>no-remove</b>
              don’t remove duplicate arch/name packages

</pre><h4><b>DELETE</b> <b>SNAPSHOT</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>drop</b> <u>name</u>

       Drop removes information about a snapshot. If snapshot is published, it can’t be dropped.

       Example:

           $ aptly snapshot drop wheezy-main

       Options:

       -<b>force</b> remove snapshot even if it was used as source for other snapshots

</pre><h4><b>RENAMES</b> <b>SNAPSHOT</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>rename</b> <u>old-name</u> <u>new-name</u>

       Command changes name of the snapshot. Snapshot name should be unique.

       Example:

       $ aptly snapshot rename wheezy-min wheezy-main

</pre><h4><b>SEARCH</b> <b>SNAPSHOT</b> <b>FOR</b> <b>PACKAGES</b> <b>MATCHING</b> <b>QUERY</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>search</b> <u>name</u> [<u>package-query</u>]

       Command search displays list of packages in snapshot that match package query

       If query is not specified, all the packages are displayed.

       Use ’@file’ syntax to read package query from file and ’@-’ to read from stdin.

       Example:

           $ aptly snapshot search wheezy-main ’$Architecture (i386), Name (% *-dev)’

       Options:

       -<b>format</b>=
              custom format for result printing

       -<b>with-deps</b>
              include dependencies into search results

</pre><h4><b>FILTER</b> <b>PACKAGES</b> <b>IN</b> <b>SNAPSHOT</b> <b>PRODUCING</b> <b>ANOTHER</b> <b>SNAPSHOT</b></h4><pre>
       <b>aptly</b> <b>snapshot</b> <b>filter</b> <u>source</u> <u>destination</u> <u>package-query</u> <b>...</b>

       Command filter does filtering in snapshot <u>source</u>, producing another snapshot <u>destination</u>. Packages  could
       be specified simply as ’package-name’ or as package queries.

       Use ’@file’ syntax to read package queries from file and ’@-’ to read from stdin.

       Example:

           $ aptly snapshot filter wheezy-main wheezy-required ’Priority (required)’

       Options:

       -<b>with-deps</b>
              include dependent packages as well

</pre><h4><b>REMOVE</b> <b>PUBLISHED</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>drop</b> <u>distribution</u> [[<u>endpoint</u>:]<u>prefix</u>]

       Command  removes whatever has been published under specified <u>prefix</u>, publishing <u>endpoint</u> and <u>distribution</u>
       name.

       Example:

           $ aptly publish drop wheezy

       Options:

       -<b>force-drop</b>
              remove published repository even if some files could not be cleaned up

       -<b>skip-cleanup</b>
              don’t remove unreferenced files in prefix/component

</pre><h4><b>LIST</b> <b>OF</b> <b>PUBLISHED</b> <b>REPOSITORIES</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>list</b>

       Display list of currently published snapshots.

       Example:

           $ aptly publish list

       Options:

       -<b>json</b>  display list in JSON format

       -<b>raw</b>   display list in machine-readable format

</pre><h4><b>PUBLISH</b> <b>LOCAL</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>repo</b> <u>name</u> [[<u>endpoint</u>:]<u>prefix</u>]

       Command publishes current state of local  repository  ready  to  be  consumed  by  apt  tools.  Published
       repostiories appear under rootDir/public directory. Valid GPG key is required for publishing.

       Multiple  component  repository  could  be published by specifying several components split by commas via
       -component flag and multiple local repositories as the arguments:

           aptly publish repo -component=main,contrib repo-main repo-contrib

       It is not recommended to publish local  repositories  directly  unless  the  repository  is  for  testing
       purposes  and  changes  happen  frequently.  For  production usage please take snapshot of repository and
       publish it using publish snapshot command.

       Example:

           $ aptly publish repo testing

       Options:

       -<b>acquire-by-hash</b>
              provide index files by hash

       -<b>batch</b> run GPG with detached tty

       -<b>butautomaticupgrades</b>=
              set value for ButAutomaticUpgrades field

       -<b>codename</b>=
              codename to publish (defaults to distribution)

       -<b>component</b>=
              component name to publish (for multi-component publishing, separate components with commas)

       -<b>distribution</b>=
              distribution name to publish

       -<b>force-overwrite</b>
              overwrite files in package pool in case of mismatch

       -<b>gpg-key</b>=
              GPG key ID to use when signing the release

       -<b>keyring</b>=
              GPG keyring to use (instead of default)

       -<b>label</b>=
              label to publish

       -<b>multi-dist</b>
              enable multiple packages with the same filename in different distributions

       -<b>notautomatic</b>=
              set value for NotAutomatic field

       -<b>origin</b>=
              origin name to publish

       -<b>passphrase</b>=
              GPG passphrase for the key (warning: could be insecure)

       -<b>passphrase-file</b>=
              GPG passphrase-file for the key (warning: could be insecure)

       -<b>secret-keyring</b>=
              GPG secret keyring to use (instead of default)

       -<b>skip-bz2</b>
              don’t generate bzipped indexes

       -<b>skip-contents</b>
              don’t generate Contents indexes

       -<b>skip-signing</b>
              don’t sign Release files with GPG

       -<b>suite</b>=
              suite to publish (defaults to distribution)

</pre><h4><b>SHOWS</b> <b>DETAILS</b> <b>OF</b> <b>PUBLISHED</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>show</b> <u>distribution</u> [[<u>endpoint</u>:]<u>prefix</u>]

       Command show displays full information of a published repository.

       Example:

           $ aptly publish show wheezy

       Options:

       -<b>json</b>  display record in JSON format

</pre><h4><b>PUBLISH</b> <b>SNAPSHOT</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>snapshot</b> <u>name</u> [[<u>endpoint</u>:]<u>prefix</u>]

       Command publishes snapshot as Debian repository ready to be consumed by apt tools. Published repostiories
       appear under rootDir/public directory. Valid GPG key is required for publishing.

       Multiple component repository could be published by specifying several components  split  by  commas  via
       -component flag and multiple snapshots as the arguments:

           aptly publish snapshot -component=main,contrib snap-main snap-contrib

       Example:

           $ aptly publish snapshot wheezy-main

       Options:

       -<b>acquire-by-hash</b>
              provide index files by hash

       -<b>batch</b> run GPG with detached tty

       -<b>butautomaticupgrades</b>=
              overwrite value for ButAutomaticUpgrades field

       -<b>codename</b>=
              codename to publish (defaults to distribution)

       -<b>component</b>=
              component name to publish (for multi-component publishing, separate components with commas)

       -<b>distribution</b>=
              distribution name to publish

       -<b>force-overwrite</b>
              overwrite files in package pool in case of mismatch

       -<b>gpg-key</b>=
              GPG key ID to use when signing the release

       -<b>keyring</b>=
              GPG keyring to use (instead of default)

       -<b>label</b>=
              label to publish

       -<b>multi-dist</b>
              enable multiple packages with the same filename in different distributions

       -<b>notautomatic</b>=
              overwrite value for NotAutomatic field

       -<b>origin</b>=
              overwrite origin name to publish

       -<b>passphrase</b>=
              GPG passphrase for the key (warning: could be insecure)

       -<b>passphrase-file</b>=
              GPG passphrase-file for the key (warning: could be insecure)

       -<b>secret-keyring</b>=
              GPG secret keyring to use (instead of default)

       -<b>skip-bz2</b>
              don’t generate bzipped indexes

       -<b>skip-contents</b>
              don’t generate Contents indexes

       -<b>skip-signing</b>
              don’t sign Release files with GPG

       -<b>suite</b>=
              suite to publish (defaults to distribution)

</pre><h4><b>ADD</b> <b>SOURCE</b> <b>COMPONENTS</b> <b>TO</b> <b>A</b> <b>PUBLISHED</b> <b>REPO</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>source</b> <b>add</b> <u>distribution</u> <u>source</u>

       The command adds components of a snapshot or local repository to be published.

       This  does  not  publish  the changes directly, but rather schedules them for a subsequent ’aptly publish
       update’.

       The flag -component is mandatory. Use a comma-separated list of components, if multiple components should
       be modified. The number of given components must be equal to the number of given sources, e.g.:

           aptly publish source add -component=main,contrib wheezy wheezy-main wheezy-contrib

       Example:

           $ aptly publish source add -component=contrib wheezy ppa wheezy-contrib

       This command assigns the snapshot wheezy-contrib to the  component  contrib  and  adds  it  to  published
       repository revision of ppa/wheezy.

       Options:

       -<b>component</b>=
              component names to add (for multi-component publishing, separate components with commas)

       -<b>prefix</b>=.
              publishing prefix in the form of [<u>endpoint</u>:]<u>prefix</u>

</pre><h4><b>DROP</b> <b>PENDING</b> <b>SOURCE</b> <b>COMPONENT</b> <b>CHANGES</b> <b>OF</b> <b>A</b> <b>PUBLISHED</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>source</b> <b>drop</b> <u>distribution</u>

       Remove all pending changes what would be applied with a subsequent ’aptly publish update’.

       Example:

           $ aptly publish source drop wheezy

       Options:

       -<b>component</b>=
              component names to add (for multi-component publishing, separate components with commas)

       -<b>prefix</b>=.
              publishing prefix in the form of [<u>endpoint</u>:]<u>prefix</u>

</pre><h4><b>LISTS</b> <b>REVISION</b> <b>OF</b> <b>PUBLISHED</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>source</b> <b>list</b> <u>distribution</u>

       Command lists sources of a published repository.

       Example:

           $ aptly publish source list wheezy

       Options:

       -<b>component</b>=
              component names to add (for multi-component publishing, separate components with commas)

       -<b>json</b>  display record in JSON format

       -<b>prefix</b>=.
              publishing prefix in the form of [<u>endpoint</u>:]<u>prefix</u>

</pre><h4><b>REMOVE</b> <b>SOURCE</b> <b>COMPONENTS</b> <b>FROM</b> <b>A</b> <b>PUBLISHED</b> <b>REPO</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>source</b> <b>remove</b> <u>distribution</u> [[<u>endpoint</u>:]<u>prefix</u>] <u>source</u>

       The command removes source components (snapshot / local repo) from a published repository.

       This  does  not  publish  the changes directly, but rather schedules them for a subsequent ’aptly publish
       update’.

       The flag -component is mandatory. Use a comma-separated list of components, if multiple components should
       be removed, e.g.:

       Example:

           $ aptly publish source remove -component=contrib,non-free wheezy filesystem:symlink:debian

       Options:

       -<b>component</b>=
              component names to remove (for multi-component publishing, separate components with commas)

       -<b>prefix</b>=.
              publishing prefix in the form of [<u>endpoint</u>:]<u>prefix</u>

</pre><h4><b>REPLACE</b> <b>THE</b> <b>SOURCE</b> <b>COMPONENTS</b> <b>OF</b> <b>A</b> <b>PUBLISHED</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>source</b> <b>replace</b> <u>distribution</u> <u>source</u>

       The command replaces the source components of a snapshot or local repository to be published.

       This does not publish the changes directly, but rather schedules them for  a  subsequent  ’aptly  publish
       update’.

       The flag -component is mandatory. Use a comma-separated list of components, if multiple components should
       be modified. The number of given components must be equal to the number of given sources, e.g.:

           aptly publish source replace -component=main,contrib wheezy wheezy-main wheezy-contrib

       Example:

           $ aptly publish source replace -component=contrib wheezy ppa wheezy-contrib

       Options:

       -<b>component</b>=
              component names to add (for multi-component publishing, separate components with commas)

       -<b>prefix</b>=.
              publishing prefix in the form of [<u>endpoint</u>:]<u>prefix</u>

</pre><h4><b>UPDATE</b> <b>THE</b> <b>SOURCE</b> <b>COMPONENTS</b> <b>OF</b> <b>A</b> <b>PUBLISHED</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>source</b> <b>update</b> <u>distribution</u> <u>source</u>

       The command updates the source components of a snapshot or local repository to be published.

       This  does  not  publish  the changes directly, but rather schedules them for a subsequent ’aptly publish
       update’.

       The flag -component is mandatory. Use a comma-separated list of components, if multiple components should
       be modified. The number of given components must be equal to the number of given sources, e.g.:

           aptly publish source update -component=main,contrib wheezy wheezy-main wheezy-contrib

       Example:

           $ aptly publish source update -component=contrib wheezy ppa wheezy-contrib

       Options:

       -<b>component</b>=
              component names to add (for multi-component publishing, separate components with commas)

       -<b>prefix</b>=.
              publishing prefix in the form of [<u>endpoint</u>:]<u>prefix</u>

</pre><h4><b>UPDATE</b> <b>PUBLISHED</b> <b>REPOSITORY</b> <b>BY</b> <b>SWITCHING</b> <b>TO</b> <b>NEW</b> <b>SOURCE</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>switch</b> <u>distribution</u> [[<u>endpoint</u>:]<u>prefix</u>] <u>new-source</u>

       Command switches in-place published snapshots with new source contents.  All  publishing  parameters  are
       preserved (architecture list, distribution, component).

       For  multiple  component repositories, flag -component should be given with list of components to update.
       Corresponding sources should be given in the same order, e.g.:

           aptly publish switch -component=main,contrib wheezy wh-main wh-contrib

       Example:

           $ aptly publish switch wheezy ppa wheezy-7.5

       This command would switch published  repository  (with  one  component)  named  ppa/wheezy  (prefix  ppa,
       dsitribution wheezy to new snapshot wheezy-7.5).

       Options:

       -<b>batch</b> run GPG with detached tty

       -<b>component</b>=
              component names to update (for multi-component publishing, separate components with commas)

       -<b>force-overwrite</b>
              overwrite files in package pool in case of mismatch

       -<b>gpg-key</b>=
              GPG key ID to use when signing the release

       -<b>keyring</b>=
              GPG keyring to use (instead of default)

       -<b>multi-dist</b>
              enable multiple packages with the same filename in different distributions

       -<b>passphrase</b>=
              GPG passphrase for the key (warning: could be insecure)

       -<b>passphrase-file</b>=
              GPG passphrase-file for the key (warning: could be insecure)

       -<b>secret-keyring</b>=
              GPG secret keyring to use (instead of default)

       -<b>skip-bz2</b>
              don’t generate bzipped indexes

       -<b>skip-cleanup</b>
              don’t remove unreferenced files in prefix/component

       -<b>skip-contents</b>
              don’t generate Contents indexes

       -<b>skip-signing</b>
              don’t sign Release files with GPG

</pre><h4><b>UPDATE</b> <b>PUBLISHED</b> <b>REPOSITORY</b></h4><pre>
       <b>aptly</b> <b>publish</b> <b>update</b> <u>distribution</u> [[<u>endpoint</u>:]<u>prefix</u>]

       The command updates updates a published repository after applying pending changes to the sources.

       For published local repositories:

           * update to match local repository contents

       For published snapshots:

           * switch components to new snapshot

       The update happens in-place with minimum possible downtime for published repository.

       For multiple component published repositories, all local repositories are updated.

       Example:

           $ aptly publish update wheezy ppa

       Options:

       -<b>batch</b> run GPG with detached tty

       -<b>force-overwrite</b>
              overwrite files in package pool in case of mismatch

       -<b>gpg-key</b>=
              GPG key ID to use when signing the release

       -<b>keyring</b>=
              GPG keyring to use (instead of default)

       -<b>multi-dist</b>
              enable multiple packages with the same filename in different distributions

       -<b>passphrase</b>=
              GPG passphrase for the key (warning: could be insecure)

       -<b>passphrase-file</b>=
              GPG passphrase-file for the key (warning: could be insecure)

       -<b>secret-keyring</b>=
              GPG secret keyring to use (instead of default)

       -<b>skip-bz2</b>
              don’t generate bzipped indexes

       -<b>skip-cleanup</b>
              don’t remove unreferenced files in prefix/component

       -<b>skip-contents</b>
              don’t generate Contents indexes

       -<b>skip-signing</b>
              don’t sign Release files with GPG

</pre><h4><b>SEARCH</b> <b>FOR</b> <b>PACKAGES</b> <b>MATCHING</b> <b>QUERY</b></h4><pre>
       <b>aptly</b> <b>package</b> <b>search</b> [<u>package-query</u>]

       Command search displays list of packages in whole DB that match package query.

       Use  ’@file’  to  read query from file or ’@-’ for stdin. If query is not specified, all the packages are
       displayed.

       Example:

           $ aptly package search ’$Architecture (i386), Name (% *-dev)’

       Options:

       -<b>format</b>=
              custom format for result printing

</pre><h4><b>SHOW</b> <b>DETAILS</b> <b>ABOUT</b> <b>PACKAGES</b> <b>MATCHING</b> <b>QUERY</b></h4><pre>
       <b>aptly</b> <b>package</b> <b>show</b> <u>package-query</u>

       Command shows displays detailed meta-information about packages matching query. Information  from  Debian
       control   file   is   displayed.   Optionally   information   about  package  files  and  inclusion  into
       mirrors/snapshots/local repos is shown.

       Use ’@file’ to read query from file or ’@-’ for stdin.

       Example:

           $ aptly package show ’nginx-light_1.2.1-2.2+wheezy2_i386’

       Options:

       -<b>with-files</b>
              display information about files from package pool

       -<b>with-references</b>
              display information about mirrors, snapshots and local repos referencing this package

</pre><h4><b>CLEANUP</b> <b>DB</b> <b>AND</b> <b>PACKAGE</b> <b>POOL</b></h4><pre>
       <b>aptly</b> <b>db</b> <b>cleanup</b>

       Database cleanup removes information about unreferenced packages and removes files in  the  package  pool
       that aren’t used by packages anymore

       Example:

       $ aptly db cleanup

       Options:

       -<b>dry-run</b>
              don’t delete anything

       -<b>verbose</b>
              be verbose when loading objects/removing them

</pre><h4><b>RECOVER</b> <b>DB</b> <b>AFTER</b> <b>CRASH</b></h4><pre>
       <b>aptly</b> <b>db</b> <b>recover</b>

       Database recover does its’ best to recover the database after a crash. It is recommended to backup the DB
       before running recover.

       Example:

       $ aptly db recover

</pre><h4><b>HTTP</b> <b>SERVE</b> <b>PUBLISHED</b> <b>REPOSITORIES</b></h4><pre>
       <b>aptly</b> <b>serve</b>

       Command  serve  starts embedded HTTP server (not suitable for real production usage) to serve contents of
       public/ subdirectory of aptly’s root that contains published repositories.

       Example:

       $ aptly serve -listen=:8080

       Options:

       -<b>listen</b>=:8080
              host:port for HTTP listening

</pre><h4><b>START</b> <b>API</b> <b>HTTP</b> <b>SERVICE</b></h4><pre>
       <b>aptly</b> <b>api</b> <b>serve</b>

       Start HTTP server with aptly REST API. The server can listen to either a port or Unix domain socket. When
       using a socket, Aptly will fully manage the socket file. This command also supports taking  over  from  a
       systemd file descriptors to enable systemd socket activation.

       Example:

       $ aptly api serve -listen=:8080 $ aptly api serve -listen=unix:///tmp/aptly.sock

       Options:

       -<b>listen</b>=:8080
              host:port for HTTP listening or unix://path to listen on a Unix domain socket

       -<b>no-lock</b>
              don’t lock the database

</pre><h4><b>RENDER</b> <b>GRAPH</b> <b>OF</b> <b>RELATIONSHIPS</b></h4><pre>
       <b>aptly</b> <b>graph</b>

       Command  graph  displays  relationship  between  mirrors,  local  repositories,  snapshots  and published
       repositories using graphviz package to render graph as an image.

       Example:

       $ aptly graph

       Options:

       -<b>format</b>=png
              render graph to specified format (png, svg, pdf, etc.)

       -<b>layout</b>=horizontal
              create a more ’vertical’ or a more ’horizontal’ graph layout

       -<b>output</b>=
              specify output filename, default is to open result in viewer

</pre><h4><b>SHOW</b> <b>CURRENT</b> <b>APTLY’S</b> <b>CONFIG</b></h4><pre>
       <b>aptly</b> <b>config</b> <b>show</b>

       Command show displays the current aptly configuration.

       Example:

       $ aptly config show

       Options:

       -<b>yaml</b>  show yaml config

</pre><h4><b>RUN</b> <b>APTLY</b> <b>TASKS</b></h4><pre>
       <b>aptly</b> <b>task</b> <b>run</b> (-filename=<u>filename</u> <b>|</b> <u>commands</u>...)

       Command helps organise multiple aptly commands in one single aptly task, running as single thread.

       Example:

             $ aptly task run
             &gt; repo create local
             &gt; repo add local pkg1
             &gt; publish repo local
             &gt; serve
             &gt;

       Options:

       -<b>filename</b>=
              specifies the filename that contains the commands to run

</pre><h4><b>SHOW</b> <b>CURRENT</b> <b>APTLY’S</b> <b>CONFIG</b></h4><pre>
       <b>aptly</b> <b>config</b> <b>show</b>

       Command show displays the current aptly configuration.

       Example:

       $ aptly config show

       Options:

       -<b>yaml</b>  show yaml config

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       If environment variable <b>HTTP_PROXY</b> is set <b>aptly</b> would use its value to proxy all HTTP requests.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>aptly</b> exists with:

       0      success

       1      general failure

       2      command parse failure

</pre><h4><b>AUTHORS</b></h4><pre>
       List of contributors, in chronological order:

       ○   Andrey Smirnov (https://github.com/smira)

       ○   Sebastien Binet (https://github.com/sbinet)

       ○   Ryan Uber (https://github.com/ryanuber)

       ○   Simon Aquino (https://github.com/queeno)

       ○   Vincent Batoufflet (https://github.com/vbatoufflet)

       ○   Ivan Kurnosov (https://github.com/zerkms)

       ○   Dmitrii Kashin (https://github.com/freehck)

       ○   Chris Read (https://github.com/cread)

       ○   Rohan Garg (https://github.com/shadeslayer)

       ○   Russ Allbery (https://github.com/rra)

       ○   Sylvain Baubeau (https://github.com/lebauce)

       ○   Andrea Bernardo Ciddio (https://github.com/bcandrea)

       ○   Michael Koval (https://github.com/mkoval)

       ○   Alexander Guy (https://github.com/alexanderguy)

       ○   Sebastien Badia (https://github.com/sbadia)

       ○   Szymon Sobik (https://github.com/sobczyk)

       ○   Paul Krohn (https://github.com/paul-krohn)

       ○   Vincent Bernat (https://github.com/vincentbernat)

       ○   x539 (https://github.com/x539)

       ○   Phil Frost (https://github.com/bitglue)

       ○   Benoit Foucher (https://github.com/bentoi)

       ○   Geoffrey Thomas (https://github.com/geofft)

       ○   Oliver Sauder (https://github.com/sliverc)

       ○   Harald Sitter (https://github.com/apachelogger)

       ○   Johannes Layher (https://github.com/jola5)

       ○   Charles Hsu (https://github.com/charz)

       ○   Clemens Rabe (https://github.com/seeraven)

       ○   TJ Merritt (https://github.com/tjmerritt)

       ○   Matt Martyn (https://github.com/MMartyn)

       ○   Ludovico Cavedon (https://github.com/cavedon)

       ○   Petr Jediny (https://github.com/pjediny)

       ○   Maximilian Stein (https://github.com/steinymity)

       ○   Strajan Sebastian (https://github.com/strajansebastian)

       ○   Artem Smirnov (https://github.com/urpylka)

       ○   William Manley (https://github.com/wmanley)

       ○   Shengjing Zhu (https://github.com/zhsj)

       ○   Nabil Bendafi (https://github.com/nabilbendafi)

       ○   Raphael Medaer (https://github.com/rmedaer)

       ○   Raul Benencia (https://github.com/rul)

       ○   Don Kuntz (https://github.com/dkuntz2)

       ○   Joshua Colson (https://github.com/freakinhippie)

       ○   Andre Roth (https://github.com/neolynx)

       ○   Lorenzo Bolla (https://github.com/lbolla)

       ○   Benj Fassbind (https://github.com/randombenj)

       ○   Markus Muellner (https://github.com/mmianl)

       ○   Chuan Liu (https://github.com/chuan)

       ○   Samuel Mutel (https://github.com/smutel)

       ○   Russell Greene (https://github.com/russelltg)

       ○   Wade Simmons (https://github.com/wadey)

       ○   Steven Stone (https://github.com/smstone)

       ○   Josh Bayfield (https://github.com/jbayfield)

       ○   Boxjan (https://github.com/boxjan)

       ○   Mauro Regli (https://github.com/reglim)

       ○   Alexander Zubarev (https://github.com/strike)

       ○   Nicolas Dostert (https://github.com/acdn-ndostert)

       ○   Ryan Gonzalez (https://github.com/refi64)

       ○   Paul Cacheux (https://github.com/paulcacheux)

       ○   Nic Waller (https://github.com/sf-nwaller)

       ○   iofq (https://github.com/iofq)

       ○   Noa Resare (https://github.com/nresare)

       ○   Ramon N.Rodriguez (https://github.com/runitonmetal)

       ○   Golf Hu (https://github.com/hudeng-go)

       ○   Cookie Fei (https://github.com/wuhuang26)

       ○   Andrey Loukhnov (https://github.com/aol-nnov)

       ○   Christoph Fiehe (https://github.com/cfiehe)

       ○   Blake Kostner (https://github.com/btkostner)

       ○   Leigh London (https://github.com/leighlondon)

       ○   Gordian Schoenherr (https://github.com/schoenherrg)

                                                  December 2024                                         <u><a href="../man1/APTLY.1.html">APTLY</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>