<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>borg-repo-create - Create a new, empty repository</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/borgbackup2">borgbackup2_2.0.0b14-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       borg-repo-create - Create a new, empty repository

</pre><h4><b>SYNOPSIS</b></h4><pre>
       borg [common options] repo-create [options]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  command  creates  a  new,  empty  repository.  A  repository  is  a  <b>borgstore</b> store containing the
       deduplicated data from zero or more archives.

       Repository creation can be quite slow for some kinds of  stores  (e.g.  for  <b>sftp:</b>)  -  this  is  due  to
       borgstore pre-creating all directories needed, making usage of the store faster.

   <b>Encryption</b> <b>mode</b> <b>TLDR</b>
       The  encryption mode can only be configured when creating a new repository - you can neither configure it
       on a per-archive basis nor change the mode of an existing repository.  This example will likely NOT  give
       optimum performance on your machine (performance tips will come below):

          borg repo-create --encryption repokey-aes-ocb

       Borg will:

       1. Ask you to come up with a passphrase.

       2. Create a borg key (which contains some random secrets. See <u>key_files</u>).

       3. Derive a "key encryption key" from your passphrase

       4. Encrypt and sign the key with the key encryption key

       5. Store  the encrypted borg key inside the repository directory (in the repo config).  This is why it is
          essential to use a secure passphrase.

       6. Encrypt and sign your backups to prevent anyone from reading or forging them unless they have the  key
          and  know  the passphrase. Make sure to keep a backup of your key <b>outside</b> the repository - do not lock
          yourself out by "leaving your keys inside your car" (see <u>borg_key_export</u>).   The  encryption  is  done
          locally  -  if  you  use  a  remote  repository,  the  remote machine never sees your passphrase, your
          unencrypted key or your unencrypted files.  Chunking and id generation are also based on your  key  to
          improve your privacy.

       7. Use  the key when extracting files to decrypt them and to verify that the contents of the backups have
          not been accidentally or maliciously altered.

   <b>Picking</b> <b>a</b> <b>passphrase</b>
       Make sure you use a good passphrase. Not too short, not too simple. The real encryption / decryption  key
       is  encrypted with / locked by your passphrase.  If an attacker gets your key, he can't unlock and use it
       without knowing the passphrase.

       Be careful with special or non-ascii characters in your passphrase:

       • Borg processes the passphrase as unicode (and encodes it as  utf-8),  so  it  does  not  have  problems
         dealing with even the strangest characters.

       • BUT: that does not necessarily apply to your OS / VM / keyboard configuration.

       So  better  use  a long passphrase made from simple ascii chars than one that includes non-ascii stuff or
       characters that are hard/impossible to enter on a different keyboard layout.

       You can change your passphrase for existing repos at any time, it won't affect the  encryption/decryption
       key or other secrets.

   <b>Choosing</b> <b>an</b> <b>encryption</b> <b>mode</b>
       Depending  on your hardware, hashing and crypto performance may vary widely.  The easiest way to find out
       about what's fastest is to run <b>borg</b> <b>benchmark</b> <b>cpu</b>.

       <u>repokey</u> modes: if you want ease-of-use and "passphrase" security is good enough - the key will be  stored
       in the repository (in <b>repo_dir/config</b>).

       <u>keyfile</u> modes: if you want "passphrase and having-the-key" security - the key will be stored in your home
       directory (in <b><a href="file:~/.config/borg/keys">~/.config/borg/keys</a></b>).

       The  following  table  is roughly sorted in order of preference, the better ones are in the upper part of
       the table, in the lower part is the old and/or unsafe(r) stuff:
                     ┌────────────────────────────┬──────────────┬────────────┬────────────────┐
                     │ Mode (K =  keyfile  or     │ ID-Hash      │ Encryption │ Authentication │
                     │ repokey)                   │              │            │                │
                     ├────────────────────────────┼──────────────┼────────────┼────────────────┤
                     │ K-blake2-chacha20-poly1305 │ BLAKE2b      │ CHACHA20   │ POLY1305       │
                     ├────────────────────────────┼──────────────┼────────────┼────────────────┤
                     │ K-chacha20-poly1305        │ HMAC-SHA-256 │ CHACHA20   │ POLY1305       │
                     ├────────────────────────────┼──────────────┼────────────┼────────────────┤
                     │ K-blake2-aes-ocb           │ BLAKE2b      │ AES256-OCB │ AES256-OCB     │
                     ├────────────────────────────┼──────────────┼────────────┼────────────────┤
                     │ K-aes-ocb                  │ HMAC-SHA-256 │ AES256-OCB │ AES256-OCB     │
                     ├────────────────────────────┼──────────────┼────────────┼────────────────┤
                     │ authenticated-blake2       │ BLAKE2b      │ none       │ BLAKE2b        │
                     ├────────────────────────────┼──────────────┼────────────┼────────────────┤
                     │ authenticated              │ HMAC-SHA-256 │ none       │ HMAC-SHA256    │
                     ├────────────────────────────┼──────────────┼────────────┼────────────────┤
                     │ none                       │ SHA-256      │ none       │ none           │
                     └────────────────────────────┴──────────────┴────────────┴────────────────┘

       <u>none</u>  mode  uses  no  encryption  and  no authentication. You're advised NOT to use this mode as it would
       expose you to all sorts of issues (DoS, confidentiality, tampering, ...) in case of malicious activity in
       the repository.

       If you do <b>not</b> want to encrypt the contents of your backups, but still want to detect malicious  tampering
       use  an  <u>authenticated</u>  mode.  It's  like  <u>repokey</u> minus encryption.  To normally work with <b>authenticated</b>
       repos,   you   will   need   the   passphrase,   but   there   is   an    emergency    workaround,    see
       <b>BORG_WORKAROUNDS=authenticated_no_key</b> docs.

   <b>Creating</b> <b>a</b> <b>related</b> <b>repository</b>
       You can use <b>borg</b> <b>repo-create</b> <b>--other-repo</b> <b>ORIG_REPO</b> <b>...</b> to create a related repository that uses the same
       secret key material as the given other/original repository.

       By  default,  only the ID key and chunker secret will be the same (these are important for deduplication)
       and the AE crypto keys will be newly generated random keys.

       Optionally, if you use <b>--copy-crypt-key</b> you can also keep the  same  crypt_key  (used  for  authenticated
       encryption). Might be desired e.g. if you want to have less keys to manage.

       Creating related repositories is useful e.g. if you want to use <b>borg</b> <b>transfer</b> later.

   <b>Creating</b> <b>a</b> <b>related</b> <b>repository</b> <b>for</b> <b>data</b> <b>migration</b> <b>from</b> <b>borg</b> <b>1.2</b> <b>or</b> <b>1.4</b>
       You  can use <b>borg</b> <b>repo-create</b> <b>--other-repo</b> <b>ORIG_REPO</b> <b>--from-borg1</b> <b>...</b> to create a related repository that
       uses the same secret key material as the given other/original repository.

       Then use <b>borg</b> <b>transfer</b> <b>--other-repo</b> <b>ORIG_REPO</b> <b>--from-borg1</b> <b>...</b> to transfer the archives.

</pre><h4><b>OPTIONS</b></h4><pre>
       See <u><a href="../man1/borg-common.1.html">borg-common</a>(1)</u> for common options of Borg commands.

   <b>options</b>
       <b>--other-repo</b> <u>SRC_REPOSITORY</u>
              reuse the key material from the other repository

       <b>--from-borg1</b>
              other repository is borg 1.x

       <b>-e</b> <u>MODE</u>, <b>--encryption</b> <u>MODE</u>
              select encryption key mode <b>(required)</b>

       <b>--append-only</b>
              create an append-only mode repository. Note that this only affects the low level structure of  the
              repository,  and running <u>delete</u> or <u>prune</u> will still be allowed. See <u>append_only_mode</u> in Additional
              Notes for more details.

       <b>--storage-quota</b> <u>QUOTA</u>
              Set storage quota of the new repository (e.g. 5G, 1.5T). Default: no quota.

       <b>--make-parent-dirs</b>
              create the parent directories of the repository directory, if they are missing.

       <b>--copy-crypt-key</b>
              copy the crypt_key (used for authenticated encryption) from the key of the  other  repo  (default:
              new random key).

</pre><h4><b>EXAMPLES</b></h4><pre>
          # Local repository
          $ export BORG_REPO=/path/to/repo
          # recommended repokey AEAD crypto modes
          $ borg repo-create --encryption=repokey-aes-ocb
          $ borg repo-create --encryption=repokey-chacha20-poly1305
          $ borg repo-create --encryption=repokey-blake2-aes-ocb
          $ borg repo-create --encryption=repokey-blake2-chacha20-poly1305
          # no encryption, not recommended
          $ borg repo-create --encryption=authenticated
          $ borg repo-create --encryption=authenticated-blake2
          $ borg repo-create --encryption=none

          # Remote repository (accesses a remote borg via ssh)
          $ export BORG_REPO=ssh://user@hostname/<a href="file:~/backup">~/backup</a>
          # repokey: stores the (encrypted) key into &lt;REPO_DIR&gt;/config
          $ borg repo-create --encryption=repokey-aes-ocb
          # keyfile: stores the (encrypted) key into <a href="file:~/.config/borg/keys/">~/.config/borg/keys/</a>
          $ borg repo-create --encryption=keyfile-aes-ocb

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/borg-common.1.html">borg-common</a>(1)</u>,    <u><a href="../man1/borg-repo-delete.1.html">borg-repo-delete</a>(1)</u>,    <u><a href="../man1/borg-repo-list.1.html">borg-repo-list</a>(1)</u>,    <u><a href="../man1/borg-check.1.html">borg-check</a>(1)</u>,    <u><a href="../man1/borg-benchmark-cpu.1.html">borg-benchmark-cpu</a>(1)</u>,
       <u><a href="../man1/borg-key-import.1.html">borg-key-import</a>(1)</u>, <u><a href="../man1/borg-key-export.1.html">borg-key-export</a>(1)</u>, <u><a href="../man1/borg-key-change-passphrase.1.html">borg-key-change-passphrase</a>(1)</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       The Borg Collective

                                                   2025-01-03                                <u><a href="../man1/BORG-REPO-CREATE.1.html">BORG-REPO-CREATE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>