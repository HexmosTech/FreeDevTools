<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>oz-install - tool to automatically install operating systems into files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/oz">oz_0.17.0-5.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       oz-install - tool to automatically install operating systems into files

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>oz-install</b> <b>[OPTIONS]</b> <b>&lt;tdl-file&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  is  a  tool  to  automatically install operating system into files that represent disk images.  The
       input is an XML file representing the operating system and packages to be installed.  By default (and  by
       design),  the  first  stage  of  the  install  only  installs  a  JEOS  (Just  Enough  Operating System);
       customization, including the  installation  of  additional  packages  can  also  be  done,  but  requires
       additional flags.

       Note  that  oz-install  does  the  actual installation using a combination of KVM and libvirt, so both of
       these must be available (and working) for oz-install to have a chance to succeed.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-a</b> <b>&lt;auto&gt;</b>
              Use the user-provided auto installation file <b>auto</b>.  By default, Oz will  use  a  hard-coded  auto-
              installation  file  (kickstart,  preseed,  sif,  etc)  to  do a basic OS installation.  Using this
              option, the user can provide an alternate auto-installation file to do the install.  The caveat is
              that user-provided auto-installation files are more likely to cause installation errors,  so  this
              option should be used with caution.

       <b>-b</b> <b>&lt;disk_bus&gt;</b>
              Use  <b>disk_bus</b>  for  the  storage  device  while  doing  the  install.  By default, Oz has built-in
              knowledge of the appropriate disk bus to use while installing each guest operating system (ide  or
              virtio).  This option allows the user to override that default with their own choice.

       <b>-c</b> <b>&lt;config&gt;</b>
              Get  the configuration from config file <b>config</b>, instead of the default /etc/oz/oz.cfg.  If neither
              one exists, Oz will use sensible defaults.  The config file is in  standard  ini  format;  for  an
              explanation of the sections and keys, see the <b>CONFIGURATION</b> <b>FILE</b> section.

       <b>-d</b> <b>&lt;loglevel&gt;</b>
              Turn on debugging output to level <b>loglevel</b>.  The log levels are:

              0 - errors only (this is the default)

              1 - errors and warnings

              2 - errors, warnings, and information

              3 - all messages

              4 - all messages, prepended with the level and classname

       <b>-f</b>     Force  the  generation of new installation media.  By default, oz-install will always try to use a
              locally cached version of the oz-modified install media if it is  available.   Failing  that,  oz-
              install will try to use a locally cached version of the pristine install media if it is available.
              You can use this flag to force it to always download and regenerate the oz-modified install media,
              even if it has a local version available.

       <b>-g</b>     Generate  the ICICLE (a package manifest, with some additional metadata) after the installation is
              complete.

       <b>-h</b>     Print a short help message.

       <b>-i</b> <b>&lt;icicle&gt;</b>
              If oz-install has been instructed to generate an ICICLE (see the -g option), then it will normally
              write the ICICLE XML to stdout.  To have oz-install write the ICICLE to a file instead, use the -i
              option.  Note that it is an error to specify -i without -g.

       <b>-m</b> <b>&lt;mac_address&gt;</b>
              Use  <b>mac_address</b>  for  the  network  device  while  doing  the  install.   The  default  value  is
              autogenerated by Oz. This option allows the user to override this behaviour.

       <b>-n</b> <b>&lt;network_device&gt;</b>
              Use  <b>network_device</b>  for  the network device while doing the install.  By default, Oz has built-in
              knowledge of the appropriate network device to use while installing each  guest  operating  system
              (ne2k_pci,  rtl8139, virtio).  This option allows the user to override that default with their own
              choice.

       <b>-p</b>     Cleanup old guests before installation.  By default, if  a  guest  with  the  same  libvirt  UUID,
              libvirt  name,  or  diskimage  exists  prior  to Oz starting installation, Oz will abort.  If this
              option is used, then Oz will undefine the libvirt guest with the same name or UUID and delete  the
              diskimage, so it should be used with caution.

       <b>-s</b> <b>&lt;disk&gt;</b>
              Write the disk image to <b>disk</b>, rather than the default of the TDL name.

       <b>-t</b> <b>&lt;timeout&gt;</b>
              Terminate the installation of the guest in <b>timeout</b> seconds rather than the oz default.  This value
              should  be  increased  if running on slow storage or running multiple oz-install operations on the
              same machine.

              Please note that there is a separate termination action that occurs if 300 seconds elapses with no
              disk activity to the operating system.  This timer value is not configurable.

       <b>-u</b>     Customize the image after installation.  This generally installs additional packages onto the disk
              image after installation.

       <b>-x</b> <b>&lt;xmlfile&gt;</b>
              Oz will normally generate a libvirt XML file in the current working directory  suffixed  with  the
              date and time.  Specifying the -x option allows the filename to be overridden.

</pre><h4><b>CONFIGURATION</b> <b>FILE</b></h4><pre>
       The  Oz  configuration  file  is  in  standard  INI  format  with  several  sections.   If any section or
       configuration key is missing, Oz will use a sensible default.  For  true/false  configuration  keys,  the
       values  of "true", "True", "yes", or "Yes" can be used to turn the option on, and "false", "False", "no",
       or "No" can be used to turn the behavior off.  The configuration file should have the following form:

           [paths]
           output_dir = /var/lib/libvirt/images
           data_dir = /var/lib/oz
           screenshot_dir = .
           sshprivkey = /etc/oz/id_rsa-icicle-gen

           [libvirt]
           uri = qemu:///system
           type = kvm
           bridge_name = virbr0
           cpus = 1
           memory = 1024
           image_type = raw

           [cache]
           original_media = yes
           modified_media = no
           jeos = no

           [icicle]
           safe_generation = no

       The <b>paths</b> section defines the paths that Oz will use for storing  data.   The  <b>output_dir</b>  key  describes
       where  to  store  the  images after they are built, and the <b>data_dir</b> key describes where to cache install
       media and use temporary storage.  Both locations must have a decent amount of free disk  space  in  order
       for Oz to work properly.  The <b>screenshot_dir</b> key describes where to store screenshots of failed installs.
       The  <b>sshprivkey</b> key describes where the ssh keys are stored, which are required by Oz to do customization
       of the image.

       The <b>libvirt</b> section allows some manipulation of how Oz uses libvirt.  The <b>uri</b> key describes  the  libvirt
       URI  to  use to do the guest installation.  The <b>type</b> key defines what type of virtualization to use.  The
       <b>bridge_name</b> key defines which bridge Oz should place the guests  that  it  launches  on.   The  <b>cpus</b>  key
       defines  how many cpus should be used inside the virtual machine.  The <b>memory</b> key defines how much memory
       (in megabytes) should be used inside the virtual machine.  The <b>image_type</b> key defines which  output  disk
       type should be used; this can be any value that libvirt supports.

       The  <b>cache</b>  section  allows  some  manipulation  of  how  Oz caches data.  The caching of data in Oz is a
       tradeoff between installation time and storage space.  The <b>original_media</b>  key  tells  Oz  to  cache  the
       original installation media so that it does not have to download it the next time an install for the same
       operating  system  is  requested.   The <b>modified_media</b> key tells Oz to cache the oz-modified installation
       media so that it does not have to download and modify it the next time an install for the same  operating
       system  is  requested.  The <b>jeos</b> key tells Oz to cache the installed operating system after installation.
       This can significantly speed up subsequent installation of the same operating system, with the additional
       downside of the operating system getting out-of-date with respect to security updates.  Use with care.

       The <b>icicle</b> section allows some manipulation of how Oz generates  ICICLE  output.   ICICLE  is  a  package
       manifest  that  can  optionally  be  generated  at the end of installs.  The <b>safe_generation</b> key controls
       whether Oz uses a throwaway overlay file while generating  the  ICICLE.   If  it  is  set  to  "no"  (the
       default),  then  Oz  will boot up the guest at the end of the install and run the appropriate commands to
       generate the ICICLE.  If it is set to "yes", then Oz will use a throwaway overlay file  while  generating
       the  ICICLE.   After  the ICICLE is generated, Oz will delete the backing file, leaving the original disk
       image pristine.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/oz-generate-icicle.1.html">oz-generate-icicle</a>(1), <a href="../man1/oz-customize.1.html">oz-customize</a>(1), <a href="../man1/oz-cleanup-cache.1.html">oz-cleanup-cache</a>(1), <a href="../man1/oz-examples.1.html">oz-examples</a>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Chris Lalancette &lt;<a href="mailto:clalancette@gmail.com">clalancette@gmail.com</a>&gt;

oz-install                                          Aug 2011                                       <u><a href="../man1/OZ-INSTALL.1.html">OZ-INSTALL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>