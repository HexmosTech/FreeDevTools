<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stilts-tmatch1 - Performs a crossmatch internal to a single table</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/stilts">stilts_3.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stilts-tmatch1 - Performs a crossmatch internal to a single table

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>stilts</b> <b>tmatch1</b> [matcher=<u>&lt;matcher-name&gt;</u>] [params=<u>&lt;match-params&gt;</u>] [tuning=<u>&lt;tuning-params&gt;</u>] [values=<u>&lt;expr-</u>
                      <u>list&gt;</u>] [action=<u>identify|keep0|keep1|wide2|wideN</u>] [progress=<u>none|log|time|profile</u>]
                      [runner=<u>parallel|parallel&lt;n&gt;|parallel-all|sequential|classic|partest</u>] [ifmt=<u>&lt;in-format&gt;</u>]
                      [istream=<u>true|false</u>] [in=<u>&lt;table&gt;</u>] [icmd=<u>&lt;cmds&gt;</u>] [ocmd=<u>&lt;cmds&gt;</u>]
                      [omode=<u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>] [out=<u>&lt;out-table&gt;</u>]
                      [ofmt=<u>&lt;out-format&gt;</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>tmatch1</u>  performs  efficient  and flexible crossmatching between the rows of a single table. It can match
       rows on the basis of their relative position in the sky, or alternatively using many other criteria  such
       as  separation in in some isotropic or anisotropic Cartesian space, identity of a key value, or some com‐
       bination of these; the full range of match criteria is dicussed in SUN/256.

       The basic task performed by the intra-table matcher is to identify groups of rows within the table  which
       match  each other. See SUN/256 for an explanation of exactly what consitutes a match group. The result of
       identifying these groups is expressed as an output table in one of a variety of ways,  specified  by  the
       <u>action</u> parameter. These options include marking group membership in added columns and eliminating some or
       all rows which form part of a match group.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>matcher=</b><u>&lt;matcher-name&gt;</u>
              Defines  the  nature  of the matching that will be performed. Depending on the name supplied, this
              may be positional matching using celestial or Cartesian coordinates, exact matching on  the  value
              of  a  string column, or other things. A list and explanation of the available matching algorithms
              is given in SUN/256. The value supplied for this parameter determines the meanings of  the  values
              required by the <u>params</u>, <u>values*</u> and <u>tuning</u> parameter(s).

       <b>params=</b><u>&lt;match-params&gt;</u>
              Determines  the  parameters  of this match. This is typically one or more tolerances such as error
              radii. It may contain zero or more values; the values that are required depend on the  match  type
              selected  by  the  <u>matcher</u>  parameter.  If  it contains multiple values, they must be separated by
              spaces; values which contain a space can be 'quoted' or "quoted".

       <b>tuning=</b><u>&lt;tuning-params&gt;</u>
              Tuning values for the matching process, if appropriate. It may contain zero or  more  values;  the
              values  that  are permitted depend on the match type selected by the <u>matcher</u> parameter. If it con‐
              tains multiple values, they must be separated by spaces; values  which  contain  a  space  can  be
              'quoted'  or  "quoted". If this optional parameter is not supplied, sensible defaults will be cho‐
              sen.

       <b>values=</b><u>&lt;expr-list&gt;</u>
              Defines the values from the input table which are used to determine whether a match has  occurred.
              These will typically be coordinate values such as RA and Dec and perhaps some per-row error values
              as  well, though exactly what values are required is determined by the kind of match as determined
              by <u>matcher</u>. Depending on the kind of match, the number and type of the  values  required  will  be
              different. Multiple values should be separated by whitespace; if whitespace occurs within a single
              value  it  must  be 'quoted' or "quoted". Elements of the expression list are commonly just column
              names, but may be algebraic expressions calculated from zero  or  more  columns  as  explained  in
              SUN/256.

       <b>action=</b><u>identify|keep0|keep1|wide2|wideN</u>
              Determines the form of the table which will be output as a result of the internal match.

                * <u>identify</u>:  The  output  table is the same as the input table except that it contains two addi‐
                  tional columns, <u>GroupID</u> and <u>GroupSize</u>, following the input columns. Each group of  rows  which
                  matched  is  assigned  a  unique integer, recorded in the GroupID column, and the size of each
                  group is recorded in the GroupSize column. Rows which don't match any  others  (singles)  have
                  null values in both these columns.

                * <u>keep0</u>: The result is a new table containing only "single" rows, that is ones which don't match
                  any other rows in the table. Any other rows are thrown out.

                * <u>keep1</u>:  The  result  is a new table in which only one row (the first in the input table order)
                  from each group of matching ones is retained. A subsequent intra-table  match  with  the  same
                  criteria would therefore show no matches.

                * <u>wideN</u>:  The result is a new "wide" table consisting of matched rows in the input table stacked
                  next to each other. Only groups of exactly N rows in the input table are used to form the out‐
                  put table; each row of the output table consists of the columns of  the  first  group  member,
                  followed by the columns of the second group member and so on. The output table therefore has N
                  times  as  many columns as the input table. The column names in the new table have <b>_</b><u>1</u>, <b>_</b><u>2</u>, ...
                  appended to them to avoid duplication.

       <b>progress=</b><u>none|log|time|profile</u>
              Determines whether information on progress of the match should be output  to  the  standard  error
              stream  as  it  progresses. For lengthy matches this is a useful reassurance and can give guidance
              about how much longer it will take. It can also be useful as a performance diagnostic.

              The options are:

                * <u>none</u>: no progress is shown

                * <u>log</u>: progress information is shown

                * <u>time</u>: progress information and some time profiling information is shown

                * <u>profile</u>: progress information and limited time/memory profiling information are shown

       <b>runner=</b><u>parallel|parallel&lt;n&gt;|parallel-all|sequential|classic|partest</u>
              Selects the threading implementation. The options are currently:

                * <u>parallel</u>: uses multithreaded implementation for large tables, with default parallelism,  which
                  is the smaller of 6 and the number of available processors

                * <u>parallel&lt;n&gt;</u>: uses multithreaded implementation for large tables, with parallelism given by the
                  supplied value <u>&lt;n&gt;</u>

                * <u>parallel-all</u>:  uses multithreaded implementation for large tables, with a parallelism given by
                  the number of available processors

                * <u>sequential</u>: uses multithreaded implementation but with only a single thread

                * <u>classic</u>: uses legacy sequential implementation

                * <u>partest</u>: uses multithreaded implementation even when tables are small
               The <u>parallel*</u> options should normally run faster than <u>sequential</u> or <u>classic</u> (which  are  provided
              mainly  for  testing purposes), at least for large matches and where multiple processing cores are
              available.

              The default value "<u>parallel</u>" is currently limited to a parallelism of 6 since larger values  yield
              diminishing  returns  given  that some parts of the matching algorithms run sequentially (Amdahl's
              Law), and using too many threads can sometimes end up doing more work or impacting on other opera‐
              tions on the same machine. But you can experiment with other concurrencies, e.g.  "<u>parallel16</u>"  to
              run on 16 cores (if available) or "<u>parallel-all</u>" to run on all available cores.

              The  value  of this parameter should make no difference to the matching results. If you notice any
              discrepancies <b>please</b> <b>report</b> <b>them</b>.

       <b>ifmt=</b><u>&lt;in-format&gt;</u>
              Specifies the format of the input table as specified by parameter <u>in</u>. The known formats are listed
              in SUN/256. This flag can be used if you know what format your table is in. If it has the  special
              value  <u>(auto)</u>  (the default), then an attempt will be made to detect the format of the table auto‐
              matically. This cannot always be done correctly however, in which case the program will exit  with
              an  error  explaining which formats were attempted. This parameter is ignored for scheme-specified
              tables.

       <b>istream=</b><u>true|false</u>
              If set true, the input table specified by the <u>in</u> parameter will be read as a stream. It is  neces‐
              sary  to give the <u>ifmt</u> parameter in this case. Depending on the required operations and processing
              mode, this may cause the read to fail (sometimes it is necessary  to  read  the  table  more  than
              once).  It is not normally necessary to set this flag; in most cases the data will be streamed au‐
              tomatically if that is the best thing to do. However it can sometimes result in less resource  us‐
              age  when  processing  large files in certain formats (such as VOTable). This parameter is ignored
              for scheme-specified tables.

       <b>in=</b><u>&lt;table&gt;</u>
              The location of the input table. This may take one of the following forms:

                * A filename.

                * A URL.

                * The special value "<u>-</u>", meaning standard input. In this case the input format must be given ex‐
                  plicitly using the <u>ifmt</u> parameter. Note that not all formats can be streamed in this way.

                * A scheme specification of the form <u>:&lt;scheme-name&gt;:&lt;scheme-args&gt;</u>.

                * A system command line with either a "<u>&lt;</u>" character at the start, or a "<u>|</u>" character at the  end
                  ("<u>&lt;syscmd</u>" or "<u>syscmd|</u>"). This executes the given pipeline and reads from its standard output.
                  This will probably only work on unix-like systems.
               In  any case, compressed data in one of the supported compression formats (gzip, Unix compress or
              bzip2) will be decompressed transparently.

       <b>icmd=</b><u>&lt;cmds&gt;</u>
              Specifies processing to be performed on the input table as specified by parameter <u>in</u>,  before  any
              other  processing  has  taken place. The value of this parameter is one or more of the filter com‐
              mands described in SUN/256. If more than one is given, they must be separated by semicolon charac‐
              ters (";"). This parameter can be repeated multiple times on the same command line to build  up  a
              list  of  processing  steps.  The  sequence  of  commands given in this way defines the processing
              pipeline which is performed on the table.

              Commands may alternatively be supplied in an external file, by  using  the  indirection  character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>ocmd=</b><u>&lt;cmds&gt;</u>
              Specifies  processing  to  be  performed on the output table, after all other processing has taken
              place. The value of this parameter is one or more of the filter commands described in SUN/256.  If
              more  than  one is given, they must be separated by semicolon characters (";"). This parameter can
              be repeated multiple times on the same command line to build up a list of  processing  steps.  The
              sequence  of  commands given in this way defines the processing pipeline which is performed on the
              table.

              Commands may alternatively be supplied in an external file, by  using  the  indirection  character
              '<u>@</u>'. Thus a value of "<u>@filename</u>" causes the file <u>filename</u> to be read for a list of filter commands
              to execute. The commands in the file may be separated by newline characters and/or semicolons, and
              lines which are blank or which start with a '<u>#</u>' character are ignored. A backslash character '<u>\fR'</u>
              <u>at</u> <u>the</u> <u>end</u> <u>of</u> <u>a</u> <u>line</u> <u>joins</u> <u>it</u> <u>with</u> <u>the</u> <u>following</u> <u>line.</u>

       <b>omode=</b><u>out|meta|stats|count|checksum|cgi|discard|topcat|samp|tosql|gui</u>
              The  mode  in which the result table will be output. The default mode is <u>out</u>, which means that the
              result will be written as a new table to disk or elsewhere, as determined by the <u>out</u> and <u>ofmt</u>  pa‐
              rameters. However, there are other possibilities, which correspond to uses to which a table can be
              put other than outputting it, such as displaying metadata, calculating statistics, or populating a
              table  in  an SQL database. For some values of this parameter, additional parameters (<u>&lt;mode-args&gt;</u>)
              are required to determine the exact behaviour.

              Possible values are

                * <u>out</u>

                * <u>meta</u>

                * <u>stats</u>

                * <u>count</u>

                * <u>checksum</u>

                * <u>cgi</u>

                * <u>discard</u>

                * <u>topcat</u>

                * <u>samp</u>

                * <u>tosql</u>

                * <u>gui</u>
               Use the <u>help=omode</u> flag or see SUN/256 for more information.

       <b>out=</b><u>&lt;out-table&gt;</u>
              The location of the output table. This is usually a filename to write to. If it is  equal  to  the
              special value "-" (the default) the output table will be written to standard output.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

       <b>ofmt=</b><u>&lt;out-format&gt;</u>
              Specifies  the  format  in  which  the  output table will be written (one of the ones in SUN/256 -
              matching is case-insensitive and you can use just the first few letters). If it  has  the  special
              value  "<u>(auto)</u>" (the default), then the output filename will be examined to try to guess what sort
              of file is required usually by looking at the extension. If it's not  obvious  from  the  filename
              what output format is intended, an error will result.

              This parameter must only be given if <u>omode</u> has its default value of "<u>out</u>".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/stilts.1.html">stilts</a></b>(1)

       If the package stilts-doc is installed, the full documentation <b>SUN/256</b> is available in HTML format:
       file:///usr/share/doc/stilts/sun256/index.html

</pre><h4><b>VERSION</b></h4><pre>
       STILTS version 3.5.1-debian

       This  is the Debian version of Stilts, which lack the support of some file formats and network protocols.
       For differences see
       file:///usr/share/doc/stilts/README.Debian

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Taylor (Bristol University)

                                                    Mar 2017                                   <u><a href="../man1/STILTS-TMATCH1.1.html">STILTS-TMATCH1</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>