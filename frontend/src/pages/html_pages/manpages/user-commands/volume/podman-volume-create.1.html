<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>podman-volume-create - Create a new volume</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/podman">podman_5.4.1+ds1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       podman-volume-create - Create a new volume

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>podman</b> <b>volume</b> <b>create</b> [<u>options</u>] [<u>name</u>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Creates  an  empty  volume  and  prepares  it  to be used by containers. The volume can be created with a
       specific name, if a name is not given a random name is generated. You can add metadata to the  volume  by
       using the <b>--label</b> flag and driver options can be set using the <b>--opt</b> flag.

</pre><h4><b>OPTIONS</b></h4><pre>
   <b>--driver,</b> <b>-d=</b><u><b>driver</b></u>
       Specify  the volume driver name (default <b>local</b>).  There are two drivers supported by Podman itself: <b>local</b>
       and <b>image</b>.

       The <b>local</b> driver uses a directory on disk as the backend by  default,  but  can  also  use  the  <b><a href="../man8/mount.8.html">mount</a>(8)</b>
       command to mount a filesystem as the volume if <b>--opt</b> is specified.

       The <b>image</b> driver uses an image as the backing store of for the volume.  An overlay filesystem is created,
       which allows changes to the volume to be committed as a new layer on top of the image.

       Using  a value other than <b>local</b> or <b>image</b>, Podman attempts to create the volume using a volume plugin with
       the given name.  Such plugins must be defined in the <b>volume_plugins</b>  section  of  the  <b><a href="../man5/containers.conf.5.html">containers.conf</a>(5)</b>
       configuration file.

   <b>--help</b>
       Print usage statement

   <b>--ignore</b>
       Don't fail if the named volume already exists, instead just print the name. Note that the new options are
       not applied to the existing volume.

   <b>--label,</b> <b>-l=</b><u><b>label</b></u>
       Set metadata for a volume (e.g., --label mykey=value).

   <b>--opt,</b> <b>-o=</b><u><b>option</b></u>
       Set  driver  specific  options.   For the default driver, <b>local</b>, this allows a volume to be configured to
       mount a filesystem on the host.

       For the <b>local</b> driver the following options are supported: <b>type</b>, <b>device</b>, <b>o</b>, and <b>[no]copy</b>.

              • The <b>type</b> option sets the type of the filesystem to be mounted, and is equivalent to the <b>-t</b>  flag
                to <b><a href="../man8/mount.8.html">mount</a>(8)</b>.

              • The  <b>device</b>  option  sets  the device to be mounted, and is equivalent to the <b>device</b> argument to
                <b><a href="../man8/mount.8.html">mount</a>(8)</b>.

              • The <b>copy</b> option enables copying files from the container image path where the mount  is  created
                to the newly created volume on the first run.  <b>copy</b> is the default.

       The  <b>o</b> option sets options for the mount, and is equivalent to the filesystem options (also <b>-o</b>) passed to
       <b><a href="../man8/mount.8.html">mount</a>(8)</b> with the following exceptions:

              • The <b>o</b> option supports <b>uid</b> and <b>gid</b> options to set the UID and GID of the created volume that  are
                not normally supported by <b><a href="../man8/mount.8.html">mount</a>(8)</b>.

              • The  <b>o</b> option supports the <b>size</b> option to set the maximum size of the created volume, the <b>inodes</b>
                option to set the maximum number of inodes for the volume, and  <b>noquota</b>  to  completely  disable
                quota  support even for tracking of disk usage.  The <b>size</b> option is supported on the "tmpfs" and
                "xfs[note]" file systems.  The <b>inodes</b> option is  supported  on  the  "xfs[note]"  file  systems.
                Note:  xfs  filesystems must be mounted with the <b>prjquota</b> flag described in the <b><a href="../man8/xfs_quota.8.html">xfs_quota</a>(8)</b> man
                page. Podman will throw an error if they're not.

              • The <b>o</b> option supports using volume options other than the UID/GID options with the <b>local</b>  driver
                and requires root privileges.

              • The <b>o</b> options supports the <b>timeout</b> option which allows users to set a driver specific timeout in
                seconds  before  volume creation fails. For example, <b>--opt=o=timeout=10</b> sets a driver timeout of
                10 seconds.

       <u>Note</u> <u>Do</u> <u>not</u> <u>confuse</u> <u>the</u> <b>--opt,-o</b> create option with the <b>-o</b> mount option.  For example, with <b>podman</b> <b>volume</b>
       <b>create</b>, use <b>-o=o=uid=1000</b> <u>not</u> <b>-o=uid=1000</b>.

       For the <b>image</b> driver, the only supported option is <b>image</b>, which specifies the image the volume  is  based
       on.  This option is mandatory when using the <b>image</b> driver.

       When  not  using the <b>local</b> and <b>image</b> drivers, the given options are passed directly to the volume plugin.
       In this case, supported options are dictated by the plugin in question, not Podman.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Create empty volume.

       $ podman volume create

       Create empty named volume.

       $ podman volume create myvol

       Create empty named volume with specified label.

       $ podman volume create --label foo=bar myvol

       Create tmpfs named volume with specified size and mount options.

       # podman volume create --opt device=tmpfs --opt type=tmpfs --opt o=size=2M,nodev,noexec myvol

       Create tmpfs named volume testvol with specified options.

       # podman volume create --opt device=tmpfs --opt type=tmpfs --opt o=uid=1000,gid=1000 testvol

       Create image named volume using the specified local image in containers/storage.

       # podman volume create --driver image --opt image=fedora:latest fedoraVol

</pre><h4><b>QUOTAS</b></h4><pre>
       <b>podman</b> <b>volume</b> <b>create</b> uses <b>XFS</b> <b>project</b> <b>quota</b> <b>controls</b> for controlling the size and the number of inodes of
       builtin volumes. The directory used to store the volumes must be an <b>XFS</b> file system and be  mounted  with
       the <b>pquota</b> option.

       Example <a href="file:/etc/fstab">/etc/fstab</a> entry:

       /dev/podman/podman-var <a href="file:/var">/var</a> xfs defaults,x-systemd.device-timeout=0,pquota 1 2

       Podman generates project IDs for each builtin volume, but these project IDs need to be unique for the XFS
       file system. These project IDs by default are generated randomly, with a potential for overlap with other
       quotas on the same file system.

       The xfs_quota tool can be used to assign a project ID to the storage driver directory, e.g.:

       echo 100000:/var/lib/containers/storage/overlay &gt;&gt; /etc/projects
       echo 200000:/var/lib/containers/storage/volumes &gt;&gt; /etc/projects
       echo storage:100000 &gt;&gt; /etc/projid
       echo volumes:200000 &gt;&gt; /etc/projid
       xfs_quota -x -c 'project -s storage volumes' /&lt;xfs mount point&gt;

       In  the  example above we are configuring the overlay storage driver for newly created containers as well
       as volumes to use project IDs with a <b>start</b> <b>offset</b>.  All containers are assigned larger project IDs  (e.g.
       &gt;=  100000).   All  volume  assigned  project IDs larger project IDs starting with 200000.  This prevents
       xfs_quota management conflicts with containers/storage.

</pre><h4><b>MOUNT</b> <b>EXAMPLES</b></h4><pre>
       <b>podman</b> <b>volume</b> <b>create</b> allows the <b>type</b>, <b>device</b>, and <b>o</b> options to be passed to <b><a href="../man8/mount.8.html">mount</a>(8)</b> when using the <b>local</b>
       driver.

</pre><h4><b>s3fs-fuse</b></h4><pre>
       s3fs-fuse or just <b>s3fs</b>, is a fuse filesystem that allows s3 prefixes to be mounted as filesystem mounts.

       <b>Installing:</b>

       $ doas dnf install s3fs-fuse

       <b>Simple</b> <b>usage:</b>

       $ s3fs --help
       $ s3fs -o use_xattr,endpoint=aq-central-1 bucket:/prefix <a href="file:/mnt">/mnt</a>

       <b>Equivalent</b> <b>through</b> <b><a href="../man8/mount.8.html">mount</a>(8)</b>

       $ mount -t fuse.s3fs -o use_xattr,endpoint=aq-central-1 bucket:/prefix <a href="file:/mnt">/mnt</a>

       <b>Equivalent</b> <b>through</b> <b>podman</b> <b>volume</b> <b>create</b>

       $ podman volume create s3fs-fuse-volume -o type=fuse.s3fs -o device=bucket:/prefix -o o=use_xattr,endpoint=aq-central-1

       <b>The</b> <b>volume</b> <b>can</b> <b>then</b> <b>be</b> <b>mounted</b> <b>in</b> <b>a</b> <b>container</b> <b>with</b>

       $ podman run -v s3fs-fuse-volume:/s3:z --rm -it fedora:latest

       Please see the available options on their wiki.

   <b>Using</b> <b>with</b> <b>other</b> <b>container</b> <b>users</b>
       The above example works because the volume is mounted as the host user and inside the container  <b>root</b>  is
       mapped to the user in the host.

       If  the  mount  is accessed by a different user inside the container, a "Permission denied" error will be
       raised.

       $ podman run --user bin:bin -v s3fs-fuse-volume:/s3:z,U --rm -it fedora:latest
       $ ls /s3
       # ls: /s3: Permission denied

       In FUSE-land, mounts are protected for the user who mounted them; specify the <b>allow_other</b> mount option if
       other users need access.  &gt; Note: This will remove the normal fuse security measures on the mount  point,
       after which, the normal filesystem permissions will have to protect it

       $ podman volume create s3fs-fuse-other-volume -o type=fuse.s3fs -o device=bucket:/prefix -o o=allow_other,use_xattr,endpoint=aq-central-1
       $ podman run --user bin:bin -v s3fs-fuse-volume:/s3:z,U --rm -it fedora:latest
       $ ls /s3

   <b>The</b> <b>Prefix</b> <b>must</b> <b>exist</b>
       <b>s3fs</b> will fail to mount if the prefix does not exist in the bucket.

       Create a s3-directory by putting an empty object at the desired <b>prefix/</b> key

       $ aws s3api put-object --bucket bucket --key prefix/

       If performance is the priority, please check out the more performant goofys.

              FUSE filesystems exist for Google Cloud Storage and Azure Blob Storage

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/podman.1.html">podman</a>(1)</b>,  <b><a href="../man5/containers.conf.5.html">containers.conf</a>(5)</b>,  <b><a href="../man1/podman-volume.1.html">podman-volume</a>(1)</b>,  <b><a href="../man8/mount.8.html">mount</a>(8)</b>,  <b><a href="../man8/xfs_quota.8.html">xfs_quota</a>(8)</b>,  <b><a href="../man8/xfs_quota.8.html">xfs_quota</a>(8)</b>,  <b><a href="../man5/projects.5.html">projects</a>(5)</b>,
       <b><a href="../man5/projid.5.html">projid</a>(5)</b>

</pre><h4><b>HISTORY</b></h4><pre>
       January  2020,  updated  with  information  on  volume   plugins   by   Matthew   Heon   <a href="mailto:mheon@redhat.com">mheon@redhat.com</a>
       ⟨<a href="mailto:mheon@redhat.com">mailto:mheon@redhat.com</a>⟩  November  2018,  Originally  compiled  by  Urvashi Mohnani <a href="mailto:umohnani@redhat.com">umohnani@redhat.com</a>
       ⟨<a href="mailto:umohnani@redhat.com">mailto:umohnani@redhat.com</a>⟩

                                                                                         <u><a href="../man1/podman-volume-create.1.html">podman-volume-create</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>