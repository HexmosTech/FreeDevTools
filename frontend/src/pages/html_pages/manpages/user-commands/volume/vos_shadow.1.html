<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vos_shadow - Creates a shadow copy of a volume on a different server/partition</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/openafs-client">openafs-client_1.8.13.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vos_shadow - Creates a shadow copy of a volume on a different server/partition

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>vos</b> <b>shadow</b> [<b>-id</b>] &lt;<u>volume</u> <u>name</u> <u>or</u> <u>ID</u> <u>on</u> <u>source</u>&gt;
           [<b>-fromserver</b>] &lt;<u>machine</u> <u>name</u> <u>on</u> <u>source</u>&gt;
           [<b>-frompartition</b>] &lt;<u>partition</u> <u>name</u> <u>on</u> <u>source</u>&gt;
           [<b>-toserver</b>] &lt;<u>machine</u> <u>name</u> <u>on</u> <u>destination</u>&gt;
           [<b>-topartition</b>] &lt;<u>partition</u> <u>name</u> <u>on</u> <u>destination</u>&gt;
           [<b>-toname</b> &lt;<u>volume</u> <u>name</u> <u>on</u> <u>destination</u>&gt;]
           [<b>-toid</b> &lt;<u>volume</u> <u>ID</u> <u>on</u> <u>destination</u>&gt;]
           [<b>-offline</b>] [<b>-readonly</b>] [<b>-live</b>] [<b>-incremental</b>]
           [<b>-cell</b> &lt;<u>cell</u> <u>name</u>&gt;]
           [<b>-noauth</b>] [<b>-localauth</b>]
           [<b>-verbose</b>] [<b>-encrypt</b>] [<b>-noresolve</b>]
           [<b>-config</b> &lt;<u>config</u> <u>directory</u>&gt;]
           [<b>-help</b>]

       <b>vos</b> <b>sh</b> [<b>-id</b>] &lt;<u>volume</u> <u>name</u> <u>or</u> <u>ID</u> <u>on</u> <u>source</u>&gt;
           [<b>-froms</b>] &lt;<u>machine</u> <u>name</u> <u>on</u> <u>source</u>&gt;
           [<b>-fromp</b>] &lt;<u>partition</u> <u>name</u> <u>on</u> <u>source</u>&gt;
           [<b>-tos</b>] &lt;<u>machine</u> <u>name</u> <u>on</u> <u>destination</u>&gt;
           [<b>-top</b>] &lt;<u>partition</u> <u>name</u> <u>on</u> <u>destination</u>&gt;
           [<b>-ton</b> &lt;<u>volume</u> <u>name</u> <u>on</u> <u>destination</u>&gt;]
           [<b>-toi</b> &lt;<u>volume</u> <u>ID</u> <u>on</u> <u>destination</u>&gt;]
           [<b>-o</b>] [<b>-r</b>] [<b>-l</b>] [<b>-in</b>]
           [<b>-c</b> &lt;<u>cell</u> <u>name</u>&gt;]
           [<b>-noa</b>] [<b>-lo</b>] [<b>-v</b>] [<b>-e</b>] [<b>-nor</b>]
           [<b>-co</b> &lt;<u>config</u> <u>directory</u>&gt;]
           [<b>-h</b>]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>vos</b> <b>shadow</b> command creates a shadow copy of a volume on a different partition or server.

       A shadow volume is a copy of a volume that does not normally appear in the volume location database
       (VLDB). It is a primitive operation that is meant to be used in backup or disaster recovery situations.

</pre><h4><b>CAUTIONS</b></h4><pre>
       This command is not used during normal OpenAFS administration and may have adverse effects on the VLDB if
       not used properly! This command should only be used by an expert.

       Using this command on a volume when the source volume is not the same as parent volume used to create the
       shadow will leave the destination volume in a unknown state.

       Running <b>vos</b> <b>syncserv</b> or <b>vos</b> <b>syncvldb</b> on a fileserver containing shadow volumes will not update the VLDB
       with the shadowed Read/Write volumes as long as the entries for the source volumes still exist. In a
       disaster recovery situation the VLDB entries for the corresponding source volumes need hence to be
       deleted first.

       Currently, the maximum quota for a volume is 2 terabytes (2^41 bytes). Note that this only affects the
       volume's quota; a volume may grow much larger if the volume quota is disabled. However, volumes over 2
       terabytes in size may be impractical to move, and may have their size incorrectly reported by some tools,
       such as <b><a href="../man1/fs_listquota.1.html">fs_listquota</a></b>(1).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-id</b> &lt;<u>volume</u> <u>name</u> <u>or</u> <u>ID</u>&gt;
           Specifies either the complete name or volume ID number of a read/write volume.

       <b>-fromserver</b> &lt;<u>machine</u> <u>name</u> <u>for</u> <u>source</u>&gt;
           Identifies  the file server machine where the source volume resides. Provide the machine's IP address
           or its host name (either fully qualified or using an  unambiguous  abbreviation).  For  details,  see
           <b><a href="../man1/vos.1.html">vos</a></b>(1).

       <b>-frompartition</b> &lt;<u>partition</u> <u>name</u> <u>for</u> <u>source</u>&gt;
           Names  the  partition where the source volume resides. Provide the full partition name (for, example,
           <b>/vicepa</b>) or one of the abbreviated forms described in <b><a href="../man1/vos.1.html">vos</a></b>(1).

       <b>-toserver</b> &lt;<u>machine</u> <u>name</u> <u>for</u> <u>destination</u>&gt;
           Identifies the file server machine to which to copy the volume.  Provide the machine's IP address  or
           its host name (either fully qualified or using an unambiguous abbreviation). For details, see <b><a href="../man1/vos.1.html">vos</a></b>(1).

       <b>-topartition</b> &lt;<u>partition</u> <u>name</u> <u>for</u> <u>destination</u>&gt;
           Names  the  partition  to  which  to  copy the volume. Provide the full partition name (for, example,
           <b>/vicepa</b>) or one of the abbreviated forms described in <b><a href="../man1/vos.1.html">vos</a></b>(1).

       <b>-toname</b> &lt;<u>volume</u> <u>name</u> <u>for</u> <u>new</u> <u>copy</u>&gt;
           The complete name of the new volume to create.

       <b>-toid</b> &lt;<u>volume</u> <u>ID</u> <u>for</u> <u>new</u> <u>copy</u>&gt;
           The volume ID number to use for the new volume.

       <b>-offline</b>
           Leaves the new volume flagged as off-line in the volume database.

       <b>-readonly</b>
           Flags the new volume as read-only in the volume database.

       <b>-live</b>
           Copies the live volume without cloning.  This is normally not necessary and causes the volume  to  be
           kept locked for longer than the normal copy mechanism.

       <b>-incremental</b>
           Copy the changes from the source volume to a previously created shadow volume.

       <b>-cell</b> &lt;<u>cell</u> <u>name</u>&gt;
           Names  the  cell  in which to run the command. Do not combine this argument with the <b>-localauth</b> flag.
           For more details, see <b><a href="../man1/vos.1.html">vos</a></b>(1).

       <b>-noauth</b>
           Assigns the unprivileged identity "anonymous" to the issuer.  Do  not  combine  this  flag  with  the
           <b>-localauth</b> flag. For more details, see <b><a href="../man1/vos.1.html">vos</a></b>(1).

       <b>-localauth</b>
           Constructs  a  server  ticket  using  a  key from the local <u>/etc/openafs/server/KeyFile</u> file. The <b>vos</b>
           command interpreter presents it to the  Volume  Server  and  Volume  Location  Server  during  mutual
           authentication.  Do  not combine this flag with the <b>-cell</b> argument or <b>-noauth</b> flag. For more details,
           see <b><a href="../man1/vos.1.html">vos</a></b>(1).

       <b>-verbose</b>
           Produces on the standard output stream a detailed trace of the command's execution. If this  argument
           is omitted, only warnings and error messages appear.

       <b>-encrypt</b>
           Encrypts  the command so that the operation's results are not transmitted across the network in clear
           text. This option is available in OpenAFS versions 1.4.11 or later and 1.5.60 or later.

       <b>-noresolve</b>
           Shows all servers as IP addresses instead of the DNS name.  This  is  very  useful  when  the  server
           address is registered as 127.0.0.1 or when dealing with multi-homed servers. This option is available
           in OpenAFS versions 1.4.8 or later and 1.5.35 or later.

       <b>-config</b> &lt;<u>configuration</u> <u>directory</u>&gt;
           Set  the location of the configuration directory to be used. This defaults to <u>/etc/openafs</u>, except if
           <b>-localauth</b> is specified, in which case the default is <u>/etc/openafs/server</u>. This option allows the use
           of alternative configuration locations for testing purposes.

       <b>-help</b>
           Prints the online help for this command. All other valid options are ignored.

</pre><h4><b>OUTPUT</b></h4><pre>
       This command has no output unless "-verbose" is specified or there is an error.

</pre><h4><b>PRIVILEGE</b> <b>REQUIRED</b></h4><pre>
       The issuer must be listed in the <u>/etc/openafs/server/UserList</u> file on the  machines  specified  with  the
       <b>-toserver</b>  and  <b>-fromserver</b>  arguments  and  on  each database server machine.  If the <b>-localauth</b> flag is
       included, the issuer must instead be logged on to a server machine as the local superuser "root".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/vos.1.html">vos</a></b>(1), <b><a href="../man1/vos_backup.1.html">vos_backup</a></b>(1), <b><a href="../man1/vos_copy.1.html">vos_copy</a></b>(1), <b><a href="../man1/vos_move.1.html">vos_move</a></b>(1)

       &lt;<a href="http://www.openafs.org/pipermail/openafs-info/2005-July/018469.html">http://www.openafs.org/pipermail/openafs-info/2005-July/018469.html</a>&gt;  discusses   motivation   for   the
       creation of this command.

       &lt;<a href="http://workshop.openafs.org/afsbpw06/talks/drh.scs.html">http://workshop.openafs.org/afsbpw06/talks/drh.scs.html</a>&gt; discusses one possible use for it.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2008 Jason Edgecombe &lt;<a href="mailto:jason@rampaginggeek.com">jason@rampaginggeek.com</a>&gt;

       This  documentation  is  covered by the BSD License as written in the doc/LICENSE file. This man page was
       written by Jason Edgecombe for OpenAFS.

OpenAFS                                            2025-03-21                                      <u><a href="../man1/VOS_SHADOW.1.html">VOS_SHADOW</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>