<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>finalrd - final runtime directory generator for shutdown</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/finalrd">finalrd_9build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       finalrd - final runtime directory generator for shutdown

</pre><h4><b>SYNOPSIS</b></h4><pre>
        systemctl enable --now finalrd.service

</pre><h4><b>HOOKS</b> <b>DIRECTORIES</b></h4><pre>
        <a href="file:/usr/share/finalrd/">/usr/share/finalrd/</a>*.finalrd
        /etc/finalrd/*.finalrd
        /run/finalrd/*.finalrd

</pre><h4><b>HOOKS</b> <b>INTERFACE</b></h4><pre>
        foo.finalrd setup
        foo.finalrd halt|poweroff|reboot|kexec

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>finalrd</b> generates a shutdown directory <u><a href="file:/run/initramfs">/run/initramfs</a></u> which <b>systemd-shutdown</b> pivots to during shutdown.
       There system shutdown can be finalised and arbitrary hooks can be executed off-root, to safely cleanup
       rootfs and perform any other shutdown tasks.

       For example, a hook may takeover monitoring external metadata RAID arrays, wait for them to be clean, and
       stop them. If one is using iscsiroot, it maybe needed to perform iscsi logout on shutdown.

       Typically, one would not run <b>finalrd</b> directly, but instead activate <b>finalrd.service</b>. This would execute
       <b>finalrd</b> generator late in the shutdown cycle, just in time for pivot.

</pre><h4><b>HOOKLESS</b> <b>OPERATION</b></h4><pre>
       If initramfs-tools is not available, and thus copy_exec is not available, hooks will not be executed or
       copied into the shutdown directory. However, shutdown dir will still be created to ensure init has
       somewhere to pivot, and attempt a cleaner shutdown without holding up the root filesystem.

       For example, Ubuntu Core is such system.

</pre><h4><b>HOOKS</b> <b>INTERFACE</b> <b>DESCRIPTION</b></h4><pre>
       <u>*.finalrd</u> hooks can be shipped in <u><a href="file:/usr">/usr</a></u>, <u><a href="file:/etc">/etc</a></u>, <u><a href="file:/run">/run</a></u>. These directories are for distribution, sysadmin, and
       transient hooks respectively.

       They are multi-purpose binaries with action passed as the first argument.

       During setup stage, hooks are executed from the rootfs with one argument <b>setup</b> passed as the first arg.
       All hooks are executed in all the directories in order, first everything in <u><a href="file:/usr">/usr</a></u>, then from <u><a href="file:/etc">/etc</a></u>, then
       from <u><a href="file:/run">/run</a></u>. Environmental variables <u>DESTDIR</u> and <u>DESTROOTDIR</u> are set pointing at the finalrd location. This
       is done for convenience to use <u>initramfs-tools</u>'s copy_exec function or dracut-install, for copying
       binaries.

       During shutdown stage, hooks are executed from finalrd in parallel with one argument passed to them. The
       argument is one of <b>halt</b>, <b>poweroff</b>, <b>reboot</b>, <b>kexec</b>.

       Note if there are identically named hooks in multiple configuration directories, all of them will be
       executed during setup stage. But only the last one will be copied into the finalrd and executed during
       the shutdown stage.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The initrd Interface of systemd &lt;https://www.freedesktop.org/wiki/Software/systemd/InitrdInterface&gt;

finalrd 2                                                                                             <u><a href="../man1/FINALRD.1.html">FINALRD</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>