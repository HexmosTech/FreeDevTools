<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmlogreduce - temporal reduction of Performance Co-Pilot archives</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pcp">pcp_6.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmlogreduce</b> - temporal reduction of Performance Co-Pilot archives

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pmlogreduce</b>  [<b>-z?</b>]  [<b>-A</b> <u>align</u>] [<b>-s</b> <u>samples</u>] [<b>-S</b> <u>starttime</u>] [<b>-t</b> <u>interval</u>] [<b>-T</b> <u>endtime</u>] [<b>-v</b> <u>volsamples</u>] [<b>-Z</b>
       <u>timezone</u>] <u>input</u> <u>output</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmlogreduce</b> reads one set of Performance Co-Pilot (PCP)  archives  identified  by  <u>input</u>  and  creates  a
       temporally reduced PCP archive in <u>output</u>.  <u>input</u> is a comma-separated list of names, each of which may be
       the  base  name  of  an  archive  or  the  name of a directory containing one or more archives.  The data
       reduction involves statistical and temporal reduction of samples with an output sampling interval defined
       by the <b>-t</b> option in the <u>output</u> archive (independent of the sampling intervals in the <u>input</u> archives), and
       is further controlled by other command line arguments.

       For some metrics, temporal data reduction is  not  going  to  be  helpful,  so  for  metrics  with  types
       <b>PM_TYPE_AGGREGATE</b> or <b>PM_TYPE_EVENT</b>, a warning is issued if these metrics are found in <u>input</u> and they will
       be skipped and not appear in the <u>output</u> archive.

</pre><h4><b>OPTIONS</b></h4><pre>
       The available command line options are:

       <b>-A</b> <u>align</u>, <b>--align</b>=<u>align</u>
            Specify a ``natural'' alignment of the output sample times; refer to <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).

       <b>-s</b> <u>samples</u>, <b>--samples</b>=<u>samples</u>
            The  argument  <u>samples</u> defines the number of samples to be written to <u>output</u>.  If <u>samples</u> is 0 or <b>-s</b>
            is not specified, <b>pmlogreduce</b> will sample until the end of the set of PCP archives, or  the  end  of
            the  time  window  as  specified  by  <b>-T</b>, whichever comes first.  The <b>-s</b> option will override the <b>-T</b>
            option if it occurs sooner.

       <b>-S</b> <u>starttime</u>, <b>--start</b>=<u>starttime</u>
            Define the start of a time window to restrict the samples retrieved from the <u>input</u>  archives;  refer
            to <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).

       <b>-t</b> <u>interval</u>, <b>--interval</b>=<u>interval</u>
            Consecutive  samples  in the <u>output</u> archive will appear with a time delta defined by <u>interval</u>; refer
            to <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).  Note the default value is 600 (seconds, i.e. 10 minutes).

       <b>-T</b> <u>endtime</u>, <b>--finish</b>=<u>endtime</u>
            Define the termination of a time window to restrict the samples retrieved from the  <u>input</u>  archives;
            refer to <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).

       <b>-v</b> <u>volsamples</u>
            The  <u>output</u>  archive is potentially a multi-volume data set, and the <b>-v</b> option causes <b>pmlogreduce</b> to
            start a new volume after <u>volsamples</u> records have been written to the <u>output</u> archive.

              Independent of any <b>-v</b> option, each volume of an archive is limited to no more than 2^31 bytes,  so
              <u>pmlogreduce</u> will automatically create a new volume for the archive before this limit is reached.

       <b>-z</b>, <b>--hostzone</b>
            Use  the  local  timezone  of the host from the <u>input</u> archives when displaying the date and time, or
            interpreting the <b>-S</b> and <b>-T</b> options.  The default is to initially use the timezone of the local host.

       <b>-Z</b> <u>timezone</u>, <b>--timezone</b>=<u>timezone</u>
            Use <u>timezone</u> when displaying the date and time, or interpreting the <b>-S</b> and <b>-T</b> options.  <u>Timezone</u>  is
            in the format of the environment variable <b>TZ</b> as described in <b><a href="../man7/environ.7.html">environ</a></b>(7).

       <b>-?</b>, <b>--help</b>
            Display usage message and exit.

</pre><h4><b>DATA</b> <b>REDUCTION</b></h4><pre>
       The statistical and temporal reduction follows the following rules:

       1.  Consecutive  records  from  <u>input</u>  are  read  without interpolation, and at most one output record is
           written for each <u>interval</u>, summarizing the performance data over that period.

       2.  If the semantics of a metric indicates it is <b>instantaneous</b> or <b>discrete</b> then <u>output</u> value is  computed
           as the arithmetic mean of the observations (if any) over each <u>interval</u>.

       3.  If  the  semantics  of  a  metric  indicates  it  is a <b>counter</b> then the following transformations are
           applied:
           a)  Metrics with 32-bit precision are promoted to 64-bit precision.
           b)  Any counter wrap (overflow) is noted, and appropriate adjustment made in the value of the  metric
               over each <u>interval</u>.  This will be correct in the case of a single counter wrap, but will silently
               <b>underestimate</b>  in  the  case  where  more  than  one  counter  wrap  occurs  between  consecutive
               observations in the <u>input</u> archives, and silently <b>overestimate</b> in the case where a  counter  reset
               occurs  between  consecutive  observations  in the <u>input</u> archives; unfortunately these situations
               cannot be detected, but are believed to be rare events for  the  sort  of  production  monitoring
               environments where <b>pmlogreduce</b> is most likely to be deployed.

       4.  Any changes in instance domains, and indeed all metadata, is preserved.

       5.  Any  ``mark''  records in the <u>input</u> archives (as created by <b><a href="../man1/pmlogextract.1.html">pmlogextract</a></b>(1)) will be preserved in the
           <u>output</u> archive, so periods where no data is available are maintained, and data interpolation will <b>not</b>
           occur across these periods when the <u>output</u> archive is subsequently processed with PCP applications.

</pre><h4><b>CAVEATS</b></h4><pre>
       The preamble metrics  (pmcd.pmlogger.archive,  pmcd.pmlogger.host,  and  pmcd.pmlogger.port),  which  are
       automatically  recorded by <b>pmlogger</b> at the start of the archive, may not be present in the archive output
       by <b>pmlogreduce</b>.  These metrics are only relevant  while  the  archive  is  being  created,  and  have  no
       significance once recording has finished.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       All  error  conditions  detected  by <b>pmlogreduce</b> are reported on <u>stderr</u> with textual (if sometimes terse)
       explanation.

       Should the <u>input</u> archives be corrupted (this can happen if the  <b>pmlogger</b>  instance  writing  the  archive
       suddenly  dies),  then <b>pmlogreduce</b> will detect and report the position of the corruption in the file, and
       any subsequent information from the <u>input</u> archives will not be processed.

       If any error is detected, <b>pmlogreduce</b> will exit with a non-zero status.

</pre><h4><b>FILES</b></h4><pre>
       For each of the <u>input</u> and <u>output</u> archives, several physical files are used.

       <u>archive</u><b>.meta</b>
            metadata (metric descriptions, instance domains, etc.) for the archive

       <u>archive</u><b>.0</b>
            initial volume of metrics values (subsequent volumes have suffixes <b>1</b>, <b>2</b>,  ...)  -  for  <u>input</u>  these
            files  may  have been previously compressed with <b><a href="../man1/bzip2.1.html">bzip2</a></b>(1) or <b><a href="../man1/gzip.1.html">gzip</a></b>(1) and thus may have an additional
            <b>.bz2</b> or <b>.gz</b> suffix.

       <u>archive</u><b>.index</b>
            temporal index to support rapid random access to the other files in the archive.

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used  by
       PCP.   On  each  installation, the file <u>/etc/pcp.conf</u> contains the local values for these variables.  The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1), <b><a href="../man1/pmlc.1.html">pmlc</a></b>(1), <b><a href="../man1/pmlogdump.1.html">pmlogdump</a></b>(1), <b><a href="../man1/pmlogextract.1.html">pmlogextract</a></b>(1), <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1), <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5) and <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5).

Performance Co-Pilot                                   PCP                                        <u><a href="../man1/PMLOGREDUCE.1.html">PMLOGREDUCE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>