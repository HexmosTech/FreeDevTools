<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>afio - manipulate archives and files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/afio">afio_2.5.2-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       afio - manipulate archives and files

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>...</b>  | <b>afio</b> <b>-o</b> [ <u>options</u> ] archive  : write (create) archive
       <b>afio</b> <b>-i</b> [ <u>options</u> ] archive  : install (unpack) archive
       <b>afio</b> <b>-t</b> [ <u>options</u> ] archive  : list table-of-contents of archive
       <b>afio</b> <b>-r</b> [ <u>options</u> ] archive  : verify archive against filesystem
       <b>afio</b> <b>-p</b> [ <u>options</u> ] directory [ ... ] : copy files

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Afio</u>  manipulates  groups  of  files,  copying  them  within  the  (collective) filesystem or between the
       filesystem and an <u>afio</u> archive.

       With <b>-o</b>, reads pathnames from the standard input and writes an <u>archive</u>.

       With <b>-t</b>, reads an <u>archive</u> and writes a table-of-contents to the standard output.

       With <b>-i</b>, installs the contents of an <u>archive</u> relative to the working directory.

       With <b>-p</b>, reads pathnames from the standard input and copies the  files  to  each  <u>directory</u>.   Cannot  be
       combined with the <b>-Z</b> option.

       With  <b>-r</b>,  reads  <u>archive</u>  and  verifies  it  against  the filesystem.  This is useful for verifying tape
       archives, to ensure they have no bit errors.  The verification compares file contents, but not permission
       bits and non-file filesystem entities, so it cannot be used as a reliable tool to detect  every  possible
       change made to a filesystem.

       Creates missing directories as necessary, with permissions to match their parents.

       Removes  leading  slashes  from pathnames, making all paths relative to the current directory.  This is a
       safety feature to prevent inadvertent overwriting of system files when doing restores.  To suppress  this
       safety  feature, the <b>-A</b> option must be used while writing an archive, but also when reading (installing),
       verifying, and cataloging an existing archive.

       Supports compression while archiving, with the <b>-Z</b> option.  Will compress individual files in the archive,
       not the entire archive datastream, which makes <u>afio</u> compressed archives much more  robust  than  <u>`tar</u> <u>zc'</u>
       type archives.

       Supports multi-volume archives during interactive operation (i.e., when <u>/dev/tty</u> is accessible and <u>SIGINT</u>
       is not being ignored).

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-@</b> <u>address</u>   Send  email to <u>address</u> when a volume change (tape change, floppy change) is needed, and also
                    when the entire operation is complete.  Uses <u><a href="../man1/sendmail.1.html">sendmail</a></u>(1) to send the mail.

       <b>-a</b>           Preserve the last access times (atimes) of the  files  read  when  making  or  verifying  an
                    archive.   <b>Warning:</b>  if  this  option is used, <u>afio</u> will change the last inode changed times
                    (ctimes) of these files.  Thus, this option cannot be  used  together  with  an  incremental
                    backup scheme that relies on the ctimes being preserved.

       <b>-b</b> <u>size</u>      Read  or write <u>size</u>-character archive blocks.  Suffices of <b>b</b>, <b>k</b>, <b>m</b> and <b>g</b> denote multiples of
                    <u>512</u>, <u>kilobytes</u>, <u>megabytes</u> and <u>gigabytes</u>, respectively.  Defaults to <u>5120</u>  for  compatibility
                    with  <u><a href="../man1/cpio.1.html">cpio</a></u>(1).   In  some  cases,  notably when using <u>ftape</u> with some tape drives, <b>-b</b> <b>10k</b> is
                    needed for compatibility.  Note that <b>-b</b> <b>10k</b> is the default block size used by <u><a href="../man1/tar.1.html">tar</a></u>(1), so  it
                    is usually a good choice if the tape setup is known to work with <u><a href="../man1/tar.1.html">tar</a></u>(1).

       <b>-c</b> <u>count</u>     Buffer  <u>count</u>  archive  blocks  between  I/O  operations.  A  large <u>count</u> is recommended for
                    efficient use with streaming magnetic tape drives, in order to reduce  the  number  of  tape
                    stops and restarts.

       <b>-d</b>           Don't create missing directories.

       <b>-e</b> <u>bound</u>     Pad  the  archive  to  a  multiple of <u>bound</u> characters.  Recognizes the same suffices as <b>-s</b>.
                    Defaults to <u>1x</u> (the <b>-b</b> block size) for compatibility with <u><a href="../man1/cpio.1.html">cpio</a></u>(1).

       <b>-f</b>           Spawn a child process to actually write to the archive; provides a clumsy  form  of  double-
                    buffering.  Requires <b>-s</b> for multi-volume archive support.

       <b>-g</b>           Change  to  input  file  directories. Avoids quadratic filesystem behavior with long similar
                    pathnames. Requires all absolute pathnames, including those for the <b>-o</b> <u>archive</u>  and  the  <b>-p</b>
                    <u>directories</u>.

       <b>-h</b>           Follow symbolic links, treating them as ordinary files and directories.

       <b>-j</b>           Don't generate sparse filesystem blocks on restoring files.  By default, <u>afio</u> creates sparse
                    filesystem  blocks  (with  <u><a href="../man2/lseek.2.html">lseek</a></u>(2)) when possible when restoring files from an archive, but
                    not if these files were stored in a compressed form.   Unless stored in a  compressed  form,
                    sparse  files  are  not  archived  efficiently:  they will take space equal to the full file
                    length.  (The sparse file handling in <u>afio</u> does not make much sense except in  a  historical
                    way.)

       <b>-k</b>           Rather  than  complaining  about unrecognizable input, skip unreadable data (or partial file
                    contents) at the <u>beginning</u> of the archive file being read, and search  for  the  next  valid
                    archive  header.   This  option is needed to deal with certain types of backup media damage.
                    It is also useful to support quick selective restores from multi-volume  archives,  or  from
                    searchable  block  devices, if the volume or location of the file to be restored is known in
                    advance (see the <b>-B</b> option).  If, for example, a selective restore is done with  the  fourth
                    volume  of  a multi-volume afio archive, then the <b>-k</b> option needs to be used, else <u>afio</u> will
                    complain about the input not being a well-formed archive.

       <b>-l</b>           With <b>-o</b>, write file contents with each hard link.

                    With <b>-t</b>, report hard links.

                    With <b>-p</b>, attempt to link files rather than copying them.

       <b>-m</b>           Mark output files with a common current timestamp (rather than with input file  modification
                    times).

       <b>-n</b>           Protect newer existing files (comparing file modification times).

       <b>-s</b> <u>size</u>      Restrict  each  portion of a multi-volume archive to <u>size</u> characters. This option recognizes
                    the same size suffices as <b>-b</b>.  Also, the suffix <b>x</b> denotes a multiple of the  <b>-b</b>  block  size
                    (and  must  follow  any  <b>-b</b> specification).  <u>size</u> can be a single size or a  comma-seperated
                    list of sizes, for example  '2m,5m,8m',  to  specify  different  sizes  for  the  subsequent
                    volumes.   If  there  are  more  volumes than sizes, the last specified size is used for all
                    remaining volumes.  If this option is used, the special character sequences <b>%V</b> and <b>%S</b> in the
                    input/output filename or command string are replaced by the current volume number and volume
                    size.  Use <b>%%</b> to produce a single % character.  The <b>-s</b> option is useful  with  finite-length
                    devices  which  do  not  return short counts at end of media (sigh); output to magnetic tape
                    typically falls into this category.   When an archive is being read  or  written,  using  <b>-s</b>
                    causes <u>afio</u> to prompt for the next volume if the specified volume length is reached.  The <b>-s</b>
                    option  will  also cause <u>afio</u> to prompt if there is a premature EOF while reading the input.
                    The special case <b>-s</b> <b>0</b> will activate this prompting for the  next  volume  on  premature  EOF
                    without  setting  a  volume  length.  When writing an archive, <u>afio</u> will prompt for the next
                    volume on end-of-media, even without <b>-s</b> <b>0</b> being  supplied,  if  the  device  is  capable  of
                    reporting  end-of-media.   If  the volume <u>size</u> specified is not a multiple of the block size
                    set with the <b>-b</b> option, then <u><a href="../man1/afio.1.html">afio</a>(1)</u> will silently round down the volume size to the nearest
                    multiple of the block size.  This rounding down can be suppressed using the <b>-9</b> option: if <b>-9</b>
                    is used, <u><a href="../man1/afio.1.html">afio</a>(1)</u> will write a small block of data, smaller than the <b>-b</b> size, at the  end  of
                    the  volume  to  completely  fill  it  to the  specified size.  Some devices are not able to
                    handle such small block writes.

       <b>-u</b>           Report files with unseen links.

       <b>-v</b>           Verbose. Report pathnames (to stderr) as they are processed. When used with <b>-t</b>, gives an  <u>ls</u>
                    <u>-l</u>  style report (including link information) to stdout instead.  When used twice (<b>-vv</b>) with
                    <b>-o</b>, gives an <u>ls</u> <u>-l</u> style report to stdout while writing the archive. (But this  use  of  <b>-vv</b>
                    will not work if the archive is also being written to stdout.)

       <b>-w</b> <u>filename</u>  Treats each line in <u>filename</u> as an <b>-y</b> pattern, see <b>-y</b>.

       <b>-x</b>           Retain  file  ownership  and  setuid/setgid permissions.  This is the default for the super-
                    user; he may use <b>-X</b> to override it.

       <b>-y</b> <u>pattern</u>   Restrict processing of files to names matching shell wildcard  pattern  <u>pattern</u>.   Use  this
                    flag once for each pattern to be recognized.  With the possible exception of the presence of
                    a  leading  slash, the complete file name as appearing in the archive table-of-contents must
                    match the pattern, for example  the  file  name  'etc/passwd'  is  matched  by  the  pattern
                    '*passwd'  but  NOT by the pattern 'passwd'.  See <b>`man</b> <b>7</b> <b>glob'</b> for more information on shell
                    wildcard pattern matching.  The only difference with shell wildcard pattern matching is that
                    in <u>afio</u> the wildcards will also match '/' characters in file names.  For example the pattern
                    '<a href="file:/usr/src/">/usr/src/</a>*' will match the file name '/usr/src/linux/Makefile', and  any  other  file  name
                    starting with '<a href="file:/usr/src">/usr/src</a>'. Unless the <b>-S</b> option is given, any leading slash in the pattern or
                    the  filename  is ignored when matching, e.g.  <u><a href="file:/etc/passwd">/etc/passwd</a></u> will match <u>etc/passwd</u>.  Use <b>-Y</b> to
                    supply patterns which are <u>not</u> to be processed.  <b>-Y</b> overrides <b>-y</b> if a filename matches  both.
                    See  also <b>-w</b> and <b>-W</b>.  See also the <b>-7</b> option, which can be used to modify the meaning of <b>-y</b>,
                    <b>-Y</b>, <b>-w</b>, and <b>-W</b> when literal matching without wildcard processing is needed.  <b>Note:</b>  if  <u>afio</u>
                    was  compiled  without  using  the GNU fnmatch library, then the full shell wildcard pattern
                    syntax cannot be used, and matching support is limited to patterns which are a full  literal
                    file name and patterns which end in '*'.

       <b>-z</b>           Print  execution  statistics.  This is meant for human consumption; use by other programs is
                    officially discouraged.

       <b>-A</b>           Do not turn absolute paths into relative paths. That is  don't  remove  the  leading  slash.
                    Applies  to  the path names written in an archive, but also to the path names read out of an
                    archive during read (install), verify, and cataloging operations.

       <b>-B</b>           If the <b>-v</b> option is used, prints the byte offset of the start of each file in  the  archive.
                    If  your tape drive can start reading at any position in an archive, the output of <b>-B</b> can be
                    useful for doing quick selective restores.

       <b>-D</b> <u>controlscript</u>
                    Set the control script name to <u>controlscript</u>, see the section on <b>control</b> <b>files</b> below.

       <b>-E</b> <u>[+]filename</u> <b>|</b> <b>-E</b> <b>CS</b> <b>|</b> <b>-E</b> <b>CI</b>
                    While creating an archive with compressed files using the <b>-Z</b> option, disable  (attempts  at)
                    compression  for  files with particular extensions.  This option can be used to speed up the
                    creation of the archive, by making <u>afio</u> avoid trying to  use  <u>gzip</u>  on  files  that  contain
                    compressed  data already.  By default, if no specific <b>-E</b> option is given, all files with the
                    extensions <u>.Z</u> <u>.z</u> <u>.gz</u> <u>.bz2</u> <u>.tgz</u> <u>.arc</u> <u>.zip</u> <u>.rar</u> <u>.lzh</u> <u>.lha</u> <u>.uc2</u> <u>.tpz</u> <u>.taz</u> <u>.tgz</u> <u>.rpm</u>  <u>.zoo</u>  <u>.deb</u>
                    <u>.gif</u>  <u>.jpeg</u> <u>.jpg</u> <u>.tif</u> <u>.tiff</u> <u>.png</u> <u>.pdf</u> <u>.arj</u> <u>.avi</u> <u>.bgb</u> <u>.cab</u> <u>.cpn</u> <u>.hqx</u> <u>.jar</u> <u>.mp3</u> <u>.mpg</u> <u>.mpq</u> <u>.pic</u>
                    <u>.pkz</u> <u>.psn</u> <u>.sit</u> <u>.ogg</u> and <u>.smk</u> will not be compressed.  Also by default,  the  file  extension
                    matching  is  case-insensitive  (to  do  the  right  thing  with  respect  to  MS-DOS  based
                    filesystems).  The <b>-E</b> <u>filename</u> form of this option will replace the  default  list  of  file
                    extensions by reading a new list of file extensions, separated by whitespace, from <u>filename</u>.
                    <u>filename</u>  may  contain  comments preceded by a #.  The extensions in <u>filename</u> should usually
                    all start with a dot, but they do not need to start with a dot, for  example  the  extension
                    'tz'  will  match  the  file name 'hertz'.  The <b>-E</b> <u>+filename</u> form (with a + sign in front of
                    <u>filename</u>) can be used to specify extensions  in  addition  to  the  built-in  default  list,
                    instead of replacing the whole default list.  To make extension matching case-sensitive, add
                    the  special  option  form  <b>-E</b> <b>CS</b> to the command line.  The form <b>-E</b> <b>CI</b> invokes the (default)
                    case-insensitive comparison.  See also the <b>-6</b> option, which  offers  an  additional  way  to
                    suppress compression.

       <b>-F</b>           This  is  a  floppy disk, <b>-s</b> is required.  Causes floppy writing in <b>O_SYNC</b> mode under Linux.
                    With kernel version 1.1.54 and above, this allows <u>afio</u> to detect some  floppy  errors  while
                    writing.   Uses  shared memory if compiled in otherwise mallocs as needed (a 3b1 will not be
                    able to malloc the needed memory w/o  shared  memory),  <u>afio</u>  assumes  either  way  you  can
                    malloc/shmalloc  a  chunk of memory the size of one disk. Examples: 795k: 3.5" (720k drive),
                    316k (360k drive)
                    At the end of each disk this message occurs:
                     Ready for disk [#] on [output]
                     (remove the disk when the light goes out)
                     Type "go" (or "GO") when ready to proceed
                     (or "quit" to abort):

       <b>-G</b> <u>factor</u>    Specifies the <u><a href="../man1/gzip.1.html">gzip</a></u>(1) compression speed factor, used when  compressing  files  with  the  <b>-Z</b>
                    option.  Factor 1 is the fastest with least compression, 9 is slowest with best compression.
                    The  default value is 6.  See also the <u><a href="../man1/gzip.1.html">gzip</a></u>(1) manual page.  If you have a slow machine or a
                    fast backup medium, you may want to specify a low value for <u>factor</u> to speed up  the  backup.
                    On  large  (&gt;200k) files, <b>-G</b> <b>1</b> typically zips twice as fast as <b>-G</b> <b>6</b>, while still achieving a
                    better result than <u><a href="../man1/compress.1.html">compress</a></u>(1).  The zip speed for small files is mainly determined  by  the
                    invocation time of <u>gzip</u> (1), see the <b>-T</b> option.

       <b>-H</b> <u>promptscript</u>
                    Specify  a  script to run, in stead of using the normal prompt, before advancing to the next
                    archive volume.  The script will be run with the volume number, archive  specification,  and
                    the  reason for changing to the next volume as arguments.  The script should exit with 0 for
                    OK and 1 for abort, other exit codes will be treated as fatal errors.  As  of  <u>afio</u>  version
                    2.5.2, the promptscript can be a file name containing spaces or other special characters.

       <b>-J</b>           Try  to  continue after a media write error when doing a backup (normal behavior is to abort
                    with a fatal error).

       <b>-K</b>           Verify the output against what is in the memory copy of the  disk  (-F  required).   If  the
                    writing or verifying fails the following menu pops up
                        [Writing/Verify] of disk [disk #] has FAILED!
                         Enter 1 to RETRY this disk
                         Enter 2 to REFORMAT this disk before a RETRY

                         Enter quit to ABORT this backup
                    Currently,  <u>afio</u>  will  not process the answers 1 and 2 in the right way.  The menu above is
                    only useful in that it signifies that something is wrong.

       <b>-L</b> <u>Log_file_path</u>
                    Specify the name of the file to log errors and the final totals to.

       <b>-M</b> <u>size</u>      Specifies the maximum amount of memory to use  for  the  temporary  storage  of  compression
                    results when using the <b>-Z</b> option. The default is <b>-M</b> <b>250m</b> (250 megabytes).  If the compressed
                    version  of  a  file is larger than this (or if <u>afio</u> runs out of virtual memory), <u><a href="../man1/gzip.1.html">gzip</a></u>(1) is
                    run twice of the file, the first time to determine the length of the result, the second time
                    to get the compressed data itself.

       <b>-P</b> <u>progname</u>  Use the program <u>progname</u> instead of the standard <u><a href="../man1/gzip.1.html">gzip</a></u>(1) for compression  and  decompression
                    with  the  <b>-Z</b> option. For example, use the options <b>-Z</b> <b>-P</b> <b>bzip2</b> to write and install archives
                    using <u><a href="../man1/bzip2.1.html">bzip2</a></u>(1) compression.  If <u>progname</u> does not have command line  options  (-c,  -d,  and
                    -&lt;number&gt;)  in  the  style  of  <u><a href="../man1/gzip.1.html">gzip</a></u>(1)  then  the <b>-Q</b> option can be used to supply the right
                    options.  The compression program used must have the property that, if the output file  size
                    exceeds  the  value  of the <b>-M</b> option, then when the compression program is run for a second
                    time on the same input, it must produce an output with exactly the same size.  (See also the
                    <b>-M</b> option description.)  The GnuPG (<b>gpg</b>) encryption program does not  satisfy  this  lenght-
                    preserving  criterion  unless its built-in compression is disabled (see examples in the afio
                    source script3/ directory).  See also the <b>-Q</b>, <b>-U</b> and <b>-3</b> options.

       <b>-Q</b> <u>opt</u>       Pass the option <u>opt</u> to the compression or decompression program used with the <b>-Z</b> option. For
                    passing multiple options, use <b>-Q</b> multiple times.  If no <b>-Q</b> flag  is  present,  the  standard
                    options  are  passed.   The  standard  options  are  <b>-c</b>  <b>-6</b>  when  the program is called for
                    compression and <b>-c</b> <b>-d</b> when the program is called for decompression.  Use the special case <b>-Q</b>
                    "" if no options at all are to be passed to the program.

       <b>-R</b> <u>Disk</u> <u>format</u> <u>command</u> <u>string</u>
                    This is the command that is run when you enter 2 to reformat the disk after a failed verify.
                    The default (fdformat /dev/fd0H1440) can be changed to a given system's default  by  editing
                    the Makefile.  You are also prompted for formatting whenever a disk change is requested.

       <b>-S</b>           Do  not  ignore  a  leading  slash  in  the pattern or the file name when matching <b>-y</b> and <b>-Y</b>
                    patterns. See also <b>-A</b>.

       <b>-T</b> <u>threshold</u> Only compress a file when using the <b>-Z</b> option if its length  is  at  least  <u>threshold</u>.   The
                    default  is  <b>-T</b>  <b>0k</b>.   This  is  useful  if you have a slow machine or a fast backup medium.
                    Specifying <b>-T</b> <b>3k</b> typically halves the number of invocations  of  <u><a href="../man1/gzip.1.html">gzip</a></u>(1),  saving  some  30%
                    computation  time,  while creating an archive that is only 5% longer.  The combination <b>-T</b> <b>8k</b>
                    <b>-G</b> <b>1</b> typically saves 70% computation time  and  gives  a  20%  size  increase.   The  latter
                    combination  may  be  a  good  alternative  to not using <b>-Z</b> at all.  These figures of course
                    depend heavily on the kind of files in the archive and the processor - i/o  speed  ratio  on
                    your machine.  See also the <b>-2</b> option.

       <b>-U</b>           If  used  with  the <b>-Z</b> option, forces compressed versions to be stored of all files, even if
                    the compressed versions  are  bigger  than  the  original  versions,  and  disregarding  any
                    (default)  values  of  the <b>-T</b> and <b>-2</b> options.  This is useful when the <b>-P</b> and <b>-Q</b> options are
                    used to replace the compression program <u>gzip</u> with an encryption program in order to make  an
                    archive  with encrypted files.  Due to internal limitations of <u>afio</u>, use of this flag forces
                    the writing of file content with each hard linked file, rather than only once for every  set
                    of  hard  linked  files.   <b>WARNING:</b>  use  of  the  -U option will also cause compression (or
                    whatever operation the <b>-P</b> option indicates) on files larger than 2 GB, if these are  present
                    in  the  input.  Not all compression programs might handle such huge files correctly (recent
                    Linux versions of gzip, bzip2, and gpg have all been tested and seem to work  OK).  If  your
                    setup is obscure, some testing might be warranted.

       <b>-W</b> <u>filename</u>  Treats each line in <u>filename</u> as an <b>-Y</b> pattern, see <b>-Y</b>.

       <b>-Y</b> <u>pattern</u>   Do <u>not</u> process files whose names match shell wildcard pattern <u>pattern</u>.  See also <b>-y</b> and <b>-W</b>.

       <b>-Z</b>           Compress  the  files  that  go into the archive when creating an archive, or uncompress them
                    again when installing  an  archive.   <u>afio</u>  <u>-Z</u>  will  compress  each  file  in  the  archive
                    individually,  while  keeping  the  archive  headers uncompressed.  Compared to <u>tar</u> <u>zc</u> style
                    archives, <u>afio</u> <u>-Z</u> archives are therefore much more fault-tolerant against read errors on the
                    backup medium.  When creating an archive with the <u>-Z</u> option, <u>afio</u> will run <u>gzip</u> on each file
                    encountered, and, if the result is smaller than the original, store the  compressed  version
                    of  the  file.   Requires  <u><a href="../man1/gzip.1.html">gzip</a></u>(1)  to  be in your path.  Mainly to speed up <u>afio</u> operation,
                    compression is not attempted on a file if: 1) the file is very small (see the <b>-T</b> option), 2)
                    the file is very large (see the <b>-2</b> option), 3) the file  has  a  certain  extension,  so  it
                    probably  contains compressed data already (see the <b>-E</b> option), 4) the file pathname matches
                    a certain pattern, as set by the <b>-6</b> option, 5) the file has  hard  links  (this  due  to  an
                    internal  limitation  of  afio,  but this limitation does not apply if the <b>-l</b> option is also
                    used).  Regardless of the above, if the <b>-U</b> option is used then the  compression  program  is
                    always  run,  and  the  compressed result is always stored.  When installing an archive with
                    compressed files, the <b>-Z</b> option needs to  be  used  in  order  to  make  afio  automatically
                    uncompress  the  files  that  it  compressed  earlier.   The <b>-P</b> option can be used to do the
                    (un)compression with programs other than <u>gzip</u>, see the <b>-P</b> (and <b>-Q</b> and <b>-3</b>)  options  in  this
                    manpage  for  details.   See  also  the <b>-G</b> option which provides yet another way to tune the
                    compression process.

       <b>-0</b>           Use filenames terminated with '\0' instead of '\n'. When used as follows: <u>find</u> <u>...</u> <u>-print0</u> <u>|</u>
                    <u>afio</u> <u>-o</u> <u>-0</u> <u>...</u>, it ensures that any  input  filename  can  be  handled,  even  a  file  name
                    containing  newlines.   When used as <u>afio</u> <u>-t</u> <u>-0</u> <u>...</u> <u>|</u> <u>...</u>, this allows the table of contents
                    output to be parsed unambiguosly even if the filenames contain newlines.  The <b>-0</b> option also
                    affects the parsing of the files supplied by <b>-w</b> <b>file</b> and <b>-W</b> <b>file</b> options: if the  option  <b>-0</b>
                    precedes  them  in  the command line then the pattern lines contained in the <b>file</b>s should be
                    terminated with '\0' in stead of '\n'.  A second use of <b>-0</b> toggles the option. This  can  be
                    useful when using multiple pattern files or when combining with the <b>-t</b> option.

       <b>-1</b> <u>warnings-to-ignore</u>
                    Control  if <u><a href="../man1/afio.1.html">afio</a></u>(1) should exit with a nonzero code after printing certain warning messages,
                    and if certain warning messages should be printed at all.  This option is  sometimes  useful
                    when  calling  <u><a href="../man1/afio.1.html">afio</a></u>(1)  from  inside  a  backup script or program.  <u><a href="../man1/afio.1.html">afio</a></u>(1) will exit with a
                    nonzero code on encountering various 'hard' errors, and also (with the default value of  the
                    <b>-1</b>  option)  when  it  has  printed certain warning messages during execution.  <u>warnings-to-</u>
                    <u>ignore</u> is a list of letters which determines the behavior related to warning messages.   The
                    default  value  for  this option is <b>-1</b> <b>mc</b>.  For <u>afio</u> versions 2.4.3 and earlier, the default
                    was <b>-1</b> <b>a</b>.  For <u>afio</u> versions 2.4.4 and 2.4.5, the default was <b>-1</b> <b>''</b>.  The defined  <u>warnings-</u>
                    <u>to-ignore</u>  letters  are as follows.  <b>a</b> is for for ignoring <u>a</u>ll possible warnings on exit: if
                    this letter is used, the printing of a warning message will never cause a nonzero exit code.
                    <b>m</b> is for ignoring in the exit code any warning about <u>m</u>issing files, which  will  be  printed
                    when,  on  creating  an  archive,  a file whose name was read from the standard input is not
                    found.  <b>c</b> is for ignoring in the exit code the warning that the archive being  created  will
                    not  be not fully compatible with <u>c</u>pio or afio versions 2.4.7 or lower.  <b>C</b> is the same as <u>c</u>,
                    but in addition the warning message will not even be printed.  <b>M</b> will suppress the  printing
                    of all warning messages asssociated with <u>M</u>ultivolume archive handling, messages like "Output
                    limit  reached"  and  "Continuing".   <b>d</b>  is for ignoring in the exit code any warnings about
                    changed files, which will be printed when, on creating an archive,  a  file  that  is  being
                    archived  changes while it is being written into the archive, where the changing is detected
                    by examining the file modification time stamp.  <b>r</b> is for ignoring  certain  warnings  during
                    the  verify  (-r) operation.  If this letter is used, some verification errors that are very
                    probably due to changes in the filesystem, during or after the backup was made, are  ignored
                    in  determining  the exit code.  The two verification errors that are ignored are: 1) a file
                    in the archive is no longer present on the filesystem, and  2)  the  file  contents  in  the
                    archive  and  on the filesystem are different, but the file lengths or the file modification
                    times are also different, so the difference in contents is probably due to the file  on  the
                    file  system  having  been  changed.  <b>s</b> is for ignoring in the exit code the warning printed
                    when the protection code (as described in the  section  about  the  <b>-8</b>  option)  rewrites  a
                    suspicious path name for a file or symlink that is being unpacked.  <b>l</b> is for ignoring in the
                    exit  code  the  warning  printed  when  the  <b>-8</b>  <b>nosymlinks</b> option is used and a symlink is
                    encountered.  <b>n</b> is for ignoring  in  the  exit  code  a  particular  class  of  <u>n</u>o-such-file
                    warnings:  it  ignores  these  warnings  when  they  happen  after the file has already been
                    successfully opened. This unusual warning  situation  can  occur  when  archiving  files  on
                    Windows smbfs filesystems -- due to a Windows problem, smbfs files with non-ASCII characters
                    in  their  names  can  sometimes  be opened but not read.  When the <b>-Z</b> option is used, the <u>n</u>
                    letter function is (currently) only implemented for files with sizes smaller than  indicated
                    by  the  <b>-T</b> option, so in that case the <b>-T</b> option is also needed for this letter to have any
                    effect.

       <b>-2</b> <u>maximum-file-size-to-compress</u>
                    Do not compress any files which are larger than this size when making a  compressed  archive
                    with  the  <b>-Z</b> option. The default value is <b>-2</b> <b>200m</b> (200 Megabytes). This maximum size cutoff
                    lowers the risk that a major portion of a large file will  be  irrecoverable  due  to  small
                    media  errors.    If  a  media  error  occurs while reading a file that <u>afio</u> has stored in a
                    compressed form, then <u>afio</u> and <u>gzip</u> will not be able to restore the entire remainder of that
                    file.  This is usually an acceptable risk for small files. However for very large files  the
                    risk  of loosing a large amount of data because of this effect will usually be too big.  The
                    special case <b>-2</b> <b>0</b> eliminates any maximum size cutoff.

       <b>-3</b> <u>filedescriptor-nr</u>
                    Rewind the filedescriptor before invoking  the  (un)compression  program  if  using  the  <b>-Z</b>
                    option.  This  is  useful  when  the  <b>-P</b>  and <b>-Q</b> options are used to replace the compression
                    program <u>gzip</u> with some types of encryption programs in order to make or read an archive with
                    encrypted files.  The rewinding is  needed  to  interface  correctly  with  some  encryption
                    programs  that  read  their key from an open filedescriptor.  If the <b>-P</b> program name matches
                    'pgp' or 'gpg', then the <b>-3</b> option <u>must</u> be used to avoid <u><a href="../man1/afio.1.html">afio</a></u>(1) reporting  an  error.   Use
                    the  special  case <b>-3</b> <b>0</b> to suppress the error message without rewinding any file descriptor.
                    The <b>-3</b> <b>0</b> option may also be needed to successfully read back encrypted  archives  made  with
                    <u>afio</u> version 2.4.5 and older.

       <b>-4</b>           (Deprecated, the intended effect of this option is now archived by default as long as the <b>-5</b>
                    option  is  not  used.   This  option  could still be useful for compatibility with machines
                    running an older version of <u>afio</u>.)  Write archive with the `extended ASCII'  format  headers
                    which  use  4-byte  inode numbers.  Archives using the extended ASCII format headers are <b>not</b>
                    compatible with any other archiver.  This  option  was  useful  for  reliably  creating  and
                    restoring sets of files with many internal hard links, for example a news spool.

       <b>-5</b>           Refuse to create an archive that is incompatible with <u><a href="../man1/cpio.1.html">cpio</a></u>(1).  If this option is used, <u>afio</u>
                    will never write any `large ASCII' file headers that are incompatible with <u><a href="../man1/cpio.1.html">cpio</a></u>(1), but fail
                    with  an error code instead.  See the ARCHIVE PORTABILITY section above for more information
                    on the use of `large ASCII' file headers.

       <b>-6</b>  <b>filename</b> While creating an archive with compressed files using the <b>-Z</b> option, disable  (attempts  at)
                    compression  for  files  that  match  particular shell patterns.  This option can be used to
                    speed up the creation of the archive, by making <u>afio</u> avoid trying to use <u>gzip</u> on files  that
                    contain compressed data already.  Reads shell wildcard patterns from <u>filename</u>, treating each
                    line  in  the  file  as  a  pattern.   Files  whose names match these patterns are not to be
                    compressed when using the <b>-Z</b> option.  Pattern matching is done in exactly the  same  way  as
                    described  for  the  <b>-y</b>  option.   See  also the <b>-E</b> option: the (default) settings of the <b>-E</b>
                    option will further restrict compression  attempts.   The  <b>-E</b>  option  controls  compression
                    attempts  based  on  file  extensions;  the  <b>-6</b>  option  is  mainly intended as a method for
                    excluding all files in certain subdirectory trees from compression..

       <b>-7</b>           Switch between shell wildcard pattern matching and exact name matching (without interpreting
                    any wildcard characters) for the patterns supplied in the <b>-y</b>, <b>-Y</b>, <b>-w</b>, and  <b>-W</b>  options.   If
                    the  <b>-7</b>  option is used in front of any option <b>-y</b>, <b>-Y</b>, <b>-w</b>, or <b>-W</b>, then the patterns supplied
                    in these options are not intrerpreted as wildcard patterns, but as  character  strings  that
                    must match exactly to the file name, except possibly in leading slashes.  This option can be
                    useful  for  handling the exceptional cases where file names in the archive, or the names of
                    files to be archived, contain  wildcard  characters  themselves.   For  example,  <u>find</u>  <u><a href="file:/tmp">/tmp</a></u>
                    <u>-print0</u>  <u>|</u>  <u>afio</u> <u>-ov</u> <u>-Y</u> <u>'*.jpg'</u> <u>-7</u> <u>-Y</u> <u>'/tmp/a[12]*4'</u> <u>-0</u> <u>archive</u> can be used to archive files
                    all files under <a href="file:/tmp">/tmp</a>, even files with a '\n' character in the name, except  for  .jpg  files
                    and  the file with the exact name <u>/tmp/a[12]*4</u>.  A second use of <b>-7</b> toggles the matching for
                    subsequently occurring <b>-y</b>, <b>-Y</b>, <b>-w</b>, and <b>-W</b> back to shell wildcard pattern matching.

       <b>-8</b> <u>directive</u> Modify various behavior regarding  symlinks.   The  directive  <u>nosymlinks</u>  applies  to  both
                    archive  creation  and  archive  unpacking.   During  archive  creation,  it  suppresses the
                    inclusion of any symlink entry in the archive.  In unpacking, it suppresses the unpacking of
                    any symlink entry in the archive.  This directive does  not  affect  the  interpretation  of
                    existing  symlinks  on the filesystem during the path resolution process where afio resolves
                    the directory name components in front of  the  last  /  in  a  path  name.   The  directive
                    <u>allowinsecurepaths</u>  applies  to the security of archive unpacking. As of version 2.5.2, afio
                    has protection mechanisms that apply to the unpacking of potentially untrusted archives.  On
                    unpacking, afio will by default (since version 2.5.2) inspect every pathname in the  archive
                    to  detect the occurrence of a .. subpath in it. If one or more of these are present this is
                    almost almost certainly due to the archive having been constructed by an attacker.  The goal
                    of the attack would be to have the afio unpacking operation over-write system or user  files
                    with   new   contents,   via  the  use  of  using  specially  constructed  path  names  like
                    ../../../../../etc/password  or  ../../../../../home/a_user/.bashrc  that  resolve  to   the
                    location  of such configuration files.  Therefore, if any .. subpaths are detected in a path
                    name in an archive being unpacked, afio issues a warning, and then rewrites  every  '..'  in
                    the path name to 'XX', and the archive entry is unpacked to the rewritten path name instead.
                    The <u>allowinsecurepaths</u> directive disables the above rewriting of likely-insecure path names.
                    Note that afio, while unpacking an archive, will also protect against that archive including
                    potentially  insecure path names that start with a leading /, by stripping off the leading /
                    before using the path name is used, which has the effect of the archive  entry  relative  to
                    the  current working directory.  This stripping behavior can be disabled with the <b>-A</b> option.
                    The directive <u>allowinsecuresymlinks</u> applies to  a  further  the  protection  mechanism  that
                    applies  to  the  unpacking  of  potentially untrusted archives.  On unpacking, afio will by
                    default (since version 2.5.2) inspect every symlink destination in the archive to detect the
                    occurrence of a leading / or a .. subpath in it.   If  a  leading  /  or  ..   subpaths  are
                    detected  in  the  symlink destination, afio issues a warning, rewrites them to X or XX, and
                    the result is used as the unpacked symlink destination instead.   The  <u>allowinsecuresymlinks</u>
                    directive  disables  this  protective  rewriting  behavior.   Some  further  background:  an
                    attacking archive with an insecure symlink will typically include, as  an  entry  after  the
                    insecure  symlink,  a  file entry with a path that follows the insecure symlink leading to a
                    location in the filesystem where a system or user configuration file can be overwritten.  An
                    archive with an insecure symlink may be created most easily an attacker who has  the  entire
                    archive  creation process under their control.  However, in another case, the attacker is an
                    untrusted end user on a multi-user system, where a trusted system administrator is  creating
                    a  backup  of  a  live file system containing directories under control of the untrusted end
                    user.  The untrusted end user can potentially exploit race conditions in the backup process,
                    by creating temporary symlinks and files in  their  own  home  directory,  resulting  in  in
                    archive  contents  that  would  modify system configuration files when later unpacked if the
                    protection mechanism were disabled using the  <u>allowinsecuresymlinks</u>  directive.   The  above
                    described  protection  mechanisms  are  limited to symlinks. A untrusted archive attack that
                    uses specially constructed hard link entries in the archive is theoretically  possible  with
                    some  archivers,  but  is  not  possible  with  afio,  because  of the special way that afio
                    represents hard links in an archive.

       <b>-9</b>           Do not round down any <b>-s</b> volume sizes to the nearest <b>-b</b> block size.  See the <b>-s</b> option.

</pre><h4><b>ARCHIVE</b> <b>PORTABILITY</b></h4><pre>
       <u>afio</u> archives are portable between different types of UNIX systems, as they contain only  ASCII-formatted
       header information.

       Except  in special cases discussed below, <u>afio</u> will create archives with the same format as ASCII <u><a href="../man1/cpio.1.html">cpio</a></u>(1)
       archives.  Therefore <u><a href="../man1/cpio.1.html">cpio</a></u>(1) can usually be used to restore an <u>afio</u> archive in the case that <u>afio</u> is  not
       available  on a system. (With most <u>cpio</u> versions, to unpack an ASCII format archive, use <u>cpio</u> <u>-c</u>, and for
       GNU <u><a href="../man1/cpio.1.html">cpio</a></u>(1) use <u>cpio</u> <u>-H</u> <u>odc</u>.)  When unpacking with <u>cpio</u>, any compressed files inside an <u>afio</u>  <u>-Z</u>  archive
       are  not  uncompressed  by  <u>cpio</u>,  but  will  be created on the file system as compressed files with a .z
       extension.

       Unfortunately, the ASCII cpio archive format cannot represent some files and file properties that can  be
       present  in a modern UNIX filesystem.  If afio creates an archive with such things, then it uses an afio-
       specific 'large ASCII' header for the files concerned.  Archives  with  large  ASCII  headers  cannot  be
       unpacked completely by <u>cpio</u> or <u>afio</u> versions before 2.4.8.

       When creating an archive, the `large ASCII' header is used by <u>afio</u> to cover the following situations:

          <b>o</b>  A file has a size larger than 2 GB

          <b>o</b>  The archive contains more than 64K files which have hard links

          <b>o</b>  A file, directory, or special file has a UID or GID value larger than 65535.

       The  <b>-5</b>  option can be used to always preserve <u>cpio</u> compatibility, it will cause <u>afio</u> to fail rather than
       produce an incompatible archive in the cases above.

       Archives made using the (deprecated) <b>-4</b> option are also <b>not</b> compatible with <u>cpio</u>, but they are compatible
       with <u>afio</u> versions 2.4.4 and later.

</pre><h4><b>ARCHIVE</b> <b>FILE</b> <b>FORMAT</b></h4><pre>
       An <u>afio</u> archive file has a simple format. The archive starts with a  file  header  for  the  first  file,
       followed by the contents of the first file (which will either be the exact contents byte-for-byte, or the
       exact  contents  in  some  compressed format).  The data of the first file is immediately followed by the
       file header of the second file, and so on.  At the end, there is  a  special  `end  of  archive'  header,
       usually followed by some padding bytes.

       A multi-volume <u>afio</u> archive is simply a normal archive split up into multiple parts. There are no special
       volume-level data headers.  This means that that volumes can be split and merged by external programs, as
       long  as  the  data  stays  in the correct order.  It also implies that the contents of a single file can
       cross volume boundaries.  Selective restores of files at known volume locations can be  done  by  feeding
       only the needed volumes to <u>afio</u>, provided that the <b>-k</b> option is used.

       The  contents  of  hard  linked files are (unless the <b>-l</b> option is used) only stored once in the archive.
       The file headers for the second, third, and later occurrence of a hard linked file  have  no  data  after
       them.   This  makes  selective  restores  of  hard-liked  files difficult: if later occurrences are to be
       restored correctly, the first occurrence always needs to be selected too.

</pre><h4><b>NOTES</b></h4><pre>
       Special-case archive names:

          <b>o</b>  Specify <u>-</u> to read or write the standard input or output, respectively.  This disables  multi-volume
             archive handling.

          <b>o</b>  Prefix  a command string to be executed with an exclamation mark (<u>!</u>).  The command is executed once
             for each archive volume, with its standard input or output  piped  to  <u>afio</u>.   It  is  expected  to
             produce a zero exit code when all is well.

          <b>o</b>  Use  <u>system:file</u>  to  access  an  archive in <u>file</u> on <u>system</u>.  This is really just a special case of
             pipelining.  It requires a 4.2BSD-style remote shell (<u><a href="../man1C/rsh.1C.html">rsh</a></u>(1C)) and a remote copy of <u>afio</u>.

          <b>o</b>  A more elaborate case of the  above  is  <u>[user@]host[%rsh][=afio]:file</u>  where  the  optional  <u>user@</u>
             component  specifies the user name on the remote host, the optional <u>%rsh</u> specifies the (local) name
             of the remote shell command to use, and the optional <u>=afio</u> specifies the name of the remote copy of
             the afio command.

          <b>o</b>  Anything else specifies a local file or device.  An output file will be  created  if  it  does  not
             already exist.

          <b>o</b>  When  the  <b>-s</b>  option  is used to invoke multi-volume archive processing, any <b>%V</b> in the file/device
             name or command string is subsisuted by the current volume number, and any <b>%S</b> by the current volume
             size. Use <b>%%</b> to produce a single % character.

       Recognizes obsolete binary <u><a href="../man1/cpio.1.html">cpio</a></u>(1) archives (including those from machines with reversed byte order), but
       cannot write them.

       Recovers from archive corruption by searching for a valid magic number. This is rather  simplistic,  but,
       much like a disassembler, almost always works.

</pre><h4><b>CONTROL</b> <b>FILES</b></h4><pre>
       <u>Afio</u>  archives can contain so-called control files.  Unlike normal archive entries, a control file in not
       unpacked to the filesystem.  A control file has a <u>label</u> and some <u>data</u>.  When <u>afio</u>  encounters  a  control
       file  in  the  archive it is reading, it will feed the <u>label</u> and <u>data</u> to a so-called control script.  The
       control script is supplied by the user.  It can perform special actions based on the <u>label</u>  and  <u>data</u>  it
       receives from <u>afio</u>.

       <b>Control</b>  <b>file</b>  <b>labels.</b>   The  control  file  mechanism can be used for many things.  Examples are putting
       archive descriptions at the beginning of the  archive  and  embedding  lists  of  files  to  move  before
       unpacking the rest or the archive.

       To  distinguish between different uses, the <u>label</u> of a control file should indicate the program that made
       the control file and the purpose of the control file data.  It should have the form

          programname.kindofdata

       where <u>programname</u> is the name of the backup program that generated the control file,  and  <u>kindofdata</u>  is
       the meaning of the control file data.  Some examples are

          tbackup.movelist  tbackup.updatescript
          blebberfiler.archivecontents
          backup_script_of_Joe_User.archivedescription

       The  user-supplied  control  script  should look at the label to decide what to do with the control data.
       This way, control files with unknown labels can be ignored, and afio archives  maintain  some  degree  of
       portability between different programs that restore or index them.

       Control  file  labels that are intended to be portable between different backup programs could be defined
       in the future.

       <b>Making</b> <b>control</b> <b>files.</b>  When making an archive, afio reads a stream containing  the  names  of  the  files
       (directories,  ...) to put in the archive.  This stream may also contain `control file generators', which
       are lines with the following format:

           //--sourcename label

       Here, the //-- sequence signals that a control file is to be made, <u>sourcename</u>  is  the  path  to  a  file
       containing  the control file data, and <u>label</u> is the control file label.  The <u>sourcename</u> must be a regular
       file or a symlink to a regular file.

       A control file will show up as

          //--CONTROL_FILE/label

       in an archive listing, where <u>label</u> is the control file label.

       <b>Control</b> <b>scripts.</b>  A control script is supplied to afio with the

         <b>-D</b> <u>controlscript</u>

       command line option.  The <u>controlscript</u> must be an executable program.  The script is run  whenever  <u>afio</u>
       encounters  a  control file while doing a <b>-i</b> <b>-t</b> or <b>-r</b> operation.  Afio will supply the control file <u>label</u>
       as an argument to the script.  The script should read the control file <u>data</u> from its standard input.   If
       the script exits with a non-zero exit status, <u>afio</u> will issue a warning message.

       If  a  control  file  is  encountered  and  no <b>-D</b> option is given, <u>afio</u> will issue a warning message.  To
       suppress the warning message and ignore all control scripts, <b>-D</b> "" can be used.

       An example of a control script is

         #!<a href="file:/bin/sh">/bin/sh</a>
         if [ $1 = "afio_example.headertext" ]; then
           #the headertext control file is supposed to be packed as the first
           #entry of the archive
           echo Archive header:
           cat -
           echo Unpack this archive? y/n
           #stdout is still connected to the tty, read the reply from stdout
           read yn &lt;&amp;1
           if [ "$yn" = n ]; then
             #abort
             kill $PPID
           fi
         else
           echo Ignoring unknown control file.
           cat - &gt;/dev/null
         fi

       <u>Afio</u> never compresses the control file data when storing it in an archive, even when  the  <b>-Z</b>  option  is
       used.   When  a  control file is encountered by <u><a href="../man1/cpio.1.html">cpio</a>(1)</u> or an <u>afio</u> with a version number below 2.4.1, the
       data will be unpacked to the filesystem, and named <u>CONTROL_FILE/label</u> where <u>label</u>  is  the  control  file
       label.

</pre><h4><b>BUGS</b></h4><pre>
       There are too many options.

       Restricts  pathnames  to  1023  characters, and 255 meaningful elements (where each element is a pathname
       component separated by a /).

       Does not use the same default block size as <u><a href="../man1/tar.1.html">tar</a></u>(1).  <u><a href="../man1/tar.1.html">tar</a></u>(1) uses 10 KB, <u>afio</u> uses 5 KB by  default.  Some
       tape  drives only work with a 10 KB block size, in that case the <u>afio</u> option <b>-b</b> <b>10k</b> is needed to make the
       tape work.

       There is  no  sequence  information  within  multi-volume  archives.   Input  sequence  errors  generally
       masquerade   as  data  corruption.   A  solution  would  probably  be  mutually  exclusive  with  <u><a href="../man1/cpio.1.html">cpio</a></u>(1)
       compatibility.

       The <u>afio</u> code for handling floppies (<b>-F</b> and <b>-f</b> and <b>-K</b> options) has buggy error handling.  <u>afio</u>  does  not
       allow   one  to  retry  a  failed floppy write on a different floppy, and it cannot recover from a verify
       error.  If the floppy handling code is used and write or verify errors do occur, it is  best  to  restart
       <u>afio</u> completely.  Making backups to floppies should really be done with a more specialised backup program
       that wraps <u>afio</u>.

       The  Linux  floppy  drivers  below kernel version 1.1.54 do not allow <u>afio</u> to find out about floppy write
       errors while writing.  If you are running a kernel below 1.1.54, <u>afio</u> will happily fail to write to (say)
       a write protected disk and not report anything wrong!  The only way to find out  about  write  errors  in
       this case is by watching the kernel messages, or by switching on the verify (<b>-K</b>) option.

       The  remote  archive  facilites  (host:/file  archive  names)  have  not  been exhaustively tested. These
       facilities have seen a lot of real-life use though.  However, there may be bugs in  the  code  for  error
       handling and error reporting with remote archives.

       An  archive  created with a command like <u>'find</u> <u>/usr/src/linux</u> <u>-print</u> <u>|</u> <u>afio</u> <u>-o</u> <u>...'</u>  will not contain the
       ownership and permissions of the <u><a href="file:/usr">/usr</a></u> and <u><a href="file:/usr/src">/usr/src</a></u> directories. If these  directories  are  missing  when
       restoring the archive, <u>afio</u> will recreate them with some default ownership and permissions.

       Afio  can  not  restore  time stamps on symlinks.  Also, on operating systems without an <u><a href="../man2/lchown.2.html">lchown</a></u>(2) system
       call, afio can not restore owner/group information on symlinks. (Linux has lchown  since  kernel  version
       2.1.86.)

       Afio  tries  to restore modification time stamps of directories in the archive correctly.  However, if it
       exits prematurely, then the modification times will not be restored correctly.

       A restore using decompression will fail if the <u>gzip</u> binary used by <u>afio</u> is overwritten,  by  <u>afio</u>  or  by
       another  program, during the restore.  The restore will also fail if any shared libraries needed to start
       <u>gzip</u> are overwritten during the restore.  <u>afio</u> should not normally be used to overwrite the system  files
       on  a  running system.  If it is used in this way, a flag like <u>-Y</u> <u><a href="file:/bin/gzip">/bin/gzip</a></u> can often be added to prevent
       failure.

       The <b>-r</b> option verifies the file contents of the files in the archive against the files on the filesystem,
       but does not cross-check details like permission bits on files, nor does  it  cross-check  that  archived
       directories or other non-file entities still exist on the filesystem.

       There  are  several  problems with archiving hard links.  1) Due to internal limitations, files with hard
       links cannot be stored in compressed form, unless the <b>-l</b> or <b>-U</b> options are used  which  force  each  hard
       linked file to be stored separately.  2) Archives which contain hard links and which were made with older
       (pre-2.4.8) versions of <u>afio</u> or with <u>cpio</u> can not always be correctly unpacked.  This is really a problem
       in  the archives and not in the current version of <u>afio</u>.  The risk of incorrect unpacking will be greater
       if the number of files or hard links in the archives is larger.   3)  In  a  selective  restore,  if  the
       selection  predicates  do  not select the first copy of a file with archive-internal hard links, then all
       subsequent copies, if selected, will not be correctly restored.  4) Unless the <b>-4</b>  option  is  used,  the
       inode  number  fields  in the archive headers for files with hard links of the archive will sometimes not
       contain the actual (least significant 16 bits of) the inode number of the original file.

       Some Linux kernels no not allow one to create a hard link to a symbolic link.  <u>afio</u> will try to re-create
       such hard links when unpacking an archive, but might fail due to kernel restrictions.

       Due to internal limitations of <u>afio</u>, the use of the <b>-U</b> option forces the writing  of  file  content  with
       each hard linked file, rather than only once for every set of hard linked files.

       When  it  is  run  without  super-user privileges, <u>afio</u> is not able to unpack a file into a directory for
       which it has no write permissions, even if it just created that directory itself.  This can be a  problem
       when trying to restore directory structures created by some source code control tools like RCS.

       When  block or character device files are packed into an archive on one operating system (e.g. Linux) and
       unpacked on another operating system, which uses different sizes for the major and  minor  device  number
       data  types  (e.g.  Solaris),  the  major  and  minor  numbers  of  the device files will not be restored
       correctly.  This can be a  problem  if  the  operating  systems  share  a  cross-mounted  filesystem.   A
       workaround is to use <u><a href="../man1/tar.1.html">tar</a></u>(1) for the device files.

</pre><h4><b>SECURITY</b> <b>CONSIDERATIONS</b></h4><pre>
       Security  considerations arise when unpacking archives from untrusted sources.  The recommended technique
       is to unpack such archives into a temporary, empty destination directory, unaccessible  to  other  system
       users,  while  running <u>afio</u> as a normal user, so without superuser privileges.  As of version 2.5.2, <u>afio</u>
       has security measures, enabled  by  default,  to  guard  against  a  class  of  attacks  where  specially
       constructed path names and/or symlink destinations in an archive cause <u>afio</u> to to create or modify system
       or user files outside of the destination directory.  See the <b>-8</b> option for a more detailed description of
       these attacks and measures.

       On UNIX multi-user systems with untrusted users, there are several known attacks where, unless the system
       administrator is very careful, end users can exploit backup and restore activites on the user filesystems
       to subvert data or operational security.  See e.g. the security section of the GNU <u>tar</u> manual, at
       <a href="http://www.gnu.org/software/tar/manual/html_node/Security.html">http://www.gnu.org/software/tar/manual/html_node/Security.html</a>
       for a description of some issues and precautions.

       An  archive  from an untrusted source  could in theory contain mal-formatted data designed to implement a
       buffer overflow attack when <u>afio</u> reads the archive during a <b>-t</b> or <b>-i</b> operation. While  the  <u>afio</u>  archive
       procesing  code is fairly robust, and has passed some automated code checking tools, no formal review has
       been done to guarantee the absence  of  buffer  overflow  attack  vulnerabilities.   Running  <u>afio</u>  in  a
       sandboxed  virtual  machine  or from inside <u><a href="../man8/chroot.8.html">chroot</a></u>(8) will improve the security of handling archives from
       untrusted sources, but the most secure option is to never touch such archives at all.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Create an archive with compressed files:
       <u>find</u> <u>....</u> <u>|</u> <u>afio</u> <u>-o</u> <u>-v</u> <u>-Z</u> <u>/dev/fd0H1440</u>

       Install (unpack) an archive with compressed files:
       <u>afio</u> <u>-i</u> <u>-v</u> <u>-Z</u> <u>archive</u>

       Install (unpack) an archive with compressed files, protecting newer existing files:
       <u>afio</u> <u>-i</u> <u>-v</u> <u>-Z</u> <u>-n</u> <u>archive</u>

       Create an archive with compressed files on floppy disks:
       <u>find</u> <u>....</u> <u>|</u> <u>afio</u> <u>-o</u> <u>-v</u> <u>-s</u> <u>1440k</u> <u>-F</u> <u>-Z</u> <u>/dev/fd0H1440</u>

       Create an archive with all file contents encrypted by pgp:
       <u>export</u> <u>PGPPASSFD=3</u>
       <u>find</u> <u>....</u> <u>|</u> <u>afio</u> <u>-ovz</u> <u>-Z</u> <u>-U</u> <u>-P</u> <u>pgp</u> <u>-Q</u> <u>-fc</u> <u>-Q</u> <u>+verbose=0</u> <u>-3</u> <u>3</u> <u>archive</u> <u>3&lt;passphrasefile</u>

       Create an archive on recordable CDs using the <u>cdrecord</u> utility to write each CD:
       <u>find</u> <u>....</u> <u>|</u> <u>afio</u> <u>-o</u> <u>-b</u> <u>2048</u> <u>-s325000x</u> <u>-v</u> <u>'!cdrecord</u> <u>....</u> <u>-'</u>

       Extract a single named file from an archive on /dev/tape:
       <u>afio</u> <u>-i</u> <u>-v</u> <u>-Z</u> <u>-y</u> <u>/home/me/thedir/thefile</u> <u>/dev/tape</u>
       (If these do not exist yet, <u>afio</u> will also  create  the  enclosing  directories  <u>home/me/myfiledir</u>  under
       current working directory.)

       Extract files matching a pattern from an archive on /dev/tape:
       <u>afio</u> <u>-i</u> <u>-v</u> <u>-Z</u> <u>-y</u> <u>'/home/me/*'</u> <u>/dev/tape</u>
       (If these do not exist yet, <u>afio</u> will also create the enclosing directories <u>home/me</u> under current working
       directory.)

       If  your  filesystem  cannot  handle  files  larger  than  2GB,  but  you want to make an archive on that
       filesystem that is larger than 2GB, you use the following trick to split the archive into multiple  files
       of each 1 GB:
       <u>find</u> <u><a href="file:/home">/home</a></u> <u>|</u> <u>afio</u> <u>-o</u> <u>...</u> <u>-</u> <u>|</u> <u>split</u> <u>-b1024m</u> <u>-</u> <u>archive.</u>
       the files will be called archive.aa, archive.ab, etc.  You can restore the whole archive using:
       <u>cat</u> <u>archive.*</u> <u>|</u> <u>afio</u> <u>-i</u> <u>...</u> <u>-</u>
       The  wildcard  expansion  by the shell will ensure that <u>cat</u> will read the parts in the right (alphabetic)
       order.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/cpio.1.html">cpio</a>(1), <a href="../man1/find.1.html">find</a>(1), <a href="../man1/tar.1.html">tar</a>(1), <a href="../man1/compress.1.html">compress</a>(1), <a href="../man1/gzip.1.html">gzip</a>(1).

</pre><h4><b>WEB</b> <b>SITE</b> <b>AND</b> <b>INTERNET</b> <b>RESOURCES</b></h4><pre>
       The afio home page is at <a href="http://members.chello.nl/~k.holtman/afio.html">http://members.chello.nl/~k.holtman/afio.html</a>
       See the home page for information on submitting questions, bug reports, patches, etc.

</pre><h4><b>AUTHORS</b></h4><pre>
       Mark Brukhartz
       Jeff Buhrt
       Dave Gymer
       Andrew Stevens
       Koen Holtman <b>(current</b> <b>maintainer)</b> <u><a href="mailto:koen.holtman@ieee.org">koen.holtman@ieee.org</a></u>
       Anders Baekgaard
       Too many other people to list here have contributed code, patches, ideas, and bug reports.  Many of these
       are mentioned in the HISTORY file that is included with the sources.

                                                                                                         <u><a href="../man1/AFIO.1.html">AFIO</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>