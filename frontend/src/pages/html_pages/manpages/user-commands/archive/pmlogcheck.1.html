<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmlogcheck - checks for invalid data in a PCP archive</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pcp">pcp_6.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmlogcheck</b> - checks for invalid data in a PCP archive

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pmlogcheck</b> [<b>-lmvwz?</b>]  [<b>-n</b> <u>pmnsfile</u>] [<b>-S</b> <u>start</u>] [<b>-T</b> <u>finish</u>] [<b>-Z</b> <u>timezone</u>] <u>archive</u> ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmlogcheck</b>  prints  information about the nature of any invalid data which it detects in the files of PCP
       archives.

       Each archive has the base  name  <u>archive</u>  and  must  have  been  previously  created  using  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1).
       Alternatively, <u>archive</u> can be the name of a physical file that forms part of a PCP archive.

       When multiple <u>archive</u> options are present, all of the corresponding PCP archives will be checked, however
       if the <u>archive</u> options are file names, then each associated PCP archive will be checked at most once.

</pre><h4><b>OPTIONS</b></h4><pre>
       The available command line options are:

       <b>-l</b>, <b>--label</b>
            Print  the  archive  label,  showing the archive format version, the time and date for the start and
            (current) end of the archive, and the host from which the performance metrics values were collected.

       <b>-m</b>, <b>--metadataonly</b>
            Skip <b>Pass</b> <b>3</b> (see below) and only check the archive meta data.  This can run substantially faster  in
            cases  where the volume data doesn't need to be checked, especially on archives with compressed data
            volume(s).

       <b>-n</b> <u>pmnsfile</u>, <b>--namespace</b>=<u>pmnsfile</u>
            Load an alternative Performance Metrics Name Space (<b><a href="../man5/PMNS.5.html">PMNS</a></b>(5)) from the file <u>pmnsfile</u>.

       <b>-S</b> <u>starttime</u>, <b>--start</b>=<u>starttime</u>
            Specify the <u>starttime</u> of time window over which metrics should be checked in  Pass  3  (see  below).
            Refer to <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1) for a complete description of the syntax for <u>starttime</u>.

       <b>-T</b> <u>endtime</u>, <b>--finish</b>=<u>endtime</u>
            Specify  the  <u>endtime</u>  of  time  window  over which metrics should be checked in Pass 3 (see below).
            Refer to <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1) for a complete description of the syntax for <u>endtime</u>.

       <b>-v</b>, <b>--verbose</b>
            Enable verbose mode.

       <b>-w</b>, <b>--nowrap</b>
            Suppress reporting of counter wraps.

       <b>-z</b>, <b>--hostzone</b>
            Use the local timezone of the host that is the source  of  the  performance  metrics  archive.   The
            default is to use the timezone of the local host.

       <b>-Z</b> <u>timezone</u>, <b>--timezone</b>=<u>timezone</u>
            Use  <u>timezone</u>  for  the  date and time.  <u>Timezone</u> is in the format of the environment variable <b>TZ</b> as
            described in <b><a href="../man7/environ.7.html">environ</a></b>(7).  The default is to use the timezone of the local host.

       <b>-?</b>, <b>--help</b>
            Display usage message and exit.

</pre><h4><b>OPERATION</b></h4><pre>
       The checking proceeds in a number of  passes,  each  designed  to  validate  progressively  more  complex
       semantic relationships between the information in a PCP archive.

   <b>Pass</b> <b>0</b>
       Each  physical file of the PCP archive is processed to ensure the label records are valid and consistent,
       and that each file contains an integral number of  physical  records  with  correct  header  and  trailer
       fields.

       Any  errors  at  this stage are usually fatal.  The PCP archive is probably damaged beyond repair, and no
       more passes of <b>pmlogcheck</b> are attempted.

   <b>Pass</b> <b>1</b>
       Validates the integrity of the temporal index, usually <u>archive</u><b>.index</b>.

       As the temporal index is (strictly speaking) optional, errors at this stage are handled  by  marking  the
       index as bad and ignoring it for the remainder of the <b>pmlogcheck</b> passes.

       Permanent  repair  can  be achieved by removing the temporal index file and then making a copy of the PCP
       archive using <b><a href="../man1/pmlogrewrite.1.html">pmlogrewrite</a></b>(1) or <b><a href="../man1/pmlogextract.1.html">pmlogextract</a></b>(1).  This will create a new temporal index for  the  copied
       archive as a side-effect.

   <b>Pass</b> <b>2</b>
       Validates the integrity of the metadata file, usually <u>archive</u><b>.meta</b>.

   <b>Pass</b> <b>3</b>
       Validates the integrity of each of the volumes of the PCP archive, usually <u>archive</u><b>.0</b>, <u>archive</u><b>.1</b>, etc.

       There  is some basic integrity checks to ensure the encoding of values for each metric remains consistent
       and the values are well formed across all the observations in the archive.

       Also the timestamps for the observations are expected to be monotonically increasing as  the  archive  is
       traversed.

       Additional  attention is given to counter metrics (<u>type</u> from <b><a href="../man3/pmLookupDesc.3.html">pmLookupDesc</a></b>(3) is <b>PM_SEM_COUNTER</b>) which are
       expected to have monotonically increasing values.  If the values are not monotonic  increasing  this  may
       suggest a counter wrap has happened or there has been some interruption or reset to the underlying source
       of the performance data that is no captured in the archive.

       For  each  counter  metric  which  has  been  detected  as  having  wrapped at some point in the archive,
       <b>pmlogcheck</b> produces output describing the metric name (with instance identifiers where appropriate),  the
       internal  storage  type  for  the  metric,  the  value  of  the  metric before the counter wrap (with its
       associated timestamp), and the value of the metric after the wrap (also with a timestamp).

       The <b>-w</b> option may be used to suppress reporting of counter wraps.

       <b>pmlogcheck</b> produces two different timestamp formats, depending on the interval over which it is run.  For
       an interval greater than 24 hours, the date is displayed in addition to the time  at  which  the  counter
       wrap  occurred.   If the extent of the data being checked is less than 24 hours, a more precise format is
       used (time is displayed with millisecond precision, but without the date).

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following are all equivalent:

            <b>$</b> <b>pmlogcheck</b> <b>myarchive</b>
            <b>$</b> <b>pmlogcheck</b> <b>myarchive.0</b>
            <b>$</b> <b>pmlogcheck</b> <b>myarchive.meta</b>
            <b>$</b> <b>pmlogcheck</b> <b>myarchive.0</b> <b>myarchive.meta</b>

       If the current directory contains multiple PCP archives, then the command

            <b>$</b> <b>pmlogcheck</b> <b>*.meta*</b>

       will check them all, as there is one <b>.meta</b> file for each  PCP  archive,  but  this  file  may  have  been
       compressed (hence the trailing <b>*</b>).

</pre><h4><b>FILES</b></h4><pre>
       <u>$PCP_VAR_DIR/pmns/*</u>
            default PMNS specification files

       <u>$PCP_LOG_DIR/pmlogger/&lt;hostname&gt;</u>
            default directory for PCP archives containing performance data collected from the host <u>hostname</u>.

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment  variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used by
       PCP.  On each installation, the file <u>/etc/pcp.conf</u> contains the local values for  these  variables.   The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1),  <b><a href="../man1/pmlogdump.1.html">pmlogdump</a></b>(1),  <b><a href="../man1/pmlogextract.1.html">pmlogextract</a></b>(1),  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1),  <b><a href="../man1/pmlogrewrite.1.html">pmlogrewrite</a></b>(1),  <b><a href="../man1/pmlogsummary.1.html">pmlogsummary</a></b>(1), <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3),
       <b><a href="../man3/pmLookupDesc.3.html">pmLookupDesc</a></b>(3), <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5), <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5) and <b><a href="../man5/PMNS.5.html">PMNS</a></b>(5).

Performance Co-Pilot                                   PCP                                         <u><a href="../man1/PMLOGCHECK.1.html">PMLOGCHECK</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>