<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmlogextract - reduce, extract, concatenate and merge Performance Co-Pilot archives</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pcp">pcp_6.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmlogextract</b> - reduce, extract, concatenate and merge Performance Co-Pilot archives

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pmlogextract</b>  [<b>-dfmwxz?</b>]   [<b>-c</b>  <u>configfile</u>]  [<b>-S</b>  <u>starttime</u>]  [<b>-s</b>  <u>samples</u>] [<b>-T</b> <u>endtime</u>] [<b>-V</b> <u>version</u>] [<b>-v</b>
       <u>volsize</u>] [<b>-Z</b> <u>timezone</u>] <u>input</u> [...] <u>output</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmlogextract</b> reads one or more Performance Co-Pilot (PCP) archives identified  by  <u>input</u>  and  creates  a
       merged  and/or  reduced PCP archive in <u>output</u>.  Each <u>input</u> argument is either a name or a comma-separated
       list of names, and each name is the name of one file from an archive or the base name of  an  archive  or
       the  name  of  a  directory  containing one or more archives.  The nature of merging is controlled by the
       number of <u>input</u> archives, while the nature of data reduction is controlled by the command line arguments.
       The <u>input</u> arguments must be archives created by <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) with performance data collected from the <b>same</b>
       host, but usually over different  time  periods  and  possibly  (although  not  usually)  with  different
       performance metrics being logged.

       If  only  one  <u>input</u>  is  specified,  then the default behavior simply copies the <u>input</u> PCP archive (with
       possible conversion to a newer version of the archive format, see <b>-V</b> below), into the <u>output</u> PCP archive.
       When two or more PCP archives are specified as <u>input</u>, the  archives  are  merged  (or  concatenated)  and
       written to <u>output</u>.

       In  the  <u>output</u>  archive a <b>&lt;mark&gt;</b> record may be inserted at a time just past the end of each of the <u>input</u>
       archive to indicate a possible temporal discontinuity between the end of one <u>input</u> archive and the  start
       of  the next <u>input</u> archive.  See the <b>MARK</b> <b>RECORDS</b> section below for more information.  There is no <b>&lt;mark&gt;</b>
       record after the end of the <b>last</b> (in temporal order) of the records from the <u>input</u> archive(s).

</pre><h4><b>OPTIONS</b></h4><pre>
       The available command line options are:

       <b>-c</b> <u>config</u>, <b>--config</b>=<u>config</u>
            Extract only the metrics specified in <u>config</u> from the  <u>input</u>  PCP  archive(s).   The  <u>config</u>  syntax
            accepted by <b>pmlogextract</b> is explained in more detail in the <b>CONFIGURATION</b> <b>FILE</b> <b>SYNTAX</b> section.

       <b>-d</b>, <b>--desperate</b>
            Desperate  mode.   Normally  if a fatal error occurs, all trace of the partially written PCP archive
            <u>output</u> is removed.  With the <b>-d</b> option, the <u>output</u> archive is not removed.

       <b>-f</b>, <b>--first</b>
            For most common uses, all of the <u>input</u> archives will have been collected in the same timezone.   But
            if  this is not the case, then <b>pmlogextract</b> must choose one of the timezones from the <u>input</u> archives
            to be used as the timezone for the <u>output</u> archive.  The default is to use the timezone from the <b>last</b>
            <u>input</u> archive.  The <b>-f</b> option forces the timezone from the <b>first</b> <u>input</u> archive to be used.

       <b>-m</b>, <b>--mark</b>
            As described in the <b>MARK</b> <b>RECORDS</b> section below, sometimes it  is  possible  to  safely  omit  <b>&lt;mark&gt;</b>
            records from the <u>output</u> archive.  If the <b>-m</b> option is specified, then the <b>epilogue</b> and <b>prologue</b> test
            is  skipped and a <b>&lt;mark&gt;</b> record will always be inserted at the end of each <u>input</u> archive (except the
            last).  This is the original behaviour for <b>pmlogextract</b>.

       <b>-S</b> <u>starttime</u>, <b>--start</b>=<u>starttime</u>
            Define the start of a time window to restrict the records processed; refer to <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).  See also
            the <b>-w</b> option.

       <b>-s</b> <u>samples</u>, <b>--samples</b>=<u>samples</u>
            The argument <u>samples</u> defines the number of samples (or records) to be written to <u>output</u>.  If <u>samples</u>
            is 0 or <b>-s</b> is not specified, <b>pmlogextract</b> will continue until the end of all the <u>input</u>  archives  or
            until  the  end  of  the  time window as specified by <b>-T</b>, whichever comes first.  The <b>-s</b> option will
            override the <b>-T</b> option if it occurs sooner.

       <b>-T</b> <u>endtime</u>, <b>--finish</b>=<u>endtime</u>
            Define the end of a time window to restrict the records processed; refer to <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).   See  also
            the <b>-w</b> option.

       <b>-V</b> <u>version</u>, <b>--outputversion</b>=<u>version</u>
            Each  PCP  archive  has a version for the physical record format, currently 2 or 3.  By default, the
            <u>output</u> archive is created with a version equal to the <b>maximum</b> of the version of the <u>input</u>  archives.
            The <b>-V</b> option may be used to explicitly force the version for <u>output</u>, provided <u>version</u> is no smaller
            than the archive version that would have been chosen by the default rule.

            For  example,  specifying <b>-V</b> <b>3</b> may be used to produce a version 3 <u>output</u> archive from <u>input</u> archives
            that could be a mixture of version 2 and/or version 3.

       <b>-v</b> <u>volsize</u>
            The <u>output</u> archive is potentially a multi-volume data set, and the <b>-v</b> option causes <b>pmlogextract</b>  to
            start  a new volume after reaching an archive volume size of <u>volsize</u>.  If <u>volsize</u> is an integer then
            at most <u>volsize</u> records will be written to each volume.  If <u>volsize</u> is an integer suffixed by  <b>b</b>  or
            <b>bytes</b>  then  at most <u>volsize</u> bytes will be written out to each volume.  Other viable file size units
            include: <b>K</b>, <b>Kb</b>, <b>KiB</b>, <b>Kbyte</b>, <b>Kilobyte</b> for kilobytes and <b>M</b>, <b>Mb</b>, <b>MiB</b>, <b>Mbyte</b>, <b>Megabyte</b> for megabytes and
            <b>G</b>, <b>Gb</b>, <b>GiB</b>, <b>Gbyte</b>, <b>Gigabyte</b> for gigabytes.  These units may be optionally suffixed by an <b>s</b>  and  may
            be of mixed case.  Alternatively <u>volsize</u> may be an integer or a floating point number suffixed using
            a  time  unit  as described in <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1) for the <u>interval</u> argument (to the standard PCP <b>-t</b> command
            line option).
            Some examples of different formats:
                      <b>-s</b> <b>100</b>
                      <b>-s</b> <b>100bytes</b>
                      <b>-s</b> <b>100K</b>
                      <b>-s</b> <b>100Mb</b>
                      <b>-s</b> <b>10Gbyte</b>
                      <b>-s</b> <b>10mins</b>
                      <b>-s</b> <b>1.5hours</b>

            The default is for <b>pmlogextract</b> to produce as few volumes as possible.

            Independent of any <b>-v</b> option, each volume of an archive is limited to no more than  2^31  bytes,  so
            <b>pmlogextract</b> will automatically create a new volume for the archive before this limit is reached.

       <b>-w</b>   Where  <b>-S</b>  and  <b>-T</b> specify a time window within the same day, the <b>-w</b> flag will cause the data within
            the time window to be extracted, for <b>every</b> day in the archive.   For  example,  the  options  <b>-w</b>  <b>-S</b>
            <b>@11:00</b>  <b>-T</b> <b>@15:00</b> specify that <b>pmlogextract</b> should include archive records only for the periods from
            11am to 3pm on each day.  When <b>-w</b> is used,  the  <u>output</u>  archive  will  contain  <b>&lt;mark&gt;</b>  records  to
            indicate the temporal discontinuity between the end of one time window and the start of the next.

       <b>-x</b>   It  is  expected  that  the metadata (name, PMID, type, semantics and units) for each metric will be
            consistent across all of the <u>input</u> PCP archive(s) in which that metric appears.  In rare cases, e.g.
            in development, in QA and when a PMDA is upgraded, this may not be the case  and  <b>pmlogextract</b>  will
            report  the issue and abort without creating the <u>output</u> archive.  This is done so the problem can be
            fixed with <b><a href="../man1/pmlogrewrite.1.html">pmlogrewrite</a></b>(1) before retrying the merge.  In unattended or QA environments  it  may  be
            preferable to force the merge and omit the metrics with the mismatched metadata.  The <b>-x</b> option does
            this.

       <b>-Z</b> <u>timezone</u>, <b>--timezone</b>=<u>timezone</u>
            Use  <u>timezone</u>  when  displaying  the date and time in diagnostics.  <u>Timezone</u> is in the format of the
            environment variable <b>TZ</b> as described in <b><a href="../man7/environ.7.html">environ</a></b>(7).  The default is to initially use the timezone of
            the local host.

       <b>-z</b>, <b>--hostzone</b>
            Use the local timezone of the host from the <u>input</u> archive(s) when displaying the date  and  time  in
            diagnostics.  The default is to initially use the timezone of the local host.

       <b>-?</b>, <b>--help</b>
            Display usage message and exit.

</pre><h4><b>CONFIGURATION</b> <b>FILE</b> <b>SYNTAX</b></h4><pre>
       The  <u>configfile</u>  contains metrics of interest - only those metrics (or instances) mentioned explicitly or
       implicitly in the configuration file will be included in the <u>output</u>  archive.   Each  specification  must
       begin  on  a  new  line,  and  may  span multiple lines in the configuration file.  Instances may also be
       specified, but they are optional.  The format for each specification is

               metric
       or
               metric <b>[</b> instance ... <b>]</b>

       where <u>metric</u> may be a leaf or a non-leaf name of a metric in the Performance Metrics  Name  Space  (PMNS,
       see  <b><a href="../man5/PMNS.5.html">PMNS</a></b>(5)).   If a <u>metric</u> refers to a non-leaf node in the PMNS, <b>pmlogextract</b> will recursively descend
       the PMNS and include all metrics corresponding to descendent leaf nodes.

       Instances are optional and are specified as a list space (or comma) separated  of  <u>instance</u>  identifiers,
       with  the  list  enclosed  by  square  brackets.   Each  <u>instance</u>  identifier may be a number or a string
       (enclosed in single or double quotes).  <u>instance</u> identifiers that are numbers are assumed to be  internal
       instance  identifiers,  else  the  string  values  are  assumed  to be external instance identifiers; see
       <b><a href="../man3/pmGetInDom.3.html">pmGetInDom</a></b>(3) for more information.  If no instances are given, then  <b>all</b>  instances  of  the  associated
       metric(s) will be extracted.

       Any additional white space is ignored and comments may be added with a `#' prefix.

</pre><h4><b>CONFIGURATION</b> <b>FILE</b> <b>EXAMPLE</b></h4><pre>
       This is an example of a valid <u>configfile</u>:

               #
               # config file for pmlogextract
               #

               kernel.all.cpu
               kernel.percpu.cpu.sys ["cpu0","cpu1"]
               disk.dev ["dks0d1"]

</pre><h4><b>MARK</b> <b>RECORDS</b></h4><pre>
       When  more than one <u>input</u> archive contributes performance data to the <u>output</u> archive, then <b>&lt;mark&gt;</b> records
       may be inserted to indicate a possible temporal discontinuity in the performance data.

       A <b>&lt;mark&gt;</b> record contains a timestamp and no performance data and is used to indicate that there is a time
       period in the PCP archive where we do not know the values of <b>any</b> performance metrics, because  there  was
       no  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) collecting performance data during this period.  Since these periods are often associated
       with the restart of a service or <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) or a system reboot, there may be considerable doubt  as  to  the
       continuity of performance data across this time period.

       Most  current  archives are created with a <b>prologue</b> record at the beginning and an <b>epilogue</b> record at the
       end.  These records identify the state of <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) at the  time,  and  may  be  used  by  <b>pmlogextract</b>  to
       determine  that  there is no discontinuity between the end of one archive and the next output record, and
       as a consequence the <b>&lt;mark&gt;</b> record can safely be omitted from the <u>output</u> archive.

       The rationale behind <b>&lt;mark&gt;</b> records may be demonstrated with an example.  Consider one <u>input</u> archive that
       starts at 00:10 and ends at 09:15 on the same day, and another <u>input</u> archive that starts at 09:20 on  the
       same  day and ends at 00:10 the following morning.  This would be a very common case for archives managed
       and rotated by <b><a href="../man1/pmlogger_check.1.html">pmlogger_check</a></b>(1) and <b><a href="../man1/pmlogger_daily.1.html">pmlogger_daily</a></b>(1).

       The <u>output</u> archive created by <b>pmlogextract</b> would contain:
       00:10.000    first record from first input archive
       ...
       09:15.000    last record from first input archive
       09:15.001    &lt;mark&gt; record
       09:20.000    first record from second input archive
       ...
       01:10.000    last record from second input archive

       The time period where the performance data is missing starts just after 09:15 and ends just before 09:20.
       When the <u>output</u> archive is processed with any of the PCP reporting tools, the <b>&lt;mark&gt;</b> record  is  used  to
       indicate a period of missing data.  For example using the <u>output</u> archive above, imagine one was reporting
       the average I/O rate at 30 minute intervals aligned on the hour and half-hour.  The I/O count metric is a
       counter, so the average I/O rate requires two valid values from consecutive sample times.  There would be
       values  for all the intervals ending at 09:00, then no values at 09:30 because of the <b>&lt;mark&gt;</b> record, then
       no values at 10:00 because the ``prior'' value at 09:30 is not available, then the rate would be reported
       again at 10:30 and continue every 30 minutes until the last reported value at 01:00.

       The presence of <b>&lt;mark&gt;</b> records in a PCP archive can be established using <b><a href="../man1/pmlogdump.1.html">pmlogdump</a></b>(1) where  a  timestamp
       and the annotation <b>&lt;mark&gt;</b> is used to indicate a <b>&lt;mark&gt;</b> record.

</pre><h4><b>METADATA</b> <b>CHECKS</b></h4><pre>
       When  more  than  one  <u>input</u> archive is specified, <b>pmlogextract</b> performs a number of checks to ensure the
       metadata is consistent for metrics appearing in more than  one  of  the  <u>input</u>  archives.   These  checks
       include:

       * metric data type is the same
       * metric semantics are the same
       * metric units are the same
       * metric is either always singular or always has the same instance domain
       * metrics with the same name have the same PMID
       * metrics with the same PMID have the same name

       If  any  of  these  checks  fail, <b>pmlogextract</b> reports the details and aborts without creating the <u>output</u>
       archive.

       To address these semantic issues, use <b><a href="../man1/pmlogrewrite.1.html">pmlogrewrite</a></b>(1) to translate the  <u>input</u>  archives  into  equivalent
       archives with consistent metadata before using <b>pmlogextract</b>.

       Refer  to  the  <b>-x</b>  and  <b>-d</b> command line options above for alternatives to the default handling of errors
       during metadata checks.

</pre><h4><b>CAVEATS</b></h4><pre>
       The <b>prologue</b> metrics  (pmcd.pmlogger.archive,  pmcd.pmlogger.host,  and  pmcd.pmlogger.port),  which  are
       automatically  recorded by <b>pmlogger</b> at the start of the archive, may not be present in the archive output
       by <b>pmlogextract</b>.  These metrics are only relevant while  the  archive  is  being  created,  and  have  no
       significance once recording has finished.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       All  error  conditions  detected by <b>pmlogextract</b> are reported on <u>stderr</u> with textual (if sometimes terse)
       explanation.

       If one of the <u>input</u> archives contains no archive records then an ``empty archive'' warning is issued  and
       that archive is skipped.

       Should  one  of  the  <u>input</u> archive(s) be corrupted (this can happen if the <b>pmlogger</b> instance writing the
       archive suddenly dies), then <b>pmlogextract</b> will detect and report the position of the  corruption  in  the
       file, and any subsequent information from that archive will not be processed.

       If any error is detected, <b>pmlogextract</b> will exit with a non-zero status.

</pre><h4><b>FILES</b></h4><pre>
       For each of the <u>input</u> and <u>output</u> archive, several physical files are used.

       <u>archive</u><b>.meta</b>
            metadata (metric descriptions, instance domains, etc.) for the archive

       <u>archive</u><b>.0</b>
            initial  volume  of  metrics  values  (subsequent volumes have suffixes <b>1</b>, <b>2</b>, ...) - for <u>input</u> these
            files may have been previously compressed with <b><a href="../man1/bzip2.1.html">bzip2</a></b>(1) or <b><a href="../man1/gzip.1.html">gzip</a></b>(1) and thus may have  an  additional
            <b>.bz2</b> or <b>.gz</b> suffix.

       <u>archive</u><b>.index</b>
            temporal index to support rapid random access to the other files in the archive.

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment  variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used by
       PCP.  On each installation, the file <u>/etc/pcp.conf</u> contains the local values for  these  variables.   The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).

       For environment variables affecting PCP tools, see <b><a href="../man3/pmGetOptions.3.html">pmGetOptions</a></b>(3).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1), <b><a href="../man1/pmlc.1.html">pmlc</a></b>(1), <b><a href="../man1/pmlogdump.1.html">pmlogdump</a></b>(1), <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1), <b><a href="../man1/pmlogreduce.1.html">pmlogreduce</a></b>(1), <b><a href="../man1/pmlogrewrite.1.html">pmlogrewrite</a></b>(1), <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5), <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5)
       and <b><a href="../man5/PMNS.5.html">PMNS</a></b>(5).

Performance Co-Pilot                                   PCP                                       <u><a href="../man1/PMLOGEXTRACT.1.html">PMLOGEXTRACT</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>