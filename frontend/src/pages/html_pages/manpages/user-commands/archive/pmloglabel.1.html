<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmloglabel - check and repair a performance metrics archive label</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pcp">pcp_6.3.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmloglabel</b> - check and repair a performance metrics archive label

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pmloglabel</b> [<b>-lLsv?</b>]  [<b>-h</b> <u>hostname</u>] [<b>-p</b> <u>pid</u>] [<b>-V</b> <u>version</u>] [<b>-Z</b> <u>timezone</u>] <u>archive</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmloglabel</b>  verifies,  reports  on,  and  can  modify all details of the labels in each of the files of a
       Performance Co-Pilot (PCP) archive.  The archive has the base name <u>archive</u> and must have been  previously
       created using <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1).

       Each  of the files in a PCP archive (metadata, temporal index, and one or more data volumes) must contain
       a valid label at the start, else the PCP tools will refuse to open the archive at all.

       Thus, the primary function of <b>pmloglabel</b> is to be able  to  repair  any  inconsistent  or  corrupt  label
       fields, such that the entire archive is not lost.  It will not check the remainder of the archive, but it
       will  give  you  a fighting chance to recover otherwise lost data.  Together, <b>pmloglabel</b> and <b>pmlogextract</b>
       are able to produce a valid PCP archive from many forms of corruption.

       Note that if the temporal index is found to be corrupt, the "*.index" file can be safely moved aside  and
       the archive will still be accessible, however retrievals may take longer without the index.

</pre><h4><b>OPTIONS</b></h4><pre>
       The available command line options are:

       <b>-h</b> <u>hostname</u>, <b>--host</b>=<u>hostname</u>
            Modify the logged <u>hostname</u> in the archive label, for all files in the archive.

       <b>-l</b>, <b>--label</b>
            Dump  out the archive label, showing the archive format version, the time and date for the start and
            (current) end of the archive, and the host from which the performance metrics values were collected.

       <b>-L</b>   Like <b>-l</b>, just a little more verbose, showing also the timezone and creator process  identifier  from
            the archive label.

       <b>-p</b> <u>pid</u>, <b>--pid</b>=<u>pid</u>
            Set the process identifier stored in the archive label to <u>pid</u>, for all files in the archive.

       <b>-s</b>   Rewrite  the  sentinel  values  which  precede  and  follow  the archive label, for all files in the
            archive.

       <b>-v</b>, <b>--verbose</b>
            Verbose mode.  Additional progress information is produced at each step.

       <b>-V</b> <u>version</u>, <b>--version</b>=<u>version</u>
            Stamp the <u>version</u> number into the magic number field at the start of  the  archive  label,  for  all
            files in the archive.

       <b>-Z</b> <u>timezone</u>, <b>--timezone</b>=<u>timezone</u>
            Changes  the timezone in the archive labels to <u>timezone</u> in the format of the environment variable <b>TZ</b>
            as described in <b><a href="../man7/environ.7.html">environ</a></b>(7).

       <b>-?</b>, <b>--help</b>
            Display usage message and exit.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following demonstrates the use of <b>pmloglabel</b> in finding and then correcting a corrupt field (PID)  in
       the label of the temporal index of an archive named "20080125".

                 $ pmlogdump -l 20080125
                 pmlogdump: Cannot open archive "20080125": Illegal label record at start of a PCP archive file
                 $ pmloglabel 20080125
                 Mismatched PID (5264/5011) between temporal index and data volume 0
                 $ pmloglabel -p 5264 20080125
                 $ pmlogdump -l 20080125
                 Log Label (Log Format Version 2)
                 Performance metrics from host fw1
                   commencing Fri Jan 25 00:10:09.341 2008
                   ending     Sat Jan 26 00:09:54.344 2008

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>pmloglabel</b>  exits with status 0 if the archive labels are clean.  If invoked incorrectly, the exit status
       will be 1.  If corruption is detected and still exists at the  end,  the  exit  status  will  be  2.   If
       requested  to write out the archive labels, and some aspect of that write out fails, then the exit status
       will be 3.

</pre><h4><b>FILES</b></h4><pre>
       <u>$PCP_LOG_DIR/pmlogger/&lt;hostname&gt;</u>
            Default directory for PCP archives containing performance metric  values  collected  from  the  host
            <u>&lt;hostname&gt;</u>.

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment  variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used by
       PCP.  On each installation, the file <u>/etc/pcp.conf</u> contains the local values for  these  variables.   The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1),    <b><a href="../man1/pmlogcheck.1.html">pmlogcheck</a></b>(1),    <b><a href="../man1/pmlogdump.1.html">pmlogdump</a></b>(1),    <b><a href="../man1/pmlogextract.1.html">pmlogextract</a></b>(1),    <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1),    <b><a href="../man1/pmlogger_check.1.html">pmlogger_check</a></b>(1),
       <b><a href="../man1/pmlogger_daily.1.html">pmlogger_daily</a></b>(1), <b><a href="../man1/pmlogrewrite.1.html">pmlogrewrite</a></b>(1), <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5) and <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5).

Performance Co-Pilot                                   PCP                                         <u><a href="../man1/PMLOGLABEL.1.html">PMLOGLABEL</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>