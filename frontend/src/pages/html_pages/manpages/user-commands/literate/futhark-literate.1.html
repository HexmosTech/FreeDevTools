<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>futhark-literate - execute literate Futhark program</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/futhark">futhark_0.25.27-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       futhark-literate - execute literate Futhark program

</pre><h4><b>SYNOPSIS</b></h4><pre>
       futhark literate [options…] program

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  command  <b>futhark</b>  <b>literate</b>  <b>foo.fut</b> will compile the given program and then generate a Markdown file
       <b>foo.md</b> that contains a prettyprinted form of the program.  This is useful for  demonstrating  programming
       techniques.

       • Top-level  comments  that  start with a line comment marker (<b>--</b>) and a space in the next column will be
         turned into ordinary text in the Markdown file.

       • Ordinary top-level definitions will be enclosed in Markdown code blocks.

       • Any <u>directives</u> will be executed and replaced with their output.  See below.

       <b>Warning:</b> Do not run untrusted programs.  See SAFETY below.

       Image directives and builtin functions  shell  out  to  <b>convert</b>  (from  ImageMagick).   Video  and  audio
       generation uses <b>ffmpeg</b>.

       For  an  input  file <b>foo.fut</b>, all generated files will be in a directory named <b>foo-img</b>.  A <b>file</b> parameter
       passed to a directive may not contain a directory component or spaces.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>--backend=</b><u>name</u>
              The backend used when compiling Futhark programs (without  leading  <b>futhark</b>,  e.g.  just  <b>opencl</b>).
              Defaults to <b>c</b>.

       <b>--futhark=</b><u>program</u>
              The  program used to perform operations (eg. compilation).  Defaults to the binary running <b>futhark</b>
              <b>literate</b> itself.

       <b>--output=</b><u>FILE</u>
              Override the default output file.  The image directory will be set to the provided <b>FILE</b>  with  its
              extension stripped and <b>-img/</b> appended.

       <b>--pass-option=</b><u>opt</u>
              Pass an option to benchmark programs that are being run.  For example, we might want to run OpenCL
              programs on a specific device:

                 futhark literate prog.fut --backend=opencl --pass-option=-dHawaii

       <b>--pass-compiler-option=</b><u>opt</u>
              Pass an extra option to the compiler when compiling the programs.

       <b>--skip-compilation</b>
              Do  not run the compiler, and instead assume that the program has already been compiled.  Use with
              caution.

       <b>--stop-on-error</b>
              Terminate immediately without producing an output file if a directive  fails.   Otherwise  a  file
              will still be produced, and failing directives will be followed by an error message.

       <b>-v</b>, <b>--verbose</b>
              Print  verbose  information on stderr about directives as they are executing.  This is also needed
              to see <b>#[trace]</b> output.

</pre><h4><b>DIRECTIVES</b></h4><pre>
       A directive is a way to show the result of running a function.  Depending on the directive, this  can  be
       as  simple  as  printing  the  textual representation of the result, or as complex as running an external
       plotting program and referencing a generated image.

       Any directives that produce images for a program <b>foo.fut</b> will place them in the directory  <b>foo-img/</b>.   If
       this directory already exists, it will be deleted.

       A  directive  is  a line starting with <b>--</b> <b>&gt;</b>, which must follow an empty line.  Arguments to the directive
       follow on the remainder of the line.  Any expression arguments are given in a very restricted  subset  of
       Futhark called <u>FutharkScript</u> (see below).

       Some  directives  take  mandatory  or  optional  parameters.   These  are entered after a semicolon <u>and</u> <u>a</u>
       <u>linebreak</u>.

       The following directives are supported:

       • <b>&gt;</b> <b>e</b>

         Shows the result of executing the FutharkScript expression <b>e</b>, which can have any (transparent) type.

       • <b>&gt;</b> <b>:video</b> <b>e[;</b> <b>parameters...]</b>

         Creates a video from <b>e</b>.  The optional parameters are lines of the form <u>key:</u> <u>value</u>:

         • <b>repeat:</b> <b>&lt;true|false&gt;</b>

         • <b>fps:</b> <b>&lt;int&gt;</b>

         • <b>format:</b> <b>&lt;webm|gif&gt;</b>

         • <b>file:</b> <b>&lt;name&gt;</b>.  Make sure to provide a proper extension.

         <b>e</b> must be one of the following:

         • A 3D array where the 2D elements is of a type acceptable to <b>:img</b>, and the outermost dimension is  the
           number of frames.

         • A  triple <b>(s</b> <b>-&gt;</b> <b>(img,s),</b> <b>s,</b> <b>i64)</b>, for some types <b>s</b> and <b>img</b>, where <b>img</b> is an array acceptable to <b>:img</b>.
           This means not all frames have to be held in memory at once.

       • <b>&gt;</b> <b>:brief</b> <b>&lt;directive&gt;</b>

         The same as the given <u>directive</u> (which must not start with another <b>&gt;</b>),  but  suppress  parameters  when
         printing it.

       • <b>&gt;</b> <b>:covert</b> <b>&lt;directive&gt;</b>

         The  same  as  the given <u>directive</u> (which must not start with another <b>&gt;</b>), but do not show the directive
         itself in the output, only its result.

       • <b>&gt;</b> <b>:img</b> <b>e[;</b> <b>parameters...]</b>

         Visualises <b>e</b>.  The optional parameters are lines of the form <u>key:</u> <u>value</u>:

         • <b>file:</b> <b>NAME</b>.  Make sure to use a proper extension.

         The expression <b>e</b> must have one of the following types:

         • <b>[][]i32</b> and <b>[][]u32</b>

           Interpreted as ARGB pixel values.

         • <b>[][]f32</b> and <b>[][]f64</b>

           Interpreted as greyscale. Values should be between 0 and 1, with 0 being black and 1 being white.

         • <b>[][]u8</b>

           Interpreted as greyscale. 0 is black and 255 is white.

         • <b>[][]bool</b>

           Interpreted as black and white. <b>false</b> is black and <b>true</b> is white.

       • <b>&gt;</b> <b>:plot2d</b> <b>e[;</b> <b>size=(height,width)]</b>

         Shows a plot generated with <b>gnuplot</b> of <b>e</b>, which must be an expression of type <b>([]t,</b> <b>[]t)</b>,  where  <b>t</b>  is
         some  numeric  type.   The  two arrays must have the same length and are interpreted as <b>x</b> and <b>y</b> values,
         respectively.

         The expression may also be a record expression (<u>not</u> merely the name of a  Futhark  variable  of  record
         type), where each field will be plotted separately and must have the type mentioned above.

       • <b>&gt;</b> <b>:gnuplot</b> <b>e;</b> <b>script...</b>

         Similar  to  <b>plot2d</b>,  except that it uses the provided Gnuplot script.  The <b>e</b> argument must be a record
         whose fields are tuples of one-dimensional arrays, and the data will be available  in  temporary  files
         whose  names  are  in variables named after the record fields.  Each file will contain a column of data
         for each array in the corresponding tuple.

         Use <b>set</b> <b>term</b> <b>png</b> <b>size</b> <b>width,height</b> to change the size to <b>width</b> by <b>height</b> pixels.

       • <b>&gt;</b> <b>:audio</b> <b>e[;</b> <b>parameters...]</b>

         Creates a sound-file from <b>e</b>.  The optional parameters are lines of the form <u>key:value</u>:

         • <b>sampling_frequency:</b> <b>&lt;int&gt;</b>

           The sampling frequency (in Hz) of the input.  Defaults to <b>44100</b>.

         • <b>codec:</b> <b>&lt;name&gt;</b>

           The codec of the output.  Defaults to <b>wav</b>. Other common options include <b>mp3</b>, <b>flac</b>, <b>ogg</b> and <b>opus</b>.

         The expression <b>e</b> must have one of the following types:

         • <b>[]i8</b> and <b>[]u8</b>

           Interpreted as PCM signed/unsigned 8-bit audio.

         • <b>[]i16</b> and <b>[]u16</b>

           Interpreted as PCM signed/unsigned 16-bit audio.

         • <b>[]i32</b> and <b>[]u32</b>

           Interpreted as PCM signed/unsigned 32-bit audio.

         • <b>[]f32</b> and <b>[]f64</b>

           Interpreted as PCM signed/unsigned 32/64 bit floating-point audio. Should only contain values between
           <b>-1.0</b> and <b>1.0</b>.

         For each type of input, it is also possible to give expressions with a  two-dimensional  type  instead,
         e.g.  <b>[][]f32</b>.   These  expressions  are  interpreted as an array of channels, making it possible to do
         stereo audio by returning e.g. <b>[2][]f32</b>.  For stereo output, the first row is the left channel and  the
         second row is the right channel.  This functionality uses the amerge filter from ffmpeg, so consult the
         documentation there for additional information.

</pre><h4><b>FUTHARKSCRIPT</b></h4><pre>
       Only an extremely limited subset of Futhark is supported:

       <b>script_exp</b>  ::=    <b>fun</b> <u>script_exp</u>*
                        | "(" <u>script_exp</u> ")"
                        | "(" <u>script_exp</u> ( "," <u>script_exp</u> )+ ")"
                        | "[" <u>script_exp</u> ( "," <u>script_exp</u> )+ "]"
                        | "empty" "(" ("[" <u>decimal</u> "]" )+ <u>script_type</u> ")"
                        | "{" "}"
                        | "{" (<b>id</b> = <u>script_exp</u>) ("," <b>id</b> = <u>script_exp</u>)* "}"
                        | "let" <u>script_pat</u> "=" <u>script_exp</u> "in" <u>script_exp</u>
                        | <u>literal</u>
       <b>script_pat</b>  ::=   <b>id</b> | "(" <b>id</b> ("," <b>id</b>) ")"
       <b>script_fun</b>  ::=   <b>id</b> | "$" <b>id</b>
       <b>script_type</b> ::=  <u>int_type</u> | <u>float_type</u> | "bool"

       Note that empty arrays must be written using the <b>empty(t)</b> notation, e.g. <b>empty([0]i32)</b>.

       Function applications are either of Futhark functions or <u>builtin</u> <u>functions</u>.  The latter are prefixed with
       <b>$</b>  and  are  magical  (usually  impure) functions that could not possibly be implemented in Futhark.  The
       following builtins are supported:

       • <b>$loadimg</b> <b>"file"</b> reads an image from the given file and returns it as a  row-major  <b>[][]u32</b>  array  with
         each pixel encoded as ARGB.

       • <b>$loaddata</b>  <b>"file"</b>  reads  a dataset from the given file. When the file contains a singular value, it is
         returned as value. Otherwise, a tuple of values is returned, which should be destructured  before  use.
         For example: <b>let</b> <b>(a,</b> <b>b)</b> <b>=</b> <b>$loaddata</b> <b>"foo.in"</b> <b>in</b> <b>bar</b> <b>a</b> <b>b</b>.

       • <b>$loadbytes</b> <b>"file"</b> reads the contents of the given file as an array of type <b>[]u8</b>.

       • <b>$loadaudio</b>  <b>"file"</b>  reads  audio  from  the  given  file  and  returns  it as a <b>[][]f64</b>, where each row
         corresponds to a channel of the original soundfile. Most common audio-formats are supported,  including
         mp3, ogg, wav, flac and opus.

       FutharkScript  supports a form of automatic uncurrying. If a function taking <u>n</u> parameters is applied to a
       single argument that is an <u>n</u>-element tuple, the function is applied to  the  elements  of  the  tuple  as
       individual arguments.

</pre><h4><b>SAFETY</b></h4><pre>
       Some  directives (e.g. <b>:gnuplot</b>) can run arbitrary shell commands.  Other directives or builtin functions
       can read or write arbitrary files.  Running an untrusted literate Futhark  program  is  as  dangerous  as
       running a shell script you downloaded off the Internet.  Before running a program from an unknown source,
       you should always give it a quick read to see if anything looks fishy.

</pre><h4><b>BUGS</b></h4><pre>
       FutharkScript expressions can only refer to names defined in the file passed to <b>futhark</b> <b>literate</b>, not any
       names in imported files.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>futhark-script</u>, <u>futhark-test</u>, <u>futhark-bench</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2013-2020, DIKU, University of Copenhagen

0.25.27                                           Mar 02, 2025                               <u><a href="../man1/FUTHARK-LITERATE.1.html">FUTHARK-LITERATE</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>