<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>reptyr - Reparent a running program to a new terminal</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/reptyr">reptyr_0.9.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       reptyr - Reparent a running program to a new terminal

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>reptyr</b> <u>PID</u>

       <b>reptyr</b> <b>-l|-L</b> <b>[COMMAND</b> <b>[ARGS]]</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>reptyr</b>  is a utility for taking an existing running program and attaching it to a new terminal. Started a
       long-running process over ssh, but have to leave and don't want to interrupt it? Just start a screen, use
       <b>reptyr</b> to grab it, and then kill the ssh session and head on home.

       <b>reptyr</b> works by attaching to the target program using <b><a href="../man2/ptrace.2.html">ptrace</a></b>(2), redirecting relevant  file  descriptors,
       and  changing  the  program's  controlling terminal (See <b><a href="../man4/tty.4.html">tty</a></b>(4)) It is this last detail that makes <b>reptyr</b>
       work much better than alternatives such as <b><a href="../man1/retty.1.html">retty</a></b>(1).

       After attaching a program, the program will appear to be either backgrounded or suspended to the shell it
       was launched from (depending on the shell). For maximal safety you can run

              bg; disown

       in the old shell to remove the association with the program, but <b>reptyr</b> will attempt to ensure  that  the
       target program remains running even if you close the shell without doing so.

</pre><h4><b>OPTIONS</b></h4><pre>
       <b>-T</b>

              Use  an  alternate  mode of attaching, "TTY-stealing". In this mode, <b>reptyr</b> will not <b><a href="../man2/ptrace.2.html">ptrace</a></b>(2) the
              target process, but will attempt to discover the terminal emulator  for  that  process'  pty,  and
              steal  the  master  end  of the pty. This mode is more reliable and flexible in many circumstances
              (for instance, it can attach all processes on a tty, rather than just a single process).  However,
              as a downside, children of <b><a href="../man8/sshd.8.html">sshd</a>(8)</b> cannot be attached via <b>-T</b> unless <b>reptyr</b> is run as root. See
              ⟨https://blog.nelhage.com/2014/08/new-reptyr-feature-tty-stealing/⟩  for  more  information  about
              tty-stealing.

       <b>-l,</b> <b>-L</b> <b>[COMMAND</b> <b>[ARGS]]</b>

              Instead of attaching to a new process, create a new pty pair, proxy the master end to the  current
              terminal,  and  then  print  the  name  of  the  slave  pty. This can be passed to e.g.  <b>gdb´s</b> <u>set</u>
              <u>inferior-tty</u> option.

              If an optional <b>COMMAND</b> and <b>ARGS</b> are passed in conjunction with <b>-l,</b> that command will  be  executed
              as a child of <b>reptyr</b> with the <b>REPTYR_PTY</b> environment variable set to the name of the slave pty. If
              <b>-L</b> is used instead of <b>-l,</b> then fds 0-2 of the child will also be redirected to point to the slave,
              and the child will be run in a fresh session with the slave as its controlling terminal.

       <b>-s</b>

              By  default,  reptyr  will  move  any  file  descriptors  in the target that were connected to the
              target's controlling terminal to point to the new terminal. The <b>-s</b> option  will  cause  reptyr  to
              unconditionally  attach  file  descriptors  0,  1,  and 2 in the target, even if the target has no
              controlling terminal or they are not connected to a terminal.

       <b>-v</b>

              Print the version of <b>reptyr</b> and exit.

       <b>-h</b>

              Print a usage message and exit.

       <b>-V</b>

              Print verbose debug output while running.

</pre><h4><b>NOTES</b></h4><pre>
       <b>reptyr</b> depends on the <b><a href="../man2/ptrace.2.html">ptrace</a></b>(2) system call to attach to the  remote  program.  On  Ubuntu  Maverick  and
       higher, this ability is disabled by default for security reasons. You can enable it temporarily by doing

               # echo 0 &gt; <a href="file:/proc/sys/kernel/yama/ptrace_scope">/proc/sys/kernel/yama/ptrace_scope</a>

       as  root,  or  permanently  by  editing  the  file <u><a href="file:/etc/sysctl.d/10-ptrace.conf">/etc/sysctl.d/10-ptrace.conf</a></u>, which also contains more
       information about this setting.

</pre><h4><b>BUGS</b></h4><pre>
       When attaching to some curses programs, they will not redraw the screen right away, and a <b>^L</b>  or  similar
       will be needed to force a redraw.

       Similarly,  after  attaching  to  certain  programs, the old terminal will be left in an odd state, and a
       <b>clear</b> or even <b>reset</b> may be required before the old terminal is usable again.

       Attaching to rtorrent (and probably some other apps) doesn't work right (rtorrent stops accepting  input)
       (The  problem  is  that rtorrent is using epoll to poll stdin, and we don't update the internal reference
       that the epoll fd has to the old tty).

       Attaching to a process with children doesn't work right. This should be possible to fix -- I just need to
       ptrace each child individually and do the same games to it.

       Attaching a <b><a href="../man1/less.1.html">less</a></b>(1) process doesn't work if you have a <u>.lessfilter</u> file, as <b>less</b> leaves around  a  zombie
       child in this case. This could be worked around.

       Bugs should be reported to the author (see below) or via the issue tracker on GitHub.

</pre><h4><b>AUTHORS</b></h4><pre>
       reptyr was written by Nelson Elhage &lt;<a href="mailto:nelhage@nelhage.com">nelhage@nelhage.com</a>&gt;.

</pre><h4><b>HOMEPAGE</b></h4><pre>
       ⟨https://github.com/nelhage/reptyr⟩

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/neercs.1.html">neercs</a></b>(1), <b><a href="../man1/screen.1.html">screen</a></b>(1)

                                                   03 Feb 2011                                         <u><a href="../man1/reptyr.1.html">reptyr</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>