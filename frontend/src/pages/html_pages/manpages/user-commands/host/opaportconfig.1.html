<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>opaportconfig</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/opa-basic-tools">opa-basic-tools_10.10.3.0.11-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       opaportconfig

       <b>(Host</b>  <b>or</b>  <b>Switch)</b>  Controls  the  configuration  and state of a specified Intel(R) Omni-Path Host Fabric
       Interface (HFI) port on the local host or a remote switch.

       <b>NOTE:</b> This tool is designed for expert users only. Non-expert  users  should  use  other  tools  such  as
       opaenableports, opadisableports and opaportinfo for basic functionality.

</pre><h4><b>Syntax</b></h4><pre>
       opaportconfig [-l  <u>lid</u> [-m  <u>dest_port</u>]] [-h  <u>hfi</u>] [-p  <u>port</u>] [-r  <u>secs</u>] [-z]

       [-S  <u>state</u>] [-P  <u>physstate</u>] [-s  <u>speed</u>] [-w  <u>width</u>] [-c  <u>LTPCRC</u>] [-v] [-x]
       [-L  <u>lid</u>] [&lt; <u>sub</u> <u>command</u>&gt;]

</pre><h4><b>Options</b></h4><pre>
       --help

                 Produces full help text.

       -l <u>lid</u>

                 Specifies the destination LID. Default is local port.

       -m <u>dest_port</u>

                 Specifies the destination port. Default is port with given LID. Used to access switch ports.

       -h <u>hfi</u>

                 Specifies the HFI to send through/to. Default is first HFI.

       -p <u>port</u>

                 Specifies the port to send through/to. Default is first port.

       <u>sub</u> <u>command</u>

                 Specifies the one of the following choices:

                 enable    Enables port.

                 disable   Disables port.

                 bounce    Bounces port.

                                  <b>NOTE:</b>
                        Bouncing remote ports may cause timeouts.

                 ledon     Turns port LED on.

                 ledoff    Turns port LED off.

</pre><h4><b>Configuration</b> <b>Options</b></h4><pre>
       -r <u>secs</u>

                 Repeats to keep the port down for the specified amount of seconds.

       -S <u>state</u>

                 Specifies the new state. Default is 0.

                 0         No-op.

                 1         Down.

                 2         Initiate.

                 3         Armed.

                 4         Active.

       -P <u>physstate</u>

                 Specifies the new physical state. Default is 0.

              <b>NOTE:</b>
              All transitions are valid.

              0         No-op.

              2         Polling.

              3         Disabled.

              11        Phy-Test. Current physstate must be disabled.

       -s <u>speed</u>

                 Specifies  the new link speeds enabled. Default is 0. To enable multiple speeds, use the sum of
                 the desired speeds.

                 0         No-op.

                 2         0x0002 - 25 Gb/s.

       -w <u>width</u>

                 Specifies the new link widths enabled. Default is 0. To enable  multiple  widths,  use  sum  of
                 desired widths.

                 0         No-op.

                 1         0x01 - 1x.

                 2         0x02 - 2x.

                 4         0x04 - 3x.

                 8         0x08 - 4x.

       -c <u>LTPCRC</u>

                 Specifies the new LTP CRCs enabled. Default is 0.
                 To enable multiple LTP CRCs, use sum of desired LTP CRCs.

                 0         No-op.

                 1         0x1 - 14-bit LTP CRC mode.

                 2         0x2 - 16-bit LTP CRC mode.

                 4         0x4 - 48-bit LTP CRC mode.

                 8         0x8 - 12/16 bits per lane LTP CRC mode.

</pre><h4><b>-h</b> <b>and</b> <b>-p</b> <b>options</b> <b>permit</b> <b>a</b> <b>variety</b> <b>of</b> <b>selections:</b></h4><pre>
       -h 0

                 First active port in system (Default).

       -h 0 -p 0

                 First active port in system.

       -h <u>x</u>

                 First active port on HFI <u>x</u>.

       -h <u>x</u> -p 0

                 First active port on HFI <u>x</u>.

       -h 0 -p <u>y</u>

                 Port <u>y</u> within system (no matter which ports are active).

       -h <u>x</u> -p <u>y</u>

                 HFI <u>x</u>, port <u>y</u>.

</pre><h4><b>Debug</b> <b>Options</b></h4><pre>
       -v

                 Verbose  output.  Additional  invocations  turn  on  debugging, openib debugging, and libibumad
                 debugging.

       -z

                 Does not get port information first; clears most port attributes.

       -L <u>lid</u>

                 Sets PortInfo.LID = lid.

</pre><h4><b>Examples</b></h4><pre>
       opaportconfig -w 1

       opaportconfig -p 1 -h 2 -w 3

</pre><h4><b>Description</b></h4><pre>
       Port configuration is transient in nature. If the given host is rebooted or its Intel(R) Omni-Path Fabric
       Stack is restarted, the port reverts to its default configuration and state. Typically, the default state
       is to have the port enabled with all speeds and widths supported by the given HFI port.

       To access switch ports using this command, the -l and -m options must be given. The -l  option  specifies
       the  lid of switch port 0 (the logical management port for the switch) and -m specifies the actual switch
       port to access.

       <b>NOTE:</b> The /etc/init.d/opaportconfig script is provided as an example of changing port  speed  every  time
       the  server boots. This script can be edited, then scheduled, using chkconfig to control link settings on
       any set of HFI ports.

       <b>CAUTION:</b> When using this command to disable or reconfigure switch ports, if the final port  in  the  path
       between  the  Fabric  Management  Node  and  the  switch  is  disabled  or  fails  to  come  online, then
       opaenableports is not able to reenable it. In this case, the switch CLI and/or a  switch  reboot  may  be
       needed to correct the situation.

Copyright(C) 2015-2019                          Intel Corporation                               <u><a href="../man1/opaportconfig.1.html">opaportconfig</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>