<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nbdkit-ssh-plugin - access disk images over the SSH protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/nbdkit">nbdkit_1.42.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nbdkit-ssh-plugin - access disk images over the SSH protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
        nbdkit ssh host=HOST [path=]PATH
                   [compression=true] [config=CONFIG_FILE]
                   [create=true] [create-mode=MODE] [create-size=SIZE]
                   [identity=FILENAME] [known-hosts=FILENAME]
                   [password=PASSWORD|-|+FILENAME]
                   [port=PORT] [timeout=SECS] [user=USER]
                   [verify-remote-host=false]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is an <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1) plugin which lets you access remote disk images over Secure Shell (SSH).  Any server
       which hosts disk images and runs an SSH server can be turned into an NBD source using this plugin.

</pre><h4><b>EXAMPLES</b></h4><pre>
       nbdkit ssh host=ssh.example.com disk.img
           Open  a  file called <u>disk.img</u> on remote host "ssh.example.com".  Because the pathname is relative, it
           is opened relative to the user’s home directory on the remote server.

           The remote file can be read or written.  To force read-only access add the <u>-r</u> flag.

       nbdkit ssh host=ssh.example.com disk.img user=bob
           As above but log in using username "bob" (instead of trying the local username).

</pre><h4><b>PARAMETERS</b></h4><pre>
       <b>compression=true</b>
           Enable compression.  You should only use this on slow  or  bandwidth-limited  connections.   On  fast
           connections it will slow things down.

       <b>config=</b>CONFIG_FILE
           Read local SSH configuration from an alternate configuration file.  Libssh expands some "%"-sequences
           in "CONFIG_FILE", see "Path expansion" below.  "CONFIG_FILE" must expand to an absolute path.

       <b>config=</b>
           Do not read any local SSH configuration.

           The  "config"  parameter  is  optional.   If  it  is  <u>not</u>  specified  at  all  then <u><a href="file:~/.ssh/config">~/.ssh/config</a></u> and
           <u><a href="file:/etc/ssh/ssh_config">/etc/ssh/ssh_config</a></u> are both read.  Missing or unreadable files are ignored.

       <b>create=true</b>
           (nbdkit ≥ 1.32)

           If set, the remote file will be created.  The remote file is created on the first NBD  connection  to
           nbdkit,  not when nbdkit starts up.  If the file already exists, it will be replaced and any existing
           content lost.

           If using this option, you  must  use  "create-size".   "create-mode"  can  be  used  to  control  the
           permissions of the new file.

       <b>create-mode=</b>MODE
           (nbdkit ≥ 1.32)

           If  using  "create=true"  specify  the default permissions of the new remote file.  You can use octal
           modes like "create-mode=0777" or "create-mode=0644".  The default is  0600,  ie.  only  readable  and
           writable by the remote user.

       <b>create-size=</b>SIZE
           (nbdkit ≥ 1.32)

           If  using  "create=true",  specify  the  virtual size of the new disk.  "SIZE" can use modifiers like
           "100M" etc.

       <b>host=</b>HOST
           Specify the name or IP address of the remote host.

           This parameter is required.

       <b>identity=</b>FILENAME
           Prepend the private key (identity) "FILENAME" to the list of identity files  used.   Libssh  examines
           several  identity  files  by  default  such  as <u><a href="file:~/.ssh/id_ed25519">~/.ssh/id_ed25519</a></u>, <u><a href="file:~/.ssh/id_ecdsa">~/.ssh/id_ecdsa</a></u>, <u><a href="file:~/.ssh/id_rsa">~/.ssh/id_rsa</a></u> and
           <u><a href="file:~/.ssh/id_dsa">~/.ssh/id_dsa</a></u>.  Libssh  expands  some  "%"-sequences  in  "FILENAME",  see  "Path  expansion"  below.
           "FILENAME" must expand to an absolute path.

           You can give this parameter multiple times.

       <b>known-hosts=</b>FILENAME
           Set  name  of  the  file  which  records  the identity of previously seen hosts.  Libssh expands some
           "%"-sequences in "FILENAME", see "Path expansion" below.  "FILENAME" must expand to an absolute path.

           The default is to check <u><a href="file:~/.ssh/known_hosts">~/.ssh/known_hosts</a></u> followed by <u>/etc/ssh/ssh_known_hosts</u>.

       <b>password=</b>PASSWORD
           Set the password to use when connecting to the remote server.

           Note that passing this on the command line is not secure on shared machines.

       <b>password=-</b>
           Ask for the password (interactively) when nbdkit starts up.

       <b>password=+</b>FILENAME
           Read the password from the named file.  This is a secure method to supply a password, as long as  you
           set the permissions on the file appropriately.

       <b>password=-</b>FD
           Read  the  password  from  file descriptor number "FD", inherited from the parent process when nbdkit
           starts up.  This is also a secure method to supply a password.

       [<b>path=</b>]PATH
           Specify the path to the remote file.  This can be a relative path in which case it is relative to the
           remote home directory.

           This parameter is required.

           "path=" is a magic config key and may be omitted in most cases.  See "Magic parameters" in <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1).

       <b>port=</b>PORT
           Specify the SSH protocol port name or number.

           This parameter is optional.  If not given then the default ssh port is used.

       <b>timeout=</b>SECS
           Set the SSH connection timeout in seconds.

       <b>user=</b>USER
           Specify the remote username.

           This parameter is optional.  If not given then the local username is used.

       <b>verify-remote-host=true</b>
       <b>verify-remote-host=false</b>
           Set whether or not we verify the remote host is one we have previously seen, using a local file  such
           as  <u><a href="file:~/.ssh/known_hosts">~/.ssh/known_hosts</a></u>.  The default is "true", meaning that we verify the remote host’s identity has
           not changed.

           Setting this to "false" is dangerous because it  allows  a  Man-In-The-Middle  (MITM)  attack  to  be
           conducted against you.

</pre><h4><b>NOTES</b></h4><pre>
   <b>Known</b> <b>hosts</b>
       The  SSH  server’s  host  key is checked at connection time, and must be present and correct in the local
       "known hosts" file.

       If you have never connected to the SSH server before then the connection will usually fail.  You can:

       •   connect to the server first using <b><a href="../man1/ssh.1.html">ssh</a></b>(1) so you can manually accept the host key, or

       •   provide the host key in an alternate file which you specify using the "known-hosts" option, or

       •   set <u>verify-remote-host=false</u> on the command line.  This latter option is dangerous because it  allows
           a MITM attack to be conducted against you.

   <b>Supported</b> <b>authentication</b> <b>methods</b>
       This  plugin  supports  only the following authentication methods: "none", "publickey" or "password".  In
       particular note that "keyboard-interactive" is <u>not</u> supported.

   <b>SSH</b> <b>agent</b>
       There is no means for nbdkit to ask for the public key  passphrase  when  it  is  running  as  a  server.
       Therefore "publickey" authentication must be done in conjunction with <b><a href="../man1/ssh-agent.1.html">ssh-agent</a></b>(1).

   <b>Path</b> <b>expansion</b>
       In the "config", "identity" and "known-hosts" options, libssh expands some "%"-sequences.

       %d  The user’s SSH directory, usually <u><a href="file:~/.ssh">~/.ssh</a></u>

       %u  The local username.

       %l  The local hostname.

       %h  The remote hostname.

       %r  The remote username.

       %p  The SSH port number.

       "%%"
           In libssh &gt; 0.9.0 this expands to a single "%" character.  In earlier versions of libssh there was no
           way to escape a "%" character.

</pre><h4><b>DEBUG</b> <b>FLAGS</b></h4><pre>
   <b>-D</b> <b>ssh.log=[1..4]</b>
       Set  the  libssh  log  level  to  increasing  levels of verbosity.  Each level includes messages from the
       previous levels.  Currently the levels are:

       <b>1</b>   informational and warning messages

       <b>2</b>   SSH and SFTP protocol steps

       <b>3</b>   SSH and SFTP packets

       <b>4</b>   libssh functions

       Use level 2 to diagnose SSH protocol or server problems.  Levels  3  and  4  are  extremely  verbose  and
       probably only useful if you are debugging libssh itself.

       If  diagnosing  SSH  problems  it  is  also  useful  to  look at server-side logs, eg. <u>/var/log/secure</u> or
       "journalctl -u sshd"

</pre><h4><b>FILES</b></h4><pre>
       <u><a href="file:~/.ssh/config">~/.ssh/config</a></u>
       <u><a href="file:/etc/ssh/ssh_config">/etc/ssh/ssh_config</a></u>
           These are the default SSH config files which are read to get other  options.   You  can  change  this
           using the "config" option.

       <u><a href="file:~/.ssh/id_dsa">~/.ssh/id_dsa</a></u>
       <u><a href="file:~/.ssh/id_ecdsa">~/.ssh/id_ecdsa</a></u>
       <u><a href="file:~/.ssh/id_ed25519">~/.ssh/id_ed25519</a></u>
       <u><a href="file:~/.ssh/id_rsa">~/.ssh/id_rsa</a></u>
           These  are  some of the default private key (identify) files used by libssh.  You can prepend more to
           the list using the "identity" option.

       <u><a href="file:~/.ssh/known_hosts">~/.ssh/known_hosts</a></u>
       <u>/etc/ssh/ssh_known_hosts</u>
           These are the default SSH files recording the identity of previously seen hosts.  You can change this
           using the "known-hosts" option.

       <u>$plugindir/nbdkit-ssh-plugin.so</u>
           The plugin.

           Use "nbdkit --dump-config" to find the location of $plugindir.

</pre><h4><b>VERSION</b></h4><pre>
       "nbdkit-ssh-plugin" first appeared in nbdkit 1.12.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/nbdkit.1.html">nbdkit</a></b>(1), <b><a href="../man1/nbdkit-curl-plugin.1.html">nbdkit-curl-plugin</a></b>(1), <b><a href="../man1/nbdkit-extentlist-filter.1.html">nbdkit-extentlist-filter</a></b>(1), <b><a href="../man1/nbdkit-retry-filter.1.html">nbdkit-retry-filter</a></b>(1),  <b><a href="../man3/nbdkit-plugin.3.html">nbdkit-plugin</a></b>(3),
       <b><a href="../man1/ssh.1.html">ssh</a></b>(1), <b><a href="../man1/ssh-agent.1.html">ssh-agent</a></b>(1), https://libssh.org.

</pre><h4><b>AUTHORS</b></h4><pre>
       Richard W.M. Jones

       Parts derived from Pino Toscano’s qemu libssh driver.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Red Hat

</pre><h4><b>LICENSE</b></h4><pre>
       Redistribution  and  use in source and binary forms, with or without modification, are permitted provided
       that the following conditions are met:

       •   Redistributions of source code must retain the above copyright notice, this list  of  conditions  and
           the following disclaimer.

       •   Redistributions in binary form must reproduce the above copyright notice, this list of conditions and
           the following disclaimer in the documentation and/or other materials provided with the distribution.

       •   Neither  the  name  of  Red  Hat  nor the names of its contributors may be used to endorse or promote
           products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY RED HAT AND CONTRIBUTORS ''AS IS'' AND ANY EXPRESS  OR  IMPLIED  WARRANTIES,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL RED HAT OR CONTRIBUTORS BE LIABLE  FOR  ANY  DIRECT,  INDIRECT,
       INCIDENTAL,  SPECIAL,  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
       SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
       ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT  LIABILITY,  OR  TORT  (INCLUDING  NEGLIGENCE  OR
       OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGE.

nbdkit-1.42.2                                      2025-04-02                               <u><a href="../man1/nbdkit-ssh-plugin.1.html">nbdkit-ssh-plugin</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>