<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pdsh - issue commands to groups of hosts in parallel</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/pdsh">pdsh_2.34-3build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pdsh - issue commands to groups of hosts in parallel

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>pdsh</b> [<u>options</u>]... command

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pdsh</b> is a variant of the <a href="../man1/rsh.1.html">rsh</a>(1) command. Unlike <a href="../man1/rsh.1.html">rsh</a>(1), which runs commands on a single remote host, <b>pdsh</b>
       can  run  multiple  remote  commands  in parallel. <b>pdsh</b> uses a "sliding window" (or <u>fanout</u>) of threads to
       conserve resources on the initiating host while allowing some connections to time out.

       When <b>pdsh</b> receives SIGINT (ctrl-C), it lists the status of current threads. A second  SIGINT  within  one
       second  terminates  the  program.  Pending threads may be canceled by issuing ctrl-Z within one second of
       ctrl-C.  Pending threads are those that have not yet been initiated, or  are  still  in  the  process  of
       connecting to the remote host.

       If a remote command is not specified on the command line, <b>pdsh</b> runs interactively, prompting for commands
       and  executing  them  when terminated with a carriage return. In interactive mode, target nodes that time
       out on the first command are not contacted  for  subsequent  commands,  and  commands  prefixed  with  an
       exclamation point will be executed on the local system.

       The  core  functionality  of  <b>pdsh</b>  may  be supplemented by dynamically loadable modules. The modules may
       provide a new connection protocol (replacing the standard <a href="../man3/rcmd.3.html">rcmd</a>(3) protocol  used  by  <a href="../man1/rsh.1.html">rsh</a>(1)),  filtering
       options  (e.g. removing hosts that are "down" from the target list), and/or host selection options (e.g.,
       <u>-a</u> selects all hosts from a configuration file.). By default, <b>pdsh</b> must have at least one  "rcmd"  module
       loaded. See the <b>RCMD</b> <b>MODULES</b> section for more information.

</pre><h4><b>RCMD</b> <b>MODULES</b></h4><pre>
       The  method  by  which  <b>pdsh</b> runs commands on remote hosts may be selected at runtime using the <u>-R</u> option
       (See <u>OPTIONS</u> below).  This functionality is ultimately implemented via dynamically loadable modules,  and
       so  the list of available options may be different from installation to installation. A list of currently
       available rcmd modules is printed when using any of the <u>-h</u>, <u>-V</u>, or <u>-L</u> options. The  default  rcmd  module
       will also be displayed with the <u>-h</u> and <u>-V</u> options.

       A list of <u>rcmd</u> modules currently distributed with <b>pdsh</b> follows.

       rsh     Uses  an  internal,  thread-safe implementation of BSD <a href="../man3/rcmd.3.html">rcmd</a>(3) to run commands using the standard
               <a href="../man1/rsh.1.html">rsh</a>(1) protocol.

       exec    Executes an arbitrary command for each target host. The first of the <b>pdsh</b> remote arguments is the
               local command to  execute,  followed  by  any  further  arguments.  Some  simple  parameters  are
               substitued on the command line, including <u>%h</u> for the target hostname, <u>%u</u> for the remote username,
               and  <u>%n</u>  for the remote rank [0-n] (To get a literal <u>%</u> use <u>%%</u>).  For example, the following would
               duplicate using the <b>ssh</b> module to run <b><a href="../man1/hostname.1.html">hostname</a></b>(1) across the hosts foo[0-10]:

                  pdsh -R exec -w foo[0-10] ssh -x -l %u %h hostname

               and this command line would run <b><a href="../man1/grep.1.html">grep</a></b>(1) in parallel across the files console.foo[0-10]:

                  pdsh -R exec -w foo[0-10] grep BUG console.%h

       ssh     Uses a variant of <a href="../man3/popen.3.html">popen</a>(3) to run multiple copies of the <a href="../man1/ssh.1.html">ssh</a>(1) command.

       mrsh    This module uses the <a href="../man1/mrsh.1.html">mrsh</a>(1) protocol to execute jobs on remote hosts.  The mrsh protocol uses  a
               credential  based authentication, forgoing the need to allocate reserved ports. In other aspects,
               it acts just like rsh. Remote nodes must be running <a href="../man8/mrshd.8.html">mrshd</a>(8) in order  for  the  mrsh  module  to
               work.

       krb4    The  krb4  module  allows users to execute remote commands after authenticating with kerberos. Of
               course, the remote rshd daemons must be kerberized.

       xcpu    The xcpu module uses the xcpu service to execute remote commands.

</pre><h4><b>OPTIONS</b></h4><pre>
       The list of available options is determined at runtime by supplementing the list of standard <b>pdsh</b> options
       with any options provided by loaded <u>rcmd</u> and <u>misc</u> modules.  In some cases, options  provided  by  modules
       may  conflict  with  each other. In these cases, the modules are incompatible and the first module loaded
       wins.

</pre><h4><b>Standard</b> <b>target</b> <b>nodelist</b> <b>options</b></h4><pre>
       <b>-w</b> <u>TARGETS,...</u>
              Target and or filter the specified list of hosts. Do not use with any other node selection options
              (e.g. <u>-a</u>, <u>-g</u>, if they  are  available).  No  spaces  are  allowed  in  the  comma-separated  list.
              Arguments  in  the <u>TARGETS</u> list may include normal host names, a range of hosts in hostlist format
              (See <b>HOSTLIST</b> <b>EXPRESSIONS</b>), or a single `-' character to read the list of hosts on stdin.

              If a host or hostlist is preceded by a `-' character, this causes those  hosts  to  be  explicitly
              excluded.  If  the  argument  is preceded by a single `^' character, it is taken to be the path to
              file containing a list of hosts, one per line. If the item begins with  a  `/'  character,  it  is
              taken   as a regular expression on which to filter the list of hosts (a regex argument may also be
              optionally trailed by another '/', e.g.  /node.*/). A regex or file  name  argument  may  also  be
              preceeded by a minus `-' to exclude instead of include thoses hosts.

              A  list  of  hosts  may  also  be  preceded by "user@" to specify a remote username other than the
              default, or "rcmd_type:" to specify an alternate rcmd connection type for these hosts.  When  used
              together,  the  rcmd type must be specified first, e.g. "ssh:user1@host0" would use ssh to connect
              to host0 as user "user1."

       <b>-x</b> <u>host,host,...</u>
              Exclude the specified hosts. May be specified in conjunction with other target node  list  options
              such  as  <u>-a</u>  and  <u>-g</u>  (when available). Hostlists may also be specified to the <u>-x</u> option (see the
              <b>HOSTLIST</b> <b>EXPRESSIONS</b> section below). Arguments to <u>-x</u> may also be preceeded by the  filename  (`^')
              and  regex  ('/') characters as described above, in which case the resulting hosts are excluded as
              if they had been given to <b>-w</b> and preceeded with the minus `-' character.

</pre><h4><b>Standard</b> <b>pdsh</b> <b>options</b></h4><pre>
       <u>-S</u>     Return the largest of the remote command return values.

       <u>-h</u>     Output usage menu and quit. A list of available rcmd modules will also be printed at  the  end  of
              the usage message.

       <u>-s</u>     Only on AIX, separate remote command stderr and stdout into two sockets.

       <u>-q</u>     List option values and the target nodelist and exit without action.

       <u>-b</u>     Disable ctrl-C status feature so that a single ctrl-C kills parallel job. (Batch Mode)

       <u>-l</u> <u>user</u>
              This  option may be used to run remote commands as another user, subject to authorization. For BSD
              rcmd, this means the invoking user and system must be listed in the userÂ´s .rhosts file (even  for
              root).

       <u>-t</u> <u>seconds</u>
              Set  the  connect  timeout.  Default  is  10  seconds.   This  option  may  also  be  set  via the
              PDSH_CONNECT_TIMEOUT environment variable.

       <u>-u</u> <u>seconds</u>
              Set a limit on the amount of time a remote command is allowed to execute.  Default  is  no  limit.
              See  note  in  LIMITATIONS  if  using  <u>-u</u>  with  ssh.   This  option  may  also  be  set  via  the
              PDSH_COMMAND_TIMEOUT environment variable.

       <u>-f</u> <u>number</u>
              Set the maximum number of simultaneous remote commands to <u>number</u>.  The default is 32.

       <u>-R</u> <u>name</u>
              Set rcmd module to <u>name</u>. This option may also be set via the PDSH_RCMD_TYPE environment  variable.
              A  list of available rcmd modules may be obtained via the <u>-h</u>, <u>-V</u>, or <u>-L</u> options.  The default will
              be listed with <u>-h</u> or <u>-V.</u>

       <u>-M</u> <u>name,...</u>
              When multiple <b>misc</b> modules provide the same options to <b>pdsh</b>, the first module  initialized  "wins"
              and  subsequent  modules  are  not loaded.  The <u>-M</u> option allows a list of modules to be specified
              that will be force-initialized before all  others,  in-effect  ensuring  that  they  load  without
              conflict   (unless   they  conflict  with  eachother).  This  option  may  also  be  set  via  the
              PDSH_MISC_MODULES environment variable.

       <u>-L</u>     List info on all loaded <b>pdsh</b> modules and quit.

       <u>-N</u>     Disable hostname: prefix on lines of output.

       <u>-d</u>     Include more complete thread status when SIGINT is received, and display connect and command  time
              statistics on stderr when done.

       <u>-V</u>     Output <b>pdsh</b> version information, along with list of currently loaded modules, and exit.

</pre><h4><b>machines</b> <b>module</b> <b>options</b></h4><pre>
       <u>-a</u>     Target all nodes from machines file.

</pre><h4><b>genders</b> <b>module</b> <b>options</b></h4><pre>
       In addition to the genders options presented below, the genders attribute pdsh_rcmd_type may also be used
       in  the  genders  database to specify an alternate rcmd connect type than the pdsh default for hosts with
       this attribute. For example, the following line in the genders file

         host0 pdsh_rcmd_type=ssh

       would cause <b>pdsh</b> to use ssh to connect to host0, even if rsh were the default.  This can be overridden on
       the commandline with the "rcmd_type:host0" syntax.

       <u>-A</u>     Target all nodes in genders database. The <u>-A</u> option will target every host listed in genders -- if
              you want to omit some hosts by default, see the <u>-a</u> option below.

       <u>-a</u>     Target all nodes in genders database except those with  the  "pdsh_all_skip"  attribute.  This  is
              shorthand for running "pdsh -A -X pdsh_all_skip ..."

       <u>-g</u> <u>attr[=val][,attr[=val],...]</u>
              Target  nodes that match any of the specified genders attributes (with optional values). Conflicts
              with the <u>-a</u> option. If used in combination with other node  selection  options  like  <u>-w</u>,  the  <u>-g</u>
              option  will  select  from  the  supplied  node list, instead of from the genders file as a whole.
              Otherwise, This option targets the alternate hostnames in the genders database by default. The  <u>-i</u>
              option  provided  by  the  genders  module may be used to translate these to the canonical genders
              hostnames. If the installed version of genders supports it, attributes supplied  to  <u>-g</u>  may  also
              take  the  form of genders <b>queries</b>. Genders <b>queries</b> will query the genders database for the union,
              intersection, difference, or complement of genders attributes and values.  The set operation union
              is represented by  two  pipe  symbols  ('||'),  intersection  by  two  ampersand  symbols  ('&amp;&amp;'),
              difference  by two minus symbols ('--'), and complement by a tilde ('~').  Parentheses may be used
              to change the order of operations. See the <a href="../man1/nodeattr.1.html">nodeattr</a>(1) manpage for examples of genders <b>queries</b>.

       <u>-X</u> <u>attr[=val][,attr[=val],...]</u>
              Exclude nodes that match any of the specified genders attributes (optionally with  values).   This
              option  may  be used in combination with any other of the node selection options (e.g. <u>-w</u>, <u>-g</u>, <u>-a</u>,
              <u>-X</u> may also take the form of genders <b>queries</b>. Please see documentation for the genders  <u>-g</u>  option
              for more information about genders <b>queries</b>.

       <u>-i</u>     Request translation between canonical and alternate hostnames.

       <u>-F</u> <u>filename</u>
              Read  genders  information  from  <u>filename</u> instead of the system default genders file. If <u>filename</u>
              doesn't specify an absolute path then it is taken to be relative to the directory specified by the
              <u>PDSH_GENDERS_DIR</u> environment variable (<a href="file:/etc">/etc</a> by default). An alternate genders  file  may  also  be
              specified via the <u>PDSH_GENDERS_FILE</u> environment variable.

</pre><h4><b>nodeupdown</b> <b>module</b> <b>options</b></h4><pre>
       <u>-v</u>     Eliminate target nodes that are considered "down" by libnodeupdown.

</pre><h4><b>slurm</b> <b>module</b> <b>options</b></h4><pre>
       The  <b>slurm</b>  <u>module</u> <u>allows</u> <b>pdsh</b> to target nodes based on currently running SLURM jobs. The <b>slurm</b> module is
       typically called after all other node selection options have been processed, and if no  nodes  have  been
       selected,  the  module  will  attempt  to  read a running jobid from the SLURM_JOBID environment variable
       (which is set when running under a SLURM allocation). If SLURM_JOBID references an invalid job,  it  will
       be silently ignored.

       <u>-j</u> <u>jobid[,jobid,...]</u>
              Target  list  of nodes allocated to the SLURM job <u>jobid</u>. This option may be used multiple times to
              target multiple SLURM jobs. The special argument "all" can be used to  target  all  nodes  running
              SLURM jobs, e.g.  <u>-j</u> <u>all</u>.

       <u>-P</u> <u>partition[,partition,...]</u>
              Target  list  of  nodes  containing  in  the  SLURM  partition <u>partition</u>.  This option may be used
              multiple times to target multiple SLURM partitions and/or partitions may  be  given  in  a  comma-
              delimited list.

</pre><h4><b>torque</b> <b>module</b> <b>options</b></h4><pre>
       The  <b>torque</b> <u>module</u> <u>allows</u> <b>pdsh</b> to target nodes based on currently running Torque/PBS jobs. Similar to the
       slurm module, the <b>torque</b> module is typically called after all other  node  selection  options  have  been
       processed,  and  if no nodes have been selected, the module will attempt to read a running jobid from the
       PBS_JOBID environment variable (which is set when running under a Torque allocation).

       <u>-j</u> <u>jobid[,jobid,...]</u>
              Target list of nodes allocated to the Torque job <u>jobid</u>. This option may be used multiple times  to
              target multiple Torque jobs.

</pre><h4><b>dshgroup</b> <b>module</b> <b>options</b></h4><pre>
       The  dshgroup module allows pdsh to use dsh (or Dancer's shell) style group files from /etc/dsh/group/ or
       <a href="file:~/.dsh/group/.">~/.dsh/group/.</a> The default search path may be overridden with the DSHGROUP_PATH environment  variable,  a
       colon-separated list of directories to search. The default value for DSHGROUP_PATH is /etc/dsh/group.

       <u>-g</u> <u>groupname,...</u>
              Target   nodes   in   dsh  group  file  "groupname"  found  in  either  <a href="file:~/.dsh/group/groupname">~/.dsh/group/groupname</a>  or
              /etc/dsh/group/groupname.

       <u>-X</u> <u>groupname,...</u>
              Exclude nodes in dsh group file "groupname."

       As an enhancement in <b>pdsh</b>, dshgroup files may optionally include  other  dshgroup  files  via  a  special
       <u>#include</u>  <u>STRING</u>  syntax.   The argument to <u>#include</u> may be either a file path, or a group name, in which
       case the path used to search for the group file is the same as if the group had been specified to <u>-g</u>.

</pre><h4><b>netgroup</b> <b>module</b> <b>options</b></h4><pre>
       The netgroup module allows pdsh to use  standard  netgroup  entries  to  build  lists  of  target  hosts.
       (/etc/netgroup or NIS)

       <u>-g</u> <u>groupname,...</u>
              Target nodes in netgroup "groupname."

       <u>-X</u> <u>groupname,...</u>
              Exclude nodes in netgroup "groupname."

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       PDSH_RCMD_TYPE
              Equivalent  to  the  <u>-R</u>  option,  the  value  of this environment variable will be used to set the
              default rcmd module for pdsh to use (e.g. ssh, rsh).

       PDSH_SSH_ARGS
              Override the standard arguments that <b>pdsh</b> passes to the <a href="../man1/ssh.1.html">ssh</a>(1) command ("-2 -a -x -l%u  %h").  The
              use  of  the parameters <b>%u</b>, <b>%h</b>, and <b>%n</b> (as documented in the <b>rcmd/exec</b> section above) is optional.
              If these parameters are missing, <b>pdsh</b> will append them  to  the  ssh  commandline  because  it  is
              assumed they are mandatory.

       PDSH_SSH_ARGS_APPEND
              Append   additional   options   to   the   <a href="../man1/ssh.1.html">ssh</a>(1)   command   invoked   by   <b>pdsh</b>.   For  example,
              PDSH_SSH_ARGS_APPEND="-q" would run ssh in quiet mode, or "-v" would  increase  the  verbosity  of
              ssh.  (Note:  these  arguments are actually prepended to the ssh commandline to ensure they appear
              before any target hostname argument to ssh.)

       WCOLL  If no other node selection option is used, the WCOLL environment variable may be set to a filename
              from which a list of target hosts will be read. The file should contain a list of hosts,  one  per
              line  (though  each  line  may  contain  a  hostlist expression.  See <u>HOSTLIST</u> <u>EXPRESSIONS</u> section
              below).

       DSHPATH
              If set, the path in DSHPATH will be used as the PATH for the remote processes.

       FANOUT Set the <b>pdsh</b> fanout (See description of <u>-f</u> above).

</pre><h4><b>HOSTLIST</b> <b>EXPRESSIONS</b></h4><pre>
       As noted in sections above <b>pdsh</b> accepts lists of hosts the general form: prefix[n-m,l-k,...], where n &lt; m
       and l &lt; k, etc., as an alternative to explicit lists of hosts. This form  should  not  be  confused  with
       regular expression character classes (also denoted by ``[]''). For example, foo[19] does not represent an
       expression matching foo1 or foo9, but rather represents the degenerate hostlist: foo19.

       The  hostlist  syntax is meant only as a convenience on clusters with a "prefixNNN" naming convention and
       specification of ranges should not be considered necessary -- the list foo1,foo9 could  be  specified  as
       such, or by the hostlist foo[1,9].

       Some examples of usage follow:

       Run command on foo01,foo02,...,foo05
           pdsh -w foo[01-05] command

       Run command on foo7,foo9,foo10
            pdsh -w foo[7,9-10] command

       Run command on foo0,foo4,foo5
            pdsh -w foo[0-5] -x foo[1-3] command

       A suffix on the hostname is also supported:

       Run command on foo0-eth0,foo1-eth0,foo2-eth0,foo3-eth0
          pdsh -w foo[0-3]-eth0 command

       As  a  reminder  to  the  reader, some shells will interpret brackets ('[' and ']') for pattern matching.
       Depending on your shell, it may be necessary to enclose ranged lists  within  quotes.   For  example,  in
       tcsh, the first example above should be executed as:

            pdsh -w "foo[01-05]" command

</pre><h4><b>ORIGIN</b></h4><pre>
       Originally  a  rewrite of IBM <a href="../man1/dsh.1.html">dsh</a>(1) by Jim Garlick &lt;<a href="mailto:garlick@llnl.gov">garlick@llnl.gov</a>&gt; on LLNL's ASCI Blue-Pacific IBM SP
       system. It is now used on Linux clusters at LLNL.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       When using <b>ssh</b> for remote execution, expect the stderr of ssh to be folded in with  that  of  the  remote
       command.  When  invoked  by  <b>pdsh</b>, it is not possible for <b>ssh</b> to prompt for passwords if RSA/DSA keys are
       configured properly, etc..  For <b>ssh</b> implementations that suppport a connect timeout option, <b>pdsh</b> attempts
       to use that option to enforce the  timeout  (e.g.  -oConnectTimeout=T  for  OpenSSH),  otherwise  connect
       timeouts  are  not  supported  when using <b>ssh</b>.  Finally, there is no reliable way for <b>pdsh</b> to ensure that
       remote commands are actually terminated when using a command  timeout.  Thus  if  <u>-u</u>  is  used  with  <b>ssh</b>
       commands may be left running on remote hosts even after timeout has killed local <b>ssh</b> processes.

       The  number of nodes that <b>pdsh</b> can simultaneously execute remote jobs on is limited by the maximum number
       of threads that can be created concurrently, as well as the availability of reserved  ports  in  the  rsh
       module.  On  systems  that  implement  Posix  threads,  the  limit  is  typically defined by the constant
       PTHREADS_THREADS_MAX.

</pre><h4><b>FILES</b></h4><pre>
</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/rsh.1.html">rsh</a>(1), <a href="../man1/ssh.1.html">ssh</a>(1), <a href="../man1/dshbak.1.html">dshbak</a>(1), <a href="../man1/pdcp.1.html">pdcp</a>(1)

                                                    linux-gnu                                            <u><a href="../man1/pdsh.1.html">pdsh</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>