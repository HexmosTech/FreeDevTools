<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v.out.postgis  - Exports a vector map layer to PostGIS feature table.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/grass-doc">grass-doc_8.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>v.out.postgis</b>  - Exports a vector map layer to PostGIS feature table.

</pre><h4><b>KEYWORDS</b></h4><pre>
       vector, export, output, PostGIS, simple features, topology, 3D

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>v.out.postgis</b>
       <b>v.out.postgis</b> <b>--help</b>
       <b>v.out.postgis</b>    [-<b>tl2</b>]    <b>input</b>=<u>name</u>     [<b>type</b>=<u>string</u>[,<u>string</u>,...]]      [<b>layer</b>=<u>string</u>]    <b>output</b>=<u>string</u>
       [<b>output_layer</b>=<u>name</u>]   [<b>output_link</b>=<u>name</u>]   [<b>options</b>=<u>key=value</u>[,<u>key=value</u>,...]]   [--<b>overwrite</b>]   [--<b>help</b>]
       [--<b>verbose</b>]  [--<b>quiet</b>]  [--<b>ui</b>]

   <b>Flags:</b>
       <b>-t</b>
           Do not export attribute table

       <b>-l</b>
           Export PostGIS topology instead of simple features

       <b>-2</b>
           Force 2D output even if input is 3D
           Useful if input is 3D but all z coordinates are identical

       <b>--overwrite</b>
           Allow output files to overwrite existing files

       <b>--help</b>
           Print usage summary

       <b>--verbose</b>
           Verbose module output

       <b>--quiet</b>
           Quiet module output

       <b>--ui</b>
           Force launching GUI dialog

   <b>Parameters:</b>
       <b>input</b>=<u>name</u> <b>[required]</b>
           Name of input vector map

       <b>type</b>=<u>string[,string</u>,...]
           Input feature type
           Options: <u>point,</u> <u>line,</u> <u>boundary,</u> <u>centroid,</u> <u>area,</u> <u>face,</u> <u>kernel,</u> <u>auto</u>
           Default: <u>auto</u>

       <b>layer</b>=<u>string</u>
           Layer number or name
           Default: <u>1</u>

       <b>output</b>=<u>string</u> <b>[required]</b>
           Name for output PostGIS datasource
           Starts with ’PG’ prefix, eg. ’PG:dbname=grass’

       <b>output_layer</b>=<u>name</u>
           Name for output PostGIS layer
           If not specified, input name is used

       <b>output_link</b>=<u>name</u>
           Name for output vector map defined as a link to the PostGIS feature table
           If  not  specified,  the  vector  link  is  not  created.  The  link  can be also manually created by
           ’v.external’ module.

       <b>options</b>=<u>key=value[,key=value</u>,...]
           Creation options
           Examples:
                   ’FID=cat’: define feature id column ’cat’
                   ’GEOMETRY_NAME=wkb_geometry’: define geometry column ’wkb_geometry’
                   ’SPATIAL_INDEX=NO’: do not create spatial index on geometry column

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>v.out.postgis</u> exports an existing GRASS vector map layer  to  PostGIS  feature  table.  Features  without
       category are skipped.

       By  default  GRASS  GIS  topological  features are converted into simple features (see OGC Simple Feature
       Access specification for details). Flag <b>-l</b> allows to  export  vector  features  as  topological  elements
       stored in PostGIS Topology schema. Note that topological export requires PostGIS version 2 or later.

       Additional creation options can be defined by <b>options</b> parameter:

           •   FID=&lt;column&gt; - name of column which will be used as primary key (feature id), default: fid

           •   GEOMETRY_NAME=&lt;column&gt;  name  of  column  which will be used for storing geometry data in feature
               table, default: geom

           •   SPATIAL_INDEX=YES|NO - enable/disable creating spatial index on geometry column, default: YES

           •   PRIMARY_KEY=YES|NO - enable/disable adding primary key on FID column, default: YES

           •   SRID=&lt;value&gt; - spatial reference identifier, default: not defined
       PostGIS Topology related options (relevant only for <b>-l</b> flag):

           •   TOPOSCHEMA_NAME=&lt;schema name&gt; - name of PostGIS Topology schema, default: topo_&lt;input&gt;

           •   TOPOGEOM_NAME=&lt;column&gt; - name of column which will be  used  for  storing  topogeometry  data  in
               feature table, default: topo

           •   TOPO_TOLERANCE=&lt;value&gt;  -  tolerance for PostGIS Topology schema, see CreateTopology function for
               details, default: 0

           •   TOPO_GEO_ONLY=YES|NO - store in PostGIS Topology schema  only  data  relevant  to  Topo-Geo  data
               model, default: NO

       Creation  <b>options</b>  are  comma-separated  pairs  (key=value),  the options are case-insensitive. Note that
       <b>options</b> defined by <u>v.external.out</u> are ignored by <u>v.out.postgis</u>.

       <u>v.out.postgis</u> optionally also creates a new vector map in the current mapset if <b>output_link</b> is defined.

</pre><h4><b>NOTES</b></h4><pre>
       By default <u>v.out.postgis</u> exports vector data as <u>simple</u> <u>features</u>, ie. boundaries  and  centroids  (forming
       topological  areas) become polygons, isles become holes. Geometry of simple feature elements is stored in
       PostGIS feature table in the column named  "geom".  Name  of  the  geometry  column  can  be  changed  by
       <b>options=</b>GEOMETRY_NAME=&lt;column&gt;.  Note  that  for  exporting  vector  features  as  simple features can be
       alternatively used PostgreSQL driver from OGR library through <u>v.out.ogr</u> module.

       Also note that it’s allowed to store in the feature table only features of the same type, ie.  mixing  of
       points  and lines is not currently possible. The feature type is determined for output feature table from
       the first vector feature accessing data sequentially (<b>type=auto</b>). Vector  features  of  other  types  are
       during  export  skipped.  User  can choose preferable feature type by <b>type</b> parameter. Only single type is
       currently allowed (see TODO section for details).

       <u>v.out.postgis</u> currently supports only three basic output simple feature types:  Points,  Linestrings  and
       Polygons.  Also  3D  features of the same type are supported, eg. 3D points are exported as PointZ simple
       feature. Faces are exported as 3D polygons. 3D features are written to the output automatically if  input
       vector  map is 3D. If <b>-2</b> flag is given then the output is always 2D (z-coordinate is silently ignored for
       3D input vector maps).

       Multigeometries are not currently supported. Features with the same category  are  exported  as  multiple
       single features.

       <u>v.out.postgis</u>  also  allows exporting vector features as <u>topological</u> <u>elements</u> in PostGIS Topology schema.
       PostGIS Topology extension uses three tables to store basic topological elements which forms  topological
       objects  like  areas or isles in GRASS terminology. <u>Nodes</u> (0-dimensional topological elements) are stored
       in "node" table, <u>edges</u> (1-dimensional elements) in "edge" table and  <u>faces</u>  (2-dimensional  elements)  in
       "face" table.

           •   GRASS nodes are stored in <u>node</u> table

           •   GRASS points are stored in <u>node</u> table as regular nodes

           •   GRASS  centroids  are  stored in <u>node</u> table as regular nodes ("containing_face" refers to related
               area)

           •   GRASS lines are stored in <u>edge</u> table

           •   GRASS boundaries are stored in <u>edge</u> table

           •   GRASS areas are stored in <u>face</u> table
       Tables <u>node</u>, <u>edge</u> and <u>face</u> are stored in given topological schema. By default <u>v.out.postgis</u>  defines  its
       name   as   topo_&lt;input&gt;.   Alternatively,   the   name   for   topology   schema   can   be  defined  by
       <b>options=</b>TOPOSCHEMA_NAME=&lt;name&gt;.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Export</b> <b>Simple</b> <b>Features</b>
       Export vector map "urbanarea" as feature table "urbanarea" located in database "grass", schema  "public".
       Note that this database schema is automatically used when not defined by the user.
       v.out.postgis input=urbanarea output="PG:dbname=grass"
       GRASS areas are converted into polygons, isles into holes. We can check the number or created polygons by
       simple SQL query below.
       db.select driver=pg database=grass \
        sql="SELECT ST_GeometryType(geom) as geom_type, count(*) from urbanarea group by geom_type"
       geom_type|count
       ST_Polygon|657
       <u>Note:</u> same procedure can be done by <u>v.out.ogr</u> module, eg.
       v.out.ogr input=urbanarea output="PG:dbname=grass" format=PostgreSQL
       In  this  case  GRASS  vector  data  are  exported  to  PostGIS  database using OGR library, namely using
       PostgreSQL driver. Contrary to the  <u>v.out.ogr</u>  module,  <u>v.out.postgis</u>  is  using  directly  PostGIS  data
       provider  which  is  part  of  GRASS  vector engine. Besides that, <u>v.out.postgis</u> is optimized for PostGIS
       export including topological access to the data.

   <b>Export</b> <b>data</b> <b>into</b> <b>specific</b> <b>database</b> <b>schema</b>
       Database schema for storing exported data can be defined by <b>output_layer</b>  as  &lt;schema_name&gt;.&lt;table_name&gt;.
       If the specified schema doesn’t exist in the database, then it’s automatically created.

       Export vector map "bridges" as feature table in database schema "grassout".
       v.out.postgis input=bridges output="PG:dbname=grass" output_layer=grassout.bridges

   <b>Export</b> <b>data</b> <b>with</b> <b>creation</b> <b>options</b>
       Example  below  demonstrates  how  to define name for geometry column and disable building spatial index.
       Spatial reference system is defined by srid identifier which corresponds in  this  case  with  EPSG  3358
       (North Carolina dataset).
       v.out.postgis input=roadsmajor output="PG:dbname=grass" options="GEOMETRY_NAME=wkb_geometry,SPATIAL_INDEX=NO,SRID=3358"

   <b>Link</b> <b>exported</b> <b>data</b>
       Exported  data  can  be  linked  as  vector  map  created in the current mapset by specifying <b>output_link</b>
       parameter. In the example below vector map "busstopsall" from PERMANENT mapset is exported  into  "grass"
       PostGIS  database.  <u>v.out.postgis</u> after successful export also creates in the current mapset GRASS vector
       map as a link to the PostGIS feature table.
       v.out.postgis input=busstopsall@PERMANENT output="PG:dbname=grass" output_link=busstopsall_pg
       Created link can be checked by <u>v.info</u>:
        v.info busstopsall_pg
       ...
        |----------------------------------------------------------------------------|
        | Map format:      PostGIS (PostgreSQL)                                      |
        | DB table:        public.busstopsall                                        |
        | DB name:         grass                                                     |
        | Geometry column: geom                                                      |
        | Feature type:    point                                                     |
        | Topology:        pseudo (simple features)                                  |
        |----------------------------------------------------------------------------|
       ...

   <b>Export</b> <b>data</b> <b>without</b> <b>attributes</b>
       <u>v.out.postgis</u> allows ignoring attributes when exporting vector features by specifying <b>-t</b>  flag.   Command
       below  exports vector features without attributes. The feature will contain only two columns, the fid and
       geometry column.
       v.out.postgis -t input=railroads output="PG:dbname=grass"

   <b>Export</b> <b>topological</b> <b>data</b>
       By default <u>v.out.postgis</u> exports data as simple features. Flag <b>-l</b> allows exporting  data  as  topological
       elements instead of simple features. Export topological elements is stored in PostGIS Topology schema.
       v.out.postgis -l input=busroutesall output="PG:dbname=grass"
       For more info about PostGIS Topology implementation in GRASS see the wiki page.

</pre><h4><b>TODO</b></h4><pre>
           •   Multi-feature export

           •   Allow mixed features (points, lines)

           •   Support other simple feature types like GeometryCollection and others

           •   Implement missing options from <u>v.out.ogr</u>: <b>-a</b>, <b>-s</b>, <b>-c</b>, <b>-p</b>, <b>-n</b>

           •   Add options: <b>cats</b>, <b>where</b>

</pre><h4><b>REQUIREMENTS</b></h4><pre>
           •   PostGIS 2.x or later for topological export (flag <b>-l</b>)

</pre><h4><b>REFERENCES</b></h4><pre>
           •   OGC Simple Feature Access specification

           •   PostGIS Topology documentation

           •   GRASS-PostGIS data provider

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <u>v.out.ogr,</u> <u>v.external,</u> <u>v.external.out,</u> <u>v.in.ogr</u>

       See also PostGIS and PostGIS Topology wiki page from GRASS User Wiki.

</pre><h4><b>AUTHOR</b></h4><pre>
       Martin  Landa,  Czech Technical University in Prague, Czech Republic (development supported by Fondazione
       Edmund Mach and Comune di Trento, Italy)

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       Available at: v.out.postgis source code (history)

       Accessed: Friday Apr 04 01:20:29 2025

       Main index | Vector index | Topics index | Keywords index | Graphical index | Full index

       © 2003-2025 GRASS Development Team, GRASS GIS 8.4.1 Reference Manual

GRASS 8.4.1                                                                                <u><a href="../man1grass/v.out.postgis.1grass.html">v.out.postgis</a></u>(1grass)
</pre>
 </div>
</div></section>
</div>
</body>
</html>