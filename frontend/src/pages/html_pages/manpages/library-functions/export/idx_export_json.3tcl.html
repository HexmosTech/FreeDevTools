<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>doctools::idx::export::json - JSON export plugin</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       doctools::idx::export::json - JSON export plugin

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>doctools::idx::export::json</b> <b>?0.2?</b>

       package require <b>textutil::adjust</b>

       <b>export</b> <u>serial</u> <u>configuration</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This package implements the doctools keyword index export plugin for the generation of JSON markup.

       This is an internal package of doctools, for use by the higher level management packages handling keyword
       indices, especially <b>doctools::idx::export</b>, the export manager.

       Using  it  from a regular interpreter is possible, however only with contortions, and is not recommended.
       The proper way to use this functionality is through the  package  <b>doctools::idx::export</b>  and  the  export
       manager objects it provides.

</pre><h4><b>API</b></h4><pre>
       The API provided by this package satisfies the specification of the docidx export plugin API version 2.

       <b>export</b> <u>serial</u> <u>configuration</u>
              This command takes the canonical serialization of a keyword index, as specified in section <b>Keyword</b>
              <b>index</b>  <b>serialization</b>  <b>format</b>,  and  contained  in  <u>serial</u>,  the  <u>configuration</u>,  a dictionary, and
              generates JSON markup encoding the index.  The created string is then returned as  the  result  of
              the command.

</pre><h4><b>JSON</b> <b>NOTATION</b> <b>OF</b> <b>KEYWORD</b> <b>INDICES</b></h4><pre>
       The  JSON  format  used  for  keyword  indices is a direct translation of the <b>Keyword</b> <b>index</b> <b>serialization</b>
       <b>format</b>, mapping Tcl dictionaries as JSON objects and Tcl lists as JSON  arrays.   For  example,  the  Tcl
       serialization

              doctools::idx {
                label {Keyword Index}
                keywords {
                   changelog  {changelog.man cvs.man}
                   conversion {doctools.man docidx.man doctoc.man apps/dtplite.man mpexpand.man}
                   cvs        cvs.man
                }
                references {
                   apps/dtplite.man {manpage dtplite}
                   changelog.man    {manpage doctools::changelog}
                   cvs.man          {manpage doctools::cvs}
                   docidx.man       {manpage doctools::idx}
                   doctoc.man       {manpage doctools::toc}
                   doctools.man     {manpage doctools}
                   mpexpand.man     {manpage mpexpand}
                }
                title {}
              }

       is equivalent to the JSON string

              {
                  "doctools::idx" : {
                      "label"      : "Keyword Index",
                      "keywords"   : {
                          "changelog"  : ["changelog.man","cvs.man"],
                          "conversion" : ["doctools.man","docidx.man","doctoc.man","apps\/dtplite.man","mpexpand.man"],
                          "cvs"        : ["cvs.man"],
                      },
                      "references" : {
                          "apps\/dtplite.man" : ["manpage","dtplite"],
                          "changelog.man"     : ["manpage","doctools::changelog"],
                          "cvs.man"           : ["manpage","doctools::cvs"],
                          "docidx.man"        : ["manpage","doctools::idx"],
                          "doctoc.man"        : ["manpage","doctools::toc"],
                          "doctools.man"      : ["manpage","doctools"],
                          "mpexpand.man"      : ["manpage","mpexpand"]
                      },
                      "title"      : ""
                  }
              }

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The JSON export plugin recognizes the following configuration variables and changes its behaviour as they
       specify.

       boolean <u>indented</u>
              If  this  flag  is  set  the  plugin will break the generated JSON code across lines and indent it
              according to its inner structure, with each key of a dictionary on a separate line.

              If this flag is not set (the default), the whole JSON object will be written  on  a  single  line,
              with minimum spacing between all elements.

       boolean <u>aligned</u>
              If  this  flag  is  set  the  generator  ensures  that the values for the keys in a dictionary are
              vertically aligned with each other, for a nice table effect. To make this work this  also  implies
              that <b>indented</b> is set.

              If  this  flag  is  not  set  (the default), the output is formatted as per the value of <b>indented</b>,
              without trying to align the values for dictionary keys.

       <u>Note</u> that this plugin ignores the standard configuration variables <b>user</b>, <b>format</b>, <b>file</b>, and <b>map</b> and  their
       values.

</pre><h4><b>KEYWORD</b> <b>INDEX</b> <b>SERIALIZATION</b> <b>FORMAT</b></h4><pre>
       Here  we  specify  the  format used by the doctools v2 packages to serialize keyword indices as immutable
       values for transport, comparison, etc.

       We distinguish between <u>regular</u> and <u>canonical</u> serializations. While a keyword index may have more than one
       regular serialization only exactly one of them will be <u>canonical</u>.

       regular serialization

              [1]    An index serialization is a nested Tcl dictionary.

              [2]    This dictionary holds a single key, <b>doctools::idx</b>, and its  value.  This  value  holds  the
                     contents of the index.

              [3]    The contents of the index are a Tcl dictionary holding the title of the index, a label, and
                     the keywords and references. The relevant keys and their values are

                     <b>title</b>  The value is a string containing the title of the index.

                     <b>label</b>  The value is a string containing a label for the index.

                     <b>keywords</b>
                            The  value  is  a Tcl dictionary, using the keywords known to the index as keys. The
                            associated values are lists containing the identifiers of the references  associated
                            with that particular keyword.

                            Any reference identifier used in these lists has to exist as a key in the <b>references</b>
                            dictionary, see the next item for its definition.

                     <b>references</b>
                            The value is a Tcl dictionary, using the identifiers for the references known to the
                            index  as  keys.  The  associated values are 2-element lists containing the type and
                            label of the reference, in this order.

                            Any key here has to be associated with at least one keyword, i.e. occur in at  least
                            one  of  the  reference  lists  which are the values in the <b>keywords</b> dictionary, see
                            previous item for its definition.

              [4]    The <u>type</u> of a reference can be one of two values,

                     <b>manpage</b>
                            The identifier of the reference is interpreted as symbolic file name,  referring  to
                            one of the documents the index was made for.

                     <b>url</b>    The identifier of the reference is interpreted as an url, referring to some external
                            location, like a website, etc.

       canonical serialization
              The  canonical  serialization of a keyword index has the format as specified in the previous item,
              and then additionally satisfies the constraints below, which make it unique among all the possible
              serializations of the keyword index.

              [1]    The keys found in all the nested Tcl dictionaries are sorted in ascending dictionary order,
                     as generated by Tcl's builtin command <b>lsort</b> <b>-increasing</b> <b>-dict</b>.

              [2]    The references listed for each keyword of the  index,  if  any,  are  listed  in  ascending
                     dictionary  order  of their <u>labels</u>, as generated by Tcl's builtin command <b>lsort</b> <b>-increasing</b>
                     <b>-dict</b>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the  category  <u>doctools</u>  of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       JSON, doctools, export, index, serialization

</pre><h4><b>CATEGORY</b></h4><pre>
       Text formatter plugin

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2009-2019 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 0.2                     <u>doctools::idx::export::<a href="../man3tcl/json.3tcl.html">json</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>