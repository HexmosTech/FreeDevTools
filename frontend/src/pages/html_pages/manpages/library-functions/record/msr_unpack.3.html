<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>msr_unpack - Unpacking of Mini-SEED records.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmseed-doc">libmseed-doc_2.19.8-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       msr_unpack - Unpacking of Mini-SEED records.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libmseed.h&gt;</b>

       <b>int</b> <b>msr_unpack</b> <b>(</b> <b>char</b> <b>*</b><u>record</u><b>,</b> <b>int</b> <u>reclen</u><b>,</b> <b>MSRecord</b> <b>**</b><u>ppmsr</u><b>,</b>
                        <b>flag</b> <u>dataflag</u><b>,</b> <b>flag</b> <u>verbose</u> <b>);</b>

       <b>int</b> <b>msr_unpack_data</b> <b>(</b> <b>MSRecord</b> <b>*</b><u>msr</u><b>,</b> <b>int</b> <u>swapflag</u><b>,</b> <b>flag</b> <u>verbose</u> <b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>msr_unpack</b>  will  unpack  a  Mini-SEED  data  record  and  populate a MSRecord data structure, optionally
       unpacking data samples.  All multi-byte quantities will be byte-swapped to  the  host  byte  order.   The
       MSRecord data structure is described in <b><a href="../man3/ms_intro.3.html">ms_intro</a>(3)</b>.

       The <u>reclen</u> parameter specifies the length of the data record pointed to by <u>record</u> in bytes.

       If  the  <u>*ppmsr</u>  pointer  is  NULL a new MSRecord will be allocated, if not the existing MSRecord will be
       reinitialized and reused destroying any previous contents.  The <u>ppmsr</u> pointer itself must not be NULL.

       If the <u>dataflag</u> flag is not zero any data samples in  the  record  will  be  unpacked/decompressed.   The
       following  data encoding formats are supported: ASCII, INT16, INT32, FLOAT32, FLOAT64, STEIM1 and STEIM2.
       The MSRecord.datasamples pointer will be set appropriately and the samples will be either  ASCII,  32-bit
       integers,   32-bit   floats   or   64-bit   floats  with  the  same  byte  order  as  the  host  machine.
       MSRecord.numsamples  will   be   set   to   the   actual   number   of   samples   unpacked/decompressed.
       MSRecord.sampletype  will  indicated  the  sample  type as either 'a' (ASCII), 'i' (32-bit integers), 'f'
       (32-bit floats) or 'd' (64-bit doubles).  The size of each sample  type  in  bytes  is  returned  by  the
       <a href="../man3/get_samplesize.3.html">get_samplesize</a>(3) lookup routine.

       The <u>verbose</u> flag controls verbosity, a value of zero will result in no diagnostic output.

       <b>msr_unpack_data</b>  will  unpack the data samples for an already parsed MSRecord structure from the original
       record available at the <u>MSRecord-&gt;record</u> pointer.   Normally  this  is  called  by  <b>msr_unpack</b>  when  the
       <u>dataflag</u>  is not zero, but it can be useful when the program needs to first unpack the header of a record
       and decide later if the samples are needed.  If called independently the caller must  determine  if  byte
       swapping of data samples is needed.

</pre><h4><b>UNPACKING</b> <b>OVERRIDES</b></h4><pre>
       The following macros and environment variables effect the unpacking of Mini-SEED:

       Macros:
       MS_UNPACKHEADERBYTEORDER(X)
       MS_UNPACKDATABYTEORDER(X)
       MS_UNPACKDATAFORMAT(X)
       MS_UNPACKDATAFORMATFALLBACK(X)

       Environment variables:
       UNPACK_HEADER_BYTEORDER
       UNPACK_DATA_BYTEORDER
       UNPACK_DATA_FORMAT
       UNPACK_DATA_FORMAT_FALLBACK

       The  UNPACK_HEADER_BYTEORDER  and  UNPACK_DATA_BYTEORDER macros and variables force the byte order of the
       header and data respectively.  They could be set to either 0 (little endian)  or  1  (big  endian).   See
       <b><a href="../man3/ms_intro.3.html">ms_intro</a>(3)</b> for a description of how libmseed determines a records byte order.

       The  UNPACK_DATA_FORMAT  macro  and variable forces the encoding format, this should be set to any of the
       supported formats codes (i.e. 10 = Steim-1 compression).

       The UNPACK_DATA_FORMAT_FALLBACK macro and variable defines an encoding format that will be used when  the
       SEED  data  record  does  not indicate the format, i.e. the record does not include a 1000 blockette.  By
       default the fallback encoding format is 10 (Steim-1 compression).  If this default  is  invoked  and  the
       byte  order  of the data is unspecified big endian byte order will be assumed.  If a data record does not
       include a 1000 blockette it is not Mini-SEED, the capability to read these records is  included  only  to
       support legacy data.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  the successful parsing of a record <b>msr_unpack</b> returns MS_NOERROR and populates the MSRecord struct at
       *ppmsr.  On error <b>msr_unpack</b> returns a libmseed error code (defined in libmseed.h)

</pre><h4><b>EXAMPLE</b></h4><pre>
       Skeleton code for unpacking a Mini-SEED record with <a href="../man3/msr_unpack.3.html">msr_unpack</a>(3):

       main() {
         MSRecord *msr = NULL;
         char *record;
         int reclen;
         int retcode;

         record = recordptr;   /* pointer to Mini-SEED record */
         reclen = 4096;        /* 4096 byte record length */

         /* Unpack record header and data samples */
         retcode = msr_unpack (record, reclen, &amp;msr, 1, verbose);

         if ( retcode != MS_NOERROR )
           fprintf (stderr, "Error parsing record\n");
         else
           printf ("Unpacked %d samples0, msr-&gt;numsamples);

         /* Print record information */
         msr_print (msr, verbose);

         msr_free (&amp;msr);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ms_intro.3.html">ms_intro</a>(3)</b>, <b><a href="../man3/msr_pack.3.html">msr_pack</a>(3)</b> and <b><a href="../man3/msr_print.3.html">msr_print</a>(3)</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Chad Trabant
       IRIS Data Management Center

Libmseed API                                       2012/12/22                                      <u><a href="../man3/MSR_UNPACK.3.html">MSR_UNPACK</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>