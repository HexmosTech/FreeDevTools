<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmUnpackEventRecords, pmUnpackHighResEventRecords - unpack event records</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmUnpackEventRecords</b>, <b>pmUnpackHighResEventRecords</b> - unpack event records

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>

       <b>int</b> <b>pmUnpackEventRecords(pmValueSet</b> <b>*</b><u>vsp</u><b>,</b> <b>int</b> <u>idx</u><b>,</b> <b>pmResult</b> <b>***</b><u>rap</u><b>);</b>

       <b>int</b> <b>pmUnpackHighResEventRecords(pmValueSet</b> <b>*</b><u>vsp</u><b>,</b> <b>int</b> <u>idx</u><b>,</b> <b>pmHighResResult</b> <b>***</b><u>hrap</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Event  records are encoded as a packed array of records within a <u>pmResult</u> using a container metric with a
       value of type <b>PM_TYPE_EVENT</b> <b>,</b> and a <u>pmHighResResult</u> when using a metric of type <b>PM_TYPE_HIGHRES_EVENT</b>.

       <b>pmUnpackEventRecords</b> and <b>pmUnpackHighResEventRecords</b> may be used to unpack event records  from  a  metric
       value  identified  by <u>vsp</u> and <u>idx</u>.  If the metric has a singular value, <u>idx</u> should be 0, else the ordinal
       instance value identified by <u>idx</u> will be unpacked, i.e. vsp-&gt;vlist[idx].  The unpacked records are turned
       into either <u>pmResult</u> or <u>pmHighResResult</u> structures, one  per  event  record  and  one  metric  per  event
       parameter,  and  <u>rap</u>  is  returned  as a pointer to an array (NULL pointer terminated) of pointers to the
       result structures.

       The only difference between the two result types is the timestamp scale; the <u>pmHighResResult</u>  allows  for
       nanosecond precision, whereas <u>pmResult</u> allows for microsecond resolution.

       Some  control information from the packed event records is unpacked into additional ``anonymous'' metrics
       as follows:

       1.  If the event record has a non-zero flags value, then the corresponding <u>pmResult</u>/<u>pmHighResResult</u>  will
           have  the  flags  value  encoded with the additional metric <b>event.flags</b> that is inserted ahead of all
           other event parameters.

       2.  If   the   event   record   flag   is   set   to   <b>PM_EVENT_FLAG_MISSED</b>,   then   the   corresponding
           <u>pmResult</u>/<u>pmHighResResult</u>  will  have  one  metric <b>event.missed</b> with a value that equals the number of
           event records ``missed'' because either the PMDA could not keep up,  or  the  PMAPI  client  did  not
           collect the event records fast enough.

       <b>pmUnpackEventRecords</b>  returns  the  number  of <u>pmResult</u> structures as the return value, which is &gt;= 0 for
       success.  Similarly, <b>pmUnpackHighResEventRecords</b> returns the number of <u>pmHighResResult</u> structures as  the
       return value, which is &gt;= 0 for success.

       <u>rap</u>   and   the   associated   <u>pmResult</u>   structures   may   be  freed  using  the  convenience  function
       <b><a href="../man3/pmFreeEventResult.3.html">pmFreeEventResult</a></b>(3).

       Similarly, the <u>hrap</u> and the associated <u>pmHighResResult</u> structures may  be  freed  using  the  convenience
       function <b>pmFreeHighResEventResult</b>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The following errors are possible:

       PM_ERR_CONV
                 The  values associated with <u>vsp</u> are not encoded using the format PM_VAL_DPTR or PM_VAL_SPTR, or
                 the flags at the head of the event record has an unexpected value.

       PM_ERR_INST
                 The value associated with <u>vsp</u> is not singular as expected.

       PM_ERR_TYPE
                 <u>vsp</u> is not a value of type <b>PM_TYPE_EVENT</b>.

       PM_ERR_TOOSMALL
                 The value identified by <u>vsp</u> is not legal because the value length  is  less  than  the  minimum
                 size,    or    the    number    of    event    records    encoded   in   the   (value   header)
                 <u>pmEventArray</u>/<u>pmHighResEventArray</u> structure is negative, or the number of missed  event  records
                 in the array is negative.

       PM_ERR_TOOBIG
                 Either  <b>vsp</b>  indicates more than one value is present (all the event records are expected to be
                 packed in a single metric value), or when unpacking the event records, the processing continues
                 past the end of the enclosing value.  Indicates corruption of the packed event record.

       PM_ERR_TYPE
                 Event parameters must have one of the arithmetic types, else <b>PM_TYPE_AGGREGATE</b>,  <b>PM_TYPE_STRING</b>
                 or <b>PM_TYPE_AGGREGATE_STATIC</b>.

       other values &lt; 0
                 refer to <b><a href="../man3/pmErrStr.3.html">pmErrStr</a></b>(3).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3) and <b><a href="../man3/pmFreeEventResult.3.html">pmFreeEventResult</a></b>(3).

Performance Co-Pilot                                   PCP                               <u><a href="../man3/PMUNPACKEVENTRECORDS.3.html">PMUNPACKEVENTRECORDS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>