<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ms_find_reclen - Determine SEED record data length</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmseed-doc">libmseed-doc_2.19.8-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ms_find_reclen - Determine SEED record data length

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libmseed.h&gt;</b>

       <b>int</b>  <b>ms_find_reclen</b> <b>(</b> <b>const</b> <b>char</b> <b>*</b><u>recbuf</u><b>,</b> <b>int</b> <u>recbuflen</u><b>,</b>
                                   <b>FILE</b> <u>*fileptr</u> <b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ms_find_reclen</b>  verifies that the specified <u>recbuf</u> buffer contains a SEED data record by looking for data
       record signatures in the fixed section data header and determines the data record length by 1)  searching
       the  buffer  up  to  <u>recbuflen</u>  bytes  for  a Blockette 1000 and, failing that, 2) if <u>fileptr</u> is not NULL
       reading the next 48 bytes from the file and looking for a data record signature (with  detection  of  the
       next  data  record  implying  the  length  of the current record).  If data is read from <u>fileptr</u> the read
       position is returned to it's position prior to this function call.

       The MS_ISVALIDHEADER macro is used to verify that the buffer contains a valid  SEED  data  record.   When
       searching  for  the  next  record header to determine record length one of the macros MS_ISVALIDHEADER or
       MS_ISVALIDBLANK must test positively for a record to be detected.  Blank/noise records are records with a
       valid SEED sequence number followed by ASCII space characters to the end of the record.

       <b>ms_find_reclen</b> will return 0 when it detects that the buffer contains  a  SEED  data  record  but  cannot
       determine  the  record  length.   This happens when no Blockette 1000 is not found within <u>recbuflen</u> bytes
       and, assuming a valid <u>fileptr</u> is supplied, no record header is detected in the next 48 bytes of the file.
       The idea is to then read more data from the file (i.e. the next larger, valid  record  length)  and  call
       <b>ms_find_reclen</b> again and so on until the record length can be determined.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>ms_find_reclen</b> returns the length of the Mini-SEED record in bytes or 0 if a data record was detected but
       the length could not be determined or -1 when no data record was detected.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ms_readmsr.3.html">ms_readmsr</a>(3)</b>, <b><a href="../man3/ms_readtraces.3.html">ms_readtraces</a>(3)</b> and <b><a href="../man3/msr_unpack.3.html">msr_unpack</a>(3)</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Chad Trabant
       IRIS Data Management Center

Libmseed API                                       2006/11/08                                  <u><a href="../man3/MS_FIND_RECLEN.3.html">MS_FIND_RECLEN</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>