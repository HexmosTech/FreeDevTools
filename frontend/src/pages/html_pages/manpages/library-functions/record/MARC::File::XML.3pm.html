<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARC::File::XML - Work with MARC data encoded as XML</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmarc-xml-perl">libmarc-xml-perl_1.0.5-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MARC::File::XML - Work with MARC data encoded as XML

</pre><h4><b>SYNOPSIS</b></h4><pre>
           ## Loading with USE options
           use MARC::File::XML ( BinaryEncoding =&gt; 'utf8', RecordFormat =&gt; 'UNIMARC' );

           ## Setting the record format without USE options
           MARC::File::XML-&gt;default_record_format('USMARC');

           ## reading with MARC::Batch
           my $batch = MARC::Batch-&gt;new( 'XML', $filename );
           my $record = $batch-&gt;next();

           ## or reading with MARC::File::XML explicitly
           my $file = MARC::File::XML-&gt;in( $filename );
           my $record = $file-&gt;next();

           ## serialize a single MARC::Record object as XML
           print $record-&gt;as_xml();

           ## write a bunch of records to a file
           my $file = MARC::File::XML-&gt;out( 'myfile.xml' );
           $file-&gt;write( $record1 );
           $file-&gt;write( $record2 );
           $file-&gt;write( $record3 );
           $file-&gt;close();

           ## instead of writing to disk, get the xml directly
           my $xml = join( "\n",
               MARC::File::XML::header(),
               MARC::File::XML::record( $record1 ),
               MARC::File::XML::record( $record2 ),
               MARC::File::XML::footer()
           );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The MARC-XML distribution is an extension to the MARC-Record distribution for working with MARC21 data
       that is encoded as XML. The XML encoding used is the MARC21slim schema supplied by the Library of
       Congress. More information may be obtained here: <a href="http://www.loc.gov/standards/marcxml/">http://www.loc.gov/standards/marcxml/</a>

       You must have MARC::Record installed to use MARC::File::XML. In fact once you install the MARC-XML
       distribution you will most likely not use it directly, but will have an additional file format available
       to you when you use MARC::Batch.

       This version of MARC-XML supersedes an the versions ending with 0.25 which were used with the MARC.pm
       framework. MARC-XML now uses MARC::Record exclusively.

       If you have any questions or would like to contribute to this module please sign on to the perl4lib list.
       More information about perl4lib is available at &lt;<a href="http://perl4lib.perl.org">http://perl4lib.perl.org</a>&gt;.

</pre><h4><b>METHODS</b></h4><pre>
       When you use MARC::File::XML your MARC::Record objects will have two new additional methods available to
       them:

   <b>MARC::File::XML-&gt;default_record_format([$format])</b>
       Sets or returns the default record format used by MARC::File::XML.  Valid formats are <b>MARC21</b>, <b>USMARC</b>,
       <b>UNIMARC</b> and <b>UNIMARCAUTH</b>.

           MARC::File::XML-&gt;default_record_format('UNIMARC');

   <b>as_xml()</b>
       Returns a MARC::Record object serialized in XML. You can pass an optional format parameter to tell
       MARC::File::XML what type of record (USMARC, UNIMARC, UNIMARCAUTH) you are serializing.

           print $record-&gt;as_xml([$format]);

   <b>as_xml_record([$format])</b>
       Returns a MARC::Record object serialized in XML without a collection wrapper.  You can pass an optional
       format parameter to tell MARC::File::XML what type of record (USMARC, UNIMARC, UNIMARCAUTH) you are
       serializing.

           print $record-&gt;as_xml_record('UNIMARC');

   <b>new_from_xml([$encoding,</b> <b>$format])</b>
       If you have a chunk of XML and you want a record object for it you can use this method to generate a
       MARC::Record object.  You can pass an optional encoding parameter to specify which encoding (UTF-8 or
       MARC-8) you would like the resulting record to be in.  You can also pass a format parameter to specify
       the source record type, such as UNIMARC, UNIMARCAUTH, USMARC or MARC21.

           my $record = MARC::Record-&gt;new_from_xml( $xml, $encoding, $format );

       Note: only works for single record XML chunks.

       If you want to write records as XML to a file you can use <b>out()</b> with <b>write()</b> to serialize more than one
       record as XML.

   <b>out()</b>
       A constructor for creating a MARC::File::XML object that can write XML to a file. You must pass in the
       name of a file to write XML to.  If the $encoding parameter or the DefaultEncoding (see above) is set to
       UTF-8 then the binmode of the output file will be set appropriately.

           my $file = MARC::File::XML-&gt;out( $filename [, $encoding] );

   <b>write()</b>
       Used in tandem with <b>out()</b> to write records to a file.

           my $file = MARC::File::XML-&gt;out( $filename );
           $file-&gt;write( $record1 );
           $file-&gt;write( $record2 );

   <b>close()</b>
       When writing records to disk the filehandle is automatically closed when you the MARC::File::XML object
       goes out of scope. If you want to close it explicitly use the <b>close()</b> method.

       If you want to generate batches of records as XML, but don't want to write to disk you'll have to use
       <b>header()</b>, <b>record()</b> and <b>footer()</b> to generate the different portions.

           $xml = join( "\n",
               MARC::File::XML::header(),
               MARC::File::XML::record( $record1 ),
               MARC::File::XML::record( $record2 ),
               MARC::File::XML::record( $record3 ),
               MARC::File::XML::footer()
           );

   <b>header()</b>
       Returns a string of XML to use as the header to your XML file.

   <b>footer()</b>
       Returns a string of XML to use at the end of your XML file.

   <b>record()</b>
       Returns a chunk of XML suitable for placement between the header and the footer.

   <b>decode()</b>
       You probably don't ever want to call this method directly. If you do you should pass in a chunk of XML as
       the argument.

       It is normally invoked by a call to <b>next()</b>, see MARC::Batch or MARC::File.

   <b>MARC::File::XML-&gt;set_parser($parser)</b>
       Pass a XML::LibXML parser to MARC::File::XML for it to use.  This is optional, meant for use by
       applications that maintain a shared parser object or which require that external entities be processed.
       Note that the latter is a potential security risk; see
       &lt;https://www.owasp.org/index.php/XML_External_Entity_(XXE)_Processing&gt;.

   <b>encode()</b>
       You probably want to use the <b>as_xml()</b> method on your MARC::Record object instead of calling this
       directly. But if you want to you just need to pass in the MARC::Record object you wish to encode as XML,
       and you will be returned the XML as a scalar.

</pre><h4><b>TODO</b></h4><pre>
       •   Support for callback filters in <b>decode()</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       &lt;<a href="http://www.loc.gov/standards/marcxml/">http://www.loc.gov/standards/marcxml/</a>&gt;
       MARC::File::USMARC
       MARC::Batch
       MARC::Record

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Ed Summers &lt;<a href="mailto:ehs@pobox.com">ehs@pobox.com</a>&gt;

perl v5.32.1                                       2022-01-20                               <u>MARC::File::<a href="../man3pm/XML.3pm.html">XML</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>