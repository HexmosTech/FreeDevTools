<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARC::Record::MiJ - Convert MARC::Record to/from marc-in-json structure</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmarc-file-mij-perl">libmarc-file-mij-perl_0.04-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MARC::Record::MiJ - Convert MARC::Record to/from marc-in-json structure

</pre><h4><b>VERSION</b></h4><pre>
       Version 0.04

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use MARC::Record;
         use MARC::Record::MIJ

         my $str = get_marc_in_json_from_somewhere;

         # The most common use will be to use methods monkeypatched into MARC::Record
         my $r = MARC::Record-&gt;new_from_mij($str);
         my $json = $r-&gt;to_mij;

         # You can also work with the underlying hash/array structure if you're dealing with
         # json serialization/deserialization on your own

         my $mij_structure = $r-&gt;to_mij_structure;
         my $r = MARC::Record-&gt;new_from_mij_structure($mij_structure);

         # You can also call things on MARC::Record::MiJ

         my $r = MARC::Record::MiJ-&gt;new($str);
         my $json = MARC::Record::MiJ-&gt;to_mij($r);
         my $mij_structure = MARC::Record::MiJ-&gt;to_mij_structure($r);
         my $r = MARC::Record::MiJ-&gt;new_from_mij_structure($mij_structure);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Reads and writes MARC-in-JSON structures and strings as supported by pymarc/ruby-marc/marc4j and
       described at <a href="http://dilettantes.code4lib.org/blog/2010/09/a-proposal-to-serialize-marc-in-json/">http://dilettantes.code4lib.org/blog/2010/09/a-proposal-to-serialize-marc-in-json/</a>

       Don't confuse with another (incompatible) JSON encoding in the module "MARC::File::JSON", which to the
       best of my knowledge isn't supported by other readers/writers.

       For reading, you probably don't need to use this directly; take a look at "MARC::File::MiJ" for reading
       in newline-delimited marc-in-json files by itself or in conjunction with "MARC::Batch".

       The MARC::Record distribution doesn't so much do do writing out files. You can do something like this:

           # convert file from marc binary to marc-in-json
           use MARC::Batch;
           use MARC::Record::MiJ;
           my $batch = MARC::Batch-&gt;new('USMARC', 'file.mrc');
           open(my $jsonfile, '&gt;', 'file.ndj' );
           while (my $r = $batch-&gt;next) {
             print $jsonfile MARC::Record::MiJ-&gt;to_mij($r), "\n";
           }
           close $jsonfile;

       ...to produce newline-delimited marc-in-json from a binary file.

</pre><h4><b>SUBROUTINES/METHODS</b></h4><pre>
   <b>json</b>
       Get a json object to work with (memoized). We want to control it so we make sure it's not doing anything
       pretty (like, say, putting newlines in, which woudl make it harder to produce newline-delimited json
       file).

   <b>new($str)</b>
       Take a JSON string and turn it into a MARC::Record object

   <b>to_mij($r)</b>
       Take a record; return a JSON string

   <b>MARC::Record::JSON-&gt;to_mij_structure($r)</b>
       Turn a record into a marc-in-json compatible hash; return the hash pointer

   <b>controlfield_to_mij_structure($field)</b>
       Turn a MARC::Record controlfield into an appropriate hash

   <b>valuefield_to_mij_structure($field)</b>
       Turn a MARC::Record valuefield into an appropriate hash

   <b>subfield_to_mij_structure($sf)</b>
       Turn a MARC::Record subfield pair (arrayref duple of code/value) into an appropriate hash

   <b>my</b> <b>$r</b> <b>=</b>  <b>MARC::Record::JSON-&gt;new_from_mij_structure($mij_structure)</b>
       Given a marc-in-json structure, return a MARC::Record object

   <b>new_field_from_mij_structure($f)</b>
       Given a field structure, create an appropriate (control or variable) field

   <b>new_datafield_from_mij_structure</b>
       Support for new_field_from_mij_structure; do the more complex work of creating a datafield

</pre><h4><b>Monkeypatching</b> <b>MARC::Record</b></h4><pre>
       Add new_from_mij_structure($mij_structure) and to_mij_structure() to MARC::Record

         my $r = MARC::Record-&gt;new_from_mij_structure($mij_structure);
         $mij_structure = $r-&gt;to_mij_structure;

</pre><h4><b>AUTHOR</b></h4><pre>
       Bill Dueber, "&lt;dueberb at umich.edu&gt;"

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs or feature requests to "bug-MARC-File-MiJ at rt.cpan.org", or through the web
       interface at &lt;<a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=MARC-File-MiJ&gt;.  I will be notified, and
       then you'll automatically be notified of progress on your bug as I make changes.

</pre><h4><b>SUPPORT</b></h4><pre>
       You can find documentation for this module with the perldoc command.

           perldoc MARC::Record::MiJ

       You can also look for information at:

       •   RT: CPAN's request tracker (report bugs here)

           &lt;<a href="http://rt.cpan.org/NoAuth/Bugs.html">http://rt.cpan.org/NoAuth/Bugs.html</a>?Dist=MARC-File-MiJ&gt;

       •   AnnoCPAN: Annotated CPAN documentation

           &lt;<a href="http://annocpan.org/dist/MARC-File-MiJ">http://annocpan.org/dist/MARC-File-MiJ</a>&gt;

       •   CPAN Ratings

           &lt;<a href="http://cpanratings.perl.org/d/MARC-File-MiJ">http://cpanratings.perl.org/d/MARC-File-MiJ</a>&gt;

       •   Search CPAN

           &lt;<a href="http://search.cpan.org/dist/MARC-File-MiJ/">http://search.cpan.org/dist/MARC-File-MiJ/</a>&gt;

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright 2013 Bill Dueber.

       This software is free software and may be distributed under the same terms as Perl itself.

perl v5.38.2                                       2024-03-07                             <u>MARC::Record::<a href="../man3pm/MiJ.3pm.html">MiJ</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>