<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nlinline_if_nametoindex,      nlinline_linksetupdown,      nlinline_ipaddr_add,      nlinline_ipaddr_del,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nlinline-dev">nlinline-dev_0.2.2-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nlinline_if_nametoindex,      nlinline_linksetupdown,      nlinline_ipaddr_add,      nlinline_ipaddr_del,
       nlinline_iproute_add,       nlinline_iproute_del,        nlinline_iplink_add,        nlinline_iplink_del,
       nlinline_linksetaddr, nlinline_linkgetaddr - configure network interfaces

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;nlinline.h&gt;</b>

       <b>int</b> <b>nlinline_if_nametoindex(const</b> <b>char</b> <b>*</b><u>ifname</u><b>);</b>

       <b>int</b> <b>nlinline_linksetupdown(unsigned</b> <b>int</b> <u>ifindex</u><b>,</b> <b>int</b> <u>updown</u><b>);</b>

       <b>int</b> <b>nlinline_ipaddr_add(int</b> <u>family</u><b>,</b> <b>void</b> <b>*</b><u>addr</u><b>,</b> <b>int</b> <u>prefixlen</u><b>,</b> <b>unsigned</b> <b>int</b> <u>ifindex</u><b>);</b>

       <b>int</b> <b>nlinline_ipaddr_del(int</b> <u>family</u><b>,</b> <b>void</b> <b>*</b><u>addr</u><b>,</b> <b>int</b> <u>prefixlen</u><b>,</b> <b>unsigned</b> <b>int</b> <u>ifindex</u><b>);</b>

       <b>int</b>  <b>nlinline_iproute_add(int</b>  <u>family</u><b>,</b>  <b>void</b>  <b>*</b><u>dst_addr</u><b>,</b>  <b>int</b>  <u>dst_prefixlen</u><b>,</b> <b>void</b> <b>*</b><u>gw_addr</u><b>,</b> <b>unsigned</b> <b>int</b>
       <u>ifindex</u><b>);</b>

       <b>int</b> <b>nlinline_iproute_del(int</b> <u>family</u><b>,</b> <b>void</b> <b>*</b><u>dst_addr</u><b>,</b>  <b>int</b>  <u>dst_prefixlen</u><b>,</b>  <b>void</b>  <b>*</b><u>gw_addr</u><b>,</b>  <b>unsigned</b>  <b>int</b>
       <u>ifindex</u><b>);</b>

       <b>int</b> <b>nlinline_iplink_add(const</b> <b>char</b> <b>*</b><u>ifname</u><b>,</b> <b>unsigned</b> <b>int</b> <u>ifindex</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>type</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>data</u><b>);</b>

       <b>int</b> <b>nlinline_iplink_del(const</b> <b>char</b> <b>*</b><u>ifname</u><b>,</b> <b>unsigned</b> <b>int</b> <u>ifindex</u><b>);</b>

       <b>int</b> <b>nlinline_linksetaddr(unsigned</b> <b>int</b> <u>ifindex</u><b>,</b> <b>void</b> <b>*</b><u>macaddr</u><b>);</b>

       <b>int</b> <b>nlinline_linkgetaddr(unsigned</b> <b>int</b> <u>ifindex</u><b>,</b> <b>void</b> <b>*</b><u>macaddr</u><b>);</b>

       <b>int</b> <b>nlinline_linksetmtu(unsigned</b> <b>int</b> <u>ifindex</u><b>,</b> <b>unsigned</b> <b>int</b> <u>mtu</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       NLINLINE  (netlink  inline)  is  a  <u>library</u>  of  inline functions providing C programmers with very handy
       functions to configure network stacks. NLINLINE is entirely implemented in a header file, nlinline.h.

       <b>nlinline_if_nametoindex</b>
              This function returns the index of the network interface whose name is <u>ifname</u>.

       <b>nlinline_linksetupdown</b>
              This function turns the interface <u>ifindex</u> up (<u>updown</u> == <b>1</b>) or down (<u>updown</u> == <b>0</b>).

       <b>nlinline_ipaddr_add</b>
              This function adds an IP address to the interface <u>ifindex</u>. It supports IPv4  (<u>family</u>  ==  <b>AF_INET</b>)
              and IPv6 (<u>family</u> == <b>AF_INET6</b>).

       <b>nlinline_ipaddr_del</b>
              This  function  removes  the  IP  address  from the interface <u>ifindex</u>. It supports IPv4 (<u>family</u> ==
              <b>AF_INET</b>) and IPv6 (<u>family</u> == <b>AF_INET6</b>).

       <b>nlinline_iproute_add</b>
              This function adds a static route to <u>dst_addr</u>/<u>dst_prefixlen</u> network through the  gateway  <u>gw_addr</u>.
              If  <u>dst_addr</u>  ==  <b>NULL</b>  it adds a default route. <u>ifindex</u> must be specified when <u>gw_addr</u> is an IPv6
              link local address.

       <b>nlinline_iproute_del</b>
              This function removes the static route  to  <u>dst_addr</u>/<u>dst_prefixlen</u>  network  through  the  gateway
              <u>gw_addr</u>.

       <b>nlinline_iplink_add</b>
              This function adds a new link of type <u>type</u>, named <u>ifname</u>. The value of <u>data</u> depends on the type of
              link  and  can  be NULL. A default interface name is assigned if <u>name</u> == <b>NULL</b>. The link is created
              with a given index when <u>ifindex</u> is positive.

       <b>nlinline_iplink_del</b>
              This function removes a link. The link to be deleted can be identified by its name (<u>ifname</u>) or  by
              its  index (<u>ifindex</u>). Either <u>ifindex</u> can be zero or <u>ifname</u> can be <b>NULL</b>. It is possible to use both
              <u>ifindex</u> and <u>ifname</u> to identify the link. An error may occur if the parameters are inconsistent.

       <b>nlinline_linksetaddr</b>
              This functions sets the mac address of the interface <u>ifindex</u>.

       <b>nlinline_linkgetaddr</b>
              This functions gets the mac address of the interface <u>ifindex</u>.

       <b>nlinline_linksetmtu</b>
              This functions sets the MTU (Maximum Transfer Unit) of the interface <u>ifindex</u>.

       IP addresses are <b>void</b> <b>*</b> arguments, any sequence of 4 or 16 bytes (in network byte order) is a legal  IPv4
       or IPv6 address respectively.

       <b>nlinline</b> functions do not add dependencies at run-time. This is useful for security critical applications
       (like  PAM modules) These inline functions use netlink only, they do not depend on the obsolete netdevice
       (ioctl) API. Only the code of referenced inline functions enters in the object and executable code.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>nlinline_if_nametoindex</b> returns the interface index or -1 if an error occurred (in which case,  errno  is
       set appropriately)

       All  the  other  functions  return  zero  in  case of success. On error, -1 is returned, and errno is set
       appropriately.

       (<b>nlinline_iplink_add</b> can return the (positive) ifindex of  the  newly  created  link  when  the  argument
       <u>ifindex</u> is -1 and the stack supports this feature.)

</pre><h4><b>EXAMPLE</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;nlinline.h&gt;

       int main(int argc, char *argv[]) {
         uint8_t ipv4addr[] = {192,168,2,2};
         uint8_t ipv4gw[] = {192,168,2,1};
         uint8_t ipv6addr[16] = {0x20, 0x01, 0x07, 0x60, [15] = 0x02};
         uint8_t ipv6gw[16] = {0x20, 0x01, 0x07, 0x60, [15] = 0x01};

         int ifindex = nlinline_if_nametoindex(argv[1]);
         if (ifindex &gt; 0)
           printf("%d\n", ifindex);
         else {
           perror("nametoindex");
           return 1;
         }

         if (nlinline_linksetupdown(ifindex, 1) &lt; 0)
           perror("link up");
         if (nlinline_ipaddr_add(AF_INET, ipv4addr, 24, ifindex) &lt; 0)
           perror("addr ipv4");
         if (nlinline_iproute_add(AF_INET, NULL, 0, ipv4gw, 0) &lt; 0)
           perror("addr ipv6");
         if (nlinline_ipaddr_add(AF_INET6, ipv6addr, 64, ifindex) &lt; 0)
           perror("route ipv4");
         if (nlinline_iproute_add(AF_INET6, NULL, 0, ipv6gw, 0) &lt; 0)
           perror("route ipv6");
         return 0;
       }

       This  program  takes  the name of an interface from the command line. It turns that interface up and sets
       the interface IPv4 and IPv6 addresses and default routes.

</pre><h4><b>AUTHOR</b></h4><pre>
       VirtualSquare. Project leader: Renzo Davoli

VirtualSquare                                     December 2020                                      <u><a href="../man3/NLINLINE.3.html">NLINLINE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>