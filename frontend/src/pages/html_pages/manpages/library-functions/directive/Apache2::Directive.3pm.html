<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apache2::Directive - Perl API for manipulating the Apache configuration tree</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libapache2-mod-perl2">libapache2-mod-perl2_2.0.13-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Apache2::Directive - Perl API for manipulating the Apache configuration tree

</pre><h4><b>Synopsis</b></h4><pre>
         use Apache2::Directive ();

         my $tree = Apache2::Directive::conftree();

         my $documentroot = $tree-&gt;lookup('DocumentRoot');

         my $vhost = $tree-&gt;lookup('VirtualHost', 'localhost:8000');
         my $servername = $vhost-&gt;{'ServerName'};

         use Data::Dumper;
         print Dumper $tree-&gt;as_hash;

         my $node = $tree;
         while ($node) {
             print $node-&gt;as_string;

             #do something with $node

             my $directive = $node-&gt;directive;
             my $args = $node-&gt;args;
             my $filename = $node-&gt;filename;
             my $line_num = $node-&gt;line_num;

             if (my $kid = $node-&gt;first_child) {
                 $node = $kid;
             }
             elsif (my $next = $node-&gt;next) {
                 $node = $next;
             }
             else {
                 if (my $parent = $node-&gt;parent) {
                     $node = $parent-&gt;next;
                 }
                 else {
                     $node = undef;
                 }
             }
         }

</pre><h4><b>Description</b></h4><pre>
       "Apache2::Directive" provides the Perl API for manipulating the Apache configuration tree

</pre><h4><b>API</b></h4><pre>
       "Apache2::Directive" provides the following functions and/or methods:

   <b>"args"</b>
       Get the arguments for the current directive:

         $args = $node-&gt;args();

       obj: $node ( "Apache2::Directive object" )
       ret: $args ( string )
           Arguments are separated by a whitespace in the string.

       since: 2.0.00

       For example, in <u>httpd.conf</u>:

         PerlSwitches -M/opt/lib -M/usr/local/lib -wT

       And later:

         my $tree = Apache2::Directive::conftree();
         my $node = $tree-&gt;lookup('PerlSwitches');
         my $args = $node-&gt;args;

       $args now contains the string "-M/opt/lib -M/usr/local/lib -wT"

   <b>"as_hash"</b>
       Get  a  hash  representation  of  the  configuration  tree,  in a format suitable for inclusion in &lt;Perl&gt;
       sections.

          $config_hash = $conftree-&gt;as_hash();

       obj: $conftree ( "Apache2::Directive object" )
           The config tree to stringify

       ret: $config_hash ( HASH reference )
       since: 2.0.00

       For example: in <u>httpd.conf</u>:

         &lt;Location /test&gt;
           SetHandler perl-script
           PerlHandler Test::Module
         &lt;/Location&gt;

       And later:

         my $tree = Apache2::Directive::conftree();
         my $node = $tree-&gt;lookup('Location', '/test/');
         my $hash = $node-&gt;as_hash;

       $hash now is:

         {
           'SetHandler'  =&gt; 'perl-script',
           'PerlHandler' =&gt; 'Test::Module',
         }

   <b>"as_string"</b>
       Get a string representation of the configuration node, in <u>httpd.conf</u> format.

          $string = $node-&gt;as_string();

       obj: $node ( "Apache2::Directive object" )
           The config tree to stringify

       ret: $string ( string )
       since: 2.0.00

       For example: in <u>httpd.conf</u>:

         &lt;Location /test&gt;
           SetHandler perl-script
           PerlHandler Test::Module
         &lt;/Location&gt;

       And later:

         my $tree = Apache2::Directive::conftree();
         my $node = $tree-&gt;lookup('Location', '/test/');
         my $string = $node-&gt;as_string;

       $string is now:

         SetHandler perl-script
         PerlHandler Test::Module

   <b>"conftree"</b>
       Get the root of the configuration tree:

         $conftree = Apache2::Directive::conftree();

       obj: "Apache2::Directive" ( class name )
       ret: $conftree ( "Apache2::Directive object" )
       since: 2.0.00

   <b>"directive"</b>
       Get the name of the directive in $node:

         $name = $node-&gt;directive();

       obj: $node ( "Apache2::Directive object" )
       ret: $name ( string )
       since: 2.0.00

   <b>"filename"</b>
       Get the <u>filename</u> the configuration node was created from:

         $filename = $node-&gt;filename();

       obj: $node ( "Apache2::Directive object" )
       ret: $filename ( string )
       since: 2.0.00

       For example:

         my $tree = Apache2::Directive::conftree();
         my $node = $tree-&gt;lookup('VirtualHost', 'example.com');
         my $filename = $node-&gt;filename;

       $filename is now the full path to the <u>httpd.conf</u> that VirtualHost was defined in.

       If the directive was added with add_config(), the filename will  be  the  path  to  the  <u>httpd.conf</u>  that
       trigerred that Perl code.

   <b>"first_child"</b>
       Get the first child node of this directive:

         $child_node = $node-&gt;first_child;

       obj: $node ( "Apache2::Directive object" )
       ret: $child_node ( "Apache2::Directive object" )
           Returns the first child node of $node, "undef" if there is none

       since: 2.0.00

   <b>"line_num"</b>
       Get the line number in a <u>filename</u> this node was created at:

         $lineno = $node-&gt;line_num();

       obj: $node ( "Apache2::Directive object" )
       arg1: $lineno (integer)
       since: 2.0.00

   <b>"lookup"</b>
       Get the node(s) matching a certain value.

         $node  = $conftree-&gt;lookup($directive, $args);
         @nodes = $conftree-&gt;lookup($directive, $args);

       obj: $conftree ( "Apache2::Directive object" )
           The config tree to stringify

       arg1: $directive ( string )
           The name of the directive to search for

       opt arg2: "args" ( string )
           Optional args to the directive to filter for

       ret: $string ( string / ARRAY of HASH refs )
           In LIST context, it returns all matching nodes.

           In SCALAR context, it returns only the first matching node.

           If called with only $directive value, this method returns all nodes from that directive. For example:

             @Alias = $conftree-&gt;lookup('Alias');

           returns all nodes for "Alias" directives.

           If  called  with an extra $args argument, it returns only nodes where both the directive and the args
           matched. For example:

             $VHost = $tree-&gt;lookup('VirtualHost', '_default_:8000');

       since: 2.0.00

   <b>"next"</b>
       Get the next directive node in the tree:

         $next_node = $node-&gt;next();

       obj: $node ( "Apache2::Directive object" )
       ret: $next_node ( "Apache2::Directive object" )
           Returns the next sibling of $node, "undef" if there is none

       since: 2.0.00

   <b>"parent"</b>
       Get the parent node of this directive:

         $parent_node = $node-&gt;parent();

       obj: $node ( "Apache2::Directive object" )
       ret: "parent_node" ( "Apache2::Directive object" )
           Returns the parent of $node, "undef" if this node is the root node

       since: 2.0.00

</pre><h4><b>See</b> <b>Also</b></h4><pre>
       mod_perl 2.0 documentation.

</pre><h4><b>Copyright</b></h4><pre>
       mod_perl 2.0 and its core modules are copyrighted under The Apache Software License, Version 2.0.

</pre><h4><b>Authors</b></h4><pre>
       The mod_perl development team and numerous contributors.

perl v5.40.0                                       2024-10-20             <u>libapache2-mod-...che2::<a href="../man3pm/Directive.3pm.html">Directive</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>