<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>multiplexer - One-to-many communication with sockets.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       multiplexer - One-to-many communication with sockets.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>logger</b>

       package require <b>multiplexer</b> <b>?0.3?</b>

       <b>::multiplexer::create</b>

       <b>${multiplexer_instance}::Init</b> <u>port</u>

       <b>${multiplexer_instance}::Config</b> <u>key</u> <u>value</u>

       <b>${multiplexer_instance}::AddFilter</b> <u>cmdprefix</u>

       <b>cmdprefix</b> <u>data</u> <u>chan</u> <u>clientaddress</u> <u>clientport</u>

       <b>${multiplexer_instance}::AddAccessFilter</b> <u>cmdprefix</u>

       <b>cmdprefix</b> <u>chan</u> <u>clientaddress</u> <u>clientport</u>

       <b>${multiplexer_instance}::AddExitFilter</b> <u>cmdprefix</u>

       <b>cmdprefix</b> <u>chan</u> <u>clientaddress</u> <u>clientport</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>multiplexer</b>  package provides a generic system for one-to-many communication utilizing sockets.  For
       example, think of a chat system where one user sends a message which is then broadcast to all  the  other
       connected users.

       It is possible to have different multiplexers running concurrently.

       <b>::multiplexer::create</b>
              The <b>create</b> command creates a new multiplexer 'instance'.  For example:

              set mp [::multiplexer::create]

              This instance can then be manipulated like so:

              ${mp}::Init 35100

       <b>${multiplexer_instance}::Init</b> <u>port</u>
              This starts the multiplexer listening on the specified port.

       <b>${multiplexer_instance}::Config</b> <u>key</u> <u>value</u>
              Use <b>Config</b> to configure the multiplexer instance.  Configuration options currently include:

              <b>sendtoorigin</b>
                     A  boolean  flag. If <b>true</b>, the sender will receive a copy of the sent message.  Defaults to
                     <b>false</b>.

              <b>debuglevel</b>
                     Sets the debug level to use for the multiplexer instance, according to those  specified  by
                     the <b>logger</b> package (debug, info, notice, warn, error, critical).

       <b>${multiplexer_instance}::AddFilter</b> <u>cmdprefix</u>
              Command  to  add  a  filter for data that passes through the multiplexer instance.  The registered
              <u>cmdprefix</u> is called when data arrives at a multiplexer instance. If there is more than one  filter
              command  registered  at the instance they will be called in the order of registristation, and each
              filter will get the result of the preceding filter as its argument.  The  first  filter  gets  the
              incoming  data  as  its argument. The result returned by the last filter is the data which will be
              broadcast to all clients of the multiplexer instance.  The command prefix is called as

              <b>cmdprefix</b> <u>data</u> <u>chan</u> <u>clientaddress</u> <u>clientport</u>
                     Takes the incoming <u>data</u>, modifies it, and returns  that  as  its  result.  The  last  three
                     arguments  contain  information about the client which sent the data to filter: The channel
                     connecting us to the client, its ip-address, and its ip-port.

       <b>${multiplexer_instance}::AddAccessFilter</b> <u>cmdprefix</u>
              Command to add an access filter.  The registered <u>cmdprefix</u> is called  when  a  new  client  socket
              tries  to  connect  to  the  multixer  instance.  If  there is more than one access filter command
              registered at the instance they will be called in the order of  registristation.  If  any  of  the
              called commands returns <b>-1</b> the access to the multiplexer instance is denied and the client channel
              is closed immediately. Any other result grants the client access to the multiplexer instance.  The
              command prefix is called as

              <b>cmdprefix</b> <u>chan</u> <u>clientaddress</u> <u>clientport</u>
                     The  arguments  contain  information  about  the  client  which  tries  to connected to the
                     instance: The channel connecting us to the client, its ip-address, and its ip-port.

       <b>${multiplexer_instance}::AddExitFilter</b> <u>cmdprefix</u>
              Adds filter to be run when client socket generates an EOF condition.  The registered <u>cmdprefix</u>  is
              called  when  a  client  socket of the multixer signals EOF. If there is more than one exit filter
              command registered at the instance they will be called in the  order  of  registristation.  Errors
              thrown  by  an  exit  filter  are  ignored,  but  logged. Any result returned by an exit filter is
              ignored.  The command prefix is called as

              <b>cmdprefix</b> <u>chan</u> <u>clientaddress</u> <u>clientport</u>
                     The arguments contain information about the client which  signaled  the  EOF:  The  channel
                     connecting us to the client, its ip-address, and its ip-port.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>multiplexer</u> of the  <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       chat, multiplexer

</pre><h4><b>CATEGORY</b></h4><pre>
       Programming tools

tcllib                                                 0.3                                     <u><a href="../man3tcl/multiplexer.3tcl.html">multiplexer</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>