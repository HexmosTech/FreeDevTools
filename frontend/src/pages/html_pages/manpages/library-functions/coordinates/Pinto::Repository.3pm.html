<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pinto::Repository - Coordinates the database, files, and indexes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pinto">pinto_0.14000-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Pinto::Repository - Coordinates the database, files, and indexes

</pre><h4><b>VERSION</b></h4><pre>
       version 0.14

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>root</b>
   <b>config</b>
   <b>db</b>
   <b>store</b>
   <b>locator</b>
   <b>locker</b>
</pre><h4><b>METHODS</b></h4><pre>
   <b>locate(</b> <b>target</b> <b>=&gt;</b> <b>);</b>
   <b>lock(</b> <b>$LOCK_TYPE</b> <b>)</b>
   <b>unlock</b>
   <b>get_stack()</b>
   <b>get_stack(</b> <b>$stack_name</b> <b>)</b>
   <b>get_stack(</b> <b>$stack_object</b> <b>)</b>
       Returns the Pinto::Schema::Result::Stack object with the given $stack_name.  If the argument is a
       Pinto::Schema::Result::Stack, then it just returns that.  If there is no stack with such a name in the
       repository, throws an exception.  If you do not specify a stack name (or it is undefined) then you'll get
       whatever stack is currently marked as the default stack.

       The stack object will not be open for revision, so you will not be able to change any of the
       registrations for that stack.  To get a stack that you can modify, use "open_stack".

   <b>get_stack_maybe()</b>
   <b>get_stack_maybe(</b> <b>$stack_name</b> <b>)</b>
   <b>get_stack_maybe(</b> <b>$stack_object</b> <b>)</b>
       Same as "get_stack" but simply returns undef if the stack does not exist rather than throwing an
       exception.

   <b>get_default_stack()</b>
       Returns the Pinto::Schema::Result::Stack that is currently marked as the default stack in this
       repository.  This is what you get when you call "get_stack" without any arguments.

       The stack object will not be open for revision, so you will not be able to change any of the
       registrations for that stack.  To get a stack that you can modify, use "open_stack".

       At any time, there must be exactly one default stack.  This method will throw an exception if it
       discovers that condition is not true.

   <b>get_all_stacks()</b>
       Returns a list of all the Pinto::Schema::Result::Stack objects in the repository.  You can sort them as
       strings (by name) or numerically (by last modification time).

   <b>get_revision($commit)</b>
   <b>get_revision_maybe($commit)</b>
   <b>get_package(</b> <b>target</b> <b>=&gt;</b> <b>$pkg_spec</b> <b>)</b>
       Returns a &lt;Pinto:Schema::Result::Package&gt; representing the latest version of the package in the
       repository with the same name as the package target <b>and</b> <b>the</b> <b>same</b> <b>or</b> <b>higher</b> <b>version</b> as the package  spec.
       See Pinto::Target::Package for the definition of a package target.

   <b>get_package(</b> <b>name</b> <b>=&gt;</b> <b>$pkg_name</b> <b>)</b>
       Returns a &lt;Pinto:Schema::Result::Package&gt; representing the latest version of the package in the
       repository with the given $pkg_name.   If there is no such package with that name in the repository,
       returns nothing.

   <b>get_package(</b> <b>name</b> <b>=&gt;</b> <b>$pkg_name,</b> <b>path</b> <b>=&gt;</b> <b>$dist_path</b> <b>)</b>
       Returns the &lt;Pinto:Schema::Result::Package&gt; with the given $pkg_name that belongs to the distribution
       identified by  $dist_path. If there is no such package in the repository,  returns nothing.

       TODO: Consider making this a "maybe" function and the wrapping it with a version that throws exceptions
       if no match is found. See get_stack_maybe() for an example.

   <b>get_distribution(</b> <b>target</b> <b>=&gt;</b> <b>$target</b> <b>)</b>
       Given a Pinto::Target::Package, returns the Pinto::Schema::Result::Distribution that contains the <b>latest</b>
       <b>version</b> <b>of</b> <b>the</b> <b>package</b> in this repository with the same  name as the target <b>and</b> <b>the</b> <b>same</b> <b>or</b> <b>higher</b>
       <b>version</b> <b>as</b> <b>the</b> <b>target</b>.  Returns nothing  if no such distribution is found.

       Given a Pinto::Target::Distribution, returns the Pinto::Schema::Result::Distribution from this repository
       with the same author id and archive attributes as the target.   Returns nothing if no such distribution
       is found.

   <b>get_distribution(</b> <b>path</b> <b>=&gt;</b> <b>$dist_path</b> <b>)</b>
       Given a distribution path, (for example "AUTHOR/Dist-1.0.tar.gz" or "A/AU/AUTHOR/Dist-1.0.tar.gz" returns
       the Pinto::Schema::Result::Distribution from this repository that is identified by the author ID and
       archive file name in the path.  Returns nothing if no such distribution is found.

   <b>get_distribution(</b> <b>author</b> <b>=&gt;</b> <b>$author,</b> <b>archive</b> <b>=&gt;</b> <b>$archive</b> <b>)</b>
       Given an author id and a distribution archive file basename, returns the
       Pinto::Schema::Result::Distribution from this repository with those attributes.  Returns nothing if no
       such distribution exists.

       TODO: Consider making this a "maybe" function and the wrapping it with a version that throws exceptions
       if no match is found. See get_stack_maybe() for an example.

   <b>ups_distribution(</b> <b>target</b> <b>=&gt;</b> <b>target</b> <b>)</b>
       Given a Pinto::Target::Package, locates the distribution that contains the latest version of the package
       across all upstream repositories with the same name as  the target, and the same or higher version as the
       target.  If such distribution is found, it is fetched and added to this repository.  If it is not found,
       then an exception is thrown.

       Given a Pinto::Target::Distribution, locates the first distribution in any upstream repository with the
       same author and archive as the target.  If such distribution is found, it is fetched and added to this
       repository.  If it  is not found, then an exception is thrown.

       TODO: Consider making this a "maybe" function and the wrapping it with a version that throws exceptions
       if no match is found. See get_stack_maybe() for an example.

   <b>add(</b> <b>archive</b> <b>=&gt;</b> <b>$path,</b> <b>author</b> <b>=&gt;</b> <b>$id</b> <b>)</b>
   <b>add(</b> <b>archive</b> <b>=&gt;</b> <b>$path,</b> <b>author</b> <b>=&gt;</b> <b>$id,</b> <b>source</b> <b>=&gt;</b> <b>$uri</b> <b>)</b>
       Adds the distribution archive located on the local filesystem at $path to the repository in the author
       directory for the author with $id.  The packages provided by the distribution will be indexed, and the
       prerequisites will be recorded.  If the "source" is specified, it must be the URI to the root of the
       repository where the distribution came from.  Otherwise, the "source" defaults to "LOCAL".  Returns a
       Pinto::Schema::Result::Distribution object representing the newly added distribution.

   <b>fetch_distribution(</b> <b>uri</b> <b>=&gt;</b> <b>$uri</b> <b>)</b>
       Fetches a distribution archive from a remote URI and adds it to this repository.  The packages provided
       by the distribution will be indexed, and the prerequisites will be recorded.  Returns a
       Pinto::Schema::Result::Distribution object representing the fetched distribution.

   <b>clean_files()</b>
       Deletes all distribution archives that are on the filesystem but not in the database.  This can happen
       when an Action fails or is aborted prematurely.

</pre><h4><b>AUTHOR</b></h4><pre>
       Jeffrey Ryan Thalhammer &lt;<a href="mailto:jeff@stratopan.com">jeff@stratopan.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2015 by Jeffrey Ryan Thalhammer.

       This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.1                                       2025-04-21                             <u>Pinto::<a href="../man3pm/Repository.3pm.html">Repository</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>