<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP::Request - HTTP style request message</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libhttp-message-perl">libhttp-message-perl_7.00-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       HTTP::Request - HTTP style request message

</pre><h4><b>VERSION</b></h4><pre>
       version 7.00

</pre><h4><b>SYNOPSIS</b></h4><pre>
        require HTTP::Request;
        $request = HTTP::Request-&gt;new(GET =&gt; '<a href="http://www.example.com/">http://www.example.com/</a>');

       and usually used like this:

        $ua = LWP::UserAgent-&gt;new;
        $response = $ua-&gt;request($request);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "HTTP::Request" is a class encapsulating HTTP style requests, consisting of a request line, some headers,
       and a content body. Note that the LWP library uses HTTP style requests even for non-HTTP protocols.
       Instances of this class are usually passed to the <b>request()</b> method of an "LWP::UserAgent" object.

       "HTTP::Request" is a subclass of "HTTP::Message" and therefore inherits its methods.  The following
       additional methods are available:

       $r = HTTP::Request-&gt;new( $method, $uri )
       $r = HTTP::Request-&gt;new( $method, $uri, $header )
       $r = HTTP::Request-&gt;new( $method, $uri, $header, $content )
           Constructs a new "HTTP::Request" object describing a request on the object $uri using method $method.
           The $method argument must be a string.  The $uri argument can be either a string, or a reference to a
           "URI"  object.  The optional $header argument should be a reference to an "HTTP::Headers" object or a
           plain array reference of key/value pairs.  The optional $content  argument  should  be  a  string  of
           bytes.

       $r = HTTP::Request-&gt;parse( $str )
           This constructs a new request object by parsing the given string.

       $r-&gt;method
       $r-&gt;method( $val )
           This  is  used  to  get/set  the  method  attribute.  The method should be a short string like "GET",
           "HEAD", "PUT", "PATCH" or "POST".

       $r-&gt;uri
       $r-&gt;uri( $val )
           This is used to get/set the uri attribute.  The $val can be a reference to a URI object  or  a  plain
           string.  If a string is given, then it should be parsable as an absolute URI.

       $r-&gt;header( $field )
       $r-&gt;header( $field =&gt; $value )
           This  is  used to get/set header values and it is inherited from "HTTP::Headers" via "HTTP::Message".
           See HTTP::Headers for details and other similar methods that can be used to access the headers.

       $r-&gt;accept_decodable
           This will set the "Accept-Encoding" header to  the  list  of  encodings  that  <b>decoded_content()</b>  can
           decode.

       $r-&gt;content
       $r-&gt;content( $bytes )
           This  is  used  to  get/set the content and it is inherited from the "HTTP::Message" base class.  See
           HTTP::Message for details and other methods that can be used to access the content.

           Note that the content should be a string of bytes.  Strings in perl can  contain  characters  outside
           the range of a byte.  The "Encode" module can be used to turn such strings into a string of bytes.

       $r-&gt;as_string
       $r-&gt;as_string( $eol )
           Method returning a textual representation of the request.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Creating requests to be sent with LWP::UserAgent or others can be easy. Here are a few examples.

   <b>Simple</b> <b>POST</b>
       Here, we'll create a simple POST request that could be used to send JSON data to an endpoint.

           #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?env">/usr/bin/env</a> perl

           use strict;
           use warnings;

           use HTTP::Request ();
           use JSON::MaybeXS qw(encode_json);

           my $url = 'https://www.example.com/api/user/123';
           my $header = ['Content-Type' =&gt; 'application/json; charset=UTF-8'];
           my $data = {foo =&gt; 'bar', baz =&gt; 'quux'};
           my $encoded_data = encode_json($data);

           my $r = HTTP::Request-&gt;new('POST', $url, $header, $encoded_data);
           # at this point, we could send it via LWP::UserAgent
           # my $ua = LWP::UserAgent-&gt;new();
           # my $res = $ua-&gt;request($r);

   <b>Batch</b> <b>POST</b> <b>Request</b>
       Some    services,    like    Google,    allow    multiple   requests   to   be   sent   in   one   batch.
       &lt;https://developers.google.com/drive/v3/web/batch&gt;  for  example.  Using  the  "add_part"   method   from
       HTTP::Message makes this simple.

           #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?env">/usr/bin/env</a> perl

           use strict;
           use warnings;

           use HTTP::Request ();
           use JSON::MaybeXS qw(encode_json);

           my $auth_token = 'auth_token';
           my $batch_url = 'https://www.googleapis.com/batch';
           my $url = 'https://www.googleapis.com/drive/v3/files/fileId/permissions?fields=id';
           my $url_no_email = 'https://www.googleapis.com/drive/v3/files/fileId/permissions?fields=id&amp;sendNotificationEmail=false';

           # generate a JSON post request for one of the batch entries
           my $req1 = build_json_request($url, {
               emailAddress =&gt; '<a href="mailto:example@appsrocks.com">example@appsrocks.com</a>',
               role =&gt; "writer",
               type =&gt; "user",
           });

           # generate a JSON post request for one of the batch entries
           my $req2 = build_json_request($url_no_email, {
               domain =&gt; "appsrocks.com",
               role =&gt; "reader",
               type =&gt; "domain",
           });

           # generate a multipart request to send all of the other requests
           my $r = HTTP::Request-&gt;new('POST', $batch_url, [
               'Accept-Encoding' =&gt; 'gzip',
               # if we don't provide a boundary here, HTTP::Message will generate
               # one for us. We could use UUID::uuid() here if we wanted.
               'Content-Type' =&gt; 'multipart/mixed; boundary=END_OF_PART'
           ]);

           # add the two POST requests to the main request
           $r-&gt;add_part($req1, $req2);
           # at this point, we could send it via LWP::UserAgent
           # my $ua = LWP::UserAgent-&gt;new();
           # my $res = $ua-&gt;request($r);
           exit();

           sub build_json_request {
               my ($url, $href) = @_;
               my $header = ['Authorization' =&gt; "Bearer $auth_token", 'Content-Type' =&gt; 'application/json; charset=UTF-8'];
               return HTTP::Request-&gt;new('POST', $url, $header, encode_json($href));
           }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       HTTP::Headers, HTTP::Message, HTTP::Request::Common, HTTP::Response

</pre><h4><b>AUTHOR</b></h4><pre>
       Gisle Aas &lt;<a href="mailto:gisle@activestate.com">gisle@activestate.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 1994 by Gisle Aas.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.0                                       2024-11-06                                 <u>HTTP::<a href="../man3pm/Request.3pm.html">Request</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>