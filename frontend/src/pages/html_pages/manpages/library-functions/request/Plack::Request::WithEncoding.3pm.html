<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plack::Request::WithEncoding - Subclass of Plack::Request which supports encoded requests.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libplack-request-withencoding-perl">libplack-request-withencoding-perl_0.14-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Plack::Request::WithEncoding - Subclass of Plack::Request which supports encoded requests.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Plack::Request::WithEncoding;

           my $app_or_middleware = sub {
               my $env = shift; # PSGI env

               # Example of $env
               #
               # $env = {
               #     QUERY_STRING   =&gt; 'query=%82%d9%82%b0', # &lt;= encoded by 'cp932'
               #     REQUEST_METHOD =&gt; 'GET',
               #     HTTP_HOST      =&gt; 'example.com',
               #     PATH_INFO      =&gt; '/foo/bar',
               # };

               my $req = Plack::Request::WithEncoding-&gt;new($env);

               $req-&gt;env-&gt;{'plack.request.withencoding.encoding'} = 'cp932'; # &lt;= specify the encoding method.

               my $query = $req-&gt;param('query'); # &lt;= get parameters of 'query' that is decoded by 'cp932'.

               my $res = $req-&gt;<a href="../man200/new_response.200.html">new_response</a>(200); # new Plack::Response
               $res-&gt;finalize;
           };

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Plack::Request::WithEncoding is a subclass of Plack::Request that supports encoded requests. It overrides
       many Plack::Request attributes to return decoded values.  This feature allows a single application to
       seamlessly handle a wide variety of different language code sets. Applications that must be able to
       handle many different translations at once will find this extension able to quickly solve that problem.

       The target attributes to be encoded are described at "SPECIFICATION OF THE ENCODING METHOD".

</pre><h4><b>ATTRIBUTES</b> <b>of</b> <b>"Plack::Request::WithEncoding"</b></h4><pre>
       •   encoding

           Returns an encoding method to decode parameters.

       •   query_parameters

           Returns a reference of Hash::MultiValue instance that contains <b>decoded</b> query parameters.

       •   body_parameters

           Returns a reference of Hash::MultiValue instance that contains <b>decoded</b> request body.

       •   parameters

           Returns a reference of Hash::MultiValue instance that contains <b>decoded</b> parameters. The parameters are
           merged with "query_parameters" and "body_parameters".

       •   param

           Returns  <b>decoded</b>  parameters with a CGI.pm-compatible param method. This is an alternative method for
           accessing parameters in "$req-&gt;parameters".  Unlike CGI.pm, it does <b>not</b> allow  setting  or  modifying
           query parameters.

               $value  = $req-&gt;param('foo');
               @values = $req-&gt;param('foo');
               @params = $req-&gt;param;

       •   raw_query_parameters

           This attribute is the same as "query_parameters" of Plack::Request.

       •   raw_body_parameters

           This attribute is the same as "body_parameters" of Plack::Request.

       •   raw_parameters

           This attribute is the same as "parameters" of Plack::Request.

       •   raw_param

           This attribute is the same as "param" of Plack::Request.

</pre><h4><b>SPECIFICATION</b> <b>OF</b> <b>THE</b> <b>ENCODING</b> <b>METHOD</b></h4><pre>
       You can specify the character-encoding to decode, like so;

           $req-&gt;env-&gt;{'plack.request.withencoding.encoding'} = 'utf-7'; # &lt;= set utf-7

       When  this  character-encoding wasn't given through "$req-&gt;env-&gt;{'plack.request.withencoding.encoding'}",
       this module uses "utf-8" as the default character-encoding to decode.  It would be better to specify this
       character-encoding explicitly because the readability and understandability of the code behavior would be
       improved.

       Once this value was specified by falsy value (e.g. `undef`, 0 and ''),  this  module  returns  <b>raw</b>  <b>value</b>
       (i.e. never decodes).

       The example of a code is shown below.

           print exists $req-&gt;env-&gt;{'plack.request.withencoding.encoding'} ? 'EXISTS'
                                                                           : 'NOT EXISTS'; # &lt;= NOT EXISTS
           $query = $req-&gt;param('query'); # &lt;= get parameters of 'query' that is decoded by 'utf-8' (*** YOU SHOULD NOT USE LIKE THIS ***)

           $req-&gt;env-&gt;{'plack.request.withencoding.encoding'} = undef; # &lt;= explicitly specify the `undef`
           $query = $req-&gt;param('query'); # &lt;= get parameters of 'query' that is not decoded (raw value)

           $req-&gt;env-&gt;{'plack.request.withencoding.encoding'} = 'cp932'; # &lt;= specify the 'cp932' as encoding method
           $query = $req-&gt;param('query'); # &lt;= get parameters of 'query' that is decoded by 'cp932'

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Plack::Request

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (C) moznion.

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>AUTHOR</b></h4><pre>
       moznion &lt;<a href="mailto:moznion@gmail.com">moznion@gmail.com</a>&gt;

perl v5.30.3                                       2020-08-08                  <u>Plack::Request::<a href="../man3pm/WithEncoding.3pm.html">WithEncoding</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>