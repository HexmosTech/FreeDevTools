<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalyst::Request - provides information about the current client request</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcatalyst-perl">libcatalyst-perl_5.90132-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Catalyst::Request - provides information about the current client request

</pre><h4><b>SYNOPSIS</b></h4><pre>
           $req = $c-&gt;request;
           $req-&gt;address eq "127.0.0.1";
           $req-&gt;arguments;
           $req-&gt;args;
           $req-&gt;base;
           $req-&gt;body;
           $req-&gt;body_data;
           $req-&gt;body_parameters;
           $req-&gt;content_encoding;
           $req-&gt;content_length;
           $req-&gt;content_type;
           $req-&gt;cookie;
           $req-&gt;cookies;
           $req-&gt;header;
           $req-&gt;headers;
           $req-&gt;hostname;
           $req-&gt;input;
           $req-&gt;query_keywords;
           $req-&gt;match;
           $req-&gt;method;
           $req-&gt;param;
           $req-&gt;parameters;
           $req-&gt;params;
           $req-&gt;path;
           $req-&gt;protocol;
           $req-&gt;query_parameters;
           $req-&gt;read;
           $req-&gt;referer;
           $req-&gt;secure;
           $req-&gt;captures;
           $req-&gt;upload;
           $req-&gt;uploads;
           $req-&gt;uri;
           $req-&gt;user;
           $req-&gt;user_agent;
           $req-&gt;env;

       See also Catalyst, Catalyst::Request::Upload.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is the Catalyst Request class, which provides an interface to data for the current client request.
       The request object is prepared by Catalyst::Engine, thus hiding the details of the particular engine
       implementation.

</pre><h4><b>METHODS</b></h4><pre>
   <b>$req-&gt;address</b>
       Returns the IP address of the client.

   <b>$req-&gt;arguments</b>
       Returns a reference to an array containing the arguments.

           print $c-&gt;request-&gt;arguments-&gt;[0];

       For example, if your action was

           package MyApp::Controller::Foo;

           sub moose : Local {
               ...
           }

       and the URI for the request was "<a href="http://.../foo/moose/bah">http://.../foo/moose/bah</a>", the string "bah" would be the first and only
       argument.

       Arguments get automatically URI-unescaped for you.

   <b>$req-&gt;args</b>
       Shortcut for "arguments".

   <b>$req-&gt;base</b>
       Contains the URI base. This will always have a trailing slash. Note that the URI scheme (e.g., http vs.
       https) must be determined through heuristics; depending on your server configuration, it may be
       incorrect. See $req-&gt;secure for more info.

       If your application was queried with the URI "<a href="http://localhost">http://localhost</a>:3000/some/path" then "base" is
       "<a href="http://localhost">http://localhost</a>:3000/".

   <b>$req-&gt;body</b>
       Returns the message body of the request, as returned by HTTP::Body: a string, unless Content-Type is
       "application/x-www-form-urlencoded", "text/xml", or "multipart/form-data", in which case a File::Temp
       object is returned.

   <b>$req-&gt;body_data</b>
       Returns a Perl representation of body data that is not classic HTML form data, such as JSON, XML, etc.
       By default, Catalyst will parse incoming data of the type 'application/json' for POST, PUT, PATCH or
       DELETE methods, and return access to that data via this method.

       You may define addition data_handlers via a global configuration setting.  See "Catalyst\DATA HANDLERS"
       for more information.

       If the body is malformed in some way (such as undefined or not content that matches the content-type) we
       raise a Catalyst::Exception with the error text as the message.

       If the body content type does not match an available data handler, this will also raise an exception.

   <b>$req-&gt;body_parameters</b>
       Returns a reference to a hash containing body (POST) parameters. Values can be either a scalar or an
       arrayref containing scalars.

           print $c-&gt;request-&gt;body_parameters-&gt;{field};
           print $c-&gt;request-&gt;body_parameters-&gt;{field}-&gt;[0];

       These are the parameters from the POST part of the request, if any.

       <b>NOTE</b> If your POST is multipart, but contains non file upload parts (such as an line part with an
       alternative encoding or content type) we do our best to try and figure out how the value should be
       presented.  If there's a specified character set we will use that to decode rather than the default
       encoding set by the application.  However if there are complex headers and we cannot determine the
       correct way to extra a meaningful value from the upload, in this case any part like this will be
       represented as an instance of Catalyst::Request::PartData.

       Patches and review of this part of the code welcomed.

   <b>$req-&gt;body_params</b>
       Shortcut for body_parameters.

   <b>$req-&gt;content_encoding</b>
       Shortcut for $req-&gt;headers-&gt;content_encoding.

   <b>$req-&gt;content_length</b>
       Shortcut for $req-&gt;headers-&gt;content_length.

   <b>$req-&gt;content_type</b>
       Shortcut for $req-&gt;headers-&gt;content_type.

   <b>$req-&gt;cookie</b>
       A convenient method to access $req-&gt;cookies.

           $cookie  = $c-&gt;request-&gt;cookie('name');
           @cookies = $c-&gt;request-&gt;cookie;

   <b>$req-&gt;cookies</b>
       Returns a reference to a hash containing the cookies.

           print $c-&gt;request-&gt;cookies-&gt;{mycookie}-&gt;value;

       The cookies in the hash are indexed by name, and the values are CGI::Simple::Cookie objects.

   <b>$req-&gt;header</b>
       Shortcut for $req-&gt;headers-&gt;header.

   <b>$req-&gt;headers</b>
       Returns an HTTP::Headers object containing the headers for the current request.

           print $c-&gt;request-&gt;headers-&gt;header('X-Catalyst');

   <b>$req-&gt;hostname</b>
       Returns the hostname of the client. Use "$req-&gt;uri-&gt;host" to get the hostname of the server.

   <b>$req-&gt;input</b>
       Alias for $req-&gt;body.

   <b>$req-&gt;query_keywords</b>
       Contains the keywords portion of a query string, when no '=' signs are present.

           <a href="http://localhost/path">http://localhost/path</a>?some+keywords

           $c-&gt;request-&gt;query_keywords will contain 'some keywords'

   <b>$req-&gt;match</b>
       This contains the matching part of a Regex action. Otherwise it returns the same as 'action', except for
       default actions, which return an empty string.

   <b>$req-&gt;method</b>
       Contains the request method ("GET", "POST", "HEAD", etc).

   <b>$req-&gt;param</b>
       Returns GET and POST parameters with a CGI.pm-compatible param method. This is an alternative method for
       accessing parameters in $c-&gt;req-&gt;parameters.

           $value  = $c-&gt;request-&gt;param( 'foo' );
           @values = $c-&gt;request-&gt;param( 'foo' );
           @params = $c-&gt;request-&gt;param;

       Like CGI, and <b>unlike</b> earlier versions of Catalyst, passing multiple arguments to this method, like this:

           $c-&gt;request-&gt;param( 'foo', 'bar', 'gorch', 'quxx' );

       will set the parameter "foo" to the multiple values "bar", "gorch" and "quxx". Previously this would have
       added "bar" as another value to "foo" (creating it if it didn't exist before), and "quxx" as another
       value for "gorch".

       <b>NOTE</b> this is considered a legacy interface and care should be taken when using it. "scalar
       $c-&gt;req-&gt;param( 'foo' )" will return only the first "foo" param even if multiple are present;
       "$c-&gt;req-&gt;param( 'foo' )" will return a list of as many are present, which can have unexpected
       consequences when writing code of the form:

           $foo-&gt;bar(
               a =&gt; 'b',
               baz =&gt; $c-&gt;req-&gt;param( 'baz' ),
           );

       If multiple "baz" parameters are provided this code might corrupt data or cause a hash initialization
       error. For a more straightforward interface see "$c-&gt;req-&gt;parameters".

       <b>NOTE</b> Interfaces like this, which are based on CGI and the "param" method are known to cause demonstrated
       exploits. It is highly recommended that you avoid using this method, and migrate existing code away from
       it.  Here's a whitepaper of the exploit:

       &lt;<a href="http://blog.gerv.net/2014/10/new-class-of-vulnerability-in-perl-web-applications/">http://blog.gerv.net/2014/10/new-class-of-vulnerability-in-perl-web-applications/</a>&gt;

       <b>NOTE</b> Further discussion on IRC indicate that the Catalyst core team from 'back then' were well aware of
       this hack and this is the main reason we added the new approach to getting parameters in the first place.

       Basically this is an exploit that takes advantage of how \param will do one thing in scalar context and
       another thing in list context.  This is combined with how Perl chooses to deal with duplicate keys in a
       hash definition by overwriting the value of existing keys with a new value if the same key shows up
       again.  Generally you will be vulnerable to this exploit if you are using this method in a direct
       assignment in a hash, such as with a DBIx::Class create statement.  For example, if you have parameters
       like:

           user?user=123&amp;foo=a&amp;foo=user&amp;foo=456

       You could end up with extra parameters injected into your method calls:

           $c-&gt;model('User')-&gt;create({
             user =&gt; $c-&gt;req-&gt;param('user'),
             foo =&gt; $c-&gt;req-&gt;param('foo'),
           });

       Which would look like:

           $c-&gt;model('User')-&gt;create({
             user =&gt; 123,
             foo =&gt; qw(a user 456),
           });

       (or to be absolutely clear if you are not seeing it):

           $c-&gt;model('User')-&gt;create({
             user =&gt; 456,
             foo =&gt; 'a',
           });

       Possible remediations include scrubbing your parameters with a form validator like HTML::FormHandler or
       being careful to force scalar context using the scalar keyword:

           $c-&gt;model('User')-&gt;create({
             user =&gt; scalar($c-&gt;req-&gt;param('user')),
             foo =&gt; scalar($c-&gt;req-&gt;param('foo')),
           });

       Upcoming versions of Catalyst will disable this interface by default and require you to positively enable
       it should you require it for backwards compatibility reasons.

   <b>$req-&gt;parameters</b>
       Returns a reference to a hash containing GET and POST parameters. Values can be either a scalar or an
       arrayref containing scalars.

           print $c-&gt;request-&gt;parameters-&gt;{field};
           print $c-&gt;request-&gt;parameters-&gt;{field}-&gt;[0];

       This is the combination of "query_parameters" and "body_parameters".

   <b>$req-&gt;params</b>
       Shortcut for $req-&gt;parameters.

   <b>$req-&gt;path</b>
       Returns the path, i.e. the part of the URI after $req-&gt;base, for the current request.

           <a href="http://localhost/path/foo">http://localhost/path/foo</a>

           $c-&gt;request-&gt;path will contain 'path/foo'

   <b>$req-&gt;path_info</b>
       Alias for path, added for compatibility with CGI.

   <b>$req-&gt;protocol</b>
       Returns the protocol (HTTP/1.0 or HTTP/1.1) used for the current request.

   <b>$req-&gt;query_parameters</b>
   <b>$req-&gt;query_params</b>
       Returns a reference to a hash containing query string (GET) parameters. Values can be either a scalar or
       an arrayref containing scalars.

           print $c-&gt;request-&gt;query_parameters-&gt;{field};
           print $c-&gt;request-&gt;query_parameters-&gt;{field}-&gt;[0];

   <b>$req-&gt;read(</b> <b>[$maxlength]</b> <b>)</b>
       Reads a chunk of data from the request body. This method is intended to be used in a while loop, reading
       $maxlength bytes on every call. $maxlength defaults to the size of the request if not specified.

   <b>$req-&gt;read_chunk(\$buff,</b> <b>$max)</b>
       Reads a chunk.

       You have to set MyApp-&gt;config(parse_on_demand =&gt; 1) to use this directly.

   <b>$req-&gt;referer</b>
       Shortcut for $req-&gt;headers-&gt;referer. Returns the referring page.

   <b>$req-&gt;secure</b>
       Returns true or false, indicating whether the connection is secure (https). The reliability of
       $req-&gt;secure may depend on your server configuration; Catalyst relies on PSGI to determine whether or not
       a request is secure (Catalyst looks at psgi.url_scheme), and different PSGI servers may make this
       determination in different ways (as by directly passing along information from the server, interpreting
       any of several HTTP headers, or using heuristics of their own).

   <b>$req-&gt;captures</b>
       Returns a reference to an array containing captured args from chained actions or regex captures.

           my @captures = @{ $c-&gt;request-&gt;captures };

   <b>$req-&gt;upload</b>
       A convenient method to access $req-&gt;uploads.

           $upload  = $c-&gt;request-&gt;upload('field');
           @uploads = $c-&gt;request-&gt;upload('field');
           @fields  = $c-&gt;request-&gt;upload;

           for my $upload ( $c-&gt;request-&gt;upload('field') ) {
               print $upload-&gt;filename;
           }

   <b>$req-&gt;uploads</b>
       Returns a reference to a hash containing uploads. Values can be either a Catalyst::Request::Upload
       object, or an arrayref of Catalyst::Request::Upload objects.

           my $upload = $c-&gt;request-&gt;uploads-&gt;{field};
           my $upload = $c-&gt;request-&gt;uploads-&gt;{field}-&gt;[0];

   <b>$req-&gt;uri</b>
       Returns a URI object for the current request. Stringifies to the URI text.

   <b>$req-&gt;mangle_params(</b> <b>{</b> <b>key</b> <b>=&gt;</b> <b>'value'</b> <b>},</b> <b>$appendmode);</b>
       Returns a hashref of parameters stemming from the current request's params, plus the ones supplied.  Keys
       for which no current param exists will be added, keys with undefined values will be removed and keys with
       existing params will be replaced.  Note that you can supply a true value as the final argument to change
       behavior with regards to existing parameters, appending values rather than replacing them.

       A quick example:

         # URI query params foo=1
         my $hashref = $req-&gt;mangle_params({ foo =&gt; 2 });
         # Result is query params of foo=2

       versus append mode:

         # URI query params foo=1
         my $hashref = $req-&gt;mangle_params({ foo =&gt; 2 }, 1);
         # Result is query params of foo=1&amp;foo=2

       This is the code behind "uri_with".

   <b>$req-&gt;uri_with(</b> <b>{</b> <b>key</b> <b>=&gt;</b> <b>'value'</b> <b>}</b> <b>);</b>
       Returns a rewritten URI object for the current request. Key/value pairs passed in will override existing
       parameters. You can remove an existing parameter by passing in an undef value. Unmodified pairs will be
       preserved.

       You may also pass an optional second parameter that puts "uri_with" into append mode:

         $req-&gt;uri_with( { key =&gt; 'value' }, { mode =&gt; 'append' } );

       See "mangle_params" for an explanation of this behavior.

   <b>$req-&gt;remote_user</b>
       Returns the value of the "REMOTE_USER" environment variable.

   <b>$req-&gt;user_agent</b>
       Shortcut to $req-&gt;headers-&gt;user_agent. Returns the user agent (browser) version string.

   <b>$req-&gt;io_fh</b>
       Returns a psgix.io bidirectional socket, if your server supports one.  Used for when you want to
       jailbreak out of PSGI and handle bidirectional client server communication manually, such as when you are
       using cometd or websockets.

</pre><h4><b>SETUP</b> <b>METHODS</b></h4><pre>
       You should never need to call these yourself in application code, however they are useful if extending
       Catalyst by applying a request role.

   <b>$self-&gt;prepare_headers()</b>
       Sets up the "$res-&gt;headers" accessor.

   <b>$self-&gt;prepare_body()</b>
       Sets up the body using HTTP::Body

   <b>$self-&gt;prepare_body_chunk()</b>
       Add a chunk to the request body.

   <b>$self-&gt;prepare_body_parameters()</b>
       Sets up parameters from body.

   <b>$self-&gt;prepare_cookies()</b>
       Parse cookies from header. Sets up a CGI::Simple::Cookie object.

   <b>$self-&gt;prepare_connection()</b>
       Sets up various fields in the request like the local and remote addresses, request method, hostname
       requested etc.

   <b>$self-&gt;prepare_parameters()</b>
       Ensures that the body has been parsed, then builds the parameters, which are combined from those in the
       request and those in the body.

       If parameters have already been set will clear the parameters and build them again.

   <b>$self-&gt;env</b>
       Access to the raw PSGI env.

   <b>meta</b>
       Provided by Moose

</pre><h4><b>AUTHORS</b></h4><pre>
       Catalyst Contributors, see Catalyst.pm

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This library is free software. You can redistribute it and/or modify it under the same terms as Perl
       itself.

perl v5.40.0                                       2024-11-15                             <u>Catalyst::<a href="../man3pm/Request.3pm.html">Request</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>