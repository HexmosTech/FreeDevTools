<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RpcReader - read RPC requests from a client</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ivtools-dev">ivtools-dev_2.0.11d.a1-3build7_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       RpcReader - read RPC requests from a client

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;Dispatch/rpcreader.h&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       An  RpcReader  reads  RPC  requests from an rpcstream which represents a connection to a client.  When it
       reads an RPC request, it uses the request number to look up the address of a function  in  an  array  and
       calls that function to unmarshall the request's arguments and execute the request.

       An  RpcReader  is  not instantiable; you have to implement a derived class which initializes the function
       array with addresses of static member functions to unmarshall RPC requests and which defines  the  action
       to be performed when the client closes the connection.  The function array looks like this:

            typedef void (*PF)(RpcReader*, RpcHdr&amp;, rpcstream&amp;);
            PF* _function;

       Each  function  stored  in  the  array  should  extract  any arguments needed by the RPC request from the
       rpcstream, execute the RPC request, and insert any return values into the rpcstream so they can  be  sent
       back to the client.

</pre><h4><b>CONSTRUCTORS</b></h4><pre>
       <b>RpcReader(rpcstream*</b> <b>client,</b> <b>int</b> <b>nfcns)</b>
       <b>RpcReader(int</b> <b>fd,</b> <b>int</b> <b>nfcns,</b> <b>boolean</b> <b>binary</b> <b>=</b> <b>true)</b>
              If  given  a non-nil rpcstream, prepare to read RPC requests from the client using it.  If given a
              nil rpcstream, just allocate the function array.   If  given  a  file  descriptor,  create  a  new
              rpcstream  and  prepare to read RPC requests from the client using it.  ``nfcns'' sets the size of
              the function array that each constructor allocates.

</pre><h4><b>PROTECTED</b> <b>OPERATIONS</b></h4><pre>
       <b>virtual</b> <b>int</b> <b>inputReady(int)</b>
              Read an RPC request (only one request per call so  the  program  can  service  RPC  requests  from
              multiple connections in round robin fashion).  Look up the appropriate function in the reader's or
              another  reader's  function  array  and call it to handle the RPC request.  Return the appropriate
              status to tell the Dispatcher whether to detach the RpcReader, call inputReady again, or wait  for
              new  data  before  calling  inputReady  again.   A  derived class should not need to redefine this
              function.

       <b>virtual</b> <b>RpcReader*</b> <b>map(unsigned</b> <b>long</b> <b>reader)</b>
              You can redefine this function to change which reader executes an RPC  request  after  it's  read.
              Ordinarily  the  same  reader  that  reads  an  RPC request also executes it, but you can hand the
              request off to another reader as well.

       <b>virtual</b> <b>void</b> <b>connectionClosed(int</b> <b>fd)</b> <b>=</b> <b>0</b>
              You have to define this function since it may be your only chance  to  perform  cleanup  (such  as
              deleting this) when the client closes the connection.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3I/RpcHdr.3I.html">RpcHdr</a>(3I), <a href="../man3I/RpcService.3I.html">RpcService</a>(3I), <a href="../man3I/rpcstream.3I.html">rpcstream</a>(3I)

InterViews                                        27 March 1991                                    <u><a href="../man3I/RpcReader.3I.html">RpcReader</a></u>(3I)
</pre>
 </div>
</div></section>
</div>
</body>
</html>