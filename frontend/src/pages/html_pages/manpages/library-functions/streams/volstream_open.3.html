<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>volstream_open – create a FILE* stream as a volatile stream buffer</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvolatilestream-dev">libvolatilestream-dev_1.0.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>volstream_open</b> – create a FILE* stream as a volatile stream buffer

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;volatilestream.h&gt;</b>

       <b>FILE</b> <b>*volstream_open(void);</b>

       <b>int</b> <b>volstream_trunc(FILE</b> <b>*</b><u>f</u><b>,</b> <b>size_t</b> <u>length</u><b>);</b>

       <b>int</b> <b>volstream_getbuf(FILE</b> <b>*</b><u>f</u><b>,</b> <b>void</b> <b>**</b><u>buf</u><b>,</b> <b>size_t</b> <b>*</b><u>buflen</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A  volatile  stream is a stdio FILE* stream as a temporary dynamically allocated (and deallocated) memory
       buffer.

       The <b>volstream_open</b> function opens a stdio stream as a temporary memory buffer.  The buffer is dynamically
       allocated, grows as needed and it is automatically deallocated when the stream is closed.

       <b>volstream_trunc</b> truncates the buffer to the requested <u>length</u>.  If the  current  size  of  the  buffer  is
       larger than <u>length</u> the extra data is lost.  If the buffer is shorter it is extended and the extended part
       is filled with null bytes.

       <b>volstream_getbuf</b>  writes  the  current  address  and size of the buffer in <b>*buf</b> and <b>*buflen</b> respectively.
       These values remain valid only as long as the caller performs no further output  on  the  stream  or  the
       stream is closed.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon  successful completion <b>volstream_open</b> returns a FILE pointer.  Otherwise, NULL is returned and errno
       is set to indicate the error.

       <b>volstream_trunc</b> and <b>volstream_getbuf</b> return 0 or -1 if an error occurred.  In  the  event  of  an  error,
       errno is set to indicate the error.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example writes all the command arguments in a volatile stream, then it rereads the volatile
       stream one byte at a time:

              #include *stdio.h*
              #include *volatilestream.h*

              int main(int argc, char *argv[]) {
                FILE *f = volstream_open();
                int c;
                for (argv++; *argv; argv++)
                  fprintf(f, "%s\n", *argv);
                fseek(f, 0, SEEK_SET);
                while ((c = getc(f)) != EOF)
                  putchar(c);
                fclose(f);
              }

       The following example has the same effect but it rereads the arguments as a memory buffer.

              #include *stdio.h*
              #include *unistd.h*
              #include *volatilestream.h*

              int main(int argc, char *argv[]) {
                FILE *f = volstream_open();
                int c;
                for (argv++; *argv; argv++) {
                  fprintf(f, "%s\n", *argv);
                }
                fflush(f);
                ssize_t s;
                void *buf;
                volstream_getbuf(f, &amp;buf, &amp;s);
                write(STDOUT_FILENO, buf, s);
                fclose(f);
              }

</pre><h4><b>AUTHOR</b></h4><pre>
       VirtualSquare.  Project leader: Renzo Davoli.

VirtualSquare                                       July 2024                                  <u><a href="../man3/VOLSTREAM_OPEN.3.html">VOLSTREAM_OPEN</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>