<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio::SeqIO::bsml - BSML sequence input/output stream</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbio-perl-perl">libbio-perl-perl_1.7.8-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Bio::SeqIO::bsml - BSML sequence input/output stream

</pre><h4><b>SYNOPSIS</b></h4><pre>
       It is probably best not to use this object directly, but rather go through the SeqIO handler system. To
       read a BSML file:

           $stream = Bio::SeqIO-&gt;new( -file =&gt; $filename, -format =&gt; 'bsml');

           while ( my $bioSeqObj = $stream-&gt;next_seq() ) {
               # do something with $bioSeqObj
           }

       To write a Seq object to the current file handle in BSML XML format:

           $stream-&gt;write_seq( -seq =&gt; $seqObj);

       If instead you would like a XML::DOM object containing the BSML, use:

           my $newXmlObject = $stream-&gt;to_bsml( -seq =&gt; $seqObj);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This object can transform Bio::Seq objects to and from BSML (XML) flatfiles.

</pre><h4><b>FEEDBACK</b></h4><pre>
   <b>Mailing</b> <b>Lists</b>
       User feedback is an integral part of the evolution of this and other Bioperl modules. Send your comments
       and suggestions preferably to one of the Bioperl mailing lists.  Your participation is much appreciated.

         <a href="mailto:bioperl-l@bioperl.org">bioperl-l@bioperl.org</a>                  - General discussion
         <a href="http://bioperl.org/wiki/Mailing_lists">http://bioperl.org/wiki/Mailing_lists</a>  - About the mailing lists

   <b>Support</b>
       Please direct usage questions or support issues to the mailing list:

       <u><a href="mailto:bioperl-l@bioperl.org">bioperl-l@bioperl.org</a></u>

       rather than to the module maintainer directly. Many experienced and reponsive experts will be able look
       at the problem and quickly address it. Please include a thorough description of the problem with code and
       data examples if at all possible.

   <b>Reporting</b> <b>Bugs</b>
       Report bugs to the Bioperl bug tracking system to help us keep track the bugs and their resolution.  Bug
       reports can be submitted via the web:

         https://github.com/bioperl/bioperl-live/issues

   <b>Things</b> <b>Still</b> <b>to</b> <b>Do</b>
       •   The  module  now  uses  the  new Collection.pm system. However, Annotations associated with a Feature
           object still seem to use the old system, so parsing with the old methods are included..

       •   Generate Seq objects with no sequence data but an assigned length. This appears to be an  issue  with
           Bio::Seq. It is possible (and reasonable) to make a BSML document with features but no sequence data.

       •   Support "Seq-data-import". Do not know how commonly this is used.

       •   Some features are awaiting implementation in later versions of BSML. These include:

           •   Nested feature support

           •   Complex feature (ie joins)

           •   Unambiguity in strand (ie -1,0,1, not just  'complement' )

           •   More friendly dblink structures

       •   Location.pm (or RangeI::union?) appears to have a bug when 'expand' is used.

       •   More  intelligent  hunting  for  sequence and feature titles? It is not terribly clear where the most
           appropriate field is located, better grepping (eg looking for  a  reasonable  count  for  spaces  and
           numbers) may allow for titles better than "AE008041".

</pre><h4><b>AUTHOR</b> <b>-</b> <b>Charles</b> <b>Tilford</b></h4><pre>
       Bristol-Myers Squibb Bioinformatics

       Email <a href="mailto:tilfordc@bms.com">tilfordc@bms.com</a>

       I  have  developed  the BSML specific code for this package, but have used code from other SeqIO packages
       for much of the nuts-and-bolts. In particular I have used code from the embl.pm module either directly or
       as a framework for many of the subroutines that are common to SeqIO modules.

</pre><h4><b>METHODS</b></h4><pre>
   <b>next_seq</b>
        Title   : next_seq
        Usage   : my $bioSeqObj = $stream-&gt;next_seq
        Function: Retrieves the next sequence from a SeqIO::bsml stream.
        Returns : A reference to a Bio::Seq::RichSeq object
        Args    :

   <b>to_bsml</b>
        Title   : to_bsml
        Usage   : my $domDoc = $obj-&gt;to_bsml(@args)
        Function: Generates an XML structure for one or more Bio::Seq objects.
                  If $seqref is an array ref, the XML tree generated will include
                  all the sequences in the array.
        Returns : A reference to the XML DOM::Document object generated / modified
        Args    : Argument array in form of -key =&gt; val. Recognized keys:

             -seq A Bio::Seq reference, or an array reference of many of them

          -xmldoc Specifies an existing XML DOM document to add the sequences
                  to. If included, then only data (no page formatting) will
                  be added. If not, a new XML::DOM::Document will be made,
                  and will be populated with both &lt;Sequence&gt; data, as well as
                  &lt;Page&gt; display elements.

          -nodisp Do not generate &lt;Display&gt; elements, or any children
                  thereof, even if -xmldoc is not set.

        -skipfeat If set to 'all', all &lt;Feature&gt;s will be skipped.  If it is
                  a hash reference, any &lt;Feature&gt; with a class matching a key
                  in the hash will be skipped - for example, to skip 'source'
                  and 'score' features, use:

                      -skipfeat =&gt; { source =&gt; 'Y', score =&gt; 'Y' }

        -skiptags As above: if set to 'all', no tags are included, and if a
                  hash reference, those specific tags will be ignored.

                  Skipping some or all tags and features can result in
                  noticeable speed improvements.

          -nodata If true, then &lt;Seq-data&gt; will not be included.  This may be
                  useful if you just want annotations and do not care about
                  the raw ACTG information.

          -return Default is 'xml', which will return a reference to the BSML
                  XML object. If set to 'seq' will return an array ref of the
                  &lt;Sequence&gt; objects added (rather than the whole XML object)

           -close Early BSML browsers will crash if an element *could* have
                  children but does not, and is closed as an empty element
                  e.g. &lt;Styles/&gt;. If -close is true, then such tags are given
                  a comment child to explicitly close them e.g.  &lt;Styles&gt;&lt;!--
                  --&gt;&lt;/Styles&gt;. This is default true, set to "0" if you do
                  not want this behavior.

        Examples : my $domObj = $stream-&gt;to_bsml( -seq =&gt; \@fourCoolSequenceObjects,
                                                  -skipfeat =&gt; { source =&gt; 1 },
                                                 );

                   # Or add sequences to an existing BSML document:
                   $stream-&gt;to_bsml(-seq =&gt; \@fourCoolSequenceObjects,
                                    -skipfeat =&gt; { source =&gt; 1 },
                                    -xmldoc =&gt; $myBsmlDocumentInProgress,  );

   <b>write_seq</b>
        Title   : write_seq
        Usage   : $obj-&gt;write_seq(@args)
        Function: Prints out an XML structure for one or more Bio::Seq objects.
                  If $seqref is an array ref, the XML tree generated will include
                  all the sequences in the array. This method is fairly simple,
                  most of the processing is performed within to_bsml.
        Returns : A reference to the XML object generated / modified
        Args    : Argument array. Recognized keys:

             -seq A Bio::Seq reference, or an array reference of many of them

                  Alternatively, the method may be called simply as...

                  $obj-&gt;write_seq( $bioseq )

                  ... if only a single argument is passed, it is assumed that
                  it is the sequence object (can also be an array ref of
                  many Seq objects )

             -printmime If true prints "Content-type: $mimetype\n\n" at top of
                  document, where $mimetype is the value designated by this
                  key. For generic XML use text/xml, for BSML use text/x-bsml

             -return This option will be suppressed, since the nature of this
                  method is to print out the XML document. If you wish to
                  retrieve the &lt;Sequence&gt; objects generated, use the to_bsml
                  method directly.

</pre><h4><b>INTERNAL</b> <b>METHODS</b></h4><pre>
       The following methods are used for internal processing, and should probably not be accessed by the user.

   <b>_parse_location</b>
        Title   : _parse_location
        Usage   : $obj-&gt;_parse_location($xmlDocument, $parentElem, $SeqFeatureObj)
        Function: Adds &lt;Interval-loc&gt; and &lt;Site-loc&gt; children to &lt;$parentElem&gt; based
                  on locations / sublocations found in $SeqFeatureObj. If
                  sublocations exist, the original location will be ignored.
        Returns : An array ref containing the elements added to the parent.
                  These will have already been added to &lt;$parentElem&gt;
        Args    : 0 The DOM::Document being modified
                  1 The DOM::Element parent that you want to add to
                  2 Reference to the Bio::SeqFeature being analyzed

   <b>_parse_bsml_feature</b>
        Title   : _parse_bsml_feature
        Usage   : $obj-&gt;_parse_bsml_feature($xmlFeature )
        Function: Will examine the &lt;Feature&gt; element provided by $xmlFeature and
                  return a generic seq feature.
        Returns : Bio::SeqFeature::Generic
        Args    : 0 XML::DOM::Element &lt;Feature&gt; being analyzed.

   <b>_parse_bsml_location</b>
        Title   : _parse_bsml_location
        Usage   : $obj-&gt;_parse_bsml_feature( $intOrSiteLoc, $gsfObject )
        Function: Will examine the &lt;Interval-loc&gt; or &lt;Site-loc&gt; element provided
        Returns : Bio::SeqFeature::Generic
        Args    : 0 XML::DOM::Element &lt;Interval/Site-loc&gt; being analyzed.
                  1 Optional SeqFeature::Generic to use

   <b>_parse_reference</b>
        Title   : _parse_reference
        Usage   : $obj-&gt;_parse_reference(@args )
        Function: Makes a new &lt;Reference&gt; object from a ::Reference, which is
                  then stored in an array provide by -refs. It will be
                  appended to the XML tree later.
        Returns :
        Args    : Argument array. Recognized keys:

             -xml The DOM::Document being modified

             -refobj The Annotation::Reference Object

             -refs An array reference to hold the new &lt;Reference&gt; DOM object

             -id Optional. If the XML id for the 'calling' element is
                  provided, it will be placed in any &lt;Reference&gt; refs
                  attribute.

   <b>_parse_annotation</b>
        Title   : _parse_annotation
        Usage   : $obj-&gt;_parse_annotation(@args )
        Function: Will examine any Annotations found in -obj. Data found in
                  ::Comment and ::DBLink structures, as well as Annotation
                  description fields are stored in -desc for later
                  generation of &lt;Attribute&gt;s. &lt;Reference&gt; objects are generated
                  from ::References, and are stored in -refs - these will
                  be appended to the XML tree later.
        Returns :
        Args    : Argument array. Recognized keys:

             -xml The DOM::Document being modified

             -obj Reference to the Bio object being analyzed

             -descr An array reference for holding description text items

             -refs An array reference to hold &lt;Reference&gt; DOM objects

             -id Optional. If the XML id for the 'calling' element is
                  provided, it will be placed in any &lt;Reference&gt; refs
                  attribute.

   <b>_parse_annotation_old</b>
           Title   : _parse_annotation_old
        Usage   : $obj-&gt;_parse_annotation_old(@args)
        Function: As above, but for the old Annotation system.
                  Apparently needed because Features are still using the old-style
                  annotations?
        Returns :
        Args    : Argument array. Recognized keys:

             -xml The DOM::Document being modified

             -obj Reference to the Bio object being analyzed

             -descr An array reference for holding description text items

             -refs An array reference to hold &lt;Reference&gt; DOM objects

             -id Optional. If the XML id for the 'calling' element is
                  provided, it will be placed in any &lt;Reference&gt; refs
                  attribute.

   <b>_add_page</b>
        Title   : _add_page
        Usage   : $obj-&gt;_add_page($xmlDocument, $xmlSequenceObject)
        Function: Adds a simple &lt;Page&gt; and &lt;View&gt; structure for a &lt;Sequence&gt;
        Returns : a reference to the newly created &lt;Page&gt;
        Args    : 0 The DOM::Document being modified
                  1 Reference to the &lt;Sequence&gt; object

   <b>_addel</b>
        Title   : _addel
        Usage   : $obj-&gt;_addel($parentElem, 'ChildName',
                               { anAttr =&gt; 'someValue', anotherAttr =&gt; 'aValue',})
        Function: Add an element with attribute values to a DOM tree
        Returns : a reference to the newly added element
        Args    : 0 The DOM::Element parent that you want to add to
                  1 The name of the new child element
                  2 Optional hash reference containing
                    attribute name =&gt; attribute value assignments

   <b>_show_dna</b>
        Title   : _show_dna
        Usage   : $obj-&gt;_show_dna($newval)
        Function: (cut-and-pasted directly from embl.pm)
        Returns : value of _show_dna
        Args    : newvalue (optional)

   <b>_initialize</b>
        Title   : _initialize
        Usage   : $dom = $obj-&gt;_initialize(@args)
        Function: Coppied from embl.pm, and augmented with initialization of the
                  XML DOM tree
        Returns :
        Args    : -file =&gt; the XML file to be parsed

   <b>_parseparams</b>
        Title   : _parseparams
        Usage   : my $paramHash = $obj-&gt;_parseparams(@args)
        Function: Borrowed from Bio::Parse.pm, who borrowed it from CGI.pm
                  Lincoln Stein -&gt; Richard Resnick -&gt; here
        Returns : A hash reference of the parameter keys (uppercase) pointing to
                  their values.
        Args    : An array of key, value pairs. Easiest to pass values as:
                  -key1 =&gt; value1, -key2 =&gt; value2, etc
                  Leading "-" are removed.

   <b>_parse_xml</b>
        Title   : _parse_xml
        Usage   : $dom = $obj-&gt;_parse_xml($filename)
        Function: uses XML::DOM to construct a DOM tree from the BSML document
        Returns : a reference to the parsed DOM tree
        Args    : 0 Path to the XML file needing to be parsed

</pre><h4><b>TESTING</b> <b>SCRIPT</b></h4><pre>
       The following script may be used to test the conversion process. You will need a file of the  format  you
       wish  to test. The script will convert the file to BSML, store it in /tmp/bsmltemp, read that file into a
       new SeqIO stream, and write it back as the original  format.  Comparison  of  this  second  file  to  the
       original  input file will allow you to track where data may be lost or corrupted. Note that you will need
       to specify $readfile and $readformat.

        use Bio::SeqIO;
        # Tests preservation of details during round-trip conversion:
        # $readformat -&gt; BSML -&gt; $readformat
        my $tempspot = "/tmp/bsmltemp";  # temp folder to hold generated files
        my $readfile = "rps4y.embl";     # The name of the file you want to test
        my $readformat = "embl";         # The format of the file being tested

        system "mkdir $tempspot" unless (-d $tempspot);
        # Make Seq object from the $readfile
        my $biostream = Bio::SeqIO-&gt;new( -file =&gt; "$readfile" );
        my $seq = $biostream-&gt;next_seq();

        # Write BSML from SeqObject
        my $bsmlout = Bio::SeqIO-&gt;new(-format =&gt; 'bsml',
                                      -file =&gt; "&gt;$tempspot/out.bsml");
        warn "\nBSML written to $tempspot/out.bsml\n";
        $bsmlout-&gt;write_seq($seq);
        # Need to kill object for following code to work... Why is this so?
        $bsmlout = "";

        # Make Seq object from BSML
        my $bsmlin = Bio::SeqIO-&gt;new(-file =&gt; "$tempspot/out.bsml",
                                     -format =&gt; 'bsml');
        my $seq2 = $bsmlin-&gt;next_seq();

        # Write format back from Seq Object
        my $genout = Bio::SeqIO-&gt;new(-format =&gt; $readformat,
                                     -file =&gt; "&gt;$tempspot/out.$readformat");
        $genout-&gt;write_seq($seq2);
        warn "$readformat  written to $tempspot/out.$readformat\n";

        # BEING LOST:
        # Join information (not possible in BSML 2.2)
        # Sequence type (??)

perl v5.32.1                                       2021-08-15                              <u>Bio::SeqIO::<a href="../man3pm/bsml.3pm.html">bsml</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>