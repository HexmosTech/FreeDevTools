<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MCE::Util - Utility functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmce-perl">libmce-perl_1.901-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MCE::Util - Utility functions

</pre><h4><b>VERSION</b></h4><pre>
       This document describes MCE::Util version 1.901

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use MCE::Util;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A utility module for MCE. Nothing is exported by default. Exportable is get_ncpu.

   <b>get_ncpu()</b>
       Returns the number of logical (online/active/enabled) CPU cores; never smaller than one.

        my $ncpu = MCE::Util::get_ncpu();

       Specifying 'auto' for max_workers calls MCE::Util::get_ncpu automatically.  MCE 1.521 sets an upper-limit
       when specifying 'auto'. The reason is mainly to safeguard apps from spawning 100 workers on a box having
       100 cores.  This is important for apps which are IO-bound.

        use MCE;

        ## 'Auto' is the total # of logical cores (lcores) (8 maximum, MCE 1.521).
        ## The computed value will not exceed the # of logical cores on the box.

        my $mce = MCE-&gt;new(

        max_workers =&gt; 'auto',       ##  1 on HW with 1-lcores;  2 on  2-lcores
        max_workers =&gt;  16,          ## 16 on HW with 4-lcores; 16 on 32-lcores

        max_workers =&gt; 'auto',       ##  4 on HW with 4-lcores;  8 on 16-lcores
        max_workers =&gt; 'auto*1.5',   ##  4 on HW with 4-lcores; 12 on 16-lcores
        max_workers =&gt; 'auto*2.0',   ##  4 on HW with 4-lcores; 16 on 16-lcores
        max_workers =&gt; 'auto/2.0',   ##  2 on HW with 4-lcores;  4 on 16-lcores
        max_workers =&gt; 'auto+3',     ##  4 on HW with 4-lcores; 11 on 16-lcores
        max_workers =&gt; 'auto-1',     ##  3 on HW with 4-lcores;  7 on 16-lcores

        max_workers =&gt; MCE::Util::get_ncpu,   ## run on all lcores
        );

       In summary:

        1. Auto has an upper-limit of 8 in MCE 1.521 (# of lcores, 8 maximum)
        2. Math may be applied with auto (*/+-) to change the upper limit
        3. The computed value for auto will not exceed the total # of lcores
        4. One can specify max_workers explicitly to a hard value
        5. MCE::Util::get_ncpu returns the actual # of lcores

</pre><h4><b>ACKNOWLEDGMENTS</b></h4><pre>
       The portable code for detecting the number of processors was adopted from Test::Smoke::SysInfo.

</pre><h4><b>INDEX</b></h4><pre>
       MCE, MCE::Core

</pre><h4><b>AUTHOR</b></h4><pre>
       Mario E. Roy, &lt;marioeroy AT gmail DOT com&gt;

perl v5.40.0                                       2025-01-11                                     <u>MCE::<a href="../man3pm/Util.3pm.html">Util</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>