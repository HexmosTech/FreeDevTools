<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plack::Test::Agent - OO interface for testing low-level Plack/PSGI apps</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libplack-test-agent-perl">libplack-test-agent-perl_1.5-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Plack::Test::Agent - OO interface for testing low-level Plack/PSGI apps

</pre><h4><b>VERSION</b></h4><pre>
       version 1.5

   <b>SYNOPSIS</b>
           use Test::More;
           use Plack::Test::Agent;

           my $app          = sub { ... };
           my $local_agent  = Plack::Test::Agent-&gt;new( app =&gt; $app );
           my $server_agent = Plack::Test::Agent-&gt;new(
                               app    =&gt; $app,
                               server =&gt; 'HTTP::Server::Simple' );

           my $local_res    = $local_agent-&gt;get( '/' );
           my $server_res   = $server_agent-&gt;get( '/' );

           ok $local_res-&gt;is_success,  'local GET / should succeed';
           ok $server_res-&gt;is_success, 'server GET / should succeed';

   <b>DESCRIPTION</b>
       "Plack::Test::Agent" is an OO interface to test PSGI applications. It can perform GET and POST requests
       against PSGI applications either in process or over HTTP through a Plack::Handler compatible backend.

       <b>NOTE:</b> This is an experimental module and its interface may change.

   <b>CONSTRUCTION</b>
       <u>"new"</u>

       The "new" constructor creates an instance of "Plack::Test::Agent". This constructor takes one mandatory
       named argument and several optional arguments.

       •   "app" is the mandatory argument. You must provide a PSGI application to test.

       •   "server"  is  an  optional argument. When provided, "Plack::Test::Agent" will attempt to start a PSGI
           handler and  will  communicate  via  HTTP  to  the  application  running  through  the  handler.  See
           Plack::Loader for details on selecting the appropriate server.

       •   "host" is an optional argument representing the name or IP address for the server to use. The default
           is "localhost".

       •   "port"  is  an optional argument representing the TCP port to for the server to use. If not provided,
           the service will run on a randomly selected available port outside of the IANA reserved  range.  (See
           Test::TCP for details on the selection of the port number.)

       •   "ua" is an optional argument of something which conforms to the LWP::UserAgent interface such that it
           provides a "request" method which takes an HTTP::Request object and returns an HTTP::Response object.
           The default is an instance of "LWP::UserAgent".

       •   "jar"  is  an  optional argument for a HTTP::Cookies instance that will be used as cookie jar for the
           requests, by default plain one is created.

   <b>METHODS</b>
       This class provides several useful methods:

       <u>"get"</u>

       This method takes a URI and makes a "GET" request against the PSGI application with that URI. It  returns
       an HTTP::Response object representing the results of that request.

       <u>"post"</u>

       This method takes a URI and makes a "POST" request against the PSGI application with that URI. It returns
       an  HTTP::Response object representing the results of that request. As an optional second parameter, pass
       an array reference of key/value pairs for the form content:

           $agent-&gt;post( '/edit_user',
               [
                   shoe_size =&gt; '10.5',
                   eye_color =&gt; 'blue green',
                   status    =&gt; 'twin',
               ]);

       <u>"execute_request"</u>

       This method takes an HTTP::Request, performs it against the bound app,  and  returns  an  HTTP::Response.
       This allows you to craft your own requests directly.

       <u>"get_mech"</u>

       Used  internally  to  create  a  default  UserAgent,  if  none is provided to the constructor.  Returns a
       Test::WWW::Mechanize::Bound object.

       <u>"normalize_uri"</u>

       Used internally to ensure that all requests use the correct scheme, host and port.  The scheme  and  host
       default to "http" and "localhost" respectively, while the port is determined by Test::TCP.

       <u>"start_server"</u>

       Starts  a test server via Test::TCP.  If a "server" arg has been provided to the constructor, it will use
       this class to load a server.  Defaults to letting Plack::Loader decide which server class to use.

   <b>CREDITS</b>
       Thanks to Zbigniew Łukasiak and Tatsuhiko Miyagawa for suggestions.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   chromatic &lt;<a href="mailto:chromatic@wgz.org">chromatic@wgz.org</a>&gt;

       •   Dave Rolsky &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

       •   Ran Eilam &lt;<a href="mailto:ran.eilam@gmail.com">ran.eilam@gmail.com</a>&gt;

       •   Olaf Alders &lt;<a href="mailto:olaf@wundercounter.com">olaf@wundercounter.com</a>&gt;

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       •   Dave Rolsky &lt;<a href="mailto:drolsky@maxmind.com">drolsky@maxmind.com</a>&gt;

       •   Olaf Alders &lt;<a href="mailto:oalders@maxmind.com">oalders@maxmind.com</a>&gt;

       •   Ran Eilam &lt;<a href="mailto:reilam@maxmind.com">reilam@maxmind.com</a>&gt;

       •   Syohei YOSHIDA &lt;<a href="mailto:syohex@gmail.com">syohex@gmail.com</a>&gt;

       •   Torsten Raudssus &lt;<a href="mailto:torsten@raudss.us">torsten@raudss.us</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2011 by chromatic.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.36.0                                       2022-10-14                            <u>Plack::Test::<a href="../man3pm/Agent.3pm.html">Agent</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>