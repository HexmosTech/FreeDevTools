<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::Mock::Cmd - Mock system(), exec(), and qx() for testing</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-mock-cmd-perl">libtest-mock-cmd-perl_0.7-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::Mock::Cmd - Mock system(), exec(), and qx() for testing

</pre><h4><b>VERSION</b></h4><pre>
       This document describes Test::Mock::Cmd version 0.7

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Test::Mock::Cmd 'system' =&gt; \&amp;my_cmd_mocker, 'qx' =&gt; \&amp;my_cmd_mocker;

       or

           use Test::Mock::Cmd \&amp;my_cmd_mocker;

       or

           use Test::Mock::Cmd \&amp;my_mock_system, \&amp;my_mock_exec, \&amp;my_mock_qx;

       or

           use Test::Mock::Cmd 'system' =&gt; { X }, 'qx' =&gt;  { X }; # can mix and match hash ref and code ref

       or

           use Test::Mock::Cmd { X };

       or

           use Test::Mock::Cmd { X }, { X }, { X }; # can mix and match hash ref and code ref

       Typical testing usage example:

           use Test::More;

           our $current_system = sub { diag( explain( \@_ ) ); return 0; };
           use Test::Mock::Cmd 'system' =&gt; sub { $current_system-&gt;(@_) };

           use Foo;

           X

           {
               my $sys;
               local $current_system = sub { $sys = \@_ };

               <a href="../man1/foo.1.html">foo</a>(1);
               is($sys, undef, 'foo() does not call system w/ true arg');

               $sys = undef; # just in case
               foo();
               isnt($sys, undef, 'foo() calls system by default');
               is_deeply($sys, [qw(/bin/chibby -wibby foo)], 'foo() calls system with expected args);
           }

           {
               local $current_system = sub { return 0 };
               ok foo(), 'foo() returns true when system() works';
           }

           {
               local $current_system = sub { return 1 };
               ok !foo(), 'foo() returns false when system() fails';
           }

           X

           done_testing;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mock <b>system()</b>, <b>exec()</b>, <b>qx()</b> (AKA `` and <b>readpipe()</b>) with your own functions in order to test code that
       may call them.

       Some uses might be:

       1.  avoid  actually running the system command, just pretend we did (simulate [un]expected output, return
           values, etc)

       2.  test various return value handling (e.g. the system command core dumps how  does  the  object  handle
           that)

       3.  test that the arguments that will be passed to a system command are correct

       4.  simulate  that really hard to reproduce low level edge case to make sure your code works correctly on
           affected systems

       5.  etc etc

</pre><h4><b>INTERFACE</b></h4><pre>
   <b>Commence</b> <b>mocking</b>
       Per the synopsis, you can provide <b>import()</b> with a hash whose keys are 'system', 'exec', or 'qx' and whose
       values are the code reference you want to replace the key's  functionality  with,  1  code  reference  to
       replace all 3 functions or 3 code references to replace <b>system()</b>, <b>exec()</b>, and <b>qx()</b> (in that order).

       As  of v0.6 you can pass in a hash instead of a coderef that will generate a handler that defaults to the
       original call if the first argument given is not a key in said hash.

           use Test::Mock::Cmd 'system' =&gt; {
               'git' =&gt; sub { X },
           };
           system('git', X); # calls your function
           system('whatever', X); # calls the original system

       <u>Caveat</u>

       Any code loaded before the mock functions are setup will retain normal <b>system()</b>, etc behavior.  (even  if
       the <b>system()</b> does not happen until much later!)

          use X; # has functions that call system()
          use Test::Mock::Cmd ...
          use Y; # has functions that call system()
          X::i_call_system(...); # normal system() happens
          Y::i_call_system(...); # mocked system() happens

   <b>Getting</b> <b>access</b> <b>to</b> <b>the</b> <b>original,</b> <b>un-mocked,</b> <b>functionality.</b>
       None of these are exportable.

       <b>Test::Mock::Cmd::orig_system()</b>
           Original, not-mocked "system_LIST" in perlfunc

       <b>Test::Mock::Cmd::orig_exec()</b>
           Original, not-mocked "exec" in perlfunc

       <b>Test::Mock::Cmd::orig_qx()</b>
           Original, not-mocked "readpipe" in perlfunc

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       "Not a CODE or HASH reference"
           The given value is not a code reference or a hash reference and should be one or the other.

       "Key is not system, exec, or qx"
           A key in your argument hash is invalid.

       "Test::Mock::Cmd-&gt;import() requires a 1-3 key hash, 1 code/hash reference, or 3 code/hash references as
       arguments"
           You are not passing in the required one or three arguments.

</pre><h4><b>CONFIGURATION</b> <b>AND</b> <b>ENVIRONMENT</b></h4><pre>
       Test::Mock::Cmd requires no configuration files or environment variables.

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       None.

</pre><h4><b>INCOMPATIBILITIES</b></h4><pre>
       None reported.

</pre><h4><b>BUGS</b> <b>AND</b> <b>FEATURES</b></h4><pre>
       Please report any bugs or feature requests (and a pull request for bonus points)
        through the issue tracker at &lt;https://github.com/drmuey/p5-Test-Mock-Cmd/issues&gt;.

</pre><h4><b>See</b> <b>Also</b></h4><pre>
       Test::MockCommand for a more complex (and much heavier) object based approach to this.

</pre><h4><b>AUTHOR</b></h4><pre>
       Daniel Muey  "&lt;<a href="http://drmuey.com/cpan_contact.pl">http://drmuey.com/cpan_contact.pl</a>&gt;"

</pre><h4><b>LICENCE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2011 cPanel, Inc. "&lt;<a href="mailto:copyright@cpanel.net">copyright@cpanel.net</a>&gt;&gt;". All rights reserved.

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself, either Perl version 5.10.1 or, at your  option,  any  later  version  of  Perl  5  you  may  have
       available.

</pre><h4><b>DISCLAIMER</b> <b>OF</b> <b>WARRANTY</b></h4><pre>
       BECAUSE  THIS  SOFTWARE  IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE SOFTWARE, TO THE EXTENT
       PERMITTED BY APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS  AND/OR  OTHER
       PARTIES  PROVIDE  THE  SOFTWARE  "AS  IS"  WITHOUT  WARRANTY  OF  ANY  KIND, EITHER EXPRESSED OR IMPLIED,
       INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND  FITNESS  FOR  A  PARTICULAR
       PURPOSE.  THE  ENTIRE  RISK  AS  TO  THE  QUALITY AND PERFORMANCE OF THE SOFTWARE IS WITH YOU. SHOULD THE
       SOFTWARE PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR, OR CORRECTION.

       IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER,  OR  ANY
       OTHER  PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE SOFTWARE AS PERMITTED BY THE ABOVE LICENCE, BE LIABLE
       TO YOU FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING  OUT  OF
       THE  USE  OR  INABILITY  TO  USE  THE  SOFTWARE  (INCLUDING BUT NOT LIMITED TO LOSS OF DATA OR DATA BEING
       RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE SOFTWARE  TO  OPERATE
       WITH  ANY OTHER SOFTWARE), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH
       DAMAGES.

perl v5.36.0                                       2023-01-24                               <u>Test::Mock::<a href="../man3pm/Cmd.3pm.html">Cmd</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>