<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ClamAV::Client - A client class for the ClamAV "clamd" virus scanner daemon</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libclamav-client-perl">libclamav-client-perl_0.11+ds-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ClamAV::Client - A client class for the ClamAV "clamd" virus scanner daemon

</pre><h4><b>VERSION</b></h4><pre>
       0.11

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Creating</b> <b>a</b> <b>scanner</b> <b>client</b>
           use ClamAV::Client;

           # Try using socket options from clamd.conf, or use default socket:
           my $scanner = ClamAV::Client-&gt;new();

           # Use a local Unix domain socket:
           my $scanner = ClamAV::Client-&gt;new(
               socket_name     =&gt; '/var/run/clamav/clamd.ctl'
           );

           # Use a TCP socket:
           my $scanner = ClamAV::Client-&gt;new(
               socket_host     =&gt; '127.0.0.1',
               socket_port     =&gt; 3310
           );

           die("ClamAV daemon not alive")
               if not defined($scanner) or not $scanner-&gt;ping();

   <b>Daemon</b> <b>maintenance</b>
           my $version = $scanner-&gt;version;
                                   # Retrieve the ClamAV version string.

           $scanner-&gt;reload();     # Reload the malware pattern database.

           $scanner-&gt;quit();       # Terminates the ClamAV daemon.
           $scanner-&gt;shutdown();   # Likewise.

   <b>Path</b> <b>scanning</b> <b>(lazy)</b>
           # Scan a single file or a whole directory structure,
           # and stop at the first infected file:
           my ($path, $result) = $scanner-&gt;scan_path($path);
           my ($path, $result) = $scanner-&gt;scan_path(
               $path, ClamAV::Client::SCAN_MODE_NORMAL );
           my ($path, $result) = $scanner-&gt;scan_path(
               $path, ClamAV::Client::SCAN_MODE_RAW );

   <b>Path</b> <b>scanning</b> <b>(complete)</b>
           # Scan a single file or a whole directory structure,
           # and scan all files without stopping at the first infected one:
           my %results = $scanner-&gt;scan_path_complete($path);
           while (my ($path, $result) = each %results) { ... }

   <b>Other</b> <b>scanning</b> <b>methods</b>
           # Scan a stream, i.e. read from an I/O handle:
           my $result = $scanner-&gt;scan_stream($handle);

           # Scan a scalar value:
           my $result = $scanner-&gt;scan_scalar(\$value);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ClamAV::Client</b> is a class acting as a client for a ClamAV "clamd" virus scanner daemon.  The daemon may
       run locally or on a remote system as <b>ClamAV::Client</b> can use both Unix domain sockets and TCP/IP sockets.
       The full functionality of the "clamd" client/server protocol is supported.

   <b>Constructor</b>
       The following constructor is provided:

       <b>new(%options)</b>: RETURNS ClamAV::Client
           Creates  a new "ClamAV::Client" object.  If <u>no</u> socket options are specified, first the socket options
           from  the  local  "clamd.conf"  configuration  file  are  tried,  then   the   Unix   domain   socket
           "/var/run/clamav/clamd.ctl"  is  tried,  then  finally the TCP/IP socket at 127.0.0.1 on port 3310 is
           tried.  If either Unix domain or TCP/IP socket options are explicitly specified, only these are used.

           %options is a list of key/value pairs representing any of the following options:

           <b>socket_name</b>
               A  scalar  containing  the  absolute  name  of  the  local  Unix  domain  socket.   Defaults   to
               <b>'/var/run/clamav/clamd.ctl'</b>.

           <b>socket_host</b>
               A scalar containing the name or IP address of the TCP/IP socket.  Defaults to <b>'127.0.0.1'</b>.

           <b>socket_port</b>
               A scalar containing the port number of the TCP/IP socket.  Defaults to <b>3310</b>.

   <b>Instance</b> <b>methods</b>
       The following instance methods are provided:

       <u>Daemon</u> <u>maintenance</u>

       <b>ping</b>: RETURNS SCALAR; THROWS ClamAV::Client::Error
           Returns  <b>true</b>  ('PONG')  if  the  ClamAV  daemon  is alive.  Throws a ClamAV::Client::Error exception
           otherwise.

       <b>version</b>: RETURNS SCALAR; THROWS ClamAV::Client::Error
           Returns the version string of the ClamAV daemon.

       <b>reload</b>: RETURNS SCALAR; THROWS ClamAV::Client::Error
           Instructs the ClamAV daemon to reload its malware database.  Returns <b>true</b> if the reloading  succeeds,
           or throws a ClamAV::Client::Error exception otherwise.

       <b>quit</b>: RETURNS SCALAR; THROWS ClamAV::Client::Error
       <b>shutdown</b>: RETURNS SCALAR; THROWS ClamAV::Client::Error
           Terminates   the   ClamAV   daemon.    Returns   <b>true</b>  if  the  termination  succeeds,  or  throws  a
           ClamAV::Client::Error exception otherwise.

       <b>scan_path($path)</b>: RETURNS SCALAR, SCALAR; THROWS ClamAV::Client::Error
       <b>scan_path($path,</b> <b>$scan_mode)</b>: RETURNS SCALAR, SCALAR; THROWS ClamAV::Client::Error
           Scans a single file or a whole directory structure, and stops at the first infected file found.   The
           specified    path    must   be   absolute.    A   scan   mode   may   be   specified:   a   mode   of
           <b>ClamAV::Client::SCAN_MODE_NORMAL</b> (which is the default) causes a normal scan  ("SCAN")  with  archive
           support  enabled,  a  mode  of  <b>ClamAV::Client::SCAN_MODE_RAW</b>  causes a raw scan with archive support
           disabled.

           If an infected file is found, returns a list consisting of the path of the file and the name  of  the
           malware signature that matched the file.  Otherwise, returns the originally specified path and <b>undef</b>.

       <b>scan_path_complete($path)</b>: RETURNS HASH; THROWS ClamAV::Client::Error
           Scans  a  single  file  or a whole directory structure <u>completely</u>, not stopping at the first infected
           file found.  The specified path must be absolute.  Only the normal, non-raw  mode  is  supported  for
           complete scans by ClamAV.

           Returns  a  hash with a list of infected files found, with the file paths as the keys and the matched
           malware signature names as the values.

       <b>scan_stream($handle)</b>: RETURNS SCALAR; THROWS ClamAV::Client::Error
           Scans a stream, that is, reads from an I/O handle.  If the stream is found to  be  infected,  returns
           the name of the matching malware signature, <b>undef</b> otherwise.

       <b>scan_scalar(\$value)</b>: RETURNS SCALAR; THROWS ClamAV::Client::Error
           Scans the value referenced by the given scalarref.  If the value is found to be infected, returns the
           name of the matching malware signature, <b>undef</b> otherwise.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The clamd and clamav man-pages.

</pre><h4><b>AVAILABILITY</b> <b>and</b> <b>SUPPORT</b></h4><pre>
       The      latest     version     of     ClamAV::Client     is     available     on     CPAN     and     at
       &lt;<a href="http://www.mehnle.net/software/clamav-client">http://www.mehnle.net/software/clamav-client</a>&gt;.

       Support is usually (but not guaranteed to be) given by the author, Julian Mehnle &lt;<a href="mailto:julian@mehnle.net">julian@mehnle.net</a>&gt;.

</pre><h4><b>AUTHOR</b> <b>and</b> <b>LICENSE</b></h4><pre>
       ClamAV::Client is Copyright (C) 2004-2005 Julian Mehnle &lt;<a href="mailto:julian@mehnle.net">julian@mehnle.net</a>&gt;.

       ClamAV::Client is free software.  You may use, modify, and distribute it under the  same  terms  as  Perl
       itself, i.e. under the GNU GPL or the Artistic License.

perl v5.38.2                                       2024-05-16                                <u>ClamAV::<a href="../man3pm/Client.3pm.html">Client</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>