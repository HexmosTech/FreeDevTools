<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paranoid::IO::FileMultiplexer::Block::FileHeader - File Header Block</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libparanoid-perl">libparanoid-perl_2.10-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Paranoid::IO::FileMultiplexer::Block::FileHeader - File Header Block

</pre><h4><b>VERSION</b></h4><pre>
       $Id: lib/Paranoid/IO/FileMultiplexer/Block/FileHeader.pm, 2.10 2022/03/08 00:01:04 acorliss Exp $

</pre><h4><b>SYNOPSIS</b></h4><pre>
           $obj = Paranoid::IO::FileMultiplexer::Block::FileHeader-&gt;new(
                   $filename, $bsize);

           $count   = $obj-&gt;blocks;
           $version = $obj-&gt;version;
           %streams = $obj-&gt;streams;
           $max     = $obj-&gt;maxStreams;
           %model   = $obj-&gt;model;

           $rv = $obj-&gt;writeSig;
           $rv = $obj-&gt;readSig;
           $rv = $obj-&gt;writeBlocks;
           $count = $obj-&gt;readBlocks;
           $rv = $obj-&gt;incrBlocks;
           $rv = $obj-&gt;validateBlocks;

           $rv = $obj-&gt;writeStreams;
           $rv = $obj-&gt;readStreams;
           $rv = $obj-&gt;addStream($sname, $bn);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class is not meant to be used directly, but as part of the Paranoid::IO::FileMultiplexer
       functionality.  This provides functionality necessary for manipulation of the file header block.

       This module does presume that whatever file it is being used on has already been opened in the
       appropriate mode, and that the Paranoid::IO flock stack has been enabled.  For the purposes of
       Paranoid::IO::FileMultiplexer, this is done in that class.

</pre><h4><b>SUBROUTINES/METHODS</b></h4><pre>
   <b>new</b>
           $obj =
               Paranoid::IO::FileMultiplexer::Block::FileHeader-&gt;new($file, $blockSize);

       This creates a new instance of a file header block object.  It requires the filename in order to retrieve
       the cached file handle from Paranoid::IO, and the size of the block.  This always writes to the first
       block of the file.

       <b>NOTE:</b> creating an object does not automatically create the file and/or write a signature.  That must be
       done using the methods below.

   <b>blocks</b>
           $count = $obj-&gt;blocks;

       This method returns the value of the blocks field in the file header.  This is the total number of blocks
       allocated in the file to date.  Note that this is only the cached value stored in the object.  Other
       methods are provided for writing and reading the value from the file.

   <b>version</b>
           $ver = $obj-&gt;version;

       This method returns the file format version as a string.

   <b>streams</b>
           %streams = $obj-&gt;streams;

       This method returns a hash of streams allocated in the file, in the format of <u>stream</u> <u>name</u> =&gt; <u>block</u>
       <u>number</u>.

   <b>maxStreams</b>
           $max = $obj-&gt;maxStreams;

       This method returns the maximum number of streams supported by this file header.

   <b>model</b>
           $stats = $obj-&gt;model;

       This method returns a hash with some basic statistical information on the file, in both raw and human-
       friendly values.  The information provided is as follows:

           Key             Description
           ---------------------------------------------------------------
           intSize         Size of Perl's native integers in bits
           curFileSize     Current file size in bytes
           curFSHuman      Current file size expressed w/unit suffixes
           curStreams      Current number of streams allocated
           maxFileSize     Maximum file size supported with Perl
           maxFSHuman      Maximum file size expressed w/unit suffixes
           maxStreams      Maximum number of streams that can be allocated
           maxStreamSize   Maximum stream size
           maxSSHuman      Maximum stream size expressed w/unit suffixes

   <b>writeSig</b>
           $rv = $obj-&gt;writeSig;

       This method writes the file header signature to disk, returning a boolean value denoting its success.
       Note that the signature contains the file format, version, block size, and number of allocated blocks,
       but not the list of allocated streams.

   <b>readSig</b>
           $rv = $obj-&gt;readSig;

       This method reads the file header signature from disk and performs basic validation that the information
       in it is acceptable.  It validates that the file size matches the block size * block count, that the
       block size is an acceptable value, and the file format and version are supported.

       If the method call was successful it will update the cached values in the object.  Note that this is only
       the signature values, not the stream index records.

   <b>writeBlocks</b>
           $rv = $obj-&gt;writeBlocks($count);

       This method writes the passed block count value to disk, and returns a boolean value denoting success.

   <b>readBlocks</b>
           $count = $obj-&gt;readBlocks;

       This method reads the block count field from disk and returns it.  If there are any errors reading or
       extracting the value, it will return undef.

   <b>incrBlocks</b>
           $rv = $obj-&gt;incrBlocks;

       This method calls writeBlocks with a value of one greater that what's currently cached.

   <b>validateBlocks</b>
           $rv = $obj-&gt;validateBlocks;

       This method compares the cached block count value to what's actually written in the file.  This is useful
       for determining whether an external process has potentially modified the file.

   <b>writeStreams</b>
           $rv = $obj-&gt;writeStreams;

       This method writes the stream index records to the header block, and returns a boolean denoting success.

   <b>readStreams</b>
           $rv = $obj-&gt;readStreams;

       This method reads the stream index records from the file, and returns a boolean value denoting success.
       If the read is successful, this will update the cached streams information in the object.

   <b>addStream</b>
           $rv = $obj-&gt;addStream($sname, $bn);

       This method does some basic validation of the requested stream, and if it passes, updates the stream
       indices on the disk.

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       o   Fcntl

       o   Paranoid

       o   Paranoid::Debug

       o   Paranoid::Data

       o   Paranoid::IO

       o   Paranoid::IO::FileMultiplexer::Block

       o   Paranoid::IO::FileMultiplexer::Block::BATHeader

       o   Paranoid::IO::FileMultiplexer::Block::StreamHeader

</pre><h4><b>BUGS</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
</pre><h4><b>AUTHOR</b></h4><pre>
       Arthur Corliss (<a href="mailto:corliss@digitalmages.com">corliss@digitalmages.com</a>)

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       This  software  is  free  software.   Similar to Perl, you can redistribute it and/or modify it under the
       terms of either:

         a)     the GNU General Public License
                &lt;https://www.gnu.org/licenses/gpl-1.0.html&gt; as published by the
                Free Software Foundation &lt;<a href="http://www.fsf.org/">http://www.fsf.org/</a>&gt;; either version 1
                &lt;https://www.gnu.org/licenses/gpl-1.0.html&gt;, or any later version
                &lt;https://www.gnu.org/licenses/license-list.html#GNUGPL&gt;, or
         b)     the Artistic License 2.0
                &lt;https://opensource.org/licenses/Artistic-2.0&gt;,

       subject to the following additional term:  No trademark rights to "Paranoid" have been  or  are  conveyed
       under  any  of  the  above  licenses.  However, "Paranoid" may be used fairly to describe this unmodified
       software, in good faith, but not as a trademark.

       (c)  2005  -  2021,  Arthur  Corliss  (<a href="mailto:corliss@digitalmages.com">corliss@digitalmages.com</a>)  (tm)  2008  -   2021,   Paranoid   Inc.
       (www.paranoid.com)

perl v5.38.2                                       2024-03-07             <u>Paranoid::IO::F...ock::<a href="../man3pm/FileHeader.3pm.html">FileHeader</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>