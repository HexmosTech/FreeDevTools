<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rtapi_shmem - Functions for managing shared memory blocks</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/linuxcnc-uspace-dev">linuxcnc-uspace-dev_2.9.4-2ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rtapi_shmem - Functions for managing shared memory blocks

</pre><h4><b>SYNTAX</b></h4><pre>

               int rtapi_shmem_new(int <u>key</u>, int <u>module_id</u>, unsigned long int <u>size</u>)

               int rtapi_shmem_delete(int <u>shmem_id</u>, int <u>module_id</u>)

               int rtapi_shmem_getptr(int <u>shmem_id</u>, void ** <u>ptr</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>key</u>    Identifies  the  memory  block.   Key must be nonzero.  All modules wishing to use the same memory
              must use the same key.

       <u>module_id</u>
              Module identifier returned by a prior call to <b>rtapi_init</b>.

       <u>size</u>   The desired size of the shared memory block, in bytes

       <u>ptr</u>    The pointer to the shared memory block.  Note that the block may be mapped at a different  address
              for different modules.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>rtapi_shmem_new</b>  allocates  a  block of shared memory.  <u>key</u> identifies the memory block, and must be non-
       zero.  All modules wishing to access the same memory must use the same key.  <u>module_id</u> is the ID  of  the
       module  that  is  making  the  call  (see rtapi_init).  The block will be at least <u>size</u> bytes, and may be
       rounded up.  Allocating many small blocks may be very wasteful.  When a particular block is allocated for
       the first time, the contents are zeroed.  Subsequent allocations of the same block by  other  modules  or
       processes will not touch the contents of the block.  Applications can use those bytes to see if they need
       to  initialize the block, or if another module already did so.  On success, it returns a positive integer
       ID, which is used for all subsequent calls dealing with the block.  On  failure  it  returns  a  negative
       error code.

       <b>rtapi_shmem_delete</b>  frees  the  shared memory block associated with <u>shmem_id</u>.  <u>module_id</u> is the ID of the
       calling module.  Returns a status code.

       <b>rtapi_shmem_getptr</b> sets <u>*ptr</u> to point to shared memory block associated with <u>shmem_id</u>.

</pre><h4><b>REALTIME</b> <b>CONSIDERATIONS</b></h4><pre>
       <b>rtapi_shmem_getptr</b> may be called from non-realtime code, init/cleanup code, or realtime tasks.

       <b>rtapi_shmem_new</b> and <b>rtapi_shmem_dete</b> may not be called from realtime tasks.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
LinuxCNC Documentation                             2006-10-12                                <u><a href="../man3rtapi/rtapi_shmem.3rtapi.html">rtapi_shmem</a></u>(3rtapi)
</pre>
 </div>
</div></section>
</div>
</body>
</html>