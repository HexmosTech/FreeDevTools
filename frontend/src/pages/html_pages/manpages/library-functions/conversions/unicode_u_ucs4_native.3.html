<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unicode_u_ucs4_native, unicode_u_ucs2_native, unicode_convert_init, unicode_convert,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcourier-unicode-dev">libcourier-unicode-dev_2.3.2-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       unicode_u_ucs4_native, unicode_u_ucs2_native, unicode_convert_init, unicode_convert,
       unicode_convert_deinit, unicode_convert_tocbuf_init, unicode_convert_tou_init,
       unicode_convert_fromu_init, unicode_convert_uc, unicode_convert_tocbuf_toutf8_init,
       unicode_convert_tocbuf_fromutf8_init, unicode_convert_toutf8, unicode_convert_fromutf8,
       unicode_convert_tobuf, unicode_convert_tou_tobuf, unicode_convert_fromu_tobuf - unicode character set
       conversion

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;courier-unicode.h&gt;</b>

                <b>extern</b> <b>const</b> <b>char</b> <b>unicode_u_ucs4_native[];</b>

                <b>extern</b> <b>const</b> <b>char</b> <b>unicode_u_ucs2_native[];</b>

       <b>unicode_convert_handle_t</b> <b>unicode_convert_init(const</b> <b>char</b> <b>*</b><u>src_chset</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>dst_chset</u><b>,</b>
                                                     <b>void</b> <b>*</b><u>cb_arg</u><b>);</b>

       <b>int</b> <b>unicode_convert(unicode_convert_handle_t</b> <u>handle</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>text</u><b>,</b> <b>size_t</b> <u>cnt</u><b>);</b>

       <b>int</b> <b>unicode_convert_deinit(unicode_convert_handle_t</b> <u>handle</u><b>,</b> <b>int</b> <b>*</b><u>errptr</u><b>);</b>

       <b>unicode_convert_handle_t</b> <b>unicode_convert_tocbuf_init(</b> <b>const</b> <b>char</b> <b>*</b><u>src_chset</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>dst_chset</u><b>,</b>
               <b>char</b> <b>**</b><u>cbufptr_ret</u><b>,</b> <b>size_t</b> <b>*</b><u>cbufsize_ret</u><b>,</b> <b>int</b> <u>nullterminate</u><b>);</b>

       <b>unicode_convert_handle_t</b> <b>unicode_convert_tocbuf_toutf8_init(</b> <b>const</b> <b>char</b> <b>*</b><u>src_chset</u><b>,</b> <b>char</b> <b>**</b><u>cbufptr_ret</u><b>,</b>
               <b>size_t</b> <b>*</b><u>cbufsize_ret</u><b>,</b> <b>int</b> <u>nullterminate</u><b>);</b>

       <b>unicode_convert_handle_t</b> <b>unicode_convert_tocbuf_fromutf8_init(</b> <b>const</b> <b>char</b> <b>*</b><u>dst_chset</u><b>,</b> <b>char</b> <b>**</b><u>cbufptr_ret</u><b>,</b>
               <b>size_t</b> <b>*</b><u>cbufsize_ret</u><b>,</b> <b>int</b> <u>nullterminate</u><b>);</b>

       <b>unicode_convert_handle_t</b> <b>unicode_convert_tou_init(</b> <b>const</b> <b>char</b> <b>*</b><u>src_chset</u><b>,</b> <b>char32_t</b> <b>**</b><u>ucptr_ret</u><b>,</b>
               <b>size_t</b> <b>*</b><u>ucsize_ret</u><b>,</b> <b>int</b> <u>nullterminate</u><b>);</b>

       <b>unicode_convert_handle_t</b> <b>unicode_convert_fromu_init(</b> <b>const</b> <b>char</b> <b>*</b><u>dst_chset</u><b>,</b> <b>char</b> <b>**</b><u>cbufptr_ret</u><b>,</b>
               <b>size_t</b> <b>*</b><u>cbufsize_ret</u><b>,</b> <b>int</b> <u>nullterminate</u><b>);</b>

       <b>int</b> <b>unicode_convert_uc(unicode_convert_handle_t</b> <u>handle</u><b>,</b> <b>const</b> <b>char32_t</b> <b>*</b><u>text</u><b>,</b> <b>size_t</b> <u>cnt</u><b>);</b>

       <b>char</b> <b>*unicode_convert_toutf8(const</b> <b>char</b> <b>*</b><u>text</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>charset</u><b>,</b> <b>int</b> <b>*</b><u>error</u><b>);</b>

       <b>char</b> <b>*unicode_convert_fromutf8(const</b> <b>char</b> <b>*</b><u>text</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>charset</u><b>,</b> <b>int</b> <b>*</b><u>error</u><b>);</b>

       <b>char</b> <b>*unicode_convert_tobuf(const</b> <b>char</b> <b>*</b><u>text</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>charset</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>dstcharset</u><b>,</b> <b>int</b> <b>*</b><u>error</u><b>);</b>

       <b>int</b> <b>unicode_convert_toubuf(const</b> <b>char</b> <b>*</b><u>text</u><b>,</b> <b>size_t</b> <u>text_l</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>charset</u><b>,</b> <b>char32_t</b> <b>**</b><u>uc</u><b>,</b>
                                  <b>size_t</b> <b>*</b><u>ucsize</u><b>,</b> <b>int</b> <b>*</b><u>error</u><b>);</b>

       <b>int</b> <b>unicode_convert_fromu_tobuf(const</b> <b>char32_t</b> <b>*</b><u>utext</u><b>,</b> <b>size_t</b> <u>utext_l</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>charset</u><b>,</b> <b>char</b> <b>**</b><u>c</u><b>,</b>
                                       <b>size_t</b> <b>*</b><u>csize</u><b>,</b> <b>int</b> <b>*</b><u>error</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>unicode_u_ucs4_native</u>[] contains the string “UCS-4BE” or “UCS-4LE”, matching the native char32_t
       endianness.

       <u>unicode_u_ucs2_native</u>[] contains the string “UCS-2BE” or “UCS-2LE”, matching the native char32_t
       endianness.

       <b>unicode_convert_init</b>(), <b>unicode_convert</b>(), and <b>unicode_convert_deinit</b>() are an adaption of th <b><a href="../man3/iconv.3.html">iconv</a></b>(3)
       API that uses the same calling convention as the other algorithms in this unicode library, with some
       value-added features. These functions use <b><a href="../man3/iconv.3.html">iconv</a></b>(3) to effect the actual character set conversion.

       <b>unicode_convert_init</b>() returns a non-NULL handle for the requested conversion, or NULL if the requested
       conversion is not available.  <b>unicode_convert_init</b>() takes a pointer to the output function that receives
       receives converted character text. The output function receives a pointer to the converted character
       text, and the number of characters in the converted text. The output function gets repeatedly called,
       until it receives the entire converted text.

       The character text to convert gets passed, repeatedly, to <b>unicode_convert</b>(). Each call to
       <b>unicode_convert</b>() results in the output function getting invoked, zero or more times, with each
       successive part of the converted text. Finally, <b>unicode_convert_deinit</b>() stops the conversion and
       deallocates the conversion handle.

       It's possible that a call to <b>unicode_convert_deinit</b>() results in some additional calls to the output
       function, passing the remaining, final parts, of the converted text, before <b>unicode_convert_deinit</b>()
       deallocates the handle, and returns.

       The output function should return 0 normally. A non-0 return indicates n error condition.
       <b>unicode_convert_deinit</b>() returns non-zero if any previous invocation of the output function returned
       non-zero (this includes any invocations of the output function resulting from this call, or prior
       <b>unicode_convert</b>() calls), or 0 if all invocations of the output function returned 0.

       If the <u>errptr</u> is not NULL, *<u>errptr</u> gets set to non-zero if there were any conversion errors -- if there
       was any text that could not be converted to the destination character text.

       <b>unicode_convert</b>() also returns non-zero if it calls the output function and it returns non-zero, however
       the conversion handle remains allocated, so <b>unicode_convert_deinit</b>() must still be called, to clean that
       up.

   <b>Collecting</b> <b>converted</b> <b>text</b> <b>into</b> <b>a</b> <b>buffer</b>
       Call <b>unicode_convert_tocbuf_init</b>() instead of <b>unicode_convert_init</b>(), then call <b>unicode_convert</b>() and
       <b>unicode_convert_deinit</b>() normally. The parameters to <b>unicode_convert_init</b>() specify the source and the
       destination character sets.  <b>unicode_convert_tocbuf_toutf8_init</b>() is just an alias that specifies UTF-8
       as the destination character set.  <b>unicode_convert_tocbuf_fromutf8_init</b>() is just an alias that specifies
       UTF-8 as the source character st.

       These functions supply an output function that collects the converted text into a malloc()ed buffer. If
       <b>unicode_convert_deinit</b>() returns 0, *<u>cbufptr_ret</u> gets initialized to a malloc()ed buffer, and the number
       of converted characters, the size of the malloc()ed buffer, get placed into *<u>cbufsize_ret</u>.

           <b>Note</b>

           If the converted string is an empty string, *<u>cbufsize_ret</u> gets set to 0, but *<u>cbufptr_ret</u> still gets
           initialized (to a dummy malloced buffer).

       A non-zero <u>nullterminate</u> places a trailing \0 character after the converted string (this is included in
       *<u>cbufsize_ret</u>).

   <b>Converting</b> <b>between</b> <b>character</b> <b>sets</b> <b>and</b> <b>unicode</b>
       <b>unicode_convert_tou_init</b>() converts character text into a char32_t buffer. It works just like
       <b>unicode_convert_tocbuf_init</b>(), except that only the source character set gets specified and the output
       buffer is a char32_t buffer.  <u>nullterminate</u> terminates the converted unicode characters with a U+0000.

       <b>unicode_convert_fromu_init</b>() converts char32_ts to the output character set, and also works like
       <b>unicode_convert_tocbuf_init</b>(). Additionally, in this case, <b>unicode_convert_uc</b>() works just like
       <b>unicode_convert</b>() except that the input sequence is a char32_t sequence, and the count parameter is th
       enumber of unicode characters.

   <b>One-shot</b> <b>conversions</b>
       <b>unicode_convert_toutf8</b>() converts the specified text in the specified text into a UTF-8 string, returning
       a malloced buffer. If <u>error</u> is not NULL, even if <b>unicode_convert_toutf8</b>() returns a non NULL value *<u>error</u>
       gets set to a non-zero value if a character conversion error has occurred, and some characters could not
       be converted.

       <b>unicode_convert_fromutf8</b>() does a similar conversion from UTF-8 <u>text</u> to the specified character set.

       <b>unicode_convert_tobuf</b>() does a similar conversion between two different character sets.

       <b>unicode_convert_tou_tobuf</b>() calls <b>unicode_convert_tou_init</b>(), feeds the character string through
       <b>unicode_convert</b>(), then calls <b>unicode_convert_deinit</b>(). If this function returns 0, *<u>uc</u> and *<u>ucsize</u> are
       set to a malloced buffer+size holding the unicode char array.

       <b>unicode_convert_fromu_tobuf</b>() calls <b>unicode_convert_fromu_init</b>(), feeds the unicode array through
       <b>unicode_convert_uc</b>(), then calls unicode_convert_deinit(). If this function returns 0, *<u>c</u> and *<u>csize</u> are
       set to a malloced buffer+size holding the char array.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/courier-unicode.7.html">courier-unicode</a></b>(7), <b><a href="../man3/unicode_convert_tocase.3.html">unicode_convert_tocase</a></b>(3), <b><a href="../man3/unicode_default_chset.3.html">unicode_default_chset</a></b>(3).

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Sam</b> <b>Varshavchik</b>
           Author

Courier Unicode Library                            05/18/2024                                 <u><a href="../man3/UNICODE_CONVERT.3.html">UNICODE_CONVERT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>