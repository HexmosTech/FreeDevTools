<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>log - Procedures to log messages of libraries and applications.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       log - Procedures to log messages of libraries and applications.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>log</b> <b>?1.5?</b>

       <b>::log::levels</b>

       <b>::log::lv2longform</b> <u>level</u>

       <b>::log::lv2color</b> <u>level</u>

       <b>::log::lv2priority</b> <u>level</u>

       <b>::log::lv2cmd</b> <u>level</u>

       <b>::log::lv2channel</b> <u>level</u>

       <b>::log::lvCompare</b> <u>level1</u> <u>level2</u>

       <b>::log::lvSuppress</b> <u>level</u> {<u>suppress</u> 1}

       <b>::log::lvSuppressLE</b> <u>level</u> {<u>suppress</u> 1}

       <b>::log::lvIsSuppressed</b> <u>level</u>

       <b>::log::lvCmd</b> <u>level</u> <u>cmd</u>

       <b>::log::lvCmdForall</b> <u>cmd</u>

       <b>::log::lvChannel</b> <u>level</u> <u>chan</u>

       <b>::log::lvChannelForall</b> <u>chan</u>

       <b>::log::lvColor</b> <u>level</u> <u>color</u>

       <b>::log::lvColorForall</b> <u>color</u>

       <b>::log::log</b> <u>level</u> <u>text</u>

       <b>::log::logarray</b> <u>level</u> <u>arrayvar</u> ?<u>pattern</u>?

       <b>::log::loghex</b> <u>level</u> <u>text</u> <u>data</u>

       <b>::log::logsubst</b> <u>level</u> <u>msg</u>

       <b>::log::logMsg</b> <u>text</u>

       <b>::log::logError</b> <u>text</u>

       <b>::log::Puts</b> <u>level</u> <u>text</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>log</b>  package  provides commands that allow libraries and applications to selectively log information
       about their internal operation and state.

       To use the package just execute

                  package require log
                  log::log notice "Some message"

       As can be seen above, each message given to the log facility is associated with a <u>level</u>  determining  the
       importance  of  the  message.  The user can then select which levels to log, what commands to use for the
       logging of each level and the channel to write the message to. In the following example  the  logging  of
       all message with level <b>debug</b> is deactivated.

                  package require log
                  log::lvSuppress debug
                  log::log debug "Unseen message" ; # No output

       By  default  all  messages  associated  with  an  error-level (<b>emergency</b>, <b>alert</b>, <b>critical</b>, and <b>error</b>) are
       written to <b>stderr</b>. Messages with any other level are written to <b>stdout</b>. In the following example the  log
       module is reconfigured to write <b>debug</b> messages to <b>stderr</b> too.

                  package require log
                  log::lvChannel debug stderr
                  log::log debug "Written to stderr"

       Each  message  level is also associated with a command to use when logging a message with that level. The
       behaviour above for example relies on the fact that all  message  levels  use  by  default  the  standard
       command  <b>::log::Puts</b>  to log any message. In the following example all messages of level <b>notice</b> are given
       to the non-standard command <b>toText</b> for logging. This disables the  channel  setting  for  such  messages,
       assuming that <b>toText</b> does not use it by itself.

                  package require log
                  log::lvCmd notice toText
                  log::log notice "Handled by \"toText\""

       Another  database  maintained by this facility is a map from message levels to colors. The information in
       this database has <u>no</u> influence on the behaviour of the module. It is merely provided as a convenience and
       in anticipation of the usage of this facility in <b>tk</b>-based application which may want to colorize  message
       logs.

</pre><h4><b>API</b></h4><pre>
       The following commands are available:

       <b>::log::levels</b>
              Returns the names of all known levels, in alphabetical order.

       <b>::log::lv2longform</b> <u>level</u>
              Converts any unique abbreviation of a level name to the full level name.

       <b>::log::lv2color</b> <u>level</u>
              Converts any level name including unique abbreviations to the corresponding color.

       <b>::log::lv2priority</b> <u>level</u>
              Converts any level name including unique abbreviations to the corresponding priority.

       <b>::log::lv2cmd</b> <u>level</u>
              Converts  any  level  name  including  unique  abbreviations  to  the command prefix used to write
              messages with that level.

       <b>::log::lv2channel</b> <u>level</u>
              Converts any level name including unique abbreviations to the channel used by <b>::log::Puts</b> to write
              messages with that level.

       <b>::log::lvCompare</b> <u>level1</u> <u>level2</u>
              Compares two levels (including unique abbreviations) with respect to their priority. This  command
              can be used by the -command option of lsort. The result is one of -1, 0 or 1 or an error. A result
              of  -1  signals  that  level1 is of less priority than level2. 0 signals that both levels have the
              same priority. 1 signals that level1 has higher priority than level2.

       <b>::log::lvSuppress</b> <u>level</u> {<u>suppress</u> 1}
              (Un)suppresses the output of messages having the specified level.  Unique  abbreviations  for  the
              level are allowed here too.

       <b>::log::lvSuppressLE</b> <u>level</u> {<u>suppress</u> 1}
              (Un)suppresses the output of messages having the specified level or one of lesser priority. Unique
              abbreviations for the level are allowed here too.

       <b>::log::lvIsSuppressed</b> <u>level</u>
              Asks  the  package  whether  the  specified level is currently suppressed. Unique abbreviations of
              level names are allowed.

       <b>::log::lvCmd</b> <u>level</u> <u>cmd</u>
              Defines for the specified level with which command to write the messages having this level. Unique
              abbreviations of level names are allowed. The command  is  actually  a  command  prefix  and  this
              facility  will  append  2  arguments  before  calling it, the level of the message and the message
              itself, in this order.

       <b>::log::lvCmdForall</b> <u>cmd</u>
              Defines for all known levels with which command to write  the  messages  having  this  level.  The
              command  is actually a command prefix and this facility will append 2 arguments before calling it,
              the level of the message and the message itself, in this order.

       <b>::log::lvChannel</b> <u>level</u> <u>chan</u>
              Defines for the specified level into which channel <b>::log::Puts</b> (the standard command) shall  write
              the  messages  having  this level. Unique abbreviations of level names are allowed. The command is
              actually a command prefix and this facility will append 2 arguments before calling it,  the  level
              of the message and the message itself, in this order.

       <b>::log::lvChannelForall</b> <u>chan</u>
              Defines  for  all  known  levels with which which channel <b>::log::Puts</b> (the standard command) shall
              write the messages having this level. The command is actually a command prefix and  this  facility
              will  append  2  arguments  before calling it, the level of the message and the message itself, in
              this order.

       <b>::log::lvColor</b> <u>level</u> <u>color</u>
              Defines for the specified level the color to return for it in a call  to  <b>::log::lv2color</b>.  Unique
              abbreviations of level names are allowed.

       <b>::log::lvColorForall</b> <u>color</u>
              Defines  for  all  known  levels  the  color to return for it in a call to <b>::log::lv2color</b>. Unique
              abbreviations of level names are allowed.

       <b>::log::log</b> <u>level</u> <u>text</u>
              Log a message according to the specifications for commands, channels  and  suppression.  In  other
              words:  The  command will do nothing if the specified level is suppressed. If it is not suppressed
              the actual logging is delegated to the specified command. If there is no command specified for the
              level the message won't be logged. The standard command <b>::log::Puts</b> will write the message to  the
              channel  specified for the given level. If no channel is specified for the level the message won't
              be logged. Unique abbreviations of level names are allowed. Errors in the actual  logging  command
              are  <u>not</u>  caught,  but propagated to the caller, as they may indicate misconfigurations of the log
              facility or errors in the callers code itself.

       <b>::log::logarray</b> <u>level</u> <u>arrayvar</u> ?<u>pattern</u>?
              Like <b>::log::log</b>, but logs  the  contents  of  the  specified  array  variable  <u>arrayvar</u>,  possibly
              restricted  to  entries matching the <u>pattern</u>. The pattern defaults to <b>*</b> (i.e. all entries) if none
              was specified.

       <b>::log::loghex</b> <u>level</u> <u>text</u> <u>data</u>
              Like <b>::log::log</b>, but assumes that <u>data</u> contains  binary  data.  It  converts  this  into  a  mixed
              hex/ascii representation before writing them to the log.

       <b>::log::logsubst</b> <u>level</u> <u>msg</u>
              Like <b>::log::log</b>, but <u>msg</u> may contain substitutions and variable references, which are evaluated in
              the caller scope first.  The purpose of this command is to avoid overhead in the non-logging case,
              if  the  log message building is expensive.  Any substitution errors raise an error in the command
              execution.  The following example shows an xml text representation, which  is  only  generated  in
              debug mode:

                  log::logsubst debug {XML of node $node is '[$node toXml]'}

       <b>::log::logMsg</b> <u>text</u>
              Convenience wrapper around <b>::log::log</b>.  Equivalent to <b>::log::log</b> <b>info</b> <b>text</b>.

       <b>::log::logError</b> <u>text</u>
              Convenience wrapper around <b>::log::log</b>.  Equivalent to <b>::log::log</b> <b>error</b> <b>text</b>.

       <b>::log::Puts</b> <u>level</u> <u>text</u>
              The  standard log command, it writes messages and their levels to user-specified channels. Assumes
              that the suppression checks were done by the caller. Expects full level names,  abbreviations  are
              <u>not</u> <u>allowed</u>.

</pre><h4><b>LEVELS</b></h4><pre>
       The package currently defines the following log levels, the level of highest importance listed first.

       •      emergency

       •      alert

       •      critical

       •      error

       •      warning

       •      notice

       •      info

       •      debug

       <u>Note</u>  that  by  default  all  messages  with  levels  <b>warning</b>  down to <b>debug</b> are suppressed. This is done
       intentionally, because (we believe that) in most situations debugging output is not wanted.  Most  people
       wish to have such output only when actually debugging an application.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>log</u> of the <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       log, log level, message, message level

</pre><h4><b>CATEGORY</b></h4><pre>
       Programming tools

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2001-2009 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 1.5                                             <u><a href="../man3tcl/log.3tcl.html">log</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>