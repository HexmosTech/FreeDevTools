<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log::Handler::Output::File - Log messages to a file.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblog-handler-perl">liblog-handler-perl_0.90-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Log::Handler::Output::File - Log messages to a file.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Log::Handler::Output::File;

           my $log = Log::Handler::Output::File-&gt;new(
               filename    =&gt; "file.log",
               filelock    =&gt; 1,
               fileopen    =&gt; 1,
               reopen      =&gt; 1,
               mode        =&gt; "append",
               autoflush   =&gt; 1,
               permissions =&gt; "0664",
               utf8        =&gt; 0,
           );

           $log-&gt;log(message =&gt; $message);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Log messages to a file.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new()</b>
       Call "new()" to create a new Log::Handler::Output::File object.

       The following options are possible:

       <b>filename</b>
           With  "filename"  you  can  set  a file name as a string or as a array reference.  If you set a array
           reference then the parts will be concat with "catfile" from "File::Spec".

           Set a file name:

               my $log = Log::Handler::Output::File-&gt;new( filename =&gt; "file.log"  );

           Set a array reference:

               my $log = Log::Handler::Output::File-&gt;new(

                   # foo/bar/baz.log
                   filename =&gt; [ "foo", "bar", "baz.log" ],

                   # /foo/bar/baz.log
                   filename =&gt; [ "", "foo", "bar", "baz.log" ],

               );

       <b>filelock</b>
           Maybe it's desirable to lock the log file by each write operation because a lot of processes write at
           the same time to the log file. You can set the option "filelock" to 0 or 1.

               0 - no file lock
               1 - exclusive lock (LOCK_EX) and unlock (LOCK_UN) by each write operation (default)

       <b>fileopen</b>
           Open a log file transient or permanent.

               0 - open and close the logfile by each write operation
               1 - open the logfile if C&lt;new()&gt; called and try to reopen the
                   file if C&lt;reopen&gt; is set to 1 and the inode of the file has changed (default)

       <b>reopen</b>
           This option works only if option "fileopen" is set to 1.

               0 - deactivated
               1 - try to reopen the log file if the inode changed (default)

       How to use <b>fileopen</b> and <b>reopen</b>
           Please note that it's better to  set  "reopen"  and  "fileopen"  to  0  on  Windows  because  Windows
           unfortunately haven't the faintest idea of inodes.

           To write your code independent you should control it:

               my $os_is_win = $^O =~ /win/i ? 0 : 1;

               my $log = Log::Handler::Output::File-&gt;new(
                  filename =&gt; "file.log",
                  mode     =&gt; "append",
                  fileopen =&gt; $os_is_win
               );

           If you set "fileopen" to 0 then it implies that "reopen" has no importance.

       <b>mode</b>
           There are three possible modes to open a log file.

               append - O_WRONLY | O_APPEND | O_CREAT (default)
               excl   - O_WRONLY | O_EXCL   | O_CREAT
               trunc  - O_WRONLY | O_TRUNC  | O_CREAT

           "append" would open the log file in any case and appends the messages at the end of the log file.

           "excl" would fail by open the log file if the log file already exists.

           "trunc" would truncate the complete log file if it exists. Please take care to use this option.

           Take a look to the documentation of "sysopen()" to get more information.

       <b>autoflush</b>
               0 - autoflush off
               1 - autoflush on (default)

       <b>permissions</b>
           The  option  "permissions"  sets  the permission of the file if it creates and must be set as a octal
           value. The permission need to be in octal and are modified by your process's current "umask".

           That means that you have to use the unix style permissions such as  "chmod".   0640  is  the  default
           permission for this option. That means that the owner got read and write permissions and users in the
           same group got only read permissions. All other users got no access.

           Take a look to the documentation of "sysopen()" to get more information.

       <b>utf8</b>, <b>utf-8</b>
               utf8   =  binmode, $fh, ":utf8";
               utf-8  =  binmode, $fh, "encoding(utf-8)";

           Yes, there is a difference.

           &lt;<a href="http://perldoc.perl.org/perldiag.html">http://perldoc.perl.org/perldiag.html</a>#Malformed-UTF-8-character-(%25s)&gt;

           &lt;<a href="http://perldoc.perl.org/Encode.html">http://perldoc.perl.org/Encode.html</a>#UTF-8-vs.-utf8-vs.-UTF8&gt;

       <b>dateext</b>
           It's  possible  to set a pattern in the filename that is replaced with a date.  If the date - and the
           filename - changed the file is closed and reopened with the new filename. The filename  is  converted
           with "POSIX::strftime".

           Example:

               my $log = Log::Handler::Output::File-&gt;new(
                   filename  =&gt; "file-%Y-%m-%d.log",
                   dateext =&gt; 1
               );

           In  this example the file "file-2015-06-12.log" is created. At the next day the filename changed, the
           log file "file-2015-06-12.log" is closed and "file-2015-06-13.log" is opened.

           This feature is a small improvement for systems where no logrotate is available like Windows systems.
           On this way you have the chance to delete old log files without to stop/start a daemon.

   <b>log()</b>
       Call "log()" if you want to log messages to the log file.

       Example:

           $log-&gt;log(message =&gt; "this message goes to the logfile");

   <b>flush()</b>
       Call "flush()" if you want to re-open the log file.

       This is useful if you don't want to use option "reopen". As example  if  a  rotate  mechanism  moves  the
       logfile and you want to re-open a new one.

   <b>validate()</b>
       Validate a configuration.

   <b>reload()</b>
       Reload with a new configuration.

   <b>errstr()</b>
       Call "errstr()" to get the last error message.

   <b>close()</b>
       Call  "close()"  to close the log file yourself - normally you don't need to use it, because the log file
       will be opened and closed automatically.

</pre><h4><b>PREREQUISITES</b></h4><pre>
           Carp
           Fcntl
           File::Spec
           Params::Validate

</pre><h4><b>EXPORTS</b></h4><pre>
       No exports.

</pre><h4><b>REPORT</b> <b>BUGS</b></h4><pre>
       Please report all bugs to &lt;jschulz.cpan(at)bloonix.de&gt;.

       If you send me a mail then add Log::Handler into the subject.

</pre><h4><b>AUTHOR</b></h4><pre>
       Jonny Schulz &lt;jschulz.cpan(at)bloonix.de&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2007-2009 by Jonny Schulz. All rights reserved.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

perl v5.36.0                                       2022-08-28                    <u>Log::Handler::Output::<a href="../man3pm/File.3pm.html">File</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>