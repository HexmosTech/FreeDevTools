<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaWiki::DumpFile::Pages - Process an XML dump file of pages from a MediaWiki instance</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmediawiki-dumpfile-perl">libmediawiki-dumpfile-perl_0.2.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MediaWiki::DumpFile::Pages - Process an XML dump file of pages from a MediaWiki instance

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use MediaWiki::DumpFile::Pages;

         #dump files up to version 0.5 are tested
         $input = 'file-name.xml';
         #many supported compression formats
         $input = 'file-name.xml.bz2';
         $input = 'file-name.xml.gz';
         $input = \*FH;

         $pages = MediaWiki::DumpFile::Pages-&gt;new($input);

         #default values
         %opts = (
           input =&gt; $input,
           fast_mode =&gt; 0,
           version_ignore =&gt; 1
         );

         #override configuration options passed to constructor
         $ENV{MEDIAWIKI_DUMPFILE_VERSION_IGNORE} = 0;
         $ENV{MEDIAWIKI_DUMPFILE_FAST_MODE} = 1;

         $pages = MediaWiki::DumpFile::Pages-&gt;new(%opts);
         $version = $pages-&gt;version;

         #version 0.3 and later dump files only
         $sitename = $pages-&gt;sitename;
         $base = $pages-&gt;base;
         $generator = $pages-&gt;generator;
         $case = $pages-&gt;case;
         %namespaces = $pages-&gt;namespaces;

         #all versions
         while(defined($page = $pages-&gt;next) {
           print 'Title: ', $page-&gt;title, "\n";
         }

         $title = $page-&gt;title;
         $id = $page-&gt;id;
         $revision = $page-&gt;revision;
         @revisions = $page-&gt;revision;

         $text = $revision-&gt;text;
         $id = $revision-&gt;id;
         $timestamp = $revision-&gt;timestamp;
         $comment = $revision-&gt;comment;
         $contributor = $revision-&gt;contributor;
         #version 0.4 and later dump files only
         $bool = $revision-&gt;redirect;

         $username = $contributor-&gt;username;
         $id = $contributor-&gt;id;
         $ip = $contributor-&gt;ip;
         $username_or_ip = $contributor-&gt;astext;
         $username_or_ip = "$contributor";

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
       This is the constructor for this package. If it is called with a single parameter it must be the input to
       use for parsing. The input is specified as either the location of a MediaWiki pages dump file or a
       reference to an already open file handle.

       If more than one argument is passed to new it must be a hash of options. The keys are named

       input
           This is the input to parse as documented earlier.

       fast_mode
           Have the iterator run in fast mode by default; defaults to false. See the section on fast mode below.

       version_ignore
           Do not enforce parsing of only tested schemas in the XML document; defaults to true

   <b>version</b>
       Returns the version of the dump file.

   <b>sitename</b>
       Returns the sitename from the MediaWiki instance. Requires a dump file of at least version 0.3.

   <b>base</b>
       Returns the URL used to access the MediaWiki instance. Requires a dump file of at least version 0.3.

   <b>generator</b>
       Returns  the  version of MediaWiki that generated the dump file. Requires a dump file of at least version
       0.3.

   <b>case</b>
       Returns the case sensitivity configuration of the MediaWiki instance. Requires a dump file  of  at  least
       version 0.3.

   <b>namespaces</b>
       Returns  a  hash  where  the  key is the numerical namespace id and the value is the plain text namespace
       name. The main namespace has an id of 0 and an empty string value. Requires  a  dump  file  of  at  least
       version 0.3.

   <b>next</b>
       Accepts  an  optional  boolean argument to control fast mode. If the argument is specified it forces fast
       mode on or off. Otherwise the mode is controlled by the fast_mode configuration option. See  the  section
       below on fast mode for more information.

       It is safe to intermix calls between fast and normal mode in one parsing session.

       In all modes undef is returned if there is no more data to parse.

       In normal mode an instance of MediaWiki::DumpFile::Pages::Page is returned and the full API is available.

       In  fast mode an instance of MediaWiki::DumpFile::Pages::FastPage is returned; the only methods supported
       are title, text, and revision. This class can act  as  a  stand-in  for  MediaWiki::DumpFile::Pages::Page
       except it will throw an error if any attempt is made to access any other part of the API.

   <b>size</b>
       Returns  the size of the input file in bytes or if the input specified is a reference to a file handle it
       returns undef.

   <b>current_byte</b>
       Returns the number of bytes of XML that have been successfully parsed.

</pre><h4><b>FAST</b> <b>MODE</b></h4><pre>
       Fast mode is a way to get increased parsing performance while dropping some of the features available  in
       the  parser.  If you only require the titles and text from a page then fast mode will decrease the amount
       of time required just to parse the XML file; some times drastically.

       When fast mode is used on a dump file that has more than one revision of a single article in it only  the
       text  of  the first article in the dump file will be returned; the other revisions of the article will be
       silently skipped over.

</pre><h4><b>MediaWiki::DumpFile::Pages::Page</b></h4><pre>
       This object represents a distinct Mediawiki page and is used to access the page data  and  metadata.  The
       following methods are available:

       title
           Returns a string of the page title

       id  Returns a numerical page identification

       revision
           In  scalar  context  returns  the last revision in the dump for this page; in array context returns a
           list of all revisions made available for the page in the same order as the dump  file.  All  returned
           data is an instance of MediaWiki::DumpFile::Pages::Revision

</pre><h4><b>MediaWiki::DumpFile::Pages::Page::Revision</b></h4><pre>
       This  object  represents  a  distinct  revision of a page from the Mediawiki dump file. The standard dump
       files contain only the most specific revision of each page and the comprehensive dump files  contain  all
       revisions for each page. The following methods are available:

       text
           Returns the page text for this specific revision of the page.

       id  Returns the numerical revision id for this specific revision - this is independent of the page id.

       timestamp
           Returns a string value representing the time the revision was created. The string is in the format of
           "2008-07-09T18:41:10Z".

       comment
           Returns the comment made about the revision when it was created.

       contributor
           Returns an instance of MediaWiki::DumpFile::Pages::Page::Revision::Contributor

       minor
           Returns true if the edit was marked as being minor or false otherwise

       redirect
           Returns true if the page is a redirect to another page or false otherwise. Requires a dump file of at
           least version 0.4.

</pre><h4><b>MediaWiki::DumpFile::Pages::Page::Revision::Contributor</b></h4><pre>
       This  object  provides  access to the contributor of a specific revision of a page. When used in a scalar
       context it will return the username of the editor if the editor was logged in or the IP  address  of  the
       editor if the edit was anonymous.

       username
           Returns  the  username  of  the  editor  if  the editor was logged in when the edit was made or undef
           otherwise.

       id  Returns the numerical id of the editor if the editor was logged in or undef otherwise.

       ip  Returns the IP address of the editor if the editor was anonymous or undef otherwise.

       astext
           Returns the username of the editor if they were logged in  or  the  IP  address  if  the  editor  was
           anonymous.

</pre><h4><b>ERRORS</b></h4><pre>
   <b>E_XML_CREATE_FAILED</b> <b>Error</b> <b>creating</b> <b>XML</b> <b>parser</b> <b>object</b>
       While  trying  to  build  the  XML::TreePuller  object a fatal error occurred; the error message from the
       parser was included in the generated error output you saw. At the time of writing this document the error
       messages are not very helpful but for some reason the XML parser rejected the document; here's a list  of
       things to check:

       Make sure the file exists and is readable
       Make sure the file is actually an XML file and is not compressed

   <b>E_XML_PARSE_FAILED</b> <b>XML</b> <b>parser</b> <b>failed</b> <b>during</b> <b>parsing</b>
       Something  went wrong with the XML parser - the error from the parser was included in the generated error
       message. This happens when there is a severe error parsing the document such as a syntax error.

   <b>E_UNTESTED_DUMP_VERSION</b> <b>Untested</b> <b>dump</b> <b>file</b> <b>versions</b>
       The dump files created by Mediawiki include a versioned XML schema. This software is tested with the most
       recent  known  schema  versions  and  can  be  configured  to   enforce   a   specific   tested   schema.
       MediaWiki::DumpFile::Pages  no longer enforces the versions by default but the software author using this
       library has indicated that it should.  When this happens it dies with an error like the following:

       E_UNTESTED_DUMP_VERSION Version 0.4 dump file "t/simpleenglish-wikipedia.xml" has not  been  tested  with
       MediaWiki::DumpFile::Pages  version  0.1.9; see the ERRORS section of the MediaWiki::DumpFile::Pages Perl
       module documentation for what to do at lib/MediaWiki/DumpFile/Pages.pm line 148.

       If you encounter this condition you can do the following:

       Check your module version
           The error message should have the version number of this module in it. Check CPAN and see if there is
           a newer version with official support. The web page

             <a href="http://search.cpan.org/dist/MediaWiki-DumpFile/lib/MediaWiki/DumpFile/Pages.pm">http://search.cpan.org/dist/MediaWiki-DumpFile/lib/MediaWiki/DumpFile/Pages.pm</a>

           will show the highest supported version dump files near the top of the SYNOPSIS.

       Check the bug database
           It is possible the issue has been resolved already but the update has not made it onto CPAN yet.  See
           this web page

             <a href="http://rt.cpan.org/Public/Dist/Display.html">http://rt.cpan.org/Public/Dist/Display.html</a>?Name=mediawiki-dumpfile

           and check for an open bug report relating to the version number changing.

       Be adventurous
           If  you  just  want  to have the software run anyway and see what happens you can set the environment
           variable MEDIAWIKI_DUMPFILE_VERSION_IGNORE to a true value which will cause the  module  to  silently
           ignore  the case and continue parsing the document.  You can set the environment and run your program
           at the same time with a command like this:

             MEDIAWIKI_DUMPFILE_VERSION_IGNORE=1 ./wikiscript.pl

           This may work fine or it may fail in subtle ways silently - there is no way to know for sure with out
           studying the schema to see if the changes are backwards compatible.

       Open a bug report
           You can use the same URL for rt.cpan.org above to create a new ticket in MediaWiki-DumpFile  or  just
           send  an  email  to  "bug-mediawiki-dumpfile at rt.cpan.org". Be sure to use a title for the bug that
           others will be able to use to find this case as well and to include the  full  text  from  the  error
           message. Please also specify if you were adventurous or not and if it was successful for you.

</pre><h4><b>AUTHOR</b></h4><pre>
       Tyler Riddle, "&lt;triddle at gmail.com&gt;"

</pre><h4><b>BUGS</b></h4><pre>
       Please see MediaWiki::DumpFile for information on how to report bugs in this software.

</pre><h4><b>COPYRIGHT</b> <b>&amp;</b> <b>LICENSE</b></h4><pre>
       Copyright 2009 "Tyler Riddle".

       This  program  is  free software; you can redistribute it and/or modify it under the terms of either: the
       GNU General Public License as published by the Free Software Foundation; or the Artistic License.

       See <a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a> for more information.

perl v5.34.0                                       2022-06-15                    <u>MediaWiki::DumpFile::<a href="../man3pm/Pages.3pm.html">Pages</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>