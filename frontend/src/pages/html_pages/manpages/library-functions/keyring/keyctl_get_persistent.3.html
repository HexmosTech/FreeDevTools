<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>keyctl_get_persistent - get the persistent keyring for a user</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libkeyutils-dev">libkeyutils-dev_1.6.3-6ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       keyctl_get_persistent - get the persistent keyring for a user

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;keyutils.h&gt;</b>

       <b>long</b> <b>keyctl_get_persistent(uid_t</b> <u>uid</u><b>,</b> <b>key_serial_t</b> <u>keyring</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>keyctl_get_persistent</b>()  gets  the  persistent keyring for the specified user ID.  Unlike the session and
       user keyrings, this keyring will persist once all login sessions have been deleted and can thus  be  used
       to  carry authentication tokens for processes that run without user interaction, such as programs started
       by cron.

       The persistent keyring will be created by the kernel if it does not yet exist.  Each time  this  function
       is called, the persistent keyring will have its expiration timeout reset to the value in:

              <a href="file:/proc/sys/kernel/keys/persistent_keyring_expiry">/proc/sys/kernel/keys/persistent_keyring_expiry</a>

       (by  default  three  days).   Should  the  timeout be reached, the persistent keyring will be removed and
       everything it pins can then be garbage collected.

       If <u>uid</u> is <b>-1</b> then the calling process's real user ID will be used.  If <u>uid</u> is not  <b>-1</b>  then  error  <b>EPERM</b>
       will  be  given if the user ID requested does not match either the caller's real or effective user IDs or
       if the calling process does not have <b>SetUid</b> capability.

       If successful, a link to the persistent keyring will be added into <u>keyring</u>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success <b>keyctl_get_persistent</b>() returns the serial number of the persistent keyring.   On  error,  the
       value <b>-1</b> will be returned and <u>errno</u> will have been set to an appropriate error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EPERM</b>  Not permitted to access the persistent keyring for the requested <u>uid</u>.

       <b>ENOMEM</b> Insufficient memory to create the persistent keyring or to extend <u>keyring</u>.

       <b>ENOKEY</b> <u>keyring</u> does not exist.

       <b>EKEYEXPIRED</b>
              <u>keyring</u> has expired.

       <b>EKEYREVOKED</b>
              <u>keyring</u> has been revoked.

       <b>EDQUOT</b> The user does not have sufficient quota to extend <u>keyring</u>.

       <b>EACCES</b> <u>keyring</u> exists, but does not grant <b>write</b> permission to the calling process.

</pre><h4><b>LINKING</b></h4><pre>
       This  is  a  library  function  that  can  be  found  in <u>libkeyutils</u>.  When linking, <b>-lkeyutils</b> should be
       specified to the linker.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/keyctl.1.html">keyctl</a></b>(1), <b><a href="../man2/add_key.2.html">add_key</a></b>(2), <b><a href="../man2/keyctl.2.html">keyctl</a></b>(2), <b><a href="../man2/request_key.2.html">request_key</a></b>(2), <b><a href="../man3/keyctl.3.html">keyctl</a></b>(3), <b><a href="../man7/keyrings.7.html">keyrings</a></b>(7), <b><a href="../man7/keyutils.7.html">keyutils</a></b>(7),
       <b><a href="../man7/persistent-keyring.7.html">persistent-keyring</a></b>(7),

Linux                                              20 Feb 2014                          <u><a href="../man3/KEYCTL_GET_PERSISTENT.3.html">KEYCTL_GET_PERSISTENT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>