<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_SetObjResult,     Tcl_GetObjResult,     Tcl_SetResult,     Tcl_GetStringResult,     Tcl_AppendResult,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_SetObjResult,     Tcl_GetObjResult,     Tcl_SetResult,     Tcl_GetStringResult,     Tcl_AppendResult,
       Tcl_AppendElement, Tcl_ResetResult, Tcl_TransferResult - manipulate Tcl result

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       <b>Tcl_SetObjResult</b>(<u>interp,</u> <u>objPtr</u>)

       Tcl_Obj *
       <b>Tcl_GetObjResult</b>(<u>interp</u>)

       <b>Tcl_SetResult</b>(<u>interp,</u> <u>result,</u> <u>freeProc</u>)

       const char *
       <b>Tcl_GetStringResult</b>(<u>interp</u>)

       <b>Tcl_AppendResult</b>(<u>interp,</u> <u>result,</u> <u>result,</u> <u>...</u> <u>,</u> <b>(char</b> <b>*)NULL</b>)

       <b>Tcl_ResetResult</b>(<u>interp</u>)

       <b>Tcl_TransferResult</b>(<u>sourceInterp,</u> <u>code,</u> <u>targetInterp</u>)

       <b>Tcl_AppendElement</b>(<u>interp,</u> <u>element</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (out)                Interpreter whose result is to be modified or read.

       Tcl_Obj <u>*objPtr</u> (in)                    Tcl value to become result for <u>interp</u>.

       char <u>*result</u> (in)                       String value to become result for <u>interp</u> or to be appended to the
                                               existing result.

       const char <u>*element</u> (in)                String value to append as a list element to the  existing  result
                                               of <u>interp</u>.

       Tcl_FreeProc <u>*freeProc</u> (in)             Address  of  procedure  to  call to release storage at <u>result</u>, or
                                               <b>TCL_STATIC</b>, <b>TCL_DYNAMIC</b>, or <b>TCL_VOLATILE</b>.

       Tcl_Interp <u>*sourceInterp</u> (in)           Interpreter  that  the  result  and  return  options  should   be
                                               transferred from.

       Tcl_Interp <u>*targetInterp</u> (in)           Interpreter   that  the  result  and  return  options  should  be
                                               transferred to.

       int <u>code</u> (in)                           Return code value that controls transfer of return options.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The procedures described here are utilities for manipulating the result value in a Tcl interpreter.   The
       interpreter  result  may  be  either  a  Tcl  value  or  a  string.   For  example,  <b>Tcl_SetObjResult</b> and
       <b>Tcl_SetResult</b>  set  the  interpreter  result  to,  respectively,  a  value  and  a  string.    Similarly,
       <b>Tcl_GetObjResult</b>  and  <b>Tcl_GetStringResult</b> return the interpreter result as a value and as a string.  The
       procedures always keep the string and value forms of the interpreter result consistent.  For example,  if
       <b>Tcl_SetObjResult</b>  is  called  to  set  the result to a value, then <b>Tcl_GetStringResult</b> is called, it will
       return the value's string representation.

       <b>Tcl_SetObjResult</b> arranges for <u>objPtr</u> to be the result for <u>interp</u>, replacing  any  existing  result.   The
       result is left pointing to the value referenced by <u>objPtr</u>.  <u>objPtr</u>'s reference count is incremented since
       there  is  now  a  new  reference  to  it  from  <u>interp</u>.  The reference count for any old result value is
       decremented and the old result value is freed if no references to it remain.

       <b>Tcl_GetObjResult</b> returns the result  for  <u>interp</u>  as  a  value.   The  value's  reference  count  is  not
       incremented;  if  the  caller  needs  to  retain  a  long-term  pointer  to  the  value  they  should use
       <b>Tcl_IncrRefCount</b> to increment its reference count in order to keep it  from  being  freed  too  early  or
       accidentally changed.

       <b>Tcl_SetResult</b>  arranges  for <u>result</u> to be the result for the current Tcl command in <u>interp</u>, replacing any
       existing result.  The <u>freeProc</u> argument specifies how to manage the storage for the <u>result</u>  argument;  it
       is  discussed  in  the section <b>THE</b> <b>TCL_FREEPROC</b> <b>ARGUMENT</b> <b>TO</b> <b>TCL_SETRESULT</b> below.  If <u>result</u> is <b>NULL</b>, then
       <u>freeProc</u> is ignored and <b>Tcl_SetResult</b> re-initializes <u>interp</u>'s result to point to an empty string.

       <b>Tcl_GetStringResult</b> returns the result for <u>interp</u> as a string.  If the result was set to  a  value  by  a
       <b>Tcl_SetObjResult</b>  call, the value form will be converted to a string and returned.  If the value's string
       representation contains null bytes, this conversion will lose information.  For this reason,  programmers
       are  encouraged  to  write  their  code  to use the new value API procedures and to call <b>Tcl_GetObjResult</b>
       instead.

       <b>Tcl_ResetResult</b> clears the result for <u>interp</u> and leaves the result in its normal empty initialized state.
       If the result is a value, its reference count is decremented and  the  result  is  left  pointing  to  an
       unshared value representing an empty string.  If the result is a dynamically allocated string, its memory
       is  free*d and the result is left as a empty string.  <b>Tcl_ResetResult</b> also clears the error state managed
       by <b>Tcl_AddErrorInfo</b>, <b>Tcl_AddObjErrorInfo</b>, and <b>Tcl_SetErrorCode</b>.

       <b>Tcl_AppendResult</b> makes it easy to build up Tcl results in pieces.  It takes each of its <u>result</u>  arguments
       and  appends  them  in  order  to  the  current  result  associated with <u>interp</u>.  If the result is in its
       initialized empty state (e.g. a command procedure was just invoked or <b>Tcl_ResetResult</b> was  just  called),
       then <b>Tcl_AppendResult</b> sets the result to the concatenation of its <u>result</u> arguments.  <b>Tcl_AppendResult</b> may
       be called repeatedly as additional pieces of the result are produced.  <b>Tcl_AppendResult</b> takes care of all
       the  storage  management  issues  associated  with  managing <u>interp</u>'s result, such as allocating a larger
       result area if necessary.  It also manages conversion to and from the <u>result</u> field of the <u>interp</u> so as to
       handle backward-compatibility with old-style extensions.  Any number of <u>result</u> arguments may be passed in
       a single call; the last argument in the list must be (char *)NULL.

       <b>Tcl_TransferResult</b> transfers interpreter state from <u>sourceInterp</u> to <u>targetInterp</u>.  The  two  interpreters
       must  have  been  created  in the same thread.  If <u>sourceInterp</u> and <u>targetInterp</u> are the same, nothing is
       done. Otherwise, <b>Tcl_TransferResult</b> moves the result from <u>sourceInterp</u> to <u>targetInterp</u>,  and  resets  the
       result  in  <u>sourceInterp</u>.  It  also  moves the return options dictionary as controlled by the return code
       value <u>code</u> in the same manner as <b>Tcl_GetReturnOptions</b>.

</pre><h4><b>DEPRECATED</b> <b>INTERFACES</b></h4><pre>
   <b>OLD</b> <b>STRING</b> <b>PROCEDURES</b>
       Use of the following procedures is  deprecated  since  they  manipulate  the  Tcl  result  as  a  string.
       Procedures  such  as  <b>Tcl_SetObjResult</b>  that  manipulate  the result as a value can be significantly more
       efficient.

       <b>Tcl_AppendElement</b> is similar to <b>Tcl_AppendResult</b> in that it allows results to  be  built  up  in  pieces.
       However,  <b>Tcl_AppendElement</b>  takes  only  a  single  <u>element</u> argument and it appends that argument to the
       current result as a proper Tcl list element.  <b>Tcl_AppendElement</b> adds backslashes or braces  if  necessary
       to  ensure  that  <u>interp</u>'s  result can be parsed as a list and that <u>element</u> will be extracted as a single
       element.  Under normal conditions, <b>Tcl_AppendElement</b> will add a space character to <u>interp</u>'s  result  just
       before  adding  the  new  list  element,  so that the list elements in the result are properly separated.
       However if the new list element is the first in a list or  sub-list  (i.e.  <u>interp</u>'s  current  result  is
       empty, or consists of the single character “{”, or ends in the characters “ {”) then no space is added.

</pre><h4><b>THE</b> <b>TCL_FREEPROC</b> <b>ARGUMENT</b> <b>TO</b> <b>TCL_SETRESULT</b></h4><pre>
       <b>Tcl_SetResult</b>'s  <u>freeProc</u>  argument  specifies how the Tcl system is to manage the storage for the <u>result</u>
       argument.  If <b>Tcl_SetResult</b> or <b>Tcl_SetObjResult</b> are called at a time when <u>interp</u> holds a  string  result,
       they  do  whatever  is necessary to dispose of the old string result (see the <b>Tcl_Interp</b> manual entry for
       details on this).

       If <u>freeProc</u> is <b>TCL_STATIC</b> it means that <u>result</u> refers to an area of static storage that is guaranteed not
       to be modified until at least the next call to <b>Tcl_Eval</b>.  If <u>freeProc</u> is <b>TCL_DYNAMIC</b> it means that <u>result</u>
       was allocated with a call to <b>Tcl_Alloc</b> and is now the property of the  Tcl  system.   <b>Tcl_SetResult</b>  will
       arrange  for  the  string's  storage  to be released by calling <b>Tcl_Free</b> when it is no longer needed.  If
       <u>freeProc</u> is <b>TCL_VOLATILE</b> it means that <u>result</u>  points  to  an  area  of  memory  that  is  likely  to  be
       overwritten  when  <b>Tcl_SetResult</b>  returns  (e.g.  it points to something in a stack frame).  In this case
       <b>Tcl_SetResult</b> will make a copy of the string in dynamically allocated storage and arrange for the copy to
       be the result for the current Tcl command.

       If <u>freeProc</u> is not one of the values <b>TCL_STATIC</b>, <b>TCL_DYNAMIC</b>, and <b>TCL_VOLATILE</b>, then it is the address of
       a procedure that Tcl should call to free the  string.   This  allows  applications  to  use  non-standard
       storage allocators.  When Tcl no longer needs the storage for the string, it will call <u>freeProc</u>. <u>FreeProc</u>
       should have arguments and result that match the type <b>Tcl_FreeProc</b>:

              typedef void <b>Tcl_FreeProc</b>(
                      void *<u>blockPtr</u>);

       When <u>freeProc</u> is called, its <u>blockPtr</u> will be set to the value of <u>result</u> passed to <b>Tcl_SetResult</b>.

</pre><h4><b>REFERENCE</b> <b>COUNT</b> <b>MANAGEMENT</b></h4><pre>
       The  interpreter result is one of the main places that owns references to values, along with the bytecode
       execution stack, argument lists, variables, and the list and dictionary collection values.

       <b>Tcl_SetObjResult</b> takes a value with an  arbitrary  reference  count  <u>(specifically</u>  <u>including</u>  <u>zero)</u>  and
       guarantees  to increment the reference count. If code wishes to continue using the value after setting it
       as the result, it should add its own reference to it with <b>Tcl_IncrRefCount</b>.

       <b>Tcl_GetObjResult</b> returns the current interpreter result value. This will have a  reference  count  of  at
       least  1.  If  the  caller wishes to keep the interpreter result value, it should increment its reference
       count.

       <b>Tcl_GetStringResult</b> does not manipulate reference counts, but the string it returns is owned by (and  has
       a  lifetime  controlled  by)  the  current interpreter result value; it should be copied instead of being
       relied upon to persist after the next Tcl API call, as most Tcl operations  can  modify  the  interpreter
       result.

       <b>Tcl_SetResult</b>,  <b>Tcl_AppendResult</b>,  <b>Tcl_AppendElement</b>,  and  <b>Tcl_ResetResult</b>  all  modify  the interpreter
       result. They may cause the old interpreter result to have its  reference  count  decremented  and  a  new
       interpreter  result  to be allocated. After they have been called, the reference count of the interpreter
       result is guaranteed to be 1.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Tcl_AddErrorInfo, Tcl_CreateObjCommand, Tcl_SetErrorCode, Tcl_Interp, Tcl_GetReturnOptions

</pre><h4><b>KEYWORDS</b></h4><pre>
       append, command, element, list, value, result, return value, interpreter

Tcl                                                    9.0                                   <u><a href="../man3tcl/Tcl_SetResult.3tcl.html">Tcl_SetResult</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>