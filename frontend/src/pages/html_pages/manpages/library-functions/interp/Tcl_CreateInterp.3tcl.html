<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_CreateInterp,  Tcl_DeleteInterp,  Tcl_InterpActive, Tcl_InterpDeleted - create and delete Tcl command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_CreateInterp,  Tcl_DeleteInterp,  Tcl_InterpActive, Tcl_InterpDeleted - create and delete Tcl command
       interpreters

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Interp *
       <b>Tcl_CreateInterp</b>()

       <b>Tcl_DeleteInterp</b>(<u>interp</u>)

       int
       <b>Tcl_InterpDeleted</b>(<u>interp</u>)

       int
       <b>Tcl_InterpActive</b>(<u>interp</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)          Token for interpreter to be destroyed or queried.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tcl_CreateInterp</b> creates a new interpreter structure and returns a token for it. The token is required in
       calls to most other Tcl procedures, such as <b>Tcl_CreateCommand</b>, <b>Tcl_Eval</b>, and <b>Tcl_DeleteInterp</b>.  The token
       returned by <b>Tcl_CreateInterp</b> may only be passed to Tcl routines  called  from  the  same  thread  as  the
       original  <b>Tcl_CreateInterp</b>  call.   It  is  not safe for multiple threads to pass the same token to Tcl's
       routines.  The new interpreter is initialized with the built-in Tcl commands and with standard  variables
       like  <b>tcl_platform</b>  and  <b>env</b>.  To  bind  in  additional  commands,  call <b>Tcl_CreateCommand</b>, and to create
       additional variables, call <b>Tcl_SetVar</b>.

       <b>Tcl_DeleteInterp</b> marks an interpreter as deleted; the interpreter will eventually  be  deleted  when  all
       calls  to  <b>Tcl_Preserve</b>  for  it  have  been  matched  by  calls to <b>Tcl_Release</b>. At that time, all of the
       resources associated with it, including variables, procedures, and application-specific command bindings,
       will be deleted. After <b>Tcl_DeleteInterp</b> returns any attempt to use <b>Tcl_Eval</b> on the interpreter will  fail
       and  return <b>TCL_ERROR</b>. After the call to <b>Tcl_DeleteInterp</b> it is safe to examine the interpreter's result,
       query or set the values of variables, define, undefine or retrieve procedures, and  examine  the  runtime
       evaluation stack. See below, in the section <b>INTERPRETERS</b> <b>AND</b> <b>MEMORY</b> <b>MANAGEMENT</b> for details.

       <b>Tcl_InterpDeleted</b>  returns  nonzero  if  <b>Tcl_DeleteInterp</b>  was  called  with <u>interp</u> as its argument; this
       indicates that the interpreter will eventually be deleted, when the last call to <b>Tcl_Preserve</b> for  it  is
       matched  by  a call to <b>Tcl_Release</b>. If nonzero is returned, further calls to <b>Tcl_Eval</b> in this interpreter
       will return <b>TCL_ERROR</b>.

       <b>Tcl_InterpDeleted</b> is useful in deletion callbacks  to  distinguish  between  when  only  the  memory  the
       callback  is  responsible  for  is  being deleted and when the whole interpreter is being deleted. In the
       former case the callback may recreate the data being deleted, but this would lead to an infinite loop  if
       the interpreter were being deleted.

       <b>Tcl_InterpActive</b>  is  useful  for  determining  whether  there  is any execution of scripts ongoing in an
       interpreter, which is a useful  piece  of  information  when  Tcl  is  embedded  in  a  garbage-collected
       environment  and  it  becomes necessary to determine whether the interpreter is a candidate for deletion.
       The function returns a true value if the interpreter has at least one active execution running inside it,
       and a false value otherwise.

</pre><h4><b>INTERPRETERS</b> <b>AND</b> <b>MEMORY</b> <b>MANAGEMENT</b></h4><pre>
       <b>Tcl_DeleteInterp</b> can be called at any time on an interpreter that may be used by nested evaluations and C
       code in various extensions. Tcl implements a simple mechanism that allows  callers  to  use  interpreters
       without worrying about the interpreter being deleted in a nested call, and without requiring special code
       to protect the interpreter, in most cases.  This mechanism ensures that nested uses of an interpreter can
       safely continue using it even after <b>Tcl_DeleteInterp</b> is called.

       The  mechanism relies on matching up calls to <b>Tcl_Preserve</b> with calls to <b>Tcl_Release</b>. If <b>Tcl_DeleteInterp</b>
       has been called, only when the last call to <b>Tcl_Preserve</b> is matched by a call to  <b>Tcl_Release</b>,  will  the
       interpreter be freed. See the manual entry for <b>Tcl_Preserve</b> for a description of these functions.

       The rules for when the user of an interpreter must call <b>Tcl_Preserve</b> and <b>Tcl_Release</b> are simple:

       <b>Interpreters</b> <b>Passed</b> <b>As</b> <b>Arguments</b>
              Functions that are passed an interpreter as an argument can safely use the interpreter without any
              special  protection.  Thus, when you write an extension consisting of new Tcl commands, no special
              code is needed to protect interpreters received as arguments. This  covers  the  majority  of  all
              uses.

       <b>Interpreter</b> <b>Creation</b> <b>And</b> <b>Deletion</b>
              When  a  new  interpreter  is created and used in a call to <b>Tcl_Eval</b>, <b>Tcl_VarEval</b>, <b>Tcl_GlobalEval</b>,
              <b>Tcl_SetVar</b>, or <b>Tcl_GetVar</b>, a pair of calls to  <b>Tcl_Preserve</b>  and  <b>Tcl_Release</b>  should  be  wrapped
              around  all  uses  of  the  interpreter.   Remember  that it is unsafe to use the interpreter once
              <b>Tcl_Release</b> has been called. To ensure that the interpreter is properly  deleted  when  it  is  no
              longer  needed, call <b>Tcl_InterpDeleted</b> to test if some other code already called <b>Tcl_DeleteInterp</b>;
              if not, call <b>Tcl_DeleteInterp</b> before calling <b>Tcl_Release</b> in your own code.

       <b>Retrieving</b> <b>An</b> <b>Interpreter</b> <b>From</b> <b>A</b> <b>Data</b> <b>Structure</b>
              When an interpreter is retrieved from a data structure (e.g. the client data of  a  callback)  for
              use in one of the evaluation functions (<b>Tcl_Eval</b>, <b>Tcl_VarEval</b>, <b>Tcl_GlobalEval</b>, <b>Tcl_EvalObjv</b>, etc.)
              or  variable  access  functions  (<b>Tcl_SetVar</b>, <b>Tcl_GetVar</b>, <b>Tcl_SetVar2Ex</b>, etc.), a pair of calls to
              <b>Tcl_Preserve</b> and <b>Tcl_Release</b> should be wrapped around all uses of the interpreter; it is unsafe to
              reuse the interpreter once <b>Tcl_Release</b> has been called. If  an  interpreter  is  stored  inside  a
              callback  data  structure,  an appropriate deletion cleanup mechanism should be set up by the code
              that creates the data structure so that the interpreter is removed from the data  structure  (e.g.
              by  setting  the  field  to  NULL) when the interpreter is deleted. Otherwise, you may be using an
              interpreter that has been freed and whose memory may already have been reused.

       All uses of interpreters in Tcl and Tk have already been protected.  Extension writers should ensure that
       their code also properly protects any additional interpreters used, as described above.

       Note that the protection mechanisms do not work well with conventional garbage collection  systems.  When
       in  such  a  managed  environment,  <b>Tcl_InterpActive</b> should be used to determine when an interpreter is a
       candidate for deletion due to inactivity.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/Tcl_Preserve.3tcl.html">Tcl_Preserve</a>(3tcl), <a href="../man3tcl/Tcl_Release.3tcl.html">Tcl_Release</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       command, create, delete, interpreter

Tcl                                                    7.5                                <u><a href="../man3tcl/Tcl_CreateInterp.3tcl.html">Tcl_CreateInterp</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>