<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_CommandTraceInfo, Tcl_TraceCommand, Tcl_UntraceCommand - monitor renames and deletes of a command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_CommandTraceInfo, Tcl_TraceCommand, Tcl_UntraceCommand - monitor renames and deletes of a command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       void *
       <b>Tcl_CommandTraceInfo</b>(<u>interp,</u> <u>cmdName,</u> <u>flags,</u> <u>proc,</u> <u>prevClientData</u>)

       int
       <b>Tcl_TraceCommand</b>(<u>interp,</u> <u>cmdName,</u> <u>flags,</u> <u>proc,</u> <u>clientData</u>)

       <b>Tcl_UntraceCommand</b>(<u>interp,</u> <u>cmdName,</u> <u>flags,</u> <u>proc,</u> <u>clientData</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)                           Interpreter containing the command.

       const char <u>*cmdName</u> (in)                          Name of command.

       int <u>flags</u> (in)                                    OR'ed  collection  of  the  values <b>TCL_TRACE_RENAME</b> and
                                                         <b>TCL_TRACE_DELETE</b>.

       Tcl_CommandTraceProc <u>*proc</u> (in)                   Procedure to call when specified  operations  occur  to
                                                         <u>cmdName</u>.

       void <u>*clientData</u> (in)                             Arbitrary argument to pass to <u>proc</u>.

       void <u>*prevClientData</u> (in)                         If    non-NULL,    gives   last   value   returned   by
                                                         <b>Tcl_CommandTraceInfo</b>,  so   this   call   will   return
                                                         information  about next trace.  If NULL, this call will
                                                         return information about first trace.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tcl_TraceCommand</b> allows a C procedure to monitor operations performed on a Tcl command,  so  that  the  C
       procedure  is  invoked  whenever the command is renamed or deleted.  If the trace is created successfully
       then <b>Tcl_TraceCommand</b> returns <b>TCL_OK</b>. If  an  error  occurred  (e.g.  <u>cmdName</u>  specifies  a  non-existent
       command) then <b>TCL_ERROR</b> is returned and an error message is left in the interpreter's result.

       The  <u>flags</u> argument to <b>Tcl_TraceCommand</b> indicates when the trace procedure is to be invoked.  It consists
       of an OR'ed combination of any of the following values:

       <b>TCL_TRACE_RENAME</b>
              Invoke <u>proc</u> whenever the command is renamed.

       <b>TCL_TRACE_DELETE</b>
              Invoke <u>proc</u> when the command is deleted.

       Whenever one of the specified operations occurs to the command, <u>proc</u> will be  invoked.   It  should  have
       arguments and result that match the type <b>Tcl_CommandTraceProc</b>:

              typedef void <b>Tcl_CommandTraceProc</b>(
                      void *<u>clientData</u>,
                      Tcl_Interp *<u>interp</u>,
                      const char *<u>oldName</u>,
                      const char *<u>newName</u>,
                      int <u>flags</u>);

       The  <u>clientData</u>  and <u>interp</u> parameters will have the same values as those passed to <b>Tcl_TraceCommand</b> when
       the trace was created.  <u>clientData</u> typically  points  to  an  application-specific  data  structure  that
       describes  what  to  do  when  <u>proc</u> is invoked.  <u>OldName</u> gives the name of the command being renamed, and
       <u>newName</u> gives the name that the command is being renamed to (or NULL when the command is being  deleted.)
       <u>Flags</u>  is  an  OR'ed combination of bits potentially providing several pieces of information.  One of the
       bits <b>TCL_TRACE_RENAME</b> and <b>TCL_TRACE_DELETE</b> will be set in <u>flags</u> to  indicate  which  operation  is  being
       performed  on  the command.  The bit <b>TCL_TRACE_DESTROYED</b> will be set in <u>flags</u> if the trace is about to be
       destroyed; this information may be useful to <u>proc</u>  so  that  it  can  clean  up  its  own  internal  data
       structures  (see  the  section  <b>TCL_TRACE_DESTROYED</b>  below  for  more  details).  Because the deletion of
       commands can take place as part of the deletion of the interp that contains them, <u>proc</u>  must  be  careful
       about  checking  what the passed in <u>interp</u> value can be called upon to do.  The routine <b>Tcl_InterpDeleted</b>
       is an important tool for this.  When <b>Tcl_InterpDeleted</b> returns 1, <u>proc</u> will not be  able  to  invoke  any
       scripts  in  <u>interp</u>.  The function of <u>proc</u> in that circumstance is limited to the cleanup of its own data
       structures.

       <b>Tcl_UntraceCommand</b> may be used to remove a trace.  If the command specified by <u>interp</u>, <u>cmdName</u>, and <u>flags</u>
       has a trace set with <u>flags</u>, <u>proc</u>, and <u>clientData</u>, then the corresponding trace is removed.   If  no  such
       trace  exists,  then  the call to <b>Tcl_UntraceCommand</b> has no effect.  The same bits are valid for <u>flags</u> as
       for calls to <b>Tcl_TraceCommand</b>.

       <b>Tcl_CommandTraceInfo</b> may be used to retrieve information about traces set on a given command.  The return
       value from <b>Tcl_CommandTraceInfo</b> is the <u>clientData</u> associated with a particular trace.  The trace must  be
       on  the  command specified by the <u>interp</u>, <u>cmdName</u>, and <u>flags</u> arguments (note that currently the flags are
       ignored; <u>flags</u> should be set to 0 for future compatibility) and its trace procedure must the same as  the
       <u>proc</u>  argument.   If  the  <u>prevClientData</u> argument is NULL then the return value corresponds to the first
       (most recently created) matching trace, or NULL if there are no matching traces.  If  the  <u>prevClientData</u>
       argument  is  not  NULL, then it should be the return value from a previous call to <b>Tcl_CommandTraceInfo</b>.
       In this case, the new return value will correspond to  the  next  matching  trace  after  the  one  whose
       <u>clientData</u>  matches  <u>prevClientData</u>,  or  NULL if no trace matches <u>prevClientData</u> or if there are no more
       matching traces after it.  This mechanism makes it possible to step through all of the traces for a given
       command that have the same <u>proc</u>.

</pre><h4><b>CALLING</b> <b>COMMANDS</b> <b>DURING</b> <b>TRACES</b></h4><pre>
       During rename traces, the command being renamed is  visible  with  both  names  simultaneously,  and  the
       command still exists during delete traces, unless the interp that contains it is being deleted.  However,
       there  is no mechanism for signaling that an error occurred in a trace procedure, so great care should be
       taken that errors do not get silently lost.

</pre><h4><b>MULTIPLE</b> <b>TRACES</b></h4><pre>
       It is possible for multiple traces to exist on the same command.  When this happens,  all  of  the  trace
       procedures will be invoked on each access, in order from most-recently-created to least-recently-created.
       Attempts  to  delete  the  command during a delete trace will fail silently, since the command is already
       scheduled for deletion anyway.  If the command being renamed is renamed by one of its rename traces, that
       renaming takes precedence over the one that triggered the trace and the collection of traces will not  be
       reexecuted; if several traces rename the command, the last renaming takes precedence.

</pre><h4><b>TCL_TRACE_DESTROYED</b> <b>FLAG</b></h4><pre>
       In a delete callback to <u>proc</u>, the <b>TCL_TRACE_DESTROYED</b> bit is set in <u>flags</u>.

</pre><h4><b>KEYWORDS</b></h4><pre>
       clientData, trace, command

Tcl                                                    7.4                                <u><a href="../man3tcl/Tcl_TraceCommand.3tcl.html">Tcl_TraceCommand</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>