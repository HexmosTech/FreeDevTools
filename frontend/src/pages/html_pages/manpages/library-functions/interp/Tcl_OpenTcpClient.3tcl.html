<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_OpenTcpClient,  Tcl_MakeTcpClientChannel, Tcl_OpenTcpServer, Tcl_OpenTcpServerEx - procedures to open</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_OpenTcpClient,  Tcl_MakeTcpClientChannel, Tcl_OpenTcpServer, Tcl_OpenTcpServerEx - procedures to open
       channels using TCP sockets

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Channel
       <b>Tcl_OpenTcpClient</b>(<u>interp,</u> <u>port,</u> <u>host,</u> <u>myaddr,</u> <u>myport,</u> <u>async</u>)

       Tcl_Channel
       <b>Tcl_MakeTcpClientChannel</b>(<u>sock</u>)

       Tcl_Channel
       <b>Tcl_OpenTcpServer</b>(<u>interp,</u> <u>port,</u> <u>myaddr,</u> <u>proc,</u> <u>clientData</u>)

       Tcl_Channel
       <b>Tcl_OpenTcpServerEx</b>(<u>interp,</u> <u>service,</u> <u>myaddr,</u> <u>flags,</u> <u>backlog,</u> <u>proc,</u> <u>clientData</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)                    Tcl interpreter to use for error reporting.  If  non-NULL  and
                                                  an error occurs, an error message is left in the interpreter's
                                                  result.

       int <u>port</u> (in)                              A  port  number to connect to as a client or to listen on as a
                                                  server.

       const char <u>*service</u> (in)                   A string specifying the port number to connect to as a  client
                                                  or to listen on as
                                                   a server.

       const char <u>*host</u> (in)                      A  string specifying a host name or address for the remote end
                                                  of the connection.

       int <u>myport</u> (in)                            A port number for the client's end of the  socket.   If  0,  a
                                                  port number is allocated at random.

       const char <u>*myaddr</u> (in)                    A  string  specifying  the  host  name  or address for network
                                                  interface to use for the local  end  of  the  connection.   If
                                                  NULL, a default interface is chosen.

       int <u>async</u> (in)                             If  nonzero,  the client socket is connected asynchronously to
                                                  the server.

       int <u>backlog</u> (in)                           Length of OS listen backlog queue. Use -1 for default value.

       unsigned int <u>flags</u> (in)                    ORed  combination  of  <b>TCL_TCPSERVER_*</b>  flags   that   specify
                                                  additional information about the socket being created.

       void <u>*sock</u> (in)                            Platform-specific handle for client TCP socket.

       Tcl_TcpAcceptProc <u>*proc</u> (in)               Pointer to a procedure to invoke each time a new connection is
                                                  accepted via the socket.

       void <u>*clientData</u> (in)                      Arbitrary one-word value to pass to <u>proc</u>.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  functions are convenience procedures for creating channels that communicate over TCP sockets.  The
       operations on a channel are described in the manual entry for <b>Tcl_OpenFileChannel</b>.

   <b>TCL_OPENTCPCLIENT</b>
       <b>Tcl_OpenTcpClient</b> opens a client TCP socket connected to a <u>port</u> on a specific <u>host</u>, and returns a channel
       that can be used to communicate with the server. The host to connect to can  be  specified  either  as  a
       domain  name style name (e.g. <b>www.sunlabs.com</b>), or as a string containing the alphanumeric representation
       of its four-byte address (e.g.  <b>127.0.0.1</b>). Use the string <b>localhost</b> to connect to a TCP  socket  on  the
       host on which the function is invoked.

       The <u>myaddr</u> and <u>myport</u> arguments allow a client to specify an address for the local end of the connection.
       If  <u>myaddr</u>  is  NULL, then an interface is chosen automatically by the operating system.  If <u>myport</u> is 0,
       then a port number is chosen at random by the operating system.

       If <u>async</u> is zero, the call  to  <b>Tcl_OpenTcpClient</b>  returns  only  after  the  client  socket  has  either
       successfully  connected  to  the server, or the attempted connection has failed.  If <u>async</u> is nonzero the
       socket is connected asynchronously and the returned channel may not yet be connected to the  server  when
       the  call  to  <b>Tcl_OpenTcpClient</b>  returns.  If  the  channel  is  in blocking mode and an input or output
       operation is done on the channel before the connection is completed or fails, that  operation  will  wait
       until  the  connection either completes successfully or fails. If the channel is in nonblocking mode, the
       input or output operation will return immediately and  a  subsequent  call  to  <b>Tcl_InputBlocked</b>  on  the
       channel will return nonzero.

       The  returned  channel  is  opened  for  reading  and writing.  If an error occurs in opening the socket,
       <b>Tcl_OpenTcpClient</b> returns NULL and records a POSIX error code that can be  retrieved  with  <b>Tcl_GetErrno</b>.
       In addition, if <u>interp</u> is non-NULL, an error message is left in the interpreter's result.

       The  newly  created  channel  is  not  registered  in  the  supplied  interpreter;  to  register  it, use
       <b>Tcl_RegisterChannel</b>.  If one of the standard channels, <b>stdin</b>, <b>stdout</b> or <b>stderr</b> was previously closed, the
       act of creating the new channel also assigns it as a replacement for the standard channel.

   <b>TCL_MAKETCPCLIENTCHANNEL</b>
       <b>Tcl_MakeTcpClientChannel</b> creates a <b>Tcl_Channel</b> around an existing, platform specific, handle for a client
       TCP socket.

       The newly  created  channel  is  not  registered  in  the  supplied  interpreter;  to  register  it,  use
       <b>Tcl_RegisterChannel</b>.  If one of the standard channels, <b>stdin</b>, <b>stdout</b> or <b>stderr</b> was previously closed, the
       act of creating the new channel also assigns it as a replacement for the standard channel.

   <b>TCL_OPENTCPSERVER</b>
       <b>Tcl_OpenTcpServer</b>  opens  a  TCP  socket  on  the  local  host on a specified <u>port</u> and uses the Tcl event
       mechanism to accept requests from clients to connect to it. The <u>myaddr</u>  argument  specifies  the  network
       interface.  If <u>myaddr</u> is NULL the special address INADDR_ANY should be used to allow connections from any
       network  interface.   Each  time  a  client  connects  to  this socket, Tcl creates a channel for the new
       connection and invokes <u>proc</u> with information about the channel. <u>Proc</u> must match the following prototype:

              typedef void <b>Tcl_TcpAcceptProc</b>(
                      void *<u>clientData</u>,
                      Tcl_Channel <u>channel</u>,
                      char *<u>hostName</u>,
                      int <u>port</u>);

       The <u>clientData</u> argument will be the same as the <u>clientData</u> argument to <b>Tcl_OpenTcpServer</b>, <u>channel</u> will be
       the handle for the new channel, <u>hostName</u> points to a string containing the name of the client host making
       the connection, and <u>port</u> will contain the client's port number.  The new channel is opened for both input
       and output.  If <u>proc</u> raises an error, the connection is closed automatically.  <u>Proc</u> has no return  value,
       but if it wishes to reject the connection it can close <u>channel</u>.

       <b>Tcl_OpenTcpServer</b>  normally  returns  a pointer to a channel representing the server socket.  If an error
       occurs, <b>Tcl_OpenTcpServer</b> returns NULL and records  a  POSIX  error  code  that  can  be  retrieved  with
       <b>Tcl_GetErrno</b>.  In addition, if the interpreter is non-NULL, an error message is left in the interpreter's
       result.

       The  channel  returned  by  <b>Tcl_OpenTcpServer</b>  cannot be used for either input or output.  It is simply a
       handle for the socket used to accept connections.  The caller can close the  channel  to  shut  down  the
       server and disallow further connections from new clients.

       TCP server channels operate correctly only in applications that dispatch events through <b>Tcl_DoOneEvent</b> or
       through  Tcl  commands  such  as  <b>vwait</b>; otherwise Tcl will never notice that a connection request from a
       remote client is pending.

       The newly  created  channel  is  not  registered  in  the  supplied  interpreter;  to  register  it,  use
       <b>Tcl_RegisterChannel</b>.  If one of the standard channels, <b>stdin</b>, <b>stdout</b> or <b>stderr</b> was previously closed, the
       act of creating the new channel also assigns it as a replacement for the standard channel.

   <b>TCL_OPENTCPSERVEREX</b>
       <b>Tcl_OpenTcpServerEx</b> behaviour is identical to <b>Tcl_OpenTcpServer</b> but gives more flexibility to the user by
       providing a mean to further customize some aspects of the socket via the <u>flags</u> parameter. Available flags
       (dependent on platform) are <u>TCL_TCPSERVER_REUSEADDR</u> <u>TCL_TCPSERVER_REUSEPORT</u>

</pre><h4><b>PLATFORM</b> <b>ISSUES</b></h4><pre>
       On Unix platforms, the socket handle is a Unix file descriptor as returned by the <b>socket</b> system call.  On
       the Windows platform, the socket handle is a <b>SOCKET</b> as defined in the WinSock API.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/Tcl_OpenFileChannel.3tcl.html">Tcl_OpenFileChannel</a>(3tcl), <a href="../man3tcl/Tcl_RegisterChannel.3tcl.html">Tcl_RegisterChannel</a>(3tcl), <a href="../man3tcl/vwait.3tcl.html">vwait</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       channel, client, server, socket, TCP

Tcl                                                    9.0                               <u><a href="../man3tcl/Tcl_OpenTcpClient.3tcl.html">Tcl_OpenTcpClient</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>