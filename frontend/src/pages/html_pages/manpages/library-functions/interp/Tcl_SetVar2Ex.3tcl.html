<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_SetVar2Ex,   Tcl_SetVar,   Tcl_SetVar2,   Tcl_ObjSetVar2,   Tcl_GetVar2Ex,  Tcl_GetVar,  Tcl_GetVar2,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_SetVar2Ex,   Tcl_SetVar,   Tcl_SetVar2,   Tcl_ObjSetVar2,   Tcl_GetVar2Ex,  Tcl_GetVar,  Tcl_GetVar2,
       Tcl_ObjGetVar2, Tcl_UnsetVar, Tcl_UnsetVar2 - manipulate Tcl variables

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Obj *
       <b>Tcl_SetVar2Ex</b>(<u>interp,</u> <u>name1,</u> <u>name2,</u> <u>newValuePtr,</u> <u>flags</u>)

       const char *
       <b>Tcl_SetVar</b>(<u>interp,</u> <u>varName,</u> <u>newValue,</u> <u>flags</u>)

       const char *
       <b>Tcl_SetVar2</b>(<u>interp,</u> <u>name1,</u> <u>name2,</u> <u>newValue,</u> <u>flags</u>)

       Tcl_Obj *
       <b>Tcl_ObjSetVar2</b>(<u>interp,</u> <u>part1Ptr,</u> <u>part2Ptr,</u> <u>newValuePtr,</u> <u>flags</u>)

       Tcl_Obj *
       <b>Tcl_GetVar2Ex</b>(<u>interp,</u> <u>name1,</u> <u>name2,</u> <u>flags</u>)

       const char *
       <b>Tcl_GetVar</b>(<u>interp,</u> <u>varName,</u> <u>flags</u>)

       const char *
       <b>Tcl_GetVar2</b>(<u>interp,</u> <u>name1,</u> <u>name2,</u> <u>flags</u>)

       Tcl_Obj *
       <b>Tcl_ObjGetVar2</b>(<u>interp,</u> <u>part1Ptr,</u> <u>part2Ptr,</u> <u>flags</u>)

       int
       <b>Tcl_UnsetVar</b>(<u>interp,</u> <u>varName,</u> <u>flags</u>)

       int
       <b>Tcl_UnsetVar2</b>(<u>interp,</u> <u>name1,</u> <u>name2,</u> <u>flags</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)               Interpreter containing variable.

       const char <u>*name1</u> (in)                Contains the name of an array variable (if <u>name2</u>  is  non-NULL)  or
                                             (if  <u>name2</u>  is  NULL)  either  the  name  of a scalar variable or a
                                             complete name including both variable name and index.  May  include
                                             <b>::</b>  namespace  qualifiers  to  specify  a  variable in a particular
                                             namespace.

       const char <u>*name2</u> (in)                If non-NULL, gives name of element within array; in this case <u>name1</u>
                                             must refer to an array variable.

       Tcl_Obj <u>*newValuePtr</u> (in)             Points to a Tcl value containing the new value for the variable.

       int <u>flags</u> (in)                        OR-ed combination of bits  providing  additional  information.  See
                                             below for valid values.

       const char <u>*varName</u> (in)              Name of variable.  May include <b>::</b> namespace qualifiers to specify a
                                             variable in a particular namespace.  May refer to a scalar variable
                                             or an element of an array.

       const char <u>*newValue</u> (in)             New  value  for variable, specified as a null-terminated string.  A
                                             copy of this value is stored in the variable.

       Tcl_Obj <u>*part1Ptr</u> (in)                Points to a Tcl value containing the variable's name.  The name may
                                             include a series of <b>::</b> namespace qualifiers to specify  a  variable
                                             in  a  particular  namespace.  May refer to a scalar variable or an
                                             element of an array variable.

       Tcl_Obj <u>*part2Ptr</u> (in)                If non-NULL, points to a value containing the name  of  an  element
                                             within an array and <u>part1Ptr</u> must refer to an array variable.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These procedures are used to create, modify, read, and delete Tcl variables from C code.

       <b>Tcl_SetVar2Ex</b>,  <b>Tcl_SetVar</b>,  <b>Tcl_SetVar2</b>,  and  <b>Tcl_ObjSetVar2</b>  will  create  a new variable or modify an
       existing one.  These procedures set the given variable to the value given by <u>newValuePtr</u> or <u>newValue</u>  and
       return a pointer to the variable's new value, which is stored in Tcl's variable structure.  <b>Tcl_SetVar2Ex</b>
       and  <b>Tcl_ObjSetVar2</b>  take  the  new value as a Tcl_Obj and return a pointer to a Tcl_Obj.  <b>Tcl_SetVar</b> and
       <b>Tcl_SetVar2</b> take the new value as a string and return a string; they  are  usually  less  efficient  than
       <b>Tcl_ObjSetVar2</b>.   Note  that the return value may be different than the <u>newValuePtr</u> or <u>newValue</u> argument,
       due to modifications made by write traces.  If an error occurs in setting the  variable  (e.g.  an  array
       variable  is  referenced without giving an index into the array) NULL is returned and an error message is
       left in <u>interp</u>'s result if the <b>TCL_LEAVE_ERR_MSG</b> <u>flag</u> bit is set.

       <b>Tcl_GetVar2Ex</b>, <b>Tcl_GetVar</b>, <b>Tcl_GetVar2</b>, and <b>Tcl_ObjGetVar2</b> return the current value of a  variable.   The
       arguments  to  these  procedures are treated in the same way as the arguments to the procedures described
       above.  Under normal circumstances, the  return  value  is  a  pointer  to  the  variable's  value.   For
       <b>Tcl_GetVar2Ex</b>  and  <b>Tcl_ObjGetVar2</b>  the  value is returned as a pointer to a Tcl_Obj.  For <b>Tcl_GetVar</b> and
       <b>Tcl_GetVar2</b> the value is returned as a string; this  is  usually  less  efficient,  so  <b>Tcl_GetVar2Ex</b>  or
       <b>Tcl_ObjGetVar2</b>  are preferred.  If an error occurs while reading the variable (e.g. the variable does not
       exist or an array element is specified for a scalar variable), then NULL is returned and an error message
       is left in <u>interp</u>'s result if the <b>TCL_LEAVE_ERR_MSG</b> <u>flag</u> bit is set.

       <b>Tcl_UnsetVar</b> and <b>Tcl_UnsetVar2</b> may be used to remove a variable, so that  future  attempts  to  read  the
       variable  will  return  an  error.   The arguments to these procedures are treated in the same way as the
       arguments to the procedures above.  If the variable is successfully removed then <b>TCL_OK</b> is returned.   If
       the  variable cannot be removed because it does not exist then <b>TCL_ERROR</b> is returned and an error message
       is left in <u>interp</u>'s result if the <b>TCL_LEAVE_ERR_MSG</b> <u>flag</u> bit is set.  If an array element  is  specified,
       the given element is removed but the array remains.  If an array name is specified without an index, then
       the entire array is removed.

       The name of a variable may be specified to these procedures in four ways:

       [1]    If  <b>Tcl_SetVar</b>,  <b>Tcl_GetVar</b>,  or  <b>Tcl_UnsetVar</b>  is invoked, the variable name is given as a single
              string, <u>varName</u>.  If <u>varName</u> contains an open parenthesis and ends with a close parenthesis,  then
              the value between the parentheses is treated as an index (which can have any string value) and the
              characters  before  the  first  open parenthesis are treated as the name of an array variable.  If
              <u>varName</u> does not have parentheses as described above, then the entire string  is  treated  as  the
              name of a scalar variable.

       [2]    If  the  <u>name1</u>  and  <u>name2</u>  arguments are provided and <u>name2</u> is non-NULL, then an array element is
              specified and the array name and index have already been separated by the caller:  <u>name1</u>  contains
              the  name  and  <u>name2</u>  contains  the  index.   An  error  is  generated if <u>name1</u>  contains an open
              parenthesis and ends with a close parenthesis (array element) and <u>name2</u> is non-NULL.

       [3]    If <u>name2</u> is NULL, <u>name1</u> is treated just like <u>varName</u> in case [1] above (it can be either a  scalar
              or an array element variable name).

       The  <u>flags</u>  argument  may be used to specify any of several options to the procedures.  It consists of an
       OR-ed combination of the following bits.

       <b>TCL_GLOBAL_ONLY</b>
              Under normal circumstances the procedures look up variables as follows.  If a  procedure  call  is
              active  in  <u>interp</u>,  the variable is looked up at the current level of procedure call.  Otherwise,
              the variable is looked up first in the current namespace, then in the global namespace.   However,
              if  this  bit  is set in <u>flags</u> then the variable is looked up only in the global namespace even if
              there is a procedure call active.  If  both  <b>TCL_GLOBAL_ONLY</b>  and  <b>TCL_NAMESPACE_ONLY</b>  are  given,
              <b>TCL_GLOBAL_ONLY</b> is ignored.

       <b>TCL_NAMESPACE_ONLY</b>
              If  this  bit  is  set in <u>flags</u> then the variable is looked up only in the current namespace; if a
              procedure is active its variables are ignored, and the global namespace is also ignored unless  it
              is the current namespace.

       <b>TCL_LEAVE_ERR_MSG</b>
              If  an  error  is returned and this bit is set in <u>flags</u>, then an error message will be left in the
              interpreter's result, where it can be retrieved with <b>Tcl_GetObjResult</b> or <b>Tcl_GetStringResult</b>.   If
              this  flag  bit  is not set then no error message is left and the interpreter's result will not be
              modified.

       <b>TCL_APPEND_VALUE</b>
              If this bit is set then <u>newValuePtr</u> or <u>newValue</u> is  appended  to  the  current  value  instead  of
              replacing  it.  If the variable is currently undefined, then the bit is ignored.  This bit is only
              used by the <b>Tcl_Set*</b> procedures.

       <b>TCL_LIST_ELEMENT</b>
              If this bit is set, then <u>newValue</u> is converted to a valid Tcl  list  element  before  setting  (or
              appending  to) the variable.  A separator space is appended before the new list element unless the
              list element is going to be the first element in a list or sublist (i.e.  the  variable's  current
              value  is  empty,  or  contains  the  single character “{”, or ends in “ }”).  When appending, the
              original value of the variable must also be a valid list, so that the operation is  the  appending
              of a new list element onto a list.

       <b>Tcl_GetVar</b> and <b>Tcl_GetVar2</b> return the current value of a variable.  The arguments to these procedures are
       treated  in the same way as the arguments to <b>Tcl_SetVar</b> and <b>Tcl_SetVar2</b>.  Under normal circumstances, the
       return value is a pointer to the variable's value (which is stored in Tcl's variable structure  and  will
       not  change  before the next call to <b>Tcl_SetVar</b> or <b>Tcl_SetVar2</b>).  <b>Tcl_GetVar</b> and <b>Tcl_GetVar2</b> use the flag
       bits <b>TCL_GLOBAL_ONLY</b> and <b>TCL_LEAVE_ERR_MSG</b>, both of which have the same meaning as for <b>Tcl_SetVar</b>.  If an
       error occurs in reading the variable (e.g. the variable does not exist or an array element  is  specified
       for a scalar variable), then NULL is returned.

       <b>Tcl_UnsetVar</b>  and  <b>Tcl_UnsetVar2</b>  may be used to remove a variable, so that future calls to <b>Tcl_GetVar</b> or
       <b>Tcl_GetVar2</b> for the variable will return an error.  The arguments to these procedures are treated in  the
       same  way  as  the arguments to <b>Tcl_GetVar</b> and <b>Tcl_GetVar2</b>.  If the variable is successfully removed then
       <b>TCL_OK</b> is returned.  If the variable cannot be removed because  it  does  not  exist  then  <b>TCL_ERROR</b>  is
       returned.   If  an array element is specified, the given element is removed but the array remains.  If an
       array name is specified without an index, then the entire array is removed.

</pre><h4><b>REFERENCE</b> <b>COUNT</b> <b>MANAGEMENT</b></h4><pre>
       The result of <b>Tcl_SetVar2Ex</b>, <b>Tcl_ObjSetVar2</b>, <b>Tcl_GetVar2Ex</b>, and <b>Tcl_ObjGetVar2</b> is (if non-NULL)  a  value
       with  a  reference of at least 1, where that reference is held by the variable that the function has just
       operated upon.

       The <u>newValuePtr</u> argument to <b>Tcl_SetVar2Ex</b> and <b>Tcl_ObjSetVar2</b> may be an arbitrary reference  count  value.
       Its  reference  count  is  incremented  on  success.   On  failure, if its reference count is zero, it is
       decremented and freed so the caller need do nothing with it.

       The <u>part1Ptr</u> argument to <b>Tcl_ObjSetVar2</b> and <b>Tcl_ObjGetVar2</b> can have any reference count.  These functions
       never modify it.

       The <u>part2Ptr</u> argument to <b>Tcl_ObjSetVar2</b> and <b>Tcl_ObjGetVar2</b>, if non-NULL, should not have a zero reference
       count as these functions may retain a reference to it, particularly when it is used to  create  an  array
       element  that  did  not  previously  exist,  and  decrementing the reference count later would leave them
       pointing to a freed Tcl_Obj.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Tcl_GetObjResult, Tcl_GetStringResult, Tcl_TraceVar

</pre><h4><b>KEYWORDS</b></h4><pre>
       array, get variable, interpreter, scalar, set, unset, value, variable

Tcl                                                    8.1                                      <u><a href="../man3tcl/Tcl_SetVar.3tcl.html">Tcl_SetVar</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>