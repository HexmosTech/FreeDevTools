<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safe::Hole - make a hole to the original main compartment in the Safe compartment</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsafe-hole-perl">libsafe-hole-perl_0.14-1build7_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Safe::Hole - make a hole to the original main compartment in the Safe compartment

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Safe;
         use Safe::Hole;
         $cpt = new Safe;
         $hole = new Safe::Hole {};
         sub test { Test-&gt;test; }
         $Testobj = new Test;
         # $cpt-&gt;share('&amp;test');  # alternate as next line
         $hole-&gt;wrap(\&amp;test, $cpt, '&amp;test');
         # ${$cpt-&gt;varglob('Testobj')} = $Testobj;  # alternate as next line
         $hole-&gt;wrap($Testobj, $cpt, '$Testobj');
         $cpt-&gt;reval('test; $Testobj-&gt;test;');
         print $@ if $@;
         package Test;
         sub new { bless {},shift(); }
         sub test { my $self = shift; $self-&gt;test2; }
         sub test2 { print "Test-&gt;test2 called\n"; }

</pre><h4><b>DESCRIPTION</b></h4><pre>
         We can call outside defined subroutines from the Safe compartment
       using share(), or can call methods through the object that is copied
       into the Safe compartment using varglob(). But that subroutines or
       methods are executed in the Safe compartment too, so they cannot call
       another subroutines that are dinamically qualified with the package
       name such as class methods nor can they compile code that uses opcodes
       that are forbidden within the compartment.

         Through Safe::Hole, we can execute outside defined subroutines in the
       original main compartment from the Safe compartment.

         Note that if a subroutine called through Safe::Hole::call does a
       Carp::croak() it will report the error as having occured within
       Safe::Hole.  This can be avoided by including Safe::Hole::User in the
       @ISA for the package containing the subroutine.

   <b>Methods</b>
       new [NAMESPACE]
           Class method. Backward compatible constructor.
             NAMESPACE is the alternate root namespace that makes the compartment in which <b>call()</b> method execute
           the  subroutine.   Default  of  NAMESPACE  means  the  current 'main'. This emulates the behaviour of
           Safe-Hole-0.08 and earlier.

       new \%arguments
           Class method. Constructor.
             The constructor is called with a hash reference providing the constructor arguments.  The  argument
           ROOT  specifies  the  alternate root namespace for the object.  If the ROOT argument is not specified
           then Safe::Hole object will attempt restore as much as it can of the  environment  in  which  it  was
           constrtucted.   This  includes the opcode mask, %INC and @INC.  If a root namespace is specified then
           it would not make sense to restore the %INC and @INC from main:: so this is not done.  Also if a root
           namespace is given the opcode mask is not restored either.

       call $coderef [,@args]
           Object method.
             Call the subroutine refered by $coderef in the compartment that is specified with constructor  new.
           @args  are passed as the arguments to the called $coderef.  Note that the arguments are not currently
           passed by reference although this may change in a future version.

       wrap $ref [,$cpt ,$name]
           Object method.
             If $ref is a code reference, this method returns the anonymous subroutine reference that calls $ref
           using <b>call()</b> method of Safe::Hole (see above).
             If $ref is a class object, this method makes a wrapper class of  that  object  and  returns  a  new
           object  of  the  wrapper  class.  Through  the wrapper class, all original class methods called using
           <b>call()</b> method of Safe::Hole.
             If $cpt as Safe object and $name as subroutine or scalar name specified,  this  method  works  like
           <b>share()</b>  method  of Safe. When $ref is a code reference $name must like '&amp;subroutine'. When $ref is a
           object $name must like '$var'.
             Name $name may not be same as referent of $ref. For example:
             $hole-&gt;wrap(\&amp;foo, $cpt, '&amp;bar');
             $hole-&gt;wrap(sub{...}, $cpt, '&amp;foo');
             $hole-&gt;wrap($objfoo, $cpt, '$objbar');

       root
           Object method.  Return the namespace that is specified with constructor <b>new()</b>.  If no  namespace  was
           then <b>root()</b> returns 'main'.

   <b>Warning</b>
       You  MUST NOT share the Safe::Hole object with the Safe compartment. If you do it the Safe compartment is
       NOT safe.

       This module provides a means to go from a state where an opcode is denied back to a  state  where  it  is
       not.   Reasonable  care  has been taken to ensure that programs cannot simply manipulate the internals to
       the Safe::Hole object to reduce the opmask in effect.  However there may still be a way that the  authors
       have  not considered.  In particular it relies on the fact that a Perl program cannot change stuff inside
       the magic on a Perl variable.  If you install a module that allows a Perl program to  fiddle  inside  the
       magic  then  this assuption breaks down.  One would hope that any system that was running un-trusted code
       would not have such a module installed.

</pre><h4><b>AUTHORS</b></h4><pre>
       Sey Nakajima &lt;<a href="mailto:nakajima@netstock.co.jp">nakajima@netstock.co.jp</a>&gt; (Initial version)

       Brian McCauley &lt;<a href="mailto:nobull@cpan.org">nobull@cpan.org</a>&gt; (Maintenance)

       Todd Rinaldo &lt;<a href="mailto:toddr@cpan.org">toddr@cpan.org</a>&gt; (Maintenance)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/Safe.3.html">Safe</a></b>(3).

perl v5.40.0                                       2024-10-20                                    <u>Safe::<a href="../man3pm/Hole.3pm.html">Hole</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>