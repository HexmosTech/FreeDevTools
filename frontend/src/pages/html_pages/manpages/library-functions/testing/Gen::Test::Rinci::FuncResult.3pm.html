<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gen::Test::Rinci::FuncResult - Generate a test function for a function</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libgen-test-rinci-funcresult-perl">libgen-test-rinci-funcresult-perl_0.06-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Gen::Test::Rinci::FuncResult - Generate a test function for a function

</pre><h4><b>VERSION</b></h4><pre>
       This document describes version 0.06 of Gen::Test::Rinci::FuncResult (from Perl distribution Gen-Test-
       Rinci-FuncResult), released on 2017-07-11.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Gen::Test::Rinci::FuncResult qw(gen_test_func);
        use Test::More;

        sub divide {
            my %args = @_;
            my ($a, $b) = ($args{a}, $args{b});
            return [500, "undefined"] if $a == 0 &amp;&amp; $b == 0;
            [200, "OK", $a/$b];
        }

        gen_test_func(name =&gt; 'test_divide', func =&gt; \&amp;divide);

        test_divide(args=&gt;{a=&gt;6, b=&gt;3}, result=&gt;2);
        test_divide(args=&gt;{a=&gt;6, b=&gt;0}, dies=&gt;1);
        test_divide(args=&gt;{a=&gt;0, b=&gt;0}, status=&gt;500);
        done_testing;

</pre><h4><b>DESCRIPTION</b></h4><pre>
</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>gen_test_func</b>
       Usage:

        gen_test_func(%args) -&gt; [status, msg, result, meta]

       Generate a test function for a function.

       This function (A) will generate a function (B).

       A accepts, among others, the name or the reference to the function that you want to test (T) and the name
       of the generated function, B.

       B will run T once with some specified arguments, catch exception, and test its result. The result is
       expected to be an enveloped result (see the documentation of "Rinci::function" for more details about
       enveloped result).

       B will accept the following arguments:

       •   name (str)

           Name  of  the  test.  Will  default  to "T (ARGS...)" to show the name of the target function and the
           arguments that it is called with.

       •   args (hash or array)

           Argument to feed to function T.

       •   dies (bool, default =&gt; 0)

           Whether function T should die when run. If set to 1, further tests will not be done except  the  test
           that function dies.

       •   status (int, default =&gt; 200)

           Will test the result's status code.

       •   result (any)

           If specified, will test the actual result of the function.

       •   run (code)

           Instead of running function T with "args", will execute this code instead.

       •   posttest (code)

           Run this code for additional tests.

       Todo:

       •   Handle function with "result_naked" =&gt; 1.

       This function is not exported by default, but exportable.

       Arguments ('*' denotes required arguments):

       •   <b>func</b>* =&gt; <u>code</u>

           Target function to test.

       •   <b>install</b> =&gt; <u>bool</u> (default: 1)

           Whether to install the function.

       •   <b>name</b>* =&gt; <u>str</u>

           Name of the test function to generate (B).

           Can  be  fully  qualified,  e.g. "Pkg::SubPkg::funcname" or unqualified "funcname" (where the package
           will be taken from the "package" argument). Relevant for when installing the function.

       •   <b>package</b> =&gt; <u>any</u>

           Perl package to put this function in.

           Relevant only when installing the function.

       Returns an enveloped result (an array).

       First element (status) is an integer containing HTTP status code (200 means OK,  4xx  caller  error,  5xx
       function  error).  Second  element  (msg) is a string containing error message, or 'OK' if status is 200.
       Third element (result) is optional, the actual result. Fourth element (meta) is  called  result  metadata
       and is optional, a hash that contains extra information.

       Return value:  (any)

</pre><h4><b>FAQ</b></h4><pre>
</pre><h4><b>HOMEPAGE</b></h4><pre>
       Please visit the project's homepage at &lt;https://metacpan.org/release/Gen-Test-Rinci-FuncResult&gt;.

</pre><h4><b>SOURCE</b></h4><pre>
       Source repository is at &lt;https://github.com/perlancar/perl-Gen-Test-Rinci-FuncResult&gt;.

</pre><h4><b>BUGS</b></h4><pre>
       Please     report     any     bugs     or     feature     requests     on    the    bugtracker    website
       &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=Gen-Test-Rinci-FuncResult&gt;

       When submitting a bug or request, please include a test-file or a patch to  an  existing  test-file  that
       illustrates the bug or desired feature.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Rinci

</pre><h4><b>AUTHOR</b></h4><pre>
       perlancar &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2017, 2015, 2014, 2013 by <a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.34.0                                       2022-06-14                  <u>Gen::Test::Rinci::<a href="../man3pm/FuncResult.3pm.html">FuncResult</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>