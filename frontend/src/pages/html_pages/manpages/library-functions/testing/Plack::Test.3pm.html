<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plack::Test - Test PSGI applications with various backends</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libplack-perl">libplack-perl_1.0051-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Plack::Test - Test PSGI applications with various backends

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Plack::Test;
         use HTTP::Request::Common;

         # Simple OO interface
         my $app = sub { return [ 200, [], [ "Hello" ] ] };
         my $test = Plack::Test-&gt;create($app);

         my $res = $test-&gt;request(GET "/");
         is $res-&gt;content, "Hello";

         # traditional - named params
         test_psgi
             app =&gt; sub {
                 my $env = shift;
                 return [ 200, [ 'Content-Type' =&gt; 'text/plain' ], [ "Hello World" ] ],
             },
             client =&gt; sub {
                 my $cb  = shift;
                 my $req = HTTP::Request-&gt;new(GET =&gt; "<a href="http://localhost/hello">http://localhost/hello</a>");
                 my $res = $cb-&gt;($req);
                 like $res-&gt;content, qr/Hello World/;
             };

         # positional params (app, client)
         my $app = sub { return [ 200, [], [ "Hello" ] ] };
         test_psgi $app, sub {
             my $cb  = shift;
             my $res = $cb-&gt;(GET "/");
             is $res-&gt;content, "Hello";
         };

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Plack::Test is a unified interface to test PSGI applications using HTTP::Request and HTTP::Response
       objects. It also allows you to run PSGI applications in various ways. The default backend is
       "Plack::Test::MockHTTP", but you may also use any Plack::Handler implementation to run live HTTP requests
       against a web server.

</pre><h4><b>METHODS</b></h4><pre>
       create
             $test = Plack::Test-&gt;create($app, %options);

           creates an instance of Plack::Test implementation class. $app has to be a valid PSGI application code
           reference.

       request
             $res = $test-&gt;request($request);

           takes  an  HTTP::Request  object,  runs  it  through  the  PSGI  application  to  test and returns an
           HTTP::Response object.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       Plack::Test also provides a functional interface that takes two callbacks, each of which represents  PSGI
       application and HTTP client code that tests the application.

       test_psgi
             test_psgi $app, $client;
             test_psgi app =&gt; $app, client =&gt; $client;

           Runs  the  client  test  code  $client  against a PSGI application $app. The client callback gets one
           argument $cb, a callback that accepts an  "HTTP::Request"  object  and  returns  an  "HTTP::Response"
           object.

           Use  HTTP::Request::Common to import shortcuts for creating requests for "GET", "POST", "DELETE", and
           "PUT" operations.

           For your convenience, the "HTTP::Request" given to the callback automatically uses the HTTP  protocol
           and the localhost (<u>127.0.0.1</u> by default), so the following code just works:

             use HTTP::Request::Common;
             test_psgi $app, sub {
                 my $cb  = shift;
                 my $res = $cb-&gt;(GET "/hello");
             };

           Note  that  however,  it is not a good idea to pass an arbitrary (i.e. user-input) string to "GET" or
           even "HTTP::Request-&gt;new" by assuming that it always represents a path, because:

             my $req = GET "//foo/bar";

           would represent a request for a URL that has no scheme, has a hostname <u>foo</u> and a path  <u>/bar</u>,  instead
           of a path <u>//foo/bar</u> which you might actually want.

</pre><h4><b>OPTIONS</b></h4><pre>
       Specify  the  Plack::Test  backend using the environment variable "PLACK_TEST_IMPL" or $Plack::Test::Impl
       package variable.

       The available values for the backend are:

       MockHTTP
           (Default) Creates a PSGI env hash out of HTTP::Request object, runs the PSGI  application  in-process
           and returns HTTP::Response.

       Server
           Runs one of Plack::Handler backends ("Standalone" by default) and sends live HTTP requests to test.

       ExternalServer
           Runs  tests  against  an external server specified in the "PLACK_TEST_EXTERNALSERVER_URI" environment
           variable instead of spawning the application in a server locally.

       For instance, test your application with the "HTTP::Server::ServerSimple" server backend with:

         &gt; env PLACK_TEST_IMPL=Server PLACK_SERVER=HTTP::Server::ServerSimple \
           prove -l t/test.t

</pre><h4><b>AUTHOR</b></h4><pre>
       Tatsuhiko Miyagawa

perl v5.38.2                                       2024-01-20                                   <u>Plack::<a href="../man3pm/Test.3pm.html">Test</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>