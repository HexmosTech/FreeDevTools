<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::POP3 - Automate Email Delivery Tests</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-email-perl">libtest-email-perl_0.07-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::POP3 - Automate Email Delivery Tests

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Test::POP3;

         my $pop = Test::POP3-&gt;new({
             host =&gt; $host,
             user =&gt; $user,
             pass =&gt; $pass,
         });

         # this will delete all messages from the server
         ok($count == $pop-&gt;wait_for_email_count($count,$timeout),"got $count");

         # find and delete a single email message which matches these rules
         # see Test::Email for more information
         $pop-&gt;ok({
           # optional search parameters
           to         =&gt; ($is or qr/is like/),
           from       =&gt; ($is or qr/is like/),
           subject    =&gt; ($is or qr/is like/),
           body       =&gt; ($is or qr/is like/),
           headername =&gt; ($is or qr/is like/),
         }, "got message");

         ok($pop-&gt;get_email_count() == $count, "$count emails in cache");

         # get the Test::Email object
         my @email = $pop-&gt;get_email();

         ok($pop-&gt;delete_all() == 2, "deleted 2 messages");

         # tweak MIME::Parser settings
         my $parser = $pop-&gt;get_parser();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Please note that this is ALPHA CODE. As such, the interface is likely to change.

       This module can help you to create automated tests of email delivered to a POP3 account.

       Messages retrieved from the server but not yet matched by a test will be cached until either that message
       is the first to pass a test, or is returned by "$pop3-&gt;get_email()". Messages returned are Test::Email
       objects.

</pre><h4><b>METHODS</b></h4><pre>
       "my $pop = Test::POP3-&gt;new($href);"
           The arguments passed in the href are host, user, and pass.

       "my $count = $pop-&gt;wait_for_email_count($count, $timeout_seconds?);"
           <b>Calling</b>  <b>this</b> <b>method</b> <b>will</b> <b>result</b> <b>in</b> <b>all</b> <b>messages</b> <b>being</b> <b>deleted</b> <b>from</b> <b>the</b> <b>server.</b>  This will wait up to
           $timeout seconds for there to be $count unprocessed messages found on the  server.  After  $count  or
           more  messages  are  found,  or  after  $timeout  seconds,  the current email count will be returned.
           $timeout_seconds defaults to 30.

       "my @email = $pop-&gt;get_email();"
           Get   all   of   the   email   messages   currently    in    local    cache.    You    should    call
           "$pop3-&gt;wait_for_email_count($count)"  before  calling  this  method  if  you think that there may be
           messages on the server yet to be retrieved.  Calling this method will cause the  local  cache  to  be
           emptied. Email messages returned will be Test::Email objects.

       "my $count = $pop-&gt;get_email_count($check_server);"
           This will return the number of email messages in the cache. If $check_server is true, then the server
           will  be  checked  once  before  the  count is determined.  If you would like to wait for messages to
           arrive on the server, and then be downloaded prior to counting, use "$pop3-&gt;wait_for_email_count()".

       "my $ok = $pop-&gt;ok($test_href, $description);"
           Calling this method will cause the email in the local cache to be tested, according to  the  contents
           of  $test_href.  The  first  email which passes all tests will be deleted from the local cache. Since
           this method only checks the local cache, you will want to call "$pop3-&gt;wait_for_email_count()" before
           calling  this  method.  "ok"  will  produce  TAP  output,   identical   to   "Test::Simple::ok"   and
           "Test::More::ok".

       "my $parser = $pop-&gt;get_parser();"
           Test::POP3  uses  MIME::Parser to process the messages. (MIME is not yet handled by "Test::Email", it
           will be soon.) Use this method if you want to manage the parser.

</pre><h4><b>EXPORT</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Test::Builder, Test::Simple, Test::More, MIME::Parser

</pre><h4><b>AUTHOR</b></h4><pre>
       James Tolley, &lt;<a href="mailto:james@cpan.org">james@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2007 by James Tolley

       This library is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself, either Perl version 5.8.8 or, at your option, any later version of Perl 5 you may have available.

perl v5.34.0                                       2022-06-17                                    <u>Test::<a href="../man3pm/POP3.3pm.html">POP3</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>