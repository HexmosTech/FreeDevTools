<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::DatabaseRow::Object - examine database rows</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-databaserow-perl">libtest-databaserow-perl_2.04-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::DatabaseRow::Object - examine database rows

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Test::More tests =&gt; 1;
         use Test::DatabaseRow::Object;

         # setup the test
         my $tdr = Test::DatabaseRow::Object-&gt;new(
           sql_and_bind =&gt; "SELECT * FROM contacts WHERE cid = '123'",
           tests        =&gt; [ name =&gt; "trelane" ],
         );

         # do the test and get a result back
         my $result_object = $tdr-&gt;tests_ok();

         # have those results render to Test::Builder
         $result_object-&gt;pass_to_test_builder("my database test");

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides the underlying functionality of "Test::DatabaseRow".

   <b>Accessors</b>
       These are the read only accessors of the object.  They may be (optionally) set at object creation time by
       passing their name and value to the constructor.

       Each accessor may be queried by prefixing its name with the "has_" to determine if it has been set or
       not.

       db_results
           An arrayref of hashrefs, each representing a row returned from the database.  Each key in the hashref
           should  be  the  column  name  and  the value the corresponding field's value.  This datastructure is
           identical to that.

           If this accessor is not passed then it will be populated on first use by executing  the  contents  of
           "sql_and_bind" against the passed "dbh".

       db_results_dumped
           A string representation of the database results.

           If  this  accessor  is  not  passed  then  it will be populated on first use by using Test::Builder's
           explain function on "db_results"

       sql_and_bind
           The SQL and bind variables to execute if no results were  passed  into  the  db_results  hash.   This
           should be an arrayref containing the SQL as the first element and the bind values as further values.

           This accessor will automatically coerce a simple scalar passed in into a single

           If  this  accessor  is  not  passed  then  it will be populated on first use by building SQL from the
           "where" and "table" accessors.

       dbh The database handle used to execute the SQL statement  in  "sql_and_bind"  if  no  "db_results"  were
           passed.

       table
           The table name used to build the SQL query if no value is passed to "sql_and_bind".  String.

       where
           The  data  structure  used  to  build  the  where  clause  of  the SQL query if no value is passed to
           &lt;sql_and_bind&gt;.

           This accessor value should be a hashref of hashrefs, with the outer keys  being  the  SQL  comparison
           operator,  the  inner  keys  being  the  field  names  and the inner values being the values to match
           against. For example:

             {
               '='    =&gt; { first =&gt; "Fred", last =&gt; "Flintstone", },
               'like' =&gt; { address =&gt; "%Bedrock%" },
             }

           Values of "undef" will automatically converted into checks for NULLs.

           This accessor automatically coerces array refs that are passed  into  a  pure  equals  hashref.   For
           example:

             [ foo =&gt; "bar", bazz =&gt; "buzz" ]

           Will be coerced into:

             { "=" =&gt; { foo =&gt; "bar", bazz =&gt; "buzz" } }

           See "where" in Test::DatabaseRow for a more detailed explanation.

       verbose
           Truth  value,  default false.  Controls if the diagnostic messages printed during "row_ok" on failure
           contain details of the SQL executed or not.

       verbose_data
           Truth value, default false.  Controls if the diagnostic messages printed during "row_ok"  on  failure
           contain a Data::Dumper style dump of the resulting rows from the database.

       force_utf8
           Truth  value,  default  false.  Controls if the utf8 flag should be turned on on values returned from
           the database.  See "utf8 hacks" in Test::DatabaseRow for why this might be important.

           This flag only effects data that this module places into "db_resutls".  If you manually populate this
           accessor this flag will have no effect.

       tests
           If set, enables specified tests on the first element of "db_results" when "row_ok" is called.

           This accessor value should be a hashref of hashrefs, with the outer keys being  the  Perl  comparison
           operator, the inner keys being the field names and the inner values being the values to test against.
           For example:

             {
               'eq' =&gt; { first =&gt; "Fred", last =&gt; "Flintstone", },
               '=~' =&gt; { address =&gt; "%Bedrock%" },
             }

           This  accessor  automatically coerces array refs that are passed into a hashref structure, converting
           things that look like strings into "eq" tests, things that look like  numbers  into  "=="  tests  and
           things that are references to regular expressions into "=~" tests.  Foe example:

             [ num =&gt; 123, letters =&gt; "abc", kinda =&gt; qr/substring/ ]

           Will be coerced into

             {
               '==' =&gt; { num =&gt; 123, },
               'eq' =&gt; { letters =&gt; "abc", },
               '=~' =&gt; { kinda =&gt; qr/substring/ },
             }

           See "tests" in Test::DatabaseRow for a more detailed explanation.

       check_all_rows
           Boolean  to determine if we should test all rows (during "db_results_ok" and "test_ok") or just check
           the first row.  Default true.

       results
           If set, enable tests to check the number of rows we returned by "db_results" is  exactly  this  value
           when "row_ok" is called.  Integer.

       max_results
           If  set,  enable  tests to check the number of rows we returned by "db_results" is at most this value
           when "row_ok" is called.  Integer.

       min_results
           If set, enable tests to check the number of rows we returned by "db_results" is at least  this  value
           when "row_ok" is called.  Integer.

   <b>Methods</b>
       new(...)
           Simple constructor.  Passing arguments to the constructor sets the values of the accessors.

       number_of_results_ok
           Returns  a  Test::DatabaseRow::Result  that represents if the number of results in "db_results" match
           the requirements for the number of results.

       row_at_index_ok( $row_index )
           Returns a Test::DatabaseRow::Result that represents if the element corresponding to  the  passed  row
           index in "db_results" match the tests defined in "tests".

       db_results_ok
           Returns  a  Test::DatabaseRow::Result that represents if all elements in "db_results" match the tests
           defined in "tests".

       test_ok
           Returns a Test::DatabaseRow::Result that represents if the number of results  in  "db_results"  match
           the  requirements for the number of results and  all elements in "db_results" match the tests defined
           in "tests".

</pre><h4><b>BUGS</b></h4><pre>
       Bugs   (and   requests   for   new   features)   can   be   reported   though   the   CPAN   RT   system:
       &lt;<a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=Test-DatabaseRow&gt;

       Alternatively,  you  can  simply  fork  this  project  on  github  and send me pull requests.  Please see
       &lt;<a href="http://github.com/2shortplanks/Test-DatabaseRow">http://github.com/2shortplanks/Test-DatabaseRow</a>&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Mark Fowler <b><a href="mailto:mark@twoshortplanks.com">mark@twoshortplanks.com</a></b>

       Copyright Profero 2003, 2004.  Copyright Mark Fowler 2011.

       Some code taken from <b>Test::Builder</b>, written by Michael Schwern.  Some  code  taken  from  <b>Regexp::Common</b>,
       written by Damian Conway.  Neither objected to its inclusion in this module.

       Some code taken from <b>Lingua::EN::Numbers::Ordinate</b>, written by Sean M. Burke.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Test::DatabaseRow::Object, Test::DatabaseRow::Result, Test::More, DBI

perl v5.34.0                                       2022-06-17                     <u>Test::DatabaseRow::<a href="../man3pm/Object.3pm.html">Object</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>