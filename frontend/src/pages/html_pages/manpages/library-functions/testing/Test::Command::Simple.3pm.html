<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::Command::Simple - Test external commands (nearly) as easily as loaded modules.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-command-simple-perl">libtest-command-simple-perl_0.05-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::Command::Simple - Test external commands (nearly) as easily as loaded modules.

</pre><h4><b>VERSION</b></h4><pre>
       Version 0.05

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Test::Command::Simple;

           run('echo', 'has this output'); # only tests that the command can be started, not checking rc
           is(rc,0,'Returned successfully')
           like(stdout,qr/has this output/,'Testing stdout');
           is(length stderr, 0,'No stderr');

</pre><h4><b>PURPOSE</b></h4><pre>
       This test module is intended to simplify testing of external commands.  It does so by running the command
       under IPC::Open3, closing the stdin immediately, and reading everything from the command's stdout and
       stderr.  It then makes the output available to be tested.

       It is not (yet?) as feature-rich as Test::Cmd, but I think the interface to this is much simpler.  Tests
       also plug directly into the Test::Builder framework, which plays nice with Test::More.

       As compared to Test::Command, this module is simpler, relying on the user to feed rc, stdout, and stderr
       to the appropriate other tests, presumably in Test::More, but not necessarily.  This makes it possible,
       for example, to test line 3 of the output:

           my (undef, undef, $line) = split /\r?\n/, stdout;
           is($line, 'This is the third line', 'Test the third line');

       While this is possible to do with Test::Command's stdout_like, some regex's can get very awkward, and it
       becomes better to do this in multiple steps.

       Also, Test::Command saves stdout and stderr to files.  That has an advantage when you're saving a lot of
       text.  However, this module prefers to slurp everything in using IPC::Open3, IO::Select, and sysread.
       Most of the time, commands being tested do not produce significant amounts of output, so there becomes no
       reason to use temporary files and involve the disk at all.

</pre><h4><b>EXPORTS</b></h4><pre>
   <b>run</b>
       Runs the given command.  It will return when the command is done.

       This will also reinitialise all of the states for stdout, stderr, and rc.  If you need to keep the values
       of a previous <b>run()</b> after a later one, you will need to store it.  This should be mostly pretty rare.

       Counts as one test: whether the IPC::Open3 call to open3 succeeded.  That is not returned in a meaningful
       way to the user, though.  To check if that's the case for purposes of SKIPping, rc will be set to -1.

   <b>stdout</b>
       Returns the last run's stdout

   <b>stderr</b>
       Returns the last run's stderr

   <b>rc</b>
       Returns the last run's full $?, suitable for passing to POSIX's :sys_wait_h macros (WIFEXITED,
       WEXITSTATUS, etc.)

   <b>exit_status</b>
       Returns the exit status of the last run

   <b>run_ok</b>
       Shortcut for checking that the return from a command is 0.  Will still set stdout and stderr for further
       testing.

       If the first parameter is an integer 0-255, then that is the expected return code instead.  Remember: $?
       has both a return code (0-255) and a reason for exit embedded.  This function must make the assumption
       that you want a "normal" exit only.  If any signal is given, this will treat that as a failure.

       Note that this becomes <b>three</b> tests: one that IPC::Open3 could create the subprocess with the command, the
       next is the test that the process exited normally, and the last is the test of the rc.

</pre><h4><b>AUTHOR</b></h4><pre>
       Darin McBride, "&lt;dmcbride at cpan.org&gt;"

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs or feature requests to "bug-test-command at rt.cpan.org", or through the web
       interface at &lt;<a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=Test-Command-Simple&gt;.  I will be notified,
       and then you'll automatically be notified of progress on your bug as I make changes.

</pre><h4><b>SUPPORT</b></h4><pre>
       You can find documentation for this module with the perldoc command.

           perldoc Test::Command::Simple

       You can also look for information at:

       •   RT: CPAN's request tracker

           &lt;<a href="http://rt.cpan.org/NoAuth/Bugs.html">http://rt.cpan.org/NoAuth/Bugs.html</a>?Dist=Test-Command-Simple&gt;

       •   AnnoCPAN: Annotated CPAN documentation

           &lt;<a href="http://annocpan.org/dist/Test-Command-Simple">http://annocpan.org/dist/Test-Command-Simple</a>&gt;

       •   CPAN Ratings

           &lt;<a href="http://cpanratings.perl.org/d/Test-Command-Simple">http://cpanratings.perl.org/d/Test-Command-Simple</a>&gt;

       •   Search CPAN

           &lt;<a href="http://search.cpan.org/dist/Test-Command-Simple/">http://search.cpan.org/dist/Test-Command-Simple/</a>&gt;

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright 2010 Darin McBride.

       This  program  is  free software; you can redistribute it and/or modify it under the terms of either: the
       GNU General Public License as published by the Free Software Foundation; or the Artistic License.

       See <a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a> for more information.

perl v5.36.0                                       2022-10-13                         <u>Test::Command::<a href="../man3pm/Simple.3pm.html">Simple</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>