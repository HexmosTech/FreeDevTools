<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::Expander - Expansion of test functionalities that appear to be frequently used while testing.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-expander-perl">libtest-expander-perl_2.5.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::Expander - Expansion of test functionalities that appear to be frequently used while testing.

</pre><h4><b>SYNOPSIS</b></h4><pre>
         # Tries to automatically determine, which class / module and method / subroutine are to be tested,
         # creates neither a temporary directory, nor a temporary file:
         use Test::Expander;

         # Tries to automatically determine, which class / module and method / subroutine are to be tested.
         # The determined (and hence exported) values are displayed in green,
         # the undetermined (and hence unexported) ones in red:
         use Test::Expander -color =&gt; { exported =&gt; 'green', unexported =&gt; 'red' };

         # Tries to automatically determine, which class / module and method / subroutine are to be tested.
         # Both determined and undetermined values are displayed uncolorized:
         use Test::Expander -color =&gt; { exported =&gt; undef, unexported =&gt; undef };

         # Tries to automatically determine, which class / module and method / subroutine are to be tested,
         # creates both a temporary directory and a temporary file preventing their removal after execution:
         use Test::Expander -tempdir =&gt; { CLEANUP =&gt; 0 }, -tempfile =&gt; { UNLINK =&gt; 0 };

         # Tries to automatically determine, which class / module and method / subroutine are to be tested,
         # creates neither a temporary directory, nor a temporary file,
         # passes the option '-srand' to Test2::V0 changing the random seed to the current time in seconds:
         use Test::Expander -srand =&gt; time;

         # Class is supplied explicitly, tries to automatically determine method / subroutine to be tested,
         # creates a temporary directory with name corresponing to the template supplied, does not create temporary file:
         use Test::Expander -target =&gt; 'My::Class', -tempdir =&gt; { TEMPLATE =&gt; 'my_dir.XXXXXXXX' };

         # Does not try to determine, which class / module and method / subroutine are to be tested,
         # creates neither a temporary directory, nor a temporary file:
         use Test::Expander -target =&gt; undef;

         # Tries to automatically determine, which class / module is to be tested,
         # does not determine method / subroutine to be tested,
         # creates neither a temporary directory, nor a temporary file:
         use Test::Expander -method =&gt; undef;

         # Tries to automatically determine, which class / module is to be tested,
         # does not create temporary file, creates a temporary directory and
         # adds directories 'dir0' and 'dir1' located therein on top of the directory list used by the Perl interpreter
         # for search of modules to be loaded. In other words, "unshifts" these directories to the @INC array:
         # PLEASE CONSIDER THE SINGLE QUOTES APPLIED BELOW!
         use Test::Expander
           -lib =&gt; [
             'path( $TEMP_DIR )-&gt;child( qw( dir0 ) )-&gt;stringify',
             'path( $TEMP_DIR )-&gt;child( qw( dir1 ) )-&gt;stringify',
           ],
           -tempdir =&gt; {};

         # Override the builtin 'close' in the name space of explicitly supplied class / module to be tested:
         my $close_success;
         use Test::Expander
           -builtins =&gt; { close =&gt; sub { $close_success ? CORE::close( shift ) : 0 } },
           -target   =&gt; 'My::Class';

         # Activates immediate stop of test execution if any assertion fails:
         use Test::Expander -bail =&gt; 1;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The primary objective of <b>Test::Expander</b> is to provide additional convenience while testing based on
       Test2::V0 &lt;https://metacpan.org/pod/Test2::V0&gt; considering boilerplate aspects that seem to be important
       (to the author) in notable number of cases.  These are among other things:

       • Repeated  application  of class / module and / or method / function to be tested.  This, of course, can
         be stored in additional variables declared somewhere at the very beginning of test.

         Doing so, any refactoring including renaming of this class and / or method leads to  the  necessity  to
         find and then to update all test files containing these names.

         If,  however,  both  of  these values can be determined from the path and base name of the current test
         file and saved in the exported read-only variables <b>$CLASS</b> and <b>$METHOD</b>, the  only  effort  necessary  in
         case of such renaming is a single change of path and / or base name of the corresponding test file.

         An additional benefit of suggested approach is a better readability of tests, where chunks like

           Foo::Bar-&gt;baz( $arg0, $arg1 )

         now look like

           $CLASS-&gt;$METHOD( $arg0, $arg1 )

         and hence clearly manifest that this chunk is about the testee.

       • The  frequent necessity of introduction of temporary directory and / or temporary file usually leads to
         the  usage  of  modules   File::Temp::tempdir   &lt;https://metacpan.org/pod/File::Temp&gt;   or   Path::Tiny
         &lt;https://metacpan.org/pod/Path::Tiny&gt; providing the methods / funtions <b>tempdir</b> and <b>tempfile</b>.

         This,  however,  can  significantly be simplified (and the size of test file can be reduced) requesting
         such introduction via the options supported by <b>Test::Expander</b>:

           use Test::Expander -tempdir =&gt; {}, -tempfile =&gt; {};

       • Another fuctionality frequently used in tests relates to the work with files and directories:  reading,
         writing,  creation,  etc. Because almost all features required in such cases are provided by Path::Tiny
         &lt;https://metacpan.org/pod/Path::Tiny&gt;,  some  functions  of  this  module  are   also   exported   from
         <b>Test::Expander</b>.

       • To  provide a really environment-independent testing, we might need a possibility to run our tests in a
         clean environment, where only explicitly  mentioned  environment  variables  are  set  and  environment
         variables  from  the  "outside  world" cannot affect the execution of tests.  This can also be achieved
         manually by manipulation of <b>%ENV</b> hash at the very beginning of tests.  However, even ignoring the  test
         code  inflation,  this  might  be  (in fact - is) necessary in many tests belonging to one and the same
         module,  so  that  a  possibility  to  outsource  the  definition  of  test  environment  provided   by
         <b>Test::Expander</b> makes tests smaller, more maintainable, and much more reliable.

       • I     stole     the     idea     of     subtest    selection    from    Test::Builder::SubtestSelection
         &lt;https://metacpan.org/pod/Test::Builder::SubtestSelection&gt;.  That's why the subtest selection supported
         by   <b>Test::Expander</b>    is    partially    compatible    with    the    implementation    provided    by
         Test::Builder::SubtestSelection  &lt;https://metacpan.org/pod/Test::Builder::SubtestSelection&gt;.   The term
         "partially" means that the option "--subtest" can only be applied to selection by name not by number.

         In general the subtest selection allows the execution of required subtests identified  by  their  names
         and    /    or    by    their    numbers    before   test   running.    At   the   command-line   prove
         &lt;https://metacpan.org/pod/prove&gt; runs your test script and the subtest selection is based on the values
         given to the options "--subtest_name"  (alias  "--subtest"  -  in  the  Test::Builder::SubtestSelection
         &lt;https://metacpan.org/pod/Test::Builder::SubtestSelection&gt;  style) and "--subtest_number". Both options
         can be applied repeatedly and mixed together so that some tests can be selected by names and other ones
         by numbers.

         In both cases the options have to be supplied as arguments to the test script.  To do so  separate  the
         arguments from prove's own arguments with the arisdottle ("::").

       • Another idea inspired by other module namely by Test::Most &lt;https://metacpan.org/pod/Test::Most&gt; is the
         idea of immediate stop of test file execution if one of the tests fails.

         This feature can be applied both for the whole test file using the <b>-bail</b> option

           use Test::Expander -bail =&gt; 1;

         and  for  a  part of it using the functions <b>bail_on_failure</b> and <b>restore_failure_handler</b> to activate and
         deactivate this reaction, correspondingly.

         Selection by name
           The selection by name means that the value supplied along with "--subtest_name"  option  is  compared
           with  all subtest names in your test and only those, which names match this value in terms of regular
           expression, will be executed.  If this value cannot be treated as a valid  regular  expression,  meta
           characters therein are properly quoted so that the RegEx match is in any case possible.

           Assuming the test script <b>t/my_test.t</b> contains

             use strict;
             use warnings;

             use Test::Expander;

             plan( 3 );

             subtest 'my higher level subtest without RegEx meta characters in name' =&gt; sub {
               # some test function calls
             };

             subtest 'my next higher level subtest' =&gt; sub {
               subtest 'my embedded subtest' =&gt; sub {
                 subtest 'my deepest subtest' =&gt; sub {
                   # some test function calls
                 };
                 # some test function calls
               };
               # some test function calls
             };

             # some test function calls

             subtest 'my subtest with [' =&gt; sub {
               # some test function calls
             };

           Then,  if  the  subtest  <b>my</b>  <b>next</b>  <b>higher</b> <b>level</b> <b>subtest</b> with all embedded subtests and the subtest <b>my</b>
           <b>subtest</b> <b>with</b> <b>[</b> should be executed, the corresponding prove &lt;https://metacpan.org/pod/prove&gt; call  can
           look like one of the following variants:

             prove -v -b t/basic.t :: --subtest_name 'next|embedded|deepest' --subtest_name '['
             prove -v -b t/basic.t :: --subtest_name 'next' --subtest_name 'embedded' --subtest_name 'deepest' --subtest_name '['

           This  kind  of  subtest  selection is pretty convenient but has a significant restriction: you cannot
           select an embedded subtest without its higher-level subtests.  I.e. if  you  would  try  to  run  the
           following command

             prove -v -b t/basic.t :: --subtest_name 'deepest' --subtest_name '['

           the  subtest  <b>my</b>  <b>next</b>  <b>higher</b> <b>level</b> <b>subtest</b> including all embedded subtests will be skipped, so that
           even the subtest <b>my</b> <b>deepest</b> <b>subtest</b> will not be executed although this was your goal.

           This restriction, however, can be avoided using the subtest selection by number.

         Selection by number
           The selection by number means that the value supplied along with  "--subtest_number"  option  is  the
           sequence  of numbers representing required subtest in the test file.  Let's add to the source code of
           <b>t/my_test.t</b> some comments illustrating the numbers of each subtest:

             use strict;
             use warnings;

             use Test::Expander;

             plan( 3 );

             subtest 'my higher level subtest without RegEx meta characters in name' =&gt; sub { # subtest No. 0
               # some test function calls
             };

             subtest 'my next higher level subtest' =&gt; sub { # subtest No. 1
               subtest 'my embedded subtest' =&gt; sub {        # subtest No. 0 in subtest No. 1
                 subtest 'my deepest subtest' =&gt; sub {       # subtest No. 0 in subtest No. 0 in subtest No. 1
                   # some test function calls
                 };
                 # some test function calls
               };
               # some test function calls
             };

             # some test function calls

             subtest 'my subtest with [' =&gt; sub { # subtest No. 2
               # some test function calls
             };

           Taking this into consideration we can combine subtest numbers starting from  the  highest  level  and
           separate  single  levels  by  the  slash  sign  to  get the unique number of any subtest we intend to
           execute.  Doing so, if we only want to execute the subtests <b>my</b> <b>deepest</b> <b>subtest</b> (its number is  <b>1/0/0</b>)
           and <b>my</b> <b>subtest</b> <b>with</b> <b>[</b> (its number is <b>2</b>), this can easily be done with the following command:

             prove -v -b t/basic.t :: --subtest_number '1/0/0' --subtest_number '2'

       <b>Test::Expander</b>      combines      all      advanced      possibilities      provided     by     Test2::V0
       &lt;https://metacpan.org/pod/Test2::V0&gt; with some specific functions only  available  in  the  older  module
       Test::More  &lt;https://metacpan.org/pod/Test::More&gt;  (which  allows  a  smooth  migration  from  Test::More
       &lt;https://metacpan.org/pod/Test::More&gt;-based tests to Test2::V0 &lt;https://metacpan.org/pod/Test2::V0&gt;-based
       ones) and handy functions from some other modules often used in test suites.

       Furthermore, this module allows to automatically recognize the class / module to be tested (see  variable
       <b>$CLASS</b>  below)  so  that in contrast to Test2::V0 &lt;https://metacpan.org/pod/Test2::V0&gt; you do not need to
       specify this explicitly if the path to the test file is in accordance with the name of class / module  to
       be tested i.e. file <b>t/Foo/Bar/baz.t</b> corresponds to class / module <b>Foo::Bar</b>.

       If  such  automated recognition is not intended, this can be deactivated by explicitly supplied undefined
       class / module name along with the option "-target".

       A similar recognition is provided in regard to the method  /  subroutine  to  be  tested  (see  variables
       <b>$METHOD</b>  and  <b>$METHOD_REF</b>  below) if the base name (without extension) of test file is identical with the
       name of  this  method  /  subroutine  i.e.  file  <b>t/Foo/Bar/baz.t</b>  corresponds  to  method  /  subroutine
       <b>Foo::Bar::bar</b>.

       Finally, a configurable setting of specific environment variables is provided so that there is no need to
       hard-code this in the test itself.

       The following options are accepted:

       • Options specific for this module only are always expected to have values and their meaning is:

         • <b>-bail</b>  -  activates  immediate  stop of test file execution if any test case in this file fails.  The
           expected value is boolean. Defaults to <b>false</b> i.e. the execution continues even if tests fail.

           Even if activated, this behaviour can be deactivated at any point in the test file using the function
           <b>restore_failure_handler</b>.

         • <b>-builtins</b> - overrides builtins in the name space of class / module to be tested.  The expected  value
           is  a  hash  reference,  where  keys  are  the  names  of builtins and the values are code references
           overriding default behavior.

         • <b>-color</b> - controls colorization of read-only variables <b>$CLASS</b>, <b>$METHOD</b>, and <b>$METHOD_REF</b>  in  the  test
           notification  header.   The  expected value is a hash reference, the only supported keys are <b>exported</b>
           and <b>unexported</b>:

           <b>exported</b>
             Contains either a string describing the foreground color, in which these variables are displayed if
             they are being exported, or <b>undef</b> in no colorization is required in such case.

             Defaults to <b>'cyan'</b>.

           <b>unexported</b>
             The same as above, but for the case if these variables remains undefined and unexported.

             Defaults to <b>'magenta'</b>.

         • <b>-lib</b> - prepends directory list used by the Perl interpreter for search of modules to be loaded  (i.e.
           the  <b>@INC</b>  array)  with  values  supplied  in form of array reference.  Each element of this array is
           evaluated using string eval &lt;https://perldoc.perl.org/functions/eval&gt; so that  any  valid  expression
           evaluated  to  string  is  supported  if  it is based on modules used by <b>Test::Expander</b> or any module
           loaded before.

           Among other things this provides a  possibility  to  temporary  expand  the  module  search  path  by
           directories located in the temporary directory if the latter is defined with the option <b>-tempdir</b> (see
           below).

           <b>-lib</b>  is  interpreted as the very last option, that's why the variables defined by <b>Test::Expander</b> for
           export e.g. <b>$TEMP_DIR</b> can be used in the  expressions  determining  such  directories  (see  <b>SYNOPSYS</b>
           above).

         • <b>-method</b>  -  prevents any attempt to automatically determine method / subroutine to be tested.  If the
           value supplied along with this option is defined and found in the class /  module  to  be  test  (see
           <b>-target</b>  below),  this  will be considered such method / subroutine so that the variables <b>$METHOD</b> and
           <b>$METHOD_REF</b> (see description of exported variables below) will be imported and  accessible  in  test.
           If this value is <b>undef</b>, these variables are not imported.

         • <b>-target</b>  -  identical to the same-named option of Test2::V0 &lt;https://metacpan.org/pod/Test2::V0&gt; and,
           if contains a defined value, has the same purpose namely the  explicit  definition  of  the  class  /
           module  to  be  tested  as  the value.  However, if its value is <b>undef</b>, this is not passed through to
           Test2::V0 &lt;https://metacpan.org/pod/Test2::V0&gt; so that no class /  module  will  be  loaded  and  the
           variable <b>$CLASS</b> will not be imported at all.

         • <b>-tempdir</b>  -  activates  creation  of a temporary directory. The value has to be a hash reference with
           content as explained in File::Temp::tempdir &lt;https://metacpan.org/pod/File::Temp&gt;.  This  means,  you
           can  control the creation of temporary directory by passing of necessary parameters in form of a hash
           reference or, if the default behavior is required, simply pass the empty hash reference as the option
           value.

         • <b>-tempfile</b> - activates creation of a temporary file. The value has to be a hash reference with content
           as explained in  File::Temp::tempfile  &lt;https://metacpan.org/pod/File::Temp&gt;.  This  means,  you  can
           control the creation of temporary file by passing of necessary parameters in form of a hash reference
           or, if the default behavior is required, simply pass the empty hash reference as the option value.

       • All  other  valid  options  (i.e.  arguments  starting with the dash sign <b>-</b>) are forwarded to Test2::V0
         &lt;https://metacpan.org/pod/Test2::V0&gt; along with their values.

         Options without values are not supported; in case of their passing an exception is raised.

       • If an argument cannot be recognized as an option, an exception is raised.

       The automated recognition of name of class / module to be tested can  only  work  if  the  test  file  is
       located  in  the  corresponding  subdirectory.   For  instance,  if  the  class  / module to be tested is
       <u>Foo::Bar::Baz</u>, then the folder with test files related to this class / module should be <b>t/</b><u>Foo</u><b>/</b><u>Bar</u><b>/</b><u>Baz</u>  or
       <b>xt/</b><u>Foo</u><b>/</b><u>Bar</u><b>/</b><u>Baz</u>  (the  name of the top-level directory in this relative name - <b>t</b>, or <b>xt</b>, or <b>my_test</b> is not
       important) - otherwise the module name cannot be put into the exported variable <b>$CLASS</b> and, if  you  want
       to use this variable, should be supplied as the value of <b>-target</b>:

         use Test::Expander -target =&gt; 'Foo::Bar::Baz';

       This  recognition  can  explicitly  be  deactivated  if the value of <b>-target</b> is <b>undef</b>, so that no class /
       module will be loaded and, correspondingly, the variables <b>$CLASS</b>, <b>$METHOD</b>, and <b>$METHOD_REF</b>  will  not  be
       exported.

       Furthermore,  the automated recognition of the name of the method / subroutine to be tested only works if
       the file containing the class / module mentioned above exists and if this class / module has the method /
       subroutine with the same name as the test file base name without the extension.  If this is the case, the
       exported variables <b>$METHOD</b> and <b>$METHOD_REF</b> contain the name of method / subroutine to be tested  and  its
       reference, correspondingly, otherwise both variables are neither evaluated nor exported.

       Also  in  this  case  evaluation  and export of the variables <b>$METHOD</b> and <b>$METHOD_REF</b> can be prevented by
       passing of <b>undef</b> as value of the option <b>-method</b>:

         use Test::Expander -target =&gt; undef;

       Finally, <b>Test::Expander</b> supports testing inside of a  clean  environment  containing  only  some  clearly
       specified  environment variables required for the particular test.  Names and values of these environment
       variables should be configured in files, which names are identical with paths to single  class  /  module
       levels  or  the method / subroutine to be tested, and the extension is always <b>.env</b>.  For instance, if the
       test file name is <b>t/Foo/Bar/Baz/myMethod.t</b>, the following approach is applied:

       • if the file <b>t/Foo.env</b> exists, its content is used for the initialization of the test environment,

       • if the file <b>t/Foo/Bar.env</b> exists, its content is used either to extend the test environment initialized
         in the previous step or for its initialization if <b>t/Foo.env</b> does not exist,

       • if the file <b>t/Foo/Bar/Baz.env</b> exists, its content  is  used  either  to  extend  the  test  environment
         initialized  in  one  of  the  previous  steps  or  for  its  initialization  if  neither <b>t/Foo.env</b> nor
         <b>t/Foo/Bar.env</b> exist,

       • if the file  <b>t/Foo/Bar/Baz/myMethod.env</b>  exists,  its  content  is  used  either  to  extend  the  test
         environment  initialized  in  one of the previous steps or for its initialization if none of <b>.env</b> files
         mentioned above exist.

       If the <b>.env</b> files existing on different  levels  have  identical  names  of  environment  variables,  the
       priority   is   the   higher   the   later   they   have   been   detected.    I.e.  <b>VAR</b>  <b>=</b>  <b>'VALUE0'</b>  in
       <b>t/Foo/Bar/Baz/myMethod.env</b> overwrites <b>VAR</b> <b>=</b> <b>'VALUE1'</b> in <b>t/Foo/Bar/Baz.env</b>.

       If none of these <b>.env</b> files exist, the environment isn't changed by <b>Test::Expander</b> during  the  execution
       of <b>t/Foo/Bar/Baz/myMethod.t</b>.

       An  environment  configuration file (<b>.env</b> file) is a line-based text file.  Its content is interpreted as
       follows:

       • if such files don't exist, the <b>%ENV</b> hash remains unchanged;

       • otherwise, if at least one of such files exists, those elements of the <b>%ENV</b> hash are kept, which  names
         are equal to names found in lines of <b>.env</b> file without values.  All remaining elements of the <b>%ENV</b> hash
         gets emptied (without localization) and

         • lines not matching the RegEx <b>/^\w+\s*(?:=\s*\S|$)?/</b> (some alphanumeric characters representing a name
           of  environment  variable,  optional  blanks,  optionally  followed by the equal sign, again optional
           blanks, and at least one non-blank character representing the first character of environment variable
           value) are skipped;

         • in all other lines the value of the environment variable  is  everything  from  the  first  non-blank
           character  after  the  equal  sign until end of the line; if this value is omitted, the corresponding
           environment variable remains unchanged as it originally was in the <b>%ENV</b> hash (if it existed there, of
           course);

         • the cascading definition of environment variables can be used, which means that

           • during the evaluation of current line environment variables defined in the same file above  can  be
             applied.  For example if such <b>.env</b> file contains

               VAR1 = 'ABC'
               VAR2 = lc( $ENV{ VAR1 } )

             and neither <b>VAR1</b> nor <b>VAR2</b> will be overwritten during the evaluation of subsequent lines in the same
             or other <b>.env</b> files, the <b>%ENV</b> hash will contain at least the following entries:

               VAR1 =&gt; 'ABC'
               VAR2 =&gt; 'abc'

           • during  the  evaluation  of  current line also environment variables defined in a higher-level <b>.env</b>
             file can be used.  For example if <b>t/Foo/Bar/Baz.env</b> contains

               VAR0 = 'XYZ '

             and <b>t/Foo/Bar/Baz/myMethod.env</b> contains

               VAR1 = 'ABC'
               VAR2 = lc( $ENV{ VAR0 } . $ENV{ VAR1 } )

             and neither <b>VAR0</b>, nor <b>VAR1</b>, nor <b>VAR2</b> will be overwritten during the evaluation of subsequent  lines
             in the same or other <b>.env</b> files, the <b>%ENV</b> hash will contain at least the following entries:

               VAR0 =&gt; 'XYZ '
               VAR1 =&gt; 'ABC'
               VAR2 =&gt; 'xyz abc'

         • the   value   of   the   environment   variable  (if  provided)  is  evaluated  by  the  string  eval
           &lt;https://perldoc.perl.org/functions/eval&gt; so that

           • constant values must be quoted;

           • variables and subroutines must not be quoted:

               NAME_CONST = 'VALUE'
               NAME_VAR   = $KNIB::App::MyApp::Constants::ABC
               NAME_FUNC  = join(' ', $KNIB::App::MyApp::Constants::DEF)

       All   environment   variables   set   up   in   this   manner   are   logged   to   STDOUT   using   note
       &lt;https://metacpan.org/pod/Test2::Tools::Basic#DIAGNOSTICS&gt;.

       Another  common  feature  within  test  suites is the creation of a temporary directory / file used as an
       isolated container for some testing actions.   The  module  options  <b>-tempdir</b>  and  <b>-tempfile</b>  are  fully
       syntactically   compatible  with  File::Temp::tempdir  &lt;https://metacpan.org/pod/File::Temp#FUNCTIONS&gt;  /
       File::Temp::tempfile &lt;https://metacpan.org/pod/File::Temp#FUNCTIONS&gt;. They make sure that such  temporary
       directory  /  file  are created after <b>use</b> <b>Test::Expander</b> and that their names are stored in the variables
       <b>$TEMP_DIR</b> / <b>$TEMP_FILE</b>, correspondingly.  Both temporary directory and file are removed by default  after
       execution.

       The following functions provided by this module are exported by default:

       • all functions exported by default from Test2::V0 &lt;https://metacpan.org/pod/Test2::V0&gt;,

       • all         functions        exported        by        default        from        Test2::Tools::Explain
         &lt;https://metacpan.org/pod/Test2::Tools::Explain&gt;,

       • some functions exported by default from Test::More &lt;https://metacpan.org/pod/Test::More&gt; and often used
         in older tests but not supported by Test2::V0 &lt;https://metacpan.org/pod/Test2::V0&gt;:

         • BAIL_OUT,

         • is_deeply,

         • new_ok,

         • require_ok,

         • use_ok.

       • some functions exported by default from Test::Exception &lt;https://metacpan.org/pod/Test::Exception&gt;  and
         often used in older tests but not supported by Test2::V0 &lt;https://metacpan.org/pod/Test2::V0&gt;:

         • dies_ok,

         • lives_ok,

         • throws_ok.

         some        functions        exported        by        default        from        Test2::Tools::Explain
         &lt;https://metacpan.org/pod/Test2::Tools::Explain&gt; and often used in older tests  but  not  supported  by
         Test2::Tools::Explain &lt;https://metacpan.org/pod/Test2::Tools::Explain&gt;:

         • explain.

       • function exported by default from Const::Fast &lt;https://metacpan.org/pod/Const::Fast&gt;:

         • const.

       • some functions exported by request from File::Temp &lt;https://metacpan.org/pod/File::Temp&gt;:

         • tempdir,

         • tempfile,

       • some functions exported by request from Path::Tiny &lt;https://metacpan.org/pod/Path::Tiny&gt;:

         • cwd,

         • path,

       The following variables can be set and exported:

       • variable  <b>$CLASS</b>  containing  the  name  of  the  class  /  module  to  be tested if the class / module
         recognition is not disable and possible,

       • variable <b>$METHOD</b> containing the name of the method / subroutine to be tested if the method / subroutine
         recognition is not disable and possible,

       • variable <b>$METHOD_REF</b> containing the reference to the subroutine to be tested if the method / subroutine
         recognition is not disable and possible,

       • variable <b>$TEMP_DIR</b> containing the name of a temporary directory created at compile time if  the  option
         <b>-tempdir</b> is supplied,

       • variable  <b>$TEMP_FILE</b>  containing  the  name  of  a temporary file created at compile time if the option
         <b>-tempfile</b> is supplied.

       • variable <b>$TEST_FILE</b> containing the absolute name of the current  test  file  (if  any).   In  fact  its
         content      is      identical      with      the     content     of     special     token     __FILE__
         &lt;https://perldoc.perl.org/functions/__FILE__&gt;, but only in the test file itself!  If, however, you need
         the test file name  in  a  test  submodule  or  in  a  <b>.env</b>  file  belonging  to  this  test,  __FILE__
         &lt;https://perldoc.perl.org/functions/__FILE__&gt; can no longer be applied - whereas <b>$TEST_FILE</b> is there.

       All  variables  mentioned above are read-only after their export.  In this case they are logged to STDOUT
       using note &lt;https://metacpan.org/pod/Test2::Tools::Basic#DIAGNOSTICS&gt;.

       If any of the variables <b>$CLASS</b>, <b>$METHOD</b>, and <b>$METHOD_REF</b> is undefined and hence  not  exported,  this  is
       reported at the very begin of test execution.

</pre><h4><b>CAVEATS</b></h4><pre>
       • <b>Test::Expander</b> is recommended to be the very first module in your test file.

         The  only  known  exception  is  when some actions performed on the module level (e.g. determination of
         constants) rely upon results of other actions (e.g. mocking of built-ins).

         To explain this let us assume that your test file should globally mock the built-in <b>close</b> (if  this  is
         only  required  in  the  name  space of class / module to be tested, the option <b>-builtin</b> should be used
         instead!)  to verify if the testee properly reacts both on its success and failure.  For this purpose a
         reasonable implementation might look as follows:

           my $close_success;
           BEGIN {
             *CORE::GLOBAL::close = sub (*) { $close_success ? CORE::close( shift ) : 0 }
           }

           use Test::Expander;

       • Array elements of the value supplied along with  the  option  <b>-lib</b>  are  evaluated  using  string  eval
         &lt;https://perldoc.perl.org/functions/eval&gt; so that constant strings would need duplicated quotes e.g.

           use Test::Expander -lib =&gt; [ q('my_test_lib') ];

       • If  the  value to be assigned to an environment variable after evaluation of an <b>.env</b> file is undefined,
         such assignment is skipped.

       • If <b>Test::Expander</b> is used in one-line mode (with the <b>-e</b> option), the variable <b>$TEST_FILE</b> is  unset  and
         not exported.

</pre><h4><b>AUTHOR</b></h4><pre>
       Jurij Fajnberg, &lt;fajnbergj at gmail.com&gt;

</pre><h4><b>BUGS</b></h4><pre>
       Please     report    any    bugs    or    feature    requests    through    the    web    interface    at
       &lt;https://github.com/jsf116/Test-Expander/issues&gt;.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright (c) 2021-2024 Jurij Fajnberg

       This program is free software; you can redistribute it and/or modify it under the same terms as the  Perl
       5 programming language system itself.

perl v5.40.0                                       2024-09-06                                <u>Test::<a href="../man3pm/Expander.3pm.html">Expander</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>