<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::StagedFileProducer -- mtime-based file production engine</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/lintian">lintian_2.122.0ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::StagedFileProducer -- mtime-based file production engine

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Test::StagedFileProducer;

         my $wherever = '/your/test/directory';

         my $producer = Test::StagedFileProducer-&gt;new(path =&gt; $wherever);
         $producer-&gt;exclude("$wherever/log", "$wherever/build-stamp");

         my $output = "$wherever/file.out";
         $producer-&gt;add_stage(
               products =&gt; [$output],
               build =&gt;sub {
                   print encode_utf8("Building $output.\n");
               },
               skip =&gt;sub {
                   print encode_utf8("Skipping $output.\n");
               }
         );

         $producer-&gt;run(minimum_epoch =&gt; time, verbose =&gt; 1);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Provides a way to define and stack file production stages that all depend on subsets of the same group of
       files.

       After the stages are defined, the processing engine takes an inventory of all files in a target
       directory. It excludes some files, like logs, that should not be considered.

       Each stage adds its own products to the list of files to be excluded before deciding whether to produce
       them. The decision is based on relative file modification times, in addition to a systemic rebuilding
       threshold. Before rebuilding, each stage asks a lower stage to make the same determination.

       The result is an engine with file production stages that depend on successively larger sets of files.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       new(path =&gt; PATH)
           Create a new instance focused on files in directory PATH.

       exclude(LIST)
           Excludes  all absolute paths in LIST from all mtime comparisons.  This is especially useful for logs.
           Calls to Path::Tiny-&gt;realpath are made to ensure the elements are canonical  and  have  a  chance  of
           matching something returned by File::Find::Rule.

       add_stage(HASH)
           Add  a  stage  defined by HASH to the processing engine for processing after stages previously added.
           HASH can define the following keys:

           $HASH{products} =&gt; LIST; a list of full-path filenames to be produced.

           $HASH{minimum_epoch} =&gt; EPOCH; an integer threshold for maximum age

           $HASH{build} =&gt; SUB; a sub executed when production is required.

           $HASH{skip} =&gt; SUB; a sub executed when production is not required.

       run(PARAMETERS)
           Runs the defined engine using the given parameters, which are arranged in a  matching  list  suitable
           for assignment to a hash.  The following two parameters are currently available:

           minimum_epoch  =&gt; EPOCH; a systemic threshold, in epochs, below which rebuilding is mandatory for any
           product.

           verbose =&gt; BOOLEAN; an option to enable more verbose reporting

       _process_remaining_stages(LIST)
           An internal subroutine that is used recursively to execute the stages. The list passed describes  the
           list of files to be excluded from subsequent mtime calculations.

           Please note that the bulk of the execution takes place after calling the next lower stage. That is to
           ensure  that  any lower build targets (or products, in our parlance) are met before the present stage
           attempts to do its job.

Lintian v2.122.0ubuntu1                            2025-05-01                        <u>Test::<a href="../man3/StagedFileProducer.3.html">StagedFileProducer</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>