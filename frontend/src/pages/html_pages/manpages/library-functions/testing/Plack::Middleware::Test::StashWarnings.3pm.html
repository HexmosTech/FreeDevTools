<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plack::Middleware::Test::StashWarnings - Test your application's warnings</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libplack-middleware-test-stashwarnings-perl">libplack-middleware-test-stashwarnings-perl_0.08-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Plack::Middleware::Test::StashWarnings - Test your application's warnings

</pre><h4><b>SYNOPSIS</b></h4><pre>
         # for your PSGI application:
         enable "Test::StashWarnings";

         # for your Test::WWW::Mechanize subclass:
         use Storable 'thaw';
         sub get_warnings {
             local $Test::Builder::Level = $Test::Builder::Level + 1;
             my $self = shift;

             my $clone = $self-&gt;clone;
             return unless $clone-&gt;get_ok('/__test_warnings');

             my @warnings = @{ thaw $clone-&gt;content };
             return @warnings;
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Plack::Middleware::Test::StashWarnings is a Plack middleware component to record warnings generated by
       your application so that you can test them to make sure your application complains about the right
       things.

       The warnings generated by your application are available at a special URL ("/__test_warnings"), encoded
       with "nfreeze" in Storable. So using Test::WWW::Mechanize you can just "get" that URL and "thaw" in
       Storable its content.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Plack::Middleware::Test::StashWarnings takes one optional argument, "verbose", which defaults to
       $ENV{TEST_VERBOSE}.  If set to true, it will bubble warnings up to any pre-existing "__WARN__" handler.
       Turning this explicitly off may be useful if your tests load Test::NoWarnings and also use
       Test::WWW::Mechanize::PSGI for non-forking testing -- failure to do so would result in test failures even
       for caught warnings.

</pre><h4><b>RATIONALE</b></h4><pre>
       Warnings are an important part of any application. Your web application should warn its operators when
       something is amiss.

       Almost as importantly, your web application should gracefully cope with bad input, the back button, and
       all other aspects of the user experience.

       Unfortunately, tests seldom cover what happens when things go poorly. Are you <u>sure</u> that your application
       correctly denies that action and logs the failure? Are you <u>sure</u> it will tomorrow?

       This module lets you retrieve the warnings that your forked server issues. That way you can test that
       your application continues to issue warnings when it makes sense. Catching the warnings also keeps your
       test output tidy. Finally, you'll be able to see (and be notified via failing tests) when your
       application issues new, unexpected warnings so you can fix them immediately.

</pre><h4><b>AUTHOR</b></h4><pre>
       Shawn M Moore "<a href="mailto:sartak@bestpractical.com">sartak@bestpractical.com</a>"

       Tatsuhiko Miyagawa wrote Plack::Middleware::Test::Recorder which served as a model for this module.

</pre><h4><b>LICENSE</b></h4><pre>
       This library is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Test::HTTP::Server::Simple::StashWarnings

perl v5.34.0                                       2022-06-16             <u>Plack::Middlewa...::<a href="../man3pm/StashWarnings.3pm.html">StashWarnings</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>