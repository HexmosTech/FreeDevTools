<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test2::Manual::Tooling::Testing - Tutorial on how to test your testing tools.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/perl-doc">perl-doc_5.40.1-6_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test2::Manual::Tooling::Testing - Tutorial on how to test your testing tools.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Testing your test tools used to be a complex and difficult prospect. The old tools such as Test::Tester
       and Test::Builder::Tester were limited, and fragile. Test2 on the other hand was designed from the very
       start to be easily tested! This tutorial shows you how.

</pre><h4><b>THE</b> <b>HOLY</b> <b>GRAIL</b> <b>OF</b> <b>TESTING</b> <b>YOUR</b> <b>TOOLS</b></h4><pre>
       The key to making Test2 easily testable (specially when compared to Test::Builder) is the "intercept"
       function.

           use Test2::API qw/intercept/;

           my $events = intercept {
               ok(1, "pass");
               ok(0, "fail");

               diag("A diag");
           };

       The intercept function lets you use any test tools you want inside a codeblock.  No events or contexts
       generated within the intercept codeblock will have any effect on the outside testing state. The
       "intercept" function completely isolates the tools called within.

       <b>Note:</b> Plugins and things that effect global API state may not be fully isolated. "intercept" is intended
       specifically for event isolation.

       The "intercept" function will return an arrayref containing all the events that were generated within the
       codeblock. You can now make any assertions you want about the events you expected your tools to generate.

           [
               bless({...}, 'Test2::Event::Ok'),   # pass
               bless({...}, 'Test2::Event::Ok'),   # fail
               bless({...}, 'Test2::Event::Diag'), # Failure diagnostics (not always a second event)
               bless({...}, 'Test2::Event::Diag'), # custom 'A diag' message
           ]

       Most test tools eventually produce one or more events. To effectively verify the events you get from
       intercept you really should read up on how events work Test2::Manual::Anatomy::Event. Once you know about
       events you can move on to the next section which points you at some helpers.

</pre><h4><b>ADDITIONAL</b> <b>HELPERS</b></h4><pre>
   <b>Test2::Tools::Tester</b>
       This is the most recent set of tools to help you test your events. To really understand these you should
       familiarize yourself with Test2::Manual::Anatomy::Event. If you are going to be writing anything more
       than the most simple of tools you should know how events work.

       The Test2::Tools::Tester documentation is a good place for further reading.

   <b>Test2::Tools::HarnessTester</b>
       The Test2::Tools::HarnessTester can export the summarize_events() tool.  This tool lets you run your
       event arrayref through Test2::Harness so that you can get a pass/fail summary.

           my $summary = summarize_events($events);

       The summary looks like this:

           {
               plan       =&gt; $plan_facet,         # the plan event facet
               pass       =&gt; $bool,               # true if the events result in a pass
               fail       =&gt; $bool,               # true if the events result in a fail
               errors     =&gt; $error_count,        # Number of error facets seen
               failures   =&gt; $failure_count,      # Number of failing assertions seen
               assertions =&gt; $assertion_count,    # Total number of assertions seen
           }

   <b>Test2::Tools::Compare</b>
       <b>DEPRECATED</b> These tools were written before the switch to faceted events.  These will still work, but are
       no longer the recommended way to test your tools.

       The Test2::Tools::Compare library exports a handful of extras to help test events.

       event $TYPE =&gt; ...
           Use  in  an array check against $events to check for a specific type of event with the properties you
           specify.

       fail_events $TYPE =&gt; ...
           Use when you expect a failing assertion of $TYPE. This will automatically check that the  next  event
           following it is a diagnostics message with the default failure text.

           <b>Note:</b>  This  is outdated as a single event may now possess both the failing assertion AND the failing
           text, such events will fail this test.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Test2::Manual - Primary index of the manual.

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Test2-Manual can be found at <u>https://github.com/Test-More/Test2-Suite/</u>.

</pre><h4><b>MAINTAINERS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2018 Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

       See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-07-27             <u>Test2::Manual::Tooling::<a href="../man3perl/Testing.3perl.html">Testing</a></u>(3perl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>