<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FFI::Platypus::Constant - Define constants in C space for Perl</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libffi-platypus-perl">libffi-platypus-perl_2.10-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FFI::Platypus::Constant - Define constants in C space for Perl

</pre><h4><b>VERSION</b></h4><pre>
       version 2.10

</pre><h4><b>SYNOPSIS</b></h4><pre>
       "ffi/foo.c":

        #include &lt;ffi_platypus_bundle.h&gt;

        void
        ffi_pl_bundle_constant(const char *package, ffi_platypus_constant_t *c)
        {
          c-&gt;set_str("FOO", "BAR");       /* sets $package::FOO to "BAR" */
          c-&gt;set_str("ABC::DEF", "GHI");  /* sets ABC::DEF to GHI        */
        }

       "lib/Foo.pm":

        package Foo;

        use strict;
        use warnings;
        use FFI::Platypus 2.00;
        use Exporter qw( import );

        my $ffi = FFI::Platypus-&gt;new( api =&gt; 2 );
        # sets constants Foo::FOO and ABC::DEF from C
        $ffi-&gt;bundle;

        1;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The Platypus bundle interface (see FFI::Platypus::Bundle) has an entry point "ffi_pl_bundle_constant"
       that lets you define constants in Perl space from C.

        void ffi_pl_bundle_constant(const char *package, ffi_platypus_constant_t *c);

       The first argument "package" is the name of the Perl package.  The second argument "c" is a struct with
       function pointers that lets you define constants of different types.  The first argument for each
       function is the name of the constant and the second is the value.  If "::" is included in the constant
       name then it will be defined in that package space.  If it isn't then the constant will be defined in
       whichever package called "bundle".

       set_str
            c-&gt;set_str(name, value);

           Sets a string constant.

       set_sint
            c-&gt;set_sint(name, value);

           Sets a 64-bit signed integer constant.

       set_uint
            c-&gt;set_uint(name, value);

           Sets a 64-bit unsigned integer constant.

       set_double
            c-&gt;set_double(name, value);

           Sets a double precision floating point constant.

   <b>Example</b>
       Suppose you have a header file "myheader.h":

        #ifndef MYHEADER_H
        #define MYHEADER_H

        #define MYVERSION_STRING "1.2.3"
        #define MYVERSION_MAJOR 1
        #define MYVERSION_MINOR 2
        #define MYVERSION_PATCH 3

        enum {
          MYBAD = -1,
          MYOK  = 1
        };

        #define MYPI 3.14

        #endif

       You can define these constants from C:

        #include &lt;ffi_platypus_bundle.h&gt;
        #include "myheader.h"

        void ffi_pl_bundle_constant(const char *package, ffi_platypus_constant_t *c)
        {
          c-&gt;set_str("MYVERSION_STRING", MYVERSION_STRING);
          c-&gt;set_uint("MYVERSION_MAJOR", MYVERSION_MAJOR);
          c-&gt;set_uint("MYVERSION_MINOR", MYVERSION_MINOR);
          c-&gt;set_uint("MYVERSION_PATCH", MYVERSION_PATCH);
          c-&gt;set_sint("MYBAD", MYBAD);
          c-&gt;set_sint("MYOK", MYOK);
          c-&gt;set_double("MYPI", MYPI);
        }

       Your Perl code doesn't have to do anything when calling bundle:

        package Const;

        use strict;
        use warnings;
        use FFI::Platypus 2.00;

        {
          my $ffi = FFI::Platypus-&gt;new( api =&gt; 2 );
          $ffi-&gt;bundle;
        }

        1;

</pre><h4><b>AUTHOR</b></h4><pre>
       Author: Graham Ollis &lt;<a href="mailto:plicease@cpan.org">plicease@cpan.org</a>&gt;

       Contributors:

       Bakkiaraj Murugesan (bakkiaraj)

       Dylan Cali (calid)

       pipcet

       Zaki Mughal (zmughal)

       Fitz Elliott (felliott)

       Vickenty Fesunov (vyf)

       Gregor Herrmann (gregoa)

       Shlomi Fish (shlomif)

       Damyan Ivanov

       Ilya Pavlov (Ilya33)

       Petr Písař (ppisar)

       Mohammad S Anwar (MANWAR)

       Håkon Hægland (hakonhagland, HAKONH)

       Meredith (merrilymeredith, MHOWARD)

       Diab Jerius (DJERIUS)

       Eric Brine (IKEGAMI)

       szTheory

       José Joaquín Atria (JJATRIA)

       Pete Houston (openstrike, HOUSTON)

       Lukas Mai (MAUKE)

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2015-2022 by Graham Ollis.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.0                                       2025-01-11                       <u>FFI::Platypus::<a href="../man3pm/Constant.3pm.html">Constant</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>