<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nameserv::protocol - Name service facility, client/server protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       nameserv::protocol - Name service facility, client/server protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>Bind</b> <u>name</u> <u>data</u>

       <b>Release</b>

       <b>Search</b> <u>pattern</u>

       <b>ProtocolVersion</b>

       <b>ProtocolFeatures</b>

       <b>Search/Continuous/Start</b> <u>tag</u> <u>pattern</u>

       <b>Search/Continuous/Stop</b> <u>tag</u>

       <b>Search/Continuous/Change</b> <u>tag</u> <b>add</b>|<b>remove</b> <u>response</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  packages  <b>nameserv::server</b>, <b>nameserv</b>, and <b>nameserv::common</b> provide a simple unprotected name service
       facility for use in small trusted environments.

       Please read <u>Name</u> <u>service</u> <u>facility,</u> <u>introduction</u> first.

       This document contains the specification of the network protocol which is used by client  and  server  to
       talk to each other, enabling implementations of the same protocol in other languages.

</pre><h4><b>NANO</b> <b>NAME</b> <b>SERVICE</b> <b>PROTOCOL</b> <b>VERSION</b> <b>1</b></h4><pre>
       This  protocol  defines the basic set of messages to be supported by a name service, also called the <u>Core</u>
       feature.

   <b>BASIC</b> <b>LAYER</b>
       The basic communication between client and server is done using the remote-execution  protocol  specified
       by  the  Tcl  package  <b>comm</b>.   The  relevant document specifying its on-the-wire protocol can be found in
       <u>comm_wire</u>.

       All the scripts exchanged via this protocol are single commands in list form and thus can be  interpreted
       as plain messages instead of as Tcl commands. The commands/messages specified in the next section are the
       only  commands  understood  by the server-side. Command and variable substitutions are not allowed within
       the messages, i.e. arguments have to be literal values.

       The protocol is synchronous. I.e. for each message sent a response is expected, and has to be  generated.
       All messages are sent by the client.  The server does not sent messages, only responses to messages.

   <b>MESSAGE</b> <b>LAYER</b>
       <b>Bind</b> <u>name</u> <u>data</u>
              The  client  sends  this  message  when  it  registers  itself at the service with a <u>name</u> and some
              associated <u>data</u>. The server has to send an error response if the <u>name</u> is already in use. Otherwise
              the response has to be an empty string.

              The server has to accept multiple names for the same client.

       <b>Release</b>
              The client sends this message to unregister all names it  is  known  under  at  the  service.  The
              response has to be an empty string, always.

       <b>Search</b> <u>pattern</u>
              The  client  sends  this  message  to  search the service for names matching the glob-<u>pattern</u>. The
              response has to be a dictionary containing the matching names as keys, and  mapping  them  to  the
              data associated with it at <b>Bind</b>-time.

       <b>ProtocolVersion</b>
              The  client  sends  this  message to query the service for the highest version of the name service
              protocol it supports. The response has to be a positive integer number.

              Servers supporting only <u>Nano</u> <u>Name</u> <u>Service</u> <u>Protocol</u> <u>Version</u> <u>1</u> have to return <b>1</b>.

       <b>ProtocolFeatures</b>
              The client sends this message to query the service for the features of the name  service  protocol
              it supports. The response has to be a list containing feature names.

              Servers supporting only <u>Nano</u> <u>Name</u> <u>Service</u> <u>Protocol</u> <u>Version</u> <u>1</u> have to return <b>{Core}</b>.

</pre><h4><b>NANO</b> <b>NAME</b> <b>SERVICE</b> <b>PROTOCOL</b> <b>EXTENSION:</b> <b>CONTINUOUS</b> <b>SEARCH</b></h4><pre>
       This  protocol  defines  an  extended  set of messages to be supported by a name service, also called the
       <u>Search/Continuous</u> feature. This feature defines additional messages between client  and  server,  and  is
       otherwise identical to version 1 of the protocol. See the last section for the details of our foundation.

       A service supporting this feature has to put the feature name <b>Search/Continuous</b> into the list of features
       returned by the message <u>ProtocolFeatures</u>.

       For  this  extension the protocol is asynchronous. No direct response is expected for any of the messages
       in the extension. Furthermore the server will  start  sending  messages  on  its  own,  instead  of  only
       responses to messages, and the client has to be able to handle these notifications.

       <b>Search/Continuous/Start</b> <u>tag</u> <u>pattern</u>
              The  client sends this message to start searching the service for names matching the glob-<u>pattern</u>.
              In contrast to the regular <u>Search</u> request this one asks the server  to  continuously  monitor  the
              database  for  the  addition  and removal of matching entries and to notify the client of all such
              changes. The particular search is identified by the <u>tag</u>.

              No direct response is expected, rather the clients expect to be notified of changes  via  explicit
              <u>Search/Continuous/Result</u> messages generated by the service.

              It   is   further   expected   that   the   <u>tag</u>   information   is   passed   unchanged   to   the
              <u>Search/Continuous/Result</u> messages. This tagging of the results enables clients to  start  multiple
              searches and distinguish between the different results.

       <b>Search/Continuous/Stop</b> <u>tag</u>
              The client sends this message to stop the continuous search identified by the <u>tag</u>.

       <b>Search/Continuous/Change</b> <u>tag</u> <b>add</b>|<b>remove</b> <u>response</u>
              This  message  is sent by the service to clients with active continuous searches to transfer found
              changes. The first such message for a new continuous search has to contains  the  current  set  of
              matching entries.

              To  ensure  this  a service has to generate an <b>add</b>-message with an empty <u>response</u> if there were no
              matching entries at the time.

              The <u>response</u> has to be a dictionary containing the matching names as keys, and mapping them to the
              data associated with it at <b>Bind</b>-time.  The argument coming before the response  tells  the  client
              whether the names in the response were added or removed from the service.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category  <u>nameserv</u>  of  the  <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/comm_wire.3tcl.html">comm_wire</a>(3tcl), <a href="../man3tcl/nameserv.3tcl.html">nameserv</a>(3tcl), nameserv::<a href="../man3tcl/server.3tcl.html">server</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       comm, name service, protocol

</pre><h4><b>CATEGORY</b></h4><pre>
       Networking

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2007-2008 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 0.2                              <u>nameserv::<a href="../man3tcl/protocol.3tcl.html">protocol</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>