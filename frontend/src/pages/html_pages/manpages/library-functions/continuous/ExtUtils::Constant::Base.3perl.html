<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExtUtils::Constant::Base - base class for ExtUtils::Constant objects</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/perl-doc">perl-doc_5.40.1-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ExtUtils::Constant::Base - base class for ExtUtils::Constant objects

</pre><h4><b>SYNOPSIS</b></h4><pre>
           require ExtUtils::Constant::Base;
           @ISA = 'ExtUtils::Constant::Base';

</pre><h4><b>DESCRIPTION</b></h4><pre>
       ExtUtils::Constant::Base provides a base implementation of methods to generate C code to give fast
       constant value lookup by named string. Currently it's mostly used ExtUtils::Constant::XS, which generates
       the lookup code for the <b>constant()</b> subroutine found in many XS modules.

</pre><h4><b>USAGE</b></h4><pre>
       ExtUtils::Constant::Base exports no subroutines. The following methods are available

       header
           A method returning a scalar containing definitions needed, typically for a C header file.

       memEQ_clause args_hashref
           A  method  to  return  a  suitable  C "if" statement to check whether <u>name</u> is equal to the C variable
           "name". If <u>checked_at</u> is defined, then it is used to avoid "memEQ" for short names, or to generate  a
           comment to highlight the position of the character in the "switch" statement.

           If  i&lt;checked_at&gt; is a reference to a scalar, then instead it gives the characters pre-checked at the
           beginning, (and the number of chars by which the C variable name has been advanced. These need to  be
           chopped from the front of <u>name</u>).

       dump_names arg_hashref, ITEM...
           An  internal  function  to  generate  the  embedded  perl  code  that  will  regenerate  the constant
           subroutines.  <u>default_type</u>, <u>types</u> and <u>ITEM</u>s are the same as for C_constant.   <u>indent</u>  is  treated  as
           number  of  spaces  to indent by.  If "declare_types" is true a $types is always declared in the perl
           code generated, if defined and false never declared, and if undefined $types is only declared if  the
           values in <u>types</u> as passed in cannot be inferred from <u>default_types</u> and the <u>ITEM</u>s.

       assign arg_hashref, VALUE...
           A  method  to  return a suitable assignment clause. If <u>type</u> is aggregate (eg <u>PVN</u> expects both pointer
           and length) then there should be multiple <u>VALUE</u>s for the components. <u>pre</u> and  <u>post</u>  if  defined  give
           snippets  of  C  code  to  proceed and follow the assignment. <u>pre</u> will be at the start of a block, so
           variables may be defined in it.

       return_clause arg_hashref, ITEM
           A method to return a suitable "#ifdef" clause. <u>ITEM</u> is a  hashref  (as  passed  to  "C_constant"  and
           "match_clause". <u>indent</u> is the number of spaces to indent, defaulting to 6.

       switch_clause arg_hashref, NAMELEN, ITEMHASH, ITEM...
           An  internal  method  to generate a suitable "switch" clause, called by "C_constant" <u>ITEM</u>s are in the
           hash ref format as given in the description of "C_constant", and must all have the names of the  same
           length,  given  by  <u>NAMELEN</u>.   <u>ITEMHASH</u>  is  a  reference  to a hash, keyed by name, values being the
           hashrefs in the <u>ITEM</u> list.  (No parameters are modified, and there can be keys in the  <u>ITEMHASH</u>  that
           are  not  in the list of <u>ITEM</u>s without causing problems - the hash is passed in to save generating it
           afresh for each call).

       params WHAT
           An "internal" method, subject to change, currently called to  allow  an  overriding  class  to  cache
           information that will then be passed into all the "*param*" calls. (Yes, having to read the source to
           make  sense  of  this is considered a known bug). <u>WHAT</u> is be a hashref of types the constant function
           will return. In ExtUtils::Constant::XS this method is used to returns a hashref keyed IV NV PV SV  to
           show   which   combination  of  pointers  will  be  needed  in  the  C  argument  list  generated  by
           C_constant_other_params_definition and C_constant_other_params

       dogfood arg_hashref, ITEM...
           An internal  function  to  generate  the  embedded  perl  code  that  will  regenerate  the  constant
           subroutines.  Parameters are the same as for C_constant.

           Currently the base class does nothing and returns an empty string.

       normalise_items args, default_type, seen_types, seen_items, ITEM...
           Convert the items to a normalised form. For 8 bit and Unicode values converts the item to an array of
           1 or 2 items, both 8 bit and UTF-8 encoded.

       C_constant arg_hashref, ITEM...
           A  function  that  returns  a  <b>list</b>  of  C  subroutine  definitions that return the value and type of
           constants when passed the name by the XS wrapper.  <u>ITEM...</u> gives a list of constant names.  Each  can
           either  be  a  string,  which is taken as a C macro name, or a reference to a hash with the following
           keys

           name    The name of the constant, as seen by the perl code.

           type    The type of the constant (<u>IV</u>, <u>NV</u> etc)

           value   A C expression for the value of the constant, or a list of  C  expressions  if  the  type  is
                   aggregate. This defaults to the <u>name</u> if not given.

           macro   The  C  pre-processor  macro to use in the "#ifdef". This defaults to the <u>name</u>, and is mainly
                   used if <u>value</u> is an "enum". If a reference an array is passed then the first element is  used
                   in  place  of the "#ifdef" line, and the second element in place of the "#endif". This allows
                   pre-processor constructions such as

                       #if defined (foo)
                       #if !defined (bar)
                       ...
                       #endif
                       #endif

                   to be used to determine if a constant is to be defined.

                   A "macro" 1 signals that the constant is  always  defined,  so  the  "#if"/"#endif"  test  is
                   omitted.

           default Default  value to use (instead of "croak"ing with "your vendor has not defined...") to return
                   if the macro isn't defined. Specify a reference to an array with type followed by value(s).

           pre     C code to use before the assignment of the value of the constant.  This  allows  you  to  use
                   temporary variables to extract a value from part of a "struct" and return this as <u>value</u>. This
                   C code is places at the start of a block, so you can declare variables in it.

           post    C  code  to  place  between  the assignment of value (to a temporary) and the return from the
                   function. This allows you to clear up anything in <u>pre</u>.  Rarely needed.

           def_pre
           def_post
                   Equivalents of <u>pre</u> and <u>post</u> for the default value.

           utf8    Generated internally. Is zero or undefined if name is 7 bit ASCII, "no" if the name is 8  bit
                   (and so should only match if <b>SvUTF8()</b> is false), "yes" if the name is utf8 encoded.

                   The internals automatically clone any name with characters 128-255 but none 256+ (ie one that
                   could be either in bytes or utf8) into a second entry which is utf8 encoded.

           weight  Optional  sorting  weight  for  names, to determine the order of linear testing when multiple
                   names fall in the same case of a switch clause.  Higher comes earlier, undefined defaults  to
                   zero.

           In  the argument hashref, <u>package</u> is the name of the package, and is only used in comments inside the
           generated C code. <u>subname</u> defaults to "constant" if undefined.

           <u>default_type</u> is the type returned by "ITEM"s that don't specify their type. It defaults to the  value
           of  default_type().  <u>types</u>  should  be  given  either  as  a comma separated list of types that the C
           subroutine <u>subname</u> will generate or as a reference to a hash. <u>default_type</u> will be added to the  list
           if  not  present, as will any types given in the list of <u>ITEM</u>s. The resultant list should be the same
           list of types that "XS_constant" is given. [Otherwise "XS_constant" and "C_constant"  may  differ  in
           the  number of parameters to the constant function. <u>indent</u> is currently unused and ignored. In future
           it may be used to pass in information used to change the C indentation style used.]  The best way  to
           maintain consistency is to pass in a hash reference and let this function update it.

           <u>breakout</u>  governs when child functions of <u>subname</u> are generated.  If there are <u>breakout</u> or more <u>ITEM</u>s
           with the same length of name, then the code to switch between them is placed into  a  function  named
           <u>subname</u>_<u>len</u>,  for  example  "constant_5"  for names 5 characters long.  The default <u>breakout</u> is 3.  A
           single "ITEM" is always inlined.

</pre><h4><b>BUGS</b></h4><pre>
       Not everything is documented yet.

       Probably others.

</pre><h4><b>AUTHOR</b></h4><pre>
       Nicholas Clark &lt;<a href="mailto:nick@ccl4.org">nick@ccl4.org</a>&gt; based on the code in "h2xs" by Larry Wall and others

perl v5.40.1                                       2025-07-03                    <u>ExtUtils::Constant::<a href="../man3perl/Base.3perl.html">Base</a></u>(3perl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>