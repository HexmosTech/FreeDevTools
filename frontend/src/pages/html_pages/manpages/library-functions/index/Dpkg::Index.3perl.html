<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dpkg::Index - generic index of control information</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdpkg-perl">libdpkg-perl_1.22.21ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Dpkg::Index - generic index of control information

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class represent a set of Dpkg::Control objects.

</pre><h4><b>METHODS</b></h4><pre>
       $index = Dpkg::Index-&gt;new(%opts)
           Creates a new empty index. See <b>set_options()</b> for more details.

       $index-&gt;set_options(%opts)
           Change the value of some options.

           Options:

           <b>type</b>
               Set the deb822 control type, used to setup default values for other options.

           <b>item_opts</b>
               Set  a  hash  reference  that  will  be  passed to the item constructor in the $index-&gt;<b>new_item()</b>
               method.  The index can only contain one item with a given key.

           <b>unique_tuple_key</b>
               Set a boolean requesting whether the default key should be the unique tuple (default to true).

           <b>get_key_func</b>
               Set a function returning a key for the item passed in parameters.

               The default depends on the type:

               •   for CTRL_TMPL_SRC, it is the Source field;

               •   for CTRL_REPO_SRC and CTRL_DSC it is the Package and Version fields (concatenated  with  "_")
                   when <b>unique_tuple_key</b> is true (the default), or otherwise the Package field;

               •   for CTRL_TMPL_PKG it is simply the Package field;

               •   for   CTRL_REPO_PKG  and  CTRL_DEB  it  is  the  Package,  Version  and  Architecture  fields
                   (concatenated with "_") when <b>unique_tuple_key</b> is true (the default) or otherwise the  Package
                   field;

               •   for CTRL_CHANGELOG it is the Source and the Version fields (concatenated with an intermediary
                   "_");

               •   for CTRL_TESTS is an integer index (0-based) corresponding to the Tests or Test-Command field
                   stanza;

               •   for  CTRL_FILE_CHANGES  it  is the Source, Version and Architecture fields (concatenated with
                   "_");

               •   for CTRL_FILE_VENDOR it is the Vendor field;

               •   for CTRL_FILE_STATUS it is the Package and Architecture fields (concatenated with "_");

               •   otherwise it is the Package field by default.

       $index-&gt;<b>get_type()</b>
           Returns the type of control information stored. See the type parameter set during <b>new()</b>.

       $index-&gt;add($item, [$key])
           Add a new item in the index. If the $key parameter is omitted, the key will  be  generated  with  the
           get_key_func function (see <b>set_options()</b> for details).

       $index-&gt;parse($fh, $desc)
           Reads the filehandle and creates all items parsed. When called multiple times, the parsed stanzas are
           accumulated.

           Returns the number of items parsed.

       $index-&gt;load($file)
           Reads  the  file and creates all items parsed. Returns the number of items parsed. Handles compressed
           files transparently based on their extensions.

       $item = $index-&gt;<b>new_item()</b>
           Creates a new item. Mainly useful for derived objects that would want  to  override  this  method  to
           return something else than a Dpkg::Control object.

       $item = $index-&gt;get_by_key($key)
           Returns the item identified by $key or undef.

       @keys = $index-&gt;get_keys(%criteria)
           Returns  the  keys  of  items that matches all the criteria. The key of the %criteria hash is a field
           name and the value is either a regex that needs to match  the  field  value,  or  a  reference  to  a
           function  that  must  return  true and that receives the field value as single parameter, or a scalar
           that must be equal to the field value.

       @items = $index-&gt;get(%criteria)
           Returns all the items that matches all the criteria.

       $index-&gt;remove_by_key($key)
           Remove the item identified by the given key.

       @items = $index-&gt;remove(%criteria)
           Returns and removes all the items that matches all the criteria.

       $index-&gt;merge($other_index, %opts)
           Merge the entries of the other index. While merging, the keys of the merged index are used, they  are
           not  re-computed.  It's  your  responsibility  to  ensure  that they have been computed with the same
           function.

           Options:

           <b>keep_keys</b>
               Set whether to re-compute the keys from the other index.  Defaults to 1.

       $index-&gt;sort(\&amp;sortfunc)
           Sort the index with the given sort function. If no function is given,  an  alphabetic  sort  is  done
           based on the keys. The sort function receives the items themselves as parameters and not the keys.

       $str = $index-&gt;output([$fh])
       "$index"
           Get  a  string  representation  of the index. The Dpkg::Control objects are output in the order which
           they have been read or added except if the order have been changed with <b>sort()</b>.

           Print the string representation of the index to a filehandle if $fh has been passed.

       $index-&gt;save($file)
           Writes the content of the index in a file. Auto-compresses files based on their extensions.

</pre><h4><b>CHANGES</b></h4><pre>
   <b>Version</b> <b>3.00</b> <b>(dpkg</b> <b>1.21.2)</b>
       Change behavior: The CTRL_TESTS key now defaults to a stanza index.

   <b>Version</b> <b>2.01</b> <b>(dpkg</b> <b>1.20.6)</b>
       New option: Add new "item_opts" option.

   <b>Version</b> <b>2.00</b> <b>(dpkg</b> <b>1.20.0)</b>
       Change behavior: The "unique_tuple_key" option now defaults to true.

   <b>Version</b> <b>1.01</b> <b>(dpkg</b> <b>1.19.0)</b>
       New  option:  Add  new  "unique_tuple_key"  option  to  $index-&gt;<b>set_options()</b>  to  set   better   default
       "get_key_func" options, which will become the default behavior in 1.20.x.

   <b>Version</b> <b>1.00</b> <b>(dpkg</b> <b>1.15.6)</b>
       Mark the module as public.

1.22.21                                            2025-07-14                                 <u>Dpkg::<a href="../man3perl/Index.3perl.html">Index</a></u>(3perl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>