<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB::IndexView - Index management for a collection</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongodb-perl">libmongodb-perl_2.2.2-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MongoDB::IndexView - Index management for a collection

</pre><h4><b>VERSION</b></h4><pre>
       version v2.2.2

</pre><h4><b>SYNOPSIS</b></h4><pre>
           my $indexes = $collection-&gt;indexes;

           # listing indexes

           @names = map { $_-&gt;{name} } $indexes-&gt;list-&gt;all;

           my $result = $indexes-&gt;list;

           while ( my $index_doc = $result-&gt;next ) {
               # do stuff with each $index_doc
           }

           # creating indexes

           $name = $indexes-&gt;create_one( [ x =&gt; 1, y =&gt; -1 ], { unique =&gt; 1 } );

           @names = $indexes-&gt;create_many(
               { keys =&gt; [ x =&gt; 1, y =&gt; -1 ], options =&gt; { unique =&gt; 1 } },
               { keys =&gt; [ z =&gt; 1 ] },
           );

           # dropping indexes

           $indexes-&gt;drop_one( "x_1_y_-1" );

           $indexes-&gt;drop_all;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class models the indexes on a MongoDB::Collection so you can create, list or drop them.

       For more on MongoDB indexes, see the MongoDB Manual pages on indexing
       &lt;<a href="http://docs.mongodb.org/manual/core/indexes/">http://docs.mongodb.org/manual/core/indexes/</a>&gt;

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>collection</b>
       The MongoDB::Collection for which indexes are being created or viewed.

</pre><h4><b>METHODS</b></h4><pre>
   <b>list</b>
           $result = $indexes-&gt;list;

           while ( my $index = $result-&gt;next ) {
               ...
           }

           for my $index ( $result-&gt;all ) {
               ...
           }

       This method returns a MongoDB::QueryResult which can be used to retrieve index information either one at
       a time (with "next") or all at once (with "all").

       If the list can't be retrieved, an exception will be thrown.

   <b>create_one</b>
           $name = $indexes-&gt;create_one( [ x =&gt; 1 ] );
           $name = $indexes-&gt;create_one( [ x =&gt; 1, y =&gt; 1 ] );
           $name = $indexes-&gt;create_one( [ z =&gt; 1 ], { unique =&gt; 1 } );

       This method takes an ordered index specification document and an optional hash reference of index options
       and returns the name of the index created.  It will throw an exception on error.

       The index specification document is an ordered document (array reference, Tie::IxHash object, or single-
       key hash reference) with index keys and direction/type.

       See "create_many" for important information about index specifications and options.

       The following additional options are recognized:

       •   "maxTimeMS" — maximum time in milliseconds before the operation will time out.

   <b>create_many</b>
           @names = $indexes-&gt;create_many(
               { keys =&gt; [ x =&gt; 1, y =&gt; 1 ] },
               { keys =&gt; [ z =&gt; 1 ], options =&gt; { unique =&gt; 1 } }
           );

           @names = $indexes-&gt;create_many(
               { keys =&gt; [ x =&gt; 1, y =&gt; 1 ] },
               { keys =&gt; [ z =&gt; 1 ], options =&gt; { unique =&gt; 1 } }
               \%global_options,
           );

       This  method  takes  a  list of index models (given as hash references) and returns a list of index names
       created.  It will throw an exception on error.

       If the last value is a hash reference without a "keys" entry, it will be assumed to be a  set  of  global
       options. See below for a list of accepted global options.

       Each index module is described by the following fields:

       •   "keys"  (required)  —  an  index  specification  as an ordered document (array reference, Tie::IxHash
           object, or single-key hash reference) with index keys and direction/type.  See below for more.

       •   "options" — an optional hash reference of index options.

       The "keys" document needs to be ordered.  You are <b>STRONGLY</b> encouraged to get in the habit  of  specifying
       index  keys  with an array reference.  Because Perl randomizes the order of hash keys, you may <b>ONLY</b> use a
       hash reference if it contains a single key.

       The form of the "keys" document differs based on the type of index (e.g.   single-key,  multi-key,  text,
       geospatial, etc.).

       For  single  and  multi-key  indexes,  the  value is "1" for an ascending index and "-1" for a descending
       index.

           [ name =&gt; 1, votes =&gt; -1 ] # ascending on name, descending on votes

       See Index Types &lt;<a href="http://docs.mongodb.org/manual/core/index-types/">http://docs.mongodb.org/manual/core/index-types/</a>&gt; in the MongoDB Manual for instructions
       for other index types.

       The "options" hash reference may have a mix of  general-purpose  and  index-type-specific  options.   See
       Index Options &lt;<a href="http://docs.mongodb.org/manual/reference/method/db.collection.createIndex/">http://docs.mongodb.org/manual/reference/method/db.collection.createIndex/</a>#options&gt; in the
       MongoDB Manual for specifics.

       Some of the more commonly used options include:

       •   "background" — when true, index creation won't block but will run in the background; this is strongly
           recommended to avoid blocking other operations on the database.

       •   "collation"  -  a  document defining the collation for this operation. See docs for the format of the
           collation document here: &lt;https://docs.mongodb.com/master/reference/collation/&gt;.

       •   "unique" — enforce uniqueness when true; inserting a duplicate document (or creating one with  update
           modifiers) will raise an error.

       •   "name" — a name (string) for the index; one will be generated if this is omitted.

       Global options specified as the last value can contain the following keys:

       •   "maxTimeMS" — maximum time in milliseconds before the operation will time out.

   <b>drop_one</b>
           $output = $indexes-&gt;drop_one( $name );
           $output = $indexes-&gt;drop_one( $name, \%options );

       This method takes the name of an index and drops it.  It returns the output of the dropIndexes command (a
       hash  reference)  on success or throws a exception if the command errors.  However, if the index does not
       exist, the command output will have the "ok" field as a false value, but no exception will e thrown.

       Valid options are:

       •   "maxTimeMS" — maximum time in milliseconds before the operation will time out.

   <b>drop_all</b>
           $output = $indexes-&gt;drop_all;
           $output = $indexes-&gt;drop_all(\%options);

       This method drops all indexes (except the one on  the  "_id"  field).   It  returns  the  output  of  the
       dropIndexes command (a hash reference) on success or throws a exception if the command fails.

       Valid options are:

       •   "maxTimeMS" — maximum time in milliseconds before the operation will time out.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   David Golden &lt;<a href="mailto:david@mongodb.com">david@mongodb.com</a>&gt;

       •   Rassi &lt;<a href="mailto:rassi@mongodb.com">rassi@mongodb.com</a>&gt;

       •   Mike Friedman &lt;<a href="mailto:friedo@friedo.com">friedo@friedo.com</a>&gt;

       •   Kristina Chodorow &lt;<a href="mailto:k.chodorow@gmail.com">k.chodorow@gmail.com</a>&gt;

       •   Florian Ragwitz &lt;<a href="mailto:rafl@debian.org">rafl@debian.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2020 by MongoDB, Inc.

       This is free software, licensed under:

         The Apache License, Version 2.0, January 2004

perl v5.40.1                                       2025-04-03                            <u>MongoDB::<a href="../man3pm/IndexView.3pm.html">IndexView</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>