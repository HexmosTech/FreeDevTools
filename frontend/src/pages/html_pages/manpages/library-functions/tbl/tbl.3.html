<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tbl_alloc, tbl_read, tbl_restart, tbl_span, tbl_end, tbl_free — roff table parser library for mandoc</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmandoc-dev">libmandoc-dev_1.14.6-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tbl_alloc, tbl_read, tbl_restart, tbl_span, tbl_end, tbl_free — roff table parser library for mandoc

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;tbl.h&gt;</b>
       <b>#include</b> <b>&lt;tbl_parse.h&gt;</b>

       <u>struct</u> <u>tbl_node</u> <u>*</u>
       <b>tbl_alloc</b>(<u>int</u> <u>pos</u>, <u>int</u> <u>line</u>);

       <u>void</u>
       <b>tbl_read</b>(<u>struct</u> <u>tbl_node</u> <u>*tbl</u>, <u>int</u> <u>ln</u>, <u>const</u> <u>char</u> <u>*p</u>, <u>int</u> <u>offs</u>);

       <u>void</u>
       <b>tbl_restart</b>(<u>int</u> <u>line</u>, <u>int</u> <u>pos</u>, <u>struct</u> <u>tbl_node</u> <u>*tbl</u>);

       <u>const</u> <u>struct</u> <u>tbl_span</u> <u>*</u>
       <b>tbl_span</b>(<u>struct</u> <u>tbl_node</u> <u>*tbl</u>);

       <u>void</u>
       <b>tbl_end</b>(<u>struct</u> <u>tbl_node</u> <u>**tblp</u>);

       <u>void</u>
       <b>tbl_free</b>(<u>struct</u> <u>tbl_node</u> <u>*tbl</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  library is tightly integrated into the <u><a href="../man1/mandoc.1.html">mandoc</a></u>(1) utility and not designed for stand-alone use.  The
       present manual is intended as a reference for developers working on <u><a href="../man1/mandoc.1.html">mandoc</a></u>(1).

   <b>Data</b> <b>structures</b>
       Unless otherwise noted, all of the following data structures are declared in &lt;<u>tbl.h</u>&gt; and are  deleted  in
       <b>tbl_free</b>().

       <u>struct</u> <u>tbl_node</u>
               This  structure  describes  a  complete  table.   It  is  declared  in  &lt;<u>tbl_int.h</u>&gt;,  created  in
               <b>tbl_alloc</b>(), and stored in the members <u>first_tbl</u>, <u>last_tbl</u>, and <u>tbl</u> of <u>struct</u> <u>roff</u> [<u>roff.c</u>].

               The <u>first_span</u>, <u>current_span</u>, <u>last_span</u>, and  <u>next</u>  members  may  be  NULL.   The  <u>first_row</u>  and
               <u>last_row</u>  members  may be NULL, but if there is a span, the function <b>tbl_layout</b>() guarantees that
               these pointers are not NULL.

       <u>struct</u> <u>tbl_opts</u>
               This structure describes the options of one table.  It  is  used  as  a  substructure  of  <u>struct</u>
               <u>tbl_node</u> and thus created and deleted together with it.  It is filled in <b>tbl_options</b>().

       <u>struct</u> <u>tbl_row</u>
               This  structure  describes  one  layout line in a table by maintaining a list of all the cells in
               that line.  It is allocated and filled in <b>row</b>() [<u>tbl_layout.c</u>] and  referenced  from  the  <u>layout</u>
               member of <u>struct</u> <u>tbl_node</u>.

               The  <u>next</u>  member  may  be  NULL.   The  function <b>tbl_layout</b>() guarantees that the <u>first</u> and <u>last</u>
               members are not NULL.

       <u>struct</u> <u>tbl_cell</u>
               This structure describes one layout cell in a table, in particular its alignment,  membership  in
               spans,  and  usage  for  lines.   It  is  allocated and filled in <b>cell_alloc</b>() [<u>tbl_layout.c</u>] and
               referenced from the <u>first</u> and <u>last</u> members of <u>struct</u> <u>tbl_row</u>.

               The <u>next</u> member may be NULL.

       <u>struct</u> <u>tbl_span</u>
               This structure describes one data line in a table by maintaining a list of all data cells in that
               line or by specifying that it is a horizontal line.  It is  allocated  and  filled  in  <b>newspan</b>()
               [<u>tbl_data.c</u>]  which  is  called from <b>tbl_data</b>() and referenced from the <u>first_span</u>, <u>current_span</u>,
               and <u>last_span</u> members of <u>struct</u> <u>tbl_node</u>, and from the <u>span</u> members of <u>struct</u> <u>man_node</u> and <u>struct</u>
               <u>mdoc_node</u> from &lt;<u>man.h</u>&gt; and &lt;<u>mdoc.h</u>&gt;.

               The <u>first</u>, <u>last</u>, <u>prev</u>, and <u>next</u>  members  may  be  NULL.   The  function  <b>newspan</b>()  [<u>tbl_data.c</u>]
               guarantees that the <u>opts</u> and <u>layout</u> members are not NULL.

       <u>struct</u> <u>tbl_dat</u>
               This  structure  describes  one  data cell in a table by specifying whether it contains a line or
               data, whether it spans additional layout cells, and by storing the data.   It  is  allocated  and
               filled in <b>tbl_data</b>() and referenced from the <u>first</u> and <u>last</u> members of <u>struct</u> <u>tbl_span</u>.

               The  <u>string</u>  and  <u>next</u>  members  may  be NULL.  The function <b>getdata</b>() guarantees that the <u>layout</u>
               member is not NULL.

   <b>Interface</b> <b>functions</b>
       The following functions are implemented in <u>tbl.c</u>, and all callers are in <u>roff.c</u>.

       <b>tbl_alloc</b>()
               Allocates, initializes, and returns a new <u>struct</u> <u>tbl_node</u>.  Called from <b>roff_TS</b>().

       <b>tbl_read</b>()
               Dispatches to <b>tbl_option</b>(), <b>tbl_layout</b>(), <b>tbl_cdata</b>(), and <b>tbl_data</b>(), see  below.   Called  from
               <b>roff_parseln</b>().

       <b>tbl_restart</b>()
               Resets the <u>part</u> member of <u>struct</u> <u>tbl_node</u> to TBL_PART_LAYOUT.  Called from <b>roff_T_</b>().

       <b>tbl_span</b>()
               On  the  first  call,  return  the first <u>struct</u> <u>tbl_span</u>; for later calls, return the next one or
               NULL.  Called from <b>roff_span</b>().

       <b>tbl_end</b>()
               Flags the last span as TBL_SPAN_LAST and clears the pointer passed as an  argment.   Called  from
               <b>roff_TE</b>() and <b>roff_endparse</b>().

       <b>tbl_free</b>()
               Frees  the  specified  <u>struct</u>  <u>tbl_node</u>  and  all  the  tbl_row,  tbl_cell, tbl_span, and tbl_dat
               structures referenced from it.  Called from <b>roff_free</b>() and <b>roff_reset</b>().

   <b>Private</b> <b>functions</b>
       The following functions are declared in &lt;<u>tbl_int.h</u>&gt;.

       <u>int</u> <b>tbl_options</b>(<u>struct</u> <u>tbl_node</u> <u>*tbl</u>, <u>int</u> <u>ln</u>, <u>const</u> <u>char</u> <u>*p</u>)
               Parses the options line into <u>struct</u> <u>tbl_opts</u>.  Implemented in <u>tbl_opts.c</u>, called from <b>tbl_read</b>().

       <u>int</u> <b>tbl_layout</b>(<u>struct</u> <u>tbl_node</u> <u>*tbl</u>, <u>int</u> <u>ln</u>, <u>const</u> <u>char</u> <u>*p</u>)
               Allocates and fills one <u>struct</u> <u>tbl_row</u> for each layout line and  one  <u>struct</u>  <u>tbl_cell</u>  for  each
               layout cell.  Implemented in <u>tbl_layout.c</u>, called from <b>tbl_read</b>().

       <u>int</u> <b>tbl_data</b>(<u>struct</u> <u>tbl_node</u> <u>*tbl</u>, <u>int</u> <u>ln</u>, <u>const</u> <u>char</u> <u>*p</u>)
               Allocates  one  <u>struct</u>  <u>tbl_span</u>  for  each  data  line  and  calls <b>getdata</b>() for each data cell.
               Implemented in <u>tbl_data.c</u>, called from <b>tbl_read</b>().

       <u>int</u> <b>tbl_cdata</b>(<u>struct</u> <u>tbl_node</u> <u>*tbl</u>, <u>int</u> <u>ln</u>, <u>const</u> <u>char</u> <u>*p</u>)
               Continues parsing a data line: When finding ‘T}’, switches back to TBL_PART_DATA mode  and  calls
               <b>getdata</b>()  if  there are more data cells on the line.  Otherwise, appends the data to the current
               data cell.  Implemented in <u>tbl_data.c</u>, called from <b>tbl_read</b>().

       <u>int</u> <b>getdata</b>(<u>struct</u> <u>tbl_node</u> <u>*tbl</u>, <u>struct</u> <u>tbl_span</u> <u>*dp</u>, <u>int</u> <u>ln</u>, <u>const</u> <u>char</u> <u>*p</u>, <u>int</u> <u>*pos</u>)
               Parses one data cell into one <u>struct</u> <u>tbl_dat</u>.  Implemented in <u>tbl_data.c</u>, called from  <b>tbl_data</b>()
               and <b>tbl_cdata</b>().

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/mandoc.1.html">mandoc</a></u>(1), <u><a href="../man3/mandoc.3.html">mandoc</a></u>(3), <u><a href="../man7/tbl.7.html">tbl</a></u>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       The  <b>tbl</b> library was written by Kristaps Dzonsons &lt;<u><a href="mailto:kristaps@bsd.lv">kristaps@bsd.lv</a></u>&gt; with contributions from Ingo Schwarze
       &lt;<u><a href="mailto:schwarze@openbsd.org">schwarze@openbsd.org</a></u>&gt;.

Debian                                          December 14, 2018                                         <u><a href="../man3/TBL.3.html">TBL</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>