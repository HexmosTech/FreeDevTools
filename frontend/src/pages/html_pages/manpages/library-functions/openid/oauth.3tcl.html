<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>oauth - oauth API base signature</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       oauth - oauth API base signature

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>oauth</b> <b>?1.0.4?</b>

       <b>::oauth::config</b>

       <b>::oauth::config</b> ?<u>options</u>...?

       <b>::oauth::header</b> <u>baseURL</u> ?<u>postQuery</u>?

       <b>::oauth::query</b> <u>baseURL</u> ?<u>postQuery</u>?

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>oauth</b>  package  provides  a  simple Tcl-only library for communication with <u>oauth</u> [<a href="http://oauth.net">http://oauth.net</a>]
       APIs.  This current version of the package supports the Oauth 1.0 Protocol,  as  specified  in  <u>RFC</u>  <u>5849</u>
       [<a href="http://tools.ietf.org/rfc/rfc5849.txt">http://tools.ietf.org/rfc/rfc5849.txt</a>].

</pre><h4><b>TLS</b> <b>SECURITY</b> <b>CONSIDERATIONS</b></h4><pre>
       This package uses the <b>TLS</b> package to handle the security for <b>https</b> urls and other socket connections.

       Policy  decisions like the set of protocols to support and what ciphers to use are not the responsibility
       of <b>TLS</b>, nor of this  package  itself  however.   Such  decisions  are  the  responsibility  of  whichever
       application  is  using  the package, and are likely influenced by the set of servers the application will
       talk to as well.

       For        example,        in        light        of        the        recent        <u>POODLE</u>        <u>attack</u>
       [<a href="http://googleonlinesecurity.blogspot.co.uk/2014/10/this-poodle-bites-exploiting-ssl-30.html">http://googleonlinesecurity.blogspot.co.uk/2014/10/this-poodle-bites-exploiting-ssl-30.html</a>]  discovered
       by Google many servers will  disable  support  for  the  SSLv3  protocol.   To  handle  this  change  the
       applications  using  <b>TLS</b>  must  be patched, and not this package, nor <b>TLS</b> itself.  Such a patch may be as
       simple as generally activating <b>tls1</b> support, as shown in the example below.

                  package require tls
                  tls::init -tls1 1 ;# forcibly activate support for the TLS1 protocol

                  ... your own application code ...

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::oauth::config</b>
              When this command is invoked without arguments it returns  a  dictionary  containing  the  current
              values of all options.

       <b>::oauth::config</b> ?<u>options</u>...?
              When invoked with arguments, options followed by their values, it is used to set and query various
              parameters  of  application  and client, like proxy host and user agent for the HTTP requests. The
              detailed list of options is below:

              <b>-accesstoken</b> <u>string</u>
                     This is the user's token.

              <b>-accesstokensecret</b> <u>string</u>
                     This is the user's secret token.

              <b>-consumerkey</b> <u>string</u>
                     This is the public token of your app.

              <b>-consumersecret</b> <u>string</u>
                     This is the private token of your app.

              <b>-debug</b> <u>bool</u>
                     The default value is <b>off</b>. If you change this option to <b>on</b>, the basic signature just created
                     will be printed to stdout, among other debug output.

              <b>-oauthversion</b> <u>version</u>
                     This is the version of the OAuth protocol to use.  At the moment only <b>1.0</b> is supported, the
                     default.

              <b>-proxyhost</b> <u>hostname</u>
                     You can set up a proxy host for send contact the oauth's api server.

              <b>-proxyport</b> <u>port-number</u>
                     Port number of your proxy.

              <b>-signmethod</b> <u>method</u>
                     The signature method to use. OAuth 1.0 only supports <b>HMAC-SHA1</b>, the default.

              <b>-timeout</b> <u>milliseconds</u>
                     Timeout in milliseconds for your query.  The default value is <b>6000</b>, i.e. 6 seconds.

              <b>-urlencoding</b> <u>encoding</u>
                     The encoding used for creating the x-url-encoded URLs with <b>::http::formatQuery</b>. The default
                     is <b>utf-8</b>, as specified by <u>RFC</u> <u>2718</u> [<a href="http://tools.ietf.org/rfc/rfc2718.txt">http://tools.ietf.org/rfc/rfc2718.txt</a>].

       <b>::oauth::header</b> <u>baseURL</u> ?<u>postQuery</u>?
              This command is the base signature creator. With proper settings for various  tokens  and  secrets
              (See <b>::oauth::config</b>) the result is the base authentication string to send to the server.

              You do not need to call this procedure to create the query because <b>::oauth::query</b> (see below) will
              do for it for you.  Doing so is useful for debugging purposes, though.

              url <u>baseURL</u>
                     This  argument  is the URI path to the OAuth API server.  If you plan send a GET query, you
                     should provide a full path.

                     HTTP GET
                     ::oauth::header {https://api.twitter.com/1.1/users/lookup.json?screen_name=AbiertaMente}

              url-encoded-string <u>postQuery</u>
                     When you have to send a header in POST format, you have to put the query string  into  this
                     argument.

                     ::oauth::header {https://api.twitter.com/1.1/friendships/create.json} {user_id=158812437&amp;follow=true}

       <b>::oauth::query</b> <u>baseURL</u> ?<u>postQuery</u>?
              This  procedure will use the settings made with <b>::oauth::config</b> to create the basic authentication
              and then send the command to the server API.  It takes the same arguments as <b>::oauth::header</b>.

              The returned result will be a list containing 2 elements. The first element will be  a  dictionary
              containing the HTTP header data response.  This allows you, for example, to check the X-Rate-Limit
              from  OAuth.   The  second  element will be the raw data returned from API server.  This string is
              usually a json object which can be further decoded with the functions  of  package  <b>json</b>,  or  any
              other json-parser for Tcl.

              Here  is  an  example  of  how  it would work in Twitter. Do not forget to replace the placeholder
              tokens and keys of the example with your own tokens and keys when trying it out.

              % package require oauth
              % package require json
              % oauth::config -consumerkey {your_consumer_key} -consumersecret {your_consumer_key_secret} -accesstoken {your_access_token} -accesstokensecret {your_access_token_secret}

              % set response [oauth::query https://api.twitter.com/1.1/users/lookup.json?screen_name=AbiertaMente]
              % set jsondata [lindex $response 1]
              % set data [json::json2dict $jsondata]
              $ set data [lindex $data 0]
              % dict for {key val} $data {puts "$key =&gt; $val"}
              id =&gt; 158812437
              id_str =&gt; 158812437
              name =&gt; Un Librepensador
              screen_name =&gt; AbiertaMente
              location =&gt; Explico mis tuits ahí →
              description =&gt; 160Caracteres para un SMS y contaba mi vida entera sin recortar vocales. Ahora en Twitter, podemos usar hasta 140 y a mí me sobrarían 20 para contaros todo lo q
              url =&gt; <a href="http://t.co/SGs3k9odBn">http://t.co/SGs3k9odBn</a>
              entities =&gt; url {urls {{url <a href="http://t.co/SGs3k9odBn">http://t.co/SGs3k9odBn</a> expanded_url <a href="http://librepensamiento.es">http://librepensamiento.es</a> display_url librepensamiento.es indices {0 22}}}} description {urls {}}
              protected =&gt; false
              followers_count =&gt; 72705
              friends_count =&gt; 53099
              listed_count =&gt; 258
              created_at =&gt; Wed Jun 23 18:29:58 +0000 2010
              favourites_count =&gt; 297
              utc_offset =&gt; 7200
              time_zone =&gt; Madrid
              geo_enabled =&gt; false
              verified =&gt; false
              statuses_count =&gt; 8996
              lang =&gt; es
              status =&gt; created_at {Sun Oct 12 08:02:38 +0000 2014} id 521209314087018496 id_str 521209314087018496 text {@thesamethanhim <a href="http://t.co/WFoXOAofCt">http://t.co/WFoXOAofCt</a>} source {&lt;a href="<a href="http://twitter.com">http://twitter.com</a>" rel="nofollow"&gt;Twitter Web Client&lt;/a&gt;} truncated false in_reply_to_status_id 521076457490350081 in_reply_to_status_id_str 521076457490350081 in_reply_to_user_id 2282730867 in_reply_to_user_id_str 2282730867 in_reply_to_screen_name thesamethanhim geo null coordinates null place null contributors null retweet_count 0 favorite_count 0 entities {hashtags {} symbols {} urls {{url <a href="http://t.co/WFoXOAofCt">http://t.co/WFoXOAofCt</a> expanded_url <a href="http://www.elmundo.es/internacional/2014/03/05/53173dc1268e3e3f238b458a.html">http://www.elmundo.es/internacional/2014/03/05/53173dc1268e3e3f238b458a.html</a> display_url elmundo.es/internacional/… indices {16 38}}} user_mentions {{screen_name thesamethanhim name Ἑλένη id 2282730867 id_str 2282730867 indices {0 15}}}} favorited false retweeted false possibly_sensitive false lang und
              contributors_enabled =&gt; false
              is_translator =&gt; true
              is_translation_enabled =&gt; false
              profile_background_color =&gt; 709397
              profile_background_image_url =&gt; <a href="http://pbs.twimg.com/profile_background_images/704065051/9309c02aa2728bdf543505ddbd408e2e.jpeg">http://pbs.twimg.com/profile_background_images/704065051/9309c02aa2728bdf543505ddbd408e2e.jpeg</a>
              profile_background_image_url_https =&gt; https://pbs.twimg.com/profile_background_images/704065051/9309c02aa2728bdf543505ddbd408e2e.jpeg
              profile_background_tile =&gt; true
              profile_image_url =&gt; <a href="http://pbs.twimg.com/profile_images/2629816665/8035fb81919b840c5cc149755d3d7b0b_normal.jpeg">http://pbs.twimg.com/profile_images/2629816665/8035fb81919b840c5cc149755d3d7b0b_normal.jpeg</a>
              profile_image_url_https =&gt; https://pbs.twimg.com/profile_images/2629816665/8035fb81919b840c5cc149755d3d7b0b_normal.jpeg
              profile_banner_url =&gt; https://pbs.twimg.com/profile_banners/158812437/1400828874
              profile_link_color =&gt; FF3300
              profile_sidebar_border_color =&gt; FFFFFF
              profile_sidebar_fill_color =&gt; A0C5C7
              profile_text_color =&gt; 333333
              profile_use_background_image =&gt; true
              default_profile =&gt; false
              default_profile_image =&gt; false
              following =&gt; true
              follow_request_sent =&gt; false
              notifications =&gt; false

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such in the category <u>oauth</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       RFC 2718, RFC 5849, oauth, twitter

</pre><h4><b>CATEGORY</b></h4><pre>
       Networking

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2014 Javi P. &lt;<a href="mailto:hxm@eggdrop.es">hxm@eggdrop.es</a>&gt;

tcllib                                                1.0.4                                          <u><a href="../man3tcl/oauth.3tcl.html">oauth</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>