<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net::OpenID::Server - Library for building your own OpenID server/provider</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnet-openid-server-perl">libnet-openid-server-perl_1.09-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Net::OpenID::Server - Library for building your own OpenID server/provider

</pre><h4><b>VERSION</b></h4><pre>
       version 1.09

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Net::OpenID::Server;

         my $nos = Net::OpenID::Server-&gt;new(
           args         =&gt; $cgi,
           get_user     =&gt; \&amp;get_user,
           get_identity =&gt; \&amp;get_identity,
           is_identity  =&gt; \&amp;is_identity,
           is_trusted   =&gt; \&amp;is_trusted,
           endpoint_url =&gt; "<a href="http://example.com/server.bml">http://example.com/server.bml</a>",
           setup_url    =&gt; "<a href="http://example.com/pass-identity.bml">http://example.com/pass-identity.bml</a>",
         );

         # From your OpenID server endpoint:

         my ($type, $data) = $nos-&gt;handle_page;
         if ($type eq "redirect") {
             WebApp::redirect_to($data);
         } elsif ($type eq "setup") {
             my %setup_opts = %$data;
             # ... show them setup page(s), with options from setup_map
             # it's then your job to redirect them at the end to "return_to"
             # (or whatever you've named it in setup_map)
         } else {
             WebApp::set_content_type($type);
             WebApp::print($data);
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is the Perl API for (the server half of) OpenID, a distributed identity system based on proving you
       own a URL, which is then your identity.  More information is available at:

         <a href="http://openid.net/">http://openid.net/</a>

       As of version 1.01 this module has support for both OpenID 1.1 and 2.0. Prior to this, only 1.1 was
       supported.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       Net::OpenID::Server-&gt;<b>new</b>([ %opts ])
           You  can  set  anything  in the constructor options that there are getters/setters methods for below.
           That includes: args, get_user, is_identity, is_trusted, setup_url,  and  setup_map.   See  below  for
           docs.

</pre><h4><b>METHODS</b></h4><pre>
       ($type, $data) = $nos-&gt;<b>handle_page</b>([ %opts ])
           Returns a $type and $data, where $type can be:

           "redirect"
               ...  in which case you redirect the user (via your web framework's redirect functionality) to the
               URL specified in $data.

           "setup"
               ... in which case you should show the user a page (or redirect them to one of your  pages)  where
               they  can  setup trust for the given "trust_root" in the hashref in $data, and then redirect them
               to "return_to" at the end.  Note that the parameters in the $data hashref are as you  named  them
               with setup_map.

           Some content type
               Otherwise,  set  the  content  type to $type and print the page out, the contents of which are in
               $data.

           The optional %opts may contain:

           "redirect_for_setup"
               If set to a true value, signals that you don't want  to  handle  the  "setup"  return  type  from
               handle_page,  and  you'd prefer it just be converted to a "redirect" type to your already-defined
               "setup_url", with the arguments from setup_map already appended.

       $url = $nos-&gt;<b>signed_return_url</b>( %opts )
           Generates a positive identity assertion URL that you'd redirect a user to.  Typically this  would  be
           after  they've  completed  your  setup_url.  Once trust has been setup, the "handle_page" method will
           redirect you to this signed return automatically.

           The URL generated is the consumer site's return_to URL, with a signed identity included  in  the  GET
           arguments.  The %opts are:

           "identity"
               Required.  The identity URL to sign.

           "claimed_id"
               Optional.  The claimed_id URL to sign.

           "return_to"
               Required.  The base of the URL being generated.

           "assoc_handle"
               The  association  handle to use for the signature.  If blank, dumb consumer mode is used, and the
               library picks the handle.

           "trust_root"
               Optional.  If present,  the  "return_to"  URL  will  be  checked  to  be  within  ("under")  this
               trust_root.  If not, the URL returned will be undef.

           "ns"
               Optional.

           "additional_fields"
               Optional.   If  present,  must be a hashref with keys starting with "\w+\.".  All keys and values
               will be returned in the response, and signed.  This is used for OpenID extensions.

       $url = $nos-&gt;<b>cancel_return_url</b>( %opts )
           Generates a cancel notice to the return_to URL, if a user declines to share  their  identity.   %opts
           are:

           "return_to"
               Required.  The base of the URL being generated.

       $nos-&gt;<b>args</b>
           Can be used in 1 of 3 ways:

           1. Setting the way which the Server instances obtains parameters:

           $nos-&gt;args( $reference )

           Where  $reference  is  either  a  HASH  ref, CODE ref, Apache $r (for get_args only), Apache::Request
           $apreq, or CGI.pm $cgi.  If a CODE ref, the subref must return the  value  given  one  argument  (the
           parameter to retrieve)

           2. Get a paramater:

           my $foo = $nos-&gt;get_args("foo");

           When  given  an  unblessed scalar, it retrieves the value.  It croaks if you haven't defined a way to
           get at the parameters.

           3. Get the getter:

           my $code = $nos-&gt;get_args;

           Without arguments, returns a subref that returns the value given a parameter name.

       $nos-&gt;<b>get_user</b>($code)
       $code = $nos-&gt;<b>get_user</b>; $u = $code-&gt;();
           Get/set the subref returning a defined value representing the logged in user, or undef  if  no  user.
           The  return  value (let's call it $u) is not touched.  It's simply given back to your other callbacks
           (is_identity and is_trusted).

       $nos-&gt;<b>get_identity</b>($code)
       $code = $nos-&gt;<b>get_identity</b>; $identity = $code-&gt;($u, $identity);
           For OpenID 2.0. Get/set the subref returning a identity. This is  called  when  claimed  identity  is
           'identifier_select'.

       $nos-&gt;<b>is_identity</b>($code)
       $code = $nos-&gt;<b>is_identity</b>; $code-&gt;($u, $identity_url)
           Get/set  the  subref  which  is responsible for returning true if the logged in user $u (which may be
           undef if user isn't logged in) owns the URL tree given by $identity_url.  Note that if $u  is  undef,
           your  function  should  always  return  0.   The  framework  doesn't  do  that  for you so you can do
           unnecessary work on purpose if you care about exposing information via timing attacks.

       $nos-&gt;<b>is_trusted</b>($code)
       $code = $nos-&gt;<b>is_trusted</b>; $code-&gt;($u, $trust_root, $is_identity)
           Get/set the subref which is responsible for returning true if the logged in user  $u  (which  may  be
           undef  if  user  isn't logged in) trusts the URL given by $trust_root to know his/her identity.  Note
           that if either $u is undef, or $is_identity is false (this is the result of your previous is_identity
           callback), you should return 0.  But your callback is always run so you can avoid timing attacks,  if
           you care.

       $nos-&gt;<b>server_secret</b>($scalar)
       $nos-&gt;<b>server_secret</b>($code)
       $code = $nos-&gt;<b>server_secret</b>; ($secret) = $code-&gt;($time);
           The  server secret is used to generate and sign lots of per-consumer secrets, and is never handed out
           directly.

           In the simplest (and least secure) form, you configure a static secret value with a scalar.   If  you
           use  this  method  and  change  the  scalar  value, all consumers that have cached their per-consumer
           secrets will start failing, since their secrets no longer work.

           The recommended usage, however, is to supply a subref that returns a secret  based  on  the  provided
           <u>$time</u>,  a  unix timestamp.  And if one doesn't exist for that time, create, store and return it (with
           appropriate locking so you never return different secrets for the same time.)  Your secret  can  just
           be  random  characters, but it's your responsibility to do the locking and storage.  If you want help
           generating random characters, call "Net::OpenID::Server::rand_chars($len)".

           Your secret may not exceed 255 characters.

       $nos-&gt;<b>setup_url</b>($url)
       $url = $nos-&gt;<b>setup_url</b>
           Get/set the user setup URL.  This is the URL the user is told to go to if they're either  not  logged
           in,  not  who  they  said  they  were, or trust hasn't been setup.  You use the same URL in all three
           cases.  Your setup URL may contain existing query parameters.

       $nos-&gt;<b>endpoint_url</b>($url)
       $url = $nos-&gt;<b>endpoint_url</b>
           For OpenID 2.0. Get/set the op_endpoint URL.

       $nos-&gt;<b>setup_map</b>($hashref)
       $hashref = $nos-&gt;<b>setup_map</b>
           When this module gives a consumer site a user_setup_url from your provided setup_url, it also has  to
           append a number of get parameters onto your setup_url, so your app based at that setup_url knows what
           it  has  to  setup.   Those  keys  are  named, by default, "trust_root", "return_to", "identity", and
           "assoc_handle".  If you don't like those parameter names, this $hashref setup_map lets you change one
           or more of them.  The hashref's keys should be the default values, with values  being  the  parameter
           names you want.

       Net::OpenID::Server-&gt;rand_chars($len)
           Utility  function  to  return  a  string of $len random characters.  May be called as package method,
           object method, or regular function.

       $nos-&gt;<b>err</b>
           Returns the last error, in form "errcode: errtext";

       $nos-&gt;<b>errcode</b>
           Returns the last error code.

       $nos-&gt;<b>errtext</b>
           Returns the last error text.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This module is Copyright (c) 2005 Brad Fitzpatrick.  All rights reserved.

       You may distribute under the terms of either the GNU General Public License or the Artistic  License,  as
       specified  in  the  Perl  README  file.   If  you  need  more liberal licensing terms, please contact the
       maintainer.

</pre><h4><b>WARRANTY</b></h4><pre>
       This is free software. IT COMES WITHOUT WARRANTY OF ANY KIND.

</pre><h4><b>MAILING</b> <b>LIST</b></h4><pre>
       The Net::OpenID family of modules has a mailing list powered by Google Groups. For more information,  see
       <a href="http://groups.google.com/group/openid-perl">http://groups.google.com/group/openid-perl</a> .

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       OpenID website:  <a href="http://openid.net/">http://openid.net/</a>

</pre><h4><b>AUTHORS</b></h4><pre>
       Brad Fitzpatrick &lt;<a href="mailto:brad@danga.com">brad@danga.com</a>&gt;

perl v5.36.0                                       2022-12-12                           <u>Net::OpenID::<a href="../man3pm/Server.3pm.html">Server</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>