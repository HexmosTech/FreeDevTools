<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>m17nInputMethod_-_Input_Method_(ba -  - API for Input method.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/m17n-docs">m17n-docs_1.8.4-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       m17nInputMethod_-_Input_Method_(ba -  - API for Input method.

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Data</b> <b>Structures</b>
       struct <b>MInputDriver</b>
           Structure of input method driver.
       struct <b>MInputMethod</b>
           Structure of input method.
       struct <b>MInputContext</b>
           Structure of input context.

   <b>Typedefs</b>
       typedef void(* <b>MInputCallbackFunc</b>) (<b>MInputContext</b> *ic, MSymbol command)
           Type of input method callback functions.

   <b>Enumerations</b>
       enum <b>MInputCandidatesChanged</b> { <b>MINPUT_CANDIDATES_LIST_CHANGED</b> = 1, <b>MINPUT_CANDIDATES_INDEX_CHANGED</b> = 2,
           <b>MINPUT_CANDIDATES_SHOW_CHANGED</b> = 4, <b>MINPUT_CANDIDATES_CHANGED_MAX</b> }
           Bit-masks to specify how candidates of input method is changed.
            "

   <b>Variables</b>
       MSymbol <b>Minput_method</b>
           Symbol whose name is 'input-method'.
       <b>MInputDriver</b> <b>minput_default_driver</b>
           The default driver for internal input methods.
       <b>MInputDriver</b> * <b>minput_driver</b>
           The driver for internal input methods.
       MSymbol <b>Minput_driver</b>

   <b>Variables:</b> <b>Predefined</b> <b>symbols</b> <b>for</b> <b>callback</b> <b>commands.</b> <b>&lt;br&gt;</b>
        These are the predefined symbols that are used as the COMMAND argument of callback functions of an input
       method driver (see <b>MInputDriver::callback_list</b>).

       Most of them do not require extra argument nor return any value; exceptions are these:

       <b>Minput_get_surrounding_text:</b> When a callback function assigned for this command is called, the first
       element of <b>MInputContext::plist</b> has key <b>Minteger</b> and the value specifies which portion of the surrounding
       text should be retrieved. If the value is positive, it specifies the number of characters following the
       current cursor position. If the value is negative, the absolute value specifies the number of characters
       preceding the current cursor position. If the value is zero, it means that the caller just wants to know
       if the surrounding text is currently supported or not.

       If the surrounding text is currently supported, the callback function must set the key of this element to
       <b>Mtext</b> and the value to the retrieved M-text. The length of the M-text may be shorter than the requested
       number of characters, if the available text is not that long. The length can be zero in the worst case.
       Or, the length may be longer if an application thinks it is more efficient to return that length.

       If the surrounding text is not currently supported, the callback function should return without changing
       the first element of <b>MInputContext::plist</b>.

       <b>Minput_delete_surrounding_text:</b> When a callback function assigned for this command is called, the first
       element of <b>MInputContext::plist</b> has key <b>Minteger</b> and the value specifies which portion of the surrounding
       text should be deleted in the same way as the case of Minput_get_surrounding_text. The callback function
       must delete the specified text. It should not alter <b>MInputContext::plist</b>.

       MSymbol <b>Minput_preedit_start</b>
       MSymbol <b>Minput_preedit_done</b>
       MSymbol <b>Minput_preedit_draw</b>
       MSymbol <b>Minput_status_start</b>
       MSymbol <b>Minput_status_done</b>
       MSymbol <b>Minput_status_draw</b>
       MSymbol <b>Minput_candidates_start</b>
       MSymbol <b>Minput_candidates_done</b>
       MSymbol <b>Minput_candidates_draw</b>
       MSymbol <b>Minput_set_spot</b>
       MSymbol <b>Minput_toggle</b>
       MSymbol <b>Minput_reset</b>
       MSymbol <b>Minput_get_surrounding_text</b>
       MSymbol <b>Minput_delete_surrounding_text</b>

   <b>Variables:</b> <b>Predefined</b> <b>symbols</b> <b>for</b> <b>special</b> <b>input</b> <b>events.</b>
        These are the predefined symbols that are used as the KEY argument of <b>minput_filter()</b>.

       MSymbol <b>Minput_focus_out</b>
       MSymbol <b>Minput_focus_in</b>
       MSymbol <b>Minput_focus_move</b>

   <b>Variables:</b> <b>Predefined</b> <b>symbols</b> <b>used</b> <b>in</b> <b>input</b> <b>method</b> <b>information.</b> <b>&lt;br&gt;</b>
       MSymbol <b>Minherited</b>
       MSymbol <b>Mcustomized</b>
       MSymbol <b>Mconfigured</b>

   <b>Functions</b>
       <b>MInputMethod</b> * <b>minput_open_im</b> (MSymbol language, MSymbol name, void *arg)
           Open an input method.
       void <b>minput_close_im</b> (<b>MInputMethod</b> *im)
           Close an input method.
       <b>MInputContext</b> * <b>minput_create_ic</b> (<b>MInputMethod</b> *im, void *arg)
           Create an input context.
       void <b>minput_destroy_ic</b> (<b>MInputContext</b> *ic)
           Destroy an input context.
       int <b>minput_filter</b> (<b>MInputContext</b> *ic, MSymbol key, void *arg)
           Filter an input key.
       int <b>minput_lookup</b> (<b>MInputContext</b> *ic, MSymbol key, void *arg, <b>MText</b> *mt)
           Look up a text produced in the input context.
       void <b>minput_set_spot</b> (<b>MInputContext</b> *ic, int x, int y, int ascent, int descent, int fontsize, <b>MText</b> *mt,
           int pos)
           Set the spot of the input context.
       void <b>minput_toggle</b> (<b>MInputContext</b> *ic)
           Toggle input method.
       void <b>minput_reset_ic</b> (<b>MInputContext</b> *ic)
           Reset an input context.
       <b>MPlist</b> * <b>minput_get_title_icon</b> (MSymbol language, MSymbol name)
           Get title and icon filename of an input method.
       <b>MText</b> * <b>minput_get_description</b> (MSymbol language, MSymbol name)
           Get description text of an input method.
       <b>MPlist</b> * <b>minput_get_command</b> (MSymbol language, MSymbol name, MSymbol command)
       int <b>minput_config_command</b> (MSymbol language, MSymbol name, MSymbol command, <b>MPlist</b> *keyseqlist)
       <b>MPlist</b> * <b>minput_get_variable</b> (MSymbol language, MSymbol name, MSymbol variable)
       int <b>minput_config_variable</b> (MSymbol language, MSymbol name, MSymbol variable, <b>MPlist</b> *value)
           Configure the value of an input method variable.
       char * <b>minput_config_file</b> ()
           Get the name of per-user customization file.
       int <b>minput_save_config</b> (void)
           Save configurations in per-user customization file.
       <b>MPlist</b> * <b>minput_list</b> (MSymbol language)

   <b>Obsolete</b> <b>functions</b>
       <b>MPlist</b> * <b>minput_get_variables</b> (MSymbol language, MSymbol name)
       int <b>minput_set_variable</b> (MSymbol language, MSymbol name, MSymbol variable, void *value)
           Set the initial value of an input method variable.
       <b>MPlist</b> * <b>minput_get_commands</b> (MSymbol language, MSymbol name)
           Get information about input method commands.
       int <b>minput_assign_command_keys</b> (MSymbol language, MSymbol name, MSymbol command, <b>MPlist</b> *keyseq)
           Assign a key sequence to an input method command (obsolete).
       <b>MPlist</b> * <b>minput_parse_im_names</b> (<b>MText</b> *mt)
           Parse input method names.
       int <b>minput_callback</b> (<b>MInputContext</b> *ic, MSymbol command)
           Call a callback function.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       API for Input method.

       An input method is an object to enable inputting various characters. An input method is identified by a
       pair of symbols, LANGUAGE and NAME. This pair decides an input method driver of the input method. An
       input method driver is a set of functions for handling the input method. There are two kinds of input
       methods; internal one and foreign one.

       • Internal Input Method
       An  internal  input method has non Mnil LANGUAGE, and its body is defined in the m17n database by the tag
       &lt;Minput_method, LANGUAGE, NAME&gt;. For this kind of input methods, the m17n  library  uses  two  predefined
       input  method  drivers,  one  for  CUI  use  and  the  other for GUI use. Those drivers utilize the input
       processing engine provided by the m17n library itself. The m17n database may provide input  methods  that
       are not limited to a specific language. The database uses Mt as LANGUAGE of those input methods.
       An  internal input method accepts an input key which is a symbol associated with an input event. As there
       is no way for the m17n library to know how input events are represented in  an  application  program,  an
       application programmer has to convert an input event to an input key by himself. See the documentation of
       the function <b>minput_event_to_key()</b> for the detail.
       • Foreign  Input  Method A foreign input method has Mnil LANGUAGE, and its body is defined in an external
         resource (e.g. XIM of X Window System). For this kind of input methods, the symbol  NAME  must  have  a
         property of key <b>Minput_driver</b>, and the value must be a pointer to an input method driver. Therefore, by
         preparing  a  proper  driver,  any  kind  of  input  method can be treated in the framework of the m17n
         library.
       For convenience, the m17n-X library provides an input method driver  that  enables  the  input  style  of
       OverTheSpot  for  XIM, and stores <b>Minput_driver</b> property of the symbol Mxim with a pointer to the driver.
       See the documentation of m17n GUI API for the detail.
       PROCESSING FLOW
       The typical processing flow of handling an input method is:
       • open an input method
       • create an input context for the input method
       • filter an input key
       • look up a produced text in the input context

</pre><h4><b>Data</b> <b>Structure</b> <b>Documentation</b></h4><pre>
   <b>MInputDriver</b>
       Structure of input method driver.

       <b>FIELD</b> <b>DOCUMENTATION:</b>
       <b>int(*</b> <b>MInputDriver::open_im)</b> <b>(MInputMethod</b> <b>*im)</b>

       Open an input method. This function opens the input method <b>im</b>. It is called from the function
       <b>minput_open_im()</b> after all member of <b>im</b> but &lt;info&gt; set. If opening <b>im</b> succeeds, it returns 0. Otherwise,
       it returns -1. The function can setup <b>im-&gt;info</b> to keep various information that is referred by the other
       driver functions.

       <b>void(*</b> <b>MInputDriver::close_im)</b> <b>(MInputMethod</b> <b>*im)</b>

       Close an input method. This function closes the input method <b>im</b>. It is called from the function
       <b>minput_close_im()</b>. It frees all memory allocated for <b>im-&gt;info</b> (if any) after finishing all the tasks of
       closing the input method. But, the other members of <b>im</b> should not be touched.

       <b>int(*</b> <b>MInputDriver::create_ic)</b> <b>(MInputContext</b> <b>*ic)</b>

       Create an input context. This function creates the input context <b>ic</b>. It is called from the function
       <b>minput_create_ic()</b> after all members of <b>ic</b> but &lt;info&gt; are set. If creating <b>ic</b> succeeds, it returns 0.
       Otherwise, it returns -1. The function can setup <b>ic-&gt;info</b> to keep various information that is referred by
       the other driver functions.

       <b>void(*</b> <b>MInputDriver::destroy_ic)</b> <b>(MInputContext</b> <b>*ic)</b>

       Destroy an input context. This function is called from the function <b>minput_destroy_ic()</b> and destroys the
       input context <b>ic</b>. It frees all memory allocated for <b>ic-&gt;info</b> (if any) after finishing all the tasks of
       destroying the input method. But, the other members of <b>ic</b> should not be touched.

       <b>int(*</b> <b>MInputDriver::filter)</b> <b>(MInputContext</b> <b>*ic,</b> <b>MSymbol</b> <b>key,</b> <b>void</b> <b>*arg)</b>

       Filter an input key. This function is called from the function <b>minput_filter()</b> and filters an input key.
       <b>key</b> and <b>arg</b> are the same as what given to <b>minput_filter()</b>.
       The task of the function is to handle <b>key</b>, update the internal state of <b>ic</b>. If <b>key</b> is absorbed by the
       input method and no text is produced, it returns 1. Otherwise, it returns 0.
       It may update <b>ic-&gt;status</b>, <b>ic-&gt;preedit</b>, <b>ic-&gt;cursor_pos</b>, <b>ic-&gt;ncandidates</b>, <b>ic-&gt;candidates</b>, and <b>ic-&gt;produced</b>
       if that is necessary for the member &lt;callback&gt;.
       The meaning of <b>arg</b> depends on the input method river. See the documentation of minput_default_driver and
       minput_gui_driver for instance.

       <b>int(*</b> <b>MInputDriver::lookup)</b> <b>(MInputContext</b> <b>*ic,</b> <b>MSymbol</b> <b>key,</b> <b>void</b> <b>*arg,</b> <b>MText</b> <b>*mt)</b>

       Lookup a produced text in an input context. It is called from the function <b>minput_lookup()</b> and looks up a
       produced text in the input context <b>ic</b>. This function concatenate a text produced by the input key <b>key</b> (if
       any) to M-text <b>mt</b>. If <b>key</b> was correctly handled by the input method of <b>ic</b>, it returns 0. Otherwise, it
       returns 1.
       The meaning of <b>arg</b> depends on the input method driver. See the documentation of minput_default_driver and
       minput_gui_driver for instance.

       <b>MPlist*</b> <b>MInputDriver::callback_list</b>

       List of callback functions. List of callback functions. Keys are one of <b>Minput_preedit_start</b>,
       <b>Minput_preedit_draw</b>, <b>Minput_preedit_done</b>, <b>Minput_status_start</b>, <b>Minput_status_draw</b>, <b>Minput_status_done</b>,
       <b>Minput_candidates_start</b>, <b>Minput_candidates_draw</b>, <b>Minput_candidates_done</b>, <b>Minput_set_spot</b>, <b>Minput_toggle</b>,
       <b>Minput_reset</b>, <b>Minput_get_surrounding_text</b>, <b>Minput_delete_surrounding_text</b>. Values are functions of type
       <b>MInputCallbackFunc</b>.

   <b>MInputMethod</b>
       Structure of input method.

       <b>FIELD</b> <b>DOCUMENTATION:</b>
       <b>MSymbol</b> <b>MInputMethod::language</b> Which language this input method is for. The value is Mnil if the input
       method is foreign.

       <b>MSymbol</b> <b>MInputMethod::name</b> Name of the input method. If the input method is foreign, it must has a
       property of key Minput_driver and the value must be a pointer to a proper input method driver.

       <b>MInputDriver</b> <b>MInputMethod::driver</b> <b>Input</b> <b>method</b> <b>driver</b> <b>of</b> <b>the</b> <b>input</b> <b>method.</b>
       <b>void*</b> <b>MInputMethod::arg</b> The argument given to <b>minput_open_im()</b>.
       <b>void*</b> <b>MInputMethod::info</b> Pointer to extra information that &lt;driver&gt;.open_im() setups.

   <b>MInputContext</b>
       Structure of input context.

       <b>FIELD</b> <b>DOCUMENTATION:</b>
       <b>MInputMethod*</b> <b>MInputContext::im</b> <b>Backward</b> <b>pointer</b> <b>to</b> <b>the</b> <b>input</b> <b>method.</b> <b>It</b> <b>is</b> <b>set</b> <b>up</b> <b>by</b> <b>the</b> <b>function</b>
       <b>minput_create_ic().</b>

       <b>MText*</b> <b>MInputContext::produced</b> <b>M-text</b> <b>produced</b> <b>by</b> <b>the</b> <b>input</b> <b>method.</b> <b>It</b> <b>is</b> <b>set</b> <b>up</b> <b>by</b> <b>the</b> <b>function</b>
       <b>minput_filter()</b> <b>.</b>

       <b>void*</b> <b>MInputContext::arg</b> Argument given to the function <b>minput_create_ic()</b>.
       <b>int</b> <b>MInputContext::active</b> Flag telling whether the input context is currently active or inactive. The
       value is set to 1 (active) when the input context is created. It is toggled by the function
       <b>minput_toggle()</b>.

       <b>int</b> <b>MInputContext::x</b> X and Y coordinate of the spot.
       <b>int</b> <b>MInputContext::y</b>

       <b>int</b> <b>MInputContext::ascent</b> Ascent and descent pixels of the line of the spot.
       <b>int</b> <b>MInputContext::descent</b>

       <b>int</b> <b>MInputContext::fontsize</b> Font size for preedit text in 1/10 point.
       <b>MText*</b> <b>MInputContext::mt</b> <b>M-text</b> <b>at</b> <b>the</b> <b>spot,</b> <b>or</b> <b>NULL.</b>
       <b>int</b> <b>MInputContext::pos</b> Character position in &lt;mt&gt; at the spot.
       <b>struct</b> <b>{</b> <b>...</b> <b>}</b>  <b>MInputContext::spot</b> Spot location and size of the input context.
       <b>void*</b> <b>MInputContext::info</b> The usage of the following members depends on the input method driver. The
       descriptions below are for the driver of an internal input method. They are set by the function
       &lt;im&gt;-&gt;driver.filter().
        Pointer to extra information that &lt;im&gt;-&gt;driver.create_ic() setups. It is used to record the internal
       state of the input context.

       <b>MText*</b> <b>MInputContext::status</b> <b>M-text</b> <b>describing</b> <b>the</b> <b>current</b> <b>status</b> <b>of</b> <b>the</b> <b>input</b> <b>context.</b>

       <b>int</b> <b>MInputContext::status_changed</b> The function &lt;im&gt;-&gt;driver.filter() sets the value to 1 when it changes
       &lt;status&gt;.

       <b>MText*</b> <b>MInputContext::preedit</b> <b>M-text</b> <b>containing</b> <b>the</b> <b>current</b> <b>preedit</b> <b>text.</b> <b>The</b> <b>function</b>
       <b>&lt;im&gt;-&gt;driver.filter()</b> <b>sets</b> <b>the</b> <b>value.</b>

       <b>int</b> <b>MInputContext::preedit_changed</b> The function &lt;im&gt;-&gt;driver.filter() sets the value to 1 when it changes
       &lt;preedit&gt;.

       <b>int</b> <b>MInputContext::cursor_pos</b> Cursor position of &lt;preedit&gt;.
       <b>int</b> <b>MInputContext::cursor_pos_changed</b> The function &lt;im&gt;-&gt;driver.filter() sets the value to 1 when it
       changes &lt;cursor_pos&gt;.

       <b>MPlist*</b> <b>MInputContext::candidate_list</b> <b>Plist</b> <b>of</b> <b>the</b> <b>current</b> <b>candidate</b> <b>groups.</b> <b>Each</b> <b>element</b> <b>is</b> <b>an</b> <b>M-text</b> <b>or</b>
       <b>a</b> <b>plist.</b> <b>If</b> <b>an</b> <b>element</b> <b>is</b> <b>an</b> <b>M-text</b> <b>(i.e.</b> <b>the</b> <b>key</b> <b>is</b> <b>Mtext),</b> <b>candidates</b> <b>in</b> <b>that</b> <b>group</b> <b>are</b> <b>characters</b> <b>in</b>
       <b>the</b> <b>M-text.</b> <b>If</b> <b>it</b> <b>is</b> <b>a</b> <b>plist</b> <b>(i.e.</b> <b>the</b> <b>key</b> <b>is</b> <b>Mplist),</b> <b>each</b> <b>element</b> <b>is</b> <b>an</b> <b>M-text,</b> <b>and</b> <b>candidates</b> <b>in</b> <b>that</b>
       <b>group</b> <b>are</b> <b>those</b> <b>M-texts.</b>

       <b>int</b> <b>MInputContext::candidate_index</b> Index number of the currently selected candidate in all the
       candidates. The index of the first candidate is 0. If the number is 8, and the first candidate group
       contains 7 candidates, the currently selected candidate is the second element of the second candidate
       group.

       <b>int</b> <b>MInputContext::candidate_from</b> Start and the end positions of the preedit text where &lt;candidate_list&gt;
       corresponds to.

       <b>int</b> <b>MInputContext::candidate_to</b>

       <b>int</b> <b>MInputContext::candidate_show</b> Flag telling whether the current candidate group must be shown or not.
       The function &lt;im&gt;-&gt;driver.filter() sets the value to 1 when an input method required to show candidates,
       and sets the value to 0 otherwise.

       <b>int</b> <b>MInputContext::candidates_changed</b> The function &lt;im&gt;-&gt;driver.filter() sets the value to bitwise OR of
       enum MInputCandidatesChanged when it changed any of the above members (&lt;candidate_XXX&gt;), and sets the
       value to 0 otherwise.

       <b>MPlist*</b> <b>MInputContext::plist</b> <b>Plist</b> <b>that</b> <b>can</b> <b>be</b> <b>freely</b> <b>used</b> <b>by</b> <b>&lt;im&gt;-&gt;driver</b> <b>functions.</b> <b>The</b> <b>driver</b> <b>of</b>
       <b>internal</b> <b>input</b> <b>method</b> <b>uses</b> <b>it</b> <b>to</b> <b>exchange</b> <b>extra</b> <b>arguments</b> <b>and</b> <b>result</b> <b>for</b> <b>callback</b> <b>functions.</b> <b>The</b> <b>function</b>
       <b>&lt;im&gt;-&gt;driver.create_ic()</b> <b>sets</b> <b>this</b> <b>to</b> <b>an</b> <b>empty</b> <b>plist,</b> <b>and</b> <b>the</b> <b>function</b> <b>&lt;im&gt;-&gt;driver.destroy_ic()</b> <b>frees</b> <b>it</b>
       <b>by</b> <b>using</b> <b>m17n_object_unref().</b>

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>void(*</b> <b>MInputCallbackFunc)</b> <b>(MInputContext</b> <b>*ic,</b> <b>MSymbol</b> <b>command)</b>
       Type of input method callback functions. This is the type of callback functions called from input method
       drivers. <b>ic</b> is a pointer to an input context, <b>command</b> is a name of callback for which the function is
       called.

</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>MInputCandidatesChanged</b>
       Bit-masks to specify how candidates of input method is changed.

       <b>Enumerator</b>
       <u>MINPUT_CANDIDATES_LIST_CHANGED</u>
       <u>MINPUT_CANDIDATES_INDEX_CHANGED</u>
       <u>MINPUT_CANDIDATES_SHOW_CHANGED</u>
       <u>MINPUT_CANDIDATES_CHANGED_MAX</u>
</pre><h4><b>Variable</b> <b>Documentation</b></h4><pre>
   <b>MSymbol</b> <b>Minput_method</b>
       Symbol whose name is 'input-method'.
   <b>MSymbol</b> <b>Minput_preedit_start</b>
   <b>MSymbol</b> <b>Minput_preedit_done</b>
   <b>MSymbol</b> <b>Minput_preedit_draw</b>
   <b>MSymbol</b> <b>Minput_status_start</b>
   <b>MSymbol</b> <b>Minput_status_done</b>
   <b>MSymbol</b> <b>Minput_status_draw</b>
   <b>MSymbol</b> <b>Minput_candidates_start</b>
   <b>MSymbol</b> <b>Minput_candidates_done</b>
   <b>MSymbol</b> <b>Minput_candidates_draw</b>
   <b>MSymbol</b> <b>Minput_set_spot</b>
   <b>MSymbol</b> <b>Minput_toggle</b>
   <b>MSymbol</b> <b>Minput_reset</b>
   <b>MSymbol</b> <b>Minput_get_surrounding_text</b>
   <b>MSymbol</b> <b>Minput_delete_surrounding_text</b>
   <b>MSymbol</b> <b>Minput_focus_out</b>
   <b>MSymbol</b> <b>Minput_focus_in</b>
   <b>MSymbol</b> <b>Minput_focus_move</b>
   <b>MSymbol</b> <b>Minherited</b>
       These are the predefined symbols describing status of input method command and variable, and are used  in
       a return value of <b>minput_get_command()</b> and <b>minput_get_variable()</b>.

   <b>MSymbol</b> <b>Mcustomized</b>
   <b>MSymbol</b> <b>Mconfigured</b>
   <b>MInputDriver</b> <b>minput_default_driver</b>
       The  default  driver for internal input methods. The variable <b>minput_default_driver</b> is the default driver
       for internal input methods.
       The member <b>MInputDriver::open_im()</b> searches the m17n database for an input method that matches the tag  &lt;
       <b>Minput_method</b>, <b>language</b>, <b>name&gt;</b> and loads it.
       The  member  <b>MInputDriver::callback_list()</b> is NULL. Thus, it is programmers responsibility to set it to a
       plist of proper callback functions. Otherwise, no feedback information (e.g. preedit text) can  be  shown
       to users.
       The  macro <b>M17N_INIT()</b> sets the variable <b>minput_driver</b> to the pointer to this driver so that all internal
       input methods use it.
       Therefore, unless minput_driver is set differently, the driver dependent arguments <b>arg</b> of  the  functions
       whose name begins with 'minput_' are all ignored.

   <b>MInputDriver*</b> <b>minput_driver</b>
       The driver for internal input methods. The variable <b>minput_driver</b> is a pointer to the input method driver
       that  is  used  by  internal  input  methods.  The  macro  <b>M17N_INIT()</b>  initializes  it  to  a pointer to
       <b>minput_default_driver</b> if &lt;m17n.h&gt; is included.

   <b>MSymbol</b> <b>Minput_driver</b>
       The variable <b>Minput_driver</b> is a symbol for a foreign input method.  See  <b>foreign</b>  <b>input</b>  <b>method</b>  for  the
       detail.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for The m17n Library from the source code.
</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>MPlist*</b> <b>minput_get_variables</b> <b>(MSymbol</b> <b>language,</b> <b>MSymbol</b> <b>name)</b>
       @brief Get a list of variables of an input method (obsolete).

       This function is obsolete.  Use minput_get_variable() instead.

       The minput_get_variables() function returns a plist (#MPlist) of
       variables used to control the behavior of the input method
       specified by @b language and @b name.  The plist is @e well-formed
       (@ref m17nPlist) of the following format:

           (VARNAME (DOC-MTEXT DEFAULT-VALUE [ VALUE ... ] )
            VARNAME (DOC-MTEXT DEFAULT-VALUE [ VALUE ... ] )
            ...)

       @c VARNAME is a symbol representing the variable name.

       @c DOC-MTEXT is an M-text describing the variable.

       @c DEFAULT-VALUE is the default value of the variable.  It is a
       symbol, integer, or M-text.

       @c VALUEs (if any) specifies the possible values of the variable.
       If @c DEFAULT-VALUE is an integer, @c VALUE may be a plist (@c FROM
       @c TO), where @c FROM and @c TO specifies a range of possible
       values.

       For instance, suppose an input method has the variables:

       @li name:intvar, description:"value is an integer",
            initial value:0, value-range:0..3,10,20

       @li name:symvar, description:"value is a symbol",
            initial value:nil, value-range:a, b, c, nil

       @li name:txtvar, description:"value is an M-text",
            initial value:empty text, no value-range (i.e. any text)

       Then, the returned plist is as follows.

           (intvar ("value is an integer" 0 (0 3) 10 20)
            symvar ("value is a symbol" nil a b c nil)
            txtvar ("value is an M-text" ""))

       @par Return value:
       If the input method uses any variables, a pointer to #MPlist is
       returned.  As the plist is kept in the library, the caller must not
       modify nor free it.  If the input method does not use any
       variable, @c NULL is returned.

   <b>int</b> <b>minput_set_variable</b> <b>(MSymbol</b> <b>language,</b> <b>MSymbol</b> <b>name,</b> <b>MSymbol</b> <b>variable,</b> <b>void</b> <b>*</b> <b>value)</b>
       Set  the  initial  value of an input method variable. The <b>minput_set_variable()</b> function sets the initial
       value of input method variable <b>variable</b> to <b>value</b> for the input method specified by <b>language</b> and <b>name</b>.
       By default, the initial value is 0.
       This setting gets effective in a newly opened input method.
       <b>RETURN</b> <b>VALUE</b>

           <b>If</b> <b>the</b> <b>operation</b> <b>was</b> <b>successful,</b> <b>0</b> <b>is</b> <b>returned.</b> <b>Otherwise</b> <b>-1</b> <b>is</b> <b>returned,</b> <b>and</b> <b>merror_code</b> <b>is</b>  <b>set</b>  <b>to</b>
           <b>MERROR_IM.</b>

   <b>MPlist*</b> <b>minput_get_commands</b> <b>(MSymbol</b> <b>language,</b> <b>MSymbol</b> <b>name)</b>
       Get information about input method commands. The <b>minput_get_commands()</b> function returns information about
       input  method  commands  of the input method specified by <b>language</b> and <b>name</b>. An input method command is a
       pseudo key event to which one or more actual input key sequences are assigned.
       There are two kinds of commands, global and local. Global commands are used by multiple input methods for
       the same purpose, and have global key assignments. Local commands are  used  only  by  a  specific  input
       method, and have only local key assignments.
       Each input method may locally change key assignments for global commands. The global key assignment for a
       global  command  is  effective only when the current input method does not have local key assignments for
       that command.
       If <b>name</b> is <b>Mnil</b>, information about global commands is returned. In this case <b>language</b> is ignored.
       If <b>name</b> is not <b>Mnil</b>, information about those commands that have local key assignments in the input method
       specified by <b>language</b> and <b>name</b> is returned.
       <b>RETURN</b> <b>VALUE</b>

           <b>If</b> <b>no</b> <b>input</b> <b>method</b> <b>commands</b> <b>are</b> <b>found,</b> <b>this</b> <b>function</b> <b>returns</b> <b>NULL.</b>
       Otherwise, a pointer to a plist is  returned.  The  key  of  each  element  in  the  plist  is  a  symbol
       representing a command, and the value is a plist of the form COMMAND-INFO described below.
       The first element of COMMAND-INFO has the key <b>Mtext</b>, and the value is an M-text describing the command.
       If  there  are no more elements, that means no key sequences are assigned to the command. Otherwise, each
       of the remaining elements has the key <b>Mplist</b>, and the value is a plist whose keys are <b>Msymbol</b> and  values
       are symbols representing input keys, which are currently assigned to the command.
       As the returned plist is kept in the library, the caller must not modify nor free it.

   <b>int</b> <b>minput_assign_command_keys</b> <b>(MSymbol</b> <b>language,</b> <b>MSymbol</b> <b>name,</b> <b>MSymbol</b> <b>command,</b> <b>MPlist</b> <b>*</b> <b>keyseq)</b>
       Assign  a  key  sequence  to  an  input  method  command  (obsolete).  This  function  is  obsolete.  Use
       <b>minput_config_command()</b> instead.
       The <b>minput_assign_command_keys()</b> function assigns input key  sequence  <b>keyseq</b>  to  input  method  command
       <b>command</b>  for  the  input  method  specified  by  <b>language</b>  and <b>name</b>. If <b>name</b> is <b>Mnil</b>, the key sequence is
       assigned globally no matter what <b>language</b> is. Otherwise the key sequence is assigned locally.
       Each element of <b>keyseq</b> must have the key <b>msymbol</b> and the value must be a  symbol  representing  an  input
       key.
       <b>keyseq</b> may be NULL, in which case, all assignments are deleted globally or locally.
       This assignment gets effective in a newly opened input method.
       <b>RETURN</b> <b>VALUE</b>

           <b>If</b>  <b>the</b>  <b>operation</b> <b>was</b> <b>successful,</b> <b>0</b> <b>is</b> <b>returned.</b> <b>Otherwise</b> <b>-1</b> <b>is</b> <b>returned,</b> <b>and</b> <b>merror_code</b> <b>is</b> <b>set</b> <b>to</b>
           <b>MERROR_IM.</b>

   <b>MPlist*</b> <b>minput_parse_im_names</b> <b>(MText</b> <b>*</b> <b>mt)</b>
       Parse input method names. The <b>minput_parse_im_names()</b> function parses M-text <b>mt</b> and  returns  a  list  of
       input  method  names.  Input  method  names  in  <b>mt</b> must be separated by comma (','). Input methods whose
       language is <b>Mt</b> can be specified by its name only (i.e. just 'latn-post' instead of 't-latn-post').
       <b>RETURN</b> <b>VALUE</b>

           <b>The</b> <b>minput_parse_im_names()</b> <b>returns</b> <b>a</b> <b>plist</b> <b>of</b> <b>which</b> <b>elements</b> <b>are</b> <b>plist</b> <b>of</b> <b>LANGUAGE</b> <b>and</b> <b>NAME</b> <b>of</b> <b>input</b>
           <b>methods</b> <b>as</b> <b>below:</b> <b>((LANGUAGE1</b> <b>NAME1)</b> <b>(LANGUAGE2</b> <b>NAME2)</b> <b>...)</b> <b>Both</b> <b>LANGUAGEn</b>  <b>and</b>  <b>NAMEn</b>  <b>are</b>  <b>symbols.</b>
           <b>LANGUAGEn</b>  <b>is</b>  <b>Mt</b>  <b>if</b>  <b>the</b>  <b>corresponding</b>  <b>input</b>  <b>method</b>  <b>is</b> <b>not</b> <b>limited</b> <b>to</b> <b>a</b> <b>specific</b> <b>language.</b> <b>If</b> <b>a</b>
           <b>specified</b> <b>input</b> <b>method</b> <b>doesn't</b> <b>exist,</b> <b>the</b> <b>corresponding</b> <b>element</b> <b>in</b> <b>the</b> <b>above</b> <b>plist</b> <b>is</b> <b>a</b>  <b>sub-part</b>  <b>of</b>
           <b>mt</b> <b>for</b> <b>that</b> <b>non-existing</b> <b>input</b> <b>method</b> <b>name.</b> <b>For</b> <b>instance,</b> <b>if</b> <b>'symbol,unknown,unicode'</b> <b>is</b> <b>specified</b> <b>as</b>
           <b>mt</b> <b>and</b> <b>'unknown'</b> <b>doesn't</b> <b>exist,</b> <b>the</b> <b>return</b> <b>value</b> <b>is:</b> <b>((t</b> <b>symbol)</b> <b>'unknown'</b> <b>(t</b> <b>unicode))</b>

   <b>int</b> <b>minput_callback</b> <b>(MInputContext</b> <b>*</b> <b>ic,</b> <b>MSymbol</b> <b>command)</b>
       Call  a callback function. The <b>minput_callback()</b> functions calls a callback function <b>command</b> assigned for
       the input context <b>ic</b>. The caller must set  specific  elements  in  <b>ic-&gt;plist</b>  if  the  callback  function
       requires.
       <b>RETURN</b> <b>VALUE</b>

           <b>If</b>  <b>there</b>  <b>exists</b>  <b>a</b>  <b>specified</b>  <b>callback</b>  <b>function,</b> <b>0</b> <b>is</b> <b>returned.</b> <b>Otherwise</b> <b>-1</b> <b>is</b> <b>returned.</b> <b>By</b> <b>side</b>
           <b>effects,</b> <b>ic-&gt;plist</b> <b>may</b> <b>be</b> <b>modified.</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2001 Information-technology Promotion Agency (IPA)
       Copyright (C) 2001-2011 National Institute of Advanced Industrial Science and Technology (AIST)
       Permission is granted to copy, distribute and/or modify this document under the terms  of  the  GNU  Free
       Documentation License &lt;<a href="http://www.gnu.org/licenses/fdl.html">http://www.gnu.org/licenses/fdl.html</a>&gt;.

Version 1.8.4                                    Mon Sep 25 2023                          <u><a href="../man3m17n/m17nInputMethod.3m17n.html">m17nInputMethod</a></u>(3m17n)
</pre>
 </div>
</div></section>
</div>
</body>
</html>