<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pop3d - Tcl POP3 server implementation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pop3d - Tcl POP3 server implementation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>pop3d</b> <b>?1.2.0?</b>

       <b>::pop3d::new</b> ?<u>serverName</u>?

       <b>serverName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <u>serverName</u> <b>up</b>

       <u>serverName</u> <b>down</b>

       <u>serverName</u> <b>destroy</b> ?<u>mode</u>?

       <u>serverName</u> <b>configure</b>

       <u>serverName</u> <b>configure</b> <u>-option</u>

       <u>serverName</u> <b>configure</b> <u>-option</u> <u>value</u>...

       <u>serverName</u> <b>cget</b> <u>-option</u>

       <u>serverName</u> <b>conn</b> list

       <u>serverName</u> <b>conn</b> state <u>id</u>

       <u>authCmd</u> <b>exists</b> <u>name</u>

       <u>authCmd</u> <b>lookup</b> <u>name</u>

       <u>storageCmd</u> <b>dele</b> <u>mbox</u> <u>msgList</u>

       <u>storageCmd</u> <b>lock</b> <u>mbox</u>

       <u>storageCmd</u> <b>unlock</b> <u>mbox</u>

       <u>storageCmd</u> <b>size</b> <u>mbox</u> ?<u>msgId</u>?

       <u>storageCmd</u> <b>stat</b> <u>mbox</u>

       <u>storageCmd</u> <b>get</b> <u>mbox</u> <u>msgId</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>::pop3d::new</b> ?<u>serverName</u>?
              This  command  creates  a  new  server  object with an associated global Tcl command whose name is
              <u>serverName</u>.

       The command <b>serverName</b> may be used to invoke various operations on the  server.   It  has  the  following
       general form:

       <b>serverName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
              <u>Option</u> and the <u>arg</u>s determine the exact behavior of the command.

       A  pop3  server  can  be started on any port the caller has permission for from the operating system. The
       default  port  will  be  110,  which  is  the  port  defined  by  the  standard  specified  in  RFC  1939
       (<u><a href="http://www.rfc-editor.org/rfc/rfc1939.txt">http://www.rfc-editor.org/rfc/rfc1939.txt</a></u>).   After  creating,  configuring  and  starting  a the server
       object will listen for and accept connections on  that  port  and  handle  them  according  to  the  POP3
       protocol.

       <u>Note:</u>  The  server  provided by this module will handle only the basic protocol by itself. For the higher
       levels of user authentication and handling of the actual mailbox contents callbacks will be invoked.

       The following commands are possible for server objects:

       <u>serverName</u> <b>up</b>
              After this call the server will listen for connections on its configured port.

       <u>serverName</u> <b>down</b>
              After this call the server will stop listening for connections.  This  does  not  affect  existing
              connections.

       <u>serverName</u> <b>destroy</b> ?<u>mode</u>?
              Destroys  the  server object. Currently open connections are handled depending on the chosen mode.
              The provided <u>mode</u>s are:

              <b>kill</b>   Destroys the server immediately, and forcefully closes all currently open connections. This
                     is the default mode.

              <b>defer</b>  Stops the server from accepting new connections and will actually destroy it only after the
                     last of the currently open connections for the server is closed.

       <u>serverName</u> <b>configure</b>
              Returns a list containing all options and their current values in a format suitable for use by the
              command <b>array</b> <b>set</b>. The options themselves are described in section <b>Options</b>.

       <u>serverName</u> <b>configure</b> <u>-option</u>
              Returns the current value of the specified option. This is an  alias  for  the  method  <b>cget</b>.  The
              options themselves are described in section <b>Options</b>.

       <u>serverName</u> <b>configure</b> <u>-option</u> <u>value</u>...
              Sets  the  specified option to the provided value. The options themselves are described in section
              <b>Options</b>.

       <u>serverName</u> <b>cget</b> <u>-option</u>
              Returns the current value of the specified option. The options themselves are described in section
              <b>Options</b>.

       <u>serverName</u> <b>conn</b> list
              Returns a list containing the ids of all connections currently open.

       <u>serverName</u> <b>conn</b> state <u>id</u>
              Returns a list suitable for [<b>array</b> <b>set</b>] containing the state of the connection referenced by <u>id</u>.

</pre><h4><b>OPTIONS</b></h4><pre>
       The following options are available to pop3 server objects.

       <b>-port</b> <u>port</u>
              Defines the <u>port</u> to listen on for new connections. Default is 110. This option is a  bit  special.
              If  <u>port</u>  is set to "0" the server, or rather the operating system, will select a free port on its
              own. When querying <b>-port</b> the id of this chosen port will be returned. Changing the port while  the
              server  is  up will neither change the returned value, nor will it change on which port the server
              is listening on. Only after resetting the server via a call to <b>down</b> followed by a call to <b>up</b>  will
              the  new  port  take  effect.  It is at that time that the value returned when querying <b>-port</b> will
              change too.

       <b>-auth</b> <u>command</u>
              Defines a <u>command</u> prefix to call whenever the authentication of a user is  required.  If  no  such
              command  is  specified the server will reject all users. The interface which has to be provided by
              the command prefix is described in section <b>Authentication</b>.

       <b>-storage</b> <u>command</u>
              Defines a <u>command</u> prefix to call whenever the handling of mailbox contents is required. If no such
              command is specified the server will claim that all mailboxes are empty. The interface  which  has
              to be provided by the command prefix is described in section <b>Mailboxes</b>.

       <b>-socket</b> <u>command</u>
              Defines  a  <u>command</u> prefix to call for opening the listening socket.  This can be used to make the
              pop3 server listen on a SSL socket as provided by the <b>tls</b> package, see the command <b>tls::socket</b>.

</pre><h4><b>AUTHENTICATION</b></h4><pre>
       Here we describe the interface which has to be provided by  the  authentication  callback  so  that  pop3
       servers following the interface of this module are able to use it.

       <u>authCmd</u> <b>exists</b> <u>name</u>
              This  method  is  given  a  user<u>name</u>  and has to return a boolean value telling whether or not the
              specified user exists.

       <u>authCmd</u> <b>lookup</b> <u>name</u>
              This method is given a user<u>name</u> and has to return a two-element list containing the  password  for
              this user and a storage reference, in this order.

              The  storage  reference  is  passed  unchanged  to  the storage callback, see sections <b>Options</b> and
              <b>Mailboxes</b> for either the option defining it and or the interface to provide, respectively.

</pre><h4><b>MAILBOXES</b></h4><pre>
       Here we describe the interface which has to be provided by the storage  callback  so  that  pop3  servers
       following  the interface of this module are able to use it. The <u>mbox</u> argument is the storage reference as
       returned by the <b>lookup</b> method of the authentication command, see section <b>Authentication</b>.

       <u>storageCmd</u> <b>dele</b> <u>mbox</u> <u>msgList</u>
              Deletes the messages whose numeric ids are contained in the <u>msgList</u> from the mailbox specified via
              <u>mbox</u>.

       <u>storageCmd</u> <b>lock</b> <u>mbox</u>
              This method locks the specified mailbox for use by a single connection  to  the  server.  This  is
              necessary  to prevent havoc if several connections to the same mailbox are open. The complementary
              method is <b>unlock</b>. The command will return true if the lock could be set successfully or  false  if
              not.

       <u>storageCmd</u> <b>unlock</b> <u>mbox</u>
              This is the complementary method to <b>lock</b>, it revokes the lock on the specified mailbox.

       <u>storageCmd</u> <b>size</b> <u>mbox</u> ?<u>msgId</u>?
              Determines  the  size of the message specified through its id in <u>msgId</u>, in bytes, and returns this
              number. The command will return the size of the whole maildrop if no message id was specified.

       <u>storageCmd</u> <b>stat</b> <u>mbox</u>
              Determines the number of messages in the specified mailbox and returns this number.

       <u>storageCmd</u> <b>get</b> <u>mbox</u> <u>msgId</u>
              Returns a handle for the specified message. This handle is a mime token  following  the  interface
              described  in the documentation of package <b>mime</b>. The pop3 server will use the functionality of the
              mime token to send the mail to the requestor at the other end of a pop3 connection.

</pre><h4><b>SECURE</b> <b>MAIL</b> <b>TRANSFER</b></h4><pre>
       The option <b>-socket</b> (see <b>Options</b>) enables users of the package  to  override  how  the  server  opens  its
       listening  socket.   The envisioned main use is the specification of the <b>tls::socket</b> command, see package
       <b>tls</b>, to secure the communication.

                package require tls
                tls::init \
                   ...

                pop3d::new S -socket tls::socket
                ...

</pre><h4><b>REFERENCES</b></h4><pre>
       [1]    <u>RFC</u> <u>1939</u> [<a href="http://www.rfc-editor.org/rfc/rfc1939.txt">http://www.rfc-editor.org/rfc/rfc1939.txt</a>]

       [2]    <u>RFC</u> <u>2449</u> [<a href="http://www.rfc-editor.org/rfc/rfc2449.txt">http://www.rfc-editor.org/rfc/rfc2449.txt</a>]

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such in the category <u>pop3d</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       internet, network, pop3, protocol, rfc 1939, secure, ssl, tls

</pre><h4><b>CATEGORY</b></h4><pre>
       Networking

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2002-2009 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;
       Copyright (c) 2005 Reinhard Max  &lt;<a href="mailto:max@suse.de">max@suse.de</a>&gt;

tcllib                                                1.2.0                                          <u><a href="../man3tcl/pop3d.3tcl.html">pop3d</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>