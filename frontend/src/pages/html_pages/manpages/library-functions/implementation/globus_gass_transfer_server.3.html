<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>globus_gass_transfer_server - Implementing Servers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libglobus-gass-transfer-doc">libglobus-gass-transfer-doc_9.4-3build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       globus_gass_transfer_server - Implementing Servers

        - GASS Server Implementation.

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Typedefs</b>
       typedef void(* <b>globus_gass_transfer_close_callback_t</b>) (void *callback_arg,
           globus_gass_transfer_listener_t listener)
       typedef void(* <b>globus_gass_transfer_listen_callback_t</b>) (void *callback_arg,
           globus_gass_transfer_listener_t listener)

   <b>Functions</b>
       int <b>globus_gass_transfer_create_listener</b> (globus_gass_transfer_listener_t *listener,
           globus_gass_transfer_listenerattr_t *attr, char *scheme)
       int <b>globus_gass_transfer_close_listener</b> (globus_gass_transfer_listener_t listener,
           <b>globus_gass_transfer_close_callback_t</b> callback, void *user_arg)
       int <b>globus_gass_transfer_register_listen</b> (globus_gass_transfer_listener_t listener,
           <b>globus_gass_transfer_listen_callback_t</b> callback, void *user_arg)
       int <b>globus_gass_transfer_register_accept</b> (<b>globus_gass_transfer_request_t</b> *request,
           globus_gass_transfer_requestattr_t *attr, globus_gass_transfer_listener_t listener,
           globus_gass_transfer_callback_t callback, void *user_arg)
       void * <b>globus_gass_transfer_listener_get_user_pointer</b> (globus_gass_transfer_listener_t listener)
       int <b>globus_gass_transfer_listener_set_user_pointer</b> (globus_gass_transfer_listener_t listener, void
           *user_pointer)
       char * <b>globus_gass_transfer_listener_get_base_url</b> (globus_gass_transfer_listener_t listener)
       int <b>globus_gass_transfer_refer</b> (<b>globus_gass_transfer_request_t</b> request, char **urls, globus_size_t
           num_urls)
       int <b>globus_gass_transfer_authorize</b> (<b>globus_gass_transfer_request_t</b> request, globus_size_t total_length)
       int <b>globus_gass_transfer_deny</b> (<b>globus_gass_transfer_request_t</b> request, int reason, char *message)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       GASS Server Implementation.

       Implementing Servers

       Another mode of using the GASS Transfer API is to implement data servers. The primary difference between
       the client and server parts of the GASS Transfer API are how requests are generated.

       To implement a server, the user would call <b>globus_gass_transfer_create_listener()</b> to create a new server
       port on which a specific protocol will be used to request file transfer operations. The user may obtain
       the URL that the listener is bound to by calling <b>globus_gass_transfer_listener_get_base_url()</b>.

       Once the listener is created, the user can call <b>globus_gass_transfer_register_listen()</b> to wait for
       clients to connect to it. Once the server has detected an attempt to connect by a client, the use can
       call <b>globus_gass_transfer_register_accept()</b> to accept the connection from the client and parse the
       request.

       In the callback associated with <b>globus_gass_transfer_register_accept()</b>, the server can decide how to
       process the request. The user may choose to authorize the request by calling
       <b>globus_gass_transfer_authorize()</b>, refer it to another URL or URLs by calling <b>globus_gass_transfer_refer()</b>
       or deny the client access to the URL by calling <b>globus_gass_transfer_deny()</b>.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>void(*</b> <b>globus_gass_transfer_close_callback_t)</b> <b>(void</b> <b>*callback_arg,</b> <b>globus_gass_transfer_listener_t</b>
       <b>listener)</b>
       Listener close callback

       <b>Parameters</b>
           <u>callback_arg</u>
           <u>listener</u>

   <b>typedef</b> <b>void(*</b> <b>globus_gass_transfer_listen_callback_t)</b> <b>(void</b> <b>*callback_arg,</b> <b>globus_gass_transfer_listener_t</b>
       <b>listener)</b>
       Listen callback.

       <b>Parameters</b>
           <u>callback_arg</u>
           <u>listener</u>

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>globus_gass_transfer_authorize</b> <b>(globus_gass_transfer_request_t</b> <b>request,</b> <b>globus_size_t</b> <b>total_length)</b>
       Authorize a request.

       This function causes the request to be authorized for processing. It should be called in response to a
       request accept callback when the server wants to agree to process this request. After calling this
       function, the server implementation should call <b>globus_gass_transfer_send_bytes()</b> or
       <b>globus_gass_transfer_receive_bytes()</b> to send or receive the data associated with the URL.

       <b>Parameters</b>
           <u>request</u> A new request handle, passed to the server in an accept callback.
           <u>total_length</u> For a 'get' request, the total_length of the file to be retrieved if known. This value
           may be GLOBUS_GASS_LENGTH_UNKNOWN if the protocol supports transferring arbitrarily-sized files.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_GASS_TRANSFER_ERROR_INVALID_USE</u> The request handle was not valid, not created by calling
           <b>globus_gass_transfer_register_accept()</b>, or has already been denied or authorized.
           <u>GLOBUS_GASS_TRANSFER_ERROR_NOT_IMPLEMENTED</u> The protocol module does not support authorizing requests.

       <b>See</b> <b>also</b>
           <b>globus_gass_transfer_refer()</b>, <b>globus_gass_transfer_deny()</b>

   <b>int</b> <b>globus_gass_transfer_close_listener</b> <b>(globus_gass_transfer_listener_t</b> <b>listener,</b>
       <b>globus_gass_transfer_close_callback_t</b> <b>callback,</b> <b>void</b> <b>*</b> <b>user_arg)</b>
       Close a GASS listener.

       This function calls the protocol specific function needed to close a GASS server listener port. Callbacks
       for any outstanding accepts will be called before the close callback is invoked.

       <b>Parameters</b>
           <u>listener</u> Listener handle created by calling <b>globus_gass_transfer_create_listener()</b>.
           <u>callback</u> Function to call once the listener handle has been closed.
           <u>user_arg</u> Argument to be passed to the <u>callback</u> function.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_SUCCESS</u> The close operation was successfully registered on the listener.
           <u>GLOBUS_GASS_TRANSFER_ERROR_INVALID_USE</u> The listener handle was invalid.
           <u>GLOBUS_GASS_TRANSFER_ERROR_NOT_INITIALIZED</u> The listener handle was not properly initialized.
           <u>GLOBUS_GASS_TRANSFER_ERROR_DONE</u> A close has already been registered on the listener.

   <b>int</b> <b>globus_gass_transfer_create_listener</b> <b>(globus_gass_transfer_listener_t</b> <b>*</b> <b>listener,</b>
       <b>globus_gass_transfer_listenerattr_t</b> <b>*</b> <b>attr,</b> <b>char</b> <b>*</b> <b>scheme)</b>
       Create a new protocol-specific listener socket for a GASS server.

       This function creates a new socket to listen for client connections as a GASS server. The listener handle
       pointer is initialized to contain the a new handle which can be used in subsequent server operations.

       After calling this function, a user may call the <b>globus_gass_transfer_register_listen()</b> or
       <b>globus_gass_transfer_close_listener()</b> functions with this listener handle.

       <b>Parameters</b>
           <u>listener</u> A new listener handle to initialize.
           <u>attr</u> Protocol-specific attributes for the new listener.
           <u>scheme</u> The protocol scheme to implement for the listener.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_SUCCESS</u> The listener was successfully created.
           <u>GLOBUS_GASS_TRANSFER_ERROR_NULL_POINTER</u> The <u>listener</u> or <u>scheme</u> parameter was NULL
           <u>GLOBUS_GASS_TRANSFER_ERROR_NOT_IMPLEMENTED</u> The <u>scheme</u> is not supported by any protocol module.
           <u>GLOBUS_GASS_TRANSFER_ERROR_MALLOC_FAILED</u> Data structures associated with the transfer could not be
           allocated.

   <b>int</b> <b>globus_gass_transfer_deny</b> <b>(globus_gass_transfer_request_t</b> <b>request,</b> <b>int</b> <b>reason,</b> <b>char</b> <b>*</b> <b>message)</b>
       Deny a request.

       This function causes the request to be denied for further processing. It should be called in response to
       a request ccept callback when the server wants to refuse processing this request for the client. After
       calling this function, the server implementation need do nothing further with the request handle.

       <b>Parameters</b>
           <u>request</u> A new request handle, passed to the server in an accept callback.
           <u>reason</u> A protocol-specific reason code.
           <u>message</u> An informational message to be sent to the client.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_GASS_TRANSFER_ERROR_INVALID_USE</u> The request handle was not valid, not created by calling
           <b>globus_gass_transfer_register_accept()</b>, or has already been denied or authorized.
           <u>GLOBUS_GASS_TRANSFER_ERROR_NOT_IMPLEMENTED</u> The protocol module does not support denying requests.

       <b>See</b> <b>also</b>
           <b>globus_gass_transfer_refer()</b>, <b>globus_gass_transfer_authorize()</b>

   <b>char</b> <b>*</b> <b>globus_gass_transfer_listener_get_base_url</b> <b>(globus_gass_transfer_listener_t</b> <b>listener)</b>
       Get the base URL of a listener.

       This function queries a listener handle for the base URL which the server is listening on. For most
       protocols, this contains the protocol scheme, host, and port that the listener has registered itself on.

       <b>Parameters</b>
           <u>listener</u> The listener handle to query.

       <b>Returns</b>
           This function returns a pointer to a string containing the base URL. This string must not be freed or
           modified by the caller. It may not be referred to after the function
           globus_gass_transfer_listener_close() has been called.

   <b>void</b> <b>*</b> <b>globus_gass_transfer_listener_get_user_pointer</b> <b>(globus_gass_transfer_listener_t</b> <b>listener)</b>
       Get the user pointer associated with a listener.

       This function will query the listener's user_pointer field and return it's value.

       <b>Parameters</b>
           <u>listener</u> The listener handle.

       <b>Returns</b>
           If the listener handle is invalid or the user_pointer's value has not been set, then GLOBUS_NULL will
           be returned. Otherwise, the value of the user pointer will be returned.

       <b>See</b> <b>also</b>
           <b>globus_gass_transfer_listener_set_user_pointer()</b>

   <b>int</b> <b>globus_gass_transfer_listener_set_user_pointer</b> <b>(globus_gass_transfer_listener_t</b> <b>listener,</b> <b>void</b> <b>*</b>
       <b>user_pointer)</b>
       Set the user pointer associated with a listener.

       This function will set the listener's user_pointer field. The pointer may be used to associate any
       pointer-sized data with a listener handle.

       <b>Parameters</b>
           <u>listener</u> The listener handle.
           <u>user_pointer</u> The value of the user pointer.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_SUCCESS</u> The user pointer was successfully set.
           <u>GLOBUS_GASS_TRANSFER_ERROR_INVALID_USE</u> The <u>listener</u> handle was invalid.

       <b>See</b> <b>also</b>
           <b>globus_gass_transfer_listener_get_user_pointer()</b>

   <b>int</b> <b>globus_gass_transfer_refer</b> <b>(globus_gass_transfer_request_t</b> <b>request,</b> <b>char</b> <b>**</b> <b>urls,</b> <b>globus_size_t</b> <b>num_urls)</b>

       Refer a request.

       This function causes the request to be referred to another URL or list of URLs. It should be called in
       response to a request accept callback when the server wants to refer the client to another server or
       servers to process the request.

       <b>Parameters</b>
           <u>request</u> A new request handle, passed to the server in an accept callback.
           <u>urls</u> An array of strings, each being a URL pointing to sources of the same data as the original URL.
           <u>num_urls</u> The length of the <u>urls</u> array.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_GASS_TRANSFER_ERROR_INVALID_USE</u> The request handle was not valid, not created by calling
           <b>globus_gass_transfer_register_accept()</b>, or has already been denied or authorized.
           <u>GLOBUS_GASS_TRANSFER_ERROR_NOT_IMPLEMENTED</u> The protocol module does not support referrals.

       <b>See</b> <b>also</b>
           <b>globus_gass_transfer_deny()</b>, <b>globus_gass_transfer_authorize()</b>

   <b>int</b> <b>globus_gass_transfer_register_accept</b> <b>(globus_gass_transfer_request_t</b> <b>*</b> <b>request,</b>
       <b>globus_gass_transfer_requestattr_t</b> <b>*</b> <b>attr,</b> <b>globus_gass_transfer_listener_t</b> <b>listener,</b>
       <b>globus_gass_transfer_callback_t</b> <b>callback,</b> <b>void</b> <b>*</b> <b>user_arg)</b>
       Accept new client connections.

       This function causes the listener handle to accept a new connection on the listener and parse the file
       request. Once the file request has been parsed, the specified <u>callback</u> function will be called. The
       server implementation must then either authorize, deny, or refer this request.

       <b>Parameters</b>
           <u>request</u> A pointer to a new request handle. This request handle will be initialized when the callback
           function is invoked.
           <u>attr</u> Request attributes.
           <u>listener</u> The listener handle to register for the new request.
           <u>callback</u> Function to call when the protocol module has parsed the file request.
           <u>user_arg</u> Argument to be passed to the callback function.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_SUCCESS</u> The listen callback has been registered with the protocol module.
           <u>GLOBUS_GASS_TRANSFER_ERROR_INVALID_USE</u> An invalid <u>listener</u> handle was passed to this function.
           <u>GLOBUS_GASS_TRANSFER_ERROR_NOT_INITIALIZED</u> An uninitialized <u>listener</u> handle was passed to this
           function.
           <u>GLOBUS_GASS_TRANSFER_ERROR_INTERNAL_ERROR</u> The request could not be initialized due to some internal
           resource depletion.
           <u>GLOBUS_GASS_NOT_REGISTERED.</u> The <b>globus_gass_transfer_register_listen()</b> function has not yet been
           called.
           <u>GLOBUS_GASS_ALREADY_REGISTERED.</u> The listener is already processing a new request.
           <u>GLOBUS_GASS_TRANSFER_ERROR_DONE</u> The listener has been registered for closing.

       <b>See</b> <b>also</b>
           <b>globus_gass_transfer_register_listen()</b>;

   <b>int</b> <b>globus_gass_transfer_register_listen</b> <b>(globus_gass_transfer_listener_t</b> <b>listener,</b>
       <b>globus_gass_transfer_listen_callback_t</b> <b>callback,</b> <b>void</b> <b>*</b> <b>user_arg)</b>
       Listen for new client connections.

       This function causes the listener handle to listen for new client connections. When one is ready, it
       calls the specified <u>callback</u> function, letting the server implementer continue to accept the connection
       and process the request.

       <b>Parameters</b>
           <u>listener</u> The listener handle to register for new connections.
           <u>callback</u> Function to call when a new connection may be accepted.
           <u>user_arg</u> Argument to be passed to the callback function.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_SUCCESS</u> The listen callback has been registered with the protocol module.
           <u>GLOBUS_GASS_TRANSFER_ERROR_INVALID_USE</u> An invalid <u>listener</u> handle was passed to this function.
           <u>GLOBUS_GASS_TRANSFER_ERROR_NOT_INITIALIZED</u> An uninitialized <u>listener</u> handle was passed to this
           function.
           <u>GLOBUS_GASS_TRANSFER_ERROR_ALREADY_REGISTERED</u> The listener has already been registered for a new
           connection.
           <u>GLOBUS_GASS_TRANSFER_ERROR_DONE</u> The listener has been registered for closing.

       <b>See</b> <b>also</b>
           <b>globus_gass_transfer_register_accept()</b>;

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for globus_gass_transfer from the source code.

globus_gass_transfer                               Version 9.4                    <u><a href="../man3/globus_gass_transfer_server.3.html">globus_gass_transfer_server</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>