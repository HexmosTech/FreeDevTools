<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sys::Virt::EventImpl - Event loop implementation parent class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsys-virt-perl">libsys-virt-perl_11.1.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Sys::Virt::EventImpl - Event loop implementation parent class

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The "Sys::Virt::EventImpl" module represents the contract for integrating libvirt with an event loop.
       This package is abstract and intended to be subclassed to provide an actual implementation.

       This module is new in 9.5.0. To use this module while also supporting pre-9.5.0 versions, could may
       consider the code below to set up inheritance.

         package YourImpl;

         use strict;
         use warnings;

         BEGIN {
           if (require Sys::Virt::EventImpl) {
              eval "use parent 'Sys::Virt::EventImpl';";
           }
           else {
              eval "use parent 'Sys::Virt::Event';";
           }
         }

</pre><h4><b>EVENT</b> <b>LOOP</b> <b>IMPLEMENTATION</b></h4><pre>
       When implementing an event loop, the implementation must be a sub-class of the "Sys::Virt::EventImpl"
       class.  It must override these functions:

       my $watch_id = $self-&gt;add_handle( $fd, $events, $callback, $opaque, $ff )
           Registers  $callback  to  be  invoked for $events on $fd. Use "_run_handle_callback" to do the actual
           invocation from the event loop (see "Callback helpers" below).

           Next  to  the  events  explicitly  indicated   by   $events,   "Sys::Virt::Event::HANDLE_ERROR"   and
           "Sys::Virt::Event::HANDLE_HANGUP" should <u>always</u> trigger the callback.

           Returns a positive integer $watch_id or -1 on error.

       $self-&gt;update_handle($watch_id, $events)
           Replaces the events currencly triggering $watch_id with $events.

       my $ret = $self-&gt;remove_handle($watch_id)
           Removes the $callback from the $fd.

           Returns 0 on success or -1 on failure.

           <b>IMPORTANT</b>  This  should also make sure that "_free_callback_opaque" is called <u>after</u> this function has
           been executed: not doing so will prevent the connection from being garbage collected.

       my $timer_id = $self-&gt;add_timeout($frequency, $callback, $opaque, $ff)
       $self-&gt;update_timeout($timer_id, $frequency)
           Replaces the interval on the timer with $frequency.

       my $ret = $self-&gt;remove_timeout($timer_id)
           Discards the timer.

           Returns 0 on success or -1 on failure.

           <b>IMPORTANT</b> This should also make sure that "_free_callback_opaque" is called <u>after</u> this  function  has
           been executed: not doing so will prevent the connection from being garbage collected.

   <b>Callback</b> <b>helpers</b>
       $self-&gt;_run_handle_callback($watch_id, $fd, $events, $cb, $opaque)
           A  helper  method for executing a callback in response to one of more $events on the file handle $fd.
           The $watch number is the unique identifier associated with the file descriptor. The $cb  and  $opaque
           parameters are the callback and data registered for the handle.

       $self-&gt;_run_timeout_callback($timer_id, $cb, $opaque)
           A helper method for executing a callback in response to the expiry of a timeout identified by $timer.
           The $cb and $opaque parameters are the callback and data registered for the timeout.

       $self-&gt;_free_callback_opaque($ff, $opaque)
           A  helper method for freeing the data associated with a callback.  The $ff and $opaque parameters are
           the callback and data registered for the handle/timeout.

           <b>IMPORTANT</b> This helper must be called outside of any callbacks; that is <u>after</u> the  "remove_handle"  or
           "remove_timeout" callbacks complete.

</pre><h4><b>AUTHORS</b></h4><pre>
       Daniel P. Berrange &lt;<a href="mailto:berrange@redhat.com">berrange@redhat.com</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2006-2009 Red Hat Copyright (C) 2006-2009 Daniel P. Berrange

</pre><h4><b>LICENSE</b></h4><pre>
       This program is free software; you can redistribute it and/or modify it under the terms of either the GNU
       General  Public License as published by the Free Software Foundation (either version 2 of the License, or
       at your option any later version), or, the Artistic License, as specified in the Perl README file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Sys::Virt,  "<a href="http://libvirt.org">http://libvirt.org</a>"

perl v5.40.1                                       2025-03-21                          <u>Sys::Virt::<a href="../man3pm/EventImpl.3pm.html">EventImpl</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>