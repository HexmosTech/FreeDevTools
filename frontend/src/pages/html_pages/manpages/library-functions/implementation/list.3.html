<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LIST_EMPTY,   LIST_ENTRY,   LIST_FIRST,   LIST_FOREACH,   LIST_HEAD,   LIST_HEAD_INITIALIZER,  LIST_INIT,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       LIST_EMPTY,   LIST_ENTRY,   LIST_FIRST,   LIST_FOREACH,   LIST_HEAD,   LIST_HEAD_INITIALIZER,  LIST_INIT,
       LIST_INSERT_AFTER, LIST_INSERT_BEFORE, LIST_INSERT_HEAD, LIST_NEXT, LIST_REMOVE  -  implementation  of  a
       doubly linked list

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/queue.h&gt;</b>

       <b>LIST_ENTRY(TYPE);</b>

       <b>LIST_HEAD(HEADNAME,</b> <b>TYPE);</b>
       <b>LIST_HEAD</b> <b>LIST_HEAD_INITIALIZER(LIST_HEAD</b> <u>head</u><b>);</b>
       <b>void</b> <b>LIST_INIT(LIST_HEAD</b> <b>*</b><u>head</u><b>);</b>

       <b>int</b> <b>LIST_EMPTY(LIST_HEAD</b> <b>*</b><u>head</u><b>);</b>

       <b>void</b> <b>LIST_INSERT_HEAD(LIST_HEAD</b> <b>*</b><u>head</u><b>,</b>
                               <b>struct</b> <b>TYPE</b> <b>*</b><u>elm</u><b>,</b> <b>LIST_ENTRY</b> <u>NAME</u><b>);</b>
       <b>void</b> <b>LIST_INSERT_BEFORE(struct</b> <b>TYPE</b> <b>*</b><u>listelm</u><b>,</b>
                               <b>struct</b> <b>TYPE</b> <b>*</b><u>elm</u><b>,</b> <b>LIST_ENTRY</b> <u>NAME</u><b>);</b>
       <b>void</b> <b>LIST_INSERT_AFTER(struct</b> <b>TYPE</b> <b>*</b><u>listelm</u><b>,</b>
                               <b>struct</b> <b>TYPE</b> <b>*</b><u>elm</u><b>,</b> <b>LIST_ENTRY</b> <u>NAME</u><b>);</b>

       <b>struct</b> <b>TYPE</b> <b>*LIST_FIRST(LIST_HEAD</b> <b>*</b><u>head</u><b>);</b>
       <b>struct</b> <b>TYPE</b> <b>*LIST_NEXT(struct</b> <b>TYPE</b> <b>*</b><u>elm</u><b>,</b> <b>LIST_ENTRY</b> <u>NAME</u><b>);</b>

       <b>LIST_FOREACH(struct</b> <b>TYPE</b> <b>*</b><u>var</u><b>,</b> <b>LIST_HEAD</b> <b>*</b><u>head</u><b>,</b> <b>LIST_ENTRY</b> <u>NAME</u><b>);</b>

       <b>void</b> <b>LIST_REMOVE(struct</b> <b>TYPE</b> <b>*</b><u>elm</u><b>,</b> <b>LIST_ENTRY</b> <u>NAME</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These macros define and operate on doubly linked lists.

       In the macro definitions, <u>TYPE</u> is the name of a user-defined structure, that must contain a field of type
       <u>LIST_ENTRY</u>,  named  <u>NAME</u>.   The  argument  <u>HEADNAME</u>  is the name of a user-defined structure that must be
       declared using the macro <b>LIST_HEAD</b>().

   <b>Creation</b>
       A list is headed by a structure defined by the <b>LIST_HEAD</b>()  macro.   This  structure  contains  a  single
       pointer  to  the  first element on the list.  The elements are doubly linked so that an arbitrary element
       can be removed without traversing the list.  New elements can be added to  the  list  after  an  existing
       element,  before  an  existing element, or at the head of the list.  A <u>LIST_HEAD</u> structure is declared as
       follows:

           LIST_HEAD(HEADNAME, TYPE) head;

       where <u>struct</u> <u>HEADNAME</u> is the structure to be defined, and <u>struct</u> <u>TYPE</u> is the type of the elements  to  be
       linked into the list.  A pointer to the head of the list can later be declared as:

           struct HEADNAME *headp;

       (The names <u>head</u> and <u>headp</u> are user selectable.)

       <b>LIST_ENTRY</b>() declares a structure that connects the elements in the list.

       <b>LIST_HEAD_INITIALIZER</b>() evaluates to an initializer for the list <u>head</u>.

       <b>LIST_INIT</b>() initializes the list referenced by <u>head</u>.

       <b>LIST_EMPTY</b>() evaluates to true if there are no elements in the list.

   <b>Insertion</b>
       <b>LIST_INSERT_HEAD</b>() inserts the new element <u>elm</u> at the head of the list.

       <b>LIST_INSERT_BEFORE</b>() inserts the new element <u>elm</u> before the element <u>listelm</u>.

       <b>LIST_INSERT_AFTER</b>() inserts the new element <u>elm</u> after the element <u>listelm</u>.

   <b>Traversal</b>
       <b>LIST_FIRST</b>() returns the first element in the list, or NULL if the list is empty.

       <b>LIST_NEXT</b>() returns the next element in the list, or NULL if this is the last.

       <b>LIST_FOREACH</b>()  traverses the list referenced by <u>head</u> in the forward direction, assigning each element in
       turn to <u>var</u>.

   <b>Removal</b>
       <b>LIST_REMOVE</b>() removes the element <u>elm</u> from the list.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>LIST_EMPTY</b>() returns nonzero if the list is empty, and zero if the list contains at least one entry.

       <b>LIST_FIRST</b>(), and <b>LIST_NEXT</b>() return a pointer to the first or next <u>TYPE</u> structure, respectively.

       <b>LIST_HEAD_INITIALIZER</b>() returns an initializer that can be assigned to the list <u>head</u>.

</pre><h4><b>STANDARDS</b></h4><pre>
       BSD.

</pre><h4><b>HISTORY</b></h4><pre>
       4.4BSD.

</pre><h4><b>BUGS</b></h4><pre>
       <b>LIST_FOREACH</b>() doesn't allow <u>var</u> to be removed or freed within the loop, as it would interfere  with  the
       traversal.   <b>LIST_FOREACH_SAFE</b>(),  which  is  present on the BSDs but is not present in glibc, fixes this
       limitation by allowing <u>var</u> to safely be removed from the list and freed  from  within  the  loop  without
       interfering with the traversal.

</pre><h4><b>EXAMPLES</b></h4><pre>
       #include &lt;stddef.h&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;sys/queue.h&gt;

       struct entry {
           int data;
           LIST_ENTRY(entry) entries;              /* List */
       };

       LIST_HEAD(listhead, entry);

       int
       main(void)
       {
           struct entry *n1, *n2, *n3, *np;
           struct listhead head;                   /* List head */
           int i;

           LIST_INIT(&amp;head);                       /* Initialize the list */

           n1 = malloc(sizeof(struct entry));      /* Insert at the head */
           LIST_INSERT_HEAD(&amp;head, n1, entries);

           n2 = malloc(sizeof(struct entry));      /* Insert after */
           LIST_INSERT_AFTER(n1, n2, entries);

           n3 = malloc(sizeof(struct entry));      /* Insert before */
           LIST_INSERT_BEFORE(n2, n3, entries);

           i = 0;                                  /* Forward traversal */
           LIST_FOREACH(np, &amp;head, entries)
               np-&gt;data = i++;

           LIST_REMOVE(n2, entries);               /* Deletion */
           free(n2);
                                                   /* Forward traversal */
           LIST_FOREACH(np, &amp;head, entries)
               printf("%i\n", np-&gt;data);
                                                   /* List deletion */
           n1 = LIST_FIRST(&amp;head);
           while (n1 != NULL) {
               n2 = LIST_NEXT(n1, entries);
               free(n1);
               n1 = n2;
           }
           LIST_INIT(&amp;head);

           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/insque.3.html">insque</a></b>(3), <b><a href="../man7/queue.7.html">queue</a></b>(7)

Linux man-pages 6.9.1                              2024-06-15                                            <u><a href="../man3/LIST.3.html">LIST</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>