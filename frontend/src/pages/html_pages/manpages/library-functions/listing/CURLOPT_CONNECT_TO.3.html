<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_CONNECT_TO - connect to another host and port instead</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_CONNECT_TO - connect to another host and port instead

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_CONNECT_TO,
                                 struct curl_slist *connect_to);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass  a pointer to a linked list of strings with "connect to" information to use for establishing network
       connections with this handle. The linked list should be a fully valid list of <b>struct</b>  <b>curl_slist</b>  structs
       properly filled in. Use <u><a href="../man3/curl_slist_append.3.html">curl_slist_append</a>(3)</u> to create the list and <u><a href="../man3/curl_slist_free_all.3.html">curl_slist_free_all</a>(3)</u> to clean up an
       entire list.

       Each  single  string  should  be written using the format HOST:PORT:CONNECT-TO-HOST:CONNECT-TO-PORT where
       HOST is the host of the request, PORT is the port of the request,  CONNECT-TO-HOST  is  the  hostname  to
       connect to, and CONNECT-TO-PORT is the port to connect to.

       The first string that matches the request's host and port is used.

       Dotted  numerical IP addresses are supported for HOST and CONNECT-TO-HOST.  A numerical IPv6 address must
       be written within [brackets].

       Any of the four values may be empty. When the HOST or PORT is empty, the host or port always  match  (the
       request's  host  or  port is ignored). When CONNECT-TO-HOST or CONNECT-TO-PORT is empty, the "connect to"
       feature is disabled for the host or port, and the request's host  or  port  are  used  to  establish  the
       network connection.

       This  option is suitable to direct the request at a specific server, e.g. at a specific cluster node in a
       cluster of servers.

       The "connect to" host and port are only used to establish the network connection. They do NOT affect  the
       host  and  port  that  are  used  for TLS/SSL (e.g. SNI, certificate verification) or for the application
       protocols.

       In contrast to <u><a href="../man3/CURLOPT_RESOLVE.3.html">CURLOPT_RESOLVE</a>(3)</u>, the option <u><a href="../man3/CURLOPT_CONNECT_TO.3.html">CURLOPT_CONNECT_TO</a>(3)</u> does not pre-populate the  DNS  cache
       and  therefore it does not affect future transfers of other easy handles that have been added to the same
       multi handle.

       The "connect to" host and port are ignored if they are equal to the host and the port in the request URL,
       because connecting to the host and the port in the request URL is the default behavior.

       If an HTTP proxy is used for a request having a special "connect to" host or port, and the  "connect  to"
       host or port differs from the request's host and port, the HTTP proxy is automatically switched to tunnel
       mode  for  this  specific  request. This is necessary because it is not possible to connect to a specific
       host or port in normal (non-tunnel) mode.

       When this option is passed to <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u>, libcurl does not copy the list so  you  <b>must</b>  keep  it
       around  until  you no longer use this <u>handle</u> for a transfer before you call <u><a href="../man3/curl_slist_free_all.3.html">curl_slist_free_all</a>(3)</u> on the
       list.

       Using this option multiple times makes the last set list override the previous ones. Set it  to  NULL  to
       disable its use again.

</pre><h4><b>DEFAULT</b></h4><pre>
       NULL

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl;
         struct curl_slist *connect_to = NULL;
         connect_to = curl_slist_append(NULL, "example.com::server1.example.com:");

         curl = curl_easy_init();
         if(curl) {
           curl_easy_setopt(curl, CURLOPT_CONNECT_TO, connect_to);
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");

           curl_easy_perform(curl);

           /* always cleanup */
           curl_easy_cleanup(curl);
         }

         curl_slist_free_all(connect_to);
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.49.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_FOLLOWLOCATION.3.html">CURLOPT_FOLLOWLOCATION</a></b>(3), <b><a href="../man3/CURLOPT_HTTPPROXYTUNNEL.3.html">CURLOPT_HTTPPROXYTUNNEL</a></b>(3), <b><a href="../man3/CURLOPT_RESOLVE.3.html">CURLOPT_RESOLVE</a></b>(3), <b><a href="../man3/CURLOPT_URL.3.html">CURLOPT_URL</a></b>(3)

libcurl                                            2025-06-16                              <u><a href="../man3/CURLOPT_CONNECT_TO.3.html">CURLOPT_CONNECT_TO</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>