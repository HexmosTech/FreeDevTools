<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_SplitList,      Tcl_Merge,      Tcl_ScanElement,      Tcl_ConvertElement,     Tcl_ScanCountedElement,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_SplitList,      Tcl_Merge,      Tcl_ScanElement,      Tcl_ConvertElement,     Tcl_ScanCountedElement,
       Tcl_ConvertCountedElement - manipulate Tcl lists

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       int
       <b>Tcl_SplitList</b>(<u>interp,</u> <u>list,</u> <u>argcPtr,</u> <u>argvPtr</u>)

       char *
       <b>Tcl_Merge</b>(<u>argc,</u> <u>argv</u>)

       Tcl_Size
       <b>Tcl_ScanElement</b>(<u>src,</u> <u>flagsPtr</u>)

       Tcl_Size
       <b>Tcl_ScanCountedElement</b>(<u>src,</u> <u>length,</u> <u>flagsPtr</u>)

       Tcl_Size
       <b>Tcl_ConvertElement</b>(<u>src,</u> <u>dst,</u> <u>flags</u>)

       Tcl_Size
       <b>Tcl_ConvertCountedElement</b>(<u>src,</u> <u>length,</u> <u>dst,</u> <u>flags</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (out)                   Interpreter to use for error  reporting.   If  NULL,  then  no
                                                  error message is left.

       const char <u>*list</u> (in)                      Pointer to a string with proper list structure.

       Tcl_Size | int <u>*argcPtr</u> (out)              Filled  in  with number of elements in <u>list</u>.  May be (Tcl_Size
                                                  *)NULL when not used. If it points to a variable which type is
                                                  not <b>Tcl_Size</b>, a compiler warning will be generated.   If  your
                                                  extensions  is  compiled  with -DTCL_8_API, this function will
                                                  return TCL_ERROR for lists with  more  than  INT_MAX  elements
                                                  (which should trigger proper error-handling), otherwise expect
                                                  it to crash.

       const char <u>***argvPtr</u> (out)                <u>*argvPtr</u>  will  be  filled  in with the address of an array of
                                                  pointers to the strings that are  the  extracted  elements  of
                                                  <u>list</u>.   There  will  be  <u>*argcPtr</u>  valid entries in the array,
                                                  followed by a NULL entry.

       Tcl_Size <u>argc</u> (in)                         Number of elements in <u>argv</u>.

       const char *const <u>*argv</u> (in)               Array of strings to merge together into a single  list.   Each
                                                  string will become a separate element of the list.

       const char <u>*src</u> (in)                       String that is to become an element of a list.

       int <u>*flagsPtr</u> (in)                         Pointer  to  word  to fill in with information about <u>src</u>.  The
                                                  value of *<u>flagsPtr</u> must be passed to <b>Tcl_ConvertElement</b>.

       Tcl_Size <u>length</u> (in)                       Number of bytes in string <u>src</u>.

       char <u>*dst</u> (in)                             Place to copy converted list  element.   Must  contain  enough
                                                  characters to hold converted string.

       int <u>flags</u> (in)                             Information about <u>src</u>. Must be value returned by previous call
                                                  to <b>Tcl_ScanElement</b>, possibly OR-ed with <b>TCL_DONT_USE_BRACES</b>.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  procedures  may  be  used to disassemble and reassemble Tcl lists.  <b>Tcl_SplitList</b> breaks a list up
       into its constituent elements, returning an array of pointers to the elements using <u>argcPtr</u> and  <u>argvPtr</u>.
       While  extracting  the  arguments,  <b>Tcl_SplitList</b>  obeys  the usual rules for backslash substitutions and
       braces.  The area of memory pointed to by <u>*argvPtr</u> is dynamically allocated;  in addition to the array of
       pointers, it also holds copies of all the list elements.  It is the caller's responsibility  to  free  up
       all of this storage.  For example, suppose that you have called <b>Tcl_SplitList</b> with the following code:

              Tcl_Size argc;
              int code;
              char *string;
              char **argv;
              ...
              code = <b>Tcl_SplitList</b>(interp, string, &amp;argc, &amp;argv);

       Then you should eventually free the storage with a call like the following:

              Tcl_Free(argv);

       <b>Tcl_SplitList</b> normally returns <b>TCL_OK</b>, which means the list was successfully parsed. If <u>sizePtr</u> points to
       a variable of type <b>int</b> and the list contains more than 2**31 key/value pairs, or there was a syntax error
       in  <u>list</u>,  then  <b>TCL_ERROR</b>  is  returned  and  the  interpreter's  result  will point to an error message
       describing the problem (if <u>interp</u> was not NULL).  If <b>TCL_ERROR</b> is returned then no  memory  is  allocated
       and <u>*argvPtr</u> is not modified.

       <b>Tcl_Merge</b>  is  the inverse of <b>Tcl_SplitList</b>:  it takes a collection of strings given by <u>argc</u> and <u>argv</u> and
       generates a result string that has proper list structure.  This means that commands  like  <b>index</b>  may  be
       used  to  extract  the  original  elements  again.   In addition, if the result of <b>Tcl_Merge</b> is passed to
       <b>Tcl_Eval</b>, it will be parsed into <u>argc</u> words whose values will be the same as the <u>argv</u> strings  passed  to
       <b>Tcl_Merge</b>.   <b>Tcl_Merge</b>  will  modify the list elements with braces and/or backslashes in order to produce
       proper Tcl list structure.  The result string is dynamically allocated using <b>Tcl_Alloc</b>;  the caller  must
       eventually release the space using <b>Tcl_Free</b>.

       If  the  result  of  <b>Tcl_Merge</b> is passed to <b>Tcl_SplitList</b>, the elements returned by <b>Tcl_SplitList</b> will be
       identical to those passed into <b>Tcl_Merge</b>.  However, the converse is not true:  if <b>Tcl_SplitList</b> is passed
       a given string, and the resulting <u>argc</u> and <u>argv</u> are passed to <b>Tcl_Merge</b>, the resulting string may not  be
       the  same  as the original string passed to <b>Tcl_SplitList</b>.  This is because <b>Tcl_Merge</b> may use backslashes
       and braces differently than the original string.

       <b>Tcl_ScanElement</b> and <b>Tcl_ConvertElement</b> are the procedures that do all of  the  real  work  of  <b>Tcl_Merge</b>.
       <b>Tcl_ScanElement</b>  scans  its <u>src</u> argument and determines how to use backslashes and braces when converting
       it to a list element.  It returns an overestimate of the number of characters required to  represent  <u>src</u>
       as a list element, and it stores information in <u>*flagsPtr</u> that is needed by <b>Tcl_ConvertElement</b>.

       <b>Tcl_ConvertElement</b>  is a companion procedure to <b>Tcl_ScanElement</b>.  It does the actual work of converting a
       string to a list element.  Its <u>flags</u> argument must be the same as the value returned by  <b>Tcl_ScanElement</b>.
       <b>Tcl_ConvertElement</b>  writes  a  proper  list element to memory starting at *<u>dst</u> and returns a count of the
       total number of characters written, which will be no more than the result  returned  by  <b>Tcl_ScanElement</b>.
       <b>Tcl_ConvertElement</b>  writes out only the actual list element without any leading or trailing spaces: it is
       up to the caller to include spaces between adjacent list elements.

       <b>Tcl_ConvertElement</b> uses one of two  different  approaches  to  handle  the  special  characters  in  <u>src</u>.
       Wherever  possible,  it  handles special characters by surrounding the string with braces.  This produces
       clean-looking output, but cannot be used in some situations, such as when <u>src</u> contains unmatched  braces.
       In  these situations, <b>Tcl_ConvertElement</b> handles special characters by generating backslash sequences for
       them.  The caller may insist on the second approach by OR-ing the flag value returned by  <b>Tcl_ScanElement</b>
       with  <b>TCL_DONT_USE_BRACES</b>.   Although  this  will  produce an uglier result, it is useful in some special
       situations, such as when <b>Tcl_ConvertElement</b> is being used to generate a portion of an argument for a  Tcl
       command.   In  this  case,  surrounding  <u>src</u>  with  curly braces would cause the command not to be parsed
       correctly.

       By default, <b>Tcl_ConvertElement</b> will use quoting in its output to  be  sure  the  first  character  of  an
       element is not the hash character (“#”.)  This is to be sure the first element of any list passed to <b>eval</b>
       is not mis-parsed as the beginning of a comment.  When a list element is not the first element of a list,
       this  quoting is not necessary.  When the caller can be sure that the element is not the first element of
       a list, it can disable quoting of the leading hash  character  by  OR-ing  the  flag  value  returned  by
       <b>Tcl_ScanElement</b> with <b>TCL_DONT_QUOTE_HASH</b>.

       <b>Tcl_ScanCountedElement</b>    and   <b>Tcl_ConvertCountedElement</b>   are   the   same   as   <b>Tcl_ScanElement</b>   and
       <b>Tcl_ConvertElement</b>, except the length of string <u>src</u> is specified by the <u>length</u> argument, and  the  string
       may contain embedded nulls.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/Tcl_ListObjGetElements.3tcl.html">Tcl_ListObjGetElements</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       backslash, convert, element, list, merge, split, strings

Tcl                                                    8.0                                   <u><a href="../man3tcl/Tcl_SplitList.3tcl.html">Tcl_SplitList</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>