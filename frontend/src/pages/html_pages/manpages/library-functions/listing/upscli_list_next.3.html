<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>upscli_list_next - Retrieve list items from a UPS</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libupsclient-dev">libupsclient-dev_2.8.3-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       upscli_list_next - Retrieve list items from a UPS

</pre><h4><b>SYNOPSIS</b></h4><pre>
               #include &lt;upsclient.h&gt;

               int upscli_list_next(
                       UPSCONN_t *ups,
                       size_t numq,
                       const char **query,
                       size_t *numa,
                       char ***answer)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>upscli_list_next()</b> function takes the pointer <u>ups</u> to a UPSCONN_t state structure, and the pointer
       <u>query</u> to an array of <u>numq</u> query elements. It performs a read from the network and expects to find either
       another list item or the end of a list.

       You must call <b><a href="../man3/upscli_list_start.3.html">upscli_list_start</a></b>(3) before calling this function.

       This function will return <u>1</u> and set values in <u>numa</u> and <u>answer</u> if a list item is received. If the list is
       done, it will return <u>0</u>, and the values in <u>numa</u> and <u>answer</u> are undefined.

       Calling this function after it returns something other than <u>1</u> is undefined behavior.

</pre><h4><b>QUERY</b> <b>FORMATTING</b></h4><pre>
       You may not change the values of <u>numq</u> or <u>query</u> between the call to <b><a href="../man3/upscli_list_start.3.html">upscli_list_start</a></b>(3) and the first
       call to this function. You also may not change the values between calls to this function.

</pre><h4><b>ANSWER</b> <b>FORMATTING</b></h4><pre>
       The contents of <u>numa</u> and <u>answer</u> work just like a call to <b><a href="../man3/upscli_get.3.html">upscli_get</a></b>(3). The values returned by <b><a href="../man8/upsd.8.html">upsd</a></b>(8)
       are identical to a single item request, so this is not surprising.

</pre><h4><b>ERROR</b> <b>CHECKING</b></h4><pre>
       This function checks the response from <b><a href="../man8/upsd.8.html">upsd</a></b>(8) against your query. If the response is not part of the
       list you have requested, it will return an error code.

       When this happens, <b><a href="../man3/upscli_upserror.3.html">upscli_upserror</a></b>(3) will return UPSCLI_ERR_PROTOCOL.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>upscli_list_next()</b> function returns <u>1</u> when list data is present, <u>0</u> if the list is finished, or <u>-1</u> if
       an error occurs.

       It is possible to have an empty list. The function will return <u>0</u> for its first call in that case.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/upscli_list_start.3.html">upscli_list_start</a></b>(3), <b><a href="../man3/upscli_strerror.3.html">upscli_strerror</a></b>(3), <b><a href="../man3/upscli_upserror.3.html">upscli_upserror</a></b>(3)

Network UPS Tools 2.8.3                            07/08/2025                                <u><a href="../man3/UPSCLI_LIST_NEXT.3.html">UPSCLI_LIST_NEXT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>