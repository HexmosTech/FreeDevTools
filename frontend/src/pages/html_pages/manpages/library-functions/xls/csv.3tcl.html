<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>csv - Procedures to handle CSV data.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       csv - Procedures to handle CSV data.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>csv</b> <b>?0.8.1?</b>

       <b>::csv::iscomplete</b> <u>data</u>

       <b>::csv::join</b> <u>values</u> ?<u>sepChar</u>? ?<u>delChar</u>? ?<u>delMode</u>?

       <b>::csv::joinlist</b> <u>values</u> ?<u>sepChar</u>? ?<u>delChar</u>? ?<u>delMode</u>?

       <b>::csv::joinmatrix</b> <u>matrix</u> ?<u>sepChar</u>? ?<u>delChar</u>? ?<u>delMode</u>?

       <b>::csv::read2matrix</b> ?<b>-alternate</b>? <u>chan</u> <u>m</u> {<u>sepChar</u> ,} {<u>expand</u> none}

       <b>::csv::read2queue</b> ?<b>-alternate</b>? <u>chan</u> <u>q</u> {<u>sepChar</u> ,}

       <b>::csv::report</b> <u>cmd</u> <u>matrix</u> ?<u>chan</u>?

       <b>::csv::split</b> ?<b>-alternate</b>? <u>line</u> ?<u>sepChar</u>? ?<u>delChar</u>?

       <b>::csv::split2matrix</b> ?<b>-alternate</b>? <u>m</u> <u>line</u> {<u>sepChar</u> ,} {<u>expand</u> none}

       <b>::csv::split2queue</b> ?<b>-alternate</b>? <u>q</u> <u>line</u> {<u>sepChar</u> ,}

       <b>::csv::writematrix</b> <u>m</u> <u>chan</u> ?<u>sepChar</u>? ?<u>delChar</u>?

       <b>::csv::writequeue</b> <u>q</u> <u>chan</u> ?<u>sepChar</u>? ?<u>delChar</u>?

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>csv</b> package provides commands to manipulate information in CSV <b>FORMAT</b> (CSV = Comma Separated Values).

</pre><h4><b>COMMANDS</b></h4><pre>
       The following commands are available:

       <b>::csv::iscomplete</b> <u>data</u>
              A  predicate  checking if the argument <u>data</u> is a complete csv record. The result is a boolean flag
              indicating the completeness of the data. The result is true if the data is complete.

       <b>::csv::join</b> <u>values</u> ?<u>sepChar</u>? ?<u>delChar</u>? ?<u>delMode</u>?
              Takes a list of values and returns a string in CSV format containing these values.  The  separator
              character  can be defined by the caller, but this is optional. The default is ",". The quoting aka
              delimiting character can be defined by the caller, but this is optional. The default is  '"'.   By
              default the quoting mode <u>delMode</u> is "auto", surrounding values with <u>delChar</u> only when needed. When
              set to "always" however, values are always surrounded by the <u>delChar</u> instead.

       <b>::csv::joinlist</b> <u>values</u> ?<u>sepChar</u>? ?<u>delChar</u>? ?<u>delMode</u>?
              Takes  a  list  of lists of values and returns a string in CSV format containing these values. The
              separator character can be defined by the caller, but this is optional. The default  is  ",".  The
              quoting  character  can  be  defined  by the caller, but this is optional. The default is '"'.  By
              default the quoting mode <u>delMode</u> is "auto", surrounding values with <u>delChar</u> only when needed. When
              set to "always" however, values are always surrounded by the <u>delChar</u> instead.  Each element of the
              outer list is considered a record, these are separated by newlines in the result. The elements  of
              each record are formatted as usual (via <b>::csv::join</b>).

       <b>::csv::joinmatrix</b> <u>matrix</u> ?<u>sepChar</u>? ?<u>delChar</u>? ?<u>delMode</u>?
              Takes  a  <u>matrix</u>  object  following the API specified for the struct::matrix package and returns a
              string in CSV format containing these values. The  separator  character  can  be  defined  by  the
              caller,  but  this  is  optional.  The default is ",". The quoting character can be defined by the
              caller, but this is optional. The default is Â´"'.  By default the quoting mode <u>delMode</u> is  "auto",
              surrounding  values with <u>delChar</u> only when needed. When set to "always" however, values are always
              surrounded by the <u>delChar</u> instead.  Each row of the matrix  is  considered  a  record,  these  are
              separated  by  newlines  in  the  result.  The elements of each record are formatted as usual (via
              <b>::csv::join</b>).

       <b>::csv::read2matrix</b> ?<b>-alternate</b>? <u>chan</u> <u>m</u> {<u>sepChar</u> ,} {<u>expand</u> none}
              A wrapper around <b>::csv::split2matrix</b> (see below) reading CSV-formatted lines  from  the  specified
              channel (until EOF) and adding them to the given matrix. For an explanation of the <u>expand</u> argument
              see <b>::csv::split2matrix</b>.

       <b>::csv::read2queue</b> ?<b>-alternate</b>? <u>chan</u> <u>q</u> {<u>sepChar</u> ,}
              A  wrapper  around  <b>::csv::split2queue</b>  (see below) reading CSV-formatted lines from the specified
              channel (until EOF) and adding them to the given queue.

       <b>::csv::report</b> <u>cmd</u> <u>matrix</u> ?<u>chan</u>?
              A report command which can be used by the matrix methods <b>format</b> <b>2string</b> and <b>format</b> <b>2chan</b>. For  the
              latter  this  command  delegates  the  work  to  <b>::csv::writematrix</b>.  <u>cmd</u> is expected to be either
              <b>printmatrix</b> or <b>printmatrix2channel</b>. The channel argument, <u>chan</u>, has to be present for  the  latter
              and must not be present for the first.

       <b>::csv::split</b> ?<b>-alternate</b>? <u>line</u> ?<u>sepChar</u>? ?<u>delChar</u>?
              converts  a <u>line</u> in CSV format into a list of the values contained in the line. The character used
              to separate the values from each other can be defined by the caller,  via  <u>sepChar</u>,  but  this  is
              optional.  The  default  is  ",".  The quoting character can be defined by the caller, but this is
              optional. The default is '"'.

              If the option <b>-alternate</b> is specified a slightly different syntax is used to parse the input. This
              syntax is explained below, in the section <b>FORMAT</b>.

       <b>::csv::split2matrix</b> ?<b>-alternate</b>? <u>m</u> <u>line</u> {<u>sepChar</u> ,} {<u>expand</u> none}
              The same as <b>::csv::split</b>, but appends the resulting list as a new row to the matrix <u>m</u>,  using  the
              method  <b>add</b>  <b>row</b>.  The  expansion  mode  specified via <u>expand</u> determines how the command handles a
              matrix with less columns than contained in <u>line</u>. The allowed modes are:

              <b>none</b>   This is the default mode. In this mode it is the responsibility of  the  caller  to  ensure
                     that  the  matrix  has  enough  columns  to  contain the full line. If there are not enough
                     columns the list of values is silently truncated at the end to fit.

              <b>empty</b>  In this mode the command expands an empty matrix to hold all columns of the specified line,
                     but goes no further. The overall effect is that the first of a series of  lines  determines
                     the  number of columns in the matrix and all following lines are truncated to that size, as
                     if mode <b>none</b> was set.

              <b>auto</b>   In this mode the command expands the matrix as needed to  hold  all  columns  contained  in
                     <u>line</u>. The overall effect is that after adding a series of lines the matrix will have enough
                     columns to hold all columns of the longest line encountered so far.

       <b>::csv::split2queue</b> ?<b>-alternate</b>? <u>q</u> <u>line</u> {<u>sepChar</u> ,}
              The  same as <b>::csv::split</b>, but appending the resulting list as a single item to the queue <u>q</u>, using
              the method <b>put</b>.

       <b>::csv::writematrix</b> <u>m</u> <u>chan</u> ?<u>sepChar</u>? ?<u>delChar</u>?
              A wrapper around <b>::csv::join</b> taking all rows in the matrix <u>m</u> and writing them CSV  formatted  into
              the channel <u>chan</u>.

       <b>::csv::writequeue</b> <u>q</u> <u>chan</u> ?<u>sepChar</u>? ?<u>delChar</u>?
              A  wrapper  around  <b>::csv::join</b>  taking all items in the queue <u>q</u> (assumes that they are lists) and
              writing them CSV formatted into the channel <u>chan</u>.

</pre><h4><b>FORMAT</b></h4><pre>
       The format of regular CSV files is specified as

       [1]    Each record of a csv file (comma-separated values, as exported e.g. by Excel) is a  set  of  ASCII
              values separated by ",". For other languages it may be ";" however, although this is not important
              for this case as the functions provided here allow any separator character.

       [2]    If  and  only  if  a  value  contains  itself the separator ",", then it (the value) has to be put
              between "". If the value does not contain the separator character then quoting is optional.

       [3]    If a value contains the character ", that character is represented by "".

       [4]    The output string "" represents the value ". In other words, it is assumed  that  it  was  created
              through rule 3, and only this rule, i.e. that the value was not quoted.

       An  alternate  format  definition  mainly  used  by  MS products specifies that the output string "" is a
       representation of the empty string. In other words, it is assumed that the output was  generated  out  of
       the empty string by quoting it (i.e. rule 2), and not through rule 3. This is the only difference between
       the regular and the alternate format.

       The  alternate  format  is  activated through specification of the option <b>-alternate</b> to the various split
       commands.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Using the regular format the record

              123,"123,521.2","Mary says ""Hello, I am Mary""",""

       is parsed into the items

              a) 123
              b) 123,521.2
              c) Mary says "Hello, I am Mary"
              d) "

       Using the alternate format the result is

              a) 123
              b) 123,521.2
              c) Mary says "Hello, I am Mary"
              d) (the empty string)

       instead. As can be seen only item (d) is different, now the empty string instead of a ".

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the category <u>csv</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       matrix, queue

</pre><h4><b>KEYWORDS</b></h4><pre>
       csv, matrix, package, queue, tcllib

</pre><h4><b>CATEGORY</b></h4><pre>
       Text processing

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2002-2015 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                0.8.1                                            <u><a href="../man3tcl/csv.3tcl.html">csv</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>