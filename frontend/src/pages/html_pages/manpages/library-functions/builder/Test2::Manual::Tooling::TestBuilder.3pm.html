<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test2::Manual::Tooling::TestBuilder - This section maps Test::Builder methods to Test2 concepts.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest2-suite-perl">libtest2-suite-perl_0.000163-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test2::Manual::Tooling::TestBuilder - This section maps Test::Builder methods to Test2 concepts.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       With Test::Builder tools were encouraged to use methods on the Test::Builder singleton object. Test2 has
       a different approach, every tool should get a new Test2::API::Context object, and call methods on that.
       This document maps several concepts from Test::Builder to Test2.

</pre><h4><b>CONTEXT</b></h4><pre>
       First thing to do, stop using the Test::Builder singleton, in fact stop using or even loading
       Test::Builder. Instead of Test::Builder each tool you write should follow this template:

           use Test2::API qw/context/;

           sub my_tool {
               my $ctx  = context();

               ... do work ...

               $ctx-&gt;ok(1, "a passing assertion");

               $ctx-&gt;release;

               return $whatever;
           }

       The original Test::Builder style was this:

           use Test::Builder;
           my $tb = Test::Builder-&gt;new; # gets the singleton

           sub my_tool {
               ... do work ...

               $tb-&gt;ok(1, "a passing assertion");

               return $whatever;
           }

</pre><h4><b>TEST</b> <b>BUILDER</b> <b>METHODS</b></h4><pre>
       $tb-&gt;BAIL_OUT($reason)
           The context object has a 'bail' method:

               $ctx-&gt;bail($reason)

       $tb-&gt;diag($string)
       $tb-&gt;note($string)
           The context object has diag and note methods:

               $ctx-&gt;diag($string);
               $ctx-&gt;note($string);

       $tb-&gt;done_testing
           The context object has a done_testing method:

               $ctx-&gt;done_testing;

           Unlike the Test::Builder version, no arguments are allowed.

       $tb-&gt;like
       $tb-&gt;unlike
           These are not part of context, instead look at Test2::Compare and Test2::Tools::Compare.

       $tb-&gt;ok($bool, $name)
               # Preferred
               $ctx-&gt;pass($name);
               $ctx-&gt;fail($name, @diag);

               # Discouraged, but supported:
               $ctx-&gt;ok($bool, $name, \@failure_diags)

       $tb-&gt;subtest
           use the Test2::API::run_subtest() function instead. See Test2::API for documentation.

       $tb-&gt;todo_start
       $tb-&gt;todo_end
           See Test2::Tools::Todo instead.

       $tb-&gt;output, $tb-&gt;failure_output, and $tb-&gt;todo_output
           These are handled via formatters now. See Test2::Formatter and Test2::Formatter::TAP.

</pre><h4><b>LEVEL</b></h4><pre>
       Test::Builder  had  the  $Test::Builder::Level  variable  that you could modify in order to set the stack
       depth. This was useful if you needed to nest tools and wanted to make sure your file and line number were
       correct. It was also frustrating and prone to  errors.  Some  people  never  even  discovered  the  level
       variable and always had incorrect line numbers when their tools would fail.

       Test2  uses  the  context system, which solves the problem a better way. The top-most tool get a context,
       and holds on to it until it is done. Any tool nested under the first  will  find  and  use  the  original
       context instead of generating a new one. This means the level problem is solved for free, no variables to
       mess with.

       Test2 is also smart enough to honor $Test::Builder::Level if it is set.

</pre><h4><b>TODO</b></h4><pre>
       Test::Builder  used the $TODO package variable to set the TODO state. This was confusing, and easy to get
       wrong. See Test2::Tools::Todo for the modern way to accomplish a TODO state.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Test2::Manual - Primary index of the manual.

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Test2-Manual can be found at <u>https://github.com/Test-More/Test2-Suite/</u>.

</pre><h4><b>MAINTAINERS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2018 Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

       See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.38.2                                       2024-06-07              <u>Test2::Manual:...ng::<a href="../man3pm/TestBuilder.3pm.html">TestBuilder</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>