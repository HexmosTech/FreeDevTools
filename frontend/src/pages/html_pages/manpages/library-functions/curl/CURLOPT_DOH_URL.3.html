<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_DOH_URL - provide the DNS-over-HTTPS URL</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_DOH_URL - provide the DNS-over-HTTPS URL

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_DOH_URL, char *URL);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass  in  a pointer to a <u>URL</u> for the DoH server to use for name resolving. The parameter should be a char
       pointer to a null-terminated string which must be a valid and correct HTTPS URL.

       libcurl does not validate the syntax or use this variable until the transfer is issued. Even if you set a
       crazy value here, <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> still returns <u>CURLE_OK</u>.

       curl sends POST requests to the given DNS-over-HTTPS URL.

       To find the DoH server itself, which might be specified using a  name,  libcurl  uses  the  default  name
       lookup   function.   You   can  bootstrap  that  by  providing  the  address  for  the  DoH  server  with
       <u><a href="../man3/CURLOPT_RESOLVE.3.html">CURLOPT_RESOLVE</a>(3)</u>.

       The application does not have to keep the string around after setting this option.

       Using this option multiple times makes the last set string override the previous ones. Set it to NULL  to
       disable its use again.

</pre><h4><b>INHERIT</b> <b>OPTIONS</b></h4><pre>
       DoH   lookups   use   SSL   and   some   SSL   settings   from   your   transfer   are   inherited,  like
       <u><a href="../man3/CURLOPT_SSL_CTX_FUNCTION.3.html">CURLOPT_SSL_CTX_FUNCTION</a>(3)</u>.

       The hostname and peer  certificate  verification  settings  are  not  inherited  but  can  be  controlled
       separately via <u><a href="../man3/CURLOPT_DOH_SSL_VERIFYHOST.3.html">CURLOPT_DOH_SSL_VERIFYHOST</a>(3)</u> and <u><a href="../man3/CURLOPT_DOH_SSL_VERIFYPEER.3.html">CURLOPT_DOH_SSL_VERIFYPEER</a>(3)</u>.

       A set <u><a href="../man3/CURLOPT_OPENSOCKETFUNCTION.3.html">CURLOPT_OPENSOCKETFUNCTION</a>(3)</u> callback is not inherited.

</pre><h4><b>KNOWN</b> <b>BUGS</b></h4><pre>
       Even  when  DoH is set to be used with this option, there are still some name resolves that are performed
       without  it,  using  the  default  name  resolver  mechanism.  This  includes  name  resolves  done   for
       <u><a href="../man3/CURLOPT_INTERFACE.3.html">CURLOPT_INTERFACE</a>(3)</u>,  <u><a href="../man3/CURLOPT_FTPPORT.3.html">CURLOPT_FTPPORT</a>(3)</u>,  a  proxy type set to <b>CURLPROXY_SOCKS4</b> or <b>CURLPROXY_SOCKS5</b> and
       probably some more.

</pre><h4><b>DEFAULT</b></h4><pre>
       NULL

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");
           curl_easy_setopt(curl, CURLOPT_DOH_URL, "https://dns.example.com");
           curl_easy_perform(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.62.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

       Note that <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> does immediately parse the given string  so  when  given  a  bad  DoH  URL,
       libcurl might not detect the problem until it later tries to resolve a name with it.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_DNS_CACHE_TIMEOUT.3.html">CURLOPT_DNS_CACHE_TIMEOUT</a></b>(3), <b><a href="../man3/CURLOPT_RESOLVE.3.html">CURLOPT_RESOLVE</a></b>(3), <b><a href="../man3/CURLOPT_VERBOSE.3.html">CURLOPT_VERBOSE</a></b>(3)

libcurl                                            2025-06-16                                 <u><a href="../man3/CURLOPT_DOH_URL.3.html">CURLOPT_DOH_URL</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>