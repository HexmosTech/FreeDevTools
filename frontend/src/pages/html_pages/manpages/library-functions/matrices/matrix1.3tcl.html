<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>struct::matrix_v1 - Create and manipulate matrix objects</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/tcllib">tcllib_1.20+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       struct::matrix_v1 - Create and manipulate matrix objects

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b>  <b>8.2</b>

       package require <b>struct::matrix</b>  <b>?1.2.2?</b>

       <b>matrixName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <u>matrixName</u> <b>add</b> <b>column</b> ?<u>values</u>?

       <u>matrixName</u> <b>add</b> <b>row</b> ?<u>values</u>?

       <u>matrixName</u> <b>add</b> <b>columns</b> <u>n</u>

       <u>matrixName</u> <b>add</b> <b>rows</b> <u>n</u>

       <u>matrixName</u> <b>cells</b>

       <u>matrixName</u> <b>cellsize</b> <u>column</u> <u>row</u>

       <u>matrixName</u> <b>columns</b>

       <u>matrixName</u> <b>columnwidth</b> <u>column</u>

       <u>matrixName</u> <b>delete</b> <b>column</b> <u>column</u>

       <u>matrixName</u> <b>delete</b> <b>row</b> <u>row</u>

       <u>matrixName</u> <b>destroy</b>

       <u>matrixName</u> <b>format</b> <b>2string</b> ?<u>report</u>?

       <u>matrixName</u> <b>format</b> <b>2chan</b> ??<u>report</u>? <u>channel</u>?

       <u>matrixName</u> <b>get</b> <b>cell</b> <u>column</u> <u>row</u>

       <u>matrixName</u> <b>get</b> <b>column</b> <u>column</u>

       <u>matrixName</u> <b>get</b> <b>rect</b> <u>column_tl</u> <u>row_tl</u> <u>column_br</u> <u>row_br</u>

       <u>matrixName</u> <b>get</b> <b>row</b> <u>row</u>

       <u>matrixName</u> <b>insert</b> <b>column</b> <u>column</u> ?<u>values</u>?

       <u>matrixName</u> <b>insert</b> <b>row</b> <u>row</u> ?<u>values</u>?

       <u>matrixName</u> <b>link</b> ?-transpose? <u>arrayvar</u>

       <u>matrixName</u> <b>links</b>

       <u>matrixName</u> <b>rowheight</b> <u>row</u>

       <u>matrixName</u> <b>rows</b>

       <u>matrixName</u> <b>search</b> ?-nocase? ?-exact|-glob|-regexp? <b>all</b> <u>pattern</u>

       <u>matrixName</u> <b>search</b> ?-nocase? ?-exact|-glob|-regexp? <b>column</b> <u>column</u> <u>pattern</u>

       <u>matrixName</u> <b>search</b> ?-nocase? ?-exact|-glob|-regexp? <b>row</b> <u>row</u> <u>pattern</u>

       <u>matrixName</u> <b>search</b> ?-nocase? ?-exact|-glob|-regexp? <b>rect</b> <u>column_tl</u> <u>row_tl</u> <u>column_br</u> <u>row_br</u> <u>pattern</u>

       <u>matrixName</u> <b>set</b> <b>cell</b> <u>column</u> <u>row</u> <u>value</u>

       <u>matrixName</u> <b>set</b> <b>column</b> <u>column</u> <u>values</u>

       <u>matrixName</u> <b>set</b> <b>rect</b> <u>column</u> <u>row</u> <u>values</u>

       <u>matrixName</u> <b>set</b> <b>row</b> <u>row</u> <u>values</u>

       <u>matrixName</u> <b>sort</b> <b>columns</b> ?<b>-increasing</b>|<b>-decreasing</b>? <u>row</u>

       <u>matrixName</u> <b>sort</b> <b>rows</b> ?<b>-increasing</b>|<b>-decreasing</b>? <u>column</u>

       <u>matrixName</u> <b>swap</b> <b>columns</b> <u>column_a</u> <u>column_b</u>

       <u>matrixName</u> <b>swap</b> <b>rows</b> <u>row_a</u> <u>row_b</u>

       <u>matrixName</u> <b>unlink</b> <u>arrayvar</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>::struct::matrix</b> command creates a new matrix object with an associated global Tcl command whose name
       is  <u>matrixName</u>.   This  command  may  be  used  to  invoke  various operations on the matrix.  It has the
       following general form:

       <b>matrixName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
              <u>Option</u> and the <u>arg</u>s determine the exact behavior of the command.

       A matrix is a rectangular collection of cells, i.e. organized in rows and  columns.  Each  cell  contains
       exactly  one  value of arbitrary form. The cells in the matrix are addressed by pairs of integer numbers,
       with the first (left) number in the pair specifying the column and the second (right)  number  specifying
       the row the cell is in. These indices are counted from 0 upward. The special non-numeric index <b>end</b> refers
       to  the  last  row  or column in the matrix, depending on the context. Indices of the form <b>end</b>-<b>number</b> are
       counted from the end of the row or column, like they are for standard Tcl lists. Trying  to  access  non-
       existing cells causes an error.

       The  matrices  here  are created empty, i.e. they have neither rows nor columns. The user then has to add
       rows and columns as needed by his application. A specialty of this structure is the ability to export  an
       array-view  onto  its  contents.  Such  can  be used by tkTable, for example, to link the matrix into the
       display.

       The following commands are possible for matrix objects:

       <u>matrixName</u> <b>add</b> <b>column</b> ?<u>values</u>?
              Extends the matrix by one column and then acts like <b>setcolumn</b> (see below) on this  new  column  if
              there  were <u>values</u> supplied. Without <u>values</u> the new cells will be set to the empty string. The new
              column is appended immediately behind the last existing column.

       <u>matrixName</u> <b>add</b> <b>row</b> ?<u>values</u>?
              Extends the matrix by one row and then acts like <b>setrow</b> (see below) on this new row if there  were
              <u>values</u>  supplied.  Without  <u>values</u>  the  new cells will be set to the empty string. The new row is
              appended immediately behind the last existing row.

       <u>matrixName</u> <b>add</b> <b>columns</b> <u>n</u>
              Extends the matrix by <u>n</u> columns. The new cells will be set to the empty string.  The  new  columns
              are  appended immediately behind the last existing column. A value of <u>n</u> equal to or smaller than 0
              is not allowed.

       <u>matrixName</u> <b>add</b> <b>rows</b> <u>n</u>
              Extends the matrix by <u>n</u> rows. The new cells will be set to the empty  string.  The  new  rows  are
              appended  immediately behind the last existing row. A value of <u>n</u> equal to or smaller than 0 is not
              allowed.

       <u>matrixName</u> <b>cells</b>
              Returns the number of cells currently managed by the matrix. This  is  the  product  of  <b>rows</b>  and
              <b>columns</b>.

       <u>matrixName</u> <b>cellsize</b> <u>column</u> <u>row</u>
              Returns  the length of the string representation of the value currently contained in the addressed
              cell.

       <u>matrixName</u> <b>columns</b>
              Returns the number of columns currently managed by the matrix.

       <u>matrixName</u> <b>columnwidth</b> <u>column</u>
              Returns the length of the longest string representation of all the values currently  contained  in
              the  cells  of  the  addressed  column  if  these  are all spanning only one line. For cell values
              spanning multiple lines the length of their longest line goes into the computation.

       <u>matrixName</u> <b>delete</b> <b>column</b> <u>column</u>
              Deletes the specified column from the matrix and shifts all columns with higher indices one  index
              down.

       <u>matrixName</u> <b>delete</b> <b>row</b> <u>row</u>
              Deletes the specified row from the matrix and shifts all row with higher indices one index down.

       <u>matrixName</u> <b>destroy</b>
              Destroys the matrix, including its storage space and associated command.

       <u>matrixName</u> <b>format</b> <b>2string</b> ?<u>report</u>?
              Formats  the matrix using the specified report object and returns the string containing the result
              of this operation. The report has to support the <b>printmatrix</b> method. If no <u>report</u> is specified the
              system will use an internal report definition to format the matrix.

       <u>matrixName</u> <b>format</b> <b>2chan</b> ??<u>report</u>? <u>channel</u>?
              Formats the matrix using the specified report object and writes the string containing  the  result
              of  this operation into the channel. The report has to support the <b>printmatrix2channel</b> method.  If
              no <u>report</u> is specified the system will use an internal report definition to format the matrix.  If
              no <u>channel</u> is specified the system will use <b>stdout</b>.

       <u>matrixName</u> <b>get</b> <b>cell</b> <u>column</u> <u>row</u>
              Returns the value currently contained in the cell identified by row and column index.

       <u>matrixName</u> <b>get</b> <b>column</b> <u>column</u>
              Returns  a  list  containing  the values from all cells in the column identified by the index. The
              contents of the cell in row 0 are stored as the first element of this list.

       <u>matrixName</u> <b>get</b> <b>rect</b> <u>column_tl</u> <u>row_tl</u> <u>column_br</u> <u>row_br</u>
              Returns a list of lists of cell values. The values stored in the result come from  the  sub-matrix
              whose  top-left  and  bottom-right  cells are specified by <u>column_tl,</u> <u>row_tl</u> and <u>column_br,</u> <u>row_br</u>
              resp. Note that the following equations have to be true: "<u>column_tl</u> &lt;= <u>column_br</u>" and  "<u>row_tl</u>  &lt;=
              <u>row_br</u>".  The result is organized as follows: The outer list is the list of rows, its elements are
              lists representing a single row. The row with the smallest index is the first element of the outer
              list. The elements of the row lists represent the selected cell values. The cell with the smallest
              index is the first element in each row list.

       <u>matrixName</u> <b>get</b> <b>row</b> <u>row</u>
              Returns a list containing the values from all cells in  the  row  identified  by  the  index.  The
              contents of the cell in column 0 are stored as the first element of this list.

       <u>matrixName</u> <b>insert</b> <b>column</b> <u>column</u> ?<u>values</u>?
              Extends  the  matrix  by one column and then acts like <b>setcolumn</b> (see below) on this new column if
              there were <u>values</u> supplied. Without <u>values</u> the new cells will be set to the empty string. The  new
              column  is  inserted just before the column specified by the given index. This means, if <u>column</u> is
              less than or equal to zero, then the new column is inserted at the beginning of the matrix, before
              the first column. If <u>column</u> has the value <b>end</b>, or if it is greater than or equal to the number  of
              columns  in the matrix, then the new column is appended to the matrix, behind the last column. The
              old column at the chosen index and all columns with higher indices are shifted one index upward.

       <u>matrixName</u> <b>insert</b> <b>row</b> <u>row</u> ?<u>values</u>?
              Extends the matrix by one row and then acts like <b>setrow</b> (see below) on this new row if there  were
              <u>values</u>  supplied.  Without  <u>values</u>  the  new cells will be set to the empty string. The new row is
              inserted just before the row specified by the given index. This means, if  <u>row</u>  is  less  than  or
              equal  to zero, then the new row is inserted at the beginning of the matrix, before the first row.
              If <u>row</u> has the value <b>end</b>, or if it is greater than or equal to the number of rows in  the  matrix,
              then the new row is appended to the matrix, behind the last row. The old row at that index and all
              rows with higher indices are shifted one index upward.

       <u>matrixName</u> <b>link</b> ?-transpose? <u>arrayvar</u>
              Links the matrix to the specified array variable. This means that the contents of all cells in the
              matrix  is  stored  in  the  array  too,  with all changes to the matrix propagated there too. The
              contents of the cell <u>(column,row)</u> is stored in the array using the key <u>column,row</u>. If  the  option
              <b>-transpose</b> is specified the key <u>row,column</u> will be used instead. It is possible to link the matrix
              to  more  than  one  array.  Note  that  the  link is bidirectional, i.e. changes to the array are
              mirrored in the matrix too.

       <u>matrixName</u> <b>links</b>
              Returns a list containing the names of all array variables the matrix was linked to through a call
              to method <b>link</b>.

       <u>matrixName</u> <b>rowheight</b> <u>row</u>
              Returns the height of the specified row in lines. This is the highest number of lines spanned by a
              cell over all cells in the row.

       <u>matrixName</u> <b>rows</b>
              Returns the number of rows currently managed by the matrix.

       <u>matrixName</u> <b>search</b> ?-nocase? ?-exact|-glob|-regexp? <b>all</b> <u>pattern</u>
              Searches the whole matrix for cells matching the <u>pattern</u> and returns a list with all matches. Each
              item in the aforementioned list is a list itself and contains the column  and  row  index  of  the
              matching  cell,  in this order. The results are ordered by column first and row second, both times
              in ascending order. This means that matches to the left and the top  of  the  matrix  come  before
              matches to the right and down.

              The  type  of the pattern (string, glob, regular expression) is determined by the option after the
              <b>search</b> keyword. If no option is given it defaults to <b>-exact</b>.

              If the option <b>-nocase</b> is specified the search will be case-insensitive.

       <u>matrixName</u> <b>search</b> ?-nocase? ?-exact|-glob|-regexp? <b>column</b> <u>column</u> <u>pattern</u>
              Like <b>search</b> <b>all</b>, but the search is restricted to the specified column.

       <u>matrixName</u> <b>search</b> ?-nocase? ?-exact|-glob|-regexp? <b>row</b> <u>row</u> <u>pattern</u>
              Like <b>search</b> <b>all</b>, but the search is restricted to the specified row.

       <u>matrixName</u> <b>search</b> ?-nocase? ?-exact|-glob|-regexp? <b>rect</b> <u>column_tl</u> <u>row_tl</u> <u>column_br</u> <u>row_br</u> <u>pattern</u>
              Like <b>search</b> <b>all</b>, but the search is restricted to the specified rectangular area of the matrix.

       <u>matrixName</u> <b>set</b> <b>cell</b> <u>column</u> <u>row</u> <u>value</u>
              Sets the value in the cell identified by row and column index to the data in the third argument.

       <u>matrixName</u> <b>set</b> <b>column</b> <u>column</u> <u>values</u>
              Sets the values in the cells identified by the column index to the elements of the  list  provided
              as  the  third  argument. Each element of the list is assigned to one cell, with the first element
              going into the cell in row 0 and then upward. If there are less values in the list than there  are
              rows  the  remaining  rows  are set to the empty string. If there are more values in the list than
              there are rows the superfluous elements are ignored. The matrix is not extended by this operation.

       <u>matrixName</u> <b>set</b> <b>rect</b> <u>column</u> <u>row</u> <u>values</u>
              Takes a list of lists of cell values and writes them into the submatrix  whose  top-left  cell  is
              specified by the two indices. If the sublists of the outerlist are not of equal length the shorter
              sublists  will be filled with empty strings to the length of the longest sublist. If the submatrix
              specified by the top-left cell and the number of rows and columns in the <u>values</u> extends beyond the
              matrix we are modifying the over-extending parts of the values are ignored, i.e.  essentially  cut
              off. This subcommand expects its input in the format as returned by <b>getrect</b>.

       <u>matrixName</u> <b>set</b> <b>row</b> <u>row</u> <u>values</u>
              Sets  the  values in the cells identified by the row index to the elements of the list provided as
              the third argument. Each element of the list is assigned to one cell, with the first element going
              into the cell in column 0 and then upward. If there are less values in the  list  than  there  are
              columns  the  remaining  columns are set to the empty string. If there are more values in the list
              than there are columns the superfluous elements are ignored. The matrix is not  extended  by  this
              operation.

       <u>matrixName</u> <b>sort</b> <b>columns</b> ?<b>-increasing</b>|<b>-decreasing</b>? <u>row</u>
              Sorts  the  columns  in  the matrix using the data in the specified <u>row</u> as the key to sort by. The
              options <b>-increasing</b> and <b>-decreasing</b> have the same meaning as for <b>lsort</b>.  If no option is specified
              <b>-increasing</b> is assumed.

       <u>matrixName</u> <b>sort</b> <b>rows</b> ?<b>-increasing</b>|<b>-decreasing</b>? <u>column</u>
              Sorts the rows in the matrix using the data in the specified <u>column</u> as the key  to  sort  by.  The
              options <b>-increasing</b> and <b>-decreasing</b> have the same meaning as for <b>lsort</b>.  If no option is specified
              <b>-increasing</b> is assumed.

       <u>matrixName</u> <b>swap</b> <b>columns</b> <u>column_a</u> <u>column_b</u>
              Swaps the contents of the two specified columns.

       <u>matrixName</u> <b>swap</b> <b>rows</b> <u>row_a</u> <u>row_b</u>
              Swaps the contents of the two specified rows.

       <u>matrixName</u> <b>unlink</b> <u>arrayvar</u>
              Removes the link between the matrix and the specified arrayvariable, if there is one.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The  examples  below assume a 5x5 matrix M with the first row containing the values 1 to 5, with 1 in the
       top-left cell. Each other row contains the contents of the row above it,  rotated  by  one  cell  to  the
       right.

               % M getrect 0 0 4 4
               {{1 2 3 4 5} {5 1 2 3 4} {4 5 1 2 3} {3 4 5 1 2} {2 3 4 5 1}}

               % M setrect 1 1 {{0 0 0} {0 0 0} {0 0 0}}
               % M getrect 0 0 4 4
               {{1 2 3 4 5} {5 0 0 0 4} {4 0 0 0 3} {3 0 0 0 2} {2 3 4 5 1}}

       Assuming  that  the  style  definitions  in the example section of the manpage for the package <b>report</b> are
       loaded into the interpreter now an example which formats a matrix into a tabular report. The code filling
       the matrix with data is not shown.  contains useful data.

                  % ::struct::matrix m
                  % # ... fill m with data, assume 5 columns
                  % ::report::report r 5 style captionedtable 1
                  % m format 2string r
                  +---+-------------------+-------+-------+--------+
                  |000|VERSIONS:          |2:8.4a3|1:8.4a3|1:8.4a3%|
                  +---+-------------------+-------+-------+--------+
                  |001|CATCH return ok    |7      |13     |53.85   |
                  |002|CATCH return error |68     |91     |74.73   |
                  |003|CATCH no catch used|7      |14     |50.00   |
                  |004|IF if true numeric |12     |33     |36.36   |
                  |005|IF elseif          |15     |47     |31.91   |
                  |   |true numeric       |       |       |        |
                  +---+-------------------+-------+-------+--------+
                  %
                  % # alternate way of doing the above
                  % r printmatrix m

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report     such     in     the     category     <u>struct</u>    <u>::</u>    <u>matrix</u>    of    the    <u>Tcllib</u>    <u>Trackers</u>
       [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please also report any ideas for enhancements you may  have  for
       either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       matrix

</pre><h4><b>CATEGORY</b></h4><pre>
       Data structures

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2002,2019 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                1.2.2                              <u>struct::<a href="../man3tcl/matrix_v1.3tcl.html">matrix_v1</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>