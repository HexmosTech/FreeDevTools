<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XkbSetServerInternalMods - Sets the modifiers that are consumed by the server before events are delivered</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libx11-doc">libx11-doc_1.8.12-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       XkbSetServerInternalMods - Sets the modifiers that are consumed by the server before events are delivered
       to the client

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>Bool</b>  <b>XkbSetServerInternalMods</b>  <b>(Display</b>  <b>*</b><u>display</u><b>,</b>  <b>unsigned</b>  <b>int</b> <u>device_spec</u><b>,</b> <b>unsigned</b> <b>int</b> <u>affect_real</u><b>,</b>
              <b>unsigned</b> <b>int</b> <u>real_values</u><b>,</b> <b>unsigned</b> <b>int</b> <u>affect_virtual</u><b>,</b> <b>unsigned</b> <b>int</b> <u>virtual_values</u><b>);</b>

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>display</u>
              connection to the X server

       <u>device_spec</u>
              device ID, or XkbUseCoreKbd

       <u>affect_real</u>
              mask of real modifiers affected by this call

       <u>real_values</u>
              values for affected real modifiers (1=&gt;set, 0=&gt;unset)

       <u>affect_virtual</u>
              mask of virtual modifiers affected by this call

       <u>virtual_values</u>
              values for affected virtual modifiers (1=&gt;set, 0=&gt;unset)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The core protocol does not provide any means to prevent a modifier from being reported in events sent  to
       clients;  Xkb,  however  makes  this  possible  via the InternalMods control. It specifies modifiers that
       should be consumed by the server and not reported to clients. When a key is pressed and a  modifier  that
       has  its bit set in the InternalMods control is reported to the server, the server uses the modifier when
       determining the actions to apply for the key. The server then clears the  bit,  so  it  is  not  actually
       reported  to  the  client.  In  addition, modifiers specified in the InternalMods control are not used to
       determine grabs and are not used to calculate core protocol compatibility state.

       Manipulate the InternalMods control via  the  <u>internal</u>  field  in  the  XkbControlsRec  structure,  using
       <u>XkbSetControls</u> and <u>XkbGetControls.</u>  Alternatively, use <u>XkbSetServerInternalMods.</u>

       <u>XkbSetServerInternalMods</u>  sends  a request to the server to change the internal modifiers consumed by the
       server.  <u>affect_real</u> and <u>real_values</u> are masks of real modifier bits indicating which real modifiers  are
       to  be  added  and  removed  from  the  server's  internal  modifiers control. Modifiers selected by both
       <u>affect_real</u> and <u>real_values</u> are added to the server's  internal  modifiers  control;  those  selected  by
       <u>affect_real</u>  but  not  by <u>real_values</u> are removed from the server's internal modifiers mask. Valid values
       for <u>affect_real</u> and <u>real_values</u> consist of any combination of the eight core  modifier  bits:  ShiftMask,
       LockMask,  ControlMask,  Mod1Mask  -  Mod5Mask.   <u>affect_virtual</u>  and <u>virtual_values</u> are masks of virtual
       modifier bits indicating which virtual modifiers are to be added and removed from the  server's  internal
       modifiers control. Modifiers selected by both <u>affect_virtual</u> and <u>virtual_values</u> are added to the server's
       internal  modifiers  control; those selected by <u>affect_virtual</u> but not by <u>virtual_values</u> are removed from
       the server's internal modifiers control. See below for a discussion of virtual modifier masks to  use  in
       <u>affect_virtual</u> and <u>virtual_values.</u> <u>XkbSetServerInternalMods</u> does not wait for a reply from the server. It
       returns True if the request was sent and False otherwise.

       Virtual  modifiers  are  named  by  converting their string name to an X Atom and storing the Atom in the
       <u>names.vmods</u> array in an XkbDescRec structure. The position of  a  name  Atom  in  the  <u>names.vmods</u>  array
       defines  the  bit  position used to represent the virtual modifier and also the index used when accessing
       virtual modifier information in arrays: the name in the i-th (0 relative) entry of <u>names.vmods</u> is the  i-
       th  virtual  modifier, represented by the mask (1&lt;&lt;i). Throughout Xkb, various functions have a parameter
       that is a mask representing virtual modifier choices. In each case, the i-th bit (0 relative) of the mask
       represents the i-th virtual modifier.

       To set the name of a virtual modifier, use <u>XkbSetNames,</u> using XkbVirtualModNamesMask  in  <u>which</u>  and  the
       name in the <u>xkb</u> argument; to retrieve indicator names, use <u>XkbGetNames.</u>

</pre><h4><b>STRUCTURES</b></h4><pre>
       The  complete  description  of an Xkb keyboard is given by an XkbDescRec. The component structures in the
       XkbDescRec represent the major Xkb components outlined in Figure 1.1.

       typedef struct {
           struct _XDisplay * display;      /* connection to X server */
           unsigned short     flags;        /* private to Xkb, do not modify */
           unsigned short     device_spec;  /* device of interest */
           KeyCode            min_key_code; /* minimum keycode for device */
           KeyCode            max_key_code; /* maximum keycode for device */
           XkbControlsPtr     ctrls;        /* controls */
           XkbServerMapPtr    server;       /* server keymap */
           XkbClientMapPtr    map;          /* client keymap */
           XkbIndicatorPtr    indicators;   /* indicator map */
           XkbNamesPtr        names;        /* names for all components */
           XkbCompatMapPtr    compat;       /* compatibility map */
           XkbGeometryPtr     geom;         /* physical geometry of keyboard */
       } XkbDescRec, *XkbDescPtr;

       The display field points to an X display structure. The flags field is private to the library:  modifying
       flags  may  yield  unpredictable  results.  The  device_spec field specifies the device identifier of the
       keyboard input device, or XkbUseCoreKeyboard, which specifies the core keyboard device. The  min_key_code
       and max_key_code fields specify the least and greatest keycode that can be returned by the keyboard.

       Each structure component has a corresponding mask bit that is used in function calls to indicate that the
       structure  should  be  manipulated  in  some manner, such as allocating it or freeing it. These masks and
       their relationships to the fields in the XkbDescRec are shown in Table 1.

               Table 1 Mask Bits for XkbDescRec
       ──────────────────────────────────────────────────
       Mask Bit               XkbDescRec Field   Value
       ──────────────────────────────────────────────────
       XkbControlsMask        ctrls              (1L&lt;&lt;0)
       XkbServerMapMask       server             (1L&lt;&lt;1)
       XkbIClientMapMask      map                (1L&lt;&lt;2)
       XkbIndicatorMapMask    indicators         (1L&lt;&lt;3)
       XkbNamesMask           names              (1L&lt;&lt;4)
       XkbCompatMapMask       compat             (1L&lt;&lt;5)
       XkbGeometryMask        geom               (1L&lt;&lt;6)
       XkbAllComponentsMask   All Fields         (0x7f)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/XkbGetControls.3.html">XkbGetControls</a></b>(3), <b><a href="../man3/XkbGetNames.3.html">XkbGetNames</a></b>(3), <b><a href="../man3/XkbSetControls.3.html">XkbSetControls</a></b>(3), <b><a href="../man3/XkbSetNames.3.html">XkbSetNames</a></b>(3)

X Version 11                                      libX11 1.8.12                      <u><a href="../man3/XkbSetServerInternalMods.3.html">XkbSetServerInternalMods</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>