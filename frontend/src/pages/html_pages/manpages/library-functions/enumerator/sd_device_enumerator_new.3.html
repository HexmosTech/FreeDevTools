<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_device_enumerator_new, sd_device_enumerator_ref, sd_device_enumerator_unref,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_device_enumerator_new, sd_device_enumerator_ref, sd_device_enumerator_unref,
       sd_device_enumerator_unrefp - Create, reference, and release a device enumerator object

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-device.h&gt;</b>

       <b>int</b> <b>sd_device_enumerator_new(sd_device_enumerator</b> <b>**</b><u>ret</u><b>);</b>

       <b>sd_device_enumerator*</b> <b>sd_device_enumerator_ref(sd_device_enumerator</b> <b>*</b><u>enumerator</u><b>);</b>

       <b>sd_device_enumerator*</b> <b>sd_device_enumerator_unref(sd_device_enumerator</b> <b>*</b><u>enumerator</u><b>);</b>

       <b>void</b> <b>sd_device_enumerator_unrefp(sd_device_enumerator</b> <b>**</b><u>enumerator</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>sd_device_enumerator</b> family of functions provides a way to iterate over devices recognized by
       <b><a href="../man8/systemd-udevd.8.html">systemd-udevd</a></b>(8). The enumerator allows filtering and matching devices by subsystem, properties and other
       attributes.

       <b>sd_device_enumerator_new()</b> creates a new device enumerator object and stores the result in the pointer
       referenced by <u>ret</u>. Returns 0 on success, or a negative errno-style error code on failure.

       <b>sd_device_enumerator_ref()</b> increases the reference count of the specified <u>enumerator</u> by one.

       <b>sd_device_enumerator_unref()</b> decreases the reference count of the <u>enumerator</u> by one. When the reference
       count reaches zero, the enumerator object is destroyed and cannot be used anymore, so further calls to
       <b>sd_device_enumerator_unref()</b> or <b>sd_device_enumerator_unrefp()</b> are illegal.

       <b>sd_device_enumerator_unrefp()</b> is similar to <b>sd_device_enumerator_unref()</b> but takes a pointer to a pointer
       to an <b>sd_device_enumerator</b> object. This call is useful in conjunction with GCC's and LLVM's <b>Clean-up</b>
       <b>Variable</b> <b>Attribute</b>[1]. Note that this function is defined as an inline function. Use a declaration like
       the following, in order to allocate a <b>sd_device_enumerator</b> object that is freed automatically as the code
       block is left:

           {
             __attribute__((cleanup(sd_device_enumerator_unrefp))) sd_device_enumerator *enumerator = NULL;
             int r;
             ...
             r = sd_device_enumerator_new(&amp;enumerator);
             if (r &lt; 0)
               fprintf(stderr, "Failed to allocate sd_device_enumerator: %s\n", strerror(-r));
             ...
           }

       <b>sd_device_enumerator_ref()</b> and <b>sd_device_enumerator_unref()</b> execute no operation if the <u>enumerator</u> is
       <b>NULL</b>.  <b>sd_device_enumerator_unrefp()</b> will first dereference its argument, which must not be <b>NULL</b>, and
       will execute no operation if <u>that</u> is <b>NULL</b>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>sd_device_enumerator_new()</b> returns 0 on success or a negative errno-style error code on failure.

       <b>sd_device_enumerator_ref()</b> always returns the enumerator pointer.

       <b>sd_device_enumerator_unref()</b> always returns <b>NULL</b>.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-ENOMEM</b>
           Memory allocation failed.

       <b>-EINVAL</b>
           The argument is invalid.

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>Example</b> <b>1.</b> <b>Using</b> <b>sd_device_enumerator_new()</b>

           /* SPDX-License-Identifier: MIT-0 */

           #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
           #include &lt;systemd/sd-device.h&gt;

           int main(void) {
               sd_device_enumerator *enumerator;
               int r;

               r = sd_device_enumerator_new(&amp;enumerator);
               if (r &lt; 0) {
                   fprintf(stderr, "Failed to create enumerator: %s\n", strerror(-r));
                   return 1;
               }

               sd_device_enumerator_ref(enumerator);
               sd_device_enumerator_unref(enumerator);

               sd_device_enumerator_unref(enumerator);

               return 0;
           }

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_device_enumerator_new()</b>, <b>sd_device_enumerator_ref()</b>, <b>sd_device_enumerator_unref()</b>, and
       <b>sd_device_enumerator_unrefp()</b> were added in version 240.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/sd_device_ref.3.html">sd_device_ref</a></b>(3), <b><a href="../man3/sd_device_enumerator_add_match_parent.3.html">sd_device_enumerator_add_match_parent</a></b>(3)

</pre><h4><b>NOTES</b></h4><pre>
        1. Clean-up Variable Attribute
           https://gcc.gnu.org/onlinedocs/gcc/Common-Variable-Attributes.html

systemd 257.7                                                                        <u><a href="../man3/SD_DEVICE_ENUMERATOR_NEW.3.html">SD_DEVICE_ENUMERATOR_NEW</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>