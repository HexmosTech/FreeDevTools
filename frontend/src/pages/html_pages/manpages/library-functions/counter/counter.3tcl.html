<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>counter - Procedures for counters and histograms</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       counter - Procedures for counters and histograms

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>counter</b> <b>?2.0.6?</b>

       <b>::counter::init</b> <u>tag</u> <u>args</u>

       <b>::counter::count</b> <u>tag</u> ?<u>delta</u>? ?<u>instance</u>?

       <b>::counter::start</b> <u>tag</u> <u>instance</u>

       <b>::counter::stop</b> <u>tag</u> <u>instance</u>

       <b>::counter::get</b> <u>tag</u> <u>args</u>

       <b>::counter::exists</b> <u>tag</u>

       <b>::counter::names</b>

       <b>::counter::histHtmlDisplay</b> <u>tag</u> <u>args</u>

       <b>::counter::reset</b> <u>tag</u> <u>args</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>counter</b>  package  provides  a  counter  facility  and can compute statistics and histograms over the
       collected data.

       <b>::counter::init</b> <u>tag</u> <u>args</u>
              This defines a counter with the name <u>tag</u>.  The <u>args</u> determines the characteristics of the counter.
              The <u>args</u> are

              <b>-group</b> <u>name</u>
                     Keep  a  grouped  counter  where  the  name  of  the  histogram  bucket  is   passed   into
                     <b>::counter::count</b>.

              <b>-hist</b> <u>bucketsize</u>
                     Accumulate  the  counter  into  histogram  buckets of size <u>bucketsize</u>.  For example, if the
                     samples are millisecond time values and  <u>bucketsize</u>  is  10,  then  each  histogram  bucket
                     represents time values of 0 to 10 msec, 10 to 20 msec, 20 to 30 msec, and so on.

              <b>-hist2x</b> <u>bucketsize</u>
                     Accumulate  the  statistic  into  histogram  buckets.   The  size  of  the  first bucket is
                     <u>bucketsize</u>, each other bucket holds values 2 times the size of the  previous  bucket.   For
                     example,  if <u>bucketsize</u> is 10, then each histogram bucket represents time values of 0 to 10
                     msec, 10 to 20 msec, 20 to 40 msec, 40 to 80 msec, and so on.

              <b>-hist10x</b> <u>bucketsize</u>
                     Accumulate the statistic  into  histogram  buckets.   The  size  of  the  first  bucket  is
                     <u>bucketsize</u>,  each  other bucket holds values 10 times the size of the previous bucket.  For
                     example, if <u>bucketsize</u> is 10, then each histogram bucket represents time values of 0 to  10
                     msec, 10 to 100 msec, 100 to 1000 msec, and so on.

              <b>-lastn</b> <u>N</u>
                     Save  the  last  <u>N</u>  values  of  the counter to maintain a "running average" over the last <u>N</u>
                     values.

              <b>-timehist</b> <u>secsPerMinute</u>
                     Keep a time-based histogram.  The counter is summed into a histogram bucket  based  on  the
                     current   time.    There  are  60  per-minute  buckets  that  have  a  size  determined  by
                     <u>secsPerMinute</u>, which is normally 60, but for testing purposes can be  less.   Every  "hour"
                     (i.e., 60 "minutes") the contents of the per-minute buckets are summed into the next hourly
                     bucket.   Every  24  "hours"  the contents of the per-hour buckets are summed into the next
                     daily bucket.  The counter package keeps all time-based histograms in sync,  so  the  first
                     <u>secsPerMinute</u> value seen by the package is used for all subsequent time-based histograms.

       <b>::counter::count</b> <u>tag</u> ?<u>delta</u>? ?<u>instance</u>?
              Increment  the  counter identified by <u>tag</u>.  The default increment is 1, although you can increment
              by any value, integer  or  real,  by  specifying  <u>delta</u>.   You  must  declare  each  counter  with
              <b>::counter::init</b>  to  define  the  characteristics  of  counter before you start to use it.  If the
              counter type is <b>-group</b>, then the counter identified by <u>instance</u> is incremented.

       <b>::counter::start</b> <u>tag</u> <u>instance</u>
              Record the starting time of an interval.  The <u>tag</u> is the name of the counter defined  as  a  <b>-hist</b>
              value-based histogram.  The <u>instance</u> is used to distinguish this interval from any other intervals
              that might be overlapping this one.

       <b>::counter::stop</b> <u>tag</u> <u>instance</u>
              Record  the  ending  time of an interval.  The delta time since the corresponding <b>::counter::start</b>
              call for <u>instance</u> is recorded in the histogram identified by <u>tag</u>.

       <b>::counter::get</b> <u>tag</u> <u>args</u>
              Return statistics about a counter identified by <u>tag</u>.  The <u>args</u> determine what value to return:

              <b>-total</b> Return the total value of the counter.  This is the default if <u>args</u> is not specified.

              <b>-totalVar</b>
                     Return the name of the total variable.  Useful for specifying with -textvariable  in  a  Tk
                     widget.

              <b>-N</b>     Return the number of samples accumulated into the counter.

              <b>-avg</b>   Return the average of samples accumulated into the counter.

              <b>-avgn</b>  Return  the  average  over  the  last  <u>N</u>  samples  taken.   The  <u>N</u>  value  is  set  in  the
                     <b>::counter::init</b> call.

              <b>-hist</b> <u>bucket</u>
                     If <u>bucket</u> is specified, then the value  in  that  bucket  of  the  histogram  is  returned.
                     Otherwise the complete histogram is returned in array get format sorted by bucket.

              <b>-histVar</b>
                     Return the name of the histogram array variable.

              <b>-histHour</b>
                     Return the complete hourly histogram in array get format sorted by bucket.

              <b>-histHourVar</b>
                     Return the name of the hourly histogram array variable.

              <b>-histDay</b>
                     Return the complete daily histogram in array get format sorted by bucket.

              <b>-histDayVar</b>
                     Return the name of the daily histogram array variable.

              <b>-resetDate</b>
                     Return the clock seconds value recorded when the counter was last reset.

              <b>-all</b>   Return  an  array get of the array used to store the counter.  This includes the total, the
                     number of samples (N), and any  type-specific  information.   This  does  not  include  the
                     histogram array.

       <b>::counter::exists</b> <u>tag</u>
              Returns 1 if the counter is defined.

       <b>::counter::names</b>
              Returns a list of all counters defined.

       <b>::counter::histHtmlDisplay</b> <u>tag</u> <u>args</u>
              Generate  HTML  to display a histogram for a counter.  The <u>args</u> control the format of the display.
              They are:

              <b>-title</b> <u>string</u>
                     Label to display above bar chart

              <b>-unit</b> <u>unit</u>
                     Specify <b>minutes</b>, <b>hours</b>, or <b>days</b> for the time-base histograms.  For value-based  histograms,
                     the <u>unit</u> is used in the title.

              <b>-images</b> <u>url</u>
                     URL of /images directory.

              <b>-gif</b> <u>filename</u>
                     Image for normal histogram bars.  The <u>filename</u> is relative to the <b>-images</b> directory.

              <b>-ongif</b> <u>filename</u>
                     Image for the active histogram bar.  The <u>filename</u> is relative to the <b>-images</b> directory.

              <b>-max</b> <u>N</u> Maximum number of value-based buckets to display.

              <b>-height</b> <u>N</u>
                     Pixel height of the highest bar.

              <b>-width</b> <u>N</u>
                     Pixel width of each bar.

              <b>-skip</b> <u>N</u>
                     Buckets to skip when labeling value-based histograms.

              <b>-format</b> <u>string</u>
                     Format used to display labels of buckets.

              <b>-text</b> <u>boolean</u>
                     If 1, a text version of the histogram is dumped, otherwise a graphical one is generated.

       <b>::counter::reset</b> <u>tag</u> <u>args</u>
              Resets  the  counter  with  the  name  <u>tag</u>  to  an  initial  state.  The  <u>args</u>  determine  the new
              characteristics of the counter. They have the same meaning as described for <b>::counter::init</b>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the  category  <u>counter</u>  of  the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       counting, histogram, statistics, tallying

</pre><h4><b>CATEGORY</b></h4><pre>
       Data structures

tcllib                                                2.0.6                                        <u><a href="../man3tcl/counter.3tcl.html">counter</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>