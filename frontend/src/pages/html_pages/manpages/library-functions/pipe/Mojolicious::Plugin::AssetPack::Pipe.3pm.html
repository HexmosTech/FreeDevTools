<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mojolicious::Plugin::AssetPack::Pipe - Base class for a pipe</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmojolicious-plugin-assetpack-perl">libmojolicious-plugin-assetpack-perl_2.15-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mojolicious::Plugin::AssetPack::Pipe - Base class for a pipe

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Write</b> <b>a</b> <b>custom</b> <b>pipe</b>
         package MyApp::MyCoolPipe;
         use Mojo::Base "Mojolicious::Plugin::AssetPack::Pipe";
         use Mojolicious::Plugin::AssetPack::Util qw(diag DEBUG);

         sub process {
           my ($self, $assets) = @_;

           # Normally a Mojolicious::Plugin::AssetPack::Store object
           my $store = $self-&gt;assetpack-&gt;store;

           # Loop over Mojolicious::Plugin::AssetPack::Asset objects
           $assets-&gt;each(
             sub {
               my ($asset, $index) = @_;

               # Skip every file that is not css
               return if $asset-&gt;format ne "css";

               # Change $attr if this pipe will modify $asset attributes
               my $attr    = $asset-&gt;TO_JSON;
               my $content = $asset-&gt;content;

               # Private name to load/save meta data under
               $attr-&gt;{key} = "coolpipe";

               # Return asset if already processed
               if ($content !~ /white/ and $file = $store-&gt;load($attr)) {
                 return $asset-&gt;content($file);
               }

               # Process asset content
               diag q(Replace white with red in "%s".), $asset-&gt;url if DEBUG;
               $content =~ s!white!red!g;
               $asset-&gt;content($store-&gt;save(\$content, $attr))-&gt;<a href="../man1/minified.1.html">minified</a>(1);
             }
           );
         }

   <b>Use</b> <b>the</b> <b>custom</b> <b>pipe</b>
         use Mojolicious::Lite;
         plugin AssetPack =&gt; {pipes =&gt; [qw(MyApp::MyCoolPipe Css)]};

       Note that the above will not load the other default pipes, such as
       Mojolicious::Plugin::AssetPack::Pipe::JavaScript.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is the base class for all pipe classes.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>assetpack</b>
         $obj = $self-&gt;assetpack;

       Holds a Mojolicious::Plugin::AssetPack object.

   <b>topic</b>
         $str = $self-&gt;topic;
         $self = $self-&gt;topic("app.css");

       Returns the name of the current asset topic.

</pre><h4><b>METHODS</b></h4><pre>
   <b>after_process</b>
         $self-&gt;after_process(Mojo::Collection-&gt;new);

       "process" in Mojolicious::Plugin::AssetPack will call this method before any of the pipe "process" method
       is called.

       Note that this method is not defined in Mojolicious::Plugin::AssetPack::Pipe!

   <b>app</b>
         $obh = $self-&gt;app;

       Returns the Mojolicious application object.

   <b>before_process</b>
         $self-&gt;before_process(Mojo::Collection-&gt;new);

       "process" in Mojolicious::Plugin::AssetPack will call this method after all of the pipes "process" method
       is called.

       Note that this method is not defined in Mojolicious::Plugin::AssetPack::Pipe!

   <b>process</b>
         $self-&gt;process(Mojo::Collection-&gt;new);

       A method used to process the assets.  Each of the element in the collection will be a
       Mojolicious::Plugin::AssetPack::Asset object or an object with the same API.

       This method need to be defined in the subclass.

   <b>run</b>
         $self-&gt;run([som_app =&gt; @args], \$stdin, \$stdout, ...);

       See "run3" in IPC::Run3 for details about the arguments. This method will try to call _install_some_app()
       unless "som_app" was found in PATH. This method could then try to install the application and must return
       the path to the installed application.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       • Mojolicious::Plugin::AssetPack

       • Mojolicious::Plugin::AssetPack::Asset

       • Mojolicious::Plugin::AssetPack::Store

       • Mojolicious::Plugin::AssetPack::Util

perl v5.40.0                                       2024-12-07             <u>Mojolicious::Pl...AssetPack::<a href="../man3pm/Pipe.3pm.html">Pipe</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>