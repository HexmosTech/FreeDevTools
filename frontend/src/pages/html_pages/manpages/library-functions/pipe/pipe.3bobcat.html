<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBB::Pipe - Defines a system level communication pipe</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbobcat-dev">libbobcat-dev_6.07.01-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FBB::Pipe - Defines a system level communication pipe

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;bobcat/pipe&gt;</b>
       Linking option: <u>-lbobcat</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>FBB::Pipe</b>  objects  may be used to construct a <u>pipe</u>. <u>Pipe</u> objects offer a simple interface to the reading
       and writing ends of pipes. <u>Pipe</u> objects are object-wrappers around the <b><a href="../man2/pipe.2.html">pipe</a></b>(2) system call.

       A <u>Pipe</u> object which is created just before a program forks can be used to set up a line of  communication
       between  the  parent and child process. Information which is written by the child process to its standard
       output stream can be redirected to the writing  end  of  the  pipe  (using  the  <u>writtenBy</u>  member).  The
       information  appearing  at  the  reading  end of the pipe can then be extracted using, e.g., an <u>IFdStream</u>
       object, initialized with the <u>Pipe</u>’s reading file descriptor, or the  reading  end  of  the  pipe  can  be
       redirected  to  an  existing stream whose file descriptor is known, like <u>cin</u> (which uses the <u>STDIN_FILENO</u>
       file descriptor).

       When a <u>Pipe</u> object goes out of scope, no <b><a href="../man2/close.2.html">close</a></b>(2) operation is performed on the pipe’s file  descriptors.
       After  setting  up  the pipe using the <u>Pipe’s</u> member functions and passing the <u>Pipe’s</u> file descriptors to
       code that uses the <u>Pipe’s</u> descriptors, the <u>Pipe</u> object  might  even  be  destroyed.  The  using  code  is
       responsible for closing the pipe. If the pipe should be closed at destruction time, then a class could be
       derived  from <b><a href="../man3bobcat/Pipe.3bobcat.html">Pipe</a></b>(3bobcat), whose destructor may then close the pipe. Alternatively, <u>Pope’s</u> <u>close</u> member
       can be called.

       The value -1 indicates that a file descriptor does not refer to a <b><a href="../man2/pipe.2.html">pipe</a></b>(2) file descriptor.

</pre><h4><b>NAMESPACE</b></h4><pre>
       <b>FBB</b>
       All constructors, members, operators and manipulators, mentioned in this man-page,  are  defined  in  the
       namespace <b>FBB</b>.

</pre><h4><b>INHERITS</b> <b>FROM</b></h4><pre>
       -

</pre><h4><b>CONSTRUCTORS</b></h4><pre>
       o      <b>Pipe()</b>:
              The default <u>Pipe</u> constructor constructs a pipe, calling <b><a href="../man2/pipe.2.html">pipe</a></b>(2).

              This  constructor  throws  an <u>Exception</u> exception if the default <u>Pipe</u> constructor did not properly
              complete.  The thrown <b>Exception</b> object’s <u>which()</u> member shows the system’s <u>errno</u> value set by  the
              failing <b><a href="../man2/pipe.2.html">pipe</a></b>(2) function.

       o      <b>Pipe(Pipe</b> <b>&amp;&amp;tmp)</b>:
              The  move  constructor  moves  the  temporary  object’s  file descriptors to the <u>Pipe</u> object being
              constructed.

       o      <b>Pipe(int</b> <b>const</b> <b>*fd)</b>:
              This constructor expects two file descriptors, referring to the read and write file descriptors as
              returned by <b><a href="../man2/pipe.2.html">pipe</a></b>(2).

       o      <b>Pipe(bool</b> <b>initialize)</b>:
              This constructor can be used when the <u>Pipe</u> object should not be associated with an existing  pipe.
              Instead  when, <u>initialize</u> <u>==</u> <u>false</u>, it initializes its read and write file descriptors to -1. This
              constructor may be used by classes that define <u>Pipe</u> data members which can only open  their  pipes
              after  the  object  has been constructed. Having constructing a <u>Pipe</u> <u>obj{</u> <u>false</u> <u>}</u> object it can be
              associated with an open pipe using <u>obj</u> <u>=</u> <u>Pipe{}</u>. or <u>obj.reset()</u>. When passing the argument <u>true</u> it
              initializes its pipe (cf. <b><a href="../man2/pipe.2.html">pipe</a></b>(2)).  Copy construction and copy assignment are not defined.

       Note that <u>Pipe’s</u> destructor does not close the pipe’s file descriptors. To close the pipes <u>close</u> must  be
       called.

</pre><h4><b>OVERLOADED</b> <b>OPERATOR</b></h4><pre>
       o      <b>Pipe</b> <b>&amp;operator=(Pipe</b> <b>&amp;&amp;tmp)</b>:
              The  overloaded  move  assignment  operator  closes  the current pipe and moves <u>tmp’s</u> pipes to the
              current <u>Pipe</u> object.

</pre><h4><b>MEMBER</b> <b>FUNCTIONS</b></h4><pre>
       o      <b>void</b> <b>close()</b>:
              Both file descriptors of the <u>Pipe</u> object are closed;

       o      <b>void</b> <b>closeReadFd()</b>:
              The file descriptor of the <u>Pipe</u> object that is associated with the reading  end  of  the  pipe  is
              closed;

       o      <b>void</b> <b>closeWriteFd()</b>:
              The  file  descriptor  of  the  <u>Pipe</u> object that is associated with the writing end of the pipe is
              closed;

       o      <b>int</b> <b>readFd()</b> <b>const</b>:
              Returns the pipe’s file descriptor that is used for reading

       o      <b>void</b> <b>readFrom(int</b> <b>filedescriptor)</b>:
              Sets up redirection from the internal <u>read</u> filedescriptor to the given filedescriptor: information
              written to the write-end of the pipe may be retrieved  by  extracting  the  information  from  the
              stream   that   is   associated   with  the  indicated  file  descriptor.  E.g.,  after  the  call
              <u>readFrom(STDIN_FILENO)</u> information inserted into the write-end of the pipe can be  retrieved  from
              <u>cin</u>. The original read file descriptor and the pipe’s write file descriptor are closed.

       o      <b>void</b> <b>readFrom(int</b> <b>const</b> <b>*filedescriptors,</b> <b>size_t</b> <b>n)</b>:
              Sets  up  redirection  from  the  internal  <u>read</u>  filedescriptor  to  the  given  filedescriptors:
              information is read from the <u>Pipe</u> object when reading from any of the <b>n</b> provided  filedescriptors.
              The original read file descriptor and the pipe’s write file descriptor are closed.

       o      <b>int</b> <b>readOnly()</b>:
              Closes  the writing end of the pipe, returns the reading end’s file descriptor. This member can be
              used, e.g., to construct an <u>IFdStream</u> object to extract the information that is inserted into  the
              write-end of the pipe.

       o      <b>int</b> <b>readOnlyFd()</b>:
              Same  as the previous member, but sets the internally used read file descriptor to -1 (this member
              can be used to, e.g., pass the read file descriptor to another object which eventually closes  the
              pipe’s reading end).

       o      <b>void</b> <b>reset()</b>:
              Closes the the current pipe and reopens it with new pipe read and write destriptors.

       o      <b>void</b> <b>reset(int</b> <b>const</b> <b>*fds)</b>:
              Closes  the  the  current pipe and reopens it with the read and write file destriptors provided by
              the first two elements of <u>fds</u>.

       o      <b>void</b> <b>swap(Pipe</b> <b>&amp;other)</b>:
              The current and other <u>Pipe</u> objects are swapped. Following this call the current <u>Pipe</u> objects refer
              to the other object’s pipe file descriptors and vice versa.

       o      <b>int</b> <b>writeFd()</b> <b>const</b>:
              Returns the pipe’s file descriptor that is used for writing.

       o      <b>void</b> <b>writtenBy(int</b> <b>filedescriptor)</b>:
              Sets  up  redirection  from  the  internal  <u>write</u>  filedescriptor  to  the  given  filedescriptor:
              information is written to the <u>Pipe</u> object when writing to the provided filedescriptor. E.g., after
              the  call  <u>writtenBy(STDOUT_FILENO)</u> information sent to the standard output stream (by either <u>cout</u>
              or by a child process (cf. <b><a href="../man3/exec.3.html">exec</a></b>(3))) is inserted into the write-end of  the  pipe.   The  original
              write file descriptor and the pipe’s read file descriptor are closed.

       o      <b>void</b> <b>writtenBy(int</b> <b>const</b> <b>*filedescriptors,</b> <b>size_t</b> <b>n)</b>:
              Sets  up  redirection  from  the  internal  <u>write</u>  filedescriptor  to  the  given filedescriptors:
              information is inserted into the write-end of the <u>Pipe</u> object  when  writing  to  each  of  the  <b>n</b>
              provided  filedescriptors.   E.g.,  when passing an array of two <u>int</u> values, respectively equal to
              <u>STDOUT_FILENO</u> and <u>STDERR_FILENO</u> to this member, all information which is thereafter  sent  to  the
              standard  output  or error streams is inserted into the write-end of the pipe.  The original write
              file descriptor and the pipe’s read file descriptor are closed.

       o      <b>int</b> <b>writeOnly()</b>:
              Closes the reading end of the pipe, returns the writing end’s file descriptor.

       o      <b>int</b> <b>writeOnlyFd()</b>:
              Same as the previous member, but sets the internally used write file descriptor to -1 (this member
              can be used to, e.g., pass the write file descriptor to another object which eventually closes the
              pipe’s writing end).

</pre><h4><b>PROTECTED</b> <b>ENUMERATION</b></h4><pre>
       The <b>RW</b> protected enumeration has the following elements:

       o      <b>READ</b>:
              The index in <b>d_fd[]</b> (see below) of the element holding the pipe’s reading file descriptor;

       o      <b>WRITE</b>:
              The index in <b>d_fd[]</b> (see below) of the element holding the pipe’s writing file descriptor

</pre><h4><b>PROTECTED</b> <b>MEMBER</b> <b>FUNCTION</b></h4><pre>
       o      <b>void</b> <b>close(RW</b> <b>rw)</b>:
              When passing argument RW::READ to this member the reading end of the <u>Pipe</u> object’s pipe is closed.
              When passing argument RW::WRITE the writing end of the <u>Pipe</u> object’s pipe is closed.

       o      <b>int</b> <b>*fd()</b>:
              Returns a pointer to the two file descriptors (respectively READ and WRITE)  currently used by the
              <u>Pipe</u> object.

</pre><h4><b>EXAMPLE</b></h4><pre>
           #include &lt;bobcat/pipe&gt;
           #include &lt;sys/types.h&gt;
           #include &lt;sys/wait.h&gt;
           #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;
           #include &lt;iostream&gt;
           #include &lt;string&gt;

           using namespace std;
           using namespace FBB;

           int main()
           {
               Pipe pipe;                         // construct a pipe

               cout &lt;&lt; "Read file descriptor: " &lt;&lt; pipe.readFd() &lt;&lt; "\n"
                       "Write file descriptor: " &lt;&lt; pipe.writeFd() &lt;&lt; endl;

               int pid = fork();

               if (pid == -1)
                   return 1;

               if (pid == 0)                       //child
               {
                   pipe.readFrom(STDIN_FILENO);    // read what goes into the pipe

                   string s;

                   getline(cin, s);
                   cout &lt;&lt; "CHILD: Got `" &lt;&lt; s &lt;&lt; "’\n";

                   getline(cin, s);
                   cout &lt;&lt; "CHILD: Got `" &lt;&lt; s &lt;&lt; "’\n";

                   return 0;
               }

               pipe.writtenBy(STDOUT_FILENO);      // write to the pipe via cout

               cout &lt;&lt; "first line" &lt;&lt; "\n"
                       "second line" &lt;&lt; ’\n’;

               waitpid(pid, 0, 0);
           }

       See also the 2nd example at <b><a href="../man3bobcat/fork.3bobcat.html">fork</a></b>(3bobcat)

</pre><h4><b>FILES</b></h4><pre>
       <u>bobcat/pipe</u> - defines the class interface

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/bobcat.7.html">bobcat</a></b>(7), <b><a href="../man3bobcat/fork.3bobcat.html">fork</a></b>(3bobcat), <b><a href="../man2/pipe.2.html">pipe</a></b>(2), <b><a href="../man3/mkfifo.3.html">mkfifo</a></b>(3)

</pre><h4><b>BUGS</b></h4><pre>
       Note that when a <u>Pipe</u> object goes out of scope, no <b><a href="../man2/close.2.html">close</a></b>(2) operation is performed on the pipe’s ends. If
       the pipe should be closed by the destructor, derive a class from <b><a href="../man3bobcat/Pipe.3bobcat.html">Pipe</a></b>(3bobcat), whose destructor performs
       the required closing-operation.

</pre><h4><b>BOBCAT</b> <b>PROJECT</b> <b>FILES</b></h4><pre>
       o      <u>https://fbb-git.gitlab.io/bobcat/</u>: gitlab project page;

       Debian Bobcat project files:

       o      <u>libbobcat6</u>: debian package containing the shared library, changelog and copyright note;

       o      <u>libbobcat-dev</u>: debian package containing the static library, headers, manual pages, and  developer
              info;

</pre><h4><b>BOBCAT</b></h4><pre>
       Bobcat is an acronym of `Brokken’s Own Base Classes And Templates’.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This is free software, distributed under the terms of the GNU General Public License (GPL).

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank B. Brokken (<b><a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a></b>).

libbobcat-dev_6.07.01                               2005-2025                                 <u>FBB::<a href="../man3bobcat/Pipe.3bobcat.html">Pipe</a></u>(3bobcat)
</pre>
 </div>
</div></section>
</div>
</body>
</html>