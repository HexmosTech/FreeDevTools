<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>globus_callback_api - Globus Callback API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libglobus-common-doc">libglobus-common-doc_18.14-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       globus_callback_api - Globus Callback API

        - Globus Callback API.

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Callback</b> <b>Prototypes</b>
       typedef void(* <b>globus_callback_func_t</b>) (void *user_arg)
           Globus callback prototype.

   <b>Oneshot</b> <b>Callbacks</b>
       <b>globus_result_t</b> <b>globus_callback_space_register_oneshot</b> (<b>globus_callback_handle_t</b> *callback_handle, const
           globus_reltime_t *delay_time, <b>globus_callback_func_t</b> callback_func, void *callback_user_arg,
           <b>globus_callback_space_t</b> space)
           Register a oneshot some delay from now.

   <b>Periodic</b> <b>Callbacks</b>
       <b>globus_result_t</b> <b>globus_callback_space_register_periodic</b> (<b>globus_callback_handle_t</b> *callback_handle, const
           globus_reltime_t *delay_time, const globus_reltime_t *period, <b>globus_callback_func_t</b> callback_func,
           void *callback_user_arg, <b>globus_callback_space_t</b> space)
           Register a periodic callback.
       <b>globus_result_t</b> <b>globus_callback_unregister</b> (<b>globus_callback_handle_t</b> callback_handle,
           <b>globus_callback_func_t</b> unregister_callback, void *unreg_arg, <b>globus_bool_t</b> *active)
           Unregister a callback.
       <b>globus_result_t</b> <b>globus_callback_adjust_oneshot</b> (<b>globus_callback_handle_t</b> callback_handle, const
           globus_reltime_t *new_delay)
           Adjust the delay of a oneshot callback.
       <b>globus_result_t</b> <b>globus_callback_adjust_period</b> (<b>globus_callback_handle_t</b> callback_handle, const
           globus_reltime_t *new_period)
           Adjust the period of a periodic callback.

   <b>Callback</b> <b>Polling</b>
       void <b>globus_callback_space_poll</b> (const globus_abstime_t *timestop, <b>globus_callback_space_t</b> space)
           Poll for ready callbacks.
       void <b>globus_callback_signal_poll</b> ()
           Signal the poll.

   <b>Miscellaneous</b>
       <b>globus_bool_t</b> <b>globus_callback_get_timeout</b> (globus_reltime_t *time_left)
           Get the amount of time left in a callback.
       <b>globus_bool_t</b> <b>globus_callback_has_time_expired</b> ()
           See if there is remaining time in a callback.
       <b>globus_bool_t</b> <b>globus_callback_was_restarted</b> ()
           See if a callback has been restarted.

   <b>Convenience</b> <b>Macros</b>
       #define <b>globus_callback_poll</b>(a)
           Poll the global callback space.
       #define <b>globus_poll_blocking</b>()
           Blocking poll of the global callback space.
       #define <b>globus_poll_nonblocking</b>()
           Nonblocking poll of the global callback space.
       #define <b>globus_poll</b>()
           Nonblocking poll of the global callback space.
       #define <b>globus_signal_poll</b>()
           Wake up callback polling thread.
       #define <b>globus_callback_register_oneshot</b>( callback_handle,  delay_time,  callback_func,
           callback_user_arg)
           Register a oneshot function in the global callback space.
       #define <b>globus_callback_register_periodic</b>( callback_handle,  delay_time,  period,  callback_func,
           callback_user_arg)
           Register a periodic function in the global callback space.
       #define <b>globus_callback_register_signal_handler</b>( signum,  persist,  callback_func,  callback_user_arg)
           Register a signal handler in the global callback space.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Globus Callback API.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>globus_callback_poll(a)</b>
       Poll the global callback space. Specifies the global space for <b>globus_callback_space_poll()</b>. argument is
       the timeout

       <b>See</b> <b>also</b>
           <b>globus_callback_space_poll()</b>

   <b>#define</b> <b>globus_callback_register_oneshot(callback_handle,</b> <b>delay_time,</b> <b>callback_func,</b> <b>callback_user_arg)</b>
       Register a oneshot function in the global callback space. Specifies the global space for
       <b>globus_callback_space_register_oneshot()</b> all other arguments are the same as specified there.

       <b>See</b> <b>also</b>
           <b>globus_callback_space_register_oneshot()</b>

   <b>#define</b> <b>globus_callback_register_periodic(callback_handle,</b> <b>delay_time,</b> <b>period,</b> <b>callback_func,</b>
       <b>callback_user_arg)</b>
       Register a periodic function in the global callback space. Specifies the global space for
       <b>globus_callback_space_register_periodic()</b> all other arguments are the same as specified there.

       <b>See</b> <b>also</b>
           <b>globus_callback_space_register_periodic()</b>

   <b>#define</b> <b>globus_callback_register_signal_handler(signum,</b> <b>persist,</b> <b>callback_func,</b> <b>callback_user_arg)</b>
       Register a signal handler in the global callback space. Specifies the global space for
       <b>globus_callback_space_register_signal_handler()</b> all other arguments are the same as specified there.

       <b>See</b> <b>also</b>
           <b>globus_callback_space_register_signal_handler()</b>

   <b>#define</b> <b>globus_poll()</b>
       Nonblocking poll of the global callback space. Specifies that <b>globus_callback_space_poll()</b> should poll on
       the global space with an immediate timeout

       <b>See</b> <b>also</b>
           <b>globus_callback_space_poll()</b>

   <b>#define</b> <b>globus_poll_blocking()</b>
       Blocking poll of the global callback space. Specifies that <b>globus_callback_space_poll()</b> should poll on
       the global space with an infinite timeout

       <b>See</b> <b>also</b>
           <b>globus_callback_space_poll()</b>

   <b>#define</b> <b>globus_poll_nonblocking()</b>
       Nonblocking poll of the global callback space. Specifies that <b>globus_callback_space_poll()</b> should poll on
       the global space with an immediate timeout

       <b>See</b> <b>also</b>
           <b>globus_callback_space_poll()</b>

   <b>#define</b> <b>globus_signal_poll()</b>
       Wake up callback polling thread. Counterpart to <b>globus_poll()</b>.

       <b>See</b> <b>also</b>
           <b>globus_callback_signal_poll()</b>

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>void(*</b> <b>globus_callback_func_t)</b> <b>(void</b> <b>*user_arg)</b>
       Globus callback prototype. This is the signature of the function registered with the
       globus_callback_register_* calls.

       If this is a periodic callback, it is guaranteed that the call canNOT be reentered unless
       globus_thread_blocking_space_will_block() is called (explicitly, or implicitly via <b>globus_cond_wait()</b>).
       Also, if <b>globus_callback_unregister()</b> is called to cancel this periodic from within this callback, it is
       guaranteed that the callback will NOT be requeued again

       If the function will block at all, the user should call <b>globus_callback_get_timeout()</b> to see how long
       this function can safely block or call globus_thread_blocking_space_will_block()

       <b>Parameters</b>
           <u>user_arg</u> The user argument registered with this callback

       <b>See</b> <b>also</b>
           <b>globus_callback_space_register_oneshot()</b>

           <b>globus_callback_space_register_periodic()</b>

           globus_thread_blocking_space_will_block()

           <b>globus_callback_get_timeout()</b>

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>globus_result_t</b> <b>globus_callback_adjust_oneshot</b> <b>(globus_callback_handle_t</b> <b>callback_handle,</b> <b>const</b>
       <b>globus_reltime_t</b> <b>*</b> <b>new_delay)</b>
       Adjust the delay of a oneshot callback. This function allows a user to adjust the delay of a previously
       registered callback. It is safe to call this within or outside of the callback that is being modified.

       Note if the oneshot has already been fired, this function will still return GLOBUS_SUCCESS, but won't
       affect anything.

       <b>Parameters</b>
           <u>callback_handle</u> the handle received from a <b>globus_callback_space_register_oneshot()</b> call
           <u>new_delay</u> The new delay from now. If NULL, then callback will be fired as soon as possible.

       <b>Returns</b>

           • GLOBUS_CALLBACK_ERROR_INVALID_CALLBACK_HANDLE

           • GLOBUS_CALLBACK_ERROR_ALREADY_CANCELED

           • GLOBUS_SUCCESS

       <b>See</b> <b>also</b>
           <b>globus_callback_space_register_periodic()</b>

   <b>globus_result_t</b>     <b>globus_callback_adjust_period</b>     <b>(globus_callback_handle_t</b>     <b>callback_handle,</b>    <b>const</b>
       <b>globus_reltime_t</b> <b>*</b> <b>new_period)</b>
       Adjust the period of a periodic callback. This  function  allows  a  user  to  adjust  the  period  of  a
       previously  registered  callback. It is safe to call this within or outside of the callback that is being
       modified.

       This func also allows a user to effectively 'suspend' a periodic callback until another time by passing a
       period of NULL. The callback can later be resumed by passing in a new period.

       Note that the callback will not be fired sooner than 'new_period' from now. A 'suspended'  callback  must
       still be unregistered to free its resources.

       <b>Parameters</b>
           <u>callback_handle</u> the handle received from a <b>globus_callback_space_register_periodic()</b> call
           <u>new_period</u> The new period. If NULL or globus_i_reltime_infinity, then callback will be 'suspended' as
           soon as the last running instance of it returns.

       <b>Returns</b>

           • GLOBUS_CALLBACK_ERROR_INVALID_CALLBACK_HANDLE

           • GLOBUS_CALLBACK_ERROR_ALREADY_CANCELED

           • GLOBUS_SUCCESS

       <b>See</b> <b>also</b>
           <b>globus_callback_space_register_periodic()</b>

   <b>globus_bool_t</b> <b>globus_callback_get_timeout</b> <b>(globus_reltime_t</b> <b>*</b> <b>time_left)</b>
       Get  the  amount  of  time  left  in a callback. This function retrieves the remaining time a callback is
       allowed to run. If a callback has already timed out, time_left  will  be  set  to  zero  and  GLOBUS_TRUE
       returned.  This  function  is  intended  to  be called within a callback's stack, but is harmless to call
       anywhere (will return GLOBUS_FALSE and an infinite time_left)

       <b>Parameters</b>
           <u>time_left</u> storage for the remaining time.

       <b>Returns</b>

           • GLOBUS_FALSE if time remaining

           • GLOBUS_TRUE if already timed out

   <b>globus_bool_t</b> <b>globus_callback_has_time_expired</b> <b>()</b>
       See if there is remaining time in a callback. This function returns GLOBUS_TRUE if the running time of  a
       callback  has  already  expired. This function is intended to be called within a callback's stack, but is
       harmless to call anywhere (will return GLOBUS_FALSE)

       <b>Returns</b>

           • GLOBUS_FALSE if time remaining

           • GLOBUS_TRUE if already timed out

   <b>void</b> <b>globus_callback_signal_poll</b> <b>()</b>
       Signal the poll. This function signals <b>globus_callback_space_poll()</b> that something  has  changed  and  it
       should return to its caller as soon as possible.

       In  general,  you  never  need  to  call  this  function  directly.  It  is  called  (when  necessary) by
       <b>globus_cond_signal()</b> or globus_cond_broadcast. The only case in which  a  user  may  wish  to  call  this
       explicitly is if the application has no aspirations of ever being built threaded.

       <b>Returns</b>

           • void

       <b>See</b> <b>also</b>
           <b>globus_callback_space_poll()</b>

   <b>void</b> <b>globus_callback_space_poll</b> <b>(const</b> <b>globus_abstime_t</b> <b>*</b> <b>timestop,</b> <b>globus_callback_space_t</b> <b>space)</b>
       Poll for ready callbacks. This function is used to poll for registered callbacks.

       For  non-threaded  builds, callbacks are not/can not be delivered unless this is called. Any call to this
       can cause callbacks registered with the 'global' space to be fired. Whereas callbacks registered  with  a
       user's space will only be delivered when this is called with that space.

       For   threaded   builds,   this   only  needs  to  be  called  to  poll  user  spaces  with  behavior  ==
       GLOBUS_CALLBACK_SPACE_BEHAVIOR_SINGLE. The 'global' space and other user spaces are constantly polled  in
       a separate thread.
        (If it is called in a threaded build for these spaces, it will just yield its thread)

       In  general,  you  never  need  to  call  this  function  directly.  It  is  called  (when  necessary) by
       <b>globus_cond_wait()</b>. The only case in which a user may wish to call this explicitly is if the  application
       has no aspirations of ever being built threaded.

       This  function  (when  not  yielding) will block up to timestop or until <b>globus_callback_signal_poll()</b> is
       called by one of the fired callbacks. It will always try and kick out ready callbacks, regardless of  the
       timestop.

       <b>Parameters</b>
           <u>timestop</u>  The  time to block until. If this is NULL or less than the cuurent time, an attempt to fire
           only ready callbacks is made (no blocking).
           <u>space</u> The callback space to poll. Note: regardless of what space is passed here, the  'global'  space
           is also always polled.

       <b>See</b> <b>also</b>
           <b>Globus</b> <b>Callback</b> <b>Spaces</b>

           <b>globus_condattr_setspace()</b>

   <b>globus_result_t</b>  <b>globus_callback_space_register_oneshot</b>  <b>(globus_callback_handle_t</b>  <b>*</b>  <b>callback_handle,</b> <b>const</b>
       <b>globus_reltime_t</b>  <b>*</b>  <b>delay_time,</b>  <b>globus_callback_func_t</b>   <b>callback_func,</b>   <b>void</b>   <b>*</b>   <b>callback_user_arg,</b>
       <b>globus_callback_space_t</b> <b>space)</b>
       Register  a  oneshot  some  delay  from  now.  This  function  registers  the callback_func to start some
       delay_time from now.

       <b>Parameters</b>
           <u>callback_handle</u> Storage for a handle. This may be NULL. If it is NOT NULL, you  must  unregister  the
           callback to reclaim resources.
           <u>delay_time</u> The relative time from now to fire this callback. If NULL, will fire as soon as possible
           <u>callback_func</u> the user func to call
           <u>callback_user_arg</u> user arg that will be passed to callback
           <u>space</u> The space with which to register this callback

       <b>Returns</b>

           • GLOBUS_CALLBACK_ERROR_INVALID_ARGUMENT

           • GLOBUS_CALLBACK_ERROR_MEMORY_ALLOC

           • GLOBUS_SUCCESS

       <b>See</b> <b>also</b>
           <b>globus_callback_func_t</b>

           <b>Globus</b> <b>Callback</b> <b>Spaces</b>

   <b>globus_result_t</b>  <b>globus_callback_space_register_periodic</b>  <b>(globus_callback_handle_t</b>  <b>*</b> <b>callback_handle,</b> <b>const</b>
       <b>globus_reltime_t</b> <b>*</b> <b>delay_time,</b> <b>const</b> <b>globus_reltime_t</b>  <b>*</b>  <b>period,</b>  <b>globus_callback_func_t</b>  <b>callback_func,</b>
       <b>void</b> <b>*</b> <b>callback_user_arg,</b> <b>globus_callback_space_t</b> <b>space)</b>
       Register  a  periodic callback. This function registers a periodic callback_func to start some delay_time
       and run every period from then.

       <b>Parameters</b>
           <u>callback_handle</u> Storage for a handle. This may be NULL. If it  is  NOT  NULL,  you  must  cancel  the
           periodic to reclaim resources.
           <u>delay_time</u> The relative time from now to fire this callback. If NULL, will fire the first callback as
           soon as possible
           <u>period</u> The relative period of this callback
           <u>callback_func</u> the user func to call
           <u>callback_user_arg</u> user arg that will be passed to callback
           <u>space</u> The space with which to register this callback

       <b>Returns</b>

           • GLOBUS_CALLBACK_ERROR_INVALID_ARGUMENT

           • GLOBUS_CALLBACK_ERROR_MEMORY_ALLOC

           • GLOBUS_SUCCESS

       <b>See</b> <b>also</b>
           <b>globus_callback_unregister()</b>

           <b>globus_callback_func_t</b>

           <b>globus_callback_spaces</b>

   <b>globus_result_t</b>  <b>globus_callback_unregister</b> <b>(globus_callback_handle_t</b> <b>callback_handle,</b> <b>globus_callback_func_t</b>
       <b>unregister_callback,</b> <b>void</b> <b>*</b> <b>unreg_arg,</b> <b>globus_bool_t</b> <b>*</b> <b>active)</b>
       Unregister a callback. This function will cancel a callback and free the resources  associated  with  the
       callback  handle.  If  the  callback  was  able  to  be  canceled immediately (or if it has already run),
       GLOBUS_SUCCESS is returned and it is guaranteed that there are no running instances of the callback.

       If the callback is currently running (or unstoppably about to be run), then  the  callback  is  prevented
       from  being  requeued,  but,  the  'official'  cancel  is deferred until the last running instance of the
       callback returns. If you need to know when the callback is guaranteed to  have  been  canceled,  pass  an
       unregister callback.

       If  you  would  like  to  know  if  you unregistered a callback before it ran, pass storage for a boolean
       'active'. This will be GLOBUS_TRUE if callback was running. GLOBUS_FALSE otherwise.

       <b>Parameters</b>
           <u>callback_handle</u> the handle received from a globus_callback_space_register_*() call
           <u>unregister_callback</u> the function to call when the callback has been canceled and there are no running
           instances of it. This will be delivered to the same space used in the register call.
           <u>unreg_arg</u> user arg that will be passed to the unregister callback
           <u>active</u> storage for an indication of whether the callback was running when this call was made

       <b>Returns</b>

           • GLOBUS_CALLBACK_ERROR_INVALID_CALLBACK_HANDLE

           • GLOBUS_CALLBACK_ERROR_ALREADY_CANCELED

           • GLOBUS_SUCCESS

       <b>See</b> <b>also</b>
           <b>globus_callback_space_register_periodic()</b>

           <b>globus_callback_func_t</b>

   <b>globus_bool_t</b> <b>globus_callback_was_restarted</b> <b>()</b>
       See if a callback has been restarted. If the callback is a oneshot, this merely means the callback called
       globus_thread_blocking_space_will_block (or <b>globus_cond_wait()</b> at some point.

       For a periodic, it signifies the same and also that the periodic has been requeued. This means  that  the
       callback function may be reentered if the period is short enough (on a threaded build)

       <b>Returns</b>

           • GLOBUS_FALSE if not restarted

           • GLOBUS_TRUE if restarted

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for globus_common from the source code.

globus_common                                     Version 18.14                           <u><a href="../man3/globus_callback_api.3.html">globus_callback_api</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>