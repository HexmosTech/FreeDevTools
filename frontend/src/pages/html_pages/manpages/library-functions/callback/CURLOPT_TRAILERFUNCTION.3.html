<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_TRAILERFUNCTION - callback for sending trailing headers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_TRAILERFUNCTION - callback for sending trailing headers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl.h&gt;

       int curl_trailer_callback(struct curl_slist ** list, void *userdata);

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_TRAILERFUNCTION,
                                 curl_trailer_callback *func);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass a pointer to a callback function.

       This callback function is called once right before sending the final CR LF in an HTTP chunked transfer to
       fill a list of trailing headers to be sent before finishing the HTTP transfer.

       You can set the userdata argument with the <u><a href="../man3/CURLOPT_TRAILERDATA.3.html">CURLOPT_TRAILERDATA</a>(3)</u> option.

       The  trailing  headers  included in the linked list must not be CRLF-terminated, because libcurl adds the
       appropriate line termination characters after each header item.

       If you use <u><a href="../man3/curl_slist_append.3.html">curl_slist_append</a>(3)</u> to add trailing headers to the <u>curl_slist</u>  then  libcurl  duplicates  the
       strings, and frees the <u>curl_slist</u> once the trailers have been sent.

       If  one  of  the  trailing  header fields is not formatted correctly it is ignored and an info message is
       emitted.

       The return value can either be <b>CURL_TRAILERFUNC_OK</b> or  <b>CURL_TRAILERFUNC_ABORT</b>  which  would  respectively
       instruct libcurl to either continue with sending the trailers or to abort the request.

       If you set this option to NULL, then the transfer proceeds as usual without any interruptions.

</pre><h4><b>DEFAULT</b></h4><pre>
       NULL

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects http only

</pre><h4><b>EXAMPLE</b></h4><pre>
       extern size_t read_cb(char *ptr, size_t size,
                             size_t nmemb, void *userdata);

       static int trailer_cb(struct curl_slist **tr, void *data)
       {
         /* libcurl frees the list */
         *tr = curl_slist_append(*tr, "My-super-awesome-trailer: trailer-stuff");
         return CURL_TRAILERFUNC_OK;
       }

       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           CURLcode res;

           /* Set the URL of the request */
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com/");
           /* Now set it as a put */
           curl_easy_setopt(curl, CURLOPT_UPLOAD, 1L);

           /* Assuming we have a function that returns the data to be pushed
              Let that function be read_cb */
           curl_easy_setopt(curl, CURLOPT_READFUNCTION, read_cb);

           struct curl_slist *headers = NULL;
           headers = curl_slist_append(headers, "Trailer: My-super-awesome-trailer");
           res = curl_easy_setopt(curl, CURLOPT_HTTPHEADER, headers);

           /* Set the trailers filling callback */
           curl_easy_setopt(curl, CURLOPT_TRAILERFUNCTION, trailer_cb);

           /* Perform the transfer */
           res = curl_easy_perform(curl);

           curl_easy_cleanup(curl);

           curl_slist_free_all(headers);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.64.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_TRAILERDATA.3.html">CURLOPT_TRAILERDATA</a></b>(3), <b><a href="../man3/CURLOPT_WRITEFUNCTION.3.html">CURLOPT_WRITEFUNCTION</a></b>(3)

libcurl                                            2025-06-16                         <u><a href="../man3/CURLOPT_TRAILERFUNCTION.3.html">CURLOPT_TRAILERFUNCTION</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>