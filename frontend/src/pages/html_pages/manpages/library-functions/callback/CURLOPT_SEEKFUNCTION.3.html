<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_SEEKFUNCTION - user callback for seeking in input stream</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_SEEKFUNCTION - user callback for seeking in input stream

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       /* These are the return codes for the seek callbacks */
       #define CURL_SEEKFUNC_OK       0
       #define CURL_SEEKFUNC_FAIL     1 /* fail the entire transfer */
       #define CURL_SEEKFUNC_CANTSEEK 2 /* tell libcurl seeking cannot be done, so
                                           libcurl might try other means instead */

       int seek_callback(void *clientp, curl_off_t offset, int origin);

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_SEEKFUNCTION, seek_callback);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass a pointer to your callback function, which should match the prototype shown above.

       This function gets called by libcurl to seek to a certain position in the input stream and can be used to
       fast  forward  a  file  in  a  resumed upload (instead of reading all uploaded bytes with the normal read
       function/callback). It is also called to rewind a stream when data has already been sent  to  the  server
       and  needs  to  be  sent  again.  This  may  happen  when  doing  an  HTTP  PUT or POST with a multi-pass
       authentication method, or when an existing HTTP connection is reused too late and the server  closes  the
       connection.  The function shall work like <a href="../man3/fseek.3.html">fseek</a>(3) or <a href="../man3/lseek.3.html">lseek</a>(3) and it gets SEEK_SET, SEEK_CUR or SEEK_END
       as argument for <u>origin</u>, although libcurl currently only passes SEEK_SET.

       <u>clientp</u> is the pointer you set with <u><a href="../man3/CURLOPT_SEEKDATA.3.html">CURLOPT_SEEKDATA</a>(3)</u>.

       The callback function must return <u>CURL_SEEKFUNC_OK</u> on success, <u>CURL_SEEKFUNC_FAIL</u>  to  cause  the  upload
       operation  to  fail  or <u>CURL_SEEKFUNC_CANTSEEK</u> to indicate that while the seek failed, libcurl is free to
       work around the problem if possible. The latter can sometimes be done by instead reading from  the  input
       or similar.

       If  you  forward the input arguments directly to <a href="../man3/fseek.3.html">fseek</a>(3) or <a href="../man3/lseek.3.html">lseek</a>(3), note that the data type for <u>offset</u>
       is not the same as defined for curl_off_t on many systems.

</pre><h4><b>DEFAULT</b></h4><pre>
       NULL

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects ftp, http and sftp

</pre><h4><b>EXAMPLE</b></h4><pre>
       #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt; /* for lseek */

       struct data {
         int our_fd;
       };
       static int seek_cb(void *clientp, curl_off_t offset, int origin)
       {
         struct data *d = (struct data *)clientp;
         lseek(d-&gt;our_fd, offset, origin);
         return CURL_SEEKFUNC_OK;
       }

       int main(void)
       {
         struct data seek_data;
         CURL *curl = curl_easy_init();
         if(curl) {
           curl_easy_setopt(curl, CURLOPT_SEEKFUNCTION, seek_cb);
           curl_easy_setopt(curl, CURLOPT_SEEKDATA, &amp;seek_data);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.18.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_DEBUGFUNCTION.3.html">CURLOPT_DEBUGFUNCTION</a></b>(3), <b><a href="../man3/CURLOPT_IOCTLFUNCTION.3.html">CURLOPT_IOCTLFUNCTION</a></b>(3), <b><a href="../man3/CURLOPT_SEEKDATA.3.html">CURLOPT_SEEKDATA</a></b>(3), <b><a href="../man3/CURLOPT_STDERR.3.html">CURLOPT_STDERR</a></b>(3)

libcurl                                            2025-06-16                            <u><a href="../man3/CURLOPT_SEEKFUNCTION.3.html">CURLOPT_SEEKFUNCTION</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>