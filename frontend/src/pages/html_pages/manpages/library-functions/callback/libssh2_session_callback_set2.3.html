<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libssh2_session_callback_set2 - set a callback function</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssh2-1-dev">libssh2-1-dev_1.11.1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libssh2_session_callback_set2 - set a callback function

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;libssh2.h&gt;

       libssh2_cb_generic *
       libssh2_session_callback_set2(LIBSSH2_SESSION *session, int cbtype,
                                     libssh2_cb_generic *callback);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sets  a  custom  callback handler for a previously initialized session object. Callbacks are triggered by
       the receipt of special packets at the Transport layer. To disable a callback, set it to NULL.

       <u>session</u> - Session instance as returned by <b><a href="../man3/libssh2_session_init_ex.3.html">libssh2_session_init_ex</a>(3)</b>

       <u>cbtype</u> - Callback type. One of the types listed in Callback Types.

       <u>callback</u> - Pointer to custom callback function. The prototype for this function must match the associated
       callback declaration macro.

</pre><h4><b>CALLBACK</b> <b>TYPES</b></h4><pre>
       LIBSSH2_CALLBACK_IGNORE
              Called when a SSH_MSG_IGNORE message is received

       LIBSSH2_CALLBACK_DEBUG
              Called when a SSH_MSG_DEBUG message is received

       LIBSSH2_CALLBACK_DISCONNECT
              Called when a SSH_MSG_DISCONNECT message is received

       LIBSSH2_CALLBACK_MACERROR
              Called when a mismatched MAC has been detected in the transport layer. If the function returns  0,
              the packet will be accepted nonetheless.

       LIBSSH2_CALLBACK_X11
              Called when an X11 connection has been accepted

       LIBSSH2_CALLBACK_SEND
              Called  when  libssh2  wants  to  send  data on the connection. Can be set to a custom function to
              handle I/O your own way.

              The prototype of the callback:

              ssize_t sendcb(libssh2_socket_t sockfd, const void *buffer,
                             size_t length, int flags, void **abstract);

              <b>sockfd</b> is the socket to write to, <b>buffer</b> points to the data to send, <b>length</b> is  the  size  of  the
              data,  <b>flags</b>  is the flags that would have been used to a <u>send()</u> call and <b>abstract</b> is a pointer to
              the abstract pointer set in the <u><a href="../man3/libssh2_session_init_ex.3.html">libssh2_session_init_ex</a>(3)</u> call.

              The callback returns the number of bytes sent, or -1 for error. The special  return  code  <b>-EAGAIN</b>
              can  be returned to signal that the send was aborted to prevent getting blocked and it needs to be
              called again.

       LIBSSH2_CALLBACK_RECV
              Called when libssh2 wants to read data from the connection. Can be set to  a  custom  function  to
              handle I/O your own way.

              The prototype of the callback:

              ssize_t recvcb(libssh2_socket_t sockfd, void *buffer,
                             size_t length, int flags, void **abstract);

              <b>sockfd</b> is the socket to read from, <b>buffer</b> where to store received data into, <b>length</b> is the size of
              the  buffer,  <b>flags</b>  is  the  flags  that  would have been used to a <u>recv()</u> call and <b>abstract</b> is a
              pointer to the abstract pointer set in the <u><a href="../man3/libssh2_session_init_ex.3.html">libssh2_session_init_ex</a>(3)</u> call.

              The callback returns the number of bytes read, or -1 for error. The special  return  code  <b>-EAGAIN</b>
              can  be returned to signal that the read was aborted to prevent getting blocked and it needs to be
              called again.

       LIBSSH2_CALLBACK_AUTHAGENT
              Called during authentication process to allow the client to connect to the ssh-agent  and  perform
              any setup, such as configuring the agent or adding keys.

              The prototype of the callback:

              void authagent(LIBSSH2_SESSION* session, LIBSSH2_CHANNEL *channel,
                             void **abstract);

       LIBSSH2_CALLBACK_AUTHAGENT_IDENTITIES
              Not   called   by   libssh2.   The   client   is  responsible  for  calling  this  method  when  a
              SSH2_AGENTC_REQUEST_IDENTITIES message has been received.

              The prototype of the callback:

              void identities(LIBSSH2_SESSION* session, void *buffer,
                              const char *agent_path,
                              void **abstract)

              <b>buffer</b> must be filled in by the callback. Different clients may implement  this  differently.  For
              example,  one client may pass in an unsigned char ** for this parameter, while another may pass in
              a pointer to a struct.

              Regardless of the type of buffer used, the client will need to send back a list of  identities  in
              the following format.

              uint32 buffer length uint32 number of entries entries

              Where each entry in the entries list is of the format:

              string data cstring comment

              <b>agent_path</b>  The  path  to  a running ssh-agent on the client machine, from which identities can be
              listed.

       LIBSSH2_CALLBACK_AUTHAGENT_SIGN
              Not  called  by  libssh2.  The  client  is  responsible   for   calling   this   method   when   a
              SSH2_AGENTC_SIGN_REQUEST message has been received.

              The prototype of the callback:

              void sign(LIBSSH2_SESSION* session,
                        unsigned char *blob, unsigned int blen,
                        const unsigned char *data, unsigned int dlen,
                        unsigned char **sig, unsigned int *sig_len,
                        const char *agent_path,
                        void **abstract);

              When  interfacing  with  an  ssh-agent  installed  on  the  client  system,  this  method can call
              <a href="../man3/libssh2_agent_sign.3.html">libssh2_agent_sign</a>(3) to perform signing.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Pointer to previous callback handler. Returns NULL if no prior callback handler was set or  the  callback
       type was unknown.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libssh2_session_init_ex.3.html">libssh2_session_init_ex</a>(3)</b> <b><a href="../man3/libssh2_agent_sign.3.html">libssh2_agent_sign</a>(3)</b>

libssh2 1.11.1                                     13 Dec 2023                  <u><a href="../man3/libssh2_session_callback_set2.3.html">libssh2_session_callback_set2</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>