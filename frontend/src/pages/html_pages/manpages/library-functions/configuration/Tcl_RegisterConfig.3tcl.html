<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_RegisterConfig - procedures to register embedded configuration information</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_RegisterConfig - procedures to register embedded configuration information

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       <b>Tcl_RegisterConfig</b>(<u>interp,</u> <u>pkgName,</u> <u>configuration,</u> <u>valEncoding</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)                 Refers  to the interpreter the embedded configuration information
                                               is registered for. Must not be NULL.

       const char <u>*pkgName</u> (in)                Contains  the  name  of  the  package  registering  the  embedded
                                               configuration  as  ASCII string. This means that this information
                                               is in UTF-8 too. Must not be NULL.

       const Tcl_Config <u>*configuration</u> (in)    Refers  to  an  array  of  Tcl_Config  entries   containing   the
                                               information embedded in the library. Must not be NULL. The end of
                                               the array is signaled by either a key identical to NULL, or a key
                                               referring to the empty string.

       const char <u>*valEncoding</u> (in)            Contains the name of the encoding used to store the configuration
                                               values  as  ASCII  string. This means that this information is in
                                               UTF-8 too. Must not be NULL.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The function described here has its base in TIP 59 and provides extensions with support for the embedding
       of configuration information into their library and the generation of a Tcl-level interface for  querying
       this information.

       To  embed configuration information into their library an extension has to define a non-volatile array of
       Tcl_Config entries in one if  its  source  files  and  then  call  <b>Tcl_RegisterConfig</b>  to  register  that
       information.

       <b>Tcl_RegisterConfig</b>  takes  four  arguments;  first, a reference to the interpreter we are registering the
       information with, second, the name of the package registering its  configuration  information,  third,  a
       pointer  to  an array of structures, and fourth a string declaring the encoding used by the configuration
       values.

       The string <u>valEncoding</u> contains the name of an encoding known to Tcl.   All  these  names  are  use  only
       characters  in  the  ASCII  subset of UTF-8 and are thus implicitly in the UTF-8 encoding. It is expected
       that keys are legible English text and therefore using the ASCII subset of UTF-8. In  other  words,  they
       are expected to be in UTF-8 too. The values associated with the keys can be any string however. For these
       the contents of <u>valEncoding</u> define which encoding was used to represent the characters of the strings.

       Each element of the <u>configuration</u> array refers to two strings containing the key and the value associated
       with  that  key.  The end of the array is signaled by either an empty key or a key identical to NULL. The
       function makes <b>no</b> copy of the <u>configuration</u> array. This means that the caller has to make sure  that  the
       memory  holding  this  array  is  never  released.  This is the meaning behind the word <b>non-volatile</b> used
       earlier. The easiest way to accomplish this is to define a global static array of Tcl_Config entries. See
       the file “generic/tclPkgConfig.c” in the sources of the Tcl core for an example.

       When called <b>Tcl_RegisterConfig</b> will

       (1)    create a namespace having the provided <u>pkgName</u>, if not yet existing.

       (2)    create the command <b>pkgconfig</b> in that namespace and link it to the provided information so that the
              keys from <u>configuration</u> and their associated values can be retrieved through calls to <b>pkgconfig</b>.

       The command <b>pkgconfig</b> will provide two subcommands, <b>list</b> and <b>get</b>:

              ::<u>pkgName</u>::<b>pkgconfig</b> list
                     Returns a list containing the names of all defined keys.

              ::<u>pkgName</u>::<b>pkgconfig</b> get <u>key</u>
                     Returns the configuration value associated with the specified <u>key</u>.

</pre><h4><b>TCL_CONFIG</b></h4><pre>
       The <b>Tcl_Config</b> structure contains the following fields:

              typedef struct {
                  const char *<u>key</u>;
                  const char *<u>value</u>;
              } <b>Tcl_Config</b>;

</pre><h4><b>KEYWORDS</b></h4><pre>
       embedding, configuration, library

Tcl                                                    8.4                              <u><a href="../man3tcl/Tcl_RegisterConfig.3tcl.html">Tcl_RegisterConfig</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>