<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config::Model::WarpedNode - Node that change config class properties</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libconfig-model-perl">libconfig-model-perl_2.155-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Config::Model::WarpedNode - Node that change config class properties

</pre><h4><b>VERSION</b></h4><pre>
       version 2.155

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Config::Model;

        my $model = Config::Model-&gt;new;
        foreach (qw/X Y/) {
           $model-&gt;create_config_class(
               name    =&gt; "Class$_",
               element =&gt; [ foo =&gt; {qw/type leaf value_type string/} ]
           );
        }
        $model-&gt;create_config_class(
           name =&gt; "MyClass",

           element =&gt; [
               master_switch =&gt; {
                   type       =&gt; 'leaf',
                   value_type =&gt; 'enum',
                   choice     =&gt; [qw/cX cY/]
               },

               'a_warped_node' =&gt; {
                   type   =&gt; 'warped_node',
                   warp =&gt; }
                      follow =&gt; { ms =&gt; '! master_switch' },
                      rules  =&gt; [
                          '$ms eq "cX"' =&gt; { config_class_name =&gt; 'ClassX' },
                          '$ms eq "cY"' =&gt; { config_class_name =&gt; 'ClassY' },
                      ]
                   }
               },
           ],
        );

        my $inst = $model-&gt;instance(root_class_name =&gt; 'MyClass' );
        my $root = $inst-&gt;config_root ;

        print "Visible elements: ",join(' ',$root-&gt;get_element_name),"\n" ;
        # Visible elements: master_switch

        $root-&gt;load( steps =&gt; 'master_switch=cX' );
        print "Visible elements: ",join(' ',$root-&gt;get_element_name),"\n" ;
        # Visible elements: master_switch a_warped_node

        my $node = $root-&gt;grab('a_warped_node') ;
        print "a_warped_node class: ",$node-&gt;config_class_name,"\n" ;
        # a_warped_node class: ClassX

        $root-&gt;load( steps =&gt; 'master_switch=cY' );
        print "a_warped_node class: ",$node-&gt;config_class_name,"\n" ;
        # a_warped_node class: ClassY

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class provides a way to change dynamically the configuration class (or some other properties) of a
       node. The changes are done according to the model declaration.

       This declaration specifies one (or several) leaf in the configuration tree that triggers the actual
       property change of the warped node. This leaf is also referred as <u>warp</u> <u>master</u>.

       When the warp master(s) value(s) changes, "WarpedNode" creates an instance of the new class required by
       the warp master.

       If the morph parameter is set, the values held by the old object are (if possible) copied to the new
       instance of the object using copy_from method.

       Warped node can alter the following properties:

        config_class_name
        level

</pre><h4><b>Constructor</b></h4><pre>
       "WarpedNode" should not be created directly.

</pre><h4><b>Warped</b> <b>node</b> <b>model</b> <b>declaration</b></h4><pre>
   <b>Parameter</b> <b>overview</b>
       A warped node must be declared with the following parameters:

       type
           Always set to "warped_node".

       follow
           Grab  string  leading  to  the  "Config::Model::Value"  warp  master.   See "Warp follow argument" in
           Config::Model::Warper for details.

       morph
           boolean. If 1, "WarpedNode" tries to recursively copy the value from the old object to the new object
           using copy_from method.  When a copy is not possible, undef values are assigned to object elements.

       rules
           Hash or array ref that specify the property change rules according to the  warp  master(s)  value(s).
           See  "Warp  rules  argument"  in  Config::Model::Warper for details on how to specify the warp master
           values (or combination of values).

   <b>Effect</b> <b>declaration</b>
       For a warped node, the effects are declared with these parameters:

       <b>config_class_name</b>
               When requested by the warp master,the "WarpedNode" creates a new object of the type specified  by
               this parameter:

                 XZ =&gt; { config_class_name =&gt; 'SlaveZ' }

               Instead of a string, you can an array ref which contains the class name and constructor arguments
               :

                 XY  =&gt; { config_class_name =&gt; ['SlaveY', foo =&gt; 'bar' ], },

       <b>class</b>   Specify  a  Perl  class  to  implement  the  above  config  class.  This  Perl Class <b>must</b> inherit
               Config::Model::Node.

</pre><h4><b>Forwarded</b> <b>methods</b></h4><pre>
       The following methods are forwarded to contained node:

       fetch_element  config_class_name  get_element_name  has_element  is_element_available  element_type  load
       fetch_element_value get_type get_cargo_type describe

</pre><h4><b>Methods</b></h4><pre>
   <b>name</b>
       Return the name of the node (even if warped out).

   <b>is_accessible</b>
       Returns  true  if the node hidden behind this warped node is accessible, i.e. the warp master have values
       so a node was warped in.

   <b>get_actual_node</b>
       Returns the node object hidden behind the warped node. Croaks if the node is not accessible.

   <b>load_data</b>
       Parameters: "( hash_ref )"

       Load configuration data with a hash ref. The hash ref key must match the available elements of  the  node
       carried by the warped node.

</pre><h4><b>EXAMPLE</b></h4><pre>
        $model -&gt;create_config_class
         (
          element =&gt;
           [
            tree_macro =&gt; { type =&gt; 'leaf',
                            value_type =&gt; 'enum',
                            choice     =&gt; [qw/XX XY XZ ZZ/]
                          },
            bar =&gt;  {
                      type =&gt; 'warped_node',
                      follow =&gt; '! tree_macro',
                      morph =&gt; 1,
                      rules =&gt; [
                                XX =&gt; { config_class_name
                                          =&gt; [ 'ClassX', 'foo' ,'bar' ]}
                                XY =&gt; { config_class_name =&gt; 'ClassY'},
                                XZ =&gt; { config_class_name =&gt; 'ClassZ'}
                               ]
                    }
           ]
         );

       In the example above we see that:

       •   The 'bar' slot can refer to a "ClassX", "ClassZ" or "ClassY" object.

       •   The warper object is the "tree_macro" attribute of the root of the object tree.

       •   When "tree_macro" is set to "ZZ", "bar" is not available. Trying to access "bar" raises an exception.

       •   When  "tree_macro"  is  changed  from  "ZZ"  to  "XX",  "bar"  refers  to a brand new "ClassX" object
           constructed with "ClassX-&gt;new(foo =&gt; 'bar')"

       •   Then, if "tree_macro" is changed from "XX" to "XY", "bar" refers to a brand new "ClassY" object.  But
           in this case, the object is initialized with most if not all the attributes of "ClassX". This copy is
           done whenever "tree_macro" is changed.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont, (ddumont at cpan dot org)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Config::Model::Instance,        Config::Model,        Config::Model::HashId,       Config::Model::ListId,
       Config::Model::AnyThing, Config::Model::Warper, Config::Model::WarpedNode, Config::Model::Value

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2005-2022 by Dominique Dumont.

       This is free software, licensed under:

         The GNU Lesser General Public License, Version 2.1, February 1999

perl v5.40.0                                       2024-11-30                     <u>Config::Model::<a href="../man3pm/WarpedNode.3pm.html">WarpedNode</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>