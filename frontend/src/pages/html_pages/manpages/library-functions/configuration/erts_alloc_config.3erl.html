<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>erts_alloc_config - Configuration tool for erts_alloc</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       erts_alloc_config - Configuration tool for erts_alloc

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>Note:</b>
       <u>erts_alloc_config</u>  is  currently  an  experimental  tool  and  might  be subject to backward incompatible
       changes.

       <a href="../man3erl/erts_alloc.3erl.html">erts_alloc</a>(3erl) is an Erlang Run-Time System internal memory  allocator  library.  <u>erts_alloc_config</u>  is
       intended  to  be used to aid creation of an <a href="../man3erl/erts_alloc.3erl.html">erts_alloc</a>(3erl) configuration that is suitable for a limited
       number of  runtime  scenarios.  The  configuration  that  <u>erts_alloc_config</u>  produce  is  intended  as  a
       suggestion, and may need to be adjusted manually.

       The  configuration  is  created based on information about a number of runtime scenarios. It is obviously
       impossible to foresee every runtime scenario that can occur. The important scenarios are those that cause
       maximum or minimum load on specific memory allocators. Load in this  context  is  total  size  of  memory
       blocks allocated.

       The  current  implementation  of  <u>erts_alloc_config</u> concentrate on configuration of multi-block carriers.
       Information gathered when a runtime scenario is saved is mainly current and maximum  use  of  multi-block
       carriers.  If  a parameter that change the use of multi-block carriers is changed, a previously generated
       configuration is invalid and <u>erts_alloc_config</u> needs to be run again.  It  is  mainly  the  single  block
       carrier threshold that effects the use of multi-block carriers, but other single-block carrier parameters
       might  as well. If another value of a single block carrier parameter than the default is desired, use the
       desired value when running <u>erts_alloc_config</u>.

       A configuration is created in the following way:

         * Pass the +Mea config command-line flag to the Erlang runtime system you are going to use for creation
           of the allocator configuration. It will disable features that prevent  <u>erts_alloc_config</u>  from  doing
           its  job.  Note, you should <u>not</u> use this flag when using the created configuration. Also note that it
           is important that you use the same amount of schedulers when creating the configuration  as  you  are
           going the use on the system using the configuration.

         * Run  your applications with different scenarios (the more the better) and save information about each
           scenario by calling save_scenario/0. It may be hard to know when the  applications  are  at  an  (for
           <u>erts_alloc_config</u>)   important   runtime   scenario.  A  good  approach  may  therefore  be  to  call
           save_scenario/0 repeatedly, e.g. once every tenth  second.  Note  that  it  is  important  that  your
           applications reach the runtime scenarios that are important for <u>erts_alloc_config</u> when you are saving
           scenarios; otherwise, the configuration may perform bad.

         * When  you  have  covered  all  scenarios,  call make_config/1 in order to create a configuration. The
           configuration is written to a file that you have chosen. This configuration file can later be read by
           an Erlang runtime-system at startup. Pass the command line argument -args_file FileName to the <a href="../man1/erl.1.html">erl</a>(1)
           command.

         * The configuration produced by <u>erts_alloc_config</u> may need to be manually adjusted as  already  stated.
           Do not modify the file produced by <u>erts_alloc_config</u>; instead, put your modifications in another file
           and load this file after the file produced by <u>erts_alloc_config</u>. That is, put the -args_file FileName
           argument  that  reads  your  modification file later on the command-line than the -args_file FileName
           argument that reads the configuration file produced by  <u>erts_alloc_config</u>.  If  a  memory  allocation
           parameter  appear multiple times, the last version of will be used, i.e., you can override parameters
           in the configuration file produced by <u>erts_alloc_config</u>. Doing it this way simplifies things when you
           want to rerun <u>erts_alloc_config</u>.

   <b>Note:</b>
       The configuration created by <u>erts_alloc_config</u> may perform bad, ever horrible, for runtime scenarios that
       are very different from the ones saved when creating the configuration. You are,  therefore,  advised  to
       rerun  <u>erts_alloc_config</u>  if  the applications run when the configuration was made are changed, or if the
       load on the applications have changed since the configuration was made. You are  also  advised  to  rerun
       <u>erts_alloc_config</u> if the Erlang runtime system used is changed.

       <u>erts_alloc_config</u> saves information about runtime scenarios and performs computations in a server that is
       automatically started. The server register itself under the name <u>'</u><b>__</b><u>erts_alloc_config</u><b>__</b><u>'</u>.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>save_scenario()</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Error}</b>

              Types:

                 Error = term()

              <u>save_scenario/0</u>  saves information about the current runtime scenario. This information will later
              be used when make_config/0, or make_config/1 is called.

              The first time <u>save_scenario/0</u> is called a server will be started. This server will  save  runtime
              scenarios. All saved scenarios can be removed by calling stop/0.

       <b>make_config()</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Error}</b>

              Types:

                 Error = term()

              This is the same as calling make_config(group_leader()).

       <b>make_config(FileNameOrIODev)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Error}</b>

              Types:

                 FileNameOrIODev = string() | io_device()
                 Error = term()

              <u>make_config/1</u>  uses  the  information  previously  saved by save_scenario/0 in order to produce an
              <u>erts_alloc</u> configuration. At least one scenario have had to be  saved.  All  scenarios  previously
              saved will be used when creating the configuration.

              If  <u>FileNameOrIODev</u>  is  a  <u>string()</u>, <u>make_config/1</u> will use <u>FileNameOrIODev</u> as a filename. A file
              named <u>FileNameOrIODev</u> is  created  and  the  configuration  will  be  written  to  that  file.  If
              <u>FileNameOrIODev</u> is an io_device() (see the documentation of the module io), the configuration will
              be written to the io device.

       <b>stop()</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Error}</b>

              Types:

                 Error = term()

              Stops the server that saves runtime scenarios.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3erl/erts_alloc.3erl.html">erts_alloc</a>(3erl), <a href="../man1/erl.1.html">erl</a>(1), <a href="../man3erl/io.3erl.html">io</a>(3erl)

Ericsson AB                                    runtime_tools 1.17                        <u><a href="../man3erl/erts_alloc_config.3erl.html">erts_alloc_config</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>