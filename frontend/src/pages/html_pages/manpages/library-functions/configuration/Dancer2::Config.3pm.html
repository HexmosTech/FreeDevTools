<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dancer2::Config - Configure Dancer2 to suit your needs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdancer2-perl">libdancer2-perl_1.1.2+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Dancer2::Config - Configure Dancer2 to suit your needs

</pre><h4><b>VERSION</b></h4><pre>
       version 1.1.2

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The Dancer2 configuration (as implemented by Dancer2::Core::Role::ConfigReader) handles reading and
       changing the configuration of your Dancer2 apps.  This document describes how to manipulate Dancer2's
       configuration settings (through code or by file), and to document the various settings that are available
       in Dancer2.

</pre><h4><b>MANIPULATING</b> <b>SETTINGS</b> <b>VIA</b> <b>CODE</b></h4><pre>
       You can change a setting with the keyword "set":

           use Dancer2;

           # changing default settings
           set port         =&gt; 8080;
           set content_type =&gt; 'text/plain';
           set startup_info =&gt; 0;

</pre><h4><b>MANIPULATING</b> <b>SETTINGS</b> <b>VIA</b> <b>CONFIGURATION</b> <b>FILES</b></h4><pre>
       There's nothing wrong with using "set" to configure your application.  In fact you might have some great
       reasons for doing so.  For greater flexibility, ease of deployment, etc., you should also consider
       extracting those settings into a configuration file.

   <b>Configuration</b> <b>file</b> <b>path</b> <b>and</b> <b>file</b> <b>names</b>
       Dancer2 will first look for the file <u>config.EXT</u> (where <u>EXT</u> is the type of configuration file you are
       using; e.g. <u>ini</u> or <u>json</u> or <u>yml</u>) in the root directory of your application. This is considered your global
       Dancer2 config file. If you do not care to have separate settings for production and development
       environments (<b>not</b> a recommended practice!), then this file is all you need.

       Next, Dancer2 will look for a file called <u>config_local.EXT</u>. This file is typically useful for deployment-
       specific configuration that should not be checked into source control. For instance, database credentials
       could be stored in this file.  Any settings in this file are merged into the existing configuration such
       that those with the same name in your local configuration file will take precedence over those settings
       in the global file.

       Next, Dancer2 will look in the <u>environments</u> directory for a configuration file specific to the platform
       you are deploying to (<u>production.EXT</u> or <u>development.EXT</u>, for example).  Again, the configuration from the
       environment is merged with the existing configuration with the deployment config taking precedence.

       Finally, Dancer2 will look in the <u>environments</u> directory for a local configuration for the specific
       platform you are deploying to (e.g. <u>production_local.EXT</u> or <u>development_local.EXT</u>) The configuration in
       this file is merged as before.

       Much like <u>config_local.EXT</u>, this file would be useful for environment- specific configuration that would
       not be checked into source control.  For instance, when developing an application that talks to multiple
       services, each developer could have their own URLs to those services stored within their
       <u>environments/development_local.yaml</u> file.

       Note, if there is no <u>config.EXT</u>, Dancer2 will not look for a <u>config_local.EXT</u>. The same is true for the
       local environment configuration.

   <b>Supported</b> <b>configuration</b> <b>file</b> <b>formats</b>
       Dancer2 supports any configuration file format that is supported by Config::Any.  At the time of this
       writing, that includes YAML (.yml and .yaml), JSON (.jsn and .json), INI (.ini), Apache-style
       configurations (.cnf and .conf), XML (.xml), and Perl-style hashes (.pl and .perl).

       Dancer2 iterates over these file extensions in the order provided by Config::Any and loads any config
       files that it finds with later configuration information overriding earlier config information. To
       restrict which file extension Dancer2 looks for, you may set the "DANCER_CONFIG_EXT" envinroment variable
       to a specific extension and Dancer2 will only look for config files with that extension.

       Make sure you pick the appropriate extension for your configuration file name, as Dancer2 guesses the
       type of format based on the file extension.

   <b>Sample</b> <b>configuration</b> <b>files</b>
       Note: Not all possibilities are covered here, only the most common options.

       If you prefer YAML, a sample YAML based config file might look like this:

           appname: "Hello"
           charset: "UTF-8"
           auto_page: 1

           session: "YAML"
           serializer: "JSON"

           plugins:
             DBIC:
               default:
                 dsn: dbi:SQLite:db/mydata.db
                 schema_class: Hello::Schema

       If JSON is more your thing, your file might look more like this:

           {
               "appname": "Hello",
               "charset": "UTF-8",
               "auto_page": "1",
               "session": "YAML",
               "serializer": "JSON",
               "plugins": {
                   "DBIC": {
                       "default": {
                           "dsn": "dbi:SQLite:db/mydata.db",
                           "schema_class": "Hello::Schema"
                       }
                   }
               }
           }

       If you like Apache configuration files, try something similar to:

               appname = Hello
               charset = UTF-8
               auto_page = 1
               session = YAML
               serializer = JSON
               &lt;plugins&gt;
                   &lt;DBIC&gt;
                       &lt;default&gt;
                           dsn = dbi =SQLite =db/mydata.db
                           schema_class = Hello = =Schema
                       &lt;/default&gt;
                   &lt;/DBIC&gt;
               &lt;/plugins&gt;

       INI-style files are deliberately simplistic and not recommended for use in your Dancer2 applications.

</pre><h4><b>SUPPORTED</b> <b>SETTINGS</b></h4><pre>
   <b>Run</b> <b>mode</b> <b>and</b> <b>listening</b> <b>interface/port</b>
       <u>host</u> <u>(string)</u>

       The IP address that the Dancer2 app should bind to.  Default is 0.0.0.0, i.e.  bind to all available
       interfaces.

       <u>port</u> <u>(int)</u>

       The port Dancer2 will listen to.

       Default value is 3000. This setting can be changed on the command-line with the <b>--port</b> switch.

       <u>behind_proxy</u> <u>(boolean)</u>

       If set to true, Dancer2 will look to "X-Forwarded-Protocol" and "X-Forwarded-host" when constructing URLs
       (for example, when using "redirect" or "host"). This is useful if your application is behind a proxy.

       <b>Note</b>: If either of these are missing, the values of the proxy server will be used instead. For example,
       if the client sends a HTTP/1.0 request to a proxy that is hosted locally, then "host" will return the
       value "localhost". In a similar vein, if the client makes a secure connection to the proxy, but the proxy
       does not pass "X-Forwarded-Protocol", then "base" will return "http://...".  For these reasons, it is
       recommended that the values are hard-configured in the proxy if possible. For Apache this would be:

           RequestHeader set X_FORWARDED_PROTO "https"
           RequestHeader set X_FORWARDED_HOST "www.example.com"

       <u>no_default_middleware</u> <u>(boolean)</u>

       If set to true, your Dancer2 application will <b>NOT</b> be wrapped with the default PSGI middleware. The
       default middleware wrappers are:

       •   Plack::Middleware::FixMissingBodyInRedirect

       •   Plack::Middleware::Head

   <b>Content</b> <b>type</b> <b>/</b> <b>character</b> <b>set</b>
       <u>content_type</u> <u>(string)</u>

       The default content type of outgoing content.  Default value is 'text/html'.

       <u>charset</u> <u>(string)</u>

       This setting has multiple effects:

       •   It  sets  the  default  charset  of  outgoing  content. "charset=" item will be added to Content-Type
           response header.

       •   It makes Unicode bodies in HTTP responses of "text/*" types to be encoded to this charset.

       •   It also indicates to Dancer2 in which charset the static files and templates are encoded.

       •   If you're using Dancer2::Plugin::Database, UTF-8 support  will  automatically  be  enabled  for  your
           database - see "AUTOMATIC UTF-8 SUPPORT" in Dancer2::Plugin::Database

       Default  value is empty which means don't do anything. HTTP responses without charset will be interpreted
       as ISO-8859-1 by most clients.

       You can cancel any charset processing by specifying  your  own  charset  in  Content-Type  header  or  by
       ensuring  that  response body leaves your handler without Unicode flag set (by encoding it into some 8bit
       charset, for example).

       Also, since automatically serialized JSON responses  have  "application/json"  Content-Type,  you  should
       always encode them by hand.

       <u>default_mime_type</u> <u>(string)</u>

       Dancer2's  Dancer2::Core::MIME  module  uses "application/data" as a default mime type. This setting lets
       the user change it. For example, if you have a lot of files being served in the <b>public</b> folder that do not
       have an extension, and are text files, set the "default_mime_type" to "text/plain".

   <b>Serializing</b> <b>responses</b>
       <u>serializer</u> <u>(string)</u>

       When writing a webservice, data serialization/deserialization is a common issue to deal with. Dancer2 can
       automatically handle that for you, via a serializer.

       <u>Available</u> <u>serializer</u> <u>engines</u>

       The following serializers are available, be aware they dynamically depend on Perl  modules  you  may  not
       have on your system.

       •   <b>JSON</b>

           Requires JSON.

       •   <b>YAML</b>

           Requires YAML,

       •   <b>XML</b>

           Requires XML::Simple.

       •   <b>Mutable</b>

           Will  try  to  find  the  appropriate serializer using the <b>Content-Type</b> and <b>Accept-type</b> header of the
           request.

   <b>Serializer</b> <b>engine</b>
       The serializer can be configured in a separate "engines" section, like so:

          serializer: "JSON"

          engines:
            serializer:
              JSON:
                pretty: 1

       See documentation for a particular serializer for supported options.

   <b>File</b> <b>/</b> <b>directory</b> <b>locations</b>
       <u>environment</u> <u>(string)</u>

       This is the name  of  the  environment  that  should  be  used.  Standard  Dancer2  applications  have  a
       "environments"  folder  with specific configuration files for different environments (usually development
       and production environments). They specify different kind of error reporting,  deployment  details,  etc.
       These files are read after the generic "config.yml" configuration file.

       <u>appdir</u> <u>(directory)</u>

       This  is  the  path  where  your application will live.  It's where Dancer2 will look by default for your
       config files, templates and static content.

       It is typically set by "use Dancer2" to use the same directory as your script.

       <u>public_dir</u> <u>(directory)</u>

       This is the directory, where static files are stored. Any existing file in that directory will be  served
       as a static file, before matching any route.

       See also <b>static_handler</b>.

       Default: <b>"$appdir/public"</b>.

       <u>static_handler</u> <u>(boolean)</u>

       This setting have to be declared and set to true if you modify standard "public_dir" location.

       Default: true if $ENV{DANCER_PUBLIC} is set or "public_dir" is set to <b>"$appdir/public"</b>.

       <u>views</u> <u>(directory)</u>

       This  is  the directory where your templates and layouts live.  It's the "view" part of MVC (model, view,
       controller).

       Default: <b>"$appdir/views"</b>.

   <b>Templating</b> <b>&amp;</b> <b>layouts</b>
       <u>template</u>

       Allows you to configure which template engine should be used.  For instance, to use Template Toolkit, add
       the following to "config.yml":

           template: template_toolkit

       <u>layout</u> <u>(string)</u>

       The name of the layout to use when rendering view. Dancer2 will look  for  a  matching  template  in  the
       directory "$views/layouts".

       Your  can override the default layout using the third argument of the "template" keyword. Check "Dancer2"
       manpage for details.

       <u>layout_dir</u> <u>(string)</u>

       A relative path where the layouts reside inside the "views" directory.

           layout_dir: actual_layouts

       Default: <b>layouts</b>.

   <b>Logging,</b> <b>debugging</b> <b>and</b> <b>error</b> <b>handling</b>
       <u>startup_info</u> <u>(boolean)</u>

       If set to true, prints a banner at the server start with information such as versions and the environment
       (or "dancefloor").

       Conforms to the environment variable "DANCER_STARTUP_INFO".

       <u>traces</u> <u>(boolean)</u>

       If set to true, Dancer2 will display full stack traces when a warning or a die occurs.  (Internally  sets
       Carp::Verbose). Default to false.

       <u>no_server_tokens</u> <u>(boolean)</u>

       If  set to true, Dancer2 will <b>not</b> add an "X-Powered-By" header and also append the Dancer2 version to the
       "Server" header. Default to false - adding.

       You can also use the environment variable "DANCER_NO_SERVER_TOKENS".

       <u>logger</u> <u>(enum)</u>

       Select which logger to use.  For example, to write to log files with Dancer2::Logger::File:

           logger: File

       Or  to  direct  log  messages  to  the  console  from  which  you   started   your   Dancer2   app   with
       Dancer2::Logger::Console:

           logger: Console

       Loggers are configured with a corresponding "Logger engine" section, as shown below.

       <u>session</u> <u>(enum)</u>

       This setting lets you enable a session engine for your web application. By default, sessions are disabled
       in Dancer2, you must choose a session engine to use them.

       Sessions are configured with a corresponding "Session engine" section, as shown below.

       <u>show_errors</u> <u>(boolean)</u>

       Deprecated configuration.

       Use "show_stacktrace" described below instead.

       <u>show_stacktrace</u> <u>(boolean)</u>

       If set to true, Dancer2 will render a detailed debug screen whenever an error is caught. If set to false,
       Dancer2   will   render   the   default  error  page,  using  "$public/$error_code.html"  if  it  exists,
       "$views/$error_code.tt" or the template specified by the "error_template" setting.

       The error screen attempts to sanitise sensitive looking information (passwords  /  card  numbers  in  the
       request,  etc)  but  you  still should not have show_stacktrace enabled whilst in production, as there is
       still a risk of divulging details.

       <u>error_template</u> <u>(template</u> <u>path)</u>

       This setting lets you specify a template to be used in case of runtime error. At the present  moment  the
       template (as well as "$views/$error_code.tt" templates) can use four variables:

       <b>title</b>
           The error title.

       <b>content</b>
           The error specific content (if any).

       <b>status</b>
           The HTTP status code throwing that error.

       <b>exception</b>
           The stringified exception (e.g. $@) if any.

       Keep in mind that 'content' and 'exception' can vary depending on the problem.

       For example:

       A  404  has an empty 'exception' and 'content' contains the URI that was not found. Unless you do the 404
       yourself via  "send_error("You chose ... poorly!", 404);", then 'content' is 'You chose ... poorly!'.

       A 500 because of, say, dividing 0 by 0 will have an empty 'content' and 'exception like 'Illegal division
       by zero at ...'.

       A 401 from "send_error("You can not know the secret until you sign in grasshopper!", 401);" will have  an
       empty  'exception'  and  'content'  will  contain  'You  can  not  know  the  secret  until  you  sign in
       grasshopper!'.

   <b>Logger</b> <b>engine</b>
       The logger must be configured in a separate "engines" section, like so:

          logger: Console

          engines:
            logger:
              Console:
                log_level: core

       All loggers support the configuration options below.  See documentation for a particular logger for other
       supported options.

       <u>log_level</u>

       This option tells which log messages should be actually logged. Possible values are  <b>core</b>,  <b>info</b>,  <b>debug</b>,
       <b>warning</b> or <b>error</b>.

       <b>core</b> : all messages are logged, including some from Dancer2 itself
       <b>debug</b> : all messages are logged
       <b>info</b> : only info, warning and error messages are logged
       <b>warning</b> : only warning and error messages are logged
       <b>error</b> : only error messages are logged

       During development, you'll probably want to use "debug" to see your own debug messages, and "core" if you
       need  to  see  what  Dancer2  is doing.  In production, you'll likely want "error" or "warning" only, for
       less-chatty logs.

   <b>Session</b> <b>engine</b>
       The session engine is configured in the "engines" section.

          session: Simple

          engines:
            session:
              Simple:
                cookie_name: dance.set
                cookie_duration: '24 hours'
                cookie_same_site: Lax
                is_secure: 1
                is_http_only: 1

       See Dancer2::Core::Role::SessionFactory for  more  detailed  documentation  for  these  options,  or  the
       particular session engine for other supported options.

       <u>cookie_name</u>

       The name of the cookie to store the session ID in.  Defaults to "dancer.session".  This can be overridden
       by certain session engines.

       <u>cookie_domain</u>

       The domain of the cookie. By default there is no domain defined for the cookie.

       <u>cookie_path</u>

       The path of the cookie. By default there is no path defined for the cookie.

       <u>cookie_duration</u>

       The  session  expiry  time  in seconds, or as e.g. "2 hours" (see "expires" in Dancer2::Core::Cookie.  By
       default, there is no specific expiry time.

       <u>cookie_same_site</u>

       Restricts the session cookie to a first-party or same-site context. Valid values are "Strict", "Lax",  or
       "None".

       Refer to RFC6265bis &lt;https://tools.ietf.org/html/draft-ietf-httpbis-cookie-same-site&gt; for further details
       regarding same-site context.

       <u>is_secure</u>

       The  user's  session  ID  is  stored in a cookie.  If the "is_secure" setting is set to a true value, the
       cookie will be marked as secure, meaning it should only be sent over HTTPS connections.

       <u>is_http_only</u>

       This setting defaults to 1 and instructs the session cookie to be  created  with  the  "HttpOnly"  option
       active, meaning that JavaScript will not be able to access to its value.

   <b>auto_page</b> <b>(boolean)</b>
       For  simple  pages  where you're not doing anything dynamic, but still want to use the template engine to
       provide headers etc, you can use the auto_page feature to avoid the need to create a route for each page.

       With "auto_page" enabled, if the requested path does not match any specific route, Dancer2 will check  in
       the views directory for a matching template, and use it to satisfy the request if found.

       Simply enable auto_page in your config:

           auto_page: 1

       Then, if you request "/foo/bar", Dancer2 will look in the views dir for "/foo/bar.tt".

       Dancer2 will honor your "before_template_render" code, and all default variables. They will be accessible
       and interpolated on automatic served pages.

   <b>dsl_class</b>
       For complex applications that require extended DSL keywords or other functionality the DSL class used can
       be specified at import time or in the config settings.

           dsl_class: 'My::DSL'

       This is the same as specifying

           use Dancer2 dsl =&gt; 'My::DSL'

       in your module. dsl_class defaults to Dancer2::Core::DSL if not specified

   <b>Environment</b> <b>variables</b>
       <u>DANCER_CONFDIR</u>

       Sets the configuration directory.

       This correlates to the "confdir" config option.

       <u>DANCER_ENVDIR</u>

       Sets the environment directory.

       This correlates to the "envdir" config option.

       <u>PLACK_ENV</u>

       Sets the given environment. This can be overridden by "DANCER_ENVIRONMENT".

       <u>DANCER_ENVIRONMENT</u>

       Sets the given environment. This takes higher precedence over "PLACK_ENV".

       If neither "PLACK_ENV" or "DANCER_ENVIRONMENT" is set, the environment defaults to <b>development</b>.

       <u>DANCER_APPHANDLER</u>

       The "DANCER_APPHANDLER" configuration controls what the "dance" keyword does.

       If is set to "PSGI" (which will automatically be set if "PLACK_ENV" is set), "dance" will return the PSGI
       application coderef.

       Otherwise  (which  is  the  default  is  -  "Standalone"),  it  runs the Plack standalone server with the
       application.

       <u>DANCER_PORT</u>

       Sets the port which will be used by the development server (if not run by plackup).

       <u>DANCER_SERVER</u>

       Sets the host the development server will be used by the development server (if not run by plackup).

       <b>Note</b>: this might change in the future.

       <u>DANCER_STARTUP_INFO</u>

       Controls whether to display start up info.

       <u>DANCER_NO_SERVER_TOKENS</u>

       Controls whether to display the server tokens.

       <u>DANCER_PUBLIC</u>

       Sets the public directory location.

       <u>DANCER_TRACES</u>

       Sets the tracing flag which sets Carp's $Verbose flag.

       <u>DANCER_VIEWS</u>

       Sets the views (templates) directory.

       <u>DANCER_LOGGER</u>

       Sets the logger engine.

       <u>DANCER_CHARSET</u>

       Sets the default charset.

       <u>DANCER_CONTENT_TYPE</u>

       Sets the default content type.

       If not set, defaults to <b>text/html</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Dancer2

</pre><h4><b>AUTHOR</b></h4><pre>
       Dancer Core Developers

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by Alexis Sukrieh.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.40.0                                       2024-12-08                               <u>Dancer2::<a href="../man3pm/Config.3pm.html">Config</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>