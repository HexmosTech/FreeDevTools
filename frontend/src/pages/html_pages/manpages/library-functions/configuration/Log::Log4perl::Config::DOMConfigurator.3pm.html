<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log::Log4perl::Config::DOMConfigurator - reads xml config files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblog-log4perl-perl">liblog-log4perl-perl_1.57-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Log::Log4perl::Config::DOMConfigurator - reads xml config files

</pre><h4><b>SYNOPSIS</b></h4><pre>
           --------------------------
           --using the log4j DTD--
           --------------------------

           &lt;?xml version="1.0" encoding="UTF-8"?&gt;
           &lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;

           &lt;log4j:configuration xmlns:log4j="<a href="http://jakarta.apache.org/log4j/">http://jakarta.apache.org/log4j/</a>"&gt;

           &lt;appender name="FileAppndr1" class="org.apache.log4j.FileAppender"&gt;
               &lt;layout class="Log::Log4perl::Layout::PatternLayout"&gt;
                       &lt;param name="ConversionPattern"
                              value="%d %4r [%t] %-5p %c %t - %m%n"/&gt;
               &lt;/layout&gt;
               &lt;param name="File" value="t/tmp/DOMtest"/&gt;
               &lt;param name="Append" value="false"/&gt;
           &lt;/appender&gt;

           &lt;category name="a.b.c.d" additivity="false"&gt;
               &lt;level value="warn"/&gt;  &lt;!-- note lowercase! --&gt;
               &lt;appender-ref ref="FileAppndr1"/&gt;
           &lt;/category&gt;

          &lt;root&gt;
               &lt;priority value="warn"/&gt;
               &lt;appender-ref ref="FileAppndr1"/&gt;
          &lt;<a href="file:/root">/root</a>&gt;

          &lt;/log4j:configuration&gt;

          --------------------------
          --using the log4perl DTD--
          --------------------------

          &lt;?xml version="1.0" encoding="UTF-8"?&gt;
           &lt;!DOCTYPE log4perl:configuration SYSTEM "log4perl.dtd"&gt;

           &lt;log4perl:configuration xmlns:log4perl="<a href="http://log4perl.sourceforge.net/">http://log4perl.sourceforge.net/</a>"
               threshold="debug" oneMessagePerAppender="true"&gt;

           &lt;log4perl:appender name="jabbender" class="Log::Dispatch::Jabber"&gt;

                   &lt;param-nested name="login"&gt;
                          &lt;param name="hostname" value="a.jabber.server"/&gt;
                          &lt;param name="password" value="12345"/&gt;
                          &lt;param name="port"     value="5222"/&gt;
                          &lt;param name="resource" value="logger"/&gt;
                          &lt;param name="username" value="bobjones"/&gt;
                   &lt;/param-nested&gt;

                   &lt;param name="to" value="<a href="mailto:bob@a.jabber.server">bob@a.jabber.server</a>"/&gt;

                   &lt;param-text name="to"&gt;
                         <a href="mailto:mary@another.jabber.server">mary@another.jabber.server</a>
                   &lt;/param-text&gt;

                   &lt;log4perl:layout class="org.apache.log4j.PatternLayout"&gt;
                       &lt;param name="ConversionPattern" value = "%K xx %G %U"/&gt;
                       &lt;cspec name="K"&gt;
                           sub { return sprintf "%1x", $$}
                       &lt;/cspec&gt;
                       &lt;cspec name="G"&gt;
                           sub {return 'thisistheGcspec'}
                       &lt;/cspec&gt;
                   &lt;/log4perl:layout&gt;
           &lt;/log4perl:appender&gt;

           &lt;log4perl:appender name="DBAppndr2" class="Log::Log4perl::Appender::DBI"&gt;
                     &lt;param name="warp_message" value="0"/&gt;
                     &lt;param name="datasource" value="DBI:CSV:f_dir=t/tmp"/&gt;
                     &lt;param name="bufferSize" value="2"/&gt;
                     &lt;param name="password" value="sub { $ENV{PWD} }"/&gt;
                     &lt;param name="username" value="bobjones"/&gt;

                     &lt;param-text name="sql"&gt;
                         INSERT INTO log4perltest
                                   (loglevel, message, shortcaller, thingid,
                                   category, pkg, runtime1, runtime2)
                         VALUES
                                    (?,?,?,?,?,?,?,?)
                     &lt;/param-text&gt;

                      &lt;param-nested name="params"&gt;
                           &lt;param name="1" value="%p"/&gt;
                           &lt;param name="3" value="%5.5l"/&gt;
                           &lt;param name="5" value="%c"/&gt;
                           &lt;param name="6" value="%C"/&gt;
                      &lt;/param-nested&gt;

                      &lt;layout class="Log::Log4perl::Layout::NoopLayout"/&gt;
           &lt;/log4perl:appender&gt;

           &lt;category name="animal.dog"&gt;
                      &lt;priority value="info"/&gt;
                      &lt;appender-ref ref="jabbender"/&gt;
                      &lt;appender-ref ref="DBAppndr2"/&gt;
           &lt;/category&gt;

           &lt;category name="plant"&gt;
                   &lt;priority value="debug"/&gt;
                   &lt;appender-ref ref="DBAppndr2"/&gt;
           &lt;/category&gt;

           &lt;PatternLayout&gt;
               &lt;cspec name="U"&gt;&lt;![CDATA[
                   sub {
                       return "UID $&lt; GID $(";
                   }
               ]]&gt;&lt;/cspec&gt;
           &lt;/PatternLayout&gt;

           &lt;/log4perl:configuration&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module implements an XML config, complementing the properties-style config described elsewhere.

</pre><h4><b>WHY</b></h4><pre>
       "Why would I want my config in XML?" you ask.  Well, there are a couple reasons you might want to.  Maybe
       you have a personal preference for XML.  Maybe you manage your config with other tools that have an
       affinity for XML, like XML-aware editors or automated config generators.  Or maybe (and this is the big
       one) you don't like having to run your application just to check the syntax of your config file.

       By using an XML config and referencing a DTD, you can use a namespace-aware validating parser to see if
       your XML config at least follows the rules set in the DTD.

</pre><h4><b>HOW</b></h4><pre>
       To reference a DTD, drop this in after the &lt;?xml...&gt; declaration in your config file:

           &lt;!DOCTYPE log4perl:configuration SYSTEM "log4perl.dtd"&gt;

       That tells the parser to validate your config against the DTD in "log4perl.dtd", which is available in
       the xml/ directory of the log4perl distribution.  Note that you'll also need to grab the log4j-1.2.dtd
       from there as well, since the it's included by log4perl.dtd.

       Namespace-aware validating parsers are not the norm in Perl.  But the Xerces project
       (<a href="http://xml.apache.org/xerces-c/index.html">http://xml.apache.org/xerces-c/index.html</a> --lots of binaries available, even rpm's)  does provide just
       such a parser that you can use like this:

           StdInParse -ns -v &lt; my-log4perl-config.xml

       This module itself does not use a validating parser, the obvious one XML::DOM::ValParser doesn't seem to
       handle namespaces.

</pre><h4><b>WHY</b> <b>TWO</b> <b>DTDs</b></h4><pre>
       The log4j DTD is from the log4j project, they designed it to handle their needs.  log4perl has added some
       extensions to the original log4j functionality which needed some extensions to the log4j DTD.  If you
       aren't using these features then you can validate your config against the log4j dtd and know that you're
       using unadulterated log4j config tags.

       The features added by the log4perl dtd are:

       1 oneMessagePerAppender global setting
               log4perl.oneMessagePerAppender=1

       2 globally defined user conversion specifiers
               log4perl.PatternLayout.cspec.G=sub { return "UID $&lt; GID $("; }

       3 appender-local custom conversion specifiers
                log4j.appender.appndr1.layout.cspec.K = sub {return sprintf "%1x", $$ }

       4 nested options
                log4j.appender.jabbender          = Log::Dispatch::Jabber
                #(note how these are nested under 'login')
                log4j.appender.jabbender.login.hostname = a.jabber.server
                log4j.appender.jabbender.login.port     = 5222
                log4j.appender.jabbender.login.username = bobjones

       5 the log4perl-specific filters, see Log::Log4perl::Filter, lots of examples in t/044XML-Filter.t, here's
       a short one:
             &lt;?xml version="1.0" encoding="UTF-8"?&gt;
             &lt;!DOCTYPE log4perl:configuration SYSTEM "log4perl.dtd"&gt;

             &lt;log4perl:configuration xmlns:log4perl="<a href="http://log4perl.sourceforge.net/">http://log4perl.sourceforge.net/</a>"&gt;

             &lt;appender name="A1" class="Log::Log4perl::Appender::TestBuffer"&gt;
                   &lt;layout class="Log::Log4perl::Layout::SimpleLayout"/&gt;
                   &lt;filter class="Log::Log4perl::Filter::Boolean"&gt;
                       &lt;param name="logic" value="!Match3 &amp;amp;&amp;amp; (Match1 || Match2)"/&gt;
                   &lt;/filter&gt;
             &lt;/appender&gt;

             &lt;appender name="A2" class="Log::Log4perl::Appender::TestBuffer"&gt;
                   &lt;layout class="Log::Log4perl::Layout::SimpleLayout"/&gt;
                   &lt;filter-ref id="Match1"/&gt;
             &lt;/appender&gt;

             &lt;log4perl:filter name="Match1" value="sub { /let this through/ }" /&gt;

             &lt;log4perl:filter name="Match2"&gt;
                   sub {
                       /and that, too/
                   }
              &lt;/log4perl:filter&gt;

             &lt;log4perl:filter name="Match3" class="Log::Log4perl::Filter::StringMatch"&gt;
               &lt;param name="StringToMatch" value="suppress"/&gt;
               &lt;param name="AcceptOnMatch" value="true"/&gt;
             &lt;/log4perl:filter&gt;

             &lt;log4perl:filter name="MyBoolean" class="Log::Log4perl::Filter::Boolean"&gt;
               &lt;param name="logic" value="!Match3 &amp;amp;&amp;amp; (Match1 || Match2)"/&gt;
             &lt;/log4perl:filter&gt;

              &lt;root&gt;
                      &lt;priority value="info"/&gt;
                      &lt;appender-ref ref="A1"/&gt;
              &lt;<a href="file:/root">/root</a>&gt;

              &lt;/log4perl:configuration&gt;

       So we needed to extend the log4j dtd to cover these additions.  Now I could have just taken a 'steal this
       code'  approach  and  mixed  parts  of  the  log4j dtd into a log4perl dtd, but that would be cut-n-paste
       programming.  So I've used namespaces and

       •   replaced three elements:

           &lt;log4perl:configuration&gt;
               handles #1) and accepts &lt;PatternLayout&gt;

           &lt;log4perl:appender&gt;
               accepts &lt;param-nested&gt; and &lt;param-text&gt;

           &lt;log4perl:layout&gt;
               accepts custom cspecs for #3)

       •   added a &lt;param-nested&gt; element (complementing the &lt;param&gt; element)
               to handle #4)

       •   added a root &lt;PatternLayout&gt; element to handle #2)

       •   added &lt;param-text&gt; which lets you put things like perl code
               into escaped CDATA between the tags, so you don't have to worry
               about escaping characters and quotes

       •   added &lt;cspec&gt;

       See the examples up in the "SYNOPSIS" for how all that gets used.

</pre><h4><b>WHY</b> <b>NAMESPACES</b></h4><pre>
       I liked the idea of using the log4j DTD <u>in</u> <u>situ</u>, so I used namespaces to extend it.  If you really  don't
       like  having  to type &lt;log4perl:appender&gt; instead of just &lt;appender&gt;, you can make your own DTD combining
       the two DTDs and getting rid of the namespace prefixes.  Then you can validate against that, and log4perl
       should accept it just fine.

</pre><h4><b>VARIABLE</b> <b>SUBSTITUTION</b></h4><pre>
       This supports variable substitution like "${foobar}" in text and in attribute values except for appender-
       ref.  If an environment variable is defined for that name, its value is substituted. So you can do  stuff
       like

               &lt;param name="${hostname}" value="${hostnameval}.foo.com"/&gt;
               &lt;param-text name="to"&gt;${currentsysadmin}@foo.com&lt;/param-text&gt;

</pre><h4><b>REQUIRES</b></h4><pre>
       To use this module you need XML::DOM installed.

       To  use  the  log4perl.dtd,  you'll have to reference it in your XML config, and you'll also need to note
       that log4perl.dtd references the log4j dtd as "log4j-1.2.dtd", so your validator needs to be able to find
       that file as well.  If you don't like having to schlep two files around, feel free to dump  the  contents
       of "log4j-1.2.dtd" into your "log4perl.dtd" file.

</pre><h4><b>CAVEATS</b></h4><pre>
       You  can't  mix  a  multiple  param-nesteds  with the same name, I'm going to leave that for now, there's
       presently no need for a list of structs in the config.

</pre><h4><b>CHANGES</b></h4><pre>
       0.03 2/26/2003 Added support for log4perl extensions to the log4j dtd

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       t/038XML-DOM1.t, t/039XML-DOM2.t for examples

       xml/log4perl.dtd, xml/log4j-1.2.dtd

       Log::Log4perl::Config

       Log::Log4perl::Config::PropertyConfigurator

       Log::Log4perl::Config::LDAPConfigurator (coming soon!)

       The code is brazenly modeled on log4j's DOMConfigurator class, (by Christopher Taylor,  Ceki  Gülcü,  and
       Anders Kristensen) and any perceived similarity is not coincidental.

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright 2002-2013 by Mike Schilli &lt;<a href="mailto:m@perlmeister.com">m@perlmeister.com</a>&gt; and Kevin Goess &lt;<a href="mailto:cpan@goess.org">cpan@goess.org</a>&gt;.

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>AUTHOR</b></h4><pre>
       Please contribute patches to the project on Github:

           <a href="http://github.com/mschilli/log4perl">http://github.com/mschilli/log4perl</a>

       Send bug reports or requests for enhancements to the authors via our

       MAILING LIST (questions, bug reports, suggestions/patches): <a href="mailto:log4perl-devel@lists.sourceforge.net">log4perl-devel@lists.sourceforge.net</a>

       Authors (please contact them via the list above, not directly): Mike Schilli  &lt;<a href="mailto:m@perlmeister.com">m@perlmeister.com</a>&gt;,  Kevin
       Goess &lt;<a href="mailto:cpan@goess.org">cpan@goess.org</a>&gt;

       Contributors  (in  alphabetical  order):  Ateeq  Altaf,  Cory Bennett, Jens Berthold, Jeremy Bopp, Hutton
       Davidson, Chris R. Donnelly, Matisse Enzer, Hugh Esco, Anthony Foiani,  James  FitzGibbon,  Carl  Franks,
       Dennis  Gregorovic,  Andy  Grundman,  Paul  Harrington, Alexander Hartmaier  David Hull, Robert Jacobson,
       Jason Kohles, Jeff Macdonald, Markus Peter, Brett Rann, Peter Rabbitson, Erik Selberg, Aaron Straup Cope,
       Lars Thegler, David Viner, Mac Yang.

perl v5.36.0                                       2022-10-30                       <u>Config::<a href="../man3pm/DOMConfigurator.3pm.html">DOMConfigurator</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>