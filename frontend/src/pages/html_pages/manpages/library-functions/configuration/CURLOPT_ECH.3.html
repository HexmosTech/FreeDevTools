<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_ECH - configuration for Encrypted Client Hello</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_ECH - configuration for Encrypted Client Hello

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_ECH, char *config);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       ECH is only compatible with TLSv1.3.

       This  experimental  feature  requires  a special build of OpenSSL, as ECH is not yet supported in OpenSSL
       releases. In contrast ECH is supported by the latest BoringSSL, wolfSSL and rustls-ffi releases.

       There is also a known issue with using wolfSSL which does not  support  ECH  when  the  HelloRetryRequest
       mechanism is used.

       Pass  a  string  that  specifies configuration details for ECH. In all cases, if ECH is attempted, it may
       fail for various reasons. The keywords supported are:

       false  Turns off ECH.

       grease Instructs client to emit a GREASE ECH extension. (The connection fails if  ECH  is  attempted  but
              fails.)

       true   Instructs client to attempt ECH, if possible, but to not fail if attempting ECH is not possible.

       hard   Instructs client to attempt ECH and fail if attempting ECH is not possible.

       ecl:&lt;base64-value&gt;
              If  the  string  starts  with  <u>ecl:</u>  then  the  remainder of the string should be a base64-encoded
              ECHConfigList that is used for ECH rather than attempting to download such a value from the DNS.

       pn:&lt;name&gt;
              If the string starts with <u>pn:</u> then the remainder of the string should be a  DNS/hostname  that  is
              used to over-ride the public_name field of the ECHConfigList that is used for ECH.

       The application does not have to keep the string around after setting this option.

       Using  this option multiple times makes the last set string override the previous ones. Set it to NULL or
       "false" to disable its use again.

</pre><h4><b>DEFAULT</b></h4><pre>
       NULL, meaning ECH is disabled.

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all TLS based protocols: HTTPS, FTPS, IMAPS, POP3S, SMTPS etc.

       This option works only with the following TLS backends: OpenSSL, rustls and wolfSSL

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();

         const char *config = \
           "ecl:AED+DQA87wAgACB/RuzUCsW3uBbSFI7mzD63TUXpI8sGDTnFTbFCDpa+" \
           "CAAEAAEAAQANY292ZXIuZGVmby5pZQAA";
         if(curl) {
           curl_easy_setopt(curl, CURLOPT_ECH, config);
           curl_easy_perform(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 8.8.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_DOH_URL.3.html">CURLOPT_DOH_URL</a></b>(3)

libcurl                                            2025-06-16                                     <u><a href="../man3/CURLOPT_ECH.3.html">CURLOPT_ECH</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>