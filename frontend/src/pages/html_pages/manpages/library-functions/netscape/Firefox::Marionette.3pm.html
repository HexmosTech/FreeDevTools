<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firefox::Marionette - Automate the Firefox browser with the Marionette protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libfirefox-marionette-perl">libfirefox-marionette-perl_1.22-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Firefox::Marionette - Automate the Firefox browser with the Marionette protocol

</pre><h4><b>VERSION</b></h4><pre>
       Version 1.22

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           say $firefox-&gt;find_tag('title')-&gt;property('innerHTML'); # same as $firefox-&gt;title();

           say $firefox-&gt;html();

           $firefox-&gt;find_class('container-fluid')-&gt;find_id('metacpan_search-input')-&gt;type('Test::More');

           say "Height of search box is " . $firefox-&gt;find_class('container-fluid')-&gt;css('height');

           my $file_handle = $firefox-&gt;selfie();

           $firefox-&gt;find('//button[@name="lucky"]')-&gt;click();

           $firefox-&gt;await(sub { $firefox-&gt;interactive() &amp;&amp; $firefox-&gt;find_partial('Download') })-&gt;click();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is a client module to automate the Mozilla Firefox browser via the Marionette protocol
       &lt;https://developer.mozilla.org/en-US/docs/Mozilla/QA/Marionette/Protocol&gt;

</pre><h4><b>SUBROUTINES/METHODS</b></h4><pre>
   <b>accept_alert</b>
       accepts a currently displayed modal message box

   <b>accept_connections</b>
       Enables or disables accepting new socket connections.  By calling this method with false the server will
       not accept any further connections, but existing connections will not be forcible closed. Use true to re-
       enable accepting connections.

       Please note that when closing the connection via the client you can end-up in a non-recoverable state if
       it hasn't been enabled before.

   <b>active_element</b>
       returns the active element of the current browsing context's document element, if the document element is
       non-null.

   <b>add_certificate</b>
       accepts a hash as a parameter and adds the specified certificate to the Firefox database with the
       supplied or default trust.  Allowed keys are below;

       •   path    -    a    file    system    path    to    a    single    PEM    encoded   X.509   certificate
           &lt;https://datatracker.ietf.org/doc/html/rfc7468#section-5&gt;.

       •   string    -    a    string    containg     a     single     PEM     encoded     X.509     certificate
           &lt;https://datatracker.ietf.org/doc/html/rfc7468#section-5&gt;

       •   trust   -   This   is   the   trustargs   &lt;https://www.mankier.com/1/certutil#-t&gt;   value   for   NSS
           &lt;https://wiki.mozilla.org/NSS&gt;.  If defaults to 'C,,';

       This method returns itself to aid in chaining methods.

           use Firefox::Marionette();

           my $pem_encoded_string = &lt;&lt;'_PEM_';
           -----BEGIN CERTIFICATE-----
           MII..
           -----END CERTIFICATE-----
           _PEM_
           my $firefox = Firefox::Marionette-&gt;new()-&gt;add_certificate(string =&gt; $pem_encoded_string);

   <b>add_cookie</b>
       accepts a single cookie object as the first parameter and adds it to the current cookie jar.  This method
       returns itself to aid in chaining methods.

       This method throws an exception if you try to add a cookie  for  a  different  domain  than  the  current
       document &lt;https://developer.mozilla.org/en-US/docs/Web/WebDriver/Errors/InvalidCookieDomain&gt;.

   <b>add_header</b>
       accepts a hash of HTTP headers to include in every future HTTP Request.

           use Firefox::Marionette();
           use UUID();

           my $firefox = Firefox::Marionette-&gt;new();
           my $uuid = UUID::uuid();
           $firefox-&gt;add_header( 'Track-my-automated-tests' =&gt; $uuid );
           $firefox-&gt;go('https://metacpan.org/');

       these headers are added to any existing headers.  To clear headers, see the delete_header method

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;delete_header( 'Accept' )-&gt;add_header( 'Accept' =&gt; 'text/perl' )-&gt;go('https://metacpan.org/');

       will  only  send  out an Accept &lt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept&gt; header
       that looks like "Accept: text/perl".

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;add_header( 'Accept' =&gt; 'text/perl' )-&gt;go('https://metacpan.org/');

       by itself, will send  out  an  Accept  &lt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept&gt;
       header                   that                   may                   resemble                   "Accept:
       text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8,   text/perl".   This   method
       returns itself to aid in chaining methods.

   <b>add_login</b>
       accepts a hash of the following keys;

       •   host   -   The   scheme   +   hostname   of   the   page   where   the  login  applies,  for  example
           'https://www.example.org'.

       •   user - The username for the login.

       •   password - The password for the login.

       •   origin   -   The   scheme   +   hostname   that   the   form-based    login    was    submitted    to
           &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#attr-action&gt;.   Forms  with no action
           attribute  &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form#attr-action&gt;  default   to
           submitting  to  the  URL  of  the  page containing the login form, so that is stored here. This field
           should be omitted (it will be set to undef) for http auth type authentications and "" means to  match
           against any form action.

       •   realm - The HTTP Realm for which the login was requested. When an HTTP server sends a 401 result, the
           WWW-Authenticate        header        includes        a        realm.        See       RFC       2617
           &lt;https://datatracker.ietf.org/doc/html/rfc2617&gt;.  If the realm is not specified, or it was blank, the
           hostname is used instead. For HTML form logins, this field should not be specified.

       •   user_field - The name attribute for the username input in a form. Non-form logins should not  specify
           this field.

       •   password_field  -  The  name  attribute  for the password input in a form. Non-form logins should not
           specify this field.

       or a Firefox::Marionette::Login object as the first parameter and adds the login  to  the  Firefox  login
       database.

           use Firefox::Marionette();
           use UUID();

           my $firefox = Firefox::Marionette-&gt;new();

           # for http auth logins

           my $http_auth_login = Firefox::Marionette::Login-&gt;new(host =&gt; 'https://pause.perl.org', user =&gt; 'AUSER', password =&gt; 'qwerty', realm =&gt; 'PAUSE');
           $firefox-&gt;add_login($http_auth_login);
           $firefox-&gt;go('https://pause.perl.org/pause/authenquery')-&gt;accept_alert(); # this goes to the page and submits the http auth popup

           # for form based login

           $firefox-&gt;add_login(host =&gt; 'https://github.com', origin =&gt; 'https://github.com', user =&gt; '<a href="mailto:me@example.org">me@example.org</a>', password =&gt; 'qwerty', user_field =&gt; 'login', password_field =&gt; 'password');
           my $form_login = Firefox::Marionette::Login(host =&gt; 'https://github.com', user =&gt; '<a href="mailto:me2@example.org">me2@example.org</a>', password =&gt; 'uiop[]', user_field =&gt; 'login', password_field =&gt; 'password');

           # or just directly

           $firefox-&gt;add_login(host =&gt; 'https://github.com', user =&gt; '<a href="mailto:me2@example.org">me2@example.org</a>', password =&gt; 'uiop[]', user_field =&gt; 'login', password_field =&gt; 'password');

       This method returns itself to aid in chaining methods.

   <b>add_site_header</b>
       accepts a host name and a hash of HTTP headers to include in every future HTTP Request that is being sent
       to that particular host.

           use Firefox::Marionette();
           use UUID();

           my $firefox = Firefox::Marionette-&gt;new();
           my $uuid = UUID::uuid();
           $firefox-&gt;add_site_header( 'metacpan.org', 'Track-my-automated-tests' =&gt; $uuid );
           $firefox-&gt;go('https://metacpan.org/');

       these  headers  are  added to any existing headers going to the metacpan.org site, but no other site.  To
       clear site headers, see the delete_site_header method

   <b>addons</b>
       returns if pre-existing addons (extensions/themes) are allowed to run.  This will  be  true  for  Firefox
       versions less than 55, as -safe-mode cannot be automated.

   <b>alert_text</b>
       Returns the message shown in a currently displayed modal message box

   <b>alive</b>
       This method returns true or false depending on if the Firefox process is still running.

   <b>application_type</b>
       returns the application type for the Marionette protocol.  Should be 'gecko'.

   <b>async_script</b>
       accepts  a  scalar containing a javascript function that is executed in the browser.  This method returns
       itself to aid in chaining methods.

       The executing javascript is subject to the script timeout, which, by default is 30 seconds.

   <b>attribute</b>
       accepts an element as the first parameter and a scalar  attribute  name  as  the  second  parameter.   It
       returns  the  initial value of the attribute with the supplied name.  This method will return the initial
       content, the property method will return the current content.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           my $element = $firefox-&gt;find_id('search_input');
           !defined $element-&gt;attribute('value') or die "attribute is not defined!");
           $element-&gt;type('Test::More');
           !defined $element-&gt;attribute('value') or die "attribute is still not defined!");

   <b>await</b>
       accepts a subroutine reference as a parameter and then executes the subroutine.  If a not found exception
       is thrown, this method will sleep for sleep_time_in_ms  milliseconds  and  then  execute  the  subroutine
       again.  When the subroutine executes successfully, it will return what the subroutine returns.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new(sleep_time_in_ms =&gt; 5)-&gt;go('https://metacpan.org/');

           $firefox-&gt;find_id('metacpan_search-input')-&gt;type('Test::More');

           $firefox-&gt;find_name('lucky')-&gt;click();

           $firefox-&gt;await(sub { $firefox-&gt;interactive() &amp;&amp; $firefox-&gt;find_partial('Download') })-&gt;click();

   <b>back</b>
       causes  the  browser  to traverse one step backward in the joint history of the current browsing context.
       The browser will wait for the one step backward to complete or the session's page_load duration to elapse
       before returning, which, by default is 5 minutes.  This method returns itself to aid in chaining methods.

   <b>debug</b>
       accept a boolean and return the current value of the debug setting.  This allows the dynamic  setting  of
       debug.

   <b>default_binary_name</b>
       just returns the string 'firefox'.  Only of interest when sub-classing.

   <b>browser_version</b>
       This method returns the current version of firefox.

   <b>bye</b>
       accepts  a  subroutine  reference  as  a  parameter  and then executes the subroutine.  If the subroutine
       executes successfully, this method will sleep for sleep_time_in_ms  milliseconds  and  then  execute  the
       subroutine  again.   When  a  not  found  exception  is  thrown, this method will return itself to aid in
       chaining methods.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           $firefox-&gt;find_id('metacpan_search-input')-&gt;type('Test::More');

           $firefox-&gt;find_name('lucky')-&gt;click();

           $firefox-&gt;bye(sub { $firefox-&gt;find_name('lucky') })-&gt;await(sub { $firefox-&gt;interactive() &amp;&amp; $firefox-&gt;find_partial('Download') })-&gt;click();

   <b>capabilities</b>
       returns the capabilities of the current firefox binary.  You can retrieve timeouts or a proxy  with  this
       method.

   <b>certificate_as_pem</b>
       accepts  a  certificate  stored  in  the  Firefox database as a parameter and returns a PEM encoded X.509
       certificate &lt;https://datatracker.ietf.org/doc/html/rfc7468#section-5&gt; as a string.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();

           # Generating a ca-bundle.crt to STDOUT from the current firefox instance

           foreach my $certificate (sort { $a-&gt;display_name() cmp $b-&gt;display_name } $firefox-&gt;certificates()) {
               if ($certificate-&gt;is_ca_cert()) {
                   print '# ' . $certificate-&gt;display_name() . "\n" . $firefox-&gt;certificate_as_pem($certificate) . "\n";
               }
           }

       The ca-bundle-for-firefox command that is provided as part of this distribution does this.

   <b>certificates</b>
       returns a list of all known certificates in the Firefox database.

           use Firefox::Marionette();
           use v5.10;

           # Sometimes firefox can neglect old certificates.  See https://bugzilla.mozilla.org/show_bug.cgi?id=1710716

           my $firefox = Firefox::Marionette-&gt;new();
           foreach my $certificate (grep { $_-&gt;is_ca_cert() &amp;&amp; $_-&gt;not_valid_after() &lt; time } $firefox-&gt;certificates()) {
               say "The " . $certificate-&gt;display_name() " . certificate has expired and should be removed";
           }

       This method returns itself to aid in chaining methods.

   <b>child_error</b>
       This method returns the $? (CHILD_ERROR) for the Firefox process, or undefined if the process has not yet
       exited.

   <b>chrome</b>
       changes the scope of subsequent commands to chrome context.  This allows  things  like  interacting  with
       firefox menu's and buttons outside of the browser window.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new()-&gt;chrome();
           $firefox-&gt;script(...); # running script in chrome context
           $firefox-&gt;content();

       See the context method for an alternative methods for changing the context.

   <b>chrome_window_handle</b>
       returns  an server-assigned integer identifiers for the current chrome window that uniquely identifies it
       within this Marionette instance.  This can be used to switch to  this  window  at  a  later  point.  This
       corresponds  to  a  window  that  may  itself contain tabs.  This method is replaced by window_handle and
       appropriate   context   calls   for   Firefox    94    and    after    &lt;https://developer.mozilla.org/en-
       US/docs/Mozilla/Firefox/Releases/94#webdriver_conformance_marionette&gt;.

   <b>chrome_window_handles</b>
       returns  identifiers for each open chrome window for tests interested in managing a set of chrome windows
       and tabs separately.  This method is replaced by window_handles and appropriate context calls for Firefox
       94                    and                    after                     &lt;https://developer.mozilla.org/en-
       US/docs/Mozilla/Firefox/Releases/94#webdriver_conformance_marionette&gt;.

   <b>clear</b>
       accepts a element as the first parameter and clears any user supplied input

   <b>click</b>
       accepts  a  element as the first parameter and sends a 'click' to it.  The browser will wait for any page
       load to complete or the session's page_load duration to elapse before returning, which, by default  is  5
       minutes.  The click method is also used to choose an option in a select dropdown.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new(visible =&gt; 1)-&gt;go('https://ebay.com');
           my $select = $firefox-&gt;find_tag('select');
           foreach my $option ($select-&gt;find_tag('option')) {
               if ($option-&gt;property('value') == 58058) { # Computers/Tablets &amp; Networking
                   $option-&gt;click();
               }
           }

   <b>close_current_chrome_window_handle</b>
       closes  the  current  chrome window (that is the entire window, not just the tabs).  It returns a list of
       still available chrome window handles. You will need to switch_to_window to use another window.

   <b>close_current_window_handle</b>
       closes the current window/tab.  It returns a list of still available window/tab handles.

   <b>content</b>
       changes the scope of subsequent commands to browsing context.  This  is  the  default  for  when  firefox
       starts and restricts commands to operating in the browser window only.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new()-&gt;chrome();
           $firefox-&gt;script(...); # running script in chrome context
           $firefox-&gt;content();

       See the context method for an alternative methods for changing the context.

   <b>context</b>
       accepts  a  string  as  the  first  parameter, which may be either 'content' or 'chrome'.  It returns the
       context type that is Marionette's current target for browsing context scoped commands.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new();
           if ($firefox-&gt;context() eq 'content') {
              say "I knew that was going to happen";
           }
           my $old_context = $firefox-&gt;context('chrome');
           $firefox-&gt;script(...); # running script in chrome context
           $firefox-&gt;context($old_context);

       See the content and chrome methods for alternative methods for changing the context.

   <b>cookies</b>
       returns the contents of the cookie jar in scalar or list context.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://github.com');
           foreach my $cookie ($firefox-&gt;cookies()) {
               if (defined $cookie-&gt;same_site()) {
                   say "Cookie " . $cookie-&gt;name() . " has a SameSite of " . $cookie-&gt;same_site();
               } else {
                   warn "Cookie " . $cookie-&gt;name() . " does not have the SameSite attribute defined";
               }
           }

   <b>css</b>
       accepts an element as the first parameter and a scalar CSS property name as  the  second  parameter.   It
       returns the value of the computed style for that property.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           say $firefox-&gt;find_id('metacpan_search-input')-&gt;css('height');

   <b>current_chrome_window_handle</b>
       see chrome_window_handle.

   <b>delete_certificate</b>
       accepts a certificate stored in the Firefox database as a parameter and deletes/distrusts the certificate
       from the Firefox database.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new();
           foreach my $certificate ($firefox-&gt;certificates()) {
               if ($certificate-&gt;is_ca_cert()) {
                   $firefox-&gt;delete_certificate($certificate);
               } else {
                   say "This " . $certificate-&gt;display_name() " certificate is NOT a certificate authority, therefore it is not being deleted";
               }
           }
           say "Good luck visiting a HTTPS website!";

       This method returns itself to aid in chaining methods.

   <b>delete_cookie</b>
       deletes  a  single  cookie  by  name.   Accepts a scalar containing the cookie name as a parameter.  This
       method returns itself to aid in chaining methods.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://github.com');
           foreach my $cookie ($firefox-&gt;cookies()) {
               warn "Cookie " . $cookie-&gt;name() . " is being deleted";
               $firefox-&gt;delete_cookie($cookie-&gt;name());
           }
           foreach my $cookie ($firefox-&gt;cookies()) {
               die "Should be no cookies here now";
           }

   <b>delete_cookies</b>
       here be cookie monsters! This method returns itself to aid in chaining methods.

   <b>delete_header</b>
       accepts a list of HTTP header names to delete from future HTTP Requests.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();
           $firefox-&gt;delete_header( 'User-Agent', 'Accept', 'Accept-Encoding' );

       will remove the User-Agent &lt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent&gt;, Accept
       &lt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept&gt;          and           Accept-Encoding
       &lt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding&gt;   headers   from  all  future
       requests

       This method returns itself to aid in chaining methods.

   <b>delete_login</b>
       accepts a login as a parameter.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();
           foreach my $login ($firefox-&gt;logins()) {
               if ($login-&gt;user() eq '<a href="mailto:me@example.org">me@example.org</a>') {
                   $firefox-&gt;delete_login($login);
               }
           }

       will remove the logins with the username matching '<a href="mailto:me@example.org">me@example.org</a>'.

       This method returns itself to aid in chaining methods.

   <b>delete_logins</b>
       This method empties the password database.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();
           $firefox-&gt;delete_logins();

       This method returns itself to aid in chaining methods.

   <b>delete_session</b>
       deletes the current WebDriver session.

   <b>delete_site_header</b>
       accepts a host name and a list of HTTP headers names to delete from future HTTP Requests.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();
           $firefox-&gt;delete_header( 'metacpan.org', 'User-Agent', 'Accept', 'Accept-Encoding' );

       will remove the User-Agent &lt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent&gt;, Accept
       &lt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept&gt;          and           Accept-Encoding
       &lt;https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Accept-Encoding&gt;   headers   from  all  future
       requests to metacpan.org.

       This method returns itself to aid in chaining methods.

   <b>developer</b>
       returns true if the current version  of  firefox  is  a  developer  edition  &lt;https://www.mozilla.org/en-
       US/firefox/developer/&gt; (does the minor version number end with an 'b\d+'?) version.

   <b>dismiss_alert</b>
       dismisses a currently displayed modal message box

   <b>download</b>
       accepts  a  filesystem  path  and  returns  a  matching  filehandle.  This is trivial for locally running
       firefox, but sufficiently complex to justify the method for a remote firefox running over ssh.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new( host =&gt; '10.1.2.3' )-&gt;go('https://metacpan.org/');

           $firefox-&gt;find_class('container-fluid')-&gt;find_id('metacpan_search-input')-&gt;type('Test::More');

           $firefox-&gt;find('//button[@name="lucky"]')-&gt;click();

           $firefox-&gt;await(sub { $firefox-&gt;interactive() &amp;&amp; $firefox-&gt;find_partial('Download') })-&gt;click();

           while(!$firefox-&gt;downloads()) { sleep 1 }

           foreach my $path ($firefox-&gt;downloads()) {

               my $handle = $firefox-&gt;download($path);

               # do something with downloaded file handle

           }

   <b>downloading</b>
       returns true if any files in downloads end in ".part"

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           $firefox-&gt;find_class('container-fluid')-&gt;find_id('metacpan_search-input')-&gt;type('Test::More');

           $firefox-&gt;find('//button[@name="lucky"]')-&gt;click();

           $firefox-&gt;await(sub { $firefox-&gt;interactive() &amp;&amp; $firefox-&gt;find_partial('Download') })-&gt;click();

           while(!$firefox-&gt;downloads()) { sleep 1 }

           while($firefox-&gt;downloading()) { sleep 1 }

           foreach my $path ($firefox-&gt;downloads()) {
               say $path;
           }

   <b>downloads</b>
       returns a list of file paths (including partial downloads) of downloads during this Firefox session.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           $firefox-&gt;find_class('container-fluid')-&gt;find_id('metacpan_search-input')-&gt;type('Test::More');

           $firefox-&gt;find('//button[@name="lucky"]')-&gt;click();

           $firefox-&gt;await(sub { $firefox-&gt;interactive() &amp;&amp; $firefox-&gt;find_partial('Download') })-&gt;click();

           while(!$firefox-&gt;downloads()) { sleep 1 }

           foreach my $path ($firefox-&gt;downloads()) {
               say $path;
           }

   <b>error_message</b>
       This method returns a human readable error message describing how the Firefox process exited (assuming it
       started okay).  On Win32 platforms this information is restricted to exit code.

   <b>execute</b>
       This utility method executes a command with arguments and returns STDOUT as a chomped string.   It  is  a
       simple method only intended for the Firefox::Marionette::* modules.

   <b>fill_login</b>
       This method searchs the Password Manager &lt;https://support.mozilla.org/en-US/kb/password-manager-remember-
       delete-edit-logins&gt;  for  an appropriate login for any form on the current page.  The form must match the
       host, the action attribute and the user and password field names.

           use Firefox::Marionette();
           use IO::Prompt();

           my $firefox = Firefox::Marionette-&gt;new();

           my $firefox = Firefox::Marionette-&gt;new();

           my $url = 'https://github.com';

           my $user = '<a href="mailto:me@example.org">me@example.org</a>';

           my $password = IO::Prompt::prompt(-echo =&gt; q[*], "Please enter the password for the $user account when logging into $url:");

           $firefox-&gt;add_login(host =&gt; $url, user =&gt; $user, password =&gt; 'qwerty', user_field =&gt; 'login', password_field =&gt; 'password');

           $firefox-&gt;go("$url/login");

           $firefox-&gt;fill_login();

   <b>find</b>
       accepts an xpath expression &lt;https://en.wikipedia.org/wiki/XPath&gt; as the first parameter and returns  the
       first element that matches this expression.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           $firefox-&gt;find('//input[@id="metacpan_search-input"]')-&gt;type('Test::More');

           # OR in list context

           foreach my $element ($firefox-&gt;find('//input[@id="metacpan_search-input"]')) {
               $element-&gt;type('Test::More');
           }

       If  no elements are found, a not found exception will be thrown.  For the same functionality that returns
       undef if no elements are found, see the has method.

   <b>find_id</b>
       accepts  an  id  &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id&gt;  as  the  first
       parameter and returns the first element with a matching 'id' property.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           $firefox-&gt;find_id('metacpan_search-input')-&gt;type('Test::More');

           # OR in list context

           foreach my $element ($firefox-&gt;find_id('metacpan_search-input')) {
               $element-&gt;type('Test::More');
           }

       If  no elements are found, a not found exception will be thrown.  For the same functionality that returns
       undef if no elements are found, see the has_id method.

   <b>find_name</b>
       This method returns the first element with a matching 'name' property.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           $firefox-&gt;find_name('q')-&gt;type('Test::More');

           # OR in list context

           foreach my $element ($firefox-&gt;find_name('q')) {
               $element-&gt;type('Test::More');
           }

       If no elements are found, a not found exception will be thrown.  For the same functionality that  returns
       undef if no elements are found, see the has_name method.

   <b>find_class</b>
       accepts  a  class name &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class&gt; as the
       first parameter and returns the first element with a matching 'class' property.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           $firefox-&gt;find_class('form-control home-metacpan_search-input')-&gt;type('Test::More');

           # OR in list context

           foreach my $element ($firefox-&gt;find_class('form-control home-metacpan_search-input')) {
               $element-&gt;type('Test::More');
           }

       If no elements are found, a not found exception will be thrown.  For the same functionality that  returns
       undef if no elements are found, see the has_class method.

   <b>find_selector</b>
       accepts  a  CSS  Selector  &lt;https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors&gt;  as the first
       parameter and returns the first element that matches that selector.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           $firefox-&gt;find_selector('input.home-metacpan_search-input')-&gt;type('Test::More');

           # OR in list context

           foreach my $element ($firefox-&gt;find_selector('input.home-metacpan_search-input')) {
               $element-&gt;type('Test::More');
           }

       If no elements are found, a not found exception will be thrown.  For the same functionality that  returns
       undef if no elements are found, see the has_selector method.

   <b>find_tag</b>
       accepts  a  tag  name  &lt;https://developer.mozilla.org/en-US/docs/Web/API/Element/tagName&gt;  as  the  first
       parameter and returns the first element with this tag name.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           my $element = $firefox-&gt;find_tag('input');

           # OR in list context

           foreach my $element ($firefox-&gt;find_tag('input')) {
               # do something
           }

       If no elements are found, a not found exception will be thrown. For the same functionality  that  returns
       undef if no elements are found, see the has_tag method.

   <b>find_link</b>
       accepts  a text string as the first parameter and returns the first link element that has a matching link
       text.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           $firefox-&gt;find_link('API')-&gt;click();

           # OR in list context

           foreach my $element ($firefox-&gt;find_link('API')) {
               $element-&gt;click();
           }

       If no elements are found, a not found exception will be thrown.  For the same functionality that  returns
       undef if no elements are found, see the has_link method.

   <b>find_partial</b>
       accepts  a  text  string  as  the first parameter and returns the first link element that has a partially
       matching link text.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           $firefox-&gt;find_partial('AP')-&gt;click();

           # OR in list context

           foreach my $element ($firefox-&gt;find_partial('AP')) {
               $element-&gt;click();
           }

       If no elements are found, a not found exception will be thrown.  For the same functionality that  returns
       undef if no elements are found, see the has_partial method.

   <b>forward</b>
       causes the browser to traverse one step forward in the joint history of the current browsing context. The
       browser  will  wait  for  the  one step forward to complete or the session's page_load duration to elapse
       before returning, which, by default is 5 minutes.  This method returns itself to aid in chaining methods.

   <b>full_screen</b>
       full screens the firefox window. This method returns itself to aid in chaining methods.

   <b>go</b>
       Navigates the current browsing context to the given URI and  waits  for  the  document  to  load  or  the
       session's page_load duration to elapse before returning, which, by default is 5 minutes.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();
           $firefox-&gt;go('https://metacpan.org/'); # will only return when metacpan.org is FULLY loaded (including all images / js / css)

       To make the go method return quicker, you need to set the page load strategy capability to an appropriate
       value, such as below;

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new( capabilities =&gt; Firefox::Marionette::Capabilities-&gt;new( page_load_strategy =&gt; 'eager' ));
           $firefox-&gt;go('https://metacpan.org/'); # will return once the main document has been loaded and parsed, but BEFORE sub-resources (images/stylesheets/frames) have been loaded.

       When going directly to a URL that needs to be downloaded, please see BUGS AND LIMITATIONS for a necessary
       workaround.

       This method returns itself to aid in chaining methods.

   <b>har</b>
       returns  a hashref representing the http archive &lt;https://en.wikipedia.org/wiki/HAR_(file_format)&gt; of the
       session.  This function is subject to the script timeout, which, by default is 30 seconds.   It  is  also
       possible   for   the   function   to   hang   (until   the  script  timeout)  if  the  original  devtools
       &lt;https://developer.mozilla.org/en-US/docs/Tools&gt; window is closed.  The hashref has been designed  to  be
       accepted by the Archive::Har module.  This function should be considered experimental.  Feedback welcome.

           use Firefox::Marionette();
           use Archive::Har();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new(visible =&gt; 1, debug =&gt; 1, har =&gt; 1);

           $firefox-&gt;go("<a href="http://metacpan.org/">http://metacpan.org/</a>");

           $firefox-&gt;find('//input[@id="metacpan_search-input"]')-&gt;type('Test::More');
           $firefox-&gt;find_name('lucky')-&gt;click();

           my $har = Archive::Har-&gt;new();
           $har-&gt;hashref($firefox-&gt;har());

           foreach my $entry ($har-&gt;entries()) {
               say $entry-&gt;request()-&gt;url() . " spent " . $entry-&gt;timings()-&gt;connect() . " ms establishing a TCP connection";
           }

   <b>has</b>
       accepts  an xpath expression &lt;https://en.wikipedia.org/wiki/XPath&gt; as the first parameter and returns the
       first element that matches this expression.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           if (my $element = $firefox-&gt;has('//input[@id="metacpan_search-input"]')) {
               $element-&gt;type('Test::More');
           }

       If no elements are found, this method will return undef.  For the same functionality that  throws  a  not
       found exception, see the find method.

   <b>has_id</b>
       accepts  an  id  &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id&gt;  as  the  first
       parameter and returns the first element with a matching 'id' property.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           if (my $element = $firefox-&gt;has_id('metacpan_search-input')) {
               $element-&gt;type('Test::More');
           }

       If no elements are found, this method will return undef.  For the same functionality that  throws  a  not
       found exception, see the find_id method.

   <b>has_name</b>
       This method returns the first element with a matching 'name' property.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           if (my $element = $firefox-&gt;has_name('q')) {
               $element-&gt;type('Test::More');
           }

       If  no  elements  are found, this method will return undef.  For the same functionality that throws a not
       found exception, see the find_name method.

   <b>has_class</b>
       accepts a class name &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/class&gt;  as  the
       first parameter and returns the first element with a matching 'class' property.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           if (my $element = $firefox-&gt;has_class('form-control home-metacpan_search-input')) {
               $element-&gt;type('Test::More');
           }

       If  no  elements  are found, this method will return undef.  For the same functionality that throws a not
       found exception, see the find_class method.

   <b>has_selector</b>
       accepts a CSS  Selector  &lt;https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors&gt;  as  the  first
       parameter and returns the first element that matches that selector.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           if (my $element = $firefox-&gt;has_selector('input.home-metacpan_search-input')) {
               $element-&gt;type('Test::More');
           }

       If  no  elements  are found, this method will return undef.  For the same functionality that throws a not
       found exception, see the find_selector method.

   <b>has_tag</b>
       accepts  a  tag  name  &lt;https://developer.mozilla.org/en-US/docs/Web/API/Element/tagName&gt;  as  the  first
       parameter and returns the first element with this tag name.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           if (my $element = $firefox-&gt;has_tag('input')) {
               # do something
           }

       If  no  elements  are found, this method will return undef.  For the same functionality that throws a not
       found exception, see the find_tag method.

   <b>has_link</b>
       accepts a text string as the first parameter and returns the first link element that has a matching  link
       text.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           if (my $element = $firefox-&gt;has_link('API')) {
               $element-&gt;click();
           }

       If  no  elements  are found, this method will return undef.  For the same functionality that throws a not
       found exception, see the find_link method.

   <b>has_partial</b>
       accepts a text string as the first parameter and returns the first link  element  that  has  a  partially
       matching link text.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           if (my $element = $firefox-&gt;find_partial('AP')) {
               $element-&gt;click();
           }

       If  no  elements  are found, this method will return undef.  For the same functionality that throws a not
       found exception, see the find_partial method.

   <b>html</b>
       returns the page source of the content document.  This page source can be wrapped in  html  that  firefox
       provides.   See  the  json  method  for  an  alternative when dealing with response content types such as
       application/json and strip for an alterative when dealing with  other  non-html  content  types  such  as
       text/plain.

           use Firefox::Marionette();
           use v5.10;

           say Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/')-&gt;html();

   <b>images</b>
       returns a list of all of the following elements;

       •   img &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img&gt;

       •   image inputs &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/image&gt;

       as Firefox::Marionette::Image objects.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           if (my $link = $firefox-&gt;images()) {
               say "Found a image with width " . $image-&gt;width() . "px and height " . $image-&gt;height() . "px from " . $image-&gt;URL();
           }

       If no elements are found, this method will return undef.

   <b>install</b>
       accepts the following as the first parameter;

       •   path to an xpi file &lt;https://developer.mozilla.org/en-US/docs/Mozilla/XPI&gt;.

       •   path  to  a  directory  containing  firefox  extension source code &lt;https://developer.mozilla.org/en-
           US/docs/Mozilla/Add-ons/WebExtensions/Your_first_WebExtension&gt;.  This directory will be  packaged  up
           as an unsigned xpi file.

       •   path    to   a   top   level   file   (such   as   manifest.json   &lt;https://developer.mozilla.org/en-
           US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#manifest.json&gt;)   in   a    directory
           containing   firefox  extension  source  code  &lt;https://developer.mozilla.org/en-US/docs/Mozilla/Add-
           ons/WebExtensions/Your_first_WebExtension&gt;.  This directory will be packaged up as  an  unsigned  xpi
           file.

       and  an  optional true/false second parameter to indicate if the xpi file should be a temporary extension
       &lt;https://extensionworkshop.com/documentation/develop/temporary-installation-in-firefox/&gt;  (just  for  the
       existance   of   this   browser   instance).    Unsigned   xpi  files  may  only  be  loaded  temporarily
       &lt;https://wiki.mozilla.org/Add-ons/Extension_Signing&gt;   (except   for   nightly   firefox    installations
       &lt;https://www.mozilla.org/en-US/firefox/channel/desktop/#nightly&gt;).   It  returns  the  GUID for the addon
       which may be used as a parameter to the uninstall method.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();

           my $extension_id = $firefox-&gt;install('/full/path/to/gnu_terry_pratchett-0.4-an+fx.xpi');

           # OR downloading and installing source code

           system { 'git' } 'git', 'clone', 'https://github.com/kkapsner/CanvasBlocker.git';

           if ($firefox-&gt;nightly()) {

               $extension_id = $firefox-&gt;install('./CanvasBlocker'); # permanent install for unsigned packages in nightly firefox

           } else {

               $extension_id = $firefox-&gt;install('./CanvasBlocker', 1); # temp install for normal firefox

           }

   <b>interactive</b>
       returns true if "document.readyState === "interactive"" or if loaded is true

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           $firefox-&gt;find_id('search_input')-&gt;type('Type::More');
           $firefox-&gt;find('//button[@name="lucky"]')-&gt;click();
           while(!$firefox-&gt;interactive()) {
               # redirecting to Test::More page
           }

   <b>is_displayed</b>
       accepts an element as the first parameter.  This method returns true or false depending on if the element
       is                                   displayed                                   &lt;https://firefox-source-
       docs.mozilla.org/testing/marionette/internals/interaction.html#interaction.isElementDisplayed&gt;.

   <b>is_enabled</b>
       accepts an element as the first parameter.  This method returns true or false depending on if the element
       is enabled &lt;https://w3c.github.io/webdriver/#is-element-enabled&gt;.

   <b>is_selected</b>
       accepts an element as the first parameter.  This method returns true or false depending on if the element
       is selected &lt;https://w3c.github.io/webdriver/#dfn-is-element-selected&gt;.  Note that this method only makes
       sense  for  checkbox  &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/checkbox&gt; or radio
       &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/radio&gt;      inputs       or       option
       &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/option&gt;      elements      in     a     select
       &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/select&gt; dropdown.

   <b>json</b>
       returns a JSON object that has been parsed from the page source of  the  content  document.   This  is  a
       convenience method that wraps the strip method.

           use Firefox::Marionette();
           use v5.10;

           say Firefox::Marionette-&gt;new()-&gt;go('https://fastapi.metacpan.org/v1/download_url/Firefox::Marionette")-&gt;json()-&gt;{version};

   <b>key_down</b>
       accepts  a  parameter  describing  a  key  and  returns  an  action  for  use  in the perform method that
       corresponding with that key being depressed.

           use Firefox::Marionette();
           use Firefox::Marionette::Keys qw(:all);

           my $firefox = Firefox::Marionette-&gt;new();

           $firefox-&gt;chrome()-&gt;perform(
                                        $firefox-&gt;key_down(CONTROL()),
                                        $firefox-&gt;key_down('l'),
                                      )-&gt;release()-&gt;content();

   <b>key_up</b>
       accepts a parameter describing a  key  and  returns  an  action  for  use  in  the  perform  method  that
       corresponding with that key being released.

           use Firefox::Marionette();
           use Firefox::Marionette::Keys qw(:all);

           my $firefox = Firefox::Marionette-&gt;new();

           $firefox-&gt;chrome()-&gt;perform(
                                        $firefox-&gt;key_down(CONTROL()),
                                        $firefox-&gt;key_down('l'),
                                        $firefox-&gt;<a href="../man20/pause.20.html">pause</a>(20),
                                        $firefox-&gt;key_up('l'),
                                        $firefox-&gt;key_up(CONTROL())
                                      )-&gt;content();

   <b>loaded</b>
       returns true if "document.readyState === "complete""

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           $firefox-&gt;find_id('search_input')-&gt;type('Type::More');
           $firefox-&gt;find('//button[@name="lucky"]')-&gt;click();
           while(!$firefox-&gt;loaded()) {
               # redirecting to Test::More page
           }

   <b>logins_from_csv</b>
       accepts  a  filehandle  as a parameter and then reads the filehandle for exported logins as CSV.  This is
       known to work with the following formats;

       •   Bitwarden CSV &lt;https://bitwarden.com/help/article/condition-bitwarden-import/&gt;

       •   LastPass   CSV   &lt;https://support.logmeininc.com/lastpass/help/how-do-i-nbsp-export-stored-data-from-
           lastpass-using-a-generic-csv-file&gt;

       •   KeePass CSV &lt;https://keepass.info/help/base/importexport.html#csv&gt;

       returns a list of Firefox::Marionette::Login objects.

           use Firefox::Marionette();
           use FileHandle();

           my $handle = FileHandle-&gt;new('/path/to/last_pass.csv');
           my $firefox = Firefox::Marionette-&gt;new();
           foreach my $login (Firefox::Marionette-&gt;logins_from_csv($handle)) {
               $firefox-&gt;add_login($login);
           }

   <b>logins_from_zip</b>
       accepts  a  filehandle  as  a  parameter and then reads the filehandle for exported logins as a zip file.
       This is known to work with the following formats;

       •   1Password Unencrypted Export format &lt;https://support.1password.com/1pux-format/&gt;

       returns a list of Firefox::Marionette::Login objects.

           use Firefox::Marionette();
           use FileHandle();

           my $handle = FileHandle-&gt;new('/path/to/1Passwordv8.1pux');
           my $firefox = Firefox::Marionette-&gt;new();
           foreach my $login (Firefox::Marionette-&gt;logins_from_zip($handle)) {
               $firefox-&gt;add_login($login);
           }

   <b>links</b>
       returns a list of all of the following elements;

       •   anchor &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a&gt;

       •   area &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/area&gt;

       •   frame &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/frame&gt;

       •   iframe &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe&gt;

       •   meta &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/meta&gt;

       as Firefox::Marionette::Link objects.

       This method is subject to the implicit timeout, which, by default is 0 seconds.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           if (my $link = $firefox-&gt;links()) {
               if ($link-&gt;tag() eq 'a') {
                   warn "Found a hyperlink to " . $link-&gt;URL();
               }
           }

       If no elements are found, this method will return undef.

   <b>macos_binary_paths</b>
       returns a list of filesystem paths that this module will check for binaries that  it  can  automate  when
       running on MacOS &lt;https://en.wikipedia.org/wiki/MacOS&gt;.  Only of interest when sub-classing.

   <b>marionette_protocol</b>
       returns the version for the Marionette protocol.  Current most recent version is '3'.

   <b>maximise</b>
       maximises the firefox window. This method returns itself to aid in chaining methods.

   <b>mime_types</b>
       returns  a  list  of  MIME types that will be downloaded by firefox and made available from the downloads
       method

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new(mime_types =&gt; [ 'application/pkcs10' ])

           foreach my $mime_type ($firefox-&gt;mime_types()) {
               say $mime_type;
           }

   <b>minimise</b>
       minimises the firefox window. This method returns itself to aid in chaining methods.

   <b>mouse_down</b>
       accepts a parameter describing which mouse button the method should apply to (left, middle or right)  and
       returns an action for use in the perform method that corresponding with a mouse button being depressed.

   <b>mouse_move</b>
       accepts  a  element  parameter,  or a "( x =&gt; 0, y =&gt; 0 )" type hash manually describing exactly where to
       move the mouse to and returns an action for use in the perform method  that  corresponding  with  such  a
       mouse  movement, either to the specified co-ordinates or to the middle of the supplied element parameter.
       Other parameters that may be passed are listed below;

       •   origin - the origin of the C(&lt;x =&gt; 0, y =&gt; 0)&gt; co-ordinates.  Should be either "viewport",  "pointer"
           or an element.

       •   duration  -  Number  of  milliseconds over which to distribute the move. If not defined, the duration
           defaults to 0.

       This method returns itself to aid in chaining methods.

   <b>mouse_up</b>
       accepts a parameter describing which mouse button the method should apply to (left, middle or right)  and
       returns an action for use in the perform method that corresponding with a mouse button being released.

   <b>new</b>
       accepts an optional hash as a parameter.  Allowed keys are below;

       •   addons  -  should  any  firefox extensions and themes be available in this session.  This defaults to
           "0".

       •   binary - use the specified path to the Firefox &lt;https://firefox.org/&gt; binary, rather than the default
           path.

       •   capabilities - use the supplied capabilities object, for example to set whether  the  browser  should
           accept insecure certs or whether the browser should use a proxy.

       •   chatty   -  Firefox  is  extremely  chatty  on  the  network,  including  checking  for  the  lastest
           malware/phishing sites, updates to firefox/etc.  This option  is  therefore  off  ("0")  by  default,
           however,  it  can  be  switched  on ("1") if required.  Even with chatty switched off, connections to
           firefox.settings.services.mozilla.com            will            still            be             made
           &lt;https://bugzilla.mozilla.org/show_bug.cgi?id=1598562#c13&gt;.  The only way to prevent this seems to be
           to      set      firefox.settings.services.mozilla.com      to      127.0.0.1      via     <a href="file:/etc/hosts">/etc/hosts</a>
           &lt;https://en.wikipedia.org/wiki//etc/hosts&gt;.    NOTE:   that   this    option    only    works    when
           profile_name/profile is not specified.

       •   console  - show the browser console &lt;https://developer.mozilla.org/en-US/docs/Tools/Browser_Console/&gt;
           when the browser is launched.  This defaults to "0" (off).

       •   debug - should firefox's debug to be available via STDERR. This defaults to "0". Any ssh  connections
           will  also  be  printed  to  STDERR.  This defaults to "0" (off).  This setting may be updated by the
           debug method.

       •   developer - only allow a developer edition &lt;https://www.mozilla.org/en-US/firefox/developer/&gt;  to  be
           launched. This defaults to "0" (off).

       •   devtools  -  begin  the  session  with  the devtools &lt;https://developer.mozilla.org/en-US/docs/Tools&gt;
           window opened in a separate window.

       •   height                    -                    set                     the                     height
           &lt;<a href="http://kb.mozillazine.org/Command_line_arguments">http://kb.mozillazine.org/Command_line_arguments</a>#List_of_command_line_arguments_.28incomplete.29&gt; of
           the initial firefox window

       •   har  -  begin  the  session with the devtools &lt;https://developer.mozilla.org/en-US/docs/Tools&gt; window
           opened  in   a   separate   window.    The   HAR   Export   Trigger   &lt;https://addons.mozilla.org/en-
           US/firefox/addon/har-export-trigger/&gt;  addon will be loaded into the new session automatically, which
           means that -safe-mode will not be activated for this session AND  this  functionality  will  only  be
           available for Firefox 61+.

       •   host  - use ssh &lt;https://man.openbsd.org/ssh.1&gt; to create and automate firefox on the specified host.
           See REMOTE AUTOMATION OF FIREFOX VIA SSH.

       •   implicit - a shortcut to allow directly providing the implicit timeout, instead  of  needing  to  use
           timeouts from the capabilities parameter.  Overrides all longer ways.

       •   kiosk  -  start  the browser in kiosk &lt;https://support.mozilla.org/en-US/kb/firefox-enterprise-kiosk-
           mode&gt; mode.

       •   mime_types - any MIME types that Firefox will encounter during this session.  MIME types that are not
           specified will result in a hung browser (the File Download popup will appear).

       •   nightly     -      only      allow      a      nightly      release      &lt;https://www.mozilla.org/en-
           US/firefox/channel/desktop/#nightly&gt; to be launched.  This defaults to "0" (off).

       •   port  -  if  the  "host" parameter is also set, use ssh &lt;https://man.openbsd.org/ssh.1&gt; to create and
           automate firefox via the specified port.  See REMOTE AUTOMATION OF FIREFOX VIA SSH.

       •   page_load - a shortcut to allow directly providing the page_load timeout, instead of needing  to  use
           timeouts from the capabilities parameter.  Overrides all longer ways.

       •   profile - create a new profile based on the supplied profile.  NOTE: firefox ignores any changes made
           to the profile on the disk while it is running.

       •   profile_name  -  pick  a  specific  existing profile to automate, rather than creating a new profile.
           Firefox &lt;https://firefox.com&gt; refuses to allow more than one instance of a profile to run at the same
           time.  Profile names can be  obtained  by  using  the  <b>Firefox::Marionette::Profile::names()</b>  method.
           NOTE: firefox ignores any changes made to the profile on the disk while it is running.

       •   reconnect  -  an experimental parameter to allow a reconnection to firefox that a connection has been
           discontinued.  See the survive parameter.

       •   script - a shortcut to allow directly providing  the  script  timeout,  instead  of  needing  to  use
           timeouts from the capabilities parameter.  Overrides all longer ways.

       •   seer  - this option is switched off "0" by default.  When it is switched on "1", it will activate the
           various speculative and pre-fetch options for firefox.   NOTE:  that  this  option  only  works  when
           profile_name/profile is not specified.

       •   sleep_time_in_ms  -  the  amount  of  time  (in  milliseconds)  that  this  module  should sleep when
           unsuccessfully calling the subroutine provided to the await or bye methods.   This  defaults  to  "1"
           millisecond.

       •   survive  -  if  this is set to a true value, firefox will not automatically exit when the object goes
           out of scope.  See the reconnect parameter for an experimental technique for reconnecting.

       •   trust - give a path to a root certificate &lt;https://en.wikipedia.org/wiki/Root_certificate&gt; encoded as
           a PEM encoded X.509 certificate &lt;https://datatracker.ietf.org/doc/html/rfc7468#section-5&gt;  that  will
           be trusted for this session.

       •   timeouts  -  a  shortcut  to  allow  directly  providing  a timeout object, instead of needing to use
           timeouts from  the  capabilities  parameter.   Overrides  the  timeouts  provided  (if  any)  in  the
           capabilities parameter.

       •   user  -  if  the  "host" parameter is also set, use ssh &lt;https://man.openbsd.org/ssh.1&gt; to create and
           automate firefox with the specified user.  See REMOTE AUTOMATION OF FIREFOX VIA SSH.  The  user  will
           default to the current user name.

       •   visible - should firefox be visible on the desktop.  This defaults to "0".

       •   waterfox  -  only allow a binary that looks like a waterfox version &lt;https://www.waterfox.net/&gt; to be
           launched.

       •   width                     -                     set                     the                     width
           &lt;<a href="http://kb.mozillazine.org/Command_line_arguments">http://kb.mozillazine.org/Command_line_arguments</a>#List_of_command_line_arguments_.28incomplete.29&gt; of
           the initial firefox window

       This   method   returns  a  new  "Firefox::Marionette"  object,  connected  to  an  instance  of  firefox
       &lt;https://firefox.com&gt;.  In a non MacOS/Win32/Cygwin environment, if necessary (no DISPLAY variable can be
       found and the visible parameter to the new method has been  set  to  true)  and  possible  (Xvfb  can  be
       executed     successfully),     this     method     will     also    automatically    start    an    Xvfb
       &lt;https://en.wikipedia.org/wiki/Xvfb&gt; instance.

           use Firefox::Marionette();

           my $remote_darwin_firefox = Firefox::Marionette-&gt;new(
                            debug =&gt; 1,
                            host =&gt; '10.1.2.3',
                            trust =&gt; '/path/to/root_ca.pem',
                            binary =&gt; '/Applications/Firefox.app/Contents/MacOS/firefox'
                                                               ); # start a temporary profile for a remote firefox and load a new CA into the temp profile
           ...

           foreach my $profile_name (Firefox::Marionette::Profile-&gt;names()) {
               my $firefox_with_existing_profile = Firefox::Marionette-&gt;new( profile_name =&gt; $profile_name, visible =&gt; 1 );
               ...
           }

   <b>new_window</b>
       accepts an optional hash as the parameter.  Allowed keys are below;

       •   focus - a boolean field representing if the new window be  opened  in  the  foreground  (focused)  or
           background (not focused). Defaults to false.

       •   private  -  a  boolean  field  representing if the new window should be a private window. Defaults to
           false.

       •   type - the type of the new window. Can be one of 'tab' or 'window'. Defaults to 'tab'.

       Returns the window handle for the new window.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();

           my $window_handle = $firefox-&gt;new_window(type =&gt; 'tab');

           $firefox-&gt;switch_to_window($window_handle);

   <b>new_session</b>
       creates a new WebDriver session.  It is expected that the caller performs the  necessary  checks  on  the
       requested  capabilities to be WebDriver conforming.  The WebDriver service offered by Marionette does not
       match or negotiate capabilities beyond type and bounds checks.

   <b>nightly</b>
       returns true if the  current  version  of  firefox  is  a  nightly  release  &lt;https://www.mozilla.org/en-
       US/firefox/channel/desktop/#nightly&gt; (does the minor version number end with an 'a1'?)

   <b>paper_sizes</b>
       returns a list of all the recognised names for paper sizes, such as A4 or LEGAL.

   <b>pause</b>
       accepts  a  parameter in milliseconds and returns a corresponding action for the perform method that will
       cause a pause in the chain of actions given to the perform method.

   <b>pdf</b>
       accepts a optional hash as the first parameter with the following allowed keys;

       •   landscape - Paper orientation.  Boolean value.  Defaults to false

       •   margin - A hash describing the margins.  The hash  may  have  the  following  optional  keys,  'top',
           'left', 'right' and 'bottom'.  All these keys are in cm and default to 1 (~0.4 inches)

       •   page - A hash describing the page.  The hash may have the following keys; 'height' and 'width'.  Both
           keys are in cm and default to US letter size.  See the 'size' key.

       •   page_ranges    -    A    list    of    the    pages    to    print.    Available   for   Firefox   96
           &lt;https://developer.mozilla.org/en-
           US/docs/Mozilla/Firefox/Releases/96#webdriver_conformance_marionette&gt; and after.

       •   print_background - Print background graphics.  Boolean value.  Defaults to false.

       •   raw - rather than a file handle containing the PDF, the binary PDF will be returned.

       •   scale - Scale of the webpage rendering.  Defaults to 1.

       •   size - The desired size (width and height) of the pdf, specified by name.  See the page  key  for  an
           alternative and the paper_sizes method for a list of accepted page size names.

       •   shrink_to_fit  - Whether or not to override page size as defined by CSS.  Boolean value.  Defaults to
           true.

       returns a File::Temp object containing a PDF encoded version of the current page for printing.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           my $handle = $firefox-&gt;pdf();
           foreach my $paper_size ($firefox-&gt;paper_sizes()) {
                   $handle = $firefox-&gt;pdf(size =&gt; $paper_size, landscape =&gt; 1, margin =&gt; { top =&gt; 0.5, left =&gt; 1.5 });
                   ...
                   print $firefox-&gt;pdf(page =&gt; { width =&gt; 21, height =&gt; 27 }, raw =&gt; 1);
                   ...
           }

   <b>perform</b>
       accepts a list of actions (see mouse_up, mouse_down, mouse_move, pause, key_down and key_up) and performs
       these actions in sequence.  This allows fine control over interactions, including sending right clicks to
       the browser and sending  Control,  Alt  and  other  special  keys.   The  release  method  will  complete
       outstanding actions (such as mouse_up or key_up actions).

           use Firefox::Marionette();
           use Firefox::Marionette::Keys qw(:all);
           use Firefox::Marionette::Buttons qw(:all);

           my $firefox = Firefox::Marionette-&gt;new();

           $firefox-&gt;chrome()-&gt;perform(
                                        $firefox-&gt;key_down(CONTROL()),
                                        $firefox-&gt;key_down('l'),
                                        $firefox-&gt;key_up('l'),
                                        $firefox-&gt;key_up(CONTROL())
                                      )-&gt;content();

           $firefox-&gt;go('https://metacpan.org');
           my $help_button = $firefox-&gt;find_class('btn search-btn help-btn');
           $firefox-&gt;perform(
                                         $firefox-&gt;mouse_move($help_button),
                                         $firefox-&gt;mouse_down(RIGHT_BUTTON()),
                                         $firefox-&gt;<a href="../man4/pause.4.html">pause</a>(4),
                                         $firefox-&gt;mouse_up(RIGHT_BUTTON()),
                       );

       See the release method for an alternative for manually specifying all the mouse_up and key_up methods

   <b>profile_directory</b>
       returns  the  profile  directory  used  by  the current instance of firefox.  This is mainly intended for
       debugging firefox.  Firefox is not designed to cope with these  files  being  altered  while  firefox  is
       running.

   <b>property</b>
       accepts  an  element  as  the  first  parameter  and a scalar attribute name as the second parameter.  It
       returns the current value of the property with the supplied name.  This method will  return  the  current
       content, the attribute method will return the initial content.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');
           my $element = $firefox-&gt;find_id('search_input');
           $element-&gt;property('value') eq '' or die "Initial property is the empty string";
           $element-&gt;type('Test::More');
           $element-&gt;property('value') eq 'Test::More' or die "This property should have changed!";

           # OR getting the innerHTML property

           my $title = $firefox-&gt;find_tag('title')-&gt;property('innerHTML'); # same as $firefox-&gt;title();

   <b>pwd_mgr_lock</b>
       Accepts a new primary password &lt;https://support.mozilla.org/en-US/kb/use-primary-password-protect-stored-
       logins&gt;  and  locks the Password Manager &lt;https://support.mozilla.org/en-US/kb/password-manager-remember-
       delete-edit-logins&gt; with it.

           use Firefox::Marionette();
           use IO::Prompt();

           my $firefox = Firefox::Marionette-&gt;new();
           my $password = IO::Prompt::prompt(-echo =&gt; q[*], "Please enter the password for the Firefox Password Manager:");
           $firefox-&gt;pwd_mgr_lock($password);
           $firefox-&gt;pwd_mgr_logout();
           # now no-one can access the Password Manager Database without the value in $password

       This method returns itself to aid in chaining methods.

   <b>pwd_mgr_login</b>
       Accepts the primary  password  &lt;https://support.mozilla.org/en-US/kb/use-primary-password-protect-stored-
       logins&gt;   and   allows   the   user  to  access  the  Password  Manager  &lt;https://support.mozilla.org/en-
       US/kb/password-manager-remember-delete-edit-logins&gt;.

           use Firefox::Marionette();
           use IO::Prompt();

           my $firefox = Firefox::Marionette-&gt;new( profile_name =&gt; 'default' );
           my $password = IO::Prompt::prompt(-echo =&gt; q[*], "Please enter the password for the Firefox Password Manager:");
           $firefox-&gt;pwd_mgr_login($password);
           ...
           # access the Password Database.
           ...
           $firefox-&gt;pwd_mgr_logout();
           ...
           # no longer able to access the Password Database.

       This method returns itself to aid in chaining methods.

   <b>pwd_mgr_logout</b>
       Logs the user  out  of  being  able  to  access  the  Password  Manager  &lt;https://support.mozilla.org/en-
       US/kb/password-manager-remember-delete-edit-logins&gt;.

           use Firefox::Marionette();
           use IO::Prompt();

           my $firefox = Firefox::Marionette-&gt;new( profile_name =&gt; 'default' );
           my $password = IO::Prompt::prompt(-echo =&gt; q[*], "Please enter the password for the Firefox Password Manager:");
           $firefox-&gt;pwd_mgr_login($password);
           ...
           # access the Password Database.
           ...
           $firefox-&gt;pwd_mgr_logout();
           ...
           # no longer able to access the Password Database.

       This method returns itself to aid in chaining methods.

   <b>pwd_mgr_needs_login</b>
       returns  true  or  false  if the Password Manager &lt;https://support.mozilla.org/en-US/kb/password-manager-
       remember-delete-edit-logins&gt;     has     been     locked     and     needs     a     primary     password
       &lt;https://support.mozilla.org/en-US/kb/use-primary-password-protect-stored-logins&gt; to access it.

           use Firefox::Marionette();
           use IO::Prompt();

           my $firefox = Firefox::Marionette-&gt;new( profile_name =&gt; 'default' );
           if ($firefox-&gt;pwd_mgr_needs_login()) {
             my $password = IO::Prompt::prompt(-echo =&gt; q[*], "Please enter the password for the Firefox Password Manager:");
             $firefox-&gt;pwd_mgr_login($password);
           }

   <b>quit</b>
       Marionette  will stop accepting new connections before ending the current session, and finally attempting
       to quit the application.  This method returns the $? (CHILD_ERROR) value for the Firefox process

   <b>rect</b>
       accepts a element as the first parameter and returns the current position and size of the element

   <b>refresh</b>
       refreshes the current page.  The browser will wait for the page to completely refresh  or  the  session's
       page_load  duration  to  elapse  before  returning,  which, by default is 5 minutes.  This method returns
       itself to aid in chaining methods.

   <b>release</b>
       completes any outstanding actions issued by the perform method.

           use Firefox::Marionette();
           use Firefox::Marionette::Keys qw(:all);
           use Firefox::Marionette::Buttons qw(:all);

           my $firefox = Firefox::Marionette-&gt;new();

           $firefox-&gt;chrome()-&gt;perform(
                                        $firefox-&gt;key_down(CONTROL()),
                                        $firefox-&gt;key_down('l'),
                                      )-&gt;release()-&gt;content();

           $firefox-&gt;go('https://metacpan.org');
           my $help_button = $firefox-&gt;find_class('btn search-btn help-btn');
           $firefox-&gt;perform(
                                         $firefox-&gt;mouse_move($help_button),
                                         $firefox-&gt;mouse_down(RIGHT_BUTTON()),
                                         $firefox-&gt;<a href="../man4/pause.4.html">pause</a>(4),
                       )-&gt;release();

   <b>restart</b>
       restarts the browser.  After the restart, capabilities should be restored.   The  same  profile  settings
       should  be  applied,  but  the  current state of the browser (such as the uri will be reset (like after a
       normal browser restart).  This method is primarily intended for use by the update method.   Not  sure  if
       this is useful by itself.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();

           $firefox-&gt;restart(); # but why?

       This method returns itself to aid in chaining methods.

   <b>root_directory</b>
       this  is  the  root  directory  for the current instance of firefox.  The directory may exist on a remote
       server.  For debugging purposes only.

   <b>screen_orientation</b>
       returns the current browser orientation.  This will be  one  of  the  valid  primary  orientation  values
       'portrait-primary',  'landscape-primary', 'portrait-secondary', or 'landscape-secondary'.  This method is
       only currently available on Android (Fennec).

   <b>script</b>
       accepts a scalar containing a javascript function body that is executed in the browser, and  an  optional
       hash as a second parameter.  Allowed keys are below;

       •   args - The reference to a list is the arguments passed to the function body.

       •   filename - Filename of the client's program where this script is evaluated.

       •   line - Line in the client's program where this script is evaluated.

       •   new - Forces the script to be evaluated in a fresh sandbox.  Note that if it is undefined, the script
           will normally be evaluted in a fresh sandbox.

       •   sandbox  -  Name of the sandbox to evaluate the script in.  The sandbox is cached for later re-use on
           the same window &lt;https://developer.mozilla.org/en-US/docs/Web/API/Window&gt; object if "new"  is  false.
           If  he  parameter  is  undefined,  the script is evaluated in a mutable sandbox.  If the parameter is
           "system", it will be evaluted in a sandbox with elevated  system  privileges,  equivalent  to  chrome
           space.

       •   timeout - A timeout to override the default script timeout, which, by default is 30 seconds.

       Returns  the  result  of the javascript function.  When a parameter is an element (such as being returned
       from a find type operation), the script method  will  automatically  translate  that  into  a  javascript
       object.    Likewise,   when   the   result   being   returned   in   a   script   method  is  an  element
       &lt;https://dom.spec.whatwg.org/#concept-element&gt; it will be automatically translated into a perl object.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('https://metacpan.org/');

           if (my $element = $firefox-&gt;script('return document.getElementsByName("lucky")[0];')) {
               say "Lucky find is a " . $element-&gt;tag_name() . " element";
           }

           my $search_input = $firefox-&gt;find_id('metacpan_search-input');

           $firefox-&gt;script('arguments[0].style.backgroundColor = "red"', args =&gt; [ $search_input ]); # turn the search input box red

       The executing javascript is subject to the script timeout, which, by default is 30 seconds.

   <b>selfie</b>
       returns a File::Temp object containing a lossless PNG image screenshot.  If an element  is  passed  as  a
       parameter, the screenshot will be restricted to the element.

       If  an  element  is  not  passed  as a parameter and the current context is 'chrome', a screenshot of the
       current viewport will be returned.

       If an element is not passed as a parameter and the current context is  'content',  a  screenshot  of  the
       current frame will be returned.

       The  parameters  after  the  element parameter are taken to be a optional hash with the following allowed
       keys;

       •   hash - return a SHA256 hex encoded digest of the PNG image rather than the image itself

       •   full - take a screenshot of the whole document unless the first element parameter has been supplied.

       •   raw - rather than a file handle containing the screenshot, the binary PNG image will be returned.

       •   scroll - scroll to the element supplied

       •   highlights - a reference to a list containing elements to draw a highlight around.  Not available  in
           Firefox                             70                             &lt;https://developer.mozilla.org/en-
           US/docs/Mozilla/Firefox/Releases/70#WebDriver_conformance_Marionette&gt; onwards.

   <b>send_alert_text</b>
       sends keys to the input field of a currently displayed modal message box

   <b>shadow_root</b>
       accepts an  element  as  a  parameter  and  returns  it's  ShadowRoot  &lt;https://developer.mozilla.org/en-
       US/docs/Web/API/ShadowRoot&gt; as a shadow root object or throws an exception.

           use Firefox::Marionette();
           use Cwd();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('file://' . Cwd::cwd() . '/t/data/elements.html');

           $firefox-&gt;find_class('add')-&gt;click();
           my $custom_square = $firefox-&gt;find_tag('custom-square');
           my $shadow_root = $firefox-&gt;shadow_root($custom_square);

           foreach my $element (@{$firefox-&gt;script('return arguments[0].children', args =&gt; [ $shadow_root ])}) {
               warn $element-&gt;tag_name();
           }

   <b>shadowy</b>
       accepts   an   element   as   a   parameter   and   returns   true   if  the  element  has  a  ShadowRoot
       &lt;https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot&gt; or false otherwise.

           use Firefox::Marionette();
           use Cwd();

           my $firefox = Firefox::Marionette-&gt;new()-&gt;go('file://' . Cwd::cwd() . '/t/data/elements.html');
           $firefox-&gt;find_class('add')-&gt;click();
           my $custom_square = $firefox-&gt;find_tag('custom-square');
           if ($firefox-&gt;shadowy($custom_square)) {
               my $shadow_root = $firefox-&gt;find_tag('custom-square')-&gt;shadow_root();
               warn $firefox-&gt;script('return arguments[0].innerHTML', args =&gt; [ $shadow_root ]);
               ...
           }

       This function will probably be used to see if the shadow_root  method  can  be  called  on  this  element
       without raising an exception.

   <b>sleep_time_in_ms</b>
       accepts  a  new time to sleep in await or bye methods and returns the previous time.  The default time is
       "1" millisecond.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new(sleep_time_in_ms =&gt; 5); # setting default time to 5 milliseconds

           my $old_time_in_ms = $firefox-&gt;<a href="../man8/sleep_time_in_ms.8.html">sleep_time_in_ms</a>(8); # setting default time to 8 milliseconds, returning 5 (milliseconds)

   <b>ssh_local_directory</b>
       returns the path to the local directory for the ssh connection (if any). For debugging purposes only.

   <b>strip</b>
       returns the page source of the content document after an attempt has been made to remove typical  firefox
       html wrappers of non html content types such as text/plain and application/json.  See the json method for
       an  alternative  when  dealing  with  response  content  types  such  as application/json and html for an
       alterative when dealing with html content types.  This is  a  convenience  method  that  wraps  the  html
       method.

           use Firefox::Marionette();
           use JSON();
           use v5.10;

           say JSON::decode_json(Firefox::Marionette-&gt;new()-&gt;go("https://fastapi.metacpan.org/v1/download_url/Firefox::Marionette")-&gt;strip())-&gt;{version};

       Note  that  this method will assume the bytes it receives from the html method are UTF-8 encoded and will
       translate accordingly, throwing an exception in the process if the bytes are not UTF-8 encoded.

   <b>switch_to_frame</b>
       accepts a frame as a parameter and switches to it within the current window.

   <b>switch_to_parent_frame</b>
       set the current browsing context for future commands to the parent of the current browsing context

   <b>switch_to_window</b>
       accepts a window handle (either the result of window_handles or a window name as a parameter and switches
       focus to this window.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();
           $firefox-&gt;version
           my $original_window_uuid = $firefox-&gt;window_handle();
           $firefox-&gt;new_window( type =&gt; 'tab' );
           $firefox-&gt;new_window( type =&gt; 'window' );
           $firefox-&gt;switch_to_window($original_window_uuid);
           $firefox-&gt;go('https://metacpan.org');

   <b>tag_name</b>
       accepts a Firefox::Marionette::Element object as the first parameter and returns the relevant  tag  name.
       For     example     'a     &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/a&gt;'    or    'input
       &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input&gt;'.

   <b>text</b>
       accepts a element as the first parameter and returns the text that is contained by that element (if any)

   <b>timeouts</b>
       returns the current timeouts for page loading, searching, and scripts.

   <b>title</b>
       returns  the  current  title  &lt;https://developer.mozilla.org/en-US/docs/Web/HTML/Element/title&gt;  of   the
       window.

   <b>type</b>
       accepts  an  element as the first parameter and a string as the second parameter.  It sends the string to
       the specified element in the current page, such as filling out a text box. This method returns itself  to
       aid in chaining methods.

   <b>update</b>
       queries  the  Update  Services  and  applies any available updates.  Restarts the browser if necessary to
       complete the update.  This function is experimental and currently has not  been  successfully  tested  on
       Win32 or MacOS.

           use Firefox::Marionette();
           use v5.10;

           my $firefox = Firefox::Marionette-&gt;new();

           my $update = $firefox-&gt;update();

           while($update-&gt;successful()) {
               $update = $firefox-&gt;update();
           }

           say "Updated to " . $update-&gt;display_version() . " - Build ID " . $update-&gt;build_id();

           $firefox-&gt;quit();

       returns a status object that contains useful information about any updates that occurred.

   <b>uninstall</b>
       accepts  the  GUID  for the addon to uninstall.  The GUID is returned when from the install method.  This
       method returns itself to aid in chaining methods.

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new();

           my $extension_id = $firefox-&gt;install('/full/path/to/gnu_terry_pratchett-0.4-an+fx.xpi');

           # do something

           $firefox-&gt;uninstall($extension_id); # not recommended to uninstall this extension IRL.

   <b>uri</b>
       returns the current URI of current top level browsing context for  Desktop.   It  is  equivalent  to  the
       javascript "document.location.href"

   <b>win32_organisation</b>
       accepts a parameter of a Win32 product name and returns the matching organisation.  Only of interest when
       sub-classing.

   <b>win32_product_names</b>
       returns  a  hash  of  known  Windows product names (such as 'Mozilla Firefox') with priority orders.  The
       lower the priority will determine the order that this  module  will  check  for  the  existance  of  this
       product.  Only of interest when sub-classing.

   <b>window_handle</b>
       returns the current window's handle. On desktop this typically corresponds to the currently selected tab.
       returns  an  opaque  server-assigned  identifier  to  this window that uniquely identifies it within this
       Marionette instance.  This can be used to switch to this window at a later point.

           use Firefox::Marionette();
           use 5.010;

           my $firefox = Firefox::Marionette-&gt;new();
           my $original_window_uuid = $firefox-&gt;window_handle();

   <b>window_handles</b>
       returns a list of top-level browsing contexts. On desktop this typically corresponds to the set  of  open
       tabs  for  browser  windows,  or the window itself for non-browser chrome windows.  Each window handle is
       assigned by the server and is guaranteed unique, however the return  array  does  not  have  a  specified
       ordering.

           use Firefox::Marionette();
           use 5.010;

           my $firefox = Firefox::Marionette-&gt;new();
           my $original_window_uuid = $firefox-&gt;window_handle();
           $firefox-&gt;new_window( type =&gt; 'tab' );
           $firefox-&gt;new_window( type =&gt; 'window' );
           say "There are " . $firefox-&gt;window_handles() . " tabs open in total";
           say "Across " . $firefox-&gt;chrome()-&gt;window_handles()-&gt;content() . " chrome windows";

   <b>window_rect</b>
       accepts  an  optional  position and size as a parameter, sets the current browser window to that position
       and size and returns the previous position, size and state of the browser window.   If  no  parameter  is
       supplied, it returns the current  position, size and state of the browser window.

   <b>window_type</b>
       returns the current window's type.  This should be 'navigator:browser'.

   <b>xvfb_pid</b>
       returns the pid of the xvfb process if it exists.

   <b>xvfb_display</b>
       returns  the  value  for  the  DISPLAY  environment  variable  if  one  has  been  generated for the xvfb
       environment.

   <b>xvfb_xauthority</b>
       returns the value for the XAUTHORITY environment  variable  if  one  has  been  generated  for  the  xvfb
       environment

</pre><h4><b>AUTOMATING</b> <b>THE</b> <b>FIREFOX</b> <b>PASSWORD</b> <b>MANAGER</b></h4><pre>
       This  module  allows  you  to  login  to  a website without ever directly handling usernames and password
       details.  The Password Manager may be preloaded with appropriate passwords and locked, like so;

           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new( profile_name =&gt; 'locked' ); # using a pre-built profile called 'locked'
           if ($firefox-&gt;pwd_mgr_needs_login()) {
               my $new_password = IO::Prompt::prompt(-echo =&gt; q[*], 'Enter the password for the locked profile:');
               $firefox-&gt;pwd_mgr_login($password);
           } else {
               my $new_password = IO::Prompt::prompt(-echo =&gt; q[*], 'Enter the new password for the locked profile:');
               $firefox-&gt;pwd_mgr_lock($password);
           }
           ...
           $firefox-&gt;pwd_mgr_logout();

       Usernames and passwords (for both HTTP Authentication popups and HTML Form based logins)  may  be  added,
       viewed and deleted.

           use WebService::HIBP();

           my $hibp = WebService::HIBP-&gt;new();

           $firefox-&gt;add_login(host =&gt; 'https://github.com', user =&gt; '<a href="mailto:me@example.org">me@example.org</a>', password =&gt; 'qwerty', user_field =&gt; 'login', password_field =&gt; 'password');
           $firefox-&gt;add_login(host =&gt; 'https://pause.perl.org', user =&gt; 'AUSER', password =&gt; 'qwerty', realm =&gt; 'PAUSE');
           ...
           foreach my $login ($firefox-&gt;logins()) {
               if ($hibp-&gt;password($login-&gt;password())) { # does NOT send the password to the HIBP webservice
                   warn "HIBP reports that your password for the " . $login-&gt;user() " account at " . $login-&gt;host() . " has been found in a data breach";
                   $firefox-&gt;delete_login($login); # how could this possibly help?
               }
           }

       And used to fill in login prompts without explicitly knowing the account details.

           $firefox-&gt;go('https://pause.perl.org/pause/authenquery')-&gt;accept_alert(); # this goes to the page and submits the http auth popup

           $firefox-&gt;go('https://github.com/login')-&gt;fill_login(); # fill the login and password fields without needing to see them

</pre><h4><b>REMOTE</b> <b>AUTOMATION</b> <b>OF</b> <b>FIREFOX</b> <b>VIA</b> <b>SSH</b></h4><pre>
           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new( host =&gt; 'remote.example.org', debug =&gt; 1 );
           $firefox-&gt;go('https://metacpan.org/');

           # OR specify a different user to login as ...

           my $firefox = Firefox::Marionette-&gt;new( host =&gt; 'remote.example.org', user =&gt; 'R2D2', debug =&gt; 1 );
           $firefox-&gt;go('https://metacpan.org/');

           # OR specify a different port to connect to

           my $firefox = Firefox::Marionette-&gt;new( host =&gt; 'remote.example.org', port =&gt; 2222, debug =&gt; 1 );
           $firefox-&gt;go('https://metacpan.org/');

       This module has support for creating and automating an instance of Firefox on a remote node.  It has been
       tested  against  a  number of operating systems, including recent version of Windows 10 or Windows Server
       2019   &lt;https://docs.microsoft.com/en-us/windows-server/administration/openssh/openssh_install_firstuse&gt;,
       OS  X, and Linux and BSD distributions.  It expects to be able to login to the remote node via public key
       authentication.       It       can       be       further       secured       via       the       command
       &lt;https://man.openbsd.org/sshd#command=_command_&gt;   option   in   the  OpenSSH  &lt;https://www.openssh.com/&gt;
       authorized_keys &lt;https://man.openbsd.org/sshd#AUTHORIZED_KEYS_FILE_FORMAT&gt; file such as;

           no-agent-forwarding,no-pty,no-X11-forwarding,permitopen="127.0.0.1:*",command="/usr/local/bin/ssh-auth-cmd-marionette" ssh-rsa AAAA ... == user@server

       As an example, the ssh-auth-cmd-marionette command is provided as part of this distribution.

       When     using     ssh,     Firefox::Marionette     will     attempt     to     pass      the      TMPDIR
       &lt;https://en.wikipedia.org/wiki/TMPDIR&gt;  environment  variable  across the ssh connection to make cleanups
       easier.  In order to allow this, the AcceptEnv &lt;https://man.openbsd.org/sshd_config#AcceptEnv&gt; setting in
       the remote sshd configuration &lt;https://man.openbsd.org/sshd_config&gt; should be set to allow TMPDIR,  which
       will look like;

           AcceptEnv TMPDIR

       This  module  uses  ControlMaster  &lt;https://man.openbsd.org/ssh_config#ControlMaster&gt;  functionality when
       using  ssh  &lt;https://man.openbsd.org/ssh&gt;,  for  a  useful  speedup   of   executing   remote   commands.
       Unfortunately,  when  using  ssh to move from a cygwin &lt;https://gcc.gnu.org/wiki/SSH_connection_caching&gt;,
       Windows     10      or      Windows      Server      2019      &lt;https://docs.microsoft.com/en-us/windows-
       server/administration/openssh/openssh_install_firstuse&gt;  node  to  a  remote  environment,  we cannot use
       ControlMaster &lt;https://man.openbsd.org/ssh_config#ControlMaster&gt;, because at this time, Windows does  not
       support  ControlMaster  &lt;https://github.com/Microsoft/vscode-remote-release/issues/96&gt; and therefore this
       type of automation is still possible, but slower than other client platforms.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       "Failed to correctly setup the Firefox process"
           The module was unable to retrieve a session id and capabilities  from  Firefox  when  it  requests  a
           new_session as part of the initial setup of the connection to Firefox.

       "Failed to correctly determined the Firefox process id through the initial connection capabilities"
           The  module  was found that firefox is reporting through it's Capabilities object a different process
           id than this module was using.  This is probably a bug in this  module's  logic.   Please  report  as
           described in the BUGS AND LIMITATIONS section below.

       "'%s --version' did not produce output that could be parsed.  Assuming modern Marionette is available:%s"
           The  Firefox  binary  did  not produce a version number that could be recognised as a Firefox version
           number.

       "Failed to create process from '%s':%s"
           The module was to start Firefox process in a Win32 environment.  Something is  seriously  wrong  with
           your environment.

       "Failed to redirect %s to %s:%s"
           The  module  was  unable  to redirect a file handle's output.  Something is seriously wrong with your
           environment.

       "Failed to exec %s:%s"
           The module was unable to run the Firefox binary.  Check the path is correct and the current user  has
           execute permissions.

       "Failed to fork:%s"
           The  module  was unable to fork itself, prior to executing a command.  Check the current "ulimit" for
           max number of user processes.

       "Failed to open directory '%s':%s"
           The module was unable to open a directory.  Something is seriously wrong with your environment.

       "Failed to close directory '%s':%s"
           The module was unable to close a directory.  Something is seriously wrong with your environment.

       "Failed to open '%s' for writing:%s"
           The module was unable to create a file in your temporary directory.  Maybe your disk is full?

       "Failed to open temporary file for writing:%s"
           The module was unable to create a file in your temporary directory.  Maybe your disk is full?

       "Failed to close '%s':%s"
           The module was unable to close a file in your temporary directory.  Maybe your disk is full?

       "Failed to close temporary file:%s"
           The module was unable to close a file in your temporary directory.  Maybe your disk is full?

       "Failed to create temporary directory:%s"
           The module was unable to create a directory in your temporary directory.  Maybe your disk is full?

       "Failed to clear the close-on-exec flag on a temporary file:%s"
           The module was unable to call fcntl using F_SETFD for a file in your temporary directory.   Something
           is seriously wrong with your environment.

       "Failed to seek to start of temporary file:%s"
           The  module  was  unable  to  seek  to the start of a file in your temporary directory.  Something is
           seriously wrong with your environment.

       "Failed to create a socket:%s"
           The module was unable to even create a socket.  Something is seriously wrong with your environment.

       "Failed to connect to %s on port %d:%s"
           The module was unable to connect to the Marionette port.  This is probably a  bug  in  this  module's
           logic.  Please report as described in the BUGS AND LIMITATIONS section below.

       "Firefox killed by a %s signal (%d)"
           Firefox crashed after being hit with a signal.

       "Firefox exited with a %d"
           Firefox has exited with an error code

       "Failed to bind socket:%s"
           The  module  was  unable  to  bind  a  socket  to  any  port.  Something is seriously wrong with your
           environment.

       "Failed to close random socket:%s"
           The module was unable to close a socket without any reads or writes being performed on it.  Something
           is seriously wrong with your environment.

       "moz:headless has not been determined correctly"
           The module was unable to correctly determine whether Firefox is running in "headless" or  not.   This
           is  probably  a  bug  in this module's logic.  Please report as described in the BUGS AND LIMITATIONS
           section below.

       "%s method requires a Firefox::Marionette::Element parameter"
           This function was called incorrectly by your  code.   Please  supply  a  Firefox::Marionette::Element
           parameter when calling this function.

       "Failed to write to temporary file:%s"
           The module was unable to write to a file in your temporary directory.  Maybe your disk is full?

       "Failed to close socket to firefox:%s"
           The module was unable to even close a socket.  Something is seriously wrong with your environment.

       "Failed to send request to firefox:%s"
           The  module  was  unable  to  perform  a  syswrite on the socket connected to firefox.  Maybe firefox
           crashed?

       "Failed to read size of response from socket to firefox:%s"
           The module was unable to read from the socket connected to firefox.  Maybe firefox crashed?

       "Failed to read response from socket to firefox:%s"
           The module was unable to read from the socket connected to firefox.  Maybe firefox crashed?

</pre><h4><b>CONFIGURATION</b> <b>AND</b> <b>ENVIRONMENT</b></h4><pre>
       Firefox::Marionette requires no configuration files or environment variables.  It will  however  use  the
       DISPLAY  and  XAUTHORITY  environment  variables  to try to connect to an X Server.  It will also use the
       HTTP_PROXY, HTTPS_PROXY, FTP_PROXY and  ALL_PROXY  environment  variables  as  defaults  if  the  session
       capabilities do not specify proxy information.

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       Firefox::Marionette requires the following non-core Perl modules

       •   JSON

       •   URI

       •   XML::Parser

</pre><h4><b>INCOMPATIBILITIES</b></h4><pre>
       None  reported.   Always  interested  in  any  products with marionette support that this module could be
       patched to work with.

</pre><h4><b>BUGS</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
   <b>DOWNLOADING</b> <b>USING</b> <b>GO</b> <b>METHOD</b>
       When using the go method to go directly to a URL containing a downloadable file, Firefox can  hang.   You
       can work around this by setting the page_load_strategy to "none" like below;

           #! <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?perl">/usr/bin/perl</a>

           use strict;
           use warnings;
           use Firefox::Marionette();

           my $firefox = Firefox::Marionette-&gt;new( capabilities =&gt; Firefox::Marionette::Capabilities-&gt;new( page_load_strategy =&gt; 'none' ) );
           $firefox-&gt;go("https://github.com/david-dick/firefox-marionette/archive/refs/heads/master.zip");
           while(!$firefox-&gt;downloads()) { sleep 1 }
           while($firefox-&gt;downloading()) { sleep 1 }
           foreach my $path ($firefox-&gt;downloads()) {
               warn "$path has been downloaded";
           }
           $firefox-&gt;quit();

   <b>MISSING</b> <b>METHODS</b>
       Currently the following Marionette methods have not been implemented;

       •   WebDriver:SetScreenOrientation

       To     report     a     bug,     or     view     the    current    list    of    bugs,    please    visit
       &lt;https://github.com/david-dick/firefox-marionette/issues&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       •   MozRepl

       •   Selenium::Firefox

       •   Firefox::Application

       •   Mozilla::Mechanize

       •   Gtk2::MozEmbed

</pre><h4><b>AUTHOR</b></h4><pre>
       David Dick  "&lt;<a href="mailto:ddick@cpan.org">ddick@cpan.org</a>&gt;"

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       Thanks to the entire Mozilla organisation for a great browser and  to  the  team  behind  Marionette  for
       providing an interface for automation.

       Thanks  to  Jan  Odvarko  &lt;<a href="http://www.softwareishard.com/blog/about/">http://www.softwareishard.com/blog/about/</a>&gt; for creating the HAR Export Trigger
       &lt;https://github.com/firefox-devtools/har-export-trigger&gt; extension for Firefox.

       Thanks      to      Mike       Kaply       &lt;https://mike.kaply.com/about/&gt;       for       his       post
       &lt;https://mike.kaply.com/2015/02/10/installing-certificates-into-firefox/&gt;       describing      importing
       certificates into Firefox.

       Thanks also to the authors of the documentation in the following sources;

       •   Marionette                             Protocol                              &lt;https://firefox-source-
           docs.mozilla.org/testing/marionette/marionette/index.html&gt;

       •   Marionette                           Documentation                           &lt;https://firefox-source-
           docs.mozilla.org/testing/marionette/marionette/index.html&gt;

       •   Marionette driver.js &lt;https://hg.mozilla.org/mozilla-central/file/tip/remote/marionette/driver.js&gt;

       •   about:config &lt;<a href="http://kb.mozillazine.org/About">http://kb.mozillazine.org/About</a>:config_entries&gt;

       •   nsIPrefService                      interface                      &lt;https://developer.mozilla.org/en-
           US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIPrefService&gt;

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2021, David Dick "&lt;<a href="mailto:ddick@cpan.org">ddick@cpan.org</a>&gt;". All rights reserved.

       This  module  is  free  software;  you  can redistribute it and/or modify it under the same terms as Perl
       itself. See "perlartistic" in perlartistic.

       The   Firefox::Marionette::Extension::HarExportTrigger   module   includes   the   HAR   Export   Trigger
       &lt;https://github.com/firefox-devtools/har-export-trigger&gt;  extension  which  is licensed under the Mozilla
       Public License 2.0 &lt;https://www.mozilla.org/en-US/MPL/2.0/&gt;.

</pre><h4><b>DISCLAIMER</b> <b>OF</b> <b>WARRANTY</b></h4><pre>
       BECAUSE THIS SOFTWARE IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE SOFTWARE,  TO  THE  EXTENT
       PERMITTED  BY  APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER
       PARTIES PROVIDE THE SOFTWARE "AS  IS"  WITHOUT  WARRANTY  OF  ANY  KIND,  EITHER  EXPRESSED  OR  IMPLIED,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF  THE  SOFTWARE  IS  WITH  YOU.  SHOULD  THE
       SOFTWARE PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR, OR CORRECTION.

       IN  NO  EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY
       OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE SOFTWARE AS PERMITTED BY THE ABOVE LICENCE, BE  LIABLE
       TO  YOU  FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT OF
       THE USE OR INABILITY TO USE THE SOFTWARE (INCLUDING BUT NOT  LIMITED  TO  LOSS  OF  DATA  OR  DATA  BEING
       RENDERED  INACCURATE  OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE SOFTWARE TO OPERATE
       WITH ANY OTHER SOFTWARE), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF  SUCH
       DAMAGES.

perl v5.32.1                                       2022-02-01                           <u>Firefox::<a href="../man3pm/Marionette.3pm.html">Marionette</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>