<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_bus_add_match, sd_bus_add_match_async, sd_bus_match_signal, sd_bus_match_signal_async - Add a match</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_bus_add_match, sd_bus_add_match_async, sd_bus_match_signal, sd_bus_match_signal_async - Add a match
       rule for incoming message dispatching

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-bus.h&gt;</b>

       <b>typedef</b> <b>int</b> <b>(*sd_bus_message_handler_t)(sd_bus_message</b> <b>*</b><u>m</u><b>,</b> <b>void</b> <b>*</b><u>userdata</u><b>,</b> <b>sd_bus_error</b> <b>*</b><u>ret_error</u><b>);</b>

       <b>int</b> <b>sd_bus_add_match(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_bus_slot</b> <b>**</b><u>slot</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>match</u><b>,</b>
                            <b>sd_bus_message_handler_t</b> <u>callback</u><b>,</b> <b>void</b> <b>*</b><u>userdata</u><b>);</b>

       <b>int</b> <b>sd_bus_add_match_async(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_bus_slot</b> <b>**</b><u>slot</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>match</u><b>,</b>
                                  <b>sd_bus_message_handler_t</b> <u>callback</u><b>,</b> <b>sd_bus_message_handler_t</b> <u>install_callback</u><b>,</b>
                                  <b>void</b> <b>*</b><u>userdata</u><b>);</b>

       <b>int</b> <b>sd_bus_match_signal(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_bus_slot</b> <b>**</b><u>slot</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>sender</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>path</u><b>,</b>
                               <b>const</b> <b>char</b> <b>*</b><u>interface</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>member</u><b>,</b> <b>sd_bus_message_handler_t</b> <u>callback</u><b>,</b>
                               <b>void</b> <b>*</b><u>userdata</u><b>);</b>

       <b>int</b> <b>sd_bus_match_signal_async(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_bus_slot</b> <b>**</b><u>slot</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>sender</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>path</u><b>,</b>
                                     <b>const</b> <b>char</b> <b>*</b><u>interface</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>member</u><b>,</b>
                                     <b>sd_bus_message_handler_t</b> <u>callback</u><b>,</b>
                                     <b>sd_bus_message_handler_t</b> <u>install_callback</u><b>,</b> <b>void</b> <b>*</b><u>userdata</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_bus_add_match()</b> installs a match rule for messages received on the specified bus connection object
       <u>bus</u>. The syntax of the match rule expression passed in <u>match</u> is described in the <b>D-Bus</b> <b>Specification</b>[1].
       The specified handler function <u>callback</u> is called for each incoming message matching the specified
       expression, the <u>userdata</u> parameter is passed as-is to the callback function. The match is installed
       synchronously when connected to a bus broker, i.e. the call sends a control message requested the match
       to be added to the broker and waits until the broker confirms the match has been installed successfully.

       <b>sd_bus_add_match_async()</b> operates very similarly to <b>sd_bus_add_match()</b>, however it installs the match
       asynchronously, in a non-blocking fashion: a request is sent to the broker, but the call does not wait
       for a response. The <u>install_callback</u> function is called when the response is later received, with the
       response message from the broker as parameter. If this function is specified as <b>NULL</b> a default
       implementation is used that terminates the bus connection should installing the match fail.

       <b>sd_bus_match_signal()</b> is very similar to <b>sd_bus_add_match()</b>, but only matches signals, and instead of a
       match expression accepts four parameters: <u>sender</u> (the service name of the sender), <u>path</u> (the object path
       of the emitting object), <u>interface</u> (the interface the signal belongs to), <u>member</u> (the signal name), from
       which the match string is internally generated. Optionally, these parameters may be specified as <b>NULL</b> in
       which case the relevant field of incoming signals is not tested.

       <b>sd_bus_match_signal_async()</b> combines the signal matching logic of <b>sd_bus_match_signal()</b> with the
       asynchronous behaviour of <b>sd_bus_add_match_async()</b>.

       On success, and if non-<b>NULL</b>, the <u>slot</u> return parameter will be set to a slot object that may be used as a
       reference to the installed match, and may be utilized to remove it again at a later time with
       <b><a href="../man3/sd_bus_slot_unref.3.html">sd_bus_slot_unref</a></b>(3). If specified as <b>NULL</b> the lifetime of the match is bound to the lifetime of the bus
       object itself, and the match is generally not removed independently. See <b><a href="../man3/sd_bus_slot_set_floating.3.html">sd_bus_slot_set_floating</a></b>(3) for
       details.

       The message <u>m</u> passed to the callback is only borrowed, that is, the callback should not call
       <b><a href="../man3/sd_bus_message_unref.3.html">sd_bus_message_unref</a></b>(3) on it. If the callback wants to hold on to the message beyond the lifetime of the
       callback, it needs to call <b><a href="../man3/sd_bus_message_ref.3.html">sd_bus_message_ref</a></b>(3) to create a new reference.

       If an error occurs during the callback invocation, the callback should return a negative error number
       (optionally, a more precise error may be returned in <u>ret_error</u>, as well). If it wants other callbacks
       that match the same rule to be called, it should return 0. Otherwise, it should return a positive
       integer.

       If the <u>bus</u> refers to a direct connection (i.e. not a bus connection, as set with
       <b><a href="../man3/sd_bus_set_bus_client.3.html">sd_bus_set_bus_client</a></b>(3)) the match is only installed on the client side, and the synchronous and
       asynchronous functions operate the same.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>sd_bus_add_match()</b> and the other calls return 0 or a positive integer. On failure, they
       return a negative errno-style error code.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_bus_add_match()</b> and <b>sd_bus_message_handler_t()</b> were added in version 221.

       <b>sd_bus_add_match_async()</b>, <b>sd_bus_match_signal()</b>, and <b>sd_bus_match_signal_async()</b> were added in version
       237.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-bus.3.html">sd-bus</a></b>(3), <b><a href="../man3/sd_bus_slot_unref.3.html">sd_bus_slot_unref</a></b>(3), <b><a href="../man3/sd_bus_message_ref.3.html">sd_bus_message_ref</a></b>(3), <b><a href="../man3/sd_bus_set_bus_client.3.html">sd_bus_set_bus_client</a></b>(3),
       <b><a href="../man3/sd_bus_slot_set_floating.3.html">sd_bus_slot_set_floating</a></b>(3)

</pre><h4><b>NOTES</b></h4><pre>
        1. D-Bus Specification
           https://dbus.freedesktop.org/doc/dbus-specification.html

systemd 257.7                                                                                <u><a href="../man3/SD_BUS_ADD_MATCH.3.html">SD_BUS_ADD_MATCH</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>