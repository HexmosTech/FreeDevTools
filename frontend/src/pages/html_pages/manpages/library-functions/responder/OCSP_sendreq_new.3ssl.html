<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OCSP_REQ_CTX, OCSP_sendreq_new, OCSP_sendreq_nbio, OCSP_sendreq_bio, OCSP_REQ_CTX_i2d,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       OCSP_REQ_CTX, OCSP_sendreq_new, OCSP_sendreq_nbio, OCSP_sendreq_bio, OCSP_REQ_CTX_i2d,
       OCSP_REQ_CTX_add1_header, OCSP_REQ_CTX_free, OCSP_set_max_response_length, OCSP_REQ_CTX_set1_req - OCSP
       responder query functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/ocsp.h&gt;

        OSSL_HTTP_REQ_CTX *OCSP_sendreq_new(BIO *io, const char *path,
                                            const OCSP_REQUEST *req, int buf_size);
        OCSP_RESPONSE *OCSP_sendreq_bio(BIO *io, const char *path, OCSP_REQUEST *req);

       The following functions have been deprecated since OpenSSL 3.0, and can be hidden entirely by defining
       <b>OPENSSL_API_COMPAT</b> with a suitable version value, see <b><a href="../man7/openssl_user_macros.7.html">openssl_user_macros</a></b>(7):

        typedef OSSL_HTTP_REQ_CTX OCSP_REQ_CTX;
        int OCSP_sendreq_nbio(OCSP_RESPONSE **presp, OSSL_HTTP_REQ_CTX *rctx);
        int OCSP_REQ_CTX_i2d(OCSP_REQ_CT *rctx, const ASN1_ITEM *it, ASN1_VALUE *req);
        int OCSP_REQ_CTX_add1_header(OCSP_REQ_CT *rctx,
                                     const char *name, const char *value);
        void OCSP_REQ_CTX_free(OCSP_REQ_CTX *rctx);
        void OCSP_set_max_response_length(OCSP_REQ_CT *rctx, unsigned long len);
        int OCSP_REQ_CTX_set1_req(OCSP_REQ_CTX *rctx, const OCSP_REQUEST *req);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These functions perform an OCSP POST request / response transfer over HTTP, using the HTTP request
       functions described in <b><a href="../man3/OSSL_HTTP_REQ_CTX.3.html">OSSL_HTTP_REQ_CTX</a></b>(3).

       The function <b>OCSP_sendreq_new()</b> builds a complete <b>OSSL_HTTP_REQ_CTX</b> structure with the <b>BIO</b> <u>io</u> to be used
       for requests and response, the URL path <u>path</u>, optionally the OCSP request <u>req</u>, and a response header
       maximum line length of <u>buf_size</u>. If <u>buf_size</u> is zero a default value of 4KiB is used.  The <u>req</u> may be set
       to NULL and provided later using <b>OCSP_REQ_CTX_set1_req()</b> or <b><a href="../man3/OSSL_HTTP_REQ_CTX_set1_req.3.html">OSSL_HTTP_REQ_CTX_set1_req</a></b>(3).  The <u>io</u> and
       <u>path</u> arguments to <b>OCSP_sendreq_new()</b> correspond to the components of the URL.  For example if the
       responder URL is "<a href="http://example.com/ocspreq">http://example.com/ocspreq</a>" the BIO <u>io</u> should haven been connected to host
       "example.com" on port 80 and <u>path</u> should be set to "/ocspreq".

       <b>OCSP_sendreq_nbio()</b> attempts to send the request prepared in <u>rctx</u> and to gather the response via HTTP,
       using the BIO <u>io</u> and <u>path</u> that were given when calling <b>OCSP_sendreq_new()</b>.  If the operation gets
       completed it assigns the response, a pointer to a <b>OCSP_RESPONSE</b> structure, in <u>*presp</u>.  The function may
       need to be called again if its result is -1, which indicates <b><a href="../man3/BIO_should_retry.3.html">BIO_should_retry</a></b>(3).  In such a case it is
       advisable to sleep a little in between, using <b><a href="../man3/BIO_wait.3.html">BIO_wait</a></b>(3) on the read BIO to prevent a busy loop.

       <b>OCSP_sendreq_bio()</b> combines <b>OCSP_sendreq_new()</b> with as many calls of <b>OCSP_sendreq_nbio()</b> as needed and
       then <b>OCSP_REQ_CTX_free()</b>, with a response header maximum line length 4k. It waits indefinitely on a
       response.  It does not support setting a timeout or adding headers and is retained for compatibility; use
       <b><a href="../man3/OSSL_HTTP_transfer.3.html">OSSL_HTTP_transfer</a></b>(3) instead.

       OCSP_REQ_CTX_i2d(rctx, it, req) is equivalent to the following:

         OSSL_HTTP_REQ_CTX_set1_req(rctx, "application/ocsp-request", it, req)

       OCSP_REQ_CTX_set1_req(rctx, req) is equivalent to the following:

        OSSL_HTTP_REQ_CTX_set1_req(rctx, "application/ocsp-request",
                                   ASN1_ITEM_rptr(OCSP_REQUEST),
                                   (const ASN1_VALUE *)req)

       The deprecated type and the remaining deprecated functions have been superseded by the following
       equivalents: <b>OCSP_REQ_CTX</b> by <b><a href="../man3/OSSL_HTTP_REQ_CTX.3.html">OSSL_HTTP_REQ_CTX</a></b>(3), <b>OCSP_REQ_CTX_add1_header()</b> by
       <b><a href="../man3/OSSL_HTTP_REQ_CTX_add1_header.3.html">OSSL_HTTP_REQ_CTX_add1_header</a></b>(3), <b>OCSP_REQ_CTX_free()</b> by <b><a href="../man3/OSSL_HTTP_REQ_CTX_free.3.html">OSSL_HTTP_REQ_CTX_free</a></b>(3), and
       <b>OCSP_set_max_response_length()</b> by <b><a href="../man3/OSSL_HTTP_REQ_CTX_set_max_response_length.3.html">OSSL_HTTP_REQ_CTX_set_max_response_length</a></b>(3).

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>OCSP_sendreq_new()</b> returns a valid <b>OSSL_HTTP_REQ_CTX</b> structure or NULL if an error occurred.

       <b>OCSP_sendreq_nbio()</b> returns 1 for success, 0 on error, -1 if retry is needed.

       <b>OCSP_sendreq_bio()</b> returns the <b>OCSP_RESPONSE</b> structure sent by the responder or NULL if an error
       occurred.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/OSSL_HTTP_REQ_CTX.3.html">OSSL_HTTP_REQ_CTX</a></b>(3), <b><a href="../man3/OSSL_HTTP_transfer.3.html">OSSL_HTTP_transfer</a></b>(3), <b><a href="../man3/OCSP_cert_to_id.3.html">OCSP_cert_to_id</a></b>(3), <b><a href="../man3/OCSP_request_add1_nonce.3.html">OCSP_request_add1_nonce</a></b>(3),
       <b><a href="../man3/OCSP_REQUEST_new.3.html">OCSP_REQUEST_new</a></b>(3), <b><a href="../man3/OCSP_resp_find_status.3.html">OCSP_resp_find_status</a></b>(3), <b><a href="../man3/OCSP_response_status.3.html">OCSP_response_status</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       <b>OCSP_REQ_CTX</b>, <b>OCSP_REQ_CTX_i2d()</b>, <b>OCSP_REQ_CTX_add1_header()</b>, <b>OCSP_REQ_CTX_free()</b>,
       <b>OCSP_set_max_response_length()</b>, and <b>OCSP_REQ_CTX_set1_req()</b> were deprecated in OpenSSL 3.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2015-2022 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain a copy in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                             <u><a href="../man3SSL/OCSP_SENDREQ_NEW.3SSL.html">OCSP_SENDREQ_NEW</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>