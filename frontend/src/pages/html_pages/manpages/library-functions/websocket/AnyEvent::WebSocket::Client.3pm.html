<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnyEvent::WebSocket::Client - WebSocket client for AnyEvent</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libanyevent-websocket-client-perl">libanyevent-websocket-client-perl_0.55-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       AnyEvent::WebSocket::Client - WebSocket client for AnyEvent

</pre><h4><b>VERSION</b></h4><pre>
       version 0.55

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use AnyEvent::WebSocket::Client 0.12;

        my $client = AnyEvent::WebSocket::Client-&gt;new;

        $client-&gt;connect("ws://localhost:1234/service")-&gt;cb(sub {

          # make $connection an our variable rather than
          # my so that it will stick around.  Once the
          # connection falls out of scope any callbacks
          # tied to it will be destroyed.
          our $connection = eval { shift-&gt;recv };
          if($@) {
            # handle error...
            warn $@;
            return;
          }

          # send a message through the websocket...
          $connection-&gt;send('a message');

          # receive message from the websocket...
          $connection-&gt;on(each_message =&gt; sub {
            # $connection is the same connection object
            # $message isa AnyEvent::WebSocket::Message
            my($connection, $message) = @_;
            ...
          });

          # handle a closed connection...
          $connection-&gt;on(finish =&gt; sub {
            # $connection is the same connection object
            my($connection) = @_;
            ...
          });

          # close the connection (either inside or
          # outside another callback)
          $connection-&gt;close;

        });

        ## uncomment to enter the event loop before exiting.
        ## Note that calling recv on a condition variable before
        ## it has been triggered does not work on all event loops
        #AnyEvent-&gt;condvar-&gt;recv;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class provides an interface to interact with a web server that provides services via the WebSocket
       protocol in an AnyEvent context.  It uses Protocol::WebSocket rather than reinventing the wheel.  You
       could use AnyEvent and Protocol::WebSocket directly if you wanted finer grain control, but if that is not
       necessary then this class may save you some time.

       The recommended API was added to the AnyEvent::WebSocket::Connection class with version 0.12, so it is
       recommended that you include that version when using this module.  The older version of the API has since
       been deprecated and removed.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>timeout</b>
       Timeout for the initial connection to the web server.  The default is 30.

   <b>ssl_no_verify</b>
       If set to true, then secure WebSockets (those that use SSL/TLS) will not be verified.  The default is
       false.

   <b>ssl_ca_file</b>
       Provide your own CA certificates file instead of using the system default for SSL/TLS verification.

   <b>protocol_version</b>
       The protocol version.  See Protocol::WebSocket for the list of supported WebSocket protocol versions.

   <b>subprotocol</b>
       List of subprotocols to request from the server.  This class will throw an exception if none of the
       protocols are supported by the server.

   <b>http_headers</b>
       Extra headers to include in the initial request.  May be either specified as a hash reference, or an
       array reference.  For example:

        AnyEvent::WebSocket::Client-&gt;new(
          http_headers =&gt; {
            'X-Foo' =&gt; 'bar',
            'X-Baz' =&gt; [ 'abc', 'def' ],
          },
        );

        AnyEvent::WebSocket::Client-&gt;new(
          http_headers =&gt; [
            'X-Foo' =&gt; 'bar',
            'X-Baz' =&gt; 'abc',
            'X-Baz' =&gt; 'def',
          ],
        );

       Will generate:

        X-Foo: bar
        X-Baz: abc
        X-Baz: def

       Although, the order cannot be guaranteed when using the hash style.

   <b>max_payload_size</b>
       The maximum payload size for received frames.  Currently defaults to whatever Protocol::WebSocket
       defaults to.

   <b>max_fragments</b>
       The maximum number of fragments for received frames.  Currently defaults to whatever Protocol::WebSocket
       defaults to.

   <b>env_proxy</b>
       If you set true to this boolean attribute, it loads proxy settings from environment variables. If it
       finds valid proxy settings, "connect" method will use that proxy.

       Default: false.

       For "ws" WebSocket end-points, first it reads "ws_proxy" (or "WS_PROXY") environment variable. If it is
       not set or empty string, then it reads "http_proxy" (or "HTTP_PROXY"). For "wss" WebSocket end-points, it
       reads "wss_proxy" ("WSS_PROXY") and "https_proxy" ("HTTPS_PROXY") environment variables.

</pre><h4><b>METHODS</b></h4><pre>
   <b>connect</b>
        my $cv = $client-&gt;connect($uri)
        my $cv = $client-&gt;connect($uri, $host, $port);

       Open a connection to the web server and open a WebSocket to the resource defined by the given URL.  The
       URL may be either an instance of URI::ws, URI::wss, or a string that represents a legal WebSocket URL.

       You can  override the connection host and port by passing them in as the second and third argument.
       These values (if provided) are passed directly into AnyEvent::Socket's "tcp_connect" function, so please
       note that function's idiosyncrasies in the AnyEvent::Socket documentation.  In particular,  you can pass
       in "unix/" as the host and a filesystem path as the "port" to connect to a unix domain socket.

       This method will return an AnyEvent condition variable which you can attach a callback to.  The value
       sent through the condition variable will be either an instance of AnyEvent::WebSocket::Connection or a
       croak message indicating a failure.  The synopsis above shows how to catch such errors using "eval".

</pre><h4><b>FAQ</b></h4><pre>
   <b>My</b> <b>program</b> <b>exits</b> <b>before</b> <b>doing</b> <b>anything,</b> <b>what</b> <b>is</b> <b>up</b> <b>with</b> <b>that?</b>
       See this FAQ from AnyEvent: AnyEvent::FAQ#My-program-exits-before-doing-anything-whats-going-on.

       It is probably also a good idea to review the AnyEvent documentation if you are new to AnyEvent or event-
       based programming.

   <b>My</b> <b>callbacks</b> <b>aren't</b> <b>being</b> <b>called!</b>
       Make sure that the connection object is still in scope.  This often happens if you use a "my $connection"
       variable and don't save it somewhere.  For example:

        $client-&gt;connect("ws://foo/service")-&gt;cb(sub {

          my $connection = eval { shift-&gt;recv };

          if($@)
          {
            warn $@;
            return;
          }

          ...
        });

       Unless $connection is saved somewhere it will get deallocated along with any associated message callbacks
       will also get deallocated once the connect callback is executed.  One way to make sure that the
       connection doesn't get deallocated is to make it a "our" variable (as in the synopsis above) instead.

</pre><h4><b>CAVEATS</b></h4><pre>
       This is pretty simple minded and there are probably WebSocket features that you might like to use that
       aren't supported by this distribution.  Patches are encouraged to improve it.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       •   AnyEvent::WebSocket::Connection

       •   AnyEvent::WebSocket::Message

       •   AnyEvent::WebSocket::Server

       •   AnyEvent

       •   URI::ws

       •   URI::wss

       •   Protocol::WebSocket

       •   Net::WebSocket::Server

       •   Net::Async::WebSocket

       •   RFC 6455 The WebSocket Protocol &lt;<a href="http://tools.ietf.org/html/rfc6455">http://tools.ietf.org/html/rfc6455</a>&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Author: Graham Ollis &lt;<a href="mailto:plicease@cpan.org">plicease@cpan.org</a>&gt;

       Contributors:

       Toshio Ito (debug-ito, TOSHIOITO)

       José Joaquín Atria (JJATRIA)

       Kivanc Yazan (KYZN)

       Yanick Champoux (YANICK)

       Fayland Lam (FAYLAND)

       Daniel Kamil Kozar (xavery)

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2013-2022 by Graham Ollis.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.36.0                                       2023-08-14                   <u>AnyEvent::WebSocket::<a href="../man3pm/Client.3pm.html">Client</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>