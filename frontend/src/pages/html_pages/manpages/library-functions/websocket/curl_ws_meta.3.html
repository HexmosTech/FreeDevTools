<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>curl_ws_meta - meta data WebSocket information</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       curl_ws_meta - meta data WebSocket information

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       const struct curl_ws_frame *curl_ws_meta(CURL *curl);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       When   the   write   callback  (<u><a href="../man3/CURLOPT_WRITEFUNCTION.3.html">CURLOPT_WRITEFUNCTION</a>(3)</u>)  is  invoked  on  received  WebSocket  traffic,
       <u><a href="../man3/curl_ws_meta.3.html">curl_ws_meta</a>(3)</u> can be called from within the  callback  to  provide  additional  information  about  the
       current frame.

       This function only works from within the callback, and only when receiving WebSocket data.

       This function requires an easy handle as input argument for libcurl to know what transfer the question is
       about, but as there is no such pointer provided to the callback by libcurl itself, applications that want
       to use <u><a href="../man3/curl_ws_meta.3.html">curl_ws_meta</a>(3)</u> need to pass it on to the callback on its own.

</pre><h4><b>struct</b> <b>curl_ws_frame</b></h4><pre>
       struct curl_ws_frame {
         int age;
         int flags;
         curl_off_t offset;
         curl_off_t bytesleft;
         size_t len;
       };

       age    This field specify the age of this struct. It is always zero for now.

       flags  This is a bitmask with individual bits set that describes the WebSocket data.  See the list below.

       offset When  this  chunk  is  a continuation of frame data already delivered, this is the offset into the
              final frame data where this piece belongs to.

       bytesleft
              If this is not a complete fragment, the <u>bytesleft</u> field informs about how  many  additional  bytes
              are expected to arrive before this fragment is complete.

       len    The length of the current data chunk.

</pre><h4><b>FLAGS</b></h4><pre>
       The <u>message</u> <u>type</u> flags (CURLWS_TEXT/BINARY/CLOSE/PING/PONG) are mutually exclusive.

       CURLWS_TEXT
              This  is  a  message  with  text  data. Note that this makes a difference to WebSocket but libcurl
              itself does not make any verification of the content or  precautions  that  you  actually  receive
              valid UTF-8 content.

       CURLWS_BINARY
              This is a message with binary data.

       CURLWS_CLOSE
              This is a close message. No more data follows.

              It may contain a 2-byte unsigned integer in network byte order that indicates the close reason and
              may  additionally  contain  up  to 123 bytes of further textual payload for a total of at most 125
              bytes. libcurl does not verify that the textual description is valid UTF-8.

       CURLWS_PING
              This is a ping message. It may contain up to 125 bytes of payload text.  libcurl does  not  verify
              that the payload is valid UTF-8.

              Upon  receiving  a  ping  message,  libcurl  automatically responds with a pong message unless the
              <b>CURLWS_NOAUTOPONG</b> or <b>CURLWS_RAW_MODE</b> bit of <u><a href="../man3/CURLOPT_WS_OPTIONS.3.html">CURLOPT_WS_OPTIONS</a>(3)</u> is set.

       CURLWS_PONG
              This is a pong message. It may contain up to 125 bytes of payload text.  libcurl does  not  verify
              that the payload is valid UTF-8.

       CURLWS_CONT
              Can only occur in conjunction with CURLWS_TEXT or CURLWS_BINARY.

              This is not the final fragment of the message, it implies that there is another fragment coming as
              part  of  the  same message. The application must reassemble the fragments to receive the complete
              message.

              Only a single fragmented message can be transmitted at a  time,  but  it  may  be  interrupted  by
              CURLWS_CLOSE, CURLWS_PING or CURLWS_PONG frames.

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects ws only

</pre><h4><b>EXAMPLE</b></h4><pre>
       /* we pass a pointer to this struct to the callback */
       struct customdata {
         CURL *easy;
         void *ptr;
       };

       static size_t writecb(char *buffer,
                             size_t size, size_t nitems, void *p)
       {
         struct customdata *c = (struct customdata *)p;
         const struct curl_ws_frame *m = curl_ws_meta(c-&gt;easy);

         printf("flags: %x\n", m-&gt;flags);
         return 0;
       }

       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           struct customdata custom;
           custom.easy = curl;
           custom.ptr = NULL;
           curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, writecb);
           curl_easy_setopt(curl, CURLOPT_WRITEDATA, &amp;custom);

           curl_easy_perform(curl);

         }
         return 0;
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.86.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This  function  returns  a pointer to a <u>curl_ws_frame</u> struct with read-only information that is valid for
       this specific callback invocation. If it cannot return this information, or if the function is called  in
       the wrong context, it returns NULL.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/curl_easy_getinfo.3.html">curl_easy_getinfo</a></b>(3), <b><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a></b>(3), <b><a href="../man3/curl_ws_recv.3.html">curl_ws_recv</a></b>(3), <b><a href="../man3/curl_ws_send.3.html">curl_ws_send</a></b>(3), <b><a href="../man3/libcurl-ws.3.html">libcurl-ws</a></b>(3)

libcurl                                            2025-06-16                                    <u><a href="../man3/curl_ws_meta.3.html">curl_ws_meta</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>