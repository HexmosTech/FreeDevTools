<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XML::Filter::Sort::BufferMgr - Implementation class used by XML::Filter::Sort</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libxml-filter-sort-perl">libxml-filter-sort-perl_1.01-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       XML::Filter::Sort::BufferMgr - Implementation class used by XML::Filter::Sort

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The documentation is targetted at developers wishing to extend or replace this class.  For user
       documentation, see XML::Filter::Sort.

       Two classes are used to implement buffering records and spooling them back out in sorted order as SAX
       events.  One instance of the <b>XML::Filter::Sort::Buffer</b> class is used to buffer each record and one or
       more instances of the <b>XML::Filter::Sort::BufferMgr</b> class are used to manage the buffers.

</pre><h4><b>API</b> <b>METHODS</b></h4><pre>
       The API of this module as used by <b>XML::Filter::Sort::Buffer</b> consists of the following sequence of method
       calls:

       1.  When   the   first   'record'   in   a   sequence   is   encountered,   <b>XML::Filter::Sort</b>  creates  a
           <b>XML::Filter::Sort::BufferMgr</b> object using the "new()" method.

       2.  <b>XML::Filter::Sort</b> calls the buffer manager's "new_buffer()" method to get a <b>XML::Filter::Sort::Buffer</b>
           object and all SAX events are directed to this object until the end of  the  record  is  encountered.
           The following events are supported by the current buffer implementation:

             start_element()
             characters()
             comment()
             processing_instruction()
             end_element()

       3.  When the end of the record is detected, <b>XML::Filter::Sort</b> calls the buffer manager's "close_buffer()"
           method,  which  in  turn calls the buffer's "close()" method.  The "close()" method returns a list of
           values for the sort keys and the buffer manager uses these to store  the  buffer  for  later  recall.
           Subsequent records are handled as per step 2.

       4.  When  the  last  record  has  been  buffered, <b>XML::Filter::Sort</b> calls the buffer manager's "to_sax()"
           method.  The buffer manager retrieves each of the buffers in sorted  order  and  calls  the  buffer's
           "to_sax()" method.

       Each buffer attempts to match the sort key paths as SAX events are received.  Once a value has been found
       for  a  given  key, that same path match is not attempted against subsequent events.  For efficiency, the
       code to match each key is compiled into a closure.  For even more efficiency, this  compilation  is  done
       once  when the <b>XML::Filter::Sort</b> object is created.  The "compile_matches()" method in the buffer manager
       class calls the "compile_matches()" method in the buffer class to achieve this.

</pre><h4><b>DATA</b> <b>STRUCTURES</b></h4><pre>
       In the current implementation, the <b>XML::Filter::Sort::BufferMgr</b> class simply uses a  hash  to  store  the
       buffer  objects.   If  only  one sort key was defined, only a single hash is required.  The values in the
       hash are arrayrefs containing the list of buffers for records with identical keys.

       If two or more sort keys are defined, the hash values will be <b>XML::Filter::Sort::BufferMgr</b> objects  which
       in  turn  will  contain  the buffers.  The following illustration may clarify the relationship (BM=buffer
       manager, B=buffer):

                                        BM
                        +----------------+---------------+
                        |                                |
                       BM                               BM
                  +-----+--------+                 +-----+----------+
                  |              |                 |                |
                 BM             BM                BM               BM
            +-----+----+    +----+------+     +----+----+    +------+------+
            |     |    |    |    |      |     |    |    |    |      |      |
         [B,B,B] [B] [B,B] [B] [B,B] [B,B,B] [B] [B,B] [B] [B,B] [B,B,B] [B,B]

       This layered storage structure is transparent to the  <b>XML::Filter::Sort</b>  object  which  instantiates  and
       interacts with only one buffer manager (the one at the top of the tree).

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2002 Grant McLean &lt;<a href="mailto:grantm@cpan.org">grantm@cpan.org</a>&gt;

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

perl v5.26.1                                       2018-03-30                  <u>XML::Filter::Sort::<a href="../man3pm/BufferMgr.3pm.html">BufferMgr</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>