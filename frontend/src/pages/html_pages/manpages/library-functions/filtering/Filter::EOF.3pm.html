<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Filter::EOF - Run a callback after a file has been compiled</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libfilter-eof-perl">libfilter-eof-perl_0.04-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Filter::EOF - Run a callback after a file has been compiled

</pre><h4><b>VERSION</b></h4><pre>
       0.04

</pre><h4><b>SYNOPSIS</b></h4><pre>
         package MyPackage;
         use warnings;
         use strict;

         use Filter::EOF;

         sub import {
             my ($class, @args) = @_;
             my $caller = scalar caller;

             # set the COMPILE_TIME package var to a false value
             # when the file was compiled
             Filter::EOF-&gt;on_eof_call(sub {
                 no strict 'refs';
                 ${ $caller . '::COMPILE_TIME' } = 0;
             });

             # set the COMPILE_TIME package var to a true value when
             # we start compiling it.
             {   no strict 'refs';
                 ${ $caller . '::COMPILE_TIME' } = 1;
             }
         }

         1;
         ...

         package MyUsingPackage;
         use warnings;
         use strict;

         our $COMPILE_TIME;
         use MyPackage;

         # prints 'yes'
         BEGIN { print +( $COMPILE_TIME ? 'yes' : 'no' ), "\n" }

         # prints 'no'
         print +( $COMPILE_TIME ? 'yes' : 'no' ), "\n";

         1;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module utilises Perl's source filters to provide you with a mechanism to run some code after a file
       using your module has been processed.

</pre><h4><b>METHODS</b></h4><pre>
   <b>"import(</b> <b>@functions</b> <b>)"</b>
       Currently, only a function equivalent of the "on_eof_call" method is provided for export.

         use Filter::EOF qw( on_eof_call );

         sub import {
             my ($class) = @_;
             ...
             on_eof_call { ... };
         }
         ...

   <b>"on_eof_call(</b> <b>$code_ref</b> <b>)"</b>
       Call this method in your own "import" method to register a code reference that should be called when the
       file "use"ing yours was compiled.

       The code reference will get a scalar reference as first argument to an empty string. if you change this
       string to something else, it will be appended at the end of the source.

         # call C&lt;some_function()&gt; after runtime.
         Filter-&gt;on_eof_call(sub {
             my $append = shift;
             $$append .= '; some_function(); 1;';
         });

</pre><h4><b>EXPORTS</b></h4><pre>
   <b>on_eof_call</b>
       You can optionally import the "on_eof_call" function into your namespace.

</pre><h4><b>EXAMPLES</b></h4><pre>
       You can find the example mentioned in "SYNOPSIS" in the distribution directory "examples/synopsis/".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Filter::Call::Util, "Exporting without using Exporter's import method" in Exporter

</pre><h4><b>AUTHOR</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Robert 'phaylon' Sedlacek - "&lt;<a href="mailto:rs@474.at">rs@474.at</a>&gt;". Many thanks to Matt S Trout for the idea and inspirations on
       this module.

</pre><h4><b>LICENSE</b></h4><pre>
       This program is free software; you can redistribute it and/or modify it under the same terms as perl
       itself.

perl v5.36.0                                       2022-10-13                                   <u>Filter::<a href="../man3pm/EOF.3pm.html">EOF</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>