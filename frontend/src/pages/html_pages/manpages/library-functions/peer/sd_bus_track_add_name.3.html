<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_bus_track_add_name, sd_bus_track_add_sender, sd_bus_track_remove_name, sd_bus_track_remove_sender,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_bus_track_add_name, sd_bus_track_add_sender, sd_bus_track_remove_name, sd_bus_track_remove_sender,
       sd_bus_track_count, sd_bus_track_count_sender, sd_bus_track_count_name, sd_bus_track_contains,
       sd_bus_track_first, sd_bus_track_next - Add, remove and retrieve bus peers tracked in a bus peer tracking
       object

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-bus.h&gt;</b>

       <b>int</b> <b>sd_bus_track_add_name(sd_bus_track*</b> <u>t</u><b>,</b> <b>const</b> <b>char*</b> <u>name</u><b>);</b>

       <b>int</b> <b>sd_bus_track_add_sender(sd_bus_track*</b> <u>t</u><b>,</b> <b>sd_bus_message*</b> <u>message</u><b>);</b>

       <b>int</b> <b>sd_bus_track_remove_name(sd_bus_track*</b> <u>t</u><b>,</b> <b>const</b> <b>char*</b> <u>name</u><b>);</b>

       <b>int</b> <b>sd_bus_track_remove_sender(sd_bus_track*</b> <u>t</u><b>,</b> <b>sd_bus_message*</b> <u>message</u><b>);</b>

       <b>unsigned</b> <b>sd_bus_track_count(sd_bus_track*</b> <u>t</u><b>);</b>

       <b>int</b> <b>sd_bus_track_count_name(sd_bus_track*</b> <u>t</u><b>,</b> <b>const</b> <b>char*</b> <u>name</u><b>);</b>

       <b>int</b> <b>sd_bus_track_count_sender(sd_bus_track*</b> <u>t</u><b>,</b> <b>sd_bus_message*</b> <u>message</u><b>);</b>

       <b>int</b> <b>sd_bus_track_contains(sd_bus_track*</b> <u>t</u><b>,</b> <b>const</b> <b>char*</b> <u>name</u><b>);</b>

       <b>const</b> <b>char*</b> <b>sd_bus_track_first(sd_bus_track*</b> <u>t</u><b>);</b>

       <b>const</b> <b>char*</b> <b>sd_bus_track_next(sd_bus_track*</b> <u>t</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_bus_track_add_name()</b> adds a peer to track to a bus peer tracking object. The first argument should
       refer to a bus peer tracking object created with <b><a href="../man3/sd_bus_track_new.3.html">sd_bus_track_new</a></b>(3), the second name should refer to a
       D-Bus peer name to track, either in unique or well-known service format. If the name is not tracked yet
       it will be added to the list of names to track. If it already is being tracked and non-recursive mode is
       enabled, no operation is executed by this call. If recursive mode is enabled a per-name counter is
       increased by one each time this call is invoked, and <b>sd_bus_track_remove_name()</b> has to be called as many
       times as <b>sd_bus_track_add_name()</b> was invoked before in order to stop tracking of the name. Use
       <b><a href="../man3/sd_bus_track_set_recursive.3.html">sd_bus_track_set_recursive</a></b>(3) to switch from the default non-recursive mode to recursive mode, or back.
       Note that the specified name is tracked as it is, well-known names are not resolved to unique names by
       this call. Note that multiple bus peer tracking objects may track the same name.

       <b>sd_bus_track_remove_name()</b> undoes the effect of <b>sd_bus_track_add_name()</b> and removes a bus peer name from
       the list of peers to watch. Depending on whether non-recursive or recursive mode is enabled for the bus
       peer tracking object this call will either remove the name fully from the tracking object, or will simply
       decrement the per-name counter by one, removing the name only when the counter reaches zero (see above).
       Note that a bus peer disconnecting from the bus will implicitly remove its names fully from the bus peer
       tracking object, regardless of the current per-name counter.

       <b>sd_bus_track_add_sender()</b> and <b>sd_bus_track_remove_sender()</b> are similar to <b>sd_bus_track_add_name()</b> and
       <b>sd_bus_track_remove_name()</b> but take a bus message as argument. The sender of this bus message is
       determined and added to/removed from the bus peer tracking object. As messages always originate from
       unique names, and never from well-known names this means that this call will effectively only add unique
       names to the bus peer tracking object.

       <b>sd_bus_track_count()</b> returns the number of names currently being tracked by the specified bus peer
       tracking object. Note that this function always returns the actual number of names tracked, and hence if
       <b>sd_bus_track_add_name()</b> has been invoked multiple times for the same name it is only counted as one,
       regardless if recursive mode is used or not.

       <b>sd_bus_track_count_name()</b> returns the current per-name counter for the specified name. If non-recursive
       mode is used this returns either 1 or 0, depending on whether the specified name has been added to the
       tracking object before, or not. If recursive mode has been enabled, values larger than 1 may be returned
       too, in case <b>sd_bus_track_add_name()</b> has been called multiple times for the same name.

       <b>sd_bus_track_count_sender()</b> is similar to <b>sd_bus_track_count_name()</b>, but takes a bus message object and
       returns the per-name counter matching the sender of the message.

       <b>sd_bus_track_contains()</b> may be used to determine whether the specified name has been added at least once
       to the specified bus peer tracking object.

       <b>sd_bus_track_first()</b> and <b>sd_bus_track_next()</b> may be used to enumerate all names currently being tracked
       by the passed bus peer tracking object.  <b>sd_bus_track_first()</b> returns the first entry in the object, and
       resets an internally maintained read index. Each subsequent invocation of <b>sd_bus_track_next()</b> returns the
       next name contained in the bus object. If the end is reached <b>NULL</b> is returned. If no names have been
       added to the object yet <b>sd_bus_track_first()</b> will return <b>NULL</b> immediately. The order in which names are
       returned is undefined; in particular which name is considered the first returned is not defined. If
       recursive mode is enabled and the same name has been added multiple times to the bus peer tracking object
       it is only returned once by this enumeration. If new names are added to or existing names removed from
       the bus peer tracking object while it is being enumerated the enumeration ends on the next invocation of
       <b>sd_bus_track_next()</b> as <b>NULL</b> is returned.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>sd_bus_track_add_name()</b> and <b>sd_bus_track_add_sender()</b> return 0 if the specified name has
       already been added to the bus peer tracking object before and positive if it has not. On failure, they
       return a negative errno-style error code.

       <b>sd_bus_track_remove_name()</b> and <b>sd_bus_track_remove_sender()</b> return positive if the specified name was
       previously tracked by the bus peer tracking object and has now been removed. In non-recursive mode, 0 is
       returned if the specified name was not being tracked yet. In recursive mode <b>-EUNATCH</b> is returned in this
       case. On failure, they return a negative errno-style error code.

       <b>sd_bus_track_count()</b> returns the number of names currently being tracked, or 0 on failure.

       <b>sd_bus_track_count_name()</b> and <b>sd_bus_track_count_sender()</b> return the current per-name counter for the
       specified name or the sender of the specified message. Zero is returned for names that are not being
       tracked yet, a positive value for names added at least once. Larger values than 1 are only returned in
       recursive mode. On failure, a negative errno-style error code is returned.

       <b>sd_bus_track_contains()</b> returns the passed name if it exists in the bus peer tracking object. On failure,
       and if the name has not been added yet <b>NULL</b> is returned.

       <b>sd_bus_track_first()</b> and <b>sd_bus_track_next()</b> return the first/next name contained in the bus peer
       tracking object, and <b>NULL</b> if the end of the enumeration is reached and on error.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-EUNATCH</b>
           <b>sd_bus_track_remove_name()</b> or <b>sd_bus_track_remove_sender()</b> have been invoked for a name not
           previously added to the bus peer object.

       <b>-EINVAL</b>
           Specified parameter is invalid.

       <b>-ENOMEM</b>
           Memory allocation failed.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_bus_track_add_name()</b>, <b>sd_bus_track_add_sender()</b>, <b>sd_bus_track_remove_name()</b>,
       <b>sd_bus_track_remove_sender()</b>, <b>sd_bus_track_count()</b>, <b>sd_bus_track_count_name()</b>,
       <b>sd_bus_track_count_sender()</b>, <b>sd_bus_track_contains()</b>, <b>sd_bus_track_first()</b>, and <b>sd_bus_track_next()</b> were
       added in version 232.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-bus.3.html">sd-bus</a></b>(3), <b><a href="../man3/sd_bus_track_new.3.html">sd_bus_track_new</a></b>(3)

systemd 257.7                                                                           <u><a href="../man3/SD_BUS_TRACK_ADD_NAME.3.html">SD_BUS_TRACK_ADD_NAME</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>