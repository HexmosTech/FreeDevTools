<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPI_Buffer_attach_c -  Attaches a user-provided buffer for sending</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/mpich-doc">mpich-doc_4.0-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MPI_Buffer_attach_c -  Attaches a user-provided buffer for sending

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #ifdef ENABLE_QMPI
       #ifndef MPICH_MPI_FROM_PMPI
       int QMPI_Buffer_attach_c(QMPI_Context context, int tool_id, void *buffer,
       MPI_Count size) MPICH_API_PUBLIC

</pre><h4><b>INPUT</b> <b>PARAMETERS</b></h4><pre>
       <b>buffer</b> - initial buffer address (choice) (choice)
       <b>size</b>   - buffer size, in bytes (non-negative integer) (non-negative integer)

</pre><h4><b>NOTES</b></h4><pre>
       The  size  given  should  be the sum of the sizes of all outstanding Bsends that you intend to have, plus
       <u>MPI_BSEND_OVERHEAD</u> for each Bsend that you do.  For the purposes of  calculating  size,  you  should  use
       <u>MPI_Pack_size</u> .

       In other words, in the code
       MPI_Buffer_attach(buffer, size);
       MPI_Bsend(..., count=20, datatype=type1,  ...);
       .
       .
       .
       MPI_Bsend(..., count=40, datatype=type2, ...);

       the value of <u>size</u> in the <u>MPI_Buffer_attach</u> call should be greater than the value computed by
       MPI_Pack_size(20, type1, comm, &amp;s1);
       MPI_Pack_size(40, type2, comm, &amp;s2);
       size = s1 + s2 + 2 * MPI_BSEND_OVERHEAD;

       The  <u>MPI_BSEND_OVERHEAD</u>  gives  the maximum amount of space that may be used in the buffer for use by the
       BSEND routines in using the buffer.  This value is in <u>mpi.h</u> (for C) and <u>mpif.h</u> (for Fortran).

</pre><h4><b>THREAD</b> <b>AND</b> <b>INTERRUPT</b> <b>SAFETY</b></h4><pre>
       The user is responsible for ensuring that multiple threads do not try to update the same MPI object  from
       different threads.  This routine should not be used from within a signal handler.

       The  MPI  standard defined a thread-safe interface but this does not mean that all routines may be called
       without any thread locks.  For example, two threads must not attempt to change the contents of  the  same
       <u>MPI_Info</u>  object  concurrently.   The  user is responsible in this case for using some mechanism, such as
       thread locks, to ensure that only one thread at a time makes use of this routine.  Because the buffer for
       buffered sends (e.g., <u>MPI_Bsend</u> ) is shared by all threads in a process,  the  user  is  responsible  for
       ensuring that only one thread at a time calls this routine or <u>MPI_Buffer_detach</u> .

</pre><h4><b>NOTES</b> <b>FOR</b> <b>FORTRAN</b></h4><pre>
       All MPI routines in Fortran (except for <u>MPI_WTIME</u> and <u>MPI_WTICK</u> ) have an additional argument <u>ierr</u> at the
       end of the argument list.  <u>ierr</u> is an integer and has the same meaning as the return value of the routine
       in C.  In Fortran, MPI routines are subroutines, and are invoked with the <u>call</u> statement.

       All MPI objects (e.g., <u>MPI_Datatype</u> , <u>MPI_Comm</u> ) are of type <u>INTEGER</u> in Fortran.

</pre><h4><b>ERRORS</b></h4><pre>
       All  MPI routines (except <u>MPI_Wtime</u> and <u>MPI_Wtick</u> ) return an error value; C routines as the value of the
       function and Fortran routines in the last argument.  Before the value is returned, the current MPI  error
       handler  is called.  By default, this error handler aborts the MPI job.  The error handler may be changed
       with   <u>MPI_Comm_set_errhandler</u>   (for   communicators),   <u>MPI_File_set_errhandler</u>   (for   files),    and
       <u>MPI_Win_set_errhandler</u>  (for  RMA windows).  The MPI-1 routine <u>MPI_Errhandler_set</u> may be used but its use
       is deprecated.  The predefined error handler <u>MPI_ERRORS_RETURN</u> may be used to cause error  values  to  be
       returned.   Note that MPI does <b>not</b> guarantee that an MPI program can continue past an error; however, MPI
       implementations will attempt to continue whenever possible.

       <b>MPI_SUCCESS</b>
              - No error; MPI routine completed successfully.

       <b>MPI_ERR_ARG</b>
              - Invalid argument.  Some argument is invalid and is not identified  by  a  specific  error  class
              (e.g., <u>MPI_ERR_RANK</u> ).
       <b>MPI_ERR_OTHER</b>
              - Other error; use <u>MPI_Error_string</u> to get more information about this error code.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       MPI_Buffer_detach, MPI_Bsend

                                                    1/21/2022                             <u><a href="../man3/MPI_Buffer_attach_c.3.html">MPI_Buffer_attach_c</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>