<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code::TidyAll::Git::Prereceive - Git pre-receive hook that requires files to be tidyall'd</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcode-tidyall-perl">libcode-tidyall-perl_0.84~ds-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Code::TidyAll::Git::Prereceive - Git pre-receive hook that requires files to be tidyall'd

</pre><h4><b>VERSION</b></h4><pre>
       version 0.84

</pre><h4><b>SYNOPSIS</b></h4><pre>
         In .git/hooks/pre-receive:

           #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?perl">/usr/bin/perl</a>
           use Code::TidyAll::Git::Prereceive;
           use strict;
           use warnings;

           Code::TidyAll::Git::Prereceive-&gt;check();

           # or

           my $input = do { local $/; &lt;STDIN&gt; };

           # Do other things with $input here

           my $hook = Code::TidyAll::Git::Prereceive-&gt;new();
           if (my $error = $hook-&gt;check_input($input)) {
               die $error;
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module implements a Git pre-receive hook &lt;<a href="http://git-scm.com/book/en/Customizing-Git-Git-Hooks">http://git-scm.com/book/en/Customizing-Git-Git-Hooks</a>&gt; that
       checks if all pushed files are tidied and valid according to tidyall, and rejects the push if not.

       This is typically used to validate pushes from multiple developers to a shared repo, possibly on a remote
       server.

       See also Code::TidyAll::Git::Precommit, which operates locally.

</pre><h4><b>METHODS</b></h4><pre>
       This class provides the following methods:

   <b>Code::TidyAll::Git::Prereceive-&gt;check(%params)</b>
       This method reads commit info from standard input, then checks that all files being added or modified in
       this push are tidied and valid according to tidyall. If not, then the entire push is rejected and the
       reason(s) are output to the client. e.g.

           % git push
           Counting objects: 9, done.
           ...
           remote: [checked] lib/CHI/Util.pm
           remote: Code before strictures are enabled on line 13 [TestingAndDebugging::RequireUseStrict]
           remote:
           remote: 1 file did not pass tidyall check
           To ...
            ! [remote rejected] master -&gt; master (pre-receive hook declined)

       The configuration file ("tidyall.ini" or ".tidyallrc") must be checked into git in the repo root
       directory, i.e. next to the .git directory.

       In an emergency the hook can be bypassed by pushing the exact same set of commits 3 consecutive times
       (configurable via "allow_repeated_push"):

           % git push
           ...
           remote: 1 file did not pass tidyall check

           % git push
           ...
           *** Identical push seen 2 times
           remote: 1 file did not pass tidyall check

           % git push
           ...
           *** Identical push seen 3 times
           *** Allowing push to proceed despite errors

       Or you can disable the hook in the repo being pushed to, e.g. by renaming .git/hooks/pre-receive.

       If an unexpected runtime error occurs, it is reported but by default the commit will be allowed through
       (see "reject_on_error").

       Passes mode = "commit" by default; see modes.

       Key/value parameters:

       •   allow_repeated_push

           Number  of  times  a  push  must be repeated exactly after which it will be let through regardless of
           errors. Defaults to 3. Set to 0 or "undef" to disable this feature.

       •   conf_name

           Conf file name to search for instead of the defaults.

       •   extra_conf_files

           An arrayref of extra configuration files referred to from the main configuration file, e.g.

               extra_conf_files =&gt; ['perlcriticrc', 'perltidyrc']

           These files will be pulled out of the repo alongside the main configuration file. If you  don't  list
           them here then you'll get errors like 'cannot find perlcriticrc' when the hook runs.

       •   git_path

           Path  to  git  to use in commands, e.g. '<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?git">/usr/bin/git</a>' or '/usr/local/bin/git'. By default, just uses
           'git', which will search the user's PATH.

       •   reject_on_error

           Whether "check" should reject the commit when an unexpected runtime error  occurs.  By  default,  the
           error will be reported but the commit will be allowed.

       •   tidyall_class

           Subclass to use instead of Code::TidyAll

       •   tidyall_options

           Hashref of options to pass to the Code::TidyAll constructor. You can use this to override the default
           options

               mode  =&gt; 'commit',
               quiet =&gt; 1,

           or pass additional options.

   <b>Code::TidyAll::Git::Prereceive-&gt;new(%params)</b>
       This  takes  the same parameters documented as documented in "check" above and returns a new object which
       you can then call "check_input" on.

   <b>$prereceive-&gt;check_input($input)</b>
       Runs a check on <u>$input</u>, the text block of lines that came from standard input. You can call this manually
       before or after you do other processing on the input. Returns an error string if there was a  problem  or
       undef if there were no problems.

</pre><h4><b>KNOWN</b> <b>BUGS</b></h4><pre>
       This  hook will ignore any files with only a single line of content (no newlines), as an imperfect way of
       filtering out symlinks.

</pre><h4><b>SUPPORT</b></h4><pre>
       Bugs may be submitted at &lt;https://github.com/houseabsolute/perl-code-tidyall/issues&gt;.

</pre><h4><b>SOURCE</b></h4><pre>
       The      source      code      repository      for      Code-TidyAll      can      be      found       at
       &lt;https://github.com/houseabsolute/perl-code-tidyall&gt;.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Jonathan Swartz &lt;<a href="mailto:swartz@pobox.com">swartz@pobox.com</a>&gt;

       •   Dave Rolsky &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2011 - 2023 by Jonathan Swartz.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

       The full text of the license can be found in the <u>LICENSE</u> file included with this distribution.

perl v5.40.1                                       2025-04-03                <u>Code::TidyAll::Git::<a href="../man3pm/Prereceive.3pm.html">Prereceive</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>