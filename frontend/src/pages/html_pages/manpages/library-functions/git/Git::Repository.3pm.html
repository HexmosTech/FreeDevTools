<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Git::Repository - Perl interface to Git repositories</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libgit-repository-perl">libgit-repository-perl_1.325-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Git::Repository - Perl interface to Git repositories

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Git::Repository;

           # start from an existing repository
           $r = Git::Repository-&gt;new( git_dir =&gt; $gitdir );

           # start from an existing working copy
           $r = Git::Repository-&gt;new( work_tree =&gt; $dir );

           # start from a repository reachable from the current directory
           $r = Git::Repository-&gt;new();

           # or init our own repository first
           Git::Repository-&gt;run( init =&gt; $dir, ... );
           $r = Git::Repository-&gt;new( work_tree =&gt; $dir );

           # or clone from a URL first
           Git::Repository-&gt;run( clone =&gt; $url, $dir, ... );
           $r = Git::Repository-&gt;new( work_tree =&gt; $dir );

           # provide an option hash for Git::Repository::Command
           # (see Git::Repository::Command for all available options)
           $r = Git::Repository-&gt;new( ..., \%options );

           # run commands
           # - get the full output (no errput) passing options for this command only
           $output = $r-&gt;run( @cmd, \%options );

           # - get the full output as a list of lines (no errput), with options
           @output = $r-&gt;run( @cmd, \%options );

           # - process the output with callbacks
           $output = $r-&gt;run( @cmd, sub {...} );
           @output = $r-&gt;run( @cmd, sub {...} );

           # - obtain a Git::Repository::Command object
           #   (see Git::Repository::Command for details)
           $cmd = $r-&gt;command( @cmd, \%options );

           # obtain version information
           my $version = $r-&gt;version();

           # compare current git version
           if ( $r-&gt;version_gt('1.6.5') ) {
               ...;
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Git::Repository is a Perl interface to Git, for scripted interactions with repositories. It's a low-level
       interface that allows calling any Git command, whether <u>porcelain</u> or <u>plumbing</u>, including bidirectional
       commands such as "git commit-tree".

       A Git::Repository object simply provides context to the git commands being run. It is possible to call
       the  "command()" and "run()" methods against the class itself, and the context (typically <u>current</u> <u>working</u>
       <u>directory</u>) will be obtained from the options and environment.

       As a low-level interface, it provides no sugar for particular Git commands. Specifically, it will not
       prepare environment variables that individual Git commands may need or use.

       However, the "GIT_DIR" and "GIT_WORK_TREE" environment variables are special: if the command is run in
       the context of a Git::Repository object, they will be overridden by the object's "git_dir" and
       "work_tree" attributes, respectively. It is still possible to override them if necessary, using the "env"
       option.

       Git::Repository requires at least Git 1.5.0, and is expected to support any later version.

       See Git::Repository::Tutorial for more code examples.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
   <b>new</b>
           Git::Repository-&gt;new( %args, $options );

       Create a new Git::Repository object, based on an existing Git repository.

       Parameters are:

       git_dir =&gt; $gitdir
           The location of the git repository (<u>.git</u> directory or equivalent).

           For  backward  compatibility  with  versions  1.06  and  before, "repository" is accepted in place of
           "git_dir" (but the newer name takes precedence).

       work_tree =&gt; $dir
           The location of the git working copy (for a non-bare repository).

           If "work_tree" actually points to a subdirectory of the work tree, Git::Repository will automatically
           recompute the proper value.

           For backward compatibility with versions 1.06 and before, "working_copy"  is  accepted  in  place  of
           "work_tree" (but the newer name takes precedence).

       If  none  of  the  parameter is given, Git::Repository will find the appropriate repository just like Git
       itself does. Otherwise, one of the parameters is usually enough, as Git::Repository can  work  out  where
       the other directory (if any) is.

       "new()"   also   accepts  a  reference  to  an  option  hash  which  will  be  used  as  the  default  by
       Git::Repository::Command when working with the corresponding Git::Repository instance.

       So this:

           my $r = Git::Repository-&gt;new(
               # parameters
               work_tree =&gt; $dir,
               # options
               {   git =&gt; '/path/to/some/other/git',
                   env =&gt; {
                       GIT_COMMITTER_EMAIL =&gt; '<a href="mailto:book@cpan.org">book@cpan.org</a>',
                       GIT_COMMITTER_NAME  =&gt; 'Philippe Bruhat (BooK)',
                   },
               }
           );

       is equivalent to  explicitly  passing  the  option  hash  to  each  "run()"  or  "command()"  call.   The
       documentation for Git::Repository::Command lists all available options.

       Note  that  Git::Repository  and  Git::Repository::Command  take  great  care  in finding the option hash
       wherever it may be in @_, and to merge multiple option hashes if more than one is provided.

       It probably makes no sense to set the "input" option in "new()",  but  Git::Repository  won't  stop  you.
       Note  that  on  some  systems,  some git commands may close standard input on startup, which will cause a
       "SIGPIPE". Git::Repository::Command will raise an exception.

       To create a Git repository and obtain a Git::Repository object pointing to it, simply do it in two steps:

           # run a clone or init command without an instance,
           # using options like cwd
           Git::Repository-&gt;run( ... );

           # obtain a Git::Repository instance
           # on the resulting repository
           $r = Git::Repository-&gt;new( ... );

</pre><h4><b>METHODS</b></h4><pre>
       Git::Repository supports the following methods:

   <b>command</b>
           Git::Repository-&gt;command( @cmd );
           $r-&gt;command( @cmd );

       Runs the git sub-command and options, and returns a Git::Repository::Command object pointing to the  sub-
       process running the command.

       As  described  in  the Git::Repository::Command documentation, @cmd may also contain a hashref containing
       options for the command.

   <b>run</b>
           Git::Repository-&gt;run( @cmd );
           $r-&gt;run( @cmd );

       Runs the command and returns the output as a string in scalar context, or as a  list  of  lines  in  list
       context. Also accepts a hashref of options.

       Lines are automatically "chomp"ed.

       In  addition  to  the  options hashref supported by Git::Repository::Command, the parameter list can also
       contain code references, that will be applied successively  to  each  line  of  output.  The  line  being
       processed is in $_, but the coderef must still return the result string (like "map").

       If  the  git  command printed anything on stderr, it will be printed as warnings. For convenience, if the
       git sub-process exited with status 128 (fatal error), or 129 (usage message), "run()" will "die()".   The
       exit   status   values   for   which  "run()"  dies  can  be  modified  using  the  "fatal"  option  (see
       Git::Repository::Command for details).

       The exit status of the command that was just run is accessible as usual using "$? &gt;&gt; 8". See perlvar  for
       details about $?.

   <b>git_dir</b>
       Returns the repository path.

   <b>work_tree</b>
       Returns the working copy path.  Used as current working directory by Git::Repository::Command.

   <b>options</b>
       Return the option hash that was passed to "Git::Repository-&gt;new()".

   <b>version</b>
       Return the version of git, as given by "git --version".

   <b>Version-comparison</b> <b>"operators"</b>
       Git  evolves  very  fast,  and new features are constantly added.  To facilitate the creation of programs
       that can properly handle the wide variety of  Git  versions  seen  in  the  wild,  a  number  of  version
       comparison "operators" are available.

       They  are  named  "version_<u>op</u>"  where  <u>op</u> is the equivalent of the Perl operators "lt", "gt", "le", "ge",
       "eq", "ne". They return a boolean value, obtained by comparing the version of  the  git  binary  and  the
       version string passed as parameter.

       The methods are:

       version_lt( $version )
       version_gt( $version )
       version_le( $version )
       version_ge( $version )
       version_eq( $version )
       version_ne( $version )

       All those methods also accept an option hash, just like the others.

       The  actual  version-comparison  logic  is managed by Git::Version::Compare.  Check its documentation for
       details.

</pre><h4><b>PLUGIN</b> <b>SUPPORT</b></h4><pre>
       Git::Repository intentionally has only few methods.  The idea is to provide a lightweight wrapper  around
       git, to be used to create interesting tools based on Git.

       However,  people  will  want  to  add extra functionality to Git::Repository, the obvious example being a
       "log()" method that returns simple objects with useful attributes.

       Taking the hypothetical "Git::Repository::Plugin::Hello" module  which  source  code  is  listed  in  the
       previous reference, the methods it provides would be loaded and used as follows:

           use Git::Repository qw( Hello );

           my $r = Git::Repository-&gt;new();
           print $r-&gt;hello();
           print $r-&gt;hello_gitdir();

       It's possible to load only a selection of methods from the plugin:

           use Git::Repository [ Hello =&gt; 'hello' ];

           my $r = Git::Repository-&gt;new();
           print $r-&gt;hello();

           # dies: Can't locate object method "hello_gitdir"
           print $r-&gt;hello_gitdir();

       If  your  plugin  lives  in  another  namespace  than  "Git::Repository::Plugin::", just prefix the fully
       qualified class name with a "+". For example:

           use Git::Repository qw( +MyGit::Hello );

       See Git::Repository::Plugin about how to create a new plugin.

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       Thanks to Todd Rinaldo, who wanted to add more methods to Git::Repository,  which  made  me  look  for  a
       solution  that  would preserve the minimalism of Git::Repository. The "::Plugin" interface is what I came
       up with.

</pre><h4><b>OTHER</b> <b>PERL</b> <b>GIT</b> <b>WRAPPERS</b> <b>(a.k.a.</b> <b>SEE</b> <b>ALSO)</b></h4><pre>
       (This section was written in June 2010. The other Git wrappers have probably evolved since that time.)

       A number of Perl git wrappers already exist. Why create a new one?

       I have a lot of ideas of nice things to do with Git as a tool to manipulate blobs, trees, and tags,  that
       may  or  may not represent revision history of a project. A lot of those commands can output huge amounts
       of data, which I need to be able to process in chunks.  Some of these commands  also  expect  to  receive
       input.

       What  follows  is a short list of "missing features" that I was looking for when I looked at the existing
       Git wrappers on CPAN. They are the "rational" reason for writing my own (the real reason being of  course
       "I thought it would be fun, and I enjoyed doing it").

       Even  though it works well for me and others, Git::Repository has its own shortcomings: it <u>is</u> a <u>low-level</u>
       <u>interface</u> <u>to</u> <u>Git</u> <u>commands</u>, anything complex requires you to deal with input/output handles,  it  provides
       no  high-level  interface  to  generate actual Git commands or process the output of commands (but have a
       look at the plugins), etc.  One the following modules may therefore be  better  suited  for  your  needs,
       depending on what you're trying to achieve.

   <b>Git.pm</b>
       Git.pm  was  not  on CPAN in 2010. It is packaged with Git, and installed with the system Perl libraries.
       Not being on CPAN made it harder to install in any Perl. It made it harder for a CPAN library  to  depend
       on it.

       It doesn't allow calling "git init" or "git clone".

       The           "command_bidi_pipe"           function           especially          has          problems:
       &lt;<a href="http://kerneltrap.org/mailarchive/git/2008/10/24/3789584">http://kerneltrap.org/mailarchive/git/2008/10/24/3789584</a>&gt;

       The Git module from git.git was packaged as a CPAN distribution by MSOUTH in June 2013.

   <b>Git::Class</b>
       Git::Class depends on Moose, which seems an unnecessary dependency for a simple wrapper around  Git.  The
       startup penalty could become significant for command-line tools.

       Although  it  supports "git init" and "git clone" (and has methods to call any Git command), it is mostly
       aimed at porcelain commands, and provides  no  way  to  control  bidirectional  commands  (such  as  "git
       commit-tree").

   <b>Git::Wrapper</b>
       Git::Wrapper doesn't support streams or bidirectional commands.

   <b>Git::Sub</b>
       (This description was added for completeness in May 2013.)

       Git::Sub  appeared  in  2013,  as  a  set of Git-specific System::Sub functions. It provide a nice set of
       "git::" functions, and has some limitations (due to the way System::Sub itself works) which don't  impact
       most Git commands.

       Git::Sub doesn't support working with streams.

   <b>Git::Raw</b>
       (This description was added for completeness in September 2014, upon request of the author of Git::Raw.)

       Git::Raw  provides  bindings  to libgit2 &lt;https://libgit2.github.io/&gt;, a pure C implementation of the Git
       core methods. Most of the functions provided by libgit2 are available. If you have complex workflows,  or
       even if speed is of the essence, this may be a more attractive solution than shelling out to git.

</pre><h4><b>BUGS</b></h4><pre>
       Since  version 1.17, Git::Repository delegates the actual command execution to System::Command, which has
       better support for Win32 since version 1.100.

       Please report any bugs or feature requests to "bug-git-repository at rt.cpan.org",  or  through  the  web
       interface  at  &lt;<a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=Git-Repository&gt;.   I will be notified, and
       then you'll automatically be notified of progress on your bug as I make changes.

</pre><h4><b>SUPPORT</b></h4><pre>
       You can find documentation for this module with the perldoc command.

           perldoc Git::Repository

       You can also look for information at:

       •   RT: CPAN's request tracker

           &lt;<a href="http://rt.cpan.org/NoAuth/Bugs.html">http://rt.cpan.org/NoAuth/Bugs.html</a>?Dist=Git-Repository&gt;

       •   AnnoCPAN: Annotated CPAN documentation

           &lt;<a href="http://annocpan.org/dist/Git-Repository">http://annocpan.org/dist/Git-Repository</a>&gt;

       •   CPAN Ratings

           &lt;<a href="http://cpanratings.perl.org/d/Git-Repository">http://cpanratings.perl.org/d/Git-Repository</a>&gt;

       •   Search CPAN

           &lt;<a href="http://search.cpan.org/dist/Git-Repository">http://search.cpan.org/dist/Git-Repository</a>&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Philippe Bruhat (BooK) &lt;<a href="mailto:book@cpan.org">book@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2010-2016 Philippe Bruhat (BooK), all rights reserved.

</pre><h4><b>LICENSE</b></h4><pre>
       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

perl v5.36.0                                       2023-03-22                               <u>Git::<a href="../man3pm/Repository.3pm.html">Repository</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>