<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Code::TidyAll::Git::Precommit - Git pre-commit hook that requires files to be tidyall'd</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcode-tidyall-perl">libcode-tidyall-perl_0.84~ds-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Code::TidyAll::Git::Precommit - Git pre-commit hook that requires files to be tidyall'd

</pre><h4><b>VERSION</b></h4><pre>
       version 0.84

</pre><h4><b>SYNOPSIS</b></h4><pre>
         In .git/hooks/pre-commit:

           #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?env">/usr/bin/env</a> perl
           use strict;
           use warnings;

           use Code::TidyAll::Git::Precommit;
           Code::TidyAll::Git::Precommit-&gt;check();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module implements a Git pre-commit hook &lt;<a href="http://git-scm.com/book/en/Customizing-Git-Git-Hooks">http://git-scm.com/book/en/Customizing-Git-Git-Hooks</a>&gt; that
       checks if all files are tidied and valid according to tidyall, and rejects the commit if not.
       Files/commits are never modified by this hook.

       See also Code::TidyAll::Git::Prereceive, which validates pushes to a shared repo.

       The tidyall configuration file (<u>tidyall.ini</u> or <u>.tidyallrc</u>) must be checked into git in the repo root
       directory i.e. next to the .git directory.

       By default, the hook will stash any changes not in the index beforehand, and restore them afterwards, via

           git stash save --keep-index --include-untracked
           ....
           git stash pop

       This means that if the configuration file has uncommitted changes that are not in the index, they will
       not affect the tidyall run.

</pre><h4><b>METHODS</b></h4><pre>
       This class provides one method:

   <b>Code::TidyAll::Git::Precommit-&gt;check(%params)</b>
       Checks that all files being added or modified in this commit are tidied and valid according to tidyall.
       If not, then the entire commit is rejected and the reason(s) are output to the client. e.g.

           % git commit -m "fixups" CHI.pm CHI/Driver.pm
           2 files did not pass tidyall check
           lib/CHI.pm: *** 'PerlTidy': needs tidying
           lib/CHI/Driver.pm: *** 'PerlCritic': Code before strictures are enabled
             at /tmp/Code-TidyAll-0e6K/Driver.pm line 2
             [TestingAndDebugging::RequireUseStrict]

       In an emergency the hook can be bypassed by passing --no-verify to commit:

           % git commit --no-verify ...

       or you can just move <u>.git/hooks/pre-commit</u> out of the way temporarily.

       This class passes mode = "commit" by default to tidyall; see modes.

       Key/value parameters:

       •   conf_name

           A conf file name to search for instead of the defaults.

       •   git_path

           Path to git to use in commands, e.g. '<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?git">/usr/bin/git</a>' or '/usr/local/bin/git'. By default, it just uses
           'git', which will search the user's "PATH".

       •   no_stash

           Don't  attempt to stash changes not in the index. This means the hook will process files that are not
           going to be committed.

       •   tidyall_class

           Subclass to use instead of Code::TidyAll.

       •   tidyall_options

           A hashref of options to pass to the Code::TidyAll constructor.

</pre><h4><b>USING</b> <b>AND</b> <b>(NOT)</b> <b>ENFORCING</b> <b>THIS</b> <b>HOOK</b></h4><pre>
       This hook must be placed manually in each copy of the repo - there is no way to automatically  distribute
       or enforce it. However, you can make things easier on yourself or your developers as follows:

       •   Create a directory called <u>git/hooks</u> at the top of your repo (note no dot prefix).

               mkdir -p git/hooks

       •   Commit your pre-commit script in <u>git/hooks/pre-commit</u> containing:

               #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?env">/usr/bin/env</a> perl

               use strict;
               use warnings;

               use Code::TidyAll::Git::Precommit;
               Code::TidyAll::Git::Precommit-&gt;check();

       •   Add a setup script in <u>git/setup.sh</u> containing

               #!<a href="file:/bin/bash">/bin/bash</a>
               chmod +x git/hooks/pre-commit
               cd .git/hooks
               ln -s ../../git/hooks/pre-commit

       •   Run "git/setup.sh" (or tell your developers to run it) once for each new clone of the repo

       See  this  Stack  Overflow  question  for  more  information on pre-commit hooks and the impossibility of
       enforcing their use.

       See also Code::TidyAll::Git::Prereceive, which enforces tidyall on pushes to a remote shared repository.

</pre><h4><b>SUPPORT</b></h4><pre>
       Bugs may be submitted at &lt;https://github.com/houseabsolute/perl-code-tidyall/issues&gt;.

</pre><h4><b>SOURCE</b></h4><pre>
       The      source      code      repository      for      Code-TidyAll      can      be      found       at
       &lt;https://github.com/houseabsolute/perl-code-tidyall&gt;.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Jonathan Swartz &lt;<a href="mailto:swartz@pobox.com">swartz@pobox.com</a>&gt;

       •   Dave Rolsky &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2011 - 2023 by Jonathan Swartz.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

       The full text of the license can be found in the <u>LICENSE</u> file included with this distribution.

perl v5.40.1                                       2025-04-03                 <u>Code::TidyAll::Git::<a href="../man3pm/Precommit.3pm.html">Precommit</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>