<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP::Parser - parse HTTP/1.1 request into HTTP::Request/Response object</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libhttp-parser-perl">libhttp-parser-perl_0.06-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       HTTP::Parser - parse HTTP/1.1 request into HTTP::Request/Response object

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $parser = HTTP::Parser-&gt;new();

        ...

        my $status = $parser-&gt;add($text);

        if(0 == $status) {
          print "request: ".$parser-&gt;request()-&gt;as_string();  # HTTP::Request
        } elsif(-3 == $status) {
          print "no content length header!\n";
        } elsif(-2 == $status) {
          print "need a line of data\n";
        } elsif(-1 == $status) {
          print "need more data\n";
        } else {  # $status &gt; 0
          print "need $status byte(s)\n";
        }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is an HTTP request parser.  It takes chunks of text as received and returns a 'hint' as to what is
       required, or returns the HTTP::Request when a complete request has been read.  HTTP/1.1 chunking is
       supported.  It dies if it finds an error.

   <b>new</b> <b>(</b> <b>named</b> <b>params...</b> <b>)</b>
       Create a new HTTP::Parser object.  Takes named parameters, e.g.:

        my $parser = HTTP::Parser-&gt;new(request =&gt; 1);

       request
           Allows or denies parsing an HTTP request and returning an "HTTP::Request" object.

       response
           Allows or denies parsing an HTTP response and returning an "HTTP::Response" object.

       If  you pass neither "request" nor "response", only requests are parsed (for backwards compatibility); if
       you pass either, the other defaults to false (disallowing both requests and responses is a fatal error).

   <b>add</b> <b>(</b> <b>string</b> <b>)</b>
       Parse request.  Returns:

       0       if finished (call "object" to get an HTTP::Request or Response object)

       -1      if not finished but not sure how many bytes remain

       -2      if waiting for a line (like 0 with a hint)

       -3      if there was no content-length header, so we can't tell whether we are waiting for more  data  or
               not.

               If  you  are  reading  from  a  TCP  stream, you can keep adding data until the connection closes
               gracefully (the HTTP RFC allows this).

               If you are reading from a file, you should keep adding until you have all the data.

               Once you have added all data, you may call "object".  if you are not sure whether  you  have  all
               the data, the HTTP::Response object might be incomplete.

       count   if waiting for that many bytes

       Dies on error.

       This  method of parsing makes it easier to parse a request from an event-based system, on the other hand,
       it's quite alright to pass in the whole request.  Ideally, the first chunk passed in is the header (up to
       the double newline), then whatever byte counts are requested.

       When a request object is returned, the X-HTTP-Version header has the HTTP version, the <b>uri()</b> method  will
       always return a URI object, not a string.

       Note  that a nonzero return is just a hint, and any amount of data can be passed in to a subsequent <b>add()</b>
       call.

   <b>data</b>
       Returns current data not parsed.  Mainly useful after a request has been parsed.  The data is not removed
       from the object's buffer, and will be seen before the data next passed to <b>add()</b>.

   <b>extra</b>
       Returns the count of extra bytes (length of <b>data()</b>) after a request.

   <b>object</b>
       Returns the object request.  Only useful after the parse has completed.

</pre><h4><b>AUTHOR</b></h4><pre>
       David Robins &lt;<a href="mailto:dbrobins@davidrobins.net">dbrobins@davidrobins.net</a>&gt; Fixes for 0.05 by David Cannings &lt;<a href="mailto:david@edeca.net">david@edeca.net</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       HTTP::Request, HTTP::Response.

perl v5.36.0                                       2022-10-16                                        <u><a href="../man3pm/Parser.3pm.html">Parser</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>