<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tar_open, tar_close - access a tar archive via a handle</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libtar-dev">libtar-dev_1.2.20-8ubuntu0.22.04.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tar_open, tar_close - access a tar archive via a handle

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libtar.h&gt;</b>

       <b>int</b> <b>tar_open(TAR</b> <b>**</b><u>t</u><b>,</b> <b>char</b> <b>*</b><u>pathname</u><b>,</b> <b>tartype_t</b> <b>*</b><u>type</u><b>,</b> <b>int</b> <u>oflags</u><b>,</b> <b>int</b> <u>mode</u><b>,</b> <b>int</b> <u>options</u><b>);</b>

       <b>int</b> <b>tar_fdopen(TAR</b> <b>**</b><u>t</u><b>,</b> <b>int</b> <u>fd</u><b>,</b> <b>char</b> <b>*</b><u>pathname</u><b>,</b> <b>tartype_t</b> <b>*</b><u>type</u><b>,</b> <b>int</b> <u>oflags</u><b>,</b> <b>int</b> <u>mode</u><b>,</b> <b>int</b> <u>options</u><b>);</b>

       <b>int</b> <b>tar_fd(TAR</b> <b>*</b><u>t");"</u>

       <b>int</b> <b>tar_close(TAR</b> <b>*</b><u>t");"</u>

</pre><h4><b>VERSION</b></h4><pre>
       This man page documents version 1.2 of <b>libtar</b>.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>tar_open</b>()  function  opens  a  tar archive file corresponding to the filename named by the <u>pathname</u>
       argument.  The <u>oflags</u> argument must be either <b>O_RDONLY</b> or <b>O_WRONLY</b>.

       The <u>type</u> argument specifies the access methods for the given file  type.   The  <u>tartype_t</u>  structure  has
       members  named  <u>openfunc</u>,  <u>closefunc</u>, <u>readfunc</u>() and <u>writefunc</u>(), which are pointers to the functions for
       opening, closing, reading, and writing the file, respectively.  If <u>type</u> is <u>NULL</u>, the file  type  defaults
       to a normal file, and the standard <u>open</u>(), <u>close</u>(), <u>read</u>(), and <u>write</u>() functions are used.

       The <u>options</u> argument is a logical-or'ed combination of zero or more of the following:

       <b>TAR_GNU</b>
              Use GNU extensions.

       <b>TAR_VERBOSE</b>
              Send status messages to <u>stdout</u>.

       <b>TAR_NOOVERWRITE</b>
              Do not overwrite pre-existing files.

       <b>TAR_IGNORE_EOT</b>
              Skip all-zero blocks instead of treating them as EOT.

       <b>TAR_IGNORE_MAGIC</b>
              Do not validate the magic field in file headers.

       <b>TAR_CHECK_VERSION</b>
              Check the version field in file headers.  (This field is normally ignored.)

       <b>TAR_IGNORE_CRC</b>
              Do not validate the CRC of file headers.

       The <b>tar_open</b>() function allocates memory for a <u>TAR</u> handle, and a pointer to the allocated memory is saved
       in  the location specified by <u>t</u>.  The <u>TAR</u> handle may be passed to other <u>libtar</u> calls to modify the opened
       tar archive.  The <u>TAR</u> handle maintains all of the information about the open tar archive,  including  the
       archive <u>type</u>, <u>options</u>, and <u>oflags</u> selected when <b>tar_open</b>() was called.

       The  <u>TAR</u>  handle  generated  by <b>tar_open</b>() contains a file header structure.  When reading a tar archive,
       this structure contains the last file header read from the tar archive.  When writing a tar archive, this
       structure is used as a staging area to construct the next file header to be written to the  archive.   In
       addition,  the  <u>TAR</u>  handle  contains  a  hash  table which is used to keep track of the device and inode
       information for each file which gets written to the tar archive.  This is used to detect hard  links,  so
       that files do not need to be duplicated in the archive.

       The  <b>tar_fdopen</b>()  function  is  identical  to  the  <b>tar_open</b>()  function,  except that <u>fd</u> is used as the
       previously-opened file descriptor for the tar file instead of calling <u>type-&gt;openfunc</u>() to open the file.

       The <b>tar_fd</b>() function returns the file descriptor associated with the <u>TAR</u> handle <u>t</u>.

       The <b>tar_close</b>() function closes the file descriptor associated with  the  <u>TAR</u>  handle  <u>t</u>  and  frees  all
       dynamically-allocated memory.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The  <b>tar_open</b>(), <b>tar_fdopen</b>(), and <b>tar_close</b>() functions return 0 on success.  On failure, they return -1
       and set <u>errno</u>.

       The <b>tar_fd</b>() function returns the file descriptor associated with the <u>TAR</u> handle <u>t</u>.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>tar_open</b>() will fail if:

       <b>EINVAL</b> The <u>oflags</u> argument was something other than <b>O_RDONLY</b> or <b>O_WRONLY</b>.

       In addition, <b>tar_open</b>() and <b>tar_close</b>() may fail if it cannot allocate memory using <b>calloc</b>(), or  if  the
       open or close functions for the specified tar archive <u>type</u> fail.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/open.2.html">open</a></b>(2), <b><a href="../man2/close.2.html">close</a></b>(2), <b><a href="../man3/calloc.3.html">calloc</a></b>(3)

University of Illinois                              Jan 2001                                         <u><a href="../man3/tar_open.3.html">tar_open</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>