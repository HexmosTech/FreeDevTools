<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PGObject::Type::Registry - Registration of types for handing db types</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpgobject-perl">libpgobject-perl_2.4.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       PGObject::Type::Registry - Registration of types for handing db types

</pre><h4><b>SYNOPSIS</b></h4><pre>
         PGObject::Type::Registry-&gt;add_registry('myapp'); # required

         PGObject::Type::Registry-&gt;register_type(
            registry =&gt; 'myapp', dbtype =&gt; 'int4',
            apptype =&gt; 'PGObject::Type::BigFloat'
         );

         # to get back a type:
         my $number = PGObject::Type::Registry-&gt;deserialize(
            registry =&gt; 'myapp', dbtype =&gt; 'int4',
            dbstring =&gt; '1023'
         );

         # To get registry data:
         my %registry = PGObject::Type::Registry-&gt;inspect(registry =&gt; 'myapp');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The PGObject type registry stores data for serialization and deserialization relating to the database.

</pre><h4><b>USE</b></h4><pre>
       Generally we like to separate applications into their own registries so that different libraries can be
       used in a more harmonious way.

</pre><h4><b>CREATING</b> <b>A</b> <b>REGISTRY</b></h4><pre>
       You must create a registry before using it.  This is there to ensure that we make sure that subtle
       problems are avoided and strings returned when serialized types expected.  This is idempotent and repeat
       calls are safe. There is no abiltiy to remove an existing registry though you can loop through and remove
       the existing registrations.

   <b>new_registry(name)</b>
</pre><h4><b>REGISTERING</b> <b>A</b> <b>TYPE</b></h4><pre>
   <b>register_type</b>
       Args:

           registry =&gt; 'default', #warning thrown if not specified
           dbtype =&gt; [required], #exception thrown if not specified
           apptype =&gt; [required], #exception thrown if not specified

       Use:

       This registers a type for use by PGObject.  PGObject calls with the same registry key will serialize to
       this type, using the from_db method provided.

       from_db will be provided two arguments.  The first is the string from the database and the second is the
       type provided.  The second argument is optional and passed along for the db interface class's use.

       A warning is thrown if no

</pre><h4><b>UNREGISTERING</b> <b>A</b> <b>TYPE</b></h4><pre>
       To unregister a type, you provide the dbtype and registry information, both of which are required.  Note
       that at this time this is rarely needed.

   <b>unregister_type</b>
</pre><h4><b>DESERIALIZING</b> <b>A</b> <b>VALUE</b></h4><pre>
   <b>deserialize</b>
       This function deserializes a data from a db string.

       Mandatory args are dbtype and dbstring The registry arg should be provided but if not, a warning will be
       issued and 'default' will be used.

       This function returns the output of the from_db method.

   <b>deserializer</b>
       This returns a coderef to deserialize data from a db string. The coderef should be called with a single
       argument: the argument that would be passed as 'dbstring' into "deserialize". E.g.:

          my $deserializer = PGObject::Type::Registry-&gt;deserializer(dbtype =&gt; $type);
          my $value = $deserializer-&gt;($dbvalue);

       Mandatory argument is dbtype.  The registry arg should be provided but if not, a warning will be issued
       and 'default' will be used.

       This function returns the output of the "from_db" method of the registered class.

   <b>rowhash_deserializer</b>
       This returns a coderef to deserialize data from a call to e.g.  "fetchrow_arrayref". The coderef should
       be called with a single argument: the hash that holds the row values with the keys being the column
       names.

       Mandatory argument is "types", which is either an arrayref or hashref.  In case of a hashref, the keys
       are the names of the columns to be expected in the data hashrefs. The values are the types (same as the
       "dbtype" parameter of the "deserialize" method). In case of an arrayref, an additional argument "columns"
       is required, containing the names of the columns in the same order as "types".

       The registry arg should be provided but if not, a warning will be issued and 'default' will be used.

       This function returns the output of the "from_db" method of the registered class.

</pre><h4><b>INSPECTING</b> <b>A</b> <b>REGISTRY</b></h4><pre>
       Sometimes we need to see what types are registered.  To do this, we can request a copy of the registry.

   <b>inspect($name)</b>
       $name is required.  If it does not exist an exception is thrown.

   <b>list()</b>
       Returns a list of existing registries.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       COPYRIGHT (C) 2017-2021 The LedgerSMB Core Team

       Redistribution and use in source and compiled forms with or without modification, are permitted provided
       that the following conditions are met:

       •   Redistributions  of  source  code must retain the above copyright notice, this list of conditions and
           the following disclaimer as the first lines of this file unmodified.

       •   Redistributions in compiled form must reproduce the above copyright notice, this list  of  conditions
           and  the following disclaimer in the source code, documentation, and/or other materials provided with
           the distribution.

       THIS SOFTWARE IS PROVIDED BY THE AUTHOR(S) "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING,  BUT
       NOT  LIMITED  TO,  THE  IMPLIED  WARRANTIES  OF  MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
       DISCLAIMED. IN NO EVENT SHALL THE AUTHOR(S) BE LIABLE FOR  ANY  DIRECT,  INDIRECT,  INCIDENTAL,  SPECIAL,
       EXEMPLARY,  OR  CONSEQUENTIAL  DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
       SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON  ANY  THEORY  OF
       LIABILITY,  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN
       ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

perl v5.36.0                                       2023-11-24                      <u>PGObject::Type::<a href="../man3pm/Registry.3pm.html">Registry</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>