<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>brlapi_keys - Reading key presses</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbrlapi-dev">libbrlapi-dev_6.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       brlapi_keys - Reading key presses

        - How to read key presses from the braille terminal.

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Data</b> <b>Structures</b>
       struct <b>brlapi_expandedKeyCode_t</b>
       struct <b>brlapi_describedKeyCode_t</b>
       struct <b>brlapi_range_t</b>

   <b>Macros</b>
       #define <b>brlapi_ignoreAllKeys</b>()   <b>brlapi_ignoreKeys</b>(<b>brlapi_rangeType_all</b>, NULL, 0)
       #define <b>brlapi_acceptAllKeys</b>()   <b>brlapi_acceptKeys</b>(<b>brlapi_rangeType_all</b>, NULL, 0)
       #define <b>BRLAPI_UC_ROW</b>   0x2800UL
       #define <b>brlapi__ignoreAllKeys</b>(handle)   <b>brlapi__ignoreKeys</b>(handle, <b>brlapi_rangeType_all</b>, NULL, 0)
       #define <b>brlapi__acceptAllKeys</b>(handle)   <b>brlapi__acceptKeys</b>(handle, <b>brlapi_rangeType_all</b>, NULL, 0)

   <b>Enumerations</b>
       enum <b>brlapi_rangeType_t</b> { <b>brlapi_rangeType_all</b>, <b>brlapi_rangeType_type</b>, <b>brlapi_rangeType_command</b>,
           <b>brlapi_rangeType_key</b>, <b>brlapi_rangeType_code</b> }

   <b>Functions</b>
       int <b>BRLAPI_STDCALL</b> <b>brlapi_expandKeyCode</b> (<b>brlapi_keyCode_t</b> code, <b>brlapi_expandedKeyCode_t</b> *expansion)
       int <b>BRLAPI_STDCALL</b> <b>brlapi_describeKeyCode</b> (<b>brlapi_keyCode_t</b> code, <b>brlapi_describedKeyCode_t</b> *description)
       int <b>BRLAPI_STDCALL</b> <b>brlapi_readKey</b> (int wait, <b>brlapi_keyCode_t</b> *code)
       int <b>BRLAPI_STDCALL</b> <b>brlapi__readKey</b> (<b>brlapi_handle_t</b> *handle, int wait, <b>brlapi_keyCode_t</b> *code)
       int <b>BRLAPI_STDCALL</b> <b>brlapi_readKeyWithTimeout</b> (int timeout_ms, <b>brlapi_keyCode_t</b> *code)
       int <b>BRLAPI_STDCALL</b> <b>brlapi__readKeyWithTimeout</b> (<b>brlapi_handle_t</b> *handle, int timeout_ms, <b>brlapi_keyCode_t</b>
           *code)
       int <b>BRLAPI_STDCALL</b> <b>brlapi_ignoreKeys</b> (<b>brlapi_rangeType_t</b> type, const <b>brlapi_keyCode_t</b> keys[], unsigned
           int count)
       int <b>BRLAPI_STDCALL</b> <b>brlapi__ignoreKeys</b> (<b>brlapi_handle_t</b> *handle, <b>brlapi_rangeType_t</b> type, const
           <b>brlapi_keyCode_t</b> keys[], unsigned int count)
       int <b>BRLAPI_STDCALL</b> <b>brlapi_acceptKeys</b> (<b>brlapi_rangeType_t</b> type, const <b>brlapi_keyCode_t</b> keys[], unsigned
           int count)
       int <b>BRLAPI_STDCALL</b> <b>brlapi__acceptKeys</b> (<b>brlapi_handle_t</b> *handle, <b>brlapi_rangeType_t</b> type, const
           <b>brlapi_keyCode_t</b> keys[], unsigned int count)
       int <b>BRLAPI_STDCALL</b> <b>brlapi__ignoreAllKeys</b> (<b>brlapi_handle_t</b> *handle)
       int <b>BRLAPI_STDCALL</b> <b>brlapi__acceptAllKeys</b> (<b>brlapi_handle_t</b> *handle)
       int <b>BRLAPI_STDCALL</b> <b>brlapi_ignoreKeyRanges</b> (const <b>brlapi_range_t</b> ranges[], unsigned int count)
       int <b>BRLAPI_STDCALL</b> <b>brlapi__ignoreKeyRanges</b> (<b>brlapi_handle_t</b> *handle, const <b>brlapi_range_t</b> ranges[],
           unsigned int count)
       int <b>BRLAPI_STDCALL</b> <b>brlapi_acceptKeyRanges</b> (const <b>brlapi_range_t</b> ranges[], unsigned int count)
       int <b>BRLAPI_STDCALL</b> <b>brlapi__acceptKeyRanges</b> (<b>brlapi_handle_t</b> *handle, const <b>brlapi_range_t</b> ranges[],
           unsigned int count)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Once <b>brlapi_enterTtyMode()</b> has been called, the application can call <b>brlapi_readKey()</b> to read key
       presses. Either key codes (see <b>Types</b> <b>and</b> <b>Defines</b> <b>for</b><u>BrlAPI</u> <b>Key</b> <b>Codes</b><u>)</u> <u>or</u> <u>commands</u> <u>will</u> <u>be</u> <u>returned,</u>
       <u>depending</u> <u>on</u> <u>parameters</u> <u>given</u> <u>to</u> <b>brlapi_enterTtyMode()</b><u>.</u>

       Key presses are buffered, so that calling <b>brlapi_readKey()</b> in non-blocking mode from time to time should
       suffice.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>brlapi__acceptAllKeys(handle)</b>   <b>brlapi__acceptKeys(handle,</b> <b>brlapi_rangeType_all,</b> <b>NULL,</b> <b>0)</b>
   <b>#define</b> <b>brlapi__ignoreAllKeys(handle)</b>   <b>brlapi__ignoreKeys(handle,</b> <b>brlapi_rangeType_all,</b> <b>NULL,</b> <b>0)</b>
   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi_acceptAllKeys(void)</b>   <b>brlapi_acceptKeys(brlapi_rangeType_all,</b> <b>NULL,</b> <b>0)</b>
       Accept all key presses from the braille keyboard

       This function asks the server to give all keys to the application, and not give them to <u>brltty</u>.

       Warning: after calling this function, make sure to call <b>brlapi_ignoreKeys()</b> for ignoring important keys
       like BRL_CMD_SWITCHVT_PREV/NEXT and such.

       The sets of such keys are reset on brlapi_enterTtyMode call.

   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi_ignoreAllKeys(void)</b>   <b>brlapi_ignoreKeys(brlapi_rangeType_all,</b> <b>NULL,</b> <b>0)</b>
       Ignore all key presses from the braille keyboard

       This function asks the server to give all keys to <u>brltty</u>, rather than returning them to the application
       via <b>brlapi_readKey()</b>.

       The sets of such keys are reset on brlapi_enterTtyMode call.

   <b>#define</b> <b>BRLAPI_UC_ROW</b>   <b>0x2800UL</b>
       Unicode braille row

</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>brlapi_rangeType_t</b>
       types of key ranges

       <b>Enumerator</b>

       <u>brlapi_rangeType_all</u>
              all keys, code must be 0

       <u>brlapi_rangeType_type</u>
              all keys of a given type

       <u>brlapi_rangeType_command</u>
              all keys of a given command block, i.e. matching the key type and command parts

       <u>brlapi_rangeType_key</u>
              a given key with any flags

       <u>brlapi_rangeType_code</u>
              a given key code

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi__acceptAllKeys</b> <b>(brlapi_handle_t</b> <b>*</b> <b>handle)</b>
   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi__acceptKeyRanges</b> <b>(brlapi_handle_t</b> <b>*</b> <b>handle,</b> <b>const</b> <b>brlapi_range_t</b> <b>ranges[],</b> <b>unsigned</b>
       <b>int</b> <b>count)</b>
   <b>int</b>   <b>BRLAPI_STDCALL</b>   <b>brlapi__acceptKeys</b>   <b>(brlapi_handle_t</b>   <b>*</b>   <b>handle,</b>   <b>brlapi_rangeType_t</b>  <b>type,</b>  <b>const</b>
       <b>brlapi_keyCode_t</b> <b>keys[],</b> <b>unsigned</b> <b>int</b> <b>count)</b>
   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi__ignoreAllKeys</b> <b>(brlapi_handle_t</b> <b>*</b> <b>handle)</b>
   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi__ignoreKeyRanges</b> <b>(brlapi_handle_t</b> <b>*</b> <b>handle,</b> <b>const</b> <b>brlapi_range_t</b> <b>ranges[],</b> <b>unsigned</b>
       <b>int</b> <b>count)</b>
   <b>int</b>  <b>BRLAPI_STDCALL</b>  <b>brlapi__ignoreKeys</b>   <b>(brlapi_handle_t</b>   <b>*</b>   <b>handle,</b>   <b>brlapi_rangeType_t</b>   <b>type,</b>   <b>const</b>
       <b>brlapi_keyCode_t</b> <b>keys[],</b> <b>unsigned</b> <b>int</b> <b>count)</b>
   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi__readKey</b> <b>(brlapi_handle_t</b> <b>*</b> <b>handle,</b> <b>int</b> <b>wait,</b> <b>brlapi_keyCode_t</b> <b>*</b> <b>code)</b>
   <b>int</b>  <b>BRLAPI_STDCALL</b>  <b>brlapi__readKeyWithTimeout</b> <b>(brlapi_handle_t</b> <b>*</b> <b>handle,</b> <b>int</b> <b>timeout_ms,</b> <b>brlapi_keyCode_t</b> <b>*</b>
       <b>code)</b>
   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi_acceptKeyRanges</b> <b>(const</b> <b>brlapi_range_t</b> <b>ranges[],</b> <b>unsigned</b> <b>int</b> <b>count)</b>
       Accept some key presses from the braille keyboard

       This function asks the server to return the provided key ranges (inclusive) to the application,  and  not
       give them to <u>brltty</u>.

       The sets of such keys are reset on brlapi_enterTtyMode call.

       <b>Parameters</b>
           <u>ranges</u> key ranges, which are inclusive, see <b>Types</b> <b>and</b> <b>Defines</b> <b>for</b><u>BrlAPI</u> <b>Key</b> <b>Codes</b> <u>about</u> <u>key</u> <u>ranges</u>
           <u>count</u> <u>number</u> <u>of</u> <u>ranges</u>

   <b>int</b>  <b>BRLAPI_STDCALL</b>  <b>brlapi_acceptKeys</b>  <b>(brlapi_rangeType_t</b> <b>type,</b> <b>const</b> <b>brlapi_keyCode_t</b> <b>keys[],</b> <b>unsigned</b> <b>int</b>
       <b>count)</b>
       Accept some key presses from the braille keyboard

       This function asks the server to give the provided keys to the application, and not give them to <u>brltty</u>.

       The sets of such keys are reset on brlapi_enterTtyMode call.

       <b>Parameters</b>
           <u>type</u> type of keys to be ignored
           <u>keys</u> array of keys to be ignored
           <u>count</u> number of keys

   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi_describeKeyCode</b> <b>(brlapi_keyCode_t</b> <b>code,</b> <b>brlapi_describedKeyCode_t</b> <b>*</b> <b>description)</b>
       Describe the components of a key code.

       <b>Parameters</b>
           <u>code</u> the keycode to be described
           <u>description</u> pointer to the structure that receives the description

       <b>Returns</b>
           0 on success, -1 on error

   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi_expandKeyCode</b> <b>(brlapi_keyCode_t</b> <b>code,</b> <b>brlapi_expandedKeyCode_t</b> <b>*</b> <b>expansion)</b>
       Expand the components of a key code

       <b>Parameters</b>
           <u>code</u> the key code to be expanded
           <u>expansion</u> pointer to the structure that receives the components

       <b>Returns</b>
           0 on success, -1 on error

   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi_ignoreKeyRanges</b> <b>(const</b> <b>brlapi_range_t</b> <b>ranges[],</b> <b>unsigned</b> <b>int</b> <b>count)</b>
       Ignore some key presses from the braille keyboard

       This function asks the server to give the provided key ranges to <u>brltty</u>, rather than  returning  them  to
       the application via <b>brlapi_readKey()</b>.

       The sets of such keys are reset on brlapi_enterTtyMode call.

       <b>Parameters</b>
           <u>ranges</u> key ranges, which are inclusive, see <b>Types</b> <b>and</b> <b>Defines</b> <b>for</b><u>BrlAPI</u> <b>Key</b> <b>Codes</b> <u>about</u> <u>key</u> <u>ranges</u>
           <u>count</u> <u>number</u> <u>of</u> <u>ranges</u>

   <b>int</b>  <b>BRLAPI_STDCALL</b>  <b>brlapi_ignoreKeys</b>  <b>(brlapi_rangeType_t</b> <b>type,</b> <b>const</b> <b>brlapi_keyCode_t</b> <b>keys[],</b> <b>unsigned</b> <b>int</b>
       <b>count)</b>
       Ignore some key presses from the braille keyboard

       This function asks the server to give the provided keys to <u>brltty</u>, rather  than  returning  them  to  the
       application via <b>brlapi_readKey()</b>.

       The sets of such keys are reset on brlapi_enterTtyMode call.

       <b>Parameters</b>
           <u>type</u> type of keys to be ignored
           <u>keys</u> array of keys to be ignored
           <u>count</u> number of keys

   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi_readKey</b> <b>(int</b> <b>wait,</b> <b>brlapi_keyCode_t</b> <b>*</b> <b>code)</b>
       Read a key from the braille keyboard

       This function returns one key press's code.

       If  NULL  or  ''  was  given  to <b>brlapi_enterTtyMode()</b>, a <u>brltty</u> command is returned, as described in the
       documentation for <b>brlapi_keyCode_t</b> . It is hence pretty driver-independent, and should be used by default
       when no other option is possible.

       By default, all commands but those which restart drivers and switch virtual terminals are returned to the
       application and not to brltty. If the application doesn't want to see some command events, it should call
       <b>brlapi_ignoreKeys()</b>

       If a driver name was given to <b>brlapi_enterTtyMode()</b>, a driver-specific keycode is returned, as  specified
       by  the  braille  driver,  usually  in  &lt;brltty/brldefs-xy&gt;  where  xy is the driver's code. It generally
       corresponds to the very code that the terminal  tells  to  the  driver.  This  should  only  be  used  by
       applications  which  are  dedicated  to  a particular braille terminal. Hence, checking the terminal type
       thanks to a call to <b>brlapi_getDriverName()</b> before getting tty control is a pretty good idea.

       By default, all the keypresses will be passed to  the  client,  none  will  go  through  brltty,  so  the
       application will have to handle console switching itself for instance.

       <b>Parameters</b>
           <u>wait</u>  tells whether the call should block until a key is pressed (1) or should only probe key presses
           (0);
           <u>code</u> holds the key code if a key press is indeed read.

       <b>Returns</b>
           -1 on error or signal interrupt and *code is then undefined, 0 if block was 0 and no key was  pressed
           so far, or 1 and *code holds the key code.

       Programming hints:

       If  your  application  is  only driven by braille command keypresses, you can just call brlapi_readKey(1,
       &amp;code) so that it keeps blocking, waiting for keypresses.

       Else,  you'll  probably  want  to  use  the  file  descriptor  returned  by  <b>brlapi_openConnection()</b>   or
       <b>brlapi_getFileDescriptor()</b> in your 'big polling loop'. For instance:

       • in a select() loop, just add it to the readfds and exceptfds file descriptor sets;

       • in  a  gtk or atspi application, use g_io_add_watch(fileDescriptor, G_IO_IN|G_IO_ERR|G_IO_HUP, f, data)
         for adding a callback called f;

       • in    an    Xt/Xaw/motif-based    application,    use    XtAppAddInput(app_context,     fileDescriptor,
         XtInputReadMask|XtInputExceptMask, f, data)

       • etc.

       and then, when you detect inbound trafic on the file descriptor, do something like this:

       while (brlapi_readKey(0, &amp;code) { // process keycode code // ... }

       The  while  loop  is  needed  for  processing  <u>all</u>  pending key presses, else some of them may be left in
       libbrlapi's internal key buffer and you wouldn't get them immediately.

       <b>Note</b>
           If the read is interrupted by a signal or by a parameter change notification,  <b>brlapi_readKey()</b>  will
           return -1, brlapi_errno will be BRLAPI_ERROR_LIBCERR and errno will be EINTR.

   <b>int</b> <b>BRLAPI_STDCALL</b> <b>brlapi_readKeyWithTimeout</b> <b>(int</b> <b>timeout_ms,</b> <b>brlapi_keyCode_t</b> <b>*</b> <b>code)</b>
       Read a key from the braille keyboard, unless a timeout expires

       This function works like brlapi_readKey, except that parameter <u>wait</u> is replaced by a <u>timeout_ms</u> parameter

       <b>Parameters</b>
           <u>timeout_ms</u> specifies how long the function should wait for a keypress.
           <u>code</u> holds the key code if a key press is indeed read.

       <b>Returns</b>
           -1  on error, signal interrupt or parameter change notification and *code is then undefined, 0 if the
           timeout expired and no key was pressed, or 1 and *code holds the key code.

       If the timeout expires without any key being pressed, 0 is returned.

       If timeout_ms is set to 0, this function looks for key events that have been already received,  but  does
       not wait at all if no event was received.

       If  timeout_ms  is  set  to  a negative value, this function behaves like brlapi_readKey, i.e. it uses an
       infinite timeout.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for BrlAPI from the source code.

BrlAPI                                             Version 0.8                                    <u><a href="../man3/brlapi_keys.3.html">brlapi_keys</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>