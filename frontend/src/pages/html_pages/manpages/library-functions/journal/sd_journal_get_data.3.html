<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_journal_get_data, sd_journal_enumerate_data, sd_journal_enumerate_available_data,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_journal_get_data, sd_journal_enumerate_data, sd_journal_enumerate_available_data,
       sd_journal_restart_data, SD_JOURNAL_FOREACH_DATA, sd_journal_set_data_threshold,
       sd_journal_get_data_threshold - Read data fields from the current journal entry

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-journal.h&gt;</b>

       <b>int</b> <b>sd_journal_get_data(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>field</u><b>,</b> <b>const</b> <b>void</b> <b>**</b><u>data</u><b>,</b> <b>size_t</b> <b>*</b><u>length</u><b>);</b>

       <b>int</b> <b>sd_journal_enumerate_data(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>const</b> <b>void</b> <b>**</b><u>data</u><b>,</b> <b>size_t</b> <b>*</b><u>length</u><b>);</b>

       <b>int</b> <b>sd_journal_enumerate_available_data(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>const</b> <b>void</b> <b>**</b><u>data</u><b>,</b> <b>size_t</b> <b>*</b><u>length</u><b>);</b>

       <b>void</b> <b>sd_journal_restart_data(sd_journal</b> <b>*</b><u>j</u><b>);</b>

       <b>SD_JOURNAL_FOREACH_DATA(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>data</u><b>,</b> <b>size_t</b> <u>length</u><b>);</b>

       <b>int</b> <b>sd_journal_set_data_threshold(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>size_t</b> <u>sz</u><b>);</b>

       <b>int</b> <b>sd_journal_get_data_threshold(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>size_t</b> <b>*</b><u>sz</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_journal_get_data()</b> gets the data object associated with a specific field from the current journal
       entry. It takes four arguments: the journal context object, a string with the field name to request, plus
       a pair of pointers to pointer/size variables where the data object and its size shall be stored in. The
       field name should be an entry field name. Well-known field names are listed in <b><a href="../man7/systemd.journal-fields.7.html">systemd.journal-fields</a></b>(7),
       but any field can be specified. The returned data is in a read-only memory map and is only valid until
       the next invocation of <b>sd_journal_get_data()</b>, <b>sd_journal_enumerate_data()</b>,
       <b>sd_journal_enumerate_available_data()</b>, or when the read pointer is altered. Note that the data returned
       will be prefixed with the field name and "=". Also note that, by default, data fields larger than 64K
       might get truncated to 64K. This threshold may be changed and turned off with
       <b>sd_journal_set_data_threshold()</b> (see below).

       <b>sd_journal_enumerate_data()</b> may be used to iterate through all fields of the current entry. On each
       invocation the data for the next field is returned. The order of these fields is not defined. The data
       returned is in the same format as with <b>sd_journal_get_data()</b> and also follows the same life-time
       semantics.

       <b>sd_journal_enumerate_available_data()</b> is similar to <b>sd_journal_enumerate_data()</b>, but silently skips any
       fields which may be valid, but are too large or not supported by current implementation.

       <b>sd_journal_restart_data()</b> resets the data enumeration index to the beginning of the entry. The next
       invocation of <b>sd_journal_enumerate_data()</b> will return the first field of the entry again.

       Note that the <b>SD_JOURNAL_FOREACH_DATA()</b> macro may be used as a handy wrapper around
       <b>sd_journal_restart_data()</b> and <b>sd_journal_enumerate_available_data()</b>.

       Note that these functions will not work before <b><a href="../man3/sd_journal_next.3.html">sd_journal_next</a></b>(3) (or related call) has been called at
       least once, in order to position the read pointer at a valid entry.

       <b>sd_journal_set_data_threshold()</b> may be used to change the data field size threshold for data returned by
       <b>sd_journal_get_data()</b>, <b>sd_journal_enumerate_data()</b> and <b>sd_journal_enumerate_unique()</b>. This threshold is a
       hint only: it indicates that the client program is interested only in the initial parts of the data
       fields, up to the threshold in size â€” but the library might still return larger data objects. That means
       applications should not rely exclusively on this setting to limit the size of the data fields returned,
       but need to apply an explicit size limit on the returned data as well. This threshold defaults to 64K by
       default. To retrieve the complete data fields this threshold should be turned off by setting it to 0, so
       that the library always returns the complete data objects. It is recommended to set this threshold as low
       as possible since this relieves the library from having to decompress large compressed data objects in
       full.

       <b>sd_journal_get_data_threshold()</b> returns the currently configured data field size threshold.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>sd_journal_get_data()</b> returns 0 on success or a negative errno-style error code.
       <b>sd_journal_enumerate_data()</b> and <b>sd_journal_enumerate_available_data()</b> return a positive integer if the
       next field has been read, 0 when no more fields remain, or a negative errno-style error code.
       <b>sd_journal_restart_data()</b> does not return anything.  <b>sd_journal_set_data_threshold()</b> and
       <b>sd_journal_get_threshold()</b> return 0 on success or a negative errno-style error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-EINVAL</b>
           One of the required parameters is <b>NULL</b> or invalid.

           Added in version 246.

       <b>-ECHILD</b>
           The journal object was created in a different process, library or module instance.

           Added in version 246.

       <b>-EADDRNOTAVAIL</b>
           The read pointer is not positioned at a valid entry; <b><a href="../man3/sd_journal_next.3.html">sd_journal_next</a></b>(3) or a related call has not
           been called at least once.

           Added in version 246.

       <b>-ENOENT</b>
           The current entry does not include the specified field.

           Added in version 246.

       <b>-ENOMEM</b>
           Memory allocation failed.

           Added in version 246.

       <b>-ENOBUFS</b>
           A compressed entry is too large.

           Added in version 246.

       <b>-E2BIG</b>
           The data field is too large for this computer architecture (e.g. above 4 GB on a 32-bit
           architecture).

           Added in version 246.

       <b>-EPROTONOSUPPORT</b>
           The journal is compressed with an unsupported method or the journal uses an unsupported feature.

           Added in version 246.

       <b>-EBADMSG</b>
           The journal is corrupted (possibly just the entry being iterated over).

           Added in version 246.

       <b>-EIO</b>
           An I/O error was reported by the kernel.

           Added in version 246.

</pre><h4><b>NOTES</b></h4><pre>
       All functions listed here are thread-agnostic and only a single specific thread may operate on a given
       object during its entire lifetime. It is safe to allocate multiple independent objects and use each from
       a specific thread in parallel. However, it is not safe to allocate such an object in one thread, and
       operate or free it from any other, even if locking is used to ensure these threads do not operate on it
       at the very same time.

       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

</pre><h4><b>EXAMPLES</b></h4><pre>
       See <b><a href="../man3/sd_journal_next.3.html">sd_journal_next</a></b>(3) for a complete example how to use <b>sd_journal_get_data()</b>.

       Use the <b>SD_JOURNAL_FOREACH_DATA()</b> macro to iterate through all fields of the current journal entry:

           ...
           int print_fields(sd_journal *j) {
             const void *data;
             size_t length;
             SD_JOURNAL_FOREACH_DATA(j, data, length)
               printf("%.*s\n", (int) length, data);
           }
           ...

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_journal_get_data()</b>, <b>sd_journal_enumerate_data()</b>, <b>sd_journal_restart_data()</b>, and
       <b>SD_JOURNAL_FOREACH_DATA()</b> were added in version 187.

       <b>sd_journal_set_data_threshold()</b> and <b>sd_journal_get_data_threshold()</b> were added in version 196.

       <b>sd_journal_enumerate_available_data()</b> was added in version 246.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man7/systemd.journal-fields.7.html">systemd.journal-fields</a></b>(7), <b><a href="../man3/sd-journal.3.html">sd-journal</a></b>(3), <b><a href="../man3/sd_journal_open.3.html">sd_journal_open</a></b>(3), <b><a href="../man3/sd_journal_next.3.html">sd_journal_next</a></b>(3),
       <b><a href="../man3/sd_journal_get_realtime_usec.3.html">sd_journal_get_realtime_usec</a></b>(3), <b><a href="../man3/sd_journal_query_unique.3.html">sd_journal_query_unique</a></b>(3)

systemd 257.7                                                                             <u><a href="../man3/SD_JOURNAL_GET_DATA.3.html">SD_JOURNAL_GET_DATA</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>