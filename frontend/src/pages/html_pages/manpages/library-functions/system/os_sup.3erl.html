<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>os_sup - Interface to OS System Messages</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       os_sup - Interface to OS System Messages

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>os_sup</u>  is a process providing a message passing service from the operating system to the error logger in
       the Erlang runtime system. It is part of the OS_Mon application, see <a href="../man7/os_mon.7.html">os_mon</a>(7). Available for Solaris and
       Windows.

       Messages received from the operating system results in an user defined callback  function  being  called.
       This  function  can do whatever filtering and formatting is necessary and then deploy any type of logging
       suitable for the user's application.

</pre><h4><b>SOLARIS</b> <b>OPERATION</b></h4><pre>
       The Solaris (SunOS 5.x) messages are retrieved from the syslog daemon, <u>syslogd</u>.

       Enabling the service includes actions which require root privileges, such as change of ownership and file
       privileges of an executable binary file, and creating a modified  copy  of  the  configuration  file  for
       <u>syslogd</u>. When <u>os_sup</u> is terminated, the service must be disabled, meaning the original configuration must
       be restored. Enabling/disabling can be done either outside or inside <u>os_sup</u>. See Configuration below.

   <b>Warning:</b>
       This  process  cannot  run in multiple instances on the same hardware. OS_Mon must be configured to start
       <u>os_sup</u> on one node only if two or more Erlang nodes execute on the same machine.

       The format of received events is not defined.

</pre><h4><b>WINDOWS</b> <b>OPERATION</b></h4><pre>
       The Windows messages are retrieved from the eventlog file.

       The <u>nteventlog</u> module is used to implement <u>os_sup</u>. See <a href="../man3erl/nteventlog.3erl.html">nteventlog</a>(3erl). Note that the start functions of
       <u>nteventlog</u> does not need to be used, as in this case the process is started automatically as part of  the
       OS_Mon supervision tree.

       OS messages are formatted as a tuple <u>{Time,</u> <u>Category,</u> <u>Facility,</u> <u>Severity,</u> <u>Message}</u>:

         <u>Time</u> <u>=</u> <u>{MegaSecs,</u> <u>Secs,</u> <u>MicroSecs}</u>:
           A time stamp as returned by the BIF <u>now()</u>.

         <u>Category</u> <u>=</u> <u>string()</u>:
           Usually  one  of  <u>"System"</u>, <u>"Application"</u> or <u>"Security"</u>. Note that the NT eventlog viewer has another
           notion of category, which in most cases is  totally  meaningless  and  therefore  not  imported  into
           Erlang. What is called a category here is one of the main three types of events occurring in a normal
           NT system.

         <u>Facility</u> <u>=</u> <u>string()</u>:
           The  source  of  the  message,  usually  the name of the application that generated it. This could be
           almost any string. When matching messages from  certain  applications,  the  version  number  of  the
           application may have to be accounted for. This is what the NT event viewer calls "source".

         <u>Severity</u> <u>=</u> <u>string()</u>:
           One  of  <u>"Error"</u>,  <u>"Warning"</u>,  <u>"Informational"</u>,  <u>"Audit_Success"</u>,  <u>"Audit_Faulure"</u>  or,  in case of a
           currently unknown Windows NT version <u>"Severity_Unknown"</u>.

         <u>Message</u> <u>=</u> <u>string()</u>:
           Formatted exactly as it would be in the NT eventlog viewer. Binary data is not imported into Erlang.

</pre><h4><b>CONFIGURATION</b></h4><pre>
         <u>os_sup_mfa</u> <u>=</u> <u>{Module,</u> <u>Function,</u> <u>Args}</u>:
           The callback function to use. <u>Module</u> and <u>Function</u> are atoms and <u>Args</u> is a list of terms. When  an  OS
           message <u>Msg</u> is received, this function is called as <u>apply(Module,</u> <u>Function,</u> <u>[Msg</u> <u>|</u> <u>Args])</u>.

           Default  is  <u>{os_sup,</u>  <u>error_report,</u>  <u>[Tag]}</u>  which  will  send  the  event to the error logger using
           error_logger:error_report(Tag, Msg). <u>Tag</u> is the value of <u>os_sup_errortag</u>, see below.

         <u>os_sup_errortag</u> <u>=</u> <u>atom()</u>:
           This parameter defines the error report type used when messages are sent to error  logger  using  the
           default  callback  function. Default is <u>std_error</u>, which means the events are handled by the standard
           event handler.

         <u>os_sup_enable</u> <u>=</u> <u>bool()</u>:
           Solaris only. Defines if the service should be  enabled  (and  disabled)  inside  (<u>true</u>)  or  outside
           (<u>false</u>)  <u>os_sup</u>.  For  backwards compatibility reasons, the default is <u>true</u>. The recommended value is
           <u>false</u>, as the Erlang emulator should normally not be run with <u>root</u> privileges,  as  is  required  for
           enabling the service.

         <u>os_sup_own</u> <u>=</u> <u>string()</u>:
           Solaris  only.  Defines  the  directory  which  contains  the  backup  copy  and  the Erlang specific
           configuration files for <u>syslogd</u>, and a named pipe to receive the messages from  <u>syslogd</u>.  Default  is
           <u>"<a href="file:/etc">/etc</a>"</u>.

         <u>os_sup_syslogconf</u> <u>=</u> <u>string()</u>:
           Solaris   only.   Defines   the  full  name  of  the  configuration  file  for  <u>syslogd</u>.  Default  is
           <u>"/etc/syslog.conf"</u>.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>enable()</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Res}</b>
       <b>enable(Dir,</b> <b>Conf)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Error}</b>

              Types:

                 Dir = Conf = Res = string()

              Enables the <u>os_sup</u> service. Needed on Solaris only.

              If the configuration parameter <u>os_sup_enable</u> is <u>false</u>, this function is  called  automatically  by
              <u>os_sup</u>, using the values of <u>os_sup_own</u> and <u>os_sup_syslogconf</u> as arguments.

              If  <u>os_sup_enable</u>  is  <u>true</u>,  this  function  must  be called <u>before</u> OS_Mon/<u>os_sup</u> is started. <u>Dir</u>
              defines the directory which contains the backup copy and the Erlang specific  configuration  files
              for  <u>syslogd</u>,  and  a  named  pipe  to receive the messages from <u>syslogd</u>. Defaults to <u>"<a href="file:/etc">/etc</a>"</u>. <u>Conf</u>
              defines the full name of the configuration file for <u>syslogd</u>. Default is <u>"/etc/syslog.conf"</u>.

              Results in a OS call to:

              &lt;PRIVDIR&gt;/bin/mod_syslog otp Dir Conf

              where <u>&lt;PRIVDIR&gt;</u> is the <u>priv</u> directory of OS_Mon, <u>code:priv_dir(os_mon)</u>.

              Returns <u>ok</u> if this yields the expected result <u>"0"</u>, and <u>{error,</u> <u>Res}</u> if it yields anything else.

          <b>Note:</b>
              This function requires root privileges to succeed.

       <b>disable()</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Res}</b>
       <b>disable(Dir,</b> <b>Conf)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Error}</b>

              Types:

                 Dir = Conf = Res = string()

              Disables the <u>os_sup</u> service. Needed on Solaris only.

              If the configuration parameter <u>os_sup_enable</u> is <u>false</u>, this function is  called  automatically  by
              <u>os_sup</u>, using the same arguments as when <u>enable/2</u> was called.

              If <u>os_sup_enable</u> is <u>true</u>, this function must be called <u>after</u> OS_Mon/<u>os_sup</u> is stopped. <u>Dir</u> defines
              the  directory  which  contains  the  backup  copy and the Erlang specific configuration files for
              <u>syslogd</u>, and a named pipe to receive the messages from <u>syslogd</u>. Defaults to <u>"<a href="file:/etc">/etc</a>"</u>.  <u>Conf</u>  defines
              the full name of the configuration file for <u>syslogd</u>. Default is <u>"/etc/syslog.conf"</u>.

              Results in a OS call to:

              &lt;PRIVDIR&gt;/bin/mod_syslog nootp Dir Conf

              where <u>&lt;PRIVDIR&gt;</u> is the <u>priv</u> directory of OS_Mon, <u>code:priv_dir(os_mon)</u>.

              Returns <u>ok</u> if this yields the expected result <u>"0"</u>, and <u>{error,</u> <u>Res}</u> if it yields anything else.

          <b>Note:</b>
              This function requires root privileges to succeed.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3erl/error_logger.3erl.html">error_logger</a>(3erl), <a href="../man3erl/os_mon.3erl.html">os_mon</a>(3erl)

       <u><a href="../man1M/syslogd.1M.html">syslogd</a>(1M)</u>, <u><a href="../man5/syslog.conf.5.html">syslog.conf</a>(5)</u> in the Solaris documentation.

Ericsson AB                                       os_mon 2.7.1                                      <u><a href="../man3erl/os_sup.3erl.html">os_sup</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>