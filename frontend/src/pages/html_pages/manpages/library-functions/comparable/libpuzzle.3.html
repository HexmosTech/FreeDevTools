<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>puzzle_init_cvec, puzzle_init_dvec, puzzle_fill_dvec_from_file, puzzle_fill_cvec_from_file,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpuzzle-dev">libpuzzle-dev_0.11-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       puzzle_init_cvec, puzzle_init_dvec, puzzle_fill_dvec_from_file, puzzle_fill_cvec_from_file,
       puzzle_fill_cvec_from_dvec, puzzle_free_cvec, puzzle_free_dvec, puzzle_init_compressed_cvec,
       puzzle_free_compressed_cvec, puzzle_compress_cvec, puzzle_uncompress_cvec,
       puzzle_vector_normalized_distance - compute comparable signatures of bitmap images

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;puzzle.h&gt;

       int puzzle_init_context(PuzzleContext *<u>context</u>);

       int puzzle_free_context(PuzzleContext *<u>context</u>);

       int puzzle_init_cvec(PuzzleContext *<u>context</u>, PuzzleCvec *<u>cvec</u>);

       int  puzzle_init_dvec(PuzzleContext *<u>context</u>, PuzzleDvec *<u>cvec</u>);

       void puzzle_fill_dvec_from_file(PuzzleContext *<u>context</u>, PuzzleDvec *<u>dvec</u>, const char *<u>file</u>);

       void puzzle_fill_cvec_from_file(PuzzleContext *<u>context</u>, PuzzleCvec *<u>cvec</u>, const char *<u>file</u>);

       void puzzle_fill_cvec_from_dvec(PuzzleContext *<u>context</u>, PuzzleCvec *<u>cvec</u>, const PuzzleDvec *<u>dvec</u>);

       void puzzle_free_cvec(PuzzleContext *<u>context</u>, PuzzleCvec *<u>cvec</u>);

       void puzzle_free_dvec(PuzzleContext *<u>context</u>, PuzzleDvec *<u>cvec</u>);

       void puzzle_init_compressed_cvec(PuzzleContext *<u>context</u>, PuzzleCompressedCvec *<u>compressed_cvec</u>);

       void puzzle_free_compressed_cvec(PuzzleContext *<u>context</u>, PuzzleCompressedCvec *<u>compressed_cvec</u>);

       int puzzle_compress_cvec(PuzzleContext *<u>context</u>, PuzzleCompressedCvec *<u>compressed_cvec</u>, const PuzzleCvec
       *<u>cvec</u>);

       int puzzle_uncompress_cvec(PuzzleContext *<u>context</u>, PuzzleCompressedCvec *<u>compressed_cvec</u>, PuzzleCvec
       *<u>const</u> <u>cvec</u>);

       double puzzle_vector_normalized_distance(PuzzleContext *<u>context</u>, const PuzzleCvec *<u>cvec1</u>, const
       PuzzleCvec *<u>cvec2</u>, const int <u>fix_for_texts</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The Puzzle library computes a signature out of a bitmap picture. Signatures are comparable and similar
       pictures have similar signatures.

       After a picture has been loaded and uncompressed, featureless parts of the image are skipped (autocrop),
       unless that step has been explicitly disabled, see <b><a href="../man3/puzzle_set.3.html">puzzle_set</a></b>(3)

</pre><h4><b>LIBPUZZLE</b> <b>CONTEXT</b></h4><pre>
       Every public function requires a <u>PuzzleContext</u> object, that stores every required tunables.

       Any application using libpuzzle should initialize a <u>PuzzleContext</u> object with <b>puzzle_init_context()</b> and
       free it after use with <b>puzzle_free_context()</b>

         PuzzleContext context;

         puzzle_init_context(&amp;context);
         [...]
         puzzle_free_context(&amp;context);

</pre><h4><b>DVEC</b> <b>AND</b> <b>CVEC</b> <b>VECTORS</b></h4><pre>
       The next step is to divide the cropped image into a grid and to compute the average intensity of soft-
       edged pixels in every block. The result is a <u>PuzzleDvec</u> object.

       <u>PuzzleDvec</u> objects should be initialized before use, with <b>puzzle_init_dvec()</b> and freed after use with
       <b>puzzle_free_dvec()</b>.

       The <u>PuzzleDvec</u> structure has two important fields: <u>vec</u> is the pointer to the first element of the array
       containing the average intensities, and <u>sizeof_compressed_vec</u> is the number of elements.

       <u>PuzzleDvec</u> objects are not comparable, so what you usually want is to transform these objects into
       <u>PuzzleCvec</u> objects.

       A <u>PuzzleCvec</u> object is a vector with relationships between adjacent blocks from a <u>PuzzleDvec</u> object.

       The <b>puzzle_fill_cvec_from_dvec()</b> fills a <u>PuzzleCvec</u> object from a <u>PuzzleDvec</u> object.

       But just like the other structure, <u>PuzzleCvec</u> objects must be initialized and freed with
       <b>puzzle_init_cvec()</b> and <b>puzzle_free_cvec()</b>.

       <u>PuzzleCvec</u> objects have a vector whoose first element is in the <u>vec</u> field, and the number of elements is
       in the <u>sizeof_vec</u> field.

</pre><h4><b>LOADING</b> <b>PICTURES</b></h4><pre>
       <u>PuzzleDvec</u> and <u>PuzzleCvec</u> objects can be computed from a bitmap picture file, with
       <b>puzzle_fill_dvec_from_file()</b> and <b>puzzle_fill_cvec_from_file()</b>.

       <u>GIF</u>, <u>PNG</u> and <u>JPEG</u> files formats are currently supported and automatically recognized.

       Here's a simple example that creates a <u>PuzzleCvec</u> objects out of a file.

         PuzzleContext context;
         PuzzleCvec cvec;

         puzzle_init_context(&amp;context);
         puzzle_init_cvec(&amp;context, &amp;cvec);
         puzzle_fill_cvec_from_file(&amp;context, &amp;cvec, "test-picture.jpg");
         [...]
         puzzle_free_cvec(&amp;context, &amp;cvec);
         puzzle_free_context(&amp;context);

</pre><h4><b>COMPARING</b> <b>VECTORS</b></h4><pre>
       In order to check whether two pictures are similar, you need to compare their <u>PuzzleCvec</u> signatures,
       using <b>puzzle_vector_normalized_distance()</b>.

       That function returns a distance, between 0.0 and 1.0. The lesser, the nearer.

       Tests on common pictures show that a normalized distance of 0.6 (also defined as
       <u>PUZZLE_CVEC_SIMILARITY_THRESHOLD</u>) means that both pictures are visually similar.

       If that threshold is not right for your set of pictures, you can experiment with
       <u>PUZZLE_CVEC_SIMILARITY_HIGH_THRESHOLD</u>, <u>PUZZLE_CVEC_SIMILARITY_LOW_THRESHOLD</u> and
       <u>PUZZLE_CVEC_SIMILARITY_LOWER_THRESHOLD</u> or with your own value.

       If the <u>fix_for_texts</u> of <b>puzzle_vector_normalized_distance()</b> is 1, a fix is applied to the computation in
       order to deal with bitmap pictures that contain text. That fix is recommended, as it allows using the
       same threshold for that kind of picture as for generic pictures.

       If <u>fix_for_texts</u> is <u>0</u>, that special way of computing the normalized distance is disabled.

         PuzzleContext context;
         PuzzleCvec cvec1, cvec2;
         double d;

         puzzle_init_context(&amp;context);
         puzzle_init_cvec(&amp;context, &amp;cvec1);
         puzzle_init_cvec(&amp;context, &amp;cvec2);
         puzzle_fill_cvec_from_file(&amp;context, &amp;cvec1, "test-picture-1.jpg");
         puzzle_fill_cvec_from_file(&amp;context, &amp;cvec2, "test-picture-2.jpg");
         d = puzzle_vector_normalized_distance(&amp;context, &amp;cvec1, &amp;cvec2, 1);
         if (d &lt; PUZZLE_CVEC_SIMILARITY_THRESHOLD) {
           puts("Pictures are similar");
         }
         puzzle_free_cvec(&amp;context, &amp;cvec2);
         puzzle_free_cvec(&amp;context, &amp;cvec1);
         puzzle_free_context(&amp;context);

</pre><h4><b>CVEC</b> <b>COMPRESSION</b></h4><pre>
       In order to reduce storage needs, <u>PuzzleCvec</u> objects can be compressed to 1/3 of their original size.

       <u>PuzzleCompressedCvec</u> structures hold the compressed data. Before and after use, these structures have to
       be passed to <b>puzzle_init_compressed_cvec()</b> and <b>puzzle_free_compressed_cvec()</b>.

       <b>puzzle_compress_cvec()</b> compresses a <u>PuzzleCvec</u> object into a <u>PuzzleCompressedCvec</u> object.

       And <b>puzzle_uncompress_cvec()</b> uncompresses a <u>PuzzleCompressedCvec</u> object into a <u>PuzzleCvec</u> object.

         PuzzleContext context;
         PuzzleCvec cvec;
         PuzzleCompressedCvec c_cvec;
         [...]
         puzzle_init_compressed_cvec(&amp;context, &amp;c_cvec);
         puzzle_compress_cvec(&amp;context, &amp;c_cvec, &amp;cvec);
         [...]
         puzzle_free_compressed_cvec(&amp;context, &amp;c_cvec);

       The <u>PuzzleCompressedCvec</u> structure has two important fields: <u>vec</u> that is a pointer to the first element
       of the compressed data, and <u>sizeof_compressed_vec</u> that contains the number of elements.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Functions return <u>0</u> on success, and <u>-1</u> if something went wrong.

</pre><h4><b>AUTHORS</b></h4><pre>
       Frank DENIS libpuzzle at pureftpd dot org

</pre><h4><b>ACKNOWLEDGMENTS</b></h4><pre>
       Xerox Research Center H. CHI WONG Marschall BERN David GOLDBERG Sameh SCHAFIK

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/puzzle_set.3.html">puzzle_set</a></b>(3), <b><a href="../man8/puzzle-diff.8.html">puzzle-diff</a></b>(8)

                                                                                  <u>debian::manpages::<a href="../man3/libpuzzle.3.html">libpuzzle</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>