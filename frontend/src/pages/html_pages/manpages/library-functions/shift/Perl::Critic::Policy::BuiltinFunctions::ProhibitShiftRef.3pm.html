<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perl::Critic::Policy::BuiltinFunctions::ProhibitShiftRef - Prohibit "\shift" in code</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libperl-critic-perl">libperl-critic-perl_1.156-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Perl::Critic::Policy::BuiltinFunctions::ProhibitShiftRef - Prohibit "\shift" in code

</pre><h4><b>AFFILIATION</b></h4><pre>
       This Policy is part of the core Perl::Critic distribution.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Prohibit the use of "\shift", as it is associated with bugs in Perl and its modules.

   <b>Background</b>
       Often, "\shift" is used to create references that act much like an alias.  By creating an "alias" that is
       named, the code becomes more readable.  For example,

           sub routine {
               my $longstring = \shift;
               print $$longstring;
           }

       is more readable than

           sub routine {
               print $_[0];    # longstring
           }

       Unfortunately, this added readability brings with it new and exciting issues, detailed in the next
       section.

   <b>Problems</b> <b>with</b> <b>"\shift"</b>
       By avoiding "\shift", several issues in Perl can be averted, including:

       Memory leak since Perl 5.22
           Issue  #126676 was introduced in Perl 5.21.4 and is triggered when "\shift" is used.  The bug has not
           been resolved as of Perl 5.28.

           In short, the bug causes the ref counter for the aliased variable to be incremented when running  the
           subroutine,  but  it  is  not  subsequently decremented after the subroutine returns.  In addition to
           leaking memory, this issue can also delay the cleanup of objects until Global Destruction, which  can
           cause further issues.

           For more information, see &lt;https://rt.perl.org/Public/Bug/Display.html?id=126676&gt;.

       Devel::Cover crashes
           A  separate,  longstanding  issue in Devel::Cover (since at least 1.21), causes test code to segfault
           occasionally.  This prevents the coverage data from being written out, resulting in bad metrics.

           The bug itself isn't actually caused by "\shift", instead it shows up in code like the following:

               sub myopen {
                   open ${ \$_[0] }, "&gt;test";
               }

           However, this code would rarely be seen in production.  It would more likely manifest with  "\shift",
           as it does below:

               sub myopen {
                   my $fh = \shift;
                   open $$fh, "&gt;test";
               }

           So while "\shift" isn't the cause, it's often associated with the problem.

           For more information, see &lt;https://github.com/pjcj/Devel--Cover/issues/125&gt;.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       This Policy is not configurable except for the standard options.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       &lt;https://rt.perl.org/Public/Bug/Display.html?id=126676&gt;

       &lt;https://github.com/pjcj/Devel--Cover/issues/125&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Chris Lindee &lt;<a href="mailto:chris.lindee@cpanel.net">chris.lindee@cpanel.net</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2018 cPanel, L.L.C.

       All rights reserved.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

perl v5.40.0                                       2024-10-28             <u>Perl::Critic::<a href="../man3pm/P...rohibitShiftRef.3pm.html">P...rohibitShiftRef</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>