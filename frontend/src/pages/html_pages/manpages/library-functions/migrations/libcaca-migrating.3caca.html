<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libcaca-migrating - Migrating from libcaca 0.x to the 1.0 API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcaca-dev">libcaca-dev_0.99.beta20-5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libcaca-migrating - Migrating from libcaca 0.x to the 1.0 API

       This section will guide you through the migration of a <u>libcaca</u> 0.x application to the latest API version.

</pre><h4><b>Overview</b></h4><pre>
       The most important change in the 1.0 API of <u>libcaca</u> is the object-oriented design. See these two examples
       for a rough idea of what changed:

       #include &lt;caca.h&gt;

       /* libcaca program - 0.x API */
       int main(void)
       {
           /* Initialise libcaca */
           caca_init();
           /* Set window title */
           caca_set_window_title("Window");
           /* Choose drawing colours */
           caca_set_color(CACA_COLOR_BLACK,
                          CACA_COLOR_WHITE);
           /* Draw a string at (0, 0) */
           caca_putstr(0, 0, "Hello world!");
           /* Refresh display */
           caca_refresh();
           /* Wait for a key press event */
           caca_wait_event(CACA_EVENT_KEY_PRESS);
           /* Clean up library */
           caca_end();

           return 0;
       }

       #include &lt;caca.h&gt;

       /* libcaca program - 1.0 API */
       int main(void)
       {
           /* Initialise libcaca */
           caca_canvas_t *cv;
           caca_display_t *dp;
           dp = caca_create_display(NULL);
           cv = caca_get_canvas(dp);
           /* Set window title */
           caca_set_display_title(dp, "Window");
           /* Choose drawing colours */
           caca_set_color_ansi(cv, CACA_BLACK,
                                   CACA_WHITE);
           /* Draw a string at (0, 0) */
           caca_put_str(cv, 0, 0, "Hello world!");
           /* Refresh display */
           caca_refresh_display();
           /* Wait for a key press event */
           caca_get_event(dp, CACA_EVENT_KEY_PRESS,
                          NULL, -1);
           /* Clean up library */
           caca_free_display(dp);

           return 0;
       }

       Note the following important things:

       • Most functions now take an object handle as their first argument.

</pre><h4><b>Migration</b> <b>strategy</b></h4><pre>
       You have two ways to migrate your application to use <u>libcaca</u> 1.x:

       • Port your code using the function equivalence list. This is the preferred way because new functions are
         thread safe and offer much more features to both the programmer and the end user.

       • Use the legacy compatibility layer.

       Using the compatibility layer is as easy as adding the following three lines:

       #include &lt;caca.h&gt;

       /* libcaca program - 0.x API */
       ...

       #include &lt;caca.h&gt;
       #ifdef CACA_API_VERSION_1
       #   include &lt;caca0.h&gt;
       #endif

       /* libcaca program - 0.x API */
       ...

       The modified code is guaranteed to build both with <u>libcaca</u> 0.x and <u>libcaca</u> 1.0.

</pre><h4><b>Function</b> <b>equivalence</b> <b>list</b></h4><pre>
   <b>Basic</b> <b>functions</b>
       • <b>caca_init()</b>:  use <b>caca_create_canvas()</b> to create a <u>libcaca</u> canvas, followed by <b>caca_create_display()</b> to
         attach a <u>libcaca</u> display to it. Alternatively, <b>caca_create_display()</b> with a NULL argument will create a
         canvas automatically.

       • <b>caca_set_delay()</b>: use <b>caca_set_display_time()</b>.

       • <b>caca_get_feature()</b>: deprecated.

       • <b>caca_set_feature()</b>:   deprecated,   see   <b>caca_set_dither_antialias()</b>,   <b>caca_set_dither_color()</b>    and
         caca_set_dither_mode() instead.

       • <b>caca_get_feature_name()</b>:  deprecated, see caca_get_dither_mode_list(), <b>caca_get_dither_antialias_list()</b>
         and <b>caca_get_dither_color_list()</b> instead.

       • <b>caca_get_rendertime()</b>: use <b>caca_get_display_time()</b>.

       • <b>caca_get_width()</b>: use <b>caca_get_canvas_width()</b>.

       • <b>caca_get_height()</b>: use <b>caca_get_canvas_height()</b>.

       • <b>caca_set_window_title()</b>: use <b>caca_set_display_title()</b>.

       • <b>caca_get_window_width()</b>: use <b>caca_get_display_width()</b>.

       • <b>caca_get_window_height()</b>: use <b>caca_get_display_height()</b>.

       • <b>caca_refresh()</b>: use <b>caca_refresh_display()</b>.

       • <b>caca_end()</b>: use <b>caca_free_display()</b> to detach the <u>libcaca</u> display, followed  by  <b>caca_free_canvas()</b>  to
         free  the underlying <u>libcaca</u> canvas. Alternatively, if the canvas was created by <b>caca_create_display()</b>,
         it will be automatically destroyed by <b>caca_free_display()</b>.

   <b>Event</b> <b>handling</b>
       • <b>caca_get_event():</b> <b>unchanged,</b> <b>but</b> <b>the</b> <b>event</b> <b>information</b> <b>retrieval</b> <b>changed</b> <b>a</b> <b>lot.</b>

       • <b>caca_wait_event()</b>: use <b>caca_get_event()</b> with a timeout argument of <b>-1</b>.

       • <b>caca_get_mouse_x():</b> <b>unchanged.</b>

       • <b>caca_get_mouse_y():</b> <b>unchanged.</b>

   <b>Character</b> <b>printing</b>
       • <b>caca_set_color()</b>: use <b>caca_set_color_ansi()</b> or <b>caca_set_color_argb()</b>.

       • <b>caca_get_fg_color()</b>: use <b>caca_get_attr()</b>.

       • <b>caca_get_bg_color()</b>: use <b>caca_get_attr()</b>.

       • <b>caca_get_color_name()</b>: this function is now deprecated due to major uselessness.

       • <b>caca_putchar()</b>: use <b>caca_put_char()</b>.

       • <b>caca_putstr()</b>: use <b>caca_put_str()</b>.

       • <b>caca_printf():</b> <b>unchanged.</b>

       • <b>caca_clear()</b>: use <b>caca_clear_canvas()</b>.

   <b>Primitives</b> <b>drawing</b>
       These functions are almost unchanged, except for Unicode support and the fact that  they  now  act  on  a
       given canvas.

       • <b>caca_draw_line():</b> <b>unchanged.</b>

       • <b>caca_draw_polyline():</b> <b>unchanged.</b>

       • <b>caca_draw_thin_line():</b> <b>unchanged.</b>

       • <b>caca_draw_thin_polyline():</b> <b>unchanged.</b>

       • <b>caca_draw_circle():</b> <b>unchanged.</b>

       • <b>caca_draw_ellipse():</b> <b>unchanged.</b>

       • <b>caca_draw_thin_ellipse():</b> <b>unchanged.</b>

       • <b>caca_fill_ellipse():</b> <b>unchanged.</b>

       • <b>caca_draw_box():</b>  <b>unchanged,</b>  <b>but</b>  <b>the</b>  <b>argument</b>  <b>meaning</b>  <b>changed</b>  <b>(width</b> <b>and</b> <b>height</b> <b>instead</b> <b>of</b> <b>corner</b>
         <b>coordinates).</b>

       • <b>caca_draw_thin_box():</b> <b>use</b> <b>caca_draw_thin_box()</b> <b>or</b>  <b>caca_draw_cp437_box(),</b>  <b>also</b>  <b>the</b>  <b>argument</b>  <b>meaning</b>
         <b>changed</b> <b>(width</b> <b>and</b> <b>height</b> <b>instead</b> <b>of</b> <b>corner</b> <b>coordinates).</b>

       • <b>caca_fill_box():</b>  <b>unchanged,</b>  <b>but</b>  <b>the</b>  <b>argument</b>  <b>meaning</b>  <b>changed</b>  <b>(width</b> <b>and</b> <b>height</b> <b>instead</b> <b>of</b> <b>corner</b>
         <b>coordinates).</b>

       • <b>caca_draw_triangle():</b> <b>unchanged.</b>

       • <b>caca_draw_thin_triangle():</b> <b>unchanged.</b>

       • <b>caca_fill_triangle():</b> <b>unchanged.</b>

   <b>Mathematical</b> <b>functions</b>
       • <b>caca_rand()</b>: unchanged, but the second argument is different, make sure you take that into account.

       • <b>caca_sqrt()</b>: this function is now deprecated, use your system's <b>sqrt()</b> call instead.

   <b>Sprite</b> <b>handling</b>
       The newly introduced canvases can have several frames. Sprites are hence completely deprecated.

       • <b>caca_load_sprite()</b>: use caca_import_file().

       • <b>caca_get_sprite_frames()</b>: use <b>caca_get_frame_count()</b>.

       • <b>caca_get_sprite_width()</b>: use <b>caca_get_canvas_width()</b>.

       • <b>caca_get_sprite_height()</b>: use <b>caca_get_canvas_height()</b>.

       • <b>caca_get_sprite_dx()</b>: use <b>caca_get_canvas_handle_x()</b>.

       • <b>caca_get_sprite_dy()</b>: use <b>caca_get_canvas_handle_y()</b>.

       • <b>caca_draw_sprite()</b>: use <b>caca_set_frame()</b> and <b>caca_blit()</b>.

       • <b>caca_free_sprite()</b>: use <b>caca_free_canvas()</b>.

   <b>Bitmap</b> <b>handling</b>
       Bitmaps have been renamed to dithers, because these objects do not in fact store any  pixels,  they  just
       have information on how bitmaps will be dithered.

       • <b>caca_create_bitmap()</b>: use <b>caca_create_dither()</b>.

       • <b>caca_set_bitmap_palette()</b>: use <b>caca_set_dither_palette()</b>.

       • <b>caca_draw_bitmap()</b>: use <b>caca_dither_bitmap()</b>.

       • <b>caca_free_bitmap()</b>: use <b>caca_free_dither()</b>.

</pre><h4><b>Compilation</b></h4><pre>
       The caca-config utility is deprecated in favour of the standard pkg-config interface:

       gcc -c foobar.c -o foobar.o `pkg-config --cflags caca`
       gcc foobar.o -o foobar `pkg-config --libs caca`

       caca-config is still provided as a convenience tool but may be removed in the future.

libcaca                                        Version 0.99.beta20                      <u><a href="../man3caca/libcaca-migrating.3caca.html">libcaca-migrating</a></u>(3caca)
</pre>
 </div>
</div></section>
</div>
</body>
</html>