<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_pid_get_owner_uid, sd_pid_get_session, sd_pid_get_user_unit, sd_pid_get_unit, sd_pid_get_machine_name,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_pid_get_owner_uid, sd_pid_get_session, sd_pid_get_user_unit, sd_pid_get_unit, sd_pid_get_machine_name,
       sd_pid_get_slice, sd_pid_get_user_slice, sd_pid_get_cgroup, sd_pidfd_get_owner_uid, sd_pidfd_get_session,
       sd_pidfd_get_user_unit, sd_pidfd_get_unit, sd_pidfd_get_machine_name, sd_pidfd_get_slice,
       sd_pidfd_get_user_slice, sd_pidfd_get_cgroup, sd_peer_get_owner_uid, sd_peer_get_session,
       sd_peer_get_user_unit, sd_peer_get_unit, sd_peer_get_machine_name, sd_peer_get_slice,
       sd_peer_get_user_slice, sd_peer_get_cgroup - Determine the owner uid of the user unit or session, or the
       session, user unit, system unit, container/VM or slice that a specific PID or socket peer belongs to

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-login.h&gt;</b>

       <b>int</b> <b>sd_pid_get_owner_uid(pid_t</b> <u>pid</u><b>,</b> <b>uid_t</b> <b>*</b><u>uid</u><b>);</b>

       <b>int</b> <b>sd_pid_get_session(pid_t</b> <u>pid</u><b>,</b> <b>char</b> <b>**</b><u>session</u><b>);</b>

       <b>int</b> <b>sd_pid_get_user_unit(pid_t</b> <u>pid</u><b>,</b> <b>char</b> <b>**</b><u>unit</u><b>);</b>

       <b>int</b> <b>sd_pid_get_unit(pid_t</b> <u>pid</u><b>,</b> <b>char</b> <b>**</b><u>unit</u><b>);</b>

       <b>int</b> <b>sd_pid_get_machine_name(pid_t</b> <u>pid</u><b>,</b> <b>char</b> <b>**</b><u>name</u><b>);</b>

       <b>int</b> <b>sd_pid_get_slice(pid_t</b> <u>pid</u><b>,</b> <b>char</b> <b>**</b><u>slice</u><b>);</b>

       <b>int</b> <b>sd_pid_get_user_slice(pid_t</b> <u>pid</u><b>,</b> <b>char</b> <b>**</b><u>slice</u><b>);</b>

       <b>int</b> <b>sd_pid_get_cgroup(pid_t</b> <u>pid</u><b>,</b> <b>char</b> <b>**</b><u>cgroup</u><b>);</b>

       <b>int</b> <b>sd_pidfd_get_owner_uid(int</b> <u>pidfd</u><b>,</b> <b>uid_t</b> <b>*</b><u>uid</u><b>);</b>

       <b>int</b> <b>sd_pidfd_get_session(int</b> <u>pidfd</u><b>,</b> <b>char</b> <b>**</b><u>session</u><b>);</b>

       <b>int</b> <b>sd_pidfd_get_user_unit(int</b> <u>pidfd</u><b>,</b> <b>char</b> <b>**</b><u>unit</u><b>);</b>

       <b>int</b> <b>sd_pidfd_get_unit(int</b> <u>pidfd</u><b>,</b> <b>char</b> <b>**</b><u>unit</u><b>);</b>

       <b>int</b> <b>sd_pidfd_get_machine_name(int</b> <u>pidfd</u><b>,</b> <b>char</b> <b>**</b><u>name</u><b>);</b>

       <b>int</b> <b>sd_pidfd_get_slice(int</b> <u>pidfd</u><b>,</b> <b>char</b> <b>**</b><u>slice</u><b>);</b>

       <b>int</b> <b>sd_pidfd_get_user_slice(int</b> <u>pidfd</u><b>,</b> <b>char</b> <b>**</b><u>slice</u><b>);</b>

       <b>int</b> <b>sd_pidfd_get_cgroup(int</b> <u>pidfd</u><b>,</b> <b>char</b> <b>**</b><u>cgroup</u><b>);</b>

       <b>int</b> <b>sd_peer_get_owner_uid(int</b> <u>fd</u><b>,</b> <b>uid_t</b> <b>*</b><u>uid</u><b>);</b>

       <b>int</b> <b>sd_peer_get_session(int</b> <u>fd</u><b>,</b> <b>char</b> <b>**</b><u>session</u><b>);</b>

       <b>int</b> <b>sd_peer_get_user_unit(int</b> <u>fd</u><b>,</b> <b>char</b> <b>**</b><u>unit</u><b>);</b>

       <b>int</b> <b>sd_peer_get_unit(int</b> <u>fd</u><b>,</b> <b>char</b> <b>**</b><u>unit</u><b>);</b>

       <b>int</b> <b>sd_peer_get_machine_name(int</b> <u>fd</u><b>,</b> <b>char</b> <b>**</b><u>name</u><b>);</b>

       <b>int</b> <b>sd_peer_get_slice(int</b> <u>fd</u><b>,</b> <b>char</b> <b>**</b><u>slice</u><b>);</b>

       <b>int</b> <b>sd_peer_get_user_slice(int</b> <u>fd</u><b>,</b> <b>char</b> <b>**</b><u>slice</u><b>);</b>

       <b>int</b> <b>sd_peer_get_cgroup(int</b> <u>fd</u><b>,</b> <b>char</b> <b>**</b><u>cgroup</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_pid_get_owner_uid()</b> may be used to determine the Unix UID (user identifier) which owns the login
       session or systemd user unit of a process identified by the specified PID. For processes which are not
       part of a login session and not managed by a user manager, this function will fail with <b>-ENODATA</b>.

       <b>sd_pid_get_session()</b> may be used to determine the login session identifier of a process identified by the
       specified process identifier. The session identifier is a short string, suitable for usage in file system
       paths. Please note the login session may be limited to a stub process or two. User processes may instead
       be started from their systemd user manager, e.g. GUI applications started using DBus activation, as well
       as service processes which are shared between multiple logins of the same user. For processes which are
       not part of a login session, this function will fail with <b>-ENODATA</b>. The returned string needs to be freed
       with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_pid_get_user_unit()</b> may be used to determine the systemd user unit (i.e. user service or scope unit)
       identifier of a process identified by the specified PID. The unit name is a short string, suitable for
       usage in file system paths. For processes which are not managed by a user manager, this function will
       fail with <b>-ENODATA</b>. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_pid_get_unit()</b> may be used to determine the systemd system unit (i.e. system service or scope unit)
       identifier of a process identified by the specified PID. The unit name is a short string, suitable for
       usage in file system paths. Note that not all processes are part of a system unit/service. For processes
       not being part of a systemd system unit, this function will fail with <b>-ENODATA</b>. (More specifically, this
       call will not work for kernel threads.) The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call
       after use.

       <b>sd_pid_get_machine_name()</b> may be used to determine the name of the VM or container is a member of. The
       machine name is a short string, suitable for usage in file system paths. The returned string needs to be
       freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use. For processes not part of a VM or container, this function
       fails with <b>-ENODATA</b>.

       <b>sd_pid_get_slice()</b> may be used to determine the slice unit the process is a member of. See
       <b><a href="../man5/systemd.slice.5.html">systemd.slice</a></b>(5) for details about slices. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3)
       call after use.

       Similarly, <b>sd_pid_get_user_slice()</b> returns the user slice (as managed by the user's systemd instance) of
       a process.

       <b>sd_pid_get_cgroup()</b> returns the control group path of the specified process, relative to the root of the
       hierarchy. Returns the path without trailing slash, except for processes located in the root control
       group, where "/" is returned. To find the actual control group path in the file system, the returned path
       needs to be prefixed with <a href="file:/sys/fs/cgroup/">/sys/fs/cgroup/</a> (if the unified control group setup is used), or
       <a href="file:/sys/fs/cgroup/">/sys/fs/cgroup/</a><u>HIERARCHY</u>/ (if the legacy multi-hierarchy control group setup is used).

       If the <u>pid</u> parameter of any of these functions is passed as 0, the operation is executed for the calling
       process.

       The <b>sd_pidfd_get_owner_uid()</b>, <b>sd_pidfd_get_session()</b>, <b>sd_pidfd_get_user_unit()</b>, <b>sd_pidfd_get_unit()</b>,
       <b>sd_pidfd_get_machine_name()</b>, <b>sd_pidfd_get_slice()</b>, <b>sd_pidfd_get_user_slice()</b> and <b>sd_pidfd_get_cgroup()</b>
       calls operate similarly to their PID counterparts, but accept a <b>PIDFD</b> instead of a <b>PID</b>, which means they
       are not subject to recycle race conditions as the process is pinned by the file descriptor during the
       whole duration of the invocation. Note that these require a kernel that supports <b>PIDFD</b>. A suitable file
       descriptor may be acquired via <b><a href="../man2/pidfd_open.2.html">pidfd_open</a></b>(2).

       The <b>sd_peer_get_owner_uid()</b>, <b>sd_peer_get_session()</b>, <b>sd_peer_get_user_unit()</b>, <b>sd_peer_get_unit()</b>,
       <b>sd_peer_get_machine_name()</b>, <b>sd_peer_get_slice()</b>, <b>sd_peer_get_user_slice()</b> and <b>sd_peer_get_cgroup()</b> calls
       operate similarly to their PID counterparts, but accept a connected <b>AF_UNIX</b> socket and retrieve
       information about the connected peer process. Note that these fields are retrieved via <a href="file:/proc/">/proc/</a>, and hence
       are not suitable for authorization purposes, as they are subject to races.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, these calls return 0 or a positive integer. On failure, these calls return a negative
       errno-style error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-ESRCH</b>
           The specified PID does not refer to a running process.

       <b>-EBADF</b>
           The specified socket file descriptor was invalid.

       <b>-ENODATA</b>
           The given field is not specified for the described process or peer.

       <b>-EINVAL</b>
           An input parameter was invalid (out of range, or <b>NULL</b>, where that is not accepted).

       <b>-ENOMEM</b>
           Memory allocation failed.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       Note that the login session identifier as returned by <b>sd_pid_get_session()</b> is completely unrelated to the
       process session identifier as returned by <b><a href="../man2/getsid.2.html">getsid</a></b>(2).

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_peer_get_cgroup()</b>, <b>sd_peer_get_machine_name()</b>, <b>sd_peer_get_owner_uid()</b>, <b>sd_peer_get_session()</b>,
       <b>sd_peer_get_slice()</b>, <b>sd_peer_get_unit()</b>, <b>sd_peer_get_user_slice()</b>, <b>sd_peer_get_user_unit()</b>,
       <b>sd_pid_get_cgroup()</b>, <b>sd_pid_get_machine_name()</b>, <b>sd_pid_get_owner_uid()</b>, <b>sd_pid_get_session()</b>,
       <b>sd_pid_get_slice()</b>, <b>sd_pid_get_unit()</b>, <b>sd_pid_get_user_slice()</b>, and <b>sd_pid_get_user_unit()</b> were added in
       version 236.

       <b>sd_pidfd_get_owner_uid()</b>, <b>sd_pidfd_get_session()</b>, <b>sd_pidfd_get_user_unit()</b>, <b>sd_pidfd_get_unit()</b>,
       <b>sd_pidfd_get_machine_name()</b>, <b>sd_pidfd_get_slice()</b>, <b>sd_pidfd_get_user_slice()</b>, and <b>sd_pidfd_get_cgroup()</b>
       were added in version 253.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-login.3.html">sd-login</a></b>(3), <b><a href="../man3/sd_session_is_active.3.html">sd_session_is_active</a></b>(3), <b><a href="../man2/getsid.2.html">getsid</a></b>(2), <b><a href="../man5/systemd.slice.5.html">systemd.slice</a></b>(5), <b><a href="../man8/systemdmachined.service.8.html">systemd-</a></b>
       <b><a href="../man8/systemdmachined.service.8.html">machined.service</a></b>(8)

systemd 257.7                                                                            <u><a href="../man3/SD_PID_GET_OWNER_UID.3.html">SD_PID_GET_OWNER_UID</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>