<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sqitch-authentication - Guide to using database authentication credentials with Sqitch</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sqitch">sqitch_1.5.2-1_all</a> <br><br><pre>
</pre><h4><b>Name</b></h4><pre>
       sqitch-authentication - Guide to using database authentication credentials with Sqitch

</pre><h4><b>Description</b></h4><pre>
       For database engines that require authentication, Sqitch supports a number of credential-specification
       options, and searches for them in a specific sequence. These searches are performed in two parts: a
       search for a username and a search for a password.

</pre><h4><b>Usernames</b></h4><pre>
       Sqitch searches for usernames sequentially, using the first value it finds.  Any of these approaches may
       be used to specify a username, in this order:

       1. In the $SQITCH_USERNAME environment variable
       2. Via the "--db-username" option
       3. In the deploy target URI; this is the preferred option
       4. In an engine-specific environment variable or configuration

       Naturally, this last option varies by database engine. The details are as follows:

       PostgreSQL, YugabyteDB, CockroachDB
           The  Postgres,  Yugabyte,  and  Cockroach  engines  use  the  "PGUSER"  environment variable, if set.
           Otherwise, it uses the system username.

       MySQL
           For MySQL, if the MySQL::Config module is installed, usernames and passwords can be specified in  the
           <u>/etc/my.cnf</u>    and    <u><a href="file:~/.my.cnf">~/.my.cnf</a></u>   files   &lt;https://dev.mysql.com/doc/refman/5.7/en/password-security-
           user.html&gt;.  These files must limit access only to the current user (0600). Sqitch will  look  for  a
           username and password under the "[client]" and "[mysql]" sections, in that order.

       Oracle
           Oracle provides no default to search for a username.

       Vertica
           The  Vertica engine uses the "VSQL_USER" environment variable, if set.  Otherwise, it uses the system
           username.

       Firebird
           The Firebird engine uses the "ISC_USER" environment variable, if set.

       Exasol
           Exasol provides no default to search for a username.

       Snowflake
           The Snowflake engine uses the "SNOWSQL_USER" environment variable, if set.  Next,  it  looks  in  the
           <u><a href="file:~/.snowsql/config">~/.snowsql/config</a></u>  file  &lt;https://docs.snowflake.com/en/user-guide/snowsql-start.html#snowsql-config-
           file&gt; and use the default "connections.username" value. Otherwise, it uses the system username.

</pre><h4><b>Passwords</b></h4><pre>
       You may have noticed that Sqitch has no "--password" option. This is intentional. It's  generally  not  a
       great  idea to specify a password on the command-line: from there, it gets logged to your command history
       and is easy to extract by anyone with access to your system. So you might wonder how to specify passwords
       so that Sqitch an successfully deploy to databases that require passwords. There are four approaches,  in
       order from most- to least-recommended:

       1. Avoid using a password at all
       2. Use a database engine-specific password file
       3. Use the $SQITCH_PASSWORD environment variable
       4. Include the password in the deploy target URI

       Each is covered in detail in the sections below.

   <b>Don't</b> <b>use</b> <b>Passwords</b>
       Of  course, the best way to protect your passwords is not to use them at all.  If your database engine is
       able to do passwordless authentication, it's worth taking the time to make it work,  especially  on  your
       production database systems. Some examples:

       PostgreSQL
           PostgreSQL         supports         a         number         of         authentication        methods
           &lt;https://www.postgresql.org/docs/current/static/auth-methods.html&gt;, including  the  passwordless  SSL
           certificate    &lt;https://www.postgresql.org/docs/current/static/auth-methods.html#AUTH-CERT&gt;,   GSSAPI
           &lt;https://www.postgresql.org/docs/current/static/auth-methods.html#GSSAPI-AUTH&gt;,   and,   for    local
           connections,      peer      authentication      &lt;https://www.postgresql.org/docs/current/static/auth-
           methods.html#AUTH-PEER&gt;.

       MySQL
           MySQL         supports         a          number          of          authentication          methods
           &lt;https://dev.mysql.com/doc/internals/en/authentication-method.html&gt;,    plus    SSL    authentication
           &lt;https://dev.mysql.com/doc/internals/en/ssl.html&gt;.

       Oracle
           Oracle         supports         a         number          of          authentication          methods
           &lt;https://docs.oracle.com/cd/B19306_01/network.102/b14266/authmeth.htm#BABCGGEB&gt;,     including    SSL
           authentication       &lt;https://docs.oracle.com/cd/B19306_01/network.102/b14266/authmeth.htm#i1009722&gt;,
           third-party                                                                            authentication
           &lt;https://docs.oracle.com/cd/B19306_01/network.102/b14266/authmeth.htm#i1009853&gt;,   and,   for   local
           connections,                                     OS                                    authentication
           &lt;https://docs.oracle.com/cd/B19306_01/network.102/b14266/authmeth.htm#i1007520&gt;.

       Vertica
           Vertica         supports         a         number         of          authentication          methods
           &lt;https://my.vertica.com/docs/7.1.x/HTML/index.htm#Authoring/AdministratorsGuide/Security/ClientAuth/SupportedClientAuthenticationMethods.htm&gt;
           including               the               passwordless               TLS               authentication
           &lt;https://my.vertica.com/docs/7.1.x/HTML/index.htm#Authoring/AdministratorsGuide/Security/ClientAuth/ConfiguringTLSAuthentication.htm&gt;,
           GSS                                                                                    authentication
           &lt;https://my.vertica.com/docs/7.1.x/HTML/index.htm#Authoring/AdministratorsGuide/Security/ClientAuth/Kerberos/ImplementingKerberosAuthentication.htm&gt;,
           and,            for            local            connections,           ident           authentication
           &lt;https://my.vertica.com/docs/7.1.x/HTML/index.htm#Authoring/AdministratorsGuide/Security/ClientAuth/ConfiguringIdentAuthentication.htm&gt;.

       Firebird
           Firebird    supports    passwordless    authentication    only     via     trusted     authentication
           &lt;https://www.firebirdsql.org/manual/qsg2-config.html&gt; for local connections.

       Exasol
           Exasol doesn't seem to support password-less authentication at this time, though there is support for
           Authentication  using OpenID &lt;https://docs.exasol.com/sql/create_user.htm#Authenti4&gt;.  To use it with
           Sqitch, include "AUTHMETHOD=refreshtoken" in the target URI query string, e.g.,

             db:exasol:/<a href="file:/sys">/sys</a>:exasol@localhost:8563/?Driver=Exasol&amp;AUTHMETHOD=refreshtoken

       Snowflake
           Snowflake does not support password-less authentication, but does  support  key-pair  authentication.
           Follow  the  instructions  &lt;https://docs.snowflake.com/en/user-guide/key-pair-auth&gt;  to  create a key
           pair, then set the "private_key_path" in the <u><a href="file:~/.snowsql/config">~/.snowsql/config</a></u> to point to the private key file:

             private_key_path = "&lt;path&gt;/rsa_key.p8"

           To connect, set the $SNOWSQL_PRIVATE_KEY_PASSPHRASE environment variable to the  passphrase  for  the
           private  key,  and  add  these  parameters  under  the configuration for your DSN in <u>/etc/odbc.ini</u> or
           <u><a href="file:~/.odbc.ini">~/.odbc.ini</a></u>:

             [sqitch]
             AUTHENTICATOR     = SNOWFLAKE_JWT
             UID               = &lt;username&gt;
             PRIV_KEY_FILE     = &lt;path&gt;/rsa_key.p8
             PRIV_KEY_FILE_PWD = &lt;password&gt;

           Then connect using the named DSN via the "DSN" query parameter:

             db:snowflake://<a href="mailto:movera@example.snowflakecomputing.com">movera@example.snowflakecomputing.com</a>/flipr?warehouse=compute_wh;DSN=sqitch

           Or add the ODBC parameters directly to the query part of your connection URI (although it's safer  to
           put "priv_key_file_pwd" in <u>odbc.ini</u>):

           •   "authenticator=SNOWFLAKE_JWT"

           •   "uid=$username"

           •   "priv_key_file=path/to/privatekey.p8"

           •   "priv_key_file_pwd=$private_key_password"

           For example:

             db:snowflake://<a href="mailto:movera@example.snowflakecomputing.com">movera@example.snowflakecomputing.com</a>/flipr?Driver=Snowflake;warehouse=sqitch;authenticator=SNOWFLAKE_JWT;uid=movera;priv_key_file=path/to/privatekey.p8;priv_key_file_pwd=s0up3rs3cre7

           Sadly,  both  the  "SNOWSQL_PRIVATE_KEY_PASSPHRASE"  environment variable and the "priv_key_file_pwd"
           ODBC parameter must be set, as Sqitch uses ODBC to maintain  its  registry  and  SnowSQL  to  execute
           change scripts.

   <b>Use</b> <b>a</b> <b>Password</b> <b>File</b>
       If  you  must  use  password authentication with your database server, you may be able to use a protected
       password file. This is file with access limited only to the current user that the server  client  library
       can  read in. As such, the format is specified by the database vendor, and not all database servers offer
       the feature. Here's how the database engines supported by Sqitch shake out:

       PostgreSQL, YugabyteDB, CockroachDB
           PostgreSQL,     YugabyteDB,     and      CockroachDB      will      use      a      <u>.pgpass</u>      file
           &lt;https://www.postgresql.org/docs/current/static/libpq-pgpass.html&gt; in the user's home directory to or
           referenced  by  the $PGPASSFILE environment variable. This file must limit access only to the current
           user (0600) and contains lines specify authentication rules as follows:

             hostname:port:database:username:password

       MySQL
           For MySQL, if the MySQL::Config module is installed, usernames and passwords can be specified in  the
           <u>/etc/my.cnf</u>    and    <u><a href="file:~/.my.cnf">~/.my.cnf</a></u>   files   &lt;https://dev.mysql.com/doc/refman/5.7/en/password-security-
           user.html&gt;.  These files must limit access only to the current user (0600). Sqitch will  look  for  a
           username and password under the "[client]" and "[mysql]" sections, in that order.

       Oracle
           Oracle                         supports                         password                         file
           &lt;https://docs.oracle.com/cd/B28359_01/server.111/b28310/dba007.htm#ADMIN10241&gt;   created   with   the
           "ORAPWD" utility to authenticate "SYSDBA" and "SYSOPER" users, but <b>Sqitch</b> <b>is</b> <b>unable</b> <b>to</b> <b>take</b> <b>advantage</b>
           <b>of</b>     <b>this</b>     <b>functionality.</b>     Neither    can    one    embed    a    username    and    password
           &lt;https://stackoverflow.com/q/7183513/79202&gt;             into              a              <u>tnsnames.ora</u>
           &lt;https://docs.oracle.com/cd/B28359_01/network.111/b28317/tnsnames.htm#NETRF007&gt; file.

       Vertica
           Vertica does not currently support a password file.

       Firebird
           Firebird does not currently support a password file.

       Exasol
           Exasol allows configuring connection profiles for the 'exaplus' client:

             &gt; exaplus -u sys -p exasol -c localhost:8563 -wp flipr_test
             EXAplus 6.0.4 (c) EXASOL AG

             Profile flipr_test is saved.
             &gt; exaplus -profile flipr_test -q -sql "select current_timestamp;"

             CURRENT_TIMESTAMP
             --------------------------
             2017-11-02 13:35:48.360000

           These  profiles  are  stored in <u><a href="file:~/.exasol/profiles.xml">~/.exasol/profiles.xml</a></u>, readable only to the user by default. See the
           documentation &lt;https://www.exasol.com/portal/display/DOC/Database+User+Manual&gt; for  more  information
           on connection profiles, specifically the EXAplus section in the chapter on "Clients and interfaces".

           For ODBC connections from Sqitch, we can use connection settings in <u><a href="file:~/.odbc.ini">~/.odbc.ini</a></u>:

             [flipr_test]
             DRIVER = Exasol
             EXAHOST = localhost:8563
             EXAUID = sys
             EXAPWD = exasol
             AUTHMETHOD = refreshtoken

           When  combining  the  above,  Sqitch  doesn't  need to know any credentials; they are stored somewhat
           safely in <u><a href="file:~/.exasol/profiles.xml">~/.exasol/profiles.xml</a></u> and <u><a href="file:~/.odbc.ini">~/.odbc.ini</a></u>:

             &gt; sqitch status db:exasol:flipr_test
             # On database db:exasol:flipr_test
             # Project:  flipr
             # ...
             #
             Nothing to deploy (up-to-date)
             &gt; sqitch rebase --onto '@HEAD^' -y db:exasol:flipr_test
             Reverting changes to hashtags @v1.0.0-dev2 from db:exasol:flipr_test
               - userflips .. ok
             Deploying changes to db:exasol:flipr_test
               + userflips .. ok

       Snowflake
           For Snowflake, Sqitch  will  read  the  <u><a href="file:~/.snowsql/config">~/.snowsql/config</a></u>  file  &lt;https://docs.snowflake.com/en/user-
           guide/snowsql-start.html#snowsql-config-file&gt;   and  use  the  default  connections  settings;  named
           connections are not supported.  An example:

             [connections]
             accountname = myaccount.us-east-1
             warehousename = compute
             username = frank
             password = fistula postmark bag
             rolename = ACCOUNTADMIN
             dbname = reporting

           The variables that Sqitch currently reads are:

           "connections.accountname"
           "connections.username"
           "connections.password"
           "connections.rolename"
           "connections.region" (Deprecated by Snowflake)
           "connections.warehousename"
           "connections.dbname"

   <b>Use</b> <b>$SQITCH_PASSWORD</b>
       The $SQITCH_PASSWORD environment variable can be used to specify the password for any supported  database
       engine.  However  use  of  this  environment  variable  is  not recommended for security reasons, as some
       operating systems allow non-root users to see process environment variables via "ps".

       The behavior of $SQITCH_PASSWORD is consistent across all supported  engines,  as  is  the  complementary
       $SQITCH_USERNAME  environment  variable.   Some  database  engines support their own password environment
       variables, which you may wish to use instead. However, their behaviors may not be consistent:

       PostgreSQL, YugabyteDB, CockroachDB
           $PGPASSWORD

       MySQL
           $MYSQL_PWD

       Vertica
           $VSQL_PASSWORD

       Firebird
           $ISC_PASSWORD

       Snowflake
           $SNOWSQL_PWD

   <b>Use</b> <b>Target</b> <b>URIs</b>
       Passwords may also be specified in target URIs.  This is not generally recommended, since such  URIs  are
       either specified via the command-line (and therefore visible in "ps" and your shell history) or stored in
       the  configuration, the project instance of which is generally pushed to your source code repository. But
       it's provided here as an absolute last resort (and because web  URLs  support  it,  though  it's  heavily
       frowned upon there, too).

       Such URIs can either be specified on the command-line:

         sqitch deploy db:pg://fred:<a href="mailto:s3cr3t@db.example.com">s3cr3t@db.example.com</a>/widgets

       Or stored as named targets in the project configuration file:

         sqitch target add wigets db:pg://fred:<a href="mailto:s3cr3t@db.example.com">s3cr3t@db.example.com</a>/widgets

       After which the target is available by its name:

         sqitch deploy widgets

       See sqitch-targets and "sqitch-configuration" for details  on target configuration.

</pre><h4><b>See</b> <b>Also</b></h4><pre>
       •   sqitch-environment

       •   sqitch-configuration

       •   sqitch-target

</pre><h4><b>Sqitch</b></h4><pre>
       Part of the sqitch suite.

perl v5.40.1                                       2025-05-10                         <u><a href="../man3pm/sqitch-authentication.3pm.html">sqitch-authentication</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>