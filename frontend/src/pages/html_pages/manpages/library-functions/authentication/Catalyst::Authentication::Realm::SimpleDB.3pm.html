<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalyst::Authentication::Realm::SimpleDB - A simplified Catalyst authentication configurator.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcatalyst-authentication-store-dbix-class-perl">libcatalyst-authentication-store-dbix-class-perl_0.1506-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Catalyst::Authentication::Realm::SimpleDB - A simplified Catalyst authentication configurator.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Catalyst qw/
               Authentication
           /;

           __PACKAGE__-&gt;config-&gt;{'Plugin::Authentication'} =
               {
                   default =&gt; {
                       class      =&gt; 'SimpleDB',
                       user_model =&gt; 'MyApp::Schema::Users',
                   }
               }

           # later on ...
           $c-&gt;authenticate({ username =&gt; 'myusername',
                              password =&gt; 'mypassword' });

           my $age = $c-&gt;user-&gt;get('age');

           $c-&gt;logout;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The Catalyst::Authentication::Realm::SimpleDB provides a simple way to configure Catalyst Authentication
       when using the most common configuration of a password protected user retrieved from an SQL database.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       The SimpleDB Realm class configures the Catalyst authentication system based on the following:

       •   Your user data is stored in a table that is accessible via $c-&gt;model($cfg-&gt;{user_model});

       •   Your passwords are stored in the 'password' field in your users table and are not encrypted.

       •   Your  roles  for  users  are stored in a separate table and are directly accessible via a DBIx::Class
           relationship called 'roles' and the text of the role is stored in a field called  'role'  within  the
           role table.

       •   Your user information is stored in the session once the user is authenticated.

       For the above usage, only one configuration option is necessary, 'user_model'.  <b>user_model</b> should contain
       the  <b>class</b> <b>name</b> <b>of</b> <b>your</b> <b>user</b> <b>class</b>. See the "PREPARATION" section for info on how to set up your database
       for use with this module.

       If your system differs from the above, some minor configuration may be necessary. The  options  available
       are  detailed  below. These options match the configuration options used by the underlying credential and
       store     modules.      More     information     on     these     options     can     be     found     in
       Catalyst::Authentication::Credential::Password and Catalyst::Authentication::Store::DBIx::Class.

       user_model
           Contains  the  class  name (as passed to $c-&gt;<b>model()</b> ) of the DBIx::Class schema to use as the source
           for user information.  This config item is <b>REQUIRED</b>.

       password_field
           If your password field is not 'password' set this option to the name of your  password  field.   Note
           that if you change this to, say 'users_password' you will need to use that in the authenticate call:

               $c-&gt;authenticate({ username =&gt; 'bob', users_password =&gt; 'foo' });

       password_type
           If  the  password  is not stored in plaintext you will need to define what format the password is in.
           The common options are <b>crypted</b> and <b>hashed</b>.  Crypted uses the  standard  unix  crypt  to  encrypt  the
           password.  Hashed uses the Digest modules to perform password hashing.

       password_hash_type
           If   you   use   a   hashed   password   type   -   this   defines   the   type   of   hashing.   See
           Catalyst::Authentication::Credential::Password for more details on this setting.

       role_column
           If your users roles are stored directly in your user table, set this to the column name that contains
           your roles.  For example, if your user table contains a field  called  'permissions',  the  value  of
           role_column  would  be  'permissions'.   <b>NOTE</b>: If multiple values are stored in the role column, they
           should be space or pipe delimited.

       role_relation and role_field
           These define an alternate role relationship name and the column that holds the role's name  in  plain
           text.   See "CONFIGURATION" in Catalyst::Authentication::Store::DBIx::Class for more details on these
           settings.

       use_userdata_from_session
           This is a simple 1 / 0 setting which determines how a user's  data  is  saved  /  restored  from  the
           session.   If  it  is  set  to  1, the user's complete information (at the time of authentication) is
           cached between requests.  If it is set to 0, the users information is loaded  from  the  database  on
           each request.

</pre><h4><b>PREPARATION</b></h4><pre>
       This  module  makes  several  assumptions about the structure of your database.  Below is an example of a
       table structure which will function with this module in it's default  configuration.  You  can  use  this
       table  structure  as-is  or  add  additional  fields as necessary. <b>NOTE</b> that this is the default SimpleDB
       configuration only. Your table structure can differ significantly from this when  using  the  DBIx::Class
       Store directly.

           --
           -- note that you can add any additional columns you require to the users table.
           --
           CREATE TABLE users (
                   id            INTEGER PRIMARY KEY,
                   username      TEXT,
                   password      TEXT,
           );

           CREATE TABLE roles (
                   id   INTEGER PRIMARY KEY,
                   role TEXT
           );
           CREATE TABLE user_roles (
                   user_id INTEGER,
                   role_id INTEGER,
                   PRIMARY KEY (user_id, role_id)
           );

       Also,  after  you  have loaded this table structure into your DBIx::Class schema, please be sure that you
       have a many_to_many DBIx::Class relationship defined for the users to roles relation. Your  schema  files
       should contain something along these lines:

       "lib/MyApp/Schema/Users.pm":

           __PACKAGE__-&gt;has_many(map_user_role =&gt; 'MyApp::Schema::UserRoles', 'user_id');
           __PACKAGE__-&gt;many_to_many(roles =&gt; 'map_user_role', 'role');

       "lib/MyApp/Schema/UserRoles.pm":

           __PACKAGE__-&gt;belongs_to(role =&gt; 'MyApp::Schema::Roles', 'role_id');

</pre><h4><b>MIGRATION</b></h4><pre>
       If  and  when your application becomes complex enough that you need more features than SimpleDB gives you
       access to, you can migrate to a standard Catalyst Authentication configuration fairly  easily.   SimpleDB
       simply  creates  a  standard Auth config based on the inputs you give it.  The config SimpleDB creates by
       default looks like this:

           MyApp-&gt;config('Plugin::Authentication') = {
               default =&gt; {
                   credential =&gt; {
                       class =&gt; 'Password',
                       password_type =&gt; 'clear'
                   },
                   store =&gt; {
                       class =&gt; 'DBIx::Class',
                       role_relation =&gt; 'roles',
                       role_field =&gt; 'role',
                       use_userdata_from_session =&gt; '1',
                       user_model =&gt; $user_model_from_simpledb_config
                       }
                   }
           };

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module relies on a number of other modules to do it's job.  For more information you  can  refer  to
       the following:

       •   Catalyst::Manual::Tutorial

       •   Catalyst::Plugin::Authentication

       •   Catalyst::Authentication::Credential::Password

       •   Catalyst::Authentication::Store::DBIx::Class

       •   Catalyst::Plugin::Authorization::Roles

perl v5.34.0                                       2022-06-09              <u>Catalyst::Auth...Realm::<a href="../man3pm/SimpleDB.3pm.html">SimpleDB</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>