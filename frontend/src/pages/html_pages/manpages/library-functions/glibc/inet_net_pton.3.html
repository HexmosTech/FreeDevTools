<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>inet_net_pton, inet_net_ntop - Internet network number conversion</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       inet_net_pton, inet_net_ntop - Internet network number conversion

</pre><h4><b>LIBRARY</b></h4><pre>
       Resolver library (<u>libresolv</u>, <u>-lresolv</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/arpa/inet.h">arpa/inet.h</a>&gt;</b>

       <b>int</b> <b>inet_net_pton(int</b> <u>af</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>pres</u><b>,</b>
                         <b>void</b> <u>netp</u><b>[.</b><u>nsize</u><b>],</b> <b>size_t</b> <u>nsize</u><b>);</b>
       <b>char</b> <b>*inet_net_ntop(int</b> <u>af</u><b>,</b>
                         <b>const</b> <b>void</b> <u>netp</u><b>[(.</b><u>bits</u> <b>-</b> <b>CHAR_BIT</b> <b>+</b> <b>1)</b> <b>/</b> <b>CHAR_BIT],</b>
                         <b>int</b> <u>bits</u><b>,</b>
                         <b>char</b> <u>pres</u><b>[.</b><u>psize</u><b>],</b> <b>size_t</b> <u>psize</u><b>);</b>

   Feature Test Macro Requirements for glibc (see <b><a href="../man7/feature_test_macros.7.html">feature_test_macros</a></b>(7)):

       <b>inet_net_pton</b>(), <b>inet_net_ntop</b>():
           Since glibc 2.20:
               _DEFAULT_SOURCE
           Before glibc 2.20:
               _BSD_SOURCE || _SVID_SOURCE

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  functions convert network numbers between presentation (i.e., printable) format and network (i.e.,
       binary) format.

       For both functions, <u>af</u> specifies the address family for the  conversion;  the  only  supported  value  is
       <b>AF_INET</b>.

   <b>inet_net_pton()</b>
       The  <b>inet_net_pton</b>()  function  converts  <u>pres</u>,  a  null-terminated string containing an Internet network
       number in presentation format to network format.  The result of the conversion, which is in network  byte
       order,  is  placed  in  the buffer pointed to by <u>netp</u>.  (The <u>netp</u> argument typically points to an <u>in_addr</u>
       structure.)  The <u>nsize</u> argument specifies the number of bytes available in <u>netp</u>.

       On success, <b>inet_net_pton</b>() returns the number of bits in the network number field of the  result  placed
       in <u>netp</u>.  For a discussion of the input presentation format and the return value, see NOTES.

       <u>Note</u>:  the  buffer pointed to by <u>netp</u> should be zeroed out before calling <b>inet_net_pton</b>(), since the call
       writes only as many bytes as are required for the network number  (or  as  are  explicitly  specified  by
       <u>pres</u>), which may be less than the number of bytes in a complete network address.

   <b>inet_net_ntop()</b>
       The <b>inet_net_ntop</b>() function converts the network number in the buffer pointed to by <u>netp</u> to presentation
       format; <u>*netp</u> is interpreted as a value in network byte order.  The <u>bits</u> argument specifies the number of
       bits in the network number in <u>*netp</u>.

       The  null-terminated  presentation-format  string  is placed in the buffer pointed to by <u>pres</u>.  The <u>psize</u>
       argument specifies the number of bytes available in <u>pres</u>.  The presentation string is in CIDR  format:  a
       dotted-decimal  number representing the network address, followed by a slash, and the size of the network
       number in bits.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>inet_net_pton</b>() returns the number of bits in the network number.  On error, it  returns  -1,
       and <u>errno</u> is set to indicate the error.

       On  success,  <b>inet_net_ntop</b>()  returns <u>pres</u>.  On error, it returns NULL, and <u>errno</u> is set to indicate the
       error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EAFNOSUPPORT</b>
              <u>af</u> specified a value other than <b>AF_INET</b>.

       <b>EMSGSIZE</b>
              The size of the output buffer was insufficient.

       <b>ENOENT</b> (<b>inet_net_pton</b>()) <u>pres</u> was not in correct presentation format.

</pre><h4><b>STANDARDS</b></h4><pre>
       None.

</pre><h4><b>NOTES</b></h4><pre>
   <b>Input</b> <b>presentation</b> <b>format</b> <b>for</b> <b>inet_net_pton()</b>
       The network number may be specified either as a hexadecimal value or in dotted-decimal notation.

       Hexadecimal values are indicated by an initial "0x" or "0X".  The hexadecimal digits populate the nibbles
       (half octets) of the network number from left to right in network byte order.

       In dotted-decimal notation, up to four octets are specified, as decimal numbers separated by dots.  Thus,
       any of the following forms are accepted:

           a.b.c.d
           a.b.c
           a.b
           a

       Each part is a number in the range 0 to 255 that populates one byte  of  the  resulting  network  number,
       going  from  left  to  right, in network-byte (big endian) order.  Where a part is omitted, the resulting
       byte in the network number is zero.

       For either hexadecimal or dotted-decimal format, the network number can optionally be followed by a slash
       and a number in the range 0 to 32, which specifies the size of the network number in bits.

   <b>Return</b> <b>value</b> <b>of</b> <b>inet_net_pton()</b>
       The return value of <b>inet_net_pton</b>() is the number of bits in the network  number  field.   If  the  input
       presentation string terminates with a slash and an explicit size value, then that size becomes the return
       value of <b>inet_net_pton</b>().  Otherwise, the return value, <u>bits</u>, is inferred as follows:

       •  If the most significant byte of the network number is greater than or equal to 240, then <u>bits</u> is 32.

       •  Otherwise,  if  the  most significant byte of the network number is greater than or equal to 224, then
          <u>bits</u> is 4.

       •  Otherwise, if the most significant byte of the network number is greater than or equal  to  192,  then
          <u>bits</u> is 24.

       •  Otherwise,  if  the  most significant byte of the network number is greater than or equal to 128, then
          <u>bits</u> is 16.

       •  Otherwise, <u>bits</u> is 8.

       If the resulting <u>bits</u> value from the above steps is greater than or equal to 8, but the number of  octets
       specified  in the network number exceed <u>bits/8</u>, then <u>bits</u> is set to 8 times the number of octets actually
       specified.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The program below demonstrates the use of <b>inet_net_pton</b>() and <b>inet_net_ntop</b>().  It  uses  <b>inet_net_pton</b>()
       to  convert the presentation format network address provided in its first command-line argument to binary
       form, displays the return value from <b>inet_net_pton</b>().  It then uses <b>inet_net_ntop</b>() to convert the binary
       form back to presentation format, and displays the resulting string.

       In order to demonstrate that <b>inet_net_pton</b>() may not write to all bytes of its <u>netp</u> argument, the program
       allows an optional  second  command-line  argument,  a  number  used  to  initialize  the  buffer  before
       <b>inet_net_pton</b>()  is  called.   As  its final line of output, the program displays all of the bytes of the
       buffer returned by <b>inet_net_pton</b>() allowing the user  to  see  which  bytes  have  not  been  touched  by
       <b>inet_net_pton</b>().

       An example run, showing that <b>inet_net_pton</b>() infers the number of bits in the network number:

           $ <b>./a.out</b> <b>193.168</b>
           inet_net_pton() returned: 24
           inet_net_ntop() yielded:  193.168.0/24
           Raw address:              c1a80000

       Demonstrate that <b>inet_net_pton</b>() does not zero out unused bytes in its result buffer:

           $ <b>./a.out</b> <b>193.168</b> <b>0xffffffff</b>
           inet_net_pton() returned: 24
           inet_net_ntop() yielded:  193.168.0/24
           Raw address:              c1a800ff

       Demonstrate  that  <b>inet_net_pton</b>()  will  widen  the inferred size of the network number, if the supplied
       number of bytes in the presentation string exceeds the inferred value:

           $ <b>./a.out</b> <b>193.168.1.128</b>
           inet_net_pton() returned: 32
           inet_net_ntop() yielded:  193.168.1.128/32
           Raw address:              c1a80180

       Explicitly specifying the size of the network number overrides any inference  about  its  size  (but  any
       extra  bytes  that are explicitly specified will still be used by <b>inet_net_pton</b>(): to populate the result
       buffer):

           $ <b>./a.out</b> <b>193.168.1.128/24</b>
           inet_net_pton() returned: 24
           inet_net_ntop() yielded:  193.168.1/24
           Raw address:              c1a80180

   <b>Program</b> <b>source</b>
       /* Link with "-lresolv" */

       #include &lt;<a href="file:/usr/include/arpa/inet.h">arpa/inet.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;

       #define <a href="../manmsg/errExit.msg.html">errExit</a>(msg)    do { <a href="../manmsg/perror.msg.html">perror</a>(msg); exit(EXIT_FAILURE); \
                               } while (0)

       int
       main(int argc, char *argv[])
       {
           char buf[100];
           struct in_addr addr;
           int bits;

           if (argc &lt; 2) {
               fprintf(stderr,
                       "Usage: %s presentation-form [addr-init-value]\n",
                       argv[0]);
               exit(EXIT_FAILURE);
           }

           /* If argv[2] is supplied (a numeric value), use it to initialize
              the output buffer given to inet_net_pton(), so that we can see
              that inet_net_pton() initializes only those bytes needed for
              the network number. If argv[2] is not supplied, then initialize
              the buffer to zero (as is recommended practice). */

           addr.s_addr = (argc &gt; 2) ? strtod(argv[2], NULL) : 0;

           /* Convert presentation network number in argv[1] to binary. */

           bits = inet_net_pton(AF_INET, argv[1], &amp;addr, sizeof(addr));
           if (bits == -1)
               errExit("inet_net_ntop");

           printf("inet_net_pton() returned: %d\n", bits);

           /* Convert binary format back to presentation, using 'bits'
              returned by inet_net_pton(). */

           if (inet_net_ntop(AF_INET, &amp;addr, bits, buf, sizeof(buf)) == NULL)
               errExit("inet_net_ntop");

           printf("inet_net_ntop() yielded:  %s\n", buf);

           /* Display 'addr' in raw form (in network byte order), so we can
              see bytes not displayed by inet_net_ntop(); some of those bytes
              may not have been touched by inet_net_ntop(), and so will still
              have any initial value that was specified in argv[2]. */

           printf("Raw address:              %x\n", htonl(addr.s_addr));

           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/inet.3.html">inet</a></b>(3), <b><a href="../man5/networks.5.html">networks</a></b>(5)

Linux man-pages 6.9.1                              2024-06-15                                   <u><a href="../man3/inet_net_pton.3.html">inet_net_pton</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>