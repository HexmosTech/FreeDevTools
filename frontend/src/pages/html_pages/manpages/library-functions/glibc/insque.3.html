<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>insque, remque - insert/remove an item from a queue</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       insque, remque - insert/remove an item from a queue

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/search.h">search.h</a>&gt;</b>

       <b>void</b> <b>insque(void</b> <b>*</b><u>elem</u><b>,</b> <b>void</b> <b>*</b><u>prev</u><b>);</b>
       <b>void</b> <b>remque(void</b> <b>*</b><u>elem</u><b>);</b>

   Feature Test Macro Requirements for glibc (see <b><a href="../man7/feature_test_macros.7.html">feature_test_macros</a></b>(7)):

       <b>insque</b>(), <b>remque</b>():
           _XOPEN_SOURCE &gt;= 500
               || /* glibc &gt;= 2.19: */ _DEFAULT_SOURCE
               || /* glibc &lt;= 2.19: */ _SVID_SOURCE

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>insque</b>()  and  <b>remque</b>()  functions  manipulate  doubly  linked lists.  Each element in the list is a
       structure of which the first two elements are a forward and a backward pointer.  The linked list  may  be
       linear  (i.e.,  NULL forward pointer at the end of the list and NULL backward pointer at the start of the
       list) or circular.

       The <b>insque</b>() function inserts the element pointed to by <u>elem</u> immediately after the element pointed to  by
       <u>prev</u>.

       If  the  list is linear, then the call <u>insque(elem,</u> <u>NULL)</u> can be used to insert the initial list element,
       and the call sets the forward and backward pointers of <u>elem</u> to NULL.

       If the list is circular, the caller should ensure that the forward and backward  pointers  of  the  first
       element  are initialized to point to that element, and the <u>prev</u> argument of the <b>insque</b>() call should also
       point to the element.

       The <b>remque</b>() function removes the element pointed to by <u>elem</u> from the doubly linked list.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌─────────────────────────────────────────────────────────────────────────────┬───────────────┬─────────┐
       │ <b>Interface</b>                                                                   │ <b>Attribute</b>     │ <b>Value</b>   │
       ├─────────────────────────────────────────────────────────────────────────────┼───────────────┼─────────┤
       │ <b>insque</b>(), <b>remque</b>()                                                          │ Thread safety │ MT-Safe │
       └─────────────────────────────────────────────────────────────────────────────┴───────────────┴─────────┘

</pre><h4><b>VERSIONS</b></h4><pre>
       On ancient systems, the arguments of these functions were of type <u>struct</u> <u>qelem</u> <u>*</u>, defined as:

           struct qelem {
               struct qelem *q_forw;
               struct qelem *q_back;
               char          q_data[1];
           };

       This is still what you will get if <b>_GNU_SOURCE</b> is defined before including <u>&lt;search.h&gt;</u>.

       The location of the prototypes for these functions differs among several versions of UNIX.  The above  is
       the POSIX version.  Some systems place them in <u>&lt;string.h&gt;</u>.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001.

</pre><h4><b>BUGS</b></h4><pre>
       In  glibc  2.4 and earlier, it was not possible to specify <u>prev</u> as NULL.  Consequently, to build a linear
       list, the caller had to build a list using an initial call that contained the first two elements  of  the
       list, with the forward and backward pointers in each element suitably initialized.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The program below demonstrates the use of <b>insque</b>().  Here is an example run of the program:

           $ <b>./a.out</b> <b>-c</b> <b>a</b> <b>b</b> <b>c</b>
           Traversing completed list:
               a
               b
               c
           That was a circular list

   <b>Program</b> <b>source</b>

       #include &lt;<a href="file:/usr/include/search.h">search.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;

       struct element {
           struct element *forward;
           struct element *backward;
           char *name;
       };

       static struct element *
       new_element(void)
       {
           struct element *e;

           e = malloc(sizeof(*e));
           if (e == NULL) {
               fprintf(stderr, "malloc() failed\n");
               exit(EXIT_FAILURE);
           }

           return e;
       }

       int
       main(int argc, char *argv[])
       {
           struct element *first, *elem, *prev;
           int circular, opt, errfnd;

           /* The "-c" command-line option can be used to specify that the
              list is circular. */

           errfnd = 0;
           circular = 0;
           while ((opt = getopt(argc, argv, "c")) != -1) {
               switch (opt) {
               case 'c':
                   circular = 1;
                   break;
               default:
                   errfnd = 1;
                   break;
               }
           }

           if (errfnd || optind &gt;= argc) {
               fprintf(stderr,  "Usage: %s [-c] string...\n", argv[0]);
               exit(EXIT_FAILURE);
           }

           /* Create first element and place it in the linked list. */

           elem = new_element();
           first = elem;

           elem-&gt;name = argv[optind];

           if (circular) {
               elem-&gt;forward = elem;
               elem-&gt;backward = elem;
               insque(elem, elem);
           } else {
               insque(elem, NULL);
           }

           /* Add remaining command-line arguments as list elements. */

           while (++optind &lt; argc) {
               prev = elem;

               elem = new_element();
               elem-&gt;name = argv[optind];
               insque(elem, prev);
           }

           /* Traverse the list from the start, printing element names. */

           printf("Traversing completed list:\n");
           elem = first;
           do {
               printf("    %s\n", elem-&gt;name);
               elem = elem-&gt;forward;
           } while (elem != NULL &amp;&amp; elem != first);

           if (elem == first)
               printf("That was a circular list\n");

           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/queue.7.html">queue</a></b>(7)

Linux man-pages 6.9.1                              2024-06-15                                          <u><a href="../man3/insque.3.html">insque</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>