<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ttyslot - find the slot of the current user's terminal in some file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ttyslot - find the slot of the current user's terminal in some file

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>       /* See NOTES */

       <b>int</b> <b>ttyslot(void);</b>

   Feature Test Macro Requirements for glibc (see <b><a href="../man7/feature_test_macros.7.html">feature_test_macros</a></b>(7)):

       <b>ttyslot</b>():
           Since glibc 2.24:
               _DEFAULT_SOURCE
           From glibc 2.20 to glibc 2.23:
               _DEFAULT_SOURCE || (_XOPEN_SOURCE &amp;&amp; _XOPEN_SOURCE &lt; 500)
           glibc 2.19 and earlier:
               _BSD_SOURCE || (_XOPEN_SOURCE &amp;&amp; _XOPEN_SOURCE &lt; 500)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The legacy function <b>ttyslot</b>() returns the index of the current user's entry in some file.

       Now "What file?" you ask.  Well, let's first look at some history.

   <b>Ancient</b> <b>history</b>
       There used to be a file <u>/etc/ttys</u> in UNIX V6, that was read by the <b><a href="../man1/init.1.html">init</a></b>(1) program to find out what to do
       with each terminal line.  Each line consisted of three characters.  The first character was either '0' or
       '1',  where  '0'  meant  "ignore".  The second character denoted the terminal: '8' stood for "/dev/tty8".
       The third character was an argument to <b><a href="../man8/getty.8.html">getty</a></b>(8) indicating the sequence of line speeds to try  ('-'  was:
       start  trying  110 baud).  Thus a typical line was "18-".  A hang on some line was solved by changing the
       '1' to a '0', signaling init, changing back again, and signaling init again.

       In UNIX V7 the format was changed: here the second character was the argument to <b><a href="../man8/getty.8.html">getty</a></b>(8) indicating  the
       sequence  of  line  speeds  to try ('0' was: cycle through 300-1200-150-110 baud; '4' was for the on-line
       console DECwriter) while the rest of the line contained the name of the tty.  Thus  a  typical  line  was
       "14console".

       Later systems have more elaborate syntax.  System V-like systems have <u>/etc/inittab</u> instead.

   <b>Ancient</b> <b>history</b> <b>(2)</b>
       On  the other hand, there is the file <u>/etc/utmp</u> listing the people currently logged in.  It is maintained
       by <b><a href="../man1/login.1.html">login</a></b>(1).  It has a fixed size, and the appropriate index in the file was determined by <b><a href="../man1/login.1.html">login</a></b>(1) using
       the <b>ttyslot</b>() call to find the number of the line in <u>/etc/ttys</u> (counting from 1).

   <b>The</b> <b>semantics</b> <b>of</b> <b>ttyslot</b>
       Thus, the function <b>ttyslot</b>() returns the index of the controlling terminal of the calling process in  the
       file <u>/etc/ttys</u>, and that is (usually) the same as the index of the entry for the current user in the file
       <u>/etc/utmp</u>.  BSD still has the <u>/etc/ttys</u> file, but System V-like systems do not, and hence cannot refer to
       it.   Thus, on such systems the documentation says that <b>ttyslot</b>() returns the current user's index in the
       user accounting data base.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       If successful, this function returns the slot number.  On error (e.g., if none of the file descriptors 0,
       1, or 2 is associated with a terminal that occurs in this data base) it returns 0 on UNIX V6 and  V7  and
       BSD-like systems, but -1 on System V-like systems.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌───────────────────────────────────────────────────────────────────────────┬───────────────┬───────────┐
       │ <b>Interface</b>                                                                 │ <b>Attribute</b>     │ <b>Value</b>     │
       ├───────────────────────────────────────────────────────────────────────────┼───────────────┼───────────┤
       │ <b>ttyslot</b>()                                                                 │ Thread safety │ MT-Unsafe │
       └───────────────────────────────────────────────────────────────────────────┴───────────────┴───────────┘

</pre><h4><b>VERSIONS</b></h4><pre>
       The  utmp  file  is  found  in  various  places  on  various  systems,  such as <u>/etc/utmp</u>, <u>/var/adm/utmp</u>,
       <u><a href="file:/var/run/utmp">/var/run/utmp</a></u>.

</pre><h4><b>STANDARDS</b></h4><pre>
       None.

</pre><h4><b>HISTORY</b></h4><pre>
       SUSv1; marked as LEGACY in SUSv2; removed in POSIX.1-2001.  SUSv2 requires -1 on error.

       The glibc2 implementation  of  this  function  reads  the  file  <b>_PATH_TTYS</b>,  defined  in  <u>&lt;ttyent.h&gt;</u>  as
       "/etc/ttys".  It returns 0 on error.  Since Linux systems do not usually have "/etc/ttys", it will always
       return 0.

       On  BSD-like systems and Linux, the declaration of <b>ttyslot</b>() is provided by <u>&lt;unistd.h&gt;</u>.  On System V-like
       systems, the declaration is provided by <u>&lt;stdlib.h&gt;</u>.  Since  glibc  2.24,  <u>&lt;stdlib.h&gt;</u>  also  provides  the
       declaration with the following feature test macro definitions:

           (_XOPEN_SOURCE &gt;= 500 ||
                   (_XOPEN_SOURCE &amp;&amp; _XOPEN_SOURCE_EXTENDED))
               &amp;&amp; ! (_POSIX_C_SOURCE &gt;= 200112L || _XOPEN_SOURCE &gt;= 600)

       Minix also has <u>fttyslot</u>(<u>fd</u>).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/getttyent.3.html">getttyent</a></b>(3), <b><a href="../man3/ttyname.3.html">ttyname</a></b>(3), <b><a href="../man5/utmp.5.html">utmp</a></b>(5)

Linux man-pages 6.9.1                              2024-05-02                                         <u><a href="../man3/ttyslot.3.html">ttyslot</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>