<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_UniChar,       Tcl_UniCharToUtf,       Tcl_UtfToUniChar,       Tcl_UtfToChar16,       Tcl_UtfToWChar,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_UniChar,       Tcl_UniCharToUtf,       Tcl_UtfToUniChar,       Tcl_UtfToChar16,       Tcl_UtfToWChar,
       Tcl_UniCharToUtfDString,    Tcl_UtfToUniCharDString,    Tcl_Char16ToUtfDString,    Tcl_UtfToWCharDString,
       Tcl_UtfToChar16DString,     Tcl_WCharToUtfDString,     Tcl_WCharLen,    Tcl_Char16Len,    Tcl_UniCharLen,
       Tcl_UniCharNcmp,     Tcl_UniCharNcasecmp,     Tcl_UniCharCaseMatch,     Tcl_UtfNcmp,     Tcl_UtfNcasecmp,
       Tcl_UtfCharComplete,   Tcl_NumUtfChars,   Tcl_UtfFindFirst,  Tcl_UtfFindLast,  Tcl_UtfNext,  Tcl_UtfPrev,
       Tcl_UniCharAtIndex, Tcl_UtfAtIndex, Tcl_UtfBackslash - routines for manipulating UTF-8 strings

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       typedef ... <b>Tcl_UniChar</b>;

       Tcl_Size
       <b>Tcl_UniCharToUtf</b>(<u>ch,</u> <u>buf</u>)

       Tcl_Size
       <b>Tcl_UtfToUniChar</b>(<u>src,</u> <u>chPtr</u>)

       Tcl_Size
       <b>Tcl_UtfToChar16</b>(<u>src,</u> <u>uPtr</u>)

       Tcl_Size
       <b>Tcl_UtfToWChar</b>(<u>src,</u> <u>wPtr</u>)

       char *
       <b>Tcl_UniCharToUtfDString</b>(<u>uniStr,</u> <u>numUniChars,</u> <u>dsPtr</u>)

       char *
       <b>Tcl_Char16ToUtfDString</b>(<u>utf16,</u> <u>numUtf16,</u> <u>dsPtr</u>)

       char *
       <b>Tcl_WCharToUtfDString</b>(<u>wcharStr,</u> <u>numWChars,</u> <u>dsPtr</u>)

       Tcl_UniChar *
       <b>Tcl_UtfToUniCharDString</b>(<u>src,</u> <u>numBytes,</u> <u>dsPtr</u>)

       unsigned short *
       <b>Tcl_UtfToChar16DString</b>(<u>src,</u> <u>numBytes,</u> <u>dsPtr</u>)

       wchar_t *
       <b>Tcl_UtfToWCharDString</b>(<u>src,</u> <u>numBytes,</u> <u>dsPtr</u>)

       int
       <b>Tcl_Char16Len</b>(<u>utf16</u>)

       int
       <b>Tcl_WCharLen</b>(<u>wcharStr</u>)

       int
       <b>Tcl_UniCharLen</b>(<u>uniStr</u>)

       int
       <b>Tcl_UniCharNcmp</b>(<u>ucs,</u> <u>uct,</u> <u>uniLength</u>)

       int
       <b>Tcl_UniCharNcasecmp</b>(<u>ucs,</u> <u>uct,</u> <u>uniLength</u>)

       int
       <b>Tcl_UniCharCaseMatch</b>(<u>uniStr,</u> <u>uniPattern,</u> <u>nocase</u>)

       int
       <b>Tcl_UtfNcmp</b>(<u>cs,</u> <u>ct,</u> <u>length</u>)

       int
       <b>Tcl_UtfNcasecmp</b>(<u>cs,</u> <u>ct,</u> <u>length</u>)

       int
       <b>Tcl_UtfCharComplete</b>(<u>src,</u> <u>numBytes</u>)

       int
       <b>Tcl_NumUtfChars</b>(<u>src,</u> <u>numBytes</u>)

       const char *
       <b>Tcl_UtfFindFirst</b>(<u>src,</u> <u>ch</u>)

       const char *
       <b>Tcl_UtfFindLast</b>(<u>src,</u> <u>ch</u>)

       const char *
       <b>Tcl_UtfNext</b>(<u>src</u>)

       const char *
       <b>Tcl_UtfPrev</b>(<u>src,</u> <u>start</u>)

       int
       <b>Tcl_UniCharAtIndex</b>(<u>src,</u> <u>index</u>)

       const char *
       <b>Tcl_UtfAtIndex</b>(<u>src,</u> <u>index</u>)

       Tcl_Size
       <b>Tcl_UtfBackslash</b>(<u>src,</u> <u>readPtr,</u> <u>dst</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       char <u>*buf</u> (out)                             Buffer in which the UTF-8 representation of  the  Tcl_UniChar
                                                   is stored.  At most 4 bytes are stored in the buffer.

       int <u>ch</u> (in)                                 The Unicode character to be converted or examined.

       Tcl_UniChar <u>*chPtr</u> (out)                    Filled  with  the  Tcl_UniChar represented by the head of the
                                                   UTF-8 string.

       unsigned <u>short</u> (*uPtr)                      Filled with the utf-16 represented by the head of  the  UTF-8
                                                   string.

       wchar_t <u>*wPtr</u> (out)                         Filled  with the wchar_t represented by the head of the UTF-8
                                                   string.

       const char <u>*src</u> (in)                        Pointer to a UTF-8 string.

       const char <u>*cs</u> (in)                         Pointer to a UTF-8 string.

       const char <u>*ct</u> (in)                         Pointer to a UTF-8 string.

       const Tcl_UniChar <u>*uniStr</u> (in)              A  sequence  of  <b>Tcl_UniChar</b>  units   with   null-termination
                                                   optional depending on function.

       const Tcl_UniChar <u>*ucs</u> (in)                 A null-terminated sequence of <b>Tcl_UniChar</b>.

       const Tcl_UniChar <u>*uct</u> (in)                 A null-terminated sequence of <b>Tcl_UniChar</b>.

       const Tcl_UniChar <u>*uniPattern</u> (in)          A null-terminated sequence of <b>Tcl_UniChar</b>.

       const unsigned short <u>*utf16</u> (in)            A  sequence  of  UTF-16  units with null-termination optional
                                                   depending on function.

       const wchar_t <u>*wcharStr</u> (in)                A sequence of <b>wchar_t</b> units  with  null-termination  optional
                                                   depending on function.

       int <u>numBytes</u> (in)                           The  length  of  the  UTF-8 input in bytes.  If negative, the
                                                   length includes all bytes until the first null byte.

       int <u>numUtf16</u> (in)                           The length of the input in UTF-16 units.   If  negative,  the
                                                   length includes all bytes until the first null.

       int <u>numUniChars</u> (in)                        The  length  of the input in Tcl_UniChar units.  If negative,
                                                   the length includes all bytes until the first null.

       int <u>numWChars</u> (in)                          The length of the input in wchar_t units.  If  negative,  the
                                                   length includes all bytes until the first null.

       Tcl_DString <u>*dsPtr</u> (in/out)                 A pointer to a previously initialized <b>Tcl_DString</b>.

       const char <u>*start</u> (in)                      Pointer to the beginning of a UTF-8 string.

       Tcl_Size <u>index</u> (in)                         The index of a character (not byte) in the UTF-8 string.

       int <u>*readPtr</u> (out)                          If non-NULL, filled with the number of bytes in the backslash
                                                   sequence, including the backslash character.

       char <u>*dst</u> (out)                             Buffer  in  which  the  bytes  represented  by  the backslash
                                                   sequence are stored.  At most  4  bytes  are  stored  in  the
                                                   buffer.

       int <u>nocase</u> (in)                             Specifies whether the match should be done case-sensitive (0)
                                                   or case-insensitive (1).
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  routines  convert  between  UTF-8  strings  and Unicode/Utf-16 characters.  A UTF-8 character is a
       Unicode character represented as a varying-length sequence of up to <b>4</b> bytes.  A multibyte UTF-8  sequence
       consists of a lead byte followed by some number of trail bytes.

       <b>TCL_UTF_MAX</b> is the maximum number of bytes that <b>Tcl_UtfToUniChar</b> can consume in a single call.

       <b>Tcl_UniCharToUtf</b>  stores  the character <u>ch</u> as a UTF-8 string in starting at <u>buf</u>.  The return value is the
       number of bytes stored in <u>buf</u>. The character <u>ch</u> can be or'ed with the value TCL_COMBINE to enable special
       behavior, compatible with Tcl 8.x. Then, if ch is a high surrogate (range U+D800 -  U+DBFF),  the  return
       value  will  be  1  and  a  single byte in the range 0xF0 - 0xF4 will be stored. If <u>ch</u> is a low surrogate
       (range U+DC00 - U+DFFF), an attempt is made to combine  the  result  with  the  earlier  produced  bytes,
       resulting in a 4-byte UTF-8 byte sequence.

       <b>Tcl_UtfToUniChar</b> reads one UTF-8 character starting at <u>src</u> and stores it as a Tcl_UniChar in <u>*chPtr</u>.  The
       return value is the number of bytes read from <u>src</u>.  The caller must ensure that the source buffer is long
       enough  such that this routine does not run off the end and dereference non-existent or random memory; if
       the source buffer is known to be null-terminated, this will not happen.  If the input is a  byte  in  the
       range  0x80 - 0x9F, <b>Tcl_UtfToUniChar</b> assumes the cp1252 encoding, stores the corresponding Tcl_UniChar in
       <u>*chPtr</u> and returns 1. If the input is otherwise not in proper UTF-8 format, <b>Tcl_UtfToUniChar</b>  will  store
       the first byte of <u>src</u> in <u>*chPtr</u> as a Tcl_UniChar between 0x00A0 and 0x00FF and return 1.

       <b>Tcl_UniCharToUtfDString</b> converts the input in the form of a sequence of <b>Tcl_UniChar</b> code points to UTF-8,
       appending  the  result to the previously initialized output <b>Tcl_DString</b>. The return value is a pointer to
       the UTF-8 representation of the <b>appended</b> string.

       <b>Tcl_UtfToUniCharDString</b> converts the input in the form  of  a  UTF-8  encoded  string  to  a  <b>Tcl_UniChar</b>
       sequence  appending  the result in the previously initialized <b>Tcl_DString</b>.  The return value is a pointer
       to the appended result which is also terminated with a <b>Tcl_UniChar</b> null character.

       <b>Tcl_WCharToUtfDString</b>   and   <b>Tcl_UtfToWCharDString</b>   are   similar   to   <b>Tcl_UniCharToUtfDString</b>    and
       <b>Tcl_UtfToUniCharDString</b> except they operate on sequences of <b>wchar_t</b> instead of <b>Tcl_UniChar</b>.

       <b>Tcl_Char16ToUtfDString</b>   and   <b>Tcl_UtfToChar16DString</b>   are   similar   to   <b>Tcl_UniCharToUtfDString</b>  and
       <b>Tcl_UtfToUniCharDString</b> except they operate on sequences of <b>UTF-16</b> units instead of <b>Tcl_UniChar</b>.

       <b>Tcl_Char16Len</b> corresponds to <b>strlen</b> for UTF-16 characters.  It accepts a null-terminated UTF-16  sequence
       and returns the number of UTF-16 units until the null.

       <b>Tcl_WCharLen</b> corresponds to <b>strlen</b> for wchar_t characters.  It accepts a null-terminated <b>wchar_t</b> sequence
       and returns the number of <b>wchar_t</b> units until the null.

       <b>Tcl_UniCharLen</b> corresponds to <b>strlen</b> for Unicode characters.  It accepts a null-terminated Unicode string
       and returns the number of Unicode characters (not bytes) in that string.

       <b>Tcl_UniCharNcmp</b>  and <b>Tcl_UniCharNcasecmp</b> correspond to <b>strncmp</b> and <b>strncasecmp</b>, respectively, for Unicode
       characters.  They accept two null-terminated Unicode strings and the number  of  characters  to  compare.
       Both  strings  are  assumed  to  be at least <u>uniLength</u> characters long. <b>Tcl_UniCharNcmp</b>  compares the two
       strings character-by-character according to the  Unicode  character  ordering.   It  returns  an  integer
       greater  than,  equal  to, or less than 0 if the first string is greater than, equal to, or less than the
       second string respectively.  <b>Tcl_UniCharNcasecmp</b> is the Unicode case insensitive version.

       <b>Tcl_UniCharCaseMatch</b> is the Unicode equivalent to  <b>Tcl_StringCaseMatch</b>.   It  accepts  a  null-terminated
       Unicode  string,  a  Unicode  pattern,  and  a  boolean value specifying whether the match should be case
       sensitive and returns whether the string matches the pattern.

       <b>Tcl_UtfNcmp</b> corresponds to <b>strncmp</b> for UTF-8 strings. It accepts two null-terminated  UTF-8  strings  and
       the  number  of characters to compare.  (Both strings are assumed to be at least <u>length</u> characters long.)
       <b>Tcl_UtfNcmp</b> compares the two strings character-by-character according to the Unicode character  ordering.
       It  returns  an integer greater than, equal to, or less than 0 if the first string is greater than, equal
       to, or less than the second string respectively.

       <b>Tcl_UtfNcasecmp</b> corresponds to <b>strncasecmp</b> for UTF-8  strings.   It  is  similar  to  <b>Tcl_UtfNcmp</b>  except
       comparisons ignore differences in case when comparing upper, lower or title case characters.

       <b>Tcl_UtfCharComplete</b>  returns  1  if  the  source  UTF-8 string <u>src</u> of <u>numBytes</u> bytes is long enough to be
       decoded by <b>Tcl_UtfToUniChar</b>/<b>Tcl_UtfNext</b>, or 0 otherwise.  This function does not guarantee that the UTF-8
       string is properly formed.  This routine is used by procedures that are operating on a byte at a time and
       need to know if a full Unicode character has been seen.

       <b>Tcl_NumUtfChars</b> corresponds to <b>strlen</b> for UTF-8 strings.  It returns the number of Tcl_UniChars that  are
       represented  by the UTF-8 string <u>src</u>.  The length of the source string is <u>length</u> bytes.  If the length is
       negative, all bytes up to the first null byte are used.

       <b>Tcl_UtfFindFirst</b> corresponds to <b>strchr</b> for UTF-8 strings.  It returns a pointer to the  first  occurrence
       of  the  Unicode character <u>ch</u> in the null-terminated UTF-8 string <u>src</u>.  The null terminator is considered
       part of the UTF-8 string.

       <b>Tcl_UtfFindLast</b> corresponds to <b>strrchr</b> for UTF-8 strings.  It returns a pointer to the last occurrence of
       the Unicode character <u>ch</u> in the null-terminated UTF-8 string <u>src</u>.  The null terminator is considered part
       of the UTF-8 string.

       Given <u>src</u>, a pointer to some location in a UTF-8 string, <b>Tcl_UtfNext</b> returns a pointer to the next  UTF-8
       character  in the string.  The caller must not ask for the next character after the last character in the
       string if the string is not terminated by a null character. <b>Tcl_UtfCharComplete</b> can be used in that  case
       to make sure enough bytes are available before calling <b>Tcl_UtfNext</b>.

       <b>Tcl_UtfPrev</b>  is  used  to step backward through but not beyond the UTF-8 string that begins at <u>start</u>.  If
       the UTF-8 string is made up entirely of complete and well-formed characters, and <u>src</u> points to  the  lead
       byte  of  one of those characters (or to the location one byte past the end of the string), then repeated
       calls of <b>Tcl_UtfPrev</b> will return pointers to the  lead  bytes  of  each  character  in  the  string,  one
       character at a time, terminating when it returns <u>start</u>.

       When  the conditions of completeness and well-formedness may not be satisfied, a more precise description
       of the function of <b>Tcl_UtfPrev</b> is necessary.  It always returns a pointer greater than or equal to <u>start</u>;
       that is, always a pointer to a location in the string. It always returns a pointer to a byte that  begins
       a  character when scanning for characters beginning from <u>start</u>. When <u>src</u> is greater than <u>start</u>, it always
       returns a pointer less than <u>src</u> and greater than or equal to (<u>src</u> - 4).  The character that begins at the
       returned pointer is the first one that either includes the byte <u>src[-1]</u>, or might include it if the right
       trail bytes are present at <u>src</u> and greater.  <b>Tcl_UtfPrev</b>  never  reads  the  byte  <u>src[0]</u>  nor  the  byte
       <u>start[-1]</u> nor the byte <u>src[-5]</u>.

       <b>Tcl_UniCharAtIndex</b>  corresponds to a C string array dereference or the Pascal Ord() function.  It returns
       the Unicode character represented at the specified character (not byte) <u>index</u> in the  UTF-8  string  <u>src</u>.
       The source string must contain at least <u>index</u> characters.  If <u>index</u> is negative it returns -1.

       <b>Tcl_UtfAtIndex</b>  returns  a  pointer  to the specified character (not byte) <u>index</u> in the UTF-8 string <u>src</u>.
       The source string must contain at least <u>index</u> characters.  This is equivalent to calling <b>Tcl_UtfToUniChar</b>
       <u>index</u> times.  If <u>index</u> is negative, the return pointer points  to  the  first  character  in  the  source
       string.

       <b>Tcl_UtfBackslash</b>  is  a  utility  procedure  used  by several of the Tcl commands.  It parses a backslash
       sequence and stores the properly formed UTF-8 character represented by  the  backslash  sequence  in  the
       output  buffer  <u>dst</u>.   At  most  4 bytes are stored in the buffer.  <b>Tcl_UtfBackslash</b> modifies <u>*readPtr</u> to
       contain the number of bytes in the backslash sequence, including the  backslash  character.   The  return
       value is the number of bytes stored in the output buffer.

       See  the  <b>Tcl</b>  manual  entry  for  information  on  the  valid backslash sequences.  All of the sequences
       described in the Tcl manual entry are supported by <b>Tcl_UtfBackslash</b>.

</pre><h4><b>KEYWORDS</b></h4><pre>
       utf, unicode, backslash

Tcl                                                    8.1                                             <u><a href="../man3tcl/Utf.3tcl.html">Utf</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>