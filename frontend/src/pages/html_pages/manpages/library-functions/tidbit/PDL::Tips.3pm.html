<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDL::Tips - Small tidbits of useful arcana. Programming tidbits and such.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pdl">pdl_2.100-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       PDL::Tips - Small tidbits of useful arcana. Programming tidbits and such.

</pre><h4><b>SYNOPSIS</b></h4><pre>
               use PDL;

               # Whatever happens here.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This page documents useful idioms, helpful hints and tips for using Perl Data Language v2.0.

   <b>Help</b>
       Use "help help" within <u>perldl</u> or use the "pdldoc" program from the command line for access to the PerlDL
       documentation.  HTML versions of the pages should also be present, in the <u>HtmlDocs/PDL</u> directory of the
       PDL distribution. To find this directory, try the following

        pdl&gt; foreach ( map{"$_/PDL/HtmlDocs"}@INC ) { p "$_\n" if -d $_ }

   <b>Indexing</b> <b>idioms</b>
       The following code normalizes a bunch of vectors in $x.  This works regardless of the dimensionality of
       $x.

               $x /= $x-&gt;sumover-&gt;<a href="../man0/dummy.0.html">dummy</a>(0);

   <b>What</b> <b>is</b> <b>actually</b> <b>happening?</b>
       If you want to see what the code is actually doing, try the command

               PDL::Core::<a href="../man1/set_debugging.1.html">set_debugging</a>(1);

       somewhere. This spews out a huge amount of debug info for PDL into STDOUT. Plans for the future include
       making it possible to redirect the output, and also making it possible to select messages with more
       precision.

       Many of the messages come from "lib/PDL/Core/pdlapi.c" and you can look at the source to see what is
       going on.

       If you have any extra time to work on these mechanisms, inform the pdl-porters mailing list.

   <b>Memory</b> <b>savings</b>
       If you are running recursively something that selects certain indices of a large ndarray, like

               <a href="../man1/while.1.html">while</a>(1) {
                       $inds = where($x&gt;0);
                       $x = $x-&gt;index($inds);
                       $y = $y-&gt;index($inds);
                       func($y,$x);
               }

       If you are not writing to $y, it saves a lot of memory to change this to

                       $y = $y-&gt;index($inds)-&gt;sever;

       The new method "sever" is a causes the write-back relation to be forgotten. It is like copy except it
       changes the original ndarray and returns it).

       Of course, the probably best way to do the above is

               $inds = xvals ($x-&gt;long);
               <a href="../man1/while.1.html">while</a>(1) {
                       $inds0 = where($x&gt;0);
                       $inds1 = $inds-&gt;index($inds)-&gt;sever;
                       $x = $a0-&gt;index($inds1);
                       $y = $y-&gt;index($inds1)-&gt;sever;
                       func($y,$x);
               }

       which doesn't save all the temporary instances of $x in memory.  See "mandel.pl" in the Demos
       subdirectory of the PerlDL distribution for an example.

   <b>PP</b> <b>speed</b>
       If you really want to write speedy PP code, the first thing you need to do is to make sure that your C
       compiler is allowed to do the necessary optimizations.

       What this means is that you have to allow as many variables as possible to go into registers:

               loop(a) %{
                       $a() += $COMP(foo_member) * $b()
               %}

       expands to

               for(i=0; i&lt;10000; i++) {
                       a[i] += __privtrans-&gt;foo_member * b[i];
               }

       is about the worst you can do, since your C compiler is not allowed to assume that "a" doesn't clobber
       "foo_member" which completely inhibits vectorization. Instead, do

               float foo = $COMP(foo_member);
               loop(a) %{
                       $a() += foo * $b();
               %}

       This is not a restriction caused by PP but by ANSI C semantics.  Of course, we could copy the struct into
       local variables and back but that could cause very strange things sometimes.

       There are many other issues on organizing loops.

       We are currently planning to make PP able to do fixed-width things as well as physical ndarrays (where
       looping over the first dimensions would be cheaper as there are less distinct increments, which might
       make a difference on machines with a small number of registers).

</pre><h4><b>AUTHOR</b></h4><pre>
       Copyright (C) Tuomas J. Lukka 1997. All rights reserved.  Duplication in the same form and printing a
       copy for yourself allowed.

perl v5.40.1                                       2025-03-27                                     <u>PDL::<a href="../man3pm/Tips.3pm.html">Tips</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>