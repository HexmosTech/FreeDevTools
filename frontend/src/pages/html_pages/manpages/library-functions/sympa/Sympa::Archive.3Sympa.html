<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sympa::Archive - Archives of Sympa</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sympa">sympa_6.2.76~dfsg-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Sympa::Archive - Archives of Sympa

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Sympa::Archive;
         $archive = Sympa::Archive-&gt;new(context =&gt; $list);

         @arcs = $archive-&gt;get_archives;

         $archive-&gt;store($message);
         $archive-&gt;html_store($message);

         $archive-&gt;select_archive('2015-04');
         ($message, $handle) = $archive-&gt;next;

         $archive-&gt;select_archive('2015-04');
         ($message, $handle) = $archive-&gt;fetch(message_id =&gt; $message_id);
         $archive-&gt;html_remove($message_id);
         $archive-&gt;remove($handle);

         $archive-&gt;html_rebuild('2015-04');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sympa::Archive implements the interface to handle archives.

   <b>Methods</b> <b>and</b> <b>functions</b>
       new ( context =&gt; $list, [ create =&gt; 1 ] )
           <u>Constructor</u>.  Creates new instance of Sympa::Archive.

           Parameter:

           context =&gt; $list
               Context of object, a Sympa::List instance.

           create =&gt; 1
               If  necessary,  creates  directory structure of archive.  Dies if creation fails.  This parameter
               was introduced on Sympa 6.2.47b.

       add_archive ( $arc )
           <u>Instance</u> <u>method</u>.  Adds archive directory named $arc.  Currently, archive directory must have the form
           "YYYY-MM".

       purge_archive ( $arc )
           <u>Instance</u> <u>method</u>.  Removes archive directory and its content entirely.  removed  content  can  not  be
           recovered.

       select_archive ( $arc, [ info =&gt; 1 ] )
           <u>Instance</u> <u>method</u>.  Selects an archive directory.  It will be referred by consequent operations.

       fetch ( message_id =&gt; $message_id )
           <u>Instance</u> <u>method</u>.  Gets a message from archive.  <b>select_archive()</b> must be called in advance.

           Message will be locked to prevent multiple processing of a single message.

           Parameter:

           message_id =&gt; $message_id
               Message ID of the message to be fetched.

           Returns:

           Two-elements list of Sympa::Message instance and filehandle locking a message.

       html_fetch ( file =&gt; $filename )
           <u>Instance</u>  <u>method</u>.   Gets a metadata of formatted message from HTML archive.  <b>select_archive()</b> must be
           called in advance.

           Parameter:

           file =&gt; $filename
               File name of the message to be fetched.

           Returns:

           Hashref.  Note that message won't be locked.

       get_size ( )
           <u>Instance</u> <u>method</u>.  Gets total size of messages in archives.   This  method  was  introduced  on  Sympa
           6.2.17.

       next ( [ reverse =&gt; 1 ] )
           <u>Instance</u> <u>method</u>.  Gets next message in archive.  <b>select_archive()</b> must be called in advance.

           Message will be locked to prevent multiple processing of a single message.

           Parameters:

           None.

           Returns:

           Two-elements list of Sympa::Message instance and filehandle locking a message.

       html_next ( [ reverse =&gt; 1 ] )
           <u>Instance</u>  <u>method</u>.   Gets  next  metadata  of  formatted message in archive.  <b>select_archive()</b> must be
           called in advance.

           Parameters:

           None.

           Returns:

           Hashref.  Note that message will not be locked.

       remove ( $handle )
           <u>Instance</u> <u>method</u>.  Removes a message from archive.

           Parameter:

           $handle
               Filehandle, Sympa::LockedFile  instance,  locking  message.   It  is  returned  by  "fetch"()  or
               "next"().

           Returns:

           True value if message could be removed.  Otherwise false value.

       html_remove ( $message_id )
           <u>Instance</u> <u>method</u>.  TBD.

       store ( $message )
           <u>Instance</u> <u>method</u>.  Stores the message into archive.

           Parameters:

           $message
               A Sympa::Message instance to be stored.  Following attributes and metadata are referred:

               {date}
                   Unix time when the message would be delivered.

           Returns:

           If storing succeeded, marshalled metadata (file name) of the message.  Otherwise "undef".

       html_store ( $message )
           <u>Instance</u> <u>method</u>.  TBD.

       get_archives ( )
           <u>Instance</u>  <u>method</u>.  Gets a list of archive directories this archive contains.  Items of returned value
           may be fed to <b>select_archive()</b> and so on.

       html_rebuild ( $arc )
           <u>Instance</u> <u>method</u>.  Rebuilds archives for the list the name of which is given in the argument $arc.

           Parameters:

           $arc
               A character string containing the name of archive directory in the list which we want to rebuild.

           Returns:

           <u>undef</u> if something goes wrong.

       html_format ( $message, destination_dir =&gt; $destination_dir, attachment_url =&gt; $attachment_url )
           <u>Function</u>.  Converts a message to HTML.

           Parameters:

           $message
               Message to be formatted.  Sympa::Message instance.

           $destination_dir
               The directory result is stored in.

           $attachment_url
               Base URL used to link attachments.

               Note: On 6.2.13 and earlier, this option was named ""attach<b>e</b>ment_url"".

               Note: On 6.2.17 and later, this option may take an arrayref value.  In such case  items  will  be
               percent-encoded and conjuncted.  Otherwise if a string is given, it will not be encoded.

       get_id ( )
           <u>Instance</u> <u>method</u>.  Gets unique identifier of instance.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/archived.8.html">archived</a></b>(8), <b><a href="../man1/mhonarc.1.html">mhonarc</a></b>(1), <b><a href="../man8/wwsympa.8.html">wwsympa</a></b>(8), Sympa::Message.

</pre><h4><b>HISTORY</b></h4><pre>
       Archive was renamed to Sympa::Archive on Sympa 6.2.

6.2.76                                             2025-02-12                             <u>Sympa::<a href="../man3Sympa/Archive.3Sympa.html">Archive</a></u>(3Sympa)
</pre>
 </div>
</div></section>
</div>
</body>
</html>