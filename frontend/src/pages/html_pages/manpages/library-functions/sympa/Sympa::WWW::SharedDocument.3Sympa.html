<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sympa::WWW::SharedDocument - Shared document repository and its nodes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sympa">sympa_6.2.76~dfsg-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Sympa::WWW::SharedDocument - Shared document repository and its nodes

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Sympa::WWW::SharedDocument;

         $shared = Sympa::WWW::SharedDocument-&gt;new($list, $path);

         %access = $shared-&gt;get_privileges('read', $email, 'md5', {...});
         @children = $shared-&gt;get_children;
         $parent = $shared-&gt;{parent};

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sympa::WWW::SharedDocument implements shared document repository of lists.

   <b>Methods</b>
       new ( $list, [ $path, [ allow_empty =&gt; 1 ] ] )
           <u>Constructor</u>.  Creates new instance.

           Parameters:

           $list
               A Sympa::List instance.

           $path
               String  to  determine  path  or  arrayref of path components.  The path is relative to repository
               root.

           allow_empty =&gt; 1
               Don't omit files with zero size.

           Returns:

           If $path is empty or not specified, returns new instance of repository root; {status} attribute  will
           be  set.  If $path is not empty and the path exists, returns new instance of node.  Otherwise returns
           false value.

       as_hashref ( )
           <u>Instance</u> <u>method</u>.  Casts the instance to hashref.

           Parameters:

           None.

           Returns:

           A hashref including attributes of instance (see "Attributes") and following special items:

           {ancestors}
               Arrayref of hashrefs including some attributes of all ancestor nodes.

           {context}
               Hashref including name and host of the list.

           {date}
               Localized form of {date_epoch}.

           {parent}
               Hashref including attributes of parent node recursively.

           {paths_d}
               Same as {paths} but, if the node is a directory, includes additional empty component at the  end.
               This is useful when the path created by <b>join()</b> should be followed by additional "/" character.

       count_children ( )
           <u>Instance</u> <u>method</u>.  Returns number of child nodes.

       count_moderated_descendants ( )
           <u>Instance</u> <u>method</u>.  Returns number of nodes waiting for moderation.

       create_child ( $name, owner =&gt; $email, scenario =&gt; $scenario, type =&gt; $type, [ content =&gt; $content ] )
           <u>Instance</u> <u>method</u>.  Creates child node and returns it.  TBD.

       get_children ( [ moderate =&gt; boolean ], [ name =&gt; $name ], [ order_by =&gt; $order ], [ owner =&gt; $email ], [
       allow_empty =&gt; 1 ] )
           <u>Instance</u> <u>method</u>.  Gets child nodes.

           Parameters:

           moderate =&gt; boolean
           name =&gt; $name
           owner =&gt; $email
               Filters results.

           order_by =&gt; $order
               Sorts  results.   $order  may  be one of 'order_by_doc' (by name of nodes), 'order_by_author' (by
               owner), 'order_by_size' (by size), 'order_by_date' (by modification time).  Default  is  ordering
               by names.

           allow_empty =&gt; 1
               Don't omit nodes with zero size.

           Returns:

           (Possibly empty) list of child nodes.

       get_moderated_descendants ( )
           <u>Instance</u> <u>method</u>.  Returns the list of nodes waiting for moderation.

           Parameters:

           None.

           Returns:

           In array context, a list of nodes.  In scalar context, an arrayref of them.

       get_privileges ( mode =&gt; $mode, sender =&gt; $sender, auth_method =&gt; $auth_method, scenario_context =&gt;
       $scenario_context )
           <u>Instance</u> <u>method</u>.  Gets privileges of a user on the node.

           TBD.

       get_size ( )
           <u>Instance</u> <u>method</u>.  Gets total size under current node.

       install ( )
           <u>Instance</u> <u>method</u>.  Approves (install) file if it was held for moderation.

           Returns:

           True value.  If installation failed, returns false value and sets $ERRNO ($!).

       rename ( $new_name )
           <u>Instance</u> <u>method</u>.  Renames file or directory.

           Parameters:

           $new_name
               The name to be renamed to.

           Returns:

           True value.  If renaming failed, returns false value and sets $ERRNO ($!).

       rmdir ( )
           <u>instance</u> <u>method</u>.  Removes directory from repository.  Directory must be empty.

           Returns:

           True value.  If removal failed, returns false value and sets $ERRNO ($!).

       save_description ( )
           <u>Instance</u> <u>method</u>.  Creates or updates property description of the node.

       unlink ( )
           <u>instance</u> <u>method</u>.  Removes file from repository.

           Returns:

           True value.  If removal failed, returns false value and sets $ERRNO ($!).

       get_id ( )
           <u>Instance</u> <u>method</u>.  Returns unique identifier of instance.

       <u>Methods</u> <u>for</u> <u>repository</u> <u>root</u>

       create ( )
           <u>Instance</u> <u>method</u>.  Creates document repository on physical filesystem.

       delete ( )
           <u>Instance</u> <u>method</u>.  Deletes document repository.

       restore ( )
           <u>Instance</u> <u>method</u>.  Restores deleted document repository.

   <b>Functions</b>
       valid_name ( $new_name )
           <u>Function</u>.  Check if the name is allowed for directory and file.

           Note:  This  should be used with name of newly created node.  Existing files and directories may have
           the name not allowed by this function.

   <b>Attributes</b>
       Instance of Sympa::WWW::SharedDocument may have following attributes.

       {context}
           <u>Mandatory</u>.  Instance of Sympa::List class the shared document repository belongs to.

       {date_epoch}
           <u>Mandatory</u>.  Modification time of node in Unix time.

       {file_extension}
           File extension if any.

       {fs_name}
           <u>Mandatory</u>.  Name of node on physical filesystem, i.e. the last part of {fs_path}.

       {fs_path}
           <u>Mandatory</u>.  Full path of node on physical filesystem.

       {html}
           Only in HTML file.  True value will be set.

       {icon}
           URL to icon.

       {label}
           Only in bookmark file.  Label to be shown in hyperlink.

       {mime_type}
           Only in regular file.  MIME content type of the file if it is known.

       {moderate}
           Set if node is held for moderation.

       {name}
           <u>Mandatory</u>.  Name of node accessible by users, i.e. the last item of {paths}.

       {owner}
           Owner (author) of node, given by property description.

       {parent}
           Parent node if any.  Sympa::WWW::SharedDocument instance.

       {paths}
           <u>Mandatory</u>.  Arrayref to all path components of node accessible by users.

       {scenario}{read}
       {scenario}{edit}
           Scenario names to define privileges.  These may be given by property description.

       {serial_desc}
           Modification time of property description in Unix time.  Available if property description exists.

       {size}
           Size of file.

       {status}
           <u>Only</u> <u>in</u> <u>repository</u> <u>root</u>.  Status of repository: 'exist', 'deleted' or 'none'.

       {title}
           Description of node, given by property description.

       {type}
           <u>Mandatory</u>.  Type of node.  'root' (the root of repository), 'directory' (directory), 'url'  (bookmark
           file) or 'file' (other file).

       {url}
           Only in bookmark file.  URL to be linked.

</pre><h4><b>FILES</b></h4><pre>
       <u>list</u> <u>home</u>/shared/
           Root of repository.

       <u>...</u> <u>path</u>/<u>name</u>
           Directory or file.

       <u>...</u> <u>path</u><a href="file:/.">/.</a><u>name</u>.moderate
           Moderated directory or file.

       <u>...</u> <u>path</u>/<u>name</u>/.desc
       <u>...</u> <u>path</u>/.desc.<u>name</u>
       <u>...</u> <u>path</u>/.desc..<u>name</u>.moderate
           Property description of directories or files, not moderated or moderated.

       Note: The path components ("<u>name</u>" above) are encoded to the format suitable to physical filesystem.  Such
       conversion will be hidden behind object methods.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Sympa::List, "qdecode_filename" in Sympa::Tools::Text, "qencode_filename" in Sympa::Tools::Text.

</pre><h4><b>HISTORY</b></h4><pre>
       SharedDocument module appeared on Sympa 5.2b.2.

       Rewritten Sympa::SharedDocument began to provide OO interface on Sympa 6.2.17.

       It was renamed to Sympa::WWW::SharedDocument on Sympa 6.2.26.

6.2.76                                             2025-02-12                 <u>Sympa::WWW::<a href="../man3Sympa/SharedDocument.3Sympa.html">SharedDocument</a></u>(3Sympa)
</pre>
 </div>
</div></section>
</div>
</body>
</html>