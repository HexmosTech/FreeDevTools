<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net::SIP::Dispatcher::Eventloop - simple event loop for Net::SIP::Dispatcher</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnet-sip-perl">libnet-sip-perl_0.838-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Net::SIP::Dispatcher::Eventloop - simple event loop for Net::SIP::Dispatcher

</pre><h4><b>SYNOPSIS</b></h4><pre>
         my $loop = Net::SIP::Dispatcher::Eventloop-&gt;new;
         $loop-&gt;addFD( $fd, $callback );
         $loop-&gt;add_timer( 10,$callback );
         $loop-&gt;loop;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The package implements a simple event loop. It's not optimized for speed but it is provided as a simple
       implementation in case the users application does not has an event loop yet.

       Because the eventloop object can be given in the constructor of Net::SIP::Dispatcher you might provide an
       alternative implementation, which implemented the described methods.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       new Creates new event loop, returns created object

</pre><h4><b>METHODS</b></h4><pre>
       addFD (HANDLE, RW, CALLBACK, [NAME])
           Adds  file handle HANDLE to the event loop, so that CALLBACK gets triggered if HANDLE is readable (<b>RW</b>
           0) or writeable (<b>RW</b> 1). Instead of 0 and 1 one can also use  the  exported  constants  "EV_READ"  and
           "EV_WRITE".  CALLBACK is a callback accepted by <b>invoke_callback</b> in Net::SIP::Util.  The callback will
           be invoked with HANDLE as an additional argument.

           NAME can be used to aid debugging, it will be shown in the debug messages once the FD gets ready.

           If there was already a callback for HANDLE it gets replaced by the new one.

           IMPORTANT NOTE: CALLBACK gets triggered if HANDLE *is* readable inside the loop, not if HANDLE *gets*
           readable.  Unlike  with  Event::Lib  or similar the CALLBACK is not triggered by the edge, but by the
           level (like <b><a href="../man2/poll.2.html">poll</a></b>(2) or <b><a href="../man2/select.2.html">select</a></b>(2)). So if 2 bytes come in at the handle and one reads only 1  byte  in
           the callback the callback gets triggered again for more data.  You have to watch this, if you want to
           integrate Net::SIP with your existing event loop.

       delFD (HANDLE, [RW])
           If  <b>RW</b>  is 0 (EV_READ) no more checking for readability of <b>HANDLE</b> will be done. If <b>RW</b> is 1 (EV_WRITE)
           no more checking for writeability of <b>HANDLE</b> will be done.  If <b>RW</b> is not given it will  remove  <b>HANDLE</b>
           from the loop completely, i.e.  for both read and write.

       add_timer( WHEN, CALLBACK, [ REPEAT ] )
           Adds  timer  which  gets  triggered  at  WHEN or "now + WHEN". Depending on the value of WHEN it gets
           interpreted as the number of seconds since 1970-01-01 (when it's really big) or as  a  relative  time
           (when it's not that big).  WHEN can be floating point for subseconds resolution.

           CALLBACK is a callback accepted by <b>invoke_callback</b> in Net::SIP::Util.  It gets invoked with the timer
           object (see later) as an additional argument, which has a method <b>cancel</b> for canceling the (repeating)
           timer.

           REPEAT  is  the number of seconds between each invocation of the timer. If greater then 0 (subsection
           resolution possible) the callback will be called each REPEAT seconds, after it was called  the  first
           time at WHEN.

           The  method  will  return  an  object which has a method <b>cancel</b> which can be used to cancel the timer
           before it gets triggered (or gets triggered the next time in case of repeating timers).

       looptime
           Returns the current loop time in subseconds resolution (using <b>gettimeofday</b> from Time::HiRes). This is
           not the current time, but the time, when the last event in the loop occurred (e.g. when the <b><a href="../man2/select.2.html">select</a></b>(2)
           call returned)

       loop ( [ TIMEOUT, @STOPVAR ] )
           The main loop, e.g. continuiosly checks timers and file handles for the events and calls callbacks.

           If TIMEOUT is given it will run the loop for at most TIMEOUT seconds, then the  method  will  return.
           Undefined  TIMEOUT  means that it will never return because of timeout and TIMEOUT of 0 means that it
           will check all timers and handles only once and then return.

           @STOPVAR is a list of scalar references. These scalars are expected to be changed from the callbacks,
           so it will check after each loop cycle, e.g.  after all callbacks are called (timers and handles)  if
           any of these scalars is TRUE, in which case it will end the loop.

           The  behavior  with  STOPVAR  cannot be found in most existing event loops.  If you want to integrate
           Net::SIP with your own event loop you might simply wrap all callbacks given in <b>addFD</b> and <b>add_timer</b> in
           another callback which at the end checks the stopvars and terminates the 3rd-party loop  in  a  loop-
           specific way.

       reset
           This  will  remove  any  fd  and  timers and their associated callbacks from the loop.  This might be
           necessary to release ressources if the loop should be stopped and any ressources should be  freed  up
           immediately, instead of being implicitly freed up and end of program.

perl v5.40.0                                       2024-09-08               <u>Net::SIP::Dispatcher::<a href="../man3pm/Eventloop.3pm.html">Eventloop</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>