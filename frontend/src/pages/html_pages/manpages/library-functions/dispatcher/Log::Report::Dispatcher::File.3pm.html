<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log::Report::Dispatcher::File - send messages to a file or file-handle</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblog-report-perl">liblog-report-perl_1.40-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Log::Report::Dispatcher::File - send messages to a file or file-handle

</pre><h4><b>INHERITANCE</b></h4><pre>
        Log::Report::Dispatcher::File
          is a Log::Report::Dispatcher

</pre><h4><b>SYNOPSIS</b></h4><pre>
        dispatcher Log::Report::Dispatcher::File =&gt; 'stderr'
          , to =&gt; \*STDERR, accept =&gt; 'NOTICE-';

        # close a dispatcher
        dispatcher close =&gt; 'stderr';

        # let dispatcher open and close the file
        dispatcher FILE =&gt; 'mylog', to =&gt; '/var/log/mylog'
          , charset =&gt; 'utf-8';
        ...
        dispatcher close =&gt; 'mylog';  # will close file

        # open yourself, then also close yourself
        open OUT, "&gt;:encoding('iso-8859-1')", '/var/log/mylog'
            or fault "...";
        dispatcher FILE =&gt; 'mylog', to =&gt; \*OUT;
        ...
        dispatcher close =&gt; 'mylog';
        close OUT;

        # dispatch into a scalar
        my $output = '';
        open $outfile, '&gt;', \$output;
        dispatcher FILE =&gt; 'into-scalar', to =&gt; \$outfile;
        ...
        dispatcher close =&gt; 'into-scalar';
        print $output;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This basic file logger accepts an file-handle or filename as destination.

       [1.00] writing to the file protected by a lock, so multiple processes can write to the same file.

       Extends "DESCRIPTION" in Log::Report::Dispatcher.

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Log::Report::Dispatcher.

   <b>Constructors</b>
       Extends "Constructors" in Log::Report::Dispatcher.

       $obj-&gt;<b>close</b>()
           Only  when  initiated  with  a FILENAME, the file will be closed.  In any other case, nothing will be
           done.

       Log::Report::Dispatcher::File-&gt;<b>new</b>($type, $name, %options)
            -Option       --Defined in             --Default
             accept         Log::Report::Dispatcher  depend on mode
             charset        Log::Report::Dispatcher  LOCALE
             format                                  &lt;adds timestamp&gt;
             format_reason  Log::Report::Dispatcher  'LOWERCASE'
             locale         Log::Report::Dispatcher  &lt;system locale&gt;
             mode           Log::Report::Dispatcher  'NORMAL'
             replace                                 false
             to                                      &lt;required&gt;

           accept =&gt; REASONS
           charset =&gt; CHARSET
           format =&gt; CODE|'LONG'
             [1.00] process each printed line.  By default, this adds a timestamp,  but  you  may  want  to  add
             hostname, process number, or more.

                format =&gt; sub { '['.localtime().'] '.$_[0] }
                format =&gt; sub { shift }   # no timestamp
                format =&gt; 'LONG'

             The  first  parameter  to  format is the string to print; it is already translated and trailed by a
             newline.  The second parameter is the text-domain (if known).

             [1.10] As third parameter, you get the $msg raw object as well (maybe you want to use  the  message
             context?)   [1.19]  After  the  three positional parameters, there may be a list of pairs providing
             additional facts about the exception.  It may contain "location" information.

             The "LONG" format is equivalent to:

               my $t = strftime "%FT%T", gmtime;
               "[$t $$] $_[1] $_[0]"

             Use of context:

                format =&gt; sub { my ($msgstr, $domain, $msg, %more) = @_;
                   my $host = $msg-&gt;context-&gt;{host};
                   "$host $msgstr";
                }

           format_reason =&gt; 'UPPERCASE'|'LOWERCASE'|'UCFIRST'|'IGNORE'|CODE
           locale =&gt; LOCALE
           mode =&gt; 'NORMAL'|'VERBOSE'|'ASSERT'|'DEBUG'|0..3
           replace =&gt; BOOLEAN
             Only used in combination with a FILENAME: throw away the old file if it exists.  Probably you  wish
             to append to existing information.

             Use  the  LOCALE setting by default, which is LC_CTYPE or LC_ALL or LANG (in that order).  If these
             contain a character-set which Perl understands, then that is used, otherwise silently ignored.

           to =&gt; FILENAME|FILEHANDLE|OBJECT|CODE
             You can either specify a FILENAME, which is opened in append mode with autoflush on.  Or  pass  any
             kind  of  FILE-HANDLE  or  some OBJECT which implements a print() method. You probably want to have
             autoflush enabled on your FILE-HANDLES.

             When cleaning-up the dispatcher, the file will only be closed in case of a FILENAME.

             [1.10] When you pass a CODE, then for each log message the function is called with  two  arguments:
             this  dispatcher  object  and  the message object.  In some way (maybe via the message context) you
             have to determine the log filename.  This means that probably many log-files are open at  the  same
             time.

                # configuration time
                dispatcher FILE =&gt; 'logfile', to =&gt;
                    sub { my ($disp, $msg) = @_; $msg-&gt;context-&gt;{logfile} };

                # whenever you want to change the logfile
                textdomain-&gt;updateContext(logfile =&gt; '/var/log/app');
                (textdomain 'mydomain')-&gt;setContext(logfile =&gt; '/var/log/app');

                # or
                error __x"help", _context =&gt; {logfile =&gt; '/dev/tty'};
                error __x"help", _context =&gt; "logfile=/dev/tty";

   <b>Accessors</b>
       Extends "Accessors" in Log::Report::Dispatcher.

       $obj-&gt;<b>filename</b>()
           Returns  the  name  of  the  opened file, or "undef" in case this dispatcher was started from a file-
           handle or file-object.

       $obj-&gt;<b>format</b>()
       $obj-&gt;<b>isDisabled</b>()
           Inherited, see "Accessors" in Log::Report::Dispatcher

       $obj-&gt;<b>mode</b>()
           Inherited, see "Accessors" in Log::Report::Dispatcher

       $obj-&gt;<b>name</b>()
           Inherited, see "Accessors" in Log::Report::Dispatcher

       $obj-&gt;<b>needs</b>( [$reason] )
           Inherited, see "Accessors" in Log::Report::Dispatcher

       $obj-&gt;<b>output</b>($msg)
           Returns the file-handle to write the log lines to. [1.10] This may depend  on  the  $msg  (especially
           message context)

       $obj-&gt;<b>type</b>()
           Inherited, see "Accessors" in Log::Report::Dispatcher

   <b>File</b> <b>maintenance</b>
       $obj-&gt;<b>rotate</b>($filename|CODE)
           [1.00] Move the current file to $filename, and start a new file.

   <b>Logging</b>
       Extends "Logging" in Log::Report::Dispatcher.

       $obj-&gt;<b>addSkipStack</b>(@CODE)
       Log::Report::Dispatcher::File-&gt;<b>addSkipStack</b>(@CODE)
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>collectLocation</b>()
       Log::Report::Dispatcher::File-&gt;<b>collectLocation</b>()
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>collectStack</b>( [$maxdepth] )
       Log::Report::Dispatcher::File-&gt;<b>collectStack</b>( [$maxdepth] )
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>log</b>(HASH-$of-%options, $reason, $message, $domain)
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>skipStack</b>()
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>stackTraceLine</b>(%options)
       Log::Report::Dispatcher::File-&gt;<b>stackTraceLine</b>(%options)
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>translate</b>(HASH-$of-%options, $reason, $message)
           Inherited, see "Logging" in Log::Report::Dispatcher

</pre><h4><b>DETAILS</b></h4><pre>
       Extends "DETAILS" in Log::Report::Dispatcher.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This  module  is  part  of  Log-Report  distribution  version  1.40,  built  on  April 18, 2025. Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2007-2025 by [Mark Overmeer &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]. For other contributors see ChangeLog.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-20                 <u>Log::Report::Dispatcher::<a href="../man3pm/File.3pm.html">File</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>