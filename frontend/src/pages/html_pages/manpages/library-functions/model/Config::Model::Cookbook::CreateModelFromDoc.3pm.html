<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config::Model::Cookbook::CreateModelFromDoc - Create a configuration model from application documentation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libconfig-model-perl">libconfig-model-perl_2.155-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Config::Model::Cookbook::CreateModelFromDoc - Create a configuration model from application documentation

</pre><h4><b>VERSION</b></h4><pre>
       version 2.155

</pre><h4><b>Introduction</b></h4><pre>
       This page shows step by step how was created "Popcon"'s model from "Popcon" documentation provided as
       comments in "Popcon"'s sample configuration file.

</pre><h4><b>Popcon"</b> <b>configuration</b> <b>file</b></h4><pre>
       A quick looks in "<a href="file:/etc">/etc</a>" directory shows that "Popcon"'s configuration is stored in
       "/etc/popularity-contest.conf&lt;/t":

        # Config file for Debian's popularity-contest package.
        #
        # To change this file, use:
        #        dpkg-reconfigure popularity-contest
        #
        # You can also edit it by hand, if you so choose.
        #
        # See /usr/share/popularity-contest/default.conf for more info
        # on the options.

        MY_HOSTID="172921501FFFFFAAAA6897etc"
        PARTICIPATE="yes"
        USEHTTP="yes"
        DAY="5"

       The important part is the mention of "default.conf" which contains all the required information to create
       "Popcon"'s configuration model.

</pre><h4><b>Popcon"</b> <b>documentation</b></h4><pre>
       Let's start from "default.conf" file. Since this file is loaded by "popcon" <u>before</u> loading
       "/etc/popularity-contest.conf&lt;/t", all values there can be used as application default values (aka
       <u>upstream_default</u>):

        # Default config file for Debian's popularity-contest package.
        #
        # Local overrides are in /etc/popularity-contest.conf

        # PARTICIPATE can be one of "yes" or "no".
        # If you don't want to participate in the contest, say "no"
        # and we won't send messages.
        #
        # If this option is missing, the default is "no".
        #
        PARTICIPATE="no"

        # MAILTO specifies the address to e-mail statistics to each week.
        #
        MAILTO="<a href="mailto:survey@popcon.debian.org">survey@popcon.debian.org</a>"

        # MAILFROM is the forged sender email address you want to use in
        # email submitted to the popularity-contest.  If this is commented
        # out, no From: or Sender: lines will be added to the outgoing mail,
        # and it will be your MTA's job to add them.  This is usually what
        # you want.
        #
        # If your MTA is misconfigured or impossible to configure correctly,
        # and it always generates invalid From: and/or Sender: lines, you
        # can force different results by setting MAILFROM here.  This can
        # cause problems with spam bouncers, so most people should leave it
        # commented out.
        #
        #MAILFROM="<a href="mailto:root@example.org">root@example.org</a>"

        # SUBMITURLS is a space separated list of where to submit
        # popularity-contest reports using http.
        SUBMITURLS="<a href="http://popcon.debian.org/cgi-bin/popcon.cgi">http://popcon.debian.org/cgi-bin/popcon.cgi</a>"

        # USEHTTP enables http reporting.   Set this to 'yes' to enable it.
        USEHTTP="yes"

        # HTTP_PROXY allows one to specify an HTTP proxy server, the syntax is
        # HTTP_PROXY="<a href="http://proxy">http://proxy</a>:port". This overrides the environment
        # variable http_proxy.

        # MY_HOSTID is a secret number that the popularity-contest receiver
        # uses to keep track of your submissions.  Whenever you send in a
        # new entry, it overwrites the last one that had the same HOSTID.
        #
        # This key was generated automatically so you should normally just
        # leave it alone.
        #
        #MY_HOSTID="_ID_"

       This file contains everything we need:

       •   Parameter names

       •   Documentation

       •   Default values

       Now,  we  will use our favorite editor to edit this file and add YAML tags that can be understood by "cme
       meta edit"

</pre><h4><b>Creating</b> <b>the</b> <b>YAML</b> <b>skeleton</b></h4><pre>
       "cme meta edit" is able to load a model described in YAML.  To  do  this  the  above  file  needs  to  be
       translated in YAML. That's not as complicated as it may sound.

       First, a YAML file must begin with <b>---</b>. Then the class must be declared:

        ---
        class:
          PopCon:

       Note  that,  like with Python language, the indentation is important to define the structure of the file.
       Here, the "PopCon" class is followed by a ':' as it defines a new hierarchical  level  to  describes  the
       configuration elements of this class:

            element:

       Now  we  can  deal  with the configuration parameters. Let's detail the "PARTICIPATE" element. Here's the
       spec in from "default.conf":

        # PARTICIPATE can be one of "yes" or "no".
        # If you don't want to participate in the contest, say "no"
        # and we won't send messages.
        #
        # If this option is missing, the default is "no".
        #
        PARTICIPATE="no"

       In the YAML file, the comments are moved in the "description" field and the value in the file is used  as
       upstream default:

             PARTICIPATE:
               upstream_default: no
               description: &gt;
                If you don't want to participate in the contest,
                say "no" and we won't send messages.

       Likewise for the remaining parameters:

             MAILTO:
               description: &gt;
                specifies the address to e-mail statistics to each week.
               default: '<a href="mailto:survey@popcon.debian.org">survey@popcon.debian.org</a>'
             MAILFROM:
               description: &gt;-
                MAILFROM is the forged sender email address you want to use
                in email submitted to the popularity-contest.  If this is
                commented out, no From: or Sender: lines will be added to the
                outgoing mail, and it will be your MTA's job to add them.  This
                is usually what you want.

                If your MTA is misconfigured or
                impossible to configure correctly, and it always generates
                invalid From: and/or Sender: lines, you can force different
                results by setting MAILFROM here.  This can cause problems with
                spam bouncers, so most people should leave it commented out.

       In the description above, the "chimping" marker '-' after '&gt;' is used to keep paragraph formatting in the
       help.

             SUBMITURLS:
               description: &gt;
                Space separated list of where to submit popularity-contest
                reports using http.
               default: &gt;
                <a href="http://popcon.debian.org/cgi-bin/popcon.cgi">http://popcon.debian.org/cgi-bin/popcon.cgi</a>

             USEHTTP:
               description: &gt;
                enables http reporting.   Set this to 'yes' to enable it.
               default: "yes"

             HTTP_PROXY:
               description: &gt;
                allows one to specify an HTTP proxy server, the syntax is
                "<a href="http://proxy">http://proxy</a>:port". This overrides the environment variable
                http_proxy.

             MY_HOSTID:
               description: &gt;-
                secret number that the popularity-contest receiver uses to
                keep track of your submissions.  Whenever you send in a new
                entry, it overwrites the last one that had the same HOSTID.

                This key was generated automatically so you should normally
                just leave it alone.

</pre><h4><b>Loading</b> <b>the</b> <b>YAML</b> <b>skeleton</b></h4><pre>
       Now that the YAML file was created, you can turn it into a model and load it in the model editor GUI with
       the following command:

        cme meta edit popcon -load-yaml popcon.yml -force

       Note that the model is incomplete: some mandatory parameters are missing from the YAML file so the <u>-force</u>
       option must be used. These missing parameters are also flagged with a red cross in the GUI.

</pre><h4><b>Completing</b> <b>missing</b> <b>model</b> <b>parts</b></h4><pre>
       To  complete  the model, the easiest way is to run the wizard to complete the missing values. In the GUI,
       you can use the menu "File -&gt; wizard" to launch the wizard.  Then click on the 'OK'  button  in  the  new
       window.

       The wizard will first stop on the parameter list (not because there's an error, but because the parameter
       list is flagged as <u>important</u>)

       There, you can re-order the parameters by selecting one and clicking on one of the blue arrows to move it
       up or down. Once you're satisfied, click on <u>Next</u>.

       The  widget  will  now stop on the first missing information. Just select the correct type ('leaf' here),
       click 'store' and 'Next'.

       You can repeat these steps until the wizard exits.

</pre><h4><b>Specifying</b> <b>read</b> <b>and</b> <b>write</b> <b>backend</b></h4><pre>
       Once the model is complete, it's time to specify how to read  and  write  the  file.  In  "Popcon"  class
       specification:

       •   right-click on <u>read_config</u>

       •   click on <u>push</u> <u>new</u> <u>node</u> to create a new read specification

       •   right-click on the created item (shown at index "<u>0</u>")

       You will get a window showing you the parameters to fill to specify the read backend.

       Now  fill  the blank on the right side. The backend to use is "ShellVar" since <u>popularity-contest.conf</u> is
       made of shell variables.

       Since the write specification is identical, there's no need to specify  it.  Config::Model  will  do  the
       right thing.

</pre><h4><b>Testing</b> <b>the</b> <b>model</b></h4><pre>
       You  can test the model by clicking on menu "Test -&gt; Model". You will be shown the "Popcon" configuration
       editor GUI. The same that your users will get.

       If everything is fine, you can quit the model editor (menu File-&gt;quit)

</pre><h4><b>The</b> <b>resulting</b> <b>model</b></h4><pre>
       The model you have just created is stored in "lib/Config/Model/models/Popcon.pl".

       You can test directly this model with :

         cme edit -dev -try Popcon

</pre><h4><b>Feedback</b> <b>welcome</b></h4><pre>
       Feel free to send comments and suggestion about this page to the author.

</pre><h4><b>AUTHORS</b></h4><pre>
       Dominique Dumont &lt;ddumont at cpan.org&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2005-2022 by Dominique Dumont.

       This is free software, licensed under:

         The GNU Lesser General Public License, Version 2.1, February 1999

perl v5.40.0                                       2024-11-30              <u>Config::Model:...<a href="../man3pm/ateModelFromDoc.3pm.html">ateModelFromDoc</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>