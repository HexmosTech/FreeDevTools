<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config::Model::BackendMgr - Load configuration node on demand</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libconfig-model-perl">libconfig-model-perl_2.155-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Config::Model::BackendMgr - Load configuration node on demand

</pre><h4><b>VERSION</b></h4><pre>
       version 2.155

</pre><h4><b>SYNOPSIS</b></h4><pre>
        # Use BackendMgr to write data in Yaml file
        # This example requires Config::Model::Backend::Yaml which is now
        # shipped outside of Config::Model. Please get it on CPAN
        use Config::Model;

        # define configuration tree object
        my $model = Config::Model-&gt;new;
        $model-&gt;create_config_class(
           name    =&gt; "Foo",
           element =&gt; [
               [qw/foo bar/] =&gt; {
                   type       =&gt; 'leaf',
                   value_type =&gt; 'string'
               },
           ]
        );

        $model-&gt;create_config_class(
           name =&gt; "MyClass",

           # rw_config spec is used by Config::Model::BackendMgr
           rw_config =&gt; {
               backend     =&gt; 'yaml',
               config_dir  =&gt; '<a href="file:/tmp/">/tmp/</a>',
               file        =&gt; 'my_class.yml',
               auto_create =&gt; 1,
           },

           element =&gt; [
               [qw/foo bar/] =&gt; {
                   type       =&gt; 'leaf',
                   value_type =&gt; 'string'
               },
               hash_of_nodes =&gt; {
                   type       =&gt; 'hash',     # hash id
                   index_type =&gt; 'string',
                   cargo      =&gt; {
                       type              =&gt; 'node',
                       config_class_name =&gt; 'Foo'
                   },
               },
           ],
        );

        my $inst = $model-&gt;instance( root_class_name =&gt; 'MyClass' );

        my $root = $inst-&gt;config_root;

        # put data
        my $steps = 'foo=FOO hash_of_nodes:fr foo=bonjour -
          hash_of_nodes:en foo=hello ';
        $root-&gt;load( steps =&gt; $steps );

        $inst-&gt;write_back;

        # now look at file /tmp/my_class.yml

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class provides a way to specify how to load or store configuration data within the model.

       With these specifications, all configuration information is read during creation of a node (which
       triggers the creation of a backend manager object) and written back when write_back method is called
       either on the instance.

       This load/store can be done with different backends:

       •   Any   of   the   "Config::Model::Backend::*"   classes   available  on  your  system.   For  instance
           "Config::Model::Backend::Yaml".

       •   "cds_file": Config dump string (cds) in a file. I.e.  a  string  that  describes  the  content  of  a
           configuration  tree  is  loaded from or saved in a text file. This format is defined by this project.
           See "load string syntax" in Config::Model::Loader.

       •   "perl_file": Perl data structure (perl) in a file. See Config::Model::DumpAsData for details  on  the
           data structure. Now handled by Config::Model::Backend::PerlFile

       When  needed,  "write_back"  method  can be called on the instance (See Config::Model::Instance) to store
       back all configuration information.

</pre><h4><b>Backend</b> <b>specification</b></h4><pre>
       The backend specification is provided as an  attribute  of  a  Config::Model::Node  specification.  These
       attributes  are  optional: A node without "rw_config" attribute must rely on another node to read or save
       its data.

       When needed (usually for the root node), the configuration class is declared with a "rw_config" parameter
       which specifies the read/write backend configuration.

   <b>Parameters</b> <b>available</b> <b>for</b> <b>all</b> <b>backends</b>
       The following parameters are accepted by all backends:

       config_dir
           Specify configuration directory. This parameter is optional as the directory can be hardcoded in  the
           backend   class.   "config_dir"   beginning   with   '"~"'   is   munged   so   "~"  is  replaced  by
           "File::HomeDir-&gt;my_data".  See File::HomeDir for details.

       file
           Specify configuration file name (without the path). This parameter is optional as the file  name  can
           be hardcoded in the backend class.

           The  configuration  file  name can be specified with &amp;index keyword when a backend is associated to a
           node contained in a hash. For instance, with "file" set to "&amp;index.conf":

            service    # hash element
              foo      # hash index
                nodeA  # values of nodeA are stored in foo.conf
              bar      # hash index
                nodeB  # values of nodeB are  stored in bar.conf

           Likewise, the keyword &amp;element can be used to specify the file name. For instance, with "file" set to
           "&amp;element-&amp;index.conf":

            service    # hash element
              foo      # hash index
                nodeA  # values of nodeA are stored in service.foo.conf
              bar      # hash index
                nodeB  # values of nodeB are  stored in service.bar.conf

       file_mode
           "file_mode" parameter can be used to set the mode of the written file(s). "file_mode" value can be in
           any form supported by "chmod" in Path::Tiny. Example:

             file_mode =&gt; 0664,
             file_mode =&gt; '0664',
             file_mode =&gt; 'g+w'

       os_config_dir
           Specify alternate location of a configuration directory depending on the OS (as returned by $^O,  see
           "PLATFORMS" in perlport).  For instance:

            config_dir =&gt; '<a href="file:/etc/ssh">/etc/ssh</a>',
            os_config_dir =&gt; { darwin =&gt; '<a href="file:/etc">/etc</a>' }

       default_layer
           Optional.  Specifies  where  to  find  a global configuration file that specifies default values. For
           instance, this is used by OpenSSH to specify a global configuration file ("<a href="file:/etc/ssh/ssh_config">/etc/ssh/ssh_config</a>") that
           is overridden by user's file:

            default_layer =&gt; {
               os_config_dir =&gt; { 'darwin' =&gt; '<a href="file:/etc">/etc</a>' },
               config_dir    =&gt; '<a href="file:/etc/ssh">/etc/ssh</a>',
               file          =&gt; 'ssh_config'
            }

           Only the 3 above parameters can be specified in "default_layer".

       auto_create
           By default, an exception is thrown if no read was successful. This  behavior  can  be  overridden  by
           specifying "auto_create =&gt; 1" in one of the backend specification. For instance:

            rw_config  =&gt; {
                backend =&gt; 'IniFile',
                config_dir =&gt; '<a href="file:/tmp">/tmp</a>',
                file  =&gt; 'foo.conf',
                auto_create =&gt; 1
            },

           Setting "auto_create" to 1 is necessary to create a configuration from scratch

       auto_delete
           Delete configuration files that contains no data. (default is to leave an empty file)

   <b>Config::Model::Backend::*</b> <b>backends</b>
       Specify the backend name and the parameters of the backend defined in their documentation.

       For instance:

        rw_config =&gt; {
            backend     =&gt; 'yaml',
            config_dir  =&gt; '<a href="file:/tmp/">/tmp/</a>',
            file        =&gt; 'my_class.yml',
        },

       See Config::Model::Backend::Yaml for more details for this backend.

   <b>Your</b> <b>own</b> <b>backend</b>
       You can also write a dedicated backend. See How to write your own backend for details.

</pre><h4><b>Test</b> <b>setup</b></h4><pre>
       By  default,  configurations  files  are  read  from  the  directory  specified by "config_dir" parameter
       specified in the model. You may override the "root" directory for test.

</pre><h4><b>Methods</b></h4><pre>
   <b>support_annotation</b>
       Returns 1 if at least the backend supports read and write annotations (aka comments) in the configuration
       file.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont, (ddumont at cpan dot org)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Config::Model, Config::Model::Instance, Config::Model::Node, Config::Model::Dumper

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2005-2022 by Dominique Dumont.

       This is free software, licensed under:

         The GNU Lesser General Public License, Version 2.1, February 1999

perl v5.40.0                                       2024-11-30                     <u>Config::Model::<a href="../man3pm/BackendMgr.3pm.html">BackendMgr</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>