<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGI::Application::Plugin::ValidateRM - Help validate CGI::Application run modes using Data::FormValidator</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcgi-application-plugin-validaterm-perl">libcgi-application-plugin-validaterm-perl_2.52-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CGI::Application::Plugin::ValidateRM - Help validate CGI::Application run modes using Data::FormValidator

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use CGI::Application::Plugin::ValidateRM;

        my  $results = $self-&gt;check_rm('form_display','_form_profile') || return $self-&gt;check_rm_error_page;

        # Optionally, you can pass additional options to HTML::FillInForm-&gt;fill()
        my $results = $self-&gt;check_rm('form_display','_form_profile', { fill_password =&gt; 0 })
               || return $self-&gt;check_rm_error_page;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       CGI::Application::Plugin::ValidateRM helps to validate web forms when using the CGI::Application
       framework and the Data::FormValidator module.

   <b>check_rm()</b>
       Validates a form displayed in a run mode with a "Data::FormValidator" profile, returning the results and
       possibly an a version of the form page with errors marked on the page.

       In scalar context, it returns simply the Data::FormValidator::Results object which conveniently evaluates
       to false in a boolean context if there were any missing or invalid fields. This is the recommended
       calling convention.

       In list context, it returns the results object followed by the error page, if any.  This was the previous
       recommended syntax, and was used like this:

        my ($results,$err_page) = $self-&gt;check_rm('form_display','_form_profile');
        return $err_page if $err_page;

       The inputs are as follows:

       Return run mode
           This   run   mode  will  be  used  to  generate  an  error  page,  with  the  form  re-filled  (using
           HTML::FillInForm) and error messages in the form. This page will  be  returned  as  a  second  output
           parameter.

           The errors will be passed in as a hash reference, which can then be handed to a templating system for
           display. Following the above example, the <b>form_display()</b> routine might look like:

            sub form_display {
               my $self = shift;
               my $errs = shift;                             # &lt;-- prepared for form reloading
               my $t = $self-&gt;load_tmpl('form_display.html');
               $t-&gt;param($errs) if $errs;                    # &lt;-- Also necessary.
               # ...

            }

           The  fields  should  be  prepared  using  Data::FormValidator's  built-in support for returning error
           messages as a hash reference.  See the documentation for "msgs" in  the  Data::FormValidator::Results
           documentation.

           Returning  the  errors  with  a  prefix,  such  as  "err_" is recommended. Using "any_errors" is also
           recommended to make it easy to display a general "we have some errors" message.

           HTML::Template users may want to pass "die_on_bad_params=&gt;0" to  the  HTML::Template  constructor  to
           prevent  the  presence  of  the  "err_" tokens from triggering an error when the errors are <u>not</u> being
           displayed.

       Data::FormValidator profile
           This can either be provided as a hash reference, or as the name of  a  CGI::Application  method  that
           will return such a hash reference.

       HTML::FillInForm options (optional)
           If  desired,  you  can  pass  additional options to the HTML::FillInForm <b>fill()</b> method through a hash
           reference.  See an example above.

       <u>Additional</u> <u>Options</u>

       To control things even more, you can set parameters in your CGI::Application object itself.

       dfv_defaults
           The value of the 'dfv_defaults' param is optionally used to pass defaults to the  Data::FormValidator
           <b>new()</b> constructor.

             $self-&gt;param(dfv_defaults =&gt; { filters =&gt; ['trim'] })

           By  setting  this  to  a  hash reference of defaults in your "cgiapp_init" routine in your own super-
           class, you could make it easy to share some default settings for Data::FormValidator  across  several
           forms. Of course, you could also set parameter through an instance script via the PARAMS key.

           Here's an example that I've used:

            sub cgiapp_init {
                my $self = shift;

                # Set some defaults for DFV unless they already exist.
                $self-&gt;param('dfv_defaults') ||
                    $self-&gt;param('dfv_defaults', {
                            missing_optional_valid =&gt; 1,
                            filters =&gt; 'trim',
                            msgs =&gt; {
                                any_errors =&gt; 'err__',
                                prefix     =&gt; 'err_',
                                invalid    =&gt; 'Invalid',
                                missing    =&gt; 'Missing',
                                format =&gt; '&lt;span class="dfv-errors"&gt;%s&lt;/span&gt;',
                            },
                        });
            }

           Now  all  my  applications that inherit from a super class with this "cgiapp_init()" routine and have
           these defaults, so I don't have to add them to every profile.

       dfv_fif_class
           By default this plugin uses HTML::FillInForm to fill in the forms on the error pages with  the  given
           values.  This  option  let's  you change that so it uses an HTML::FillInForm compatible class (like a
           subclass) to do the same work.

               $self-&gt;param(dfv_fif_class =&gt; 'HTML::FillInForm::SuperDuper');

       dfv_fif_defaults
           The value of the 'dfv_fif_defaults' param is optionally used to pass defaults to the HTML::FillInForm
           "fill()" method.

               $self-&gt;param(dfv_fif_defaults =&gt; {ignore_fields =&gt; ['rm']})

           By setting this to a hash reference of defaults in your "cgiapp_init"  routine  in  your  own  super-
           class,  you  could  make  it  easy to share some default settings for HTML::FillInForm across several
           forms. Of course, you could also set parameter through an instance script via the PARAMS key.

   <b>CGI::Application::Plugin::Forward</b> <b>support</b>
       Experimental support has been added for CGI::Application::Plugin::Forward, which keeps  the  current  run
       mode  up  to date. This would be useful if you were automatically generating a template name based on the
       run mode name, and you wanted this to work with the form run mode used with ::ValidateRM.

       If we detect that ::Forward is loaded, we will set the current run mode name to  be  accurate  while  the
       error  page is being generated, and then set it back to the previous value afterwards. There is a caveat:
       This currently only works when the run mode name is the same as the subroutine name for  the  form  page.
       If  they  differ,  the  current  run  mode  name inside of the form page will be inaccurate. If this is a
       problem for you, get in touch to discuss a solution.

   <b>check_rm_error_page()</b>
       After <b>check_rm()</b> is called this accessor method can be used to retrieve the error page described  in  the
       <b>check_rm()</b> docs above. The method has an alias named "dfv_error_page()" if you find that more intuitive.

   <b>dfv_results()</b>
        $self-&gt;dfv_results;

       After  "check_rm()"  or  "validate_rm()"  has  been  called,  the DFV results object can also be accessed
       through this method. I expect this to be most useful to other plugin authors.

   <b>validate_rm()</b>
       Works like "check_rm" above, but returns the old style $valid  hash  reference  instead  of  the  results
       object. It's no longer recommended, but still supported.

</pre><h4><b>EXAMPLE</b></h4><pre>
       In a CGI::Application module:

        # This is the run mode that will be validated. Notice that it accepts
        # some errors to be passed in, and on to the template system.
        sub form_display {
               my $self = shift;
               my $errs = shift;

               my $t = $self-&gt;load_tmpl('page.html');

               $t-&gt;param($errs) if $errs;
               return $t-&gt;output;
        }

        sub form_process {
               my $self = shift;

               use CGI::Application::Plugin::ValidateRM (qw/check_rm/);
               my ($results, $err_page) = $self-&gt;check_rm('form_display','_form_profile');
               return $err_page if $err_page;

               #..  do something with DFV $results object now

               my $t = $self-&gt;load_tmpl('success.html');
               return $t-&gt;output;

        }

        sub _form_profile {
               return {
                       required =&gt; 'email',
                       msgs =&gt; {
                               any_errors =&gt; 'some_errors',
                               prefix =&gt; 'err_',
                       },
               };
        }

       In page.html:

        &lt;!-- tmpl_if some_errors --&gt;
               &lt;h3&gt;Some fields below are missing or invalid&lt;/h3&gt;
        &lt;!-- /tmpl_if --&gt;
        &lt;form&gt;
               &lt;input type="text" name="email"&gt; &lt;!-- tmpl_var err_email --&gt;
        &lt;/form&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       CGI::Application, Data::FormValidator, HTML::FillInForm, <b><a href="../man1/perl.1.html">perl</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Stosberg &lt;<a href="mailto:mark@summersault.com">mark@summersault.com</a>&gt;

</pre><h4><b>MAILING</b> <b>LIST</b></h4><pre>
       If you have any questions, comments, bug reports or feature suggestions, post them to the support mailing
       list!     This     the    Data::FormValidator    list.     To    join    the    mailing    list,    visit
       &lt;<a href="http://lists.sourceforge.net/lists/listinfo/cascade-dataform">http://lists.sourceforge.net/lists/listinfo/cascade-dataform</a>&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (C) 2003-2005 Mark Stosberg &lt;<a href="mailto:mark@summersault.com">mark@summersault.com</a>&gt;

       This module is free software; you can redistribute it and/or modify it under the terms of either:

       a) the GNU General Public License as published by the Free Software Foundation; either version 1, or  (at
       your option) any later version,

       or

       b) the "Artistic License"

       This  program  is  distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even
       the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See either the GNU  General
       Public License or the Artistic License for more details.

       For  a copy of the GNU General Public License along with this program; if not, write to the Free Software
       Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA

perl v5.36.0                                       2023-01-15             <u>CGI::Applicatio...gin::<a href="../man3pm/ValidateRM.3pm.html">ValidateRM</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>