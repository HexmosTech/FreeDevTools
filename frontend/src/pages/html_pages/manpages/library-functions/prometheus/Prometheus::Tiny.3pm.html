<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prometheus::Tiny - A tiny Prometheus client</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libprometheus-tiny-perl">libprometheus-tiny-perl_0.011-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Prometheus::Tiny - A tiny Prometheus client

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Prometheus::Tiny;

           my $prom = Prometheus::Tiny-&gt;new;
           $prom-&gt;set('some_metric', 5, { some_label =&gt; "aaa" });
           print $prom-&gt;format;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "Prometheus::Tiny" is a minimal metrics client for the Prometheus &lt;<a href="http://prometheus.io/">http://prometheus.io/</a>&gt; time-series
       database.

       It does the following things differently to Net::Prometheus:

       •   No setup. You don't need to pre-declare metrics to get something useful.

       •   Labels are passed in a hash. Positional parameters get awkward.

       •   No inbuilt collectors, PSGI apps, etc. Just the metrics.

       •   Doesn't know anything about different metric types. You get what you ask for.

       These could all be pros or cons, depending on what you need. For me, I needed a compact base that I could
       back on a shared memory region. See Prometheus::Tiny::Shared for that!

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
   <b>new</b>
           my $prom = Prometheus::Tiny-&gt;new;
           my $prom = Promethus::Tiny-&gt;new(default_labels =&gt; { my_label =&gt; "frob" });

       If  you  pass  a  "default_labels"  key to the constructor, these labels will be included in every metric
       created on this object.

</pre><h4><b>METHODS</b></h4><pre>
   <b>set</b>
           $prom-&gt;set($name, $value, { labels }, [timestamp])

       Set the value for the named metric. The labels hashref is optional.  The  timestamp  (milliseconds  since
       epoch)  is optional, but requires labels to be provided to use. An empty hashref will work in the case of
       no labels.

       Trying to set a metric to a non-numeric value will emit a warning and the metric will be set to zero.

   <b>add</b>
           $prom-&gt;add($name, $amount, { labels })

       Add the given amount to the already-stored value (or 0 if  it  doesn't  exist).  The  labels  hashref  is
       optional.

       Trying  to add a non-numeric value to a metric will emit a warning and 0 will be added instead (this will
       still create the metric if it didn't exist, and will update timestamps etc).

   <b>inc</b>
           $prom-&gt;inc($name, { labels })

       A shortcut for

           $prom-&gt;add($name, 1, { labels })

   <b>dec</b>
           $prom-&gt;dec($name, { labels })

       A shortcut for

           $prom-&gt;add($name, -1, { labels })

   <b>clear</b>
           $prom-&gt;clear;

       Remove all stored metric values. Metric metadata (set by "declare") is preserved.

   <b>histogram_observe</b>
           $prom-&gt;histogram_observe($name, $value, { labels })

       Record a histogram observation. The labels hashref is optional.

       You should declare your metric beforehand, using the "buckets" key to set the buckets you want to use. If
       you don't, the following buckets will be used.

           [ 0.005, 0.01, 0.025, 0.05, 0.075, 0.1, 0.25, 0.5, 0.75, 1.0, 2.5, 5.0, 7.5, 10 ]

   <b>enum_set</b>
           $prom-&gt;enum_set($name, $value, { labels }, [timestamp])

       Set an enum value for the named metric. The labels hashref is optiona. The timestamp is optional.

       You should declare your metric beforehand, using the "enum" key to set the label  to  use  for  the  enum
       value, and the "enum_values" key to list the possible values for the enum.

   <b>declare</b>
           $prom-&gt;declare($name, help =&gt; $help, type =&gt; $type, buckets =&gt; [...])

       "Declare" a metric by associating metadata with it. Valid keys are:

       "help"
           Text describing the metric. This will appear in the formatted output sent to Prometheus.

       "type"
           Type of the metric, typically "gauge" or "counter".

       "buckets"
           For "histogram" metrics, an arrayref of the buckets to use. See "histogram_observe".

       "enum"
           For "enum" metrics, the name of the label to use for the enum value. See "enum_set".

       "enum_values"
           For "enum" metrics, the possible values the enum can take. See "enum_set".

       Declaring  a  already-declared  metric  will  work,  but  only  if the metadata keys and values match the
       previous call. If not, "declare" will throw an exception.

   <b>format</b>
           my $metrics = $prom-&gt;format

       Output  the  stored  metrics,  values,  help  text  and  types  in  the  Prometheus   exposition   format
       &lt;https://github.com/prometheus/docs/blob/master/content/docs/instrumenting/exposition_formats.md&gt;.

   <b>psgi</b>
           use Plack::Builder
           builder {
             mount "/metrics" =&gt; $prom-&gt;psgi;
           };

       Returns  a simple PSGI app that, when hooked up to a web server and called, will return formatted metrics
       for Prometheus. This is little more than a wrapper around "format", namely:

           sub app {
             my $env = shift;
             return [ 200, [ 'Content-Type' =&gt; 'text/plain' ], [ $prom-&gt;format ] ];
           }

       This is just a convenience; if you already have a web server or you want to ship metrics via  some  other
       means (eg the Node Exporter's textfile collector), just use "format".

</pre><h4><b>SUPPORT</b></h4><pre>
   <b>Bugs</b> <b>/</b> <b>Feature</b> <b>Requests</b>
       Please     report    any    bugs    or    feature    requests    through    the    issue    tracker    at
       &lt;https://github.com/robn/Prometheus-Tiny/issues&gt;.  You will be notified automatically of any progress  on
       your issue.

   <b>Source</b> <b>Code</b>
       This  is  open source software. The code repository is available for public review and contribution under
       the terms of the license.

       &lt;https://github.com/robn/Prometheus-Tiny&gt;

         git clone https://github.com/robn/Prometheus-Tiny.git

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Rob Norris &lt;<a href="mailto:robn@despairlabs.com">robn@despairlabs.com</a>&gt;

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       •   ben hengst &lt;<a href="mailto:ben.hengst@dreamhost.com">ben.hengst@dreamhost.com</a>&gt;

       •   Danijel Tasov &lt;<a href="mailto:data@consol.de">data@consol.de</a>&gt;

       •   Michael McClimon &lt;<a href="mailto:michael@mcclimon.org">michael@mcclimon.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2017 by Rob Norris &lt;<a href="mailto:robn@despairlabs.com">robn@despairlabs.com</a>&gt;

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.36.0                                       2023-09-30                              <u>Prometheus::<a href="../man3pm/Tiny.3pm.html">Tiny</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>