<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Captcha::reCAPTCHA::V3 - A Perl implementation of reCAPTCHA API version v3</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcaptcha-recaptcha-v3-perl">libcaptcha-recaptcha-v3-perl_0.06-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Captcha::reCAPTCHA::V3 - A Perl implementation of reCAPTCHA API version v3

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Captcha::reCAPTCHA::V3 provides you to integrate Google reCAPTCHA v3 for your web applications.

        use Captcha::reCAPTCHA::V3;
        my $rc = Captcha::reCAPTCHA::V3-&gt;new(
            sitekey =&gt; '__YOUR_SITEKEY__', # Optional
            secret  =&gt; '__YOUR_SECRET__',  # Required
        );

        ...

        my $content = $rc-&gt;verify($param{$rc});
        unless ( $content-&gt;{'success'} ) {
           # code for failing like below
           die 'fail to verify reCAPTCHA: ', @{ $content-&gt;{'error-codes'} }, "\n";
        }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Captcha::reCAPTCHA::V3 is inspired from Captcha::reCAPTCHA::V2

       This one is especially for Google reCAPTCHA v3, not for v2 because APIs are so defferent.

   <b>Basic</b> <b>Usage</b>
       <u>new(</u> <u>secret</u> <u>=&gt;</u> <u>secret,</u> <u>[</u> <u>sitekey</u> <u>=&gt;</u> <u>sitekey,</u> <u>query_name</u> <u>=&gt;</u> <u>query_name</u> <u>]</u> <u>)</u>

       Requires only secret when constructing.

       Now you can omit sitekey (from version 0.0.4).

       You have to get them before running from here &lt;https://www.google.com/recaptcha/intro/v3.html&gt;.

        my $rc = Captcha::reCAPTCHA::V3-&gt;new(
           sitekey =&gt; '__YOUR_SITEKEY__', # Optional
           secret  =&gt; '__YOUR_SECRET__',
           query_name =&gt; '__YOUR_QUERY_NAME__', # Optional
        );

       According to the official document, query_name defaults to 'g-recaptcha-response' so if you changed it
       another, you have to set <u>query_name</u> as same.

       <u>name([name])</u>

       You can get/set <u>query_name</u> after constuct the object from version 0.0.4

        my $query_name = $rc-&gt;name();  # defaults to 'g-recaptcha-response'
        $rc-&gt;name('captcha');          # the I&lt;query_name&gt; is now 'captcha'

       and with overlording, you can get <u>query_name</u> with just like below:

        my $query_name = "$rc";        # means same with $rc-&gt;name();

       <u>verify(</u> <u>response</u> <u>)</u>

       Requires just only response key being got from Google reCAPTCHA API.

       <b>DO</b> <b>NOT</b> add remote address. there is no function for remote address within reCAPTCHA v3.

        my $content = $rc-&gt;verify($param{$rc});

       The default <u>query_name</u> is 'g-recaptcha-response' and it is stocked in constructor.

       But now string-context provides you to get <u>query_name</u> so we don't have to care about it.

       The response contains JSON so it returns decoded value from JSON.

        unless ( $content-&gt;{'success'} ) {
           # code for failing like below
           die 'fail to verify reCAPTCHA: ', @{ $content-&gt;{'error-codes'} }, "\n";
        }

       <u>deny_by_score(</u> <u>response</u> <u>=&gt;</u> <u>response,</u> <u>[</u> <u>score</u> <u>=&gt;</u> <u>expected</u> <u>]</u> <u>)</u>

       reCAPTCHA v3 responses have score whether the request was by bot.

       So this method provides evaluation by scores that 0.0~1.0(defaults to 0.5)

       If the score was lower than what you expected, the verifying is fail with inserting 'too-low-score' into
       top of the error-codes.

       verify() requires just only one argument because of compatibility for version 0.01.

       In this method, the response pair SHOULD be set as a hash argument(score pair is optional).

   <b>Additional</b> <b>method</b> <b>for</b> <b>lazy(not</b> <b>sudgested)</b>
       <u>verify_or_die(</u> <u>response</u> <u>=&gt;</u> <u>response,</u> <u>[</u> <u>score</u> <u>=&gt;</u> <u>score</u> <u>]</u> <u>)</u>

       This method is a wrapper of deny_by_score(), the differense is dying imidiately when fail to verify.

       <u>scripts(</u> <u>id</u> <u>=&gt;</u> <u>ID,</u> <u>[</u> <u>debug</u> <u>=&gt;</u> <u>Boolen,</u> <u>action</u> <u>=&gt;</u> <u>action</u> <u>]</u> <u>)</u>

       You can insert this somewhere in your &lt;body&gt; tag.

       In ordinal HTMLs, you can set this like below:

        print &lt;&lt;"EOL", scripts( id =&gt; 'MailForm' );
        &lt;form action="./" method="POST" id="MailForm"&gt;
           &lt;input type="hidden" name="name" value="value"&gt;
           &lt;button type="submit"&gt;send&lt;/button&gt;
        &lt;/form&gt;
        EOL

       Then you might write less javascript lines.

       From 0.0.4 you can set <u>debug</u> flag in this method.  this is just comment-out the below but powerful.

        //console.log(token);

</pre><h4><b>NOTES</b></h4><pre>
       To test this module strictly, there is a necessary to run javascript in test environment.

       I have not prepared it yet.

       So any PRs &lt;https://github.com/worthmine/Captcha-reCAPTCHA-V3/pulls&gt; and Issues
       &lt;https://github.com/worthmine/Captcha-reCAPTCHA-V3/issues&gt; are welcome.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Captcha::reCAPTCHA::V2
       Google reCAPTCHA v3 &lt;https://www.google.com/recaptcha/intro/v3.html&gt;
       Google reCAPTCHA v3 API document &lt;https://developers.google.com/recaptcha/docs/v3&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (C) worthmine.

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>AUTHOR</b></h4><pre>
       worthmine &lt;<a href="mailto:worthmine@gmail.com">worthmine@gmail.com</a>&gt;

perl v5.40.0                                       2024-12-14                        <u>Captcha::reCAPTCHA::<a href="../man3pm/V3.3pm.html">V3</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>