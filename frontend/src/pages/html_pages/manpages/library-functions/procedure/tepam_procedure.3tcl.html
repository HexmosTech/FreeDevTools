<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tepam::procedure - TEPAM procedure, reference manual</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tepam::procedure - TEPAM procedure, reference manual

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>tepam</b> <b>?0.5?</b>

       <b>tepam::procedure</b> <u>name</u> <u>attributes</u> <u>body</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package provides an alternative way to declare Tcl procedures and to manage its arguments. There is
       a lot of benefit to declare a procedure with TEPAM rather than with the Tcl standard command <b>proc</b>:  TEPAM
       allows  specifying  inside  the  procedure  declaration  all  information  that  is  required to generate
       comprehensive documentations and help support.  The information is also used by an automatically  invoked
       argument  checker  that validates the provided procedure arguments before the procedure body is executed.
       Finally, a procedure can be called interactively which will open a graphical form that allows  specifying
       the procedure arguments.

       TEPAM  simplifies  also  the handling of the different types of argument, like the <u>named</u> <u>arguments</u> (often
       also called <u>options</u>) and the <u>unnamed</u> <u>arguments</u>. TEPAM supports  the  <u>named</u>  <u>first,</u>  <u>unnamed</u>  <u>later</u>  style
       (typical  Tcl  command  style)  as  well as also the <u>unnamed</u> <u>first,</u> <u>named</u> <u>later</u> style (typical Tk command
       style). TEPAM takes care about default values for  arguments,  optional  arguments,  multiple  applicable
       arguments,  etc.  and  eliminates  the  need  to  check the validity of the argument inside the procedure
       bodies.

       An informal overview of all the TEPAM procedure declaration and calling  features  as  well  as  a  short
       introduction into TEPAM is provided by <u><a href="../man3tcl/tepam.3tcl.html">tepam</a>(3tcl)</u>.

</pre><h4><b>TERMINOLOGY</b></h4><pre>
       The  exact meaning of several terms that are used in this document will be shortly explained to avoid any
       ambiguities and misunderstandings.

       <u>Subcommand</u>
              The usage of subcommands is heavily used in the Tcl language. Several  commands  are  incorporated
              into a single main command and are selectable via the first argument.

              The  <b>string</b>  command  is  an  example of such a command that implements for example subcommands to
              check a character string length, to compare strings, to extract substrings, etc:

              <b>string</b> <b>length</b> <u>string</u>
              <b>string</b> <b>compare</b> <u>string</u> <u>string</u>
              <b>string</b> <b>range</b> <u>string</u> <u>first</u> <u>last</u>
              ...

       TEPAM provides a framework that allows implementing easily such subcommands in form of Tcl procedures. It
       allows not only defining a first level of subcommands, but also a higher level of subcommands. The <b>string</b>
       command class check could be implemented as independent sub-sub-commands of the <b>string</b> command:

              <b>string</b> <b>is</b> <b>alnum</b> <u>string</u>
              <b>string</b> <b>is</b> <b>integer</b> <u>string</u>
              <b>string</b> <b>is</b> <b>double</b> <u>string</u>
              ...

       <u>Procedure</u> <u>attribute</u>
              TEPAM allows attaching to a declared  procedure  different  kind  of  attributes.  Some  of  these
              attributes  are <u>just</u> used for documentation purposes, but other attributes specify the way how the
              procedure has to be called. Also the procedure arguments  are  defined  in  form  of  a  procedure
              attribute.

       <u>Argument</u>
              TEPAM uses the term <u>argument</u> for the parameters of a procedure.

              The following example calls the subcommand <b>string</b> <b>compare</b> with several arguments:

              <b>string</b> <b>compare</b> <u>-nocase</u> <u>-length</u> <u>3</u> <u>"emphasized"</u> <u>"emphasised"</u>

              The following paragraphs discuss these different argument types.

       <u>Named</u> <u>argument</u>
              Some  parameters,  as  <u>-length</u>  <u>3</u> of the subcommand <b>string</b> <b>compare</b> have to be provided as pairs of
              argument names and argument values. This parameter type is often also called <u>option</u>.

              TEPAM uses the term <u>named</u> <u>argument</u> for such options as well as for the flags (see next item).

       <u>Flag,</u> <u>switch</u>
              Another parameter type is the <u>flag</u> or the <u>switch</u>. Flags are provided simply  by  naming  the  flag
              leading with the '-' character. The <u>-nocase</u> of the previous <b>string</b> <b>compare</b> example is such a flag.

              <u>Flags</u> are considered by TEPAM like a special form of <u>named</u> <u>arguments</u>.

       <u>Unnamed</u> <u>argument</u>
              For the other parameters, e.g. the ones for which the argument name has not to be mentioned, TEPAM
              uses  the  term  <u>unnamed</u>  <u>argument</u>.  The previous <b>string</b> <b>compare</b> example uses for the two provided
              character strings two <u>unnamed</u> <u>arguments</u>.

       <u>Argument</u> <u>attribute</u>
              TEPAM allows describing the purpose of each procedure argument  with  <u>argument</u>  <u>attributes</u>.  While
              some  of them are just documenting the attributes, most attributes are used by an argument manager
              to control and validate the  arguments  that  are  provided  during  a  procedure  call.  Argument
              attributes  are  used  to  specify default values, parameter classes (integer, xdigit, font, ...),
              choice validation lists, value ranges, etc.

       <u>Named</u> <u>arguments</u> <u>first,</u> <u>unnamed</u> <u>arguments</u> <u>later</u>
              The <b>string</b> <b>compare</b> command of the previous example requires that  the  <u>named</u>  <u>arguments</u>  (options,
              flags)  are  provided  first.  The  two  mandatory (unnamed) arguments have to be provided as last
              argument.

              <b>string</b> <b>compare</b> <u>-nocase</u> <u>-length</u> <u>3</u> <u>Water</u> <u>$Text</u>

              This is the usual Tcl style (exceptions exist) which is referred in  the  TEPAM  documentation  as
              <u>named</u> <u>arguments</u> <u>first,</u> <u>unnamed</u> <u>arguments</u> <u>later</u> <u>style</u>.

       <u>Unnamed</u> <u>arguments</u> <u>first,</u> <u>named</u> <u>arguments</u> <u>later</u>
              In  contrast  to  most  Tcl  commands,  Tk uses generally (exceptions exist also here) a different
              calling style where the <u>unnamed</u> <u>arguments</u> have to be provided first, before  the  <u>named</u>  <u>arguments</u>
              have to be provided:

              <b>pack</b> <u>.ent1</u> <u>.ent2</u> <u>-fill</u> <u>x</u> <u>-expand</u> <u>yes</u> <u>-side</u> <u>left</u>

              This  style  is  referred  in  the TEPAM documentation as <u>unnamed</u> <u>arguments</u> <u>first,</u> <u>named</u> <u>arguments</u>
              <u>later</u> <u>style</u>.

</pre><h4><b>PROCEDURE</b> <b>DECLARATION</b></h4><pre>
       TEPAM allows declaring new Tcl procedures with the command  <b>tepam::procedure</b>  that  has  similar  to  the
       standard Tcl command <b>proc</b> also 3 arguments:

       <b>tepam::procedure</b> <u>name</u> <u>attributes</u> <u>body</u>

       The TEPAM procedure declaration syntax is demonstrated by the following example:

              <b>tepam::procedure</b> {display message} {
                 -short_description
                    "Displays a simple message box"
                 -description
                    "This procedure allows displaying a configurable\
                     message box. The default message type that is\
                     created is a warning, but also errors and info can\
                     be generated.
                     The procedure accepts multiple text lines."
                 -example
                    {display message -mtype Warning "Save first your job"}
                 -args {
                    {-mtype -choices {Info Warning Error} \
                            -default Warning -description "Message type"}
                    {text   -type string -multiple \
                            -description "Multiple text lines to display"}
                 }
              } {
                 puts "Message type: $mtype"
                 puts "Message: $text"
              }
       The 3 arguments of <b>procedure</b> are:

       <u>name</u>   The  procedure  name  can  be  used  in  very  flexible  ways.  Procedure names can have namespace
              qualifiers. By providing a two element name list as procedure name, a subcommand  of  a  procedure
              will be declared. It is even possible to declare sub-sub-commands of a procedure by providing name
              lists with three elements.

              Here are some valid procedure declarations using different procedure names (the attribute and body
              arguments are empty for simplicity):

              <u>#</u> <u>Simple</u> <u>procedure</u> <u>name:</u>
              tepam::procedure <b>display_message</b> {} {}
              <u>#</u> <u>Procedure</u> <u>declared</u> <u>in</u> <u>the</u> <u>main</u> <u>namespace:</u>
              tepam::procedure <b>::display_message</b> {} {}
              <u>#</u> <u>Procedure</u> <u>in</u> <u>the</u> <u>namespace</u> <b>::ns</b><u>:</u>
              tepam::procedure <b>::ns::display_message</b> {} {}
              <u>#</u> <u>Declaration</u> <u>of</u> <u>the</u> <u>subcommand</u> <b>message</b> <u>of</u> <u>the</u> <u>procedure</u> <b>display</b><u>:</u>
              tepam::procedure <b>{display</b> <b>message}</b> {} {}

       <u>attributes</u>
              All  procedure  attributes  are  provided  in form of an option list that contains pairs of option
              names and option values. The example above has  as  procedure  attribute  a  short  and  a  normal
              description, but also the procedure arguments are defined in form of a procedure attribute.

              Most  procedure  attributes are providing information for documentation purposes. But some of them
              affect also the way how the procedure can be called. The section <b>Procedure</b> <b>Attributes</b> discusses in
              detail the available procedure attributes.

              The procedure arguments are defined in  form  of  a  special  procedure  attribute.  Most  of  the
              information  provided in the argument definition is not just used for documentation purposes. This
              information is in fact used by the TEPAM argument manager to handle and validate the various forms
              of arguments that are provided during  the  procedure  calls.  The  section  <b>Argument</b>  <b>Declaration</b>
              discusses in detail all the argument definition attributes.

       <u>body</u>   This  is the normal procedure body. The declared arguments will be available to the procedure body
              in form of variables.

              The procedure body will only be executed if the provided set of arguments could  be  validated  by
              the TEPAM argument manager.

              tepam::procedure {display_message} {
                 -args {
                    {-<b>mtype</b> -default Warning -choices {Warning Error}}
                    {<b>text</b> -type string}
                 }
              } {
                 puts "Message type: <b>$mtype</b>"
                 puts "Message: <b>$text</b>"
              }

       The  commands <b>procedure</b> as well as <b>argument_dialogbox</b> are exported from the namespace <b>tepam</b>. To use these
       commands without the <b>tepam::</b> namespace prefix, it is sufficient to import them into the main namespace:

              <b>namespace</b> <b>import</b> <b>tepam::*</b>

              <b>procedure</b> {display_message} {
                 -args {
                    ...

   <b>PROCEDURE</b> <b>ATTRIBUTES</b>
       The first group of attributes affect the behavior of the declared procedure:

       -named_arguments_first <b>0</b>|<b>1</b>
              This attribute defines the calling style of a procedure. TEPAM uses by default the <u>named</u> <u>arguments</u>
              <u>first,</u> <u>unnamed</u> <u>arguments</u> <u>later</u> style (Tcl). This default  behavior  can  globally  be  changed  by
              setting  the  variable <b>tepam::named_arguments_first</b> to <b>0</b>. This global calling style can be changed
              individually for a procedure with the <u>-named_arguments_first</u> attribute.

       -auto_argument_name_completion <b>0</b>|<b>1</b>
              The declared procedures will by default automatically try to match eventually abbreviated argument
              names to the defined arguments names. This default behavior can globally be changed by setting the
              variable <b>tepam::auto_argument_name_completion</b> to <b>0</b>. This global setting of the automatic  argument
              name    completion    can    be    changed    individually    for    a    procedure    with    the
              <u>-auto_argument_name_completion</u> procedure attribute.

       -interactive_display_format <b>extended</b>|<b>short</b>
              A procedure declared with the TEPAM <b>procedure</b> command can always be called with  the  <b>-interactive</b>
              option.  By  doing  so,  a  graphical  form will be generated that allows specifying all procedure
              argument values. There are two display modes for these interactive forms. While the <u>extended</u>  mode
              is  more  adapted  for  small  procedure  argument  sets, the <b>short</b> form is more adequate for huge
              procedure argument sets.

              The choice  to  use  short  or  extended  forms  can  be  globally  configured  via  the  variable
              <b>tepam::interactive_display_format</b>.  This  global  setting  can  then be changed individually for a
              procedure with the <u>-interactive_display_format</u> procedure attribute.

       -args <u>list</u>
              The procedure arguments are declared via the <u>-args</u> attribute. An argument is defined  via  a  list
              having  as  first  element  the argument name, followed by eventual argument attributes. All these
              argument definition lists are packaged themselves into a global list that is assigned to the <u>-args</u>
              attribute.

              The argument definition syntax will be described more in detail in the following sub section.

       The next attributes allow specifying custom argument checks as well as  custom  error  messages  in  case
       these checks are failing:

       -validatecommand <u>script</u>
              Custom  argument  validations  can  be performed via specific validation commands that are defined
              with the <u>-validatecommand</u> attribute.

              Validation command declaration example:

              tepam::procedure {display_message} {
                 -args {
                    {text -type string -description "Message text"} }
                 <b>-validatecommand</b> <b>{IllegalWordDetector</b> <b>$text}</b>
              } {
              }

              The validation command is executed in the context of the declared procedure  body.  The  different
              argument  values  are  accessed  via  the argument names. Note there is also an argument attribute
              <u>-validatecommand</u> that allows declaring custom checks for specific arguments.

              The attribute <u>-validatecommand</u> can be repeated to declare multiple custom checks.

       -validatecommand_error_text <u>string</u>
              This attribute allows overriding the default  error  message  for  a  custom  argument  validation
              (defined  by  <u>-validatecommand</u>).  Also  this  attribute  can be repeated in case multiple argument
              checks are declared.

       The following attribute allows controlling the logging settings for an individual procedure:

       -command_log <b>0</b>|<b>1</b>|<b>"interactive"</b>
              This  argument  configures  the  logging  of  the  procedure  calls   into   the   list   variable
              <b>tepam::ProcedureCallLogList</b>.  The default configuration defined by the variable <b>tepam::command_log</b>
              will be used if this argument is not defined in a procedure declaration.

              Setting this argument to <b>0</b> will disable any procedure call loggings, setting it to <b>1</b> will log  any
              procedure  calls  and  setting  it  to  <b>interactive</b>  will  log just the procedures that are called
              interactively (procedures called with the <b>-interactive</b> flag).

       The next group of procedure attributes is just used for  the  purpose  of  documentation  and  help  text
       generation:

       -category <u>string</u>
              A  category  can  be assigned to a procedure for documentation purposes. Any string is accepted as
              category.

       -short_description <u>string</u>
              The short description of a procedure is used in the documentation summary of a generated procedure
              list as well as in the NAME section of a generated procedure manual page.

       -description <u>string</u>
              The (full) description assigned to a procedure is used to create user manual and help pages.

       -return <u>string</u>
              The <u>-return</u> attribute allows  defining  the  expected  return  value  of  a  procedure  (used  for
              documentation purposes).

       -example <u>string</u>
              A  help  text  or  manual  page  of  a procedure can be enriched with eventual examples, using the
              <u>-example</u> attribute.

   <b>ARGUMENT</b> <b>DECLARATION</b>
       The following example shows the structure that is used for the argument definitions in the context  of  a
       procedure declaration:

              tepam::procedure {display_message} {
                 -args <b>{</b>
                    <b>{-mtype</b> <b>-default</b> <b>Warning</b> <b>-choices</b> <b>{Info</b> <b>Warning</b> <b>Error}</b> <b>-description</b> <b>"Message</b> <b>type"}</b>
                    <b>{-font</b> <b>-type</b> <b>font</b> <b>-default</b> <b>{Arial</b> <b>10</b> <b>italic}</b> <b>-description</b> <b>"Message</b> <b>text</b> <b>font"}</b>
                    <b>{-level</b> <b>-type</b> <b>integer</b> <b>-optional</b> <b>-range</b> <b>{1</b> <b>10}</b> <b>-description</b> <b>"Message</b> <b>level"}</b>
                    <b>{-fg</b> <b>-type</b> <b>color</b> <b>-optional</b> <b>-description</b> <b>"Message</b> <b>color"}</b>
                    <b>{-log_file</b> <b>-type</b> <b>file</b> <b>-optional</b> <b>-description</b> <b>"Optional</b> <b>message</b> <b>log</b> <b>file"}</b>
                    <b>{text</b> <b>-type</b> <b>string</b> <b>-multiple</b> <b>-description</b> <b>"Multiple</b> <b>text</b> <b>lines</b> <b>to</b> <b>display"}</b>
                 <b>}</b>
              } {
              }
       Each  of  the  procedure  arguments  is declared with a list that has as first element the argument name,
       followed by eventual attributes. The argument definition syntax can be formalized in the following way:

              tepam::procedure &lt;name&gt; {
                 -args <b>{</b>
                    <b>{&lt;argument_name_1&gt;</b> <b>&lt;arg_attr_name_1a&gt;</b> <b>&lt;arg_attr_value_1a&gt;</b>  <b>&lt;arg_attr_name_1b&gt;</b> <b>&lt;arg_attr_value_1b&gt;</b> <b>...}</b>
                    <b>{&lt;argument_name_2&gt;</b> <b>&lt;arg_attr_name_2a&gt;</b> <b>&lt;arg_attr_value_2a&gt;</b>  <b>&lt;arg_attr_name_2b&gt;</b> <b>&lt;arg_attr_value_2b&gt;</b> <b>...}</b>
                    <b>...</b>
                 <b>}</b>
              } &lt;body&gt;
       The argument names and attributes have to be used in the following way:

       Argument name (<u>&lt;argument_name_&lt;n&gt;&gt;</u>)
              The provided argument name specifies whether the argument  is  an  <u>unnamed</u>  <u>argument</u>  or  a  <u>named</u>
              <u>argument</u>. In addition to this, an argument name can also be blank to indicate an argument comment,
              or it can start with # to indicate a section comment.

              <u>"&lt;Name&gt;"</u>
                     This  is the simplest form of an argument name: An argument whose name is not starting with
                     '-' is an <u>unnamed</u> <u>argument</u>. The parameter provided during a procedure call will be assigned
                     to a variable with the name <u>&lt;Name&gt;</u>.

                     tepam::procedure {print_string} {
                        -args {
                           {<b>text</b> -type string -description "This is an unnamed argument"}
                        }
                     } {
                        puts <b>$text</b>
                     }

                     print_string <b>"Hello"</b>
                      <u>-&gt;</u> <u>Hello</u>

              <u>"-&lt;Name&gt;"</u>
                     An argument whose name starts with '-' is  a  <u>named</u>  <u>argument</u>  (also  called  <u>option</u>).  The
                     parameter  provided  during  a  procedure call will be assigned to a variable with the name
                     <u>&lt;Name&gt;</u> (not <u>-&lt;Name&gt;</u>).

                     tepam::procedure {print_string} {
                        -args {
                           {<b>-text</b> -type string -description "This is a named argument"}
                        }
                     } {
                        puts <b>$text</b>
                     }

                     print_string <b>-text</b> <b>"Hello"</b>
                      <u>-&gt;</u> <u>Hello</u>

              <u>"--"</u>   This flag allows clearly specifying the end of the named arguments and the beginning of the
                     unnamed arguments, in case the <u>named</u> <u>arguments</u> <u>first,</u> <u>unnamed</u> <u>arguments</u> <u>later</u>  <u>style</u>  <u>(Tcl)</u>
                     has been selected.

                     If  the  <u>unnamed</u>  <u>arguments</u> <u>first,</u> <u>named</u> <u>arguments</u> <u>later</u> <u>style</u> <u>(Tk)</u> style is selected, this
                     flag is ignored if the unnamed arguments have already been parsed.  Otherwise  it  will  be
                     assigned to the corresponding unnamed argument.

              <u>"-"</u> or <u>""</u>
                     A blank argument name (either '-' or <u>''</u>) starts a comment for the following arguments.

                     tepam::procedure {print_time} {
                        -interactive_display_format short
                        -args {
                           {hours -type integer -description "Hour"}
                           {minutes -type integer -description "Minute"}

                           <b>{-</b> <b>The</b> <b>following</b> <b>arguments</b> <b>are</b> <b>optional:}</b>
                           {seconds -type integer -default 0 -description "Seconds"}
                           {milliseconds -type integer -default 0 -description "Milliseconds"}
                        }
                     } {
                        puts "${hour}h${minutes}:[expr $seconds+0.001*$milliseconds]"
                     }

                     Argument  comments  are  basically used in the graphical argument definition forms that are
                     created if a procedure is called interactively.

              <u>"#*"</u>   An argument definition list that starts with '#' is considered as a  section  comment.  The
                     argument  definition  list will be trimmed from the '#' characters and the remaining string
                     will be used as section comment.

                     Section comments can be used to structure visually the argument  definition  code.  Section
                     comments  are  also used to structure the generated help texts and the interactive argument
                     definition forms.

                     tepam::procedure {complex_multiply} {
                        -description "This function perform a complex multiplication"
                        -args {
                           <b>{####</b> <b>First</b> <b>complex</b> <b>number</b> <b>####}</b>
                           {-r0 -type double -description "First number real part"}
                           {-i0 -type double -description "First number imaginary part"}

                           <b>{####</b> <b>Second</b> <b>complex</b> <b>number</b> <b>####}</b>
                           {-r1 -type double -description "Second number real part"}
                           {-i1 -type double -description "Second number imaginary part"}
                        }
                     } {
                        return [expr $r0*$r1 - $i0*$i1]
                     }

       Argument attributes (<u>&lt;arg_attr_name_&lt;mn&gt;&gt;</u> <u>&lt;arg_attr_value_&lt;mn&gt;&gt;</u>)
              The following argument attributes are supported:

              -description <u>string</u>
                     The description argument attribute is used for documentation purpose. Interactive  argument
                     definition forms use this attribute to provide explanations for an argument.

              -type <u>type</u>
                     The type argument attribute allows assigning the argument either to a predefined data type,
                     or  to  an  application  specific data type. The argument values that are provided during a
                     procedure call are automatically checked with respect to the defined argument type.

                     The section <b>ARGUMENT</b> <b>TYPES</b> provides a list  of  predefined  data  types  and  explains  how
                     application specific types can be specified.

                     The argument type <u>none</u> has a special meaning. An argument that has the type <u>none</u> is handled
                     as  a <u>flag</u>. A flag is always optional and its related variable contains the logical value <b>1</b>
                     if the flag has been defined during the procedure call, or otherwise <b>0</b>.

              -default <u>value</u>
                     Eventual default values can be defined with the -default argument attribute. Arguments with
                     default values are automatically optional arguments.

              -optional|-mandatory
                     Arguments are by default mandatory, unless a default value is defined. The  flag  <u>-optional</u>
                     transforms an argument into an optional argument.

                     In  case  an  optional  argument  is not defined during a procedure call, the corresponding
                     variable will not be defined.  The flag <u>-mandatory</u> is the opposite to <u>-optional</u>. This  flag
                     exists only for completion reason, since an argument is anyway mandatory by default.

              -multiple
                     Arguments  that  have  the  <u>-multiple</u>  attribute  can  be  defined  multiple times during a
                     procedure call. The values that are provided during a procedure call for such  an  argument
                     are  stored  in  a list variable. This is even the case if such an argument is only defined
                     once during a procedure call.

                     The <u>-multiple</u> attribute can be attributed to unnamed arguments and to named arguments.  The
                     pair  of argument name/argument value has to be repeated for each provided value in case of
                     a named argument.  In case  the  argument  with  the  <u>-multiple</u>  attribute  is  an  unnamed
                     argument, this one has to be the absolute last one of all unnamed arguments.

              -choices <u>list</u>
                     A  possible  set of valid argument values can be attributed to an argument via the <u>-choices</u>
                     attribute. The argument value provided during a procedure call will be checked against  the
                     provided choice values.

              -choicelabels <u>list</u>
                     An   eventual  short  description  can  be  attributed  to  each  choice  option  with  the
                     <u>-choicelabels</u> attribute. These descriptions will be used in the generated help texts and as
                     radio and check box labels for the interactive calls.

                     The <u>-choicelabels</u> attribute is optional, but if it is defined, its list needs to  have  the
                     identical size as the <u>-choices</u> argument list.

              -range <u>{double</u> <u>double}</u>
                     Another  argument  constraint  can be defined with the <u>-range</u> attribute. The valid range is
                     defined with a list containing the minimum valid value  and  a  maximum  valid  value.  The
                     <u>-range</u> attribute has to be used only for numerical arguments, like integers and doubles.

              -validatecommand <u>script</u>
                     Custom  argument  value  validations can be performed via specific validation commands that
                     are defined with the <u>-validatecommand</u> attribute. The provided validation command can  be  a
                     complete  script  in  which the pattern <u>%P</u> is replaced by the argument value that has to be
                     validated.

                     Validation command declaration example:

                     tepam::procedure {display_message} {
                        -args {
                           {text -type string -description "Message text" \
                                 <b>-validatecommand</b> <b>{IllegalWordDetector</b> <b>%P}</b>}
                     } {
                     }

                     While the purpose of this custom argument validation  attribute  is  the  validation  of  a
                     specific argument, there is also a global attribute <u>-validatecommand</u> that allows performing
                     validation that involves multiple arguments.

              -validatecommand_error_text <u>string</u>
                     This attribute allows overriding the default error message for a custom argument validation
                     (defined by <u>-validatecommand</u>).

              -widget <u>string</u>
                     The widgets that allow defining the different arguments in case of an interactive procedure
                     call  are  normally  selected  automatically  in function of the argument type. The <u>-widget</u>
                     attribute allows specifying explicitly a certain widget type for an argument.

              -auxargs <u>list</u>
                     In case a procedure is called interactively, additional argument attributes can be provided
                     to the interactive argument definition form via the <u>-auxargs</u> attribute  that  is  itself  a
                     list of attribute name/attribute value pairs:

                     -auxargs {-&lt;arg_attr_name_1a&gt; &lt;arg_attr_value_1a&gt; \
                               -&lt;arg_attr_name_1b&gt; &lt;arg_attr_value_1b&gt;
                               ...
                     }

                     For  example,  if a procedure takes as argument a file name it may be beneficial to specify
                     the required file type for the interactive argument definition form. This  information  can
                     be provided via the <u>-auxargs</u> attribute to the argument definition form:

                     tepam::procedure LoadPicture {
                        -args {
                           {FileName -type existingfile -description "Picture file" \
                                      <b>-auxargs</b> <b>{-filetypes</b> <b>{{"GIF"</b> <b>{*.gif}}</b> <b>{"JPG"</b> <b>{*.jpg}}</b> <b>}}</b>}
                        }
                     } {
                     }

              -auxargs_commands <u>script</u>
                     If  the  auxiliary argument attributes are not static but have to be dynamically adaptable,
                     the <u>-auxargs_commands</u> allows  defining  them  via  commands  that  are  executed  during  a
                     procedure  call.  A  list  of  pairs  of  auxiliary  attribute names and commands has to be
                     provided to the <u>-auxargs_commands</u> attribute. The provided  commands  are  executed  in  the
                     context of the calling procedure.

                     -auxargs_commands {-&lt;arg_attr_name_1a&gt; &lt;arg_attr_command_1a&gt; \
                                        -&lt;arg_attr_name_1b&gt; &lt;arg_attr_command_1b&gt;
                                        ...
                     }

</pre><h4><b>VARIABLES</b></h4><pre>
       Several  variables  defined  inside  the <b>::tepam</b> namespace impact the mode of operation of the procedures
       that have been declared with the TEPAM <b>procedure</b> command.

       <b>named_arguments_first</b>
              This variable defines the general calling style of the procedures. It is by default set to <b>1</b> which
              selects the <u>named</u> <u>arguments</u> <u>first,</u> <u>unnamed</u> <u>arguments</u> <u>later</u> style (Tcl style).

              By setting this variable to <b>0</b>, the  <u>named</u>  <u>arguments</u>  <u>first,</u>  <u>unnamed</u>  <u>arguments</u>  <u>later</u>  style  is
              globally selected (Tk style):

              set tepam::named_arguments_first 0

       While this variable defines the general calling style, the procedure attribute <u>-named_arguments_first</u> can
       adapt this style individually for each declared procedure.

       <b>auto_argument_name_completion</b>
              This  variable controls the general automatic argument name matching mode. By default it is set to
              <b>1</b>, meaning that the called procedures are trying to match eventually  abbreviated  argument  names
              with the declared argument names.

              By setting this variable to <b>0</b> the automatic argument name matching mode is disabled:

              set tepam::auto_argument_name_completion 0

       While    this    variable    defines    the    general    matching    mode,   the   procedure   attribute
       <u>-auto_argument_name_completion</u> can adapt this mode individually for each declared procedure.

       <b>interactive_display_format</b>
              A procedure declared via the TEPAM <b>procedure</b> command can always be called  with  the  <b>-interactive</b>
              switch.  By  doing  so,  a graphical form will be generated that allows entering interactively all
              procedure arguments.

              There are two display modes for these interactive forms. The <u>extended</u> mode which  is  the  default
              mode  is  more adapted for small procedure argument sets. The <b>short</b> form is more adequate for huge
              procedure argument sets:

              set tepam::interactive_display_format "short"

       The  choice  to  use  short  or  extended  forms  can   be   globally   configured   via   the   variable
       <b>interactive_display_format</b>.   This  global  setting  can be changed individually for a procedure with the
       procedure attribute <u>-interactive_display_format</u>.

       <b>help_line_length</b>
              The maximum line length used by the procedure help text  generator  can  be  specified  with  this
              variable.  The default length which is set to 80 (characters) can easily be adapted to the need of
              an application:

              set tepam::help_line_length 120

              Since this  variable  is  applied  directly  during  the  help  text  generation,  its  value  can
              continuously be adapted to the current need.

       <b>command_log</b>
              Procedure  calls  can be logged inside the list variable <b>tepam::ProcedureCallLogList</b>. The variable
              <b>tepam::command_log</b> controls the  default  logging  settings  for  any  procedures.  The  following
              configurations are supported:

              •      <u>0</u>: Disables any procedure call loggings

              •      <u>1</u>: Enables any procedure call loggings

              •      <u>"interactive"</u>:  Will  log  any procedures called interactively (e.g. procedures called with
                     the -interactive flag). This is the default configuration.

              This default logging configuration can  be  changed  individually  for  each  procedure  with  the
              <u>-command_log</u> attribute.

</pre><h4><b>ARGUMENT</b> <b>TYPES</b></h4><pre>
       TEPAM  provides  a  comprehensive  set  of  procedure  argument  types. They can easily be completed with
       application specific types if necessary.

   <b>PREDEFINED</b> <b>ARGUMENT</b> <b>TYPES</b>
       To remember, a type can be assigned to each specified procedure argument:

              tepam::procedure {warning} {
                 -args {
                    {-font <b>-type</b> <b>font</b> -default {Arial 10 italic}}
                    {-severity_level <b>-type</b> <b>integer</b> -optional -range {1 10}}
                    {-fg <b>-type</b> <b>color</b> -optional -description "Message color"}
                    {text <b>-type</b> <b>string</b> -multiple -description "Multiple text lines to display"}
                 }
              } {
                 ...
              }
       There are some <u>special</u> <u>purpose</u> <u>types</u> that are building the first category of predefined argument types:

       •      <b>none</b>

              A <u>flag</u>, also called <u>switch</u>, is defined as a named argument that  has  the  type  <b>none</b>.  Flags  are
              always  optional  and  the  default value of the assigned variable is set to <b>0</b>. In contrast to the
              (normal) named arguments, no argument value has to be provided to a flag.

              tepam::procedure flag_test {
                 -args {
                    <b>{-flag</b> <b>-type</b> <b>none</b> <b>-description</b> <b>"This</b> <b>is</b> <b>a</b> <b>flag"}</b>
                 }
              } {
                 puts <b>$flag</b>
              }

              flag_test
              <u>-&gt;</u> <u>0</u>

              flag_test -flag
              <u>-&gt;</u> <u>1</u>

       Since no argument value has to be provided to a flag, also no data check is performed for  this  argument
       type.

       •      <b>string</b>

              <b>String</b>  is a generic argument data type. Any data string can be provided to a string type argument
              and no data type checks are therefore performed. The  string  type  allows  defining  single  line
              strings during the interactive procedure calls.

       •      <b>text</b>

              <b>Text</b>  is  identical  to <b>string</b> with the only difference that it allows entering multi line strings
              during interactive procedure calls.

       •      <b>{}</b>

              A <b>blank</b> argument type signifies an undefined argument type. This is the default argument type that
              will be used if no type has been explicitly specified. An argument that has a <b>blank</b>  type  behaves
              identically  than  an argument that has a <b>string</b> type, e.g. no argument data checks are performed.
              The only difference is that the data type <b>string</b> is mentioned in the generated help documentation,
              while this is not the case for the <b>blank</b> type.

       Several <u>numerical</u> <u>types</u> are defined by TEPAM. The type validation procedures  are  using  the  <b>string</b>  <b>is</b>
       <b>&lt;type&gt;</b>  <b>-strict</b>  commands  to  check  the validity of the provided arguments, which assures that no empty
       strings are accepted as argument value. The type validation expression for the numerical  types  and  the
       argument types to which this expression is applied are:

              string is <b>&lt;type_to_check&gt;</b> -strict <u>&lt;argument_value&gt;</u>

       •      <u>boolean</u>

       •      <u>integer</u>

       •      <u>double</u>

       Empty strings are accepted as argument value for all the alpha numeric argument types. The argument types
       that are falling into this category and validation expression used for them are:

              string is <u>&lt;type_to_check&gt;</u> <u>&lt;argument_value&gt;</u>

       •      <u>alnum</u>

       •      <u>alpha</u>

       •      <u>ascii</u>

       •      <u>control</u>

       •      <u>digit</u>

       •      <u>graph</u>

       •      <u>lower</u>

       •      <u>print</u>

       •      <u>punct</u>

       •      <u>space</u>

       •      <u>upper</u>

       •      <u>wordchar</u>

       •      <u>xdigit</u>

       In  addition  to  the  data  types checked with the <b>string</b> <b>is</b> <b>&lt;type&gt;</b> commands, TEPAM specifies some other
       useful data types:

       •      <u>char</u>

              Each string that has a length of 1 character meets the <u>character</u> type. The type check is made with
              the following expression:

              expr [string length <u>&lt;argument_value&gt;</u>]==1

       •      <u>color</u>

              Any character strings that are accepted by Tk as a color are considered as valid  color  argument.
              Please  note  that  the  Tk  package  has  to  be loaded to use the type <u>color</u>. TEPAM is using the
              following command to validate the color type:

              expr ![catch {winfo rgb . <u>&lt;argument_value&gt;</u>}]

       •      <u>font</u>

              Any character strings that are accepted by Tk as a font are considered  as  valid  font  argument.
              Please  note  that  the  Tk  package  has  to  be  loaded to use the <u>font</u> type. TEPAM is using the
              following command to validate the color type:

              expr ![catch {font measure &lt;argument_value&gt; ""}]

       •      <u>file</u>

              Any strings that are not containing one of the following characters are considered as  valid  file
              names:  *  ?  "  &lt;  &gt;. It is not necessary that the file and its containing directory exist. Zero-
              length strings are not considered as valid file names.

              The following expression is used to validate the file names:

              expr [string length &lt;argument_value&gt;]&gt;0 &amp;&amp; ![regexp {[\"*?&lt;&gt;:]} &lt;argument_value&gt;]

       •      <u>existingfile</u>

              The argument is valid if it matches with an existing file. The following  check  is  performed  to
              validate the arguments of this type:

              file exists &lt;argument_value&gt;

       •      <u>directory</u>

              The directory argument is validated exactly in the same way as the file arguments.

       •      <u>existingdirectory</u>

              The  argument  is valid if it matches with an existing directory. The following check is performed
              to validate the arguments of this type:

              file isdirectory &lt;argument_value&gt;

   <b>DEFINING</b> <b>APPLICATION</b> <b>SPECIFIC</b> <b>ARGUMENT</b> <b>TYPES</b>
       To add support for a new application specific argument  type  it  is  just  necessary  to  add  into  the
       namespace  <b>tepam</b> a validation function <b>Validation(&lt;type&gt;)</b>. This function requires one argument. It has to
       returns <b>1</b> if the provided argument matches with the relevant  data  type.  The  function  has  to  return
       otherwise <b>0</b>.

       The  validation  command  section  of  the "<u>tepam.tcl</u>" package provides sufficient examples of validation
       functions, since it implements the ones for the standard TEPAM types.

       The following additional code snippet shows the validation function  for  a  custom  argument  type  that
       requires values that have a character string length of exactly 2:

              proc tepam::Validate(two_char) {v} {expr {[string length $v]==2}}

</pre><h4><b>PROCEDURE</b> <b>CALLS</b></h4><pre>
   <b>HELP</b>
       Each  procedure can be called with the <u>-help</u> flag. The procedure will then print a generated help text to
       <u>stdout</u> and will then return without performing any additional actions.

       Taking the first procedure declared in <b>PROCEDURE</b> <b>CALLS</b>, the help request and the printed help text  would
       be:

              <b>display</b> <b>message</b> <b>-help</b>
              <u>-&gt;</u>
              <u>NAME</u>
                    <u>display</u> <u>message</u> <u>-</u> <u>Displays</u> <u>a</u> <u>simple</u> <u>message</u> <u>box</u>
              <u>SYNOPSIS</u>
                    <u>display</u> <u>message</u>
                          <u>[-mtype</u> <u>&lt;mtype&gt;]</u>
                             <u>Message</u> <u>type,</u> <u>default:</u> <u>"Warning",</u> <u>choices:</u> <u>{Info,</u> <u>Warning,</u> <u>Error}</u>
                          <u>&lt;text&gt;</u>
                             <u>Multiple</u> <u>text</u> <u>lines</u> <u>to</u> <u>display,</u> <u>type:</u> <u>string</u>
              <u>DESCRIPTION</u>
                    <u>This</u> <u>procedure</u> <u>allows</u> <u>displaying</u> <u>a</u> <u>configurable</u> <u>message</u> <u>box.</u> <u>The</u> <u>default</u>
                    <u>message</u> <u>type</u> <u>that</u> <u>is</u> <u>created</u> <u>is</u> <u>a</u> <u>warning,</u> <u>but</u> <u>also</u> <u>errors</u> <u>and</u> <u>info</u> <u>can</u>
                    <u>be</u> <u>generated.</u>
                    <u>The</u> <u>procedure</u> <u>accepts</u> <u>multiple</u> <u>text</u> <u>lines.</u>
              <u>EXAMPLE</u>
                    <u>display</u> <u>message</u> <u>-mtype</u> <u>Warning</u> <u>"Save</u> <u>first</u> <u>your</u> <u>job"</u>
       The  argument manager is checking if the last provided argument is <u>-help</u> and generates the requested help
       message if this is the case. So, also the following example will print the help message:

              <b>display</b> <b>message</b> <b>-mtype</b> <b>Info</b> <b>"It</b> <b>is</b> <b>7:00"</b> <b>-help</b>
       On the other hand, the following call will result in an error:

              <b>display</b> <b>message</b> <b>-help</b> <b>-mtype</b> <b>Info</b> <b>"It</b> <b>is</b> <b>7:00"</b>
              <u>-&gt;</u>
              <u>display</u> <u>message:</u> <u>Argument</u> <u>'-help'</u> <u>not</u> <u>known</u>

   <b>INTERACTIVE</b> <b>PROCEDURE</b> <b>CALL</b>
       If Tk has been loaded a procedure can be called with the <u>-interactive</u> flag to open a graphical form  that
       allows  specifying  interactively  all  procedure  arguments.  The  following example assures that the Tk
       library is loaded and shows the command line to call interactively the procedure  declared  in  <b>PROCEDURE</b>
       <b>CALLS</b>:

              package require Tk
              <b>display</b> <b>message</b> <b>-interactive</b>
       Also  the  <u>-interactive</u>  flag has to be placed at the last argument position as this is also required for
       the <u>-help</u> flag. Arguments defined before the <u>-interactive</u> flag will be ignored. The following example  is
       therefore also a valid interactive procedure call:

              <b>display</b> <b>message</b> -mtype Info "It is 7:00" <b>-interactive</b>

   <b>UNNAMED</b> <b>ARGUMENTS</b>
       Unnamed  arguments  are  typically  provided to the called procedure as simple parameters. This procedure
       calling form requires that the provided arguments are strictly  following  the  order  of  the  specified
       arguments.  Several  parameters  can  be  assigned  to  the  last  argument if this one has the <u>-multiple</u>
       attribute. So, the following declared procedure ...

              tepam::procedure {display_message} {
                 -args {
                    {mtype -choices {Info Warning Error}}
                    {text -type string -multiple}
                 }
              } {
                 puts "$mtype: [join $text]"
              }
       ... can for example be called in the following ways:

              <b>display_message</b> <b>Info</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u>

              <b>display_message</b> <b>Info</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b> <b>"You</b> <b>should</b> <b>go</b> <b>home."</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u> <u>You</u> <u>should</u> <u>go</u> <u>home.</u>
       The nice thing is that unnamed arguments can also be called as named arguments, which can be  handy,  for
       example if the exact specified argument order is not known to a user:

              <b>display_message</b> <b>-mtype</b> <b>Info</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u>

              <b>display_message</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b> <b>-mtype</b> <b>Info</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u>

              <b>display_message</b> <b>-mtype</b> <b>Info</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b> <b>-text</b> <b>"You</b> <b>should</b> <b>go</b> <b>home."</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u> <u>You</u> <u>should</u> <u>go</u> <u>home.</u>

              <b>display_message</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b> <b>-text</b> <b>"You</b> <b>should</b> <b>go</b> <b>home."</b> <b>-mtype</b> <b>Info</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u> <u>You</u> <u>should</u> <u>go</u> <u>home.</u>

   <b>NAMED</b> <b>ARGUMENTS</b>
       Named  arguments have to be provided to a procedure in form of a parameter pairs composed by the argument
       names and the argument values. The order how they are provided during a procedure call is irrelevant  and
       has not to match with the argument specification order.

       The following declared procedure ...

              tepam::procedure {display_message} {
                 -args {
                    {-mtype -choices {Info Warning Error}}
                    {-text -type string -multiple}
                 }
              } {
                 puts "$mtype: [join $text]"
              }
       ... can be called in the following ways:

              <b>display_message</b> <b>-mtype</b> <b>Info</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u>

              <b>display_message</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b> <b>-mtype</b> <b>Info</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u>

              <b>display_message</b> <b>-mtype</b> <b>Info</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b> <b>-text</b> <b>"You</b> <b>should</b> <b>go</b> <b>home."</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u> <u>You</u> <u>should</u> <u>go</u> <u>home.</u>

              <b>display_message</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b> <b>-text</b> <b>"You</b> <b>should</b> <b>go</b> <b>home."</b> <b>-mtype</b> <b>Info</b>
              <u>-&gt;</u> <u>Info:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u> <u>You</u> <u>should</u> <u>go</u> <u>home.</u>
       Also  named arguments that have not the <u>-multiple</u> attribute can be provided multiple times. Only the last
       provided argument will be retained in such a case:

              <b>display_message</b> <b>-mtype</b> <b>Info</b> <b>-text</b> <b>"It</b> <b>is</b> <b>PM</b> <b>7:00."</b> <b>-mtype</b> <b>Warning</b>
              <u>-&gt;</u> <u>Warning:</u> <u>It</u> <u>is</u> <u>PM</u> <u>7:00.</u>

   <b>UNNAMED</b> <b>ARGUMENTS</b> <b>FIRST,</b> <b>NAMED</b> <b>ARGUMENTS</b> <b>LATER</b> <b>(TK</b> <b>STYLE)</b>
       A procedure that has been defined while the variable <b>tepam::named_arguments_first</b> was set to 1,  or  with
       the  procedure attribute <u>-named_arguments_first</u> set to 1 has to be called in the Tcl style. The following
       procedure declaration will be used in this section to illustrate the meaning of this calling style:

              <b>set</b> <b>tepam::named_arguments_first</b> <b>1</b>
              tepam::procedure my_proc {
                 -args {
                    {-n1 -default ""}
                    {-n2 -default ""}
                    {u1 -default ""}
                    {u2 -default ""}
                 }
              } {
                 puts "n1:'$n1', n2:'$n2', u1:'$u1', u2:'$u2'"
              }
       The unnamed arguments are placed at the end of procedure call, after the named arguments:

              my_proc <b>-n1</b> <b>N1</b> <b>-n2</b> <b>N2</b> <b>U1</b> <b>U2</b>
              <u>-&gt;</u> <u>n1:'N1',</u> <u>n2:'N2',</u> <u>u1:'U1',</u> <u>u2:'U2'</u>
       The argument parser considers the first argument that doesn't start with the '-' character as well as all
       following arguments as unnamed argument:

              my_proc <b>U1</b> <b>U2</b>
              <u>-&gt;</u> <u>n1:'',</u> <u>n2:'',</u> <u>u1:'U1',</u> <u>u2:'U2'</u>
       Named arguments can be defined multiple times. If the named argument has  the  <u>-multiply</u>  attribute,  all
       argument  values  will  be collected in a list. Otherwise, only the last provided attribute value will be
       retained:

              my_proc <b>-n1</b> <b>N1</b> <b>-n2</b> <b>N2</b> <b>-n1</b> <b>M1</b> <b>U1</b> <b>U2</b>
              <u>-&gt;</u> <u>n1:'M1',</u> <u>n2:'N2',</u> <u>u1:'U1',</u> <u>u2:'U2'</u>
       The name of the first unnamed argument has therefore not to start with the  '-'  character.  The  unnamed
       argument  is  otherwise considered as name of another named argument. This is especially important if the
       first unnamed argument is given by a variable that can contain any character strings:

              my_proc <b>-n1</b> <b>N1</b> <b>-n2</b> <b>N2</b> <b>"-&gt;"</b> <b>"&lt;-"</b>
              <u>-&gt;</u> <u>my_proc:</u> <u>Argument</u> <u>'-&gt;'</u> <u>not</u> <u>known</u>

              set U1 "-&gt;"
              my_proc <b>-n1</b> <b>N1</b> <b>-n2</b> <b>N2</b> <b>$U1</b> <b>U2</b>
              my_proc: Argument '-&gt;' not known
       The '--' flag allows separating unambiguously the unnamed arguments from the named  arguments.  All  data
       after the '--' flag will be considered as unnamed argument:

              my_proc <b>-n1</b> <b>N1</b> <b>-n2</b> <b>N2</b> <b>--</b> <b>"-&gt;"</b> <b>"&lt;-"</b>
              <u>-&gt;</u> <u>n1:'N1',</u> <u>n2:'N2',</u> <u>u1:'-&gt;',</u> <u>u2:'&lt;-'</u>

              set U1 "-&gt;"
              my_proc <b>-n1</b> <b>N1</b> <b>-n2</b> <b>N2</b> <b>--</b> <b>$U1</b> <b>U2</b>
              <u>-&gt;</u> <u>n1:'N1',</u> <u>n2:'N2',</u> <u>u1:'-&gt;',</u> <u>u2:'&lt;-'</u>

   <b>NAMED</b> <b>ARGUMENTS</b> <b>FIRST,</b> <b>UNNAMED</b> <b>ARGUMENTS</b> <b>LATER</b> <b>(TCL</b> <b>STYLE)</b>
       The   Tk   calling   style   will   be   chosen   if   a   procedure   is   defined  while  the  variable
       <b>tepam::named_arguments_first</b> is set to 0, or if the procedure attribute <u>-named_arguments_first</u>  has  been
       set to 0. The following procedure will be used in this section to illustrate this calling style:

              <b>set</b> <b>tepam::named_arguments_first</b> <b>0</b>
              tepam::procedure my_proc {
                 -args {
                    {-n1 -default ""}
                    {-n2 -default ""}
                    {u1}
                    {u2 -default "" -multiple}
                 }
              } {
                 puts "n1:'$n1', n2:'$n2', u1:'$u1', u2:'$u2'"
              }
       The  unnamed  arguments  have  to  be  provided  first  in  this  case.  The named arguments are provided
       afterwards:

              my_proc <b>U1</b> <b>U2</b> <b>-n1</b> <b>N1</b> <b>-n2</b> <b>N2</b>
              <u>-&gt;</u> <u>n1:'N1',</u> <u>n1:'N1',</u> <u>u1:'U1',</u> <u>u2:'U2'</u>
       The argument parser will assign to each defined unnamed argument a value before it switches to  read  the
       named  arguments. This default behavior changes a bit if there are unnamed arguments that are optional or
       that can take multiple values.

       An argument value will only be assigned to an unnamed argument that is  optional  (that  has  either  the
       <u>-optional</u> attribute or that has a default value), if the value is not beginning with the '-' character or
       if  no named arguments are defined. The value that starts with '-' is otherwise considered as the name of
       a named argument.

       Argument values are assigned to an argument that has the <u>-multiple</u> attribute as  long  as  the  parameter
       value doesn't starts with the '-' character.

       Values  that  start  with  the '-' character can therefore not be assigned to optional unnamed arguments,
       which restricts the usage of the Tcl procedure calling style. The Tk style  may  be  preferable  in  some
       cases,  since  it allows separating unambiguously the named arguments from the unnamed ones with the '--'
       flag.

       Let's explore in a bit less theoretically the ways how the previously defined procedure  can  be  called:
       The  first  example  calls  the  procedure  without any parameters, which leads to an error since <u>u1</u> is a
       mandatory argument:

              my_proc
              <u>-&gt;</u> <u>my_proc:</u> <u>Required</u> <u>argument</u> <u>is</u> <u>missing:</u> <u>u1</u>
       The procedure call is valid if one parameter is provided for <u>u1</u>:

              my_proc <b>U1</b>
              <u>-&gt;</u> <u>n1:'',</u> <u>n2:'',</u> <u>u1:'U1',</u> <u>u2:''</u>
       If more parameters are provided that are not starting with the '-' character, they will be attributed  to
       the unnamed arguments. <u>U2</u> will receive 3 of these parameters, since it accepts multiple values:

              my_proc <b>U1</b> <b>U2</b> <b>U3</b> <b>U4</b>
              <u>-&gt;</u> <u>n1:'',</u> <u>n2:'',</u> <u>u1:'U1',</u> <u>u2:'U2</u> <u>U3</u> <u>U4'</u>
       As  soon  as  one  parameter  starts  with '-' and all unnamed arguments have been assigned, the argument
       manager tries to interpret the parameter as name of a named argument. The procedure call will fail  if  a
       value beginning with '-' is assigned to an unnamed argument:

              my_proc <b>U1</b> <b>U2</b> <b>U3</b> <b>U4</b> <b>-U5</b>
              <u>-&gt;</u> <u>my_proc:</u> <u>Argument</u> <u>'-U5'</u> <u>not</u> <u>known</u>
       The  attribution  of  a  parameter  to  a  named  argument  will fail if there are undefined unnamed (non
       optional) arguments. The name specification will in this case simply be considered as a  parameter  value
       that  is  attributed  to the <u>next</u> unnamed argument. This was certainly not the intention in the following
       example:

              my_proc <b>-n1</b> <b>N1</b>
              <u>-&gt;</u> <u>n1:'',</u> <u>n2:'',</u> <u>u1:'-n1',</u> <u>u2:'N1'</u>
       The situation is completely different if values have already  been  assigned  to  all  mandatory  unnamed
       arguments.  A  parameter  beginning  with  the  '-'  character  will in this case be considered as a name
       identifier for a named argument:

              my_proc <b>U1</b> <b>-n1</b> <b>N1</b>
              <u>-&gt;</u> <u>n1:'N1',</u> <u>n2:'',</u> <u>u1:'U1',</u> <u>u2:''</u>
       No unnamed arguments are allowed behind the named arguments:

              my_proc <b>U1</b> <b>-n1</b> <b>N1</b> <b>U2</b>
              <u>-&gt;</u> <u>my_proc:</u> <u>Argument</u> <u>'U2'</u> <u>is</u> <u>not</u> <u>an</u> <u>option</u>
       The '--' flag has no special meaning if not all mandatory arguments have got assigned a value. This  flag
       will simply be attributed to one of the unnamed arguments:

              my_proc <b>--</b> <b>-n1</b> <b>N1</b>
              <u>-&gt;</u> <u>n1:'N1',</u> <u>n2:'',</u> <u>u1:'--',</u> <u>u2:''</u>
       But the '--' flag is simply ignored if the argument parser has started to handle the named arguments:

              my_proc <b>U1</b> <b>--</b> <b>-n1</b> <b>N1</b>
              <u>-&gt;</u> <u>n1:'N1',</u> <u>n2:'',</u> <u>u1:'U1',</u> <u>u2:''</u>

              my_proc <b>U1</b> <b>-n1</b> <b>N1</b> <b>--</b> <b>-n2</b> <b>N2</b>
              <u>-&gt;</u> <u>n1:'N1',</u> <u>n2:'N2',</u> <u>u1:'U1',</u> <u>u2:''</u>

   <b>RAW</b> <b>ARGUMENT</b> <b>LIST</b>
       It  may  be  necessary  sometimes  that the procedure body is able to access the entire list of arguments
       provided during a procedure call. This can  happen  via  the  <b>args</b>  variable  that  contains  always  the
       unprocessed argument list:

              tepam::procedure {display_message} {
                 -args {
                    {-mtype -choices {Warning Error} -default Warning}
                    {text -type string -multiple}

                 }
              } {
                 puts "args: <b>$args</b>"
              }
              display_message -mtype Warning "It is 7:00"
              <u>-&gt;</u> <u>args:</u> <u>-mtype</u> <u>Warning</u> <u>{It</u> <u>is</u> <u>7:00}</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/tepam.3tcl.html">tepam</a>(3tcl), tepam::<a href="../man3tcl/argument_dialogbox.3tcl.html">argument_dialogbox</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       argument integrity, argument validation, arguments, procedure, subcommand

</pre><h4><b>CATEGORY</b></h4><pre>
       Procedures, arguments, parameters, options

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2009-2013, Andreas Drollinger

tcllib                                                0.5.0                               <u>tepam::<a href="../man3tcl/procedure.3tcl.html">procedure</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>