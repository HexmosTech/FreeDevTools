<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tdbc_Init, Tdbc_MapSqlState, Tdbc_TokenizeSql - C procedures to facilitate writing TDBC drivers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl8.6-tdbc">tcl8.6-tdbc_1.1.10-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tdbc_Init, Tdbc_MapSqlState, Tdbc_TokenizeSql - C procedures to facilitate writing TDBC drivers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tdbc.h&gt;</b>

       int
       <b>Tdbc_Init</b>(<u>interp</u>)

       Tcl_Obj *
       <b>Tdbc_TokenizeSql</b>(<u>interp,</u> <u>sqlcode</u>)

       const char *
       <b>Tdbc_MapSqlState</b>(<u>state</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in/out)        Pointer to a Tcl interpreter.

       const char <u>*state</u> (in)             Pointer to a character string containing a 'SQL state' from a database
                                          error.

       const char <u>*sqlcode</u> (in)           Pointer to a character string containing a SQL statement.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  TDBC  library  provides  several  C  procedures  that simplify writing a TDBC driver. They include a
       procedure that tokenizes a SQL statement, locating variables to be  substituted,  and  a  procedure  that
       accepts a SQL state and returns an error class for the interpreter error information.

       <b>Tdbc_Init</b>  must  be invoked prior to any other TDBC call.  It accepts a pointer to a Tcl interpreter, and
       arranges to load the TDBC library. It returns <b>TCL_OK</b> if the Tcl  library  was  loaded  successfully,  and
       <b>TCL_ERROR</b> otherwise. If <b>TCL_ERROR</b> is returned, the interpreter's result contains the error message.

       <b>Tdbc_TokenizeSql</b>  accepts  a pointer to a Tcl interpreter, and a pointer to a character string containing
       one or more SQL statements. It tokenizes the SQL statements, and returns a  pointer  to  a  Tcl_Obj  that
       contains  a  list  of the tokens that make up the statement. Concatenating the tokens together will yield
       the original SQL code. The returned Tcl_Obj has a reference count of zero. The caller is responsible  for
       managing  the  reference  count  as  needed.   See  <b>TOKENS</b>  below for a description of what may be in the
       returned list of tokens.

       <b>Tdbc_MapSqlState</b> accepts a pointer to a string, usually five characters long, that  is  the  'SQL  state'
       that  resulted from a database error. It returns a character string that is suitable for inclusion as the
       error class when constructing the error code for an error in a TDBC driver.  (By  convention,  the  error
       code is a list having at least four elements: "<b>TDBC</b> <u>errorClass</u> <u>sqlstate</u> <u>driverName</u> <u>details...</u>".)

</pre><h4><b>TOKENS</b></h4><pre>
       Each token returned from <b>Tdbc_TokenizeSql</b> may be one of the following:

       [1]    A  bound  variable, which begins with one of the characters '<b>:</b>', '<b>@</b>', or '<b>$</b>'. The remainder of the
              string is the variable name and will consist of  alphanumeric  characters  and  underscores.  (The
              leading character will be be non-numeric.)

       [2]    A semicolon that separates two SQL statements.

       [3]    Something  else  in  a  SQL  statement.  The  tokenizer  does  not attempt to parse SQL; it merely
              identifies bound variables (distinguishing them from similar strings appearing  inside  quotes  or
              comments) and statement delimiters.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/tdbc.3tcl.html">tdbc</a>(3tcl), tdbc::<a href="../man3tcl/mapSqlState.3tcl.html">mapSqlState</a>(3tcl), tdbc::<a href="../man3tcl/tokenize.3tcl.html">tokenize</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       TDBC, SQL, database, tokenize

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2009 by Kevin B. Kenny.

Tcl                                                    8.6                                          <u><a href="../man3/Tdbc_Init.3.html">Tdbc_Init</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>