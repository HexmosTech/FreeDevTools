<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_journal_add_match, sd_journal_add_disjunction, sd_journal_add_conjunction, sd_journal_flush_matches -</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_journal_add_match, sd_journal_add_disjunction, sd_journal_add_conjunction, sd_journal_flush_matches -
       Add or remove entry matches

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-journal.h&gt;</b>

       <b>int</b> <b>sd_journal_add_match(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>data</u><b>,</b> <b>size_t</b> <u>size</u><b>);</b>

       <b>int</b> <b>sd_journal_add_disjunction(sd_journal</b> <b>*</b><u>j</u><b>);</b>

       <b>int</b> <b>sd_journal_add_conjunction(sd_journal</b> <b>*</b><u>j</u><b>);</b>

       <b>void</b> <b>sd_journal_flush_matches(sd_journal</b> <b>*</b><u>j</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_journal_add_match()</b> adds a match by which to filter the entries of the journal file. Matches applied
       with this call will filter what can be iterated through and read from the journal file via calls like
       <b><a href="../man3/sd_journal_next.3.html">sd_journal_next</a></b>(3) and <b><a href="../man3/sd_journal_get_data.3.html">sd_journal_get_data</a></b>(3). Parameter <u>data</u> must be of the form "<u>FIELD</u>=<u>value</u>", where
       the <u>FIELD</u> part is a short uppercase string consisting only of 0–9, A–Z and the underscore; it may not
       begin with two underscores or be the empty string. The <u>value</u> part may be anything, including binary.
       Parameter <u>size</u> specifies the number of bytes in <u>data</u> (i.e. the length of <u>FIELD</u>, plus one, plus the length
       of <u>value</u>). Parameter <u>size</u> may also be specified as <b>0</b>, in which case <u>data</u> must be a <b>NUL</b>-terminated string,
       and the bytes before the terminating zero are used as the match.

       If a match is applied, only entries with this field set will be iterated. Multiple matches may be active
       at the same time: If they apply to different fields, only entries with both fields set like this will be
       iterated. If they apply to the same fields, only entries where the field takes one of the specified
       values will be iterated. Well known fields are documented in <b><a href="../man7/systemd.journal-fields.7.html">systemd.journal-fields</a></b>(7). Whenever a new
       match is added the current entry position is reset, and <b><a href="../man3/sd_journal_next.3.html">sd_journal_next</a></b>(3) (or a similar call) needs to
       be called before entries can be read again.

       <b>sd_journal_add_disjunction()</b> may be used to insert a disjunction (i.e. logical OR) in the match list. If
       this call is invoked, all previously added matches since the last invocation of
       <b>sd_journal_add_disjunction()</b> or <b>sd_journal_add_conjunction()</b> are combined in an OR with all matches added
       afterwards, until <b>sd_journal_add_disjunction()</b> or <b>sd_journal_add_conjunction()</b> is invoked again to begin
       the next OR or AND term.

       <b>sd_journal_add_conjunction()</b> may be used to insert a conjunction (i.e. logical AND) in the match list. If
       this call is invoked, all previously added matches since the last invocation of
       <b>sd_journal_add_conjunction()</b> are combined in an AND with all matches added afterwards, until
       <b>sd_journal_add_conjunction()</b> is invoked again to begin the next AND term. The combination of
       <b>sd_journal_add_match()</b>, <b>sd_journal_add_disjunction()</b> and <b>sd_journal_add_conjunction()</b> may be used to
       build complex search terms, even though full logical expressions are not available. Note that
       <b>sd_journal_add_conjunction()</b> operates one level 'higher' than <b>sd_journal_add_disjunction()</b>. It is hence
       possible to build an expression of AND terms, consisting of OR terms, consisting of AND terms, consisting
       of OR terms of matches (the latter OR expression is implicitly created for matches with the same field
       name, see above).

       <b>sd_journal_flush_matches()</b> may be used to flush all matches, disjunction and conjunction terms again.
       After this call all filtering is removed and all entries in the journal will be iterated again.

       Note that filtering via matches only applies to the way the journal is read, it has no effect on storage
       on disk.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>sd_journal_add_match()</b>, <b>sd_journal_add_disjunction()</b> and <b>sd_journal_add_conjunction()</b> return 0 on success
       or a negative errno-style error code.  <b>sd_journal_flush_matches()</b> returns nothing.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example adds matches to a journal context object to iterate only through messages generated
       by the Avahi service at the four error log levels, plus all messages of the message ID
       03bb1dab98ab4ecfbf6fff2738bdd964 coming from any service (this example lacks the necessary error
       checking):

           ...
           int add_matches(sd_journal *j) {
             sd_journal_add_match(j, "_SYSTEMD_UNIT=avahi-daemon.service", 0);
             sd_journal_add_match(j, "PRIORITY=0", 0);
             sd_journal_add_match(j, "PRIORITY=1", 0);
             sd_journal_add_match(j, "PRIORITY=2", 0);
             sd_journal_add_match(j, "PRIORITY=3", 0);
             sd_journal_add_disjunction(j);
             sd_journal_add_match(j, "MESSAGE_ID=03bb1dab98ab4ecfbf6fff2738bdd964", 0);
           }

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_journal_add_match()</b>, <b>sd_journal_add_disjunction()</b>, and <b>sd_journal_flush_matches()</b> were added in
       version 187.

       <b>sd_journal_add_conjunction()</b> was added in version 202.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-journal.3.html">sd-journal</a></b>(3), <b><a href="../man3/sd_journal_open.3.html">sd_journal_open</a></b>(3), <b><a href="../man3/sd_journal_next.3.html">sd_journal_next</a></b>(3), <b><a href="../man3/sd_journal_get_data.3.html">sd_journal_get_data</a></b>(3),
       <b><a href="../man7/systemd.journal-fields.7.html">systemd.journal-fields</a></b>(7)

systemd 257.7                                                                            <u><a href="../man3/SD_JOURNAL_ADD_MATCH.3.html">SD_JOURNAL_ADD_MATCH</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>