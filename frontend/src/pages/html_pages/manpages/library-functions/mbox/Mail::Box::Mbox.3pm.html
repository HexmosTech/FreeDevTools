<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Box::Mbox - handle folders in Mbox format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-box-perl">libmail-box-perl_3.011-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Box::Mbox - handle folders in Mbox format

</pre><h4><b>INHERITANCE</b></h4><pre>
        Mail::Box::Mbox
          is a Mail::Box::File
          is a Mail::Box
          is a Mail::Reporter

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Mail::Box::Mbox;
        my $folder = Mail::Box::Mbox-&gt;new(folder =&gt; $ENV{MAIL}, ...);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This documentation describes how Mbox mailboxes work, and also describes what you can do with the Mbox
       folder object Mail::Box::Mbox.

       Extends "DESCRIPTION" in Mail::Box::File.

</pre><h4><b>OVERLOADED</b></h4><pre>
       Extends "OVERLOADED" in Mail::Box::File.

       overload: <b>""</b>
           Inherited, see "OVERLOADED" in Mail::Box

       overload: <b>@{}</b>
           Inherited, see "OVERLOADED" in Mail::Box

       overload: <b>cmp</b>
           Inherited, see "OVERLOADED" in Mail::Box

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Mail::Box::File.

   <b>Constructors</b>
       Extends "Constructors" in Mail::Box::File.

       Mail::Box::Mbox-&gt;<b>new</b>(%options)
            -Option             --Defined in     --Default
             access               Mail::Box        'r'
             body_delayed_type    Mail::Box        Mail::Message::Body::Delayed
             body_type            Mail::Box::File  &lt;see description&gt;
             coerce_options       Mail::Box        []
             create               Mail::Box        &lt;false&gt;
             extract              Mail::Box        10240
             field_type           Mail::Box        undef
             fix_headers          Mail::Box        &lt;false&gt;
             folder               Mail::Box        $ENV{MAIL}
             folderdir            Mail::Box        $ENV{HOME}.'/Mail'
             head_delayed_type    Mail::Box        Mail::Message::Head::Delayed
             head_type            Mail::Box        Mail::Message::Head::Complete
             keep_dups            Mail::Box        &lt;false&gt;
             lock_extension       Mail::Box::File  '.lock'
             lock_file            Mail::Box        &lt;foldername&gt;&lt;lock-extension&gt;
             lock_timeout         Mail::Box        1 hour
             lock_type            Mail::Box        Mail::Box::Locker::DotLock
             lock_wait            Mail::Box        10 seconds
             locker               Mail::Box        undef
             log                  Mail::Reporter   'WARNINGS'
             manager              Mail::Box        undef
             message_type         Mail::Box        Mail::Box::Mbox::Message
             multipart_type       Mail::Box        Mail::Message::Body::Multipart
             remove_when_empty    Mail::Box        &lt;true&gt;
             save_on_exit         Mail::Box        &lt;true&gt;
             subfolder_extension                   '.d'
             trace                Mail::Reporter   'WARNINGS'
             trusted              Mail::Box        &lt;depends on folder location&gt;
             write_policy         Mail::Box::File  undef

           access =&gt; MODE
           body_delayed_type =&gt; CLASS
           body_type =&gt; CLASS|CODE
           coerce_options =&gt; ARRAY
           create =&gt; BOOLEAN
           extract =&gt; INTEGER | CODE | METHOD | 'LAZY'|'ALWAYS'
           field_type =&gt; CLASS
           fix_headers =&gt; BOOLEAN
           folder =&gt; FOLDERNAME
           folderdir =&gt; DIRECTORY
           head_delayed_type =&gt; CLASS
           head_type =&gt; CLASS
           keep_dups =&gt; BOOLEAN
           lock_extension =&gt; FILENAME|STRING
           lock_file =&gt; FILENAME
           lock_timeout =&gt; SECONDS
           lock_type =&gt; CLASS|STRING|ARRAY
           lock_wait =&gt; SECONDS
           locker =&gt; OBJECT
           log =&gt; LEVEL
           manager =&gt; MANAGER
           message_type =&gt; CLASS
           multipart_type =&gt; CLASS
           remove_when_empty =&gt; BOOLEAN
           save_on_exit =&gt; BOOLEAN
           subfolder_extension =&gt; STRING
             Mbox  folders do not support sub-folders.  However, this module can simulate sub-directories if the
             user wants it to.  When a subfolder of folder "xyz" is created, we  create  a  directory  which  is
             called "xyz.d" to contain them.  This extension ".d" can be changed using this option.

           trace =&gt; LEVEL
           trusted =&gt; BOOLEAN
           write_policy =&gt; 'REPLACE'|'INPLACE'|undef

   <b>The</b> <b>folder</b>
       Extends "The folder" in Mail::Box::File.

       $obj-&gt;<b>addMessage</b>($message, %options)
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>addMessages</b>(@messages)
           Inherited, see "The folder" in Mail::Box

       Mail::Box::Mbox-&gt;<b>appendMessages</b>(%options)
           Inherited, see "METHODS" in Mail::Box::File

       $obj-&gt;<b>close</b>(%options)
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>copyTo</b>($folder, %options)
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>delete</b>(%options)
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>filename</b>()
           Inherited, see "The folder" in Mail::Box::File

       $obj-&gt;<b>folderdir</b>( [$directory] )
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>name</b>()
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>organization</b>()
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>size</b>()
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>type</b>()
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>update</b>(%options)
           Inherited, see "The folder" in Mail::Box

       $obj-&gt;<b>url</b>()
           Inherited, see "The folder" in Mail::Box

   <b>Folder</b> <b>flags</b>
       Extends "Folder flags" in Mail::Box::File.

       $obj-&gt;<b>access</b>()
           Inherited, see "Folder flags" in Mail::Box

       $obj-&gt;<b>isModified</b>()
           Inherited, see "Folder flags" in Mail::Box

       $obj-&gt;<b>modified</b>( [BOOLEAN] )
           Inherited, see "Folder flags" in Mail::Box

       $obj-&gt;<b>writable</b>()
           Inherited, see "Folder flags" in Mail::Box

   <b>The</b> <b>messages</b>
       Extends "The messages" in Mail::Box::File.

       $obj-&gt;<b>current</b>( [$number|$message|$message_id] )
           Inherited, see "The messages" in Mail::Box

       $obj-&gt;<b>find</b>($message_id)
           Inherited, see "The messages" in Mail::Box

       $obj-&gt;<b>findFirstLabeled</b>( $label, [BOOLEAN, [$msgs]] )
           Inherited, see "The messages" in Mail::Box

       $obj-&gt;<b>message</b>( $index, [$message] )
           Inherited, see "The messages" in Mail::Box

       $obj-&gt;<b>messageId</b>( $message_id, [$message] )
           Inherited, see "The messages" in Mail::Box

       $obj-&gt;<b>messageIds</b>()
           Inherited, see "The messages" in Mail::Box

       $obj-&gt;<b>messages</b>( &lt;'ALL'|$range|'ACTIVE'|'DELETED'|$label| !$label|$filter&gt; )
           Inherited, see "The messages" in Mail::Box

       $obj-&gt;<b>nrMessages</b>(%options)
           Inherited, see "The messages" in Mail::Box

       $obj-&gt;<b>scanForMessages</b>($message, $message_ids, $timespan, $window)
           Inherited, see "The messages" in Mail::Box

   <b>Sub-folders</b>
       Extends "Sub-folders" in Mail::Box::File.

       $obj-&gt;<b>listSubFolders</b>(%options)
       Mail::Box::Mbox-&gt;<b>listSubFolders</b>(%options)
            -Option             --Defined in     --Default
             check                Mail::Box        &lt;false&gt;
             folder               Mail::Box        &lt;from calling object&gt;
             folderdir            Mail::Box        &lt;from folder&gt;
             skip_empty           Mail::Box        &lt;false&gt;
             subfolder_extension                   &lt;from object&gt;

           check =&gt; BOOLEAN
           folder =&gt; FOLDERNAME
           folderdir =&gt; DIRECTORY
           skip_empty =&gt; BOOL
           subfolder_extension =&gt; STRING
             When  the  method  is  called on an open folder, the extension defined by it is used to detect sub-
             folders by default.  Otherwise, '.d' is taken.

       $obj-&gt;<b>nameOfSubFolder</b>( $subname, [$parentname] )
       Mail::Box::Mbox-&gt;<b>nameOfSubFolder</b>( $subname, [$parentname] )
           Inherited, see "Sub-folders" in Mail::Box

       $obj-&gt;<b>openRelatedFolder</b>(%options)
           Inherited, see "Sub-folders" in Mail::Box

       $obj-&gt;<b>openSubFolder</b>($subname, %options)
           Inherited, see "Sub-folders" in Mail::Box

       $obj-&gt;<b>topFolderWithMessages</b>()
       Mail::Box::Mbox-&gt;<b>topFolderWithMessages</b>()
           Inherited, see "Sub-folders" in Mail::Box

   <b>Internals</b>
       Extends "Internals" in Mail::Box::File.

       $obj-&gt;<b>coerce</b>($message, %options)
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>create</b>($foldername, %options)
       Mail::Box::Mbox-&gt;<b>create</b>($foldername, %options)
            -Option             --Defined in     --Default
             folderdir            Mail::Box        undef
             subfolder_extension                   undef

           folderdir =&gt; DIRECTORY
           subfolder_extension =&gt; STRING
             If a directory is found on the location of the folder to be created, this STRING is used to  extend
             that  directory  name with.  This will cause the directory to be seen as sub-folder for the created
             folder.  This argument is passed to <b>folderToFilename()</b>.

       $obj-&gt;<b>determineBodyType</b>($message, $head)
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>folderToFilename</b>( $foldername, $folderdir, [$extension] )
       Mail::Box::Mbox-&gt;<b>folderToFilename</b>( $foldername, $folderdir, [$extension] )
           Translate a folder name into a filename, using the $folderdir value to replace a leading "=".  If  no
           $extension  is  specified  and  this method is called as instance method, new(subfolder_extension) is
           used.  Otherwise, the extension default to '.d'.

       Mail::Box::Mbox-&gt;<b>foundIn</b>( [$foldername], %options )
           If no $foldername is specified, then the value of the "folder" option is taken.  A mbox folder  is  a
           file  which starts with a separator line: a line with 'From ' as first characters.  Blank lines which
           start the file are ignored, which is not for all MUA's acceptable.

            -Option             --Defined in     --Default
             folder                                undef
             folderdir            Mail::Box        undef
             subfolder_extension                   &lt;from object&gt;

           folder =&gt; FOLDERNAME
           folderdir =&gt; DIRECTORY
           subfolder_extension =&gt; STRING
       $obj-&gt;<b>lineSeparator</b>( [&lt;STRING|'CR'|'LF'|'CRLF'&gt;] )
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>locker</b>()
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>messageCreateOptions</b>( [$type, $config] )
           Inherited, see "Internals" in Mail::Box::File

       $obj-&gt;<b>moveAwaySubFolder</b>($directory, $extension)
           Inherited, see "Internals" in Mail::Box::File

       $obj-&gt;<b>parser</b>()
           Inherited, see "Internals" in Mail::Box::File

       $obj-&gt;<b>read</b>(%options)
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>readMessages</b>(%options)
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>storeMessage</b>($message)
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>toBeThreaded</b>($messages)
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>toBeUnthreaded</b>($messages)
           Inherited, see "Internals" in Mail::Box

       $obj-&gt;<b>updateMessages</b>(%options)
           Inherited, see "Internals" in Mail::Box::File

       $obj-&gt;<b>write</b>(%options)
           Inherited, see "Internals" in Mail::Box::File

       $obj-&gt;<b>writeMessages</b>(%options)
           Inherited, see "Internals" in Mail::Box

   <b>Other</b> <b>methods</b>
       Extends "Other methods" in Mail::Box::File.

       $obj-&gt;<b>timespan2seconds</b>($time)
       Mail::Box::Mbox-&gt;<b>timespan2seconds</b>($time)
           Inherited, see "Other methods" in Mail::Box

   <b>Error</b> <b>handling</b>
       Extends "Error handling" in Mail::Box::File.

       $obj-&gt;<b>AUTOLOAD</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>addReport</b>($object)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
       Mail::Box::Mbox-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>errors</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>log</b>( [$level, [$strings]] )
       Mail::Box::Mbox-&gt;<b>log</b>( [$level, [$strings]] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logPriority</b>($level)
       Mail::Box::Mbox-&gt;<b>logPriority</b>($level)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logSettings</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>notImplemented</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>report</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>reportAll</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>trace</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>warnings</b>()
           Inherited, see "Error handling" in Mail::Reporter

   <b>Cleanup</b>
       Extends "Cleanup" in Mail::Box::File.

       $obj-&gt;<b>DESTROY</b>()
           Inherited, see "Cleanup" in Mail::Box

   <b>DETAILS</b>
       Extends "DETAILS" in Mail::Box::File.

</pre><h4><b>DETAILS</b></h4><pre>
       Extends "DETAILS" in Mail::Box::File.

   <b>Different</b> <b>kinds</b> <b>of</b> <b>folders</b>
       Extends "Different kinds of folders" in Mail::Box::File.

   <b>Available</b> <b>folder</b> <b>types</b>
       Extends "Available folder types" in Mail::Box::File.

   <b>Folder</b> <b>class</b> <b>implementation</b>
       Extends "Folder class implementation" in Mail::Box::File.

   <b>How</b> <b>MBOX</b> <b>folders</b> <b>work</b>
       MBOX folders store many messages in one file.  Each message begins with a  line  which  starts  with  the
       string  "From  ".  Lines inside a message which accidentally start with "From" are, in the file, preceded
       by `&gt;'. This character is stripped when the message is read.

       In this respect must be noted that the format of the MBOX files  is  not  strictly  defined.   The  exact
       content  of  the separator lines differ between Mail User Agents (MUA's).  Besides, some MUAs (like mutt)
       forget to encode the "From " lines within message bodies, breaking other parsers....

   <b>Simulation</b> <b>of</b> <b>sub-folders</b>
       MBOX folders do not have a sub-folder concept as directory based folders do, but this MBOX  module  tries
       to simulate them.  In this implementation a directory like

        Mail/subject1/

       is  taken  as  an empty folder "Mail/subject1", with the folders in that directory as sub-folders for it.
       You may also use

        Mail/subject1
        Mail/subject1.d/

       where "Mail/subject1" is the folder, and the folders in the "Mail/subject1.d" directory are used as  sub-
       folders.   If  your  situation is similar to the first example and you want to put messages in that empty
       folder, the directory is automatically (and transparently) renamed,  so  that  the  second  situation  is
       reached.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error: Cannot append messages to folder file $filename: $!
           Appending  messages to a not-opened file-organized folder may fail when the operating system does not
           allow write access to the file at hand.

       Error: Cannot move away sub-folder $dir
       Warning: Cannot remove folder $name file $filename: $!
           Writing an empty folder will usually cause that folder to be removed, which fails for  the  indicated
           reason.  new(remove_when_empty)

       Warning: Cannot remove folder $name file $filename: $!
           Writing  an  empty folder will usually cause that folder to be removed, which fails for the indicated
           reason.  new(remove_when_empty) controls whether the empty folder will removed; setting it  to  false
           (0) may be needed to avoid this message.

       Error: Cannot replace $filename by $tempname, to update folder $name: $!
           The  replace  policy wrote a new folder file to update the existing, but was unable to give the final
           touch: replacing the old version of the folder file for the indicated reason.

       Warning: Changes not written to read-only folder $self.
           You have opened the folder read-only --which is the default set by new(access)--, made modifications,
           and now want to close it.  Set close(force) if you want to overrule the access  mode,  or  close  the
           folder with close(write) set to "NEVER".

       Error: Copying failed for one message.
           For  some  reason,  for  instance  disc  full, removed by external process, or read-protection, it is
           impossible to copy one of the messages.  Copying will proceed for the other messages.

       Error: Destination folder $name is not writable.
           The folder where the messages are copied to is not opened with write access (see new(access)).   This
           has no relation with write permission to the folder which is controlled by your operating system.

       Warning: Different messages with id $msgid
           The  message  id  is discovered more than once within the same folder, but the content of the message
           seems to be different.  This should not be possible: each message must be unique.

       Error: File too short to get write message $nr ($size, $need)
           Mail::Box is lazy: it tries to leave messages in the folders until they are used,  which  saves  time
           and  memory  usage.   When  this  message appears, something is terribly wrong: some lazy message are
           needed for updating the folder, but they cannot be retrieved from the original file anymore.  In this
           case, messages can be lost.

           This message does appear regularly on Windows systems when using the 'replace' write policy.   Please
           help  to  find  the  cause,  probably  something  to  do  with  Windows incorrectly handling multiple
           filehandles open in the same file.

       Error: Folder $name not deleted: not writable.
           The folder must be opened with write access via new(access), otherwise removing it will  be  refused.
           So, you may have write-access according to the operating system, but that will not automatically mean
           that this "delete" method permits you to.  The reverse remark is valid as well.

       Error: Invalid timespan '$timespan' specified.
           The string does not follow the strict rules of the time span syntax which is permitted as parameter.

       Warning: Message-id '$msgid' does not contain a domain.
           According  to  the  RFCs,  message-ids  need to contain a unique random part, then an "@", and then a
           domain name.  This is made to avoid the creation of two messages  with  the  same  id.   The  warning
           emerges when the "@" is missing from the string.

       Error: Package $package does not implement $method.
           Fatal  error:  the specific package (or one of its superclasses) does not implement this method where
           it should. This message means that some other related classes do implement this  method  however  the
           class  at  hand does not.  Probably you should investigate this and probably inform the author of the
           package.

       Error: Unable to create subfolder $name of $folder.
           The copy includes the subfolders, but for some reason it was not  possible  to  copy  one  of  these.
           Copying will proceed for all other sub-folders.

       Error: Unable to update folder $self.
           When a folder is to be written, both replace and inplace write policies are tried,  If both fail, the
           whole update fails.  You may see other, related, error messages to indicate the real problem.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This  module  is  part  of  Mail-Box  distribution  version  3.011,  built  on  April  18, 2025. Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer]. For other contributors see ChangeLog.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-25                               <u>Mail::Box::<a href="../man3pm/Mbox.3pm.html">Mbox</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>