<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Mbox::MessageParser - A fast and simple mbox folder reader</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-mbox-messageparser-perl">libmail-mbox-messageparser-perl_1.5111-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Mbox::MessageParser - A fast and simple mbox folder reader

</pre><h4><b>SYNOPSIS</b></h4><pre>
         #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?perl">/usr/bin/perl</a>

         use Mail::Mbox::MessageParser;

         # Compression support
         my $file_name = 'mail/saved-mail.xz';
         my $file_handle = new FileHandle($file_name);

         # Set up cache. (Not necessary if enable_cache is false.)
         Mail::Mbox::MessageParser::SETUP_CACHE(
           { 'file_name' =&gt; '/tmp/cache' } );

         my $folder_reader =
           new Mail::Mbox::MessageParser( {
             'file_name' =&gt; $file_name,
             'file_handle' =&gt; $file_handle,
             'enable_cache' =&gt; 1,
             'enable_grep' =&gt; 1,
           } );

         die $folder_reader unless ref $folder_reader;

         # Any newlines or such before the start of the first email
         my $prologue = $folder_reader-&gt;prologue;
         print $prologue;

         # This is the main loop. It's executed once for each email
         while(!$folder_reader-&gt;end_of_file())
         {
           my $email = $folder_reader-&gt;read_next_email();
           print $$email;
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module implements a fast but simple mbox folder reader. One of three implementations (Cache, Grep,
       Perl) will be used depending on the wishes of the user and the system configuration. The first
       implementation is a cached-based one which stores email information about mailboxes on the file system.
       Subsequent accesses will be faster because no analysis of the mailbox will be needed. The second
       implementation is one based on GNU grep, and is significantly faster than the Perl version for mailboxes
       which contain very large (10MB) emails. The final implementation is a fast Perl-based one which should
       always be applicable.

       The Cache implementation is about 6 times faster than the standard Perl implementation. The Grep
       implementation is about 4 times faster than the standard Perl implementation. If you have GNU grep, it's
       best to enable both the Cache and Grep implementations. If the cache information is available, you'll get
       very fast speeds. Otherwise, you'll take about a 1/3 performance hit when the Grep version is used
       instead.

       The overriding requirement for this module is speed. If you wish more sophisticated parsing, use
       Mail::MboxParser (which is based on this module) or Mail::Box.

   <b>METHODS</b> <b>AND</b> <b>FUNCTIONS</b>
       SETUP_CACHE(...)
             SETUP_CACHE( { 'file_name' =&gt; &lt;cache file name&gt; } );

             &lt;cache file name&gt; - the file name of the cache

           Call  this  function  once  to  set  up  the  cache before creating any parsers. You must provide the
           location to the cache file. There is no default value.

       new(...)
             new( { 'file_name' =&gt; &lt;mailbox file name&gt;,
               'file_handle' =&gt; &lt;mailbox file handle&gt;,
               'enable_cache' =&gt; &lt;1 or 0&gt;,
               'enable_grep' =&gt; &lt;1 or 0&gt;,
               'force_processing' =&gt; &lt;1 or 0&gt;,
               'debug' =&gt; &lt;1 or 0&gt;,
             } );

             &lt;mailbox file name&gt; - the file name of the mailbox
             &lt;mailbox file handle&gt; - the already opened file handle for the mailbox
             &lt;enable_cache&gt; - true to attempt to use the cache implementation
             &lt;enable_grep&gt; - true to attempt to use the grep implementation
             &lt;force_processing&gt; - true to force processing of files that look invalid
             &lt;debug&gt; - true to print some debugging information to STDERR

           The constructor takes either a file name or a file handle,  or  both.  If  the  file  handle  is  not
           defined,  Mail::Mbox::MessageParser  will  attempt  to  open the file using the file name. You should
           always pass the file name if you have it, so that the parser can cache the mailbox information.

           This module will automatically decompress the mailbox as necessary. If a filename  is  available  but
           the  file handle is undef, the module will call bzip, bzip2, gzip, lzip, xz to decompress the file in
           memory if the filename ends with the appropriate suffix. If the  file  handle  is  defined,  it  will
           detect the type of compression and apply the correct decompression program.

           The  Cache, Grep, or Perl implementation of the parser will be loaded, whichever is most appropriate.
           For example, the first time you use caching,  there  will  be  no  cache.  In  this  case,  the  grep
           implementation  can  be  used instead. The cache will be updated in memory as the grep implementation
           parses the mailbox, and the cache will be written after the program exits. The file name is optional,
           in which case <u>enable_cache</u> and <u>enable_grep</u> must both be false.

           <u>force_processing</u> will cause the module to process folders that look to be binary, or whose text  data
           doesn't look like a mailbox.

           Returns a reference to a Mail::Mbox::MessageParser object on success, and a scalar desribing an error
           on  failure.  ("Not  a  mailbox", "Can't open &lt;filename&gt;: &lt;system error&gt;", "Can't execute &lt;uncompress
           command&gt; for file &lt;filename&gt;"

       <b>reset()</b>
           Reset the filehandle and all internal state. Note that this will not work with filehandles which  are
           streams.  If  there  is enough demand, I may add the ability to store the previously read stream data
           internally so that <u><b>reset()</b></u> will work correctly.

       <b>endline()</b>
           Returns "\n" or "\r\n", depending on the file format.

       <b>prologue()</b>
           Returns any newlines or other content at the start of the mailbox prior to the first email.

       <b>end_of_file()</b>
           Returns true if the end of the file has been encountered.

       <b>line_number()</b>
           Returns the line number for the start of the last email read.

       <b>number()</b>
           Returns the number of the last email read. (i.e. The first email will have a number of 1.)

       <b>length()</b>
           Returns the length of the last email read.

       <b>offset()</b>
           Returns the byte offset of the last email read.

       <b>read_next_email()</b>
           Returns a reference to a scalar holding the text of the next email in the mailbox, or  undef  at  the
           end of the file.

</pre><h4><b>BUGS</b></h4><pre>
       No known bugs.

       Contact <a href="mailto:david@coppit.org">david@coppit.org</a> for bug reports and suggestions.

</pre><h4><b>AUTHOR</b></h4><pre>
       David Coppit &lt;<a href="mailto:david@coppit.org">david@coppit.org</a>&gt;.

</pre><h4><b>LICENSE</b></h4><pre>
       This  code  is distributed under the GNU General Public License (GPL) Version 2.  See the file LICENSE in
       the distribution for details.

</pre><h4><b>HISTORY</b></h4><pre>
       This code was originally part of the grepmail  distribution.  See  <a href="http://grepmail.sf.net/">http://grepmail.sf.net/</a>  for  previous
       versions of grepmail which included early versions of this code.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mail::MboxParser, Mail::Box

perl v5.36.0                                       2023-08-06                     <u>Mail::Mbox::<a href="../man3pm/MessageParser.3pm.html">MessageParser</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>