<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local outbound address - get or set the local IP address for outbound connections</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/trafficserver-dev">trafficserver-dev_9.2.5+ds-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Local outbound address - get or set the local IP address for outbound connections

</pre><h4><b>SYNOPSIS</b></h4><pre>
          #include &lt;ts/ts.h&gt;

       <b>sockaddr</b> <b>const</b> <b>*TSHttpTxnOutgoingAddrGet(</b><u>TSHttpTxn</u> <b>txnp)</b>

       <u>TSReturnCode</u> <b>TSHttpTxnOutgoingAddrSet(</b><u>TSHttpTxn</u> <b>txnp,</b> <b>sockaddr</b> <b>const</b> <b>*addr)</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These functions concern the local IP address and port, that is the address and port on the Traffic Server
       side of outbound connections (network connections <u>from</u> Traffic Server <u>to</u> another socket).

       The  address  and  optional the port can be set with <u>TSHttpTxnOutgoingAddrSet()</u>. This must be done before
       the outbound connection is made, that is, earlier than the <u>TS_HTTP_SEND_REQUEST_HDR_HOOK</u>.  A good  choice
       is  the <u>TS_HTTP_POST_REMAP_HOOK</u>, since it is a hook that is always called, and it is the latest hook that
       is called before the connection is made.  The <u>addr</u> must be populated with the IP address and port  to  be
       used.  If  the port is not relevant it can be set to zero, which means use any available local port. This
       function returns <u>TS_SUCCESS</u> on success and <u>TS_ERROR</u> on failure.

       Even on a successful call to <u>TSHttpTxnOutgoingAddrSet()</u>, the local IP address  may  not  match  what  was
       passing <u>addr</u> if <u>session</u> <u>sharing</u> is enabled.

       Conversely   <u>TSHttpTxnOutgoingAddrGet()</u>   retrieves   the  local  address  and  must  be  called  in  the
       <u>TS_HTTP_SEND_REQUEST_HDR_HOOK</u> or later, after the outbound connection has been established. It returns  a
       pointer  to  a  <b>sockaddr</b>  which  contains  the  local  IP address and port. If there is no valid outbound
       connection, <u>addr</u> will be <b>NULL</b>. The returned pointer is a transient pointer and  must  not  be  referenced
       after the callback in which <u>TSHttpTxnOutgoingAddrGet()</u> was called.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2025, <a href="mailto:dev@trafficserver.apache.org">dev@trafficserver.apache.org</a>

9.2                                               May 22, 2025                       <u>LOCAL</u> <u>OUTBOUND</u> <u><a href="../man3ts/ADDRESS.3ts.html">ADDRESS</a></u>(3ts)
</pre>
 </div>
</div></section>
</div>
</body>
</html>