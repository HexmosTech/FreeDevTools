<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Locale::Po4a::Xml - convert XML documents and derivates from/to PO files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/po4a">po4a_0.73-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Locale::Po4a::Xml - convert XML documents and derivates from/to PO files

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The po4a (PO for anything) project goal is to ease translations (and more interestingly, the maintenance
       of translations) using gettext tools on areas where they were not expected like documentation.

       Locale::Po4a::Xml is a module to help the translation of XML documents into other [human] languages. It
       can also be used as a base to build modules for XML-based documents.

</pre><h4><b>TRANSLATING</b> <b>WITH</b> <b>PO4A::XML</b></h4><pre>
       This module can be used directly to handle generic XML documents.  This will extract all tag's content,
       and no attributes, since it's where the text is written in most XML based documents.

       There are some options (described in the next section) that can customize this behavior.  If this doesn't
       fit to your document format you're encouraged to write your own module derived from this, to describe
       your format's details.  See the section <b>WRITING</b> <b>DERIVATE</b> <b>MODULES</b> below, for the process description.

</pre><h4><b>OPTIONS</b> <b>ACCEPTED</b> <b>BY</b> <b>THIS</b> <b>MODULE</b></h4><pre>
       The global debug option causes this module to show the excluded strings, in order to see if it skips
       something important.

       These are this module's particular options:

       <b>nostrip</b>
           Prevents it to strip the spaces around the extracted strings.

       <b>wrap</b>
           Canonicalizes  the string to translate, considering that whitespaces are not important, and wraps the
           translated document. This option can be overridden by custom tag options. See the  <b>translated</b>  option
           below.

       <b>unwrap_attributes</b>
           Attributes are wrapped by default. This option disables wrapping.

       <b>caseinsensitive</b>
           It  makes  the  tags and attributes searching to work in a case insensitive way.  If it's defined, it
           will treat &lt;BooK&gt;laNG and &lt;BOOK&gt;Lang as &lt;book&gt;lang.

       <b>escapequotes</b>
           Escape quotes in output strings.  Necessary, for example, for creating string resources  for  use  by
           Android build tools.

           See also: https://developer.android.com/guide/topics/resources/string-resource.html

       <b>includeexternal</b>
           When  defined,  external  entities  are  included in the generated (translated) document, and for the
           extraction of strings.  If it's not defined, you will have to translate external entities  separately
           as independent documents.

       <b>ontagerror</b>
           This  option  defines the behavior of the module when it encounters invalid XML syntax (a closing tag
           which does not match the last opening tag).  It can take the following values:

           <u>fail</u>
               This is the default value.  The module will exit with an error.

           <u>warn</u>
               The module will continue, and will issue a warning.

           <u>silent</u>
               The module will continue without any warnings.

           Be careful when using this option.  It is generally recommended to fix the input file.

       <b>tagsonly</b>
           Note: This option is deprecated.

           Extracts only the specified tags in the <b>tags</b> option.  Otherwise, it will extract all the tags  except
           the ones specified.

       <b>doctype</b>
           String  that  will  try  to  match  with the first line of the document's doctype (if defined). If it
           doesn't, a warning will indicate that the document might be of a bad type.

       <b>addlang</b>
           String indicating the path (e.g. &lt;bbb&gt;&lt;aaa&gt;) of a tag where a lang="..." attribute  shall  be  added.
           The language will be defined as the basename of the PO file without any .po extension.

       <b>optionalclosingtag</b>
           Boolean  indicating  whether closing tags are optional (as in HTML). By default, missing closing tags
           raise an error handled according to <b>ontagerror</b>.

       <b>tags</b>
           Note: This option is deprecated.  You should use the <b>translated</b> and <b>untranslated</b> options instead.

           Space-separated list of tags you want to translate or skip.  By default, the specified tags  will  be
           excluded,  but  if  you use the "tagsonly" option, the specified tags will be the only ones included.
           The tags must be in the form &lt;aaa&gt;, but you can join some (&lt;bbb&gt;&lt;aaa&gt;) to say that the content of the
           tag &lt;aaa&gt; will only be translated when it's into a &lt;bbb&gt; tag.

           You can also specify some tag options by putting some characters in front of the tag  hierarchy.  For
           example,  you  can  put  <u>w</u> (wrap) or <u>W</u> (don't wrap) to override the default behavior specified by the
           global <b>wrap</b> option.

           Example: W&lt;chapter&gt;&lt;title&gt;

       <b>attributes</b>
           Space-separated list of tag's attributes you want to translate.  You can specify  the  attributes  by
           their  name  (for  example, "lang"), but you can prefix it with a tag hierarchy, to specify that this
           attribute will only be translated when  it's  in  the  specified  tag.  For  example:  &lt;bbb&gt;&lt;aaa&gt;lang
           specifies  that  the  lang  attribute  will only be translated if it's in an &lt;aaa&gt; tag, and it's in a
           &lt;bbb&gt; tag.

       <b>foldattributes</b>
           Do not  translate  attributes  in  inline  tags.   Instead,  replace  all  attributes  of  a  tag  by
           po4a-id=&lt;id&gt;.

           This  is  useful  when  attributes  shall  not  be  translated,  as  this  simplifies the strings for
           translators, and avoids typos.

       <b>customtag</b>
           Space-separated list of tags which should not be treated as tags.  These tags are treated as  inline,
           and do not need to be closed.

       <b>break</b>
           Space-separated  list  of  tags  which  should  break  the  sequence.  By default, all tags break the
           sequence.

           The tags must be in the form &lt;aaa&gt;, but you can join some (&lt;bbb&gt;&lt;aaa&gt;), if a tag (&lt;aaa&gt;) should  only
           be considered when it's within another tag (&lt;bbb&gt;).

           Please note a tag should be listed in only one of the <b>break</b>, <b>inline</b> <b>placeholder</b>, or <b>customtag</b> setting
           string.

       <b>inline</b>
           Space-separated  list  of  tags  which  should  be treated as inline.  By default, all tags break the
           sequence.

           The tags must be in the form &lt;aaa&gt;, but you can join some (&lt;bbb&gt;&lt;aaa&gt;), if a tag (&lt;aaa&gt;) should  only
           be considered when it's within another tag (&lt;bbb&gt;).

       <b>placeholder</b>
           Space-separated  list of tags which should be treated as placeholders.  Placeholders do not break the
           sequence, but the content of placeholders is translated separately.

           The location of the placeholder in its block will be marked with a string similar to:

             &lt;placeholder type=\"footnote\" id=\"0\"/&gt;

           The tags must be in the form &lt;aaa&gt;, but you can join some (&lt;bbb&gt;&lt;aaa&gt;), if a tag (&lt;aaa&gt;) should  only
           be considered when it's within another tag (&lt;bbb&gt;).

       <b>break-pi</b>
           By  default,  Processing Instructions (i.e., "&lt;? ... ?&gt;" tags) are handled as inline tags.  Pass this
           option if you want the PI to be handled as breaking tag.  Note that unprocessed PHP tags are  handled
           as Processing Instructions by the parser.

       <b>nodefault</b>
           Space separated list of tags that the module should not try to set by default in any category.

           If  you  have  a tag which has its default setting by the subclass of this module but you want to set
           alternative setting, you need to list that tag as a part of the <b>nodefault</b> setting string.

       <b>cpp</b> Support C preprocessor directives.   When  this  option  is  set,  po4a  will  consider  preprocessor
           directives  as  paragraph separators.  This is important if the XML file must be preprocessed because
           otherwise the directives may be inserted in the middle of lines if po4a consider  it  belong  to  the
           current  paragraph,  and  they  won't  be  recognized  by  the  preprocessor.  Note: the preprocessor
           directives must only appear between tags (they must not break a tag).

       <b>translated</b>
           Space-separated list of tags you want to translate.

           The tags must be in the form &lt;aaa&gt;, but you can join some (&lt;bbb&gt;&lt;aaa&gt;), if a tag (&lt;aaa&gt;) should  only
           be considered when it's within another tag (&lt;bbb&gt;).

           You can also specify some tag options by putting some characters in front of the tag hierarchy.  This
           overrides the default behavior specified by the global <b>wrap</b> and <b>defaulttranslateoption</b> option.

           <u>w</u>   Tags should be translated and content can be re-wrapped.

           <u>W</u>   Tags should be translated and content should not be re-wrapped.

           <u>i</u>   Tags should be translated inline.

           <u>p</u>   Tags should be translated as placeholders.

           Internally, the XML parser only cares about these four options: <u>w</u> <u>W</u> <u>i</u> <u>p</u>.

           * Tags listed in <b>break</b> are set to <u>w</u> or <u>W</u> depending on the <b>wrap</b> option.

           * Tags listed in <b>inline</b> are set to <u>i</u>.

           * Tags listed in <b>placeholder</b> are set to <u>p</u>.

           * Tags listed in <b>untranslated</b> are without any of these options set.

           You can verify actual internal parameter behavior by invoking <b>po4a</b> with <b>--debug</b> option.

           Example: W&lt;chapter&gt;&lt;title&gt;

           Please note a tag should be listed in either <b>translated</b> or <b>untranslated</b> setting string.

       <b>untranslated</b>
           Space-separated list of tags you do not want to translate.

           The  tags must be in the form &lt;aaa&gt;, but you can join some (&lt;bbb&gt;&lt;aaa&gt;), if a tag (&lt;aaa&gt;) should only
           be considered when it's within another tag (&lt;bbb&gt;).

           Please note a translatable inline tag in an untranslated tag is treated as  a  translatable  breaking
           tag, <u>i</u> setting is dropped and <u>w</u> or <u>W</u> is set depending on the <b>wrap</b> option.

       <b>defaulttranslateoption</b>
           The  default  categories for tags that are not in any of the translated, untranslated, break, inline,
           or placeholder.

           This is a set of letters as defined in <b>translated</b> and this setting is  only  valid  for  translatable
           tags.

</pre><h4><b>WRITING</b> <b>DERIVATIVE</b> <b>MODULES</b></h4><pre>
   <b>DEFINE</b> <b>WHAT</b> <b>TAGS</b> <b>AND</b> <b>ATTRIBUTES</b> <b>TO</b> <b>TRANSLATE</b>
       The simplest customization is to define which tags and attributes you want the parser to translate.  This
       should  be  done  in  the  initialize  function.   First  you should call the main initialize, to get the
       command-line options, and then, append your custom definitions to the options hash.  If you want to treat
       some new options from command line, you should define them before calling the main initialize:

         $self-&gt;{options}{'new_option'}='';
         $self-&gt;SUPER::initialize(%options);
         $self-&gt;{options}{'_default_translated'}.=' &lt;p&gt; &lt;head&gt;&lt;title&gt;';
         $self-&gt;{options}{'attributes'}.=' &lt;p&gt;lang id';
         $self-&gt;{options}{'_default_inline'}.=' &lt;br&gt;';
         $self-&gt;treat_options;

       You  should  use  the   <b>_default_inline</b>,   <b>_default_break</b>,   <b>_default_placeholder</b>,   <b>_default_translated</b>,
       <b>_default_untranslated</b>,  and  <b>_default_attributes</b>  options  in  derivative  modules.  This  allow users to
       override the default behavior defined in your module with command line options.

   <b>OVERRIDE</b> <b>THE</b> <b>DEFAULT</b> <b>BEHAVIOR</b> <b>WITH</b> <b>COMMAND</b> <b>LINE</b> <b>OPTIONS</b>
       If you don't like the default behavior of this xml module and its derivative  modules,  you  can  provide
       command line options to change their behavior.

       See <b>Locale::Po4a::<a href="../man3pm/Docbook.3pm.html">Docbook</a></b>(3pm),

   <b>OVERRIDING</b> <b>THE</b> <b>found_string</b> <b>FUNCTION</b>
       Another simple step is to override the function "found_string", which receives the extracted strings from
       the  parser,  in order to translate them.  There you can control which strings you want to translate, and
       perform transformations to them before or after the translation itself.

       It receives the extracted text, the reference on where it was, and a hash that contains extra information
       to control what strings to translate, how to translate them and to generate the comment.

       The content of these options depends on the kind of string it is (specified in an entry of this hash):

       type="tag"
           The found string is the content of a translatable tag. The entry "tag_options"  contains  the  option
           characters in front of the tag hierarchy in the module "tags" option.

       type="attribute"
           Means  that  the found string is the value of a translatable attribute. The entry "attribute" has the
           name of the attribute.

       It must return the text that will replace the original in the translated document. Here's a basic example
       of this function:

         sub found_string {
           my ($self,$text,$ref,$options)=@_;
           $text = $self-&gt;translate($text,$ref,"type ".$options-&gt;{'type'},
             'wrap'=&gt;$self-&gt;{options}{'wrap'});
           return $text;
         }

       There's another simple example in the new Dia module, which only filters some strings.

   <b>MODIFYING</b> <b>TAG</b> <b>TYPES</b> <b>(TODO)</b>
       This is a more complex one, but it enables a (almost) total customization.   It's  based  on  a  list  of
       hashes,  each one defining a tag type's behavior. The list should be sorted so that the most general tags
       are after the most concrete ones (sorted first by the beginning and then by the end keys).  To  define  a
       tag type you'll have to make a hash with the following keys:

       <b>beginning</b>
           Specifies the beginning of the tag, after the "&lt;".

       <b>end</b> Specifies the end of the tag, before the "&gt;".

       <b>breaking</b>
           It  says  if  this  is a breaking tag class.  A non-breaking (inline) tag is one that can be taken as
           part of the content of another tag.  It can take the values false (0), true (1) or undefined.  If you
           leave this undefined, you'll have to define the f_breaking function that will say whether a  concrete
           tag of this class is a breaking tag or not.

       <b>f_breaking</b>
           It's a function that will tell if the next tag is a breaking one or not.  It should be defined if the
           <b>breaking</b> option is not.

       <b>f_extract</b>
           If you leave this key undefined, the generic extraction function will have to extract the tag itself.
           It's  useful for tags that can have other tags or special structures in them, so that the main parser
           doesn't get mad.  This function receives a boolean that says if the tag should be  removed  from  the
           input stream or not.

       <b>f_translate</b>
           This  function  receives  the  tag  (in the <b>get_string_until()</b> format) and returns the translated tag
           (translated attributes or all needed transformations) as a single string.

</pre><h4><b>INTERNAL</b> <b>FUNCTIONS</b> <b>used</b> <b>to</b> <b>write</b> <b>derivative</b> <b>parsers</b></h4><pre>
   <b>WORKING</b> <b>WITH</b> <b>TAGS</b>
       <b>get_path()</b>
           This function  returns  the  path  to  the  current  tag  from  the  document's  root,  in  the  form
           &lt;html&gt;&lt;body&gt;&lt;p&gt;.

           An  additional  array  of tags (without brackets) can be passed as argument.  These path elements are
           added to the end of the current path.

       <b>tag_type()</b>
           This function returns the index from the tag_types list that fits  to  the  next  tag  in  the  input
           stream, or -1 if it's at the end of the input file.

           Here, the tag has structure started by &lt; and end by &gt; and it can contain multiple lines.

           This works on the array "@{$self-&gt;{TT}{doc_in}}" holding input document data and reference indirectly
           via "$self-&gt;shiftline()" and "$self-&gt;unshiftline($$)".

       extract_tag($$)
           This  function  returns the next tag from the input stream without the beginning and end, in an array
           form, to maintain the references from the input file.  It has two parameters: the type of the tag (as
           returned by tag_type) and a boolean, that indicates if it should be removed from the input stream.

           This works on the array "@{$self-&gt;{TT}{doc_in}}" holding input document data and reference indirectly
           via "$self-&gt;shiftline()" and "$self-&gt;unshiftline($$)".

       get_tag_name(@)
           This function returns the name of the tag passed as an  argument,  in  the  array  form  returned  by
           extract_tag.

       <b>breaking_tag()</b>
           This  function  returns  a boolean that says if the next tag in the input stream is a breaking tag or
           not (inline tag).  It leaves the input stream intact.

       <b>treat_tag()</b>
           This function translates the  next  tag  from  the  input  stream.   Using  each  tag  type's  custom
           translation functions.

           This works on the array "@{$self-&gt;{TT}{doc_in}}" holding input document data and reference indirectly
           via "$self-&gt;shiftline()" and "$self-&gt;unshiftline($$)".

       tag_in_list($@)
           This function returns a string value that says if the first argument (a tag hierarchy) matches any of
           the  tags  from  the  second  argument  (a  list of tags or tag hierarchies). If it doesn't match, it
           returns 0. Else, it returns the matched tag's options (the characters in front of the tag) or  1  (if
           that tag doesn't have options).

   <b>WORKING</b> <b>WITH</b> <b>ATTRIBUTES</b>
       treat_attributes(@)
           This  function  handles  the  translation  of  the  tags' attributes. It receives the tag without the
           beginning / end marks, and then it finds the attributes, and  it  translates  the  translatable  ones
           (specified by the module option <b>attributes</b>).  This returns a plain string with the translated tag.

   <b>WORKING</b> <b>WITH</b> <b>TAGGED</b> <b>CONTENTS</b>
       <b>treat_content()</b>
           This  function  gets  the  text  until  the  next  breaking  tag  (not inline) from the input stream.
           Translate it using each tag type's custom translation functions.

           This works on the array "@{$self-&gt;{TT}{doc_in}}" holding input document data and reference indirectly
           via "$self-&gt;shiftline()" and "$self-&gt;unshiftline($$)".

   <b>WORKING</b> <b>WITH</b> <b>THE</b> <b>MODULE</b> <b>OPTIONS</b>
       <b>treat_options()</b>
           This function fills the internal structures that contain the tags, attributes and  inline  data  with
           the options of the module (specified in the command-line or in the initialize function).

   <b>GETTING</b> <b>TEXT</b> <b>FROM</b> <b>THE</b> <b>INPUT</b> <b>DOCUMENT</b>
       get_string_until($%)
           This function returns an array with the lines (and references) from the input document until it finds
           the first argument.  The second argument is an options hash. Value 0 means disabled (the default) and
           1, enabled.

           The valid options are:

           <b>include</b>
               This makes the returned array to contain the searched text

           <b>remove</b>
               This removes the returned stream from the input

           <b>unquoted</b>
               This ensures that the searched text is outside any quotes

           <b>regex</b>
               This denotes that the first argument is a regular expression rather than an plain string

       skip_spaces(\@)
           This  function  receives  as  argument  the  reference  to  a  paragraph  (in  the format returned by
           get_string_until), skips his heading spaces and returns them as a simple string.

       join_lines(@)
           This function returns a simple  string  with  the  text  from  the  argument  array  (discarding  the
           references).

</pre><h4><b>STATUS</b> <b>OF</b> <b>THIS</b> <b>MODULE</b></h4><pre>
       This module can translate tags and attributes.

</pre><h4><b>TODO</b> <b>LIST</b></h4><pre>
       DOCTYPE (ENTITIES)

       There  is a minimal support for the translation of entities. They are translated as a whole, and tags are
       not taken into account. Multilines entities are not supported and entities are  always  rewrapped  during
       the translation.

       MODIFY TAG TYPES FROM INHERITED MODULES (move the tag_types structure inside the $self hash?)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>Locale::Po4a::<a href="../man3pm/TransTractor.3pm.html">TransTractor</a></b>(3pm), <b><a href="../man7/po4a.7.html">po4a</a></b>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
        Jordi Vilalta &lt;<a href="mailto:jvprat@gmail.com">jvprat@gmail.com</a>&gt;
        Nicolas François &lt;<a href="mailto:nicolas.francois@centraliens.net">nicolas.francois@centraliens.net</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
        Copyright © 2004 Jordi Vilalta  &lt;<a href="mailto:jvprat@gmail.com">jvprat@gmail.com</a>&gt;
        Copyright © 2008-2009 Nicolas François &lt;<a href="mailto:nicolas.francois@centraliens.net">nicolas.francois@centraliens.net</a>&gt;

       This  program  is  free software; you may redistribute it and/or modify it under the terms of GPL v2.0 or
       later (see the COPYING file).

perl v5.38.2                                       2024-08-28                           <u>LOCALE::PO4A::<a href="../man1/XML.3PM.1.html">XML.3PM</a></u>(1)
</pre>
 </div>
</div></section>
</div>
</body>
</html>