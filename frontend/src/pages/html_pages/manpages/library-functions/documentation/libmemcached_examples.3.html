<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libmemcached_examples - libmemcached Documentation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmemcached-dev">libmemcached-dev_1.1.4-1.1build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libmemcached_examples - libmemcached Documentation

       Examples for libmemcached

</pre><h4><b>DESCRIPTION</b></h4><pre>
       For  full  examples,  test cases are found in tests/*.c in the main distribution.  These are always up to
       date, and are used for each test run of the library.

</pre><h4><b>CONNECTING</b> <b>TO</b> <b>SERVERS</b></h4><pre>
          const char *config_string =
            "--SERVER=host10.example.com "
            "--SERVER=host11.example.com "
            "--SERVER=host10.example.com";
          memcached_st *memc= memcached(config_string, strlen(config_string);
          {
            // ...
          }
           <a href="../manmemc/memcached_free.memc.html">memcached_free</a>(memc);

       In the above code you create a <u>memcached_st</u> object with three server by making use of <u>memcached_create()</u>.

</pre><h4><b>CREATING</b> <b>A</b> <b>POOL</b> <b>OF</b> <b>SERVERS</b></h4><pre>
          const char *config_string =
            "--SERVER=host10.example.com "
            "--SERVER=host11.example.com "
            "--SERVER=host10.example.com";

          memcached_pool_st* pool= memcached_pool(config_string, strlen(config_string));

          memcached_return_t rc;

          memcached_st *memc= memcached_pool_pop(pool, false, &amp;rc);

          // .... do work

          /*
            Release the memc_ptr that was pulled from the pool
          */
          memcached_pool_push(pool, memc);

          /*
            Destroy the pool.
          */
          memcached_pool_destroy(pool);

       In  the  above  code  you  create  a  <u>memcached_pool_st</u>  object  with  three  server  by  making  use  of
       <u>memcached_pool()</u>.

       When <u>memcached_pool_destroy()</u> all memory will be released that is associated with the pool.

</pre><h4><b>ADDING</b> <b>A</b> <b>VALUE</b> <b>TO</b> <b>THE</b> <b>SERVER</b></h4><pre>
          char *key= "foo";
          char *value= "value";
          time_t expires = 0;
          uint32_t flags = 0;

          memcached_return_t rc = memcached_set(memc,
                                               key, strlen(key),
                                               value, value_length,
                                               expires, flags);

          if (rc != MEMCACHED_SUCCESS)
          {
              // handle failure
          }

       It is best practice to always look at the return value of any operation.

</pre><h4><b>FETCHING</b> <b>MULTIPLE</b> <b>VALUES</b></h4><pre>
          memcached_return_t rc;
          char *keys[]= {"fudge", "son", "food"};
          size_t key_length[]= {5, 3, 4};
          unsigned int x;
          uint32_t flags;

          char return_key[MEMCACHED_MAX_KEY];
          size_t return_key_length;
          char *return_value;
          size_t return_value_length;

          rc= memcached_mget(memc, keys, key_length, 3);

          x= 0;
          while ((return_value= memcached_fetch(memc, return_key, &amp;return_key_length,
                                           &amp;return_value_length, &amp;flags, &amp;rc)))
          {
              free(return_value);
              x++;
          }

       Notice  that  you  freed values returned from memcached_fetch(). The define <b>MEMCACHED_MAX_KEY</b> is provided
       for usage.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
          <b><a href="../man1/memcached.1.html">memcached</a>(1)</b>

1.1                                               Mar 31, 2024                          <u><a href="../man3/LIBMEMCACHED_EXAMPLES.3.html">LIBMEMCACHED_EXAMPLES</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>