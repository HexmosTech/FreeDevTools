<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cap_copy_ext, cap_size, cap_copy_int - capability state external representation translation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcap-dev">libcap-dev_2.75-7ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cap_copy_ext, cap_size, cap_copy_int - capability state external representation translation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;sys/capability.h&gt;

       ssize_t cap_size(cap_t cap_p);
       ssize_t cap_copy_ext(void *ext_p, cap_t cap_p, ssize_t size);
       cap_t cap_copy_int(const void * ext_p);
       cap_t cap_copy_int_check(const void *cap_ext, ssize_t length);

       Link with <u>-lcap</u>.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  functions  translate  between  internal  and  external representations of a capability state.  The
       external representation is an exportable, contiguous, persistent representation of a capability state  in
       user-managed  space.   The  internal  representation  is  managed  by the capability functions in working
       storage.

       <b>cap_size</b>() returns the total length (in bytes) that the capability state in working storage identified by
       <u>cap_p</u> would require when converted by <b>cap_copy_ext</b>().  This function is used primarily to  determine  the
       amount  of  buffer  space  that  must  be  provided  to  the <b>cap_copy_ext</b>() function in order to hold the
       capability data record created from <u>cap_p</u>.

       <b>cap_copy_ext</b>() copies a capability state in working storage, identified  by  <u>cap_p</u>,  from  system-managed
       space  to  user-managed  space (pointed to by <u>ext_p</u>) and returns the length of the resulting data record.
       The size  parameter  represents  the  maximum  size,  in  bytes,  of  the  resulting  data  record.   The
       <b>cap_copy_ext</b>()  function  will  do  any  conversions  necessary  to convert the capability state from the
       undefined internal format to an exportable, contiguous, persistent data record.  It is the responsibility
       of the user to allocate a buffer large enough to hold the copied data.  The  buffer  length  required  to
       hold the copied data may be obtained by a call to the <b>cap_size</b>() function.

       <b>cap_copy_int</b>()  copies  a  capability  state from a capability data record in user-managed space to a new
       capability state in working storage, allocating any memory necessary, and  returning  a  pointer  to  the
       newly  created  capability  state.   The  function  initializes  the capability state and then copies the
       capability state from the record pointed to by <u>ext_p</u> into the capability state, converting, if necessary,
       the data from a contiguous, persistent format to an opaque, internal format.  Once copied  into  internal
       format,  the object can be manipulated by the capability state manipulation functions (see <b><a href="../man3/cap_clear.3.html">cap_clear</a></b>(3)).
       Note that the record pointed to by <u>ext_p</u> must have been obtained from  a  previous,  successful  call  to
       <b>cap_copy_ext</b>()  for  this  function  to work successfully.  The caller should free any releasable memory,
       when the capability state in working storage is no longer required, by calling <b>cap_free</b>() with the  <u>cap_t</u>
       as an argument.

       <b>cap_copy_int_check</b>()  performs  the  same  operation  as  <b>cap_copy_int</b>() but additionally checks that the
       provided external data's size is not larger than the noted length.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>cap_size</b>() returns the length required to hold a capability data record on success, and -1 on failure.

       <b>cap_copy_ext</b>() returns the number of bytes placed in the user  managed  space  pointed  to  by  <u>ext_p</u>  on
       success, and -1 on failure.

       <b>cap_copy_int</b>() and <b>cap_copy_int_check</b>() return a pointer to the newly created capability state in working
       storage on success, and NULL on failure.

       On failure, <b>errno</b> is set to <b>EINVAL</b>, <b>ENOMEM</b>, or <b>ERANGE</b>.

</pre><h4><b>CONFORMING</b> <b>TO</b></h4><pre>
       These functions are specified in the withdrawn POSIX.1e draft specification.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libcap.3.html">libcap</a></b>(3), <b><a href="../man3/cap_clear.3.html">cap_clear</a></b>(3), <b><a href="../man3/cap_from_text.3.html">cap_from_text</a></b>(3), <b><a href="../man3/cap_get_file.3.html">cap_get_file</a></b>(3), <b><a href="../man3/cap_get_proc.3.html">cap_get_proc</a></b>(3), <b><a href="../man3/cap_init.3.html">cap_init</a></b>(3), <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7)

                                                   2021-03-06                                    <u><a href="../man3/CAP_COPY_EXT.3.html">CAP_COPY_EXT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>