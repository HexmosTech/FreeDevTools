<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rex::Task - The Task Object</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/rex">rex_1.16.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Rex::Task - The Task Object

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The Task Object. Typically you only need this class if you want to manipulate tasks after their initial
       creation.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Rex::Task;

        # create a new task
        my $task = Rex::Task-&gt;new( name =&gt; 'testtask' );
        $task-&gt;set_server('remoteserver');
        $task-&gt;set_code( sub { say 'Hello'; } );
        $task-&gt;modify( 'no_ssh', 1 );

        # retrieve an existing task
        use Rex::TaskList;

        my $existing_task = Rex::TaskList-&gt;create-&gt;get_task('my_task');

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
       This is the constructor.

        $task = Rex::Task-&gt;new(
          func =&gt; sub { some_code_here },
          server =&gt; [ @server ],
          desc =&gt; $description,
          no_ssh =&gt; $no_ssh,
          hidden =&gt; $hidden,
          auth =&gt; {
            user      =&gt; $user,
            password   =&gt; $password,
            private_key =&gt; $private_key,
            public_key  =&gt; $public_key,
          },
          before =&gt; [sub {}, sub {}, ...],
          after  =&gt; [sub {}, sub {}, ...],
          around =&gt; [sub {}, sub {}, ...],
          before_task_start =&gt; [sub {}, sub {}, ...],
          after_task_finished =&gt; [sub {}, sub {}, ...],
          name =&gt; $task_name,
          executor =&gt; Rex::Interface::Executor-&gt;create,
          opts =&gt; {key1 =&gt; val1, key2 =&gt; val2, ...},
          args =&gt; [arg1, arg2, ...],
        );

   <b>connection</b>
       Returns the current connection object.

   <b>executor</b>
       Returns the current executor object.

   <b>hidden</b>
       Returns true if the task is hidden. (Should not be displayed on ,,rex -T''.)

   <b>server</b>
       Returns the servers on which the task should be executed as an ArrayRef.

   <b>set_server(@server)</b>
       With this method you can set new servers on which the task should be executed on.

   <b>delete_server</b>
       Delete every server registered to the task.

   <b>current_server</b>
       Returns the current server on which the tasks gets executed right now.

   <b>desc</b>
       Returns the description of a task.

   <b>set_desc($description)</b>
       Set the description of a task.

   <b>is_remote</b>
       Returns true (1) if the task will be executed remotely.

   <b>is_local</b>
       Returns true (1) if the task gets executed on the local host.

   <b>is_http</b>
       Returns true (1) if the task gets executed over http protocol.

   <b>is_https</b>
       Returns true (1) if the task gets executed over https protocol.

   <b>is_openssh</b>
       Returns true (1) if the task gets executed with openssh.

   <b>want_connect</b>
       Returns true (1) if the task will establish a connection to a remote system.

   <b>get_connection_type</b>
       This method tries to guess the right connection type for the task and returns it.

       Current return values are below:

       •   SSH: connect to the remote server using Net::SSH2

       •   OpenSSH: connect to the remote server using Net::OpenSSH

       •   Local: runs locally (without any connections)

       •   HTTP: uses experimental HTTP connection

       •   HTTPS: uses experimental HTTPS connection

       •   Fake: populate the connection properties, but do not connect

           So  you  can  use  this  type  to  iterate  over  a  list  of remote hosts, but don't let rex build a
           connection. For example if you want to use Sys::Virt or other modules.

   <b>modify($key,</b> <b>$value)</b>
       With this method you can modify values of the task.

   <b>rethink_connection</b>
       Deletes current connection object.

   <b>user</b>
       Returns the username the task will use.

   <b>set_user($user)</b>
       Set the username of a task.

   <b>password</b>
       Returns the password that will be used.

   <b>set_password($password)</b>
       Set the password of the task.

   <b>name</b>
       Returns the name of the task.

   <b>code</b>
       Returns the code of the task.

   <b>set_code(\&amp;code_ref)</b>
       Set the code of the task.

   <b>run_hook($server,</b> <b>$hook)</b>
       This method is used internally to execute the specified hooks.

   <b>set_auth($key,</b> <b>$value)</b>
       Set the authentication of the task.

        $task-&gt;set_auth("user", "foo");
        $task-&gt;set_auth("password", "bar");

   <b>merge_auth($server)</b>
       Merges the authentication information from $server into the task.  Tasks authentication information  have
       precedence.

   <b>get_sudo_password</b>
       Returns the sudo password.

   <b>parallelism</b>
       Get the parallelism count of a task.

   <b>set_parallelism($count)</b>
       Set the parallelism of the task.

   <b>connect($server)</b>
       Initiate the connection to $server.

   <b>disconnect</b>
       Disconnect from the current connection.

   <b>get_data</b>
       Dump task data.

   <b>run($server,</b> <b>%options)</b>
       Run the task on $server, with %options.

   <b>modify_task($task,</b> <b>$key</b> <b>=&gt;</b> <b>$value)</b>
       Modify $task, by setting $key to $value.

   <b>is_task</b>
       Returns <b><a href="../man1/true.1.html">true</a></b>(1) if the passed object is a task.

   <b>get_tasks</b>
       Returns list of tasks.

   <b>get_desc</b>
       Returns description of task.

   <b>exit_on_connect_fail</b>
       Returns true if rex should exit on connect failure.

   <b>set_exit_on_connect_fail</b>
       Sets if rex should exit on connect failure.

   <b>get_args</b>
       Returns arguments of task.

   <b>get_opts</b>
       Returns options of task.

   <b>set_args</b>
       Sets arguments for task.

   <b>set_opt</b>
       Sets an option for task.

   <b>set_opts</b>
       Sets options for task.

   <b>clone</b>
       Clones a task.

perl v5.40.0                                       2025-02-06                                     <u>Rex::<a href="../man3pm/Task.3pm.html">Task</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>