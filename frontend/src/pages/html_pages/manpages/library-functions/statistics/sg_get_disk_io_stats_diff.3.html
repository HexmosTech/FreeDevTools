<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_get_disk_io_stats,                  sg_get_disk_io_stats_r,                 sg_get_disk_io_stats_diff,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libstatgrab-dev">libstatgrab-dev_0.92.1-1.2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_get_disk_io_stats,                  sg_get_disk_io_stats_r,                 sg_get_disk_io_stats_diff,
       sg_get_disk_io_stats_diff_between,            sg_free_disk_io_stats,             sg_disk_io_compare_name,
       sg_disk_io_compare_traffic - get disk io statistics

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;statgrab.h&gt;

       sg_disk_io_stats *<b>sg_get_disk_io_stats</b> (size_t *<u>entries</u>);

       sg_disk_io_stats *<b>sg_get_disk_io_stats_r</b> (size_t *<u>entries</u>);

       sg_disk_io_stats *<b>sg_get_disk_io_stats_diff</b> (size_t *<u>entries</u>);

       sg_disk_io_stats *<b>sg_get_disk_io_stats_diff_between</b> (const sg_disk_io_stats *<u>cur</u>, const sg_disk_io_stats
                                                           *<u>last</u>, size_t *<u>entries</u>);

       sg_error <b>sg_free_disk_io_stats</b> (sg_disk_io_stats *<u>data</u>);

       int <b>sg_disk_io_compare_name</b> (const void *<u>va</u>, const void *<u>vb</u>);

       int <b>sg_disk_io_compare_traffic</b> (const void *<u>va</u>, const void *<u>vb</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>sg_get_disk_io_stats</b>  functions  provide disk I/O statistics on a per disk basis. All get- and diff-
       functions take an optional entries parameter, which points (when given) to a size_t to take the number of
       returned vector entries.

       The <b>sg_get_disk_io_stats</b>() and <b>sg_get_disk_io_stats_r</b>() functions deliver the  I/O-statistics  since  the
       disk  has been attached to the system.  The <b>sg_get_disk_io_stats_diff</b>() and <b>sg_get_disk_io_stats_diff_be‐</b>
       <b>tween</b>() deliver the difference between two calls of <b>sg_get_disk_io_stats</b>()  or  <b>sg_get_disk_io_stats_r</b>(),
       respectively.

       <b>API</b> <b>Shortcut</b>
       ┌───────────────────────────────┬────────────────────┬────────────────────────────┐
       │ function                      │ returns            │ data owner                 │
       ├───────────────────────────────┼────────────────────┼────────────────────────────┤
       │ sg_get_disk_io_stats          │ sg_disk_io_stats * │ libstatgrab (thread local) │
       ├───────────────────────────────┼────────────────────┼────────────────────────────┤
       │ sg_get_disk_io_stats_r        │ sg_disk_io_stats * │ caller                     │
       ├───────────────────────────────┼────────────────────┼────────────────────────────┤
       │ sg_get_disk_io_stats_diff     │ sg_disk_io_stats * │ libstatgrab (thread local) │
       ├───────────────────────────────┼────────────────────┼────────────────────────────┤
       │ sg_get_disk_io_stats_diff_be‐ │ sg_disk_io_stats * │ caller                     │
       │ tween                         │                    │                            │
       └───────────────────────────────┴────────────────────┴────────────────────────────┘

       sg_disk_io_stats vectors got from <b>sg_get_disk_io_stats_r</b>() or <b>sg_get_disk_io_stats_diff_between</b>() must be
       freed using <b>sg_free_disk_io_stats</b>() when not needed any more. The caller is responsible for doing it.

       Additionally   two   support   functions   for  <b><a href="../man3/qsort.3.html">qsort</a></b>(3)  are  available:  <b>sg_disk_io_compare_name</b>()  and
       <b>sg_disk_io_compare_traffic</b>().

       <b>Example</b>

       size_t entries;
       sg_disk_io_stats *io_stats = NULL;
       while( NULL != ( io_stats = sg_get_disk_io_stats_diff(&amp;entries) ) ) {
           /* show disks with most traffic first */
           qsort( io_stats, entries, sizeof(io_stats[0]), &amp;sg_disk_io_compare_traffic );
           show_disk_io_stats( io_stats );
       }

       On some platforms, such as Solaris 7, the kernel value is stored in a 32bit int, so wraps around when  it
       reaches  4GB.  Other  platforms,  such  as Solaris 8 (and most other modern systems), hold the value in a
       64bit int, which wraps somewhere near 17 million terabytes.  The <b>sg_get_disk_io_stats_diff</b>() function and
       the <b>sg_get_disk_io_stats_diff_between</b>() function care about these overflows and try to  detect  overflows
       when the diff is calculated.

       On  Solaris  libstatgrab  will attempt to get the cXtXdXsX representation for the disk_name string. If it
       fails it will use a name like sd0. On some systems programs calling libstatgrab will need elevated privi‐
       leges to lookup some of the names. The mappings are built up when <b>sg_init</b>() is called for the first time.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       All diskio statistics return a pointer to a structure of type sg_disk_io_stats.

       typedef struct {
               char *disk_name;
               unsigned long long read_bytes;
               unsigned long long write_bytes;
               time_t systime;
       } sg_disk_io_stats;

       disk_name
              The name known to the operating system.  (eg. on linux it might be hda)

       read_bytes
              The number of bytes the disk has read.

       write_bytes
              The number of bytes the disk has written.

       systime
              The time period over which read_bytes and write_bytes were transferred.

</pre><h4><b>BUGS</b></h4><pre>
       <b>sg_get_disk_io_stats_diff</b> and <b>sg_get_disk_io_stats_diff_between</b> compare two lists of disk (block  device)
       related  I/O  statistics. Each entry occurring only in the second list is passed through to the resulting
       list as if it would have been compared to an entry with all statistic values set to 0. This  implies,  on
       the very first call <b>sg_get_disk_io_stats_diff</b> will return the same as <b>sg_get_disk_io_stats</b>.

       On operating systems that hold only 32bits of data there is a problem if the values wrap twice. For exam‐
       ple,   on   Solaris   7   if   9GB   is   transferred   and  the  operating  system  wraps  at  4GB,  the
       <b>sg_get_disk_io_stats_diff</b>() function will return 5GB.

       The compare functions exists rather for backward compatibility than for functionality enhancements.  Lim‐
       ited  flexibility (e.g. reverse order) and lack of optimising opportunities for the compiler leads to the
       recommendation to implement the required compare routines locally.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/statgrab.3.html">statgrab</a></b>(3)

</pre><h4><b>WEBSITE</b></h4><pre>
       ⟨https://libstatgrab.org/⟩

libstatgrab                                        2019-03-08                            <u><a href="../man3/sg_get_disk_io_stats.3.html">sg_get_disk_io_stats</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>