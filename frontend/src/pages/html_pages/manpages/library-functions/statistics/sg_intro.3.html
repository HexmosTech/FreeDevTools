<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_intro - get system statistics</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libstatgrab-dev">libstatgrab-dev_0.92.1-1.2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_intro - get system statistics

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;statgrab.h&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  statgrab library provides a cross-platform interface to getting system statistics. Each of the func‐
       tion calls to grab some statistics returns an array of structures. Functions which return always a  fixed
       number of array entries (typical one) won't take an additional parameter to store the number of array en‐
       tries,  others will. Anyway, if the information isn't available anymore, you can call <b>sg_get_nelements</b>().
       See the manual page for each individual function for more details on usage.

       For each statistic type there are two functions  available  to  fetch  the  data:  <b>sg_get_STATTYPE</b>  (e.g.
       <b>sg_get_cpu_stats</b>)  and  <b>sg_get_STATTYPE_r</b>  (e.g.  <b>sg_get_cpu_stats_r</b>). The difference between both inter‐
       faces is the ownership of the returned statistic structures: while the (well known) <b>sg_get_cpu_stats</b>  re‐
       turns  a  pointer  to a memory area owned and controlled by the statgrab library, <b>sg_get_cpu_stats_r</b> will
       return a pointer to a memory area owned and controlled by the caller.  Storage owned by the statgrab  li‐
       brary  will  be reused in follow-up calls to the same statistic grabbing function within the same thread.
       The memory is freed when the thread ends. This could result in dangling pointers when you exchange  those
       pointers  between threads. Storage which is owned by the caller must be freed by the caller when it's not
       used any more.

       <b>sg_init</b>() must be the first function you call before you start to use libstatgrab; it  performs  all  the
       one-time  initialisation  operations that need setuid/setgid privileges. For instance, on *BSD it opens a
       descriptor to be able to read kernel structures later on, and on Solaris it  reads  the  device  mappings
       that in some cases are only accessible by root (machines with a /dev/osa).  To handle this, each statgrab
       module  has  a  private  initialisation routine called by <b>sg_init</b>().  <b>sg_init</b>() takes an argument to tell
       whether initialisation errors of components shall abort the library initialisation process  or  not.  Re‐
       gardless  of  this  value, the failing module initialisations will usually lead into (partially) unusable
       statistics. Once <b>sg_init</b>() has run, most of the other libstatgrab functions no longer need elevated priv‐
       ileges (some Unices require higher privileges to access command line argument of processes owned by other
       users, Linux doesn't deliver some network card information to unprivileged users, etc.). It is  therefore
       a  good idea to call <b>sg_drop_privileges</b>(), which discards setuid and setgid privileges, immediately after
       you call <b>sg_init</b>(), unless your application has a reason for needing setuid or setgid privileges.

       <b>sg_shutdown</b>() should be the very last statgrab library function you call. You shouldn't invoke this func‐
       tion when any thread is still existing which had made calls to the statgrab library. If you don't  invoke
       <b>sg_shutdown</b>(), it's done automatically <b>at_exit</b>().

       Both,  <b>sg_init</b>()  and  <b>sg_shutdown</b>()  use  a  counter to prevent to early destruction of libstatgrab in a
       process where more than one component uses libstatgrab. This counter is guarded  by  a  mutual  exclusion
       semaphore when thread capabilities are built in.

       <b>sg_init</b>(), <b>sg_shutdown</b>() and <b>sg_drop_privileges</b>() return SG_ERROR_NONE on success, and any other on fail‐
       ure.

       For  proper  thread  support, <b>sg_lock_mutex</b>() and <b>sg_unlock_mutex</b>() are available to allow locking system
       functions which aren't thread safe. While it's generally not the wisest idea to mix calls to the statgrab
       library and similar calls to the system library, it  is  possible  to  protect  known  unsafe  functions.
       There's  currently  one  system API known to be not thread-safe: accessing utmp. The other non-threadsafe
       functionality used by the statgrab library is the global component management during initialisation (e.g.
       counting the number of calls to <b>sg_init</b>() to prevent first call to <b>sg_shutdown</b>() leaves the library in an
       unusable status).

       <b>Mutex</b> <b>name</b>: statgrab
       <b>Protects</b>: statgrab library globals

       <b>Mutex</b> <b>name</b>: utmp
       <b>Protects</b>: accessing login records

       There's currently no way to get a list of used mutex names, so beg that any author which adds more  sema‐
       phores to guard implementations is fair enough to add them here.

       It is the intended practice that whenever a libstatgrab function is called and subsequently fails that an
       appropriate  error will be set.  Please use <b>sg_get_error</b>() and associates to get informed about the indi‐
       vidual circumstances of the error condition.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libstatgrab.3.html">libstatgrab</a></b>(3)   <b><a href="../man3/sg_get_cpu_stats.3.html">sg_get_cpu_stats</a></b>(3)   <b><a href="../man3/sg_get_disk_io_stats.3.html">sg_get_disk_io_stats</a></b>(3)   <b><a href="../man3/sg_get_fs_stats.3.html">sg_get_fs_stats</a></b>(3)   <b><a href="../man3/sg_get_host_info.3.html">sg_get_host_info</a></b>(3)
       <b><a href="../man3/sg_get_load_stats.3.html">sg_get_load_stats</a></b>(3)    <b><a href="../man3/sg_get_mem_stats.3.html">sg_get_mem_stats</a></b>(3)    <b><a href="../man3/sg_get_network_io_stats.3.html">sg_get_network_io_stats</a></b>(3)   <b><a href="../man3/sg_get_network_iface_stats.3.html">sg_get_network_iface_stats</a></b>(3)
       <b><a href="../man3/sg_get_page_stats.3.html">sg_get_page_stats</a></b>(3) <b><a href="../man3/sg_get_process_stats.3.html">sg_get_process_stats</a></b>(3)  <b><a href="../man3/sg_get_swap_stats.3.html">sg_get_swap_stats</a></b>(3)  <b><a href="../man3/sg_get_user_stats.3.html">sg_get_user_stats</a></b>(3)  <b><a href="../man3/sg_get_error.3.html">sg_get_error</a></b>(3)
       <b><a href="../man3/sg_internal-intro.3.html">sg_internal-intro</a></b>(3)

</pre><h4><b>WEBSITE</b></h4><pre>
       ⟨https://libstatgrab.org/⟩

libstatgrab                                        2019-03-08                                        <u><a href="../man3/sg_intro.3.html">sg_intro</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>