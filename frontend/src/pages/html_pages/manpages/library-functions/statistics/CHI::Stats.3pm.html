<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHI::Stats - Record and report per-namespace cache statistics</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libchi-perl">libchi-perl_0.61-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CHI::Stats - Record and report per-namespace cache statistics

</pre><h4><b>VERSION</b></h4><pre>
       version 0.61

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # Turn on statistics collection
           CHI-&gt;stats-&gt;enable();

           # Perform cache operations

           # Flush statistics to logs
           CHI-&gt;stats-&gt;flush();

           ...

           # Parse logged statistics
           my $results = CHI-&gt;stats-&gt;parse_stats_logs($file1, ...);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       CHI can record statistics, such as number of hits, misses and sets, on a per-namespace basis and log the
       results to your Log::Any logger.  You can then parse the logs to get a combined summary.

       A single CHI::Stats object is maintained for each CHI root class, and tallies statistics over any number
       of CHI::Driver objects.

       Statistics are reported when you call the "flush" method. You can choose to do this once at process end,
       or on a periodic basis.

</pre><h4><b>METHODS</b></h4><pre>
       enable, disable, enabled
           Enable, disable, and query the current enabled status.

           When  stats  are  enabled, each new cache object will collect statistics. Enabling and disabling does
           not affect existing cache objects. e.g.

               my $cache1 = CHI-&gt;new(...);
               CHI-&gt;stats-&gt;enable();
               # $cache1 will not collect statistics
               my $cache2 = CHI-&gt;new(...);
               CHI-&gt;stats-&gt;disable();
               # $cache2 will continue to collect statistics

       flush
           Log all statistics to Log::Any (at Info level in the CHI::Stats category), then clear statistics from
           memory. There is one log message for each distinct triplet of root class, cache label, and namespace.
           Each log message contains the string "CHI stats:" followed by a JSON encoded hash of statistics. e.g.

               CHI stats: {"absent_misses":1,"label":"File","end_time":1338410398,
                  "get_time_ms":5,"namespace":"Foo","root_class":"CHI",
                  "set_key_size":6,"set_time_ms":23,"set_value_size":20,"sets":1,
                  "start_time":1338409391}

       parse_stats_logs
           Accepts one or more stats log files as parameters. Parses the logs and returns  a  listref  of  stats
           hashes by root class, cache label, and namespace. e.g.

               [
                   {
                       root_class     =&gt; 'CHI',
                       label          =&gt; 'File',
                       namespace      =&gt; 'Foo',
                       absent_misses  =&gt; 100,
                       avg_compute_time_ms =&gt; 23,
                       ...
                   },
                   {
                       root_class     =&gt; 'CHI',
                       label          =&gt; 'File',
                       namespace      =&gt; 'Bar',
                       ...
                   },
               ]

           Lines  with the same root class, cache label, and namespace are summed together.  Non-stats lines are
           ignored. The parser will ignore anything  on  the  line  before  the  "CHI  stats:"  string,  e.g.  a
           timestamp.

           Each parameter to this method may be a filename or a reference to an open filehandle.

</pre><h4><b>STATISTICS</b></h4><pre>
       The following statistics are tracked in the logs:

       •   "absent_misses" - Number of gets that failed due to item not being in the cache

       •   "compute_time_ms"  - Total time spent computing missed results in compute, in ms (divide by number of
           computes to get average).  i.e. the amount of time spent in the code reference passed  as  the  third
           argument to <b>compute()</b>.

       •   "computes" - Number of compute calls

       •   "expired_misses" - Number of gets that failed due to item expiring

       •   "get_errors" - Number of caught runtime errors during gets

       •   "get_time_ms" - Total time spent in get operation, in ms (divide by number of gets to get average)

       •   "hits" - Number of gets that succeeded

       •   "set_key_size" - Number of bytes in set keys (divide by number of sets to get average)

       •   "set_value_size" - Number of bytes in set values (divide by number of sets to get average)

       •   "set_time_ms" - Total time spent in set operation, in ms (divide by number of sets to get average)

       •   "sets" - Number of sets

       •   "set_errors" - Number of caught runtime errors during sets

       The following additional derived/aggregate statistics are computed by parse_stats_logs:

       •   "misses" - "absent_misses" + "expired_misses"

       •   "gets" - "hits" + "misses"

       •   "avg_compute_time_ms" - "compute_time_ms" / "computes"

       •   "avg_get_time_ms" - "get_time_ms" / "gets"

       •   "avg_set_time_ms" - "set_time_ms" / "sets"

       •   "avg_set_key_size" - "set_key_size" / "sets"

       •   "avg_set_value_size" - "set_value_size" / "sets"

       •   "hit_rate" - "hits" / "gets"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       CHI

</pre><h4><b>AUTHOR</b></h4><pre>
       Jonathan Swartz &lt;<a href="mailto:swartz@pobox.com">swartz@pobox.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2021 by Jonathan Swartz.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.32.1                                       2021-10-15                                    <u>CHI::<a href="../man3pm/Stats.3pm.html">Stats</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>