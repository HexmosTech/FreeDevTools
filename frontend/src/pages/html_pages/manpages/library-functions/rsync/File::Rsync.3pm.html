<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File::Rsync - perl module interface to rsync(1) http://rsync.samba.org/rsync/</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libfile-rsync-perl">libfile-rsync-perl_0.49-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       File::Rsync - perl module interface to <a href="../man1/rsync.1.html">rsync</a>(1) <a href="http://rsync.samba.org/rsync/">http://rsync.samba.org/rsync/</a>

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use File::Rsync;

           $obj = File::Rsync-&gt;new(
               archive      =&gt; 1,
               compress     =&gt; 1,
               rsh          =&gt; '/usr/local/bin/ssh',
               'rsync-path' =&gt; '/usr/local/bin/rsync'
           );

           $obj-&gt;exec( src =&gt; 'localdir', dest =&gt; 'rhost:remotedir' )
               or warn "rsync failed\n";

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Perl Convenience wrapper for the <b><a href="../man1/rsync.1.html">rsync</a></b>(1) program.  Written for <u>rsync-2.3.2</u> and updated for <u>rsync-3.1.1</u>
       but should perform properly with most recent versions.

   <b>File::Rsync::new</b>
           $obj = new File::Rsync;

               or

           $obj = File::Rsync-&gt;new;

               or

           $obj = File::Rsync-&gt;new(@options);

       Create a <u>File::Rsync</u> object.  Any options passed at creation are stored in the object as defaults for all
       future <u>exec</u> calls on that object.  Options may be passed in the style of a hash (key/value pairs) and are
       the same as the long options in <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> without the leading double-hyphen.  Any leading single or
       double-hyphens are removed, and you may use underscore in place of hyphens in option names to simplify
       quoting and avoid possible equation parsing (subtraction).

       Although options are key/value pairs, as of version 0.46 the order is now preserved.  Passing a hash
       reference is still supported for backwards compatibility, but is deprecated as order cannot be preserved
       for this case.

       An additional option of <b>path-to-rsync</b> also exists which can be used to override the using PATH environemt
       variable to find the rsync command binary, and <b>moddebug</b> which causes the module methods to print some
       debugging information to STDERR.

       There are also 2 options to wrap the source and/or destination paths in double-quotes: these are <b>quote-</b>
       <b>src</b> and <b>quote-dst</b>, which may be useful in protecting the paths from shell expansion (particularly useful
       for paths containing spaces).  This wraps all source and/or destination paths in double-quotes to limit
       remote shell expansion.  It is similar but not necessarily the same result as the <b>protect-args</b> option in
       rsync itself.

       The <b>outfun</b> and <b>errfun</b> options take a function reference, called once for each line of output from the
       <u>rsync</u> program with the output line passed in as the first argument, the second arg is either 'out' or
       'err' depending on the source.  This makes it possible to use the same function for both and still
       determine where the output came from.

       If options are passed as a hash reference (deprecated), the <b>exclude</b> needs an array reference as it's
       value since there cannot be duplicate keys in a hash.  Since order cannot be preserved in a hash, this
       module currently limits the use of <b>exclude</b> or <b>include</b> together.  They can be mixed together if options
       are in the form of a list or array ref.

       Use the '+ ' or '- ' prefix trick to put includes in an <b>exclude</b> array, or to put excludes in an <b>include</b>
       array (see <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> for details).

       Include/exclude options form an ordered list.  The order must be retained for proper execution.  There
       are also <b>source</b> and <b>dest</b> keys.  The key <b>src</b> is also accepted as an equivalent to <b>source</b>, and <b>dst</b> or
       <b>destination</b> may be used as equivalents to <b>dest</b>.  The <b>source</b> option may take a scalar or an array
       reference.  If the source is the local system then multiple <b>source</b> paths are allowed.  In this case an
       array reference should be used.  There is also a method for passing multiple source paths to a remote
       system.  This method may be triggered in this module by passing the remote hostname to the <b>srchost</b> key
       and passing an array reference to the <b>source</b> key.  If the source host is being accessed via an Rsync
       server, the remote hostname should have a single trailing colon on the name.  When rsync is called, the
       <b>srchost</b> value and the values in the <b>source</b> array will be joined with a colon resulting in the double-
       colon required for server access.  The <b>dest</b> key only takes a scalar since <u>rsync</u> only accepts a single
       destination path.

       Version 2.6.0 of <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> provides a new <b>files-from</b> option along with a few other supporting options
       (<b>from0</b>, <b>no-relative</b>, and <b>no-implied-dirs</b>).  To support this wonderful new option at the level it
       deserves, this module now has an additional parameter.  As of version 0.46 the value of <b>files-from</b> may be
       an array reference.  The contents of the array are passed to <b>files-from</b> the same as the below method
       using <b>infun</b> but implemented inside the module.

       If <b>files-from</b> is set to '-' (meaning read from stdin) you can define <b>infun</b> to be a reference to a
       function that prints your file list to the default file handle.  The output from the function is attached
       to stdin of the rsync call during exec.  If <b>infun</b> is defined it will be called regardless of the value of
       <b>files-from</b>, so it can provide any data expected on stdin, but keep in mind that stdin will not be
       attached to a tty so it is not very useful for sending passwords (see the <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> and <u><b><a href="../man1/ssh.1.html">ssh</a></b>(1)</u> man pages
       for ways to handle authentication).  The <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> man page has a more complete description of <b>files-from</b>.
       Also see File::Find for ideas to use with <b>files-from</b> and <b>infun</b>.

       The <b>infun</b> option may also be used with the <b>include-from</b> or <b>exclude-from</b> options, but this is generally
       more clumsy than using the <b>include</b> or <b>exclude</b> arrays.

       Version 2.6.3 of <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> provides new options <b>partial-dir</b>, <b>checksum-seed</b>, <b>keep-dirlinks</b>, <b>inplace</b>, <b>ipv4</b>,
       and <b>ipv6</b>.  Version 2.6.4 of <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> provides new options <b>del</b>, <b>delete-before</b> <b>delete-during</b>, <b>delay-</b>
       <b>updates</b>, <b>dirs</b>, <b>filter</b>, <b>fuzzy</b>, <b>itemize-changes</b>, <b>list-only</b>, <b>omit-dir-times</b>, <b>remove-sent-files</b>, <b>max-size</b>,
       and <b>protocol</b>.

       Version 0.38 of this module also added support for the <b>acls</b> option that is not part of <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> unless
       the patch has been applied, but people do use it.  It also includes a new <b>literal</b> option that takes an
       array reference similar to <b>include</b>, <b>exclude</b>, and <b>filter</b>.  Any arguments in the array are passed as
       literal arguments to rsync, and are passed first.  They should have the proper single or double hyphen
       prefixes and the elements should be split up the way you want them passed to exec.  The purpose of this
       option is to allow the use of arbitrary options added by patches, and/or to allow the use of new options
       in rsync without needing an immediate update to the module in addtition to <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> itself.

   <b>File::Rsync::defopts</b>
           $obj-&gt;defopts(@options);

               or

           $obj-&gt;defopts(\@options);

       Set default options for future exec calls for the object.  See <u><b><a href="../man1/rsync.1.html">rsync</a></b>(1)</u> for a complete list of valid
       options.  This is really the internal method that <u>new</u> calls but you can use it too.  The <b>verbose</b> and
       <b>quiet</b> options to rsync are actually counters.  When assigning the perl hash-style options you may specify
       the counter value directly and the module will pass the proper number of options to rsync.

   <b>File::Rsync::getcmd</b>
           my $cmd = $obj-&gt;getcmd(@options);

               or

           my $cmd = $obj-&gt;getcmd(\@options);

               or

           my ($cmd, $infun, $outfun, $errfun, $debug) = $obj-&gt;getcmd(\@options);

       <u>getcmd</u> returns a reference to an array containing the real rsync command that would be called if the exec
       function were called.  The last example above includes a reference to the optional stdin function, stdout
       function, stderr function, and the debug setting.  This is the form used by the <u>exec</u> method to get the
       extra parameters it needs to do its job.  The function is exposed to allow a user-defined exec function
       to be used, or for debugging purposes.

   <b>File::Rsync::exec</b>
           $obj-&gt;exec(@options) or warn "rsync failed\n";

               or

           $obj-&gt;exec(\@options) or warn "rsync failed\n";

       This is the method that does the real work.  Any options passed to this routine are appended to any pre-
       set options and are not saved.  They effect the current execution of <u>rsync</u> only.  In the case of
       conflicts, the options passed directly to <u>exec</u> take precedence.  It returns <b>1</b> if the return status was
       zero (or true), if the <u>rsync</u> return status was non-zero it returns <b>0</b> and stores the return status.  You
       can examine the return status from <u>rsync</u> and any output to stdout and stderr with the methods listed
       below.

   <b>File::Rsync::list</b>
           $out = $obj-&gt;list(@options);

               or

           $out = $obj-&gt;list(\@options);

               or

           @out = $obj-&gt;list(\@options);

       This is a wrapper for <u>exec</u> called without a destination to get a listing.  It returns the output of
       stdout like the <u>out</u> function below.  When no destination is given rsync returns the equivalent of 'ls -l'
       or 'ls -lr' modified by any include/exclude/filter parameters you specify.  This is useful for manual
       comparison without actual changes to the destination or for comparing against another listing taken at a
       different point in time.

       (As of rsync version 2.6.4-pre1 this can also be accomplished with the 'list-only' option regardless of
       whether a destination is given.)

   <b>File::Rsync::status</b>
           $rval = $obj-&gt;status;

       Returns the status from last <u>exec</u> call right shifted 8 bits.

   <b>File::Rsync::realstatus</b>
           $rval = $obj-&gt;realstatus;

       Returns the real status from last <u>exec</u> call (not right shifted).

   <b>File::Rsync::err</b>
           $aref = $obj-&gt;err;

       In scalar context this method will return a reference to an array containing all output to stderr from
       the last <u>exec</u> call, or zero (false) if there was no output.  In an array context it will return an array
       of all output to stderr or an empty list.  The scalar context can be used to efficiently test for the
       existence of output.  <u>rsync</u> sends all messages from the remote <u>rsync</u> process and any error messages to
       stderr.  This method's purpose is to make it easier for you to parse that output for appropriate
       information.

   <b>File::Rsync::out</b>
           $aref = $obj-&gt;out;

       Similar to the <u>err</u> method, in a scalar context it returns a reference to an array containing all output
       to stdout from the last <u>exec</u> call, or zero (false) if there was no output.  In an array context it
       returns an array of all output to stdout or an empty list.  <u>rsync</u> sends all informational messages
       (<b>verbose</b> option) from the local <u>rsync</u> process to stdout.

   <b>File::Rsync::lastcmd</b>
           $aref = $obj-&gt;lastcmd;

       Returns the actual system command used by the last <u>exec</u> call, or '' before any calls to <u>exec</u> for the
       object.  This can be useful in the case of an error condition to give a more informative message or for
       debugging purposes.  In an array context it return an array of args as passed to the system, in a scalar
       context it returns a space-seperated string.  See <u>getcmd</u> for access to the command before execution.

</pre><h4><b>Author</b></h4><pre>
       Lee Eakin &lt;<a href="mailto:leakin@dfw.nostrum.com">leakin@dfw.nostrum.com</a>&gt;

</pre><h4><b>Credits</b></h4><pre>
       The following people have contributed ideas, bug fixes, code or helped out by reporting or tracking down
       bugs in order to improve this module since it's initial release.  See the Changelog for details:

       Greg Ward

       Boris Goldowsky

       James Mello

       Andreas Koenig

       Joe Smith

       Jonathan Pelletier

       Heiko Jansen

       Tong Zhu

       Paul Egan

       Ronald J Kimball

       James CE Johnson

       Bill Uhl

       Peter teStrake

       Harald Flaucher

       Simon Myers

       Gavin Carr

       Petya Kohts

       Neil Hooey

       Erez Schatz

       Max Maischein

</pre><h4><b>Inspiration</b> <b>and</b> <b>Assistance</b></h4><pre>
       Gerard Hickey                             "PGP::Pipe"

       Russ Allbery                              "PGP::Sign"

       Graham Barr                               "Net::*"

       Andrew Tridgell and Paul Mackerras        <b><a href="../man1/rsync.1.html">rsync</a></b>(1)

       John Steele   &lt;<a href="mailto:steele@nostrum.com">steele@nostrum.com</a>&gt;

       Philip Kizer  &lt;<a href="mailto:pckizer@nostrum.com">pckizer@nostrum.com</a>&gt;

       Larry Wall                                <b><a href="../man1/perl.1.html">perl</a></b>(1)

       I borrowed many clues on wrapping an external program from the PGP modules, and I would not have had such
       a useful tool to wrap except for the great work of the <b>rsync</b> authors.  Thanks also to Graham Barr, the
       author of the libnet modules and many others, for looking over this code.  Of course I must mention the
       other half of my brain, John Steele, and his good friend Philip Kizer for finding <b>rsync</b> and bringing it
       to my attention.  And I would not have been able to enjoy writing useful tools if not for the creator of
       the <b>perl</b> language.

</pre><h4><b>Copyrights</b></h4><pre>
             Copyright (c) 1999-2015 Lee Eakin.  All rights reserved.

             This program is free software; you can redistribute it and/or modify
             it under the same terms as Perl itself.

perl v5.36.0                                       2022-12-08                                         <u><a href="../man3pm/Rsync.3pm.html">Rsync</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>