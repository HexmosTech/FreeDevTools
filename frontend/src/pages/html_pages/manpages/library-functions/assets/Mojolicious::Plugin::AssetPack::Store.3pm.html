<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mojolicious::Plugin::AssetPack::Store - Storage for assets</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmojolicious-plugin-assetpack-perl">libmojolicious-plugin-assetpack-perl_2.15-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mojolicious::Plugin::AssetPack::Store - Storage for assets

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Mojolicious::Lite;

         # Load plugin and pipes in the right order
         plugin AssetPack =&gt; {pipes =&gt; \@pipes};

         # Change where assets can be found
         app-&gt;asset-&gt;store-&gt;paths([
           app-&gt;home-&gt;rel_file("some/directory"),
           "/some/other/directory",
         ]);

         # Change where assets are stored
         app-&gt;asset-&gt;store-&gt;paths-&gt;[0] = app-&gt;home-&gt;rel_file("some/directory");

         # Define asset
         app-&gt;asset-&gt;process($moniker =&gt; @assets);

         # Retrieve a Mojolicious::Plugin::AssetPack::Asset object
         my $asset = app-&gt;asset-&gt;store-&gt;asset("some/file.js");

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mojolicious::Plugin::AssetPack::Store is an object to manage cached assets on disk.

       The idea is that a Mojolicious::Plugin::AssetPack::Pipe object can store an asset after it is processed.
       This will speed up development, since only changed assets will be processed and it will also allow
       processing tools to be optional in production environment.

       This module will document meta data about each asset which is saved to disk, so it can be looked up later
       as a unique item using "load".

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       Mojolicious::Plugin::AssetPack::Store inherits all attributes from Mojolicious::Static implements the
       following new ones.

   <b>asset_class</b>
         $str = $self-&gt;asset_class;
         $self = $self-&gt;asset_class("Mojolicious::Plugin::AssetPack::Asset");

       Holds the classname of which new assets will be constructed from.

   <b>default_headers</b>
         $hash_ref = $self-&gt;default_headers;
         $self = $self-&gt;default_headers({"Cache-Control" =&gt; "max-age=31536000"});

       Used to set headers used by "serve_asset".

   <b>fallback_headers</b>
         $hash_ref = $self-&gt;fallback_headers;
         $self = $self-&gt;fallback_headers({"Cache-Control" =&gt; "max-age=300"});

       Used to set headers used by "serve_fallback_for_assets".

       This is currently an EXPERIMENTAL feature.

   <b>fallback_templates</b>
         $hash_ref = $self-&gt;fallback_templates;
         $self = $self-&gt;fallback_templates-&gt;{"css"} = Mojo::Template-&gt;new;

       Used to set up templates used by "serve_fallback_for_assets".

       This is currently an EXPERIMENTAL feature.

   <b>paths</b>
         $paths = $self-&gt;paths;
         $self = $self-&gt;paths([$app-&gt;home-&gt;rel_file("assets")]);

       See "paths" in Mojolicious::Static for details.

   <b>retry_delay</b>
         my $delay = $self-&gt;retry_delay;
         $self     = $self-&gt;retry_delay(0.5);

       Delay in seconds between download attempts for assets that need to be fetched, defaults to 3.

   <b>retries</b>
         my $retries = $self-&gt;retries;
         $self       = $self-&gt;<a href="../man5/retries.5.html">retries</a>(5);

       Number of times asset downloads will be attempted for assets that need to be fetched, defaults to 0.

   <b>ua</b>
         $ua = $self-&gt;ua;

       See "ua" in Mojolicious::Plugin::AssetPack.

</pre><h4><b>METHODS</b></h4><pre>
       Mojolicious::Plugin::AssetPack::Store inherits all attributes from Mojolicious::Static implements the
       following new ones.

   <b>asset</b>
         $asset = $self-&gt;asset($url, $paths);

       Returns a Mojolicious::Plugin::AssetPack::Asset object or undef unless $url can be found in $paths.
       $paths default to "paths" in Mojolicious::Static. $paths and $url can be...

       • helper://some.mojo.helper/some_identifier?format=css

         Will  call  a  helper  registered  under  the  name  "csome.mojo.helper",  with the query parameters as
         arguments. Example:

           $output = $c-&gt;some-&gt;mojo-&gt;helper(some_identifier =&gt; {format =&gt; "css"});

         $output can be a scalar containing the asset  content  or  a  hash-ref  with  arguments  passed  on  to
         Mojolicious::Plugin::AssetPack::Asset.  Note  that  "format"  need  to  be  present  in  the URL or the
         returning hash-ref for this to work.

         This feature is currently EXPERIMENTAL. Let me know if you use it/find it interesting.

       • <a href="http://example.com/foo/bar">http://example.com/foo/bar</a>

         An absolute URL will be downloaded from web, unless the host is "local":  "local"  is  a  special  host
         which will run the request through the current Mojolicious application.

       • foo/bar

         An relative URL will be looked up using "file" in Mojolicious::Static.

       Note  that  assets from web will be cached locally, which means that you need to delete the files on disk
       to download a new version.

   <b>load</b>
         $bool = $self-&gt;load($asset, \%attr);

       Used to load an existing asset from disk. %attr will override the way an asset is looked up. The  example
       below will ignore minified and rather use the value from %attr:

         $bool = $self-&gt;load($asset, {minified =&gt; $bool});

   <b>persist</b>
         $self = $self-&gt;persist;

       Used to save the internal state of the store to disk.

       This method is EXPERIMENTAL, and may change without warning.

   <b>save</b>
         $bool = $self-&gt;save($asset, \%attr);

       Used    to    save    an    asset   to   disk.   %attr   are   usually   the   same   as   "TO_JSON"   in
       Mojolicious::Plugin::AssetPack::Asset and used to document metadata about the $asset so it can be  looked
       up using "load".

   <b>serve_asset</b>
         $self = $self-&gt;serve_asset($c, $asset);

       Override  "serve_asset" in Mojolicious::Static with the functionality to set response headers first, from
       "default_headers".

       Will call "render" in Mojolicious::Plugin::AssetPack::Asset  if  available,  after  setting  Content-Type
       header and other "default_headers".

   <b>serve_fallback_for_assets</b>
         $self = $self-&gt;serve_fallback_for_assets($c, $topic, $assets);

       Used    to    serve    a    fallback    response   for   given   $topic   and   a   Mojo::Collection   of
       "Mojolicious::Plugin::AssetPack::Asset" objects.

       Will set the headers in "fallback_headers"  and  then  either  render  either  a  template  matching  the
       extension from $topic from "fallback_templates", a 302 redirect to the actual asset, or a 404 Not Found.

       This is currently an EXPERIMENTAL feature.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mojolicious::Plugin::AssetPack.

perl v5.40.0                                       2024-12-07              <u>Mojolicious::P...ssetPack::<a href="../man3pm/Store.3pm.html">Store</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>