<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>keyboard_lowlevel_callback  -  User  specified low level keyboard event handler. Allegro game programming</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/allegro4-doc">allegro4-doc_4.4.3.1-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       keyboard_lowlevel_callback  -  User  specified low level keyboard event handler. Allegro game programming
       library.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;allegro.h&gt;</b>

       <b>extern</b> <b>void</b> <b>(*keyboard_lowlevel_callback)(int</b> <b>scancode);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       If set, this function is called by the keyboard handler in response to every keyboard event, both presses
       (including keyboard repeat rate) and releases. It will be passed a raw keyboard scancode byte  (scancodes
       are 7 bits long), with the top bit (8th bit) clear if the key has been pressed or set if it was released.
       This routine executes in an interrupt context, so it must be in locked memory. Example:

          volatile int key_down, key_up;

          void keypress_watcher(int scancode)
          {
             if (scancode &amp; 0x80) {
                key_up = 1;
             } else {
                key_down = 1;
             }
          } END_OF_FUNCTION(keypress_watcher)

          ...

             install_timer();
             LOCK_FUNCTION(silence_g_key);
             LOCK_VARIABLE(key_down);
             LOCK_VARIABLE(key_up);
             install_keyboard();
             keyboard_lowlevel_callback = keypress_watcher;
             /* Disable keyboard repeat to get typewriter effect. */
             set_keyboard_rate(0, 0);

          ...

             while (game_loop) {
                if (key_down) {
                   key_down = 0;
                   /* Play sample of typewriter key press. */
                }
                if (key_up) {
                   key_up = 0;
                   /* Play sample of typewriter key release. */
                }
             }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3alleg4/install_keyboard.3alleg4.html">install_keyboard</a></b>(3alleg4), <b><a href="../man3alleg4/keyboard_callback.3alleg4.html">keyboard_callback</a></b>(3alleg4), <b><a href="../man3alleg4/keyboard_ucallback.3alleg4.html">keyboard_ucallback</a></b>(3alleg4), <b><a href="../man3alleg4/exkeys.3alleg4.html">exkeys</a></b>(3alleg4)

Allegro                                           version 4.4.3              <u><a href="../man3alleg4/keyboard_lowlevel_callback.3alleg4.html">keyboard_lowlevel_callback</a></u>(3alleg4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>