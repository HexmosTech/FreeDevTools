<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xcb_grab_keyboard - Grab the keyboard</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libxcb-doc">libxcb-doc_1.17.0-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       xcb_grab_keyboard - Grab the keyboard

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;xcb/xproto.h&gt;</b>

   <b>Request</b> <b>function</b>

       xcb_grab_keyboard_cookie_t <b>xcb_grab_keyboard</b>(xcb_connection_t *<u>conn</u>, uint8_t <u>owner_events</u>,
              xcb_window_t <u>grab_window</u>, xcb_timestamp_t <u>time</u>, uint8_t <u>pointer_mode</u>, uint8_t <u>keyboard_mode</u>);

   <b>Reply</b> <b>datastructure</b>
       typedef struct xcb_grab_keyboard_reply_t {
           uint8_t  <u>response_type</u>;
           uint8_t  <u>status</u>;
           uint16_t <u>sequence</u>;
           uint32_t <u>length</u>;
       } <b>xcb_grab_keyboard_reply_t</b>;

   <b>Reply</b> <b>function</b>

       xcb_grab_keyboard_reply_t *<b>xcb_grab_keyboard_reply</b>(xcb_connection_t *<u>conn</u>,
              xcb_grab_keyboard_cookie_t <u>cookie</u>, xcb_generic_error_t **<u>e</u>);

</pre><h4><b>REQUEST</b> <b>ARGUMENTS</b></h4><pre>
       <u>conn</u>      The XCB connection to X11.

       <u>owner_events</u>
                 If  1,  the <u>grab_window</u> will still get the pointer events. If 0, events are not reported to the
                 <u>grab_window</u>.

       <u>grab_window</u>
                 Specifies the window on which the pointer should be grabbed.

       <u>time</u>      Timestamp to avoid race conditions when running X over the network.

                 The special value <u>XCB_CURRENT_TIME</u> will be replaced with the current server time.

       <u>pointer_mode</u>
                 One of the following values:

                 <u>XCB_GRAB_MODE_SYNC</u>
                           The state of the keyboard appears to freeze: No further keyboard events are generated
                           by the server until the grabbing client issues a releasing <u>AllowEvents</u> request or un‐
                           til the keyboard grab is released.

                 <u>XCB_GRAB_MODE_ASYNC</u>
                           Keyboard event processing continues normally.

       <u>keyboard_mode</u>
                 One of the following values:

                 <u>XCB_GRAB_MODE_SYNC</u>
                           The state of the keyboard appears to freeze: No further keyboard events are generated
                           by the server until the grabbing client issues a releasing <u>AllowEvents</u> request or un‐
                           til the keyboard grab is released.

                 <u>XCB_GRAB_MODE_ASYNC</u>
                           Keyboard event processing continues normally.

</pre><h4><b>REPLY</b> <b>FIELDS</b></h4><pre>
       <u>response_type</u>
                 The type of this reply, in this case <u>XCB_GRAB_KEYBOARD</u>. This  field  is  also  present  in  the
                 <u>xcb_generic_reply_t</u> and can be used to tell replies apart from each other.

       <u>sequence</u>  The sequence number of the last request processed by the X11 server.

       <u>length</u>    The length of the reply, in words (a word is 4 bytes).

       <u>status</u>    One of the following values:

                 <u>XCB_GRAB_STATUS_SUCCESS</u>
                           TODO: NOT YET DOCUMENTED.

                 <u>XCB_GRAB_STATUS_ALREADY_GRABBED</u>
                           TODO: NOT YET DOCUMENTED.

                 <u>XCB_GRAB_STATUS_INVALID_TIME</u>
                           TODO: NOT YET DOCUMENTED.

                 <u>XCB_GRAB_STATUS_NOT_VIEWABLE</u>
                           TODO: NOT YET DOCUMENTED.

                 <u>XCB_GRAB_STATUS_FROZEN</u>
                           TODO: NOT YET DOCUMENTED.
                 TODO: NOT YET DOCUMENTED.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Actively  grabs control of the keyboard and generates FocusIn and FocusOut events. Further key events are
       reported only to the grabbing client.

       Any active keyboard grab by this client is overridden. If the keyboard is actively grabbed by some  other
       client,  <u>AlreadyGrabbed</u>  is returned. If <u>grab_window</u> is not viewable, <u>GrabNotViewable</u> is returned. If the
       keyboard is frozen by an active grab of another client, <u>GrabFrozen</u> is returned. If the specified <u>time</u>  is
       earlier  than the last-keyboard-grab time or later than the current X server time, <u>GrabInvalidTime</u> is re‐
       turned. Otherwise, the last-keyboard-grab time is set to the specified time.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Returns an <u>xcb_grab_keyboard_cookie_t</u>. Errors  have  to  be  handled  when  calling  the  reply  function
       <u>xcb_grab_keyboard_reply</u>.

       If  you  want  to  handle  errors in the event loop instead, use <u>xcb_grab_keyboard_unchecked</u>. See <b>xcb-re‐</b>
       <b><a href="../man3/quests.3.html">quests</a>(3)</b> for details.

</pre><h4><b>ERRORS</b></h4><pre>
       <u>xcb_value_error_t</u>
                 TODO: reasons?

       <u>xcb_window_error_t</u>
                 The specified <u>window</u> does not exist.

</pre><h4><b>EXAMPLE</b></h4><pre>
       /*
        * Grabs the keyboard actively
        *
        */
       void my_example(xcb_connection_t *conn, xcb_screen_t *screen) {
           xcb_grab_keyboard_cookie_t cookie;
           xcb_grab_keyboard_reply_t *reply;

           cookie = xcb_grab_keyboard(
               conn,
               true,                /* report events */
               screen-&gt;root,        /* grab the root window */
               XCB_CURRENT_TIME,
               XCB_GRAB_MODE_ASYNC, /* process events as normal, do not require sync */
               XCB_GRAB_MODE_ASYNC
           );

           if ((reply = xcb_grab_keyboard_reply(conn, cookie, NULL))) {
               if (reply-&gt;status == XCB_GRAB_STATUS_SUCCESS)
                   printf("successfully grabbed the keyboard\n");

               free(reply);
           }
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/xcb-requests.3.html">xcb-requests</a></b>(3), <b><a href="../man3/xcb-examples.3.html">xcb-examples</a></b>(3), <b><a href="../man3/xcb_grab_pointer.3.html">xcb_grab_pointer</a></b>(3)

</pre><h4><b>AUTHOR</b></h4><pre>
       Generated from xproto.xml. Contact <a href="mailto:xcb@lists.freedesktop.org">xcb@lists.freedesktop.org</a> for corrections and improvements.

X Version 11                                      libxcb 1.17.0                             <u><a href="../man3/xcb_grab_keyboard.3.html">xcb_grab_keyboard</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>