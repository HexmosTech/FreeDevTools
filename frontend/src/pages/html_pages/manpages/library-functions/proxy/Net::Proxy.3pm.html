<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net::Proxy - Framework for proxying network connections in many ways</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnet-proxy-perl">libnet-proxy-perl_0.13-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Net::Proxy - Framework for proxying network connections in many ways

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Net::Proxy;

           # proxy connections from localhost:6789 to remotehost:9876
           # using standard TCP connections
           my $proxy = Net::Proxy-&gt;new(
               {   in  =&gt; { type =&gt; 'tcp', port =&gt; '6789' },
                   out =&gt; { type =&gt; 'tcp', host =&gt; 'remotehost', port =&gt; '9876' },
               }
           );

           # register the proxy object
           $proxy-&gt;register();

           # and you can setup multiple proxies

           # and now proxy connections indefinitely
           Net::Proxy-&gt;mainloop();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A Net::Proxy object represents a proxy that accepts connections and then relays the data transfered
       between the source and the destination.

       The goal of this module is to abstract the different methods used to connect from the proxy to the
       destination.

       A proxy is a program that transfer data across a network boundary between a client and a server.
       Net::Proxy introduces the concept of "connectors" (implemented as Net::Proxy::Connector subclasses),
       which abstract the server part (connected to the client) and the client part (connected to the server) of
       the proxy.

       This architecture makes it easy to implement specific techniques to cross a given network boundary,
       possibly by using a proxy on one side of the network fence, and a reverse-proxy on the other side of the
       fence.

       See "AVAILABLE CONNECTORS" for details about the existing connectors.

</pre><h4><b>METHODS</b></h4><pre>
       If you only intend to use Net::Proxy and not write new connectors, you only need to know about new(),
       register() and mainloop().

   <b>Class</b> <b>methods</b>
       <u>new</u>

           my $proxy = Net::Proxy-&gt;new( { in =&gt; { ... }, { out =&gt; { ... } } );

       Return a new Net::Proxy object, with two connectors configured as described in the hashref.

       The connector parameters are described in the table below, as well as in each connector documentation.

       <u>mainloop</u>

           Net::Proxy-&gt;mainloop( $max_connections )

       This method initialises all the registered "Net::Proxy" objects and then loops on all the sockets ready
       for reading, passing the data through the various "Net::Proxy::Connector" objets to handle the specifics
       of each connection.

       If $max_connections is given, the proxy will stop after having fully processed that many connections.
       Otherwise, this method does not return.

       <u>add_listeners</u>

           Net::Proxy-&gt;add_listeners( @sockets );

       Add the given sockets to the list of listening sockets.

       <u>watch_reader_sockets</u>

           Net::Proxy-&gt;watch_reader_sockets( @sockets );

       Add the given sockets to the readers watch list.

       <u>watch_writer_sockets</u>

           Net::Proxy-&gt;watch_writer_sockets( @sockets );

       Add the given sockets to the writers watch list.

       <u>remove_writer_sockets</u>

           Net::Proxy-&gt;remove_writer_sockets( @sockets );

       Remove the given sockets from the writers watch list.

       <u>close_sockets</u>

           Net::Proxy-&gt;close_sockets( @sockets );

       Close the given sockets and cleanup the related internal structures.

       <u>set_verbosity</u>

           Net::Proxy-&gt;set_verbosity( $level );

       Set the logging level. 0 means not messages except warnings and errors.

       <u>error</u>

           Net::Proxy-&gt;error( $message );

       Log $message to STDERR, always.

       <u>notice</u>

           Net::Proxy-&gt;notice( $message );

       Log $message to STDERR if verbosity level is equal to 1 or more.

       <u>info</u>

           Net::Proxy-&gt;info( $message );

       Log $message to STDERR if verbosity level is equal to 2 or more.

       <u>debug</u>

           Net::Proxy-&gt;debug( $message );

       Log $message to STDERR if verbosity level is equal to 3 or more.

       (Note: throughout the Net::Proxy source code, calls to debug() are commented with "##".)

       <u>get_max_buffer_size</u>

           my $buffsize = Net::Proxy-&gt;get_max_buffer_size;

       Get the maximum allowed length of the internal write buffers used by each connector.

       <u>set_max_buffer_size</u>

           Net::Proxy-&gt;set_max_buffer_size($buffsize);

       Get or set the maximum allowed length of the internal write buffers used by each connector.  A value of 0
       means that the maximum length is not checked. The default value is 16384 bytes (16kB).

       Note that this is a global value, shared by all proxies and connectors.

   <b>Class</b> <b>methods</b> <b>related</b> <b>to</b> <b>sockets</b>
       Some of the class methods are related to the socket objects that handle the actual connections.

       <u>get_peer</u>

           my $peer = Net::Proxy-&gt;get_peer( $socket );

       Get the socket peer.

       <u>set_peer</u>

           Net::Proxy-&gt;set_peer( $socket, $peer );

       Set the socket peer.

       <u>get_connector</u>

           my $connector = Net::Proxy-&gt;get_connector( $socket );

       Get the socket connector (a Net::Proxy::Connector object).

       <u>set_connector</u>

           Net::Proxy-&gt;set_connector( $socket, $connector );

       Set the socket connector (a Net::Proxy::Connector object).

       <u>get_state</u>

           my $state = Net::Proxy-&gt;get_state( $socket );

       Get the socket state.

       <u>set_state</u>

           Net::Proxy-&gt;set_state( $socket, $state );

       Set the socket state. Some "Net::Proxy::Connector" subclasses may wish to use this to store some internal
       information about the socket or the connection.

       <u>get_nick</u>

           my $nick = Net::Proxy-&gt;get_nick( $socket );

       Get the socket nickname.

       <u>set_nick</u>

           Net::Proxy-&gt;set_nick( $socket, $nickname );

       Set the socket nickname. Typically used by Net::Proxy::Connector to give informative names to socket
       (used in the log messages).

       <u>get_buffer</u>

           my $buffer = Net::Proxy-&gt;get_buffer( $socket );

       Get the content of the writing buffer for the socket.

       <u>set_buffer</u>

           Net::Proxy-&gt;set_buffer( $socket, $data );

       Set the content of the writing buffer for the socket.  Used by Net::Proxy::Connector in raw_read_from()
       and ranw_write_to().

       <u>get_callback</u>

           Net::Proxy-&gt;get_callback( $socket );

       Get the callback currently associated with the socket.

       <u>set_callback</u>

           Net::Proxy-&gt;set_callback( $socket, $coderef );

       Set the callback currently associated with the socket.

       <u>add_to_buffer</u>

           Net::Proxy-&gt;add_to_buffer( $socket, $data );

       Add data to the writing buffer of the socket.

   <b>Instance</b> <b>methods</b>
       <u>register</u>

           $proxy-&gt;register();

       Register a Net::Proxy object so that it will be included in the mainloop() processing.

       <u>unregister</u>

           $proxy-&gt;unregister();

       Unregister the Net::Proxy object.

       <u>in_connector</u>

           my $connector = $proxy-&gt;in_connector();

       Return the Net::Proxy::Connector objet that handles the incoming connection and handles the data coming
       from the "client" side.

       <u>out_connector</u>

           my $connector = $proxy-&gt;out_connector();

       Return the Net::Proxy::Connector objet that creates the outgoing connection and handles the data coming
       from the "server" side.

   <b>Statistical</b> <b>methods</b>
       The following methods manage some statistical information about the individual proxies:

       <u>stat_inc_opened</u>

           $proxy-&gt;stat_inc_opened();

       Increment the "opened" connection counter for this proxy.

       <u>stat_inc_closed</u>

           $proxy-&gt;stat_inc_closed();

       Increment the "closed" connection counter for this proxy.

       <u>stat_opened</u>

           my $opened = $proxy-&gt;stat_opened();

       Return the count of "opened" connections for this proxy.

       <u>stat_closed</u>

           my $closed = $proxy-&gt;stat_closed();

       Return the count of "closed" connections for this proxy.

       <u>stat_total_opened</u>

           my $opened = $proxy-&gt;stat_total_opened();

       Return the total count of "opened" connections across all proxy objects.

       <u>stat_total_closed</u>

           my $closed = $proxy-&gt;stat_total_closed();

       Return the total count of "closed" connections across all proxy objects.

</pre><h4><b>CONNECTORS</b></h4><pre>
       All connection types are provided with the help of specialised classes.  The logic for protocol "xxx" is
       provided by the "Net::Proxy::Connector::xxx" class.

   <b>Connector</b> <b>hooks</b>
       There is a single parameter that all connectors accept: "hook".  Given a code reference, the code
       reference will be called when data is <u>received</u> on the corresponding socket.

       The code reference should have the following signature:

           sub callback {
               my ($dataref, $sock, $connector) = @_;
               ...
           }

       $dataref is a reference to the chunk of data received, $sock is a reference to the socket that received
       the data, and $connector is the "Net::Proxy::Connector" object that created the socket. This allows
       someone to eventually store data in a stash stored in the connector, so as to share data between sockets.

   <b>Available</b> <b>connectors</b>
       tcp (Net::Proxy::Connector::tcp)
           This  is  the  simplest  possible  proxy  connector.  On  the "in" side, it sits waiting for incoming
           connections, and on the "out" side, it connects to the configured host/port.

       connect (Net::Proxy::Connector::connect)
           This proxy connector can connect to a TCP server  though  a  web  proxy  that  accepts  HTTP  CONNECT
           requests.

       dual (Net::Proxy::Connector::dual)
           This  proxy  connector  is  a  Y-shaped  connector: depending on the client behaviour right after the
           connection is established, it connects it to one of two services, handled by two distinct connectors.

       dummy (Net::Proxy::Connector::dummy)
           This proxy connector does nothing. You can use it as a template for writing new Net::Proxy::Connector
           classes.

   <b>Summary</b>
       This  table  summarises  all  the  available  Net::Proxy::Connector  classes  and  the  parameters  their
       constructors recognise.

       "N/A" means that the given Net::Proxy::Connector cannot be used in that position (either "in" or "out").

            Connector  | in parameters   | out parameters
           ------------+-----------------+-----------------
            tcp        | host            | host
                       | port            | port
           ------------+-----------------+-----------------
            connect    | N/A             | host
                       |                 | port
                       |                 | proxy_host
                       |                 | proxy_port
                       |                 | proxy_user
                       |                 | proxy_pass
                       |                 | proxy_agent
           ------------+-----------------+-----------------
            dual       | host            | N/A
                       | port            |
                       | timeout         |
                       | server_first    |
                       | client_first    |
           ------------+-----------------+-----------------
            dummy      | N/A             | N/A
           ------------+-----------------+-----------------
            ssl        | host            | host
                       | port            | port
                       | start_cleartext | start_cleartext
           ------------+-----------------+-----------------
            connect_ssl| N/A             | host
                       |                 | port
                       |                 | proxy_host
                       |                 | proxy_port
                       |                 | proxy_user
                       |                 | proxy_pass
                       |                 | proxy_agent

       Net::Proxy::Connector::dummy  is used as the "out" parameter for a Net::Proxy::Connector::dual, since the
       later is linked to two different connector objects.

</pre><h4><b>AUTHOR</b></h4><pre>
       Philippe 'BooK' Bruhat, "&lt;<a href="mailto:book@cpan.org">book@cpan.org</a>&gt;".

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs or feature requests to "<a href="mailto:bug-net-proxy@rt.cpan.org">bug-net-proxy@rt.cpan.org</a>", or through the  web  interface
       at  &lt;<a href="http://rt.cpan.org/">http://rt.cpan.org/</a>&gt;.  I  will be notified, and then you'll automatically be notified of progress on
       your bug as I make changes.

</pre><h4><b>TODO</b></h4><pre>
       Here's my own wishlist:

       •   Write       a       connector        fully        compatible        with        GNU        httptunnel
           (&lt;<a href="http://www.nocrew.org/software/httptunnel.html">http://www.nocrew.org/software/httptunnel.html</a>&gt;).

           This one will probably be named "Net::Proxy::Connector::httptunnel".

       •   Enhance the httptunnel protocol to support multiple connections.

       •   Implement  RFC  3093 - Firewall Enhancement Protocol (FEP), as "Net::Proxy::Connector::FEP". This RFC
           was published on April 1, 2001.

           This is probably impossible with Net::Proxy, since the FEP driver is a rather  low-level  driver  (at
           the IP level of the network stack).

       •   Implement DNS tunnel connectors.

           See                      &lt;<a href="http://savannah.nongnu.org/projects/nstx/">http://savannah.nongnu.org/projects/nstx/</a>&gt;,                      OzymanDNS,
           &lt;<a href="http://www.doxpara.com/slides/BH_EU_05-Kaminsky.pdf">http://www.doxpara.com/slides/BH_EU_05-Kaminsky.pdf</a>&gt;.    &lt;<a href="http://thomer.com/howtos/nstx.html">http://thomer.com/howtos/nstx.html</a>&gt;    for
           examples.

       •   Implement an UDP connector. (Is it feasible?)

       •   Implement  a  connector  that  can  be  plugged  to the STDIN/STDOUT of an external process, like the
           "ProxyCommand" option of OpenSSH.

       •   Implement "Net::Proxy::Connector::unix", for UNIX sockets.

       •   Implement ICMP tunnel connectors.

           See                      &lt;<a href="http://www.linuxexposed.com/Articles/Hacking/Case-of-a-wireless-hack.html">http://www.linuxexposed.com/Articles/Hacking/Case-of-a-wireless-hack.html</a>&gt;,
           &lt;<a href="http://sourceforge.net/projects/itun">http://sourceforge.net/projects/itun</a>&gt;,                  &lt;<a href="http://www.cs.uit.no/~daniels/PingTunnel/">http://www.cs.uit.no/~daniels/PingTunnel/</a>&gt;,
           &lt;<a href="http://thomer.com/icmptx/">http://thomer.com/icmptx/</a>&gt; for examples.

           Since ICMP implies low-level packet reading and writing, it may not be  possible  for  Net::Proxy  to
           handle it.

       •   Look for inspiration in the <u>Firewall-Piercing</u> <u>HOWTO</u>, at &lt;<a href="http://fare.tunes.org/files/fwprc/">http://fare.tunes.org/files/fwprc/</a>&gt;.

           Look also here: &lt;<a href="http://gray-world.net/tools/">http://gray-world.net/tools/</a>&gt;

       •   Implement  a "Net::Proxy::Connector::starttls" connector that can upgrade upgrade a connection to SSL
           transparently, even if the client or server doesn't support STARTTLS.

           Martin Werthmöller provided a full implementation of a connector that can handle IMAP connections and
           upgrade them to TLS if the client sends a "STARTTLS" command. My implementation will  split  this  in
           two  parts  Net::Proxy::Connector::ssl  and "Net::Proxy::Connector::starttls", that inherits from the
           former.

</pre><h4><b>SUPPORT</b></h4><pre>
       You can find documentation for this module with the perldoc command.

           perldoc Net::Proxy

       You can also look for information at:

       The public source repository
           &lt;<a href="http://github.com/book/Net-Proxy/">http://github.com/book/Net-Proxy/</a>&gt;

       AnnoCPAN: Annotated CPAN documentation
           &lt;<a href="http://annocpan.org/dist/Net-Proxy">http://annocpan.org/dist/Net-Proxy</a>&gt;

       CPAN Ratings
           &lt;<a href="http://cpanratings.perl.org/d/Net-Proxy">http://cpanratings.perl.org/d/Net-Proxy</a>&gt;

       RT: CPAN's request tracker
           &lt;<a href="http://rt.cpan.org/NoAuth/Bugs.html">http://rt.cpan.org/NoAuth/Bugs.html</a>?Dist=Net-Proxy&gt;

       Search CPAN
           &lt;<a href="http://search.cpan.org/dist/Net-Proxy">http://search.cpan.org/dist/Net-Proxy</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2006-2014 Philippe 'BooK' Bruhat, All Rights Reserved.

</pre><h4><b>LICENSE</b></h4><pre>
       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

perl v5.38.2                                       2024-05-15                                    <u>Net::<a href="../man3pm/Proxy.3pm.html">Proxy</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>