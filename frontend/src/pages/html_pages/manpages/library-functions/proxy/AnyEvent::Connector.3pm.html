<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnyEvent::Connector - tcp_connect with transparent proxy handling</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libanyevent-connector-perl">libanyevent-connector-perl_0.04-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       AnyEvent::Connector - tcp_connect with transparent proxy handling

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use AnyEvent::Connector;

           ## Specify the proxy setting explicitly.
           my $c = AnyEvent::Connector-&gt;new(
               proxy =&gt; '<a href="http://proxy.example.com">http://proxy.example.com</a>:8080',
               no_proxy =&gt; ['localhost', 'your-internal-domain.net']
           );

           ## Proxy setting from "http_proxy" and "no_proxy" environment variables.
           my $cenv = AnyEvent::Connector-&gt;new(
               env_proxy =&gt; "http",
           );

           ## Same API as AnyEvent::Socket::tcp_connect
           my $guard = $c-&gt;tcp_connect(
               "target.hogehoge.org", 80,
               sub {
                   ## connect callback
                   my ($fh ,$host, $port, $retry) = @_;
                   ...;
               },
               sub {
                   ## prepare calback
                   my ($fh) = @_;
                   ...;
               }
           );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       AnyEvent::Connector object has "tcp_connect" method compatible with that from AnyEvent::Socket, and it
       handles proxy settings transparently.

</pre><h4><b>CLASS</b> <b>METHODS</b></h4><pre>
   <b>$conn</b> <b>=</b> <b>AnyEvent::Connector-&gt;new(%args)</b>
       The constructor.

       Fields in %args are:

       "proxy" =&gt; STR (optional)
           String of proxy URL. Currently only "http" proxy is supported.

           If both "proxy" and "env_proxy" are not specified, the $conn will directly connect to the destination
           host.

           If both "proxy" and "env_proxy" are specified, setting by "proxy" is used.

           Setting empty string to "proxy" disables the proxy setting done by "env_proxy" option.

       "no_proxy" =&gt; STR or ARRAYREF of STR (optional)
           String or array-ref of strings of domain names, to which the $conn will directly connect.

           If both "no_proxy" and "env_proxy" are specified, setting by "no_proxy" is used.

           Setting  empty  string  or  empty  array-ref  to  "no_proxy"  disables  the  no_proxy setting done by
           "env_proxy" option.

       "env_proxy" =&gt; STR (optional)
           String of protocol specifier. If  specified,  proxy  settings  for  that  protocol  are  loaded  from
           environment variables, and $conn is created.

           For  example,  if  "http" is specified, "http_proxy" (or "HTTP_PROXY") and "no_proxy" (or "NO_PROXY")
           environment variables are used to set "proxy" and "no_proxy" options, respectively.

           "proxy" and "no_proxy" options have precedence over "env_proxy" option.

</pre><h4><b>OBJECT</b> <b>METHOD</b></h4><pre>
   <b>$guard</b> <b>=</b> <b>$conn-&gt;tcp_connect($host,</b> <b>$port,</b> <b>$connect_cb,</b> <b>$prepare_cb)</b>
       Make a (possibly proxied) TCP connection to the given $host and $port.

       If "$conn-&gt;proxy_for($host, $port)" returns "undef", the behavior of this method is exactly the  same  as
       "tcp_connect" function from AnyEvent::Socket.

       If "$conn-&gt;proxy_for($host, $port)" returns a proxy URL, it behaves in the following way.

       •   It connects to the proxy, and tells the proxy to connect to the final destination, $host and $port.

       •   It  runs  $connect_cb  after  the  connection to the proxy AND (hopefully) the connection between the
           proxy and the final destination are both established.

               $connect_cb-&gt;($cb_fh, $cb_host, $cb_port, $cb_retry)

           $cb_fh is the filehandle to the proxy. $cb_host and $cb_port are the hostname and port of the proxy.

       •   If the TCP connection to the proxy is established but the connection to the final  destination  fails
           for  some  reason,  $connect_cb is called with no argument passed (just as the original "tcp_connect"
           does).

       •   If given, it runs $prepare_cb before it starts connecting to the proxy.

   <b>$proxy</b> <b>=</b> <b>$conn-&gt;proxy_for($host,</b> <b>$port)</b>
       If $conn uses a proxy to connect to the given $host and $port, it returns the string of  the  proxy  URL.
       Otherwise, it returns "undef".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       •   AnyEvent::Socket

       •   AnyEvent::HTTP   -   it  has  "tcp_connect"  option  to  implement  proxy  connection.  You  can  use
           AnyEvent::Connector for it.

</pre><h4><b>REPOSITORY</b></h4><pre>
       &lt;https://github.com/debug-ito/AnyEvent-Connector&gt;

</pre><h4><b>BUGS</b> <b>AND</b> <b>FEATURE</b> <b>REQUESTS</b></h4><pre>
       Please      report      bugs      and      feature      requests      to      my      Github       issues
       &lt;https://github.com/debug-ito/AnyEvent-Connector/issues&gt;.

       Although       I       prefer      Github,      non-Github      users      can      use      CPAN      RT
       &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=AnyEvent-Connector&gt;.     Please    send    email    to
       "bug-AnyEvent-Connector at rt.cpan.org" to report bugs if you do not have CPAN RT account.

</pre><h4><b>AUTHOR</b></h4><pre>
       Toshio Ito, "&lt;toshioito at cpan.org&gt;"

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright 2018 Toshio Ito.

       This  program  is  free software; you can redistribute it and/or modify it under the terms of either: the
       GNU General Public License as published by the Free Software Foundation; or the Artistic License.

       See &lt;<a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a>&gt; for more information.

perl v5.36.0                                       2023-11-11                           <u>AnyEvent::<a href="../man3pm/Connector.3pm.html">Connector</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>