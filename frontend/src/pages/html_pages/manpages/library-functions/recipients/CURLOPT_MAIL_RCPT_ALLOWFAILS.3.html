<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_MAIL_RCPT_ALLOWFAILS - allow RCPT TO command to fail for some recipients</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_MAIL_RCPT_ALLOWFAILS - allow RCPT TO command to fail for some recipients

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_MAIL_RCPT_ALLOWFAILS,
                                 long allow);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       If <u>allow</u> is set to 1L, allow RCPT TO command to fail for some recipients.

       When  sending  data to multiple recipients, by default curl aborts the SMTP conversation if either one of
       the recipients causes the RCPT TO command to return an error.

       The default behavior can be changed by setting  <u>allow</u>  to  1L  which  makes  libcurl  ignore  errors  for
       individual recipients and proceed with the remaining accepted recipients.

       If  all recipients trigger RCPT TO failures and this flag is specified, curl aborts the SMTP conversation
       and returns the error received from to the last RCPT TO command.

</pre><h4><b>DEFAULT</b></h4><pre>
       0

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects smtp only

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           struct curl_slist *list;
           CURLcode res;

           /* Adding one valid and one invalid email address */
           list = curl_slist_append(NULL, "<a href="mailto:person@example.com">person@example.com</a>");
           list = curl_slist_append(list, "invalidemailaddress");

           curl_easy_setopt(curl, CURLOPT_URL, "smtp://example.com/");
           curl_easy_setopt(curl, CURLOPT_MAIL_RCPT_ALLOWFAILS, 1L);

           res = curl_easy_perform(curl);
           curl_slist_free_all(list);
           curl_easy_cleanup(curl);
         }
       }

</pre><h4><b>HISTORY</b></h4><pre>
       This option was called CURLOPT_MAIL_RCPT_ALLLOWFAILS (with three instead of two letter L) before 8.2.0

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 8.2.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_MAIL_FROM.3.html">CURLOPT_MAIL_FROM</a></b>(3), <b><a href="../man3/CURLOPT_MAIL_RCPT.3.html">CURLOPT_MAIL_RCPT</a></b>(3)

libcurl                                            2025-06-16                    <u><a href="../man3/CURLOPT_MAIL_RCPT_ALLOWFAILS.3.html">CURLOPT_MAIL_RCPT_ALLOWFAILS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>