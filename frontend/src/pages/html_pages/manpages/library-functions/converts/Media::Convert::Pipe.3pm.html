<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media::Convert::Pipe - class to generate ffmpeg command lines with Media::Convert::Asset</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmedia-convert-perl">libmedia-convert-perl_1.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Media::Convert::Pipe - class to generate ffmpeg command lines with Media::Convert::Asset

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Media::Convert::Asset;
         use Media::Convert::Pipe;

         my $input_audio = Media::Convert::Asset-&gt;new(url =&gt; $input_filename_audio);
         my $input_video = Media::Convert::Asset-&gt;new(url =&gt; $input_filename_video);
         my $output = Media::Convert::Asset-&gt;new(url =&gt; $output_filename);
         my $map_audio = Media::Convert::Map-&gt;new(input =&gt; $input_audio, type =&gt; "stream", choice =&gt; "audio");
         my $map_video = Media::Convert::Map-&gt;new(input =&gt; $input_video, type =&gt; "stream", choice =&gt; "video");
         my $pipe = Media::Convert::Pipe-&gt;new(inputs =&gt; [$input_audio, $input_video], map =&gt; [ $map_audio, $map_video ], output =&gt; $output);
         $pipe-&gt;run();

         # Or, if progress information is wanted:
         sub print_progress {
           my $percentage = shift;
           print "Transcoding progress: $percentage\r";
         }
         $pipe-&gt;progress(\&amp;print_progress);
         $pipe-&gt;run();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "Media::Convert::Pipe" is the class in the "Media::Convert" package which does most of the hard work
       inside "Media::Convert". It generates and runs the ffmpeg command line, capturing the output where
       required.

       "Media::Convert::Pipe" will compare the properties of the input "Media::Convert::Asset" objects against
       those of the output "Media::Convert::Asset" object, and will add the necessary parameters to the ffmpeg
       command line to convert the audio/video material in the input file to the format required by the output
       file.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       The following attributes are supported by "Media::Convert::Pipe".

   <b>inputs</b>
       The objects to read from. Must be "Media::Convert::Asset" objects. If more than one object is passed, a
       value for the "map" attribute may be required to tell ffmpeg which audio/video stream to read from which
       file.

       More input objects can be added using the "add_input" method, and they can all be removed using the
       "clear_inputs" object.

   <b>output</b>
       The object to write to. Must be a "Media::Convert::Asset" object.  Required.

       If any properties differ between the input objects and the output object (e.g., the codec, pixel format,
       audio sample frequency, video resolution, etc etc etc), "Media::Convert::Pipe" will add the necessary
       command-line options to the ffmpeg command line to convert the video from the input file to the output
       file.

   <b>map</b>
       Array of "Media::Convert::Map" objects, used to manipulate which audio and video streams exactly will be
       written to the output file (and in which order, etc).

       For more info: see Media::Convert::Map.

       Maps can be cleared with "clear_map" and added to with "add_map".

   <b>vcopy</b>
       Boolean. If true, explicitly tell "Media::Convert" to copy video without transcoding it.

       Normally, "Media::Convert" should not request a transcode if all attributes of the input file and the
       output file are exactly the same.  Getting this right may sometimes be problematic, however. In such
       cases, it can be good to explicitly say that the video should not be transcoded. That's what this
       property is for.

   <b>acopy</b>
       The same as "vcopy", but for audio rather than video.

   <b>vskip</b>
       Tell "Media::Convert" that the output file should not contain any video (i.e., that it should skip
       handling of any video). This is implied if the output container does not support video streams (e.g., the
       .wav format), but is required if it does.

   <b>askip</b>
       The same as "vskip", but for audio rather than video.

   <b>multipass</b>
       Boolean. If true, the "run" method performs a two-pass encode, rather than a single-pass encode.

       Two-pass encodes may generate a better end result, but require more time to perform.

   <b>progress</b>
       Normally, "Media::Convert::Pipe" shows (and runs) the ffmpeg command.  Any output of the ffmpeg command
       is shown on stdout.

       If this attribute is set to a coderef, then the following happens:

       The ffmpeg command line that is executed gains "-progress /dev/stdout" parameters
       The output of the ffmpeg command is parsed, and the completion percentage calculated (and all other
       output suppressed),
       The coderef that was passed to this attribute is executed with the completion percentage as the only
       parameter whenever the percentage changes.

</pre><h4><b>METHODS</b></h4><pre>
   <b>run</b>
       Run the ffmpeg command.

       If this method is not run at least once, the object's destructor will issue a warning.

</pre><h4><b>POD</b> <b>ERRORS</b></h4><pre>
       Hey! <b>The</b> <b>above</b> <b>document</b> <b>had</b> <b>some</b> <b>coding</b> <b>errors,</b> <b>which</b> <b>are</b> <b>explained</b> <b>below:</b>

       Around line 196:
           =over should be: '=over' or '=over positive_number'

perl v5.40.0                                       2024-12-22                          <u>Media::Convert::<a href="../man3pm/Pipe.3pm.html">Pipe</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>