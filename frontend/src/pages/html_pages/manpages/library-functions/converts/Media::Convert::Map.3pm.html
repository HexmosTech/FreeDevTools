<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media::Convert::Map - Map streams and/or channels from an input asset into an output</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmedia-convert-perl">libmedia-convert-perl_1.4.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Media::Convert::Map - Map streams and/or channels from an input asset into an output

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Media::Convert::Asset;
         use Media::Convert::Map;
         use Media::Convert::Pipe;

         my $input_video = Media::Convert::Asset-&gt;new(url =&gt; $input_with_video);
         my $input_audio = Media::Convert::Asset-&gt;new(url =&gt; $input_with_two_stereo_audio_streams);
         my $output = Media::Convert::Asset-&gt;new(url =&gt; $output_filename);

         # Merge the video from $input_video with the first audio stream from
         # $input_audio:
         my $map_video = Media::Convert::Map-&gt;new(input =&gt; $input_video, type =&gt; "stream", choice =&gt; "video");
         my $map_audio = Media::Convert::Map-&gt;new(input =&gt; $input_audio, type =&gt; "stream", choice =&gt; "audio");
         Media::Convert::Pipe-&gt;new(input =&gt; [$input_video, $input_audio], map =&gt; [$map_video, $map_audio], output =&gt; $output, vcopy =&gt; 1, acopy =&gt; 1)-&gt;run;

         # or, extract only the first audio stream:
         Media::Convert::Pipe-&gt;new(input =&gt; [$input_audio], map =&gt; [$map_audio], output =&gt; $output, acopy =&gt; 1, vskip =&gt; 1)-&gt;run;

         # or, extract the second audio stream:
         my $map_2nd_audio = Media::Convert::Map-&gt;new(input =&gt; $input_audio, type =&gt; "astream", choice =&gt; "2");
         Media::Convert::Pipe-&gt;new(input =&gt; [$input_audio], map =&gt; [$map_2nd_audio], output =&gt; $output, vskip =&gt; 1, acopy =&gt; 1);

         # or, extract only the left audio channel from the first audio stream
         # into a mono audio asset:
         my $map_left_audio = Media::Convert::Map-&gt;new(input =&gt; $input_audio, type =&gt; "channel", choice =&gt; "left");
         Media::Convert::Pipe-&gt;new(input =&gt; [$input_audio], map =&gt; [$map_left_audio], output =&gt; $output, vskip =&gt; 1, acopy =&gt; 1);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Media::Convert::Map is a helper object used to configure a Media::Asset::Pipe to route various audio or
       video streams and channels into particular locations.

       It has three options: "input", which must be the Media::Convert::Asset from which we want to map a stream
       or channel; "type", which selects the type of routing to configure, and "choice", which selects which
       input stream or channel to use from the selected type.

       The values for "type" and "choice" work together; the values of "type" define what the valid values of
       "choice" are.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>input</b>
       The asset from which we are reading data. <u>Must</u> be passed to the same "Media::Convert::Pipe" as one of the
       elements in the input array.

   <b>type</b>
       The type of map that is being created. Must be one these options:

       <u>channel</u>

       Selects an audio channel from the first audio stream in the file, or mixes the first two audio channels
       from the first audio stream into one mono stream in the output file.

       This value is the default.

       Valid values for "choice" when this type is selected, are:

       left
           Select the left channel in the first audio stream (assuming it is a stereo stream)

       right
           Select the right channel in the first audio stream

       both
           Use  "-ac  1" to perform a downmix of all audio channels in the first audio stream into a single mono
           channel.

       <u>stream</u>

       Selects either the first audio or the first video stream in the file

       Valid values for "choice" when this type is selected, are:

       audio
           Select the first audio stream from the input file

       video
           Select the first video stream from the input file

       <u>astream</u>

       Selects a specific audio stream from the file, or allows to merge the first  two  audio  streams  into  a
       single audio stream, using the "amix" ffmpeg filter.

       Valid values for "choice" when this type is selected, are:

       -1  Use the "amix" ffmpeg filter to downmix the first two audio streams from the file into a single audio
           stream.

       any other number
           Select the Nth audio stream from the input file, where N is the number given.

           It  is an error to choose an audio stream with an index that is higher than the total number of audio
           streams in the input file. To discover the number of audio streams in a file, use the "astream_count"
           in Media::Convert::Asset method.

       <u>allcopy</u>

       Copy all streams.

       The default behavior of ffmpeg is to copy only the first audio stream, the first video  stream,  and  the
       first subtitle stream, from the input file into the output file.

       When  this  is not wanted, a Media::Convert::Map object of type "allcopy" will copy <u>all</u> streams, not just
       the first of each type, into the output file.

       If this option is chosen, no choice value should be selected (any value given is ignored).

       <u>none</u>

       No routing is done. This has  the  same  effect  as  not  passing  any  "Media::Convert::Map"  object  to
       "Media::Convert::Pipe".

perl v5.40.0                                       2024-12-22                           <u>Media::Convert::<a href="../man3pm/Map.3pm.html">Map</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>