<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ost::MappedFile - Create and map a disk file into memory.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libcommoncpp2-doc">libcommoncpp2-doc_1.8.1-10_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ost::MappedFile - Create and map a disk file into memory.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;file.h&gt;

       Inherits <b>ost::RandomFile</b>.

   <b>Public</b> <b>Member</b> <b>Functions</b>
       <b>MappedFile</b> (const char *fname, <b>Access</b> mode)
           Open a file for mapping.
       <b>MappedFile</b> (const char *fname, <b>Access</b> mode, size_t size)
           Create if not exists, and map a file of specified size into memory.
       <b>MappedFile</b> (const char *fname, <b>pos_t</b> offset, size_t size, <b>Access</b> mode)
           Map a portion or all of a specified file in the specified shared memory access mode.
       virtual <b>~MappedFile</b> ()
           Release a mapped section of memory associated with a file.
       void <b>sync</b> (void)
           Synchronize the contents of the mapped portion of memory with the disk file and wait for completion.
       void <b>sync</b> (caddr_t address, size_t len)
           Synchronize a segment of memory mapped from a segment fetch.
       void <b>update</b> (size_t offset=0, size_t len=0)
           Map a portion of the memory mapped from the file back to the file and do not wait for completion.
       void <b>update</b> (caddr_t address, size_t len)
           Update a mapped region back to disk as specified by address and length.
       void <b>release</b> (caddr_t address, size_t len)
           Release (unmap) a memory segment.
       caddr_t <b>fetch</b> (size_t offset=0)
           Fetch a pointer to an offset within the memory mapped portion of the disk file.
       caddr_t <b>fetch</b> (off_t pos, size_t len)
           Fetch and map a portion of a disk file to a logical memory block.
       bool <b>lock</b> (void)
           Lock the currently mapped portion of a file.
       void <b>unlock</b> (void)
           Unlock a locked mapped portion of a file.
       size_t <b>pageAligned</b> (size_t size)
           Compute map size to aligned page boundry.

   <b>Additional</b> <b>Inherited</b> <b>Members</b>
</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Create and map a disk file into memory.

       This portable class works under both Posix via mmap and under the win32 API. A mapped file can be
       referenced directly by it's memory segment. One can map and unmap portions of a file on demand, and
       update changed memory pages mapped from files immediately through <b>sync()</b>.

       <b>Author</b>
           David Sugar <a href="mailto:dyfet@ostel.com">dyfet@ostel.com</a>

       Map a named disk file into memory.

</pre><h4><b>Constructor</b> <b>&amp;</b> <b>Destructor</b> <b>Documentation</b></h4><pre>
   <b>ost::MappedFile::MappedFile</b> <b>(const</b> <b>char</b> <b>*</b> <b>fname,</b> <b>Access</b> <b>mode)</b>
       Open a file for mapping. More than one segment of a file may be mapped into separate regions of memory.

       <b>Parameters</b>
           <u>fname</u> file name to access for mapping.
           <u>mode</u> access mode to map file.

   <b>ost::MappedFile::MappedFile</b> <b>(const</b> <b>char</b> <b>*</b> <b>fname,</b> <b>Access</b> <b>mode,</b> <b>size_t</b> <b>size)</b>
       Create if not exists, and map a file of specified size into memory.

       <b>Parameters</b>
           <u>fname</u> file name to access for mapping.
           <u>mode</u> access mode to map file.
           <u>size</u> of file to map.

   <b>ost::MappedFile::MappedFile</b> <b>(const</b> <b>char</b> <b>*</b> <b>fname,</b> <b>pos_t</b> <b>offset,</b> <b>size_t</b> <b>size,</b> <b>Access</b> <b>mode)</b>
       Map a portion or all of a specified file in the specified shared memory access mode. Valid mapping modes
       include mappedRead, mappedWrite, and mappedReadWrite.

       <b>Parameters</b>
           <u>fname</u> pathname of file to map into memory.
           <u>offset</u> from start of file to begin mapping in bytes.
           <u>size</u> of mapped area in bytes.
           <u>mode</u> to map file.

   <b>virtual</b> <b>ost::MappedFile::~MappedFile</b> <b>()</b> <b>[virtual]</b>
       Release a mapped section of memory associated with a file. The mapped area is updated back to disk.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>caddr_t</b> <b>ost::MappedFile::fetch</b> <b>(off_t</b> <b>pos,</b> <b>size_t</b> <b>len)</b>
       Fetch and map a portion of a disk file to a logical memory block.

       <b>Returns</b>
           pointer to memory segment.

       <b>Parameters</b>
           <u>pos</u> offset of file segment to map.
           <u>len</u> size of memory segment to map.

   <b>caddr_t</b> <b>ost::MappedFile::fetch</b> <b>(size_t</b> <b>offset</b> <b>=</b> <b>0)</b> <b>[inline]</b>
       Fetch a pointer to an offset within the memory mapped portion of the disk file. This really is used for
       convience of matching operations between Update and Fetch, as one could simply have accessed the base
       pointer where the file was mapped directly.

       <b>Parameters</b>
           <u>offset</u> from start of mapped memory.

   <b>bool</b> <b>ost::MappedFile::lock</b> <b>(void)</b>
       Lock the currently mapped portion of a file.

       <b>Returns</b>
           true if pages are locked.

   <b>size_t</b> <b>ost::MappedFile::pageAligned</b> <b>(size_t</b> <b>size)</b>
       Compute map size to aligned page boundry.

       <b>Parameters</b>
           <u>size</u> request.

       <b>Returns</b>
           page aligned size.

   <b>void</b> <b>ost::MappedFile::release</b> <b>(caddr_t</b> <b>address,</b> <b>size_t</b> <b>len)</b>
       Release (unmap) a memory segment.

       <b>Parameters</b>
           <u>address</u> address of memory segment to release.
           <u>len</u> length of memory segment to release.

   <b>void</b> <b>ost::MappedFile::sync</b> <b>(caddr_t</b> <b>address,</b> <b>size_t</b> <b>len)</b>
       Synchronize a segment of memory mapped from a segment fetch.

       <b>Parameters</b>
           <u>address</u> memory address to update.
           <u>len</u> size of segment.

   <b>void</b> <b>ost::MappedFile::sync</b> <b>(void)</b>
       Synchronize the contents of the mapped portion of memory with the disk file and wait for completion. This
       assures the memory mapped from the file is written back.

   <b>void</b> <b>ost::MappedFile::unlock</b> <b>(void)</b>
       Unlock a locked mapped portion of a file.

   <b>void</b> <b>ost::MappedFile::update</b> <b>(caddr_t</b> <b>address,</b> <b>size_t</b> <b>len)</b>
       Update a mapped region back to disk as specified by address and length.

       <b>Parameters</b>
           <u>address</u> address of segment.
           <u>len</u> length of segment.

   <b>void</b> <b>ost::MappedFile::update</b> <b>(size_t</b> <b>offset</b> <b>=</b> <b>0,</b> <b>size_t</b> <b>len</b> <b>=</b> <b>0)</b>
       Map a portion of the memory mapped from the file back to the file and do not wait for completion. This is
       useful when mapping a database file and updating a single record.

       <b>Parameters</b>
           <u>offset</u> offset into the mapped region of memory.
           <u>len</u> length of partial region (example, record length).

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for GNU CommonC++ from the source code.

GNU CommonC++                                    Sun Dec 27 2020                              <u>ost::<a href="../man3/MappedFile.3.html">MappedFile</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>