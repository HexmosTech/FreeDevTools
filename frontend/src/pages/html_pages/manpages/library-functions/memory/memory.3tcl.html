<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>memory - Control Tcl memory debugging capabilities</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       memory - Control Tcl memory debugging capabilities

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>memory</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>memory</b>  command  gives the Tcl developer control of Tcl's memory debugging capabilities.  The memory
       command has several suboptions, which are described below.  It  is  only  available  when  Tcl  has  been
       compiled  with  memory  debugging  enabled  (when  <b>TCL_MEM_DEBUG</b>  is  defined at compile time), and after
       <b>Tcl_InitMemory</b> has been called.

       <b>memory</b> <b>active</b> <u>file</u>
              Write a list of all currently allocated memory to the specified <u>file</u>.

       <b>memory</b> <b>break_on_malloc</b> <u>count</u>
              After the <u>count</u> allocations have been performed, <b>Tcl_Alloc</b> outputs a message to  this  effect  and
              that  it  is  now attempting to enter the C debugger.  Tcl will then issue a <u>SIGINT</u> signal against
              itself.  If you are running Tcl under a C debugger, it should  then  enter  the  debugger  command
              mode.

       <b>memory</b> <b>info</b>
              Returns  a  report containing the total allocations and frees since Tcl began, the current packets
              allocated (the current number of calls to <b>Tcl_Alloc</b> not met by a corresponding call to  <b>Tcl_Free</b>),
              the current bytes allocated, and the maximum number of packets and bytes allocated.

       <b>memory</b> <b>init</b> [<b>on</b>|<b>off</b>]
              Turn  on  or  off  the  preinitialization  of  all  allocated memory with bogus bytes.  Useful for
              detecting the use of uninitialized values.

       <b>memory</b> <b>objs</b> <u>file</u>
              Causes a list of all allocated Tcl_Obj values to be written to  the  specified  <u>file</u>  immediately,
              together with where they were allocated.  Useful for checking for leaks of values.

       <b>memory</b> <b>onexit</b> <u>file</u>
              Causes  a list of all allocated memory to be written to the specified <u>file</u> during the finalization
              of Tcl's memory subsystem.  Useful for checking that memory is properly cleaned up during  process
              exit.

       <b>memory</b> <b>tag</b> <u>string</u>
              Each  packet of memory allocated by <b>Tcl_Alloc</b> can have associated with it a string-valued tag.  In
              the lists of allocated memory generated by <b>memory</b> <b>active</b> and  <b>memory</b>  <b>onexit</b>,  the  tag  for  each
              packet  is printed along with other information about the packet.  The <b>memory</b> <b>tag</b> command sets the
              tag value for subsequent calls to <b>Tcl_Alloc</b> to be <u>string</u>.

       <b>memory</b> <b>trace</b> [<b>on</b>|<b>off</b>]
              Turns memory tracing on or off.  When memory tracing is on, every call to <b>Tcl_Alloc</b> causes a  line
              of  trace  information  to be written to <u>stderr</u>, consisting of the word <u>Tcl_Alloc</u>, followed by the
              address returned, the amount of memory allocated, and the C filename and line number of  the  code
              performing the allocation.  For example:

                     Tcl_Alloc 40e478 98 tclProc.c 1406

              Calls to <b>Tcl_Free</b> are traced in the same manner.

       <b>memory</b> <b>trace_on_at_malloc</b> <u>count</u>
              Enable  memory  tracing  after  <u>count</u>  <b>Tcl_Alloc</b>s  have been performed.  For example, if you enter
              <b>memory</b> <b>trace_on_at_malloc</b> <b>100</b>, after the 100th call to <b>Tcl_Alloc</b>, memory  trace  information  will
              begin  being displayed for all allocations and frees.  Since there can be a lot of memory activity
              before a problem occurs, judicious use of this option can reduce the slowdown  caused  by  tracing
              (and  the  amount of trace information produced), if you can identify a number of allocations that
              occur before the problem sets in.  The current number of memory  allocations  that  have  occurred
              since Tcl started is printed on a guard zone failure.

       <b>memory</b> <b>validate</b> [<b>on</b>|<b>off</b>]
              Turns  memory  validation on or off. When memory validation is enabled, on every call to <b>Tcl_Alloc</b>
              or <b>Tcl_Free</b>, the guard zones are checked for every piece of memory currently in existence that was
              allocated by <b>Tcl_Alloc</b>.  This has a  large  performance  impact  and  should  only  be  used  when
              overwrite  problems are strongly suspected.  The advantage of enabling memory validation is that a
              guard zone overwrite can be detected on  the  first  call  to  <b>Tcl_Alloc</b>  or  <b>Tcl_Free</b>  after  the
              overwrite  occurred,  rather  than  when the specific memory with the overwritten guard zone(s) is
              freed, which may occur long after the overwrite occurred.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Tcl_Alloc, Tcl_Free, Tcl_ValidateAllMemory, Tcl_DumpActiveMemory, TCL_MEM_DEBUG

</pre><h4><b>KEYWORDS</b></h4><pre>
       memory, debug

Tcl                                                    8.1                                          <u><a href="../man3tcl/memory.3tcl.html">memory</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>