<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zt_check, zt_assert — verify a test claim</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libzt-doc">libzt-doc_0.3.1-4build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zt_check, zt_assert — verify a test claim

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;zt.h&gt;</b>

       <u>void</u>
       <b>zt_check</b>(<u>zt_t</u> <u>t</u>, <u>zt_claim</u> <u>claim</u>);

       <u>void</u>
       <b>zt_assert</b>(<u>zt_t</u> <u>t</u>, <u>zt_claim</u> <u>claim</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Both  <b>zt_check</b>()  and <b>zt_assert</b>() verify a claim, encompassing a function with arguments, and is meant to
       be used inside test functions.

       The first argument is a pointer to opaque type  encapsulating  test  outcome.   The  second  argument  is
       usually constructed with a helper macro, such as <b>ZT_CMP_TRUE</b>() or <b>ZT_CMP_FALSE</b>().

       If  the  claim  holds then happens and execution continues normally.  If the claim does not hold then the
       test is marked as failed and a diagnostic message is printed to <u>stderr</u>.

       The only difference between <b>zt_check</b>() and <b>zt_assert</b>() is that the former allows  the  test  to  continue
       executing while the latter performs a non-local exit from the test function. Note that only the currently
       executing test function is affected. Other tests cases and test suites will still execute normally.

       <b>zt_check</b>() should be used when it is safe to execute remainder of the test even if the claim is not true.
       This  approach  allows  each  failure to be accompanied by as much diagnostic output as possible, without
       causing the test program to crash.

       <b>zt_assert</b>() should be used when it is not safe or  meaningless  to  execute  remainder  of  the  test  on
       failure.

</pre><h4><b>IMPLEMENTATION</b> <b>NOTES</b></h4><pre>
       Non-local exit from <b>zt_assert</b>() is implemented using <b>siglongjump</b>().  One should not depend on neither C++
       destructors nor the GCC cleanup function extension for correct resource management.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Neither  function  return anything. Failures are remembered inside the opaque <b>zt_test</b> structure passed by
       pointer (aka <b>zt_t</b>) as the first argument.

</pre><h4><b>EXAMPLES</b></h4><pre>
       A minimal test program that looks up the UNIX user <u>root</u> and measures several properties of  the  returned
       record.

             #include &lt;sys/types.h&gt;
             #include &lt;<a href="file:/usr/include/pwd.h">pwd.h</a>&gt;

             #include &lt;zt.h&gt;

             static void test_root_user(zt_t t) {
                 struct passwd *p = getpwnam("root");
                 zt_assert(t, ZT_NOT_NULL(p));
                 zt_check(t, ZT_CMP_CSTR(p-&gt;pw_name, ==, "root"));
                 zt_check(t, ZT_CMP_INT(p-&gt;pw_uid, ==, 0));
                 zt_check(t, ZT_CMP_INT(p-&gt;pw_gid, ==, 0));
             }

             static void test_suite(zt_visitor v) {
                 ZT_VISIT_TEST_CASE(v, test_root_user);
             }

             int main(int argc, char** argv, char** envp) {
                 return zt_main(argc, argv, envp, test_suite);
             }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/ZT_CMP_BOOL.3.html">ZT_CMP_BOOL</a></u>(3),    <u><a href="../man3/ZT_CMP_CSTR.3.html">ZT_CMP_CSTR</a></u>(3),    <u><a href="../man3/ZT_CMP_INT.3.html">ZT_CMP_INT</a></u>(3),    <u><a href="../man3/ZT_CMP_PTR.3.html">ZT_CMP_PTR</a></u>(3),    <u><a href="../man3/ZT_CMP_UINT.3.html">ZT_CMP_UINT</a></u>(3),    <u><a href="../man3/ZT_FALSE.3.html">ZT_FALSE</a></u>(3),
       <u><a href="../man3/ZT_NOT_NULL.3.html">ZT_NOT_NULL</a></u>(3), <u><a href="../man3/ZT_NULL.3.html">ZT_NULL</a></u>(3), <u><a href="../man3/ZT_TRUE.3.html">ZT_TRUE</a></u>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>zt_check</b>() and the <b>zt_assert</b>() functions first appeared in libzt 0.1

</pre><h4><b>AUTHORS</b></h4><pre>
       Zygmunt Krynicki &lt;<u><a href="mailto:me@zygoon.pl">me@zygoon.pl</a></u>&gt;

libzt 0.3.1                                     January 12, 2020                                     <u><a href="../man3/ZT_CHECK.3.html">ZT_CHECK</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>