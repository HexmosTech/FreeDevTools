<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Normalize::Text::Music_Fields - normalize names of people's and (musical) works.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmp3-tag-perl">libmp3-tag-perl_1.16-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Normalize::Text::Music_Fields - normalize names of people's and (musical) works.

</pre><h4><b>SYNOPSIS</b></h4><pre>
          $name = $obj-&gt;Normalize::Text::Music_Fields::normalize_person($name);
          $work = $obj-&gt;Normalize::Text::Music_Fields::normalize_piece($work);
        # $obj should have methods `name_for_field_normalization', 'shorted_person'

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Databases of names and of works-per-name are taken from plain-text files (optionally in mail-header
       format).  Names are stored in <u>*.lst</u> files.  Works are stored in <u>.comp</u> files named after the shortened
       name of the composer.

       The directories of these files are looked in the environment variable "MUSIC_FIELDS_PATH" (if defined,
       split the same way as "PATH"), or in "$ENV{HOME}/.music_fields", and "-" (and "-" is replaced by the
       directory named as the module file with <u>.pm</u> dropped).  At runtime, one can replace the list by calling
       function <b>Normalize::Text::Music_Fields::set_path()</b> with the list of directories as the argument.

       (Since parsed files are cached, replacing the directory list should be done as early as possible.)

       Files may be managed with utility subroutines provided with the module:

        # Translate from one-per-line to mail-header format:
        perl -wple "BEGIN {print q(# format = mail-header)} s/#\s*normalized\s*$//; $_ = qq(Title: $_) unless /^\s*(#|$)/; $_ = qq(\n$_) if $p and not /^##/; $_ .= qq(\n) unless $p = /^##/" Normalize::Text::Music_Fields-G_Gershwin.comp &gt;Music_Fields-G_Gershwin.comp-mail

        # (inverse transformation:) Dump pieces listed in mail-header format
        perl -MNormalize::Text::Music_Fields -wle "print for Normalize::Text::Music_Fields::read_composer_file(shift, shift)" gershwin Music_Fields-G_Gershwin.comp-mail &gt; o

        # Normalize data in 1-line-per piece format
        perl -MNormalize::Text::Music_Fields -wle "Normalize::Text::Music_Fields::prepare_tag_object_comp(shift)-&gt;Normalize::Text::Music_Fields::normalize_file_lines(shift)"

        # Create a mail-header file from a semi-processed (with "bold" fields)
        # mail-header file (with xml escapes, preceded by opus number)
        perl -MNormalize::Text::Music_Fields -00wnle "BEGIN {$tag = Normalize::Text::Music_Fields::prepare_tag_object_comp(shift @ARGV); print q(# format = mail-header)} print Normalize::Text::Music_Fields::emit_as_mail_header($tag,$_, q(bold,xml,opus),$pre)" shostakovich  o-xslt-better &gt;Music_Fields-D_Shostakovich.comp-mail1

        # Likewise, from work-per-line with opus-numbers:
        perl -MNormalize::Text::Music_Fields -wnle "BEGIN {$tag = Normalize::Text::Music_Fields::prepare_tag_object_comp(shift @ARGV); print qq(# format = mail-header\n)} print Normalize::Text::Music_Fields::emit_as_mail_header($tag,$_, q(opus), $pre)" schnittke  o-schnittke-better  &gt;Music_Fields-A_Schnittke.comp-mail2

        # A primitive tool for merging additional info into the database:
        perl -MNormalize::Text::Music_Fields -wnle "BEGIN {$tag = Normalize::Text::Music_Fields::prepare_tag_object_comp(shift @ARGV); print qq(# format = mail-header\n)} next unless s/^\s*\+\+\s*//; print Normalize::Text::Music_Fields::merge_info($tag,$_, q(opus,xml), qr(^(58|70|76|116|118|119)($|-)))" brahms o-brahms-op-no1-xslt

        # Minimal consistency check of persons database.
        perl -MNormalize::Text::Music_Fields -wle "BEGIN{binmode $_, ':encoding(cp866)' for \*STDIN, \*STDOUT, \*STDERR} print Normalize::Text::Music_Fields-&gt;check_persons"

        # Minimal testing code:
        perl -MNormalize::Text::Music_Fields -e Normalize::Text::Music_Fields::test_normalize_piece

       It may be easier to type these examples if one uses "manage_M_N_F.pm", which exports the mentioned
       subroutines to the main namespace (available in <u>examples</u> directory of a distribution of "MP3::Tag").
       E.g., the last example becomes:

        perl -Mmanage_M_N_F -e test_normalize_piece

perl v5.36.0                                       2022-12-30                 <u>Normalize::Text::<a href="../man3pm/Music_Fields.3pm.html">Music_Fields</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>