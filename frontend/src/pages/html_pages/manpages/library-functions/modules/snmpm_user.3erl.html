<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>snmpm_user - Behaviour module for the SNMP manager user.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       snmpm_user - Behaviour module for the SNMP manager user.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  module  defines  the  behaviour  of the manager user. A <u>snmpm_user</u> compliant module must export the
       following functions:

         * handle_error/3

         * handle_agent/4

         * handle_pdu/4

         * handle_trap/3

         * handle_inform/3

         * handle_report/3

         * handle_invalid_result/2

       The semantics of them and their exact signatures are explained below.

       Some of the function has no defined return value (<u>void()</u>), they can of course return  anything.  But  the
       functions  that do have specified return value(s) <u>must</u> adhere to this. None of the functions can use exit
       of throw to return.

       If the manager is not configured to use any particular transport  domain,  the  behaviour  <u>handle_agent/4</u>
       will for backwards copmpatibility reasons be called with the old <u>IpAddr</u> and <u>PortNumber</u> arguments

</pre><h4><b>DATA</b> <b>TYPES</b></h4><pre>
       snmp_gen_info() = {ErrorStatus :: atom(),
                          ErrorIndex  :: pos_integer(),
                          Varbinds    :: [snmp:varbind()]}
       snmp_v1_trap_info() :: {Enteprise :: snmp:oid(),
                               Generic   :: integer(),
                               Spec      :: integer(),
                               Timestamp :: integer(),
                               Varbinds  :: [snmp:varbind()]}

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>handle_error(ReqId,</b> <b>Reason,</b> <b>UserData)</b> <b>-&gt;</b> <b>void()</b>

              Types:

                 ReqId = netif | integer()
                 Reason  =  {unexpected_pdu, SnmpInfo} | {invalid_sec_info, SecInfo, SnmpInfo} | {empty_message,
                 Addr, Port} | term()
                 SnmpInfo = snmp_gen_info()
                 SecInfo = term()
                 Addr = ip_address()
                 Port = integer()
                 UserData = term()

              This function is called when the manager needs to communicate an "asynchronous" error to the user:
              e.g. failure to send an asynchronous  message  (i.e.  encoding  error),  a  received  message  was
              discarded  due  to security error, the manager failed to generate a response message to a received
              inform-request, or when receiving an unexpected PDU from an  agent  (could  be  an  expired  async
              request).

              If  <u>ReqId</u>  is  less  then 0, it means that this information was not available to the manager (that
              info was never retrieved before the message was discarded).

              For <u>SnmpInfo</u> see handle_agent below.

              Note that there is a special case when the value of <u>ReqId</u> has the value of the  atom  <u>netif</u>.  This
              means  that  the NetIF process has suffered a "fatal" error and been restarted. With possible loss
              of traffic!

       <b>handle_agent(Domain,</b> <b>Addr,</b> <b>Type,</b> <b>SnmpInfo,</b> <b>UserData)</b> <b>-&gt;</b> <b>Reply</b>

              Types:

                 Domain = transportDomainUdpIpv4 | transportDomainUdpIpv6
                 Addr = {inet:ip_address(), inet:port_number()}
                 Type = pdu | trap | report | inform
                 SnmpInfo = SnmpPduInfo | SnmpTrapInfo | SnmpReportInfo | SnmpInformInfo
                 SnmpPduInfo = snmp_gen_info()
                 SnmpTrapInfo = snmp_v1_trap_info()
                 SnmpReportInfo = snmp_gen_info()
                 SnmpInformInfo = snmp_gen_info()
                 UserData = term()
                 Reply = ignore | {register, UserId, TargetName, AgentConfig}
                 UserId = term()
                 TargetName = target_name()
                 AgentConfig = [agent_config()]

              This function is called when a message is received from an unknown agent.

              Note that this will always be the default user that is called.

              For more info about the <u>agent_config()</u>, see register_agent.

              The arguments <u>Type</u> and <u>SnmpInfo</u> relates in the following way:

                * <u>pdu</u> - <u>SnmpPduInfo</u> (see handle_pdu for more info).

                * <u>trap</u> - <u>SnmpTrapInfo</u> (see handle_trap for more info).

                * <u>report</u> - <u>SnmpReportInfo</u> (see handle_report for more info).

                * <u>inform</u> - <u>SnmpInformInfo</u> (see handle_inform for more info).

              The only user which would return <u>{register,</u> <u>UserId,</u> <u>TargetName,</u> <u>AgentConfig}</u> is the <u>default</u> <u>user</u>.

       <b>handle_pdu(TargetName,</b> <b>ReqId,</b> <b>SnmpPduInfo,</b> <b>UserData)</b> <b>-&gt;</b> <b>void()</b>

              Types:

                 TargetName = target_name()
                 ReqId = term()
                 SnmpPduInfo = snmp_gen_info()
                 UserData = term()

              Handle the reply to an asynchronous request, such as async_get, async_get_next or async_set.

              It could also be a late reply to a synchronous request.

              <u>ReqId</u> is returned by the asynchronous request function.

       <b>handle_trap(TargetName,</b> <b>SnmpTrapInfo,</b> <b>UserData)</b> <b>-&gt;</b> <b>Reply</b>

              Types:

                 TargetName = TargetName2 = target_name()
                 SnmpTrapInfo = snmp_v1_trap_info() | snmp_gen_info()
                 UserData = term()
                 Reply = ignore | unregister | {register, UserId, TargetName2, AgentConfig}
                 UserId = term()
                 AgentConfig = [agent_config()]

              Handle a trap/notification message from an agent.

              For more info about the <u>agent_config()</u>, see register_agent

              The only user which would return <u>{register,</u> <u>UserId,</u>  <u>TargetName2,</u>  <u>agent_info()}</u>  is  the  <u>default</u>
              <u>user</u>.

       <b>handle_inform(TargetName,</b> <b>SnmpInformInfo,</b> <b>UserData)</b> <b>-&gt;</b> <b>Reply</b>

              Types:

                 TargetName = TargetName2 = target_name()
                 SnmpInformInfo = snmp_gen_info()
                 UserData = term()
                 Reply = ignore | no_reply | unregister | {register, UserId, TargetName2, AgentConfig}
                 UserId = term()
                 AgentConfig = [agent_config()]

              Handle a inform message.

              For more info about the <u>agent_config()</u>, see register_agent

              The only user which would return <u>{register,</u> <u>UserId,</u> <u>TargetName2,</u> <u>AgentConfig}</u> is the <u>default</u> <u>user</u>.

              If  the  inform  request  behaviour  configuration option is set to <u>user</u> or <u>{user,</u> <u>integer()}</u>, the
              response (acknowledgment) to this inform-request will be sent when this function returns.

       <b>handle_report(TargetName,</b> <b>SnmpReportInfo,</b> <b>UserData)</b> <b>-&gt;</b> <b>Reply</b>

              Types:

                 TargetName = TargetName2 = target_name()
                 Addr = ip_address()
                 Port = integer()
                 SnmpReportInfo = snmp_gen_info()
                 UserData = term()
                 Reply = ignore | unregister | {register, UserId, TargetName2, AgentConfig}
                 UserId = term()
                 AgentConfig = [agent_config()]

              Handle a report message.

              For more info about the <u>agent_config()</u>, see register_agent

              The only user which would return <u>{register,</u> <u>UserId,</u> <u>TargetName2,</u> <u>AgentConfig}</u> is the <u>default</u> <u>user</u>.

       <b>handle_invalid_result(IN,</b> <b>OUT)</b> <b>-&gt;</b> <b>void()</b>

              Types:

                 IN = {Func, Args}
                 Func = atom()
                 Args = list()
                 OUT = {crash, CrashInfo} | {result, InvalidResult}
                 CrashInfo = {ErrorType, Error, Stacktrace}
                 ErrorType = atom()
                 Error = term()
                 Stacktrace = list()
                 InvalidResult = term()

              If <u>any</u> of the <u>other</u> callback functions crashes (exit, throw or a plain crash) or return an invalid
              result (if a valid return has been specified), this function is called. The purpose  is  to  allow
              the user handle this error (for instance to issue an error report).

              <u>IN</u>  reprecents  the  function  called  (and  its arguments). <u>OUT</u> represents the unexpected/invalid
              result.

Ericsson AB                                         snmp 5.11                                   <u><a href="../man3erl/snmpm_user.3erl.html">snmpm_user</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>