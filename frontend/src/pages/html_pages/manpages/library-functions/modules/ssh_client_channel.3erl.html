<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ssh_client_channel - -behaviour(ssh_client_channel). (Replaces ssh_channel)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ssh_client_channel - -behaviour(ssh_client_channel). (Replaces ssh_channel)

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>Note:</b>
       This module replaces ssh_channel.

       The  old  module  is  still available for compatibility, but should not be used for new programs. The old
       module will not be maintained except for some error corrections

       SSH services (clients and servers)  are  implemented  as  channels  that  are  multiplexed  over  an  SSH
       connection  and  communicates over the  SSH Connection Protocol. This module provides a callback API that
       takes care of generic channel aspects for clients, such as flow control and close messages. It  lets  the
       callback functions take care of the service (application) specific parts. This behavior also ensures that
       the  channel  process honors the principal of an OTP-process so that it can be part of a supervisor tree.
       This is a requirement of channel processes implementing a  subsystem  that  will  be  added  to  the  <u>ssh</u>
       applications supervisor tree.

   <b>Note:</b>
       When   implementing   a   <u>ssh</u>   subsystem   for  daemons,  use  -behaviour(ssh_server_channel)  (Replaces
       ssh_daemon_channel) instead.

   <b>Dont:</b>
       Functions in this module are not supposed to be called outside a module implementing this behaviour!

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>call(ChannelRef,</b> <b>Msg)</b> <b>-&gt;</b>
       <b>call(ChannelRef,</b> <b>Msg,</b> <b>Timeout)</b> <b>-&gt;</b> <b>Reply</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 ChannelRef = pid()
                   As returned by start_link/4
                 Msg = term()
                 Timeout = timeout()
                 Reply = term()
                 Reason = closed | timeout

              Makes a synchronous call to the channel process by sending a message and  waiting  until  a  reply
              arrives,  or  a  time-out occurs. The channel calls Module:handle_call/3 to handle the message. If
              the channel process does not exist, <u>{error,</u> <u>closed}</u> is returned.

       <b>cast(ChannelRef,</b> <b>Msg)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 ChannelRef = pid()
                   As returned by start_link/4
                 Msg = term()

              Sends an asynchronous message to the channel process and returns ok immediately, ignoring  if  the
              destination  node  or  channel  process  does not exist. The channel calls Module:handle_cast/2 to
              handle the message.

       <b>enter_loop(State)</b> <b>-&gt;</b> <b>_</b>

              Types:

                 State = term()
                   as returned by init/1

              Makes an existing process an <u>ssh_client_channel</u> (replaces ssh_channel) process. Does  not  return,
              instead  the  calling process enters the <u>ssh_client_channel</u> (replaces ssh_channel) process receive
              loop and become an <u>ssh_client_channel</u> process. The process must have been started using one of the
              start functions in <u>proc_lib</u>, see the <a href="../man3erl/proc_lib.3erl.html">proc_lib</a>(3erl) manual page in STDLIB. The user is responsible
              for any initialization of the process and must call init/1.

       <b>init(Options)</b> <b>-&gt;</b> <b>{ok,</b> <b>State}</b> <b>|</b> <b>{ok,</b> <b>State,</b> <b>Timeout}</b> <b>|</b> <b>{stop,</b> <b>Reason}</b>

              Types:

                 Options = [{Option, Value}]
                 State = term()
                 Timeout = timeout()
                 Reason = term()

              The following options must be present:

                <u>{channel_cb,</u> <u>atom()}</u>:
                  The module that implements the channel behaviour.

                <u>{init_args(),</u> <u>list()}</u>:
                  The list of arguments to the <u>init</u> function of the callback module.

                <u>{cm,</u> ssh:connection_ref()<u>}</u>:
                  Reference to the <u>ssh</u> connection as returned by ssh:connect/3.

                <u>{channel_id,</u> ssh:channel_id()<u>}</u>:
                  Id of the <u>ssh</u> channel as returned by ssh_connection:session_channel/2,4.

          <b>Note:</b>
              This function is normally not called by the user. The user only  needs  to  call  if  the  channel
              process needs to be started with help of <u>proc_lib</u> instead of calling <u>start/4</u> or <u>start_link/4</u>.

       <b>reply(Client,</b> <b>Reply)</b> <b>-&gt;</b> <b>_</b>

              Types:

                 Client = opaque()
                 Reply = term()

              This function can be used by a channel to send a reply to a client that called <u>call/[2,3]</u> when the
              reply cannot be defined in the return value of Module:handle_call/3.

              <u>Client</u>  must  be  the  <u>From</u>  argument provided to the callback function <u>handle_call/3</u>. <u>Reply</u> is an
              arbitrary term, which is given back to the client as the return value of call/[2,3].

       <b>start(SshConnection,</b> <b>ChannelId,</b> <b>ChannelCb,</b> <b>CbInitArgs)</b> <b>-&gt;</b>
       <b>start_link(SshConnection,</b> <b>ChannelId,</b> <b>ChannelCb,</b> <b>CbInitArgs)</b> <b>-&gt;</b> <b>{ok,</b> <b>ChannelRef}</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 SshConnection = ssh:connection_ref()
                   As returned by ssh:connect/3
                 ChannelId = ssh:channel_id()
                   As returned by  ssh_connection:session_channel/[2,4].
                 ChannelCb = atom()
                   Name of the module implementing the service-specific parts of the channel.
                 CbInitArgs = [term()]
                   Argument list for the <u>init</u> function in the callback module.
                 ChannelRef = pid()

              Starts a process that handles an SSH channel. It is called  internally,  by  the  <u>ssh</u>  daemon,  or
              explicitly by the <u>ssh</u> client implementations. The behavior sets the <u>trap_exit</u> flag to <u>true</u>.

</pre><h4><b>CALLBACK</b> <b>FUNCTIONS</b></h4><pre>
       The following functions are to be exported from a <u>ssh_client_channel</u> callback module.

       The  timeout  values  that  can  be  returned  by  the callback functions have the same semantics as in a
       gen_server. If the time-out occurs, handle_msg/2 is called as <u>handle_msg(timeout,</u> <u>State)</u>.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>Module:code_change(OldVsn,</b> <b>State,</b> <b>Extra)</b> <b>-&gt;</b> <b>{ok,</b> <b>NewState}</b>

              Types:

                 OldVsn = term()
                   In the case of an upgrade, <u>OldVsn</u> is  <u>Vsn</u>,  and  in  the  case  of  a  downgrade,  <u>OldVsn</u>  is
                   <u>{down,Vsn}</u>.  <u>Vsn</u> is defined by the <u>vsn</u> attribute(s) of the old version of the callback module
                   <u>Module</u>. If no such attribute is defined, the version is the checksum of the BEAM file.
                 State = term()
                   Internal state of the channel.
                 Extra = term()
                   Passed "as-is" from the <u>{advanced,Extra}</u> part of the update instruction.

              Converts process state when code is changed.

              This function is called by a client-side channel when it is to update its internal state during  a
              release  upgrade  or  downgrade,  that  is, when the instruction <u>{update,Module,Change,...}</u>, where
              <u>Change={advanced,Extra}</u>, is given in the <u>appup</u> file. For more information, refer to Section 9.11.6
              Release Handling Instructions in the System Documentation.

          <b>Note:</b>
              Soft upgrade according to the OTP release concept is not straight forward for the server side,  as
              subsystem  channel  processes are spawned by the <u>ssh</u> application and hence added to its supervisor
              tree. The subsystem channels can be upgraded when upgrading the user application, if the  callback
              functions  can  handle  two  versions of the state, but this function cannot be used in the normal
              way.

       <b>Module:init(Args)</b> <b>-&gt;</b> <b>{ok,</b> <b>State}</b> <b>|</b> <b>{ok,</b> <b>State,</b> <b>timeout()}</b> <b>|</b> <b>{stop,</b> <b>Reason}</b>

              Types:

                 Args = term()
                   Last argument to <u>start_link/4</u>.
                 State = term()
                 Reason = term()

              Makes necessary initializations and returns the  initial  channel  state  if  the  initializations
              succeed.

              For more detailed information on time-outs, see Section Callback timeouts.

       <b>Module:handle_call(Msg,</b> <b>From,</b> <b>State)</b> <b>-&gt;</b> <b>Result</b>

              Types:

                 Msg = term()
                 From = opaque()
                   Is to be used as argument to reply/2
                 State = term()
                 Result = {reply, Reply, NewState} | {reply, Reply, NewState, timeout()} | {noreply, NewState} |
                 {noreply , NewState, timeout()} | {stop, Reason, Reply, NewState} | {stop, Reason, NewState}
                 Reply = term()
                   Will be the return value of call/[2,3]
                 NewState = term()
                 Reason = term()

              Handles messages sent by calling call/[2,3]

              For more detailed information on time-outs,, see Section Callback timeouts.

       <b>Module:handle_cast(Msg,</b> <b>State)</b> <b>-&gt;</b> <b>Result</b>

              Types:

                 Msg = term()
                 State = term()
                 Result = {noreply, NewState} | {noreply, NewState, timeout()} | {stop, Reason, NewState}
                 NewState = term()
                 Reason = term()

              Handles messages sent by calling <u>cast/2</u>.

              For more detailed information on time-outs, see Section Callback timeouts.

       <b>Module:handle_msg(Msg,</b> <b>State)</b> <b>-&gt;</b> <b>{ok,</b> <b>State}</b> <b>|</b> <b>{stop,</b> <b>ChannelId,</b> <b>State}</b>

              Types:

                 Msg = timeout | term()
                 ChannelId = ssh:channel_id()
                 State = term()

              Handles other messages than SSH Connection Protocol, call, or cast messages sent to the channel.

              Possible  Erlang  'EXIT' messages is to be handled by this function and all channels are to handle
              the following message.

                <u>{ssh_channel_up,</u> ssh:channel_id()<u>,</u> ssh:connection_ref()<u>}</u>:
                  This is the first message that the channel  receives.  It  is  sent  just  before  the  init/1
                  function returns successfully. This is especially useful if the server wants to send a message
                  to the client without first receiving a message from it. If the message is not useful for your
                  particular scenario, ignore it by immediately returning <u>{ok,</u> <u>State}</u>.

       <b>Module:handle_ssh_msg(Msg,</b> <b>State)</b> <b>-&gt;</b> <b>{ok,</b> <b>State}</b> <b>|</b> <b>{stop,</b> <b>ChannelId,</b> <b>State}</b>

              Types:

                 Msg = ssh_connection:event()
                 ChannelId = ssh:channel_id()
                 State = term()

              Handles  SSH  Connection  Protocol messages that may need service-specific attention. For details,
              see ssh_connection:event().

              The following message is taken care of by the <u>ssh_client_channel</u> behavior.

                <u>{closed,</u> ssh:channel_id()<u>}</u>:
                  The channel behavior sends a close message to the other  side,  if  such  a  message  has  not
                  already been sent. Then it terminates the channel with reason <u>normal</u>.

       <b>Module:terminate(Reason,</b> <b>State)</b> <b>-&gt;</b> <b>_</b>

              Types:

                 Reason = term()
                 State = term()

              This  function  is called by a channel process when it is about to terminate. Before this function
              is called,  ssh_connection:close/2  is called, if it has not been called  earlier.  This  function
              does  any  necessary  cleaning  up.  When  it  returns, the channel process terminates with reason
              <u>Reason</u>. The return value is ignored.

Ericsson AB                                         ssh 4.13                            <u><a href="../man3erl/ssh_client_channel.3erl.html">ssh_client_channel</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>