<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ct_snmp - Common Test user interface module for the SNMP application.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ct_snmp - Common Test user interface module for the SNMP application.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Common</u> <u>Test</u> user interface module for the <u>SNMP</u> application.

       The  purpose  of  this module is to simplify SNMP configuration for the test case writer. Many test cases
       can use default values for common operations and then no SNMP configuration files need  to  be  supplied.
       When  it  is  necessary  to  change  particular  configuration  parameters, a subset of the relevant SNMP
       configuration files can be passed to <u>ct_snmp</u> by <u>Common</u> <u>Test</u> configuration  files.  For  more  specialized
       configuration  parameters,  a  simple  SNMP  configuration  file  can  be  placed  in the test suite data
       directory. To simplify the test suite, <u>Common</u> <u>Test</u> keeps track of some of the SNMP  manager  information.
       This  way  the test suite does not have to handle as many input parameters as if it had to interface wthe
       OTP SNMP manager directly.

       <u>Configurable</u> <u>SNMP</u> <u>Manager</u> <u>and</u> <u>Agent</u> <u>Parameters:</u>

       Manager configuration:

         <u>[{start_manager,</u> <u>boolean()}</u>:
           Optional. Default is <u>true</u>.

         <u>{users,</u> <u>[{user_name(),</u> <u>[call_back_module(),</u> <u>user_data()]}]}</u>:
           Optional.

         <u>{usm_users,</u> <u>[{usm_user_name(),</u> <u>[usm_config()]}]}</u>:
           Optional. SNMPv3 only.

         <u>{managed_agents,[{agent_name(),</u> <u>[user_name(),</u> <u>agent_ip(),</u> <u>agent_port(),</u> <u>[agent_config()]]}]}</u>:
           <u>managed_agents</u> is optional.

         <u>{max_msg_size,</u> <u>integer()}</u>:
           Optional. Default is <u>484</u>.

         <u>{mgr_port,</u> <u>integer()}</u>:
           Optional. Default is <u>5000</u>.

         <u>{engine</u> <b>_</b><u>id,</u> <u>string()}</u>:
           Optional. Default is <u>"mgrEngine"</u>.

       Agent configuration:

         <u>{start_agent,</u> <u>boolean()}</u>:
           Optional. Default is <u>false</u>.

         <u>{agent_sysname,</u> <u>string()}</u>:
           Optional. Default is <u>"ct_test"</u>.

         <u>{agent_manager_ip,</u> <u>manager_ip()}</u>:
           Optional. Default is <u>localhost</u>.

         <u>{agent_vsns,</u> <u>list()}</u>:
           Optional. Default is <u>[v2]</u>.

         <u>{agent_trap_udp,</u> <u>integer()}</u>:
           Optional. Default is <u>5000</u>.

         <u>{agent_udp,</u> <u>integer()}</u>:
           Optional. Default is <u>4000</u>.

         <u>{agent_notify_type,</u> <u>atom()}</u>:
           Optional. Default is <u>trap</u>.

         <u>{agent_sec_type,</u> <u>sec_type()}</u>:
           Optional. Default is <u>none</u>.

         <u>{agent_passwd,</u> <u>string()}</u>:
           Optional. Default is <u>""</u>.

         <u>{agent_engine_id,</u> <u>string()}</u>:
           Optional. Default is <u>"agentEngine"</u>.

         <u>{agent_max_msg_size,</u> <u>string()}</u>:
           Optional. Default is <u>484</u>.

       The  following  parameters  represents  the  SNMP  configuration   files   <u>context.conf</u>,   <u>standard.conf</u>,
       <u>community.conf</u>,  <u>vacm.conf</u>,  <u>usm.conf</u>, <u>notify.conf</u>, <u>target_addr.conf</u>, and <u>target_params.conf</u>. Notice that
       all values in <u>agent.conf</u> can be modified by the parameters listed above. All  these  configuration  files
       have  default  values  set  by the <u>SNMP</u> application. These values can be overridden by suppling a list of
       valid configuration values or a file located in the test suites data directory, which can produce a  list
       of valid configuration values if you apply function <u>file:consult/1</u> to the file.

         <u>{agent_contexts,</u> <u>[term()]</u> <u>|</u> <u>{data_dir_file,</u> <u>rel_path()}}</u>:
           Optional.

         <u>{agent_community,</u> <u>[term()]</u> <u>|</u> <u>{data_dir_file,</u> <u>rel_path()}}</u>:
           Optional.

         <u>{agent_sysinfo,</u> <u>[term()]</u> <u>|</u> <u>{data_dir_file,</u> <u>rel_path()}}</u>:
           Optional.

         <u>{agent_vacm,</u> <u>[term()]</u> <u>|</u> <u>{data_dir_file,</u> <u>rel_path()}}</u>:
           Optional.

         <u>{agent_usm,</u> <u>[term()]</u> <u>|</u> <u>{data_dir_file,</u> <u>rel_path()}}</u>:
           Optional.

         <u>{agent_notify_def,</u> <u>[term()]</u> <u>|</u> <u>{data_dir_file,</u> <u>rel_path()}}</u>:
           Optional.

         <u>{agent_target_address_def,</u> <u>[term()]</u> <u>|</u> <u>{data_dir_file,</u> <u>rel_path()}}</u>:
           Optional.

         <u>{agent_target_param_def,</u> <u>[term()]</u> <u>|</u> <u>{data_dir_file,</u> <u>rel_path()}}</u>:
           Optional.

       Parameter  <u>MgrAgentConfName</u>  in  the  functions  is  to be a name you allocate in your test suite using a
       <u>require</u> statement. Example (where <u>MgrAgentConfName</u> <u>=</u> <u>snmp_mgr_agent</u>):

        suite() -&gt; [{require, snmp_mgr_agent, snmp}].

       or

        ct:require(snmp_mgr_agent, snmp).

       Notice that USM users are needed for SNMPv3 configuration and are not to be confused with users.

       SNMP traps, inform, and report messages are handled by the user callback module.  For  details,  see  the
       <u>SNMP</u> application.

       It  is  recommended  to  use  the  <u>.hrl</u> files created by the Erlang/OTP MIB compiler to define the Object
       Identifiers (OIDs). For example, to get the Erlang node name from <u>erlNodeTable</u> in the OTP-MIB:

        Oid = ?erlNodeEntry ++ [?erlNodeName, 1]

       Furthermore, values can be set for <u>SNMP</u> application configuration parameters, <u>config</u>, <u>server</u>, <u>net_if</u>, and
       so on (for a list of valid parameters and types, see the <u>User's</u> <u>Guide</u> <u>for</u> <u>the</u> <u>SNMP</u> <u>application</u>). This  is
       done by defining a configuration data variable on the following form:

        {snmp_app, [{manager, [snmp_app_manager_params()]},
                    {agent, [snmp_app_agent_params()]}]}.

       A  name for the data must be allocated in the suite using <u>require</u> (see the example above). Pass this name
       as  argument  <u>SnmpAppConfName</u>  to  <u>ct_snmp:start/3</u>.  <u>ct_snmp</u>  specifies  default  values  for  some  <u>SNMP</u>
       application  configuration  parameters  (such  as  <u>{verbosity,trace}</u>  for  parameter <u>config</u>). This set of
       defaults is merged with the parameters specified by the user. The user values override <u>ct_snmp</u> defaults.

</pre><h4><b>DATA</b> <b>TYPES</b></h4><pre>
       <b>agent_config()</b> <b>=</b> <b>{Item,</b> <b>Value}</b>

       <b>agent_ip()</b> <b>=</b> <b>ip()</b>

       <b>agent_name()</b> <b>=</b> <b>atom()</b>

       <b>agent_port()</b> <b>=</b> <b>integer()</b>

       <b>call_back_module()</b> <b>=</b> <b>atom()</b>

       <b>error_index()</b> <b>=</b> <b>integer()</b>

       <b>error_status()</b> <b>=</b> <b>noError</b> <b>|</b> <b>atom()</b>

       <b>ip()</b> <b>=</b> <b>string()</b> <b>|</b> <b>{integer(),</b> <b>integer(),</b> <b>integer(),</b> <b>integer()}</b>

       <b>manager_ip()</b> <b>=</b> <b>ip()</b>

       <b>oid()</b> <b>=</b> <b>[byte()]</b>

       <b>oids()</b> <b>=</b> <b>[oid()]</b>

       <b>rel_path()</b> <b>=</b> <b>string()</b>

       <b>sec_type()</b> <b>=</b> <b>none</b> <b>|</b> <b>minimum</b> <b>|</b> <b>semi</b>

       <b>snmp_app_agent_params()</b> <b>=</b> <b>term()</b>

       <b>snmp_app_manager_params()</b> <b>=</b> <b>term()</b>

       <b>snmpreply()</b> <b>=</b> <b>{error_status(),</b> <b>error_index(),</b> <b>varbinds()}</b>

       <b>user_data()</b> <b>=</b> <b>term()</b>

       <b>user_name()</b> <b>=</b> <b>atom()</b>

       <b>usm_config()</b> <b>=</b> <b>{Item,</b> <b>Value}</b>

       <b>usm_user_name()</b> <b>=</b> <b>string()</b>

       <b>value_type()</b> <b>=</b> <b>o('OBJECT</b> <b>IDENTIFIER')</b> <b>|</b> <b>i('INTEGER')</b> <b>|</b> <b>u('Unsigned32')</b> <b>|</b> <b>g('Unsigned32')</b> <b>|</b> <b>s('OCTET</b> <b>STRING')</b>

       <b>var_and_val()</b> <b>=</b> <b>{oid(),</b> <b>value_type(),</b> <b>value()}</b>

       <b>varbind()</b> <b>=</b> <b>term()</b>

       <b>varbinds()</b> <b>=</b> <b>[varbind()]</b>

       <b>varsandvals()</b> <b>=</b> <b>[var_and_val()]</b>

              These data types are described in the documentation for the <u>SNMP</u> application.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>get_next_values(Agent,</b> <b>Oids,</b> <b>MgrAgentConfName)</b> <b>-&gt;</b> <b>SnmpReply</b>

              Types:

                 Agent = agent_name()
                 Oids = oids()
                 MgrAgentConfName = atom()
                 SnmpReply = snmpreply()

              Issues a synchronous SNMP <u>get</u> <u>next</u> request.

       <b>get_values(Agent,</b> <b>Oids,</b> <b>MgrAgentConfName)</b> <b>-&gt;</b> <b>SnmpReply</b>

              Types:

                 Agent = agent_name()
                 Oids = oids()
                 MgrAgentConfName = atom()
                 SnmpReply = snmpreply()

              Issues a synchronous SNMP <u>get</u> request.

       <b>load_mibs(Mibs)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 Mibs = [MibName]
                 MibName = string()
                 Reason = term()

              Loads the MIBs into agent <u>snmp_master_agent</u>.

       <b>register_agents(MgrAgentConfName,</b> <b>ManagedAgents)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 MgrAgentConfName = atom()
                 ManagedAgents = [agent()]
                 Reason = term()

              Explicitly instructs the manager  to  handle  this  agent.  Corresponds  to  making  an  entry  in
              <u>agents.conf</u>.

              This  function  tries  to  register  the specified managed agents, without checking if any of them
              exist. To change a registered managed agent, the agent must first be unregistered.

       <b>register_users(MgrAgentConfName,</b> <b>Users)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 MgrAgentConfName = atom()
                 Users = [user()]
                 Reason = term()

              Registers the manager entity (=user) responsible for specific agent(s). Corresponds to  making  an
              entry in <u>users.conf</u>.

              This  function  tries  to  register the specified users, without checking if any of them exist. To
              change a registered user, the user must first be unregistered.

       <b>register_usm_users(MgrAgentConfName,</b> <b>UsmUsers)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 MgrAgentConfName = atom()
                 UsmUsers = [usm_user()]
                 Reason = term()

              Explicitly instructs the manager to handle this USM  user.  Corresponds  to  making  an  entry  in
              <u>usm.conf</u>.

              This  function  tries  to  register the specified users, without checking if any of them exist. To
              change a registered user, the user must first be unregistered.

       <b>set_info(Config)</b> <b>-&gt;</b> <b>[{Agent,</b> <b>OldVarsAndVals,</b> <b>NewVarsAndVals}]</b>

              Types:

                 Config = [{Key, Value}]
                 Agent = agent_name()
                 OldVarsAndVals = varsandvals()
                 NewVarsAndVals = varsandvals()

              Returns a list of all successful <u>set</u> requests performed in the test case  in  reverse  order.  The
              list  contains  the  involved  user  and  agent,  the value before <u>set</u>, and the new value. This is
              intended to simplify the cleanup in function <u>end_per_testcase</u>, that is, the  undoing  of  the  <u>set</u>
              requests and their possible side-effects.

       <b>set_values(Agent,</b> <b>VarsAndVals,</b> <b>MgrAgentConfName,</b> <b>Config)</b> <b>-&gt;</b> <b>SnmpReply</b>

              Types:

                 Agent = agent_name()
                 Oids = oids()
                 MgrAgentConfName = atom()
                 Config = [{Key, Value}]
                 SnmpReply = snmpreply()

              Issues a synchronous SNMP <u>set</u> request.

       <b>start(Config,</b> <b>MgrAgentConfName)</b> <b>-&gt;</b> <b>ok</b>

              Equivalent to <u>ct_snmp:start(Config,</u> <u>MgrAgentConfName,</u> <u>undefined)</u>.

       <b>start(Config,</b> <b>MgrAgentConfName,</b> <b>SnmpAppConfName)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 Config = [{Key, Value}]
                 Key = atom()
                 Value = term()
                 MgrAgentConfName = atom()
                 SnmpConfName = atom()

              Starts  an  SNMP  manager and/or agent. In the manager case, registrations of users and agents, as
              specified by the configuration <u>MgrAgentConfName</u>, are performed.  When  using  SNMPv3,  called  USM
              users are also registered. Users, <u>usm_users</u>, and managed agents can also be registered later using
              <u>ct_snmp:register_users/2</u>, <u>ct_snmp:register_agents/2</u>, and <u>ct_snmp:register_usm_users/2</u>.

              The  agent  started  is  called  <u>snmp_master_agent</u>.  Use <u>ct_snmp:load_mibs/1</u> to load MIBs into the
              agent.

              With <u>SnmpAppConfName</u> SNMP applications can be configured with parameters <u>config</u>, <u>mibs</u>, <u>net_if</u>, and
              so on. The values are merged with (and possibly override) default values set by <u>ct_snmp</u>.

       <b>stop(Config)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 Config = [{Key, Value}]
                 Key = atom()
                 Value = term()

              Stops the SNMP manager and/or agent, and removes all files created.

       <b>unload_mibs(Mibs)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 Mibs = [MibName]
                 MibName = string()
                 Reason = term()

              Unloads the MIBs from agent <u>snmp_master_agent</u>.

       <b>unregister_agents(MgrAgentConfName)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 MgrAgentConfName = atom()
                 Reason = term()

              Unregisters all managed agents.

       <b>unregister_agents(MgrAgentConfName,</b> <b>ManagedAgents)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 MgrAgentConfName = atom()
                 ManagedAgents = [agent_name()]
                 Reason = term()

              Unregisters the specified managed agents.

       <b>unregister_users(MgrAgentConfName)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 MgrAgentConfName = atom()
                 Reason = term()

              Unregisters all users.

       <b>unregister_users(MgrAgentConfName,</b> <b>Users)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 MgrAgentConfName = atom()
                 Users = [user_name()]
                 Reason = term()

              Unregisters the specified users.

       <b>unregister_usm_users(MgrAgentConfName)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 MgrAgentConfName = atom()
                 Reason = term()

              Unregisters all USM users.

       <b>unregister_usm_users(MgrAgentConfName,</b> <b>UsmUsers)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 MgrAgentConfName = atom()
                 UsmUsers = [usm_user_name()]
                 Reason = term()

              Unregisters the specified USM users.

Ericsson AB                                     common_test 1.22                                   <u><a href="../man3erl/ct_snmp.3erl.html">ct_snmp</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>