<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VUser::Google::ProvisioningAPI::V1_0 - Perl module that implements version 1.0 of the Google Apps for</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvuser-google-api-perl">libvuser-google-api-perl_1.0.1-1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       VUser::Google::ProvisioningAPI::V1_0 - Perl module that implements version 1.0 of the Google Apps for
       Your Domain Provisioning API

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use VUser::Google::ProvisioningAPI;
         my $google = new VUser::Google::ProvisioningAPI($domain,$admin,$password);

         $google-&gt;CreateAccount($userName, $firstName, $lastName, $password);
         $google-&gt;RetrieveAccount($userName);

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       VUser::Google::ProvisioningAPI requires the following modules to be installed:

       •   "LWP::UserAgent"

       •   "HTTP::Request"

       •   "Encode"

       •   "XML::Simple"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       VUser::Google::ProvisioningAPI   provides  a  simple  interface  to  the  Google  Apps  for  Your  Domain
       Provisioning API.  It uses the "LWP::UserAgent" module for the HTTP transport,  and  the  "HTTP::Request"
       module for the HTTP request and response.

   <b>Examples</b>
       For  a  complete  description  of  the meaning of the following methods, see the Google API documentation
       referenced in the SEE ALSO section.

               #create the object
               $google = new Google:ProvisioningAPI($domain,$admin,$password) || die "Cannot create google object";

               print 'Module version: ' . $google-&gt;VERSION . "\nAPI Version: " . $google-&gt;version() . "\n";

               #create a hosted account
               if( $google-&gt;CreateAccount( $userName, $firstName, $lastName, $password ) )
               {
                       print "Account created!\N";
               }

               #add email services to the account
               $google-&gt;UpdateAccountEmail($userName);

               #retrieving account data
               if($google-&gt;RetrieveAccount($userName))
               {
                       print 'Username: ' . $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{userName} . "\n";
                       print 'firstName: ' . $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{firstName} . "\n";
                       print 'lastName: ' . $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{lastName} . "\n";
                       print 'accountStatus: ' . $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{accountStatus} . "\n";

               }

               #see what the result hash after a request looks like
               use Data::Dumper;
               print Dumper($google-&gt;{result});

               #delete an account
               $ret = DeleteAccount($userName);

               #accessing the HTML data as it was received from the Google servers:
               print $google-&gt;replyheaders();
               print $google-&gt;replycontent();

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       new ( $domain, $admin, $adminpassword )

       This is the constructor for a new VUser::Google::ProvisioningAPI object.   $domain  is  the  domain  name
       registered  with Google Apps For Your Domain, $admin is an account in the above domain that has the right
       to manage that domain, and $adminpassword is the password for that account.

       Note that the constructor will NOT attempt to perform the 'ClientLogin' call to the  Google  Provisioning
       API  (see  below).   Authentication happens automatically when the first API call is performed. The token
       will be remembered for the duration of the object, and will be automatically refreshed as needed.  If you
       want to verify that you can get a valid token before performing any operations,  follow  the  constructor
       with a call to <b>IsAuthenticated()</b> as such:

               print "Authentication OK\n" unless not $google-&gt;IsAuthenticated();

</pre><h4><b>METHODS</b></h4><pre>
       Below  are  all  the methods available on the object. For the Google API specific methods, see the Google
       API documentation for more details.  When a request is properly  handled  by  Google's  API  engine,  the
       webpost  to  the API succeeds. This results in a valid page being returned. The content of this page then
       defines whether the request succeeded or not.  All pages returing the '<a href="../man2000/Success.2000.html">Success</a>(2000)'  status  code  will
       result  in  the  API method succeeding, and returning a 1. All failures return 0.  Please see the section
       below on how to access the result data, and how to determine the reasons for errors.

       If the web post fails (as determined by the "HTTP::Request" method <b>IsSuccess()</b> ), the method  returns  0,
       and the {reason} hash is set to a descriptive error.  You can then examine the raw data to get an idea of
       what went wrong.

   <b>Checking</b> <b>Authentication</b>
       <b>IsAuthenticated()</b>

           will  check  if  the  object  has  been  able  to  authenticate  with Google's api engine, and get an
           authentication ticket.  Returns 1 if successful, 0 on failure. To see why it may  fail,  see  the  $@
           variable,  and  the $google-&gt;{results}-&gt;{reason} hash, and parse the returned page (see the 'content'
           and 'header' variables.)

   <b>Methods</b> <b>to</b> <b>Create/Retrieve/Delete</b>
       <u>'Hosted</u> <u>account'</u> <u>methods</u>

       CreateAccountEmail(  $userName, $firstName, $lastName, $password, $quota )

           Creates a hosted account with email services in your domains name space.  The first 4  arguments  are
           required.  The $quota argument is optional. If $quota is given, the &lt;quota&gt; tag will be sent with the
           request, otherwize is will be omitted.  See the Google API docs for the API call for more details.

       CreateAccount(  $userName, $firstName, $lastName, $password )

           Creates a hosted account in your domains name space. This account does NOT  have  email  services  by
           default.   You  need  to call <b>UpdateAccountEmail()</b> to add email services.  NOTE: this API call may be
           discontinued! See <b>CreateAccountEmail()</b> for a replacement.

       UpdateAccount( $username, $firstName, $lastName, $password )

           $username is the mandatory name of the hosted account. The remaining paramaters are optional, and can
           be set to 'undef' if you do not wish to change them Eg. to change the password on  an  account,  call
           this as;

               UpdateAccount( $username, undef, undef, 'newpassword' );

           to change names only, you would call it as such:

               UpdateAccount( $username, 'newfirstname', 'newlastname', undef );

       UpdateAccountEmail( $userName )

           Adds  email  services  to  a hosted account created with <b>CreateAccount()</b>.  NOTE: this API call may be
           discontinued! See <b>CreateAccountEmail()</b> for a replacement.

       UpdateAccountStatus( $userName, $status )

           $status is either 'locked' or 'unlocked'

       RetrieveAccount( $userName )

       DeleteAccount( $userName )

       RenameAccount( $oldName, $newName, $alias )

           $alias is either '1' or '0'

           WARNING: this method is derived from the Python sample code provided by Google:  (Ie.  this  may  not
           work  yet)  "Username  change.  Note  that  this  feature  must  be  explicitly enabled by the domain
           administrator, and is not enabled by default.  Args:

               oldname: user to rename newname: new username to set for the user alias: if 1, create an alias of
               oldname for newname"

       <u>'Alias'</u> <u>methods</u>

       CreateAlias( $userName, $alias )

       RetrieveAlias( $userName );

       DeleteAlias( $alias );

       <u>'Mailing</u> <u>List'</u> <u>methods</u>

       CreateMailingList( $mailingListName )

       UpdateMailingList( $mailingListName, $userName, $listOperation )

           $listOperation is either 'add' or 'remove'

       RetrieveMailingList( $mailingListName )

       DeleteMailingList( $mailingListName )

   <b>Methods</b> <b>to</b> <b>set/get</b> <b>variables</b>
       After creating the object you can get/set the administrator account  and  set  the  password  with  these
       methods.  Note this will cause a re-authentication next time a Google API method is called.

       admin( $admin )

           set the administrative user, and will return administator username.

       password( $string )

           set the password, returns an empty string

   <b>Miscelleaneous</b> <b>statistics</b> <b>methods</b>
       There  are  a  few  methods  to access some statistics data that is collected while the object performing
       Google API calls.

       <b>authtime()</b>

           returns the time of last authentication, as generated by the <b>time()</b> function

       <b>ctime()</b>

           returns the create time of the object, as generated by the <b>time()</b> function

       <b>rtime()</b>

           returns the time of the most recent request, as generated by the <b>time()</b> function

       <b>logins()</b>

           returns the number of API logins that have been performed

       <b>requests()</b>

           returns the numbers of API requests that have been submitted to Google

       <b>success()</b>

           returns the numbers of successful api request performed

       And finally,

       <b>version()</b>

           returns a string with the api version implemented. This is currently '1.0'

</pre><h4><b>ACCESSING</b> <b>RESULTING</b> <b>DATA</b></h4><pre>
       Valid return data from Google is parsed into a hash named 'result', available through the object. In this
       hash you can find all elements as returned by Google.  This hash is  produced  by  XML::Simple.  See  the
       Google  API documentation in the SEE ALSO section for complete details.  Some of the more useful elements
       you may need to look at are:

               $google-&gt;{result}-&gt;{reason}             #this typically has the textual reason for a failure
               $google-&gt;{result}-&gt;{extendedMessage}    #a more extensive description of the failure reason may be here
               $google-&gt;{result}-&gt;{result}             #typically empty!
               $google-&gt;{result}-&gt;{type}               #should be same of query type, eg 'Account', 'Alias', 'MailingList'

       The retrieval section contains data when you are querying. Here is what this section looks like when  you
       call the RetrieveAccount method:

               $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{firstName}
               $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{lastName}
               $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{accountStatus}
               $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{aliases}-&gt;{alias}
               $google-&gt;{result}-&gt;{RetrievalSection}-&gt;{emailLists}-&gt;{emailList}

       To see the structure of the result hash, use the Data::Dumper module as such:

               use Data::Dumper;
               print Dumper($google-&gt;{result});

</pre><h4><b>ACCESSING</b> <b>RAW</b> <b>GOOGLE</b> <b>POST</b> <b>AND</b> <b>RESULT</b> <b>DATA</b></h4><pre>
       The data from the most recent post to the Google servers is available. You can access it as:

               print $google-&gt;requestcontent();

       The most recent received HTML data is stored in two parts, the headers and the content. Both are strings.
       They can be accessed as such:

               print $google-&gt;replyheaders();
               print $google-&gt;replycontent();

       Note the headers are new-line separated and can easily be parsed:

               foreach my $headerline ( split/\n/, $g-&gt;replyheaders() )
               {
                       my ($header, $value) = split/:/, $headerline;
               }

</pre><h4><b>EXPORT</b></h4><pre>
       None by default.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The         official         Google         documentation         can         be         found         at
       <a href="http://code.google.com/apis/apps-for-your-domain/google_apps_provisioning_api_v1.0_reference.html">http://code.google.com/apis/apps-for-your-domain/google_apps_provisioning_api_v1.0_reference.html</a>

       For support, see the Google Group at <a href="http://groups.google.com/group/apps-for-your-domain-apis">http://groups.google.com/group/apps-for-your-domain-apis</a>

       For additional support specific to this modules, email me at johan at reinalda dot net.

</pre><h4><b>AUTHOR</b></h4><pre>
       Johan Reinalda, johan at reinalda dot net

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2006 by Johan Reinalda, johan at reinalda dot net

       This library is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself, either Perl version 5.8.5 or, at your option, any later version of Perl 5 you may have available.

       If you make useful modification, kindly consider emailing then to me for inclusion in a future version of
       this module.

perl v5.32.0                                       2021-01-09             <u>VUser::Google::...ioningAPI::<a href="../man3pm/V1_0.3pm.html">V1_0</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>