<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSL_CTX_set_session_cache_mode, SSL_CTX_get_session_cache_mode - enable/disable session caching</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SSL_CTX_set_session_cache_mode, SSL_CTX_get_session_cache_mode - enable/disable session caching

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/ssl.h&gt;

        long SSL_CTX_set_session_cache_mode(SSL_CTX ctx, long mode);
        long SSL_CTX_get_session_cache_mode(SSL_CTX ctx);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SSL_CTX_set_session_cache_mode()</b> enables/disables session caching by setting the operational mode for <b>ctx</b>
       to &lt;mode&gt;.

       <b>SSL_CTX_get_session_cache_mode()</b> returns the currently used cache mode.

</pre><h4><b>NOTES</b></h4><pre>
       The OpenSSL library can store/retrieve SSL/TLS sessions for later reuse.  The sessions can be held in
       memory for each <b>ctx</b>, if more than one SSL_CTX object is being maintained, the sessions are unique for
       each SSL_CTX object.

       In order to reuse a session, a client must send the session's id to the server. It can only send exactly
       one id.  The server then either agrees to reuse the session or it starts a full handshake (to create a
       new session).

       A server will look up the session in its internal session storage. If the session is not found in
       internal storage or lookups for the internal storage have been deactivated
       (SSL_SESS_CACHE_NO_INTERNAL_LOOKUP), the server will try the external storage if available.

       Since a client may try to reuse a session intended for use in a different context, the session id context
       must be set by the server (see <b><a href="../man3/SSL_CTX_set_session_id_context.3.html">SSL_CTX_set_session_id_context</a></b>(3)).

       The following session cache modes and modifiers are available:

       SSL_SESS_CACHE_OFF
           No session caching for client or server takes place.

       SSL_SESS_CACHE_CLIENT
           Client  sessions  are added to the session cache. As there is no reliable way for the OpenSSL library
           to know whether a session should be reused or which session to choose (due to the abstract BIO  layer
           the  SSL  engine does not have details about the connection), the application must select the session
           to be reused by using the <b><a href="../man3/SSL_set_session.3.html">SSL_set_session</a></b>(3) function. This option is not activated by default.

       SSL_SESS_CACHE_SERVER
           Server sessions are added to the session cache. When a client proposes a session to  be  reused,  the
           server   looks  for  the  corresponding  session  in  (first)  the  internal  session  cache  (unless
           SSL_SESS_CACHE_NO_INTERNAL_LOOKUP is set), then (second) in the external cache if available.  If  the
           session is found, the server will try to reuse the session.  This is the default.

       SSL_SESS_CACHE_BOTH
           Enable both SSL_SESS_CACHE_CLIENT and SSL_SESS_CACHE_SERVER at the same time.

       SSL_SESS_CACHE_NO_AUTO_CLEAR
           Normally  the  session  cache  is  checked  for  expired  sessions  every  255  connections using the
           <b><a href="../man3/SSL_CTX_flush_sessions.3.html">SSL_CTX_flush_sessions</a></b>(3) function. Since this may lead to a delay which cannot  be  controlled,  the
           automatic  flushing  may  be  disabled  and <b><a href="../man3/SSL_CTX_flush_sessions.3.html">SSL_CTX_flush_sessions</a></b>(3) can be called explicitly by the
           application.

       SSL_SESS_CACHE_NO_INTERNAL_LOOKUP
           By setting this flag, session-resume operations in an SSL/TLS server will not automatically  look  up
           sessions  in the internal cache, even if sessions are automatically stored there. If external session
           caching callbacks are in use, this flag guarantees that all lookups  are  directed  to  the  external
           cache.  As automatic lookup only applies for SSL/TLS servers, the flag has no effect on clients.

       SSL_SESS_CACHE_NO_INTERNAL_STORE
           Depending  on the presence of SSL_SESS_CACHE_CLIENT and/or SSL_SESS_CACHE_SERVER, sessions negotiated
           in an SSL/TLS handshake may be cached for possible reuse.  Normally a new session  is  added  to  the
           internal cache as well as any external session caching (callback) that is configured for the SSL_CTX.
           This  flag  will  prevent sessions being stored in the internal cache (though the application can add
           them manually using <b><a href="../man3/SSL_CTX_add_session.3.html">SSL_CTX_add_session</a></b>(3)). Note: in any SSL/TLS servers where external  caching  is
           configured,  any  successful session lookups in the external cache (i.e. for session-resume requests)
           would normally be copied into the local cache before processing continues - this flag prevents  these
           additions to the internal cache as well.

       SSL_SESS_CACHE_NO_INTERNAL
           Enable both SSL_SESS_CACHE_NO_INTERNAL_LOOKUP and SSL_SESS_CACHE_NO_INTERNAL_STORE at the same time.

       SSL_SESS_CACHE_UPDATE_TIME
           Updates  the  timestamp  of  the session when it is used, increasing the lifespan of the session. The
           session timeout applies to last use, rather then creation time.

       The default mode is SSL_SESS_CACHE_SERVER.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>SSL_CTX_set_session_cache_mode()</b> returns the previously set cache mode.

       <b>SSL_CTX_get_session_cache_mode()</b> returns the currently set cache mode.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/ssl.7.html">ssl</a></b>(7),  <b><a href="../man3/SSL_set_session.3.html">SSL_set_session</a></b>(3),   <b><a href="../man3/SSL_session_reused.3.html">SSL_session_reused</a></b>(3),   <b><a href="../man3/SSL_CTX_add_session.3.html">SSL_CTX_add_session</a></b>(3),   <b><a href="../man3/SSL_CTX_sess_number.3.html">SSL_CTX_sess_number</a></b>(3),
       <b><a href="../man3/SSL_CTX_sess_set_cache_size.3.html">SSL_CTX_sess_set_cache_size</a></b>(3),       <b><a href="../man3/SSL_CTX_sess_set_get_cb.3.html">SSL_CTX_sess_set_get_cb</a></b>(3),      <b><a href="../man3/SSL_CTX_set_session_id_context.3.html">SSL_CTX_set_session_id_context</a></b>(3),
       <b><a href="../man3/SSL_CTX_set_timeout.3.html">SSL_CTX_set_timeout</a></b>(3), <b><a href="../man3/SSL_CTX_flush_sessions.3.html">SSL_CTX_flush_sessions</a></b>(3)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2001-2021 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file  except  in  compliance
       with  the  License.   You  can  obtain  a  copy  in  the  file  LICENSE  in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04               <u><a href="../man3SSL/SSL_CTX_SET_SESSION_CACHE_MODE.3SSL.html">SSL_CTX_SET_SESSION_CACHE_MODE</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>