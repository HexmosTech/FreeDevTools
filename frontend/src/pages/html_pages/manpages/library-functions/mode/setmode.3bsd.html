<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getmode, setmode — modify mode bits</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbsd-dev">libbsd-dev_0.12.2-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       getmode, setmode — modify mode bits

</pre><h4><b>LIBRARY</b></h4><pre>
       Utility functions from BSD systems (libbsd, -lbsd)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>
       (See <u><a href="../man7/libbsd.7.html">libbsd</a></u>(7) for include usage.)

       <u>void</u> <u>*</u>
       <b>setmode</b>(<u>const</u> <u>char</u> <u>*mode_str</u>);

       <u>mode_t</u>
       <b>getmode</b>(<u>const</u> <u>void</u> <u>*set</u>, <u>mode_t</u> <u>mode</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>setmode</b>() function accepts a string representation of a file mode change, compiles it to binary form,
       and  returns  an  abstract  representation that may be passed to <b>getmode</b>().  The string may be an numeric
       (octal) or symbolic string of the form accepted by <u><a href="../man1/chmod.1.html">chmod</a></u>(1), and may represent either an  exact  mode  to
       set or a change to make to the existing mode.

       The  <b>getmode</b>()  function  adjusts the file permission bits given by <u>mode</u> according to the compiled change
       representation <u>set</u>, and returns the adjusted mode.  While only the permission  bits  are  altered,  other
       parts of the file mode, particularly the type, may be examined.

       Because  some  of  the possible symbolic values are defined relative to the file creation mask, <b>setmode</b>()
       may call <u><a href="../man2/umask.2.html">umask</a></u>(2), temporarily changing the mask.  If  this  occurs,  the  file  creation  mask  will  be
       restored  before  <b>setmode</b>()  returns.  If the calling program changes the value of its file creation mask
       after calling <b>setmode</b>(), <b>setmode</b>() must be called again to recompile the mode string if <b>getmode</b>()  is  to
       modify future file modes correctly.

       If the mode passed to <b>setmode</b>() is invalid, <b>setmode</b>() returns NULL.

       The  value  returned  from  <b>setmode</b>() is obtained from <b>malloc</b>() and should be returned to the system with
       <b>free</b>() when the program is done with it, generally after a call to <b>getmode</b>().

</pre><h4><b>EXAMPLES</b></h4><pre>
       The effects of the shell command ‘chmod a+x myscript.sh’ can be duplicated as follows:

             const char *file = "myscript.sh";
             struct stat st;
             mode_t newmode;

             stat(file, &amp;st);
             newmode = getmode(setmode("a+x"), st.st_mode);
             chmod(file, newmode);

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>setmode</b>() function may fail and set <u>errno</u> for any of the errors specified for  the  library  routines
       <u><a href="../man3/malloc.3.html">malloc</a></u>(3) or <u><a href="../man3/strtol.3.html">strtol</a></u>(3).  In addition, <b>setmode</b>() will fail and set <u>errno</u> to:

       [EINVAL]           The <u>mode</u> argument does not represent a valid mode.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/chmod.1.html">chmod</a></u>(1), <u><a href="../man2/stat.2.html">stat</a></u>(2), <u><a href="../man2/umask.2.html">umask</a></u>(2), <u><a href="../man3/malloc.3.html">malloc</a></u>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>getmode</b>() and <b>setmode</b>() functions first appeared in 4.4BSD.

</pre><h4><b>BUGS</b></h4><pre>
       The type of <u>set</u> should really be some opaque struct type used only by these functions rather than <u>void</u> <u>*</u>.

Debian                                           January 4, 2009                                   <u><a href="../man3bsd/setmode.3bsd.html">setmode</a></u>(3bsd)
</pre>
 </div>
</div></section>
</div>
</body>
</html>