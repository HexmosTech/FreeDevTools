<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cache::async - Asynchronous in-memory cache</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cache::async - Asynchronous in-memory cache

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>cache::async</b> <b>?0.3.2?</b>

       <b>::cache::async</b> <u>objectName</u> <u>commandprefix</u> ?<u>options</u>...?

       <u>objectName</u> <b>get</b> <u>key</u> <u>donecmdprefix</u>

       <u>objectName</u> <b>set</b> <u>key</u> <u>value</u>

       <u>objectName</u> <b>unset</b> <u>key</u>

       <u>objectName</u> <b>exists</b> <u>key</u>

       <u>objectName</u> <b>clear</b> ?<u>key</u>?

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides  objects  which  cache  data in memory, and operate asynchronously with regard to
       request and responses. The objects are agnostic with regard to cache keys and values, and unknown methods
       are delegated to the provider of cached data. These two properties make it easy to use caches as a facade
       for any data provider.

</pre><h4><b>API</b></h4><pre>
       The package exports a class, <b>cache::async</b>, as specified below.

       <b>::cache::async</b> <u>objectName</u> <u>commandprefix</u> ?<u>options</u>...?
              The command creates a new <u>cache</u> object with  an  associated  global  Tcl  command  whose  name  is
              <u>objectName</u>.  This command may be used to invoke various operations on the object.

              The  <u>commandprefix</u>  is the action to perform when an user asks for data in the cache and the cache
              doesn't yet know about the key. When run the commandprefix is given  three  additional  arguments,
              the string <b>get</b>, the key requested, and the cache object itself, in the form of its object command,
              in  this  order.  The  execution  of the action is done in an idle-handler, decoupling it from the
              original request.

              The only supported option is

              <b>-full-async-results</b>
                     This option defines the behaviour of the cache for when requested keys  are  known  to  the
                     cache  at the time of <b>get</b> request. By default such requeste are responded to asynchronously
                     as well. Setting this option to <b>false</b> forces the cache to respond to  them  synchronuously,
                     although still through the specified callback.

       The object commands created by the class commands above have the form:

       <u>objectName</u> <b>get</b> <u>key</u> <u>donecmdprefix</u>
              This method requests the data for the <u>key</u> from the cache. If the data is not yet known the command
              prefix specified during construction of the cache object is used to ask for this information.

              Whenever the information is/becomes available the <u>donecmdprefix</u> will be run to transfer the result
              to the caller. This command prefix is invoked with either 2 or 3 arguments, i.e.

              [1]    The string <b>set</b>, the <u>key</u>, and the value.

              [2]    The string <b>unset</b>, and the <u>key</u>.

              These  two  possibilities  are used to either signal the value for the <u>key</u>, or that the <u>key</u> has no
              value defined for it. The latter is distinct from the cache not knowing about the <u>key</u>.

              For a cache object configured to be fully asynchronous (default) the <u>donecmdprefix</u> is  always  run
              in  an  idle-handler,  decoupling  it  from  the  request.  Otherwise the callback will be invoked
              synchronously when the <u>key</u> is known to the cache at the time of the invokation.

              Another important part of the cache's behaviour,  as  it  is  asynchronous  it  is  possible  that
              multiple  <b>get</b>  requests  are issued for the same <u>key</u> before it can respond. In that case the cache
              will issue only one data request to the provider, for the first of these, and suspend the  others,
              and then notify all of them when the data becomes available.

       <u>objectName</u> <b>set</b> <u>key</u> <u>value</u>

       <u>objectName</u> <b>unset</b> <u>key</u>
              These  two  methods  are  provided to allow users of the cache to make keys known to the cache, as
              either having a <u>value</u>, or as undefined.

              It is expected that the data provider (see <u>commandprefix</u> of the constructor) uses them in response
              to data requests for unknown keys.

              Note how this matches the cache's own API towards its caller, calling the <u>donecmd</u> of  <b>get</b>-requests
              issued  to  itself  with either "set key value" or "unset key", versus issuing <b>get</b>-requests to its
              own provider with itself in the place of the <u>donecmd</u>, expecting to be called with either "set  key
              value" or "unset key".

              This  also means that these methods invoke the <u>donecmd</u> of all <b>get</b>-requests waiting for information
              about the modified <u>key</u>.

       <u>objectName</u> <b>exists</b> <u>key</u>
              This method queries the cache for knowledge about the <u>key</u> and returns a boolean value. The  result
              is <b>true</b> if the key is known, and <b>false</b> otherwise.

       <u>objectName</u> <b>clear</b> ?<u>key</u>?
              This method resets the state of either the specified <u>key</u> or of all keys known to the cache, making
              it unkown. This forces future <b>get</b>-requests to reload the information from the provider.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>cache</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       asynchronous, cache, callback, synchronous

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2008 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                0.3.2                                   <u>cache::<a href="../man3tcl/async.3tcl.html">async</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>