<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_DNS_CACHE_TIMEOUT - life-time for DNS cache entries</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_DNS_CACHE_TIMEOUT - life-time for DNS cache entries

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_DNS_CACHE_TIMEOUT, long age);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass  a long, this sets the timeout in seconds. Name resolve results are kept in memory and used for this
       number of seconds. Set to zero to completely disable caching, or set to -1 to  make  the  cached  entries
       remain forever. By default, libcurl caches this info for 60 seconds.

       We  recommend  users  not to tamper with this option unless strictly necessary.  If you do, be careful of
       using large values that can make the cache size grow significantly if many different hostnames  are  used
       within that timeout period.

       The  name resolve functions of various libc implementations do not re-read name server information unless
       explicitly told so (for example, by calling <u><a href="../man3/res_init.3.html">res_init</a>(3)</u>). This may cause libcurl to keep using the  older
       server  even  if DHCP has updated the server info, and this may look like a DNS cache issue to the casual
       libcurl-app user.

       DNS entries have a "TTL" property but libcurl does not use that.  This  DNS  cache  timeout  is  entirely
       speculative that a name resolves to the same address for a small amount of time into the future.

       Since  version  8.1.0,  libcurl  prunes entries from the DNS cache if it exceeds 30,000 entries no matter
       which timeout value is used.

</pre><h4><b>DEFAULT</b></h4><pre>
       60

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           CURLcode res;
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com/foo.bin");

           /* only reuse addresses for a short time */
           curl_easy_setopt(curl, CURLOPT_DNS_CACHE_TIMEOUT, 2L);

           res = curl_easy_perform(curl);

           /* in this second request, the cache is not be used if more than
              two seconds have passed since the previous name resolve */
           res = curl_easy_perform(curl);

           curl_easy_cleanup(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.9.3

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_CONNECTTIMEOUT_MS.3.html">CURLOPT_CONNECTTIMEOUT_MS</a></b>(3),          <b><a href="../man3/CURLOPT_DNS_SERVERS.3.html">CURLOPT_DNS_SERVERS</a></b>(3),           <b><a href="../man3/CURLOPT_DNS_USE_GLOBAL_CACHE.3.html">CURLOPT_DNS_USE_GLOBAL_CACHE</a></b>(3),
       <b><a href="../man3/CURLOPT_MAXAGE_CONN.3.html">CURLOPT_MAXAGE_CONN</a></b>(3), <b><a href="../man3/CURLOPT_RESOLVE.3.html">CURLOPT_RESOLVE</a></b>(3)

libcurl                                            2025-06-16                       <u><a href="../man3/CURLOPT_DNS_CACHE_TIMEOUT.3.html">CURLOPT_DNS_CACHE_TIMEOUT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>