<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"CPS::Governor::Deferred" - iterate at some later point</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcps-perl">libcps-perl_0.19-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "CPS::Governor::Deferred" - iterate at some later point

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use CPS qw( gkforeach );
        use CPS::Governor::Deferred;

        my $gov = CPS::Governor::Deferred-&gt;new;

        gkforeach( $gov, [ 1 .. 10 ],
           sub {
              my ( $item, $knext ) = @_;

              print "A$item ";
              goto &amp;$knext;
           },
           sub {},
        );

        gkforeach( $gov, [ 1 .. 10 ],
           sub {
              my ( $item, $knext ) = @_;

              print "B$item ";
              goto &amp;$knext;
           },
           sub {},
        );

        $gov-&gt;flush;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This CPS::Governor allows the functions using it to delay their iteration until some later point when the
       containing program invokes it. This allows two main advantages:

       •   CPU-intensive operations may be split apart and mixed with other IO operations

       •   Multiple control functions may be executed in pseudo-parallel, interleaving iterations of each giving
           a kind of concurrency

       These are achieved by having the governor store a list of code references that need to be invoked, rather
       than  invoking  them  immediately.  These  references can then be invoked later, perhaps by using an idle
       watcher in an event framework.

       Because each code reference hasn't yet been invoked by  the  time  the  "again"  method  is  called,  the
       original  caller is free to store more pending references with the governor. This allows multiple control
       functions to be interleaved, as in the "A" and "B" example above.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
   <b>$gov</b> <b>=</b> <b>CPS::Governor::Deferred-&gt;new(</b> <b>%args</b> <b>)</b>
       Returns a new instance of a "CPS::Governor::Deferred" object. Requires no parameters but may take any  of
       the following to adjust its default behaviour:

       defer_after =&gt; INT
               If given some positive number, $n then the first "$n-1" invocations of the "again" method will in
               fact  be  executed  immediately.  Thereafter  they will be enqueued in the normal mechanism. This
               gives the effect that longrunning loops will be executed in batches of $n.

               If not supplied then every invocation of "again" will use the queueing mechanism.

</pre><h4><b>METHODS</b></h4><pre>
   <b>$pending</b> <b>=</b> <b>$gov-&gt;is_pending</b>
       Returns true if at least one code reference has been stored that hasn't yet been invoked.

   <b>$gov-&gt;prod</b>
       Invokes all of the currently-stored code references, in the order they were stored. If any new references
       are stored by these, they will not yet be invoked, but will be available for the next time this method is
       called.

   <b>$gov-&gt;flush</b>
       Repeatedly calls "prod" until no more code references are pending.

</pre><h4><b>SUBCLASS</b> <b>METHODS</b></h4><pre>
       The following methods are used internally  to  implement  the  functionality,  which  may  be  useful  to
       implementors of subclasses.

   <b>$gov-&gt;later(</b> <b>$code,</b> <b>@args</b> <b>)</b>
       Used to enqueue the $code ref to be invoked later with the given @args, once it is determined this should
       be  deferred  (rather  than  being  invoked  immediately  in  the  case of the first few invocations when
       "defer_after" is set).

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.34.0                                       2022-06-30                       <u>CPS::Governor::<a href="../man3pm/Deferred.3pm.html">Deferred</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>