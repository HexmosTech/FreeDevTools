<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyrus::IMAP::Shell - Perl version of cyradm</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcyrus-imap-perl">libcyrus-imap-perl_3.10.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Cyrus::IMAP::Shell - Perl version of cyradm

</pre><h4><b>SYNOPSIS</b></h4><pre>
         $ cyradm [--user authid] [--authz authzid] [--[no]rc] [--systemrc file] [--userrc file] \
         &gt; [--port n] [--auth mechanism] [--server] server

       but possibly

         $ perl -MCyrus::IMAP::Shell -e 'run("myscript")'

       or even (not recommended)

         use Cyrus::IMAP::Admin::Shell;

         run('myscriptname');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module implements <b>cyradm</b> in Perl.  It is a shell around Cyrus::IMAP::Admin.  Commands are provided
       in both Tcl-compatible forms and GNU-style long option forms.

       The ``cyradm`` utility is a simple command line for performing common administrative tasks on a Cyrus
       IMAP server, written in Perl.

       The cyradm utility can either be executed from a client where it has been installed and connect to the
       server via IMAP or it can be executed locally via a shell on the server.

       cyradm understands /bin/sh-style redirection: any command can have its standard or error output
       redirected, with all sh-style redirections (except \&lt;\&gt;) supported. It does not currently understand
       pipes or backgrounding.

       If the Term::Readline::Perl or Term::Readline::GNU modules are available, cyradm will use it.

</pre><h4><b>COMMAND-LINE</b> <b>ARGUMENTS</b></h4><pre>
       "--u", "--user" <u>user</u>
           Authenticate with the specified username.

       "--authz" <u>user</u>
           Authorize the connection as being the specified username.

       "--norc", "--rc"
           (Do not) load the configuration files.

       "--systemrc" <u>file</u>
           Use the system configuration file specified.

       "--userrc" <u>file</u>
           Use the user configuration file specified.

       "--port" <u>port</u>
           Connect to the *server* specified on the port specified.

       "--auth" <u>mechanism</u>
           Use the mechanism specified to authenticate. One of PLAIN, LOGIN, DIGEST-MD5, etc.

       "--help"
           Show a help message about these command-line options.

       "--version"
           Display the version of Cyrus IMAP the current ``cyradm`` command is a part of.

       "--server" <u>server</u>
           The server address to connect to.

</pre><h4><b>COMMANDS</b></h4><pre>
   <b>authenticate</b>
       <b>authenticate</b>  ["--minssf" <u>N</u>] ["--maxssf" <u>N</u>] ["--mechanisms" <u>list</u>] ["--service" <u>name</u>] ["--tlskey" <u>keyfile</u>]
       ["--notls"] ["--cafile" <u>cacertfile</u>] ["--capath" <u>cacertdir</u>] <u>user</u>

       Authenticate to server.  You must already be connected to a server and Cyrus imapd will refuse  to  allow
       you to re-authenticate once you have authenticated once.

       aliases: "auth", "login"

   <b>chdir</b>
       <b>chdir</b> <u>directory</u>

       Change  directory.  A "pwd" builtin is not provided, but the default command action will run "pwd" from a
       shell if invoked.

       aliases: "cd"

   <b>createmailbox</b>
       <b>createmailbox</b> ["--partition" <u>partition</u>] ["--specialuse" <u>specialuse</u>] <u>mailbox</u>

       <b>createmailbox</b> ["--specialuse" <u>specialuse</u>] <u>mailbox</u> <u>partition</u>

       Create a mailbox on the default or a specified partition.  Both old-style  and  getopt-style  usages  are
       accepted (combining them will produce an error).  Optionally assign a special use to the mailbox.

       New mailboxes inherit the ACL permissions of their parent mailbox, except for top-level mailboxes such as
       the user's INBOX. Mailboxes that are the user's INBOX are assigned all to the corresponding user.

       Example Usage
               localhost&gt; :command:`cm user.john`
               localhost&gt; :command:`lm`
               user.john (\HasNoChildren)
               localhost&gt; :command:`lam user.john`
               john lrswipkxtecda

           Note  that in the above example, the "unixhierarchysep" setting in imapd.conf is set to 0. When using
           the UNIX hierarchy separator, the "/" (forward slash)  character  would  be  used  as  the  hierarchy
           separator, and the example would look as follows:

       Example Usage with "unixhierarchysep: 1"
               localhost&gt; :command:`cm user/john`
               localhost&gt; :command:`lm`
               user/john (\HasNoChildren)
               localhost&gt; :command:`lam user/john`
               john lrswipkxtecda

       Note
           The above examples use the unqualified, shorthand user identifier john as the mailbox name.

           With the use of virtual domains, controlled through the "virtdomains" setting in <b><a href="../man5/imapd.conf.5.html">imapd.conf</a></b>(5).

       aliases: "cm", "create"

   <b>deleteaclmailbox</b>
       <b>deleteaclmailbox</b> <u>mailbox</u> <u>id</u> [...]

       Remove ACLs from the specified mailbox.

       aliases: "delteacl", "dam"

   <b>deletemailbox</b>
       <b>deletemailbox</b> <u>mailbox</u>

       Delete the specified mailbox.

       Administrators do not have implicit delete rights on mailboxes.  Use the "setaclmailbox" command to grant
       the "x" permission to your principal if you need to delete a mailbox you do not own.

       aliases: "delete", "dm"

   <b>disconnect</b>
       <b>disconnect</b>

       Disconnect from the current server.  The prompt will revert to "cyradm&gt;".  This does not quit cyradm.

       aliases: "disc"

   <b>exit</b>
       <b>exit</b> [<u>number</u>]

       Exit  "cyradm",  optionally with a specific exit status; the exit status of the last command will be used
       if one is not specified.

       aliases: "quit"

   <b>help</b>
       <b>help</b> [command]

       Show help for "command" or all commands.

       aliases: "?"

   <b>getmetadata</b>
       <b>getmetadata</b> [<u>mailbox</u>]

       Display mailbox/server metadata

       aliases: "getmd"

   <b>info</b>
       <b>info</b> [<u>mailbox</u>]

       Display the mailbox/server annotations.

   <b>listaclmailbox</b>
       <b>listaclmailbox</b> <u>mailbox</u>

       List ACLs on the specified mailbox.

       aliases: "lam", "listacl"

   <b>listmailbox</b>
       <b>listmailbox</b> ["--subscribed"] ["--specialuse"] [<u>pattern</u> [<u>reference</u>]]

       List all, or all subscribed or special-use, mailboxes matching the specified pattern.   The  pattern  may
       have  embedded  wildcards  '*'  or  '%', which match anything or anything except the separator character,
       respectively.

       Mailboxes returned will be relative to the specified reference  if  one  is  specified.   This  allows  a
       mailbox list to be limited to a particular hierarchy.

       In  some  cases  when  the  '%'  wildcard  is used to end a pattern, it may match an entry which is not a
       mailbox but which contains other mailboxes.  In this case, the entry will be  parenthesized  to  indicate
       that it is a root for other mailboxes, as opposed to a mailbox itself.

       aliases: "list", "lm"

   <b>listquota</b>
       <b>listquota</b> <u>root</u>

       List  quotas  on  specified root.  If the specified mailbox path does not have a quota assigned, an error
       will be raised; see "listquotaroot" for a way to find the quota root for a mailbox.

       aliases: "lq"

   <b>listquotaroot</b>
       <b>listquotaroot</b> <u>mailbox</u>

       Show quota roots and quotas for mailbox

       aliases: "lqm", "lqr"

   <b>mboxconfig</b>
       <b>mboxconfig</b> ["--private"] <u>mailbox</u> <u>attribute</u> <u>value</u>

       Set mailbox metadata, optionally set the private instead of the shared version of the metadata.  A  value
       of "none" will remove the attribute.

       The currently supported attributes are:

       "comment" <u>description</u>
           Sets a comment or description associated with the mailbox.

       "expire" <u>days</u>
           Sets the number of days after which messages will be expired from the mailbox.

       "news2mail" <u>address</u>
           Sets an email address to which messages injected into the server via NNTP will be sent.

       "pop3showafter" <u>time</u>
           Sets  a  time  (in  RFC3501 format, for example "6-Jan-2011 11:45:32 +1100") which specifies a cutoff
           date such that POP3 fetching of the folder does not see messages  whose  internaldate  is  before  or
           equal to the date.

       "sharedseen" <u>true|false</u>
           Enables  the use of a shared \Seen flag on messages rather than a per-user \Seen flag.  The 's' right
           in the mailbox ACL still controls whether a user can set the shared \Seen flag.

       "sieve" <u>scriptname</u>
           Indicates the name of the global sieve script that should be run when a message is delivered  to  the
           shared mailbox (not used for personal mailboxes).

       "squat" <u>true|false</u>
           Indicates that the mailbox should have a squat index created for it.

       aliases: "mboxcfg"

   <b>reconstruct</b>
       <b>reconstruct</b> ["-r"] <u>mailbox</u>

       Reconstruct  the  specified  mailbox, optionally recursing and reconstructing child mailboxes if the "-r"
       flag is given.

       For more information see <b><a href="../man8/reconstruct.8.html">reconstruct</a></b>(8).

   <b>renamemailbox</b>
       <b>renamemailbox</b> ["--partition" <u>partition</u>] <u>oldname</u> <u>newname</u>

       <b>renamemailbox</b> <u>oldname</u> <u>newname</u> [<u>partition</u>]

       Rename the specified mailbox, optionally moving it to a different partition.  Both old-style and  getopt-
       style usages are accepted; combining them will produce an error.

       aliases: "rename", "renm"

   <b>server</b>
       <b>server</b>

       <b>server</b> <u>[--noauthenticate]</u> <u>[server]</u>

       With  no  arguments,  show the current server.  With an argument, connect to that server.  It will prompt
       for automatic login unless the "--noauthenticate" option is specified.  (This may change; in  particular,
       either automatic authentication will be removed or all "authenticate" options will be added.)

       When  connected to a server, <b>cyradm</b>'s prompt changes from "cyradm&gt;" to "servername&gt;", where <u>servername</u> is
       the fully qualified domain name of the connected server.

       aliases: "connect", "servername"

   <b>setaclmailbox</b>
       <b>setaclmailbox</b> <u>mailbox</u> <u>id</u> <u>rights</u> [<u>id</u> <u>rights</u> ...]

       Set ACLs on a mailbox.  The ACL may be  one  of  the  special  strings  "none",  "read"  ("lrs"),  "post"
       ("lrsp"), "append" ("lrsip"), "write" ("lrswipkxte"), "delete" ("lrxte"), or "all" ("lrswipkxte"), or any
       combinations of the ACL codes:

       <b>l</b>   Lookup (mailbox is visible to LIST/LSUB, SUBSCRIBE mailbox)

       <b>r</b>   Read (SELECT/EXAMINE the mailbox, perform STATUS)

       <b>s</b>   Seen (set/clear \SEEN flag via STORE, also set \SEEN flag during APPEND/COPY/FETCH BODY[...])

       <b>w</b>   Write flags other than \SEEN and \DELETED

       <b>i</b>   Insert (APPEND, COPY destination)

       <b>p</b>   Post (send mail to mailbox)

       <b>k</b>   Create mailbox (CREATE new sub-mailboxes, parent for new mailbox in RENAME)

       <b>x</b>   Delete mailbox (DELETE mailbox, old mailbox name in RENAME)

       <b>t</b>   Delete messages (set/clear \DELETED flag via STORE, also set \DELETED flag during APPEND/COPY)

       <b>e</b>   Perform EXPUNGE and expunge as part of CLOSE

       <b>a</b>   Administer (SETACL/DELETEACL/GETACL/LISTRIGHTS)

       aliases: "setacl", "sam"

   <b>setinfo</b>
       <b>setinfo</b> <u>attribute</u> <u>value</u>

       Set  server  metadata.   A value of "none" will remove the attribute.  The currently supported attributes
       are:

       "motd" <u>message</u>
           Sets a "message of the day".  The message gets displayed as an ALERT upon connection.

       "comment" <u>note</u>
           Sets a comment or description associated with the server.

       "admin" <u>address</u>
           Sets the administrator email address for the server.

       "shutdown" <u>message</u>
           Sets a shutdown message.  The message gets displayed as an ALERT and all users are disconnected  from
           the server (subsequent logins are disallowed).

       "expire" <u>days</u>
           Sets  the number of days after which messages will be expired from the server (unless overridden by a
           mailbox annotation).

       "squat" <u>true|false</u>
           Indicates that all mailboxes should have a squat indexes created for them  (unless  overridden  by  a
           mailbox annotation).

   <b>setmetadata</b>
       <b>setmetadata</b> [--private] mailbox [<u>annotation</u>] <u>value</u>

       Set        metadata        on        mailbox,        where        <u>annotation</u>        is       one       of
       [comment|expire|news2mail|pop3showafter|sharedseen|sieve|specialuse| squat|/&lt;explicit annotation&gt;].

       Note that <u>value</u> with a leading backslash must be escaped with an additional backslash.  For example:

         setmetadata --private Spam specialuse "\\Junk"

       Note, too, that "private" annotations are private to the user currently authenticated as, not necessarily
       the owner of the mailbox.  To set annotations for another user you must authorize as that user.

       In addition to the use of optional flag <b>--private</b>, one may use a  more  explicit  syntax,  prefixing  the
       annotation with '/shared/' or '/private/' as in this example:

         setmetadata Spam /private/specialuse "\\Junk"

       aliases: "setmd"

   <b>setquota</b>
       <b>setquota</b> <u>root</u> <u>resource</u> <u>value</u> [<u>resource</u> <u>value</u> ...]

       Set a quota on the specified root, which may or may not be an actual mailbox. The <u>resources</u> understood by
       <b>Cyrus</b>  are  "STORAGE",  "MESSAGE", "X-NUM-FOLDERS" and "X-ANNOTATION-STORAGE".  The storage units are, as
       defined in RFC 2087, groups of 1024 octets (i.e.  Kilobytes). The <u>value</u> may be the special string  "none"
       which will remove the quota.

       aliases: "sq"

   <b>subscribe</b>
       <b>subscribe</b> <u>mailbox</u>

       Subscribe to the given mailbox.

   <b>unsubscribe</b>
       <b>unsubscribe</b> <u>mailbox</u>

       Unsubscribe to the given mailbox.

   <b>version</b>
       <b>version</b>

       Display the version info of the current server.

       aliases: "ver"

   <b>xfermailbox</b>
       <b>xfermailbox</b> ["--partition" <u>partition</u>] <u>mailbox</u> <u>server</u>

       <b>xfermailbox</b> <u>mailbox</u> <u>server</u> [<u>partition</u>]

       Transfer  (relocate) the specified mailbox to a different server.  Both old-style and getopt-style usages
       are accepted; combining them will produce an error.

       aliases: "xfer"

</pre><h4><b>NOTES</b></h4><pre>
       GNU-style long options must be given in their entirety; Tcl-style options may be abbreviated.

       Tcl-style options are provided as a compatibility feature.  They will probably go away in the future.

       Multiple commands can be given on a line, separated by ';' characters.

       All commands set an exit status, which at present is not useful.

       Unknown commands are passed to a subshell for execution.

       The Tcl version of <b>cyradm</b> is used for scripting as well as interactively.  While this is  possible  to  a
       limited  extent  by  use of the "run" method, scripting would normally be done with "Cyrus::IMAP::Admin",
       which is far more flexible than either interactive "cyradm" or the Tcl scripting mechanism for Cyrus.

       <b>cyradm</b> understands <b><a href="file:/bin/sh">/bin/sh</a></b>-style redirection:   any  command  can  have  its  standard  or  error  output
       redirected,  with  all  <b>sh</b>-style  redirections (except "&lt;&gt;") supported.  It does not currently understand
       pipes or backgrounding.

       If the "Term::Readline::Perl" or "Term::Readline::GNU" modules are available, <b>cyradm</b> will use it.

       An alias facility is implemented internally, but no access  is  currently  provided  to  it.   This  will
       change,  if only to allow some of the predefined aliases to be removed if they conflict with useful shell
       commands.

</pre><h4><b>AUTHOR</b></h4><pre>
       Brandon S. Allbery, <a href="mailto:allbery@ece.cmu.edu">allbery@ece.cmu.edu</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Cyrus::IMAP::Admin, Term::ReadLine, <b><a href="../man1/sh.1.html">sh</a></b>(1), <b><a href="../man1/perl.1.html">perl</a></b>(1), <b><a href="../man8/imapd.8.html">imapd</a></b>(8), <b><a href="../man5/imapd.conf.5.html">imapd.conf</a></b>(5), <b><a href="../man8/reconstruct.8.html">reconstruct</a></b>(8)

perl v5.40.1                                       2025-06-27                                   <u>IMAP::<a href="../man3pm/Shell.3pm.html">Shell</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>