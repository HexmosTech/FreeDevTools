<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fileutil::multi::op - Multi-file operation, scatter/gather</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fileutil::multi::op - Multi-file operation, scatter/gather

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>fileutil::multi::op</b> <b>?0.5.4?</b>

       package require <b>wip</b> <b>?1.0?</b>

       <b>::fileutil::multi::op</b> ?<u>opName</u>? ?<u>word</u>...?

       <b>opName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <b>$opName</b> <b>do</b> ?<u>word</u>...?

       <b>into</b> <u>directory</u>

       <b>in</b> <u>directory</u>

       <b>to</b> <u>directory</u>

       <b>from</b> <u>directory</u>

       <b>not</b> <u>pattern</u>

       <b>for</b> <u>pattern</u>

       <b>exclude</b> <u>pattern</u>

       <b>but</b>

       <b>except</b>

       <b>as</b> <u>name</u>

       <b>recursive</b>

       <b>recursively</b>

       <b>copy</b>

       <b>move</b>

       <b>remove</b>

       <b>expand</b>

       <b>invoke</b> <u>cmdprefix</u>

       <b>reset</b>

       <b>(</b>

       <b>)</b>

       <b>cd</b> <u>directory</u>

       <b>up</b>

       <b>for-windows</b>

       <b>for-win</b>

       <b>for-unix</b>

       <b>the</b> <u>pattern</u>

       <b>the-set</b> <u>varname</u>

       <b>-&gt;</b> <u>varname</u>

       <b>strict</b>

       <b>!strict</b>

       <b>files</b>

       <b>links</b>

       <b>directories</b>

       <b>dirs</b>

       <b>all</b>

       <b>state?</b>

       <b>as?</b>

       <b>excluded?</b>

       <b>from?</b>

       <b>into?</b>

       <b>operation?</b>

       <b>recursive?</b>

       <b>strict?</b>

       <b>type?</b>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides  objects  which  are  able  to perform actions on multiple files selected by glob
       patterns.

       At the core is a domain specific language allowing the easy specification of multi-file copy and/or  move
       and/or deletion operations. Alternate names would be scatter/gather processor, or maybe even assembler.

</pre><h4><b>CLASS</b> <b>API</b></h4><pre>
       The main command of the package is:

       <b>::fileutil::multi::op</b> ?<u>opName</u>? ?<u>word</u>...?
              The  command creates a new multi-file operation object with an associated global Tcl command whose
              name is <u>opName</u>.  This command can be used to invoke the various possible file operations.  It  has
              the following general form:

              <b>opName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
                     <u>Option</u> and the <u>arg</u>s determine the exact behavior of the command.

       If the string <b>%AUTO%</b> is used as the <u>opName</u> then the package will generate a unique name on its own.

       If  one  or  more <u>word</u>s are specified they are interpreted as an initial set of file commands to execute.
       I.e. the method <b>do</b> of the newly  constructed  object  is  implicitly  invoked  using  the  words  as  its
       arguments.

</pre><h4><b>OBJECT</b> <b>API</b></h4><pre>
       The following methods are possible for multi-file operation objects:

       <b>$opName</b> <b>do</b> ?<u>word</u>...?
              This  method  interprets the specified words as file commands to execute. See the section <b>FILE</b> <b>API</b>
              for the set of acceptable commands, their syntax, and semantics.

              The result of the method is the result generated by the last file command it executed.

</pre><h4><b>FILE</b> <b>API</b></h4><pre>
       Both object constructor and method <b>do</b> take a list of  words  and  interpret  them  as  file  commands  to
       execute.  The  names  were  chosen  to  allow the construction of operations as sentences in near-natural
       language. Most of the commands influence just the state of the object,  i.e.  are  simply  providing  the
       configuration used by the command triggering the actual action.

       <b>into</b> <u>directory</u>
              Specifies the destination directory for operations.

       <b>in</b> <u>directory</u>
              Alias for <b>into</b>.

       <b>to</b> <u>directory</u>
              Alias for <b>into</b>.

       <b>from</b> <u>directory</u>
              Specifies the source directory for operations.

       <b>not</b> <u>pattern</u>
              Specifies a glob pattern for paths to be excluded from the operation.

       <b>for</b> <u>pattern</u>
              Alias for <b>not</b>.

       <b>exclude</b> <u>pattern</u>
              Alias for <b>not</b>.

       <b>but</b>    Has  no  arguments  of its own, but looks ahead in the list of words and executes all <b>not</b> commands
              immediately following it. This allows the construction of "but not" and "but exclude" clauses  for
              a more natural sounding specification of excluded paths.

       <b>except</b> A  semi-alias  for  <b>but</b>.  Has  no  arguments  of its own, but looks ahead in the list of words and
              executes all <b>for</b> commands immediately following it. This allows the construction of  "except  for"
              clauses for a more natural sounding specification of excluded paths.

       <b>as</b> <u>name</u>
              Specifies a new name for the first file handled by the current operation. I.e. for the renaming of
              a single file during the operation.

       <b>recursive</b>
              Signals  that  file  expansion  should  happen  in  the whole directory hierarchy and not just the
              directory itself.

       <b>recursively</b>
              An alias for <b>recursive</b>.

       <b>copy</b>   Signals that the operation is the copying of files from source to destination  directory  per  the
              specified inclusion and exclusion patterns.

       <b>move</b>   Signals  that  the  operation  is the moving of files from source to destination directory per the
              specified inclusion and exclusion patterns.

       <b>remove</b> Signals that the operation is the removal of files in the destination directory per the  specified
              inclusion and exclusion patterns.

       <b>expand</b> Signals  that  there  is no operation but the calculation of the set of files from the include and
              exclude patterns. This operation is not available if <b>the-set</b> is used.

       <b>invoke</b> <u>cmdprefix</u>
              Signals that the user-specified command prefix <u>cmdprefix</u> is the operation to perform. The  command
              prefix  is executed at the global level and given the source directory, destination directory, and
              set of files (as dictionary mapping from source to destination files), in this order.

       <b>reset</b>  Forces the object into the ground state where all parts of the configuration have default values.

       <b>(</b>      Saves a copy of the current object state on a stack.

       <b>)</b>      Takes the state at the top of the state stack and restores it,  i.e.  makes  it  the  new  current
              object state.

       <b>cd</b> <u>directory</u>
              Changes the destination directory to the sub-directory <u>directory</u> of the current destination.

       <b>up</b>     Changes the destination directory to the parent directory of the current destination.

       <b>for-windows</b>
              Checks that Windows is the current platform. Aborts processing if not.

       <b>for-win</b>
              An alias for <b>for-windows</b>.

       <b>for-unix</b>
              Checks that Unix is the current platform. Aborts processing if not.

       <b>the</b> <u>pattern</u>
              This command specifies the files to operate on per a glob pattern, and is also the active element,
              i.e.  the  command  which  actually  performs the specified operation. All the other commands only
              modified the object state to set the operation up, but di nothing else.

              To allow for a more natural sounding syntax this command also looks ahead in  the  list  of  words
              looks  and  executes  several commands immediately following it before performing its own actions.
              These commands are <b>as</b>, <b>but</b>, <b>exclude</b>, <b>except</b>, <b>from</b>, and <b>into</b> (and aliases). That way these commands
              act like qualifiers, and still take effect as if they had been written before this command.

              After the operation has been performed the object state the exclude patterns and the  alias  name,
              if specified, are reset to their default values (i.e. empty), but nothing else.

       <b>the-set</b> <u>varname</u>
              Like  <b>the</b>,  however  the  set  of files to use is not specified implicitly per a glob pattern, but
              contained and loaded from the specified variable. The operation <b>expand</b> is not  available  if  this
              command is used.

       <b>-&gt;</b> <u>varname</u>
              Saves the set of files from the last expansion into the specified variable.

       <b>strict</b> Make  file  expansion and definition of destination directory (<b>in</b> and aliases) strict, i.e. report
              errors for missing directories, and empty expansion.

       <b>!strict</b>
              Complement of <b>strict</b>. A missing destination directory or  empty  expansion  are  not  reported  as
              errors.

       <b>files</b>  Limit the search to files. Default is to accept every type of path.

       <b>links</b>  Limit the search to symbolic links. Default is to accept every type of path.

       <b>directories</b>
              Limit the search to directories. Default is to accept every type of path.

       <b>dirs</b>   An alias for <b>directories</b>.

       <b>all</b>    Accept all types of paths (default).

       <b>state?</b> Returns the current state of the object as dictionary. The dictionary keys and their meanings are:

              <b>as</b>     Last setting made by <b>as</b>.

              <b>excluded</b>
                     List of currently known exclusion patterns.

              <b>from</b>   Current source directory, set by <b>from</b>.

              <b>into</b>   Current destination directory, set by <b>into</b> (and aliases).

              <b>operation</b>
                     Current operation to perform, set by <b>copy</b>, <b>move</b>, <b>remove</b>, <b>expand</b>, or <b>invoke</b>.

              <b>recursive</b>
                     Current recursion status. Set/unset by <b>recursive</b> and <b>!recursive</b>.

              <b>strict</b> Current strictness. Set/unset by <b>strict</b> and <b>!strict</b>.

              <b>type</b>   Current path type limiter. Set by either <b>files</b>, <b>directories</b>, <b>links</b>, or <b>all</b>.

       <b>as?</b>    Returns the current alias name.

       <b>excluded?</b>
              Returns the current set of exclusion patterns.

       <b>from?</b>  Returns the current source directory.

       <b>into?</b>  Returns the current destination directory.

       <b>operation?</b>
              Returns the current operation to perform.

       <b>recursive?</b>
              Returns the current recursion status.

       <b>strict?</b>
              Returns the current strictness.

       <b>type?</b>  Returns the current path type limiter.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following examples assume that the variable <b>F</b> contains a reference to a multi-file operation object.

                  $F do copy                       \
                the  *.dll                    \
                from c:/TDK/PrivateOpenSSL/bin \
                to   [installdir_of tls]

                  $F do move      \
                the  *       \
                from /sources \
                into /scratch  \
                but not *.html

                  # Alternatively use 'except for *.html'.

                  $F do           \
                move         \
                the  index    \
                from /sources  \
                into /scratch   \
                as   pkgIndex.tcl

                  $F do         \
                remove     \
                the *.txt  \
                in /scratch

       Note  that  the  fact  that most commands just modify the object state allows us to use more off forms as
       specifications instead of just nearly-natural language sentences.  For example the second example in this
       section can re-arranged into:

                  $F do            \
                from /sources \
                into /scratch  \
                but not *.html \
                move           \
                the  *

       and the result is not only still a valid specification, but even stays relatively readable.

       Further note that the information collected by the commands <b>but</b>, <b>except</b>, and <b>as</b>  is  automatically  reset
       after  the associated <b>the</b> was executed. However no other state is reset in that manner, allowing the user
       to avoid repetitions of unchanging information. For example the second and third examples of this section
       can be merged and rewritten into the equivalent:

              $F do                   \
                  move                 \
                  the  *                \
                  from /sources          \
                  into /scratch           \
                  but not *.html not index \
                  the  index               \
                  as   pkgIndex.tcl

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the  category  <u>fileutil</u>  of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       copy, file utilities, move, multi-file, remove

</pre><h4><b>CATEGORY</b></h4><pre>
       Programming tools

tcllib                                                0.5.4                            <u>fileutil::multi::<a href="../man3tcl/op.3tcl.html">op</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>