<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>curl_multi_cleanup - close down a multi session</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       curl_multi_cleanup - close down a multi session

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLMcode curl_multi_cleanup(CURLM *multi_handle);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  function  is the opposite of <u><a href="../man3/curl_multi_init.3.html">curl_multi_init</a>(3)</u>. Cleans up and removes a whole multi stack. It does
       not free or touch any individual easy handles in any way - they still need  to  be  closed  individually,
       using the usual <u><a href="../man3/curl_easy_cleanup.3.html">curl_easy_cleanup</a>(3)</u> way. The order of cleaning up should be:

       1 - <u><a href="../man3/curl_multi_remove_handle.3.html">curl_multi_remove_handle</a>(3)</u> before any easy handles are cleaned up

       2  - <u><a href="../man3/curl_easy_cleanup.3.html">curl_easy_cleanup</a>(3)</u> can now be called independently since the easy handle is no longer connected to
       the multi handle

       3 - <u><a href="../man3/curl_multi_cleanup.3.html">curl_multi_cleanup</a>(3)</u> should be called when all easy handles are removed

       When this function is called, remaining entries in the connection pool held by the multi handle are  shut
       down, which might trigger calls to the <u><a href="../man3/CURLMOPT_SOCKETFUNCTION.3.html">CURLMOPT_SOCKETFUNCTION</a>(3)</u> callback.

       Passing in a NULL pointer in <u>multi_handle</u> makes this function return CURLM_BAD_HANDLE immediately with no
       other action.

       Any use of the <b>multi_handle</b> after this function has been called and have returned, is illegal.

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURLM *multi = curl_multi_init();

         /* when the multi transfer is done ... */

         /* remove all easy handles, then: */
         <a href="../manmulti/curl_multi_cleanup.multi.html">curl_multi_cleanup</a>(multi);
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.9.6

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This function returns a CURLMcode indicating success or error.

       CURLM_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/curl_easy_cleanup.3.html">curl_easy_cleanup</a></b>(3), <b><a href="../man3/curl_easy_init.3.html">curl_easy_init</a></b>(3), <b><a href="../man3/curl_multi_get_handles.3.html">curl_multi_get_handles</a></b>(3), <b><a href="../man3/curl_multi_init.3.html">curl_multi_init</a></b>(3)

libcurl                                            2025-06-16                              <u><a href="../man3/curl_multi_cleanup.3.html">curl_multi_cleanup</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>