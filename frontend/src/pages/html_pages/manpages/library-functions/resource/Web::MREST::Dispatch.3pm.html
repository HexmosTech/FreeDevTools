<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App::MREST::Dispatch - Resource handlers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libweb-mrest-perl">libweb-mrest-perl_0.290-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       App::MREST::Dispatch - Resource handlers

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Your application should not call any of the routines in this module directly.  They are called by
       Web::MREST::Resource during the course of request processing.  What your application can do is provide
       its own resource handlers.

       The resource handlers are called as ordinary functions with a sole argument: the MREST context.

</pre><h4><b>INITIALIZATION/RESOURCE</b> <b>DEFINITIONS</b></h4><pre>
       In this section we provide definitions of all resources handled by this module.  These are picked up by
       Web::MREST::InitRouter.

       This resource is the parent of all resources that do not specify a parent in their resource definition.
       EOH
               },

               # bugreport
               'bugreport' =&gt;
               {
                   parent =&gt; '/',
                   handler =&gt; {
                       GET =&gt; 'handler_bugreport',
                   },
                   cli =&gt; 'bugreport',
                   description =&gt; 'Display instructions for reporting bugs in Web::MREST',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       Returns a JSON structure containing instructions for reporting bugs.  EOH
               },

               # configinfo
               'configinfo' =&gt;
               {
                   parent =&gt; '/',
                   handler =&gt; {
                       GET =&gt; 'handler_configinfo',
                   },
                   cli =&gt; 'configinfo',
                   description =&gt; 'Display information about Web::MREST configuration',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       Returns a list of directories that were scanned for configuration files.  EOH
               },

               # docu
               'docu' =&gt;
               {
                   parent =&gt; '/',
                   handler =&gt; 'handler_noop',
                   cli =&gt; 'docu',
                   description =&gt; 'Access on-line documentation (via POST to appropriate subresource)',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       This resource provides access to on-line documentation through its subresources: 'docu/pod', 'docu/html',
       and 'docu/text'.

       To get documentation on a resource, send a POST reqeuest for one of these subresources, including the
       resource name in the request entity as a bare JSON string (i.e. in double quotes).  EOH
               },

               # docu/pod
               'docu/pod' =&gt;
               {
                   parent =&gt; 'docu',
                   handler =&gt; {
                       POST =&gt; 'handler_docu',
                   },
                   cli =&gt; 'docu pod $RESOURCE',
                   description =&gt; 'Display POD documentation of a resource',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       This resource provides access to on-line help documentation in POD format.  It expects to find a resource
       name (e.g. "employee/eid/:eid" including the double-quotes, and without leading or trailing slash) in the
       request body. It returns a string containing the POD source code of the resource documentation.  EOH
               },

               # docu/html
               'docu/html' =&gt;
               {
                   parent =&gt; 'docu',
                   handler =&gt; {
                       POST =&gt; 'handler_docu',
                   },
                   cli =&gt; 'docu html $RESOURCE',
                   description =&gt; 'Display HTML documentation of a resource',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       This resource provides access to on-line help documentation. It expects to find a resource name (e.g.
       "employee/eid/:eid" including the double-quotes, and without leading or trailing slash) in the request
       body. It generates HTML from the resource documentation's POD source code.  EOH
               },

               # docu/text
               'docu/text' =&gt;
               {
                   parent =&gt; 'docu',
                   handler =&gt; {
                       POST =&gt; 'handler_docu',
                   },
                   cli =&gt; 'docu text $RESOURCE',
                   description =&gt; 'Display resource documentation in plain text',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       This resource provides access to on-line help documentation. It expects to find a resource name (e.g.
       "employee/eid/:eid" including the double-quotes, and without leading or trailing slash) in the request
       body. It returns a plain text rendering of the POD source of the resource documentation.  EOH
               },

               # echo
               'echo' =&gt;
               {
                   parent =&gt; '/',
                   handler =&gt; {
                       POST =&gt; 'handler_echo',
                   },
                   cli =&gt; 'echo [$JSON]',
                   description =&gt; 'Echo the request body',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       This resource simply takes whatever content body was sent and echoes it back in the response body.  EOH
               },

               # noop
               'noop' =&gt;
               {
                   parent =&gt; '/',
                   handler =&gt; 'handler_noop',
                   cli =&gt; 'noop',
                   description =&gt; 'A resource that does nothing',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       Regardless of anything, this resource does nothing at all.  EOH
               },

               # param/:type/:param
               'param/:type/:param' =&gt;
               {
                   parent =&gt; '/',
                   handler =&gt; {
                       'GET' =&gt; 'handler_param',
                       'PUT' =&gt; 'handler_param',
                       'DELETE' =&gt; 'handler_param',
                   },
                   cli =&gt; {
                       'GET' =&gt; 'param $TYPE $PARAM',
                       'PUT' =&gt; 'param $TYPE $PARAM $VALUE',
                       'DELETE' =&gt; 'param $TYPE $PARAM',
                   },
                   description =&gt; {
                       'GET' =&gt; 'Display value of a meta/core/site parameter',
                       'PUT' =&gt; 'Set value of a parameter (meta only)',
                       'DELETE' =&gt; 'Delete a parameter (meta only)',
                   },
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       This resource can be used to look up (GET) meta, core, and site parameters, as well as to set (PUT) and
       delete (DELETE) meta parameters.  EOH
                   validations =&gt; {
                       'type' =&gt; qr/^(meta)|(core)|(site)$/,
                       'param' =&gt; qr/^[[:alnum:]_][[:alnum:]_-]+$/,
                   },
               },

               # test/?:specs
               'test/?:specs' =&gt;
               {
                   parent =&gt; '/',
                   handler =&gt; 'handler_test',
                   cli =&gt; 'test [$SPECS]',
                   description =&gt; "Resources for testing resource handling semantics",
               },

               # version
               'version' =&gt;
               {
                   parent =&gt; '/',
                   handler =&gt; {
                       GET =&gt; 'handler_version',
                   },
                   cli =&gt; 'version',
                   description =&gt; 'Display application name and version',
                   documentation =&gt; &lt;&lt;'EOH',
       =pod

       Shows the software version running on the present instance. The version displayed is taken from the
       $VERSION package variable of the package specified in the "MREST_APPLICATION_MODULE" site parameter.  EOH
               },

           };

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>init_router</b>
       Initialize (populate) the router. Called from Resource.pm when the first request comes waltzing in.

   <b>_first_pass_always_exists</b>
       Boilerplate code for use in handlers of resources that always exist

   <b>handler_bugreport</b>
       Handler for the "bugreport" resource.

   <b>handler_configinfo</b>
       Handler for the "configinfo" resource.

   <b>handler_docu</b>
       The definition of resource $docu_resource lacks a 'documentation' property EOH
           # if they want POD, give them POD; if they want HTML, give them HTML, etc.
           if ( $resource_name eq 'docu/pod' ) {
               $pl-&gt;{'format'} = 'POD';
               $pl-&gt;{'documentation'} = $docs;
           } elsif ( $resource_name eq 'docu/html' ) {
               $pl-&gt;{'format'} = 'HTML';
               $pl-&gt;{'documentation'} = pod_to_html( $docs );
           } else {
               # fall back to plain text
               $pl-&gt;{'format'} = 'text';
               $pl-&gt;{'documentation'} = pod_to_text( $docs );
           }
           return $CELL-&gt;status_ok( 'MREST_DISPATCH_ONLINE_DOCUMENTATION', payload =&gt; $pl ); }

   <b>handler_echo</b>
       Echo request body back in the response

   <b>handler_param</b>
       Handler for 'param/:type/:param' resource.

   <b>handler_noop</b>
       Generalized handler for resources that don't do anything.

   <b>handler_test</b>
       The only purpose of this resource is testing/demonstration of request handling.

   <b>handler_version</b>
       Handler for the "version" resource.

perl v5.36.0                                       2022-09-21                          <u>Web::MREST::<a href="../man3pm/Dispatch.3pm.html">Dispatch</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>