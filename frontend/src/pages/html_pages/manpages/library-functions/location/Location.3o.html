<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location - Source code locations (ranges of positions), used in parsetree.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ocaml-man">ocaml-man_5.3.0-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Location - Source code locations (ranges of positions), used in parsetree.

</pre><h4><b>Module</b></h4><pre>
       Module   Location

</pre><h4><b>Documentation</b></h4><pre>
       Module <b>Location</b>
        : <b>sig</b> <b>end</b>

       Source code locations (ranges of positions), used in parsetree.

       Warning: this module is unstable and part of <b>Compiler_libs</b> .

       <u>type</u> <u>t</u> = <b>Warnings.loc</b> = {
        loc_start : <b>Lexing.position</b> ;
        loc_end : <b>Lexing.position</b> ;
        loc_ghost : <b>bool</b> ;
        }

       Note on the use of Lexing.position in this module.  If <b>pos_fname</b> <b>=</b> <b>""</b> , then use <b>!input_name</b> instead.  If
       <b>pos_lnum</b>  <b>=</b>  <b>-1</b>  ,  then  <b>pos_bol</b>  <b>=</b> <b>0</b> . Use <b>pos_cnum</b> and re-parse the file to get the line and character
       numbers.  Else all fields are correct.

       <u>val</u> <u>none</u> : <b>t</b>

       An arbitrary value of type <b>t</b> ; describes an empty ghost range.

       <u>val</u> <u>is_none</u> : <b>t</b> <b>-&gt;</b> <b>bool</b>

       True for <b>Location.none</b> , false any other location

       <u>val</u> <u>in_file</u> : <b>string</b> <b>-&gt;</b> <b>t</b>

       Return an empty ghost range located in a given file.

       <u>val</u> <u>init</u> : <b>Lexing.lexbuf</b> <b>-&gt;</b> <b>string</b> <b>-&gt;</b> <b>unit</b>

       Set the file name and line number of the <b>lexbuf</b> to be the start of the named file.

       <u>val</u> <u>curr</u> : <b>Lexing.lexbuf</b> <b>-&gt;</b> <b>t</b>

       Get the location of the current token from the <b>lexbuf</b> .

       <u>val</u> <u>symbol_rloc</u> : <b>unit</b> <b>-&gt;</b> <b>t</b>

       <u>val</u> <u>symbol_gloc</u> : <b>unit</b> <b>-&gt;</b> <b>t</b>

       <u>val</u> <u>rhs_loc</u> : <b>int</b> <b>-&gt;</b> <b>t</b>

       <b>rhs_loc</b> <b>n</b> returns the location of the symbol at position <b>n</b> , starting at 1, in the current parser rule.

       <u>val</u> <u>rhs_interval</u> : <b>int</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>t</b>

       <u>val</u> <u>get_pos_info</u> : <b>Lexing.position</b> <b>-&gt;</b> <b>string</b> <b>*</b> <b>int</b> <b>*</b> <b>int</b>

       file, line, char

       <u>type</u> <b>'a</b> <u>loc</u> = {
        txt : <b>'a</b> ;
        loc : <b>t</b> ;
        }

       <u>val</u> <u>mknoloc</u> : <b>'a</b> <b>-&gt;</b> <b>'a</b> <b>loc</b>

       <u>val</u> <u>mkloc</u> : <b>'a</b> <b>-&gt;</b> <b>t</b> <b>-&gt;</b> <b>'a</b> <b>loc</b>

   <b>Input</b> <b>info</b>
       <u>val</u> <u>input_name</u> : <b>string</b> <b>ref</b>

       <u>val</u> <u>input_lexbuf</u> : <b>Lexing.lexbuf</b> <b>option</b> <b>ref</b>

       <u>val</u> <u>input_phrase_buffer</u> : <b>Buffer.t</b> <b>option</b> <b>ref</b>

   <b>Toplevel-specific</b> <b>functions</b>
       <u>val</u> <u>echo_eof</u> : <b>unit</b> <b>-&gt;</b> <b>unit</b>

       <u>val</u> <u>reset</u> : <b>unit</b> <b>-&gt;</b> <b>unit</b>

   <b>Rewriting</b> <b>path</b>
       <u>val</u> <u>rewrite_absolute_path</u> : <b>string</b> <b>-&gt;</b> <b>string</b>

       <b>rewrite_absolute_path</b> <b>path</b> rewrites <b>path</b> to honor the BUILD_PATH_PREFIX_MAP variable if  it  is  set.  It
       does not check whether <b>path</b> is absolute or not.  The result is as follows:

       -If BUILD_PATH_PREFIX_MAP is not set, just return <b>path</b> .

       -otherwise,  rewrite  using the mapping (and if there are no matching prefixes that will just return <b>path</b>
       ).

       See the BUILD_PATH_PREFIX_MAP spec

       <u>val</u> <u>rewrite_find_first_existing</u> : <b>string</b> <b>-&gt;</b> <b>string</b> <b>option</b>

       <b>rewrite_find_first_existing</b> <b>path</b> uses a BUILD_PATH_PREFIX_MAP mapping and  tries  to  find  a  source  in
       mapping that maps to a result that exists in the file system.  There are the following return values:

       - <b>None</b> , means either

       -BUILD_PATH_PREFIX_MAP is not set and <b>path</b> does not exists, or

       -no source prefixes of <b>path</b> in the mapping were found,

       - <b>Some</b> <b>target</b> , means <b>target</b> exists and either

       -BUILD_PATH_PREFIX_MAP is not set and <b>target</b> = <b>path</b> , or

       - <b>target</b> is the first file (in priority order) that <b>path</b> mapped to that exists in the file system.

       - <b>Not_found</b> raised, means some source prefixes in the map were found that matched <b>path</b> , but none of them
       existed in the file system. The caller should catch this and issue an appropriate error message.

       See the BUILD_PATH_PREFIX_MAP spec

       <u>val</u> <u>rewrite_find_all_existing_dirs</u> : <b>string</b> <b>-&gt;</b> <b>string</b> <b>list</b>

       <b>rewrite_find_all_existing_dirs</b> <b>dir</b> accumulates a list of existing directories, <b>dirs</b> , that are the result
       of   mapping   a   potentially   abstract   directory,   <b>dir</b>   ,  over  all  the  mapping  pairs  in  the
       BUILD_PATH_PREFIX_MAP environment variable, if any. The list <b>dirs</b> will be  in  priority  order  (head  as
       highest priority).

       The possible results are:

       - <b>[]</b> , means either

       -BUILD_PATH_PREFIX_MAP is not set and <b>dir</b> is not an existing directory, or

       -if set, then there were no matching prefixes of <b>dir</b> .

       - <b>Some</b> <b>dirs</b> , means dirs are the directories found. Either

       -BUILD_PATH_PREFIX_MAP is not set and <b>dirs</b> <b>=</b> <b>[dir]</b> , or

       -it was set and <b>dirs</b> are the mapped existing directories.

       -Not_found  raised,  means  some  source  prefixes  in  the map were found that matched <b>dir</b> , but none of
       mapping results were existing directories (possibly due to misconfiguration).  The  caller  should  catch
       this and issue an appropriate error message.

       See the BUILD_PATH_PREFIX_MAP spec

       <u>val</u> <u>absolute_path</u> : <b>string</b> <b>-&gt;</b> <b>string</b>

       <b>absolute_path</b>  <b>path</b>  first makes an absolute path, <b>s</b> from <b>path</b> , prepending the current working directory
       if <b>path</b> was relative.  Then  <b>s</b>  is  rewritten  using  <b>rewrite_absolute_path</b>  .   Finally  the  result  is
       normalized by eliminating instances of <b>'.'</b> or <b>'..'</b> .

   <b>Printing</b> <b>locations</b>
       <u>val</u> <u>show_filename</u> : <b>string</b> <b>-&gt;</b> <b>string</b>

       In -absname mode, return the absolute path for this filename.  Otherwise, returns the filename unchanged.

       <u>val</u> <u>print_filename</u> : <b>Format.formatter</b> <b>-&gt;</b> <b>string</b> <b>-&gt;</b> <b>unit</b>

       <u>val</u> <u>print_loc</u> : <b>Format.formatter</b> <b>-&gt;</b> <b>t</b> <b>-&gt;</b> <b>unit</b>

       <u>val</u> <u>print_locs</u> : <b>Format.formatter</b> <b>-&gt;</b> <b>t</b> <b>list</b> <b>-&gt;</b> <b>unit</b>

       <u>val</u> <u>separate_new_message</u> : <b>Format.formatter</b> <b>-&gt;</b> <b>unit</b>

       <u>module</u> <u>Doc</u> <u>:</u> <b>sig</b> <b>end</b>

   <b>Toplevel-specific</b> <b>location</b> <b>highlighting</b>
       <u>val</u> <u>highlight_terminfo</u> : <b>Lexing.lexbuf</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>t</b> <b>list</b> <b>-&gt;</b> <b>unit</b>

   <b>Reporting</b> <b>errors</b> <b>and</b> <b>warnings</b>
   <b>The</b> <b>type</b> <b>of</b> <b>reports</b> <b>and</b> <b>report</b> <b>printers</b>
       <u>type</u> <u>msg</u> = <b>Format_doc.t</b> <b>loc</b>

       <u>val</u> <u>msg</u> : <b>?loc:t</b> <b>-&gt;</b> <b>('a,</b> <b>Format_doc.formatter,</b> <b>unit,</b> <b>msg)</b> <b>format4</b> <b>-&gt;</b> <b>'a</b>

       <u>type</u> <u>report_kind</u> =
        | Report_error
        | Report_warning <b>of</b> <b>string</b>
        | Report_warning_as_error <b>of</b> <b>string</b>
        | Report_alert <b>of</b> <b>string</b>
        | Report_alert_as_error <b>of</b> <b>string</b>

       <u>type</u> <u>report</u> = {
        kind : <b>report_kind</b> ;
        main : <b>msg</b> ;
        sub : <b>msg</b> <b>list</b> ;
        footnote : <b>Format_doc.t</b> <b>option</b> ;
        }

       <u>type</u> <u>report_printer</u> = {
        pp : <b>report_printer</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>unit</b> ;
        pp_report_kind : <b>report_printer</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>report_kind</b> <b>-&gt;</b> <b>unit</b> ;
        pp_main_loc : <b>report_printer</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>t</b> <b>-&gt;</b> <b>unit</b> ;
        pp_main_txt : <b>report_printer</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>Format_doc.t</b> <b>-&gt;</b> <b>unit</b> ;
        pp_submsgs : <b>report_printer</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>msg</b> <b>list</b> <b>-&gt;</b> <b>unit</b> ;
        pp_submsg : <b>report_printer</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>msg</b> <b>-&gt;</b> <b>unit</b> ;
        pp_submsg_loc : <b>report_printer</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>t</b> <b>-&gt;</b> <b>unit</b> ;
        pp_submsg_txt : <b>report_printer</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>Format_doc.t</b> <b>-&gt;</b> <b>unit</b> ;
        }

       A printer for <b>report</b> s, defined using open-recursion.  The goal is to make it easy to define new printers
       by re-using code from existing ones.

   <b>Report</b> <b>printers</b> <b>used</b> <b>in</b> <b>the</b> <b>compiler</b>
       <u>val</u> <u>batch_mode_printer</u> : <b>report_printer</b>

       <u>val</u> <u>terminfo_toplevel_printer</u> : <b>Lexing.lexbuf</b> <b>-&gt;</b> <b>report_printer</b>

       <u>val</u> <u>best_toplevel_printer</u> : <b>unit</b> <b>-&gt;</b> <b>report_printer</b>

       Detects the terminal capabilities and selects an adequate printer

   <b>Printing</b> <b>a</b> <b>report</b>
       <u>val</u> <u>print_report</u> : <b>Format.formatter</b> <b>-&gt;</b> <b>report</b> <b>-&gt;</b> <b>unit</b>

       Display an error or warning report.

       <u>val</u> <u>report_printer</u> : <b>(unit</b> <b>-&gt;</b> <b>report_printer)</b> <b>ref</b>

       Hook for redefining the printer of reports.

       The  hook  is  a  <b>unit</b>  <b>-&gt;</b> <b>report_printer</b> and not simply a <b>report_printer</b> : this is useful so that it can
       detect the type of the output (a file, a terminal, ...) and select a printer accordingly.

       <u>val</u> <u>default_report_printer</u> : <b>unit</b> <b>-&gt;</b> <b>report_printer</b>

       Original report printer for use in hooks.

   <b>Reporting</b> <b>warnings</b>
   <b>Converting</b> <b>a</b> <b>Warnings.t</b> <b>into</b> <b>a</b> <b>report</b>
       <u>val</u> <u>report_warning</u> : <b>t</b> <b>-&gt;</b> <b>Warnings.t</b> <b>-&gt;</b> <b>report</b> <b>option</b>

       <b>report_warning</b> <b>loc</b> <b>w</b> produces a report for the given warning <b>w</b> , or <b>None</b> if the  warning  is  not  to  be
       printed.

       <u>val</u> <u>warning_reporter</u> : <b>(t</b> <b>-&gt;</b> <b>Warnings.t</b> <b>-&gt;</b> <b>report</b> <b>option)</b> <b>ref</b>

       Hook for intercepting warnings.

       <u>val</u> <u>default_warning_reporter</u> : <b>t</b> <b>-&gt;</b> <b>Warnings.t</b> <b>-&gt;</b> <b>report</b> <b>option</b>

       Original warning reporter for use in hooks.

   <b>Printing</b> <b>warnings</b>
       <u>val</u> <u>formatter_for_warnings</u> : <b>Format.formatter</b> <b>ref</b>

       <u>val</u> <u>print_warning</u> : <b>t</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>Warnings.t</b> <b>-&gt;</b> <b>unit</b>

       Prints a warning. This is simply the composition of <b>report_warning</b> and <b>print_report</b> .

       <u>val</u> <u>prerr_warning</u> : <b>t</b> <b>-&gt;</b> <b>Warnings.t</b> <b>-&gt;</b> <b>unit</b>

       Same as <b>print_warning</b> , but uses <b>!formatter_for_warnings</b> as output formatter.

   <b>Reporting</b> <b>alerts</b>
   <b>Converting</b> <b>an</b> <b>Alert.t</b> <b>into</b> <b>a</b> <b>report</b>
       <u>val</u> <u>report_alert</u> : <b>t</b> <b>-&gt;</b> <b>Warnings.alert</b> <b>-&gt;</b> <b>report</b> <b>option</b>

       <b>report_alert</b> <b>loc</b> <b>w</b> produces a report for the given alert <b>w</b> , or <b>None</b> if the alert is not to be printed.

       <u>val</u> <u>alert_reporter</u> : <b>(t</b> <b>-&gt;</b> <b>Warnings.alert</b> <b>-&gt;</b> <b>report</b> <b>option)</b> <b>ref</b>

       Hook for intercepting alerts.

       <u>val</u> <u>default_alert_reporter</u> : <b>t</b> <b>-&gt;</b> <b>Warnings.alert</b> <b>-&gt;</b> <b>report</b> <b>option</b>

       Original alert reporter for use in hooks.

   <b>Printing</b> <b>alerts</b>
       <u>val</u> <u>print_alert</u> : <b>t</b> <b>-&gt;</b> <b>Format.formatter</b> <b>-&gt;</b> <b>Warnings.alert</b> <b>-&gt;</b> <b>unit</b>

       Prints an alert. This is simply the composition of <b>report_alert</b> and <b>print_report</b> .

       <u>val</u> <u>prerr_alert</u> : <b>t</b> <b>-&gt;</b> <b>Warnings.alert</b> <b>-&gt;</b> <b>unit</b>

       Same as <b>print_alert</b> , but uses <b>!formatter_for_warnings</b> as output formatter.

       <u>val</u> <u>deprecated</u> : <b>?def:t</b> <b>-&gt;</b> <b>?use:t</b> <b>-&gt;</b> <b>t</b> <b>-&gt;</b> <b>string</b> <b>-&gt;</b> <b>unit</b>

       Prints a deprecation alert.

       <u>val</u> <u>alert</u> : <b>?def:t</b> <b>-&gt;</b> <b>?use:t</b> <b>-&gt;</b> <b>kind:string</b> <b>-&gt;</b> <b>t</b> <b>-&gt;</b> <b>string</b> <b>-&gt;</b> <b>unit</b>

       Prints an arbitrary alert.

       <u>val</u> <u>auto_include_alert</u> : <b>string</b> <b>-&gt;</b> <b>unit</b>

       Prints an alert that -I +lib has been automatically added to the load path

       <u>val</u> <u>deprecated_script_alert</u> : <b>string</b> <b>-&gt;</b> <b>unit</b>

       <b>deprecated_script_alert</b> <b>command</b> prints an alert that <b>command</b> <b>foo</b> has been deprecated in favour of <b>command</b>
       <b>./foo</b>

   <b>Reporting</b> <b>errors</b>
       <u>type</u> <u>error</u> = <b>report</b>

       An <b>error</b> is a <b>report</b> which <b>report_kind</b> must be <b>Report_error</b> .

       <u>type</u> <u>delayed_msg</u> = <b>unit</b> <b>-&gt;</b> <b>Format_doc.t</b> <b>option</b>

       <u>val</u> <u>error</u> : <b>?loc:t</b> <b>-&gt;</b> <b>?sub:msg</b> <b>list</b> <b>-&gt;</b> <b>?footnote:delayed_msg</b> <b>-&gt;</b> <b>string</b> <b>-&gt;</b> <b>error</b>

       <u>val</u>  <u>errorf</u> : <b>?loc:t</b> <b>-&gt;</b> <b>?sub:msg</b> <b>list</b> <b>-&gt;</b> <b>?footnote:delayed_msg</b> <b>-&gt;</b> <b>('a,</b> <b>Format_doc.formatter,</b> <b>unit,</b> <b>error)</b>
       <b>format4</b> <b>-&gt;</b> <b>'a</b>

       <u>val</u> <u>error_of_printer</u> : <b>?loc:t</b> <b>-&gt;</b> <b>?sub:msg</b> <b>list</b> <b>-&gt;</b> <b>?footnote:delayed_msg</b> <b>-&gt;</b> <b>(Format_doc.formatter</b> <b>-&gt;</b> <b>'a</b> <b>-&gt;</b>
       <b>unit)</b> <b>-&gt;</b> <b>'a</b> <b>-&gt;</b> <b>error</b>

       <u>val</u> <u>error_of_printer_file</u> : <b>(Format_doc.formatter</b> <b>-&gt;</b> <b>'a</b> <b>-&gt;</b> <b>unit)</b> <b>-&gt;</b> <b>'a</b> <b>-&gt;</b> <b>error</b>

   <b>Automatically</b> <b>reporting</b> <b>errors</b> <b>for</b> <b>raised</b> <b>exceptions</b>
       <u>val</u> <u>register_error_of_exn</u> : <b>(exn</b> <b>-&gt;</b> <b>error</b> <b>option)</b> <b>-&gt;</b> <b>unit</b>

       Each compiler module which defines a custom type of exception which can surface as a  user-visible  error
       should  register  a "printer" for this exception using <b>register_error_of_exn</b> .  The result of the printer
       is an <b>error</b> value containing a location, a message, and  optionally  sub-messages  (each  of  them  being
       located as well).

       <u>val</u> <u>error_of_exn</u> : <b>exn</b> <b>-&gt;</b> <b>[</b> <b>`Already_displayed</b> <b>|</b> <b>`Ok</b> <b>of</b> <b>error</b> <b>]</b> <b>option</b>

       <u>exception</u> <u>Error</u> <b>of</b> <b>error</b>

       Raising <b>Error</b> <b>e</b> signals an error <b>e</b> ; the exception will be caught and the error will be printed.

       <u>exception</u> <u>Already_displayed_error</u>

       Raising  <b>Already_displayed_error</b>  signals  an error which has already been printed. The exception will be
       caught, but nothing will be printed

       <u>val</u> <u>raise_errorf</u> : <b>?loc:t</b> <b>-&gt;</b> <b>?sub:msg</b> <b>list</b> <b>-&gt;</b> <b>?footnote:delayed_msg</b> <b>-&gt;</b> <b>('a,</b>  <b>Format_doc.formatter,</b>  <b>unit,</b>
       <b>'b)</b> <b>format4</b> <b>-&gt;</b> <b>'a</b>

       <u>val</u> <u>report_exception</u> : <b>Format.formatter</b> <b>-&gt;</b> <b>exn</b> <b>-&gt;</b> <b>unit</b>

       Reraise the exception if it is unknown.

OCamldoc                                           2025-06-12                                       <u><a href="../man3o/Location.3o.html">Location</a></u>(3o)
</pre>
 </div>
</div></section>
</div>
</body>
</html>