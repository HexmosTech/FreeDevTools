<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exlights  -  One  way  to  do  colored lighting effects in a hicolor video mode. Allegro game programming</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/allegro4-doc">allegro4-doc_4.4.3.1-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       exlights  -  One  way  to  do  colored lighting effects in a hicolor video mode. Allegro game programming
       library.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;allegro.h&gt;</b>

       <b>Example</b> <b>exlights</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This program shows one way to implement colored lighting effects in a hicolor video mode. Warning: it  is
       not  for  the  faint  of heart!  This is by no means the simplest or easiest to understand method, I just
       thought it was a cool concept that would be worth demonstrating.

       The basic approach is to select a 15 or 16 bit screen mode, but then draw onto  24  bit  memory  bitmaps.
       Since  we  only  need the bottom 5 bits of each 8 bit color in order to store 15 bit data within a 24 bit
       location, we can fit a light level into the top 3 bits.  The tricky bit is that these aren't actually  24
       bit  images  at all: they are implemented as 8 bit memory bitmaps, and we just store the red level in one
       pixel, green in the next, and blue in the next, making the total image  be  three  times  wider  than  we
       really  wanted.   This  allows  us to use all the normal 256 color graphics routines for drawing onto our
       memory surfaces, most importantly the lookup table translucency, which can be used to combine the  low  5
       bits of color and the top 3 bits of light in a single drawing operation.  Some trickery is needed to load
       24 bit data into this fake 8 bit format, and of course it needs a custom routine to convert the resulting
       image while copying it across to the hardware screen.

       This  program  chugs  slightly  on my p133, but not significantly worse than any double buffering in what
       amounts to a 1920x640, 256 color resolution. The light blending doesn't seem to slow it down  too  badly,
       so I think this technique would be quite usable on faster machines and in lower resolution hicolor modes.
       The  biggest  problem  is that although you keep the full 15 bit color resolution, you only get 3 bits of
       light, ie. 8 light levels.  You can do some nice colored light patches, but smooth gradients aren't going
       to work too well :-)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3alleg4/BITMAP.3alleg4.html">BITMAP</a></b>(3alleg4),   <b><a href="../man3alleg4/COLOR_MAP.3alleg4.html">COLOR_MAP</a></b>(3alleg4),   <b><a href="../man3alleg4/END_OF_MAIN.3alleg4.html">END_OF_MAIN</a></b>(3alleg4),    <b><a href="../man3alleg4/PALETTE.3alleg4.html">PALETTE</a></b>(3alleg4),    <b><a href="../man3alleg4/SCREEN_H.3alleg4.html">SCREEN_H</a></b>(3alleg4),
       <b><a href="../man3alleg4/SCREEN_W.3alleg4.html">SCREEN_W</a></b>(3alleg4),      <b><a href="../man3alleg4/allegro_error.3alleg4.html">allegro_error</a></b>(3alleg4),      <b><a href="../man3alleg4/allegro_init.3alleg4.html">allegro_init</a></b>(3alleg4),     <b><a href="../man3alleg4/allegro_message.3alleg4.html">allegro_message</a></b>(3alleg4),
       <b><a href="../man3alleg4/bitmap_color_depth.3alleg4.html">bitmap_color_depth</a></b>(3alleg4),    <b><a href="../man3alleg4/blit.3alleg4.html">blit</a></b>(3alleg4),    <b><a href="../man3alleg4/bmp_unwrite_line.3alleg4.html">bmp_unwrite_line</a></b>(3alleg4),     <b><a href="../man3alleg4/bmp_write_line.3alleg4.html">bmp_write_line</a></b>(3alleg4),
       <b><a href="../man3alleg4/circlefill.3alleg4.html">circlefill</a></b>(3alleg4),        <b><a href="../man3alleg4/clear_bitmap.3alleg4.html">clear_bitmap</a></b>(3alleg4),       <b><a href="../man3alleg4/clear_keybuf.3alleg4.html">clear_keybuf</a></b>(3alleg4),       <b><a href="../man3alleg4/color_map.3alleg4.html">color_map</a></b>(3alleg4),
       <b><a href="../man3alleg4/create_bitmap_ex.3alleg4.html">create_bitmap_ex</a></b>(3alleg4),   <b><a href="../man3alleg4/destroy_bitmap.3alleg4.html">destroy_bitmap</a></b>(3alleg4),   <b><a href="../man3alleg4/draw_trans_sprite.3alleg4.html">draw_trans_sprite</a></b>(3alleg4),    <b><a href="../man3alleg4/fixatan2.3alleg4.html">fixatan2</a></b>(3alleg4),
       <b><a href="../man3alleg4/fixsqrt.3alleg4.html">fixsqrt</a></b>(3alleg4),    <b><a href="../man3alleg4/fixtoi.3alleg4.html">fixtoi</a></b>(3alleg4),    <b><a href="../man3alleg4/getb_depth.3alleg4.html">getb_depth</a></b>(3alleg4),   <b><a href="../man3alleg4/getg_depth.3alleg4.html">getg_depth</a></b>(3alleg4),   <b><a href="../man3alleg4/getpixel.3alleg4.html">getpixel</a></b>(3alleg4),
       <b><a href="../man3alleg4/getr_depth.3alleg4.html">getr_depth</a></b>(3alleg4),     <b><a href="../man3alleg4/hsv_to_rgb.3alleg4.html">hsv_to_rgb</a></b>(3alleg4),     <b><a href="../man3alleg4/install_keyboard.3alleg4.html">install_keyboard</a></b>(3alleg4),      <b><a href="../man3alleg4/install_mouse.3alleg4.html">install_mouse</a></b>(3alleg4),
       <b><a href="../man3alleg4/install_timer.3alleg4.html">install_timer</a></b>(3alleg4),     <b><a href="../man3alleg4/itofix.3alleg4.html">itofix</a></b>(3alleg4),     <b><a href="../man3alleg4/key.3alleg4.html">key</a></b>(3alleg4),     <b><a href="../man3alleg4/keypressed.3alleg4.html">keypressed</a></b>(3alleg4),    <b><a href="../man3alleg4/line.3alleg4.html">line</a></b>(3alleg4),
       <b><a href="../man3alleg4/load_bitmap.3alleg4.html">load_bitmap</a></b>(3alleg4),   <b><a href="../man3alleg4/makecol.3alleg4.html">makecol</a></b>(3alleg4),   <b><a href="../man3alleg4/mouse_x.3alleg4.html">mouse_x</a></b>(3alleg4),   <b><a href="../man3alleg4/mouse_y.3alleg4.html">mouse_y</a></b>(3alleg4),    <b><a href="../man3alleg4/poll_mouse.3alleg4.html">poll_mouse</a></b>(3alleg4),
       <b><a href="../man3alleg4/replace_filename.3alleg4.html">replace_filename</a></b>(3alleg4),      <b><a href="../man3alleg4/retrace_count.3alleg4.html">retrace_count</a></b>(3alleg4),     <b><a href="../man3alleg4/screen.3alleg4.html">screen</a></b>(3alleg4),     <b><a href="../man3alleg4/select_palette.3alleg4.html">select_palette</a></b>(3alleg4),
       <b><a href="../man3alleg4/set_color_conversion.3alleg4.html">set_color_conversion</a></b>(3alleg4), <b><a href="../man3alleg4/set_color_depth.3alleg4.html">set_color_depth</a></b>(3alleg4), <b><a href="../man3alleg4/set_gfx_mode.3alleg4.html">set_gfx_mode</a></b>(3alleg4)

Allegro                                           version 4.4.3                                <u><a href="../man3alleg4/exlights.3alleg4.html">exlights</a></u>(3alleg4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>