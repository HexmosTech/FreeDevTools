<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test2::Harness::Auditor::TimeTracker - Module that tracks timing data while an event stream is processed.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest2-harness-perl">libtest2-harness-perl_1.000158-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test2::Harness::Auditor::TimeTracker - Module that tracks timing data while an event stream is processed.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The timetracker module tracks timing data of an event stream. All events for a given job should be run
       through a timetracker, which can then give data on how long the test took in each of several stages.

       startup - Time from launch to first test event.
       events - Time spent generating test events.
       cleanup - Time from last test event to test exit.
       total - Total time.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Test2::Harness::Auditor::TimeTracker;

           my $tracker = Test2::Harness::Auditor::TimeTracker-&gt;new();

           my $assert_count = 0;
           for my $event (@events) {
               my $facet_data = $events-&gt;facet_data;
               $assert_count++ if $facet_data-&gt;{assert};
               $tracker-&gt;process($event, $facet_data, $assert_count);
           }

           print $tracker-&gt;summary;
           # Startup: 0.00708s | Events: 0.00000s | Cleanup: 0.10390s | Total: 0.11098s

</pre><h4><b>METHODS</b></h4><pre>
       $tracker-&gt;process($event, $facet_data, $assert_count)
       $tracker-&gt;process($event, undef, $assert_count)
           TimeTracker builds its state from multiple events, each event should be processed by this method.

           The  second  argument  is optional, if no facet_data is provided it will pull the facet_data from the
           event itself. This is mainly a micro-optimization to avoid calling the  facet_data()  method  on  the
           event multiple times if you have already called it.

       $bool = $tracker-&gt;<b>useful()</b>
           Returns true if there is any useful data to display.

       $totals = $tracker-&gt;<b>totals()</b>
           Returns the totals like this:

               {
                   # Raw numbers
                   startup =&gt; ...,
                   events  =&gt; ...,
                   cleanup =&gt; ...,
                   total   =&gt; ...,

                   # Human friendly versions
                   h_startup =&gt; ...,
                   h_events  =&gt; ...,
                   h_cleanup =&gt; ...,
                   h_total   =&gt; ...,
               }

       $source = $tracker-&gt;<b>source()</b>
           This method returns the data from which the totals are derived.

               {
                   start =&gt; ...,    # timestamp of the job starting
                   stop  =&gt; ...,    # timestamp of the job ending
                   first =&gt; ...,    # timestamp of the first non-harness event
                   last  =&gt; ...,    # timestamp of the last non-harness event

                   # These are event_id's of the events that provided the above stamps.
                   start_id    =&gt; ...,
                   stop_id     =&gt; ...,
                   first_id    =&gt; ...,
                   last_id     =&gt; ...,
                   complete_id =&gt; ...,
               }

       $data = $tracker-&gt;data_dump
           This dumps the totals and source data:

               {
                   totals =&gt; $tracker-&gt;totals,
                   source =&gt; $tracker-&gt;source,
               }

       $string = $tracker-&gt;summary
           This produces a summary string of the totals data:

               Startup: 0.00708s | Events: 0.00000s | Cleanup: 0.10390s | Total: 0.11098s

           Fields that have no data will be ommited from the string.

       $table = $tracker-&gt;table
           Returns this structure that is good for use in Term::Table.

               {
                   header =&gt; ["Phase", "Time", "Raw", "Explanation"],
                   rows   =&gt; [
                       ['startup', $human_readible, $raw, "Time from launch to first test event."],
                       ['events',  $human_radible,  $raw, 'Time spent generating test events.'],
                       ['cleanup', $human_radible,  $raw, 'Time from last test event to test exit.'],
                       ['total',   $human_radible,  $raw, 'Total time.'],
                   ],
               }

       @items = $tracker-&gt;<b>job_fields()</b>
           This is used to obtain extra data to attach to the job completion event.

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Test2-Harness can be found at <u><a href="http://github.com/Test-More/Test2-Harness/">http://github.com/Test-More/Test2-Harness/</a></u>.

</pre><h4><b>MAINTAINERS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2020 Chad Granum &lt;<a href="mailto:exodist7@gmail.com">exodist7@gmail.com</a>&gt;.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

       See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-05-23             <u>Test2::Harness:...or::<a href="../man3pm/TimeTracker.3pm.html">TimeTracker</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>