<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cpu_sup - A CPU Load and CPU Utilization Supervisor Process</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cpu_sup - A CPU Load and CPU Utilization Supervisor Process

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>cpu_sup</u>  is  a  process  which  supervises  the  CPU  load  and CPU utilization. It is part of the OS_Mon
       application, see <a href="../man7/os_mon.7.html">os_mon</a>(7). Available for Unix, although  CPU  utilization  values  (<u>util/0,1</u>)  are  only
       available for Solaris, Linux and FreeBSD.

       The  load  values are proportional to how long time a runnable Unix process has to spend in the run queue
       before it is scheduled. Accordingly, higher values mean more system load. The returned value  divided  by
       256  produces the figure displayed by <u>rup</u> and <u>top</u>. What is displayed as 2.00 in <u>rup</u>, is displayed as load
       up to the second mark in <u>xload</u>.

       For example, <u>rup</u> displays a load of 128 as 0.50, and 512 as 2.00.

       If the user wants to view load values as percentage of machine  capacity,  then  this  way  of  measuring
       presents  a  problem,  because  the load values are not restricted to a fixed interval. In this case, the
       following simple mathematical transformation can produce the load value as a percentage:

             PercentLoad = 100 * (1 - D/(D + Load))

       <u>D</u> determines which load value should be associated with which percentage. Choosing <u>D</u> = 50 means that  128
       is 60% load, 256 is 80%, 512 is 90%, and so on.

       Another  way  of  measuring system load is to divide the number of busy CPU cycles by the total number of
       CPU cycles. This produces values in the 0-100 range immediately. However, this method hides the fact that
       a machine can be more or less saturated. CPU utilization is therefore a better name than system load  for
       this measure.

       A  server  which receives just enough requests to never become idle will score a CPU utilization of 100%.
       If the server receives 50% more requests, it will still score 100%. When the system  load  is  calculated
       with the percentage formula shown previously, the load will increase from 80% to 87%.

       The  <u>avg1/0</u>,  <u>avg5/0</u>, and <u>avg15/0</u> functions can be used for retrieving system load values, and the <u>util/0</u>
       and <u>util/1</u> functions can be used for retrieving CPU utilization values.

       When run on Linux, <u>cpu_sup</u> assumes that the <u><a href="file:/proc">/proc</a></u> file system is present and accessible by <u>cpu_sup</u>. If it
       is not, <u>cpu_sup</u> will terminate.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>nprocs()</b> <b>-&gt;</b> <b>UnixProcesses</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 UnixProcesses = int()
                 Reason = term()

              Returns the number of UNIX processes running on this machine. This is a crude way of measuring the
              system load, but it may be of interest in some cases.

              Returns 0 if <u>cpu_sup</u> is not available.

       <b>avg1()</b> <b>-&gt;</b> <b>SystemLoad</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 SystemLoad = int()
                 Reason = term()

              Returns the average system load in the last minute, as described above. 0 represents no load,  256
              represents the load reported as 1.00 by <u>rup</u>.

              Returns 0 if <u>cpu_sup</u> is not available.

       <b>avg5()</b> <b>-&gt;</b> <b>SystemLoad</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 SystemLoad = int()
                 Reason = term()

              Returns  the  average  system  load  in the last five minutes, as described above. 0 represents no
              load, 256 represents the load reported as 1.00 by <u>rup</u>.

              Returns 0 if <u>cpu_sup</u> is not available.

       <b>avg15()</b> <b>-&gt;</b> <b>SystemLoad</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 SystemLoad = int()
                 Reason = term()

              Returns the average system load in the last 15 minutes, as described above. 0 represents no  load,
              256 represents the load reported as 1.00 by <u>rup</u>.

              Returns 0 if <u>cpu_sup</u> is not available.

       <b>util()</b> <b>-&gt;</b> <b>CpuUtil</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 CpuUtil = float()
                 Reason = term()

              Returns CPU utilization since the last call to <u>util/0</u> or <u>util/1</u> by the calling process.

          <b>Note:</b>
              The  returned value of the first call to <u>util/0</u> or <u>util/1</u> by a process will on most systems be the
              CPU utilization since system boot, but this is not guaranteed and the value  should  therefore  be
              regarded as garbage. This also applies to the first call after a restart of <u>cpu_sup</u>.

              The  CPU utilization is defined as the sum of the percentage shares of the CPU cycles spent in all
              busy processor states (see <u>util/1</u> below) in average on all CPUs.

              Returns 0 if <u>cpu_sup</u> is not available.

       <b>util(Opts)</b> <b>-&gt;</b> <b>UtilSpec</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 Opts = [detailed | per_cpu]
                 UtilSpec = UtilDesc | [UtilDesc]
                  UtilDesc = {Cpus, Busy, NonBusy, Misc}
                  Cpus = all | int() | [int()]()
                  Busy = NonBusy = {State, Share} | Share
                  State = user | nice_user | kernel
                  | wait | idle | atom()
                  Share = float()
                  Misc = []
                 Reason = term()

              Returns CPU utilization since the last call to <u>util/0</u> or <u>util/1</u> by the calling  process,  in  more
              detail than <u>util/0</u>.

          <b>Note:</b>
              The  returned value of the first call to <u>util/0</u> or <u>util/1</u> by a process will on most systems be the
              CPU utilization since system boot, but this is not guaranteed and the value  should  therefore  be
              regarded as garbage. This also applies to the first call after a restart of <u>cpu_sup</u>.

              Currently recognized options:

                <u>detailed</u>:
                  The returned <u>UtilDesc</u>(s) will be even more detailed.

                <u>per_cpu</u>:
                  Each  CPU  will  be  specified separately (assuming this information can be retrieved from the
                  operating system), that is, a list with one <u>UtilDesc</u> per CPU will be returned.

              Description of <u>UtilDesc</u> <u>=</u> <u>{Cpus,</u> <u>Busy,</u> <u>NonBusy,</u> <u>Misc}</u>:

                <u>Cpus</u>:
                  If the <u>detailed</u> and/or <u>per_cpu</u> option is given, this is the CPU number, or a list of  the  CPU
                  numbers.

                  If  not,  this  is the atom <u>all</u> which implies that the <u>UtilDesc</u> contains information about all
                  CPUs.

                <u>Busy</u>:
                  If the <u>detailed</u> option is given, this is a list of <u>{State,</u> <u>Share}</u>  tuples,  where  each  tuple
                  contains  information  about  a  processor  state that has been identified as a busy processor
                  state (see below). The atom <u>State</u> is the name of the state, and the float <u>Share</u> represents the
                  percentage share of the CPU cycles spent in this state  since  the  last  call  to  <u>util/0</u>  or
                  <u>util/1</u>.

                  If  not,  this  is  the  sum  of  the  percentage shares of the CPU cycles spent in all states
                  identified as busy.

                  If the <u>per_cpu</u> is not given, the value(s) presented are the average of all CPUs.

                <u>NonBusy</u>:
                  Similar to <u>Busy</u>, but for processor states that have been identified as non-busy (see below).

                <u>Misc</u>:
                  Currently unused; reserved for future use.

              Currently these processor states are identified as busy:

                <u>user</u>:
                  Executing code in user mode.

                <u>nice_user</u>:
                  Executing code in low priority (nice) user mode. This state is currently  only  identified  on
                  Linux.

                <u>kernel</u>:
                  Executing code in kernel mode.

              Currently these processor states are identified as non-busy:

                <u>wait</u>:
                  Waiting. This state is currently only identified on Solaris.

                <u>idle</u>:
                  Idle.

          <b>Note:</b>
              Identified processor states may be different on different operating systems and may change between
              different  versions  of  <u>cpu_sup</u> on the same operating system. The sum of the percentage shares of
              the CPU cycles spent in all busy and all non-busy processor states will always  add  up  to  100%,
              though.

              Returns <u>{all,0,0,[]}</u> if <u>cpu_sup</u> is not available.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3erl/os_mon.3erl.html">os_mon</a>(3erl)

Ericsson AB                                       os_mon 2.7.1                                     <u><a href="../man3erl/cpu_sup.3erl.html">cpu_sup</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>