<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB::Database - A MongoDB Database</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongodb-perl">libmongodb-perl_2.2.2-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MongoDB::Database - A MongoDB Database

</pre><h4><b>VERSION</b></h4><pre>
       version v2.2.2

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # get a Database object via MongoDB::MongoClient
           my $db   = $client-&gt;get_database("foo");

           # get a Collection via the Database object
           my $coll = $db-&gt;get_collection("people");

           # run a command on a database
           my $res = $db-&gt;run_command([ismaster =&gt; 1]);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class models a MongoDB database.  Use it to construct MongoDB::Collection objects. It also provides
       the "run_command" method and some convenience methods that use it.

       Generally, you never construct one of these directly with "new".  Instead, you call "get_database" on a
       MongoDB::MongoClient object.

</pre><h4><b>USAGE</b></h4><pre>
   <b>Error</b> <b>handling</b>
       Unless otherwise explicitly documented, all methods throw exceptions if an error occurs.  The error types
       are documented in MongoDB::Error.

       To catch and handle errors, the Try::Tiny and Safe::Isa modules are recommended:

           use Try::Tiny;
           use Safe::Isa; # provides $_isa

           try {
               $db-&gt;run_command( @command )
           }
           catch {
               if ( $_-&gt;$_isa("MongoDB::DuplicateKeyError" ) {
                   ...
               }
               else {
                   ...
               }
           };

       To retry failures automatically, consider using Try::Tiny::Retry.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>name</b>
       The name of the database.

   <b>read_preference</b>
       A MongoDB::ReadPreference object.  It may be initialized with a string corresponding to one of the valid
       read preference modes or a hash reference that will be coerced into a new MongoDB::ReadPreference object.
       By default it will be inherited from a MongoDB::MongoClient object.

   <b>write_concern</b>
       A MongoDB::WriteConcern object.  It may be initialized with a hash reference that will be coerced into a
       new MongoDB::WriteConcern object.  By default it will be inherited from a MongoDB::MongoClient object.

   <b>read_concern</b>
       A MongoDB::ReadConcern object.  May be initialized with a hash reference or a string that will be coerced
       into the level of read concern.

       By default it will be inherited from a MongoDB::MongoClient object.

   <b>max_time_ms</b>
       Specifies the maximum amount of time in milliseconds that the server should use for working on a query.

       <b>Note</b>: this will only be used for server versions 2.6 or greater, as that was when the $maxTimeMS meta-
       operator was introduced.

   <b>bson_codec</b>
       An object that provides the "encode_one" and "decode_one" methods, such as from BSON.  It may be
       initialized with a hash reference that will be coerced into a new BSON object.  By default it will be
       inherited from a MongoDB::MongoClient object.

</pre><h4><b>METHODS</b></h4><pre>
   <b>client</b>
           $client = $db-&gt;client;

       Returns the MongoDB::MongoClient object associated with this object.

   <b>list_collections</b>
           $result = $coll-&gt;list_collections( $filter );
           $result = $coll-&gt;list_collections( $filter, $options );

       Returns a MongoDB::QueryResult object to iterate over collection description documents.  These will
       contain "name" and "options" keys like so:

           use boolean;

           {
               name =&gt; "my_capped_collection",
               options =&gt; {
                   capped =&gt; true,
                   size =&gt; 10485760,
               }
           },

       An optional filter document may be provided, which cause only collection description documents matching a
       filter expression to be returned.  See the listCollections command documentation
       &lt;<a href="http://docs.mongodb.org/manual/reference/command/listCollections/">http://docs.mongodb.org/manual/reference/command/listCollections/</a>&gt; for more details on filtering for
       specific collections.

       A hash reference of options may be provided. Valid keys include:

       •   "batchSize" – the number of documents to return per batch.

       •   "maxTimeMS"  –  the  maximum amount of time in milliseconds to allow the command to run.  (Note, this
           will be ignored for servers before version 2.6.)

       •   "nameOnly" - query and return names of the collections only. Defaults to false. (Note, this  will  be
           ignored for servers before version 4.0)

       •   "session"  -  the session to use for these operations. If not supplied, will use an implicit session.
           For more information see MongoDB::ClientSession

       <b>NOTE</b>: When using "nameOnly", the filter query must be empty or must only query the "name" field  or  else
       no documents will be found.

   <b>collection_names</b>
           my @collections = $database-&gt;collection_names;
           my @collections = $database-&gt;collection_names( $filter );
           my @collections = $database-&gt;collection_names( $filter, $options );

       Returns the list of collections in this database.

       An optional filter document may be provided, which cause only collection description documents matching a
       filter    expression    to    be    returned.     See    the    listCollections   command   documentation
       &lt;<a href="http://docs.mongodb.org/manual/reference/command/listCollections/">http://docs.mongodb.org/manual/reference/command/listCollections/</a>&gt; for more  details  on  filtering  for
       specific collections.

       A hashref of options may also be provided.

       Valid options include:

       •   "session"  -  the session to use for these operations. If not supplied, will use an implicit session.
           For more information see MongoDB::ClientSession

       <b>Warning:</b> if the number of collections is very large, this may return a very large result.  Either pass an
       appropriate filter, or use "list_collections" to iterate over collections instead.

   <b>get_collection,</b> <b>coll</b>
           my $collection = $database-&gt;get_collection('foo');
           my $collection = $database-&gt;get_collection('foo', $options);
           my $collection = $database-&gt;coll('foo', $options);

       Returns a MongoDB::Collection for the given collection name within this database.

       It takes an optional hash reference of options that are passed to the MongoDB::Collection constructor.

       The "coll" method is an alias for "get_collection".

   <b>get_gridfsbucket,</b> <b>gfs</b>
           my $grid = $database-&gt;get_gridfsbucket;
           my $grid = $database-&gt;get_gridfsbucket($options);
           my $grid = $database-&gt;gfs($options);

       This method returns a MongoDB::GridFSBucket object for storing and retrieving files from the database.

       It takes an optional hash reference of options that are passed to the MongoDB::GridFSBucket constructor.

       See MongoDB::GridFSBucket for more information.

       The "gfs" method is an alias for "get_gridfsbucket".

   <b>drop</b>
           $database-&gt;drop;

       Deletes the database.

       A hashref of options may also be provided.

       Valid options include:

       •   "session" - the session to use for these operations. If not supplied, will use an  implicit  session.
           For more information see MongoDB::ClientSession

   <b>run_command</b>
           my $output = $database-&gt;run_command([ some_command =&gt; 1 ]);

           my $output = $database-&gt;run_command(
               [ some_command =&gt; 1 ],
               { mode =&gt; 'secondaryPreferred' }
           );

           my $output = $database-&gt;run_command(
               [ some_command =&gt; 1 ],
               $read_preference,
               $options
           );

       This  method  runs  a  database  command.  The first argument must be a document with the command and its
       arguments.  It should be given as an array reference of key-value pairs or a Tie::IxHash object with  the
       command name as the first key.  An error will be thrown if the command is not an ordered document.

       By  default,  commands  are  run  with  a  read preference of 'primary'.  An optional second argument may
       specify an alternative read preference.  If given, it must be a MongoDB::ReadPreference object or a  hash
       reference that can be used to construct one.

       A hashref of options may also be provided.

       Valid options include:

       •   "session"  -  the session to use for these operations. If not supplied, will use an implicit session.
           For more information see MongoDB::ClientSession

       It returns the output of the command (a hash reference) on success  or  throws  a  MongoDB::DatabaseError
       exception if the command fails.

       For a list of possible database commands, run:

           my $commands = $db-&gt;run_command([listCommands =&gt; 1]);

       There  are  a  few examples of database commands in the "DATABASE COMMANDS" in MongoDB::Examples section.
       See also core documentation on database commands: &lt;<a href="http://dochub.mongodb.org/core/commands">http://dochub.mongodb.org/core/commands</a>&gt;.

   <b>aggregate</b>
       Runs a query using the MongoDB 3.6+ aggregation framework and returns a MongoDB::QueryResult object.

       The     first     argument     must      be      an      array-ref      of      aggregation      pipeline
       &lt;<a href="http://docs.mongodb.org/manual/core/aggregation-pipeline/">http://docs.mongodb.org/manual/core/aggregation-pipeline/</a>&gt;  documents.  Each pipeline document must be a
       hash reference.

       The  server  supports  several  collection-less   aggregation   source   stages   like   $currentOp   and
       $listLocalSessions.

           $result = $database-&gt;aggregate( [
               {
                   "\$currentOp" =&gt; {
                       allUsers =&gt; true,
                   },
               },
           ] );

       See  Aggregation &lt;<a href="http://docs.mongodb.org/manual/aggregation/">http://docs.mongodb.org/manual/aggregation/</a>&gt; in the MongoDB manual for more information
       on how to construct aggregation queries.

   <b>watch</b>
       Watches for changes on this database.

       Perform an aggregation with an implicit initial $changeStream stage and returns  a  MongoDB::ChangeStream
       result  which  can  be  used to iterate over the changes in the database. This functionality is available
       since MongoDB 4.0.

           my $stream = $db-&gt;watch();
           my $stream = $db-&gt;watch( \@pipeline );
           my $stream = $db-&gt;watch( \@pipeline, \%options );

           while (1) {

               # This inner loop will only run until no more changes are
               # available.
               while (my $change = $stream-&gt;next) {
                   # process $change
               }
           }

       The returned stream will not block forever waiting for changes. If you want to respond to changes over  a
       longer time use "maxAwaitTimeMS" and regularly call "next" in a loop.

       See "watch" in MongoDB::Collection for details on usage and available options.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   David Golden &lt;<a href="mailto:david@mongodb.com">david@mongodb.com</a>&gt;

       •   Rassi &lt;<a href="mailto:rassi@mongodb.com">rassi@mongodb.com</a>&gt;

       •   Mike Friedman &lt;<a href="mailto:friedo@friedo.com">friedo@friedo.com</a>&gt;

       •   Kristina Chodorow &lt;<a href="mailto:k.chodorow@gmail.com">k.chodorow@gmail.com</a>&gt;

       •   Florian Ragwitz &lt;<a href="mailto:rafl@debian.org">rafl@debian.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2020 by MongoDB, Inc.

       This is free software, licensed under:

         The Apache License, Version 2.0, January 2004

perl v5.40.1                                       2025-04-03                             <u>MongoDB::<a href="../man3pm/Database.3pm.html">Database</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>