<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>recno - record number database access method</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       recno - record number database access method

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;db.h&gt;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Note</u>  <u>well</u>: This page documents interfaces provided up until glibc 2.1.  Since glibc 2.2, glibc no longer
       provides these interfaces.  Probably, you are looking for the APIs provided by the <u>libdb</u> library instead.

       The routine <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3) is the library interface to database files.  One of the supported file  formats  is
       record number files.  The general description of the database access methods is in <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3), this manual
       page describes only the recno-specific information.

       The record number data structure is either variable or fixed-length records stored in a flat-file format,
       accessed  by  the  logical  record  number.  The existence of record number five implies the existence of
       records one through four, and the deletion  of  record  number  one  causes  record  number  five  to  be
       renumbered  to record number four, as well as the cursor, if positioned after record number one, to shift
       down one record.

       The recno access-method-specific data structure provided to <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3) is defined in  the  <u>&lt;db.h&gt;</u>  include
       file as follows:

           typedef struct {
               unsigned long flags;
               unsigned int  cachesize;
               unsigned int  psize;
               int           lorder;
               size_t        reclen;
               unsigned char bval;
               char         *bfname;
           } RECNOINFO;

       The elements of this structure are defined as follows:

       <u>flags</u>  The flag value is specified by ORing any of the following values:

              <b>R_FIXEDLEN</b>
                     The  records  are fixed-length, not byte delimited.  The structure element <u>reclen</u> specifies
                     the length of the record, and the structure element <u>bval</u> is used as the pad character.  Any
                     records, inserted into the database, that are less than <u>reclen</u> bytes long are automatically
                     padded.

              <b>R_NOKEY</b>
                     In the interface specified by <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3), the sequential record retrieval fills in both  the
                     caller's  key  and  data structures.  If the <b>R_NOKEY</b> flag is specified, the <u>cursor</u> routines
                     are not required to fill in the key  structure.   This  permits  applications  to  retrieve
                     records at the end of files without reading all of the intervening records.

              <b>R_SNAPSHOT</b>
                     This  flag  requires that a snapshot of the file be taken when <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3) is called, instead
                     of permitting any unmodified records to be read from the original file.

       <u>cachesize</u>
              A suggested maximum size, in bytes, of the memory cache.  This value is  <b>only</b>  advisory,  and  the
              access  method  will  allocate  more  memory  rather  than  fail.   If <u>cachesize</u> is  0 (no size is
              specified), a default cache is used.

       <u>psize</u>  The recno access method stores the in-memory copies of its records in a btree.  This value is  the
              size  (in  bytes)  of  the  pages  used  for  nodes  in that tree.  If <u>psize</u> is 0 (no page size is
              specified), a page size is chosen based on the underlying filesystem I/O block size.  See <b><a href="../man3/btree.3.html">btree</a></b>(3)
              for more information.

       <u>lorder</u> The byte order for integers in the stored database metadata.   The  number  should  represent  the
              order  as an integer; for example, big endian order would be the number 4,321.  If <u>lorder</u> is 0 (no
              order is specified), the current host order is used.

       <u>reclen</u> The length of a fixed-length record.

       <u>bval</u>   The delimiting byte to be used to mark the end of a record for variable-length  records,  and  the
              pad  character  for  fixed-length  records.  If no value is specified, newlines ("\n") are used to
              mark the end of variable-length records and fixed-length records are padded with spaces.

       <u>bfname</u> The recno access method stores the in-memory copies of its records in a btree.  If <u>bfname</u> is  non-
              NULL,  it specifies the name of the btree file, as if specified as the filename for a <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3) of
              a btree file.

       The data part of the key/data pair used by the <u>recno</u> access method is the same as other  access  methods.
       The  key  is  different.   The  <u>data</u>  field  of  the key should be a pointer to a memory location of type
       <u>recno_t</u>, as defined in the <u>&lt;db.h&gt;</u> include file.  This type is normally the largest unsigned integral type
       available to the implementation.  The <u>size</u> field of the key should be the size of that type.

       Because there can be no metadata associated with the underlying recno access method  files,  any  changes
       made  to  the  default  values  (e.g.,  fixed  record  length or byte separator value) must be explicitly
       specified each time the file is opened.

       In the interface specified by <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3), using the <u>put</u> interface to create a new record  will  cause  the
       creation of multiple, empty records if the record number is more than one greater than the largest record
       currently in the database.

</pre><h4><b>ERRORS</b></h4><pre>
       The  <u>recno</u>  access method routines may fail and set <u>errno</u> for any of the errors specified for the library
       routine <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3) or the following:

       <b>EINVAL</b> An attempt was made to add a record to a fixed-length database that was too large to fit.

</pre><h4><b>BUGS</b></h4><pre>
       Only big and little endian byte order is supported.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/btree.3.html">btree</a></b>(3), <b><a href="../man3/dbopen.3.html">dbopen</a></b>(3), <b><a href="../man3/hash.3.html">hash</a></b>(3), <b><a href="../man3/mpool.3.html">mpool</a></b>(3)

       <u>Document</u> <u>Processing</u> <u>in</u> <u>a</u> <u>Relational</u> <u>Database</u> <u>System</u>, Michael Stonebraker, Heidi Stettner, Joseph  Kalash,
       Antonin Guttman, Nadene Lynn, Memorandum No. UCB/ERL M82/32, May 1982.

4.4 Berkeley Distribution                          2024-06-15                                           <u><a href="../man3/recno.3.html">recno</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>