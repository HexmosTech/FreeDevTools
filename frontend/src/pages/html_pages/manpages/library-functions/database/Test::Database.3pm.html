<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::Database - Database handles ready for testing</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-database-perl">libtest-database-perl_1.113-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::Database - Database handles ready for testing

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Maybe you wrote generic code you want to test on all available databases:

           use Test::More;
           use Test::Database;

           # get all available handles
           my @handles = Test::Database-&gt;handles();

           # plan the tests
           plan tests =&gt; 3 + 4 * @handles;

           # run the tests
           for my $handle (@handles) {
               diag "Testing with " . $handle-&gt;dbd();    # mysql, SQLite, etc.

               # there are several ways to access the dbh:

               # let $handle do the connect()
               my $dbh = $handle-&gt;dbh();

               # do the connect() yourself
               my $dbh = DBI-&gt;connect( $handle-&gt;connection_info() );
               my $dbh = DBI-&gt;connect( $handle-&gt;dsn(), $handle-&gt;username(),
                   $handle-&gt;password() );
           }

       It's possible to limit the results, based on the databases your code supports:

           my @handles = Test::Database-&gt;handles(
               'SQLite',                 # SQLite database
               { dbd    =&gt; 'mysql' },    # or mysql database
               { driver =&gt; 'Pg' },       # or Postgres database
           );

           # use them as above

       If you only need a single database handle, all the following return the same one:

           my $handle   = ( Test::Database-&gt;handles(@requests) )[0];
           my ($handle) = Test::Database-&gt;handles(@requests);
           my $handle   = Test::Database-&gt;handles(@requests);    # scalar context
           my $handle   = Test::Database-&gt;handle(@requests);     # singular!
           my @handles  = Test::Database-&gt;handle(@requests);     # one or zero item

       You can use the same requests again if you need to use the same test databases over several test scripts.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Test::Database provides a simple way for test authors to request a test database, without worrying about
       environment variables or the test host configuration.

       See SYNOPSIS for typical usage.

       See Test::Database::Tutorial for more detailed explanations.

</pre><h4><b>METHODS</b></h4><pre>
       Test::Database provides the following methods:

   <b>list_drivers</b>
           my @drivers = Test::Database-&gt;list_drivers();
           my @drivers = Test::Database-&gt;list_drivers('available');

       Return a list of driver names of the given "type".

       "all" returns the list of all existing Test::Database::Driver subclasses.

       "available" returns the list of Test::Database::Driver subclasses for which the matching "DBD" class is
       available.

       Called with no parameter (or anything not matching "all" or "available"), it will return the list of
       currently loaded drivers.

   <b>drivers</b>
       Returns the Test::Database::Driver instances that are setup by "load_drivers()" and updated by
       "load_config()".

   <b>load_drivers</b>
       Load the available drivers from the system (file-based drivers, usually).

   <b>load_config</b>
           Test::Database-&gt;load_config($config);

       Read configuration from the files in @files.

       If no file is provided, the local equivalent of <u><a href="file:~/.test-database">~/.test-database</a></u> is used.

   <b>clean_config</b>
           Test::Database-&gt;clean_config();

       Empties whatever configuration has already been loaded.  Also removes the loaded drivers list.

   <b>handles</b>
           my @handles = Test::Database-&gt;handles(@requests);

       Return a set of Test::Database::Handle objects that match the given @requests.

       If @requests is not provided, return all the available handles.

       See REQUESTS for details about writing requests.

   <b>handle</b>
           my $handle = Test::Database-&gt;handle(@requests);

       <u>Singular</u> version of "handles()", that returns the first matching handle.

</pre><h4><b>REQUESTS</b></h4><pre>
       The "handles()" method takes <u>requests</u> as parameters. A request is a simple hash reference, with a number
       of recognized keys.

       •   "dbd": driver name (based on the "DBD::" name).

           "driver" is an alias for "dbd".  If the two keys are present, the "driver" key will be ignored.

           If missing, all available drivers will match.

       •   "version": exact database engine version

           Only database engines having a version string identical to the given version string will match.

       •   "min_version": minimum database engine version

           Only  database  engines  having  a  version number greater or equal to the given minimum version will
           match.

       •   "max_version": maximum database engine version

           Only database engines having a version number lower (and not equal) to the given maximum version will
           match.

       •   "regex_version": matching database engine version

           Only database engines having a version string that matches the given regular expression will match.

       A request can also consist of a single string, in which case it is interpreted as a shortcut for  "{  dbd
       =" $string }&gt;.

</pre><h4><b>FILES</b></h4><pre>
       The  list  of  available,  authorized  DSN  is stored in the local equivalent of <u><a href="file:~/.test-database">~/.test-database</a></u>. It's a
       simple list of key/value pairs, with the "dsn", "driver_dsn" or "key" keys being used to split successive
       entries:

           # mysql
           dsn      = dbi:mysql:database=mydb;host=localhost;port=1234
           username = user
           password = s3k r3t

           # Oracle
           dsn      = dbi:Oracle:test

           # set a unique key when creating databases
           key = thwapp

           # a "driver" with full access (create/drop databases)
           driver_dsn = dbi:mysql:
           username   = root

       The "username" and "password" keys are optional and "undef" will be used if they are not provided.

       Empty lines and comments are ignored.

       Optionally, the "key" section is used to add a "unique" element to the databases created by  the  drivers
       (as defined by "driver_dsn"). It allows several hosts to share access to the same database server without
       risking  a  race  condition  when  creating  a  new  database.  See Test::Database::Tutorial for a longer
       explanation.

       Individual drivers may accept  extra  parameters.  See  their  documentation  for  details.  Unrecognized
       parameters and not used, and therefore ignored.

</pre><h4><b>AUTHOR</b></h4><pre>
       Philippe Bruhat (BooK), "&lt;<a href="mailto:book@cpan.org">book@cpan.org</a>&gt;"

</pre><h4><b>BUGS</b></h4><pre>
       Please  report  any  bugs  or  feature requests to "bug-test-database at rt.cpan.org", or through the web
       interface at &lt;<a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=Test-Database&gt;.  I  will  be  notified,  and
       then you'll automatically be notified of progress on your bug as I make changes.

</pre><h4><b>SUPPORT</b></h4><pre>
       You can find documentation for this module with the perldoc command.

           perldoc Test::Database

       You can also look for information at:

       •   RT: CPAN's request tracker

           &lt;<a href="http://rt.cpan.org/NoAuth/Bugs.html">http://rt.cpan.org/NoAuth/Bugs.html</a>?Dist=Test-Database&gt;

       •   AnnoCPAN: Annotated CPAN documentation

           &lt;<a href="http://annocpan.org/dist/Test-Database">http://annocpan.org/dist/Test-Database</a>&gt;

       •   CPAN Ratings

           &lt;<a href="http://cpanratings.perl.org/d/Test-Database">http://cpanratings.perl.org/d/Test-Database</a>&gt;

       •   Search CPAN

           &lt;<a href="http://search.cpan.org/dist/Test-Database">http://search.cpan.org/dist/Test-Database</a>&gt;

</pre><h4><b>TODO</b></h4><pre>
       Some of the items on the TODO list:

       •   Add  a  database  engine  autodetection  script/module,  to  automatically  write  the <u>.test-database</u>
           configuration file.

</pre><h4><b>HISTORY</b></h4><pre>
       Quoting Michael Schwern:

       <u>There's</u> <u>plenty</u> <u>of</u> <u>modules</u> <u>which</u> <u>need</u> <u>a</u> <u>database,</u> <u>and</u> <u>they</u> <u>all</u>  <u>have</u>  <u>to</u>  <u>be</u>  <u>configured</u>  <u>differently</u>  <u>and</u>
       <u>they're</u> <u>always</u> <u>a</u> <u>PITA</u> <u>when</u> <u>you</u> <u>first</u> <u>install</u> <u>and</u> <u>each</u> <u>and</u> <u>every</u> <u>time</u> <u>they</u> <u>upgrade.</u>

       <u>User</u>  <u>setup</u>  <u>can</u>  <u>be</u>  <u>dealt</u> <u>with</u> <u>by</u> <u>making</u> <u>Test::Database</u> <u>a</u> <u>build</u> <u>dependency.</u> <u>As</u> <u>part</u> <u>of</u> <u>Test::Database's</u>
       <u>install</u> <u>process</u> <u>it</u> <u>walks</u> <u>the</u> <u>user</u> <u>through</u> <u>the</u> <u>configuration</u> <u>process.</u> <u>Once</u> <u>it's</u>  <u>done,</u>  <u>it</u>  <u>writes</u>  <u>out</u>  <u>a</u>
       <u>config</u> <u>file</u> <u>and</u> <u>then</u> <u>it's</u> <u>done</u> <u>for</u> <u>good.</u>

       See  &lt;<a href="http://www.nntp.perl.org/group/perl.qa/2008/10/msg11645.html">http://www.nntp.perl.org/group/perl.qa/2008/10/msg11645.html</a>&gt;  for  the  thread  that  led  to  the
       creation of Test::Database.

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       Thanks to "&lt;<a href="mailto:perl-qa@perl.org">perl-qa@perl.org</a>&gt;" for early comments.

       Thanks to Nelson Ferraz for writing DBIx::Slice, the testing of which made me want to have a generic  way
       to obtain a test database.

       Thanks  to Mark Lawrence for discussing this module with me, and sending me an alternative implementation
       to show me what he needed.

       Thanks to Kristian Koehntopp for helping me write a mysql driver, and to Greg Sabino Mullane for  writing
       a  full  Postgres  driver, none of which made it into the final release because of the complete change in
       goals and implementation between versions 0.02 and 0.03.

       The work leading to the new implementation (version 0.99 and later) was carried on  during  the  Perl  QA
       Hackathon, held in Birmingham in March 2009. Thanks to Birmingham.pm for organizing it and to Booking.com
       for sending me there.

       Thanks  to  the  early  adopters:  Alexis  Sukrieh (SUKRIA), Nicholas Bamber (SILASMONK) and Adam Kennedy
       (ADAMK).

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2008-2010 Philippe Bruhat (BooK), all rights reserved.

</pre><h4><b>LICENSE</b></h4><pre>
       This module is free software; you can redistribute it and/or modify it  under  the  same  terms  as  Perl
       itself.

perl v5.32.1                                       2021-11-12                                <u>Test::<a href="../man3pm/Database.3pm.html">Database</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>