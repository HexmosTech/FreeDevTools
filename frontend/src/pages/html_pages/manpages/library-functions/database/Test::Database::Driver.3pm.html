<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::Database::Driver - Base class for Test::Database drivers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-database-perl">libtest-database-perl_1.113-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::Database::Driver - Base class for Test::Database drivers

</pre><h4><b>SYNOPSIS</b></h4><pre>
           package Test::Database::Driver::MyDatabase;
           use strict;
           use warnings;

           use Test::Database::Driver;
           our @ISA = qw( Test::Database::Driver );

           sub _version {
               my ($class) = @_;
               ...;
               return $version;
           }

           sub create_database {
               my ( $self ) = @_;
               ...;
               return $handle;
           }

           sub drop_database {
               my ( $self, $name ) = @_;
               ...;
           }

           sub databases {
               my ($self) = @_;
               ...;
               return @databases;
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Test::Database::Driver is a base class for creating Test::Database drivers.

</pre><h4><b>METHODS</b></h4><pre>
       The class provides the following methods:

   <b>new</b>
           my $driver = Test::Database::Driver-&gt;new( driver =&gt; 'SQLite' );

           my $driver = Test::Database::Driver::SQLite-&gt;new();

       Create a new Test::Database::Driver object.

       If called as "Test::Database::Driver-&gt;new()", requires a "driver" parameter to define the actual object
       class.

   <b>make_handle</b>
           my $handle = $driver-&gt;make_handle();

       Create a new Test::Database::Handle object, attached to an existing database or to a newly created one.

       The decision whether to create a new database or not is made by Test::Database::Driver based on the
       information in the mapper.  See "TEMPORARY STORAGE ORGANIZATION" for details.

   <b>make_dsn</b>
           my $dsn = $driver-&gt;make_dsn( %args )

       Return a Data Source Name based on the driver's DSN, with the key/value pairs contained in %args as
       additional parameters.

       This is typically used by "dsn()" to make a DSN for a specific database, based on the driver's DSN.

   <b>name</b>
   <b>dbd</b>
           my $name = $driver-&gt;dbd;

       The driver's short name (everything after "Test::Database::Driver::").

   <b>base_dir</b>
           my $dir = $driver-&gt;base_dir;

       The directory where the driver should store all the files for its databases, if needed. Typically used by
       file-based database drivers.

   <b>version</b>
           my $db_version = $driver-&gt;version;

       "version" object representing the version of the underlying database enginge.  This object is build with
       the return value of "_version()".

   <b>version_string</b>
           my $db_version = $driver-&gt;version_string;

       Version string representing the version of the underlying database enginge.  This string is the actual
       return value of "_version()".

   <b>dbd_version</b>
           my $dbd_version = $driver-&gt;dbd_version;

       The version of the DBD used to connect to the database engine, as returned by "VERSION()".

   <b>driver_dsn</b>
           my $dsn = $driver-&gt;driver_dsn;

       Return a driver Data Source Name, sufficient to connect to the database engine without specifying an
       actual database.

   <b>username</b>
           my $username = $driver-&gt;username;

       Return the connection username. Defaults to "undef".

   <b>password</b>
           my $password = $driver-&gt;password;

       Return the connection password. Defaults to "undef".

   <b>connection_info()</b>
           my @info = $driver-&gt;connection_info;

       Return the connection information triplet ("driver_dsn", "username", "password").

   <b>version_matches</b>
           if ( $driver-&gt;version_matches($request) ) {
               ...;
           }

       Return a boolean indicating if the driver's version matches the version constraints in the given request
       (see Test::Database documentation's section about requests).

</pre><h4><b>METHODS</b> <b>FOR</b> <b>DRIVER</b> <b>AUTHORS</b></h4><pre>
       The class also provides a few helpful commands that may be useful for driver authors:

   <b>available_dbname</b>
           my $dbname = $self-&gt;available_dbname();

       Return an unused database name that can be used to create a new database for the driver.

   <b>dsn</b>
           my $dns = $self-&gt;dsn( $dbname )

       Build a Data Source Name for the database with the given $dbname, based on the driver's DSN.

</pre><h4><b>WRITING</b> <b>A</b> <b>DRIVER</b> <b>FOR</b> <b>YOUR</b> <b>DATABASE</b> <b>OF</b> <b>CHOICE</b></h4><pre>
       The SYNOPSIS contains a good template for writing a Test::Database::Driver class.

       Creating a driver requires writing the following methods:

   <b>_version</b>
           my $version = $driver-&gt;_version;

       Return the version of the underlying database engine.

   <b>create_database</b>
           $driver-&gt;create_database( $name );

       Create the database for the corresponding DBD driver.

       Return a Test::Database::Handle in case of success, and nothing in case of failure to create the
       database.

   <b>drop_database(</b> <b>$name</b> <b>)</b>
           $driver-&gt;drop_database( $name );

       Drop the database named $name.

</pre><h4><b>OVERRIDABLE</b> <b>METHODS</b> <b>WHEN</b> <b>WRITING</b> <b>A</b> <b>DRIVER</b></h4><pre>
       Some methods have defaults implementations in Test::Database::Driver, but those can be overridden in the
       derived class:

   <b>is_filebased</b>
       Return a boolean value indicating if the database engine is file-based or not, i.e. if all the database
       information is stored in a file or a directory, and no external database server is needed.

   <b>databases</b>
           my @db = $driver-&gt;databases();

       Return the names of all existing databases for this driver as a list (the default implementation is only
       valid for file-based drivers).

</pre><h4><b>TEMPORARY</b> <b>STORAGE</b> <b>ORGANIZATION</b></h4><pre>
       Subclasses of Test::Database::Driver store useful information in the system's temporary directory, under
       a directory named <u>Test-Database-$user</u> ($user being the current user's name).

       That directory contains the following files:

       database files
           The  database  files  and  directories created by file-based drivers controlled by Test::Database are
           stored here, under names matching <u>tdd_<b>DRIVER_N</b></u>, where <b>DRIVER</b> is the lowercased name of the driver and
           <b>N</b> is a number.

       the <u>mapping.yml</u> file
           A YAML file containing a "cwd()" / database name mapping, to enable a given test suite to receive the
           same database handles in all the test scripts that call the "Test::Database-&gt;handles()" method.

</pre><h4><b>AUTHOR</b></h4><pre>
       Philippe Bruhat (BooK), "&lt;<a href="mailto:book@cpan.org">book@cpan.org</a>&gt;"

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2008-2010 Philippe Bruhat (BooK), all rights reserved.

</pre><h4><b>LICENSE</b></h4><pre>
       This module is free software; you can redistribute it and/or modify it  under  the  same  terms  as  Perl
       itself.

perl v5.32.1                                       2021-11-12                        <u>Test::Database::<a href="../man3pm/Driver.3pm.html">Driver</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>