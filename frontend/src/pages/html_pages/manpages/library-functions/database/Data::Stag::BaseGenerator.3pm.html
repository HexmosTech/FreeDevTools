<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data::Stag::BaseGenerator     - base class for parsers and other event generators</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdata-stag-perl">libdata-stag-perl_0.14-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
         Data::Stag::BaseGenerator     - base class for parsers and other event generators

</pre><h4><b>SYNOPSIS</b></h4><pre>
         # writing the parser
         package MyParser;
         use base qw(Data::Stag::BaseGenerator);

         sub parse_fh {
           my ($self, $fh) = shift;

           my $lnum = 0;
           $self-&gt;start_event('data');
           while (&lt;$fh&gt;) {
             ++$lnum;
             $self-&gt;line_no($lnum);
             # do stuff
             $self-&gt;start_event('foo');

             # ...
             $self-&gt;event(blah=&gt;5);

             #
             if (/incorrect_line/) {
                $self-&gt;parse_err('line not in correct format');
             }

             # ...
             $self-&gt;end_event('foo');
           }
           $self-&gt;<a href="../man0/pop_stack_to_depth.0.html">pop_stack_to_depth</a>(0);
         }
         1;

         # using the parser
         my $p = MyParser-&gt;new;
         my $h = MyHandler-&gt;new; # see Data::Stag::BaseHandler
         my $eh = Data::Stag-&gt;makehandler;
         $p-&gt;handler($h);
         $p-&gt;errhandler($eh);
         $p-&gt;parse($file);

         # result tree
         print $h-&gt;stag-&gt;xml;

         # write parse errs on standard err
         printf \*STDERR $p-&gt;errhandler-&gt;stag-&gt;xml;

         # using the parser from the command line
         unix&gt; stag-parse.pl -p MyParser -w xml -e err.xml &gt; out.xml

         # using the parser from the command line via intermediate handler
         unix&gt; stag-handle.pl -p MyParser -m MyHandler -w xml -e err.xml &gt; out.xml

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is the base class for all parsers and event generators

       parsers/generators take some input (usually a filehandle, but a generator could be a socket listener, for
       example) and fire stag events

       stag events are

       start_event NODENAME
       evbody DATA
       end_event NODENAME {optional}
       event NODENAME DATA

       These events can be nested/hierarchical

       If  uncaught,  these events are stacked into a stag tree, which can be written as xml or one of the other
       stag formats

       specialised handlers can be written to catch the events your parser throws

       For example, you may wish to write a pod parser that generates nested events like this:

         &lt;pod&gt;
          &lt;section&gt;
            &lt;type&gt;head1&lt;/type&gt;
            &lt;name&gt;NAME&lt;/name&gt;
            &lt;text&gt;Data::Stag - Structured Tags datastructures&lt;/text&gt;
          &lt;/section&gt;
          ...
         &lt;/pod&gt;

       (see the source for Data::Stag::PodParser for details)

       You can write handlers that take the pod-xml and generate something - for example HTML

       parsers may encounter unexpected things along the way - they may throw an exception, and fall over  -  or
       they  may  choose to fire an error event. by default, error event streams are diverted to STDERR. You can
       create your own error handlers

</pre><h4><b>PUBLIC</b> <b>METHODS</b></h4><pre>
       <u>new</u>

              Title: new

               Args:
             Return: L&lt;Data::Stag::BaseGenerator&gt;
            Example:

       CONSTRUCTOR

       <u>handler</u>

              Title: handler
           Function: GET/SET ACCESSOR METHOD
               Args: handler L&lt;Data::Stag::BaseHandler&gt; optional
             Return: L&lt;Data::Stag::BaseHandler&gt;
            Example: $p-&gt;handler(MyHandler-&gt;new);

       each parser has a handler - all events generated are passed onto the handler; the default handler  simply
       sits there collecting events

       <u>errhandler</u>

              Title: errhandler
           Function: GET/SET ACCESSOR METHOD
               Args: handler L&lt;Data::Stag::BaseHandler&gt; optional
             Return: L&lt;Data::Stag::BaseHandler&gt;
            Example: $p-&gt;errhandler(Data::Stag-&gt;makehandler);

       each parser has an error handler - if the parser encounters things it does not expect, it can pass errors
       to the errorhandler

       if no errorhandler is set, an XML event handler that writes to STDERR is used

       <u>cache_errors</u>

              Title: cache_errors
               Args:
             Return:
            Example: $p-&gt;cache_errors

       If this is called, all errors will be cached rather than written to STDERR

       The error list can be accessed like this

         $p-&gt;parse($fn);
         @errs = $p-&gt;errhandler-&gt;stag-&gt;get_error;

   <b>parse</b>
         Example - $parser-&gt;parse($file1, $file2);
         Returns -
         Args    - filenames str-LIST

       parses a file

   <b>parse</b>
         Example - $parser-&gt;parse_fh($fh)
         Returns -
         Args    - fh FILEHANDLE

       parses an open filehandle

</pre><h4><b>PROTECTED</b> <b>METHODS</b></h4><pre>
       These methods are only of interest if you are making your own parser/generator class

       start_event NODENAME
       evbody DATA
       end_event NODENAME {optional}
       event NODENAME DATA

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Data::Stag Data::Stag::BaseHandler

perl v5.34.0                                       2022-06-12                     <u>Data::Stag::<a href="../man3pm/BaseGenerator.3pm.html">BaseGenerator</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>