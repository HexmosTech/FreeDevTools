<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data::FormValidator::Constraints::Upload - Validate File Uploads</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdata-formvalidator-perl">libdata-formvalidator-perl_4.88-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Data::FormValidator::Constraints::Upload - Validate File Uploads

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # Be sure to use a CGI.pm or CGI::Simple object as the form
           # input when using this constraint
           my $q = CGI-&gt;new;

           use Data::FormValidator::Constraints::Upload qw(
                   file_format
                   file_max_bytes
                   image_max_dimensions
                   image_min_dimensions
           );
           my $dfv = Data::FormValidator-&gt;check($q,$my_profile);

           # In a Data::FormValidator Profile:
           constraint_methods =&gt; {
               image_name =&gt; [
                   file_format(),
                   <a href="../man10/file_max_bytes.10.html">file_max_bytes</a>(10),
                   image_max_dimensions(200,200),
                   image_min_dimensions(100,100),
                ],
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Note:</b> This is a new module is a new addition to Data::FormValidator and is should be considered "Beta".

       These module is meant to be used in conjunction with the Data::FormValidator module to automate the task
       of validating uploaded files. The following validation routines are supplied.

       To use any of them, the input data passed to Data::FormValidator must be a CGI.pm object.

       file_format
           This  function  checks  the format of the file, based on the MIME type if it's available, and a case-
           insensitive version of the file extension otherwise. By default, it tries to validate JPEG,  GIF  and
           PNG images. The params are:

            optional hash reference of parameters. A key named I&lt;mime_types&gt; points to
            array references of valid values.

              file_format( mime_types =&gt; [qw!image/jpeg image/gif image/png!] );

           Calling  this  function sets some meta data which can be retrieved through the "meta()" method of the
           Data::FormValidator::Results object.  The meta data added is "extension" and "mime_type".

           The MIME type of the file will first be tried to figured out by using the  &lt;File::MMagic&gt;  module  to
           examine the file. If that doesn't turn up a result, we'll use a MIME type from the browser if one has
           been  provided.  Otherwise,  we  give up. The extension we return is based on the MIME type we found,
           rather than trusting the one that was uploaded.

           <b>NOTE:</b> if we have to fall back to using the MIME type provided by the browser, we access it  from  the
           original  <u>input</u>  data  and  not the <u>filtered</u> data.  This should only cause issue when you have used a
           filter to alter the type of file that was uploaded (e.g. image conversion).

       file_max_bytes
           This function checks the maximum size of an uploaded file. By default, it checks to make  sure  files
           are smaller than 1 Meg. The params are:

            reference to max file size in bytes

               <a href="../man1024/file_max_bytes.1024.html">file_max_bytes</a>(1024), # 1 k

           Calling  this  function sets some meta data which can be retrieved through the "meta()" method of the
           Data::FormValidator::Results object.  The meta data added is "bytes".

       image_max_dimensions
           This function checks to make sure an uploaded image is no longer than some  maximum  dimensions.  The
           params are:

            reference to max pixel width
            reference to max pixel height

               image_max_dimensions(200,200),

           Calling  this  function sets some meta data which can be retrieved through the "meta()" method of the
           Data::FormValidator::Results object.  The meta data added is "width" and "height".

       image_min_dimensions
           This function checks to make sure an uploaded image is  longer  than  some  minimum  dimensions.  The
           params are:

            reference to min pixel width
            reference to min pixel height

               image_min_dimensions(100,100),

           Calling  this  function sets some meta data which can be retrieved through the "meta()" method of the
           Data::FormValidator::Results object.  The meta data added is "width" and "height".

   <b>BACKWARDS</b> <b>COMPATIBILITY</b>
       An older more awkward interface to the constraints in this module is still supported.   To  use  it,  you
       have  to load the package with 'validator_packages', and call each constraint in a hashref style, passing
       the parameters by reference. It looks like this:

           validator_packages =&gt; [qw(Data::FormValidator::Constraints::Upload)],
           constraints =&gt; {
               image_name =&gt; [
                   {
                       constraint_method =&gt; 'image_max_dimensions',
                       params =&gt; [\200,\200],
                   }
                ],
           }

       I told you it was more awkward. That was before I grokked the magic of closures, which is what drives the
       current interface.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       FileMetadata, Data::FormValidator, CGI, perl

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Stosberg, &lt;<a href="mailto:mark@summersault.com">mark@summersault.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2003-2005 by Mark Stosberg

       This library is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

perl v5.34.0                                       2022-06-12             <u>Data::FormValid...traints::<a href="../man3pm/Upload.3pm.html">Upload</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>