<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>snmp_index - Abstract Data Type for SNMP Indexing</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       snmp_index - Abstract Data Type for SNMP Indexing

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The module <u>snmp_index</u> implements an Abstract Data Type (ADT) for an SNMP index structure for SNMP tables.
       It is implemented as an ets table of the ordered_set data-type, which means that all operations are O(log
       n). In the table, the key is an ASN.1 OBJECT IDENTIFIER.

       This  index is used to separate the implementation of the SNMP ordering from the actual implementation of
       the table. The SNMP ordering, that is implementation of GET NEXT, is implemented in this module.

       For example, suppose there is an SNMP table, which is best implemented in Erlang as one process per  SNMP
       table row. Suppose further that the INDEX in the SNMP table is an OCTET STRING. The index structure would
       be created as follows:

       snmp_index:new(string)

       For each new process we create, we insert an item in an <u>snmp_index</u> structure:

       new_process(Name, SnmpIndex) -&gt;
         Pid = start_process(),
         NewSnmpIndex =
           snmp_index:insert(SnmpIndex, Name, Pid),
         &lt;...&gt;

       With  this  structure,  we  can  now  map an OBJECT IDENTIFIER in e.g. a GET NEXT request, to the correct
       process:

       get_next_pid(Oid, SnmpIndex) -&gt;
         {ok, {_, Pid}} = snmp_index:get_next(SnmpIndex, Oid),
         Pid.

</pre><h4><b>COMMON</b> <b>DATA</b> <b>TYPES</b></h4><pre>
       The following data types are used in the functions below:

         * <u>index()</u>

         * <u>oid()</u> <u>=</u> <u>[byte()]</u>

         * <u>key_types</u> <u>=</u> <u>type_spec()</u> <u>|</u> <u>{type_spec(),</u> <u>type_spec(),</u> <u>...}</u>

         * <u>type_spec()</u> <u>=</u> <u>fix_string</u> <u>|</u> <u>string</u> <u>|</u> <u>integer</u>

         * <u>key()</u> <u>=</u> <u>key_spec()</u> <u>|</u> <u>{key_spec(),</u> <u>key_spec(),</u> <u>...}</u>

         * <u>key_spec()</u> <u>=</u> <u>string()</u> <u>|</u> <u>integer()</u>

       The <u>index()</u> type denotes an snmp index structure.

       The <u>oid()</u> type is used to represent an ASN.1 OBJECT IDENTIFIER.

       The <u>key_types()</u> type is used when creating the index structure, and the <u>key()</u> type is used when inserting
       and deleting items from the structure.

       The <u>key_types()</u> type defines the types of the SNMP INDEX columns for the table.  If  the  table  has  one
       single  INDEX  column, this type should be a single atom, but if the table has multiple INDEX columns, it
       should be a tuple with atoms.

       If the INDEX column is of type INTEGER, or  derived  from  INTEGER,  the  corresponding  type  should  be
       <u>integer</u>.  If  it is a variable length type (e.g. OBJECT IDENTIFIER, OCTET STRING), the corresponding type
       should be <u>string</u>. Finally, if the type is of variable length, but with a  fixed  size  restriction  (e.g.
       IpAddress), the corresponding type should be <u>fix_string</u>.

       For  example, if the SNMP table has two INDEX columns, the first one an OCTET STRING with size 2, and the
       second one an OBJECT IDENTIFER, the corresponding <u>key_types</u> parameter would be <u>{fix_string,</u> <u>string}</u>.

       The <u>key()</u> type correlates to the <u>key_types()</u> type. If the <u>key_types()</u> is a single atom, the corresponding
       <u>key()</u> is a single type as well, but if the <u>key_types()</u> is a tuple, <u>key</u> must be a tuple of the same size.

       In the example above, valid <u>keys</u> could be <u>{"hi",</u> <u>"mom"}</u> and <u>{"no",</u> <u>"thanks"}</u>, whereas  <u>"hi"</u>,  <u>{"hi",</u>  <u>42}</u>
       and <u>{"hello",</u> <u>"there"}</u> would be invalid.

   <b>Warning:</b>

       All API functions that update the index return a <u>NewIndex</u> term. This is for backward compatibility with a
       previous  implementation  that used a B+ tree written purely in Erlang for the index. The <u>NewIndex</u> return
       value can now be ignored. The return value is now the unchanged table identifier for the ets table.

       The implementation using ets tables introduces a semantic incompatibility with older implementations.  In
       those  older  implementations,  using  pure  Erlang terms, the index was garbage collected like any other
       Erlang term and did not have to be deleted when discarded. An ets table is deleted only when the  process
       creating it explicitly deletes it or when the creating process terminates.

       A  new  interface <u>delete/1</u> is now added to handle the case when a process wants to discard an index table
       (i.e. to build a completely new). Any application using transient snmp indexes  has  to  be  modified  to
       handle this.

       As  an  snmp  adaption  usually  keeps  the index for the whole of the systems lifetime, this is rarely a
       problem.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>delete(Index)</b> <b>-&gt;</b> <b>true</b>

              Types:

                 Index = NewIndex = index()
                 Key = key()

              Deletes a complete index structure (i.e. the ets table holding the index). The index can no longer
              be referenced after this call. See the warning note above.

       <b>delete(Index,</b> <b>Key)</b> <b>-&gt;</b> <b>NewIndex</b>

              Types:

                 Index = NewIndex = index()
                 Key = key()

              Deletes a key and its value from the index structure. Returns a new structure.

       <b>get(Index,</b> <b>KeyOid)</b> <b>-&gt;</b> <b>{ok,</b> <b>{KeyOid,</b> <b>Value}}</b> <b>|</b> <b>undefined</b>

              Types:

                 Index = index()
                 KeyOid = oid()
                 Value = term()

              Gets the item with key <u>KeyOid</u>. Could be used from within an SNMP instrumentation function.

       <b>get_last(Index)</b> <b>-&gt;</b> <b>{ok,</b> <b>{KeyOid,</b> <b>Value}}</b> <b>|</b> <b>undefined</b>

              Types:

                 Index = index()
                 KeyOid = oid()
                 Value = term()

              Gets the last item in the index structure.

       <b>get_next(Index,</b> <b>KeyOid)</b> <b>-&gt;</b> <b>{ok,</b> <b>{NextKeyOid,</b> <b>Value}}</b> <b>|</b> <b>undefined</b>

              Types:

                 Index = index()
                 KeyOid = NextKeyOid = oid()
                 Value = term()

              Gets the next item in the SNMP lexicographic ordering, after <u>KeyOid</u> in the index structure. <u>KeyOid</u>
              does not have to refer to an existing item in the index.

       <b>insert(Index,</b> <b>Key,</b> <b>Value)</b> <b>-&gt;</b> <b>NewIndex</b>

              Types:

                 Index = NewIndex = index()
                 Key = key()
                 Value = term()

              Inserts a new key value tuple into the index structure. If an  item  with  the  same  key  already
              exists, the new <u>Value</u> overwrites the old value.

       <b>key_to_oid(Index,</b> <b>Key)</b> <b>-&gt;</b> <b>KeyOid</b>

              Types:

                 Index = index()
                 Key = key()
                 KeyOid = NextKeyOid = oid()

              Converts <u>Key</u> to an OBJECT IDENTIFIER.

       <b>new(KeyTypes)</b> <b>-&gt;</b> <b>Index</b>

              Types:

                 KeyTypes = key_types()
                 Index = index()

              Creates a new snmp index structure. The <u>key_types()</u> type is described above.

Ericsson AB                                         snmp 5.11                                   <u><a href="../man3erl/snmp_index.3erl.html">snmp_index</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>