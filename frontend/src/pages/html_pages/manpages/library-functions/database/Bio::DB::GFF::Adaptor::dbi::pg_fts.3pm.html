<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio::DB::GFF::Adaptor::dbi::pg_fts -- Database adaptor for a specific postgres schema with a TSearch2</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbio-db-gff-perl">libbio-db-gff-perl_1.7.4-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Bio::DB::GFF::Adaptor::dbi::pg_fts -- Database adaptor for a specific postgres schema with a TSearch2
       implementation

</pre><h4><b>SYNOPSIS</b></h4><pre>
           #create new GFF database connection
           my $db      = Bio::DB::GFF-&gt;new( -adaptor =&gt; 'dbi::pg_fts',
                                            -dsn     =&gt; 'dbi:Pg:dbname=worm');

           #add full text indexing 'stuff'
           #assumes that TSearch2 is available to PostgreSQL
           #this will take a VERY long time for a reasonably large database
           $db-&gt;install_TSearch2();

           ...some time later...
           #we don't like full text searching...
           $db-&gt;remove_TSearch2();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This adaptor is based on Bio::DB::GFF::Adaptor::dbi::pg but it implements the TSearch2 PostgreSQL contrib
       module for fast full text searching.  To use this module with your PostgreSQL GFF database, you need to
       make TSearch2 available in the database.

       To use this adaptor, follow these steps:

       Install TSearch2 contrib module for Pg
           Can  be  as easy as `sudo yum install postgresql-contrib`, or you may need to recompile PostgreSQL to
           include it.  See  &lt;<a href="http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/docs/tsearch-V2-intro.html">http://www.sai.msu.su/~megera/postgres/gist/tsearch/V2/docs/tsearch-V2-intro.html</a>&gt;
           for more details

       Load the TSearch2 functions to you database
             % cat tsearch2.sql | psql &lt;your database&gt;

       Load your data using the pg adaptor:
            % bp_pg_bulk_load_gff.pl -c -d yeast saccharomyces_cerevisiae.gff

           or

            % bp_load_gff.pl -c -d yeast -a dbi::pg saccharomyces_cerevisiae.gff

       Add GFF/TSearch2 specific modifications
           Execute a perl script like this one:

             #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?perl">/usr/bin/perl</a> -w
             use strict;

             use Bio::DB::GFF;

             my $db = Bio::DB::GFF-&gt;new(
                 -adaptor   =&gt; 'dbi::pg_fts',
                 -dsn       =&gt; 'dbi:Pg:dbname=yeast',
                 -user      =&gt; 'scott',
               );

             print "Installing TSearch2 columns...\n";

             $db-&gt;install_TSearch2();

             print "Done\n";

       Note that this last step will take a long time.  For a S. cerevisiae database with 15K rows, it took over
       an hour on my laptop, and with a C. elegans database (~10 million rows) it took well over a day.

       If  at some point you add more data you your database, you need to run a similar script to the one above,
       only executing the <b>update_TSearch2()</b> method.  Finally, if you want to remove the  TSearch2  columns  from
       your  database  and  go  back  to using the pg adaptor, you can execute a script like the one above, only
       executing the <b>remove_TSearch2()</b> method.

</pre><h4><b>NOTES</b> <b>ABOUT</b> <b>TSearch2</b> <b>SEARCHING</b></h4><pre>
       You should know a few things about how searching with TSearch2 works in the GBrowse environment:

       1.  TSearch2 does not do wild cards, so you should encourage your users not to use them.  If  wild  cards
           are used, the adaptor will fall back on an ILIKE search, which will be much slower.

       2.  However,  TSearch2  does do 'word stemming'.  That is, if you search for 'copy', it will find 'copy',
           'copies', and 'copied'.

       3.  TSearch2 does not do phrase searching; all of the terms in the search string are ANDed together.

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       Special thanks to Russell Smithies and Paul Smale at AgResearch in New Zealand for giving me their recipe
       for doing full text indexing in a GFF database.

</pre><h4><b>BUGS</b></h4><pre>
       Please report bugs to the BioPerl and/or GBrowse mailing lists (&lt;<a href="mailto:bioperl-l@lists.open-bio.org">mailto:bioperl-l@lists.open-bio.org</a>&gt; and
       &lt;<a href="mailto:gmod-gbrowse@lists.sourceforge.net">mailto:gmod-gbrowse@lists.sourceforge.net</a>&gt; respectively).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Please see Bio::DB::GFF::Adaptor::dbi::pg for more information about tuning your  PostgreSQL  server  for
       GFF data, and for general information about GFF database access, see Bio::DB::GFF.

</pre><h4><b>AUTHOR</b></h4><pre>
       Scott Cain, <a href="mailto:cain@cshl.edu">cain@cshl.edu</a>

</pre><h4><b>APPENDIX</b></h4><pre>
   <b>search_notes</b>
        Title   : search_notes
        Usage   : @search_results = $db-&gt;search_notes("full text string",$limit)
        Function: Search the notes for a text string, using PostgreSQL TSearch2
        Returns : array of results
        Args    : full text search string, and an optional row limit
        Status  : public

       This  is  based  on the mysql-specific method that makes use of the TSearch2 functionality in PosgreSQL's
       contrib directory. Given a search string, it performs a full-text search of the notes table  and  returns
       an array of results.  Each row of the returned array is a arrayref containing the following fields:

         column 1   A Bio::DB::GFF::Featname object, for passing to segment()
         column 2   The text of the note
         column 3   A relevance score.

   <b>make_features_by_name_where_part</b>
        Title   : make_features_by_name_where_part
        Function: constructs a TSearch2-compliant WHERE clause for a name search
        Status  : protected

   <b>install_TSearch2</b>
        Title   : install_TSearch2
        Function: installs schema modifications for use with TSearch2
        Usage   : $db-&gt;install_TSearch2
        Status  : public

   <b>update_TSearch2</b>
        Title   : update_TSearch2
        Function: Updates TSearch2 columns
        Usage   : $db-&gt;update_TSearch2
        Status  : public

   <b>remove_TSearch2</b>
        Title   : remove_TSearch2
        Function: Removes TSearch2 columns
        Usage   : $db-&gt;remove_TSearch2
        Status  : public

perl v5.30.0                                       2020-01-13             <u>Bio::DB::GFF::A...or::dbi::<a href="../man3pm/pg_fts.3pm.html">pg_fts</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>