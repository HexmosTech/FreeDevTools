<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBB::ReadLineStream - std::istream offering line-editing and history</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbobcat-dev">libbobcat-dev_6.07.01-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FBB::ReadLineStream - std::istream offering line-editing and history

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;bobcat/readlinestream&gt;</b>
       Linking option: -lbobcat -lreadline

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A <b>FBB::ReadLineStream</b> object is a <u>std::istream</u> objects, allowing line-editing and history manipulation.

       The  <b>ReadLineStream</b> class uses Gnu’s readline library to allow editing of input lines. The <u>ReadLineStream</u>
       object can be used to construct a <u>std::istream</u> allowing in-line editing of lines read from the  terminal.
       All lines may be preceded by a configurable prompt.

       Since Gnu’s readline library operates on global data there can only be one <b>ReadLineStream</b> (and underlying
       <b>ReadLineBuf</b>)  object.   <b>ReadLineStream</b>  is  a  singleton  class:  in  any  program  there can only be one
       <b>ReadLineStream</b> object.

       <b>ReadLineStream</b> offers editing capabilities while the user  is  entering  lines.  Like  Gnu’s  <b><a href="../man3/readline.3.html">readline</a></b>(3)
       function,  the  line  editing  commands  are  by  default similar to those of <b><a href="../man1/emacs.1.html">emacs</a></b>(1), but can easily be
       reconfigured, e.g. to offer <b><a href="../man1/vi.1.html">vi</a></b>(1)-like characteristics.

       History manipulation is provided as an option. The collected history may be accessed for reading using an
       <b>FBB::ReadLineHistory</b> object.

       Specific information about the facilities offered by the Gnu software used by <b>ReadLineStream</b> is  provided
       in the GNU Readline Library documentation (<u><a href="http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html">http://cnswww.cns.cwru.edu/php/chet/readline/rltop.html</a></u>).

       Gnu’s <u>readline</u> function reads its information from the standard input file. Programs using <u>ReadLineStream</u>
       should  normally  not  extract  information from <u>std::cin</u>. However, as the standard input file has a file
       descriptor (0), redirection should be possible (e.g., using <u>FBB::Redirector</u>).

       When the command line is kept, history expansion is offered as an option.  History  expansion  introduces
       words  from the history list into the input stream, making it easy to repeat commands, to insert elements
       of a previous input line into the current input line, or to fix errors in previous command lines.

       History expansion is usually performed  immediately  after  a  complete line  is read.

       The line selected from the history is called the <u>event</u>, and the portions of that line that are  processed
       are  called  <u>words</u>.   Various modifiers are available to manipulate selected words. This is comparable to
       the way a program like <b><a href="../man1/bash.1.html">bash</a></b>(1) breaks up its input line into `words’.

       History expansion is introduced by the use of the history expansion character, by default  equal  to  the
       <u>!</u>-character.   Only  backslash  (<u>\</u>)  and  single quotes can change the history expansion character into a
       normal character.

       The remainder of this section is copied almost verbatim from  the  <b><a href="../man3/history.3.html">history</a></b>(3)  man-page.  The  reader  is
       referred to that man-page or to the Gnu History Library documentation for further details.

       The following <b>event</b> <b>designators</b> are supported:

       o      <u>!</u>:  starts a  history substitution, except when followed by a blank, newline, <u>=</u> or <u>(</u>.

       o      <u>!n</u>: refers to command line n.

       o      <u>!-n</u>: refers to the current command line minus n.

       o      <u>!!</u>  refers to the previous command.  This is a synonym for `!-1’.

       o      <u>!string</u> refers to the most recent command starting with string.

       o      <u>!?string[?]</u>   refers  to the most recent command containing string.  The trailing <u>?</u> may be omitted
              if string is followed immediately by a newline.

       o      <u>^string1^string2^</u> (quick substitution) repeats the last command, replacing <u>string1</u>  with  <u>string2</u>.
              Equivalent to <u>!!:s/string1/string2/</u>.

       o      <u>!#</u> the entire command line typed so far.

       <b>Word</b> <b>Designators</b>

       Word  designators are used to select desired words from the event.  A <u>:</u> separates the event specification
       from the word designator.  It may be omitted if the word designator begins with a  <u>^,</u>  <u>$,</u>  <u>*,</u>  <u>-</u>,  or  <u>%</u>.
       Words  are numbered from the beginning of the line, with the first word being denoted by 0 (zero).  Words
       are inserted into the current line separated by single spaces.

       o      <u>0</u> (zero) The zeroth word.  For the shell, this is the command word.

       o      <u>n</u>      The nth word.

       o      <u>^</u>      The first argument.  That is, word 1.

       o      <u>$</u>      The last argument.

       o      <u>%</u>      The word matched by the most recent <u>?string?</u> search.

       o      <u>x-y</u>    A range of words; `-y’ abbreviates `0-y’.

       o      <u>*</u>      All  of  the words but the zeroth.  This is a synonym for <u>1-$</u>. It is not an error to use  *
              if there is just one word in the event; the empty string is returned in that case.

       o      <u>x*</u>     Abbreviates <u>x-$</u>.

       o      <u>x-</u>      Abbreviates  <u>x-$</u>  like  <u>x*</u>,  but omits the last word.  If  a  word  designator is supplied
              without an event specification, the previous command is used as the event.

       <b>Modifiers</b>

       After the optional word designator, there may appear  a  sequence  of   one  or  more  of  the  following
       modifiers, each preceded by a <u>:</u>.

       o      <u>h</u> removes a trailing file name component, leaving only the head.

       o      <u>t</u> removes all leading file name components, leaving the tail.

       o      <u>r</u> removes a trailing suffix of the form <u>.xxx</u>, leaving the basename.

       o      <u>e</u> removes all but the trailing suffix.

       o      <u>p</u> prints the new command but does not execute it.

       o      <u>q</u> quotes the substituted words, escaping further substitutions.

       o      <u>x</u> quotes the substituted words as with q, but break into words at blanks and newlines.

       o      <u>s/old/new/</u>  substitutes  new for the first occurrence of old in the event line.  Any delimiter can
              be used in place of <u>/</u>.  The final delimiter is optional if it is the last character of  the  event
              line.   The  delimiter may be quoted in old and new with a single backslash.  If <u>&amp;</u> appears in new,
              it is replaced by old.  A single backslash will quote the <u>&amp;</u>.  If <u>old</u> is null, it  is  set  to  the
              last  old  substituted,  or, if no previous history substitutions took place, the last string in a
              <u>!?string[?]</u>  search.

       o      <u>&amp;</u>      repeats the previous substitution.

       o      <u>g</u> Causes changes to be applied over the entire event line.  This is used in  conjunction  with  <u>:s</u>
              (e.g.,  <u>:gs/old/new/</u>)  or  <u>:&amp;</u>.   If used with <u>:s</u>, any delimiter can be used in place of <u>/</u>, and the
              final delimiter is optional if it is the last character of the event line.  An a may be used as  a
              synonym for <u>g</u>.

       o      <u>G</u> Apply the following <u>s</u> modifier once to each word in the event line.

</pre><h4><b>NAMESPACE</b></h4><pre>
       <b>FBB</b>
       All  constructors,  members,  operators  and manipulators, mentioned in this man-page, are defined in the
       namespace <b>FBB</b>.

</pre><h4><b>INHERITS</b> <b>FROM</b></h4><pre>
       <u>FBB::ReadLineBuf</u> (privately), <u>std::istream</u> (publicly)

</pre><h4><b>ENUMERATIONS</b></h4><pre>
       The <u>enum</u> <u>Type</u> defines the following value:

       o      <u>DONT_EXPAND_HISTORY</u>: history expansion is not requested;

       o      <u>EXPAND_HISTORY</u>:  history expansion is requested.

       The <u>enum</u> <u>Expansion</u> provides meaningful return values for the history expansion process. Its values are:

       o      <u>DONT_EXEC</u>: history expansion succeeded, but the expanded line should not be executed. E.g.,  after
              entering the line

                  ls *

              the line

                  !!:p

              should  cause the using program to <u>display</u>, rather than exectute <u>ls</u> <u>*</u>. Note that interpretation of
              this expansion return value is not the task of the <b>ReadLineBuf</b> object, but of  the  program  using
              the <b>ReadLineBuf</b> object.

       o      <u>ERROR</u>: the history expansion failed. See also the member <u>expansionError</u> below;

       o      <u>EXPANDED</u>: the history expansion succeeded;

       o      <u>NO_EXPANSION</u>: no history expansion took place.

</pre><h4><b>CONSTRUCTORS</b></h4><pre>
       Preamble:  since  there can only be one <b>ReadLineBuf</b> object, any attempt to define a second <b>ReadLineStream</b>
       object will fail as there can only be a single <b>ReadLineBuf</b> object in any program. An attempt to define  a
       second <b>ReadLineBuf</b> object results in a <u>logic_error</u> exception being thrown.

       o      <b>ReadLineStream(std::string</b> <b>const</b> <b>&amp;prompt</b> <b>=</b> <b>"",</b> <b>Type</b> <b>type</b> <b>=</b> <b>NO_EXPANSION)</b>:
              This  constructor initializes the <u>ReadLineStream</u> object with an initial prompt, using a history of
              at most <u>std::numeric_limits&lt;int&gt;::max()</u> lines, by default not using history expansion.

       o      <b>ReadLineStream(std::string</b> <b>const</b> <b>&amp;prompt,</b> <b>size_t</b> <b>historySize,</b> <b>Type</b> <b>type</b> <b>=</b> <b>NO_EXPANSION)</b>:
              This constructor initializes the <u>ReadLineStream</u> with an initial prompt, an initial  history  of  a
              predefined  maximum  size,  by  default  not  using history expansion. Specifying a history size 0
              results in no history being kept,  any  value  equal  to  or  exceeding  the  predefined  constant
              <u>std::numeric_limits&lt;int&gt;::max()</u>  results  in  a history of at most <u>std::numeric_limits&lt;int&gt;::max()</u>
              lines. If no history is requested but <u>type</u> is specified as <u>EXPAND_HISTORY</u> a <u>logic_error</u>  exception
              is thrown.

       Copy and move constructors (and assignment operators) are not available.

</pre><h4><b>MEMBER</b> <b>FUNCTIONS</b></h4><pre>
       All members of <b>std::streambuf</b> are available, as <b>FBB::ReadLineStream</b> inherits from this class.

       o      <b>ReadLineStream::Expansion</b> <b>expansion()</b> <b>const</b>:
              The  status  of  the  history expansion after retrieving a line from the terminal is returned. Its
              value is determined after each line retrieved from  the  terminal.  If  no  history  expansion  is
              requested it returns <u>Expansion::ERROR</u>.

       o      <b>std::string</b> <b>const</b> <b>&amp;expansionError()</b> <b>const</b>:
              A  short textual description of the nature of the error when <u>expansion</u> returns <u>Expansion::ERROR</u> is
              returned. If no history expansion is requested an empty string is returned.

       o      <b>bool</b> <b>setExpansion(Type</b> <b>type)</b>:
              History expansion can be activated or  stopped  using  this  member.  When  history  expansion  is
              requested but the <b>ReadLineStream</b> object maintains no history the function returns <u>false</u>. Otherwise
              it returns <u>true</u>.

       o      <b>void</b> <b>setPrompt(std::string</b> <b>const</b> <b>&amp;prompt</b> <b>=</b> <b>"")</b>:
              The  prompt  that is displayed in front of the next line read from the terminal can be modified by
              this member. When called without arguments no prompt will be displayed. <u>setPrompt</u>  can  be  called
              while  input  lines  are  being received. The new prompt will be active after the current line has
              been read from the terminal.

       o      <b>bool</b> <b>useTimestamps(std::string</b> <b>(*timestamp)()</b> <b>=</b> <b>0)</b>:
              When initialized with the address of a function returning a <u>std::string</u> the entered commands  will
              be  given  a  timestamp  equal  to  the text returned by the function pointed to by <u>timestamp</u>. The
              timestamps can be retrieved using the <b><a href="../man3/ReadLineHistory.3.html">ReadLineHistory</a></b>(3) object. By default or  after  passing  an
              explicit 0-pointer to <u>useTimestamps</u> no timestamps are stored.  The value <u>false</u> is returned when no
              history is kept, otherwise <u>true</u> is returned.

</pre><h4><b>EXAMPLE</b></h4><pre>
       #include &lt;iostream&gt;
       #include &lt;istream&gt;
       #include &lt;cstdio&gt;
       #include &lt;sstream&gt;
       #include &lt;iomanip&gt;

       #include &lt;bobcat/readlinestream&gt;

       using namespace std;
       using namespace FBB;

       int main()
       {
           ReadLineStream in("", 10, ReadLineBuf::EXPAND_HISTORY);

           size_t count = 0;
           string line;
           while (true)
           {
               ostringstream prompt;
               prompt &lt;&lt; <a href="../man2/setw.2.html">setw</a>(2) &lt;&lt; ++count &lt;&lt; ": ";
               in.setPrompt(prompt.str());

               if (!getline(in, line))          // uses the last-set prompt
                   break;

               cout &lt;&lt; "Retrieved: " &lt;&lt; line &lt;&lt; "\n"
                       "Expansion status: ";

               switch (in.expansion())
               {
                   case ReadLineBuf::ERROR:
                       cout &lt;&lt; "ERROR: " &lt;&lt; in.expansionError() &lt;&lt; ’\n’;
                   break;

                   case ReadLineBuf::NO_EXPANSION:
                       cout &lt;&lt; "no expansion performed\n";
                   break;

                   case ReadLineBuf::DONT_EXEC:
                       cout &lt;&lt; "don’t execute the expanded line\n";
                   break;

                   case ReadLineBuf::EXPANDED:
                       cout &lt;&lt; "expansion successfully performed\n";
                   break;
               }
           }
       }

</pre><h4><b>FILES</b></h4><pre>
       <u>bobcat/readlinebuf</u> - defines the class interface

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/bobcat.7.html">bobcat</a></b>(7), <b><a href="../man3/readline.3.html">readline</a></b>(3), <b><a href="../man3bobcat/readlinebuf.3bobcat.html">readlinebuf</a></b>(3bobcat), <b><a href="../man3bobcat/readlinehistory.3bobcat.html">readlinehistory</a></b>(3bobcat)

</pre><h4><b>BUGS</b></h4><pre>
       None Reported.

</pre><h4><b>BOBCAT</b> <b>PROJECT</b> <b>FILES</b></h4><pre>
       o      <u>https://fbb-git.gitlab.io/bobcat/</u>: gitlab project page;

       Debian Bobcat project files:

       o      <u>libbobcat6</u>: debian package containing the shared library, changelog and copyright note;

       o      <u>libbobcat-dev</u>:  debian package containing the static library, headers, manual pages, and developer
              info;

</pre><h4><b>BOBCAT</b></h4><pre>
       Bobcat is an acronym of `Brokken’s Own Base Classes And Templates’.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This is free software, distributed under the terms of the GNU General Public License (GPL).

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank B. Brokken (<b><a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a></b>).

libbobcat-dev_6.07.01                               2005-2025                       <u>FBB::<a href="../man3bobcat/ReadLineStream.3bobcat.html">ReadLineStream</a></u>(3bobcat)
</pre>
 </div>
</div></section>
</div>
</body>
</html>