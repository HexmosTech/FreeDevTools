<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LWP::Authen::OAuth2::ServiceProvider::Line - Access Line OAuth2 API v2</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblwp-authen-oauth2-perl">liblwp-authen-oauth2-perl_0.20-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       LWP::Authen::OAuth2::ServiceProvider::Line - Access Line OAuth2 API v2

</pre><h4><b>VERSION</b></h4><pre>
       version 0.20

</pre><h4><b>SYNOPSIS</b></h4><pre>
           my $oauth2 = LWP::Authen::OAuth2-&gt;new(
               service_provider =&gt; 'Line',
               redirect_uri     =&gt; '<a href="http://example.com/">http://example.com/</a>',
               client_id        =&gt; 'line_client_id'      # Retrieved from https://developers.line.me/
               client_secret    =&gt; 'line_client_secret'  # Retrieved from https://developers.line.me/
           );

           my $url = $oauth2-&gt;authorization_url(state =&gt; $state);

           # ... Send user to authorization URL and get authorization $code ...

           $oauth2-&gt;request_tokens(code =&gt; $code);

           # Simple requests

           # User Info
           my $profile       = $oauth2-&gt;make_api_call('profile');
           my $userId        = $profile-&gt;{userId};
           my $displayName   = $profile-&gt;{displayName};
           my $pictureUrl    = $profile-&gt;{pictureUrl};
           my $statusMessage = $profile-&gt;{statusMessage};

           # Refresh
           $oauth2-&gt;refresh_access_token();

           # More complex requests...

           # Verify
           # Manually send the request using the internal user agent - see explanation in "Line API Documentation" below.
           my $access_token_str = $oauth2-&gt;access_token-&gt;access_token;
           my $res = $oauth2-&gt;user_agent-&gt;post($oauth2-&gt;api_url_base.'oauth/verify' =&gt; { access_token =&gt; $access_token_str });
           my $content = eval { decode_json($res-&gt;content) };
           my $scope      = $content-&gt;{scope};
           my $client_id  = $content-&gt;{client_id};
           my $expires_in = $content-&gt;{expires_in};

           # Revoke
           # Look up the internal refresh token - see explanation in "Line API Documentation" below.
           my $refresh_token_str = $oauth2-&gt;access_token-&gt;refresh_token;
           $oauth2-&gt;post($oauth2-&gt;api_url_base.'oauth/revoke' =&gt; { refresh_token =&gt; $refresh_token_str });

</pre><h4><b>REGISTERING</b></h4><pre>
       Individual users must have an account created with the Line application &lt;https://line.me/download&gt;.  In
       order to log in with OAuth2, users must register their email address. Device-specific instructions can be
       found on the Line support site &lt;https://help.line.me/&gt;.

       API clients can follow the Line Login &lt;https://developers.line.me/line-login/overview&gt; documentation to
       set up the OAuth2 credentials.

</pre><h4><b>Line</b> <b>API</b> <b>Documentation</b></h4><pre>
       See the Line Social REST API Reference &lt;https://devdocs.line.me/en/#how-to-use-the-apis&gt;.

       As of writing, there are two simple API calls: "profile" and "refresh".

       There are also "verify" and "revoke" endpoints, which require a bit more work.

       "verify"
           "verify"  is  designed for verifying pre-existing access tokens. Instead of using the "Authorization"
           header, this endpoint expects the access token to be form-urlencoded in the request body. Because  of
           this,  it's  necessary to get access to the internal access token string to send in the request body.
           The LWP::Authen::OAuth2::ServiceProvider::Line::AccessToken token class used by this service provider
           provides the "access_token" accessor for this purpose.

           The server seems to ignore the "Authorization" header for this request, so including it  is  probably
           not  a  problem.  If  you  want  to  avoid  sending the access token in the header, it's necessary to
           manually construct the request and decode the response.

           See "SYNOPSIS" for usage examples.

       "revoke"
           "revoke" requires the refresh token to be form-urlencoded in the request body. Because of this,  it's
           necessary  to  get  access  to  the  internal  refresh  token string to send in the request body. The
           LWP::Authen::OAuth2::ServiceProvider::Line::AccessToken token class used  by  this  service  provider
           provides the "refresh_token" accessor for this purpose. See "SYNOPSYS" for usage examples.

</pre><h4><b>Refresh</b> <b>timing</b></h4><pre>
       Line  access  tokens  can  be  refreshed at any time up until 10 days after the access token expires. The
       LWP::Authen::OAuth2::ServiceProvider::Line::AccessToken token class used by this service provider extends
       the "should_refresh" method for this purpose, causing "$oauth2-&gt;should_refresh()" to return false if this
       10-day period has lapsed.

</pre><h4><b>AUTHOR</b></h4><pre>
       Adam Millerchip, "&lt;adam at millerchip.net&gt;"

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Ben Tilly, &lt;btilly at gmail.com&gt;

       •   Thomas Klausner &lt;<a href="mailto:domm@plix.at">domm@plix.at</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2013 - 2022 by Ben Tilly, Rent.com, Thomas Klausner.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.36.0                                       2023-02-04             <u>LWP::Authen::OA...eProvider::<a href="../man3pm/Line.3pm.html">Line</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>