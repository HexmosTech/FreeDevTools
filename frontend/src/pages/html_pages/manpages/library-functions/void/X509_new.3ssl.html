<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X509_new, X509_new_ex, X509_free, X509_up_ref, X509_chain_up_ref, OSSL_STACK_OF_X509_free - X509</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       X509_new, X509_new_ex, X509_free, X509_up_ref, X509_chain_up_ref, OSSL_STACK_OF_X509_free - X509
       certificate ASN1 allocation and deallocation functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/x509.h&gt;

        X509 *X509_new(void);
        X509 *X509_new_ex(OSSL_LIB_CTX *libctx, const char *propq);
        void X509_free(X509 *a);
        int X509_up_ref(X509 *a);
        STACK_OF(X509) *X509_chain_up_ref(STACK_OF(X509) *x);
        void OSSL_STACK_OF_X509_free(STACK_OF(X509) *certs);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The X509 ASN1 allocation routines allocate and free an X509 structure, which represents an X509
       certificate.

       <b>X509_new_ex()</b> allocates and initializes a X509 structure with a library context of <u>libctx</u>, property query
       of <u>propq</u> and a reference count of <b>1</b>. Many X509 functions such as <b>X509_check_purpose()</b>, and <b>X509_verify()</b>
       use this library context to select which providers supply the fetched algorithms (SHA1 is used
       internally). This created X509 object can then be used when loading binary data using <b>d2i_X509()</b>.

       <b>X509_new()</b> is similar to <b>X509_new_ex()</b> but sets the library context and property query to NULL. This
       results in the default (NULL) library context being used for any X509 operations requiring algorithm
       fetches.

       <b>X509_free()</b> decrements the reference count of <b>X509</b> structure <b>a</b> and frees it up if the reference count is
       zero. If the argument is NULL, nothing is done.

       <b>X509_up_ref()</b> increments the reference count of <b>a</b>.

       <b>X509_chain_up_ref()</b> increases the reference count of all certificates in chain <b>x</b> and returns a copy of
       the stack, or an empty stack if <b>a</b> is NULL.

       <b>OSSL_STACK_OF_X509_free()</b> deallocates the given list of pointers to certificates after calling
       <b>X509_free()</b> on all its elements.  If the argument is NULL, nothing is done.

</pre><h4><b>NOTES</b></h4><pre>
       The function <b>X509_up_ref()</b> if useful if a certificate structure is being used by several different
       operations each of which will free it up after use: this avoids the need to duplicate the entire
       certificate structure.

       The function <b>X509_chain_up_ref()</b> doesn't just up the reference count of each certificate. It also returns
       a copy of the stack, using <b>sk_X509_dup()</b>, but it serves a similar purpose: the returned chain persists
       after the original has been freed.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       If the allocation fails, <b>X509_new()</b> returns NULL and sets an error code that can be obtained by
       <b><a href="../man3/ERR_get_error.3.html">ERR_get_error</a></b>(3).  Otherwise it returns a pointer to the newly allocated structure.

       <b>X509_up_ref()</b> returns 1 for success and 0 for failure.

       <b>X509_chain_up_ref()</b> returns a copy of the stack or NULL if an error occurred.

       <b>OSSL_STACK_OF_X509_free()</b> has no return value.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/d2i_X509.3.html">d2i_X509</a></b>(3), <b><a href="../man3/ERR_get_error.3.html">ERR_get_error</a></b>(3), <b><a href="../man3/X509_CRL_get0_by_serial.3.html">X509_CRL_get0_by_serial</a></b>(3), <b><a href="../man3/X509_get0_signature.3.html">X509_get0_signature</a></b>(3), <b><a href="../man3/X509_get_ext_d2i.3.html">X509_get_ext_d2i</a></b>(3),
       <b><a href="../man3/X509_get_extension_flags.3.html">X509_get_extension_flags</a></b>(3), <b><a href="../man3/X509_get_pubkey.3.html">X509_get_pubkey</a></b>(3), <b><a href="../man3/X509_get_subject_name.3.html">X509_get_subject_name</a></b>(3), <b><a href="../man3/X509_get_version.3.html">X509_get_version</a></b>(3),
       <b><a href="../man3/X509_NAME_add_entry_by_txt.3.html">X509_NAME_add_entry_by_txt</a></b>(3), <b><a href="../man3/X509_NAME_ENTRY_get_object.3.html">X509_NAME_ENTRY_get_object</a></b>(3), <b><a href="../man3/X509_NAME_get_index_by_NID.3.html">X509_NAME_get_index_by_NID</a></b>(3),
       <b><a href="../man3/X509_NAME_print_ex.3.html">X509_NAME_print_ex</a></b>(3), <b><a href="../man3/X509_sign.3.html">X509_sign</a></b>(3), <b><a href="../man3/X509V3_get_d2i.3.html">X509V3_get_d2i</a></b>(3), <b><a href="../man3/X509_verify_cert.3.html">X509_verify_cert</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       <b>X509_new_ex()</b> was added in OpenSSL 3.0.

       <b>OSSL_STACK_OF_X509_free()</b> was added in OpenSSL 3.2.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2002-2024 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain a copy in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                                     <u><a href="../man3SSL/X509_NEW.3SSL.html">X509_NEW</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>