<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSRemapInit - traffic Server remap plugin entry points</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/trafficserver-dev">trafficserver-dev_9.2.5+ds-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       TSRemapInit - traffic Server remap plugin entry points

</pre><h4><b>SYNOPSIS</b></h4><pre>
          #include &lt;ts/ts.h&gt;
          #include &lt;ts/remap.h&gt;

       <u>TSReturnCode</u> <b>TSRemapInit(</b><u>TSRemapInterface</u> <b>*api_info,</b> <b>char</b> <b>*errbuff,</b> <b>int</b> <b>errbuff_size)</b>

       <b>void</b> <b>TSRemapPreConfigReload(void)</b>

       <b>void</b> <b>TSRemapPostConfigReload(</b><u>TSReturnCode</u> <b>reloadStatus)</b>

       <b>void</b> <b>TSRemapDone(void)</b>

       <u>TSRemapStatus</u> <b>TSRemapDoRemap(void</b> <b>*ih,</b> <u>TSHttpTxn</u> <b>rh,</b> <u>TSRemapRequestInfo</u> <b>*rri)</b>

       <u>TSReturnCode</u> <b>TSRemapNewInstance(int</b> <b>argc,</b> <b>char</b> <b>*argv[],</b> <b>void</b> <b>**ih,</b> <b>char</b> <b>*errbuff,</b> <b>int</b> <b>errbuff_size)</b>

       <b>void</b> <b>TSRemapDeleteInstance(void*)</b>

       <b>void</b> <b>TSRemapOSResponse(void</b> <b>*ih,</b> <u>TSHttpTxn</u> <b>rh,</b> <b>int</b> <b>os_response_type)</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  Traffic  Server  remap  interface  provides  a  simplified  mechanism for plugins to manipulate HTTP
       transactions. A remap plugin is not global; it is configured on a per-remap rule basis, which enables you
       to customize how URLs are redirected based on individual rules in <u>remap.config</u>.  Writing a  remap  plugin
       consists  of implementing one or more of the remap entry points and configuring <u>remap.config</u> to route the
       transaction through your plugin. Multiple remap plugins  can  be  specified  for  a  single  remap  rule,
       resulting  in  a  remap  plugin  chain  where  each  plugin  is  given an opportunity to examine the HTTP
       transaction.

       <u>TSRemapInit()</u> is a required entry point. This function will be called once when Traffic Server loads  the
       plugin.  If  the  optional  <u>TSRemapDone()</u>  entry  point  is available, Traffic Server will call then when
       unloading the remap plugin.

       A remap plugin may be invoked for different remap rules. Traffic Server will call the  entry  point  each
       time  a  plugin is specified in a remap rule. When a remap plugin instance is no longer required, Traffic
       Server will call <u>TSRemapDeleteInstance()</u>. At that point, it's safe to remove any  data  or  continuations
       associated with that instance.

       <u>TSRemapDoRemap()</u>  is called for each HTTP transaction. This is a mandatory entry point. In this function,
       the remap plugin may examine and modify the HTTP transaction.

       <u>TSRemapPreConfigReload()</u> is called <u>before</u> the parsing of a  new  remap  configuration  starts  to  notify
       plugins  of  the  coming  configuration  reload.  It  is called on all already loaded plugins, invoked by
       current and all previous still used configurations. This is an optional entry point.

       <u>TSRemapPostConfigReload()</u> is called to indicate the end of the new remap configuration load. It is called
       on the newly and previously loaded  plugins,  invoked  by  the  new,  current  and  previous  still  used
       configurations.   It   also  indicates  whether  the  configuration  reload  was  successful  by  passing
       <u>TSREMAP_CONFIG_RELOAD_FAILURE</u> in case of failure and to notify the plugins if they are going to  be  part
       of     the     new     configuration     by    passing    <u>TSREMAP_CONFIG_RELOAD_SUCCESS_PLUGIN_USED</u>    or
       <u>TSREMAP_CONFIG_RELOAD_SUCCESS_PLUGIN_UNUSED</u>. This is an optional entry point.

       Generally speaking, calls to these functions are mutually exclusive. The exception is for functions which
       take an HTTP transaction as a parameter. Calls to  these  transaction-specific  functions  for  different
       transactions are not necessarily mutually exclusive of each other.

       For further information, see <u>Remap</u> <u>Plugins</u>.

</pre><h4><b>TYPES</b></h4><pre>
       <b>enum</b> <b>TSRemapStatus</b>
              Status return value for remap callback.

              <b>enumerator</b> <b>TSREMAP_DID_REMAP</b>
                     The remap callback modified the request.

              <b>enumerator</b> <b>TSREMAP_DID_REMAP_STOP</b>
                     The  remap  callback  modified  the  request and that no more remapping callbacks should be
                     invoked.

              <b>enumerator</b> <b>TSREMAP_NO_REMAP</b>
                     The remap callback did not modify the request.

              <b>enumerator</b> <b>TSREMAP_NO_REMAP_STOP</b>
                     The remap callback did not modify the request  and  that  no  further  remapping  callbacks
                     should be invoked.

              <b>enumerator</b> <b>TSREMAP_ERROR</b>
                     The  remapping  attempt  in  general  failed  and the transaction should fail with an error
                     return to the user agent.

       <b>enum</b> <b>TSRemapReloadStatus</b>

              <b>enumerator</b> <b>TSREMAP_CONFIG_RELOAD_FAILURE</b>
                     Notify the plugin that configuration parsing failed.

              <b>enumerator</b> <b>TSREMAP_CONFIG_RELOAD_SUCCESS_PLUGIN_USED</b>
                     Configuration parsing succeeded and plugin was used by the new configuration.

              <b>enumerator</b> <b>TSREMAP_CONFIG_RELOAD_SUCCESS_PLUGIN_UNUSED</b>
                     Configuration parsing succeeded but plugin was NOT used by the new configuration.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <u>TSRemapInit()</u> and <u>TSRemapNewInstance()</u> should return <u>TS_SUCCESS</u> on success,  and  <u>TS_ERROR</u>  otherwise.  A
       return value of <u>TS_ERROR</u> is unrecoverable.

       <u>TSRemapDoRemap()</u>  returns a status code that indicates whether the HTTP transaction has been modified and
       whether Traffic Server should continue to evaluate the chain of remap plugins.  If  the  transaction  was
       modified,  the  plugin  should  return  <u>TSREMAP_DID_REMAP</u>  or <u>TSREMAP_DID_REMAP_STOP</u>; otherwise it should
       return <u>TSREMAP_NO_REMAP</u> or <u>TSREMAP_NO_REMAP_STOP</u>. If Traffic Server should not send  the  transaction  to
       subsequent plugins in the remap chain, return <u>TSREMAP_NO_REMAP_STOP</u> or <u>TSREMAP_DID_REMAP_STOP</u>.  Returning
       <u>TSREMAP_ERROR</u> causes Traffic Server to stop evaluating the remap chain and respond with an error.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3ts/TSAPI.3ts.html">TSAPI</a>(3ts)</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2025, <a href="mailto:dev@trafficserver.apache.org">dev@trafficserver.apache.org</a>

9.2                                               May 22, 2025                                  <u><a href="../man3ts/TSREMAPINIT.3ts.html">TSREMAPINIT</a></u>(3ts)
</pre>
 </div>
</div></section>
</div>
</body>
</html>