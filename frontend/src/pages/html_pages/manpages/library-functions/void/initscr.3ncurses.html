<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>initscr,  newterm,  endwin,  isendwin,  set_term, delscreen - initialize, manipulate, or tear down curses</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ncurses-doc">ncurses-doc_6.5+20250216-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>initscr</b>,  <b>newterm</b>,  <b>endwin</b>,  <b>isendwin</b>,  <b>set_term</b>, <b>delscreen</b> - initialize, manipulate, or tear down <u>curses</u>
       terminal interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;curses.h&gt;</b>

       <b>WINDOW</b> <b>*</b> <b>initscr(void);</b>
       <b>int</b> <b>endwin(void);</b>

       <b>bool</b> <b>isendwin(void);</b>

       <b>SCREEN</b> <b>*</b> <b>newterm(const</b> <b>char</b> <b>*</b> <u>type</u><b>,</b> <b>FILE</b> <b>*</b> <u>outf</u><b>,</b> <b>FILE</b> <b>*</b> <u>inf</u><b>);</b>
       <b>SCREEN</b> <b>*</b> <b>set_term(SCREEN</b> <b>*</b> <u>new</u><b>);</b>
       <b>void</b> <b>delscreen(SCREEN</b> <b>*</b> <u>sp</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>initscr</b>
       <b>initscr</b> determines the terminal type and  initializes  the  library's  <u>SCREEN</u>,  <u>WINDOW</u>,  and  other  data
       structures.   It  is normally the first <u>curses</u> function call a program performs.  However, an application
       with unusual needs might employ a few other <u>curses</u> functions beforehand:

       •   <b><a href="../man3NCURSES/slk_init.3NCURSES.html">slk_init</a></b>(3NCURSES) to set up soft-label keys;

       •   <b><a href="../man3NCURSES/filter.3NCURSES.html">filter</a></b>(3NCURSES) if the program is designed to operate in a process pipeline;

       •   <b><a href="../man3NCURSES/ripoffline.3NCURSES.html">ripoffline</a></b>(3NCURSES) to reserve up to five lines  at  the  top  and/or  bottom  of  the  screen  from
           management by <b>stdscr</b>, the standard <u>curses</u> window; and

       •   <b><a href="../man3NCURSES/use_env.3NCURSES.html">use_env</a></b>(3NCURSES)  and/or  <b><a href="../man3NCURSES/use_tioctl.3NCURSES.html">use_tioctl</a></b>(3NCURSES)  to  configure  use  of  the  process environment and
           operating system's terminal driver, respectively, when determining the  dimensions  of  the  terminal
           display.

       Further,  a  <u>curses</u>  program  might  call <b>newterm</b> prior to or instead of <b>initscr</b> in two specialized cases
       described in its subsection below.

       <b>initscr</b> causes the first <b><a href="../man3NCURSES/refresh.3NCURSES.html">refresh</a></b>(3NCURSES) call to clear the screen.  If errors occur, <b>initscr</b> writes  an
       appropriate diagnostic message to the standard error stream and exits; otherwise, it returns a pointer to
       <b>stdscr</b>.

   <b>newterm</b>
       An  application  that manages multiple terminals should call <b>newterm</b> once for each such device <u>instead</u> of
       <b>initscr</b>.  <b>newterm</b>'s arguments are

       •   the <u>type</u> of the associated terminal, or <u>NULL</u> to use the <u>TERM</u> environment variable;

       •   an output stream <u>outf</u> connected to the terminal; and

       •   an input stream <u>inf</u> connected to the terminal.  It returns a variable of  structure  type  <u>SCREEN</u>  <b>*</b>,
           which should be saved for later use with <b>set_term</b> and <b>delscreen</b>.

       <b>newterm</b>  passes  the  file  descriptor of the output stream to the <u>terminfo</u> function <b><a href="../man3NCURSES/setupterm.3NCURSES.html">setupterm</a></b>(3NCURSES),
       which returns a pointer to a <u>TERMINAL</u> structure that <b>newterm</b> stores in  the  <u>SCREEN</u>  it  returns  to  the
       application.

       An  application that needs to inspect a terminal type's capabilities, so that it can continue to run in a
       line-oriented mode if the terminal cannot support a screen-oriented program, would also use <b>newterm</b>.   If
       at  most  one  terminal connection is needed, the programmer could perform such a capability test, decide
       which mode in which to operate, then call <b>delscreen</b> on the pointer returned by <b>newterm</b>, and proceed  with
       either <b>initscr</b> or a non-<u>curses</u> interface.

   <b>endwin</b>
       The program must also call <b>endwin</b> for each terminal being used before exiting from <u>curses</u>.  If <b>newterm</b> is
       called  more  than  once  for  the same terminal, the first terminal referred to must be the last one for
       which <b>endwin</b> is called.

       A program should always call <b>endwin</b> before exiting the application  or  temporarily  suspending  <u>curses</u>'s
       management of the terminal.  <b>endwin</b>:

       •   resets colors to correspond with the default color pair 0,

       •   moves the cursor to the lower left-hand corner of the screen,

       •   clears the remainder of the line so that it uses the default colors,

       •   sets the cursor to normal visibility (see <b><a href="../man3NCURSES/curs_set.3NCURSES.html">curs_set</a></b>(3NCURSES)),

       •   if applicable, stops cursor-addressing mode using the <b>exit_ca_mode</b> (<b>rmcup</b>) terminal capability, and

       •   restores terminal modes (see <b><a href="../man3NCURSES/reset_shell_mode.3NCURSES.html">reset_shell_mode</a></b>(3NCURSES)).

       Calling  <b><a href="../man3NCURSES/refresh.3NCURSES.html">refresh</a></b>(3NCURSES)  or  <b><a href="../man3NCURSES/doupdate.3NCURSES.html">doupdate</a></b>(3NCURSES)  after  a temporary suspension causes <u>curses</u> to resume
       managing the terminal.

   <b>isendwin</b>
       <b>isendwin</b> returns <b>TRUE</b> if <b>endwin</b> has been called without any subsequent calls to  <b><a href="../man3NCURSES/wrefresh.3NCURSES.html">wrefresh</a></b>(3NCURSES),  and
       <b>FALSE</b> otherwise.

   <b>set_term</b>
       <b>set_term</b> re-orients the <u>curses</u> library's operations to another terminal when the application has arranged
       to  manage  more than one with <b>newterm</b>.  <b>set_term</b> expects a <u>SCREEN</u> pointer previously returned by <b>newterm</b>
       as an argument, and returns the previous one.  <b>set_term</b> is the only <u>curses</u> API function that  manipulates
       <u>SCREEN</u> pointers; all others affect only the current terminal.

   <b>delscreen</b>
       <b>delscreen</b>  frees  the  storage backing the supplied <u>SCREEN</u> pointer argument.  <b>endwin</b> does not, so that an
       application can resume managing a terminal with  <u>curses</u>  after  a  (possibly  conditional  or  temporary)
       suspension;  see  <b><a href="../man3NCURSES/kernel.3NCURSES.html">kernel</a></b>(3NCURSES).  Call <b>delscreen</b> after <b>endwin</b> when a particular <u>SCREEN</u> structure is no
       longer needed.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>endwin</b> returns <b>OK</b> on success and <b>ERR</b> on failure.

       In <u>ncurses</u>,

       •   <b>endwin</b> returns <b>ERR</b> if

           •   the terminal was not initialized,

           •   <b>endwin</b> is called more than once without updating the screen, or

           •   <b><a href="../man3NCURSES/reset_shell_mode.3NCURSES.html">reset_shell_mode</a></b>(3NCURSES) returns <b>ERR</b>.

       •   <b>newterm</b> returns <b>ERR</b> if it cannot allocate storage for the <u>SCREEN</u>  data  structure  or  the  top-level
           windows thereof: <b>curscr</b>, <b>newscr</b>, and <b>stdscr</b>.

       Functions  that  return  pointers  return <u>NULL</u> on error.  In <u>ncurses</u>, <b>set_term</b> does not fail, and <b>initscr</b>
       exits the application if it does not operate successfully.

</pre><h4><b>NOTES</b></h4><pre>
       <u>ncurses</u> establishes signal handlers when a function that initializes a <u>SCREEN</u>, either <b>initscr</b> or <b>newterm</b>,
       is first called.  Applications that wish to handle the following signals themselves should set  up  their
       corresponding handlers <u>after</u> initializing the screen.

       <u>SIGINT</u> <u>ncurses</u>'s handler <u>attempts</u> to clean up the screen on exit.  Although it <u>usually</u> works as expected,
              there are limitations.

              •   Walking  the  <u>SCREEN</u>  list  is  unsafe,  since  all list management is done without any signal
                  blocking.

              •   When an application has been built with the <b>_</b><u>REENTRANT</u> macro defined (and corresponding system
                  support), <b>set_term</b> uses functions that could deadlock or misbehave in other ways.

              •   <b>endwin</b> calls other functions, many of which use <u><a href="../man3/stdio.3.html">stdio</a></u>(3) or other library functions  that  are
                  clearly unsafe.

       <u>SIGTERM</u>
              <u>ncurses</u>  uses  the  same handler as for <u>SIGINT</u>, with the same limitations.  It is not mentioned in
              X/Open Curses, but is more suitable for this purpose than <u>SIGQUIT</u> (which is used in debugging).

       <u>SIGTSTP</u>
              <u>ncurses</u>'s handler manages the terminal-generated stop signal, used in job control.  When  resuming
              the  process,  <u>ncurses</u>  discards  pending  input  with <b><a href="../man3NCURSES/flushinp.3NCURSES.html">flushinp</a></b>(3NCURSES) and repaints the screen,
              assuming that it has been completely altered.  It also  updates  the  saved  terminal  modes  with
              <b><a href="../man3NCURSES/def_shell_mode.3NCURSES.html">def_shell_mode</a></b>(3NCURSES).

       <u>SIGWINCH</u>
              <u>ncurses</u>  handles  changes  to  the terminal's window size, a phenomenon ignored in standardization
              efforts.  It  sets  a  (signal-safe)  variable  that  is  later  tested  by  <b><a href="../man3NCURSES/wgetch.3NCURSES.html">wgetch</a></b>(3NCURSES)  and
              <b><a href="../man3NCURSES/wget_wch.3NCURSES.html">wget_wch</a></b>(3NCURSES).

              •   <b>wgetch</b> returns the key code <b>KEY_RESIZE</b>.

              •   <b>wget_wch</b> returns <b>KEY_CODE_YES</b> and sets its <u>wch</u> parameter to <b>KEY_RESIZE</b>.

              At  the  same  time,  <u>ncurses</u> calls <b><a href="../man3NCURSES/resizeterm.3NCURSES.html">resizeterm</a></b>(3NCURSES) to adjust the standard screen <b>stdscr</b>, and
              update global variables such as <b>LINES</b> and <b>COLS</b>.

</pre><h4><b>PORTABILITY</b></h4><pre>
       X/Open Curses Issue 4 describes these functions.  It specifies no error conditions for them.

   <b>Differences</b>
       X/Open Curses specifies that portable applications must not call <u>initscr</u> more than once.

       •   The portable way to use <u>initscr</u> is once only, using <u>refresh</u> to restore the screen after <u>endwin</u>.

       •   <u>ncurses</u> permits use of <u>initscr</u> after <u>endwin</u>.

       <u>initscr</u> in BSD, from its inception (1980) through the Net/2 release (1991) returned <u>ERR</u> cast to a  <u>WINDOW</u>
       pointer  when  detecting  an  error.   4.4BSD (1995) instead returned a null pointer.  Neither exited the
       application.  It is safe but redundant to check the return value of <u>initscr</u> in X/Open Curses.

       Calling <u>endwin</u> does not dispose of the memory  allocated  by  <u>initscr</u>  or  <u>newterm</u>.   Deleting  a  <u>SCREEN</u>
       provides a way to do this.

       •   X/Open  Curses does not say what happens to <u>WINDOW</u>s when <u>delscreen</u> “frees storage associated with the
           <u>SCREEN</u>” nor does the SVr4 documentation help, adding that it should  be  called  after  <u>endwin</u>  if  a
           <u>SCREEN</u> is no longer needed.

       •   However,  <u>WINDOW</u>s are implicitly associated with a <u>SCREEN</u>, so it is reasonable to expect <u>delscreen</u> to
           dispose of them.

       •   SVr4 deletes the standard <u>WINDOW</u> structures <u>stdscr</u> and <u>curscr</u> as well as  a  work  area  <u>newscr</u>.   It
           ignores other windows.

       •   Since  version  4.0  (1996), <u>ncurses</u> has maintained a list of all windows for each screen, using that
           information to delete those windows when <u>delscreen</u> is called.

       •   NetBSD copied this feature of <u>ncurses</u> in 2001.  <u>PDCurses</u> follows the SVr4 model,  deleting  only  the
           standard <u>WINDOW</u> structures.

   <b>High-level</b> <b>versus</b> <b>Low-level</b>
       Different  implementations  may  disagree  regarding  the  level  of some functions.  For example, <u>SCREEN</u>
       (returned by <u>newterm</u>) and <u>TERMINAL</u> (returned by <b><a href="../man3NCURSES/setupterm.3NCURSES.html">setupterm</a></b>(3NCURSES)) hold file descriptors for the output
       stream.   If  an  application  switches   screens   using   <u>set_term</u>,   or   switches   terminals   using
       <b><a href="../man3NCURSES/set_curterm.3NCURSES.html">set_curterm</a></b>(3NCURSES),  applications  which  use  the  output file descriptor can have different behavior
       depending on which structure holds the corresponding descriptor.

       •   NetBSD's <u>baudrate</u> function uses the descriptor in <u>TERMINAL</u>.  <u>ncurses</u> and SVr4 use the  descriptor  in
           <u>SCREEN</u>.

       •   NetBSD   and   <u>ncurses</u>   use   the   descriptor   in   <u>TERMINAL</u>   for   terminal   I/O  modes,  e.g.,
           <b><a href="../man3NCURSES/def_shell_mode.3NCURSES.html">def_shell_mode</a></b>(3NCURSES), <b><a href="../man3NCURSES/def_prog_mode.3NCURSES.html">def_prog_mode</a></b>(3NCURSES).  SVr4 uses the descriptor in <u>SCREEN</u>.

   <b>Unset</b> <u><b>TERM</b></u> <b>Variable</b>
       If the <u>TERM</u> variable is missing or empty, <u>initscr</u> uses the value “unknown”, which normally corresponds to
       a terminal entry with the <b>generic</b> (<b>gn</b>) capability.  Generic entries are detected  by  <b><a href="../man3NCURSES/setupterm.3NCURSES.html">setupterm</a></b>(3NCURSES)
       and  cannot  be  used  for  full-screen operation.  Other implementations may handle a missing/empty <u>TERM</u>
       variable differently.

   <b>Signal</b> <b>Handlers</b>
       Quoting X/Open Curses Issue 7, section 3.1.1:

            Curses implementations may provide for special handling of the SIGINT, SIGQUIT, and SIGTSTP  signals
            if their disposition is SIG_DFL at the time <u>initscr</u>() is called...

            Any special handling for these signals may remain in effect for the life of the process or until the
            process changes the disposition of the signal.

            None of the Curses functions are required to be safe with respect to signals...

       Section “NOTES” above discusses <u>ncurses</u>'s signal handlers.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3NCURSES/ncurses.3NCURSES.html">ncurses</a></b>(3NCURSES),     <b><a href="../man3NCURSES/kernel.3NCURSES.html">kernel</a></b>(3NCURSES),     <b><a href="../man3NCURSES/refresh.3NCURSES.html">refresh</a></b>(3NCURSES),     <b><a href="../man3NCURSES/slk.3NCURSES.html">slk</a></b>(3NCURSES),    <b><a href="../man3NCURSES/terminfo.3NCURSES.html">terminfo</a></b>(3NCURSES),
       <b><a href="../man3NCURSES/util.3NCURSES.html">util</a></b>(3NCURSES), <b><a href="../man3NCURSES/curses_variables.3NCURSES.html">curses_variables</a></b>(3NCURSES)

ncurses 6.5                                        2025-02-01                                  <u><a href="../man3NCURSES/initscr.3NCURSES.html">initscr</a></u>(3NCURSES)
</pre>
 </div>
</div></section>
</div>
</body>
</html>