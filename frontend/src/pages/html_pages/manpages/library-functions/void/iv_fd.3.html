<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iv_fd_register,    iv_fd_register_try,    iv_fd_unregister,    iv_fd_registered,    iv_fd_set_handler_in,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libivykis-dev">libivykis-dev_0.43.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       iv_fd_register,    iv_fd_register_try,    iv_fd_unregister,    iv_fd_registered,    iv_fd_set_handler_in,
       iv_fd_set_handler_err, iv_fd_set_handler_out - deal with ivykis file descriptors

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;iv.h&gt;</b>

       struct iv_fd {
               int             fd;
               void            *cookie;
               void            (*handler_in)(void *);
               void            (*handler_out)(void *);
               void            (*handler_err)(void *);
       };

       <b>void</b> <b>IV_FD_INIT(struct</b> <b>iv_fd</b> <b>*</b><u>fd</u><b>);</b>
       <b>void</b> <b>iv_fd_register(struct</b> <b>iv_fd</b> <b>*</b><u>fd</u><b>);</b>
       <b>int</b> <b>iv_fd_register_try(struct</b> <b>iv_fd</b> <b>*</b><u>fd</u><b>);</b>
       <b>void</b> <b>iv_fd_unregister(struct</b> <b>iv_fd</b> <b>*</b><u>fd</u><b>);</b>
       <b>int</b> <b>iv_fd_registered(const</b> <b>struct</b> <b>iv_fd</b> <b>*</b><u>fd</u><b>);</b>
       <b>void</b> <b>iv_fd_set_handler_in(struct</b> <b>iv_fd</b> <b>*</b><u>fd</u><b>,</b> <b>void</b> <b>(*</b><u>handler</u><b>)(void</b> <b>*));</b>
       <b>void</b> <b>iv_fd_set_handler_out(struct</b> <b>iv_fd</b> <b>*</b><u>fd</u><b>,</b> <b>void</b> <b>(*</b><u>handler</u><b>)(void</b> <b>*));</b>
       <b>void</b> <b>iv_fd_set_handler_err(struct</b> <b>iv_fd</b> <b>*</b><u>fd</u><b>,</b> <b>void</b> <b>(*</b><u>handler</u><b>)(void</b> <b>*));</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The functions <b>iv_fd_register</b> and <b>iv_fd_unregister</b> register, respectively unregister,  a  file  descriptor
       with  the current thread's ivykis event loop.  Calling <b>iv_fd_registered</b> on a file descriptor returns true
       if that file descriptor is currently registered with ivykis.

       When a file descriptor that is registered with ivykis becomes ready for input  or  output,  or  an  error
       condition occurs on that file descriptor, and a callback function for that event has been specified, that
       callback function will be called in the thread that the file descriptor was registered in.

       And  conversely, when a file descriptor that is already ready for input or output or already has an error
       condition set is registered with ivykis, and the corresponding callback function pointer is not NULL, the
       callback function will be called in the next iteration of the current thread's ivykis event loop.

       Before a file descriptor is registered, it must have been initialised by calling <b>IV_FD_INIT</b>  on  it,  and
       must  have  had its <b>-&gt;fd</b> member field set to a valid OS file descriptor.  The <b>-&gt;handler_in,</b> <b>-&gt;handler_out</b>
       and <b>-&gt;handler_err</b> member fields point to callback functions that are to be called when the specified file
       descriptor becomes ready for input or output or an error condition occurs.  If any  handler  function  is
       set  to  <b>NULL,</b> it indicates that the application is not interested in being notified of the corresponding
       event.

       An application is not allowed to change the <b>-&gt;fd</b> member while a file descriptor is registered.

       <b>iv_fd_set_handler_in</b> changes the callback function to be called when  descriptor  <b>fd</b>  becomes  ready  for
       input.   An  application  is  not  allowed  to  directly  change  the  <b>-&gt;handler_in</b> member after the file
       descriptor has been registered, this function has to be used instead.  Conversely, it is not  allowed  to
       use this function before the file descriptor has been registered.

       <b>iv_fd_set_handler_out</b>  is analogous to <b>iv_fd_set_handler_in,</b> only it deals with the callback function for
       output readiness <b>(-&gt;handler_out).</b>

       <b>iv_fd_set_handler_err</b> is analogous to <b>iv_fd_set_handler_in</b> and <b>iv_fd_set_handler_out,</b> only it deals  with
       the callback function for error conditions <b>(-&gt;handler_err).</b>

       When  a  handler  function  was  NULL,  and  was set to a non-NULL value by calling <b>iv_fd_set_handler_in,</b>
       <b>iv_fd_set_handler_out</b> or <b>iv_fd_set_handler_err,</b> and the file descriptor was already ready  for  input  or
       output, or already had an error condition set, an event is generated, and the specified callback function
       will  be  called in the next iteration of the current thread's event loop.  The application does not need
       to poll the file descriptor to see if a condition was already raised.

       Callback functions are passed a <b>cookie</b> value as their first and sole argument.  If the application wishes
       to use this facility for transferring data to the callback function, it should set the <b>-&gt;cookie</b> member of
       a file descriptor to a value of type <b>void</b> <b>*.</b>  This value can be modified directly by the  application  at
       any time without calling a helper function.

       When  a  file  descriptor  is  registered  with  ivykis, it is transparently set to nonblocking mode, and
       configured to be closed on <b><a href="../man3/exit.3.html">exit</a></b>(3).

       An application is allowed to unregister a file descriptor from within any  callback  function,  including
       callback functions triggered by that file descriptor itself, and even to free the memory corresponding to
       that  file  descriptor  from  any  callback  function, but a <b>struct</b> <b>iv_fd</b> can only be unregistered in the
       thread that it was registered from.

       It is allowed to register the same underlying OS file descriptor in multiple threads, but a given  <b>struct</b>
       <b>iv_fd</b> can only be registered in one thread at a time.

       <b>iv_fd_register</b>  does  not return errors to the caller, and in case of an error while registering the file
       descriptor, for example if it isn't open or is unpollable, <b><a href="../man2/iv_fatal.2.html">iv_fatal</a></b>(2) will be invoked.   If  it  is  not
       known  whether  registering  the  file  descriptor  with  the  kernel  will  be  successful  or  not, use
       <b>iv_fd_register_try</b> instead, which is a variant on <b>iv_fd_register</b> which returns a nonzero value in case of
       a  registration  error.   Since  <b>iv_fd_register_try</b>  disables  various  internal  optimisations,  it   is
       recommended to use <b>iv_fd_register</b> whenever possible.

       See <b><a href="../man3/iv_examples.3.html">iv_examples</a></b>(3) for programming examples.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ivykis.3.html">ivykis</a></b>(3), <b><a href="../man3/iv_examples.3.html">iv_examples</a></b>(3)

ivykis                                             2010-08-15                                           <u><a href="../man3/iv_fd.3.html">iv_fd</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>