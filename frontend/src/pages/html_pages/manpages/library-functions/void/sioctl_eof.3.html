<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sioctl_open,   sioctl_close,  sioctl_ondesc,  sioctl_onval,  sioctl_setval,  sioctl_nfds,  sioctl_pollfd,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsndio-dev">libsndio-dev_1.10.0-0.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sioctl_open,   sioctl_close,  sioctl_ondesc,  sioctl_onval,  sioctl_setval,  sioctl_nfds,  sioctl_pollfd,
       sioctl_eof â€” interface to audio parameters

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sndio.h&gt;</b>

       <u>struct</u> <u>sioctl_hdl</u> <u>*</u>
       <b>sioctl_open</b>(<u>const</u> <u>char</u> <u>*name</u>, <u>unsigned</u> <u>int</u> <u>mode</u>, <u>int</u> <u>nbio_flag</u>);

       <u>void</u>
       <b>sioctl_close</b>(<u>struct</u> <u>sioctl_hdl</u> <u>*hdl</u>);

       <u>int</u>
       <b>sioctl_ondesc</b>(<u>struct</u> <u>sioctl_hdl</u> <u>*hdl</u>,           <u>void</u> <u>(*cb)(void</u> <u>*arg,</u> <u>struct</u> <u>sioctl_desc</u> <u>*desc,</u> <u>int</u> <u>val)</u>,
           <u>void</u> <u>*arg</u>);

       <u>int</u>
       <b>sioctl_onval</b>(<u>struct</u> <u>sioctl_hdl</u> <u>*hdl</u>,          <u>void</u> <u>(*cb)(void</u> <u>*arg,</u> <u>unsigned</u> <u>int</u> <u>addr,</u> <u>unsigned</u> <u>int</u> <u>val)</u>,
           <u>void</u> <u>*arg</u>);

       <u>int</u>
       <b>sioctl_setval</b>(<u>struct</u> <u>sioctl_hdl</u> <u>*hdl</u>, <u>unsigned</u> <u>int</u> <u>addr</u>, <u>unsigned</u> <u>int</u> <u>val</u>);

       <u>int</u>
       <b>sioctl_nfds</b>(<u>struct</u> <u>sioctl_hdl</u> <u>*hdl</u>);

       <u>int</u>
       <b>sioctl_pollfd</b>(<u>struct</u> <u>sioctl_hdl</u> <u>*hdl</u>, <u>struct</u> <u>pollfd</u> <u>*pfd</u>, <u>int</u> <u>events</u>);

       <u>int</u>
       <b>sioctl_revents</b>(<u>struct</u> <u>sioctl_hdl</u> <u>*hdl</u>, <u>struct</u> <u>pollfd</u> <u>*pfd</u>);

       <u>int</u>
       <b>sioctl_eof</b>(<u>struct</u> <u>sioctl_hdl</u> <u>*hdl</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Audio devices may expose a number of controls, like the playback volume control.   Each  control  has  an
       integer <u>address</u> and an integer <u>value</u>.  Some values are boolean and can only be switched to either 0 (off)
       or  1  (on).   Any  control may be changed by submitting a new value to its address.  When values change,
       asynchronous notifications are sent.

       Control descriptions are available, allowing them to be grouped and represented in a human readable form.

   <b>Opening</b> <b>and</b> <b>closing</b> <b>the</b> <b>control</b> <b>device</b>
       First the application must call the <b>sioctl_open</b>() function to obtain a handle that will be passed as  the
       <u>hdl</u> argument to other functions.

       The  <u>name</u>  parameter  gives  the  device string discussed in <u><a href="../man7/sndio.7.html">sndio</a></u>(7).  In most cases it should be set to
       SIO_DEVANY to allow the user to select it using the AUDIODEVICE environment variable.  The <u>mode</u> parameter
       is a bitmap of the SIOCTL_READ and SIOCTL_WRITE constants indicating whether control values can  be  read
       and modified respectively.

       If  the  <u>nbio_flag</u>  argument  is  1,  then  the  <b>sioctl_setval</b>() function (see below) may fail instead of
       blocking and the <b>sioctl_ondesc</b>() function doesn't block.

       The <b>sioctl_close</b>() function closes the control device and frees any allocated resources  associated  with
       the handle.

   <b>Control</b> <b>descriptions</b>
       The  <b>sioctl_ondesc</b>()  function  can be used to obtain the description of all available controls and their
       initial values.  It registers a callback function that is immediately invoked for all  controls.   It  is
       called once with a NULL argument to indicate that the full description was sent and that the caller has a
       consistent representation of the control set.

       Then,  whenever  a  control  description  changes,  the  callback is invoked with the updated information
       followed by a call with a NULL argument.

       Controls are described by the <u>sioctl_desc</u> structure as follows:

       struct sioctl_node {
               char name[SIOCTL_NAMEMAX];      /* ex. "spkr" */
               int unit;                       /* optional number or -1 */
       };

       struct sioctl_desc {
               unsigned int addr;              /* control address */
       #define SIOCTL_NONE             0       /* deleted */
       #define SIOCTL_NUM              2       /* integer in the maxval range */
       #define SIOCTL_SW               3       /* on/off switch (1 or 0) */
       #define SIOCTL_VEC              4       /* number, element of vector */
       #define SIOCTL_LIST             5       /* switch, element of a list */
       #define SIOCTL_SEL              6       /* element of a selector */
               unsigned int type;              /* one of above */
               char func[SIOCTL_NAMEMAX];      /* function name, ex. "level" */
               char group[SIOCTL_NAMEMAX];     /* group this control belongs to */
               struct sioctl_node node0;       /* affected node */
               struct sioctl_node node1;       /* dito for SIOCTL_{VEC,LIST,SEL} */
               unsigned int maxval;            /* max value */
               char display[SIOCTL_DISPLAYMAX];        /* free-format hint */
       };

       The <u>addr</u> attribute is the control address, usable with <b>sioctl_setval</b>() to set its value.

       The <u>type</u> attribute indicates what the structure describes.  Possible types are:

       SIOCTL_NONE  A previously valid control was deleted.

       SIOCTL_NUM   An integer control in the range from 0 to <u>maxval</u>, inclusive.  For instance the volume of the
                    speaker.

       SIOCTL_SW    A boolean control.  For instance the switch to mute the speaker.

       SIOCTL_VEC   Element of an array of integer controls.  For instance the knob to  control  the  amount  of
                    signal flowing from the line input to the speaker.

       SIOCTL_LIST  An  element  of  an  array  of  boolean  switches.  For instance the line-in position of the
                    speaker source selector.

       SIOCTL_SEL   Same as SIOCTL_LIST but exactly one element is selected at a time.

       The <u>func</u> attribute is the name of the  parameter  being  controlled.   There  may  be  no  parameters  of
       different types with the same name.

       The  <u>node0</u>  and  <u>node1</u> attributes indicate the names of the controlled nodes, typically channels of audio
       streams.  <u>node1</u> is meaningful for SIOCTL_VEC, SIOCTL_LIST, and SIOCTL_SEL only.

       Names in the <u>node0</u> and <u>node1</u> attributes and <u>func</u> are strings usable  as  unique  identifiers  within  the
       given <u>group</u>.

       The <u>maxval</u> attribute indicates the maximum value of this control.  For boolean control types it is set to
       1.

       The  <u>display</u>  attribute  contains  an  optional  free-format  string providing additional hints about the
       control, like the hardware model, or the units.

   <b>Changing</b> <b>and</b> <b>reading</b> <b>control</b> <b>values</b>
       Controls are changed with the <b>sioctl_setval</b>() function, by giving the index of the control  and  the  new
       value.   The  <b>sioctl_onval</b>() function can be used to register a callback which will be invoked whenever a
       control changes.  Integer values are in the range from 0 to <u>maxval</u>.

   <b>Interface</b> <b>to</b> <b><a href="../man2/poll.2.html">poll</a>(2)</b>
       The <b>sioctl_pollfd</b>() function fills the array <u>pfd</u> of <u>pollfd</u> structures, used by <u><a href="../man2/poll.2.html">poll</a></u>(2), with <u>events</u>;  the
       latter  is  a  bit-mask  of  POLLIN  and POLLOUT constants.  <b>sioctl_pollfd</b>() returns the number of <u>pollfd</u>
       structures filled.  The <b>sioctl_revents</b>() function returns the bit-mask set by <u><a href="../man2/poll.2.html">poll</a></u>(2) in the <u>pfd</u> array of
       <u>pollfd</u> structures.  If POLLOUT is set, <b>sioctl_setval</b>() can be called without blocking.   POLLHUP  may  be
       set if an error occurs, even if it is not selected with <b>sioctl_pollfd</b>().  POLLIN is not used yet.

       The  <b>sioctl_nfds</b>()  function returns the number of <u>pollfd</u> structures the caller must preallocate in order
       to be sure that <b>sioctl_pollfd</b>() will never overrun.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       AUDIODEVICE  The default <u><a href="../man7/sndio.7.html">sndio</a></u>(7) device used by <b>sioctl_open</b>().

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/sndioctl.1.html">sndioctl</a></u>(1), <u><a href="../man2/poll.2.html">poll</a></u>(2), <u><a href="../man3/sio_open.3.html">sio_open</a></u>(3), <u><a href="../man7/sndio.7.html">sndio</a></u>(7)

</pre><h4><b>HISTORY</b></h4><pre>
       These functions first appeared in OpenBSD 6.7.

</pre><h4><b>AUTHORS</b></h4><pre>
       Alexandre Ratchov &lt;<u><a href="mailto:ratchov@openbsd.org">ratchov@openbsd.org</a></u>&gt;

Debian                                             $Mdocdate$                                     <u><a href="../man3/SIOCTL_OPEN.3.html">SIOCTL_OPEN</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>