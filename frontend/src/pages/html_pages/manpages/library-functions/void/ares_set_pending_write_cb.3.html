<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ares_set_pending_write_cb,  ares_process_pending_write  -  Function  for  setting  a  callback  which  is</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libc-ares-dev">libc-ares-dev_1.34.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ares_set_pending_write_cb,  ares_process_pending_write  -  Function  for  setting  a  callback  which  is
       triggered when there is potential pending data which needs to be written.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;ares.h&gt;

       typedef void (*ares_pending_write_cb)(void *<u>data</u>);

       void ares_set_pending_write_cb(
         ares_channel_t        *<u>channel</u>,
         ares_pending_write_cb  <u>callback</u>,
         void                  *<u>user_data</u>);

       void ares_process_pending_write(ares_channel_t *<u>channel</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b><a href="../man3/ares_set_pending_write_cb.3.html">ares_set_pending_write_cb</a>(3)</b> function sets a callback function <u>callback</u> in  the  given  ares  channel
       handle <u>channel</u> that is invoked whenever there is new pending TCP data to be written.  Since TCP is stream
       based,  if  there  are multiple queries being enqueued back to back they can be sent as one large buffer.
       Normally a <b><a href="../man2/send.2.html">send</a>(2)</b> syscall operation would be triggered for each query.

       When setting this callback, an event will be triggered when data is  buffered,  but  not  written.   This
       event  is  used to wake the caller's event loop which should call <b><a href="../man3/ares_process_pending_write.3.html">ares_process_pending_write</a>(3)</b> using the
       channel associated with the callback.  Each time the callback is triggered  must  result  in  a  call  to
       <b><a href="../man3/ares_process_pending_write.3.html">ares_process_pending_write</a>(3)</b>  from the caller's event loop otherwise stalls and timeouts may occur.  The
       callback <b>must</b> <b>not</b> call <b><a href="../man3/ares_process_pending_write.3.html">ares_process_pending_write</a>(3)</b>  directly  as  otherwise  it  would  invalidate  any
       advantage of this use-case.

       This  is  considered  an  optimization,  especially when using TLS-based connections which add additional
       overhead to the data stream.  Due to the asyncronous nature of c-ares, there is no way to identify when a
       caller  may  be  finished  enqueuing  queries  via  any  of  the  possible  public  API  calls  such   as
       <b><a href="../man3/ares_getaddrinfo.3.html">ares_getaddrinfo</a>(3)</b>  or  <b><a href="../man3/ares_search_dnsrec.3.html">ares_search_dnsrec</a>(3)</b>,  so  this  is  an  enhancement to try to group query send
       operations together and will rely on the singaling latency involved in waking the user's event loop.

       If no callback is set, data will be written immediately to the socket, thus bypassing this optimization.

       This option cannot be used with <u>ARES_OPT_EVENT_THREAD</u> passed to <b><a href="../man3/ares_init_options.3.html">ares_init_options</a>(3)</b> since the  user  has
       no  event  loop.   This  optimization is automatically enabled when using the Event Thread as it sets the
       callback for its own internal signaling.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       This function was first introduced in c-ares version 1.34.0.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ares_init_options.3.html">ares_init_options</a></b>(3)

                                                   13 Aug 2024         <u><a href="../man3/ARES_SET_NOTIFY_PENDING_WRITE_CALLBACK.3.html">ARES_SET_NOTIFY_PENDING_WRITE_CALLBACK</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>