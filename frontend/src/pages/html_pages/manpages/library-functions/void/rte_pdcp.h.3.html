<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_pdcp.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_pdcp.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;rte_compat.h&gt;
       #include &lt;rte_common.h&gt;
       #include &lt;rte_mempool.h&gt;
       #include &lt;rte_pdcp_hdr.h&gt;
       #include &lt;rte_security.h&gt;
       #include &lt;rte_pdcp_group.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_pdcp_entity</b>
       struct <b>rte_pdcp_t_reordering</b>
       struct <b>rte_pdcp_entity_conf</b>

   <b>Typedefs</b>
       <b>typedef</b> void(* <b>rte_pdcp_t_reordering_start_cb_t</b>) (void *timer, void *args)
       <b>typedef</b> void(* <b>rte_pdcp_t_reordering_stop_cb_t</b>) (void *timer, void *args)

   <b>Functions</b>
       __rte_experimental struct <b>rte_pdcp_entity</b> * <b>rte_pdcp_entity_establish</b> (const struct <b>rte_pdcp_entity_conf</b>
           *conf)
       __rte_experimental int <b>rte_pdcp_entity_release</b> (struct <b>rte_pdcp_entity</b> *pdcp_entity, struct <b>rte_mbuf</b>
           *out_mb[])
       __rte_experimental int <b>rte_pdcp_entity_suspend</b> (struct <b>rte_pdcp_entity</b> *pdcp_entity, struct <b>rte_mbuf</b>
           *out_mb[])
       __rte_experimental struct <b>rte_mbuf</b> * <b>rte_pdcp_control_pdu_create</b> (struct <b>rte_pdcp_entity</b> *pdcp_entity,
           enum <b>rte_pdcp_ctrl_pdu_type</b> type)
       static __rte_experimental uint16_t <b>rte_pdcp_pkt_pre_process</b> (const struct <b>rte_pdcp_entity</b> *entity, struct
           <b>rte_mbuf</b> *mb[], struct <b>rte_crypto_op</b> *cop[], uint16_t num, uint16_t *nb_err)
       static __rte_experimental uint16_t <b>rte_pdcp_pkt_post_process</b> (const struct <b>rte_pdcp_entity</b> *entity,
           struct <b>rte_mbuf</b> *in_mb[], struct <b>rte_mbuf</b> *out_mb[], uint16_t num, uint16_t *nb_err)
       __rte_experimental uint16_t <b>rte_pdcp_t_reordering_expiry_handle</b> (const struct <b>rte_pdcp_entity</b> *entity,
           struct <b>rte_mbuf</b> *out_mb[])

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE PDCP support.

       A framework for PDCP protocol processing.

       Definition in file <b>rte_pdcp.h</b>.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>void(*</b> <b>rte_pdcp_t_reordering_start_cb_t)</b> <b>(void</b> <b>*timer,</b> <b>void</b> <b>*args)</b>
       Callback function type for t-Reordering timer start, set during PDCP entity establish. This callback is
       invoked by PDCP library, during t-Reordering timer start event. Only one t-Reordering per receiving PDCP
       entity would be running at a given time.

       <b>See</b> <b>also</b>
           struct rte_pdcp_timer

           <b>rte_pdcp_entity_establish()</b>

       <b>Parameters</b>
           <u>timer</u> Pointer to timer.
           <u>args</u> Pointer to timer arguments.

       Definition at line <b>80</b> of file <b>rte_pdcp.h</b>.

   <b>typedef</b> <b>void(*</b> <b>rte_pdcp_t_reordering_stop_cb_t)</b> <b>(void</b> <b>*timer,</b> <b>void</b> <b>*args)</b>
       Callback function type for t-Reordering timer stop, set during PDCP entity establish. This callback will
       be invoked by PDCP library, during t-Reordering timer stop event.

       <b>See</b> <b>also</b>
           struct rte_pdcp_timer

           <b>rte_pdcp_entity_establish()</b>

       <b>Parameters</b>
           <u>timer</u> Pointer to timer.
           <u>args</u> Pointer to timer arguments.

       Definition at line <b>94</b> of file <b>rte_pdcp.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>__rte_experimental</b> <b>struct</b> <b>rte_pdcp_entity</b> <b>*</b> <b>rte_pdcp_entity_establish</b> <b>(const</b> <b>struct</b> <b>rte_pdcp_entity_conf</b> <b>*</b>
       <b>conf)</b>
       <b>Warning</b>
           <b>EXPERIMENTAL:</b> this API may change without prior notice.

       5.1.1 PDCP entity establishment

       Establish PDCP entity based on provided input configuration.

       <b>Parameters</b>
           <u>conf</u> Parameters to be used for initializing PDCP entity object.

       <b>Returns</b>

           • Valid handle if success

           • NULL in case of failure. rte_errno will be set to error code.

   <b>__rte_experimental</b>  <b>int</b>  <b>rte_pdcp_entity_release</b>  <b>(struct</b>  <b>rte_pdcp_entity</b>  <b>*</b>  <b>pdcp_entity,</b> <b>struct</b> <b>rte_mbuf</b> <b>*</b>
       <b>out_mb[])</b>
       <b>Warning</b>
           <b>EXPERIMENTAL:</b> this API may change without prior notice.

       5.1.3 PDCP entity release

       Release PDCP entity.

       For UL/transmitting PDCP entity, all stored PDCP SDUs would be dropped. For DL/receiving PDCP entity, the
       stored PDCP SDUs would be returned in <u>out_mb</u> buffer. The buffer should be large enough to hold all cached
       packets in the entity.

       Entity release would result in freeing all memory  associated  with  the  PDCP  entity  as  well  as  any
       crypto/security sessions created.

       <b>Parameters</b>
           <u>pdcp_entity</u> Pointer to the PDCP entity to be released.
           <u>out_mb</u> The address of an array that can hold up to <b>rte_pdcp_entity.max_pkt_cache</b> <b>pointers</b> <b>to</b> <b>rte_mbuf</b>
           <b>structures.</b>

       <b>Returns</b>

           • 0: Success and no cached packets to return

           • &gt;0: Success and the number of packets returned in out_mb

           • &lt;0: Error code in case of failures

   <b>__rte_experimental</b>  <b>int</b>  <b>rte_pdcp_entity_suspend</b>  <b>(struct</b>  <b>rte_pdcp_entity</b>  <b>*</b>  <b>pdcp_entity,</b> <b>struct</b> <b>rte_mbuf</b> <b>*</b>
       <b>out_mb[])</b>
       <b>Warning</b>
           <b>EXPERIMENTAL:</b> this API may change without prior notice.

       5.1.4 PDCP entity suspend

       Suspend PDCP entity.

       For DL/receiving PDCP entity, the stored PDCP SDUs would be returned in <u>out_mb</u> buffer. The buffer  should
       be large enough to hold all cached packets in the entity.

       For UL/transmitting PDCP entity, <u>out_mb</u> buffer would be unused.

       <b>Parameters</b>
           <u>pdcp_entity</u> Pointer to the PDCP entity to be suspended.
           <u>out_mb</u> The address of an array that can hold up to <b>rte_pdcp_entity.max_pkt_cache</b> <b>pointers</b> <b>to</b> <b>rte_mbuf</b>
           <b>structures.</b>

       <b>Returns</b>

           • 0: Success and no cached packets to return.

           • &gt;0: Success and the number of packets returned in out_mb.

           • &lt;0: Error code in case of failures.

   <b>__rte_experimental</b>  <b>struct</b> <b>rte_mbuf</b> <b>*</b> <b>rte_pdcp_control_pdu_create</b> <b>(struct</b> <b>rte_pdcp_entity</b> <b>*</b> <b>pdcp_entity,</b> <b>enum</b>
       <b>rte_pdcp_ctrl_pdu_type</b> <b>type)</b>
       <b>Warning</b>
           <b>EXPERIMENTAL:</b> this API may change without prior notice.

       Create control PDU packet of the  type  specified.  The  control  PDU  packet  would  be  allocated  from
       <b>rte_pdcp_entity_conf.ctrl_pdu_pool</b> <b>by</b> <b>lib</b> <b>PDCP.</b>

       <b>Parameters</b>
           <u>pdcp_entity</u> Pointer to the PDCP entity for which the control PDU need to be generated.
           <u>type</u> Type of control PDU to be generated.

       <b>Returns</b>

           • Control PDU generated, in case of success.

           • NULL in case of failure. rte_errno will be set to error code.

   <b>static</b>  <b>__rte_experimental</b>  <b>uint16_t</b>  <b>rte_pdcp_pkt_pre_process</b> <b>(const</b> <b>struct</b> <b>rte_pdcp_entity</b> <b>*</b> <b>entity,</b> <b>struct</b>
       <b>rte_mbuf</b> <b>*</b> <b>mb[],</b> <b>struct</b> <b>rte_crypto_op</b> <b>*</b> <b>cop[],</b> <b>uint16_t</b> <b>num,</b> <b>uint16_t</b> <b>*</b> <b>nb_err)</b> <b>[inline],</b>  <b>[static]</b>
       <b>Warning</b>
           <b>EXPERIMENTAL:</b> this API may change without prior notice.

       For input mbufs and given PDCP entity pre-process the mbufs and prepare crypto ops that can  be  enqueued
       to  the  cryptodev associated with given session. Only error packets would be moved returned in the input
       buffer, <u>mb</u>, and it is the responsibility of the application to free the same.

       <b>Parameters</b>
           <u>entity</u> Pointer to the <b>rte_pdcp_entity</b> <b>object</b> <b>the</b> <b>packets</b> <b>belong</b> <b>to.</b>
           <u>mb</u> <b>The</b> <b>address</b> <b>of</b> <b>an</b> <b>array</b> <b>of</b> <u>num</u> <b>pointers</b> <b>to</b> <b>rte_mbuf</b> <b>structures</b> <b>which</b> <b>contain</b>  <b>the</b>  <b>input</b>  <b>packets.</b>
           <b>Any</b> <b>error</b> <b>packets</b> <b>would</b> <b>be</b> <b>returned</b> <b>in</b> <b>the</b> <b>same</b> <b>buffer.</b>
           <u>cop</u>  <b>The</b> <b>address</b> <b>of</b> <b>an</b> <b>array</b> <b>that</b> <b>can</b> <b>hold</b> <b>up</b> <b>to</b> <u>num</u> <b>pointers</b> <b>to</b> <b>rte_crypto_op</b> <b>structures.</b> <b>Crypto</b> <b>ops</b>
           <b>would</b> <b>be</b> <b>allocated</b> <b>by</b> <b>rte_pdcp_pkt_pre_process</b> <b>API.</b>
           <u>num</u> <b>The</b> <b>maximum</b> <b>number</b> <b>of</b> <b>packets</b> <b>to</b> <b>process.</b>
           <u>nb_err</u> <b>Pointer</b> <b>to</b> <b>return</b> <b>the</b> <b>number</b> <b>of</b> <b>error</b> <b>packets</b> <b>returned</b> <b>in</b> <u>mb</u><b>.</b>

       <b>Returns</b>
           Count of crypto_ops prepared.

       Definition at line <b>289</b> of file <b>rte_pdcp.h</b>.

   <b>static</b> <b>__rte_experimental</b> <b>uint16_t</b> <b>rte_pdcp_pkt_post_process</b> <b>(const</b> <b>struct</b> <b>rte_pdcp_entity</b> <b>*</b>  <b>entity,</b>  <b>struct</b>
       <b>rte_mbuf</b> <b>*</b> <b>in_mb[],</b> <b>struct</b> <b>rte_mbuf</b> <b>*</b> <b>out_mb[],</b> <b>uint16_t</b> <b>num,</b> <b>uint16_t</b> <b>*</b> <b>nb_err)</b> <b>[inline],</b>  <b>[static]</b>
       <b>Warning</b>
           <b>EXPERIMENTAL:</b> this API may change without prior notice.

       For input mbufs and given PDCP entity, perform PDCP post-processing of the mbufs.

       Input  mbufs  are  the  ones  retrieved  from  rte_crypto_ops  dequeued  from  cryptodev  and  grouped by
       <b>rte_pdcp_pkt_crypto_group().</b>

       The post-processed packets would be returned in the <u>out_mb</u> buffer. The resultant mbufs would  be  grouped
       into  success packets and error packets. Error packets would be grouped in the end of the array and it is
       the responsibility of the application to handle the same.

       When in-order delivery is enabled, PDCP entity may buffer packets and would deliver packets only when all
       prior packets have been post-processed. That would result in returning more/less packets than enqueued.

       <b>Parameters</b>
           <u>entity</u> Pointer to the <b>rte_pdcp_entity</b> <b>object</b> <b>the</b> <b>packets</b> <b>belong</b> <b>to.</b>
           <u>in_mb</u> <b>The</b> <b>address</b> <b>of</b> <b>an</b> <b>array</b> <b>of</b> <u>num</u> <b>pointers</b> <b>to</b> <b>rte_mbuf</b> <b>structures.</b>
           <u>out_mb</u> <b>The</b> <b>address</b> <b>of</b> <b>an</b> <b>array</b> <b>that</b> <b>can</b> <b>hold</b> <b>up</b> <b>to</b> <b>rte_pdcp_entity.max_pkt_cache</b> <b>pointers</b> <b>to</b> <b>rte_mbuf</b>
           <b>structures</b> <b>to</b> <b>output</b> <b>packets</b> <b>after</b> <b>PDCP</b> <b>post-processing.</b>
           <u>num</u> <b>The</b> <b>maximum</b> <b>number</b> <b>of</b> <b>packets</b> <b>to</b> <b>process.</b>
           <u>nb_err</u> <b>The</b> <b>number</b> <b>of</b> <b>error</b> <b>packets</b> <b>returned</b> <b>in</b> <u>out_mb</u> <b>buffer.</b>

       <b>Returns</b>
           Count of packets returned in <u>out_mb</u> buffer.

       Definition at line <b>330</b> of file <b>rte_pdcp.h</b>.

   <b>__rte_experimental</b> <b>uint16_t</b>  <b>rte_pdcp_t_reordering_expiry_handle</b>  <b>(const</b>  <b>struct</b>  <b>rte_pdcp_entity</b>  <b>*</b>  <b>entity,</b>
       <b>struct</b> <b>rte_mbuf</b> <b>*</b> <b>out_mb[])</b>
       <b>Warning</b>
           <b>EXPERIMENTAL:</b> this API may change without prior notice

       5.2.2.2 Actions when a t-Reordering expires

       When  t-Reordering  timer  expires,  PDCP  is  required  to  slide the reception window by updating state
       variables such as RX_REORD &amp; RX_DELIV. PDCP would need to deliver some of the buffered packets  based  on
       the state variables and conditions described.

       The  expiry  handle need to be invoked by the application when t-Reordering timer expires. In addition to
       returning buffered packets, it may also restart timer based on the state variables.

       <b>Parameters</b>
           <u>entity</u> Pointer to the <b>rte_pdcp_entity</b> <b>for</b> <b>which</b> <b>the</b> <b>timer</b> <b>expired.</b>
           <u>out_mb</u> <b>The</b> <b>address</b> <b>of</b> <b>an</b> <b>array</b> <b>that</b> <b>can</b> <b>hold</b> <b>up</b> <b>to</b> <b>rte_pdcp_entity.max_pkt_cache</b> <b>pointers</b> <b>to</b> <b>rte_mbuf</b>
           <b>structures.</b> <b>Used</b> <b>to</b> <b>return</b> <b>buffered</b> <b>packets</b> <b>that</b> <b>are</b> <b>expired.</b>

       <b>Returns</b>
           Number of packets returned in <u>out_mb</u> buffer.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                   <u><a href="../man3/rte_pdcp.h.3.html">rte_pdcp.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>