<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSSL_ERR_STATE_new, OSSL_ERR_STATE_save, OSSL_ERR_STATE_save_to_mark, OSSL_ERR_STATE_restore,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       OSSL_ERR_STATE_new, OSSL_ERR_STATE_save, OSSL_ERR_STATE_save_to_mark, OSSL_ERR_STATE_restore,
       OSSL_ERR_STATE_free - saving and restoring error state

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/err.h&gt;

        ERR_STATE *OSSL_ERR_STATE_new(void);
        void OSSL_ERR_STATE_save(ERR_STATE *es);
        void OSSL_ERR_STATE_save_to_mark(ERR_STATE *es);
        void OSSL_ERR_STATE_restore(const ERR_STATE *es);
        void OSSL_ERR_STATE_free(ERR_STATE *es);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These functions save and restore the error state from the thread local error state to a preallocated
       error state structure.

       <b>OSSL_ERR_STATE_new()</b> allocates an empty error state structure to be used when saving and restoring thread
       error state.

       <b>OSSL_ERR_STATE_save()</b> saves the thread error state to <u>es</u>. It subsequently clears the thread error state.
       Any previously saved state in <u>es</u> is cleared prior to saving the new state.

       <b>OSSL_ERR_STATE_save_to_mark()</b> is similar to <b>OSSL_ERR_STATE_save()</b> but only saves ERR entries up to the
       most recent mark on the ERR stack. These entries are moved to <u>es</u> and removed from the thread error state.
       However, the most recent marked ERR and any ERR state before it remains part of the thread error state
       and is not moved to the ERR_STATE. The mark is not cleared and must be cleared explicitly after a call to
       this function using <b><a href="../man3/ERR_pop_to_mark.3.html">ERR_pop_to_mark</a></b>(3) or <b><a href="../man3/ERR_clear_last_mark.3.html">ERR_clear_last_mark</a></b>(3). (Since a call to
       <b>OSSL_ERR_STATE_save_to_mark()</b> leaves the marked ERR as the top error, either of these functions will have
       the same effect.) If there is no marked ERR in the thread local error state, all ERR entries are copied
       and the effect is the same as for a call to <b>OSSL_ERR_STATE_save()</b>.

       <b>OSSL_ERR_STATE_restore()</b> adds all the error entries from the saved state <u>es</u> to the thread error state.
       Existing entries in the thread error state are not affected if there is enough space for all the added
       entries. Any allocated data in the saved error entries is duplicated on adding to the thread state.

       <b>OSSL_ERR_STATE_free()</b> frees the saved error state <u>es</u>.  If the argument is NULL, nothing is done.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>OSSL_ERR_STATE_new()</b> returns a pointer to the allocated ERR_STATE structure or NULL on error.

       <b>OSSL_ERR_STATE_save()</b>, <b>OSSL_ERR_STATE_save_to_mark()</b>, <b>OSSL_ERR_STATE_restore()</b>, <b>OSSL_ERR_STATE_free()</b> do
       not return any values.

</pre><h4><b>NOTES</b></h4><pre>
       <b>OSSL_ERR_STATE_save()</b> and <b>OSSL_ERR_STATE_save_to_mark()</b> cannot fail as it takes over any allocated data
       from the thread error state.

       <b>OSSL_ERR_STATE_restore()</b> is a best effort function. The only failure that can happen during its operation
       is when memory allocation fails.  Because it manipulates the thread error state it avoids raising memory
       errors on such failure. At worst the restored error entries will be missing the auxiliary error data.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ERR_raise.3.html">ERR_raise</a></b>(3), <b><a href="../man3/ERR_get_error.3.html">ERR_get_error</a></b>(3), <b><a href="../man3/ERR_clear_error.3.html">ERR_clear_error</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       All of these functions were added in OpenSSL 3.2.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2023-2024 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain a copy in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                          <u><a href="../man3SSL/OSSL_ERR_STATE_SAVE.3SSL.html">OSSL_ERR_STATE_SAVE</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>