<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wl_event_source - An abstract event source.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libwayland-doc">libwayland-doc_1.23.1-3build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wl_event_source - An abstract event source.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;wayland-server-core.h&gt;

   <b>Public</b> <b>Types</b>
       typedef int(* <b>wl_event_loop_fd_func_t</b>) (int fd, uint32_t mask, void *data)
       typedef int(* <b>wl_event_loop_timer_func_t</b>) (void *data)
       typedef int(* <b>wl_event_loop_signal_func_t</b>) (int signal_number, void *data)
       typedef void(* <b>wl_event_loop_idle_func_t</b>) (void *data)

   <b>Public</b> <b>Member</b> <b>Functions</b>
       struct <b>wl_event_source</b> * <b>wl_event_loop_add_fd</b> (struct <b>wl_event_loop</b> *loop, int fd, uint32_t mask,
           <b>wl_event_loop_fd_func_t</b> func, void *data)
       int <b>wl_event_source_fd_update</b> (struct <b>wl_event_source</b> *source, uint32_t mask)
       struct <b>wl_event_source</b> * <b>wl_event_loop_add_timer</b> (struct <b>wl_event_loop</b> *loop, <b>wl_event_loop_timer_func_t</b>
           func, void *data)
       int <b>wl_event_source_timer_update</b> (struct <b>wl_event_source</b> *source, int ms_delay)
       struct <b>wl_event_source</b> * <b>wl_event_loop_add_signal</b> (struct <b>wl_event_loop</b> *loop, int signal_number,
           <b>wl_event_loop_signal_func_t</b> func, void *data)
       struct <b>wl_event_source</b> * <b>wl_event_loop_add_idle</b> (struct <b>wl_event_loop</b> *loop, <b>wl_event_loop_idle_func_t</b>
           func, void *data)
       void <b>wl_event_source_check</b> (struct <b>wl_event_source</b> *source)
       int <b>wl_event_source_remove</b> (struct <b>wl_event_source</b> *source)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       An abstract event source.

       This is the generic type for fd, timer, signal, and idle sources. Functions that operate on specific
       source types must not be used with a different type, even if the function signature allows it.

</pre><h4><b>Member</b> <b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>int(*</b> <b>wl_event_loop_fd_func_t)</b> <b>(int</b> <b>fd,</b> <b>uint32_t</b> <b>mask,</b> <b>void</b> <b>*data)</b>
       File descriptor dispatch function type

       Functions of this type are used as callbacks for file descriptor events.

       <b>Parameters</b>
           <u>fd</u> The file descriptor delivering the event.
           <u>mask</u> Describes the kind of the event as a bitwise-or of: WL_EVENT_READABLE, WL_EVENT_WRITABLE,
           WL_EVENT_HANGUP, WL_EVENT_ERROR.
           <u>data</u> The user data argument of the related <b>wl_event_loop_add_fd()</b> call.

       <b>Returns</b>
           If the event source is registered for re-check with <b>wl_event_source_check()</b>: 0 for all done, 1 for
           needing a re-check. If not registered, the return value is ignored and should be zero.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_add_fd()</b>

   <b>typedef</b> <b>void(*</b> <b>wl_event_loop_idle_func_t)</b> <b>(void</b> <b>*data)</b>
       Idle task function type

       Functions of this type are used as callbacks before blocking in <b>wl_event_loop_dispatch()</b>.

       <b>Parameters</b>
           <u>data</u> The user data argument of the related <b>wl_event_loop_add_idle()</b> call.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_add_idle()</b> <b>wl_event_loop_dispatch()</b>

   <b>typedef</b> <b>int(*</b> <b>wl_event_loop_signal_func_t)</b> <b>(int</b> <b>signal_number,</b> <b>void</b> <b>*data)</b>
       Signal dispatch function type

       Functions of this type are used as callbacks for (POSIX) signals.

       <b>Parameters</b>
           <u>signal_number</u>
           <u>data</u> The user data argument of the related <b>wl_event_loop_add_signal()</b> call.

       <b>Returns</b>
           If the event source is registered for re-check with <b>wl_event_source_check()</b>: 0 for all done, 1 for
           needing a re-check. If not registered, the return value is ignored and should be zero.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_add_signal()</b>

   <b>typedef</b> <b>int(*</b> <b>wl_event_loop_timer_func_t)</b> <b>(void</b> <b>*data)</b>
       Timer dispatch function type

       Functions of this type are used as callbacks for timer expiry.

       <b>Parameters</b>
           <u>data</u> The user data argument of the related <b>wl_event_loop_add_timer()</b> call.

       <b>Returns</b>
           If the event source is registered for re-check with <b>wl_event_source_check()</b>: 0 for all done, 1 for
           needing a re-check. If not registered, the return value is ignored and should be zero.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_add_timer()</b>

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>struct</b> <b>wl_event_source</b> <b>*</b> <b>wl_event_loop_add_fd</b> <b>(struct</b> <b>wl_event_loop</b> <b>*</b> <b>loop,</b> <b>int</b> <b>fd,</b> <b>uint32_t</b> <b>mask,</b>
       <b>wl_event_loop_fd_func_t</b> <b>func,</b> <b>void</b> <b>*</b> <b>data)</b>
       Create a file descriptor event source

       <b>Parameters</b>
           <u>loop</u> The event loop that will process the new source.
           <u>fd</u> The file descriptor to watch.
           <u>mask</u> A bitwise-or of which events to watch for: WL_EVENT_READABLE, WL_EVENT_WRITABLE.
           <u>func</u> The file descriptor dispatch function.
           <u>data</u> User data.

       <b>Returns</b>
           A new file descriptor event source.

       The given file descriptor is initially watched for the events given in mask. This can be changed as
       needed with <b>wl_event_source_fd_update()</b>.

       If it is possible that program execution causes the file descriptor to be read while leaving the data in
       a buffer without actually processing it, it may be necessary to register the file descriptor source to be
       re-checked, see <b>wl_event_source_check()</b>. This will ensure that the dispatch function gets called even if
       the file descriptor is not readable or writable anymore. This is especially useful with IPC libraries
       that automatically buffer incoming data, possibly as a side-effect of other operations.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_fd_func_t</b>

   <b>struct</b> <b>wl_event_source</b> <b>*</b> <b>wl_event_loop_add_idle</b> <b>(struct</b> <b>wl_event_loop</b> <b>*</b> <b>loop,</b> <b>wl_event_loop_idle_func_t</b> <b>func,</b>
       <b>void</b> <b>*</b> <b>data)</b>
       Create an idle task

       <b>Parameters</b>
           <u>loop</u> The event loop that will process the new task.
           <u>func</u> The idle task dispatch function.
           <u>data</u> User data.

       <b>Returns</b>
           A new idle task (an event source).

       Idle tasks are dispatched before <b>wl_event_loop_dispatch()</b> goes to sleep. See <b>wl_event_loop_dispatch()</b> for
       more details.

       Idle tasks fire once, and are automatically destroyed right after the callback function has been called.

       An idle task can be cancelled before the callback has been called by <b>wl_event_source_remove()</b>. Calling
       <b>wl_event_source_remove()</b> after or from within the callback results in undefined behaviour.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_idle_func_t</b>

   <b>struct</b> <b>wl_event_source</b> <b>*</b> <b>wl_event_loop_add_signal</b> <b>(struct</b> <b>wl_event_loop</b> <b>*</b> <b>loop,</b> <b>int</b> <b>signal_number,</b>
       <b>wl_event_loop_signal_func_t</b> <b>func,</b> <b>void</b> <b>*</b> <b>data)</b>
       Create a POSIX signal event source

       <b>Parameters</b>
           <u>loop</u> The event loop that will process the new source.
           <u>signal_number</u> Number of the signal to watch for.
           <u>func</u> The signal dispatch function.
           <u>data</u> User data.

       <b>Returns</b>
           A new signal event source.

       This function blocks the normal delivery of the given signal in the calling thread, and creates a 'watch'
       for it. Signal delivery no longer happens asynchronously, but by <b>wl_event_loop_dispatch()</b> calling the
       dispatch callback function func.

       It is the caller's responsibility to ensure that all other threads have also blocked the signal.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_signal_func_t</b>

   <b>struct</b> <b>wl_event_source</b> <b>*</b> <b>wl_event_loop_add_timer</b> <b>(struct</b> <b>wl_event_loop</b> <b>*</b> <b>loop,</b> <b>wl_event_loop_timer_func_t</b>
       <b>func,</b> <b>void</b> <b>*</b> <b>data)</b>
       Create a timer event source

       <b>Parameters</b>
           <u>loop</u> The event loop that will process the new source.
           <u>func</u> The timer dispatch function.
           <u>data</u> User data.

       <b>Returns</b>
           A new timer event source.

       The timer is initially disarmed. It needs to be armed with a call to <b>wl_event_source_timer_update()</b>
       before it can trigger a dispatch call.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_timer_func_t</b>

   <b>void</b> <b>wl_event_source_check</b> <b>(struct</b> <b>wl_event_source</b> <b>*</b> <b>source)</b>
       Mark event source to be re-checked

       <b>Parameters</b>
           <u>source</u> The event source to be re-checked.

       This function permanently marks the event source to be re-checked after the normal dispatch of sources in
       <b>wl_event_loop_dispatch()</b>. Re-checking will keep iterating over all such event sources until the dispatch
       function for them all returns zero.

       Re-checking is used on sources that may become ready to dispatch as a side-effect of dispatching
       themselves or other event sources, including idle sources. Re-checking ensures all the incoming events
       have been fully drained before <b>wl_event_loop_dispatch()</b> returns.

   <b>int</b> <b>wl_event_source_fd_update</b> <b>(struct</b> <b>wl_event_source</b> <b>*</b> <b>source,</b> <b>uint32_t</b> <b>mask)</b>
       Update a file descriptor source's event mask

       <b>Parameters</b>
           <u>source</u> The file descriptor event source to update.
           <u>mask</u> The new mask, a bitwise-or of: WL_EVENT_READABLE, WL_EVENT_WRITABLE.

       <b>Returns</b>
           0 on success, -1 on failure.

       This changes which events, readable and/or writable, cause the dispatch callback to be called on.

       File descriptors are usually writable to begin with, so they do not need to be polled for writable until
       a write actually fails. When a write fails, the event mask can be changed to poll for readable and
       writable, delivering a dispatch callback when it is possible to write more. Once all data has been
       written, the mask can be changed to poll only for readable to avoid busy-looping on dispatch.

       <b>See</b> <b>also</b>
           <b>wl_event_loop_add_fd()</b>

   <b>int</b> <b>wl_event_source_remove</b> <b>(struct</b> <b>wl_event_source</b> <b>*</b> <b>source)</b>
       Remove an event source from its event loop

       <b>Parameters</b>
           <u>source</u> The event source to be removed.

       <b>Returns</b>
           Zero.

       The event source is removed from the event loop it was created for, and is effectively destroyed. This
       invalidates source . The dispatch function of the source will no longer be called through this source.

   <b>int</b> <b>wl_event_source_timer_update</b> <b>(struct</b> <b>wl_event_source</b> <b>*</b> <b>source,</b> <b>int</b> <b>ms_delay)</b>
       Arm or disarm a timer

       <b>Parameters</b>
           <u>source</u> The timer event source to modify.
           <u>ms_delay</u> The timeout in milliseconds.

       <b>Returns</b>
           0 on success, -1 on failure.

       If the timeout is zero, the timer is disarmed.

       If the timeout is non-zero, the timer is set to expire after the given timeout in milliseconds. When the
       timer expires, the dispatch function set with <b>wl_event_loop_add_timer()</b> is called once from
       <b>wl_event_loop_dispatch()</b>. If another dispatch is desired after another expiry,
       <b>wl_event_source_timer_update()</b> needs to be called again.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for Wayland from the source code.

Version 1.23.1                              Thu May 22 2025 08:23:52                          <u><a href="../man3/wl_event_source.3.html">wl_event_source</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>