<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clCompileProgram - Compiles a program’s source for all the devices or a specific device(s) in the OpenCL</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/opencl-1.2-man-doc">opencl-1.2-man-doc_1.0~svn33624-5.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       clCompileProgram - Compiles a program’s source for all the devices or a specific device(s) in the OpenCL
       context associated with program.

       <b>cl_int</b> <b>clCompileProgram(cl_program</b> <u>program</u><b>,</b> <b>cl_uint</b> <u>num_devices</u><b>,</b> <b>const</b> <b>cl_device_id</b> <b>*</b><u>device_list</u><b>,</b>
                               <b>const</b> <b>char</b> <b>*</b><u>options</u><b>,</b> <b>cl_uint</b> <u>num_input_headers</u><b>,</b> <b>const</b> <b>cl_program</b> <b>*</b><u>input_headers</u><b>,</b>
                               <b>const</b> <b>char</b> <b>*</b><u>*header_include_names</u><b>,</b>
                               <b>void</b> <u>(CL_CALLBACK</u> <u>*pfn_notify)(</u> <u>cl_program</u> <u>program,</u> <u>void</u> <u>*user_data)</u><b>,</b>
                               <b>void</b> <b>*</b><u>user_data</u><b>);</b>

</pre><h4><b>PARAMETERS</b></h4><pre>
        <u>program</u>
           The program object that is the compilation target.

        <u>device_list</u>
           A pointer to a list of devices associated with <u>program</u>. If <u>device_list</u> is a NULL value, the compile
           is performed for all devices associated with program. If <u>device_list</u> is a non-NULL value, the compile
           is performed for devices specified in this list.

        <u>num_devices</u>
           The number of devices listed in <u>device_list</u>.

       <u>options</u>
           A pointer to a null-terminated string of characters that describes the compilation options to be used
           for building the program executable. The list of supported options is as described below.

       <u>num_input_headers</u>
           Specifies the number of programs that describe headers in the array referenced by <u>input_headers</u>.

       <u>input_headers</u>
           An array of program embedded headers created with <b><a href="../man3clc/clCreateProgramWithSource.3clc.html">clCreateProgramWithSource</a></b>(3clc).

       <u>header_include_names</u>
           An array that has a one to one correspondence with <u>input_headers</u>. Each entry in <u>header_include_names</u>
           specifies the include name used by source in <u>program</u> that comes from an embedded header. The
           corresponding entry in <u>input_headers</u> identifies the program object which contains the header source
           to be used. The embedded headers are first searched before the headers in the list of directories
           specified by the –I compile option (as described in section 5.6.4.1). If multiple entries in
           <u>header_include_names</u> refer to the same header name, the first one encountered will be used.

        <u>pfn_notify</u>
           A function pointer to a notification routine. The notification routine is a callback function that an
           application can register and which will be called when the program executable has been built
           (successfully or unsuccessfully). If <u>pfn_notify</u> is not NULL, <b>clCompileProgram</b> does not need to wait
           for the compiler to complete and can return immediately once the compilation can begin. The
           compilation can begin if the context, program whose sources are being compiled, list of devices,
           input headers, programs that describe input headers and compiler options specified are all valid and
           appropriate host and device resources needed to perform the compile are available. If <u>pfn_notify</u> is
           NULL, <b>clCompileProgram</b> does not return until the compiler has completed. This callback function may
           be called asynchronously by the OpenCL implementation. It is the application’s responsibility to
           ensure that the callback function is thread-safe.

        <u>user_data</u>
           Passed as an argument when <u>pfn_notify</u> is called.  <u>user_data</u> can be NULL.

</pre><h4><b>NOTES</b></h4><pre>
       Compiles a program’s source for all the devices or a specific device(s) in the OpenCL context associated
       with <u>program</u>. The pre-processor runs before the program sources are compiled. The compiled binary is
       built for all devices associated with <u>program</u> or the list of devices specified. The compiled binary can
       be queried using <b><a href="../man3clc/clGetProgramInfo.3clc.html">clGetProgramInfo</a></b>(3clc)(<u>program</u>, <b>CL_PROGRAM_BINARIES</b>, ...) and can be specified to
       <b><a href="../man3clc/clCreateProgramWithBinary.3clc.html">clCreateProgramWithBinary</a></b>(3clc) to create a new program object.  Compiler Options.PP The compiler options
       are categorized as pre-processor options, options for math intrinsics, options that control optimization
       and miscellaneous options. This specification defines a standard set of options that must be supported by
       the OpenCL C compiler when building program executables online or offline. These may be extended by a set
       of vendor- or platform specific options.  Preprocessor Options.PP These options control the OpenCL C
       preprocessor which is run on each program source before actual compilation.

       -D options are processed in the order they are given in the options argument to <b>clBuildProgram</b> or or
       <b>clCompileProgram</b>.

       -D name
           Predefine <u>name</u> as a macro, with definition 1.

       -D name=definition
           The contents of <u>definition</u> are tokenized and processed as if they appeared during translation phase
           three in a `#define' directive. In particular, the definition will be truncated by embedded newline
           characters.

       -I dir
           Add the directory <u>dir</u> to the list of directories to be searched for header files.
       Math Intrinsics Options

       These options control compiler behavior regarding floating-point arithmetic. These options trade off
       between speed and correctness.

       -cl-single-precision-constant
           Treat double precision floating-point constant as single precision constant.

       -cl-denorms-are-zero
           This option controls how single precision and double precision denormalized numbers are handled. If
           specified as a build option, the single precision denormalized numbers may be flushed to zero; double
           precision denormalized numbers may also be flushed to zero if the optional extension for double
           precsion is supported. This is intended to be a performance hint and the OpenCL compiler can choose
           not to flush denorms to zero if the device supports single precision (or double precision)
           denormalized numbers.

           This option is ignored for single precision numbers if the device does not support single precision
           denormalized numbers i.e.  <b>CL_FP_DENORM</b> bit is not set in <b>CL_DEVICE_SINGLE_FP_CONFIG</b>.

           This option is ignored for double precision numbers if the device does not support double precision
           or if it does support double precison but <b>CL_FP_DENORM</b> bit is not set in <b>CL_DEVICE_DOUBLE_FP_CONFIG</b>.

           This flag only applies for scalar and vector single precision floating-point variables and
           computations on these floating-point variables inside a program. It does not apply to reading from or
           writing to image objects.

       -cl-fp32-correctly-rounded-divide-sqrt
           The -cl-fp32-correctly-rounded-divide-sqrt build option to <b>clBuildProgram</b> or <b>clCompileProgram</b> allows
           an application to specify that single precision floating-point divide (x/y and 1/x) and sqrt used in
           the program source are correctly rounded. If this build option is not specified, the minimum
           numerical accuracy of single precision floating-point divide and sqrt are as defined in section 7.4
           of the OpenCL specification.

           This build option can only be specified if the <b>CL_FP_CORRECTLY_ROUNDED_DIVIDE_SQRT</b> is set in
           <b>CL_DEVICE_SINGLE_FP_CONFIG</b> (as defined in in the table of allowed values for <u>param_name</u> for
           <b><a href="../man3clc/clGetDeviceInfo.3clc.html">clGetDeviceInfo</a></b>(3clc)) for devices that the program is being build.  <b>clBuildProgram</b> or
           <b>clCompileProgram</b> will fail to compile the program for a device if the
           -cl-fp32-correctly-rounded-divide-sqrt option is specified and <b>CL_FP_CORRECTLY_ROUNDED_DIVIDE_SQRT</b> is
           not set for the device.
       Optimization Options.PP These options control various sorts of optimizations. Turning on optimization
       flags makes the compiler attempt to improve the performance and/or code size at the expense of
       compilation time and possibly the ability to debug the program.

       -cl-opt-disable
           This option disables all optimizations. The default is optimizations are enabled.

       The following options control compiler behavior regarding floating-point arithmetic. These options trade
       off between performance and correctness and must be specifically enabled. These options are not turned on
       by default since it can result in incorrect output for programs which depend on an exact implementation
       of IEEE 754 rules/specifications for math functions.

       -cl-mad-enable
           Allow a * b + c to be replaced by a mad. The mad computes a * b + c with reduced accuracy. For
           example, some OpenCL devices implement mad as truncate the result of a * b before adding it to c.

       -cl-no-signed-zeros
           Allow optimizations for floating-point arithmetic that ignore the signedness of zero. IEEE 754
           arithmetic specifies the distinct behavior of +0.0 and -0.0 values, which then prohibits
           simplification of expressions such as x+0.0 or 0.0*x (even with -clfinite-math only). This option
           implies that the sign of a zero result isn't significant.

       -cl-unsafe-math-optimizations
           Allow optimizations for floating-point arithmetic that (a) assume that arguments and results are
           valid, (b) may violate IEEE 754 standard and (c) may violate the OpenCL numerical compliance
           requirements as defined in section 7.4 for single precision and double precision floating-point, and
           edge case behavior in section 7.5. This option includes the -cl-no-signed-zeros and -cl-mad-enable
           options.

       -cl-finite-math-only
           Allow optimizations for floating-point arithmetic that assume that arguments and results are not NaNs
           or ±∞. This option may violate the OpenCL numerical compliance requirements defined in section 7.4
           for single precision and double precision floating point, and edge case behavior in section 7.5.

       -cl-fast-relaxed-math
           Sets the optimization options -cl-finite-math-only and -cl-unsafe-math-optimizations. This allows
           optimizations for floating-point arithmetic that may violate the IEEE 754 standard and the OpenCL
           numerical compliance requirements defined in the specification in section 7.4 for single-precision
           and double precision floating-point, and edge case behavior in section 7.5. This option causes the
           preprocessor macro __FAST_RELAXED_MATH__ to be defined in the OpenCL program.
       Options to Request or Suppress Warnings

       Warnings are diagnostic messages that report constructions which are not inherently erroneous but which
       are risky or suggest there may have been an error. The following languageindependent options do not
       enable specific warnings but control the kinds of diagnostics produced by the OpenCL compiler.

       -w
           Inhibit all warning messages.

       -Werror
           Make all warnings into errors.
       Options Controlling the OpenCL C Version

       The following option controls the version of OpenCL C that the compiler accepts.

       -cl-std=
           Determine the OpenCL C language version to use. A value for this option must be provided. Valid
           values are:

           CL1.1 - Support all OpenCL C programs that use the OpenCL C language features defined in section 6 of
           the OpenCL 1.1 specification.

           CL1.2 – Support all OpenCL C programs that use the OpenCL C language features defined in section 6 of
           the OpenCL 1.2 specification.

       Calls to <b>clBuildProgram</b> or <b>clCompileProgram</b> with the -cl-std=CL1.1 option will fail to compile the
       program for any devices with <b>CL_DEVICE_OPENCL_C_VERSION</b> = OpenCL C 1.0. Calls to <b>clBuildProgram</b> or
       <b>clCompileProgram</b> with the -cl-std=CL1.2 option will fail to compile the program for any devices with
       <b>CL_DEVICE_OPENCL_C_VERSION</b> = OpenCL C 1.0 or OpenCL C 1.1.

       If the -cl-std build option is not specified, the <b>CL_DEVICE_OPENCL_C_VERSION</b> is used to select the
       version of OpenCL C to be used when compiling the program for each device.  Options for Querying Kernel
       Argument Information

       -cl-kernel-arg-info
           This option allows the compiler to store information about the arguments of a kernel(s) in the
           program executable. The argument information stored includes the argument name, its type, the address
           and access qualifiers used. Refer to description of <b><a href="../man3clc/clGetKernelArgInfo.3clc.html">clGetKernelArgInfo</a></b>(3clc) on how to query this
           information.
       Linker Options

       This specification defines a standard set of linker options that must be supported by the OpenCL C
       compiler when linking compiled programs online or offline. These linker options are categorized as
       library linking options and program linking options. These may be extended by a set of vendor- or
       platform-specific options.

       Library Linking Options

       The following options can be specified when creating a library of compiled binaries.

       -create-library
           Create a library of compiled binaries specified in <u>input_programs</u> argument to <b><a href="../man3clc/clLinkProgram.3clc.html">clLinkProgram</a></b>(3clc).

       -enable-link-options
           Allows the linker to modify the library behavior based on one or more link options (described in
           Program Linking Options, below) when this library is linked with a program executable. This option
           must be specified with the –create-library option.
       Program Linking Options

       The following options can be specified when linking a program executable.

       •   -cl-denorms-are-zero .RE

           •   -cl-no-signed-zeroes .RE

               •   -cl-unsafe-math-optimizations .RE

                   •   -cl-finite-math-only .RE

                       •   -cl-fast-relaxed-mat .RE

                           The linker may apply these options to all compiled program objects specified to
                           <b><a href="../man3clc/clLinkProgram.3clc.html">clLinkProgram</a></b>(3clc). The linker may apply these options only to libraries which were
                           created with the –enable-link-option.

                           Separate Compilation and Linking of Programs.PP OpenCL 1.2 extends how programs are
                           compiled and linked to support the following:

                           •    Separate compilation and link stages.  Program sources can be compiled to
                               generate a compiled binary object and linked in a separate stage with other
                               compiled program objects to the program exectuable.

                           •    Embedded headers.  In OpenCL 1.0 and 1.1, the –I build option could be used to
                               specify the list of directories to be searched for headers files that are
                               included by a program source(s).  OpenCL 1.2 extends this by allowing the header
                               sources to come from program objects instead of just header files.

                           •    Libraries.  The linker can be used to link compiled objects and libraries into a
                               program executable or to create a library of compiled binarie

</pre><h4><b>ERRORS</b></h4><pre>
       <b>clCompileProgram</b> returns CL_SUCCESS if the function is executed successfully. Otherwise, it returns one
       of the following errors:

       •   CL_INVALID_PROGRAM if <u>program</u> is not a valid program object.

       •   CL_INVALID_VALUE if <u>device_list</u> is NULL and <u>num_devices</u> is greater than zero, or if <u>device_list</u> is
           not NULL and <u>num_devices</u> is zero.

       •   CL_INVALID_VALUE if <u>num_input_headers</u> is zero and <u>header_include_names</u> or <u>input_headers</u> are not NULL
           or if <u>num_input_headers</u> is not zero and <u>header_include_names</u> or <u>input_headers</u> are NULL.

       •   CL_INVALID_VALUE if <u>pfn_notify</u> is NULL but <u>user_data</u> is not NULL.

       •   CL_INVALID_DEVICE if OpenCL devices listed in <u>device_list</u> are not in the list of devices associated
           with <u>program</u>.

       •   CL_INVALID_COMPILER_OPTIONS if the compiler options specified by <u>options</u> are invalid.

       •   CL_INVALID_OPERATION if the compilation or build of a program executable for any of the devices
           listed in <u>device_list</u> by a previous call to <b>clCompileProgram</b> or <b>clBuildProgram</b> for <u>program</u> has not
           completed.

       •   CL_COMPILER_NOT_AVAILABLE if a compiler is not available i.e.  <b>CL_DEVICE_COMPILER_AVAILABLE</b> specified
           in in the table of allowed values for <u>param_name</u> for <b><a href="../man3clc/clGetDeviceInfo.3clc.html">clGetDeviceInfo</a></b>(3clc) is set to <b>CL_FALSE</b>.

       •   CL_COMPILE_PROGRAM_FAILURE if there is a failure to compile the program source.  This error will be
           returned if <b>clCompileProgram</b> does not return until the compile has completed.

       •   CL_INVALID_OPERATION if there are kernel objects attached to <u>program</u>.

       •   CL_INVALID_OPERATION if  program has no source i.e. it has not been created with
           <b><a href="../man3clc/clCreateProgramWithSource.3clc.html">clCreateProgramWithSource</a></b>(3clc).

       •   CL_OUT_OF_RESOURCES if there is a failure to allocate resources required by the OpenCL implementation
           on the device.

       •   CL_OUT_OF_HOST_MEMORY if there is a failure to allocate resources required by the OpenCL
           implementation on the host.

   <b>Example</b>
       For example, consider the following program source:
       #include &lt;foo.h&gt; #include &lt;mydir/myinc.h&gt;

       __kernel void image_filter (int n, int m, __constant
       float *filter_weights, __read_only image2d_t src_image,
       __write_only image2d_t dst_image) { ...  }

       This kernel includes two headers foo.h and mydir/myinc.h. The following describes how these headers can
       be passed as embedded headers in program objects:
       cl_program foo_pg = clCreateProgramWithSource(context,
       1, &amp;foo_header_src, NULL, &amp;err); cl_program myinc_pg =
       clCreateProgramWithSource(context, 1, &amp;myinc_header_src,
       NULL, &amp;err);

       // let’s assume the program source described above is
       given // by program_A and is loaded via
       clCreateProgramWithSource

       cl_program input_headers[2] = { foo_pg, myinc_pg }; char
       * input_header_names[2] = { “foo.h”, “mydir/myinc.h” };
       clCompileProgram(program_A, 0, NULL, // num_devices &amp;
       device_list NULL, // compile_options 2, //
       num_input_headers input_headers, input_header_names,
       NULL, NULL); // pfn_notify &amp; user_data

</pre><h4><b>SPECIFICATION</b></h4><pre>
       <b>OpenCL</b> <b>Specification</b>[1]

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3clc/clGetDeviceInfo.3clc.html">clGetDeviceInfo</a></b>(3clc)

</pre><h4><b>AUTHORS</b></h4><pre>
       <b>The</b> <b>Khronos</b> <b>Group</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2007-2011 The Khronos Group Inc.
       Permission is hereby granted, free of charge, to any person obtaining a copy of this software and/or
       associated documentation files (the "Materials"), to deal in the Materials without restriction, including
       without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
       copies of the Materials, and to permit persons to whom the Materials are furnished to do so, subject to
       the condition that this copyright notice and permission notice shall be included in all copies or
       substantial portions of the Materials.

</pre><h4><b>NOTES</b></h4><pre>
        1. OpenCL Specification
           page 139, section 5.6.3 - Separate Compilation and Linking of Programs

The Khronos Group                                  11/18/2024                             <u><a href="../man3clc/CLCOMPILEPROGRAM.3clc.html">CLCOMPILEPROGRAM</a></u>(3clc)
</pre>
 </div>
</div></section>
</div>
</body>
</html>