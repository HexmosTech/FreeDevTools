<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ares_query - Initiate a single-question DNS query</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libc-ares-dev">libc-ares-dev_1.34.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ares_query - Initiate a single-question DNS query

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;ares.h&gt;

       typedef void (*ares_callback_dnsrec)(void *arg, ares_status_t status,
                                            size_t timeouts,
                                            const ares_dns_record_t *dnsrec);

       ares_status_t ares_query_dnsrec(ares_channel_t      *channel,
                                       const char          *name,
                                       ares_dns_class_t     dnsclass,
                                       ares_dns_rec_type_t  type,
                                       ares_callback_dnsrec callback,
                                       void                *arg,
                                       unsigned short      *qid);

       typedef void (*ares_callback)(void *arg, int status,
                                     int timeouts, unsigned char *abuf,
                                     int alen);

       void ares_query(ares_channel_t *channel, const char *name,
                       int dnsclass, int type,
                       ares_callback callback, void *arg);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man3/ares_query_dnsrec.3.html">ares_query_dnsrec</a>(3)</b>  and  <b><a href="../man3/ares_query.3.html">ares_query</a>(3)</b>  functions initiate a single-question DNS query on the name
       service channel identified by <u>channel</u>.  The parameter <u>name</u> gives the query name  as  a  NUL-terminated  C
       string of period-separated labels optionally ending with a period; periods and backslashes within a label
       must be escaped with a backslash.  The parameters <u>dnsclass</u> and <u>type</u> give the class and type of the query.

       <b><a href="../man3/ares_query_dnsrec.3.html">ares_query_dnsrec</a>(3)</b>  uses  the  ares  <b>ares_dns_class_t</b>  and <b>ares_dns_rec_type_t</b> defined types.  However,
       <b><a href="../man3/ares_query.3.html">ares_query</a>(3)</b> uses the values defined in <b>&lt;arpa/nameser.h&gt;</b>.

       When the query is complete or has failed, the ares library will invoke <u>callback</u>.  Completion  or  failure
       of the query may happen immediately (even before the return of the function call), or may happen during a
       later call to <b><a href="../man3/ares_process.3.html">ares_process</a>(3)</b> or <b><a href="../man3/ares_destroy.3.html">ares_destroy</a>(3)</b>.

       If this is called from a thread other than which the main program event loop is running, care needs to be
       taken  to  ensure  any  file  descriptor  lists  are  updated immediately within the eventloop.  When the
       associated callback is called, it is called with a channel lock so care  must  be  taken  to  ensure  any
       processing is minimal to prevent DNS channel stalls.

       The  callback  argument  <u>arg</u>  is copied from the <b><a href="../man3/ares_query_dnsrec.3.html">ares_query_dnsrec</a>(3)</b> or <b><a href="../man3/ares_query.3.html">ares_query</a>(3)</b> argument <u>arg</u>.  The
       callback argument <u>status</u> indicates whether the query succeeded and, if not, how it failed.  It  may  have
       any of the following values:

       <b>ARES_SUCCESS</b>       The query completed successfully.

       <b>ARES_ENODATA</b>       The query completed but contains no answers.

       <b>ARES_EFORMERR</b>      The query completed but the server claims that the query was malformatted.

       <b>ARES_ESERVFAIL</b>     The  query  completed but the server claims to have experienced a failure.  (This code
                          can  only  occur  if  the  <b>ARES_FLAG_NOCHECKRESP</b>  flag  was   specified   at   channel
                          initialization  time; otherwise, such responses are ignored at the <b><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</b>
                          level.)

       <b>ARES_ENOTFOUND</b>     The query completed but the queried-for domain name was not found.

       <b>ARES_ENOTIMP</b>       The query completed but the server does not implement the operation requested  by  the
                          query.   (This  code can only occur if the <b>ARES_FLAG_NOCHECKRESP</b> flag was specified at
                          channel  initialization  time;  otherwise,  such  responses   are   ignored   at   the
                          <b><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</b> level.)

       <b>ARES_EREFUSED</b>      The  query  completed  but the server refused the query.  (This code can only occur if
                          the  <b>ARES_FLAG_NOCHECKRESP</b>  flag  was  specified  at  channel   initialization   time;
                          otherwise, such responses are ignored at the <b><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</b> level.)

       <b>ARES_EBADNAME</b>      The query name <u>name</u> could not be encoded as a domain name, either because it contained
                          a zero-length label or because it contained a label of more than 63 characters.

       <b>ARES_ETIMEOUT</b>      No name servers responded within the timeout period.

       <b>ARES_ECONNREFUSED</b>  No name servers could be contacted.

       <b>ARES_ENOMEM</b>        Memory was exhausted.

       <b>ARES_ECANCELLED</b>    The query was cancelled.

       <b>ARES_EDESTRUCTION</b>  The name service channel <u>channel</u> is being destroyed; the query will not be completed.

       <b>ARES_ENOSERVER</b>     The query will not be completed because no DNS servers were configured on the channel.

       The callback argument <u>timeouts</u> reports how many times a query timed out during the execution of the given
       request.

       If  the  query  completed  (even  if there was something wrong with it, as indicated by some of the above
       error codes), the callback argument <u>dnsrec</u> or <u>abuf</u> will be non-NULL, otherwise they will be NULL.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       <b><a href="../man3/ares_query_dnsrec.3.html">ares_query_dnsrec</a>(3)</b> was introduced in c-ares 1.28.0.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ares_process.3.html">ares_process</a></b>(3), <b><a href="../man3/ares_dns_record.3.html">ares_dns_record</a></b>(3)

                                                  24 July 1998                                     <u><a href="../man3/ARES_QUERY.3.html">ARES_QUERY</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>