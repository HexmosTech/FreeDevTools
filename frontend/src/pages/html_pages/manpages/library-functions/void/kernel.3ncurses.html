<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>def_prog_mode,  def_shell_mode,  reset_prog_mode,  reset_shell_mode,  resetty,  savetty,  getsyx, setsyx,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ncurses-doc">ncurses-doc_6.5+20250216-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>def_prog_mode</b>,  <b>def_shell_mode</b>,  <b>reset_prog_mode</b>,  <b>reset_shell_mode</b>,  <b>resetty</b>,  <b>savetty</b>,  <b>getsyx</b>, <b>setsyx</b>,
       <b>curs_set</b>, <b>mvcur</b>, <b>napms</b>, <b>ripoffline</b> - low-level <u>curses</u> routines

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;curses.h&gt;</b>

       <b>int</b> <b>def_prog_mode(void);</b>
       <b>int</b> <b>def_shell_mode(void);</b>

       <b>int</b> <b>reset_prog_mode(void);</b>
       <b>int</b> <b>reset_shell_mode(void);</b>

       <b>int</b> <b>resetty(void);</b>
       <b>int</b> <b>savetty(void);</b>

       <b>void</b> <b>getsyx(int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>);</b>
       <b>void</b> <b>setsyx(int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>);</b>

       <b>int</b> <b>curs_set(int</b> <u>visibility</u><b>);</b>
       <b>int</b> <b>mvcur(int</b> <u>oldrow</u><b>,</b> <b>int</b> <u>oldcol</u><b>,</b> <b>int</b> <u>newrow</u><b>,</b> <b>int</b> <u>newcol</u><b>);</b>
       <b>int</b> <b>napms(int</b> <u>ms</u><b>);</b>
       <b>int</b> <b>ripoffline(int</b> <u>line</u><b>,</b> <b>int</b> <b>(*</b><u>init</u><b>)(WINDOW</b> <b>*,</b> <b>int));</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The following routines give low-level access to various <b>curses</b> capabilities.   These  routines  typically
       are used inside library routines.

   <b>def_prog_mode,</b> <b>def_shell_mode</b>
       The  <b>def_prog_mode</b>  and  <b>def_shell_mode</b>  routines  save  the  current terminal modes as the “program” (in
       <b>curses</b>) or “shell” (not in <b>curses</b>) state for use by the <b>reset_prog_mode</b>  and  <b>reset_shell_mode</b>  routines.
       This  is done automatically by <b>initscr</b>.  There is one such save area for each screen context allocated by
       <b>newterm</b>.

   <b>reset_prog_mode,</b> <b>reset_shell_mode</b>
       The <b>reset_prog_mode</b> and <b>reset_shell_mode</b> routines restore  the  terminal  to  “program”  (in  <b>curses</b>)  or
       “shell” (out of <b>curses</b>) state.  These are done automatically by <b><a href="../man3NCURSES/endwin.3NCURSES.html">endwin</a></b>(3NCURSES) and, after an <b>endwin</b>, by
       <b>doupdate</b>, so they normally are not called.

   <b>resetty,</b> <b>savetty</b>
       The  <b>resetty</b>  and  <b>savetty</b>  routines save and restore the state of the terminal modes.  <b>savetty</b> saves the
       current state in a buffer and <b>resetty</b> restores the state to what it was at the last call to <b>savetty</b>.

   <b>getsyx</b>
       <b>getsyx</b>  stores  the  coordinates  of  virtual  screen  (<b>newscr</b>)  cursor  in  <u>y</u>  and   <u>x</u>.    If   <b>newscr</b>'s
       <b><a href="../man3NCURSES/leaveok.3NCURSES.html">leaveok</a></b>(3NCURSES)  output  option  is <b>TRUE</b>, <b>getsyx</b> stores <b>-1</b> in both <u>y</u> and <u>x</u>.  If lines have been removed
       from the top of the screen using <b>ripoffline</b>, <u>y</u> includes these lines; therefore,  <u>y</u>  and  <u>x</u>  populated  by
       <b>getsyx</b> should be used only as arguments for <b>setsyx</b>.

       Few applications use this feature; most call <b><a href="../man3NCURSES/getyx.3NCURSES.html">getyx</a></b>(3NCURSES) instead.

   <b>setsyx</b>
       <b>setsyx</b>  sets  the  virtual  screen  (<b>newscr</b>)  cursor location to (<u>y</u>, <u>x</u>).  <b>setsyx(-1,</b> <b>-1)</b> is equivalent to
       <b>leaveok(newscr,</b> <b>TRUE)</b>.

       <b>getsyx</b> and <b>setsyx</b> are designed to be used by a function that manipulates  <u>curses</u>  windows  but  seeks  to
       avoid  changing  the  cursor  position.   Such  a  function  would first call <b>getsyx</b>, modify its windows'
       content, call <b><a href="../man3NCURSES/wnoutrefresh.3NCURSES.html">wnoutrefresh</a></b>(3NCURSES) on them, call <b>setsyx</b>, then call <b><a href="../man3NCURSES/doupdate.3NCURSES.html">doupdate</a></b>(3NCURSES).

       Few applications use this feature; most call <b><a href="../man3NCURSES/wmove.3NCURSES.html">wmove</a></b>(3NCURSES) instead.

   <b>curs_set</b>
       <b>curs_set</b> adjusts the cursor visibility to “invisible”, “visible”, “very visible”, as its argument  is  <b>0</b>,
       <b>1</b>,  or  <b>2</b>,  respectively.   It returns the previous <u>visibility</u> if the requested one is supported, and <b>ERR</b>
       otherwise.

   <b>mvcur</b>
       <b>mvcur</b> provides low-level cursor motion.  It takes effect immediately, rather than at  the  next  refresh.
       Unlike  the  other  low-level  output  functions, which either write to the standard output stream or are
       passed a function pointer to perform output, <b>mvcur</b> uses a file descriptor derived from the output  stream
       parameter of <b><a href="../man3NCURSES/newterm.3NCURSES.html">newterm</a></b>(3NCURSES).

       One  application  of  <b>mvcur</b>  accompanies  the  temporary  use of another program to write to the terminal
       screen.  For example, first call <b><a href="../man3NCURSES/refresh.3NCURSES.html">refresh</a></b>(3NCURSES) to ensure that the screen and the library's  model  of
       it  is  up  to  date; then call <b>reset_shell_mode</b>; write to the screen with the external application; call
       <b>reset_prog_mode</b>; and finally call <b>mvcur(</b>...<b>,</b> ...<b>,</b> <b>-1,</b> <b>-1)</b> to move the terminal  cursor  to  where  <u>curses</u>
       thinks it is, since the library has no knowledge of how the external application moved it.

   <b>napms</b>
       <b>napms</b> sleeps for <u>ms</u> milliseconds.  If <u>ms</u> exceeds 30,000 (thirty seconds), it is capped at that value.

   <b>ripoffline</b>
       <b>ripoffline</b>  provides  access  to the same facility that <b><a href="../man3NCURSES/slk_init.3NCURSES.html">slk_init</a></b>(3NCURSES) uses to reduce the size of the
       screen.  <b>ripoffline</b> must be called before <b>initscr</b> or <b>newterm</b> is called, to prepare these initial actions:

       •   If <u>line</u> is positive, a line is removed from the top of <b>stdscr</b>.

       •   if <u>line</u> is negative, a line is removed from the bottom.

       When the resulting initialization is done inside <b>initscr</b>, the routine <b>init</b>  (supplied  by  the  user)  is
       called with two arguments:

       •   a window pointer to the one-line window that has been allocated and

       •   an integer with the number of columns in the window.

       Inside  this initialization routine, the integer variables <b>LINES</b> and <b>COLS</b> (defined in <b>&lt;curses.h&gt;</b>) are not
       guaranteed to be accurate and <b>wrefresh</b> or  <b>doupdate</b>  must  not  be  called.   It  is  allowable  to  call
       <b>wnoutrefresh</b> during the initialization routine.

       <b>ripoffline</b> can be called up to five times before calling <b>initscr</b> or <b>newterm</b>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Except for <b>curs_set</b>, these functions return <b>OK</b> on success and <b>ERR</b> on failure.

       <b>curs_set</b>  returns  the  previous cursor visibility, and returns <b>ERR</b> if the terminal type does not support
       the requested <u>visibility</u>.

       <b>napms</b> always succeeds.

       <b>mvcur</b> fails if the position (<u>newrow</u>, <u>newcol</u>) is outside the screen boundaries.

       In <u>ncurses</u>,

       •   <b>def_prog_mode</b>, <b>def_shell_mode</b>, <b>reset_prog_mode</b>, and <b>reset_shell_mode</b> return <b>ERR</b> if the  terminal  was
           not initialized, or if the operating system's function for obtaining terminal settings fails.

       •   <b>ripoffline</b> returns <b>ERR</b> if the accumulated quantity of ripped-off lines would exceed the maximum (5).

</pre><h4><b>NOTES</b></h4><pre>
       <b>getsyx</b> is a macro; use of the <b>&amp;</b> operator before its arguments is unnecessary.

       The  <b>endwin</b>  function  of  both  <u>ncurses</u> and SVr4 <u>curses</u> calls <b>curs_set</b> if the latter has previously been
       called to set the cursor visibility to a value other than normal;  that  is,  either  invisible  or  very
       visible.  There is no way for <u>ncurses</u> to determine the initial cursor visibility to restore it.

</pre><h4><b>EXTENSIONS</b></h4><pre>
       In  <u>ncurses</u>,  <b>mvcur</b> accepts <b>-1</b> for either or both old coordinates.  This value tells <u>ncurses</u> that the old
       location is unknown, and that it must  use  only  absolute  motion,  as  with  the  <b>cursor_address</b>  (<b>cup</b>)
       capability, rather than the least costly combination of absolute and relative motion.

</pre><h4><b>PORTABILITY</b></h4><pre>
       Applications  employing  <u>ncurses</u>  extensions  should  condition  their  use  on  the  visibility  of  the
       <b>NCURSES_VERSION</b> preprocessor macro.

       The <u>virtual</u> <u>screen</u> functions <u>setsyx</u> and  <u>getsyx</u>  are  not  described  in  X/Open  Curses  Issue 4.   SVr4
       documents  each  of  them as returning an <u>int</u>.  This is misleading, as they are macros with no documented
       semantics for returning values.

       All other functions are as described in X/Open Curses.  It specifies no error conditions for them, except
       as described for <u>curs_set</u> in section “RETURN VALUE” above.

       The System V Interface Definition, Version 4 (1995), specified all of these functions except <u>curs_set</u>  as
       returning <u>OK</u>.

       Older  SVr4  man  pages  warn  that  the  return  value  of  <b>curs_set</b>  “is  currently  incorrect”.   This
       implementation gets it right, but counting on its correctness anywhere else may be unwise.

       X/Open Curses specifies <u>ripoffline</u> as returning <b>OK</b> with no possibility of failure (“[c]alls to <u>ripoffline</u>
       above this limit [five lines] have no effect but report success”).

       X/Open Curses notes:

              After use of <u>mvcur</u>(), the model Curses maintains of the state of the terminal might not match  the
              actual  state of the terminal.  An application should touch and refresh the window before resuming
              conventional use of Curses.

       Both  <u>ncurses</u>  and  SVr4  <u>curses</u>  implement  <b>mvcur</b>  using  the  <u>SCREEN</u>   object   allocated   in   either
       <b><a href="../man3NCURSES/initscr.3NCURSES.html">initscr</a></b>(3NCURSES)  or  <b><a href="../man3NCURSES/newterm.3NCURSES.html">newterm</a></b>(3NCURSES).   X/Open  Curses states that the old location must be given for
       <u>mvcur</u> to accommodate terminals that lack absolute cursor positioning.

       If interrupted by a signal, <u>ncurses</u> restarts <u>napms</u>.  That, and the limitation to 30 seconds, differ  from
       other implementations.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3NCURSES/ncurses.3NCURSES.html">ncurses</a></b>(3NCURSES),    <b><a href="../man3NCURSES/initscr.3NCURSES.html">initscr</a></b>(3NCURSES),    <b><a href="../man3NCURSES/outopts.3NCURSES.html">outopts</a></b>(3NCURSES),   <b><a href="../man3NCURSES/refresh.3NCURSES.html">refresh</a></b>(3NCURSES),   <b><a href="../man3NCURSES/scr_dump.3NCURSES.html">scr_dump</a></b>(3NCURSES),
       <b><a href="../man3NCURSES/slk.3NCURSES.html">slk</a></b>(3NCURSES), <b><a href="../man3NCURSES/curses_variables.3NCURSES.html">curses_variables</a></b>(3NCURSES)

ncurses 6.5                                        2025-02-15                                   <u><a href="../man3NCURSES/kernel.3NCURSES.html">kernel</a></u>(3NCURSES)
</pre>
 </div>
</div></section>
</div>
</body>
</html>