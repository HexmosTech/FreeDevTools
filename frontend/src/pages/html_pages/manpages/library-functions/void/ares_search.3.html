<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ares_search - Initiate a DNS query with domain search</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libc-ares-dev">libc-ares-dev_1.34.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ares_search - Initiate a DNS query with domain search

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;ares.h&gt;

       typedef void (*ares_callback_dnsrec)(void *<u>arg</u>,
                                            ares_status_t <u>status</u>,
                                            size_t <u>timeouts</u>,
                                            const ares_dns_record_t *<u>dnsrec</u>);

       void ares_search_dnsrec(ares_channel_t *<u>channel</u>,
                               const ares_dns_record_t *<u>dnsrec</u>,
                               ares_callback_dnsrec <u>callback</u>, void *<u>arg</u>);

       typedef void (*ares_callback)(void *<u>arg</u>, int <u>status</u>,
                                     int <u>timeouts</u>, unsigned char *<u>abuf</u>,
                                     int <u>alen</u>);

       void ares_search(ares_channel_t *<u>channel</u>, const char *<u>name</u>,
                        int <u>dnsclass</u>, int <u>type</u>,
                        ares_callback <u>callback</u>, void *<u>arg</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>ares_search</b>  function  initiates a series of single-question DNS queries on the name service channel
       identified by <u>channel</u>, using the channel's search domains as well as a  host  alias  file  given  by  the
       HOSTALIAS environment variable.  The parameter <u>name</u> gives the alias name or the base of the query name as
       a  NUL-terminated  C  string  of  period-separated labels; if it ends with a period, the channel's search
       domains will not be used.  Periods and backslashes within a label must be escaped with a backslash.   The
       parameters  <u>dnsclass</u>  and  <u>type</u>  give  the  class  and  type  of  the  query  using the values defined in
       <b>&lt;arpa/nameser.h&gt;</b>.  When the query sequence is complete or  has  failed,  the  ares  library  will  invoke
       <u>callback</u>.   Completion  or  failure  of the query sequence may happen immediately, or may happen during a
       later call to <b><a href="../man3/ares_process.3.html">ares_process</a></b>(3) or <b><a href="../man3/ares_destroy.3.html">ares_destroy</a></b>(3).

       If this is called from a thread other than which the main program event loop is running, care needs to be
       taken to ensure any file descriptor lists  are  updated  immediately  within  the  eventloop.   When  the
       associated  callback  is  called,  it  is  called with a channel lock so care must be taken to ensure any
       processing is minimal to prevent DNS channel stalls.

       The callback argument <u>arg</u> is copied from the <b>ares_search</b> argument  <u>arg</u>.   The  callback  argument  <u>status</u>
       indicates  whether  the  query sequence ended with a successful query and, if not, how the query sequence
       failed.  It may have any of the following values:

       <b>ARES_SUCCESS</b>       A query completed successfully.

       <b>ARES_ENODATA</b>       No query completed successfully; when the query was  tried  without  a  search  domain
                          appended, a response was returned with no answers.

       <b>ARES_EFORMERR</b>      A query completed but the server claimed that the query was malformatted.

       <b>ARES_ESERVFAIL</b>     No  query  completed  successfully;  when  the query was tried without a search domain
                          appended, the server claimed to have experienced a failure.  (This code can only occur
                          if the <b>ARES_FLAG_NOCHECKRESP</b>  flag  was  specified  at  channel  initialization  time;
                          otherwise, such responses are ignored at the <b><a href="../man3/ares_send.3.html">ares_send</a></b>(3) level.)

       <b>ARES_ENOTFOUND</b>     No  query  completed  successfully;  when  the query was tried without a search domain
                          appended, the server reported that the queried-for domain name was not found.

       <b>ARES_ENOTIMP</b>       A query completed but the server does not implement the  operation  requested  by  the
                          query.   (This  code can only occur if the <b>ARES_FLAG_NOCHECKRESP</b> flag was specified at
                          channel initialization time; otherwise, such responses are ignored at the <b><a href="../man3/ares_send.3.html">ares_send</a></b>(3)
                          level.)

       <b>ARES_EREFUSED</b>      A query completed but the server  refused  the  query.   (This  code  can  only  occur
                          returned  if  the  <b>ARES_FLAG_NOCHECKRESP</b>  flag was specified at channel initialization
                          time; otherwise, such responses are ignored at the <b><a href="../man3/ares_send.3.html">ares_send</a></b>(3) level.)

       <b>ARES_TIMEOUT</b>       No name servers responded to a query within the timeout period.

       <b>ARES_ECONNREFUSED</b>  No name servers could be contacted.

       <b>ARES_ENOMEM</b>        Memory was exhausted.

       <b>ARES_ECANCELLED</b>    The query was cancelled.

       <b>ARES_EDESTRUCTION</b>  The name service channel <u>channel</u> is being destroyed; the query will not be completed.

       <b>ARES_ENOSERVER</b>     No query completed successfully; no DNS servers were configured on the channel.

       The callback argument <u>timeouts</u> reports how many times a query timed out during the execution of the given
       request.

       If a query completed successfully, the callback argument <u>abuf</u> points to a result buffer of  length  <u>alen</u>.
       If  the query did not complete successfully, <u>abuf</u> will usually be NULL and <u>alen</u> will usually be 0, but in
       some cases an unsuccessful query result may be placed in <u>abuf</u>.

       The <u><a href="../man3/ares_search_dnsrec.3.html">ares_search_dnsrec</a>(3)</u> function behaves identically to <u><a href="../man3/ares_search.3.html">ares_search</a>(3)</u>, but takes  an  initialized  and
       filled  DNS  record  object to use for queries as the second argument <u>dnsrec</u> instead of a name, class and
       type.  This object is used as the base for the queries and must itself represent  a  valid  query  for  a
       single name.  Note that the search domains will only be appended to the name in the question section; RRs
       on  the  DNS  record  object  will  not  be  affected.   Moreover,  the  <u>callback</u>  argument  is  of  type
       <u>ares_callback_dnsrec</u>.  This callback behaves identically to <u>ares_callback</u>, but is invoked with  a  parsed
       DNS record object <u>dnsrec</u> rather than a raw buffer with length.  Note that this object is read-only.

       The  <u><a href="../man3/ares_search_dnsrec.3.html">ares_search_dnsrec</a>(3)</u>  function  returns an <u>ares_status_t</u> response code.  This may be useful to know
       that the query was enqueued properly.  The response code does not reflect the result of the  query,  just
       the result of the enqueuing of the query.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       <b><a href="../man3/ares_search_dnsrec.3.html">ares_search_dnsrec</a>(3)</b> was introduced in c-ares 1.28.0.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ares_process.3.html">ares_process</a></b>(3), <b><a href="../man3/ares_dns_record.3.html">ares_dns_record</a></b>(3)

                                                  24 July 1998                                    <u><a href="../man3/ARES_SEARCH.3.html">ARES_SEARCH</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>