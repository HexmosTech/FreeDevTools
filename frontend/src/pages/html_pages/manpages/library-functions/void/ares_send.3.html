<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ares_send - Initiate a DNS query</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libc-ares-dev">libc-ares-dev_1.34.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ares_send - Initiate a DNS query

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;ares.h&gt;

       typedef void (*ares_callback_dnsrec)(void *arg, ares_status_t status,
                                            size_t timeouts,
                                            const ares_dns_record_t *dnsrec);

       ares_status_t ares_send_dnsrec(ares_channel_t *channel,
                                      const ares_dns_record_t *dnsrec,
                                      ares_callback_dnsrec callback,
                                      void *arg, unsigned short *qid);

       typedef void (*ares_callback)(void *arg, int status,
                                     int timeouts, unsigned char *abuf,
                                     int alen);

       void ares_send(ares_channel_t *channel, const unsigned char *qbuf,
                      int qlen, ares_callback callback, void *arg);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u>  function  initiates  a  DNS  query formatted using the <u>ares_dns_record_t</u> <u>*</u> data
       structure created via <u><a href="../man3/ares_dns_record_create.3.html">ares_dns_record_create</a>(3)</u> in the <u>dnsrec</u> parameter.  The supplied  callback  in  the
       <u>callback</u> parameter also returns the response using a <u>ares_dns_record_t</u> <u>*</u> data structure.

       The <u><a href="../man3/ares_send.3.html">ares_send</a>(3)</u> function similarly initiates a DNS query, but instead uses raw binary buffers with fully
       formatted  DNS  messages passed in the request via the <u>qbuf</u> and <u>qlen</u> parameters. The supplied callback in
       the <u>callback</u> parameter also returns the raw binary DNS response in the <u>abuf</u>  and  <u>alen</u>  parameters.  This
       method should be considered deprecated in favor of <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u>.

       Both functions take an initialized ares channel identified by <u>channel</u>.

       The <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u> also can be supplied an optional output parameter of <u>qid</u> to populate the query id
       as it was placed on the wire.

       The <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u> function returns an <u>ares_status_t</u> response code.  This may be useful to know that
       the  query  was  enqueued properly.  The response code does not reflect the result of the query, just the
       result of the enqueuing of the query.

       Completion or failure of the query may happen immediately (even before the function  returning),  or  may
       happen later as network events are processed.

       When  the associated callback is called, it is called with a channel lock so care must be taken to ensure
       any processing is minimal to prevent DNS channel stalls.

       The callback may be triggered from a different thread than the one which  called  <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u>  or
       <u><a href="../man3/ares_send.3.html">ares_send</a>(3)</u>.

       For integrators running their own event loops and not using <b>ARES_OPT_EVENT_THREAD</b>, care needs to be taken
       to ensure any file descriptor lists are updated immediately within the eventloop when notified.

       The callback argument <u>arg</u> is copied from the <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u> or <u><a href="../man3/ares_send.3.html">ares_send</a>(3)</u> <u>arg</u> parameter.

       The  callback  argument  <u>status</u> indicates whether the query succeeded and, if not, how it failed.  It may
       have any of the following values:

       <b>ARES_SUCCESS</b>       The query completed.

       <b>ARES_EBADQUERY</b>     The query buffer was poorly formed (was not long enough for a DNS header  or  was  too
                          long for TCP transmission).

       <b>ARES_ETIMEOUT</b>      No name servers responded within the timeout period.

       <b>ARES_ECONNREFUSED</b>  No name servers could be contacted.

       <b>ARES_ENOMEM</b>        Memory was exhausted.

       <b>ARES_ECANCELLED</b>    The query was cancelled.

       <b>ARES_EDESTRUCTION</b>  The name service channel <u>channel</u> is being destroyed; the query will not be completed.

       <b>ARES_ENOSERVER</b>     The query will not be completed because no DNS servers were configured on the channel.

       <b>ARES_EBADQUERY</b>     Misformatted DNS query.

       The callback argument <u>timeouts</u> reports how many times a query timed out during the execution of the given
       request.

       If  the  query  completed,  the  callback  argument  <u>dnsrec</u>  for <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u> or <u>abuf</u> and <u>alen</u> for
       <u><a href="../man3/ares_send.3.html">ares_send</a>(3)</u> will be non-NULL.

       Unless the flag <b>ARES_FLAG_NOCHECKRESP</b> was set at channel  initialization  time,  <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u>  and
       <u><a href="../man3/ares_send.3.html">ares_send</a>(3)</u>  will normally ignore responses whose questions do not match the supplied questions, as well
       as responses with reply codes of <b>SERVFAIL</b>, <b>NOTIMP</b>, and <b>REFUSED</b>.  Unlike other query functions in the ares
       library, however, <u><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</u> and <u><a href="../man3/ares_send.3.html">ares_send</a>(3)</u> do not inspect the header of the reply  packet  to
       determine  the  error  status,  so  a  callback status of <b>ARES_SUCCESS</b> does not reflect as much about the
       response as for other query functions.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       <b><a href="../man3/ares_send_dnsrec.3.html">ares_send_dnsrec</a>(3)</b> was introduced in c-ares 1.28.0.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ares_dns_record_create.3.html">ares_dns_record_create</a></b>(3), <b><a href="../man3/ares_process.3.html">ares_process</a></b>(3), <b><a href="../man3/ares_search.3.html">ares_search</a></b>(3), <b><a href="../man3/ares_dns_record.3.html">ares_dns_record</a></b>(3)

                                                  25 July 1998                                      <u><a href="../man3/ARES_SEND.3.html">ARES_SEND</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>