<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       glob, globfree — generate pathnames matching a pattern

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/glob.h">glob.h</a>&gt;

       int glob(const char *restrict <u>pattern</u>, int <u>flags</u>,
           int(*<u>errfunc</u>)(const char *<u>epath</u>, int <u>eerrno</u>),
           glob_t *restrict <u>pglob</u>);
       void globfree(glob_t *<u>pglob</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>glob</u>()  function  is  a  pathname  generator that shall implement the rules defined in the Shell and
       Utilities volume of POSIX.1‐2017, <u>Section</u> <u>2.13</u>, <u>Pattern</u> <u>Matching</u> <u>Notation</u>, with optional support for rule
       3 in the Shell and  Utilities  volume  of  POSIX.1‐2017,  <u>Section</u>  <u>2.13.3</u>,  <u>Patterns</u>  <u>Used</u>  <u>for</u>  <u>Filename</u>
       <u>Expansion</u>.

       The structure type <b>glob_t</b> is defined in <u>&lt;glob.h&gt;</u> and includes at least the following members:
                      ┌───────────────┬──────────────┬─────────────────────────────────────────┐
                      │ <b>Member</b> <b>Type</b>   │ <b>Member</b> <b>Name</b>  │               <b>Description</b>               │
                      ├───────────────┼──────────────┼─────────────────────────────────────────┤
                      │ <b>size_t</b>        │<u>gl_pathc</u>      │ Count of paths matched by <u>pattern</u>.      │
                      │ <b>char</b> <b>**</b>       │<u>gl_pathv</u>      │ Pointer to a list of matched pathnames. │
                      │ <b>size_t</b>        │<u>gl_offs</u>       │ Slots  to  reserve  at the beginning of │
                      │               │              │ <u>gl_pathv</u>.                               │
                      └───────────────┴──────────────┴─────────────────────────────────────────┘

       The argument <u>pattern</u> is a pointer to a pathname pattern to be expanded. The <u>glob</u>() function  shall  match
       all accessible pathnames against this pattern and develop a list of all pathnames that match. In order to
       have  access  to  a  pathname,  <u>glob</u>() requires search permission on every component of a path except the
       last, and read permission on each directory of any filename component of <u>pattern</u> that contains any of the
       following special characters: <b>'*'</b>, <b>'?'</b>, and <b>'['</b>.

       The <u>glob</u>() function shall store the number of matched pathnames into <u>pglob</u>-&gt;<u>gl_pathc</u> and a pointer  to  a
       list  of  pointers  to pathnames into <u>pglob</u>-&gt;<u>gl_pathv</u>. The pathnames shall be in sort order as defined by
       the current setting of the <u>LC_COLLATE</u> category; see the Base Definitions volume of POSIX.1‐2017,  <u>Section</u>
       <u>7.3.2</u>,  <u>LC_COLLATE</u>.   The  first  pointer after the last pathname shall be a null pointer. If the pattern
       does not match any pathnames, the returned number of matched paths is set  to  0,  and  the  contents  of
       <u>pglob</u>-&gt;<u>gl_pathv</u> are implementation-defined.

       It is the caller's responsibility to create the structure pointed to by <u>pglob</u>.  The <u>glob</u>() function shall
       allocate  other  space  as  needed, including the memory pointed to by <u>gl_pathv</u>.  The <u>globfree</u>() function
       shall free any space associated with <u>pglob</u> from a previous call to <u>glob</u>().

       The <u>flags</u> argument is used to control the behavior of <u>glob</u>().  The value of <u>flags</u> is a  bitwise-inclusive
       OR of zero or more of the following constants, which are defined in <u>&lt;glob.h&gt;</u>:

       GLOB_APPEND   Append pathnames generated to the ones from a previous call to <u>glob</u>().

       GLOB_DOOFFS   Make use of <u>pglob</u>-&gt;<u>gl_offs</u>. If this flag is set, <u>pglob</u>-&gt;<u>gl_offs</u> is used to specify how many
                     null  pointers  to add to the beginning of <u>pglob</u>-&gt;<u>gl_pathv</u>. In other words, <u>pglob</u>-&gt;<u>gl_pathv</u>
                     shall point to <u>pglob</u>-&gt;<u>gl_offs</u> null pointers, followed by <u>pglob</u>-&gt;<u>gl_pathc</u> pathname pointers,
                     followed by a null pointer.

       GLOB_ERR      Cause <u>glob</u>() to return when it  encounters  a  directory  that  it  cannot  open  or  read.
                     Ordinarily, <u>glob</u>() continues to find matches.

       GLOB_MARK     Each pathname that is a directory that matches <u>pattern</u> shall have a &lt;slash&gt; appended.

       GLOB_NOCHECK  Supports rule 3 in the Shell and Utilities volume of POSIX.1‐2017, <u>Section</u> <u>2.13.3</u>, <u>Patterns</u>
                     <u>Used</u>  <u>for</u>  <u>Filename</u>  <u>Expansion</u>.   If <u>pattern</u> does not match any pathname, then <u>glob</u>() shall
                     return a list consisting of only <u>pattern</u>, and the number of matched pathnames is 1.

       GLOB_NOESCAPE Disable backslash escaping.

       GLOB_NOSORT   Ordinarily, <u>glob</u>() sorts the matching pathnames according to the  current  setting  of  the
                     <u>LC_COLLATE</u>  category;  see  the  Base  Definitions  volume  of POSIX.1‐2017, <u>Section</u> <u>7.3.2</u>,
                     <u>LC_COLLATE</u>.  When this flag is used, the order of pathnames returned is unspecified.

       The GLOB_APPEND flag can be used to append a new set of pathnames to those found in a  previous  call  to
       <u>glob</u>().   The  following  rules  apply to applications when two or more calls to <u>glob</u>() are made with the
       same value of <u>pglob</u> and without intervening calls to <u>globfree</u>():

        1. The first such call shall not set GLOB_APPEND. All subsequent calls shall set it.

        2. All the calls shall set GLOB_DOOFFS, or all shall not set it.

        3. After the second call, <u>pglob</u>-&gt;<u>gl_pathv</u> points to a list containing the following:

            a. Zero or more null pointers, as specified by GLOB_DOOFFS and <u>pglob</u>-&gt;<u>gl_offs</u>.

            b. Pointers to the pathnames that were in the <u>pglob</u>-&gt;<u>gl_pathv</u> list before  the  call,  in  the  same
               order as before.

            c. Pointers to the new pathnames generated by the second call, in the specified order.

        4. The count returned in <u>pglob</u>-&gt;<u>gl_pathc</u> shall be the total number of pathnames from the two calls.

        5. The  application  can  change  any of the fields after a call to <u>glob</u>().  If it does, the application
           shall reset them to the original value before a subsequent call,  using  the  same  <u>pglob</u>  value,  to
           <u>globfree</u>() or <u>glob</u>() with the GLOB_APPEND flag.

       If, during the search, a directory is encountered that cannot be opened or read and <u>errfunc</u> is not a null
       pointer, <u>glob</u>() calls <u>(</u>()*errfunc ) with two arguments:

        1. The <u>epath</u> argument is a pointer to the path that failed.

        2. The  <u>eerrno</u>  argument  is  the  value  of  <u>errno</u> from the failure, as set by <u>opendir</u>(), <u>readdir</u>(), or
           <u>stat</u>().  (Other values may be used to  report  other  errors  not  explicitly  documented  for  those
           functions.)

       If  <u>(</u>()*errfunc  )  is called and returns non-zero, or if the GLOB_ERR flag is set in <u>flags</u>, <u>glob</u>() shall
       stop the scan and return GLOB_ABORTED after setting <u>gl_pathc</u> and <u>gl_pathv</u> in <u>pglob</u> to reflect  the  paths
       already  scanned. If GLOB_ERR is not set and either <u>errfunc</u> is a null pointer or <u>(</u>()*errfunc ) returns 0,
       the error shall be ignored.

       The <u>glob</u>() function shall not fail because of large files.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, <u>glob</u>() shall return 0. The argument <u>pglob</u>-&gt;<u>gl_pathc</u> shall return  the  number
       of  matched  pathnames and the argument <u>pglob</u>-&gt;<u>gl_pathv</u> shall contain a pointer to a null-terminated list
       of matched and sorted pathnames. However, if <u>pglob</u>-&gt;<u>gl_pathc</u> is 0,  the  content  of  <u>pglob</u>-&gt;<u>gl_pathv</u>  is
       undefined.

       The <u>globfree</u>() function shall not return a value.

       If  <u>glob</u>() terminates due to an error, it shall return one of the non-zero constants defined in <u>&lt;glob.h&gt;</u>.
       The arguments <u>pglob</u>-&gt;<u>gl_pathc</u> and <u>pglob</u>-&gt;<u>gl_pathv</u> are still set as defined above.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>glob</u>() function shall fail and return the corresponding value if:

       GLOB_ABORTED  The scan was stopped because GLOB_ERR was set or <u>(</u>()*errfunc ) returned non-zero.

       GLOB_NOMATCH  The pattern does not match any existing pathname, and GLOB_NOCHECK was not set in flags.

       GLOB_NOSPACE  An attempt to allocate memory failed.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       One use of the GLOB_DOOFFS flag is by applications that build an argument  list  for  use  with  <u>execv</u>(),
       <u>execve</u>(), or <u>execvp</u>().  Suppose, for example, that an application wants to do the equivalent of:

           ls -l *.c

       but for some reason:

           system("ls -l *.c")

       is not acceptable. The application could obtain approximately the same result using the sequence:

           globbuf.gl_offs = 2;
           glob("*.c", GLOB_DOOFFS, NULL, &amp;globbuf);
           globbuf.gl_pathv[0] = "ls";
           globbuf.gl_pathv[1] = "-l";
           execvp("ls", &amp;globbuf.gl_pathv[0]);

       Using the same example:

           ls -l *.c *.h

       could be approximately simulated using GLOB_APPEND as follows:

           globbuf.gl_offs = 2;
           glob("*.c", GLOB_DOOFFS, NULL, &amp;globbuf);
           glob("*.h", GLOB_DOOFFS|GLOB_APPEND, NULL, &amp;globbuf);
           ...

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       This  function  is  not  provided  for the purpose of enabling utilities to perform pathname expansion on
       their arguments, as this operation is performed by the shell, and utilities are explicitly  not  expected
       to  redo  this.  Instead,  it  is provided for applications that need to do pathname expansion on strings
       obtained from other sources, such as a pattern typed by a user or read from a file.

       If a utility needs to see if a pathname matches a given pattern, it can use <u>fnmatch</u>().

       Note that <u>gl_pathc</u> and <u>gl_pathv</u> have meaning even if <u>glob</u>() fails. This allows <u>glob</u>() to  report  partial
       results  in  the event of an error. However, if <u>gl_pathc</u> is 0, <u>gl_pathv</u> is unspecified even if <u>glob</u>() did
       not return an error.

       The GLOB_NOCHECK option could be used when an application wants to expand a  pathname  if  wildcards  are
       specified,  but  wants to treat the pattern as just a string otherwise. The <u>sh</u> utility might use this for
       option-arguments, for example.

       The new pathnames generated by a subsequent call with  GLOB_APPEND  are  not  sorted  together  with  the
       previous  pathnames.  This  mirrors  the  way  that  the  shell  handles pathname expansion when multiple
       expansions are done on a command line.

       Applications that need tilde and parameter expansion should use <u>wordexp</u>().

</pre><h4><b>RATIONALE</b></h4><pre>
       It was claimed that the GLOB_DOOFFS flag is unnecessary because it could be simulated using:

           new = (char **)malloc((n + pglob-&gt;gl_pathc + 1)
                  * sizeof(char *));
           (void) memcpy(new+n, pglob-&gt;gl_pathv,
                  pglob-&gt;gl_pathc * sizeof(char *));
           (void) memset(new, 0, n * sizeof(char *));
           free(pglob-&gt;gl_pathv);
           pglob-&gt;gl_pathv = new;

       However, this assumes that the memory pointed to by <u>gl_pathv</u> is a block that was separately created using
       <u>malloc</u>().  This is not necessarily the case. An application should make  no  assumptions  about  how  the
       memory  referenced by fields in <u>pglob</u> was allocated. It might have been obtained from <u>malloc</u>() in a large
       chunk and then carved up within <u>glob</u>(), or it might have been created using a different memory allocator.
       It is not the intent of the standard developers to specify or imply how the  memory  used  by  <u>glob</u>()  is
       managed.

       The  GLOB_APPEND flag would be used when an application wants to expand several different patterns into a
       single list.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>exec</u>, <u>fdopendir</u>(), <u>fnmatch</u>(), <u>fstatat</u>(), <u>readdir</u>(), <u>Section</u> <u>2.6</u>, <u>Word</u> <u>Expansions</u>

       The Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>7.3.2</u>, <u>LC_COLLATE</u>, <b>&lt;glob.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                          <u><a href="../man3POSIX/GLOB.3POSIX.html">GLOB</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>