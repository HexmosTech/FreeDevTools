<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VM::EC2::Instance::Metadata - Object describing the metadata of a running instance</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvm-ec2-perl">libvm-ec2-perl_1.28-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       VM::EC2::Instance::Metadata - Object describing the metadata of a running instance

</pre><h4><b>SYNOPSIS</b></h4><pre>
        # For use within a running EC2 instance only!

        use VM::EC2::Instance::Metadata;
        my $meta = VM::EC2::Instance::Metadata-&gt;new;

        # alternatively...
        my $meta = VM::EC2-&gt;instance_metadata;
        my $meta = $instance-&gt;metadata;

        # image information
        $image_id  = $meta-&gt;imageId;
        $index     = $meta-&gt;imageLaunchIndex;
        $path      = $meta-&gt;amiManifestPath;
        $location  = $meta-&gt;imageLocation;    # same as previous
        @ancestors = $meta-&gt;ancestorAmiIds;
        @ancestors = $meta-&gt;imageAncestorIds; # same as previous
        @codes     = $meta-&gt;productCodes;

        # launch and runtime information
        $inst_id   = $meta-&gt;instanceId;
        $kern_id   = $meta-&gt;kernelId;
        $rd_id     = $meta-&gt;ramdiskId;
        $res_id    = $meta-&gt;reservationId;
        $type      = $meta-&gt;instanceType;
        $zone      = $meta-&gt;availabilityZone;
        $userdata  = $meta-&gt;userData;
        @groups    = $meta-&gt;securityGroups;
        @keys      = $meta-&gt;publicKeys;
        $block_dev = $meta-&gt;blockDeviceMapping; # a hashref

        # Network information
        $priv_name = $meta-&gt;localHostname;
        $priv_name = $meta-&gt;privateDnsName;   # same as previous
        $priv_ip   = $meta-&gt;localIpv4;
        $priv_ip   = $meta-&gt;privateIpAddress;
        $mac       = $meta-&gt;mac;
        $pub_name  = $meta-&gt;publicHostname;
        $pub_name  = $meta-&gt;dnsName;          # same as previous
        $pub_ip    = $meta-&gt;publicIpv4;
        $pub_ip    = $meta-&gt;ipAddress;
        $interfaces= $meta-&gt;interfaces;       # a hashref

        # IAM information
        $iam_info   = $metadata-&gt;iam_info;         # a hashref
        $iam_role   = $metadata-&gt;iam_role;         # name of the role
        $credentials= $metadata-&gt;iam_credentials;  # VM::EC2::Security::Credentials object

        # Undocumented fields
        $action    = $meta-&gt;instanceAction;
        $profile   = $meta-&gt;profile;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is an interface to the metadata that is provided to a running instance via the
       <a href="http://169.254.169.254/latest">http://169.254.169.254/latest</a> URL, as described in
       <a href="http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/index.html">http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/index.html</a>?instancedata-data-categories.html.

       Each metadata object caches its values, so there is no overhead in calling a method repeatedly. Methods
       return scalar values, lists and hashrefs as appropriate.

       The methods from this class should only be called within the context of a running EC2 instance. Attempts
       to call outside of this context will result in long delays as the module attempts to connect to an
       invalid hostname.

</pre><h4><b>METHODS</b></h4><pre>
   <b>$meta</b> <b>=</b> <b>VM::EC2::Instance::Metadata-&gt;new()</b>
   <b>$meta</b> <b>=</b> <b>$ec2-&gt;instance_metadata()</b>
   <b>$meta</b> <b>=</b> <b>$instance-&gt;metadata()</b>
       You can create a new metadata object either using this class's <b>new()</b> constructor, or by calling an
       VM::EC2 object's <b>instance_metadata()</b> method, or by calling a VM::EC2::Instance object's metadata ()
       method.

   <b>Methods</b> <b>that</b> <b>return</b> <b>scalar</b> <b>values</b>
       The following methods all return single-valued results:

       Image information:
            imageId                -- ID of AMI used to launch this instance
            imageLaunchIndex       -- This index's launch index. If four instances
                                      were launched by one $image-&gt;run_instances()
                                      call, they will be numbered from 0 to 3.
            amiManifestPath        -- S3 path to the image
            imageLocation          -- Same as amiManifestPath(), for consistency with
                                      VM::EC2::Image

       Launch and runtime information:
            instanceId             -- ID of this instance
            kernelId               -- ID of this instance's kernel.
            ramdiskId              -- This instance's ramdisk ID
            reservationId          -- This instance's reservation ID
            instanceType           -- Machine type, e.g. "m1.small"
            availabilityZone       -- This instance's availability zone.
            region                 -- This instance's region.
            endpoint               -- This instance's endpoint.
            userData               -- User data passed at launch time.

       Network information:
            localHostname          -- The instance hostname corresponding to its
                                      internal EC2 IP address.
            privateDnsName         -- Same as localHostname(), for consistency with
                                      VM::EC2::Instance
            localIpv4              -- The instance IP address on the internal EC2 network.
            privateIpAddress       -- Same as localIpv4(), for consistency with
                                      VM::EC2::Instance.
            mac                    -- This instance's MAC (ethernet) address.
            publicHostname         -- This instance's public hostname.
            dnsName                -- Same as publicHostname() for consistency with
                                      VM::EC2::Instance.
            publicIpv4             -- This instance's public IP address.
            ipAddress              -- Same as publicIpv4() for consistency with
                                      VM::EC2::Instance.

       IAM information
           These  routines  return information about the instance's IAM role, if any. These calls also provide a
           temporary    security    credentials    for    making    EC2    calls,     as     described     here:
           <a href="http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/UsingIAM.html">http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/UsingIAM.html</a>.

           Note  that  these routines require installation of the perl JSON module, and will cause a fatal error
           if this module cannot be loaded.

            iam_info               -- Returns a hash containing the fields 'LastUpdated',
                                      'InstanceProfileArn', and 'InstanceProfileId'. These
                                      provide information about the instance's IAM role.
            iam_role               -- Returns the IAM role name for the currently running
                                      instance.
            iam_credentials        -- Returns a VM::EC2::Security::Credentials object that can
                                      be passed to VM::EC2-&gt;new(-security_token=&gt;$credentials).

       Unknown information:
            profile                -- An undocumented field that contains the virtualization
                                      type in the form "default-paravirtual".
            instanceAction         -- Undocumented metadata field named "instance-action"

   <b>Methods</b> <b>that</b> <b>return</b> <b>lists</b>
       The following methods all return lists.

       Image information
            ancestorAmiIds        -- List of  AMIs from which the current one was derived
            imageAncestorIds      -- Same as ancestorAmiIds() but easier to read.
            productCodes          -- List of product codes applying to the image from which
                                     this instance was launched.

       Launch and runtime information
            securityGroups        -- List of security groups to which this instance is assigned.
                                     For non-VPC instances, this will be the security group
                                     name. For VPC instances, this will be the security group ID.
            publicKeys            -- List of public key pair names attached to this instance.

   <b>Methods</b> <b>that</b> <b>return</b> <b>a</b> <b>hashref</b>
       The following methods return a hashref for representing complex data structures:

       $devices = $meta-&gt;blockDeviceMapping
           This returns a hashref in  which  the  keys  are  the  names  of  instance  block  devices,  such  as
           "/dev/sda1", and the values are the EC2 virtual machine names. For example:

            x $meta-&gt;blockDeviceMapping
            0  <a href="../man0x9b4f2f8/HASH.0x9b4f2f8.html">HASH</a>(0x9b4f2f8)
              '/dev/sda1' =&gt; 'root'
              '/dev/sda2' =&gt; 'ephemeral0'
              '/dev/sdg' =&gt; 'ebs1'
              '/dev/sdh' =&gt; 'ebs9'
              '/dev/sdi' =&gt; 'ebs10'
              'sda3' =&gt; 'swap'

           For  reasons  that  are  not  entirely  clear,  the  swap device is reported as "sda3" rather than as
           "/dev/sda3".

       $interfaces = $meta-&gt;interfaces
           Returns a mapping of all virtual ethernet devices owned by this instance. This  is  primarily  useful
           for  VPC  instances, which can have more than one device. The hash keys are the MAC addresses of each
           ethernet device, and the values are hashes that have the following keys:

            mac
            localHostname
            localIpv4s        (an array ref)
            publicIpv4s       (an array ref)
            securityGroupIds  (an array ref)
            subnetId
            subnetIpv4CidrBlock
            vpcId
            vpcIpv4CidrBlock

           For example:

                                                                                                                                                D
            x $meta-&gt;interfaces
            0 <a href="../man0x9b4f518/HASH.0x9b4f518.html">HASH</a>(0x9b4f518)
              '12:31:38:01:b8:97' =&gt; <a href="../man0x9eaa090/HASH.0x9eaa090.html">HASH</a>(0x9eaa090)
                 'localHostname' =&gt; 'domU-12-31-38-01-B8-97.compute-1.internal'
                 'localIpv4s' =&gt; <a href="../man0x9b4f8a8/ARRAY.0x9b4f8a8.html">ARRAY</a>(0x9b4f8a8)
                    0  '10.253.191.101'
                 'mac' =&gt; '12:31:38:01:b8:97'
                 'publicIpv4s' =&gt; <a href="../man0x9ea9e40/ARRAY.0x9ea9e40.html">ARRAY</a>(0x9ea9e40)
                    0  '184.73.241.210'
                 'securityGroupIds' =&gt; <a href="../man0x9eaa490/ARRAY.0x9eaa490.html">ARRAY</a>(0x9eaa490)
                      empty array
                 'subnetId' =&gt; undef
                 'subnetIpv4CidrBlock' =&gt; undef
                 'vpcId' =&gt; undef
                 'vpcIpv4CidrBlock' =&gt; undef

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       VM::EC2 VM::EC2::Generic  VM::EC2::BlockDevice  VM::EC2::State::Reason  VM::EC2::State  VM::EC2::Instance
       VM::EC2::Tag

</pre><h4><b>AUTHOR</b></h4><pre>
       Lincoln Stein &lt;<a href="mailto:lincoln.stein@gmail.com">lincoln.stein@gmail.com</a>&gt;.

       Copyright (c) 2011 Ontario Institute for Cancer Research

       This  package  and  its accompanying libraries is free software; you can redistribute it and/or modify it
       under the terms of the GPL (either version 1, or at your option,  any  later  version)  or  the  Artistic
       License  2.0.   Refer  to  LICENSE  for the full license text. In addition, please see DISCLAIMER.txt for
       disclaimers of warranty.

perl v5.38.2                                       2024-08-10                   <u>VM::EC2::Instance::<a href="../man3pm/Metadata.3pm.html">Metadata</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>