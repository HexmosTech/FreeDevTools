<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VM::EC2::Instance - Object describing an Amazon EC2 instance</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvm-ec2-perl">libvm-ec2-perl_1.28-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       VM::EC2::Instance - Object describing an Amazon EC2 instance

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use VM::EC2;

         $ec2      = VM::EC2-&gt;new(...);
         $instance = $ec2-&gt;describe_instances(-instance_id=&gt;'i-12345');

         $instanceId    = $instance-&gt;instanceId;
         $ownerId       = $instance-&gt;ownerId;
         $reservationId = $instance-&gt;reservationId;
         $imageId       = $instance-&gt;imageId;
         $state         = $instance-&gt;instanceState;
         @groups        = $instance-&gt;groups;
         $private_ip    = $instance-&gt;privateIpAddress;
         $public_ip     = $instance-&gt;ipAddress;
         $private_dns   = $instance-&gt;privateDnsName;
         $public_dns    = $instance-&gt;dnsName;
         $time          = $instance-&gt;launchTime;
         $status        = $instance-&gt;current_status;
         $tags          = $instance-&gt;tags;

         $stateChange = $instance-&gt;start();
         $stateChange = $instance-&gt;stop();
         $stateChange = $instance-&gt;reboot();
         $stateChange = $instance-&gt;terminate();

         $seconds       = $instance-&gt;up_time;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This object represents an Amazon EC2 instance, and is returned by VM::EC2-&gt;<b>describe_instances()</b>. In
       addition to methods to query the instance's attributes, there are methods that allow you to manage the
       instance's lifecycle, including start, stopping, and terminating it.

       Note that the information about security groups and reservations that is returned by <b>describe_instances()</b>
       is copied into each instance before returning it, so there is no concept of a "reservation set" in this
       interface.

</pre><h4><b>METHODS</b></h4><pre>
       These object methods are supported:

        instanceId     -- ID of this instance.

        imageId        -- ID of the image used to launch this instance.

        instanceState  -- The current state of the instance at the time
                          that describe_instances() was called, as a
                          VM::EC2::Instance::State object. Also
                          see the status() method, which re-queries EC2 for
                          the current state of the instance. States are
                          represented in strings as  "terminated", "running",
                          "stopped", "stopping",and "shutting-down".

        privateDnsName -- The private DNS name assigned to the instance within
                          Amazon's EC2 network. This element is defined only
                          for running instances.

        dnsName        -- The public DNS name assigned to the instance, defined
                          only for running instances.

        reason         -- Reason for the most recent state transition,
                          if applicable.

        keyName        -- Name of the associated key pair, if applicable.

        keyPair        -- The VM::EC2::KeyPair object, derived from the keyName

        amiLaunchIndex -- The AMI launch index, which can be used to find
                          this instance within the launch group.

        productCodes   -- A list of product codes that apply to this instance.

        instanceType   -- The instance type, such as "t1.micro". CHANGEABLE.

        launchTime     -- The time the instance launched.

        placement      -- The placement of the instance. Returns a
                          VM::EC2::Instance::Placement object, which when used
                          as a string is equal to the instance's
                          availability zone.

        availabilityZone -- Same as placement.

        kernelId       -- ID of the instance's kernel. CHANGEABLE.

        ramdiskId      -- ID of the instance's RAM disk. CHANGEABLE.

        platform       -- Platform of the instance, either "windows" or empty.

        monitoring     -- State of monitoring for the instance. One of
                          "disabled", "enabled", or "pending". CHANGEABLE:
                          pass true or "enabled" to turn on monitoring. Pass
                          false or "disabled" to turn it off.

        subnetId       -- The Amazon VPC subnet ID in which the instance is
                          running, for Virtual Private Cloud instances only.

        vpcId          -- The Virtual Private Cloud ID for VPC instances.

        privateIpAddress -- The private (internal Amazon) IP address assigned
                          to the instance.

        ipAddress      -- The public IP address of the instance.

        sourceDestCheck -- Whether source destination checking is enabled on
                          this instance. This returns a Perl boolean rather than
                          the string "true". This method is used in conjunction
                          with VPC NAT functionality. See the Amazon VPC User
                          Guide for details. CHANGEABLE.

        networkInterfaceSet -- Return list of VM::EC2::ElasticNetworkInterface objects
                          attached to this instance.

        iamInstanceProfile -- The IAM instance profile (IIP) associated with this instance.

        ebsOptimized       -- True if instance is optimized for EBS I/O.

        groupSet       -- List of VM::EC2::Group objects indicating the VPC
                          security groups in which this instance resides. Not to be
                          confused with groups(), which returns the security groups
                          of non-VPC instances.

        stateReason    -- A VM::EC2::Instance::State::Reason object which
                          indicates the reason for the instance's most recent
                          state change. See <a href="http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-ItemType-StateReasonType.html">http://docs.amazonwebservices.com/AWSEC2/latest/APIReference/ApiReference-ItemType-StateReasonType.html</a>

        architecture   -- The architecture of the image. Either "i386" or "x86_64".

        rootDeviceType -- The type of the root device used by the instance. One of "ebs"
                          or "instance-store".

        rootDeviceName -- The name of the the device used by the instance, such as /dev/sda1.
                          CHANGEABLE.

        blockDeviceMapping -- The block device mappings for the instance, represented
                          as a list of L&lt;VM::EC2::BlockDevice::Mapping&gt; objects.

        instanceLifeCycle -- "spot" if this instance is a spot instance, otherwise empty.

        spotInstanceRequestId -- The ID of the spot instance request, if applicable.

        virtualizationType -- Either "paravirtual" or "hvm".

        clientToken    -- The idempotency token provided at the time of the AMI launch,
                          if any.

        hypervisor     -- The instance's hypervisor type, either "ovm" or "xen".

        userData       -- User data passed to instance at launch. CHANGEABLE.

        disableApiTermination -- True if the instance is protected from termination
                          via the console or command-line APIs. CHANGEABLE.

        instanceInitiatedShutdownBehavior -- Action to take when the instance calls
                          shutdown or halt. One of "stop" or "terminate". CHANGEABLE.

        sriovNetSupport -- Specifies whether enhanced networking is enabled.  "simple" if so.

        tagSet         -- Tags for the instance as a hashref. CHANGEABLE via add_tags()
                          and delete_tags().

       The object also supports the <b>tags()</b> method described in VM::EC2::Generic:

        print "ready for production\n" if $image-&gt;tags-&gt;{Released};

       All methods return read-only values except for those marked CHANGEABLE in the list above. For these, you
       can change the instance attribute on stopped instances by invoking the method with an appropriate new
       value. For example, to change the instance type from "t1.micro" to "m1.small", you can do this:

        my @tiny_instances = $ec2-&gt;describe_instances(-filter=&gt;{'instance-type'=&gt;'t1.micro'});
        for my $i (@tiny_instances) {
           next unless $i-&gt;instanceState eq 'stopped';
           $i-&gt;instanceType('m1.small') or die $ec2-&gt;error;
        }

       When you attempt to change an attribute of an instance, the method will return true on success, false on
       failure. On failure, the detailed error messages can be recovered from the VM::EC2 object's <b>error()</b>
       method.

</pre><h4><b>LIFECYCLE</b> <b>METHODS</b></h4><pre>
       In addition, the following convenience functions are provided

   <b>$state</b> <b>=</b> <b>$instance-&gt;current_status</b>
       This method queries AWS for the instance's current state and returns it as a VM::EC2::Instance::State
       object. This enables you to poll the instance until it is in the desired state:

        while ($instance-&gt;current_status eq 'pending') { sleep 5 }

   <b>$state</b> <b>=</b> <b>$instance-&gt;current_state</b>
       An alias for <b>current_status()</b>.

   <b>$state_change</b> <b>=</b> <b>$instance-&gt;start([$wait])</b>
       This method will start the current instance and returns a VM::EC2::Instance::State::Change object that
       can be used to monitor the status of the instance. By default the method returns immediately, but you can
       pass a true value as an argument in order to pause execution until the instance is in the "running"
       state.

       Here's a polling example:

         $state = $instance-&gt;start;
         while ($state-&gt;status eq 'pending') { sleep 5 }

       Here's an example that will pause until the instance is running:

         $instance-&gt;<a href="../man1/start.1.html">start</a>(1);

       Attempting to start an already running instance, or one that is in transition, will throw a fatal error.

   <b>$state_change</b> <b>=</b> <b>$instance-&gt;stop([$wait])</b>
       This method is similar to <b>start()</b>, except that it can be used to stop a running instance.

   <b>$state_change</b> <b>=</b> <b>$instance-&gt;terminate([$wait])</b>
       This method is similar to <b>start()</b>, except that it can be used to terminate an instance. It can only be
       called on instances that are either "running" or "stopped".

   <b>$state_change</b> <b>=</b> <b>$instance-&gt;reboot()</b>
       Reboot the instance. Rebooting doesn't occur immediately; instead the request is queued by the Amazon
       system and may be satisfied several minutes later. For this reason, there is no "wait" argument.

   <b>$seconds</b> <b>=</b> <b>$instance-&gt;up_time()</b>
       Return the number of seconds since the instance was launched. Note that this includes time that the
       instance was either in the "running" or "stopped" state.

   <b>$result</b> <b>=</b> <b>$instance-&gt;associate_address($elastic_address)</b>
       Associate an elastic address with this instance. If you are associating a VPC elastic IP address with the
       instance, the result code will indicate the associationId. Otherwise it will be a simple perl truth value
       ("1") if successful, undef if false.

       In the case of an ordinary EC2 Elastic IP address, the first argument may either be an ordinary string
       (xx.xx.xx.xx format) or a VM::EC2::ElasticAddress object. However, if it is a VPC elastic IP address,
       then the argument must be a VM::EC2::ElasticAddress as returned by <b>describe_addresses()</b>. The reason for
       this is that the allocationId must be retrieved from the object in order to use in the call.

   <b>$bool</b> <b>=</b> <b>$instance-&gt;disassociate_address</b>
       Disassociate an elastic IP address from this instance. if any. The result will be true if disassociation
       was successful. Note that for a short period of time (up to a few minutes) after disassociation, the
       instance will have no public IP address and will be unreachable from the internet.

   <b>@list</b> <b>=</b> <b>$instance-&gt;network_interfaces</b>
       Return the network interfaces attached to this instance as a set of VM::EC2::NetworkInterface objects
       (VPC only).

   <b>$instance-&gt;refresh</b>
       This method will refresh the object from AWS, updating all values to their current ones. You can call it
       after starting an instance in order to get its IP address. Note that <b>refresh()</b> is called automatically
       for you if you call <b>start()</b>, <b>stop()</b> or <b>terminate()</b> with a true $wait argument.

   <b>$text</b> <b>=</b> <b>$instance-&gt;console_output</b>
       Return the console output of the instance as a VM::EC2::ConsoleOutput object. This object can be treated
       as a string, or as an object with methods

</pre><h4><b>CREATING</b> <b>IMAGES</b></h4><pre>
       The <b>create_image()</b> method provides a handy way of creating and registering an AMI based on the current
       state of the instance. All currently-associated block devices will be snapshotted and associated with the
       image.

       Note that this operation can take a long time to complete. You may follow its progress by calling the
       returned image object's <b>current_status()</b> method.

   <b>create_image($name</b> <b>[,$description])</b>
       $imageId = $instance-&gt;create_image($name [,$description])

   <b>create_image(name,description,no_reboot)</b>
       $imageId = $instance-&gt;create_image(-name=&gt;$name,-description=&gt;$description,-no_reboot=&gt;$boolean)

       Create an image from this instance and return a VM::EC2::Image object.  The instance must be in the
       "stopped" or "running" state. In the latter case, Amazon will stop the instance, create the image, and
       then restart it unless the -no_reboot argument is provided.

       Arguments:

        -name           Name for the image that will be created. (required)
        -description    Description of the new image.
        -no_reboot      If true, don't reboot the instance.

       In the unnamed argument version you can provide the name and optionally the description of the resulting
       image.

   <b>$boolean</b> <b>=</b> <b>$instance-&gt;confirm_product_code($product_code)</b>
       Return true if this instance is associated with the given product code.

</pre><h4><b>VOLUME</b> <b>MANAGEMENT</b></h4><pre>
   <b>$attachment</b> <b>=</b> <b>$instance-&gt;attach_volume($volume_id,$device)</b>
   <b>$attachment</b> <b>=</b> <b>$instance-&gt;attach_volume(-volume_id=&gt;$volume_id,-device=&gt;$device)</b>
       Attach volume $volume_id to this instance using virtual device $device. Both arguments are required. The
       result is a VM::EC2::BlockDevice::Attachment object which you can monitor by calling <b>current_status()</b>:

           my $a = $instance-&gt;attach_volume('vol-12345'=&gt;'/dev/sdg');
           while ($a-&gt;current_status ne 'attached') {
              sleep 2;
           }
           print "volume is ready to go\n";

   <b>$attachment</b> <b>=</b> <b>$instance-&gt;detach_volume($vol_or_device)</b>
   <b>$attachment</b> <b>=</b> <b>$instance-&gt;detach_volume(-volume_id</b> <b>=&gt;</b> <b>$volume_id</b> <b>-device</b>    <b>=&gt;</b> <b>$device,</b> <b>-force</b>     <b>=&gt;</b> <b>$force);</b>

       Detaches the specified volume. In the single-argument form, you may provide either a volume or a device
       name. In the named-argument form, you may provide both the volume and the device as a check that you are
       detaching exactly the volume you think you are.

       Optional arguments:

        -volume_id      -- ID of the instance to detach from.
        -device         -- How the device is exposed to the instance.
        -force          -- Force detachment, even if previous attempts were
                           unsuccessful.

       The result is a VM::EC2::BlockDevice::Attachment object which you can monitor by calling
       <b>current_status()</b>:

           my $a = $instance-&gt;detach_volume('/dev/sdg');
           while ($a-&gt;current_status ne 'detached') {
              sleep 2;
           }
           print "volume is ready to go\n";

</pre><h4><b>NETWORK</b> <b>INTERFACE</b> <b>MANAGEMENT</b></h4><pre>
   <b>$attachment_id</b> <b>=</b> <b>$instance-&gt;attach_network_interface($interface_id</b> <b>=&gt;</b> <b>$device)</b>
   <b>$attachment_id</b> <b>=</b> <b>$instance-&gt;attach_network_interface(-network_interface_id=&gt;$id,</b> <b>-device_index</b>   <b>=&gt;</b> <b>$device)</b>
       This method attaches a network interface to the current instance using the indicated device index. You
       can use either an elastic network interface ID, or a VM::EC2::NetworkInterface object. You may use an
       integer for -device_index, or use the strings "eth0", "eth1" etc.

       Required arguments:

        -network_interface_id ID of the network interface to attach.
        -device_index         Network device number to use (e.g. 0 for eth0).

       On success, this method returns the attachmentId of the new attachment (not a
       VM::EC2::NetworkInterface::Attachment object, due to an AWS API inconsistency).

   <b>$boolean</b> <b>=</b> <b>$instance-&gt;detach_network_interface($interface_id</b> <b>[,$force])</b>
       This method detaches a network interface from the current instance. If a true second argument is
       provided, then the detachment will be forced, even if the interface is in use.

       On success, this method returns a true value.

</pre><h4><b>ACCESSING</b> <b>INSTANCE</b> <b>METADATA</b></h4><pre>
   <b>$meta</b> <b>=</b> <b>$instance-&gt;metadata</b>
       <b>For</b> <b>use</b> <b>on</b> <b>running</b> <b>EC2</b> <b>instances</b> <b>only:</b> This method returns a VM::EC2::Instance::Metadata object that will
       return information about the currently running instance using the HTTP:// metadata fields described at
       <a href="http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/index.html">http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/index.html</a>?instancedata-data-categories.html.
       This is usually fastest way to get runtime information on the current instance.

</pre><h4><b>STRING</b> <b>OVERLOADING</b></h4><pre>
       When used in a string context, this object will interpolate the instanceId.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       VM::EC2 VM::EC2::Generic VM::EC2::BlockDevice VM::EC2::Instance::State VM::EC2::Instance::State::Reason
       VM::EC2::Instance::Metadata VM::EC2::Instance::Placement VM::EC2::Tag

</pre><h4><b>AUTHOR</b></h4><pre>
       Lincoln Stein &lt;<a href="mailto:lincoln.stein@gmail.com">lincoln.stein@gmail.com</a>&gt;.

       Copyright (c) 2011 Ontario Institute for Cancer Research

       This package and its accompanying libraries is free software; you can redistribute it and/or modify it
       under the terms of the GPL (either version 1, or at your option, any later version) or the Artistic
       License 2.0.  Refer to LICENSE for the full license text. In addition, please see DISCLAIMER.txt for
       disclaimers of warranty.

perl v5.38.2                                       2024-08-10                             <u>VM::EC2::<a href="../man3pm/Instance.3pm.html">Instance</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>