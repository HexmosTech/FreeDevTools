<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tracefs_trace_is_on, tracefs_trace_on, tracefs_trace_off, tracefs_trace_on_get_fd, tracefs_trace_on_fd,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtracefs-doc">libtracefs-doc_1.8.1-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tracefs_trace_is_on, tracefs_trace_on, tracefs_trace_off, tracefs_trace_on_get_fd, tracefs_trace_on_fd,
       tracefs_trace_off_fd - Functions to enable or disable tracing.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tracefs.h&gt;</b>

       int <b>tracefs_trace_is_on</b>(struct tracefs_instance *<u>instance</u>);
       int <b>tracefs_trace_on</b>(struct tracefs_instance *<u>instance</u>);
       int <b>tracefs_trace_off</b>(struct tracefs_instance *<u>instance</u>);
       int <b>tracefs_trace_on_get_fd</b>(struct tracefs_instance *<u>instance</u>);
       int <b>tracefs_trace_on_fd</b>(int <u>fd</u>);
       int <b>tracefs_trace_off_fd</b>(int <u>fd</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This set of functions can be used to check, enable or disable writing to the ring buffer in the given
       trace instance. The tracing is enabled when writing to the ring buffer is enabled.

       The <b>tracefs_trace_is_on()</b> function checks if tracing is enabled for the given <u>instance</u>. If <u>instance</u> is
       NULL, the top instance is used.

       The <b>tracefs_trace_on()</b> and <b>tracefs_trace_off()</b> functions set the tracing in the <u>instance</u> to enable or
       disable state. If <u>instance</u> is NULL, the top instance is used.

       The <b>tracefs_trace_on_get_fd()</b> function returns a file descriptor to the "tracing_on" file from the given
       <u>instance</u>. If <u>instance</u> is NULL, the top trace instance is used. The returned descriptor can be used for
       fast enabling or disabling the tracing of the instance.

       The <b>tracefs_trace_on_fd()</b> and <b>tracefs_trace_off_fd()</b> functions set the tracing state to enable or disable
       using the given <u>fd</u>. This file descriptor must be opened for writing with <b><a href="../man3/tracefs_trace_on_get_fd.3.html">tracefs_trace_on_get_fd</a></b>(3) of
       the desired trace instance. These functions are faster than <b>tracefs_trace_on</b> and <b>tracefs_trace_off</b>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>tracefs_trace_is_on()</b> function returns 0 if tracing is disable, 1 if it is enabled or -1 in case of
       an error.

       The <b>tracefs_trace_on_get_fd()</b> function returns a file descriptor to "tracing_on" file for reading and
       writing, which must be closed wuth close(). In case of an error -1 is returned.

       The <b>tracefs_trace_on()</b>, <b>tracefs_trace_off()</b>, <b>tracefs_trace_on_fd()</b> and <b>tracefs_trace_off_fd()</b> functions
       return -1 in case of an error or 0 otherwise.

</pre><h4><b>EXAMPLE</b></h4><pre>
           #include &lt;tracefs.h&gt;

                   int ret;

                   ret = tracefs_trace_is_on(NULL);
                   if (ret == 0) {
                           /* Tracing is disabled in the top instance */
                   } else if (ret == 1) {
                           /* Tracing is enabled in the top instance */
                   } else {
                           /* Error getting tracing state of the top instance */
                   }

                   ...

                   if (!tracefs_trace_on(NULL)) {
                       /* Enabled tracing in the top instance */

                       ...

                       if (!tracefs_trace_off(NULL)) {
                           /* Disabled tracing in the top instance */
                       } else {
                           /* Error disabling tracing in the top instance */
                       }
                   } else {
                           /* Error enabling tracing in the top instance */
                   }

                   ...

                   int fd = tracefs_trace_on_get_fd(NULL);

                   if (fd &lt; 0) {
                           /* Error opening tracing_on file */
                   }
                   ...
                   if (!tracefs_trace_on_fd(fd)) {
                       /* Enabled tracing in the top instance */

                       ...

                       if (!tracefs_trace_off_fd(fd)) {
                           /* Disabled tracing in the top instance */
                       } else {
                           /* Error disabling tracing in the top instance */
                       }
                   } else {
                           /* Error enabling tracing in the top instance */
                   }

                   ...

                   close(fd);

</pre><h4><b>FILES</b></h4><pre>
           <b>tracefs.h</b>
                   Header file to include in order to have access to the library APIs.
           <b>-ltracefs</b>
                   Linker switch to add when building a program that uses the library.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libtracefs.3.html">libtracefs</a></b>(3), <b><a href="../man3/libtraceevent.3.html">libtraceevent</a></b>(3), <b><a href="../man1/trace-cmd.1.html">trace-cmd</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
           <b>Steven</b> <b>Rostedt</b> &lt;<b><a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a></b>[1]&gt;
           <b>Tzvetomir</b> <b>Stoyanov</b> &lt;<b><a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a></b>[2]&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<b><a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a></b>[3]&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       libtracefs is Free Software licensed under the GNU LGPL 2.1

</pre><h4><b>RESOURCES</b></h4><pre>
       <b>https://git.kernel.org/pub/scm/libs/libtrace/libtracefs.git/</b>

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2021 VMware, Inc. Free use of this software is granted under the terms of the GNU Public
       License (GPL).

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a>
           <a href="mailto:rostedt@goodmis.org">mailto:rostedt@goodmis.org</a>

        2. <a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a>
           <a href="mailto:tz.stoyanov@gmail.com">mailto:tz.stoyanov@gmail.com</a>

        3. <a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a>
           <a href="mailto:linux-trace-devel@vger.kernel.org">mailto:linux-trace-devel@vger.kernel.org</a>

libtracefs 1.8.1                                   06/05/2025                                      <u><a href="../man3/LIBTRACEFS.3.html">LIBTRACEFS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>