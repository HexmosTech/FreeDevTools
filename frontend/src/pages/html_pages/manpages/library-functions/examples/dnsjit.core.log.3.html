<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dnsjit.core.log - Core logging facility</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dnsjit">dnsjit_1.5.0-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dnsjit.core.log - Core logging facility

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Usage</b> <b>to</b> <b>control</b> <b>global</b> <b>log</b> <b>level</b>
         local log = require("dnsjit.core.log")
         log.enable("all")
         log.disable("debug")

   <b>Usage</b> <b>to</b> <b>control</b> <b>module</b> <b>log</b> <b>level</b>
         local example = require("example") -- Example as below
         example.log():enable("all")
         example.log():disable("debug")

   <b>Usage</b> <b>to</b> <b>control</b> <b>object</b> <b>instance</b> <b>log</b> <b>level</b>
         local example = require("example") -- Example as below
         local obj = example.new()
         obj:log():enable("all")
         obj:log():disable("debug")

   <b>Usage</b> <b>in</b> <b>C</b> <b>module</b>
       <b>NOTE</b>  naming  of  variables and module only globals are required to exactly as described in order for the
       macros to work; <b>self</b> is the pointer to the object instance, <b>self-&gt;_log</b> is  the  object  instance  logging
       configuration struct, <b>_log</b> is the module logging configuration struct.

       Include logging:
         #include "core/log.h"

       Add the logging struct to the module struct:
         typedef struct example {
             core_log_t _log;
             ...
         } example_t;

       Add a module logging configuration and a struct default:
         static core_log_t _log = LOG_T_INIT("example");
         static example_t _defaults = {
             LOG_T_INIT_OBJ("example"),
             ...
         };

       Use new/free and/or init/destroy functions (depends if you create the object in Lua or not):
         example_t* example_new() {
             example_t* self = calloc(1, sizeof(example_t));

             *self = _defaults;
             ldebug("new()");

             return self;
         }

         void example_free(example_t* self) {
             ldebug("free()");
             free(self);
         }

         int example_init(example_t* self) {
             *self = _defaults;

             ldebug("init()");

             return 0;
         }

         void example_destroy(example_t* self) {
             ldebug("destroy()");
             ...
         }

       In the Lua part of the C module you need to create a function that returns either the object instance Log
       or the modules Log.

       Add C function to get module only Log:
         core_log_t* example_log() {
             return &amp;_log;
         }

       For the structures metatable add the following function:
         local ffi = require("ffi")
         local C = ffi.C

         function Example:log()
             if self == nil then
                 return C.example_log()
             end
             return self._log
         end

   <b>Usage</b> <b>in</b> <b>pure</b> <b>Lua</b> <b>module</b>
         local log = require("dnsjit.core.log")
         local ffi = require("ffi")
         local C = ffi.C

         local Example = {}
         local module_log = log.new("example")

         function Example.new()
             local self = setmetatable({
                 _log = log.new("example", module_log),
             }, { __index = Example })

             self._log:debug("new()")

             return self
         end

         function Example:log()
             if self == nil then
                 return module_log
             end
             return self._log
         end

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Core logging facility used by all modules.

   <b>Log</b> <b>levels</b>
       all    Keyword to enable/disable all changeable log levels.

       debug  Used for debug information.

       info   Used for informational processing messages.

       notice Used for messages of that may have impact on processing.

       warning
              Used for messages that has impact on processing.

       critical
              Used for messages that have severe impact on processing, this level can not be disabled.

       fatal  Used  to  display  a  message  before  stopping all processing and existing, this level can not be
              disabled.

   <b>C</b> <b>macros</b>
       Object instance macros
              The  following  macros   uses   <u>&amp;self-&gt;_log</u>:   <b>ldebug(msg...)</b>,   <b>linfo(msg...)</b>,   <b>lnotice(msg...)</b>,
              <b>lwarning(msg...)</b>, <b>lcritical(msg...)</b>, <b>lfatal(msg...)</b>.

       Object pointer instance macros
              The   following   macros   uses  <u>self-&gt;_log</u>:  <b>lpdebug(msg...)</b>,  <b>lpinfo(msg...)</b>,  <b>lpnotice(msg...)</b>,
              <b>lpwarning(msg...)</b>, <b>lpcritical(msg...)</b>, <b>lpfatal(msg...)</b>.

       Module macros
              The   following   macros   uses   <u>&amp;_log</u>:   <b>mldebug(msg...)</b>,   <b>mlinfo(msg...)</b>,    <b>mlnotice(msg...)</b>,
              <b>mlwarning(msg...)</b>, <b>mlcritical(msg...)</b>, <b>mlfatal(msg...)</b>.

       Global macros
              The  following  macros  uses  the  global  logging configuration: <b>gldebug(msg...)</b>, <b>glinfo(msg...)</b>,
              <b>glnotice(msg...)</b>, <b>glwarning(msg...)</b>, <b>glcritical(msg...)</b>, <b>glfatal(msg...)</b>.

   <b>Functions</b>
       <b>Log.new</b>(name, module)
              Create a new Log object with the given module <u>name</u> and an optional shared <u>module</u> Log object.

       <b>Log:enable</b>(level)
              Enable specified log level.

       <b>Log:disable</b>(level)
              Disable specified log level.

       <b>Log:clear</b>(level)
              Clear specified log level, which means it will revert back to default or inherited settings.

       <b>Log:display_file_line</b>(bool)
              Enable or disable the displaying of file and line for messages.

       <b>Log.errstr</b>(errno)
              Convert error number to its text representation.

       <b>Log.debug</b>(self, ...)
              Generate a debug message.

       <b>Log.info</b>(self, ...)
              Generate an info message.

       <b>Log.notice</b>(self, ...)
              Generate a notice message.

       <b>Log.warning</b>(self, ...)
              Generate a warning message.

       <b>Log.critical</b>(self, ...)
              Generate a critical message.

       <b>Log.fatal</b>(self, ...)
              Generate a fatal message.

</pre><h4><b>AUTHORS</b> <b>and</b> <b>CONTRIBUTORS</b></h4><pre>
       Jerry Lundström (DNS-OARC), Tomáš Křížek (CZ.NIC), Petr Špaček (ISC)

       Maintained by DNS-OARC

              <u>https://www.dns-oarc.net/</u>

</pre><h4><b>BUGS</b></h4><pre>
       For issues and feature requests please use:

              <u>https://github.com/DNS-OARC/dnsjit/issues</u>

       For question and help please use:

              <u><a href="mailto:admin@dns-oarc.net">admin@dns-oarc.net</a></u>

dnsjit                                                1.5.0                                   <u><a href="../man3/dnsjit.core.log.3.html">dnsjit.core.log</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>