<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config::Model::Instance - Instance of configuration tree</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libconfig-model-perl">libconfig-model-perl_2.155-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Config::Model::Instance - Instance of configuration tree

</pre><h4><b>VERSION</b></h4><pre>
       version 2.155

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Config::Model;
        use File::Path ;

        # setup a dummy popcon conf file
        my $wr_dir = '/tmp/etc/';
        my $conf_file = "$wr_dir/popularity-contest.conf" ;

        unless (-d $wr_dir) {
            mkpath($wr_dir, { mode =&gt; 0755 })
              || die "can't mkpath $wr_dir: $!";
        }
        open(my $conf,"&gt; $conf_file" ) || die "can't open $conf_file: $!";
        $conf-&gt;print( qq!MY_HOSTID="aaaaaaaaaaaaaaaaaaaa"\n!,
          qq!PARTICIPATE="yes"\n!,
          qq!USEHTTP="yes" # always http\n!,
          qq!DAY="6"\n!);
        $conf-&gt;close ;

        my $model = Config::Model-&gt;new;

        # PopCon model is provided. Create a new Config::Model::Instance object
        my $inst = $model-&gt;instance (root_class_name   =&gt; 'PopCon',
                                     root_dir          =&gt; '<a href="file:/tmp">/tmp</a>',
                                    );
        my $root = $inst -&gt; config_root ;

        print $root-&gt;describe;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides an object that holds a configuration tree.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       An instance object is created by calling instance method on an existing model. This model can be
       specified by its application name:

        my $inst = $model-&gt;instance (
          # run 'cme list' to get list of applications
          application =&gt; 'foo',
          # optional
          instance_name =&gt; 'test1'
        );

        my $inst = $model-&gt;instance (
          root_class_name =&gt; 'SomeRootClass',
          instance_name =&gt; 'test1'
        );

       The directory (or directories) holding configuration files is specified within the configuration model.
       For test purpose you can change the "root" directory with "root_dir" parameter.

       Constructor parameters are:

       root_dir
           Pseudo  root  directory  where  to  read <u>and</u> write configuration files (Path::Tiny object or string).
           Configuration directory specified in model or with "config_dir"  option  is  appended  to  this  root
           directory

       root_path
           Path::Tiny object created with "root_dir" value or with current directory if "root_dir" is empty.

       config_dir
           Directory to read or write configuration file. This parameter must be supplied if not provided by the
           configuration model. (string)

       backend_arg
           Specify  a  backend  argument  that may be retrieved by some backend. Instance is used as a relay and
           does not use this data.

       check
           Specify whether to check value while reading config files. Either:

           yes Check value and throws an error for bad values.

           skip
               Check value and skip bad value.

           no  Do not check.

       canonical
           When true: write config data back using model order. By default, write items  back  using  the  order
           found in the configuration file. This feature is experimental and not supported by all backends.

       on_change_cb
           Call  back  this  function  whenever "notify_change" is called. Called with arguments: "name =&gt; &lt;root
           node element name&gt;, index =&gt; &lt;index_value&gt;"

       on_message_cb
           Call back this function when show_message is called. By default, messages are displayed on STDOUT.

       error_paths
           Returns a list of tree items that currently have an error.

       error_messages
           Returns a list of error messages from the tree content.

       Note that the root directory specified  within  the  configuration  model  is  overridden  by  "root_dir"
       parameter.

       If  you  need to load configuration data that are not correct, you can use "force_load =&gt; 1". Then, wrong
       data are discarded (equivalent to "check =&gt; 'no'" ).

</pre><h4><b>METHODS</b></h4><pre>
   <b>Manage</b> <b>configuration</b> <b>data</b>
   <b>modify</b>
       Calls "load" and then "save".

       Takes the same parameter as "load" plus:

       "force_write"
           Force saving configuration file even if no value was modified (default is 0)

       "quiet"
           Do no display the changes brought by the modification steps

   <b>load</b>
       Load configuration tree with configuration data. See  "load"  in  Config::Model::Loader  for  parameters.
       Returns &lt;$self&gt;.

   <b>save</b>
       Save the content of the configuration tree to configuration files. (See "write_back" for more details)

       Use "force =&gt; 1" option to force saving configuration data.

   <b>config_root</b>
       Returns the root object of the configuration tree.

   <b>apply_fixes</b>
       Scan  the  tree  and  apply  fixes  that  are attached to warning specifications.  See "warn_if_match" or
       "warn_unless_match" in "" in Config::Model::Value.

   <b>deep_check</b>
       Scan the tree and deep check on all elements that support this. Currently only hash or list element  have
       this feature.

   <b>needs_save</b>
       Returns  1  (or  more) if the instance contains data that needs to be saved. I.e some change were done in
       the tree that needs to be saved.

   <b>has_changes</b>
       Returns true if the instance contains unsasved changes.

   <b>list_changes</b>
       In list context, returns a array ref of strings describing the changes.  In scalar context, returns a big
       string. Useful to print.

   <b>say_changes</b>
       Print all changes on STDOUT and return $self.

   <b>clear_changes</b>
       Clear list of changes. Note that changes pending in the configuration tree is not affected.  This  clears
       only the list shown to user. Use only for tests.

   <b>has_warning</b>
       Returns the number of warning found in the elements of this configuration instance.

   <b>update</b>
       Parameters: "( quiet =&gt; (0|1), %args )"

       Try  to  run  update  command  on  all  nodes of the configuration tree. Node without "update" method are
       ignored. "update" prints a message otherwise (unless "quiet" is true).

   <b>grab</b>
       Use the steps parameter to retrieve and returns an object from  the  configuration  tree.   Forwarded  to
       "grab" in Config::Model::Role::Grab

   <b>grab_value</b>
       Use  the  steps parameter to retrieve and returns the value of a leaf object from the configuration tree.
       Forwarded to "grab_value" in Config::Model::Role::Grab

   <b>searcher</b>
       Returns an object dedicated to search an element in the configuration model.

       This method returns a Config::Model::Searcher object. See Config::Model::Searcher for details on  how  to
       handle a search.

   <b>iterator</b>
       This method returns a Config::Model::Iterator object. See Config::Model::Iterator for details.

       Arguments are explained in  Config::Model::Iterator constructor arguments.

   <b>application</b>
       Returns the application name of the instance. (E.g "popcon", "dpkg" ...)

   <b>wizard_helper</b>
       Deprecated. Call "iterator" instead.

</pre><h4><b>Internal</b> <b>methods</b></h4><pre>
   <b>name</b>
       Returns the instance name.

   <b>read_check</b>
       Returns  which  kind  of  check is performed while reading configuration files. (see "check" parameter in
       "CONSTRUCTOR" section)

   <b>show_message</b>
       Parameters: "( string )"

       Display the message on STDOUT unless a custom function was passed to "on_message_cb" parameter.

   <b>reset_config</b>
       Destroy current configuration tree (with data) and returns a new tree with data (and annotations)  loaded
       from disk.

   <b>config_model</b>
       Returns the model (Config::Model object) of the configuration tree.

   <b>annotation_saver</b>
       Returns the object loading and saving annotations. See Config::Model::Annotation for details.

   <b>preset_start</b>
       All values stored in preset mode are shown to the user as default values. This feature is useful to enter
       configuration data entered by an automatic process (like hardware scan)

   <b>preset_stop</b>
       Stop preset mode

   <b>preset</b>
       Get preset mode

   <b>preset_clear</b>
       Clear all preset values stored.

   <b>layered_start</b>
       All  values  stored  in  layered  mode are shown to the user as default values. This feature is useful to
       enter configuration data entered by an automatic process (like hardware scan)

   <b>layered_stop</b>
       Stop layered mode

   <b>layered</b>
       Get layered mode

   <b>layered_clear</b>
       Clear all layered values stored.

   <b>get_data_mode</b>
       Returns 'normal' or 'preset' or 'layered'. Does not take into account initial_load.

   <b>initial_load_start</b>
       Start initial_load mode. This mode tracks the first modifications of the tree done with  data  read  from
       the configuration file.

       Instance is built with initial_load as 1. Read backend clears this value once the first read is done.

       Other modifications, when initial_load is zero, are assumed to be user modifications.

   <b>initial_load_stop</b>
       Stop initial_load mode. Instance is built with initial_load as 1. Read backend clears this value once the
       first read is done.

   <b>initial_load</b>
       Get initial_load mode

   <b>data</b>
       This method provides a way to store some arbitrary data in the instance object.

       E.g:

         $instance-&gt;data(foo =&gt; 'bar');

       Later:

         my $foo = $instance-&gt;data('foo'); # $foo contains 'bar'

</pre><h4><b>Read</b> <b>and</b> <b>write</b> <b>backend</b> <b>features</b></h4><pre>
       Usually,  a  program  based  on  config  model  must  first create the configuration model, then load all
       configuration data.

       This feature enables you to declare with the model a way to load configuration  data  (and  to  write  it
       back). See Config::Model::BackendMgr for details.

   <b>backend_arg</b>
       Get cme command line argument that may be used by the backend to get the configuration file. These method
       is  typically  used  in the read and write method of a backend to know where is the configuration file to
       edit.

   <b>root_dir</b>
       Returns a Path::Tiny object for the root directory where configuration data is read from or written to.

   <b>root_path</b>
       Same as "root_dir"

   <b>register_write_back</b>
       Parameters: "( node_location )"

       Register a node path that is called back with "write_back" method.

   <b>notify_change</b>
       Notify that some data has changed in the tree. See "notify_change" in  Config::Model::AnyThing  for  more
       details.

   <b>write_back</b>
       In summary, save the content of the configuration tree to configuration files.

       In more details, "write_back" tries to run all subroutines registered with "register_write_back" to write
       the configuration information.  (See Config::Model::BackendMgr for details).

       You  can  specify  here  another  config  directory  to  write  configuration data back with "config_dir"
       parameter. This overrides the model specifications.

       "write_back" croaks if no write call-back are known.

       Use "force =&gt; 1" option to force saving configuration data. This is useful to write back a file  even  no
       change are done at semantic level, i.e. to reformat a file or remove unnecessary data.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont, (ddumont at cpan dot org)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Config::Model, Config::Model::Node, Config::Model::Loader, Config::Model::Searcher, Config::Model::Value,

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2005-2022 by Dominique Dumont.

       This is free software, licensed under:

         The GNU Lesser General Public License, Version 2.1, February 1999

perl v5.40.0                                       2024-11-30                       <u>Config::Model::<a href="../man3pm/Instance.3pm.html">Instance</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>