<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tracefs_instance_tracers, tracefs_tracer_set, tracefs_tracer_clear - Enable or disable a tracer in an</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtracefs-doc">libtracefs-doc_1.8.1-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tracefs_instance_tracers, tracefs_tracer_set, tracefs_tracer_clear - Enable or disable a tracer in an
       instance or the top level

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tracefs.h&gt;</b>

       char ** <b>tracefs_instance_tracers</b>(struct tracefs_instance *<u>instance</u>);
       int <b>tracefs_tracer_set</b>(struct tracefs_instance *<u>instance</u>, enum tracefs_tracers <u>tracer</u>);
       int <b>tracefs_tracer_set</b>(struct tracefs_instance *<u>instance</u>, enum tracefs_tracers <u>tracer</u>, const char *<u>name</u>);
       int <b>tracefs_tracer_clear</b>(struct tracefs_instance *<u>instance</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>tracefs_instance_tracers</b> will return a list of available tracers for a given <u>instance</u> (note, an instance
       may not have the same set of available tracers as the top level). If <u>instance</u> is NULL, then the list of
       available tracers returned will be for the top level.

       <b>tracefs_tracer_set</b> enables a tracer in the given instance, defined by the <u>instance</u> parameter. If <u>instance</u>
       is NULL, then the top level instance is changed. If <u>tracer</u> is set to <b>TRACFES_TRACER_CUSTOM</b> then a <u>name</u>
       string must be passed in as the third parameter, and that is written into the instance to enable the
       tracer with that name. This is useful for newer or custom kernels that contain tracers that are not yet
       identified by the tracefs_tracers enum.

       <b>tracefs_tracer_clear</b> disables the tracer for the given instance defined by the <u>instance</u> variable, or the
       top level instance if it is NULL. This is the same as calling <b>tracefs_tracer_set</b> with TRACEFS_TRACER_NOP
       as the <u>tracer</u> parameter.

</pre><h4><b>TRACEFS_TRACER</b> <b>ENUMS</b></h4><pre>
       The currently defined enums that are accepted are:

       <b>TRACEFS_TRACER_NOP</b> : This is the idle tracer, which does nothing and is used to clear any active tracer.

       <b>TRACEFS_TRACER_FUNCTION</b> : Enables most functions in the kernel to be traced.

       <b>TRACEFS_TRACER_FUNCTION_GRAPH</b> : Enables most functions in the kernel to be traced as well as the return
       of the function.

       <b>TRACEFS_TRACER_IRQSOFF</b> : Tracers the latency of interrupts disabled.

       <b>TRACEFS_TRACER_PREEMPTOFF</b> : Tracers the latency of preemption disabled (the time in the kernel that tasks
       can not be scheduled from the CPU).

       <b>TRACEFS_TRACER_PREEMPTIRQSOFF</b> : Traces the combined total latency of when interrupts are disabled as well
       as when preemption is disabled.

       <b>TRACEFS_TRACER_WAKEUP</b> : Traces the latency of when the highest priority task takes to wake up.

       <b>TRACEFS_TRACER_WAKEUP_RT</b> : Traces the latency of when the highest priority real-time task takes to wake
       up. All other tasks are ignored.

       <b>TRACEFS_TRACER_WAKEUP_DL</b> : Traces the latency of when the highest priority DEADLINE task takes to wake
       up. All other tasks are ignored.

       <b>TRACEFS_TRACER_MMIOTRACE</b> : Traces the interaction of devices with the kernel.

       <b>TRACEFS_TRACER_HWLAT</b> : Detects latency caused by the hardware that is outside the scope of the kernel.

       <b>TRACEFS_TRACER_BRANCH</b> : Traces when likely or unlikely branches are taken.

       <b>TRACEFS_TRACER_BLOCK</b> : Special tracer for the block devices.

       Note that the above tracers may not be available in the kernel and <b>tracefs_tracer_set()</b> will return an
       error with errno set to ENODEV, if the kernel does not support the <u>tracer</u> option, or the custom one if
       TRACEFS_TRACER_CUSTOM is used.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Returns 0 on success, or -1 on error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>tracefs_tracer_set</b>() can fail with the following errors:

       <b>EINVAL</b> The <u>tracer</u> parameter is outside the scope of what is defined.

       <b>ENOMEM</b> Memory allocation error.

       <b>ENOENT</b> Tracers are not supported on the running kernel.

       <b>ENODEV</b> The specified tracer is not supported on the running kernel.

       Other errors may also happen caused by internal system calls.

</pre><h4><b>EXAMPLE</b></h4><pre>
           #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
           #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
           #include &lt;<a href="file:/usr/include/getopt.h">getopt.h</a>&gt;
           #include &lt;<a href="file:/usr/include/errno.h">errno.h</a>&gt;
           #include &lt;tracefs.h&gt;

           int main(int argc, char *argv[])
           {
                   struct tracefs_instance *inst = NULL;
                   enum tracefs_tracers t = TRACEFS_TRACER_NOP;
                   const char *cust = NULL;
                   const char *buf = NULL;
                   char **tracers;
                   int ret;
                   int ch;
                   int i;

                   while ((ch = getopt(argc, argv, "nfgiwdc:B:")) &gt; 0) {
                           switch (ch) {
                           case 'f': t = TRACEFS_TRACER_FUNCTION; break;
                           case 'g': t = TRACEFS_TRACER_FUNCTION_GRAPH; break;
                           case 'i': t = TRACEFS_TRACER_PREEMPTIRQSOFF; break;
                           case 'w': t = TRACEFS_TRACER_WAKEUP_RT; break;
                           case 'd': t = TRACEFS_TRACER_WAKEUP_DL; break;
                           case 'c':
                                   t = TRACEFS_TRACER_CUSTOM;
                                   cust = optarg;
                                   break;
                           case 'B':
                                   buf = optarg;
                                   break;
                           case 'n':
                                   /* nop */
                                   break;
                           default:
                                   printf("Unknow arg %c\n", ch);
                                   exit(-1);
                           }
                   }

                   if (buf) {
                           inst = tracefs_instance_create(buf);
                           if (!inst) {
                                   printf("failed to create instance\n");
                                   exit(-1);
                           }
                   }

                   if (t == TRACEFS_TRACER_CUSTOM)
                           ret = tracefs_tracer_set(inst, t, cust);
                   else
                           ret = tracefs_tracer_set(inst, t);

                   if (ret &lt; 0) {
                           if (errno == ENODEV) {
                                   if (cust)
                                           printf("Tracer '%s' not supported by kernel\n", cust);
                                   else
                                           printf("Tracer not supported by kernel\n");
                                   tracers = tracefs_instance_tracers(inst);
                                   printf("Available tracers:");
                                   for (i = 0; tracers &amp;&amp; tracers[i]; i++)
                                           printf(" %s", tracers[i]);
                                   tracefs_list_free(tracers);
                                   printf("\n");
                           } else
                                   perror("Error");
                           if (inst) {
                                   tracefs_instance_destroy(inst);
                                   tracefs_instance_free(inst);
                           }
                           exit(-1);
                   }

                   tracefs_instance_free(inst);

                   <a href="../man0/exit.0.html">exit</a>(0);
           }

</pre><h4><b>FILES</b></h4><pre>
           <b>tracefs.h</b>
                   Header file to include in order to have access to the library APIs.
           <b>-ltracefs</b>
                   Linker switch to add when building a program that uses the library.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libtracefs.3.html">libtracefs</a></b>(3), <b><a href="../man3/libtraceevent.3.html">libtraceevent</a></b>(3), <b><a href="../man1/trace-cmd.1.html">trace-cmd</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
           <b>Steven</b> <b>Rostedt</b> &lt;<b><a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a></b>[1]&gt;
           <b>Tzvetomir</b> <b>Stoyanov</b> &lt;<b><a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a></b>[2]&gt;
           <b>sameeruddin</b> <b>shaik</b> &lt;<b><a href="mailto:sameeruddin.shaik8@gmail.com">sameeruddin.shaik8@gmail.com</a></b>[3]&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<b><a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a></b>[4]&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       libtracefs is Free Software licensed under the GNU LGPL 2.1

</pre><h4><b>RESOURCES</b></h4><pre>
       <b>https://git.kernel.org/pub/scm/libs/libtrace/libtracefs.git/</b>

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2020 VMware, Inc. Free use of this software is granted under the terms of the GNU Public
       License (GPL).

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a>
           <a href="mailto:rostedt@goodmis.org">mailto:rostedt@goodmis.org</a>

        2. <a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a>
           <a href="mailto:tz.stoyanov@gmail.com">mailto:tz.stoyanov@gmail.com</a>

        3. <a href="mailto:sameeruddin.shaik8@gmail.com">sameeruddin.shaik8@gmail.com</a>
           <a href="mailto:sameeruddin.shaik8@gmail.com">mailto:sameeruddin.shaik8@gmail.com</a>

        4. <a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a>
           <a href="mailto:linux-trace-devel@vger.kernel.org">mailto:linux-trace-devel@vger.kernel.org</a>

libtracefs 1.8.1                                   06/05/2025                                      <u><a href="../man3/LIBTRACEFS.3.html">LIBTRACEFS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>