<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wallet::ACL::External - Wallet ACL verifier using an external command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/krb5-wallet-server">krb5-wallet-server_1.7_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Wallet::ACL::External - Wallet ACL verifier using an external command

</pre><h4><b>SYNOPSIS</b></h4><pre>
           my $verifier = Wallet::ACL::External-&gt;new;
           my $status = $verifier-&gt;check ($principal, $acl);
           if (not defined $status) {
               die "Something failed: ", $verifier-&gt;error, "\n";
           } elsif ($status) {
               print "Access granted\n";
           } else {
               print "Access denied\n";
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Wallet::ACL::External runs an external command to determine whether access is granted.  The command
       configured via $EXTERNAL_COMMAND in Wallet::Config will be run.  The first argument to the command will
       be the principal requesting access.  The identifier of the ACL will be split on whitespace and passed in
       as the remaining arguments to this command.

       No other arguments are passed to the command, but the command will have access to all of the remctl
       environment variables seen by the wallet server (such as REMOTE_USER).  For a full list of environment
       variables, see "ENVIRONMENT" in <b><a href="../man8/remctld.8.html">remctld</a></b>(8).

       The external command should exit with a non-zero status but no output to indicate a normal failure to
       satisfy the ACL.  Any output will be treated as an error.

</pre><h4><b>METHODS</b></h4><pre>
       <b>new()</b>
           Creates a new ACL verifier.  For this verifier, this just confirms that the wallet configuration sets
           an external command.

       check(PRINCIPAL, ACL, TYPE, NAME)
           Returns  true  if  the external command returns success when run with that PRINCIPAL, object TYPE and
           NAME, and ACL.  So, for example, the ACL "external mdbset shell" will, when triggered  by  a  request
           from <a href="mailto:rra@EXAMPLE.COM">rra@EXAMPLE.COM</a> for the object "file password", result in the command:

               $Wallet::Config::EXTERNAL_COMMAND <a href="mailto:rra@EXAMPLE.COM">rra@EXAMPLE.COM</a> file password \
                   'mdbset shell'

       <b>error()</b>
           Returns the error if <b>check()</b> returned undef.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       The <b>new()</b> method may fail with one of the following exceptions:

       external ACL support not configured
           The   required   configuration  parameters  were  not  set.   See  Wallet::Config  for  the  required
           configuration parameters and how to set them.

       Verifying an external ACL may fail with the following errors (returned by the <b>error()</b> method):

       cannot fork: %s
           The attempt to fork in order to execute the external ACL verifier command failed, probably due  to  a
           lack of system resources.

       no principal specified
           The PRINCIPAL parameter to <b>check()</b> was undefined or the empty string.

       In  addition,  if  the external command fails and produces some output, that will be considered a failure
       and the first line of its output will be returned as the error message.  The external command should exit
       with a non-zero status but no error to indicate a normal failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/remctld.8.html">remctld</a></b>(8), <b>Wallet::<a href="../man3/ACL.3.html">ACL</a></b>(3), <b>Wallet::ACL::<a href="../man3/Base.3.html">Base</a></b>(3), <b>Wallet::<a href="../man3/Config.3.html">Config</a></b>(3), <b><a href="../man8/wallet-backend.8.html">wallet-backend</a></b>(8)

       This  module   is   part   of   the   wallet   system.    The   current   version   is   available   from
       &lt;https://www.eyrie.org/~eagle/software/wallet/&gt;.

</pre><h4><b>AUTHOR</b></h4><pre>
       Russ Allbery &lt;<a href="mailto:eagle@eyrie.org">eagle@eyrie.org</a>&gt;

perl v5.40.0                                       2024-11-12                         <u>Wallet::ACL::<a href="../man3pm/External.3pm.html">External</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>