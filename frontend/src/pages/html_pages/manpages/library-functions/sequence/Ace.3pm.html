<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ace - Object-Oriented Access to ACEDB Databases</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libace-perl">libace-perl_1.92-12build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Ace - Object-Oriented Access to ACEDB Databases

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Ace;
           # open a remote database connection
           $db = Ace-&gt;connect(-host =&gt; 'beta.crbm.cnrs-mop.fr',
                              -port =&gt; 20000100);

           # open a local database connection
           $local = Ace-&gt;connect(-path=&gt;'~acedb/my_ace');

           # simple queries
           $sequence  = $db-&gt;fetch(Sequence =&gt; 'D12345');
           $count     = $db-&gt;count(Sequence =&gt; 'D*');
           @sequences = $db-&gt;fetch(Sequence =&gt; 'D*');
           $i         = $db-&gt;fetch_many(Sequence=&gt;'*');  # fetch a cursor
           while ($obj = $i-&gt;next) {
              print $obj-&gt;asTable;
           }

           # complex queries
           $query = &lt;&lt;END;
           find Annotation Ready_for_submission ; follow gene ;
           follow derived_sequence ; &gt;DNA
           END
           @ready_dnas= $db-&gt;fetch(-query=&gt;$query);

           $ready = $db-&gt;fetch_many(-query=&gt;$query);
           while ($obj = $ready-&gt;next) {
               # do something with obj
           }

           # database cut and paste
           $sequence = $db-&gt;fetch(Sequence =&gt; 'D12345');
           $local_db-&gt;put($sequence);
           @sequences = $db-&gt;fetch(Sequence =&gt; 'D*');
           $local_db-&gt;put(@sequences);

           # Get errors
           print Ace-&gt;error;
           print $db-&gt;error;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       AcePerl provides an interface to the ACEDB object-oriented database.  Both read and write access is
       provided, and ACE objects are returned as similarly-structured Perl objects.  Multiple databases can be
       opened simultaneously.

       You will interact with several Perl classes: <u>Ace</u>, <u>Ace::Object</u>, <u>Ace::Iterator</u>, <u>Ace::Model</u>.  <u>Ace</u> is the
       database accessor, and can be used to open both remote Ace databases (running aceserver or gifaceserver),
       and local ones.

       <u>Ace::Object</u> is the superclass for all objects returned from the database.  <u>Ace</u> and <u>Ace::Object</u> are
       linked: if you retrieve an Ace::Object from a particular database, it will store a reference to the
       database and use it to fetch any subobjects contained within it.  You may make changes to the <u>Ace::Object</u>
       and have those changes written into the database.  You may also create <u>Ace::Object</u>s from scratch and
       store them in the database.

       <u>Ace::Iterator</u> is a utility class that acts as a database cursor for long-running ACEDB queries.
       <u>Ace::Model</u> provides object-oriented access to ACEDB's schema.

       Internally, <u>Ace</u> uses the <u>Ace::Local</u> class for access to local databases and <u>Ace::AceDB</u> for access to
       remote databases.  Ordinarily you will not need to interact directly with either of these classes.

</pre><h4><b>CREATING</b> <b>NEW</b> <b>DATABASE</b> <b>CONNECTIONS</b></h4><pre>
   <b>connect()</b> <b>--</b> <b>multiple</b> <b>argument</b> <b>form</b>
           # remote database
           $db = Ace-&gt;connect(-host  =&gt;  'beta.crbm.cnrs-mop.fr',
                              -port  =&gt;  20000100);

           # local (non-server) database
           $db = Ace-&gt;connect(-path  =&gt;  '/usr/local/acedb);

       Use <b>Ace::connect()</b> to establish a connection to a networked or local AceDB database.  To establish a
       connection to an AceDB server, use the <b>-host</b> and/or <b>-port</b> arguments.  For a local server, use the <b>-port</b>
       argument.  The database must be up and running on the indicated host and port prior to connecting to an
       AceDB server.  The full syntax is as follows:

           $db = Ace-&gt;connect(-host  =&gt;  $host,
                              -port  =&gt;  $port,
                              -path  =&gt;  $database_path,
                              -program     =&gt; $local_connection_program
                              -classmapper =&gt;  $object_class,
                              -timeout     =&gt; $timeout,
                              -query_timeout =&gt; $query_timeout
                              -cache        =&gt; {cache parameters},
                             );

       The <b>connect()</b> method uses a named argument calling style, and recognizes the following arguments:

       <b>-host</b>, <b>-port</b>
           These  arguments  point  to  the  host  and  port  of an AceDB server.  AcePerl will use its internal
           compiled code to establish a connection to the server unless explicitly overridden with the  <b>-program</b>
           argument.

       <b>-path</b>
           This  argument  indicates the path of an AceDB directory on the local system.  It should point to the
           directory that contains the <u>wspec</u> subdirectory.  User name interpolations (~acedb) are OK.

       <b>-user</b>
           Name of user to log in as (when using  socket  server  <b>only</b>).   If  not  provided,  will  attempt  an
           anonymous login.

       <b>-pass</b>
           Password to log in with (when using socket server).

       <b>-url</b>
           An  Acedb  URL  that combines the server type, host, port, user and password in a single string.  See
           the <b>connect()</b> method's "single argument form" description.

       <b>-cache</b>
           AcePerl can use the Cache::SizeAwareFileCache module to cache objects to disk.  This  can  result  in
           dramatically  increased  performance  in  environments  such  as  web servers in which the same Acedb
           objects are frequently reused.  To activate this mechanism, the Cache::SizeAwareFileCache module must
           be installed, and you must pass the -cache argument during the <b>connect()</b> call.

           The  value  of  -cache  is  a  hash  reference   containing   the   arguments   to   be   passed   to
           Cache::SizeAwareFileCache.  For example:

              -cache =&gt; {
                         cache_root         =&gt; '/usr/tmp/acedb',
                         cache_depth        =&gt; 4,
                         default_expires_in =&gt; '1 hour'
                         }

           If not otherwise specified, the following cache parameters are assumed:

                  Parameter               Default Value
                  ---------               -------------
                  namespace               Server URL (e.g. sace://localhost:2005)
                  cache_root              /tmp/FileCache (dependent on system temp directory)
                  default_expires_in      1 day
                  auto_purge_interval     12 hours

           By  default,  the  cache  is  not  size limited (the "max_size" property is set to $NO_MAX_SIZE).  To
           adjust the size you may consider calling the Ace object's <b>cache()</b> method  to  retrieve  the  physical
           cache  and  then  calling  the  cache  object's  limit_size($max_size) method from time to time.  See
           Cache::SizeAwareFileCache for more details.

       <b>-program</b>
           By default AcePerl will use its internal compiled  code  calls  to  establish  a  connection  to  Ace
           servers,  and  will  launch  a <u>tace</u> subprocess to communicate with local Ace databases.  The <b>-program</b>
           argument allows you to customize this  behavior  by  forcing  AcePerl  to  use  a  local  program  to
           communicate  with the database.  This argument should point to an executable on your system.  You may
           use either a complete path or a bare command name, in which case the PATH environment  variable  will
           be  consulted.   For  example, you could force AcePerl to use the <u>aceclient</u> program to connect to the
           remote host by connecting this way:

             $db = Ace-&gt;connect(-host =&gt; 'beta.crbm.cnrs-mop.fr',
                                -port =&gt; 20000100,
                                -program=&gt;'aceclient');

       <b>-classmapper</b>
           The optional <b>-classmapper</b> argument (alias <b>-class</b>) points to the class you would like to  return  from
           database queries.  It is provided for your use if you subclass Ace::Object.  For example, if you have
           created a subclass of Ace::Object called Ace::Object::Graphics, you can have the database return this
           subclass by default by connecting this way:

             $db = Ace-&gt;connect(-host =&gt; 'beta.crbm.cnrs-mop.fr',
                                -port =&gt; 20000100,
                                -class=&gt;'Ace::Object::Graphics');

           The  value  of  <b>-class</b> can be a hash reference consisting of AceDB class names as keys and Perl class
           names as values.  If a class name does not exist in the hash, a key named _DEFAULT_  will  be  looked
           for.  If that does not exist, then Ace will default to Ace::Object.

           The  value of <b>-class</b> can also be an object or a classname that implements a <b>class_for()</b> method.  This
           method will receive three arguments containing the AceDB class name, object ID and  database  handle.
           It should return a string indicating the perl class to create.

       <b>-timeout</b>
           If no response from the server is received within $timeout seconds, the call will return an undefined
           value.   Internally  timeout sets an alarm and temporarily intercepts the ALRM signal.  You should be
           aware of this if you use ALRM for your own purposes.

           NOTE:  this  feature  is  temporarily  disabled  (as  of  version  1.40)  because  it  is  generating
           unpredictable results when used with Apache/mod_perl.

       <b>-query_timeout</b>
           If  any  query  takes longer than $query_timeout seconds, will return an undefined value.  This value
           can only be set at connect time, and cannot be changed once set.

       If arguments are omitted, they will default to the following values:

           -host          localhost
           -port          200005;
           -path          no default
           -program       tace
           -class         Ace::Object
           -timeout       25
           -query_timeout 120

       If you prefer to use a more Smalltalk-like message-passing syntax, you can open  a  connection  this  way
       too:

         $db = connect Ace -host=&gt;'beta.crbm.cnrs-mop.fr',-port=&gt;20000100;

       The  return  value  is an Ace handle to use to access the database, or undef if the connection fails.  If
       the connection fails, an error message can be retrieved by calling Ace-&gt;error.

       You may check the status of a connection at any time with <b>ping()</b>.  It will return a  true  value  if  the
       database  is  still connected.  Note that Ace will timeout clients that have been inactive for any length
       of time.  Long-running clients should attempt to reestablish their connection if <b>ping()</b> returns false.

           $db-&gt;ping() || die "not connected";

       You may perform low-level calls using the Ace client C API by calling <b>db()</b>.  This fetches  an  Ace::AceDB
       object.  See THE LOW LEVEL C API for details on using this object.

           $low_level = $db-&gt;db();

   <b>connect()</b> <b>--</b> <b>single</b> <b>argument</b> <b>form</b>
         $db = Ace-&gt;connect('sace://stein.cshl.org:1880')

       Ace-&gt;<b>connect()</b> also accepts a single argument form using a URL-type syntax.  The general syntax is:

          protocol://hostname:port/path

       The <u>:port</u> and <u>/path</u> parts are protocol-dependent as described above.

       Protocols:

       sace://hostname:port
           Connect to a socket server at the indicated hostname and port.  Example:

              sace://stein.cshl.org:1880

           If not provided, the port defaults to 2005.

       rpcace://hostname:port
           Connect to an RPC server at the indicated hostname and RPC service number.  Example:

             rpcace://stein.cshl.org:400000

           If not provided, the port defaults to 200005

       tace:/path/to/database
           Open up the local database at <u>/path/to/database</u> using tace.  Example:

             tace:/~acedb/elegans

       /path/to/database
           Same as the previous.

   <b>close()</b> <b>Method</b>
       You can explicitly close a database by calling its <b>close()</b> method:

          $db-&gt;close();

       This  is  not  ordinarily  necessary  because the database will be automatically close when it -- and all
       objects retrieved from it -- go out of scope.

   <b>reopen()</b> <b>Method</b>
       The ACeDB socket server can time out.  The <b>reopen()</b> method  will  ping  the  server  and  if  it  is  not
       answering  will  reopen  the  connection.  If the database is live (or could be resurrected), this method
       returns true.

</pre><h4><b>RETRIEVING</b> <b>ACEDB</b> <b>OBJECTS</b></h4><pre>
       Once you have established a connection and have an Ace databaes handle, several methods can  be  used  to
       query  the  ACE database to retrieve objects.  You can then explore the objects, retrieve specific fields
       from them, or update them using the <u>Ace::Object</u> methods.  Please see Ace::Object.

   <b>fetch()</b> <b>method</b>
           $count   = $db-&gt;fetch($class,$name_pattern);
           $object  = $db-&gt;fetch($class,$name);
           @objects = $db-&gt;fetch($class,$name_pattern,[$count,$offset]);
           @objects = $db-&gt;fetch(-name=&gt;$name_pattern,
                                 -class=&gt;$class
                                 -count=&gt;$count,
                                 -offset=&gt;$offset,
                                 -fill=&gt;$fill,
                                 -filltag=&gt;$tag,
                                 -total=&gt;\$total);
           @objects = $db-&gt;fetch(-query=&gt;$query);

       <b>Ace::fetch()</b> retrieves objects from the database based on their class  and  name.   You  may  retrieve  a
       single  object  by  requesting  its  name,  or  a group of objects by fetching a name <u>pattern</u>.  A pattern
       contains one or more wildcard characters, where "*" stands for zero or more characters,  and  "?"  stands
       for any single character.

       This  method  behaves  differently  depending  on whether it is called in a scalar or a list context, and
       whether it is asked to search for a name pattern or a simple name.

       When called with a class and a simple name, it returns the object referenced by that time, or  undef,  if
       no such object exists.  In an array context, it will return an empty list.

       When  called  with a class and a name pattern in a list context, <b>fetch()</b> returns the list of objects that
       match the name.  When called with a pattern in a scalar context, <b>fetch()</b> returns the  <u>number</u>  of  objects
       that match without actually retrieving them from the database.  Thus, it is similar to <b>count()</b>.

       In the examples below, the first line of code will fetch the Sequence object whose database ID is <u>D12345</u>.
       The  second  line  will retrieve all objects matching the pattern <u>D1234*</u>.  The third line will return the
       count of objects that match the same pattern.

          $object =  $db-&gt;fetch(Sequence =&gt; 'D12345');
          @objects = $db-&gt;fetch(Sequence =&gt; 'D1234*');
          $cnt =     $db-&gt;fetch(Sequence =&gt;'D1234*');

       A variety of communications and database errors may  occur  while  processing  the  request.   When  this
       happens,  undef  or an empty list will be returned, and a string describing the error can be retrieved by
       calling Ace-&gt;error.

       When retrieving database objects, it is possible to retrieve a  "filled"  or  an  "unfilled"  object.   A
       filled object contains the entire contents of the object, including all tags and subtags.  In the case of
       certain Sequence objects, this may be a significant amount of data.  Unfilled objects consist just of the
       object  name.   They  are  filled  in from the database a little bit at a time as tags are requested.  By
       default, <b>fetch()</b> returns the unfilled object.  This is usually a performance win,  but  if  you  know  in
       advance  that you will be needing the full contents of the retrieved object (for example, to display them
       in a tree browser) it can be more efficient to fetch them in filled mode. You do this by calling  <b>fetch()</b>
       with the argument of <b>-fill</b> set to a true value.

       The  <b>-filltag</b>  argument,  if provided, asks the database to fill in the subtree anchored at the indicated
       tag.  This will improve performance for frequently-accessed subtrees.  For example:

          @objects = $db-&gt;fetch(-name    =&gt; 'D123*',
                                -class   =&gt; 'Sequence',
                                -filltag =&gt; 'Visible');

       This will fetch all Sequences named D123* and fill in their Visible trees in a single operation.

       Other arguments in the named parameter calling form are <b>-count</b>, to retrieve a certain maximum  number  of
       objects,  and  <b>-offset</b>, to retrieve objects beginning at the indicated offset into the list.  If you want
       to limit the number of objects returned, but wish to learn how many objects might  have  been  retrieved,
       pass  a  reference to a scalar variable in the <b>-total</b> argument.  This will return the object count.  This
       example shows how to fetch 100 Sequence objects, starting at Sequence number 500:

         @some_sequences = $db-&gt;fetch('Sequence','*',100,500);

       The next example uses the named argument form to fetch 100 Sequence objects starting at  Sequence  number
       500, and leave the total number of Sequences in $total:

         @some_sequences = $db-&gt;fetch(-class  =&gt; 'Sequence',
                                      -count  =&gt; 100,
                                      -offset =&gt; 500,
                                      -total  =&gt; \$total);

       Notice that if you leave out the <b>-name</b> argument the "*" wildcard is assumed.

       You  may  also pass an arbitrary Ace query string with the <b>-query</b> argument.  This will supersede any name
       and class you provide.  Example:

         @ready_dnas= $db-&gt;fetch(-query=&gt;
             'find Annotation Ready_for_submission ; follow gene ;
              follow derived_sequence ; &gt;DNA');

       If your request is likely to retrieve very many objects, <b>fetch()</b> many consume a lot of  memory,  even  if
       <b>-fill</b>  is  false.   Consider using <b>fetch_many()</b> instead (see below).  Also see the <b>get()</b> method, which is
       equivalent to the simple two-argument form of <b>fetch()</b>.

       <b>get()</b> method
              $object = $db-&gt;get($class,$name [,$fill]);

           The <b>get()</b> method will return one and only one AceDB object identified by its  class  and  name.   The
           optional $fill argument can be used to control how much data is retrieved from the database. If $fill
           is  absent  or undefined, then the method will return a lightweight "stub" object that is filled with
           information as requested in a lazy fashion. If $fill is the number  "1"  then  the  retrieved  object
           contains  all  the relevant information contained within the database.  Any other true value of $fill
           will be treated as a tag name: the returned object will be prefilled with the subtree to the right of
           that tag.

           Examples:

              # return lightweight stub for Author object "Sulston JE."
              $author = $db-&gt;get(Author=&gt;'Sulston JE');

              # return heavyweight object
              $author = $db-&gt;get(Author=&gt;'Sulston JE',1);

              # return object containing the Address subtree
              $author = $db-&gt;get(Author=&gt;'Sulston JE','Address');

           The <b>get()</b> method is equivalent to this form of the <b>fetch()</b> method:

              $object = $db-&gt;fetch($class=&gt;$name);

   <b>aql()</b> <b>method</b>
           $count   = $db-&gt;aql($aql_query);
           @objects = $db-&gt;aql($aql_query);

       <b>Ace::aql()</b> will perform an AQL query on the database.  In a scalar context it returns the number of  rows
       returned.   In an array context it returns a list of rows.  Each row is an anonymous array containing the
       columns returned by the query as an Ace::Object.

       If an AQL error is encountered, will return undef or an empty  list  and  set  Ace-&gt;error  to  the  error
       message.

       Note  that  this  routine  is  not  optimized  -- there is no iterator defined.  All results are returned
       synchronously, leading to large memory consumption for certain queries.

   <b>put()</b> <b>method</b>
          $cnt = $db-&gt;put($obj1,$obj2,$obj3);

       This method will put the list of objects into the database, overwriting like-named objects  if  they  are
       already there.  This can be used to copy an object from one database to another, provided that the models
       are compatible.

       The  method  returns  the  count of objects successfully written into the database.  In case of an error,
       processing will stop at the last object successfully written and an  error  message  will  be  placed  in
       Ace-&gt;<b>error()</b>;

   <b>parse()</b> <b>method</b>
         $object = $db-&gt;parse('data to parse');

       This  will  parse  the Ace tags contained within the "data to parse" string, convert it into an object in
       the database, and return the resulting Ace::Object.  In case of a parse error, the undefined  value  will
       be returned and a (hopefully informative) description of the error will be returned by Ace-&gt;<b>error()</b>.

       For example:

         $author = $db-&gt;parse(&lt;&lt;END);
         Author : "Glimitz JR"
         Full_name "Jonathan R. Glimitz"
         Mail  "128 Boylston Street"
         Mail  "Boston, MA"
         Mail  "USA"
         Laboratory GM
         END

       This  method can also be used to parse several objects, but only the last object successfully parsed will
       be returned.

   <b>parse_longtext()</b> <b>method</b>
         $object = $db-&gt;parse($title,$text);

       This will parse the long text (which may contain carriage returns and other funny characters)  and  place
       it  into  the  database  with  the  given  title.   In case of a parse error, the undefined value will be
       returned and a (hopefully informative) description  of  the  error  will  be  returned  by  Ace-&gt;<b>error()</b>;
       otherwise, a LongText object will be returned.

       For example:

         $author = $db-&gt;parse_longtext('A Novel Inhibitory Domain',&lt;&lt;END);
         We have discovered a novel inhibitory domain that inhibits
         many classes of proteases, including metallothioproteins.
         This inhibitory domain appears in three different gene families studied
         to date...
         END

   <b>parse_file()</b> <b>method</b>
         @objects = $db-&gt;parse_file('/path/to/file');
         @objects = $db-&gt;parse_file('/path/to/file',1);

       This  will call <b>parse()</b> to parse each of the objects found in the indicated .ace file, returning the list
       of objects successfully loaded into the database.

       By default, parsing will stop at the first object that causes a parse error.  If you  wish  to  forge  on
       after an error, pass a true value as the second argument to this method.

       Any parse error messages are accumulated in Ace-&gt;<b>error()</b>.

   <b>new()</b> <b>method</b>
         $object = $db-&gt;new($class =&gt; $name);

       This  method  creates  a  new  object  in  the database of type $class and name $name.  If successful, it
       returns the newly-created object.  Otherwise it returns undef and sets $db-&gt;<b>error()</b>.

       $name may contain <b>sprintf()</b>-style patterns.  If one of the patterns is %d (or a variant),  Acedb  uses  a
       class-specific unique numbering to return a unique name.  For example:

         $paper = $db-&gt;new(Paper =&gt; 'wgb%06d');

       The  object  is  created  in  the  database  atomically.   There  is no chance to rollback as there is in
       Ace::Object's object editing methods.

       See also the Ace::Object-&gt;<b>add()</b> and <b>replace()</b> methods.

   <b>list()</b> <b>method</b>
           @objects = $db-&gt;list(class,pattern,[count,offset]);
           @objects = $db-&gt;list(-class=&gt;$class,
                                -name=&gt;$name_pattern,
                                -count=&gt;$count,
                                -offset=&gt;$offset);

       This is a deprecated method.  Use <b>fetch()</b> instead.

   <b>count()</b> <b>method</b>
           $count = $db-&gt;count($class,$pattern);
           $count = $db-&gt;count(-query=&gt;$query);

       This function queries the database for a list of objects matching the specified class  and  pattern,  and
       returns  the  object  count.   For large sets of objects this is much more time and memory effective than
       fetching the entire list.

       The class and name pattern are the same as the <b>list()</b> method above.

       You may also provide a <b>-query</b> argument to instead specify an arbitrary ACE query  such  as  "find  Author
       COUNT Paper &gt; 80".  See <b>find()</b> below.

   <b>find()</b> <b>method</b>
           @objects = $db-&gt;find($query_string);
           @objects = $db-&gt;find(-query =&gt; $query_string,
                                -offset=&gt; $offset,
                                -count =&gt; $count
                                -fill  =&gt; $fill);

       This  allows  you  to  pass  arbitrary  Ace query strings to the server and retrieve all objects that are
       returned as a result.  For example, this code fragment retrieves all papers written by Jean and  Danielle
       Thierry-Mieg.

           @papers = $db-&gt;find('author IS "Thierry-Mieg *" ; &gt;Paper');

       You    can    find    the    full    query   syntax   reference   guide   plus   multiple   examples   at
       <a href="http://probe.nalusda.gov">http://probe.nalusda.gov</a>:8000/acedocs/index.html#query.

       In the named parameter calling form, <b>-count</b>, <b>-offset</b>, and <b>-fill</b> have the same meanings as in <b>fetch()</b>.

   <b>fetch_many()</b> <b>method</b>
           $obj = $db-&gt;fetch_many($class,$pattern);

           $obj = $db-&gt;fetch_many(-class=&gt;$class,
                                  -name =&gt;$pattern,
                                  -fill =&gt;$filled,
                                  -chunksize=&gt;$chunksize);

           $obj = $db-&gt;fetch_many(-query=&gt;$query);

       If you expect to retrieve many objects, you can fetch an iterator across the data set.  This is  friendly
       both in terms of network bandwidth and memory consumption.  It is simple to use:

           $i = $db-&gt;fetch_many(Sequence,'*');  # all sequences!!!!
           while ($obj = $i-&gt;next) {
              print $obj-&gt;asTable;
           }

       The  iterator  will  return undef when it has finished iterating, and cannot be used again.  You can have
       multiple iterators open at once and they will operate independently of each other.

       Like <b>fetch()</b>, <b>fetch_many()</b> takes an optional <b>-fill</b> (or  <b>-filled</b>)  argument  which  retrieves  the  entire
       object  rather  than just its name.  This is efficient on a network with high latency if you expect to be
       touching many parts of the object (rather than just retrieving the value of a few tags).

       <b>fetch_many()</b> retrieves objects from the database in groups of a certain  maximum  size,  40  by  default.
       This  can be tuned using the optional <b>-chunksize</b> argument.  Chunksize is only a hint to the database.  It
       may return fewer objects per transaction, particularly if the objects are large.

       You may provide raw Ace query string with the <b>-query</b> argument.  If present the <b>-name</b> and <b>-class</b> arguments
       will be ignored.

   <b>find_many()</b> <b>method</b>
       This is an alias for <b>fetch_many()</b>.  It is now deprecated.

   <b>keyset()</b> <b>method</b>
           @objects = $db-&gt;keyset($keyset_name);

       This method returns all objects in a named keyset.  Wildcard characters are accepted, in which  case  all
       keysets that match the pattern will be retrieved and merged into a single list of unique objects.

   <b>grep()</b> <b>method</b>
           @objects = $db-&gt;grep($grep_string);
           $count   = $db-&gt;grep($grep_string);
           @objects = $db-&gt;grep(-pattern =&gt; $grep_string,
                                -offset=&gt; $offset,
                                -count =&gt; $count,
                                -fill  =&gt; $fill,
                                -filltag =&gt; $filltag,
                                -total =&gt; \$total,
                                -long  =&gt; 1,
                               );

       This  performs  a  "grep"  on the database, returning all object names or text that contain the indicated
       grep pattern.  In a scalar context this call will return the number of matching  objects.   In  an  array
       context,  the  list of matching objects are retrieved.  There is also a named-parameter form of the call,
       which allows you to specify the number of objects to retrieve, the offset from the beginning of the  list
       to  retrieve  from,  whether  the  retrieved  objects  should be filled initially.  You can use <b>-total</b> to
       discover the total number of objects that match, while only retrieving a portion of the list.

       By default, grep uses a fast search that only examines class names and lexiques.   By  providing  a  true
       value  to  the  <b>-long</b>  parameter,  you  can  search inside LongText and other places that are not usually
       touched on, at the expense of much more CPU time.

       Due to "not listable" objects that may match during grep, the list of objects one can  retrieve  may  not
       always match the count.

   <b>model()</b> <b>method</b>
         $model = $db-&gt;model('Author');

       This will return an <u>Ace::Model</u> object corresponding to the indicated class.

   <b>new()</b> <b>method</b>
          $obj = $db-&gt;new($class,$name);
          $obj = $db-&gt;new(-class=&gt;$class,
                          -name=&gt;$name);

       Create  a  new object in the database with the indicated class and name and return a pointer to it.  Will
       return undef if the object already exists in the database.  The object isn't actually  written  into  the
       database until you call <b>Ace::Object::commit()</b>.

   <b>raw_query()</b> <b>method</b>
           $r = $db-&gt;raw_query('Model');

       Send  a  command  to  the  database  and return its unprocessed output.  This method is necessary to gain
       access to features that are not yet implemented in this  module,  such  as  model  browsing  and  complex
       queries.

   <b>classes()</b> <b>method</b>
          @classes = $db-&gt;classes();
          @all_classes = $db-&gt;<a href="../man1/classes.1.html">classes</a>(1);

       This  method  returns a list of all the object classes known to the server.  In a list context it returns
       an array of class names.  In a scalar context, it the number of classes defined in the database.

       Ordinarily <u><b>classes()</b></u> will return only those classes that are exposed to the user interface for  browsing,
       the  so-called  "visible"  classes.   Pass a true argument to the call to retrieve non-visible classes as
       well.

   <b>class_count()</b> <b>method</b>
          %classes = $db-&gt;class_count()

       This returns a hash in which the keys are the class names and the values are the total number of  objects
       in that class.  All classes are returned, including invisible ones.  Use this method if you need to count
       all  classes  simultaneously.   If you only want to count one or two classes, it may be more efficient to
       call <u>count($class_name)</u> instead.

       This method transiently uses a lot of memory.  It should not be  used  with  Ace  4.5  servers,  as  they
       contain a memory leak in the counting routine.

   <b>status()</b> <b>method</b>
           %status = $db-&gt;status;
           $status = $db-&gt;status;

       Returns  various  bits  of  status  information  from the server.  In an array context, returns a hash of
       hashes.  In a scalar context, returns a reference to a hash of hashes.  Keys and subkeys are as follows

          code
                  program     name of acedb binary
                  version     version of acedb binary
                  build       build date of acedb binary in format Jan 25 2003 16:21:24

          database
                  title       name of the database
                  version     version of the database
                  dbformat    database format version number
                  directory   directory in which the database is stored
                  session     session number
                  user        user under which server is running
                  write       whether the server has write access
                  address     global address - not known if this is useful

          resources
                  classes     number of classes defined
                  keys        number of keys defined
                  memory      amount of memory used by acedb objects (bytes)

       For example, to get the program version:

          my $version = $db-&gt;status-&gt;{code}{version};

   <b>title()</b> <b>method</b>
           my $title = $db-&gt;title

       Returns the version of the current database, equivalent to $db-&gt;status-&gt;{database}{title};

   <b>version()</b> <b>method</b>
           my $version = $db-&gt;version;

       Returns the version of the current database, equivalent to $db-&gt;status-&gt;{database}{version};

   <b>date_style()</b> <b>method</b>
         $style = $db-&gt;date_style();
         $style = $db-&gt;date_style('ace');
         $style = $db-&gt;date_style('java');

       For historical reasons, AceDB can display dates using either of two different formats.  The first format,
       which I call "ace" style, puts the year first, as in "1997-10-01".   The  second  format,  which  I  call
       "java"  style,  puts  the day first, as in "01 Oct 1997 00:00:00" (this is also the style recommended for
       Internet dates).  The default is to use the latter notation.

       <b>date_style()</b> can be used to set or retrieve the current style.  Called with no arguments, it returns  the
       current  style,  which will be one of "ace" or "java."  Called with an argument, it will set the style to
       one or the other.

   <b>timestamps()</b> <b>method</b>
         $timestamps_on = $db-&gt;timestamps();
         $db-&gt;<a href="../man1/timestamps.1.html">timestamps</a>(1);

       Whenever a data object is updated, AceDB records the time and date of the update, and the user ID it  was
       running  under.   Ordinarily, the retrieval of timestamp information is suppressed to conserve memory and
       bandwidth.  To turn on timestamps, call the <b>timestamps()</b> method with a true value.  You can retrieve  the
       current value of the setting by calling the method with no arguments.

       Note  that  activating  timestamps disables some of the speed optimizations in AcePerl.  Thus they should
       only be activated if you really need the information.

   <b>auto_save()</b>
       Sets or queries the <u>auto_save</u> variable.  If true, the "save" command will be issued automatically  before
       the connection to the database is severed.  The default is true.

       Examples:

          $db-&gt;<a href="../man1/auto_save.1.html">auto_save</a>(1);
          $flag = $db-&gt;auto_save;

   <b>error()</b> <b>method</b>
           Ace-&gt;error;

       This  returns  the last error message.  Like UNIX errno, this variable is not reset between calls, so its
       contents are only valid after a method call has returned a result value indicating a failure.

       For your convenience, you can call <b>error()</b> in any of several ways:

           print Ace-&gt;error();
           print $db-&gt;error();  # $db is an Ace database handle
           print $obj-&gt;error(); # $object is an Ace::Object

       There's also a global named $Ace::Error that you are free to use.

   <b>datetime()</b> <b>and</b> <b>date()</b>
         $datetime = Ace-&gt;datetime($time);
         $today    = Ace-&gt;datetime();
         $date     = Ace-&gt;date($time);
         $today    = Ace-&gt;date([$time]);

       These convenience functions convert the UNIX timestamp given by $time (seconds since the  epoch)  into  a
       datetime string in the format that ACEDB requires.  <b>date()</b> will truncate the time portion.

       If not provided, $time defaults to <b>localtime()</b>.

</pre><h4><b>OTHER</b> <b>METHODS</b></h4><pre>
   <b>debug()</b>
         $debug_level = Ace-&gt;debug([$new_level])

       This  class  method  gets or sets the debug level.  Higher integers increase verbosity.  0 or undef turns
       off debug messages.

   <b>name2db()</b>
        $db = Ace-&gt;name2db($name [,$database])

       This class method associates a database URL with an Ace database object. This is used internally  by  the
       Ace::Object class in order to discover what database they "belong" to.

   <b>cache()</b>
       Get or set the Cache::SizeAwareFileCache object, if one has been created.

   <b>memory_cache_fetch()</b>
         $obj = $db-&gt;memory_cache_fetch($class,$name)

       Given  an  object  class  and name return a copy of the object from the in-memory cache.  The object will
       only be cached if a copy of the object already  exists  in  memory  space.   This  is  ordinarily  called
       internally.

   <b>memory_cache_store($obj)</b>
       Store an object into the memory cache.  This is ordinarily called internally.

   <b>memory_cache_delete($obj)</b>
       Delete an object from the memory cache. This is ordinarily called internally.

   <b>memory_cache_clear()</b>
       Completely clears the memory cache.

   <b>file_cache_fetch()</b>
         $obj = $db-&gt;file_cache_fetch($class,$name)

       Given  an  object  class  and  name  return a copy of the object from the file cache.  This is ordinarily
       called internally.

   <b>file_cache_store($obj)</b>
       Store an object into the file cache.  This is ordinarily called internally.

   <b>file_cache_delete($obj)</b>
       Delete an object from the file cache.  This is ordinarily called internally.

</pre><h4><b>THE</b> <b>LOW</b> <b>LEVEL</b> <b>C</b> <b>API</b></h4><pre>
       Internally Ace.pm makes C-language calls to libace to send query strings to the server  and  to  retrieve
       the results.  The class that exports the low-level calls is named Ace::AceDB.

       The following methods are available in Ace::AceDB:

       new($host,$port,$query_timeout)
           Connect  to  the  host  $host  at port $port. Queries will time out after $query_timeout seconds.  If
           timeout is not specified, it defaults to 120 (two minutes).

           If successful, this call returns an Ace::AceDB  connection  object.   Otherwise,  it  returns  undef.
           Example:

             $acedb = Ace::AceDB-&gt;new('localhost',200005,5)
                      || die "Couldn't connect";

           The Ace::AceDB object can also be accessed from the high-level Ace interface by calling the <b>ACE::db()</b>
           method:

             $db = Ace-&gt;new(-host=&gt;'localhost',-port=&gt;200005);
             $acedb = $db-&gt;db();

       query($request)
           Send  the  query  string $request to the server and return a true value if successful.  You must then
           call <b>read()</b> repeatedly in order to fetch the query result.

       <b>read()</b>
           Read the result from the last query sent to the server and return it as a string.  ACE may return the
           result in pieces, breaking between whole objects.  You may need to read repeatedly in order to  fetch
           the entire result.  Canonical example:

             $acedb-&gt;query("find Sequence D*");
             die "Got an error ",$acedb-&gt;error() if $acedb-&gt;status == STATUS_ERROR;
             while ($acedb-&gt;status == STATUS_PENDING) {
                $result .= $acedb-&gt;read;
             }

       <b>status()</b>
           Return  the  status  code from the last operation.  Status codes are exported by default when you <b>use</b>
           Ace.pm.  The status codes you may see are:

             STATUS_WAITING    The server is waiting for a query.
             STATUS_PENDING    A query has been sent and Ace is waiting for
                               you to read() the result.
             STATUS_ERROR      A communications or syntax error has occurred

       <b>error()</b>
           Returns a more detailed error code supplied by the Ace server.  Check this  value  when  STATUS_ERROR
           has been returned.  These constants are also exported by default.  Possible values:

            ACE_INVALID
            ACE_OUTOFCONTEXT
            ACE_SYNTAXERROR
            ACE_UNRECOGNIZED

           Please see the ace client library documentation for a full description of these error codes and their
           significance.

       <b>encore()</b>
           This  method  may  return  true after you have performed one or more <b>read()</b> operations, and indicates
           that there is more data to read.  You will not ordinarily have to call this method.

</pre><h4><b>BUGS</b></h4><pre>
       1. The ACE model should be consulted prior to updating the database.

       2. There is no automatic recovery from connection errors.

       3. Debugging has only one level of verbosity, despite the best of intentions.

       4. Performance is poor when fetching big objects, because of many object references that must be created.
       This could be improved.

       5. When called in an array context at("tag[0]") should  return  the  current  tag's  entire  column.   It
       returns the current subtree instead.

       6. There is no way to add comments to objects.

       7. When timestamps are active, many optimizations are disabled.

       8. Item number eight is still missing.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Ace::Object, Ace::Local, Ace::Model, Ace::Sequence,Ace::Sequence::Multi.

</pre><h4><b>AUTHOR</b></h4><pre>
       Lincoln Stein &lt;<a href="mailto:lstein@cshl.org">lstein@cshl.org</a>&gt; with extensive help from Jean Thierry-Mieg &lt;<a href="mailto:mieg@kaa.crbm.cnrs-mop.fr">mieg@kaa.crbm.cnrs-mop.fr</a>&gt;

       Copyright (c) 1997-1998 Cold Spring Harbor Laboratory

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See DISCLAIMER.txt for disclaimers of warranty.

</pre><h4><b>POD</b> <b>ERRORS</b></h4><pre>
       Hey! <b>The</b> <b>above</b> <b>document</b> <b>had</b> <b>some</b> <b>coding</b> <b>errors,</b> <b>which</b> <b>are</b> <b>explained</b> <b>below:</b>

       Around line 1194:
           '=item' outside of any '=over'

       Around line 1224:
           You forgot a '=back' before '=head2'

perl v5.40.0                                       2024-10-20                                           <u><a href="../man3pm/Ace.3pm.html">Ace</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>