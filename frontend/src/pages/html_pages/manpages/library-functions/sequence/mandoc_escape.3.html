<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mandoc_escape — parse roff escape sequences</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmandoc-dev">libmandoc-dev_1.14.6-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mandoc_escape — parse roff escape sequences

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;mandoc.h&gt;</b>

       <u>enum</u> <u>mandoc_esc</u>
       <b>mandoc_escape</b>(<u>const</u> <u>char</u> <u>**end</u>, <u>const</u> <u>char</u> <u>**start</u>, <u>int</u> <u>*sz</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This function scans a <u><a href="../man7/roff.7.html">roff</a></u>(7) escape sequence.

       An escape sequence consists of
       <b>-</b>   an initial backslash character (‘\’),
       <b>-</b>   a single ASCII character called the escape sequence identifier,
       <b>-</b>   and, with only a few exceptions, an argument.

       Arguments can be given in the following forms; some escape sequence identifiers only accept some of these
       forms as specified below.  The first three forms are called the standard forms.

       In brackets: <b>[</b><u>argument</u><b>]</b>
           The  argument  starts  after the initial ‘[’, ends before the final ‘]’, and the escape sequence ends
           with the final ‘]’.

       Two-character argument short form: <b>(</b><u>ar</u>
           This form can only be used for arguments consisting of exactly  two  characters.   It  has  the  same
           effect as <b>[</b><u>ar</u><b>]</b>.

       One-character argument short form: <u>a</u>
           This form can only be used for arguments consisting of exactly one character.  It has the same effect
           as <b>[</b><u>a</u><b>]</b>.

       Delimited form: <u>CargumentC</u>
           The  argument  starts after the initial delimiter character <u>C</u>, ends before the next occurrence of the
           delimiter character <u>C</u>, and the escape sequence ends with that second <u>C</u>.  Some escape sequences  allow
           arbitrary  characters <u>C</u> as quoting characters, some restrict the range of characters that can be used
           as quoting characters.

       Upon function entry, <u>end</u> is expected to point to the escape sequence identifier.  The values passed in as
       <u>start</u> and <u>sz</u> are ignored and overwritten.

       By design, this function cannot handle those <u><a href="../man7/roff.7.html">roff</a></u>(7) escape sequences that require in-place expansion, in
       particular user-defined strings <b>\*</b>, number registers <b>\n</b>, width measurements <b>\w</b>, and numerical  expression
       control <b>\B</b>.  These are handled by <b>roff_res</b>(), a private preprocessor function called from <b>roff_parseln</b>(),
       see the file <u>roff.c</u>.

       The function <b>mandoc_escape</b>() is used
       <b>-</b>   recursively  by  itself,  because  some  escape  sequence  arguments can in turn contain other escape
           sequences,
       <b>-</b>   for error detection internally by the <u><a href="../man7/roff.7.html">roff</a></u>(7) parser part of the  <u><a href="../man3/mandoc.3.html">mandoc</a></u>(3)  library,  see  the  file
           <u>roff.c</u>,
       <b>-</b>   above  all  externally  by  the  <u><a href="../man1/mandoc.1.html">mandoc</a></u>(1)  formatting modules, in particular <b>-Tascii</b> and <b>-Thtml</b>, for
           formatting purposes, see the files <u>term.c</u> and <u>html.c</u>,
       <b>-</b>   and rarely externally by high-level utilities using the mandoc library, for example <u><a href="../man8/makewhatis.8.html">makewhatis</a></u>(8), to
           purge escape sequences from text.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Upon function return, the pointer <u>end</u> is set to the character after the end of the escape sequence,  such
       that the calling higher-level parser can easily continue.

       For escape sequences taking an argument, the pointer <u>start</u> is set to the beginning of the argument and <u>sz</u>
       is  set  to the length of the argument.  For escape sequences not taking an argument, <u>start</u> is set to the
       character after the end of the sequence and <u>sz</u> is set to 0.  Both <u>start</u> and <u>sz</u> may be NULL; in that case,
       the argument and the length are not returned.

       For sequences taking an argument, the function <b>mandoc_escape</b>() returns one of the following values:

       ESCAPE_FONT
           The escape sequence <b>\f</b> taking an argument in standard form: <b>\f[</b>, <b>\f(</b>, <b>\f</b><u>a</u>.   Two-character  arguments
           starting  with  the  character  ‘C’ are reduced to one-character arguments by skipping the ‘C’.  More
           specific values are returned for the most commonly used arguments:

           argument    return value
           <b>R</b> or <b>1</b>      ESCAPE_FONTROMAN
           <b>I</b> or <b>2</b>      ESCAPE_FONTITALIC
           <b>B</b> or <b>3</b>      ESCAPE_FONTBOLD
           <b>P</b>           ESCAPE_FONTPREV
           <b>BI</b>          ESCAPE_FONTBI

       ESCAPE_SPECIAL
           The escape sequence <b>\C</b> taking an argument delimited with the single quote character and, as a special
           exception, the escape sequences <u>not</u> having an identifier, that  is,  those  where  the  argument,  in
           standard  form, directly follows the initial backslash: <b>\C'</b>, <b>\[</b>, <b>\(</b>, <b>\</b><u>a</u>.  Note that the one-character
           argument short form can only be used for argument characters that do not clash with  escape  sequence
           identifiers.

           If the argument matches one of the forms described below under ESCAPE_UNICODE, that value is returned
           instead.

           The   ESCAPE_SPECIAL  special  character  escape  sequences  can  be  rendered  using  the  functions
           <b>mchars_spec2cp</b>() and <b>mchars_spec2str</b>() described in the <u><a href="../man3/mchars_alloc.3.html">mchars_alloc</a></u>(3) manual.

       ESCAPE_UNICODE
           Escape sequences of the same format as described above under ESCAPE_SPECIAL, but with an argument  of
           the  forms  <b>u</b><u>XXXX</u>,  <b>u</b><u>YXXXX</u>,  or <b>u10</b><u>XXXX</u> where <u>X</u> and <u>Y</u> are hexadecimal digits and <u>Y</u> is not zero: <b>\C'u</b>,
           <b>\[u</b>.  As a special exception, <u>start</u> is set to the character after the <b>u</b>, and the <u>sz</u> return value does
           not include the <b>u</b> either.

           Such Unicode character escape sequences can be rendered using the function <b>mchars_num2uc</b>()  described
           in the <u><a href="../man3/mchars_alloc.3.html">mchars_alloc</a></u>(3) manual.

       ESCAPE_NUMBERED
           The escape sequence <b>\N</b> followed by a delimited argument.  The delimiter character is arbitrary except
           that  digits  cannot be used.  If a digit is encountered instead of the opening delimiter, that digit
           is considered to be the argument and the end of the sequence, and ESCAPE_IGNORE is returned.

           Such ASCII character escape sequences can be rendered using the function <b>mchars_num2char</b>()  described
           in the <u><a href="../man3/mchars_alloc.3.html">mchars_alloc</a></u>(3) manual.

       ESCAPE_OVERSTRIKE
           The escape sequence <b>\o</b> followed by an argument delimited by an arbitrary character.

       ESCAPE_IGNORE

           <b>•</b>   The  escape  sequence  <b>\s</b> followed by an argument in standard form or by an argument delimited by
               the single quote character: <b>\s'</b>, <b>\s[</b>, <b>\s(</b>, <b>\s</b><u>a</u>.  As a special exception, an optional ‘+’  or  ‘-’
               character is allowed after the ‘s’ for all forms.

           <b>•</b>   The escape sequences <b>\F</b>, <b>\g</b>, <b>\k</b>, <b>\M</b>, <b>\m</b>, <b>\n</b>, <b>\V</b>, and <b>\Y</b> followed by an argument in standard form.

           <b>•</b>   The escape sequences <b>\A</b>, <b>\b</b>, <b>\D</b>, <b>\R</b>, <b>\X</b>, and <b>\Z</b> followed by an argument delimited by an arbitrary
               character.

           <b>•</b>   The  escape  sequences  <b>\H</b>,  <b>\h</b>,  <b>\L</b>,  <b>\l</b>,  <b>\S</b>, <b>\v</b>, and <b>\x</b> followed by an argument delimited by a
               character that cannot occur in numerical expressions.  However, if any character that  can  occur
               in  numerical expressions is found instead of a delimiter, the sequence is considered to end with
               that character, and ESCAPE_ERROR is returned.

       ESCAPE_ERROR
           Escape sequences taking an argument but not matching any of the above patterns.  In particular,  that
           happens if the end of the logical input line is reached before the end of the argument.

       For  sequences  that  do  not take an argument, the function <b>mandoc_escape</b>() returns one of the following
       values:

       ESCAPE_SKIPCHAR
           The escape sequence "\z".

       ESCAPE_NOSPACE
           The escape sequence "\c".

       ESCAPE_IGNORE
           The escape sequences "\d" and "\u".

</pre><h4><b>FILES</b></h4><pre>
       This function is implemented in <u>mandoc.c</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/mchars_alloc.3.html">mchars_alloc</a></u>(3), <u><a href="../man7/mandoc_char.7.html">mandoc_char</a></u>(7), <u><a href="../man7/roff.7.html">roff</a></u>(7)

</pre><h4><b>HISTORY</b></h4><pre>
       This function has been available since mandoc 1.11.2.

</pre><h4><b>AUTHORS</b></h4><pre>
       Kristaps Dzonsons &lt;<u><a href="mailto:kristaps@bsd.lv">kristaps@bsd.lv</a></u>&gt;
       Ingo Schwarze &lt;<u><a href="mailto:schwarze@openbsd.org">schwarze@openbsd.org</a></u>&gt;

</pre><h4><b>BUGS</b></h4><pre>
       The function doesn't cleanly distinguish between sequences  that  are  valid  and  supported,  valid  and
       ignored,  valid  and unsupported, syntactically invalid, or undefined.  For sequences that are ignored or
       unsupported, it doesn't tell whether that deficiency is likely to cause major formatting problems  and/or
       loss  of  document  content.   The function is already rather complicated and still parses some sequences
       incorrectly.

Debian                                            July 4, 2017                                  <u><a href="../man3/MANDOC_ESCAPE.3.html">MANDOC_ESCAPE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>