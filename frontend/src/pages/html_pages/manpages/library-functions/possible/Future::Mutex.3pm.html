<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"Future::Mutex" - mutual exclusion lock around code that returns Futures</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libfuture-perl">libfuture-perl_0.51-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "Future::Mutex" - mutual exclusion lock around code that returns Futures

</pre><h4><b>SYNOPSIS</b></h4><pre>
          use Future::Mutex;

          my $mutex = Future::Mutex-&gt;new;

          sub do_atomically
          {
             return $mutex-&gt;enter( sub {
                ...
                return $f;
             });
          }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Most Future-using code expects to run with some level of concurrency, using future instances to represent
       still-pending operations that will complete at some later time. There are occasions however, when this
       concurrency needs to be restricted - some operations that, once started, must not be interrupted until
       they are complete. Subsequent requests to perform the same operation while one is still outstanding must
       therefore be queued to wait until the first is finished. These situations call for a mutual-exclusion
       lock, or "mutex".

       A "Future::Mutex" instance provides one basic operation, which will execute a given block of code which
       returns a future, and itself returns a future to represent that. The mutex can be in one of two states;
       either unlocked or locked. While it is unlocked, requests to execute code are handled immediately. Once a
       block of code is invoked, the mutex is now considered to be locked, causing any subsequent requests to
       invoke code to be queued behind the first one, until it completes. Once the initial code indicates
       completion (by its returned future providing a result or failing), the next queued code is invoked.

       An instance may also be a counting mutex if initialised with a count greater than one. In this case, it
       can keep multiple blocks outstanding up to that limit, with subsequent requests queued as before. This
       allows it to act as a concurrency-bounding limit around some operation that can run concurrently, but an
       application wishes to apply overall limits to stop it growing too much, such as communications with
       external services or executing other programs.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
   <b>new</b>
          $mutex = Future::Mutex-&gt;new( count =&gt; $n );

       Returns a new "Future::Mutex" instance. It is initially unlocked.

       Takes the following named arguments:

       count =&gt; INT
               Optional number to limit outstanding concurrency. Will default to 1 if not supplied.

</pre><h4><b>METHODS</b></h4><pre>
   <b>enter</b>
          $f = $mutex-&gt;enter( \&amp;code );

       Returns a new "Future" that represents the eventual result of calling the code. If the mutex is currently
       unlocked,  the  code  will  be  invoked  immediately.  If it is currently locked, the code will be queued
       waiting for the next time it becomes unlocked.

       The code is invoked with no arguments, and is expected to return a "Future".  The eventual result of that
       future determines the result of the future that "enter" returned.

   <b>available</b>
          $avail = $mutex-&gt;available;

       Returns true if the mutex is currently unlocked, or false if it is locked.

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.40.0                                       2024-10-26                                 <u>Future::<a href="../man3pm/Mutex.3pm.html">Mutex</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>