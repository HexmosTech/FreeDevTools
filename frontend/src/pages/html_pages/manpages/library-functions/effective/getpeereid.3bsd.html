<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getpeereid — get the effective credentials of a UNIX-domain peer</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbsd-dev">libbsd-dev_0.12.2-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       getpeereid — get the effective credentials of a UNIX-domain peer

</pre><h4><b>LIBRARY</b></h4><pre>
       Utility functions from BSD systems (libbsd, -lbsd)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>
       (See <u><a href="../man7/libbsd.7.html">libbsd</a></u>(7) for include usage.)

       <u>int</u>
       <b>getpeereid</b>(<u>int</u> <u>s</u>, <u>uid_t</u> <u>*euid</u>, <u>gid_t</u> <u>*egid</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>getpeereid</b>() function returns the effective user and group IDs of the peer connected to a Unix-domain
       socket.   The  argument  <u>s</u>  must  be  a  Unix-domain socket (<u><a href="../man4/unix.4.html">unix</a></u>(4)) of type SOCK_STREAM on which either
       <u><a href="../man2/connect.2.html">connect</a></u>(2) or <u><a href="../man2/listen.2.html">listen</a></u>(2) have been called.  The effective used ID is placed in  <u>euid</u>,  and  the  effective
       group ID in <u>egid</u>.

       The  credentials returned to the <u><a href="../man2/listen.2.html">listen</a></u>(2) caller are those of its peer at the time it called <u><a href="../man2/connect.2.html">connect</a></u>(2);
       the credentials returned to the <u><a href="../man2/connect.2.html">connect</a></u>(2) caller are those of its peer at the time it called  <u><a href="../man2/listen.2.html">listen</a></u>(2).
       This  mechanism is reliable; there is no way for either side to influence the credentials returned to its
       peer except by calling the appropriate system call (i.e., either <u><a href="../man2/connect.2.html">connect</a></u>(2) or <u><a href="../man2/listen.2.html">listen</a></u>(2)) under different
       effective credentials.

       One common use of this routine is for a Unix-domain server to  verify  the  credentials  of  its  client.
       Likewise, the client can verify the credentials of the server.

</pre><h4><b>IMPLEMENTATION</b> <b>NOTES</b></h4><pre>
       On FreeBSD, <b>getpeereid</b>() is implemented in terms of the LOCAL_PEERCRED <u><a href="../man4/unix.4.html">unix</a></u>(4) socket option.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The  <b>getpeereid</b>()  function returns the value 0 if successful; otherwise the value -1 is returned and the
       global variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>getpeereid</b>() function fails if:

       [EBADF]            The argument <u>s</u> is not a valid descriptor.

       [ENOTSOCK]         The argument <u>s</u> is a file, not a socket.

       [ENOTCONN]         The argument <u>s</u> does not refer to a socket on which <u><a href="../man2/connect.2.html">connect</a></u>(2) or <u><a href="../man2/listen.2.html">listen</a></u>(2)  have  been
                          called.

       [EINVAL]           The  argument <u>s</u> does not refer to a socket of type SOCK_STREAM, or the kernel returned
                          invalid data.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/connect.2.html">connect</a></u>(2), <u><a href="../man2/getpeername.2.html">getpeername</a></u>(2), <u><a href="../man2/getsockname.2.html">getsockname</a></u>(2), <u><a href="../man2/getsockopt.2.html">getsockopt</a></u>(2), <u><a href="../man2/listen.2.html">listen</a></u>(2), <u><a href="../man4/unix.4.html">unix</a></u>(4)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>getpeereid</b>() function appeared in FreeBSD 4.6, NetBSD 5.0 and OpenBSD 3.0.

Debian                                            July 15, 2001                                 <u><a href="../man3bsd/getpeereid.3bsd.html">getpeereid</a></u>(3bsd)
</pre>
 </div>
</div></section>
</div>
</body>
</html>