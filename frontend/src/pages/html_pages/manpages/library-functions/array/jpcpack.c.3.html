<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jpcpack.c - Pack and unpack an array of float/double using JPEG2000.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libg2c-dev">libg2c-dev_2.1.0-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       jpcpack.c - Pack and unpack an array of float/double using JPEG2000.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include 'grib2_int.h'
       #include &lt;<a href="file:/usr/include/math.h">math.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;

   <b>Functions</b>
       int <b>g2c_jpcpackd</b> (double *fld, size_t width, size_t height, int *idrstmpl, unsigned char *cpack, size_t
           *lcpack)
           This function packs up a double array into a JPEG2000 code stream.
       int <b>g2c_jpcpackf</b> (float *fld, size_t width, size_t height, int *idrstmpl, unsigned char *cpack, size_t
           *lcpack)
           This function packs up a float array into a JPEG2000 code stream.
       void <b>jpcpack</b> (float *fld, <b>g2int</b> width, <b>g2int</b> height, <b>g2int</b> *idrstmpl, unsigned char *cpack, <b>g2int</b>
           *lcpack)
           This function packs up a float array into a JPEG2000 code stream.
       static int <b>jpcpack_int</b> (void *fld, int fld_is_double, <b>g2int</b> width, <b>g2int</b> height, <b>g2int</b> *idrstmpl,
           unsigned char *cpack, <b>g2int</b> *lcpack, int verbose)
           Packs a float or double array into a JPEG2000 code stream.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Pack and unpack an array of float/double using JPEG2000.

       <b>Author</b>
           Stephen Gilbert

       <b>Date</b>
           2003-08-17

   <b>Program</b> <b>History</b> <b>Log</b>
       Date   Programmer   Comments    2003-08-17   Gilbert   Initial.    2004-11-92   Gilbert   Fixed bug
       packing a near constant field.    2004-07-19   Gilbert   If jpeg2000 encoding fails, try again with
       different encoder options.    2005-05-10   Gilbert   Imposed minimum size on cpack.    2022-08-12
       Hartnett   Now handle doubles too.

       Definition in file <b>jpcpack.c</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>g2c_jpcpackd</b> <b>(double</b> <b>*</b> <b>fld,</b> <b>size_t</b> <b>width,</b> <b>size_t</b> <b>height,</b> <b>int</b> <b>*</b> <b>idrstmpl,</b> <b>unsigned</b> <b>char</b> <b>*</b> <b>cpack,</b> <b>size_t</b> <b>*</b>
       <b>lcpack)</b>
       This function packs up a double array into a JPEG2000 code stream. After the data are scaled, and the
       reference value is subtracted out, the data are treated as a grayscale image and passed to a JPEG2000
       encoder.

       This function also fills in GRIB2 Data Representation Template 5.40 or 5.40000 with the appropriate
       values.

       This function is the V2 API version of <b>jpcpack()</b> for doubles.

       <b>Parameters</b>
           <u>fld</u> Pointer to the double data values to pack.
           <u>width</u> The number of points in the x direction.
           <u>height</u> The number of points in the y direction.
           <u>idrstmpl</u> Contains the array of values for Data Representation Template Table 5.40 or 5.40000.

           • 0 Reference value - ignored on input, set by jpcpack routine.

           • 1 Binary Scale Factor - used on input, unchanged by jpcpack routine.

           • 2 Decimal Scale Factor - used on input, unchanged by jpcpack routine.

           • 3 number of bits for each data value - ignored on input

           • 4  Original  field  type  - currently ignored on input Data values assumed to be reals. Set to 0 on
             output.

           • 5 if 0 use lossless compression, if 1 use lossy compression.

           • 6 Desired compression ratio, if idrstmpl[5]=1. Set to 255, if idrstmpl[5]=0.  May  be  modified  in
             this function.

           <u>cpack</u>  A  pointer  that  will  get  the  packed data field. Must be allocated before this function is
           called. Pass the allocated size in the lcpack parameter.
           <u>lcpack</u> Pointer that gets the length of packed field in  cpack.  This  must  be  set  by  the  calling
           function to the size available in cpack.

       <b>Returns</b>

           • <b>G2C_NOERROR</b> No error.

           • <b>G2C_EJPEG</b> Error encoding/decoding JPEG data.

       <b>Author</b>
           Ed Hartnett

       Definition at line <b>386</b> of file <b>jpcpack.c</b>.

       References <b>G2C_JPEG_DRS_TEMPLATE_LEN</b>, and <b>jpcpack_int()</b>.

   <b>int</b>  <b>g2c_jpcpackf</b>  <b>(float</b> <b>*</b> <b>fld,</b> <b>size_t</b> <b>width,</b> <b>size_t</b> <b>height,</b> <b>int</b> <b>*</b> <b>idrstmpl,</b> <b>unsigned</b> <b>char</b> <b>*</b> <b>cpack,</b> <b>size_t</b> <b>*</b>
       <b>lcpack)</b>
       This function packs up a float array into a JPEG2000 code stream. After the  data  are  scaled,  and  the
       reference  value  is  subtracted  out, the data are treated as a grayscale image and passed to a JPEG2000
       encoder.

       This function also fills in GRIB2 Data Representation Template  5.40  or  5.40000  with  the  appropriate
       values.

       This function is the V2 API version of <b>jpcpack()</b> for floats.

       <b>Parameters</b>
           <u>fld</u> Pointer to the float data values to pack.
           <u>width</u> The number of points in the x direction.
           <u>height</u> The number of points in the y direction.
           <u>idrstmpl</u> Contains the array of values for Data Representation Template Table 5.40 or 5.40000.

           • 0 Reference value - ignored on input, set by jpcpack routine.

           • 1 Binary Scale Factor - used on input, unchanged by jpcpack routine.

           • 2 Decimal Scale Factor - used on input, unchanged by jpcpack routine.

           • 3 number of bits for each data value - ignored on input

           • 4  Original  field  type  - currently ignored on input Data values assumed to be reals. Set to 0 on
             output.

           • 5 if 0 use lossless compression, if 1 use lossy compression.

           • 6 Desired compression ratio, if idrstmpl[5]=1. Set to 255, if idrstmpl[5]=0.  May  be  modified  in
             this function.

           <u>cpack</u>  A  pointer  that  will  get  the  packed data field. Must be allocated before this function is
           called. Pass the allocated size in the lcpack parameter.
           <u>lcpack</u> Pointer that gets the length of packed field in  cpack.  This  must  be  set  by  the  calling
           function to the size available in cpack.

       <b>Returns</b>

           • <b>G2C_NOERROR</b> No error.

           • <b>G2C_EJPEG</b> Error encoding/decoding JPEG data.

       <b>Author</b>
           Ed Hartnett

       Definition at line <b>320</b> of file <b>jpcpack.c</b>.

       References <b>G2C_JPEG_DRS_TEMPLATE_LEN</b>, and <b>jpcpack_int()</b>.

   <b>void</b>  <b>jpcpack</b>  <b>(float</b>  <b>*</b>  <b>fld,</b>  <b>g2int</b>  <b>width,</b>  <b>g2int</b> <b>height,</b> <b>g2int</b> <b>*</b> <b>idrstmpl,</b> <b>unsigned</b> <b>char</b> <b>*</b> <b>cpack,</b> <b>g2int</b> <b>*</b>
       <b>lcpack)</b>
       This function packs up a float array into a JPEG2000 code stream. After the  data  are  scaled,  and  the
       reference  value  is  subtracted  out, the data are treated as a grayscale image and passed to a JPEG2000
       encoder.

       This function also fills in GRIB2 Data Representation Template  5.40  or  5.40000  with  the  appropriate
       values.

       <b>Parameters</b>
           <u>fld</u> Pointer to the float data values to pack.
           <u>width</u> The number of points in the x direction.
           <u>height</u> The number of points in the y direction.
           <u>idrstmpl</u> Contains the array of values for Data Representation Template Table 5.40 or 5.40000.

           • 0 Reference value - ignored on input, set by jpcpack routine.

           • 1 Binary Scale Factor - used on input, unchanged by jpcpack routine.

           • 2 Decimal Scale Factor - used on input, unchanged by jpcpack routine.

           • 3 number of bits for each data value - ignored on input

           • 4  Original  field  type  - currently ignored on input Data values assumed to be reals. Set to 0 on
             output.

           • 5 if 0 use lossless compression, if 1 use lossy compression.

           • 6 Desired compression ratio, if idrstmpl[5]=1. Set to 255, if idrstmpl[5]=0.  May  be  modified  in
             this function.

           <u>cpack</u>  A  pointer  that  will  get  the  packed data field. Must be allocated before this function is
           called. Pass the allocated size in the lcpack parameter.
           <u>lcpack</u> Pointer that gets the length of packed field in  cpack.  This  must  be  set  by  the  calling
           function to the size available in cpack.

       <b>Author</b>
           Stephen Gilbert, Ed Hartnett

       Definition at line <b>269</b> of file <b>jpcpack.c</b>.

       References <b>jpcpack_int()</b>.

       Referenced by <b>g2_addfield()</b>.

   <b>static</b>  <b>int</b> <b>jpcpack_int</b> <b>(void</b> <b>*</b> <b>fld,</b> <b>int</b> <b>fld_is_double,</b> <b>g2int</b> <b>width,</b> <b>g2int</b> <b>height,</b> <b>g2int</b> <b>*</b> <b>idrstmpl,</b> <b>unsigned</b>
       <b>char</b> <b>*</b> <b>cpack,</b> <b>g2int</b> <b>*</b> <b>lcpack,</b> <b>int</b> <b>verbose)</b> <b>[static]</b>
       Packs a float or double array  into  a  JPEG2000  code  stream.  This  function  is  used  by  <b>jpcpack()</b>,
       <b>g2c_jpcpackf()</b>, and <b>g2c_jpcpackd()</b>.

       <b>Parameters</b>
           <u>fld</u> Pointer to the float or double data values to pack.
           <u>fld_is_double</u> If non-zero, then fld points to array of doubles, otherwise an array of floats.
           <u>width</u> The number of points in the x direction.
           <u>height</u> The number of points in the y direction.
           <u>idrstmpl</u>  Contains the array of values for Data Representation Template Table 5.40 or 5.40000. May be
           modified in this function.
           <u>cpack</u> A pointer that will get the packed data field.  Must  be  allocated  before  this  function  is
           called. Pass the allocated size in the lcpack parameter.
           <u>lcpack</u>  Pointer  that  gets the length of packed field in cpack. This must also be set by the calling
           function to the size available in cpack.
           <u>verbose</u> If non-zero, error messages will be printed in case of error. Otherwise, error codes will  be
           return  but  no  error messages printed. Calls to the original g2c API may cause error messages to be
           printed in case of error. For the new g2c_ API, no error messages will be printed - instead an  error
           code will be returned. Call <b>g2c_strerror()</b> to get the error message for any error code.

       <b>Returns</b>

           • <b>G2C_NOERROR</b> No error.

           • <b>G2C_EJPEG</b> Error encoding/decoding JPEG data.

       <b>Author</b>
           Stephen Gilbert, Ed Hartnett

       Definition at line <b>54</b> of file <b>jpcpack.c</b>.

       References <b>ALOG2</b>, <b>enc_jpeg2000()</b>, <b>G2C_EJPEG</b>, <b>G2C_NOERROR</b>, <b>int_power()</b>, <b>LOG</b>, <b>mkieee()</b>, and <b>sbits()</b>.

       Referenced by <b>g2c_jpcpackd()</b>, <b>g2c_jpcpackf()</b>, and <b>jpcpack()</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for NCEPLIBS-g2c from the source code.

NCEPLIBS-g2c                                      Version 2.1.0                                     <u><a href="../man3/jpcpack.c.3.html">jpcpack.c</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>