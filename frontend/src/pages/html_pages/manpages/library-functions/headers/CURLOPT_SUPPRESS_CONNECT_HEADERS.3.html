<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_SUPPRESS_CONNECT_HEADERS - suppress proxy CONNECT response headers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_SUPPRESS_CONNECT_HEADERS - suppress proxy CONNECT response headers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_SUPPRESS_CONNECT_HEADERS, long onoff);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       When  <u><a href="../man3/CURLOPT_HTTPPROXYTUNNEL.3.html">CURLOPT_HTTPPROXYTUNNEL</a>(3)</u>  is  used and a CONNECT request is made, suppress proxy CONNECT response
       headers from the user callback functions <u><a href="../man3/CURLOPT_HEADERFUNCTION.3.html">CURLOPT_HEADERFUNCTION</a>(3)</u> and <u><a href="../man3/CURLOPT_WRITEFUNCTION.3.html">CURLOPT_WRITEFUNCTION</a>(3)</u>.

       Proxy CONNECT response headers can complicate header processing since it is essentially a separate set of
       headers. You can enable this option to suppress those headers.

       For example let's assume an HTTPS URL is to be retrieved via CONNECT. On success there would normally  be
       two sets of headers, and each header line sent to the header function and/or the write function. The data
       given to the callbacks would look like this:

       HTTP/1.1 200 Connection established
       {headers}
       ...

       HTTP/1.1 200 OK
       Content-Type: application/json
       {headers}
       ...

       {body}
       ...

       However  by  enabling  this  option the CONNECT response headers are suppressed, so the data given to the
       callbacks would look like this:

       HTTP/1.1 200 OK
       Content-Type: application/json
       {headers}
       ...

       {body}
       ...

</pre><h4><b>DEFAULT</b></h4><pre>
       0

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");

           curl_easy_setopt(curl, CURLOPT_HEADER, 1L);
           curl_easy_setopt(curl, CURLOPT_PROXY, "<a href="http://foo">http://foo</a>:3128");
           curl_easy_setopt(curl, CURLOPT_HTTPPROXYTUNNEL, 1L);
           curl_easy_setopt(curl, CURLOPT_SUPPRESS_CONNECT_HEADERS, 1L);

           curl_easy_perform(curl);

           /* always cleanup */
           curl_easy_cleanup(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.54.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       CURLE_OK or an error such as CURLE_UNKNOWN_OPTION.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_HEADER.3.html">CURLOPT_HEADER</a></b>(3), <b><a href="../man3/CURLOPT_HTTPPROXYTUNNEL.3.html">CURLOPT_HTTPPROXYTUNNEL</a></b>(3), <b><a href="../man3/CURLOPT_PROXY.3.html">CURLOPT_PROXY</a></b>(3)

libcurl                                            2025-06-16                <u><a href="../man3/CURLOPT_SUPPRESS_CONNECT_HEADERS.3.html">CURLOPT_SUPPRESS_CONNECT_HEADERS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>