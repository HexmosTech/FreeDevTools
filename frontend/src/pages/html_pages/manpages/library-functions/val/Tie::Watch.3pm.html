<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tie::Watch - place watchpoints on Perl variables.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/perl-tk">perl-tk_804.036+dfsg1-5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
        Tie::Watch - place watchpoints on Perl variables.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Tie::Watch;

        $watch = Tie::Watch-&gt;new(
            -variable =&gt; \$frog,
            -debug    =&gt; 1,
            -shadow   =&gt; 0,
            -fetch    =&gt; [\&amp;fetch, 'arg1', 'arg2', ..., 'argn'],
            -store    =&gt; \&amp;store,
            -destroy  =&gt; sub {print "Final value=$frog.\n"},
        }
        %vinfo = $watch-&gt;Info;
        $args  = $watch-&gt;Args(-fetch);
        $val   = $watch-&gt;Fetch;
        print "val=", $watch-&gt;Say($val), ".\n";
        $watch-&gt;Store('Hello');
        $watch-&gt;Unwatch;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class module binds one or more subroutines of your devising to a Perl variable.  All variables can
       have <b>FETCH</b>, <b>STORE</b> and <b>DESTROY</b> callbacks.  Additionally, arrays can define <b>CLEAR</b>, <b>DELETE</b>, <b>EXISTS</b>, <b>EXTEND</b>,
       <b>FETCHSIZE</b>, <b>POP</b>, <b>PUSH</b>, <b>SHIFT</b>, <b>SPLICE</b>, <b>STORESIZE</b> and <b>UNSHIFT</b> callbacks, and hashes can define <b>CLEAR</b>,
       <b>DELETE</b>, <b>EXISTS</b>, <b>FIRSTKEY</b> and <b>NEXTKEY</b> callbacks.  If these term are unfamiliar to you, I <u>really</u> suggest
       you read perltie.

       With Tie::Watch you can:

        . alter a variable's value
        . prevent a variable's value from being changed
        . invoke a Perl/Tk callback when a variable changes
        . trace references to a variable

       Callback format is patterned after the Perl/Tk scheme: supply either a code reference, or, supply an
       array reference and pass the callback code reference in the first element of the array, followed by
       callback arguments.  (See examples in the Synopsis, above.)

       Tie::Watch provides default callbacks for any that you fail to specify.  Other than negatively impacting
       performance, they perform the standard action that you'd expect, so the variable behaves "normally".
       Once you override a default callback, perhaps to insert debug code like print statements, your callback
       normally finishes by calling the underlying (overridden) method.  But you don't have to!

       To map a tied method name to a default callback name simply lowercase the tied method name and uppercase
       its first character.  So FETCH becomes Fetch, NEXTKEY becomes Nextkey, etcetera.

       Here are two callbacks for a scalar. The <b>FETCH</b> (read) callback does nothing other than illustrate the
       fact that it returns the value to assign the variable.  The <b>STORE</b> (write) callback uppercases the
       variable and returns it.  In all cases the callback <u>must</u> return the correct read or write value -
       typically, it does this by invoking the underlying method.

        my $fetch_scalar = sub {
            my($self) = @_;
            $self-&gt;Fetch;
        };

        my $store_scalar = sub {
            my($self, $new_val) = @_;
            $self-&gt;Store(uc $new_val);
        };

       Here are <b>FETCH</b> and <b>STORE</b> callbacks for either an array or hash.  They do essentially the same thing as
       the scalar callbacks, but provide a little more information.

        my $fetch = sub {
            my($self, $key) = @_;
            my $val = $self-&gt;Fetch($key);
            print "In fetch callback, key=$key, val=", $self-&gt;Say($val);
            my $args = $self-&gt;Args(-fetch);
            print ", args=('", join("', '",  @$args), "')" if $args;
            print ".\n";
            $val;
        };

        my $store = sub {
            my($self, $key, $new_val) = @_;
            my $val = $self-&gt;Fetch($key);
            $new_val = uc $new_val;
            $self-&gt;Store($key, $new_val);
            print "In store callback, key=$key, val=", $self-&gt;Say($val),
              ", new_val=", $self-&gt;Say($new_val);
            my $args = $self-&gt;Args(-store);
            print ", args=('", join("', '",  @$args), "')" if $args;
            print ".\n";
            $new_val;
        };

       In all cases, the first parameter is a reference to the Watch object, used to invoke the following class
       methods.

</pre><h4><b>METHODS</b></h4><pre>
       $watch = Tie::Watch-&gt;new(-options =&gt; values);
           The  watchpoint  constructor method that accepts option/value pairs to create and configure the Watch
           object.  The only required option is <b>-variable</b>.

           <b>-variable</b> is a <u>reference</u> to a scalar, array or hash variable.

           <b>-debug</b> (default 0) is 1 to activate debug print statements internal to Tie::Watch.

           <b>-shadow</b> (default 1) is 0 to  disable  array  and  hash  shadowing.   To  prevent  infinite  recursion
           Tie::Watch  maintains  parallel  variables for arrays and hashes.  When the watchpoint is created the
           parallel shadow variable is initialized with the watched variable's contents, and when the watchpoint
           is deleted the shadow variable is copied to the original variable.  Thus,  changes  made  during  the
           watch  process  are not lost.  Shadowing is on my default.  If you disable shadowing any changes made
           to an array or hash are lost when the watchpoint is deleted.

           Specify any of the following relevant callback parameters, in the  format  described  above:  <b>-fetch</b>,
           <b>-store</b>,  <b>-destroy</b>.   Additionally  for  arrays:  <b>-clear</b>,  <b>-extend</b>,  <b>-fetchsize</b>,  <b>-pop</b>, <b>-push</b>, <b>-shift</b>,
           <b>-splice</b>, <b>-storesize</b> and <b>-unshift</b>.  Additionally for hashes: <b>-clear</b>, <b>-delete</b>, <b>-exists</b>,  <b>-firstkey</b>  and
           <b>-nextkey</b>.

       $args = $watch-&gt;Args(-fetch);
           Returns a reference to a list of arguments for the specified callback, or undefined if none.

       $watch-&gt;<b>Fetch()</b>;  $watch-&gt;Fetch($key);
           Returns a variable's current value.  $key is required for an array or hash.

       %vinfo = $watch-&gt;<b>Info()</b>;
           Returns a hash detailing the internals of the Watch object, with these keys:

            %vinfo = {
                -variable =&gt;  <a href="../man0x200737f8/SCALAR.0x200737f8.html">SCALAR</a>(0x200737f8)
                -debug    =&gt;  '0'
                -shadow   =&gt;  '1'
                -value    =&gt;  'HELLO SCALAR'
                -destroy  =&gt;  <a href="../man0x200f86cc/ARRAY.0x200f86cc.html">ARRAY</a>(0x200f86cc)
                -fetch    =&gt;  <a href="../man0x200f8558/ARRAY.0x200f8558.html">ARRAY</a>(0x200f8558)
                -store    =&gt;  <a href="../man0x200f85a0/ARRAY.0x200f85a0.html">ARRAY</a>(0x200f85a0)
                -legible  =&gt;  above data formatted as a list of string, for printing
            }

           For  array and hash Watch objects, the <b>-value</b> key is replaced with a <b>-ptr</b> key which is a reference to
           the parallel array or hash.  Additionally, for an array or hash, there are key/value  pairs  for  all
           the variable specific callbacks.

       $watch-&gt;Say($val);
           Used  mainly  for  debugging,  it  returns  $val in quotes if required, or the string "undefined" for
           undefined values.

       $watch-&gt;Store($new_val);  $watch-&gt;Store($key, $new_val);
           Store a variable's new value.  $key is required for an array or hash.

       $watch-&gt;<b>Unwatch()</b>;
           Stop watching the variable.

</pre><h4><b>EFFICIENCY</b> <b>CONSIDERATIONS</b></h4><pre>
       If you can live using the class methods provided, please do so.  You can  meddle  with  the  object  hash
       directly and improved watch performance, at the risk of your code breaking in the future.

</pre><h4><b>AUTHOR</b></h4><pre>
       Stephen O. Lidie

</pre><h4><b>HISTORY</b></h4><pre>
        <a href="mailto:lusol@Lehigh.EDU">lusol@Lehigh.EDU</a>, LUCC, 96/05/30
        . Original version 0.92 release, based on the Trace module from Hans Mulder,
          and ideas from Tim Bunce.

        <a href="mailto:lusol@Lehigh.EDU">lusol@Lehigh.EDU</a>, LUCC, 96/12/25
        . Version 0.96, release two inner references detected by Perl 5.004.

        <a href="mailto:lusol@Lehigh.EDU">lusol@Lehigh.EDU</a>, LUCC, 97/01/11
        . Version 0.97, fix Makefile.PL and MANIFEST (thanks Andreas Koenig).
          Make sure test.pl doesn't fail if Tk isn't installed.

        <a href="mailto:Stephen.O.Lidie@Lehigh.EDU">Stephen.O.Lidie@Lehigh.EDU</a>, Lehigh University Computing Center, 97/10/03
        . Version 0.98, implement -shadow option for arrays and hashes.

        <a href="mailto:Stephen.O.Lidie@Lehigh.EDU">Stephen.O.Lidie@Lehigh.EDU</a>, Lehigh University Computing Center, 98/02/11
        . Version 0.99, finally, with Perl 5.004_57, we can completely watch arrays.
          With tied array support this module is essentially complete, so its been
          optimized for speed at the expense of clarity - sorry about that. The
          Delete() method has been renamed Unwatch() because it conflicts with the
          builtin delete().

        <a href="mailto:Stephen.O.Lidie@Lehigh.EDU">Stephen.O.Lidie@Lehigh.EDU</a>, Lehigh University Computing Center, 99/04/04
        . Version 1.0, for Perl 5.005_03, update Makefile.PL for ActiveState, and
          add two examples (one for Perl/Tk).

        <a href="mailto:sol0@lehigh.edu">sol0@lehigh.edu</a>, Lehigh University Computing Center, 2003/06/07
        . Version 1.1, for Perl 5.8, can trace a reference now, patch from Slaven
          Rezic.

        <a href="mailto:sol0@lehigh.edu">sol0@lehigh.edu</a>, Lehigh University Computing Center, 2005/05/17
        . Version 1.2, for Perl 5.8, per Rob Seegel's suggestion, support array
          DELETE and EXISTS.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 1996 - 2005 Stephen O. Lidie. All rights reserved.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

Tk804.036                                          2025-04-13                                    <u>Tie::<a href="../man3pm/Watch.3pm.html">Watch</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>