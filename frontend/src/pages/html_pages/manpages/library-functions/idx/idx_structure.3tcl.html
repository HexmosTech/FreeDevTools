<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>doctools::idx::structure - Docidx serialization utilities</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       doctools::idx::structure - Docidx serialization utilities

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>doctools::idx::structure</b> <b>?0.2?</b>

       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>logger</b>

       package require <b>snit</b>

       <b>::doctools::idx::structure</b> <b>verify</b> <u>serial</u> ?<u>canonvar</u>?

       <b>::doctools::idx::structure</b> <b>verify-as-canonical</b> <u>serial</u>

       <b>::doctools::idx::structure</b> <b>canonicalize</b> <u>serial</u>

       <b>::doctools::idx::structure</b> <b>print</b> <u>serial</u>

       <b>::doctools::idx::structure</b> <b>merge</b> <u>seriala</u> <u>serialb</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides  commands  to  work  with the serializations of keyword indices as managed by the
       doctools system v2, and specified in section <b>Keyword</b> <b>index</b> <b>serialization</b> <b>format</b>.

       This is an internal package of doctools, for use by the higher level packages  handling  keyword  indices
       and their conversion into and out of various other formats, like documents written using <u>docidx</u> markup.

</pre><h4><b>API</b></h4><pre>
       <b>::doctools::idx::structure</b> <b>verify</b> <u>serial</u> ?<u>canonvar</u>?
              This  command  verifies  that  the content of <u>serial</u> is a valid <u>regular</u> serialization of a keyword
              index and will throw an error if that is not the case. The result of  the  command  is  the  empty
              string.

              If  the  argument <u>canonvar</u> is specified it is interpreted as the name of a variable in the calling
              context. This variable will be written to if and only if <u>serial</u> is a valid regular  serialization.
              Its  value  will  be a boolean, with <b>True</b> indicating that the serialization is not only valid, but
              also <u>canonical</u>. <b>False</b> will be written for a valid, but non-canonical serialization.

              For the specification of regular and  canonical  keyword  index  serializations  see  the  section
              <b>Keyword</b> <b>index</b> <b>serialization</b> <b>format</b>.

       <b>::doctools::idx::structure</b> <b>verify-as-canonical</b> <u>serial</u>
              This  command  verifies that the content of <u>serial</u> is a valid <u>canonical</u> serialization of a keyword
              index and will throw an error if that is not the case. The result of  the  command  is  the  empty
              string.

              For  the  specification  of  canonical  keyword index serializations see the section <b>Keyword</b> <b>index</b>
              <b>serialization</b> <b>format</b>.

       <b>::doctools::idx::structure</b> <b>canonicalize</b> <u>serial</u>
              This command assumes that the content of <u>serial</u> is a valid  <u>regular</u>  serialization  of  a  keyword
              index and will throw an error if that is not the case.

              It will then convert the input into the <u>canonical</u> serialization of the contained keyword index and
              return it as its result. If the input is already canonical it will be returned unchanged.

              For  the  specification  of  regular  and  canonical  keyword index serializations see the section
              <b>Keyword</b> <b>index</b> <b>serialization</b> <b>format</b>.

       <b>::doctools::idx::structure</b> <b>print</b> <u>serial</u>
              This command assumes that the argument <u>serial</u> contains a valid regular serialization of a  keyword
              index and returns a string containing that index in a human readable form.

              The  exact  format  of  this  form  is  not specified and cannot be relied on for parsing or other
              machine-based activities.

              For the specification of regular keyword  index  serializations  see  the  section  <b>Keyword</b>  <b>index</b>
              <b>serialization</b> <b>format</b>.

       <b>::doctools::idx::structure</b> <b>merge</b> <u>seriala</u> <u>serialb</u>
              This  command  accepts  the  regular serializations of two keyword indices and uses them to create
              their union.  The result of the command is the canonical serialization  of  this  unified  keyword
              index.

              Title  and  label of the resulting index are taken from the index contained in <u>serialb</u>. The set of
              keys, references and their connections is the union of the set of keys and references of  the  two
              inputs.

              For  the  specification  of  regular  and  canonical  keyword index serializations see the section
              <b>Keyword</b> <b>index</b> <b>serialization</b> <b>format</b>.

</pre><h4><b>KEYWORD</b> <b>INDEX</b> <b>SERIALIZATION</b> <b>FORMAT</b></h4><pre>
       Here we specify the format used by the doctools v2 packages to serialize  keyword  indices  as  immutable
       values for transport, comparison, etc.

       We distinguish between <u>regular</u> and <u>canonical</u> serializations. While a keyword index may have more than one
       regular serialization only exactly one of them will be <u>canonical</u>.

       regular serialization

              [1]    An index serialization is a nested Tcl dictionary.

              [2]    This  dictionary  holds  a  single  key, <b>doctools::idx</b>, and its value. This value holds the
                     contents of the index.

              [3]    The contents of the index are a Tcl dictionary holding the title of the index, a label, and
                     the keywords and references. The relevant keys and their values are

                     <b>title</b>  The value is a string containing the title of the index.

                     <b>label</b>  The value is a string containing a label for the index.

                     <b>keywords</b>
                            The value is a Tcl dictionary, using the keywords known to the index  as  keys.  The
                            associated  values are lists containing the identifiers of the references associated
                            with that particular keyword.

                            Any reference identifier used in these lists has to exist as a key in the <b>references</b>
                            dictionary, see the next item for its definition.

                     <b>references</b>
                            The value is a Tcl dictionary, using the identifiers for the references known to the
                            index as keys. The associated values are 2-element lists  containing  the  type  and
                            label of the reference, in this order.

                            Any  key here has to be associated with at least one keyword, i.e. occur in at least
                            one of the reference lists which are the values  in  the  <b>keywords</b>  dictionary,  see
                            previous item for its definition.

              [4]    The <u>type</u> of a reference can be one of two values,

                     <b>manpage</b>
                            The  identifier  of the reference is interpreted as symbolic file name, referring to
                            one of the documents the index was made for.

                     <b>url</b>    The identifier of the reference is interpreted as an url, referring to some external
                            location, like a website, etc.

       canonical serialization
              The canonical serialization of a keyword index has the format as specified in the  previous  item,
              and then additionally satisfies the constraints below, which make it unique among all the possible
              serializations of the keyword index.

              [1]    The keys found in all the nested Tcl dictionaries are sorted in ascending dictionary order,
                     as generated by Tcl's builtin command <b>lsort</b> <b>-increasing</b> <b>-dict</b>.

              [2]    The  references  listed  for  each  keyword  of  the index, if any, are listed in ascending
                     dictionary order of their <u>labels</u>, as generated by Tcl's builtin command  <b>lsort</b>  <b>-increasing</b>
                     <b>-dict</b>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category  <u>doctools</u>  of  the  <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       deserialization, docidx, doctools, serialization

</pre><h4><b>CATEGORY</b></h4><pre>
       Documentation tools

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2009 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 0.2                        <u>doctools::idx::<a href="../man3tcl/structure.3tcl.html">structure</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>