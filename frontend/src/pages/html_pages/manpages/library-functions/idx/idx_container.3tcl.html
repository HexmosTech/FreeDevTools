<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>doctools::idx - Holding keyword indices</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       doctools::idx - Holding keyword indices

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>doctools::idx</b> <b>?2.1?</b>

       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>doctools::idx::structure</b>

       package require <b>snit</b>

       <b>::doctools::idx</b> <u>objectName</u>

       <b>objectName</b> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <u>objectName</u> <b>destroy</b>

       <u>objectName</u> <b>key</b> <b>add</b> <u>name</u>

       <u>objectName</u> <b>key</b> <b>remove</b> <u>name</u>

       <u>objectName</u> <b>key</b> <b>references</b> <u>name</u>

       <u>objectName</u> <b>keys</b>

       <u>objectName</u> <b>reference</b> <b>add</b> <u>type</u> <u>key</u> <u>name</u> <u>label</u>

       <u>objectName</u> <b>reference</b> <b>remove</b> <u>name</u>

       <u>objectName</u> <b>reference</b> <b>label</b> <u>name</u>

       <u>objectName</u> <b>reference</b> <b>keys</b> <u>name</u>

       <u>objectName</u> <b>reference</b> <b>type</b> <u>name</u>

       <u>objectName</u> <b>references</b>

       <u>objectName</u> <b>title</b>

       <u>objectName</u> <b>title</b> <u>text</u>

       <u>objectName</u> <b>label</b>

       <u>objectName</u> <b>label</b> <u>text</u>

       <u>objectName</u> <b>importer</b>

       <u>objectName</u> <b>importer</b> <u>object</u>

       <u>objectName</u> <b>exporter</b>

       <u>objectName</u> <b>exporter</b> <u>object</u>

       <u>objectName</u> <b>deserialize</b> <b>=</b> <u>data</u> ?<u>format</u>?

       <u>objectName</u> <b>deserialize</b> <b>+=</b> <u>data</u> ?<u>format</u>?

       <u>objectName</u> <b>serialize</b> ?<u>format</u>?

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This package provides a class to contain and programmatically manipulate keyword indices

       This  is  one  of  the  three  public pillars the management of keyword indices resides on. The other two
       pillars are

       [1]    <u>Exporting</u> <u>keyword</u> <u>indices</u>, and

       [2]    <u>Importing</u> <u>keyword</u> <u>indices</u>

       For information about the <b>Concepts</b> of keyword indices, and their parts, see the same-named section.   For
       information  about  the  data structure which is used to encode keyword indices as values see the section
       <b>Keyword</b> <b>index</b> <b>serialization</b> <b>format</b>.  This is the only format directly known to  this  class.  Conversions
       from and to any other format are handled by export and import manager objects. These may be attached to a
       container, but do not have to be, it is merely a convenience.

</pre><h4><b>CONCEPTS</b></h4><pre>
       [1]    A <u>keyword</u> <u>index</u> consists of a (possibly empty) set of <u>keywords</u>.

       [2]    Each keyword in the set is identified by its name.

       [3]    Each keyword has a (possibly empty) set of <u>references</u>.

       [4]    A reference can be associated with more than one keyword.

       [5]    A reference not associated with at least one keyword is not possible however.

       [6]    Each  reference  is  identified  by  its  target, specified as either an url or symbolic filename,
              depending on the type of reference (<b>url</b>, or <b>manpage</b>).

       [7]    The type of a reference (url, or manpage) depends only  on  the  reference  itself,  and  not  the
              keywords it is associated with.

       [8]    In  addition  to a type each reference has a descriptive label as well. This label depends only on
              the reference itself, and not the keywords it is associated with.

       A few notes

       [1]    Manpage references are intended to be used for references to the documents the index is made  for.
              Their  target  is  a  symbolic  file name identifying the document, and export plugins may replace
              symbolic with actual file names, if specified.

       [2]    Url references are intended on the othre hand are inteded to be used for links to  anything  else,
              like websites. Their target is an url.

       [3]    While  url  and  manpage  references  share  a  namespace for their identifiers, this should be no
              problem, given that manpage identifiers are symbolic filenames and as such they should never  look
              like urls, the identifiers for url references.

</pre><h4><b>API</b></h4><pre>
   <b>PACKAGE</b> <b>COMMANDS</b>
       <b>::doctools::idx</b> <u>objectName</u>
              This  command  creates  a  new  container  object  with  an  associated  Tcl command whose name is
              <u>objectName</u>. This <u>object</u> command is explained in full detail in the  sections  <b>Object</b>  <b>command</b>  and
              <b>Object</b>  <b>methods</b>.  The object command will be created under the current namespace if the <u>objectName</u>
              is not fully qualified, and in the specified namespace otherwise.

   <b>OBJECT</b> <b>COMMAND</b>
       All objects created by the <b>::doctools::idx</b> command have the following general form:

       <b>objectName</b> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?
              The method <b>method</b> and its <u>arg</u>'uments determine the exact behavior of  the  command.   See  section
              <b>Object</b> <b>methods</b> for the detailed specifications.

   <b>OBJECT</b> <b>METHODS</b>
       <u>objectName</u> <b>destroy</b>
              This method destroys the object it is invoked for.

       <u>objectName</u> <b>key</b> <b>add</b> <u>name</u>
              This  method  adds the keyword <u>name</u> to the index. If the keyword is already known nothing is done.
              The result of the method is the empty string.

       <u>objectName</u> <b>key</b> <b>remove</b> <u>name</u>
              This method removes the keyword <u>name</u> from the index. If the keyword is  already  gone  nothing  is
              done.  Any  references  for  whom  this keyword was the last association are removed as well.  The
              result of the method is the empty string.

       <u>objectName</u> <b>key</b> <b>references</b> <u>name</u>
              This method returns a list containing the names of all  references  associated  with  the  keyword
              <u>name</u>.  An error is thrown in the keyword is not known to the index. The order of the references in
              the list is undefined.

       <u>objectName</u> <b>keys</b>
              This method returns a list containing the names of all keywords known to the index. The  order  of
              the keywords in the list is undefined.

       <u>objectName</u> <b>reference</b> <b>add</b> <u>type</u> <u>key</u> <u>name</u> <u>label</u>
              This  method  adds  the  reference  <u>name</u> to the index and associates it with the keyword <u>key</u>.  The
              other two arguments hold the <u>type</u> and <u>label</u> of the reference, respectively.  The type has to match
              the stored information, should the reference exist already, i.e.  this  information  is  immutable
              after the reference is known. The only way to change it is delete and recreate the reference.  The
              label  on  the  other  hand is automatically updated to the value of the argument, overwriting any
              previously stored information.  Should the reference exists already it is simply  associated  with
              the <u>key</u>.  If that is true already as well nothing is done, but the <u>label</u> updated to the new value.
              The result of the method is the empty string.

              The <u>type</u> argument has be to one of <b>manpage</b> or <b>url</b>.

       <u>objectName</u> <b>reference</b> <b>remove</b> <u>name</u>
              The  reference <u>name</u> is removed from the index. All associations with keywords are released and the
              relevant reference labels removed.  The result of the method is the empty string.

       <u>objectName</u> <b>reference</b> <b>label</b> <u>name</u>
              This method returns the label associated with the reference  <u>name</u>.  An  error  is  thrown  if  the
              reference is not known.

       <u>objectName</u> <b>reference</b> <b>keys</b> <u>name</u>
              This  method  returns  a  list  containing the names of all keywords associated with the reference
              <u>name</u>. An error is thrown in the reference is not known to the index. The order of the keywords  in
              the list is undefined.

       <u>objectName</u> <b>reference</b> <b>type</b> <u>name</u>
              This  method  returns  the  type of the reference <u>name</u>. An error is thrown in the reference is not
              known to the index.

       <u>objectName</u> <b>references</b>
              This method returns a list containing the names of all references known to the index. The order of
              the references in the list is undefined.

       <u>objectName</u> <b>title</b>
              Returns the currently defined title of the keyword index.

       <u>objectName</u> <b>title</b> <u>text</u>
              Sets the title of the keyword index to <u>text</u>, and returns it as the result of the command.

       <u>objectName</u> <b>label</b>
              Returns the currently defined label of the keyword index.

       <u>objectName</u> <b>label</b> <u>text</u>
              Sets the label of the keyword index to <u>text</u>, and returns it as the result of the command.

       <u>objectName</u> <b>importer</b>
              Returns the import manager object currently attached to the container, if any.

       <u>objectName</u> <b>importer</b> <u>object</u>
              Attaches the <u>object</u> as import manager to the container, and  returns  it  as  the  result  of  the
              command.   Note  that  the <u>object</u> is <u>not</u> put into ownership of the container. I.e., destruction of
              the container will <u>not</u> destroy the <u>object</u>.

              It is expected that <u>object</u> provides a method named <b>import</b> <b>text</b> which takes a  text  and  a  format
              name, and returns the canonical serialization of the keyword index contained in the text, assuming
              the given format.

       <u>objectName</u> <b>exporter</b>
              Returns the export manager object currently attached to the container, if any.

       <u>objectName</u> <b>exporter</b> <u>object</u>
              Attaches  the  <u>object</u>  as  export  manager  to  the container, and returns it as the result of the
              command.  Note that the <u>object</u> is <u>not</u> put into ownership of the container.  I.e.,  destruction  of
              the container will <u>not</u> destroy the <u>object</u>.

              It  is  expected that <u>object</u> provides a method named <b>export</b> <b>object</b> which takes the container and a
              format name, and returns a text encoding keyword index stored  in  the  container,  in  the  given
              format. It is further expected that the <u>object</u> will use the container's method <b>serialize</b> to obtain
              the serialization of the keyword index from which to generate the text.

       <u>objectName</u> <b>deserialize</b> <b>=</b> <u>data</u> ?<u>format</u>?
              This  method replaces the contents of the index object with the index contained in the <u>data</u>. If no
              <u>format</u> was specified it is assumed to be the regular serialization of a keyword index.

              Otherwise the object will use the attached import manager to convert the data from  the  specified
              format  to  a  serialization it can handle.  In that case an error will be thrown if the container
              has no import manager attached to it.

              The result of the method is the empty string.

       <u>objectName</u> <b>deserialize</b> <b>+=</b> <u>data</u> ?<u>format</u>?
              This method behaves like <b>deserialize</b> <b>=</b> in its essentials, except that it merges the keyword  index
              in the <u>data</u> to its contents instead of replacing it.  The method will throw an error if merging is
              not  possible, i.e. would produce an invalid index. The existing content is left unchanged in that
              case.

              The result of the method is the empty string.

       <u>objectName</u> <b>serialize</b> ?<u>format</u>?
              This method returns the keyword index contained in the object. If no <u>format</u> is not  specified  the
              returned result is the canonical serialization of its contents.

              Otherwise  the  object  will  use the attached export manager to convert the data to the specified
              format.  In that case an error will be thrown if the container has no export manager  attached  to
              it.

</pre><h4><b>KEYWORD</b> <b>INDEX</b> <b>SERIALIZATION</b> <b>FORMAT</b></h4><pre>
       Here  we  specify  the  format used by the doctools v2 packages to serialize keyword indices as immutable
       values for transport, comparison, etc.

       We distinguish between <u>regular</u> and <u>canonical</u> serializations. While a keyword index may have more than one
       regular serialization only exactly one of them will be <u>canonical</u>.

       regular serialization

              [1]    An index serialization is a nested Tcl dictionary.

              [2]    This dictionary holds a single key, <b>doctools::idx</b>, and its  value.  This  value  holds  the
                     contents of the index.

              [3]    The contents of the index are a Tcl dictionary holding the title of the index, a label, and
                     the keywords and references. The relevant keys and their values are

                     <b>title</b>  The value is a string containing the title of the index.

                     <b>label</b>  The value is a string containing a label for the index.

                     <b>keywords</b>
                            The  value  is  a Tcl dictionary, using the keywords known to the index as keys. The
                            associated values are lists containing the identifiers of the references  associated
                            with that particular keyword.

                            Any reference identifier used in these lists has to exist as a key in the <b>references</b>
                            dictionary, see the next item for its definition.

                     <b>references</b>
                            The value is a Tcl dictionary, using the identifiers for the references known to the
                            index  as  keys.  The  associated values are 2-element lists containing the type and
                            label of the reference, in this order.

                            Any key here has to be associated with at least one keyword, i.e. occur in at  least
                            one  of  the  reference  lists  which are the values in the <b>keywords</b> dictionary, see
                            previous item for its definition.

              [4]    The <u>type</u> of a reference can be one of two values,

                     <b>manpage</b>
                            The identifier of the reference is interpreted as symbolic file name,  referring  to
                            one of the documents the index was made for.

                     <b>url</b>    The identifier of the reference is interpreted as an url, referring to some external
                            location, like a website, etc.

       canonical serialization
              The  canonical  serialization of a keyword index has the format as specified in the previous item,
              and then additionally satisfies the constraints below, which make it unique among all the possible
              serializations of the keyword index.

              [1]    The keys found in all the nested Tcl dictionaries are sorted in ascending dictionary order,
                     as generated by Tcl's builtin command <b>lsort</b> <b>-increasing</b> <b>-dict</b>.

              [2]    The references listed for each keyword of the  index,  if  any,  are  listed  in  ascending
                     dictionary  order  of their <u>labels</u>, as generated by Tcl's builtin command <b>lsort</b> <b>-increasing</b>
                     <b>-dict</b>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the  category  <u>doctools</u>  of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       HTML, TMML, conversion, docidx markup, documentation, formatting, generation, index, json, keyword index,
       latex, manpage, markup, nroff, parsing, plugin, reference, tcler's wiki, text, url, wiki

</pre><h4><b>CATEGORY</b></h4><pre>
       Documentation tools

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2009 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 2.1                                   <u>doctools::<a href="../man3tcl/idx.3tcl.html">idx</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>