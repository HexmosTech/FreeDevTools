<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FFI::C::Util - Utility functions for dealing with structured C data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libffi-c-perl">libffi-c-perl_0.15-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FFI::C::Util - Utility functions for dealing with structured C data

</pre><h4><b>VERSION</b></h4><pre>
       version 0.15

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use FFI::C::Util qw( perl_to_c take );
        use FFI::C::StructDef;
        use FFI::Platypus::Memory qw( free );

        my $def = FFI::C::StructDef-&gt;new(
          members =&gt; [
            x =&gt; 'uint8',
            y =&gt; 'sint64',
          ],
        );
        my $inst = $def-&gt;create;

        # initialize members
        perl_to_c($inst, { x =&gt; 1, y =&gt; 2 });

        # take ownership
        my $ptr = take $inst;

        # since we took ownership, we are responsible for freeing the memory:
        free $ptr;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides some useful utility functions for dealing with the various def instances provided by
       FFI::C

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>perl_to_c</b>
        perl_to_c $instance, \%values;  # for Struct/Union
        perl_to_c $instance, \@values;  # for Array

       This function initializes the members of an instance.

   <b>c_to_perl</b>
        my $perl = c_to_perl $instance;

       This function takes an instance and returns the nested members as Perl data structures.

   <b>owned</b>
        my $bool = owned $instance;

       Returns true of the $instance owns its allocated memory.  That is, it will free up the allocated memory
       when it falls out of scope.  Reasons an instance might not be owned are:

       the instance is nested inside another object that owns the memory
       the instance was returned from a C function that owns the memory
       ownership was taken away by the "take" function below.

   <b>take</b>
        my $ptr = take $instance;

       This  function  takes  ownership  of  the instance pointer, and returns the opaque pointer.  This means a
       couple of things:

       $instance will not free its data automatically
           You should call "free" on it manually to free the memory it is using.

       $instance cannot be used anymore
           So don't try to get/set any of its members, or pass it into a function.

       The returned pointer can be cast into something else or passed into a function  that  takes  an  "opaque"
       argument.

   <b>addressof</b>
       [version 0.11]

        my $ptr = addressof $instance;

       This  function  returns  the  address  (as  an "opaque" type) of the instance object.  This is similar to
       "take" above in that it gets you the address of the object, but doesn't take ownership  of  it,  so  care
       needs to be taken when using $ptr that the object is still allocated.

   <b>set_array_count</b>
        set_array_count $inst, $count;

       This  function sets the element count on a variable array returned from C (where normally there is no way
       to know from just the return value).  If you try to set a count on a non-array or a fixed sized array  an
       exception will be thrown.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       FFI::C
       FFI::C::Array
       FFI::C::ArrayDef
       FFI::C::Def
       FFI::C::File
       FFI::C::PosixFile
       FFI::C::Struct
       FFI::C::StructDef
       FFI::C::Union
       FFI::C::UnionDef
       FFI::C::Util
       FFI::Platypus::Record

</pre><h4><b>AUTHOR</b></h4><pre>
       Graham Ollis &lt;<a href="mailto:plicease@cpan.org">plicease@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2020-2022 by Graham Ollis.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.36.0                                       2023-02-06                                  <u>FFI::C::<a href="../man3pm/Util.3pm.html">Util</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>