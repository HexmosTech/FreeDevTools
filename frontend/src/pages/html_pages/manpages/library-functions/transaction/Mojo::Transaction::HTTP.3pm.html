<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mojo::Transaction::HTTP - HTTP transaction</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmojolicious-perl">libmojolicious-perl_9.39+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mojo::Transaction::HTTP - HTTP transaction

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Mojo::Transaction::HTTP;

         # Client
         my $tx = Mojo::Transaction::HTTP-&gt;new;
         $tx-&gt;req-&gt;method('GET');
         $tx-&gt;req-&gt;url-&gt;parse('<a href="http://example.com">http://example.com</a>');
         $tx-&gt;req-&gt;headers-&gt;accept('application/json');
         say $tx-&gt;res-&gt;code;
         say $tx-&gt;res-&gt;headers-&gt;content_type;
         say $tx-&gt;res-&gt;body;
         say $tx-&gt;remote_address;

         # Server
         my $tx = Mojo::Transaction::HTTP-&gt;new;
         say $tx-&gt;req-&gt;method;
         say $tx-&gt;req-&gt;url-&gt;to_abs;
         say $tx-&gt;req-&gt;headers-&gt;accept;
         say $tx-&gt;remote_address;
         $tx-&gt;res-&gt;<a href="../man200/code.200.html">code</a>(200);
         $tx-&gt;res-&gt;headers-&gt;content_type('text/plain');
         $tx-&gt;res-&gt;body('Hello World!');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mojo::Transaction::HTTP is a container for HTTP transactions, based on RFC 7230
       &lt;https://tools.ietf.org/html/rfc7230&gt; and RFC 7231 &lt;https://tools.ietf.org/html/rfc7231&gt;.

</pre><h4><b>EVENTS</b></h4><pre>
       Mojo::Transaction::HTTP inherits all events from Mojo::Transaction and can emit the following new ones.

   <b>request</b>
         $tx-&gt;on(request =&gt; sub ($tx) {...});

       Emitted when a request is ready and needs to be handled.

         $tx-&gt;on(request =&gt; sub ($tx) { $tx-&gt;res-&gt;headers-&gt;header('X-Bender' =&gt; 'Bite my shiny metal ass!') });

   <b>resume</b>
         $tx-&gt;on(resume =&gt; sub ($tx) {...});

       Emitted when transaction is resumed.

   <b>unexpected</b>
         $tx-&gt;on(unexpected =&gt; sub ($tx, $res) {...});

       Emitted for unexpected "1xx" responses that will be ignored.

         $tx-&gt;on(unexpected =&gt; sub ($tx) { $tx-&gt;res-&gt;on(finish =&gt; sub { say 'Follow-up response is finished.' }) });

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       Mojo::Transaction::HTTP inherits all attributes from Mojo::Transaction and implements the following new
       ones.

   <b>previous</b>
         my $previous = $tx-&gt;previous;
         $tx          = $tx-&gt;previous(Mojo::Transaction::HTTP-&gt;new);

       Previous transaction that triggered this follow-up transaction, usually a Mojo::Transaction::HTTP object.

         # Paths of previous requests
         say $tx-&gt;previous-&gt;previous-&gt;req-&gt;url-&gt;path;
         say $tx-&gt;previous-&gt;req-&gt;url-&gt;path;

</pre><h4><b>METHODS</b></h4><pre>
       Mojo::Transaction::HTTP inherits all methods from Mojo::Transaction and implements the following new
       ones.

   <b>client_read</b>
         $tx-&gt;client_read($bytes);

       Read data client-side, used to implement user agents such as Mojo::UserAgent.

   <b>client_write</b>
         my $bytes = $tx-&gt;client_write;

       Write data client-side, used to implement user agents such as Mojo::UserAgent.

   <b>is_empty</b>
         my $bool = $tx-&gt;is_empty;

       Check transaction for "HEAD" request and "1xx", 204 or 304 response.

   <b>keep_alive</b>
         my $bool = $tx-&gt;keep_alive;

       Check if connection can be kept alive.

   <b>redirects</b>
         my $redirects = $tx-&gt;redirects;

       Return an array reference with all previous transactions that preceded this follow-up transaction.

         # Paths of all previous requests
         say $_-&gt;req-&gt;url-&gt;path for @{$tx-&gt;redirects};

   <b>resume</b>
         $tx = $tx-&gt;resume;

       Resume transaction.

   <b>server_read</b>
         $tx-&gt;server_read($bytes);

       Read data server-side, used to implement web servers such as Mojo::Server::Daemon.

   <b>server_write</b>
         my $bytes = $tx-&gt;server_write;

       Write data server-side, used to implement web servers such as Mojo::Server::Daemon.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mojolicious, Mojolicious::Guides, &lt;https://mojolicious.org&gt;.

perl v5.40.0                                       2024-12-07                       <u>Mojo::Transaction::<a href="../man3pm/HTTP.3pm.html">HTTP</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>