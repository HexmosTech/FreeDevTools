<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stAbortThis, stThisTransaction - simple transaction handling</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/atfs-dev">atfs-dev_1.4pl6-16.1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stAbortThis, stThisTransaction - simple transaction handling

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;config.h&gt;
       #include &lt;sttk.h&gt;

       void         stAbortThis (int domsg);

       struct stTransactionstThisTransaction;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>stAbortThis</u>  is  part  of  a  simple  transaction  mechanism  on the basis of <a href="../man3/setjmp.3.html">setjmp</a>(3) and <a href="../man3/longjmp.3.html">longjmp</a>(3). A
       transacion is started by setting a  return  point  calling  <a href="../man3/setjmp.3.html">setjmp</a>(3)  and  may  be  aborted  by  calling
       stAbortThis.  This  outputs a short abort message, cleans up the temporary files (<a href="../man3/stRmRegisteredFiles.3.html">stRmRegisteredFiles</a>(3))
       and performs a <a href="../man3/longjmp.3.html">longjmp</a>(3) operation, returning to the transaction start point.

       The structure variable <u>stThisTransaction</u> carries information about the current transaction.  It  has  the
       following fields:
       struct stTransaction {
         char tr_fname[MAXPATHLEN+1];
         int tr_done;
         int tr_seqno;
         int tr_rc;
         jmp_buf tr_env;
       };

       When  setting the transaction return point by calling <a href="../man3/setjmp.3.html">setjmp</a>(3) the <u>tr_env</u> field must be used as argument
       to setjmp. The name of the concerned file should be stored in <u>tr_fname</u> field and the <u>tr_done</u> flag  should
       be  cleared.   <u>tr_seqno</u>  is  the  serial  number  of the current transaction and must be increased at the
       beginning of each new transaction. The <u>tr_rc</u> return code can be set to an appropriate  return  code  when
       something went wrong and the transaction was aborted.  When not set by the application, <u>tr_rc</u> will be set
       nun  null  by stAbortThis on abortion of the transaction. On successful completion, <u>tr_done</u> should be set
       TRUE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/stRmRegisteredFiles.3.html">stRmRegisteredFiles</a>(3), <a href="../man3/setjmp.3.html">setjmp</a>(3), <a href="../man3/longjmp.3.html">longjmp</a>(3).

sttk-1.7                                    Thu Jun 24 17:43:37 1993                            <u><a href="../man3/sttransaction.3.html">sttransaction</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>