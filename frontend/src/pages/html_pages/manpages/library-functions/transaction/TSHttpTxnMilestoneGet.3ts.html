<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSHttpTxnMilestoneGet - get a specified milestone timer value for the current transaction</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/trafficserver-dev">trafficserver-dev_9.2.5+ds-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       TSHttpTxnMilestoneGet - get a specified milestone timer value for the current transaction

</pre><h4><b>SYNOPSIS</b></h4><pre>
          #include &lt;ts/ts.h&gt;

       <u>TSReturnCode</u> <b>TSHttpTxnMilestoneGet(</b><u>TSHttpTxn</u> <b>txnp,</b> <u>TSMilestonesType</u> <b>milestone,</b> <u>TSHRTime</u> <b>*time)</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>TSHttpTxnMilestoneGet()</u>  will  fetch  a  specific  <u>milestone</u>  timer value for the transaction <u>txnp</u>. These
       timers are calculated during the lifetime of a transaction and  are  measured  in  nanoseconds  from  the
       beginning of the transaction. <u>time</u> is used a pointer to storage to update if the call is successful.

       <b>enum</b> <b>TSMilestonesType</b>
              An enumeration of the valid indices of transaction milestone data.

              <b>enumerator</b> <b>TS_MILESTONE_SM_START</b>
                     Transaction state machine is initialized.

              <b>enumerator</b> <b>TS_MILESTONE_UA_BEGIN</b>
                     The client connection is accepted.

              <b>enumerator</b> <b>TS_MILESTONE_UA_READ_HEADER_DONE</b>
                     The request header from the client has been read and parsed.

              <b>enumerator</b> <b>TS_MILESTONE_CACHE_OPEN_READ_BEGIN</b>
                     Initiate read of the cache.

              <b>enumerator</b> <b>TS_MILESTONE_CACHE_OPEN_READ_END</b>
                     Initial cache read has resolved.

              <b>enumerator</b> <b>TS_MILESTONE_CACHE_OPEN_WRITE_BEGIN</b>
                     Start open for cache write.

              <b>enumerator</b> <b>TS_MILESTONE_CACHE_OPEN_WRITE_END</b>
                     Cache has been opened for write.

              <b>enumerator</b> <b>TS_MILESTONE_DNS_LOOKUP_BEGIN</b>
                     Initiate host resolution in HostDB

              <b>enumerator</b> <b>TS_MILESTONE_DNS_LOOKUP_END</b>
                     Host resolution resolves.

              <b>enumerator</b> <b>TS_MILESTONE_SERVER_FIRST_CONNECT</b>
                     First time origin server connect attempted or shared session attached.

              <b>enumerator</b> <b>TS_MILESTONE_SERVER_CONNECT</b>
                     Most recent time origin server connect attempted or shared session attached.

              <b>enumerator</b> <b>TS_MILESTONE_SERVER_CONNECT_END</b>
                     More recent time a connection attempt was resolved.

              <b>enumerator</b> <b>TS_MILESTONE_SERVER_BEGIN_WRITE</b>
                     First byte is written to the origin server connection.

              <b>enumerator</b> <b>TS_MILESTONE_SERVER_FIRST_READ</b>
                     First byte is read from connection to origin server.

              <b>enumerator</b> <b>TS_MILESTONE_SERVER_READ_HEADER_DONE</b>
                     Origin server response has been read and parsed.

              <b>enumerator</b> <b>TS_MILESTONE_UA_BEGIN_WRITE</b>
                     The response header write to the client starts.

              <b>enumerator</b> <b>TS_MILESTONE_SERVER_CLOSE</b>
                     Last I/O activity on origin server connection.

              <b>enumerator</b> <b>TS_MILESTONE_UA_CLOSE</b>
                     Last I/O activity on the client socket, or connection abort.

              <b>enumerator</b> <b>TS_MILESTONE_SM_FINISH</b>
                     Transaction has finished, state machine final logging has started.

              <b>enumerator</b> <b>TS_MILESTONE_PLUGIN_ACTIVE</b>
                     Amount of time plugins were active (running plugin code).

              <b>enumerator</b> <b>TS_MILESTONE_PLUGIN_TOTAL</b>
                     Amount of time spent in or waiting for plugins.

              <b>enumerator</b> <b>TS_MILESTONE_TLS_HANDSHAKE_START</b>
                     Timestamp  when  the  server  starts  the  TLS  handshake.  0  if no handshake is performed
                     (connection reuse).

              <b>enumerator</b> <b>TS_MILESTONE_TLS_HANDSHAKE_END</b>
                     Timestamp when the server completes the TLS handshake.  0  if  no  handshake  is  performed
                     (connection reuse).

              <b>enumerator</b> <b>TS_MILESTONE_LAST_ENTRY</b>
                     A  pseudo  index  which is set to be one more than the last valid index. This is useful for
                     looping over the data.

       • The server connect times predate the transmission of the <b>SYN</b> packet. That is, before  a  connection  to
         the origin server is completed.

       • A  connection  attempt is resolved when no more connection related activity remains to be done, and the
         connection is either established or has failed.

       • <u>TS_MILESTONE_UA_CLOSE</u> and <u>TS_MILESTONE_SERVER_CLOSE</u> are updated continuously during  the  life  of  the
         transaction,  every time there is I/O activity. The updating stops when the corresponding connection is
         closed, leaving the last I/O time as the final value.

       • The cache <b>OPEN</b> milestones time only the initial setup, the <u>open</u>, not the full read or write.

       • <u>TS_MILESTONE_PLUGIN_ACTIVE</u> and <u>TS_MILESTONE_PLUGIN_TOTAL</u> are different from  the  other  milestones  as
         they  measure  elapsed  time, not event time. The value is the elapsed time <u>plus</u> <u>TS_MILESTONE_SM_START</u>.
         This was decided to be more convenient because then these milestones can be handled / displayed in  the
         same way as the other milestones, as offsets from <u>TS_MILESTONE_SM_START</u>.

         <u>TS_MILESTONE_PLUGIN_ACTIVE</u>  value  is  the  amount  of  time  the plugin was active, that is performing
         computation. <u>TS_MILESTONE_PLUGIN_TOTAL</u> is the wall time which includes any  time  the  transaction  was
         blocked  while  a  plugin was active. For instance if a plugin waits on an external event, that waiting
         time will be in <u>TS_MILESTONE_PLUGIN_TOTAL</u> but not in <u>TS_MILESTONE_PLUGIN_ACTIVE</u>.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <u>TS_SUCCESS</u> if successful and <u>time</u> was updated, otherwise <u>TS_ERROR</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3ts/TSAPI.3ts.html">TSAPI</a>(3ts)</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2025, <a href="mailto:dev@trafficserver.apache.org">dev@trafficserver.apache.org</a>

9.2                                               May 22, 2025                        <u><a href="../man3ts/TSHTTPTXNMILESTONEGET.3ts.html">TSHTTPTXNMILESTONEGET</a></u>(3ts)
</pre>
 </div>
</div></section>
</div>
</body>
</html>