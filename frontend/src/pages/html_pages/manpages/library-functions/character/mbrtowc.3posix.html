<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       mbrtowc — convert a character to a wide-character code (restartable)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/wchar.h">wchar.h</a>&gt;

       size_t mbrtowc(wchar_t *restrict <u>pwc</u>, const char *restrict <u>s</u>,
           size_t <u>n</u>, mbstate_t *restrict <u>ps</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  functionality  described  on  this  reference  page is aligned with the ISO C standard. Any conflict
       between the requirements described  here  and  the  ISO C  standard  is  unintentional.  This  volume  of
       POSIX.1‐2017 defers to the ISO C standard.

       If <u>s</u> is a null pointer, the <u>mbrtowc</u>() function shall be equivalent to the call:

           mbrtowc(NULL, "", 1, ps)

       In this case, the values of the arguments <u>pwc</u> and <u>n</u> are ignored.

       If  <u>s</u>  is  not a null pointer, the <u>mbrtowc</u>() function shall inspect at most <u>n</u> bytes beginning at the byte
       pointed to by <u>s</u> to determine the number of bytes needed to complete the  next  character  (including  any
       shift sequences). If the function determines that the next character is completed, it shall determine the
       value  of the corresponding wide character and then, if <u>pwc</u> is not a null pointer, shall store that value
       in the object pointed to by <u>pwc</u>.  If the corresponding wide character is the  null  wide  character,  the
       resulting state described shall be the initial conversion state.

       If  <u>ps</u> is a null pointer, the <u>mbrtowc</u>() function shall use its own internal <b>mbstate_t</b> object, which shall
       be initialized at program start-up to the initial  conversion  state.  Otherwise,  the  <b>mbstate_t</b>  object
       pointed  to  by  <u>ps</u>  shall  be used to completely describe the current conversion state of the associated
       character sequence. The implementation shall  behave  as  if  no  function  defined  in  this  volume  of
       POSIX.1‐2017 calls <u>mbrtowc</u>().

       The behavior of this function is affected by the <u>LC_CTYPE</u> category of the current locale.

       The <u>mbrtowc</u>() function need not be thread-safe if called with a NULL <u>ps</u> argument.

       The <u>mbrtowc</u>() function shall not change the setting of <u>errno</u> if successful.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <u>mbrtowc</u>() function shall return the first of the following that applies:

       0           If  the  next  <u>n</u>  or  fewer  bytes  complete  the character that corresponds to the null wide
                   character (which is the value stored).

       between 1 and <u>n</u> inclusive
                   If the next <u>n</u> or fewer bytes complete a valid character (which  is  the  value  stored);  the
                   value returned shall be the number of bytes that complete the character.

       (<b>size_t</b>)-2  If  the  next  <u>n</u> bytes contribute to an incomplete but potentially valid character, and all <u>n</u>
                   bytes have been processed (no value is stored).  When  <u>n</u>  has  at  least  the  value  of  the
                   {MB_CUR_MAX}  macro,  this  case  can only occur if <u>s</u> points at a sequence of redundant shift
                   sequences (for implementations with state-dependent encodings).

       (<b>size_t</b>)-1  If an encoding error occurs, in which case the next <u>n</u> or fewer bytes do not contribute  to  a
                   complete  and valid character (no value is stored). In this case, <b>[EILSEQ]</b> shall be stored in
                   <u>errno</u> and the conversion state is undefined.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>mbrtowc</u>() function shall fail if:

       <b>EILSEQ</b> An invalid character sequence is detected.  In the POSIX locale an  <b>[EILSEQ]</b>  error  cannot  occur
              since all byte values are valid characters.

       The <u>mbrtowc</u>() function may fail if:

       <b>EINVAL</b> <u>ps</u> points to an object that contains an invalid conversion state.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       None.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>mbsinit</u>(), <u>mbsrtowcs</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;wchar.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                       <u><a href="../man3POSIX/MBRTOWC.3POSIX.html">MBRTOWC</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>