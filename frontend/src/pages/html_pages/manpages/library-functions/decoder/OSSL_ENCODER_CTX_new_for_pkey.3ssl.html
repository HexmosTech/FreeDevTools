<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSSL_ENCODER_CTX_new_for_pkey, OSSL_ENCODER_CTX_set_cipher, OSSL_ENCODER_CTX_set_passphrase,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       OSSL_ENCODER_CTX_new_for_pkey, OSSL_ENCODER_CTX_set_cipher, OSSL_ENCODER_CTX_set_passphrase,
       OSSL_ENCODER_CTX_set_pem_password_cb, OSSL_ENCODER_CTX_set_passphrase_cb,
       OSSL_ENCODER_CTX_set_passphrase_ui - Encoder routines to encode EVP_PKEYs

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/encoder.h&gt;

        OSSL_ENCODER_CTX *
        OSSL_ENCODER_CTX_new_for_pkey(const EVP_PKEY *pkey, int selection,
                                      const char *output_type,
                                      const char *output_structure,
                                      const char *propquery);

        int OSSL_ENCODER_CTX_set_cipher(OSSL_ENCODER_CTX *ctx,
                                        const char *cipher_name,
                                        const char *propquery);
        int OSSL_ENCODER_CTX_set_passphrase(OSSL_ENCODER_CTX *ctx,
                                            const unsigned char *kstr,
                                            size_t klen);
        int OSSL_ENCODER_CTX_set_pem_password_cb(OSSL_ENCODER_CTX *ctx,
                                                 pem_password_cb *cb, void *cbarg);
        int OSSL_ENCODER_CTX_set_passphrase_ui(OSSL_ENCODER_CTX *ctx,
                                               const UI_METHOD *ui_method,
                                               void *ui_data);
        int OSSL_ENCODER_CTX_set_passphrase_cb(OSSL_ENCODER_CTX *ctx,
                                               OSSL_PASSPHRASE_CALLBACK *cb,
                                               void *cbarg);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>OSSL_ENCODER_CTX_new_for_pkey()</b> is a utility function that creates a <b>OSSL_ENCODER_CTX</b>, finds all
       applicable encoder implementations and sets them up, so almost all the caller has to do next is call
       functions like <b><a href="../man3/OSSL_ENCODER_to_bio.3.html">OSSL_ENCODER_to_bio</a></b>(3).  <u>output_type</u> determines the final output encoding, and <u>selection</u>
       can be used to select what parts of the <u>pkey</u> should be included in the output.  <u>output_type</u> is further
       discussed in "Output types" below, and <u>selection</u> is further described in "Selections".

       Internally, <b>OSSL_ENCODER_CTX_new_for_pkey()</b> uses the names from the <b><a href="../man3/EVP_KEYMGMT.3.html">EVP_KEYMGMT</a></b>(3) implementation
       associated with <u>pkey</u> to build a list of applicable encoder implementations that are used to process the
       <u>pkey</u> into the encoding named by <u>output_type</u>, with the outermost structure named by <u>output_structure</u> if
       that's relevant.  All these implementations are implicitly fetched, with <u>propquery</u> for finer selection.

       If no suitable encoder implementation is found, <b>OSSL_ENCODER_CTX_new_for_pkey()</b> still creates a
       <b>OSSL_ENCODER_CTX</b>, but with no associated encoder (<b><a href="../man3/OSSL_ENCODER_CTX_get_num_encoders.3.html">OSSL_ENCODER_CTX_get_num_encoders</a></b>(3) returns zero).
       This helps the caller to distinguish between an error when creating the <b>OSSL_ENCODER_CTX</b> and missing
       encoder implementation, and allows it to act accordingly.

       <b>OSSL_ENCODER_CTX_set_cipher()</b> tells the implementation what cipher should be used to encrypt encoded
       keys.  The cipher is given by name <u>cipher_name</u>.  The interpretation of that <u>cipher_name</u> is implementation
       dependent.  The implementation may implement the cipher directly itself or by other implementations, or
       it may choose to fetch it.  If the implementation supports fetching the cipher, then it may use <u>propquery</u>
       as properties to be queried for when fetching.  <u>cipher_name</u> may also be NULL, which will result in
       unencrypted encoding.

       <b>OSSL_ENCODER_CTX_set_passphrase()</b> gives the implementation a pass phrase to use when encrypting the
       encoded private key.  Alternatively, a pass phrase callback may be specified with the following
       functions.

       <b>OSSL_ENCODER_CTX_set_pem_password_cb()</b>, <b>OSSL_ENCODER_CTX_set_passphrase_ui()</b> and
       <b>OSSL_ENCODER_CTX_set_passphrase_cb()</b> sets up a callback method that the implementation can use to prompt
       for a pass phrase, giving the caller the choice of preferred pass phrase callback form.  These are called
       indirectly, through an internal <b><a href="../man3/OSSL_PASSPHRASE_CALLBACK.3.html">OSSL_PASSPHRASE_CALLBACK</a></b>(3) function.

   <b>Output</b> <b>types</b>
       The possible <b>EVP_PKEY</b> output types depends on the available implementations.

       OpenSSL has built in implementations for the following output types:

       "TEXT"
           The   output   is   a   human   readable   description   of   the   key.   <b><a href="../man3/EVP_PKEY_print_private.3.html">EVP_PKEY_print_private</a></b>(3),
           <b><a href="../man3/EVP_PKEY_print_public.3.html">EVP_PKEY_print_public</a></b>(3) and <b><a href="../man3/EVP_PKEY_print_params.3.html">EVP_PKEY_print_params</a></b>(3) use this for their output.

       "DER"
           The output is the DER encoding of the <u>selection</u> of the <u>pkey</u>.

       "PEM"
           The output is the <u>selection</u> of the <u>pkey</u> in PEM format.

   <b>Selections</b>
       <u>selection</u> can be any one of the values described in "Selections" in <b><a href="../man3/EVP_PKEY_fromdata.3.html">EVP_PKEY_fromdata</a></b>(3).

       These are only 'hints' since the encoder implementations are  free  to  determine  what  makes  sense  to
       include  in  the  output,  and this may depend on the desired output.  For example, an EC key in a PKCS#8
       structure doesn't usually include the public key.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>OSSL_ENCODER_CTX_new_for_pkey()</b> returns a pointer to an <b>OSSL_ENCODER_CTX</b>,  or  NULL  if  it  couldn't  be
       created.

       <b>OSSL_ENCODER_CTX_set_cipher()</b>, <b>OSSL_ENCODER_CTX_set_passphrase()</b>, <b>OSSL_ENCODER_CTX_set_pem_password_cb()</b>,
       <b>OSSL_ENCODER_CTX_set_passphrase_ui()</b> and <b>OSSL_ENCODER_CTX_set_passphrase_cb()</b> all return 1 on success, or
       0 on failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/provider.7.html">provider</a></b>(7), <b><a href="../man3/OSSL_ENCODER.3.html">OSSL_ENCODER</a></b>(3), <b><a href="../man3/OSSL_ENCODER_CTX.3.html">OSSL_ENCODER_CTX</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       The functions described here were added in OpenSSL 3.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2019-2022 The OpenSSL Project Authors. All Rights Reserved.

       Licensed  under  the  Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain  a  copy  in  the  file  LICENSE  in  the  source  distribution  or  at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                <u><a href="../man3SSL/OSSL_ENCODER_CTX_NEW_FOR_PKEY.3SSL.html">OSSL_ENCODER_CTX_NEW_FOR_PKEY</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>