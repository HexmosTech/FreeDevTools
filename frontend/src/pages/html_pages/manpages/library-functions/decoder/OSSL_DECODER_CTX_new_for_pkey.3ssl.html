<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSSL_DECODER_CTX_new_for_pkey, OSSL_DECODER_CTX_set_passphrase, OSSL_DECODER_CTX_set_pem_password_cb,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       OSSL_DECODER_CTX_new_for_pkey, OSSL_DECODER_CTX_set_passphrase, OSSL_DECODER_CTX_set_pem_password_cb,
       OSSL_DECODER_CTX_set_passphrase_ui, OSSL_DECODER_CTX_set_passphrase_cb - Decoder routines to decode
       EVP_PKEYs

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/decoder.h&gt;

        OSSL_DECODER_CTX *
        OSSL_DECODER_CTX_new_for_pkey(EVP_PKEY **pkey,
                                      const char *input_type,
                                      const char *input_struct,
                                      const char *keytype, int selection,
                                      OSSL_LIB_CTX *libctx, const char *propquery);

        int OSSL_DECODER_CTX_set_passphrase(OSSL_DECODER_CTX *ctx,
                                            const unsigned char *kstr,
                                            size_t klen);
        int OSSL_DECODER_CTX_set_pem_password_cb(OSSL_DECODER_CTX *ctx,
                                                 pem_password_cb *cb,
                                                 void *cbarg);
        int OSSL_DECODER_CTX_set_passphrase_ui(OSSL_DECODER_CTX *ctx,
                                               const UI_METHOD *ui_method,
                                               void *ui_data);
        int OSSL_DECODER_CTX_set_passphrase_cb(OSSL_DECODER_CTX *ctx,
                                               OSSL_PASSPHRASE_CALLBACK *cb,
                                               void *cbarg);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>OSSL_DECODER_CTX_new_for_pkey()</b> is a utility function that creates a <b>OSSL_DECODER_CTX</b>, finds all
       applicable decoder implementations and sets them up, so all the caller has to do next is call functions
       like <b><a href="../man3/OSSL_DECODER_from_bio.3.html">OSSL_DECODER_from_bio</a></b>(3).  The caller may use the optional <u>input_type</u>, <u>input_struct</u>, <u>keytype</u> and
       <u>selection</u> to specify what the input is expected to contain.  The <u>pkey</u> must reference an <b>EVP_PKEY</b> <b>*</b>
       variable that will be set to the newly created <b>EVP_PKEY</b> on successful decoding.  The referenced variable
       must be initialized to NULL before calling the function.

       Internally <b>OSSL_DECODER_CTX_new_for_pkey()</b> searches for all available <b><a href="../man3/EVP_KEYMGMT.3.html">EVP_KEYMGMT</a></b>(3) implementations, and
       then builds a list of all potential decoder implementations that may be able to process the encoded input
       into data suitable for <b>EVP_PKEY</b>s.  All these implementations are implicitly fetched using <u>libctx</u> and
       <u>propquery</u>.

       The search of decoder implementations can be limited with <u>input_type</u> and <u>input_struct</u> which specifies a
       starting input type and input structure.  NULL is valid for both of them and signifies that the decoder
       implementations will find out the input type on their own.  They are set with
       <b><a href="../man3/OSSL_DECODER_CTX_set_input_type.3.html">OSSL_DECODER_CTX_set_input_type</a></b>(3) and <b><a href="../man3/OSSL_DECODER_CTX_set_input_structure.3.html">OSSL_DECODER_CTX_set_input_structure</a></b>(3).  See "Input Types" and
       "Input Structures" below for further information.

       The search of decoder implementations can also be limited with <u>keytype</u> and <u>selection</u>, which specifies the
       expected resulting keytype and contents.  NULL and zero are valid and signify that the decoder
       implementations will find out the keytype and key contents on their own from the input they get.

       If no suitable decoder implementation is found, <b>OSSL_DECODER_CTX_new_for_pkey()</b> still creates a
       <b>OSSL_DECODER_CTX</b>, but with no associated decoder (<b><a href="../man3/OSSL_DECODER_CTX_get_num_decoders.3.html">OSSL_DECODER_CTX_get_num_decoders</a></b>(3) returns zero).
       This helps the caller to distinguish between an error when creating the <b>OSSL_ENCODER_CTX</b> and missing
       encoder implementation, and allows it to act accordingly.

       <b>OSSL_DECODER_CTX_set_passphrase()</b> gives the implementation a pass phrase to use when decrypting the
       encoded private key. Alternatively, a pass phrase callback may be specified with the following functions.

       <b>OSSL_DECODER_CTX_set_pem_password_cb()</b>, <b>OSSL_DECODER_CTX_set_passphrase_ui()</b> and
       <b>OSSL_DECODER_CTX_set_passphrase_cb()</b> set up a callback method that the implementation can use to prompt
       for a pass phrase, giving the caller the choice of preferred pass phrase callback form.  These are called
       indirectly, through an internal <b><a href="../man3/OSSL_PASSPHRASE_CALLBACK.3.html">OSSL_PASSPHRASE_CALLBACK</a></b>(3) function.

       The internal <b><a href="../man3/OSSL_PASSPHRASE_CALLBACK.3.html">OSSL_PASSPHRASE_CALLBACK</a></b>(3) function caches the pass phrase, to be reused in all decodings
       that are performed in the same decoding run (for example, within one <b><a href="../man3/OSSL_DECODER_from_bio.3.html">OSSL_DECODER_from_bio</a></b>(3) call).

   <b>Input</b> <b>Types</b>
       Available input types depend on the implementations that available providers offer, and provider
       documentation should have the details.

       Among the known input types that OpenSSL decoder implementations offer for <b>EVP_PKEY</b>s are "DER", "PEM",
       "MSBLOB" and "PVK".  See <b><a href="../man7/openssl-glossary.7.html">openssl-glossary</a></b>(7) for further information on what these input types mean.

   <b>Input</b> <b>Structures</b>
       Available input structures depend on the implementations that available providers offer, and provider
       documentation should have the details.

       Among the known input structures that OpenSSL decoder implementations offer for <b>EVP_PKEY</b>s are "pkcs8" and
       "SubjectPublicKeyInfo".

       OpenSSL decoder implementations also support the input structure "type-specific".  This is the structure
       used for keys encoded according to key type specific specifications.  For example, RSA keys encoded
       according to PKCS#1.

   <b>Selections</b>
       <u>selection</u> can be any one of the values described in "Selections" in <b><a href="../man3/EVP_PKEY_fromdata.3.html">EVP_PKEY_fromdata</a></b>(3).  Additionally
       <u>selection</u> can also be set to <b>0</b> to indicate that the code will auto detect the selection.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>OSSL_DECODER_CTX_new_for_pkey()</b> returns a pointer to a <b>OSSL_DECODER_CTX</b>, or NULL if it couldn't be
       created.

       <b>OSSL_DECODER_CTX_set_passphrase()</b>, <b>OSSL_DECODER_CTX_set_pem_password_cb()</b>,
       <b>OSSL_DECODER_CTX_set_passphrase_ui()</b> and <b>OSSL_DECODER_CTX_set_passphrase_cb()</b> all return 1 on success, or
       0 on failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/provider.7.html">provider</a></b>(7), <b><a href="../man3/OSSL_DECODER.3.html">OSSL_DECODER</a></b>(3), <b><a href="../man3/OSSL_DECODER_CTX.3.html">OSSL_DECODER_CTX</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       The functions described here were added in OpenSSL 3.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2020-2024 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain a copy in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                <u><a href="../man3SSL/OSSL_DECODER_CTX_NEW_FOR_PKEY.3SSL.html">OSSL_DECODER_CTX_NEW_FOR_PKEY</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>