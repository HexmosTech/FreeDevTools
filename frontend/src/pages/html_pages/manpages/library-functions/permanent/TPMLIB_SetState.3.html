<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TPMLIB_SetState  - Set the TPM's volatile, permanent, or save state</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtpms-dev">libtpms-dev_0.9.3-0ubuntu5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       TPMLIB_SetState  - Set the TPM's volatile, permanent, or save state

       TPMLIB_GetState  - Get the TPM's volatile, permanent, or save state

</pre><h4><b>LIBRARY</b></h4><pre>
       TPM library (libtpms, -ltpms)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libtpms/tpm_library.h</b>&gt;

       <b>TPM_RESULT</b> <b>TPMLIB_SetState(enum</b> <b>TPMLIB_StateType</b> <b>st,</b>
                                  <b>const</b> <b>unsigned</b> <b>char</b> <b>*buffer,</b> <b>uint32_t</b> <b>buflen);</b>

       <b>TPM_RESULT</b> <b>TPMLIB_GetState(enum</b> <b>TPMLIB_StateType</b> <b>st,</b>
                                  <b>unsigned</b> <b>char</b> <b>**buffer,</b> <b>uint32_t</b> <b>*buflen);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>TPMLIB_SetState()</b> function allows a user to set either one of the state blobs of the TPM. The passed
       state blob is tested for whether it can be accepted and a TPM error code is returned in case it cannot be
       accepted. In case of acceptance, the state blob will be passed to the TPM upon <b>TPM_MainInit()</b>. Setting a
       state blob hides a file that may contain the same type of blob and would be read otherwise.  It is
       required to call this function with a NULL pointer for the buffer parameter to hide a state blob in a
       file.

       It is only possible to set the state blobs after <b>TPMLIB_ChooseTPMVersion()</b> has been called. All state
       blobs are cleared when a different version of TPM is chosen using <b>TPMLIB_ChooseTPMVersion</b> or when a call
       to <b>TPMLIB_SetState()</b> fails because a state blob could not be accepted.

       The order in which state blobs are set is important. The first state blob has to be the one representing
       the TPM's permanent state. Only after that either the volatile or save state blobs can be set.

       The <b>TPMLIB_GetState()</b> function allows a user to get the current state of the TPM.  For as long as the TPM
       has not been started, this function either returns the state blob previously set with <b>TPMLIB_SetState()</b>
       or the state is read from a file.  Once the TPM has been start the state of the running TPM is returned.

       The <b>TPMLIB_STATE_SAVE_STATE</b> (save state) type of TPM state can be set with this function. The same state
       blob will be returned until TPM_Startup(ST_STATE) has been called, after which an empty blob will be
       returned. This blob can also only be read after <b>TPM_SaveState()</b> has been sent to the TPM.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/TPMLIB_ChooseTPMVersion.3.html">TPMLIB_ChooseTPMVersion</a></b>(3), <b><a href="../man3/TPMLIB_MainInit.3.html">TPMLIB_MainInit</a></b>(3), <b><a href="../man3/TPMLIB_Terminate.3.html">TPMLIB_Terminate</a></b>(3)

libtpms                                            2025-06-25                                 <u><a href="../man3/TPMLIB_SetState.3.html">TPMLIB_SetState</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>