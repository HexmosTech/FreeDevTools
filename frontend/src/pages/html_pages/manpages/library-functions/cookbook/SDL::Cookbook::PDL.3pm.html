<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDL::CookBook::PDL -- CookBook for SDL + PDL</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsdl-perl">libsdl-perl_2.548-5build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SDL::CookBook::PDL -- CookBook for SDL + PDL

       PDL provides great number crunching capabilities to Perl and SDL provides game-developer quality
       real-time bitmapping and sound.  You can use PDL and SDL ''together'' to create real-time, responsive
       animations and simulations.  In this section we will go through the pleasures and pitfalls of working
       with both powerhouse libraries.

   <b>CATEGORY</b>
       Cookbook

</pre><h4><b>Creating</b> <b>a</b> <b>SDL</b> <b>Surface</b> <b>piddle</b></h4><pre>
       PDL's core type is a piddle. Once a piddle is provided to PDL it can go do a numerous amounts of things.
       Please see the example in 'examples/cookbook/pdl.pl' that came with this module.

   <b>Creating</b> <b>a</b> <b>simple</b> <b>piddle</b>
       First lets get the right modules.

         use PDL;
         use SDL::Rect;
         use SDL::Video;
         use SDL::Surface;
         use SDL::PixelFormat;

       Suppose you want a surface of size (200,400) and 32 bit (RGBA).

          my ( $bytes_per_pixel, $width, $height ) = ( 4, 200, 400 );

       Define the $width, $height and $bytes_per_pixel. Your $bytes_per_pixel is the number of bits (in this
       case 32) divided by 8 bits per byte. Therefore for our 32 bpp we have 4 Bpp;

          my $piddle  = zeros( byte, $bytes_per_pixel, $width, $height );

       Create a normal $piddle with zeros, byte format and the Bpp x width x height dimensions.

          my $pointer = $piddle-&gt;get_dataref();

       Here is where we get the actual data the piddle is pointing to. We will have SDL create a new surface
       from this function.

          my $surface = SDL::Surface-&gt;new_from( $pointer, $width, $height, 32,
               $width * $bytes_per_pixel );

       Using the same dimensions we create the surface using new_form. The width *  Bpp is the scanline (pitch)
       of the surface in bytes.

          warn "Made surface of $width, $height and ". $surface-&gt;format-&gt;BytesPerPixel;
          return ( $piddle, $surface );

       Finally make sure that the surface actually has the correct dimensions we gave.

       <b>NOTE:</b> $surface-&gt;format-&gt;BytesPerPixel must return 1,2,3,4. !!

       Now you can blit and use the surface as needed; and do PDL operations as required.

   <b>Operating</b> <b>on</b> <b>the</b> <b>Surface</b> <b>safely</b>
       To make sure SDL is in sync with the data. You must call SDL::Video::lock <b>before</b> doing PDL operations on
       the piddle.

           SDL::Video::lock_surface($surface);

           $piddle-&gt;mslice( 'X', [ <a href="../man400/rand.400.html">rand</a>(400), <a href="../man400/rand.400.html">rand</a>(400), 1 ], [ <a href="../man200/rand.200.html">rand</a>(200), <a href="../man200/rand.200.html">rand</a>(200), 1 ] )
               .= pdl( <a href="../man225/rand.225.html">rand</a>(225), <a href="../man225/rand.225.html">rand</a>(225), <a href="../man255/rand.255.html">rand</a>(255), 255 );

       After that you can unlock the surface to blit.

           SDL::Video::unlock_surface($surface);

   <b>Error</b> <b>due</b> <b>to</b> <b>BPP</b> <b>at</b> <b>blitting</b>
       When blitting the new surface check for the return value to see if there has been a problem.

           my $b = SDL::Video::blit_surface(
               $surface,  SDL::Rect-&gt;new( 0, 0, $surface-&gt;w, $surface-&gt;h ),
               $app, SDL::Rect-&gt;new(  ( $app-&gt;w - $surface-&gt;w ) / 2, ( $app-&gt;h - $surface-&gt;h ) / 2, $app-&gt;w, $app-&gt;h )
              );

           die "Could not blit: " . SDL::get_error() if ( $b == -1 );

       If the error message is 'Blit combination not supported' that means that the BPP is incorrect or
       inconsistent with the dimensions.  After that a simple update_rect will so your new surface on the
       screen.

</pre><h4><b>AUTHORS</b></h4><pre>
       See "AUTHORS" in SDL.

perl v5.40.0                                       2024-10-20                      <u>pods::SDL::Cookbook::<a href="../man3pm/PDL.3pm.html">PDL</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>