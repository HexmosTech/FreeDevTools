<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::JSON::Schema::Acceptance - Acceptance testing for JSON-Schema based validators</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-json-schema-acceptance-perl">libtest-json-schema-acceptance-perl_1.029-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::JSON::Schema::Acceptance - Acceptance testing for JSON-Schema based validators

</pre><h4><b>VERSION</b></h4><pre>
       version 1.029

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This module allows the JSON Schema Test Suite &lt;https://github.com/json-schema/JSON-Schema-Test-Suite&gt;
       tests to be used in perl to test a module that implements the JSON Schema specification ("json-schema").
       These are the same tests that many modules (libraries, plugins, packages, etc.) use to confirm support of
       json-schema. Using this module to confirm support gives assurance of interoperability with other modules
       that run the same tests in different languages.

       In the JSON::Schema::Modern module, a test could look like the following:

         use Test::More;
         use JSON::Schema::Modern;
         use Test::JSON::Schema::Acceptance;

         my $accepter = Test::JSON::Schema::Acceptance-&gt;new(specification =&gt; 'draft7');

         $accepter-&gt;acceptance(
           validate_data =&gt; sub ($schema, $input_data) {
             return JSON::Schema::Modern-&gt;new($schema)-&gt;validate($input_data);
           },
           todo_tests =&gt; [ { file =&gt; 'dependencies.json' } ],
         );

         done_testing();

       This would determine if JSON::Schema::Modern's "validate" method returns the right result for all of the
       cases in the JSON Schema Test Suite, except for those listed in "skip_tests".

</pre><h4><b>DESCRIPTION</b></h4><pre>
       JSON Schema &lt;<a href="http://json-schema.org">http://json-schema.org</a>&gt; is an IETF draft (at time of writing) which allows you to define the
       structure of JSON.

       From the overview of the draft 2020-12 version of the specification &lt;https://json-
       schema.org/draft/2020-12/json-schema-core.html#rfc.section.3&gt;:

           This document proposes a new media type "application/schema+json" to identify a JSON Schema for
           describing JSON data. It also proposes a further optional media type,
           "application/schema-instance+json", to provide additional integration features. JSON Schemas are
           themselves JSON documents. This, and related specifications, define keywords allowing authors to
           describe JSON data in several ways.

           JSON Schema uses keywords to assert constraints on JSON instances or annotate those instances with
           additional information. Additional keywords are used to apply assertions and annotations to more
           complex JSON data structures, or based on some sort of condition.

       This module allows other perl modules (for example JSON::Schema::Modern) to test that they are JSON
       Schema-compliant, by running the tests from the official test suite, without having to manually convert
       them to perl tests.

       You are unlikely to want this module, unless you are attempting to write a module which implements JSON
       Schema the specification, and want to test your compliance.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
         Test::JSON::Schema::Acceptance-&gt;new(specification =&gt; $specification_version)

       Create a new instance of Test::JSON::Schema::Acceptance.

       Available options (which are also available as accessor methods on the object) are:

   <b>specification</b>
       This determines the draft version of the schema to confirm compliance to.  Possible values are:

       •   "draft3"

       •   "draft4"

       •   "draft6"

       •   "draft7"

       •   "draft2019-09"

       •   "draft2020-12"

       •   "latest" (alias for "draft2020-12")

       •   "draft-next"

       The default is "latest", but in the synopsis example, JSON::Schema::Modern is testing draft 7 compliance.

       (For backwards compatibility, "new" can be called with a single numeric argument of 3 to 7, which maps to
       "draft3" through "draft7".)

   <b>supported_specifications</b>
       The  version(s)  that  the  implementation  supports; used to skip adding remote resources that reference
       unsupported schema versions (for cross-schema tests). Defaults to "[ $self-&gt;specification ]".

   <b>test_dir</b>
       Instead of specifying a draft specification to test against,  which  will  select  the  most  appropriate
       tests,  you  can pass in the name of a directory of tests to run directly. Files in this directory should
       be         <u>.json</u>         files         following         the         format         described          in
       &lt;https://github.com/json-schema-org/JSON-Schema-Test-Suite/blob/main/README.md&gt;.

   <b>additional_resources</b>
       A  directory  of additional resources which should be made available to the implementation under the base
       URI "<a href="http://localhost">http://localhost</a>:1234". This dataset is automatically provided if you did not  override  "test_dir";
       otherwise,  you  need to supply it yourself, if any tests require it (for example by containing "{"$ref":
       "<a href="http://localhost">http://localhost</a>:1234/foo.json/#a/b/c"}"). If you supply an "add_resource" value  to  "acceptance"  (see
       below), this will be done for you.

   <b>verbose</b>
       Optional.  When true, prints version information and the test result table such that it is visible during
       "make test" or "prove".

   <b>include_optional</b>
       Optional. When true, tests in subdirectories (most notably <u>optional/</u> are also included.

   <b>skip_dir</b>
       Optional. Pass a string or arrayref consisting of relative path name(s) to indicate  directories  (within
       the  test  directory  as  specified above with "specification" or "test_dir") which will be skipped. Note
       that this is only useful currently with "include_optional =&gt; 1", as otherwise all subdirectories would be
       skipped anyway.

   <b>results</b>
       After calling "acceptance", a list of test results are provided here. It is an arrayref of hashrefs  with
       four keys:

       •   file - the filename

       •   pass - the number of pass results for that file

       •   todo_fail - the number of fail results for that file that were marked TODO

       •   fail - the number of fail results for that file (not including TODO tests)

   <b>results_text</b>
       After calling "acceptance", a text string tabulating the test results are provided here. This is the same
       table that is printed at the end of the test run.

   <b>test_schemas</b>
       Optional.  A  boolean that, when true, will test every schema against its specification metaschema. (When
       set, "specification" must also be set.)

       This normally should not be set as the official test suite has already been sanity-tested,  but  you  may
       want to set this in development environments if you are using your own test files.

       Defaults to false.

</pre><h4><b>SUBROUTINES/METHODS</b></h4><pre>
   <b>acceptance</b>
       Accepts a hash of options as its arguments.

       (Backwards-compatibility  mode:  accepts  a  subroutine  which  is  used as "validate_json_string", and a
       hashref of arguments.)

       Available options are:

       <u>validate_data</u>

       A subroutine reference, which is passed two arguments: the JSON Schema, and the <b>inflated</b>  data  structure
       to be validated. This is the main entry point to your JSON Schema library being tested.

       The subroutine can return either one value or two:

       *  a  boolean  value  indicating  whether  the schema was valid for the input or not (required) * a value
       containing the result of the evaluation (which will be JSONified in the test output) (optional)

       Either "validate_data" or "validate_json_string" is required.

       <u>validate_json_string</u>

       A subroutine reference, which is passed two arguments: the JSON Schema, and the  <b>JSON</b>  <b>string</b>  containing
       the  data  to be validated. This is an alternative to "validate_data" above, if your library only accepts
       JSON strings.

       The subroutine can return either one value or two:

       * a boolean value indicating whether the schema was valid for the input  or  not  (required)  *  a  value
       containing the result of the evaluation (which will be JSONified in the test output) (optional)

       Exactly one of "validate_data" or "validate_json_string" is required.

       <u>add_resource</u>

       Optional.  A subroutine reference, which will be called at the start of "acceptance" multiple times, with
       the arguments:

       •   a URI (string): the canonical uri to use for the new resource

       •   a data structure containing schema data to be associated with that URI, for use in  some  tests  that
           use additional resources (see above).

       •   a  list  of key-value pairs (optional), containing additional options to be passed to the subroutine:
           keys currently limited to "specification_version".

       If you do not provide this option, you will be responsible for ensuring that those  additional  resources
       are made available to your implementation for the successful execution of the tests that rely on them.

       For                            more                            information,                           see
       &lt;https://json-schema.org/draft/2020-12/json-schema-core.html#rfc.section.9.1.2&gt;.

       <u>tests</u>

       Optional. Restricts tests to just those mentioned (the conditions are ANDed  together,  not  ORed).   The
       syntax can take one of many forms:

         # run tests in this file
         tests =&gt; { file =&gt; 'dependencies.json' }

         # run tests in these files
         tests =&gt; { file =&gt; [ 'dependencies.json', 'refRemote.json' ] }

         # run tests in this file with this group description
         tests =&gt; {
           file =&gt; 'refRemote.json',
           group_description =&gt; 'remote ref',
         }

         # run tests in this file with these group descriptions
         tests =&gt; {
           file =&gt; 'const.json',
           group_description =&gt; [ 'const validation', 'const with object' ],
         }

         # run tests in this file with this group description and test description
         tests =&gt; {
           file =&gt; 'const.json',
           group_description =&gt; 'const validation',
           test_description =&gt; 'another type is invalid',
         }

         # run tests in this file with this group description and these test descriptions
         tests =&gt; {
           file =&gt; 'const.json',
           group_description =&gt; 'const validation',
           test_description =&gt; [ 'same value is valid', 'another type is invalid' ],
         }

       <u>todo_tests</u>

       Optional.  Mentioned  tests  will  run as "TODO". Uses arrayrefs of the same hashref structure as "tests"
       above, which are ORed together.

         todo_tests =&gt; [
           # all tests in this file are TODO
           { file =&gt; 'dependencies.json' },
           # just some tests in this file are TODO
           { file =&gt; 'boolean_schema.json', test_description =&gt; 'array is invalid' },
           # .. etc
         ]

   <b>json_prettyprint</b>
       JSON-encodes a data structure in a format suitable for human view, used for printing test diagnostics.

   <b>json_encoder</b>
       Provides access to the object that provides the "json_prettyprint" method.

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       Daniel Perrett &lt;<a href="mailto:perrettdl@cpan.org">perrettdl@cpan.org</a>&gt; for the concept and help in design.

       Ricardo Signes &lt;<a href="mailto:rjbs@cpan.org">rjbs@cpan.org</a>&gt; for direction to and creation of Test::Fatal.

       Various others in #perl-help.

</pre><h4><b>SUPPORT</b></h4><pre>
       Bugs may be submitted through &lt;https://github.com/karenetheridge/Test-JSON-Schema-Acceptance/issues&gt;.

       You can also find me on the JSON Schema Slack server &lt;https://json-schema.slack.com&gt;  and  OpenAPI  Slack
       server &lt;https://open-api.slack.com&gt;, which are also great resources for finding help.

</pre><h4><b>AUTHOR</b></h4><pre>
       Ben Hutton (@relequestual) &lt;<a href="mailto:relequest@cpan.org">relequest@cpan.org</a>&gt;

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       •   Karen Etheridge &lt;<a href="mailto:ether@cpan.org">ether@cpan.org</a>&gt;

       •   Daniel Perrett &lt;<a href="mailto:dp13@sanger.ac.uk">dp13@sanger.ac.uk</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENCE</b></h4><pre>
       This software is Copyright (c) 2015 by Ben Hutton.

       This is free software, licensed under:

         The MIT (X11) License

       This  distribution  includes  data  from  the &lt;https://json-schema.org&gt; test suite, which carries its own
       licence (see <u>share/LICENSE</u>).

       Permission is explicitly <b>NOT</b> granted to repackage  or  redistribute  this  distribution  with  any  files
       altered  or  added  (such as with a different set of test data) than what was originally published to the
       Perl Programming Authors Upload Server (PAUSE),  as  dependencies  of  this  distribution  have  specific
       expectations  as  to  the  contents  of  this  test data depending on version.  If it is desired to use a
       different dataset at runtime, please refer to the "test_dir" configuration option.

perl v5.40.1                                       2025-06-08                <u>Test::JSON::Schema::<a href="../man3pm/Acceptance.3pm.html">Acceptance</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>