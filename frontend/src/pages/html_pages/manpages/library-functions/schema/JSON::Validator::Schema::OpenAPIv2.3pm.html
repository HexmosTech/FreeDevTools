<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON::Validator::Schema::OpenAPIv2 - OpenAPI version 2 / Swagger</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libjson-validator-perl">libjson-validator-perl_5.15+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       JSON::Validator::Schema::OpenAPIv2 - OpenAPI version 2 / Swagger

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use JSON::Validator;
         my $schema = JSON::Validator-&gt;new-&gt;schema("...")-&gt;schema;

         # Check for specification errors
         my $errors = $schema-&gt;errors;

         # Returns a list of zero or more JSON::Validator::Error objects
         my @request_errors = $schema-&gt;validate_request(
           [get =&gt; "/path"],
           {body =&gt; sub { return {exists =&gt; 1, value =&gt; {}} }},
         );

         # Returns a list of zero or more JSON::Validator::Error objects
         my @response_errors = $schema-&gt;validate_response(
           [get =&gt; "/path", 200],
           {body =&gt; sub { return {exists =&gt; 1, value =&gt; {}} }},
         );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class represents &lt;<a href="http://swagger.io/v2/schema.json">http://swagger.io/v2/schema.json</a>&gt;.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>errors</b>
         my $array_ref = $schema-&gt;errors;

       See "errors" in JSON::Validator::Schema.

   <b>moniker</b>
         $str    = $schema-&gt;moniker;
         $schema = $schema-&gt;moniker("openapiv2");

       Used to get/set the moniker for the given schema. Default value is "openapiv2".

   <b>specification</b>
         my $str    = $schema-&gt;specification;
         my $schema = $schema-&gt;specification($str);

       Defaults to "&lt;<a href="http://swagger.io/v2/schema.json">http://swagger.io/v2/schema.json</a>&gt;".

</pre><h4><b>METHODS</b></h4><pre>
   <b>add_default_response</b>
         $schema = $schema-&gt;add_default_response(\%params);

       Used to add a default response schema for operations that does not already have one. %params can be:

       • description

         The human readable description added to the operation.

         Defaults: "Default response."

       • name

         The name used in the specification under "/components/schemas/".

         Defaults: "DefaultResponse"

       • schema

         The schema to add. The default schema below might change, but the basics will stay the same:

           {
             type: "object",
             required: ["errors"],
             properties: {
               errors: {
                 type: "array",
                 items: {
                   type: "object",
                   required: ["message"],
                   properties: {
                     message: {type: "string"},
                     path: {type: "string"}
                   }
                 }
               }
             }
           }

       • status

         A list of status codes to apply the default schema to.

         Default: "[400, 401, 404, 500, 501]".

   <b>base_url</b>
         $url = $schema-&gt;base_url;
         $schema = $schema-&gt;base_url($url);

       Can get or set the default URL for this schema. $url can be either a Mojo::URL object or a plain string.

       This method will read or write "basePath", "host" and/or "schemas" in "data".

   <b>coerce</b>
         my $schema   = $schema-&gt;coerce({booleans =&gt; 1, numbers =&gt; 1, strings =&gt; 1});
         my $hash_ref = $schema-&gt;coerce;

       Coercion  is  enabled  by  default,  since  headers,  path parts, query parameters, ... are in most cases
       strings.

       See also "coerce" in JSON::Validator.

   <b>new</b>
         $schema = JSON::Validator::Schema::OpenAPIv2-&gt;new(\%attrs);
         $schema = JSON::Validator::Schema::OpenAPIv2-&gt;new;

       Same as "new" in JSON::Validator::Schema, but will also build L/coerce&gt;.

   <b>parameters_for_request</b>
         $parameters = $schema-&gt;parameters_for_request([$method, $path]);

       Finds all the request parameters defined in the schema, including inherited parameters.  Returns  "undef"
       if the $path and $method cannot be found.

       Example return value:

         [
           {in =&gt; "query", name =&gt; "q"},
           {in =&gt; "body", name =&gt; "body", accepts =&gt; ["application/json"]},
         ]

       The return value MUST not be mutated.

   <b>parameters_for_response</b>
         $array_ref = $schema-&gt;parameters_for_response([$method, $path, $status]);

       Finds  the  response  parameters defined in the schema. Returns "undef" if the $path, $method and $status
       cannot be found. Will default to the "default" response definition if $status  could  not  be  found  and
       "default" exists.

       Example return value:

         [
           {in =&gt; "header", name =&gt; "X-Foo"},
           {in =&gt; "body", name =&gt; "body", accepts =&gt; ["application/json"]},
         ]

       The return value MUST not be mutated.

   <b>routes</b>
         $collection = $schema-&gt;routes;

       Used  to  gather  all  available  routes  in  the  schema  and  return  them  sorted.  The  result  is  a
       Mojo::Collection object, where each item has a hash looking like this:

         {
           method       =&gt; 'get',
           path         =&gt; '/user/{id}',
           operation_id =&gt; 'getUser', # Might be undef()
         }

   <b>validate_request</b>
         @errors = $schema-&gt;validate_request([$method, $path], \%req);

       This method can be used to validate a HTTP request. %req should contain key/value pairs representing  the
       request parameters. Example:

         %req = (
           body =&gt; sub {
             my ($name, $param) = shift;
             # $param = {name =&gt; $name, in =&gt; ..., schema =&gt; ..., ...}
             return {exists =&gt; 1, value =&gt; \%all_params} unless defined $name;
             return {exists =&gt; 1, value =&gt; "..."};
           },
           formData =&gt; {email =&gt; "..."},
           header =&gt; {"X-Request-Base" =&gt; "..."},
           path =&gt; {id =&gt; "..."},
           query =&gt; {limit =&gt; 42},
         );

       "formData",  "header",  "path"  and  "query"  can be either a hash-ref, a hash-like object or a code ref,
       while "body" MUST be a code ref. The return value from the code ref will get mutated, making it  possible
       to check if an individual parameter was validated or not.

         # Before: "exists" and "value" must be present
         my @evaluated;
         $req{query} =  sub { push @evaluated, {exists =&gt; 1, value =&gt; 42}, return $evaluated[-1] };

         # Validate
         $schema-&gt;validate_request(get =&gt; "/user"], \%req);

         # After: "in", "name" and "valid" are added
         $evaluated[-1] ==&gt; {exists =&gt; 1, value =&gt; 42, in =&gt; "query", name =&gt; "foo", valid =&gt; 1};

       A plain hash-ref will <u>/not</u> get mutated.

       The  body  hash-ref  can  also  have a "content_type" key. This will be checked against the list of valid
       request or response content types in the spec.

   <b>validate_response</b>
         @errors = $schema-&gt;validate_response([$method, $path, $status], \%res);

       This method can be used to validate a HTTP response. %res should contain key/value pairs representing the
       response parameters. Example:

         %res = (
           body =&gt; sub {
             my ($name, $param) = shift;
             # $param = {name =&gt; $name, in =&gt; ..., ...}
             return {exists =&gt; 1, value =&gt; \%all_params} unless defined $name;
             return {accept =&gt; "application/json", exists =&gt; 1, value =&gt; "..."};
           },
           header =&gt; {"Location" =&gt; "..."},
         );

       %res follows the same rules as %req  in  "validate_request",  but  also  supports  "accept",  instead  of
       specifying "content_type". "accept" should have the same format as an "Accept" HTTP header.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       JSON::Validator,                                                            Mojolicious::Plugin::OpenAPI,
       &lt;<a href="http://openapi-specification-visual-documentation.apihandyman.io/">http://openapi-specification-visual-documentation.apihandyman.io/</a>&gt;

perl v5.40.1                                       2025-03-29             <u>JSON::Validator...hema::<a href="../man3pm/OpenAPIv2.3pm.html">OpenAPIv2</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>