<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>modbus_mapping_new_start_address - allocate four arrays of bits and registers accessible from their</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libmodbus-dev">libmodbus-dev_3.1.6-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       modbus_mapping_new_start_address - allocate four arrays of bits and registers accessible from their
       starting addresses

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>modbus_mapping_t</b> modbus_mapping_new_start_address(int <u>start_bits</u>, int <u>nb_bits</u>, int <u>start_input_bits</u>, int
       <u>nb_input_bits</u>, int <u>start_registers</u>, int <u>nb_registers</u>, int <u>start_input_registers</u>, int
       <u>nb_input_registers</u>);*

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>modbus_mapping_new_start_address()</u> function shall allocate four arrays to store bits, input bits,
       registers and inputs registers. The pointers are stored in modbus_mapping_t structure. All values of the
       arrays are initialized to zero.

       The different starting addresses make it possible to place the mapping at any address in each address
       space. This way, you can give access to values stored at high addresses without allocating memory from
       the address zero, for eg. to make available registers from 10000 to 10009, you can use:

           mb_mapping = modbus_mapping_new_start_address(0, 0, 0, 0, 10000, 10, 0, 0);

       With this code, only 10 registers (uint16_t) are allocated.

       If it isn’t necessary to allocate an array for a specific type of data, you can pass the zero value in
       argument, the associated pointer will be NULL.

       This function is convenient to handle requests in a Modbus server/slave.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <u>modbus_mapping_new_start_address()</u> function shall return the new allocated structure if successful.
       Otherwise it shall return NULL and set errno.

</pre><h4><b>ERRORS</b></h4><pre>
       ENOMEM
           Not enough memory

</pre><h4><b>EXAMPLE</b></h4><pre>
           /* The first value of each array is accessible at the defined address.
              The end address is ADDRESS + NB - 1. */
           mb_mapping = modbus_mapping_new_start_address(BITS_ADDRESS, BITS_NB,
                                           INPUT_BITS_ADDRESS, INPUT_BITS_NB,
                                           REGISTERS_ADDRESS, REGISTERS_NB,
                                           INPUT_REGISTERS_ADDRESS, INPUT_REGISTERS_NB);
           if (mb_mapping == NULL) {
               fprintf(stderr, "Failed to allocate the mapping: %s\n",
                       modbus_strerror(errno));
               modbus_free(ctx);
               return -1;
           }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/modbus_mapping_new.3.html">modbus_mapping_new</a></b>(3) <b><a href="../man3/modbus_mapping_free.3.html">modbus_mapping_free</a></b>(3)

</pre><h4><b>AUTHORS</b></h4><pre>
       The libmodbus documentation was written by Stéphane Raimbault &lt;<a href="mailto:stephane.raimbault@gmail.com">stephane.raimbault@gmail.com</a>&gt;

libmodbus v3.1.6                                   12/09/2019                            <u><a href="../man3/MODBUS_MAPPING_NEW_S.3.html">MODBUS_MAPPING_NEW_S</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>