<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalyst::Authentication::Realm::Progressive - Authenticate against multiple realms</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcatalyst-plugin-authentication-perl">libcatalyst-plugin-authentication-perl_0.10024-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Catalyst::Authentication::Realm::Progressive - Authenticate against multiple realms

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This Realm allows an application to use a single <b>authenticate()</b> call during which multiple realms are
       used and tried incrementally until one performs a successful authentication is accomplished.

       A simple use case is a Temporary Password that looks and acts exactly as a regular password. Without
       changing the authentication code, you can authenticate against multiple realms.

       Another use might be to support a legacy website authentication system, trying the current auth system
       first, and upon failure, attempting authentication against the legacy system.

   <b>EXAMPLE</b>
       If your application has multiple realms to authenticate, such as a temporary password realm and a normal
       realm, you can configure the progressive realm as the default, and configure it to iteratively call the
       temporary realm and then the normal realm.

        __PACKAGE__-&gt;config(
           'Plugin::Authentication' =&gt; {
               default_realm =&gt; 'progressive',
               realms =&gt; {
                   progressive =&gt; {
                       class =&gt; 'Progressive',
                       realms =&gt; [ 'temp', 'normal' ],
                       # Modify the authinfo passed into authenticate by merging
                       # these hashes into the realm's authenticate call:
                       authinfo_munge =&gt; {
                           normal =&gt; { 'type' =&gt; 'normal' },
                           temp   =&gt; { 'type' =&gt; 'temporary' },
                       }
                   },
                   normal =&gt; {
                       credential =&gt; {
                           class =&gt; 'Password',
                           password_field =&gt; 'secret',
                           password_type  =&gt; 'hashed',
                           password_hash_type =&gt; 'SHA-1',
                       },
                       store =&gt; {
                           class      =&gt; 'DBIx::Class',
                           user_model =&gt; 'Schema::Person::Identity',
                           id_field   =&gt; 'id',
                       }
                   },
                   temp =&gt; {
                       credential =&gt; {
                           class =&gt; 'Password',
                           password_field =&gt; 'secret',
                           password_type  =&gt; 'hashed',
                           password_hash_type =&gt; 'SHA-1',
                       },
                       store =&gt; {
                           class    =&gt; 'DBIx::Class',
                           user_model =&gt; 'Schema::Person::Identity',
                           id_field   =&gt; 'id',
                       }
                   },
               }
           }
        );

       Then, in your controller code, to attempt authentication against both realms you just have to do a simple
       authenticate call:

        if ( $c-&gt;authenticate({ id =&gt; $username, password =&gt; $password }) ) {
            if ( $c-&gt;user-&gt;type eq 'temporary' ) {
                # Force user to change password
            }
        }

</pre><h4><b>CONFIGURATION</b></h4><pre>
       realms
           An  array  reference consisting of each realm to attempt authentication against, in the order listed.
           If the realm does not exist, calling authenticate will die.

       authinfo_munge
           A hash reference keyed by realm names, with values being hash references to merge into  the  authinfo
           call  that is subsequently passed into the realm's authenticate method.  This is useful if your store
           uses  the  same  class  for  each  realm,  separated  by   some   other   token   (in   the   EXAMPLE
           authinfo_mungesection,  the  'realm'  is  a  column on "Schema::Person::Identity" that will be either
           'temp' or 'local', to ensure the query to fetch the user finds the right  Identity  record  for  that
           realm.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b> <b>($realmname,</b> <b>$config,</b> <b>$app)</b>
       Constructs an instance of this realm.

   <b>authenticate</b>
       This  method iteratively calls each realm listed in the "realms" configuration key.  It returns after the
       first successful authentication call is done.

</pre><h4><b>AUTHORS</b></h4><pre>
       J. Shirley "&lt;<a href="mailto:jshirley@cpan.org">jshirley@cpan.org</a>&gt;"

       Jay Kuri "&lt;<a href="mailto:jayk@cpan.org">jayk@cpan.org</a>&gt;"

</pre><h4><b>COPYRIGHT</b> <b>&amp;</b> <b>LICENSE</b></h4><pre>
       Copyright (c) 2008 the aforementioned authors. All rights reserved. This program is  free  software;  you
       can redistribute it and/or modify it under the same terms as Perl itself.

perl v5.40.0                                       2024-10-28             <u>Catalyst::Authe...lm::<a href="../man3pm/Progressive.3pm.html">Progressive</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>