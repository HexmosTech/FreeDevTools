<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>notcurses_metric - fixed-width numeric output with metric suffixes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnotcurses-core-dev">libnotcurses-core-dev_3.0.7+dfsg.1-1ubuntu8_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       notcurses_metric - fixed-width numeric output with metric suffixes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;notcurses/notcurses.h&gt;</b>

              #define NCPREFIXCOLUMNS 7
              #define NCIPREFIXCOLUMNS 8
              #define NCBPREFIXCOLUMNS 9
              #define NCPREFIXSTRLEN (NCPREFIXCOLUMNS + 1)
              #define NCIPREFIXSTRLEN (NCIPREFIXCOLUMNS + 1)
              #define NCBPREFIXSTRLEN (NCBPREFIXCOLUMNS + 1)
              #define NCMETRICFWIDTH(x, cols) ((int)(strlen(x) - ncstrwidth(x) + (cols)))
              #define NCPREFIXFMT(x) NCMETRICFWIDTH((x), NCPREFIXCOLUMNS), (x)
              #define NCIPREFIXFMT(x) NCMETRIXFWIDTH((x), NCIPREFIXCOLUMNS), (x)
              #define NCBPREFIXFMT(x) NCMETRICFWIDTH((x), NCBPREFIXCOLUMNS), (x)

       <b>const</b>  <b>char*</b> <b>ncnmetric(uintmax_t</b> <u>val</u><b>,</b> <b>size_t</b> <b>s,</b> <b>uintmax_t</b> <u>decimal</u><b>,</b> <b>char*</b> <u>buf</u><b>,</b> <b>int</b> <u>omitdec</u><b>,</b> <b>unsigned</b> <u>mult</u><b>,</b>
       <b>int</b> <u>uprefix</u><b>);</b>

       <b>static</b> <b>inline</b> <b>const</b> <b>char*</b> <b>ncqprefix(uintmax_t</b> <u>val</u><b>,</b> <b>uintmax_t</b> <u>decimal</u><b>,</b> <b>char*</b> <u>buf</u><b>,</b> <b>int</b> <u>omitdec</u><b>);</b>

       <b>static</b> <b>inline</b> <b>const</b> <b>char*</b> <b>nciprefix(uintmax_t</b> <u>val</u><b>,</b> <b>uintmax_t</b> <u>decimal</u><b>,</b> <b>char*</b> <u>buf</u><b>,</b> <b>int</b> <u>omitdec</u><b>);</b>

       <b>static</b> <b>inline</b> <b>const</b> <b>char*</b> <b>ncbprefix(uintmax_t</b> <u>val</u><b>,</b> <b>uintmax_t</b> <u>decimal</u><b>,</b> <b>char*</b> <u>buf</u><b>,</b> <b>int</b> <u>omitdec</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ncmetric</b> (and the helper wrappers <b>qprefix</b> and <b>bprefix</b>) accept very large  (or  very  small)  non-negative
       numbers, and prepare formatted output of a maximum width using metric suffixes.  The suffix can represent
       arbitrary  amounts  of growth, but is designed for 1000 (<b>NCPREFIX</b>) or 1024 (<b>NCIPREFIX</b>).  1024 is used for
       "digital units of information", i.e.  kibibytes and gibibits.  <b>ncmetric</b> supports the large suffixes KMGT‐
       PEZY (Kilo, Mega, Giga, Tera, Peta, Exa, Zetta, and Yotta) and the small suffixes mµnpfazy (Milli, Micro,
       Nano, Pico, Femto, Atto, Zepto, and Yocto).  This covers the range 1e24 (one septillion)  through  1e-24,
       sufficing for all possible values of a 64-bit <b>uintmax_t</b>.

       <u><b>val</b></u>  is the value being output, having been scaled by <u><b>decimal</b></u>.  <u><b>decimal</b></u> will typically be 1; to represent
       values less than 1, <u><b>decimal</b></u> should be larger than <u><b>val</b></u>.  The output will be written to <u><b>buf</b></u>, which must  be
       at least:

       • <b>NCPREFIXSTRLEN</b> + 1 bytes for a 1000-based value

       • <b>NCIPREFIXSTRLEN</b> + 1 bytes for a 1024-based value

       • <b>NCBPREFIXSTRLEN</b> + 1 bytes for a 1024-based value with an 'i' suffix

       <u><b>s</b></u>  is  the  maximum output size, including '\0', used in the same fashion as <b><a href="../man3/snprintf.3.html">snprintf</a>(3)</b> (which <b>ncnmetric</b>
       calls).

       Three helper functions are provided to simplify these common cases:

              // Mega, kilo, gigafoo. Use NCPREFIXSTRLEN + 1 and NCPREFIXCOLUMNS.
              static inline const char*
              ncqprefix(uintmax_t val, uintmax_t decimal, char* buf, int omitdec){
                return ncmetric(val, decimal, buf, omitdec, 1000, '\0');
              }

              // Mibi, kebi, gibibytes sans 'i' suffix. Use NCIPREFIXSTRLEN + 1.
              static inline const char*
              nciprefix(uintmax_t val, uintmax_t decimal, char* buf, int omitdec){
                return ncmetric(val, decimal, buf, omitdec, 1024, '\0');
              }

              // Mibi, kebi, gibibytes. Use NCBPREFIXSTRLEN + 1 and NCBPREFIXCOLUMNS.
              static inline const char*
              ncbprefix(uintmax_t val, uintmax_t decimal, char* buf, int omitdec){
                return ncmetric(val, decimal, buf, omitdec, 1024, 'i');
              }

       If <b>omitdec</b> is not zero, the decimal point and mantissa will be omitted if  all  digits  to  be  displayed
       would  be  zero.   The  decimal point takes the current locale into account (see <b><a href="../man3/setlocale.3.html">setlocale</a>(3)</b> and <b>locale‐</b>
       <b><a href="../man3/conv.3.html">conv</a>(3)</b>).  <u><b>mult</b></u> is the relative multiple for each suffix.  <u><b>uprefix</b></u>, if not zero, will be used as a suffix
       following any metric suffix.

       The maximum number of columns is not directly related to the  maximum  number  of  bytes,  since  Unicode
       doesn't  necessarily  map  to single-byte characters (including the 'µ' micro suffix).  The corresponding
       defines for maximum column length are:

       • <b>NCPREFIXCOLUMNS</b> (7)

       • <b>NCIPREFIXCOLUMNS</b> (8)

       • <b>NCBPREFIXCOLUMNS</b> (9)

       In general, the maximum-width output will take the form <b>CCC.mmMu</b>, where C are digits of the  characteris‐
       tic  (up to ceil(log10(<b>mult</b>)) digits), the decimal point follows, m are digits of the mantissa (up to 2),
       M is the metric suffix, and u is the <u><b>uprefix</b></u>.  The minimum-width output will take the form <b>C</b>.  This mini‐
       mal form can occur if <u><b>omitdec</b></u> is non-zero and a single-column value such as 5 is passed for <u><b>val</b></u>.

       Three more defines are provided to simplify formatted fixed-width output using the results  of  <b>ncmetric</b>.
       Each  of  these macros accepts a character buffer holding the result of the call, and expand to <u>two</u> argu‐
       ments:

       • <b>NCPREFIXFMT(x)</b>

       • <b>NCIPREFIXFMT(x)</b>

       • <b>NCBPREFIXFMT(x)</b>

       These can be used in e.g.  the following ungainly fashion:

       **ncplane_printf(n, "%*s", NCPREFIXFMT(buf));**

       to ensure that the output is always <b>NCPREFIXCOLUMNS</b> wide.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>NULL</b> if input parameters were invalid.  Otherwise, a pointer to <u><b>buf</b></u>, filled in with the formatted output.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>ncnmetric(0,</b> <b>INT_MAX,</b> <b>buf,</b> <b>0,</b> <b>1000,</b> <b>'\0')</b>: "0.00".

       <b>ncnmetric(0,</b> <b>INT_MAX,</b> <b>buf,</b> <b>1,</b> <b>1000,</b> <b>'\0')</b>: "0".

       <b>ncnmetric(1023,</b> <b>INT_MAX,</b> <b>buf,</b> <b>1,</b> <b>1000,</b> <b>'\0')</b>: "1.02K".

       <b>ncnmetric(1023,</b> <b>INT_MAX,</b> <b>buf,</b> <b>1,</b> <b>1024,</b> <b>'i')</b>: "1023".

       <b>ncnmetric(1024,</b> <b>INT_MAX,</b> <b>buf,</b> <b>1,</b> <b>1024,</b> <b>'i')</b>: "1Ki".

       <b>ncnmetric(4096,</b> <b>INT_MAX,</b> <b>buf,</b> <b>0,</b> <b>1024,</b> <b>'i')</b>: "4.00Ki".

       <b>ncnmetric(0x7fffffffffffffff,</b> <b>INT_MAX,</b> <b>buf,</b> <b>0,</b> <b>1000,</b> <b>'\0')</b>: "9.22E".

       <b>ncnmetric(0xffffffffffffffff,</b> <b>INT_MAX,</b> <b>buf,</b> <b>0,</b> <b>1000,</b> <b>'\0')</b>: "18.45E".

</pre><h4><b>BUGS</b></h4><pre>
       This function is difficult to understand.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/localeconv.3.html">localeconv</a>(3)</b>, <b><a href="../man3/notcurses.3.html">notcurses</a>(3)</b>, <b><a href="../man3/notcurses_output.3.html">notcurses_output</a>(3)</b>, <b><a href="../man3/setlocale.3.html">setlocale</a>(3)</b>, <b><a href="../man3/snprintf.3.html">snprintf</a>(3)</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       nick black &lt;<a href="mailto:nickblack@linux.com">nickblack@linux.com</a>&gt;.

                                                     v3.0.7                                  <u><a href="../man3/notcurses_metric.3.html">notcurses_metric</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>