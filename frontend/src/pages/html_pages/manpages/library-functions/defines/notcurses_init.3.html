<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>notcurses_init - initialize a Notcurses instance</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnotcurses-core-dev">libnotcurses-core-dev_3.0.7+dfsg.1-1ubuntu8_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       notcurses_init - initialize a Notcurses instance

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;notcurses/notcurses.h&gt;</b>

              #define NCOPTION_INHIBIT_SETLOCALE   0x0001ull
              #define NCOPTION_NO_CLEAR_BITMAPS    0x0002ull
              #define NCOPTION_NO_WINCH_SIGHANDLER 0x0004ull
              #define NCOPTION_NO_QUIT_SIGHANDLERS 0x0008ull
              #define NCOPTION_PRESERVE_CURSOR     0x0010ull
              #define NCOPTION_SUPPRESS_BANNERS    0x0020ull
              #define NCOPTION_NO_ALTERNATE_SCREEN 0x0040ull
              #define NCOPTION_NO_FONT_CHANGES     0x0080ull
              #define NCOPTION_DRAIN_INPUT         0x0100ull
              #define NCOPTION_SCROLLING           0x0200ull

              #define NCOPTION_CLI_MODE (NCOPTION_NO_ALTERNATE_SCREEN \
                                         |NCOPTION_NO_CLEAR_BITMAPS \
                                         |NCOPTION_PRESERVE_CURSOR \
                                         |NCOPTION_SCROLLING)

              typedef enum {
                NCLOGLEVEL_SILENT,  // print nothing once fullscreen service begins
                NCLOGLEVEL_PANIC,   // default. print diagnostics before we crash/exit
                NCLOGLEVEL_FATAL,   // we're hanging around, but we've had a horrible fault
                NCLOGLEVEL_ERROR,   // we can't keep doing this, but we can do other things
                NCLOGLEVEL_WARNING, // you probably don't want what's happening to happen
                NCLOGLEVEL_INFO,    // "standard information"
                NCLOGLEVEL_VERBOSE, // "detailed information"
                NCLOGLEVEL_DEBUG,   // this is honestly a bit much
                NCLOGLEVEL_TRACE,   // there's probably a better way to do what you want
              } ncloglevel_e;

              typedef struct notcurses_options {
                const char* termtype;
                ncloglevel_e loglevel;
                unsigned margin_t, margin_r, margin_b, margin_l;
                uint64_t flags; // from NCOPTION_* bits
              } notcurses_options;

       <b>struct</b> <b>notcurses*</b> <b>notcurses_init(const</b> <b>notcurses_options*</b> <u>opts</u><b>,</b> <b>FILE*</b> <u>fp</u><b>);</b>

       <b>void</b> <b>notcurses_version_components(int*</b> <u>major</u><b>,</b> <b>int*</b> <u>minor</u><b>,</b> <b>int*</b> <u>patch</u><b>,</b> <b>int*</b> <u>tweak</u><b>);</b>

       <b>int</b> <b>notcurses_cursor_enable(struct</b> <b>notcurses*</b> <u>nc</u><b>,</b> <b>int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>);</b>

       <b>int</b> <b>notcurses_cursor_disable(struct</b> <b>notcurses*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>notcurses_cursor_yx(const</b> <b>struct</b> <b>notcurses*</b> <u>nc</u><b>,</b> <b>int*</b> <u>y</u><b>,</b> <b>int*</b> <u>x</u><b>);</b>

       <b>int</b> <b>notcurses_lex_margins(const</b> <b>char*</b> <u>op</u><b>,</b> <b>notcurses_options*</b> <u>opts</u><b>);</b>

       <b>int</b> <b>notcurses_default_foreground(const</b> <b>struct</b> <b>notcurses*</b> <u>nc</u><b>,</b> <b>uint32_t*</b> <u>fg</u><b>);</b>

       <b>int</b> <b>notcurses_default_background(const</b> <b>struct</b> <b>notcurses*</b> <u>nc</u><b>,</b> <b>uint32_t*</b> <u>bg</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>notcurses_init</b>  prepares  the terminal for cursor-addressable (multiline) mode, writing to some <b>FILE</b>.  If
       the <b>FILE</b> provided as <u><b>fp</b></u> is <b>NULL</b>, <b>stdout</b> will be used.  Whatever <b>FILE</b> is used must be writable, is ideally
       fully buffered, and must be byte-oriented (see <b><a href="../man3/fwide.3.html">fwide</a>(3)</b>).  If the <b>FILE</b> is not  connected  to  a  terminal
       (for example when redirected to a file), <b>/dev/tty</b> will be opened (if possible) for communication with the
       controlling  terminal.   Most  output  (including  all styling and coloring) is written to the <b>FILE</b>; only
       queries need be sent to a true terminal.  If no terminal is available (for example when running as a dae‐
       mon), defaults regarding such things as screen size and the palette are assumed.

       The <b>struct</b> <b>notcurses_option</b> passed as <u><b>opts</b></u> controls behavior.  Passing a <b>NULL</b> <u><b>opts</b></u> is equivalent to pass‐
       ing an all-zero (default) <u><b>opts</b></u>.  A process can have only one Notcurses context active at a time;  calling
       <b>notcurses_init</b> again before calling <b>notcurses_stop</b> will return <b>NULL</b> (this is reliable even if called con‐
       currently from two threads).

       On  success, a pointer to a valid <b>struct</b> <b>notcurses</b> is returned.  <b>NULL</b> is returned on failure.  Before the
       process exits, <b><a href="../man3/notcurses_stop.3.html">notcurses_stop</a>(3)</b> should be called to reset the terminal and free up resources.

       An appropriate <b><a href="../man5/terminfo.5.html">terminfo</a>(5)</b> entry must exist for the terminal.  This entry is usually selected  using  the
       value  of  the <b>TERM</b> environment variable (see <b><a href="../man3/getenv.3.html">getenv</a>(3)</b>), but a non-<b>NULL</b> value for <u><b>termtype</b></u> will override
       this (terminfo is not used on Microsoft Windows, where it is neither meaningful nor necessary  to  define
       <b>TERM</b>).   An invalid terminfo specification can lead to reduced performance, reduced display capabilities,
       and/or display errors.  Notcurses natively targets 24bpp/8bpc RGB color, and it is thus desirable to  use
       a terminal with the <b>rgb</b> capability (e.g.  xterm's <b>xterm-direct</b>).  Colors will otherwise be quantized down
       to whatever the terminal supports.

       If the terminal advertises support for an "alternate screen" via the <b>smcup</b> terminfo capability, Notcurses
       will  employ  it  by  default.   This  can be prevented by setting <b>NCOPTION_NO_ALTERNATE_SCREEN</b> in <u><b>flags</b></u>.
       Users tend to have strong opinions regarding the alternate screen, so it's often useful  to  expose  this
       via a command-line option.  When the alternate screen is not used, the contents of the terminal at start‐
       up  remain  visible  until  obliterated,  on  a cell-by-cell basis (see <b><a href="../man3/notcurses_plane.3.html">notcurses_plane</a>(3)</b> for details on
       clearing the screen at startup without using the alternate screen).   If  the  alternate  screen  is  not
       available, the display will still be cleared without <b>NCOPTION_NO_ALTERNATE_SCREEN</b>.

       Notcurses  hides  the cursor by default.  It can be dynamically enabled, moved, or disabled during execu‐
       tion via <b>notcurses_cursor_enable</b> and <b>notcurses_cursor_disable</b>.  It will  be  hidden  while  updating  the
       screen.   The  current  location of the terminal cursor can be acquired with <b>notcurses_cursor_yx</b>, whether
       visible or not.

       <b>notcurses_init</b> typically emits some diagnostics at startup, including version information  and  some  de‐
       tails  of the configured terminal.  This can be inhibited with <b>NCOPTION_SUPPRESS_BANNERS</b>.  This will also
       inhibit the performance summary normally printed by <b><a href="../man3/notcurses_stop.3.html">notcurses_stop</a>(3)</b>.

       Notcurses can render to a subregion of the terminal by specifying desired margins on all four sides.   By
       default,  all margins are zero, and thus rendering will be performed on the entirety of the viewing area.
       This is orthogonal to use of the alternate screen; using the alternate screen plus margins will  see  the
       full  screen cleared, followed by rendering to a subregion.  Inhibiting the alternate screen plus margins
       will render to a subregion, with the screen outside this region not cleared.   Margins  are  best-effort.
       <b>notcurses_lex_margins</b> provides lexing a margin argument expression in one of two forms:

       • a single number, which will be applied to all sides, or

       • four comma-delimited numbers, applied to top, right, bottom, and left.

       To  allow  future options without requiring redefinition of the structure, the <u><b>flags</b></u> field is only a par‐
       tially-defined bitfield.  Undefined bits should be zero.  The following flags are defined:

       • <b>NCOPTION_INHIBIT_SETLOCALE</b>: Unless this flag is set, <b>notcurses_init</b> will call <b>setlocale(LC_ALL,</b>  <b>NULL)</b>.
         If  the  result  is  either  "<b>C</b>" or "<b>POSIX</b>", it will print a diagnostic to <b>stderr</b>, and then call <b>setlo‐</b>
         <b>cale(LC_ALL,</b> <b>"").</b>  This will attempt to set the locale based off the <b>LANG</b> environment  variable.   Your
         program should call <b><a href="../man3/setlocale.3.html">setlocale</a>(3)</b> itself, usually as one of the first lines.

       • <b>NCOPTION_NO_CLEAR_BITMAPS</b>:  On  entry,  make no special attempt to clear any preexisting bitmaps.  Note
         that they might still get cleared even if this is set, and they might not get cleared even if  this  is
         not set.

       • <b>NCOPTION_NO_WINCH_SIGHANDLER</b>:  A signal handler will usually be installed for <b>SIGWINCH</b> and <b>SIGCONT</b>, re‐
         sulting in <b>NCKEY_RESIZE</b> events being generated on input.  With this flag, the handler will not  be  in‐
         stalled.

       • <b>NCOPTION_NO_QUIT_SIGHANDLERS</b>:  A  signal handler will usually be installed for <b>SIGABRT</b>, <b>SIGBUS</b>, <b>SIGFPE</b>,
         <b>SIGILL</b>, <b>SIGINT</b>, <b>SIGQUIT</b>, <b>SIGSEGV</b>, and <b>SIGTERM</b>, cleaning up the terminal on such exceptions.  With  this
         flag, the handler will not be installed.

       • <b>NCOPTION_PRESERVE_CURSOR</b>:  The  virtual  cursor  is typically placed at the screen's origin at startup.
         With this flag, it is instead placed wherever the cursor was at program launch.

       • <b>NCOPTION_SUPPRESS_BANNERS</b>: Disables the diagnostics and version information printed on startup, and the
         performance summary on exit.

       • <b>NCOPTION_NO_ALTERNATE_SCREEN</b>: Do not use the alternate screen (see <b><a href="../man5/terminfo.5.html">terminfo</a>(5)</b>), even if it  is  avail‐
         able.

       • <b>NCOPTION_NO_FONT_CHANGES</b>: Do not touch the font.  Notcurses might otherwise attempt to extend the font,
         especially in the Linux console.

       • <b>NCOPTION_DRAIN_INPUT</b>:  Standard  input may be freely discarded.  If you do not intend to process input,
         pass this flag.  Otherwise, input can buffer up, and eventually prevent Notcurses from processing  mes‐
         sages from the terminal.  It will furthermore avoid wasting time processing useless input.

       • <b>NCOPTION_SCROLLING</b>:  Enable  scrolling  on  the  standard  plane.   This  is  equivalent to calling <b>nc‐</b>
         <b>plane_set_scrolling(stdn,</b> <b>true)</b> on some standard plane <u><b>stdn</b></u>.

       <b>NCOPTION_CLI_MODE</b> is provided as an alias for the bitwise OR  of  <b>NCOPTION_SCROLLING</b>,  <b>NCOPTION_NO_ALTER‐</b>
       <b>NATE_SCREEN</b>, <b>NCOPTION_PRESERVE_CURSOR</b>, and <b>NCOPTION_NO_CLEAR_BITMAPS</b>.  If writing a CLI, it is recommend‐
       ed to use <b>NCOPTION_CLI_MODE</b> rather than explicitly listing these options.

       <b>notcurses_default_foreground</b>  returns  the  default  foreground color, if it could be detected.  <b>notcurs‐</b>
       <b>es_default_background</b> returns the default background color, if it could be detected.

   <b>Fatal</b> <b>signals</b>
       It is important to reset the terminal before exiting, whether terminating due to intended operation or  a
       received  signal.   This is usually accomplished by explicitly calling <b><a href="../man3/notcurses_stop.3.html">notcurses_stop</a>(3)</b> during shutdown.
       For convenience, Notcurses by default installs signal handlers for various signals which would  typically
       result  in  process  termination  (see <b><a href="../man7/signal.7.html">signal</a>(7)</b>).  These signal handlers call <b><a href="../man3/notcurses_stop.3.html">notcurses_stop</a>(3)</b> for each
       <b>struct</b> <b>notcurses</b> in the process, and then propagate the  signal  to  any  previously-configured  handler.
       These handlers are disabled upon entry to <b><a href="../man3/notcurses_stop.3.html">notcurses_stop</a>(3)</b>.

       To  prevent  signal  handler registration, provide <b>NCOPTION_NO_QUIT_SIGHANDLERS</b>.  No means is provided to
       selectively register fatal signal handlers.  If this is done, the caller ought be sure to effect  similar
       functionality themselves.

   <b>Resize</b> <b>events</b>
       <b>SIGWINCH</b>  (SIGnal  WINdow  CHange) is delivered to the process when the terminal is resized.  The default
       action is to ignore it (<b>SIG_IGN</b>).  Notcurses installs a handler for  this  signal.   The  handler  causes
       Notcurses to update its idea of the terminal's size using <b>TIOCGWINSZ</b> (see <b><a href="../man2/ioctl_tty.2.html">ioctl_tty</a>(2)</b>), and generates an
       <b>NCKEY_RESIZE</b>  input event (see <b><a href="../man3/notcurses_input.3.html">notcurses_input</a>(3)</b>.  This signal handler can be inhibited by setting <b>NCOP‐</b>
       <b>TION_NO_WINCH_SIGHANDLER</b> in <b>flags</b>.  If this is done, the caller should probably watch for the signal, and
       invoke <b><a href="../man3/notcurses_refresh.3.html">notcurses_refresh</a>(3)</b> or <b><a href="../man3/notcurses_render.3.html">notcurses_render</a>(3)</b> upon its receipt.

       A resize event does not invalidate any references returned earlier by Notcurses.  The content of any  new
       screen  area  is  undefined until the next call to <b><a href="../man3/notcurses_render.3.html">notcurses_render</a>(3)</b>.  This is true even if an existing
       <b>struct</b> <b>ncplane</b> (see <b><a href="../man3/notcurses_plane.3.html">notcurses_plane</a>(3)</b>) overlaps the new area, since the signal could  arrive  while  the
       ncplanes  are  being modified.  Signal handlers are quite restricted as to what actions they can perform,
       so minimal work is performed in the handler proper.

       Thus, in the absence of <b>NCOPTION_NO_WINCH_SIGHANDLER</b>, <b>SIGWINCH</b> results in:

       • interruption of some thread to process the signal

       • a <b>TIOCGWINSZ</b> <b>ioctl</b> to retrieve the new screen size

       • queuing of a <b>NCKEY_RESIZE</b> input event (if there is space in the queue)

       Upon the next call to <b><a href="../man3/notcurses_render.3.html">notcurses_render</a>(3)</b> or <b><a href="../man3/notcurses_refresh.3.html">notcurses_refresh</a>(3)</b>, the standard plane (see <b>notcurses_std‐</b>
       <b><a href="../man3/plane.3.html">plane</a>(3)</b>) will be resized to the new screen size.  The next <b><a href="../man3/notcurses_render.3.html">notcurses_render</a>(3)</b> call will function as ex‐
       pected across the new screen geometry.

   <b>The</b> <b>hardware</b> <b>cursor</b>
       Most terminals provide a cursor, a visual indicator of where output will next be placed.  There is usual‐
       ly (but not always) some degree of control over what  glyph  forms  this  cursor,  and  whether  it  e.g.
       blinks.

       By default, Notcurses disables this cursor in rendered mode.  It can be turned back on with <b>notcurses_en‐</b>
       <b>able_cursor</b>, which has immediate effect (there is no need to call <b><a href="../man3/notcurses_render.3.html">notcurses_render</a>(3)</b>).  If already visi‐
       ble,  this  function updates the location.  Each time the physical screen is updated, Notcurses will dis‐
       able the cursor, write the update, move the cursor back to this location, and  finally  make  the  cursor
       visible.   <b>notcurses_cursor_yx</b>  retrieves  the  location of the cursor, whether visible or not.  <b>notcurs‐</b>
       <b>es_disable_cursor</b> hides the cursor.

       You generally shouldn't need to touch the terminal cursor.  It's only really relevant  with  echoed  user
       input,  and you don't want echoed user input in rendered mode (instead, read the input, and write it to a
       plane yourself).  A subprocess can be streamed to a plane with an <b>ncsubproc</b>, etc.

       If the <b>NCOPTION_PRESERVE_CURSOR</b> flag is provided, the cursor's location will be  determined  at  startup,
       and the standard plane's virtual cursor will be placed to match it (instead of in the upper-left corner).
       Combined  with  <b>NCOPTION_NO_ALTERNATE_SCREEN</b> and a scrolling standard plane, this allows rendered mode to
       be used as a normal scrolling shell application.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>NULL</b> is returned on failure.  Otherwise, the return value points at a valid <b>struct</b> <b>notcurses</b>,  which  can
       be used until it is provided to <b><a href="../man3/notcurses_stop.3.html">notcurses_stop</a>(3)</b>.

       <b>notcurses_cursor_disable</b> returns -1 if the cursor is already invisible.

       <b>notcurses_default_foreground</b> returns -1 if the default foreground color could not be detected.

       <b>notcurses_default_background</b> returns -1 if the default background color could not be detected.

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       The  <b>NOTCURSES_LOGLEVEL</b>  environment  variable,  if defined, ought be an integer between -1 and 7.  These
       values correspond to <b>NCLOGLEVEL_SILENT</b> through <b>NCLOGLEVEL_TRACE</b>,  and  override  the  <b>loglevel</b>  field  of
       <b>notcurses_options</b>.

       The <b>TERM</b> environment variable will be used by <b><a href="../man3ncurses/setupterm.3ncurses.html">setupterm</a>(3ncurses)</b> to select an appropriate terminfo data‐
       base.

</pre><h4><b>NOTES</b></h4><pre>
       Several command-line options and keybindings are recommended for Notcurses rendered-mode programs:

       • <b>-l[0-8]</b> ought be mapped to the various <b>NCLOGLEVEL</b> values.  Alternatively, map <b>-v</b> to <b>NCLOGLEVEL_WARNING</b>,
         and map <b>-vv</b> to <b>NCLOGLEVEL_INFO</b>.

       • <b>-k</b> ought be mapped to <b>NCOPTION_NO_ALTERNATE_SCREEN</b>.

       • Ctrl+L ought be mapped to <b><a href="../man3/notcurses_refresh.3.html">notcurses_refresh</a>(3)</b>.

</pre><h4><b>BUGS</b></h4><pre>
       The  introductory diagnostics are not currently emitted when the alternate screen is used.  They ought be
       printed to the regular screen before entering the alternate screen.  They  are  displayed  normally  when
       <b>NCOPTION_NO_ALTERNATE_SCREEN</b> is used.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/fwide.3.html">fwide</a>(3)</b>,  <b><a href="../man3/getenv.3.html">getenv</a>(3)</b>,  <b><a href="../man3/setlocale.3.html">setlocale</a>(3)</b>,  <b><a href="../man3/termios.3.html">termios</a>(3)</b>,  <b><a href="../man3/notcurses.3.html">notcurses</a>(3)</b>,  <b><a href="../man3/notcurses_input.3.html">notcurses_input</a>(3)</b>, <b><a href="../man3/notcurses_plane.3.html">notcurses_plane</a>(3)</b>,
       <b><a href="../man3/notcurses_refresh.3.html">notcurses_refresh</a>(3)</b>, <b><a href="../man3/notcurses_render.3.html">notcurses_render</a>(3)</b>, <b><a href="../man3/notcurses_stop.3.html">notcurses_stop</a>(3)</b>, <b><a href="../man3ncurses/setupterm.3ncurses.html">setupterm</a>(3ncurses)</b>, <b><a href="../man5/terminfo.5.html">terminfo</a>(5)</b>, <b><a href="../man7/signal.7.html">signal</a>(7)</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       nick black &lt;<a href="mailto:nickblack@linux.com">nickblack@linux.com</a>&gt;.

                                                     v3.0.7                                    <u><a href="../man3/notcurses_init.3.html">notcurses_init</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>