<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Many  C  Driver functions report errors by returning false or -1 and filling out a bson_error_t structure</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongoc-doc">libmongoc-doc_1.30.4-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>DESCRIPTION</b></h4><pre>
       Many  C  Driver functions report errors by returning <b>false</b> or -1 and filling out a <u>bson_error_t</u> structure
       with an error domain, error code, and message. Use <b>domain</b> to  determine  which  subsystem  generated  the
       error, and <b>code</b> for the specific error. <b>message</b> is a human-readable error description.

       <b>SEE</b> <b>ALSO:</b>
          <u>Handling</u> <u>Errors</u> <u>in</u> <u>libbson</u>.

┌─────────────────────────────────────┬──────────────────────────────────────────────┬────────────────────────────────────────────┐
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_CLIENT</b>                 │ <b>MONGOC_ERROR_CLIENT_TOO_BIG</b>                  │ You  tried to send a message               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_CLIENT_AUTHENTICATE</b>             │ Wrong    credentials,     or               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_CLIENT_NO_ACCEPTABLE_PEER</b>       │ You  tried an TLS connection               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_CLIENT_IN_EXHAUST</b>               │ You   began   iterating   an               │
│                                     │                                              │ <u>mongoc_client_t</u>.                           │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_CLIENT_SESSION_FAILURE</b>          │ Failure related to  creating               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_CLIENT_INVALID_ENCRYPTION_ARG</b>   │ Failure related to arguments               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_CLIENT_INVALID_ENCRYPTION_STATE</b> │ Failure  related  to  In-Use               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_CLIENT_INVALID_LOAD_BALANCER</b>    │ You  attempted to connect to               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_STREAM</b>                 │ <b>MONGOC_ERROR_STREAM_NAME_RESOLUTION</b>          │ DNS failure.                               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_STREAM_SOCKET</b>                   │ Timeout  communicating  with               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_STREAM_CONNECT</b>                  │ Failed to connect to server.               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_PROTOCOL</b>               │ <b>MONGOC_ERROR_PROTOCOL_INVALID_REPLY</b>          │ Corrupt     response    from               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_PROTOCOL_BAD_WIRE_VERSION</b>       │ The server  version  is  too               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_CURSOR</b>                 │ <b>MONGOC_ERROR_CURSOR_INVALID_CURSOR</b>           │ You passed bad arguments  to               │
│                                     │                                              │ <u>mongoc_collection_find_with_opts()</u>,        │
│                                     │                                              │ <u>mongoc_cursor_next()</u>  on   a               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_CHANGE_STREAM_NO_RESUME_TOKEN</b>   │ A  resume token was not returned in        │
│                                     │                                              │ <u>mongoc_change_stream_next()</u>                │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_QUERY</b>                  │ <b>MONGOC_ERROR_QUERY_FAILURE</b>                   │ <u>Error</u>  <u>API</u>  <u>Version</u> <u>1</u>: Server error        │
│                                     │                                              │ error message is in <b>message</b>.               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_SERVER</b>                 │ <b>MONGOC_ERROR_QUERY_FAILURE</b>                   │ <u>Error</u>  <u>API</u>  <u>Version</u> <u>2</u>: Server error        │
│                                     │                                              │ error message is in <b>message</b>.               │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_SASL</b>                   │ A SASL error code.                           │ <b>man</b>   <b>sasl_errors</b>  for  a  list  of        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_BSON</b>                   │ <b>MONGOC_ERROR_BSON_INVALID</b>                    │ You passed an invalid or  oversized        │
│                                     │                                              │ <u>mongoc_collection_create_index()</u>           │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_NAMESPACE</b>              │ <b>MONGOC_ERROR_NAMESPACE_INVALID</b>               │ You  tried  to  create a collection        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_COMMAND</b>                │ <b>MONGOC_ERROR_COMMAND_INVALID_ARG</b>             │ Many functions set this error  code        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_PROTOCOL_BAD_WIRE_VERSION</b>       │ You tried to use a  command  option        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_DUPLICATE_KEY</b>                   │ An  insert or update failed because        │
│                                     │                                              │ because of a duplicate <b>_id</b> or other        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_MAX_TIME_MS_EXPIRED</b>             │ The   operation   failed    because        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_SERVER_SELECTION_INVALID_ID</b>     │ The    <b>serverId</b>   option   for   an        │
│                                     │                                              │ session  (denoted  by the <b>sessionId</b>        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_COMMAND</b>                │ <u>Error</u> <u>code</u> <u>from</u> <u>server</u>.                      │ <u>Error</u> <u>API</u> <u>Version</u> <u>1</u>:  Server  error        │
│                                     │                                              │ message is in <b>message</b>.                     │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_SERVER</b>                 │ <u>Error</u> <u>code</u> <u>from</u> <u>server</u>.                      │ <u>Error</u> <u>API</u> <u>Version</u> <u>2</u>:  Server  error        │
│                                     │                                              │ message is in <b>message</b>.                     │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_COLLECTION</b>             │ <b>MONGOC_ERROR_COLLECTION_INSERT_FAILED</b>,       │ Invalid   or   empty    input    to        │
│                                     │ <b>MONGOC_ERROR_COLLECTION_UPDATE_FAILED</b>,       │ <u>mongoc_collection_insert_one()</u>,            │
│                                     │ <b>MONGOC_ERROR_COLLECTION_DELETE_FAILED</b>.       │ <u>mongoc_collection_insert_bulk()</u>,           │
│                                     │                                              │ <u>mongoc_collection_update_one()</u>,            │
│                                     │                                              │ <u>mongoc_collection_update_many()</u>,           │
│                                     │                                              │ <u>mongoc_collection_replace_one()</u>,           │
│                                     │                                              │ <u>mongoc_collection_delete_one()</u>,  or        │
│                                     │                                              │ <u>mongoc_collection_delete_many()</u>.           │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_COLLECTION</b>             │ <u>Error</u> <u>code</u> <u>from</u> <u>server</u>.                      │ <u>Error</u> <u>API</u> <u>Version</u> <u>1</u>:  Server  error        │
│                                     │                                              │ <u>mongoc_collection_insert_one()</u>,            │
│                                     │                                              │ <u>mongoc_collection_insert_bulk()</u>,           │
│                                     │                                              │ <u>mongoc_collection_update_one()</u>,            │
│                                     │                                              │ <u>mongoc_collection_update_many()</u>,           │
│                                     │                                              │ <u>mongoc_collection_replace_one()</u>,           │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_SERVER</b>                 │ <u>Error</u> <u>code</u> <u>from</u> <u>server</u>.                      │ <u>Error</u>  <u>API</u>  <u>Version</u> <u>2</u>: Server error        │
│                                     │                                              │ <u>mongoc_collection_insert_one()</u>,            │
│                                     │                                              │ <u>mongoc_collection_insert_bulk()</u>,           │
│                                     │                                              │ <u>mongoc_collection_update_one()</u>,            │
│                                     │                                              │ <u>mongoc_collection_update_many()</u>,           │
│                                     │                                              │ <u>mongoc_collection_replace_one()</u>,           │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_GRIDFS</b>                 │ <b>MONGOC_ERROR_GRIDFS_CHUNK_MISSING</b>            │ The  GridFS  file  is   missing   a        │
│                                     │                                              │ document in its <b>chunks</b> collection.         │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_GRIDFS_CORRUPT</b>                  │ A  data  inconsistency was detected        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_GRIDFS_INVALID_FILENAME</b>         │ You  passed  a  NULL  filename   to        │
│                                     │                                              │ <u>mongoc_gridfs_remove_by_filename()</u>.        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_GRIDFS_PROTOCOL_ERROR</b>           │ You                          called        │
│                                     │                                              │ <u>mongoc_gridfs_file_set_id()</u>   after        │
│                                     │                                              │ <u>mongoc_gridfs_file_save()</u>, or tried        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_GRIDFS_BUCKET_FILE_NOT_FOUND</b>    │ A GridFS file is missing from <b>files</b>        │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_GRIDFS_BUCKET_STREAM</b>            │ An   error  occurred  on  a  stream        │
│                                     │                                              │ <u>mongoc_gridfs_bucket_upload_from_stream()</u>. │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_SCRAM</b>                  │ <b>MONGOC_ERROR_SCRAM_PROTOCOL_ERROR</b>            │ Failure  in  SCRAM-SHA-1  or SCRAM-SHA-256 │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_SERVER_SELECTION</b>       │ <b>MONGOC_ERROR_SERVER_SELECTION_FAILURE</b>        │ No  replica  set  member  or   mongos   is │
│                                     │                                              │ available,   or  none  matches  your  <u>read</u> │
│                                     │                                              │ <u>preference</u>, or  you  supplied  an  invalid │
│                                     │                                              │ <u>mongoc_read_prefs_t</u>.                       │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_WRITE_CONCERN</b>          │ <u>Error</u> <u>code</u> <u>from</u> <u>server</u>.                      │ There was a <u>write</u> <u>concern</u> error or <u>timeout</u> │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_TRANSACTION</b>            │ <b>MONGOC_ERROR_TRANSACTION_INVALID</b>             │ You  attempted to start a transaction when │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_CLIENT_SIDE_ENCRYPTION</b> │ Error code produced by libmongocrypt.        │ An   error   occurred   in   the   library │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_AZURE</b>                  │ <b>MONGOC_ERROR_KMS_SERVER_HTTP</b>                 │ An Azure HTTP service  responded  with  an │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_KMS_SERVER_BAD_JSON</b>             │ An  Azure  service  responded with invalid │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│ <b>MONGOC_ERROR_GCP</b>                    │ <b>MONGOC_ERROR_KMS_SERVER_HTTP</b>                 │ A GCP HTTP service responded with an error │
├─────────────────────────────────────┼──────────────────────────────────────────────┼────────────────────────────────────────────┤
│                                     │ <b>MONGOC_ERROR_KMS_SERVER_BAD_JSON</b>             │ A GCP service responded with invalid  JSON │
└─────────────────────────────────────┴──────────────────────────────────────────────┴────────────────────────────────────────────┘

</pre><h4><b>ERROR</b> <b>LABELS</b></h4><pre>
       In  some  cases  your  application  must  make  decisions  based on what category of error the driver has
       returned, but these categories do not correspond perfectly to an error domain or  code.  In  such  cases,
       error <u>labels</u> provide a reliable way to determine how your application should respond to an error.

       Any  C Driver function that has a <u>bson_t</u> out-parameter named <b>reply</b> may include error labels to the reply,
       in the form of a BSON field named "errorLabels" containing an array of strings:

          { "errorLabels": [ "TransientTransactionError" ] }

       Use   <u>mongoc_error_has_label()</u>   to   test   if   a   reply    contains    a    specific    label.    See
       <u>mongoc_client_session_start_transaction()</u>  for  example code that demonstrates the use of error labels in
       application logic.

       The following error labels are currently defined. Future versions of MongoDB may introduce new labels.

   <b>TransientTransactionError</b>
       Within a multi-document transaction, certain errors can leave the transaction in an  unknown  or  aborted
       state. These include write conflicts, primary stepdowns, and network errors. In response, the application
       should abort the transaction and try the same sequence of operations again in a new transaction.

   <b>UnknownTransactionCommitResult</b>
       When  <u>mongoc_client_session_commit_transaction()</u>  encounters a network error or certain server errors, it
       is not known whether the transaction was committed. Applications should attempt to commit the transaction
       again   until:   the   commit   succeeds,   the   commit   fails    with    an    error    <u>not</u>    labeled
       "UnknownTransactionCommitResult", or the application chooses to give up.

</pre><h4><b>SETTING</b> <b>THE</b> <b>ERROR</b> <b>API</b> <b>VERSION</b></h4><pre>
       The  driver's error reporting began with a design flaw: when the error <u>domain</u> is <b>MONGOC_ERROR_COLLECTION</b>,
       <b>MONGOC_ERROR_QUERY</b>, or <b>MONGOC_ERROR_COMMAND</b>, the error <u>code</u>  might  originate  from  the  server  or  the
       driver.  An  application cannot always know where an error originated, and therefore cannot tell what the
       code means.

       For example, if <u>mongoc_collection_update_one()</u> sets the error's domain to <b>MONGOC_ERROR_COLLECTION</b> and its
       code  to  24,  the  application  cannot  know   whether   24   is   the   generic   driver   error   code
       <b>MONGOC_ERROR_COLLECTION_UPDATE_FAILED</b> or the specific server error code "LockTimeout".

       To  fix  this  flaw  while  preserving  backward  compatibility,  the  C Driver 1.4 introduces "Error API
       Versions". Version 1, the default Error API Version, maintains the flawed behavior. Version 2 adds a  new
       error  domain, <b>MONGOC_ERROR_SERVER</b>. In Version 2, error codes originating on the server always have error
       domain <b>MONGOC_ERROR_SERVER</b> or <b>MONGOC_ERROR_WRITE_CONCERN</b>. When the driver uses Version 2 the  application
       can  always  determine  the origin and meaning of error codes. New applications should use Version 2, and
       existing applications should be updated to use Version 2 as well.
      ┌───────────────────────────────────────────────┬────────────────────────────┬────────────────────────────┐
      │ Error Source                                  │ API Version 1              │ API Version 2              │
      ├───────────────────────────────────────────────┼────────────────────────────┼────────────────────────────┤
      │ <u>mongoc_cursor_error()</u>                         │ <b>MONGOC_ERROR_QUERY</b>         │ <b>MONGOC_ERROR_SERVER</b>        │
      ├───────────────────────────────────────────────┼────────────────────────────┼────────────────────────────┤
      │ <u>mongoc_client_command_with_opts()</u>,            │ <b>MONGOC_ERROR_QUERY</b>         │ <b>MONGOC_ERROR_SERVER</b>        │
      │ <u>mongoc_database_command_with_opts()</u>,          │                            │                            │
      │ and other command functions                   │                            │                            │
      ├───────────────────────────────────────────────┼────────────────────────────┼────────────────────────────┤
      │ <u>mongoc_collection_count_with_opts()</u>           │ <b>MONGOC_ERROR_QUERY</b>         │ <b>MONGOC_ERROR_SERVER</b>        │
      │ <u>mongoc_client_get_database_names_with_opts()</u>, │                            │                            │
      │ and other command helper functions            │                            │                            │
      ├───────────────────────────────────────────────┼────────────────────────────┼────────────────────────────┤
      │ <u>mongoc_collection_insert_one()</u>                │ <b>MONGOC_ERROR_COMMAND</b>       │ <b>MONGOC_ERROR_SERVER</b>        │
      │ <u>mongoc_collection_insert_bulk()</u>               │                            │                            │
      │ <u>mongoc_collection_update_one()</u>                │                            │                            │
      │ <u>mongoc_collection_update_many()</u>               │                            │                            │
      │ <u>mongoc_collection_replace_one()</u>               │                            │                            │
      │ <u>mongoc_collection_delete_one()</u>                │                            │                            │
      │ <u>mongoc_collection_delete_many()</u>               │                            │                            │
      ├───────────────────────────────────────────────┼────────────────────────────┼────────────────────────────┤
      │ <u>mongoc_bulk_operation_execute()</u>               │ <b>MONGOC_ERROR_COMMAND</b>       │ <b>MONGOC_ERROR_SERVER</b>        │
      ├───────────────────────────────────────────────┼────────────────────────────┼────────────────────────────┤
      │ Write-concern timeout                         │ <b>MONGOC_ERROR_WRITE_CONCERN</b> │ <b>MONGOC_ERROR_WRITE_CONCERN</b> │
      └───────────────────────────────────────────────┴────────────────────────────┴────────────────────────────┘

       The Error API Versions are defined with <b>MONGOC_ERROR_API_VERSION_LEGACY</b>  and  <b>MONGOC_ERROR_API_VERSION_2</b>.
       Set the version with <u>mongoc_client_set_error_api()</u> or <u>mongoc_client_pool_set_error_api()</u>.

       <b>SEE</b> <b>ALSO:</b>
          <u>MongoDB</u> <u>Server</u> <u>Error</u> <u>Codes</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       MongoDB, Inc

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2009-present, MongoDB, Inc.

1.30.4                                            Jun 08, 2025                                  <u><a href="../man3/MONGOC_ERRORS.3.html">MONGOC_ERRORS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>