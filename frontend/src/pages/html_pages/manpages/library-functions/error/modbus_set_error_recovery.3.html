<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>modbus_set_error_recovery - set the error recovery mode</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libmodbus-dev">libmodbus-dev_3.1.6-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       modbus_set_error_recovery - set the error recovery mode

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>int</b> <b>modbus_set_error_recovery(modbus_t</b> <b>*</b><u>ctx</u><b>,</b> <b>modbus_error_recovery_mode</b> <u>error_recovery</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>modbus_set_error_recovery()</b> function shall set the error recovery mode to apply when the connection
       fails or the byte received is not expected. The argument <u>error_recovery</u> may be bitwise-or’ed with zero or
       more of the following constants.

       By default there is no error recovery (MODBUS_ERROR_RECOVERY_NONE) so the application is responsible for
       controlling the error values returned by libmodbus functions and for handling them if necessary.

       When MODBUS_ERROR_RECOVERY_LINK is set, the library will attempt an reconnection after a delay defined by
       response timeout of the libmodbus context. This mode will try an infinite close/connect loop until
       success on send call and will just try one time to re-establish the connection on select/read calls (if
       the connection was down, the values to read are certainly not available any more after reconnection,
       except for slave/server). This mode will also run flush requests after a delay based on the current
       response timeout in some situations (eg. timeout of select call). The reconnection attempt can hang for
       several seconds if the network to the remote target unit is down.

       When MODBUS_ERROR_RECOVERY_PROTOCOL is set, a sleep and flush sequence will be used to clean up the
       ongoing communication, this can occurs when the message length is invalid, the TID is wrong or the
       received function code is not the expected one. The response timeout delay will be used to sleep.

       The modes are mask values and so they are complementary.

       It’s not recommended to enable error recovery for slave/server.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The function shall return 0 if successful. Otherwise it shall return -1 and set errno to one of the
       values defined below.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EINVAL</b>
           The value of the argument <u>error_recovery</u> is not positive.

</pre><h4><b>EXAMPLE</b></h4><pre>
           modbus_set_error_recovery(ctx,
                                     MODBUS_ERROR_RECOVERY_LINK |
                                     MODBUS_ERROR_RECOVERY_PROTOCOL);

</pre><h4><b>AUTHORS</b></h4><pre>
       The libmodbus documentation was written by Stéphane Raimbault &lt;<a href="mailto:stephane.raimbault@gmail.com">stephane.raimbault@gmail.com</a>&gt;

libmodbus v3.1.6                                   12/09/2019                            <u><a href="../man3/MODBUS_SET_ERROR_REC.3.html">MODBUS_SET_ERROR_REC</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>