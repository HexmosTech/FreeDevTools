<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>erl_error - Utilities for reporting errors.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       erl_error - Utilities for reporting errors.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  module  provides  functions for pretty-printing errors and exceptions. It is used by both the <u>shell</u>
       and by <u>proc_lib</u> to print exceptions.

       It is possible for the module raising an error to provide additional information by calling <u>error/3</u>  with
       extra error information. More details about this mechanism is described in EEP-54.

</pre><h4><b>DATA</b> <b>TYPES</b></h4><pre>
       <b>format_options()</b> =
           #{column =&gt; column(),
             stack_trim_fun =&gt; stack_trim_fun(),
             format_fun =&gt; format_fun()}

              A map with formatting options.

       <b>stack_trim_fun()</b> =
           fun((module(), atom(), arity()) -&gt; boolean())

              A  fun  used to trim the end of the stacktrace. It is called with module, function, and arity from
              an entry from the stacktrace. The fun is to return <u>true</u> if the entry should be trimmed, and  <u>false</u>
              otherwise. The default value is:

              fun(_, _, _) -&gt; false end

       <b>format_fun()</b> = fun((term(), column()) -&gt; iolist())

              A  fun  used to format function arguments for BIF and function calls. By default the following fun
              will be used:

              fun(Term, I) -&gt; io_lib:print(Term, I, 80, 30) end

       <b>column()</b> = integer() &gt;= 1

              Start column number. Default is 1.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>format_exception(Class,</b> <b>Reason,</b> <b>StackTrace)</b> <b>-&gt;</b> <b>unicode:chardata()</b>

       <b>format_exception(Class,</b> <b>Reason,</b> <b>StackTrace,</b> <b>Options)</b> <b>-&gt;</b>
                           unicode:chardata()

              Types:

                 Class = error | exit | throw
                 Reason = term()
                 StackTrace = erlang:stacktrace()
                 Options = format_options()

              Format the error reason and stack back-trace caught using <u>try</u> ... <u>catch</u> in the same style  as  the
              shell formats them.

              Example:

              try
                  do_something()
              catch
                  C:R:Stk -&gt;
                      Message = erl_error:format_exception(C, R, Stk),
                      io:format(LogFile, "~ts\n", [Message])
              end

              If  <u>error_info</u>  is  provided  with  the  exception,  <u>format_exception</u> will use that information to
              provide additional information about the exception.

              Example:

              try
                erlang:raise(badarg,[],[{error_info,#{}}])
              catch
                  C:R:Stk -&gt;
                      Message = erl_error:format_exception(C, R, Stk),
                      io:format(LogFile, "~ts\n", [Message])
              end

              See <u>erlang:error/3</u> for details on how to raise an exception with <u>error_info</u> included.

</pre><h4><b>CALLBACK</b> <b>FUNCTIONS</b></h4><pre>
       The following functions are to be exported from an Error Info handler.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>Module:format_error(Reason,</b> <b>StackTrace)</b> <b>-&gt;</b> <b>ErrorDescription</b>

              Types:

                 Reason = term()
                 StackTrace = erlang:stacktrace()
                 ArgumentPosition = pos_integer()
                 ErrorDescription =
                  #{ ArgumentPosition =&gt; unicode:chardata(),
                  general =&gt; unicode:chardata(),
                  reason =&gt; unicode:chardata() }

              This callback is called when  <u>format_exception/4</u> or similar functionality wants to  provide  extra
              information  about  an  error.  The <u>Module</u>:<u>Function</u> called is the one specificed by the <u>error_info</u>
              map.

              The function should return a map with additional information about what have caused the exception.
              The possible keys of the map are:

                <u>ArgumentPosition</u> <u>=</u> <u>pos_integer()</u>:
                  The position of the argument that caused the error starting at 1.

                <u>general</u>:
                  An error that is not associated with any argument caused the error.

                <u>reason</u>:
                  If the <u>Reason</u> should be printed differently than the default way.

              If the text returned includes new-lines, <u>format_exception/4</u> will indent the text correctly.

              Example:

              -<a href="../manmy_error_module/module.my_error_module.html">module</a>(my_error_module).
              -export([atom_to_string/1, format_error/2]).

              atom_to_string(Arg) when is_atom(Arg) -&gt;
                atom_to_list(Arg);
              atom_to_string(Arg) -&gt;
                erlang:error(badarg,[Arg],
                             [{error_info,#{ module =&gt; ?MODULE,
                                             cause =&gt; #{ 1 =&gt; "should be an atom" }}}]).

              format_error(Reason, [{_M,_F,_As,Info}|_]) -&gt;
                ErrorInfo = proplists:get_value(error_info, Info, #{}),
                ErrorMap = maps:get(cause, ErrorInfo),
                ErrorMap#{ general =&gt; "optional general information",
                           reason =&gt; io_lib:format("~p: ~p",[?MODULE, Reason]) }.

              1&gt; <a href="../manmy_error_module/c.my_error_module.html">c</a>(my_error_module).
              {ok,my_error_module}
              2&gt; my_error_module:<a href="../man1/atom_to_string.1.html">atom_to_string</a>(1).
              ** exception error: my_error_module: badarg
                   in function  my_error_module:atom_to_string/1
                      called as my_error_module:<a href="../man1/atom_to_string.1.html">atom_to_string</a>(1)
                      *** argument 1: should be an atom
                      *** optional general information

Ericsson AB                                        stdlib 3.17                                   <u><a href="../man3erl/erl_error.3erl.html">erl_error</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>