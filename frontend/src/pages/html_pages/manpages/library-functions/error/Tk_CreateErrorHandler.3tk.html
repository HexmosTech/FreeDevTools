<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tk_CreateErrorHandler, Tk_DeleteErrorHandler - handle X protocol errors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tk9.0-doc">tk9.0-doc_9.0.1-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tk_CreateErrorHandler, Tk_DeleteErrorHandler - handle X protocol errors

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       Tk_ErrorHandler
       <b>Tk_CreateErrorHandler</b>(<u>display,</u> <u>error,</u> <u>request,</u> <u>minor,</u> <u>proc,</u> <u>clientData</u>)

       <b>Tk_DeleteErrorHandler</b>(<u>handler</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Display <u>*display</u> (in)                    Display whose errors are to be handled.

       int <u>error</u> (in)                           Match only error events with this value in the <u>error_code</u> field.
                                                If -1, then match any <u>error_code</u> value.

       int <u>request</u> (in)                         Match  only  error  events  with  this value in the <u>request_code</u>
                                                field.  If -1, then match any <u>request_code</u> value.

       int <u>minor</u> (in)                           Match only error events with this value in the <u>minor_code</u> field.
                                                If -1, then match any <u>minor_code</u> value.

       Tk_ErrorProc <u>*proc</u> (in)                  Procedure to invoke whenever an  error  event  is  received  for
                                                <u>display</u>  and  matches  <u>error</u>,  <u>request</u>,  and  <u>minor</u>.  NULL means
                                                ignore any matching errors.

       void <u>*clientData</u> (in)                    Arbitrary one-word value to pass to <u>proc</u>.

       Tk_ErrorHandler <u>handler</u> (in)             Token for error handler to delete (return value from a  previous
                                                call to <b>Tk_CreateErrorHandler</b>).
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tk_CreateErrorHandler</b>  arranges  for a particular procedure (<u>proc</u>) to be called whenever certain protocol
       errors occur on a particular display (<u>display</u>).  Protocol errors  occur  when  the  X  protocol  is  used
       incorrectly,  such  as  attempting  to  map a window that does not exist.  See the Xlib documentation for
       <b>XSetErrorHandler</b> for more information on the kinds of errors that can occur.  For <u>proc</u> to be  invoked  to
       handle a particular error, five things must occur:

       [1]    The error must pertain to <u>display</u>.

       [2]    Either  the  <u>error</u> argument to <b>Tk_CreateErrorHandler</b> must have been -1, or the <u>error</u> argument must
              match the <u>error_code</u> field from the error event.

       [3]    Either the <u>request</u> argument to <b>Tk_CreateErrorHandler</b> must have been -1, or  the  <u>request</u>  argument
              must match the <u>request_code</u> field from the error event.

       [4]    Either  the  <u>minor</u> argument to <b>Tk_CreateErrorHandler</b> must have been -1, or the <u>minor</u> argument must
              match the <u>minor_code</u> field from the error event.

       [5]    The protocol request to which the error pertains must have been made when the handler  was  active
              (see below for more information).

       <u>Proc</u> should have arguments and result that match the following type:
              typedef int <b>Tk_ErrorProc</b>(
                      void *<u>clientData</u>,
                      XErrorEvent *<u>errEventPtr</u>);
       The  <u>clientData</u>  parameter  to  <u>proc</u> is a copy of the <u>clientData</u> argument given to <b>Tcl_CreateErrorHandler</b>
       when the callback was created.  Typically, <u>clientData</u> points to a data structure containing  application-
       specific  information  that  is  needed  to deal with the error.  <u>ErrEventPtr</u> is a pointer to the X error
       event.  The procedure <u>proc</u> should return an integer value.  If it returns 0 it means  that  <u>proc</u>  handled
       the error completely and there is no need to take any other action for the error.  If it returns non-zero
       it means <u>proc</u> was unable to handle the error.

       If  a  value  of  NULL is specified for <u>proc</u>, all matching errors will be ignored:  this will produce the
       same result as if a procedure had been specified that always returns 0.

       If more than more than one handler matches a particular error,  then  they  are  invoked  in  turn.   The
       handlers  will  be  invoked  in reverse order of creation:  most recently declared handler first.  If any
       handler returns 0, then subsequent (older) handlers will not be invoked.  If no handler returns  0,  then
       Tk  invokes X's default error handler, which prints an error message and aborts the program.  If you wish
       to have a default handler that deals with errors that no other handler can deal  with,  then  declare  it
       first.

       The X documentation states that “the error handler should not call any functions (directly or indirectly)
       on  the  display  that  will  generate  protocol  requests  or  that  will  look for input events.”  This
       restriction applies to handlers declared by <b>Tk_CreateErrorHandler</b>; disobey it at your own risk.

       <b>Tk_DeleteErrorHandler</b> may be called to delete a previously-created error handler.  The  <u>handler</u>  argument
       identifies the error handler, and should be a value returned by a previous call to <b>Tk_CreateEventHandler</b>.

       A  particular error handler applies to errors resulting from protocol requests generated between the call
       to <b>Tk_CreateErrorHandler</b> and the call to <b>Tk_DeleteErrorHandler</b>.  However, the actual callback to <u>proc</u> may
       not occur until after the <b>Tk_DeleteErrorHandler</b> call, due to buffering in the client and server.   If  an
       error event pertains to a protocol request made just before calling <b>Tk_DeleteErrorHandler</b>, then the error
       event  may not have been processed before the <b>Tk_DeleteErrorHandler</b> call.  When this situation arises, Tk
       will save information about the handler and invoke the handler's <u>proc</u> later when the error event  finally
       arrives.   If  an  application  wishes  to delete an error handler and know for certain that all relevant
       errors have been processed, it should first call <b>Tk_DeleteErrorHandler</b> and then call  <b>XSync</b>;   this  will
       flush  out any buffered requests and errors, but will result in a performance penalty because it requires
       communication to and from the X server.  After the <b>XSync</b> call Tk is guaranteed  not  to  call  any  error
       handlers deleted before the <b>XSync</b> call.

       For  the  Tk error handling mechanism to work properly, it is essential that application code never calls
       <b>XSetErrorHandler</b> directly; applications should use only <b>Tk_CreateErrorHandler</b>.

</pre><h4><b>KEYWORDS</b></h4><pre>
       callback, error, event, handler

Tk                                                                                    <u><a href="../man3tk/Tk_CreateErrorHandler.3tk.html">Tk_CreateErrorHandler</a></u>(3tk)
</pre>
 </div>
</div></section>
</div>
</body>
</html>