<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mlx5dv_mkey_check - Check a MKEY for errors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libibverbs-dev">libibverbs-dev_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mlx5dv_mkey_check - Check a MKEY for errors

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;infiniband/mlx5dv.h&gt;

              int mlx5dv_mkey_check(struct mlx5dv_mkey *mkey,
                            struct mlx5dv_mkey_err *err_info);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Checks <u>mkey</u> for errors and provides the result in <u>err_info</u> on success.

       This  should  be  called after using a MKEY configured with signature validation in a transfer operation.
       While the transfer operation itself may be  completed  successfully  (i.e. no  transport  related  errors
       occurred),  there still may be errors related to the integrity of the data.  The first of these errors is
       reported to the MKEY and kept there until application software queries it by calling this API.

       The type of error indicates which part of the signature was bad (guard, reftag or apptag).  Also provided
       is the actual calculated value based on the transferred  data,  and  the  expected  value  based  on  the
       signature fields.  Last part provided is the offset in the transfer that caused the error.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>mkey</u>   The MKEY to check for errors.

       <u>err_info</u>
              The result of the MKEY check, information about the errors detected, if any.

                     struct mlx5dv_mkey_err {
                         enum mlx5dv_mkey_err_type err_type;
                         union {
                             struct mlx5dv_sig_err sig;
                         } err;
                     };

              <u>err_type</u>
                     What  kind of error happened.  If several errors exist in one block verified by the device,
                     only  the  first  of  them  is  reported,  according  to  the  order  specified  in  T10DIF
                     specification, which is: <b>MLX5DV_MKEY_SIG_BLOCK_BAD_GUARD</b>, <b>MLX5DV_MKEY_SIG_BLOCK_BAD_APPTAG</b>,
                     <b>MLX5DV_MKEY_SIG_BLOCK_BAD_REFTAG</b>.

                     <b>MLX5DV_MKEY_NO_ERR</b>
                            No error is detected for the MKEY.

                     <b>MLX5DV_MKEY_SIG_BLOCK_BAD_GUARD</b>
                            A    signature    error    was    detected    in   CRC/CHECKSUM   for   T10-DIF   or
                            CRC32/CRC32C/CRC64_XP10 (depends on  the  configured  signature  type).   Additional
                            information about the error is provided in <b>struct</b> <b>mlx5dv_sig_err</b> of <u>err</u>.

                     <b>MLX5DV_MKEY_SIG_BLOCK_BAD_REFTAG</b>
                            A  signature  error was detected in the reference tag.  This kind of signature error
                            is relevant for T10-DIF only.  Additional information about the error is provided in
                            <b>struct</b> <b>mlx5dv_sig_err</b> of <u>err</u>.

                     <b>MLX5DV_MKEY_SIG_BLOCK_BAD_APPTAG</b>
                            A signature error was detected in the application tag.  This kind of signature error
                            is relevant for T10-DIF only.  Additional information about the error is provided in
                            <b>struct</b> <b>mlx5dv_sig_err</b> of <u>err</u>.

              <u>err</u>    Information about the detected error if <u>err_type</u> is not <b>MLX5DV_MKEY_NO_ERR</b>.  Otherwise, its
                     value is not defined.

   <b>Signature</b> <b>error</b>
              struct mlx5dv_sig_err {
                  uint64_t actual_value;
                  uint64_t expected_value;
                  uint64_t offset;
              };

       <u>actual_value</u>
              The actual value that was calculated from the transferred data.

       <u>expected_value</u>
              The expected value based on what appears in the signature respected field.

       <u>offset</u> The offset within the transfer where the error happened.  In block signature, this  is  guaranteed
              to be a block boundary offset.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       0 on success or the value of errno on failure (which indicates the failure reason).

</pre><h4><b>NOTES</b></h4><pre>
       A DEVX context should be opened by using <b><a href="../man3/mlx5dv_open_device.3.html">mlx5dv_open_device</a></b>(3).

       Checking  the MKEY for errors should be done after the application knows the data transfer that was using
       the MKEY has finished.  Application should wait for the respected completion (if this was a  local  MKEY)
       or wait for a received message from a peer (if this was a remote MKEY).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/mlx5dv_wr_mkey_configure.3.html">mlx5dv_wr_mkey_configure</a></b>(3),            <b><a href="../man3/mlx5dv_wr_set_mkey_sig_block.3.html">mlx5dv_wr_set_mkey_sig_block</a></b>(3),           <b><a href="../man3/mlx5dv_create_mkey.3.html">mlx5dv_create_mkey</a></b>(3),
       <b><a href="../man3/mlx5dv_destroy_mkey.3.html">mlx5dv_destroy_mkey</a></b>(3)

</pre><h4><b>AUTHORS</b></h4><pre>
       Oren Duer <a href="mailto:oren@nvidia.com">oren@nvidia.com</a>

       Sergey Gorenko <a href="mailto:sergeygo@nvidia.com">sergeygo@nvidia.com</a>

                                                                                            <u><a href="../man3/mlx5dv_mkey_check.3.html">mlx5dv_mkey_check</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>