<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>votequorum_initialize - Create a new connection to the VoteQuorum service</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvotequorum-dev">libvotequorum-dev_3.1.9-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       votequorum_initialize - Create a new connection to the VoteQuorum service

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;corosync/votequorum.h&gt;</b>

       <b>int</b> <b>votequorum_initialize(votequorum_handle_t</b> <b>*</b><u>handle</u><b>,</b> <b>votequorum_callbacks_t</b> <b>*</b><u>callbacks</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>votequorum_initialize</b>  function is used to initialize a connection to the vote-based quorum database
       API.

       Each application may have several connections to the votequorum API.  Each application  uses  the  <u>handle</u>
       argument  to  uniquely identify the connection.  The <u>handle</u> argument is then used in other function calls
       to identify the connection to be used for communication with the votequorum service.

       Every time the voting configuration is about to change (eg a  node  joins  or  leave  the  cluster),  the
       callback is called.  The callback function is described by the following type definitions:

       typedef void (*votequorum_nodelist_notification_fn_t) (
            votequorum_handle_t handle,
            uint64_t context,
            uint32_t node_list_entries,
            uint32_t node_list[]
            );

       Current  ring_id (one get in votequorum_quorum_notification_fn) must be passed to <b>votequorum_qdevice_poll</b>
       to make qdevice voting valid.

       Every time the quorum state changes (eg a node joins or leave the cluster), the callback is called.   The
       callback function is described by the following type definitions:

       typedef void (*votequorum_quorum_notification_fn_t) (
            votequorum_handle_t handle,
            uint64_t context,
            uint32_t quorate,
            uint32_t node_list_entries,
            votequorum_node_t node_list[]
            );

       The  difference between votequorum_nodelist_notification_t and votequorum_quorum_notification_t is subtle
       but important.  The 'nodelist' callback is sent at the start of a cluster state transition  and  contains
       the new ring_id and only the list of nodes that are included in the sync state - ie only active nodes. No
       quorum  information  is  included  this  callback because it is not available at that time.  The 'quorum'
       callback is sent after the cluster state transition has completed and does  contain  quorum  information.
       In addition, the nodelist contains a list of all nodes known to votequorum (whether up or down) and their
       state as well as information about the quorum device attached (if any). Quorum callbacks will not be sent
       for qdevice up and down events unless they affect quorum.

       Every  time the expected votes are changed, the callback is called.  The expected votes callback function
       is described by the following type definitions:

       typedef void (*votequorum_expectedvotes_notification_fn_t) (
               votequorum_handle_t handle,
               uint64_t context,
               uint32_t expected_votes);

       The <u>callbacks</u> argument is of the type:

       typedef struct {
            votequorum_quorum_notification_fn_t votequorum_quorum_notify_fn;
            votequorum_expectedvotes_notification_fn_t votequorum_expectedvotes_notify_fn;
            votequorum_nodelist_notification_fn_t votequorum_nodelist_notify_fn;
       } votequorum_callbacks_t;

       When a configuration change occurs, the callback is called from the <b>votequorum_dispatch()</b> function.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This call returns the CS_OK value if successful, otherwise an error is returned.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>CS_ERR_TRY_AGAIN</b> Resource temporarily unavailable

       <b>CS_ERR_INVALID_PARAM</b> Invalid argument

       <b>CS_ERR_ACCESS</b> Permission denied

       <b>CS_ERR_LIBRARY</b> The connection failed

       <b>CS_ERR_INTERRUPT</b> System call interrupted by a signal

       <b>CS_ERR_NOT_SUPPORTED</b> The requested protocol/functionality not supported

       <b>CS_ERR_MESSAGE_ERROR</b> Incorrect auth message received

       <b>CS_ERR_NO_MEMORY</b> Not enough memory to complete the requested task

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/votequorum_overview.3.html">votequorum_overview</a></b>(3),    <b><a href="../man3/votequorum_finalize.3.html">votequorum_finalize</a></b>(3),    <b><a href="../man3/votequorum_getinfo.3.html">votequorum_getinfo</a></b>(3),    <b><a href="../man3/votequorum_trackstart.3.html">votequorum_trackstart</a></b>(3),
       <b><a href="../man3/votequorum_trackstop.3.html">votequorum_trackstop</a></b>(3),    <b><a href="../man3/votequorum_fd_get.3.html">votequorum_fd_get</a></b>(3),    <b><a href="../man3/votequorum_dispatch.3.html">votequorum_dispatch</a></b>(3),   <b><a href="../man3/votequorum_context_set.3.html">votequorum_context_set</a></b>(3),
       <b><a href="../man3/votequorum_context_get.3.html">votequorum_context_get</a></b>(3), <b><a href="../man3/votequorum_setexpected.3.html">votequorum_setexpected</a></b>(3), <b><a href="../man3/votequorum_setvotes.3.html">votequorum_setvotes</a></b>(3)

corosync Man Page                                  2025-06-25                           <u><a href="../man3/VOTEQUORUM_INITIALIZE.3.html">VOTEQUORUM_INITIALIZE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>