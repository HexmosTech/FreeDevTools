<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSL_dup, SSL_new, SSL_up_ref - create an SSL structure for a connection</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SSL_dup, SSL_new, SSL_up_ref - create an SSL structure for a connection

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/ssl.h&gt;

        SSL *SSL_dup(SSL *s);
        SSL *SSL_new(SSL_CTX *ctx);
        int SSL_up_ref(SSL *s);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SSL_new()</b> creates a new <b>SSL</b> structure which is needed to hold the data for a TLS/SSL connection. The new
       structure inherits the settings of the underlying context <b>ctx</b>: connection method, options, verification
       settings, timeout settings. An <b>SSL</b> structure is reference counted. Creating an <b>SSL</b> structure for the
       first time increments the reference count. Freeing it (using SSL_free) decrements it. When the reference
       count drops to zero, any memory or resources allocated to the <b>SSL</b> structure are freed.

       <b>SSL_up_ref()</b> increments the reference count for an existing <b>SSL</b> structure.

       The function <b>SSL_dup()</b> creates and returns a new <b>SSL</b> structure from the same <b>SSL_CTX</b> that was used to
       create <u>s</u>. It additionally duplicates a subset of the settings in <u>s</u> into the new <b>SSL</b> object.

       For <b>SSL_dup()</b> to work, the connection MUST be in its initial state and MUST NOT have yet started the SSL
       handshake.  For connections that are not in their initial state <b>SSL_dup()</b> just increments an internal
       reference count and returns the <u>same</u> handle.  It may be possible to use <b><a href="../man3/SSL_clear.3.html">SSL_clear</a></b>(3) to recycle an SSL
       handle that is not in its initial state for reuse, but this is best avoided.  Instead, save and restore
       the session, if desired, and construct a fresh handle for each connection.

       The subset of settings in <u>s</u> that are duplicated are:

       any session data if configured (including the session_id_context)
       any tmp_dh settings set via <b><a href="../man3/SSL_set_tmp_dh.3.html">SSL_set_tmp_dh</a></b>(3), <b><a href="../man3/SSL_set_tmp_dh_callback.3.html">SSL_set_tmp_dh_callback</a></b>(3), or <b><a href="../man3/SSL_set_dh_auto.3.html">SSL_set_dh_auto</a></b>(3)
       any configured certificates, private keys or certificate chains
       any configured signature algorithms, or client signature algorithms
       any DANE settings
       any Options set via <b><a href="../man3/SSL_set_options.3.html">SSL_set_options</a></b>(3)
       any Mode set via <b><a href="../man3/SSL_set_mode.3.html">SSL_set_mode</a></b>(3)
       any minimum or maximum protocol settings set via <b><a href="../man3/SSL_set_min_proto_version.3.html">SSL_set_min_proto_version</a></b>(3) or
       <b><a href="../man3/SSL_set_max_proto_version.3.html">SSL_set_max_proto_version</a></b>(3) (Note: Only from OpenSSL 1.1.1h and above)
       any verify mode, callback or depth set via <b><a href="../man3/SSL_set_verify.3.html">SSL_set_verify</a></b>(3) or <b><a href="../man3/SSL_set_verify_depth.3.html">SSL_set_verify_depth</a></b>(3) or any configured
       X509 verification parameters
       any msg callback or info callback set via <b><a href="../man3/SSL_set_msg_callback.3.html">SSL_set_msg_callback</a></b>(3) or <b><a href="../man3/SSL_set_info_callback.3.html">SSL_set_info_callback</a></b>(3)
       any default password callback set via <b><a href="../man3/SSL_set_default_passwd_cb.3.html">SSL_set_default_passwd_cb</a></b>(3)
       any session id generation callback set via <b><a href="../man3/SSL_set_generate_session_id.3.html">SSL_set_generate_session_id</a></b>(3)
       any configured Cipher List
       initial accept (server) or connect (client) state
       the max cert list value set via <b><a href="../man3/SSL_set_max_cert_list.3.html">SSL_set_max_cert_list</a></b>(3)
       the read_ahead value set via <b><a href="../man3/SSL_set_read_ahead.3.html">SSL_set_read_ahead</a></b>(3)
       application specific data set via <b><a href="../man3/SSL_set_ex_data.3.html">SSL_set_ex_data</a></b>(3)
       any CA list or client CA list set via <b><a href="../man3/SSL_set0_CA_list.3.html">SSL_set0_CA_list</a></b>(3), <b>SSL_set0_client_CA_list()</b> or similar functions
       any security level settings or callbacks
       any configured serverinfo data
       any configured PSK identity hint
       any configured custom extensions
       any client certificate types configured via SSL_set1_client_certificate_types

       <b>SSL_dup()</b> is not supported on QUIC SSL objects and returns NULL if called on such an object.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The following return values can occur:

       NULL
           The creation of a new SSL structure failed. Check the error stack to find out the reason.

       Pointer to an SSL structure
           The return value points to an allocated SSL structure.

           <b>SSL_up_ref()</b> returns 1 for success and 0 for failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/SSL_free.3.html">SSL_free</a></b>(3), <b><a href="../man3/SSL_clear.3.html">SSL_clear</a></b>(3), <b><a href="../man3/SSL_CTX_set_options.3.html">SSL_CTX_set_options</a></b>(3), <b><a href="../man3/SSL_get_SSL_CTX.3.html">SSL_get_SSL_CTX</a></b>(3), <b><a href="../man7/ssl.7.html">ssl</a></b>(7)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2000-2023 The OpenSSL Project Authors. All Rights Reserved.

       Licensed  under  the  Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain  a  copy  in  the  file  LICENSE  in  the  source  distribution  or  at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                                      <u><a href="../man3SSL/SSL_NEW.3SSL.html">SSL_NEW</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>