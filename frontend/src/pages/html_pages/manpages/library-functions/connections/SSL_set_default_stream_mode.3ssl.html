<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSL_set_default_stream_mode, SSL_DEFAULT_STREAM_MODE_NONE, SSL_DEFAULT_STREAM_MODE_AUTO_BIDI,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SSL_set_default_stream_mode, SSL_DEFAULT_STREAM_MODE_NONE, SSL_DEFAULT_STREAM_MODE_AUTO_BIDI,
       SSL_DEFAULT_STREAM_MODE_AUTO_UNI - manage the default stream for a QUIC connection

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/ssl.h&gt;

        #define SSL_DEFAULT_STREAM_MODE_NONE
        #define SSL_DEFAULT_STREAM_MODE_AUTO_BIDI
        #define SSL_DEFAULT_STREAM_MODE_AUTO_UNI

        int SSL_set_default_stream_mode(SSL *conn, uint32_t mode);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A QUIC connection SSL object may have a default stream attached to it. A default stream is a QUIC stream
       to which calls to <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3) and <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3) made on a QUIC connection SSL object are redirected.
       Default stream handling allows legacy applications to use QUIC similarly to a traditional TLS connection.

       When not disabled, a default stream is automatically created on an outgoing connection once <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3)
       or <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3) is called.

       A QUIC stream must be explicitly designated as client-initiated or server-initiated up front. This
       broadly corresponds to whether an application protocol involves the client transmitting first, or the
       server transmitting first. As such, if <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3) is called first (before any call to <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3))
       after establishing a connection, OpenSSL will wait for the server to open the first server-initiated
       stream, and then bind this as the default stream. Conversely, if <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3) is called before any call
       to <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3), OpenSSL assumes the client wishes to transmit first, creates a client-initiated stream,
       and binds this as the default stream.

       By default, the default stream created is bidirectional. If a unidirectional stream is desired, or if the
       application wishes to disable default stream functionality, <b>SSL_set_default_stream_mode()</b> (discussed
       below) can be used to accomplish this.

       When a QUIC connection SSL object has no default stream currently associated with it, for example because
       default stream functionality was disabled, calls to functions which require a stream on the QUIC
       connection SSL object (for example, <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3) and <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3)) will fail.

       It is recommended that new applications and applications which rely on multiple streams forego use of the
       default stream functionality, which is intended for legacy applications.

       <b>SSL_set_default_stream_mode()</b> can be used to configure or disable default stream handling. It can only be
       called on a QUIC connection SSL object prior to any default stream being created. If used, it is
       recommended to call it immediately after calling <b><a href="../man3/SSL_new.3.html">SSL_new</a></b>(3), prior to initiating a connection. The
       argument <u>mode</u> may be one of the following options:

       SSL_DEFAULT_STREAM_MODE_AUTO_BIDI
           This  is  the  default  setting.  If  <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3)  is  called  prior  to  any call to <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3), a
           bidirectional client-initiated stream is created and bound as the default stream. If  <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3)  is
           called prior to any call to <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3), OpenSSL waits for an incoming stream from the peer (causing
           <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3)  to  block  if  the  connection  is  in blocking mode), and then binds that stream as the
           default stream. Note that this incoming stream may be either bidirectional or  unidirectional;  thus,
           this  setting  does  not  guarantee the presence of a bidirectional stream when <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3) is called
           first. To determine the type of a stream after a call to <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3), use <b><a href="../man3/SSL_get_stream_type.3.html">SSL_get_stream_type</a></b>(3).

       SSL_DEFAULT_STREAM_MODE_AUTO_UNI
           In this mode, if <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3) is called prior to any call to <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3),  a  unidirectional  client-
           initiated  stream is created and bound as the default stream. The behaviour is otherwise identical to
           that of <b>SSL_DEFAULT_STREAM_MODE_AUTO_BIDI</b>. The behaviour when <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3) is called prior to any call
           to <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3) is unchanged.

       SSL_DEFAULT_STREAM_MODE_NONE
           Default stream creation is inhibited. This is the recommended mode  of  operation.   <b><a href="../man3/SSL_read.3.html">SSL_read</a></b>(3)  and
           <b><a href="../man3/SSL_write.3.html">SSL_write</a></b>(3) calls cannot be made on the QUIC connection SSL object directly. You must obtain streams
           using <b><a href="../man3/SSL_new_stream.3.html">SSL_new_stream</a></b>(3) or <b><a href="../man3/SSL_accept_stream.3.html">SSL_accept_stream</a></b>(3) in order to communicate with the peer.

       A  default stream will not be automatically created on a QUIC connection SSL object if the default stream
       mode is set to <b>SSL_DEFAULT_STREAM_MODE_NONE</b>.

       <b><a href="../man3/SSL_set_incoming_stream_policy.3.html">SSL_set_incoming_stream_policy</a></b>(3) interacts significantly with the default stream functionality.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>SSL_set_default_stream_mode()</b> returns 1 on success and 0 on failure.

       <b>SSL_set_default_stream_mode()</b> fails if it is called after a default stream has already been established.

       These functions fail if called on a QUIC stream SSL object or on a non-QUIC SSL object.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/SSL_new_stream.3.html">SSL_new_stream</a></b>(3), <b><a href="../man3/SSL_accept_stream.3.html">SSL_accept_stream</a></b>(3), <b><a href="../man3/SSL_free.3.html">SSL_free</a></b>(3), <b><a href="../man3/SSL_set_incoming_stream_policy.3.html">SSL_set_incoming_stream_policy</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       These functions were added in OpenSSL 3.2.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2002-2023 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file  except  in  compliance
       with  the  License.   You  can  obtain  a  copy  in  the  file  LICENSE  in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                  <u><a href="../man3SSL/SSL_SET_DEFAULT_STREAM_MODE.3SSL.html">SSL_SET_DEFAULT_STREAM_MODE</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>