<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBB::ServerSocket - Server socket accepting Internet connection requests</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbobcat-dev">libbobcat-dev_6.07.01-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FBB::ServerSocket - Server socket accepting Internet connection requests

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;bobcat/serversocket&gt;</b>
       Linking option: <u>-lbobcat</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       An  <b>FBB::ServerSocket</b>  may be constructed to listen for connection requests from the Internet or from the
       local host. Connection requests may be  accepted  in  either  <u>blocking</u>  or  <u>non-blocking</u>  modes.  When  a
       connection  is  accepted  a  socket  is  returned  which  may  be  used to read information from or write
       information to the client that requested the connection. The socket that is  made  available  is  a  <u>file</u>
       <u>descriptor</u>  which  may be used to initialize a <b>std::istream</b> and/or <b>std::ostream</b>. The <b>std::istream</b> is used
       to read information from the client process; the <b>std::ostream</b> is used to send information to  the  client
       process.    Since   a   socket  may  be  considered  a  <u>file</u>  <u>descriptor</u>  the  available  <b>FBB::IFdStream</b>,
       <b>FBB::IFdStreamBuf</b>, <b>FBB::OFdStream</b>, and <b>FBB::OFdStreamBuf</b> classes may be used profitably here.  Note  that
       having  available  a socket does not mean that this defines the communication protocol. It is (still) the
       responsibility of the programmer to comply with an  existing  protocol  or  to  implement  a  tailor-made
       protocol.  The  latter  situation implies that the sequence of input- and output operations is defined by
       the programmer.

       A Unix Domain server socket can be defined using <u>FBB::LocalServerSocket</u>.

</pre><h4><b>NAMESPACE</b></h4><pre>
       <b>FBB</b>
       All constructors, members, operators and manipulators, mentioned in this man-page,  are  defined  in  the
       namespace <b>FBB</b>.

</pre><h4><b>INHERITS</b> <b>FROM</b></h4><pre>
       <b>FBB::SocketBase</b>

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       o      <b>ServerSocket(size_t</b>  <b>port)</b>:
              This constructor initializes an <b>FBB::ServerSocket</b> object, which will listen for connections at the
              specified port.  The construction of the socket does not mean that the <b>FBB::ServerSocket</b> object is
              actually listening for connections. To start listening, the member <b>listen()</b> should be used.

       Copy and move constructors (and assignment operators) are not available.

</pre><h4><b>MEMBER</b> <b>FUNCTIONS</b></h4><pre>
       All  members  of  <b>FBB::SocketBase</b>  (and  thus  of  <b>FBB::InetAddress</b>)  are available, as <b>FBB::ServerSocket</b>
       inherits from <b>FBB::SocketBase</b>.

       o      <b>void</b> <b>listen(size_t</b> <b>backlog</b> <b>=</b> <b>5,</b> <b>bool</b> <b>blocking</b> <b>=</b> <b>true)</b>:
              The <b>listen()</b> member defines the way the <b>FBB::ServerSocket</b> will listen  for  clients  requesting  a
              connection.  It can be used only once with a <b>FBB::ServerSocket</b>. An <b>FBB::Exception</b> object is thrown
              if  listening fails, if the constructor could not create a socket, or if the <b>SocketBase</b> base class
              could not properly be constructed.

              The <b>listen()</b> member’s <u>backlog</u> parameter defines the size of the <b>FBB::ServerSocket</b>’s internal queue
              in which connection requests may be stored waiting for their turn to  be  serviced.  When  <u>backlog</u>
              requests are waiting and another request arrives, then that request is lost.

              The  member’s  second  parameter,  <u>blocking</u>,  is  used  to  control the blocking mode. By default,
              blocking is used, and <u>listen()</u> will wait  until  a  connection  is  established.  This  is  ok  in
              situations  where  clients connect infrquently and for relatively short time intervals. Otherwise,
              in more complex programs, an <b>FBB::Selector</b> object can be used to sense input on the server  socket
              and/or on various client sockets.

       o      <b>SocketBase</b> <b>accept()</b>:
              The  <b>accept()</b>  member  returns  an  <b>FBB::SocketBase</b> object containing information about the client
              whose connection request was accepted. The <b>FBB::SocketBase</b> object’s socket value may  be  used  to
              initialize  streams  that can be used to communicate with the client. In more complex programs the
              <b>FBB::SocketBase</b> could be passed to a class derived from <b>FBB::Fork</b>, handling the communication with
              the child as a separate (child) process.

</pre><h4><b>EXAMPLE</b></h4><pre>
       See also the <b><a href="../man3bobcat/clientsocket.3bobcat.html">clientsocket</a></b>(3bobcat) example.

           #include &lt;iostream&gt;
           #include &lt;string&gt;
           #include &lt;bobcat/serversocket&gt;
           #include &lt;bobcat/ifdstream&gt;
           #include &lt;bobcat/ofdstream&gt;

           using namespace std;
           using namespace FBB;

           int main(int argc, char **argv)
           try
           {
               if (argc == 1)
               {
                   cerr &lt;&lt; "Provide server port number\n";
                   return 1;
               }

               size_t portnr = stoul(argv[1]);

               ServerSocket server(portnr);

               cerr &lt;&lt; "server listens on port " &lt;&lt; argv[1] &lt;&lt; endl;

               cerr &lt;&lt; "serversocket returns:\n" &lt;&lt;
                   "address = " &lt;&lt; server.dottedDecimalAddress() &lt;&lt; "\n"
                   "port    = " &lt;&lt; server.port() &lt;&lt; endl;

               int fd = server.socket();       // open the socket’s descriptor

               cout &lt;&lt; "File descriptor of the socket is " &lt;&lt; fd &lt;&lt; "\n"
                   "The server terminates when it receives a "
                                               "single `q’ on a line\n"
                   "A connection is terminated when no input "
                                               "is received anymore.\n"
                   "Then another connection is possible" &lt;&lt; endl;

               server.listen();                // listen in blocking mode

               while (true)
               {
                   SocketBase fdb = server.accept();
                   int fd = fdb.socket();

                   cerr &lt;&lt; "Client FD = " &lt;&lt; fd &lt;&lt; ", " &lt;&lt; endl &lt;&lt;
                           "address = " &lt;&lt; fdb.dottedDecimalAddress() &lt;&lt; ", " &lt;&lt;
                           endl &lt;&lt;
                           "communication through port " &lt;&lt; fdb.port() &lt;&lt; endl;

                   IFdStream in(fd);           // stream to read from client
                   OFdStream out(fd);          // stream to write to client
                   string cmd;

                   while (getline(in, cmd))
                   {
                       cout &lt;&lt; "Got: " &lt;&lt; cmd &lt;&lt; endl;
                       out &lt;&lt; "Got: " &lt;&lt; cmd &lt;&lt; "\r" &lt;&lt; endl;

                       if (cmd[0] == ’q’)
                           return 0;
                   }
                   cout &lt;&lt; "Ready for another connection\n";
               }
           }
           catch (Exception const &amp;err)
           {
               cerr &lt;&lt;
                   err.what() &lt;&lt; endl &lt;&lt;
                   "Server socket on port " &lt;&lt; argv[1] &lt;&lt;
                   " can’t be opened" &lt;&lt; endl;
               return -1;
           }

</pre><h4><b>FILES</b></h4><pre>
       <u>bobcat/serversocket</u> - defines the class interface

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/bobcat.7.html">bobcat</a></b>(7),      <b><a href="../man3bobcat/clientsocket.3bobcat.html">clientsocket</a></b>(3bobcat),      <b><a href="../man3bobcat/fork.3bobcat.html">fork</a></b>(3bobcat),      <b><a href="../man3bobcat/ifdstream.3bobcat.html">ifdstream</a></b>(3bobcat),      <b><a href="../man3bobcat/ifdbuf.3bobcat.html">ifdbuf</a></b>(3bobcat),
       <b><a href="../man3bobcat/inetaddress.3bobcat.html">inetaddress</a></b>(3bobcat),   <b><a href="../man3bobcat/localserversocket.3bobcat.html">localserversocket</a></b>(3bobcat),  <b><a href="../man3bobcat/ofdstream.3bobcat.html">ofdstream</a></b>(3bobcat),  <b><a href="../man3bobcat/ofdstream.3bobcat.html">ofdstream</a></b>(3bobcat),  <b><a href="../man2/select.2.html">select</a></b>(2),
       <b><a href="../man3bobcat/selector.3bobcat.html">selector</a></b>(3bobcat), <b><a href="../man3bobcat/socketbase.3bobcat.html">socketbase</a></b>(3bobcat)

</pre><h4><b>BUGS</b></h4><pre>
       None Reported.

</pre><h4><b>BOBCAT</b> <b>PROJECT</b> <b>FILES</b></h4><pre>
       o      <u>https://fbb-git.gitlab.io/bobcat/</u>: gitlab project page;

       Debian Bobcat project files:

       o      <u>libbobcat6</u>: debian package containing the shared library, changelog and copyright note;

       o      <u>libbobcat-dev</u>: debian package containing the static library, headers, manual pages, and  developer
              info;

</pre><h4><b>BOBCAT</b></h4><pre>
       Bobcat is an acronym of `Brokken’s Own Base Classes And Templates’.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This is free software, distributed under the terms of the GNU General Public License (GPL).

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank B. Brokken (<b><a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a></b>).

libbobcat-dev_6.07.01                               2005-2025                         <u>FBB::<a href="../man3bobcat/ServerSocket.3bobcat.html">ServerSocket</a></u>(3bobcat)
</pre>
 </div>
</div></section>
</div>
</body>
</html>