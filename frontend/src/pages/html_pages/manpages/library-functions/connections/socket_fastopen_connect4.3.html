<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>socket_fastopen_connect4 - make a TCP connection and send some data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libowfat-dev">libowfat-dev_0.32-5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       socket_fastopen_connect4 - make a TCP connection and send some data

</pre><h4><b>SYNTAX</b></h4><pre>
       <b>#include</b> <b>&lt;libowfat/socket.h&gt;</b>

       ssize_t <b>socket_fastopen_connect4</b>(int <u>s</u>,const char <u>ip</u>[4],uint16 <u>port</u>,
                                        const char* <u>buf</u>,size_t <u>len</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       socket_fastopen_connect4  attempts  to make a connection from TCP socket <u>s</u> to TCP port <u>port</u> on IP address
       <u>ip</u>.  If that succeeds, it attempts to send <u>len</u> bytes from <u>buf</u>.

       The difference to calling socket_connect4 followed by write is that, on  platforms  supporting  TCP  Fast
       Open,  socket_fastopen_connect4 will send the first data packet in the third packet of the TCP handshake,
       saving one useless ACK packet in network traffic.

       This is only useful for protocols where the client sends the first bytes.

       socket_connect4 may return

       •      &gt;=0, to indicate that the connection succeeded and this many bytes were sent.

       •      -1, setting errno to error_inprogress or error_wouldblock, to indicate that  the  socket  is  non-
              blocking

       •      -1,  setting  errno  to  something  else,  to  indicate  that  the  connection  failed (and failed
              immediately, if the socket is non-blocking).

       When a background connection succeeds or fails, <u>s</u> becomes writable; you can use socket_connected  to  see
       whether  the  connection  succeeded.  If the connection failed, socket_connected returns 0, setting errno
       appropriately.

       Once a TCP socket is connected, you can use the read and write system calls to transmit data.

       You can call socket_connect4 without  calling  socket_bind4.   This  has  the  effect  as  first  calling
       socket_bind4 with IP address 0.0.0.0 and port 0.

</pre><h4><b>EXAMPLE</b></h4><pre>
         #include &lt;libowfat/socket.h&gt;

         int <u>s</u>;
         char <u>ip</u>[4];
         uint16 <u>p</u>;

         <u>s</u> = socket_tcp4();
         socket_bind4(s,ip,p);
         socket_fastopen_connect4(s,ip,p,"hello",5);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/socket_connect4.3.html">socket_connect4</a>(3), <a href="../man3/socket_fastopen_connect6.3.html">socket_fastopen_connect6</a>(3), <a href="../man3/socket_fastopen.3.html">socket_fastopen</a>(3)

                                                                                     <u><a href="../man3/socket_fastopen_connect4.3.html">socket_fastopen_connect4</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>