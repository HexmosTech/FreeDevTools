<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmdaConnect - establish a connection between a daemon PMDA and PMCD</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp-pmda3-dev">libpcp-pmda3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmdaConnect</b> - establish a connection between a daemon PMDA and PMCD

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>
       <b>#include</b> <b>&lt;pcp/pmda.h&gt;</b>

       <b>void</b> <b>pmdaConnect(pmdaInterface</b> <b>*</b><u>dispatch</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp_pmda</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmdaConnect</b>  initializes an IPC channel between a <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3) and the <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) process on the local host.  The
       type of the connection is dependent on the <u>e_io</u> field of the <b>pmdaExt</b> structure:

       <b>pmdaPipe</b>       Use <b>stdin</b>/<b>stdout</b> to communicate; assumes this is a pipe created by <b>pmcd</b> before the <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3)
                      was launched.

       <b>pmdaInet</b>       Assume <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) will establish a connection to an IPv4 internet domain socket set up by the
                      <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3).  The name or number of the port must be specified in  the  <u>e_sockname</u>  or  <u>e_port</u>
                      fields of the <b>pmdaExt</b> structure, respectively.

       <b>pmdaIPv6</b>       Assume <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) will establish a connection to an IPv6 internet domain socket set up by the
                      <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3).   The  name  or  number of the port must be specified in the <u>e_sockname</u> or <u>e_port</u>
                      fields of the <b>pmdaExt</b> structure, respectively.

       <b>pmdaUnix</b>       Assume <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) will establish a connection to a unix domain socket set up by the  <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3).
                      The port number must be specified in the <u>e_port</u> field of the <b>pmdaExt</b> <b>structure.</b>

       <b>pmdaUnknown</b>    The initial value of <u>e_io</u> which defaults to using <b>stdin</b>/<b>stdout</b>.

       The   relevant   <b>pmdaExt</b>   fields   are   initialized  by  <b><a href="../man3/pmdaDaemon.3.html">pmdaDaemon</a></b>(3)  and  set  by  <b><a href="../man3/pmdaGetOpt.3.html">pmdaGetOpt</a></b>(3)  or
       <b><a href="../man3/pmdaGetOptions.3.html">pmdaGetOptions</a></b>(3) so most PMDAs should not need to access or modify them.

       Traditionally most PMDAs have called <b>pmdaConnect</b> after  calls  to  <b><a href="../man3/pmdaDaemon.3.html">pmdaDaemon</a></b>(3),  <b><a href="../man3/pmdaGetOptions.3.html">pmdaGetOptions</a></b>(3)  (or
       <b><a href="../man3/pmdaGetOpt.3.html">pmdaGetOpt</a></b>(3))  and  <b><a href="../man3/pmdaInit.3.html">pmdaInit</a></b>(3).  If the PMDA requires significant processing at startup to identify the
       available metrics and/or instance domains before <b><a href="../man3/pmdaInit.3.html">pmdaInit</a></b>(3) can be called,  then  it  risks  timing  out
       during  the  handshake  protocol  that  starts as soon as <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) launches the PMDA and does not conclude
       until <b>pmdaConnect</b> is called.  In this case, it is advisable to move the  <b>pmdaConnect</b>  call,  so  that  it
       comes <u>after</u> the call to <b><a href="../man3/pmdaGetOptions.3.html">pmdaGetOptions</a></b>(3) (or <b><a href="../man3/pmdaGetOpt.3.html">pmdaGetOpt</a></b>(3)) and <u>before</u> the call to <b><a href="../man3/pmdaInit.3.html">pmdaInit</a></b>(3).

</pre><h4><b>CAVEAT</b></h4><pre>
       The PMDA must be using <b>PMDA_INTERFACE_2</b> or later, as specified in the call to <b><a href="../man3/pmdaDaemon.3.html">pmdaDaemon</a></b>(3).

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>pmdaConnect</b>  will log the type of connection made to <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) if the <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3) debugging option <b>libpmda</b> has
       been set in the global debugging specification, as described in <b><a href="../man3/pmSetDebug.3.html">pmSetDebug</a></b>(3).

       If an error occurs that is unrecoverable, <u>dispatch-&gt;status</u> is set to a value less than 0, otherwise it is
       zero or positive.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1), <b><a href="../man2/pipe.2.html">pipe</a></b>(2), <b><a href="../man2/socket.2.html">socket</a></b>(2),  <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3),  <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3),  <b><a href="../man3/pmdaDaemon.3.html">pmdaDaemon</a></b>(3),  <b><a href="../man3/pmdaGetOpt.3.html">pmdaGetOpt</a></b>(3),  <b><a href="../man3/pmdaGetOptions.3.html">pmdaGetOptions</a></b>(3)  and
       <b><a href="../man3/pmdaInit.3.html">pmdaInit</a></b>(3).

Performance Co-Pilot                                   PCP                                        <u><a href="../man3/PMDACONNECT.3.html">PMDACONNECT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>