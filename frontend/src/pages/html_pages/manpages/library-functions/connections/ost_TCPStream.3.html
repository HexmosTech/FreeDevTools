<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ost::TCPStream - TCP streams are used to represent TCP client connections to a server by TCP protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libcommoncpp2-doc">libcommoncpp2-doc_1.8.1-10_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ost::TCPStream - TCP streams are used to represent TCP client connections to a server by TCP protocol
       servers for accepting client connections.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;socket.h&gt;

       Inherits streambuf, <b>ost::Socket</b>, and iostream.

       Inherited by <b>ost::SSLStream</b>, <b>ost::TCPSession</b>, and <b>ost::URLStream</b>.

   <b>Public</b> <b>Member</b> <b>Functions</b>
       <b>TCPStream</b> (<b>Family</b> <b>family</b>=<b>IPV4</b>, bool throwflag=true, <b>timeout_t</b> to=0)
           The constructor required for building other classes or to start an unconnected <b>TCPStream</b> for connect.
       void <b>disconnect</b> (void)
           Disconnect the current session and prepare for a new one.
       int <b>getSegmentSize</b> (void)
           Get protocol segment size.
       <b>TCPStream</b> (<b>TCPSocket</b> &amp;server, bool throwflag=true, <b>timeout_t</b> <b>timeout</b>=0)
           Create a TCP stream by accepting a connection from a bound TCP socket acting as a server.
       <b>TCPStream</b> (<b>TCPV6Socket</b> &amp;server, bool throwflag=true, <b>timeout_t</b> <b>timeout</b>=0)
       void <b>connect</b> (<b>TCPSocket</b> &amp;server)
           Accept a connection from a TCP Server.
       void <b>connect</b> (<b>TCPV6Socket</b> &amp;server)
       <b>TCPStream</b> (const <b>IPV4Host</b> &amp;host, <b>tpport_t</b> port, unsigned mss=536, bool throwflag=true, <b>timeout_t</b>
           <b>timeout</b>=0)
           Create a TCP stream by connecting to a TCP socket (on a remote machine).
       <b>TCPStream</b> (const <b>IPV6Host</b> &amp;host, <b>tpport_t</b> port, unsigned mss=536, bool throwflag=true, <b>timeout_t</b>
           <b>timeout</b>=0)
       <b>TCPStream</b> (const char *name, <b>Family</b> <b>family</b>=<b>IPV4</b>, unsigned mss=536, bool throwflag=false, <b>timeout_t</b>
           timer=0)
           Construct a named TCP <b>Socket</b> connected to a remote machine.
       void <b>setTimeout</b> (<b>timeout_t</b> timer)
           Set the I/O operation timeout for socket I/O operations.
       <b>TCPStream</b> (const <b>TCPStream</b> &amp;source)
           A copy constructor creates a new stream buffer.
       virtual <b>~TCPStream</b> ()
           Flush and empty all buffers, and then remove the allocated buffers.
       int <b>sync</b> (void)
           Flushes the stream input and output buffers, writes pending output.
       size_t <b>printf</b> (const char *format,...)
           Print content into a socket.
       bool <b>isPending</b> (<b>Pending</b> pend, <b>timeout_t</b> <b>timeout</b>=<b>TIMEOUT_INF</b>)
           Get the status of pending stream data.
       ssize_t <b>peek</b> (void *buf, size_t len)
           Examine contents of next waiting packet.
       size_t <b>getBufferSize</b> (void) const
           Return the size of the current stream buffering used.

   <b>Protected</b> <b>Member</b> <b>Functions</b>
       void <b>allocate</b> (size_t size)
           Used to allocate the buffer space needed for iostream operations.
       void <b>endStream</b> (void)
           Used to terminate the buffer space and cleanup the socket connection.
       int <b>underflow</b> ()
           This streambuf method is used to load the input buffer through the established tcp socket connection.
       int <b>uflow</b> ()
           This streambuf method is used for doing unbuffered reads through the establish tcp socket connection
           when in interactive mode.
       int <b>overflow</b> (int ch)
           This streambuf method is used to write the output buffer through the established tcp connection.
       void <b>connect</b> (const <b>IPV4Host</b> &amp;host, <b>tpport_t</b> port, unsigned mss=536)
           Create a TCP stream by connecting to a TCP socket (on a remote machine).
       void <b>connect</b> (const <b>IPV6Host</b> &amp;host, <b>tpport_t</b> port, unsigned mss=536)
       void <b>connect</b> (const char *name, unsigned mss=536)
           Connect a TCP stream to a named destination host and port number, using getaddrinfo interface if
           available.
       std::iostream * <b>tcp</b> (void)
           Used in derived classes to refer to the current object via it's iostream.

   <b>Protected</b> <b>Attributes</b>
       <b>timeout_t</b> <b>timeout</b>
       size_t <b>bufsize</b>
       <b>Family</b> <b>family</b>
       char * <b>gbuf</b>
       char * <b>pbuf</b>

   <b>Friends</b>
       <b>TCPStream</b> &amp; <b>crlf</b> (<b>TCPStream</b> &amp;)
       <b>TCPStream</b> &amp; <b>lfcr</b> (<b>TCPStream</b> &amp;)

   <b>Additional</b> <b>Inherited</b> <b>Members</b>
</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       TCP streams are used to represent TCP client connections to a server by TCP protocol servers for
       accepting client connections.

       The TCP stream is a C++ 'stream' class, and can accept streaming of data to and from other C++ objects
       using the &lt;&lt; and &gt;&gt; operators.

       <b>TCPStream</b> itself can be formed either by connecting to a bound network address of a TCP server, or can be
       created when 'accepting' a network connection from a TCP server.

       <b>Author</b>
           David Sugar <a href="mailto:dyfet@ostel.com">dyfet@ostel.com</a>

       streamable TCP socket connection.

       <b>Examples</b>
           <b>tcp.cpp</b>, and <b>tcpstr1.cpp</b>.

</pre><h4><b>Constructor</b> <b>&amp;</b> <b>Destructor</b> <b>Documentation</b></h4><pre>
   <b>ost::TCPStream::TCPStream</b> <b>(Family</b> <b>family</b> <b>=</b> <b>IPV4,</b> <b>bool</b> <b>throwflag</b> <b>=</b> <b>true,</b> <b>timeout_t</b> <b>to</b> <b>=</b> <b>0)</b>
       The constructor required for building other classes or to start an unconnected <b>TCPStream</b> for connect.

   <b>ost::TCPStream::TCPStream</b> <b>(TCPSocket</b> <b>&amp;</b> <b>server,</b> <b>bool</b> <b>throwflag</b> <b>=</b> <b>true,</b> <b>timeout_t</b> <b>timeout</b> <b>=</b> <b>0)</b>
       Create a TCP stream by accepting a connection from a bound TCP socket acting as a server. This performs
       an 'accept' call.

       <b>Parameters</b>
           <u>server</u> socket listening
           <u>throwflag</u> flag to throw errors.
           <u>timeout</u> for all operations.

   <b>ost::TCPStream::TCPStream</b> <b>(TCPV6Socket</b> <b>&amp;</b> <b>server,</b> <b>bool</b> <b>throwflag</b> <b>=</b> <b>true,</b> <b>timeout_t</b> <b>timeout</b> <b>=</b> <b>0)</b>
   <b>ost::TCPStream::TCPStream</b> <b>(const</b> <b>IPV4Host</b> <b>&amp;</b> <b>host,</b> <b>tpport_t</b> <b>port,</b> <b>unsigned</b> <b>mss</b> <b>=</b> <b>536,</b> <b>bool</b> <b>throwflag</b> <b>=</b> <b>true,</b>
       <b>timeout_t</b> <b>timeout</b> <b>=</b> <b>0)</b>
       Create a TCP stream by connecting to a TCP socket (on a remote machine).

       <b>Parameters</b>
           <u>host</u> address of remote TCP server.
           <u>port</u> number to connect.
           <u>mss</u> maximum segment size of streaming buffers.
           <u>throwflag</u> flag to throw errors.
           <u>timeout</u> for all operations.

   <b>ost::TCPStream::TCPStream</b> <b>(const</b> <b>IPV6Host</b> <b>&amp;</b> <b>host,</b> <b>tpport_t</b> <b>port,</b> <b>unsigned</b> <b>mss</b> <b>=</b> <b>536,</b> <b>bool</b> <b>throwflag</b> <b>=</b> <b>true,</b>
       <b>timeout_t</b> <b>timeout</b> <b>=</b> <b>0)</b>
   <b>ost::TCPStream::TCPStream</b> <b>(const</b> <b>char</b> <b>*</b> <b>name,</b> <b>Family</b> <b>family</b> <b>=</b> <b>IPV4,</b> <b>unsigned</b> <b>mss</b> <b>=</b> <b>536,</b> <b>bool</b> <b>throwflag</b> <b>=</b>
       <b>false,</b> <b>timeout_t</b> <b>timer</b> <b>=</b> <b>0)</b>
       Construct a named TCP <b>Socket</b> connected to a remote machine.

       <b>Parameters</b>
           <u>name</u> of remote service.
           <u>family</u> of protocol.
           <u>mss</u> maximum segment size of streaming buffers.
           <u>throwflag</u> flag to throw errors.
           <u>timer</u> for timeout for all operations.

   <b>ost::TCPStream::TCPStream</b> <b>(const</b> <b>TCPStream</b> <b>&amp;</b> <b>source)</b>
       A copy constructor creates a new stream buffer.

       <b>Parameters</b>
           <u>source</u> reference of stream to copy from.

   <b>virtual</b> <b>ost::TCPStream::~TCPStream</b> <b>()</b> <b>[virtual]</b>
       Flush and empty all buffers, and then remove the allocated buffers.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>ost::TCPStream::allocate</b> <b>(size_t</b> <b>size)</b> <b>[protected]</b>
       Used to allocate the buffer space needed for iostream operations. This function is called by the
       constructor.

       <b>Parameters</b>
           <u>size</u> of stream buffers from constructor.

   <b>void</b> <b>ost::TCPStream::connect</b> <b>(const</b> <b>char</b> <b>*</b> <b>name,</b> <b>unsigned</b> <b>mss</b> <b>=</b> <b>536)</b> <b>[protected]</b>
       Connect a TCP stream to a named destination host and port number, using getaddrinfo interface if
       available.

       <b>Parameters</b>
           <u>name</u> of host and service to connect
           <u>mss</u> maximum segment size of stream buffer

   <b>void</b> <b>ost::TCPStream::connect</b> <b>(const</b> <b>IPV4Host</b> <b>&amp;</b> <b>host,</b> <b>tpport_t</b> <b>port,</b> <b>unsigned</b> <b>mss</b> <b>=</b> <b>536)</b> <b>[protected]</b>
       Create a TCP stream by connecting to a TCP socket (on a remote machine).

       <b>Parameters</b>
           <u>host</u> address of remote TCP server.
           <u>port</u> number to connect.
           <u>mss</u> maximum segment size of streaming buffers.

       <b>Examples</b>
           <b>tcp.cpp</b>.

   <b>void</b> <b>ost::TCPStream::connect</b> <b>(const</b> <b>IPV6Host</b> <b>&amp;</b> <b>host,</b> <b>tpport_t</b> <b>port,</b> <b>unsigned</b> <b>mss</b> <b>=</b> <b>536)</b> <b>[protected]</b>
   <b>void</b> <b>ost::TCPStream::connect</b> <b>(TCPSocket</b> <b>&amp;</b> <b>server)</b>
       Accept a connection from a TCP Server.

       <b>Parameters</b>
           <u>server</u> socket listening

   <b>void</b> <b>ost::TCPStream::connect</b> <b>(TCPV6Socket</b> <b>&amp;</b> <b>server)</b>
   <b>void</b> <b>ost::TCPStream::disconnect</b> <b>(void)</b>
       Disconnect the current session and prepare for a new one.

       <b>Examples</b>
           <b>tcp.cpp</b>, and <b>tcpstr1.cpp</b>.

   <b>void</b> <b>ost::TCPStream::endStream</b> <b>(void)</b> <b>[protected]</b>
       Used to terminate the buffer space and cleanup the socket connection. This fucntion is called by the
       destructor.

   <b>size_t</b> <b>ost::TCPStream::getBufferSize</b> <b>(void)</b> <b>const</b> <b>[inline]</b>
       Return the size of the current stream buffering used.

       <b>Returns</b>
           size of stream buffers.

   <b>int</b> <b>ost::TCPStream::getSegmentSize</b> <b>(void)</b>
       Get protocol segment size.

       <b>Examples</b>
           <b>tcp.cpp</b>.

   <b>bool</b> <b>ost::TCPStream::isPending</b> <b>(Pending</b> <b>pend,</b> <b>timeout_t</b> <b>timeout</b> <b>=</b> <b>TIMEOUT_INF)</b> <b>[virtual]</b>
       Get the status of pending stream data. This can be used to examine if input or output is waiting, or if
       an error or disconnect has occured on the stream. If a read buffer contains data then input is ready and
       if write buffer contains data it is first flushed and then checked.

       Reimplemented from <b>ost::Socket</b>.

       <b>Examples</b>
           <b>tcp.cpp</b>.

   <b>int</b> <b>ost::TCPStream::overflow</b> <b>(int</b> <b>ch)</b> <b>[protected]</b>
       This streambuf method is used to write the output buffer through the established tcp connection.

       <b>Parameters</b>
           <u>ch</u> char to push through.

       <b>Returns</b>
           char pushed through.

   <b>ssize_t</b> <b>ost::TCPStream::peek</b> <b>(void</b> <b>*</b> <b>buf,</b> <b>size_t</b> <b>len)</b> <b>[inline]</b>
       Examine contents of next waiting packet.

       <b>Parameters</b>
           <u>buf</u> pointer to packet buffer for contents.
           <u>len</u> of packet buffer.

       <b>Returns</b>
           number of bytes examined.

       References _IOLEN64.

   <b>size_t</b> <b>ost::TCPStream::printf</b> <b>(const</b> <b>char</b> <b>*</b> <b>format,</b>  <b>...)</b>
       Print content into a socket.

       <b>Returns</b>
           count of bytes sent.

       <b>Parameters</b>
           <u>format</u> string

   <b>void</b> <b>ost::TCPStream::setTimeout</b> <b>(timeout_t</b> <b>timer)</b> <b>[inline]</b>
       Set the I/O operation timeout for socket I/O operations.

       <b>Parameters</b>
           <u>timer</u> to change timeout.

   <b>int</b> <b>ost::TCPStream::sync</b> <b>(void)</b>
       Flushes the stream input and output buffers, writes pending output.

       <b>Returns</b>
           0 on success.

   <b>std::iostream*</b> <b>ost::TCPStream::tcp</b> <b>(void)</b> <b>[inline],</b>  <b>[protected]</b>
       Used in derived classes to refer to the current object via it's iostream. For example, to send a set of
       characters in a derived method, one might use *tcp() &lt;&lt; 'test'.

       <b>Returns</b>
           stream pointer of this object.

   <b>int</b> <b>ost::TCPStream::uflow</b> <b>()</b> <b>[protected]</b>
       This streambuf method is used for doing unbuffered reads through the establish tcp socket connection when
       in interactive mode. Also this method will handle proper use of buffers if not in interative mode.

       <b>Returns</b>
           char from tcp socket connection, EOF if not connected.

   <b>int</b> <b>ost::TCPStream::underflow</b> <b>()</b> <b>[protected]</b>
       This streambuf method is used to load the input buffer through the established tcp socket connection.

       <b>Returns</b>
           char from get buffer, EOF if not connected.

</pre><h4><b>Friends</b> <b>And</b> <b>Related</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>TCPStream&amp;</b> <b>crlf</b> <b>(TCPStream</b> <b>&amp;)</b> <b>[friend]</b>
   <b>TCPStream&amp;</b> <b>lfcr</b> <b>(TCPStream</b> <b>&amp;)</b> <b>[friend]</b>
</pre><h4><b>Member</b> <b>Data</b> <b>Documentation</b></h4><pre>
   <b>size_t</b> <b>ost::TCPStream::bufsize</b> <b>[protected]</b>
   <b>Family</b> <b>ost::TCPStream::family</b> <b>[protected]</b>
   <b>char*</b> <b>ost::TCPStream::gbuf</b> <b>[protected]</b>
   <b>char</b> <b>*</b> <b>ost::TCPStream::pbuf</b> <b>[protected]</b>
   <b>timeout_t</b> <b>ost::TCPStream::timeout</b> <b>[protected]</b>
</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for GNU CommonC++ from the source code.

GNU CommonC++                                    Sun Dec 27 2020                               <u>ost::<a href="../man3/TCPStream.3.html">TCPStream</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>