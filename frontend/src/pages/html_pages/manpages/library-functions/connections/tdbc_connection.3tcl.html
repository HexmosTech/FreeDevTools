<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tdbc::connection - TDBC connection object</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl8.6-tdbc">tcl8.6-tdbc_1.1.10-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tdbc::connection - TDBC connection object

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>tdbc</b> <b>1.0</b>
       package require <b>tdbc::</b><u>driver</u> <u>version</u>

       <b>tdbc::</b><u>driver</u><b>::connection</b> <b>create</b> <u>db</u> ?<u>-option</u> <u>value</u>...?

       <u>db</u> <b>configure</b> ?<u>-option</u> <u>value</u>...?
       <u>db</u> <b>close</b>
       <u>db</u> <b>foreignkeys</b> ?<u>-primary</u> <u>tableName</u>? ?<u>-foreign</u> <u>tableName</u>?
       <u>db</u> <b>prepare</b> <u>sql-code</u>
       <u>db</u> <b>preparecall</b> <u>call</u>
       <u>db</u> <b>primarykeys</b> <u>tableName</u>
       <u>db</u> <b>statements</b>
       <u>db</u> <b>resultsets</b>
       <u>db</u> <b>tables</b> ?<u>pattern</u>?
       <u>db</u> <b>columns</b> <u>table</u> ?<u>pattern</u>?
       <u>db</u> <b>begintransaction</b>
       <u>db</u> <b>commit</b>
       <u>db</u> <b>rollback</b>
       <u>db</u> <b>transaction</b> <u>script</u>
       <u>db</u> <b>allrows</b> ?<b>-as</b> <b>lists</b>|<b>dicts</b>? ?<b>-columnsvariable</b> <u>name</u>? ?<b>--</b>? <u>sql-code</u> ?<u>dictionary</u>?
       <u>db</u> <b>foreach</b> ?<b>-as</b> <b>lists</b>|<b>dicts</b>? ?<b>-columnsvariable</b> <u>name</u>? ?--? <u>varName</u> <u>sqlcode</u> ?<u>dictionary</u>? <u>script</u>
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Every database driver for TDBC (Tcl DataBase Connectivity) implements a <u>connection</u> object that represents
       a   connection   to   a   database.    By   convention,   this   object   is   created  by  the  command,
       <b>tdbc::</b><u>driver</u><b>::connection</b> <b>create</b>.  This command accepts the name of a Tcl command that will represent  the
       connection  and a possible set of options (see <b>CONFIGURATION</b> <b>OPTIONS</b>). It establishes a connection to the
       database and returns the name of the newly-created Tcl command.

       The <b>configure</b> object command on a database connection, if presented with no arguments, returns a list  of
       alternating  keywords and values representing the connection's current configuration. If presented with a
       single argument <u>-option</u>, it returns the configured value of the given option. Otherwise, it must be given
       an even number of arguments which are alternating options and values. The specified options  receive  the
       specified values, and nothing is returned.

       The <b>close</b> object command on a database connection closes the connection. All active statements and result
       sets  on  the  connection  are  closed. Any uncommitted transaction is rolled back. The object command is
       deleted.

       The <b>prepare</b> object command on a database connection prepares a SQL statement for execution. The  <u>sql-code</u>
       argument  must contain a single SQL statement to be executed. Bound variables may be included. The return
       value is a newly-created Tcl command that represents the statement. See <b>tdbc::statement</b> for more detailed
       discussion of the SQL accepted by the <b>prepare</b> object command and the interface accepted by a statement.

       On a database connection where  the  underlying  database  and  driver  support  stored  procedures,  the
       <b>preparecall</b> object command prepares a call to a stored procedure for execution.  The syntax of the stored
       procedure call is:

       ?<u>resultvar</u> =? <u>procname</u>(?<u>arg</u> ?, <u>arg</u>...?)

       The  return  value  is a newly-created Tcl command that represents the statement. See <b>tdbc::statement</b> for
       the interface accepted by a statement.

       The <b>statements</b> object command returns a list  of  statements  that  have  been  created  by  <b>prepare</b>  and
       <b>preparecall</b> statements against the given connection and have not yet been closed.

       The  <b>resultsets</b>  object  command  returns  a  list  of  result  sets that have been obtained by executing
       statements prepared using the given connection and not yet closed.

       The <b>tables</b> object command allows the program to query the connection for the names of tables  that  exist
       in  the  database.   The  optional  <u>pattern</u>  parameter  is a pattern to match the name of a table. It may
       contain the SQL wild-card characters '<b>%</b>' and and whose values are subdictionaries. See the  documentation
       for the individual database driver for the interpretation of the values.

       The <b>columns</b> object command allows the program to query the connection for the names of columns that exist
       in  a  given  table.   The  optional <b>pattern</b> parameter is a pattern to match the name of a column. It may
       contain  the  SQL  wild-card  characters  '<b>%</b>'  and  and  whose  values  are  dictionaries.  Each  of  the
       subdictionaries  will  contain at least the following keys and values (and may contain others whose usage
       is determined by a specific database driver).

       <b>type</b>   Contains the data type of the column, and will generally be chosen from the set,  <b>bigint</b>,  <b>binary</b>,
              <b>bit</b>, <b>char</b>, <b>date</b>, <b>decimal</b>, <b>double</b>, <b>float</b>, <b>integer</b>, <b>longvarbinary</b>, <b>longvarchar</b>, <b>numeric</b>, <b>real</b>, <b>time</b>,
              <b>timestamp</b>,  <b>smallint</b>,  <b>tinyint</b>,  <b>varbinary</b>,  and <b>varchar</b>. (If the column has a type that cannot be
              represented as one of the above, <b>type</b> will contain a driver-dependent description of the type.)

       <b>precision</b>
              Contains the precision of the column  in  bits,  decimal  digits,  or  the  width  in  characters,
              according to the type.

       <b>scale</b>  Contains  the  scale  of  the  column (the number of digits after the radix point), for types that
              support the concept.

       <b>nullable</b>
              Contains 1 if the column can contain NULL values, and 0 otherwise.

       The <b>primarykeys</b> object command allows the program to query the connection for the primary keys  belonging
       to  a  given table. The <u>tableName</u> parameter identifies the table being interrogated. The result is a list
       of dictionaries enumerating the keys (in a similar format to the list returned by <u>$connection</u> <b>allrows</b> <b>-as</b>
       <b>dicts</b>). The keys of the dictionary  may  include  at  least  the  following.  Values  that  are  NULL  or
       meaningless in a given database are omitted.

       <b>tableCatalog</b>
              Name of the catalog in which the table appears.

       <b>tableSchema</b>
              Name of the schema in which the table  appears.

       <b>tableName</b>
              Name of the table owning the primary key.

       <b>constraintCatalog</b>
              Name  of  the  catalog in which the primary key constraint appears. In some database systems, this
              may not be the same as the table's catalog.

       <b>constraintSchema</b>
              Name of the schema in which the primary key constraint appears.  In some  database  systems,  this
              may not be the same as the table's schema.

       <b>constraintName</b>
              Name of the primary key constraint,

       <b>columnName</b>
              Name of a column that is a member of the primary key.

       <b>ordinalPosition</b>
              Ordinal position of the column within the primary key.

       To these columns may be added additional ones that are specific to a particular database system.

       The  <b>foreignkeys</b>  object command allows the program to query the connection for foreign key relationships
       that apply to a particular table.  The relationships may be constrained to the  keys  that  appear  in  a
       particular table (<b>-foreign</b> <u>tableName</u>), the keys that refer to a particular table (<b>-primary</b> <u>tableName</u>), or
       both.   At  least  one of <b>-primary</b> and <b>-foreign</b> should be specified, although some drivers will enumerate
       all foreign keys in the current catalog if both options are omitted. The result of the <b>foreignkeys</b> object
       command is a list of dictionaries, with one list element per  key  (in  a  similar  format  to  the  list
       returned  by  <u>$connection</u>  <b>allrows</b>  <b>-as</b>  <b>dicts</b>).  The  keys  of  the  dictionary may include at least the
       following. Values that are NULL or meaningless in a given database are omitted.

       <b>foreignConstraintCatalog</b>
              Catalog in which the foreign key constraint appears.

       <b>foreignConstraintSchema</b>
              Schema in which the foreign key constraint appears.

       <b>foreignConstraintName</b>
              Name of the foreign key constraint.

       <b>primaryConstraintCatalog</b>
              Catalog holding the primary key constraint (or unique key constraint) on the column to  which  the
              foreign key refers.

       <b>primaryConstraintSchema</b>
              Schema  holding  the  primary key constraint (or unique key constraint) on the column to which the
              foreign key refers.

       <b>primaryConstraintName</b>
              Name of the primary key constraint (or unique key constraint) on the column to which  the  foreign
              key refers.

       <b>updateAction</b>
              Action  to  take  when an UPDATE statement invalidates the constraint.  The value will be <b>CASCADE</b>,
              <b>SET</b> <b>DEFAULT</b>, <b>SET</b> <b>NULL</b>, <b>RESTRICT</b>, or <b>NO</b> <b>ACTION</b>.

       <b>deleteAction</b>
              Action to take when a DELETE statement invalidates the constraint.  The value will be <b>CASCADE</b>, <b>SET</b>
              <b>DEFAULT</b>, <b>SET</b> <b>NULL</b>, <b>RESTRICT</b>, or <b>NO</b> <b>ACTION</b>.

       <b>primaryCatalog</b>
              Catalog name in which the primary table (the one to which the foreign key refers) appears.

       <b>primarySchema</b>
              Schema name in which the primary table (the one to which the foreign key refers) appears.

       <b>primaryTable</b>
              Table name of the primary table (the one to which the foreign key refers).

       <b>primaryColumn</b>
              Name of the column to which the foreign key refers.

       <b>foreignCatalog</b>
              Name of the catalog in which the table containing the foreign key appears.

       <b>foreignSchema</b>
              Name of the schema in which the table containing the foreign key appears.

       <b>foreignTable</b>
              Name of the table containing the foreign key.

       <b>foreignColumn</b>
              Name of the column appearing in the foreign key.

       <b>ordinalPosition</b>
              Position of the column in the foreign key, if the key is a compound key.

       The <b>begintransaction</b> object command on a database connection begins a transaction on the database. If the
       underlying  database  does  not  support  atomic,  consistent,  isolated,   durable   transactions,   the
       <b>begintransaction</b>   object   command   returns  an  error  reporting  the  fact.  Similarly,  if  multiple
       <b>begintransaction</b> commands are executed withough an intervening <b>commit</b> or <b>rollback</b> command,  an  error  is
       returned unless the underlying database supports nested transactions.

       The  <b>commit</b>  object  command  on  a  database  connection  ends  the  most  recent transaction started by
       <b>begintransaction</b> and commits changes to the database.

       The <b>rollback</b> object command on a database connection rolls back the most recent  transaction  started  by
       <b>begintransaction</b>. The state of the database is as if nothing happened during the transaction.

       The  <b>transaction</b>  object  command  on  a database connection presents a simple way of bundling a database
       transaction. It begins a transaction, and evaluates the supplied <u>script</u> argument as a Tcl script  in  the
       caller's  scope.  If  <u>script</u>  terminates  normally,  or by <b>break</b>, <b>continue</b>, or <b>return</b>, the transaction is
       committed (and any action requested by <b>break</b>, <b>continue</b>, or <b>return</b> takes place). If the commit  fails  for
       any  reason,  the  error  in the commit is treated as an error in the <u>script</u>.  In the case of an error in
       <u>script</u> or in the commit, the transaction is rolled back and the error is rethrown. Any nonstandard return
       code from the script causes the transaction to be rolled back and then is rethrown.

       The <b>allrows</b> object command prepares a SQL statement (given by the <u>sql-code</u> parameter) to execute  against
       the  database.   It  then  executes  it  (see  <b>tdbc::statement</b>  for details) with the optional <u>dictionary</u>
       parameter giving bind variables. Finally, it uses the <u>allrows</u> object  command  on  the  result  set  (see
       <b>tdbc::resultset</b>)  to  construct a list of the results. Finally, both result set and statement are closed.
       The return value is the list of results.

       The <b>foreach</b> object command prepares a SQL statement (given by the <u>sql-code</u> parameter) to execute  against
       the  database.   It  then  executes  it  (see  <b>tdbc::statement</b>  for details) with the optional <u>dictionary</u>
       parameter giving bind variables. Finally, it uses the <u>foreach</u> object  command  on  the  result  set  (see
       <b>tdbc::resultset</b>)  to  evaluate the given <u>script</u> for each row of the results. Finally, both result set and
       statement are closed, even if the given <u>script</u> results in a <b>return</b>, an error, or an unusual return code.

</pre><h4><b>CONFIGURATION</b> <b>OPTIONS</b></h4><pre>
       The configuration options accepted when the connection is  created  and  on  the  connection's  <b>configure</b>
       object command include the following, and may include others specific to a database driver.

       <b>-encoding</b> <u>name</u>
              Specifies  the  encoding  to be used in connecting to the database.  The <u>name</u> should be one of the
              names accepted by the <b>encoding</b> command. This option is usually unnecessary; most database  drivers
              can figure out the encoding in use by themselves.

       <b>-isolation</b> <u>level</u>
              Specifies  the transaction isolation level needed for transactions on the database. The acceptable
              values for <u>level</u> are shown under <b>TRANSACTION</b> <b>ISOLATION</b> <b>LEVELS</b>.

       <b>-timeout</b> <u>ms</u>
              Specifies the maximum time to wait for a an operation database engine before reporting an error to
              the caller. The <u>ms</u> argument gives the maximum time in milliseconds. A value of zero (the  default)
              specifies that the calling process is to wait indefinitely for database operations.

       <b>-readonly</b> <u>flag</u>
              Specifies  that  the  connection  will  not  modify the database (if the Boolean parameter <u>flag</u> is
              true), or that it may modify the database (if <u>flag</u> is false). If <u>flag</u> is  true,  this  option  may
              have the effect of raising the transaction isolation level to <u>readonly</u>.

   <b>TRANSACTION</b> <b>ISOLATION</b> <b>LEVELS</b>
       The acceptable values for the <b>-isolation</b> configuration option are as follows:

       <b>readuncommitted</b>
              Allows  the  transaction  to  read  "dirty",  that  is, uncommitted data. This isolation level may
              compromise data integrity, does not guarantee that foreign  keys  or  uniqueness  constraints  are
              satisfied, and in general does not guarantee data consistency.

       <b>readcommitted</b>
              Forbids  the  transaction from reading "dirty" data, but does not guarantee repeatable reads; if a
              transaction reads a row of a database at a given time, there is no guarantee  that  the  same  row
              will be available at a later time in the same transaction.

       <b>repeatableread</b>
              Guarantees  that  any  row of the database, once read, will have the same values for the life of a
              transaction. Still permits "phantom reads" (that is, newly-added rows  appearing  if  a  table  is
              queried a second time).

       <b>serializable</b>
              The  most  restrictive  (and  most  expensive)  level  of  transaction isolation. Any query to the
              database, if repeated, will return precisely the same results for the  life  of  the  transaction,
              exactly as if the transaction is the only user of the database.

       <b>readonly</b>
              Behaves  like <b>serializable</b> in that the only results visible to the transaction are those that were
              committed prior to the start of the transaction, but forbids the transaction  from  modifying  the
              database.

       A  database  that  does  not  implement  one  of  these  isolation  levels will instead use the next more
       restrictive isolation level. If the given level of isolation cannot be obtained, the  database  interface
       throws an error reporting the fact. The default isolation level is <b>readcommitted</b>.

       A script should not the isolation level when a transaction is in progress.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/encoding.3tcl.html">encoding</a>(3tcl), <a href="../man3tcl/tdbc.3tcl.html">tdbc</a>(3tcl), tdbc::<a href="../man3tcl/resultset.3tcl.html">resultset</a>(3tcl), tdbc::<a href="../man3tcl/statement.3tcl.html">statement</a>(3tcl), tdbc::<a href="../man3tcl/tokenize.3tcl.html">tokenize</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       TDBC, SQL, database, connectivity, connection, resultset, statement

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2008 by Kevin B. Kenny.

Tcl                                                    8.6                                <u>tdbc::<a href="../man3tcl/connection.3tcl.html">connection</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>