<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>curl_easy_upkeep - keep existing connections alive</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       curl_easy_upkeep - keep existing connections alive

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_upkeep(CURL *handle);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Some  protocols  have  "connection  upkeep"  mechanisms.  These  mechanisms  usually send some traffic on
       existing connections in order to keep them alive; this can prevent connections from being closed  due  to
       overzealous firewalls, for example.

       For  HTTP/2  we  have  an  upkeep  mechanism:  when  the  connection  upkeep  interval  is  exceeded  and
       <u><a href="../man3/curl_easy_upkeep.3.html">curl_easy_upkeep</a>(3)</u> is called, an HTTP/2 PING frame is sent on the connection.

       For MQTT the upkeep interval defines when to send ping requests to prevent the server from disconnecting.

       This function must be explicitly called in order to perform  the  upkeep  work.   The  connection  upkeep
       interval is set with <u><a href="../man3/CURLOPT_UPKEEP_INTERVAL_MS.3.html">CURLOPT_UPKEEP_INTERVAL_MS</a>(3)</u>.

       If  you call this function on an easy handle that uses a shared connection cache then upkeep is performed
       on the connections in that cache, even if those connections were never used by the easy handle. (Added in
       8.10.0)

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           /* Make a connection to an HTTP/2 server. */
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");

           /* Set the interval to 30000ms / 30s */
           curl_easy_setopt(curl, CURLOPT_UPKEEP_INTERVAL_MS, 30000L);

           curl_easy_perform(curl);

           /* Perform more work here. */

           /* While the connection is being held open, curl_easy_upkeep() can be
              called. If curl_easy_upkeep() is called and the time since the last
              upkeep exceeds the interval, then an HTTP/2 PING is sent. */
           curl_easy_upkeep(curl);

           /* Perform more work here. */

           /* always cleanup */
           curl_easy_cleanup(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.62.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This function returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK,  non-zero  means  an  error  occurred,  see  <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.  If
       <u><a href="../man3/CURLOPT_ERRORBUFFER.3.html">CURLOPT_ERRORBUFFER</a>(3)</u> was set with <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> there can be an error message stored in the error
       buffer when non-zero is returned.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_TCP_KEEPALIVE.3.html">CURLOPT_TCP_KEEPALIVE</a></b>(3), <b><a href="../man3/CURLOPT_TCP_KEEPIDLE.3.html">CURLOPT_TCP_KEEPIDLE</a></b>(3)

libcurl                                            2025-06-16                                <u><a href="../man3/curl_easy_upkeep.3.html">curl_easy_upkeep</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>