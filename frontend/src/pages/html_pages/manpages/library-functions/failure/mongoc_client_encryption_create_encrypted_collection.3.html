<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mongoc_collection_t*</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongoc-doc">libmongoc-doc_1.30.4-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>SYNOPSIS</b></h4><pre>
          mongoc_collection_t*
          mongoc_client_encryption_create_encrypted_collection (
                mongoc_client_encryption_t *enc,
                mongoc_database_t *database,
                const char *name,
                const bson_t *in_options,
                bson_t *out_options,
                const char *kms_provider,
                const bson_t *opt_masterKey,
                bson_error_t *error);

       Create  a  new  collection with <u>Queryable</u> <u>Encryption</u> enabled. Requires a valid <u>mongoc_client_encryption_t</u>
       object to operate.

       Added in version 1.24.0.

       <b>SEE</b> <b>ALSO:</b>
          This function is a convenience API wrapping <u>mongoc_database_create_collection()</u>.

</pre><h4><b>PARAMETERS</b></h4><pre>
       • <b>enc</b>: The <u>mongoc_client_encryption_t</u> to be used to configure encryption for the new collection.

       • <b>database</b>: The <u>mongoc_database_t</u> in which the new collection will be created.

       • <b>name</b>: The name of the new collection.

       • <b>in_options</b>: The options for the new collection. (See below).

       • <b>out_options</b>: An optional output option for the final create-collection options. Should point to storage
         for a <u>bson_t</u>. The pointed-to object must be destroyed by the caller. If <b>NULL</b>, has no effect.

       • <b>kms_provider</b>: The name of the KMS provider to use for generating new data encryption keys for encrypted
         fields within the collection.

       • <b>opt_masterKey</b>: If provided, used as the masterkey option when data encryption keys need to be  created.
         (See: <u>mongoc_client_encryption_datakey_opts_set_masterkey()</u>)

       • <b>error</b>:  Optional  output  parameter pointing to storage for a <u>bson_error_t</u>. If an error occurs, will be
         initialized with error information.

</pre><h4><b>RETURNS</b></h4><pre>
       If successful, this function returns a new <u>mongoc_collection_t</u> object.  Upon failure,  returns  <b>NULL</b>  and
       initializes  <b>*error</b>  with an error indicating the reason for failure. The returned collection object must
       be freed by the caller.

</pre><h4><b>CREATION</b> <b>OPTIONS</b></h4><pre>
       The <b>in_options</b> parameter behaves similarly to the <b>opts</b> parameter for <u>mongoc_database_create_collection()</u>,
       which accepts the options for the <b>create</b> MongoDB command  (<u>Documented</u>  <u>here</u>).   The  <b>in_options</b>  document
       accepted here is different in one important way:

       The  <b>$.encryptedFields.fields</b>  array  is <u>required</u> by this function, and, unlike the schema documented for
       the <b>create</b> command, accepts a value of <b>null</b> for the <b>keyId</b> parameter on each array element.

       This function has the following as-if effect:

       1. A new set of options O will be created based on <b>in_options</b>.

       2. For each element F in the <b>$.encryptedFields.fields</b> array of O:

          1. If F contains a <b>"keyId":</b> <b>null</b> element, a new data encryption key  K_f  will  be  created  as-if  by
             calling the <u>mongoc_client_encryption_create_datakey()</u>, using the relevant arguments that were given
             to <b>mongoc_client_encryption_create_encrypted_collection</b>.

          2. The ID of K_f will be used to replace the <b>"keyId":</b> <b>null</b> element within F.

       3. A collection will be created using the options O.

       4. If <b>out_options</b> is not <b>NULL</b>, O will be written to <b>out_options</b>.

</pre><h4><b>AUTHOR</b></h4><pre>
       MongoDB, Inc

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2009-present, MongoDB, Inc.

1.30.4                                            Jun 08, 2025<u><a href="../man3/MONGOC_CLIENT_ENCRYPTI...E_ENCRYPTED_COLLECTION.3.html">MONGOC_CLIENT_ENCRYPTI...E_ENCRYPTED_COLLECTION</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>