<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pappl-job - pappl job functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpappl-dev">libpappl-dev_1.4.9-0ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pappl-job - pappl job functions

</pre><h4><b>LIBRARY</b></h4><pre>
       Printer Application Framework (libpappl, "pkg-config --cflags --libs pappl")

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pappl/pappl.h&gt;</b>

       <u>typedef</u> <u>struct</u> <b>_</b><u>pappl_job_s</u> <b>pappl_job_t;</b>

       <u>void</u>
       <b>papplJobCancel</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>bool</u>
       <b>papplJobFilterImage</b><u>(pappl_job_t</u>  <u>*job,</u>  <u>pappl_device_t</u> <u>*device,</u> <u>pappl_joptions_t</u> <u>*options,</u> <u>const</u> <u>unsigned</u>
       <u>char</u> <u>*pixels,</u> <u>unsigned</u> <u>width,</u> <u>unsigned</u> <u>height,</u> <u>unsigned</u> <u>depth,</u> <u>bool</u> <u>smoothing);</u>

       <u>ipp_attribute_t</u>     <u>*</u>
       <b>papplJobGetAttribute</b><u>(pappl_job_t</u> <u>*job,</u> <u>const</u> <u>char</u> <u>*name);</u>

       <u>void</u>      <u>*</u>
       <b>papplJobGetData</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>const</u> <u>char</u>     <u>*</u>
       <b>papplJobGetFilename</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>const</u> <u>char</u>     <u>*</u>
       <b>papplJobGetFormat</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>int</u>
       <b>papplJobGetID</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>int</u>
       <b>papplJobGetImpressions</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>int</u>
       <b>papplJobGetImpressionsCompleted</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>const</u> <u>char</u>     <u>*</u>
       <b>papplJobGetMessage</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>const</u> <u>char</u>     <u>*</u>
       <b>papplJobGetName</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>pappl_joptions_t</u>    <u>*</u>
       <b>papplJobGetOptions</b><u>(pappl_job_t</u> <u>*job,</u> <u>pappl_joptions_t</u> <u>*options,</u> <u>unsigned</u> <u>num_pages,</u> <u>bool</u> <u>color);</u>

       <u>pappl_printer_t</u>     <u>*</u>
       <b>papplJobGetPrinter</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>pappl_jreason_t</u>
       <b>papplJobGetReasons</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>ipp_jstate_t</u>
       <b>papplJobGetState</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>time_t</u>
       <b>papplJobGetTimeCompleted</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>time_t</u>
       <b>papplJobGetTimeCreated</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>time_t</u>
       <b>papplJobGetTimeProcessed</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>const</u> <u>char</u>     <u>*</u>
       <b>papplJobGetUsername</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>bool</u>
       <b>papplJobIsCanceled</b><u>(pappl_job_t</u> <u>*job);</u>

       <u>int</u>
       <b>papplJobOpenFile</b><u>(pappl_job_t</u> <u>*job,</u> <u>char</u> <u>*fname,</u> <u>size_t</u> <u>fnamesize,</u> <u>const</u> <u>char</u> <u>*directory,</u> <u>const</u> <u>char</u> <u>*ext,</u>
       <u>const</u> <u>char</u> <u>*mode);</u>

       <u>void</u>
       <b>papplJobSetData</b><u>(pappl_job_t</u> <u>*job,</u> <u>void</u> <u>*data);</u>

       <u>void</u>
       <b>papplJobSetImpressions</b><u>(pappl_job_t</u> <u>*job,</u> <u>int</u> <u>impressions);</u>

       <u>void</u>
       <b>papplJobSetImpressionsCompleted</b><u>(pappl_job_t</u> <u>*job,</u> <u>int</u> <u>add);</u>

       <u>void</u>
       <b>papplJobSetMessage</b><u>(pappl_job_t</u> <u>*job,</u> <u>const</u> <u>char</u> <u>*message,</u> <u>...);</u>

       <u>void</u>
       <b>papplJobSetReasons</b><u>(pappl_job_t</u> <u>*job,</u> <u>pappl_jreason_t</u> <u>add,</u> <u>pappl_jreason_t</u> <u>remove);</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>PAPPL</b> job functions provide access to the job object.  Jobs and the life  cycle  of  the  <b>pappl_job_t</b>
       objects are managed automatically by the system object for the printer application.

       The  <b>papplJobGet</b>  functions  get the current values associated with a job while the <b>papplJobSet</b> functions
       set the current values associated with a job.

       The <b>papplJobCancel</b> function cancels processing of a job, while the  <b>papplJobIsCanceled</b>  function  returns
       whether  a  job  is  in  the  canceled state (<u>IPP_JSTATE_CANCELED</u>) or is in the process of being canceled
       (<u>IPP_JSTATE_PROCESSING</u> and <u>PAPPL_JREASON_PROCESSING_TO_STOP_POINT</u>).

       The <b>papplJobOpenFile</b> function opens a file associated with the job.  The file descriptor must  be  closed
       by the caller using the <b><a href="../man2/close.2.html">close</a></b>(2) system call.

       The <b>papplJobFilterImage</b> function converts raw image data to raster data suitable for the printer.

</pre><h4><b>ENUMERATIONS</b></h4><pre>
   <b>pappl_jreason_e</b>
       IPP "job-state-reasons" bit values

       PAPPL_JREASON_ABORTED_BY_SYSTEM
            ´aborted-by-system'

       PAPPL_JREASON_COMPRESSION_ERROR
            ´compression-error'

       PAPPL_JREASON_DOCUMENT_FORMAT_ERROR
            ´document-format-error'

       PAPPL_JREASON_DOCUMENT_PASSWORD_ERROR
            ´document-password-error'

       PAPPL_JREASON_DOCUMENT_PERMISSION_ERROR
            ´document-permission-error'

       PAPPL_JREASON_DOCUMENT_UNPRINTABLE_ERROR
            ´document-unprintable-error'

       PAPPL_JREASON_ERRORS_DETECTED
            ´errors-detected'

       PAPPL_JREASON_JOB_CANCELED_AFTER_TIMEOUT
            ´job-canceled-after-timeout'

       PAPPL_JREASON_JOB_CANCELED_AT_DEVICE
            ´job-canceled-at-device'

       PAPPL_JREASON_JOB_CANCELED_BY_USER
            ´job-canceled-by-user'

       PAPPL_JREASON_JOB_COMPLETED_SUCCESSFULLY
            ´job-completed-successfully'

       PAPPL_JREASON_JOB_COMPLETED_WITH_ERRORS
            ´job-completed-with-errors'

       PAPPL_JREASON_JOB_COMPLETED_WITH_WARNINGS
            ´job-completed-with-warnings'

       PAPPL_JREASON_JOB_DATA_INSUFFICIENT
            ´job-data-insufficient'

       PAPPL_JREASON_JOB_FETCHABLE
            ´job-fetchable'

       PAPPL_JREASON_JOB_HOLD_UNTIL_SPECIFIED
            ´job-hold-until-specified'

       PAPPL_JREASON_JOB_INCOMING
            ´job-incoming'

       PAPPL_JREASON_JOB_PRINTING
            ´job-printing'

       PAPPL_JREASON_JOB_QUEUED
            ´job-queued'

       PAPPL_JREASON_JOB_SPOOLING
            ´job-spooling'

       PAPPL_JREASON_JOB_SUSPENDED_FOR_APPROVAL
            ´job-suspended-for-approval'

       PAPPL_JREASON_NONE
            ´none'

       PAPPL_JREASON_PRINTER_STOPPED
            ´printer-stopped'

       PAPPL_JREASON_PRINTER_STOPPED_PARTLY
            ´printer-stopped-partly'

       PAPPL_JREASON_PROCESSING_TO_STOP_POINT
            ´processing-to-stop-point'

       PAPPL_JREASON_QUEUED_IN_DEVICE
            ´queued-in-device'

       PAPPL_JREASON_WARNINGS_DETECTED
            ´warnings-detected'

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>papplJobCancel</b>
       Cancel a job.

       void papplJobCancel (
           pappl_job_t *job
       );

       This  function cancels the specified job.  If the job is currently being printed, it will be stopped at a
       convenient time (usually the end of a page) so that the printer will be left in a known state.

   <b>papplJobCreatePrintOptions</b>
       Create the printer options for a job.

       pappl_pr_options_t * papplJobCreatePrintOptions (
           pappl_job_t *job,
           unsigned num_pages,
           bool color
       );

       This function allocates a printer options structure and computes the print options for a job  based  upon
       the  Job  Template  attributes  submitted  in the print request and the default values set in the printer
       driver data.

       The "num_pages" and "color" arguments specify the number of pages and whether the document contains  non-
       grayscale colors - this information typically comes from parsing the job file.

   <b>papplJobCreateWithFile</b>
       Create a job with a local file.

       pappl_job_t * papplJobCreateWithFile (
           pappl_printer_t *printer,
           const char *username,
           const char *format,
           const char *job_name,
           int num_options,
           cups_option_t *options,
           const char *filename
       );

       This  function  creates  a  new  print job with a local file.  The "num_options" and "options" parameters
       specify additional print options, as needed.  The file specified by "filename" is  removed  automatically
       if it resides in the spool directory.

   <b>papplJobDeletePrintOptions</b>
       Delete a job options structure.

       void papplJobDeletePrintOptions (
           pappl_pr_options_t *options
       );

       This function frees the memory used for a job options structure.

   <b>papplJobFilterImage</b>
       Filter an image in memory.

       bool  papplJobFilterImage (
           pappl_job_t *job,
           pappl_device_t *device,
           pappl_pr_options_t *options,
           const unsigned char *pixels,
           int width,
           int height,
           int depth,
           int ppi,
           bool smoothing
       );

       This  function  will print a grayscale or sRGB image using the printer's raster driver interface, scaling
       and positioning the image as necessary based  on  the  job  options,  and  printing  as  many  copies  as
       requested.

       The  image  data is an array of grayscale ("depth" = <b>1</b>) or sRGB ("depth" = <b>3</b>) pixels starting at the top-
       left corner of the image.

       The image resolution ("ppi") is expressed in pixels per inch and is used for some "print-scaling"  modes.
       Pass <b>0</b> if the image has no explicit resolution information.

   <b>papplJobGetAttribute</b>
       Get an attribute from a job.

       ipp_attribute_t * papplJobGetAttribute (
           pappl_job_t *job,
           const char *name
       );

       This  function gets the named IPP attribute from a job.  The returned attribute can be examined using the
       <b>ippGetXxx</b> functions.

   <b>papplJobGetCopies</b>
       Get the number of copies in the job.

       int  papplJobGetCopies (
           pappl_job_t *job
       );

       This function returns the number of copies to produce of the job's document data.

   <b>papplJobGetCopiesCompleted</b>
       Get the number of completed copies.

       int  papplJobGetCopiesCompleted (
           pappl_job_t *job
       );

       This function returns the number of copies that have been completed.

   <b>papplJobGetData</b>
       Get per-job driver data.

       void * papplJobGetData (
           pappl_job_t *job
       );

       This function returns the driver data associated with the job.  It is normally only called  from  drivers
       to maintain state for the processing of the job, for example to store bitmap compression information.

   <b>papplJobGetFilename</b>
       Get the job's filename.

       const char * papplJobGetFilename (
           pappl_job_t *job
       );

       This function returns the filename for the job's document data.

   <b>papplJobGetFormat</b>
       Get the MIME media type for the job's file.

       const char * papplJobGetFormat (
           pappl_job_t *job
       );

       This function returns the MIME media type for the job's document data.

   <b>papplJobGetID</b>
       Get the job ID value.

       int  papplJobGetID (
           pappl_job_t *job
       );

       This function returns the job's unique integer identifier.

   <b>papplJobGetImpressions</b>
       Get the number of impressions (sides) in the job.

       int  papplJobGetImpressions (
           pappl_job_t *job
       );

       This function returns the number of impressions in the job's document data.  An impression is one side of
       an output page.

   <b>papplJobGetImpressionsCompleted</b>
       Get the number of completed impressions
                                             (sides) in the job.

       int  papplJobGetImpressionsCompleted (
           pappl_job_t *job
       );

       This  function returns the number of impressions that have been printed.  An impression is one side of an
       output page.

   <b>papplJobGetMessage</b>
       Get the current job message string, if any.

       const char * papplJobGetMessage (
           pappl_job_t *job
       );

       This function returns the current job message string, if any.

   <b>papplJobGetName</b>
       Get the job name/title.

       const char * papplJobGetName (
           pappl_job_t *job
       );

       This function returns the name or title of the job.

   <b>papplJobGetPrinter</b>
       Get the printer for the job.

       pappl_printer_t * papplJobGetPrinter (
           pappl_job_t *job
       );

       This function returns the printer containing the job.

   <b>papplJobGetReasons</b>
       Get the current job state reasons.

       pappl_jreason_t  papplJobGetReasons (
           pappl_job_t *job
       );

       This function returns the current job state reasons bitfield.

   <b>papplJobGetState</b>
       Get the current job state.

       ipp_jstate_t  papplJobGetState (
           pappl_job_t *job
       );

       This function returns the current job processing state, which is represented as an enumeration:

       •    <b>IPP_JSTATE_ABORTED</b>: Job has been aborted by the system due to an error.

       •    <b>IPP_JSTATE_CANCELED</b>: Job has been canceled by a user.

       •    <b>IPP_JSTATE_COMPLETED</b>: Job has finished printing.

       •    <b>IPP_JSTATE_HELD</b>: Job is being held for some reason, typically because
              the document data is being received.

       •    <b>IPP_JSTATE_PENDING</b>: Job is queued and waiting to be printed.

       •    <b>IPP_JSTATE_PROCESSING</b>: Job is being printed.

       •    <b>IPP_JSTATE_STOPPED</b>: Job is paused, typically when the printer is not
              ready.&lt;/li&gt; &lt;/ul&gt;

   <b>papplJobGetTimeCompleted</b>
       Get the job completion time, if any.

       time_t  papplJobGetTimeCompleted (
           pappl_job_t *job
       );

       This function returns the date and time when the job reached the completed, canceled, or aborted  states.
       <b>0</b> is returned if the job is not yet in one of those states.

   <b>papplJobGetTimeCreated</b>
       Get the job creation time.

       time_t  papplJobGetTimeCreated (
           pappl_job_t *job
       );

       This function returns the date and time when the job was created.

   <b>papplJobGetTimeProcessed</b>
       Get the job processing time.

       time_t  papplJobGetTimeProcessed (
           pappl_job_t *job
       );

       This function returns the date and time when the job started processing (printing).

   <b>papplJobGetUsername</b>
       Get the name of the user that submitted the job.

       const char * papplJobGetUsername (
           pappl_job_t *job
       );

       This function returns the name of the user that submitted the job.

   <b>papplJobHold</b>
       Hold a job for printing.

       bool  papplJobHold (
           pappl_job_t *job,
           const char *username,
           const char *until,
           time_t until_time
       );

       This function holds a pending job for printing at a later time.

   <b>papplJobIsCanceled</b>
       Return whether the job is canceled.

       bool  papplJobIsCanceled (
           pappl_job_t *job
       );

       This function returns <b>true</b> if the job has been canceled or aborted.

   <b>papplJobOpenFile</b>
       Create or open a file for the document in a job.

       int  papplJobOpenFile (
           pappl_job_t *job,
           char *fname,
           size_t fnamesize,
           const char *directory,
           const char *ext,
           const char *mode
       );

       This  function  creates  or  opens  a  file for a job.  The "fname" and "fnamesize" arguments specify the
       location and size of a buffer to store the job filename, which incorporates the "directory", printer  ID,
       job  ID,  job  name  (title), and "ext" values.  The job name is "sanitized" to only contain alphanumeric
       characters.

       The "mode" argument is "r" to read an existing job file or "w" to write a new job file.   New  files  are
       created with restricted permissions for security purposes.

   <b>papplJobRelease</b>
       Release a job for printing.

       bool  papplJobRelease (
           pappl_job_t *job,
           const char *username
       );

       This function releases a held job for printing.

   <b>papplJobResume</b>
       Resume processing of a job.

       void papplJobResume (
           pappl_job_t *job,
           pappl_jreason_t remove
       );

   <b>papplJobRetain</b>
       Retain a completed job until the specified time.

       bool  papplJobRetain (
           pappl_job_t *job,
           const char *username,
           const char *until,
           int until_interval,
           time_t until_time
       );

   <b>papplJobSetCopiesCompleted</b>
       Add completed copies to the job.

       void papplJobSetCopiesCompleted (
           pappl_job_t *job,
           int add
       );

       This  function  updates  the  number  of completed impressions in a job.  An impression is one side of an
       output page.

   <b>papplJobSetData</b>
       Set the per-job driver data pointer.

       void papplJobSetData (
           pappl_job_t *job,
           void *data
       );

       This function sets the driver data for the specified job.  It is normally only  called  from  drivers  to
       maintain state for the processing of the job, for example to store bitmap compression information.

   <b>papplJobSetImpressions</b>
       Set the number of impressions (sides) in a job.

       void papplJobSetImpressions (
           pappl_job_t *job,
           int impressions
       );

       This function sets the number of impressions in a job.  An impression is one side of an output page.

   <b>papplJobSetImpressionsCompleted</b>
       Add completed impressions (sides) to
                                             the job.

       void papplJobSetImpressionsCompleted (
           pappl_job_t *job,
           int add
       );

       This  function  updates  the  number  of completed impressions in a job.  An impression is one side of an
       output page.

   <b>papplJobSetMessage</b>
       Set the job message string.

       void papplJobSetMessage (
           pappl_job_t *job,
           const char *message,
           ...
       );

       This function sets the job message string using a <b>printf</b>-style format string.

       5      Note: The maximum length of the job message string is 1023 bytes.

   <b>papplJobSetReasons</b>
       Set the job state reasons bit values.

       void papplJobSetReasons (
           pappl_job_t *job,
           pappl_jreason_t add,
           pappl_jreason_t remove
       );

       This function updates the job state reasons bitfield.  The "remove" bits  are  cleared  first,  then  the
       "add" bits are set.

   <b>papplJobSuspend</b>
       Temporarily stop processing of a job.

       void papplJobSuspend (
           pappl_job_t *job,
           pappl_jreason_t add
       );

   <b>papplPrinterFindJob</b>
       Find a job.

       pappl_job_t * papplPrinterFindJob (
           pappl_printer_t *printer,
           int job_id
       );

       This function finds a job submitted to a printer using its integer ID value.

   <b>papplSystemCleanJobs</b>
       Clean out old (completed) jobs.

       void papplSystemCleanJobs (
           pappl_system_t *system
       );

       This function deletes all old (completed) jobs above the limit set by the <u>papplPrinterSetMaxCompletedJobs</u>
       function.   The  level  may  temporarily  exceed this limit if the jobs were completed within the last 60
       seconds.

       5      Note: This function is normally called automatically from the

       5      <u>papplSystemRun</u> function.

</pre><h4><b>TYPES</b></h4><pre>
   <b>pappl_jreason_t</b>
       Bitfield for IPP "job-state-reasons" values

       typedef unsigned int pappl_jreason_t;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pappl.1.html">pappl</a></b>(1),  <b><a href="../man3/pappl-client.3.html">pappl-client</a></b>(3),  <b><a href="../man3/pappl-device.3.html">pappl-device</a></b>(3),  <b><a href="../man3/pappl-job.3.html">pappl-job</a></b>(3),  <b><a href="../man3/pappl-log.3.html">pappl-log</a></b>(3),   <b><a href="../man3/pappl-mainline.3.html">pappl-mainline</a></b>(3),   <b><a href="../man1/papplmakeresheader.1.html">pappl-</a></b>
       <b><a href="../man1/papplmakeresheader.1.html">makeresheader</a></b>(1), <b><a href="../man3/pappl-printer.3.html">pappl-printer</a></b>(3), <b><a href="../man3/pappl-resource.3.html">pappl-resource</a></b>(3), <b><a href="../man3/pappl-system.3.html">pappl-system</a></b>(3), https://www.msweet.org/pappl

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2019-2022 by Michael R Sweet.

       <b>PAPPL</b>  is  licensed  under  the  Apache License Version 2.0 with an (optional) exception to allow linking
       against GPL2/LGPL2 software (like older versions of CUPS), so it can be used <u>freely</u> in any project  you'd
       like.  See the files "LICENSE" and "NOTICE" in the source distribution for more information.

2025-03-20                                     pappl job functions                                  <u><a href="../man3/pappl-job.3.html">pappl-job</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>