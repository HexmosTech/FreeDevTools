<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libwget-dns - DNS resolver functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/wget2-dev">wget2-dev_2.2.0+ds-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libwget-dns - DNS resolver functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Data</b> <b>Structures</b>
       struct <b>wget_dns_stats_data</b>
       struct <b>wget_dns_st</b>

   <b>Functions</b>
       <b>INITIALIZER</b> (dns_init)
       int <b>wget_dns_init</b> (<b>wget_dns</b> **dns)
       void <b>wget_dns_free</b> (<b>wget_dns</b> **dns)
       void <b>wget_dns_set_timeout</b> (<b>wget_dns</b> *dns, int timeout)
       void <b>wget_dns_set_cache</b> (<b>wget_dns</b> *dns, <b>wget_dns_cache</b> *cache)
       <b>wget_dns_cache</b> * <b>wget_dns_get_cache</b> (<b>wget_dns</b> *dns)
       int <b>wget_dns_cache_ip</b> (<b>wget_dns</b> *dns, const char *ip, const char *name, uint16_t port)
       struct addrinfo * <b>wget_dns_resolve</b> (<b>wget_dns</b> *dns, const char *host, uint16_t port, int family, int
           preferred_family)
       void <b>wget_dns_freeaddrinfo</b> (<b>wget_dns</b> *dns, struct addrinfo **addrinfo)
       void <b>wget_dns_set_stats_callback</b> (<b>wget_dns</b> *dns, wget_dns_stats_callback *fn, void *ctx)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       DNS Resolver functions.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>wget_dns_init</b> <b>(wget_dns</b> <b>**</b> <b>dns)</b>
       <b>Parameters</b>
           <u>dns</u> Pointer to return newly allocated and initialized wget_dns instance

       <b>Returns</b>
           WGET_E_SUCCESS if OK, WGET_E_MEMORY if out-of-memory or WGET_E_INVALID if the mutex initialization
           failed.

       Allocates and initializes a wget_dns instance. dns may be NULL for the purpose of initializing the global
       structures.

   <b>void</b> <b>wget_dns_free</b> <b>(wget_dns</b> <b>**</b> <b>dns)</b>
       <b>Parameters</b>
           <u>[in/out]</u> dns Pointer to wget_dns instance that will be freed and NULLified.

       Free the resources allocated by <b>wget_dns_init()</b>. dns may be NULL for the purpose of freeing the global
       structures.

   <b>void</b> <b>wget_dns_set_timeout</b> <b>(wget_dns</b> <b>*</b> <b>dns,</b> <b>int</b> <b>timeout)</b>
       <b>Parameters</b>
           <u>dns</u> The wget_dns instance to set the timeout
           <u>timeout</u> The timeout value.

       Set the timeout (in milliseconds) for the DNS queries.

       This is the maximum time to wait until we get a response from the server.

       Warning: For standard getaddrinfo() a timeout can't be set in a portable way. So this functions currently
       is a no-op.

       The following two values are special:

       • 0: No timeout, immediate.

       • -1: Infinite timeout. Wait indefinitely.

   <b>void</b> <b>wget_dns_set_cache</b> <b>(wget_dns</b> <b>*</b> <b>dns,</b> <b>wget_dns_cache</b> <b>*</b> <b>cache)</b>
       <b>Parameters</b>
           <u>dns</u> A wget_dns instance, created by <b>wget_dns_init()</b>.
           <u>cache</u> A wget_dns_cache instance

       Enable or disable DNS caching for the DNS instance provided.

       The DNS cache is kept internally in memory, and is used in <b>wget_dns_resolve()</b> to speed up DNS queries.

   <b>wget_dns_cache</b> <b>*</b> <b>wget_dns_get_cache</b> <b>(wget_dns</b> <b>*</b> <b>dns)</b>
       <b>Parameters</b>
           <u>dns</u> A wget_dns instance, created by <b>wget_dns_init()</b>.

       <b>Returns</b>
           1 if DNS caching is enabled, 0 otherwise.

       Tells whether DNS caching is enabled or not.

       You can enable and disable DNS caching with wget_dns_set_caching().

   <b>int</b> <b>wget_dns_cache_ip</b> <b>(wget_dns</b> <b>*</b> <b>dns,</b> <b>const</b> <b>char</b> <b>*</b> <b>ip,</b> <b>const</b> <b>char</b> <b>*</b> <b>name,</b> <b>uint16_t</b> <b>port)</b>
       <b>Parameters</b>
           <u>ip</u> IP address of name
           <u>name</u> Domain name, part of the cache's lookup key
           <u>port</u> Port number, part of the cache's lookup key

       <b>Returns</b>
           0 on success, &lt; 0 on error

       Assign an IP address to the name+port key in the DNS cache. The name should be lowercase.

   <b>struct</b>  <b>addrinfo</b>  <b>*</b>  <b>wget_dns_resolve</b>  <b>(wget_dns</b>  <b>*</b>  <b>dns,</b>  <b>const</b>  <b>char</b> <b>*</b> <b>host,</b> <b>uint16_t</b> <b>port,</b> <b>int</b> <b>family,</b> <b>int</b>
       <b>preferred_family)</b>
       <b>Parameters</b>
           <u>dns</u> A wget_dns instance, created by <b>wget_dns_init()</b>.
           <u>host</u> Hostname
           <u>port</u> TCP destination port
           <u>family</u> Protocol family AF_INET or AF_INET6
           <u>preferred_family</u> Preferred protocol family AF_INET or AF_INET6

       <b>Returns</b>
           A struct addrinfo structure (defined  in  libc's  &lt;netdb.h&gt;).  Must  be  freed  by  the  caller  with
           <b>wget_dns_freeaddrinfo().</b>

       Resolve a host name into its IPv4/IPv6 address.

       <b>family</b>:  Desired  address  family for the returned addresses. This will typically be AF_INET or AF_INET6,
       but it can be any of the values defined in &lt;socket.h&gt;. Additionally, AF_UNSPEC means you don't  care:  it
       will  return any address family that can be used with the specified host and port. If <b>family</b> is different
       than  AF_UNSPEC  and  the  specified  family  is  not  found,  <u>that's</u>  <u>an</u>  <u>error</u>   <u>condition</u>   and   thus
       <b>wget_dns_resolve()</b> will return NULL.

       <b>preferred_family</b>:  Tries  to resolve addresses of this family if possible. This is only honored if <b>family</b>
       (see point above) is AF_UNSPEC.

       The returned addrinfo structure must be freed with <b>wget_dns_freeaddrinfo().</b>

   <b>void</b> <b>wget_dns_freeaddrinfo</b> <b>(wget_dns</b> <b>*</b> <b>dns,</b> <b>struct</b> <b>addrinfo</b> <b>**</b> <b>addrinfo)</b>
       <b>Parameters</b>
           <u>dns</u> A wget_dns instance, created by <b>wget_dns_init()</b>.
           <u>[in/out]</u> addrinfo Value returned by c

       Release addrinfo, previously returned by <b>wget_dns_resolve().</b> <b>If</b> <b>the</b> <b>underlying</b> <b>dns</b> <b>uses</b> <b>caching,</b> <b>just</b> <b>the</b>
       <b>reference/pointer</b> <b>is</b> <b>set</b> <b>to</b> <b>NULL.</b>

   <b>void</b> <b>wget_dns_set_stats_callback</b> <b>(wget_dns</b> <b>*</b> <b>dns,</b> <b>wget_dns_stats_callback</b> <b>*</b> <b>fn,</b> <b>void</b> <b>*</b> <b>ctx)</b>
       <b>Parameters</b>
           <u>dns</u> A wget_dns instance, created by <b>wget_dns_init()</b>.
           <u>fn</u> A wget_dns_stats_callback callback function to receive resolve statistics data
           <u>ctx</u> Context data given to fn

       Set callback function to be called once DNS statistics for a host are collected

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for wget2 from the source code.

wget2                                             Version 2.2.0                                   <u><a href="../man3/libwget-dns.3.html">libwget-dns</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>