<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dns - Tcl Domain Name Service Client</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dns - Tcl Domain Name Service Client

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>dns</b> <b>?1.6.1?</b>

       <b>::dns::resolve</b> <u>query</u> ?<u>options</u>?

       <b>::dns::configure</b> ?<u>options</u>?

       <b>::dns::name</b> <u>token</u>

       <b>::dns::address</b> <u>token</u>

       <b>::dns::cname</b> <u>token</u>

       <b>::dns::result</b> <u>token</u>

       <b>::dns::status</b> <u>token</u>

       <b>::dns::error</b> <u>token</u>

       <b>::dns::reset</b> <u>token</u>

       <b>::dns::wait</b> <u>token</u>

       <b>::dns::cleanup</b> <u>token</u>

       <b>::dns::nameservers</b>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  dns  package  provides  a  Tcl  only Domain Name Service client. You should refer to (1) and (2) for
       information about the DNS protocol or read <a href="../man3/resolver.3.html">resolver</a>(3) to find out how  the  C  library  resolves  domain
       names.   The  intention  of  this  package is to insulate Tcl scripts from problems with using the system
       library resolver for slow name servers.  It may or may not be of practical use. Internet name  resolution
       is a complex business and DNS is only one part of the resolver. You may find you are supposed to be using
       hosts  files, NIS or WINS to name a few other systems. This package is not a substitute for the C library
       resolver - it does however implement name resolution over DNS.  The package also extends the package  <b>uri</b>
       to  support  DNS  URIs  (4)  of  the  form  <u>dns:what.host.com</u>  or  <u>dns://my.nameserver/what.host.com</u>. The
       <b>dns::resolve</b> command can handle DNS URIs or simple domain names as a query.

       <u>Note:</u> The package defaults to using DNS over TCP connections. If you wish to use UDP  you  will  need  to
       have  the <b>tcludp</b> package installed and have a version that correctly handles binary data (&gt; 1.0.4).  This
       is available at <u><a href="http://tcludp.sourceforge.net/">http://tcludp.sourceforge.net/</a></u>.  If the <b>udp</b> package is present then UDP will be  used  by
       default.

       <u>Note:</u>  The  package  supports  DNS  over  TLS  (RFC 7858) for enhanced privacy of DNS queries. Using this
       feature requires the TLS package.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::dns::resolve</b> <u>query</u> ?<u>options</u>?
              Resolve a domain name using the <u>DNS</u> protocol. <u>query</u> is the domain  name  to  be  lookup  up.  This
              should be either a fully qualified domain name or a DNS URI.

              <b>-nameserver</b> <u>hostname</u> or <b>-server</b> <u>hostname</u>
                     Specify an alternative name server for this request.

              <b>-protocol</b> <u>tcp|udp</u>
                     Specify the network protocol to use for this request. Can be one of <u>tcp</u> or <u>udp</u>.

              <b>-port</b> <u>portnum</u>
                     Specify an alternative port.

              <b>-search</b> <u>domainlist</u>

              <b>-timeout</b> <u>milliseconds</u>
                     Override the default timeout.

              <b>-type</b> <u>TYPE</u>
                     Specify  the  type  of  DNS  record  you are interested in. Valid values are A, NS, MD, MF,
                     CNAME, SOA, MB, MG, MR, NULL, WKS, PTR, HINFO, MINFO, MX, TXT, SPF, SRV, AAAA, AXFR, MAILB,
                     MAILA and *.  See RFC1035 for details about the return values.   See  <u><a href="http://spf.pobox.com/">http://spf.pobox.com/</a></u>
                     about SPF.  See (3) about AAAA records and RFC2782 for details of SRV records.

              <b>-class</b> <u>CLASS</u>
                     Specify  the  class  of  domain  name. This is usually IN but may be one of IN for internet
                     domain names, CS, CH, HS or * for any class.

              <b>-recurse</b> <u>boolean</u>
                     Set to <u>false</u> if you do not want the name server  to  recursively  act  upon  your  request.
                     Normally set to <u>true</u>.

              <b>-command</b> <u>procname</u>
                     Set  a  procedure  to  be  called upon request completion. The procedure will be passed the
                     token as its only argument.

              <b>-usetls</b> <u>boolean</u>
                     Set the <u>true</u> to use DNS over TLS. This will force the use of TCP  and  change  the  default
                     port  to  853.  Certificate  validation  is  required  so  a  source of trusted certificate
                     authority certificates must be provided using <u>-cafile</u> or <u>-cadir</u>.

              <b>-cafile</b> <u>filepath</u>
                     Specify a file containing a collection of trusted certificate  authority  certficates.  See
                     the  <b>update-ca-certificates</b> command manual page for details or the <b>-CAfile</b> option help from
                     <b>openssl</b>.

              <b>-cadir</b> <u>dirpath</u>
                     Specify a directory containing trusted certificate authority  certificates.  This  must  be
                     provided  if  <b>-cafile</b>  is  not specified for certificate validation to work when <b>-usetls</b> is
                     enabled. See the <b>openssl</b> documentation for the required structure of this directory.

       <b>::dns::configure</b> ?<u>options</u>?
              The <b>::dns::configure</b> command is used to setup the dns package. The server to query,  the  protocol
              and  domain  search path are all set via this command. If no arguments are provided then a list of
              all the current settings is returned.  If only one argument then it must the the name of an option
              and the value for that option is returned.

              <b>-nameserver</b> <u>hostname</u>
                     Set the default name server to be used by all queries. The default is <u>localhost</u>.

              <b>-protocol</b> <u>tcp|udp</u>
                     Set the default network protocol to be used. Default is <u>tcp</u>.

              <b>-port</b> <u>portnum</u>
                     Set the default port to use on the name server. The default is 53.

              <b>-search</b> <u>domainlist</u>
                     Set the domain search list. This is currently not used.

              <b>-timeout</b> <u>milliseconds</u>
                     Set the default timeout value for DNS lookups. Default is 30 seconds.

              <b>-loglevel</b> <u>level</u>
                     Set the log level used for emitting diagnostic messages from this package. The  default  is
                     <u>warn</u>. See the <b>log</b> package for details of the available levels.

              <b>-cafile</b> <u>filepath</u>
                     Set the default file path to be used for the <b>-cafile</b> option to <b>dns::resolve</b>.

              <b>-cadir</b> <u>dirpath</u>
                     Set the default directory path to be used for the <b>-cadir</b> option to <b>dns::resolve</b>.

       <b>::dns::name</b> <u>token</u>
              Returns a list of all domain names returned as an answer to your query.

       <b>::dns::address</b> <u>token</u>
              Returns a list of the address records that match your query.

       <b>::dns::cname</b> <u>token</u>
              Returns a list of canonical names (usually just one) matching your query.

       <b>::dns::result</b> <u>token</u>
              Returns  a  list  of  all  the decoded answer records provided for your query. This permits you to
              extract the result for more unusual query types.

       <b>::dns::status</b> <u>token</u>
              Returns the status flag. For a successfully completed query this will  be  <u>ok</u>.  May  be  <u>error</u>  or
              <u>timeout</u> or <u>eof</u>.  See also <b>::dns::error</b>

       <b>::dns::error</b> <u>token</u>
              Returns  the  error  message  provided  for  requests whose status is <u>error</u>.  If there is no error
              message then an empty string is returned.

       <b>::dns::reset</b> <u>token</u>
              Reset or cancel a DNS query.

       <b>::dns::wait</b> <u>token</u>
              Wait for a DNS query to complete and return the status upon completion.

       <b>::dns::cleanup</b> <u>token</u>
              Remove all state variables associated with the request.

       <b>::dns::nameservers</b>
              Attempts to return a list of the nameservers currently configured for the users system. On a  unix
              machine  this  parses  the  <a href="file:/etc/resolv.conf">/etc/resolv.conf</a>  file  for  nameservers (if it exists) and on Windows
              systems we examine certain parts of the registry. If no nameserver can be found then the  loopback
              address (127.0.0.1) is used as a default.

</pre><h4><b>EXAMPLES</b></h4><pre>
              % set tok [dns::resolve www.tcl.tk]
              ::dns::1
              % dns::status $tok
              ok
              % dns::address $tok
              199.175.6.239
              % dns::name $tok
              www.tcl.tk
              % dns::cleanup $tok

       Using DNS URIs as queries:

              % set tok [dns::resolve "dns:tcl.tk;type=MX"]
              % set tok [dns::resolve "dns://l.root-servers.net/www.tcl.tk"]

       Reverse address lookup:

              % set tok [dns::resolve 127.0.0.1]
              ::dns::1
              % dns::name $tok
              localhost
              % dns::cleanup $tok

       Using DNS over TLS (RFC 7858):

              % set tok [dns::resolve www.tcl.tk -nameserver dns-tls.bitwiseshift.net  -usetls 1 -cafile <a href="file:/etc/ssl/certs/ca-certificates.crt">/etc/ssl/certs/ca-certificates.crt</a>]
              ::dns::12
              % dns::wait $tok
              ok
              % dns::address $tok
              104.25.119.118 104.25.120.118

</pre><h4><b>REFERENCES</b></h4><pre>
       [1]    Mockapetris,   P.,   "Domain   Names   -  Concepts  and  Facilities",  RFC  1034,  November  1987.
              (<u><a href="http://www.ietf.org/rfc/rfc1034.txt">http://www.ietf.org/rfc/rfc1034.txt</a></u>)

       [2]    Mockapetris, P., "Domain Names - Implementation  and  Specification",  RFC  1035,  November  1087.
              (<u><a href="http://www.ietf.org/rfc/rfc1035.txt">http://www.ietf.org/rfc/rfc1035.txt</a></u>)

       [3]    Thompson,  S.  and Huitema, C., "DNS Extensions to support IP version 6", RFC 1886, December 1995.
              (<u><a href="http://www.ietf.org/rfc/rfc1886.txt">http://www.ietf.org/rfc/rfc1886.txt</a></u>)

       [4]    Josefsson, S., "Domain Name System Uniform Resource Identifiers",  Internet-Draft,  October  2003,
              (<u><a href="http://www.ietf.org/internet-drafts/draft-josefsson-dns-url-09.txt">http://www.ietf.org/internet-drafts/draft-josefsson-dns-url-09.txt</a></u>)

       [5]    Gulbrandsen,  A., Vixie, P. and Esibov, L., "A DNS RR for specifying the location of services (DNS
              SRV)", RFC 2782, February 2000, (<u><a href="http://www.ietf.org/rfc/rfc2782.txt">http://www.ietf.org/rfc/rfc2782.txt</a></u>)

       [6]    Ohta,    M.    "Incremental    Zone    Transfer    in    DNS",    RFC    1995,    August     1996,
              (<u><a href="http://www.ietf.org/rfc/rfc1995.txt">http://www.ietf.org/rfc/rfc1995.txt</a></u>)

       [7]    Hu,  Z., etc al.  "Specification for DNS over Transport Layer Security (TLS)", RFC 7858, May 2016,
              (<u><a href="http://www.ietf.org/rfc/rfc7858.txt">http://www.ietf.org/rfc/rfc7858.txt</a></u>)

</pre><h4><b>AUTHORS</b></h4><pre>
       Pat Thoyts

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the category <u>dns</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/resolver.5.html">resolver</a>(5)

</pre><h4><b>KEYWORDS</b></h4><pre>
       DNS, domain name service, resolver, rfc 1034, rfc 1035, rfc 1886, rfc 7858

</pre><h4><b>CATEGORY</b></h4><pre>
       Networking

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2002, Pat Thoyts

tcllib                                                1.6.1                                            <u><a href="../man3tcl/dns.3tcl.html">dns</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>