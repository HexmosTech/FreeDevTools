<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class::DBI::Plugin::Pager - paged queries for CDBI</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libclass-dbi-plugin-pager-perl">libclass-dbi-plugin-pager-perl_0.566-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Class::DBI::Plugin::Pager - paged queries for CDBI

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Adds a pager method to your class that can query using SQL::Abstract where clauses, and limit the number
       of rows returned to a specific subset.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           package CD;
           use base 'Class::DBI';

           use Class::DBI::Plugin::AbstractCount;      # pager needs this
           use Class::DBI::Plugin::Pager;

           # or to use a different syntax
           # use Class::DBI::Plugin::Pager::RowsTo;

           __PACKAGE__-&gt;set_db(...);

           # in a nearby piece of code...

           use CD;

           # see SQL::Abstract for how to specify the query
           my $where = { ... };

           my $order_by =&gt; [ qw( foo bar ) ];

           # bit by bit:
           my $pager = CD-&gt;pager;

           $pager-&gt;per_page( 10 );
           $pager-&gt;page( 3 );
           $pager-&gt;where( $where );
           $pager-&gt;order_by( $order_by );

           $pager-&gt;set_syntax( 'RowsTo' );

           my @cds = $pager-&gt;search_where;

           # or all at once
           my $pager = CD-&gt;pager( $where, $order_by, 10, 3 );

           my @cds = $pager-&gt;search_where;

           # or

           my $pager = CD-&gt;pager;

           my @cds = $pager-&gt;search_where( $where, $order_by, 10, 3 );

           # $pager isa Data::Page
           # @cds contains the CDs just for the current page

</pre><h4><b>METHODS</b></h4><pre>
       import
           Loads the "pager" method into the CDBI app.

       pager( [$where, [$abstract_attr]], [$order_by], [$per_page], [$page], [$syntax] )
           Also accepts named arguments:

               where           =&gt; $where,
               abstract_attr   =&gt; $attr,
               order_by        =&gt; $order_by,
               per_page        =&gt; $per_page,
               page            =&gt; $page,
               syntax          =&gt; $syntax

           Returns a pager object. This subclasses Data::Page.

           Note  that  for  positional  arguments,  $abstract_attr  can  only  be passed if preceded by a $where
           argument.

           $abstract_attr can contain the $order_by setting (just as in SQL::Abstract).

           configuration
               The named arguments all exist as get/set methods.

               where
                   A hashref specifying the query. See SQL::Abstract.

               abstract_attr
                   A hashref specifying extra options to be passed through to the SQL::Abstract constructor.

               order_by
                   Single column name or arrayref of column names for the ORDER  BY  clause.   Defaults  to  the
                   primary key(s) if not set.

               per_page
                   Number of results per page.

               page
                   The pager will retrieve results just for this page. Defaults to 1.

               syntax
                   Change the way the 'limit' clause is constructed. See "set_syntax". Default is "LimitOffset".

       search_where
           Retrieves results from the pager. Accepts the same arguments as the "pager" method.

       retrieve_all
           Convenience method, generates a WHERE clause that matches all rows from the table.

           Accepts  the  same  arguments  as  the "pager" or "search_where" methods, except that no WHERE clause
           should be specified.

           Note that the argument parsing routine called by the  "pager"  method  cannot  cope  with  positional
           arguments  that  lack a WHERE clause, so either use named arguments, or the 'bit by bit' approach, or
           pass the arguments directly to "retrieve_all".

       set_syntax( [ $name || $class || $coderef ] )
           Changes the syntax used to generate the "limit" or other phrase that restricts the results set to the
           required page.

           The syntax is implemented as a method called on the pager, which can be queried to provide the  $rows
           and $offset parameters (see the subclasses included in this distribution).

           $class
               A class with a "make_limit" method.

           $name
               Name of a class in the "Class::DBI::Plugin::Pager::" namespace, which has a "make_limit" method.

           $coderef
               Will be called as a method on the pager object, so receives the pager as its argument.

           (no args)
               Called      without     args,     will     default     to     "LimitOffset",     which     causes
               Class::DBI::Plugin::Pager::LimitOffset to be used.

       auto_set_syntax
           This is called automatically when you call "pager", and attempts to set the syntax automatically.

           If you are using a subclass of the pager, this method will not be called.

           Will "die" if using Oracle or DB2, since there is no simple syntax for limiting the results set.  DB2
           has  a  "FETCH"  keyword,  but  that seems to apply to a cursor and I don't know if there is a cursor
           available to the pager. There should probably be others to add to the unsupported list.

           Supports the following drivers:

                                 DRIVER        CDBI::P::Pager subclass
               my %supported = ( pg        =&gt; 'LimitOffset',
                                 mysql     =&gt; 'LimitOffset', # older versions need LimitXY
                                 sqlite    =&gt; 'LimitOffset', # or LimitYX
                                 sqlite2   =&gt; 'LimitOffset', # or LimitYX
                                 interbase =&gt; 'RowsTo',
                                 firebird  =&gt; 'RowsTo',
                                 );

           Older versions of MySQL should use the LimitXY syntax. You'll need to set it manually, either by "use
           CDBI::P::Pager::LimitXY", or by passing "syntax =&gt; 'LimitXY'" to a method call, or call  "set_syntax"
           directly.

           Any driver not in the supported or unsupported lists defaults to LimitOffset.

           Any additions to the supported and unsupported lists gratefully received.

   <b>SUBCLASSING</b>
       The 'limit' syntax can be set by using a subclass, e.g.

           use Class::DBI::Plugin::Pager::RowsTo;

       instead of setting at runtime. A subclass looks like this:

           package Class::DBI::Plugin::Pager::RowsTo;
           use base 'Class::DBI::Plugin::Pager';

           sub make_limit {
               my ( $self ) = @_;

               my $offset = $self-&gt;skipped;
               my $rows   = $self-&gt;entries_per_page;

               my $last = $rows + $offset;

               return "ROWS $offset TO $last";
           }

           1;

       You  can  omit  the  "use base" and switch syntax by calling "$pager-&gt;set_syntax( 'RowsTo' )". Or you can
       leave in the "use base" and still say "$pager-&gt;set_syntax( 'RowsTo' )", because in this case the class is
       "require"d and the "import" in the base class doesn't get called. Or something.  At any rate, It Works.

       The subclasses implement the following LIMIT syntaxes:

       Class::DBI::Plugin::Pager::LimitOffset
               LIMIT $rows OFFSET $offset

           This is the default if your driver is not in the list of known drivers.

           This should work for PostgreSQL, more recent MySQL, SQLite, and maybe some others.

       Class::DBI::Plugin::LimitXY
               LIMIT $offset, $rows

           Older versions of MySQL.

       Class::DBI::Plugin::LimitYX
               LIMIT $rows, $offset

           SQLite.

       Class::DBI::Plugin::RowsTo
               ROWS $offset TO $offset + $rows

           InterBase, also FireBird, maybe others?

</pre><h4><b>TODO</b></h4><pre>
       I've only used this on an older version of MySQL. Reports of this thing working (or not) elsewhere  would
       be useful.

       It should be possible to use "set_sql" to build the complex queries required by some databases to emulate
       LIMIT (see notes in source).

</pre><h4><b>CAVEATS</b></h4><pre>
       This  class  can't  implement  the  subselect  mechanism  required by some databases to emulate the LIMIT
       phrase, because it only has access to the WHERE clause, not the whole SQL statement. At the moment.

       Each query issues two requests to the database - the first to count the entire result set, the second  to
       retrieve  the  required  subset  of  results.  If  your  tables  are  small  it  may  be  quicker  to use
       Class::DBI::Pager.

       The "order_by" clause means the database has to retrieve (internally) and sort the  entire  results  set,
       before  chopping  out  the  requested subset. It's probably a good idea to have an index on the column(s)
       used to order the results. For huge tables, this approach to paging may be too inefficient.

</pre><h4><b>SOURCE</b> <b>CODE</b></h4><pre>
       The       source       code       for       this       module       is       hosted       on       GitHub
       &lt;https://github.com/majesticcpan/class-dbi-plugin-pager&gt;.   Feel  free  to fork the repository and submit
       pull requests!

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       SQL::Abstract, Data::Page, Class::DBI::Plugin::AbstractCount, Class::Accessor,  Class::Data::Inheritable,
       Carp.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Class::DBI::Pager  does  a  similar job, but retrieves the entire results set into memory before chopping
       out the page you want.

</pre><h4><b>BUGS</b></h4><pre>
       Please      report      all      bugs       via       the       CPAN       Request       Tracker       at
       &lt;<a href="http://rt.cpan.org/NoAuth/Bugs.html">http://rt.cpan.org/NoAuth/Bugs.html</a>?Dist=Class-DBI-Plugin-Pager&gt;.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2004-2012 by David Baird.

       Copyright 2012 Nikolay S. "<a href="mailto:majestic@cpan.org">majestic@cpan.org</a>"

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>AUTHOR</b></h4><pre>
       David Baird

perl v5.36.0                                       2022-10-16                     <u>Class::DBI::Plugin::<a href="../man3pm/Pager.3pm.html">Pager</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>