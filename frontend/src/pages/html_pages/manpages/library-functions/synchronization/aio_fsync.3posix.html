<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       aio_fsync — asynchronous file synchronization

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/aio.h">aio.h</a>&gt;

       int aio_fsync(int <u>op</u>, struct aiocb *<u>aiocbp</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>aio_fsync</u>()  function shall asynchronously perform a file synchronization operation, as specified by
       the <u>op</u> argument, for I/O operations associated with the file indicated by the file descriptor  <u>aio_fildes</u>
       member  of  the  <b>aiocb</b>  structure referenced by the <u>aiocbp</u> argument and queued at the time of the call to
       <u>aio_fsync</u>().  The function call shall return when the  synchronization  request  has  been  initiated  or
       queued to the file or device (even when the data cannot be synchronized immediately).

       If  <u>op</u> is O_DSYNC, all currently queued I/O operations shall be completed as if by a call to <u>fdatasync</u>();
       that is, as defined for synchronized I/O data integrity completion.

       If <u>op</u> is O_SYNC, all currently queued I/O operations shall be completed as if by a call to <u>fsync</u>();  that
       is,  as defined for synchronized I/O file integrity completion.  If the <u>aio_fsync</u>() function fails, or if
       the operation queued by <u>aio_fsync</u>() fails, then outstanding I/O operations are  not  guaranteed  to  have
       been completed.

       If  <u>aio_fsync</u>()  succeeds, then it is only the I/O that was queued at the time of the call to <u>aio_fsync</u>()
       that is guaranteed to be forced to the relevant completion state. The completion of subsequent I/O on the
       file descriptor is not guaranteed to be completed in a synchronized fashion.

       The <u>aiocbp</u> argument refers to an asynchronous I/O control block. The <u>aiocbp</u>  value  may  be  used  as  an
       argument  to  <u>aio_error</u>()  and  <u>aio_return</u>()  in  order  to determine the error status and return status,
       respectively, of the asynchronous operation while it is proceeding. When the request is queued, the error
       status for the operation is <b>[EINPROGRESS]</b>.  When all data has been successfully  transferred,  the  error
       status  shall  be  reset  to  reflect  the success or failure of the operation. If the operation does not
       complete successfully, the error status for the operation  shall  be  set  to  indicate  the  error.  The
       <u>aio_sigevent</u>  member  determines  the  asynchronous  notification to occur as specified in <u>Section</u> <u>2.4.1</u>,
       <u>Signal</u> <u>Generation</u> <u>and</u> <u>Delivery</u> when all operations have achieved synchronized I/O completion.  All  other
       members  of  the  structure  referenced  by <u>aiocbp</u> are ignored. If the control block referenced by <u>aiocbp</u>
       becomes an illegal address prior to asynchronous I/O completion, then the behavior is undefined.

       If the <u>aio_fsync</u>() function fails or <u>aiocbp</u> indicates an error condition, data is not guaranteed to  have
       been successfully transferred.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <u>aio_fsync</u>() function shall return the value 0 if the I/O operation is successfully queued; otherwise,
       the function shall return the value -1 and set <u>errno</u> to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>aio_fsync</u>() function shall fail if:

       <b>EAGAIN</b> The requested asynchronous operation was not queued due to temporary resource limitations.

       <b>EBADF</b>  The <u>aio_fildes</u> member of the <b>aiocb</b> structure referenced by the <u>aiocbp</u> argument is not a valid file
              descriptor.

       <b>EINVAL</b> This implementation does not support synchronized I/O for this file.

       <b>EINVAL</b> The <u>aio_fildes</u> member of the <b>aiocb</b> structure refers to a file on which an <u>fsync</u>() operation is not
              possible.

       <b>EINVAL</b> A  value  of  <u>op</u>  other  than  O_DSYNC  or  O_SYNC was specified, or O_DSYNC was specified and the
              implementation does not provide runtime support for the Synchronized Input and Output  option,  or
              O_SYNC  was  specified  and  the  implementation  does  not  provide  runtime support for the File
              Synchronization option.

       In the event that any of the queued I/O operations fail, <u>aio_fsync</u>() shall  return  the  error  condition
       defined  for  <u>read</u>()  and  <u>write</u>().   The  error  is  returned  in  the error status for the asynchronous
       operation, which can be retrieved using <u>aio_error</u>().

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       Note that even if the file descriptor is not open for writing, if there are any pending write requests on
       the underlying file, then that I/O will be completed prior to the return of  a  call  to  <u>aio_error</u>()  or
       <u>aio_return</u>() indicating that the operation has completed.

</pre><h4><b>RATIONALE</b></h4><pre>
       None.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>aio_error</u>(), <u>aio_return</u>(), <u>fcntl</u>(), <u>fdatasync</u>(), <u>fsync</u>(), <u>open</u>(), <u>read</u>(), <u>write</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;aio.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                     <u><a href="../man3POSIX/AIO_FSYNC.3POSIX.html">AIO_FSYNC</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>