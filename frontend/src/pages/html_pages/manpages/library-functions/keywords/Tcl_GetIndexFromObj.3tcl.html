<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_GetIndexFromObj, Tcl_GetIndexFromObjStruct - lookup string in table of keywords</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_GetIndexFromObj, Tcl_GetIndexFromObjStruct - lookup string in table of keywords

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       int
       <b>Tcl_GetIndexFromObj</b>(<u>interp,</u> <u>objPtr,</u> <u>tablePtr,</u> <u>msg,</u> <u>flags,</u>
       <u>indexPtr</u>)

       int
       <b>Tcl_GetIndexFromObjStruct</b>(<u>interp,</u> <u>objPtr,</u> <u>structTablePtr,</u> <u>offset,</u>
                                 <u>msg,</u> <u>flags,</u> <u>indexPtr</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)                  Interpreter to use for error reporting; if NULL, then no message
                                                is provided on errors.

       Tcl_Obj <u>*objPtr</u> (in/out)                 The  string  value  of  this  value  is  used  to search through
                                                <u>tablePtr</u>.  If the <b>TCL_INDEX_TEMP_TABLE</b> flag  is  not  specified,
                                                the internal representation is modified to hold the index of the
                                                matching table entry.

       const char *const <u>*tablePtr</u> (in)         An  array  of  null-terminated strings.  The end of the array is
                                                marked  by  a  NULL  string  pointer.   Note  that,  unless  the
                                                <b>TCL_INDEX_TEMP_TABLE</b>   flag  is  specified,  references  to  the
                                                <u>tablePtr</u> may be  retained  in  the  internal  representation  of
                                                <u>objPtr</u>,  so  this  should represent the address of a statically-
                                                allocated array.

       const void <u>*structTablePtr</u> (in)          An array of arbitrary type, typically  some  <b>struct</b>  type.   The
                                                first  member of the structure must be a null-terminated string.
                                                The size of the structure is given by <u>offset</u>.  Note that, unless
                                                the <b>TCL_INDEX_TEMP_TABLE</b> flag is specified,  references  to  the
                                                <u>structTablePtr</u> may be retained in the internal representation of
                                                <u>objPtr</u>,  so  this  should represent the address of a statically-
                                                allocated array of structures.

       int <u>offset</u> (in)                          The offset to add to structTablePtr to get to  the  next  entry.
                                                The end of the array is marked by a NULL string pointer.

       const char <u>*msg</u> (in)                     Null-terminated  string describing what is being looked up, such
                                                as <b>option</b>.  This string is included in error messages.

       int <u>flags</u> (in)                           OR-ed combination of bits providing additional  information  for
                                                operation.   The  only  bits  that  are  currently  defined  are
                                                <b>TCL_EXACT</b> , <b>TCL_INDEX_TEMP_TABLE</b>, and <b>TCL_NULL_OK</b>.

       enum|char|short|int|long <u>*indexPtr</u> (out) If not (int *)NULL, the index of the  string  in  <u>tablePtr</u>  that
                                                matches  the  value of <u>objPtr</u> is returned here. The variable can
                                                be any integer type, signed or unsigned, char,  short,  long  or
                                                long long. It can also be an enum.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  procedures  provide  an  efficient  way  for  looking up keywords, switch names, option names, and
       similar things where  the  literal  value  of  a  Tcl  value  must  be  chosen  from  a  predefined  set.
       <b>Tcl_GetIndexFromObj</b>  compares  <u>objPtr</u>  against  each of the strings in <u>tablePtr</u> to find a match.  A match
       occurs if <u>objPtr</u>'s string value is identical to one of the strings in <u>tablePtr</u>, or if it is  a  non-empty
       unique  abbreviation for exactly one of the strings in <u>tablePtr</u> and the <b>TCL_EXACT</b> flag was not specified;
       in either case <b>TCL_OK</b> is returned. If <u>indexPtr</u> is not NULL the index of the matching entry is  stored  at
       <u>*indexPtr</u>.

       If  there  is no matching entry, <b>TCL_ERROR</b> is returned and an error message is left in <u>interp</u>'s result if
       <u>interp</u> is not NULL.  <u>Msg</u> is included in the error message to indicate what  was  being  looked  up.   For
       example,  if  <u>msg</u>  is  <b>option</b>  the error message will have a form like “<b>bad</b> <b>option</b> <b>"firt":</b> <b>must</b> <b>be</b> <b>first,</b>
       <b>second,</b> <b>or</b> <b>third</b>”.

       If the <b>TCL_INDEX_TEMP_TABLE</b>  was  not  specified,  when  <b>Tcl_GetIndexFromObj</b>  completes  successfully  it
       modifies  the  internal  representation  of  <u>objPtr</u> to hold the address of the table and the index of the
       matching entry.  If <b>Tcl_GetIndexFromObj</b> is invoked again with the  same  <u>objPtr</u>  and  <u>tablePtr</u>  arguments
       (e.g.  during  a reinvocation of a Tcl command), it returns the matching index immediately without having
       to redo the lookup operation.  Note that <b>Tcl_GetIndexFromObj</b> assumes that the  entries  in  <u>tablePtr</u>  are
       static: they must not change between invocations.  This caching mechanism can be disallowed by specifying
       the  <b>TCL_INDEX_TEMP_TABLE</b>  flag.   If the <b>TCL_NULL_OK</b> flag was specified, objPtr is allowed to be NULL or
       the empty string. The resulting index is -1.  Otherwise, if the value of  <u>objPtr</u>  is  the  empty  string,
       <b>Tcl_GetIndexFromObj</b> will treat it as a non-matching value and return <b>TCL_ERROR</b>.

       <b>Tcl_GetIndexFromObjStruct</b>  works  just like <b>Tcl_GetIndexFromObj</b>, except that instead of treating <u>tablePtr</u>
       as an array of string pointers, it treats it as a pointer to the first string in a series of strings that
       have <u>offset</u> bytes between them (i.e. that there is  a  pointer  to  the  first  array  of  characters  at
       <u>tablePtr</u>,  a  pointer  to  the  second  array  of  characters  at  <u>tablePtr</u>+<u>offset</u>  bytes, etc.)  This is
       particularly useful when processing things like <b>Tk_ConfigurationSpec</b>, whose string keys are in  the  same
       place in each of several array elements.

</pre><h4><b>REFERENCE</b> <b>COUNT</b> <b>MANAGEMENT</b></h4><pre>
       <b>Tcl_GetIndexFromObj</b>  and  <b>Tcl_GetIndexFromObjStruct</b>  do  not  modify  the reference count of their <u>objPtr</u>
       arguments; they only read. Note however that these functions may set the interpreter result; if  that  is
       the only place that is holding a reference to the object, it will be deleted.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/prefix.3tcl.html">prefix</a>(3tcl), <a href="../man3tcl/Tcl_WrongNumArgs.3tcl.html">Tcl_WrongNumArgs</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       index, option, value, table lookup

Tcl                                                    8.1                             <u><a href="../man3tcl/Tcl_GetIndexFromObj.3tcl.html">Tcl_GetIndexFromObj</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>