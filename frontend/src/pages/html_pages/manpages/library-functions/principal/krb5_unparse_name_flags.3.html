<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>krb5_get_default_principal,      krb5_principal,      krb5_build_principal,     krb5_build_principal_ext,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/heimdal-dev">heimdal-dev_7.8.git20221117.28daf24+dfsg-9ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       krb5_get_default_principal,      krb5_principal,      krb5_build_principal,     krb5_build_principal_ext,
       krb5_build_principal_va,    krb5_build_principal_va_ext,    krb5_copy_principal,     krb5_free_principal,
       krb5_make_principal,  krb5_parse_name,  krb5_parse_name_flags, krb5_parse_nametype, krb5_princ_set_realm,
       krb5_principal_compare,         krb5_principal_compare_any_realm,         krb5_principal_get_comp_string,
       krb5_principal_get_realm,    krb5_principal_get_type,    krb5_principal_match,   krb5_principal_set_type,
       krb5_realm_compare,       krb5_sname_to_principal,       krb5_sock_to_principal,       krb5_unparse_name,
       krb5_unparse_name_flags,              krb5_unparse_name_fixed,             krb5_unparse_name_fixed_flags,
       krb5_unparse_name_fixed_short, krb5_unparse_name_short — Kerberos 5 principal handling functions

</pre><h4><b>LIBRARY</b></h4><pre>
       Kerberos 5 Library (libkrb5, -lkrb5)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;krb5.h&gt;</b>

       <b>krb5_principal</b>;

       <u>void</u>
       <b>krb5_free_principal</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_principal</u> <u>principal</u>);

       <u>krb5_error_code</u>
       <b>krb5_parse_name</b>(<u>krb5_context</u> <u>context</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>krb5_principal</u> <u>*principal</u>);

       <u>krb5_error_code</u>
       <b>krb5_parse_name_flags</b>(<u>krb5_context</u> <u>context</u>, <u>const</u> <u>char</u> <u>*name</u>, <u>int</u> <u>flags</u>, <u>krb5_principal</u> <u>*principal</u>);

       <u>krb5_error_code</u>
       <b>krb5_unparse_name</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>principal</u>, <u>char</u> <u>**name</u>);

       <u>krb5_error_code</u>
       <b>krb5_unparse_name_flags</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>principal</u>, <u>int</u> <u>flags</u>, <u>char</u> <u>**name</u>);

       <u>krb5_error_code</u>
       <b>krb5_unparse_name_fixed</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>principal</u>, <u>char</u> <u>*name</u>, <u>size_t</u> <u>len</u>);

       <u>krb5_error_code</u>
       <b>krb5_unparse_name_fixed_flags</b>(<u>krb5_context</u>   <u>context</u>,   <u>krb5_const_principal</u>   <u>principal</u>,   <u>int</u>    <u>flags</u>,
           <u>char</u> <u>*name</u>, <u>size_t</u> <u>len</u>);

       <u>krb5_error_code</u>
       <b>krb5_unparse_name_short</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>principal</u>, <u>char</u> <u>**name</u>);

       <u>krb5_error_code</u>
       <b>krb5_unparse_name_fixed_short</b>(<u>krb5_context</u>   <u>context</u>,   <u>krb5_const_principal</u>   <u>principal</u>,   <u>char</u>   <u>*name</u>,
           <u>size_t</u> <u>len</u>);

       <u>void</u>
       <b>krb5_princ_set_realm</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_principal</u> <u>principal</u>, <u>krb5_realm</u> <u>*realm</u>);

       <u>krb5_error_code</u>
       <b>krb5_build_principal</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_principal</u> <u>*principal</u>, <u>int</u> <u>rlen</u>,  <u>krb5_const_realm</u>  <u>realm</u>,
           <u>...</u>);

       <u>krb5_error_code</u>
       <b>krb5_build_principal_va</b>(<u>krb5_context</u>      <u>context</u>,      <u>krb5_principal</u>      <u>*principal</u>,     <u>int</u>     <u>rlen</u>,
           <u>krb5_const_realm</u> <u>realm</u>, <u>va_list</u> <u>ap</u>);

       <u>krb5_error_code</u>
       <b>krb5_build_principal_ext</b>(<u>krb5_context</u>     <u>context</u>,     <u>krb5_principal</u>     <u>*principal</u>,      <u>int</u>      <u>rlen</u>,
           <u>krb5_const_realm</u> <u>realm</u>, <u>...</u>);

       <u>krb5_error_code</u>
       <b>krb5_build_principal_va_ext</b>(<u>krb5_context</u>     <u>context</u>,     <u>krb5_principal</u>     <u>*principal</u>,     <u>int</u>    <u>rlen</u>,
           <u>krb5_const_realm</u> <u>realm</u>, <u>va_list</u> <u>ap</u>);

       <u>krb5_error_code</u>
       <b>krb5_make_principal</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_principal</u> <u>*principal</u>, <u>krb5_const_realm</u> <u>realm</u>, <u>...</u>);

       <u>krb5_error_code</u>
       <b>krb5_copy_principal</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>inprinc</u>, <u>krb5_principal</u> <u>*outprinc</u>);

       <u>krb5_boolean</u>
       <b>krb5_principal_compare</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>princ1</u>, <u>krb5_const_principal</u> <u>princ2</u>);

       <u>krb5_boolean</u>
       <b>krb5_principal_compare_any_realm</b>(<u>krb5_context</u>        <u>context</u>,        <u>krb5_const_principal</u>         <u>princ1</u>,
           <u>krb5_const_principal</u> <u>princ2</u>);

       <u>const</u> <u>char</u> <u>*</u>
       <b>krb5_principal_get_comp_string</b>(<u>krb5_context</u>        <u>context</u>,        <u>krb5_const_principal</u>        <u>principal</u>,
           <u>unsigned</u> <u>int</u> <u>component</u>);

       <u>const</u> <u>char</u> <u>*</u>
       <b>krb5_principal_get_realm</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>principal</u>);

       <u>int</u>
       <b>krb5_principal_get_type</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>principal</u>);

       <u>krb5_boolean</u>
       <b>krb5_principal_match</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>principal</u>, <u>krb5_const_principal</u> <u>pattern</u>);

       <u>void</u>
       <b>krb5_principal_set_type</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_principal</u> <u>principal</u>, <u>int</u> <u>type</u>);

       <u>krb5_boolean</u>
       <b>krb5_realm_compare</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_const_principal</u> <u>princ1</u>, <u>krb5_const_principal</u> <u>princ2</u>);

       <u>krb5_error_code</u>
       <b>krb5_sname_to_principal</b>(<u>krb5_context</u> <u>context</u>, <u>const</u> <u>char</u> <u>*hostname</u>,  <u>const</u>  <u>char</u>  <u>*sname</u>,  <u>int32_t</u>  <u>type</u>,
           <u>krb5_principal</u> <u>*ret_princ</u>);

       <u>krb5_error_code</u>
       <b>krb5_sock_to_principal</b>(<u>krb5_context</u>   <u>context</u>,   <u>int</u>   <u>socket</u>,   <u>const</u>   <u>char</u>   <u>*sname</u>,   <u>int32_t</u>   <u>type</u>,
           <u>krb5_principal</u> <u>*principal</u>);

       <u>krb5_error_code</u>
       <b>krb5_get_default_principal</b>(<u>krb5_context</u> <u>context</u>, <u>krb5_principal</u> <u>*princ</u>);

       <u>krb5_error_code</u>
       <b>krb5_parse_nametype</b>(<u>krb5_context</u> <u>context</u>, <u>const</u> <u>char</u> <u>*str</u>, <u>int32_t</u> <u>*type</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>krb5_principal</b> holds the name of a user or service in Kerberos.

       A principal has two parts, a <b>PrincipalName</b> and a <b>realm</b>.   The  PrincipalName  consists  of  one  or  more
       components. In printed form, the components are separated by <a href="file:/.">/.</a>  The PrincipalName also has a name-type.

       Examples  of  a principal are <b>nisse/<a href="mailto:root@EXAMPLE.COM">root@EXAMPLE.COM</a></b> and <b>host/<a href="mailto:datan.kth.se@KTH.SE">datan.kth.se@KTH.SE</a></b>.  <b>krb5_parse_name</b>() and
       <b>krb5_parse_name_flags</b>()  passes  a  principal  name  in  <u>name</u>  to  the  kerberos   principal   structure.
       <b>krb5_parse_name_flags</b>() takes an extra <u>flags</u> argument the following flags can be passed in

       KRB5_PRINCIPAL_PARSE_NO_REALM
               requires  the  input string to be without a realm, and no realm is stored in the <u>principal</u> return
               argument.

       KRB5_PRINCIPAL_PARSE_REQUIRE_REALM
               requires the input string to with a realm.

       <b>krb5_unparse_name</b>() and <b>krb5_unparse_name_flags</b>() prints the principal <u>princ</u> to the  string  <u>name</u>.   <u>name</u>
       should be freed with <u><a href="../man3/free.3.html">free</a></u>(3).  To the <u>flags</u> argument the following flags can be passed in

       KRB5_PRINCIPAL_UNPARSE_SHORT
               no realm if the realm is one of the local realms.

       KRB5_PRINCIPAL_UNPARSE_NO_REALM
               never include any realm in the principal name.

       KRB5_PRINCIPAL_UNPARSE_DISPLAY
               don't quote
       On  failure  <u>name</u>  is set to NULL.  <b>krb5_unparse_name_fixed</b>() and <b>krb5_unparse_name_fixed_flags</b>() behaves
       just like <b>krb5_unparse</b>(), but instead unparses the principal into a fixed size buffer.

       <b>krb5_unparse_name_short</b>() just returns the principal without the realm if the principal is in the default
       realm. If the principal isn't, the full name is  returned.   <b>krb5_unparse_name_fixed_short</b>()  works  just
       like <b>krb5_unparse_name_short</b>() but on a fixed size buffer.

       <b>krb5_build_principal</b>()  builds  a principal from the realm <u>realm</u> that has the length <u>rlen</u>.  The following
       arguments form the components of the principal.  The list of components is terminated with NULL.

       <b>krb5_build_principal_va</b>() works like <b>krb5_build_principal</b>() using vargs.

       <b>krb5_build_principal_ext</b>() and <b>krb5_build_principal_va_ext</b>() take a list of length-value pairs, the  list
       is terminated with a zero length.

       <b>krb5_make_principal</b>()  works  the same way as <b>krb5_build_principal</b>(), except it figures out the length of
       the realm itself.

       <b>krb5_copy_principal</b>()  makes  a  copy  of   a   principal.    The   copy   needs   to   be   freed   with
       <b>krb5_free_principal</b>().

       <b>krb5_principal_compare</b>()  compares the two principals, including realm of the principals and returns TRUE
       if they are the same and FALSE if not.

       <b>krb5_principal_compare_any_realm</b>() works the same way as <b>krb5_principal_compare</b>() but doesn't compare the
       realm component of the principal.

       <b>krb5_realm_compare</b>() compares the realms of the two principals and returns TRUE is they are the same, and
       FALSE if not.

       <b>krb5_principal_match</b>() matches a <u>principal</u> against a <u>pattern</u>.  The  pattern  is  a  globbing  expression,
       where each component (separated by /) is matched against the corresponding component of the principal.

       The  <b>krb5_principal_get_realm</b>()  and  <b>krb5_principal_get_comp_string</b>()  functions  return  parts  of  the
       <u>principal</u>, either the realm or a specific component.  Both  functions  return  string  pointers  to  data
       inside the principal, so they are valid only as long as the principal exists.

       The  <u>component</u> argument to <b>krb5_principal_get_comp_string</b>() is the index of the component to return, from
       zero to the total number of components minus one. If the index is out of range NULL is returned.

       <b>krb5_principal_get_realm</b>()     and     <b>krb5_principal_get_comp_string</b>()     are     replacements      for
       <b>krb5_princ_component</b>()  and  related  macros, described as internal in the MIT API specification.  Unlike
       the macros, these functions return strings, not krb5_data.  A reason to return krb5_data was that it  was
       believed  that  principal components could contain binary data, but this belief was unfounded, and it has
       been decided that principal components are infact UTF8, so it's safe to use zero terminated strings.

       It's generally not necessary to look at the components of a principal.

       <b>krb5_principal_get_type</b>() and <b>krb5_principal_set_type</b>() get and sets the name type for a principal.  Name
       type handling is tricky and not often needed, don't use this unless you know what you do.

       <b>krb5_sname_to_principal</b>() and <b>krb5_sock_to_principal</b>() are for easy creation of “service” principals that
       can, for instance, be used to lookup a key in a keytab.  For both functions the <u>sname</u> parameter  will  be
       used for the first component of the created principal.  If <u>sname</u> is NULL, “host” will be used instead.

       <b>krb5_sname_to_principal</b>()   will  use  the  passed  <u>hostname</u>  for  the  second  component.   If  <u>type</u>  is
       KRB5_NT_SRV_HST this name will be looked up  with  <b>gethostbyname</b>().   If  <u>hostname</u>  is  NULL,  the  local
       hostname will be used.

       <b>krb5_sock_to_principal</b>() will use the “sockname” of the passed <u>socket</u>, which should be a bound AF_INET or
       AF_INET6  socket.   There  must be a mapping between the address and “sockname”.  The function may try to
       resolve the name in DNS.

       <b>krb5_get_default_principal</b>() tries to find out what's a reasonable default principal by  looking  at  the
       environment it is running in.

       <b>krb5_parse_nametype</b>()  parses  and  returns the name type integer value in <u>type</u>.  On failure the function
       returns an error code and set the error string.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/krb5_config.3.html">krb5_config</a></u>(3), <u><a href="../man5/krb5.conf.5.html">krb5.conf</a></u>(5)

</pre><h4><b>BUGS</b></h4><pre>
       You can not have a NUL in a component in some of the variable argument functions  above.   Until  someone
       can  give  a good example of where it would be a good idea to have NUL's in a component, this will not be
       fixed.

HEIMDAL                                            May 1, 2006                                 <u><a href="../man3/KRB5_PRINCIPAL.3.html">KRB5_PRINCIPAL</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>