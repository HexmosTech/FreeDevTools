<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pthread_attr_setguardsize,  pthread_attr_getguardsize - set/get guard size attribute in thread attributes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pthread_attr_setguardsize,  pthread_attr_getguardsize - set/get guard size attribute in thread attributes
       object

</pre><h4><b>LIBRARY</b></h4><pre>
       POSIX threads library (<u>libpthread</u>, <u>-lpthread</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/pthread.h">pthread.h</a>&gt;</b>

       <b>int</b> <b>pthread_attr_setguardsize(pthread_attr_t</b> <b>*</b><u>attr</u><b>,</b> <b>size_t</b> <u>guardsize</u><b>);</b>
       <b>int</b> <b>pthread_attr_getguardsize(const</b> <b>pthread_attr_t</b> <b>*restrict</b> <u>attr</u><b>,</b>
                                     <b>size_t</b> <b>*restrict</b> <u>guardsize</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>pthread_attr_setguardsize</b>() function sets the guard size attribute of the  thread  attributes  object
       referred to by <u>attr</u> to the value specified in <u>guardsize</u>.

       If  <u>guardsize</u>  is  greater  than  0,  then for each new thread created using <u>attr</u> the system allocates an
       additional region of at least <u>guardsize</u> bytes at the end of the thread's stack to act as the  guard  area
       for the stack (but see BUGS).

       If <u>guardsize</u> is 0, then new threads created with <u>attr</u> will not have a guard area.

       The default guard size is the same as the system page size.

       If   the   stack   address   attribute   has   been   set  in  <u>attr</u>  (using  <b><a href="../man3/pthread_attr_setstack.3.html">pthread_attr_setstack</a></b>(3)  or
       <b><a href="../man3/pthread_attr_setstackaddr.3.html">pthread_attr_setstackaddr</a></b>(3)), meaning that the caller is allocating the thread's stack, then  the  guard
       size  attribute  is  ignored  (i.e.,  no  guard  area  is created by the system): it is the application's
       responsibility to handle stack overflow (perhaps by using <b><a href="../man2/mprotect.2.html">mprotect</a></b>(2) to manually define a guard area  at
       the end of the stack that it has allocated).

       The <b>pthread_attr_getguardsize</b>() function returns the guard size attribute of the thread attributes object
       referred to by <u>attr</u> in the buffer pointed to by <u>guardsize</u>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, these functions return 0; on error, they return a nonzero error number.

</pre><h4><b>ERRORS</b></h4><pre>
       POSIX.1  documents  an  <b>EINVAL</b>  error  if  <u>attr</u> or <u>guardsize</u> is invalid.  On Linux these functions always
       succeed (but portable and future-proof applications should nevertheless handle a possible error return).

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌─────────────────────────────────────────────────────────────────────────────┬───────────────┬─────────┐
       │ <b>Interface</b>                                                                   │ <b>Attribute</b>     │ <b>Value</b>   │
       ├─────────────────────────────────────────────────────────────────────────────┼───────────────┼─────────┤
       │ <b>pthread_attr_setguardsize</b>(), <b>pthread_attr_getguardsize</b>()                    │ Thread safety │ MT-Safe │
       └─────────────────────────────────────────────────────────────────────────────┴───────────────┴─────────┘

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       glibc 2.1.  POSIX.1-2001.

</pre><h4><b>NOTES</b></h4><pre>
       A guard area consists of virtual memory pages that are protected to prevent read and write access.  If  a
       thread  overflows  its stack into the guard area, then, on most hard architectures, it receives a <b>SIGSEGV</b>
       signal, thus notifying it of the overflow.  Guard areas start on page boundaries, and the guard  size  is
       internally   rounded   up   to   the   system   page   size   when  creating  a  thread.   (Nevertheless,
       <b>pthread_attr_getguardsize</b>() returns the guard size that was set by <b>pthread_attr_setguardsize</b>().)

       Setting a guard size of 0 may be useful to save memory in an application that creates  many  threads  and
       knows that stack overflow can never occur.

       Choosing  a  guard  size larger than the default size may be necessary for detecting stack overflows if a
       thread allocates large data structures on the stack.

</pre><h4><b>BUGS</b></h4><pre>
       As at glibc 2.8, the NPTL threading  implementation  includes  the  guard  area  within  the  stack  size
       allocation,  rather  than allocating extra space at the end of the stack, as POSIX.1 requires.  (This can
       result in an <b>EINVAL</b> error from <b><a href="../man3/pthread_create.3.html">pthread_create</a></b>(3) if the guard size value is too large, leaving  no  space
       for the actual stack.)

       The  obsolete  LinuxThreads  implementation did the right thing, allocating extra space at the end of the
       stack for the guard area.

</pre><h4><b>EXAMPLES</b></h4><pre>
       See <b><a href="../man3/pthread_getattr_np.3.html">pthread_getattr_np</a></b>(3).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/mmap.2.html">mmap</a></b>(2),  <b><a href="../man2/mprotect.2.html">mprotect</a></b>(2),  <b><a href="../man3/pthread_attr_init.3.html">pthread_attr_init</a></b>(3),   <b><a href="../man3/pthread_attr_setstack.3.html">pthread_attr_setstack</a></b>(3),   <b><a href="../man3/pthread_attr_setstacksize.3.html">pthread_attr_setstacksize</a></b>(3),
       <b><a href="../man3/pthread_create.3.html">pthread_create</a></b>(3), <b><a href="../man7/pthreads.7.html">pthreads</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                       <u><a href="../man3/pthread_attr_setguardsize.3.html">pthread_attr_setguardsize</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>