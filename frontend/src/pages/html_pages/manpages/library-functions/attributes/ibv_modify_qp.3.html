<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ibv_modify_qp - modify the attributes of a queue pair (QP)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libibverbs-dev">libibverbs-dev_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ibv_modify_qp - modify the attributes of a queue pair (QP)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;infiniband/verbs.h&gt;</b>

       <b>int</b> <b>ibv_modify_qp(struct</b> <b>ibv_qp</b> <u>*qp</u><b>,</b> <b>struct</b> <b>ibv_qp_attr</b> <u>*attr</u><b>,</b>
                         <b>int</b> <u>attr_mask</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ibv_modify_qp()</b>  modifies  the  attributes  of  QP  <u>qp</u>  with the attributes in <u>attr</u> according to the mask
       <u>attr_mask</u>.  The argument <u>attr</u> is an ibv_qp_attr struct, as defined in &lt;infiniband/verbs.h&gt;.

       struct ibv_qp_attr {
               enum ibv_qp_state       qp_state;               /* Move the QP to this state */
               enum ibv_qp_state       cur_qp_state;           /* Assume this is the current QP state */
               enum ibv_mtu            path_mtu;               /* Path MTU (valid only for RC/UC QPs) */
               enum ibv_mig_state      path_mig_state;         /* Path migration state (valid if HCA supports APM) */
               uint32_t                qkey;                   /* Q_Key for the QP (valid only for UD QPs) */
               uint32_t                rq_psn;                 /* PSN for receive queue (valid only for RC/UC QPs) */
               uint32_t                sq_psn;                 /* PSN for send queue */
               uint32_t                dest_qp_num;            /* Destination QP number (valid only for RC/UC QPs) */
               unsigned int            qp_access_flags;        /* Mask of enabled remote access operations (valid only for RC/UC QPs) */
               struct ibv_qp_cap       cap;                    /* QP capabilities (valid if HCA supports QP resizing) */
               struct ibv_ah_attr      ah_attr;                /* Primary path address vector (valid only for RC/UC QPs) */
               struct ibv_ah_attr      alt_ah_attr;            /* Alternate path address vector (valid only for RC/UC QPs) */
               uint16_t                pkey_index;             /* Primary P_Key index */
               uint16_t                alt_pkey_index;         /* Alternate P_Key index */
               uint8_t                 en_sqd_async_notify;    /* Enable SQD.drained async notification (Valid only if qp_state is SQD) */
               uint8_t                 sq_draining;            /* Is the QP draining? Irrelevant for ibv_modify_qp() */
               uint8_t                 max_rd_atomic;          /* Number of outstanding RDMA reads &amp; atomic operations on the destination QP (valid only for RC QPs) */
               uint8_t                 max_dest_rd_atomic;     /* Number of responder resources for handling incoming RDMA reads &amp; atomic operations (valid only for RC QPs) */
               uint8_t                 min_rnr_timer;          /* Minimum RNR NAK timer (valid only for RC QPs) */
               uint8_t                 port_num;               /* Primary port number */
               uint8_t                 timeout;                /* Local ack timeout for primary path (valid only for RC QPs) */
               uint8_t                 retry_cnt;              /* Retry count (valid only for RC QPs) */
               uint8_t                 rnr_retry;              /* RNR retry (valid only for RC QPs) */
               uint8_t                 alt_port_num;           /* Alternate port number */
               uint8_t                 alt_timeout;            /* Local ack timeout for alternate path (valid only for RC QPs) */
               uint32_t                rate_limit;             /* Rate limit in kbps for packet pacing */
       };

       For details on struct  ibv_qp_cap  see  the  description  of  <b>ibv_create_qp()</b>.   For  details  on  struct
       ibv_ah_attr see the description of <b>ibv_create_ah()</b>.

       The  argument  <u>attr_mask</u>  specifies  the  QP  attributes to be modified.  The argument is either 0 or the
       bitwise OR of one or more of the following flags:

       <b>IBV_QP_STATE</b>  Modify qp_state

       <b>IBV_QP_CUR_STATE</b>  Set cur_qp_state

       <b>IBV_QP_EN_SQD_ASYNC_NOTIFY</b>  Set en_sqd_async_notify

       <b>IBV_QP_ACCESS_FLAGS</b>  Set qp_access_flags

       <b>IBV_QP_PKEY_INDEX</b>  Set pkey_index

       <b>IBV_QP_PORT</b>  Set port_num

       <b>IBV_QP_QKEY</b>  Set qkey

       <b>IBV_QP_AV</b>  Set ah_attr

       <b>IBV_QP_PATH_MTU</b>  Set path_mtu

       <b>IBV_QP_TIMEOUT</b>  Set timeout

       <b>IBV_QP_RETRY_CNT</b>  Set retry_cnt

       <b>IBV_QP_RNR_RETRY</b>  Set rnr_retry

       <b>IBV_QP_RQ_PSN</b>  Set rq_psn

       <b>IBV_QP_MAX_QP_RD_ATOMIC</b>  Set max_rd_atomic

       <b>IBV_QP_ALT_PATH</b>  Set the alternative path via: alt_ah_attr, alt_pkey_index, alt_port_num, alt_timeout

       <b>IBV_QP_MIN_RNR_TIMER</b>  Set min_rnr_timer

       <b>IBV_QP_SQ_PSN</b>  Set sq_psn

       <b>IBV_QP_MAX_DEST_RD_ATOMIC</b>  Set max_dest_rd_atomic

       <b>IBV_QP_PATH_MIG_STATE</b>  Set path_mig_state

       <b>IBV_QP_CAP</b>  Set cap

       <b>IBV_QP_DEST_QPN</b>  Set dest_qp_num

       <b>IBV_QP_RATE_LIMIT</b>  Set rate_limit

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>ibv_modify_qp()</b> returns 0 on success, or the value of errno  on  failure  (which  indicates  the  failure
       reason).

</pre><h4><b>NOTES</b></h4><pre>
       If  any  of the modify attributes or the modify mask are invalid, none of the attributes will be modified
       (including the QP state).

       Not  all  devices  support  resizing  QPs.   To  check  if  a  device   supports   it,   check   if   the
       <b>IBV_DEVICE_RESIZE_MAX_WR</b> bit is set in the device capabilities flags.

       Not   all   devices  support  alternate  paths.   To  check  if  a  device  supports  it,  check  if  the
       <b>IBV_DEVICE_AUTO_PATH_MIG</b> bit is set in the device capabilities flags.

       The following tables indicate for each QP Transport Service Type, the minimum  list  of  attributes  that
       must be changed upon transitioning QP state from: Reset --&gt; Init --&gt; RTR --&gt; RTS.

       For QP Transport Service Type  <b>IBV_QPT_UD</b>:

       Next state     Required attributes
       ----------     ----------------------------------------
       Init           <b>IBV_QP_STATE,</b> <b>IBV_QP_PKEY_INDEX,</b> <b>IBV_QP_PORT,</b>
                      <b>IBV_QP_QKEY</b>
       RTR            <b>IBV_QP_STATE</b>
       RTS            <b>IBV_QP_STATE,</b> <b>IBV_QP_SQ_PSN</b>

       For QP Transport Service Type  <b>IBV_QPT_UC</b>:

       Next state     Required attributes
       ----------     ----------------------------------------
       Init           <b>IBV_QP_STATE,</b> <b>IBV_QP_PKEY_INDEX,</b> <b>IBV_QP_PORT,</b>
                      <b>IBV_QP_ACCESS_FLAGS</b>
       RTR            <b>IBV_QP_STATE,</b> <b>IBV_QP_AV,</b> <b>IBV_QP_PATH_MTU,</b>
                      <b>IBV_QP_DEST_QPN,</b> <b>IBV_QP_RQ_PSN</b>
       RTS            <b>IBV_QP_STATE,</b> <b>IBV_QP_SQ_PSN</b>

       For QP Transport Service Type  <b>IBV_QPT_RC</b>:

       Next state     Required attributes
       ----------     ----------------------------------------
       Init           <b>IBV_QP_STATE,</b> <b>IBV_QP_PKEY_INDEX,</b> <b>IBV_QP_PORT,</b>
                      <b>IBV_QP_ACCESS_FLAGS</b>
       RTR            <b>IBV_QP_STATE,</b> <b>IBV_QP_AV,</b> <b>IBV_QP_PATH_MTU,</b>
                      <b>IBV_QP_DEST_QPN,</b> <b>IBV_QP_RQ_PSN,</b>
                      <b>IBV_QP_MAX_DEST_RD_ATOMIC,</b> <b>IBV_QP_MIN_RNR_TIMER</b>
       RTS            <b>IBV_QP_STATE,</b> <b>IBV_QP_SQ_PSN,</b> <b>IBV_QP_MAX_QP_RD_ATOMIC,</b>
                      <b>IBV_QP_RETRY_CNT,</b> <b>IBV_QP_RNR_RETRY,</b> <b>IBV_QP_TIMEOUT</b>

       For QP Transport Service Type  <b>IBV_QPT_RAW_PACKET</b>:

       Next state     Required attributes
       ----------     ----------------------------------------
       Init           <b>IBV_QP_STATE,</b> <b>IBV_QP_PORT</b>
       RTR            <b>IBV_QP_STATE</b>
       RTS            <b>IBV_QP_STATE</b>

       If  port  flag IBV_QPF_GRH_REQUIRED is set then ah_attr and alt_ah_attr must be passed with definition of
       'struct ibv_ah_attr { .is_global = 1; .grh = {...}; }'.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ibv_create_qp.3.html">ibv_create_qp</a></b>(3), <b><a href="../man3/ibv_destroy_qp.3.html">ibv_destroy_qp</a></b>(3), <b><a href="../man3/ibv_query_qp.3.html">ibv_query_qp</a></b>(3), <b><a href="../man3/ibv_create_ah.3.html">ibv_create_ah</a></b>(3)

</pre><h4><b>AUTHORS</b></h4><pre>
       Dotan Barak &lt;<a href="mailto:dotanba@gmail.com">dotanba@gmail.com</a>&gt;

libibverbs                                         2006-10-31                                   <u><a href="../man3/IBV_MODIFY_QP.3.html">IBV_MODIFY_QP</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>