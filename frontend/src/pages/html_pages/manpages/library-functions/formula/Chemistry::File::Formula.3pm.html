<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chemistry::File::Formula - Molecular formula reader/formatter</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libchemistry-mol-perl">libchemistry-mol-perl_0.39-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Chemistry::File::Formula - Molecular formula reader/formatter

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Chemistry::File::Formula;

           my $mol = Chemistry::Mol-&gt;parse("H2O");
           print $mol-&gt;print(format =&gt; formula);
           print $mol-&gt;formula;    # this is a shorthand for the above
           print $mol-&gt;print(format =&gt; formula,
               formula_format =&gt; "%s%d{&lt;sub&gt;%d&lt;/sub&gt;});

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module converts a molecule object to a string with the formula and back.  It registers the 'formula'
       format with Chemistry::Mol.  Besides its obvious use, it is included in the Chemistry::Mol distribution
       because it is a very simple example of a Chemistry::File derived I/O module.

   <b>Writing</b> <b>formulas</b>
       The format can be specified as a printf-like string with the following control sequences, which are
       specified with the formula_format parameter to $mol-&gt;print or $mol-&gt;write.

       %s  symbol
       %D  number of atoms
       %d  number of atoms, included only when it is greater than one
       %d{substr}  substr is only included when number of atoms is greater than one
       %j{substr}  substr is inserted between the formatted string for each element. (The 'j' stands for
       'joiner'.) The format should have only one joiner, but its location in the format string doesn't matter.
       %% a percent sign

       If  no format is specified, the default is "%s%d". Some examples follow. Let's assume that the formula is
       C2H6O, as it would be formatted by default.

       "%s%D"
           Like the default, but include explicit indices for all atoms.  The  formula  would  be  formatted  as
           "C2H6O1"

       "%s%d{&lt;sub&gt;%d&lt;/sub&gt;}"
           HTML format. The output would be "C&lt;sub&gt;2&lt;/sub&gt;H&lt;sub&gt;6&lt;/sub&gt;O".

       "%D %s%j{, }"
           Use a comma followed by a space as a joiner. The output would be "2 C, 6 H, 1 O".

       <u>Symbol</u> <u>Sort</u> <u>Order</u>

       The elements in the formula are sorted by default in the "Hill order", which means that:

       1)  if  the  formula  contains  carbon,  C  goes  first,  followed  by  H, and the rest of the symbols in
       alphabetical order. For example, "CH2BrF".

       2) if there is no carbon, all the symbols (including H) are listed alphabetically.  For example, "BrH".

       It is possible to supply a custom sorting  subroutine  with  the  'formula_sort'  option.  It  expects  a
       subroutine  reference  that takes a hash reference describing the formula (similar to what is returned by
       parse_formula, discussed below), and that returns a list of symbols in the desired order.

       For example, this will sort the symbols in reverse asciibetical order:

           my $formula = $mol-&gt;print(
               format          =&gt; 'formula',
               formula_sort    =&gt; sub {
                   my $formula_hash = shift;
                   return reverse sort keys %$formula_hash;
               }
           );

   <b>Parsing</b> <b>Formulas</b>
       Formulas can also be parsed back into Chemistry::Mol objects.   The  formula  may  have  parentheses  and
       square or triangular brackets, and it may have the following abbreviations:

           Me =&gt; '(CH3)',
           Et =&gt; '(CH3CH2)',
           Bu =&gt; '(C4H9)',
           Bn =&gt; '(C6H5CH2)',
           Cp =&gt; '(C5H5)',
           Ph =&gt; '(C6H5)',
           Bz =&gt; '(C6H5CO)',

       The  formula may also be preceded by a number, which multiplies the whole formula. Some examples of valid
       formulas:

           Formula              Equivalent to
           --------------------------------------------------------------
           CH3(CH2)3CH3         C5H12
           C6H3Me3              C9H12
           2Cu[NH3]4(NO3)2      Cu2H24N12O12
           2C(C[C&lt;C&gt;5]4)3       C152
           2C(C(C(C)5)4)3       C152
           C 1 0 H 2 2          C10H22 (whitespace is completely ignored)

       When a formula is parsed, a molecule object is created which consists of the set  of  the  atoms  in  the
       formula  (no  bonds  or  coordinates,  of  course).   The atoms are created in alphabetical order, so the
       molecule object for C2H5Br would have the atoms in the following sequence: Br, C, C, H, H, H, H, H.

       If you don't want to create a molecule object, but would rather have a simple hash  with  the  number  of
       atoms for each element, use the "parse_formula" method:

           my %formula = Chemistry::File::Formula-&gt;parse_formula("C2H6O");
           use Data::Dumper;
           print Dumper \%formula;

       which prints something like

           $VAR1 = {
                     'H' =&gt; 6,
                     'O' =&gt; 1,
                     'C' =&gt; 2
                   };

       The "parse_formula" method is called internally by the "parse_string" method.

       <u>Non-integer</u> <u>numbers</u> <u>in</u> <u>formulas</u>

       The  "parse_formula"  method  can  also  accept  formulas  that  contain  floating-point numbers, such as
       H1.5N0.5. The numbers must be positive, and numbers smaller than one should include a leading zero (e.g.,
       0.9, not .9).

       When formulas with non-integer numbers of atoms are turned into molecule  objects  as  described  in  the
       previous section, the number of atoms is always <b>rounded</b> <b>up</b>. For example, H1.5N0.5 will produce a molecule
       object with two hydrogen atoms and one nitrogen atom.

       There  is  currently no way of <u>producing</u> formulas with non-integer numbers; perhaps a future version will
       include an "occupancy" property for atoms that will result in non-integer formulas.

</pre><h4><b>SOURCE</b> <b>CODE</b> <b>REPOSITORY</b></h4><pre>
       &lt;https://github.com/perlmol/Chemistry-Mol&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Chemistry::Mol, Chemistry::File

       For discussion about Hill order, just search the web for "formula "hill order"". The  original  reference
       is <u>J.</u> <u>Am.</u> <u>Chem.</u> <u>Soc.</u> <b>1900</b>, <u>22</u>, 478-494.  &lt;<a href="http://dx.doi.org/10.1021/ja02046a005">http://dx.doi.org/10.1021/ja02046a005</a>&gt;.

</pre><h4><b>AUTHOR</b></h4><pre>
       Ivan Tubert-Brohman &lt;<a href="mailto:itub@cpan.org">itub@cpan.org</a>&gt;.

       Formula parsing code contributed by Brent Gregersen.

       Patch for non-integer formulas by Daniel Scott.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright  (c)  2005  Ivan  Tubert-Brohman.  All  rights reserved. This program is free software; you can
       redistribute it and/or modify it under the same terms as Perl itself.

perl v5.34.0                                       2022-07-14                      <u>Chemistry::File::<a href="../man3pm/Formula.3pm.html">Formula</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>