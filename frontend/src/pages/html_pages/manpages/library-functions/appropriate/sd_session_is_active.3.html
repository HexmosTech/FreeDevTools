<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_session_is_active, sd_session_is_remote, sd_session_get_state, sd_session_get_uid,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_session_is_active, sd_session_is_remote, sd_session_get_state, sd_session_get_uid,
       sd_session_get_username, sd_session_get_seat, sd_session_get_start_time, sd_session_get_service,
       sd_session_get_type, sd_session_get_class, sd_session_get_desktop, sd_session_get_display,
       sd_session_get_tty, sd_session_get_vt, sd_session_get_remote_host, sd_session_get_remote_user,
       sd_session_get_leader - Determine state of a specific session

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-login.h&gt;</b>

       <b>int</b> <b>sd_session_is_active(const</b> <b>char</b> <b>*</b><u>session</u><b>);</b>

       <b>int</b> <b>sd_session_is_remote(const</b> <b>char</b> <b>*</b><u>session</u><b>);</b>

       <b>int</b> <b>sd_session_get_state(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>state</u><b>);</b>

       <b>int</b> <b>sd_session_get_uid(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>uid_t</b> <b>*</b><u>uid</u><b>);</b>

       <b>int</b> <b>sd_session_get_username(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>username</u><b>);</b>

       <b>int</b> <b>sd_session_get_seat(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>seat</u><b>);</b>

       <b>int</b> <b>sd_session_get_start_time(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>uint64_t</b> <b>*</b><u>usec</u><b>);</b>

       <b>int</b> <b>sd_session_get_service(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>service</u><b>);</b>

       <b>int</b> <b>sd_session_get_type(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>type</u><b>);</b>

       <b>int</b> <b>sd_session_get_class(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>class</u><b>);</b>

       <b>int</b> <b>sd_session_get_desktop(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>desktop</u><b>);</b>

       <b>int</b> <b>sd_session_get_display(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>display</u><b>);</b>

       <b>int</b> <b>sd_session_get_leader(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>pid_t</b> <b>*</b><u>leader</u><b>);</b>

       <b>int</b> <b>sd_session_get_remote_host(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>remote_host</u><b>);</b>

       <b>int</b> <b>sd_session_get_remote_user(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>remote_user</u><b>);</b>

       <b>int</b> <b>sd_session_get_tty(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>char</b> <b>**</b><u>tty</u><b>);</b>

       <b>int</b> <b>sd_session_get_vt(const</b> <b>char</b> <b>*</b><u>session</u><b>,</b> <b>unsigned</b> <b>int</b> <b>*</b><u>vt</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_session_is_active()</b> may be used to determine whether the session identified by the specified session
       identifier is currently active (i.e. currently in the foreground and available for user input) or not.

       <b>sd_session_is_remote()</b> may be used to determine whether the session identified by the specified session
       identifier is a remote session (i.e. its remote host is known) or not.

       <b>sd_session_get_state()</b> may be used to determine the state of the session identified by the specified
       session identifier. The following states are currently known: "online" (session logged in, but session
       not active, i.e. not in the foreground), "active" (session logged in and active, i.e. in the foreground),
       "closing" (session nominally logged out, but some processes belonging to it are still around). In the
       future additional states might be defined, client code should be written to be robust in regards to
       additional state strings being returned. This function is a more generic version of
       <b>sd_session_is_active()</b>. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_session_get_uid()</b> may be used to determine the user identifier of the Unix user the session identified
       by the specified session identifier belongs to.

       <b>sd_session_get_username()</b> may be used to determine the name of the Unix user the session identified by
       the specified session identifier belongs to. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3)
       call after use.

       <b>sd_session_get_seat()</b> may be used to determine the seat identifier of the seat the session identified by
       the specified session identifier belongs to. Note that not all sessions are attached to a seat, this call
       will fail (returning <b>-ENODATA</b>) for them. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call
       after use.

       <b>sd_session_get_start_time()</b> may be used to determine the start time of the session identified by the
       specified session identifier belongs to. The <u>usec</u> is in microseconds since the epoch (<b>CLOCK_REALTIME</b>).

       <b>sd_session_get_service()</b> may be used to determine the name of the service (as passed during PAM session
       setup) that registered the session identified by the specified session identifier. The returned string
       needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_session_get_type()</b> may be used to determine the type of the session identified by the specified
       session identifier. The returned string is one of "x11", "wayland", "tty", "mir" or "unspecified" and
       needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_session_get_class()</b> may be used to determine the class of the session identified by the specified
       session identifier. The returned string is one of "user", "user-early", "user-incomplete", "greeter",
       "lock-screen", "background", "background-light", "manager" or "manager-early" and needs to be freed with
       the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_session_get_desktop()</b> may be used to determine the brand of the desktop running on the session
       identified by the specified session identifier. This field can be set freely by desktop environments and
       does not follow any special formatting. However, desktops are strongly recommended to use the same
       identifiers and capitalization as for <u>$XDG_CURRENT_DESKTOP</u>, as defined by the <b>Desktop</b> <b>Entry</b>
       <b>Specification</b>[1]. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_session_get_display()</b> may be used to determine the X11 display of the session identified by the
       specified session identifier. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_session_get_leader()</b> may be used to determine the PID of the leader of the session identified by the
       specified session identifier.

       <b>sd_session_get_remote_host()</b> may be used to determine the remote hostname of the session identified by
       the specified session identifier. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after
       use.

       <b>sd_session_get_remote_user()</b> may be used to determine the remote username of the session identified by
       the specified session identifier. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after
       use. Note that this value is rarely known to the system, and even then should not be relied on.

       <b>sd_session_get_tty()</b> may be used to determine the TTY device of the session identified by the specified
       session identifier. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_session_get_vt()</b> may be used to determine the VT number of the session identified by the specified
       session identifier. This function will return an error if the seat does not support VTs.

       If the <u>session</u> parameter of any of these functions is passed as <b>NULL</b>, the operation is executed for the
       session the calling process is a member of, if there is any.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       If the test succeeds, <b>sd_session_is_active()</b> and <b>sd_session_is_remote()</b> return a positive integer; if it
       fails, 0. On success, <b>sd_session_get_state()</b>, <b>sd_session_get_uid()</b>, <b>sd_session_get_username()</b>,
       <b>sd_session_get_seat()</b>, <b>sd_session_get_service()</b>, <b>sd_session_get_type()</b>, <b>sd_session_get_class()</b>,
       <b>sd_session_get_display()</b>, <b>sd_session_get_leader()</b>, <b>sd_session_get_remote_user()</b>,
       <b>sd_session_get_remote_host()</b> and <b>sd_session_get_tty()</b> return 0 or a positive integer. On failure, these
       calls return a negative errno-style error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-ENXIO</b>
           The specified session does not exist.

       <b>-ENODATA</b>
           The given field is not specified for the described session.

       <b>-EINVAL</b>
           An input parameter was invalid (out of range, or <b>NULL</b>, where that is not accepted).

       <b>-ENOMEM</b>
           Memory allocation failed.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_session_get_state()</b> was added in version 186.

       <b>sd_session_get_tty()</b> was added in version 198.

       <b>sd_session_get_vt()</b> was added in version 207.

       <b>sd_session_is_remote()</b>, <b>sd_session_get_remote_host()</b>, and <b>sd_session_get_remote_user()</b> were added in
       version 209.

       <b>sd_session_get_desktop()</b> was added in version 217.

       <b>sd_session_get_username()</b>, <b>sd_session_get_start_time()</b>, and <b>sd_session_get_leader()</b> were added in version
       254.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-login.3.html">sd-login</a></b>(3), <b><a href="../man3/sd_pid_get_session.3.html">sd_pid_get_session</a></b>(3)

</pre><h4><b>NOTES</b></h4><pre>
        1. Desktop Entry Specification
           https://standards.freedesktop.org/desktop-entry-spec/latest/

systemd 257.7                                                                            <u><a href="../man3/SD_SESSION_IS_ACTIVE.3.html">SD_SESSION_IS_ACTIVE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>