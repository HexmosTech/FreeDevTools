<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       posix_spawn_file_actions_adddup2 — add dup2 action to spawn file actions object (<b>ADVANCED</b> <b>REALTIME</b>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/spawn.h">spawn.h</a>&gt;

       int posix_spawn_file_actions_adddup2(posix_spawn_file_actions_t
           *<u>file_actions</u>, int <u>fildes</u>, int <u>newfildes</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>posix_spawn_file_actions_adddup2</u>()  function  shall  add a <u>dup2</u>() action to the object referenced by
       <u>file_actions</u> that shall  cause  the  file  descriptor  <u>fildes</u>  to  be  duplicated  as  <u>newfildes</u>  (as  if
       <u>dup2</u>(<u>fildes</u>, <u>newfildes</u>) had been called) when a new process is spawned using this file actions object.

       A spawn file actions object is as defined in <u>posix_spawn_file_actions_addclose</u>().

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, the <u>posix_spawn_file_actions_adddup2</u>() function shall return zero; otherwise,
       an error number shall be returned to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>posix_spawn_file_actions_adddup2</u>() function shall fail if:

       <b>EBADF</b>  The value specified by <u>fildes</u> or <u>newfildes</u> is negative or greater than or equal to {OPEN_MAX}.

       <b>ENOMEM</b> Insufficient memory exists to add to the spawn file actions object.

       The <u>posix_spawn_file_actions_adddup2</u>() function may fail if:

       <b>EINVAL</b> The value specified by <u>file_actions</u> is invalid.

       It    shall    not    be    considered    an    error   for   the   <u>fildes</u>   argument   passed   to   the
       <u>posix_spawn_file_actions_adddup2</u>() function  to  specify  a  file  descriptor  for  which  the  specified
       operation  could  not  be  performed  at  the  time of the call. Any such error will be detected when the
       associated file actions object is later used during a <u>posix_spawn</u>() or <u>posix_spawnp</u>() operation.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       The <u>posix_spawn_file_actions_adddup2</u>() function is part of the Spawn option and need not be  provided  on
       all implementations.

       Implementations  may  use  file  descriptors  that  must  be inherited into child processes for the child
       process to remain conforming, such as for message catalog or tracing purposes. Therefore, an  application
       that  calls  <u>posix_spawn_file_actions_adddup2</u>()  with  an  arbitrary  integer  for  <u>newfildes</u>  risks non-
       conforming behavior, and this function can only portably be used to overwrite file descriptor values that
       the application has obtained through explicit actions, or for the three file descriptors corresponding to
       the standard file streams. In order to avoid a race condition of leaking an  unintended  file  descriptor
       into a child process, an application should consider opening all file descriptors with the FD_CLOEXEC bit
       set unless the file descriptor is intended to be inherited across <u>exec</u>.

</pre><h4><b>RATIONALE</b></h4><pre>
       Refer to the RATIONALE section in <u>posix_spawn_file_actions_addclose</u>().

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>dup</u>(), <u>posix_spawn</u>(), <u>posix_spawn_file_actions_addclose</u>(), <u>posix_spawn_file_actions_destroy</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;spawn.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017              <u><a href="../man3POSIX/POSIX_SPAWN_FILE_ACTIONS_ADDDUP2.3POSIX.html">POSIX_SPAWN_FILE_ACTIONS_ADDDUP2</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>