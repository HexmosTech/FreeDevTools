<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIDI::Score - MIDI scores</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmidi-perl">libmidi-perl_0.84-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MIDI::Score - MIDI scores

</pre><h4><b>SYNOPSIS</b></h4><pre>
         # it's a long story; see below

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides functions to do with MIDI scores.  It is used as the basis for all the functions in
       MIDI::Simple.  (Incidentally, MIDI::Opus's <b>draw()</b> method also uses some of the functions in here.)

       Whereas the events in a MIDI event structure are items whose timing is expressed in delta-times, the
       timing of items in a score is expressed as an absolute number of ticks from the track's start time.
       Moreover, pairs of 'note_on' and 'note_off' events in an event structure are abstracted into a single
       'note' item in a score structure.

       'note' takes the following form:

        ('note_on', start_time, duration, channel, note, velocity)

       The problem that score structures are meant to solve is that 1) people definitely don't think in delta-
       times -- they think in absolute times or in structures based on that (like 'time from start of measure');
       2) people think in notes, not note_on and note_off events.

       So, given this event structure:

        ['text_event', 0, 'www.ely.anglican.org/parishes/camgsm/chimes.html'],
        ['text_event', 0, 'Lord through this hour/ be Thou our guide'],
        ['text_event', 0, 'so, by Thy power/ no foot shall slide'],
        ['patch_change', 0, 1, 8],
        ['note_on', 0, 1, 25, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 29, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 27, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 20, 96],
        ['note_off', 192, 0, 1, 0],
        ['note_on', 0, 1, 25, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 27, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 29, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 25, 96],
        ['note_off', 192, 0, 1, 0],
        ['note_on', 0, 1, 29, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 25, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 27, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 20, 96],
        ['note_off', 192, 0, 1, 0],
        ['note_on', 0, 1, 20, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 27, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 29, 96],
        ['note_off', 96, 0, 1, 0],
        ['note_on', 0, 1, 25, 96],
        ['note_off', 192, 0, 1, 0],

       here is the corresponding score structure:

        ['text_event', 0, 'www.ely.anglican.org/parishes/camgsm/chimes.html'],
        ['text_event', 0, 'Lord through this hour/ be Thou our guide'],
        ['text_event', 0, 'so, by Thy power/ no foot shall slide'],
        ['patch_change', 0, 1, 8],
        ['note', 0, 96, 1, 25, 96],
        ['note', 96, 96, 1, 29, 96],
        ['note', 192, 96, 1, 27, 96],
        ['note', 288, 192, 1, 20, 96],
        ['note', 480, 96, 1, 25, 96],
        ['note', 576, 96, 1, 27, 96],
        ['note', 672, 96, 1, 29, 96],
        ['note', 768, 192, 1, 25, 96],
        ['note', 960, 96, 1, 29, 96],
        ['note', 1056, 96, 1, 25, 96],
        ['note', 1152, 96, 1, 27, 96],
        ['note', 1248, 192, 1, 20, 96],
        ['note', 1440, 96, 1, 20, 96],
        ['note', 1536, 96, 1, 27, 96],
        ['note', 1632, 96, 1, 29, 96],
        ['note', 1728, 192, 1, 25, 96]

       Note also that scores aren't crucially ordered.  So this:

        ['note', 768, 192, 1, 25, 96],
        ['note', 960, 96, 1, 29, 96],
        ['note', 1056, 96, 1, 25, 96],

       means the same thing as:

        ['note', 960, 96, 1, 29, 96],
        ['note', 768, 192, 1, 25, 96],
        ['note', 1056, 96, 1, 25, 96],

       The only exception to this is in the case of things like:

        ['patch_change', 200,     2, 15],
        ['note',         200, 96, 2, 25, 96],

       where two (or more) score items happen <u>at</u> <u>the</u> <u>same</u> <u>time</u> and where one affects the meaning of the other.

</pre><h4><b>WHAT</b> <b>CAN</b> <b>BE</b> <b>IN</b> <b>A</b> <b>SCORE</b></h4><pre>
       Besides the new score structure item "note" (covered above), the possible contents of a score structure
       can be summarized thus: Whatever can appear in an event structure can appear in a score structure, save
       that its second parameter denotes not a delta-time in ticks, but instead denotes the absolute number of
       ticks from the start of the track.

       To avoid the long periphrase "items in a score structure", I will occasionally refer to items in a score
       structure as "notes", whether or not they are actually "note" commands.  This leaves "event" to
       unambiguously denote items in an event structure.

       These, below, are all the items that can appear in a score.  This is basically just a repetition of the
       table in MIDI::Event, with starttime substituting for dtime -- so refer to MIDI::Event for an explanation
       of what the data types (like "velocity" or "pitch_wheel").  As far as order, the first items are
       generally the most important:

       ('note', <u>starttime</u>, <u>duration</u>, <u>channel</u>, <u>note</u>, <u>velocity</u>)
       ('key_after_touch', <u>starttime</u>, <u>channel</u>, <u>note</u>, <u>velocity</u>)
       ('control_change', <u>starttime</u>, <u>channel</u>, <u>controller(0-127)</u>, <u>value(0-127)</u>)
       ('patch_change', <u>starttime</u>, <u>channel</u>, <u>patch</u>)
       ('channel_after_touch', <u>starttime</u>, <u>channel</u>, <u>velocity</u>)
       ('pitch_wheel_change', <u>starttime</u>, <u>channel</u>, <u>pitch_wheel</u>)
       ('set_sequence_number', <u>starttime</u>, <u>sequence</u>)
       ('text_event', <u>starttime</u>, <u>text</u>)
       ('copyright_text_event', <u>starttime</u>, <u>text</u>)
       ('track_name', <u>starttime</u>, <u>text</u>)
       ('instrument_name', <u>starttime</u>, <u>text</u>)
       ('lyric', <u>starttime</u>, <u>text</u>)
       ('marker', <u>starttime</u>, <u>text</u>)
       ('cue_point', <u>starttime</u>, <u>text</u>)
       ('text_event_08', <u>starttime</u>, <u>text</u>)
       ('text_event_09', <u>starttime</u>, <u>text</u>)
       ('text_event_0a', <u>starttime</u>, <u>text</u>)
       ('text_event_0b', <u>starttime</u>, <u>text</u>)
       ('text_event_0c', <u>starttime</u>, <u>text</u>)
       ('text_event_0d', <u>starttime</u>, <u>text</u>)
       ('text_event_0e', <u>starttime</u>, <u>text</u>)
       ('text_event_0f', <u>starttime</u>, <u>text</u>)
       ('end_track', <u>starttime</u>)
       ('set_tempo', <u>starttime</u>, <u>tempo</u>)
       ('smpte_offset', <u>starttime</u>, <u>hr</u>, <u>mn</u>, <u>se</u>, <u>fr</u>, <u>ff</u>)
       ('time_signature', <u>starttime</u>, <u>nn</u>, <u>dd</u>, <u>cc</u>, <u>bb</u>)
       ('key_signature', <u>starttime</u>, <u>sf</u>, <u>mi</u>)
       ('sequencer_specific', <u>starttime</u>, <u>raw</u>)
       ('raw_meta_event', <u>starttime</u>, <u>command</u>(0-255), <u>raw</u>)
       ('sysex_f0', <u>starttime</u>, <u>raw</u>)
       ('sysex_f7', <u>starttime</u>, <u>raw</u>)
       ('song_position', <u>starttime</u>)
       ('song_select', <u>starttime</u>, <u>song_number</u>)
       ('tune_request', <u>starttime</u>)
       ('raw_data', <u>starttime</u>, <u>raw</u>)

</pre><h4><b>FUNCTIONS</b></h4><pre>
       This module provides these functions:

       $score2_r = MIDI::Score::copy_structure($score_r)
           This takes a <u>reference</u> to a score structure, and returns a <u>reference</u> to a copy of it. Example usage:

                     @new_score = @{ MIDI::Score::copy_structure( \@old_score ) };

       $events_r = MIDI::Score::score_r_to_events_r( $score_r )
       ($events_r, $ticks) = MIDI::Score::score_r_to_events_r( $score_r )
           This  takes a <u>reference</u> to a score structure, and converts it to an event structure, which it returns
           a <u>reference</u> to.  In list context, also returns a second value, a count of the number  of  ticks  that
           structure takes to play (i.e., the end-time of the temporally last item).

       $score2_r = MIDI::Score::sort_score_r( $score_r)
           This  takes  a  <u>reference</u> to a score structure, and returns a <u>reference</u> to a sorted (by time) copy of
           it. Example usage:

                     @sorted_score = @{ MIDI::Score::sort_score_r( \@old_score ) };

       $score_r = MIDI::Score::events_r_to_score_r( $events_r )
       ($score_r, $ticks) = MIDI::Score::events_r_to_score_r( $events_r )
           This takes a <u>reference</u> to an event structure, converts it to a score structure, which  it  returns  a
           <u>reference</u>  to.  If called in list context, also returns a count of the number of ticks that structure
           takes to play (i.e., the end-time of the temporally last item).

       $ticks = MIDI::Score::score_r_time( $score_r )
           This takes a <u>reference</u> to a score structure, and  returns  a  count  of  the  number  of  ticks  that
           structure takes to play (i.e., the end-time of the temporally last item).

       MIDI::Score::dump_score( $score_r )
           This  dumps  (via  "print")  a  text representation of the contents of the event structure you pass a
           reference to.

       MIDI::Score::quantize( $score_r )
           This takes a <u>reference</u> to a score structure, performs a grid quantize on all events, returning a  new
           score  reference  with  new  quantized  events.   Two  parameters  to  the  method  are:  'grid': the
           quantization grid, and 'durations': whether or not to also quantize event durations (default off).

           When durations of note events are quantized, they can get 0 duration.  These events are  <u>not</u>  <u>dropped</u>
           from the returned score, and it is the responsibility of the caller to deal with them.

       MIDI::Score::skyline( $score_r )
           This  takes  a  <u>reference</u>  to  a  score  structure,  performs  skyline  (create a monophonic track by
           extracting the event with highest pitch at unique onset times) on the score, returning  a  new  score
           reference.   The  parameters  to  the method is: 'clip': whether durations of events are preserved or
           possibly clipped and modified.

           To explain this, consider the following (from Bach 2 part invention no.6 in E major):

                |------e------|-------ds--------|-------d------|...
           |****--E-----|-------Fs-------|------Gs-----|...

           Without duration cliping, the skyline is E, Fs, Gs...

           With duration clipping, the skyline is E, e, ds, d..., where the duration of E is clipped to just the
           * portion above

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 1998-2002 Sean M. Burke. All rights reserved.

       This library is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

</pre><h4><b>AUTHORS</b></h4><pre>
       Sean M. Burke "<a href="mailto:sburke@cpan.org">sburke@cpan.org</a>" (until 2010)

       Darrell Conklin "<a href="mailto:conklin@cpan.org">conklin@cpan.org</a>" (from 2010)

perl v5.36.0                                       2023-10-28                                   <u>MIDI::<a href="../man3pm/Score.3pm.html">Score</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>