<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net::DBus::Test::MockObject - Fake an object from the bus for unit testing</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnet-dbus-perl">libnet-dbus-perl_1.2.0-2build4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Net::DBus::Test::MockObject - Fake an object from the bus for unit testing

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Net::DBus;
         use Net::DBus::Test::MockObject;

         my $bus = Net::DBus-&gt;test

         # Lets fake presence of HAL...

         # First we need to define the service
         my $service = $bus-&gt;export_service("org.freedesktop.Hal");

         # Then create a mock object
         my $object = Net::DBus::Test::MockObject-&gt;new($service,
                                                       "/org/freedesktop/Hal/Manager");

         # Fake the 'GetAllDevices' method
         $object-&gt;seed_action("org.freedesktop.Hal.Manager",
                              "GetAllDevices",
                              reply =&gt; {
                                return =&gt; [ "/org/freedesktop/Hal/devices/computer_i8042_Aux_Port",
                                            "/org/freedesktop/Hal/devices/computer_i8042_Aux_Port_logicaldev_input",
                                            "/org/freedesktop/Hal/devices/computer_i8042_Kbd_Port",
                                            "/org/freedesktop/Hal/devices/computer_i8042_Kbd_Port_logicaldev_input"
                                ],
                              });

         # Now can test any class which calls out to 'GetAllDevices' in HAL
         ....test stuff....

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This provides an alternate for Net::DBus::Object to enable bus objects to be quickly mocked up, thus
       facilitating creation of unit tests for services which may need to call out to objects provided by 3rd
       party services on the bus. It is typically used as a companion to the Net::DBus::MockBus object, to
       enable complex services to be tested without actually starting a real bus.

       !!!!! WARNING !!!

       This object &amp; its APIs should be considered very experimental at this point in time, and no guarantees
       about future API compatibility are provided what-so-ever. Comments &amp; suggestions on how to evolve this
       framework are, however, welcome &amp; encouraged.

</pre><h4><b>METHODS</b></h4><pre>
       my $object = Net::DBus::Test::MockObject-&gt;new($service, $path, $interface);
           Create  a  new mock object, attaching to the service defined by the $service parameter. This would be
           an instance of the Net::DBus::Service object. The $path parameter defines the object path at which to
           attach this mock object, and $interface defines the interface it will support.

       my $service = $object-&gt;get_service
           Retrieves the Net::DBus::Service object within which this object is exported.

       my $path = $object-&gt;get_object_path
           Retrieves the path under which this object is exported

       my $msg = $object-&gt;get_last_message
           Retrieves the last message  processed  by  this  object.  The  returned  object  is  an  instance  of
           Net::DBus::Binding::Message

       my $sig = $object-&gt;get_last_message_signature
           Retrieves the type signature of the last processed message.

       my $value = $object-&gt;get_last_message_param
           Returns the first value supplied as an argument to the last processed message.

       my @values = $object-&gt;get_last_message_param_list
           Returns a list of all the values supplied as arguments to the last processed message.

       $object-&gt;seed_action($interface, $method, %action);
           Registers  an  action  to  be performed when a message corresponding to the method $method within the
           interface $interface is received. The %action parameter can have a number of possible keys set:

           signals
               Causes a signal to be emitted when the method is invoked. The  value  associated  with  this  key
               should be an instance of the Net::DBus::Binding::Message::Signal class.

           error
               Causes  an  error  to be generated when the method is invoked. The value associated with this key
               should be a hash reference, with two elements. The first, "name", giving the error name, and  the
               second, "description", providing the descriptive text.

           reply
               Causes  a  normal  method return to be generated. The value associated with this key should be an
               array reference, whose elements are the values to be returned by the method.

</pre><h4><b>BUGS</b></h4><pre>
       It doesn't completely replicate the API of Net::DBus::Binding::Object, merely enough  to  make  the  high
       level bindings work in a test scenario.

</pre><h4><b>AUTHOR</b></h4><pre>
       Daniel P. Berrange

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2004-2009 Daniel P. Berrange

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Net::DBus, Net::DBus::Object, Net::DBus::Test::MockConnection, &lt;<a href="http://www.mockobjects.com/Faq.html">http://www.mockobjects.com/Faq.html</a>&gt;

perl v5.40.0                                       2024-10-20                   <u>Net::DBus::Test::<a href="../man3pm/MockObject.3pm.html">MockObject</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>