<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mtbl_writer - create an MTBL file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmtbl-dev">libmtbl-dev_1.6.1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mtbl_writer - create an MTBL file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;mtbl.h&gt;</b>

       Writer objects:

       <b>struct</b> <b>mtbl_writer</b> <b>*</b>
       <b>mtbl_writer_init(const</b> <b>char</b> <b>*</b><u>fname</u><b>,</b> <b>const</b> <b>struct</b> <b>mtbl_writer_options</b> <b>*</b><u>wopt</u><b>);</b>

       <b>struct</b> <b>mtbl_writer</b> <b>*</b>
       <b>mtbl_writer_init_fd(int</b> <u>fd</u><b>,</b> <b>const</b> <b>struct</b> <b>mtbl_writer_options</b> <b>*</b><u>wopt</u><b>);</b>

       <b>void</b>
       <b>mtbl_writer_destroy(struct</b> <b>mtbl_writer</b> <b>**</b><u>w</u><b>);</b>

       <b>mtbl_res</b>
       <b>mtbl_writer_add(struct</b> <b>mtbl_writer</b> <b>*</b><u>w</u><b>,</b>
               <b>const</b> <b>uint8_t</b> <b>*</b><u>key</u><b>,</b> <b>size_t</b> <u>len_key</u><b>,</b>
               <b>const</b> <b>uint8_t</b> <b>*</b><u>val</u><b>,</b> <b>size_t</b> <u>len_val</u><b>);</b>

       Writer options:

       <b>struct</b> <b>mtbl_writer_options</b> <b>*</b>
       <b>mtbl_writer_options_init(void);</b>

       <b>void</b>
       <b>mtbl_writer_options_destroy(struct</b> <b>mtbl_writer_options</b> <b>**</b><u>wopt</u><b>);</b>

       <b>void</b>
       <b>mtbl_writer_options_set_compression(</b>
               <b>struct</b> <b>mtbl_writer_options</b> <b>*</b><u>wopt</u><b>,</b>
               <b>mtbl_compression_type</b> <u>compression_type</u><b>);</b>

       <b>void</b>
       <b>mtbl_writer_options_set_compression_level(</b>
               <b>struct</b> <b>mtbl_writer_options</b> <b>*</b><u>wopt</u><b>,</b>
               <b>int</b> <u>compression_level</u><b>);</b>

       <b>void</b>
       <b>mtbl_writer_options_set_block_size(</b>
               <b>struct</b> <b>mtbl_writer_options</b> <b>*</b><u>wopt</u><b>,</b>
               <b>size_t</b> <u>block_size</u><b>);</b>

       <b>void</b>
       <b>mtbl_writer_options_set_block_restart_interval(</b>
               <b>struct</b> <b>mtbl_writer_options</b> <b>*</b><u>wopt</u><b>,</b>
               <b>size_t</b> <u>block_restart_interval</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       MTBL files are written to disk by creating an <b>mtbl_writer</b> object, calling <b>mtbl_writer_add</b>() for each
       key-value entry, and then calling <b>mtbl_writer_destroy</b>().

       <b>mtbl_writer_add</b>() copies key-value pairs from the caller into the <b>mtbl_writer</b> object. Keys are specified
       as a pointer to a buffer, <u>key</u>, and the length of that buffer, <u>len_key</u>. Values are specified as a pointer
       to a buffer, <u>val</u>, and the length of that buffer, <u>len_val</u>.

       Keys must be in sorted, lexicographical byte order. The same key may not be added to an <b>mtbl_writer</b> more
       than once. If the input entries are not sorted or may contain duplicate keys, then the <b><a href="../man3/mtbl_sorter.3.html">mtbl_sorter</a></b>(3)
       interface should be used instead.

       <b>mtbl_writer</b> objects may be created by calling <b>mtbl_writer_init</b>() with an <u>fname</u> argument specifying a
       filename to be created. The filename must not already exist on the filesystem. Or, <b>mtbl_writer_init_fd</b>()
       may be called with an <u>fd</u> argument specifying an open, writable file descriptor. Prior to the call, moving
       <u>fd</u>'s cursor via <b><a href="../man2/write.2.html">write</a></b>(2) or <b><a href="../man2/lseek.2.html">lseek</a></b>(2) will have the effect of reserving the fileâ€™s initial bytes for
       non-MTBL use. MTBL will only write at, or above the current offset. Thereafter, only <b>mtbl_writer</b> may
       access this <u>fd</u> (including closing it), and no other writes may be made to the underlying file above the
       first offset of the MTBL data. The MTBL data must be last in the file.

       If the <u>wopt</u> parameter to <b>mtbl_writer_init</b>() or <b>mtbl_writer_init_fd</b>() is non-NULL, the parameters
       specified in the <b>mtbl_writer_options</b> object will be configured into the <b>mtbl_writer</b> object.

   <b>Writer</b> <b>options</b>
       <b>compression</b>

           Specifies the compression algorithm to use on data blocks. Possible values are <b>MTBL_COMPRESSION_NONE</b>,
           <b>MTBL_COMPRESSION_SNAPPY</b>, <b>MTBL_COMPRESSION_LZ4</b>, <b>MTBL_COMPRESSION_LZ4HC</b>, <b>MTBL_COMPRESSION_ZSTD</b>, or
           <b>MTBL_COMPRESSION_ZLIB</b> (the default).

       <b>compression_level</b>

           Specifies the compression level to use on data blocks, if the selected compression algorithm supports
           different compression levels. The compression algorithms which support different compression levels
           are <b>MTBL_COMPRESSION_LZ4HC</b> (0-16), <b>MTBL_COMPRESSION_ZSTD</b> (1-22), and <b>MTBL_COMPRESSION_ZLIB</b> (0-9).
           Other compression algorithms ignore this option, and compression levels outside the ranges supported
           by the algorithm will be silently clamped to the minimum or maximum supported level. If not
           specified, a reasonable default will be used.

       <b>block_size</b>

           The maximum size of uncompressed data blocks, specified in bytes. The default is 8 kilobytes.

       <b>block_restart_interval</b>

           How frequently to restart intra-block key prefix compression. The default is every 16 keys.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>mtbl_writer_init</b>() and <b>mtbl_writer_init_fd</b>() return NULL on failure, and non-NULL on success.

       <b>mtbl_writer_add</b>() returns <b>mtbl_res_success</b> if the key-value entry was successfully copied into the
       <b>mtbl_writer</b> object, and <b>mtbl_res_failure</b> if not, for instance if there has been a key-ordering violation.

                                                   12/11/2016                                     <u><a href="../man3/MTBL_WRITER.3.html">MTBL_WRITER</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>