<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcfdb - the fixed-length database API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtokyocabinet-dev">libtokyocabinet-dev_1.4.48-15.1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcfdb - the fixed-length database API

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Fixed-length  database  is  a  file  containing an array of fixed-length elements and is handled with the
       fixed-length database API.

       To use the fixed-length database API, include `<b>tcutil.h</b>', `<b>tcfdb.h</b>', and related standard  header  files.
       Usually, write the following description near the front of a source file.

              <b>#include</b> <b>&lt;tcutil.h&gt;</b>
              <b>#include</b> <b>&lt;tcfdb.h&gt;</b>
              <b>#include</b> <b>&lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;</b>
              <b>#include</b> <b>&lt;stdbool.h&gt;</b>
              <b>#include</b> <b>&lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;</b>

       Objects  whose  type  is  pointer  to  `<b>TCFDB</b>' are used to handle fixed-length databases.  A fixed-length
       database object is created with the function `<b>tcfdbnew</b>' and is deleted with the function `<b>tcfdbdel</b>'.   To
       avoid memory leak, it is important to delete every object when it is no longer in use.

       Before  operations  to store or retrieve records, it is necessary to open a database file and connect the
       fixed-length database object to it.  The function `<b>tcfdbopen</b>' is used to open a  database  file  and  the
       function  `<b>tcfdbclose</b>'  is  used  to close the database file.  To avoid data missing or corruption, it is
       important to close every database file when it is no  longer  in  use.   It  is  forbidden  for  multiple
       database objects in a process to open the same database at the same time.

</pre><h4><b>API</b></h4><pre>
       The function `tcfdberrmsg' is used in order to get the message string corresponding to an error code.

              <b>const</b> <b>char</b> <b>*tcfdberrmsg(int</b> <u>ecode</u><b>);</b>
                     `<u>ecode</u>' specifies the error code.
                     The return value is the message string of the error code.

       The function `tcfdbnew' is used in order to create a fixed-length database object.

              <b>TCFDB</b> <b>*tcfdbnew(void);</b>
                     The return value is the new fixed-length database object.

       The function `tcfdbdel' is used in order to delete a fixed-length database object.

              <b>void</b> <b>tcfdbdel(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     If  the  database is not closed, it is closed implicitly.  Note that the deleted object and
                     its derivatives can not be used anymore.

       The function `tcfdbecode' is used in order to get the last happened error code of a fixed-length database
       object.

              <b>int</b> <b>tcfdbecode(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     The return value is the last happened error code.
                     The following error codes are defined: `TCESUCCESS' for success, `TCETHREAD' for  threading
                     error,  `TCEINVALID' for invalid operation, `TCENOFILE' for file not found, `TCENOPERM' for
                     no permission, `TCEMETA' for invalid meta  data,  `TCERHEAD'  for  invalid  record  header,
                     `TCEOPEN' for open error, `TCECLOSE' for close error, `TCETRUNC' for trunc error, `TCESYNC'
                     for  sync  error,  `TCESTAT'  for  stat error, `TCESEEK' for seek error, `TCEREAD' for read
                     error, `TCEWRITE' for write error, `TCEMMAP' for mmap  error,  `TCELOCK'  for  lock  error,
                     `TCEUNLINK'  for  unlink  error,  `TCERENAME' for rename error, `TCEMKDIR' for mkdir error,
                     `TCERMDIR' for rmdir error, `TCEKEEP' for existing record, `TCENOREC' for no record  found,
                     and `TCEMISC' for miscellaneous error.

       The  function `tcfdbsetmutex' is used in order to set mutual exclusion control of a fixed-length database
       object for threading.

              <b>bool</b> <b>tcfdbsetmutex(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object which is not opened.
                     If successful, the return value is true, else, it is false.
                     Note that the mutual exclusion control is needed if the object is shared by plural  threads
                     and this function should be called before the database is opened.

       The function `tcfdbtune' is used in order to set the tuning parameters of a fixed-length database object.

              <b>bool</b> <b>tcfdbtune(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int32_t</b> <u>width</u><b>,</b> <b>int64_t</b> <u>limsiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object which is not opened.
                     `<u>width</u>'  specifies  the  width  of the value of each record.  If it is not more than 0, the
                     default value is specified.  The default value is 255.
                     `<u>limsiz</u>' specifies the limit size of the database file.  If it is  not  more  than  0,  the
                     default value is specified.  The default value is 268435456.
                     If successful, the return value is true, else, it is false.
                     Note that the tuning parameters should be set before the database is opened.

       The  function  `tcfdbopen'  is  used in order to open a database file and connect a fixed-length database
       object.

              <b>bool</b> <b>tcfdbopen(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>path</u><b>,</b> <b>int</b> <u>omode</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object which is not opened.
                     `<u>path</u>' specifies the path of the database file.
                     `<u>omode</u>' specifies the connection mode: `FDBOWRITER' as a writer, `FDBOREADER' as a  reader.
                     If  the  mode is `FDBOWRITER', the following may be added by bitwise-or: `FDBOCREAT', which
                     means it creates a new database if not exist, `FDBOTRUNC', which means  it  creates  a  new
                     database  regardless if one exists, `FDBOTSYNC', which means every transaction synchronizes
                     updated contents with the device.  Both of `FDBOREADER' and `FDBOWRITER' can be added to by
                     bitwise-or: `FDBONOLCK', which means it opens the database file without  file  locking,  or
                     `FDBOLCKNB', which means locking is performed without blocking.
                     If successful, the return value is true, else, it is false.

       The function `tcfdbclose' is used in order to close a fixed-length database object.

              <b>bool</b> <b>tcfdbclose(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     If successful, the return value is true, else, it is false.
                     Update  of  a  database  is assured to be written when the database is closed.  If a writer
                     opens a database but does not close it appropriately, the database will be broken.

       The function `tcfdbput' is used in order to store a record into a fixed-length database object.

              <b>bool</b> <b>tcfdbput(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>id</u>' specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the  minimum
                     ID  number  of existing records is specified.  If it is `FDBIDPREV', the number less by one
                     than the minimum ID number of existing records is specified.   If  it  is  `FDBIDMAX',  the
                     maximum  ID  number  of  existing  records  is specified.  If it is `FDBIDNEXT', the number
                     greater by one than the maximum ID number of existing records is specified.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>' specifies the size of the region of the value.  If the size of the value is  greater
                     than the width tuning parameter of the database, the size is cut down to the width.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, it is overwritten.

       The  function  `tcfdbput2'  is  used  in  order  to store a record with a decimal key into a fixed-length
       database object.

              <b>bool</b> <b>tcfdbput2(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the decimal key.  It should be more  than  0.
                     If  it  is "min", the minimum ID number of existing records is specified.  If it is "prev",
                     the number less by one than the minimum ID number of existing records is specified.  If  it
                     is  "max",  the  maximum  ID number of existing records is specified.  If it is "next", the
                     number greater by one than the maximum ID number of existing records is specified.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>' specifies the size of the region of the value.  If the size of the value is  greater
                     than the width tuning parameter of the database, the size is cut down to the width.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, it is overwritten.

       The function `tcfdbput3' is used in order to store a string record with a decimal key into a fixed-length
       database object.

              <b>bool</b> <b>tcfdbput3(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vstr</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the decimal key.  It should be more than 0.  If it is "min",
                     the  minimum  ID number of existing records is specified.  If it is "prev", the number less
                     by one than the minimum ID number of existing records is specified.  If it  is  "max",  the
                     maximum ID number of existing records is specified.  If it is "next", the number greater by
                     one than the maximum ID number of existing records is specified.
                     `<u>vstr</u>' specifies the string of the value.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, it is overwritten.

       The function `tcfdbputkeep' is used in order to store a new record into a fixed-length database object.

              <b>bool</b> <b>tcfdbputkeep(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>id</u>'  specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the minimum
                     ID number of existing records is specified.  If it is `FDBIDPREV', the number less  by  one
                     than  the  minimum  ID  number  of existing records is specified.  If it is `FDBIDMAX', the
                     maximum ID number of existing records is specified.   If  it  is  `FDBIDNEXT',  the  number
                     greater by one than the maximum ID number of existing records is specified.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>'  specifies the size of the region of the value.  If the size of the value is greater
                     than the width tuning parameter of the database, the size is cut down to the width.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, this function has no effect.

       The function `tcfdbputkeep2' is used in  order  to  store  a  new  record  with  a  decimal  key  into  a
       fixed-length database object.

              <b>bool</b> <b>tcfdbputkeep2(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>kbuf</u>'  specifies  the pointer to the region of the decimal key.  It should be more than 0.
                     If it is "min", the minimum ID number of existing records is specified.  If it  is  "prev",
                     the  number less by one than the minimum ID number of existing records is specified.  If it
                     is "max", the maximum ID number of existing records is specified.  If  it  is  "next",  the
                     number greater by one than the maximum ID number of existing records is specified.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>'  specifies the size of the region of the value.  If the size of the value is greater
                     than the width tuning parameter of the database, the size is cut down to the width.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, this function has no effect.

       The function `tcfdbputkeep3' is used in order to store a new string record with  a  decimal  key  into  a
       fixed-length database object.

              <b>bool</b> <b>tcfdbputkeep3(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vstr</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the decimal key.  It should be more than 0.  If it is "min",
                     the  minimum  ID number of existing records is specified.  If it is "prev", the number less
                     by one than the minimum ID number of existing records is specified.  If it  is  "max",  the
                     maximum ID number of existing records is specified.  If it is "next", the number greater by
                     one than the maximum ID number of existing records is specified.
                     `<u>vstr</u>' specifies the string of the value.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, this function has no effect.

       The function `tcfdbputcat' is used in order to concatenate a value at the end of the existing record in a
       fixed-length database object.

              <b>bool</b> <b>tcfdbputcat(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>id</u>'  specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the minimum
                     ID number of existing records is specified.  If it is `FDBIDPREV', the number less  by  one
                     than  the  minimum  ID  number  of existing records is specified.  If it is `FDBIDMAX', the
                     maximum ID number of existing records is specified.   If  it  is  `FDBIDNEXT',  the  number
                     greater by one than the maximum ID number of existing records is specified.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>'  specifies the size of the region of the value.  If the size of the value is greater
                     than the width tuning parameter of the database, the size is cut down to the width.
                     If successful, the return value is true, else, it is false.
                     If there is no corresponding record, a new record is created.

       The function `tcfdbputcat2' is used in order to concatenate a value with a decimal key in a  fixed-length
       database object.

              <b>bool</b> <b>tcfdbputcat2(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>kbuf</u>'  specifies  the pointer to the region of the decimal key.  It should be more than 0.
                     If it is "min", the minimum ID number of existing records is specified.  If it  is  "prev",
                     the  number less by one than the minimum ID number of existing records is specified.  If it
                     is "max", the maximum ID number of existing records is specified.  If  it  is  "next",  the
                     number greater by one than the maximum ID number of existing records is specified.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>'  specifies the size of the region of the value.  If the size of the value is greater
                     than the width tuning parameter of the database, the size is cut down to the width.
                     If successful, the return value is true, else, it is false.
                     If there is no corresponding record, a new record is created.

       The function `tcfdbputcat3' is used in order to concatenate a string  value  with  a  decimal  key  in  a
       fixed-length database object.

              <b>bool</b> <b>tcfdbputcat3(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vstr</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the decimal key.  It should be more than 0.  If it is "min",
                     the  minimum  ID number of existing records is specified.  If it is "prev", the number less
                     by one than the minimum ID number of existing records is specified.  If it  is  "max",  the
                     maximum ID number of existing records is specified.  If it is "next", the number greater by
                     one than the maximum ID number of existing records is specified.
                     `<u>vstr</u>' specifies the string of the value.
                     If successful, the return value is true, else, it is false.
                     If there is no corresponding record, a new record is created.

       The function `tcfdbout' is used in order to remove a record of a fixed-length database object.

              <b>bool</b> <b>tcfdbout(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>id</u>'  specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the minimum
                     ID number of existing records is specified.  If it is `FDBIDMAX', the maximum ID number  of
                     existing records is specified.
                     If successful, the return value is true, else, it is false.

       The  function  `tcfdbout2'  is  used  in  order  to  remove a record with a decimal key of a fixed-length
       database object.

              <b>bool</b> <b>tcfdbout2(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the decimal key.  It should be more  than  0.
                     If  it  is  "min", the minimum ID number of existing records is specified.  If it is "max",
                     the maximum ID number of existing records is specified.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     If successful, the return value is true, else, it is false.

       The function `tcfdbout3' is used in order to remove a string record with a decimal key of a  fixed-length
       database object.

              <b>bool</b> <b>tcfdbout3(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the decimal key.  It should be more than 0.  If it is "min",
                     the  minimum  ID  number  of existing records is specified.  If it is "max", the maximum ID
                     number of existing records is specified.
                     If successful, the return value is true, else, it is false.

       The function `tcfdbget' is used in order to retrieve a record in a fixed-length database object.

              <b>void</b> <b>*tcfdbget(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>,</b> <b>int</b> <b>*</b><u>sp</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>id</u>' specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the  minimum
                     ID  number of existing records is specified.  If it is `FDBIDMAX', the maximum ID number of
                     existing records is specified.
                     `<u>sp</u>' specifies the pointer to the variable into which the size of the region of the  return
                     value is assigned.
                     If  successful,  the  return  value  is  the  pointer  to  the  region  of the value of the
                     corresponding record.  `NULL' is returned if no record corresponds.
                     Because an additional zero code is appended at the end of the region of the  return  value,
                     the  return  value  can be treated as a character string.  Because the region of the return
                     value is allocated with the `malloc' call, it should be released with the `free' call  when
                     it is no longer in use.

       The  function  `tcfdbget2'  is  used  in  order to retrieve a record with a decimal key in a fixed-length
       database object.

              <b>void</b> <b>*tcfdbget2(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>int</b> <b>*</b><u>sp</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>kbuf</u>' specifies the pointer to the region of the decimal key.  It should be more  than  0.
                     If  it  is  "min", the minimum ID number of existing records is specified.  If it is "max",
                     the maximum ID number of existing records is specified.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>sp</u>' specifies the pointer to the variable into which the size of the region of the  return
                     value is assigned.
                     If  successful,  the  return  value  is  the  pointer  to  the  region  of the value of the
                     corresponding record.  `NULL' is returned if no record corresponds.
                     Because an additional zero code is appended at the end of the region of the  return  value,
                     the  return  value  can be treated as a character string.  Because the region of the return
                     value is allocated with the `malloc' call, it should be released with the `free' call  when
                     it is no longer in use.

       The  function  `tcfdbget3'  is  used  in  order  to  retrieve  a  string  record  with a decimal key in a
       fixed-length database object.

              <b>char</b> <b>*tcfdbget3(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>kstr</u>' specifies the string of the decimal key.  It should be more than 0.  If it is "min",
                     the minimum ID number of existing records is specified.  If it is  "max",  the  maximum  ID
                     number of existing records is specified.
                     If  successful,  the  return  value is the string of the value of the corresponding record.
                     `NULL' is returned if no record corresponds.
                     Because an additional zero code is appended at the end of the region of the  return  value,
                     the  return  value  can be treated as a character string.  Because the region of the return
                     value is allocated with the `malloc' call, it should be released with the `free' call  when
                     it is no longer in use.

       The  function  `tcfdbget4'  is  used  in order to retrieve a record in a fixed-length database object and
       write the value into a buffer.

              <b>int</b> <b>tcfdbget4(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>,</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>max</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>id</u>' specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the  minimum
                     ID  number of existing records is specified.  If it is `FDBIDMAX', the maximum ID number of
                     existing records is specified.
                     `<u>vbuf</u>' specifies the pointer to the buffer into which the value of the corresponding record
                     is written.
                     `<u>max</u>' specifies the size of the buffer.
                     If successful, the return value is the size of the written data, else, it  is  -1.   -1  is
                     returned if no record corresponds to the specified key.
                     Note  that  an additional zero code is not appended at the end of the region of the writing
                     buffer.

       The function `tcfdbvsiz' is used in order to get the size of the value of  a  record  in  a  fixed-length
       database object.

              <b>int</b> <b>tcfdbvsiz(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>id</u>'  specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the minimum
                     ID number of existing records is specified.  If it is `FDBIDMAX', the maximum ID number  of
                     existing records is specified.
                     If successful, the return value is the size of the value of the corresponding record, else,
                     it is -1.

       The  function  `tcfdbvsiz2'  is  used  in  order  to  get  the  size of the value with a decimal key in a
       fixed-length database object.

              <b>int</b> <b>tcfdbvsiz2(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>kbuf</u>' specifies the pointer to the region of the decimal key.  It should be more  than  0.
                     If  it  is  "min", the minimum ID number of existing records is specified.  If it is "max",
                     the maximum ID number of existing records is specified.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     If successful, the return value is the size of the value of the corresponding record, else,
                     it is -1.

       The function `tcfdbvsiz3' is used in order to get the size of the string value with a decimal  key  in  a
       fixed-length database object.

              <b>int</b> <b>tcfdbvsiz3(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>kstr</u>' specifies the string of the decimal key.  It should be more than 0.  If it is "min",
                     the  minimum  ID  number  of existing records is specified.  If it is "max", the maximum ID
                     number of existing records is specified.
                     If successful, the return value is the size of the value of the corresponding record, else,
                     it is -1.

       The function `tcfdbiterinit' is used in order to initialize  the  iterator  of  a  fixed-length  database
       object.

              <b>bool</b> <b>tcfdbiterinit(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     If successful, the return value is true, else, it is false.
                     The iterator is used in order to access the key of every record stored in a database.

       The function `tcfdbiternext' is used in order to get the next ID number of the iterator of a fixed-length
       database object.

              <b>uint64_t</b> <b>tcfdbiternext(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     If successful, the return value is the next ID number of the iterator, else, it is 0.  0 is
                     returned when no record is to be get out of the iterator.
                     It is possible to access every record by iteration of calling this function.  It is allowed
                     to  update or remove records whose keys are fetched while the iteration.  The order of this
                     traversal access method is ascending of the ID number.

       The function `tcfdbiternext2' is used in order to  get  the  next  decimay  key  of  the  iterator  of  a
       fixed-length database object.

              <b>void</b> <b>*tcfdbiternext2(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int</b> <b>*</b><u>sp</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>sp</u>'  specifies the pointer to the variable into which the size of the region of the return
                     value is assigned.
                     If successful, the return value is the pointer to the region of the next decimal key, else,
                     it is `NULL'.  `NULL' is returned when no record is to be get out of the iterator.
                     Because an additional zero code is appended at the end of the region of the  return  value,
                     the  return  value  can be treated as a character string.  Because the region of the return
                     value is allocated with the `malloc' call, it should be released with the `free' call  when
                     it is no longer in use.  It is possible to access every record by iteration of calling this
                     function.   It  is  allowed  to  update  or remove records whose keys are fetched while the
                     iteration.  The order of this traversal access method is ascending of the ID number.

       The function `tcfdbiternext3' is used in order to get the next decimay key string of the  iterator  of  a
       fixed-length database object.

              <b>char</b> <b>*tcfdbiternext3(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     If  successful, the return value is the string of the next decimal key, else, it is `NULL'.
                     `NULL' is returned when no record is to be get out of the iterator.
                     Because the region of the return value is allocated with the `malloc' call,  it  should  be
                     released  with the `free' call when it is no longer in use.  It is possible to access every
                     record by iteration of calling this function.  It is allowed to update  or  remove  records
                     whose  keys  are fetched while the iteration.  The order of this traversal access method is
                     ascending of the ID number.

       The function `tcfdbrange' is used in order to get range matching ID numbers in  a  fixed-length  database
       object.

              <b>uint64_t</b> <b>*tcfdbrange(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>lower</u><b>,</b> <b>int64_t</b> <u>upper</u><b>,</b> <b>int</b> <u>max</u><b>,</b> <b>int</b> <b>*</b><u>np</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>lower</u>'  specifies  the  lower  limit of the range.  If it is `FDBIDMIN', the minimum ID is
                     specified.
                     `<u>upper</u>' specifies the upper limit of the range.  If it is `FDBIDMAX',  the  maximum  ID  is
                     specified.
                     `<u>max</u>'  specifies  the maximum number of keys to be fetched.  If it is negative, no limit is
                     specified.
                     `<u>np</u>' specifies the pointer to the variable into which the number of elements of the  return
                     value is assigned.
                     If  successful,  the  return  value  is  the  pointer  to  an  array  of  ID numbers of the
                     corresponding records.  `NULL' is returned on failure.  This function does never fail.   It
                     returns an empty array even if no key corresponds.
                     Because  the  region  of the return value is allocated with the `malloc' call, it should be
                     released with the `free' call when it is no longer in use.

       The function `tcfdbrange2' is used in order to get range matching decimal keys in a fixed-length database
       object.

              <b>TCLIST</b> <b>*tcfdbrange2(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>lbuf</u><b>,</b> <b>int</b> <u>lsiz</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>ubuf</u><b>,</b> <b>int</b> <u>usiz</u><b>,</b> <b>int</b> <u>max</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>lbuf</u>' specifies the pointer to the region of the lower key.  If it is "min",  the  minimum
                     ID number of existing records is specified.
                     `<u>lsiz</u>' specifies the size of the region of the lower key.
                     `<u>ubuf</u>'  specifies  the pointer to the region of the upper key.  If it is "max", the maximum
                     ID number of existing records is specified.
                     `<u>usiz</u>' specifies the size of the region of the upper key.
                     `<u>max</u>' specifies the maximum number of keys to be fetched.  If it is negative, no  limit  is
                     specified.
                     The  return  value  is a list object of the corresponding decimal keys.  This function does
                     never fail.  It returns an empty list even if no key corresponds.
                     Because the object of the return value is created with the function `tclistnew', it  should
                     be  deleted  with  the  function  `tclistdel'  when it is no longer in use.  Note that this
                     function may be very slow because every key in the database is scanned.

       The function `tcfdbrange3' is used in order to  get  range  matching  decimal  keys  with  strings  in  a
       fixed-length database object.

              <b>TCLIST</b> <b>*tcfdbrange3(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>lstr</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>ustr</u><b>,</b> <b>int</b> <u>max</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>lstr</u>'  specifies  the  string  of the lower key.  If it is "min", the minimum ID number of
                     existing records is specified.
                     `<u>ustr</u>' specifies the string of the upper key.  If it is "max", the  maximum  ID  number  of
                     existing records is specified.
                     `<u>max</u>'  specifies  the maximum number of keys to be fetched.  If it is negative, no limit is
                     specified.
                     The return value is a list object of the corresponding decimal keys.   This  function  does
                     never fail.  It returns an empty list even if no key corresponds.
                     Because  the object of the return value is created with the function `tclistnew', it should
                     be deleted with the function `tclistdel' when it is no  longer  in  use.   Note  that  this
                     function may be very slow because every key in the database is scanned.

       The  function  `tcfdbrange4'  is  used  in  order to get keys with an interval notation in a fixed-length
       database object.

              <b>TCLIST</b> <b>*tcfdbrange4(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>ibuf</u><b>,</b> <b>int</b> <u>isiz</u><b>,</b> <b>int</b> <u>max</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>ibuf</u>' specifies the pointer to the region of the interval notation.
                     `<u>isiz</u>' specifies the size of the region of the interval notation.
                     `<u>max</u>' specifies the maximum number of keys to be fetched.  If it is negative, no  limit  is
                     specified.
                     The  return  value  is a list object of the corresponding decimal keys.  This function does
                     never fail.  It returns an empty list even if no key corresponds.
                     Because the object of the return value is created with the function `tclistnew', it  should
                     be  deleted  with  the  function  `tclistdel'  when it is no longer in use.  Note that this
                     function may be very slow because every key in the database is scanned.

       The function `tcfdbrange5' is used  in  order  to  get  keys  with  an  interval  notation  string  in  a
       fixed-length database object.

              <b>TCLIST</b> <b>*tcfdbrange5(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>istr</u><b>,</b> <b>int</b> <u>max</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>istr</u>' specifies the pointer to the region of the interval notation string.
                     `<u>max</u>'  specifies  the maximum number of keys to be fetched.  If it is negative, no limit is
                     specified.
                     The return value is a list object of the corresponding decimal keys.   This  function  does
                     never fail.  It returns an empty list even if no key corresponds.
                     Because  the object of the return value is created with the function `tclistnew', it should
                     be deleted with the function `tclistdel' when it is no  longer  in  use.   Note  that  this
                     function may be very slow because every key in the database is scanned.

       The  function  `tcfdbaddint'  is  used  in order to add an integer to a record in a fixed-length database
       object.

              <b>int</b> <b>tcfdbaddint(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>,</b> <b>int</b> <u>num</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>id</u>' specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the  minimum
                     ID  number  of existing records is specified.  If it is `FDBIDPREV', the number less by one
                     than the minimum ID number of existing records is specified.   If  it  is  `FDBIDMAX',  the
                     maximum  ID  number  of  existing  records  is specified.  If it is `FDBIDNEXT', the number
                     greater by one than the maximum ID number of existing records is specified.
                     `<u>num</u>' specifies the additional value.
                     If successful, the return value is the summation value, else, it is `INT_MIN'.
                     If the corresponding record exists, the value is treated as an integer and is added to.  If
                     no record corresponds, a new record of the additional value is stored.

       The function `tcfdbadddouble' is used in order to add a  real  number  to  a  record  in  a  fixed-length
       database object.

              <b>double</b> <b>tcfdbadddouble(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int64_t</b> <u>id</u><b>,</b> <b>double</b> <u>num</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>id</u>'  specifies the ID number.  It should be more than 0.  If it is `FDBIDMIN', the minimum
                     ID number of existing records is specified.  If it is `FDBIDPREV', the number less  by  one
                     than  the  minimum  ID  number  of existing records is specified.  If it is `FDBIDMAX', the
                     maximum ID number of existing records is specified.   If  it  is  `FDBIDNEXT',  the  number
                     greater by one than the maximum ID number of existing records is specified.
                     `<u>num</u>' specifies the additional value.
                     If successful, the return value is the summation value, else, it is Not-a-Number.
                     If  the corresponding record exists, the value is treated as a real number and is added to.
                     If no record corresponds, a new record of the additional value is stored.

       The function `tcfdbsync' is used in order to synchronize updated  contents  of  a  fixed-length  database
       object with the file and the device.

              <b>bool</b> <b>tcfdbsync(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     If successful, the return value is true, else, it is false.
                     This function is useful when another process connects to the same database file.

       The function `tcfdboptimize' is used in order to optimize the file of a fixed-length database object.

              <b>bool</b> <b>tcfdboptimize(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>int32_t</b> <u>width</u><b>,</b> <b>int64_t</b> <u>limsiz</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     `<u>width</u>'  specifies  the  width  of the value of each record.  If it is not more than 0, the
                     current setting is not changed.
                     `<u>limsiz</u>' specifies the limit size of the database file.  If it is  not  more  than  0,  the
                     current setting is not changed.
                     If successful, the return value is true, else, it is false.

       The function `tcfdbvanish' is used in order to remove all records of a fixed-length database object.

              <b>bool</b> <b>tcfdbvanish(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     If successful, the return value is true, else, it is false.

       The function `tcfdbcopy' is used in order to copy the database file of a fixed-length database object.

              <b>bool</b> <b>tcfdbcopy(TCFDB</b> <b>*</b><u>fdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>path</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     `<u>path</u>'  specifies  the  path  of the destination file.  If it begins with `@', the trailing
                     substring is executed as a command line.
                     If successful, the return value is true, else, it is  false.   False  is  returned  if  the
                     executed command returns non-zero code.
                     The  database file is assured to be kept synchronized and not modified while the copying or
                     executing operation is in progress.  So, this function is useful to create a backup file of
                     the database file.

       The function `tcfdbtranbegin' is used in order to  begin  the  transaction  of  a  fixed-length  database
       object.

              <b>bool</b> <b>tcfdbtranbegin(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     If successful, the return value is true, else, it is false.
                     The database is locked by the thread while the transaction so that only one transaction can
                     be  activated  with  a  database object at the same time.  Thus, the serializable isolation
                     level is assumed if every database operation is performed in the transaction.  All  updated
                     regions are kept track of by write ahead logging while the transaction.  If the database is
                     closed during transaction, the transaction is aborted implicitly.

       The  function  `tcfdbtrancommit'  is  used  in order to commit the transaction of a fixed-length database
       object.

              <b>bool</b> <b>tcfdbtrancommit(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     If successful, the return value is true, else, it is false.
                     Update in the transaction is fixed when it is committed successfully.

       The function `tcfdbtranabort' is used in order to  abort  the  transaction  of  a  fixed-length  database
       object.

              <b>bool</b> <b>tcfdbtranabort(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object connected as a writer.
                     If successful, the return value is true, else, it is false.
                     Update  in  the  transaction is discarded when it is aborted.  The state of the database is
                     rollbacked to before transaction.

       The function `tcfdbpath' is used in order to get the file path of a fixed-length database object.

              <b>const</b> <b>char</b> <b>*tcfdbpath(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     The return value is the path of the database file or `NULL' if the object does not  connect
                     to any database file.

       The function `tcfdbrnum' is used in order to get the number of records of a fixed-length database object.

              <b>uint64_t</b> <b>tcfdbrnum(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     The  return  value  is  the  number  of  records or 0 if the object does not connect to any
                     database file.

       The function `tcfdbfsiz' is used in order to get the size of the database file of a fixed-length database
       object.

              <b>uint64_t</b> <b>tcfdbfsiz(TCFDB</b> <b>*</b><u>fdb</u><b>);</b>
                     `<u>fdb</u>' specifies the fixed-length database object.
                     The return value is the size of the database file or 0 if the object does  not  connect  to
                     any database file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/tcftest.1.html">tcftest</a></b>(1), <b><a href="../man1/tcfmttest.1.html">tcfmttest</a></b>(1), <b><a href="../man1/tcfmgr.1.html">tcfmgr</a></b>(1), <b><a href="../man3/tokyocabinet.3.html">tokyocabinet</a></b>(3)

Man Page                                           2012-08-18                                           <u><a href="../man3/TCFDB.3.html">TCFDB</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>