<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TSUrlPercentEncode - traffic Server URL percent encoding API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/trafficserver-dev">trafficserver-dev_9.2.5+ds-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       TSUrlPercentEncode - traffic Server URL percent encoding API

</pre><h4><b>SYNOPSIS</b></h4><pre>
          #include &lt;ts/ts.h&gt;

       <u>TSReturnCode</u> <b>TSUrlPercentEncode(</b><u>TSMBuffer</u> <b>bufp,</b> <u>TSMLoc</u> <b>offset,</b> <b>char</b> <b>*dst,</b> <b>size_t</b> <b>dst_size,</b> <b>size_t</b>
       <b>*length,</b> <b>const</b> <b>unsigned</b> <b>char</b> <b>*map)</b>

       <u>TSReturnCode</u> <b>TSStringPercentEncode(const</b> <b>char</b> <b>*str,</b> <b>int</b> <b>str_len,</b> <b>char</b> <b>*dst,</b> <b>size_t</b> <b>dst_size,</b> <b>size_t</b>
       <b>*length,</b> <b>const</b> <b>unsigned</b> <b>char</b> <b>*map)</b>

       <u>TSReturnCode</u> <b>TSStringPercentDecode(const</b> <b>char</b> <b>*str,</b> <b>size_t</b> <b>str_len,</b> <b>char</b> <b>*dst,</b> <b>size_t</b> <b>dst_size,</b> <b>size_t</b>
       <b>*length)</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  URL  data  structure  is  a  parsed  version  of a standard internet URL. The Traffic Server URL API
       provides access to URL data stored in marshal buffers. The URL functions can create,  copy,  retrieve  or
       delete entire URLs, and retrieve or modify parts of URLs, such as their host, port or scheme information.

       <u>TSUrlPercentEncode()</u>  performs  percent-encoding  of  the  URL  object, storing the new string in the <u>dst</u>
       buffer. The <u>length</u> parameter will be set to the new (encoded) string length, or <b>0</b> if the encoding failed.
       <u>TSStringPercentEncode()</u> is similar but operates on a string. If the optional <u>map</u>  parameter  is  provided
       (not <b>NULL</b>) , it should be a map of characters to encode.

       <u>TSStringPercentDecode()</u>  perform  percent-decoding  of  the  string in the <u>str</u> buffer, writing to the <u>dst</u>
       buffer. The source and destination can be the same, in which case the decoded string is written on top of
       the source string. The decoded string is guaranteed to be no longer than  the  source  string,  but  will
       include  a  terminating  null  which,  if there are no escapes, makes the destination one longer than the
       source. In practice this means the destination length needs to be bumped up by one  to  account  for  the
       null,  and  a string can't be decoded in place if it's not already null terminated with the length of the
       destination including the null, but the length of the source <u>not</u> including the null. E.g.

          static char const ORIGINAL[] = "A string without escapes, but null terminated";
          char * source = TSstrdup(ORIGINAL); // make it writeable.
          size_t length; // return value.
          // sizeof(ORIGINAL) includes the null, so don't include that in the input.
          static const size_t N_CHARS = sizeof(ORIGINAL) - 1;
          TSReturnCode result = TSStringPercentDecode(source, N_CHARS, source, N_CHARS + 1, &amp;length);
          ink_assert(length == N_CHARS);

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       All these APIs returns a <u>TSReturnCode</u>, indicating success  (<u>TS_SUCCESS</u>)  or  failure  (<u>TS_ERROR</u>)  of  the
       operation.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3ts/TSAPI.3ts.html">TSAPI</a>(3ts)</b>, <b><a href="../man3ts/TSUrlCreate.3ts.html">TSUrlCreate</a>(3ts)</b>, <b><a href="../man3ts/TSUrlHostGet.3ts.html">TSUrlHostGet</a>(3ts)</b>, <b><a href="../man3ts/TSUrlHostSet.3ts.html">TSUrlHostSet</a>(3ts)</b>, <b><a href="../man3ts/TSUrlStringGet.3ts.html">TSUrlStringGet</a>(3ts)</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2025, <a href="mailto:dev@trafficserver.apache.org">dev@trafficserver.apache.org</a>

9.2                                               May 22, 2025                           <u><a href="../man3ts/TSURLPERCENTENCODE.3ts.html">TSURLPERCENTENCODE</a></u>(3ts)
</pre>
 </div>
</div></section>
</div>
</body>
</html>