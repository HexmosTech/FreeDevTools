<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Authen::Krb5::Admin - Perl extension for MIT Kerberos 5 admin interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libauthen-krb5-admin-perl">libauthen-krb5-admin-perl_0.17-5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Authen::Krb5::Admin - Perl extension for MIT Kerberos 5 admin interface

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Authen::Krb5::Admin;
         use Authen::Krb5::Admin qw(:constants);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>Authen::Krb5::Admin</b> Perl module is an object-oriented interface to the Kerberos 5 admin server.
       Currently only MIT KDCs are supported, but the author envisions seamless integration with other KDCs.

       The following classes are provided by this module:

        Authen::Krb5::Admin             handle for performing kadmin operations
        Authen::Krb5::Admin::Config     kadmin configuration parameters
        Authen::Krb5::Admin::Key        key data from principal object
        Authen::Krb5::Admin::Policy     kadmin policies
        Authen::Krb5::Admin::Principal  kadmin principals

   <b>Configuration</b> <b>Parameters,</b> <b>Policies,</b> <b>and</b> <b>Principals</b>
       Before performing kadmin operations, the programmer must construct objects to represent the entities to
       be manipulated.  Each of the classes

               Authen::Krb5::Admin::Config
               Authen::Krb5::Admin::Key
               Authen::Krb5::Admin::Policy
               Authen::Krb5::Admin::Principal

       has a constructor <u>new</u> which takes no arguments (except for the class name).  The new object may be
       populated using accessor methods, each of which is named for the C struct element it represents.  Methods
       always return the current value of the attribute, except for the <u>policy_clear</u> method, which returns
       nothing.  If a value is provided, the attribute is set to that value, and the new value is returned.

       All attributes may be modified in each object, but read-only attributes will be ignored when performing
       kadmin operations.  These attributes are indicated in the documentation for their accessor methods.

       Each of the C functions that manipulate <u>kadm5</u> principal and policy structures takes a mask argument to
       indicate which fields should be taken into account.  The Perl accessor methods take care of the mask for
       you, assuming that when you change a value, you will eventually want it changed on the server.

       Flags for the read-only fields do not get set automatically because they would result in a bad mask error
       when performing kadmin operations.

       Some writable attributes are not allowed to have their masks set for certain operations.  For example,
       KADM5_POLICY may not be set during a <u>create_principal</u> operation, but since the Perl module sets that flag
       automatically when you set the <u>policy</u> attribute of the principal object, a bad mask error would result.
       Therefore, some kadmin operations automatically clear certain flags first.

       Though you should never have to, you can manipulate the mask on your own using the <u>mask</u> methods and the
       flags associated with each attribute (indicated in curly braces ({}s) below).  Use the tag <u>:constants</u> to
       request that the flag constants (and all other constants) be made available (see <b><a href="../man3/Exporter.3.html">Exporter</a></b>(3)).

       <b>Authen::Krb5::Admin::Config</b>
               This  class  is  used to configure a kadmin connection.  Without this object, <b>Authen::Krb5::Admin</b>
               constructors will default to the configuration defined in the Kerberos 5 profile  (<u>/etc/krb5.conf</u>
               by default).  So this object is usually only needed when selecting alternate realms or contacting
               a specific, non-default server.

               The  only  methods  in  this  class  are the constructor (<u>new</u>, described above) and the following
               accessor methods.

       admin_server {KADM5_CONFIG_ADMIN_SERVER}
               Admin server hostname

       kadmind_port {KADM5_CONFIG_KADMIND_PORT}
               Admin server port number

       kpasswd_port {KADM5_CONFIG_KPASSWD_PORT}
               Kpasswd server port number

       mask    Mask (described above)

       profile {KADM5_CONFIG_PROFILE}
               Kerberos 5 configuration profile

       realm {KADM5_CONFIG_REALM}
               Kerberos 5 realm name

       <b>Authen::Krb5::Admin::Key</b>
               This class represents key data contained in kadmin principal objects.  The only methods  in  this
               class are the constructor (<u>new</u>, described above) and the following accessor methods.

       key_contents
               Key contents, encrypted with the KDC master key.  This data may not be available remotely.

       enc_type
               Kerberos 5 enctype of the key

       key_type
               Alias for <u>enc_type</u>

       kvno    Key version number

       salt_contents
               Salt contents, if any (<u>ver</u> &gt; 1)

       salt_type
               Salt type, if any (<u>ver</u> &gt; 1)

       ver     Version number of the underlying <u>krb5_key_data</u> structure

       <b>Authen::Krb5::Admin::Policy</b>
               This  class represents kadmin policies.  The only methods in this class are the constructor (<u>new</u>,
               described above) and the following accessor methods.

       mask    Mask (described above)

       name {KADM5_POLICY}
               Policy name

       pw_history_num {KADM5_PW_HISTORY_NUM}
               Number (between 1 and 10, inclusive) of past  passwords  to  be  stored  for  the  principal.   A
               principal may not set its password to any of its previous <u>pw_history_num</u> passwords.

       pw_max_life {KADM5_PW_MAX_LIFE}
               Default number of seconds a password lasts before the principal is required to change it

       pw_max_fail {KADM5_PW_MAX_FAILURE}
               The maximum allowed number of attempts before a lockout.

       pw_failcnt_interval {KADM5_PW_FAILURE_COUNT_INTERVAL}
               The period after which the bad preauthentication count will be reset.

       pw_lockout_duration {KADM5_PW_LOCKOUT_DURATION}
               The  period  in  which  lockout  is enforced; a duration of zero means that the principal must be
               manually unlocked.

       pw_min_classes {KADM5_PW_MIN_CLASSES}
               Number (between 1 and 5, inclusive) of required character classes represented in a password

       pw_min_length {KADM5_PW_MIN_LENGTH}
               Minimum number of characters in a password

       pw_min_life {KADM5_PW_MIN_LIFE}
               Number of seconds a password must age before the principal may change it

       policy_refcnt {KADM5_REF_COUNT}
               Number  of  principals  referring  to  this  policy  (read-only,  does  not  set  KADM5_REF_COUNT
               automatically)

       Authen::Krb5::Admin::Principal
               The  attributes  <u>fail_auth_count</u>, <u>last_failed</u>, and <u>last_success</u> are only meaningful if the KDC is
               configured to update the database with this type of information.

               The only methods in this class are the constructor (<u>new</u>, described above), the following accessor
               methods, and <u>policy_clear</u>, which is used to clear the policy attribute.

       attributes {KADM5_ATTRIBUTES}
               Bitfield representing principal attributes (see <b><a href="../man8/kadmin.8.html">kadmin</a></b>(8))

       aux_attributes {KADM5_AUX_ATTRIBUTES}
               Bitfield used by kadmin.  Currently only recognizes the  KADM5_POLICY,  which  indicates  that  a
               policy  is in effect for this principal.  This attribute is read-only, so KADM5_AUX_ATTRIBUTES is
               not set automatically.

       fail_auth_count {KADM5_FAIL_AUTH_COUNT}
               Number of consecutive failed AS_REQs  for  this  principal.   This  attribute  is  read-only,  so
               KADM5_FAIL_AUTH_COUNT is not set automatically.

       kvno {KADM5_KVNO}
               Key version number

       last_failed {KADM5_LAST_FAILED}
               Time  (in  seconds since the Epoch) of the last failed AS_REQ for this principal.  This attribute
               is read-only, so KADM5_LAST_FAILED is not set automatically.

       last_pwd_change {KADM5_LAST_PWD_CHANGE}
               Time (in seconds since the Epoch) of the last password change for this principal.  This attribute
               is read-only, so KADM5_LAST_PWD_CHANGE is not set automatically.

       last_success {KADM5_LAST_SUCCESS}
               Time (in seconds since the Epoch) of  the  last  successful  AS_REQ  for  this  principal.   This
               attribute is read-only, so KADM5_LAST_SUCCESS is not set automatically.

       mask    Mask (see above)

       max_life {KADM5_MAX_LIFE}
               maximum lifetime in seconds of any Kerberos ticket issued to this principal

       max_renewable_life {KADM5_MAX_RLIFE}
               maximum renewable lifetime in seconds of any Kerberos ticket issued to this principal

       mod_date {KADM5_MOD_TIME}
               Time (in seconds since the Epoch) this principal was last modified.  This attribute is read-only,
               so KADM5_MOD_TIME is not set automatically.

       mod_name {KADM5_MOD_NAME}
               Kerberos  principal  (<b>Authen::Krb5::Principal</b>,  see  <b>Authen::<a href="../man3/Krb5.3.html">Krb5</a></b>(3))  that  last  modified  this
               principal.  This attribute is read-only, so KADM5_MOD_NAME is not set automatically.

       policy {KADM5_POLICY}
               Name of policy that affects this principal if KADM5_POLICY is set in <u>aux_attributes</u>

       policy_clear {KADM5_POLICY_CLR}
               Not really an attribute--disables the current policy for this  principal.   This  method  doesn't
               return anything.

       princ_expire_time {KADM5_PRINC_EXPIRE_TIME}
               Expire time (in seconds since the Epoch) of the principal

       principal {KADM5_PRINCIPAL}
               Kerberos principal itself (<b>Authen::Krb5::Principal</b>, see <b>Authen::<a href="../man3/Krb5.3.html">Krb5</a></b>(3))

       pw_expiration {KADM5_PW_EXPIRATION}
               Expire time (in seconds since the Epoch) of the principal's password

       db_args [@ARGS]
               When  called  without  any  @ARGS,  returns  the  list  of arguments that will be passed into the
               underlying database, as with "addprinc -x" in "kadmin". If @ARGS is non-empty,  it  will  replace
               any database arguments, which will then be returned, like this:

                   my @old = $principal-&gt;db_args;
                   # -or-
                   my @old = $principal-&gt;db_args(@new);

                   # The RPC call will ignore the tail data unless
                   # you set this flag:
                   $principal-&gt;mask($principal-&gt;mask | KADM5_TL_DATA);

   <b>Operations</b>
       To  perform  kadmin  operations  (addprinc,  delprinc,  etc.),  we first construct an object of the class
       <b>Authen::Krb5::Admin</b>, which contains a  server  handle.   Then  we  use  object  methods  to  perform  the
       operations using that handle.

       In the following synopses, parameter types are indicated by their names as follows:

               $error          Kerberos 5 error code
               $kadm5          Authen::Krb5::Admin
               $kadm5_config   Authen::Krb5::Admin::Config
               $kadm5_pol      Authen::Krb5::Admin::Policy
               $kadm5_princ    Authen::Krb5::Admin::Principal
               $krb5_ccache    Authen::Krb5::Ccache
               $krb5_princ     Authen::Krb5::Principal
               $success        TRUE if if the call succeeeded, undef otherwise

       Everything else is an unblessed scalar value (or an array of them) inferable from context.

       Parameters surrounded by square brackets ([]s) are each optional.

       Constructors
               Each  of  the following constructors authenticates as $client to the admin server $service, which
               defaults to KADM5_ADMIN_SERVICE if undef.  An undefined value for $kadm5_config  will  cause  the
               interface to infer the configuration from the Kerberos 5 profile (<u>/etc/krb5.conf</u> by default).

       $kadm5 =  Authen::Krb5::Admin-&gt;init_with_creds($client, $krb5_ccache[, $service, $kadm5_config])
               Authenticate using the credentials cached in $krb5_ccache.

       $kadm5 = Authen::Krb5::Admin-&gt;init_with_password($client[, $password, $service, $kadm5_config])
               Authenticate with $password.

       $kadm5 = Authen::Krb5::Admin-&gt;init_with_skey($client[, $keytab_file, $service, $kadm5_config])
               Authenticate  using  the  keytab  stored  in $keytab_file.  If $keytab_file is undef, the default
               keytab is used.

       Principal Operations
       $success = $kadm5-&gt;chpass_principal($krb5_princ, $password)
               Change the password of $krb5_princ to $password.

       $success = $kadm5-&gt;create_principal($kadm5_princ[, $password])
               Insert $kadm5_princ into  the  database,  optionally  setting  its  password  to  the  string  in
               $password.  Clears KADM5_POLICY_CLR and KADM5_FAIL_AUTH_COUNT.

       $success = $kadm5-&gt;delete_principal($krb5_princ)
               Delete the principal represented by $krb5_princ from the database.

       $kadm5_princ = $kadm5-&gt;get_principal($krb5_princ[, $mask])
               Retrieve  the  Authen::Krb5::Admin::Principal  object  for  the  principal  $krb5_princ  from the
               database.  Use KADM5_PRINCIPAL_NORMAL_MASK to retrieve all of the useful attributes.

       @names = $kadm5-&gt;get_principals([$expr])
               Retrieve a list of principal names matching the glob pattern $expr.  In  the  absence  of  $expr,
               retrieve the list of all principal names.

       $success = $kadm5-&gt;modify_principal($kadm5_princ)
               Modify   $kadm5_princ   in   the   database.    The   principal   to   modify  is  determined  by
               "$kadm5_princ-&gt;principal", and the rest of the writable parameters will be modified  accordingly.
               Clears KADM5_PRINCIPAL.

       @keys = $kadm5-&gt;randkey_principal($krb5_princ)
               Randomize   the   principal   in   the   database   represented   by   $krb5_princ   and   return
               <b>Authen::Krb5::Keyblock</b> objects.

       $success = $kadm5-&gt;rename_principal($krb5_princ_from, $krb5_princ_to)
               Change the name of the principal from $krb5_princ_from to $krb5_princ_to.

       Policy Operations
       $success = $kadm5-&gt;create_policy($kadm5_pol)
               Insert $kadm5_pol into the database.

       $success = $kadm5-&gt;delete_policy($name)
               Delete the policy named $name from the database.

       $kadm5_pol = $kadm5-&gt;get_policy([$name])
               Retrieve the <b>Authen::Krb5::Admin::Policy</b> object for the policy named $name from the database.

       @names = $kadm5-&gt;get_policies([$expr])
               Retrieve a list of policy names matching the glob  pattern  $expr.   In  the  absence  of  $expr,
               retrieve the list of all policy names.

       $success = $kadm5-&gt;modify_policy($kadm5_pol)
               Modify $kadm5_pol in the database.  The policy to modify is determined by "$kadm5_pol-"name&gt;,(and
               the rest of the writable) parameters will be modified accordingly.  Clears KADM5_POLICY.

       Other Methods
       $magic_value = Authen::Krb5::Admin::error [$error]
               Return  value  that  acts  like $! (see <b><a href="../man1/perlvar.1.html">perlvar</a></b>(1)) for the most recent Authen::Krb5::Admin call.
               With error code $error, return the error message corresponding to that error code.

       $error_code = Authen::Krb5::Admin::error_code
               Returns the value of the error code for the most recent  Authen::Krb5::Admin  call  as  a  simple
               integer.

       $privs = $kadm5-&gt;get_privs
               Return a bitfield representing the kadmin privileges a principal has, as follows:

                       get     KADM5_PRIV_GET
                       add     KADM5_PRIV_ADD
                       modify  KADM5_PRIV_MODIFY
                       delete  KADM5_PRIV_DELETE

</pre><h4><b>EXAMPLES</b></h4><pre>
       See the unit tests included with this software for examlpes.  They can be found in the <u>t/</u> subdirectory of
       the distribution.

</pre><h4><b>FILES</b></h4><pre>
        krb.conf               Kerberos 5 configuration file

</pre><h4><b>BUGS</b></h4><pre>
       There  is  no  facility  for  specifying keysalts for methods like <u>create_principal</u> and <u>modify_principal</u>.
       This facility is provided by the Kerberos 5 API and requires an  initialized  context.   So  it  probably
       makes more sense for <b>Authen::<a href="../man3/Krb5.3.html">Krb5</a>(3)</b> to handle those functions.

</pre><h4><b>AUTHOR</b></h4><pre>
       Stephen Quinney &lt;<a href="mailto:squinney@inf.ed.ac.uk">squinney@inf.ed.ac.uk</a>&gt;

       Author Emeritus: Andrew J. Korty &lt;<a href="mailto:ajk@iu.edu">ajk@iu.edu</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/perl.1.html">perl</a></b>(1), <b><a href="../man1/perlvar.1.html">perlvar</a></b>(1), <b>Authen::<a href="../man3/Krb5.3.html">Krb5</a></b>(3), <b><a href="../man3/Exporter.3.html">Exporter</a></b>(3), <b><a href="../man8/kadmin.8.html">kadmin</a></b>(8).

perl v5.40.1                                       2025-04-11                                         <u><a href="../man3pm/Admin.3pm.html">Admin</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>