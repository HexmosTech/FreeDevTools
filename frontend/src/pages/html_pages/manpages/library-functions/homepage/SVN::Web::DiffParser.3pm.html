<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVN::Web::DiffParser - Parse patch files containing unified and standard diffs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsvn-web-perl">libsvn-web-perl_0.63-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SVN::Web::DiffParser - Parse patch files containing unified and standard diffs

</pre><h4><b>NOTE</b></h4><pre>
       This is Text::Diff::Parser, plus some local bug fixes that were exposed by use with SVN::Web.  For more
       details about Text::Diff::Parser please see CPAN.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use SVN::Web::DiffParser;

           # create the object
           my $parser = SVN::Web::DiffParser-&gt;new();

           # With options
           $parser = SVN::Web::DiffParser-&gt;new( Simplify=&gt;1, # simplify the diff
                                              Strip=&gt;2 );  # strip 2 directories

           # Create object.  Parse $file
           $parser = SVN::Web::DiffParser-&gt;new( $file );
           $parser = SVN::Web::DiffParser-&gt;new( File=&gt;$file );

           # Create object.  Parse text
           my $parser = SVN::Web::DiffParser-&gt;new( $text );
           $parser = SVN::Web::DiffParser-&gt;new( Diff=&gt;$text );

           # parse a file
           $parser-&gt;parse_file( $filename );

           # parse a string
           $parser-&gt;parse( $text );

           # Remove no-change lines.  Combine line substitutions
           $parser-&gt;simplify;

           # Find results
           foreach my $change ( $parser-&gt;changes ) {
               print "File1: ", $change-&gt;filename1;
               print "Line1: ", $change-&gt;line1;
               print "File2: ", $change-&gt;filename2;
               print "Line2: ", $change-&gt;line2;
               print "Type: ", $change-&gt;type;
               my $size = $change-&gt;size;
               foreach my $line ( 0..($size-1) ) {
                   print "Line: ", $change-&gt;line( $size );
               }
           }

           # In scalar context, returns the number of changes
           my $n = $parser-&gt;changes;
           print "There are $n changes",

           # Get the changes to a given file
           my @changes = $parser-&gt;changes( 'Makefile.PL' );

           # Get list of files changed by the diff
           my @files = $parser-&gt;files;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "SVN::Web::DiffParser" parses diff files and patches.  It allows you to access the changes to a file in a
       standardized way, even if multiple patch formats are used.

       A diff may be viewed a series of operations on a file, either adding, removing or modifying lines of one
       file (the "from-file") to produce another file (the "to-file").  Diffs are generally produced either by
       hand with diff, or by your version control system ("cvs diff", "svn diff", ...).  Some diff formats,
       notably unified diffs, also contain null operations, that is lines that

       "SVN::Web::DiffParser" currently parses unified diff format and standard diff format.

       Unified diffs look like the following.

           --- Filename1 2006-04-12 18:47:22.000000000 -0400
           +++ Filename2 2006-04-12 19:21:16.000000000 -0400
           @@ -1,4 +1,6 @@
            ONE
            TWO
           -THREE
           +honk
            FOUR
           +honk
           +honk

       Standard diffs look like the following.

           diff something something.4
           3c3
           &lt; THREE
           ---
           &gt; honk
           4a5,6
           &gt; honk
           &gt; honk

       The diff line isn't in fact part of the format but is necessary to find which files the chunks deal with.
       It is output by "cvs diff" and "svn diff" so that isn't a problem.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
           $parser = SVN::Web::DiffParser-&gt;new;
           $parser = SVN::Web::DiffParser-&gt;new( $file );
           $parser = SVN::Web::DiffParser-&gt;new( $handle );
           $parser = SVN::Web::DiffParser-&gt;new( %params );
           $parser = SVN::Web::DiffParser-&gt;new( \%params );

       Object constructor.

       Diff
           String that contains a diff.  This diff will be parse before "new" returns.

       File
           File name or file handle that is parsed before "new" returns.

       Simplify
           Simplifying  a  patch  involves  dropping  all  null-operations  and  converting and remove operation
           followed by an add operation (or an add followed by a remove) of the same size on the same lines into
           a modify operation.

       Strip
           Strip N leading directories from all filenames.  Less then useful for standard diffs produced by "cvs
           diff", because they don't contain directory information.

       Verbose
           If true, print copious details of what is going on.

   <b>parse_file</b>
           $parser-&gt;parse_file( $file );
           $parser-&gt;parse_file( $handle );

       Read and parse the file or file handle specified.  Will "die" if  it  fails,  returns  true  on  success.
       Contents of the file may then be accessed with "changes" and "files".

   <b>parse</b>
           $parser-&gt;parse( $string );

       Parses  the  diff  present in $string.  Will "die" if it fails, returns true on success.  Contents of the
       file may then be accessed with "changes" and "files".

   <b>files</b>
           %files = $parser-&gt;files;

       Fetch a list of all the  files  that  were  referenced  in  the  patch.   The  keys  are  original  files
       ("from-file") and the values are the modified files ("to-file").

   <b>changes</b>
           @changes = $parser-&gt;changes;
           $n = $parser-&gt;changes;
           @changes = $parser-&gt;changes( $file );
           $n = $parser-&gt;changes( $file );

       Return  all  the  operations  (array context) or the number of operations in the patch file.  If $file is
       specified, only returns changes to that file ("from-file" or "to-file").

       Elements of the returned array are change objects, as described in "CHANGE METHODS" below.

</pre><h4><b>CHANGE</b> <b>METHODS</b></h4><pre>
       The "changes" method returns an array of objects that describe each operation.  You may use the following
       methods to find out details of the operation.

   <b>type</b>
       Returns the type of operation, either 'ADD', 'REMOVE', 'MODIFY' or '' (null operation).

   <b>filename1</b>
       Filename of the "from-file".

   <b>filename2</b>
       Filename of the "to-file".

   <b>line1</b>
       Line in the "from-file" the operation starts at.

   <b>line2</b>
       Line in the "to-file" the operation starts at.

   <b>size</b>
       Number of lines affected by this operation.

   <b>text</b>
           @lines = $ch-&gt;text;
           $line  = $ch-&gt;text( $N );

       Fetch the text of the line $N if present or all lines of affected by this operation.  For ''  (null)  and
       'REMOVE'  operations,  these are the lines present before the operation was done ('from-file'.  For 'ADD'
       and 'MODIFY' operations, these are the lines present after the operation was done ('to-file'.

</pre><h4><b>BUGS</b></h4><pre>
       I'm not 100% sure of standard diff handling.

       Missing support for context diffs.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Text::Diff, Arch, diff.

</pre><h4><b>AUTHOR</b></h4><pre>
       Philip Gwyn, &lt;gwyn-at-cpan.org&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2006 by Philip Gwyn

       Copyright (C) 2012 by Dean Hamstead

       This library is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself, either Perl version 5.8.8 or, at your option, any later version of Perl 5 you may have available.

perl v5.40.1                                       2025-04-09                          <u>SVN::Web::<a href="../man3pm/DiffParser.3pm.html">DiffParser</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>