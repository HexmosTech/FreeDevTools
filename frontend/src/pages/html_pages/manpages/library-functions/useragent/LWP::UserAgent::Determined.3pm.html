<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LWP::UserAgent::Determined - a virtual browser that retries errors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblwp-useragent-determined-perl">liblwp-useragent-determined-perl_1.07-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       LWP::UserAgent::Determined - a virtual browser that retries errors

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use strict;
         use LWP::UserAgent::Determined;
         my $browser = LWP::UserAgent::Determined-&gt;new;
         my $response = $browser-&gt;get($url, headers... );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class works just like LWP::UserAgent (and is based on it, by being a subclass of it), except that
       when you use it to get a web page but run into a possibly-temporary error (like a DNS lookup timeout),
       it'll wait a few seconds and retry a few times.

       It also adds some methods for controlling exactly what errors are considered retry-worthy and how many
       times to wait and for how many seconds, but normally you needn't bother about these, as the default
       settings are relatively sane.

</pre><h4><b>METHODS</b></h4><pre>
       This module inherits all of LWP::UserAgent's methods, and adds the following.

       $timing_string = $browser-&gt;<b>timing()</b>;
       $browser-&gt;timing( "10,30,90" )
           The  "timing"  method  gets  or sets the string that controls how many times it should retry, and how
           long the pauses should be.

           If you specify empty-string, this means not to retry at all.

           If you specify a string consisting of a single number, like  "10",  that  means  that  if  the  first
           request  doesn't  succeed,  then  "$browser-&gt;get(...)"  (or  any  other  method based on "request" or
           "simple_request") should wait 10 seconds and try again (and if that fails, then it's final).

           If you specify a string with several numbers in it (like "10,30,90"), then that  means  $browser  can
           <u>re</u>try  as  that many times (i.e., one initial try, <u>plus</u> a maximum of the three retries, because three
           numbers  there),  and  that  it  should  wait  first  those  numbers  of  seconds  each   time.    So
           "$browser-&gt;timing( "10,30,90" )" basically means:

             try the request; return it unless it's a temporary-looking error;
             sleep 10;
             retry the request; return it unless it's a temporary-looking error;
             sleep 30;
             retry the request; return it unless it's a temporary-looking error;
             sleep 90  the request;
             return it;

           The default value is "1,3,15".

       $http_codes_hr = $browser-&gt;<b>codes_to_determinate()</b>;
           This  returns the hash that is the set of HTTP codes that merit a retry (like 500 and 408, but unlike
           404 or 200).  You can delete or add entries like so;

             $http_codes_hr = $browser-&gt;codes_to_determinate();
             delete $http_codes_hr-&gt;{408};
             $http_codes_hr-&gt;{567} = 1;

           (You can actually set a whole new hashset with "$browser-&gt;codes_to_determinate($new_hr)", but there's
           usually no benefit to that as opposed to the above.)

           The current default is 408 (Timeout) plus some 5xx codes.

       $browser-&gt;<b>before_determined_callback()</b>
       $browser-&gt;before_determined_callback( \&amp;some_routine );
       $browser-&gt;<b>after_determined_callback()</b>
       $browser-&gt;after_determined_callback( \&amp;some_routine );
           These read (first two) or set (second two) callbacks that are called before the  actual  HTTP/FTP/etc
           request is made.  By default, these are set to undef, meaning nothing special is called.  If you want
           to  alter  try requests, or inspect responses before any retrying is considered, you can set up these
           callbacks.

           The arguments passed to these routines are:

           0: the current $browser object
           1: an arrayref to the list of timing pauses (based on $browser-&gt;timing)
           2: the duration of the number of seconds we'll pause if this request fails this time, or undef if
           this is the last chance.
           3: the value of $browser-&gt;codes_to_determinate
           4: an arrayref of the arguments we pass to LWP::UserAgent::simple_request (the first of which is the
           request object)
           (5): And, only for after_determined_callback, the response we just got.

           Example use:

             $browser-&gt;before_determined_callback( sub {
               print "Trying ", $_[4][0]-&gt;uri, " ...\n";
             });

</pre><h4><b>IMPLEMENTATION</b></h4><pre>
       This class works by overriding LWP::UserAgent's "simple_request" method with its own  around-method  that
       just loops.  See the source of this module; it's straightforward.  Relatively.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       LWP, LWP::UserAgent

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>DISCLAIMER</b></h4><pre>
       Copyright  2004, Sean M. Burke, all rights reserved.  This program is free software; you can redistribute
       it and/or modify it under the same terms as Perl itself.

       This program is distributed in the hope that it will be useful, but without any  warranty;  without  even
       the implied warranty of merchantability or fitness for a particular purpose.

</pre><h4><b>AUTHOR</b></h4><pre>
       Originally created by Sean M. Burke, "<a href="mailto:sburke@cpan.org">sburke@cpan.org</a>"

       Currently maintained by Jesse Vincent "<a href="mailto:jesse@fsck.com">jesse@fsck.com</a>"

perl v5.36.0                                       2022-10-13                    <u>LWP::UserAgent::<a href="../man3pm/Determined.3pm.html">Determined</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>