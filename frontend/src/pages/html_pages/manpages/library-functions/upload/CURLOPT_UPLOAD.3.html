<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_UPLOAD - data upload</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_UPLOAD - data upload

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_UPLOAD, long upload);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  long  parameter  <u>upload</u>  set  to  1  tells  the  library  to  prepare for and perform an upload. The
       <u><a href="../man3/CURLOPT_READDATA.3.html">CURLOPT_READDATA</a>(3)</u> and <u><a href="../man3/CURLOPT_INFILESIZE.3.html">CURLOPT_INFILESIZE</a>(3)</u> or <u><a href="../man3/CURLOPT_INFILESIZE_LARGE.3.html">CURLOPT_INFILESIZE_LARGE</a>(3)</u> options are also interesting
       for uploads. If the protocol is HTTP, uploading means using the  PUT  request  unless  you  tell  libcurl
       otherwise.

       Using  PUT with HTTP 1.1 implies the use of a "Expect: 100-continue" header.  You can disable this header
       with <u><a href="../man3/CURLOPT_HTTPHEADER.3.html">CURLOPT_HTTPHEADER</a>(3)</u> as usual.

       If you use PUT to an HTTP 1.1 server, you can upload data without knowing the size  before  starting  the
       transfer.  The  library enables this by adding a header "Transfer-Encoding: chunked". With HTTP 1.0 or if
       you prefer not to use chunked transfer, you must specify the size of the data with  <u><a href="../man3/CURLOPT_INFILESIZE.3.html">CURLOPT_INFILESIZE</a>(3)</u>
       or <u><a href="../man3/CURLOPT_INFILESIZE_LARGE.3.html">CURLOPT_INFILESIZE_LARGE</a>(3)</u>.

</pre><h4><b>DEFAULT</b></h4><pre>
       0

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       static size_t read_cb(char *ptr, size_t size, size_t nmemb, void *userdata)
       {
         FILE *src = userdata;
         /* copy as much data as possible into the 'ptr' buffer, but no more than
            'size' * 'nmemb' bytes */
         size_t retcode = fread(ptr, size, nmemb, src);

         return retcode;
       }

       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           FILE *src = fopen("local-file", "r");
           curl_off_t fsize = 1234; /* set this to the size of the input file */

           /* we want to use our own read function */
           curl_easy_setopt(curl, CURLOPT_READFUNCTION, read_cb);

           /* enable uploading */
           curl_easy_setopt(curl, CURLOPT_UPLOAD, 1L);

           /* specify target */
           curl_easy_setopt(curl, CURLOPT_URL, "<a href="ftp://example.com/dir/to/newfile">ftp://example.com/dir/to/newfile</a>");

           /* now specify which pointer to pass to our callback */
           curl_easy_setopt(curl, CURLOPT_READDATA, src);

           /* Set the size of the file to upload */
           curl_easy_setopt(curl, CURLOPT_INFILESIZE_LARGE, (curl_off_t)fsize);

           /* Now run off and do what you have been told */
           curl_easy_perform(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.1

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_INFILESIZE_LARGE.3.html">CURLOPT_INFILESIZE_LARGE</a></b>(3), <b><a href="../man3/CURLOPT_PUT.3.html">CURLOPT_PUT</a></b>(3), <b><a href="../man3/CURLOPT_READFUNCTION.3.html">CURLOPT_READFUNCTION</a></b>(3)

libcurl                                            2025-06-16                                  <u><a href="../man3/CURLOPT_UPLOAD.3.html">CURLOPT_UPLOAD</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>