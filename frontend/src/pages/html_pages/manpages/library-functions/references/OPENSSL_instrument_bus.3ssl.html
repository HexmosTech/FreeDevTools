<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OPENSSL_instrument_bus, OPENSSL_instrument_bus2 - instrument references to memory bus</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       OPENSSL_instrument_bus, OPENSSL_instrument_bus2 - instrument references to memory bus

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #ifdef OPENSSL_CPUID_OBJ
        size_t OPENSSL_instrument_bus(unsigned int *vector, size_t num);
        size_t OPENSSL_instrument_bus2(unsigned int *vector, size_t num, size_t max);
        #endif

</pre><h4><b>DESCRIPTION</b></h4><pre>
       It was empirically found that timings of references to primary memory are subject to irregular,
       apparently non-deterministic variations. The subroutines in question instrument these references for
       purposes of gathering randomness for random number generator. In order to make it bus-bound a 'flush
       cache line' instruction is used between probes. In addition probes are added to <b>vector</b> elements in atomic
       or interlocked manner, which should contribute additional noise on multi-processor systems. This also
       means that <b>vector[num]</b> should be zeroed upon invocation (if you want to retrieve actual probe values).

       <b>OPENSSL_instrument_bus()</b> performs <b>num</b> probes and records the number of oscillator cycles every probe
       took.

       <b>OPENSSL_instrument_bus2()</b> on the other hand <b>accumulates</b> consecutive probes with the same value, i.e. in a
       way it records duration of periods when probe values appeared deterministic. The subroutine performs at
       most <b>max</b> probes in attempt to fill the <b>vector[num]</b>, with <b>max</b> value of 0 meaning "as many as it takes."

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Return value of 0 indicates that CPU is not capable of performing the benchmark, either because
       oscillator counter or 'flush cache line' is not available on current platform. For reference, on x86
       'flush cache line' was introduced with the SSE2 extensions.

       Otherwise number of recorded values is returned.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2011-2018 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain a copy in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                       <u><a href="../man3SSL/OPENSSL_INSTRUMENT_BUS.3SSL.html">OPENSSL_INSTRUMENT_BUS</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>