<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Box::Locker - manage the locking of mail folders</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-box-perl">libmail-box-perl_3.011-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Box::Locker - manage the locking of mail folders

</pre><h4><b>INHERITANCE</b></h4><pre>
        Mail::Box::Locker
          is a Mail::Reporter

        Mail::Box::Locker is extended by
          Mail::Box::Locker::DotLock
          Mail::Box::Locker::FcntlLock
          Mail::Box::Locker::Flock
          Mail::Box::Locker::Multi
          Mail::Box::Locker::Mutt
          Mail::Box::Locker::NFS
          Mail::Box::Locker::POSIX

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Mail::Box::Locker;
        my $locker = new Mail::Box::Locker(folder =&gt; $folder);

        $locker-&gt;lock;
        $locker-&gt;isLocked;
        $locker-&gt;hasLock;
        $locker-&gt;unlock;

        use Mail::Box;
        my $folder = Mail::Box-&gt;new(lock_method =&gt; 'DOTLOCK');
        print $folder-&gt;locker-&gt;type;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Each Mail::Box will create its own "Mail::Box::Locker" object which will handle the locking for it.  You
       can access of the object directly from the folder, as shown in the examples below.

       Extends "DESCRIPTION" in Mail::Reporter.

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Mail::Reporter.

   <b>Constructors</b>
       Extends "Constructors" in Mail::Reporter.

       Mail::Box::Locker-&gt;<b>new</b>(%options)
           Create  a  new lock. You may do this directly. However, in most cases the lock will not be separately
           instantiated but will be the second class in a multiple inheritance construction with a Mail::Box.

           Generally the client program specifies the locking behavior  through  options  given  to  the  folder
           class.

            -Option --Defined in     --Default
             expires                   1 hour
             file                      undef
             folder                    &lt;undef&gt;
             log      Mail::Reporter   'WARNINGS'
             method                    'DOTLOCK'
             timeout                   10
             trace    Mail::Reporter   'WARNINGS'

           expires =&gt; SECONDS
             How  long can a lock exist?  If a different e-mail program leaves a stale lock, then this lock will
             be removed automatically after the specified number of seconds.

           file =&gt; FILENAME
             Name of the file to lock.  By default, the name of the folder is taken.

           folder =&gt; FOLDER
             Which FOLDER is to be locked, a Mail::Box object.

           log =&gt; LEVEL
           method =&gt; STRING|CLASS|ARRAY
             Which kind of locking, specified as one of the following names as STRING.  You may also  specify  a
             CLASS  name,  or an ARRAY of names.  In case of an ARRAY, a 'multi' locker is started with all thee
             full CLASS name.

             Supported locking names are

             'DOTLOCK' | 'dotlock'
                 The folder handler creates a file which signals that it is in use.  This is a bit  problematic,
                 because not all mail-handling software agree on the name of the file to be created.

                 On  various  folder  types, the lockfile differs.  See the documentation for each folder, which
                 describes the locking strategy as well as special options to change the default behavior.

             'FLOCK' | 'flock'
                 For some folder handlers, locking is  based  on  a  file  locking  mechanism  provided  by  the
                 operating system.  However, this does not work on all systems, such as network filesystems, and
                 such. This also doesn't work on folders based on directories (Mail::Box::Dir and derived).

             'FCNTLLOCK' | 'fcntllock'
                 POSIX  locking  via  File::FcntlLock,  which  works  on  more  platforms.  However, that module
                 requires a C compiler to install.

             'POSIX' | 'posix'
                 Use the POSIX standard fcntl locking.

             'MULTI' | 'multi'
                 Use ALL available locking methods at the same time, to have a bigger  chance  that  the  folder
                 will  not be modified by some other application which uses an unspecified locking method.  When
                 one of the locking methods disallows access, the locking fails.

             'MUTT'| 'mutt'
                 Use the external program 'mutt_dotlock' to lock and unlock.

             'NFS' | 'nfs'
                 A kind of "dotlock" file-locking mechanism, but adapted to work over NFS.  Extra precaution  is
                 needed because an "open O_EXCL" on NFS is not an atomic action.

             'NONE' | 'none'
                 Do not use locking.

             The  other  option  is  to produce your own "Mail::Box::Locker" derived class, which implements the
             desired locking method. (Please consider offering it for inclusion in the public Mail::Box module!)
             Create an instance of that class with this parameter:

              my $locker = Mail::Box::Locker::MyOwn-&gt;new;
              $folder-&gt;open(locker =&gt; $locker);

           timeout =&gt; SECONDS|'NOTIMEOUT'
             How long to wait while trying to acquire the lock. The lock request will fail  when  the  specified
             number of seconds is reached.  If 'NOTIMEOUT' is specified, the module will wait until the lock can
             be taken.

             Whether  it  is  possible  to  limit  the  wait time is platform- and locking-method-specific.  For
             instance, the `dotlock' method on Windows will always wait until the lock has been received.

           trace =&gt; LEVEL

   <b>Attributes</b>
       $obj-&gt;<b>expires</b>( [SECONDS] )
           Get/Set the expiration time.  Not available for all lockers.

       $obj-&gt;<b>timeout</b>( [SECONDS] )
           Get/Set the timeout.  Not available for all lockers.

   <b>The</b> <b>Locker</b>
       $obj-&gt;<b>filename</b>( [$filename] )
           Returns the filename which is used to lock the folder, optionally after setting it to  the  specified
           $filename.

           example:

            print $locker-&gt;filename;

       $obj-&gt;<b>folder</b>( [$folder] )
           Returns the folder object which is locker.

       $obj-&gt;<b>name</b>()
           Returns  the  method  used  to lock the folder. See the <a href="../manmethod/new.method.html">new</a>(method) for details on how to specify the
           lock method.  The name of the method is returned in upper-case.

           example:

            if($locker-&gt;name eq 'FLOCK') ...

   <b>Locking</b>
       $obj-&gt;<b>hasLock</b>()
           Check whether the folder has the lock.

           example:

            if($locker-&gt;hasLock) {...}
            if($folder-&gt;locker-&gt;hasLock) {...}

       $obj-&gt;<b>isLocked</b>()
           Test if the folder is locked by this or a different application.

           example:

            if($locker-&gt;isLocked) {...}
            if($folder-&gt;locker-&gt;isLocked) {...}

       $obj-&gt;<b>lock</b>($folder)
           Get a lock on a folder.  This will return false if the lock fails.

           example:

            die unless $locker-&gt;lock;
            if($folder-&gt;locker-&gt;lock) {...}

       $obj-&gt;<b>unlock</b>()
           Undo the lock on a folder.

           example:

            $locker-&gt;unlock;
            $folder-&gt;locker-&gt;unlock;

   <b>Error</b> <b>handling</b>
       Extends "Error handling" in Mail::Reporter.

       $obj-&gt;<b>AUTOLOAD</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>addReport</b>($object)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
       Mail::Box::Locker-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>errors</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>log</b>( [$level, [$strings]] )
       Mail::Box::Locker-&gt;<b>log</b>( [$level, [$strings]] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logPriority</b>($level)
       Mail::Box::Locker-&gt;<b>logPriority</b>($level)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logSettings</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>notImplemented</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>report</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>reportAll</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>trace</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>warnings</b>()
           Inherited, see "Error handling" in Mail::Reporter

   <b>Cleanup</b>
       Extends "Cleanup" in Mail::Reporter.

       $obj-&gt;<b>DESTROY</b>()
           When the locker is destroyed, for instance when the folder is closed or the program  ends,  the  lock
           will be automatically removed.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error: Package $package does not implement $method.
           Fatal  error:  the specific package (or one of its superclasses) does not implement this method where
           it should. This message means that some other related classes do implement this  method  however  the
           class  at  hand does not.  Probably you should investigate this and probably inform the author of the
           package.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module is  part  of  Mail-Box  distribution  version  3.011,  built  on  April  18,  2025.  Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer]. For other contributors see ChangeLog.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-25                             <u>Mail::Box::<a href="../man3pm/Locker.3pm.html">Locker</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>