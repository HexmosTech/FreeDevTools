<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Field::Received -- mostly RFC822-compliant parser of Received headers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-field-received-perl">libmail-field-received-perl_0.26-1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Field::Received -- mostly RFC822-compliant parser of Received headers

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Mail::Field;

         my $received = Mail::Field-&gt;new('Received', $header);
         my $results = $received-&gt;parse_tree();
         my $parsed_ok = $received-&gt;parsed_ok();
         my $diagnostics = $received-&gt;diagnostics();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Don't</u> <u>use</u> <u>this</u> <u>class</u> <u>directly!</u>  Instead ask Mail::Field for new instances based on the field name!

       Mail::Field::Received provides subroutines for parsing Received headers from e-mails.  It mostly complies
       with RFC822, but deviates to accommodate a number of broken MTAs which are in common use.  It also
       attempts to extract useful information which MTAs often embed within the "(comments)".

       It is a subclass derived from the Mail::Field and Mail::Field::Generic classes.

</pre><h4><b>ROUTINES</b></h4><pre>
       •   <b>debug</b>

           Returns  current debugging level obtained via the "diagnostics" method.  If a parameter is given, the
           debugging level is changed.  The default level is 3.

       •   <b>diagnose</b>

             $received-&gt;diagnose("foo", "\n");

           Appends stuff to the parser's diagnostics buffer.

       •   <b>diagnostics</b>

             my $diagnostics = $received-&gt;diagnostics();

           Returns the contents of the parser's diagnostics buffer.

       •   <b>parse</b>

           The actual parser.  Returns the object (Mail::Field barfs otherwise).

       •   <b>parsed_ok</b>

             if ($received-&gt;parsed_ok()) {
               ...
             }

           Returns true if the parse succeed, or if it failed, but was permitted to fail for some  reason,  such
           as encountering evidence of a known broken (non-RFC822-compliant) format mid-parse.

       •   <b>parse_tree</b>

             my $parse_tree = $received-&gt;parse_tree();

           Returns  the actual parse tree, which is where you get all the useful information.  It is returned as
           a hashref whose keys are strings like `from', `by', `with', `id', `via' etc.,  corresponding  to  the
           components of Received headers as defined by RFC822:

             received    =  "Received"    ":"            ; one per relay
                               ["from" domain]           ; sending host
                               ["by"   domain]           ; receiving host
                               ["via"  atom]             ; physical path
                              *("with" atom)             ; link/mail protocol
                               ["id"   msg-id]           ; receiver msg id
                               ["for"  addr-spec]        ; initial form
                                ";"    date-time         ; time received

           The  corresponding  values  are  more  hashrefs  which  are  mini-parse-trees  for  these  individual
           components.  A typical parse tree looks something like:

             {
              'by' =&gt; {
                       'domain' =&gt; 'host5.hostingcheck.com',
                       'whole' =&gt; 'by host5.hostingcheck.com',
                       'comments' =&gt; [
                                      '(8.9.3/8.9.3)'
                                     ],
                      },
              'date_time' =&gt; {
                              'year' =&gt; 2000,
                              'week_day' =&gt; 'Tue',
                              'minute' =&gt; 57,
                              'day_of_year' =&gt; '1 Feb',
                              'month_day' =&gt; ' 1',
                              'zone' =&gt; '-0500',
                              'second' =&gt; 18,
                              'hms' =&gt; '21:57:18',
                              'date_time' =&gt; 'Tue, 1 Feb 2000 21:57:18 -0500',
                              'hour' =&gt; 21,
                              'month' =&gt; 'Feb',
                              'rest' =&gt; '2000 21:57:18 -0500',
                              'whole' =&gt; 'Tue, 1 Feb 2000 21:57:18 -0500'
                             },
              'with' =&gt; {
                         'with' =&gt; 'ESMTP',
                         'whole' =&gt; 'with ESMTP'
                        },
              'from' =&gt; {
                         'domain' =&gt; 'mediacons.tecc.co.uk',
                         'HELO' =&gt; 'tr909.mediaconsult.com',
                         'from' =&gt; 'tr909.mediaconsult.com',
                         'address' =&gt; '193.128.6.132',
                         'comments' =&gt; [
                                        '(mediacons.tecc.co.uk [193.128.6.132])',
                                       ],
                         'whole' =&gt; 'from tr909.mediaconsult.com (mediacons.tecc.co.uk [193.128.6.132])
           '
                        },
              'id' =&gt; {
                       'id' =&gt; 'VAA24164',
                       'whole' =&gt; 'id VAA24164'
                      },
              'comments' =&gt; [
                             '(mediacons.tecc.co.uk [193.128.6.132])',
                             '(8.9.3/8.9.3)'
                            ],
              'for' =&gt; {
                        'for' =&gt; '&lt;<a href="mailto:adam@spiers.net">adam@spiers.net</a>&gt;',
                        'whole' =&gt; 'for &lt;<a href="mailto:adam@spiers.net">adam@spiers.net</a>&gt;'
                       },
              'whole' =&gt; 'from tr909.mediaconsult.com (mediacons.tecc.co.uk [193.128.6.132]) by host5.hostingcheck.com (8.9.3/8.9.3) with ESMTP id VAA24164 for &lt;<a href="mailto:adam@spiers.net">adam@spiers.net</a>&gt;; Tue, 1 Feb 2000 21:57:18 -0500'
             }

</pre><h4><b>BUGS</b></h4><pre>
       Doesn't use Parse::RecDescent, which it maybe should.

       Doesn't offer a `strict RFC822' parsing mode.  To implement that would be  a  royal  pain  in  the  arse,
       unless we move to Parse::RecDescent.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mail::Field, Mail::Header

</pre><h4><b>AUTHOR</b></h4><pre>
       Adam Spiers &lt;<a href="mailto:adam@spiers.net">adam@spiers.net</a>&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       All  rights  reserved.  This program is free software; you can redistribute it and/or modify it under the
       same terms as Perl itself.

perl v5.32.0                                       2021-01-08                                      <u><a href="../man3pm/Received.3pm.html">Received</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>