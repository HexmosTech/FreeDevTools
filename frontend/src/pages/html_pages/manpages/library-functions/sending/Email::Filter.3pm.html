<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email::Filter - Library for creating easy email filters</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libemail-filter-perl">libemail-filter-perl_1.035-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Email::Filter - Library for creating easy email filters

</pre><h4><b>VERSION</b></h4><pre>
       version 1.035

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Email::Filter;
           my $mail = Email::Filter-&gt;new(emergency =&gt; "<a href="file:~/emergency_mbox">~/emergency_mbox</a>");
           $mail-&gt;pipe("listgate", "p5p")         if $mail-&gt;from =~ /perl5-porters/;
           $mail-&gt;accept("perl")                  if $mail-&gt;from =~ /perl/;
           $mail-&gt;reject("We do not accept spam") if $mail-&gt;subject =~ /enlarge/;
           $mail-&gt;ignore                          if $mail-&gt;subject =~ /boring/i;
           ...
           $mail-&gt;<a href="../man0/exit.0.html">exit</a>(0);
           $mail-&gt;accept("<a href="file:~/Mail/Archive/backup">~/Mail/Archive/backup</a>");
           $mail-&gt;<a href="../man1/exit.1.html">exit</a>(1);
           $mail-&gt;accept()

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module replaces "procmail" or "Mail::Audit", and allows you to write programs describing how your
       mail should be filtered.

</pre><h4><b>PERL</b> <b>VERSION</b></h4><pre>
       This code is effectively abandonware.  Although releases will sometimes be made to update contact info or
       to fix packaging flaws, bug reports will mostly be ignored.  Feature requests are even more likely to be
       ignored.  (If someone takes up maintenance of this code, they will presumably remove this notice.)  This
       means that whatever version of perl is currently required is unlikely to change -- but also that it might
       change at any new maintainer's whim.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
           Email::Filter-&gt;new();                # Read from STDIN
           Email::Filter-&gt;new(data =&gt; $string); # Read from string

           Email::Filter-&gt;new(emergency =&gt; "~simon/urgh");
           # Deliver here in case of error

       This takes an email either from standard input, the usual case when called as a mail filter, or from a
       string.

       You may also provide an "emergency" option, which is a filename to deliver the mail to if it couldn't,
       for some reason, be handled properly.

       Hint
          If you put your constructor in a "BEGIN" block, like so:

              use Email::Filter;
              BEGIN { $item = Email::Filter-&gt;new(emergency =&gt; "~simon/urgh"); }

          right  at  the  top  of your mail filter script, you'll even be protected from losing mail even in the
          case of syntax errors in your script. How neat is that?

       This method provides the "new" trigger, called once an object is instantiated.

   <b>exit</b>
           $mail-&gt;exit(1|0);

       Sets or clears the 'exit' flag  which  determines  whether  or  not  the  following  methods  exit  after
       successful completion.

       The  sense-inverted  'noexit' method is also provided for backwards compatibility with "Mail::Audit", but
       setting "noexit" to "yes" got a bit mind-bending after a while.

   <b>simple</b>
           $mail-&gt;simple();

       Gets and sets the underlying "Email::Simple" object for this filter; see Email::Simple for more details.

   <b>header</b>
           $mail-&gt;header("X-Something")

       Returns the specified mail headers. In scalar context, returns the first such header;  in  list  context,
       returns them all.

   <b>body</b>
           $mail-&gt;body()

       Returns the body text of the email

   <b>from</b>
   <b>to</b>
   <b>cc</b>
   <b>bcc</b>
   <b>subject</b>
   <b>received</b>
           $mail-&gt;&lt;header&gt;()

       Convenience accessors for "header($header)"

   <b>ignore</b>
       Ignores this mail, exiting unconditionally unless "exit" has been set to false.

       This method provides the "ignore" trigger.

   <b>accept</b>
           $mail-&gt;accept();
           $mail-&gt;accept(@where);

       Accepts  the mail into a given mailbox or mailboxes.  Unix "~/" and "~user/" prefices are resolved. If no
       mailbox  is  given,  the  default  is   determined   according   to   Email::LocalDelivery:   $ENV{MAIL},
       <u>/var/spool/mail/you</u>, <u>/var/mail/you</u>, or <u>~you/Maildir/</u>.

       This  provides  the  "before_accept" and "after_accept" triggers, and exits unless "exit" has been set to
       false.  They are passed a reference to the @where array.

   <b>reject</b>
           $mail-&gt;reject("Go away!");

       This rejects the email; if called in a pipe from a mail transport agent, (such as in a  <u><a href="file:~/.forward">~/.forward</a></u>  file)
       the mail will be bounced back to the sender as undeliverable. If a reason is given, this will be included
       in the bounce.

       This calls the "reject" trigger. "exit" has no effect here.

   <b>pipe</b>
           $mail-&gt;pipe(qw[sendmail foo\@bar.com]);

       Pipes the mail to an external program, returning the standard output from that program if "exit" has been
       set  to  false.  The  program and each of its arguments must be supplied in a list. This allows you to do
       things like:

           $mail-&gt;<a href="../man0/exit.0.html">exit</a>(0);
           $mail-&gt;simple(Email::Simple-&gt;new($mail-&gt;pipe("spamassassin")));
           $mail-&gt;<a href="../man1/exit.1.html">exit</a>(1);

       in the absence of decent "Mail::SpamAssassin" support.

       If the program returns a non-zero exit code, the behaviour is dependent on the status of the "exit" flag.
       If this flag is set to true (the default), then "Email::Filter" tries to recover. (See "ERROR  RECOVERY")
       If not, nothing is returned.

       If  the last argument to "pipe" is a reference to a hash, it is taken to contain parameters to modify how
       "pipe" itself behaves.  The only useful parameter at this time is:

         header_only - only pipe the header, not the body

</pre><h4><b>TRIGGERS</b></h4><pre>
       Users of "Mail::Audit" will note that this class is much leaner than the one it replaces.  For  instance,
       it  has  no logging; the concept of "local options" has gone away, and so on. This is a deliberate design
       decision to make the class as simple and maintainable as possible.

       To make up for this, however, "Email::Filter" contains a trigger mechanism provided by Class::Trigger, to
       allow you to add your own functionality. You do this by calling the "add_trigger" method:

           Email::Filter-&gt;add_trigger( after_accept =&gt; \&amp;log_accept );

       Hopefully this will also help subclassers.

       The methods below will list which triggers they provide.

</pre><h4><b>ERROR</b> <b>RECOVERY</b></h4><pre>
       If something bad happens during the "accept"  or  "pipe"  method,  or  the  "Email::Filter"  object  gets
       destroyed  without  being properly handled, then a fail-safe error recovery process is called. This first
       checks for the existence of the "emergency" setting, and tries to deliver to that mailbox. If there is no
       emergency mailbox or that delivery failed, then the program will either exit  with  a  temporary  failure
       error  code,  queuing the mail for redelivery later, or produce a warning to standard error, depending on
       the status of the "exit" setting.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Simon Cozens

       •   Casey West

       •   Ricardo SIGNES &lt;<a href="mailto:rjbs@semiotic.systems">rjbs@semiotic.systems</a>&gt;

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       •   Ricardo Signes &lt;<a href="mailto:rjbs@cpan.org">rjbs@cpan.org</a>&gt;

       •   William Yardley &lt;<a href="mailto:pep@veggiechinese.net">pep@veggiechinese.net</a>&gt;

       •   Will Norris &lt;<a href="mailto:will@willnorris.com">will@willnorris.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2003 by Simon Cozens.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.34.0                                       2022-06-03                                 <u>Email::<a href="../man3pm/Filter.3pm.html">Filter</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>