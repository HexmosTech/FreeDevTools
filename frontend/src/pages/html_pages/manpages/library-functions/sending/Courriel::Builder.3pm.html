<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courriel::Builder - Build emails with sugar</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcourriel-perl">libcourriel-perl_0.49-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Courriel::Builder - Build emails with sugar

</pre><h4><b>VERSION</b></h4><pre>
       version 0.49

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Courriel::Builder;

           my $email = build_email(
               subject('An email for you'),
               from('<a href="mailto:joe@example.com">joe@example.com</a>'),
               to( '<a href="mailto:jane@example.com">jane@example.com</a>', '<a href="mailto:alice@example.com">alice@example.com</a>' ),
               header( 'X-Generator' =&gt; 'MyApp' ),
               plain_body($plain_text),
               html_body(
                   $html,
                   attach('path/to/image.jpg'),
                   attach('path/to/other-image.jpg'),
               ),
               attach('path/to/spreadsheet.xls'),
               attach( content =&gt; $file_content ),
           );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides some sugar syntax for emails of all shapes sizes, from simple emails with a plain
       text body to emails with both plain and html bodies, html with attached images, etc.

</pre><h4><b>API</b></h4><pre>
       This module exports all of the following functions by default. It uses Sub::Exporter under the hood,
       which means you can easily import the functions with different names. See Sub::Exporter for details.

   <b>build_email(</b> <b>...</b> <b>)</b>
       This function returns a new Courriel object. It takes the results of all the other functions you call as
       input.

       It expects you to pass in a body of some sort, whether text, html, or both, and will throw an error if
       you don't.

       It will add Date and Message-ID headers to your email if you don't provide them, ensuring that the email
       is RFC-compliant.

   <b>subject($subject)</b>
       This sets the subject of the email. It expects a single string. You can pass an empty string, but not
       "undef".

   <b>from($from)</b>
       This sets the From header of the email. It expects a single string or an object with a "format()" method
       like "Email::Address::XS".

   <b>to($from)</b>
       This sets the To header of the email. It expects a list of strings and/or objects with a "format()"
       method like "Email::Address::XS".

   <b>cc($from)</b>
       This sets the Cc header of the email. It expects a list of strings and/or objects with a "format()"
       method like "Email::Address::XS".

   <b>header(</b> <b>$name</b> <b>=&gt;</b> <b>$value</b> <b>)</b>
       This sets a header's value. You can call it as many times as you want, and you can call it more than once
       with the same header name to set multiple values for that header.

   <b>plain_body(</b> <b>...</b> <b>)</b>
       This defines a plain text body for the email. You can call it with a single argument, a scalar or
       reference to a scalar. This creates a text/plain part based on the content you provide in that argument.
       By default, the charset for the body is UTF-8 and the encoding is base64.

       You can also call this function with a hash of options. It accepts the following options:

       •   content

           The content of the body. This can be a string or scalar reference.

       •   charset

           The charset for the body. This defaults to UTF-8.

       •   encoding

           The  encoding  for  the body. This defaults to base64. Other valid values are quoted-printable, 7bit,
           and 8bit.

           It is strongly recommended that you let Courriel handle the transfer encoding for you.

   <b>html_body(</b> <b>...</b> <b>)</b>
       This accepts the same arguments as the "plain_body()" function.

       You can <u>also</u> pass in the results of one or more  calls  to  the  "attach()"  function.  If  you  pass  in
       attachments,  it creates a multipart/related email part, which lets you refer to images by the Content-ID
       using the "cid:" URL scheme.

   <b>attach(</b> <b>...</b> <b>)</b>
       This function creates an attachment for the email. In the  simplest  form,  you  can  pass  it  a  single
       argument, which should be a path to a file on disk. This file will be attached to the email.

       You can also pass a hash of options. The valid keys are:

       •   file

           The file to attach to the email. You can also pass the content explicitly.

       •   content

           The content of the attachment. This can be a string or scalar reference.

       •   filename

           You  can  set  the  filename that will be used in the attachment's Content-Disposition header. If you
           pass a "file" parameter, that will be used when  this  isn't  provided.  If  you  pass  as  "content"
           parameter,  then  there  will  be  no  filename  set  for the attachment unless you pass a "filename"
           parameter as well.

       •   mime_type

           You can explicitly set the mime type for the  attachment.  If  you  don't,  this  function  will  use
           File::LibMagic to try to figure out the mime type for the attachment.

       •   content_id

           This  will  set  the Content-ID header for the attachment. If you're creating a HTML body with "cid:"
           scheme URLs, you'll need to set this for each attachment that the HTML body refers to.

           The id will be wrapped in angle brackets ("&lt;id-goes-here&gt;") when set as a header.

</pre><h4><b>COOKBOOK</b></h4><pre>
       Some examples of how to build different types of emails.

   <b>Simple</b> <b>Email</b> <b>With</b> <b>Plain</b> <b>Text</b> <b>Body</b>
           my $email = build_email(
               subject('An email for you'),
               from('<a href="mailto:joe@example.com">joe@example.com</a>'),
               to( '<a href="mailto:jane@example.com">jane@example.com</a>', '<a href="mailto:alice@example.com">alice@example.com</a>' ),
               plain_body($plain_text),
           );

       This creates an email with a single text/plain part.

   <b>Simple</b> <b>Email</b> <b>With</b> <b>HTML</b> <b>Body</b>
           my $email = build_email(
               subject('An email for you'),
               from('<a href="mailto:joe@example.com">joe@example.com</a>'),
               to( '<a href="mailto:jane@example.com">jane@example.com</a>', '<a href="mailto:alice@example.com">alice@example.com</a>' ),
               html_body($html_text),
           );

       This creates an email with a single text/html part.

   <b>Email</b> <b>With</b> <b>Both</b> <b>Plain</b> <b>and</b> <b>HTML</b> <b>Bodies</b>
           my $email = build_email(
               subject('An email for you'),
               from('<a href="mailto:joe@example.com">joe@example.com</a>'),
               to( '<a href="mailto:jane@example.com">jane@example.com</a>', '<a href="mailto:alice@example.com">alice@example.com</a>' ),
               plain_body($plain_text),
               html_body($html_text),
           );

       This creates an email with this structure:

           multipart/alternative
             |
             |-- text/plain (disposition = inline)
             |-- text/html  (disposition = inline)

   <b>Email</b> <b>With</b> <b>Both</b> <b>Plain</b> <b>and</b> <b>HTML</b> <b>Bodies</b> <b>and</b> <b>Inline</b> <b>Images</b>
           my $email = build_email(
               subject('An email for you'),
               from('<a href="mailto:joe@example.com">joe@example.com</a>'),
               to( '<a href="mailto:jane@example.com">jane@example.com</a>', '<a href="mailto:alice@example.com">alice@example.com</a>' ),
               plain_body($plain_text),
               html_body(
                   $html_text,
                   attach(
                       file       =&gt; 'path/to/image1.jpg',
                       content_id =&gt; 'image1',
                   ),
                   attach(
                       file       =&gt; 'path/to/image2.jpg',
                       content_id =&gt; 'image2',
                   ),
               ),
           );

       This creates an email with this structure:

           multipart/alternative
             |
             |-- text/plain (disposition = inline)
             |-- multipart/related
                   |
                   |-- text/html  (disposition = inline)
                   |-- image/jpeg (disposition = attachment, Content-ID = image1)
                   |-- image/jpeg (disposition = attachment, Content-ID = image2)

   <b>Email</b> <b>With</b> <b>Both</b> <b>Plain</b> <b>and</b> <b>HTML</b> <b>Bodies</b> <b>and</b> <b>Attachments</b>
           my $email = build_email(
               subject('An email for you'),
               from('<a href="mailto:joe@example.com">joe@example.com</a>'),
               to( '<a href="mailto:jane@example.com">jane@example.com</a>', '<a href="mailto:alice@example.com">alice@example.com</a>' ),
               plain_body($plain_text),
               html_body(
                   $html_text,
               ),
               attach('path/to/spreadsheet.xls'),
               attach( content =&gt; \$png_image_content ),
           );

       This creates an email with this structure:

           multipart/mixed
             |
             |-- multipart/alternative
             |     |
             |     |-- text/plain (disposition = inline)
             |     |-- text/html  (disposition = inline)
             |
             |-- application/vnd.ms-excel (disposition = attachment)
             |-- image/png                (disposition = attachment)

</pre><h4><b>SUPPORT</b></h4><pre>
       Bugs may be submitted at &lt;https://github.com/houseabsolute/Courriel/issues&gt;.

       I am also usually active on IRC as 'autarch' on "irc://irc.perl.org".

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Courriel can be found at &lt;https://github.com/houseabsolute/Courriel&gt;.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dave Rolsky &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2021 by Dave Rolsky.

       This is free software, licensed under:

         The Artistic License 2.0 (GPL Compatible)

       The full text of the license can be found in the <u>LICENSE</u> file included with this distribution.

perl v5.32.1                                       2021-08-22                             <u>Courriel::<a href="../man3pm/Builder.3pm.html">Builder</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>