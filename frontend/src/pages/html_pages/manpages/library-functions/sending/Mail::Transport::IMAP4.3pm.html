<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Transport::IMAP4 - proxy to Mail::IMAPClient</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-box-imap4-perl">libmail-box-imap4-perl_3.009-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Transport::IMAP4 - proxy to Mail::IMAPClient

</pre><h4><b>INHERITANCE</b></h4><pre>
        Mail::Transport::IMAP4
          is a Mail::Transport::Receive
          is a Mail::Transport
          is a Mail::Reporter

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $imap = Mail::Transport::IMAP4-&gt;new(...);
        my $message = $imap-&gt;receive($id);
        $imap-&gt;send($message);

        my Mail::Box::Manager $mgr = Mail::Box::Manager-&gt;new;
        $mgr-&gt;open(
            # Generic folder options
            folder =&gt; 'imaps://...',
            access =&gt; 'rw',
            extract =&gt; 'ALWAYS',

            # Mail::IMAPClient options start with [A-Z]
            IgnoreSizeErrors =&gt; 1,
            Ssl =&gt; 1,
        );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The IMAP4 protocol is quite complicated: it is feature rich and allows various asynchronous actions.  The
       main document describing IMAP is rfc3501 (which obsoleted the original specification of protocol 4r1 in
       rfc2060 in March 2003).

       This package, as part of MailBox, does not implement the actual protocol itself but uses Mail::IMAPClient
       to do the work. The task for this package is to hide as many differences between that module's interface
       and the common MailBox folder types.  Multiple Mail::Box::IMAP4 folders can share one
       Mail::Transport::IMAP4 connection.

       The Mail::IMAPClient module is the best IMAP4 implementation for Perl5, but is not maintained.  There are
       many known problems with the module, and solving those is outside the scope of MailBox.  See
       <u><a href="http://rt.cpan.org/Public/Dist/Display.html">http://rt.cpan.org/Public/Dist/Display.html</a>?Name=Mail-IMAPClient</u> for all the reported bugs.

       Extends "DESCRIPTION" in Mail::Transport::Receive.

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Mail::Transport::Receive.

   <b>Constructors</b>
       Extends "Constructors" in Mail::Transport::Receive.

       Mail::Transport::IMAP4-&gt;<b>new</b>(%options)
           Create  the  IMAP  connection  to  the server.  IMAP servers can handle multiple folders for a single
           user, which means that connections may get shared.  This is sharing is hidden for the user.

           When an "imap_client" is specified, then the options "hostname", "port", "username",  and  "password"
           are extracted from it.

           All  %options  which  start  with  a  capital are passed as initiation to Mail::IMAPClient.  See that
           manual about the huge pile of parameters.  When talking to Microsoft Exchange, you probabaly need the
           "IgnoreSizeErros".  Probably, you need "Ssl" or "StartTLS" as well.  As feature, you may also pass  a
           HASH to Ssl, where "Mail::IMAPClient" only accepts an ARRAY.

           For backwards compatibility, "ssl" is an alternative for "Ssl", and "starttls" for "StartTLS".

            -Option      --Defined in     --Default
             authenticate                   'AUTO'
             domain                         &lt;server_name&gt;
             executable    Mail::Transport  undef
             hostname      Mail::Transport  'localhost'
             imap_client                    Mail::IMAPClient
             interval      Mail::Transport  30
             log           Mail::Reporter   'WARNINGS'
             password      Mail::Transport  undef
             port          Mail::Transport  143
             proxy         Mail::Transport  undef
             retry         Mail::Transport  &lt;false&gt;
             timeout       Mail::Transport  120
             trace         Mail::Reporter   'WARNINGS'
             username      Mail::Transport  undef
             via           Mail::Transport  'imap'

           authenticate =&gt; TYPE|ARRAY
             Authenthication   method   to   <b>login()</b>,  which  will  be  passed  to  Mail::IMAPClient  subroutine
             authenticate.  See the latter method for the available types.  You may provide an ARRAY of types.

           domain =&gt; WINDOWS_DOMAIN
             Used for NTLM authentication.

           executable =&gt; FILENAME
           hostname =&gt; HOSTNAME|ARRAY
           imap_client =&gt; OBJECT|CLASS
             When an OBJECT is supplied, that client will be used for the implementation of the IMAP4  protocol.
             Information  about  server  and such are extracted from the OBJECT to have the accessors to produce
             correct results. The OBJECT shall be a Mail::IMAPClient.

             When a CLASS is given, an object of that type is created  for  you.   The  created  object  can  be
             retrieved via <b>imapClient()</b>, and than configured as defined by Mail::IMAPClient.

           interval =&gt; SECONDS
           log =&gt; LEVEL
           password =&gt; STRING
           port =&gt; INTEGER
           proxy =&gt; PATH
           retry =&gt; NUMBER|undef
           timeout =&gt; SECONDS
           trace =&gt; LEVEL
           username =&gt; STRING
           via =&gt; CLASS|NAME

   <b>Receiving</b> <b>mail</b>
       Extends "Receiving mail" in Mail::Transport::Receive.

       $obj-&gt;<b>receive</b>( [$unique_message_id] )
           Inherited, see "Receiving mail" in Mail::Transport::Receive

   <b>Server</b> <b>connection</b>
       Extends "Server connection" in Mail::Transport::Receive.

       $obj-&gt;<b>findBinary</b>( $name, [@directories] )
           Inherited, see "Server connection" in Mail::Transport

       $obj-&gt;<b>remoteHost</b>()
           Inherited, see "Server connection" in Mail::Transport

       $obj-&gt;<b>retry</b>()
           Inherited, see "Server connection" in Mail::Transport

   <b>Attributes</b>
       $obj-&gt;<b>authentication</b>( ['AUTO'|$type|$types] )
           Returns  a LIST of ARRAYS, each describing one possible way to contact the server. Each pair contains
           a mechanism name and a challenge callback (which may be "undef").

           The  settings  are  used  by  <b>login()</b>  to  get  server  access.   The  initial  value  origins   from
           new(authenticate), but may be changed later.

           Available basic $types are "CRAM-MD5", "NTLM", and "PLAIN".  With "AUTO", all available types will be
           tried.   When  the  Authen::NTLM  is  not  installed, the "NTLM" option will silently be skipped.  Be
           warned that, because of "PLAIN", erroneous username/password combinations will be passed readible  as
           last attempt!

           The  "NTLM"  authentication requires Authen::NTLM to be installed.  Other methods may be added later.
           Besides, you may also specify a CODE reference which implements some authentication.

           An ARRAY as $type can be used to specify both mechanism as callback.  When no array is used, callback
           of the pair is set to "undef".  See "authenticate" in Mail::IMAPClient for the gory details.

           example:

            $transporter-&gt;authentication('CRAM-MD5', [MY_AUTH =&gt; \&amp;c], 'PLAIN');

            foreach my $pair ($transporter-&gt;authentication)
            {   my ($mechanism, $challenge) = @$pair;
                ...
            }

       $obj-&gt;<b>domain</b>( [$domain] )
           Used in NTLM authentication to define the  Windows  domain  which  is  accessed.   Initially  set  by
           new(domain) and defaults to the server's name.

       $obj-&gt;<b>usesSSL</b>()
           Returns a boolean.

   <b>Exchanging</b> <b>Information</b>
   <b>Protocol</b> <b>[internals]</b>
       The follow methods handle protocol internals, and should not be used by a normal user of this class.

       $obj-&gt;<b>appendMessage</b>( $message, $foldername, [$date] )
           Write the message to the server.  The optional DATA can be a RFC-822 date or a timestamp.

       $obj-&gt;<b>createFolder</b>($name)
           Add a folder.

       $obj-&gt;<b>createImapClient</b>($class, %options)
           Create an object of $class, which extends Mail::IMAPClient.

           All %options will be passed to the constructor (new) of $class.

       $obj-&gt;<b>currentFolder</b>( [$foldername] )
           Be  sure that the specific FOLDER is the current one selected.  If the folder is already selected, no
           IMAP traffic will be produced.

           The boolean return value indicates whether the folder is selectable. It will return undef if it  does
           not exist.

       $obj-&gt;<b>deleteFolder</b>($name)
           Remove one folder.

       $obj-&gt;<b>destroyDeleted</b>($folder)
           Command the server to delete for real all messages which are flagged to be deleted.

       $obj-&gt;<b>fetch</b>(ARRAY-$of-$messages, $info)
           Get  some  $info  about  the  $messages  from  the  server.   The  specified  messages  shall  extend
           Mail::Box::Net::Message, Returned is a list of hashes, each info about one result.  The  contents  of
           the  hash differs per $info, but at least a "message" field will be present, to relate to the message
           in question.

           The right folder should be selected before this method is  called.  When  the  connection  was  lost,
           "undef"  is  returned.   Without any messages, and empty array is returned.  The retrieval is done by
           Mail::IMAPClient method fetch(), which is then parsed.

       $obj-&gt;<b>flagsToLabels</b>($what, @flags)
       Mail::Transport::IMAP4-&gt;<b>flagsToLabels</b>($what, @flags)
           In SCALAR context, a hash with labels is returned.  In LIST context, pairs are returned.

           The $what parameter can be 'SET', 'CLEAR', or 'REPLACE'.  With the latter, all  standard  imap  flags
           which  do  not  appear  in  the  list will be ignored: their value may either by set or cleared.  See
           <b>getFlags()</b>

           Unknown  flags  in  @flags  are  stripped  from  their  backslash  and  lower-cased.   For  instance,
           '\SomeWeirdFlag'  will become `someweirdflag =&gt; 1'.  It will be set to '1' for "SET", and '0' in case
           of "CLEAR".

           example: translating IMAP4 flags into MailBox flags

            my @flags  = ('\Seen', '\Flagged');
            my $labels = Mail::Transport::IMAP4-&gt;flags2labels(SET =&gt; @flags);

       $obj-&gt;<b>folders</b>( [$foldername] )
           Returns a list of  folder  names  which  are  sub-folders  of  the  specified  $foldername.   Without
           $foldername, the top-level foldernames are returned.

       $obj-&gt;<b>getFields</b>( $uid, $name, [$name, ...] )
           Get  the records with the specified NAMES from the header.  The header fields are returned as list of
           Mail::Message::Field::Fast objects.  When the name is "ALL", the whole header is returned.

       $obj-&gt;<b>getFlags</b>($folder, $id)
           Returns the values of all flags which are related to the message with the specified $id.  These flags
           are translated into the names which are standard for the MailBox suite.

           A HASH is returned.  Names which do not appear will  also  provide  a  value  in  the  returned:  the
           negative for the value is it was present.

       $obj-&gt;<b>getMessageAsString</b>($message|$uid)
           Returns the whole text of the specified message: the head and the body.

       $obj-&gt;<b>ids</b>()
           Returns a list of UIDs which are defined by the IMAP server.

       $obj-&gt;<b>imapClient</b>()
           Returns  the  object which implements the IMAP4 protocol, an instance of a Mail::IMAPClient, which is
           logged-in and ready to use.

           If the contact to the server was still present or could be established, an Mail::IMAPClient object is
           returned.  Else, "undef" is returned and no further actions should be tried on the object.

       $obj-&gt;<b>labelsToFlags</b>(HASH|PAIRS)
       Mail::Transport::IMAP4-&gt;<b>labelsToFlags</b>(HASH|PAIRS)
           Convert MailBox labels into IMAP flags.  Returned is a string.  Unsupported labels are ignored.

       $obj-&gt;<b>listFlags</b>()
           Returns all predefined flags as list.

       $obj-&gt;<b>login</b>()
           Establish a new connection to the IMAP4 server, using username and password.

       $obj-&gt;<b>setFlags</b>($id, $label, $value, [$label, $value], ...)
           Change the flags on the message which are represented by the label.  The value which can  be  related
           to  the  label  will  be  lost,  because  IMAP only defines a boolean value, where MailBox labels can
           contain strings.

           Returned is a list of $label=&gt;$value pairs which could not be send to the IMAP server.  These  values
           may be cached in a different way.

   <b>Error</b> <b>handling</b>
       Extends "Error handling" in Mail::Transport::Receive.

       $obj-&gt;<b>AUTOLOAD</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>addReport</b>($object)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
       Mail::Transport::IMAP4-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>errors</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>log</b>( [$level, [$strings]] )
       Mail::Transport::IMAP4-&gt;<b>log</b>( [$level, [$strings]] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logPriority</b>($level)
       Mail::Transport::IMAP4-&gt;<b>logPriority</b>($level)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logSettings</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>notImplemented</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>report</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>reportAll</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>trace</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>warnings</b>()
           Inherited, see "Error handling" in Mail::Reporter

   <b>Cleanup</b>
       Extends "Cleanup" in Mail::Transport::Receive.

       $obj-&gt;<b>DESTROY</b>()
           The connection is cleanly terminated when the program is terminated.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error: Cannot connect to $host:$port for IMAP4: $!
       Error: IMAP cannot connect to $host: $@
       Notice: IMAP4 authenication $mechanism to $host:$port successful
       Error: IMAP4 requires a username and password
       Error: IMAP4 username $username requires a password
       Error: Package $package does not implement $method.
           Fatal  error:  the specific package (or one of its superclasses) does not implement this method where
           it should. This message means that some other related classes do implement this  method  however  the
           class  at  hand does not.  Probably you should investigate this and probably inform the author of the
           package.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module is part of Mail-Box-IMAP4 distribution version 3.009,  built  on  April  18,  2025.  Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer]. For other contributors see ChangeLog.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-19                        <u>Mail::Transport::<a href="../man3pm/IMAP4.3pm.html">IMAP4</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>