<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalyst::View::Email - Send Email from Catalyst</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcatalyst-view-email-perl">libcatalyst-view-email-perl_0.36-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Catalyst::View::Email - Send Email from Catalyst

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This module sends out emails from a stash key specified in the configuration settings.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       WARNING: since version 0.10 the configuration options slightly changed!

       Use the helper to create your View:

           $ script/myapp_create.pl view Email Email

       In your app configuration:

           __PACKAGE__-&gt;config(
               'View::Email' =&gt; {
                   # Where to look in the stash for the email information.
                   # 'email' is the default, so you don't have to specify it.
                   stash_key =&gt; 'email',
                   # Define the defaults for the mail
                   default =&gt; {
                       # Defines the default content type (mime type). Mandatory
                       content_type =&gt; 'text/plain',
                       # Defines the default charset for every MIME part with the
                       # content type text.
                       # According to RFC2049 a MIME part without a charset should
                       # be treated as US-ASCII by the mail client.
                       # If the charset is not set it won't be set for all MIME parts
                       # without an overridden one.
                       # Default: none
                       charset =&gt; 'utf-8'
                   },
                   # Setup how to send the email
                   # all those options are passed directly to Email::Sender::Simple
                   sender =&gt; {
                       # if mailer doesn't start with Email::Sender::Simple::Transport::,
                       # then this is prepended.
                       mailer =&gt; 'SMTP',
                       # mailer_args is passed directly into Email::Sender::Simple
                       mailer_args =&gt; {
                           host     =&gt; 'smtp.example.com', # defaults to localhost
                           sasl_username =&gt; 'sasl_username',
                           sasl_password =&gt; 'sasl_password',
                   }
                 }
               }
           );

</pre><h4><b>NOTE</b> <b>ON</b> <b>SMTP</b></h4><pre>
       If you use SMTP and don't specify host, it will default to localhost and attempt delivery. This often
       means an email will sit in a queue and not be delivered.

</pre><h4><b>SENDING</b> <b>EMAIL</b></h4><pre>
       Sending email is just filling the stash and forwarding to the view:

           sub controller : Private {
               my ( $self, $c ) = @_;

               $c-&gt;stash-&gt;{email} = {
                   to      =&gt; '<a href="mailto:jshirley@gmail.com">jshirley@gmail.com</a>',
                   cc      =&gt; '<a href="mailto:abraxxa@cpan.org">abraxxa@cpan.org</a>',
                   from    =&gt; '<a href="mailto:no-reply@foobar.com">no-reply@foobar.com</a>',
                   subject =&gt; 'I am a Catalyst generated email',
                   body    =&gt; 'Body Body Body',
               };

               $c-&gt;forward( $c-&gt;view('Email') );
           }

       Alternatively you can use a more raw interface and specify the headers as an array reference like it is
       passed to Email::MIME::Creator.  Note that you may also mix both syntaxes if you like ours better but
       need to specify additional header attributes.  The attributes are appended to the header array reference
       without overwriting contained ones.

           $c-&gt;stash-&gt;{email} = {
               header =&gt; [
                   To      =&gt; '<a href="mailto:jshirley@gmail.com">jshirley@gmail.com</a>',
                   Cc      =&gt; '<a href="mailto:abraxxa@cpan.org">abraxxa@cpan.org</a>',
                   Bcc     =&gt; join ',', qw/<a href="mailto:hidden@secret.com">hidden@secret.com</a> <a href="mailto:hidden2@foobar.com">hidden2@foobar.com</a>/,
                   From    =&gt; '<a href="mailto:no-reply@foobar.com">no-reply@foobar.com</a>',
                   Subject =&gt; 'Note the capitalization differences',
               ],
               body =&gt; qq{Ain't got no body, and nobody cares.},
               # Or, send parts
               parts =&gt; [
                   Email::MIME-&gt;create(
                       attributes =&gt; {
                           content_type =&gt; 'text/plain',
                           disposition  =&gt; 'attachment',
                           charset      =&gt; 'US-ASCII',
                       },
                       body =&gt; qq{Got a body, but didn't get ahead.},
                   )
               ],
           };

       You can set the envelope sender and recipient as well:

         $c-&gt;stash-&gt;{email} = {

           envelope_from =&gt; '<a href="mailto:envelope-from@example.com">envelope-from@example.com</a>',
           from          =&gt; '<a href="mailto:header-from@example.com">header-from@example.com</a>',

           envelope_to   =&gt; [ '<a href="mailto:foo@example.com">foo@example.com</a>', '<a href="mailto:bar@example.com">bar@example.com</a>' ],
           to            =&gt; 'Undisclosed Recipients:;',

           ...
         };

</pre><h4><b>HANDLING</b> <b>ERRORS</b></h4><pre>
       If the email fails to send, the view will die (throw an exception).  After your forward to the view, it
       is a good idea to check for errors:

           $c-&gt;forward( $c-&gt;view('Email') );

           if ( scalar( @{ $c-&gt;error } ) ) {
               $c-&gt;<a href="../man0/error.0.html">error</a>(0); # Reset the error condition if you need to
               $c-&gt;response-&gt;body('Oh noes!');
           } else {
               $c-&gt;response-&gt;body('Email sent A-OK! (At least as far as we can tell)');
           }

</pre><h4><b>USING</b> <b>TEMPLATES</b> <b>FOR</b> <b>EMAIL</b></h4><pre>
       Now, it's no fun to just send out email using plain strings.  Take a look at
       Catalyst::View::Email::Template to see how you can use your favourite template engine to render the mail
       body.

</pre><h4><b>METHODS</b></h4><pre>
       new Validates the base config and creates the Email::Sender::Simple object for later use by process.

       process($c)
           The process method does the actual processing when the view is dispatched to.

           This method sets up the email parts and hands off to Email::Sender::Simple to handle the actual email
           delivery.

       setup_attributes($c, $attr)
           Merge  attributes with the configured defaults. You can override this method to return a structure to
           pass  into  generate_message  which  subsequently  passes  the  return  value  of  this   method   to
           Email::MIME-&gt;create under the "attributes" key.

       generate_message($c, $attr)
           Generate a message part, which should be an Email::MIME object and return it.

           Takes the attributes, merges with the defaults as necessary and returns a message object.

</pre><h4><b>TROUBLESHOOTING</b></h4><pre>
       As  with most things computer related, things break.  Email even more so.  Typically any errors are going
       to come from using SMTP as your sending method, which means that if you  are  having  trouble  the  first
       place   to   look   is   at   Email::Sender::Transport::SMTP.    This   module  is  just  a  wrapper  for
       Email::Sender::Simple, so if you get an error on sending, it is likely from there anyway.

       If you are using SMTP and have troubles sending, whether it is authentication  or  a  very  bland  "Can't
       send" message, make sure that you have Net::SMTP and, if applicable, Net::SMTP::SSL installed.

       It  is  very  simple  to  check that you can connect via Net::SMTP, and if you do have sending errors the
       first thing to do is to write a simple script that attempts to connect.  If  it  works,  it  is  probably
       something  in  your  configuration so double check there.  If it doesn't, well, keep modifying the script
       and/or your mail server configuration until it does!

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
   <b>Catalyst::View::Email::Template</b> <b>-</b> <b>Send</b> <b>fancy</b> <b>template</b> <b>emails</b> <b>with</b> <b>Cat</b>
   <b>Catalyst::Manual</b> <b>-</b> <b>The</b> <b>Catalyst</b> <b>Manual</b>
   <b>Catalyst::Manual::Cookbook</b> <b>-</b> <b>The</b> <b>Catalyst</b> <b>Cookbook</b>
</pre><h4><b>AUTHORS</b></h4><pre>
       J. Shirley &lt;<a href="mailto:jshirley@gmail.com">jshirley@gmail.com</a>&gt;

       Alexander Hartmaier &lt;<a href="mailto:abraxxa@cpan.org">abraxxa@cpan.org</a>&gt;

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       (Thanks!)

       Matt S Trout

       Daniel Westermann-Clark

       Simon Elliott &lt;<a href="mailto:cpan@browsing.co.uk">cpan@browsing.co.uk</a>&gt;

       Roman Filippov

       Lance Brown &lt;<a href="mailto:lance@bearcircle.net">lance@bearcircle.net</a>&gt;

       Devin Austin &lt;<a href="mailto:dhoss@cpan.org">dhoss@cpan.org</a>&gt;

       Chris Nehren &lt;<a href="mailto:apeiron@cpan.org">apeiron@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2007 - 2009 the Catalyst::View::Email "AUTHORS" and "CONTRIBUTORS" as listed above.

</pre><h4><b>LICENSE</b></h4><pre>
       This library is free software, you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

perl v5.38.2                                       2024-03-04                         <u>Catalyst::View::<a href="../man3pm/Email.3pm.html">Email</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>