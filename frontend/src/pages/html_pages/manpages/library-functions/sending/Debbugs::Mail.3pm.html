<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debbugs::Mail -- Outgoing Mail Handling</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Debbugs::Mail -- Outgoing Mail Handling

</pre><h4><b>SYNOPSIS</b></h4><pre>
       use Debbugs::Mail qw(send_mail_message get_addresses);

       my @addresses = get_addresses('blah blah blah <a href="mailto:foo@bar.com">foo@bar.com</a>') send_mail_message(message =&gt; &lt;&lt;END,
       recipients=&gt;[@addresses]); To: $addresses[0] Subject: Testing

       Testing 1 2 3 END

</pre><h4><b>EXPORT</b> <b>TAGS</b></h4><pre>
       :all -- all functions that can be exported

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>get_addresses</b>
            my @addresses = get_addresses('<a href="mailto:don@debian.org">don@debian.org</a> <a href="mailto:blars@debian.org">blars@debian.org</a>
                                           <a href="mailto:kamion@debian.org">kamion@debian.org</a> <a href="mailto:ajt@debian.org">ajt@debian.org</a>');

       Given a string containing some e-mail addresses, parses the string using Mail::Address-&gt;parse and returns
       a list of the addresses.

   <b>default_headers</b>
             my @head = default_headers(queue_file =&gt; 'foo',
                                        data       =&gt; $data,
                                        msgid      =&gt; $header{'message-id'},
                                        msgtype    =&gt; 'error',
                                        headers    =&gt; [...],
                                       );
             create_mime_message(\@headers,
                                ...
                                );

       This function is generally called to generate the headers for create_mime_message (and anything else that
       needs a set of default headers.)

       In  list  context,  returns an array of headers. In scalar context, returns headers for shoving in a mail
       message after encoding using encode_headers.

       <u>options</u>

       queue_file -- the queue file which will generate this set of headers (refered to as $nn in lots of the
       code)
       data -- the data of the bug which this message involves; can be undefined if there is no bug involved.
       msgid -- the Message-ID: of the message which will generate this set of headers
       msgtype -- the type of message that this is.
       pr_msg -- the pr message field
       headers -- a set of headers which will override the default headers; these headers will be passed through
       (and may be reordered.) If a particular header is undef, it overrides the default, but isn't passed
       through.

       <u>default</u> <u>headers</u>

       X-Loop -- set to the maintainer e-mail
       From -- set to the maintainer e-mail
       To -- set to Unknown recipients
       Subject -- set to Unknown subject
       Message-ID -- set appropriately (see code)
       Precedence -- set to bulk
       References -- set to the full set of message ids that are known (from data and the msgid option)
       In-Reply-To -- set to msg id or the msgid from data
       X-Project-PR-Message -- set to pr_msg with the bug number appended
       X-Project-PR-Package -- set to the package of the bug
       X-Project-PR-Keywords -- set to the keywords of the bug
       X-Project-PR-Source -- set to the source of the bug

   <b>send_mail_message</b>
            send_mail_message(message    =&gt; $message,
                              recipients =&gt; [@recipients],
                              envelope_from =&gt; '<a href="mailto:don@debian.org">don@debian.org</a>',
                             );

       message -- message to send out
       recipients -- recipients to send the message to. If undefed or an empty arrayref, will use '-t' to parse
       the message for recipients.
       envelope_from -- envelope_from for outgoing messages
       encode_headers -- encode headers using RFC1522 (default)
       parse_for_recipients -- use -t to parse the message for recipients in addition to those specified. [Can
       be used to set Bcc recipients, for example.]

       Returns true on success, false on failures. All errors are indicated using warn.

   <b>encode_headers</b>
            $message = encode_heeaders($message);

       RFC 1522 encodes the headers of a message

   <b>rfc822_date</b>
            rfc822_date

       Return the current date in RFC822 format in the UTC timezone

   <b>reply_headers</b>
            reply_headers(MIME::Parser-&gt;new()-&gt;parse_data(\$data));

       Generates suggested headers and a body for replies. Primarily useful for use in RFC2368 mailto: entries.

</pre><h4><b>PRIVATE</b> <b>FUNCTIONS</b></h4><pre>
   <b>_send_message</b>
            _send_message($message,@sendmail_args);

       Private function that actually calls sendmail with @sendmail_args and sends message $message.

       dies with errors, so calls to this function in send_mail_message should be wrapped in eval.

perl v5.40.1                                       2025-02-24                                 <u>Debbugs::<a href="../man3pm/Mail.3pm.html">Mail</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>