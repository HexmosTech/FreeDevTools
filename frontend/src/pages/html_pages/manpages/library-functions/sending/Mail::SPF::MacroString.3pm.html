<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::SPF::MacroString - SPF record macro string class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-spf-perl">libmail-spf-perl_3.20250505-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::SPF::MacroString - SPF record macro string class

</pre><h4><b>VERSION</b></h4><pre>
       version 3.20250505

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Providing</b> <b>the</b> <b>expansion</b> <b>context</b> <b>early</b>
           use Mail::SPF::MacroString;

           my $macrostring = Mail::SPF::MacroString-&gt;new(
               text    =&gt; '%{ir}.%{v}._spf.%{d2}',
               server  =&gt; $server,
               request =&gt; $request
           );

           my $expanded = $macrostring-&gt;expand;

   <b>Providing</b> <b>the</b> <b>expansion</b> <b>context</b> <b>late</b>
           use Mail::SPF::MacroString;

           my $macrostring = Mail::SPF::MacroString-&gt;new(
               text    =&gt; '%{ir}.%{v}._spf.%{d2}'
           );

           my $expanded1 = $macrostring-&gt;expand($server, $request1);

           $macrostring-&gt;context($server, $request2);
           my $expanded2 = $macrostring-&gt;expand;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       An object of class <b>Mail::SPF::MacroString</b> represents a macro string that can be expanded to a plain
       string in the context of an SPF request.

   <b>Constructor</b>
       The following constructor is provided:

       <b>new(%options)</b>: returns <u>Mail::SPF::MacroString</u>
           Creates a new SPF record macro string object.

           %options is a list of key/value pairs representing any of the following options:

           <b>text</b>
               <u>Required</u>.  The unexpanded text of the new macro string.

           <b>server</b>
               The <u>Mail::SPF::Server</u> object that is to be used when expanding the macro string.  A server object
               need not be attached statically to the macro string; it can be specified dynamically when calling
               the "expand" method.

           <b>request</b>
               The  <u>Mail::SPF::Request</u>  object  that  is  to be used when expanding the macro string.  A request
               object need not be attached statically to the macro string; it can be specified dynamically  when
               calling the "expand" method.

           <b>is_explanation</b>
               A  <u>boolean</u>  denoting  whether  the  macro  string  is an explanation string obtained via an "exp"
               modifier.  If <b>true</b>, the "c", "r", and "t" macros may appear in the macro string,  otherwise  they
               may  not,  and  if  they  do,  a <u>Mail::SPF::EInvalidMacro</u> exception will be thrown when the macro
               string is expanded.  Defaults to <b>false</b>.

   <b>Instance</b> <b>methods</b>
       The following instance methods are provided:

       <b>text</b>: returns <u>string</u>
           Returns the unexpanded text of the macro string.

       <b>context($server,</b> <b>$request)</b>: throws <u>Mail::SPF::EOptionRequired</u>
           Attaches the given <u>Mail::SPF::Server</u> and <u>Mail::SPF::Request</u> objects as  the  context  for  the  macro
           string.

       <b>expand</b>: returns <u>string</u>; throws <u>Mail::SPF::EMacroExpansionCtxRequired</u>, <u>Mail::SPF::EInvalidMacroString</u>,
       <u>Mail::SPF::Result::PermError</u>
       <b>expand($server,</b> <b>$request)</b>: returns <u>string</u>; throws <u>Mail::SPF::EMacroExpansionCtxRequired</u>,
       <u>Mail::SPF::EInvalidMacroString</u>, <u>Mail::SPF::Result::PermError</u>
           Expands  the  text  of the macro string using either the context specified through an earlier call to
           the context() method, or the given context, and returns the resulting string.  See RFC 4408,  8,  for
           how macros are expanded.

       <b>is_explanation</b>: returns <u>boolean</u>
           Returns  <b>true</b>  if  the macro string is an explanation string obtained via an "exp" modifier.  See the
           description of the "new" constructor's "is_explanation" option.

       <b>stringify</b>: returns <u>string</u>
           Returns the expanded text of the macro string if a context is attached to the  object.   Returns  the
           unexpanded  text  otherwise.   You can simply use a Mail::SPF::MacroString object as a string for the
           same effect, see "OVERLOADING".

</pre><h4><b>OVERLOADING</b></h4><pre>
       If a Mail::SPF::MacroString object is used as a <u>string</u>, the "stringify" method is  used  to  convert  the
       object into a string.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mail::SPF, Mail::SPF::Record, Mail::SPF::Server, Mail::SPF::Request

       &lt;<a href="http://tools.ietf.org/html/rfc4408">http://tools.ietf.org/html/rfc4408</a>&gt;

       For availability, support, and license information, see the README file included with Mail::SPF.

</pre><h4><b>AUTHORS</b></h4><pre>
       Julian Mehnle &lt;<a href="mailto:julian@mehnle.net">julian@mehnle.net</a>&gt;, Shevek &lt;<a href="mailto:cpan@anarres.org">cpan@anarres.org</a>&gt;

perl v5.40.1                                       2025-05-10                        <u>Mail::SPF::<a href="../man3pm/MacroString.3pm.html">MacroString</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>