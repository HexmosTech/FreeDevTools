<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ibv_poll_cq - poll a completion queue (CQ)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libibverbs-dev">libibverbs-dev_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ibv_poll_cq - poll a completion queue (CQ)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;infiniband/verbs.h&gt;</b>

       <b>int</b> <b>ibv_poll_cq(struct</b> <b>ibv_cq</b> <u>*cq</u><b>,</b> <b>int</b> <u>num_entries</u><b>,</b>
                       <b>struct</b> <b>ibv_wc</b> <u>*wc</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ibv_poll_cq()</b>  polls  the  CQ <u>cq</u> for work completions and returns the first <u>num_entries</u> (or all available
       completions if the CQ contains fewer than this number) in the array <u>wc</u>.  The argument <u>wc</u> is a pointer  to
       an array of ibv_wc structs, as defined in &lt;infiniband/verbs.h&gt;.

       struct ibv_wc {
               uint64_t                wr_id;          /* ID of the completed Work Request (WR) */
               enum ibv_wc_status      status;         /* Status of the operation */
               enum ibv_wc_opcode      opcode;         /* Operation type specified in the completed WR */
               uint32_t                vendor_err;     /* Vendor error syndrome */
               uint32_t                byte_len;       /* Number of bytes transferred */
               union {
                       __be32                  imm_data;         /* Immediate data (in network byte order) */
                       uint32_t                invalidated_rkey; /* Local RKey that was invalidated */
               };
               uint32_t                qp_num;         /* Local QP number of completed WR */
               uint32_t                src_qp;         /* Source QP number (remote QP number) of completed WR (valid only for UD QPs) */
               unsigned int            wc_flags;       /* Flags of the completed WR */
               uint16_t                pkey_index;     /* P_Key index (valid only for GSI QPs) */
               uint16_t                slid;           /* Source LID */
               uint8_t                 sl;             /* Service Level */
               uint8_t                 dlid_path_bits; /* DLID path bits (not applicable for multicast messages) */
       };

       The attribute wc_flags describes the properties of the work completion.  It is either 0 or the bitwise OR
       of one or more of the following flags:

       <b>IBV_WC_GRH</b>  GRH is present (valid only for UD QPs)

       <b>IBV_WC_WITH_IMM</b>  Immediate data value is valid

       <b>IBV_WC_WITH_INV</b>  Invalidated RKey data value is valid (cannot be combined with IBV_WC_WITH_IMM)

       <b>IBV_WC_IP_CSUM_OK</b>  TCP/UDP checksum over IPv4 and IPv4 header checksum are
              verified.   Valid  only  when <b>device_cap_flags</b> in device_attr indicates current QP is supported by
              checksum offload.

       Not all <u>wc</u> attributes are always valid. If the completion status is other than <b>IBV_WC_SUCCESS</b>,  only  the
       following attributes are valid: wr_id, status, qp_num, and vendor_err.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  success,  <b>ibv_poll_cq()</b>  returns  a  non-negative value equal to the number of completions found.  On
       failure, a negative value is returned.

</pre><h4><b>NOTES</b></h4><pre>
       Each polled completion is removed from the CQ and cannot be returned to it.

       The user should consume work completions at a rate that prevents CQ overrun from occurrence.  In case  of
       a CQ overrun, the async event <b>IBV_EVENT_CQ_ERR</b> will be triggered, and the CQ cannot be used.

       IBV_WC_DRIVER1  will  be  reported  as a response to IBV_WR_DRIVER1 opcode; IBV_WC_DRIVER2/IBV_WC_DRIVER3
       will be reported on specific driver operations.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ibv_post_send.3.html">ibv_post_send</a></b>(3), <b><a href="../man3/ibv_post_recv.3.html">ibv_post_recv</a></b>(3)

</pre><h4><b>AUTHORS</b></h4><pre>
       Dotan Barak &lt;<a href="mailto:dotanba@gmail.com">dotanba@gmail.com</a>&gt;

libibverbs                                         2006-10-31                                     <u><a href="../man3/IBV_POLL_CQ.3.html">IBV_POLL_CQ</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>