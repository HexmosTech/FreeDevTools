<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>io_prep_fsync - Synchronize a file's complete in-core state with that on disk</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libaio-dev">libaio-dev_0.3.113-8_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       io_prep_fsync - Synchronize a file's complete in-core state with that on disk

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/errno.h">errno.h</a>&gt;</b>

       <b>#include</b> <b>&lt;libaio.h&gt;</b>

       <b>static</b> <b>inline</b> <b>void</b> <b>io_prep_fsync(struct</b> <b>iocb</b> <b>*</b><u>iocb</u><b>,</b> <b>int</b> <u>fd</u><b>);</b>

       struct iocb {
            void      *data;
            unsigned  key;
            short          aio_lio_opcode;
            short          aio_reqprio;
            int       aio_fildes;
       };

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is an inline convenience function for setting up an <u>iocbv</u> for a <b>FSYNC</b> request.

       The file for which
       <u>iocb-&gt;aio_fildes</u> <u>=</u> <u>fd</u>
       is a descriptor is set up with the command
       <u>iocb-&gt;aio_lio_opcode</u> <u>=</u> <u>IO_CMD_FSYNC</u>

       The  <b>io_prep_fsync</b>()  function  shall  set  up  an <b>IO_CMD_FSYNC</b> operation to asynchronously force all I/O
       operations associated with the file indicated by the  file  descriptor  <u>aio_fildes</u>  member  of  the  <u>iocb</u>
       structure  referenced  by  the  iocb  argument  and  queued at the time of the call to <b>io_submit</b>() to the
       synchronized I/O completion state. The function call shall return when the  synchronization  request  has
       been initiated or queued to the file or device (even when the data cannot be synchronized immediately).

       All  currently  queued I/O operations shall be completed as if by a call to <b><a href="../man2/fsync.2.html">fsync</a></b>(2); that is, as defined
       for synchronized I/O file integrity completion. If the operation queued by <b>io_prep_fsync</b>()  fails,  then,
       as for <b><a href="../man2/fsync.2.html">fsync</a></b>(2), outstanding I/O operations are not guaranteed to have been completed.

       If  <b>io_prep_fsync</b>()  succeeds,  then  it  is  only  the  I/O  that  was queued at the time of the call to
       <b><a href="../man3/io_submit.3.html">io_submit</a></b>(3) that is guaranteed to be  forced  to  the  relevant  completion  state.  The  completion  of
       subsequent I/O on the file descriptor is not guaranteed to be completed in a synchronized fashion.

       This function returns immediately. To schedule the operation, the function <b><a href="../man3/io_submit.3.html">io_submit</a></b>(3) must be called.

       Simultaneous asynchronous operations using the same <u>iocb</u> produce undefined results.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       None.

</pre><h4><b>ERRORS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/io.3.html">io</a></b>(3), <b><a href="../man3/io_cancel.3.html">io_cancel</a></b>(3), <b><a href="../man3/io_fsync.3.html">io_fsync</a></b>(3), <b><a href="../man3/io_getevents.3.html">io_getevents</a></b>(3), <b><a href="../man3/io_prep_pread.3.html">io_prep_pread</a></b>(3), <b><a href="../man3/io_prep_pwrite.3.html">io_prep_pwrite</a></b>(3), <b><a href="../man3/io_queue_init.3.html">io_queue_init</a></b>(3),
       <b><a href="../man3/io_queue_release.3.html">io_queue_release</a></b>(3), <b><a href="../man3/io_queue_run.3.html">io_queue_run</a></b>(3), <b><a href="../man3/io_queue_wait.3.html">io_queue_wait</a></b>(3), <b><a href="../man3/io_set_callback.3.html">io_set_callback</a></b>(3), <b><a href="../man3/io_submit.3.html">io_submit</a></b>(3), <b><a href="../man3/errno.3.html">errno</a></b>(3).

Linux                                              2019-07-23                                   <u><a href="../man3/io_prep_fsync.3.html">io_prep_fsync</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>