<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_FOLLOWLOCATION - follow HTTP 3xx redirects</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_FOLLOWLOCATION - follow HTTP 3xx redirects

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_FOLLOWLOCATION, long mode);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  option  tells  the  library to follow <u>Location:</u> header redirects that an HTTP server sends in a 30x
       response. The <u>Location:</u> header can specify a relative or an absolute URL to follow.  The  long  parameter
       <u>mode</u> instructs how libcurl should act on subsequent requests.

       <u>mode</u>  only  had  a  single  value (1L) for a long time that enables redirect following. Since 8.13.0, two
       additional modes are also supported. See below.

       When following redirects, libcurl issues another request for the  new  URL  and  follows  subsequent  new
       <u>Location:</u>  redirects all the way until no more such headers are returned or the maximum limit is reached.
       <u><a href="../man3/CURLOPT_MAXREDIRS.3.html">CURLOPT_MAXREDIRS</a>(3)</u> is used to limit the number of redirects libcurl follows.

       libcurl restricts what protocols it automatically follow redirects to. The accepted target protocols  are
       set  with  <u><a href="../man3/CURLOPT_REDIR_PROTOCOLS_STR.3.html">CURLOPT_REDIR_PROTOCOLS_STR</a>(3)</u>.  By  default  libcurl  allows  HTTP,  HTTPS,  FTP  and FTPS on
       redirects.

       When following a redirect, the specific 30x response code also dictates which request method libcurl uses
       in the subsequent request: For 301, 302 and 303 responses libcurl switches method from POST to GET unless
       <u><a href="../man3/CURLOPT_POSTREDIR.3.html">CURLOPT_POSTREDIR</a>(3)</u> instructs libcurl otherwise. All other redirect response codes make libcurl use  the
       same method again.

       When  libcurl  switches  method  to GET, it then uses that method without sending any request body. If it
       does not change the method, it sends the subsequent request the same way as the previous  one;  including
       the request body if one was provided.

       For  users  who think the existing location following is too naive, too simple or just lacks features, it
       is easy to instead implement your own redirect  follow  logic  with  the  use  of  <u><a href="../man3/curl_easy_getinfo.3.html">curl_easy_getinfo</a>(3)</u>'s
       <u><a href="../man3/CURLINFO_REDIRECT_URL.3.html">CURLINFO_REDIRECT_URL</a>(3)</u> option instead of using <u><a href="../man3/CURLOPT_FOLLOWLOCATION.3.html">CURLOPT_FOLLOWLOCATION</a>(3)</u>.

       By  default,  libcurl  only  sends  <u>Authentication:</u> or explicitly set <u>Cookie:</u> headers to the initial host
       given   in   the   original   URL,   to   avoid   leaking   username   +   password   to   other   sites.
       <u><a href="../man3/CURLOPT_UNRESTRICTED_AUTH.3.html">CURLOPT_UNRESTRICTED_AUTH</a>(3)</u> is provided to change that behavior.

       Due to the way HTTP works, almost any header can be made to contain data a client may not want to pass on
       to other servers than the initially intended host and for all other headers than the two mentioned above,
       there is no protection from this happening when libcurl is told to follow redirects.

       Pick one of the following modes:

       CURLFOLLOW_ALL (1)
              Before  8.13.0  this bit had no name and 1L was just the value to enable this option. This makes a
              set custom method be used in all HTTP requests, even after redirects.

       CURLFOLLOW_OBEYCODE (2)
              When there is a custom request method set with <u><a href="../man3/CURLOPT_CUSTOMREQUEST.3.html">CURLOPT_CUSTOMREQUEST</a>(3)</u>, that set method  replaces
              what libcurl would otherwise use. If a 301/302/303 response code is returned to signal a redirect,
              the method is changed from POST to <u>GET</u>. For 307/308, the custom method remains set and used.

              Note  that only POST (or a custom post) is changed to GET on 301/302, its not change PUT etc - and
              therefore also not when libcurl issues a custom PUT.  A  303  response  makes  it  switch  to  GET
              independently of the original method (except for HEAD).

              To  control  for  which  of the 301/302/303 status codes libcurl should <u>not</u> switch back to GET for
              when doing a custom POST, and instead keep the custom method, use <u><a href="../man3/CURLOPT_POSTREDIR.3.html">CURLOPT_POSTREDIR</a>(3)</u>.

              If  you  prefer  a  custom  POST  method  to  be  reset  to   exactly   the   method   <u>POST</u>,   use
              CURLFOLLOW_FIRSTONLY instead.

       CURLFOLLOW_FIRSTONLY (3)
              When  there is a custom request method set with <u><a href="../man3/CURLOPT_CUSTOMREQUEST.3.html">CURLOPT_CUSTOMREQUEST</a>(3)</u>, that set method replaces
              what libcurl would otherwise use in the first outgoing request only. The second  request  is  then
              done according to the redirect response code.

              If   you   prefer   your   custom   method  to  remain  in  use  after  a  307/308  redirect,  use
              CURLFOLLOW_OBEYCODE instead.

</pre><h4><b>NOTE</b></h4><pre>
       Since  libcurl  changes  method  or  not  based   on   the   specific   HTTP   response   code,   setting
       <u><a href="../man3/CURLOPT_CUSTOMREQUEST.3.html">CURLOPT_CUSTOMREQUEST</a>(3)</u>  while following redirects may change what libcurl would otherwise do and if not
       that carefully may even make it misbehave since <u><a href="../man3/CURLOPT_CUSTOMREQUEST.3.html">CURLOPT_CUSTOMREQUEST</a>(3)</u>  overrides  the  method  libcurl
       would otherwise select internally.

       Setting  the CURLFOLLOW_OBEYCODE bit makes libcurl <u>not</u> use the custom set method after redirects for 301,
       302 and 303 responses. Unless the <u><a href="../man3/CURLOPT_POSTREDIR.3.html">CURLOPT_POSTREDIR</a>(3)</u> bits are set for those status codes.

</pre><h4><b>DEFAULT</b></h4><pre>
       0, disabled

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects http only

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");

           /* example.com is redirected, so we tell libcurl to follow redirection */
           curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);

           curl_easy_perform(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.1

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLINFO_REDIRECT_COUNT.3.html">CURLINFO_REDIRECT_COUNT</a></b>(3),  <b><a href="../man3/CURLINFO_REDIRECT_URL.3.html">CURLINFO_REDIRECT_URL</a></b>(3),  <b><a href="../man3/CURLOPT_POSTREDIR.3.html">CURLOPT_POSTREDIR</a></b>(3),   <b><a href="../man3/CURLOPT_PROTOCOLS_STR.3.html">CURLOPT_PROTOCOLS_STR</a></b>(3),
       <b><a href="../man3/CURLOPT_REDIR_PROTOCOLS_STR.3.html">CURLOPT_REDIR_PROTOCOLS_STR</a></b>(3), <b><a href="../man3/CURLOPT_UNRESTRICTED_AUTH.3.html">CURLOPT_UNRESTRICTED_AUTH</a></b>(3)

libcurl                                            2025-06-16                          <u><a href="../man3/CURLOPT_FOLLOWLOCATION.3.html">CURLOPT_FOLLOWLOCATION</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>