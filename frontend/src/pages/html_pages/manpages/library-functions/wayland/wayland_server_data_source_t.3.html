<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wayland::server::data_source_t - offer to transfer data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/waylandpp-dev">waylandpp-dev_1.0.0-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wayland::server::data_source_t - offer to transfer data

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;wayland-server-protocol.hpp&gt;

       Inherits wayland::server::resource_t.

   <b>Public</b> <b>Member</b> <b>Functions</b>
       std::function&lt; void(std::string)&gt; &amp; <b>on_offer</b> ()
           add an offered mime type
       std::function&lt; void()&gt; &amp; <b>on_destroy</b> ()
           destroy the data source
       std::function&lt; void(<b>data_device_manager_dnd_action</b>)&gt; &amp; <b>on_set_actions</b> ()
           set the available drag-and-drop actions
       void <b>target</b> (std::string const &amp;mime_type, bool post=true)
           a target accepts an offered mime type
       void <b>send</b> (std::string const &amp;mime_type, int fd, bool post=true)
           send the data
       void <b>cancelled</b> (bool post=true)
           selection was cancelled
       void <b>dnd_drop_performed</b> (bool post=true)
           the drag-and-drop operation physically finished
       bool <b>can_dnd_drop_performed</b> () const
           Check whether the <b>dnd_drop_performed</b> function is available with the currently bound version of the
           protocol.
       void <b>dnd_finished</b> (bool post=true)
           the drag-and-drop operation concluded
       bool <b>can_dnd_finished</b> () const
           Check whether the <b>dnd_finished</b> function is available with the currently bound version of the
           protocol.
       void <b>action</b> (<b>data_device_manager_dnd_action</b> const &amp;dnd_action, bool post=true)
           notify the selected action
       bool <b>can_action</b> () const
           Check whether the <b>action</b> function is available with the currently bound version of the protocol.
       void <b>post_invalid_action_mask</b> (std::string const &amp;msg)
           Post error: action mask contains invalid values.
       void <b>post_invalid_source</b> (std::string const &amp;msg)
           Post error: source doesn't accept this request.
       bool <b>proxy_has_object</b> () const
           Check whether this wrapper actually wraps an object.
       void <b>post_no_memory</b> () const
       uint32_t <b>get_id</b> () const
       client_t <b>get_client</b> () const
       unsigned int <b>get_version</b> () const
       std::string <b>get_class</b> ()

   <b>Static</b> <b>Public</b> <b>Attributes</b>
       static constexpr std::uint32_t <b>target_since_version</b> = 1
           Minimum protocol version required for the <b>target</b> function.
       static constexpr std::uint32_t <b>send_since_version</b> = 1
           Minimum protocol version required for the <b>send</b> function.
       static constexpr std::uint32_t <b>cancelled_since_version</b> = 1
           Minimum protocol version required for the <b>cancelled</b> function.
       static constexpr std::uint32_t <b>dnd_drop_performed_since_version</b> = 3
           Minimum protocol version required for the <b>dnd_drop_performed</b> function.
       static constexpr std::uint32_t <b>dnd_finished_since_version</b> = 3
           Minimum protocol version required for the <b>dnd_finished</b> function.
       static constexpr std::uint32_t <b>action_since_version</b> = 3
           Minimum protocol version required for the <b>action</b> function.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       offer to transfer data

       The wl_data_source object is the source side of a wl_data_offer. It is created by the source client in a
       data transfer and provides a way to describe the offered data and a way to respond to requests to
       transfer the data.

       Definition at line <b>1089</b> of file <b>wayland-server-protocol.hpp</b>.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>data_source_t::action</b> <b>(data_device_manager_dnd_action</b> <b>const</b> <b>&amp;</b> <b>dnd_action,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       notify the selected action

       <b>Parameters</b>
           <u>dnd_action</u> action selected by the compositor

       This event indicates the action selected by the compositor after matching the source/destination side
       actions. Only one action (or none) will be offered here.

       This event can be emitted multiple times during the drag-and-drop operation, mainly in response to
       destination side changes through wl_data_offer.set_actions, and as the data device enters/leaves
       surfaces.

       It is only possible to receive this event after wl_data_source.dnd_drop_performed if the drag-and-drop
       operation ended in an 'ask' action, in which case the final wl_data_source.action event will happen
       immediately before wl_data_source.dnd_finished.

       Compositors may also change the selected action on the fly, mainly in response to keyboard modifier
       changes during the drag-and-drop operation.

       The most recent action received is always the valid one. The chosen action may change alongside
       negotiation (e.g. an 'ask' action can turn into a 'move' operation), so the effects of the final action
       must always be applied in wl_data_offer.dnd_finished.

       Clients can trigger cursor surface changes from this point, so they reflect the current action.

       Definition at line <b>2020</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>bool</b> <b>data_source_t::can_action</b> <b>()</b> <b>const</b>
       Check whether the <b>action</b> function is available with the currently bound version of the protocol.

       Definition at line <b>2025</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>bool</b> <b>data_source_t::can_dnd_drop_performed</b> <b>()</b> <b>const</b>
       Check whether the <b>dnd_drop_performed</b> function is available with the currently bound version of the
       protocol.

       Definition at line <b>2005</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>bool</b> <b>data_source_t::can_dnd_finished</b> <b>()</b> <b>const</b>
       Check whether the <b>dnd_finished</b> function is available with the currently bound version of the protocol.

       Definition at line <b>2015</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_source_t::cancelled</b> <b>(bool</b> <b>post</b> <b>=</b> <b>true)</b>
       selection was cancelled This data source is no longer valid. There are several reasons why this could
       happen:

       • The data source has been replaced by another data source.

       • The  drag-and-drop  operation  was  performed,  but the drop destination did not accept any of the mime
         types offered through wl_data_source.target.

       • The drag-and-drop operation was performed, but the drop destination did not select any of  the  actions
         present in the mask offered through wl_data_source.action.

       • The drag-and-drop operation was performed but didn't happen over a surface.

       • The compositor cancelled the drag-and-drop operation (e.g. compositor dependent timeouts to avoid stale
         drag-and-drop transfers).

       The client should clean up and destroy this data source.

       For  objects  of version 2 or older, wl_data_source.cancelled will only be emitted if the data source was
       replaced by another data source.

       Definition at line <b>1995</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_source_t::dnd_drop_performed</b> <b>(bool</b> <b>post</b> <b>=</b> <b>true)</b>
       the drag-and-drop operation physically finished The user performed the drop action. This event  does  not
       indicate  acceptance,  wl_data_source.cancelled  may  still be emitted afterwards if the drop destination
       does not accept any mime type.

       However, this event might however not be received if the compositor cancelled the drag-and-drop operation
       before this event could happen.

       Note that the data_source may still be used in the future and should not be destroyed here.

       Definition at line <b>2000</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_source_t::dnd_finished</b> <b>(bool</b> <b>post</b> <b>=</b> <b>true)</b>
       the drag-and-drop operation concluded The drop destination finished interoperating with this data source,
       so the client is now free to destroy this data source and free all associated data.

       If the action used to perform the operation was 'move', the source can now delete the transferred data.

       Definition at line <b>2010</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::string</b> <b>wayland::server::resource_t::get_class</b> <b>()</b> <b>[inherited]</b>
       Retrieve the interface name (class) of a resource object.

       <b>Returns</b>
           Interface name of the resource object.

   <b>client_t</b> <b>wayland::server::resource_t::get_client</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the associated client

       <b>Returns</b>
           the client that owns the resource.

   <b>uint32_t</b> <b>wayland::server::resource_t::get_id</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the internal ID of the resource

       <b>Returns</b>
           the internal ID of the resource

   <b>unsigned</b> <b>int</b> <b>wayland::server::resource_t::get_version</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get interface version

       <b>Returns</b>
           Interface version this resource has been constructed with.

   <b>std::function&lt;</b> <b>void()&gt;</b> <b>&amp;</b> <b>data_source_t::on_destroy</b> <b>()</b>
       destroy the data source Destroy the data source.

       Definition at line <b>1973</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(std::string)&gt;</b> <b>&amp;</b> <b>data_source_t::on_offer</b> <b>()</b>
       add an offered mime type

       <b>Parameters</b>
           <u>mime_type</u> mime type offered by the data source

       This request adds a mime type to the set of mime types advertised to targets. Can be called several times
       to offer multiple types.

       Definition at line <b>1967</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(data_device_manager_dnd_action)&gt;</b> <b>&amp;</b> <b>data_source_t::on_set_actions</b> <b>()</b>
       set the available drag-and-drop actions

       <b>Parameters</b>
           <u>dnd_actions</u> actions supported by the data source

       Sets the actions that the source side client supports  for  this  operation.  This  request  may  trigger
       wl_data_source.action  and  wl_data_offer.action  events  if  the compositor needs to change the selected
       action.

       The dnd_actions argument must contain only values  expressed  in  the  wl_data_device_manager.dnd_actions
       enum, otherwise it will result in a protocol error.

       This request must be made once only, and can only be made on sources used in drag-and-drop, so it must be
       performed  before  wl_data_device.start_drag.  Attempting  to use the source other than for drag-and-drop
       will raise a protocol error.

       Definition at line <b>1979</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_source_t::post_invalid_action_mask</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>msg)</b>
       Post error: action mask contains invalid values.

       Definition at line <b>2030</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_source_t::post_invalid_source</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>msg)</b>
       Post error: source doesn't accept this request.

       Definition at line <b>2035</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>wayland::server::resource_t::post_no_memory</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Post 'not enough memory' error to the client

       If the compositor has not enough memory to fulfill a certail request of the client, this function can  be
       called to notify the client of this circumstance.

   <b>bool</b> <b>wayland::server::resource_t::proxy_has_object</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Check whether this wrapper actually wraps an object.

       <b>Returns</b>
           true if there is an underlying object, false if this wrapper is empty

   <b>void</b> <b>data_source_t::send</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>mime_type,</b> <b>int</b> <b>fd,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       send the data

       <b>Parameters</b>
           <u>mime_type</u> mime type for the data
           <u>fd</u> file descriptor for the data

       Request  for  data  from  the  client.  Send  the  data  as  the specified mime type over the passed file
       descriptor, then close it.

       Definition at line <b>1990</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_source_t::target</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>mime_type,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       a target accepts an offered mime type

       <b>Parameters</b>
           <u>mime_type</u> mime type accepted by the target

       Sent when a target accepts pointer_focus or motion events. If a target does not accept any of the offered
       types, type is NULL.

       Used for feedback during drag-and-drop.

       Definition at line <b>1985</b> of file <b>wayland-server-protocol.cpp</b>.

</pre><h4><b>Member</b> <b>Data</b> <b>Documentation</b></h4><pre>
   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::data_source_t::action_since_version</b> <b>=</b> <b>3</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>action</b> function.

       Definition at line <b>1293</b> of file <b>wayland-server-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::data_source_t::cancelled_since_version</b> <b>=</b> <b>1</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>cancelled</b> function.

       Definition at line <b>1212</b> of file <b>wayland-server-protocol.hpp</b>.

   <b>constexpr</b>  <b>std::uint32_t</b>  <b>wayland::server::data_source_t::dnd_drop_performed_since_version</b>  <b>=</b>   <b>3</b>   <b>[static],</b>
       <b>[constexpr]</b>
       Minimum protocol version required for the <b>dnd_drop_performed</b> function.

       Definition at line <b>1231</b> of file <b>wayland-server-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::data_source_t::dnd_finished_since_version</b> <b>=</b> <b>3</b> <b>[static],</b>  <b>[constexpr]</b>

       Minimum protocol version required for the <b>dnd_finished</b> function.

       Definition at line <b>1252</b> of file <b>wayland-server-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::data_source_t::send_since_version</b> <b>=</b> <b>1</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>send</b> function.

       Definition at line <b>1182</b> of file <b>wayland-server-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::data_source_t::target_since_version</b> <b>=</b> <b>1</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>target</b> function.

       Definition at line <b>1167</b> of file <b>wayland-server-protocol.hpp</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for Wayland++ from the source code.

Version 1.0.0                                Wed May 1 2024 17:27:19           <u>wayland::server::<a href="../man3/data_source_t.3.html">data_source_t</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>