<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wayland::data_offer_t - offer to transfer data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/waylandpp-dev">waylandpp-dev_1.0.0-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wayland::data_offer_t - offer to transfer data

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;wayland-client-protocol.hpp&gt;

       Inherits <b>wayland::proxy_t</b>.

   <b>Public</b> <b>Types</b>
       enum class <b>wrapper_type</b> { <b>standard</b>, <b>display</b>, <b>foreign</b>, <b>proxy_wrapper</b> }

   <b>Public</b> <b>Member</b> <b>Functions</b>
       void <b>accept</b> (uint32_t serial, std::string const &amp;mime_type)
           accept one of the offered mime types
       void <b>receive</b> (std::string const &amp;mime_type, int fd)
           request that the data is transferred
       void <b>finish</b> ()
           the offer will no longer be used
       bool <b>can_finish</b> () const
           Check whether the <b>finish</b> function is available with the currently bound version of the protocol.
       void <b>set_actions</b> (<b>data_device_manager_dnd_action</b> const &amp;dnd_actions, <b>data_device_manager_dnd_action</b> const
           &amp;preferred_action)
           set the available/preferred drag-and-drop actions
       bool <b>can_set_actions</b> () const
           Check whether the <b>set_actions</b> function is available with the currently bound version of the protocol.
       std::function&lt; void(std::string)&gt; &amp; <b>on_offer</b> ()
           advertise offered mime type
       std::function&lt; void(<b>data_device_manager_dnd_action</b>)&gt; &amp; <b>on_source_actions</b> ()
           notify the source-side available actions
       std::function&lt; void(<b>data_device_manager_dnd_action</b>)&gt; &amp; <b>on_action</b> ()
           notify the selected action
       uint32_t <b>get_id</b> () const
           Get the id of a proxy object.
       std::string <b>get_class</b> () const
           Get the interface name (class) of a proxy object.
       uint32_t <b>get_version</b> () const
           Get the protocol object version of a proxy object.
       <b>wrapper_type</b> <b>get_wrapper_type</b> () const
           Get the type of a proxy object.
       void <b>set_queue</b> (<b>event_queue_t</b> queue)
           Assign a proxy to an event queue.
       wl_proxy * <b>c_ptr</b> () const
           Get a pointer to the underlying C struct.
       bool <b>proxy_has_object</b> () const
           Check whether this wrapper actually wraps an object.
       <b>operator</b> <b>bool</b> () const
           Check whether this wrapper actually wraps an object.
       bool <b>operator==</b> (const <b>proxy_t</b> &amp;right) const
           Check whether two wrappers refer to the same object.
       bool <b>operator!=</b> (const <b>proxy_t</b> &amp;right) const
           Check whether two wrappers refer to different objects.
       void <b>proxy_release</b> ()
           Release the wrapped object (if any), making this an empty wrapper.

   <b>Static</b> <b>Public</b> <b>Attributes</b>
       static constexpr std::uint32_t <b>accept_since_version</b> = 1
           Minimum protocol version required for the <b>accept</b> function.
       static constexpr std::uint32_t <b>receive_since_version</b> = 1
           Minimum protocol version required for the <b>receive</b> function.
       static constexpr std::uint32_t <b>finish_since_version</b> = 3
           Minimum protocol version required for the <b>finish</b> function.
       static constexpr std::uint32_t <b>set_actions_since_version</b> = 3
           Minimum protocol version required for the <b>set_actions</b> function.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       offer to transfer data

       A wl_data_offer represents a piece of data offered for transfer by another client (the source client). It
       is used by the copy-and-paste and drag-and-drop mechanisms. The offer describes the different mime types
       that the data can be converted to and provides the mechanism for transferring the data directly from the
       source client.

       Definition at line <b>759</b> of file <b>wayland-client-protocol.hpp</b>.

</pre><h4><b>Member</b> <b>Enumeration</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>class</b> <b>wayland::proxy_t::wrapper_type</b> <b>[strong],</b>  <b>[inherited]</b>
       Underlying wl_proxy type and properties of a <b>proxy_t</b> that affect construction, destruction, and event
       handling

       <b>Enumerator</b>

       <u>standard</u>
              C pointer is a standard type compatible with wl_proxy*. Events are dispatched and it is destructed
              when the <b>proxy_t</b> is destructed. User data is set.

       <u>display</u>
              C  pointer  is  a  wl_display*. No events are dispatched, wl_display_disconnect is called when the
              <b>proxy_t</b> is destructed. User data is set.

       <u>foreign</u>
              C pointer is a standard type compatible with wl_proxy*, but another library owns it and it  should
              not  be  touched  in  a  way  that  could affect the operation of the other library. No events are
              dispatched, wl_proxy_destroy is not called when the  <b>proxy_t</b>  is  destructed,  user  data  is  not
              touched.  Consequently,  there is no reference counting for the <b>proxy_t</b>. Lifetime of such wrappers
              should preferably be short to minimize the chance that the owning library decides to  destroy  the
              wl_proxy.

       <u>proxy_wrapper</u>
              C  pointer  is  a  wl_proxy*  that  was  constructed  with  wl_proxy_create_wrapper. No events are
              dispatched, wl_proxy_wrapper_destroy is called when the <b>proxy_t</b> is destroyed.  Reference  counting
              is  active.  A reference to the <b>proxy_t</b> creating this proxy wrapper is held to extend its lifetime
              until after the proxy wrapper is destroyed.

       Definition at line <b>116</b> of file <b>wayland-client.hpp</b>.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>data_offer_t::accept</b> <b>(uint32_t</b> <b>serial,</b> <b>std::string</b> <b>const</b> <b>&amp;</b> <b>mime_type)</b>
       accept one of the offered mime types

       <b>Parameters</b>
           <u>serial</u> serial number of the accept request
           <u>mime_type</u> mime type accepted by the client

       Indicate that the client can accept the given mime type, or NULL for not accepted.

       For objects of version 2 or older, this request is used by the client to give feedback whether the client
       can receive the given mime type, or NULL if none is accepted; the feedback does not determine whether the
       drag-and-drop operation succeeds or not.

       For objects of version 3 or newer,  this  request  determines  the  final  result  of  the  drag-and-drop
       operation.  If  the  end  result is that no mime types were accepted, the drag-and-drop operation will be
       cancelled and the corresponding drag source will receive wl_data_source.cancelled. Clients may still  use
       this event in conjunction with wl_data_source.action for feedback.

       Definition at line <b>2028</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>wl_proxy</b> <b>*</b> <b>wayland::proxy_t::c_ptr</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get a pointer to the underlying C struct.

       <b>Returns</b>
           The underlying wl_proxy wrapped by this <b>proxy_t</b> if it exists, otherwise an exception is thrown

   <b>bool</b> <b>data_offer_t::can_finish</b> <b>()</b> <b>const</b>
       Check whether the <b>finish</b> function is available with the currently bound version of the protocol.

       Definition at line <b>2045</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>bool</b> <b>data_offer_t::can_set_actions</b> <b>()</b> <b>const</b>
       Check whether the <b>set_actions</b> function is available with the currently bound version of the protocol.

       Definition at line <b>2056</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>void</b> <b>data_offer_t::finish</b> <b>()</b>
       the  offer will no longer be used Notifies the compositor that the drag destination successfully finished
       the drag-and-drop operation.

       Upon receiving this request, the compositor will emit  wl_data_source.dnd_finished  on  the  drag  source
       client.

       It  is  a client error to perform other requests than wl_data_offer.destroy after this one. It is also an
       error to perform this request after a NULL mime type has been set in wl_data_offer.accept  or  no  action
       was received through wl_data_offer.action.

       If  wl_data_offer.finish  request  is  received  for  a  non  drag and drop operation, the invalid_finish
       protocol error is raised.

       Definition at line <b>2040</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::string</b> <b>wayland::proxy_t::get_class</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the interface name (class) of a proxy object.

       <b>Returns</b>
           The interface name of the object associated with the proxy

   <b>uint32_t</b> <b>wayland::proxy_t::get_id</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the id of a proxy object.

       <b>Returns</b>
           The id the object associated with the proxy

   <b>uint32_t</b> <b>wayland::proxy_t::get_version</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the protocol object version of a proxy object. Gets the protocol object version of a proxy object, or
       0 if the proxy was created with unversioned API.

       A returned value of 0 means that no version information is  available,  so  the  caller  must  make  safe
       assumptions about the object's real version.

       <b>display_t</b> will always return version 0.

       <b>Returns</b>
           The protocol object version of the proxy or 0

   <b>wrapper_type</b> <b>wayland::proxy_t::get_wrapper_type</b> <b>()</b> <b>const</b> <b>[inline],</b>  <b>[inherited]</b>
       Get the type of a proxy object.

       Definition at line <b>302</b> of file <b>wayland-client.hpp</b>.

   <b>std::function&lt;</b> <b>void(data_device_manager_dnd_action)&gt;</b> <b>&amp;</b> <b>data_offer_t::on_action</b> <b>()</b>
       notify the selected action

       <b>Parameters</b>
           <u>dnd_action</u> action selected by the compositor

       This  event  indicates  the  action selected by the compositor after matching the source/destination side
       actions. Only one action (or none) will be offered here.

       This event can be emitted multiple times during the drag-and-drop operation in  response  to  destination
       side action changes through wl_data_offer.set_actions.

       This event will no longer be emitted after wl_data_device.drop happened on the drag-and-drop destination,
       the   client   must   honor   the   last   action  received,  or  the  last  preferred  one  set  through
       wl_data_offer.set_actions when handling an 'ask' action.

       Compositors may also change the selected action on the fly,  mainly  in  response  to  keyboard  modifier
       changes during the drag-and-drop operation.

       The  most  recent  action  received  is always the valid one. Prior to receiving wl_data_device.drop, the
       chosen action may change (e.g. due to keyboard  modifiers  being  pressed).  At  the  time  of  receiving
       wl_data_device.drop the drag-and-drop destination must honor the last action received.

       Action  changes  may still happen after wl_data_device.drop, especially on 'ask' actions, where the drag-
       and-drop destination may choose another action afterwards. Action changes happening  at  this  stage  are
       always  the  result  of  inter-client  negotiation,  the  compositor  shall no longer be able to induce a
       different action.

       Upon 'ask' actions, it is expected that the drag-and-drop destination may potentially choose a  different
       action  and/or  mime  type,  based  on  wl_data_offer.source_actions and finally chosen by the user (e.g.
       popping  up  a  menu   with   the   available   options).   The   final   wl_data_offer.set_actions   and
       wl_data_offer.accept requests must happen before the call to wl_data_offer.finish.

       Definition at line <b>2072</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(std::string)&gt;</b> <b>&amp;</b> <b>data_offer_t::on_offer</b> <b>()</b>
       advertise offered mime type

       <b>Parameters</b>
           <u>mime_type</u> offered mime type

       Sent immediately after creating the wl_data_offer object. One event per offered mime type.

       Definition at line <b>2062</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(data_device_manager_dnd_action)&gt;</b> <b>&amp;</b> <b>data_offer_t::on_source_actions</b> <b>()</b>
       notify the source-side available actions

       <b>Parameters</b>
           <u>source_actions</u> actions offered by the data source

       This   event   indicates  the  actions  offered  by  the  data  source.  It  will  be  sent  right  after
       wl_data_device.enter,   or   anytime   the   source   side   changes   its   offered   actions    through
       wl_data_source.set_actions.

       Definition at line <b>2067</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>wayland::proxy_t::operator</b> <b>bool</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Check whether this wrapper actually wraps an object.

       <b>Returns</b>
           true if there is an underlying object, false if this wrapper is empty

   <b>bool</b> <b>wayland::proxy_t::operator!=</b> <b>(const</b> <b>proxy_t</b> <b>&amp;</b> <b>right)</b> <b>const</b> <b>[inherited]</b>
       Check whether two wrappers refer to different objects.

   <b>bool</b> <b>wayland::proxy_t::operator==</b> <b>(const</b> <b>proxy_t</b> <b>&amp;</b> <b>right)</b> <b>const</b> <b>[inherited]</b>
       Check whether two wrappers refer to the same object.

   <b>bool</b> <b>wayland::proxy_t::proxy_has_object</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Check whether this wrapper actually wraps an object.

       <b>Returns</b>
           true if there is an underlying object, false if this wrapper is empty

   <b>void</b> <b>wayland::proxy_t::proxy_release</b> <b>()</b> <b>[inherited]</b>
       Release  the  wrapped object (if any), making this an empty wrapper. Note that <b>display_t</b> instances cannot
       be released this way. Attempts to do so are ignored.

       <b>Examples</b>
           <b>foreign_display.cpp</b>.

   <b>void</b> <b>data_offer_t::receive</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>mime_type,</b> <b>int</b> <b>fd)</b>
       request that the data is transferred

       <b>Parameters</b>
           <u>mime_type</u> mime type desired by receiver
           <u>fd</u> file descriptor for data transfer

       To transfer the offered data, the client issues this request and indicates the  mime  type  it  wants  to
       receive.  The transfer happens through the passed file descriptor (typically created with the pipe system
       call). The source client writes the data in the mime type representation requested and  then  closes  the
       file descriptor.

       The  receiving  client  reads  from  the read end of the pipe until EOF and then closes its end, at which
       point the transfer is complete.

       This  request  may  happen  multiple  times  for  different   mime   types,   both   before   and   after
       wl_data_device.drop.  Drag-and-drop  destination  clients  may preemptively fetch data or examine it more
       closely to determine acceptance.

       Definition at line <b>2034</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>void</b>      <b>data_offer_t::set_actions</b>      <b>(data_device_manager_dnd_action</b>      <b>const</b>      <b>&amp;</b>       <b>dnd_actions,</b>
       <b>data_device_manager_dnd_action</b> <b>const</b> <b>&amp;</b> <b>preferred_action)</b>
       set the available/preferred drag-and-drop actions

       <b>Parameters</b>
           <u>dnd_actions</u> actions supported by the destination client
           <u>preferred_action</u> action preferred by the destination client

       Sets  the  actions that the destination side client supports for this operation. This request may trigger
       the emission of wl_data_source.action and wl_data_offer.action events if the compositor needs  to  change
       the selected action.

       This  request  can be called multiple times throughout the drag-and-drop operation, typically in response
       to wl_data_device.enter or wl_data_device.motion events.

       This request determines the final result of the drag-and-drop operation. If the end  result  is  that  no
       action is accepted, the drag source will receive wl_data_source.cancelled.

       The  dnd_actions  argument  must  contain only values expressed in the wl_data_device_manager.dnd_actions
       enum, and the preferred_action argument must only contain one of those  values  set,  otherwise  it  will
       result in a protocol error.

       While   managing   an   'ask'   action,   the   destination  drag-and-drop  client  may  perform  further
       wl_data_offer.receive requests, and is expected to perform  one  last  wl_data_offer.set_actions  request
       with  a  preferred  action  other  than  'ask'  (and  optionally  wl_data_offer.accept) before requesting
       wl_data_offer.finish, in order to convey the action selected by the user. If the preferred action is  not
       in the wl_data_offer.source_actions mask, an error will be raised.

       If  the  'ask'  action  is  dismissed  (e.g.  user  cancellation),  the  client  is  expected  to perform
       wl_data_offer.destroy right away.

       This request can only be made on drag-and-drop offers, a protocol error will be raised otherwise.

       Definition at line <b>2051</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>void</b> <b>wayland::proxy_t::set_queue</b> <b>(event_queue_t</b> <b>queue)</b> <b>[inherited]</b>
       Assign a proxy to an event queue.

       <b>Parameters</b>
           <u>queue</u> The event queue that will handle this proxy

       Assign proxy to event queue. Events coming from proxy will be queued in queue instead  of  the  display's
       main queue.

       See also: <b>display_t::dispatch_queue()</b>.

       <b>Examples</b>
           <b>proxy_wrapper.cpp</b>.

</pre><h4><b>Member</b> <b>Data</b> <b>Documentation</b></h4><pre>
   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::data_offer_t::accept_since_version</b> <b>=</b> <b>1</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>accept</b> function.

       Definition at line <b>808</b> of file <b>wayland-client-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::data_offer_t::finish_since_version</b> <b>=</b> <b>3</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>finish</b> function.

       Definition at line <b>859</b> of file <b>wayland-client-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::data_offer_t::receive_since_version</b> <b>=</b> <b>1</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>receive</b> function.

       Definition at line <b>835</b> of file <b>wayland-client-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::data_offer_t::set_actions_since_version</b> <b>=</b> <b>3</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>set_actions</b> function.

       Definition at line <b>907</b> of file <b>wayland-client-protocol.hpp</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for Wayland++ from the source code.

Version 1.0.0                                Wed May 1 2024 17:27:19                    <u>wayland::<a href="../man3/data_offer_t.3.html">data_offer_t</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>