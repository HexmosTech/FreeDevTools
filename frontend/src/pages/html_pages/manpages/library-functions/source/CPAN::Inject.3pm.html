<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPAN::Inject - Base class for injecting distributions into CPAN sources</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcpan-inject-perl">libcpan-inject-perl_1.14-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CPAN::Inject - Base class for injecting distributions into CPAN sources

</pre><h4><b>SYNOPSIS</b></h4><pre>
         # Create the injector
         my $cpan = CPAN::Inject-&gt;new(
             sources =&gt; '/root/.cpan/sources',  # Required field
             author  =&gt; 'LOCAL',                # The default
             );

         # Add a file to the user
         $cpan-&gt;add( file =&gt; 'some/random/Perl-Tarball-1.02.tar.gz' );

         # What would have have to use when installing
         # $path = 'LOCAL/Perl-Tarball-1.02.tar.gz';
         my $path = $cpan-&gt;install_path( 'some/random/Perl-Tarball-1.02.tar.gz' );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Following the release of CPAN::Mini, the CPAN::Mini::Inject module was created to add additional
       distributions into a minicpan mirror.

       While it was created for use with a minicpan mirror, similar functionality can be reused in other
       situations.

       <b>CPAN::Inject</b> replicates the basics of this functionality.

       Specifically, it takes an arbitrary tarball and adds it to the CPAN sources directory for a particular
       author, and then add the new file to the <u>CHECKSUMS</u> file.

       It does not reimplement the logic to add files to the indexes.

       The initial use this module was created for was to inject tarballs into the CPAN sources directory for
       the reserved LOCAL user, so that the can be installed via the CPAN shell, with automated recursion to
       CPAN dependencies.

       But although the number of functions is limited (current only "add" exists, with the others to be added
       as needed) the implementation is very generic and sub-classable, so that it can be reused in other
       situations.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
         # Create the injector for the default LOCAL author
         $cpan = CPAN::Inject-&gt;new(
             sources =&gt; '/root/.cpan/sources',
             );

         # Create the injector for a specific author
         $cpan = CPAN::Inject-&gt;new(
             sources =&gt; '/root/.cpan/sources',
             author  =&gt; 'ADAMK',
             );

       The "new" constructor takes a set of named params and create a cpan injection object.

       * <b>sources</b> - The compulsory "sources" param should be the path to a directory that is the root of a mirror
       (or a partial mirror such as a CPAN::Cache or a CPAN::Mini).

       To retain the permissions and ownership integrity of the sources tree, you must be the owner of the
       "sources" directory in order to inject the distribution tarballs.

       * <b>author</b> - The optional "author" param should be the CPAN id of an author. By default, the reserved local
       CPAN id "LOCAL" will be used.

       The author provided will be used as a default in all further actions.

       Returns a "CPAN::Inject" object, or throws an exception on error.

   <b>from_cpan_config</b>
       The "from_cpan_config" constructor loads the CPAN.pm configuration file, and uses the data contained
       within to specific the sources path for the object.

       This constructor is otherwise the same.

       Returns a <b>CPAN::Inject</b> object on success, or throws an exception on error.

   <b>sources</b>
       The "sources" accessor returns the path to the root of the directory tree.

   <b>author</b>
       The "author" accessor returns the CPAN id for the default author which will be "LOCAL" if you did not
       provide an alternative param to the the "new" constructor.

   <b>add</b>
         # Add a file to the constructor/default author
         $cpan-&gt;add( file =&gt; 'any/arbitrary/Perl-Tarball-1.01.tar.gz' );

       The "add" method takes a Perl distribution tarball from an arbitrary path, and adds it to the sources
       path.

       The specific location the tarball is copied to will be in the root directory for the author provided to
       the constructor.

       Returns the install_path value as a convenience, or throws an exception on error.

   <b>remove</b>
         # Remove a distribution from the repository
         $cpan-&gt;remove( dist =&gt; 'LOCAL/Perl-Tarball-1.01.tar.gz' );

       The "remove" method takes a distribution path and removes it from the sources path. The file is also
       removed.

       Does not return anything useful and throws an exception on error.

   <b>author_subpath</b>
         # $path = 'authors/id/L/LO/LOCAL'
         $path = $cpan-&gt;author_subpath;

       The "author_subpath" method takes a CPAN author id (or uses the CPAN author id originally provided to the
       constructor) and returns the relative subpath for the AUTHOR within the sources tree.

       Returns the subpath as a string.

   <b>author_path</b>
         # $path = '/root/.cpan/sources/authors/id/L/LO/LOCAL'
         $path = $cpan-&gt;author_subpath;

       The "author_path" method finds the full path for the root directory for the named author.

       Returns the path as a string.

   <b>file_path</b>
         # $path = '/root/.cpan/sources/authors/id/L/LO/LOCAL/Perl-Tarball-1.02.tar.gz'
         $path = $cpan-&gt;file_path( 'Perl-Tarball-1.02.tar.gz' );
         $path = $cpan-&gt;file_path( '/some/random/place/Perl-Tarball-1.02.tar.gz' );

       The "file_path" method takes the name of a tarball (either just the name or a full path) and calculates
       the location that the file will end up at.

       When files are copied into the sources directory, they are always copied to the top level of the author
       root.

       Returns the path as a string.

   <b>install_path</b>
         # $path = 'LOCAL/Perl-Tarball-1.01.tar.gz';
         $path = $cpan-&gt;install_path( 'Perl-Tarball-1.01.tar.gz' );
         $path = $cpan-&gt;install_path( '/some/random/place/Perl-Tarball-1.02.tar.gz' );

       The "install_path" method returns the path for the distribution as the CPAN shell understands it.

       Using this path, the CPAN shell can expand it to locate the distribution, and then can install it.

       Returns the path as a string.

</pre><h4><b>SUPPORT</b></h4><pre>
       This module is stored in an Open Repository at the following address.

       &lt;<a href="http://svn.ali.as/cpan/trunk/CPAN-Inject">http://svn.ali.as/cpan/trunk/CPAN-Inject</a>&gt;

       Write access to the repository is made available automatically to any published CPAN author, and to most
       other volunteers on request.

       If you are able to submit your bug report in the form of new (failing) unit tests, or can apply your fix
       directly instead of submitting a patch, you are <b>strongly</b> encouraged to do so as the author currently
       maintains over 100 modules and it can take some time to deal with non-Critcal bug reports or patches.

       This will guarentee that your issue will be addressed in the next release of the module.

       If you cannot provide a direct test or fix, or don't have time to do so, then regular bug reports are
       still accepted and appreciated via the CPAN bug tracker.

       &lt;<a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=CPAN-Inject&gt;

       For other issues, for commercial enhancement or support, or to have your write access enabled for the
       repository, contact the author at the email address above.

</pre><h4><b>AUTHOR</b></h4><pre>
       Adam Kennedy &lt;<a href="mailto:adamk@cpan.org">adamk@cpan.org</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       CPAN::Mini::Inject

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2006 - 2011 Adam Kennedy.

       This program is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself.

       The full text of the license can be found in the LICENSE file included with this module.

perl v5.40.1                                       2025-08-14                                  <u>CPAN::<a href="../man3pm/Inject.3pm.html">Inject</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>