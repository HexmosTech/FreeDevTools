<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CPANPLUS::Internals::Source - internals for updating source files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcpanplus-perl">libcpanplus-perl_0.9916-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CPANPLUS::Internals::Source - internals for updating source files

</pre><h4><b>SYNOPSIS</b></h4><pre>
           ### lazy load author/module trees ###

           $cb-&gt;_author_tree;
           $cb-&gt;_module_tree;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       CPANPLUS::Internals::Source controls the updating of source files and the parsing of them into usable
       module/author trees to be used by "CPANPLUS".

       Functions exist to check if source files are still "good to use" as well as update them, and then parse
       them.

       The flow looks like this:

           $cb-&gt;_author_tree || $cb-&gt;_module_tree
               $cb-&gt;_check_trees
                   $cb-&gt;__check_uptodate
                       $cb-&gt;_update_source
                   $cb-&gt;__update_custom_module_sources
                       $cb-&gt;__update_custom_module_source
               $cb-&gt;_build_trees
                   ### engine methods
                   {   $cb-&gt;_init_trees;
                       $cb-&gt;_standard_trees_completed
                       $cb-&gt;_custom_trees_completed
                   }
                   $cb-&gt;__create_author_tree
                       ### engine methods
                       { $cb-&gt;_add_author_object }
                   $cb-&gt;__create_module_tree
                       $cb-&gt;__create_dslip_tree
                       ### engine methods
                       { $cb-&gt;_add_module_object }
                   $cb-&gt;__create_custom_module_entries

           $cb-&gt;_dslip_defs

</pre><h4><b>METHODS</b></h4><pre>
   <b>$cb-&gt;_build_trees(</b> <b>uptodate</b> <b>=&gt;</b> <b>BOOL,</b> <b>[use_stored</b> <b>=&gt;</b> <b>BOOL,</b> <b>path</b> <b>=&gt;</b> <b>$path,</b> <b>verbose</b> <b>=&gt;</b> <b>BOOL]</b> <b>)</b>
       This method rebuilds the author- and module-trees from source.

       It takes the following arguments:

       uptodate
           Indicates whether any on disk caches are still ok to use.

       path
           The absolute path to the directory holding the source files.

       verbose
           A boolean flag indicating whether or not to be verbose.

       use_stored
           A boolean flag indicating whether or not it is ok to use previously stored trees. Defaults to true.

       Returns a boolean indicating success.

   <b>$cb-&gt;_check_trees(</b> <b>[update_source</b> <b>=&gt;</b> <b>BOOL,</b> <b>path</b> <b>=&gt;</b> <b>PATH,</b> <b>verbose</b> <b>=&gt;</b> <b>BOOL]</b> <b>)</b>
       Retrieve source files and return a boolean indicating whether or not the source files are up to date.

       Takes several arguments:

       update_source
           A flag to force re-fetching of the source files, even if they are still up to date.

       path
           The absolute path to the directory holding the source files.

       verbose
           A boolean flag indicating whether or not to be verbose.

       Will get information from the config file by default.

   <b>$cb-&gt;__check_uptodate(</b> <b>file</b> <b>=&gt;</b> <b>$file,</b> <b>name</b> <b>=&gt;</b> <b>$name,</b> <b>[update_source</b> <b>=&gt;</b> <b>BOOL,</b> <b>verbose</b> <b>=&gt;</b> <b>BOOL]</b> <b>)</b>
       "__check_uptodate"  checks if a given source file is still up-to-date and if not, or when "update_source"
       is true, will re-fetch the source file.

       Takes the following arguments:

       file
           The source file to check.

       name
           The internal shortcut name for the source file (used for config lookups).

       update_source
           Flag to force updating of sourcefiles regardless.

       verbose
           Boolean to indicate whether to be verbose or not.

       Returns a boolean value indicating whether the current files are up to date or not.

   <b>$cb-&gt;_update_source(</b> <b>name</b> <b>=&gt;</b> <b>$name,</b> <b>[path</b> <b>=&gt;</b> <b>$path,</b> <b>verbose</b> <b>=&gt;</b> <b>BOOL]</b> <b>)</b>
       This method does the actual fetching of source files.

       It takes the following arguments:

       name
           The internal shortcut name for the source file (used for config lookups).

       path
           The full path where to write the files.

       verbose
           Boolean to indicate whether to be verbose or not.

       Returns a boolean to indicate success.

   <b>$cb-&gt;__create_author_tree([path</b> <b>=&gt;</b> <b>$path,</b> <b>uptodate</b> <b>=&gt;</b> <b>BOOL,</b> <b>verbose</b> <b>=&gt;</b> <b>BOOL])</b>
       This method opens a source files and parses its contents into a  searchable  author-tree  or  restores  a
       file-cached version of a previous parse, if the sources are uptodate and the file-cache exists.

       It takes the following arguments:

       uptodate
           A flag indicating whether the file-cache is uptodate or not.

       path
           The absolute path to the directory holding the source files.

       verbose
           A boolean flag indicating whether or not to be verbose.

       Will get information from the config file by default.

       Returns a tree on success, false on failure.

   <b>$cb-&gt;_create_mod_tree([path</b> <b>=&gt;</b> <b>$path,</b> <b>uptodate</b> <b>=&gt;</b> <b>BOOL,</b> <b>verbose</b> <b>=&gt;</b> <b>BOOL])</b>
       This  method  opens  a  source  files and parses its contents into a searchable module-tree or restores a
       file-cached version of a previous parse, if the sources are uptodate and the file-cache exists.

       It takes the following arguments:

       uptodate
           A flag indicating whether the file-cache is up-to-date or not.

       path
           The absolute path to the directory holding the source files.

       verbose
           A boolean flag indicating whether or not to be verbose.

       Will get information from the config file by default.

       Returns a tree on success, false on failure.

   <b>$cb-&gt;__create_dslip_tree([path</b> <b>=&gt;</b> <b>$path,</b> <b>uptodate</b> <b>=&gt;</b> <b>BOOL,</b> <b>verbose</b> <b>=&gt;</b> <b>BOOL])</b>
       This method opens a source files and parses its contents into a searchable dslip-tree or restores a file-
       cached version of a previous parse, if the sources are uptodate and the file-cache exists.

       It takes the following arguments:

       uptodate
           A flag indicating whether the file-cache is uptodate or not.

       path
           The absolute path to the directory holding the source files.

       verbose
           A boolean flag indicating whether or not to be verbose.

       Will get information from the config file by default.

       Returns a tree on success, false on failure.

   <b>$cb-&gt;_dslip_defs</b> <b>()</b>
       This function returns the definition structure (ARRAYREF) of the dslip tree.

   <b>$file</b> <b>=</b> <b>$cb-&gt;_add_custom_module_source(</b> <b>uri</b> <b>=&gt;</b> <b>URI,</b> <b>[verbose</b> <b>=&gt;</b> <b>BOOL]</b> <b>);</b>
       Adds a custom source index and updates it based on the provided URI.

       Returns the full path to the index file on success or false on failure.

   <b>$index</b> <b>=</b> <b>$cb-&gt;__custom_module_source_index_file(</b> <b>uri</b> <b>=&gt;</b> <b>$uri</b> <b>);</b>
       Returns the full path to the encoded index file for $uri, as used by all "custom module source" routines.

   <b>$file</b> <b>=</b> <b>$cb-&gt;_remove_custom_module_source(</b> <b>uri</b> <b>=&gt;</b> <b>URI,</b> <b>[verbose</b> <b>=&gt;</b> <b>BOOL]</b> <b>);</b>
       Removes a custom index file based on the URI provided.

       Returns the full path to the index file on success or false on failure.

   <b>%files</b> <b>=</b> <b>$cb-&gt;__list_custom_module_sources</b>
       This method scans the 'custom-sources' directory in your base directory for additional sources to include
       in your module tree.

       Returns a list of key value pairs as follows:

         /full/path/to/source/file%3Fencoded =&gt; <a href="http://decoded/mirror/path">http://decoded/mirror/path</a>

   <b>$bool</b> <b>=</b> <b>$cb-&gt;__update_custom_module_sources(</b> <b>[verbose</b> <b>=&gt;</b> <b>BOOL]</b> <b>);</b>
       Attempts to update all the index files to your custom module sources.

       If the index is missing, and it's a "file://" uri, it will generate a new local index for you.

       Return true on success, false on failure.

   <b>$ok</b> <b>=</b> <b>$cb-&gt;__update_custom_module_source</b>
       Attempts to update all the index files to your custom module sources.

       If the index is missing, and it's a "file://" uri, it will generate a new local index for you.

       Return true on success, false on failure.

   <b>$bool</b> <b>=</b> <b>$cb-&gt;__write_custom_module_index(</b> <b>path</b> <b>=&gt;</b> <b>/path/to/packages,</b> <b>[to</b> <b>=&gt;</b> <b>/path/to/index/file,</b>  <b>verbose</b>  <b>=&gt;</b>
       <b>BOOL]</b> <b>)</b>
       Scans  the  "path"  you  provided  for  packages  and  writes an index with all the available packages to
       "$path/packages.txt". If you'd like the index to be  written  to  a  different  file,  provide  the  "to"
       argument.

       Returns true on success and false on failure.

   <b>$bool</b> <b>=</b> <b>$cb-&gt;__create_custom_module_entries(</b> <b>[verbose</b> <b>=&gt;</b> <b>BOOL]</b> <b>)</b>
       Creates entries in the module tree based upon the files as returned by "__list_custom_module_sources".

       Returns true on success, false on failure.

perl v5.40.1                                       2025-03-01                   <u>CPANPLUS::Internals::<a href="../man3pm/Source.3pm.html">Source</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>