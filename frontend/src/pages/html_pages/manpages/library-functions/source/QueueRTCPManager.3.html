<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QueueRTCPManager - Adds generic management of RTCP functions to an RTP data queue.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libccrtp-doc">libccrtp-doc_2.0.9-4.1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       QueueRTCPManager - Adds generic management of RTCP functions to an RTP data queue.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;cqueue.h&gt;

       Inherits <b>RTPDataQueue</b>, and <b>RTCPCompoundHandler</b>.

       Inherited by <b>AVPQueue</b>.

   <b>Public</b> <b>Member</b> <b>Functions</b>
       <b>RTCPSenderInfo</b> * <b>getMRSenderInfo</b> (<b>SyncSource</b> &amp;src)
           Get the most recent sender report received from a synchronization source.
       <b>RTCPReceiverInfo</b> * <b>getMRReceiverInfo</b> (<b>SyncSource</b> &amp;srcFrom)
           Ask for the info in the most recent receiver report about the local source received from the source
           given as parameter.
       void <b>setLeavingDelay</b> (<b>microtimeout_t</b> delay)
           Set how much time the stack will wait before deleting a synchronization source that has sent an RTCP
           BYE packet.
       void <b>setEnd2EndDelay</b> (<b>microtimeout_t</b> t)
           This method sets the maximum end to end delay allowed.
       <b>microtimeout_t</b> <b>getDefaultEnd2EndDelay</b> () const
       <b>microtimeout_t</b> <b>getEnd2EndDelay</b> () const
       void <b>setSendersControlFraction</b> (float fraction)
           Specify the fraction of the total control bandwith to be dedicated to senders reports.
       void <b>setMinRTCPInterval</b> (<b>microtimeout_t</b> interval)
           Manually set the minimum interval for sending RTP compound packets.
       uint32 <b>getSendRTCPPacketCount</b> () const
           Get the total number of RTCP packets sent until now.
       void <b>setOutQueueCryptoContextCtrl</b> (<b>CryptoContextCtrl</b> *cc)
           Set output queue <b>CryptoContext</b>.
       void <b>removeOutQueueCryptoContextCtrl</b> (<b>CryptoContextCtrl</b> *cc)
           Remove output queue <b>CryptoContext</b>.
       <b>CryptoContextCtrl</b> * <b>getOutQueueCryptoContextCtrl</b> (uint32 ssrc)
           Get an output queue <b>CryptoContext</b> identified by SSRC.
       void <b>setInQueueCryptoContextCtrl</b> (<b>CryptoContextCtrl</b> *cc)
           Set input queue <b>CryptoContext</b>.
       void <b>removeInQueueCryptoContextCtrl</b> (<b>CryptoContextCtrl</b> *cc)
           Remove input queue <b>CryptoContext</b>.
       <b>CryptoContextCtrl</b> * <b>getInQueueCryptoContextCtrl</b> (uint32 ssrc)
           Get an input queue <b>CryptoContext</b> identified by SSRC.

       Public Member Functions inherited from <b>RTPDataQueue</b>
       void <b>setTypeOfService</b> (<b>Tos</b> tos)
           Specify the kind of service the application expects to use.
       void <b>enableStack</b> ()
           Enable packet queue processing in the stack.
       void <b>disableStack</b> ()
           Disable packet queue processing in the stack.
       bool <b>isActive</b> () const
           Get active connection state flag.
       uint32 <b>getCurrentTimestamp</b> () const
           Get the timestamp that should be given for a packet whose payload sampling instant corresponds to the
           current system time.
       void <b>setSessionBandwidth</b> (uint32 bw)
           Specify the bandwidth of the current session.
       uint32 <b>getDefaultSessionBandwidth</b> () const
       uint32 <b>getSessionBandwidth</b> () const
       void <b>setTimeclock</b> ()
           Set the packet timeclock for synchronizing timestamps.
       timeout_t <b>getTimeclock</b> () const
           Get the packet timeclock for synchronizing timestamps.

       Public Member Functions inherited from <b>IncomingDataQueue</b>
       <b>SyncSourcesIterator</b> <b>begin</b> ()
       <b>SyncSourcesIterator</b> <b>end</b> ()
       const <b>AppDataUnit</b> * <b>getData</b> (uint32 stamp, const <b>SyncSource</b> *src=NULL)
           Retreive data from a specific timestamped packet if such a packet is currently available in the
           receive buffer.
       bool <b>isWaiting</b> (const <b>SyncSource</b> *src=NULL) const
           Determine if packets are waiting in the reception queue.
       uint32 <b>getFirstTimestamp</b> (const <b>SyncSource</b> *src=NULL) const
           Get timestamp of first packet waiting in the queue.
       void <b>setMinValidPacketSequence</b> (uint8 packets)
           When receiving packets from a new source, it may be convenient to reject a first few packets before
           we are really sure the source is valid.
       uint8 <b>getDefaultMinValidPacketSequence</b> () const
       uint8 <b>getMinValidPacketSequence</b> () const
           Get the minimun number of consecutive packets that must be received from a source before accepting
           its data packets.
       void <b>setMaxPacketMisorder</b> (uint16 packets)
       uint16 <b>getDefaultMaxPacketMisorder</b> () const
       uint16 <b>getMaxPacketMisorder</b> () const
       void <b>setMaxPacketDropout</b> (uint16 packets)
           It also prevents packets sent after a restart of the source being immediately accepted.
       uint16 <b>getDefaultMaxPacketDropout</b> () const
       uint16 <b>getMaxPacketDropout</b> () const
       void <b>setInQueueCryptoContext</b> (<b>CryptoContext</b> *cc)
           Set input queue <b>CryptoContext</b>.
       void <b>removeInQueueCryptoContext</b> (<b>CryptoContext</b> *cc)
           Remove input queue <b>CryptoContext</b>.
       <b>CryptoContext</b> * <b>getInQueueCryptoContext</b> (uint32 ssrc)
           Get an input queue <b>CryptoContext</b> identified by SSRC.

       Public Member Functions inherited from <b>IncomingDataQueueBase</b>
       size_t <b>getDefaultMaxRecvPacketSize</b> () const
       size_t <b>getMaxRecvPacketSize</b> () const
       void <b>setMaxRecvPacketSize</b> (size_t maxsize)

       Public Member Functions inherited from <b>RTPQueueBase</b>
       bool <b>setPayloadFormat</b> (const <b>PayloadFormat</b> &amp;pf)
           Set the payload format in use, for timing and payload type identification purposes.
       uint32 <b>getLocalSSRC</b> () const
       uint32 <b>getCurrentRTPClockRate</b> () const
           Get the clock rate in RTP clock units (for instance, 8000 units per second for PCMU, or 90000 units
           per second for MP2T).
       <b>PayloadType</b> <b>getCurrentPayloadType</b> () const
       timeval <b>getInitialTime</b> () const

       Public Member Functions inherited from <b>OutgoingDataQueue</b>
       bool <b>addDestination</b> (const InetHostAddress &amp;ia, tpport_t dataPort=<b>DefaultRTPDataPort</b>, tpport_t
           controlPort=0)
       bool <b>addDestination</b> (const InetMcastAddress &amp;ia, tpport_t dataPort=<b>DefaultRTPDataPort</b>, tpport_t
           controlPort=0)
       bool <b>forgetDestination</b> (const InetHostAddress &amp;ia, tpport_t dataPort=<b>DefaultRTPDataPort</b>, tpport_t
           controlPort=0)
       bool <b>forgetDestination</b> (const InetMcastAddress &amp;ia, tpport_t dataPort=<b>DefaultRTPDataPort</b>, tpport_t
           controlPort=0)
       void <b>addContributor</b> (uint32 csrc)
           Add csrc as the CSRC identifier of a new contributor.
       bool <b>removeContributor</b> (uint32 csrc)
           Remove CSRC from the list of contributors.
       bool <b>isSending</b> () const
           Determine if outgoing packets are waiting to send.
       void <b>putData</b> (uint32 stamp, const unsigned char *data=NULL, size_t len=0)
           This is used to create a data packet in the send queue.
       void <b>sendImmediate</b> (uint32 stamp, const unsigned char *data=NULL, size_t len=0)
           This is used to create a data packet and send it immediately.
       void <b>setPadding</b> (uint8 <b>paddinglen</b>)
           Set padding.
       void <b>setMark</b> (bool mark)
           Set marker bit for the packet in which the next data provided will be send.
       bool <b>getMark</b> () const
           Get whether the mark bit will be set in the next packet.
       size_t <b>setPartial</b> (uint32 timestamp, unsigned char *data, size_t offset, size_t max)
           Set partial data for an already queued packet.
       <b>microtimeout_t</b> <b>getDefaultSchedulingTimeout</b> () const
       void <b>setSchedulingTimeout</b> (<b>microtimeout_t</b> to)
           Set the default scheduling timeout to use when no data packets are waiting to be sent.
       <b>microtimeout_t</b> <b>getDefaultExpireTimeout</b> () const
       void <b>setExpireTimeout</b> (<b>microtimeout_t</b> to)
           Set the 'expired' timer for expiring packets pending in the send queue which have gone unsent and are
           already 'too late' to be sent now.
       <b>microtimeout_t</b> <b>getExpireTimeout</b> () const
       uint32 <b>getSendPacketCount</b> () const
           Get the total number of packets sent so far.
       uint32 <b>getSendOctetCount</b> () const
           Get the total number of octets (payload only) sent so far.
       uint16 <b>getSequenceNumber</b> () const
           Get the sequence number of the next outgoing packet.
       void <b>setOutQueueCryptoContext</b> (<b>CryptoContext</b> *cc)
           Set output queue <b>CryptoContext</b>.
       void <b>removeOutQueueCryptoContext</b> (<b>CryptoContext</b> *cc)
           Remove output queue <b>CryptoContext</b>.
       <b>CryptoContext</b> * <b>getOutQueueCryptoContext</b> (uint32 ssrc)
           Get an output queue <b>CryptoContext</b> identified by SSRC.

       Public Member Functions inherited from <b>OutgoingDataQueueBase</b>
       size_t <b>getDefaultMaxSendSegmentSize</b> ()
       void <b>setMaxSendSegmentSize</b> (size_t size)
           Set maximum payload segment size before fragmenting sends.
       size_t <b>getMaxSendSegmentSize</b> ()

   <b>Protected</b> <b>Member</b> <b>Functions</b>
       <b>QueueRTCPManager</b> (uint32 size=<b>RTPDataQueue::defaultMembersHashSize</b>, <b>RTPApplication</b>
           &amp;app=<b>defaultApplication</b>())
       <b>QueueRTCPManager</b> (uint32 ssrc, uint32 size=<b>RTPDataQueue::defaultMembersHashSize</b>, <b>RTPApplication</b>
           &amp;app=<b>defaultApplication</b>())
       virtual <b>~QueueRTCPManager</b> ()
       const <b>RTPApplication</b> &amp; <b>getApplication</b> ()
       void <b>setControlBandwidth</b> (float fraction)
       float <b>getControlBandwidth</b> () const
       void <b>controlTransmissionService</b> ()
           Build and send RTCP packets following timing rules (including the 'timer reconsideration' algorithm).
       void <b>controlReceptionService</b> ()
           Process incoming RTCP packets pending in the control reception socket.
       bool <b>checkSSRCInRTCPPkt</b> (<b>SyncSourceLink</b> &amp;sourceLink, bool is_new, InetAddress &amp;na, tpport_t tp)
           Appy collision and loop detection and correction algorithm when receiving RTCP packets.
       void <b>endQueueRTCPManager</b> ()
       virtual void <b>onGotSR</b> (<b>SyncSource</b> &amp;source, <b>SendReport</b> &amp;SR, uint8 blocks)
           Plug-in for processing (acquire information carried in) an incoming RTCP Sender Report.
       virtual void <b>onGotRR</b> (<b>SyncSource</b> &amp;source, <b>RecvReport</b> &amp;RR, uint8 blocks)
           Plug-in for processing (acquire information carried in) an incoming RTCP Receiver Report.
       bool <b>onGotSDES</b> (<b>SyncSource</b> &amp;source, <b>RTCPPacket</b> &amp;pkt)
       virtual bool <b>onGotSDESChunk</b> (<b>SyncSource</b> &amp;source, <b>SDESChunk</b> &amp;chunk, size_t len)
           Plug-in for handling of SDES chunks.
       virtual void <b>onGotAPP</b> (<b>SyncSource</b> &amp;, <b>RTCPCompoundHandler::APPPacket</b> &amp;, size_t)
           Plug-in for handling of APP (application specific) RTCP packets.
       timeval <b>getRTCPCheckInterval</b> ()
       uint32 <b>getLastSendPacketCount</b> () const
           Get the number of data packets sent at the time the last SR was generated.
       void <b>setPrevMembersNum</b> (uint32 n)
       uint32 <b>getPrevMembersCount</b> () const
       size_t <b>dispatchBYE</b> (const std::string &amp;reason)
           This method is used to send an RTCP BYE packet.
       size_t <b>sendControlToDestinations</b> (unsigned char *buffer, size_t len)

       Protected Member Functions inherited from <b>RTPDataQueue</b>
       <b>RTPDataQueue</b> (uint32 size=<b>defaultMembersHashSize</b>)
           Constructor.
       <b>RTPDataQueue</b> (uint32 *ssrc, uint32 size=<b>defaultMembersHashSize</b>)
           Using this constructor you can start a session with the given ssrc, instead of the usual randomly
           generated one.
       virtual <b>~RTPDataQueue</b> ()
           The queue destructor flushes the queue and stops all services.
       virtual void <b>timerTick</b> ()
           A plugin point for timer tick driven events.
       void <b>renewLocalSSRC</b> ()
       void <b>endQueue</b> ()
           This method ends the queue.
       virtual bool <b>isPendingData</b> (<b>microtimeout_t</b> timeout)=0
           This function is used to check for and schedule against arriving packets based on the derived
           connection type.

       Protected Member Functions inherited from <b>IncomingDataQueue</b>
       <b>IncomingDataQueue</b> (uint32 size)
       virtual <b>~IncomingDataQueue</b> ()
       bool <b>checkSSRCInIncomingRTPPkt</b> (<b>SyncSourceLink</b> &amp;sourceLink, bool is_new, InetAddress &amp;na, tpport_t tp)
           Apply collision and loop detection and correction algorithm when receiving RTP data packets.
       void <b>setSourceExpirationPeriod</b> (uint8 intervals)
           Set the number of RTCP intervals that the stack will wait to change the state of a source from
           stateActive to stateInactive, or to delete the source after being in stateInactive.
       virtual size_t <b>takeInDataPacket</b> ()
           This function is used by the service thread to process the next incoming packet and place it in the
           receive list.
       <b>IncomingDataQueue::IncomingRTPPktLink</b> * <b>getWaiting</b> (uint32 timestamp, const <b>SyncSource</b> *src=NULL)
           This is used to fetch a packet in the receive queue and to expire packets older than the current
           timestamp.
       bool <b>recordReception</b> (<b>SyncSourceLink</b> &amp;srcLink, const <b>IncomingRTPPkt</b> &amp;pkt, const timeval recvtime)
           Log reception of a new RTP packet from this source.
       void <b>recordExtraction</b> (const <b>IncomingRTPPkt</b> &amp;pkt)
           Log extraction of a packet from this source from the scheduled reception queue.
       void <b>purgeIncomingQueue</b> ()
       virtual void <b>onNewSyncSource</b> (const <b>SyncSource</b> &amp;)
           Virtual called when a new synchronization source has joined the session.
       virtual bool <b>onRTPPacketRecv</b> (<b>IncomingRTPPkt</b> &amp;)
           A virtual function to support parsing of arriving packets to determine if they should be kept in the
           queue and to dispatch events.
       virtual void <b>onExpireRecv</b> (<b>IncomingRTPPkt</b> &amp;)
           A hook to filter packets in the receive queue that are being expired.
       virtual bool <b>onSRTPPacketError</b> (<b>IncomingRTPPkt</b> &amp;pkt, int32 errorCode)
           A hook that gets called if the decoding of an incoming SRTP was erroneous.
       bool <b>insertRecvPacket</b> (<b>IncomingRTPPktLink</b> *packetLink)
           Insert a just received packet in the queue (both general and source specific queues).
       virtual size_t <b>recvData</b> (unsigned char *buffer, size_t length, InetHostAddress &amp;host, tpport_t &amp;port)=0
           This function performs the physical I/O for reading a packet from the source.
       virtual size_t <b>getNextDataPacketSize</b> () const =0

       Protected Member Functions inherited from <b>IncomingDataQueueBase</b>
       <b>IncomingDataQueueBase</b> ()
       virtual <b>~IncomingDataQueueBase</b> ()

       Protected Member Functions inherited from <b>RTPQueueBase</b>
       <b>RTPQueueBase</b> (uint32 *ssrc=NULL)
       void <b>setLocalSSRC</b> (uint32 ssrc)
       uint32 <b>getLocalSSRCNetwork</b> () const
       virtual <b>~RTPQueueBase</b> ()

       Protected Member Functions inherited from <b>MembershipBookkeeping</b>
       <b>MembershipBookkeeping</b> (uint32 initialSize=<b>defaultMembersHashSize</b>)
           The initial size is a hint to allocate the resources needed in order to keep the members' identifiers
           and associated information.
       virtual <b>~MembershipBookkeeping</b> ()
           Purges all RTPSource structures created during the session, as well as the hash table and the list of
           sources.
       <b>SyncSourceLink</b> * <b>getLink</b> (const <b>SyncSource</b> &amp;source) const
       bool <b>isMine</b> (const <b>SyncSource</b> &amp;source) const
           Get whether a synchronization source is recorded in this membership controller.
       bool <b>isRegistered</b> (uint32 ssrc)
           Returns whether there is already a synchronizacion source with 'ssrc' SSRC identifier.
       <b>SyncSourceLink</b> * <b>getSourceBySSRC</b> (uint32 ssrc, bool &amp;created)
           Get the description of a source by its ssrc identifier.
       bool <b>BYESource</b> (uint32 ssrc)
           Mark the source identified by ssrc as having sent a BYE packet.
       bool <b>removeSource</b> (uint32 ssrc)
           Remove the description of the source identified by ssrc
       <b>SyncSourceLink</b> * <b>getFirst</b> ()
       <b>SyncSourceLink</b> * <b>getLast</b> ()
       uint32 <b>getMembersCount</b> ()
       void <b>setMembersCount</b> (uint32 n)
       uint32 <b>getSendersCount</b> ()
       size_t <b>getDefaultMembersHashSize</b> ()

       Protected Member Functions inherited from <b>SyncSourceHandler</b>
       <b>SyncSourceHandler</b> ()
       virtual <b>~SyncSourceHandler</b> ()
       void * <b>getLink</b> (const <b>SyncSource</b> &amp;source) const
           This requires <b>SyncSource</b> - <b>SyncSourceHandler</b> friendship.
       void <b>setLink</b> (<b>SyncSource</b> &amp;source, void *link)
       void <b>setParticipant</b> (<b>SyncSource</b> &amp;source, <b>Participant</b> &amp;p)
       void <b>setState</b> (<b>SyncSource</b> &amp;source, <b>SyncSource::State</b> ns)
       void <b>setSender</b> (<b>SyncSource</b> &amp;source, bool active)
       void <b>setDataTransportPort</b> (<b>SyncSource</b> &amp;source, tpport_t p)
       void <b>setControlTransportPort</b> (<b>SyncSource</b> &amp;source, tpport_t p)
       void <b>setNetworkAddress</b> (<b>SyncSource</b> &amp;source, InetAddress addr)

       Protected Member Functions inherited from <b>ParticipantHandler</b>
       <b>ParticipantHandler</b> ()
       virtual <b>~ParticipantHandler</b> ()
       void <b>setSDESItem</b> (<b>Participant</b> *part, <b>SDESItemType</b> item, const std::string &amp;val)
       void <b>setPRIVPrefix</b> (<b>Participant</b> *part, const std::string val)

       Protected Member Functions inherited from <b>ApplicationHandler</b>
       <b>ApplicationHandler</b> ()
       virtual <b>~ApplicationHandler</b> ()
       void <b>addParticipant</b> (<b>RTPApplication</b> &amp;app, <b>Participant</b> &amp;part)
       void <b>removeParticipant</b> (<b>RTPApplication</b> &amp;app, RTPApplication::ParticipantLink *pl)

       Protected Member Functions inherited from <b>ConflictHandler</b>
       <b>ConflictHandler</b> ()
       virtual <b>~ConflictHandler</b> ()
       <b>ConflictingTransportAddress</b> * <b>searchDataConflict</b> (InetAddress na, tpport_t dtp)
       <b>ConflictingTransportAddress</b> * <b>searchControlConflict</b> (InetAddress na, tpport_t ctp)
       void <b>updateConflict</b> (<b>ConflictingTransportAddress</b> &amp;ca)
       void <b>addConflict</b> (const InetAddress &amp;na, tpport_t dtp, tpport_t ctp)

       Protected Member Functions inherited from <b>OutgoingDataQueue</b>
       <b>OutgoingDataQueue</b> ()
       virtual <b>~OutgoingDataQueue</b> ()
       void <b>dispatchImmediate</b> (<b>OutgoingRTPPkt</b> *packet)
           This is used to write the RTP data packet to one or more destinations.
       <b>microtimeout_t</b> <b>getSchedulingTimeout</b> ()
           This computes the timeout period for scheduling transmission of the next packet at the 'head' of the
           send buffer.
       size_t <b>dispatchDataPacket</b> ()
           This function is used by the service thread to process the next outgoing packet pending in the
           sending queue.
       void <b>setNextSeqNum</b> (uint32 seqNum)
           For thoses cases in which the application requires a method to set the sequence number for the
           outgoing stream (such as for implementing the RTSP PLAY command).
       uint32 <b>getCurrentSeqNum</b> (void)
       void <b>setInitialTimestamp</b> (uint32 ts)
       uint32 <b>getInitialTimestamp</b> ()
       void <b>purgeOutgoingQueue</b> ()
       virtual void <b>setControlPeer</b> (const InetAddress &amp;host, tpport_t port)

       Protected Member Functions inherited from <b>OutgoingDataQueueBase</b>
       <b>OutgoingDataQueueBase</b> ()
       virtual <b>~OutgoingDataQueueBase</b> ()

       Protected Member Functions inherited from <b>DestinationListHandler</b>
       void <b>writeLockDestinationList</b> () const
       bool <b>addDestinationToList</b> (const InetAddress &amp;ia, tpport_t data, tpport_t control)
           Locks the object before modifying it.
       bool <b>removeDestinationFromList</b> (const InetAddress &amp;ia, tpport_t dataPort, tpport_t controlPort)
           Locks the object before modifying it.
       <b>DestinationListHandler</b> ()
       <b>~DestinationListHandler</b> ()
       bool <b>isSingleDestination</b> () const
           Get whether there is only a destination in the list.
       <b>TransportAddress</b> * <b>getFirstDestination</b> () const
       void <b>lockDestinationList</b> () const
       void <b>unlockDestinationList</b> () const

       Protected Member Functions inherited from <b>RTCPCompoundHandler</b>
       <b>RTCPCompoundHandler</b> (uint16 mtu=<b>defaultPathMTU</b>)
       <b>~RTCPCompoundHandler</b> ()
       bool <b>checkCompoundRTCPHeader</b> (size_t len)
           Perform RTCP compound packet header validity check as specified in draft-ietv-avt-rtp-new.
       void <b>setPathMTU</b> (uint16 mtu)
       uint16 <b>getPathMTU</b> ()

   <b>Additional</b> <b>Inherited</b> <b>Members</b>
       Public Types inherited from <b>RTPDataQueue</b>
       enum <b>Tos</b> { <b>tosBestEffort</b>, <b>tosEnhanced</b> }
           <b>rtp.h</b> cc++/rtp.h

       Static Public Member Functions inherited from <b>IncomingDataQueue</b>
       static size_t <b>getDefaultMembersSize</b> ()

       Protected Types inherited from <b>RTCPCompoundHandler</b>
       enum { <b>defaultPathMTU</b> = 1500 }

       Protected Attributes inherited from <b>IncomingDataQueue</b>
       ThreadLock <b>recvLock</b>
       <b>IncomingRTPPktLink</b> * <b>recvFirst</b>
       <b>IncomingRTPPktLink</b> * <b>recvLast</b>
       uint8 <b>minValidPacketSequence</b>
       uint16 <b>maxPacketMisorder</b>
       uint16 <b>maxPacketDropout</b>
       uint8 <b>sourceExpirationPeriod</b>
       Mutex <b>cryptoMutex</b>
       std::list&lt; <b>CryptoContext</b> * &gt; <b>cryptoContexts</b>

       Protected Attributes inherited from <b>ConflictHandler</b>
       <b>ConflictingTransportAddress</b> * <b>firstConflict</b>
       <b>ConflictingTransportAddress</b> * <b>lastConflict</b>

       Protected Attributes inherited from <b>OutgoingDataQueue</b>
       Mutex <b>cryptoMutex</b>
       std::list&lt; <b>CryptoContext</b> * &gt; <b>cryptoContexts</b>

       Protected Attributes inherited from <b>DestinationListHandler</b>
       std::list&lt; <b>TransportAddress</b> * &gt; <b>destList</b>

       Protected Attributes inherited from <b>RTCPCompoundHandler</b>
       unsigned char * <b>rtcpSendBuffer</b>
       unsigned char * <b>rtcpRecvBuffer</b>

       Static Protected Attributes inherited from <b>IncomingDataQueue</b>
       static const uint8 <b>defaultMinValidPacketSequence</b>
       static const uint16 <b>defaultMaxPacketMisorder</b>
       static const uint16 <b>defaultMaxPacketDropout</b>
       static const size_t <b>defaultMembersSize</b>

       Static Protected Attributes inherited from <b>MembershipBookkeeping</b>
       static const size_t <b>defaultMembersHashSize</b>
       static const uint32 <b>SEQNUMMOD</b>

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Adds generic management of RTCP functions to an RTP data queue.

       Extends an RTP data i/o queue adding management of RTCP functions:

       Provide feedback on the quality of the data distribution.

       Convey the CNAME (persistent transport-level identifier) for every RTP source.

       Control the sending rate of RTCP packets

       Convey minimal control information about the participants

       This class implements generic RTCP behaviour (as specified in RFC 1889/draft-ietf-avt-rtp-new) and may be
       specialized for specific profiles (see <b>AVPQueue</b>) or particular RTCP extensions.

       <b>Author</b>
           Federico Montesino Pouzols <a href="mailto:fedemp@altern.org">fedemp@altern.org</a>

</pre><h4><b>Constructor</b> <b>&amp;</b> <b>Destructor</b> <b>Documentation</b></h4><pre>
   <b>QueueRTCPManager::QueueRTCPManager</b> <b>(uint32</b> <b>size</b> <b>=</b> <b>RTPDataQueue::defaultMembersHashSize,</b> <b>RTPApplication</b> <b>&amp;</b> <b>app</b>
       <b>=</b> <b>defaultApplication())</b> <b>[protected]</b>
   <b>QueueRTCPManager::QueueRTCPManager</b> <b>(uint32</b> <b>ssrc,</b> <b>uint32</b> <b>size</b> <b>=</b> <b>RTPDataQueue::defaultMembersHashSize,</b>
       <b>RTPApplication</b> <b>&amp;</b> <b>app</b> <b>=</b> <b>defaultApplication())</b> <b>[protected]</b>
   <b>virtual</b> <b>QueueRTCPManager::~QueueRTCPManager</b> <b>()</b> <b>[protected],</b>  <b>[virtual]</b>
</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>bool</b> <b>QueueRTCPManager::checkSSRCInRTCPPkt</b> <b>(SyncSourceLink</b> <b>&amp;</b> <b>sourceLink,</b> <b>bool</b> <b>is_new,</b> <b>InetAddress</b> <b>&amp;</b> <b>na,</b>
       <b>tpport_t</b> <b>tp)</b> <b>[protected]</b>
       Appy collision and loop detection and correction algorithm when receiving RTCP packets. Follows section
       8.2 in draft-ietf-avp-rtp-new.

       <b>Parameters</b>
           <u>sourceLink</u> link to the source object.
           <u>is_new</u> whether the source has been just recorded.
           <u>na</u> RTCP packet network address.
           <u>tp</u> RTCP packet source transport port.

       <b>Returns</b>
           whether the packet must not be discarded.

   <b>void</b> <b>QueueRTCPManager::controlReceptionService</b> <b>()</b> <b>[protected]</b>
       Process incoming RTCP packets pending in the control reception socket.

   <b>void</b> <b>QueueRTCPManager::controlTransmissionService</b> <b>()</b> <b>[protected]</b>
       Build and send RTCP packets following timing rules (including the 'timer reconsideration' algorithm).

   <b>size_t</b> <b>QueueRTCPManager::dispatchBYE</b> <b>(const</b> <b>std::string</b> <b>&amp;</b> <b>reason)</b> <b>[protected],</b>  <b>[virtual]</b>
       This method is used to send an RTCP BYE packet. An RTCP BYE packet is sent when one of the the following
       circumstances occur:

       • when leaving the session

       • when  we  have  detected that another synchronization source in the same session is using the same SSRC
         identifier as us.

       Try to post a BYE message. It will send a BYE packet as long as at least one RTP or RTCP packet has  been
       sent  before. If the number of members in the session is more than 50, the algorithm described in section
       6.3.7 of RFC 3550 is applied in order to avoid a flood of BYE messages.

       <b>Parameters</b>
           <u>reason</u> reason to specify in the BYE packet.

       Reimplemented from <b>RTPQueueBase</b>.

       Reimplemented  in  <b>TRTPSessionBase&lt;</b>  <b>RTPDataChannel,</b>  <b>RTCPChannel,</b>   <b>ServiceQueue</b>   <b>&gt;</b>,   <b>TRTPSessionBase&lt;</b>
       <b>DualRTPUDPIPv4Channel,</b>  <b>DualRTPUDPIPv4Channel,</b>  <b>AVPQueue</b>  <b>&gt;</b>,  and <b>SingleThreadRTPSession&lt;</b> <b>RTPDataChannel,</b>
       <b>RTCPChannel,</b> <b>ServiceQueue</b> <b>&gt;</b>.

   <b>void</b> <b>QueueRTCPManager::endQueueRTCPManager</b> <b>()</b> <b>[protected]</b>
   <b>const</b> <b>RTPApplication</b> <b>&amp;</b> <b>QueueRTCPManager::getApplication</b> <b>()</b> <b>[inline],</b>  <b>[protected]</b>
   <b>float</b> <b>QueueRTCPManager::getControlBandwidth</b> <b>()</b> <b>const</b> <b>[inline],</b>  <b>[protected]</b>
   <b>microtimeout_t</b> <b>QueueRTCPManager::getDefaultEnd2EndDelay</b> <b>()</b> <b>const</b> <b>[inline]</b>
   <b>microtimeout_t</b> <b>QueueRTCPManager::getEnd2EndDelay</b> <b>()</b> <b>const</b> <b>[inline]</b>
   <b>CryptoContextCtrl</b> <b>*</b> <b>QueueRTCPManager::getInQueueCryptoContextCtrl</b> <b>(uint32</b> <b>ssrc)</b>
       Get an input queue <b>CryptoContext</b> identified by SSRC.

       <b>Parameters</b>
           <u>ssrc</u> Request <b>CryptoContext</b> for this incoming SSRC

       <b>Returns</b>
           Pointer to <b>CryptoContext</b> of the SSRC of NULL if no context available for this SSRC.

   <b>uint32</b> <b>QueueRTCPManager::getLastSendPacketCount</b> <b>()</b> <b>const</b> <b>[inline],</b>  <b>[protected]</b>
       Get the number of data packets sent at the time the last SR was generated.

   <b>RTCPReceiverInfo</b> <b>*</b> <b>QueueRTCPManager::getMRReceiverInfo</b> <b>(SyncSource</b> <b>&amp;</b> <b>srcFrom)</b>
       Ask for the info in the most recent receiver report about the local source received from the source given
       as parameter.

       <b>Parameters</b>
           <u>srcFrom</u> Source of the receiver info.

       <b>Returns</b>
           most recent receiver info received from src.

       <b>Return</b> <b>values</b>
           <u>NULL</u> when no receiver report has been received from the specified source.

   <b>RTCPSenderInfo</b> <b>*</b> <b>QueueRTCPManager::getMRSenderInfo</b> <b>(SyncSource</b> <b>&amp;</b> <b>src)</b>
       Get the most recent sender report received from a synchronization source.

       <b>Parameters</b>
           <u>src</u> Synchronization source of the sender info.

       <b>Returns</b>
           Most recent sender info received from src.

       <b>Return</b> <b>values</b>
           <u>NULL</u> when no sender report has been received from the specified source.

   <b>CryptoContextCtrl</b> <b>*</b> <b>QueueRTCPManager::getOutQueueCryptoContextCtrl</b> <b>(uint32</b> <b>ssrc)</b>
       Get an output queue <b>CryptoContext</b> identified by SSRC.

       <b>Parameters</b>
           <u>ssrc</u> Request <b>CryptoContext</b> for this incoming SSRC

       <b>Returns</b>
           Pointer to <b>CryptoContext</b> of the SSRC of NULL if no context available for this SSRC.

   <b>uint32</b> <b>QueueRTCPManager::getPrevMembersCount</b> <b>()</b> <b>const</b> <b>[inline],</b>  <b>[protected]</b>
   <b>timeval</b> <b>QueueRTCPManager::getRTCPCheckInterval</b> <b>(void)</b> <b>[inline],</b>  <b>[protected]</b>
   <b>uint32</b> <b>QueueRTCPManager::getSendRTCPPacketCount</b> <b>()</b> <b>const</b> <b>[inline]</b>
       Get the total number of RTCP packets sent until now.

   <b>virtual</b> <b>void</b> <b>QueueRTCPManager::onGotAPP</b> <b>(SyncSource</b> <b>&amp;,</b> <b>RTCPCompoundHandler::APPPacket</b>  <b>&amp;,</b>  <b>size_t)</b>  <b>[inline],</b>
       <b>[protected],</b>  <b>[virtual]</b>
       Plug-in for handling of APP (application specific) RTCP packets.

       <b>Parameters</b>
           <u>-</u> Synchronization source of this packet.
           <u>-</u> RTCP APP packet struct.
           <u>-</u> Length of the app data packet, including ssrc. name and app. specific data.

   <b>virtual</b>  <b>void</b>  <b>QueueRTCPManager::onGotRR</b>  <b>(SyncSource</b>  <b>&amp;</b>  <b>source,</b> <b>RecvReport</b> <b>&amp;</b> <b>RR,</b> <b>uint8</b> <b>blocks)</b> <b>[protected],</b>
       <b>[virtual]</b>
       Plug-in for processing (acquire information carried in) an incoming RTCP  Receiver  Report.  The  default
       implementation in this class only processes the receiver report blocks about the local source.

       <b>Parameters</b>
           <u>source</u> Synchronization source this report comes from.
           <u>RR</u> Receiver report structure
           <u>blocks</u> Number of report blocks in the packet

       <b>Examples</b>
           <b>rtplisten.cpp</b>.

   <b>bool</b> <b>QueueRTCPManager::onGotSDES</b> <b>(SyncSource</b> <b>&amp;</b> <b>source,</b> <b>RTCPPacket</b> <b>&amp;</b> <b>pkt)</b> <b>[protected]</b>
       <b>Parameters</b>
           <u>source</u> Synchronization source of SDES RTCP packet.
           <u>pkt</u> SDES RTCP packet received.

   <b>virtual</b>   <b>bool</b>  <b>QueueRTCPManager::onGotSDESChunk</b>  <b>(SyncSource</b>  <b>&amp;</b>  <b>source,</b>  <b>SDESChunk</b>  <b>&amp;</b>  <b>chunk,</b>  <b>size_t</b>  <b>len)</b>
       <b>[protected],</b>  <b>[virtual]</b>
       Plug-in for handling of SDES chunks.

       <b>Parameters</b>
           <u>source</u> Synchronization source of SDES chunk.
           <u>chunk</u> SDES chunk structure.
           <u>len</u> Length of chunk, in octets.

       <b>Returns</b>
           whether there was a CNAME.

       <b>Examples</b>
           <b>rtplisten.cpp</b>.

   <b>virtual</b> <b>void</b> <b>QueueRTCPManager::onGotSR</b> <b>(SyncSource</b> <b>&amp;</b> <b>source,</b> <b>SendReport</b>  <b>&amp;</b>  <b>SR,</b>  <b>uint8</b>  <b>blocks)</b>  <b>[protected],</b>
       <b>[virtual]</b>
       Plug-in  for  processing  (acquire  information  carried  in) an incoming RTCP Sender Report. The default
       implementation in this class only processes the sender information and the receiver report  blocks  about
       the local source.

       <b>Parameters</b>
           <u>source</u> Synchronization source this report comes from.
           <u>SR</u> Sender report structure.
           <u>blocks</u> Number of report blocks in the packet.

       <b>Examples</b>
           <b>rtplisten.cpp</b>.

   <b>void</b> <b>QueueRTCPManager::removeInQueueCryptoContextCtrl</b> <b>(CryptoContextCtrl</b> <b>*</b> <b>cc)</b>
       Remove  input queue <b>CryptoContext</b>. The endQueue method (provided by RTPQueue) also deletes all registered
       CryptoContexts.

       <b>Parameters</b>
           <u>cc</u> Pointer to initialized <b>CryptoContext</b> to remove. If pointer if NULL then delete the whole queue

   <b>void</b> <b>QueueRTCPManager::removeOutQueueCryptoContextCtrl</b> <b>(CryptoContextCtrl</b> <b>*</b> <b>cc)</b>
       Remove output queue <b>CryptoContext</b>. The endQueue method (provided by RTPQueue) also deletes all registered
       CryptoContexts.

       <b>Parameters</b>
           <u>cc</u> Pointer to initialized <b>CryptoContext</b> to remove.

   <b>size_t</b> <b>QueueRTCPManager::sendControlToDestinations</b> <b>(unsigned</b> <b>char</b> <b>*</b> <b>buffer,</b> <b>size_t</b> <b>len)</b> <b>[protected]</b>
   <b>void</b> <b>QueueRTCPManager::setControlBandwidth</b> <b>(float</b> <b>fraction)</b> <b>[inline],</b>  <b>[protected]</b>
   <b>void</b> <b>QueueRTCPManager::setEnd2EndDelay</b> <b>(microtimeout_t</b> <b>t)</b> <b>[inline]</b>
       This method sets the maximum end to end delay allowed. If the processing delay plus the trip time  for  a
       packet is greater than the end to end delay, the packet is discarded, and the application cannot get it.

       This is a way of setting an upper bound to the end to end delay, computed as the elapsed time between the
       packet timestamping at the sender side, and the picking of the packet at the receiver side.

       <b>Parameters</b>
           <u>t</u> maximum end to end delay allowed. A value of 0 implies there is no limit and is the default

   <b>void</b> <b>QueueRTCPManager::setInQueueCryptoContextCtrl</b> <b>(CryptoContextCtrl</b> <b>*</b> <b>cc)</b>
       Set  input  queue  <b>CryptoContext</b>.  The  endQueue  method  (provided  by  RTPQueue) deletes all registered
       CryptoContexts.

       <b>Parameters</b>
           <u>cc</u> Pointer to initialized <b>CryptoContext</b>.

   <b>void</b> <b>QueueRTCPManager::setLeavingDelay</b> <b>(microtimeout_t</b> <b>delay)</b> <b>[inline]</b>
       Set how much time the stack will wait before deleting a synchronization source that has sent an RTCP  BYE
       packet.

       <b>Parameters</b>
           <u>delay</u> delay in microseconds.

       <b>Note</b>
           The default delay is 1000000 microseconds

   <b>void</b> <b>QueueRTCPManager::setMinRTCPInterval</b> <b>(microtimeout_t</b> <b>interval)</b> <b>[inline]</b>
       Manually set the minimum interval for sending RTP compound packets.

       <b>Parameters</b>
           <u>interval</u> minimum interval between RTCP packets, in microseconds.

       <b>See</b> <b>also</b>
           computeRTCPInterval()

   <b>void</b> <b>QueueRTCPManager::setOutQueueCryptoContextCtrl</b> <b>(CryptoContextCtrl</b> <b>*</b> <b>cc)</b>
       Set  output  queue  <b>CryptoContext</b>.  The  endQueue  method  (provided  by RTPQueue) deletes all registered
       CryptoContexts.

       <b>Parameters</b>
           <u>cc</u> Pointer to initialized <b>CryptoContext</b>.

   <b>void</b> <b>QueueRTCPManager::setPrevMembersNum</b> <b>(uint32</b> <b>n)</b> <b>[inline],</b>  <b>[protected]</b>
       <b>Parameters</b>
           <u>n</u> Number of members.

   <b>void</b> <b>QueueRTCPManager::setSendersControlFraction</b> <b>(float</b> <b>fraction)</b> <b>[inline]</b>
       Specify the fraction of the total control bandwith to be dedicated to senders reports.

       <b>Parameters</b>
           <u>fraction</u> fraction of bandwidth, must be between 0 an 1.

       This method sets the fraction of the global control bandwidth that will be dedicated to senders  reports.
       Of course, 1 - fraction will be dedicated to receivers reports.

       <b>See</b> <b>also</b>
           <b>setControlBandwidth</b>

</pre><h4><b>Member</b> <b>Data</b> <b>Documentation</b></h4><pre>
   <b>uint32</b> <b>QueueRTCPManager::rtcpPMembers</b>
   <b>timeval</b> <b>QueueRTCPManager::rtcpTc</b>
   <b>timeval</b> <b>QueueRTCPManager::rtcpTn</b>
   <b>timeval</b> <b>QueueRTCPManager::rtcpTp</b>
</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for ccRTP from the source code.

                                                      ccRTP                                  <u><a href="../man3/QueueRTCPManager.3.html">QueueRTCPManager</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>