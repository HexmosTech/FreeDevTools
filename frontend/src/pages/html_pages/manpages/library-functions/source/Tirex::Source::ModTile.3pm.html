<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tirex::Source::ModTile -- mod_tile a a source of job requests</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tirex">tirex_0.7.1-3build4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tirex::Source::ModTile -- mod_tile a a source of job requests

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $source = &amp;Tirex::Source::ModTile-&gt;new();
        $source-&gt;notify();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Source using Tirex messages sent through mod_tile (Unix domain socket)

</pre><h4><b>METHODS</b></h4><pre>
   <b>Tirex::Source::ModTile-&gt;new()</b>
       Create source object for Unix domain socket connection.

   <b>$source-&gt;readable($sock)</b>
       Indicates to this source that the given socket is readable, and has data for this source.

       The source will return STATUS_CONTINUE if it expects to continue reading, or STATUS_MESSAGE_COMPLETE if
       reading is complete. STATUS_SOCKET_CLOSED indicates that the peer has closed the connection.

   <b>$source-&gt;make_job($sock)</b>
       Returns a new Tirex::Job object created from the data read by this source.  Also decides whether or not
       this source would like to be notified of job completion, and if yes, flags the job accordingly.

       These are the priority levels used in the Apache mod_tile and how they are translated in Tirex. (Note
       that in mod_tile the numbers do not imply higher or lower priority.)

       <u>cmdRender</u> <u>(1</u> <u>in</u> <u>mod_tile,</u> <u>2</u> <u>in</u> <u>Tirex)</u>

       This priority is used by mod_tile if a "very old" tile is requested. The configuration option
       ModTileVeryOldThreshold controls what counts as "very old". Unless the system load is higher than
       ModTileMaxLoadOld, a render request is triggered and mod_tile waits for up to ModTileRequestTimeout
       seconds. If a tile is not produced within that time, the old tile is returned.

       <u>cmdDirty</u> <u>(2</u> <u>in</u> <u>mod_tile,</u> <u>10</u> <u>in</u> <u>Tirex)</u>

       This priority is used by mod_tile if

       •   the /dirty URL is manually called for a tile

       •   an  "old"  or  "very old" tile is requested but the load is too high to render it right away (the old
           tile will be delivered instead)

       •   a "missing" tile is requested but the load is too high to render it right away (a 404 error  will  be
           issued)

       <u>cmdRenderPrio</u> <u>(5</u> <u>in</u> <u>mod_tile,</u> <u>1</u> <u>in</u> <u>Tirex)</u>

       This priority is used by mod_tile if a "missing" tile is requested. Unless the system load is higher than
       ModTileMaxLoadMissing,     a   render   request   is   triggered   and   mod_tile   waits   for   up   to
       ModTileMissingRequestTimeout seconds. If a tile is not produced within that time, a  404  error  will  be
       issued.

       <u>cmdRenderBulk</u> <u>(6</u> <u>in</u> <u>mod_tile,</u> <u>20</u> <u>in</u> <u>Tirex)</u>

       Used  for  all "missing tile" render requests triggered by mod_tile if "ModTileBulkMode On" is set in the
       Apache  configuration.  In  this  mode,  requests  for  old  tiles  are  never  issued.  Never  used   if
       "ModTileBulkMode Off" (the default).

       <u>cmdRenderLow</u> <u>(7</u> <u>in</u> <u>mod_tile,</u> <u>25</u> <u>in</u> <u>Tirex)</u>

       This  priority is used by mod_tile if an "old" tile is requested. An "old" tile is one that is older than
       three days or, if a planet_import_complete file is present, older than this file. Unless the system  load
       is  higher  than  ModTileMaxLoadOld,  a  render  request  is  triggered  and  mod_tile  waits  for  up to
       ModTileRequestTimeout seconds. If a tile is not produced within that time, the old tile is returned.

   <b>$source-&gt;set_request_write_callback(\&amp;wcb}</b>
       Specifies a function to be called if this source ever wants to receive writable events.

   <b>$source-&gt;notify($job)</b>
       Prepares a notification message about successful tile rendering and informs the main select loop to  give
       us a chance to write.

   <b>$source-&gt;writable($sock)</b>
       Indicates to this source that the given socket is writable.

       The  source will attempt to send the prepared notification message, and return STATUS_MESSAGE_COMPLETE if
       the message has been fully sent. It will return STATUS_CONTINUE if sending needs  to  continue  later.  A
       return value of STATUS_SOCKET_CLOSED indicates that the peer has closed the connection.

perl v5.40.1                                       2025-08-07                        <u>Tirex::Source::<a href="../man3pm/ModTile.3pm.html">ModTile</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>