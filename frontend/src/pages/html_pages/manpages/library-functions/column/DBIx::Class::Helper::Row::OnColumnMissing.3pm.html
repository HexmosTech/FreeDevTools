<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBIx::Class::Helper::Row::OnColumnMissing - Configurably handle access of missing columns</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdbix-class-helpers-perl">libdbix-class-helpers-perl_2.037000-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DBIx::Class::Helper::Row::OnColumnMissing - Configurably handle access of missing columns

</pre><h4><b>SYNOPSIS</b></h4><pre>
        package MyApp::Schema::Result::Account;

        use parent 'DBIx::Class::Core';

        __PACKAGE__-&gt;load_components(qw(Helper::Row::OnColumnMissing));

        __PACKAGE__-&gt;table('Account');

        __PACKAGE__-&gt;add_columns(
           id =&gt; {
              data_type         =&gt; 'integer',
              is_auto_increment =&gt; 1,
           },
           name =&gt; {
              data_type =&gt; 'varchar',
              size =&gt; 25,
           },
           book =&gt; { data_type =&gt; 'text' },
        );

        sub on_column_missing { 'die' }

        1;

       Or with DBIx::Class::Candy:

        package MyApp::Schema::Result::Account;

        use DBIx::Class::Candy -components =&gt; ['Helper::Row::OnColumnMissing'];

        table 'Account';

        column id =&gt; {
           data_type         =&gt; 'integer',
           is_auto_increment =&gt; 1,
        };

        column amount =&gt; {
           data_type          =&gt; 'float',
           keep_storage_value =&gt; 1,
        };

        column book =&gt; { data_type =&gt; 'text' };

        sub on_column_missing { 'die' }

        1;

       Elsewhere:

        my $row = $rs-&gt;search(undef, { columns =&gt; [qw( id name )] })-&gt;one_row;

        $row-&gt;book # dies

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module is written to handle the odd condition where you have limited the columns retrieved from the
       database but accidentally access one of the ones not included.  It is configurable by tweaking the
       "on_column_missing" return value.

</pre><h4><b>MODES</b></h4><pre>
       You specify the "mode" by returning the "mode" from the "on_column_missing" method.  By default the
       "mode" returned is "warn".

       The predefined modes are:

       "die"
         Dies with "Column $name has not been loaded".

       "warn"
         Warns with "Column $name has not been loaded".

       "nothing"
         Does nothing

       You  can  predefine more modes by defining methods named "on_column_$mode", and also override the default
       modes by overriding the corresponding methods.  If you  need  ad-hoc  behavior  you  can  return  a  code
       reference and that will be called as a method on the object.

   <b>ADVANCED</b> <b>USAGE</b>
       If  for  some  reason you find that you need to change your "mode" at runtime, you can always replace the
       "on_column_missing" with an accessor.  For example:

        __PACKAGE__-&gt;mk_group_accessors(inherited =&gt; 'on_column_missing');
        __PACKAGE__-&gt;on_column_missing('warn');

       Elsewhere:

        $row-&gt;on_column_missing('die');

       If you are especially crazy you could even do something like this:

        $row-&gt;on_column_missing(sub {
           my ($self, $column) = @_;

           $self
              -&gt;result_source
              -&gt;resultset
              -&gt;search({ id =&gt; $self-&gt;id })
              -&gt;get_column($column)
              -&gt;single
        });

       Though if you do that I would make it a named mode (maybe "retrieve"?)

</pre><h4><b>THANKS</b></h4><pre>
       Thanks ZipRecruiter &lt;https://www.ziprecruiter.com&gt; for funding the development of this module.

</pre><h4><b>AUTHOR</b></h4><pre>
       Arthur Axel "fREW" Schmidt &lt;frioux+<a href="mailto:cpan@gmail.com">cpan@gmail.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by Arthur Axel "fREW" Schmidt.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.40.0                                       2024-11-16              <u>DBIx::Class::<a href="../man3pm/H...OnColumnMissing.3pm.html">H...OnColumnMissing</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>