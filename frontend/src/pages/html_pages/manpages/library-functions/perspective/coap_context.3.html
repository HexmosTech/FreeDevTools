<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>coap_context, coap_new_context, coap_free_context, coap_context_set_max_idle_sessions,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcoap3t64">libcoap3t64_4.3.4-1.1build4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       coap_context, coap_new_context, coap_free_context, coap_context_set_max_idle_sessions,
       coap_context_get_max_idle_sessions, coap_context_set_max_handshake_sessions,
       coap_context_get_max_handshake_sessions, coap_context_set_session_timeout,
       coap_context_get_session_timeout, coap_context_set_csm_timeout, coap_context_get_csm_timeout,
       coap_context_set_max_token_size - Work with CoAP contexts

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;coap3/coap.h&gt;</b>

       <b>coap_context_t</b> <b>*coap_new_context(const</b> <b>coap_address_t</b> <b>*</b><u>listen_addr</u><b>);</b>

       <b>void</b> <b>coap_free_context(coap_context_t</b> <b>*</b><u>context</u><b>);</b>

       <b>void</b> <b>coap_context_set_max_idle_sessions(coap_context_t</b> <b>*</b><u>context</u><b>,</b> <b>unsigned</b> <b>int</b> <u>max_idle_sessions</u><b>);</b>

       <b>unsigned</b> <b>int</b> <b>coap_context_get_max_idle_sessions(</b> <b>const</b> <b>coap_context_t</b> <b>*</b><u>context</u><b>);</b>

       <b>void</b> <b>coap_context_set_max_handshake_sessions(coap_context_t</b> <b>*</b><u>context</u><b>,</b> <b>unsigned</b> <b>int</b>
       <u>max_handshake_sessions</u><b>);</b>

       <b>unsigned</b> <b>int</b> <b>coap_context_get_max_handshake_sessions(</b> <b>const</b> <b>coap_context_t</b> <b>*</b><u>context</u><b>);</b>

       <b>void</b> <b>coap_context_set_session_timeout(coap_context_t</b> <b>*</b><u>context</u><b>,</b> <b>unsigned</b> <b>int</b> <u>session_timeout</u><b>);</b>

       <b>unsigned</b> <b>int</b> <b>coap_context_get_session_timeout(</b> <b>const</b> <b>coap_context_t</b> <b>*</b><u>context</u><b>);</b>

       <b>void</b> <b>coap_context_set_csm_timeout(coap_context_t</b> <b>*</b><u>context</u><b>,</b> <b>unsigned</b> <b>int</b> <u>csm_timeout</u><b>);</b>

       <b>unsigned</b> <b>int</b> <b>coap_context_get_csm_timeout(const</b> <b>coap_context_t</b> <b>*</b><u>context</u><b>);</b>

       <b>void</b> <b>coap_context_set_max_token_size(coap_context_t</b> <b>*</b><u>context</u><b>,</b> <b>size_t</b> <u>max_token_size</u><b>);</b>

       For specific (D)TLS library support, link with <b>-lcoap-3-notls</b>, <b>-lcoap-3-gnutls</b>, <b>-lcoap-3-openssl</b>,
       <b>-lcoap-3-mbedtls</b> or <b>-lcoap-3-tinydtls</b>. Otherwise, link with <b>-lcoap-3</b> to get the default (D)TLS library
       support.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This man page focuses on the CoAP Context and how to update or get information from the opaque
       coap_context_t structure.

       The CoAP stackâ€™s global state is stored in a coap_context_t Context object. Resources, Endpoints and
       Sessions are associated with this context object. There can be more than one coap_context_t object per
       application, it is up to the application to manage each one accordingly.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       <b>Function:</b> <b>coap_new_context()</b>

       The <b>coap_new_context</b>() function creates a new Context that is then used to keep all the CoAP Resources,
       Endpoints and Sessions information. The optional <u>listen_addr</u> parameter, if set for a CoAP server, creates
       an Endpoint that is added to the <u>context</u> that is listening for un-encrypted traffic on the IP address and
       port number defined by <u>listen_addr</u>.

       <b>Function:</b> <b>coap_free_context()</b>

       The <b>coap_free_context</b>() function must be used to release the CoAP stack <u>context</u>. It clears all entries
       from the receive queue and send queue and deletes the Resources that have been registered with <u>context</u>,
       and frees the attached Sessions and Endpoints.

       <b>WARNING:</b> It is unsafe to call <b>coap_free_context</b>() in an atexit() handler as other libraries may also call
       atexit() and clear down some CoAP required functionality.

       <b>Function:</b> <b>coap_context_set_max_idle_sessions()</b>

       The <b>coap_context_set_max_idle_sessions</b>() function sets the maximum number of idle server sessions to
       <u>max_idle_sessions</u> for <u>context</u>. If this number is exceeded, the least recently used server session is
       completely removed. 0 (the initial default) means that the number of idle sessions is not monitored.

       <b>Function:</b> <b>coap_context_get_max_idle_sessions()</b>

       The <b>coap_context_get_max_idle_sessions</b>() function returns the maximum number of idle server sessions for
       <u>context</u>.

       <b>Function:</b> <b>coap_context_set_max_handshake_sessions()</b>

       The <b>coap_context_set_max_handshake_sessions</b>() function sets the maximum number of outstanding server
       sessions in (D)TLS handshake to <u>max_handshake_sessions</u> for <u>context</u>. If this number is exceeded, the least
       recently used server session in handshake is completely removed. 0 (the default) means that the number of
       handshakes is not monitored.

       <b>Function:</b> <b>coap_context_get_max_handshake_sessions()</b>

       The <b>coap_context_get_max_handshake_sessions</b>() function returns the maximum number of outstanding server
       sessions in (D)TLS handshake for <u>context</u>.

       <b>Function:</b> <b>coap_context_set_session_timeout()</b>

       The <b>coap_context_set_session_timeout</b>() function sets the number of seconds of inactivity to
       <u>session_timeout</u> for <u>context</u> before an idle server session is removed. 0 (the default) means wait for the
       default of 300 seconds.

       <b>Function:</b> <b>coap_context_get_session_timeout()</b>

       The <b>coap_context_get_session_timeout</b>() function returns the seconds to wait before timing out an idle
       server session for <u>context</u>.

       <b>Function:</b> <b>coap_context_set_csm_timeout()</b>

       The <b>coap_context_set_csm_timeout</b>() function sets the number of seconds to wait for a (TCP) CSM
       negotiation response from the peer to <u>csm_timeout</u> for <u>context</u>. 0 (the default) means wait forever.

       <b>Function:</b> <b>coap_context_get_csm_timeout()</b>

       The <b>coap_context_get_csm_timeout</b>() function returns the seconds to wait for a (TCP) CSM negotiation
       response from the peer for <u>context</u>,

       <b>Function:</b> <b>coap_context_set_max_token_size()</b>

       The <b>coap_context_set_max_token_size</b>() function sets the <u>max_token_size</u> for <u>context</u>. <u>max_token_size</u> must
       be greater than 8 to indicate support for RFC8974 up to <u>max_token_size</u> bytes, else 8 to disable RFC8974
       (if previously set).

       <b>NOTE:</b> For the client, it will send an initial PDU to test the server supports the requested extended
       token size as per "RFC8794 Section 2.2.2"

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>coap_new_context</b>() returns a newly created context or NULL if there is a creation failure.

       <b>coap_context_get_max_idle_sessions</b>() returns the maximum number of idle server sessions.

       <b>coap_context_get_max_handshake_sessions</b>() returns the maximum number of outstanding server sessions in
       (D)TLS handshake.

       <b>coap_context_get_session_timeout</b>() returns the seconds to wait before timing out an idle server session.

       <b>coap_context_get_csm_timeout</b>() returns the seconds to wait for a (TCP) CSM negotiation response from the
       peer.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/coap_session.3.html">coap_session</a></b>(3)

</pre><h4><b>FURTHER</b> <b>INFORMATION</b></h4><pre>
       See

       "RFC7252: The Constrained Application Protocol (CoAP)"

       "RFC8974: Extended Tokens and Stateless Clients in the Constrained Application Protocol (CoAP)"

       for further information.

</pre><h4><b>BUGS</b></h4><pre>
       Please report bugs on the mailing list for libcoap: <a href="mailto:libcoap-developers@lists.sourceforge.net">libcoap-developers@lists.sourceforge.net</a> or raise an
       issue on GitHub at https://github.com/obgm/libcoap/issues

</pre><h4><b>AUTHORS</b></h4><pre>
       The libcoap project &lt;<a href="mailto:libcoap-developers@lists.sourceforge.net">libcoap-developers@lists.sourceforge.net</a>&gt;

coap_context 4.3.4                                 04/15/2024                                    <u><a href="../man3/COAP_CONTEXT.3.html">COAP_CONTEXT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>