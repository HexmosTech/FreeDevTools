<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test2::Manual::Anatomy::Context - Internals documentation for the Context objects.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest2-suite-perl">libtest2-suite-perl_0.000163-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test2::Manual::Anatomy::Context - Internals documentation for the Context objects.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This document explains how the Test2::API::Context object works.

</pre><h4><b>WHAT</b> <b>IS</b> <b>THE</b> <b>CONTEXT</b> <b>OBJECT?</b></h4><pre>
       The context object is one of the key components of Test2, and makes many features possible that would
       otherwise be impossible. Every test tool starts by getting a context, and ends by releasing the context.
       A test tool does all its work between getting and releasing the context. The context instance is the
       primary interface for sending events to the Test2 stack. Finally the context system is responsible for
       tracking what file and line number a tool operates on, which is critical for debugging.

   <b>PRIMARY</b> <b>INTERFACE</b> <b>FOR</b> <b>TEST</b> <b>TOOLS</b>
       Nearly every Test2 based tool should start by calling $ctx = Test2::API::context() in order to get a
       context object, and should end by calling "$ctx-&gt;release()". Once a tool has its context object it can
       call methods on the object to send events or have other effects. Nearly everything a test tool needs to
       do should be done through the context object.

   <b>TRACK</b> <b>FILE</b> <b>AND</b> <b>LINE</b> <b>NUMBERS</b> <b>FOR</b> <b>ERROR</b> <b>REPORTING</b>
       When you call "Test2::API::Context" a new context object will be returned. If there is already a context
       object in effect (from a different point in the stack) you will get a clone of the existing one. If there
       is not already a current context then a completely new one will be generated. When a new context is
       generated Test2 will determine the file name and line number for your test code, these will be used when
       reporting any failures.

       Typically the file and line number will be determined using caller() to look at your tools caller. The
       $Test::Builder::Level will be respected if detected, but is discouraged in favor of just using context
       objects at every level.

       When calling Test2::API::Context() you can specify the "level =&gt; $count" arguments if you need to look at
       a deeper caller.

   <b>PRESERVE</b> <b>$?,</b> <b>$!,</b> <b>$^E</b> <b>AND</b> <b>$@</b>
       When you call Test2::API::context() the current values of $?, $!, $^E, and $@ are stored in the context
       object itself. Whenever the context is released the original values of these variables will be restored.
       This protects the variables from any side effects caused by testing tools.

   <b>FINALIZE</b> <b>THE</b> <b>API</b> <b>STATE</b>
       Test2::API works via a hidden singleton instance of Test2::API::Instance.  The singleton has some state
       that is not set in stone until the last possible minute. The last possible minute happens to be the first
       time a context is acquired. State includes IPC instance, Formatter class, Root PID, etc.

   <b>FIND/CREATE</b> <b>THE</b> <b>CURRENT/ROOT</b> <b>HUB</b>
       Test2 has a stack of hubs, the stack can be accessed via Test2::API::test2_stack. When you get a context
       it will find the current hub, if there is no current hub then the root one will be initialized.

   <b>PROVIDE</b> <b>HOOKS</b>
       There are hooks that run when contexts are created, found, and released. See Test2::API for details on
       these hooks and how to use them.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Test2::Manual - Primary index of the manual.

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Test2-Manual can be found at <u>https://github.com/Test-More/Test2-Suite/</u>.

</pre><h4><b>MAINTAINERS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2018 Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

       See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.38.2                                       2024-06-07               <u>Test2::Manual::Anatomy::<a href="../man3pm/Context.3pm.html">Context</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>