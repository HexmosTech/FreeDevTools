<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmem2_vm_reservation_new(),  pmem2_vm_reservation_delete()  -  creates  or deletes an instance of virtual</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpmem2-dev">libpmem2-dev_1.13.1-1.1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmem2_vm_reservation_new</b>(),  <b>pmem2_vm_reservation_delete</b>()  -  creates  or deletes an instance of virtual
       memory reservation

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;libpmem2.h&gt;

              struct pmem2_vm_reservation;
              int pmem2_vm_reservation_new(struct pmem2_vm_reservation **rsv_ptr,
                      void *addr, size_t size);
              int pmem2_vm_reservation_delete(struct pmem2_vm_reservation **rsv_ptr);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>pmem2_vm_reservation_new</b>() function creates a new blank mapping in the virtual address space  of  the
       calling process.  Reservation serves as a placeholder of a given size on which sources can be mapped.

       For  the function to succeed, the <u>addr</u> must be either aligned to an appropriate allocation granularity or
       <b>NULL</b>, the size always has to be aligned to an appropriate OS allocation granularity.

       <b><a href="../man7/libpmem2.7.html">libpmem2</a></b>(7) library chooses the largest page alignment for the reservation based on <u>size</u>.  If the  chosen
       alignment  is  different  than the OS allocation granularity, then the underlying size of the reservation
       can be bigger than the value presented to the user.  Largest page alignment functionality is  limited  to
       POSIX systems.

       If  the  <b>pmem2_vm_reservation_new</b>()  succeeds  in  creating  a  reservation, it instantiates a new <b>struct</b>
       <b>pmem2_vm_reservation</b> object describing the reservation.  The pointer to this  object  is  stored  in  the
       user-provided  variable  via the <u>rsv_ptr</u> pointer.  If the function fails, an appropriate error value will
       be returned.  For a list of possible return values please see RETURN VALUE

       After instantiating an object via the <b>pmem2_vm_reservation_new</b>() function, it may be  disposed  of  using
       the <b>pmem2_vm_reservation_delete</b>() function.

       The <b>pmem2_vm_reservation_delete</b>() function destroys the object describing the reservation and unmaps vir‐
       tual  memory  region  the *struct pmem2_vm_reservation** had assigned during the initialization.  For the
       delete function to succeed, it is required that the reservation passed via the <u>rsv_ptr</u> pointer  does  not
       contain any mappings.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>pmem2_vm_reservation_new</b>() and <b>pmem2_vm_reservation_delete</b>() functions return 0 on success or a nega‐
       tive error code on failure.

       The function returns 0 on success or a negative error code on failure.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>pmem2_vm_reservation_new</b>() function can fail with the following errors:

       • <b>PMEM2_E_ADDRESS_UNALIGNED</b> - argument <u>addr</u> is not aligned to the appropriate allocation granularity.

       • <b>PMEM2_E_MAPPING_EXISTS</b> - mapping already exists in the range (<u>addr</u>, <u>addr</u> + <u>size</u>).

       It  can also return <b>-EAGAIN</b>, <b>-ENOMEM</b> from the underlying <b><a href="../man2/mmap.2.html">mmap</a></b>(2) function and <b>-ENOMEM</b> in case of insuffi‐
       cient memory to allocate an instance of <u>struct</u> <u>pmem2_vm_reservation</u>.

       The <b>pmem2_vm_reservation_delete</b>() function can fail with the following errors:

       • <b>PMEM2_E_RESERVATION_NOT_EMPTY</b> - reservation contains mappings.

       It can also return errors from the underlying <b><a href="../man2/munmap.2.html">munmap</a></b>(2) function.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/pmem2_config_set_vm_reservation.3.html">pmem2_config_set_vm_reservation</a></b>(3), <b><a href="../man7/libpmem2.7.html">libpmem2</a></b>(7) and <b>&lt;https://pmem.io&gt;</b>
</pre>
 </div>
</div></section>
</div>
</body>
</html>