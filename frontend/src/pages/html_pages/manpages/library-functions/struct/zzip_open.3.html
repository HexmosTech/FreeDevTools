<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zzip_open, zzip_open_ext_io, zzip_open_shared_io -  start usage.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libzzip-dev">libzzip-dev_0.13.78+dfsg.1-0.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zzip_open, zzip_open_ext_io, zzip_open_shared_io -  start usage.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;zzip/lib.h&gt;</b>

       ZZIP_FILE*
       <u>zzip_open</u>(zzip_char_t* filename, int o_flags)

       ZZIP_FILE*
       <u>zzip_open_ext_io</u>(zzip_char_t* filename, int o_flags, int o_modes, zzip_strings_t* ext,
                        zzip_plugin_io_t io)

       ZZIP_FILE*
       <u>zzip_open_shared_io</u>(ZZIP_FILE* stream, zzip_char_t* filename, int o_flags, int o_modes,
                           zzip_strings_t* ext, zzip_plugin_io_t io)

</pre><h4><b>DESCRIPTION</b></h4><pre>
        The <u>zzip_open</u> function will <u><a href="../man2/open.2.html">open</a>(2)</u> a real/zipped file

        It has some magic functionality builtin - it will first try to open the given
       &lt;emphasis&gt;filename&lt;/emphasis&gt; as a normal file. If it does not exist, the given path to the filename (if
       any) is split into its directory-part and the file-part. A ".zip" extension is then added to the
       directory-part to create the name of a zip-archive. That zip-archive (if it exists) is being searched for
       the file-part, and if found a zzip-handle is returned.

        Note that if the file is found in the normal fs-directory the returned structure is mostly empty and the
       <u>zzip_read</u> call will use the libc <u><a href="../man2/read.2.html">read</a>(2)</u> to obtain data. Otherwise a <u>zzip_file_open</u> is performed and any
       error mapped to <u><a href="../man3/errno.3.html">errno</a>(3)</u>.

        There was a possibility to transfer zziplib-specific openmodes through o_flags but you should please not
       use them anymore and look into <u>zzip_open_ext_io</u> to submit them down. The <u>zzip_open</u> function is shallow in
       that it just extracts the zzipflags and calls

        <u>zzip_open_ext_io(filename,</u> <u>o_flags,</u> <u>zzipflags|0664,</u> <u>0,</u> <u>0)</u>

        you must stop using this extra functionality (not well known anyway) since zzip_open might be later
       usable to open files for writing in which case the _EXTRAFLAGS will get in conflict.

        compare with <u><a href="../man2/open.2.html">open</a>(2)</u> and <u>zzip_fopen</u>

        The <u>zzip_open_ext_io</u> function uses explicit ext and io instead of the internal defaults, setting them to
       zero is equivalent to <u>zzip_open</u>

        note that the two flag types have been split into an o_flags (for fcntl-like openflags) and o_modes
       where the latter shall carry the zzip_flags and possibly accessmodes for unix filesystems. Since this
       version of zziplib can not write zipfiles, it is not yet used for anything else than zzip-specific
       modeflags.

        The <u>zzip_open_ext_io</u> function returns a new zzip-handle (use <u>zzip_close</u> to return it). On error the
       <u>zzip_open_ext_io</u> function will return null setting <u><a href="../man3/errno.3.html">errno</a>(3)</u>.

        If any ext_io handlers were used then the referenced structure should be static as the allocated
       ZZIP_FILE does not copy them.

        The <u>zzip_open_shared_io</u> function takes an extra stream argument - if a handle has been then ext/io can
       be left null and the new stream handle will pick up the ext/io. This should be used only in specific
       environment however since <u>zzip_file_real</u> does not store any ext-sequence.

        The benefit for the <u>zzip_open_shared_io</u> function comes in when the old file handle was openened from a
       file within a zip archive. When the new file is in the same zip archive then the internal zzip_dir
       structures will be shared. It is even quicker, as no check needs to be done anymore trying to guess the
       zip archive place in the filesystem, here we just check whether the zip archive's filepath is a prefix
       part of the filename to be opened.

        Note that the <u>zzip_open_shared_io</u> function is also used by <u>zzip_freopen</u> that will unshare the old
       handle, thereby possibly closing the handle.

        The <u>zzip_open_shared_io</u> function returns a new zzip-handle (use <u>zzip_close</u> to return it). On error the
       <u>zzip_open_shared_io</u> function will return null setting <u><a href="../man3/errno.3.html">errno</a>(3)</u>.

</pre><h4><b>AUTHOR</b></h4><pre>
        Guido Draheim &lt;<a href="mailto:guidod@gmx.de">guidod@gmx.de</a>&gt; Tomi Ollila &lt;<a href="mailto:Tomi.Ollila@iki.fi">Tomi.Ollila@iki.fi</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
        Copyright (c) Guido Draheim, use under copyleft (LGPL,MPL)

zziplib                                              0.13.78                                        <u><a href="../man3/zzip_open.3.html">zzip_open</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>