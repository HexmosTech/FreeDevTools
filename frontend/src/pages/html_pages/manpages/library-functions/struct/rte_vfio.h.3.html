<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_vfio.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_vfio.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;stdbool.h&gt;
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;rte_compat.h&gt;
       #include &lt;<a href="file:/usr/include/linux/vfio.h">linux/vfio.h</a>&gt;

   <b>Functions</b>
       int <b>rte_vfio_setup_device</b> (const char *sysfs_base, const char *dev_addr, int *vfio_dev_fd, struct
           vfio_device_info *device_info)
       int <b>rte_vfio_release_device</b> (const char *sysfs_base, const char *dev_addr, int fd)
       int <b>rte_vfio_enable</b> (const char *modname)
       int <b>rte_vfio_is_enabled</b> (const char *modname)
       int <b>rte_vfio_noiommu_is_enabled</b> (void)
       int <b>rte_vfio_clear_group</b> (int vfio_group_fd)
       int <b>rte_vfio_get_group_num</b> (const char *sysfs_base, const char *dev_addr, int *iommu_group_num)
       __rte_experimental int <b>rte_vfio_get_device_info</b> (const char *sysfs_base, const char *dev_addr, int
           *vfio_dev_fd, struct vfio_device_info *device_info)
       int <b>rte_vfio_get_container_fd</b> (void)
       int <b>rte_vfio_get_group_fd</b> (int iommu_group_num)
       int <b>rte_vfio_container_create</b> (void)
       int <b>rte_vfio_container_destroy</b> (int container_fd)
       int <b>rte_vfio_container_group_bind</b> (int container_fd, int iommu_group_num)
       int <b>rte_vfio_container_group_unbind</b> (int container_fd, int iommu_group_num)
       int <b>rte_vfio_container_dma_map</b> (int container_fd, uint64_t vaddr, uint64_t iova, uint64_t len)
       int <b>rte_vfio_container_dma_unmap</b> (int container_fd, uint64_t vaddr, uint64_t iova, uint64_t len)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE VFIO. This library provides various VFIO related utility functions.

       Definition in file <b>rte_vfio.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>rte_vfio_setup_device</b> <b>(const</b> <b>char</b> <b>*</b> <b>sysfs_base,</b> <b>const</b> <b>char</b> <b>*</b> <b>dev_addr,</b> <b>int</b> <b>*</b> <b>vfio_dev_fd,</b> <b>struct</b>
       <b>vfio_device_info</b> <b>*</b> <b>device_info)</b>
       Setup vfio_cfg for the device identified by its address. It discovers the configured I/O MMU groups or
       sets a new one for the device. If a new groups is assigned, the DMA mapping is performed.

       This function is only relevant to linux and will return an error on BSD.

       <b>Parameters</b>
           <u>sysfs_base</u> sysfs path prefix.
           <u>dev_addr</u> device location.
           <u>vfio_dev_fd</u> VFIO fd.
           <u>device_info</u> Device information.

       <b>Returns</b>
           0 on success. &lt;0 on failure. &gt;1 if the device cannot be managed this way.

   <b>int</b> <b>rte_vfio_release_device</b> <b>(const</b> <b>char</b> <b>*</b> <b>sysfs_base,</b> <b>const</b> <b>char</b> <b>*</b> <b>dev_addr,</b> <b>int</b> <b>fd)</b>
       Release a device mapped to a VFIO-managed I/O MMU group.

       This function is only relevant to linux and will return an error on BSD.

       <b>Parameters</b>
           <u>sysfs_base</u> sysfs path prefix.
           <u>dev_addr</u> device location.
           <u>fd</u> VFIO fd.

       <b>Returns</b>
           0 on success. &lt;0 on failure.

   <b>int</b> <b>rte_vfio_enable</b> <b>(const</b> <b>char</b> <b>*</b> <b>modname)</b>
       Enable a VFIO-related kmod.

       This function is only relevant to linux and will return an error on BSD.

       <b>Parameters</b>
           <u>modname</u> kernel module name.

       <b>Returns</b>
           0 on success. &lt;0 on failure.

   <b>int</b> <b>rte_vfio_is_enabled</b> <b>(const</b> <b>char</b> <b>*</b> <b>modname)</b>
       Check whether a VFIO-related kmod is enabled.

       This function is only relevant to Linux.

       <b>Parameters</b>
           <u>modname</u> kernel module name.

       <b>Returns</b>
           1 if true. 0 otherwise.

   <b>int</b> <b>rte_vfio_noiommu_is_enabled</b> <b>(void)</b>
       Whether VFIO NOIOMMU mode is enabled.

       This function is only relevant to Linux.

       <b>Returns</b>
           1 if true. 0 if false. &lt;0 for errors.

   <b>int</b> <b>rte_vfio_clear_group</b> <b>(int</b> <b>vfio_group_fd)</b>
       Remove group fd from internal VFIO group fd array/

       This function is only relevant to linux and will return an error on BSD.

       <b>Parameters</b>
           <u>vfio_group_fd</u> VFIO Group FD.

       <b>Returns</b>
           0 on success. &lt;0 on failure.

   <b>int</b> <b>rte_vfio_get_group_num</b> <b>(const</b> <b>char</b> <b>*</b> <b>sysfs_base,</b> <b>const</b> <b>char</b> <b>*</b> <b>dev_addr,</b> <b>int</b> <b>*</b> <b>iommu_group_num)</b>
       Parse IOMMU group number for a device

       This function is only relevant to linux and will return an error on BSD.

       <b>Parameters</b>
           <u>sysfs_base</u> sysfs path prefix.
           <u>dev_addr</u> device location.
           <u>iommu_group_num</u> iommu group number

       <b>Returns</b>
           &gt;0 on success 0 for non-existent group or VFIO &lt;0 for errors

   <b>__rte_experimental</b> <b>int</b> <b>rte_vfio_get_device_info</b> <b>(const</b> <b>char</b> <b>*</b> <b>sysfs_base,</b> <b>const</b> <b>char</b> <b>*</b> <b>dev_addr,</b> <b>int</b> <b>*</b>
       <b>vfio_dev_fd,</b> <b>struct</b> <b>vfio_device_info</b> <b>*</b> <b>device_info)</b>
       Get device information

       This function is only relevant to Linux and will return an error on BSD.

       <b>Parameters</b>
           <u>sysfs_base</u> sysfs path prefix.
           <u>dev_addr</u> device location.
           <u>vfio_dev_fd</u> VFIO fd.
           <u>device_info</u> Device information.

       <b>Returns</b>
           0 on success. &lt;0 on failure.

   <b>int</b> <b>rte_vfio_get_container_fd</b> <b>(void)</b>
       Open a new VFIO container fd

       This function is only relevant to linux and will return an error on BSD.

       <b>Returns</b>
               0 container fd &lt; 0 for errors

   <b>int</b> <b>rte_vfio_get_group_fd</b> <b>(int</b> <b>iommu_group_num)</b>
       Open VFIO group fd or get an existing one

       This function is only relevant to linux and will return an error on BSD.

       <b>Parameters</b>
           <u>iommu_group_num</u> iommu group number

       <b>Returns</b>
               0 group fd &lt; 0 for errors

   <b>int</b> <b>rte_vfio_container_create</b> <b>(void)</b>
       Create a new container for device binding.

       <b>Note</b>
           Any newly allocated DPDK memory will not be mapped into these containers by default, user needs to
           manage DMA mappings for any container created by this API.

           When creating containers using this API, the container will only be available in the process that has
           created it. Sharing containers and devices between multiple processes is not supported.

       <b>Returns</b>
           the container fd if successful &lt;0 if failed

   <b>int</b> <b>rte_vfio_container_destroy</b> <b>(int</b> <b>container_fd)</b>
       Destroy the container, unbind all vfio groups within it.

       <b>Parameters</b>
           <u>container_fd</u> the container fd to destroy

       <b>Returns</b>
           0 if successful &lt;0 if failed

   <b>int</b> <b>rte_vfio_container_group_bind</b> <b>(int</b> <b>container_fd,</b> <b>int</b> <b>iommu_group_num)</b>
       Bind a IOMMU group to a container.

       <b>Parameters</b>
           <u>container_fd</u> the container's fd
           <u>iommu_group_num</u> the iommu group number to bind to container

       <b>Returns</b>
           group fd if successful &lt;0 if failed

   <b>int</b> <b>rte_vfio_container_group_unbind</b> <b>(int</b> <b>container_fd,</b> <b>int</b> <b>iommu_group_num)</b>
       Unbind a IOMMU group from a container.

       <b>Parameters</b>
           <u>container_fd</u> the container fd of container
           <u>iommu_group_num</u> the iommu group number to delete from container

       <b>Returns</b>
           0 if successful &lt;0 if failed

   <b>int</b> <b>rte_vfio_container_dma_map</b> <b>(int</b> <b>container_fd,</b> <b>uint64_t</b> <b>vaddr,</b> <b>uint64_t</b> <b>iova,</b> <b>uint64_t</b> <b>len)</b>
       Perform DMA mapping for devices in a container.

       <b>Parameters</b>
           <u>container_fd</u> the specified container fd. Use RTE_VFIO_DEFAULT_CONTAINER_FD to use the default
           container.
           <u>vaddr</u> Starting virtual address of memory to be mapped.
           <u>iova</u> Starting IOVA address of memory to be mapped.
           <u>len</u> Length of memory segment being mapped.

       <b>Returns</b>
           0 if successful &lt;0 if failed

   <b>int</b> <b>rte_vfio_container_dma_unmap</b> <b>(int</b> <b>container_fd,</b> <b>uint64_t</b> <b>vaddr,</b> <b>uint64_t</b> <b>iova,</b> <b>uint64_t</b> <b>len)</b>
       Perform DMA unmapping for devices in a container.

       <b>Parameters</b>
           <u>container_fd</u> the specified container fd. Use RTE_VFIO_DEFAULT_CONTAINER_FD to use the default
           container.
           <u>vaddr</u> Starting virtual address of memory to be unmapped.
           <u>iova</u> Starting IOVA address of memory to be unmapped.
           <u>len</u> Length of memory segment being unmapped.

       <b>Returns</b>
           0 if successful &lt;0 if failed

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                   <u><a href="../man3/rte_vfio.h.3.html">rte_vfio.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>