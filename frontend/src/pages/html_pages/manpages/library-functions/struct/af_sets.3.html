<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>af_initset,  af_nrofkeys,  af_setgkey,  af_setaddkey, af_setrmkey, af_setposrmkey, af_sortset, af_subset,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/atfs-dev">atfs-dev_1.4pl6-16.1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       af_initset,  af_nrofkeys,  af_setgkey,  af_setaddkey, af_setrmkey, af_setposrmkey, af_sortset, af_subset,
       af_copyset, af_intersect, af_union, af_diff - AtFS operations on key sets

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;atfs.h&gt;

       int af_initset (Af_set *set)

       int af_nrofkeys (Af_set *set)

       int af_setgkey (Af_set *set, int position, Af_key *key)

       int af_setaddkey (Af_set *set, int position, Af_key *key)

       int af_setrmkey (Af_set *set, Af_key *key)

       int af_setposrmkey (Af_set *set, int position)

       int af_sortset (Af_set *set, char *attrname)

       int af_subset (Af_set *set, Af_attrs *attrbuf, Af_set *subset)

       int af_copyset (Af_set *source, Af_set *destination)

       int af_intersect (Af_set *set1, Af_set *set2, Af_set *newset)

       int af_union (Af_set *set1, Af_set *set2, Af_set *newset)

       int af_diff (Af_set *set1, Af_set *set2, *Af_set newset)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sets in AtFS are ordered collections of keys. The structure of sets is the following

              typedef struct {
                   int  af_nkeys;
                   int  af_setlen;
                   Af_key    *af_klist;
              } Af_set;

       The list of keys in a set is a linear list, residing in allocated memory. The list has no holes, so  that
       positions  <u>0</u>  through  <u>af_nkeys-1</u>  are  occupied with valid keys. Set functions returning a set require a
       pointer to an empty set structure as argument.

       <u>af_initset</u> initializes a set.

       <u>af_nrofkeys</u> returns the number of valid keys in the given <u>set</u>.

       <u>af_setgkey</u> delivers the filekey, stored at position <u>position</u> in the identified set. The result is  passed
       in the buffer <u>key</u>. Typically you use af_setgkey to run through a set and perform a special action on each
       key.  The following code sequence does this job:
            Af_key key;
            Af_set set;
            af_initset (&amp;set);
            ...
            for (i = 0; i &lt; af_nrofkeys (&amp;set); i++) {
                 af_setgkey (&amp;set, i, &amp;key);
                 /* process key */
                 ...
            }

       <u>af_setaddkey</u>  introduces  a  new filekey to an existing set at the given position. All following keys are
       moved back by one position.  The constant AF_LASTPOS given as <u>position</u> argument leads to adding  the  new
       filekey at the end of the set.

       <u>af_setrmkey</u>  <u>(af_setposrmkey)</u>  removes  the  given  filekey  (the  filekey at position <u>position</u>) from the
       specified set. Holes generated by deleting single keys from a set are eliminated by condensing  the  set.
       All following keys are moved one position forth in the set.

       <u>af_sortset</u>  sorts  a  given set of object keys by the values of the named attribute. The set is sorted in
       increasing order.  Increasing order means, that the lowest  value  occurs  first  in  the  set.   Af_user
       structures  are  compared by username first and by userdomain, if the names are equal (user host will not
       be taken into account).  Version numbers are ordered in natural order, busy versions first.

       In <u>atfs.h</u> you can find a list of attribute names naming the  standard  attributes.  All  other  attribute
       names  are  presumed  to  be  user  defined  attributes.  While  sorting by the values of an user defined
       attribute, all ASOs that do not have the named attribute are added at the end of the  resulting  (sorted)
       set.   Sorting  of  user defined attributes with multiple values bases on simple text comparison with the
       order of the values taken as it is.  The length of the given attribute name is  limited.  This  limit  is
       defined by the constant AF_UDANAMLEN in atfs.h.

       <u>af_subset</u>  does  a retrieve operation (similar to af_find - manual page <a href="../man3/af_retrieve.3.html">af_retrieve</a>(3)) on a given set of
       object keys. Af_subset takes an attribute  buffer  (<u>attrbuf</u>)  with  all  desired  attributes  set  to  an
       appropriate  value  as  argument. The attribute buffer should be initialized by <u>af_initattrs</u> (manual page
       <a href="../man3/af_retrieve.3.html">af_retrieve</a>(3)) beforehand. af_subset returns it's  result  in  a  new  set,  the  original  set  remains
       unchanged.

       <u>af_copyset</u> for copying sets (really! =:-).

       <u>af_intersect</u>,  <u>af_union</u>  and  <u>af_diff</u> build intersections, unions, and differences between two sets.  The
       result is a new set, where all keys taken from the first argument set (<u>set1</u>) occur first,  and  the  keys
       from  the  second  argument set (<u>set2</u>) afterwards. You may gibe one of set1 or set2 as <u>resultset</u>. In that
       case, the original set get lost and is dropped implicitely.

       Sets generated by af_copyset, af_subset,  af_intersect,  af_union,  or  af_diff  should  be  released  by
       <u>af_dropset</u> as soon as they are not used any longer.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/af_retrieve.3.html">af_retrieve</a>(3)

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Upon  error,  -1  or  a nil pointer (depending on the return type) is returned and <u>af_errno</u> is set to the
       corresponding error number.

AtFS-1.71                                   Fri Jun 25 14:33:20 1993                                  <u><a href="../man3/af_sets.3.html">af_sets</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>