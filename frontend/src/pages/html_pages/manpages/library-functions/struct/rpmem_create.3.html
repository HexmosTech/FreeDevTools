<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rpmem_create(),  rpmem_open(), rpmem_set_attr(), rpmem_close(), rpmem_remove() - most commonly used func‐</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/librpmem-dev">librpmem-dev_1.11.1-3build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>rpmem_create</b>(),  <b>rpmem_open</b>(), <b>rpmem_set_attr</b>(), <b>rpmem_close</b>(), <b>rpmem_remove</b>() - most commonly used func‐
       tions for remote access to <u>persistent</u> <u>memory</u>

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;librpmem.h&gt;

              RPMEMpool *rpmem_create(const char *target, const char *pool_set_name,
                  void *pool_addr, size_t pool_size, unsigned *nlanes,
                  const struct rpmem_pool_attr *create_attr);
              RPMEMpool *rpmem_open(const char *target, const char *pool_set_name,
                  void *pool_addr, size_t pool_size, unsigned *nlanes,
                  struct rpmem_pool_attr *open_attr);
              int rpmem_set_attr(RPMEMpool *rpp, const struct rpmem_pool_attr *attr);
              int rpmem_close(RPMEMpool *rpp);
              int rpmem_remove(const char *target, const char *pool_set_name, int flags);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>rpmem_create</b>() function creates  a  remote  pool  on  a  given  <u>target</u>  node,  using  pool  <u>set</u>  file
       <u>pool_set_name</u>  to  map the remote pool.  <u>pool_set_name</u> is a relative path in the root config directory on
       the <u>target</u> node.  For pool set file format and options see <b><a href="../man5/poolset.5.html">poolset</a></b>(5).  <u>pool_addr</u> is a pointer to the as‐
       sociated local memory pool with size <u>pool_size</u>.  Both <u>pool_addr</u> and <u>pool_size</u> must be aligned to the sys‐
       tem's page size (see <b><a href="../man3/sysconf.3.html">sysconf</a></b>(3)).  The size of the remote pool must be at least  <u>pool_size</u>.   See  <b>REMOTE</b>
       <b>POOL</b> <b>SIZE</b>, below, for details.  <u>nlanes</u> points to the maximum number of lanes which the caller is request‐
       ing.  Upon successful creation of the remote pool, *<u>nlanes</u> is set to the maximum number of lanes support‐
       ed  by  both  the local and remote nodes.  See <b>LANES</b>, below, for details.  The <u>create_attr</u> structure con‐
       tains the attributes used for creating the remote pool.  If the <u>create_attr</u> structure is not NULL, a pool
       with internal metadata is created.  The metadata is stored in the first 4096 bytes of the pool and can be
       read when opening the remote pool with <b>rpmem_open</b>().  To prevent user from overwriting the pool metadata,
       this region is not accessible to the user via <b>rpmem_persist</b>().  If <u>create_attr</u> is NULL or zeroed,  remote
       pool  set  file must contain the <u>NOHDRS</u> option.  In that case the remote pool is created without internal
       metadata in it and the entire pool space is available to the user.  See <b><a href="../man3/rpmem_persist.3.html">rpmem_persist</a></b>(3) for details.

       The <b>rpmem_open</b>() function opens the existing remote pool with <u>set</u> file <u>pool_set_name</u> on remote node  <u>tar‐</u>
       <u>get</u>.   <u>pool_set_name</u>  is a relative path in the root config directory on the <u>target</u> node.  <u>pool_addr</u> is a
       pointer to the associated local memory pool of size <u>pool_size</u>.  Both  <u>pool_addr</u>  and  <u>pool_size</u>  must  be
       aligned  to  the  system's  page  size  (see  <b><a href="../man3/sysconf.3.html">sysconf</a></b>(3)).   The size of the remote pool must be at least
       <u>pool_size</u>.  See <b>REMOTE</b> <b>POOL</b> <b>SIZE</b>, below, for details.  <u>nlanes</u> points to the maximum number of lanes which
       the caller is requesting.  Upon successful opening of the remote pool, *<u>nlanes</u> is set to the maximum num‐
       ber of lanes supported by both the local and remote nodes.  See <b>LANES</b>, below, for details.

       The <b>rpmem_set_attr</b>() function overwrites the pool's attributes.  The <u>attr</u> structure contains the  attrib‐
       utes used for overwriting the remote pool attributes that were passed to <b>rpmem_create</b>() at pool creation.
       If  <u>attr</u>  is  NULL,  a  zeroed  structure with attributes will be used.  New attributes are stored in the
       pool's metadata.

       The <b>rpmem_close</b>() function closes the remote pool <u>rpp</u>.  All resources are released on both the local  and
       remote  nodes.   The  remote pool itself persists on the remote node and may be re-opened at a later time
       using <b>rpmem_open</b>().

       The <b>rpmem_remove</b>() function removes the remote pool with <u>set</u> file name <u>pool_set_name</u>  from  node  <u>target</u>.
       The  <u>pool_set_name</u>  is  a relative path in the root config directory on the <u>target</u> node.  By default only
       the pool part files are removed; the pool <u>set</u> file is left untouched.  If the pool is not consistent, the
       <b>rpmem_remove</b>() function fails.  The <u>flags</u> argument determines the behavior of <b>rpmem_remove</b>().  <u>flags</u>  may
       be either 0 or the bitwise OR of one or more of the following flags:

       • <b>RPMEM_REMOVE_FORCE</b>  - Ignore errors when opening an inconsistent pool.  The pool <u>set</u> file must still be
         in appropriate format for the pool to be removed.

       • <b>RPMEM_REMOVE_POOL_SET</b> - Remove the pool <u>set</u> file after removing the pool described by this pool set.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>rpmem_create</b>() returns an opaque handle to the remote pool for  use  in  subsequent  <b>librpmem</b>
       calls.   If  any  error prevents the remote pool from being created, <b>rpmem_create</b>() returns NULL and sets
       <u>errno</u> appropriately.

       On success, <b>rpmem_open</b>() returns an opaque handle to the remote pool for subsequent <b>librpmem</b>  calls.   If
       the  <u>open_attr</u>  argument  is not NULL, the remote pool attributes are returned in the provided structure.
       If the remote pool was created without internal metadata, zeroes are returned in the <u>open_attr</u>  structure
       on  successful  call  to  <b>rpmem_open</b>().   If  any  error  prevents the remote pool from being opened, <b>rp‐</b>
       <b>mem_open</b>() returns NULL and sets <u>errno</u> appropriately.

       On success, <b>rpmem_set_attr</b>() returns 0.  On error, it returns -1 and sets <u>errno</u> appropriately.

       On success, <b>rpmem_close</b>() returns 0.  On error, it returns a non-zero value and sets <u>errno</u> appropriately.

       On success, <b>rpmem_remove</b>() returns 0.  On error, it returns a non-zero value and sets <u>errno</u>  appropriate‐
       ly.

</pre><h4><b>NOTES</b></h4><pre>
   <b>REMOTE</b> <b>POOL</b> <b>SIZE</b>
       The  size  of  a  remote  pool  depends on the configuration in the pool set file on the remote node (see
       <b><a href="../man5/poolset.5.html">poolset</a></b>(5)).  If no pool set options is used in the remote pool set file, the remote pool size is the sum
       of the sizes of all part files, decreased by 4096 bytes per part file.  4096 bytes of each part file  are
       utilized for storing internal metadata.  If the <u>SINGLEHDR</u> option is used in the remote pool set file, the
       remote  pool size is the sum of sizes of all part files, decreased once by 4096 bytes.  In this case only
       the first part contains internal metadata.  If a remote pool set file contains the <u>NOHDRS</u> option, the re‐
       mote pool size is the sum of sizes of all its part files.  In this case none of the parts contains inter‐
       nal metadata.  For other consequences of using the <u>SINGLEHDR</u> and  <u>NOHDRS</u>  options  see  <b><a href="../man3/rpmem_persist.3.html">rpmem_persist</a></b>(3).
       <b>RPMEM_MIN_PART</b>  and <b>RPMEM_MIN_POOL</b> in <b>&lt;librpmem.h&gt;</b> define the minimum size allowed by <b>librpmem</b> for a part
       file and a remote pool, respectively.

   <b>LANES</b>
       The term <u>lane</u> means an isolated path of execution.  The underlying hardware utilized by  both  local  and
       remote nodes may have limited resources that restrict the maximum number of parallel <b><a href="../man3/rpmem_persist.3.html">rpmem_persist</a></b>(3) op‐
       erations.  The maximum number of supported lanes is returned by the <b>rpmem_open</b>() and <b>rpmem_create</b>() func‐
       tion calls.  The caller passes the maximum number of lanes requested in *<u>nlanes</u>.  If the pool is success‐
       fully  created  or  opened, *<u>nlanes</u> is updated to reflect the minimum of the number of lanes requested by
       the caller and the maximum number of lanes supported by underlying hardware.  The application is obligat‐
       ed to use at most the returned number of lanes in parallel.

       <b><a href="../man3/rpmem_persist.3.html">rpmem_persist</a></b>(3) does not provide any locking mechanism; thus any serialization of  calls  must  be  per‐
       formed by the application if required.

       Each  lane  requires  a separate connection, represented by a file descriptor.  If the system runs out of
       free file descriptors during <b>rpmem_create</b>() or <b>rpmem_open</b>(), these functions will fail.   See  <b>nofile</b>  in
       <b><a href="../man5/limits.conf.5.html">limits.conf</a></b>(5) for more details.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/rpmem_persist.3.html">rpmem_persist</a></b>(3), <b><a href="../man3/sysconf.3.html">sysconf</a></b>(3), <b><a href="../man5/limits.conf.5.html">limits.conf</a></b>(5), <b><a href="../man7/libpmemobj.7.html">libpmemobj</a></b>(7), <b><a href="../man7/librpmem.7.html">librpmem</a></b>(7) and <b>&lt;https://pmem.io&gt;</b>

PMDK - rpmem API version 1.3                       2021-09-24                                    <u><a href="../man3/RPMEM_CREATE.3.html">RPMEM_CREATE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>