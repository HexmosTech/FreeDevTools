<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tracefs_local_events, tracefs_local_events_system, tracefs_fill_local_events, tracefs_load_cmdlines,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtracefs-doc">libtracefs-doc_1.8.1-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tracefs_local_events, tracefs_local_events_system, tracefs_fill_local_events, tracefs_load_cmdlines,
       tracefs_load_headers - Initialize a tep handler with trace events from the local system.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tracefs.h&gt;</b>

       struct tep_handle *<b>tracefs_local_events</b>(const char *<u>tracing_dir</u>);
       struct tep_handle *<b>tracefs_local_events_system</b>(const char *<u>tracing_dir</u>, const char * const *<u>sys_names</u>);
       int <b>tracefs_fill_local_events</b>(const char *<u>tracing_dir</u>, struct tep_handle *<u>tep</u>, int *<u>parsing_failures</u>);
       int <b>tracefs_load_cmdlines</b>(const char *<u>tracing_dir</u>, struct tep_handle *<u>tep</u>);
       int <b>tracefs_load_headers</b>(const char *<u>tracing_dir</u>, struct tep_handle *<u>tep</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Functions for initializing a tep handler with trace events from the local system.

       The <b>tracefs_local_events()</b> function allocates a new <u>tep</u> handler and initializes it with events from all
       trace systems, located in the given <u>tracing_dir</u> directory. This could be NULL or the location of the
       tracefs mount point for the trace systems of the local machine, or it may be a path to a copy of the
       tracefs directory from another machine.

       The <b>tracefs_local_events_system()</b> function allocates a new <u>tep</u> handler and initializes it with events
       from specified trace systems <u>sys_names</u>, located in the given <u>tracing_dir</u> directory. This could be NULL or
       the location of the tracefs mount point for the trace systems of the local machine, or it may be a path
       to a copy of the tracefs directory from another machine. The <u>sys_names</u> argument is an array of trace
       system names, that will be used for <u>tep</u> handler initialization. The last element in that array must be a
       NULL pointer.

       The <b>tracefs_fill_local_events()</b> function initializes already allocated <u>tep</u> handler with events from all
       trace systems, located in the given <u>tracing_dir</u> directory. This could be NULL or the location of the
       tracefs mount point for the trace systems of the local machine, or it may be a path to a copy of the
       tracefs directory from another machine. The <u>tep</u> argument must be a pointer to already allocated tep
       handler, that is going to be initialized. The <u>parsing_failures</u> argument could be NULL or a pointer to an
       integer, where the number of failures while parsing the event files are returned.

       The above functions will also load the mappings between pids and the process command line names. In some
       cases the <u>tep</u> handle is created with one of the above before tracing begins. As the mappings get updated
       during the trace, there may be a need to read the mappings again after the trace. The
       <b>tracefs_load_cmdlines()</b> does just that. The <u>tracing_dir</u> is the directory of the mount point to load from,
       or NULL to use the mount point of the tracefs file system.

       The <b>tracefs_load_headers()</b> will reade the "header_page" of the events directory that will update the <u>tep</u>
       handle with information on how to parse the tracing ring buffer sub-buffer.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>tracefs_local_events()</b> and <b>tracefs_local_events_system()</b> functions return pointer to allocated and
       initialized <u>tep</u> handler, or NULL in case of an error. The returned <u>tep</u> handler must be freed with
       <b><a href="../man3/tep_free.3.html">tep_free</a></b>(3).

       The <b>tracefs_fill_local_events()</b> function returns -1 in case of an error or 0 otherwise.

       The <b>tracefs_load_cmdlines()</b> function returns -1 in case of an error, or 0 otherwise.

</pre><h4><b>EXAMPLE</b></h4><pre>
           #include &lt;tracefs.h&gt;

           struct tep_handle *tep;
           ...
                   tep = tracefs_local_events(NULL);
                   if (!tep) {
                           /* Failed to initialise tep handler with local events from top instance */
                           ...
                   }
           ...
                   tep_free(tep);
           ...
                   const char *systems[] = {"ftrace", "irq", NULL};
                   tep = tracefs_local_events_system(NULL, systems);
                   if (!tep) {
                           /* Failed to initialise tep handler with local events from
                            * ftrace and irq systems in top instance.
                            */
                           ...
                   }
           ...
                   tep_free(tep);
           ...
                   int parsing_failures;
                   tep = tep_alloc();
                   if (!tep) {
                           /* Failed to allocate a tep handler */
                           ...
                   }
                   if (tracefs_fill_local_events(NULL, tep, &amp;parsing_failures) &lt; 0) {
                           /* Failed to initialise tep handler with local events from top instance */
                   }
                   tracefs_load_cmdlines(NULL, tep);
           ...
                   tep_free(tep);

</pre><h4><b>FILES</b></h4><pre>
           <b>tracefs.h</b>
                   Header file to include in order to have access to the library APIs.
           <b>-ltracefs</b>
                   Linker switch to add when building a program that uses the library.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libtracefs.3.html">libtracefs</a></b>(3), <b><a href="../man3/libtraceevent.3.html">libtraceevent</a></b>(3), <b><a href="../man1/trace-cmd.1.html">trace-cmd</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
           <b>Steven</b> <b>Rostedt</b> &lt;<b><a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a></b>[1]&gt;
           <b>Tzvetomir</b> <b>Stoyanov</b> &lt;<b><a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a></b>[2]&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<b><a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a></b>[3]&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       libtracefs is Free Software licensed under the GNU LGPL 2.1

</pre><h4><b>RESOURCES</b></h4><pre>
       <b>https://git.kernel.org/pub/scm/libs/libtrace/libtracefs.git/</b>

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2020 VMware, Inc. Free use of this software is granted under the terms of the GNU Public
       License (GPL).

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a>
           <a href="mailto:rostedt@goodmis.org">mailto:rostedt@goodmis.org</a>

        2. <a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a>
           <a href="mailto:tz.stoyanov@gmail.com">mailto:tz.stoyanov@gmail.com</a>

        3. <a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a>
           <a href="mailto:linux-trace-devel@vger.kernel.org">mailto:linux-trace-devel@vger.kernel.org</a>

libtracefs 1.8.1                                   06/05/2025                                      <u><a href="../man3/LIBTRACEFS.3.html">LIBTRACEFS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>