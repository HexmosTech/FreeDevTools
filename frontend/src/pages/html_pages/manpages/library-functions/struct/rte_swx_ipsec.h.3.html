<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_swx_ipsec.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_swx_ipsec.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/netinet/in.h">netinet/in.h</a>&gt;
       #include &lt;rte_compat.h&gt;
       #include &lt;rte_crypto_sym.h&gt;
       #include &lt;rte_ip6.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_swx_ipsec_burst_size</b>
       struct <b>rte_swx_ipsec_params</b>
       struct <b>rte_swx_ipsec_input_packet_metadata</b>
       struct <b>rte_swx_ipsec_sa_cipher_params</b>
       struct <b>rte_swx_ipsec_sa_authentication_params</b>
       struct <b>rte_swx_ipsec_sa_aead_params</b>
       struct <b>rte_swx_ipsec_sa_encap_params</b>
       struct <b>rte_swx_ipsec_sa_params</b>

   <b>Macros</b>
       #define <b>RTE_SWX_IPSEC_NAME_SIZE</b>   64
       #define <b>RTE_SWX_IPSEC_BURST_SIZE_MAX</b>   256
       #define <b>RTE_SWX_IPSEC_KEY_SIZE_MAX</b>   64

   <b>Functions</b>
       __rte_experimental struct rte_swx_ipsec * <b>rte_swx_ipsec_find</b> (const char *name)
       __rte_experimental int <b>rte_swx_ipsec_create</b> (struct rte_swx_ipsec **ipsec, const char *name, struct
           <b>rte_swx_ipsec_params</b> *params, int numa_node)
       __rte_experimental void <b>rte_swx_ipsec_free</b> (struct rte_swx_ipsec *ipsec)
       __rte_experimental void <b>rte_swx_ipsec_run</b> (struct rte_swx_ipsec *ipsec)
       __rte_experimental int <b>rte_swx_ipsec_sa_add</b> (struct rte_swx_ipsec *ipsec, struct <b>rte_swx_ipsec_sa_params</b>
           *sa_params, uint32_t *sa_id)
       __rte_experimental void <b>rte_swx_ipsec_sa_delete</b> (struct rte_swx_ipsec *ipsec, uint32_t sa_id)
       __rte_experimental struct <b>rte_swx_ipsec_sa_params</b> * <b>rte_swx_ipsec_sa_read</b> (struct rte_swx_ipsec *ipsec,
           const char *string, int *is_blank_or_comment, const char **errmsg)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE SWX Internet Protocol Security (IPsec)

       The IPsec block is a companion block for the SWX pipeline used to provide IPsec support to the pipeline.
       The block is external to the pipeline, hence it needs to be explicitly instantiated by the user and
       connected to a pipeline instance through the pipeline I/O ports.

       Main features:

       • IPsec  inbound  (encrypted  input  packets -&gt; clear text output packets) and outbound (clear text input
         packets -&gt; encrypted output packets) processing support for tunnel and transport modes.

       Security Association (SA):

       • Each IPsec block instance has its own set of SAs  used  to  process  the  input  packets.  Each  SA  is
         identified by its unique SA ID. The IPsec inbound and outbound SAs share the same ID space.

       • Each  input  packet  is  first  mapped to one of the existing SAs by using the SA ID and then processed
         according to the identified SA. The SA ID is read from input packet.  The  SA  ID  field  is  typically
         written by the pipeline before sending the packet to the IPsec block.

       Packet format:

       • IPsec block input packet (i.e. pipeline output packet):

         • IPsec block meta-data header:

       <b>See</b> <b>also</b>
           struct <b>rte_swx_ipsec_input_packet_metadata</b>.

         • IPv4 header.

         • IPv4 payload: on the inbound path, it includes the encrypted ESP packet.

       • IPsec block output packet (i.e. pipeline input packet):

         • IPv4 header.

         • IPv4 payload: on the outbound path, it includes the encrypted ESP packet.

       SA update procedure:

       • To add a new SA,

       <b>See</b> <b>also</b>
           function <b>rte_swx_ipsec_sa_add()</b>.

       • To delete an existing SA,

       <b>See</b> <b>also</b>
           function <b>rte_swx_ipsec_sa_delete()</b>.

       • To update an existing SA, the control plane has to follow the following steps:

         1.  Add  a new SA with potentially a different set of configuration parameters. This step can fail, for
             example when the SA table is full.

         2.  Wait until no more packets are using the old SA.

         3.  Delete the old SA.

       Definition in file <b>rte_swx_ipsec.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_SWX_IPSEC_NAME_SIZE</b>   <b>64</b>
       Name size.

       Definition at line <b>66</b> of file <b>rte_swx_ipsec.h</b>.

   <b>#define</b> <b>RTE_SWX_IPSEC_BURST_SIZE_MAX</b>   <b>256</b>
       Maximum burst size.

       Definition at line <b>71</b> of file <b>rte_swx_ipsec.h</b>.

   <b>#define</b> <b>RTE_SWX_IPSEC_KEY_SIZE_MAX</b>   <b>64</b>
       Maximum key size in bytes.

       Definition at line <b>186</b> of file <b>rte_swx_ipsec.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>__rte_experimental</b> <b>struct</b> <b>rte_swx_ipsec</b> <b>*</b> <b>rte_swx_ipsec_find</b> <b>(const</b> <b>char</b> <b>*</b> <b>name)</b>
       IPsec instance find

       <b>Parameters</b>
           <u>name</u> IPsec instance name.

       <b>Returns</b>
           Valid IPsec instance handle if found or NULL otherwise.

   <b>__rte_experimental</b> <b>int</b> <b>rte_swx_ipsec_create</b> <b>(struct</b>  <b>rte_swx_ipsec</b>  <b>**</b>  <b>ipsec,</b>  <b>const</b>  <b>char</b>  <b>*</b>  <b>name,</b>  <b>struct</b>
       <b>rte_swx_ipsec_params</b> <b>*</b> <b>params,</b> <b>int</b> <b>numa_node)</b>
       IPsec instance create

       <b>Parameters</b>
           <u>ipsec</u>  IPsec  instance  handle.  Must point to valid memory. Contains valid pipeline handle once this
           function returns successfully.
           <u>name</u> IPsec instance unique name.
           <u>params</u> IPsec instance configuration parameters.
           <u>numa_node</u> Non-Uniform Memory Access (NUMA) node.

       <b>Returns</b>
           0 on success or the following error codes otherwise: -EINVAL: Invalid argument; -ENOMEM:  Not  enough
           space/cannot allocate memory; -EEXIST: Pipeline with this name already exists.

   <b>__rte_experimental</b> <b>void</b> <b>rte_swx_ipsec_free</b> <b>(struct</b> <b>rte_swx_ipsec</b> <b>*</b> <b>ipsec)</b>
       IPsec instance free

       <b>Parameters</b>
           <u>ipsec</u> IPsec instance handle.

   <b>__rte_experimental</b> <b>void</b> <b>rte_swx_ipsec_run</b> <b>(struct</b> <b>rte_swx_ipsec</b> <b>*</b> <b>ipsec)</b>
       IPsec Data Plane API IPsec instance run

       <b>Parameters</b>
           <u>ipsec</u> IPsec instance handle.

   <b>__rte_experimental</b>  <b>int</b>  <b>rte_swx_ipsec_sa_add</b> <b>(struct</b> <b>rte_swx_ipsec</b> <b>*</b> <b>ipsec,</b> <b>struct</b> <b>rte_swx_ipsec_sa_params</b> <b>*</b>
       <b>sa_params,</b> <b>uint32_t</b> <b>*</b> <b>sa_id)</b>
       IPsec SA add

       <b>Parameters</b>
           <u>ipsec</u> IPsec instance handle.
           <u>sa_params</u> SA parameters.
           <u>sa_id</u> On success, the SA ID.

       <b>Returns</b>
           0 on success or error code otherwise.

   <b>__rte_experimental</b> <b>void</b> <b>rte_swx_ipsec_sa_delete</b> <b>(struct</b> <b>rte_swx_ipsec</b> <b>*</b> <b>ipsec,</b> <b>uint32_t</b> <b>sa_id)</b>
       IPsec SA delete

       It is the responibility of the Control Plane to make sure the SA to be deleted is no longer used  by  the
       Data Plane.

       <b>Parameters</b>
           <u>ipsec</u> IPsec instance handle.
           <u>sa_id</u> The SA ID.

   <b>__rte_experimental</b>  <b>struct</b>  <b>rte_swx_ipsec_sa_params</b>  <b>*</b>  <b>rte_swx_ipsec_sa_read</b>  <b>(struct</b> <b>rte_swx_ipsec</b> <b>*</b> <b>ipsec,</b>
       <b>const</b> <b>char</b> <b>*</b> <b>string,</b> <b>int</b> <b>*</b> <b>is_blank_or_comment,</b> <b>const</b> <b>char</b> <b>**</b> <b>errmsg)</b>
       IPsec SA read from string

       IPsec SA syntax:

       &lt;sa&gt; : encrypt &lt;crypto_params&gt; &lt;encap_params&gt; | decrypt &lt;crypto_params&gt; &lt;encap_params&gt; ;

       &lt;crypto_params&gt; : &lt;cipher&gt; &lt;auth&gt; | &lt;aead&gt; ;

       &lt;cipher&gt; : cipher &lt;ciher_alg&gt; key &lt;cipher_key&gt; | cipher &lt;cipher_alg&gt; ;

       &lt;auth&gt; : auth &lt;authentication_alg&gt; key &lt;authentication_key&gt; | auth &lt;authentication_alg&gt; ;

       &lt;aead&gt; : aead &lt;aead_alg&gt; key &lt;aead_key&gt; ;

       &lt;encap_params&gt; : esp spi &lt;spi&gt; tunnel ipv4 srcaddr &lt;ipv4_src_addr&gt;  dstaddr  &lt;ipv4_dst_addr&gt;  |  esp  spi
       &lt;spi&gt; tunnel ipv6 srcaddr &lt;ipv6_src_addr&gt; dstaddr &lt;ipv6_dst_addr&gt; | esp spi &lt;spi&gt; transport ;

       <b>Parameters</b>
           <u>ipsec</u> IPsec instance handle.
           <u>string</u> String containing the SA.
           <u>is_blank_or_comment</u>  On  error,  when its input value is not NULL, this argument is set to a non-zero
           value when <u>string</u> contains a blank or comment line and to zero otherwise.
           <u>errmsg</u> On error, when its input value is not NULL, this argument points to a string with  details  on
           the detected error.

       <b>Returns</b>
           Pointer to valid IPsec SA parameters data structure on success or NULL on error.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                              <u><a href="../man3/rte_swx_ipsec.h.3.html">rte_swx_ipsec.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>