<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_dispatcher.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_dispatcher.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;stdbool.h&gt;
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;rte_compat.h&gt;
       #include &lt;rte_eventdev.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_dispatcher_stats</b>

   <b>Typedefs</b>
       <b>typedef</b> bool(* <b>rte_dispatcher_match_t</b>) (const struct <b>rte_event</b> *event, void *cb_data)
       <b>typedef</b> void(* <b>rte_dispatcher_process_t</b>) (uint8_t event_dev_id, uint8_t event_port_id, struct <b>rte_event</b>
           *events, uint16_t num, void *cb_data)
       <b>typedef</b> void(* <b>rte_dispatcher_finalize_t</b>) (uint8_t event_dev_id, uint8_t event_port_id, void *cb_data)

   <b>Functions</b>
       __rte_experimental struct rte_dispatcher * <b>rte_dispatcher_create</b> (uint8_t event_dev_id)
       __rte_experimental int <b>rte_dispatcher_free</b> (struct rte_dispatcher *dispatcher)
       __rte_experimental uint32_t <b>rte_dispatcher_service_id_get</b> (const struct rte_dispatcher *dispatcher)
       __rte_experimental int <b>rte_dispatcher_bind_port_to_lcore</b> (struct rte_dispatcher *dispatcher, uint8_t
           event_port_id, uint16_t batch_size, uint64_t timeout, unsigned int lcore_id)
       __rte_experimental int <b>rte_dispatcher_unbind_port_from_lcore</b> (struct rte_dispatcher *dispatcher, uint8_t
           event_port_id, unsigned int lcore_id)
       __rte_experimental int <b>rte_dispatcher_register</b> (struct rte_dispatcher *dispatcher, <b>rte_dispatcher_match_t</b>
           match_fun, void *match_cb_data, <b>rte_dispatcher_process_t</b> process_fun, void *process_cb_data)
       __rte_experimental int <b>rte_dispatcher_unregister</b> (struct rte_dispatcher *dispatcher, int handler_id)
       __rte_experimental int <b>rte_dispatcher_finalize_register</b> (struct rte_dispatcher *dispatcher,
           <b>rte_dispatcher_finalize_t</b> finalize_fun, void *finalize_data)
       __rte_experimental int <b>rte_dispatcher_finalize_unregister</b> (struct rte_dispatcher *dispatcher, int reg_id)
       __rte_experimental void <b>rte_dispatcher_start</b> (struct rte_dispatcher *dispatcher)
       __rte_experimental void <b>rte_dispatcher_stop</b> (struct rte_dispatcher *dispatcher)
       __rte_experimental void <b>rte_dispatcher_stats_get</b> (const struct rte_dispatcher *dispatcher, struct
           <b>rte_dispatcher_stats</b> *stats)
       __rte_experimental void <b>rte_dispatcher_stats_reset</b> (struct rte_dispatcher *dispatcher)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE Dispatcher

       <b>Warning</b>
           <b>EXPERIMENTAL:</b> All functions in this file may be changed or removed without prior notice.

       The purpose of the dispatcher is to help decouple different parts of an application (e.g., modules),
       sharing the same underlying event device.

       Definition in file <b>rte_dispatcher.h</b>.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>bool(*</b> <b>rte_dispatcher_match_t)</b> <b>(const</b> <b>struct</b> <b>rte_event</b> <b>*event,</b> <b>void</b> <b>*cb_data)</b>
       Function prototype for match callbacks.

       Match callbacks are used by an application to decide how the dispatcher distributes events to different
       parts of the application.

       The application is not expected to process the event at the point of the match call. Such matters should
       be deferred to the process callback invocation.

       The match callback may be used as an opportunity to prefetch data.

       <b>Parameters</b>
           <u>event</u> Pointer to event
           <u>cb_data</u> The pointer supplied by the application in <b>rte_dispatcher_register()</b>.

       <b>Returns</b>
           Returns true in case this event should be delivered (via the process callback), and false otherwise.

       Definition at line <b>56</b> of file <b>rte_dispatcher.h</b>.

   <b>typedef</b> <b>void(*</b> <b>rte_dispatcher_process_t)</b> <b>(uint8_t</b> <b>event_dev_id,</b> <b>uint8_t</b> <b>event_port_id,</b> <b>struct</b> <b>rte_event</b>
       <b>*events,</b> <b>uint16_t</b> <b>num,</b> <b>void</b> <b>*cb_data)</b>
       Function prototype for process callbacks.

       The process callbacks are used by the dispatcher to deliver events for processing.

       <b>Parameters</b>
           <u>event_dev_id</u> The originating event device id.
           <u>event_port_id</u> The originating event port.
           <u>events</u> Pointer to an array of events.
           <u>num</u> The number of events in the events array.
           <u>cb_data</u> The pointer supplied by the application in <b>rte_dispatcher_register()</b>.

       Definition at line <b>81</b> of file <b>rte_dispatcher.h</b>.

   <b>typedef</b> <b>void(*</b> <b>rte_dispatcher_finalize_t)</b> <b>(uint8_t</b> <b>event_dev_id,</b> <b>uint8_t</b> <b>event_port_id,</b> <b>void</b> <b>*cb_data)</b>
       Function prototype for finalize callbacks.

       The finalize callbacks are used by the dispatcher to notify the application it has delivered all events
       from a particular batch dequeued from the event device.

       <b>Parameters</b>
           <u>event_dev_id</u> The originating event device id.
           <u>event_port_id</u> The originating event port.
           <u>cb_data</u> The pointer supplied by the application in <b>rte_dispatcher_finalize_register()</b>.

       Definition at line <b>102</b> of file <b>rte_dispatcher.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>__rte_experimental</b> <b>struct</b> <b>rte_dispatcher</b> <b>*</b> <b>rte_dispatcher_create</b> <b>(uint8_t</b> <b>event_dev_id)</b>
       Create a dispatcher with the specified id.

       <b>Parameters</b>
           <u>event_dev_id</u> The identifier of the event device from which this dispatcher will dequeue events.

       <b>Returns</b>
           A pointer to a new dispatcher instance, or NULL on failure, in which case rte_errno is set.

   <b>__rte_experimental</b> <b>int</b> <b>rte_dispatcher_free</b> <b>(struct</b> <b>rte_dispatcher</b> <b>*</b> <b>dispatcher)</b>
       Free a dispatcher.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.

       <b>Returns</b>

           • 0: Success

           • &lt;0: Error code on failure

   <b>__rte_experimental</b> <b>uint32_t</b> <b>rte_dispatcher_service_id_get</b> <b>(const</b> <b>struct</b> <b>rte_dispatcher</b> <b>*</b> <b>dispatcher)</b>
       Retrieve the service identifier of a dispatcher.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.

       <b>Returns</b>
           The dispatcher service's id.

   <b>__rte_experimental</b>   <b>int</b>  <b>rte_dispatcher_bind_port_to_lcore</b>  <b>(struct</b>  <b>rte_dispatcher</b>  <b>*</b>  <b>dispatcher,</b>  <b>uint8_t</b>
       <b>event_port_id,</b> <b>uint16_t</b> <b>batch_size,</b> <b>uint64_t</b> <b>timeout,</b> <b>unsigned</b> <b>int</b> <b>lcore_id)</b>
       Binds an event device port to a specific lcore on the specified dispatcher.

       This function configures the event port id to be used by the event dispatcher  service,  if  run  on  the
       specified lcore.

       Multiple  event  device ports may be bound to the same lcore. A particular port must not be bound to more
       than one lcore.

       If the dispatcher service is mapped (with <b>rte_service_map_lcore_set()</b>) to a lcore to which no  ports  are
       bound, the service function will be a no-operation.

       This  function  may  be  called by any thread (including unregistered non-EAL threads), but not while the
       dispatcher is running on lcore specified by lcore_id.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.
           <u>event_port_id</u> The event device port identifier.
           <u>batch_size</u> The batch size to use in <b>rte_event_dequeue_burst()</b>, for the configured event  device  port
           and lcore.
           <u>timeout</u>  The  timeout  parameter to use in <b>rte_event_dequeue_burst()</b>, for the configured event device
           port and lcore.
           <u>lcore_id</u> The lcore by which this event port will be used.

       <b>Returns</b>

           • 0: Success

           • -ENOMEM: Unable to allocate sufficient resources.

           • -EEXISTS: Event port is already configured.

           • -EINVAL: Invalid arguments.

   <b>__rte_experimental</b> <b>int</b> <b>rte_dispatcher_unbind_port_from_lcore</b> <b>(struct</b>  <b>rte_dispatcher</b>  <b>*</b>  <b>dispatcher,</b>  <b>uint8_t</b>
       <b>event_port_id,</b> <b>unsigned</b> <b>int</b> <b>lcore_id)</b>
       Unbind an event device port from a specific lcore.

       This  function  may  be  called by any thread (including unregistered non-EAL threads), but not while the
       dispatcher is running on lcore specified by lcore_id.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.
           <u>event_port_id</u> The event device port identifier.
           <u>lcore_id</u> The lcore which was using this event port.

       <b>Returns</b>

           • 0: Success

           • -ENOENT: Event port id not bound to this lcore_id.

   <b>__rte_experimental</b> <b>int</b> <b>rte_dispatcher_register</b> <b>(struct</b> <b>rte_dispatcher</b>  <b>*</b>  <b>dispatcher,</b>  <b>rte_dispatcher_match_t</b>
       <b>match_fun,</b> <b>void</b> <b>*</b> <b>match_cb_data,</b> <b>rte_dispatcher_process_t</b> <b>process_fun,</b> <b>void</b> <b>*</b> <b>process_cb_data)</b>
       Register an event handler.

       The  match  callback  function  is  used  to  select if a particular event should be delivered, using the
       corresponding process callback function.

       The reason for having two distinct steps is to allow the dispatcher to deliver all  events  as  a  batch.
       This  in  turn  will  cause processing of a particular kind of events to happen in a back-to-back manner,
       improving cache locality.

       The list of handler callback functions is shared among all lcores, but will only be  executed  on  lcores
       which has an eventdev port bound to them, and which are running the dispatcher service.

       An event is delivered to at most one handler. Events where no handler is found are dropped.

       The application must not depend on the order of which the match functions are invoked.

       Ordering  of  events is not guaranteed to be maintained between different deliver callbacks. For example,
       suppose there are two callbacks registered, matching different subsets of events arriving  on  an  atomic
       queue.  A  batch  of events [ev0, ev1, ev2] are dequeued on a particular port, all pertaining to the same
       flow. The match callback for registration A returns true for ev0 and ev2, and the matching  function  for
       registration B for ev1. In that scenario, the dispatcher may choose to deliver first [ev0, ev2] using A's
       deliver function, and then [ev1] to B - or vice versa.

       <b>rte_dispatcher_register()</b>  may  be called by any thread (including unregistered non-EAL threads), but not
       while the event dispatcher is running on any service lcore.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.
           <u>match_fun</u> The match callback function.
           <u>match_cb_data</u> A pointer to some application-specific opaque data (or NULL), which is supplied back to
           the application when match_fun is called.
           <u>process_fun</u> The process callback function.
           <u>process_cb_data</u> A pointer to some application-specific opaque data (or NULL), which is supplied  back
           to the application when process_fun is called.

       <b>Returns</b>

           • &gt;= 0: The identifier for this registration.

           • -ENOMEM: Unable to allocate sufficient resources.

   <b>__rte_experimental</b> <b>int</b> <b>rte_dispatcher_unregister</b> <b>(struct</b> <b>rte_dispatcher</b> <b>*</b> <b>dispatcher,</b> <b>int</b> <b>handler_id)</b>
       Unregister an event handler.

       This  function  may  be  called by any thread (including unregistered non-EAL threads), but not while the
       dispatcher is running on any service lcore.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.
           <u>handler_id</u> The handler registration id returned by the original <b>rte_dispatcher_register()</b> call.

       <b>Returns</b>

           • 0: Success

           • -EINVAL: The handler_id parameter was invalid.

   <b>__rte_experimental</b>   <b>int</b>    <b>rte_dispatcher_finalize_register</b>    <b>(struct</b>    <b>rte_dispatcher</b>    <b>*</b>    <b>dispatcher,</b>
       <b>rte_dispatcher_finalize_t</b> <b>finalize_fun,</b> <b>void</b> <b>*</b> <b>finalize_data)</b>
       Register a finalize callback function.

       An application may optionally install one or more finalize callbacks.

       All  finalize  callbacks  are  invoked  by the dispatcher when a complete batch of events (retrieve using
       <b>rte_event_dequeue_burst()</b>) have been delivered to the application (or have been dropped).

       The finalize callback is not tied to any particular handler.

       The finalize callback provides an opportunity for the application to do per-batch  processing.  One  case
       where  this  may be useful is if an event output buffer is used, and is shared among several handlers. In
       such a case, proper output buffer flushing may be assured using a finalize callback.

       <b>rte_dispatcher_finalize_register()</b> may be called by any thread (including unregistered non-EAL  threads),
       but not while the dispatcher is running on any service lcore.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.
           <u>finalize_fun</u> The function called after completing the processing of a dequeue batch.
           <u>finalize_data</u> A pointer to some application-specific opaque data (or NULL), which is supplied back to
           the application when finalize_fun is called.

       <b>Returns</b>

           • &gt;= 0: The identifier for this registration.

           • -ENOMEM: Unable to allocate sufficient resources.

   <b>__rte_experimental</b> <b>int</b> <b>rte_dispatcher_finalize_unregister</b> <b>(struct</b> <b>rte_dispatcher</b> <b>*</b> <b>dispatcher,</b> <b>int</b> <b>reg_id)</b>
       Unregister a finalize callback.

       This  function  may  be  called by any thread (including unregistered non-EAL threads), but not while the
       dispatcher is running on any service lcore.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.
           <u>reg_id</u> The finalize registration id returned by the original <b>rte_dispatcher_finalize_register()</b> call.

       <b>Returns</b>

           • 0: Success

           • -EINVAL: The reg_id parameter was invalid.

   <b>__rte_experimental</b> <b>void</b> <b>rte_dispatcher_start</b> <b>(struct</b> <b>rte_dispatcher</b> <b>*</b> <b>dispatcher)</b>
       Start a dispatcher instance.

       Enables the dispatcher service.

       The underlying event device must have been started prior to calling <b>rte_dispatcher_start()</b>.

       For the dispatcher to actually perform work (i.e., dispatch events), its service must have been mapped to
       one or more service lcores, and its service run state set to '1'. A  dispatcher's  service  is  retrieved
       using <b>rte_dispatcher_service_id_get()</b>.

       Each service lcore to which the dispatcher is mapped should have at least one event port configured. Such
       configuration  is  performed  by  calling  <b>rte_dispatcher_bind_port_to_lcore()</b>,  prior  to  starting  the
       dispatcher.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.

   <b>__rte_experimental</b> <b>void</b> <b>rte_dispatcher_stop</b> <b>(struct</b> <b>rte_dispatcher</b> <b>*</b> <b>dispatcher)</b>
       Stop a running dispatcher instance.

       Disables the dispatcher service.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.

   <b>__rte_experimental</b>  <b>void</b>  <b>rte_dispatcher_stats_get</b>  <b>(const</b>  <b>struct</b>  <b>rte_dispatcher</b>   <b>*</b>   <b>dispatcher,</b>   <b>struct</b>
       <b>rte_dispatcher_stats</b> <b>*</b> <b>stats)</b>
       Retrieve statistics for a dispatcher instance.

       This function is MT safe and may be called by any thread (including unregistered non-EAL threads).

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.
           <u>stats</u> A pointer to a structure to fill with statistics.

   <b>__rte_experimental</b> <b>void</b> <b>rte_dispatcher_stats_reset</b> <b>(struct</b> <b>rte_dispatcher</b> <b>*</b> <b>dispatcher)</b>
       Reset statistics for a dispatcher instance.

       This  function  may be called by any thread (including unregistered non-EAL threads), but may not produce
       the correct result if the dispatcher is running on any service lcore.

       <b>Parameters</b>
           <u>dispatcher</u> The dispatcher instance.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                             <u><a href="../man3/rte_dispatcher.h.3.html">rte_dispatcher.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>