<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pwquality - Documentation of the libpwquality API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpwquality-dev">libpwquality-dev_1.4.5-5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pwquality - Documentation of the libpwquality API

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;pwquality.h&gt;

        pwquality_settings_t *pwquality_default_settings(void);
        void pwquality_free_settings(pwquality_settings_t *pwq);

        int pwquality_read_config(pwquality_settings_t *pwq, const char *cfgfile,
               void **auxerror);

        int pwquality_set_option(pwquality_settings_t *pwq, const char *option);
        int pwquality_set_int_value(pwquality_settings_t *pwq, int setting, int value);
        int pwquality_set_str_value(pwquality_settings_t *pwq, int setting,
               const char *value);
        int pwquality_get_int_value(pwquality_settings_t *pwq, int setting, int *value);
        int pwquality_get_str_value(pwquality_settings_t *pwq, int setting, const char **value);

        int pwquality_generate(pwquality_settings_t *pwq, int entropy_bits,
               char **password);

        int pwquality_check(pwquality_settings_t *pwq, const char *password,
               const char *oldpassword, const char *user, void **auxerror);

        const char *pwquality_strerror(char *buf, size_t len, int errcode, void *auxerror);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Function <b>pwquality_default_settings()</b> allocates and returns default pwquality settings to be used in
       other library calls. The allocated opaque structure has to be freed with the <b>pwquality_free_settings()</b>
       call.

       The <b>pwquality_read_config()</b> parses the configuration file (if <u>cfgfile</u> is NULL then the default one). If
       <u>auxerror</u> is not NULL it also possibly returns auxiliary error information that must be passed into
       <b>pwquality_strerror()</b> function.

       <b>New</b> <b>in</b> <b>1.3.0:</b>
           The  library  first  tries  to  parse all <u>*.conf</u> configuration files from <u>&lt;cfgfile&gt;.d</u> directory if it
           exists. Order of parsing determines what values will be in effect - the latest wins.

       Function <b>pwquality_set_option()</b> is useful for setting the options as configured on a pam  module  command
       line in form of <u>opt</u>=<u>val</u>.

       Getter   and   setter   functions   for   the   individual   integer   and  string  setting  values  are:
       <b>pwquality_set_int_value()</b>,        <b>pwquality_set_str_value()</b>,        <b>pwquality_get_int_value()</b>,        and
       <b>pwquality_get_str_value()</b>.  In  case  of the string getter the caller must copy the string before another
       calls that can manipulate the <u>pwq</u> settings object.

       The <b>pwquality_generate()</b> function generates a random password  of  <u>entropy_bits</u>  entropy  and  checks  it
       according  to the settings. The <u>*password</u> is allocated on the heap by the library. The <u>entropy_bits</u> value
       is adjusted to fit within the <b>PWQ_MIN_ENTROPY_BITS</b> and <b>PWQ_MAX_ENTROPY_BITS</b>  range  before  generating  a
       password.

       The  <b>pwquality_check()</b>  function  checks  the <u>password</u> according to the settings. It returns either score
       (value between 0 and 100), negative error number, and possibly also auxiliary error information that must
       be passed into the <b>pwquality_strerror()</b> function.  The <u>oldpassword</u> is optional and can be NULL. The  <u>user</u>
       is  used  for checking the <u>password</u> against the user name and potentially other <b><a href="../man5/passwd.5.html">passwd</a></b>(5) information and
       can be NULL. The <u>auxerror</u> can be NULL - in that case the auxiliary error  information  is  not  returned.
       However if it is non-NULL not passing the returned <u>*auxerror</u> into <b>pwquality_strerror()</b> can lead to memory
       leaks.

       The  score of a password depends on the value of the setting <b>PWQ_SETTING_MIN_LENGTH</b>. If it is set higher,
       the score for the same passwords will be lower.

       Function <b>pwquality_strerror()</b> translates the <u>errcode</u> and <u>auxerror</u> auxiliary data into  a  localized  text
       message.  If  <u>buf</u>  is  NULL  the  function  uses  an internal static buffer which makes the function non-
       reentrant in that case. The returned pointer is  not  guaranteed  to  point  to  the  <u>buf</u>.  The  function
       deallocates  eventual  <u>auxerror</u>  data  passed  into  it,  thus  it must not be called twice with the same
       <u>auxerror</u> data.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       In general the functions which return <b>int</b> return 0 as success  value  and  negative  values  as  concrete
       <b>PWQ_ERROR</b> error code. <b>pwquality_strerror()</b> does not allocate data and so it cannot fail.

       The returned positive or zero score from <b>pwquality_check()</b> should not be used for rejection of passwords,
       it  should  be  used only as approximate indicator of entropy present in the password with values such as
       0-30 being low, 30-60 medium, and 60-100 high.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Typical use of the libpwquality API:

        #include &lt;pwquality.h&gt;

        ...

               pwquality_settings_t *pwq;
               int rv;
               void *auxerror;
               char buf[PWQ_MAX_ERROR_MESSAGE_LEN];

               pwq = pwquality_default_settings();
               if (pwq == NULL) {
                       fprintf(stderr, "Error: %s\n", pwquality_strerror(buf, sizeof(buf), PWQ_ERROR_MEM_ALLOC, NULL));
                       return -1;
               }

               if ((rv=pwquality_read_config(pwq, NULL, &amp;auxerror)) != 0) {
                       pwquality_free_settings(pwq);
                       fprintf(stderr, "Error: %s\n", pwquality_strerror(buf, sizeof(buf), rv, auxerror));
                       return -1;
               }

               rv = pwquality_check(pwq, buf, NULL, user, &amp;auxerror);
               pwquality_free_settings(pwq);

               if (rv &gt;= 0) {
                       fprintf(stderr, "Password entropy score is: %d\n", rv);
               } else {
                       fprintf(stderr, "Password is rejected with error: %s\n", pwquality_strerror(buf, sizeof(buf), rv, auxerror));
               }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/pwquality.conf.5.html">pwquality.conf</a></b>(5)

</pre><h4><b>AUTHORS</b></h4><pre>
       Tomas Mraz &lt;<a href="mailto:tmraz@redhat.com">tmraz@redhat.com</a>&gt;

Red Hat, Inc.                                      2021-04-01                                       <u><a href="../man3/PWQUALITY.3.html">PWQUALITY</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>