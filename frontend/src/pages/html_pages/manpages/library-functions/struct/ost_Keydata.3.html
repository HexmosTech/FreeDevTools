<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ost::Keydata - Keydata objects are used to load and hold 'configuration' data for a given application.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libcommoncpp2-doc">libcommoncpp2-doc_1.8.1-10_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ost::Keydata - <b>Keydata</b> objects are used to load and hold 'configuration' data for a given application.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;misc.h&gt;

       Inherits <b>ost::MemPager</b>.

   <b>Classes</b>
       struct <b>Define</b>
       struct <b>Keysym</b>
       struct <b>Keyval</b>

   <b>Public</b> <b>Member</b> <b>Functions</b>
       void <b>load</b> (const char *keypath)
           Load additional key values into the currrent object from the specfied config source (a config
           file/section pair).
       void <b>loadPrefix</b> (const char *prefix, const char *keypath)
           Load additional key values into the currrent object from the specfied config source (a config
           file/section pair).
       void <b>loadFile</b> (const char *filepath, const char *keys=NULL, const char *pre=NULL)
           Load additional keys into the current object using a real filename that is directly passed rather
           than a computed key path.
       void <b>load</b> (<b>Define</b> *pairs)
           Load default keywords into the current object.
       <b>Keydata</b> ()
           Create an empty key data object.
       <b>Keydata</b> (const char *keypath)
           Create a new key data object and use 'Load' method to load an initial config file section into it.
       <b>Keydata</b> (<b>Define</b> *pairs, const char *keypath=NULL)
           Alternate constructor can take a define list and an optional pathfile to parse.
       virtual <b>~Keydata</b> ()
           Destroy the keydata object and all allocated memory.
       void <b>unlink</b> (void)
           Unlink the keydata object from the cache file stream.
       int <b>getCount</b> (const char *sym)
           Get a count of the number of data 'values' that is associated with a specific keyword.
       const char * <b>getFirst</b> (const char *sym)
           Get the first data value for a given keyword.
       const char * <b>getLast</b> (const char *sym)
           Get the last (most recently set) value for a given keyword.
       bool <b>isKey</b> (const char *sym)
           Find if a given key exists.
       const char * <b>getString</b> (const char *sym, const char *def=NULL)
           Get a string value, with an optional default if missing.
       long <b>getLong</b> (const char *sym, long def=0)
           Get a long value, with an optional default if missing.
       bool <b>getBool</b> (const char *key)
           Get a bool value.
       double <b>getDouble</b> (const char *key, double def=0.)
           Get a floating value.
       unsigned <b>getIndex</b> (char **data, unsigned max)
           Get an index array of ALL keywords that are stored by the current keydata object.
       unsigned <b>getCount</b> (void)
           Get the count of keyword indexes that are actually available so one can allocate a table to receive
           getIndex.
       void <b>setValue</b> (const char *sym, const char *data)
           Set (replace) the value of a given keyword.
       const char *const  * <b>getList</b> (const char *sym)
           Return a list of all values set for the given keyword returned in order.
       void <b>clrValue</b> (const char *sym)
           Clear all values associated with a given keyword.
       const char * <b>operator[]</b> (const char *keyword)
           A convient notation for accessing the keydata as an associative array of keyword/value pairs through
           the [] operator.

   <b>Static</b> <b>Public</b> <b>Member</b> <b>Functions</b>
       static void <b>end</b> (void)
           static member to end keydata i/o allocations.

   <b>Protected</b> <b>Member</b> <b>Functions</b>
       <b>Keysym</b> * <b>getSymbol</b> (const char *sym, bool create)

   <b>Friends</b>
       void <b>endKeydata</b> (void)
           Shutdown the file stream cache.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       <b>Keydata</b> objects are used to load and hold 'configuration' data for a given application.

       This class is used to load and then hold '&lt;code&gt;keyword = value&lt;/code&gt;' pairs parsed from a text based
       'config' file that has been divided into '&lt;code&gt;[sections]&lt;/code&gt;'. The syntax is:

       [section_name]
       key1=value1
       key2=value2

       Essentially, the 'path' is a 'keypath' into a theoretical namespace of key pairs, hence one does not use
       'real' filepaths that may be OS dependent. The '&lt;code&gt;/&lt;/code&gt;' path refers to '&lt;code&gt;<a href="file:/etc">/etc</a>&lt;/code&gt;'
       prefixed (on UNIX) directories and this is processed within the constructor. It could refer to the
       /config prefix on QNX, or even, gasp, a '&lt;code&gt;C:\WINDOWS&lt;/code&gt;'. Hence, a keypath of
       '&lt;code&gt;/bayonne.d/vmhost/smtp&lt;/code&gt;' actually resolves to a '&lt;code&gt;/etc/bayonne.d/vmhost.conf&lt;/code&gt;'
       and loads key value pairs from the [smtp] section of that .conf file.

       Similarly, something like '&lt;code&gt;~bayonne/smtp&lt;/code&gt;' path refers to a '&lt;code&gt;<a href="file:~/.bayonnerc">~/.bayonnerc</a>&lt;/code&gt;' and
       loads key pairs from the [smtp] section. This coercion occurs before the name is passed to the open call.

       I actually use derived keydata based classes as global initialized objects, and they hence automatically
       load and parse config file entries even before 'main' has started.

       <b>Keydata</b> can hold multiple values for the same key pair. This can occur either from storing a 'list' of
       data items in a config file, or when overlaying multiple config sources (such as /etc/....conf and
       <a href="file:~/.confrc">~/.confrc</a> segments) into a single object. The keys are stored as cumulative (read-only/replacable) config
       values under a hash index system for quick retrieval.

       <b>Keydata</b> can also load a table of 'initialization' values for keyword pairs that were not found in the
       external file.

       One typically derives an application specific keydata class to load a specific portion of a known config
       file and initialize it's values. One can then declare a global instance of these objects and have
       configuration data initialized automatically as the executable is loaded.

       Hence, if I have a '[paths]' section in a '&lt;code&gt;/etc/server.conf?&lt;/code&gt;' file, I might define something
       like:

       class KeyPaths : public <b>Keydata</b>
       {
         public:
           KeyPaths() : <b>Keydata</b>('/server/paths')
           {
             static <b>Keydata::Define</b> *defvalues = {
          {'datafiles', '/var/server'},
          {NULL, NULL}};

             // override with [paths] from '<a href="file:~/.serverrc">~/.serverrc</a>' if avail.

             load('~server/paths');
             load(defvalues);
           }
       };

       KeyPaths keypaths;

       <b>Author</b>
           David Sugar <a href="mailto:dyfet@ostel.com">dyfet@ostel.com</a>

       load text configuration files into keyword pairs.

</pre><h4><b>Constructor</b> <b>&amp;</b> <b>Destructor</b> <b>Documentation</b></h4><pre>
   <b>ost::Keydata::Keydata</b> <b>()</b>
       Create an empty key data object.

   <b>ost::Keydata::Keydata</b> <b>(const</b> <b>char</b> <b>*</b> <b>keypath)</b>
       Create a new key data object and use 'Load' method to load an initial config file section into it.

       <b>Parameters</b>
           <u>keypath</u> (filepath/section) specifies the home path.

   <b>ost::Keydata::Keydata</b> <b>(Define</b> <b>*</b> <b>pairs,</b> <b>const</b> <b>char</b> <b>*</b> <b>keypath</b> <b>=</b> <b>NULL)</b>
       Alternate constructor can take a define list and an optional pathfile to parse.

       <b>Parameters</b>
           <u>pairs</u> of keyword values from a define list
           <u>keypath</u> of optional file and section to load from

   <b>virtual</b> <b>ost::Keydata::~Keydata</b> <b>()</b> <b>[virtual]</b>
       Destroy the keydata object and all allocated memory. This may also clear the 'cache' file stream if no
       other keydata objects currently reference it.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>ost::Keydata::clrValue</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym)</b>
       Clear all values associated with a given keyword. This does not de-allocate the keyword from memory,
       however.

       <b>Returns</b>
           keyword name to clear.

   <b>static</b> <b>void</b> <b>ost::Keydata::end</b> <b>(void)</b> <b>[static]</b>
       static member to end keydata i/o allocations.

       Referenced by ost::endKeydata().

   <b>bool</b> <b>ost::Keydata::getBool</b> <b>(const</b> <b>char</b> <b>*</b> <b>key)</b>
       Get a bool value.

       <b>Parameters</b>
           <u>sym</u> keyword name.

       <b>Returns</b>
           true or false.

   <b>int</b> <b>ost::Keydata::getCount</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym)</b>
       Get a count of the number of data 'values' that is associated with a specific keyword. Each value is from
       an accumulation of '&lt;code&gt;load()&lt;/code&gt;' requests.

       <b>Parameters</b>
           <u>sym</u> keyword symbol name.

       <b>Returns</b>
           count of values associated with keyword.

   <b>unsigned</b> <b>ost::Keydata::getCount</b> <b>(void)</b>
       Get the count of keyword indexes that are actually available so one can allocate a table to receive
       getIndex.

       <b>Returns</b>
           number of keywords found.

   <b>double</b> <b>ost::Keydata::getDouble</b> <b>(const</b> <b>char</b> <b>*</b> <b>key,</b> <b>double</b> <b>def</b> <b>=</b> <b>0.)</b>
       Get a floating value.

       <b>Parameters</b>
           <u>sym</u> keyword name.
           <u>default</u> if not set.

       <b>Returns</b>
           value of key.

   <b>const</b> <b>char*</b> <b>ost::Keydata::getFirst</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym)</b>
       Get the first data value for a given keyword. This will typically be the <a href="file:/etc">/etc</a> set global default.

       <b>Parameters</b>
           <u>sym</u> keyword symbol name.

       <b>Returns</b>
           first set value for this symbol.

   <b>unsigned</b> <b>ost::Keydata::getIndex</b> <b>(char</b> <b>**</b> <b>data,</b> <b>unsigned</b> <b>max)</b>
       Get an index array of ALL keywords that are stored by the current keydata object.

       <b>Returns</b>
           number of keywords found.

       <b>Parameters</b>
           <u>data</u> pointer of array to hold keyword strings.
           <u>max</u> number of entries the array can hold.

   <b>const</b> <b>char*</b> <b>ost::Keydata::getLast</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym)</b>
       Get the last (most recently set) value for a given keyword. This is typically the value actually used.

       <b>Parameters</b>
           <u>sym</u> keyword symbol name.

       <b>Returns</b>
           last set value for this symbol.

   <b>const</b> <b>char*</b> <b>const*</b> <b>ost::Keydata::getList</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym)</b>
       Return a list of all values set for the given keyword returned in order.

       <b>Returns</b>
           list pointer of array holding all keyword values.

       <b>Parameters</b>
           <u>sym</u> keyword name to fetch.

   <b>long</b> <b>ost::Keydata::getLong</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym,</b> <b>long</b> <b>def</b> <b>=</b> <b>0)</b>
       Get a long value, with an optional default if missing.

       <b>Parameters</b>
           <u>sym</u> keyword name.
           <u>default</u> if not present.

       <b>Returns</b>
           long value of key.

   <b>const</b> <b>char*</b> <b>ost::Keydata::getString</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym,</b> <b>const</b> <b>char</b> <b>*</b> <b>def</b> <b>=</b> <b>NULL)</b>
       Get a string value, with an optional default if missing.

       <b>Parameters</b>
           <u>sym</u> keyword name.
           <u>default</u> if not present.

       <b>Returns</b>
           string value of key.

   <b>Keysym*</b> <b>ost::Keydata::getSymbol</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym,</b> <b>bool</b> <b>create)</b> <b>[protected]</b>
   <b>bool</b> <b>ost::Keydata::isKey</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym)</b>
       Find if a given key exists.

       <b>Parameters</b>
           <u>sym</u> keyword to find.

       <b>Returns</b>
           true if exists.

   <b>void</b> <b>ost::Keydata::load</b> <b>(const</b> <b>char</b> <b>*</b> <b>keypath)</b>
       Load additional key values into the currrent object from the specfied config source (a config
       file/section pair). These values will overlay the current keywords when matches are found. This can be
       used typically in a derived config object class constructor to first load a <a href="file:/etc">/etc</a> section, and then load a
       matching user specific entry from <a href="file:~/.">~/.</a> to override default system values with user specific keyword
       values.

       <b>Parameters</b>
           <u>keypath</u> (filepath/section)

   <b>void</b> <b>ost::Keydata::load</b> <b>(Define</b> <b>*</b> <b>pairs)</b>
       Load default keywords into the current object. This only loads keyword entries which have not already
       been defined to reduce memory usage. This form of Load is also commonly used in the constructor of a
       derived <b>Keydata</b> class.

       <b>Parameters</b>
           <u>pairs</u> list of NULL terminated default keyword/value pairs.

   <b>void</b> <b>ost::Keydata::loadFile</b> <b>(const</b> <b>char</b> <b>*</b> <b>filepath,</b> <b>const</b> <b>char</b> <b>*</b> <b>keys</b> <b>=</b> <b>NULL,</b> <b>const</b> <b>char</b> <b>*</b> <b>pre</b> <b>=</b> <b>NULL)</b>
       Load additional keys into the current object using a real filename that is directly passed rather than a
       computed key path. This also uses a [keys] section as passed to the object.

       <b>Parameters</b>
           <u>filepath</u> to load from
           <u>keys</u> section to parse from, or NULL to parse from head
           <u>pre</u> optional key prefix

   <b>void</b> <b>ost::Keydata::loadPrefix</b> <b>(const</b> <b>char</b> <b>*</b> <b>prefix,</b> <b>const</b> <b>char</b> <b>*</b> <b>keypath)</b>
       Load additional key values into the currrent object from the specfied config source (a config
       file/section pair). These values will overlay the current keywords when matches are found. This can be
       used typically in a derived config object class constructor to first load a <a href="file:/etc">/etc</a> section, and then load a
       matching user specific entry from <a href="file:~/.">~/.</a> to override default system values with user specific keyword
       values. This varient puts a prefix in front of the key name.

       <b>Parameters</b>
           <u>prefix</u>
           <u>keypath</u> (filepath/section)

   <b>const</b> <b>char*</b> <b>ost::Keydata::operator[]</b> <b>(const</b> <b>char</b> <b>*</b> <b>keyword)</b> <b>[inline]</b>
       A convient notation for accessing the keydata as an associative array of keyword/value pairs through the
       [] operator.

   <b>void</b> <b>ost::Keydata::setValue</b> <b>(const</b> <b>char</b> <b>*</b> <b>sym,</b> <b>const</b> <b>char</b> <b>*</b> <b>data)</b>
       Set (replace) the value of a given keyword. This new value will become the value returned from <b>getLast()</b>,
       while the prior value will still be stored and found from <b>getList().</b>

       <b>Parameters</b>
           <u>sym</u> keyword name to set.
           <u>data</u> string to store for the keyword.

   <b>void</b> <b>ost::Keydata::unlink</b> <b>(void)</b>
       Unlink the keydata object from the cache file stream. This should be used if you plan to keepa <b>Keydata</b>
       object after it is loaded once all keydata objects have been loaded, otherwise the cfgFile stream will
       remain open. You can also use <b>endKeydata()</b>.

</pre><h4><b>Friends</b> <b>And</b> <b>Related</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>endKeydata</b> <b>(void)</b> <b>[friend]</b>
       Shutdown the file stream cache. This should be used before detaching a deamon, exec(), fork(), etc.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for GNU CommonC++ from the source code.

GNU CommonC++                                    Sun Dec 27 2020                                 <u>ost::<a href="../man3/Keydata.3.html">Keydata</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>