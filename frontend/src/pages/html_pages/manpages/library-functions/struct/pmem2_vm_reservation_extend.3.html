<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmem2_vm_reservation_extend(), pmem2_vm_reservation_shrink() - extends and shrinks existing virtual memo‐</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpmem2-dev">libpmem2-dev_1.13.1-1.1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmem2_vm_reservation_extend</b>(), <b>pmem2_vm_reservation_shrink</b>() - extends and shrinks existing virtual memo‐
       ry reservation

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;libpmem2.h&gt;

              struct pmem2_vm_reservation;
              int pmem2_vm_reservation_extend(struct pmem2_vm_reservation *rsv, size_t size);
              int pmem2_vm_reservation_shrink(struct pmem2_vm_reservation *rsv, size_t offset,
                      size_t size);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>pmem2_vm_reservation_extend</b>()  function  extends an existing virtual memory reservation by the given
       <u>size</u>.  For the function to succeed the size has to be aligned to an appropriate allocation granularity.

       If the <b>pmem2_vm_reservation_extend</b>() succeeds in extending a reservation, it provides placeholder virtual
       memory range that starts from an address at the end of the old reservation.  Mappings made to the  reser‐
       vation before extending are preserved.

       The  <b>pmem2_vm_reservation_shrink</b>()  function shrinks the reservation by a region specified by <u>offset</u> into
       the reservation and the <u>size</u>.  For the function to succeed the <u>size</u>  and  <u>offset</u>  variables  have  to  be
       aligned  to an appropriate allocation granularity.  The region formed by <u>offset</u> and <u>size</u> has to belong to
       the reservation, be empty and it needs to cover the beginning or the end of the  reservation.   Shrinking
       reservation from the middle or shrinking the whole reservation is not supported.

       If the <b>pmem2_vm_reservation_shrink</b>() succeeds in shrinking a reservation, it releases placeholder virtual
       memory  range  that was designated by <u>offset</u> and <u>size</u> variables.  Mappings made to the reservation before
       shrinking are preserved.

       If either of those functions fails, reservation will be left as it was and appropriate error  value  will
       be returned.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The  <b>pmem2_vm_reservation_extend</b>()  and  <b>pmem2_vm_reservation_shrink</b>() functions return 0 on success or a
       negative error code on failure.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>pmem2_vm_reservation_extend</b>() function can fail with the following errors:

       • <b>PMEM2_E_MAPPING_EXISTS</b> - the range that the reservation would be extended by is already occupied by  an
         existing mapping.

       It can also return <b>-EAGAIN</b>, <b>-ENOMEM</b> from the underlying <b><a href="../man2/mmap.2.html">mmap</a></b>(2) function.

       The <b>pmem2_vm_reservation_shrink</b>() function can fail with the following errors:

       • <b>PMEM2_E_OFFSET_UNALIGNED</b> - provided offset isn’t aligned to an appropriate allocation granularity.

       • <b>PMEM2_E_LENGTH_UNALIGNED</b> - provided size isn’t aligned to an appropriate allocation granularity.

       • <b>PMEM2_E_OFFSET_OUT_OF_RANGE</b> - provided offset is out of reservation range available to be shrunk.

       • <b>PMEM2_E_LENGTH_OUT_OF_RANGE</b> - provided size is out of reservation range available to be shrunk.

       • <b>PMEM2_E_NOSUPP</b>  -  interval designated by <u>offset</u> and <u>size</u> variables covers only the middle or the whole
         reservation range.

       • <b>PMEM2_VM_RESERVATION_NOT_EMPTY</b> - interval designated by <u>offset</u> and <u>size</u> variable is not empty.

       It can also return <b>-EAGAIN</b> and <b>-ENOMEM</b> from the underlying <b><a href="../man2/munmap.2.html">munmap</a></b>(2) function.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/pmem2_vm_reservation_new.3.html">pmem2_vm_reservation_new</a></b>(3), <b><a href="../man3/pmem2_config_set_vm_reservation.3.html">pmem2_config_set_vm_reservation</a></b>(3), <b><a href="../man7/libpmem2.7.html">libpmem2</a></b>(7) and <b>&lt;https://pmem.io&gt;</b>
</pre>
 </div>
</div></section>
</div>
</body>
</html>