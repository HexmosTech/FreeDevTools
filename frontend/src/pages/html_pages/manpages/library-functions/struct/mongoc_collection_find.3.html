<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deprecated since version 1.5.0: Use mongoc_collection_find_with_opts() instead.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongoc-doc">libmongoc-doc_1.30.4-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>WARNING:</b></h4><pre>
          Deprecated since version 1.5.0: Use <u>mongoc_collection_find_with_opts()</u> instead.

</pre><h4><b>SYNOPSIS</b></h4><pre>
          mongoc_cursor_t *
          mongoc_collection_find (mongoc_collection_t *collection,
                                  mongoc_query_flags_t flags,
                                  uint32_t skip,
                                  uint32_t limit,
                                  uint32_t batch_size,
                                  const bson_t *query,
                                  const bson_t *fields,
                                  const mongoc_read_prefs_t *read_prefs);

</pre><h4><b>PARAMETERS</b></h4><pre>
       • <b>collection</b>: A <u>mongoc_collection_t</u>.

       • <b>flags</b>: A <u>mongoc_query_flags_t</u>.

       • <b>skip</b>: A uint32_t of number of documents to skip or 0.

       • <b>limit</b>: A uint32_t of max number of documents to return or 0.

       • <b>batch_size</b>: A uint32_t containing batch size of document result sets or 0 for default. Default is 100.

       • <b>query</b>: A <u>bson_t</u> containing the query and options to execute.

       • <b>fields</b>: A <u>bson_t</u> containing fields to return or <b>NULL</b>.

       • <b>read_prefs</b>: A <u>mongoc_read_prefs_t</u> or <b>NULL</b> for default read preferences.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This function shall execute a query on the underlying <b>collection</b>.

       If no options are necessary, <b>query</b> can simply contain a query such as <b>{a:1}</b>. If you would like to specify
       options  such  as  a sort order, the query must be placed inside of <b>{"$query":</b> <b>{}}</b>. See the example below
       for how to properly specify additional options to <b>query</b>.

       This function is considered a retryable read operation.  Upon a transient error (a network error,  errors
       due  to  replica set failover, etc.) the operation is safely retried once.  If <b>retryreads</b> is false in the
       URI (see <u>mongoc_uri_t</u>) the retry behavior does not apply.

</pre><h4><b>RETURNS</b></h4><pre>
       This function returns a newly allocated <u>mongoc_cursor_t</u> that should be freed with <u>mongoc_cursor_destroy()</u>
       when no longer in use. The returned <u>mongoc_cursor_t</u> is never <b>NULL</b>, even on  error.  The  user  must  call
       <u>mongoc_cursor_next()</u> on the returned <u>mongoc_cursor_t</u> to execute the initial command.

       Cursor errors can be checked with <u>mongoc_cursor_error_document()</u>. It always fills out the <u>bson_error_t</u> if
       an error occurred, and optionally includes a server reply document if the error occurred server-side.

       <b>WARNING:</b>
          Failure to handle the result of this function is a programming error.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Print All Documents in a Collection

          #include &lt;bson/bson.h&gt;
          #include &lt;mongoc/mongoc.h&gt;
          #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;

          static void
          print_all_documents (mongoc_collection_t *collection)
          {
             mongoc_cursor_t *cursor;
             bson_error_t error;
             const bson_t *doc;
             char *str;
             bson_t *query;

             query = BCON_NEW ("$query",
                               "{",
                               "foo",
                               BCON_INT32 (1),
                               "}",
                               "$orderby",
                               "{",
                               "bar",
                               BCON_INT32 (-1),
                               "}");
             cursor = mongoc_collection_find (
                collection, MONGOC_QUERY_NONE, 0, 0, 0, query, NULL, NULL);

             while (mongoc_cursor_next (cursor, &amp;doc)) {
                str = bson_as_canonical_extended_json (doc, NULL);
                printf ("%s\n", str);
                bson_free (str);
             }

             if (mongoc_cursor_error (cursor, &amp;error)) {
                fprintf (stderr, "An error occurred: %s\n", error.message);
             }

             mongoc_cursor_destroy (cursor);
             bson_destroy (query);
          }

</pre><h4><b>THE</b> <b>FIND</b> <b>COMMAND</b></h4><pre>
       Queries  have  historically  been  sent  as OP_QUERY wire protocol messages, but beginning in MongoDB 3.2
       queries use <u>the</u> <u>"find"</u> <u>command</u> instead.

       The driver automatically converts queries to the new "find" command syntax if needed, so this  change  is
       typically  invisible  to  C Driver users. However, an application written exclusively for MongoDB 3.2 and
       later can choose to use the new syntax directly instead of relying on the driver to convert from the  old
       syntax:

          /* MongoDB 3.2+ "find" command syntax */
          query = BCON_NEW ("filter",
                            "{",
                            "foo",
                            BCON_INT32 (1),
                            "}",
                            "sort",
                            "{",
                            "bar",
                            BCON_INT32 (-1),
                            "}");
          cursor = mongoc_collection_find (
             collection, MONGOC_QUERY_NONE, 0, 0, 0, query, NULL, NULL);

       The "find" command takes different options from the traditional OP_QUERY message.
                              ┌──────────────────────┬────────────────┬───────────────┐
                              │ Query                │ <b>$query</b>         │ <b>filter</b>        │
                              ├──────────────────────┼────────────────┼───────────────┤
                              │ Sort                 │ <b>$orderby</b>       │ <b>sort</b>          │
                              ├──────────────────────┼────────────────┼───────────────┤
                              │ Show record location │ <b>$showDiskLoc</b>   │ <b>showRecordId</b>  │
                              ├──────────────────────┼────────────────┼───────────────┤
                              │ Other $-options      │ <b>$&lt;option</b> <b>name&gt;</b> │ <b>&lt;option</b> <b>name&gt;</b> │
                              └──────────────────────┴────────────────┴───────────────┘

       Most  applications  should use the OP_QUERY syntax, with "$query", "$orderby", and so on, and rely on the
       driver to convert to the new syntax if needed.

       <b>SEE</b> <b>ALSO:</b>
          <u>The</u> <u>"find"</u> <u>command</u> in the MongoDB Manual.

</pre><h4><b>THE</b> <b>EXPLAIN</b> <b>COMMAND</b></h4><pre>
       With MongoDB before 3.2, a query with option <b>$explain:</b> <b>true</b> returns information  about  the  query  plan,
       instead of the query results. Beginning in MongoDB 3.2, there is a separate "explain" command. The driver
       will  not  convert  "$explain"  queries  to  "explain"  commands,  you  must  call  the "explain" command
       explicitly:

          /* MongoDB 3.2+, "explain" command syntax */
          command = BCON_NEW ("explain",
                              "{",
                              "find",
                              BCON_UTF8 ("collection_name"),
                              "filter",
                              "{",
                              "foo",
                              BCON_INT32 (1),
                              "}",
                              "}");
          mongoc_collection_command_simple (collection, command, NULL, &amp;reply, &amp;error);

       <b>SEE</b> <b>ALSO:</b>
          <u>The</u> <u>"explain"</u> <u>command</u> in the MongoDB Manual.

</pre><h4><b>AUTHOR</b></h4><pre>
       MongoDB, Inc

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2009-present, MongoDB, Inc.

1.30.4                                            Jun 08, 2025                         <u><a href="../man3/MONGOC_COLLECTION_FIND.3.html">MONGOC_COLLECTION_FIND</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>