<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_fbarray.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_fbarray.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;rte_rwlock.h&gt;

   <b>Functions</b>
       int <b>rte_fbarray_init</b> (struct rte_fbarray *arr, const char *name, unsigned int len, unsigned int elt_sz)
       int <b>rte_fbarray_attach</b> (struct rte_fbarray *arr)
       int <b>rte_fbarray_destroy</b> (struct rte_fbarray *arr)
       int <b>rte_fbarray_detach</b> (struct rte_fbarray *arr)
       void * <b>rte_fbarray_get</b> (const struct rte_fbarray *arr, unsigned int idx)
       int <b>rte_fbarray_find_idx</b> (const struct rte_fbarray *arr, const void *elt)
       int <b>rte_fbarray_set_used</b> (struct rte_fbarray *arr, unsigned int idx)
       int <b>rte_fbarray_set_free</b> (struct rte_fbarray *arr, unsigned int idx)
       int <b>rte_fbarray_is_used</b> (struct rte_fbarray *arr, unsigned int idx)
       int <b>rte_fbarray_find_next_free</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_next_used</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_next_n_free</b> (struct rte_fbarray *arr, unsigned int start, unsigned int n)
       int <b>rte_fbarray_find_next_n_used</b> (struct rte_fbarray *arr, unsigned int start, unsigned int n)
       int <b>rte_fbarray_find_contig_free</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_contig_used</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_prev_free</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_prev_used</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_prev_n_free</b> (struct rte_fbarray *arr, unsigned int start, unsigned int n)
       int <b>rte_fbarray_find_prev_n_used</b> (struct rte_fbarray *arr, unsigned int start, unsigned int n)
       int <b>rte_fbarray_find_rev_contig_free</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_rev_contig_used</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_biggest_free</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_biggest_used</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_rev_biggest_free</b> (struct rte_fbarray *arr, unsigned int start)
       int <b>rte_fbarray_find_rev_biggest_used</b> (struct rte_fbarray *arr, unsigned int start)
       void <b>rte_fbarray_dump_metadata</b> (struct rte_fbarray *arr, FILE *f)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       File-backed shared indexed array for DPDK.

       Basic workflow is expected to be the following: 1) Allocate array either using <b>rte_fbarray_init()</b> <b>or</b>
       <b>rte_fbarray_attach()</b> <b>(depending</b> <b>on</b> <b>whether</b> <b>it's</b> <b>shared</b> <b>between</b> <b>multiple</b> <b>DPDK</b> <b>processes)</b> <b>2)</b> <b>find</b> <b>free</b>
       <b>spots</b> <b>using</b> <b>rte_fbarray_find_next_free()</b> <b>3)</b> <b>get</b> <b>pointer</b> <b>to</b> <b>data</b> <b>in</b> <b>the</b> <b>free</b> <b>spot</b> <b>using</b> <b>rte_fbarray_get(),</b>
       <b>and</b> <b>copy</b> <b>data</b> <b>into</b> <b>the</b> <b>pointer</b> <b>(element</b> <b>size</b> <b>is</b> <b>fixed)</b> <b>4)</b> <b>mark</b> <b>entry</b> <b>as</b> <b>used</b> <b>using</b> <b>rte_fbarray_set_used()</b>

       Calls to <b>rte_fbarray_init()</b> <b>and</b> <b>rte_fbarray_destroy()</b> <b>will</b> <b>have</b> <b>consequences</b> <b>for</b> <b>all</b> <b>processes,</b> <b>while</b>
       <b>calls</b> <b>to</b> <b>rte_fbarray_attach()</b> <b>and</b> <b>rte_fbarray_detach()</b> <b>will</b> <b>only</b> <b>have</b> <b>consequences</b> <b>within</b> <b>a</b> <b>single</b>
       <b>process.</b> <b>Therefore,</b> <b>it</b> <b>is</b> <b>safe</b> <b>to</b> <b>call</b> <b>rte_fbarray_attach()</b> <b>or</b> <b>rte_fbarray_detach()</b> <b>while</b> <b>another</b> <b>process</b>
       <b>is</b> <b>using</b> <b>rte_fbarray,</b> <b>provided</b> <b>no</b> <b>other</b> <b>thread</b> <b>within</b> <b>the</b> <b>same</b> <b>process</b> <b>will</b> <b>try</b> <b>to</b> <b>use</b> <b>rte_fbarray</b> <b>before</b>
       <b>attaching</b> <b>or</b> <b>after</b> <b>detaching.</b> <b>It</b> <b>is</b> <b>not</b> <b>safe</b> <b>to</b> <b>call</b> <b>rte_fbarray_init()</b> <b>or</b> <b>rte_fbarray_destroy()</b> <b>while</b>
       <b>another</b> <b>thread</b> <b>or</b> <b>another</b> <b>process</b> <b>is</b> <b>using</b> <b>rte_fbarray.</b>

       Definition in file <b>rte_fbarray.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>rte_fbarray_init</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>const</b> <b>char</b> <b>*</b> <b>name,</b> <b>unsigned</b> <b>int</b> <b>len,</b> <b>unsigned</b> <b>int</b> <b>elt_sz)</b>
       Set up rte_fbarray structure and allocate underlying resources.

       Call this function to correctly set up rte_fbarray and allocate underlying files that will be backing the
       data in the current process. Note that in order to use and share rte_fbarray between multiple processes,
       data pointed to by arr pointer must itself be allocated in shared memory.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated rte_fbarray structure.
           <u>name</u> Unique name to be assigned to this array.
           <u>len</u> Number of elements initially available in the array.
           <u>elt_sz</u> Size of each element.

       <b>Returns</b>

           • 0 on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_attach</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr)</b>
       Attach to a file backing an already allocated and correctly set up rte_fbarray structure.

       Call  this function to attach to file that will be backing the data in the current process. The structure
       must  have  been  previously  correctly  set  up  with   a   call   to   <b>rte_fbarray_init().</b>   <b>Calls</b>   <b>to</b>
       <b>rte_fbarray_attach()</b>  <b>are</b>  <b>usually</b> <b>meant</b> <b>to</b> <b>be</b> <b>performed</b> <b>in</b> <b>a</b> <b>multiprocessing</b> <b>scenario,</b> <b>with</b> <b>data</b> <b>pointed</b>
       <b>to</b> <b>by</b> <b>arr</b> <b>pointer</b> <b>allocated</b> <b>in</b> <b>shared</b> <b>memory.</b>

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.

       <b>Returns</b>

           • 0 on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_destroy</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr)</b>
       Deallocate resources for an already allocated and correctly set up rte_fbarray structure, and remove  the
       underlying file.

       Call  this  function  to  deallocate  all  resources  associated with an rte_fbarray structure within the
       current process. This will also zero-fill data pointed to by arr pointer and remove the  underlying  file
       backing  the  data,  so it is expected that by the time this function is called, all other processes have
       detached from this rte_fbarray.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.

       <b>Returns</b>

           • 0 on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_detach</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr)</b>
       Deallocate resources for an already allocated and correctly set up rte_fbarray structure.

       Call this function to deallocate all resources associated with an rte_fbarray  structure  within  current
       process.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.

       <b>Returns</b>

           • 0 on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>void</b> <b>*</b> <b>rte_fbarray_get</b> <b>(const</b> <b>struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>idx)</b>
       Get pointer to element residing at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>idx</u> Index of an element to get a pointer to.

       <b>Returns</b>

           • non-NULL pointer on success.

           • NULL on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_idx</b> <b>(const</b> <b>struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>const</b> <b>void</b> <b>*</b> <b>elt)</b>
       Find index of a specified element within the array.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>elt</u> Pointer to element to find index to.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_set_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>idx)</b>
       Mark specified element as used.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>idx</u> Element index to mark as used.

       <b>Returns</b>

           • 0 on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_set_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>idx)</b>
       Mark specified element as free.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>idx</u> Element index to mark as free.

       <b>Returns</b>

           • 0 on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_is_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>idx)</b>
       Check whether element at specified index is marked as used.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>idx</u> Element index to check as used.

       <b>Returns</b>

           • 1 if element is used.

           • 0 if element is unused.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_next_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find index of next free element, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_next_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find index of next used element, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_next_n_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start,</b> <b>unsigned</b> <b>int</b> <b>n)</b>
       Find index of next chunk of n free elements, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.
           <u>n</u> Number of free elements to look for.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_next_n_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start,</b> <b>unsigned</b> <b>int</b> <b>n)</b>
       Find index of next chunk of n used elements, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.
           <u>n</u> Number of used elements to look for.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_contig_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find how many more free entries there are, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_contig_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find how many more used entries there are, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_prev_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find index of previous free element, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_prev_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find index of previous used element, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_prev_n_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start,</b> <b>unsigned</b> <b>int</b> <b>n)</b>
       Find lowest start index of chunk of n free elements, down from specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.
           <u>n</u> Number of free elements to look for.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_prev_n_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start,</b> <b>unsigned</b> <b>int</b> <b>n)</b>
       Find lowest start index of chunk of n used elements, down from specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.
           <u>n</u> Number of used elements to look for.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_rev_contig_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find  how  many more free entries there are before specified index (like rte_fbarray_find_contig_free but
       going in reverse).

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_rev_contig_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find how many more used entries there are before specified index (like  rte_fbarray_find_contig_used  but
       going in reverse).

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_biggest_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find index of biggest chunk of free elements, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_biggest_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find index of biggest chunk of used elements, starting at specified index.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_rev_biggest_free</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find    index    of    biggest    chunk    of    free   elements   before   a   specified   index   (like
       rte_fbarray_find_biggest_free, but going in reverse).

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>int</b> <b>rte_fbarray_find_rev_biggest_used</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>unsigned</b> <b>int</b> <b>start)</b>
       Find   index   of   biggest   chunk   of   used    elements    before    a    specified    index    (like
       rte_fbarray_find_biggest_used, but going in reverse).

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>start</u> Element index to start search from.

       <b>Returns</b>

           • non-negative integer on success.

           • -1 on failure, with rte_errno indicating reason for failure.

   <b>void</b> <b>rte_fbarray_dump_metadata</b> <b>(struct</b> <b>rte_fbarray</b> <b>*</b> <b>arr,</b> <b>FILE</b> <b>*</b> <b>f)</b>
       Dump rte_fbarray metadata.

       <b>Parameters</b>
           <u>arr</u> Valid pointer to allocated and correctly set up rte_fbarray structure.
           <u>f</u> File object to dump information into.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                <u><a href="../man3/rte_fbarray.h.3.html">rte_fbarray.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>