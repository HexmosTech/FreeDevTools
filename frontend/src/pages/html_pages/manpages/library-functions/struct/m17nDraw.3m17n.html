<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>m17nDraw_-_Dra -  - Drawing M-texts on a window.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/m17n-docs">m17n-docs_1.8.4-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       m17nDraw_-_Dra -  - Drawing M-texts on a window.

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Data</b> <b>Structures</b>
       struct <b>MDrawControl</b>
           Type of a text drawing control.
       struct <b>MDrawMetric</b>
           Type of metric for glyphs and texts.
       struct <b>MDrawGlyphInfo</b>
           Type of information about a glyph.
       struct <b>MDrawGlyph</b>
           Type of information about a glyph metric and font.

   <b>Typedefs</b>
       typedef void * <b>MDrawWindow</b>
           Window system dependent type for a window.
       typedef void * <b>MDrawRegion</b>
           Window system dependent type for a region.

   <b>Functions</b>
       int <b>mdraw_text</b> (<b>MFrame</b> *frame, <b>MDrawWindow</b> win, int x, int y, <b>MText</b> *mt, int from, int to)
           Draw an M-text on a window.
       int <b>mdraw_image_text</b> (<b>MFrame</b> *frame, <b>MDrawWindow</b> win, int x, int y, <b>MText</b> *mt, int from, int to)
           Draw an M-text on a window as an image.
       int <b>mdraw_text_with_control</b> (<b>MFrame</b> *frame, <b>MDrawWindow</b> win, int x, int y, <b>MText</b> *mt, int from, int to,
           <b>MDrawControl</b> *control)
           Draw an M-text on a window with fine control.
       int <b>mdraw_text_extents</b> (<b>MFrame</b> *frame, <b>MText</b> *mt, int from, int to, <b>MDrawControl</b> *control, <b>MDrawMetric</b>
           *overall_ink_return, <b>MDrawMetric</b> *overall_logical_return, <b>MDrawMetric</b> *overall_line_return)
           Compute text pixel width.
       int <b>mdraw_text_per_char_extents</b> (<b>MFrame</b> *frame, <b>MText</b> *mt, int from, int to, <b>MDrawControl</b> *control,
           <b>MDrawMetric</b> *ink_array_return, <b>MDrawMetric</b> *logical_array_return, int array_size, int
           *num_chars_return, <b>MDrawMetric</b> *overall_ink_return, <b>MDrawMetric</b> *overall_logical_return)
           Compute the text dimensions of each character of M-text.
       int <b>mdraw_coordinates_position</b> (<b>MFrame</b> *frame, <b>MText</b> *mt, int from, int to, int x_offset, int y_offset,
           <b>MDrawControl</b> *control)
           Return the character position nearest to the coordinates.
       int <b>mdraw_glyph_info</b> (<b>MFrame</b> *frame, <b>MText</b> *mt, int from, int pos, <b>MDrawControl</b> *control, <b>MDrawGlyphInfo</b>
           *info)
           Compute information about a glyph.
       int <b>mdraw_glyph_list</b> (<b>MFrame</b> *frame, <b>MText</b> *mt, int from, int to, <b>MDrawControl</b> *control, <b>MDrawGlyph</b>
           *glyphs, int array_size, int *num_glyphs_return)
           Compute information about glyph sequence.
       void <b>mdraw_text_items</b> (<b>MFrame</b> *frame, <b>MDrawWindow</b> win, int x, int y, <b>MDrawTextItem</b> *items, int nitems)
           Draw one or more textitems.
       int <b>mdraw_default_line_break</b> (<b>MText</b> *mt, int pos, int from, int to, int line, int y)
           Calculate a line breaking position.
       void <b>mdraw_per_char_extents</b> (<b>MFrame</b> *frame, <b>MText</b> *mt, <b>MDrawMetric</b> *array_return, <b>MDrawMetric</b>
           *overall_return)
           Obtain per character dimension information.
       void <b>mdraw_clear_cache</b> (<b>MText</b> *mt)
           clear cached information.
            "

   <b>Variables</b>
       int <b>mdraw_line_break_option</b>
           Option of line breaking for drawing text.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Drawing M-texts on a window.

       The m17n GUI API provides functions to draw M-texts.

       The fonts used for drawing are selected automatically based on the fontset and the properties of a face.
       A face also specifies the appearance of M-texts, i.e. font size, color, underline, etc.

       The drawing format of M-texts can be controlled in a variety of ways, which provides powerful
       2-dimensional layout facility.

</pre><h4><b>Data</b> <b>Structure</b> <b>Documentation</b></h4><pre>
   <b>MDrawControl</b>
       Type of a text drawing control.

       <b>FIELD</b> <b>DOCUMENTATION:</b>

       <b>unsigned</b> <b>MDrawControl::as_image</b> If nonzero, draw an M-text as image, i.e. with background filled with
       background colors of faces put on the M-text. Otherwise, the background is not changed.

       <b>unsigned</b> <b>MDrawControl::align_head</b> If nonzero and the first glyph of each line has negative lbearing,
       shift glyphs horizontally to right so that no pixel is drawn to the left of the specified position.

       <b>unsigned</b> <b>MDrawControl::two_dimensional</b> If nonzero, draw an M-text two-dimensionally, i.e., newlines in
       M-text breaks lines and the following characters are drawn in the next line. If &lt;format&gt; is non-NULL, and
       the function returns nonzero line width, a line longer than that width is also broken.

       <b>unsigned</b> <b>MDrawControl::orientation_reversed</b> If nonzero, draw an M-text to the right of a specified
       position.

       <b>unsigned</b> <b>MDrawControl::enable_bidi</b> If nonzero, reorder glyphs correctly for bidi text.

       <b>unsigned</b> <b>MDrawControl::ignore_formatting_char</b> If nonzero, don't draw characters whose general category
       (in Unicode) is Cf (Other, format).

       <b>unsigned</b> <b>MDrawControl::fixed_width</b> If nonzero, draw glyphs suitable for a terminal. Not yet implemented.

       <b>unsigned</b> <b>MDrawControl::anti_alias</b> If nonzero, draw glyphs with anti-aliasing if a backend font driver
       supports it.

       <b>unsigned</b> <b>MDrawControl::disable_overlapping_adjustment</b> If nonzero, disable the adjustment of glyph
       positions to avoid horizontal overlapping at font boundary.

       <b>unsigned</b> <b>int</b> <b>MDrawControl::min_line_ascent</b> If nonzero, the values are minimum line ascent pixels.

       <b>unsigned</b> <b>int</b> <b>MDrawControl::min_line_descent</b> If nonzero, the values are minimum line descent pixels.

       <b>unsigned</b> <b>int</b> <b>MDrawControl::max_line_ascent</b> If nonzero, the values are maximum line ascent pixels.

       <b>unsigned</b> <b>int</b> <b>MDrawControl::max_line_descent</b> If nonzero, the values are maximum line descent pixels.

       <b>unsigned</b> <b>int</b> <b>MDrawControl::max_line_width</b> If nonzero, the value specifies how many pixels each line can
       occupy on the display. The value zero means that there is no limit. It is ignored if &lt;format&gt; is
       non-NULL.

       <b>unsigned</b> <b>int</b> <b>MDrawControl::tab_width</b> If nonzero, the value specifies the distance between tab stops in
       columns (the width of one column is the width of a space in the default font of the frame). The value
       zero means

       8.

       <b>void(*</b>  <b>MDrawControl::format)</b>  <b>(int</b>  <b>line,</b>  <b>int</b>  <b>y,</b>  <b>int</b> <b>*indent,</b> <b>int</b> <b>*width)</b> If non-NULL, the value is a
       function that calculates the indentation and width limit of each line based on the line number  LINE  and
       the  coordinate  Y. The function store the indentation and width limit at the place pointed by INDENT and
       WIDTH respectively.

       The indentation specifies how many pixels the first glyph of each line is shifted to the  right  (if  the
       member &lt;orientation_reversed&gt; is zero) or to the left (otherwise). If the value is negative, each line is
       shifted to the reverse direction.

       The  width  limit  specifies  how many pixels each line can occupy on the display. The value 0 means that
       there is no limit.

       LINE and Y are reset to 0 when a line is broken by a newline character, and incremented each time when  a
       long line is broken because of the width limit.

       This has an effect only when &lt;two_dimensional&gt; is nonzero.

       <b>int(*</b>  <b>MDrawControl::line_break)</b> <b>(MText</b> <b>*mt,</b> <b>int</b> <b>pos,</b> <b>int</b> <b>from,</b> <b>int</b> <b>to,</b> <b>int</b> <b>line,</b> <b>int</b> <b>y)</b> <b>If</b> <b>non-NULL,</b> <b>the</b>
       <b>value</b> <b>is</b> <b>a</b> <b>function</b> <b>that</b> <b>calculates</b> <b>a</b> <b>line</b> <b>breaking</b> <b>position</b> <b>when</b> <b>a</b> <b>line</b> <b>is</b> <b>too</b> <b>long</b> <b>to</b>  <b>fit</b>  <b>within</b>  <b>the</b>
       <b>width</b>  <b>limit.</b>  <b>POS</b> <b>is</b> <b>the</b> <b>position</b> <b>of</b> <b>the</b> <b>character</b> <b>next</b> <b>to</b> <b>the</b> <b>last</b> <b>one</b> <b>that</b> <b>fits</b> <b>within</b> <b>the</b> <b>limit.</b> <b>FROM</b>
       <b>is</b> <b>the</b> <b>position</b> <b>of</b> <b>the</b> <b>first</b> <b>character</b> <b>of</b> <b>the</b> <b>line,</b>  <b>and</b>  <b>TO</b>  <b>is</b>  <b>the</b>  <b>position</b>  <b>of</b>  <b>the</b>  <b>last</b>  <b>character</b>
       <b>displayed</b>  <b>on</b>  <b>the</b>  <b>line</b>  <b>if</b>  <b>there</b>  <b>were</b>  <b>not</b>  <b>width</b>  <b>limit.</b> <b>LINE</b> <b>and</b> <b>Y</b> <b>are</b> <b>the</b> <b>same</b> <b>as</b> <b>the</b> <b>arguments</b> <b>to</b>
       <b>&lt;format&gt;.</b>

       The function must return a character position to break the line.

       The function should not modify MT.

       The <b>mdraw_default_line_break()</b> function is useful for such a script that uses SPACE as a word separator.

       <b>int</b> <b>MDrawControl::with_cursor</b> If nonzero, show the cursor according to &lt;cursor_width&gt;.

       <b>int</b> <b>MDrawControl::cursor_pos</b> Specifies the character position to display a cursor. If it is greater  than
       the  maximum  character position, the cursor is displayed next to the last character of an M-text. If the
       value is negative, even if &lt;cursor_width&gt; is nonzero, cursor is not displayed.

       <b>int</b> <b>MDrawControl::cursor_width</b> If nonzero, display a cursor at the character  position  &lt;cursor_pos&gt;.  If
       the value is positive, it is the pixel width of the cursor. If the value is negative, the cursor width is
       the same as the underlining glyph(s).

       <b>int</b>  <b>MDrawControl::cursor_bidi</b> If nonzero and &lt;cursor_width&gt; is also nonzero, display double bar cursors;
       at the character position &lt;cursor_pos&gt; and at the logically previous character.  Both  cursors  have  one
       pixel width with horizontal fringes at upper or lower positions.

       <b>int</b>  <b>MDrawControl::partial_update</b>  If  nonzero, on drawing partial text, pixels of surrounding texts that
       intrude into the drawing area are also drawn. For  instance,  some  CVC  sequence  of  Thai  text  (C  is
       consonant, V is upper vowel) is drawn so that V is placed over the middle of two Cs. If this CVC sequence
       is already drawn and only the last C is drawn again (for instance by updating cursor position), the right
       half  of V is erased if this member is zero. By setting this member to nonzero, even with such a drawing,
       we can keep this CVC sequence correctly displayed.

       <b>int</b> <b>MDrawControl::disable_caching</b> If nonzero, don't cache the result of any  drawing  information  of  an
       M-text.

       <b>MDrawRegion</b> <b>MDrawControl::clip_region</b> <b>If</b> <b>non-NULL,</b> <b>limit</b> <b>the</b> <b>drawing</b> <b>effect</b> <b>to</b> <b>the</b> <b>specified</b> <b>region.</b>

   <b>MDrawMetric</b>
       Type of metric for glyphs and texts.

       <b>FIELD</b> <b>DOCUMENTATION:</b>

       <b>int</b> <b>MDrawMetric::x</b> X coordinates of a glyph or a text.

       <b>int</b> <b>MDrawMetric::y</b> Y coordinates of a glyph or a text.

       <b>unsigned</b> <b>int</b> <b>MDrawMetric::width</b> Pixel width of a glyph or a text.

       <b>unsigned</b> <b>int</b> <b>MDrawMetric::height</b> Pixel height of a glyph or a text.

   <b>MDrawGlyphInfo</b>
       Type of information about a glyph.

       <b>FIELD</b> <b>DOCUMENTATION:</b>

       <b>int</b> <b>MDrawGlyphInfo::from</b> Start position of character range corresponding to the glyph.

       <b>int</b> <b>MDrawGlyphInfo::to</b> End position of character range corresponding to the glyph.

       <b>int</b> <b>MDrawGlyphInfo::line_from</b> Start position of character range corresponding to the line of the glyph.

       <b>int</b> <b>MDrawGlyphInfo::line_to</b> End position of character range corresponding to the line of the glyph.

       <b>int</b> <b>MDrawGlyphInfo::x</b> X coordinates of the glyph.

       <b>int</b> <b>MDrawGlyphInfo::y</b> Y coordinates of the glyph.

       <b>MDrawMetric</b> <b>MDrawGlyphInfo::metrics</b> <b>Metric</b> <b>of</b> <b>the</b> <b>glyph.</b>

       <b>MFont*</b> <b>MDrawGlyphInfo::font</b> <b>Font</b> <b>used</b> <b>for</b> <b>the</b> <b>glyph.</b> <b>Set</b> <b>to</b> <b>NULL</b> <b>if</b> <b>no</b> <b>font</b> <b>is</b> <b>found</b> <b>for</b> <b>the</b> <b>glyph.</b>

       <b>int</b> <b>MDrawGlyphInfo::prev_from</b> Character ranges corresponding to logically previous glyphs. Note that we
       do not need the members prev_to because it must be the same as the member &lt;from&gt;.

       <b>int</b> <b>MDrawGlyphInfo::next_to</b> Character ranges corresponding to logically next glyphs. Note that we do not
       need the members next_from because it must be the same as the member &lt;to&gt; respectively.

       <b>int</b> <b>MDrawGlyphInfo::left_from</b> Start position of character ranges corresponding to visually left glyphs.

       <b>int</b> <b>MDrawGlyphInfo::left_to</b> End position of character ranges corresponding to visually left glyphs.

       <b>int</b> <b>MDrawGlyphInfo::right_from</b> Start position of character ranges corresponding to visually right glyphs.

       <b>int</b> <b>MDrawGlyphInfo::right_to</b> End position of character ranges corresponding to visually left glyphs.

       <b>int</b> <b>MDrawGlyphInfo::logical_width</b> Logical width of the glyph. Nominal distance to the next glyph.

   <b>MDrawGlyph</b>
       Type of information about a glyph metric and font.

       <b>FIELD</b> <b>DOCUMENTATION:</b>

       <b>int</b> <b>MDrawGlyph::from</b> Character range corresponding to the glyph.

       <b>int</b> <b>MDrawGlyph::to</b>

       <b>int</b> <b>MDrawGlyph::glyph_code</b> Font glyph code of the glyph.

       <b>int</b> <b>MDrawGlyph::x_advance</b> Logical width of the glyph. Nominal distance to the next glyph.

       <b>int</b> <b>MDrawGlyph::y_advance</b> Logical height of the glyph. Nominal distance to the next glyph.

       <b>int</b> <b>MDrawGlyph::x_off</b> X offset relative to the glyph position.

       <b>int</b> <b>MDrawGlyph::y_off</b> Y offset relative to the glyph position.

       <b>int</b> <b>MDrawGlyph::lbearing</b> Metric of the glyph (left-bearing).

       <b>int</b> <b>MDrawGlyph::rbearing</b> Metric of the glyph (right-bearing).

       <b>int</b> <b>MDrawGlyph::ascent</b> Metric of the glyph (ascent).

       <b>int</b> <b>MDrawGlyph::descent</b> Metric of the glyph (descent).

       <b>MFont*</b> <b>MDrawGlyph::font</b> <b>Font</b> <b>used</b> <b>for</b> <b>the</b> <b>glyph.</b> <b>Set</b> <b>to</b> <b>NULL</b> <b>if</b> <b>no</b> <b>font</b> <b>is</b> <b>found</b> <b>for</b> <b>the</b> <b>glyph.</b>

       <b>MSymbol</b> <b>MDrawGlyph::font_type</b> Type of the font. One of Mx, Mfreetype, Mxft.

       <b>void*</b> <b>MDrawGlyph::fontp</b> Pointer to the font structure. The actual type is (XFontStruct *) if &lt;font_type&gt;
       member is Mx, FT_Face if &lt;font_type&gt; member is Mfreetype, and (XftFont *) if &lt;font_type&gt; member is Mxft.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>void*</b> <b>MDrawWindow</b>
       Window system dependent type for a window. The type <b>MDrawWindow</b> is for a window; a rectangular area that
       works in several ways like a miniature screen.

       What it actually points depends on a window system. A program that uses the m17n-X library must coerce
       the type Drawable to this type.

   <b>typedef</b> <b>void*</b> <b>MDrawRegion</b>
       Window system dependent type for a region. The type <b>MDrawRegion</b> is for a region; an arbitrary set of
       pixels on the screen (typically a rectangular area).

       What it actually points depends on a window system. A program that uses the m17n-X library must coerce
       the type Region to this type.

</pre><h4><b>Variable</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>mdraw_line_break_option</b>
       Option of line breaking for drawing text. The variable <b>mdraw_line_break_option</b> specifies line breaking
       options by logical-or of the members of <b>MTextLineBreakOption</b>. It controls the line breaking algorithm of
       the function <b>mdraw_default_line_break()</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for The m17n Library from the source code.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2001 Information-technology Promotion Agency (IPA)
       Copyright (C) 2001-2011 National Institute of Advanced Industrial Science and Technology (AIST)
       Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free
       Documentation License &lt;<a href="http://www.gnu.org/licenses/fdl.html">http://www.gnu.org/licenses/fdl.html</a>&gt;.

Version 1.8.4                                    Mon Sep 25 2023                                 <u><a href="../man3m17n/m17nDraw.3m17n.html">m17nDraw</a></u>(3m17n)
</pre>
 </div>
</div></section>
</div>
</body>
</html>