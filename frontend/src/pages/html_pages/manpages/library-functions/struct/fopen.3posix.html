<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       fopen — open a stream

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;

       FILE *fopen(const char *restrict <u>pathname</u>, const char *restrict <u>mode</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  functionality  described  on  this  reference  page is aligned with the ISO C standard. Any conflict
       between the requirements described  here  and  the  ISO C  standard  is  unintentional.  This  volume  of
       POSIX.1‐2017 defers to the ISO C standard.

       The  <u>fopen</u>()  function  shall  open  the  file  whose  pathname is the string pointed to by <u>pathname</u>, and
       associates a stream with it.

       The <u>mode</u> argument points to a string. If the string is one of the following, the file shall be opened  in
       the indicated mode. Otherwise, the behavior is undefined.

       <u>r</u> or <u>rb</u>       Open file for reading.

       <u>w</u> or <u>wb</u>       Truncate to zero length or create file for writing.

       <u>a</u> or <u>ab</u>       Append; open or create file for writing at end-of-file.

       <u>r+</u> or <u>rb+</u> or <u>r+b</u>
                     Open file for update (reading and writing).

       <u>w+</u> or <u>wb+</u> or <u>w+b</u>
                     Truncate to zero length or create file for update.

       <u>a+</u> or <u>ab+</u> or <u>a+b</u>
                     Append; open or create file for update, writing at end-of-file.

       The  character  <b>'b'</b>  shall have no effect, but is allowed for ISO C standard conformance.  Opening a file
       with read mode (<u>r</u> as the first character in the <u>mode</u> argument) shall fail if the file does not  exist  or
       cannot be read.

       Opening  a  file  with  append  mode  (<u>a</u>  as  the  first  character in the <u>mode</u> argument) shall cause all
       subsequent writes to the file to be forced to the then current  end-of-file,  regardless  of  intervening
       calls to <u>fseek</u>().

       When  a file is opened with update mode (<b>'+'</b> as the second or third character in the <u>mode</u> argument), both
       input and output may be performed on the associated stream. However, the application  shall  ensure  that
       output is not directly followed by input without an intervening call to <u>fflush</u>() or to a file positioning
       function  (<u>fseek</u>(),  <u>fsetpos</u>(),  or  <u>rewind</u>()),  and  input is not directly followed by output without an
       intervening call to a file positioning function, unless the input operation encounters end-of-file.

       When opened, a stream is fully buffered if and  only  if  it  can  be  determined  not  to  refer  to  an
       interactive device. The error and end-of-file indicators for the stream shall be cleared.

       If  <u>mode</u>  is  <u>w</u>,  <u>wb</u>,  <u>a</u>,  <u>ab</u>, <u>w</u>+, <u>wb</u>+, <u>w</u>+<u>b</u>, <u>a</u>+, <u>ab</u>+, or <u>a</u>+<u>b</u>, and the file did not previously exist, upon
       successful completion, <u>fopen</u>() shall mark for update the last data access, last  data  modification,  and
       last file status change timestamps of the file and the last file status change and last data modification
       timestamps of the parent directory.

       If  <u>mode</u>  is  <u>w</u>,  <u>wb</u>,  <u>a</u>,  <u>ab</u>,  <u>w</u>+, <u>wb</u>+, <u>w</u>+<u>b</u>, <u>a</u>+, <u>ab</u>+, or <u>a</u>+<u>b</u>, and the file did not previously exist, the
       <u>fopen</u>() function shall create a file as if it called the <u>creat</u>() function with a  value  appropriate  for
       the  <u>path</u>  argument  interpreted  from  <u>pathname</u>  and  a value of S_IRUSR | S_IWUSR | S_IRGRP | S_IWGRP |
       S_IROTH | S_IWOTH for the <u>mode</u> argument.

       If <u>mode</u> is <u>w</u>, <u>wb</u>, <u>w</u>+, <u>wb</u>+, or <u>w</u>+<u>b</u>, and the file did previously exist, upon successful completion, <u>fopen</u>()
       shall mark for update the last data modification and last file status change timestamps of the file.

       After a successful call to the <u>fopen</u>() function, the orientation of the  stream  shall  be  cleared,  the
       encoding  rule  shall be cleared, and the associated <b>mbstate_t</b> object shall be set to describe an initial
       conversion state.

       The file descriptor associated with the opened stream shall be allocated and opened as if by  a  call  to
       <u>open</u>() with the following flags:
                                   ┌──────────────────┬───────────────────────────┐
                                   │   <u>fopen</u><b>()</b> <b>Mode</b>   │       <u>open</u><b>()</b> <b>Flags</b>        │
                                   ├──────────────────┼───────────────────────────┤
                                   │ <u>r</u> or <u>rb</u>          │ O_RDONLY                  │
                                   │ <u>w</u> or <u>wb</u>          │ O_WRONLY|O_CREAT|O_TRUNC  │
                                   │ <u>a</u> or <u>ab</u>          │ O_WRONLY|O_CREAT|O_APPEND │
                                   │ <u>r+</u> or <u>rb+</u> or <u>r+b</u> │ O_RDWR                    │
                                   │ <u>w+</u> or <u>wb+</u> or <u>w+b</u> │ O_RDWR|O_CREAT|O_TRUNC    │
                                   │ <u>a+</u> or <u>ab+</u> or <u>a+b</u> │ O_RDWR|O_CREAT|O_APPEND   │
                                   └──────────────────┴───────────────────────────┘

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon  successful  completion,  <u>fopen</u>()  shall  return  a  pointer  to  the object controlling the stream.
       Otherwise, a null pointer shall be returned, and <u>errno</u> shall be set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>fopen</u>() function shall fail if:

       <b>EACCES</b> Search permission is denied on a component of  the  path  prefix,  or  the  file  exists  and  the
              permissions  specified  by  <u>mode</u>  are  denied,  or the file does not exist and write permission is
              denied for the parent directory of the file to be created.

       <b>EINTR</b>  A signal was caught during <u>fopen</u>().

       <b>EISDIR</b> The named file is a directory and <u>mode</u> requires write access.

       <b>ELOOP</b>  A loop exists in symbolic links encountered during resolution of the <u>path</u> argument.

       <b>EMFILE</b> All file descriptors available to the process are currently open.

       <b>EMFILE</b> {STREAM_MAX} streams are currently open in the calling process.

       <b>ENAMETOOLONG</b>
              The length of a pathname exceeds {PATH_MAX}, or pathname resolution of a symbolic link produced an
              intermediate result with a length that exceeds {PATH_MAX}.

       <b>ENFILE</b> The maximum allowable number of files is currently open in the system.

       <b>ENOENT</b> The <u>mode</u> string begins with <b>'r'</b> and a component of <u>pathname</u> does not name  an  existing  file,  or
              <u>mode</u>  begins  with  <b>'w'</b>  or  <b>'a'</b>  and  a component of the path prefix of <u>pathname</u> does not name an
              existing file, or <u>pathname</u> is an empty string.

       <b>ENOENT</b> or <b>ENOTDIR</b>
              The <u>pathname</u> argument contains at least one non-&lt;slash&gt;  character  and  ends  with  one  or  more
              trailing  &lt;slash&gt;  characters.  If  <u>pathname</u> without the trailing &lt;slash&gt; characters would name an
              existing file, an <b>[ENOENT]</b> error shall not occur.

       <b>ENOSPC</b> The directory or file system that would contain the new file cannot be expanded, the file does not
              exist, and the file was to be created.

       <b>ENOTDIR</b>
              A component of the path prefix names an existing file that is neither a directory nor  a  symbolic
              link to a directory, or the <u>pathname</u> argument contains at least one non-&lt;slash&gt; character and ends
              with  one  or  more  trailing &lt;slash&gt; characters and the last pathname component names an existing
              file that is neither a directory nor a symbolic link to a directory.

       <b>ENXIO</b>  The named file is a character special or block special file, and the device associated  with  this
              special file does not exist.

       <b>EOVERFLOW</b>
              The  named  file  is a regular file and the size of the file cannot be represented correctly in an
              object of type <b>off_t</b>.

       <b>EROFS</b>  The named file resides on a read-only file system and <u>mode</u> requires write access.

       The <u>fopen</u>() function may fail if:

       <b>EINVAL</b> The value of the <u>mode</u> argument is not valid.

       <b>ELOOP</b>  More than {SYMLOOP_MAX} symbolic links were encountered during resolution of the <u>path</u> argument.

       <b>EMFILE</b> {FOPEN_MAX} streams are currently open in the calling process.

       <b>ENAMETOOLONG</b>
              The length of a component of a pathname is longer than {NAME_MAX}.

       <b>ENOMEM</b> Insufficient storage space is available.

       <b>ETXTBSY</b>
              The file is a pure procedure (shared text) file that is being executed  and  <u>mode</u>  requires  write
              access.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Opening</b> <b>a</b> <b>File</b>
       The  following example tries to open the file named <b>file</b> for reading. The <u>fopen</u>() function returns a file
       pointer that is used in subsequent <u>fgets</u>() and <u>fclose</u>() calls. If the program cannot open  the  file,  it
       just ignores it.

           #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
           ...
           FILE *fp;
           ...
           void rgrep(const char *file)
           {
           ...
               if ((fp = fopen(file, "r")) == NULL)
                   return;
           ...
           }

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       None.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>Section</u> <u>2.5</u>, <u>Standard</u> <u>I/O</u> <u>Streams</u>, <u>creat</u>(), <u>fclose</u>(), <u>fdopen</u>(), <u>fmemopen</u>(), <u>freopen</u>(), <u>open_memstream</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;stdio.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                         <u><a href="../man3POSIX/FOPEN.3POSIX.html">FOPEN</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>