<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>capng_change_id - change the credentials retaining capabilities</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcap-ng-dev">libcap-ng-dev_0.8.5-4build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       capng_change_id - change the credentials retaining capabilities

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;cap-ng.h&gt;</b>

       int capng_change_id(int uid, int gid, capng_flags_t flag);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  function  will  change  uid  and  gid to the ones given while retaining the capabilities previously
       specified in capng_update. It is also possible to specify -1 for either the uid or gid in which case  the
       function  will  not  change the uid or gid and leave it "as is". This is useful if you just want the flag
       options to be applied (assuming the option doesn't require more privileges that you currently have).

       It is not necessary and perhaps better if capng_apply has not been called prior to this function so  that
       all  necessary  privileges  are  still  intact. The caller may be required to have CAP_SETPCAP capability
       still active before calling this function or capabilities cannot be changed.

       This function also takes a flag parameter that helps  to  tailor  the  exact  actions  performed  by  the
       function to secure the environment. The option may be or'ed together. The legal values are:

              <b>CAPNG_NO_FLAG</b>
                     Simply change uid and retain specified capabilities and that's all.

              <b>CAPNG_DROP_SUPP_GRP</b>
                     After  changing  id,  remove any supplement groups that may still be in effect from the old
                     uid.

              <b>CAPNG_INIT_SUPP_GRP</b>
                     After changing id, initialize any supplement groups that may come with the new account.  If
                     given with <b>CAPNG_DROP_SUPP_GRP</b> it will have no effect.

              <b>CAPNG_CLEAR_BOUNDING</b>
                     Clear  the  bounding  set  regardless to the internal representation already setup prior to
                     changing the uid/gid.

              <b>CAPNG_CLEAR_AMBIENT</b>
                     Clear ambient capabilities regardless of the internal representation already setup prior to
                     changing the uid/gid.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This returns 0 on success and a negative number on failure.

              -1 means capng has not been initted properly

              -2 means a failure requesting to keep capabilities across the uid change

              -3 means that applying the intermediate capabilities failed

              -4 means changing gid failed

              -5 means dropping supplemental groups failed

              -6 means changing the uid failed

              -7 means dropping the ability to retain caps across a uid change failed

              -8 means clearing the bounding set failed

              -9 means dropping CAP_SETPCAP or ambient capabilities failed

              -10 means initializing supplemental groups failed

       Note: the only safe action to do upon failure of this function is to probably exit. This is  because  you
       are likely in a situation with partial permissions and not what you intended.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/capng_update.3.html">capng_update</a></b>(3), <b><a href="../man3/capng_apply.3.html">capng_apply</a></b>(3), <b><a href="../man2/prctl.2.html">prctl</a></b>(2), <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7)

</pre><h4><b>AUTHOR</b></h4><pre>
       Steve Grubb

Red Hat                                             Feb 2018                                  <u><a href="../man3/CAPNG_CHANGE_ID.3.html">CAPNG_CHANGE_ID</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>