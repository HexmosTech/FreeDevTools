<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>batch - Netlink message batch helpers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmnl-doc">libmnl-doc_1.0.5-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       batch - Netlink message batch helpers

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Functions</b>
       struct mnl_nlmsg_batch * <b>mnl_nlmsg_batch_start</b> (void *buf, size_t limit)
       void <b>mnl_nlmsg_batch_stop</b> (struct mnl_nlmsg_batch *b)
       bool <b>mnl_nlmsg_batch_next</b> (struct mnl_nlmsg_batch *b)
       void <b>mnl_nlmsg_batch_reset</b> (struct mnl_nlmsg_batch *b)
       size_t <b>mnl_nlmsg_batch_size</b> (struct mnl_nlmsg_batch *b)
       void * <b>mnl_nlmsg_batch_head</b> (struct mnl_nlmsg_batch *b)
       void * <b>mnl_nlmsg_batch_current</b> (struct mnl_nlmsg_batch *b)
       bool <b>mnl_nlmsg_batch_is_empty</b> (struct mnl_nlmsg_batch *b)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       This library provides helpers to batch several messages into one single datagram. These helpers do not
       perform strict memory boundary checkings.

       The following figure represents a Netlink message batch:

          |&lt;-------------- MNL_SOCKET_BUFFER_SIZE -------------&gt;|
          |&lt;-------------------- batch ------------------&gt;|     |
          |-----------|-----------|-----------|-----------|-----------|
          |&lt;- nlmsg -&gt;|&lt;- nlmsg -&gt;|&lt;- nlmsg -&gt;|&lt;- nlmsg -&gt;|&lt;- nlmsg -&gt;|
          |-----------|-----------|-----------|-----------|-----------|
                                                    ^           ^
                                                    |           |
                                               message N   message N+1

       To start the batch, you have to call <b>mnl_nlmsg_batch_start()</b> and you can use <b>mnl_nlmsg_batch_stop()</b> to
       release it.

       You have to invoke <b>mnl_nlmsg_batch_next()</b> to get room for a new message in the batch. If this function
       returns NULL, it means that the last message that was added (message N+1 in the figure above) does not
       fit the batch. Thus, you have to send the batch (which includes until message N) and, then, you have to
       call <b>mnl_nlmsg_batch_reset()</b> to re-initialize the batch (this moves message N+1 to the head of the
       buffer). For that reason, the buffer that you have to use to store the batch must be double of
       MNL_SOCKET_BUFFER_SIZE to ensure that the last message (message N+1) that did not fit into the batch is
       written inside valid memory boundaries.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>*</b> <b>mnl_nlmsg_batch_current</b> <b>(struct</b> <b>mnl_nlmsg_batch</b> <b>*</b> <b>b)</b>
       mnl_nlmsg_batch_current - returns current position in the batch

       <b>Parameters</b>
           <u>b</u> pointer to batch

       This function returns a pointer to the current position in the buffer that is used to store the batch.

       Definition at line <b>539</b> of file <b>nlmsg.c</b>.

   <b>void</b> <b>*</b> <b>mnl_nlmsg_batch_head</b> <b>(struct</b> <b>mnl_nlmsg_batch</b> <b>*</b> <b>b)</b>
       mnl_nlmsg_batch_head - get head of this batch

       <b>Parameters</b>
           <u>b</u> pointer to batch

       This function returns a pointer to the head of the batch, which is the beginning of the buffer that is
       used.

       Definition at line <b>527</b> of file <b>nlmsg.c</b>.

   <b>bool</b> <b>mnl_nlmsg_batch_is_empty</b> <b>(struct</b> <b>mnl_nlmsg_batch</b> <b>*</b> <b>b)</b>
       mnl_nlmsg_batch_is_empty - check if there is any message in the batch

       <b>Parameters</b>
           <u>b</u> pointer to batch

       This function returns true if the batch is empty.

       Definition at line <b>550</b> of file <b>nlmsg.c</b>.

   <b>bool</b> <b>mnl_nlmsg_batch_next</b> <b>(struct</b> <b>mnl_nlmsg_batch</b> <b>*</b> <b>b)</b>
       mnl_nlmsg_batch_next - get room for the next message in the batch

       <b>Parameters</b>
           <u>b</u> pointer to batch

       This function returns false if the last message did not fit into the batch. Otherwise, it prepares the
       batch to provide room for the new Netlink message in the batch and returns true.

       You have to put at least one message in the batch before calling this function, otherwise your
       application is likely to crash.

       Definition at line <b>474</b> of file <b>nlmsg.c</b>.

   <b>void</b> <b>mnl_nlmsg_batch_reset</b> <b>(struct</b> <b>mnl_nlmsg_batch</b> <b>*</b> <b>b)</b>
       mnl_nlmsg_batch_reset - reset the batch

       <b>Parameters</b>
           <u>b</u> pointer to batch

       This function allows you to reset a batch, so you can reuse it to create a new one. This function moves
       the last message which does not fit the batch to the head of the buffer, if any.

       Definition at line <b>495</b> of file <b>nlmsg.c</b>.

   <b>size_t</b> <b>mnl_nlmsg_batch_size</b> <b>(struct</b> <b>mnl_nlmsg_batch</b> <b>*</b> <b>b)</b>
       mnl_nlmsg_batch_size - get current size of the batch

       <b>Parameters</b>
           <u>b</u> pointer to batch

       This function returns the current size of the batch.

       Definition at line <b>515</b> of file <b>nlmsg.c</b>.

   <b>struct</b> <b>mnl_nlmsg_batch</b> <b>*</b> <b>mnl_nlmsg_batch_start</b> <b>(void</b> <b>*</b> <b>buf,</b> <b>size_t</b> <b>limit)</b>
       mnl_nlmsg_batch_start - initialize a batch

       <b>Parameters</b>
           <u>buf</u> pointer to the buffer that will store this batch
           <u>limit</u> maximum size of the batch (should be MNL_SOCKET_BUFFER_SIZE).

       The buffer that you pass must be double of MNL_SOCKET_BUFFER_SIZE. The limit must be half of the buffer
       size, otherwise expect funny memory corruptions 8-).

       You can allocate the buffer that you use to store the batch in the stack or the heap, no restrictions in
       this regard. This function returns NULL on error.

       Definition at line <b>434</b> of file <b>nlmsg.c</b>.

   <b>void</b> <b>mnl_nlmsg_batch_stop</b> <b>(struct</b> <b>mnl_nlmsg_batch</b> <b>*</b> <b>b)</b>
       mnl_nlmsg_batch_stop - release a batch

       <b>Parameters</b>
           <u>b</u> pointer to batch

       This function releases the batch allocated by <b>mnl_nlmsg_batch_start()</b>.

       Definition at line <b>458</b> of file <b>nlmsg.c</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for libmnl from the source code.

libmnl                                            Version 1.0.5                                         <u><a href="../man3/batch.3.html">batch</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>