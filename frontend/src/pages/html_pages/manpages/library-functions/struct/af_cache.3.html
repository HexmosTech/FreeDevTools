<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>af_savecache, af_cachesize - AtFS derived object cache handling</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/atfs-dev">atfs-dev_1.4pl6-16.1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       af_savecache, af_cachesize - AtFS derived object cache handling

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;atfs.h&gt;

       int af_savecache (Af_key *busyAso, Af_key* cachedAso, char *attr, int mode)

       int af_cachesize (char path, int totalMax, int maxPerName, int maxPerGivenAttr);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>af_savecache</u>  copies a busy attributed software object (<u>busyAso</u>) to a derived object cache. A key for the
       resulting cached ASO is returned in the buffer <u>cachedAso</u>.  Derived object caches  are  intended  to  hold
       derived objects that can be reproduced at any time. Reproducibility is important, because cached ASOs may
       be  deleted automatically due to storage limitations for derived object caches.  A cache allows a certain
       number of versions per name (see function af_cachesize described below) to be stored. When this number is
       reached, each time a new version arrives, the oldest version (access date) gets cleaned out.

       The strategy of cleaning out old versions when space is needed for new ones is  influenced  by  the  <u>attr</u>
       argument.  When  this  is  given af_savecache searches for cached versions (with the same name as the new
       one) carrying the given attribute. If it finds one or more such versions, the  oldest  (access  date)  of
       them will be eliminated.

       The <u>mode</u> argument may have one of the following values

       AF_STORE_COMPLETE
                   (default) The cached file is stored unmodified.

       AF_STORE_COMPRESSED
                   The cached file will be stored in a compressed format.

       ASOs  that  are  saved  in  derived  object caches do not automatically get a version number. By means of
       <u>af_svnum</u> (manual page <a href="../man3/af_version.3.html">af_version</a>(3)) you can attach any version number to an  ASO  stored  in  a  derived
       object cache.

       <u>af_cachesize</u> defines the size strategy of the cache in directory <u>path</u>. It sets the maximum cache size for
       the  whole  directory (<u>totalMax</u>), the maximum number of versions per name (<u>maxPerName</u>), and the number of
       versions allowed simultaneously carrying the elimination attribute (see before). A value  less  or  equal
       zero given for any of the arguments of af_cachesize will cause this argument to be ignored.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Upon error, -1 is returned and <u>af_errno</u> is set to the corresponding error number.

</pre><h4><b>BUGS</b></h4><pre>
       Compression of cached files (mode AF_STORE_COMPRESSED) is not yet supported.

       af_cachesize  cannot shrink derived object caches yet. Values given must be greater or equal the prevoius
       size.

AtFS-1.71                                   Mon Jul 19 18:19:37 1993                                 <u><a href="../man3/af_cache.3.html">af_cache</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>