<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libmtp - files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmtp-doc">libmtp-doc_1.1.22-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libmtp - files

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Macros</b>
       #define <b>LIBMTP_FILES_AND_FOLDERS_ROOT</b>   0xffffffff

   <b>Typedefs</b>
       typedef void(* <b>LIBMTP_event_cb_fn</b>) (int, LIBMTP_event_t, uint32_t, void *)

   <b>Functions</b>
       <b>LIBMTP_file_t</b> * <b>LIBMTP_new_file_t</b> (void)
       void <b>LIBMTP_destroy_file_t</b> (<b>LIBMTP_file_t</b> *)
       char const * <b>LIBMTP_Get_Filetype_Description</b> (<b>LIBMTP_filetype_t</b>)
       <b>LIBMTP_file_t</b> * <b>LIBMTP_Get_Filelisting</b> (<b>LIBMTP_mtpdevice_t</b> *)
       <b>LIBMTP_file_t</b> * <b>LIBMTP_Get_Filelisting_With_Callback</b> (<b>LIBMTP_mtpdevice_t</b> *, <b>LIBMTP_progressfunc_t</b> const,
           void const *const)
       <b>LIBMTP_file_t</b> * <b>LIBMTP_Get_Files_And_Folders</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t const, uint32_t const)
       int <b>LIBMTP_Get_Children</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t const, uint32_t const, uint32_t **)
       <b>LIBMTP_file_t</b> * <b>LIBMTP_Get_Filemetadata</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t const)
       int <b>LIBMTP_Get_File_To_File</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t, char const *const, <b>LIBMTP_progressfunc_t</b>
           const, void const *const)
       int <b>LIBMTP_Get_File_To_File_Descriptor</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t const, int const,
           <b>LIBMTP_progressfunc_t</b> const, void const *const)
       int <b>LIBMTP_Get_File_To_Handler</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t const, <b>MTPDataPutFunc</b>, void *,
           <b>LIBMTP_progressfunc_t</b> const, void const *const)
       int <b>LIBMTP_Send_File_From_File</b> (<b>LIBMTP_mtpdevice_t</b> *, char const *const, <b>LIBMTP_file_t</b> *const,
           <b>LIBMTP_progressfunc_t</b> const, void const *const)
       int <b>LIBMTP_Send_File_From_File_Descriptor</b> (<b>LIBMTP_mtpdevice_t</b> *, int const, <b>LIBMTP_file_t</b> *const,
           <b>LIBMTP_progressfunc_t</b> const, void const *const)
       int <b>LIBMTP_Send_File_From_Handler</b> (<b>LIBMTP_mtpdevice_t</b> *, <b>MTPDataGetFunc</b>, void *, <b>LIBMTP_file_t</b> *const,
           <b>LIBMTP_progressfunc_t</b> const, void const *const)
       int <b>LIBMTP_Set_File_Name</b> (<b>LIBMTP_mtpdevice_t</b> *, <b>LIBMTP_file_t</b> *, const char *)
       <b>LIBMTP_filesampledata_t</b> * <b>LIBMTP_new_filesampledata_t</b> (void)
       void <b>LIBMTP_destroy_filesampledata_t</b> (<b>LIBMTP_filesampledata_t</b> *)
       int <b>LIBMTP_Get_Representative_Sample_Format</b> (<b>LIBMTP_mtpdevice_t</b> *, <b>LIBMTP_filetype_t</b> const,
           <b>LIBMTP_filesampledata_t</b> **)
       int <b>LIBMTP_Send_Representative_Sample</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t const, <b>LIBMTP_filesampledata_t</b> *)
       int <b>LIBMTP_Get_Representative_Sample</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t const, <b>LIBMTP_filesampledata_t</b> *)
       int <b>LIBMTP_Get_Thumbnail</b> (<b>LIBMTP_mtpdevice_t</b> *, uint32_t const, unsigned char **data, unsigned int *size)
       int <b>LIBMTP_Read_Event</b> (<b>LIBMTP_mtpdevice_t</b> *, LIBMTP_event_t *, uint32_t *)
       int <b>LIBMTP_Read_Event_Async</b> (<b>LIBMTP_mtpdevice_t</b> *, LIBMTP_event_cb_fn, void *)
       int <b>LIBMTP_Handle_Events_Timeout_Completed</b> (struct timeval *, int *)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>LIBMTP_destroy_file_t</b> <b>(LIBMTP_file_t</b> <b>*</b> <b>file)</b>
       This destroys a file metadata structure and deallocates the memory used by it, including any strings.
       Never use a file metadata structure again after calling this function on it.

       <b>Parameters</b>
           <u>file</u> the file metadata to destroy.

       <b>See</b> <b>also</b>
           <b>LIBMTP_new_file_t()</b>

       References <b>LIBMTP_file_struct::filename</b>.

       Referenced by <b>LIBMTP_Get_File_To_File_Descriptor()</b>, <b>LIBMTP_Get_File_To_Handler()</b>,
       <b>LIBMTP_Send_File_From_File_Descriptor()</b>, and <b>LIBMTP_Send_File_From_Handler()</b>.

   <b>void</b> <b>LIBMTP_destroy_filesampledata_t</b> <b>(LIBMTP_filesampledata_t</b> <b>*</b> <b>sample)</b>
       This destroys a file sample metadata type.

       <b>Parameters</b>
           <u>sample</u> the file sample metadata to be destroyed.

       References <b>LIBMTP_filesampledata_struct::data</b>.

   <b>int</b> <b>LIBMTP_Get_Children</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>uint32_t</b> <b>const</b> <b>storage,</b> <b>uint32_t</b> <b>const</b> <b>parent,</b> <b>uint32_t</b>
       <b>**</b> <b>out)</b>
       This function retrieves the list of ids of files and folders in a certain folder with id parent on a
       certain storage on a certain device. The device used with this operations must have been opened with
       <b>LIBMTP_Open_Raw_Device_Uncached()</b> or it will fail.

       NOTE: the request will always perform I/O with the device.

       <b>Parameters</b>
           <u>device</u> a pointer to the MTP device to report info from.
           <u>storage</u> a storage on the device to report info from. If 0 is passed in, the files for the given
           parent will be searched across all available storages.
           <u>parent</u> the parent folder id.
           <u>out</u> the pointer where the array of ids is returned. It is set only when the returned value &gt; 0. The
           caller takes the ownership of the array and has to free() it.

       <b>Returns</b>
           the length of the returned array or -1 in case of failure.

       References <b>LIBMTP_mtpdevice_struct::cached</b>, and <b>LIBMTP_mtpdevice_struct::params</b>.

   <b>int</b> <b>LIBMTP_Get_File_To_File</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>uint32_t</b> <b>const</b> <b>id,</b> <b>char</b> <b>const</b> <b>*const</b> <b>path,</b>
       <b>LIBMTP_progressfunc_t</b> <b>const</b> <b>callback,</b> <b>void</b> <b>const</b> <b>*const</b> <b>data)</b>
       This gets a file off the device to a local file identified by a filename.

       <b>Parameters</b>
           <u>device</u> a pointer to the device to get the track from.
           <u>id</u> the file ID of the file to retrieve.
           <u>path</u> a filename to use for the retrieved file.
           <u>callback</u> a progress indicator function or NULL to ignore.
           <u>data</u> a user-defined pointer that is passed along to the progress function in order to pass along some
           user defined data to the progress updates. If not used, set this to NULL.

       <b>Returns</b>
           0 if the transfer was successful, any other value means failure.

       <b>See</b> <b>also</b>
           <b>LIBMTP_Get_File_To_File_Descriptor()</b>

       References <b>LIBMTP_Get_File_To_File_Descriptor()</b>.

       Referenced by <b>LIBMTP_Get_Track_To_File()</b>.

   <b>int</b> <b>LIBMTP_Get_File_To_File_Descriptor</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>uint32_t</b> <b>const</b> <b>id,</b> <b>int</b> <b>const</b> <b>fd,</b>
       <b>LIBMTP_progressfunc_t</b> <b>const</b> <b>callback,</b> <b>void</b> <b>const</b> <b>*const</b> <b>data)</b>
       This gets a file off the device to a file identified by a file descriptor.

       This function can potentially be used for streaming files off the device for playback or broadcast for
       example, by downloading the file into a stream sink e.g. a socket.

       <b>Parameters</b>
           <u>device</u> a pointer to the device to get the file from.
           <u>id</u> the file ID of the file to retrieve.
           <u>fd</u> a local file descriptor to write the file to.
           <u>callback</u> a progress indicator function or NULL to ignore.
           <u>data</u> a user-defined pointer that is passed along to the progress function in order to pass along some
           user defined data to the progress updates. If not used, set this to NULL.

       <b>Returns</b>
           0 if the transfer was successful, any other value means failure.

       <b>See</b> <b>also</b>
           <b>LIBMTP_Get_File_To_File()</b>

       References <b>_PTP_USB::callback_active</b>, <b>LIBMTP_file_struct::filesize</b>, <b>LIBMTP_file_struct::filetype</b>,
       <b>LIBMTP_destroy_file_t()</b>, <b>LIBMTP_Get_Filemetadata()</b>, <b>LIBMTP_mtpdevice_struct::params</b>, and
       <b>LIBMTP_mtpdevice_struct::usbinfo</b>.

       Referenced by <b>LIBMTP_Get_File_To_File()</b>, and <b>LIBMTP_Get_Track_To_File_Descriptor()</b>.

   <b>int</b> <b>LIBMTP_Get_File_To_Handler</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>uint32_t</b> <b>const</b> <b>id,</b> <b>MTPDataPutFunc</b> <b>put_func,</b> <b>void</b>
       <b>*</b> <b>priv,</b> <b>LIBMTP_progressfunc_t</b> <b>const</b> <b>callback,</b> <b>void</b> <b>const</b> <b>*const</b> <b>data)</b>
       This gets a file off the device and calls put_func with chunks of data

       <b>Parameters</b>
           <u>device</u> a pointer to the device to get the file from.
           <u>id</u> the file ID of the file to retrieve.
           <u>put_func</u> the function to call when we have data.
           <u>priv</u> the user-defined pointer that is passed to put_func.
           <u>callback</u> a progress indicator function or NULL to ignore.
           <u>data</u> a user-defined pointer that is passed along to the progress function in order to pass along some
           user defined data to the progress updates. If not used, set this to NULL.

       <b>Returns</b>
           0 if the transfer was successful, any other value means failure.

       References <b>_PTP_USB::callback_active</b>, <b>LIBMTP_file_struct::filesize</b>, <b>LIBMTP_file_struct::filetype</b>,
       <b>LIBMTP_destroy_file_t()</b>, <b>LIBMTP_Get_Filemetadata()</b>, <b>LIBMTP_mtpdevice_struct::params</b>, and
       <b>LIBMTP_mtpdevice_struct::usbinfo</b>.

       Referenced by <b>LIBMTP_Get_Track_To_Handler()</b>.

   <b>LIBMTP_file_t</b> <b>*</b> <b>LIBMTP_Get_Filelisting</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device)</b>
       THIS FUNCTION IS DEPRECATED. PLEASE UPDATE YOUR CODE IN ORDER NOT TO USE IT.

       <b>See</b> <b>also</b>
           <b>LIBMTP_Get_Filelisting_With_Callback()</b>

       References <b>LIBMTP_Get_Filelisting_With_Callback()</b>.

   <b>LIBMTP_file_t</b> <b>*</b> <b>LIBMTP_Get_Filelisting_With_Callback</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>LIBMTP_progressfunc_t</b>
       <b>const</b> <b>callback,</b> <b>void</b> <b>const</b> <b>*const</b> <b>data)</b>
       This returns a long list of all files available on the current MTP device. Folders will not be returned,
       but abstract entities like playlists and albums will show up as 'files'. Typical usage:

       LIBMTP_file_t *filelist;

       filelist = LIBMTP_Get_Filelisting_With_Callback(device, callback, data);
       while (filelist != NULL) {
         LIBMTP_file_t *tmp;

         // Do something on each element in the list here...
         tmp = filelist;
         filelist = filelist-&gt;next;
         LIBMTP_destroy_file_t(tmp);
       }

       If you want to group your file listing by storage (per storage unit) or arrange files into folders, you
       must dereference the storage_id and/or parent_id field of the returned LIBMTP_file_t struct. To arrange
       by folders or files you typically have to create the proper trees by calls to <b>LIBMTP_Get_Storage()</b> <b>and/or</b>
       <b>LIBMTP_Get_Folder_List()</b> <b>first.</b>

       <b>Parameters</b>
           <u>device</u> a pointer to the device to get the file listing for.
           <u>callback</u> a function to be called during the tracklisting retrieveal for displaying progress bars etc,
           or NULL if you don't want any callbacks.
           <u>data</u> a user-defined pointer that is passed along to the progress function in order to pass along some
           user defined data to the progress updates. If not used, set this to NULL.

       <b>Returns</b>
           a list of files that can be followed using the next field of the LIBMTP_file_t data structure. Each
           of the metadata tags must be freed after use, and may contain only partial metadata information, i.e.
           one or several fields may be NULL or 0.

       <b>See</b> <b>also</b>
           <b>LIBMTP_Get_Filemetadata()</b>

       References <b>LIBMTP_file_struct::next</b>, and <b>LIBMTP_mtpdevice_struct::params</b>.

       Referenced by <b>LIBMTP_Get_Filelisting()</b>.

   <b>LIBMTP_file_t</b> <b>*</b> <b>LIBMTP_Get_Filemetadata</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>uint32_t</b> <b>const</b> <b>fileid)</b>
       This function retrieves the metadata for a single file off the device.

       Do not call this function repeatedly! The file handles are linearly searched O(n) and the call may
       involve (slow) USB traffic, so use <b>LIBMTP_Get_Filelisting()</b> <b>and</b> <b>cache</b> <b>the</b> <b>file,</b> <b>preferably</b> <b>as</b> <b>an</b>
       <b>efficient</b> <b>data</b> <b>structure</b> <b>such</b> <b>as</b> <b>a</b> <b>hash</b> <b>list.</b>

       Incidentally this function will return metadata for a folder (association) as well, but this is not a
       proper use of it, it is intended for file manipulation, not folder manipulation.

       <b>Parameters</b>
           <u>device</u> a pointer to the device to get the file metadata from.
           <u>fileid</u> the object ID of the file that you want the metadata for.

       <b>Returns</b>
           a metadata entry on success or NULL on failure.

       <b>See</b> <b>also</b>
           <b>LIBMTP_Get_Filelisting()</b>

       References <b>LIBMTP_mtpdevice_struct::cached</b>, and <b>LIBMTP_mtpdevice_struct::params</b>.

       Referenced by <b>LIBMTP_Get_File_To_File_Descriptor()</b>, <b>LIBMTP_Get_File_To_Handler()</b>,
       <b>LIBMTP_Get_Files_And_Folders()</b>, <b>LIBMTP_Send_File_From_File_Descriptor()</b>, <b>LIBMTP_Send_File_From_Handler()</b>,
       and <b>LIBMTP_Set_Object_Filename()</b>.

   <b>LIBMTP_file_t</b> <b>*</b> <b>LIBMTP_Get_Files_And_Folders</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>uint32_t</b> <b>const</b> <b>storage,</b> <b>uint32_t</b>
       <b>const</b> <b>parent)</b>
       This function retrieves the contents of a certain folder with id parent on a certain storage on a certain
       device. The result contains both files and folders. The device used with this operations must have been
       opened with <b>LIBMTP_Open_Raw_Device_Uncached()</b> or it will fail.

       NOTE: the request will always perform I/O with the device.

       <b>Parameters</b>
           <u>device</u> a pointer to the MTP device to report info from.
           <u>storage</u> a storage on the device to report info from. If 0 is passed in, the files for the given
           parent will be searched across all available storages.
           <u>parent</u> the parent folder id.

       References <b>LIBMTP_mtpdevice_struct::cached</b>, <b>LIBMTP_Get_Filemetadata()</b>, <b>LIBMTP_file_struct::next</b>, and
       <b>LIBMTP_mtpdevice_struct::params</b>.

   <b>char</b> <b>const</b>  <b>*</b> <b>LIBMTP_Get_Filetype_Description</b> <b>(LIBMTP_filetype_t</b> <b>intype)</b>
       This helper function returns a textual description for a libmtp file type to be used in dialog boxes etc.

       <b>Parameters</b>
           <u>intype</u> the libmtp internal filetype to get a description for.

       <b>Returns</b>
           a string representing the filetype, this must <b>NOT</b> be free():ed by the caller!

       References <b>filemap_struct::description</b>, and <b>filemap_struct::id</b>.

   <b>int</b> <b>LIBMTP_Get_Representative_Sample</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>uint32_t</b> <b>const</b> <b>id,</b> <b>LIBMTP_filesampledata_t</b>
       <b>*</b> <b>sampledata)</b>
       This routine gets representative sample data for an object. This uses the RepresentativeSampleData
       property of the album, if the device supports it.

       <b>Parameters</b>
           <u>device</u> a pointer to the device which the object is on.
           <u>id</u> unique id of the object to get data for.
           <u>sampledata</u> pointer to LIBMTP_filesampledata_t struct to receive data

       <b>Returns</b>
           0 on success, any other value means failure.

       <b>See</b> <b>also</b>
           <b>LIBMTP_Send_Representative_Sample()</b>

           <b>LIBMTP_Get_Representative_Sample_Format()</b>

           <b>LIBMTP_Create_New_Album()</b>

       References <b>LIBMTP_filesampledata_struct::data</b>, <b>LIBMTP_filesampledata_struct::duration</b>,
       <b>LIBMTP_filesampledata_struct::filetype</b>, <b>LIBMTP_filesampledata_struct::height</b>,
       <b>LIBMTP_mtpdevice_struct::params</b>, <b>LIBMTP_filesampledata_struct::size</b>, and
       <b>LIBMTP_filesampledata_struct::width</b>.

   <b>int</b> <b>LIBMTP_Get_Representative_Sample_Format</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>LIBMTP_filetype_t</b> <b>const</b> <b>filetype,</b>
       <b>LIBMTP_filesampledata_t</b> <b>**</b> <b>sample)</b>
       This routine figures out whether a certain filetype supports representative samples (small thumbnail
       images) or not. This typically applies to JPEG files, MP3 files and Album abstract playlists, but in
       theory any filetype could support representative samples.

       <b>Parameters</b>
           <u>device</u> a pointer to the device which is to be examined.
           <u>filetype</u> the fileype to examine, and return the representative sample properties for.
           <u>sample</u> this will contain a new sample type with the fields filled in with suitable default values.
           For example, the supported sample type will be set, the supported height and width will be set to max
           values if it is an image sample, and duration will also be given some suitable default value which
           should not be exceeded on audio samples. If the device does not support samples for this filetype,
           this pointer will be NULL. If it is not NULL, the user must destroy this struct with
           <b>LIBMTP_destroy_filesampledata_t()</b> <b>after</b> <b>use.</b>

       <b>Returns</b>
           0 on success, any other value means failure.

       <b>See</b> <b>also</b>
           <b>LIBMTP_Send_Representative_Sample()</b>

           <b>LIBMTP_Create_New_Album()</b>

       References <b>LIBMTP_filesampledata_struct::duration</b>, <b>LIBMTP_filesampledata_struct::filetype</b>,
       <b>LIBMTP_filesampledata_struct::height</b>, <b>LIBMTP_new_filesampledata_t()</b>, <b>LIBMTP_mtpdevice_struct::params</b>,
       <b>LIBMTP_filesampledata_struct::size</b>, and <b>LIBMTP_filesampledata_struct::width</b>.

   <b>int</b> <b>LIBMTP_Get_Thumbnail</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>uint32_t</b> <b>const</b> <b>id,</b> <b>unsigned</b> <b>char</b> <b>**</b> <b>data,</b> <b>unsigned</b> <b>int</b>
       <b>*</b> <b>size)</b>
       Retrieve the thumbnail for a file.

       <b>Parameters</b>
           <u>device</u> a pointer to the device to get the thumbnail from.
           <u>id</u> the object ID of the file to retrieve the thumbnail for.
           <u>data</u> a memory pointer to retrieved thumbnail (user frees memory later when done with data).
           <u>size</u> data length of retrieved thumbnail.

       <b>Returns</b>
           0 on success, any other value means failure.

       References <b>LIBMTP_mtpdevice_struct::params</b>.

   <b>int</b> <b>LIBMTP_Handle_Events_Timeout_Completed</b> <b>(struct</b> <b>timeval</b> <b>*</b> <b>tv,</b> <b>int</b> <b>*</b> <b>completed)</b>
       Trivial wrapper around the most generic libusb method for polling for events. Can be used to drive
       asynchronous event detection.

   <b>LIBMTP_file_t</b> <b>*</b> <b>LIBMTP_new_file_t</b> <b>(void)</b>
       This creates a new file metadata structure and allocates memory for it. Notice that if you add strings to
       this structure they will be freed by the corresponding LIBMTP_destroy_file_t operation later, so be
       careful of using strdup() when assigning strings, e.g.:

       LIBMTP_file_t *file = <b>LIBMTP_new_file_t()</b>;
       file-&gt;filename = strdup(namestr);
       ....
       LIBMTP_destroy_file_t(file);

       <b>Returns</b>
           a pointer to the newly allocated metadata structure.

       <b>See</b> <b>also</b>
           <b>LIBMTP_destroy_file_t()</b>

       References <b>LIBMTP_file_struct::filename</b>.

   <b>LIBMTP_filesampledata_t</b> <b>*</b> <b>LIBMTP_new_filesampledata_t</b> <b>(void)</b>
       This creates a new sample data metadata structure and allocates memory for it. Notice that if you add
       strings to this structure they will be freed by the corresponding LIBMTP_destroy_sampledata_t operation
       later, so be careful of using strdup() when assigning strings.

       <b>Returns</b>
           a pointer to the newly allocated metadata structure.

       <b>See</b> <b>also</b>
           LIBMTP_destroy_sampledata_t()

       References <b>LIBMTP_filesampledata_struct::height</b>.

       Referenced by <b>LIBMTP_Get_Representative_Sample_Format()</b>.

   <b>int</b> <b>LIBMTP_Read_Event</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>LIBMTP_event_t</b> <b>*</b> <b>event,</b> <b>uint32_t</b> <b>*</b> <b>out1)</b>
       To read events sent by the device, repeatedly call this function from a secondary thread until the return
       value is &lt; 0.

       <b>Parameters</b>
           <u>device</u> a pointer to the MTP device to poll for events.
           <u>event</u> contains a pointer to be filled in with the event retrieved if the call is successful.
           <u>out1</u> contains the param1 value from the raw event.

       <b>Returns</b>
           0 on success, any other value means the polling loop shall be terminated immediately for this
           session.

       References <b>LIBMTP_mtpdevice_struct::params</b>.

   <b>int</b> <b>LIBMTP_Read_Event_Async</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>LIBMTP_event_cb_fn</b> <b>cb,</b> <b>void</b> <b>*</b> <b>user_data)</b>
       This function reads events sent by the device, in a non-blocking manner. The callback function will be
       called when an event is received, but for the function to make progress, polling must take place, using
       LIBMTP_Handle_Events_Timeout_Completed.

       After an event is received, this function should be called again to listen for the next event.

       For now, this non-blocking mechanism only works with libusb-1.0, and not any of the other usb library
       backends. Attempting to call this method with another backend will always return an error.

       <b>Parameters</b>
           <u>device</u> a pointer to the MTP device to poll for events.
           <u>cb</u> a callback to be invoked when an event is received.
           <u>user_data</u> arbitrary user data passed to the callback.

       <b>Returns</b>
           0 on success, any other value means that the callback was not registered and no event notification
           will take place.

       References <b>LIBMTP_mtpdevice_struct::params</b>.

   <b>int</b> <b>LIBMTP_Send_File_From_File</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>char</b> <b>const</b> <b>*const</b> <b>path,</b> <b>LIBMTP_file_t</b> <b>*const</b>
       <b>filedata,</b> <b>LIBMTP_progressfunc_t</b> <b>const</b> <b>callback,</b> <b>void</b> <b>const</b> <b>*const</b> <b>data)</b>
       This function sends a local file to an MTP device. A filename and a set of metadata must be given as
       input.

       <b>Parameters</b>
           <u>device</u> a pointer to the device to send the track to.
           <u>path</u> the filename of a local file which will be sent.
           <u>filedata</u> a file metadata set to be written along with the file. After this call the field
           filedata-&gt;item_id will contain the new file ID. Other fields such as the filedata-&gt;filename,
           filedata-&gt;parent_id or filedata-&gt;storage_id may also change during this operation due to device
           restrictions, so do not rely on the contents of this struct to be preserved in any way.
           • filedata-&gt;parent_id  should be set to the parent (e.g. folder) to store this file in. If this is 0,
             the file will be stored in the root folder.
           • filedata-&gt;storage_id should be set to the desired storage (e.g. memory card or whatever your device
             presents) to store this file in. Setting this to 0 will store the file on the primary storage.
           <u>callback</u> a progress indicator function or NULL to ignore.
           <u>data</u> a user-defined pointer that is passed along to the progress function in order to pass along some
           user defined data to the progress updates. If not used, set this to NULL.
       <b>Returns</b>
           0 if the transfer was successful, any other value means failure.
       <b>See</b> <b>also</b>
           <b>LIBMTP_Send_File_From_File_Descriptor()</b>
           <b>LIBMTP_Delete_Object()</b>
       References <b>LIBMTP_Send_File_From_File_Descriptor()</b>.
   <b>int</b> <b>LIBMTP_Send_File_From_File_Descriptor</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>int</b> <b>const</b>  <b>fd,</b>  <b>LIBMTP_file_t</b>  <b>*const</b>
       <b>filedata,</b> <b>LIBMTP_progressfunc_t</b> <b>const</b> <b>callback,</b> <b>void</b> <b>const</b> <b>*const</b> <b>data)</b>
       This  function  sends  a  generic  file  from a file descriptor to an MTP device. A filename and a set of
       metadata must be given as input.
       This can potentially be used  for  sending  in  a  stream  of  unknown  length.  Send  music  files  with
       <b>LIBMTP_Send_Track_From_File_Descriptor()</b>
       <b>Parameters</b>
           <u>device</u> a pointer to the device to send the file to.
           <u>fd</u> the filedescriptor for a local file which will be sent.
           <u>filedata</u>  a  file  metadata  set  to  be  written  along  with  the  file.  After this call the field
           filedata-&gt;item_id will contain the  new  file  ID.  Other  fields  such  as  the  filedata-&gt;filename,
           filedata-&gt;parent_id  or  filedata-&gt;storage_id  may  also  change  during this operation due to device
           restrictions, so do not rely on the contents of this struct to be preserved in any way.
           • filedata-&gt;parent_id should be set to the parent (e.g. folder) to store this file in. If this is  0,
             the file will be stored in the root folder.
           • filedata-&gt;storage_id should be set to the desired storage (e.g. memory card or whatever your device
             presents) to store this file in. Setting this to 0 will store the file on the primary storage.
           <u>callback</u> a progress indicator function or NULL to ignore.
           <u>data</u> a user-defined pointer that is passed along to the progress function in order to pass along some
           user defined data to the progress updates. If not used, set this to NULL.
       <b>Returns</b>
           0 if the transfer was successful, any other value means failure.
       <b>See</b> <b>also</b>
           <b>LIBMTP_Send_File_From_File()</b>
           <b>LIBMTP_Send_Track_From_File_Descriptor()</b>
           <b>LIBMTP_Delete_Object()</b>
       References    <b>_PTP_USB::callback_active</b>,    <b>LIBMTP_file_struct::filesize</b>,    <b>LIBMTP_file_struct::item_id</b>,
       <b>LIBMTP_destroy_file_t()</b>,           <b>LIBMTP_Get_Filemetadata()</b>,            <b>LIBMTP_mtpdevice_struct::params</b>,
       <b>LIBMTP_file_struct::parent_id</b>, <b>LIBMTP_file_struct::storage_id</b>, and <b>LIBMTP_mtpdevice_struct::usbinfo</b>.
       Referenced by <b>LIBMTP_Send_File_From_File()</b>, and <b>LIBMTP_Send_Track_From_File_Descriptor()</b>.
   <b>int</b>  <b>LIBMTP_Send_File_From_Handler</b>  <b>(LIBMTP_mtpdevice_t</b>  <b>*</b>  <b>device,</b>  <b>MTPDataGetFunc</b>  <b>get_func,</b>  <b>void</b>  <b>*</b> <b>priv,</b>
       <b>LIBMTP_file_t</b> <b>*const</b> <b>filedata,</b> <b>LIBMTP_progressfunc_t</b> <b>const</b> <b>callback,</b> <b>void</b> <b>const</b> <b>*const</b> <b>data)</b>
       This function sends a generic file from a handler function to an MTP device. A  filename  and  a  set  of
       metadata must be given as input.
       This  can  potentially  be  used  for  sending  in  a  stream  of  unknown  length. Send music files with
       <b>LIBMTP_Send_Track_From_Handler()</b>
       <b>Parameters</b>
           <u>device</u> a pointer to the device to send the file to.
           <u>get_func</u> the function to call to get data to write
           <u>priv</u> a user-defined pointer that is passed along to get_func. If not used, this is set to NULL.
           <u>filedata</u> a file metadata set  to  be  written  along  with  the  file.  After  this  call  the  field
           filedata-&gt;item_id  will  contain  the  new  file  ID.  Other  fields  such as the filedata-&gt;filename,
           filedata-&gt;parent_id or filedata-&gt;storage_id may also change  during  this  operation  due  to  device
           restrictions, so do not rely on the contents of this struct to be preserved in any way.
           • filedata-&gt;parent_id  should be set to the parent (e.g. folder) to store this file in. If this is 0,
             the file will be stored in the root folder.
           • filedata-&gt;storage_id should be set to the desired storage (e.g. memory card or whatever your device
             presents) to store this file in. Setting this to 0 will store the file on the primary storage.
           <u>callback</u> a progress indicator function or NULL to ignore.
           <u>data</u> a user-defined pointer that is passed along to the progress function in order to pass along some
           user defined data to the progress updates. If not used, set this to NULL.
       <b>Returns</b>
           0 if the transfer was successful, any other value means failure.
       <b>See</b> <b>also</b>
           <b>LIBMTP_Send_File_From_File()</b>
           <b>LIBMTP_Send_Track_From_File_Descriptor()</b>
           <b>LIBMTP_Delete_Object()</b>
       References    <b>_PTP_USB::callback_active</b>,    <b>LIBMTP_file_struct::filesize</b>,    <b>LIBMTP_file_struct::item_id</b>,
       <b>LIBMTP_destroy_file_t()</b>,            <b>LIBMTP_Get_Filemetadata()</b>,           <b>LIBMTP_mtpdevice_struct::params</b>,
       <b>LIBMTP_file_struct::parent_id</b>, <b>LIBMTP_file_struct::storage_id</b>, and <b>LIBMTP_mtpdevice_struct::usbinfo</b>.
       Referenced by <b>LIBMTP_Send_Track_From_Handler()</b>.
   <b>int</b>    <b>LIBMTP_Send_Representative_Sample</b>    <b>(LIBMTP_mtpdevice_t</b>    <b>*</b>    <b>device,</b>    <b>uint32_t</b>     <b>const</b>     <b>id,</b>
       <b>LIBMTP_filesampledata_t</b> <b>*</b> <b>sampledata)</b>
       This  routine  sends  representative  sample  data  for an object. This uses the RepresentativeSampleData
       property of the album, if the device supports it. The data should be of a format acceptable to the player
       (for iRiver and Creative, this seems to be JPEG) and must not be too large. (for a Creative, max seems to
       be  about  20KB.)  Check  by  calling  <b>LIBMTP_Get_Representative_Sample_Format()</b>  to  get  maximum  size,
       dimensions, etc..
       <b>Parameters</b>
           <u>device</u> a pointer to the device which the object is on.
           <u>id</u> unique id of the object to set artwork for.
           <u>sampledata</u> pointer to LIBMTP_filesampledata_t struct containing data
       <b>Returns</b>
           0 on success, any other value means failure.
       <b>See</b> <b>also</b>
           <b>LIBMTP_Get_Representative_Sample()</b>
           <b>LIBMTP_Get_Representative_Sample_Format()</b>
           <b>LIBMTP_Create_New_Album()</b>
       References           <b>LIBMTP_filesampledata_struct::data</b>,          <b>LIBMTP_filesampledata_struct::duration</b>,
       <b>LIBMTP_filesampledata_struct::filetype</b>,                             <b>LIBMTP_filesampledata_struct::height</b>,
       <b>LIBMTP_mtpdevice_struct::params</b>,   <b>LIBMTP_filesampledata_struct::size</b>,  <b>LIBMTP_mtpdevice_struct::usbinfo</b>,
       and <b>LIBMTP_filesampledata_struct::width</b>.
   <b>int</b> <b>LIBMTP_Set_File_Name</b> <b>(LIBMTP_mtpdevice_t</b> <b>*</b> <b>device,</b> <b>LIBMTP_file_t</b> <b>*</b> <b>file,</b> <b>const</b> <b>char</b> <b>*</b> <b>newname)</b>
       This function renames a single file. This  simply  means  that  the  PTP_OPC_ObjectFileName  property  is
       updated, if this is supported by the device.
       <b>Parameters</b>
           <u>device</u> a pointer to the device that contains the file.
           <u>file</u>  the  file metadata of the file to rename. On success, the filename member is updated. Be aware,
           that this name can be different than newname depending of device restrictions.
           <u>newname</u> the new filename for this object.
       <b>Returns</b>
           0 on success, any other value means failure.
       References <b>LIBMTP_file_struct::filename</b>, <b>LIBMTP_file_struct::filetype</b>, and <b>LIBMTP_file_struct::item_id</b>.
</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for libmtp from the source code.

libmtp                                           Version 1.1.22                                         <u><a href="../man3/files.3.html">files</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>