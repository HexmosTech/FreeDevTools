<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>funopen, fropen, fwopen — open a stream</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbsd-dev">libbsd-dev_0.12.2-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       funopen, fropen, fwopen — open a stream

</pre><h4><b>LIBRARY</b></h4><pre>
       Utility functions from BSD systems (libbsd, -lbsd)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;</b>
       (See <u><a href="../man7/libbsd.7.html">libbsd</a></u>(7) for include usage.)

       <u>FILE</u> <u>*</u>
       <b>funopen</b>(<u>const</u>       <u>void</u>       <u>*cookie</u>,      <u>int</u>      <u>(*readfn)(void</u>      <u>*,</u>      <u>char</u>      <u>*,</u>      <u>int)</u>,
           <u>int</u>   <u>(*writefn)(void</u>   <u>*,</u>   <u>const</u>   <u>char</u>   <u>*,</u>   <u>int)</u>,   <u>off_t</u>   <u>(*seekfn)(void</u>   <u>*,</u>   <u>off_t,</u>   <u>int)</u>,
           <u>int</u> <u>(*closefn)(void</u> <u>*)</u>);

       <u>FILE</u> <u>*</u>
       <b>fropen</b>(<u>void</u> <u>*cookie</u>, <u>int</u> <u>(*readfn)(void</u> <u>*,</u> <u>char</u> <u>*,</u> <u>int)</u>);

       <u>FILE</u> <u>*</u>
       <b>fwopen</b>(<u>void</u> <u>*cookie</u>, <u>int</u> <u>(*writefn)(void</u> <u>*,</u> <u>const</u> <u>char</u> <u>*,</u> <u>int)</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>funopen</b>()  function  associates  a stream with up to four “I/O functions”.  Either <u>readfn</u> or <u>writefn</u>
       must be specified; the others can be given as an appropriately-typed NULL pointer.  These  I/O  functions
       will be used to read, write, seek and close the new stream.

       In  general,  omitting  a  function  means  that  any  attempt to perform the associated operation on the
       resulting stream will fail.  If the close function is omitted, closing the stream will flush any buffered
       output and then succeed.

       The calling conventions of <u>readfn</u>, <u>writefn</u>,  <u>seekfn</u>  and  <u>closefn</u>  must  match  those,  respectively,  of
       <u><a href="../man2/read.2.html">read</a></u>(2),  <u><a href="../man2/write.2.html">write</a></u>(2),  <u><a href="../man2/lseek.2.html">lseek</a></u>(2),  and  <u><a href="../man2/close.2.html">close</a></u>(2)  with  the single exception that they are passed the <u>cookie</u>
       argument specified to <b>funopen</b>() in place of the traditional file descriptor argument.

       Read and write I/O functions are allowed to change the  underlying  buffer  on  fully  buffered  or  line
       buffered  streams  by  calling  <u><a href="../man3/setvbuf.3.html">setvbuf</a></u>(3).   They  are also not required to completely fill or empty the
       buffer.  They are not, however, allowed to change streams from unbuffered to buffered or  to  change  the
       state  of  the  line  buffering  flag.   They  must also be prepared to have read or write calls occur on
       buffers other than the one most recently specified.

       All user I/O functions can report an error by returning -1.  Additionally, all of  the  functions  should
       set the external variable <u>errno</u> appropriately if an error occurs.

       An error on <b>closefn</b>() does not keep the stream open.

       As  a  convenience,  the  include  file  &lt;<u>stdio.h</u>&gt;  defines  the macros <b>fropen</b>() and <b>fwopen</b>() as calls to
       <b>funopen</b>() with only a read or write function specified.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Upon successful completion, <b>funopen</b>() returns a FILE pointer.  Otherwise, NULL is returned and the global
       variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       [EINVAL]           The <b>funopen</b>() function was called without  either  a  read  or  write  function.   The
                          <b>funopen</b>() function may also fail and set <u>errno</u> for any of the errors specified for the
                          routine <u><a href="../man3/malloc.3.html">malloc</a></u>(3).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/fcntl.2.html">fcntl</a></u>(2), <u><a href="../man2/open.2.html">open</a></u>(2), <u><a href="../man3/fclose.3.html">fclose</a></u>(3), <u><a href="../man3/fopen.3.html">fopen</a></u>(3), <u><a href="../man3/fseek.3.html">fseek</a></u>(3), <u><a href="../man3/setbuf.3.html">setbuf</a></u>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>funopen</b>() functions first appeared in 4.4BSD.

</pre><h4><b>BUGS</b></h4><pre>
       The  <b>funopen</b>() function may not be portable to systems other than BSD, glibc- and musl-based ones (as the
       libbsd implementation is only provided when the system has <b>fopencookie</b>() available).

       On FreeBSD, OpenBSD and DragonFly the <b>funopen</b>() interface erroneously assumes that <u>fpos_t</u> is an  integral
       type,  and uses it in the <u>seekfn</u> hook; but because code using a <u>seekfn</u> hook will fail to build on systems
       where <u>fpos_t</u> is a struct, and it will need to be slightly fixed anyway, the  implementation  provided  by
       libbsd (in the same way as NetBSD) uses the correct <u>off_t</u> types.

Debian                                           March 19, 2004                                    <u><a href="../man3bsd/funopen.3bsd.html">funopen</a></u>(3bsd)
</pre>
 </div>
</div></section>
</div>
</body>
</html>