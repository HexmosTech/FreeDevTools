<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_pie.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_pie.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;rte_random.h&gt;
       #include &lt;rte_debug.h&gt;
       #include &lt;rte_cycles.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_pie_params</b>
       struct <b>rte_pie_config</b>
       struct <b>rte_pie</b>

   <b>Macros</b>
       #define <b>RTE_DQ_THRESHOLD</b>   16384
       #define <b>RTE_DQ_WEIGHT</b>   0.25
       #define <b>RTE_ALPHA</b>   0.125
       #define <b>RTE_BETA</b>   1.25
       #define <b>RTE_RAND_MAX</b>   ~0LLU

   <b>Functions</b>
       int <b>rte_pie_rt_data_init</b> (struct <b>rte_pie</b> *pie)
           Initialises run-time data.
       int <b>rte_pie_config_init</b> (struct <b>rte_pie_config</b> *pie_cfg, const uint16_t qdelay_ref, const uint16_t
           dp_update_interval, const uint16_t max_burst, const uint16_t tailq_th)
           Configures a single PIE configuration parameter structure.
       static int <b>rte_pie_enqueue_empty</b> (const struct <b>rte_pie_config</b> *pie_cfg, struct <b>rte_pie</b> *pie, uint32_t
           pkt_len)
           Decides packet enqueue when queue is empty.
       static void <b>_calc_drop_probability</b> (const struct <b>rte_pie_config</b> *pie_cfg, struct <b>rte_pie</b> *pie, uint64_t
           time)
           make a decision to drop or enqueue a packet based on probability criteria
       static int <b>_rte_pie_drop</b> (const struct <b>rte_pie_config</b> *pie_cfg, struct <b>rte_pie</b> *pie)
           make a decision to drop or enqueue a packet based on probability criteria
       static int <b>rte_pie_enqueue_nonempty</b> (const struct <b>rte_pie_config</b> *pie_cfg, struct <b>rte_pie</b> *pie, uint32_t
           pkt_len, const uint64_t time)
           Decides if new packet should be enqueued or dropped for non-empty queue.
       static int <b>rte_pie_enqueue</b> (const struct <b>rte_pie_config</b> *pie_cfg, struct <b>rte_pie</b> *pie, const unsigned int
           qlen, uint32_t pkt_len, const uint64_t time)
           Decides if new packet should be enqueued or dropped Updates run time data and gives verdict whether
           to enqueue or drop the packet.
       static void <b>rte_pie_dequeue</b> (struct <b>rte_pie</b> *pie, uint32_t pkt_len, uint64_t time)
           PIE rate estimation method Called on each packet departure.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Proportional Integral controller Enhanced (PIE)

       Definition in file <b>rte_pie.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_DQ_THRESHOLD</b>   <b>16384</b>
       Queue length threshold (2^14) to start measurement cycle (bytes)

       Definition at line <b>25</b> of file <b>rte_pie.h</b>.

   <b>#define</b> <b>RTE_DQ_WEIGHT</b>   <b>0.25</b>
       Weight (RTE_DQ_THRESHOLD/2^16) to compute dequeue rate

       Definition at line <b>26</b> of file <b>rte_pie.h</b>.

   <b>#define</b> <b>RTE_ALPHA</b>   <b>0.125</b>
       Weights in drop probability calculations

       Definition at line <b>27</b> of file <b>rte_pie.h</b>.

   <b>#define</b> <b>RTE_BETA</b>   <b>1.25</b>
       Weights in drop probability calculations

       Definition at line <b>28</b> of file <b>rte_pie.h</b>.

   <b>#define</b> <b>RTE_RAND_MAX</b>   <b>~0LLU</b>
       Max value of the random number

       Definition at line <b>29</b> of file <b>rte_pie.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>rte_pie_rt_data_init</b> <b>(struct</b> <b>rte_pie</b> <b>*</b> <b>pie)</b>
       Initialises run-time data.

       <b>Parameters</b>
           <u>pie</u> [in,out] data pointer to PIE runtime data

       <b>Returns</b>
           Operation status

       <b>Return</b> <b>values</b>
           <u>0</u> success
           <u>!0</u> error

   <b>int</b> <b>rte_pie_config_init</b> <b>(struct</b> <b>rte_pie_config</b> <b>*</b> <b>pie_cfg,</b> <b>const</b> <b>uint16_t</b> <b>qdelay_ref,</b> <b>const</b> <b>uint16_t</b>
       <b>dp_update_interval,</b> <b>const</b> <b>uint16_t</b> <b>max_burst,</b> <b>const</b> <b>uint16_t</b> <b>tailq_th)</b>
       Configures a single PIE configuration parameter structure.

       <b>Parameters</b>
           <u>pie_cfg</u> [in,out] config pointer to a PIE configuration parameter structure
           <u>qdelay_ref</u> [in] latency <a href="../manmilliseconds/target.milliseconds.html">target</a>(milliseconds)
           <u>dp_update_interval</u> [in] update interval for drop probability (milliseconds)
           <u>max_burst</u> [in] maximum burst allowance (milliseconds)
           <u>tailq_th</u> [in] tail drop threshold for the queue (number of packets)

       <b>Returns</b>
           Operation status

       <b>Return</b> <b>values</b>
           <u>0</u> success
           <u>!0</u> error

   <b>static</b> <b>int</b> <b>rte_pie_enqueue_empty</b> <b>(const</b> <b>struct</b> <b>rte_pie_config</b> <b>*</b> <b>pie_cfg,</b> <b>struct</b> <b>rte_pie</b> <b>*</b> <b>pie,</b> <b>uint32_t</b>
       <b>pkt_len)</b> <b>[static]</b>
       Decides packet enqueue when queue is empty. Note: packet is never dropped in this particular case.

       <b>Parameters</b>
           <u>pie_cfg</u> [in] config pointer to a PIE configuration parameter structure
           <u>pie</u> [in, out] data pointer to PIE runtime data
           <u>pkt_len</u> [in] packet length in bytes

       <b>Returns</b>
           Operation status

       <b>Return</b> <b>values</b>
           <u>0</u> enqueue the packet
           <u>!0</u> drop the packet

       If the queue has been idle for a while, turn off PIE and Reset counters

       Definition at line <b>116</b> of file <b>rte_pie.h</b>.

   <b>static</b> <b>void</b> <b>_calc_drop_probability</b> <b>(const</b> <b>struct</b> <b>rte_pie_config</b> <b>*</b> <b>pie_cfg,</b> <b>struct</b> <b>rte_pie</b> <b>*</b> <b>pie,</b> <b>uint64_t</b>
       <b>time)</b> <b>[static]</b>
       make a decision to drop or enqueue a packet based on probability criteria

       <b>Parameters</b>
           <u>pie_cfg</u> [in] config pointer to a PIE configuration parameter structure
           <u>pie</u> [in, out] data pointer to PIE runtime data
           <u>time</u> [in] current time (measured in cpu cycles)

       Definition at line <b>147</b> of file <b>rte_pie.h</b>.

   <b>static</b> <b>int</b> <b>_rte_pie_drop</b> <b>(const</b> <b>struct</b> <b>rte_pie_config</b> <b>*</b> <b>pie_cfg,</b> <b>struct</b> <b>rte_pie</b> <b>*</b> <b>pie)</b> <b>[inline],</b>  <b>[static]</b>
       make a decision to drop or enqueue a packet based on probability criteria

       <b>Parameters</b>
           <u>pie_cfg</u> [in] config pointer to a PIE configuration parameter structure
           <u>pie</u> [in, out] data pointer to PIE runtime data

       <b>Returns</b>
           operation status

       <b>Return</b> <b>values</b>
           <u>0</u> enqueue the packet
           <u>1</u> drop the packet

       Definition at line <b>210</b> of file <b>rte_pie.h</b>.

   <b>static</b> <b>int</b> <b>rte_pie_enqueue_nonempty</b> <b>(const</b> <b>struct</b> <b>rte_pie_config</b> <b>*</b> <b>pie_cfg,</b> <b>struct</b> <b>rte_pie</b> <b>*</b> <b>pie,</b> <b>uint32_t</b>
       <b>pkt_len,</b> <b>const</b> <b>uint64_t</b> <b>time)</b> <b>[inline],</b>  <b>[static]</b>
       Decides if new packet should be enqueued or dropped for non-empty queue.

       <b>Parameters</b>
           <u>pie_cfg</u> [in] config pointer to a PIE configuration parameter structure
           <u>pie</u> [in,out] data pointer to PIE runtime data
           <u>pkt_len</u> [in] packet length in bytes
           <u>time</u> [in] current time (measured in cpu cycles)

       <b>Returns</b>
           Operation status

       <b>Return</b> <b>values</b>
           <u>0</u> enqueue the packet
           <u>1</u> drop the packet based on max threshold criterion
           <u>2</u> drop the packet based on mark probability criterion

       Definition at line <b>258</b> of file <b>rte_pie.h</b>.

   <b>static</b> <b>int</b> <b>rte_pie_enqueue</b> <b>(const</b> <b>struct</b> <b>rte_pie_config</b> <b>*</b> <b>pie_cfg,</b> <b>struct</b> <b>rte_pie</b> <b>*</b> <b>pie,</b> <b>const</b> <b>unsigned</b> <b>int</b>
       <b>qlen,</b> <b>uint32_t</b> <b>pkt_len,</b> <b>const</b> <b>uint64_t</b> <b>time)</b> <b>[inline],</b>  <b>[static]</b>
       Decides if new packet should be enqueued or dropped Updates run time data and gives verdict whether to
       enqueue or drop the packet.

       <b>Parameters</b>
           <u>pie_cfg</u> [in] config pointer to a PIE configuration parameter structure
           <u>pie</u> [in,out] data pointer to PIE runtime data
           <u>qlen</u> [in] queue length
           <u>pkt_len</u> [in] packet length in bytes
           <u>time</u> [in] current time stamp (measured in cpu cycles)

       <b>Returns</b>
           Operation status

       <b>Return</b> <b>values</b>
           <u>0</u> enqueue the packet
           <u>1</u> drop the packet based on drop probability criteria

       Definition at line <b>325</b> of file <b>rte_pie.h</b>.

   <b>static</b> <b>void</b> <b>rte_pie_dequeue</b> <b>(struct</b> <b>rte_pie</b> <b>*</b> <b>pie,</b> <b>uint32_t</b> <b>pkt_len,</b> <b>uint64_t</b> <b>time)</b> <b>[inline],</b>  <b>[static]</b>
       PIE rate estimation method Called on each packet departure.

       <b>Parameters</b>
           <u>pie</u> [in] data pointer to PIE runtime data
           <u>pkt_len</u> [in] packet length in bytes
           <u>time</u> [in] current time stamp in cpu cycles

       Definition at line <b>349</b> of file <b>rte_pie.h</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                    <u><a href="../man3/rte_pie.h.3.html">rte_pie.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>