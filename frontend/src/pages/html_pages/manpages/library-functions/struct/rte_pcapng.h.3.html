<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_pcapng.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_pcapng.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;sys/types.h&gt;
       #include &lt;rte_mempool.h&gt;

   <b>Enumerations</b>
       enum <b>rte_pcapng_direction</b>

   <b>Functions</b>
       rte_pcapng_t * <b>rte_pcapng_fdopen</b> (int fd, const char *osname, const char *hardware, const char *appname,
           const char *comment)
       void <b>rte_pcapng_close</b> (rte_pcapng_t *self)
       int <b>rte_pcapng_add_interface</b> (rte_pcapng_t *self, uint16_t port, const char *ifname, const char *ifdescr,
           const char *filter)
       struct <b>rte_mbuf</b> * <b>rte_pcapng_copy</b> (uint16_t port_id, uint32_t queue, const struct <b>rte_mbuf</b> *m, struct
           <b>rte_mempool</b> *mp, uint32_t length, enum <b>rte_pcapng_direction</b> direction, const char *comment)
       uint32_t <b>rte_pcapng_mbuf_size</b> (uint32_t length)
       ssize_t <b>rte_pcapng_write_packets</b> (rte_pcapng_t *self, struct <b>rte_mbuf</b> *pkts[], uint16_t nb_pkts)
       ssize_t <b>rte_pcapng_write_stats</b> (rte_pcapng_t *self, uint16_t port, uint64_t ifrecv, uint64_t ifdrop,
           const char *comment)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE pcapng

       Pcapng is an evolution from the pcap format, created to address some of its deficiencies. Namely, the
       lack of extensibility and inability to store additional information.

       For details about the file format see RFC: https://www.ietf.org/id/draft-tuexen-opsawg-pcapng-03.html and
       https://github.com/pcapng/pcapng/

       Definition in file <b>rte_pcapng.h</b>.

</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>rte_pcapng_direction</b>
       Direction flag These should match Enhanced Packet Block flag bits

       Definition at line <b>95</b> of file <b>rte_pcapng.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>rte_pcapng_t</b> <b>*</b> <b>rte_pcapng_fdopen</b> <b>(int</b> <b>fd,</b> <b>const</b> <b>char</b> <b>*</b> <b>osname,</b> <b>const</b> <b>char</b> <b>*</b> <b>hardware,</b> <b>const</b> <b>char</b> <b>*</b> <b>appname,</b>
       <b>const</b> <b>char</b> <b>*</b> <b>comment)</b>
       Write data to existing open file

       <b>Parameters</b>
           <u>fd</u> file descriptor
           <u>osname</u> Optional description of the operating system. Examples: 'Debian 11', 'Windows Server 22'
           <u>hardware</u> Optional description of the hardware used to create this file. Examples: 'x86 Virtual
           Machine'
           <u>appname</u> Optional: application name recorded in the pcapng file. Example: 'dpdk-dumpcap 1.0 (DPDK
           20.11)'
           <u>comment</u> Optional comment to add to file header.

       <b>Returns</b>
           handle to library, or NULL in case of error (and rte_errno is set).

   <b>void</b> <b>rte_pcapng_close</b> <b>(rte_pcapng_t</b> <b>*</b> <b>self)</b>
       Close capture file

       <b>Parameters</b>
           <u>self</u> handle to library

   <b>int</b> <b>rte_pcapng_add_interface</b> <b>(rte_pcapng_t</b> <b>*</b> <b>self,</b> <b>uint16_t</b> <b>port,</b> <b>const</b> <b>char</b> <b>*</b> <b>ifname,</b> <b>const</b> <b>char</b> <b>*</b> <b>ifdescr,</b>
       <b>const</b> <b>char</b> <b>*</b> <b>filter)</b>
       Add interface information to the capture file

       <b>Parameters</b>
           <u>self</u> The handle to the packet capture file
           <u>port</u> The Ethernet port to report stats on.
           <u>ifname</u> (optional) Interface name to record in the file. If not specified, name will be constructed
           from port
           <u>ifdescr</u> (optional) Interface description to record in the file.
           <u>filter</u> Capture filter to record in the file.

       Interfaces must be added to the output file after opening and before any packet record. All ports used in
       packet capture must be added.

   <b>struct</b> <b>rte_mbuf</b> <b>*</b> <b>rte_pcapng_copy</b> <b>(uint16_t</b> <b>port_id,</b> <b>uint32_t</b> <b>queue,</b> <b>const</b> <b>struct</b> <b>rte_mbuf</b> <b>*</b> <b>m,</b> <b>struct</b>
       <b>rte_mempool</b> <b>*</b> <b>mp,</b> <b>uint32_t</b> <b>length,</b> <b>enum</b> <b>rte_pcapng_direction</b> <b>direction,</b> <b>const</b> <b>char</b> <b>*</b> <b>comment)</b>
       Format an mbuf for writing to file.

       <b>Parameters</b>
           <u>port_id</u> The Ethernet port on which packet was received or is going to be transmitted.
           <u>queue</u> The queue on the Ethernet port where packet was received or is going to be transmitted.
           <u>mp</u> The mempool from which the 'clone' mbufs are allocated.
           <u>m</u> The mbuf to copy
           <u>length</u> The upper limit on bytes to copy. Passing UINT32_MAX means all data (after offset).
           <u>direction</u> The direction of the packer: receive, transmit or unknown.
           <u>comment</u> Packet comment.

       <b>Returns</b>

           • The pointer to the new mbuf formatted for pcapng_write

           • NULL if allocation fails.

   <b>uint32_t</b> <b>rte_pcapng_mbuf_size</b> <b>(uint32_t</b> <b>length)</b>
       Determine optimum mbuf data size.

       <b>Parameters</b>
           <u>length</u> The largest packet that will be copied.

       <b>Returns</b>
           The  minimum size of mbuf data to handle packet with length bytes. Accounting for required header and
           trailer fields

   <b>ssize_t</b> <b>rte_pcapng_write_packets</b> <b>(rte_pcapng_t</b> <b>*</b> <b>self,</b> <b>struct</b> <b>rte_mbuf</b> <b>*</b> <b>pkts[],</b> <b>uint16_t</b> <b>nb_pkts)</b>
       Write packets to the capture file.

       Packets to be captured are copied by <b>rte_pcapng_copy()</b> and then this function is called to write them  to
       the file.

       <b>Warning</b>
           Do not pass original mbufs from transmit or receive or file will be invalid pcapng format.

       <b>Parameters</b>
           <u>self</u> The handle to the packet capture file
           <u>pkts</u>  The  address  of  an  array of <u>nb_pkts</u> pointers to <b>rte_mbuf</b> <b>structures</b> <b>which</b> <b>contain</b> <b>the</b> <b>output</b>
           <b>packets</b>
           <u>nb_pkts</u> <b>The</b> <b>number</b> <b>of</b> <b>packets</b> <b>to</b> <b>write</b> <b>to</b> <b>the</b> <b>file.</b>

       <b>Returns</b>
           The number of bytes written to file, -1 on failure to write file.  The  mbuf's  in  <u>pkts</u>  are  always
           freed.

   <b>ssize_t</b>  <b>rte_pcapng_write_stats</b>  <b>(rte_pcapng_t</b> <b>*</b> <b>self,</b> <b>uint16_t</b> <b>port,</b> <b>uint64_t</b> <b>ifrecv,</b> <b>uint64_t</b> <b>ifdrop,</b> <b>const</b>
       <b>char</b> <b>*</b> <b>comment)</b>
       Write an Interface statistics block. For statistics, use 0 if don't know or care to report it. Should  be
       called before closing capture to report results.

       <b>Parameters</b>
           <u>self</u> The handle to the packet capture file
           <u>port</u> The Ethernet port to report stats on.
           <u>ifrecv</u> The number of packets received by capture. Optional: use UINT64_MAX if not known.
           <u>ifdrop</u> The number of packets missed by the capture process. Optional: use UINT64_MAX if not known.
           <u>comment</u> Optional comment to add to statistics.

       <b>Returns</b>
           number of bytes written to file, -1 on failure to write file

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                 <u><a href="../man3/rte_pcapng.h.3.html">rte_pcapng.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>