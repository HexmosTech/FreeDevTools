<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASN1_AUX, ASN1_PRINT_ARG, ASN1_STREAM_ARG, ASN1_aux_cb, ASN1_aux_const_cb - ASN.1 auxiliary data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ASN1_AUX, ASN1_PRINT_ARG, ASN1_STREAM_ARG, ASN1_aux_cb, ASN1_aux_const_cb - ASN.1 auxiliary data

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/asn1t.h&gt;

        struct ASN1_AUX_st {
            void *app_data;
            int flags;
            int ref_offset;             /* Offset of reference value */
            int ref_lock;               /* Offset to an CRYPTO_RWLOCK */
            ASN1_aux_cb *asn1_cb;
            int enc_offset;             /* Offset of ASN1_ENCODING structure */
            ASN1_aux_const_cb *asn1_const_cb; /* for ASN1_OP_I2D_ and ASN1_OP_PRINT_ */
        };
        typedef struct ASN1_AUX_st ASN1_AUX;

        struct ASN1_PRINT_ARG_st {
            BIO *out;
            int indent;
            const ASN1_PCTX *pctx;
        };
        typedef struct ASN1_PRINT_ARG_st ASN1_PRINT_ARG;

        struct ASN1_STREAM_ARG_st {
            BIO *out;
            BIO *ndef_bio;
            unsigned char **boundary;
        };
        typedef struct ASN1_STREAM_ARG_st ASN1_STREAM_ARG;

        typedef int ASN1_aux_cb(int operation, ASN1_VALUE **in, const ASN1_ITEM *it,
                                void *exarg);
        typedef int ASN1_aux_const_cb(int operation, const ASN1_VALUE **in,
                                      const ASN1_ITEM *it, void *exarg);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       ASN.1 data structures can be associated with an <b>ASN1_AUX</b> object to supply additional information about
       the ASN.1 structure. An <b>ASN1_AUX</b> structure is associated with the structure during the definition of the
       ASN.1 template. For example an <b>ASN1_AUX</b> structure will be associated by using one of the various ASN.1
       template definition macros that supply auxiliary information such as <b>ASN1_SEQUENCE_enc()</b>,
       <b>ASN1_SEQUENCE_ref()</b>, <b>ASN1_SEQUENCE_cb_const_cb()</b>, <b>ASN1_SEQUENCE_const_cb()</b>, <b>ASN1_SEQUENCE_cb()</b> or
       <b>ASN1_NDEF_SEQUENCE_cb()</b>.

       An <b>ASN1_AUX</b> structure contains the following information.

       <u>app_data</u>
           Arbitrary application data

       <u>flags</u>
           Flags which indicate the auxiliarly functionality supported.

           The <b>ASN1_AFLG_REFCOUNT</b> flag indicates that objects support reference counting.

           The <b>ASN1_AFLG_ENCODING</b> flag indicates that the original encoding of the object will be saved.

           The  <b>ASN1_AFLG_BROKEN</b>  flag  is a work around for broken encoders where the sequence length value may
           not be correct. This should generally not be used.

           The <b>ASN1_AFLG_CONST_CB</b> flag indicates that the "const" form of the <b>ASN1_AUX</b> callback should  be  used
           in preference to the non-const form.

       <u>ref_offset</u>
           If  the <b>ASN1_AFLG_REFCOUNT</b> flag is set then this value is assumed to be an offset into the <b>ASN1_VALUE</b>
           structure where a <b>CRYPTO_REF_COUNT</b> may be found for the purposes of reference counting.

       <u>ref_lock</u>
           If the <b>ASN1_AFLG_REFCOUNT</b> flag is set then this value is assumed to be an offset into the  <b>ASN1_VALUE</b>
           structure where a <b>CRYPTO_RWLOCK</b> may be found for the purposes of reference counting.

       <u>asn1_cb</u>
           A  callback that will be invoked at various points during the processing of the <b>ASN1_VALUE</b>. See below
           for further details.

       <u>enc_offset</u>
           Offset into the <b>ASN1_VALUE</b> object where the original encoding of the object  will  be  saved  if  the
           <b>ASN1_AFLG_ENCODING</b> flag has been set.

       <u>asn1_const_cb</u>
           A  callback  that  will be invoked at various points during the processing of the <b>ASN1_VALUE</b>. This is
           used in preference to the <u>asn1_cb</u> callback if the <b>ASN1_AFLG_CONST_CB</b>  flag  is  set.  See  below  for
           further details.

       During  the  processing  of  an  <b>ASN1_VALUE</b> object the callbacks set via <u>asn1_cb</u> or <u>asn1_const_cb</u> will be
       invoked as a result of various events indicated via the <u>operation</u> parameter. The value of <u>*in</u> will be the
       <b>ASN1_VALUE</b> object being processed based on the template in <u>it</u>. An additional operation specific parameter
       may be passed in <u>exarg</u>. The currently supported operations are as follows. The callbacks should return  a
       positive value on success or zero on error, unless otherwise noted below.

       <b>ASN1_OP_NEW_PRE</b>
           Invoked  when  processing a <b>CHOICE</b>, <b>SEQUENCE</b> or <b>NDEF_SEQUENCE</b> structure prior to an <b>ASN1_VALUE</b> object
           being allocated. The callback may allocate the <b>ASN1_VALUE</b> itself and store it in <u>*pval</u>. If it does so
           it should return 2 from the callback. On error it should return 0.

       <b>ASN1_OP_NEW_POST</b>
           Invoked when processing a <b>CHOICE</b>, <b>SEQUENCE</b> or <b>NDEF_SEQUENCE</b> structure after an <b>ASN1_VALUE</b> object  has
           been allocated. The allocated object is in <u>*pval</u>.

       <b>ASN1_OP_FREE_PRE</b>
           Invoked  when  processing  a  <b>CHOICE</b>,  <b>SEQUENCE</b>  or  <b>NDEF_SEQUENCE</b>  structure  immediately  before an
           <b>ASN1_VALUE</b> is freed. If the callback originally constructed the <b>ASN1_VALUE</b> via  <b>ASN1_OP_NEW_PRE</b>  then
           it  should  free  it  at  this point and return 2 from the callback. Otherwise it should return 1 for
           success or 0 on error.

       <b>ASN1_OP_FREE_POST</b>
           Invoked when processing a <b>CHOICE</b>, <b>SEQUENCE</b> or <b>NDEF_SEQUENCE</b> structure  immediately  after  <b>ASN1_VALUE</b>
           sub-structures are freed.

       <b>ASN1_OP_D2I_PRE</b>
           Invoked  when  processing  a  <b>CHOICE</b>,  <b>SEQUENCE</b> or <b>NDEF_SEQUENCE</b> structure immediately before a "d2i"
           operation for the <b>ASN1_VALUE</b>.

       <b>ASN1_OP_D2I_POST</b>
           Invoked when processing a <b>CHOICE</b>, <b>SEQUENCE</b> or  <b>NDEF_SEQUENCE</b>  structure  immediately  after  a  "d2i"
           operation for the <b>ASN1_VALUE</b>.

       <b>ASN1_OP_I2D_PRE</b>
           Invoked  when  processing  a  <b>CHOICE</b>,  <b>SEQUENCE</b> or <b>NDEF_SEQUENCE</b> structure immediately before a "i2d"
           operation for the <b>ASN1_VALUE</b>.

       <b>ASN1_OP_I2D_POST</b>
           Invoked when processing a <b>CHOICE</b>, <b>SEQUENCE</b> or  <b>NDEF_SEQUENCE</b>  structure  immediately  after  a  "i2d"
           operation for the <b>ASN1_VALUE</b>.

       <b>ASN1_OP_PRINT_PRE</b>
           Invoked  when  processing  a  <b>SEQUENCE</b>  or  <b>NDEF_SEQUENCE</b>  structure  immediately before printing the
           <b>ASN1_VALUE</b>. The <u>exarg</u> argument will be a pointer to an <b>ASN1_PRINT_ARG</b> structure (see below).

       <b>ASN1_OP_PRINT_POST</b>
           Invoked when processing  a  <b>SEQUENCE</b>  or  <b>NDEF_SEQUENCE</b>  structure  immediately  after  printing  the
           <b>ASN1_VALUE</b>. The <u>exarg</u> argument will be a pointer to an <b>ASN1_PRINT_ARG</b> structure (see below).

       <b>ASN1_OP_STREAM_PRE</b>
           Invoked  immediately  prior  to  streaming  the <b>ASN1_VALUE</b> data using indefinite length encoding. The
           <u>exarg</u> argument will be a pointer to a <b>ASN1_STREAM_ARG</b> structure (see below).

       <b>ASN1_OP_STREAM_POST</b>
           Invoked immediately after streaming the <b>ASN1_VALUE</b> data using indefinite length encoding.  The  <u>exarg</u>
           argument will be a pointer to a <b>ASN1_STREAM_ARG</b> structure (see below).

       <b>ASN1_OP_DETACHED_PRE</b>
           Invoked immediately prior to processing the <b>ASN1_VALUE</b> data as a "detached" value (as used in CMS and
           PKCS7). The <u>exarg</u> argument will be a pointer to a <b>ASN1_STREAM_ARG</b> structure (see below).

       <b>ASN1_OP_DETACHED_POST</b>
           Invoked  immediately  after  processing the <b>ASN1_VALUE</b> data as a "detached" value (as used in CMS and
           PKCS7). The <u>exarg</u> argument will be a pointer to a <b>ASN1_STREAM_ARG</b> structure (see below).

       <b>ASN1_OP_DUP_PRE</b>
           Invoked immediate prior to an ASN1_VALUE being duplicated via a call to <b>ASN1_item_dup()</b>.

       <b>ASN1_OP_DUP_POST</b>
           Invoked immediate after to an ASN1_VALUE has been duplicated via a call to <b>ASN1_item_dup()</b>.

       <b>ASN1_OP_GET0_LIBCTX</b>
           Invoked in order to obtain the <b>OSSL_LIB_CTX</b> associated with an <b>ASN1_VALUE</b> if any.  A  pointer  to  an
           <b>OSSL_LIB_CTX</b> should be stored in <u>*exarg</u> if such a value exists.

       <b>ASN1_OP_GET0_PROPQ</b>
           Invoked  in order to obtain the property query string associated with an <b>ASN1_VALUE</b> if any. A pointer
           to the property query string should be stored in <u>*exarg</u> if such a value exists.

       An <b>ASN1_PRINT_ARG</b> object is used during processing of <b>ASN1_OP_PRINT_PRE</b> and  <b>ASN1_OP_PRINT_POST</b>  callback
       operations. It contains the following information.

       <u>out</u> The <b>BIO</b> being used to print the data out.

       <u>ndef_bio</u>
           The current number of indent spaces that should be used for printing this data.

       <u>pctx</u>
           The context for the <b>ASN1_PCTX</b> operation.

       An   <b>ASN1_STREAM_ARG</b>  object  is  used  during  processing  of  <b>ASN1_OP_STREAM_PRE</b>,  <b>ASN1_OP_STREAM_POST</b>,
       <b>ASN1_OP_DETACHED_PRE</b>  and  <b>ASN1_OP_DETACHED_POST</b>  callback  operations.   It   contains   the   following
       information.

       <u>out</u> The <b>BIO</b> to stream through

       <u>ndef_bio</u>
           The <b>BIO</b> with filters appended

       <u>boundary</u>
           The streaming I/O boundary.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The  callbacks  return  0  on  error  and  a  positive value on success. Some operations require specific
       positive success values as noted above.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ASN1_item_new_ex.3.html">ASN1_item_new_ex</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>ASN1_aux_const_cb()</b> callback and the <b>ASN1_OP_GET0_LIBCTX</b> and <b>ASN1_OP_GET0_PROPQ</b> operation types  were
       added in OpenSSL 3.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2021-2025 The OpenSSL Project Authors. All Rights Reserved.

       Licensed  under  the  Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain  a  copy  in  the  file  LICENSE  in  the  source  distribution  or  at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                                  <u><a href="../man3SSL/ASN1_AUX_CB.3SSL.html">ASN1_AUX_CB</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>