<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_rawdev.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_rawdev.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;rte_common.h&gt;
       #include &lt;rte_memory.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_rawdev_xstats_name</b>

   <b>Macros</b>
       #define <b>RTE_RAW_DEV_XSTATS_NAME_SIZE</b>   64

   <b>Functions</b>
       uint8_t <b>rte_rawdev_count</b> (void)
       uint16_t <b>rte_rawdev_get_dev_id</b> (const char *name)
       int <b>rte_rawdev_socket_id</b> (uint16_t dev_id)
       int <b>rte_rawdev_info_get</b> (uint16_t dev_id, struct rte_rawdev_info *dev_info, size_t dev_private_size)
       int <b>rte_rawdev_configure</b> (uint16_t dev_id, struct rte_rawdev_info *dev_conf, size_t dev_private_size)
       int <b>rte_rawdev_queue_conf_get</b> (uint16_t dev_id, uint16_t queue_id, rte_rawdev_obj_t queue_conf, size_t
           queue_conf_size)
       int <b>rte_rawdev_queue_setup</b> (uint16_t dev_id, uint16_t queue_id, rte_rawdev_obj_t queue_conf, size_t
           queue_conf_size)
       int <b>rte_rawdev_queue_release</b> (uint16_t dev_id, uint16_t queue_id)
       uint16_t <b>rte_rawdev_queue_count</b> (uint16_t dev_id)
       int <b>rte_rawdev_start</b> (uint16_t dev_id)
       void <b>rte_rawdev_stop</b> (uint16_t dev_id)
       int <b>rte_rawdev_close</b> (uint16_t dev_id)
       int <b>rte_rawdev_reset</b> (uint16_t dev_id)
       int <b>rte_rawdev_dump</b> (uint16_t dev_id, FILE *f)
       int <b>rte_rawdev_get_attr</b> (uint16_t dev_id, const char *attr_name, uint64_t *attr_value)
       int <b>rte_rawdev_set_attr</b> (uint16_t dev_id, const char *attr_name, const uint64_t attr_value)
       int <b>rte_rawdev_enqueue_buffers</b> (uint16_t dev_id, struct rte_rawdev_buf **buffers, unsigned int count,
           rte_rawdev_obj_t context)
       int <b>rte_rawdev_dequeue_buffers</b> (uint16_t dev_id, struct rte_rawdev_buf **buffers, unsigned int count,
           rte_rawdev_obj_t context)
       int <b>rte_rawdev_xstats_names_get</b> (uint16_t dev_id, struct <b>rte_rawdev_xstats_name</b> *xstats_names, unsigned
           int size)
       int <b>rte_rawdev_xstats_get</b> (uint16_t dev_id, const unsigned int ids[], uint64_t values[], unsigned int n)
       uint64_t <b>rte_rawdev_xstats_by_name_get</b> (uint16_t dev_id, const char *name, unsigned int *id)
       int <b>rte_rawdev_xstats_reset</b> (uint16_t dev_id, const uint32_t ids[], uint32_t nb_ids)
       int <b>rte_rawdev_firmware_status_get</b> (uint16_t dev_id, rte_rawdev_obj_t status_info)
       int <b>rte_rawdev_firmware_version_get</b> (uint16_t dev_id, rte_rawdev_obj_t version_info)
       int <b>rte_rawdev_firmware_load</b> (uint16_t dev_id, rte_rawdev_obj_t firmware_image)
       int <b>rte_rawdev_firmware_unload</b> (uint16_t dev_id)
       int <b>rte_rawdev_selftest</b> (uint16_t dev_id)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Generic device abstraction APIs.

       This API allow applications to configure and use generic devices having no specific type already
       available in DPDK.

       Definition in file <b>rte_rawdev.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_RAW_DEV_XSTATS_NAME_SIZE</b>   <b>64</b>
       Maximum name length for extended statistics counters

       Definition at line <b>443</b> of file <b>rte_rawdev.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>uint8_t</b> <b>rte_rawdev_count</b> <b>(void)</b>
       Get the total number of raw devices that have been successfully initialised.

       <b>Returns</b>
           The total number of usable raw devices.

   <b>uint16_t</b> <b>rte_rawdev_get_dev_id</b> <b>(const</b> <b>char</b> <b>*</b> <b>name)</b>
       Get the device identifier for the named raw device.

       <b>Parameters</b>
           <u>name</u> Raw device name to select the raw device identifier.

       <b>Returns</b>
           Returns raw device identifier on success.

           • &lt;0: Failure to find named raw device.

   <b>int</b> <b>rte_rawdev_socket_id</b> <b>(uint16_t</b> <b>dev_id)</b>
       Return the NUMA socket to which a device is connected.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device.

       <b>Returns</b>
           The  NUMA  socket id to which the device is connected or a default of zero if the socket could not be
           determined. -(-EINVAL) dev_id value is out of range.

   <b>int</b> <b>rte_rawdev_info_get</b> <b>(uint16_t</b> <b>dev_id,</b> <b>struct</b> <b>rte_rawdev_info</b> <b>*</b> <b>dev_info,</b> <b>size_t</b> <b>dev_private_size)</b>
       Retrieve the contextual information of a raw device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device.
           <u>dev_info</u> A pointer to  a  structure  of  type  <u>rte_rawdev_info</u>  to  be  filled  with  the  contextual
           information  of  the  device.  The  dev_info-&gt;dev_private field should point to an appropriate buffer
           space for holding the device- specific info for that hardware. If the dev_private  field  is  set  to
           NULL,  then the device-specific info function will not be called and only basic information about the
           device will be returned. This can be used to safely query the  type  of  a  rawdev  instance  without
           needing to know the size of the private data to return.
           <u>dev_private_size</u> The length of the memory space pointed to by dev_private in dev_info. This should be
           set  to  the  size of the expected private structure to be returned, and may be checked by drivers to
           ensure the expected struct type is provided.

       <b>Returns</b>

           • 0: Success, driver updates the contextual information of the raw device

           • &lt;0: Error code returned by the driver info get function.

   <b>int</b> <b>rte_rawdev_configure</b> <b>(uint16_t</b> <b>dev_id,</b> <b>struct</b> <b>rte_rawdev_info</b> <b>*</b> <b>dev_conf,</b> <b>size_t</b> <b>dev_private_size)</b>
       Configure a raw device.

       This function must be invoked first before any other function in the API. This function can also  be  re-
       invoked when a device is in the stopped state.

       The  caller  may use <b>rte_rawdev_info_get()</b> to get the capability of each resources available for this raw
       device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device to configure.
           <u>dev_conf</u> The raw device configuration structure  encapsulated  into  rte_rawdev_info  object.  It  is
           assumed  that  the  opaque  object  has enough information which the driver/implementation can use to
           configure the device. It is also assumed that once the configuration is done, a queue_id  type  field
           can be used to refer to some arbitrary internal representation of a queue.
           <u>dev_private_size</u> The length of the memory space pointed to by dev_private in dev_info. This should be
           set  to  the  size  of the expected private structure to be used by the driver, and may be checked by
           drivers to ensure the expected struct type is provided.

       <b>Returns</b>

           • 0: Success, device configured.

           • &lt;0: Error code returned by the driver configuration function.

   <b>int</b> <b>rte_rawdev_queue_conf_get</b>  <b>(uint16_t</b>  <b>dev_id,</b>  <b>uint16_t</b>  <b>queue_id,</b>  <b>rte_rawdev_obj_t</b>  <b>queue_conf,</b>  <b>size_t</b>
       <b>queue_conf_size)</b>
       Retrieve  the  current  configuration  information of a raw queue designated by its <u>queue_id</u> from the raw
       driver for a raw device.

       This function intended to be used in conjunction with rte_raw_queue_setup() where caller needs to set  up
       the queue by overriding few default values.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device.
           <u>queue_id</u>  The  index  of the raw queue to get the configuration information. The value must be in the
           range [0, nb_raw_queues - 1] previously supplied to <b>rte_rawdev_configure()</b>.
           <u>queue_conf</u> The pointer to the default raw queue configuration data.
           <u>queue_conf_size</u> The size of the structure pointed to by queue_conf

       <b>Returns</b>

           • 0: Success, driver updates the default raw queue configuration data.

           • &lt;0: Error code returned by the driver info get function.

       <b>See</b> <b>also</b>
           rte_raw_queue_setup()

   <b>int</b>  <b>rte_rawdev_queue_setup</b>  <b>(uint16_t</b>  <b>dev_id,</b>  <b>uint16_t</b>  <b>queue_id,</b>  <b>rte_rawdev_obj_t</b>   <b>queue_conf,</b>   <b>size_t</b>
       <b>queue_conf_size)</b>
       Allocate and set up a raw queue for a raw device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device.
           <u>queue_id</u>  The  index of the raw queue to setup. The value must be in the range [0, nb_raw_queues - 1]
           previously supplied to <b>rte_rawdev_configure()</b>.
           <u>queue_conf</u> The pointer to the configuration data to be used for the raw queue. NULL value is allowed,
           in which case default configuration used.
           <u>queue_conf_size</u> The size of the structure pointed to by queue_conf

       <b>See</b> <b>also</b>
           <b>rte_rawdev_queue_conf_get()</b>

       <b>Returns</b>

           • 0: Success, raw queue correctly set up.

           • &lt;0: raw queue configuration failed

   <b>int</b> <b>rte_rawdev_queue_release</b> <b>(uint16_t</b> <b>dev_id,</b> <b>uint16_t</b> <b>queue_id)</b>
       Release and deallocate a raw queue from a raw device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device.
           <u>queue_id</u> The index of the raw queue to release. The value must be in the range [0, nb_raw_queues - 1]
           previously supplied to <b>rte_rawdev_configure()</b>.

       <b>See</b> <b>also</b>
           <b>rte_rawdev_queue_conf_get()</b>

       <b>Returns</b>

           • 0: Success, raw queue released.

           • &lt;0: raw queue configuration failed

   <b>uint16_t</b> <b>rte_rawdev_queue_count</b> <b>(uint16_t</b> <b>dev_id)</b>
       Get the number of raw queues on a specific raw device

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifier.

       <b>Returns</b>

           • The number of configured raw queues

   <b>int</b> <b>rte_rawdev_start</b> <b>(uint16_t</b> <b>dev_id)</b>
       Start a raw device.

       The device start step is the last one and consists of setting the raw queues to start accepting the  raws
       and schedules to raw ports.

       On success, all basic functions exported by the API (raw enqueue, raw dequeue and so on) can be invoked.

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifier

       <b>Returns</b>

           • 0: Success, device started. &lt; 0: Failure

   <b>void</b> <b>rte_rawdev_stop</b> <b>(uint16_t</b> <b>dev_id)</b>
       Stop a raw device. The device can be restarted with a call to <b>rte_rawdev_start()</b>

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifier.

   <b>int</b> <b>rte_rawdev_close</b> <b>(uint16_t</b> <b>dev_id)</b>
       Close a raw device. The device cannot be restarted after this call.

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifier

       <b>Returns</b>

           • 0 on successfully closing device

           • &lt;0 on failure to close device

           • (-EAGAIN) if device is busy

   <b>int</b> <b>rte_rawdev_reset</b> <b>(uint16_t</b> <b>dev_id)</b>
       Reset  a  raw  device.  This  is  different  from cycle of rte_rawdev_start-&gt;rte_rawdev_stop in the sense
       similar to hard or soft reset.

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifiers

       <b>Returns</b>
           0 for successful reset, !0 for failure in resetting

   <b>int</b> <b>rte_rawdev_dump</b> <b>(uint16_t</b> <b>dev_id,</b> <b>FILE</b> <b>*</b> <b>f)</b>
       Dump internal information about <u>dev_id</u> to the FILE* provided in <u>f</u>.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device.
           <u>f</u> A pointer to a file for output

       <b>Returns</b>

           • 0: on success

           • &lt;0: on failure.

   <b>int</b> <b>rte_rawdev_get_attr</b> <b>(uint16_t</b> <b>dev_id,</b> <b>const</b> <b>char</b> <b>*</b> <b>attr_name,</b> <b>uint64_t</b> <b>*</b> <b>attr_value)</b>
       Get an attribute value from implementation. Attribute is an opaque handle agreed upon between application
       and PMD.

       Implementations are expected to maintain an array of attribute-value pairs based  on  application  calls.
       Memory management for this structure is shared responsibility of implementation and application.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device to configure.
           <u>attr_name</u> Opaque object representing an attribute in implementation.
           <u>attr_value</u>  [out]  Opaque  response to the attribute value. In case of error, this remains untouched.
           This is double pointer of void type.

       <b>Returns</b>
           0 for success !0 Error; attr_value remains untouched in case of error.

   <b>int</b> <b>rte_rawdev_set_attr</b> <b>(uint16_t</b> <b>dev_id,</b> <b>const</b> <b>char</b> <b>*</b> <b>attr_name,</b> <b>const</b> <b>uint64_t</b> <b>attr_value)</b>
       Set an attribute value. Attribute is an opaque handle agreed upon between application and PMD.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device to configure.
           <u>attr_name</u> Opaque object representing an attribute in implementation.
           <u>attr_value</u> Value of the attribute represented by attr_name

       <b>Returns</b>
           0 for success !0 Error

   <b>int</b> <b>rte_rawdev_enqueue_buffers</b> <b>(uint16_t</b> <b>dev_id,</b>  <b>struct</b>  <b>rte_rawdev_buf</b>  <b>**</b>  <b>buffers,</b>  <b>unsigned</b>  <b>int</b>  <b>count,</b>
       <b>rte_rawdev_obj_t</b> <b>context)</b>
       Enqueue a stream of buffers to the device.

       Rather than specifying a queue, this API passes along an opaque object to the driver implementation. That
       object can be a queue or any other contextual information necessary for the device to enqueue buffers.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device to configure.
           <u>buffers</u> Collection of buffers for enqueuing
           <u>count</u> Count of buffers to enqueue
           <u>context</u> Opaque context information.

       <b>Returns</b>
           &gt;=0  for  buffers  enqueued  !0 for failure. Whether partial enqueue is failure or success is defined
           between app and driver implementation.

   <b>int</b> <b>rte_rawdev_dequeue_buffers</b> <b>(uint16_t</b> <b>dev_id,</b>  <b>struct</b>  <b>rte_rawdev_buf</b>  <b>**</b>  <b>buffers,</b>  <b>unsigned</b>  <b>int</b>  <b>count,</b>
       <b>rte_rawdev_obj_t</b> <b>context)</b>
       Dequeue a stream of buffers from the device.

       Rather than specifying a queue, this API passes along an opaque object to the driver implementation. That
       object can be a queue or any other contextual information necessary for the device to dequeue buffers.

       Application  should  have  allocated  enough  space  to  store  count response buffers. Releasing buffers
       dequeued is responsibility of the application.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device to configure.
           <u>buffers</u> Collection of buffers dequeued
           <u>count</u> Max buffers expected to be dequeued
           <u>context</u> Opaque context information.

       <b>Returns</b>
           &gt;=0 for buffers dequeued !0 for failure. Whether partial enqueue is failure  or  success  is  defined
           between app and driver implementation.

   <b>int</b>  <b>rte_rawdev_xstats_names_get</b> <b>(uint16_t</b> <b>dev_id,</b> <b>struct</b> <b>rte_rawdev_xstats_name</b> <b>*</b> <b>xstats_names,</b> <b>unsigned</b> <b>int</b>
       <b>size)</b>
       Retrieve names of extended statistics of a raw device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the raw device.
           <u>xstats_names</u> Block of memory to insert names into. Must be at least size in capacity. If set to NULL,
           function returns required capacity.
           <u>size</u> Capacity of xstats_names (number of names).

       <b>Returns</b>

           • positive value lower or equal to size: success. The return value is the number of entries filled in
             the stats table.

           • positive value higher than size: error, the given statistics table is too small. The  return  value
             corresponds to the size that should be given to succeed. The entries in the table are not valid and
             shall not be used by the caller.

           • negative  value  on  error:  -ENODEV for invalid <u>dev_id</u> -ENOTSUP if the device doesn't support this
             function.

   <b>int</b> <b>rte_rawdev_xstats_get</b> <b>(uint16_t</b> <b>dev_id,</b> <b>const</b> <b>unsigned</b> <b>int</b> <b>ids[],</b> <b>uint64_t</b> <b>values[],</b> <b>unsigned</b> <b>int</b> <b>n)</b>
       Retrieve extended statistics of a raw device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device.
           <u>ids</u> The id numbers of the stats to get. The ids can be got from the stat position in  the  stat  list
           from rte_rawdev_get_xstats_names(), or by using rte_rawdev_get_xstats_by_name()
           <u>values</u> The values for each stats request by ID.
           <u>n</u> The number of stats requested

       <b>Returns</b>

           • positive value: number of stat entries filled into the values array

           • negative  value  on  error:  -ENODEV for invalid <u>dev_id</u> -ENOTSUP if the device doesn't support this
             function.

   <b>uint64_t</b> <b>rte_rawdev_xstats_by_name_get</b> <b>(uint16_t</b> <b>dev_id,</b> <b>const</b> <b>char</b> <b>*</b> <b>name,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>id)</b>
       Retrieve the value of a single stat by requesting it by name.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device
           <u>name</u> The stat name to retrieve
           <u>id</u> If non-NULL, the numerical id of the stat will be returned, so that further requests for the  stat
           can  be  got  using  rte_rawdev_xstats_get, which will be faster as it doesn't need to scan a list of
           names for the stat. If the stat cannot be found, the id returned will be (unsigned)-1.

       <b>Returns</b>

           • positive value or zero: the stat value

           • negative value: -EINVAL if stat not found, -ENOTSUP if not supported.

   <b>int</b> <b>rte_rawdev_xstats_reset</b> <b>(uint16_t</b> <b>dev_id,</b> <b>const</b> <b>uint32_t</b> <b>ids[],</b> <b>uint32_t</b> <b>nb_ids)</b>
       Reset the values of the xstats of the selected component in the device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device
           <u>ids</u> Selects specific statistics to be reset. When NULL, all statistics will be  reset.  If  non-NULL,
           must point to array of at least <u>nb_ids</u> size.
           <u>nb_ids</u> The number of ids available from the <u>ids</u> array. Ignored when ids is NULL.

       <b>Returns</b>

           • zero: successfully reset the statistics to zero

           • negative value: -EINVAL invalid parameters, -ENOTSUP if not supported.

   <b>int</b> <b>rte_rawdev_firmware_status_get</b> <b>(uint16_t</b> <b>dev_id,</b> <b>rte_rawdev_obj_t</b> <b>status_info)</b>
       Get Firmware status of the device.. Returns a memory allocated by driver/implementation containing status
       information block. It is responsibility of caller to release the buffer.

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifier
           <u>status_info</u>  Pointer  to  status  information  area.  Caller  is responsible for releasing the memory
           associated.

       <b>Returns</b>
           0 for success, !0 for failure, status_info argument state is undefined

   <b>int</b> <b>rte_rawdev_firmware_version_get</b> <b>(uint16_t</b> <b>dev_id,</b> <b>rte_rawdev_obj_t</b> <b>version_info)</b>
       Get Firmware version of the device.  Returns  a  memory  allocated  by  driver/implementation  containing
       version information block. It is responsibility of caller to release the buffer.

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifier
           <u>version_info</u>  Pointer  to  version  information  area. Caller is responsible for releasing the memory
           associated.

       <b>Returns</b>
           0 for success, !0 for failure, version_info argument state is undefined

   <b>int</b> <b>rte_rawdev_firmware_load</b> <b>(uint16_t</b> <b>dev_id,</b> <b>rte_rawdev_obj_t</b> <b>firmware_image)</b>
       Load firmware on the device. TODO: In future, methods  like  directly  flashing  from  file  too  can  be
       supported.

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifier
           <u>firmware_image</u> Pointer to buffer containing image binary data

       <b>Returns</b>
           0 for successful load !0 for failure to load the provided image, or image incorrect.

   <b>int</b> <b>rte_rawdev_firmware_unload</b> <b>(uint16_t</b> <b>dev_id)</b>
       Unload firmware from the device.

       <b>Parameters</b>
           <u>dev_id</u> Raw device identifiers

       <b>Returns</b>
           0 for successful Unload !0 for failure in unloading

   <b>int</b> <b>rte_rawdev_selftest</b> <b>(uint16_t</b> <b>dev_id)</b>
       Trigger the rawdev self test.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device

       <b>Returns</b>

           • 0: Selftest successful

           • -ENOTSUP if the device doesn't support selftest

           • other values &lt; 0 on failure.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                 <u><a href="../man3/rte_rawdev.h.3.html">rte_rawdev.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>