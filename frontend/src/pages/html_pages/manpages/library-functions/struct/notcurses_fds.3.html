<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>notcurses_fds - dumping file descriptors and subprocesses to planes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnotcurses-core-dev">libnotcurses-core-dev_3.0.7+dfsg.1-1ubuntu8_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       notcurses_fds - dumping file descriptors and subprocesses to planes

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;notcurses/notcurses.h&gt;</b>

              struct ncplane;
              struct ncfdplane;
              struct ncsubproc;

              typedef struct ncfdplane_options {
                void* curry; // parameter provided to callbacks
                bool follow; // keep reading after hitting end?
              } ncfdplane_options;

              typedef struct ncsubproc_options {
                void* curry; // parameter provided to callbacks
                uint64_t restart_period;  // restart after exit
              } ncsubproc_options;

       <b>typedef</b> <b>int(</b><u><b>ncfdplane_callback)(struct</b></u> <u><b>ncfdplane</b></u> <u>n</u><b>,</b> <b>const</b> <b>void*</b> <u>buf</u><b>,</b> <b>size_t</b> <u>s</u><b>,</b> <b>void*</b> <u>curry</u><b>);</b>

       <b>typedef</b> <b>int(</b><u><b>ncfdplane_done_cb)(struct</b></u> <u><b>ncfdplane</b></u> <u>n</u><b>,</b> <b>int</b> <u>fderrno</u><b>,</b> <b>void*</b> <u>curry</u><b>);</b>

       <b>struct</b>  <b>ncfdplane*</b>  <b>ncfdplane_create(struct</b>  <b>ncplane*</b>  <u>n</u><b>,</b>  <b>const</b>  <b>ncfdplane_options*</b>  <u>opts</u><b>,</b> <b>int</b> <u>fd</u><b>,</b> <b>ncfd‐</b>
       <b>plane_callback</b> <u>cbfxn</u><b>,</b> <b>ncfdplane_done_cb</b> <u>donecbfxn</u><b>);</b>

       <b>struct</b> <b>ncplane*</b> <b>ncfdplane_plane(struct</b> <b>ncfdplane*</b> <u>n</u><b>);</b>

       <b>int</b> <b>ncfdplane_destroy(struct</b> <b>ncfdplane*</b> <u>n</u><b>);</b>

       <b>struct</b> <b>ncsubproc*</b> <b>ncsubproc_createv(struct</b> <b>ncplane*</b> <u>n</u><b>,</b> <b>const</b> <b>ncsubproc_options*</b> <u>opts</u><b>,</b>  <b>const</b>  <b>char*</b>  <u>bin</u><b>,</b>
       <b>char*</b> <b>const</b> <u>arg</u><b>[],</b> <b>ncfdplane_callback</b> <u>cbfxn</u><b>,</b> <b>ncfdplane_done_cb</b> <u>donecbfxn</u><b>);</b>

       <b>struct</b>  <b>ncsubproc*</b>  <b>ncsubproc_createvp(struct</b> <b>ncplane*</b> <u>n</u><b>,</b> <b>const</b> <b>ncsubproc_options*</b> <u>opts</u><b>,</b> <b>const</b> <b>char*</b> <u>bin</u><b>,</b>
       <b>char*</b> <b>const</b> <u>arg</u><b>[],</b> <b>ncfdplane_callback</b> <u>cbfxn</u><b>,</b> <b>ncfdplane_done_cb</b> <u>donecbfxn</u><b>);</b>

       <b>struct</b> <b>ncsubproc*</b> <b>ncsubproc_createvpe(struct</b> <b>ncplane*</b> <u>n</u><b>,</b> <b>const</b> <b>ncsubproc_options*</b> <u>opts</u><b>,</b> <b>const</b> <b>char*</b>  <u>bin</u><b>,</b>
       <b>char*</b> <b>const</b> <u>arg</u><b>[],</b> <b>char*</b> <b>const</b> <u>env</u><b>[],</b> <b>ncfdplane_callback</b> <u>cbfxn</u><b>,</b> <b>ncfdplane_done_cb</b> <u>donecbfxn</u><b>);</b>

       <b>struct</b> <b>ncplane*</b> <b>ncsubproc_plane(struct</b> <b>ncsubproc*</b> <u>n</u><b>);</b>

       <b>int</b> <b>ncsubproc_destroy(struct</b> <b>ncsubproc*</b> <u>n</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  widgets  cause  a  file  descriptor to be read until EOF, and written to a scrolling <b>ncplane</b>.  The
       reading will take place in a notcurses-managed context (the particulars of this context are not  defined,
       and  should  not  be depended upon), which will invoke the provided callbacks with the data read.  Essen‐
       tially, they are simply portable interfaces to asynchronous reading, with <b>ncsubproc</b> also  providing  sub‐
       process management.

       If  <b>ncsubproc_destroy</b>  is  called before the subprocess has exited, it will be sent a SIGKILL.  If <b>ncsub‐</b>
       <b>proc_destroy</b> or <b>ncfdplane_destroy</b> is called while a callback is being invoked, the destroy function  will
       block  until  the  callback  is done being invoked.  If a user callback returns non-0, the calling object
       will destroy itself.  If a user callback calls the relevant destroy function itself, the thread will exit
       as if non-0 had been returned, and the <b>ncsubproc</b>'s resources will at that time be reclaimed.

       It is essential that the destroy function be called once and only once, whether it  is  from  within  the
       thread's context, or external to that context.

</pre><h4><b>NOTES</b></h4><pre>
       <b>ncsubproc</b>  makes  use of pidfds and <b><a href="../man2/pidfd_send_signal.2.html">pidfd_send_signal</a>(2)</b>, and thus makes reliable use of signals (it will
       never target a process other than the true subprocess).

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/pidfd_open.2.html">pidfd_open</a>(2)</b>, <b><a href="../man3/notcurses.3.html">notcurses</a>(3)</b>, <b><a href="../man3/notcurses_plane.3.html">notcurses_plane</a>(3)</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       nick black &lt;<a href="mailto:nickblack@linux.com">nickblack@linux.com</a>&gt;.

                                                     v3.0.7                                     <u><a href="../man3/notcurses_fds.3.html">notcurses_fds</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>