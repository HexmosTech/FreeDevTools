<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPI_cursor_open_with_args - set up a cursor using a query and parameters</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-doc-17">postgresql-doc-17_17.5-1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SPI_cursor_open_with_args - set up a cursor using a query and parameters

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Portal SPI_cursor_open_with_args(const char *<u>name</u>,
                                        const char *<u>command</u>,
                                        int <u>nargs</u>, Oid *<u>argtypes</u>,
                                        Datum *<u>values</u>, const char *<u>nulls</u>,
                                        bool <u>read_only</u>, int <u>cursorOptions</u>)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SPI_cursor_open_with_args</b> sets up a cursor (internally, a portal) that will execute the specified query.
       Most of the parameters have the same meanings as the corresponding parameters to <b>SPI_prepare_cursor</b> and
       <b>SPI_cursor_open</b>.

       For one-time query execution, this function should be preferred over <b>SPI_prepare_cursor</b> followed by
       <b>SPI_cursor_open</b>. If the same command is to be executed with many different parameters, either method
       might be faster, depending on the cost of re-planning versus the benefit of custom plans.

       The passed-in parameter data will be copied into the cursor's portal, so it can be freed while the cursor
       still exists.

       This function is now deprecated in favor of <b>SPI_cursor_parse_open</b>, which provides equivalent
       functionality using a more modern API for handling query parameters.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       const char * <u>name</u>
           name for portal, or NULL to let the system select a name

       const char * <u>command</u>
           command string

       int <u>nargs</u>
           number of input parameters ($1, $2, etc.)

       Oid * <u>argtypes</u>
           an array of length <u>nargs</u>, containing the OIDs of the data types of the parameters

       Datum * <u>values</u>
           an array of length <u>nargs</u>, containing the actual parameter values

       const char * <u>nulls</u>
           an array of length <u>nargs</u>, describing which parameters are null

           If <u>nulls</u> is NULL then <b>SPI_cursor_open_with_args</b> assumes that no parameters are null. Otherwise, each
           entry of the <u>nulls</u> array should be ' ' if the corresponding parameter value is non-null, or 'n' if
           the corresponding parameter value is null. (In the latter case, the actual value in the corresponding
           <u>values</u> entry doesn't matter.) Note that <u>nulls</u> is not a text string, just an array: it does not need a
           '\0' terminator.

       bool <u>read_only</u>
           true for read-only execution

       int <u>cursorOptions</u>
           integer bit mask of cursor options; zero produces default behavior

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Pointer to portal containing the cursor. Note there is no error return convention; any error will be
       reported via <b>elog</b>.

PostgreSQL 17.5                                       2025                          <u><a href="../man3/SPI_CURSOR_OPEN_WITH_ARGS.3.html">SPI_CURSOR_OPEN_WITH_ARGS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>