<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jose_jws - JSON Web Signature (RFC 7515)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libjose-dev">libjose-dev_14-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       jose_jws - JSON Web Signature (RFC 7515)

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Functions</b>
       json_t * <b>jose_jws_hdr</b> (const json_t *sig)
           Merges the JOSE headers of a JWS signature object.
       bool <b>jose_jws_sig</b> (jose_cfg_t *cfg, json_t *jws, json_t *sig, const json_t *jwk)
           Creates one or more signatures in a JWS object.
       <b>jose_io_t</b> * <b>jose_jws_sig_io</b> (jose_cfg_t *cfg, json_t *jws, json_t *sig, const json_t *jwk)
           Creates one or more signatures in a JWS object using streaming.
       bool <b>jose_jws_ver</b> (jose_cfg_t *cfg, const json_t *jws, const json_t *sig, const json_t *jwk, bool all)
           Verifies signatures of one or more JWKs in a JWS object.
       <b>jose_io_t</b> * <b>jose_jws_ver_io</b> (jose_cfg_t *cfg, const json_t *jws, const json_t *sig, const json_t *jwk,
           bool all)
           Verifies signatures of one or more JWKs in a JWS object using streaming.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       JSON Web Signature (RFC 7515)

       JSON Web Token (RFC 7519)

       A JSON Web Signature (JWS) is a standard data format for expresing cryptographic signatures in JSON. The
       signatures are produced using a JSON Web Key (JWK).

       For example, to create a simple signature of a string using a JWK (error handling omitted):

       json_t *sig(const char *str, const json_t *jwk) {
           json_auto_t *jws = json_pack("{s:o}", "payload",
                                        jose_b64_enc(str, strlen(str)));
           jose_jws_sig(NULL, jws, NULL, jwk);
           return json_incref(jws);
       }

       Likewise, to verify this signature (again, error handling omitted):

       char *ver(const json_t *jws, const json_t *jwk) {
           char *str = NULL;
           size_t len = 0;

           if (!jose_jws_ver(NULL, jws, NULL, jwk))
               return NULL;

           len = jose_b64_dec(json_object_get(jws, "payload"), NULL, 0);
           str = calloc(1, len + 1);
           jose_b64_dec(json_object_get(jws, "payload"), str, len);
           return str;
       }

       <b>See</b> <b>also:</b>
           https://tools.ietf.org/html/rfc7515

       A JSON Web Token (JWT) is a standard data format for expresing claims transferred between to parties in
       JSON. The JWT is wrapped in any number of Signatures (JWS) or Encryptions (JWE).

       <b>See</b> <b>also:</b>
           https://tools.ietf.org/html/rfc7515

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>json_t*</b> <b>jose_jws_hdr</b> <b>(const</b> <b>json_t</b> <b>*</b> <b>sig)</b>
       Merges the JOSE headers of a JWS signature object.

       <b>Parameters:</b>
           <u>sig</u> A JWS signature object.

       <b>Returns:</b>
           The newly allocated JOSE header.

   <b>bool</b> <b>jose_jws_sig</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>json_t</b> <b>*</b> <b>jws,</b> <b>json_t</b> <b>*</b> <b>sig,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jwk)</b>
       Creates one or more signatures in a JWS object. The JWS object (jws) must contain the 'payload' property.

       All signatures created will be appended to the JWS specified by jws. If the resulting JWS (jws) would
       contain only a single signature, the JWS will be represented in Flattened JWS JSON Serialization Syntax.
       Otherwise, it will be represented in General JWS JSON Serialization Syntax.

       If jwk contains a JWK, a single signature is created. In this case, jws must contain either a JWS
       signature object template or NULL. You may specify algorithms or other signature behaviors simply by
       specifying them in the JOSE headers of the JWS signature object template as defined by RFC 7515. If a
       required property is missing, sensible defaults will be used and inserted into the JOSE headers;
       inferring them from the JWK (jwk) where possible.

       If jwk contains an array of JWKs or a JWKSet, multiple signatures are created. In this case, the sig
       parameter must contain one of the following values:

       1.  A  JWS  signature  object template that will be used for all signatures. In this case, a copy will be
           made for each signature and sig will not be modified in any way.

       2.  An array of JWS signature object templates. Each template will be used  with  its  corresponding  JWK
           from jwk. If the arrays in sig and jwk are a different size, an error will occur.

       3.  NULL. This has the same effect as passing NULL for each separate key.

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jws</u> The JWS object.
           <u>sig</u> The JWS signature object template(s) or NULL.
           <u>jwk</u> The JWK(s) or JWKSet used for creating signatures.

       <b>Returns:</b>
           On success, true. Otherwise, false.

   <b>jose_io_t*</b> <b>jose_jws_sig_io</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>json_t</b> <b>*</b> <b>jws,</b> <b>json_t</b> <b>*</b> <b>sig,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jwk)</b>
       Creates  one or more signatures in a JWS object using streaming. This function behaves substantially like
       <b>jose_jws_sig()</b> except:

       The payload is not specified in the JWS (jws). Rather, the payload is  provided  using  the  returned  IO
       object.  The  input  to  the returned IO object will not be internally Base64 encoded. So you may need to
       prepend the IO chain with the result of <b>jose_b64_enc_io()</b> (depending on your situation).

       Likewise, the payload is not stored in the JWS object  (jws).  This  allows  for  detached  payloads  and
       decreases  memory  use for signatures over large payloads. If you would like to attach the payload, it is
       your responsibility to do so manually.

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jws</u> The JWS object.
           <u>sig</u> The JWS signature object template(s) or NULL.
           <u>jwk</u> The JWK(s) or JWKSet used for creating signatures.

       <b>Returns:</b>
           The new IO object or NULL on error.

   <b>bool</b> <b>jose_jws_ver</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jws,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>sig,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jwk,</b> <b>bool</b> <b>all)</b>
       Verifies signatures of one or more JWKs in a JWS object. The JWS object (jws) must contain the  'payload'
       property.

       If  a  single  JWK  (jwk)  is specified, the all parameter is ignored. In this case, if you would like to
       verify a particular JWS signature object, you may specify it using the sig parameter. Otherwise, you  may
       simply pass NULL to verify any of the JWS signature objects in the JWS object.

       If  jwk  contains an array of JWKs or a JWKSet, the all parameter determines whether a valid signature is
       required for every JWK in order to successfully validate the JWS. For example, if you set  all  to  false
       this  function  will  succeed if a valid signature is found for any of the provided JWKs. When using this
       multiple JWK signature mode, the sig parameter must contain one of the following values:

       1.  A single JWS signature object to validate against all/any of the provided JWKs.

       2.  An array of JWS signature objects. In this case, each JWS signature object  will  be  mapped  to  its
           corresponding JWK from jwk. If the arrays in sig and jwk are a different size, an error will occur.

       3.  NULL. This has the same effect as passing NULL for each separate key.

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jws</u> The JWS object.
           <u>sig</u> The JWS signature object(s) to verify or NULL.
           <u>jwk</u> The JWK(s) or JWKSet used for verifying signatures.
           <u>all</u> Whether or not to require validation of all JWKs.

       <b>Returns:</b>
           On success, true. Otherwise, false.

   <b>jose_io_t*</b>  <b>jose_jws_ver_io</b>  <b>(jose_cfg_t</b>  <b>*</b>  <b>cfg,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jws,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>sig,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jwk,</b>
       <b>bool</b> <b>all)</b>
       Verifies signatures of one or  more  JWKs  in  a  JWS  object  using  streaming.  This  function  behaves
       substantially like <b>jose_jws_ver()</b> except:

       The  payload  is  not  specified  in the JWS (jws). Rather, the payload is provided using the returned IO
       object. The input to the returned IO object will not be internally Base64 encoded. So  you  may  need  to
       prepend the IO chain with the result of <b>jose_b64_enc_io()</b> (depending on your situation).

       Final signature verification is delayed until <b>jose_io_t::done()</b> returns.

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jws</u> The JWS object.
           <u>sig</u> The JWS signature object(s) to verify or NULL.
           <u>jwk</u> The JWK(s) or JWKSet used for verifying signatures.
           <u>all</u> Whether or not to require validation of all JWKs.

       <b>Returns:</b>
           The new IO object or NULL on error.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for José from the source code.

José                                             Tue May 30 2017                                     <u><a href="../man3/jose_jws.3.html">jose_jws</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>