<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_dev.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_dev.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;rte_config.h&gt;
       #include &lt;rte_common.h&gt;
       #include &lt;rte_log.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_mem_resource</b>
       struct <b>rte_dev_iterator</b>

   <b>Macros</b>
       #define <b>RTE_PMD_REGISTER_KMOD_DEP</b>(name,  str)

   <b>Typedefs</b>
       <b>typedef</b> int(* <b>rte_dev_cmp_t</b>) (const struct rte_device *dev, const void *data)
       <b>typedef</b> void *(* <b>rte_dev_iterate_t</b>) (const void *start, const char *devstr, const struct <b>rte_dev_iterator</b>
           *it)

   <b>Enumerations</b>
       enum <b>rte_dev_event_type</b> { <b>RTE_DEV_EVENT_ADD</b>, <b>RTE_DEV_EVENT_REMOVE</b>, <b>RTE_DEV_EVENT_MAX</b> }
       enum <b>rte_dev_policy</b>

   <b>Functions</b>
       const char * <b>rte_driver_name</b> (const struct rte_driver *driver)
       const struct rte_bus * <b>rte_dev_bus</b> (const struct rte_device *dev)
       const char * <b>rte_dev_bus_info</b> (const struct rte_device *dev)
       const struct <b>rte_devargs</b> * <b>rte_dev_devargs</b> (const struct rte_device *dev)
       const struct rte_driver * <b>rte_dev_driver</b> (const struct rte_device *dev)
       const char * <b>rte_dev_name</b> (const struct rte_device *dev)
       int <b>rte_dev_numa_node</b> (const struct rte_device *dev)
       int <b>rte_dev_is_probed</b> (const struct rte_device *dev)
       int <b>rte_eal_hotplug_add</b> (const char *busname, const char *devname, const char *drvargs)
       int <b>rte_dev_probe</b> (const char *devargs)
       int <b>rte_eal_hotplug_remove</b> (const char *busname, const char *devname)
       int <b>rte_dev_remove</b> (struct rte_device *dev)
       int <b>rte_dev_iterator_init</b> (struct <b>rte_dev_iterator</b> *it, const char *str)
       struct rte_device * <b>rte_dev_iterator_next</b> (struct <b>rte_dev_iterator</b> *it)
       int <b>rte_dev_event_callback_register</b> (const char *device_name, rte_dev_event_cb_fn cb_fn, void *cb_arg)
       int <b>rte_dev_event_callback_unregister</b> (const char *device_name, rte_dev_event_cb_fn cb_fn, void *cb_arg)
       void <b>rte_dev_event_callback_process</b> (const char *device_name, enum <b>rte_dev_event_type</b> event)
       int <b>rte_dev_event_monitor_start</b> (void)
       int <b>rte_dev_event_monitor_stop</b> (void)
       int <b>rte_dev_hotplug_handle_enable</b> (void)
       int <b>rte_dev_hotplug_handle_disable</b> (void)
       int <b>rte_dev_dma_map</b> (struct rte_device *dev, void *addr, uint64_t iova, size_t len)
       int <b>rte_dev_dma_unmap</b> (struct rte_device *dev, void *addr, uint64_t iova, size_t len)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE PMD Registration Interface

       This file manages the list of device drivers.

       Definition in file <b>rte_dev.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_PMD_REGISTER_KMOD_DEP(name,</b> <b>str)</b>
       <b>Value:</b>.PP
       static const char DRV_EXP_TAG(name, kmod_dep_export)[] \
       __rte_used = str
       Advertise the list of kernel modules required to run this driver

       This string lists the kernel modules required for the devices associated to a PMD. The format of each
       line of the string is: '&lt;device-pattern&gt; &lt;kmod-expression&gt;'.

       The possible formats for the device pattern are: '*' all devices supported by this driver 'pci:*' all PCI
       devices supported by this driver 'pci:v8086:d*:sv*:sd*' all PCI devices supported by this driver whose
       vendor id is 0x8086.

       The format of the kernel modules list is a parenthesized expression containing logical-and (&amp;) and
       logical-or (|).

       The device pattern and the kmod expression are separated by a space.

       Example:

       •

       Definition at line <b>272</b> of file <b>rte_dev.h</b>.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>int(*</b> <b>rte_dev_cmp_t)</b> <b>(const</b> <b>struct</b> <b>rte_device</b> <b>*dev,</b> <b>const</b> <b>void</b> <b>*data)</b>
       Device comparison function.

       This type of function is used to compare an rte_device with arbitrary data.

       <b>Parameters</b>
           <u>dev</u> Device handle.
           <u>data</u>  Data  to  compare  against.  The type of this parameter is determined by the kind of comparison
           performed by the function.

       <b>Returns</b>
           0 if the device matches the data. !0 if the device does not match. &lt;0 if ordering is possible and the
           device is lower than the data. &gt;0 if ordering is possible and the device is greater than the data.

       Definition at line <b>233</b> of file <b>rte_dev.h</b>.

   <b>typedef</b> <b>void</b> <b>*(*</b> <b>rte_dev_iterate_t)</b> <b>(const</b> <b>void</b> <b>*start,</b> <b>const</b> <b>char</b>  <b>*devstr,</b>  <b>const</b>  <b>struct</b>  <b>rte_dev_iterator</b>
       <b>*it)</b>
       Device iteration function.

       Find  the  next  device  matching properties passed in parameters. The function takes an additional start
       parameter, that is used as starting context when relevant.

       The function returns the current element in the iteration. This return value will potentially be used  as
       a start parameter in subsequent calls to the function.

       The additional iterator parameter is only there if a specific implementation needs additional context. It
       must not be modified by the iteration function itself.

       <b>Parameters</b>
           <u>start</u> Starting iteration context.
           <u>devstr</u> Device description string.
           <u>it</u> Device iterator.

       <b>Returns</b>
           The address of the current element matching the device description string.

       Definition at line <b>319</b> of file <b>rte_dev.h</b>.

</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>rte_dev_event_type</b>
       The device event type.

       <b>Enumerator</b>

       <u>RTE_DEV_EVENT_ADD</u>
              device being added

       <u>RTE_DEV_EVENT_REMOVE</u>
              device being removed

       <u>RTE_DEV_EVENT_MAX</u>
              max value of this enum

       Definition at line <b>34</b> of file <b>rte_dev.h</b>.

   <b>enum</b> <b>rte_dev_policy</b>
       Device policies.

       Definition at line <b>47</b> of file <b>rte_dev.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>const</b> <b>char</b> <b>*</b> <b>rte_driver_name</b> <b>(const</b> <b>struct</b> <b>rte_driver</b> <b>*</b> <b>driver)</b>
       Retrieve a driver name.

       <b>Parameters</b>
           <u>driver</u> A pointer to a driver structure.

       <b>Returns</b>
           A pointer to the driver name string.

   <b>const</b> <b>struct</b> <b>rte_bus</b> <b>*</b> <b>rte_dev_bus</b> <b>(const</b> <b>struct</b> <b>rte_device</b> <b>*</b> <b>dev)</b>
       Retrieve a device bus.

       <b>Parameters</b>
           <u>dev</u> A pointer to a device structure.

       <b>Returns</b>
           A pointer to this device bus.

   <b>const</b> <b>char</b> <b>*</b> <b>rte_dev_bus_info</b> <b>(const</b> <b>struct</b> <b>rte_device</b> <b>*</b> <b>dev)</b>
       Retrieve bus specific information for a device.

       <b>Parameters</b>
           <u>dev</u> A pointer to a device structure.

       <b>Returns</b>
           A string describing this device or NULL if none is available.

   <b>const</b> <b>struct</b> <b>rte_devargs</b> <b>*</b> <b>rte_dev_devargs</b> <b>(const</b> <b>struct</b> <b>rte_device</b> <b>*</b> <b>dev)</b>
       Retrieve a device arguments.

       <b>Parameters</b>
           <u>dev</u> A pointer to a device structure.

       <b>Returns</b>
           A pointer to this device devargs.

   <b>const</b> <b>struct</b> <b>rte_driver</b> <b>*</b> <b>rte_dev_driver</b> <b>(const</b> <b>struct</b> <b>rte_device</b> <b>*</b> <b>dev)</b>
       Retrieve a device driver.

       <b>Parameters</b>
           <u>dev</u> A pointer to a device structure.

       <b>Returns</b>
           A pointer to this device driver.

   <b>const</b> <b>char</b> <b>*</b> <b>rte_dev_name</b> <b>(const</b> <b>struct</b> <b>rte_device</b> <b>*</b> <b>dev)</b>
       Retrieve a device name.

       <b>Parameters</b>
           <u>dev</u> A pointer to a device structure.

       <b>Returns</b>
           A pointer to this device name.

   <b>int</b> <b>rte_dev_numa_node</b> <b>(const</b> <b>struct</b> <b>rte_device</b> <b>*</b> <b>dev)</b>
       Retrieve a device numa node.

       <b>Parameters</b>
           <u>dev</u> A pointer to a device structure.

       <b>Returns</b>
           A pointer to this device numa node.

   <b>int</b> <b>rte_dev_is_probed</b> <b>(const</b> <b>struct</b> <b>rte_device</b> <b>*</b> <b>dev)</b>
       Query status of a device.

       <b>Parameters</b>
           <u>dev</u> Generic device pointer.

       <b>Returns</b>
           (int)true if already probed successfully, 0 otherwise.

   <b>int</b> <b>rte_eal_hotplug_add</b> <b>(const</b> <b>char</b> <b>*</b> <b>busname,</b> <b>const</b> <b>char</b> <b>*</b> <b>devname,</b> <b>const</b> <b>char</b> <b>*</b> <b>drvargs)</b>
       Hotplug add a given device to a specific bus.

       In multi-process, it will request other processes to add the same device. A failure, in any process, will
       rollback the action

       <b>Parameters</b>
           <u>busname</u> The bus name the device is added to.
           <u>devname</u> The device name. Based on this device name, eal will identify a driver capable of handling it
           and pass it to the driver probing function.
           <u>drvargs</u> Device arguments to be passed to the driver.

       <b>Returns</b>
           0 on success, negative on error.

   <b>int</b> <b>rte_dev_probe</b> <b>(const</b> <b>char</b> <b>*</b> <b>devargs)</b>
       Add matching devices.

       In multi-process, it will request other processes to add the same device. A failure, in any process, will
       rollback the action

       <b>Parameters</b>
           <u>devargs</u> Device arguments including bus, class and driver properties.

       <b>Returns</b>
           0 on success, negative on error.

   <b>int</b> <b>rte_eal_hotplug_remove</b> <b>(const</b> <b>char</b> <b>*</b> <b>busname,</b> <b>const</b> <b>char</b> <b>*</b> <b>devname)</b>
       Hotplug remove a given device from a specific bus.

       In  multi-process,  it will request other processes to remove the same device. A failure, in any process,
       will rollback the action

       <b>Parameters</b>
           <u>busname</u> The bus name the device is removed from.
           <u>devname</u> The device name being removed.

       <b>Returns</b>
           0 on success, negative on error.

   <b>int</b> <b>rte_dev_remove</b> <b>(struct</b> <b>rte_device</b> <b>*</b> <b>dev)</b>
       Remove one device.

       In multi-process, it will request other processes to remove the same device. A failure, in  any  process,
       will rollback the action

       <b>Parameters</b>
           <u>dev</u> Data structure of the device to remove.

       <b>Returns</b>
           0 on success, negative on error.

   <b>int</b> <b>rte_dev_iterator_init</b> <b>(struct</b> <b>rte_dev_iterator</b> <b>*</b> <b>it,</b> <b>const</b> <b>char</b> <b>*</b> <b>str)</b>
       Initializes a device iterator.

       This  iterator  allows accessing a list of devices matching a criteria. The device matching is made among
       all buses and classes currently registered, filtered by the device description given as parameter.

       This function will not allocate any memory. It is safe to stop the iteration at any moment  and  let  the
       iterator go out of context.

       <b>Parameters</b>
           <u>it</u> Device iterator handle.
           <u>str</u> Device description string.

       <b>Returns</b>
           0 on successful initialization. &lt;0 on error.

   <b>struct</b> <b>rte_device</b> <b>*</b> <b>rte_dev_iterator_next</b> <b>(struct</b> <b>rte_dev_iterator</b> <b>*</b> <b>it)</b>
       Iterates on a device iterator.

       Generates  a  new  rte_device  handle  corresponding  to  the  next  element  in  the  list  described in
       comprehension by the iterator.

       The next object is returned, and the iterator is updated.

       <b>Parameters</b>
           <u>it</u> Device iterator handle.

       <b>Returns</b>
           An rte_device handle if found. NULL if an error occurred (rte_errno is set). NULL if no device  could
           be found (rte_errno is not set).

   <b>int</b> <b>rte_dev_event_callback_register</b> <b>(const</b> <b>char</b> <b>*</b> <b>device_name,</b> <b>rte_dev_event_cb_fn</b> <b>cb_fn,</b> <b>void</b> <b>*</b> <b>cb_arg)</b>
       It registers the callback for the specific device. Multiple callbacks can be registered at the same time.

       <b>Parameters</b>
           <u>device_name</u>  The  device  name, that is the param name of the struct rte_device, null value means for
           all devices.
           <u>cb_fn</u> callback address.
           <u>cb_arg</u> address of parameter for callback.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_dev_event_callback_unregister</b> <b>(const</b> <b>char</b> <b>*</b> <b>device_name,</b> <b>rte_dev_event_cb_fn</b> <b>cb_fn,</b> <b>void</b> <b>*</b> <b>cb_arg)</b>
       It unregisters the callback according to the specified device.

       <b>Parameters</b>
           <u>device_name</u> The device name, that is the param name of the struct rte_device, null  value  means  for
           all devices and their callbacks.
           <u>cb_fn</u> callback address.
           <u>cb_arg</u>  address  of  parameter  for callback, (void *)-1 means to remove all registered which has the
           same callback address.

       <b>Returns</b>

           • On success, return the number of callback entities removed.

           • On failure, a negative value.

   <b>void</b> <b>rte_dev_event_callback_process</b> <b>(const</b> <b>char</b> <b>*</b> <b>device_name,</b> <b>enum</b> <b>rte_dev_event_type</b> <b>event)</b>
       Executes all the user application registered callbacks for the specific device.

       <b>Parameters</b>
           <u>device_name</u> The device name.
           <u>event</u> the device event type.

   <b>int</b> <b>rte_dev_event_monitor_start</b> <b>(void)</b>
       Start the device event monitoring.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_dev_event_monitor_stop</b> <b>(void)</b>
       Stop the device event monitoring.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_dev_hotplug_handle_enable</b> <b>(void)</b>
       Enable hotplug handling for devices.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_dev_hotplug_handle_disable</b> <b>(void)</b>
       Disable hotplug handling for devices.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_dev_dma_map</b> <b>(struct</b> <b>rte_device</b> <b>*</b> <b>dev,</b> <b>void</b> <b>*</b> <b>addr,</b> <b>uint64_t</b> <b>iova,</b> <b>size_t</b> <b>len)</b>
       Device level DMA map function. After a successful call, the memory segment will be mapped  to  the  given
       device.

       <b>Note</b>
           : Memory must be registered in advance using rte_extmem_* APIs.

       <b>Parameters</b>
           <u>dev</u> Device pointer.
           <u>addr</u> Virtual address to map.
           <u>iova</u> IOVA address to map.
           <u>len</u> Length of the memory segment being mapped.

       <b>Returns</b>
           0 if mapping was successful. Negative value and rte_errno is set otherwise.

   <b>int</b> <b>rte_dev_dma_unmap</b> <b>(struct</b> <b>rte_device</b> <b>*</b> <b>dev,</b> <b>void</b> <b>*</b> <b>addr,</b> <b>uint64_t</b> <b>iova,</b> <b>size_t</b> <b>len)</b>
       Device level DMA unmap function. After a successful call, the memory segment will no longer be accessible
       by the given device.

       <b>Note</b>
           : Memory must be registered in advance using rte_extmem_* APIs.

       <b>Parameters</b>
           <u>dev</u> Device pointer.
           <u>addr</u> Virtual address to unmap.
           <u>iova</u> IOVA address to unmap.
           <u>len</u> Length of the memory segment being mapped.

       <b>Returns</b>
           0 if un-mapping was successful. Negative value and rte_errno is set otherwise.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                    <u><a href="../man3/rte_dev.h.3.html">rte_dev.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>