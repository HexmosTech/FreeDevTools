<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>openpty, login_tty, forkpty - terminal utility functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       openpty, login_tty, forkpty - terminal utility functions

</pre><h4><b>LIBRARY</b></h4><pre>
       System utilities library (<u>libutil</u>, <u>-lutil</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/pty.h">pty.h</a>&gt;</b>

       <b>int</b> <b>openpty(int</b> <b>*</b><u>amaster</u><b>,</b> <b>int</b> <b>*</b><u>aslave</u><b>,</b> <b>char</b> <b>*</b><u>name</u><b>,</b>
                     <b>const</b> <b>struct</b> <b>termios</b> <b>*</b><u>termp</u><b>,</b>
                     <b>const</b> <b>struct</b> <b>winsize</b> <b>*</b><u>winp</u><b>);</b>
       <b>pid_t</b> <b>forkpty(int</b> <b>*</b><u>amaster</u><b>,</b> <b>char</b> <b>*</b><u>name</u><b>,</b>
                     <b>const</b> <b>struct</b> <b>termios</b> <b>*</b><u>termp</u><b>,</b>
                     <b>const</b> <b>struct</b> <b>winsize</b> <b>*</b><u>winp</u><b>);</b>

       <b>#include</b> <b>&lt;<a href="file:/usr/include/utmp.h">utmp.h</a>&gt;</b>

       <b>int</b> <b>login_tty(int</b> <u>fd</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>openpty</b>() function finds an available pseudoterminal and returns file descriptors for the master and
       slave in <u>amaster</u> and <u>aslave</u>.  If <u>name</u> is not NULL, the filename of the slave is  returned  in  <u>name</u>.   If
       <u>termp</u>  is  not NULL, the terminal parameters of the slave will be set to the values in <u>termp</u>.  If <u>winp</u> is
       not NULL, the window size of the slave will be set to the values in <u>winp</u>.

       The <b>login_tty</b>() function prepares for a login on the terminal referred  to  by  the  file  descriptor  <u>fd</u>
       (which  may  be  a  real  terminal  device, or the slave of a pseudoterminal as returned by <b>openpty</b>()) by
       creating a new session, making <u>fd</u> the controlling terminal for the calling process, setting <u>fd</u> to be  the
       standard input, output, and error streams of the current process, and closing <u>fd</u>.

       The  <b>forkpty</b>() function combines <b>openpty</b>(), <b><a href="../man2/fork.2.html">fork</a></b>(2), and <b>login_tty</b>() to create a new process operating in
       a pseudoterminal.  A file descriptor referring to master  side  of  the  pseudoterminal  is  returned  in
       <u>amaster</u>.   If <u>name</u> is not NULL, the buffer it points to is used to return the filename of the slave.  The
       <u>termp</u> and <u>winp</u> arguments, if not NULL, will determine the terminal attributes  and  window  size  of  the
       slave side of the pseudoterminal.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       If  a  call to <b>openpty</b>(), <b>login_tty</b>(), or <b>forkpty</b>() is not successful, -1 is returned and <u>errno</u> is set to
       indicate the error.  Otherwise, <b>openpty</b>(), <b>login_tty</b>(), and the child process of <b>forkpty</b>() return 0,  and
       the parent process of <b>forkpty</b>() returns the process ID of the child process.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>openpty</b>() fails if:

       <b>ENOENT</b> There are no available terminals.

       <b>login_tty</b>() fails if <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) fails to set <u>fd</u> to the controlling terminal of the calling process.

       <b>forkpty</b>() fails if either <b>openpty</b>() or <b><a href="../man2/fork.2.html">fork</a></b>(2) fails.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌──────────────────────────────────────────────────────────────┬───────────────┬────────────────────────┐
       │ <b>Interface</b>                                                    │ <b>Attribute</b>     │ <b>Value</b>                  │
       ├──────────────────────────────────────────────────────────────┼───────────────┼────────────────────────┤
       │ <b>forkpty</b>(), <b>openpty</b>()                                         │ Thread safety │ MT-Safe locale         │
       ├──────────────────────────────────────────────────────────────┼───────────────┼────────────────────────┤
       │ <b>login_tty</b>()                                                  │ Thread safety │ MT-Unsafe race:ttyname │
       └──────────────────────────────────────────────────────────────┴───────────────┴────────────────────────┘

</pre><h4><b>STANDARDS</b></h4><pre>
       BSD.

</pre><h4><b>HISTORY</b></h4><pre>
       The  <b>const</b>  modifiers  were  added to the structure pointer arguments of <b>openpty</b>() and <b>forkpty</b>() in glibc
       2.8.

       Before glibc 2.0.92, <b>openpty</b>() returns file descriptors  for  a  BSD  pseudoterminal  pair;  since  glibc
       2.0.92,  it  first  attempts  to  open  a  UNIX  98  pseudoterminal pair, and falls back to opening a BSD
       pseudoterminal pair if that fails.

</pre><h4><b>BUGS</b></h4><pre>
       Nobody knows how much space should be reserved for <u>name</u>.  So, calling <b>openpty</b>() or  <b>forkpty</b>()  with  non-
       NULL <u>name</u> may not be secure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/fork.2.html">fork</a></b>(2), <b><a href="../man3/ttyname.3.html">ttyname</a></b>(3), <b><a href="../man7/pty.7.html">pty</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                         <u><a href="../man3/openpty.3.html">openpty</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>