<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_member.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_member.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;stdbool.h&gt;
       #include &lt;<a href="file:/usr/include/inttypes.h">inttypes.h</a>&gt;
       #include &lt;rte_common.h&gt;
       #include &lt;rte_jhash.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_member_parameters</b>

   <b>Macros</b>
       #define <b>RTE_MEMBER_NO_MATCH</b>   0
       #define <b>RTE_MEMBER_ENTRIES_MAX</b>   (1 &lt;&lt; 30)
       #define <b>RTE_MEMBER_LOOKUP_BULK_MAX</b>   64
       #define <b>RTE_MEMBER_BUCKET_ENTRIES</b>   16
       #define <b>RTE_MEMBER_NAMESIZE</b>   32
       #define <b>RTE_RAND_MAX</b>   ~0LLU
       #define <b>RTE_MEMBER_SKETCH_ALWAYS_BOUNDED</b>   0x01
       #define <b>RTE_MEMBER_SKETCH_COUNT_BYTE</b>   0x02

   <b>Typedefs</b>
       <b>typedef</b> uint16_t <b>member_set_t</b>

   <b>Enumerations</b>
       enum <b>rte_member_setsum_type</b> { <b>RTE_MEMBER_TYPE_HT</b> = 0, <b>RTE_MEMBER_TYPE_VBF</b>, <b>RTE_MEMBER_TYPE_SKETCH</b>,
           <b>RTE_MEMBER_NUM_TYPE</b> }

   <b>Functions</b>
       struct rte_member_setsum * <b>rte_member_find_existing</b> (const char *name)
       struct rte_member_setsum * <b>rte_member_create</b> (const struct <b>rte_member_parameters</b> *params)
       int <b>rte_member_lookup</b> (const struct rte_member_setsum *setsum, const void *key, <b>member_set_t</b> *set_id)
       int <b>rte_member_lookup_bulk</b> (const struct rte_member_setsum *setsum, const void **keys, uint32_t num_keys,
           <b>member_set_t</b> *set_ids)
       int <b>rte_member_lookup_multi</b> (const struct rte_member_setsum *setsum, const void *key, uint32_t
           max_match_per_key, <b>member_set_t</b> *set_id)
       int <b>rte_member_lookup_multi_bulk</b> (const struct rte_member_setsum *setsum, const void **keys, uint32_t
           num_keys, uint32_t max_match_per_key, uint32_t *match_count, <b>member_set_t</b> *set_ids)
       int <b>rte_member_add</b> (const struct rte_member_setsum *setsum, const void *key, <b>member_set_t</b> set_id)
       int <b>rte_member_add_byte_count</b> (const struct rte_member_setsum *setsum, const void *key, uint32_t
           byte_count)
       int <b>rte_member_query_count</b> (const struct rte_member_setsum *setsum, const void *key, uint64_t *count)
       int <b>rte_member_report_heavyhitter</b> (const struct rte_member_setsum *setsum, void **keys, uint64_t *counts)
       void <b>rte_member_free</b> (struct rte_member_setsum *setsum)
       void <b>rte_member_reset</b> (const struct rte_member_setsum *setsum)
       int <b>rte_member_delete</b> (const struct rte_member_setsum *setsum, const void *key, <b>member_set_t</b> set_id)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE Membership Library

       The Membership Library is an extension and generalization of a traditional filter (for example Bloom
       Filter and cuckoo filter) structure that has multiple usages in a variety of workloads and applications.
       The library is used to test if a key belongs to certain sets. Two types of such 'set-summary' structures
       are implemented: hash-table based (HT) and vector bloom filter (vBF). For HT setsummary, two subtypes or
       modes are available, cache and non-cache modes. The table below summarize some properties of the
       different implementations.

       Definition in file <b>rte_member.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_MEMBER_NO_MATCH</b>   <b>0</b>
       Invalid set ID used to mean no match found.

       Definition at line <b>66</b> of file <b>rte_member.h</b>.

   <b>#define</b> <b>RTE_MEMBER_ENTRIES_MAX</b>   <b>(1</b> <b>&lt;&lt;</b> <b>30)</b>
       Maximum size of hash table that can be created.

       Definition at line <b>68</b> of file <b>rte_member.h</b>.

   <b>#define</b> <b>RTE_MEMBER_LOOKUP_BULK_MAX</b>   <b>64</b>
       Maximum number of keys that can be searched as a bulk

       Definition at line <b>70</b> of file <b>rte_member.h</b>.

   <b>#define</b> <b>RTE_MEMBER_BUCKET_ENTRIES</b>   <b>16</b>
       Entry count per bucket in hash table based mode.

       Definition at line <b>72</b> of file <b>rte_member.h</b>.

   <b>#define</b> <b>RTE_MEMBER_NAMESIZE</b>   <b>32</b>
       Maximum number of characters in setsum name.

       Definition at line <b>74</b> of file <b>rte_member.h</b>.

   <b>#define</b> <b>RTE_RAND_MAX</b>   <b>~0LLU</b>
       Max value of the random number

       Definition at line <b>76</b> of file <b>rte_member.h</b>.

   <b>#define</b> <b>RTE_MEMBER_SKETCH_ALWAYS_BOUNDED</b>   <b>0x01</b>
       As packets skipped in the sampling-based algorithm, the accounting results accuracy is not guaranteed in
       the start stage. There should be a 'convergence time' to achieve the accuracy after receiving enough
       packets. For sketch, use the flag if prefer always bounded mode, which only starts sampling after
       receiving enough packets to keep the results accuracy always bounded.

       Definition at line <b>86</b> of file <b>rte_member.h</b>.

   <b>#define</b> <b>RTE_MEMBER_SKETCH_COUNT_BYTE</b>   <b>0x02</b>
       For sketch, use the flag if to count packet size instead of packet count

       Definition at line <b>88</b> of file <b>rte_member.h</b>.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>uint16_t</b> <b>member_set_t</b>
       The set ID type that stored internally in hash table based set summary.

       Definition at line <b>64</b> of file <b>rte_member.h</b>.

</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>rte_member_setsum_type</b>
       Define different set summary types

       <b>Enumerator</b>

       <u>RTE_MEMBER_TYPE_HT</u>
              Hash table based set summary.

       <u>RTE_MEMBER_TYPE_VBF</u>
              Vector of bloom filters.

       Definition at line <b>114</b> of file <b>rte_member.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>rte_member_find_existing</b> <b>(const</b> <b>char</b> <b>*</b> <b>name)</b>
       Find an existing set-summary and return a pointer to it.

       <b>Parameters</b>
           <u>name</u> Name of the set-summary.

       <b>Returns</b>
           Pointer  to  the  set-summary  or NULL if object not found with rte_errno set appropriately. Possible
           rte_errno values include:

           â€¢ ENOENT - value not available for return

   <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>rte_member_create</b> <b>(const</b> <b>struct</b> <b>rte_member_parameters</b> <b>*</b> <b>params)</b>
       Create set-summary (SS).

       <b>Parameters</b>
           <u>params</u> Parameters to initialize the setsummary.

       <b>Returns</b>
           Return the pointer to the setsummary. Return value is NULL if the creation failed.

   <b>int</b> <b>rte_member_lookup</b> <b>(const</b> <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>setsum,</b> <b>const</b> <b>void</b> <b>*</b> <b>key,</b> <b>member_set_t</b> <b>*</b> <b>set_id)</b>
       Lookup key in set-summary (SS). Single key lookup and return as soon as the first match found

       <b>Parameters</b>
           <u>setsum</u> Pointer of a setsummary.
           <u>key</u> Pointer of the key to be looked up.
           <u>set_id</u> Output the set id matches the key.

       <b>Returns</b>
           Return 1 for found a match and 0 for not found a match.

   <b>int</b> <b>rte_member_lookup_bulk</b> <b>(const</b> <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>setsum,</b> <b>const</b> <b>void</b> <b>**</b> <b>keys,</b>  <b>uint32_t</b>  <b>num_keys,</b>
       <b>member_set_t</b> <b>*</b> <b>set_ids)</b>
       Lookup bulk of keys in set-summary (SS). Each key lookup returns as soon as the first match found

       <b>Parameters</b>
           <u>setsum</u> Pointer of a setsummary.
           <u>keys</u> Pointer of the bulk of keys to be looked up.
           <u>num_keys</u> Number of keys that will be lookup.
           <u>set_ids</u> Output set ids for all the keys to this array. User should preallocate array that can contain
           all results, which size is the num_keys.

       <b>Returns</b>
           The number of keys that found a match.

   <b>int</b>   <b>rte_member_lookup_multi</b>   <b>(const</b>  <b>struct</b>  <b>rte_member_setsum</b>  <b>*</b>  <b>setsum,</b>  <b>const</b>  <b>void</b>  <b>*</b>  <b>key,</b>  <b>uint32_t</b>
       <b>max_match_per_key,</b> <b>member_set_t</b> <b>*</b> <b>set_id)</b>
       Lookup a key in set-summary (SS) for multiple matches. The key  lookup  will  find  all  matched  entries
       (multiple  match).  Note  that for cache mode of HT, each key can have at most one match. This is because
       keys with same signature that maps to same bucket will overwrite each other. So multi-match lookup should
       be used for vBF and non-cache HT.

       <b>Parameters</b>
           <u>setsum</u> Pointer of a set-summary.
           <u>key</u> Pointer of the key that to be looked up.
           <u>max_match_per_key</u> User specified maximum number of matches for each key. The function returns as soon
           as this number of matches found for the key.
           <u>set_id</u> Output set ids for all the matches of the key. User needs to preallocate the  array  that  can
           contain max_match_per_key number of results.

       <b>Returns</b>
           The  number of matches that found for the key. For cache mode HT set-summary, the number should be at
           most 1.

   <b>int</b> <b>rte_member_lookup_multi_bulk</b> <b>(const</b> <b>struct</b> <b>rte_member_setsum</b> <b>*</b>  <b>setsum,</b>  <b>const</b>  <b>void</b>  <b>**</b>  <b>keys,</b>  <b>uint32_t</b>
       <b>num_keys,</b> <b>uint32_t</b> <b>max_match_per_key,</b> <b>uint32_t</b> <b>*</b> <b>match_count,</b> <b>member_set_t</b> <b>*</b> <b>set_ids)</b>
       Lookup  a  bulk  of keys in set-summary (SS) for multiple matches each key. Each key lookup will find all
       matched entries (multiple match). Note that for cache mode HT, each key can have at most  one  match.  So
       multi-match function is mainly used for vBF and non-cache mode HT.

       <b>Parameters</b>
           <u>setsum</u> Pointer of a setsummary.
           <u>keys</u> Pointer of the keys to be looked up.
           <u>num_keys</u> The number of keys that will be lookup.
           <u>max_match_per_key</u> The possible maximum number of matches for each key.
           <u>match_count</u> Output the number of matches for each key in an array.
           <u>set_ids</u>  Return  set  ids for all the matches of all keys. Users pass in a preallocated 2D array with
           first   dimension   as   key   index   and   second   dimension   as   match   index.   For   example
           set_ids[bulk_size][max_match_per_key]

       <b>Returns</b>
           The number of keys that found one or more matches in the set-summary.

   <b>int</b> <b>rte_member_add</b> <b>(const</b> <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>setsum,</b> <b>const</b> <b>void</b> <b>*</b> <b>key,</b> <b>member_set_t</b> <b>set_id)</b>
       Insert key into set-summary (SS).

       <b>Parameters</b>
           <u>setsum</u> Pointer of a set-summary.
           <u>key</u> Pointer of the key to be added.
           <u>set_id</u>  The  set id associated with the key that needs to be added. Different mode supports different
           set_id ranges. 0 cannot be used as set_id since RTE_MEMBER_NO_MATCH by default is set as  0.  For  HT
           mode, the set_id has range as [1, 0x7FFF], MSB is reserved. For vBF mode the set id is limited by the
           num_set parameter when create the set-summary. For sketch mode, this id is ignored.

       <b>Returns</b>
           HT  (cache  mode) and vBF should never fail unless the set_id is not in the valid range. In such case
           -EINVAL is returned. For HT (non-cache mode) it could fail with -ENOSPC  error  code  when  table  is
           full.  For  success  it returns different values for different modes to provide extra information for
           users. Return 0 for HT (cache mode) if the add does not cause eviction, return 1 otherwise. Return  0
           for  non-cache  mode if success, -ENOSPC for full, and 1 if cuckoo eviction happens. Always returns 0
           for vBF mode and sketch.

   <b>int</b>  <b>rte_member_add_byte_count</b>  <b>(const</b>  <b>struct</b>  <b>rte_member_setsum</b>  <b>*</b>  <b>setsum,</b>  <b>const</b>  <b>void</b>  <b>*</b>  <b>key,</b>  <b>uint32_t</b>
       <b>byte_count)</b>
       Add the packet byte size into the sketch.

       <b>Parameters</b>
           <u>setsum</u> Pointer of a set-summary.
           <u>key</u> Pointer of the key to be added.
           <u>byte_count</u> Add the byte count of the packet into the sketch.

       <b>Returns</b>
           Return -EINVAL for invalid parameters, otherwise return 0.

   <b>int</b> <b>rte_member_query_count</b> <b>(const</b> <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>setsum,</b> <b>const</b> <b>void</b> <b>*</b> <b>key,</b> <b>uint64_t</b> <b>*</b> <b>count)</b>
       Query packet count for a certain flow-key.

       <b>Parameters</b>
           <u>setsum</u> Pointer of a set-summary.
           <u>key</u> Pointer of the key to be added.
           <u>count</u> The output packet count or byte count.

       <b>Returns</b>
           Return -EINVAL for invalid parameters.

   <b>int</b> <b>rte_member_report_heavyhitter</b> <b>(const</b> <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>setsum,</b> <b>void</b> <b>**</b> <b>keys,</b> <b>uint64_t</b> <b>*</b> <b>counts)</b>
       Report heavyhitter flow-keys into set-summary (SS).

       <b>Parameters</b>
           <u>setsum</u> Pointer of a set-summary.
           <u>keys</u> Pointer of the output top-k key array.
           <u>counts</u> Pointer of the output packet count or byte count array of the top-k keys.

       <b>Returns</b>
           Return  -EINVAL for invalid parameters. Return a positive integer indicate how many heavy hitters are
           reported.

   <b>void</b> <b>rte_member_free</b> <b>(struct</b> <b>rte_member_setsum</b> <b>*</b> <b>setsum)</b>
       De-allocate memory used by set-summary.

       <b>Parameters</b>
           <u>setsum</u> Pointer to the set summary. If setsum is NULL, no operation is performed.

   <b>void</b> <b>rte_member_reset</b> <b>(const</b> <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>setsum)</b>
       Reset the set-summary tables. E.g. reset bits  to  be  0  in  BF,  reset  set_id  in  each  entry  to  be
       RTE_MEMBER_NO_MATCH in HT based SS.

       <b>Parameters</b>
           <u>setsum</u> Pointer to the set-summary.

   <b>int</b> <b>rte_member_delete</b> <b>(const</b> <b>struct</b> <b>rte_member_setsum</b> <b>*</b> <b>setsum,</b> <b>const</b> <b>void</b> <b>*</b> <b>key,</b> <b>member_set_t</b> <b>set_id)</b>
       Delete items from the set-summary. Note that vBF does not support deletion in current implementation. For
       vBF, error code of -EINVAL will be returned.

       <b>Parameters</b>
           <u>setsum</u> Pointer to the set-summary.
           <u>key</u> Pointer of the key to be deleted.
           <u>set_id</u> For HT mode, we need both key and its corresponding set_id to properly delete the key. Without
           set_id, we may delete other keys with the same signature.

       <b>Returns</b>
           If no entry found to delete, an error code of -ENOENT could be returned.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                 <u><a href="../man3/rte_member.h.3.html">rte_member.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>