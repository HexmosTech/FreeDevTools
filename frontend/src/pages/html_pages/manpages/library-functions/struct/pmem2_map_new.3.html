<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmem2_map_new() - creates a mapping</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpmem2-dev">libpmem2-dev_1.13.1-1.1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmem2_map_new</b>() - creates a mapping

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;libpmem2.h&gt;

              struct pmem2_config;
              struct pmem2_source;
              struct pmem2_map;
              int pmem2_map_new(struct pmem2_map **map_ptr, const struct pmem2_config *config,
                      const struct pmem2_source *source);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>pmem2_map_new</b>()  function creates a new mapping in the virtual address space of the calling process.
       This function requires a configuration <u>config</u> of the mapping and the data source <u>source</u>.

       Optionally, the mapping can be created at the offset of the virtual memory reservation set in the config‐
       uration <u>config</u>.  See <b><a href="../man3/pmem2_config_set_vm_reservation.3.html">pmem2_config_set_vm_reservation</a></b>(3) for details.

       For a mapping to succeed, the <u>config</u> structure must have the granularity parameter set to the appropriate
       level.  See <b><a href="../man3/pmem2_config_set_required_store_granularity.3.html">pmem2_config_set_required_store_granularity</a></b>(3) and <b><a href="../man7/libpmem2.7.html">libpmem2</a></b>(7) for more details.

       If the <b>pmem2_map_new</b>() function succeeds in  creating  a  new  mapping  it  instantiates  a  new  *struct
       pmem2_map**  object  describing  the  mapping.  The pointer to this newly created object is stored in the
       user-provided variable passed via the <u>map_ptr</u> pointer.  If the mapping  fails  the  variable  pointed  by
       <u>map_ptr</u>  will  contain a NULL value and appropriate error value will be returned.  For a list of possible
       return values please see RETURN VALUE.

       All <u>struct</u> <u>pmem2_map</u> objects created via the <b>pmem2_map_new</b>() function have  to  be  destroyed  using  the
       <b>pmem2_map_delete</b>() function.  For details please see <b><a href="../man3/pmem2_map_delete.3.html">pmem2_map_delete</a></b>(3) manual page.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>pmem2_map_new</b>() function returns 0 on success or a negative error code on failure.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>pmem2_map_new</b>() can fail with the following errors:

       • <b>PMEM2_E_GRANULARITY_NOT_SET</b>  - the store granularity for the mapping was not set in the provided <u>config</u>
         structure.  Please see <b><a href="../man3/pmem2_config_set_required_store_granularity.3.html">pmem2_config_set_required_store_granularity</a></b>(3) and <b><a href="../man7/libpmem2.7.html">libpmem2</a></b>(7).

       • <b>PMEM2_E_MAP_RANGE</b> - <u>offset</u> + <u>length</u> is too big to represent it using <u>size_t</u> data type

       • <b>PMEM2_E_MAP_RANGE</b> - end of the mapping (<u>offset</u> + <u>length</u>) is outside of  the  file.   The  file  is  too
         small.

       • <b>PMEM2_E_SOURCE_EMPTY</b> - mapped file has size equal to 0.

       • <b>PMEM2_E_MAPPING_EXISTS</b> - if the object exists before the function call.  For details please see <b>Create‐</b>
         <b>FileMapping</b>() manual pages.  (Windows only)

       • <b>PMEM2_E_OFFSET_UNALIGNED</b>  -  argument unaligned, offset is not a multiple of the alignment required for
         specific <u>*source</u>.  Please see <b><a href="../man3/pmem2_source_alignment.3.html">pmem2_source_alignment</a></b>(3).

       • <b>PMEM2_E_LENGTH_UNALIGNED</b> - argument unaligned, length is not a multiple of the alignment  required  for
         specific <u>*source</u>.  Please see <b><a href="../man3/pmem2_source_alignment.3.html">pmem2_source_alignment</a></b>(3).

       • <b>PMEM2_E_SRC_DEVDAX_PRIVATE</b> - device DAX mapped with MAP_PRIVATE.  (Linux only)

       • <b>PMEM2_E_ADDRESS_UNALIGNED</b>  -  when mapping device DAX to a virtual memory reservation and the base map‐
         ping address (reservation address + reservation offset) is not aligned to the device  DAX  granularity.
         Please see <b><a href="../man3/pmem2_config_set_vm_reservation.3.html">pmem2_config_set_vm_reservation</a></b>(3).  (Linux only)

       • <b>PMEM2_E_ADDRESS_UNALIGNED</b> - when mapping to a virtual memory reservation and the region for the mapping
         exceeds reservation size.  Please see <b><a href="../man3/pmem2_config_set_vm_reservation.3.html">pmem2_config_set_vm_reservation</a></b>(3).

       • <b>PMEM2_E_NOSUPP</b> - when config-provided protection flags combination is not supported.

       • <b>PMEM2_E_NO_ACCESS</b> - there is a conflict between mapping protection and file opening mode.

       It  can also return <b>-EACCES</b>, <b>-EAGAIN</b>, <b>-EBADF</b>, <b>-ENFILE</b>, <b>-ENODEV</b>, <b>-ENOMEM</b>, <b>-EPERM</b>, <b>-ETXTBSY</b> from the under‐
       lying <b><a href="../man2/mmap.2.html">mmap</a></b>(2) function.  It is used with and without <b>MAP_ANONYMOUS</b>.

       <b>-EACCES</b> may be returned only if the file descriptor points to an append-only file.

       It can also return all errors from the underlying <b>pmem2_source_size</b>() and <b>pmem2_source_alignment</b>()  func‐
       tions.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/mmap.2.html">mmap</a></b>(2),      <b><a href="../man3/open.3.html">open</a></b>(3),     <b><a href="../man3/pmem2_config_set_required_store_granularity.3.html">pmem2_config_set_required_store_granularity</a></b>(3),     <b><a href="../man3/pmem2_source_alignment.3.html">pmem2_source_alignment</a></b>(3),
       <b><a href="../man3/pmem2_source_from_fd.3.html">pmem2_source_from_fd</a></b>(3), <b><a href="../man3/pmem2_source_size.3.html">pmem2_source_size</a></b>(3),  <b><a href="../man3/pmem2_map_delete.3.html">pmem2_map_delete</a></b>(3),  <b><a href="../man3/pmem2_config_set_vm_reservation.3.html">pmem2_config_set_vm_reservation</a></b>(3),
       <b><a href="../man7/libpmem2.7.html">libpmem2</a></b>(7) and <b>&lt;https://pmem.io&gt;</b>
</pre>
 </div>
</div></section>
</div>
</body>
</html>