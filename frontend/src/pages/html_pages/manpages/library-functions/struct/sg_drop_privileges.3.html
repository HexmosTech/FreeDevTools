<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sg_init, sg_snapshot, sg_shutdown, sg_drop_privileges - initialise libstatgrab</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libstatgrab-dev">libstatgrab-dev_0.92.1-1.2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sg_init, sg_snapshot, sg_shutdown, sg_drop_privileges - initialise libstatgrab

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;statgrab.h&gt;

       void <b>sg_log_init</b> (const char *<u>properties_pfx</u>, const char *<u>env_name</u>, const char *<u>argv0</u>);

       sg_error <b>sg_init</b> (int <u>ignore_init_errors</u>);

       sg_error <b>sg_snapshot</b> (void);

       sg_error <b>sg_shutdown</b> (void);

       sg_error <b>sg_drop_privileges</b> (void);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sg_init</b>()  either  initialises  the statgrab library and sets the initialisation counter to 1, if not al‐
       ready done, or increases the initialisation counter.  If called for the first time (in  fact:  if  called
       when the initialisation counter is 0), the constructor (initialisation routine) of each registered compo‐
       nent  is  invoked,  some global variables are initialised, requested mutual exclusion semaphores are ini‐
       tialised and so on.  <b>sg_init</b>() is protected by the mutex named "statgrab".

       <b>sg_log_init</b>() allows some application-individual logging configuration. It's intended for  projects  with
       several  applications  or  commands  which might have different appenders.  Mind that <b>sg_log_init</b> must be
       called before <b>sg_init</b>, but after your application initialized logging framework.

       <b>sg_snapshot</b>() is Win32 only and will probably disappear.

       <b>sg_shutdown</b>() decrements the initialisation counter. If the counter reaches zero, components' destructors
       are called, mutual exclusion semaphores (except "statgrab") are destroyed etc.  <b>sg_shutdown</b>() is protect‐
       ed by the mutex named "statgrab".

       <b>sg_drop_privileges</b>() drops elevated privileges.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       All functions return a statgrab error code. Either SG_ERROR_NONE when everything was ok or the  appropri‐
       ate error code from an constructor/destructor.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Typical initialization/deinitialization sequence when using with log4cplus:

       static void *l4cplus_initializer;

       static void
       cleanup_logging(void)
       {
              log4cplus_deinitialize(l4cplus_initializer);
       }

       int
       main(int argc, char const *argv[])
       {
           l4cplus_initializer = log4cplus_initialize();
           atexit((void (*)(void))cleanup_logging);

           sg_log_init("saidar", "SAIDAR_LOG_PROPERTIES", argv[0]);
           <a href="../man1/sg_init.1.html">sg_init</a>(1);
           if(sg_drop_privileges() != 0) {
            die("Failed to drop setuid/setgid privileges");
           }

           do_something();

           sg_shutdown();

           return 0;
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/statgrab.3.html">statgrab</a></b>(3)

</pre><h4><b>WEBSITE</b></h4><pre>
       ⟨https://libstatgrab.org/⟩

libstatgrab                                        2019-10-03                                         <u><a href="../man3/sg_init.3.html">sg_init</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>