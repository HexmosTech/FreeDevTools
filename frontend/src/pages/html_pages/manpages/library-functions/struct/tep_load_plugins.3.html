<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tep_load_plugins, tep_unload_plugins, tep_load_plugins_hook, tep_add_plugin_path, tep_plugin_add_option -</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtraceevent-doc">libtraceevent-doc_1.8.4-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tep_load_plugins, tep_unload_plugins, tep_load_plugins_hook, tep_add_plugin_path, tep_plugin_add_option -
       Load / unload traceevent plugins.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;event-parse.h&gt;</b>

       struct tep_plugin_list *<b>tep_load_plugins</b>(struct tep_handle *<u>tep</u>);
       void <b>tep_unload_plugins</b>(struct tep_plugin_list *<u>plugin_list</u>, struct tep_handle *<u>tep</u>);
       void <b>tep_load_plugins_hook</b>(struct tep_handle *<u>tep</u>, const char *<u>suffix</u>,
                                  void (*<u>load_plugin</u>)(struct tep_handle *tep,
                                                      const char *path,
                                                      const char *name,
                                                      void *data),
                                  void *<u>data</u>);
       int <b>tep_add_plugin_path</b>(struct tep_handle *tep, char *path,
                                 enum tep_plugin_load_priority prio);
       int <b>tep_plugin_add_option</b>(const char *<u>name</u>, const char *<u>val</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>tep_load_plugins()</b> function loads all plugins, located in the plugin directories. The <u>tep</u> argument is
       trace event parser context. The plugin directories are :

                   - Directories, specified in <u>tep</u>→plugins_dir with priority TEP_PLUGIN_FIRST
                   - System’s plugin directory, defined at the library compile time. It
                     depends on the library installation prefix and usually is
                     <u>(install_preffix)/lib/traceevent/plugins</u>
                   - Directory, defined by the environment variable <u>TRACEEVENT_PLUGIN_DIR</u>
                   - User’s plugin directory, located at <u><a href="file:~/.local/lib/traceevent/plugins">~/.local/lib/traceevent/plugins</a></u>
                   - Directories, specified in <u>tep</u>→plugins_dir with priority TEP_PLUGIN_LAST

       Loading of plugins can be controlled by the <u>tep_flags</u>, using the <b>tep_set_flag()</b> API:

                   <u>TEP_DISABLE_SYS_PLUGINS</u>       - do not load plugins, located in
                                                   the system’s plugin directory.
                   <u>TEP_DISABLE_PLUGINS</u>           - do not load any plugins.

       The <b>tep_set_flag()</b> API needs to be called before <b>tep_load_plugins()</b>, if loading of all plugins is not the
       desired case.

       The <b>tep_unload_plugins()</b> function unloads the plugins, previously loaded by <b>tep_load_plugins()</b>. The <u>tep</u>
       argument is trace event parser context. The <u>plugin_list</u> is the list of loaded plugins, returned by the
       <b>tep_load_plugins()</b> function.

       The <b>tep_load_plugins_hook()</b> function walks through all directories with plugins and calls user specified
       <b>load_plugin()</b> hook for each plugin file. Only files with given <u>suffix</u> are considered to be plugins. The
       <u>data</u> is a user specified context, passed to <b>load_plugin()</b>. Directories and the walk order are the same as
       in <b>tep_load_plugins()</b> API.

       The <b>tep_add_plugin_path()</b> functions adds additional directories with plugins in the <u>tep</u>→plugins_dir list.
       It must be called before <b>tep_load_plugins()</b> in order for the plugins from the new directories to be
       loaded. The <u>tep</u> argument is the trace event parser context. The <u>path</u> is the full path to the new plugin
       directory. The <u>prio</u> argument specifies the loading priority order for the new directory of plugins. The
       loading priority is important in case of different versions of the same plugin located in multiple plugin
       directories.The last loaded plugin wins. The priority can be:

                   <u>TEP_PLUGIN_FIRST</u>      - Load plugins from this directory first
                   <u>TEP_PLUGIN_LAST</u>       - Load plugins from this directory last

       Where the plugins in TEP_PLUGIN_LAST" will take precedence over the plugins in the other directories.

       The <b>tep_plugin_add_option()</b> sets options defined by a plugin. The <u>name</u> is the name of the option to set
       to <u>val</u>. Plugins can add options to change its behavior and <b>tep_plugin_add_option()</b> is used by the
       application to make those modifications.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>tep_load_plugins()</b> function returns a list of successfully loaded plugins, or NULL in case no plugins
       are loaded. The <b>tep_add_plugin_path()</b> function returns -1 in case of an error, 0 otherwise.

</pre><h4><b>EXAMPLE</b></h4><pre>
           #include &lt;event-parse.h&gt;
           ...
           struct tep_handle *tep = tep_alloc();
           ...
           tep_add_plugin_path(tep, "<a href="file:~/dev_plugins">~/dev_plugins</a>", TEP_PLUGIN_LAST);
           ...
           struct tep_plugin_list *plugins = tep_load_plugins(tep);
           if (plugins == NULL) {
                   /* no plugins are loaded */
           }
           ...
           tep_unload_plugins(plugins, tep);
           ...
           void print_plugin(struct tep_handle *tep, const char *path,
                             const char *name, void *data)
           {
                   pritnf("Found libtraceevent plugin %s/%s\n", path, name);
           }
           ...
           tep_load_plugins_hook(tep, ".so", print_plugin, NULL);
           ...

</pre><h4><b>FILES</b></h4><pre>
           <b>event-parse.h</b>
                   Header file to include in order to have access to the library APIs.
           <b>-ltraceevent</b>
                   Linker switch to add when building a program that uses the library.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libtraceevent.3.html">libtraceevent</a></b>(3), <b><a href="../man1/trace-cmd.1.html">trace-cmd</a></b>(1), <b><a href="../man3/tep_set_flag.3.html">tep_set_flag</a></b>(3)

</pre><h4><b>AUTHOR</b></h4><pre>
           <b>Steven</b> <b>Rostedt</b> &lt;<b><a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a></b>[1]&gt;, author of <b>libtraceevent</b>.
           <b>Tzvetomir</b> <b>Stoyanov</b> &lt;<b><a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a></b>[2]&gt;, author of this man page.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<b><a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a></b>[3]&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       libtraceevent is Free Software licensed under the GNU LGPL 2.1

</pre><h4><b>RESOURCES</b></h4><pre>
       <b>https://git.kernel.org/pub/scm/libs/libtrace/libtraceevent.git/</b>

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a>
           <a href="mailto:rostedt@goodmis.org">mailto:rostedt@goodmis.org</a>

        2. <a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a>
           <a href="mailto:tz.stoyanov@gmail.com">mailto:tz.stoyanov@gmail.com</a>

        3. <a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a>
           <a href="mailto:linux-trace-devel@vger.kernel.org">mailto:linux-trace-devel@vger.kernel.org</a>

libtraceevent 1.8.4                                12/24/2024                                   <u><a href="../man3/LIBTRACEEVENT.3.html">LIBTRACEEVENT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>