<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>socket - Netlink socket helpers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmnl-doc">libmnl-doc_1.0.5-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       socket - Netlink socket helpers

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Functions</b>
       int <b>mnl_socket_get_fd</b> (const struct mnl_socket *nl)
       unsigned int <b>mnl_socket_get_portid</b> (const struct mnl_socket *nl)
       struct mnl_socket * <b>mnl_socket_open</b> (int bus)
       struct mnl_socket * <b>mnl_socket_open2</b> (int bus, int flags)
       struct mnl_socket * <b>mnl_socket_fdopen</b> (int fd)
       int <b>mnl_socket_bind</b> (struct mnl_socket *nl, unsigned int groups, pid_t pid)
       ssize_t <b>mnl_socket_sendto</b> (const struct mnl_socket *nl, const void *buf, size_t len)
       ssize_t <b>mnl_socket_recvfrom</b> (const struct mnl_socket *nl, void *buf, size_t bufsiz)
       int <b>mnl_socket_close</b> (struct mnl_socket *nl)
       int <b>mnl_socket_setsockopt</b> (const struct mnl_socket *nl, int type, void *buf, socklen_t len)
       int <b>mnl_socket_getsockopt</b> (const struct mnl_socket *nl, int type, void *buf, socklen_t *len)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>mnl_socket_bind</b> <b>(struct</b> <b>mnl_socket</b> <b>*</b> <b>nl,</b> <b>unsigned</b> <b>int</b> <b>groups,</b> <b>pid_t</b> <b>pid)</b>
       mnl_socket_bind - bind netlink socket

       <b>Parameters</b>
           <u>nl</u> netlink socket obtained via <b>mnl_socket_open()</b>
           <u>groups</u> the group of message you're interested in
           <u>pid</u> the port ID you want to use (use zero for automatic selection)

       On error, this function returns -1 and errno is appropriately set. On success, 0 is returned. You can use
       MNL_SOCKET_AUTOPID which is 0 for automatic port ID selection.

       Definition at line <b>193</b> of file <b>socket.c</b>.

   <b>int</b> <b>mnl_socket_close</b> <b>(struct</b> <b>mnl_socket</b> <b>*</b> <b>nl)</b>
       mnl_socket_close - close a given netlink socket

       <b>Parameters</b>
           <u>nl</u> netlink socket obtained via <b>mnl_socket_open()</b>

       On error, this function returns -1 and errno is appropriately set. On success, it returns 0.

       Definition at line <b>296</b> of file <b>socket.c</b>.

   <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>mnl_socket_fdopen</b> <b>(int</b> <b>fd)</b>
       mnl_socket_fdopen - associates a mnl_socket object with pre-existing socket.

       <b>Parameters</b>
           <u>fd</u> pre-existing socket descriptor.

       On error, it returns NULL and errno is appropriately set. Otherwise, it returns a valid pointer to the
       mnl_socket structure. It also sets the portID if the socket fd is already bound and it is AF_NETLINK.

       Note that <b>mnl_socket_get_portid()</b> returns 0 if this function is used with non-netlink socket.

       Definition at line <b>161</b> of file <b>socket.c</b>.

   <b>int</b> <b>mnl_socket_get_fd</b> <b>(const</b> <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>nl)</b>
       mnl_socket_get_fd - obtain file descriptor from netlink socket

       <b>Parameters</b>
           <u>nl</u> netlink socket obtained via <b>mnl_socket_open()</b>

       This function returns the file descriptor of a given netlink socket.

       Definition at line <b>85</b> of file <b>socket.c</b>.

   <b>unsigned</b> <b>int</b> <b>mnl_socket_get_portid</b> <b>(const</b> <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>nl)</b>
       mnl_socket_get_portid - obtain Netlink PortID from netlink socket

       <b>Parameters</b>
           <u>nl</u> netlink socket obtained via <b>mnl_socket_open()</b>

       This function returns the Netlink PortID of a given netlink socket. It's a common mistake to assume that
       this PortID equals the process ID which is not always true. This is the case if you open more than one
       socket that is binded to the same Netlink subsystem from the same process.

       Definition at line <b>99</b> of file <b>socket.c</b>.

   <b>int</b> <b>mnl_socket_getsockopt</b> <b>(const</b> <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>nl,</b> <b>int</b> <b>type,</b> <b>void</b> <b>*</b> <b>buf,</b> <b>socklen_t</b> <b>*</b> <b>len)</b>
       mnl_socket_getsockopt - get a Netlink socket option

       <b>Parameters</b>
           <u>nl</u> netlink socket obtained via <b>mnl_socket_open()</b>
           <u>type</u> type of Netlink socket options
           <u>buf</u> pointer to the buffer to store the value of this option
           <u>len</u> size of the information written in the buffer

       On error, this function returns -1 and errno is appropriately set.

       Definition at line <b>343</b> of file <b>socket.c</b>.

   <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>mnl_socket_open</b> <b>(int</b> <b>bus)</b>
       mnl_socket_open - open a netlink socket

       <b>Parameters</b>
           <u>bus</u> the netlink socket bus ID (see NETLINK_* constants)

       On error, it returns NULL and errno is appropriately set. Otherwise, it returns a valid pointer to the
       mnl_socket structure.

       Definition at line <b>128</b> of file <b>socket.c</b>.

   <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>mnl_socket_open2</b> <b>(int</b> <b>bus,</b> <b>int</b> <b>flags)</b>
       mnl_socket_open2 - open a netlink socket with appropriate flags

       <b>Parameters</b>
           <u>bus</u> the netlink socket bus ID (see NETLINK_* constants)
           <u>flags</u> the netlink socket flags (see SOCK_* constants in <a href="../man2/socket.2.html">socket</a>(2))

       This is similar to <b>mnl_socket_open()</b>, but allows one to set flags like SOCK_CLOEXEC at socket creation
       time (useful for multi-threaded programs performing exec calls).

       On error, it returns NULL and errno is appropriately set. Otherwise, it returns a valid pointer to the
       mnl_socket structure.

       Definition at line <b>145</b> of file <b>socket.c</b>.

   <b>ssize_t</b> <b>mnl_socket_recvfrom</b> <b>(const</b> <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>nl,</b> <b>void</b> <b>*</b> <b>buf,</b> <b>size_t</b> <b>bufsiz)</b>
       mnl_socket_recvfrom - receive a netlink message

       <b>Parameters</b>
           <u>nl</u> netlink socket obtained via <b>mnl_socket_open()</b>
           <u>buf</u> buffer that you want to use to store the netlink message
           <u>bufsiz</u> size of the buffer passed to store the netlink message

       On error, it returns -1 and errno is appropriately set. If errno is set to ENOSPC, it means that the
       buffer that you have passed to store the netlink message is too small, so you have received a truncated
       message. To avoid this, you have to allocate a buffer of MNL_SOCKET_BUFFER_SIZE (which is 8KB, see
       linux/netlink.h for more information). Using this buffer size ensures that your buffer is big enough to
       store the netlink message without truncating it.

       Definition at line <b>256</b> of file <b>socket.c</b>.

   <b>ssize_t</b> <b>mnl_socket_sendto</b> <b>(const</b> <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>nl,</b> <b>const</b> <b>void</b> <b>*</b> <b>buf,</b> <b>size_t</b> <b>len)</b>
       mnl_socket_sendto - send a netlink message of a certain size

       <b>Parameters</b>
           <u>nl</u> netlink socket obtained via <b>mnl_socket_open()</b>
           <u>buf</u> buffer containing the netlink message to be sent
           <u>len</u> number of bytes in the buffer that you want to send

       On error, it returns -1 and errno is appropriately set. Otherwise, it returns the number of bytes sent.

       Definition at line <b>232</b> of file <b>socket.c</b>.

   <b>int</b> <b>mnl_socket_setsockopt</b> <b>(const</b> <b>struct</b> <b>mnl_socket</b> <b>*</b> <b>nl,</b> <b>int</b> <b>type,</b> <b>void</b> <b>*</b> <b>buf,</b> <b>socklen_t</b> <b>len)</b>
       mnl_socket_setsockopt - set Netlink socket option

       <b>Parameters</b>
           <u>nl</u> netlink socket obtained via <b>mnl_socket_open()</b>
           <u>type</u> type of Netlink socket options
           <u>buf</u> the buffer that contains the data about this option
           <u>len</u> the size of the buffer passed

       This function allows you to set some Netlink socket option. As of writing this (see linux/netlink.h), the
       existing options are:

        - \#define NETLINK_ADD_MEMBERSHIP  1
        - \#define NETLINK_DROP_MEMBERSHIP 2
        - \#define NETLINK_PKTINFO         3
        - \#define NETLINK_BROADCAST_ERROR 4
        - \#define NETLINK_NO_ENOBUFS      5

        In the early days, Netlink only supported 32 groups expressed in a 32-bits mask. However, since 2.6.14,
       Netlink may have up to 2^32 multicast groups but you have to use setsockopt() with NETLINK_ADD_MEMBERSHIP
       to join a given multicast group. This function internally calls setsockopt() to join a given netlink
       multicast group. You can still use mnl_bind() and the 32-bit mask to join a set of Netlink multicast
       groups.

       On error, this function returns -1 and errno is appropriately set.

       Definition at line <b>328</b> of file <b>socket.c</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for libmnl from the source code.

libmnl                                            Version 1.0.5                                        <u><a href="../man3/socket.3.html">socket</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>