<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPI_Buffer_detach_c -  Removes an existing buffer (for use in MPI_Bsend etc)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/mpich-doc">mpich-doc_4.0-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MPI_Buffer_detach_c -  Removes an existing buffer (for use in MPI_Bsend etc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #ifdef ENABLE_QMPI
       #ifndef MPICH_MPI_FROM_PMPI
       int QMPI_Buffer_detach_c(QMPI_Context context, int tool_id, void *buffer_addr,
       MPI_Count *size) MPICH_API_PUBLIC

</pre><h4><b>OUTPUT</b> <b>PARAMETERS</b></h4><pre>
       <b>buffer_addr</b>
              - initial buffer address (choice) (choice)
       <b>size</b>   - buffer size, in bytes (integer) (integer)

</pre><h4><b>NOTES</b></h4><pre>
       The  reason  that <u>MPI_Buffer_detach</u> returns the address and size of the buffer being detached is to allow
       nested libraries to replace and restore the buffer.  For example, consider

       int size, mysize, idummy;
       void *ptr, *myptr, *dummy;
       MPI_Buffer_detach(&amp;ptr, &amp;size);
       MPI_Buffer_attach(myptr, mysize);
       .
       .
       .
       .
       .
       .
       library code ...
       .
       .
       .
       MPI_Buffer_detach(&amp;dummy, &amp;idummy);
       MPI_Buffer_attach(ptr, size);

       This is much like the action of the Unix signal routine and has the same strengths  (it  is  simple)  and
       weaknesses (it only works for nested usages).

       Note  that  for  this  approach  to work, MPI_Buffer_detach must return MPI_SUCCESS even when there is no
       buffer to detach.  In that case, it returns a size of zero.  The MPI 1.1 standard  for  <u>MPI_BUFFER_DETACH</u>
       contains the text

       The statements made in this section describe the behavior of MPI for
       buffered-mode sends. When no buffer is currently associated, MPI behaves
       as if a zero-sized buffer is associated with the process.

       This  could  be  read  as  applying  only  to  the various Bsend routines.  This implementation takes the
       position that this applies to <u>MPI_BUFFER_DETACH</u> as well.

</pre><h4><b>THREAD</b> <b>AND</b> <b>INTERRUPT</b> <b>SAFETY</b></h4><pre>
       The user is responsible for ensuring that multiple threads do not try to update the same MPI object  from
       different threads.  This routine should not be used from within a signal handler.

       The  MPI  standard defined a thread-safe interface but this does not mean that all routines may be called
       without any thread locks.  For example, two threads must not attempt to change the contents of  the  same
       <u>MPI_Info</u>  object  concurrently.   The  user is responsible in this case for using some mechanism, such as
       thread locks, to ensure that only one thread at a time makes use of this routine.  Because the buffer for
       buffered sends (e.g., <u>MPI_Bsend</u> ) is shared by all threads in a process,  the  user  is  responsible  for
       ensuring that only one thread at a time calls this routine or <u>MPI_Buffer_attach</u> .

</pre><h4><b>NOTES</b> <b>FOR</b> <b>FORTRAN</b></h4><pre>
       All MPI routines in Fortran (except for <u>MPI_WTIME</u> and <u>MPI_WTICK</u> ) have an additional argument <u>ierr</u> at the
       end of the argument list.  <u>ierr</u> is an integer and has the same meaning as the return value of the routine
       in C.  In Fortran, MPI routines are subroutines, and are invoked with the <u>call</u> statement.

       All MPI objects (e.g., <u>MPI_Datatype</u> , <u>MPI_Comm</u> ) are of type <u>INTEGER</u> in Fortran.

       The  Fortran  binding  for  this  routine  is  different.   Because Fortran does not have pointers, it is
       impossible to provide a way to use the output of this routine to exchange buffers.  In  this  case,  only
       the size field is set.

</pre><h4><b>NOTES</b> <b>FOR</b> <b>C</b></h4><pre>
       Even  though  the  <u>bufferptr</u> argument is declared as <u>void</u> <u>*</u> , it is really the address of a void pointer.
       See the rationale in the standard for more details.

</pre><h4><b>ERRORS</b></h4><pre>
       All MPI routines (except <u>MPI_Wtime</u> and <u>MPI_Wtick</u> ) return an error value; C routines as the value of  the
       function  and Fortran routines in the last argument.  Before the value is returned, the current MPI error
       handler is called.  By default, this error handler aborts the MPI job.  The error handler may be  changed
       with    <u>MPI_Comm_set_errhandler</u>   (for   communicators),   <u>MPI_File_set_errhandler</u>   (for   files),   and
       <u>MPI_Win_set_errhandler</u> (for RMA windows).  The MPI-1 routine <u>MPI_Errhandler_set</u> may be used but  its  use
       is  deprecated.   The  predefined error handler <u>MPI_ERRORS_RETURN</u> may be used to cause error values to be
       returned.  Note that MPI does <b>not</b> guarantee that an MPI program can continue past an error; however,  MPI
       implementations will attempt to continue whenever possible.

       <b>MPI_SUCCESS</b>
              - No error; MPI routine completed successfully.

       <b>MPI_ERR_ARG</b>
              -  Invalid  argument.   Some  argument  is invalid and is not identified by a specific error class
              (e.g., <u>MPI_ERR_RANK</u> ).
       <b>MPI_ERR_OTHER</b>
              - Other error; use <u>MPI_Error_string</u> to get more information about this error code.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       MPI_Buffer_attach

                                                    1/21/2022                             <u><a href="../man3/MPI_Buffer_detach_c.3.html">MPI_Buffer_detach_c</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>