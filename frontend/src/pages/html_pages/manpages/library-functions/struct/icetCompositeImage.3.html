<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>icetCompositeImage -- composites a pre-rendered image</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/paraview">paraview_5.13.2+dfsg-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>icetCompositeImage</b> <b>--</b> <b>composites</b> <b>a</b> <b>pre-rendered</b> <b>image</b>

</pre><h4><b>Synopsis</b></h4><pre>
       #include &lt;IceT.h&gt;

       <b>IceTImage</b> <b>icetCompositeImage</b>(
                                       const IceTVoid *     <u>color_buffer</u>,
                                       const IceTVoid *     <u>depth_buffer</u>,
                                       const IceTInt *      <u>valid_pixels_viewport</u>,
                                       const IceTDouble *   <u>projection_matrix</u>,
                                       const IceTDouble *   <u>modelview_matrix</u>,
                                       const IceTFloat *    <u>background_color</u>  );

</pre><h4><b>Description</b></h4><pre>
       The  <b>icetCompositeImage</b>  function  takes  image  buffer  data  and  composites it to a single image. This
       function behaves similarly to <b>icetDrawFrame</b> except that instead of using callback functions to render and
       retrieve image data, the images are pre-rendered and passed directly to <b>icetCompositeImage</b>.  Although  it
       is  more  efficient  to allow <b>IceT</b> to determine rendering projections and use callbacks, it is often more
       convenient for applications to integrate <b>IceT</b> as a separate compositing step after the rendering.

       Before <b>IceT</b> may composite an image, the display needs to  be  defined  (using  <b>icetAddTile</b>),  the  buffer
       formats  need to be specified (using <b>icetSetColorFormat</b>and <b>icetSetDepthFormat</b>),and the composite strategy
       must be set (using <b>icetStrategy</b>).  The single image  sub-strategy  may  also  optionally  be  set  (using
       <b>icetSingleImageStrategy</b>).

       All process must call <b>icetCompositeImage</b> for the operation to complete on any process in a parallel job.

       The  <u>color_buffer</u>  and  <u>depth_buffer</u>  arguments  point to memory buffers that contain the image data. The
       image data is always stored in densely packed arrays in row-major  order  (a.k.a.  x-major  order  or  by
       scan-lines).  The  first  horizontal  scan-line  is at the bottom of the image with subsequent scan-lines
       moving up. The size of each image buffer is expected to be  the  width  and  the  height  of  the  global
       viewport   (which   is  set  indirectly  with  <b>icetAddTile</b>).   The  global  viewport  is  stored  in  the
       <b>ICET_GLOBAL_VIEWPORT</b> state variable. If only one tile is specified, then the  width  and  height  of  the
       global viewport will be the same as this one tile.

       The  format  for  <u>color_buffer</u>  is  expected  to  be  the same as what is set with <b>icetSetColorFormat</b>.The
       following formats and their interpretations with respect to <u>color_buffer</u> are as follows.

       <b>ICET_IMAGE_COLOR_RGBA_UBYTE</b>
               Each entry is an RGBA color tuple. Each component is valued in the range from 0  to  255  and  is
              stored  as  an  8-bit  integer. The buffer will always be allocated on memory boundaries such that
              each color value can be treated as a single 32-bit integer.

       <b>ICET_IMAGE_COLOR_RGBA_FLOAT</b>
               Each entry is an RGBA color tuple. Each component is in the range from 0.0 to 1.0 and  is  stored
              as a 32-bit float.

       <b>ICET_IMAGE_COLOR_RGB_FLOAT</b>
               Each  entry  is an RGB color triple. Each component is in the range from 0.0 to 1.0 and is stored
              as a 32-bit float. Note that there is no alpha channel, so the color blending composite mode  will
              not work with this color format.

       <b>ICET_IMAGE_COLOR_NONE</b>
               No color values are stored in the image.

       Likewise,   the   format   for   <u>depth_buffer</u>   is   expected  to  be  the  same  as  what  is  set  with
       <b>icetSetDepthFormat</b>.The following formats and their interpretations with respect to  <u>depth_buffer</u>  are  as
       follows.

       <b>ICET_IMAGE_DEPTH_FLOAT</b>
               Each  entry  is  in  the range from 0.0 (near plane) to 1.0 (far plane) and is stored as a 32-bit
              float.

       <b>ICET_IMAGE_DEPTH_NONE</b>
               No depth values are stored in the image.

       If the current format does not have a color or depth, then the respective buffer argument should  be  set
       to NULL.

       Care  should  be taken to make sure that the color and depth buffer formats are consistent to the formats
       expected by <b>IceT</b> .Mismatched formats will result in garbage images and possible memory faults.

       Also   note   that   when   compositing   with   color   blending   (<b>icetCompositeMode</b>    is    set    to
       <b>ICET_COMPOSITE_MODE_BLEND</b>),  the  color  buffer must be rendered with a black background in order for the
       composite to complete correctly. A colored background can later be added using  the  <u>background_color</u>  as
       described below.

       <u>valid_pixels_viewport</u>  is  an optional argument that makes it possible to specify a subset of pixels that
       are valid. In parallel rendering it is common for a single process to render geometry  in  only  a  small
       portion of the image, and <b>IceT</b> can take advantage of this information. If the rendering system identifies
       such a region, it can be specified with <u>valid_pixels_viewport</u>.

       Like  all  viewports  in <b>IceT</b> ,<u>valid_pixels_viewport</u> is an array of 4 integers in the form $&lt;x, y, width,
       height &gt;$.This viewport is given in relation to the image passed in  the  <u>color_buffer</u>  and  <u>depth_buffer</u>
       arguments.  Everything  outside  of  this  rectangular  region  will  be  ignored.  For  example,  if the
       <u>valid_pixels_viewport</u> $&lt;10, 20, 150, 100 &gt;$is given, then <b>icetCompositeImage</b> will ignore  all  pixels  in
       the  bottom  10  rows, the left 20 columns, anything above the $160^th$ (10+150) row, and anything to the
       right of the $120^th$ (20+100) column.

       If <u>valid_pixels_viewport</u> is NULL, then all pixels in the input image are assumed to be valid.

       <u>projection_matrix</u> and <u>modelview_matrix</u> are optional arguments that specify the projection that  was  used
       during  rendering.   When  applied  to  the  geometry  bounds  information  given with <b>icetBoundingBox</b> or
       <b>icetBoundingVertices</b>, this provides <b>IceT</b> with further information on  local  image  projections.  If  the
       given  matrices  are  not the same used in the rendering or the given bounds do not contain the geometry,
       <b>IceT</b> may clip the geometry in surprising ways.  If  these  arguments  are  set  to  NULL,  then  geometry
       projection will not be considered when determining what parts of images are valid.

       The  <u>background_color</u>  argument  specifies  the desired background color for the image. It is given as an
       array of 4 floating point values specifying, in order, the red, green, blue, and alpha  channels  of  the
       color in the range from 0.0 to 1.0.

       When  rendering  using  a  depth buffer, the background color is used to fill in empty regions of images.
       When rendering using color blending, the background color is used to correct colored backgrounds.

       As stated previously, color blended compositing only works correctly if the images are  rendered  with  a
       clear  black background. Otherwise the background color will be added multiple times by each process that
       contains geometry in  that  pixel.  If  the  <b>ICET_CORRECT_COLORED_BACKGROUND</b>  feature  is  enabled,  this
       background color is blended back into the final composited image.

</pre><h4><b>Return</b> <b>Value</b></h4><pre>
       On  each  .igdisplay  processdisplay  process (as defined by <b>icetAddTile</b>), <b>icetCompositeImage</b> returns the
       fully composited image in an  <b>IceTImage</b>  object.  The  contents  of  the  image  are  undefined  for  any
       non-display process.

       If  the  <b>ICET_COMPOSITE_ONE_BUFFER</b>  option  is  on  and  both  a color and depth buffer is specified with
       <b>icetSetColorFormat</b>and <b>icetSetDepthFormat</b>,then the returned image might be missing the depth  buffer.  The
       rational  behind  this  option  is  that  often  both the color and depth buffer is necessary in order to
       composite the color buffer, but the composited depth buffer is not needed. In this case, the  compositing
       might save some time by not transferring depth information at the latter stage of compositing.

       The  returned image uses memory buffers that will be reclaimed the next time <b>IceT</b> renders or composites a
       frame. Do not use this image after the next call to <b>icetCompositeImage</b> (unless you have changed the  <b>IceT</b>
       context).

</pre><h4><b>Errors</b></h4><pre>
       <b>ICET_INVALID_VALUE</b>
               An argument is set to NULL where data is required.

       <b>ICET_OUT_OF_MEMORY</b>
               Not enough memory left to hold intermittent frame buffers and other temporary data.

       <b>icetDrawFrame</b> may also indirectly raise an error if there is an issue with the strategy or callback.

</pre><h4><b>Warnings</b></h4><pre>
       <b>ICET_INVALID_VALUE</b>
               An argument to <b>icetCompositeImage</b> is inconsistent with the current <b>IceT</b> state.

</pre><h4><b>Bugs</b></h4><pre>
       The  images provided must match the format expected by <b>IceT</b> or else unpredictable behavior may occur. The
       images must also be carefully rendered to follow the provided viewport and  projections.  Images  that  a
       color blended must be rendered with a black background and rendered with the correct alpha value.

       If  compositing  with  color  blending  on, the image returned may have a black background instead of the
       <u>background_color</u> requested. This can be corrected  by  blending  the  returned  image  over  the  desired
       background. This will be done for you if the <b>ICET_CORRECT_COLORED_BACKGROUND</b> feature is enabled.

</pre><h4><b>Copyright</b></h4><pre>
       Copyright (C)2014 Sandia Corporation

       Under  the  terms  of  Contract  DE-AC04-94AL85000  with  Sandia Corporation, the U.S. Government retains
       certain rights in this software.

       This source code is released under the New BSD License.

</pre><h4><b>See</b> <b>Also</b></h4><pre>
       <u><a href="../man3/icetAddTile.3.html">icetAddTile</a></u>(3),  <u><a href="../man3/icetBoundingBox.3.html">icetBoundingBox</a></u>(3),  <u><a href="../man3/icetBoundingVertices.3.html">icetBoundingVertices</a></u>(3),   <u><a href="../man3/icetDrawCallback.3.html">icetDrawCallback</a></u>(3),   <u><a href="../man3/icetDrawFrame.3.html">icetDrawFrame</a></u>(3),
       <u><a href="../man3/icetSetColorFormat.3.html">icetSetColorFormat</a></u>(3), <u><a href="../man3/icetSetDepthFormat.3.html">icetSetDepthFormat</a></u>(3), <u><a href="../man3/icetSingleImageStrategy.3.html">icetSingleImageStrategy</a></u>(3), <u><a href="../man3/icetStrategy.3.html">icetStrategy</a></u>(3)

<b>IceT</b> Reference                                  October  9, 2014                           <u><a href="../man3/icetCompositeImage.3.html">icetCompositeImage</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>