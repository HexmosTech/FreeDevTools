<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EMF::METAFILEDEVICECONTEXT - Graphics Device Context.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libemf-doc">libemf-doc_1.0.13-8_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       EMF::METAFILEDEVICECONTEXT - Graphics Device Context.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;libemf.h&gt;

       Inherits <b>EMF::OBJECT</b>.

   <b>Public</b> <b>Member</b> <b>Functions</b>
       <b>METAFILEDEVICECONTEXT</b> (FILE *fp_, const RECT *size, LPCWSTR description_w)
       virtual <b>~METAFILEDEVICECONTEXT</b> ()
       OBJECTTYPE <b>getType</b> (void) const
       DWORD <b>nextHandle</b> (void)
       void <b>clearHandle</b> (DWORD <b>handle</b>)
       void <b>appendRecord</b> (<b>METARECORD</b> *record)
       void <b>appendHandle</b> (<b>METARECORD</b> *record)
       void <b>deleteMetafile</b> (void)
       void <b>mergePoint</b> (const LONG &amp;x, const LONG &amp;y)
       void <b>mergePoint</b> (const POINT &amp;p)

       Public Member Functions inherited from <b>EMF::OBJECT</b>
       virtual <b>~OBJECT</b> ()
           OBJECTs have a virtual destructor.
       <b>OBJECT</b> (void)

   <b>Data</b> <b>Fields</b>
       ::FILE * <b>fp</b>
       <b>DATASTREAM</b> <b>ds</b>
       <b>ENHMETAHEADER</b> * <b>header</b>
       std::vector&lt; <b>EMF::METARECORD</b> * &gt; <b>records</b>
       SIZEL <b>resolution</b>
           The resolution in DPI of the <u>reference</u> DC.
       SIZEL <b>viewport_ext</b>
           The extent of the viewport.
       POINT <b>viewport_org</b>
           The origin of the viewport.
       SIZEL <b>window_ext</b>
           The extent of the window.
       POINT <b>window_org</b>
           The origin of the window.
       bool <b>update_frame</b>
           Update the frame automatically?
       POINT <b>min_device_point</b>
           The lft/top-most painted point in device units.
       POINT <b>max_device_point</b>
           The rgt/btm-most painted point in device units.
       POINT <b>point</b>
           The current point.
       <b>PEN</b> * <b>pen</b>
           The current pen.
       <b>BRUSH</b> * <b>brush</b>
           The current brush.
       <b>FONT</b> * <b>font</b>
           The current font.
       <b>PALETTE</b> * <b>palette</b>
           The current palette.
       UINT <b>text_alignment</b>
           The current text alignment.
       COLORREF <b>text_color</b>
           The current text foreground color.
       COLORREF <b>bk_color</b>
           The current background color.
       INT <b>bk_mode</b>
           The current background mode.
       INT <b>polyfill_mode</b>
           The current polygon fill mode.
       INT <b>map_mode</b>
           The current mapping mode.
       FLOAT <b>miter_limit</b>
           The current miter length limit.
       std::vector&lt; bool &gt; <b>handles</b>
       std::map&lt; HGDIOBJ, HGDIOBJ &gt; <b>emf_handles</b>

       Data Fields inherited from <b>EMF::OBJECT</b>
       HGDIOBJ <b>handle</b>

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Graphics Device Context.

       Almost all GDI graphics calls require a device context (except those which create graphics objects such
       as pens and fonts). This is a specific context which renders to a metafile. There is a one-to-one
       correspondence between the device context and the metafile.

</pre><h4><b>Constructor</b> <b>&amp;</b> <b>Destructor</b> <b>Documentation</b></h4><pre>
   <b>EMF::METAFILEDEVICECONTEXT::METAFILEDEVICECONTEXT</b> <b>(FILE</b> <b>*</b> <b>fp_,</b> <b>const</b> <b>RECT</b> <b>*</b> <b>size,</b> <b>LPCWSTR</b> <b>description_w)</b>
       <b>[inline]</b>
       Most graphics programs seem to want to handle the opening and closing of files themselves, so this is an
       extension to the w32 interface.

       <b>Parameters</b>
           <u>fp</u><b>_</b> stdio pointer to an open file. May be null.
           <u>size</u> the rectangle describing the position and size of the metafile on the 'page'. May be null.
           <u>description_w</u> a UNICODE string describing the metafile. The format must be 'some text\0some more
           text\0\0'. May be null.

   <b>virtual</b> <b>EMF::METAFILEDEVICECONTEXT::~METAFILEDEVICECONTEXT</b> <b>()</b> <b>[inline],</b>  <b>[virtual]</b>
       Destructor frees all the graphics objects which may have been allocated. Now, it also frees any
       metarecords which it might hold, too.

       References <b>deleteMetafile()</b>, and <b>records</b>.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>EMF::METAFILEDEVICECONTEXT::appendHandle</b> <b>(METARECORD</b> <b>*</b> <b>record)</b> <b>[inline]</b>
       Add this record to the metafile.

       <b>Parameters</b>
           <u>record</u> this record is an object so it increments the handle count as well.

       References <b>header</b>, <b>records</b>, and <b>EMF::METARECORD::size()</b>.

   <b>void</b> <b>EMF::METAFILEDEVICECONTEXT::appendRecord</b> <b>(METARECORD</b> <b>*</b> <b>record)</b> <b>[inline]</b>
       Add this record to the metafile.

       <b>Parameters</b>
           <u>record</u> standard graphics record

       References <b>header</b>, <b>records</b>, and <b>EMF::METARECORD::size()</b>.

   <b>void</b> <b>EMF::METAFILEDEVICECONTEXT::clearHandle</b> <b>(DWORD</b> <b>handle)</b> <b>[inline]</b>
       Clear the usage of this handle

       References <b>EMF::OBJECT::handle</b>, and <b>handles</b>.

   <b>void</b> <b>EMF::METAFILEDEVICECONTEXT::deleteMetafile</b> <b>(void)</b> <b>[inline]</b>
       Delete all the records from the metafile. This would seem to include deleting the header record as well.

       References <b>records</b>.

       Referenced by <b>~METAFILEDEVICECONTEXT()</b>.

   <b>OBJECTTYPE</b> <b>EMF::METAFILEDEVICECONTEXT::getType</b> <b>(void)</b> <b>const</b> <b>[inline],</b>  <b>[virtual]</b>
       Return the type of this object (could probably do better with RTTI()).

       Implements <b>EMF::OBJECT</b>.

   <b>void</b> <b>EMF::METAFILEDEVICECONTEXT::mergePoint</b> <b>(const</b> <b>LONG</b> <b>&amp;</b> <b>x,</b> <b>const</b> <b>LONG</b> <b>&amp;</b> <b>y)</b> <b>[inline]</b>
       Somewhat superfluous, except checker doesn't understand the initialization of automatic structures in the
       declaration.

       References <b>mergePoint()</b>.

       Referenced by <b>mergePoint()</b>.

   <b>void</b> <b>EMF::METAFILEDEVICECONTEXT::mergePoint</b> <b>(const</b> <b>POINT</b> <b>&amp;</b> <b>p)</b> <b>[inline]</b>
       Take the given point and determine if it enlarges the 'painted' area of the device.

       References <b>header</b>, <b>max_device_point</b>, <b>min_device_point</b>, <b>update_frame</b>, <b>viewport_ext</b>, <b>viewport_org</b>,
       <b>window_ext</b>, and <b>window_org</b>.

   <b>DWORD</b> <b>EMF::METAFILEDEVICECONTEXT::nextHandle</b> <b>(void)</b> <b>[inline]</b>
       Scan the bit vector of used handles and return the index of the first free bit as this objects metafile
       handle.

       References <b>handles</b>, <b>header</b>, and <b>EMF::ENHMETAHEADER::size()</b>.

</pre><h4><b>Field</b> <b>Documentation</b></h4><pre>
   <b>DATASTREAM</b> <b>EMF::METAFILEDEVICECONTEXT::ds</b>
       All i/o to the metafile is wrapped by this class so that byte swapping on big-endian machines is
       transparent.

   <b>std::map&lt;</b> <b>HGDIOBJ,</b> <b>HGDIOBJ</b> <b>&gt;</b> <b>EMF::METAFILEDEVICECONTEXT::emf_handles</b>
       This map holds the <u>current</u> mapping between EMF handles and global object handles as a metafile is played
       back (with PlayEnhMetaFile).

       Referenced by <b>EMF::EMRSELECTOBJECT::execute()</b>, <b>EMF::EMRDELETEOBJECT::execute()</b>,
       <b>EMF::EMRCREATEPEN::execute()</b>, <b>EMF::EMREXTCREATEPEN::execute()</b>, <b>EMF::EMRCREATEBRUSHINDIRECT::execute()</b>,
       and <b>EMF::EMREXTCREATEFONTINDIRECTW::execute()</b>.

   <b>::FILE*</b> <b>EMF::METAFILEDEVICECONTEXT::fp</b>
       If it is a file-based metafile, then this pointer is not null.

   <b>std::vector&lt;</b> <b>bool</b> <b>&gt;</b> <b>EMF::METAFILEDEVICECONTEXT::handles</b>
       For compatibility, it appears that metafile handles are reused as objects are deleted. Attempt to emulate
       that behavior with a bit vector of used metafile handles.

       Referenced by <b>clearHandle()</b>, and <b>nextHandle()</b>.

   <b>ENHMETAHEADER*</b> <b>EMF::METAFILEDEVICECONTEXT::header</b>
       Serves double duty as the physical device description.

       Referenced by <b>appendHandle()</b>, <b>appendRecord()</b>, <b>mergePoint()</b>, and <b>nextHandle()</b>.

   <b>std::vector&lt;</b> <b>EMF::METARECORD*</b> <b>&gt;</b> <b>EMF::METAFILEDEVICECONTEXT::records</b>
       All of the metafile records are stored in memory.

       Referenced by <b>appendHandle()</b>, <b>appendRecord()</b>, <b>deleteMetafile()</b>, and <b>~METAFILEDEVICECONTEXT()</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for libemf from the source code.

Version 1.0.9                                Thu Jun 6 2024 23:01:07               <u>EMF::<a href="../man3/METAFILEDEVICECONTEXT.3.html">METAFILEDEVICECONTEXT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>