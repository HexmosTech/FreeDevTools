<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_metrics.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_metrics.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_metric_name</b>
       struct <b>rte_metric_value</b>

   <b>Macros</b>
       #define <b>RTE_METRICS_MAX_NAME_LEN</b>   64
       #define <b>RTE_METRICS_GLOBAL</b>   -1

   <b>Functions</b>
       int <b>rte_metrics_init</b> (int socket_id)
       int <b>rte_metrics_deinit</b> (void)
       int <b>rte_metrics_reg_name</b> (const char *name)
       int <b>rte_metrics_reg_names</b> (const char *const *names, uint16_t cnt_names)
       int <b>rte_metrics_get_names</b> (struct <b>rte_metric_name</b> *names, uint16_t capacity)
       int <b>rte_metrics_get_values</b> (int port_id, struct <b>rte_metric_value</b> *values, uint16_t capacity)
       int <b>rte_metrics_update_value</b> (int port_id, uint16_t key, const uint64_t value)
       int <b>rte_metrics_update_values</b> (int port_id, uint16_t key, const uint64_t *values, uint32_t count)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       DPDK Metrics module

       Metrics are statistics that are not generated by PMDs, and hence are better reported through a mechanism
       that is independent from the ethdev-based extended statistics. Providers will typically be other
       libraries and consumers will typically be applications.

       Metric information is populated using a push model, where producers update the values contained within
       the metric library by calling an update function on the relevant metrics. Consumers receive metric
       information by querying the central metric data, which is held in shared memory. Currently only bulk
       querying of metrics by consumers is supported.

       Definition in file <b>rte_metrics.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_METRICS_MAX_NAME_LEN</b>   <b>64</b>
       Maximum length of metric name (including null-terminator)

       Definition at line <b>35</b> of file <b>rte_metrics.h</b>.

   <b>#define</b> <b>RTE_METRICS_GLOBAL</b>   <b>-1</b>
       Global metric special id.

       When used for the port_id parameter when calling rte_metrics_update_metric() or
       rte_metrics_update_metric(), the global metric, which are not associated with any specific port (i.e.
       device), are updated.

       Definition at line <b>46</b> of file <b>rte_metrics.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>rte_metrics_init</b> <b>(int</b> <b>socket_id)</b>
       Initializes metric module. This function must be called from a primary process before metrics are used.

       <b>Parameters</b>
           <u>socket_id</u> Socket to use for shared memory allocation.

       <b>Returns</b>
           0 on success Negative error code (from <b>rte_errno.h</b>) on error: -EEXIST - a memzone for metrics already
           exists but metrics is not initialized -ENOMEM - cannot allocate metrics memzone -E_RTE_SECONDARY -
           function called from secondary process

   <b>int</b> <b>rte_metrics_deinit</b> <b>(void)</b>
       Deinitialize metric module. This function must be called from a primary process after all the metrics
       usage is over, to release the shared memory.

       <b>Returns</b>
           -EINVAL - invalid parameter. -EIO: Error, unable to access metrics shared memory (<b>rte_metrics_init()</b>
           not called) 0 - success

   <b>int</b> <b>rte_metrics_reg_name</b> <b>(const</b> <b>char</b> <b>*</b> <b>name)</b>
       Register a metric, making it available as a reporting parameter.

       Registering a metric is the way producers declare a parameter that they wish to be reported. Once
       registered, the associated numeric key can be obtained via <b>rte_metrics_get_names()</b>, which is required for
       updating said metric's value.

       <b>Parameters</b>
           <u>name</u> Metric name. If this exceeds RTE_METRICS_MAX_NAME_LEN (including the NULL terminator), it is
           truncated.

       <b>Returns</b>

           • Zero or positive: Success (index key of new metric)

           • -EIO: Error, unable to access metrics shared memory (<b>rte_metrics_init()</b> not called)

           • -EINVAL: Error, invalid parameters

           • -ENOMEM: Error, maximum metrics reached

   <b>int</b> <b>rte_metrics_reg_names</b> <b>(const</b> <b>char</b> <b>*const</b> <b>*</b> <b>names,</b> <b>uint16_t</b> <b>cnt_names)</b>
       Register a set of metrics.

       This  is  a  bulk  version  of  <b>rte_metrics_reg_names()</b>  and aside from handling multiple keys at once is
       functionally identical.

       <b>Parameters</b>
           <u>names</u> List of metric names
           <u>cnt_names</u> Number of metrics in set

       <b>Returns</b>

           • Zero or positive: Success (index key of start of set)

           • -EIO: Error, unable to access metrics shared memory (<b>rte_metrics_init()</b> not called)

           • -EINVAL: Error, invalid parameters

           • -ENOMEM: Error, maximum metrics reached

   <b>int</b> <b>rte_metrics_get_names</b> <b>(struct</b> <b>rte_metric_name</b> <b>*</b> <b>names,</b> <b>uint16_t</b> <b>capacity)</b>
       Get metric name-key lookup table.

       <b>Parameters</b>
           <u>names</u> A struct <b>rte_metric_name</b> array of at least <u>capacity</u> in size to receive key names.  If  this  is
           NULL, function returns the required number of elements for this array.
           <u>capacity</u> Size (number of elements) of struct <b>rte_metric_name</b> array. Disregarded if names is NULL.

       <b>Returns</b>

           • Positive value above capacity: error, <u>names</u> is too small. Return value is required size.

           • Positive value equal or less than capacity: Success. Return value is number of elements filled in.

           • Negative value: error.

   <b>int</b> <b>rte_metrics_get_values</b> <b>(int</b> <b>port_id,</b> <b>struct</b> <b>rte_metric_value</b> <b>*</b> <b>values,</b> <b>uint16_t</b> <b>capacity)</b>
       Get metric value table.

       <b>Parameters</b>
           <u>port_id</u> Port id to query
           <u>values</u> A struct <b>rte_metric_value</b> array of at least <u>capacity</u> in size to receive metric ids and values.
           If this is NULL, function returns the required number of elements for this array.
           <u>capacity</u> Size (number of elements) of struct <b>rte_metric_value</b> array. Disregarded if names is NULL.

       <b>Returns</b>

           • Positive value above capacity: error, <u>values</u> is too small. Return value is required size.

           • Positive value equal or less than capacity: Success. Return value is number of elements filled in.

           • Negative value: error.

   <b>int</b> <b>rte_metrics_update_value</b> <b>(int</b> <b>port_id,</b> <b>uint16_t</b> <b>key,</b> <b>const</b> <b>uint64_t</b> <b>value)</b>
       Updates a metric

       <b>Parameters</b>
           <u>port_id</u> Port to update metrics for
           <u>key</u> Id of metric to update
           <u>value</u> New value

       <b>Returns</b>

           • -EIO if unable to access shared metrics memory

           • Zero on success

   <b>int</b> <b>rte_metrics_update_values</b> <b>(int</b> <b>port_id,</b> <b>uint16_t</b> <b>key,</b> <b>const</b> <b>uint64_t</b> <b>*</b> <b>values,</b> <b>uint32_t</b> <b>count)</b>
       Updates a metric set. Note that it is an error to try to update across a set boundary.

       <b>Parameters</b>
           <u>port_id</u> Port to update metrics for
           <u>key</u> Base id of metrics set to update
           <u>values</u> Set of new values
           <u>count</u> Number of new values

       <b>Returns</b>

           • -ERANGE if count exceeds metric set size

           • -EIO if unable to access shared metrics memory

           • Zero on success

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                <u><a href="../man3/rte_metrics.h.3.html">rte_metrics.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>