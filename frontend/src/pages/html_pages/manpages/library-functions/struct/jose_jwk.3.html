<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jose_jwk - JSON Web Keys (RFC 7517)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libjose-dev">libjose-dev_14-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       jose_jwk - JSON Web Keys (RFC 7517)

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Functions</b>
       bool <b>jose_jwk_gen</b> (jose_cfg_t *cfg, json_t *jwk)
           Generates a new JWK.
       bool <b>jose_jwk_pub</b> (jose_cfg_t *cfg, json_t *jwk)
           Removes all private key material from a JWK.
       bool <b>jose_jwk_prm</b> (jose_cfg_t *cfg, const json_t *jwk, bool req, const char *op)
           Determines if an operation is permitted for a JWK.
       json_t * <b>jose_jwk_thp</b> (jose_cfg_t *cfg, const json_t *jwk, const char *alg)
           Calculates the thumbprint of a JWK as a URL-safe Base64 encoded JSON string.
       size_t <b>jose_jwk_thp_buf</b> (jose_cfg_t *cfg, const json_t *jwk, const char *alg, uint8_t *thp, size_t len)
           Calculates the thumbprint of a JWK.
       json_t * <b>jose_jwk_exc</b> (jose_cfg_t *cfg, const json_t *prv, const json_t *pub)
           Perform a key exchange.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       JSON Web Keys (RFC 7517)

       A JSON Web Key (JWS) is a standard data format for expresing cryptographic keys in JSON.

       <b>See</b> <b>also:</b>
           https://tools.ietf.org/html/rfc7517

           https://tools.ietf.org/html/rfc7638

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>bool</b> <b>jose_jwk_gen</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>json_t</b> <b>*</b> <b>jwk)</b>
       Generates a new JWK. The JWK is generated using hints from the input in exactly the same format as you
       would find in the output. For example, the most common way to generate a key is to specify the algorithm
       you'd like to use the key with. For example (error handling omitted):

       json_t *gen(void) {
           json_auto_t *jwk = json_pack("{s:s}", "alg", "ES256");
           jose_jwk_gen(NULL, jwk);
           return json_incref(jwk);
       }

       This method is preferred because other metadata can be inferred from the algorithm name, such as the key
       usage. Additionally, the algorithm metadata can be used to automatically generate correct headers when
       creating signatures (JWS) or encryptions (JWE). Thus, you should always default to creating keys by their
       algorithm usage.

       However, should your requirements differ, you can also generate a key using raw parameters (again, error
       handling omitted):

       json_t *gen(void) {
           json_auto_t *jwk = json_pack("{s:s,s:s}", "kty", "EC", "crv", "P-256");
           jose_jwk_gen(NULL, jwk);
           return json_incref(jwk);
       }

       json_t *gen(void) {
           json_auto_t *jwk = json_pack("{s:s,s:i}", "kty", "RSA", "bits", 2048);
           jose_jwk_gen(NULL, jwk);
           return json_incref(jwk);
       }

       json_t *gen(void) {
           json_auto_t *jwk = json_pack("{s:s,s:i}", "kty", "oct", "bytes", 32);
           jose_jwk_gen(NULL, jwk);
           return json_incref(jwk);
       }

       In this case, 'bits' and 'bytes' will be removed from the final output.

       <b>See</b> <b>also:</b>
           https://www.iana.org/assignments/jose/jose.xhtml#web-signature-encryption-algorithms

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jwk</u> The JWK to generate.

       <b>Returns:</b>
           On success, true. Otherwise, false.

   <b>bool</b> <b>jose_jwk_pub</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>json_t</b> <b>*</b> <b>jwk)</b>
       Removes all private key material from a JWK. In addition, this function will remove any key operations
       from the key_ops JWK property (if present) that apply only to the private key.

       This function should be used before exporting keys to third parties.

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jwk</u> The JWK to remove private keys from.

       <b>Returns:</b>
           On success, true. Otherwise, false.

   <b>bool</b> <b>jose_jwk_prm</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jwk,</b> <b>bool</b> <b>req,</b> <b>const</b> <b>char</b> <b>*</b> <b>op)</b>
       Determines if an operation is permitted for a JWK. The operation to be confirmed (op) is always specified
       according to the syntax of the 'key_ops' JWK property, even when the 'use' property is defined on the
       JWK.

       This function has two modes of operation. If req is false, then JWKs which do not have any key use
       metadata will be approved for this operation. However, if req is true then this metadata will be required
       for approval.

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jwk</u> The JWK from which to remove private keys.
           <u>req</u> Whether JWK key use metadata is required or not.
           <u>op</u> The opperation to seek approval for.

       <b>Returns:</b>
           When the JWK is approved, true. Otherwise, false.

   <b>json_t*</b> <b>jose_jwk_thp</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jwk,</b> <b>const</b> <b>char</b> <b>*</b> <b>alg)</b>
       Calculates the thumbprint of a JWK as a URL-safe Base64 encoded JSON string. This function is a thin
       wrapper around <b>jose_jwk_thp_buf()</b>.

       <b>See</b> <b>also:</b>
           <b>jose_jwk_thp_buf()</b>

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jwk</u> The JWK to calculate the thumbprint for.
           <u>alg</u> The hash algorithm to use.

       <b>Returns:</b>
           On success, a newly-allocated JSON string. Otherwise, NULL.

   <b>size_t</b> <b>jose_jwk_thp_buf</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>jwk,</b> <b>const</b> <b>char</b> <b>*</b> <b>alg,</b> <b>uint8_t</b> <b>*</b> <b>thp,</b> <b>size_t</b> <b>len)</b>
       Calculates the thumbprint of a JWK. This function calculates the thumbprint of a JWK according to the
       method defined by RFC 7638.

       If thp is NULL, this function returns the size of the buffer required for the thumbprint output.

       <b>See</b> <b>also:</b>
           https://tools.ietf.org/html/rfc7638

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>jwk</u> The JWK to calculate the thumbprint for.
           <u>alg</u> The hash algorithm to use.
           <u>thp</u> The output hash buffer.
           <u>len</u> The size of the output hash buffer.

       <b>Returns:</b>
           On success, the number of bytes written. Otherwise, SIZE_MAX.

   <b>json_t*</b> <b>jose_jwk_exc</b> <b>(jose_cfg_t</b> <b>*</b> <b>cfg,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>prv,</b> <b>const</b> <b>json_t</b> <b>*</b> <b>pub)</b>
       Perform a key exchange. The only currently implemented algorithm is ECDH.

       <b>Parameters:</b>
           <u>cfg</u> The configuration context (optional).
           <u>prv</u> The private JWK.
           <u>pub</u> The public JWK.

       <b>Returns:</b>
           On success, the JWK result of the key exchange. Otherwise, NULL.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for José from the source code.

José                                             Tue May 30 2017                                     <u><a href="../man3/jose_jwk.3.html">jose_jwk</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>