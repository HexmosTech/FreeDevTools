<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_interrupts.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_interrupts.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;stdbool.h&gt;
       #include &lt;rte_bitops.h&gt;
       #include &lt;rte_common.h&gt;
       #include &lt;rte_compat.h&gt;
       #include &lt;rte_epoll.h&gt;

   <b>Macros</b>
       #define <b>RTE_INTR_INSTANCE_F_PRIVATE</b>   <a href="../man0/UINT32_C.0.html">UINT32_C</a>(0)
       #define <b>RTE_INTR_INSTANCE_F_SHARED</b>   <b><a href="../man0/RTE_BIT32.0.html">RTE_BIT32</a></b>(0)

   <b>Typedefs</b>
       <b>typedef</b> void(* <b>rte_intr_callback_fn</b>) (void *cb_arg)
       <b>typedef</b> void(* <b>rte_intr_unregister_callback_fn</b>) (struct rte_intr_handle *intr_handle, void *cb_arg)

   <b>Enumerations</b>
       enum <b>rte_intr_handle_type</b> { <b>RTE_INTR_HANDLE_UNKNOWN</b> = 0, <b>RTE_INTR_HANDLE_UIO</b>, <b>RTE_INTR_HANDLE_UIO_INTX</b>,
           <b>RTE_INTR_HANDLE_VFIO_LEGACY</b>, <b>RTE_INTR_HANDLE_VFIO_MSI</b>, <b>RTE_INTR_HANDLE_VFIO_MSIX</b>,
           <b>RTE_INTR_HANDLE_ALARM</b>, <b>RTE_INTR_HANDLE_EXT</b>, <b>RTE_INTR_HANDLE_VDEV</b>, <b>RTE_INTR_HANDLE_DEV_EVENT</b>,
           <b>RTE_INTR_HANDLE_VFIO_REQ</b>, <b>RTE_INTR_HANDLE_MAX</b> }

   <b>Functions</b>
       int <b>rte_intr_callback_register</b> (const struct rte_intr_handle *intr_handle, <b>rte_intr_callback_fn</b> cb, void
           *cb_arg)
       int <b>rte_intr_callback_unregister</b> (const struct rte_intr_handle *intr_handle, <b>rte_intr_callback_fn</b> cb,
           void *cb_arg)
       int <b>rte_intr_callback_unregister_pending</b> (const struct rte_intr_handle *intr_handle, <b>rte_intr_callback_fn</b>
           cb_fn, void *cb_arg, <b>rte_intr_unregister_callback_fn</b> ucb_fn)
       int <b>rte_intr_callback_unregister_sync</b> (const struct rte_intr_handle *intr_handle, <b>rte_intr_callback_fn</b>
           cb, void *cb_arg)
       int <b>rte_intr_enable</b> (const struct rte_intr_handle *intr_handle)
       int <b>rte_intr_disable</b> (const struct rte_intr_handle *intr_handle)
       int <b>rte_intr_ack</b> (const struct rte_intr_handle *intr_handle)
       int <b>rte_thread_is_intr</b> (void)
       struct rte_intr_handle * <b>rte_intr_instance_alloc</b> (uint32_t flags)
       void <b>rte_intr_instance_free</b> (struct rte_intr_handle *intr_handle)
       int <b>rte_intr_fd_set</b> (struct rte_intr_handle *intr_handle, int fd)
       int <b>rte_intr_fd_get</b> (const struct rte_intr_handle *intr_handle)
       int <b>rte_intr_type_set</b> (struct rte_intr_handle *intr_handle, enum <b>rte_intr_handle_type</b> type)
       enum <b>rte_intr_handle_type</b> <b>rte_intr_type_get</b> (const struct rte_intr_handle *intr_handle)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       The RTE interrupt interface provides functions to register/unregister callbacks for a specific interrupt.

       Definition in file <b>rte_interrupts.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_INTR_INSTANCE_F_PRIVATE</b>   <b><a href="../man0/UINT32_C.0.html">UINT32_C</a>(0)</b>
       Interrupt instance allocation flags

       <b>See</b> <b>also</b>
           <b>rte_intr_instance_alloc</b> Interrupt instance will not be shared between primary and secondary
           processes.

       Definition at line <b>34</b> of file <b>rte_interrupts.h</b>.

   <b>#define</b> <b>RTE_INTR_INSTANCE_F_SHARED</b>   <b><a href="../man0/RTE_BIT32.0.html">RTE_BIT32</a>(0)</b>
       Interrupt instance will be shared between primary and secondary processes.

       Definition at line <b>36</b> of file <b>rte_interrupts.h</b>.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>void(*</b> <b>rte_intr_callback_fn)</b> <b>(void</b> <b>*cb_arg)</b>
       Function to be registered for the specific interrupt

       Definition at line <b>61</b> of file <b>rte_interrupts.h</b>.

   <b>typedef</b> <b>void(*</b> <b>rte_intr_unregister_callback_fn)</b> <b>(struct</b> <b>rte_intr_handle</b> <b>*intr_handle,</b> <b>void</b> <b>*cb_arg)</b>
       Function to call after a callback is unregistered. Can be used to close fd and free cb_arg.

       Definition at line <b>67</b> of file <b>rte_interrupts.h</b>.

</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>rte_intr_handle_type</b>
       The interrupt source type, e.g. UIO, VFIO, ALARM etc.

       <b>Enumerator</b>

       <u>RTE_INTR_HANDLE_UNKNOWN</u>
              generic unknown handle

       <u>RTE_INTR_HANDLE_UIO</u>
              uio device handle

       <u>RTE_INTR_HANDLE_UIO_INTX</u>
              uio generic handle

       <u>RTE_INTR_HANDLE_VFIO_LEGACY</u>
              vfio device handle (legacy)

       <u>RTE_INTR_HANDLE_VFIO_MSI</u>
              vfio device handle (MSI)

       <u>RTE_INTR_HANDLE_VFIO_MSIX</u>
              vfio device handle (MSIX)

       <u>RTE_INTR_HANDLE_ALARM</u>
              alarm handle

       <u>RTE_INTR_HANDLE_EXT</u>
              external handler

       <u>RTE_INTR_HANDLE_VDEV</u>
              virtual device

       <u>RTE_INTR_HANDLE_DEV_EVENT</u>
              device event handle

       <u>RTE_INTR_HANDLE_VFIO_REQ</u>
              VFIO request handle

       <u>RTE_INTR_HANDLE_MAX</u>
              count of elements

       Definition at line <b>45</b> of file <b>rte_interrupts.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b>  <b>rte_intr_callback_register</b>  <b>(const</b> <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle,</b> <b>rte_intr_callback_fn</b> <b>cb,</b> <b>void</b> <b>*</b>
       <b>cb_arg)</b>
       It registers the callback for the specific interrupt. Multiple callbacks can be registered  at  the  same
       time.

       <b>Parameters</b>
           <u>intr_handle</u> Pointer to the interrupt handle.
           <u>cb</u> callback address.
           <u>cb_arg</u> address of parameter for callback.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_intr_callback_unregister</b> <b>(const</b> <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle,</b> <b>rte_intr_callback_fn</b> <b>cb,</b> <b>void</b> <b>*</b>
       <b>cb_arg)</b>
       It unregisters the callback according to the specified interrupt handle.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.
           <u>cb</u> callback address.
           <u>cb_arg</u>  address  of  parameter  for callback, (void *)-1 means to remove all registered which has the
           same callback address.

       <b>Returns</b>

           • On success, return the number of callback entities removed.

           • On failure, a negative value.

   <b>int</b> <b>rte_intr_callback_unregister_pending</b> <b>(const</b> <b>struct</b> <b>rte_intr_handle</b>  <b>*</b>  <b>intr_handle,</b>  <b>rte_intr_callback_fn</b>
       <b>cb_fn,</b> <b>void</b> <b>*</b> <b>cb_arg,</b> <b>rte_intr_unregister_callback_fn</b> <b>ucb_fn)</b>
       Unregister the callback according to the specified interrupt handle, after it's no longer active. Fail if
       source is not active.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.
           <u>cb_fn</u> callback address.
           <u>cb_arg</u>  address  of  parameter  for callback, (void *)-1 means to remove all registered which has the
           same callback address.
           <u>ucb_fn</u> callback to call before cb is unregistered (optional). can  be  used  to  close  fd  and  free
           cb_arg.

       <b>Returns</b>

           • On success, return the number of callback entities marked for remove.

           • On failure, a negative value.

   <b>int</b>  <b>rte_intr_callback_unregister_sync</b>  <b>(const</b> <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle,</b> <b>rte_intr_callback_fn</b> <b>cb,</b>
       <b>void</b> <b>*</b> <b>cb_arg)</b>
       Loop until <b>rte_intr_callback_unregister()</b> succeeds. After a call to this function, the callback  provided
       by the specified interrupt handle is unregistered.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.
           <u>cb</u> callback address.
           <u>cb_arg</u>  address  of  parameter  for callback, (void *)-1 means to remove all registered which has the
           same callback address.

       <b>Returns</b>

           • On success, return the number of callback entities removed.

           • On failure, a negative value.

   <b>int</b> <b>rte_intr_enable</b> <b>(const</b> <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle)</b>
       It enables the interrupt for the specified handle.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_intr_disable</b> <b>(const</b> <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle)</b>
       It disables the interrupt for the specified handle.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_intr_ack</b> <b>(const</b> <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle)</b>
       It acknowledges an interrupt raised for the specified handle.

       This function should be called at the end of each interrupt handler either from application or driver, so
       that currently raised interrupt is acked and further new interrupts are raised.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value.

   <b>int</b> <b>rte_thread_is_intr</b> <b>(void)</b>
       Check if currently executing in interrupt context

       <b>Returns</b>

           • non zero in case of interrupt context

           • zero in case of process context

   <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>rte_intr_instance_alloc</b> <b>(uint32_t</b> <b>flags)</b>
       It allocates memory for interrupt instance. API takes flag as an argument which define from where  memory
       should  be  allocated  i.e.  using DPDK memory management library APIs or normal heap allocation. Default
       memory allocation for event fds and event list array is done which can be realloced later based  on  size
       of MSIX interrupts supported by a PCI device.

       This function should be called from application or driver, before calling any of the interrupt APIs.

       <b>Parameters</b>
           <u>flags</u> See RTE_INTR_INSTANCE_F_* flags definitions.

       <b>Returns</b>

           • On success, address of interrupt handle.

           • On failure, NULL.

   <b>void</b> <b>rte_intr_instance_free</b> <b>(struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle)</b>
       Free the memory allocated for interrupt handle resources.

       <b>Parameters</b>
           <u>intr_handle</u>  Interrupt  handle  allocated  with <b>rte_intr_instance_alloc()</b>. If intr_handle is NULL, no
           operation is performed.

   <b>int</b> <b>rte_intr_fd_set</b> <b>(struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle,</b> <b>int</b> <b>fd)</b>
       Set the fd field of interrupt handle with user provided file descriptor.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.
           <u>fd</u> file descriptor value provided by user.

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value and rte_errno is set.

   <b>int</b> <b>rte_intr_fd_get</b> <b>(const</b> <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle)</b>
       Returns the fd field of the given interrupt handle instance.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.

       <b>Returns</b>

           • On success, fd field.

           • On failure, a negative value.

   <b>int</b> <b>rte_intr_type_set</b> <b>(struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle,</b> <b>enum</b> <b>rte_intr_handle_type</b> <b>type)</b>
       Set the type field of interrupt handle with user provided interrupt type.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.
           <u>type</u> interrupt type

       <b>Returns</b>

           • On success, zero.

           • On failure, a negative value and rte_errno is set.

   <b>enum</b> <b>rte_intr_handle_type</b> <b>rte_intr_type_get</b> <b>(const</b> <b>struct</b> <b>rte_intr_handle</b> <b>*</b> <b>intr_handle)</b>
       Returns the type field of the given interrupt handle instance.

       <b>Parameters</b>
           <u>intr_handle</u> pointer to the interrupt handle.

       <b>Returns</b>

           • On success, interrupt type

           • On failure, RTE_INTR_HANDLE_UNKNOWN.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                             <u><a href="../man3/rte_interrupts.h.3.html">rte_interrupts.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>