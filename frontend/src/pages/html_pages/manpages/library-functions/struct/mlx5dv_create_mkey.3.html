<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mlx5dv_create_mkey - Creates an indirect mkey</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libibverbs-dev">libibverbs-dev_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mlx5dv_create_mkey - Creates an indirect mkey

       mlx5dv_destroy_mkey - Destroys an indirect mkey

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;infiniband/mlx5dv.h&gt;

              struct mlx5dv_mkey_init_attr {
                  struct ibv_pd   *pd;
                  uint32_t    create_flags;
                  uint16_t    max_entries;
              };

              struct mlx5dv_mkey {
                  uint32_t    lkey;
                  uint32_t    rkey;
              };

              struct mlx5dv_mkey *
              mlx5dv_create_mkey(struct mlx5dv_mkey_init_attr *mkey_init_attr);

              int mlx5dv_destroy_mkey(struct mlx5dv_mkey *mkey);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Create / destroy an indirect mkey.

       Create an indirect mkey to enable application uses its specific device functionality.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       ##mkey_init_attr##

       <u>pd</u>     ibv protection domain.

       <u>create_flags</u>
              MLX5DV_MKEY_INIT_ATTR_FLAGS_INDIRECT:       Indirect       mkey       is       being      created.
              MLX5DV_MKEY_INIT_ATTR_FLAGS_BLOCK_SIGNATURE: Enable block  signature  offload  support  for  mkey.
              MLX5DV_MKEY_INIT_ATTR_FLAGS_CRYPTO:  Enable  crypto  offload  support for mkey.  Setting this flag
              means that crypto operations will be done and hence, must be configured.  I.e.  if  this  flag  is
              set  and the MKey was not configured for crypto properties using <b>mlx5dv_wr_set_mkey_crypto()</b>, then
              running   traffic   with   the   MKey    will    fail,    generating    a    CQE    with    error.
              MLX5DV_MKEY_INIT_ATTR_FLAGS_UPDATE_TAG:  Enable  update  tag  support for mkey.  Setting this flag
              allows an application to set the mkey tag post of creating the  mkey.   If  the  kernel  does  not
              support       updating       the       mkey      tag,      mkey      creation      will      fail.
              MLX5DV_MKEY_INIT_ATTR_FLAGS_REMOTE_INVALIDATE: Enable remote invalidation support for mkey.

       <u>max_entries</u>
              Requested max number of pointed entries by this indirect  mkey.   The  function  will  update  the
              <u>mkey_init_attr-&gt;max_entries</u>  with  the actual mkey value that was created; it will be greater than
              or equal to the value requested.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon success <u>mlx5dv_create_mkey</u> will return a new <u>struct</u> <u>mlx5dv_mkey</u> on error NULL will be  returned  and
       errno will be set.

       Upon success destroy 0 is returned or the value of errno on a failure.

</pre><h4><b>Notes</b></h4><pre>
       To let this functionality works a DEVX context should be opened by using <u>mlx5dv_open_device</u>.

       The  created  indirect  mkey  can`t  work  with  scatter to CQE feature, consider <u>mlx5dv_create_qp()</u> with
       MLX5DV_QP_CREATE_DISABLE_SCATTER_TO_CQE for small messages.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/mlx5dv_open_device.3.html">mlx5dv_open_device</a></b>(3), <b><a href="../man3/mlx5dv_create_qp.3.html">mlx5dv_create_qp</a></b>(3)

       #AUTHOR

       Yishai Hadas <a href="mailto:yishaih@mellanox.com">yishaih@mellanox.com</a>

                                                                     <u>mlx5dv_create_mkey</u> <u>/</u> <u><a href="../man3/mlx5dv_destroy_mkey.3.html">mlx5dv_destroy_mkey</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>