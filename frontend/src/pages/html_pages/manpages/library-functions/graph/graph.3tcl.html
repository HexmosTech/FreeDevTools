<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>struct::graph - Create and manipulate directed graph objects</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       struct::graph - Create and manipulate directed graph objects

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>struct::graph</b> <b>?2.4.4?</b>

       package require <b>struct::list</b> <b>?1.8.6?</b>

       package require <b>struct::set</b> <b>?2.2.4?</b>

       <b>::struct::graph</b> ?<u>graphName</u>? ?<b>=</b>|<b>:=</b>|<b>as</b>|<b>deserialize</b> <u>source</u>?

       <b>graphName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <u>graphName</u> <b>=</b> <u>sourcegraph</u>

       <u>graphName</u> <b>--&gt;</b> <u>destgraph</u>

       <u>graphName</u> <b>append</b> <u>key</u> <u>value</u>

       <u>graphName</u> <b>deserialize</b> <u>serialization</u>

       <u>graphName</u> <b>destroy</b>

       <u>graphName</u> <b>arc</b> <b>append</b> <u>arc</u> <u>key</u> <u>value</u>

       <u>graphName</u> <b>arc</b> <b>attr</b> <u>key</u>

       <u>graphName</u> <b>arc</b> <b>attr</b> <u>key</u> <b>-arcs</b> <u>list</u>

       <u>graphName</u> <b>arc</b> <b>attr</b> <u>key</u> <b>-glob</b> <u>globpattern</u>

       <u>graphName</u> <b>arc</b> <b>attr</b> <u>key</u> <b>-regexp</b> <u>repattern</u>

       <u>graphName</u> <b>arc</b> <b>delete</b> <u>arc</u> ?<u>arc</u> ...?

       <u>graphName</u> <b>arc</b> <b>exists</b> <u>arc</u>

       <u>graphName</u> <b>arc</b> <b>flip</b> <u>arc</u>

       <u>graphName</u> <b>arc</b> <b>get</b> <u>arc</u> <u>key</u>

       <u>graphName</u> <b>arc</b> <b>getall</b> <u>arc</u> ?<u>pattern</u>?

       <u>graphName</u> <b>arc</b> <b>getunweighted</b>

       <u>graphName</u> <b>arc</b> <b>getweight</b> <u>arc</u>

       <u>graphName</u> <b>arc</b> <b>keys</b> <u>arc</u> ?<u>pattern</u>?

       <u>graphName</u> <b>arc</b> <b>keyexists</b> <u>arc</u> <u>key</u>

       <u>graphName</u> <b>arc</b> <b>insert</b> <u>start</u> <u>end</u> ?<u>child</u>?

       <u>graphName</u> <b>arc</b> <b>lappend</b> <u>arc</u> <u>key</u> <u>value</u>

       <u>graphName</u> <b>arc</b> <b>rename</b> <u>arc</u> <u>newname</u>

       <u>graphName</u> <b>arc</b> <b>set</b> <u>arc</u> <u>key</u> ?<u>value</u>?

       <u>graphName</u> <b>arc</b> <b>setunweighted</b> ?<u>weight</u>?

       <u>graphName</u> <b>arc</b> <b>setweight</b> <u>arc</u> <u>weight</u>

       <u>graphName</u> <b>arc</b> <b>unsetweight</b> <u>arc</u>

       <u>graphName</u> <b>arc</b> <b>hasweight</b> <u>arc</u>

       <u>graphName</u> <b>arc</b> <b>source</b> <u>arc</u>

       <u>graphName</u> <b>arc</b> <b>target</b> <u>arc</u>

       <u>graphName</u> <b>arc</b> <b>nodes</b> <u>arc</u>

       <u>graphName</u> <b>arc</b> <b>move-source</b> <u>arc</u> <u>newsource</u>

       <u>graphName</u> <b>arc</b> <b>move-target</b> <u>arc</u> <u>newtarget</u>

       <u>graphName</u> <b>arc</b> <b>move</b> <u>arc</u> <u>newsource</u> <u>newtarget</u>

       <u>graphName</u> <b>arc</b> <b>unset</b> <u>arc</u> <u>key</u>

       <u>graphName</u> <b>arc</b> <b>weights</b>

       <u>graphName</u>  <b>arcs</b>  ?-key  <u>key</u>?  ?-value  <u>value</u>?  ?-filter  <u>cmdprefix</u>? ?-in|-out|-adj|-inner|-embedding <u>node</u>
       <u>node...</u>?

       <u>graphName</u> <b>lappend</b> <u>key</u> <u>value</u>

       <u>graphName</u> <b>node</b> <b>append</b> <u>node</u> <u>key</u> <u>value</u>

       <u>graphName</u> <b>node</b> <b>attr</b> <u>key</u>

       <u>graphName</u> <b>node</b> <b>attr</b> <u>key</u> <b>-nodes</b> <u>list</u>

       <u>graphName</u> <b>node</b> <b>attr</b> <u>key</u> <b>-glob</b> <u>globpattern</u>

       <u>graphName</u> <b>node</b> <b>attr</b> <u>key</u> <b>-regexp</b> <u>repattern</u>

       <u>graphName</u> <b>node</b> <b>degree</b> ?-in|-out? <u>node</u>

       <u>graphName</u> <b>node</b> <b>delete</b> <u>node</u> ?<u>node</u>...?

       <u>graphName</u> <b>node</b> <b>exists</b> <u>node</u>

       <u>graphName</u> <b>node</b> <b>get</b> <u>node</u> <u>key</u>

       <u>graphName</u> <b>node</b> <b>getall</b> <u>node</u> ?<u>pattern</u>?

       <u>graphName</u> <b>node</b> <b>keys</b> <u>node</u> ?<u>pattern</u>?

       <u>graphName</u> <b>node</b> <b>keyexists</b> <u>node</u> <u>key</u>

       <u>graphName</u> <b>node</b> <b>insert</b> ?<u>node</u>...?

       <u>graphName</u> <b>node</b> <b>lappend</b> <u>node</u> <u>key</u> <u>value</u>

       <u>graphName</u> <b>node</b> <b>opposite</b> <u>node</u> <u>arc</u>

       <u>graphName</u> <b>node</b> <b>rename</b> <u>node</u> <u>newname</u>

       <u>graphName</u> <b>node</b> <b>set</b> <u>node</u> <u>key</u> ?<u>value</u>?

       <u>graphName</u> <b>node</b> <b>unset</b> <u>node</u> <u>key</u>

       <u>graphName</u> <b>nodes</b> ?-key <u>key</u>?  ?-value  <u>value</u>?  ?-filter  <u>cmdprefix</u>?  ?-in|-out|-adj|-inner|-embedding  <u>node</u>
       <u>node</u>...?

       <u>graphName</u> <b>get</b> <u>key</u>

       <u>graphName</u> <b>getall</b> ?<u>pattern</u>?

       <u>graphName</u> <b>keys</b> ?<u>pattern</u>?

       <u>graphName</u> <b>keyexists</b> <u>key</u>

       <u>graphName</u> <b>serialize</b> ?<u>node</u>...?

       <u>graphName</u> <b>set</b> <u>key</u> ?<u>value</u>?

       <u>graphName</u> <b>swap</b> <u>node1</u> <u>node2</u>

       <u>graphName</u> <b>unset</b> <u>key</u>

       <u>graphName</u> <b>walk</b> <u>node</u> ?-order <u>order</u>? ?-type <u>type</u>? ?-dir <u>direction</u>? -command <u>cmd</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A  directed  graph  is  a  structure  containing  two  collections  of  elements,  called  <u>nodes</u> and <u>arcs</u>
       respectively, together with a relation ("connectivity") that places a general structure  upon  the  nodes
       and arcs.

       Each  arc  is  connected  to  two nodes, one of which is called the <u>source</u> and the other the <u>target</u>. This
       imposes a direction upon the arc, which is said to go from the source to the target. It is  allowed  that
       source  and  target of an arc are the same node. Such an arc is called a <u>loop</u>.  Whenever a node is either
       the source or target of an arc both are said to be <u>adjacent</u>. This extends into a relation between  nodes,
       i.e. if two nodes are connected through at least one arc they are said to be <u>adjacent</u> too.

       Each node can be the source and target for any number of arcs. The former are called the <u>outgoing</u> <u>arcs</u> of
       the  node,  the  latter the <u>incoming</u> <u>arcs</u> of the node. The number of arcs in either set is called the <u>in-</u>
       <u>degree</u> resp. the <u>out-degree</u> of the node.

       In addition to maintaining the node and arc relationships, this graph implementation allows any number of
       named <u>attributes</u> to be associated with the graph itself, and each node or arc.

       <u>Note:</u> The major version of the  package  <b>struct</b>  has  been  changed  to  version  2.0,  due  to  backward
       incompatible  changes  in the API of this module. Please read the section <b>Changes</b> <b>for</b> <b>2.0</b> for a full list
       of all changes, incompatible and otherwise.

       <u>Note:</u>    A    C-implementation    of    the    command    can    be     had     from     the     location
       <u><a href="http://www.purl.org/NET/schlenker/tcl/cgraph">http://www.purl.org/NET/schlenker/tcl/cgraph</a></u>.  See  also  <u><a href="http://wiki.tcl.tk/cgraph">http://wiki.tcl.tk/cgraph</a></u>.  This implementation
       uses a bit less memory than the tcl version provided here directly, and is faster. Its support is limited
       to versions of the package before 2.0.

       As of version 2.2 of this package a critcl based C implementation is available from here  as  well.  This
       implementation however requires Tcl 8.4 to run.

       The main command of the package is:

       <b>::struct::graph</b> ?<u>graphName</u>? ?<b>=</b>|<b>:=</b>|<b>as</b>|<b>deserialize</b> <u>source</u>?
              The  command  creates  a  new  graph  object  with  an associated global Tcl command whose name is
              <u>graphName</u>.  This command may be used to invoke various  operations  on  the  graph.   It  has  the
              following general form:

              <b>graphName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
                     <u>Option</u> and the <u>arg</u>s determine the exact behavior of the command.

       If  <u>graphName</u>  is  not  specified  a  unique name will be generated by the package itself. If a <u>source</u> is
       specified the new graph will be initialized to it. For the operators <b>=</b>, <b>:=</b>, and <b>as</b> the <u>source</u> argument is
       interpreted as the name of another graph object, and the assignment operator <b>=</b> will be executed. For  the
       operator <b>deserialize</b> the <u>source</u> is a serialized graph object and <b>deserialize</b> will be executed.

       In other words

                  ::struct::graph mygraph = b

       is equivalent to

                  ::struct::graph mygraph
                  mygraph = b

       and

                  ::struct::graph mygraph deserialize $b

       is equivalent to

                  ::struct::graph mygraph
                  mygraph deserialize $b

       The following commands are possible for graph objects:

       <u>graphName</u> <b>=</b> <u>sourcegraph</u>
              This  is  the  <u>assignment</u>  operator  for graph objects. It copies the graph contained in the graph
              object <u>sourcegraph</u> over the graph data in <u>graphName</u>. The old contents of <u>graphName</u> are deleted  by
              this operation.

              This operation is in effect equivalent to

                  <u>graphName</u> <b>deserialize</b> [<u>sourcegraph</u> <b>serialize</b>]

       The  operation  assumes that the <u>sourcegraph</u> provides the method <b>serialize</b> and that this method returns a
       valid graph serialization.

       <u>graphName</u> <b>--&gt;</b> <u>destgraph</u>
              This is the <u>reverse</u> <u>assignment</u> operator for graph objects. It copies the graph  contained  in  the
              graph object <u>graphName</u> over the graph data in the object <u>destgraph</u>.  The old contents of <u>destgraph</u>
              are deleted by this operation.

              This operation is in effect equivalent to

                  <u>destgraph</u> <b>deserialize</b> [<u>graphName</u> <b>serialize</b>]

       The  operation  assumes  that  the <u>destgraph</u> provides the method <b>deserialize</b> and that this method takes a
       graph serialization.

       <u>graphName</u> <b>append</b> <u>key</u> <u>value</u>
              Appends a <u>value</u> to one of the keyed values associated with the graph.  Returns the new value given
              to the attribute <u>key</u>.

       <u>graphName</u> <b>deserialize</b> <u>serialization</u>
              This is the complement to <b>serialize</b>. It replaces the  graph  data  in  <u>graphName</u>  with  the  graph
              described by the <u>serialization</u> value. The old contents of <u>graphName</u> are deleted by this operation.

       <u>graphName</u> <b>destroy</b>
              Destroys the graph, including its storage space and associated command.

       <u>graphName</u> <b>arc</b> <b>append</b> <u>arc</u> <u>key</u> <u>value</u>
              Appends  a <u>value</u> to one of the keyed values associated with an <u>arc</u>. Returns the new value given to
              the attribute <u>key</u>.

       <u>graphName</u> <b>arc</b> <b>attr</b> <u>key</u>

       <u>graphName</u> <b>arc</b> <b>attr</b> <u>key</u> <b>-arcs</b> <u>list</u>

       <u>graphName</u> <b>arc</b> <b>attr</b> <u>key</u> <b>-glob</b> <u>globpattern</u>

       <u>graphName</u> <b>arc</b> <b>attr</b> <u>key</u> <b>-regexp</b> <u>repattern</u>
              This method retrieves the value of the attribute named <u>key</u>, for all arcs in  the  graph  (matching
              the restriction specified via one of the possible options) and having the specified attribute.

              The result is a dictionary mapping from arc names to the value of attribute <u>key</u> at that arc.  Arcs
              not  having  the  attribute  <u>key</u>,  or  not  passing a specified restriction, are not listed in the
              result.

              The possible restrictions are:

              <b>-arcs</b>  The value is a list of arcs. Only the arcs mentioned in this  list  are  searched  for  the
                     attribute.

              <b>-glob</b>  The  value is a glob pattern. Only the arcs in the graph whose names match this pattern are
                     searched for the attribute.

              <b>-regexp</b>
                     The value is a regular expression. Only the arcs  in  the  graph  whose  names  match  this
                     pattern are searched for the attribute.

       <u>graphName</u> <b>arc</b> <b>delete</b> <u>arc</u> ?<u>arc</u> ...?
              Remove the specified arcs from the graph.

       <u>graphName</u> <b>arc</b> <b>exists</b> <u>arc</u>
              Return true if the specified <u>arc</u> exists in the graph.

       <u>graphName</u> <b>arc</b> <b>flip</b> <u>arc</u>
              Reverses the direction of the named <u>arc</u>, i.e. the source and target nodes of the arc are exchanged
              with each other.

       <u>graphName</u> <b>arc</b> <b>get</b> <u>arc</u> <u>key</u>
              Returns the value associated with the key <u>key</u> for the <u>arc</u>.

       <u>graphName</u> <b>arc</b> <b>getall</b> <u>arc</u> ?<u>pattern</u>?
              Returns a dictionary (suitable for use with [<b>array</b> <b>set</b>]) for the <u>arc</u>.  If the <u>pattern</u> is specified
              only  the  attributes  whose  names match the pattern will be part of the returned dictionary. The
              pattern is a <b>glob</b> pattern.

       <u>graphName</u> <b>arc</b> <b>getunweighted</b>
              Returns a list containing the names of all arcs in the graph which have no weight associated  with
              them.

       <u>graphName</u> <b>arc</b> <b>getweight</b> <u>arc</u>
              Returns  the  weight  associated with the <u>arc</u>. Throws an error if the arc has no weight associated
              with it.

       <u>graphName</u> <b>arc</b> <b>keys</b> <u>arc</u> ?<u>pattern</u>?
              Returns a list of keys for the <u>arc</u>.  If the <u>pattern</u> is specified only the attributes  whose  names
              match the pattern will be part of the returned list. The pattern is a <b>glob</b> pattern.

       <u>graphName</u> <b>arc</b> <b>keyexists</b> <u>arc</u> <u>key</u>
              Return true if the specified <u>key</u> exists for the <u>arc</u>.

       <u>graphName</u> <b>arc</b> <b>insert</b> <u>start</u> <u>end</u> ?<u>child</u>?
              Insert  an  arc named <u>child</u> into the graph beginning at the node <u>start</u> and ending at the node <u>end</u>.
              If the name of the new arc is not specified the system will generate a unique  name  of  the  form
              <u>arcx</u>.

       <u>graphName</u> <b>arc</b> <b>lappend</b> <u>arc</u> <u>key</u> <u>value</u>
              Appends  a  <u>value</u>  (as  a list) to one of the keyed values associated with an <u>arc</u>. Returns the new
              value given to the attribute <u>key</u>.

       <u>graphName</u> <b>arc</b> <b>rename</b> <u>arc</u> <u>newname</u>
              Renames the arc <u>arc</u> to <u>newname</u>. An error is thrown if either the arc does not exist, or a arc with
              name <u>newname</u> does exist. The result of the command is the new name of the arc.

       <u>graphName</u> <b>arc</b> <b>set</b> <u>arc</u> <u>key</u> ?<u>value</u>?
              Set or get one of the keyed values associated with an arc.  An arc may have any  number  of  keyed
              values  associated  with  it.   If  <u>value</u> is not specified, this command returns the current value
              assigned to the key; if <u>value</u> is specified, this command  assigns  that  value  to  the  key,  and
              returns that value.

       <u>graphName</u> <b>arc</b> <b>setunweighted</b> ?<u>weight</u>?
              Sets the weight of all arcs without a weight to <u>weight</u>. Returns the empty string as its result. If
              not present <u>weight</u> defaults to <b>0</b>.

       <u>graphName</u> <b>arc</b> <b>setweight</b> <u>arc</u> <u>weight</u>
              Sets the weight of the <u>arc</u> to <u>weight</u>. Returns <u>weight</u>.

       <u>graphName</u> <b>arc</b> <b>unsetweight</b> <u>arc</u>
              Removes the weight of the <u>arc</u>, if present. Does nothing otherwise. Returns the empty string.

       <u>graphName</u> <b>arc</b> <b>hasweight</b> <u>arc</u>
              Determines  if  the <u>arc</u> has a weight associated with it.  The result is a boolean value, <b>True</b> if a
              weight is defined, and <b>False</b> otherwise.

       <u>graphName</u> <b>arc</b> <b>source</b> <u>arc</u>
              Return the node the given <u>arc</u> begins at.

       <u>graphName</u> <b>arc</b> <b>target</b> <u>arc</u>
              Return the node the given <u>arc</u> ends at.

       <u>graphName</u> <b>arc</b> <b>nodes</b> <u>arc</u>
              Return the nodes the given <u>arc</u> begins and ends at, as a two-element list.

       <u>graphName</u> <b>arc</b> <b>move-source</b> <u>arc</u> <u>newsource</u>
              Changes the source node of the arc to <u>newsource</u>. It can be said that the arc  rotates  around  its
              target node.

       <u>graphName</u> <b>arc</b> <b>move-target</b> <u>arc</u> <u>newtarget</u>
              Changes  the  target  node of the arc to <u>newtarget</u>. It can be said that the arc rotates around its
              source node.

       <u>graphName</u> <b>arc</b> <b>move</b> <u>arc</u> <u>newsource</u> <u>newtarget</u>
              Changes both source and target nodes of the arc to <u>newsource</u>, and <u>newtarget</u> resp.

       <u>graphName</u> <b>arc</b> <b>unset</b> <u>arc</u> <u>key</u>
              Remove a keyed value from the arc <u>arc</u>. The method will do nothing if the <u>key</u> does not exist.

       <u>graphName</u> <b>arc</b> <b>weights</b>
              Returns a dictionary whose keys are the names of all arcs which  have  a  weight  associated  with
              them, and the values are these weights.

       <u>graphName</u> <b>arcs</b> ?-key <u>key</u>? ?-value <u>value</u>? ?-filter <u>cmdprefix</u>? ?-in|-out|-adj|-inner|-embedding <u>node</u>
       <u>node...</u>?
              Returns  a list of arcs in the graph. If no restriction is specified a list containing all arcs is
              returned. Restrictions can limit the list of returned arcs based on the nodes that  are  connected
              by  the arc, on the keyed values associated with the arc, or both. A general filter command can be
              used as well. The restrictions that involve connected nodes take a variable  number  of  nodes  as
              argument, specified after the name of the restriction itself.

              The  restrictions  imposed  by  either  <b>-in</b>,  <b>-out</b>, <b>-adj</b>, <b>-inner</b>, or <b>-embedding</b> are applied first.
              Specifying more than one of them is illegal.

              After that the restrictions set via <b>-key</b> (and <b>-value</b>) are applied. Specifying more than  one  <b>-key</b>
              (and <b>-value</b>) is illegal. Specifying <b>-value</b> alone, without <b>-key</b> is illegal as well.

              Any restriction set through <b>-filter</b> is applied last. Specifying more than one <b>-filter</b> is illegal.

              Coming  back  to  the  restrictions  based on a set of nodes, the command recognizes the following
              switches:

              <b>-in</b>    Return a list of all arcs whose target is one of the nodes in the set  of  nodes.  I.e.  it
                     computes the union of all incoming arcs of the nodes in the set.

              <b>-out</b>   Return  a  list  of  all arcs whose source is one of the nodes in the set of nodes. I.e. it
                     computes the union of all outgoing arcs of the nodes in the set.

              <b>-adj</b>   Return a list of all arcs adjacent to at least one of the nodes in the  set.  This  is  the
                     union of the nodes returned by <b>-in</b> and <b>-out</b>.

              <b>-inner</b> Return  a  list  of all arcs which are adjacent to two of the nodes in the set. This is the
                     set of arcs in the subgraph spawned by the specified nodes.

              <b>-embedding</b>
                     Return a list of all arcs adjacent to exactly one of the nodes in the set. This is the  set
                     of arcs connecting the subgraph spawned by the specified nodes to the rest of the graph.

              <u>Attention</u>:  After  the  above  options any word with a leading dash which is not a valid option is
              treated as a node name instead of an invalid option to error out on. This  condition  holds  until
              either  a  valid  option  terminates  the  list  of  nodes,  or the end of the command is reached,
              whichever comes first.

              The remaining filter options are:

              <b>-key</b> <u>key</u>
                     Limit the list of arcs that are returned to those arcs that have an associated key <u>key</u>.

              <b>-value</b> <u>value</u>
                     This restriction can only be used in combination with <b>-key</b>. It limits the list of arcs that
                     are returned to those arcs whose associated key <u>key</u> has the value <u>value</u>.

              <b>-filter</b> <u>cmdrefix</u>
                     Limit the list of arcs that are returned to those arcs that pass the test. The  command  in
                     <u>cmdprefix</u>  is  called with two arguments, the name of the graph object, and the name of the
                     arc in question. It is executed in the context of the caller and has to  return  a  boolean
                     value.  Arcs for which the command returns <b>false</b> are removed from the result list before it
                     is returned to the caller.

       <u>graphName</u> <b>lappend</b> <u>key</u> <u>value</u>
              Appends a <u>value</u> (as a list) to one of the keyed values associated with the graph. Returns the  new
              value given to the attribute <u>key</u>.

       <u>graphName</u> <b>node</b> <b>append</b> <u>node</u> <u>key</u> <u>value</u>
              Appends a <u>value</u> to one of the keyed values associated with an <u>node</u>. Returns the new value given to
              the attribute <u>key</u>.

       <u>graphName</u> <b>node</b> <b>attr</b> <u>key</u>

       <u>graphName</u> <b>node</b> <b>attr</b> <u>key</u> <b>-nodes</b> <u>list</u>

       <u>graphName</u> <b>node</b> <b>attr</b> <u>key</u> <b>-glob</b> <u>globpattern</u>

       <u>graphName</u> <b>node</b> <b>attr</b> <u>key</u> <b>-regexp</b> <u>repattern</u>
              This  method  retrieves the value of the attribute named <u>key</u>, for all nodes in the graph (matching
              the restriction specified via one of the possible options) and having the specified attribute.

              The result is a dictionary mapping from node names to the value of attribute  <u>key</u>  at  that  node.
              Nodes  not having the attribute <u>key</u>, or not passing a specified restriction, are not listed in the
              result.

              The possible restrictions are:

              <b>-nodes</b> The value is a list of nodes. Only the nodes mentioned in this list are  searched  for  the
                     attribute.

              <b>-glob</b>  The value is a glob pattern. Only the nodes in the graph whose names match this pattern are
                     searched for the attribute.

              <b>-regexp</b>
                     The  value  is  a  regular  expression.  Only the nodes in the graph whose names match this
                     pattern are searched for the attribute.

       <u>graphName</u> <b>node</b> <b>degree</b> ?-in|-out? <u>node</u>
              Return the number of arcs adjacent to the specified <u>node</u>. If one of the restrictions <b>-in</b>  or  <b>-out</b>
              is given only the incoming resp. outgoing arcs are counted.

       <u>graphName</u> <b>node</b> <b>delete</b> <u>node</u> ?<u>node</u>...?
              Remove  the  specified  nodes  from  the graph.  All of the nodes' arcs will be removed as well to
              prevent unconnected arcs.

       <u>graphName</u> <b>node</b> <b>exists</b> <u>node</u>
              Return true if the specified <u>node</u> exists in the graph.

       <u>graphName</u> <b>node</b> <b>get</b> <u>node</u> <u>key</u>
              Return the value associated with the key <u>key</u> for the <u>node</u>.

       <u>graphName</u> <b>node</b> <b>getall</b> <u>node</u> ?<u>pattern</u>?
              Returns a dictionary (suitable for use with  [<b>array</b>  <b>set</b>])  for  the  <u>node</u>.   If  the  <u>pattern</u>  is
              specified  only  the  attributes  whose  names  match  the  pattern  will  be part of the returned
              dictionary. The pattern is a <b>glob</b> pattern.

       <u>graphName</u> <b>node</b> <b>keys</b> <u>node</u> ?<u>pattern</u>?
              Returns a list of keys for the <u>node</u>.  If the <u>pattern</u> is specified only the attributes whose  names
              match the pattern will be part of the returned list. The pattern is a <b>glob</b> pattern.

       <u>graphName</u> <b>node</b> <b>keyexists</b> <u>node</u> <u>key</u>
              Return true if the specified <u>key</u> exists for the <u>node</u>.

       <u>graphName</u> <b>node</b> <b>insert</b> ?<u>node</u>...?
              Insert  one or more nodes into the graph. The new nodes have no arcs connected to them. If no node
              is specified one node will be inserted, and the system will generate a unique  name  of  the  form
              <u>nodex</u> for it.

       <u>graphName</u> <b>node</b> <b>lappend</b> <u>node</u> <u>key</u> <u>value</u>
              Appends  a  <u>value</u>  (as a list) to one of the keyed values associated with an <u>node</u>. Returns the new
              value given to the attribute <u>key</u>.

       <u>graphName</u> <b>node</b> <b>opposite</b> <u>node</u> <u>arc</u>
              Return the node at the other end of the specified <u>arc</u>, which has to be adjacent to the given <u>node</u>.

       <u>graphName</u> <b>node</b> <b>rename</b> <u>node</u> <u>newname</u>
              Renames the node <u>node</u> to <u>newname</u>. An error is thrown if either the node does not exist, or a  node
              with name <u>newname</u> does exist. The result of the command is the new name of the node.

       <u>graphName</u> <b>node</b> <b>set</b> <u>node</u> <u>key</u> ?<u>value</u>?
              Set  or  get  one  of the keyed values associated with a node. A node may have any number of keyed
              values associated with it.  If <u>value</u> is not specified, this  command  returns  the  current  value
              assigned to the key; if <u>value</u> is specified, this command assigns that value to the key.

       <u>graphName</u> <b>node</b> <b>unset</b> <u>node</u> <u>key</u>
              Remove a keyed value from the node <u>node</u>. The method will do nothing if the <u>key</u> does not exist.

       <u>graphName</u> <b>nodes</b> ?-key <u>key</u>? ?-value <u>value</u>? ?-filter <u>cmdprefix</u>? ?-in|-out|-adj|-inner|-embedding <u>node</u>
       <u>node</u>...?
              Return  a  list  of nodes in the graph. Restrictions can limit the list of returned nodes based on
              neighboring nodes, or based on the keyed values associated with the node.  The  restrictions  that
              involve  neighboring  nodes  have  a  list  of  nodes as argument, specified after the name of the
              restriction itself.

              The possible restrictions are the same as for method <b>arcs</b>.  Note that  while  the  exact  meanings
              change  slightly,  as  they  operate  on nodes instead of arcs, the general behaviour is the same,
              especially when it comes to the handling of words with a leading dash in node lists.

              The command recognizes:

              <b>-in</b>    Return a list of all nodes with at least one outgoing arc ending in a  node  found  in  the
                     specified set of nodes. Alternatively specified as the set of source nodes for the <b>-in</b> arcs
                     of the node set. The <u>incoming</u> <u>neighbours</u>.

              <b>-out</b>   Return  a  list of all nodes with at least one incoming arc starting in a node found in the
                     specified set of nodes. Alternatively specified as the set of target  nodes  for  the  <b>-out</b>
                     arcs of the node set. The <u>outgoing</u> <u>neighbours</u>.

              <b>-adj</b>   This is the union of the nodes returned by <b>-in</b> and <b>-out</b>. The <u>neighbours</u>.

              <b>-inner</b> The  set  of  neighbours  (see  <b>-adj</b>  above)  which  are also in the set of nodes. I.e. the
                     intersection between the set of nodes and the neighbours per <b>-adj</b>.

              <b>-embedding</b>
                     The set of neighbours (see <b>-adj</b> above) which  are  not  in  the  set  of  nodes.  I.e.  the
                     difference between the neighbours as per <b>-adj</b>, and the set of nodes.

              <b>-key</b> <u>key</u>
                     Limit the list of nodes that are returned to those nodes that have an associated key <u>key</u>.

              <b>-value</b> <u>value</u>
                     This  restriction  can  only  be used in combination with <b>-key</b>. It limits the list of nodes
                     that are returned to those nodes whose associated key <u>key</u> has the value <u>value</u>.

              <b>-filter</b> <u>cmdrefix</u>
                     Limit the list of nodes that are returned to those nodes that pass the test. The command in
                     <u>cmdprefix</u> is called with two arguments, the name of the graph object, and the name  of  the
                     node  in  question. It is executed in the context of the caller and has to return a boolean
                     value. Nodes for which the command returns <b>false</b> are removed from the result list before it
                     is returned to the caller.

       <u>graphName</u> <b>get</b> <u>key</u>
              Return the value associated with the key <u>key</u> for the graph.

       <u>graphName</u> <b>getall</b> ?<u>pattern</u>?
              Returns a dictionary (suitable for use with [<b>array</b> <b>set</b>]) for the whole graph.  If the  <u>pattern</u>  is
              specified  only  the  attributes  whose  names  match  the  pattern  will  be part of the returned
              dictionary. The pattern is a <b>glob</b> pattern.

       <u>graphName</u> <b>keys</b> ?<u>pattern</u>?
              Returns a list of keys for the whole graph.  If the <u>pattern</u> is specified only the attributes whose
              names match the pattern will be part of the returned list. The pattern is a <b>glob</b> pattern.

       <u>graphName</u> <b>keyexists</b> <u>key</u>
              Return true if the specified <u>key</u> exists for the whole graph.

       <u>graphName</u> <b>serialize</b> ?<u>node</u>...?
              This method serializes the sub-graph spanned up by the <u>node</u>s. In other  words  it  returns  a  tcl
              value  completely  describing  that  graph.  If  no  nodes  are  specified the whole graph will be
              serialized.  This allows, for example, the transfer of  graph  objects  (or  parts  thereof)  over
              arbitrary channels, persistence, etc.  This method is also the basis for both the copy constructor
              and the assignment operator.

              The  result  of this method has to be semantically identical over all implementations of the graph
              interface. This is what will enable us to copy graph data between different implementations of the
              same interface.

              The result is a list containing a multiple of three items, plus one!  In  other  words,  '[llength
              $serial] % 3 == 1'. Valid values include 1, 4, 7, ...

              The  last  element of the list is a dictionary containing the attributes associated with the whole
              graph.  Regarding the other elements; each triple consists of

              [1]    The name of the node to be described,

              [2]    A dictionary containing the attributes associated with the node,

              [3]    And a list describing all the arcs starting at that node.

       The elements of the arc list are lists containing three or four elements each, i.e.

              [1]    The name of the arc described by the element,

              [2]    A reference to the destination node of the arc. This reference is an integer  number  given
                     the  index of that node in the main serialization list. As that it is greater than or equal
                     to zero, less than the length of the serialization, and a multiple  of  three.   <u>Note:</u>  For
                     internal  consistency  no  arc name may be used twice, whether in the same node, or at some
                     other node. This is a global consistency requirement for the serialization.

              [3]    And a dictionary containing the attributes associated with the arc.

              [4]    The weight associated with the arc. This value is optional. Its non-presence means that the
                     arc in question has no weight associated with it.

                     <u>Note:</u> This information is new, compared to the serialization of <b>graph</b> 2.3 and  earlier.  By
                     making  it  an  optional  element the new format is maximally compatible with the old. This
                     means that any graph not using  weights  will  generate  a  serialization  which  is  still
                     understood by the older graph package. A serialization will not be understood any longer by
                     the  older  packages if, and only if the graph it was generated from actually has arcs with
                     weights.

       For all attribute dictionaries they keys are the names of the attributes, and the values are  the  values
       for each name.

       <u>Note:</u>  The  order  of  the nodes in the serialization has no relevance, nor has the order of the arcs per
       node.

                  # A possible serialization for the graph structure
                  #
                  #        d -----&gt; %2
                  #       /         ^ \
                  #      /         /   \
                  #     /         b     \
                  #    /         /       \
                  #  %1 &lt;- a - %0         e
                  #    ^         \\      /
                  #     \\        c     /
                  #      \\        \\  /
                  #       \\        v v
                  #        f ------ %3
                  # is
                  #
                  # %3 {} {{f 6 {}}} %0 {} {{a 6 {}} {b 9 {}} {c 0 {}}} %1 {} {{d 9 {}}} %2 {} {{e 0 {}}} {}
                  #
                  # This assumes that the graph has neither attribute data nor weighted arcs.

       <u>graphName</u> <b>set</b> <u>key</u> ?<u>value</u>?
              Set or get one of the keyed values associated with a graph. A graph may have any number  of  keyed
              values  associated  with  it.  If  <u>value</u>  is not specified, this command returns the current value
              assigned to the key; if <u>value</u> is specified, this command assigns that value to the key.

       <u>graphName</u> <b>swap</b> <u>node1</u> <u>node2</u>
              Swap the position of <u>node1</u> and <u>node2</u> in the graph.

       <u>graphName</u> <b>unset</b> <u>key</u>
              Remove a keyed value from the graph. The method will do nothing if the <u>key</u> does not exist.

       <u>graphName</u> <b>walk</b> <u>node</u> ?-order <u>order</u>? ?-type <u>type</u>? ?-dir <u>direction</u>? -command <u>cmd</u>
              Perform a breadth-first or depth-first walk of the graph starting at the node <u>node</u> going in either
              the direction of outgoing or opposite to the incoming arcs.

              The type of walk, breadth-first or depth-first, is determined by the value of <u>type</u>; <b>bfs</b>  indicates
              breadth-first, <b>dfs</b> indicates depth-first.  Depth-first is the default.

              The  order  of  the walk, pre-order, post-order or both-order is determined by the value of <u>order</u>;
              <b>pre</b> indicates pre-order, <b>post</b> indicates post-order, <b>both</b> indicates both-order.  Pre-order  is  the
              default. Pre-order walking means that a node is visited before any of its neighbors (as defined by
              the  <u>direction</u>,  see  below).  Post-order  walking means that a parent is visited after any of its
              neighbors. Both-order walking means that a node is visited before <u>and</u> after any of its  neighbors.
              The combination of a breadth-first walk with post- or both-order is illegal.

              The  direction  of  the  walk  is determined by the value of <u>dir</u>; <b>backward</b> indicates the direction
              opposite to the incoming arcs, <b>forward</b> indicates the direction of the outgoing arcs.

              As the walk progresses, the command <u>cmd</u> will be evaluated at each node, with the mode of the  call
              (<b>enter</b>  or  <b>leave</b>) and values <u>graphName</u> and the name of the current node appended. For a pre-order
              walk, all nodes are <b>enter</b>ed, for a post-order all nodes are left. In a both-order walk  the  first
              visit of a node <b>enter</b>s it, the second visit <b>leave</b>s it.

</pre><h4><b>CHANGES</b> <b>FOR</b> <b>2.0</b></h4><pre>
       The following noteworthy changes have occurred:

       [1]    The API for accessing attributes and their values has been simplified.

              All  functionality regarding the default attribute "data" has been removed. This default attribute
              does not exist anymore. All accesses to attributes have to specify the name of  the  attribute  in
              question.  This  backward  <u>incompatible</u> change allowed us to simplify the signature of all methods
              handling attributes.

              Especially the flag <b>-key</b> is not required anymore, even more, its use is now forbidden. Please read
              the documentation for the arc and node methods <b>set</b>, <b>get</b>, <b>getall</b>, <b>unset</b>, <b>append</b>, <b>lappend</b>, <b>keyexists</b>
              and <b>keys</b> for a description of the new API's.

       [2]    The methods <b>keys</b> and <b>getall</b> now take an optional pattern argument and will return  only  attribute
              data for keys matching this pattern.

       [3]    Arcs  and  nodes  can  now  be  renamed. See the documentation for the methods <b>arc</b> <b>rename</b> and <b>node</b>
              <b>rename</b>.

       [4]    The structure has been extended with API's for the  serialization  and  deserialization  of  graph
              objects, and a number of operations based on them (graph assignment, copy construction).

              Please  read  the  documentation  for  the  methods  <b>serialize</b>,  <b>deserialize</b>,  <b>=</b>, and <b>--&gt;</b>, and the
              documentation on the construction of graph objects.

              Beyond the copying of whole graph objects these new  API's  also  enable  the  transfer  of  graph
              objects over arbitrary channels and for easy persistence.

       [5]    A  new  method, <b>attr</b>, was added to both <b>arc</b> and <b>node</b> allowing the query and retrieval of attribute
              data without regard to arc and node relationships.

       [6]    Both methods <b>arcs</b> and <b>nodes</b> have been extended with the ability to select arcs and nodes based  on
              an arbitrary filtering criterium.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report    such    in    the    category    <u>struct</u>     <u>::</u>     <u>graph</u>     of     the     <u>Tcllib</u>     <u>Trackers</u>
       [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please  also report any ideas for enhancements you may have for
       either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       adjacent, arc, cgraph, degree, edge, graph, loop, neighbour, node, serialization, subgraph, vertex

</pre><h4><b>CATEGORY</b></h4><pre>
       Data structures

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2002-2009,2019 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                2.4.4                                  <u>struct::<a href="../man3tcl/graph.3tcl.html">graph</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>