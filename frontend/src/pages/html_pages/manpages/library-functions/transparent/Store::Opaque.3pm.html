<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store::Opaque - Opaque objects to prevent accidental Dumping or appearance in stack traces</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libstore-opaque-perl">libstore-opaque-perl_0.03-2build5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Store::Opaque - Opaque objects to prevent accidental Dumping or appearance in stack traces

</pre><h4><b>SYNOPSIS</b></h4><pre>
         package MyCreditCardInfo;
         use strict; use warnings;
         use Store::Opaque;
         our @ISA = qw(Store::Opaque);

         sub get_creditcard_number {
           $_[0]-&gt;_get("ccnumber")
         }

         sub set_creditcard_number {
           $_[0]-&gt;_set("ccnumber", $_[1])
         }

         1;
         # use this like any other object...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Before you go any further, please do realize that this module is <b>not</b> <b>directly</b> <b>about</b> <b>security</b> in the sense
       of preventing malicious action!  It's about preventing mistakes that could turn out to be a security or
       compliance issue.

       Consider that you have code that handles sensitive data that should never end up in your logs.

         use Carp;
         foo("This does not belong in logs");
         sub foo {
           my $super_sensitive = shift;
           this_can_die();
         }
         sub this_can_die {
           Carp::confess("Gotcha"); # stack trace
         }

       If you're logging erros, you get this in your logs:

         Gotcha at /tmp/t.pl line 8
                 main::this_can_die() called at /tmp/t.pl line 5
                 main::foo('This does not belong in logs') called at /tmp/t.pl line 2

       Great, not! Various techniques can be used to fix this. The easiest one is simply using hash-based
       objects to store this info and pass it around.  In general, you'd pass it around as some sort of
       reference to prevent this.

       Alas, that is easily defeated by accident if developers write stuff like this:

         sub foo {
           warn Data::Dumper-&gt;Dump(\@_); # FIXME just for debugging
           my $super_sensitive = shift;
           this_can_die();
         }

       Again, there's a myriad of ways to explicitly defeat that, but I'd bring up the more powerful
       Data::Dump::Streamer (in conjunction with PadWalker and B::Deparse) next. Even inside out objects can
       accidentally be dumped if you're using Data::Dump::Streamer to dump their methods.  It's becoming
       progressively less easy to make a mistake like the above, but why bother?

       This module implements an opaque object implementation that does not suffer from these issues. Let me
       repeat. This isn't about hiding anything from an attacker.  It's about preventing mistakes from people
       who have legitimate access.

       Oh, and don't use this for *all* of your objects as it comes with a small memory and moderate performance
       overhead.

</pre><h4><b>WARNING</b></h4><pre>
       If you do not fully understand the previous section, look elsewhere and do not use this module.

</pre><h4><b>METHODS</b> <b>AND</b> <b>USAGE</b></h4><pre>
       You use this module by subclassing. If that doesn't work for you, you can manually import the methods in
       the class. If you don't know how that works, you shouldn't be doing it.

       Your subclass will inherit the following methods:

   <b>new</b>
       Simple constructor that takes no arguments. You can override is as follows:

         sub new {
           my $class = shift;
           my $self = $class-&gt;SUPER::new;
           # initialize here
           return $self;
         }

   <b>_set</b>
       Generic setter for the stored information:

         sub set_ccinfo {
           my $self = shift;
           my $value = shift;
           $self-&gt;_set("ccinfo", $value);
         }

       where "ccinfo" is the key to store the $value under. If this feel reminiscent of a hash, then that's not
       coincidental as the object is a hash under the hood.

       You can use any string has a key that would otherwise work in a normal hash-based object.

   <b>_get</b>
       Generic accessor for the stored information. Works just liek "_set" without the $value.

</pre><h4><b>AUTHOR</b></h4><pre>
       Steffen Mueller, &lt;<a href="mailto:smueller@cpan.org">smueller@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2011 by Steffen Mueller

       This library is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself, either Perl version 5.8.1 or, at your option, any later version of Perl 5 you may have available.

perl v5.40.0                                       2024-10-20                                 <u>Store::<a href="../man3pm/Opaque.3pm.html">Opaque</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>