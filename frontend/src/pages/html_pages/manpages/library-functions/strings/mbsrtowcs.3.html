<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mbsrtowcs - convert a multibyte string to a wide-character string (restartable)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mbsrtowcs - convert a multibyte string to a wide-character string (restartable)

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/wchar.h">wchar.h</a>&gt;</b>

       <b>size_t</b> <b>mbsrtowcs(wchar_t</b> <u>dest</u><b>[restrict</b> <b>.</b><u>dsize</u><b>],</b>
                        <b>const</b> <b>char</b> <b>**restrict</b> <u>src</u><b>,</b>
                        <b>size_t</b> <u>dsize</u><b>,</b> <b>mbstate_t</b> <b>*restrict</b> <u>ps</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       If  <u>dest</u>  is not NULL, convert the multibyte string <u>*src</u> to a wide-character string starting at <u>dest</u>.  At
       most <u>dsize</u> wide characters are written to <u>dest</u>.  The shift state  <u>*ps</u>  is  updated.   The  conversion  is
       effectively  performed  by repeatedly calling <u>mbrtowc(dest,</u> <u>*src,</u> <u>n,</u> <u>ps)</u> where <u>n</u> is some positive number,
       as long as this call succeeds, and then incrementing <u>dest</u>  by  one  and  <u>*src</u>  by  the  number  of  bytes
       consumed.  The conversion can stop for three reasons:

       •  An  invalid  multibyte  sequence  has  been  encountered.   In this case, <u>*src</u> is left pointing to the
          invalid multibyte sequence, <u>(size_t)</u> <u>-1</u> is returned, and <u>errno</u> is set to <b>EILSEQ</b>.

       •  <u>dsize</u> non-L'\0' wide characters have been stored at <u>dest</u>.  In this case, <u>*src</u> is left pointing to  the
          next  multibyte  sequence  to  be  converted,  and  the  number  of wide characters written to <u>dest</u> is
          returned.

       •  The multibyte string has been completely converted, including  the  terminating  null  wide  character
          ('\0'),  which  has  the side effect of bringing back <u>*ps</u> to the initial state.  In this case, <u>*src</u> is
          set to NULL, and the number of wide characters written to <u>dest</u>, excluding the  terminating  null  wide
          character, is returned.

       If  <u>dest</u>  is NULL, <u>dsize</u> is ignored, and the conversion proceeds as above, except that the converted wide
       characters are not written out to memory, and that no length limit exists.

       In both of the above cases, if <u>ps</u> is NULL, a  static  anonymous  state  known  only  to  the  <b>mbsrtowcs</b>()
       function is used instead.

       In  order  to  avoid  the case 2 above, the programmer should make sure <u>dsize</u> is greater than or equal to
       <u>mbsrtowcs(NULL,src,0,ps)+1</u>.

       The programmer must ensure that there is room for at least <u>dsize</u> wide characters at <u>dest</u>.

       This function is a restartable version of <b><a href="../man3/mbstowcs.3.html">mbstowcs</a></b>(3).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The number of wide characters that make up the converted part of the wide-character string, not including
       the terminating null wide character.  If an invalid multibyte sequence was  encountered,  <u>(size_t)</u> <u>-1</u>  is
       returned, and <u>errno</u> set to <b>EILSEQ</b>.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌─────────────┬───────────────┬─────────────────────────────────────────────────────────────────────────┐
       │ <b>Interface</b>   │ <b>Attribute</b>     │ <b>Value</b>                                                                   │
       ├─────────────┼───────────────┼─────────────────────────────────────────────────────────────────────────┤
       │ <b>mbsrtowcs</b>() │ Thread safety │ MT-Unsafe race:mbsrtowcs/!ps                                            │
       └─────────────┴───────────────┴─────────────────────────────────────────────────────────────────────────┘

</pre><h4><b>STANDARDS</b></h4><pre>
       C11, POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001, C99.

</pre><h4><b>NOTES</b></h4><pre>
       The behavior of <b>mbsrtowcs</b>() depends on the <b>LC_CTYPE</b> category of the current locale.

       Passing NULL as <u>ps</u> is not multithread safe.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/iconv.3.html">iconv</a></b>(3), <b><a href="../man3/mbrtowc.3.html">mbrtowc</a></b>(3), <b><a href="../man3/mbsinit.3.html">mbsinit</a></b>(3), <b><a href="../man3/mbsnrtowcs.3.html">mbsnrtowcs</a></b>(3), <b><a href="../man3/mbstowcs.3.html">mbstowcs</a></b>(3)

Linux man-pages 6.9.1                              2024-06-15                                       <u><a href="../man3/mbsrtowcs.3.html">mbsrtowcs</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>