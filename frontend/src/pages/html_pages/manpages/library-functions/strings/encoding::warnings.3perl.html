<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>encoding::warnings - Warn on implicit encoding conversions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/perl-doc">perl-doc_5.40.1-6_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       encoding::warnings - Warn on implicit encoding conversions

</pre><h4><b>VERSION</b></h4><pre>
       This document describes version 0.13 of encoding::warnings, released June 20, 2016.

</pre><h4><b>NOTICE</b></h4><pre>
       As of Perl 5.26.0, this module has no effect.  The internal Perl feature that was used to implement this
       module has been removed.  In recent years, much work has been done on the Perl core to eliminate
       discrepancies in the treatment of upgraded versus downgraded strings.  In addition, the encoding pragma,
       which caused many of the problems, is no longer supported.  Thus, the warnings this module produced are
       no longer necessary.

       Hence, if you load this module on Perl 5.26.0, you will get one warning that the module is no longer
       supported; and the module will do nothing thereafter.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use encoding::warnings; # or 'FATAL' to raise fatal exceptions

           utf8::encode($a = <a href="../man20000/chr.20000.html">chr</a>(20000));  # a byte-string (raw bytes)
           $b = <a href="../man20000/chr.20000.html">chr</a>(20000);                # a unicode-string (wide characters)

           # "Bytes implicitly upgraded into wide characters as iso-8859-1"
           $c = $a . $b;

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>Overview</b> <b>of</b> <b>the</b> <b>problem</b>
       By default, there is a fundamental asymmetry in Perl's unicode model: implicit upgrading from byte-
       strings to unicode-strings assumes that they were encoded in <u>ISO</u> <u>8859-1</u> <u>(Latin-1)</u>, but unicode-strings
       are downgraded with UTF-8 encoding.  This happens because the first 256 codepoints in Unicode happens to
       agree with Latin-1.

       However, this silent upgrading can easily cause problems, if you happen to mix unicode strings with
       non-Latin1 data -- i.e. byte-strings encoded in UTF-8 or other encodings.  The error will not manifest
       until the combined string is written to output, at which time it would be impossible to see where did the
       silent upgrading occur.

   <b>Detecting</b> <b>the</b> <b>problem</b>
       This module simplifies the process of diagnosing such problems.  Just put this line on top of your main
       program:

           use encoding::warnings;

       Afterwards, implicit upgrading of high-bit bytes will raise a warning.  Ex.: "Bytes implicitly upgraded
       into wide characters as iso-8859-1 at - line 7".

       However, strings composed purely of ASCII code points (0x00..0x7F) will <u>not</u> trigger this warning.

       You can also make the warnings fatal by importing this module as:

           use encoding::warnings 'FATAL';

   <b>Solving</b> <b>the</b> <b>problem</b>
       Most of the time, this warning occurs when a byte-string is concatenated with a unicode-string.  There
       are a number of ways to solve it:

       •   Upgrade both sides to unicode-strings

           If  your program does not need compatibility for Perl 5.6 and earlier, the recommended approach is to
           apply appropriate IO disciplines, so all data in your program become unicode-strings.  See  encoding,
           open and "binmode" in perlfunc for how.

       •   Downgrade both sides to byte-strings

           The  other  way works too, especially if you are sure that all your data are under the same encoding,
           or if compatibility with older versions of Perl is desired.

           You may downgrade strings with "Encode::encode" and "utf8::encode".  See Encode and utf8 for details.

       •   Specify the encoding for implicit byte-string upgrading

           If you are confident that all byte-strings will be in a specific encoding like UTF-8,  <u>and</u>  need  not
           support older versions of Perl, use the "encoding" pragma:

               use encoding 'utf8';

           Similarly, this will silence warnings from this module, and preserve the default behaviour:

               use encoding 'iso-8859-1';

           However, note that "use encoding" actually had three distinct effects:

           •   PerlIO layers for <b>STDIN</b> and <b>STDOUT</b>

               This is similar to what open pragma does.

           •   Literal conversions

               This  turns <u>all</u> literal string in your program into unicode-strings (equivalent to a "use utf8"),
               by decoding them using the specified encoding.

           •   Implicit upgrading for byte-strings

               This will silence warnings from this module, as shown above.

           Because literal conversions also work on empty strings, it may surprise some people:

               use encoding 'big5';

               my $byte_string = pack("C*", 0xA4, 0x40);
               print length $a;    # 2 here.
               $a .= "";           # concatenating with a unicode string...
               print length $a;    # 1 here!

           In other words, do not "use encoding" unless you are certain that the program will not deal with  any
           raw, 8-bit binary data at all.

           However,  the  "Filter  =&gt;  1"  flavor of "use encoding" will <u>not</u> affect implicit upgrading for byte-
           strings, and is thus incapable of silencing  warnings  from  this  module.   See  encoding  for  more
           details.

</pre><h4><b>CAVEATS</b></h4><pre>
       For Perl 5.9.4 or later, this module's effect is lexical.

       For  Perl  versions  prior  to 5.9.4, this module affects the whole script, instead of inside its lexical
       block.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       perlunicode, perluniintro

       open, utf8, encoding, Encode

</pre><h4><b>AUTHORS</b></h4><pre>
       Audrey Tang

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2004, 2005, 2006, 2007 by Audrey Tang &lt;<a href="mailto:cpan@audreyt.org">cpan@audreyt.org</a>&gt;.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

       See &lt;<a href="http://www.perl.com/perl/misc/Artistic.html">http://www.perl.com/perl/misc/Artistic.html</a>&gt;

perl v5.40.1                                       2025-07-27                          <u>encoding::<a href="../man3perl/warnings.3perl.html">warnings</a></u>(3perl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>