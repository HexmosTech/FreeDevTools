<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mbsnrtowcs - convert a multibyte string to a wide-character string</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mbsnrtowcs - convert a multibyte string to a wide-character string

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/wchar.h">wchar.h</a>&gt;</b>

       <b>size_t</b> <b>mbsnrtowcs(wchar_t</b> <u>dest</u><b>[restrict</b> <b>.</b><u>len</u><b>],</b> <b>const</b> <b>char</b> <b>**restrict</b> <u>src</u><b>,</b>
                         <b>size_t</b> <u>nms</u><b>,</b> <b>size_t</b> <u>len</u><b>,</b> <b>mbstate_t</b> <b>*restrict</b> <u>ps</u><b>);</b>

   Feature Test Macro Requirements for glibc (see <b><a href="../man7/feature_test_macros.7.html">feature_test_macros</a></b>(7)):

       <b>mbsnrtowcs</b>():
           Since glibc 2.10:
               _POSIX_C_SOURCE &gt;= 200809L
           Before glibc 2.10:
               _GNU_SOURCE

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>mbsnrtowcs</b>()  function  is  like  the  <b><a href="../man3/mbsrtowcs.3.html">mbsrtowcs</a></b>(3)  function, except that the number of bytes to be
       converted, starting at <u>*src</u>, is limited to at most <u>nms</u> bytes.

       If <u>dest</u> is not NULL, the <b>mbsnrtowcs</b>() function converts at most <u>nms</u> bytes from the multibyte string  <u>*src</u>
       to a wide-character string starting at <u>dest</u>.  At most <u>len</u> wide characters are written to <u>dest</u>.  The shift
       state  <u>*ps</u> is updated.  The conversion is effectively performed by repeatedly calling <u>mbrtowc(dest,</u> <u>*src,</u>
       <u>n,</u> <u>ps)</u> where <u>n</u> is some positive number, as long as this call succeeds, and then incrementing <u>dest</u> by  one
       and <u>*src</u> by the number of bytes consumed.  The conversion can stop for three reasons:

       •  An  invalid  multibyte  sequence  has  been  encountered.   In this case, <u>*src</u> is left pointing to the
          invalid multibyte sequence, <u>(size_t)</u> <u>-1</u> is returned, and <u>errno</u> is set to <b>EILSEQ</b>.

       •  The <u>nms</u> limit forces a stop, or <u>len</u> non-L'\0' wide characters have been stored at <u>dest</u>.  In this case,
          <u>*src</u> is left pointing to the next  multibyte  sequence  to  be  converted,  and  the  number  of  wide
          characters written to <u>dest</u> is returned.

       •  The  multibyte  string  has  been  completely converted, including the terminating null wide character
          ('\0') (which has the side effect of bringing back <u>*ps</u> to the initial state).  In this case,  <u>*src</u>  is
          set  to  NULL,  and the number of wide characters written to <u>dest</u>, excluding the terminating null wide
          character, is returned.

       According to POSIX.1, if the input buffer ends with an incomplete character, it  is  unspecified  whether
       conversion  stops  at the end of the previous character (if any), or at the end of the input buffer.  The
       glibc implementation adopts the former behavior.

       If <u>dest</u> is NULL, <u>len</u> is ignored, and the conversion proceeds as above, except  that  the  converted  wide
       characters are not written out to memory, and that no destination length limit exists.

       In  both  of  the  above  cases,  if  <u>ps</u> is NULL, a static anonymous state known only to the <b>mbsnrtowcs</b>()
       function is used instead.

       The programmer must ensure that there is room for at least <u>len</u> wide characters at <u>dest</u>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>mbsnrtowcs</b>() function returns the number of wide characters that make up the converted  part  of  the
       wide-character  string,  not  including  the  terminating  null  wide character.  If an invalid multibyte
       sequence was encountered, <u>(size_t)</u> <u>-1</u> is returned, and <u>errno</u> set to <b>EILSEQ</b>.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌──────────────┬───────────────┬────────────────────────────────────────────────────────────────────────┐
       │ <b>Interface</b>    │ <b>Attribute</b>     │ <b>Value</b>                                                                  │
       ├──────────────┼───────────────┼────────────────────────────────────────────────────────────────────────┤
       │ <b>mbsnrtowcs</b>() │ Thread safety │ MT-Unsafe race:mbsnrtowcs/!ps                                          │
       └──────────────┴───────────────┴────────────────────────────────────────────────────────────────────────┘

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>NOTES</b></h4><pre>
       The behavior of <b>mbsnrtowcs</b>() depends on the <b>LC_CTYPE</b> category of the current locale.

       Passing NULL as <u>ps</u> is not multithread safe.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/iconv.3.html">iconv</a></b>(3), <b><a href="../man3/mbrtowc.3.html">mbrtowc</a></b>(3), <b><a href="../man3/mbsinit.3.html">mbsinit</a></b>(3), <b><a href="../man3/mbsrtowcs.3.html">mbsrtowcs</a></b>(3)

Linux man-pages 6.9.1                              2024-06-15                                      <u><a href="../man3/mbsnrtowcs.3.html">mbsnrtowcs</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>