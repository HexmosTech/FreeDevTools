<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vmod_accept - Accept VMOD</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/varnish-modules">varnish-modules_0.25.0-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vmod_accept - Accept VMOD

</pre><h4><b>SYNOPSIS</b></h4><pre>
          import accept [as name] [from "path"]

          new xrule = accept.rule(STRING string)

              VOID xrule.add(STRING string)

              VOID xrule.remove(STRING string)

              STRING xrule.filter(STRING string)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       accept  allows you to sanitize the Accept* headers (mainly Accept, Accept-Charset and Accept-Encoding) by
       specify one fallback string, and then adding valid values:

          sub vcl_init {
              new rule = accept.rule("text/plain");
              rule.add("text/html");
              rule.add("application/json");
          }

       You can then use the <b>rule</b> object to filter the headers. The following line will set the accept header  to
       "text/html"  or  "application/json"  if  any  of them is found in the original header, and will set it to
       "text/plain" if neither is found:

          sub vcl_recv {
              set req.http.Accept = rule.filter(req.http.Accept);
          }

       accept will ignore any parameter found and will just return the  first  choice  found.  More  info  here:
       &lt;https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html&gt;

</pre><h4><b>API</b></h4><pre>
   <b>new</b> <b>xrule</b> <b>=</b> <b>accept.rule(STRING</b> <b>string)</b>
       Create a rule object, setting the fallback string.

   <b>VOID</b> <b>xrule.add(STRING</b> <b>string)</b>
       Add <b>string</b> to the list of valid choices.

   <b>VOID</b> <b>xrule.remove(STRING</b> <b>string)</b>
       Remove <b>string</b> to the list of valid choices.

   <b>STRING</b> <b>xrule.filter(STRING</b> <b>string)</b>
       Parse string and try to find a valid choice. The first one found is returned (they are tested in the same
       order they were added), otherwise, the fallback string is returned.

</pre><h4><b>COPYRIGHT</b></h4><pre>
          Copyright (c) 2016 Guillaume Quintard

          Author: Guillaume Quintard &lt;<a href="mailto:guillaume.quintard@gmail.com">guillaume.quintard@gmail.com</a>&gt;

          (vmodtool requires this format.)

                                                                                                  <u><a href="../man3/VMOD_ACCEPT.3.html">VMOD_ACCEPT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>