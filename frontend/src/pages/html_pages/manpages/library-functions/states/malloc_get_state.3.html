<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>malloc_get_state, malloc_set_state - record and restore state of malloc implementation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       malloc_get_state, malloc_set_state - record and restore state of malloc implementation

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/malloc.h">malloc.h</a>&gt;</b>

       <b>void</b> <b>*malloc_get_state(void);</b>
       <b>int</b> <b>malloc_set_state(void</b> <b>*</b><u>state</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Note</u>: these functions are removed in glibc 2.25.

       The <b>malloc_get_state</b>() function records the current state of all <b><a href="../man3/malloc.3.html">malloc</a></b>(3) internal bookkeeping variables
       (but  not  the actual contents of the heap or the state of <b><a href="../man3/malloc_hook.3.html">malloc_hook</a></b>(3) functions pointers).  The state
       is recorded in a system-dependent opaque data  structure  dynamically  allocated  via  <b><a href="../man3/malloc.3.html">malloc</a></b>(3),  and  a
       pointer to that data structure is returned as the function result.  (It is the caller's responsibility to
       <b><a href="../man3/free.3.html">free</a></b>(3) this memory.)

       The <b>malloc_set_state</b>() function restores the state of all <b><a href="../man3/malloc.3.html">malloc</a></b>(3) internal bookkeeping variables to the
       values recorded in the opaque data structure pointed to by <u>state</u>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  success,  <b>malloc_get_state</b>()  returns a pointer to a newly allocated opaque data structure.  On error
       (for example, memory could not be allocated for the data structure), <b>malloc_get_state</b>() returns NULL.

       On success, <b>malloc_set_state</b>() returns 0.  If the implementation detects that <u>state</u> does not point  to  a
       correctly  formed  data structure, <b>malloc_set_state</b>() returns -1.  If the implementation detects that the
       version of the data structure referred to by <u>state</u> is a more  recent  version  than  this  implementation
       knows about, <b>malloc_set_state</b>() returns -2.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌─────────────────────────────────────────────────────────────────────────────┬───────────────┬─────────┐
       │ <b>Interface</b>                                                                   │ <b>Attribute</b>     │ <b>Value</b>   │
       ├─────────────────────────────────────────────────────────────────────────────┼───────────────┼─────────┤
       │ <b>malloc_get_state</b>(), <b>malloc_set_state</b>()                                      │ Thread safety │ MT-Safe │
       └─────────────────────────────────────────────────────────────────────────────┴───────────────┴─────────┘

</pre><h4><b>STANDARDS</b></h4><pre>
       GNU.

</pre><h4><b>NOTES</b></h4><pre>
       These  functions are useful when using this <b><a href="../man3/malloc.3.html">malloc</a></b>(3) implementation as part of a shared library, and the
       heap contents are saved/restored via some other method.  This technique is used by GNU Emacs to implement
       its "dumping" function.

       Hook function pointers are never saved or restored by these functions, with  two  exceptions:  if  malloc
       checking  (see  <b><a href="../man3/mallopt.3.html">mallopt</a></b>(3)) was in use when <b>malloc_get_state</b>() was called, then <b>malloc_set_state</b>() resets
       malloc checking hooks if possible; if malloc checking was not in use  in  the  recorded  state,  but  the
       caller has requested malloc checking, then the hooks are reset to 0.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/malloc.3.html">malloc</a></b>(3), <b><a href="../man3/mallopt.3.html">mallopt</a></b>(3)

Linux man-pages 6.9.1                              2024-05-02                                <u><a href="../man3/malloc_get_state.3.html">malloc_get_state</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>