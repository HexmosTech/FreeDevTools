<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>__pmParseHostSpec, __pmUnparseHostSpec, __pmFreeHostSpec - uniform host specification parser</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>__pmParseHostSpec</b>, <b>__pmUnparseHostSpec</b>, <b>__pmFreeHostSpec</b> - uniform host specification parser

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>"pmapi.h"</b>
       <b>#include</b> <b>"libpcp.h"</b>

       <b>int</b> <b>__pmParseHostSpec(const</b> <b>char</b> <b>*</b><u>string</u><b>,</b> <b>__pmHostSpec</b> <b>**</b><u>hostsp</u><b>,</b> <b>int</b> <b>*</b><u>count</u><b>,</b> <b>char</b> <b>**</b><u>errmsg</u><b>);</b>
       <b>int</b> <b>__pmUnparseHostSpec(__pmHostSpec</b> <b>*</b><u>hosts</u><b>,</b> <b>int</b> <u>count</u><b>,</b> <b>char</b> <b>*</b><u>string</u><b>,</b> <b>size_t</b> <u>size</u><b>);</b>
       <b>void</b> <b>__pmFreeHostSpec(__pmHostSpec</b> <b>*</b><u>hosts</u><b>,</b> <b>int</b> <u>count</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>CAVEAT</b></h4><pre>
       This documentation is intended for internal Performance Co-Pilot (PCP) developer use.

       These  interfaces  are  not part of the PCP APIs that are guaranteed to remain fixed across releases, and
       they may not work, or may provide different semantics at some point in the future.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>__pmParseHostSpec</b> accepts a <b>string</b> specifying the location of a PCP performance metric collector  daemon.
       The  syntax  of the various formats of this <b>string</b> is described in <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1) where several examples are
       also presented.

       The syntax allows the initial <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) hostname to be optionally followed by a list of port numbers, which
       will be tried in order when connecting to <b>pmcd</b> on that host.  The list of port numbers is separated  from
       the hostname using a colon, and each port in the list is comma-separated.

       In  addition,  one  or more optional <b><a href="../man1/pmproxy.1.html">pmproxy</a></b>(1) hosts can be specified (currently, only one proxy host is
       supported by the PCP protocols).  These are separated from each other and from the <b>pmcd</b>  component  using
       the  @  character.   These  may also be followed by an optional port list, using the same comma-separated
       syntax as before.

       <b>__pmParseHostSpec</b> takes a null-terminated host specification <b>string</b> and returns an array of  <b>__pmHostSpec</b>
       structures, where the array has <b>count</b> entries.

       These <b>__pmHostSpec</b> structures that are returned via <b>hostsp</b> represent each individual host in the specifi‐
       cation <b>string</b> and has the following declaration:

           typedef struct {
               char    *name;       /* hostname (always valid) */
               int     *ports;      /* array of host port numbers */
               int     nports;      /* number of ports in host port array */
           } __pmHostSpec;

       <b>__pmUnparseHostSpec</b>  performs  the  inverse  operation, creating a <b>string</b> representation from a number of
       <b>hosts</b> structures.  Where the <b>count</b> of structures indicated by <b>hosts</b> is greater than one, the proxy syntax
       is used to indicate a chain of proxied hosts.  The size of the supplied <b>string</b> buffer must be provided by
       the caller using the <b>size</b> parameter.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       If the given <b>string</b> is successfully parsed <b>__pmParseHostSpec</b> returns zero.   In  this  case  the  dynamic
       storage  allocated by <b>__pmParseHostSpec</b> can be released by calling <b>__pmFreeHostSpec</b> using the address re‐
       turned from <b>__pmParseHostSpec</b> via <b>hosts</b>.

       <b>__pmParseHostSpec</b> returns <b>PM_ERR_GENERIC</b> and a dynamically allocated error message string in  <b>errmsg</b>,  if
       the  given  <b>string</b>  does not parse, and the user-supplied <b>errmsg</b> pointer is non-null.  Be sure to <b><a href="../man3/free.3.html">free</a></b>(3)
       the error message string in this situation.

       In the case of an error, <b>hosts</b> is undefined.  In the case of success, <b>errmsg</b> is undefined.

       On success <b>__pmUnparseHostSpec</b> returns a positive value indicating the number of characters written  into
       the  supplied buffer.  However, if the supplied buffer was too small, a negative status code of <b>-E2BIG</b> is
       returned.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1), <b><a href="../man1/pmproxy.1.html">pmproxy</a></b>(1), <b><a href="../man1/pmchart.1.html">pmchart</a></b>(1), <b><a href="../man3/__pmParseHostAttrsSpec.3.html">__pmParseHostAttrsSpec</a></b>(3), <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3) and <b><a href="../man3/pmNewContext.3.html">pmNewContext</a></b>(3).

Performance Co-Pilot                                   PCP                                    <u><a href="../man3/PMPARSEHOSTSPEC.3.html">PMPARSEHOSTSPEC</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>