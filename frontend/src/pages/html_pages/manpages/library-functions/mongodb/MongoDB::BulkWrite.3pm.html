<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB::BulkWrite - MongoDB bulk write interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongodb-perl">libmongodb-perl_2.2.2-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MongoDB::BulkWrite - MongoDB bulk write interface

</pre><h4><b>VERSION</b></h4><pre>
       version v2.2.2

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Safe::Isa;
           use Try::Tiny;

           my $bulk = $collection-&gt;initialize_ordered_bulk_op;

           $bulk-&gt;insert_one( $doc );
           $bulk-&gt;find( $query )-&gt;upsert-&gt;replace_one( $doc )
           $bulk-&gt;find( $query )-&gt;update( $modification )

           my $result = try {
               $bulk-&gt;execute;
           }
           catch {
               if ( $_-&gt;$isa("MongoDB::WriteConcernError") ) {
                   warn "Write concern failed";
               }
               else {
                   die $_;
               }
           };

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class constructs a list of write operations to perform in bulk for a single collection.  On a
       MongoDB 2.6 or later server with write command support this allow grouping similar operations together
       for transit to the database, minimizing network round-trips.

       To begin a bulk operation, use one these methods from MongoDB::Collection:

       •   initialize_ordered_bulk_op

       •   initialize_unordered_bulk_op

   <b>Ordered</b> <b>Operations</b>
       With  an ordered operations list, MongoDB executes the write operations in the list serially. If an error
       occurs during the processing of one of the write operations, MongoDB will return without  processing  any
       remaining write operations in the list.

   <b>Unordered</b> <b>Operations</b>
       With  an  unordered  operations  list,  MongoDB can execute in parallel, as well as in a nondeterministic
       order, the write operations in the list. If an error occurs during the processing of  one  of  the  write
       operations, MongoDB will continue to process remaining write operations in the list.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>collection</b> <b>(required)</b>
       The MongoDB::Collection where the operations are to be performed.

   <b>ordered</b> <b>(required)</b>
       A boolean for whether or not operations should be ordered (true) or unordered (false).

   <b>bypassDocumentValidation</b>
       A boolean for whether or not operations should bypass document validation.  Default is false.

</pre><h4><b>METHODS</b></h4><pre>
   <b>find</b>
           $view = $bulk-&gt;find( $query_document );

       The  "find"  method returns a MongoDB::BulkWriteView object that allows write operations like "update" or
       "remove", constrained by a query document.

       A query document is required.  Use an empty hashref for no criteria:

           $bulk-&gt;find( {} )-&gt;remove; # remove all documents!

       An exception will be thrown on error.

   <b>insert_one</b>
           $bulk-&gt;insert_one( $doc );

       Queues a document for insertion when "execute" is called.  The document may be a hash reference, an array
       reference (with balanced key/value pairs) or a Tie::IxHash object.  If the  document  does  not  have  an
       "_id" field, one will be added to the original.

       The method has an empty return on success; an exception will be thrown on error.

   <b>execute</b>
           my $result = $bulk-&gt;execute;
           # Optional write concern:
           my $result = $bulk-&gt;execute( $concern );
           # With options
           my $result = $bulk-&gt;execute( $concern, $options );

       Executes  the queued operations.  The order and semantics depend on whether the bulk object is ordered or
       unordered:

       •   ordered — operations are executed in order, but operations of the same type (e.g.  multiple  inserts)
           may  be  grouped together and sent to the server.  If the server returns an error, the bulk operation
           will stop and an error will be thrown.

       •   unordered — operations are grouped by type and sent to the server in an unpredictable  order.   After
           all operations are sent, if any errors occurred, an error will be thrown.

       When  grouping operations of a type, operations will be sent to the server in batches not exceeding 16MiB
       or 1000 items (for a version 2.6 or later server) or  individually  (for  legacy  servers  without  write
       command support).

       A  write concern is optional, and can either take a pre-constructed WriteConcern object, or the arguments
       to construct one.  For information on write concerns, see MongoDB::WriteConcern.

       The options argument is an optional hashref which can contain the following values:

       •   "session" - the session to use for these operations. If not supplied, will use an  implicit  session.
           For more information see MongoDB::ClientSession

       This method returns a MongoDB::BulkWriteResult object if the bulk operation executes successfully.

       Typical errors might include:

       •   "MongoDB::WriteError" — one or more write operations failed

       •   "MongoDB::WriteConcernError" - all writes were accepted by a primary, but the write concern failed

       •   "MongoDB::DatabaseError" — a command to the database failed entirely

       See MongoDB::Error for more on error handling.

       <b>NOTE</b>:  it is an error to call "execute" without any operations or to call "execute" more than once on the
       same bulk object.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   David Golden &lt;<a href="mailto:david@mongodb.com">david@mongodb.com</a>&gt;

       •   Rassi &lt;<a href="mailto:rassi@mongodb.com">rassi@mongodb.com</a>&gt;

       •   Mike Friedman &lt;<a href="mailto:friedo@friedo.com">friedo@friedo.com</a>&gt;

       •   Kristina Chodorow &lt;<a href="mailto:k.chodorow@gmail.com">k.chodorow@gmail.com</a>&gt;

       •   Florian Ragwitz &lt;<a href="mailto:rafl@debian.org">rafl@debian.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2020 by MongoDB, Inc.

       This is free software, licensed under:

         The Apache License, Version 2.0, January 2004

perl v5.40.1                                       2025-04-03                            <u>MongoDB::<a href="../man3pm/BulkWrite.3pm.html">BulkWrite</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>