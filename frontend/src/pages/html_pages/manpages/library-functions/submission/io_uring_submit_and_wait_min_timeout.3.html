<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>io_uring_submit_and_wait_min_timeout  -  submit  requests  to  the  submission  queue  and  wait  for the</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liburing-dev">liburing-dev_2.9-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       io_uring_submit_and_wait_min_timeout  -  submit  requests  to  the  submission  queue  and  wait  for the
       completion with both batch and normal timeout

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;liburing.h&gt;</b>

       <b>int</b> <b>io_uring_submit_and_wait_min_timeout(struct</b> <b>io_uring</b> <b>*</b><u>ring</u><b>,</b>
                                                <b>struct</b> <b>io_uring_cqe</b> <b>**</b><u>cqe_ptr</u><b>,</b>
                                                <b>unsigned</b> <u>wait_nr</u><b>,</b>
                                                <b>struct</b> <b>__kernel_timespec</b> <b>*</b><u>ts</u><b>,</b>
                                                <b>unsigned</b> <b>int</b> <u>min_wait_usec</u><b>,</b>
                                                <b>sigset_t</b> <b>*</b><u>sigmask</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b><a href="../man3/io_uring_submit_and_wait_min_timeout.3.html">io_uring_submit_and_wait_min_timeout</a></b>(3) function submits the next requests from the submission  queue
       belonging  to  the  <u>ring</u>  and  waits  for <u>wait_nr</u> completion events, or until the timeout <u>ts</u> expires. The
       completion events are stored in the <u>cqe_ptr</u> array. If non-zero, <u>min_wait_usec</u> denotes a timeout  for  the
       <u>wait_nr</u> batch.

       The  <u>sigmask</u>  specifies the set of signals to block. If set, it is equivalent to atomically executing the
       following calls:

           sigset_t origmask;

           pthread_sigmask(SIG_SETMASK, &amp;sigmask, &amp;origmask);
           ret = io_uring_submit_and_wait_min_timeout(ring, cqe, wait_nr, ts, min_wait, NULL);
           pthread_sigmask(SIG_SETMASK, &amp;origmask, NULL);

       This works like <b><a href="../man3/io_uring_submit_and_wait_timeout.3.html">io_uring_submit_and_wait_timeout</a></b>(3) with the twist that it applies a minimum timeout  for
       the  requested batch size of requests to wait for. While <b><a href="../man3/io_uring_submit_and_wait_timeout.3.html">io_uring_submit_and_wait_timeout</a></b>(3) waits for as
       long as <u>ts</u> specifies, or until <u>wait_nr</u> of request completions have been  received,  if  <u>min_wait_usec</u>  is
       set,  then this is the timeout for the <u>wait_nr</u> number of requests. If the requested number of completions
       have been received within <u>min_wait_usec</u> number of microseconds, then the function  returns  successfully.
       If  that  isn't the case, once <u>min_wait_usec</u> time has passed, control is returned if any completions have
       been posted. If no completions have been posted, the kernel switches  to  a  normal  wait  of  up  to  <u>ts</u>
       specified  amount  of time, subtracting the time already waited. If any completions are posted after this
       happens, control is returned immediately to the application.

       This differs from the normal timeout waiting in that waiting continues post the initial timeout,  if  and
       only  if  no  completions have been posted. It's meant to be used to optimize batch waiting for requests,
       where the application allots a budget of <u>min_wait_usec</u> amount  of  time  to  receive  <u>wait_nr</u>  number  of
       completions, but if none are received, then waiting can continue without incurring extra context switches
       or extra kernel/user transitions.

       Can  be  used  with  any  ring,  as  long as the kernel supports it. Support is indicated by checking the
       <b>IORING_FEAT_MIN_TIMEOUT</b> feature flag after the ring has been setup. Ideally used with a ring  setup  with
       <b>IORING_SETUP_SINGLE_ISSUER</b>|<b>IORING_SETUP_DEFER_TASKRUN</b>  as  that will greatly reduce the number of context
       switches that an application will see waiting on multiple requests.

       Available since 6.12.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success <b><a href="../man3/io_uring_submit_and_wait_min_timeout.3.html">io_uring_submit_and_wait_min_timeout</a></b>(3) returns  the  number  of  submitted  submission  queue
       entries. On failure it returns <b>-errno</b>.  If the kernel doesn't support this functionality, <b>-EINVAL</b> will be
       returned.  See  note  on  the  feature  flag.  The most common failure case is not receiving a completion
       within the specified timeout, <b>-ETIME</b> is returned in this case.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/io_uring_queue_init_params.3.html">io_uring_queue_init_params</a></b>(3),  <b><a href="../man3/io_uring_get_sqe.3.html">io_uring_get_sqe</a></b>(3),   <b><a href="../man3/io_uring_submit.3.html">io_uring_submit</a></b>(3),   <b><a href="../man3/io_uring_submit_and_wait.3.html">io_uring_submit_and_wait</a></b>(3),
       <b><a href="../man3/io_uring_submit_and_wait_timeout.3.html">io_uring_submit_and_wait_timeout</a></b>(3), <b><a href="../man3/io_uring_wait_cqe.3.html">io_uring_wait_cqe</a></b>(3)

liburing-2.8                                      Jan 11, 2024           <u><a href="../man3/io_uring_submit_and_wait_min_timeout.3.html">io_uring_submit_and_wait_min_timeout</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>