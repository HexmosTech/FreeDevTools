<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF::Builder::Annotation - Add annotations to a PDF</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpdf-builder-perl">libpdf-builder-perl_3.026-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       PDF::Builder::Annotation - Add annotations to a PDF

</pre><h4><b>SYNOPSIS</b></h4><pre>
           my $pdf = PDF::Builder-&gt;new();
           my $font = $pdf-&gt;font('Helvetica');
           my $page1 = $pdf-&gt;page();
           my $page2 = $pdf-&gt;page();
           my $content = $page1-&gt;text();
           my $message = 'Go to Page 2';
           my $size = 18;
           $content-&gt;distance(1 * 72, 9 * 72);
           $content-&gt;font($font, $size);
           $content-&gt;text($message);
           my $annotation = $page1-&gt;annotation();
           my $width = $content-&gt;text_width($message);
           $annotation-&gt;rect(1 * 72, 9 * 72, 1 * 72 + $width, 9 * 72 + $size);
           $annotation-&gt;link($page2);
           $pdf-&gt;save('sample.pdf');

</pre><h4><b>METHODS</b></h4><pre>
       Note that the handling of annotations can vary from Reader to Reader. The available icon set may be
       larger or smaller than given here, and some Readers activate an annotation on a single mouse click, while
       others require a double click. Not all features provided here may be available on all PDF Readers.

   <b>new</b>
           $annotation = PDF::Builder::Annotation-&gt;new()

           Returns an annotation object (called from $page-&gt;<b>annotation()</b>).

           It is normally <u>not</u> necessary to explicitly call this method (see examples).

   <b>Annotation</b> <b>types</b>
       <u>link</u>

           $annotation-&gt;link($page, %opts)

           Defines the annotation as a launch-page with page $page (within <u>this</u> document) and opts %opts (rect,
           border, color, <u>fit</u>: see descriptions below).

           <b>Note</b> that $page is <u>not</u> a simple page number, but is a page structure such as
           "$pdf-&gt;openpage(page_number)", <u>or</u> a Named Destination defined elsewhere.

       <u>pdf,</u> <u>pdfile,</u> <u>pdf_file</u>

           $annotation-&gt;pdf($pdffile, $page_number, %opts)

           Defines the annotation as a PDF-file with filepath $pdffile, on page $page_number, and opts %opts
           (rect, border, color, <u>fit</u>: see descriptions below). This differs from the "link" call in that the
           target is found in a different PDF file, not the current document.

           $page_number is the physical page number, starting at 1: 1, 2,...

           <b>Alternate</b> <b>names:</b> "pdfile" and "pdf_file"

           Originally this method was named "pdfile", and then "pdf_file" but a recent PDF::API2 change made it
           "pdf". For compatibility, it has been changed to "pdf", with "pdfile" and "pdf_file" still available
           as aliases.

       <u>launch,</u> <u>file</u>

           $annotation-&gt;launch($file, %opts)

           Defines the annotation as a launch-file with filepath $file (a local file) and options %opts (rect,
           border, color: see descriptions below).  <u>How</u> the file is displayed depends on the operating system,
           type of file, and local configuration or mapping.

           <b>Alternate</b> <b>name:</b> "file"

           Originally this method was named "file", but a recent PDF::API2 change made it "launch". For
           compatibility, it has been changed to "launch", with "file" still available as an alias.

       <u>uri,</u> <u>url</u>

           $annotation-&gt;uri($url, %opts)

           Defines the annotation as a launch-url with url $url and options %opts (rect, border, color: see
           descriptions below).  This page is usually brought up in a browser, and may be remote.

           <b>Alternate</b> <b>name:</b> "url"

           Originally this method was named "url", but a recent PDF::API2 change made it "uri". For
           compatibility, it has been changed to "uri", with "url" still available as an alias.

       <u>text</u>

           $annotation-&gt;text($text, %opts)

           Defines the annotation as a text note with content string $text and options %opts (rect, color, text,
           open: see descriptions below).  The $text may include newlines \n for multiple lines. The option
           border is ignored, since an <u>icon</u> is used.

           The option "text" is the popup's label string, not to be confused with the main $text.

           The icon appears in the upper left corner of the "rect" selection rectangle, and its active clickable
           area is fixed by the icon (it is <u>not</u> equal to the rectangle). The icon size is fixed, and its fill
           color set by "color".

           Additional options:

       icon =&gt; name_string
       icon =&gt; reference
           Specify  the  <b>icon</b>  to  be  used.  The default is Reader-specific (usually "Note"), and others may be
           defined by the Reader. "Comment", "Key", "Help", "NewParagraph", "Paragraph", and "Insert"  are  also
           supposed to be available on all PDF Readers. Note that the name <u>case</u> must exactly match.  The icon is
           of fixed size.  Any <u>AP</u> dictionary entry will override the icon setting.

           A <u>reference</u> to an icon may be passed instead of a name.

       opacity =&gt; <u>value</u>
           Define  the  opacity  (non-transparency,  opaqueness)  of  the  icon.  This  value  ranges  from  0.0
           (transparent) to 1.0 (fully opaque), and applies to both the outline and the fill color. The  default
           is 1.0.

       <u>markup</u>

           $annotation-&gt;markup($text, $PointList, $highlight, %opts)

           Defines the annotation as a text note with content string $text and options %opts (color, text, open,
           opacity: see descriptions below).  The $text may include newlines \n for multiple lines.

           "text" is the popup's label string, not to be confused with the main $text.

           There is no icon. Instead, the annotated text marked by $PointList is highlighted in one of four ways
           specified by $highlight.

       $PointList =&gt; [ 8n numbers ]
           One  or  more sets of numeric coordinates are given, defining the quadrilateral (usually a rectangle)
           around the text to be highlighted and selectable (clickable, to bring up the annotation text).  These
           are  four  sets of "x,y" coordinates, given (for Left-to-Right text) as the upper bound Upper Left to
           Upper Right and then the lower bound Lower Left to Lower Right. <b>Note</b> <b>that</b> <b>this</b> <b>is</b> <b>different</b> <b>from</b> <b>what</b>
           <b>is</b> <b>(erroneously)</b> <b>documented</b> <b>in</b> <b>the</b> <b>PDF</b> <b>specification!</b> It is important that the coordinates  be  given
           in this order.

           Multiple  sets  of quadrilateral corners may be given, such as for highlighted text that wraps around
           to new line(s). The minimum is one set (8 numbers).   Any  <u>AP</u>  dictionary  entry  will  override  the
           $PointList  setting.  Finally,  the  "Rect"  selection  rectangle  is created <u>just</u> <u>outside</u> the convex
           bounding box defined by $PointList.

       $highlight =&gt; 'string'
           The following highlighting effects are permitted.  The  "string"  must  be  spelled  and  capitalized
           <u>exactly</u> as given:

           Highlight
               The effect of a translucent "highlighter" marker.

           Squiggly
               The effect is an underline written in a "squiggly" manner.

           StrikeOut
               The text is struck-through with a straight line.

           Underline
               The text is marked by a straight underline.

       color =&gt; <u>array</u> <u>of</u> <u>values</u>
           If  "color"  is not given (an array of numbers in the range 0.0-1.0), a medium gray should be used by
           default.  Named colors are not supported at this time.

       opacity =&gt; <u>value</u>
           Define  the  opacity  (non-transparency,  opaqueness)  of  the  icon.  This  value  ranges  from  0.0
           (transparent)  to 1.0 (fully opaque), and applies to both the outline and the fill color. The default
           is 1.0.

       <u>movie</u>

           $annotation-&gt;movie($file, $contentType, %opts)

           Defines the annotation as a movie from $file with content (MIME) type $contentType and options  %opts
           (rect, border, color, text: see descriptions below).

           The  "rect"  rectangle  also  serves as the area where the movie is played, so it should be of usable
           size and aspect ratio. It does not use a separate popup player. It is known to  play  .avi  and  .wav
           files  --  others have not been tested.  Using Adobe Reader, it will not play .mpg files (unsupported
           type). More work is probably needed on this annotation method.

       <u>file_attachment</u>

           $annotation-&gt;file_attachment($file, %opts)

           Defines the annotation as a file attachment with file $file  and  options  %opts  (rect,  color:  see
           descriptions  below).  Note  that  "color"  applies  to the icon fill color, not to a selectable area
           outline. The icon is resized (including aspect ratio changes) based on the selectable rectangle given
           by "rect", so watch your rectangle dimensions!

           The file, along with its name, is <u>embedded</u> in the PDF document and may be extracted for viewing  with
           the appropriate viewer.

           This  differs  from  the  "file"  method  in that "file" looks for and launches a file <u>already</u> on the
           Reader's machine, while "file_attachment" embeds the file in the PDF, and makes it available  on  the
           Reader's machine for actions of the user's choosing.

           <b>Note</b>  <b>1:</b> some Readers may only permit an "open" action, and may also restrict file types (extensions)
           that will be handled. This may be configurable with your Reader's security settings.

           <b>Note</b> <b>2:</b> the displayed file name (pop-up during mouse rollover of the target rectangle) is given  with
           the  <u>path</u> trimmed off (file name only). If you want the displayed name to exactly match the path that
           was passed to the call, including the path, give the "notrimpath" option.

           Options:

       icon =&gt; name_string
       icon =&gt; reference
           Specify the <b>icon</b> to be used. The default is Reader-specific (usually "PushPin"), and  others  may  be
           defined  by  the Reader. "Paperclip", "Graph", and "Tag" are also supposed to be available on all PDF
           Readers. Note that the name <u>case</u> must exactly match.  "None" is a custom invisible  icon  defined  by
           PDF::Builder.  The icon is stretched/squashed to fill the defined target rectangle, so take care when
           defining "rect" dimensions.  Any <u>AP</u> dictionary entry will override the icon setting.

           A <u>reference</u> to an icon may be passed instead of a name.

       opacity =&gt; <u>value</u>
           Define  the  opacity  (non-transparency,  opaqueness)  of  the  icon.  This  value  ranges  from  0.0
           (transparent) to 1.0 (fully opaque), and applies to both the outline and the fill color. The  default
           is 1.0.

       notrimpath =&gt; 1
           If given, show the entire path and file name on mouse rollover, rather than just the file name.

       text =&gt; string
           A text label for the popup (on mouseover) that contains the file name.

       Note  that  while  PDF  permits different specifications (paths) to DOS/Windows, Mac, and Unix (including
       Linux) versions of a file, and different format copies to be embedded, at  this  time  PDF::Builder  only
       permits  a  single file (format of your choice) to be embedded. If there is user demand for multiple file
       formats to be referenced and/or embedded, we could look into providing this, <u>although</u> <u>separate</u> <u>OS</u> <u>version</u>
       <u>paths</u> <u><b>may</b></u> <u>be</u> <u>considered</u> <u>obsolescent!</u>.

   <b>Internal</b> <b>routines</b> <b>and</b> <b>common</b> <b>options</b>
       <u>rect</u>

           $annotation-&gt;rect($llx,$lly, $urx,$ury)

           Sets the rectangle (active click area) of the annotation, given by 'rect' option. This is any pair of
           diagonally opposite corners of the rectangle.

           The default clickable area is the icon itself.

           Defining option. <u>Note</u> <u>that</u> <u>this</u> <u>"option"</u> <u>is</u> <u>actually</u> <u><b>required</b>.</u>

       rect =&gt; [LLx, LLy, URx, URy]
           Set annotation rectangle at "[LLx,LLy]" to "[URx,URy]" (lower left and upper right  coordinates).  LL
           to UR is customary, but any diagonal is allowed.

       <u>border</u>

           $annotation-&gt;border(@b)

           Sets  the  border-style  of  the  annotation, if applicable, as given by the border option. There are
           three entries in the array: horizontal and vertical corner radii,  and  border  width.   An  optional
           fourth entry (described below) may be used for a dashed or dotted line.

           A  border  is  used  in  annotations  where  text or some other material is put down, and a clickable
           rectangle is defined over it (rect). A border is not shown when an <b>icon</b> is being  used  to  mark  the
           clickable area.

           A  <u>PDF</u>  <u>Reader</u>  normally defaults to [0 0 1] (solid line of width 1, with sharp corners) if no border
           ("/Border") is specified. Keeping compatibility with PDF::API2's longstanding practice,  PDF::Builder
           defaults to no visible border "[0 0 0]" (solid line of width 0, and thus invisible).

           Defining option:

       border =&gt; [CRh, CRv, W]
       border =&gt; [CRh, CRv, W, [on, off...]]
           Note  that  the  square brackets [ and ] are literally <u>there</u>, indicating a vector or array of values.
           They do <b>not</b> indicate optional values!

           Set annotation <b>border</b> <b>style</b> of horizontal and vertical corner radii "CRh"  and  "CRv"  (value  0  for
           squared corners) and width "W" (value 0 for no border).  The PDF::Builder default is no border (while
           a <u>PDF</u> <u>Reader</u> typically defaults to no border ([0 0 0]), if no /Border entry is given).  Optionally, a
           dash  pattern  array may be given ("on" length, "off" length, as one or more <u>pairs</u>). The default is a
           solid line.

           The border vector seems to ignore the first two settings  (corner  radii),  but  the  line  thickness
           works, on basic Readers.  The corner radii <u>may</u> work on some other Readers.

       <u>content</u>

           $annotation-&gt;content(@lines)

           Sets the text-content of the "text()" annotation.  This is a text string or array of strings.

       <u>open</u>

           $annotation-&gt;open($bool)

           Display the "text()" annotation either open or closed, if applicable.

           Both  are  editable; the "open" form brings up the page with the entry area already open for editing,
           while "closed" has to be clicked on to edit it.

           Defining option:

       open =&gt; boolean
           If true (1), the annotation will be marked as initially "open".  If false (0), or the option  is  not
           given, the annotation is initially "closed".

       <u>dest</u>

           $annotation-&gt;dest($page, I&lt;fit_setting&gt;)

           For certain annotation types ("link" or "pdf_file"), the <u>fit_setting</u> specifies how the content of the
           page  $page  is  to  be fit to the window, while preserving its aspect ratio.  These fit settings are
           listed in "Page Fit Options" in PDF::Builder::Docs.

           "xyz" is the <b>default</b> fit setting, with position (left and top) and  zoom  the  same  as  the  calling
           page's ([undef, undef, undef]).

           $annotation-&gt;dest($name)

           Connect the Annotation to a "Named Destination" defined elsewhere, including the optional desired <u>fit</u>
           (default: xyz undef*3).

       <u>Color</u>

           $annotation-&gt;Color(@color)

           Set the icon's fill color. The color is an array of 1, 3, or 4 numbers, each in the range 0.0 to 1.0.
           If  1 number is given, it is the grayscale value (0 = black to 1 = white). If 3 numbers are given, it
           is an RGB color value. If 4 numbers are given, it is a CMYK  color  value.  Currently,  named  colors
           (strings) are not handled.

           For link and url annotations, this is the color of the rectangle border (border given with a width of
           at least 1).

           If  an invalid array length or numeric value is given, a medium gray ( [0.5] ) value is used, without
           any message. If no color is given, the usual fill color is black.

           Defining option:

           Named colors (e.g., 'black') are not supported at this time.

       color =&gt; [ ] or not 1, 3, or 4 numbers 0.0-1.0
           A medium gray (0.5 value) will be used if an invalid color is given.

       color =&gt; [ g ]
           If <u>g</u> is between 0.0 (black) and 1.0 (white), the fill color will be gray.

       color =&gt; [ r, g, b ]
           If <u>r</u> (red), <u>g</u> (green), and <u>b</u> (blue) are all between 0.0 and 1.0, the fill color will be  the  defined
           RGB hue. [ 0, 0, 0 ] is black, [ 1, 1, 0 ] is yellow, and [ 1, 1, 1 ] is white.

       color =&gt; [ c, m, y, k ]
           If  <u>c</u>  (red), <u>m</u> (magenta), <u>y</u> (yellow), and <u>k</u> (black) are all between 0.0 and 1.0, the fill color will
           be the defined CMYK hue. [ 0, 0, 0, 0 ] is white, [ 1, 0, 1, 0 ] is green, and [ 1,  1,  1,  1  ]  is
           black.

       <u>text</u> <u>string</u>

           text =&gt; string

           Specify  an  optional <b>text</b> <b>label</b> for annotation. This text or comment only shows up <u>as</u> <u>a</u> <u>title</u> in the
           pop-up containing the file or text.

perl v5.36.0                                       2023-12-15                      <u>PDF::Builder::<a href="../man3pm/Annotation.3pm.html">Annotation</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>