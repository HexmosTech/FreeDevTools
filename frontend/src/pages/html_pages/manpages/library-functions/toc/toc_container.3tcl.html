<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>doctools::toc - Holding tables of contents</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       doctools::toc - Holding tables of contents

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>doctools::toc</b> <b>?2?</b>

       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>doctools::toc::structure</b>

       package require <b>struct::tree</b>

       package require <b>snit</b>

       <b>::doctools::toc</b> <u>objectName</u>

       <b>objectName</b> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <u>objectName</u> <b>destroy</b>

       <u>objectName</u> <b>+</b> <b>reference</b> <u>id</u> <u>label</u> <u>docid</u> <u>desc</u>

       <u>objectName</u> <b>+</b> <b>division</b> <u>id</u> <u>label</u> ?<u>docid</u>?

       <u>objectName</u> <b>remove</b> <u>id</u>

       <u>objectName</u> <b>up</b> <u>id</u>

       <u>objectName</u> <b>next</b> <u>id</u>

       <u>objectName</u> <b>prev</b> <u>id</u>

       <u>objectName</u> <b>child</b> <u>id</u> <u>label</u> ?<u>...</u>?

       <u>objectName</u> <b>element</b> ?<u>...</u>?

       <u>objectName</u> <b>children</b> <u>id</u>

       <u>objectName</u> <b>type</b> <u>id</u>

       <u>objectName</u> <b>full-label</b> <u>id</u>

       <u>objectName</u> <b>elabel</b> <u>id</u> ?<u>newlabel</u>?

       <u>objectName</u> <b>description</b> <u>id</u> ?<u>newdesc</u>?

       <u>objectName</u> <b>document</b> <u>id</u> ?<u>newdocid</u>?

       <u>objectName</u> <b>title</b>

       <u>objectName</u> <b>title</b> <u>text</u>

       <u>objectName</u> <b>label</b>

       <u>objectName</u> <b>label</b> <u>text</u>

       <u>objectName</u> <b>importer</b>

       <u>objectName</u> <b>importer</b> <u>object</u>

       <u>objectName</u> <b>exporter</b>

       <u>objectName</u> <b>exporter</b> <u>object</u>

       <u>objectName</u> <b>deserialize</b> <b>=</b> <u>data</u> ?<u>format</u>?

       <u>objectName</u> <b>deserialize</b> <b>+=</b> <u>data</u> ?<u>format</u>?

       <u>objectName</u> <b>serialize</b> ?<u>format</u>?

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This package provides a class to contain and programmatically manipulate tables of contents.

       This  is  one  of the three public pillars the management of tables of contents resides on. The other two
       pillars are

       [1]    <u>Exporting</u> <u>tables</u> <u>of</u> <u>contents</u>, and

       [2]    <u>Importing</u> <u>tables</u> <u>of</u> <u>contents</u>

       For information about the <b>Concepts</b> of tables of contents, and their parts, see  the  same-named  section.
       For  information  about  the  data structure which is used to encode tables of contents as values see the
       section <b>ToC</b> <b>serialization</b> <b>format</b>.  This is the only format directly known to this class. Conversions from
       and to any other format are handled by export and import manager objects. These  may  be  attached  to  a
       container, but do not have to be, it is merely a convenience.

</pre><h4><b>CONCEPTS</b></h4><pre>
       [1]    A <u>table</u> <u>of</u> <u>contents</u> consists of a (possibly empty) list of <u>elements</u>.

       [2]    Each element in the list is identified by its label.

       [3]    Each element is either a <u>reference</u>, or a <u>division</u>.

       [4]    Each reference has an associated document, identified by a symbolic id, and a textual description.

       [5]    Each division may have an associated document, identified by a symbolic id.

       [6]    Each  division  consists  consists  of  a  (possibly  empty)  list  of <u>elements</u>, with each element
              following the rules as specified in item 2 and above.

       A few notes

       [1]    The above rules span up a tree of elements, with references as the leaf nodes,  and  divisions  as
              the inner nodes, and each element representing an entry in the whole table of contents.

       [2]    The  identifying  labels  of any element E are unique within their division (or toc), and the full
              label of any element E is the list of labels for all nodes on the unique path from the root of the
              tree to E, including E.

</pre><h4><b>API</b></h4><pre>
   <b>PACKAGE</b> <b>COMMANDS</b>
       <b>::doctools::toc</b> <u>objectName</u>
              This command creates a new  container  object  with  an  associated  Tcl  command  whose  name  is
              <u>objectName</u>.  This  <u>object</u>  command  is explained in full detail in the sections <b>Object</b> <b>command</b> and
              <b>Object</b> <b>methods</b>. The object command will be created under the current namespace if  the  <u>objectName</u>
              is not fully qualified, and in the specified namespace otherwise.

   <b>OBJECT</b> <b>COMMAND</b>
       All objects created by the <b>::doctools::toc</b> command have the following general form:

       <b>objectName</b> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?
              The  method  <b>method</b>  and  its <u>arg</u>'uments determine the exact behavior of the command.  See section
              <b>Object</b> <b>methods</b> for the detailed specifications.

   <b>OBJECT</b> <b>METHODS</b>
       <u>objectName</u> <b>destroy</b>
              This method destroys the object it is invoked for.

       <u>objectName</u> <b>+</b> <b>reference</b> <u>id</u> <u>label</u> <u>docid</u> <u>desc</u>
              This method adds a new reference element to the table of contents, under the element specified via
              its handle <u>id</u>. This parent element has to be a division element, or the root. An error  is  thrown
              otherwise.   The new element will be externally identified by its <u>label</u>, which has to be be unique
              within the parent element. An error is thrown otherwise.

              As a reference element it will refer  to  a  document  identified  by  the  symbolic  <u>docid</u>.  This
              reference  must  not  be  the  empty  string,  an error is thrown otherwise.  Beyond the label the
              element also has a longer descriptive string, supplied via <u>desc</u>.

              The result of the method is the handle (id) of the new element.

       <u>objectName</u> <b>+</b> <b>division</b> <u>id</u> <u>label</u> ?<u>docid</u>?
              This method adds a new division element to the table of contents, under the element specified  via
              its  handle  <u>id</u>. This parent element has to be a division element, or the root. An error is thrown
              otherwise.  The new element will be externally identified by its <u>label</u>, which has to be be  unique
              within the parent element. An error is thrown otherwise.

              As  a  division  element  it is can refer to a document, identified by the symbolic <u>docid</u>, but may
              choose not to.

              The result of the method is the handle (id) of the new element.

       <u>objectName</u> <b>remove</b> <u>id</u>
              This method removes the element identified by the handle <u>id</u> from the table of  contents.   If  the
              element  is a division all of its children, if any, are removed as well. The root element/division
              of the table of contents cannot be removed however, only its children.

              The result of the method is the empty string.

       <u>objectName</u> <b>up</b> <u>id</u>
              This method returns the handle of the parent for the element identified by its handle <u>id</u>,  or  the
              empty string if <u>id</u> referred to the root element.

       <u>objectName</u> <b>next</b> <u>id</u>
              This  method  returns the handle of the right sibling for the element identified by its handle <u>id</u>,
              or the handle of the parent if the element has no  right  sibling,  or  the  empty  string  if  <u>id</u>
              referred to the root element.

       <u>objectName</u> <b>prev</b> <u>id</u>
              This method returns the handle of the left sibling for the element identified by its handle <u>id</u>, or
              the handle of the parent if the element has no left sibling, or the empty string if <u>id</u> referred to
              the root element.

       <u>objectName</u> <b>child</b> <u>id</u> <u>label</u> ?<u>...</u>?
              This  method  returns  the handle of a child of the element identified by its handle <u>id</u>. The child
              itself is identified by a series of labels.

       <u>objectName</u> <b>element</b> ?<u>...</u>?
              This method returns the handle of the element identified by a series of labels, starting from  the
              root  of  the  table  of  contents. The series of labels is allowed to be empty, in which case the
              handle of the root element is returned.

       <u>objectName</u> <b>children</b> <u>id</u>
              This method returns a list containing the handles of all children of the element identified by the
              handle <u>id</u>, from first to last, in that order.

       <u>objectName</u> <b>type</b> <u>id</u>
              This method returns the type of the element, either <b>reference</b>, or <b>division</b>.

       <u>objectName</u> <b>full-label</b> <u>id</u>
              This method is the complement of the method <b>element</b>, converting the handle <u>id</u> of an element into a
              list of labels full identifying the element within the whole table of contents.

       <u>objectName</u> <b>elabel</b> <u>id</u> ?<u>newlabel</u>?
              This method queries and/or changes the label of the element identified by the handle  <u>id</u>.  If  the
              argument  <u>newlabel</u>  is  present  then  the label is changed to that value. Regardless of this, the
              result of the method is the current value of the label.

              If the label is changed the new label has to be unique within the containing division, or an error
              is thrown.

              Further, of the <u>id</u> refers to the root element of the table of contents, then using this method  is
              equivalent to using the method <u>label</u>, i.e. it is accessing the global label for the whole table.

       <u>objectName</u> <b>description</b> <u>id</u> ?<u>newdesc</u>?
              This  method queries and/or changes the description of the element identified by the handle <u>id</u>. If
              the argument <u>newdesc</u> is present then the description is changed to that value. Regardless of this,
              the result of the method is the current value of the description.

              The element this method operates on has to be a reference element, or an error will be thrown.

       <u>objectName</u> <b>document</b> <u>id</u> ?<u>newdocid</u>?
              This method queries and/or changes the document reference of the element identified by the  handle
              <u>id</u>.  If the argument <u>newdocid</u> is present then the description is changed to that value. Regardless
              of this, the result of the method is the current value of the document reference.

              Setting  the  reference  to  the empty string means unsetting it, and is allowed only for division
              elements. Conversely, if the result  is  the  empty  string  then  the  element  has  no  document
              reference, and this can happen only for division elements.

       <u>objectName</u> <b>title</b>
              Returns the currently defined title of the table of contents.

       <u>objectName</u> <b>title</b> <u>text</u>
              Sets the title of the table of contents to <u>text</u>, and returns it as the result of the command.

       <u>objectName</u> <b>label</b>
              Returns the currently defined label of the table of contents.

       <u>objectName</u> <b>label</b> <u>text</u>
              Sets the label of the table of contents to <u>text</u>, and returns it as the result of the command.

       <u>objectName</u> <b>importer</b>
              Returns the import manager object currently attached to the container, if any.

       <u>objectName</u> <b>importer</b> <u>object</u>
              Attaches  the  <u>object</u>  as  import  manager  to  the container, and returns it as the result of the
              command.  Note that the <u>object</u> is <u>not</u> put into ownership of the container.  I.e.,  destruction  of
              the container will <u>not</u> destroy the <u>object</u>.

              It  is  expected  that  <u>object</u> provides a method named <b>import</b> <b>text</b> which takes a text and a format
              name, and returns the canonical serialization of the table of  contents  contained  in  the  text,
              assuming the given format.

       <u>objectName</u> <b>exporter</b>
              Returns the export manager object currently attached to the container, if any.

       <u>objectName</u> <b>exporter</b> <u>object</u>
              Attaches  the  <u>object</u>  as  export  manager  to  the container, and returns it as the result of the
              command.  Note that the <u>object</u> is <u>not</u> put into ownership of the container.  I.e.,  destruction  of
              the container will <u>not</u> destroy the <u>object</u>.

              It  is  expected that <u>object</u> provides a method named <b>export</b> <b>object</b> which takes the container and a
              format name, and returns a text encoding table of contents stored in the container, in  the  given
              format. It is further expected that the <u>object</u> will use the container's method <b>serialize</b> to obtain
              the serialization of the table of contents from which to generate the text.

       <u>objectName</u> <b>deserialize</b> <b>=</b> <u>data</u> ?<u>format</u>?
              This  method replaces the contents of the table object with the table contained in the <u>data</u>. If no
              <u>format</u> was specified it is assumed to be the regular serialization of a table of contents.

              Otherwise the object will use the attached import manager to convert the data from  the  specified
              format  to  a  serialization it can handle.  In that case an error will be thrown if the container
              has no import manager attached to it.

              The result of the method is the empty string.

       <u>objectName</u> <b>deserialize</b> <b>+=</b> <u>data</u> ?<u>format</u>?
              This method behaves like <b>deserialize</b> <b>=</b> in its essentials, except  that  it  merges  the  table  of
              contents  in  the <u>data</u> to its contents instead of replacing it.  The method will throw an error if
              merging is not possible, i.e. would produce  an  invalid  table.  The  existing  content  is  left
              unchanged in that case.

              The result of the method is the empty string.

       <u>objectName</u> <b>serialize</b> ?<u>format</u>?
              This  method  returns the table of contents contained in the object. If no <u>format</u> is not specified
              the returned result is the canonical serialization of its contents.

              Otherwise the object will use the attached export manager to convert the  data  to  the  specified
              format.   In  that case an error will be thrown if the container has no export manager attached to
              it.

</pre><h4><b>TOC</b> <b>SERIALIZATION</b> <b>FORMAT</b></h4><pre>
       Here we specify the format used by the doctools v2 packages to serialize tables of contents as  immutable
       values for transport, comparison, etc.

       We  distinguish  between  <u>regular</u>  and <u>canonical</u> serializations.  While a table of contents may have more
       than one regular serialization only exactly one of them will be <u>canonical</u>.

       regular serialization

              [1]    The serialization of any table of contents is a nested Tcl dictionary.

              [2]    This dictionary holds a single key, <b>doctools::toc</b>, and its  value.  This  value  holds  the
                     contents of the table of contents.

              [3]    The  contents  of the table of contents are a Tcl dictionary holding the title of the table
                     of contents, a label, and its elements. The relevant keys and their values are

                     <b>title</b>  The value is a string containing the title of the table of contents.

                     <b>label</b>  The value is a string containing a label for the table of contents.

                     <b>items</b>  The value is a Tcl list holding the elements of the table, in the order they are  to
                            be shown.

                            Each  element  is  a  Tcl list holding the type of the item, and its description, in
                            this order. An alternative description would be that it is a Tcl dictionary  holding
                            a single key, the item type, mapped to the item description.

                            The two legal item types and their descriptions are

                            <b>reference</b>
                                   This  item  describes  a single entry in the table of contents, referencing a
                                   single document.  To this end its value is a Tcl dictionary containing an  id
                                   for  the referenced document, a label, and a longer textual description which
                                   can be associated with the entry.  The relevant keys and their values are

                                   <b>id</b>     The value is a string containing the id  of  the  document  associated
                                          with the entry.

                                   <b>label</b>  The  value  is a string containing a label for this entry. This string
                                          also  identifies  the  entry,  and  no  two  entries  (references  and
                                          divisions) in the containing list are allowed to have the same label.

                                   <b>desc</b>   The value is a string containing a longer description for this entry.

                            <b>division</b>
                                   This  item  describes a group of entries in the table of contents, inducing a
                                   hierarchy of entries.  To this end its value is a Tcl dictionary containing a
                                   label for the group, an optional id to a document for the  whole  group,  and
                                   the list of entries in the group.  The relevant keys and their values are

                                   <b>id</b>     The  value  is  a  string containing the id of the document associated
                                          with the whole group. This key is optional.

                                   <b>label</b>  The value is a string containing a label for the  group.  This  string
                                          also  identifies  the  entry,  and  no  two  entries  (references  and
                                          divisions) in the containing list are allowed to have the same label.

                                   <b>items</b>  The value is a Tcl list holding the elements  of  the  group,  in  the
                                          order  they  are to be shown.  This list has the same structure as the
                                          value for the keyword <b>items</b>  used  to  describe  the  whole  table  of
                                          contents,  see  above.  This  closes  the  recusrive definition of the
                                          structure, with divisions holding the same type  of  elements  as  the
                                          whole table of contents, including other divisions.

       canonical serialization
              The  canonical  serialization  of  a table of contents has the format as specified in the previous
              item, and then additionally satisfies the constraints below, which make it unique  among  all  the
              possible serializations of this table of contents.

              [1]    The keys found in all the nested Tcl dictionaries are sorted in ascending dictionary order,
                     as generated by Tcl's builtin command <b>lsort</b> <b>-increasing</b> <b>-dict</b>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category  <u>doctools</u>  of  the  <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       HTML, TMML, conversion, doctoc markup, documentation, formatting, generation, json, latex, markup, nroff,
       parsing, plugin, reference, table, table of contents, tcler's wiki, text, wiki

</pre><h4><b>CATEGORY</b></h4><pre>
       Documentation tools

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2009 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                  2                                    <u>doctools::<a href="../man3tcl/toc.3tcl.html">toc</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>