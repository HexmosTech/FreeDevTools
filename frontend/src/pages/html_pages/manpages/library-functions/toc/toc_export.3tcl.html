<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>doctools::toc::export - Exporting tables of contents</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       doctools::toc::export - Exporting tables of contents

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>doctools::toc::export</b> <b>?0.2.2?</b>

       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>struct::map</b>

       package require <b>doctools::toc::structure</b>

       package require <b>snit</b>

       package require <b>pluginmgr</b>

       <b>::doctools::toc::export</b> <u>objectName</u>

       <b>objectName</b> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <u>objectName</u> <b>destroy</b>

       <u>objectName</u> <b>export</b> <b>serial</b> <u>serial</u> ?<u>format</u>?

       <u>objectName</u> <b>export</b> <b>object</b> <u>object</u> ?<u>format</u>?

       <u>objectName</u> <b>config</b> <b>names</b>

       <u>objectName</u> <b>config</b> <b>get</b>

       <u>objectName</u> <b>config</b> <b>set</b> <u>name</u> ?<u>value</u>?

       <u>objectName</u> <b>config</b> <b>unset</b> <u>pattern</u>...

       <b>export</b> <u>serial</u> <u>configuration</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides  a  class  to  manage  the  plugins for the export of tables of contents to other
       formats, i.e. their conversion to, for example <u>doctoc</u>, <u>HTML</u>, etc.

       This is one of the three public pillars the management of tables of contents resides on.  The  other  two
       pillars are

       [1]    <u>Importing</u> <u>tables</u> <u>of</u> <u>contents</u>, and

       [2]    <u>Holding</u> <u>tables</u> <u>of</u> <u>contents</u>

       For  information  about  the <b>Concepts</b> of tables of contents, and their parts, see the same-named section.
       For information about the data structure which is the major input to the manager objects provided by this
       package see the section <b>ToC</b> <b>serialization</b> <b>format</b>.

       The plugin system of our class is based on the package <b>pluginmgr</b>, and  configured  to  look  for  plugins
       using

       [1]    the environment variable <b>DOCTOOLS_TOC_EXPORT_PLUGINS</b>,

       [2]    the environment variable <b>DOCTOOLS_TOC_PLUGINS</b>,

       [3]    the environment variable <b>DOCTOOLS_PLUGINS</b>,

       [4]    the path "<u><a href="file:~/.doctools/toc/export/plugin">~/.doctools/toc/export/plugin</a></u>"

       [5]    the path "<u><a href="file:~/.doctools/toc/plugin">~/.doctools/toc/plugin</a></u>"

       [6]    the path "<u><a href="file:~/.doctools/plugin">~/.doctools/plugin</a></u>"

       [7]    the path "<u><a href="file:~/.doctools/toc/export/plugins">~/.doctools/toc/export/plugins</a></u>"

       [8]    the path "<u><a href="file:~/.doctools/toc/plugins">~/.doctools/toc/plugins</a></u>"

       [9]    the path "<u><a href="file:~/.doctools/plugins">~/.doctools/plugins</a></u>"

       [10]   the registry entry "HKEY_CURRENT_USER\SOFTWARE\DOCTOOLS\TOC\EXPORT\PLUGINS"

       [11]   the registry entry "HKEY_CURRENT_USER\SOFTWARE\DOCTOOLS\TOC\PLUGINS"

       [12]   the registry entry "HKEY_CURRENT_USER\SOFTWARE\DOCTOOLS\PLUGINS"

       The last three are used only when the package is run on a machine using Windows(tm) operating system.

       The whole system is delivered with six predefined export plugins, namely

       doctoc See <u>doctoc</u> <u>export</u> <u>plugin</u> for details.

       html   See <u>html</u> <u>export</u> <u>plugin</u> for details.

       json   See <u>json</u> <u>export</u> <u>plugin</u> for details.

       nroff  See <u>nroff</u> <u>export</u> <u>plugin</u> for details.

       text   See <u>text</u> <u>export</u> <u>plugin</u> for details.

       wiki   See <u>wiki</u> <u>export</u> <u>plugin</u> for details.

       Readers  wishing  to  write  their  own  export  plugin for some format, i.e.  <u>plugin</u> <u>writer</u>s reading and
       understanding the section containing the <b>Export</b> <b>plugin</b> <b>API</b> <b>v2</b> <b>reference</b> is an absolute necessity,  as  it
       specifies the interaction between this package and its plugins in detail.

</pre><h4><b>CONCEPTS</b></h4><pre>
       [1]    A <u>table</u> <u>of</u> <u>contents</u> consists of a (possibly empty) list of <u>elements</u>.

       [2]    Each element in the list is identified by its label.

       [3]    Each element is either a <u>reference</u>, or a <u>division</u>.

       [4]    Each reference has an associated document, identified by a symbolic id, and a textual description.

       [5]    Each division may have an associated document, identified by a symbolic id.

       [6]    Each  division  consists  consists  of  a  (possibly  empty)  list  of <u>elements</u>, with each element
              following the rules as specified in item 2 and above.

       A few notes

       [1]    The above rules span up a tree of elements, with references as the leaf nodes,  and  divisions  as
              the inner nodes, and each element representing an entry in the whole table of contents.

       [2]    The  identifying  labels  of any element E are unique within their division (or toc), and the full
              label of any element E is the list of labels for all nodes on the unique path from the root of the
              tree to E, including E.

</pre><h4><b>API</b></h4><pre>
   <b>PACKAGE</b> <b>COMMANDS</b>
       <b>::doctools::toc::export</b> <u>objectName</u>
              This command creates a new export manager object with an associated  Tcl  command  whose  name  is
              <u>objectName</u>.  This  <u>object</u>  command  is explained in full detail in the sections <b>Object</b> <b>command</b> and
              <b>Object</b> <b>methods</b>. The object command will be created under the current namespace if  the  <u>objectName</u>
              is not fully qualified, and in the specified namespace otherwise.

   <b>OBJECT</b> <b>COMMAND</b>
       All objects created by the <b>::doctools::toc::export</b> command have the following general form:

       <b>objectName</b> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?
              The  method  <b>method</b>  and  its <u>arg</u>'uments determine the exact behavior of the command.  See section
              <b>Object</b> <b>methods</b> for the detailed specifications.

   <b>OBJECT</b> <b>METHODS</b>
       <u>objectName</u> <b>destroy</b>
              This method destroys the object it is invoked for.

       <u>objectName</u> <b>export</b> <b>serial</b> <u>serial</u> ?<u>format</u>?
              This method takes the canonical serialization of a table of contents stored in <u>serial</u> and converts
              it to the specified <u>format</u>, using the export plugin for the format.  An  error  is  thrown  if  no
              plugin  could be found for the format.  The string generated by the conversion process is returned
              as the result of this method.

              If no format is specified the method defaults to <b>doctoc</b>.

              The specification of  what  a  <u>canonical</u>  serialization  is  can  be  found  in  the  section  <b>ToC</b>
              <b>serialization</b> <b>format</b>.

              The plugin has to conform to the interface specified in section <b>Export</b> <b>plugin</b> <b>API</b> <b>v2</b> <b>reference</b>.

       <u>objectName</u> <b>export</b> <b>object</b> <u>object</u> ?<u>format</u>?
              This  method  is  a  convenient  wrapper around the <b>export</b> <b>serial</b> method described by the previous
              item.  It expects that <u>object</u> is an object command supporting a  <b>serialize</b>  method  returning  the
              canonical  serialization  of  a  table  of contents. It invokes that method, feeds the result into
              <b>export</b> <b>serial</b> and returns the resulting string as its own result.

       <u>objectName</u> <b>config</b> <b>names</b>
              This method returns a list containing the names of all configuration variables currently known  to
              the object.

       <u>objectName</u> <b>config</b> <b>get</b>
              This  method  returns  a dictionary containing the names and values of all configuration variables
              currently known to the object.

       <u>objectName</u> <b>config</b> <b>set</b> <u>name</u> ?<u>value</u>?
              This method sets the configuration variable <u>name</u> to the specified <u>value</u> and returns the new  value
              of the variable.

              If no value is specified it simply returns the current value, without changing it.

              Note  that  while the user can set the predefined configuration variables <b>user</b> and <b>format</b> doing so
              will have no effect, these values will be internally overridden when invoking an import plugin.

       <u>objectName</u> <b>config</b> <b>unset</b> <u>pattern</u>...
              This method unsets all configuration variables matching the specified glob <u>pattern</u>s. If no pattern
              is specified it will unset all currently defined configuration variables.

</pre><h4><b>EXPORT</b> <b>PLUGIN</b> <b>API</b> <b>V2</b> <b>REFERENCE</b></h4><pre>
       Plugins are what this package  uses  to  manage  the  support  for  any  output  format  beyond  the  <b>ToC</b>
       <b>serialization</b>  <b>format</b>.  Here  we specify the API the objects created by this package use to interact with
       their plugins.

       A plugin for this package has to follow the rules listed below:

       [1]    A plugin is a package.

       [2]    The name of a plugin package has the form doctools::toc::export::<b>FOO</b>, where <b>FOO</b> is the name of the
              format the plugin will generate output for. This name is also  the  argument  to  provide  to  the
              various  <b>export</b>  methods of export manager objects to get a string encoding a table of contents in
              that format.

       [3]    The plugin can expect that the package <b>doctools::toc::export::plugin</b> is present, as indicator that
              it was invoked from a genuine plugin manager.

       [4]    A plugin has to provide one command, with the signature shown below.

              <b>export</b> <u>serial</u> <u>configuration</u>
                     Whenever an export manager of <b>doctools::toc</b> has to generate output for a table of  contents
                     it will invoke this command.

                     string <u>serial</u>
                            This  argument will contain the <u>canonical</u> serialization of the table of contents for
                            which to generate the output.  The specification of what a  <u>canonical</u>  serialization
                            is can be found in the section <b>ToC</b> <b>serialization</b> <b>format</b>.

                     dictionary <u>configuration</u>
                            This  argument will contain the current configuration to apply to the generation, as
                            a dictionary mapping from variable names to values.

                            The following configuration variables have a predefined meaning all plugins have  to
                            obey, although they can ignore this information at their discretion. Any other other
                            configuration  variables recognized by a plugin will be described in the manpage for
                            that plugin.

                            user   This variable is expected to contain the name of the user owning the  process
                                   invoking the plugin.

                            format This  variable  is expected to contain the name of the format whose plugin is
                                   invoked.

                            file   This variable, if defined by the user of the  table  object  is  expected  to
                                   contain  the  name  of  the input file for which the plugin is generating its
                                   output for.

                            map    This variable, if defined by the user of the  table  object  is  expected  to
                                   contain  a  dictionary  mapping  from symbolic document ids used in the table
                                   entries to actual paths (or urls). A plugin has to  be  able  to  handle  the
                                   possibility that a document id is without entry in this mapping.

       [5]    A  single usage cycle of a plugin consists of the invokations of the command <b>export</b>. This call has
              to leave the plugin in a state where another usage cycle can be run without problems.

</pre><h4><b>TOC</b> <b>SERIALIZATION</b> <b>FORMAT</b></h4><pre>
       Here we specify the format used by the doctools v2 packages to serialize tables of contents as  immutable
       values for transport, comparison, etc.

       We  distinguish  between  <u>regular</u>  and <u>canonical</u> serializations.  While a table of contents may have more
       than one regular serialization only exactly one of them will be <u>canonical</u>.

       regular serialization

              [1]    The serialization of any table of contents is a nested Tcl dictionary.

              [2]    This dictionary holds a single key, <b>doctools::toc</b>, and its  value.  This  value  holds  the
                     contents of the table of contents.

              [3]    The  contents  of the table of contents are a Tcl dictionary holding the title of the table
                     of contents, a label, and its elements. The relevant keys and their values are

                     <b>title</b>  The value is a string containing the title of the table of contents.

                     <b>label</b>  The value is a string containing a label for the table of contents.

                     <b>items</b>  The value is a Tcl list holding the elements of the table, in the order they are  to
                            be shown.

                            Each  element  is  a  Tcl list holding the type of the item, and its description, in
                            this order. An alternative description would be that it is a Tcl dictionary  holding
                            a single key, the item type, mapped to the item description.

                            The two legal item types and their descriptions are

                            <b>reference</b>
                                   This  item  describes  a single entry in the table of contents, referencing a
                                   single document.  To this end its value is a Tcl dictionary containing an  id
                                   for  the referenced document, a label, and a longer textual description which
                                   can be associated with the entry.  The relevant keys and their values are

                                   <b>id</b>     The value is a string containing the id  of  the  document  associated
                                          with the entry.

                                   <b>label</b>  The  value  is a string containing a label for this entry. This string
                                          also  identifies  the  entry,  and  no  two  entries  (references  and
                                          divisions) in the containing list are allowed to have the same label.

                                   <b>desc</b>   The value is a string containing a longer description for this entry.

                            <b>division</b>
                                   This  item  describes a group of entries in the table of contents, inducing a
                                   hierarchy of entries.  To this end its value is a Tcl dictionary containing a
                                   label for the group, an optional id to a document for the  whole  group,  and
                                   the list of entries in the group.  The relevant keys and their values are

                                   <b>id</b>     The  value  is  a  string containing the id of the document associated
                                          with the whole group. This key is optional.

                                   <b>label</b>  The value is a string containing a label for the  group.  This  string
                                          also  identifies  the  entry,  and  no  two  entries  (references  and
                                          divisions) in the containing list are allowed to have the same label.

                                   <b>items</b>  The value is a Tcl list holding the elements  of  the  group,  in  the
                                          order  they  are to be shown.  This list has the same structure as the
                                          value for the keyword <b>items</b>  used  to  describe  the  whole  table  of
                                          contents,  see  above.  This  closes  the  recusrive definition of the
                                          structure, with divisions holding the same type  of  elements  as  the
                                          whole table of contents, including other divisions.

       canonical serialization
              The  canonical  serialization  of  a table of contents has the format as specified in the previous
              item, and then additionally satisfies the constraints below, which make it unique  among  all  the
              possible serializations of this table of contents.

              [1]    The keys found in all the nested Tcl dictionaries are sorted in ascending dictionary order,
                     as generated by Tcl's builtin command <b>lsort</b> <b>-increasing</b> <b>-dict</b>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category  <u>doctools</u>  of  the  <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       HTML,  conversion,  doctoc,  documentation, export, formatting, generation, json, manpage, markup, nroff,
       plugin, reference, table, table of contents, tcler's wiki, text, url, wiki

</pre><h4><b>CATEGORY</b></h4><pre>
       Documentation tools

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2009-2019 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                0.2.2                          <u>doctools::toc::<a href="../man3tcl/export.3tcl.html">export</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>