<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QmcIndom - container for a instance domain description</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>QmcIndom</b> - container for a instance domain description

</pre><h4><b>C++</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;QmcIndom.h&gt;</b>

       <b>c++</b> <b>...</b> <b>-lpcp_qmc</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A  <b>QmcIndom</b>  object  represents  a  <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3)  instance  domain.   This  includes a description of all the
       instances in the instance domain.

       A <b>QmcInstance</b> is a structure used to describe each instance in the instance domain.  This includes:

          - internal identifier. If this is less than zero, the instance is treated  as  a  NULL  entry  in  the
          instance table.

          - external name

          - reference count, i.e. the number of <b>QmcMetric</b> objects referring to this instance.

          -  the  likely  position  of  the  instance  in  the <b>pmResult</b> from a <b><a href="../man3/pmFetch.3.html">pmFetch</a></b>(3).  This is also used to
          indicate the position of the next NULL instance in the instance table, if this entry is also NULL.

          - a flag indicating if the instance was in the last <b><a href="../man3/pmGetInDom.3.html">pmGetInDom</a></b>(3).

       The <b>QmcIndom</b> object has a list of <b>QmcInstance</b> structures, and  various  flags  and  counters  to  support
       dynamic  instance  domains  where  instances  may  come  and  go  with  each  fetch and efficient profile
       generation.

</pre><h4><b>CONSTRUCTORS</b></h4><pre>
       <b>QmcIndom::QmcIndom(int</b> <b>type,</b> <b>QmcDesc</b> <b>&amp;desc);</b>
           Calls <b><a href="../man3/pmGetInDom.3.html">pmGetInDom</a></b>(3) and <b><a href="../man3/pmGetInDomArchive.3.html">pmGetInDomArchive</a></b>(3) for host and  archive  contexts  to  obtain  the  entire
           instance list for the instance domain of <u>type</u> and identified in <u>desc</u>.

</pre><h4><b>DYNAMIC</b> <b>INDOMS</b></h4><pre>
       The  support  of  dynamic  instance  domains  for  live  contexts  is  complex  since many metrics may be
       referencing any of the instances in the domain.  Therefore  the  instance  list  may  be  sparse  as  the
       position of instances in the list must be maintained.

       When  the  instance  domain is updated, instances may be removed from the list if they are not in the new
       instance list (as returned by <b><a href="../man3/pmGetInDom.3.html">pmGetInDom</a></b>(3)) and is not referenced by any metrics. Each instance  in  the
       new  list  is  then compared with the old list to determine which instances are still active, and any new
       instances need to be added.  An instance is considered  the  same  if  both  the  internal  and  external
       identifiers  are  the  same.  New instances are first inserted into positions of deleted instances before
       being appended to the list.

       This algorithm is expensive (potentially O(N^2)).

       <b>bool</b> <b>changed()</b> <b>const;</b>
           Returns <b>true</b> if the instance domain may have changed in the last fetch.

       <b>void</b> <b>newFetch();</b>
           Reset the flags that may have indicated that the instance domain had  changed.   This  is  called  by
           <b>QmcContext::fetch</b>.

       <b>void</b> <b>hasChanged();</b>
           Set  the  flags  to  indicate  that  the  instance  domain  may  have  changed.   This  is  called by
           <b>QmcMetric::extractValues</b>.

       <b>int</b> <b>update();</b>
           Update the instance domain as described above. On subsequent  calls,  before  the  next  fetch,  this
           method  will  remove  any  instances that are no longer referenced without updating the instance list
           with a <b><a href="../man3/pmGetInDom.3.html">pmGetInDom</a></b>(3) call.

       <b>uint_t</b> <b>numInsts()</b> <b>const;</b>
           Returns the number of instances that are not NULL.

       <b>uint_t</b> <b>numActiveInsts()</b> <b>const;</b>
           Returns the number of instances that are active according to the last <b>QmcIndom::update</b> call.

       <b>uint_t</b> <b>listLen()</b> <b>const;</b>
           Returns the length of the instance list, including NULL instances.

</pre><h4><b>PROFILES</b></h4><pre>
       The  algorithm  for   determining   the   most   compact   profile   uses   the   number   of   instances
       (<b>_instances.length()</b>),  the  number  of  referenced  instances  (<b>_count</b>),  the number of active instances
       (<b>_numActive</b>) and the number of referenced active instances (<b>_numActiveRef</b>).

               if (all active instances are referenced
                   or there are no active instances)

                       request all instances implicitly

               else if (the number of referenced instances
                        is less than the number of active
                        instances that are not referenced)

                       delete all instances from profile
                       add all referenced instances

               else

                       add all instances to profile
                       delete all instances that are not referenced

       <b>bool</b> <b>diffProfile()</b> <b>const;</b>
           Returns <b>true</b> if the profile has potentially changed since the last call to <b>QmcIndom::genProfile</b>.

       <b>int</b> <b>genProfile();</b>
           Generates a new profile for the instance domain. a <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3) error code is  returned  if  the  profile
           failed.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error  messages are generated using <b><a href="../man3/pmprintf.3.html">pmprintf</a></b>(3) but are not flushed. It is the responsibility of the user
       to call <b><a href="../man3/pmflush.3.html">pmflush</a></b>(3) to output any messages.

       Additional diagnostics may be activated by adding the options <b>pmc</b> and/or <b>indom</b> to  the  global  debugging
       specification, as described in <b><a href="../man3/pmSetDebug.3.html">pmSetDebug</a></b>(3).

</pre><h4><b>BUGS</b></h4><pre>
       Users  have  no  control over the algorithm used to generate the profile. In the case of <u>proc</u> metrics, an
       implicit profile could be generated if all process instances are required, even though this  will  result
       in no values being returned in the fetch.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3),   <b><a href="../man3/QMC.3.html">QMC</a></b>(3),  <b><a href="../man3/QmcContext.3.html">QmcContext</a></b>(3),  <b><a href="../man3/QmcDesc.3.html">QmcDesc</a></b>(3),  <b><a href="../man3/QmcMetric.3.html">QmcMetric</a></b>(3),  <b><a href="../man3/pmFetch.3.html">pmFetch</a></b>(3),  <b><a href="../man3/pmflush.3.html">pmflush</a></b>(3),  <b><a href="../man3/pmGetInDom.3.html">pmGetInDom</a></b>(3),
       <b><a href="../man3/pmGetInDomArchive.3.html">pmGetInDomArchive</a></b>(3) and <b><a href="../man3/pmprintf.3.html">pmprintf</a></b>(3).

Performance Co-Pilot                                   SGI                                           <u><a href="../man3/QMCINDOM.3.html">QMCINDOM</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>