<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>io_uring_prep_cmd_discard - prepare a discard command</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liburing-dev">liburing-dev_2.9-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       io_uring_prep_cmd_discard - prepare a discard command

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;liburing.h&gt;</b>

       <b>void</b> <b>io_uring_prep_cmd_discard(struct</b> <b>io_uring_sqe</b> <b>*</b><u>sqe</u><b>,</b>
                                 <b>int</b> <u>fd</u><b>,</b>
                                 <b>uint64_t</b> <u>offset</u><b>,</b>
                                 <b>uint64_t</b> <u>nbytes</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man3/io_uring_prep_cmd_discard.3.html">io_uring_prep_cmd_discard</a></b>(3) function prepares a discard command request. The submission queue entry
       <u>sqe</u> is setup to use the file descriptor <u>fd</u> to start discarding <u>nbytes</u> at the specified <u>offset</u>.

       The command is an asynchronous equivalent of <b>BLOCK_URING_CMD_DISCARD</b> ioctl with  a  few  differences.  It
       allows  multiple  parallel discards, and it does not exclude concurrent writes and reads. As a result, it
       may lead to races for the data on the disk, if the application has IO inflight for the same  ranges  that
       the  discard  operates  on.  It's  the user's responsibility to account for that.  Furthermore, only best
       efforts are done to invalidate page caches. The user has to make sure that no other inflight requests are
       modifying or reading the range(s). If that is the case, it might result in  stale  page  cache  and  data
       inconsistencies.

       Available since 6.12.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       None

</pre><h4><b>ERRORS</b></h4><pre>
       The CQE <u>res</u> field will contain the result of the operation. On success, this field will be set to <b>0</b> <b>.</b>  On
       error,  a  negative  error  value is returned. Note that where synchronous system calls will return <b>-1</b> on
       failure and set <u>errno</u> to the actual error value, io_uring never  uses  <u>errno</u>.   Instead  it  returns  the
       negated <u>errno</u> directly in the CQE <u>res</u> field.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/io_uring_get_sqe.3.html">io_uring_get_sqe</a></b>(3), <b><a href="../man3/io_uring_submit.3.html">io_uring_submit</a></b>(3),

liburing-2.8                                      Oct 13, 2024                      <u><a href="../man3/io_uring_prep_cmd_discard.3.html">io_uring_prep_cmd_discard</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>