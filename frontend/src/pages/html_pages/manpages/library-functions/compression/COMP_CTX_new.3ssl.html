<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COMP_CTX_new, COMP_CTX_get_method, COMP_CTX_get_type, COMP_get_type, COMP_get_name, COMP_CTX_free,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       COMP_CTX_new, COMP_CTX_get_method, COMP_CTX_get_type, COMP_get_type, COMP_get_name, COMP_CTX_free,
       COMP_compress_block, COMP_expand_block, COMP_zlib, COMP_zlib_oneshot, COMP_brotli, COMP_brotli_oneshot,
       COMP_zstd, COMP_zstd_oneshot, BIO_f_zlib, BIO_f_brotli, BIO_f_zstd - Compression support

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/comp.h&gt;

        COMP_CTX *COMP_CTX_new(COMP_METHOD *meth);
        void COMP_CTX_free(COMP_CTX *ctx);
        const COMP_METHOD *COMP_CTX_get_method(const COMP_CTX *ctx);
        int COMP_CTX_get_type(const COMP_CTX* comp);
        int COMP_get_type(const COMP_METHOD *meth);
        const char *COMP_get_name(const COMP_METHOD *meth);

        int COMP_compress_block(COMP_CTX *ctx, unsigned char *out, int olen,
                                unsigned char *in, int ilen);
        int COMP_expand_block(COMP_CTX *ctx, unsigned char *out, int olen,
                              unsigned char *in, int ilen);

        COMP_METHOD *COMP_zlib(void);
        COMP_METHOD *COMP_zlib_oneshot(void);
        COMP_METHOD *COMP_brotli(void);
        COMP_METHOD *COMP_brotli_oneshot(void);
        COMP_METHOD *COMP_zstd(void);
        COMP_METHOD *COMP_zstd_oneshot(void);

        const BIO_METHOD *BIO_f_zlib(void);
        const BIO_METHOD *BIO_f_brotli(void);
        const BIO_METHOD *BIO_f_zstd(void);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These functions provide compression support for OpenSSL. Compression is used within the OpenSSL library
       to support TLS record and certificate compression.

       <b>COMP_CTX_new()</b> is used to create a new <b>COMP_CTX</b> structure used to compress data.

       <b>COMP_CTX_free()</b> is used to free the returned <b>COMP_CTX</b>.  If the argument is NULL, nothing is done.

       <b>COMP_CTX_get_method()</b> returns the <b>COMP_METHOD</b> of the given <u>ctx</u>.

       <b>COMP_CTX_get_type()</b> and <b>COMP_get_type()</b> return the NID for the <b>COMP_CTX</b> and <b>COMP_METHOD</b>, respectively.
       <b>COMP_get_name()</b> returns the name of the algorithm of the given <b>COMP_METHOD</b>.

       <b>COMP_compress_block()</b> compresses b&lt;ilen&gt; bytes from the buffer <u>in</u> into the buffer b&lt;out&gt; of size <u>olen</u>
       using the algorithm specified by <u>ctx</u>.

       <b>COMP_expand_block()</b> expands <u>ilen</u> bytes from the buffer <u>in</u> into the buffer <u>out</u> of size <u>olen</u> using the
       algorithm specified by <u>ctx</u>.

       Methods (<b>COMP_METHOD</b>) may be specified by one of these functions. These functions will be available even
       if their corresponding compression algorithm is not configured into the OpenSSL library. In such a case,
       NULL will be returned.

       •   <b>COMP_zlib()</b> returns a <b>COMP_METHOD</b> for stream-based ZLIB compression.

       •   <b>COMP_zlib_oneshot()</b> returns a <b>COMP_METHOD</b> for one-shot ZLIB compression.

       •   <b>COMP_brotli()</b> returns a <b>COMP_METHOD</b> for stream-based Brotli compression.

       •   <b>COMP_brotli_oneshot()</b> returns a <b>COMP_METHOD</b> for one-shot Brotli compression.

       •   <b>COMP_zstd()</b> returns a <b>COMP_METHOD</b> for stream-based Zstandard compression.

       •   <b>COMP_zstd_oneshot()</b> returns a <b>COMP_METHOD</b> for one-shot Zstandard compression.

       <b>BIO_f_zlib()</b>,  <b>BIO_f_brotli()</b>  <b>BIO_f_zstd()</b> each return a <b>BIO_METHOD</b> that may be used to create a <b>BIO</b> via
       <b><a href="../man3/BIO_new.3.html">BIO_new</a>(3)</b> to read and write compressed files or streams.   The  functions  are  only  available  if  the
       corresponding algorithm is compiled into the OpenSSL library. NULL may be returned if the algorithm fails
       to load dynamically.

</pre><h4><b>NOTES</b></h4><pre>
       While compressing non-compressible data, the output may be larger than the input. Care should be taken to
       size output buffers appropriate for both compression and expansion.

       Compression  support  and  compression  algorithms must be enabled and built into the library before use.
       Refer to the INSTALL.md file when configuring OpenSSL.

       ZLIB may be found at &lt;https://zlib.net&gt;

       Brotli may be found at &lt;https://github.com/google/brotli&gt;.

       Zstandard may be found at &lt;https://github.com/facebook/zstd&gt;.

       Compression of SSL/TLS records is not recommended, as it has been shown  to  lead  to  the  CRIME  attack
       &lt;https://en.wikipedia.org/wiki/CRIME&gt;.   It  is  disabled  by default, and may be enabled by clearing the
       SSL_OP_NO_COMPRESSION option and setting the security level as appropriate.  See  the  documentation  for
       the <b><a href="../man3/SSL_CTX_set_options.3.html">SSL_CTX_set_options</a></b>(3) and <b><a href="../man3/SSL_set_options.3.html">SSL_set_options</a></b>(3) functions.

       Compression   is   also   used   to   support   certificate   compression   as   described   in   RFC8879
       &lt;https://datatracker.ietf.org/doc/html/rfc8879&gt;.      It      may      be      disabled      via      the
       SSL_OP_NO_TX_CERTIFICATE_COMPRESSION    and    SSL_OP_NO_RX_CERTIFICATE_COMPRESSION    options   of   the
       <b><a href="../man3/SSL_CTX_set_options.3.html">SSL_CTX_set_options</a></b>(3) or <b><a href="../man3/SSL_set_options.3.html">SSL_set_options</a></b>(3) functions.

       <b>COMP_zlib()</b>,  <b>COMP_brotli()</b>  and  <b>COMP_zstd()</b>  are  stream-based  compression  methods.   Internal  state
       (including  compression  dictionary) is maintained between calls.  If an error is returned, the stream is
       corrupted, and should be closed.

       <b>COMP_zlib_oneshot()</b>, <b>COMP_brotli_oneshot()</b> and <b>COMP_zstd_oneshot()</b> are not stream-based. These methods do
       not maintain state between calls. An error in one call does not affect future calls.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>COMP_CTX_new()</b> returns a <b>COMP_CTX</b> on success, or NULL on failure.

       <b>COMP_CTX_get_method()</b>,   <b>COMP_zlib()</b>,    <b>COMP_zlib_oneshot()</b>,    <b>COMP_brotli()</b>,    <b>COMP_brotli_oneshot()</b>,
       <b>COMP_zstd()</b>, and <b>COMP_zstd_oneshot()</b> return a <b>COMP_METHOD</b> on success, or NULL on failure.

       <b>COMP_CTX_get_type()</b> and <b>COMP_get_type()</b> return a NID value. On failure, NID_undef is returned.

       <b>COMP_compress_block()</b> and <b>COMP_expand_block()</b> return the number of bytes stored in the output buffer <u>out</u>.
       This may be 0. On failure, -1 is returned.

       <b>COMP_get_name()</b> returns a <b>const</b> <b>char</b> <b>*</b> that must not be freed on success, or NULL on failure.

       <b>BIO_f_zlib()</b>, <b>BIO_f_brotli()</b> and <b>BIO_f_zstd()</b> return NULL on error, and a <b>BIO_METHOD</b> on success.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/BIO_new.3.html">BIO_new</a></b>(3), <b><a href="../man3/SSL_CTX_set_options.3.html">SSL_CTX_set_options</a></b>(3), <b><a href="../man3/SSL_set_options.3.html">SSL_set_options</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       Brotli and Zstandard functions were added in OpenSSL 3.2.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2022-2024 The OpenSSL Project Authors. All Rights Reserved.

       Licensed  under  the  Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain  a  copy  in  the  file  LICENSE  in  the  source  distribution  or  at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                                 <u><a href="../man3SSL/COMP_CTX_NEW.3SSL.html">COMP_CTX_NEW</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>