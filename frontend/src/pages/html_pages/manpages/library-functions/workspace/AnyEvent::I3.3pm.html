<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnyEvent::I3 - communicate with the i3 window manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libanyevent-i3-perl">libanyevent-i3-perl_0.19-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       AnyEvent::I3 - communicate with the i3 window manager

</pre><h4><b>VERSION</b></h4><pre>
       Version 0.19

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This module connects to the i3 window manager using the UNIX socket based IPC interface it provides (if
       enabled in the configuration file). You can then subscribe to events or send messages and receive their
       replies.

           use AnyEvent::I3 qw(:all);

           my $i3 = i3();

           $i3-&gt;connect-&gt;recv or die "Error connecting";
           say "Connected to i3";

           my $workspaces = $i3-&gt;message(TYPE_GET_WORKSPACES)-&gt;recv;
           say "Currently, you use " . @{$workspaces} . " workspaces";

       ...or, using the sugar methods:

           use AnyEvent::I3;

           my $workspaces = i3-&gt;get_workspaces-&gt;recv;
           say "Currently, you use " . @{$workspaces} . " workspaces";

       A somewhat more involved example which dumps the i3 layout tree whenever there is a workspace event:

           use Data::Dumper;
           use AnyEvent;
           use AnyEvent::I3;

           my $i3 = i3();

           $i3-&gt;connect-&gt;recv or die "Error connecting to i3";

           $i3-&gt;subscribe({
               workspace =&gt; sub {
                   $i3-&gt;get_tree-&gt;cb(sub {
                       my ($tree) = @_;
                       say "tree: " . Dumper($tree);
                   });
               }
           })-&gt;recv-&gt;{success} or die "Error subscribing to events";

           AE::cv-&gt;recv

</pre><h4><b>EXPORT</b></h4><pre>
   <b>$i3</b> <b>=</b> <b>i3([</b> <b>$path</b> <b>]);</b>
       Creates a new "AnyEvent::I3" object and returns it.

       "path" is an optional path of the UNIX socket to connect to. It is strongly advised to NOT specify this
       unless you're absolutely sure you need it.  "AnyEvent::I3" will automatically figure it out by querying
       the running i3 instance on the current DISPLAY which is almost always what you want.

</pre><h4><b>SUBROUTINES/METHODS</b></h4><pre>
   <b>$i3</b> <b>=</b> <b>AnyEvent::I3-&gt;new([</b> <b>$path</b> <b>])</b>
       Creates a new "AnyEvent::I3" object and returns it.

       "path" is an optional path of the UNIX socket to connect to. It is strongly advised to NOT specify this
       unless you're absolutely sure you need it.  "AnyEvent::I3" will automatically figure it out by querying
       the running i3 instance on the current DISPLAY which is almost always what you want.

   <b>$i3-&gt;connect</b>
       Establishes the connection to i3. Returns an "AnyEvent::CondVar" which will be triggered with a boolean
       (true if the connection was established) as soon as the connection has been established.

           if ($i3-&gt;connect-&gt;recv) {
               say "Connected to i3";
           }

   <b>$i3-&gt;subscribe(\%callbacks)</b>
       Subscribes to the given event types. This function awaits a hashref with the key being the name of the
       event and the value being a callback.

           my %callbacks = (
               workspace =&gt; sub { say "Workspaces changed" }
           );

           if ($i3-&gt;subscribe(\%callbacks)-&gt;recv-&gt;{success}) {
               say "Successfully subscribed";
           }

       The special callback with name "_error" is called when the connection to i3 is killed (because of a
       crash, exit or restart of i3 most likely). You can use it to print an appropriate message and exit
       cleanly or to try to reconnect.

           my %callbacks = (
               _error =&gt; sub {
                   my ($msg) = @_;
                   say "I am sorry. I am so sorry: $msg";
                   exit 1;
               }
           );

           $i3-&gt;subscribe(\%callbacks)-&gt;recv;

   <b>$i3-&gt;message($type,</b> <b>$content)</b>
       Sends a message of the specified "type" to i3, possibly containing the data structure "content" (or
       "content", encoded as utf8, if "content" is a scalar), if specified.

           my $reply = $i3-&gt;message(TYPE_RUN_COMMAND, "reload")-&gt;recv;
           if ($reply-&gt;{success}) {
               say "Configuration successfully reloaded";
           }

</pre><h4><b>SUGAR</b> <b>METHODS</b></h4><pre>
       These methods intend to make your scripts as beautiful as possible. All of them automatically establish a
       connection to i3 blockingly (if it does not already exist).

   <b>get_workspaces</b>
       Gets the current workspaces from i3.

           my $ws = i3-&gt;get_workspaces-&gt;recv;
           say Dumper($ws);

   <b>get_outputs</b>
       Gets the current outputs from i3.

           my $outs = i3-&gt;get_outputs-&gt;recv;
           say Dumper($outs);

   <b>get_tree</b>
       Gets the layout tree from i3 (&gt;= v4.0).

           my $tree = i3-&gt;get_tree-&gt;recv;
           say Dumper($tree);

   <b>get_marks</b>
       Gets all the window identifier marks from i3 (&gt;= v4.1).

           my $marks = i3-&gt;get_marks-&gt;recv;
           say Dumper($marks);

   <b>get_bar_config</b>
       Gets the bar configuration for the specific bar id from i3 (&gt;= v4.1).

           my $config = i3-&gt;get_bar_config($id)-&gt;recv;
           say Dumper($config);

   <b>get_version</b>
       Gets the i3 version via IPC, with a fall-back that parses the output of i3 --version (for i3 &lt; v4.3).

           my $version = i3-&gt;get_version()-&gt;recv;
           say "major: " . $version-&gt;{major} . ", minor = " . $version-&gt;{minor};

   <b>get_config</b>
       Gets the raw last read config from i3. Requires i3 &gt;= 4.14

   <b>send_tick</b>
       Sends a tick event. Requires i3 &gt;= 4.15

   <b>sync</b>
       Sends an i3 sync event. Requires i3 &gt;= 4.16

   <b>command($content)</b>
       Makes i3 execute the given command

           my $reply = i3-&gt;command("reload")-&gt;recv;
           die "command failed" unless $reply-&gt;{success};

</pre><h4><b>AUTHOR</b></h4><pre>
       Michael Stapelberg, "&lt;michael at i3wm.org&gt;"

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs or feature requests to "bug-anyevent-i3 at rt.cpan.org", or through the web
       interface at &lt;https://rt.cpan.org/NoAuth/ReportBug.html?Queue=AnyEvent-I3&gt;.  I will be notified, and then
       you'll automatically be notified of progress on your bug as I make changes.

</pre><h4><b>SUPPORT</b></h4><pre>
       You can find documentation for this module with the perldoc command.

           perldoc AnyEvent::I3

       You can also look for information at:

       • RT: CPAN's request tracker

         &lt;https://rt.cpan.org/NoAuth/Bugs.html?Dist=AnyEvent-I3&gt;

       • The i3 window manager website

         &lt;https://i3wm.org&gt;

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright 2010-2012 Michael Stapelberg.

       This  program  is  free software; you can redistribute it and/or modify it under the terms of either: the
       GNU General Public License as published by the Free Software Foundation; or the Artistic License.

       See https://dev.perl.org/licenses/ for more information.

perl v5.38.2                                       2024-04-09                                  <u>AnyEvent::<a href="../man3pm/I3.3pm.html">I3</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>