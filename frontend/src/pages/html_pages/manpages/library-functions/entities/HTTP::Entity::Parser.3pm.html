<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP::Entity::Parser - PSGI compliant HTTP Entity Parser</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libhttp-entity-parser-perl">libhttp-entity-parser-perl_0.25-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       HTTP::Entity::Parser - PSGI compliant HTTP Entity Parser

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use HTTP::Entity::Parser;

           my $parser = HTTP::Entity::Parser-&gt;new;
           $parser-&gt;register('application/x-www-form-urlencoded','HTTP::Entity::Parser::UrlEncoded');
           $parser-&gt;register('multipart/form-data','HTTP::Entity::Parser::MultiPart');
           $parser-&gt;register('application/json','HTTP::Entity::Parser::JSON');

           sub app {
               my $env = shift;
               my ( $params, $uploads) = $parser-&gt;parse($env);
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       HTTP::Entity::Parser is a PSGI-compliant HTTP Entity parser. This module also is compatible with
       HTTP::Body. Unlike HTTP::Body, HTTP::Entity::Parser reads HTTP entities from PSGI's environment
       "$env-&gt;{'psgi.input'}" and parses it.  This module supports application/x-www-form-urlencoded,
       multipart/form-data and application/json.

</pre><h4><b>METHODS</b></h4><pre>
       new( buffer_length =&gt; $length:Intger)
           Create the instance.

           buffer_length
               The buffer length that HTTP::Entity::Parser reads from psgi.input. 16384 by default.

       register($content_type:String, $class:String, $opts:HashRef)
           Register parser class.

             $parser-&gt;register('application/x-www-form-urlencoded','HTTP::Entity::Parser::UrlEncoded');
             $parser-&gt;register('multipart/form-data','HTTP::Entity::Parser::MultiPart');
             $parser-&gt;register('application/json','HTTP::Entity::Parser::JSON');

           If  the  request  content_type  matches the registered type, HTTP::Entity::Parser uses the registered
           parser class. If content_type does not match any registered  type,  HTTP::Entity::Parser::OctetStream
           is used.

       parse($env:HashRef)
           parse HTTP entities from PSGI's env.

             my ( $params:ArrayRef, $uploads:ArrayRef) = $parser-&gt;parse($env);

           $param is a key-value pair list.

              my ( $params, $uploads) = $parser-&gt;parse($env);
              my $body_parameters = Hash::MultiValue-&gt;new(@$params);

           $uploads is an ArrayRef of HashRef.

              my ( $params, $uploads) = $parser-&gt;parse($env);
              warn Dumper($uploads-&gt;[0]);
              {
                  "name" =&gt; "upload", #field name
                  "headers" =&gt; [
                      "Content-Type" =&gt; "application/octet-stream",
                      "Content-Disposition" =&gt; "form-data; name=\"upload\"; filename=\"hello.pl\""
                  ],
                  "size" =&gt; 78, #size of upload content
                  "filename" =&gt; "hello.png", #original filename in the client
                  "tempname" =&gt; "/tmp/XXXXX", # path to the temporary file where uploaded file is saved
              }

           When used with Plack::Request::Upload:

              my ( $params, $uploads) = $parser-&gt;parse($env);
               my $upload_hmv = Hash::MultiValue-&gt;new();
               while ( my ($k,$v) = splice @$uploads, 0, 2 ) {
                   my %copy = %$v;
                   $copy{headers} = HTTP::Headers::Fast-&gt;new(@{$v-&gt;{headers}});
                   $upload_hmv-&gt;add($k, Plack::Request::Upload-&gt;new(%copy));
               }

</pre><h4><b>PARSERS</b></h4><pre>
       OctetStream
           Default parser, This parser does not parse entity, always return empty list.

       UrlEncoded
           For "application/x-www-form-urlencoded". It is used for HTTP POST without file upload

       MultiPart
           For "multipart/form-data". It is used for HTTP POST contains file upload.

           MultiPart parser use HTTP::MultiPartParser.

       JSON
           For "application/json". This parser decodes JSON body automatically.

           It is convenient to use with Ajax forms.

</pre><h4><b>WHAT'S</b> <b>DIFFERENT</b> <b>FROM</b> <b>HTTP::Body</b></h4><pre>
       HTTP::Entity::Parser accept PSGI's env and read body from it.

       HTTP::Entity::Parser  is  able  to  choose  parsers by the instance, HTTP::Body requires to modify global
       variables.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       HTTP::Body
       HTTP::MultiPartParser
       Plack::Request
       WWW::Form::UrlEncoded
           HTTP::Entity::Parser uses this for parse application/x-www-form-urlencoded

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (C) Masahiro Nagano.

       This library is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

</pre><h4><b>AUTHOR</b></h4><pre>
       Masahiro Nagano &lt;<a href="mailto:kazeburo@gmail.com">kazeburo@gmail.com</a>&gt;

       Tokuhiro Matsuno &lt;<a href="mailto:tokuhirom@gmail.com">tokuhirom@gmail.com</a>&gt;

       This module is based on tokuhirom's code, see &lt;https://github.com/plack/Plack/pull/434&gt;

perl v5.36.0                                       2022-08-28                          <u>HTTP::Entity::<a href="../man3pm/Parser.3pm.html">Parser</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>