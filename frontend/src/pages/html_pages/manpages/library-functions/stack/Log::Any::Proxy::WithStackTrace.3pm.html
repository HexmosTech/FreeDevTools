<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log::Any::Proxy::WithStackTrace - Log::Any proxy to upgrade string errors to objects with stack traces</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblog-any-perl">liblog-any-perl_1.717-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Log::Any::Proxy::WithStackTrace - Log::Any proxy to upgrade string errors to objects with stack traces

</pre><h4><b>VERSION</b></h4><pre>
       version 1.717

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Log::Any qw( $log, proxy_class =&gt; 'WithStackTrace' );

         # Allow stack trace call stack arguments to be logged:
         use Log::Any qw( $log, proxy_class =&gt; 'WithStackTrace',
                                proxy_show_stack_trace_args =&gt; 1 );

         # Configure some adapter that knows how to:
         #  1) handle structured data, and
         #  2) handle message objects which have a "stack_trace" method:
         Log::Any::Adapter-&gt;set($adapter);

         $log-&gt;error("Help!");   # stack trace gets automatically added,
                                 # starting from this line of code

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Some log adapters, like Log::Any::Adapter::Sentry::Raven, are able to take advantage of being passed
       message objects that contain a stack trace.  However if a stack trace is not available, and fallback
       logic is used to generate one, the resulting trace can be confusing if it begins relative to where the
       log adapter was called, and not relative to where the logging method was originally called.

       With this proxy in place, if any logging method is called with a log message that is a non-reference
       scalar (i.e. a string), that log message will be upgraded into a "Log::Any::MessageWithStackTrace" object
       with a "stack_trace" method, and that method will return a trace relative to where the logging method was
       called.  A string overload is provided on the object to return the original log message.

       Additionally, any call stack arguments in the stack trace will be deleted before logging, to avoid
       accidentally logging sensitive data.  This happens both for message objects that were auto-generated from
       string messages, as well as for message objects that were passed in directly (if they appear to have a
       stack trace method).  This default argument scrubbing behavior can be turned off by specifying a true
       value for the "proxy_show_stack_trace_args" import flag.

       <b>Important:</b> This proxy should be used with a Log::Any::Adapter that is configured to handle structured
       data.  Otherwise the object created here will just get stringified before it can be used to access the
       stack trace.

</pre><h4><b>METHODS</b></h4><pre>
   <b>maybe_upgrade_with_stack_trace</b>
         @args = $self-&gt;maybe_upgrade_with_stack_trace(@args);

       This is an internal-use method that will convert a non-reference scalar message into a
       "Log::Any::MessageWithStackTrace" object with a "stack_trace" method.  A string overload is provided to
       return the original message.

       Stack trace args are scrubbed out in case they contain sensitive data, unless the
       "proxy_show_stack_trace_args" option has been set.

   <b>maybe_delete_stack_trace_args</b>
         $self-&gt;maybe_delete_stack_trace_args($arg);

       This is an internal-use method that, given a single argument that is a reference, tries to figure out
       whether the argument is an object with a stack trace, and if so tries to delete any stack trace args.

       The logic is based on Devel::StackTrace::Extract.

       It specifically looks for objects with a "stack_trace" method (which should catch anything that does
       StackTrace::Auto, including anything that does Throwable::Error), or a "trace" method (used by
       Exception::Class and Moose::Exception and friends).

       It specifically ignores Mojo::Exception objects, because their stack traces don't contain any call stack
       args.

   <b>delete_args_from_stack_trace($trace)</b>
         $self-&gt;delete_args_from_stack_trace($trace)

       To scrub potentially sensitive data from "Devel::StackTrace" arguments, this method deletes arguments
       from all of the "Devel::StackTrace::Frame" in the trace.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Jonathan Swartz &lt;<a href="mailto:swartz@pobox.com">swartz@pobox.com</a>&gt;

       •   David Golden &lt;<a href="mailto:dagolden@cpan.org">dagolden@cpan.org</a>&gt;

       •   Doug Bell &lt;<a href="mailto:preaction@cpan.org">preaction@cpan.org</a>&gt;

       •   Daniel Pittman &lt;<a href="mailto:daniel@rimspace.net">daniel@rimspace.net</a>&gt;

       •   Stephen Thirlwall &lt;<a href="mailto:sdt@cpan.org">sdt@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2017 by Jonathan Swartz, David Golden, and Doug Bell.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.36.0                                       2023-09-03               <u>Log::Any::Proxy::<a href="../man3pm/WithStackTrace.3pm.html">WithStackTrace</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>