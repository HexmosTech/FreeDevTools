<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>math::fuzzy - Fuzzy comparison of floating-point numbers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       math::fuzzy - Fuzzy comparison of floating-point numbers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>?8.3?</b>

       package require <b>math::fuzzy</b> <b>?0.2?</b>

       <b>::math::fuzzy::teq</b> <u>value1</u> <u>value2</u>

       <b>::math::fuzzy::tne</b> <u>value1</u> <u>value2</u>

       <b>::math::fuzzy::tge</b> <u>value1</u> <u>value2</u>

       <b>::math::fuzzy::tle</b> <u>value1</u> <u>value2</u>

       <b>::math::fuzzy::tlt</b> <u>value1</u> <u>value2</u>

       <b>::math::fuzzy::tgt</b> <u>value1</u> <u>value2</u>

       <b>::math::fuzzy::tfloor</b> <u>value</u>

       <b>::math::fuzzy::tceil</b> <u>value</u>

       <b>::math::fuzzy::tround</b> <u>value</u>

       <b>::math::fuzzy::troundn</b> <u>value</u> <u>ndigits</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The package Fuzzy is meant to solve common problems with floating-point numbers in a systematic way:

       •      Comparing  two  numbers  that  are  "supposed"  to be identical, like 1.0 and 2.1/(1.2+0.9) is not
              guaranteed to give the intuitive result.

       •      Rounding  a  number  that  is  halfway  two  integer  numbers  can  cause  strange  errors,   like
              int(100.0*2.8) != 28 but 27

       The  Fuzzy  package  is  meant  to  help sorting out this type of problems by defining "fuzzy" comparison
       procedures for floating-point numbers.  It does so by allowing for a  small  margin  that  is  determined
       automatically  -  the  margin is three times the "epsilon" value, that is three times the smallest number
       <u>eps</u> such that 1.0 and 1.0+$eps canbe distinguished. In Tcl, which uses  double  precision  floating-point
       numbers, this is typically 1.1e-16.

</pre><h4><b>PROCEDURES</b></h4><pre>
       Effectively the package provides the following procedures:

       <b>::math::fuzzy::teq</b> <u>value1</u> <u>value2</u>
              Compares  two  floating-point  numbers  and  returns  1 if their values fall within a small range.
              Otherwise it returns 0.

       <b>::math::fuzzy::tne</b> <u>value1</u> <u>value2</u>
              Returns the negation, that is, if the difference is larger than the margin, it returns 1.

       <b>::math::fuzzy::tge</b> <u>value1</u> <u>value2</u>
              Compares two floating-point numbers and returns 1 if their values either fall within a small range
              or if the first number is larger than the second. Otherwise it returns 0.

       <b>::math::fuzzy::tle</b> <u>value1</u> <u>value2</u>
              Returns 1 if the two numbers are equal according to [teq] or if the  first  is  smaller  than  the
              second.

       <b>::math::fuzzy::tlt</b> <u>value1</u> <u>value2</u>
              Returns the opposite of [tge].

       <b>::math::fuzzy::tgt</b> <u>value1</u> <u>value2</u>
              Returns the opposite of [tle].

       <b>::math::fuzzy::tfloor</b> <u>value</u>
              Returns  the  integer  number  that is lower or equal to the given floating-point number, within a
              well-defined tolerance.

       <b>::math::fuzzy::tceil</b> <u>value</u>
              Returns the integer number that is greater or equal to the given floating-point number,  within  a
              well-defined tolerance.

       <b>::math::fuzzy::tround</b> <u>value</u>
              Rounds the floating-point number off.

       <b>::math::fuzzy::troundn</b> <u>value</u> <u>ndigits</u>
              Rounds the floating-point number off to the specified number of decimals (Pro memorie).

       Usage:

              if { [teq $x $y] } { puts "x == y" }
              if { [tne $x $y] } { puts "x != y" }
              if { [tge $x $y] } { puts "x &gt;= y" }
              if { [tgt $x $y] } { puts "x &gt; y" }
              if { [tlt $x $y] } { puts "x &lt; y" }
              if { [tle $x $y] } { puts "x &lt;= y" }

              set fx      [tfloor $x]
              set fc      [tceil  $x]
              set rounded [tround $x]
              set roundn  [troundn $x $nodigits]

</pre><h4><b>TEST</b> <b>CASES</b></h4><pre>
       The  problems  that  can  occur with floating-point numbers are illustrated by the test cases in the file
       "fuzzy.test":

       •      Several test case use the ordinary comparisons, and they fail invariably to produce understandable
              results

       •      One test case uses [expr] without braces ({ and }). It too fails.

       The conclusion from this is that any expression should be surrounded by braces,  because  otherwise  very
       awkward  things  can  happen  if  you need accuracy. Furthermore, accuracy and understandable results are
       enhanced by using these "tolerant" or fuzzy comparisons.

       Note that besides the Tcl-only package, there is also a C-based version.

</pre><h4><b>REFERENCES</b></h4><pre>
       Original implementation in Fortran by dr. H.D. Knoble (Penn State University).

       P. E. Hagerty, "More on Fuzzy Floor and Ceiling,"  APL  QUOTE  QUAD  <a href="../man4/8.4.html">8</a>(4):20-24,  June  1978.  Note  that
       TFLOOR=FL5 took five years of refereed evolution (publication).

       L. M. Breed, "Definitions for Fuzzy Floor and Ceiling", APL QUOTE QUAD <a href="../man3/8.3.html">8</a>(3):16-23, March 1978.

       D. Knuth, Art of Computer Programming, Vol. 1, Problem 1.2.4-5.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>math</u> <u>::</u> <u>fuzzy</u> of the <u>Tcllib</u> <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       floating-point, math, rounding

</pre><h4><b>CATEGORY</b></h4><pre>
       Mathematics

tcllib                                                 0.2                                     <u>math::<a href="../man3tcl/fuzzy.3tcl.html">fuzzy</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>