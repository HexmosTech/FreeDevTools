<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XmPrintShell — a shell widget class used for printing in Motif</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmotif-dev">libmotif-dev_2.3.8-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>XmPrintShell</b> — a shell widget class used for printing in Motif

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;Xm/Print.h&gt;
       <b>Boolean</b> <b>XmIsPrintShell</b>(
       <b>Widget</b>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>XmPrintShell</b> provides the Motif application programmer with an Xt widget oriented API to some of the
       X Print resources and a callback to drive the pagination.

       The <b>XmPrintShell</b> provides a simple callback to handle the pagination logic, and a set of resources to get
       and set common printer attributes.

       If not created on an <b>XPrint</b> connection, <b>XmPrintShell</b> behaves as a regular applicationShell.

       The <b>XmPrintShell</b> also initializes the <b>Xp</b> extension event handling mechanism, by registering an  extension
       selector  that  calls  <b>XpSelectInput</b>  and  event  dispatcher  for  print  and  attributes  <b>Xp</b>  events, so
       applications can use <b>XtInsertEventTypeHandler</b> to register their own handler with the <b>Xp</b> events.

   <b>Arguments</b>
       No <b>XmCreate</b> function is provided, since this is a toplevel shell, most likely created thru some <b>Xt</b>  shell
       creation routine or <b>XmPrintSetup</b>.

   <b>Classes</b>
       <b>XmPrintShell</b>  is  a subclass of <b>ApplicationShell</b>; it inherits behavior, resources and traits from all its
       superclasses.  The class pointer is <b>XmPrintShellWidgetClass</b>.

   <b>New</b> <b>Resources</b>
                                        <b>XmPrintShell</b> <b>Resource</b> <b>Set</b>
       <b>Name</b>                         <b>Class</b>                        <b>Type</b>             <b>Default</b>   <b>Access</b>
       <b>XmNstartJobCallback</b>          <b>XmCCallback</b>                  <b>XtCallbackList</b>   <b>NULL</b>      <b>CSG</b>
       <b>XmNendJobCallback</b>            <b>XmCCallback</b>                  <b>XtCallbackList</b>   <b>NULL</b>      <b>CSG</b>
       <b>XmNpageSetupCallback</b>         <b>XmCCallback</b>                  <b>XtCallbackList</b>   <b>NULL</b>      <b>CSG</b>
       <b>XmNminX</b>                      <b>XmCMinX</b>                      <b>Dimension</b>        <b>dynamic</b>   <b>G</b>
       <b>XmNminY</b>                      <b>XmCMinY</b>                      <b>Dimension</b>        <b>dynamic</b>   <b>G</b>
       <b>XmNmaxX</b>                      <b>XmCMaxX</b>                      <b>Dimension</b>        <b>dynamic</b>   <b>G</b>
       <b>XmNmaxY</b>                      <b>XmCMaxY</b>                      <b>Dimension</b>        <b>dynamic</b>   <b>G</b>
       <b>XmNdefaultPixmapResolution</b>   <b>XmCDefaultPixmapResolution</b>   <b>unsigned</b> <b>short</b>   <b>100</b>       <b>CSG</b>
       <b>XmNpdmNotificationCallback</b>   <b>XmCCallback</b>                  <b>XtCallbackList</b>   <b>NULL</b>      <b>CSG</b>

       <u>XmNstartJobCallback</u>
                 Specifies the callback driving the beginning of rendering.  It is safe for  an  application  to
                 start  rendering  after this callback has been activated.  <b>XpStartJob</b> must be called to trigger
                 this callback.

       <u>XmNendJobCallback</u>
                 Specifies the callback driving the end of rendering.  Notify the client that all rendering  has
                 been  processed  (whether  on print-to-file or regular spool).  <b>XpEndJob</b> is called by the print
                 shell to trigger this callback.

       <u>XmNpageSetupCallback</u>
                 Specifies the callback driving the page layout. It is safe for an app to start  rendering  from
                 this callback even if the <b>XmNstartJobCallback</b> is not used.

       <u>XmNminX,</u> <u>XmNminY,</u> <u>XmNmaxX,</u> <u>XmNmaxY</u>
                 Specify  the  imageable  area  of  the  page  in  the  current print context. <b>XmPrintShell</b> also
                 maintains a proper size at  all  times  by  updating  its  own  widget  dimension  whenever  an
                 attribute, such as resolution or orientation, changes. It is sized in its <b>Initialize</b> routine so
                 that the application can rely on a proper size before the first <b>StartPage</b> call is issued.

       <u>XmNdefaultPixmapResolution</u>
                 Indicates  the  resolution in dpi (dot per inch) of the image files read and converted by Motif
                 for the widget descendants of this shell. It is used to determine a scaling ratio to be applied
                 to pixmap created thru regular pixmap/icon conversion of the following Widget resources:

                    •  <b>XmLabel</b>.label*Pixmap,  <b>XmIconG</b>.*IconPixmap  <b>XmToggleB</b>.selectPixmap,   <b>XmPushBG</b>.armPixmap,
                       <b>XmIconG</b>.*IconMask, <b>XmMessageBox</b>.symbolPixmap, <b>XmContainer</b>.*StatePixmap, ...

                    •  Leaving   out   the   pixmap   resources   being  used  for  tiling  (XmNhighlightPixmap,
                       XmNtopShadowPixmap, XmNbottomShadowPixmap, XmNbackgroundPixmap, ...)

       <u>XmNpdmNotificationCallback</u>
                 A callback notifying the application about the status  of  the  PDM  (see  XmPrintPopupPDM).  A
                 XmPrintShellCallbackStruct is used, with reason:

                    •  <b>XmCR_PDM_NONE</b>:  no  PDM  available  on  this display for the named selection (provided in
                       detail)

                    •  <b>XmCR_PDM_START_VXAUTH</b> : the PDM is not authorized to connect to the video display.

                    •  <b>XmCR_PDM_START_PXAUTH</b> : the PDM is not authorized to connect to the print display.

                    •  <b>XmCR_PDM_UP</b> : the PDM is up and running

                    •  <b>XmCR_PDM_OK</b> : the PDM has exited with OK status

                    •  <b>XmCR_PDM_CANCEL</b> : the PDM has exited with CANCEL

                    •  <b>XmCR_PDM_START_ERROR</b> : the PDM cannot start due to some error (usually logged)

                    •  <b>XmCR_PDM_EXIT_ERROR</b> : the PDM has exited with an error

   <b>Callback</b> <b>Information</b>
       The <b>XmNstartJobCallback</b>, <b>XmNendJobCallback,</b> <b>XmNpageSetupCallback</b> and  <b>XmNpdmNotificationCallback</b>  operate
       on a <b>XmPrintShellCallbackStruct</b>, which is defined as follow:

       typedef struct
       {
           int     reason;  /* XmCR_START_JOB, XmCR_END_JOB,
                               XmCR_PAGE_SETUP, XmCR_PDM_* */
           XEvent  *event;
           XPContext print_context;
           Boolean last_page; /* in_out */
           XtPointer detail;
       } XmPrintShellCallbackStruct;

   <b>Additional</b> <b>Behavior</b>
       The <b>last_page</b> field is only meaningful when the reason is <b>XmCR_PAGE_SETUP</b>.

       The  page  setup callback is called with <b>last_page</b> <b>False</b> to notify the application that it has to get its
       internal layout state ready for the next page. Typically, a widget  based  application  will  change  the
       content of a <b>Label</b> showing the page number, or scroll the content of the <b>Text</b> widget.

       When  the  application  has  processed  its  last page, it should set the <b>last_page</b> field in the callback
       struct to <b>True</b>. The callback will be called a last time after that with <b>last_page</b>  <b>False</b>  to  notify  the
       application that it can safely clean-up its internal state (e.g., destroy widgets).

       No  drawing should occur from within the callback function in the application, this is an Exposure event-
       driven programming model where widgets render themselves from their expose methods.

       The print shell calls <b>XpStartPage</b> after the <b>pageSetupCallback</b> returns, and <b>XpEndPage</b>  upon  reception  of
       <b>StartPageNotify</b>.

</pre><h4><b>ERRORS/WARNINGS</b></h4><pre>
       <b>XmPrintShell</b> can generate the following warnings:

          •  <b>Not</b> <b>connected</b> <b>to</b> <b>a</b> <b>valid</b> <b>X</b> <b>Print</b> <b>Server:</b> <b>behavior</b> <b>undefined.</b>

          •  <b>Attempt</b> <b>to</b> <b>set</b> <b>an</b> <b>invalid</b> <b>resolution</b> <b>on</b> <b>a</b> <b>printer:</b> <b>%s</b>

          •  <b>Attempt</b> <b>to</b> <b>set</b> <b>an</b> <b>invalid</b> <b>orientation</b> <b>on</b> <b>a</b> <b>printer:</b> <b>%s</b>

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Not applicable

</pre><h4><b>EXAMPLES</b></h4><pre>
       PrintOnePageCB(Widget pshell, XtPointer npages,
       /*----------*/ XmPrintSetPageCBStruct psp)
       {
           static int cur_page = 0;
           cur_page++;

           if (! psp-&gt;last_page
               &amp;&amp; curPage &gt; 1) /* no need to scroll for the first page */
           {

               XmTextScroll(ptext, prows);  /* get ready for next page */

           } else {    /**** I'm done */

              XtDestroyWidget(pshell);
              XtCloseDisplay(XtDisplay(pshell));
           }

           if (cur_page == (int) n_pages) psp-&gt;last_page = True;
       }

       PrintOKCallback(...)
       /*-------------*/
       {
           pshell = XmPrintSetup (widget, pbs-&gt;print_screen,
                                          "Print", NULL, 0);

           XpStartJob(XtDisplay(pshell), XPSpool);

           /**** here I get the size of the shell, create my widget
                 hierarchy: a bulleting board, and then a text widget,
                 that I stuff with the video text widget buffer */

           /* get the total number of pages to print */
           /* same code as previous example to get n_pages */

           /****  set up my print callback */
           XtAddCallback(pshell,  XmNpageSetUpCallback,
                                  PrintOnePageCB, n_pages);
       }

       Examples of <b>XmNdefaultPixmapResolution</b> usage:

          •  An  application  reuses the same image sources it uses for the video interface, in XBM, XPM, PNG or
             JPEG, to layout on its printed pages. In this case, scaling is seamless.

           ! icon.xpm is 30x30 pixels
           app*dialog.pushb.labelPixmap:icon.xpm
           ! print is 400dpi
           app.print*form.lab.labelPixmap:icon.xpm
           ! 120x120 pixels on the paper (auto scaling)

          •  An application provides a new set of image files, for a given  printer  resolution  (say  300).  It
             doesn't  want automatic scaling by the toolkit for that resolution, it wants scaling based on these
             300dpi images for higher resolution. It creates its print shell inside using the name  "printHiRes"
             and adds the following in its resource file:

           app.printHiRes.defaultPixmapResolution:300
           ! icon300.xpm is 120x120 pixels
           app.printHiRes*form.lab.labelPixmap:icon300.xpm
           ! 120x120 pixels on the paper (no scaling)

       This  way  a printer resolution of 600 will result in a scale of a 300 dpi image by 2 (dpi=600 divided by
       base=300), while a printer resolution of 150 (using default print shell name "print") will  use  the  100
       dpi icon scaled by 1.5 (dpi=150 divided by default base=100).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/XmPrintSetup.3.html">XmPrintSetup</a></b>(3), <b><a href="../man3/XmRedisplayWidget.3.html">XmRedisplayWidget</a></b>(3), <b><a href="../man3/XmPrintToFile.3.html">XmPrintToFile</a></b>(3), <b><a href="../man3/XmPrintPopupPDM.3.html">XmPrintPopupPDM</a></b>(3)

                                                                                                 <u><a href="../man3/XmPrintShell.3.html">XmPrintShell</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>