<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_GetNumber, Tcl_GetNumberFromObj - get numeric value from Tcl value</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_GetNumber, Tcl_GetNumberFromObj - get numeric value from Tcl value

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       <b>#include</b> <b>&lt;tclTomMath.h&gt;</b>

       int
       <b>Tcl_GetNumber</b>(<u>interp,</u> <u>bytes,</u> <u>numBytes,</u> <u>clientDataPtr,</u> <u>typePtr</u>)

       int
       <b>Tcl_GetNumberFromObj</b>(<u>interp,</u> <u>objPtr,</u> <u>clientDataPtr,</u> <u>typePtr</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (out)               When  non-NULL,  error information is recorded here when the value
                                              is not in any of the numeric formats recognized by Tcl.

       const char <u>*bytes</u> (in)                 Points to first byte of the string value to be examined.

       Tcl_Size <u>numBytes</u> (in)                 The number of bytes, starting at <u>bytes</u>, that should  be  examined.
                                              If  <b>numBytes</b>  is negative, then all bytes should be examined until
                                              the first <b>NUL</b> byte terminates examination.

       void * <u>*clientDataPtr</u> (out)            Points to space where a pointer value may be written through which
                                              a numeric value is available to read.

       int <u>*typePtr</u> (out)                     Points to space where a value may be written reporting  what  type
                                              of numeric storage is available to read.

       Tcl_Obj <u>*objPtr</u> (in)                   A Tcl value to be examined.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  procedures  enable  callers  to  retrieve  a  numeric  value  from a Tcl value in a numeric format
       recognized by Tcl.

       Tcl recognizes many values as numbers.  Several examples include: <b>"0"</b>, <b>"</b> <b>+1"</b>, <b>"-2</b> <b>"</b>,  <b>"</b>  <b>3</b>  <b>"</b>,  <b>"0xdad1"</b>,
       <b>"0d09"</b>,  <b>"1_000_000"</b>,  <b>"4.0"</b>, <b>"1e-7"</b>, <b>"NaN"</b>, or <b>"Inf"</b>.  When built-in Tcl commands act on these values as
       numbers, they are converted to a numeric representation for efficient handling in C code.  Tcl makes  use
       of  three  C  types  to store these representations: <b>double</b>, <b>Tcl_WideInt</b>, and <b>mp_int</b>.  The <b>double</b> type is
       provided by the C language standard.  The <b>Tcl_WideInt</b> type is declared in the Tcl header file, <b>tcl.h</b>, and
       is equivalent to the C standard type <b>long</b> <b>long</b> on most platforms. The <b>mp_int</b>  type  is  declared  in  the
       header  file <b>tclTomMath.h</b>, and implemented by the LibTomMath multiple-precision integer library, included
       with Tcl.

       The routines <b>Tcl_GetNumber</b> and <b>Tcl_GetNumberFromObj</b> perform the same function.  They differ only  in  how
       the  arguments present the Tcl value to be examined.  <b>Tcl_GetNumber</b> accepts a counted string value in the
       arguments  <u>bytes</u>  and  <u>numBytes</u>  (or  a  <b>NUL</b>-terminated  string  value  when   <u>numBytes</u>   is   negative).
       <b>Tcl_GetNumberFromObj</b> accepts the Tcl value in <u>objPtr</u>.

       Both  routines  examine  the Tcl value and determine whether Tcl recognizes it as a number.  If not, both
       routines return <b>TCL_ERROR</b> and (when <u>interp</u> is not NULL) record an error message and error code in <u>interp</u>.

       If Tcl does recognize the examined value as a number, both routines return <b>TCL_OK</b>, and  use  the  pointer
       arguments  <u>clientDataPtr</u>  and <u>typePtr</u> (which may not be NULL) to report information the caller can use to
       retrieve the numeric representation.  Both routines write to *<u>clientDataPtr</u> a  pointer  to  the  internal
       storage location where Tcl holds the converted numeric value.

       When  the  converted numeric value is stored as a <b>double</b>, a call to math library routine <b>isnan</b> determines
       whether that value is not a number (NaN).  If so, both <b>Tcl_GetNumber</b> and <b>Tcl_GetNumberFromObj</b>  write  the
       value  <b>TCL_NUMBER_NAN</b>  to  *<u>typePtr</u>. If not, both routines write the value <b>TCL_NUMBER_DOUBLE</b> to *<u>typePtr</u>.
       These routines report different type values in these cases because <b>Tcl_GetDoubleFromObj</b> raises  an  error
       on NaN values.  For both reported type values, the storage pointer may be cast to type <b>const</b> <b>double</b> <b>*</b> and
       the <b>double</b> numeric value may be read through it.

       When  the converted numeric value is stored as a <b>Tcl_WideInt</b>, both <b>Tcl_GetNumber</b> and <b>Tcl_GetNumberFromObj</b>
       write the value <b>TCL_NUMBER_INT</b> to *<u>typePtr</u>.  The storage pointer may be cast to type <b>const</b> <b>Tcl_WideInt</b>  <b>*</b>
       and the <b>Tcl_WideInt</b> numeric value may be read through it.

       When  the  converted  numeric  value  is stored as an <b>mp_int</b>, both <b>Tcl_GetNumber</b> and <b>Tcl_GetNumberFromObj</b>
       write the value <b>TCL_NUMBER_BIG</b> to *<u>typePtr</u>.  The storage pointer may be cast to type <b>const</b> <b>mp_int</b>  <b>*</b>  and
       the <b>mp_int</b> numeric value may be read through it.

       Future  releases  of  Tcl  might  expand  or  revise the recognition of values as numbers.  If additional
       storage representations are adopted, these routines will add new values to  be  written  to  *<u>typePtr</u>  to
       identify them.  Callers should consider how they should react to unknown values written to *<u>typePtr</u>.

       When  callers  of  these  routines  read  numeric  values  through the reported storage pointer, they are
       accessing memory that belongs to the Tcl library.  The Tcl library has the power  to  overwrite  or  free
       this  memory.  The storage pointer reported by a call to <b>Tcl_GetNumber</b> or <b>Tcl_GetNumberFromObj</b> should not
       be used after the same thread has possibly returned control to the Tcl library.  If longer term access to
       the numeric value is needed, it should be copied into memory controlled by the caller.  Callers must  not
       attempt to write through or free the storage pointer.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Tcl_GetDouble, Tcl_GetDoubleFromObj, Tcl_GetWideIntFromObj

</pre><h4><b>KEYWORDS</b></h4><pre>
       double,  double value, double type, integer, integer value, integer type, internal representation, value,
       value type, string representation

Tcl                                                    9.0                                   <u><a href="../man3tcl/Tcl_GetNumber.3tcl.html">Tcl_GetNumber</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>