<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PQgetf - Gets one or more values from a PGresult in a scanf fashion.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/plucky/+package/libpqtypes-dev">libpqtypes-dev_1.5.1-9.1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       PQgetf - Gets one or more values from a PGresult in a scanf fashion.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libpqtypes.h&gt;</b>

       <b>int</b> <b>PQgetf(const</b> <b>PGresult</b> <b>*</b><u>res</u><b>,</b> <b>int</b> <u>tup_num</u><b>,</b>
                  <b>const</b> <b>char</b> <b>*</b><u>format</u><b>,</b> <b>...);</b>
       <b>int</b> <b>PQgetvf(const</b> <b>PGresult</b> <b>*</b><u>res</u><b>,</b> <b>int</b> <u>tup_num</u><b>,</b>
                  <b>const</b> <b>char</b> <b>*</b><u>format</u><b>,</b> <b>va_list</b> <b>ap);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>PQgetf</u>()  and  <u>PQgetvf</u>()  functions get one or more field values from a PGresult using a scanf style
       interface.  The <u>tup_num</u> argument indicates which tuple to read values from; values can only be read  from
       one tuple at a time.

       The  <u>format</u>  argument  is  a  data type specifier string indicating the values to retrieve, like %int4 or
       #timestamp.  Any number of fields, in any order, can be retrieved in  a  single  call.   Each  data  type
       specifier  has  a  cooresponding  <b>field_num,</b>  <b>type-args,</b>  <b>[...]</b>  contained within the function´s variable
       argument list.  The <b>field_num</b> either indicates tuple field number  or  tuple  field  name,  depending  on
       whether  the data type in <u>format</u> used a ´%´ or ´#´ specifer mark (`man <u><a href="../man3/pqt-specs.3.html">pqt-specs</a>(3)</u>´).  The <b>type-args</b> can
       be one or more arguments required by the specific data type: for example, "%int4" would require a pointer
       to a PGint4.  All built-in PostgreSQL data types require a single pointer value.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, a non-zero value is returned.  On error, zero is returned and <u><a href="../man3/PQgeterror.3.html">PQgeterror</a>(3)</u> will  contain  an
       error message.

       If  the  retrieval  of  any field fails, the get operation is aborted and function will fail.  Eventhough
       some fields may have succeeded prior to the failure, their values should not be trusted.   Instead,  make
       another  <u>PQgetf</u>()  call.  Getting an array or a composite can lead to memory leaks when getf fails.  This
       is because these types allocate a  PGresult  object  that  must  be  cleared.   To  avoid  leaks,  it  is
       recommended  to  perform cleanup even if getf fails, retrieve arrays and composites by themselves or make
       them the last field in a getf call.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Using</b> <b>PQgetf</b> <b>on</b> <b>a</b> <b>PGresult</b>
       The example uses the libpq PQexec function to execute a query and then uses <u>PQgetf</u>()  to  retrieve  field
       values.  It is important to note that libpqtypes execution functions, like <u><a href="../man3/PQparamExec.3.html">PQparamExec</a>(3)</u>, do not need to
       generate the PGresult provided to <u>PQgetf</u>().

              <b>int</b> <b>success;</b>
              <b>PGint4</b> <b>i4;</b>
              <b>PGtext</b> <b>text;</b>
              <b>PGbytea</b> <b>bytea;</b>
              <b>PGpoint</b> <b>pt;</b>
              <b>PGresult</b> <b>*res</b> <b>=</b> <b>PQexec(conn,</b> <b>"SELECT</b> <b>i,t,b,p</b> <b>FROM</b> <b>tbl");</b>

              <b>/*</b> <b>Get</b> <b>some</b> <b>field</b> <b>values</b> <b>from</b> <b>the</b> <b>result</b> <b>(order</b> <b>doesn´t</b> <b>matter)</b> <b>*/</b>
              <b>success</b> <b>=</b> <b>PQgetf(res,</b>
                   <b>0,</b>            <b>/*</b> <b>get</b> <b>field</b> <b>values</b> <b>from</b> <b>tuple</b> <b>0</b> <b>*/</b>
                   <b>"%int4</b> <b>#text</b> <b>%bytea</b> <b>%point",</b>
                                 <b>/*</b> <b>type</b> <b>format</b> <b>specifiers</b> <b>(get</b> <b>text</b> <b>by</b> <b>name</b> <b>´#´)</b> <b>*/</b>
                   <b>0,</b>   <b>&amp;i4,</b>     <b>/*</b> <b>get</b> <b>an</b> <b>int4</b> <b>from</b> <b>field</b> <b>num</b> <b>0</b> <b>*/</b>
                   <b>"t",</b> <b>&amp;text,</b>   <b>/*</b> <b>get</b> <b>a</b> <b>text</b> <b>from</b> <b>field</b> <b>name</b> <b>"t"</b> <b>*/</b>
                   <b>2,</b>   <b>&amp;bytea,</b>  <b>/*</b> <b>get</b> <b>a</b> <b>bytea</b> <b>from</b> <b>field</b> <b>num</b> <b>2</b> <b>*/</b>
                   <b>3,</b>   <b>&amp;pt);</b>    <b>/*</b> <b>get</b> <b>a</b> <b>point</b> <b>from</b> <b>field</b> <b>num</b> <b>3</b> <b>*/</b>

              <b>/*</b> <b>Output</b> <b>an</b> <b>error</b> <b>message</b> <b>using</b> <b><a href="../man3/PQgeterror.3.html">PQgeterror</a>(3).</b> <b>*/</b>
              <b>if(!success)</b>
                   <b>fprintf(stderr,</b> <b>"*ERROR:</b> <b>%s\n",</b> <b>PQgeterror());</b>

              <b>/*</b> <b>Output</b> <b>the</b> <b>values,</b> <b>do</b> <b>this</b> <b>before</b> <b>PQclear()</b> <b>*/</b>
              <b>else</b>
                   <b>printf("int4=%d,</b> <b>text=%s,</b> <b>bytea=%d</b> <b>bytes,</b> <b>point=(%f,%f)\n",</b>
                        <b>i4,</b> <b>text,</b> <b>bytea.len,</b> <b>pt.x,</b> <b>pt.y);</b>

              <b>PQclear(res);</b>

</pre><h4><b>AUTHOR</b></h4><pre>
       A  contribution  of eSilo, LLC. for the PostgreSQL Database Management System.  Written by Andrew Chernow
       and Merlin Moncure.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<a href="mailto:libpqtypes@esilo.com">libpqtypes@esilo.com</a>&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2011 eSilo, LLC. All rights reserved.
       This is free software; see the source for copying  conditions.   There  is  NO  warranty;  not  even  for
       MERCHANTABILITY or  FITNESS FOR A PARTICULAR PURPOSE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/pqt-specs.3.html">pqt-specs</a>(3)</u>, <u><a href="../man3/PQgeterror.3.html">PQgeterror</a>(3)</u>

libpqtypes                                            2011                                             <u><a href="../man3/PQgetf.3.html">PQgetf</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>