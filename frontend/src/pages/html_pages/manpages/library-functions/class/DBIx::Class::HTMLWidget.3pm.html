<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBIx::Class::HTMLWidget - Like FromForm but with DBIx::Class and HTML::Widget</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdbix-class-htmlwidget-perl">libdbix-class-htmlwidget-perl_0.16-7_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DBIx::Class::HTMLWidget - Like FromForm but with DBIx::Class and HTML::Widget

</pre><h4><b>SYNOPSIS</b></h4><pre>
       You'll need a working DBIx::Class setup and some knowledge of HTML::Widget and Catalyst. If you have no
       idea what I'm talking about, check the (sparse) docs of those modules.

          package My::Model::DBIC::Pet;
          use base 'DBIx::Class';
          __PACKAGE__-&gt;load_components(qw/HTMLWidget Core/);

          package My::Controller::Pet;    # Catalyst-style

          # define the widget in a sub (DRY)
          sub widget_pet {
            my ($self,$c)=@_;
            my $w=$c-&gt;widget('pet')-&gt;method('get');
            $w-&gt;element('Textfield','name')-&gt;label('Name');
            $w-&gt;element('Textfield','age')-&gt;label('Age');
            ...
            return $w;
          }

          # this renders an edit form with values filled in from the DB
          sub edit : Local {
            my ($self,$c,$id)=@_;

            # get the object
            my $item=$c-&gt;model('DBIC::Pet')-&gt;find($id);
            $c-&gt;stash-&gt;{item}=$item;

            # get the widget
            my $w=$self-&gt;widget_pet($c);
            $w-&gt;action($c-&gt;uri_for('do_edit/'.$id));

            # fill widget with data from DB
            $item-&gt;fill_widget($w);
         }

         sub do_edit : Local {
           my ($self,$c,$id)=@_;

           # get the object from DB
           my $item=$c-&gt;model('DBIC::Pet')-&gt;find($id);
           $c-&gt;stash-&gt;{item}=$item;

           # get the widget
           my $w=$self-&gt;widget_pet($c);
           $w-&gt;action($c-&gt;uri_for('do_edit/'.$id));

           # process the form parameters
           my $result = $w-&gt;process($c-&gt;req);
           $c-&gt;stash-&gt;{'result'}=$result;

           # if there are no errors save the form values to the object
           unless ($result-&gt;has_errors) {
               $item-&gt;populate_from_widget($result);
               $c-&gt;res-&gt;redirect('/users/pet/'.$id);
           }

         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Something like Class::DBI::FromForm / Class::DBI::FromCGI but using HTML::Widget for form creation and
       validation and DBIx::Class as a ORM.

   <b>Methods</b>
       <u>fill_widget</u>

          $dbic_object-&gt;fill_widget($widget);

       Fill the values of a widgets elements with the values of the DBIC object.

       <u>populate_from_widget</u>

          my $obj=$schema-&gt;resultset('pet)-&gt;new-&gt;populate_from_widget($result);
          my $item-&gt;populate_from_widget($result);

       Create or update a DBIx::Class row from a HTML::Widget::Result object

</pre><h4><b>CAEVATS</b> <b>/</b> <b>POSSIBLE</b> <b>PROBLEMS</b></h4><pre>
   <b>PostgreSQL</b>
       <u>ERROR:</u>  <u>null</u> <u>value</u> <u>in</u> <u>column</u> <u>"private"</u> <u>violates</u> <u>not-null</u> <u>constraint</u>

       This is a result of we trying to set a value to undef that should not be. This is typically a problem
       when you have a column such ass "private boolean not null". We have a special-case for this, and if you
       set data_type =&gt; boolean, is_nullable =&gt; 0 in your ResultSource definition, we update the value to 0
       before attempting to insert or update

</pre><h4><b>AUTHORS</b></h4><pre>
       Thomas Klausner, &lt;<a href="mailto:domm@cpan.org">domm@cpan.org</a>&gt;, <a href="http://domm.zsi.at">http://domm.zsi.at</a>

       Marcus Ramberg, &lt;<a href="mailto:mramberg@cpan.org">mramberg@cpan.org</a>&gt;

       Andreas Marienborg, &lt;<a href="mailto:omega@palle.net">omega@palle.net</a>&gt;

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       Simon Elliott, &lt;<a href="mailto:cpan@browsing.co.uk">cpan@browsing.co.uk</a>&gt;

       Ashley Berlin

       Guillermo Sansovic

</pre><h4><b>LICENSE</b></h4><pre>
       This code is Copyright (c) 2003-2006 Thomas Klausner.  All rights reserved.

       You may use and distribute this module according to the same terms that Perl is distributed under.

perl v5.40.0                                       2024-11-30                       <u>DBIx::Class::<a href="../man3pm/HTMLWidget.3pm.html">HTMLWidget</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>