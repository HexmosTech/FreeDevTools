<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNMP::Info::Bridge - SNMP Interface to SNMP data available through the BRIDGE-MIB (RFC1493)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsnmp-info-perl">libsnmp-info-perl_3.972002-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SNMP::Info::Bridge - SNMP Interface to SNMP data available through the BRIDGE-MIB (RFC1493)

</pre><h4><b>AUTHOR</b></h4><pre>
       Max Baker

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $bridge = new SNMP::Info (
                                    AutoSpecify =&gt; 1,
                                    Debug       =&gt; 1,
                                    DestHost    =&gt; 'switch',
                                    Community   =&gt; 'public',
                                    Version     =&gt; 2
                                    );

        my $class = $bridge-&gt;class();
        print " Using device sub class : $class\n";

        # Grab Forwarding Tables
        my $interfaces = $bridge-&gt;interfaces();
        my $fw_mac     = $bridge-&gt;fw_mac();
        my $fw_port    = $bridge-&gt;fw_port();
        my $bp_index   = $bridge-&gt;bp_index();

        foreach my $fw_index (keys %$fw_mac){
           my $mac   = $fw_mac-&gt;{$fw_index};
           my $bp_id = $fw_port-&gt;{$fw_index};
           my $iid   = $bp_index-&gt;{$bp_id};
           my $port  = $interfaces-&gt;{$iid};

           print "Port:$port forwarding to $mac\n";
        }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>BRIDGE-MIB</u> is used by most Layer 2 devices, and holds information like the MAC Forwarding Table and
       Spanning Tree Protocol info.

       <u>Q-BRIDGE-MIB</u> holds 802.1q information -- VLANs and Trunking.  Cisco tends not to use this MIB, but some
       proprietary ones.  HP and some nicer vendors use this.  This is from "RFC2674_q".

       Create or use a subclass of SNMP::Info that inherits this class.  Do not use directly.

       For debugging you can call <b>new()</b> directly as you would in SNMP::Info

        my $bridge = new SNMP::Info::Bridge(...);

   <b>Inherited</b> <b>Classes</b>
       None.

   <b>Required</b> <b>MIBs</b>
       <u>BRIDGE-MIB</u>
       <u>Q-BRIDGE-MIB</u>
       <u>RSTP-MIB</u>

</pre><h4><b>GLOBALS</b></h4><pre>
       These are methods that return scalar values from SNMP

       $bridge-&gt;<b>b_mac()</b>
           Returns the MAC Address of the root bridge port

           ("dot1dBaseBridgeAddress")

       $bridge-&gt;<b>b_ports()</b>
           Returns the number of ports in device

           ("dot1dBaseNumPorts")

       $bridge-&gt;<b>b_type()</b>
           Returns the type of bridging this bridge can perform, transparent and/or source route.

           ("dot1dBaseType")

       $bridge-&gt;<b>stp_ver()</b>
           Returns what version of STP the device is running.

           ("dot1dStpProtocolSpecification")

       $bridge-&gt;<b>stp_time()</b>
           Returns time since last topology change detected. (100ths/second)

           ("dot1dStpTimeSinceTopologyChange")

       $bridge-&gt;<b>stp_root()</b>
           Returns root of STP.

           ("dot1dStpDesignatedRoot")

       $bridge-&gt;<b>qb_vlans_max()</b>
           Maximum number of VLANS supported on this device.

           ("dot1qMaxSupportedVlans")

       $bridge-&gt;<b>qb_vlans()</b>
           Current number of VLANs that are configured in this device.

           ("dot1qNumVlans")

       $bridge-&gt;<b>qb_next_vlan_index()</b>
           The next available value for "dot1qVlanIndex" of a local VLAN entry in "dot1qVlanStaticTable"

           ("dot1qNextFreeLocalVlanIndex")

</pre><h4><b>TABLE</b> <b>METHODS</b></h4><pre>
       These are methods that return tables of information in the form of a reference to a hash.

       $bridge-&gt;<b>i_vlan()</b>
           Returns a mapping between "ifIndex" and the PVID or default VLAN.

       $vtp-&gt;<b>i_untagged()</b>
           An alias for "i_vlan".

       $bridge-&gt;<b>i_vlan_membership()</b>
           Returns reference to hash of arrays: key = "ifIndex", value = array of VLAN IDs.  These are the VLANs
           which are members of the egress list for the port.

             Example:
             my $interfaces = $bridge-&gt;interfaces();
             my $vlans      = $bridge-&gt;i_vlan_membership();

             foreach my $iid (sort keys %$interfaces) {
               my $port = $interfaces-&gt;{$iid};
               my $vlan = join(',', sort(@{$vlans-&gt;{$iid}}));
               print "Port: $port VLAN: $vlan\n";
             }

       $bridge-&gt;<b>i_vlan_membership_untagged()</b>
           Returns reference to hash of arrays: key = "ifIndex", value = array of VLAN IDs.  These are the VLANs
           which are members of the untagged egress list for the port.

       $bridge-&gt;<b>qb_i_vlan_t()</b>
           Returns reference to hash: key = "dot1dBasePort", value = either 'trunk' for tagged ports or the VLAN
           ID.

       $bridge-&gt;<b>qb_fdb_index()</b>
           Returns reference to hash: key = FDB ID, value = VLAN ID.

       $bridge-&gt;<b>v_index()</b>
           Returns VLAN IDs

   <b>Forwarding</b> <b>Table</b> <b>("dot1dTpFdbEntry")</b>
       $bridge-&gt;<b>fw_mac()</b>
           Returns reference to hash of forwarding table MAC Addresses

           ("dot1dTpFdbAddress")

       $bridge-&gt;<b>fw_port()</b>
           Returns reference to hash of forwarding table entries port interface identifier (iid)

           ("dot1dTpFdbPort")

       $bridge-&gt;<b>fw_status()</b>
           Returns reference to hash of forwarding table entries status

           ("dot1dTpFdbStatus")

   <b>Bridge</b> <b>Port</b> <b>Table</b> <b>("dot1dBasePortEntry")</b>
       $bridge-&gt;<b>bp_index()</b>
           Returns reference to hash of bridge port table entries map back to interface identifier (iid)

           ("dot1dBasePortIfIndex")

       $bridge-&gt;<b>bp_port()</b>
           Returns  reference  to  hash of bridge port table entries for a port which (potentially) has the same
           value of "dot1dBasePortIfIndex" as another port on the same bridge, this object contains the name  of
           an     object instance unique to this port.

           ("dot1dBasePortCircuit")

   <b>Spanning</b> <b>Tree</b> <b>Instance</b> <b>Globals</b>
       These  are  not  part of a table, but return a hash reference to ease API compatibility with MST and PVST
       implementations indexed by a spanning tree instance id.

       $bridge-&gt;<b>stp_i_time()</b>
           Returns time since last topology change detected. (100ths/second)

           ("dot1dStpTimeSinceTopologyChange")

       $bridge-&gt;<b>stp_i_time()</b>
           Returns the total number of topology changes detected.

           ("dot1dStpTopChanges")

       $bridge-&gt;<b>stp_i_root()</b>
           Returns root of STP.

           ("dot1dStpDesignatedRoot")

       $bridge-&gt;<b>stp_i_root_port()</b>
           Returns the port number of the port that offers the lowest cost path to the root bridge.

           ("dot1dStpRootPort")

       $bridge-&gt;<b>stp_i_priority()</b>
           Returns the port number of the port that offers the lowest cost path to the root bridge.

           ("dot1dStpPriority")

   <b>Spanning</b> <b>Tree</b> <b>Protocol</b> <b>Table</b> <b>("dot1dStpPortTable")</b>
       Descriptions are straight from <u>BRIDGE-MIB.my</u>

       $bridge-&gt;<b>stp_p_id()</b>
           "The port number of the port  for  which  this  entry  contains  Spanning  Tree  Protocol  management
           information."

           ("dot1dStpPort")

       $bridge-&gt;<b>stp_p_priority()</b>
           "The value of the priority field which is contained in the first (in network byte order) octet of the
           (2 octet long) Port ID.  The other octet of the Port ID is given by the value of "dot1dStpPort"."

           ("dot1dStpPortPriority")

       $bridge-&gt;<b>stp_p_state()</b>
           "The  port's  current  state  as  defined  by  application of the Spanning Tree Protocol.  This state
           controls what action a port takes on reception of a frame.  If the bridge has detected a port that is
           malfunctioning it will place that port into the <b><a href="../man6/broken.6.html">broken</a></b>(6) state.  For ports which are  disabled  (see
           "dot1dStpPortEnable"), this object will have a value of <b><a href="../man1/disabled.1.html">disabled</a></b>(1)."

            <a href="../man1/disabled.1.html">disabled</a>(1)
            <a href="../man2/blocking.2.html">blocking</a>(2)
            <a href="../man3/listening.3.html">listening</a>(3)
            <a href="../man4/learning.4.html">learning</a>(4)
            <a href="../man5/forwarding.5.html">forwarding</a>(5)
            <a href="../man6/broken.6.html">broken</a>(6)

           ("dot1dStpPortState")

       $bridge-&gt;<b>stp_p_cost()</b>
           "The contribution of this port to the path cost of paths towards the spanning tree root which include
           this  port.  802.1D-1990 recommends that the default value of this parameter be in inverse proportion
           to the speed of the attached LAN."

           ("dot1dStpPortPathCost")

       $bridge-&gt;<b>stp_p_root()</b>
           "The unique Bridge Identifier of  the  Bridge  recorded  as  the  Root  in  the  Configuration  BPDUs
           transmitted by the Designated Bridge for the segment to which the port is attached."

           ("dot1dStpPortDesignatedRoot")

       $bridge-&gt;<b>stp_p_bridge()</b>
           "The  Bridge  Identifier of the bridge which this port considers to be the Designated Bridge for this
           port's segment."

           ("dot1dStpPortDesignatedBridge")

       $bridge-&gt;<b>stp_p_port()</b>
           ("dot1dStpPortDesignatedPort")

           "The Port Identifier of the port on the Designated Bridge for this port's segment."

       $bridge-&gt;<b>i_stp_port()</b>
           Returns the mapping of ("dot1dStpPortDesignatedPort") to the interface index (iid).

       $bridge-&gt;<b>i_stp_state()</b>
           Returns the mapping of ("dot1dStpPortState") to the interface index (iid).

       $bridge-&gt;<b>i_stp_id()</b>
           Returns the mapping of ("dot1dStpPort") to the interface index (iid).

       $bridge-&gt;<b>i_stp_bridge()</b>
           Returns the mapping of ("dot1dStpPortDesignatedBridge") to the interface index (iid).

   <b>Q-BRIDGE</b> <b>Port</b> <b>VLAN</b> <b>Table</b> <b>("dot1qPortVlanTable")</b>
       $bridge-&gt;<b>qb_i_vlan()</b>
           The PVID, the VLAN ID assigned to untagged frames or Priority-Tagged frames received on this port.

           ("dot1qPvid")

       $bridge-&gt;<b>qb_i_vlan_type()</b>
           Either "admitAll" or "admitOnlyVlanTagged".  This is a good spot to find trunk ports.

           ("dot1qPortAcceptableFrameTypes")

       $bridge-&gt;<b>qb_i_vlan_in_flt()</b>
           When this is "true" the device will discard incoming frames for VLANs which do not include this  Port
           in its Member set.  When "false", the port will accept all incoming frames.

           ("dot1qPortIngressFiltering")

   <b>Q-BRIDGE</b> <b>VLAN</b> <b>Current</b> <b>Table</b> <b>("dot1qVlanCurrentTable")</b>
       $bridge-&gt;<b>qb_cv_egress()</b>
           The set of ports which are assigned to the egress list for this VLAN.

           ("dot1qVlanCurrentEgressPorts")

       $bridge-&gt;<b>qb_cv_untagged()</b>
           The set of ports which should transmit egress packets for this VLAN as untagged.

           ("dot1qVlanCurrentUntaggedPorts")

       $bridge-&gt;<b>qb_cv_stat()</b>
           Status of the VLAN, other, permanent, or dynamicGvrp.

           ("dot1qVlanStatus")

   <b>Q-BRIDGE</b> <b>VLAN</b> <b>Static</b> <b>Table</b> <b>("dot1qVlanStaticTable")</b>
       $bridge-&gt;<b>qb_v_name()</b>
           Human-entered name for vlans.

           ("dot1qVlanStaticName")

       $bridge-&gt;<b>qb_v_egress()</b>
           The set of ports which are assigned to the egress list for this VLAN.

           ("dot1qVlanStaticEgressPorts")

       $bridge-&gt;<b>qb_v_fbdn_egress()</b>
           The set of ports which are prohibited from being included in the egress list for this VLAN.

           ("dot1qVlanForbiddenEgressPorts")

       $bridge-&gt;<b>qb_v_untagged()</b>
           The set of ports which should transmit egress packets for this VLAN as untagged.

           ("dot1qVlanStaticUntaggedPorts")

       $bridge-&gt;<b>qb_v_stat()</b>
           "active" !

           ("dot1qVlanStaticRowStatus")

   <b>Q-BRIDGE</b> <b>Filtering</b> <b>Database</b> <b>Table</b> <b>("dot1qFdbTable")</b>
       $bridge-&gt;<b>qb_fw_mac()</b>
           Returns reference to hash of forwarding table MAC Addresses

           ("dot1qTpFdbAddress")

       $bridge-&gt;<b>qb_fw_port()</b>
           Returns reference to hash of forwarding table entries port interface identifier (iid)

           ("dot1qTpFdbPort")

       $bridge-&gt;<b>qb_fw_vlan()</b>
           Returns reference to hash of forwarding table entries VLAN ID

       $bridge-&gt;<b>qb_fw_status()</b>
           Returns reference to hash of forwarding table entries status

           ("dot1qTpFdbStatus")

</pre><h4><b>SET</b> <b>METHODS</b></h4><pre>
       These  are  methods  that  provide  SNMP  set  functionality  for overridden methods or provide a simpler
       interface to complex set operations.  See "SETTING DATA VIA SNMP" in SNMP::Info for  general  information
       on set operations.

       $bridge-&gt;set_i_vlan(vlan, ifIndex)
           Currently unsupported.  Throws an error and returns.

       $bridge-&gt;set_i_untagged(vlan, ifIndex)
           An alias for "set_i_vlan".

       $bridge-&gt;set_i_pvid(pvid, ifIndex)
           Currently unsupported.  Throws an error and returns.

       $bridge-&gt;set_add_i_vlan_tagged(vlan, ifIndex)
           Currently unsupported.  Throws an error and returns.

       $bridge-&gt;set_remove_i_vlan_tagged(vlan, ifIndex)
           Currently unsupported.  Throws an error and returns.

perl v5.40.0                                       2024-11-09                            <u>SNMP::Info::<a href="../man3pm/Bridge.3pm.html">Bridge</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>