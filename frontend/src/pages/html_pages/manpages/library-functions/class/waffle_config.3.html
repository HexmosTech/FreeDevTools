<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>waffle_config, waffle_config_choose, waffle_config_destroy, waffle_config_get_native - class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libwaffle-doc">libwaffle-doc_1.8.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       waffle_config, waffle_config_choose, waffle_config_destroy, waffle_config_get_native - class
       waffle_config

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;waffle.h&gt;</b>

       <b>struct</b> <b>waffle_config;</b>

       <b>struct</b> <b>waffle_config*</b> <b>waffle_config_choose(struct</b> <b>waffle_display</b> <b>*</b><u>display</u><b>,</b> <b>const</b> <b>int32_t</b> <u>attrib_list</u><b>[]);</b>

       <b>bool</b> <b>waffle_config_destroy(struct</b> <b>waffle_config</b> <b>*</b><u>self</u><b>);</b>

       <b>union</b> <b>waffle_native_config*</b> <b>waffle_config_get_native(struct</b> <b>waffle_config</b> <b>*</b><u>self</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>struct</b> <b>waffle_config</b>
           An opaque type.

       <b>waffle_config_choose()</b>
           Choose a config on <u>display</u> that satifisfies the set of attributes specified by <u>attrib_list</u>. The
           config can later be used to create surfaces and contexts with <b><a href="../man3/waffle_window_create.3.html">waffle_window_create</a></b>(3) and
           <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3).

           <u>attrib_list</u> consists of a zero-terminated sequence of name/value pairs. If an attribute is absent
           from <u>attrib_list</u>, then it assumes its default value. If <u>attrib_list</u> is null, then it is intrepreted
           the same as the empty list, which is the list that contains only the terminal zero. See the section
           called “ATTRIBUTES” below for details on the set of attributes that may appear in <u>attrib_list</u>.

       <b>waffle_config_destroy()</b>
           Destroy the config and release its memory.

       <b>waffle_config_get_native()</b>
           Get the config's underlying native objects. Use <b><a href="../man3/free.3.html">free</a></b>(3) to deallocate the returned pointer. See
           <b><a href="../man3/waffle_native.3.html">waffle_native</a></b>(3) for the definition of <b>union</b> <b>waffle_native_config</b>.

</pre><h4><b>DISCUSSION</b></h4><pre>
       The context attributes (<b>WAFFLE_CONTEXT_*</b>) have quirks that are specific to the native platform. Waffle
       attempts to accomdate those quirks in a platform-neutral way as much as possible, but not all quirks can
       be eliminated through a platform abstraction layer. The quirks are documented below in detail.

       For example, one quirk that Waffle is able to accommodate is that some platforms require specification of
       context attributes at different times. GLX requires that the context attributes be specified at time of
       context creation [<b><a href="../man3/glXCreateContextAttribsARB.3.html">glXCreateContextAttribsARB</a></b>(3)] but MacOS requires the attributes to be specified when
       choosing a config [<b>CGLChoosePixelFormat</b>]. Therefore, Waffle is constrained by MacOS to require the
       attributes at time of <b>waffle_config_choose()</b>.

       For additional documentation on the behavior of context attributes on each platform, refer to the
       following:

           For GLX, refer to the <b>GLX</b> <b>1.4</b> <b>Specification</b>[1] and the specifications for extensions
           <b>GLX_ARB_create_context_profile</b>[2] and <b>GLX_EXT_create_context_es2_profile</b>[3].

           For EGL, refer to the <b>EGL</b> <b>1.4</b> <b>Specification</b>[4] and the specifications for extension
           <b>EGL_KHR_create_context</b>[5].

           For CGL, refer to the documentation of <b>kCGLPFAOpenGLProfile</b> in the <b>CGL</b> <b>Reference</b>[6].

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       <b>WAFFLE_CONTEXT_API</b>
           This is a required attribute; it has no default value. It must be one of:
               <b>WAFFLE_CONTEXT_OPENGL</b>
               <b>WAFFLE_CONTEXT_OPENGL_ES1</b>
               <b>WAFFLE_CONTEXT_OPENGL_ES2</b>
               <b>WAFFLE_CONTEXT_OPENGL_ES3</b>

           The actual set of supported values depends on the native platform. To check if the system supports a
           given API, use <b><a href="../man3/waffle_display_supports_context_api.3.html">waffle_display_supports_context_api</a></b>(3). Invariants and expectations for each platform
           are discussed below.

           On Android, <b>WAFFLE_CONTEXT_OPENGL_ES1</b> is always supported. Beginning with Ice Cream Sandwich (that
           is, Android 4.0), <b>WAFFLE_CONTEXT_OPENGL_ES2</b> is also supported. Use
           <b><a href="../man3/waffle_display_supports_context_api.3.html">waffle_display_supports_context_api</a></b>(3) to check if additional APIs are supported.

           On GLX, <b>WAFFLE_CONTEXT_OPENGL</b> is always supported. The system may optionally support additional APIs.

           On EGL platforms other than Android, no API is guaranteed to be supported. One must use
           <b><a href="../man3/waffle_display_supports_context_api.3.html">waffle_display_supports_context_api</a></b>(3) to check for supported APIs.

           On MacOS, only <b>WAFFLE_CONTEXT_OPENGL</b> is supported. This may change in the future if Apple adds
           support for additional APIs.

       <b>WAFFLE_CONTEXT_MAJOR_VERSION</b>
       <b>WAFFLE_CONTEXT_MINOR_VERSION</b>
           This pair of attributes is optional. They specify the context version that <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3)
           will request.

           The pair's default value and set of accepted values depend on the value of <b>WAFFLE_CONTEXT_API</b> and the
           native platform. Below is described in detail the rules by which waffle filters the set of accepted
           values according to the value of <b>WAFFLE_CONTEXT_API</b>. Even if <b>waffle_config_choose()</b> accepts the
           requested version and successfully returns a config, the native platform may later reject the
           requested version when <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) is called.

           If the requested API is <b>WAFFLE_CONTEXT_OPENGL_ES1</b>, then the default value is 1.0. The only accepted
           values are 1.0 and 1.1.

           If the requested API is <b>WAFFLE_CONTEXT_OPENGL_ES2</b>, then the default value is 2.0. Waffle accepts any
           value that is at least 2.0 and strictly less than 3.0.

           If the requested API is <b>WAFFLE_CONTEXT_OPENGL_ES3</b>, then the default value is 3.0. Waffle accepts any
           value that is at least 3.0 and strictly less than 4.0.

           If the requested API is <b>WAFFLE_CONTEXT_OPENGL</b>, then the default and minimum accepted value is 1.0.

       <b>WAFFLE_CONTEXT_PROFILE</b>
           This attributes is optional. It specifies the context profile that <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) will
           request.

           The attribute's default value and set of accepted values depend on the values of <b>WAFFLE_CONTEXT_API</b>,
           <b>WAFFLE_CONTEXT_MAJOR_VERSION</b>, <b>WAFFLE_CONTEXT_MINOR_VERSION</b>, and the native platform. Below is
           described in detail the rules by which waffle decides the default value and the set of accepted
           values. Even if <b>waffle_config_choose()</b> accepts the requested profile and successfully returns a
           config, the native platform may later reject the requested profile when <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) is
           called.

           If the requested API is <b>WAFFLE_CONTEXT_OPENGL_ES1</b>, <b>WAFFLE_CONTEXT_OPENGL_ES2</b>, or
           <b>WAFFLE_CONTEXT_OPENGL_ES3</b>, then the default and only accepted value is <b>WAFFLE_NONE</b>.

           If the requested API is <b>WAFFLE_CONTEXT_OPENGL</b> and the requested version is less than 3.2, then the
           default and only accepted value is <b>WAFFLE_NONE</b>.

           If the requested API is <b>WAFFLE_CONTEXT_OPENGL</b> and the requested version is at least 3.2, then default
           value is <b>WAFFLE_CONTEXT_CORE_PROFILE</b>. The set of accepted values is <b>WAFFLE_CONTEXT_CORE_PROFILE</b> and
           <b>WAFFLE_CONTEXT_COMPATIBILITY_PROFILE</b>.

       <b>WAFFLE_CONTEXT_FORWARD_COMPATIBLE</b>
           This attribute, if true, instructs <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) to create a forward-compatible context.
           However, even if <b>waffle_config_choose()</b> successfully returns a config for a forward-compatible
           context, the native platform may later reject it when <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) is called.

           Forward-compatible contexts do not support functionality marked as deprecated by that version of the
           API. A non-forward-compatible context supports all functionality in that version, deprecated or not.

           This attribute is optional and its default value is <a href="../man0/false.0.html">false</a>(0). Valid values are <a href="../man1/true.1.html">true</a>(1), <a href="../man0/false.0.html">false</a>(0), and
           <b>WAFFLE_DONT_CARE</b>. However, <a href="../man1/true.1.html">true</a>(1) is valid only if the requested context API is
           <b>WAFFLE_CONTEXT_OPENGL</b> and its version is at least 3.0.

       <b>WAFFLE_CONTEXT_DEBUG</b>
           This attribute, if true, instructs <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) to create a debug context. However, even
           if <b>waffle_config_choose()</b> successfully returns a config for a debug context, the native platform may
           later reject it when <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) is called.

           Debug contexts are intended for use during application development, to provide additional runtime
           checking, validation, and logging functionality while possibly incurring performance penalties. The
           additional functionality provided by debug contexts may vary according to the implementation. In some
           cases a debug context may be identical to a non-debug context.

           This attribute is optional and its default value is <a href="../man0/false.0.html">false</a>(0). Valid values are <a href="../man1/true.1.html">true</a>(1), <a href="../man0/false.0.html">false</a>(0), and
           <b>WAFFLE_DONT_CARE</b>.

       <b>WAFFLE_CONTEXT_ROBUST_ACCESS</b>
           This attribute, if true, instructs <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) to create a robust access context.

           Robust access contexts can implement additional runtime checks, such as bounds checks for various
           operations.

           This attribute is optional and its default value is <a href="../man0/false.0.html">false</a>(0). Valid values are <a href="../man1/true.1.html">true</a>(1), <a href="../man0/false.0.html">false</a>(0), and
           <b>WAFFLE_DONT_CARE</b>.

       <b>WAFFLE_RED_SIZE</b>
       <b>WAFFLE_GREEN_SIZE</b>
       <b>WAFFLE_BLUE_SIZE</b>
       <b>WAFFLE_ALPHA_SIZE</b>
       <b>WAFFLE_DEPTH_SIZE</b>
       <b>WAFFLE_STENCIL_SIZE</b>
           The default value for each size attribute is <b>0</b>. Valid values are the non-negative integers and
           <b>WAFFLE_DONT_CARE</b>. If the requested size for a channel is 0, then any surface created with the config
           will lack that channel. If the requested size for a channel is positive, then the number of bits in
           that channel for any surface created with the config will be at least the requested size.

       <b>WAFFLE_SAMPLE_BUFFERS</b>
       <b>WAFFLE_SAMPLES</b>
           The default value of <b>WAFFLE_SAMPLE_BUFFERS</b> is <a href="../man0/false.0.html">false</a>(0). Valid values are <a href="../man1/true.1.html">true</a>(1), <a href="../man0/false.0.html">false</a>(0), and
           <b>WAFFLE_DONT_CARE</b>. The attribute specifies if a surface created with this config is double-buffered.
           If false, then any surface created with the config will not be multisampled. If true, the any surface
           created with the config will be multisampled, where the number of samples will be at least
           <b>WAFFLE_SAMPLES</b>.

           The default value of <b>WAFFLE_SAMPLES</b> is <b>0</b>. Valid values are the non-negative integers and
           <b>WAFFLE_DONT_CARE</b>.

       <b>WAFFLE_DOUBLE_BUFFERED</b>
           The default value is <a href="../man1/true.1.html">true</a>(1). Valid values are <a href="../man1/true.1.html">true</a>(1), <a href="../man0/false.0.html">false</a>(0), and <b>WAFFLE_DONT_CARE</b>. This
           attribute specifies if a surface created with this config is double-buffered.

       <b>WAFFLE_ACCUM_BUFFER</b>
           The default value is <a href="../man0/false.0.html">false</a>(0). Valid values are <a href="../man1/true.1.html">true</a>(1), <a href="../man0/false.0.html">false</a>(0), and <b>WAFFLE_DONT_CARE</b>. This
           attribute specifies if a surface created with this config possesses an accumulation buffer.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Functions whose return type is <b>bool</b> return true on success and false on failure. Functions whose return
       type is a pointer return <b>NULL</b> on failure. Use <b><a href="../man3/waffle_error_get_info.3.html">waffle_error_get_info</a></b>(3) to get information about any
       errors.

</pre><h4><b>ERRORS</b></h4><pre>
       See <b><a href="../man3/waffle_error.3.html">waffle_error</a></b>(3) for the complete list of waffle's error codes.

       Listed below are the errors specific to the <b>waffle_config</b> functions.

       <b>waffle_config_choose()</b>

           <b>WAFFLE_ERROR_BAD_ATTRIBUTE</b>
               An item in <u>attrib_list</u> is unrecognized or has an invalid value, or a required attribute is
               missing.

           <b>WAFFLE_ERROR_UNSUPPORTED_ON_PLATFORM</b>
               If the native platform does not expose the necessary functionality to create a context with the
               properties specified by config or if waffle can predetermine that the native platform will reject
               the config at context creation, but otherwise the requested attributes are valid, then
               <b>WAFFLE_ERROR_UNSUPPORTED_ON_PLATFORM</b> is emitted.

               For example,

               •   GLX supports creation of an OpenGL ES2 context only if libGLESv2.so.2 is installed and if
                   GLX_EXT_create_context_es2_profile is exposed as both a server and client extension.

               •   MacOS does not support the OpenGL 3.2 Compatibility Profile, and it supports the OpenGL 3.2
                   Core Profile only for MacOS &gt;= 10.7 on select GPU's.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Example</b> <b>1</b>
       Choose a config for an OpenGL legacy context that has at least 8 bits in each of the RGBA channels.

           #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
           #include &lt;waffle.h&gt;

           static const int32_t init_attrib_list[] = {
               WAFFLE_PLATFORM, WAFFLE_PLATFORM_GLX,
               0,
           };

           static const int32_t config_attrib_list[] = {
               WAFFLE_CONTEXT_API, WAFFLE_CONTEXT_OPENGL,

               WAFFLE_RED_SIZE,    8,
               WAFFLE_GREEN_SIZE,  8,
               WAFFLE_BLUE_SIZE,   8,
               WAFFLE_ALPHA_SIZE,  8,

               0,
           };

           int
           main()
           {
               struct waffle_display *display;
               struct waffle_config *config;
               bool ok;

               ok = waffle_init(init_attrib_list);
               if (!ok)
                 exit(EXIT_FAILURE);

               display = waffle_display_connect(NULL);
               if (!display)
                 exit(EXIT_FAILURE);

               config = waffle_config_choose(config_attrib_list);
               if (!config)
                 exit(EXIT_FAILURE);

               // Now clean up.
               waffle_config_destroy(config);
               waffle_display_disconnect(display);
               return EXIT_SUCCESS;
           }

   <b>Example</b> <b>2</b>
       An attribute list for creating an OpenGL 3.2 Core Profile context that has depth and stencil buffers and
       some non-zero number of bits in each of the RGB channels. Since the default value of <b>WAFFLE_ALPHA_SIZE</b> is
       <b>WAFFLE_DONT_CARE</b>, the config may not have an alpha channel.

           const int32_t attrib_list[] = {
               WAFFLE_CONTEXT_API,             WAFFLE_CONTEXT_OPENGL,
               WAFFLE_CONTEXT_MAJOR_VERSION,   3,
               WAFFLE_CONTEXT_MINOR_VERSION,   2,
               WAFFLE_CONTEXT_PROFILE,         WAFFLE_CONTEXT_CORE_PROFILE,

               WAFFLE_RED_SIZE,                1,
               WAFFLE_GREEN_SIZE,              1,
               WAFFLE_BLUE_SIZE,               1,

               WAFFLE_DEPTH_SIZE,             24,
               WAFFLE_STENCIL_SIZE,            8,

               0,
           };

</pre><h4><b>ISSUES</b></h4><pre>
       Please report bugs or and feature requests to <b>https://gitlab.freedesktop.org/mesa/waffle/issues</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/waffle.7.html">waffle</a></b>(7) <b><a href="../man3/waffle_context_create.3.html">waffle_context_create</a></b>(3) <b><a href="../man3/waffle_window_create.3.html">waffle_window_create</a></b>(3)

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Chad</b> <b>Versace</b> &lt;<a href="mailto:chad.versace@linux.intel.com">chad.versace@linux.intel.com</a>&gt;
           Former maintainer

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2013 Intel

       This manual page is licensed under the Creative Commons Attribution-ShareAlike 3.0 United States License
       (CC BY-SA 3.0). To view a copy of this license, visit <b><a href="http://creativecommons.org.license/by-sa/3.0/us">http://creativecommons.org.license/by-sa/3.0/us</a></b>.

</pre><h4><b>NOTES</b></h4><pre>
        1. GLX 1.4 Specification
           <a href="http://www.opengl.org/registry/doc/glx1.4.pdf">http://www.opengl.org/registry/doc/glx1.4.pdf</a>

        2. GLX_ARB_create_context_profile
           <a href="http://www.opengl.org/registry/specs/ARB/glx_create_context.txt">http://www.opengl.org/registry/specs/ARB/glx_create_context.txt</a>

        3. GLX_EXT_create_context_es2_profile
           <a href="http://www.opengl.org/registry/specs/EXT/glx_create_context_es2_profile.txt">http://www.opengl.org/registry/specs/EXT/glx_create_context_es2_profile.txt</a>

        4. EGL 1.4 Specification
           <a href="http://www.khronos.org/registry/egl/specs/eglspec.1.4.20110406.pdf">http://www.khronos.org/registry/egl/specs/eglspec.1.4.20110406.pdf</a>

        5. EGL_KHR_create_context
           <a href="http://www.khronos.org/registry/egl/extensions/KHR/EGL_KHR_create_context.txt">http://www.khronos.org/registry/egl/extensions/KHR/EGL_KHR_create_context.txt</a>

        6. CGL Reference
           https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGL_OpenGL/Reference/reference.html

waffle                                             08/09/2024                                   <u><a href="../man3/WAFFLE_CONFIG.3.html">WAFFLE_CONFIG</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>