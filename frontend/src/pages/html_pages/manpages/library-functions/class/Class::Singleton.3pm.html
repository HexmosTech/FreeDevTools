<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class::Singleton - Implementation of a "Singleton" class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libclass-singleton-perl">libclass-singleton-perl_1.6-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Class::Singleton - Implementation of a "Singleton" class

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Class::Singleton;

           my $one = Class::Singleton-&gt;instance();   # returns a new instance
           my $two = Class::Singleton-&gt;instance();   # returns same instance

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is the "Class::Singleton" module.  A Singleton describes an object class that can have only one
       instance in any system.  An example of a Singleton might be a print spooler or system registry.  This
       module implements a Singleton class from which other classes can be derived.  By itself, the
       "Class::Singleton" module does very little other than manage the instantiation of a single object.  In
       deriving a class from "Class::Singleton", your module will inherit the Singleton instantiation method and
       can implement whatever specific functionality is required.

       For a description and discussion of the Singleton class, see "Design Patterns", Gamma et al, Addison-
       Wesley, 1995, ISBN 0-201-63361-2.

   <b>Using</b> <b>the</b> <b>Class::Singleton</b> <b>Module</b>
       To import and use the "Class::Singleton" module the following line should appear in your Perl program:

           use Class::Singleton;

       The <b>instance()</b> method is used to create a new "Class::Singleton" instance, or return a reference to an
       existing instance. Using this method, it is only possible to have a single instance of the class in any
       system.

           my $highlander = Class::Singleton-&gt;instance();

       Assuming that no "Class::Singleton" object currently exists, this first call to <b>instance()</b> will create a
       new "Class::Singleton" and return a reference to it. Future invocations of <b>instance()</b> will return the
       same reference.

           my $macleod    = Class::Singleton-&gt;instance();

       In the above example, both $highlander and $macleod contain the same reference to a "Class::Singleton"
       instance.  There can be only one.

   <b>Deriving</b> <b>Singleton</b> <b>Classes</b>
       A module class may be derived from "Class::Singleton" and will inherit the <b>instance()</b> method that
       correctly instantiates only one object.

           package PrintSpooler;
           use base 'Class::Singleton';

           # derived class specific code
           sub submit_job {
               ...
           }

           sub cancel_job {
               ...
           }

       The "PrintSpooler" class defined above could be used as follows:

           use PrintSpooler;

           my $spooler = PrintSpooler-&gt;instance();

           $spooler-&gt;submit_job(...);

       The <b>instance()</b> method calls the <b>_new_instance()</b> constructor method the first and only time a new instance
       is created. All parameters passed to the <b>instance()</b> method are forwarded to <b>_new_instance()</b>. In the base
       class the <b>_new_instance()</b> method returns a blessed reference to a hash array containing any arguments
       passed as either a hash reference or list of named parameters.

           package MyConfig;
           use base 'Class::Singleton';

           sub foo {
               shift-&gt;{ foo };
           }

           sub bar {
               shift-&gt;{ bar };
           }

           package main;

           # either: hash reference of named parameters
           my $config = MyConfig-&gt;instance({ foo =&gt; 10, bar =&gt; 20 });

           # or: list of named parameters
           my $config = MyConfig-&gt;instance( foo =&gt; 10, bar =&gt; 20 );

           print $config-&gt;foo();   # 10
           print $config-&gt;bar();   # 20

       Derived classes may redefine the <b>_new_instance()</b> method to provide more specific object initialisation or
       change the underlying object type (to a list reference, for example).

           package MyApp::Database;
           use base 'Class::Singleton';
           use DBI;

           # this only gets called the first time instance() is called
           sub _new_instance {
               my $class = shift;
               my $self  = bless { }, $class;
               my $db    = shift || "myappdb";
               my $host  = shift || "localhost";

               $self-&gt;{ DB } = DBI-&gt;connect("DBI:mSQL:$db:$host")
                   || die "Cannot connect to database: $DBI::errstr";

               # any other initialisation...

               return $self;
           }

       The above example might be used as follows:

           use MyApp::Database;

           # first use - database gets initialised
           my $database = MyApp::Database-&gt;instance();

       Some time later on in a module far, far away...

           package MyApp::FooBar
           use MyApp::Database;

           # this FooBar object needs access to the database; the Singleton
           # approach gives a nice wrapper around global variables.

           sub new {
               my $class = shift;
               bless {
                   database =&gt; MyApp::Database-&gt;instance(),
               }, $class;
           }

       The "Class::Singleton" <b>instance()</b> method uses a private hash to store a reference to any existing
       instance of the object, keyed against the derived class package name.

       This allows different classes to be derived from "Class::Singleton" that can co-exist in the same system,
       while still allowing only one instance of any one class to exist. For example, it would be possible to
       derive both '"PrintSpooler"' and '"MyApp::Database"' from "Class::Singleton" and have a single instance
       of <u>each</u> in a system, rather than a single instance of <u>either</u>.

       You can use the <b>has_instance()</b> method to find out if a particular class already has an instance defined.
       A reference to the instance is returned or "undef" if none is currently defined.

           my $instance = MyApp::Database-&gt;has_instance()
               || warn "No instance is defined yet";

   <b>Methods</b>
       <b>instance()</b>
           This  method  is  called  to  return  a  current  object  instance  or  create  a  new one by calling
           <b>_new_instance()</b>.

       <b>has_instance()</b>
           This method returns a reference to any existing instance or "undef" if none is defined.

               my $testing = MySingleton1-&gt;has_instance()
                   || warn "No instance defined for MySingleton1";

       <b>_new_instance()</b>
           This "private" method is called by <b>instance()</b> to create a new object instance if one doesn't  already
           exist. It is not intended to be called directly (although there's nothing to stop you from calling it
           if you're really determined to do so).

           It  creates  a  blessed hash reference containing any arguments passed to the method as either a hash
           reference or list of named parameters.

               # either: hash reference of named parameters
               my $example1 = MySingleton1-&gt;new({ pi =&gt; 3.14, e =&gt; 2.718 });

               # or: list of named parameters
               my $example2 = MySingleton2-&gt;new( pi =&gt; 3.14, e =&gt; 2.718 );

           It is important to remember that the <b>instance()</b> method will  <u>only</u>  call  the  <b>_</b><u><b>new_instance()</b></u>  method
           once,  so  any  arguments you pass may be silently ignored if an instance already exists. You can use
           the <b>has_instance()</b> method to determine if an instance is already defined.

</pre><h4><b>EXPORTS</b></h4><pre>
       <u>None</u>.

</pre><h4><b>KNOWN</b> <b>BUGS</b></h4><pre>
       <u>None</u>.

</pre><h4><b>FEEDBACK</b></h4><pre>
       Patches, bug reports, suggestions or any other feedback is welcome.

       Patches can be sent as GitHub pull requests at &lt;https://github.com/steve-m-hay/Class-Singleton/pulls&gt;.

       Bug   reports    and    suggestions    can    be    made    on    the    CPAN    Request    Tracker    at
       &lt;https://rt.cpan.org/Public/Bug/Report.html?Queue=Class-Singleton&gt;.

       Currently     active     requests    on    the    CPAN    Request    Tracker    can    be    viewed    at
       &lt;https://rt.cpan.org/Public/Dist/Display.html?Status=Active;Queue=Class-Singleton&gt;.

       Please test this distribution.  See CPAN Testers Reports at &lt;https://www.cpantesters.org/&gt; for details of
       how to get involved.

       Previous     test     results     on     CPAN     Testers     Reports     can      be      viewed      at
       &lt;https://www.cpantesters.org/distro/C/Class-Singleton.html&gt;.

       Please          rate         this         distribution         on         CPAN         Ratings         at
       &lt;https://cpanratings.perl.org/rate/?distribution=Class-Singleton&gt;.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       The latest version of this module is available from CPAN (see "CPAN" in perlmodlib for details) at

       &lt;https://metacpan.org/release/Class-Singleton&gt; or

       &lt;https://www.cpan.org/authors/id/S/SH/SHAY/&gt; or

       &lt;https://www.cpan.org/modules/by-module/Class/&gt;.

       The latest source code is available from GitHub at &lt;https://github.com/steve-m-hay/Class-Singleton&gt;.

</pre><h4><b>INSTALLATION</b></h4><pre>
       See the <u>INSTALL</u> file.

</pre><h4><b>AUTHOR</b></h4><pre>
       Andy Wardley &lt;<a href="mailto:abw@wardley.org">abw@wardley.org</a> &lt;<a href="mailto:abw@wardley.org">mailto:abw@wardley.org</a>&gt;&gt; &lt;<a href="http://wardley.org/">http://wardley.org/</a>&gt;.

       Thanks to Andreas Koenig for providing some significant speedup patches and other ideas.

       Steve Hay &lt;<a href="mailto:shay@cpan.org">shay@cpan.org</a> &lt;<a href="mailto:shay@cpan.org">mailto:shay@cpan.org</a>&gt;&gt; is now maintaining Class::Singleton as of version 1.5.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 1998 Canon Research Centre Europe Ltd.

       Copyright (C) 1998-2008 Andy Wardley.  All rights reserved.

       Copyright (C) 2014, 2020 Steve Hay.  All rights reserved.

</pre><h4><b>LICENCE</b></h4><pre>
       This module is free software; you can redistribute it and/or modify it  under  the  same  terms  as  Perl
       itself,  i.e.  under  the  terms  of  either  the  GNU General Public License or the Artistic License, as
       specified in the <u>LICENCE</u> file.

</pre><h4><b>VERSION</b></h4><pre>
       Version 1.6

</pre><h4><b>DATE</b></h4><pre>
       02 Dec 2020

</pre><h4><b>HISTORY</b></h4><pre>
       See the <u>Changes</u> file.

perl v5.36.0                                       2022-10-22                              <u>Class::<a href="../man3pm/Singleton.3pm.html">Singleton</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>