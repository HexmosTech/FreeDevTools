<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNMP::Info::CDP - SNMP Interface to Cisco Discovery Protocol (CDP) using SNMP</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsnmp-info-perl">libsnmp-info-perl_3.972002-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SNMP::Info::CDP - SNMP Interface to Cisco Discovery Protocol (CDP) using SNMP

</pre><h4><b>AUTHOR</b></h4><pre>
       Max Baker

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $cdp = new SNMP::Info (
                                    AutoSpecify =&gt; 1,
                                    Debug       =&gt; 1,
                                    DestHost    =&gt; 'router',
                                    Community   =&gt; 'public',
                                    Version     =&gt; 2
                                  );

        my $class = $cdp-&gt;class();
        print " Using device sub class : $class\n";

        $hascdp   = $cdp-&gt;hasCDP() ? 'yes' : 'no';

        # Print out a map of device ports with CDP neighbors:
        my $interfaces   = $cdp-&gt;interfaces();
        my $cdp_if       = $cdp-&gt;cdp_if();
        my $cdp_ip       = $cdp-&gt;cdp_ip();
        my $cdp_port     = $cdp-&gt;cdp_port();

        foreach my $cdp_key (keys %$cdp_ip){
           my $iid           = $cdp_if-&gt;{$cdp_key};
           my $port          = $interfaces-&gt;{$iid};
           my $neighbor      = $cdp_ip-&gt;{$cdp_key};
           my $neighbor_port = $cdp_port-&gt;{$cdp_key};
           print "Port : $port connected to $neighbor / $neighbor_port\n";
        }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       SNMP::Info::CDP is a subclass of SNMP::Info that provides an object oriented interface to CDP information
       through SNMP.

       CDP is a Layer 2 protocol that supplies topology information of devices that also speak CDP, mostly
       switches and routers.  CDP is implemented by Cisco and several other vendors.

       Create or use a device subclass that inherits this class.  Do not use directly.

       Each device implements a subset of the global and cache entries.  Check the return value to see if that
       data is held by the device.

   <b>Inherited</b> <b>Classes</b>
       None.

   <b>Required</b> <b>MIBs</b>
       <u>CISCO-CDP-MIB</u>

</pre><h4><b>GLOBALS</b></h4><pre>
       These are methods that return scalar values from SNMP

       $cdp-&gt;<b>hasCDP()</b>
           Is CDP is active in this device?

           Accounts for SNMP version 1 devices which may have CDP but not <b>cdp_run()</b>

       $cdp-&gt;<b>cdp_run()</b>
           Is  CDP  enabled on this device?  Note that a lot of Cisco devices that implement CDP don't implement
           this value. @#%$!

           ("cdpGlobalRun")

       $cdp-&gt;<b>cdp_interval()</b>
           Interval in seconds at which CDP messages are generated.

           ("cdpGlobalMessageInterval")

       $cdp-&gt;<b>cdp_holdtime()</b>
           Time in seconds that CDP messages are kept.

           ("cdpGlobalHoldTime")

       $cdp-&gt;<b>cdp_gid()</b>
           Returns CDP device ID.

           This is the device id broadcast via CDP to other devices,  and  is  what  is  retrieved  from  remote
           devices with $cdp-&gt;<b>id()</b>.

           ("cdpGlobalDeviceId")

</pre><h4><b>TABLE</b> <b>METHODS</b></h4><pre>
       These are methods that return tables of information in the form of a reference to a hash.

   <b>CDP</b> <b>CACHE</b> <b>ENTRIES</b>
       $cdp-&gt;<b>cdp_capabilities()</b>
           Returns  Device  Functional Capabilities.  Results are munged into an ascii binary string, MSB.  Each
           digit represents a bit from the table below from the CDP Capabilities Mapping to Smartport Type table
           within   the   Cisco   Small   Business   200   Series    Smart    Switch    Administration    Guide,
           &lt;<a href="http://www.cisco.com/c/en/us/support/switches/small-business-200-series-smart-switches/products-maintenance-guides-list.html">http://www.cisco.com/c/en/us/support/switches/small-business-200-series-smart-switches/products-maintenance-guides-list.html</a>&gt;:

           (Bit) - Description

           (0x400) - Two-Port MAC Relay.
           (0x200) - CAST Phone Port / CVTA / Supports-STP-Dispute depending upon platform.
           (0x100) - Remotely-Managed Device.
           (0x80)  - VoIP Phone.
           (0x40)  - Provides level 1 functionality.
           (0x20)  - The bridge or switch does not forward IGMP Report packets on non router ports.
           (0x10)  - Sends and receives packets for at least one network layer protocol. If the device is
           routing the protocol, this bit should not be set.
           (0x08)  - Performs level 2 switching. The difference between this bit and bit 0x02 is that a switch
           does not run the Spanning-Tree Protocol. This device is assumed to be deployed in a physical loop-
           free topology.
           (0x04)  - Performs level 2 source-route bridging. A source-route bridge would set both this bit and
           bit 0x02.
           (0x02)  - Performs level 2 transparent bridging.
           (0x01)  - Performs level 3 routing for at least one network layer protocol.

           Thanks to Martin Lorensen for a pointer to the original information and CPAN user Alex for updates.

           ("cdpCacheCapabilities")

       $cdp-&gt;<b>cdp_domain()</b>
           Returns remote VTP Management Domain as defined in "CISCO-VTP-MIB::managementDomainName"

           ("cdpCacheVTPMgmtDomain")

       $cdp-&gt;<b>cdp_duplex()</b>
           Returns the port duplex status from remote devices.

           ("cdpCacheDuplex")

       $cdp-&gt;<b>cdp_id()</b>
           Returns remote device id string

           ("cdpCacheDeviceId")

       $cdp-&gt;<b>cdp_if()</b>
           Returns the mapping to the SNMP Interface Table.

           Note that a lot devices don't implement $cdp-&gt;<b>cdp_index()</b>,  So if it isn't around, we fake it.

           In  order  to map the cdp table entry back to the <b>interfaces()</b> entry, we truncate the last number off
           of it :

             # it exists, yay.
             my $cdp_index     = $device-&gt;cdp_index();
             return $cdp_index if defined $cdp_index;

             # if not, let's fake it
             my $cdp_ip       = $device-&gt;cdp_ip();

             my %cdp_if
             foreach my $key (keys %$cdp_ip){
                 $iid = $key;
                 ## Truncate off .1 from cdp response
                 $iid =~ s/\.\d+$//;
                 $cdp_if{$key} = $iid;
             }

             return \%cdp_if;

       $cdp-&gt;<b>cdp_index()</b>
           Returns the mapping to the SNMP2 Interface table for CDP Cache Entries.

           Most devices don't implement this, so you probably want to use $cdp-&gt;<b>cdp_if()</b> instead.

           See <b>cdp_if()</b> entry.

           ("cdpCacheIfIndex")

       $cdp-&gt;<b>cdp_ip()</b>
           If $cdp-&gt;<b>cdp_proto()</b> is supported, returns remote IPV4 address only.  Otherwise it  will  return  all
           addresses.

           ("cdpCacheAddress")

       $cdp-&gt;<b>cdp_addr()</b>
           Returns remote address

           ("cdpCacheAddress")

       $cdp-&gt;<b>cdp_platform()</b>
           Returns remote platform id

           ("cdpCachePlatform")

       $cdp-&gt;<b>cdp_port()</b>
           Returns  remote  Port-ID.  Most  of  the  time  this  is a string with the port name, but this is not
           guaranteed to be so.

           ("cdpCacheDevicePort")

       $cdp-&gt;<b>cdp_proto()</b>
           Returns remote address type received.  Usually IP.

           ("cdpCacheAddressType")

       $cdp-&gt;<b>cdp_ver()</b>
           Returns remote hardware version

           ("cdpCacheVersion")

       $cdp-&gt;<b>cdp_vlan()</b>
           Returns the remote interface native VLAN.

           ("cdpCacheNativeVLAN")

       $cdp-&gt;<b>cdp_power()</b>
           Returns the amount of power consumed by remote device in milliwatts munged for decimal placement.

           ("cdpCachePowerConsumption")

       $cdp-&gt;<b>cdp_cap()</b>
           Returns hash of arrays with each array containing the system capabilities  supported  by  the  remote
           system.   Possible  elements  in  the  array  are  "Router",  "Trans-Bridge",  "Source-Route-Bridge",
           "Switch",     "Host",     "IGMP",      "Repeater",      "VoIP-Phone",      "Remotely-Managed-Device",
           "Supports-STP-Dispute", and "Two-port Mac Relay".

</pre><h4><b>Data</b> <b>Munging</b> <b>Callback</b> <b>Subroutines</b></h4><pre>
       $cdp-&gt;<b>munge_power()</b>
           Inserts a decimal at the proper location.

perl v5.40.0                                       2024-11-09                               <u>SNMP::Info::<a href="../man3pm/CDP.3pm.html">CDP</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>