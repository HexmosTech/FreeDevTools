<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Class::MethodMaker::V1Compat - V1 compatibility code for C::MM</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libclass-methodmaker-perl">libclass-methodmaker-perl_2.25-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Class::MethodMaker::V1Compat - V1 compatibility code for C::MM

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This class is for internal implementation only.  It is not a public API.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Class::MethodMaker version 2 strives for backward-compatibility with version 1 as far as possible.  That
       is to say, classes built with version 1 should work with few if any changes.  However, the calling
       conventions for building new classes are significantly different: this is necessary to achieve a greater
       consistency of arguments.

       Version 2 takes all arguments within a single arrayref:

         use Class::MethodMaker
           [ scalar =&gt; 'a' ];

       If arguments are presented as a list, then Class::MethodMaker assumes that this is a version 1 call, and
       acts accordingly.  Version 1 arguments are passed and internally rephrased to version 2 arguments, and
       passed off to the version 2 engine.  Thus, the majority of version 1 calls can be upgraded to version 2
       merely by rephrasing.  However, there are a number of behaviours that in version 1 that are internally
       inconsistent.  These behaviours are mimicked in version 1 mode as far as possible, but are not
       reproducible in version 2 (to allow version 2 clients to rely on a more internally consistent interface).

   <b>Version</b> <b>2</b> <b>Implementations</b>
       The nearest equivalent to each 1 component (slot) available in version 2 is shown below using the
       indicated data-structures &amp; options to create a component called "a" that mimics the V1 component
       behaviour as closely as possible:

       abstract
             use Class::MethodMaker
               [ abstract =&gt; 'a' ];

       boolean
           Boolean  is available as a backwards compatibility hack, but there is currently no V2 equivalent.  It
           is likely that some replacement mechanism will be introduced in the  future,  but  that  it  will  be
           incompatible with the version 1 boolean.

       code
             use Class::MethodMaker
               [ scalar =&gt; 'a' ];

           Let's  face it, the v1 store-if-it's-a-coderef-else-retrieve semantics are rather broken.  How do you
           pass a coderef as argument to one of these?  It is on the TODO list to recognize code as  fundamental
           restricted type (analogous to INTEGER), which would add in a *_invoke method.

       copy
             use Class::MethodMaker
               [ copy =&gt; 'a' ];

           The v2 method is the same as v1.

       counter
             use Class::MethodMaker
               [ scalar =&gt; [{-type =&gt; Class::MethodMaker::Constants::INTEGER}, 'a'] ];

       copy
       deep_copy
             use Class::MethodMaker
               [ copy =&gt; [ -deep =&gt; 'a' ] ];

       get_concat
             use Class::MethodMaker
               [ scalar =&gt; [{ -store_cb =&gt; sub {
                                             defined $_[1] ? ( defined $_[3] ?
                                                               "$_[3] $_[1]" : $_[1] )
                                                           : undef;
                                           }
                            },
                            'a' ]
               ];

       get_set
             use Class::MethodMaker
               [ scalar =&gt; 'a' ];

       hash
             use Class::MethodMaker
               [ hash =&gt; 'a' ];

       key_attrib
           Although v1 calls will continue to work, this is not supported in v2.

       key_with_create
           Although v1 calls will continue to work, this is not supported in v2.

       list
             use Class::MethodMaker
               [ list =&gt; 'a' ];

           Note that the "*" method now <u>sets</u> the whole array if given arguments.

       method
           See "code".

       new
             use Class::MethodMaker
               [ new =&gt; 'a' ];

       new_hash_init
             use Class::MethodMaker
               [ new =&gt; [ -hash =&gt; 'a' ] ];

       new_hash_with_init
             use Class::MethodMaker
               [ new =&gt; [ -hash =&gt; -init =&gt; 'a' ] ];

       new_with_args
           Although v1 calls will continue to work, this is not supported in v2, for it is a trivial application
           of "new_with_init".

       new_with_init
             use Class::MethodMaker
               [ new =&gt; [ -init =&gt; 'a' ] ];

       object
             use Class::MethodMaker
               [ scalar =&gt; [{ -type    =&gt; 'MyClass',
                              -forward =&gt; [qw/ method1 method2 /] }, 'a' ]
               ];

       object_tie_hash
             use Class::MethodMaker
               [ hash =&gt; [{ -type      =&gt; 'MyClass',
                            -forward   =&gt; [qw/ method1 method2 /],
                            -tie_class =&gt; 'Tie::MyTie',
                            -tie_args  =&gt; [qw/ foo bar baz /],
                          }, 'a' ]
               ];

       object_tie_list
             use Class::MethodMaker
               [ array =&gt; [{ -type      =&gt; 'MyClass',
                             -forward   =&gt; [qw/ method1 method2 /],
                             -tie_class =&gt; 'Tie::MyTie',
                             -tie_args  =&gt; [qw/ foo bar baz /],
                           }, 'a' ]
               ];

       set_once
             use Class::MethodMaker
               [ scalar =&gt; [{ -store_cb =&gt; sub {
                                             die "Already stored $_[3]"
                                               if @_ &gt; 3;
                                           }
                            },
                            'a' ]
               ];

       set_once_static
             use Class::MethodMaker
               [ scalar =&gt; [{ -store_cb =&gt; sub {
                                             die "Already stored $_[3]"
                                               if @_ &gt; 3;
                                           },
                              -static   =&gt; 1,
                            },
                            'a' ]
               ];

       singleton
             use Class::MethodMaker
               [ new =&gt; [ -singleton =&gt; -hash =&gt; -init =&gt; 'a' ] ];

       static_get_set
             use Class::MethodMaker
               [ scalar =&gt; [ -static =&gt; 'a' ], ];

       static_hash
             use Class::MethodMaker
               [ hash =&gt; [ -static =&gt; 'a' ], ];

       static_list
             use Class::MethodMaker
               [ list =&gt; [ -static =&gt; 'a' ], ];

       tie_hash
             use Class::MethodMaker
               [ hash =&gt; [ { -tie_class =&gt; 'MyTie',
                             -tie_args  =&gt; [qw/ foo bar baz /],
                           } =&gt; 'a' ], ];

       tie_list
             use Class::MethodMaker
               [ array =&gt; [ { -tie_class =&gt; 'MyTie',
                              -tie_args  =&gt; [qw/ foo bar baz /],
                            } =&gt; 'a' ], ];

       tie_scalar
             use Class::MethodMaker
               [ scalar =&gt; [ { -tie_class =&gt; 'MyTie',
                               -tie_args  =&gt; [qw/ foo bar baz /],
                             } =&gt; 'a' ], ];

   <b>Caveats</b> <b>&amp;</b> <b>Expected</b> <b>Breakages</b>
       The following version 1 component (slot) types are not currently supported in version 2:

       grouped_fields
       hash_of_lists
       listed_attrib
       struct

</pre><h4><b>EXAMPLES</b></h4><pre>
</pre><h4><b>BUGS</b></h4><pre>
</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Email the development mailing list "<a href="mailto:class-mmaker-devel@lists.sourceforge.net">class-mmaker-devel@lists.sourceforge.net</a>".

</pre><h4><b>AUTHOR</b></h4><pre>
       Martyn J. Pearce

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2003, 2004 Martyn J. Pearce.  This program is free software; you can redistribute it and/or
       modify it under the same terms as Perl itself.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
perl v5.40.0                                       2024-11-15                  <u>Class::MethodMaker::<a href="../man3pm/V1Compat.3pm.html">V1Compat</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>