<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mock::Quick::Class - Class mocking for Mock::Quick</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmock-quick-perl">libmock-quick-perl_1.111-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mock::Quick::Class - Class mocking for Mock::Quick

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Provides class mocking for Mock::Quick

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>IMPLEMENT</b> <b>A</b> <b>CLASS</b>
       This will implement a class at the namespace provided via the -implement argument. The class must not
       already be loaded. Once complete the real class will be prevented from loading until you call <b>undefine()</b>
       on the control object.

           use Mock::Quick::Class;

           my $control = Mock::Quick::Class-&gt;new(
               -implement =&gt; 'My::Package',

               # Insert a generic new() method (blessed hash)
               -with_new =&gt; 1,

               # Inheritance
               -subclass =&gt; 'Some::Class',
               # Can also do
               -subclass =&gt; [ 'Class::A', 'Class::B' ],

               # generic get/set attribute methods.
               -attributes =&gt; [ qw/a b c d/ ],

               # Method that simply returns a value.
               simple =&gt; 'value',

               # Custom method.
               method =&gt; sub { ... },
           );

           my $obj = $control-&gt;package-&gt;new;
           # OR
           my $obj = My::Package-&gt;new;

           # Override a method
           $control-&gt;override( foo =&gt; sub { ... });

           # Restore it to the original
           $control-&gt;restore( 'foo' );

           # Remove the namespace we created, which would allow the real thing to load
           # in a require or use statement.
           $control-&gt;undefine();

       You can also use the 'implement' method instead of new:

           use Mock::Quick::Class;

           my $control = Mock::Quick::Class-&gt;implement(
               'Some::Package',
               %args
           );

   <b>ANONYMOUS</b> <b>MOCKED</b> <b>CLASS</b>
       This is if you just need to generate a class where the package name does not matter. This is done when
       the -takeover and -implement arguments are both omitted.

           use Mock::Quick::Class;

           my $control = Mock::Quick::Class-&gt;new(
               # Insert a generic new() method (blessed hash)
               -with_new =&gt; 1,

               # Inheritance
               -subclass =&gt; 'Some::Class',
               # Can also do
               -subclass =&gt; [ 'Class::A', 'Class::B' ],

               # generic get/set attribute methods.
               -attributes =&gt; [ qw/a b c d/ ],

               # Method that simply returns a value.
               simple =&gt; 'value',

               # Custom method.
               method =&gt; sub { ... },
           );

           my $obj = $control-&gt;package-&gt;new;

           # Override a method
           $control-&gt;override( foo =&gt; sub { ... });

           # Restore it to the original
           $control-&gt;restore( 'foo' );

           # Remove the anonymous namespace we created.
           $control-&gt;undefine();

   <b>TAKING</b> <b>OVER</b> <b>EXISTING/LOADED</b> <b>CLASSES</b>
           use Mock::Quick::Class;

           my $control = Mock::Quick::Class-&gt;takeover( 'Some::Package' );

           # Override a method
           $control-&gt;override( foo =&gt; sub { ... });

           # Restore it to the original
           $control-&gt;restore( 'foo' );

           # Destroy the control object and completely restore the original class
           # Some::Package.
           $control = undef;

       You can also do this through <b>new()</b>

           use Mock::Quick::Class;

           my $control = Mock::Quick::Class-&gt;new(
               -takeover =&gt; 'Some::Package',
               %overrides
           );

</pre><h4><b>ACCESSING</b> <b>THE</b> <b>CONTROL</b> <b>OBJECY</b></h4><pre>
       While the control object exists, it can be accessed via "YOUR::PACKAGE-"<b>MQ_CONTROL()</b>&gt;. It is important to
       note that this method will disappear whenever the control object you track falls out of scope.

       Example (taken from Class.t):

           $obj = $CLASS-&gt;new( -takeover =&gt; 'Baz' );
           $obj-&gt;override( 'foo', sub {
               my $class = shift;
               return "PREFIX: " . $class-&gt;MQ_CONTROL-&gt;original( 'foo' )-&gt;();
           });

           is( Baz-&gt;foo, "PREFIX: foo", "Override and accessed original through MQ_CONTROL" );
           $obj = undef;

           is( Baz-&gt;foo, 'foo', 'original' );
           ok( !Baz-&gt;can('MQ_CONTROL'), "Removed control" );

</pre><h4><b>METHODS</b></h4><pre>
       $package = $obj-&gt;<b>package()</b>
           Get the name of the package controlled by this object.

       $bool = $obj-&gt;<b>is_takeover()</b>
           Check if the control object was created to takeover an existing class.

       $bool = $obj-&gt;<b>is_implement()</b>
           Check if the control object was created to implement a class.

       $data = $obj-&gt;<b>metrics()</b>
           Returns  a  hash  where keys are method names, and values are the number of times the method has been
           called. When a method is altered or removed the key is deleted.

       $obj-&gt;override( name =&gt; sub { ... })
           Override a method.

       $obj-&gt;original( $name );
           Get the original method (coderef). Note: The first time this is called  it  find  and  remembers  the
           value  of  package-&gt;can(  $name  ). This means that if you modify or replace the method without using
           Mock::Quick before this is called, it will have the updated method, not the true original.

           The <b>override()</b> method will call this first to ensure the original method is cached and available  for
           <b>restore()</b>. Once a value is set it is never replaced or cleared.

       $obj-&gt;restore( $name )
           Restore a method (Resets metrics)

       $obj-&gt;<b>undefine()</b>
           Undefine the package controlled by the control.

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum <a href="mailto:exodist7@gmail.com">exodist7@gmail.com</a>
       Glen Hinkle <a href="mailto:glen@empireenterprises.com">glen@empireenterprises.com</a>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2011 Chad Granum

       Mock-Quick is free software; Standard perl licence.

       Mock-Quick  is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the
       implied warranty of MERCHANTABILITY or FITNESS FOR  A  PARTICULAR  PURPOSE.  See  the  license  for  more
       details.

perl v5.34.0                                       2022-06-15                            <u>Mock::Quick::<a href="../man3pm/Class.3pm.html">Class</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>