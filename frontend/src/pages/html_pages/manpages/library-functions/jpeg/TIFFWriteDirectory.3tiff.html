<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIFFWriteDirectory - write the current directory in an open TIFF file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtiff-dev">libtiff-dev_4.7.0-3ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       TIFFWriteDirectory - write the current directory in an open TIFF file

</pre><h4><b>SYNOPSIS</b></h4><pre>
          #include &lt;tiffio.h&gt;

       <b>int</b> <b>TIFFWriteDirectory(TIFF</b> <b>*tif)</b>

       <b>int</b> <b>TIFFRewriteDirectory(TIFF</b> <b>*tif)</b>

       <b>int</b> <b>TIFFCheckpointDirectory(TIFF</b> <b>*tif)</b>

       <b>void</b> <b>TIFFSetWriteOffset(TIFF</b> <b>*tif,</b> <b>toff_t</b> <b>off)</b>

       <b>int</b> <b>TIFFWriteCheck(TIFF</b> <b>*tif,</b> <b>int</b> <b>tiles,</b> <b>const</b> <b>char</b> <b>*module)</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>TIFFWriteDirectory()</u>  will  write  the  contents  of the current directory (IFD) to the file and setup to
       create  a  new  directory  (IFD)  using  <u>TIFFCreateDirectory()</u>.    Applications   only   need   to   call
       <u>TIFFWriteDirectory()</u>  when  writing  multiple  subfiles  (images)  to a single TIFF file.  This is called
       "multi-page TIFF" or "multi-image TIFF" (see <u>Multi</u> <u>Page</u> <u>/</u> <u>Multi</u>  <u>Image</u>  <u>TIFF</u>).   <u>TIFFWriteDirectory()</u>  is
       automatically called by <u>TIFFClose()</u> and <u>TIFFFlush()</u> to write a modified directory if the file is open for
       writing.

       The  <u>TIFFRewriteDirectory()</u>  function  operates similarly to <u>TIFFWriteDirectory()</u>, but can be called with
       directories previously read or written that already have an established location in the  file.   It  will
       rewrite  the  directory, but instead of placing it at its old location (as <u>TIFFWriteDirectory()</u> would, if
       the size of the directory has not grown) it will place them at  the  end  of  the  file,  correcting  the
       pointer  from the preceding directory or file header to point to it's new location.  This is particularly
       important in cases where the size of the directory and pointed to data has grown, so it won't fit in  the
       space available at the old location.

       The  <u>TIFFCheckpointDirectory()</u>  writes the current state of the tiff directory into the file to make what
       is currently in the file readable.  Unlike <u>TIFFWriteDirectory()</u>, <u>TIFFCheckpointDirectory()</u> does not  free
       up  the  directory  data  structures  in memory, so they can be updated (as strips/tiles are written) and
       written again.  Reading such a partial file you will at worst  get  a  tiff  read  error  for  the  first
       strip/tile  encountered  that  is  incomplete,  but  you will at least get all the valid data in the file
       before that.  When the file is complete, just use <u>TIFFWriteDirectory()</u> as usual to finish it off cleanly.

       The <u>TIFFSetWriteOffset()</u> sets the current write offset.  This should only be used to set the offset to  a
       known  previous location (very carefully), or to 0 so that the next write gets appended to the end of the
       file.

       The <u>TIFFWriteCheck()</u>  verify file is writable and that the directory information is setup  properly.   In
       doing  the  latter  we  also  "freeze"  the  state  of the directory so that important information is not
       changed.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       1 is returned when the contents are successfully written to the file.  Otherwise, 0  is  returned  if  an
       error was encountered when writing the directory contents.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       All error messages are directed to the <u>TIFFErrorExtR()</u> routine.

       <b>"Error</b> <b>post-encoding</b> <b>before</b> <b>directory</b> <b>write"</b>:
          Before  writing  the  contents  of  the  current directory, any pending data are flushed. This message
          indicates that an error occurred while doing this.

       <b>"Error</b> <b>flushing</b> <b>data</b> <b>before</b> <b>directory</b> <b>write"</b>:
          Before writing the contents of the current directory, any  pending  data  are  flushed.  This  message
          indicates that an error occurred while doing this.

       <b>"Cannot</b> <b>write</b> <b>directory,</b> <b>out</b> <b>of</b> <b>space"</b>:
          There was not enough space to allocate a temporary area for the directory that was to be written.

       <b>"Error</b> <b>writing</b> <b>directory</b> <b>count"</b>:
          A write error occurred when writing the count of fields in the directory.

       <b>"Error</b> <b>writing</b> <b>directory</b> <b>contents"</b>:
          A write error occurred when writing the directory fields.

       <b>"Error</b> <b>writing</b> <b>directory</b> <b>link"</b>:
          A write error occurred when writing the link to the next directory.

       <b>Error</b> <b>writing</b> <b>data</b> <b>for</b> <b>field</b> <b>"%s"</b>:
          A write error occurred when writing indirect data for the specified field.

       <b>"Error</b> <b>writing</b> <b>TIFF</b> <b>header"</b>:
          A write error occurred when re-writing header at the front of the file.

       <b>"Error</b> <b>fetching</b> <b>directory</b> <b>count"</b>:
          A  read  error  occurred  when  fetching the directory count field for a previous directory.  This can
          occur when setting up a link to the directory that is being written.

       <b>"Error</b> <b>fetching</b> <b>directory</b> <b>link"</b>:
          A read error occurred when fetching the directory link field for a previous directory.  This can occur
          when setting up a link to the directory that is being written.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>TIFFquery</u>  (3tiff),  <u>TIFFOpen</u>  (3tiff),   <u>TIFFCreateDirectory</u>   (3tiff),   <u>TIFFCustomDirectory</u>   (3tiff),
       <u>TIFFSetDirectory</u>  (3tiff),  <u>TIFFReadDirectory</u>  (3tiff), <u>TIFFError</u> (3tiff), <u>Multi</u> <u>Page</u> <u>/</u> <u>Multi</u> <u>Image</u> <u>TIFF</u>,
       <u>libtiff</u> (3tiff)

</pre><h4><b>AUTHOR</b></h4><pre>
       LibTIFF contributors

</pre><h4><b>COPYRIGHT</b></h4><pre>
       1988-2022, LibTIFF contributors

4.7                                               Apr 30, 2025                         <u><a href="../man3tiff/TIFFWRITEDIRECTORY.3tiff.html">TIFFWRITEDIRECTORY</a></u>(3tiff)
</pre>
 </div>
</div></section>
</div>
</body>
</html>