<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jpeg - JPEG querying and manipulation of meta data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       jpeg - JPEG querying and manipulation of meta data

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>jpeg</b> <b>?0.7?</b>

       <b>::jpeg::isJPEG</b> <u>file</u>

       <b>::jpeg::imageInfo</b> <u>file</u>

       <b>::jpeg::dimensions</b> <u>file</u>

       <b>::jpeg::getThumbnail</b> <u>file</u>

       <b>::jpeg::getExif</b> <u>file</u> ?<u>section</u>?

       <b>::jpeg::getExifFromChannel</b> <u>channel</u> ?<u>section</u>?

       <b>::jpeg::formatExif</b> <u>keys</u>

       <b>::jpeg::exifKeys</b>

       <b>::jpeg::removeExif</b> <u>file</u>

       <b>::jpeg::stripJPEG</b> <u>file</u>

       <b>::jpeg::getComments</b> <u>file</u>

       <b>::jpeg::addComment</b> <u>file</u> <u>text</u>...

       <b>::jpeg::removeComments</b> <u>file</u>

       <b>::jpeg::replaceComment</b> <u>file</u> <u>text</u>

       <b>::jpeg::debug</b> <u>file</u>

       <b>::jpeg::markers</b> <u>channel</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This package provides commands to query and modify JPEG images. JPEG stands for <u>Joint</u> <u>Photography</u> <u>Experts</u>
       <u>Group</u> and is a standard for the lossy compression of photographical images. It is specified at <u>LINK_HERE</u>.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::jpeg::isJPEG</b> <u>file</u>
              Returns a boolean value indicating if <u>file</u> is a JPEG image.

       <b>::jpeg::imageInfo</b> <u>file</u>
              Returns  a dictionary with keys <b>version</b>, <b>units</b>, <b>xdensity</b>, <b>ydensity</b>, <b>xthumb</b>, and <b>ythumb</b>. The values
              are the associated properties of the JPEG image in <u>file</u>.  Throws an error if <u>file</u> is  not  a  JPEG
              image.

       <b>::jpeg::dimensions</b> <u>file</u>
              Returns  the  dimensions  of  the  JPEG <u>file</u> as a list of the horizontal and vertical pixel count.
              Throws an error if <u>file</u> is not a JPEG image.

       <b>::jpeg::getThumbnail</b> <u>file</u>
              This procedure will return the binary thumbnail image data, if a JPEG  thumbnail  is  included  in
              <u>file</u>,  and  the  empty string otherwise. Note that it is possible to include thumbnails in formats
              other than JPEG although that is not common. The command finds  thumbnails  that  are  encoded  in
              either  the  JFXX or EXIF segments of the JPEG information. If both are present the EXIF thumbnail
              will take precedence.  Throws an error if <u>file</u> is not a JPEG image.

                  set fh [open thumbnail.jpg w+]
                  fconfigure $fh -translation binary -encoding binary
                  puts -nonewline $fh [::jpeg::getThumbnail photo.jpg]
                  close $fh

       <b>::jpeg::getExif</b> <u>file</u> ?<u>section</u>?
              <u>section</u> must be one of <b>main</b> or <b>thumbnail</b>.  The default is <b>main</b>.  Returns a  dictionary  containing
              the EXIF information for the specified section.  For example:

                  set exif {
                Make     Canon
                Model    {Canon DIGITAL IXUS}
                DateTime {2001:06:09 15:17:32}
                  }

              Throws an error if <u>file</u> is not a JPEG image.

       <b>::jpeg::getExifFromChannel</b> <u>channel</u> ?<u>section</u>?
              This  command  is as per <b>::jpeg::getExif</b> except that it uses a previously opened channel.  <u>channel</u>
              should be a seekable channel and <u>section</u> is as described in the documentation of <b>::jpeg::getExif</b>.

              <u>Note</u>: The jpeg parser expects that the start of the channel is the start of  the  image  data.  If
              working  with  an  image  embedded in a container file format it may be necessary to read the jpeg
              data into a temporary container: either a temporary file or a memory channel.

              <u>Attention</u>: It is the resonsibility of the caller to close the channel after its use.

       <b>::jpeg::formatExif</b> <u>keys</u>
              Takes a list of key-value pairs as returned by <b>getExif</b> and formats many of the values into a  more
              human readable form. As few as one key-value may be passed in, the entire exif is not required.

                  foreach {key val} [::jpeg::formatExif [::jpeg::getExif photo.jpg]] {
                      puts "$key: $val"
                  }

                  array set exif [::jpeg::getExif photo.jpg]
                  puts "max f-stop: [::jpeg::formatExif [list MaxAperture $exif(MaxAperture)]]

       <b>::jpeg::exifKeys</b>
              Returns  a  list  of  the  EXIF keys which are currently understood.  There may be keys present in
              <b>getExif</b> data that are not understood.  Those keys will appear in a 4 digit hexadecimal format.

       <b>::jpeg::removeExif</b> <u>file</u>
              Removes the Exif data segment from the specified  file  and  replaces  it  with  a  standard  JFIF
              segment.  Throws an error if <u>file</u> is not a JPEG image.

       <b>::jpeg::stripJPEG</b> <u>file</u>
              Removes  all  metadata  from  the  JPEG  file leaving only the image. This includes comments, EXIF
              segments, JFXX segments, and application specific segments.  Throws an error if <u>file</u> is not a JPEG
              image.

       <b>::jpeg::getComments</b> <u>file</u>
              Returns a list containing all the JPEG comments found in the <u>file</u>.  Throws an error if <u>file</u> is not
              a valid JPEG image.

       <b>::jpeg::addComment</b> <u>file</u> <u>text</u>...
              Adds one or more plain <u>text</u> comments to the JPEG image in <u>file</u>.  Throws an error if <u>file</u> is not  a
              valid JPEG image.

       <b>::jpeg::removeComments</b> <u>file</u>
              Removes all comments from the file specified.  Throws an error if <u>file</u> is not a valid JPEG image.

       <b>::jpeg::replaceComment</b> <u>file</u> <u>text</u>
              Replaces  the  first  comment  in  the  file  with  the  new  <u>text</u>.  This is merely a shortcut for
              <b>::jpeg::removeComments</b> and <b>::jpeg::addComment</b> Throws an error if <u>file</u> is not a valid JPEG image.

       <b>::jpeg::debug</b> <u>file</u>
              Prints everything we know about the given file in a nice format.

       <b>::jpeg::markers</b> <u>channel</u>
              This is an internal helper command, we document it for use by advanced users of the  package.  The
              argument  <u>channel</u>  is  an  open file handle positioned at the start of the first marker (usually 2
              bytes). The command returns a list with one element for each JFIF marker found in the  file.  Each
              element  consists of a list of the marker name, its offset in the file, and its length. The offset
              points to the beginning of the sections data, not the marker itself.  The length is the length  of
              the data from the offset listed to the start of the next marker.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       can only work with files cant write exif data gps exif data not parsed makernote data not yet implemented

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>jpeg</u> of the <u>Tcllib</u> <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       comment, exif, image, jfif, jpeg, thumbnail

</pre><h4><b>CATEGORY</b></h4><pre>
       File formats

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2004-2005, Code: Aaron Faupell &lt;<a href="mailto:afaupell@users.sourceforge.net">afaupell@users.sourceforge.net</a>&gt;
       Copyright (c) 2007, Code:  Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;
       Copyright (c) 2004-2009, Doc:  Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;
       Copyright (c) 2011, Code: Pat Thoyts &lt;<a href="mailto:patthoyts@users.sourceforge.net">patthoyts@users.sourceforge.net</a>&gt;

tcllib                                                 0.7                                            <u><a href="../man3tcl/jpeg.3tcl.html">jpeg</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>