<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_uid_get_state, sd_uid_is_on_seat, sd_uid_get_sessions, sd_uid_get_seats, sd_uid_get_display,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_uid_get_state, sd_uid_is_on_seat, sd_uid_get_sessions, sd_uid_get_seats, sd_uid_get_display,
       sd_uid_get_login_time - Determine login state of a specific Unix user ID

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-login.h&gt;</b>

       <b>int</b> <b>sd_uid_get_state(uid_t</b> <u>uid</u><b>,</b> <b>char</b> <b>**</b><u>state</u><b>);</b>

       <b>int</b> <b>sd_uid_is_on_seat(uid_t</b> <u>uid</u><b>,</b> <b>int</b> <u>require_active</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>seat</u><b>);</b>

       <b>int</b> <b>sd_uid_get_sessions(uid_t</b> <u>uid</u><b>,</b> <b>int</b> <u>require_active</u><b>,</b> <b>char</b> <b>***</b><u>sessions</u><b>);</b>

       <b>int</b> <b>sd_uid_get_seats(uid_t</b> <u>uid</u><b>,</b> <b>int</b> <u>require_active</u><b>,</b> <b>char</b> <b>***</b><u>seats</u><b>);</b>

       <b>int</b> <b>sd_uid_get_display(uid_t</b> <u>uid</u><b>,</b> <b>char</b> <b>**</b><u>session</u><b>);</b>

       <b>int</b> <b>sd_uid_get_login_time(uid_t</b> <u>uid</u><b>,</b> <b>uint64_t</b> <b>*</b><u>usec</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_uid_get_state()</b> may be used to determine the login state of a specific Unix user identifier. The
       following states are currently known: "offline" (user not logged in at all), "lingering" (user not logged
       in, but some user services running), "online" (user logged in, but not active, i.e. has no session in the
       foreground), "active" (user logged in, and has at least one active session, i.e. one session in the
       foreground), "closing" (user not logged in, and not lingering, but some processes are still around). In
       the future additional states might be defined, client code should be written to be robust in regards to
       additional state strings being returned. The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call
       after use.

       <b>sd_uid_is_on_seat()</b> may be used to determine whether a specific user is logged in or active on a specific
       seat. Accepts a Unix user identifier and a seat identifier string as parameters. The <u>require_active</u>
       parameter is a boolean value. If non-zero (true), this function will test if the user is active (i.e. has
       a session that is in the foreground and accepting user input) on the specified seat, otherwise (false)
       only if the user is logged in (and possibly inactive) on the specified seat.

       <b>sd_uid_get_sessions()</b> may be used to determine the current sessions of the specified user. Accepts a Unix
       user identifier as parameter. The <u>require_active</u> parameter controls whether the returned list shall
       consist of only those sessions where the user is currently active (&gt; 0), where the user is currently
       online but possibly inactive (= 0), or logged in but possibly closing the session (&lt; 0). The call returns
       a <b>NULL</b> terminated string array of session identifiers in <u>sessions</u> which needs to be freed by the caller
       with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use, including all the strings referenced. If the string array parameter
       is passed as <b>NULL</b>, the array will not be filled in, but the return code still indicates the number of
       current sessions. Note that instead of an empty array <b>NULL</b> may be returned and should be considered
       equivalent to an empty array.

       Similarly, <b>sd_uid_get_seats()</b> may be used to determine the list of seats on which the user currently has
       sessions. Similar semantics apply, however note that the user may have multiple sessions on the same seat
       as well as sessions with no attached seat and hence the number of entries in the returned array may
       differ from the one returned by <b>sd_uid_get_sessions()</b>.

       <b>sd_uid_get_display()</b> returns the name of the "primary" session of a user. If the user has graphical
       sessions, it will be the oldest graphical session. Otherwise, it will be the oldest open session.

       <b>sd_uid_get_login_time()</b> may be used to determine the time the user's service manager has been invoked,
       which is the time when the user's first active session, since which they stayed logged in continuously,
       began. The <u>usec</u> is in microseconds since the epoch (<b>CLOCK_REALTIME</b>). This call will fail with <b>-ENXIO</b> if
       the user is not currently logged in.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>sd_uid_get_state()</b> and <b>sd_uid_get_login_time()</b> returns 0 or a positive integer. If the test
       succeeds, <b>sd_uid_is_on_seat()</b> returns a positive integer; if it fails, 0.  <b>sd_uid_get_sessions()</b> and
       <b>sd_uid_get_seats()</b> return the number of entries in the returned arrays.  <b>sd_uid_get_display()</b> returns a
       non-negative code on success. On failure, these calls return a negative errno-style error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-ENODATA</b>
           The given field is not specified for the described user.

       <b>-ENXIO</b>
           The specified seat is unknown.

       <b>-EINVAL</b>
           An input parameter was invalid (out of range, or <b>NULL</b>, where that is not accepted). This is also
           returned if the passed user ID is <b>0xFFFF</b> or <b>0xFFFFFFFF</b>, which are undefined on Linux.

       <b>-ENOMEM</b>
           Memory allocation failed.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_uid_get_display()</b> was added in version 213.

       <b>sd_uid_get_login_time()</b> was added in version 254.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-login.3.html">sd-login</a></b>(3), <b><a href="../man3/sd_pid_get_owner_uid.3.html">sd_pid_get_owner_uid</a></b>(3)

systemd 257.7                                                                                <u><a href="../man3/SD_UID_GET_STATE.3.html">SD_UID_GET_STATE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>