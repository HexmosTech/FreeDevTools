<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>krb5_verify_user,        krb5_verify_user_lrealm,       krb5_verify_user_opt,       krb5_verify_opt_init,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/heimdal-dev">heimdal-dev_7.8.git20221117.28daf24+dfsg-9ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       krb5_verify_user,        krb5_verify_user_lrealm,       krb5_verify_user_opt,       krb5_verify_opt_init,
       krb5_verify_opt_alloc,   krb5_verify_opt_free,   krb5_verify_opt_set_ccache,   krb5_verify_opt_set_flags,
       krb5_verify_opt_set_service,  krb5_verify_opt_set_secure,  krb5_verify_opt_set_keytab  — Heimdal password
       verifying functions

</pre><h4><b>LIBRARY</b></h4><pre>
       Kerberos 5 Library (libkrb5, -lkrb5)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;krb5.h&gt;</b>

       <u>krb5_error_code</u>
       <b>krb5_verify_user</b>(<u>krb5_context</u>     <u>context</u>,     <u>krb5_principal</u>     <u>principal</u>,     <u>krb5_ccache</u>      <u>ccache</u>,
           <u>const</u> <u>char</u> <u>*password</u>, <u>krb5_boolean</u> <u>secure</u>, <u>const</u> <u>char</u> <u>*service</u>);

       <u>krb5_error_code</u>
       <b>krb5_verify_user_lrealm</b>(<u>krb5_context</u>    <u>context</u>,    <u>krb5_principal</u>    <u>principal</u>,    <u>krb5_ccache</u>   <u>ccache</u>,
           <u>const</u> <u>char</u> <u>*password</u>, <u>krb5_boolean</u> <u>secure</u>, <u>const</u> <u>char</u> <u>*service</u>);

       <u>void</u>
       <b>krb5_verify_opt_init</b>(<u>krb5_verify_opt</u> <u>*opt</u>);

       <u>void</u>
       <b>krb5_verify_opt_alloc</b>(<u>krb5_verify_opt</u> <u>**opt</u>);

       <u>void</u>
       <b>krb5_verify_opt_free</b>(<u>krb5_verify_opt</u> <u>*opt</u>);

       <u>void</u>
       <b>krb5_verify_opt_set_ccache</b>(<u>krb5_verify_opt</u> <u>*opt</u>, <u>krb5_ccache</u> <u>ccache</u>);

       <u>void</u>
       <b>krb5_verify_opt_set_keytab</b>(<u>krb5_verify_opt</u> <u>*opt</u>, <u>krb5_keytab</u> <u>keytab</u>);

       <u>void</u>
       <b>krb5_verify_opt_set_secure</b>(<u>krb5_verify_opt</u> <u>*opt</u>, <u>krb5_boolean</u> <u>secure</u>);

       <u>void</u>
       <b>krb5_verify_opt_set_service</b>(<u>krb5_verify_opt</u> <u>*opt</u>, <u>const</u> <u>char</u> <u>*service</u>);

       <u>void</u>
       <b>krb5_verify_opt_set_flags</b>(<u>krb5_verify_opt</u> <u>*opt</u>, <u>unsigned</u> <u>int</u> <u>flags</u>);

       <u>krb5_error_code</u>
       <b>krb5_verify_user_opt</b>(<u>krb5_context</u> <u>context</u>,        <u>krb5_principal</u> <u>principal</u>,         <u>const</u> <u>char</u> <u>*password</u>,
           <u>krb5_verify_opt</u> <u>*opt</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>krb5_verify_user</b>  function  verifies  the password supplied by a user.  The principal whose password
       will be verified is specified in <u>principal</u>.  New tickets will be obtained as a side-effect and stored  in
       <u>ccache</u>  (if  NULL, the default ccache is used).  <b>krb5_verify_user</b>() will call <b>krb5_cc_initialize</b>() on the
       given <u>ccache</u>, so <u>ccache</u> must only  initialized  with  <b>krb5_cc_resolve</b>()  or  <b>krb5_cc_gen_new</b>().   If  the
       password  is not supplied in <u>password</u> (and is given as NULL) the user will be prompted for it.  If <u>secure</u>
       the ticket will be verified against the locally stored service key <u>service</u> (by default ‘host’ if given as
       NULL ).

       The <b>krb5_verify_user_lrealm</b>() function does the same, except that it ignores the realm in  <u>principal</u>  and
       tries  all  the  local realms (see <u><a href="../man5/krb5.conf.5.html">krb5.conf</a></u>(5)).  After a successful return, the principal is set to the
       authenticated realm. If the call fails, the principal will not be meaningful, and should  only  be  freed
       with <u><a href="../man3/krb5_free_principal.3.html">krb5_free_principal</a></u>(3).

       <b>krb5_verify_opt_alloc</b>() and <b>krb5_verify_opt_free</b>() allocates and frees a <b>krb5_verify_opt</b>.  You should use
       the the alloc and free function instead of allocation the structure yourself, this is because in a future
       release the structure wont be exported.

       <b>krb5_verify_opt_init</b>() resets all opt to default values.

       None  of  the  krb5_verify_opt_set function makes a copy of the data structure that they are called with.
       It's up the caller to free them after the <b>krb5_verify_user_opt</b>() is called.

       <b>krb5_verify_opt_set_ccache</b>() sets the <u>ccache</u> that  user  of  <u>opt</u>  will  use.  If  not  set,  the  default
       credential cache will be used.

       <b>krb5_verify_opt_set_keytab</b>()  sets  the  <u>keytab</u> that user of <u>opt</u> will use. If not set, the default keytab
       will be used.

       <b>krb5_verify_opt_set_secure</b>() if <u>secure</u> if true, the password verification will require  that  the  ticket
       will be verified against the locally stored service key. If not set, default value is true.

       <b>krb5_verify_opt_set_service</b>()  sets  the  <u>service</u>  principal  that  user of <u>opt</u> will use. If not set, the
       ‘host’ service will be used.

       <b>krb5_verify_opt_set_flags</b>() sets <u>flags</u> that user of <u>opt</u> will use.  If  the  flag  KRB5_VERIFY_LREALMS  is
       used, the <u>principal</u> will be modified like <b>krb5_verify_user_lrealm</b>() modifies it.

       <b>krb5_verify_user_opt</b>()  function  verifies the <u>password</u> supplied by a user.  The principal whose password
       will be verified is specified in <u>principal</u>.  Options the to the verification process is pass in in <u>opt</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Here is a example program that verifies a password. it uses the ‘host/`hostname`’  service  principal  in
       <u>krb5.keytab</u>.

       #include &lt;krb5.h&gt;

       int
       main(int argc, char **argv)
       {
           char *user;
           krb5_error_code error;
           krb5_principal princ;
           krb5_context context;

           if (argc != 2)
               errx(1, "usage: verify_passwd &lt;principal-name&gt;");

           user = argv[1];

           if (krb5_init_context(&amp;context) &lt; 0)
               errx(1, "krb5_init_context");

           if ((error = krb5_parse_name(context, user, &amp;princ)) != 0)
               krb5_err(context, 1, error, "krb5_parse_name");

           error = krb5_verify_user(context, princ, NULL, NULL, TRUE, NULL);
           if (error)
               krb5_err(context, 1, error, "krb5_verify_user");

           return 0;
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3/krb5_cc_gen_new.3.html">krb5_cc_gen_new</a></u>(3),   <u><a href="../man3/krb5_cc_initialize.3.html">krb5_cc_initialize</a></u>(3),   <u><a href="../man3/krb5_cc_resolve.3.html">krb5_cc_resolve</a></u>(3),  <u><a href="../man3/krb5_err.3.html">krb5_err</a></u>(3),  <u><a href="../man3/krb5_free_principal.3.html">krb5_free_principal</a></u>(3),
       <u><a href="../man3/krb5_init_context.3.html">krb5_init_context</a></u>(3), <u><a href="../man3/krb5_kt_default.3.html">krb5_kt_default</a></u>(3), <u><a href="../man5/krb5.conf.5.html">krb5.conf</a></u>(5)

HEIMDAL                                            May 1, 2006                               <u><a href="../man3/KRB5_VERIFY_USER.3.html">KRB5_VERIFY_USER</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>