<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XML::Compile::Tester - support XML::Compile related regression testing</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libxml-compile-tester-perl">libxml-compile-tester-perl_0.91-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       XML::Compile::Tester - support XML::Compile related regression testing

</pre><h4><b>INHERITANCE</b></h4><pre>
        XML::Compile::Tester
          is a Exporter

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use XML::Compile::Tester;

        # default additional compile flags, avoids repetition
        set_compile_defaults(validation =&gt; 0, @other_opts);
        set_compile_defaults();  # reset

        # set default namespace, such that $type only needs to use local
        my $ns     = 'some-schemas-targetNamespace';
        my $type   = pack_type($ns, 'localName'); # X::C::Util
        set_default_namespace($ns);
        my $type   = 'localName'; # now implicit in $ns

        my $reader = reader_create($schema, "my reader", $type, @opts);
        my $data   = $reader-&gt;($xml);  # $xml is string, filename, node

        my $writer = writer_create($schema, "my writer", $type, @opts);
        my $xml    = $writer-&gt;($doc, $data);
        my $xml    = writer_test($writer, $data);

        my $rerror = reader_error($schema, $type, $xml);
        my $werror = writer_error($schema, $type, $data);

        my $output = templ_xml($schema, $type, @options);
        my $output = templ_perl($schema, $type, @options);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The XML::Compile module suite has extensive regression testing.  Probably, you want to do regression
       testing as well.  This module provide functions which simplify writing tests for XML::Compile related
       distributions.

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>Reader</b> <b>checks</b>
       <b>reader_create</b>($schema, $comment, $type, %options)
           Create a reader for $type.  One test is created, reporting success or failure of the creation.

           Of  course,  XML::Compile::Schema subroutine compile is being called, with some options.  By default,
           "check_values" is true, and "include_namespaces" is false.   These  values  can  be  overruled  using
           <b>set_compile_defaults()</b>, and with the %options parameter list.

           example: reader_create

            my $type   = pack_type('namespace', 'localName');
            my $reader = reader_create($schema, 'my test', $type
              , check_occurs =&gt; 0, @other_options);

            my $data   = $reader-&gt;($xml);
            is_deeply($data, $expected, 'my test');  # Test::More
            cmp_deeply($data, $expected, 'my test'); # Test::Deep

            # alternative for $type:
            set_default_namespace('namespace');
            my $reader = reader_create($schema, 'my test', 'localName'
              , check_occurs =&gt; 0, @other_options);

       <b>reader_error</b>($schema, $type, $xml)
           Parsing the $xml to interpret the $type should return an error.  The error text is returned.

           example: reader_error

            my $error = reader_error($schema, $type, &lt;&lt;_XML);
            &lt;test1&gt;...&lt;/test1&gt;
            _XML

            is($error, 'error text', 'my test');
            like($error, qr/error pattern/, 'my test');

   <b>Writer</b> <b>checks</b>
       <b>writer_create</b>($schema, $comment, $type, %options)
           Create  a  writer  for  $type.   One  test (in the Test::More sense) is created, reporting success or
           failure of the creation.

           Of course, XML::Compile::Schema subroutine compile is being called, with some options.   By  default,
           "check_values" and "use_default_namespace" are true, and "include_namespaces" is false.  These values
           can be overruled using <b>set_compile_defaults()</b>, and with the %options parameter list.

           example: writer_create

            set_default_namespace('namespace');
            my $writer = writer_create($schema, 'my test', 'test1');

            my $doc    = XML::LibXML::Document-&gt;new('1.0', 'UTF-8');
            my $xml    = $writer-&gt;($doc, $data);
            compare_xml($xml, &lt;&lt;_EXPECTED, 'my test');
              &lt;test1&gt;...&lt;/test1&gt;
            _EXPECTED

            # implicit creation of $doc
            my $xml    = writer_test($writer, $data);

       <b>writer_error</b>($schema, $type, $data)
           Translating the Perl $data into the XML type should return a validation error, which is returned.

           example: writer_error

            my $error = writer_error($schema, $type, $data);

            is($error, 'error text', 'my test');
            like($error, qr/error pattern/, 'my test');

       <b>writer_test</b>( $writer, $data, [$doc] )
           Run  the  test  with  a  compiled  $writer,  which  was  created  with <b>writer_create()</b>.  When no $doc
           (XML::LibXML::Document object) was specified, then one will be created for you.

   <b>Check</b> <b>templates</b>
       <b>templ_perl</b>($schema, $type, %options)
       <b>templ_xml</b>($schema, $type, %options)
           Create  an  example  template  for  $type,  as   XML   message.    The   %options   are   passed   to
           XML::Compile::Schema subroutine template.

           example: templ_xml

            my $out = templ_xml($schema, $type, show =&gt; 'ALL');
            is($out, $expected);

   <b>Helpers</b>
       <b>compare_xml</b>( $created, $expected, [$comment] )
           Compare  the  $created  XML  (either  a string or an XML::LibXML::Element) with the $expected string.
           Both sources are stripped from layout before comparing.

           In a future release, this algorithm will get improved to compare the parsed XML node trees,  not  the
           strings.

           example: compare_xml

            compare_xml($xml, &lt;&lt;_XML, 'my test');
              &lt;test1&gt;...&lt;/test1&gt;
            _XML

       <b>set_compile_defaults</b>(%options)
           Each call to create a reader or writer (also indirectly) with XML::Compile::Schema subroutine compile
           will get these %options passed, on top (and overruling) the usual settings.

           example:

            # defaults for XML::Compile::Schema::compile()
            set_compile_defaults(include_namespaces =&gt; 1, validate =&gt; 0
              , sloppy_intergers =&gt; 1, sloppy_floats =&gt; 1);

            set_compile_defaults();   # reset

       <b>set_default_namespace</b>($testns)
           Defined  which  namespace to use when a relative (only localName) type is provided.  By default, this
           is "undef" (an error when used)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module is part of XML-Compile-Tester distribution version 0.91, built  on  May  11,  2018.  Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2008-2018 by [Mark Overmeer &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]. For other contributors see ChangeLog.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.36.0                                       2022-12-01                          <u>XML::Compile::<a href="../man3pm/Tester.3pm.html">Tester</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>