<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proc::SyncExec - Spawn processes but report exec() errors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libproc-syncexec-perl">libproc-syncexec-perl_1.01-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Proc::SyncExec - Spawn processes but report exec() errors

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # Normal-looking piped opens which properly report exec() errors in $!:
           sync_open WRITER_FH, "|command -with args" or die $!;
           sync_open READER_FH, "command -with args|" or die $!;

           # Synchronized fork/exec which reports exec errors in $!:
           $pid = sync_exec $command, @arg;
           $pid = sync_exec $code_ref, $cmd, @arg;     # run code after fork in kid

           # fork() which retries if it fails, then croaks() if it still fails.
           $pid = fork_retry;
           $pid = fork_retry 100;              # retry 100 times rather than 5
           $pid = fork_retry 100, 2;           # sleep 2 rather than 5 seconds between

           # A couple of interfaces similar to sync_open() but which let you
           # avoid the shell:
           $pid = sync_fhpopen_noshell READERFH, 'r', @command;
           $pid = sync_fhpopen_noshell WRITERFH, 'w', @command;
           $fh = sync_popen_noshell 'r', @command_which_outputs;
           $fh = sync_popen_noshell 'w', @command_which_inputs;
           ($fh, $pid) = sync_popen_noshell 'r', @command_which_outputs;
           ($fh, $pid)= sync_popen_noshell 'w', @command_which_inputs;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module contains functions for synchronized process spawning with full error return.  If the child's
       <b>exec()</b> call fails the reason for the failure is reported back to the parent.

       These functions will <b>croak()</b> if they encounter an unexpected system error, such as a <b>pipe()</b> failure or a
       repeated <b>fork()</b> failure.

       Nothing is exported by default.

       <b>fork_retry</b> [<u>max-retries</u> [<u>sleep-between</u>]]
           This function runs <b>fork()</b> until it succeeds or until <u>max-retries</u> (default 5) attempts have been made,
           sleeping  <u>sleep-between</u>  seconds  (default  5) between attempts.  If the last <b>fork()</b> fails <b>fork_retry</b>
           <b>croak()</b>s.

       <b>sync_exec</b> [<u>code</u>] <u>command</u>...
           This function is similar to a <b>fork()</b>/<b>exec()</b> sequence but with a few twists.

           <b>sync_exec</b> does not return until after the <b>fork()</b>ed child  has  already  performed  its  <b>exec()</b>.   The
           synchronization this provides is useful in some unusual circumstances.

           Normally  the pid of the child process is returned.  However, if the child fails its <b>exec()</b> <b>sync_exec</b>
           returns undef and sets $! to the reason for the child's <b>exec()</b> failure.

           Since the @cmd array is passed directly to Perl's <b>exec()</b> Perl might choose to invoke the command  via
           the  shell  if @cmd contains only one element and it looks like it needs a shell to interpret it.  If
           this happens the return value of <b>sync_exec</b> only indicates whether the <b>exec()</b> of the shell worked.

           The optional initial <u>code</u> argument must be a code reference.  If it is present it is run in the child
           just before <b>exec()</b> is called.  You can use this to set up redirections or whatever.  If <u>code</u>  returns
           false no exec is performed, instead a failure is returned using the current $!  value (or EINTR if $!
           is 0).

           If  the <b>fork()</b> fails or if there is some other unexpected system error <b>sync_exec</b> <b>croak()</b>s rather than
           returning.

       <b>sync_fhpopen_noshell</b> <u>fh</u> <u>type</u> <u>cmd</u> [<u>arg</u>]...
           This is a <b>popen()</b> but it never invokes the shell and it  uses  <b>sync_exec()</b>  under  the  covers.   See
           "sync_exec".

           The <u>type</u> is either 'r' to read from the process or 'w' to write to it.

           The return value is the pid of the forked process.

       <b>sync_popen_noshell</b> <u>type</u> <u>cmd</u> <u>arg</u>...
           This is like <b>sync_fhpopen_noshell</b>, but you don't have to supply the filehandle.

           If  called in an array context the return value is a list consisting of the filehandle and the PID of
           the child.  In a scalar context only the filehandle is returned.

       <b>sync_open</b> <u>fh</u> [<u>open-spec</u>]
           This is like a Perl <b>open()</b> except that if a pipe is involved and the implied <b>exec()</b> fails <b>sync_open()</b>
           fails with $! set appropriately.  See "sync_exec".

           Like <b>sync_exec</b>, <b>sync_open</b> <b>croak()</b>s if there is an unexpected system error (such as a failed <b>pipe()</b>).

           Also like <b>sync_exec</b>, if you use a command which Perl needs to use the shell to interpret you'll  only
           know  if  the  exec  of the shell worked.  Use <b>sync_fhpopen_noshell</b> or <b>sync_exec</b> to be sure that this
           doesn't happen.

</pre><h4><b>AUTHOR</b></h4><pre>
       Roderick Schertler &lt;<u><a href="mailto:roderick@argon.org">roderick@argon.org</a></u>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/perl.1.html">perl</a></b>(1).

perl v5.36.0                                       2022-10-13                                      <u><a href="../man3pm/SyncExec.3pm.html">SyncExec</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>