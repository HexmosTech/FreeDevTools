<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_bitmap.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_bitmap.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/string.h">string.h</a>&gt;
       #include &lt;rte_common.h&gt;
       #include &lt;rte_config.h&gt;
       #include &lt;rte_debug.h&gt;
       #include &lt;rte_memory.h&gt;
       #include &lt;rte_branch_prediction.h&gt;
       #include &lt;rte_prefetch.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_bitmap</b>

   <b>Functions</b>
       static uint32_t <b>rte_bitmap_get_memory_footprint</b> (uint32_t n_bits)
       static struct <b>rte_bitmap</b> * <b>rte_bitmap_init</b> (uint32_t n_bits, uint8_t *mem, uint32_t mem_size)
       static void <b>__rte_bitmap_clear_slab_overhead_bits</b> (uint64_t *slabs, uint32_t slab_size, uint32_t pos)
       static struct <b>rte_bitmap</b> * <b>rte_bitmap_init_with_all_set</b> (uint32_t n_bits, uint8_t *mem, uint32_t
           mem_size)
       static int <b>rte_bitmap_free</b> (struct <b>rte_bitmap</b> *bmp)
       static void <b>rte_bitmap_reset</b> (struct <b>rte_bitmap</b> *bmp)
       static void <b>rte_bitmap_prefetch0</b> (struct <b>rte_bitmap</b> *bmp, uint32_t pos)
       static uint64_t <b>rte_bitmap_get</b> (struct <b>rte_bitmap</b> *bmp, uint32_t pos)
       static void <b>rte_bitmap_set</b> (struct <b>rte_bitmap</b> *bmp, uint32_t pos)
       static void <b>rte_bitmap_set_slab</b> (struct <b>rte_bitmap</b> *bmp, uint32_t pos, uint64_t slab)
       static void <b>rte_bitmap_clear</b> (struct <b>rte_bitmap</b> *bmp, uint32_t pos)
       static int <b>rte_bitmap_scan</b> (struct <b>rte_bitmap</b> *bmp, uint32_t *pos, uint64_t *slab)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE Bitmap

       The bitmap component provides a mechanism to manage large arrays of bits through bit get/set/clear and
       bit array scan operations.

       The bitmap scan operation is optimized for 64-bit CPUs using 64/128 byte cache lines. The bitmap is
       hierarchically organized using two arrays (array1 and array2), with each bit in array1 being associated
       with a full cache line (512/1024 bits) of bitmap bits, which are stored in array2: the bit in array1 is
       set only when there is at least one bit set within its associated array2 bits, otherwise the bit in
       array1 is cleared. The read and write operations for array1 and array2 are always done in slabs of 64
       bits.

       This bitmap is not thread safe. For lock free operation on a specific bitmap instance, a single writer
       thread performing bit set/clear operations is allowed, only the writer thread can do bitmap scan
       operations, while there can be several reader threads performing bit get operations in parallel with the
       writer thread. When the use of locking primitives is acceptable, the serialization of the bit set/clear
       and bitmap scan operations needs to be enforced by the caller, while the bit get operation does not
       require locking the bitmap.

       Definition in file <b>rte_bitmap.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>static</b> <b>uint32_t</b> <b>rte_bitmap_get_memory_footprint</b> <b>(uint32_t</b> <b>n_bits)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap memory footprint calculation

       <b>Parameters</b>
           <u>n_bits</u> Number of bits in the bitmap

       <b>Returns</b>
           Bitmap memory footprint measured in bytes on success, 0 on error

       Definition at line <b>148</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>struct</b> <b>rte_bitmap</b> <b>*</b> <b>rte_bitmap_init</b> <b>(uint32_t</b> <b>n_bits,</b> <b>uint8_t</b> <b>*</b> <b>mem,</b> <b>uint32_t</b> <b>mem_size)</b> <b>[inline],</b>
       <b>[static]</b>
       Bitmap initialization

       <b>Parameters</b>
           <u>n_bits</u> Number of pre-allocated bits in array2.
           <u>mem</u> Base address of array1 and array2.
           <u>mem_size</u> Minimum expected size of bitmap.

       <b>Returns</b>
           Handle to bitmap instance.

       Definition at line <b>170</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>void</b> <b>__rte_bitmap_clear_slab_overhead_bits</b> <b>(uint64_t</b> <b>*</b> <b>slabs,</b> <b>uint32_t</b> <b>slab_size,</b> <b>uint32_t</b> <b>pos)</b>
       <b>[inline],</b>  <b>[static]</b>
       Bitmap clear slab overhead bits.

       <b>Parameters</b>
           <u>slabs</u> Slab array.
           <u>slab_size</u> Number of 64-bit slabs in the slabs array.
           <u>pos</u> The start bit position in the slabs to be cleared.

       Definition at line <b>216</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>struct</b> <b>rte_bitmap</b> <b>*</b> <b>rte_bitmap_init_with_all_set</b> <b>(uint32_t</b> <b>n_bits,</b> <b>uint8_t</b> <b>*</b> <b>mem,</b> <b>uint32_t</b> <b>mem_size)</b>
       <b>[inline],</b>  <b>[static]</b>
       Bitmap initialization with all bits set

       <b>Parameters</b>
           <u>n_bits</u> Number of pre-allocated bits in array2.
           <u>mem</u> Base address of array1 and array2.
           <u>mem_size</u> Minimum expected size of bitmap.

       <b>Returns</b>
           Handle to bitmap instance.

       Definition at line <b>246</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>int</b> <b>rte_bitmap_free</b> <b>(struct</b> <b>rte_bitmap</b> <b>*</b> <b>bmp)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap free

       <b>Parameters</b>
           <u>bmp</u> Handle to bitmap instance

       <b>Returns</b>
           0 upon success, error code otherwise

       Definition at line <b>291</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>void</b> <b>rte_bitmap_reset</b> <b>(struct</b> <b>rte_bitmap</b> <b>*</b> <b>bmp)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap reset

       <b>Parameters</b>
           <u>bmp</u> Handle to bitmap instance

       Definition at line <b>308</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>void</b> <b>rte_bitmap_prefetch0</b> <b>(struct</b> <b>rte_bitmap</b> <b>*</b> <b>bmp,</b> <b>uint32_t</b> <b>pos)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap location prefetch into CPU L1 cache

       <b>Parameters</b>
           <u>bmp</u> Handle to bitmap instance
           <u>pos</u> Bit position

       Definition at line <b>324</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>uint64_t</b> <b>rte_bitmap_get</b> <b>(struct</b> <b>rte_bitmap</b> <b>*</b> <b>bmp,</b> <b>uint32_t</b> <b>pos)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap bit get

       <b>Parameters</b>
           <u>bmp</u> Handle to bitmap instance
           <u>pos</u> Bit position

       <b>Returns</b>
           0 when bit is cleared, non-zero when bit is set

       Definition at line <b>345</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>void</b> <b>rte_bitmap_set</b> <b>(struct</b> <b>rte_bitmap</b> <b>*</b> <b>bmp,</b> <b>uint32_t</b> <b>pos)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap bit set

       <b>Parameters</b>
           <u>bmp</u> Handle to bitmap instance
           <u>pos</u> Bit position

       Definition at line <b>365</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>void</b> <b>rte_bitmap_set_slab</b> <b>(struct</b> <b>rte_bitmap</b> <b>*</b> <b>bmp,</b> <b>uint32_t</b> <b>pos,</b> <b>uint64_t</b> <b>slab)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap slab set

       <b>Parameters</b>
           <u>bmp</u> Handle to bitmap instance
           <u>pos</u> Bit position identifying the array2 slab
           <u>slab</u> Value to be assigned to the 64-bit slab in array2

       Definition at line <b>393</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>void</b> <b>rte_bitmap_clear</b> <b>(struct</b> <b>rte_bitmap</b> <b>*</b> <b>bmp,</b> <b>uint32_t</b> <b>pos)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap bit clear

       <b>Parameters</b>
           <u>bmp</u> Handle to bitmap instance
           <u>pos</u> Bit position

       Definition at line <b>458</b> of file <b>rte_bitmap.h</b>.

   <b>static</b> <b>int</b> <b>rte_bitmap_scan</b> <b>(struct</b> <b>rte_bitmap</b> <b>*</b> <b>bmp,</b> <b>uint32_t</b> <b>*</b> <b>pos,</b> <b>uint64_t</b> <b>*</b> <b>slab)</b> <b>[inline],</b>  <b>[static]</b>
       Bitmap scan (with automatic wrap-around)

       <b>Parameters</b>
           <u>bmp</u> Handle to bitmap instance
           <u>pos</u> When function call returns 1, pos contains the position of the next set bit, otherwise not
           modified
           <u>slab</u> When function call returns 1, slab contains the value of the entire 64-bit slab where the bit
           indicated by pos is located. Slabs are always 64-bit aligned, so the position of the first bit of the
           slab (this bit is not necessarily set) is pos / 64. Once a slab has been returned by the bitmap scan
           operation, the internal pointers of the bitmap are updated to point after this slab, so the same slab
           will not be returned again if it contains more than one bit which is set. When function call returns
           0, slab is not modified.

       <b>Returns</b>
           0 if there is no bit set in the bitmap, 1 otherwise

       Definition at line <b>567</b> of file <b>rte_bitmap.h</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                 <u><a href="../man3/rte_bitmap.h.3.html">rte_bitmap.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>