<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVN::Hooks::UpdateConfFile - Maintain the repository configuration versioned.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsvn-hooks-perl">libsvn-hooks-perl_1.36-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SVN::Hooks::UpdateConfFile - Maintain the repository configuration versioned.

</pre><h4><b>VERSION</b></h4><pre>
       version 1.36

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This SVN::Hooks plugin allows you to maintain the repository configuration files under version control.

       The repository configuration is usually kept in the directory "conf" under the directory where the
       repository was created. In a brand new repository you see there the files "authz", "passwd", and
       "svnserve.conf". It's too bad that these important files are usually kept out of any version control
       system. This plugin tries to solve this problem allowing you to keep these files versioned under the same
       repository where they are used.

       It's active in the "pre-commit" and the "post-commit" hooks.

       It's configured by the following directive.

   <b>UPDATE_CONF_FILE(FROM,</b> <b>TO,</b> <b>@ARGS)</b>
       This directive makes that after a successful commit in which the file FROM, under version control, have
       been added or modified, its newest version is copied to TO.

       FROM can be a string or a qr/Regexp/ specifying the file path relative to the repository's root (e.g.
       "trunk/src/version.c" or "qr:^conf/(\w+).conf$:").

       TO must be a relative path indicating where the original file must be copied to below the "/repo/conf"
       directory in the server. It can be an explicit file name or a directory, in which case the basename of
       FROM is used as the name of the destination file. Non-existing directory components of TO are
       automatically created.

       Note that if the path doesn't exist the hook assumes that it should be a file. To make sure it's
       understood as a directory you may end it with a forward slash (/).

       If FROM is a qr/Regexp/, TO is evaluated as a string in order to allow for the interpolation of capture
       buffers from the regular expression. This is useful to map the copy operation to a different directory
       structure. For example, this configuration "qr:^conf/(\w+).conf$: =&gt; '$1.conf'" updates any .conf file in
       the repository conf directory.

       The optional @ARGS must be a sequence of pairs like these:

       validator =&gt; ARRAY or CODE
           A  validator  is a function or a command (specified by an array of strings that will be passed to the
           shell) that will check the contents of FROM in the pre-commit hook to see if it's valid. If there  is
           no validator, the contents are considered valid.

           The function receives three arguments:

           A string with the contents of FROM
           A string with the relative path to FROM in the repository
           An SVN::Look object representing the commit transaction

           The command is called with three arguments:

           The path to a temporary copy of FROM
           The relative path to FROM in the repository
           The path to the root of the repository in the server
       generator =&gt; ARRAY or CODE
           A  generator  is a function or a command (specified by an array of strings that will be passed to the
           shell) that will transform the contents of FROM in the post-commit hook before copying it to  TO.  If
           there is no generator, the contents are copied as is.

           The function receives the same three arguments as the validator's function above.

           The command is called with the same three arguments as the validator's command above.

       actuator =&gt; ARRAY or CODE
           An  actuator  is a function or a command (specified by an array of strings that will be passed to the
           shell) that will be invoked after a successful commit of FROM in the post-commit hook.

           The function receives the same three arguments as the validator's function above.

           The command is called with the same three arguments as the validator's command above.

       rotate =&gt; NUMBER
           By default, after each successful commit the TO file is overwritten by the new contents of FROM. With
           this option, the last NUMBER versions of TO are kept on disk with numeric suffixes ranging from .0 to
           ".NUMBER-1". This can be useful, for instance, in case you manage to commit a wrong authz  file  that
           denies any subsequent commit.

       remove =&gt; BOOL
           By  default, if FROM is <b>deleted</b> in the commit, nothing happens to TO. If you want to have the file TO
           removed from the repository when FROM is deleted, set this option to a true value such as '1'.

               UPDATE_CONF_FILE(
                   'conf/authz' =&gt; 'authz',
                   validator    =&gt; ['/usr/local/bin/svnauthcheck'],
                   generator    =&gt; ['/usr/local/bin/authz-expand-includes'],
                   actuator     =&gt; ['/usr/local/bin/notify-auth-change'],
                   rotate       =&gt; 2,
               );

               UPDATE_CONF_FILE(
                   'conf/svn-hooks.conf' =&gt; 'svn-hooks.conf',
                   validator    =&gt; [qw(<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?perl">/usr/bin/perl</a> -c)],
                   actuator     =&gt; sub {
                                       my ($contents, $file) = @_;
                                       die "Can't use Gustavo here." if $contents =~ /gustavo/;
                                   },
                   rotate       =&gt; 2,
               );

               UPDATE_CONF_FILE(
                   qr:/file(\n+)$:' =&gt; 'subdir/$1/file',
                   rotate       =&gt; 2,
                   remove       =&gt; 1,
               );

</pre><h4><b>AUTHOR</b></h4><pre>
       Gustavo L. de M. Chaves &lt;<a href="mailto:gnustavo@cpan.org">gnustavo@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2022 by CPqD &lt;www.cpqd.com.br&gt;.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.36.0                                       2022-09-11                    <u>SVN::Hooks::<a href="../man3pm/UpdateConfFile.3pm.html">UpdateConfFile</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>