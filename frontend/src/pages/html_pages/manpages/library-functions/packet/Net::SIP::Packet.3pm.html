<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net::SIP::Packet - handling of SIP packets</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnet-sip-perl">libnet-sip-perl_0.838-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Net::SIP::Packet - handling of SIP packets

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Net::SIP::Packet;
         use Net::SIP::Request;
         use Net::SIP::Response;
         my $pkt = eval { Net::SIP::Packet-&gt;new( $sip_string ) }
           or die "invalid SIP packet";
         $pkt-&gt;get_header( 'call-id' ) || die "no call-id";
         $pkt-&gt;set_header( via =&gt; \@via );
         print $pkt-&gt;as_string;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module implements the parsing, manipulation and creation of SIP packets according to RFC3261.

       NET::SIP::Packet's objects can be created by parsing a string containing the SIP packet or by
       constructing it from parts, e.g. header keys and values, body, method+URI (requests) or code+text
       (responses).

       All parts can be manipulated and finally the string representation of the manipulated packet can be
       (re)created.

       For dealing with requests and responses directly usually the subclasses Net::SIP::Request or
       Net::SIP::Response will be used instead.

</pre><h4><b>EXAMPLES</b></h4><pre>
         # create packet from string
         my $invite = Net::SIP::Packet-&gt;new(  &lt;&lt;'EOS' );
         INVITE sip:<a href="mailto:you@example.com">you@example.com</a> SIP/2.0
         From: &lt;sip:<a href="mailto:me@example.com">me@example.com</a>&gt;
         To: &lt;sip:<a href="mailto:you@example.com">you@example.com</a>&gt;
         ...
         EOS

         # show and manipulate some header
         print "callid=".$invite-&gt;get_header( 'call-id' )."\n";
         print "route=".join( ",", $invite-&gt;get_header( 'route' ))."\n";
         $invite-&gt;set_header( 'via' =&gt; [ $via1,$via2,.. ] );

         # get resulting string representation
         print $invite-&gt;as_string;

         # create packet from parts
         my $resp = Net::SIP::Packet-&gt;new(
               200, 'Ok',
               { to =&gt; '&lt;sip:<a href="mailto:you@example.com">you@example.com</a>&gt;', from =&gt; '&lt;sip:<a href="mailto:me@example.com">me@example.com</a>&gt;',.. }
               Net::SIP::SDP-&gt;new(...)
         );

         # and get the packet as string
         print $resp-&gt;as_string;

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       new ( STRING | @PARTS | HASH )
           This  is  the default constructor. Depending on the number of arguments branches into <b>new_from_string</b>
           or <b>new_from_parts</b> or just creates the object directly from the given HASH.

       new_from_string ( STRING )
           Interprets STRING as a SIP request or response and creates  Net::SIP::Request  or  Net::SIP::Response
           object  accordingly (these classes must have been loaded already).  Will <b>die()</b> if it cannot parse the
           string as a SIP packet.

       new_from_parts ( CODE|METHOD, TEXT|URI, \%HEADER|\@HEADER, [ BODY ] )
           If CODE|METHOD is numeric a Net::SIP::Response object will be created with the response code CODE and
           the text TEXT.  Otherwise a Net::SIP::Request object will be created with the method METHOD  and  the
           uri URI.  Note that the Request or Response class need to be loaded already.

           Header  data can be given as a hash %HEADER or array @HEADER reference.  In case of a hash the key is
           the SIP field name and the value as either a string or  a  \@list  of  strings.  The  fields  on  the
           resulting  SIP  packet  will  be sorted by name of the fields and fields with multiple values will be
           created as seperat lines.

           If the header is given as an array the elements of the array are "[ key =&gt; value ]" pairs  where  the
           keys  are the field names and the values are strings or \@list of strings. Each pair will result in a
           single line in the SIP header.  If the value was a list reference the values  in  the  list  will  be
           concatened  by  ','.   The order of the fields in the resulting SIP packet will be the same as in the
           array.

           The BODY is optional and can be given either as a string or as an reference to an object which has  a
           method  <b>as_string</b>,  like  Net::SIP::SDP.  If the BODY is an object which has a method <b>content_type</b> it
           will set the "content-type" header of the SIP object based  on  the  result  of  "BODY-&gt;content_type"
           unless a "content-type" header was explicitly given.

       _new_request | _new_response
           These  work  like  "new"  but  assign  the  new  object  to  the subclasses "Net::SIP::Request" resp.
           "Net::SIP:.Response". They are not intended to be used directly but only  for  redefining  for  using
           different subclasses when subclassing "Net::SIP::Packet".

</pre><h4><b>METHODS</b></h4><pre>
       is_request
           Returns TRUE if the SIP packet is a request, otherwise FALSE.

       is_response
           Returns TRUE if the SIP packet is a response, otherwise FALSE.

       tid Returns  a  transaction  ID  created  from the sequence number in the "CSeq" header and the "Call-Id"
           header.  All packets with the same tid belong to the same transaction.

       cseq
           Returns "CSeq" header. Short for "$self-&gt;get_header( 'cseq' )".

       callid
           Returns "Call-Id" header. Short for "$self-&gt;get_header( 'call-id' )".

       get_header ( [ NAME ] )
           If NAME is given it returns the SIP header for NAME. If no header exists returns (). If there is only
           one value for the header returns this value. In case of multiple values it returns  a  @list  of  all
           values, but if "wantarray" says, that the caller expects only a single value it will croak().

           If no NAME is given it will return a reference to a hash which contains all fields and has the format
           described in <b>new_from_parts</b>.

       add_header ( NAME, VAL )
           Adds  the  header  at  the  end  of  the SIP header.  VAL can be a string or a reference to a list of
           strings.

       insert_header ( NAME, VAL )
           Like <b>add_header</b>, but the lines will be added on top of the header.

       del_header ( NAME )
           Delete all lines from header where the field name is NAME.

       set_header ( NAME, VAL )
           Replaces an existing header, like <b>del_header</b> followed by <b>add_header</b>.

       set_body ( VAL )
           Sets body to VAL, which can be string or object. The handling for body objects see <b>new_from_parts</b>.

       as_string
           Returns string representation of SIP packet.

       dump ( [ LEVEL ] )
           Returns dump of packet as string for debugging. The higher LEVEL is the more details one gets. At the
           moment a LEVEL of 0 gets a one-line summary and the rest the result from <b>as_string</b>.

       as_parts
           Returns Array with CODE|METHOD, TEXT|URI, \@HEADER and BODY like used in <b>new_from_parts</b>.

       sdp_body( [ SDP ] )
           Returns body as Net::SIP::SDP object if there is a body and the content-type is 'application/sdp'  or
           empty. Will also find 'application/sdp' inside a 'multipart/mixed' body.

           If body contains invalid SDP it raises an exception (e.g. <b>die()</b>).

           If  the  optional  SDP  argument  is given, it is expected to be a Net::SIP::SDP object. This will be
           converted into a string and will replace an existing body (also inside multipart/mixed,  leaving  the
           rest untouched) or set a new body if none existed before.

   <b>UNDOCUMENTED</b> <b>METHODS</b>
       get_header_hashval ( [ NAME ] )
       scan_header ( @ARG )
       clone

perl v5.40.0                                       2024-09-08                              <u>Net::SIP::<a href="../man3pm/Packet.3pm.html">Packet</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>