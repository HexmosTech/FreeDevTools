<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBM::Deep::Engine::File - engine for use with DBM::Deep::Storage::File</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdbm-deep-perl">libdbm-deep-perl_2.0019-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DBM::Deep::Engine::File - engine for use with DBM::Deep::Storage::File

</pre><h4><b>PURPOSE</b></h4><pre>
       This is the engine for use with DBM::Deep::Storage::File.

</pre><h4><b>EXTERNAL</b> <b>METHODS</b></h4><pre>
   <b>new()</b>
       This takes a set of args. These args are described in the documentation for "new" in DBM::Deep.

</pre><h4><b>INTERNAL</b> <b>METHODS</b></h4><pre>
       The following methods are internal-use-only to DBM::Deep::Engine::File.

   <b>read_txn_slots()</b>
       This takes no arguments.

       This will return an array with a 1 or 0 in each slot. Each spot represents one available transaction. If
       the slot is 1, that transaction is taken. If it is 0, the transaction is available.

   <b>write_txn_slots(</b> <b>@slots</b> <b>)</b>
       This takes an array of 1's and 0's. This array represents the transaction slots returned by
       "<b>read_txn_slots()</b>". In other words, the following is true:

         @x = read_txn_slots( write_txn_slots( @x ) );

       (With the obviously missing object referents added back in.)

   <b>get_running_txn_ids()</b>
       This takes no arguments.

       This will return an array of taken transaction IDs. This wraps "<b>read_txn_slots()</b>".

   <b>get_txn_staleness_counter(</b> <b>$trans_id</b> <b>)</b>
       This will return the staleness counter for the given transaction ID. Please see "STALENESS" in
       DBM::Deep::Engine for more information.

   <b>inc_txn_staleness_counter(</b> <b>$trans_id</b> <b>)</b>
       This will increment the staleness counter for the given transaction ID. Please see "STALENESS" in
       DBM::Deep::Engine for more information.

   <b>get_entries()</b>
       This takes no arguments.

       This returns a list of all the sectors that have been modified by this transaction.

   <b>add_entry(</b> <b>$trans_id,</b> <b>$location</b> <b>)</b>
       This takes a transaction ID and a file location and marks the sector at that location as having been
       modified by the transaction identified by $trans_id.

       This returns nothing.

       <b>NOTE</b>: Unlike all the other <b>_entries()</b> methods, there are several cases where "$trans_id !=
       $self-&gt;trans_id" for this method.

   <b>reindex_entry(</b> <b>$old_loc,</b> <b>$new_loc</b> <b>)</b>
       This takes two locations (old and new, respectively). If a location that has been modified by this
       transaction is subsequently reindexed due to a bucketlist overflowing, then the entries hash needs to be
       made aware of this change.

       This returns nothing.

   <b>clear_entries()</b>
       This takes no arguments. It will clear the entries list for the running transaction.

       This returns nothing.

   <b>_write_file_header()</b>
       This writes the file header for a new file. This will write the various settings that set how the file is
       interpreted.

   <b>_read_file_header()</b>
       This reads the file header from an existing file. This will read the various settings that set how the
       file is interpreted.

   <b>_apply_digest(</b> <b>@stuff</b> <b>)</b>
       This will apply the digest method (default to Digest::MD5::md5) to the arguments passed in and return the
       result.

   <b>_add_free_blist_sector(</b> <b>$offset,</b> <b>$size</b> <b>)</b>
   <b>_add_free_data_sector(</b> <b>$offset,</b> <b>$size</b> <b>)</b>
   <b>_add_free_index_sector(</b> <b>$offset,</b> <b>$size</b> <b>)</b>
       These methods are all wrappers around <b>_add_free_sector()</b>, providing the proper chain offset ($multiple)
       for the sector type.

   <b>_add_free_sector(</b> <b>$multiple,</b> <b>$offset,</b> <b>$size</b> <b>)</b>
       <b>_add_free_sector()</b> takes the offset into the chains location, the offset of the sector, and the size of
       that sector. It will mark the sector as a free sector and put it into the list of sectors that are free
       of this type for use later.

       This returns nothing.

       <b>NOTE</b>: $size is unused?

   <b>_request_blist_sector(</b> <b>$size</b> <b>)</b>
   <b>_request_data_sector(</b> <b>$size</b> <b>)</b>
   <b>_request_index_sector(</b> <b>$size</b> <b>)</b>
       These methods are all wrappers around <b>_request_sector()</b>, providing the proper chain offset ($multiple)
       for the sector type.

   <b>_request_sector(</b> <b>$multiple</b> <b>$size</b> <b>)</b>
       This takes the offset into the chains location and the size of that sector.

       This returns the object with the sector. If there is an available free sector of that type, then it will
       be reused. If there isn't one, then a new one will be allocated.

   <b>ACCESSORS</b>
       The following are readonly attributes.

       •   byte_size

       •   hash_size

       •   hash_chars

       •   num_txns

       •   max_buckets

       •   blank_md5

       •   data_sector_size

       •   txn_bitfield_len

       The following are read/write attributes.

       •   trans_id / set_trans_id( $new_id )

       •   trans_loc / set_trans_loc( $new_loc )

       •   chains_loc / set_chains_loc( $new_loc )

   <b>_dump_file()</b>
       This method takes no arguments. It's used to print out a textual representation of the DBM::Deep DB file.
       It assumes the file is not-corrupted.

perl v5.36.0                                       2023-11-12                       <u>DBM::Deep::Engine::<a href="../man3pm/File.3pm.html">File</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>