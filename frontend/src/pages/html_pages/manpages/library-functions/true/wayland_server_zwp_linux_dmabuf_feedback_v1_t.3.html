<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wayland::server::zwp_linux_dmabuf_feedback_v1_t - dmabuf feedback</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/waylandpp-dev">waylandpp-dev_1.0.0-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wayland::server::zwp_linux_dmabuf_feedback_v1_t - dmabuf feedback

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;wayland-server-protocol-unstable.hpp&gt;

       Inherits wayland::server::resource_t.

   <b>Public</b> <b>Member</b> <b>Functions</b>
       std::function&lt; void()&gt; &amp; <b>on_destroy</b> ()
           destroy the feedback object
       void <b>done</b> (bool post=true)
           all feedback has been sent
       void <b>format_table</b> (int fd, uint32_t size, bool post=true)
           format and modifier table
       void <b>main_device</b> (array_t const &amp;device, bool post=true)
           preferred main device
       void <b>tranche_done</b> (bool post=true)
           a preference tranche has been sent
       void <b>tranche_target_device</b> (array_t const &amp;device, bool post=true)
           target device
       void <b>tranche_formats</b> (array_t const &amp;indices, bool post=true)
           supported buffer format modifier
       void <b>tranche_flags</b> (zwp_linux_dmabuf_feedback_v1_tranche_flags const &amp;flags, bool post=true)
           tranche flags
       bool <b>proxy_has_object</b> () const
           Check whether this wrapper actually wraps an object.
       void <b>post_no_memory</b> () const
       uint32_t <b>get_id</b> () const
       client_t <b>get_client</b> () const
       unsigned int <b>get_version</b> () const
       std::string <b>get_class</b> ()

   <b>Static</b> <b>Public</b> <b>Attributes</b>
       static constexpr std::uint32_t <b>done_since_version</b> = 1
           Minimum protocol version required for the <b>done</b> function.
       static constexpr std::uint32_t <b>format_table_since_version</b> = 1
           Minimum protocol version required for the <b>format_table</b> function.
       static constexpr std::uint32_t <b>main_device_since_version</b> = 1
           Minimum protocol version required for the <b>main_device</b> function.
       static constexpr std::uint32_t <b>tranche_done_since_version</b> = 1
           Minimum protocol version required for the <b>tranche_done</b> function.
       static constexpr std::uint32_t <b>tranche_target_device_since_version</b> = 1
           Minimum protocol version required for the <b>tranche_target_device</b> function.
       static constexpr std::uint32_t <b>tranche_formats_since_version</b> = 1
           Minimum protocol version required for the <b>tranche_formats</b> function.
       static constexpr std::uint32_t <b>tranche_flags_since_version</b> = 1
           Minimum protocol version required for the <b>tranche_flags</b> function.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       dmabuf feedback

       This object advertises dmabuf parameters feedback. This includes the preferred devices and the supported
       formats/modifiers.

       The parameters are sent once when this object is created and whenever they change. The done event is
       always sent once after all parameters have been sent. When a single parameter changes, all parameters are
       re-sent by the compositor.

       Compositors can re-send the parameters when the current client buffer allocations are sub-optimal.
       Compositors should not re-send the parameters if re-allocating the buffers would not result in a more
       optimal configuration. In particular, compositors should avoid sending the exact same parameters multiple
       times in a row.

       The tranche_target_device and tranche_modifier events are grouped by tranches of preference. For each
       tranche, a tranche_target_device, one tranche_flags and one or more tranche_modifier events are sent,
       followed by a tranche_done event finishing the list. The tranches are sent in descending order of
       preference. All formats and modifiers in the same tranche have the same preference.

       To send parameters, the compositor sends one main_device event, tranches (each consisting of one
       tranche_target_device event, one tranche_flags event, tranche_modifier events and then a tranche_done
       event), then one done event.

       Definition at line <b>2096</b> of file <b>wayland-server-protocol-unstable.hpp</b>.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>zwp_linux_dmabuf_feedback_v1_t::done</b> <b>(bool</b> <b>post</b> <b>=</b> <b>true)</b>
       all feedback has been sent This event is sent after all parameters of a wp_linux_dmabuf_feedback object
       have been sent.

       This allows changes to the wp_linux_dmabuf_feedback parameters to be seen as atomic, even if they happen
       via multiple events.

       Definition at line <b>5130</b> of file <b>wayland-server-protocol-unstable.cpp</b>.

   <b>void</b> <b>zwp_linux_dmabuf_feedback_v1_t::format_table</b> <b>(int</b> <b>fd,</b> <b>uint32_t</b> <b>size,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       format and modifier table

       <b>Parameters</b>
           <u>fd</u> table file descriptor
           <u>size</u> table size, in bytes

       This event provides a file descriptor which can be memory-mapped to access the format and modifier table.

       The table contains a tightly packed array of consecutive format + modifier pairs. Each pair is 16 bytes
       wide. It contains a format as a 32-bit unsigned integer, followed by 4 bytes of unused padding, and a
       modifier as a 64-bit unsigned integer. The native endianness is used.

       The client must map the file descriptor in read-only private mode.

       Compositors are not allowed to mutate the table file contents once this event has been sent. Instead,
       compositors must create a new, separate table file and re-send feedback parameters. Compositors are
       allowed to store duplicate format + modifier pairs in the table.

       Definition at line <b>5135</b> of file <b>wayland-server-protocol-unstable.cpp</b>.

   <b>std::string</b> <b>wayland::server::resource_t::get_class</b> <b>()</b> <b>[inherited]</b>
       Retrieve the interface name (class) of a resource object.

       <b>Returns</b>
           Interface name of the resource object.

   <b>client_t</b> <b>wayland::server::resource_t::get_client</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the associated client

       <b>Returns</b>
           the client that owns the resource.

   <b>uint32_t</b> <b>wayland::server::resource_t::get_id</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the internal ID of the resource

       <b>Returns</b>
           the internal ID of the resource

   <b>unsigned</b> <b>int</b> <b>wayland::server::resource_t::get_version</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get interface version

       <b>Returns</b>
           Interface version this resource has been constructed with.

   <b>void</b> <b>zwp_linux_dmabuf_feedback_v1_t::main_device</b> <b>(array_t</b> <b>const</b> <b>&amp;</b> <b>device,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       preferred main device

       <b>Parameters</b>
           <u>device</u> device dev_t value

       This event advertises the main device that the server prefers to use when direct scan-out to the target
       device isn't possible. The advertised main device may be different for each wp_linux_dmabuf_feedback
       object, and may change over time.

       There is exactly one main device. The compositor must send at least one preference tranche with
       tranche_target_device equal to main_device.

       Clients need to create buffers that the main device can import and read from, otherwise creating the
       dmabuf wl_buffer will fail (see the wp_linux_buffer_params.create and create_immed requests for details).
       The main device will also likely be kept active by the compositor, so clients can use it instead of
       waking up another device for power savings.

       In general the device is a DRM node. The DRM node type (primary vs. render) is unspecified. Clients must
       not rely on the compositor sending a particular node type. Clients cannot check two devices for equality
       by comparing the dev_t value.

       If explicit modifiers are not supported and the client performs buffer allocations on a different device
       than the main device, then the client must force the buffer to have a linear layout.

       Definition at line <b>5140</b> of file <b>wayland-server-protocol-unstable.cpp</b>.

   <b>std::function&lt;</b> <b>void()&gt;</b> <b>&amp;</b> <b>zwp_linux_dmabuf_feedback_v1_t::on_destroy</b> <b>()</b>
       destroy the feedback object Using this request a client can tell the server that it is not going to use
       the wp_linux_dmabuf_feedback object anymore.

       Definition at line <b>5124</b> of file <b>wayland-server-protocol-unstable.cpp</b>.

   <b>void</b> <b>wayland::server::resource_t::post_no_memory</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Post 'not enough memory' error to the client

       If the compositor has not enough memory to fulfill a certail request of the client, this function can be
       called to notify the client of this circumstance.

   <b>bool</b> <b>wayland::server::resource_t::proxy_has_object</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Check whether this wrapper actually wraps an object.

       <b>Returns</b>
           true if there is an underlying object, false if this wrapper is empty

   <b>void</b> <b>zwp_linux_dmabuf_feedback_v1_t::tranche_done</b> <b>(bool</b> <b>post</b> <b>=</b> <b>true)</b>
       a preference tranche has been sent This event splits tranche_target_device and tranche_modifier events in
       preference tranches. It is sent after a set of tranche_target_device and tranche_modifier events; it
       represents the end of a tranche. The next tranche will have a lower preference.

       Definition at line <b>5145</b> of file <b>wayland-server-protocol-unstable.cpp</b>.

   <b>void</b> <b>zwp_linux_dmabuf_feedback_v1_t::tranche_flags</b> <b>(zwp_linux_dmabuf_feedback_v1_tranche_flags</b> <b>const</b> <b>&amp;</b> <b>flags,</b>
       <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       tranche flags

       <b>Parameters</b>
           <u>flags</u> tranche flags

       This event sets tranche-specific flags.

       The scanout flag is a hint that direct scan-out may be attempted by the compositor on the target device
       if the client appropriately allocates a buffer. How to allocate a buffer that can be scanned out on the
       target device is implementation-defined.

       This event is tied to a preference tranche, see the tranche_done event.

       Definition at line <b>5160</b> of file <b>wayland-server-protocol-unstable.cpp</b>.

   <b>void</b> <b>zwp_linux_dmabuf_feedback_v1_t::tranche_formats</b> <b>(array_t</b> <b>const</b> <b>&amp;</b> <b>indices,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       supported buffer format modifier

       <b>Parameters</b>
           <u>indices</u> array of 16-bit indexes

       This event advertises the format + modifier combinations that the compositor supports.

       It carries an array of indices, each referring to a format + modifier pair in the last received format
       table (see the format_table event). Each index is a 16-bit unsigned integer in native endianness.

       For legacy support, DRM_FORMAT_MOD_INVALID is an allowed modifier. It indicates that the server can
       support the format with an implicit modifier. When a buffer has DRM_FORMAT_MOD_INVALID as its modifier,
       it is as if no explicit modifier is specified. The effective modifier will be derived from the dmabuf.

       A compositor that sends valid modifiers and DRM_FORMAT_MOD_INVALID for a given format supports both
       explicit modifiers and implicit modifiers.

       Compositors must not send duplicate format + modifier pairs within the same tranche or across two
       different tranches with the same target device and flags.

       This event is tied to a preference tranche, see the tranche_done event.

       For the definition of the format and modifier codes, see the wp_linux_buffer_params.create request.

       Definition at line <b>5155</b> of file <b>wayland-server-protocol-unstable.cpp</b>.

   <b>void</b> <b>zwp_linux_dmabuf_feedback_v1_t::tranche_target_device</b> <b>(array_t</b> <b>const</b> <b>&amp;</b> <b>device,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       target device

       <b>Parameters</b>
           <u>device</u> device dev_t value

       This event advertises the target device that the server prefers to use for a buffer created given this
       tranche. The advertised target device may be different for each preference tranche, and may change over
       time.

       There is exactly one target device per tranche.

       The target device may be a scan-out device, for example if the compositor prefers to directly scan-out a
       buffer created given this tranche. The target device may be a rendering device, for example if the
       compositor prefers to texture from said buffer.

       The client can use this hint to allocate the buffer in a way that makes it accessible from the target
       device, ideally directly. The buffer must still be accessible from the main device, either through direct
       import or through a potentially more expensive fallback path. If the buffer can't be directly imported
       from the main device then clients must be prepared for the compositor changing the tranche priority or
       making wl_buffer creation fail (see the wp_linux_buffer_params.create and create_immed requests for
       details).

       If the device is a DRM node, the DRM node type (primary vs. render) is unspecified. Clients must not rely
       on the compositor sending a particular node type. Clients cannot check two devices for equality by
       comparing the dev_t value.

       This event is tied to a preference tranche, see the tranche_done event.

       Definition at line <b>5150</b> of file <b>wayland-server-protocol-unstable.cpp</b>.

</pre><h4><b>Member</b> <b>Data</b> <b>Documentation</b></h4><pre>
   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::zwp_linux_dmabuf_feedback_v1_t::done_since_version</b> <b>=</b> <b>1</b> <b>[static],</b>
       <b>[constexpr]</b>
       Minimum protocol version required for the <b>done</b> function.

       Definition at line <b>2143</b> of file <b>wayland-server-protocol-unstable.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::zwp_linux_dmabuf_feedback_v1_t::format_table_since_version</b> <b>=</b> <b>1</b>
       <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>format_table</b> function.

       Definition at line <b>2169</b> of file <b>wayland-server-protocol-unstable.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::zwp_linux_dmabuf_feedback_v1_t::main_device_since_version</b> <b>=</b> <b>1</b>
       <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>main_device</b> function.

       Definition at line <b>2203</b> of file <b>wayland-server-protocol-unstable.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::zwp_linux_dmabuf_feedback_v1_t::tranche_done_since_version</b> <b>=</b> <b>1</b>
       <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>tranche_done</b> function.

       Definition at line <b>2217</b> of file <b>wayland-server-protocol-unstable.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::zwp_linux_dmabuf_feedback_v1_t::tranche_flags_since_version</b> <b>=</b> <b>1</b>
       <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>tranche_flags</b> function.

       Definition at line <b>2308</b> of file <b>wayland-server-protocol-unstable.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::zwp_linux_dmabuf_feedback_v1_t::tranche_formats_since_version</b> <b>=</b> <b>1</b>
       <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>tranche_formats</b> function.

       Definition at line <b>2289</b> of file <b>wayland-server-protocol-unstable.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::zwp_linux_dmabuf_feedback_v1_t::tranche_target_device_since_version</b>
       <b>=</b> <b>1</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>tranche_target_device</b> function.

       Definition at line <b>2254</b> of file <b>wayland-server-protocol-unstable.hpp</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for Wayland++ from the source code.

Version 1.0.0                                Wed May 1 2024 17<u>wayland::server::<a href="../man3/zwp_linux_dmabuf_feedback_v1_t.3.html">zwp_linux_dmabuf_feedback_v1_t</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>