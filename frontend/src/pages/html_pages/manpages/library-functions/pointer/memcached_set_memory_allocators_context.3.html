<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>memcached_set_memory_allocators_context - libmemcached Documentation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmemcached-dev">libmemcached-dev_1.1.4-1.1build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       memcached_set_memory_allocators_context - libmemcached Documentation

       Manage memory allocator functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libmemcached/memcached.h&gt;</b>
              Compile and link with -lmemcached

       <u>memcached_return_t</u> <b>memcached_set_memory_allocators(</b><u>memcached_st</u> <b>*ptr,</b> <u>memcached_malloc_fn</u> <b>mem_malloc,</b>
       <u>memcached_free_fn</u> <b>mem_free,</b> <u>memcached_realloc_fn</u> <b>mem_realloc,</b> <u>memcached_calloc_fn</u> <b>mem_calloc,</b> <b>void</b>
       <b>*context)</b>

              <b>Parameters</b>

                     • <b>ptr</b> -- pointer to an initialized <u>memcached_st</u> struct

                     • <b>mem_malloc</b> -- pointer to a <u>memcached_malloc_fn</u> callback

                     • <b>mem_free</b> -- pointer to a <u>memcached_free_fn</u> callback

                     • <b>mem_realloc</b> -- pointer to a <u>memcached_realloc_fn</u> callback

                     • <b>mem_calloc</b> -- pointer to a <u>memcached_calloc_fn</u> callback

                     • <b>context</b> -- pointer to a user supplied context

              <b>Returns</b>
                     <u>memcached_return_t</u> indicating success

       <b>void</b> <b>memcached_get_memory_allocators(</b><u>memcached_st</u> <b>*ptr,</b> <u>memcached_malloc_fn</u> <b>*mem_malloc,</b>
       <u>memcached_free_fn</u> <b>*mem_free,</b> <u>memcached_realloc_fn</u> <b>*mem_realloc,</b> <u>memcached_calloc_fn</u> <b>*mem_calloc)</b>

              <b>Parameters</b>

                     • <b>ptr</b> -- pointer to an initialized <u>memcached_st</u> struct

                     • <b>mem_malloc</b> -- pointer to store the address of the <u>memcached_malloc_fn</u> callback

                     • <b>mem_free</b> -- pointer to store the address of the <u>memcached_free_fn</u> callback

                     • <b>mem_realloc</b> -- pointer to store the address of the <u>memcached_realloc_fn</u> callback

                     • <b>mem_calloc</b> -- pointer to store the address of the <u>memcached_calloc_fn</u> callback

       <b>void</b> <b>*memcached_get_memory_allocators_context(const</b> <u>memcached_st</u> <b>*ptr)</b>

              <b>Parameters</b>
                     <b>ptr</b> -- pointer to an initialized <u>memcached_st</u> struct

              <b>Returns</b>
                     pointer to the user supplied context

       <b>typedef</b> <b>void</b> <b>*(*memcached_malloc_fn)(</b><u>memcached_st</u> <b>*ptr,</b> <b>const</b> <b>size_t</b> <b>size,</b> <b>void</b> <b>*context)</b>

              <b>Param</b> <b>ptr</b>
                     pointer to an initialized <u>memcached_st</u> struct

              <b>Param</b> <b>size</b>
                     the number of bytes to allocate

              <b>Param</b> <b>context</b>
                     pointer to the user supplied context

              <b>Returns</b>
                     pointer to at least <b>size</b> bytes of allocated memory

       <b>typedef</b> <b>void</b> <b>*(*memcached_realloc_fn)(</b><u>memcached_st</u> <b>*ptr,</b> <b>void</b> <b>*mem,</b> <b>const</b> <b>size_t</b> <b>size,</b> <b>void</b> <b>*context)</b>

              <b>Param</b> <b>ptr</b>
                     pointer to an initialized <u>memcached_st</u> struct

              <b>Param</b> <b>mem</b>
                     pointer to previously allocated memory

              <b>Param</b> <b>size</b>
                     the number of bytes to allocate

              <b>Param</b> <b>context</b>
                     pointer to the user supplied context

              <b>Returns</b>
                     pointer to at least <b>size</b> bytes of allocated memory

       <b>typedef</b> <b>void</b> <b>(*memcached_free_fn)(</b><u>memcached_st</u> <b>*ptr,</b> <b>void</b> <b>*mem,</b> <b>void</b> <b>*context)</b>

              <b>Param</b> <b>ptr</b>
                     pointer to an initialized <u>memcached_st</u> struct

              <b>Param</b> <b>mem</b>
                     pointer to previously allocated memory

              <b>Param</b> <b>context</b>
                     pointer to the user supplied context

       <b>typedef</b> <b>void</b> <b>*(*memcached_calloc_fn)(</b><u>memcached_st</u> <b>*ptr,</b> <b>size_t</b> <b>nelem,</b> <b>const</b> <b>size_t</b> <b>elsize,</b> <b>void</b> <b>*context)</b>

              <b>Param</b> <b>ptr</b>
                     pointer to an initialized <u>memcached_st</u> struct

              <b>Param</b> <b>nelem</b>
                     number of elements to allocate

              <b>Param</b> <b>elsize</b>
                     the number of bytes to allocate per element

              <b>Param</b> <b>context</b>
                     pointer to the user supplied context

              <b>Returns</b>
                     pointer to at least <b>elsize</b> * <b>nelem</b>  bytes of allocated and zeroed memory

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>libmemcached</b>  allows  you  to  specify  your  own memory allocators, optimized for your application. This
       enables libmemcached to be used inside of applications that have their own malloc implementation.

       <u>memcached_set_memory_allocators()</u> is used to set the memory allocators used  by  the  memcached  instance
       specified  by  ptr.  Please  note that you cannot override only one of the memory allocators, you have to
       specify a complete new set if you want to override one of them. All of the  memory  allocation  functions
       should  behave  as  specified  in  the  C99  standard. Specify NULL as all functions to reset them to the
       default values.

       <u>memcached_get_memory_allocators()</u> is used to get the currently used  memory  allocators  by  a  memcached
       handle.

       <u>memcached_get_memory_allocators_context()</u>  returns  the  void  *  that  was  passed in during the call to
       <u>memcached_set_memory_allocators()</u>.

       The first argument to the memory allocator functions is a pointer to a memcached structure, the is passed
       as const and you will need to clone it in order to make use of any operation which would modify it.

</pre><h4><b>NOTES</b></h4><pre>
       In version 0.38 all functions were modified to have a context void pointer passed to them.  This  was  so
       that custom allocators could have their own space for memory.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u>memcached_set_memory_allocators()</u>  returns  <u>MEMCACHED_SUCCESS</u>  upon success, and <u>MEMCACHED_FAILURE</u> if you
       don't pass a complete set of function pointers.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/memcached.1.html">memcached</a>(1)</b> <b><a href="../man3/libmemcached.3.html">libmemcached</a>(3)</b> <b><a href="../man3/memcached_strerror.3.html">memcached_strerror</a>(3)</b>

1.1                                               Mar 31, 2024        <u><a href="../man3/MEMCACHED_SET_MEMORY_ALLOCATORS_CONTEXT.3.html">MEMCACHED_SET_MEMORY_ALLOCATORS_CONTEXT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>