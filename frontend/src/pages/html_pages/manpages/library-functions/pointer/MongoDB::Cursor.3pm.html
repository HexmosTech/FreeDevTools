<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB::Cursor - A lazy cursor for Mongo query results</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongodb-perl">libmongodb-perl_2.2.2-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MongoDB::Cursor - A lazy cursor for Mongo query results

</pre><h4><b>VERSION</b></h4><pre>
       version v2.2.2

</pre><h4><b>SYNOPSIS</b></h4><pre>
           while (my $object = $cursor-&gt;next) {
               ...
           }

           my @objects = $cursor-&gt;all;

</pre><h4><b>USAGE</b></h4><pre>
   <b>Multithreading</b>
       <b>NOTE</b>: Per threads documentation, use of Perl threads is discouraged by the maintainers of Perl and the
       MongoDB Perl driver does not test or provide support for use with threads.

       Cursors are cloned in threads, but not reset.  Iterating the same cursor from multiple threads will give
       unpredictable results.  Only iterate from a single thread.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>started_iterating</b>
       A boolean indicating if this cursor has queried the database yet. Methods modifying the query will
       complain if they are called after the database is queried.

</pre><h4><b>QUERY</b> <b>MODIFIERS</b></h4><pre>
       These methods modify the query to be run.  An exception will be thrown if they are called after results
       are iterated.

   <b>immortal</b>
           $cursor-&gt;<a href="../man1/immortal.1.html">immortal</a>(1);

       Ordinarily, a cursor "dies" on the database server after a certain length of time (approximately 10
       minutes), to prevent inactive cursors from hogging resources.  This option indicates that a cursor should
       not die until all of its results have been fetched or it goes out of scope in Perl.

       Boolean value, defaults to 0.

       Note: "immortal" only affects the server-side timeout.  If you are getting client-side timeouts you will
       need to change your client configuration.  See "max_time_ms" in MongoDB::MongoClient and
       "socket_timeout_ms" in MongoDB::MongoClient.

       Returns this cursor for chaining operations.

   <b>fields</b>
           $coll-&gt;insert({name =&gt; "Fred", age =&gt; 20});
           my $cursor = $coll-&gt;find-&gt;fields({ name =&gt; 1 });
           my $obj = $cursor-&gt;next;
           $obj-&gt;{name}; "Fred"
           $obj-&gt;{age}; # undef

       Selects which fields are returned.  The default is all fields.  When fields are specified, _id is
       returned by default, but this can be disabled by explicitly setting it to "0".  E.g.  "_id =&gt; 0".
       Argument must be either a hash reference or a Tie::IxHash object.

       See Limit fields to return &lt;<a href="http://docs.mongodb.org/manual/tutorial/project-fields-from-query-results/">http://docs.mongodb.org/manual/tutorial/project-fields-from-query-results/</a>&gt;
       in the MongoDB documentation for details.

       Returns this cursor for chaining operations.

   <b>sort</b>
           # sort by name, descending
           $cursor-&gt;sort([name =&gt; -1]);

       Adds a sort to the query.  Argument is either a hash reference or a Tie::IxHash or an array reference of
       key/value pairs.  Because hash references are not ordered, do not use them for more than one key.

       Returns this cursor for chaining operations.

   <b>limit</b>
           $cursor-&gt;<a href="../man20/limit.20.html">limit</a>(20);

       Sets cursor to return a maximum of N results.

       Returns this cursor for chaining operations.

   <b>max_await_time_ms</b>
           $cursor-&gt;max_await_time_ms( 500 );

       The maximum amount of time in milliseconds for the server to wait on new documents to satisfy a tailable
       cursor query. This only applies to a cursor of type 'tailble_await'.  This is ignored if the cursor is
       not a 'tailable_await' cursor or the server version is less than version 3.2.

       Returns this cursor for chaining operations.

   <b>max_time_ms</b>
           $cursor-&gt;max_time_ms( 500 );

       Causes the server to abort the operation if the specified time in milliseconds is exceeded.

       Returns this cursor for chaining operations.

   <b>tailable</b>
           $cursor-&gt;<a href="../man1/tailable.1.html">tailable</a>(1);

       If a cursor should be tailable.  Tailable cursors can only be used on capped collections and are similar
       to the "tail -f" command: they never die and keep returning new results as more is added to a collection.

       They are often used for getting log messages.

       Boolean value, defaults to 0.

       If you want the tailable cursor to block for a few seconds, use "tailable_await" instead.  <b>Note</b> calling
       this with a false value disables tailing, even if "tailable_await" was previously called.

       Returns this cursor for chaining operations.

   <b>tailable_await</b>
           $cursor-&gt;<a href="../man1/tailable_await.1.html">tailable_await</a>(1);

       Sets a cursor to be tailable and block for a few seconds if no data is immediately available.

       Boolean value, defaults to 0.

       If you want the tailable cursor without blocking, use "tailable" instead.  <b>Note</b> calling this with a false
       value disables tailing, even if "tailable" was previously called.

   <b>skip</b>
           $cursor-&gt;skip( 50 );

       Skips the first N results.

       Returns this cursor for chaining operations.

   <b>hint</b>
       Hint the query to use a specific index by name:

           $cursor-&gt;hint("index_name");

       Hint the query to use index based on individual keys and direction:

           $cursor-&gt;hint([field_1 =&gt; 1, field_2 =&gt; -1, field_3 =&gt; 1]);

       Use of a hash reference should be avoided except for single key indexes.

       The hint must be a string or ordered document.

       Returns this cursor for chaining operations.

   <b>partial</b>
           $cursor-&gt;<a href="../man1/partial.1.html">partial</a>(1);

       If a shard is down, mongos will return an error when it tries to query that shard.  If this is set,
       mongos will just skip that shard, instead.

       Boolean value, defaults to 0.

       Returns this cursor for chaining operations.

   <b>read_preference</b>
           $cursor-&gt;read_preference($read_preference_object);
           $cursor-&gt;read_preference('secondary', [{foo =&gt; 'bar'}]);

       Sets read preference for the cursor's connection.

       If given a single argument that is a MongoDB::ReadPreference object, the read preference is set to that
       object.  Otherwise, it takes positional arguments: the read preference mode and a tag set list, which
       must be a valid mode and tag set list as described in the MongoDB::ReadPreference documentation.

       Returns this cursor for chaining operations.

</pre><h4><b>QUERY</b> <b>INTROSPECTION</b> <b>AND</b> <b>RESET</b></h4><pre>
       These methods run introspection methods on the query conditions and modifiers stored within the cursor
       object.

   <b>explain</b>
           my $explanation = $cursor-&gt;explain;

       This will tell you the type of cursor used, the number of records the DB had to examine as part of this
       query, the number of records returned by the query, and the time in milliseconds the query took to
       execute.

       See also core documentation on explain: &lt;<a href="http://dochub.mongodb.org/core/explain">http://dochub.mongodb.org/core/explain</a>&gt;.

</pre><h4><b>QUERY</b> <b>ITERATION</b></h4><pre>
       These methods allow you to iterate over results.

   <b>result</b>
           my $result = $cursor-&gt;result;

       This method will execute the query and return a MongoDB::QueryResult object with the results.

       The "has_next", "next", and "all" methods call "result" internally, which executes the query "on demand".

       Iterating with a MongoDB::QueryResult object directly instead of a MongoDB::Cursor will be slightly
       faster, since the MongoDB::Cursor methods below just internally call the corresponding method on the
       result object.

   <b>has_next</b>
           while ($cursor-&gt;has_next) {
               ...
           }

       Checks if there is another result to fetch.  Will automatically fetch more data from the server if
       necessary.

   <b>next</b>
           while (my $object = $cursor-&gt;next) {
               ...
           }

       Returns the next object in the cursor. Will automatically fetch more data from the server if necessary.
       Returns undef if no more data is available.

   <b>batch</b>
           while (my @batch = $cursor-&gt;batch) {
               ...
           }

       Returns the next batch of data from the cursor. Will automatically fetch more data from the server if
       necessary. Returns an empty list if no more data is available.

   <b>all</b>
           my @objects = $cursor-&gt;all;

       Returns a list of all objects in the result.

   <b>reset</b>
       Resets the cursor.  After being reset, pre-query methods can be called on the cursor (sort, limit, etc.)
       and subsequent calls to result, next, has_next, or all will re-query the database.

   <b>info</b>
       Returns a hash of information about this cursor.  This is intended for debugging purposes and users
       should not rely on the contents of this method for production use.  Currently the fields are:

       •   "cursor_id"  -- the server-side id for this cursor.  See below for details.

       •   "num" -- the number of results received from the server so far

       •   "at" -- the (zero-based) index of the document that will be returned next from "next"

       •   "flag"  --  if the database could not find the cursor or another error occurred, "flag" may contain a
           hash   reference   of   flags   set   in   the   response   (depending   on    the    error).     See
           &lt;<a href="http://www.mongodb.org/display/DOCS/Mongo">http://www.mongodb.org/display/DOCS/Mongo</a>+Wire+Protocol#MongoWireProtocol-OPREPLY&gt;  for  a full list
           of flag values.

       •   "start" -- the index of the result that the current batch of results starts at.

       If the cursor has not yet executed, only the "num" field will be returned with a value of 0.

       The "cursor_id" could appear in one of three forms:

       •   MongoDB::CursorID object (a blessed reference to an 8-byte string)

       •   A perl scalar (an integer)

       •   A Math::BigInt object (64 bit integer on 32-bit perl)

       When the "cursor_id" is zero, there are no more results to fetch.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Core documentation on cursors: &lt;<a href="http://dochub.mongodb.org/core/cursors">http://dochub.mongodb.org/core/cursors</a>&gt;.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   David Golden &lt;<a href="mailto:david@mongodb.com">david@mongodb.com</a>&gt;

       •   Rassi &lt;<a href="mailto:rassi@mongodb.com">rassi@mongodb.com</a>&gt;

       •   Mike Friedman &lt;<a href="mailto:friedo@friedo.com">friedo@friedo.com</a>&gt;

       •   Kristina Chodorow &lt;<a href="mailto:k.chodorow@gmail.com">k.chodorow@gmail.com</a>&gt;

       •   Florian Ragwitz &lt;<a href="mailto:rafl@debian.org">rafl@debian.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2020 by MongoDB, Inc.

       This is free software, licensed under:

         The Apache License, Version 2.0, January 2004

perl v5.40.1                                       2025-04-03                               <u>MongoDB::<a href="../man3pm/Cursor.3pm.html">Cursor</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>