<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>packet.transport.rdmainfo - RDMA reassembly module</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/nfstest">nfstest_3.2-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       packet.transport.rdmainfo - RDMA reassembly module

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Provides functionality to reassemble RDMA fragments.

</pre><h4><b>CLASSES</b></h4><pre>
   <b>class</b> <b>RDMAinfo(packet.utils.RDMAbase)</b>
       RDMA info object used for reassembly

       The reassembled message consists of one or multiple chunks and
       each chunk in turn could be composed of multiple segments. Also,
       each segment could be composed of multiple sub-segments and each
       sub-segment could be composed of multiple fragments.
       The protocol only defines segments but if the segment length is
       large, it is split into multiple sub-segments in which each
       sub-segment is specified by RDMA_WRITE_First or RDMA_READ_Request
       packets. The handle is the same for each of these packets but with
       a shorter DMA length.

       Thus in order to reassemble all fragments for a single message,
       a list of segments is created where each segment is identified
       by its handle or RKey and the message is reassembled according
       to the chuck lists specified by the RPC-over-RDMA layer.

       <b>Methods</b> <b>defined</b> <b>here:</b>
       ---------------------

       <b>__del__</b> <b>=</b> <b>reset(self)</b>

       <b>__init__(self)</b>
       Constructor

       Initialize object's private data according to the arguments given.
       Arguments can be given as positional, named arguments or a
       combination of both.

       <b>__len__</b> <b>=</b> <b>size(self)</b>

       <b>add_iwarp_data(self,</b> <b>rdmap,</b> <b>unpack,</b> <b>isread=False)</b>
       Add iWarp fragment data

       <b>add_iwarp_request(self,</b> <b>rdmap)</b>
       Add iWarp read request information

       <b>add_rdma_data(self,</b> <b>psn,</b> <b>unpack,</b> <b>reth=None,</b> <b>only=False,</b> <b>read=False)</b>
       Add Infiniband fragment data

       <b>add_rdma_segment(self,</b> <b>rdma_seg,</b> <b>rpcrdma=None)</b>
       Add RDMA segment information and if the information already
       exists just update the length and return the segment

       <b>del_rdma_segment(self,</b> <b>rsegment)</b>
       Delete RDMA segment information

       <b>get_rdma_segment(self,</b> <b>handle)</b>
       Return RDMA segment identified by the given handle

       <b>process_rdma_segments(self,</b> <b>rpcrdma)</b>
       Process the RPC-over-RDMA chunks

       When this method is called on an RPC call, it adds the
       information of all the segments to the list of segments.
       When this method is called on an RPC reply, the segments
       should already exist so just update the segment's DMA length
       as returned by the reply.

       RPCoRDMA reads attribute is a list of read segments
       Read segment is a plain segment plus an XDR position
       A read chunk is the collection of all read segments
       with the same XDR position

       RPCoRDMA writes attribute is a list of write chunks
       A write chunk is a list of plain segments

       RPCoRDMA reply is just a single write chunk if it exists.
       Return the reply chunk data

       <b>reassemble_rdma_reads(self,</b> <b>unpack,</b> <b>psn=None,</b> <b>only=False,</b> <b>rdmap=None)</b>
       Reassemble RDMA read chunks
       The RDMA read chunks are reassembled in the read last operation

       <b>reset(self)</b>
       Clear RDMA segments

       <b>size(self)</b>
       Return the number RDMA segments

   <b>class</b> <b>RDMArequest(builtins.object)</b>
       RDMA iWarp Request object

       <b>Methods</b> <b>defined</b> <b>here:</b>
       ---------------------

       <b>__contains__(self,</b> <b>offset)</b>
       Membership test operator.
       Return true if offset belongs to this request

       <b>__init__(self,</b> <b>rdmap,</b> <b>rsegment)</b>
       Initialize self.  See help(type(self)) for accurate signature.

       <b>get_offset(self,</b> <b>offset)</b>
       Return offset translated from sink to src

   <b>class</b> <b>RDMAseg(builtins.object)</b>
       RDMA sub-segment object

       The sub-segment is created for each RDMA_WRITE_First, RDMA_WRITE_Only
       or RDMA_READ_Request and each sub-segment belongs to a list in the
       RDMAsegment object so there is no segment identifier or handle.

       Reassembly for each sub-segment is done using the PSN or packet
       sequence number in each of the data fragments. Therefore, a range
       of PSN numbers define this object which is given by the spsn and
       epsn attributes (first and last PSN respectively).

       <b>Methods</b> <b>defined</b> <b>here:</b>
       ---------------------

       <b>__del__(self)</b>
       Destructor

       <b>__init__(self,</b> <b>spsn,</b> <b>epsn,</b> <b>dmalen)</b>
       Initialize self.  See help(type(self)) for accurate signature.

       <b>get_data(self,</b> <b>padding=True)</b>
       Return sub-segment data

       <b>get_size(self)</b>
       Return sub-segment data size

       <b>insert_data(self,</b> <b>psn,</b> <b>data)</b>
       Insert data at correct position given by the psn

   <b>class</b> <b>RDMAsegment(builtins.object)</b>
       RDMA segment object

       Each segment is identified by its handle. The segment information
       comes from the RPC-over-RDMA protocol layer so the length attribute
       gives the total DMA length of the segment.

       <b>Methods</b> <b>defined</b> <b>here:</b>
       ---------------------

       <b>__del__(self)</b>
       Destructor

       <b>__init__(self,</b> <b>rdma_seg,</b> <b>rpcrdma)</b>
       Initialize self.  See help(type(self)) for accurate signature.

       <b>add_data(self,</b> <b>psn,</b> <b>data)</b>
       Add Infiniband fragment data

       <b>add_fragment(self,</b> <b>offset,</b> <b>data)</b>
       Add iWarp fragment to segment

       <b>add_sub_segment(self,</b> <b>psn,</b> <b>dmalen,</b> <b>only=False,</b> <b>iosize=0)</b>
       Add RDMA sub-segment PSN information

       <b>get_data(self,</b> <b>padding=True)</b>
       Return segment data

       <b>get_size(self)</b>
       Return segment data

       <b>valid_psn(self,</b> <b>psn)</b>
       True if given psn is valid for this segment

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/baseobj.3.html">baseobj</a>(3),</b> <b><a href="../man3/packet.utils.3.html">packet.utils</a>(3)</b>

</pre><h4><b>BUGS</b></h4><pre>
       No known bugs.

</pre><h4><b>AUTHOR</b></h4><pre>
       Jorge Mora (<a href="mailto:mora@netapp.com">mora@netapp.com</a>)

NFStest 3.2                                       21 March 2023                                      <u><a href="../man3/RDMAINFO.3.html">RDMAINFO</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>