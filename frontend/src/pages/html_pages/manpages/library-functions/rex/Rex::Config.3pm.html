<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rex::Config - Handles Rex configuration</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/rex">rex_1.16.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Rex::Config - Handles Rex configuration

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Rex::Config;

        # set a config option
        Rex::Config-&gt;set_exec_autodie(TRUE);

        # get value of a config option
        my $user = Rex::Config-&gt;get_user();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module holds all configuration options for Rex, and also allows you to specify your own ones for
       your modules.

       Please take a look at Rex::Commands first, which provides convenience wrappers for many of these options.

       While it's possible to use the methods below to set a configuration option directly, their main intended
       purpose is to be used as internal plumbing, and to provide an escape hatch in case there are no better
       alternatives.

</pre><h4><b>EXPORTED</b> <b>METHODS</b></h4><pre>
   <b>set_autodie</b>
   <b>get_autodie</b>
       Sets and gets the value of the $autodie configuration variable.

       This controls whether Rex should die() if there's an error while executing file system commands that are
       supposed to change the contents.

       Default is "undef".

   <b>set_use_net_openssh_if_present</b>
   <b>get_use_net_openssh_if_present</b>
       Sets and gets the value of the $use_net_openssh_if_present configuration variable.

       This controls whether Rex should use Net::OpenSSH for connections if that is available.

       Default is "undef".

   <b>set_use_rex_kvm_agent</b>
   <b>get_use_rex_kvm_agent</b>
       Sets and gets the value of the $use_rex_kvm_agent configuration variable.

       This controls whether Rex should setup and use a serial device for the experimental Rex KVM agent
       &lt;https://github.com/RexOps/rex-kvm-agent&gt; for managed VMs.

       Default is "undef".

   <b>set_use_template_ng</b>
   <b>get_use_template_ng</b>
       Sets and gets the value of the $use_template_ng configuration variable.

       This controls whether Rex should use Rex::Template::NG to render templates.

       Default is "undef".

   <b>set_set_no_append</b>
   <b>get_set_no_append</b>
       Sets and gets the value of the $set_no_append configuration variable.

       This controls whether Rex should overwrite or append values of configuration options when using the set
       command.

       Default is "undef".

   <b>set_check_service_exists</b>
   <b>get_check_service_exists</b>
       Sets and gets the value of the $check_service_exists configuration variable.

       This controls whether Rex should die() early if it is asked to manage a service that doesn't exist.

       Default is "undef".

   <b>set_register_cmdb_template</b>
   <b>get_register_cmdb_template</b>
       Sets and gets the value of the $register_cmdb_template configuration variable.

       This controls whether Rex should make CMDB data available to be used in templates as variables.

       Default is "undef".

   <b>set_fallback_auth</b>
   <b>get_fallback_auth</b>
       Sets and gets the value of the $fallback_auth configuration variable.

       This can be used to define an array of hash references, each of them containing authentication details to
       be tried during connection attempts when the directly specified ones fail.

       Default is "undef".

   <b>set_task_call_by_method</b>
   <b>get_task_call_by_method</b>
       Sets and gets the value of the $task_call_by_method configuration variable.

       This controls whether calling tasks as a method is allowed or not.

       Default is "undef".

   <b>set_disable_taskname_warning</b>
   <b>get_disable_taskname_warning</b>
       Sets and gets the value of the $disable_taskname_warning configuration variable.

       This controls whether Rex should show or suppress the warning message about task names that can not be
       used as Perl identifiers.

       Default is "undef".

   <b>set_task_chaining_cmdline_args</b>
   <b>get_task_chaining_cmdline_args</b>
       Sets and gets the value of the $task_chaining_cmdline_args configuration variable.

       This controls whether Rex should parse task arguments on the command line per task, or should pass all
       arguments to all tasks.

       Default is "undef".

   <b>set_verbose_run</b>
   <b>get_verbose_run</b>
       Sets and gets the value of the $verbose_run configuration variable.

       This controls whether Rex should show verbose output about executed run commands. This means an error
       message if the command is not found, a warning message if the exit code indicates an error, and an
       informational message upon success.

       Default is "undef".

   <b>set_exec_autodie</b>
   <b>get_exec_autodie</b>
       Sets and gets the value of the $exec_autodie configuration variable.

       This controls whether Rex should die() or not when the exit code of executed run command indicate an
       error.

       Default is "undef".

   <b>set_no_path_cleanup</b>
   <b>get_no_path_cleanup</b>
       Sets and gets the value of the $no_path_cleanup configuration variable.

       This controls whether Rex should use either the default or the explicitly configured "PATH" settings (via
       path or set_path) when executing commands or not.

       Default is "undef".

   <b>set_source_profile</b>
   <b>get_source_profile</b>
       Sets and gets the value of the $source_profile configuration variable.

       This controls whether Rex should source shell-specific profile files before executing commands.

       Default is "undef".

   <b>set_say_format</b>
   <b>get_say_format</b>
       Sets and gets the value of the $say_format configuration variable.

       This controls the output format of the built-in "say" command (see also sayformat).

       Default is "undef".

   <b>set_do_reporting</b>
   <b>get_do_reporting</b>
       Sets and gets the value of the $do_reporting configuration variable.

       This controls whether Rex should do reporting on executed resources where it is supported. This only
       affects the data structures returned internally.

       Default is "undef".

   <b>set_report_type</b>
   <b>get_report_type</b>
       Sets and gets the value of the $report_type configuration variable, which can also be controlled via the
       "REX_REPORT_TYPE" environment variable.

       This selects the reporting type (format) Rex should use, e.g. 'YAML'.

       Default is "undef".

   <b>set_sleep_hack</b>
   <b>get_sleep_hack</b>
       Sets and gets the value of the $sleep_hack configuration variable.

       This controls whether Rex should use or not an extra 10 ns long sleep after executed commands.

       This might help working around an issue when Rex runs inside a KVM virtualized host and Net::SSH2/libssh2
       &lt;https://www.libssh2.org&gt; is used to connect to another VM on the same hardware.

       Default is "undef".

   <b>set_cache_type</b>
   <b>get_cache_type</b>
       Sets and gets the value of the $cache_type configuration variable, which can also be controlled via the
       "REX_CACHE_TYPE" environment variable.

       This selects the cache type Rex should use, e.g. 'YAML'.

       Default is 'Base'.

   <b>set_use_cache</b>
   <b>get_use_cache</b>
       Sets and gets the value of the $use_cache configuration variable.

       This controls whether Rex should use caching or not for runtime information like CMDB contents, hardware
       and operating system information, or the shell type that is being used to execute commands on the managed
       endpoint.

       Default is "undef".

   <b>set_openssh_opt</b>
   <b>get_openssh_opt</b>
       Sets and gets the value of the $openssh_opt configuration variable, which holds a hash of the SSH
       configuration options used for the connection. See the <b><a href="../man5/ssh_config.5.html">ssh_config</a></b>(5) man page
       &lt;<a href="http://man.openbsd.org/OpenBSD-current/man5/ssh_config.5">http://man.openbsd.org/OpenBSD-current/man5/ssh_config.5</a>&gt; for the available options.

         Rex::Config-&gt;set_openssh_opt( $option =&gt; $value, );

       There is a custom option named "initialize_options" specific to Rex, which can be used to pass a hash
       reference describing the constructor parameters
       &lt;https://metacpan.org/pod/Net::OpenSSH#Net::OpenSSH-&gt;new($host,-%opts)&gt; for the underlying Net::OpenSSH
       object:

        Rex::Config-&gt;set_openssh_opt( initialize_options =&gt; { $parameter =&gt; $value, } );

       Default is "undef".

   <b>set_sudo_without_locales</b>
   <b>get_sudo_without_locales</b>
       Sets and gets the value of the $sudo_without_locales configuration variable.

       This controls whether Rex should execute sudo commands without setting any locales via the "LC_ALL"
       environment variable.

       <b>Warning:</b> if the locale is something else than "C" or "en_US", then things will break!

       Default is "undef".

   <b>set_sudo_without_sh</b>
   <b>get_sudo_without_sh</b>
       Sets and gets the value of the $sudo_without_sh configuration variable.

       This controls whether Rex should run sudo commands without "sh". This might break things.

       Default is "undef".

   <b>set_executor_for</b>
   <b>get_executor_for</b>
       Sets and gets the keys and values of the %executor_for configuration variable.

       This sets the executor for a given file type when using the upload_and_run() function of Rex::Helper::Run
       module.

       Default is:

        (
          perl   =&gt; 'perl',
          python =&gt; 'python',
          ruby   =&gt; 'ruby',
          bash   =&gt; 'bash',
        )

   <b>set_tmp_dir</b>
   <b>get_tmp_dir</b>
       Sets and gets the value of the $tmp_dir configuration variable.

       This controls which directory Rex should use for temporary files.

       Default is determined by the following logic:

       •   try to use what "File::Spec-&gt;tmpdir" would return on the managed endpoint

       •   fall back to '<a href="file:/tmp">/tmp</a>'

   <b>set_path</b>
   <b>get_path</b>
       Sets and gets the value of the $path configuration variable.

       This controls which "PATH" Rex should use when executing commands via the Rex::Commands::Run module.

       The  value  should  be  set  as  an  array reference, and will be dereferenced as such before returned by
       "get_path". The path command is a convenience wrapper for "set_path", and accepts an array.

       Default is

        qw(
          <a href="file:/bin">/bin</a>
          <a href="file:/sbin">/sbin</a>
          <a href="file:/usr/bin">/usr/bin</a>
          <a href="file:/usr/sbin">/usr/sbin</a>
          <a href="file:/usr/local/bin">/usr/local/bin</a>
          <a href="file:/usr/local/sbin">/usr/local/sbin</a>
          /usr/pkg/bin
          /usr/pkg/sbin
        )

   <b>set_user</b>
   <b>get_user</b>
       Sets and gets the value of the $user configuration variable, which also can be  set  via  the  "REX_USER"
       environment variable.

       This controls which user Rex should use for authentication.

       Default is determined by the following logic:

       •   value of "REX_USER" environment variable

       •   user set by user command

       •   user running Rex

   <b>set_password</b>
   <b>get_password</b>
       Sets  and  gets  the  value  of  the  $password  configuration  variable,  which  also can be set via the
       "REX_PASSWORD" environment variable.

       This controls what password Rex should use for authentication or as passphrase when using private keys.

       Default is "undef".

   <b>set_port</b>
   <b>get_port</b>
       Sets and gets the value of the $port configuration variable.

       This controls which port Rex should connect to.

       "get_port" accepts an optional "server =&gt; $server" argument to return the "port" setting  for  the  given
       $server as optionally set in group files.

       Default is "undef".

   <b>set_sudo_password</b>
   <b>get_sudo_password</b>
       Sets  and  gets  the value of the $sudo_password configuration variable, which can also be controlled via
       the "REX_SUDO_PASSWORD" environment variable.

       This controls what sudo password Rex should use.

       Default is determined by the following logic:

       •   value of "REX_SUDO_PASSWORD" environment variable

       •   sudo password set by the sudo_password command

       •   password set by the password command

       •   empty string ('')

   <b>set_source_global_profile</b>
   <b>get_source_global_profile</b>
       Sets and gets the value of the $source_global_profile configuration variable.

       This controls whether Rex should source "<a href="file:/etc/profile">/etc/profile</a>" before executing commands.

       Default is "undef".

   <b>set_max_connect_fails</b>
   <b>get_max_connect_fails</b>
       Sets and gets the value of the $max_connect_fails configuration variable.

       This controls how many times Rex should retry to connect before giving up.

       "get_max_connect_fails" accepts an optional "server =&gt; $server" argument to "connectionattempts"  setting
       for the given $server as optionally set in group files.

       Default is "undef".

   <b>set_proxy_command</b>
   <b>get_proxy_command</b>
       Sets and gets the value of the $proxy_command configuration variable.

       This controls the SSH ProxyCommand Rex should set for connections when Net::OpenSSH is used.

       "get_proxy_command" accepts an optional "server =&gt; $server" argument to return the "proxycommand" setting
       for the given $server as optionally set in group files.

       Default is "undef".

   <b>set_timeout</b>
   <b>get_timeout</b>
       Sets and gets the value of the $timeout configuration variable.

       This  controls  how  many  seconds  Rex  should  wait  for  connections  to  succeed  when  using  SSH or
       Rex::Commands::Rsync.

       "get_timeout" accepts an optional "server =&gt; $server" argument to return the "connecttimeout" setting for
       the given $server as optionally set in group files.

       Default is "undef".

   <b>set_password_auth</b>
   <b>get_password_auth</b>
       Sets and gets the value of the $password_auth configuration variable, which can also be  set  by  setting
       the "REX_AUTH_TYPE" environment variable to "pass".

       This controls whether Rex should use the password authentication method.

       Default is "undef".

   <b>set_key_auth</b>
   <b>get_key_auth</b>
       Sets  and  gets  the  value of the $key_auth configuration variable, which can also be set by setting the
       "REX_AUTH_TYPE" environment variable to "key".

       This controls whether Rex should use the key authentication method.

       Default is "undef".

   <b>set_krb5_auth</b>
   <b>get_krb5_auth</b>
       Sets and gets the value of the $krb5_auth configuration variable, which can also be set  by  setting  the
       "REX_AUTH_TYPE" environment variable to "krb5".

       This controls whether Rex should use the Kerberos 5 authentication method.

       Default is "undef".

   <b>set_public_key</b>
   <b>get_public_key</b>
       Sets and gets the value of the $public_key configuration variable.

       This controls which public key Rex should use when using Net::SSH2 for connections.

       Default is "undef".

   <b>set_private_key</b>
   <b>get_private_key</b>
       Sets and gets the value of the $private_key configuration variable.

       This  controls  which  private  key  Rex should use with Rex::Commands::Rsync or when using Net::SSH2 for
       connections.

       Default is "undef".

   <b>set_parallelism</b>
   <b>get_parallelism</b>
       Sets and gets the value of the $parallelism configuration variable.

       This controls how many hosts Rex should connect to in parallel.

       Default is 1.

   <b>set_log_filename</b>
   <b>get_log_filename</b>
       Sets and gets the value of the $log_filename configuration variable.

       This controls which file Rex should use for logging.

       Default is "undef".

   <b>set_log_facility</b>
   <b>get_log_facility</b>
       Sets and gets the value of the $log_facility configuration variable.

       This controls which log facility Rex should use when logging to syslog.

       Default is 'local0'.

   <b>set_environment</b>
   <b>get_environment</b>
       Sets and gets the value of the $environment configuration variable.

       This controls which environment Rex should use.

       Default is ''.

   <b>set_distributor</b>
   <b>get_distributor</b>
       Sets and gets the value of the $distributor configuration variable.

       This controls which method Rex should use for distributing tasks for parallel execution.

       Default is 'Base'.

   <b>set_template_function</b>
   <b>get_template_function</b>
       Sets and gets the value of the $template_function configuration variable.

       This controls the function to be used for rendering templates. The value should be a subroutine reference
       that will be called with passing two  scalar  references  as  positional  arguments:  first  is  template
       content, second is template variables.

       Default is determined by the following logic:

       •   if Rex::Template::NG is loadable and use_template_ng is true, use that

       •   fall back to Rex::Template otherwise

   <b>set_no_tty</b>
   <b>get_no_tty</b>
       Sets and gets the value of the $no_tty configuration variable.

       This controls whether Rex should request a terminal when using Net::SSH2 or allocate a pseudo-tty for the
       remote process when using Net::OpenSSH.

       Default is "undef".

   <b>set_allow_empty_groups</b>
   <b>get_allow_empty_groups</b>
       Sets and gets the value of the $allow_empty_groups configuration variable.

       This controls whether Rex should allow empty groups of hosts or not.

       Default is 0.

   <b>set_use_server_auth</b>
   <b>get_use_server_auth</b>
       Sets and gets the value of the $use_server_auth configuration variable.

       This controls whether Rex should use server-specific authentication information from group files.

       Default is 0.

   <b>set_waitpid_blocking_sleep_time</b>
   <b>get_waitpid_blocking_sleep_time</b>
       Sets and gets the value of the $waitpid_blocking_sleep_time configuration variable.

       This controls how many seconds Rex should sleep between checking forks.

       Default is 0.1.

   <b>set_write_utf8_files</b>
   <b>get_write_utf8_files</b>
       Sets and gets the value of the $write_utf8_files configuration variable.

       This controls whether Rex should force "UTF-8" encoding when writing files.

       Default is "undef".

   <b>set_default_auth</b>
   <b>get_default_auth</b>
       Sets and gets the value of the $default_auth configuration variable.

       This controls whether Rex should attach default authentication info to tasks.

       Default is 1.

   <b>set_augeas_commands_prepend</b>
   <b>get_augeas_commands_prepend</b>
       Sets and gets the value of the $augeas_commands_prepend configuration variable.

       This  controls  the  list  of commands Rex should prepend at the beginning of the command file for Augeas
       operations.

       Default is "[]".

   <b>set_local_augeas_backend</b>
   <b>get_local_augeas_backend</b>
       Sets and gets the value of the $local_augeas_backend configuration variable.

       This controls which Augeas backend to use for local operations, "augtool" or "Config::Augeas".

       Default is "Config::Augeas".

   <b>register_set_handler($handler_name,</b> <b>$code)</b>
       Register a handler that gets called by <u>set</u>.

        Rex::Config-&gt;register_set_handler("foo", sub {
          my ($value) = @_;
          print "The user set foo -&gt; $value\n";
        });

       And now you can use this handler in your <u>Rexfile</u> like this:

        set foo =&gt; "bar";

   <b>register_config_handler($topic,</b> <b>$code)</b>
       With  this  function  it  is  possible  to   register   own   sections   in   the   users   config   file
       ("$HOME/.rex/config.yml").

       Example:

        Rex::Config-&gt;register_config_handler("foo", sub {
         my ($param) = @_;
         print "bar is: " . $param-&gt;{bar} . "\n";
        });

       And now the user can set this in his configuration file:

        base:
          user: theuser
          password: thepassw0rd
        foo:
          bar: baz

perl v5.40.0                                       2025-02-06                                   <u>Rex::<a href="../man3pm/Config.3pm.html">Config</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>