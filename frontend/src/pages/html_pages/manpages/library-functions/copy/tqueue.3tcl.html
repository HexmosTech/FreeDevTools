<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>transfer::copy::queue - Queued transfers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       transfer::copy::queue - Queued transfers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>snit</b> <b>?1.0?</b>

       package require <b>struct::queue</b> <b>?1.4?</b>

       package require <b>transfer::copy</b> <b>?0.3?</b>

       package require <b>transfer::copy::queue</b> <b>?0.2?</b>

       <b>transfer::copy::queue</b> <u>objectName</u> <u>outchannel</u> ?<u>options</u>...?

       <u>objectName</u> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <u>objectName</u> <b>destroy</b>

       <u>objectName</u> <b>busy</b>

       <u>objectName</u> <b>pending</b>

       <u>objectName</u> <b>put</b> <u>request</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides objects which serialize transfer requests for a single channel by means of a fifo
       queue. Accumulated requests are executed in order of entrance, with the first request  reaching  an  idle
       object  starting  the  execution in general. New requests can be added while the object is active and are
       defered until all requests entered before them have been completed successfully.

       When a request causes a transfer error execution stops and all requests coming after it are  not  served.
       Currently this means that their completion callbacks are never triggered at all.

       <u>NOTE</u>:  Not  triggering  the  completion callbacks of the unserved requests after an error stops the queue
       object is something I am not fully sure that it makes sense. It forces the user of the queue to  remember
       the callbacks as well and run them. Because otherwise everything in the system which depends on getting a
       notification about the status of a request will hang in the air. I am slowly convincing myself that it is
       more  sensible  to trigger the relevant completion callbacks with an error message about the queue abort,
       and 0 bytes transfered.

       All transfer requests are of the form

                {type data options...}

       where <u>type</u> is in {<b>chan</b>, <b>string</b>}, and <u>data</u> specifies the information to transfer.  For <b>chan</b>  the  data  is
       the handle of the channel containing the actual information to transfer, whereas for <b>string</b> <u>data</u> contains
       directly  the information to transfer.  The <u>options</u> are a list of them and their values, and are the same
       as are accepted by the low-level copy operations of the package <b>transfer::copy</b>.  Note how just prepending
       the request with <b>transfer::copy::do</b> and inserting a channel handle in between  <u>data</u>  and  <u>options</u>  easily
       transforms it from a pure data structure into a command whose evaluation will perform the request.

</pre><h4><b>API</b></h4><pre>
   <b>PACKAGE</b> <b>COMMANDS</b>
       <b>transfer::copy::queue</b> <u>objectName</u> <u>outchannel</u> ?<u>options</u>...?
              This  command  creates  a  new  queue object for the management of the channel <u>outchannel</u>, with an
              associated Tcl command whose name is <u>objectName</u>.  This <u>object</u> command is explained in full  detail
              in  the  sections  <b>Object</b> <b>command</b> and <b>Object</b> <b>methods</b>. The set of supported <u>options</u> is explained in
              section <b>Options</b>.

              The object command will be created under the current namespace if  the  <u>objectName</u>  is  not  fully
              qualified,  and  in  the  specified  namespace  otherwise.  The fully qualified name of the object
              command is returned as the result of the command.

   <b>OBJECT</b> <b>COMMAND</b>
       All objects created by the <b>::transfer::copy::queue</b> command have the following general form:

       <u>objectName</u> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?
              The method <b>method</b> and its <u>arg</u>'uments determine the exact behavior of  the  command.   See  section
              <b>Object</b> <b>methods</b> for the detailed specifications.

   <b>OBJECT</b> <b>METHODS</b>
       <u>objectName</u> <b>destroy</b>
              This  method  destroys  the  object. Doing so while the object is busy will cause errors later on,
              when the currently executed request completes and tries to access the now missing data  structures
              of the destroyed object.

       <u>objectName</u> <b>busy</b>
              This  method returns a boolean value telling us if the object is currently serving a request (i.e.
              <u>busy</u>, value <b>True</b>), or not (i.e. <u>idle</u>, value <b>False</b>).

       <u>objectName</u> <b>pending</b>
              This method returns the number of requests currently waiting in the queue for their  execution.  A
              request currently served is not counted as waiting.

       <u>objectName</u> <b>put</b> <u>request</u>
              This  method  enters  the  transfer  <u>request</u>  into the object's queue of waiting requests.  If the
              object is <u>idle</u> it will become <u>busy</u>, immediately servicing the request. Otherwise servicing the new
              request will be defered until all preceding requests have been served.

</pre><h4><b>OPTIONS</b></h4><pre>
       The only option known is <b>-on-status-change</b>. It is optional and defaults to the empty list, disabling  the
       reporting  of  status  changes.  Otherwise its argument is a command prefix which is invoked whenever the
       internal status of the object changed. The callback is invoked with two additional arguments, the  result
       of  the  methods  <b>pending</b> and <b>busy</b>, in this order. This allows any user to easily know, for example, when
       the object has processed all outstanding requests.

</pre><h4><b>USE</b></h4><pre>
       A possible application of this package and class is within  a  HTTP  1.1  server,  managing  the  results
       waiting for transfer to the client.

       It  should  be  noted  that  in this application the system also needs an additional data structure which
       keeps track of outstanding results as they may come back in a different order than the requests from  the
       client, and releases them to the actual queue in the proper order.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category  <u>transfer</u>  of  the  <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       channel, copy, queue, transfer

</pre><h4><b>CATEGORY</b></h4><pre>
       Transfer module

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2006 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 0.2                           <u>transfer::copy::<a href="../man3tcl/queue.3tcl.html">queue</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>