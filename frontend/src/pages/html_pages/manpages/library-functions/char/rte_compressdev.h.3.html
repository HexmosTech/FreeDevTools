<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_compressdev.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_compressdev.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include 'rte_comp.h'

   <b>Data</b> <b>Structures</b>
       struct <b>rte_param_log2_range</b>
       struct <b>rte_compressdev_capabilities</b>
       struct <b>rte_compressdev_info</b>
       struct <b>rte_compressdev_stats</b>
       struct <b>rte_compressdev_config</b>

   <b>Macros</b>
       #define <b>RTE_COMP_END_OF_CAPABILITIES_LIST</b>()       { RTE_COMP_ALGO_UNSPECIFIED }
       #define <b>RTE_COMPDEV_FF_HW_ACCELERATED</b>   (1ULL &lt;&lt; 0)
       #define <b>RTE_COMPDEV_FF_CPU_SSE</b>   (1ULL &lt;&lt; 1)
       #define <b>RTE_COMPDEV_FF_CPU_AVX</b>   (1ULL &lt;&lt; 2)
       #define <b>RTE_COMPDEV_FF_CPU_AVX2</b>   (1ULL &lt;&lt; 3)
       #define <b>RTE_COMPDEV_FF_CPU_AVX512</b>   (1ULL &lt;&lt; 4)
       #define <b>RTE_COMPDEV_FF_CPU_NEON</b>   (1ULL &lt;&lt; 5)
       #define <b>RTE_COMPDEV_FF_OP_DONE_IN_DEQUEUE</b>   (1ULL &lt;&lt; 6)

   <b>Functions</b>
       const char * <b>rte_compressdev_get_feature_name</b> (uint64_t flag)
       int <b>rte_compressdev_get_dev_id</b> (const char *name)
       const char * <b>rte_compressdev_name_get</b> (uint8_t dev_id)
       uint8_t <b>rte_compressdev_count</b> (void)
       uint8_t <b>rte_compressdev_devices_get</b> (const char *driver_name, uint8_t *devices, uint8_t nb_devices)
       int <b>rte_compressdev_configure</b> (uint8_t dev_id, struct <b>rte_compressdev_config</b> *config)
       int <b>rte_compressdev_start</b> (uint8_t dev_id)
       void <b>rte_compressdev_stop</b> (uint8_t dev_id)
       int <b>rte_compressdev_close</b> (uint8_t dev_id)
       int <b>rte_compressdev_queue_pair_setup</b> (uint8_t dev_id, uint16_t queue_pair_id, uint32_t max_inflight_ops,
           int socket_id)
       uint16_t <b>rte_compressdev_queue_pair_count</b> (uint8_t dev_id)
       int <b>rte_compressdev_stats_get</b> (uint8_t dev_id, struct <b>rte_compressdev_stats</b> *stats)
       void <b>rte_compressdev_stats_reset</b> (uint8_t dev_id)
       void <b>rte_compressdev_info_get</b> (uint8_t dev_id, struct <b>rte_compressdev_info</b> *dev_info)
       uint16_t <b>rte_compressdev_dequeue_burst</b> (uint8_t dev_id, uint16_t qp_id, struct <b>rte_comp_op</b> **ops,
           uint16_t nb_ops)
       uint16_t <b>rte_compressdev_enqueue_burst</b> (uint8_t dev_id, uint16_t qp_id, struct <b>rte_comp_op</b> **ops,
           uint16_t nb_ops)
       int <b>rte_compressdev_stream_create</b> (uint8_t dev_id, const struct <b>rte_comp_xform</b> *xform, void **stream)
       int <b>rte_compressdev_stream_free</b> (uint8_t dev_id, void *stream)
       int <b>rte_compressdev_private_xform_create</b> (uint8_t dev_id, const struct <b>rte_comp_xform</b> *xform, void
           **private_xform)
       int <b>rte_compressdev_private_xform_free</b> (uint8_t dev_id, void *private_xform)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE Compression Device APIs.

       Defines comp device APIs for the provisioning of compression operations.

       Definition in file <b>rte_compressdev.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_COMP_END_OF_CAPABILITIES_LIST()</b>       <b>{</b> <b>RTE_COMP_ALGO_UNSPECIFIED</b> <b>}</b>
       Macro used at end of comp PMD list

       Definition at line <b>48</b> of file <b>rte_compressdev.h</b>.

   <b>#define</b> <b>RTE_COMPDEV_FF_HW_ACCELERATED</b>   <b>(1ULL</b> <b>&lt;&lt;</b> <b>0)</b>
       compression device supported feature flags

       <b>Note</b>
           New features flags should be added to the end of the list

       Keep these flags synchronised with <b>rte_compressdev_get_feature_name()</b> Operations are off-loaded to an
       external hardware accelerator

       Definition at line <b>63</b> of file <b>rte_compressdev.h</b>.

   <b>#define</b> <b>RTE_COMPDEV_FF_CPU_SSE</b>   <b>(1ULL</b> <b>&lt;&lt;</b> <b>1)</b>
       Utilises CPU SIMD SSE instructions

       Definition at line <b>65</b> of file <b>rte_compressdev.h</b>.

   <b>#define</b> <b>RTE_COMPDEV_FF_CPU_AVX</b>   <b>(1ULL</b> <b>&lt;&lt;</b> <b>2)</b>
       Utilises CPU SIMD AVX instructions

       Definition at line <b>67</b> of file <b>rte_compressdev.h</b>.

   <b>#define</b> <b>RTE_COMPDEV_FF_CPU_AVX2</b>   <b>(1ULL</b> <b>&lt;&lt;</b> <b>3)</b>
       Utilises CPU SIMD AVX2 instructions

       Definition at line <b>69</b> of file <b>rte_compressdev.h</b>.

   <b>#define</b> <b>RTE_COMPDEV_FF_CPU_AVX512</b>   <b>(1ULL</b> <b>&lt;&lt;</b> <b>4)</b>
       Utilises CPU SIMD AVX512 instructions

       Definition at line <b>71</b> of file <b>rte_compressdev.h</b>.

   <b>#define</b> <b>RTE_COMPDEV_FF_CPU_NEON</b>   <b>(1ULL</b> <b>&lt;&lt;</b> <b>5)</b>
       Utilises CPU NEON instructions

       Definition at line <b>73</b> of file <b>rte_compressdev.h</b>.

   <b>#define</b> <b>RTE_COMPDEV_FF_OP_DONE_IN_DEQUEUE</b>   <b>(1ULL</b> <b>&lt;&lt;</b> <b>6)</b>
       A PMD should set this if the bulk of the processing is done during the dequeue. It should leave it
       cleared if the processing is done during the enqueue (default). Applications can use this as a hint for
       tuning.

       Definition at line <b>79</b> of file <b>rte_compressdev.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>const</b> <b>char</b> <b>*</b> <b>rte_compressdev_get_feature_name</b> <b>(uint64_t</b> <b>flag)</b>
       Get the name of a compress device feature flag.

       <b>Parameters</b>
           <u>flag</u> The mask describing the flag

       <b>Returns</b>
           The name of this flag, or NULL if it's not a valid feature flag.

   <b>int</b> <b>rte_compressdev_get_dev_id</b> <b>(const</b> <b>char</b> <b>*</b> <b>name)</b>
       Get the device identifier for the named compress device.

       <b>Parameters</b>
           <u>name</u> Device name to select the device structure

       <b>Returns</b>

           • Returns compress device identifier on success.

           • Return -1 on failure to find named compress device.

   <b>const</b> <b>char</b> <b>*</b> <b>rte_compressdev_name_get</b> <b>(uint8_t</b> <b>dev_id)</b>
       Get the compress device name given a device identifier.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier

       <b>Returns</b>

           • Returns compress device name.

           • Returns NULL if compress device is not present.

   <b>uint8_t</b> <b>rte_compressdev_count</b> <b>(void)</b>
       Get the total number of compress devices that have been successfully initialised.

       <b>Returns</b>

           • The total number of usable compress devices.

   <b>uint8_t</b> <b>rte_compressdev_devices_get</b> <b>(const</b> <b>char</b> <b>*</b> <b>driver_name,</b> <b>uint8_t</b> <b>*</b> <b>devices,</b> <b>uint8_t</b> <b>nb_devices)</b>
       Get number and identifiers of attached comp devices that use the same compress driver.

       <b>Parameters</b>
           <u>driver_name</u> Driver name
           <u>devices</u> Output devices identifiers
           <u>nb_devices</u> Maximal number of devices

       <b>Returns</b>
           Returns number of attached compress devices.

   <b>int</b> <b>rte_compressdev_configure</b> <b>(uint8_t</b> <b>dev_id,</b> <b>struct</b> <b>rte_compressdev_config</b> <b>*</b> <b>config)</b>
       Configure a device.

       This  function  must be invoked first before any other function in the API. This function can also be re-
       invoked when a device is in the stopped state.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>config</u> The compress device configuration

       <b>Returns</b>

           • 0: Success, device configured.

           • &lt;0: Error code returned by the driver configuration function.

   <b>int</b> <b>rte_compressdev_start</b> <b>(uint8_t</b> <b>dev_id)</b>
       Start a device.

       The device start step is called after configuring the device and setting up its queue pairs. On  success,
       data-path functions exported by the API (enqueue/dequeue, etc) can be invoked.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier

       <b>Returns</b>

           • 0: Success, device started.

           • &lt;0: Error code of the driver device start function.

   <b>void</b> <b>rte_compressdev_stop</b> <b>(uint8_t</b> <b>dev_id)</b>
       Stop a device. The device can be restarted with a call to <b>rte_compressdev_start()</b>

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier

   <b>int</b> <b>rte_compressdev_close</b> <b>(uint8_t</b> <b>dev_id)</b>
       Close  an device. The memory allocated in the device gets freed. After calling this function, in order to
       use the device again, it is required to configure the device again.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier

       <b>Returns</b>

           • 0 on successfully closing device

           • &lt;0 on failure to close device

   <b>int</b> <b>rte_compressdev_queue_pair_setup</b> <b>(uint8_t</b> <b>dev_id,</b> <b>uint16_t</b> <b>queue_pair_id,</b> <b>uint32_t</b> <b>max_inflight_ops,</b>  <b>int</b>
       <b>socket_id)</b>
       Allocate  and  set  up  a  receive queue pair for a device. This should only be called when the device is
       stopped.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>queue_pair_id</u> The index of the  queue  pairs  to  set  up.  The  value  must  be  in  the  range  [0,
           nb_queue_pair - 1] previously supplied to <b>rte_compressdev_configure()</b>
           <u>max_inflight_ops</u> Max number of ops which the qp will have to accommodate simultaneously
           <u>socket_id</u>  The  <u>socket_id</u>  argument  is  the  socket  identifier  in  case  of NUMA. The value can be
           <u>SOCKET_ID_ANY</u> if there is no NUMA constraint for the DMA memory allocated for the receive queue pair

       <b>Returns</b>

           • 0: Success, queue pair correctly set up.

           • &lt;0: Queue pair configuration failed

   <b>uint16_t</b> <b>rte_compressdev_queue_pair_count</b> <b>(uint8_t</b> <b>dev_id)</b>
       Get the number of queue pairs on a specific comp device

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier

       <b>Returns</b>

           • The number of configured queue pairs.

   <b>int</b> <b>rte_compressdev_stats_get</b> <b>(uint8_t</b> <b>dev_id,</b> <b>struct</b> <b>rte_compressdev_stats</b> <b>*</b> <b>stats)</b>
       Retrieve the general I/O statistics of a device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device
           <u>stats</u> A pointer to a structure of type <b>rte_compressdev_stats</b> <b>to</b> <b>be</b> <b>filled</b> <b>with</b> <b>the</b> <b>values</b>  <b>of</b>  <b>device</b>
           <b>counters</b>

       <b>Returns</b>

           • Zero if successful.

           • Non-zero otherwise.

   <b>void</b> <b>rte_compressdev_stats_reset</b> <b>(uint8_t</b> <b>dev_id)</b>
       Reset the general I/O statistics of a device.

       <b>Parameters</b>
           <u>dev_id</u> The identifier of the device.

   <b>void</b> <b>rte_compressdev_info_get</b> <b>(uint8_t</b> <b>dev_id,</b> <b>struct</b> <b>rte_compressdev_info</b> <b>*</b> <b>dev_info)</b>
       Retrieve the contextual information of a device.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>dev_info</u>  A  pointer  to  a  structure  of type <b>rte_compressdev_info</b> <b>to</b> <b>be</b> <b>filled</b> <b>with</b> <b>the</b> <b>contextual</b>
           <b>information</b> <b>of</b> <b>the</b> <b>device</b>

       <b>Note</b>
           The capabilities field of dev_info is set to point to  the  first  element  of  an  array  of  struct
           <b>rte_compressdev_capabilities</b>.  The  element  after  the  last  valid element has it's op field set to
           RTE_COMP_ALGO_UNSPECIFIED.

   <b>uint16_t</b> <b>rte_compressdev_dequeue_burst</b> <b>(uint8_t</b> <b>dev_id,</b> <b>uint16_t</b> <b>qp_id,</b> <b>struct</b> <b>rte_comp_op</b> <b>**</b>  <b>ops,</b>  <b>uint16_t</b>
       <b>nb_ops)</b>
       Dequeue  a  burst  of  processed  compression  operations  from  a queue on the comp device. The dequeued
       operation are stored in <b>rte_comp_op</b> <b>structures</b> <b>whose</b> <b>pointers</b> <b>are</b> <b>supplied</b> <b>in</b> <b>the</b> <u>ops</u> <b>array.</b>

       The <b>rte_compressdev_dequeue_burst()</b> function returns the number of ops actually dequeued,  which  is  the
       number of <b>rte_comp_op</b> <b>data</b> <b>structures</b> <b>effectively</b> <b>supplied</b> <b>into</b> <b>the</b> <u>ops</u> <b>array.</b>

       A return value equal to <u>nb_ops</u> indicates that the queue contained at least <u>nb_ops</u> operations, and this is
       likely  to  signify  that  other  processed  operations  remain in the devices output queue. Applications
       implementing a 'retrieve as many processed operations as possible' policy can check  this  specific  case
       and  keep  invoking  the  <b>rte_compressdev_dequeue_burst()</b>  function  until  a  value  less than <u>nb_ops</u> is
       returned.

       The <b>rte_compressdev_dequeue_burst()</b> function does  not  provide  any  error  notification  to  avoid  the
       corresponding overhead.

       <b>Note</b>
           : operation ordering is not maintained within the queue pair.

           :  In case op status = OUT_OF_SPACE_TERMINATED, op.consumed=0 and the op must be resubmitted with the
           same input data and a larger output buffer. op.produced is usually 0, but in  decompression  cases  a
           PMD  may  return &gt; 0 and the application may find it useful to inspect that data. This status is only
           returned on STATELESS ops.

           : In case op status = OUT_OF_SPACE_RECOVERABLE, op.produced can be used and next op in stream  should
           continue  on  from op.consumed+1 with a fresh output buffer. Consumed=0, produced=0 is an unusual but
           allowed case. There may be useful state/history stored in the PMD, even though no output was produced
           yet.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>qp_id</u> The index of the queue pair from which to retrieve processed operations. The value must  be  in
           the range [0, nb_queue_pair - 1] previously supplied to <b>rte_compressdev_configure()</b>
           <u>ops</u>  The address of an array of pointers to <b>rte_comp_op</b> <b>structures</b> <b>that</b> <b>must</b> <b>be</b> <b>large</b> <b>enough</b> <b>to</b> <b>store</b>
           <u>nb_ops</u> <b>pointers</b> <b>in</b> <b>it</b>
           <u>nb_ops</u> <b>The</b> <b>maximum</b> <b>number</b> <b>of</b> <b>operations</b> <b>to</b> <b>dequeue</b>

       <b>Returns</b>

           • The number of operations actually  dequeued,  which  is  the  number  of  pointers  to  <b>rte_comp_op</b>
             <b>structures</b> <b>effectively</b> <b>supplied</b> <b>to</b> <b>the</b> <u>ops</u> <b>array.</b>

   <b>uint16_t</b>  <b>rte_compressdev_enqueue_burst</b>  <b>(uint8_t</b> <b>dev_id,</b> <b>uint16_t</b> <b>qp_id,</b> <b>struct</b> <b>rte_comp_op</b> <b>**</b> <b>ops,</b> <b>uint16_t</b>
       <b>nb_ops)</b>
       Enqueue a burst of operations for processing on a compression device.

       The <b>rte_compressdev_enqueue_burst()</b> function is invoked to place comp operations on the  queue  <u>qp_id</u>  of
       the device designated by its <u>dev_id</u>.

       The  <u>nb_ops</u>  parameter  is  the  number  of  operations to process which are supplied in the <u>ops</u> array of
       <b>rte_comp_op</b> <b>structures.</b>

       The <b>rte_compressdev_enqueue_burst()</b> function returns the number of operations it  actually  enqueued  for
       processing. A return value equal to <u>nb_ops</u> means that all packets have been enqueued.

       <b>Note</b>
           All  compression  operations  are  Out-of-place  (OOP)  operations, as the size of the output data is
           different to the size of the input data.

           The <b>rte_comp_op</b> contains both input and output parameters and is the vehicle for the  application  to
           pass  data  into  and  out  of  the PMD. While an op is inflight, i.e. once it has been enqueued, the
           private_xform or stream attached to it and any mbufs or memory referenced by it should not be altered
           or freed by the application. The PMD may use or change some of this data at any  time  until  it  has
           been returned in a dequeue operation.

           The  flush  flag  only  applies  to  operations  which  return SUCCESS. In OUT_OF_SPACE cases whether
           STATEFUL or STATELESS, data in dest buffer is as if flush flag was FLUSH_NONE.

           flush flag only applies in compression direction. It has no meaning for decompression.

           : operation ordering is not maintained within the queue pair.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>qp_id</u> The index of the queue pair on which operations are to be enqueued for  processing.  The  value
           must be in the range [0, nb_queue_pairs - 1] previously supplied to <u>rte_compressdev_configure</u>
           <u>ops</u> The address of an array of <u>nb_ops</u> pointers to <b>rte_comp_op</b> <b>structures</b> <b>which</b> <b>contain</b> <b>the</b> <b>operations</b>
           <b>to</b> <b>be</b> <b>processed</b>
           <u>nb_ops</u> <b>The</b> <b>number</b> <b>of</b> <b>operations</b> <b>to</b> <b>process</b>

       <b>Returns</b>
           The number of operations actually enqueued on the device. The return value can be less than the value
           of the <u>nb_ops</u> parameter when the comp devices queue is full or if invalid parameters are specified in
           a <b>rte_comp_op.</b>

   <b>int</b> <b>rte_compressdev_stream_create</b> <b>(uint8_t</b> <b>dev_id,</b> <b>const</b> <b>struct</b> <b>rte_comp_xform</b> <b>*</b> <b>xform,</b> <b>void</b> <b>**</b> <b>stream)</b>
       This  should alloc a stream from the device's mempool and initialise it. The application should call this
       API when setting up for the stateful processing of a set of data on a  device.  The  API  can  be  called
       multiple  times  to  set  up  a stream for each data set. The handle returned is only for use with ops of
       op_type STATEFUL and must be passed to the PMD with every op in the data stream

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>xform</u> xform data
           <u>stream</u> Pointer to where PMD's private stream handle should be stored

       <b>Returns</b>

           • 0 if successful and valid stream handle

           • &lt;0 in error cases

           • Returns -EINVAL if input parameters are invalid.

           • Returns -ENOTSUP if comp device does not support STATEFUL operations.

           • Returns -ENOTSUP if comp device does not support the comp transform.

           • Returns -ENOMEM if the private stream could not be allocated.

   <b>int</b> <b>rte_compressdev_stream_free</b> <b>(uint8_t</b> <b>dev_id,</b> <b>void</b> <b>*</b> <b>stream)</b>
       This should clear the stream and return it to the device's mempool.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>stream</u> PMD's private stream data

       <b>Returns</b>

           • 0 if successful

           • &lt;0 in error cases

           • Returns -EINVAL if input parameters are invalid.

           • Returns -ENOTSUP if comp device does not support STATEFUL operations.

           • Returns -EBUSY if can't free stream as there are inflight operations

   <b>int</b> <b>rte_compressdev_private_xform_create</b> <b>(uint8_t</b> <b>dev_id,</b>  <b>const</b>  <b>struct</b>  <b>rte_comp_xform</b>  <b>*</b>  <b>xform,</b>  <b>void</b>  <b>**</b>
       <b>private_xform)</b>
       This  should  alloc  a  private_xform from the device's mempool and initialise it. The application should
       call this API when setting up for stateless processing on a device. If it returns non-shareable, then the
       appl cannot share this handle with multiple in-flight ops and  should  call  this  API  again  to  get  a
       separate  handle  for  every  in-flight op. The handle returned is only valid for use with ops of op_type
       STATELESS.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>xform</u> xform data
           <u>private_xform</u> Pointer to where PMD's private_xform handle should be stored

       <b>Returns</b>

           • if successful returns 0 and valid private_xform handle

           • &lt;0 in error cases

           • Returns -EINVAL if input parameters are invalid.

           • Returns -ENOTSUP if comp device does not support the comp transform.

           • Returns -ENOMEM if the private_xform could not be allocated.

   <b>int</b> <b>rte_compressdev_private_xform_free</b> <b>(uint8_t</b> <b>dev_id,</b> <b>void</b> <b>*</b> <b>private_xform)</b>
       This should clear the private_xform and return it to  the  device's  mempool.  It  is  the  application's
       responsibility  to  ensure  that  private_xform  data  is  not  cleared  while  there are still in-flight
       operations using it.

       <b>Parameters</b>
           <u>dev_id</u> Compress device identifier
           <u>private_xform</u> PMD's private_xform data

       <b>Returns</b>

           • 0 if successful

           • &lt;0 in error cases

           • Returns -EINVAL if input parameters are invalid.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                            <u><a href="../man3/rte_compressdev.h.3.html">rte_compressdev.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>