<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>i2c - I2C access</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbcm2835-dev">libbcm2835-dev_1.75+ds-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       i2c - I2C access

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Functions</b>
       int <b>bcm2835_i2c_begin</b> (void)
       void <b>bcm2835_i2c_end</b> (void)
       void <b>bcm2835_i2c_setSlaveAddress</b> (uint8_t addr)
       void <b>bcm2835_i2c_setClockDivider</b> (uint16_t divider)
       void <b>bcm2835_i2c_set_baudrate</b> (uint32_t baudrate)
       uint8_t <b>bcm2835_i2c_write</b> (const char *buf, uint32_t len)
       uint8_t <b>bcm2835_i2c_read</b> (char *buf, uint32_t len)
       uint8_t <b>bcm2835_i2c_read_register_rs</b> (char *regaddr, char *buf, uint32_t len)
       uint8_t <b>bcm2835_i2c_write_read_rs</b> (char *cmds, uint32_t cmds_len, char *buf, uint32_t buf_len)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       These functions let you use I2C (The Broadcom Serial Control bus with the Philips I2C bus/interface
       version 2.1 January 2000.) to interface with an external I2C device.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>bcm2835_i2c_begin</b> <b>(void)</b> <b>[extern]</b>
       Start I2C operations. Forces RPi I2C pins P1-03 (SDA) and P1-05 (SCL) to alternate function ALT0, which
       enables those pins for I2C interface. You should call <b>bcm2835_i2c_end()</b> when all I2C functions are
       complete to return the pins to their default functions

       <b>Returns</b>
           1 if successful, 0 otherwise (perhaps because you are not running as root)

       <b>See</b> <b>also</b>
           <b>bcm2835_i2c_end()</b>

   <b>void</b> <b>bcm2835_i2c_end</b> <b>(void)</b> <b>[extern]</b>
       End I2C operations. I2C pins P1-03 (SDA) and P1-05 (SCL) are returned to their default INPUT behaviour.

   <b>uint8_t</b> <b>bcm2835_i2c_read</b> <b>(char</b> <b>*</b> <b>buf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Transfers any number of bytes from the currently selected I2C slave. (as previously set by

       <b>See</b> <b>also</b>
           <b>bcm2835_i2c_setSlaveAddress</b>)

       <b>Parameters</b>
           <u>buf</u> Buffer of bytes to receive.
           <u>len</u> Number of bytes in the buf buffer, and the number of bytes to received.

       <b>Returns</b>
           reason see <b>bcm2835I2CReasonCodes</b>

   <b>uint8_t</b> <b>bcm2835_i2c_read_register_rs</b> <b>(char</b> <b>*</b> <b>regaddr,</b> <b>char</b> <b>*</b> <b>buf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Allows reading from I2C slaves that require a repeated start (without any prior stop) to read after the
       required slave register has been set. For example, the popular MPL3115A2 pressure and temperature sensor.
       Note that your device must support or require this mode. If your device does not require this mode then
       the standard combined:

       <b>See</b> <b>also</b>
           <b>bcm2835_i2c_write</b>

           <b>bcm2835_i2c_read</b> are a better choice. Will read from the slave previously set by

           <b>bcm2835_i2c_setSlaveAddress</b>

       <b>Parameters</b>
           <u>regaddr</u> Buffer containing the slave register you wish to read from.
           <u>buf</u> Buffer of bytes to receive.
           <u>len</u> Number of bytes in the buf buffer, and the number of bytes to received.

       <b>Returns</b>
           reason see <b>bcm2835I2CReasonCodes</b>

   <b>void</b> <b>bcm2835_i2c_set_baudrate</b> <b>(uint32_t</b> <b>baudrate)</b> <b>[extern]</b>
       Sets the I2C clock divider by converting the baudrate parameter to the equivalent I2C clock divider. (
       see

       <b>See</b> <b>also</b>
           <b>bcm2835_i2c_setClockDivider</b>) For the I2C standard 100khz you would set baudrate to 100000 The use of
           baudrate corresponds to its use in the I2C kernel device driver. (Of course, bcm2835 has nothing to
           do with the kernel driver)

   <b>void</b> <b>bcm2835_i2c_setClockDivider</b> <b>(uint16_t</b> <b>divider)</b> <b>[extern]</b>
       Sets the I2C clock divider and therefore the I2C clock speed.

       <b>Parameters</b>
           <u>divider</u> The desired I2C clock divider, one of BCM2835_I2C_CLOCK_DIVIDER_*, see <b>bcm2835I2CClockDivider</b>

   <b>void</b> <b>bcm2835_i2c_setSlaveAddress</b> <b>(uint8_t</b> <b>addr)</b> <b>[extern]</b>
       Sets the I2C slave address.

       <b>Parameters</b>
           <u>addr</u> The I2C slave address.

   <b>uint8_t</b> <b>bcm2835_i2c_write</b> <b>(const</b> <b>char</b> <b>*</b> <b>buf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Transfers any number of bytes to the currently selected I2C slave. (as previously set by

       <b>See</b> <b>also</b>
           <b>bcm2835_i2c_setSlaveAddress</b>)

       <b>Parameters</b>
           <u>buf</u> Buffer of bytes to send.
           <u>len</u> Number of bytes in the buf buffer, and the number of bytes to send.

       <b>Returns</b>
           reason see <b>bcm2835I2CReasonCodes</b>

   <b>uint8_t</b> <b>bcm2835_i2c_write_read_rs</b> <b>(char</b> <b>*</b> <b>cmds,</b> <b>uint32_t</b> <b>cmds_len,</b> <b>char</b> <b>*</b> <b>buf,</b> <b>uint32_t</b> <b>buf_len)</b> <b>[extern]</b>
       Allows sending an arbitrary number of bytes to I2C slaves before issuing a repeated start (with no prior
       stop) and reading a response. Necessary for devices that require such behavior, such as the MLX90620.
       Will write to and read from the slave previously set by

       <b>See</b> <b>also</b>
           <b>bcm2835_i2c_setSlaveAddress</b>

       <b>Parameters</b>
           <u>cmds</u> Buffer containing the bytes to send before the repeated start condition.
           <u>cmds_len</u> Number of bytes to send from cmds buffer
           <u>buf</u> Buffer of bytes to receive.
           <u>buf_len</u> Number of bytes to receive in the buf buffer.

       <b>Returns</b>
           reason see <b>bcm2835I2CReasonCodes</b>

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for bcm2835 from the source code.

bcm2835                                           Version 1.75                                            <u><a href="../man3/i2c.3.html">i2c</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>