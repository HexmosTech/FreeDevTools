<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getstr,  getnstr, wgetstr, wgetnstr, mvgetstr, mvgetnstr, mvwgetstr, mvwgetnstr - read a character string</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ncurses-doc">ncurses-doc_6.5+20250216-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>getstr</b>,  <b>getnstr</b>, <b>wgetstr</b>, <b>wgetnstr</b>, <b>mvgetstr</b>, <b>mvgetnstr</b>, <b>mvwgetstr</b>, <b>mvwgetnstr</b> - read a character string
       from <u>curses</u> terminal keyboard

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;curses.h&gt;</b>

       <b>int</b> <b>getstr(char</b> <b>*</b> <u>str</u><b>);</b>
       <b>int</b> <b>wgetstr(WINDOW</b> <b>*</b> <u>win</u><b>,</b> <b>char</b> <b>*</b> <u>str</u><b>);</b>
       <b>int</b> <b>mvgetstr(int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>,</b> <b>char</b> <b>*</b> <u>str</u><b>);</b>
       <b>int</b> <b>mvwgetstr(WINDOW</b> <b>*</b> <u>win</u><b>,</b> <b>int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>,</b> <b>char</b> <b>*</b> <u>str</u><b>);</b>

       <b>int</b> <b>getnstr(char</b> <b>*</b> <u>str</u><b>,</b> <b>int</b> <u>n</u><b>);</b>
       <b>int</b> <b>wgetnstr(WINDOW</b> <b>*</b> <u>win</u><b>,</b> <b>char</b> <b>*</b> <u>str</u><b>,</b> <b>int</b> <u>n</u><b>);</b>
       <b>int</b> <b>mvgetnstr(int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>,</b> <b>char</b> <b>*</b> <u>str</u><b>,</b> <b>int</b> <u>n</u><b>);</b>
       <b>int</b> <b>mvwgetnstr(WINDOW</b> <b>*</b> <u>win</u><b>,</b> <b>int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>,</b> <b>char</b> <b>*</b> <u>str</u><b>,</b>
             <b>int</b> <u>n</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>wgetstr</b> populates a user-supplied string buffer <u>str</u> by repeatedly calling <b><a href="../man3NCURSES/wgetch.3NCURSES.html">wgetch</a></b>(3NCURSES) with  the  <u>win</u>
       argument until a line feed or carriage return character is input.  The function

       •   does not copy the terminating character to <u>str</u>;

       •   always terminates <u>str</u> with a null character;

       •   interprets the screen's erase and kill characters (see <b><a href="../man3NCURSES/erasechar.3NCURSES.html">erasechar</a></b>(3NCURSES) and <b><a href="../man3NCURSES/killchar.3NCURSES.html">killchar</a></b>(3NCURSES));

       •   recognizes function keys only if the screen's keypad option is enabled (see <b><a href="../man3NCURSES/keypad.3NCURSES.html">keypad</a></b>(3NCURSES));

       •   treats the function keys <b>KEY_LEFT</b> and <b>KEY_BACKSPACE</b> the same as the erase character; and

       •   discards function key inputs other than those treated as the erase character, calling <b><a href="../man3NCURSES/beep.3NCURSES.html">beep</a></b>(3NCURSES).

       The erase character replaces the character at the end of the buffer with a null character, while the kill
       character does the same for the entire buffer.

       If  the  screen's echo option is enabled (see <b><a href="../man3NCURSES/echo.3NCURSES.html">echo</a></b>(3NCURSES)), <b>wgetstr</b> updates <u>win</u> with <b><a href="../man3NCURSES/waddch.3NCURSES.html">waddch</a></b>(3NCURSES).
       Further,

       •   the erase character and its function key synonyms move the cursor to the left, and

       •   the kill character returns the cursor to where it was located when <b>wgetstr</b> was called.

       <b>wgetnstr</b> is similar, but reads at most <u>n</u> characters, aiding the  application  to  avoid  overrunning  the
       buffer  to which <u>str</u> points.  An attempt to input more than <u>n</u> characters (other than the terminating line
       feed or carriage return) is ignored with a beep.  If <u>n</u> is  negative,  <b>wgetn_wstr</b>  reads  up  to  <u>LINE_MAX</u>
       characters (see <u><a href="../man3/sysconf.3.html">sysconf</a></u>(3)).

       <b><a href="../man3NCURSES/ncurses.3NCURSES.html">ncurses</a></b>(3NCURSES) describes the variants of these functions.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       These functions return <b>OK</b> on success and <b>ERR</b> on failure.

       In <u>ncurses</u>, they return <b>ERR</b> if

       •   <u>win</u> is <u>NULL</u>, or

       •   if an internal <b><a href="../man3NCURSES/wgetch.3NCURSES.html">wgetch</a></b>(3NCURSES) call fails.

       Further, in <u>ncurses</u>, these functions return <b>KEY_RESIZE</b> if a <u>SIGWINCH</u> event interrupts the function.

       Functions prefixed with “mv” first perform cursor movement and fail if the position (<u>y</u>, <u>x</u>) is outside the
       window boundaries.

</pre><h4><b>NOTES</b></h4><pre>
       All of these functions except <b>wgetnstr</b> may be implemented as macros.

       Reading  input  that  overruns  the buffer pointed to by <u>str</u> causes undefined results.  Use the <b>n</b>-infixed
       functions, and allocate sufficient storage for <u>str</u> — at least <u>n</u>+1 times <b>sizeof(char)</b>.

       While these functions conceptually implement a series of calls to <b>wgetch</b>, they  also  temporarily  change
       properties  of  the  <u>curses</u> screen to permit simple editing of the input buffer.  Each function saves the
       screen's  state,  calls  <b><a href="../man3NCURSES/nl.3NCURSES.html">nl</a></b>(3NCURSES),  and,  if  the  screen   was   in   canonical   (“cooked”)   mode,
       <b><a href="../man3NCURSES/cbreak.3NCURSES.html">cbreak</a></b>(3NCURSES).  Before returning, it restores the saved screen state.  Other implementations differ in
       detail,  affecting  which  control  characters  they  can accept in the buffer; see section “PORTABILITY”
       below.

</pre><h4><b>EXTENSIONS</b></h4><pre>
       <b>getnstr</b>, <b>wgetnstr</b>, <b>mvgetnstr</b>, and <b>mvwgetnstr</b>'s handing of negative <u>n</u> values is an <u>ncurses</u> extension.

       The return value <b>KEY_RESIZE</b> is an <u>ncurses</u> extension.

</pre><h4><b>PORTABILITY</b></h4><pre>
       Applications  employing  <u>ncurses</u>  extensions  should  condition  their  use  on  the  visibility  of  the
       <b>NCURSES_VERSION</b> preprocessor macro.

       X/Open  Curses  Issue 4  describes  these  functions.   It  specifies  no  error conditions for them, but
       indicates that <u>wgetnstr</u> and  its  variants  read  “the  entire  multi-byte  sequence  associated  with  a
       character”  and  “fail”  if  <u>n</u>  and  <u>str</u>  together  do not describe a buffer “large enough to contain any
       complete characters”.  In <u>ncurses</u>, however, <u>wgetch</u> reads only single-byte characters,  so  this  scenario
       does not arise.

       SVr4 describes a successful return value only as “an integer value other than <u>ERR</u>”.

       SVr3  and early SVr4 <u>curses</u> implementations did not reject function keys; the SVr4 documentation asserted
       that, like the screen's erase and kill characters, they were

              interpreted, as well as any special keys (such as function keys, “home” key, “clear” key, <u>etc.</u>)

       without further detail.  It lied.  The “character” value appended to the string by those  implementations
       was predictable but not useful — being, in fact, the low-order eight bits of the key code's <u>KEY</u><b>_</b> constant
       value.   (The same language, unchanged except for styling, survived into X/Open Curses Issue 4, Version 2
       but disappeared from Issue 7.)

       A draft of X/Open Curses Issue 5 (which never saw final release) stated that  these  functions  “read  at
       most <u>n</u> bytes” but did not state whether the terminating null character counted toward that limit.  X/Open
       Curses  Issue 7  changed  that  to  say  they  “read at most <u>n</u>-1 bytes” to allow for the terminating null
       character.  As of 2018, some implementations count it, some do not.

       •   <u>ncurses</u> 6.1 and <u>PDCurses</u> do not count the null character toward the limit, while Solaris  and  NetBSD
           <u>curses</u> do.

       •   Solaris  <u>xcurses</u>  offers  both behaviors: its wide-character <u>wgetn_wstr</u> reserves room for a wide null
           character, but its non-wide <u>wgetnstr</u> does not consistently count a null character toward the limit.

       X/Open Curses does not specify what happens if the length <u>n</u> is negative.

       •   <u>ncurses</u> 6.2 uses <u>LINE_MAX</u> or a larger (system-dependent) value provided by  <u><a href="../man3/sysconf.3.html">sysconf</a></u>(3).   If  neither
           <u>LINE_MAX</u>  nor  <u>sysconf</u>  is  available,  <u>ncurses</u> uses the POSIX minimum value for <u>LINE_MAX</u> (2048).  In
           either case, it reserves a byte for the terminating null character.

       •   In SVr4 <u>curses</u>, a negative <u>n</u> tells <u>wgetnstr</u> to assume that the caller's buffer  is  large  enough  to
           hold  the  result; that is, the function then acts like <u>wgetstr</u>.  X/Open Curses does not mention this
           behavior (or anything related to nonpositive <u>n</u> values), however most <u>curses</u> libraries  implement  it.
           Most  implementations  nevertheless  enforce  an  upper limit on the count of bytes they write to the
           destination buffer <u>str</u>.

       •   BSD <u>curses</u> lacked <u>wgetnstr</u>, and its <u>wgetstr</u> wrote to <u>str</u> unboundedly, as did that in SVr2.

       •   <u>PDCurses</u>, and SVr3 and later, and Solaris <u>curses</u> limit both functions to writing  256  bytes.   Other
           System V-based platforms likely use the same limit.

       •   Solaris <u>xcurses</u> limits the write to <u>LINE_MAX</u> bytes (see <u><a href="../man3/sysconf.3.html">sysconf</a></u>(3)).

       •   NetBSD 7 <u>curses</u> imposes no particular limit on the length of the write, but does validate <u>n</u> to ensure
           that it is greater than zero.  A comment in NetBSD's source code asserts that SUSv2 specifies this.

       Implementations vary in their handling of input control characters.

       •   While  they  may  enable  the screen's echo option, some do not take it out of raw mode, and may take
           cbreak mode into account when deciding whether to handle echoing within <u>wgetnstr</u> or to rely on it  as
           a side effect of calling <u>wgetch</u>.

       •   Originally,  <u>ncurses</u>,  like  its  progenitor  <u>pcurses</u>,  had its <u>wgetnstr</u> call <u>noraw</u> and <u>cbreak</u> before
           accepting input.  That may have been done to make function keys work; it is not necessary with modern
           <u>ncurses</u>.

           Since 1995, <u>ncurses</u> has provided handlers  for  <u>SIGINTR</u>  and  <u>SIGQUIT</u>  events,  which  are  typically
           generated at the keyboard with <b>^C</b> and <b>^\</b> respectively.  In cbreak mode, those handlers catch a signal
           and stop the program, whereas other implementations write those characters into the buffer.

       •   Starting  with  <u>ncurses</u>  6.3  (2021),  <u>wgetnstr</u>  preserves raw mode if the screen was already in that
           state, allowing one to enter the characters the terminal interprets as interrupt and quit events into
           the buffer, for better compatibility with SVr4 <u>curses</u>.

</pre><h4><b>HISTORY</b></h4><pre>
       4BSD (1980) introduced <u>wgetstr</u> along with its variants.

       SVr3.1 (1987) added <u>wgetnstr</u>, but none of its variants.

       X/Open Curses Issue 4 (1995) specified <u>getnstr</u>, <u>mvgetnstr</u>, and <u>mvwgetnstr</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3NCURSES/get_wstr.3NCURSES.html">get_wstr</a></b>(3NCURSES)  describes  comparable  functions  of  the  <u>ncurses</u>  library  in  its   wide-character
       configuration (<u>ncursesw</u>).

       <b><a href="../man3NCURSES/ncurses.3NCURSES.html">ncurses</a></b>(3NCURSES), <b><a href="../man3NCURSES/addch.3NCURSES.html">addch</a></b>(3NCURSES), <b><a href="../man3NCURSES/getch.3NCURSES.html">getch</a></b>(3NCURSES), <b><a href="../man3NCURSES/inopts.3NCURSES.html">inopts</a></b>(3NCURSES), <b><a href="../man3NCURSES/termattrs.3NCURSES.html">termattrs</a></b>(3NCURSES),

ncurses 6.5                                        2025-02-01                                   <u><a href="../man3NCURSES/getstr.3NCURSES.html">getstr</a></u>(3NCURSES)
</pre>
 </div>
</div></section>
</div>
</body>
</html>