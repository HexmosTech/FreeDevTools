<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ms_time - Time conversion and string generation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmseed-doc">libmseed-doc_2.19.8-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ms_time - Time conversion and string generation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libmseed.h&gt;</b>

       <b>MS_EPOCH2HPTIME(X)</b> <b>X</b> <b>*</b> <b>(hptime_t)</b> <b>HPTMODULUS</b>
       <b>MS_HPTIME2EPOCH(X)</b> <b>X</b> <b>/</b> <b>HPTMODULUS</b>

       <b>hptime_t</b> <b>ms_btime2hptime</b> <b>(</b> <b>BTime</b> <b>*</b><u>btime</u> <b>);</b>

       <b>char</b>    <b>*ms_btime2isotimestr</b> <b>(</b> <b>BTime</b> <b>*</b><u>btime</u><b>,</b> <b>char</b> <b>*</b><u>isotimestr</u> <b>);</b>

       <b>char</b>    <b>*ms_btime2mdtimestr</b> <b>(</b> <b>BTime</b> <b>*</b><u>btime</u><b>,</b> <b>char</b> <b>*</b><u>mdtimestr</u> <b>);</b>

       <b>char</b>    <b>*ms_btime2seedtimestr</b> <b>(</b> <b>BTime</b> <b>*</b><u>btime</u><b>,</b> <b>char</b> <b>*</b><u>seedtimestr</u> <b>);</b>

       <b>int</b>      <b>ms_hptime2btime</b> <b>(</b> <b>hptime_t</b> <u>hptime</u><b>,</b> <b>BTime</b> <b>*</b><u>btime</u> <b>);</b>

       <b>char</b>    <b>*ms_hptime2isotimestr</b> <b>(</b> <b>hptime_t</b> <u>hptime</u><b>,</b> <b>char</b> <b>*</b><u>isotimestr</u><b>,</b>
                                       <b>flag</b> <u>subseconds</u> <b>);</b>

       <b>char</b>    <b>*ms_hptime2mdtimestr</b> <b>(</b> <b>hptime_t</b> <u>hptime</u><b>,</b> <b>char</b> <b>*</b><u>mdtimestr</u><b>,</b>
                                      <b>flag</b> <u>subseconds</u> <b>);</b>

       <b>char</b>    <b>*ms_hptime2seedtimestr</b> <b>(</b> <b>hptime_t</b> <u>hptime</u><b>,</b> <b>char</b> <b>*</b><u>seedtimestr</u><b>,</b>
                                        <b>flag</b> <u>subseconds</u> <b>);</b>

       <b>hptime_t</b> <b>ms_time2hptime</b> <b>(</b> <b>int</b> <u>year</u><b>,</b> <b>int</b> <u>day</u><b>,</b> <b>int</b> <u>hour</u><b>,</b> <b>int</b> <u>min</u><b>,</b>
                                 <b>int</b> <u>sec</u><b>,</b> <b>int</b> <u>usec</u> <b>);</b>

       <b>hptime_t</b> <b>ms_seedtimestr2hptime</b> <b>(</b> <b>char</b> <b>*</b><u>seedtimestr</u> <b>);</b>

       <b>hptime_t</b> <b>ms_timestr2hptime</b> <b>(</b> <b>char</b> <b>*</b><u>timestr</u> <b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These routines convert between various time formats.  Internally, libmseed represents time values as high
       precision  epoch  times  (hptime),  the  number  of ticks from the epoch: 00:00:00.00 1 January 1970.  By
       default a tick is defined as a microsecond (0.000001  seconds).   See  <b>INTERNAL</b>  <b>HPTIME</b>  below  for  more
       details.   Also  used  is  the  SEED  binary time represented by the following data structure (defined in
       libmseed.h):

       typedef struct btime_s
       {
         uint16_t  year;     /* year with century                 */
         uint16_t  day;      /* day, 1 - 366                      */
         uint8_t   hour;     /* hour, 0 - 23                      */
         uint8_t   min;      /* minute, 0 - 59                    */
         uint8_t   sec;      /* second, 0 - 60 (60 = leap second) */
         uint8_t   unused;   /* unused alignment byte             */
         uint16_t  fract;    /* fractional seconds, 0 - 9999      */
       } BTime;

       <b>MS_EPOCH2HPTIME</b> is a macro which converts a Unix/POSIX epoch time (elapsed seconds since 1 January  1970)
       to a hptime which are related by a simple scaling factor.

       <b>MS_HPTIME2EPOCH</b>  is  a macro which converts an hptime to a Unix/POSIX epoch time (elapsed seconds since 1
       January 1970) which are related by a simple scaling factor.  The result can be cast  to  an  integer,  in
       which  cast  no rounding is performed and sub-second precision is truncated, or can be cast into a double
       to get a double precision epoch time.

       <b>ms_btime2hptime</b> converts a <u>btime</u> to a hptime.

       <b>ms_btime2isotimestr</b>  generates  an  ISO  recommended  format  time  string  from   a   <u>btime</u>.    Example:
       '2001-07-29T12:38:00.0000'.   The  <u>isotimestr</u>  must  have  enough  room for 25 characters.  The resulting
       string will be NULL terminated.

       <b>ms_btime2mdtimestr</b> generates a month-day formatted  time  string  from  a  <u>btime</u>.   Example:  '2001-07-29
       12:38:00.0000'.   The  <u>mdtimestr</u>  must  have enough room for 25 characters.  The resulting string will be
       NULL terminated.

       <b>ms_btime2seedtimestr</b>   generates   a   SEED   format   time    string    from    a    <u>btime</u>.     Example:
       '2001,195,12:38:00.0000'.  The <u>seedtimestr</u> must have enough room for 23 characters.  The resulting string
       will be NULL terminated.

       <b>ms_hptime2btime</b>  converts  a  <u>hptime</u>  to a <u>btime</u>.  By default, hptime has microsecond precision whereas a
       BTime structure can only represent time to 0.0001 seconds.   The  precision  will  be  lost  during  this
       conversion, it will not be accounted for by rounding but will be truncated.  This behavior is by design.

       <b>ms_hptime2isotimestr</b>   generates  an  ISO  recommended  format  time  string  from  a  <u>hptime</u>.   Example:
       '2001-07-29T12:38:00.000000' or '2001-07-29T12:38:00'.  The <u>isotimestr</u>  must  have  enough  room  for  27
       characters.   The  <u>subseconds</u>  flag  controls  whether  the sub-second precision is included or not.  The
       resulting string will be NULL terminated.

       <b>ms_hptime2mdtimestr</b> generates a month-day formatted time string  from  a  <u>hptime</u>.   Example:  '2001-07-29
       12:38:00.000000'  or '2001-07-29 12:38:00'.  The <u>isotimestr</u> must have enough room for 27 characters.  The
       <u>subseconds</u> flag controls whether the sub-second precision is included or not.  The resulting string  will
       be NULL terminated.

       <b>ms_hptime2seedtimestr</b>    generates    a    SEED   format   time   string   from   a   <u>hptime</u>.    Example:
       '2001,195,12:38:00.000000' or  '2001,195,12:38:00'.   The  <u>seedtimestr</u>  must  have  enough  room  for  25
       characters.   The  <u>subseconds</u>  flag  controls  whether  the sub-second precision is included or not.  The
       resulting string will be NULL terminated.

       <b>ms_time2hptime</b> converts the time represented by  the  specified  <u>year</u>,  <u>day</u>,  <u>hour</u>,  <u>min</u>,  <u>sec</u>  and  <u>usec</u>
       (microseconds) to an hptime.  The range expected for each value is as follows:

       year : 1800 - 5000
       day  : 1 - 366  (366 = last day of leap year)
       hour : 0 - 23
       min  : 0 - 59
       sec  : 0 - 60   (60 = leap second)
       usec : 0 - 999999

       <b>NOTE:</b>  miniSEED  data  records  are  only  supported by limbseed with a year range between 1900 and 2100.
       These routines allow a wider range to support times for metadata, etc.

       <b>ms_seedtimestr2hptime</b> converts a SEED time string (day-of-year style) to a  high  precision  epoch  time.
       The  time  format  expected  is "YYYY[,DDD,HH,MM,SS.FFFFFF]", the delimiter can be a comma [,], dash [-],
       colon [:] or period [.].  Additionally a 'T' or space may be used to seprate the  day  and  hour  fields.
       The fractional seconds ("FFFFFF") must begin with a period [.] if present.

       <b>ms_timestr2hptime</b>  converts  a  generic  time string to a high precision epoch time.  SEED time format is
       "YYYY[/MM/DD HH:MM:SS.FFFF]", the delimiter can be a dash [-], comma[,], slash [/], colon [:], or  period
       [.].   Additionally  a 'T' or space may be used between the date and time fields.  The fractional seconds
       ("FFFFFF") must begin with a period [.] if present.

       For both <b>ms_seedtimestr2hptime</b> and <b>ms_timestr2hptime</b> the input time string may be "short", in which  case
       the  vales  omitted on the right hand side are assumed to be 0 (with the exception of month and day which
       are assumed to be 1).  The year is always required.  This characteristic means  that  these  time  string
       parsers  are  very  lenient and should not be used for validation or considered to be applying any strict
       validation.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>ms_btime2hptime</b>, <b>ms_time2hptime</b>, <b>ms_seedtimestr2hptime</b> and <b>ms_timestr2hptime</b> return a hptime  on  success
       and HPTERROR on error.

       <b>ms_btime2isotimestr</b>,  <b>ms_btime2mdtimestr</b>, <b>ms_btime2seedtimestr</b>, <b>ms_hptime2isotimestr</b>, <b>ms_hptime2mdtimestr</b>
       and <b>ms_hptime2seedtimestr</b> return a pointer to the resulting string or NULL on error.

       <b>ms_hptime2btime</b> returns 0 on success and -1 on error.

</pre><h4><b>INTERNAL</b> <b>HPTIME</b></h4><pre>
       The time values internal to libmseed are defined as the number of ticks from  the  epoch:  00:00:00.00  1
       January  1970  and  often referred to as hptime.  By default a tick is defined as a microsecond (0.000001
       seconds).  The tick interval, and thus hptime precision, is controlled by the definition of HPTMODULUS in
       libmseed.h.  It is not recommended to change HPTMODULUS from the default value of 1000000.

       This epoch time system is similar to the  Unix/POSIX  epoch  times  except  that  the  ticks  are  higher
       precision than the 1-second ticks used in POSIX.  An hptime can always be converted to a Unix/POSIX epoch
       time  by  dividing hptime by HPTMODULUS (reducing the hptime to second precision) and vise-versa, see the
       documentation for the MS_HPTIME2EPOCH and MS_EPOCH2HPTIME macros above.

       As long as the system's <b>gmtime</b> function supports negative epoch times the internal time routines will  be
       able to represent times earlier than the epoch, i.e. times earlier than 1 January 1970.

       The  hptime  values  are  stored as 64-bit integers to allow high precision and avoid accumulation errors
       associated with floating point values.

       A special value defined as HPTERROR in libmseed.h is used to  represent  errors  for  routines  returning
       hptime.

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       With software provided by <a href="http://2038bug.com/">http://2038bug.com/</a> (site offline, checked Oct. 2017)

</pre><h4><b>AUTHOR</b></h4><pre>
       Chad Trabant
       IRIS Data Management Center

Libmseed API                                       2013/02/22                                         <u><a href="../man3/MS_TIME.3.html">MS_TIME</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>