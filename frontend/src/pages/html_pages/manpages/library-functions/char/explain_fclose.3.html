<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>explain_fclose - explain fclose(3) errors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libexplain-dev">libexplain-dev_1.4.D001-16_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       explain_fclose - explain <a href="../man3/fclose.3.html">fclose</a>(3) errors

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;libexplain/fclose.h&gt;
       const char *explain_fclose(FILE *fp);
       const char *explain_errno_fclose(int errnum, FILE *fp);
       void explain_message_fclose(char *message, int message_size, FILE *fp);
       void explain_message_errno_fclose(char *message, int message_size, int errnum, FILE *fp);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These functions may be used to obtain explanations of <u><a href="../man3/fclose.3.html">fclose</a></u>(3) errors.

   <b>explain_fclose</b>
       const char *explain_fclose(FILE * fp);

       The  explain_fclose  function  is  used  to  obtain  an explanation of an error returned by the <u><a href="../man3/fclose.3.html">fclose</a></u>(3)
       function.  The least the message will contain is the value of strerror(errno), but  usually  it  will  do
       much better, and indicate the underlying cause in more detail.

       The <u>errno</u> global variable will be used to obtain the error value to be decoded.

       This function is intended to be used in a fashion similar to the following example:
              if (fclose(fp))
              {
                  fprintf(stderr, "%s\n", explain_fclose(fp));
                  exit(EXIT_FAILURE);
              }

       <u>fp</u>      The original fp, exactly as passed to the <u><a href="../man3/fclose.3.html">fclose</a></u>(3) system call.

       Returns:
               The  message  explaining  the  error.   This message buffer is shared by all libexplain functions
               which do not supply a buffer in their argument list.  This will be overwritten by the  next  call
               to any libexplain function which shares this buffer, including other threads.

       <b>Note:</b>  This  function  is <b>not</b> thread safe, because it shares a return buffer across all threads, and many
       other functions in this library.

       <b>Note:</b> This function may be of little diagnostic  value,  because  libc  may  have  destroyed  any  useful
       context,  leaving  nothing  for libexplain to work with (this is true of glibc in particular).  For files
       that are open for writing, you will obtain more useful information by first calling <u><a href="../man3/fflush.3.html">fflush</a></u>(3), as in  the
       following example
              if (fflush(fp))
              {
                  fprintf(stderr, "%s\n", explain_fflush(fp));
                  exit(EXIT_FAILURE);
              }
              if (fclose(fp))
              {
                  fprintf(stderr, "%s\n", explain_fclose(fp));
                  exit(EXIT_FAILURE);
              }

   <b>explain_errno_fclose</b>
       const char *explain_errno_fclose(int errnum, FILE * fp);

       The  explain_errno_fclose function is used to obtain an explanation of an error returned by the <u><a href="../man3/fclose.3.html">fclose</a></u>(3)
       function.  The least the message will contain is the value of strerror(errnum), but usually  it  will  do
       much better, and indicate the underlying cause in more detail.

       This function is intended to be used in a fashion similar to the following example:
              if (fclose(fp))
              {
                  int err = errno;
                  fprintf(stderr, "%s\n", explain_errno_fclose(err, fp));
                  exit(EXIT_FAILURE);
              }

       <u>errnum</u>  The  error  value to be decoded, usually obtained from the <u>errno</u> global variable just before this
               function is called. This is necessary if you need to call <b>any</b> code between the system call to  be
               explained and this function, because many libc functions will alter the value of <u>errno</u>.

       <u>fp</u>      The original fp, exactly as passed to the <u><a href="../man3/fclose.3.html">fclose</a></u>(3) system call.

       Returns:
               The  message  explaining  the  error.   This message buffer is shared by all libexplain functions
               which do not supply a buffer in their argument list.  This will be overwritten by the  next  call
               to any libexplain function which shares this buffer, including other threads.

       <b>Note:</b>  This  function  is <b>not</b> thread safe, because it shares a return buffer across all threads, and many
       other functions in this library.

       <b>Note:</b> This function may be of little diagnostic  value,  because  libc  may  have  destroyed  any  useful
       context,  leaving  nothing  for libexplain to work with (this is true of glibc in particular).  For files
       that are open for writing, you will obtain more useful information by first calling <u><a href="../man3/fflush.3.html">fflush</a></u>(3), as in  the
       following example
              if (fflush(fp))
              {
                  int err = errno;
                  fprintf(stderr, "%s\n", explain_errno_fflush(err, fp));
                  exit(EXIT_FAILURE);
              }
              if (fclose(fp))
              {
                  int err = errno;
                  fprintf(stderr, "%s\n", explain_errno_fclose(err, fp));
                  exit(EXIT_FAILURE);
              }

   <b>explain_message_fclose</b>
       void explain_message_fclose(char *message, int message_size, FILE *fp);

       The  explain_message_fclose  function  is  used  to  obtain  an  explanation  of an error returned by the
       <u><a href="../man3/fclose.3.html">fclose</a></u>(3) function.  The least the message will contain is the value of strerror(errno), but  usually  it
       will do much better, and indicate the underlying cause in more detail.

       The <u>errno</u> global variable will be used to obtain the error value to be decoded.

       This function is intended to be used in a fashion similar to the following example:
              if (fclose(fp))
              {
                  char message[3000];
                  explain_message_fclose(message, <a href="../manmessage/sizeof.message.html">sizeof</a>(message), fp);
                  fprintf(stderr, "%s\n", message);
                  exit(EXIT_FAILURE);
              }

       <u>message</u> The  location  in  which to store the returned message.  Because a message return buffer has been
               supplied, this function is thread safe.

       <u>message_size</u>
               The size in bytes of the location in which to store the returned message.

       <u>fp</u>      The original fp, exactly as passed to the <u><a href="../man3/fclose.3.html">fclose</a>(3)</u> system call.

       <b>Note:</b> This function may be of little diagnostic  value,  because  libc  may  have  destroyed  any  useful
       context,  leaving  nothing  for libexplain to work with (this is true of glibc in particular).  For files
       that are open for writing, you will obtain more useful information by first calling <u><a href="../man3/fflush.3.html">fflush</a></u>(3), as in  the
       following example
              if (fflush(fp))
              {
                  char message[3000];
                  explain_message_fflush(message, <a href="../manmessage/sizeof.message.html">sizeof</a>(message), fp);
                  fprintf(stderr, "%s\n", message);
                  exit(EXIT_FAILURE);
              }
              if (fclose(fp))
              {
                  char message[3000];
                  explain_message_fclose(message, <a href="../manmessage/sizeof.message.html">sizeof</a>(message), fp);
                  fprintf(stderr, "%s\n", message);
                  exit(EXIT_FAILURE);
              }

   <b>explain_message_errno_fclose</b>
       void explain_message_errno_fclose(char *message, int message_size, int errnum, FILE *fp);

       The  explain_message_errno_fclose  function  is used to obtain an explanation of an error returned by the
       <u><a href="../man3/fclose.3.html">fclose</a></u>(3) function.  The least the message will contain is the value of strerror(errnum), but usually  it
       will do much better, and indicate the underlying cause in more detail.

       This function is intended to be used in a fashion similar to the following exameple:
              if (fclose(fp))
              {
                  int err = errno;
                  char message[3000];
                  explain_message_errno_fclose(message, <a href="../manmessage/sizeof.message.html">sizeof</a>(message),
                      err, fp);
                  fprintf(stderr, "%s\n", message);
                  exit(EXIT_FAILURE);
              }

       <u>message</u> The  location  in  which to store the returned message.  Because a message return buffer has been
               supplied, this function is thread safe.

       <u>message_size</u>
               The size in bytes of the location in which to store the returned message.

       <u>errnum</u>  The error value to be decoded, usually obtained from the <u>errno</u> global variable just  before  this
               function is called.  This is necessary if you need to call <b>any</b> code between the system call to be
               explained and this function, because many libc functions will alter the value of <u>errno</u>.

       <u>fp</u>      The original fp, exactly as passed to the <u><a href="../man3/fclose.3.html">fclose</a></u>(3) system call.

       <b>Note:</b>  This  function  may  be  of  little  diagnostic  value, because libc may have destroyed any useful
       context, leaving nothing for libexplain to work with (this is true of glibc in  particular).   For  files
       that  are open for writing, you will obtain more useful information by first calling <u><a href="../man3/fflush.3.html">fflush</a></u>(3), as in the
       following example
              if (fflush(fp))
              {
                  int err = errno;
                  char message[3000];
                  explain_message_errno_fflush(message, <a href="../manmessage/sizeof.message.html">sizeof</a>(message),
                      err, fp);
                  fprintf(stderr, "%s\n", message);
                  exit(EXIT_FAILURE);
              }
              if (fclose(fp))
              {
                  int err = errno;
                  char message[3000];
                  explain_message_errno_fclose(message, <a href="../manmessage/sizeof.message.html">sizeof</a>(message),
                      err, fp);
                  fprintf(stderr, "%s\n", message);
                  exit(EXIT_FAILURE);
              }

</pre><h4><b>COPYRIGHT</b></h4><pre>
       libexplain version 1.4
       Copyright (C) 2008 Peter Miller

</pre><h4><b>AUTHOR</b></h4><pre>
       Written by Peter Miller &lt;<a href="mailto:pmiller@opensource.org.au">pmiller@opensource.org.au</a>&gt;

                                                                                               <u><a href="../man3/explain_fclose.3.html">explain_fclose</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>