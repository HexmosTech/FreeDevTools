<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tracefs_event_systems, tracefs_system_events, tracefs_event_enable, tracefs_event_disable,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtracefs-doc">libtracefs-doc_1.8.1-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tracefs_event_systems, tracefs_system_events, tracefs_event_enable, tracefs_event_disable,
       tracefs_event_is_enabled - Work with trace systems and events.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tracefs.h&gt;</b>

       enum tracefs_event_state {
               TRACEFS_ERROR = -1,
               TRACEFS_ALL_DISABLED = 0,
               TRACEFS_ALL_ENABLED = 1,
               TRACEFS_SOME_ENABLED = 2,
       };

       char **<b>tracefs_event_systems</b>(const char *<u>tracing_dir</u>);
       char **<b>tracefs_system_events</b>(const char *<u>tracing_dir</u>, const char *<u>system</u>);
       int <b>tracefs_event_enable</b>(struct tracefs_instance *<u>instance</u>, const char *<u>system</u>,
                                  const char *<u>event</u>);
       int <b>tracefs_event_disable</b>(struct tracefs_instance *<u>instance</u>, const char *<u>system</u>,
                                   const char *<u>event</u>);
       enum tracefs_enable_state <b>tracefs_event_is_enabled</b>(struct tracefs_instance *<u>instance</u>,
                                const char *<u>system</u>, const char *<u>event</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Trace systems and events related APIs.

       The <b>tracefs_event_systems()</b> function returns array of strings with the names of all registered trace
       systems, located in the given <u>tracing_dir</u> directory. This could be NULL or the location of the tracefs
       mount point for the trace systems of the local machine, or it may be a path to a copy of the tracefs
       directory from another machine. The last entry in the array is a NULL pointer. The array must be freed
       with <b>tracefs_list_free()</b> API.

       The <b>tracefs_system_events()</b> function returns array of strings with the names of all registered trace
       events for given trace system specified by <u>system</u>, located in the given <u>tracing_dir</u> directory. This could
       be NULL or the location of the tracefs mount point for the trace systems of the local machine, or it may
       be a path to a copy of the tracefs directory from another machine. The last entry in the array as a NULL
       pointer. The array must be freed with <b>tracefs_list_free()</b> API.

       The <b>tracefs_event_enable()</b> function enables a given event based on the <u>system</u> and <u>event</u> passed in for the
       given <u>instance</u>. If <u>instance</u> is NULL, then the top level tracing directory is used. If <u>system</u> and <u>event</u>
       are both NULL, then all events are enabled for the <u>instance</u>. If <u>event</u> is NULL then all events within the
       <u>system</u> are enabled. If <u>system</u> is NULL, then all systems are searched and any event within a system that
       matches <u>event</u> is enabled. Both <u>system</u> and <u>event</u> may be regular expressions as defined by <b><a href="../man3/regex.3.html">regex</a></b>(3).

       The <b>tracefs_event_disable()</b> function disables the events that match the <u>system</u> and <u>event</u> parameters for
       the given <u>instance</u>. What events are disable follow the same rules as <b>tracefs_event_enable()</b> for matching
       events. That is, if <u>instance</u> is NULL, then the top level tracing directory is used. If both <u>system</u> and
       <u>event</u> are NULL then all events are disabled for the given <u>instance</u>, and so on.

       The <b>tracefs_event_is_enabled()</b> returns if an event is enabled, a set of events are enabled, a system is
       enabled, or all events are enabled. If both <u>system</u> and <u>event</u> are NULL, then it returns the enable state
       of all events. If <u>system</u> is not NULL and <u>event</u> is NULL, then it will check if all the events in all the
       systems that <u>system</u> and return the enable state of those events. If <u>system</u> is NULL and <u>event</u> is not NULL,
       then it will match all the events in all systems that match <u>event</u> and return their enabled state. If both
       <u>system</u> and <u>event</u> are not NULL, then it will return the enabled state of all matching events. The enabled
       state is defined as:

       <b>TRACEFS_ERROR</b> - An error occurred including no event were matched.

       <b>TRACEFS_ALL_DISABLED</b> - All matching events are disabled.

       <b>TRACEFS_ALL_ENABLED</b> - All matching events are enabled.

       <b>TRACEFS_SOME_ENABLED</b> - Some matching events were enabled while others were not.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>tracefs_event_systems()</b> and <b>tracefs_system_events()</b> functions return an array of strings. The last
       element in that array is a NULL pointer. The array must be freed with <b>tracefs_list_free()</b> API. In case of
       an error, NULL is returned.

       Both <b>tracefs_event_enable()</b> and <b>tracefs_event_disable()</b> return 0 if they found any matching events (Note
       it does not check the previous status of the event. If <b>tracefs_event_enable()</b> finds an event that is
       already enabled, and there are no other errors, then it will return 0). If an error occurs, even if other
       events were found, it will return -1 and errno will be set. If no errors occur, but no events are found
       that match the <u>system</u> and <u>event</u> parameters, then -1 is returned and errno is not set.

       The <b>tracefs_event_is_enabled()</b> returns the enabled status of the matching events or TRACEFS_ERROR on
       error.

</pre><h4><b>EXAMPLE</b></h4><pre>
           #include &lt;tracefs.h&gt;

           char **systems = tracefs_event_systems(NULL);

                   if (systems) {
                           int i = 0;
                           /* Got registered trace systems from the top trace instance */
                           while (systems[i]) {
                                   char **events = tracefs_system_events(NULL, systems[i]);
                                   if (events) {
                                           /* Got registered events in system[i] from the top trace instance */
                                           int j = 0;

                                           while (events[j]) {
                                                   /* Got event[j] in system[i] from the top trace instance */
                                                   j++;
                                           }
                                           tracefs_list_free(events);
                                   }
                                   i++;
                           }
                           tracefs_list_free(systems);
                   }
           ....
           static int records_walk(struct tep_event *tep, struct tep_record *record, int cpu, void *context)
           {
                   /* Got recorded event on cpu */
                   return 0;
           }
           ...
           struct tep_handle *tep = tracefs_local_events(NULL);

                   if (!tep) {
                           /* Failed to initialise tep handler with local events */
                           ...
                   }

                   errno = 0;
                   ret = tracefs_event_enable(NULL, "sched", NULL);
                   if (ret &lt; 0 &amp;&amp; !errno)
                           printf("Could not find 'sched' events\n");
                   tracefs_event_enable(NULL, "irq", "irq_handler_\(enter\|exit\)");

                   if (tracefs_iterate_raw_events(tep, NULL, NULL, 0, records_walk, NULL) &lt; 0) {
                           /* Error walking through the recorded raw events */
                   }

                   /* Disable all events */
                   tracefs_event_disable(NULL, NULL, NULL);
                   tep_free(tep);

</pre><h4><b>FILES</b></h4><pre>
           <b>tracefs.h</b>
                   Header file to include in order to have access to the library APIs.
           <b>-ltracefs</b>
                   Linker switch to add when building a program that uses the library.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libtracefs.3.html">libtracefs</a></b>(3), <b><a href="../man3/libtraceevent.3.html">libtraceevent</a></b>(3), <b><a href="../man1/trace-cmd.1.html">trace-cmd</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
           <b>Steven</b> <b>Rostedt</b> &lt;<b><a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a></b>[1]&gt;
           <b>Tzvetomir</b> <b>Stoyanov</b> &lt;<b><a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a></b>[2]&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<b><a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a></b>[3]&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       libtracefs is Free Software licensed under the GNU LGPL 2.1

</pre><h4><b>RESOURCES</b></h4><pre>
       <b>https://git.kernel.org/pub/scm/libs/libtrace/libtracefs.git/</b>

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2020 VMware, Inc. Free use of this software is granted under the terms of the GNU Public
       License (GPL).

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a>
           <a href="mailto:rostedt@goodmis.org">mailto:rostedt@goodmis.org</a>

        2. <a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a>
           <a href="mailto:tz.stoyanov@gmail.com">mailto:tz.stoyanov@gmail.com</a>

        3. <a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a>
           <a href="mailto:linux-trace-devel@vger.kernel.org">mailto:linux-trace-devel@vger.kernel.org</a>

libtracefs 1.8.1                                   06/05/2025                                      <u><a href="../man3/LIBTRACEFS.3.html">LIBTRACEFS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>