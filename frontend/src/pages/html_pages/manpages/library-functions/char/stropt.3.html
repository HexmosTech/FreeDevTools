<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stropt,  stroptx,  stropt2buf,  stropt2str  -  Parse options from a string (it supports quotation, option</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libstropt-dev">libstropt-dev_0.1.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stropt,  stroptx,  stropt2buf,  stropt2str  -  Parse options from a string (it supports quotation, option
       arguments)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;stropt.h&gt;</b>

       <b>int</b> <b>stropt(const</b> <b>char</b> <b>*</b><u>input</u><b>,</b> <b>char</b> <b>**</b><u>tags</u><b>,</b> <b>char</b> <b>**</b><u>args</u><b>,</b> <b>char</b> <b>*</b><u>buf</u><b>);</b>

       <b>int</b> <b>stroptx(const</b> <b>char</b> <b>*</b><u>input</u><b>,</b> <b>char</b> <b>*</b><u>features</u><b>,</b> <b>char</b> <b>*</b><u>sep</u><b>,</b> <b>int</b>  <u>flags</u><b>,</b>  <b>char</b>  <b>**</b><u>tags</u><b>,</b>  <b>char</b>  <b>**</b><u>args</u><b>,</b>  <b>char</b>
       <b>*</b><u>buf</u><b>);</b>

       <b>char</b> <b>*stropt2buf(void</b> <b>*</b><u>buf</u><b>,</b> <b>size_t</b> <u>size</u><b>,</b> <b>char</b> <b>**</b><u>tags</u><b>,</b> <b>char</b> <b>**</b><u>args</u><b>,</b> <b>char</b> <u>sep</u><b>,</b> <b>char</b> <u>eq</u><b>);</b>

       <b>char</b> <b>*stropt2str(char</b> <b>**</b><u>tags</u><b>,</b> <b>char</b> <b>**</b><u>args</u><b>,</b> <b>char</b> <u>sep</u><b>,</b> <b>char</b> <u>eq</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  small  library  parses a list of options from a string. Options can be separated by spaces, commas,
       semicolons, tabs or new line.  (e.g.  <u>uppercase,bold,underlined</u>  ).  Options  may  have  arguments  (e.g.
       <u>ro,noatime,uid=0,gid=0</u>  ).  It  is  possible  to protect symbols and spaces using quote, double quote and
       backslash (e.g. <u>values='1,2,3,4',equal==</u> )

       <b>stropt</b> This function parses a list of options from the string <u>input</u>. Options can be separated by  commas,
              semicolons,  tabs  oe  new  lines.  Options may have arguments in the form <u>keyword=value</u>. <u>buf</u> is a
              temporary buffer, it must have the same size of the <u>input</u> string (including the NULL  terminator).
              <u>tags</u>  and  <u>args</u> are the resulting arrays of options and arguments respectively. Both <u>tags</u> and <u>args</u>
              have one NULL terminator element at the end. When an option has not an argument the  corresponding
              <u>args</u>  element  is  NULL. For example if <u>input</u> is "font=12,typeface=bodoni,italic", <u>tags[0]</u>="font",
              <u>tags[1]</u>="typeface", <u>tags[2]</u>="italic", <u>tags[4]</u>=NULL, <u>args[0]</u>="12", <u>args[1]</u>="bodoni",  <u>args[0]</u>=NULL,
              <u>args[4]</u>=NULL.

              When  <b>stropt</b>  is  called  with  <u>tags</u>,  <u>args</u>,  and  <u>buf</u> all NULL, it parses the input, counting the
              options. The return value can be used to allocate suitable arrays for <u>tags</u> and <u>args</u>.

              It is possible to use the same variable as <u>input</u> and <u>buffer</u>. In this case the  original  value  of
              <u>input</u> is overwritten.

       <b>stroptx</b>
              This is a more configurable extension of <b>stropt</b>. Arguments having the same names as in <b>stropt</b> have
              the same meaning as explained above.

              The  string  <u>features</u>  permits  one  to enable/disable some of the standard features. Each feature
              corresponds to a mnemonic character, when the character is in the <u>features</u> string the  feature  is
              enabled:

              <b>'</b>: single quoting,

              <b>"</b>: double quoting,

              <b>\</b>: character escape,

              <b>\n</b>:input in several lines,

              <b>=</b>: allow arguments,

              <b>#</b>: support comments.

              If  <u>features</u>  is  NULL all the features are enabled, when <u>features</u> is an empty string all features
              are disabled.

              All the characters included in <u>sep</u> are considered as  option  separators.  If  <u>sep</u>  is  NULL,  the
              default value is " \t;,".

              The <u>flag</u> argument may include the bitwise OR of any of the following flag values:

              <b>STROPTX_KEEP_QUOTATION_MARKS_IN_TAGS</b>: preserve the quotation marks in tags,

              <b>STROPTX_KEEP_QUOTATION_MARKS_IN_ARGS</b>: preserve the quotation marks in args,

              <b>STROPTX_KEEP_QUOTATION_MARKS</b>:      shortcut     for     <b>STROPTX_KEEP_QUOTATION_MARKS_IN_TAGS</b>     <b>|</b>
              <b>STROPTX_KEEP_QUOTATION_MARKS_IN_ARGS</b>

              <b>STROPTX_ALLOW_MULTIPLE_SEP</b>: when it is not set, a sequence of separators is processed as a  single
              separator, when it is set each sequence of two separators means an empty field in between.

              <b>STROPTX_NEWLINE_TAGS</b>: when set each new line is encoded as a tag "\n".

       <b>stropt2buf</b>
              This  function  re-encodes  an array of options (and an array of arguments) in a string. It is the
              inverse function of of <b>stropt</b>. Given a buffer <u>buf</u> of size <u>size</u>, the array  of  options  <u>tags</u>  with
              their  corresponding values in the array <u>args</u> is encoded using the separator character <u>sep</u> and the
              assignment character <u>eq</u>.

              Elements whose option tag (element of <u>tags</u>) value is <b>STROPTX_DELETED_TAG</b> are omitted in output.

       <b>stropt2str</b>
              This is the sibling function of <b>stropt2buf</b>. It uses dynamically  allocated  memory  instead  of  a
              buffer provided by the caller. The resulting string must be deallocated using <a href="../man3/free.3.html">free</a>(3).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       •   <b>stropt</b> and <b>stroptx</b> return the number of options + 1.

       •   <b>stropt2buf</b> and <b>stropt2str</b> return the resulting string.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following function lists the option tags and arguments (without modyfying the input string).

           void parse_args(char *input) {
             int tagc = stropt(input, NULL, NULL, NULL);
             if(tagc &gt; 0) {
               char buf[strlen(input)+1];
               char *tags[tagc];
               char *args[tagc];
               stropt(input, tags, args, buf);
               for (int i=0; i&lt;tagc; i++)
                 printf("%s = %s\n",tags[i], args[i]);
             }
           }

       it is possible to use the same input string as the buffer for parsing (the value of the input string gets
       lost in this way).

           void parse_args(char *input) {
             int tagc = stropt(input, NULL, NULL, NULL);
             if(tagc &gt; 0) {
               char *tags[tagc];
               char *args[tagc];
               stropt(input, tags, args, input);
               for (int i=0; i&lt;tagc; i++)
                 printf("%s = %s\n",tags[i], args[i]);
             }
           }

       when options to parse have no arguments, args can be set to NULL.

           void parse_args(char *input) {
             int tagc = stropt(input, NULL, NULL, NULL);
             if(tagc &gt; 0) {
               char buf[strlen(input)+1];
               char *tags[tagc];
               stropt(input, tags, NULL, buf);
               for (int i=0; i&lt;tagc; i++)
                 printf("%s \n",tags[i]);
             }
           }

       The  following complete program parses and re-encode a string of comma separated arguments deleting those
       which begin by an uppercase letter.

           #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
           #include &lt;<a href="file:/usr/include/ctype.h">ctype.h</a>&gt;
           #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
           #include &lt;<a href="file:/usr/include/string.h">string.h</a>&gt;
           #include &lt;stropt.h&gt;

           char *delete_uppercase_options(const char *input) {
             int tagc = stroptx(input, "", ",",STROPTX_ALLOW_MULTIPLE_SEP, NULL, NULL, NULL);
             if(tagc &gt; 0) {
               char buf[strlen(input)+1];
               char *tags[tagc];
               int i;
               stroptx(input, "", ",",STROPTX_ALLOW_MULTIPLE_SEP, tags, NULL, buf);
               for (i = 0; i &lt; tagc; i++)
                 if (tags[i] &amp;&amp; isupper(tags[i][0]))
                   tags[i] = STROPTX_DELETED_TAG;
               return stropt2str(tags, NULL, ',', '=');
             } else
               return NULL;
           }

           int main(int argc, char *argv[]) {
             if (argc &gt; 1) {
               char *result = delete_uppercase_options(argv[1]);
               printf("%s\n", result);
               free(result);
             }
             return 0;
           }

</pre><h4><b>AUTHOR</b></h4><pre>
       VirtualSquare. Project leader: Renzo Davoli.

VirtualSquare                                      August 2020                                         <u><a href="../man3/STROPT.3.html">STROPT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>