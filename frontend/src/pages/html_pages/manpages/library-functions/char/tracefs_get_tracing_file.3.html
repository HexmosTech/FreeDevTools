<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tracefs_get_tracing_file, tracefs_put_tracing_file, tracefs_tracing_dir, tracefs_debug_dir,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtracefs-doc">libtracefs-doc_1.8.1-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tracefs_get_tracing_file, tracefs_put_tracing_file, tracefs_tracing_dir, tracefs_debug_dir,
       tracefs_set_tracing_dir, tracefs_tracing_dir_is_mounted - Find and set locations of trace directory and
       files.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tracefs.h&gt;</b>

       char *<b>tracefs_get_tracing_file</b>(const char *<u>name</u>);
       void <b>tracefs_put_tracing_file</b>(char *<u>name</u>);
       const char *<b>tracefs_tracing_dir</b>(void);
       const char *<b>tracefs_debug_dir</b>(void);
       int <b>tracefs_set_tracing_dir</b>(char *<u>tracing_dir</u>)
       int <b>tracefs_tracing_dir_is_mounted</b>(bool <u>mount</u>, const char **<u>path</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This set of APIs can be used to find the full path of the trace file system mount point and trace files
       in it.

       The <b>tracefs_set_tracing_dir()</b> function sets a custom location of the systemâ€™s tracing directory mount
       point. Usually, the library auto detects it using the information from the <a href="file:/proc/mounts">/proc/mounts</a> file. Use this
       API only if the mount point is not standard and cannot be detected by the library. The <u>tracing_dir</u>
       argument can be NULL, in that case the custom location is deleted and the library auto detection logic is
       used.

       The <b>tracefs_get_tracing_file()</b> function returns the full path of the file with given <u>name</u> in the trace
       file system. The function works only with files in the tracefs main directory, it is not trace instance
       aware. It is recommended to use <b>tracefs_instance_get_file()</b> and <b>tracefs_instance_get_dir()</b> instead. The
       returned string must be freed with <b>tracefs_put_tracing_file()</b>.

       The <b>tracefs_put_tracing_file()</b> function frees trace file name, returned by <b>tracefs_get_tracing_file()</b>.

       The <b>tracefs_tracing_dir()</b> function returns the full path to the trace file system. In the first function
       call, the mount point of the tracing file system is located, cached and returned. It will mount it, if it
       is not mounted. On any subsequent call the cached path is returned. The return string must <u>not</u> be freed.

       The <b>tracefs_debug_dir()</b> is similar to <b>tracefs_tracing_dir()</b> except that it will return where the debugfs
       file system is mounted. If it is not mounted it will try to mount it. The return string must <u>not</u> be
       freed.

       <b>tracefs_tracing_dir_is_mounted()</b> returns 1 if the tracing directory is already mounted and 0 if it is
       not. If <u>mount</u> is true, it will try to mount it if it is not, and returns 0 if it succesfully mounted it
       and -1 if it did not. If <u>path</u> is set, it will be assigned to the path where it mounted it. <u>path</u> is
       internal and should not be freed.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>tracefs_set_tracing_dir()</b> function returns 0 on success, -1 otherwise.

       The <b>tracefs_get_tracing_file()</b> function returns a string or NULL in case of an error. The returned string
       must be freed with <b>tracefs_put_tracing_file()</b>.

       The <b>tracefs_tracing_dir()</b> function returns a constant string or NULL in case of an error. The returned
       string must <u>not</u> be freed.

       The <b>tracefs_debug_dir()</b> function returns a constant string or NULL in case of an error. The returned
       string must <u>not</u> be freed.

       The <b>tracefs_tracing_dir_is_mounted()</b> returns 1 if the tracing directory is already mounted, 0 if it is
       not, and -1 on error.

</pre><h4><b>EXAMPLE</b></h4><pre>
           #include &lt;tracefs.h&gt;
           ...
           char *trace_on = tracefs_get_tracing_file("tracing_on");
                   if (trace_on) {
                           ...
                           tracefs_put_tracing_file(trace_on);
                   }
           ...
           const char *trace_dir = tracefs_tracing_dir();

</pre><h4><b>FILES</b></h4><pre>
           <b>tracefs.h</b>
                   Header file to include in order to have access to the library APIs.
           <b>-ltracefs</b>
                   Linker switch to add when building a program that uses the library.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libtracefs.3.html">libtracefs</a></b>(3), <b><a href="../man3/libtraceevent.3.html">libtraceevent</a></b>(3), <b><a href="../man1/trace-cmd.1.html">trace-cmd</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
           <b>Steven</b> <b>Rostedt</b> &lt;<b><a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a></b>[1]&gt;
           <b>Tzvetomir</b> <b>Stoyanov</b> &lt;<b><a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a></b>[2]&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<b><a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a></b>[3]&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       libtracefs is Free Software licensed under the GNU LGPL 2.1

</pre><h4><b>RESOURCES</b></h4><pre>
       <b>https://git.kernel.org/pub/scm/libs/libtrace/libtracefs.git/</b>

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2020 VMware, Inc. Free use of this software is granted under the terms of the GNU Public
       License (GPL).

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a>
           <a href="mailto:rostedt@goodmis.org">mailto:rostedt@goodmis.org</a>

        2. <a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a>
           <a href="mailto:tz.stoyanov@gmail.com">mailto:tz.stoyanov@gmail.com</a>

        3. <a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a>
           <a href="mailto:linux-trace-devel@vger.kernel.org">mailto:linux-trace-devel@vger.kernel.org</a>

libtracefs 1.8.1                                   06/05/2025                                      <u><a href="../man3/LIBTRACEFS.3.html">LIBTRACEFS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>