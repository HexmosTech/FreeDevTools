<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unac - remove accents from string or character</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libunac1-dev">libunac1-dev_1.8.0-10_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       unac - remove accents from string or character

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;unac.h&gt;

       const char* unac_version();

       int unac_string(const char* charset,
                 const char* in, int in_length,
                 char** out, int* out_length);

       int unac_string_utf16(const char* in, int in_length,
                 char** out, int* out_length);

       /* MACRO: side effect on unaccented and length arguments */
       unac_char_utf16(unsigned short c,
                       unsigned short* unaccented,
                       int length);

       const char* unac_version()

       /*
        * The level argument can be one of:
        *    UNAC_DEBUG_NONE UNAC_DEBUG_LOW UNAC_DEBUG_HIGH
        */
       void unac_debug(int level)

       typedef void (*unac_debug_print_t)(const char* message, void* data);
       void unac_debug_callback(int level, unac_debug_print_t function, void* data)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>unac</u>  is  a C library that removes accents from characters, regardless of the character set (ISO-8859-15,
       ISO-CELTIC, KOI8-RU...) as long as <u><a href="../man3/iconv.3.html">iconv</a>(3)</u> is able to convert it into UTF-16 (Unicode).

       The <b>unac_string</b> function is given a charset (ISO-8859-15 for instance) and  a  string.  It  converts  the
       string  into  UTF-16  and  calls  the  <b>unac_string_utf16</b>  function  to remove all accents from the UTF-16
       version. The unaccented string is then converted into the original charset (ISO-8859-15 for instance) and
       returned to the caller of <b>unac_string.</b>

       <u>unac</u> does a little more than removing accents: every character that is made of two character  such  as  <b>æ</b>
       (ISO-8859-15  octal  code 346) will be expanded in two characters <b>a</b> and <b>e.</b>  Should a character be made of
       three characters, it would be decomposed in the same way.

       The conversion from and to UTF-16 is done with <u><a href="../man3/iconv.3.html">iconv</a>(3).</u>  The <b>iconv</b> <b>-l</b> command will  list  all  available
       charsets.  Using  UTF-16  as a pivot implies an overhead but ensures that accents can be removed from all
       character for which there is an equivalent character in Unicode.

       <b>unac_char_utf16</b> is a CPP macro that returns a pointer to the unaccented  equivalent  of  a  given  UTF-16
       character. It is the basic building block of <u>unac.</u>

       <b>unac_string_utf16</b> repeatidly applies the <b>unac_char_utf16</b> macro to each character of an UTF-16 string.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       <b>int</b> <b>unac_string(const</b> <b>char*</b> <b>charset,</b> <b>const</b> <b>char*</b> <b>in,</b> <b>size_t</b> <b>in_length,</b> <b>char**</b> <b>out,</b> <b>size_t*</b> <b>out_length)</b>

              Returns  the  unaccented  equivalent of the string <b>'in'</b> of length <b>'in_length'</b> bytes.  The returned
              string is stored in the pointer pointed by the <b>'out'</b> argument and the length of the <b>'out'</b>  string,
              in  bytes,  is stored in the integer pointed by the <b>'out_length</b> <b>'</b> argument.  If the <b>'*out'</b> pointer
              is not null, it must point to an area allocated by <u><a href="../man3/malloc.3.html">malloc</a>(3)</u> and the length of the array  must  be
              specified  in the <b>'*out_length'</b> argument. Both arguments <b>'*out'</b> and <b>'*out_length'</b> will be replaced
              with the return values when the function returns on success. The <b>'*out'</b> pointer  may  point  to  a
              memory location that has been reallocated (using <u><a href="../man3/realloc.3.html">realloc</a>(3))</u> by the <b>unac_string</b> function. There is
              no  guarantee  that  '*out' is identical to the value given by the caller. The pointer provided as
              '*out' by the caller may not be useable when the function returns (either error or  success).   If
              the <b>'*out'</b> pointer is null, the <b>unac_string</b> function allocates a new memory block using <u><a href="../man3/malloc.3.html">malloc</a>(3).</u>
              It is the responsibility of the caller to deallocate the area returned in the <b>'*out'</b> pointer.

              The  return value of <b>unac_string</b> is 0 on success and -1 on error, in which case the errno variable
              is set to the corresponding error code. See the ERROR section  below  for  more  information.  The
              <u><a href="../man3/iconv.3.html">iconv</a>(3)</u> manual page may also help.

       <b>int</b> <b>unac_string_utf16(const</b> <b>char*</b> <b>in,</b> <b>int</b> <b>in_length,</b> <b>char**</b> <b>out,</b> <b>int*</b> <b>out_length)</b>

              Has  the  same  effect  as  <b>unac_string("UTF-16",</b>  <b>in,</b>  <b>in_length,</b>  <b>out,</b>  <b>out_length).</b>   Since the
              <b>unac_string_utf16</b> is the backend function of the <b>unac_string</b> function it is more efficient because
              no charset conversion of the input string (from and to UTF-16) is necessary.

       <b>unac_char_utf16(const</b> <b>unsigned</b> <b>short</b> <b>c,</b> <b>unsigned</b> <b>short*</b> <b>p,</b> <b>int</b> <b>l)</b>

              <b>Warning:</b> <b>this</b> <b>is</b> <b>a</b> <b>macro,</b> <b>each</b> <b>argument</b> <b>may</b> <b>be</b> <b>evaluated</b> <b>more</b> <b>than</b> <b>once.</b>  Returns  the  unaccented
              equivalent of the UTF-16 character <b>'c'</b> in the pointer <b>'p'.</b>  The length of the unsigned short array
              pointed by <b>'p'</b> is returned in the <b>'l'</b> argument.

       <b>const</b> <b>char*</b> <b>unac_version()</b>

              Return the version number of <b>unac.</b>

       <b>void</b> <b>unac_debug(int</b> <b>level)</b>
              Set  the  debug level of the unac library to <b>'level'.</b>  Possible values are: UNAC_DEBUG_NONE for no
              debug at all, UNAC_DEBUG_LOW for  terse  human  readable  information,  UNAC_DEBUG_HIGH  for  very
              detailed information only usable when translating a few strings.

              unac_debug_callback with anything but UNAC_DEBUG_NONE is not thread safe.

       <b>void</b> <b>unac_debug_callback(int</b> <b>level,</b> <b>unac_debug_print_t</b> <b>function,</b> <b>void*</b> <b>data)</b>

              Set  the  debug  level  and  define  a  printing function callback.  The <b>'level'</b> is the same as in
              unac_debug. The <b>'function'</b> is in charge of dealing with the debug messages,  presumably  to  print
              them  to  the  user.   The <b>'data'</b> is an opaque pointer that is passed along to <b>function,</b> should it
              need to manage a persistent context.

              The prototype of <b>'function'</b> accepts two arguments. The first is the debug message  <u>(const</u>  <u>char*),</u>
              the second is the opaque pointer given as <b>'data'</b> argument to <b>unac_debug_callback.</b>

              If <b>'function'</b> is NULL, messages are printed on the standard error output using fprintf(stderr...).

              unac_debug_callback with anything but UNAC_DEBUG_NONE is not thread safe.

</pre><h4><b>ERRORS</b></h4><pre>
       EINVAL

              the requested conversion pair is not available. For instance, when specifying the ISO-0000 charset
              (imaginary), it means it is not possible to convert from ISO-0000 to UTF-16.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Convert the <b>été</b> string into <b>ete.</b>
       #include &lt;unac.h&gt;

       char* out = 0;
       int out_length = 0;
       if(unac_string("ISO-8859-1", "été", strlen("été"), &amp;out, &amp;out_length)) {
          perror("unac_string");
       } else {
          printf("%.*s0, out_length, out);
          free(out);
       }

</pre><h4><b>IMPLEMENTATION</b> <b>NOTES</b></h4><pre>
       The  endianness  of the UTF-16 strings manipulated by <u>unac</u> must always be big endian. When using <u><a href="../man3/iconv.3.html">iconv</a>(3)</u>
       to translate strings, UTF-16BE should be used instead of UTF-16 to make sure it is big  endian  (BE).  On
       some systems where UTF-16BE is not available, <b>unac</b> will rely on UTF-16 and hope it is properly big endian
       encoded.   For more information check RFC2781 (<a href="http://www.faqs.org/rfcs/rfc2781.html">http://www.faqs.org/rfcs/rfc2781.html</a>: UTF-16, an encoding
       of ISO 10646).

       The <u>unac</u> library uses the Unicode database to  map  accented  letters  to  their  unaccented  equivalent.
       Mapping    tables    are    generated    from    the    <u>UnicodeData-4.0.0.txt</u>    file    (as   found   at
       <a href="http://www.unicode.org/Public/4.0-Update/">http://www.unicode.org/Public/4.0-Update/</a>) by the <u>builder</u> perl script. The <u>builder</u> script  inserts  these
       tables  in  the  <u>unac.h</u>  and  <u>unac.c</u>  files,  replacing  the existing ones. Looking for the <b>'Generated</b> <b>by</b>
       <b>builder'</b> string in the <u>unac.[ch]</u> files allows it to spot the various parts handled by the builder script.

       Some desirable decompositions may not be included in the UnicodeData file, such as AE. To complement  the
       standard  decompositions for the purpose of the unac library, the <u>unaccent-local-map.perl</u> script is used.
       It maps character names (such as <b>LATIN</b> <b>SMALL</b> <b>LETTER</b> <b>AE)</b> to an array of character names into which it will
       be decomposed.  This script is used by the <u>builder</u> script and has  precedence  over  decomposition  rules
       defined in the Unicode data file.

       The  library  data occupies 30KB where a simple minded table would occupy around 512Kbytes. The idea used
       to compress the tables is that many Unicode characters do not have  unaccented  equivalent.   Instead  of
       relying  on  a  table  mapping  each  Unicode  character  to  the  corresponding unaccented character, an
       intermediate array of pointers is created. In the drawing below, the range of  UTF-16  character  is  not
       accurate  but  illustrates  the  method.  The <b>unac_data_table</b> points to a set of <b>unac_dataXX</b> arrays. Each
       pointer covers a range of UTF-16 characters (4 in the example below). When a range of character does  not
       contain any accented character, unac_data_table always points to the same array : unac_data0. Since there
       are many characters without accents, this is enough to achieve a good compression.

             unac_data15                                   unac_data16
       [ NULL, NULL, NULL, e ] &lt;----       /------&gt; [ a, NULL, NULL, NULL ]
                                    |       |
                                    |       |
                                    ^       ^
                 |-----| |-----| |-----| |-----| |-----| |-----|
           [ ... a b c d e f g h i j k é à 0 1 2 3 4 5 6 7 8 9 A... ] unac_data_table
                 |-----| |-----| |-----| |-----| |-----| |-----|
                     v      v                       v       v
                     |      |                       |       |
                     |      |                       |       |
                     --------------------------------------/
                                       |
                                       V
                           [ NULL, NULL, NULL, NULL ]
                                    unac_data0

       Beside  this  simple optimization, a table (unac_positions) listing the actual position of the unaccented
       replacement within a block (unac_dataXX) is  necessary  because  they  are  not  of  fixed  length.  Some
       characters  such  as  <b>æ</b>  will  be replaced by two characters <b>a</b> and <b>e</b> therefore unac_dataXX has a variable
       size.

       The unaccented equivalent of an UTF-16 character is calculated by applying a <u>compatibility</u>  <u>decomposition</u>
       and  then  stripping  all  characters  that belong to the <u>mark</u> category. For a precise definition see the
       Unicode-4.0 normalization forms at <a href="http://www.unicode.org/unicode/reports/tr15/">http://www.unicode.org/unicode/reports/tr15/</a>.

       All original Unicode data files were taken from <a href="http://www.unicode.org/Public">http://www.unicode.org/Public</a> and are subject to the  <b>UCD</b>
       <b>Terms</b> <b>of</b> <b>Use.</b>

       <a href="http://www.unicode.org/Public/4.0-Update/UCD-4.0.0.html">http://www.unicode.org/Public/4.0-Update/UCD-4.0.0.html</a>#UCD_Terms

       <b>Disclaimer</b>

       The  Unicode  Character  Database is provided as is by Unicode, Inc. No claims are made as to fitness for
       any particular purpose. No warranties of any kind are expressed  or  implied.  The  recipient  agrees  to
       determine  applicability  of information provided. If this file has been purchased on magnetic or optical
       media from Unicode, Inc., the sole remedy for any claim will be exchange of  defective  media  within  90
       days of receipt.

       This  disclaimer is applicable for all other data files accompanying the Unicode Character Database, some
       of which have been compiled by the Unicode Consortium, and some of which  have  been  supplied  by  other
       sources.

       <b>Limitations</b> <b>on</b> <b>Rights</b> <b>to</b> <b>Redistribute</b> <b>This</b> <b>Data</b>

       Recipient is granted the right to make copies in any form for internal distribution and to freely use the
       information  supplied  in  the  creation  of products supporting the UnicodeTM Standard. The files in the
       Unicode Character Database can be redistributed to third parties  or  other  organizations  (whether  for
       profit  or  not)  as  long  as  this  notice  and  the disclaimer notice are retained. Information can be
       extracted from these files and used in documentation or programs, as long as  there  is  an  accompanying
       notice indicating the source.

       The  file  Unihan.txt  contains older and inconsistent Terms of Use. That language is overridden by these
       terms.

</pre><h4><b>BUGS</b></h4><pre>
       The input string must not contain partially formed characters, there is no support for this case.

       UTF-16 surrogates are not handled.

       Unicode may contain bugs in the decomposition of characters. When you suspect  such  a  bug  on  a  given
       string,  add  a  test  case  with the faulty string in the <b>t_unac.in</b> test script (you will find it in the
       source distribution) and run <u>make</u> <u>check.</u>  It will describe, in a very verbose way,  how  the  string  was
       unaccented.  You  may  then  fix the UnicodeData-4.0.0.txt file and run <u>make</u> <u>check</u> again to make sure the
       problem is solved. Please send such fixes to the author and to the Unicode consortium.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/unaccent.1.html">unaccent</a>(1), <a href="../man3/iconv.3.html">iconv</a>(3)
       <a href="http://www.unicode.org/">http://www.unicode.org/</a>
       <a href="http://oss.software.ibm.com/icu/">http://oss.software.ibm.com/icu/</a>
       <a href="http://www.gnu.org/manual/glibc-2.2.5/libc.html">http://www.gnu.org/manual/glibc-2.2.5/libc.html</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       Loic Dachary <a href="mailto:loic@senga.org">loic@senga.org</a>
       <a href="http://www.senga.org/unac/">http://www.senga.org/unac/</a>

                                                      local                                              <u><a href="../man3/unac.3.html">unac</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>