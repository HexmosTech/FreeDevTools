<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>spi - SPI access</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbcm2835-dev">libbcm2835-dev_1.75+ds-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       spi - SPI access

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Functions</b>
       int <b>bcm2835_spi_begin</b> (void)
       void <b>bcm2835_spi_end</b> (void)
       void <b>bcm2835_spi_setBitOrder</b> (uint8_t order)
       void <b>bcm2835_spi_setClockDivider</b> (uint16_t divider)
       void <b>bcm2835_spi_set_speed_hz</b> (uint32_t speed_hz)
       void <b>bcm2835_spi_setDataMode</b> (uint8_t mode)
       void <b>bcm2835_spi_chipSelect</b> (uint8_t cs)
       void <b>bcm2835_spi_setChipSelectPolarity</b> (uint8_t cs, uint8_t active)
       uint8_t <b>bcm2835_spi_transfer</b> (uint8_t value)
       void <b>bcm2835_spi_transfernb</b> (char *tbuf, char *rbuf, uint32_t len)
       void <b>bcm2835_spi_transfern</b> (char *buf, uint32_t len)
       void <b>bcm2835_spi_writenb</b> (const char *buf, uint32_t len)
       void <b>bcm2835_spi_write</b> (uint16_t data)
       int <b>bcm2835_aux_spi_begin</b> (void)
       void <b>bcm2835_aux_spi_end</b> (void)
       void <b>bcm2835_aux_spi_setClockDivider</b> (uint16_t divider)
       uint16_t <b>bcm2835_aux_spi_CalcClockDivider</b> (uint32_t speed_hz)
       void <b>bcm2835_aux_spi_write</b> (uint16_t data)
       void <b>bcm2835_aux_spi_writenb</b> (const char *buf, uint32_t len)
       void <b>bcm2835_aux_spi_transfern</b> (char *buf, uint32_t len)
       void <b>bcm2835_aux_spi_transfernb</b> (const char *tbuf, char *rbuf, uint32_t len)
       uint8_t <b>bcm2835_aux_spi_transfer</b> (uint8_t value)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       These functions let you use SPI0 (Serial Peripheral Interface) to interface with an external SPI device.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>bcm2835_aux_spi_begin</b> <b>(void)</b> <b>[extern]</b>
       Start AUX SPI operations. Forces RPi AUX SPI pins P1-38 (MOSI), P1-38 (MISO), P1-40 (CLK) and P1-36 (CE2)
       to alternate function ALT4, which enables those pins for SPI interface.

       <b>Returns</b>
           1 if successful, 0 otherwise (perhaps because you are not running as root)

   <b>uint16_t</b> <b>bcm2835_aux_spi_CalcClockDivider</b> <b>(uint32_t</b> <b>speed_hz)</b> <b>[extern]</b>
       Calculates the input for

       <b>See</b> <b>also</b>
           <b>bcm2835_aux_spi_setClockDivider</b>

       <b>Parameters</b>
           <u>speed_hz</u> A value between

       <b>See</b> <b>also</b>
           <b>BCM2835_AUX_SPI_CLOCK_MIN</b> and

           <b>BCM2835_AUX_SPI_CLOCK_MAX</b>

       <b>Returns</b>
           Input for

       <b>See</b> <b>also</b>
           <b>bcm2835_aux_spi_setClockDivider</b>

   <b>void</b> <b>bcm2835_aux_spi_end</b> <b>(void)</b> <b>[extern]</b>
       End AUX SPI operations. SPI1 pins P1-38 (MOSI), P1-38 (MISO), P1-40 (CLK) and P1-36 (CE2) are returned to
       their default INPUT behaviour.

   <b>void</b> <b>bcm2835_aux_spi_setClockDivider</b> <b>(uint16_t</b> <b>divider)</b> <b>[extern]</b>
       Sets the AUX SPI clock divider and therefore the AUX SPI clock speed.

       <b>Parameters</b>
           <u>divider</u> The desired AUX SPI clock divider.

   <b>uint8_t</b> <b>bcm2835_aux_spi_transfer</b> <b>(uint8_t</b> <b>value)</b> <b>[extern]</b>
       Transfers one byte to and from the AUX SPI slave. Clocks the 8 bit value out on MOSI, and simultaneously
       clocks in data from MISO. Returns the read data byte from the slave.

       <b>Parameters</b>
           <u>value</u> The 8 bit data byte to write to MOSI

       <b>Returns</b>
           The 8 bit byte simultaneously read from MISO

       <b>See</b> <b>also</b>
           <b>bcm2835_aux_spi_transfern()</b>

   <b>void</b> <b>bcm2835_aux_spi_transfern</b> <b>(char</b> <b>*</b> <b>buf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Transfers any number of bytes to and from the AUX SPI slave using bcm2835_aux_spi_transfernb. The
       returned data from the slave replaces the transmitted data in the buffer.

       <b>Parameters</b>
           <u>buf</u> Buffer of bytes to send. Received bytes will replace the contents
           <u>len</u> Number of bytes in the buffer, and the number of bytes to send/received

       <b>See</b> <b>also</b>
           <b>bcm2835_aux_spi_transfer()</b>

   <b>void</b> <b>bcm2835_aux_spi_transfernb</b> <b>(const</b> <b>char</b> <b>*</b> <b>tbuf,</b> <b>char</b> <b>*</b> <b>rbuf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Transfers any number of bytes to and from the AUX SPI slave. Asserts the CE2 pin during the transfer.
       Clocks the len 8 bit bytes out on MOSI, and simultaneously clocks in data from MISO. The data read read
       from the slave is placed into rbuf. rbuf must be at least len bytes long

       <b>Parameters</b>
           <u>tbuf</u> Buffer of bytes to send.
           <u>rbuf</u> Received bytes will by put in this buffer
           <u>len</u> Number of bytes in the tbuf buffer, and the number of bytes to send/received

   <b>void</b> <b>bcm2835_aux_spi_write</b> <b>(uint16_t</b> <b>data)</b> <b>[extern]</b>
       Transfers half-word to the AUX SPI slave. Asserts the currently selected CS pins during the transfer.

       <b>Parameters</b>
           <u>data</u> The 8 bit data byte to write to MOSI

       <b>Returns</b>
           The 16 bit byte simultaneously read from MISO

       <b>See</b> <b>also</b>
           <b>bcm2835_spi_transfern()</b>

   <b>void</b> <b>bcm2835_aux_spi_writenb</b> <b>(const</b> <b>char</b> <b>*</b> <b>buf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Transfers any number of bytes to the AUX SPI slave. Asserts the CE2 pin during the transfer.

       <b>Parameters</b>
           <u>buf</u> Buffer of bytes to send.
           <u>len</u> Number of bytes in the tbuf buffer, and the number of bytes to send

   <b>int</b> <b>bcm2835_spi_begin</b> <b>(void)</b> <b>[extern]</b>
       Start SPI operations. Forces RPi SPI0 pins P1-19 (MOSI), P1-21 (MISO), P1-23 (CLK), P1-24 (CE0) and P1-26
       (CE1) to alternate function ALT0, which enables those pins for SPI interface. You should call
       <b>bcm2835_spi_end()</b> when all SPI funcitons are complete to return the pins to their default functions.

       <b>See</b> <b>also</b>
           <b>bcm2835_spi_end()</b>

       <b>Returns</b>
           1 if successful, 0 otherwise (perhaps because you are not running as root)

   <b>void</b> <b>bcm2835_spi_chipSelect</b> <b>(uint8_t</b> <b>cs)</b> <b>[extern]</b>
       Sets the chip select pin(s) When an <b>bcm2835_spi_transfer()</b> is made, the selected pin(s) will be asserted
       during the transfer.

       <b>Parameters</b>
           <u>cs</u> Specifies the CS pins(s) that are used to activate the desired slave. One of BCM2835_SPI_CS*, see
           <b>bcm2835SPIChipSelect</b>

   <b>void</b> <b>bcm2835_spi_end</b> <b>(void)</b> <b>[extern]</b>
       End SPI operations. SPI0 pins P1-19 (MOSI), P1-21 (MISO), P1-23 (CLK), P1-24 (CE0) and P1-26 (CE1) are
       returned to their default INPUT behaviour.

   <b>void</b> <b>bcm2835_spi_set_speed_hz</b> <b>(uint32_t</b> <b>speed_hz)</b> <b>[extern]</b>
       Sets the SPI clock divider by converting the speed parameter to the equivalent SPI clock divider. ( see

       <b>See</b> <b>also</b>
           <b>bcm2835_spi_setClockDivider</b>)

       <b>Parameters</b>
           <u>speed_hz</u> The desired SPI clock speed in Hz

   <b>void</b> <b>bcm2835_spi_setBitOrder</b> <b>(uint8_t</b> <b>order)</b> <b>[extern]</b>
       Sets the SPI bit order Set the bit order to be used for transmit and receive. The bcm2835 SPI0 only
       supports BCM2835_SPI_BIT_ORDER_MSB, so if you select BCM2835_SPI_BIT_ORDER_LSB, the bytes will be
       reversed in software. The library defaults to BCM2835_SPI_BIT_ORDER_MSB.

       <b>Parameters</b>
           <u>order</u> The desired bit order, one of BCM2835_SPI_BIT_ORDER_*, see <b>bcm2835SPIBitOrder</b>

   <b>void</b> <b>bcm2835_spi_setChipSelectPolarity</b> <b>(uint8_t</b> <b>cs,</b> <b>uint8_t</b> <b>active)</b> <b>[extern]</b>
       Sets the chip select pin polarity for a given pin When an <b>bcm2835_spi_transfer()</b> occurs, the currently
       selected chip select pin(s) will be asserted to the value given by active. When transfers are not
       happening, the chip select pin(s) return to the complement (inactive) value.

       <b>Parameters</b>
           <u>cs</u> The chip select pin to affect
           <u>active</u> Whether the chip select pin is to be active HIGH

   <b>void</b> <b>bcm2835_spi_setClockDivider</b> <b>(uint16_t</b> <b>divider)</b> <b>[extern]</b>
       Sets the SPI clock divider and therefore the SPI clock speed.

       <b>Parameters</b>
           <u>divider</u> The desired SPI clock divider, one of BCM2835_SPI_CLOCK_DIVIDER_*, see <b>bcm2835SPIClockDivider</b>

   <b>void</b> <b>bcm2835_spi_setDataMode</b> <b>(uint8_t</b> <b>mode)</b> <b>[extern]</b>
       Sets the SPI data mode Sets the clock polariy and phase

       <b>Parameters</b>
           <u>mode</u> The desired data mode, one of BCM2835_SPI_MODE*, see <b>bcm2835SPIMode</b>

   <b>uint8_t</b> <b>bcm2835_spi_transfer</b> <b>(uint8_t</b> <b>value)</b> <b>[extern]</b>
       Transfers one byte to and from the currently selected SPI slave. Asserts the currently selected CS pins
       (as previously set by bcm2835_spi_chipSelect) during the transfer. Clocks the 8 bit value out on MOSI,
       and simultaneously clocks in data from MISO. Returns the read data byte from the slave. Uses polled
       transfer as per section 10.6.1 of the BCM 2835 ARM Peripherls manual

       <b>Parameters</b>
           <u>value</u> The 8 bit data byte to write to MOSI

       <b>Returns</b>
           The 8 bit byte simultaneously read from MISO

       <b>See</b> <b>also</b>
           <b>bcm2835_spi_transfern()</b>

   <b>void</b> <b>bcm2835_spi_transfern</b> <b>(char</b> <b>*</b> <b>buf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Transfers any number of bytes to and from the currently selected SPI slave using bcm2835_spi_transfernb.
       The returned data from the slave replaces the transmitted data in the buffer.

       <b>Parameters</b>
           <u>buf</u> Buffer of bytes to send. Received bytes will replace the contents
           <u>len</u> Number of bytes int eh buffer, and the number of bytes to send/received

       <b>See</b> <b>also</b>
           <b>bcm2835_spi_transfer()</b>

   <b>void</b> <b>bcm2835_spi_transfernb</b> <b>(char</b> <b>*</b> <b>tbuf,</b> <b>char</b> <b>*</b> <b>rbuf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Transfers any number of bytes to and from the currently selected SPI slave. Asserts the currently
       selected CS pins (as previously set by bcm2835_spi_chipSelect) during the transfer. Clocks the len 8 bit
       bytes out on MOSI, and simultaneously clocks in data from MISO. The data read read from the slave is
       placed into rbuf. rbuf must be at least len bytes long Uses polled transfer as per section 10.6.1 of the
       BCM 2835 ARM Peripherls manual

       <b>Parameters</b>
           <u>tbuf</u> Buffer of bytes to send.
           <u>rbuf</u> Received bytes will by put in this buffer
           <u>len</u> Number of bytes in the tbuf buffer, and the number of bytes to send/received

       <b>See</b> <b>also</b>
           <b>bcm2835_spi_transfer()</b>

   <b>void</b> <b>bcm2835_spi_write</b> <b>(uint16_t</b> <b>data)</b> <b>[extern]</b>
       Transfers half-word to the currently selected SPI slave. Asserts the currently selected CS pins (as
       previously set by bcm2835_spi_chipSelect) during the transfer. Clocks the 8 bit value out on MOSI, and
       simultaneously clocks in data from MISO. Uses polled transfer as per section 10.6.1 of the BCM 2835 ARM
       Peripherls manual

       <b>Parameters</b>
           <u>data</u> The 8 bit data byte to write to MOSI

       <b>See</b> <b>also</b>
           <b>bcm2835_spi_writenb()</b>

   <b>void</b> <b>bcm2835_spi_writenb</b> <b>(const</b> <b>char</b> <b>*</b> <b>buf,</b> <b>uint32_t</b> <b>len)</b> <b>[extern]</b>
       Transfers any number of bytes to the currently selected SPI slave. Asserts the currently selected CS pins
       (as previously set by bcm2835_spi_chipSelect) during the transfer.

       <b>Parameters</b>
           <u>buf</u> Buffer of bytes to send.
           <u>len</u> Number of bytes in the buf buffer, and the number of bytes to send

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for bcm2835 from the source code.

bcm2835                                           Version 1.75                                            <u><a href="../man3/spi.3.html">spi</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>