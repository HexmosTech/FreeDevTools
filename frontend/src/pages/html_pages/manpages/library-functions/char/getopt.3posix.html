<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       getopt, optarg, opterr, optind, optopt — command option parsing

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;

       int getopt(int <u>argc</u>, char * const <u>argv</u>[], const char *<u>optstring</u>);
       extern char *optarg;
       extern int opterr, optind, optopt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>getopt</u>() function is a command-line parser that shall follow Utility Syntax Guidelines 3, 4, 5, 6, 7,
       9, and 10 in the Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>12.2</u>, <u>Utility</u> <u>Syntax</u> <u>Guidelines</u>.

       The  parameters <u>argc</u> and <u>argv</u> are the argument count and argument array as passed to <u>main</u>() (see <u>exec</u>()).
       The argument <u>optstring</u> is a string of recognized option characters; if  a  character  is  followed  by  a
       &lt;colon&gt;,  the  option  takes an argument. All option characters allowed by Utility Syntax Guideline 3 are
       allowed in <u>optstring</u>.  The implementation may accept other characters as an extension.

       The variable <u>optind</u> is the index of the next element of the <u>argv</u>[] vector to be processed.  It  shall  be
       initialized  to  1  by  the  system,  and  <u>getopt</u>() shall update it when it finishes with each element of
       <u>argv</u>[].  If the application sets <u>optind</u> to zero before calling <u>getopt</u>(),  the  behavior  is  unspecified.
       When  an element of <u>argv</u>[] contains multiple option characters, it is unspecified how <u>getopt</u>() determines
       which options have already been processed.

       The <u>getopt</u>() function shall return the next option character (if one is found) from <u>argv</u> that  matches  a
       character in <u>optstring</u>, if there is one that matches. If the option takes an argument, <u>getopt</u>() shall set
       the variable <u>optarg</u> to point to the option-argument as follows:

        1. If  the  option  was  the  last character in the string pointed to by an element of <u>argv</u>, then <u>optarg</u>
           shall contain the next element of <u>argv</u>, and <u>optind</u> shall be incremented by 2. If the resulting  value
           of  <u>optind</u>  is greater than <u>argc</u>, this indicates a missing option-argument, and <u>getopt</u>() shall return
           an error indication.

        2. Otherwise, <u>optarg</u> shall point to the string following the option character in that element  of  <u>argv</u>,
           and <u>optind</u> shall be incremented by 1.

       If, when <u>getopt</u>() is called:

            <u>argv</u>[optind]  is a null pointer
           *<u>argv</u>[optind]  is not the character -
            <u>argv</u>[optind]  points to the string "-"

       <u>getopt</u>() shall return -1 without changing <u>optind</u>.  If:

           <u>argv</u>[optind]   points to the string "--"

       <u>getopt</u>() shall return -1 after incrementing <u>optind</u>.

       If  <u>getopt</u>()  encounters  an  option  character  that  is not contained in <u>optstring</u>, it shall return the
       &lt;question-mark&gt; (<b>'?'</b>)  character. If it detects a missing option-argument, it shall  return  the  &lt;colon&gt;
       character  (<b>':'</b>)  if the first character of <u>optstring</u> was a &lt;colon&gt;, or a &lt;question-mark&gt; character (<b>'?'</b>)
       otherwise. In either case, <u>getopt</u>() shall set the variable <u>optopt</u> to the option character that caused the
       error. If the application has not set the variable <u>opterr</u> to 0 and the first character  of  <u>optstring</u>  is
       not  a  &lt;colon&gt;, <u>getopt</u>() shall also print a diagnostic message to <u>stderr</u> in the format specified for the
       <u>getopts</u> utility, unless the <u>stderr</u> stream has wide orientation, in which case the behavior is undefined.

       The <u>getopt</u>() function need not be thread-safe.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <u>getopt</u>() function shall return the next option character specified on the command line.

       A &lt;colon&gt; (<b>':'</b>) shall be returned if <u>getopt</u>() detects a missing  argument  and  the  first  character  of
       <u>optstring</u> was a &lt;colon&gt; (<b>':'</b>).

       A &lt;question-mark&gt; (<b>'?'</b>)  shall be returned if <u>getopt</u>() encounters an option character not in <u>optstring</u> or
       detects a missing argument and the first character of <u>optstring</u> was not a &lt;colon&gt; (<b>':'</b>).

       Otherwise, <u>getopt</u>() shall return -1 when all command line options are parsed.

</pre><h4><b>ERRORS</b></h4><pre>
       If  the  application  has  not  set  the  variable <u>opterr</u> to 0, the first character of <u>optstring</u> is not a
       &lt;colon&gt;, and a write error occurs while <u>getopt</u>() is printing a diagnostic message  to  <u>stderr</u>,  then  the
       error  indicator  for  <u>stderr</u> shall be set; but <u>getopt</u>() shall still succeed and the value of <u>errno</u> after
       <u>getopt</u>() is unspecified.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Parsing</b> <b>Command</b> <b>Line</b> <b>Options</b>
       The following code fragment shows how you might process the arguments for a utility  that  can  take  the
       mutually-exclusive options <u>a</u> and <u>b</u> and the options <u>f</u> and <u>o</u>, both of which require arguments:

           #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
           #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
           #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;

           int
           main(int argc, char *argv[ ])
           {
               int c;
               int bflg = 0, aflg = 0, errflg = 0;
               char *ifile;
               char *ofile;
               . . .
               while ((c = getopt(argc, argv, ":abf:o:")) != -1) {
                   switch(c) {
                   case 'a':
                       if (bflg)
                           errflg++;
                       else
                           aflg++;
                       break;
                   case 'b':
                       if (aflg)
                           errflg++;
                       else
                           bflg++;
                       break;
                   case 'f':
                       ifile = optarg;
                       break;
                   case 'o':
                       ofile = optarg;
                       break;
                   case ':':       /* -f or -o without operand */
                       fprintf(stderr,
                           "Option -%c requires an operand\n", optopt);
                       errflg++;
                       break;
                   case '?':
                       fprintf(stderr,
                           "Unrecognized option: '-%c'\n", optopt);
                       errflg++;
                   }
               }
               if (errflg) {
                   fprintf(stderr, "usage: . . . ");
                   <a href="../man2/exit.2.html">exit</a>(2);
               }
               for ( ; optind &lt; argc; optind++) {
                   if (access(argv[optind], R_OK)) {
               . . .
           }

       This code accepts any of the following as equivalent:

           cmd -ao arg path path
           cmd -a -o arg path path
           cmd -o arg -a path path
           cmd -a -o arg -- path path
           cmd -a -oarg path path
           cmd -aoarg path path

   <b>Selecting</b> <b>Options</b> <b>from</b> <b>the</b> <b>Command</b> <b>Line</b>
       The  following  example  selects the type of database routines the user wants to use based on the <u>Options</u>
       argument.

           #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;
           #include &lt;<a href="file:/usr/include/string.h">string.h</a>&gt;
           ...
           const char *Options = "hdbtl";
           ...
           int dbtype, c;
           char *st;
           ...
           dbtype = 0;
           while ((c = getopt(argc, argv, Options)) != -1) {
               if ((st = strchr(Options, c)) != NULL) {
                   dbtype = st - Options;
                   break;
               }
           }

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       The <u>getopt</u>() function is only required to support option characters included in Utility Syntax  Guideline
       3.  Many  historical  implementations of <u>getopt</u>() support other characters as options. This is an allowed
       extension, but applications that use extensions are not maximally portable. Note that support for  multi-
       byte option characters is only possible when such characters can be represented as type <b>int</b>.

       Applications  which  use  wide-character  output  functions  with  <u>stderr</u> should ensure that any calls to
       <u>getopt</u>() do not write to <u>stderr</u>, either by setting <u>opterr</u> to 0 or by  ensuring  the  first  character  of
       <u>optstring</u> is always a &lt;colon&gt;.

       While <u>ferror</u>(<u>stderr</u>) may be used to detect failures to write a diagnostic to <u>stderr</u> when <u>getopt</u>() returns
       <b>'?'</b>,  the  value  of  <u>errno</u>  is  unspecified in such a condition. Applications desiring more control over
       handling write failures should set <u>opterr</u> to 0 and independently perform output to  <u>stderr</u>,  rather  than
       relying on <u>getopt</u>() to do the output.

</pre><h4><b>RATIONALE</b></h4><pre>
       The  <u>optopt</u>  variable represents historical practice and allows the application to obtain the identity of
       the invalid option.

       The description has been written to make it clear that <u>getopt</u>(), like the  <u>getopts</u>  utility,  deals  with
       option-arguments  whether  separated  from  the  option  by  &lt;blank&gt;  characters  or  not.  Note that the
       requirements on <u>getopt</u>() and <u>getopts</u> are more stringent than the Utility Syntax Guidelines.

       The <u>getopt</u>() function shall return -1, rather than EOF, so that <u>&lt;stdio.h&gt;</u> is not required.

       The special significance of a &lt;colon&gt; as the first character of <u>optstring</u> makes <u>getopt</u>() consistent  with
       the  <u>getopts</u>  utility.  It  allows an application to make a distinction between a missing argument and an
       incorrect option letter without having to examine the option letter. It is true that a  missing  argument
       can only be detected in one case, but that is a case that has to be considered.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>exec</u>

       The Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>12.2</u>, <u>Utility</u> <u>Syntax</u> <u>Guidelines</u>, <b>&lt;unistd.h&gt;</b>

       The Shell and Utilities volume of POSIX.1‐2017, <u>getopts</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                        <u><a href="../man3POSIX/GETOPT.3POSIX.html">GETOPT</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>