<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ldap_dup, ldap_destroy, - Duplicate and destroy LDAP session handles</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libldap-dev">libldap-dev_2.6.9+dfsg-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ldap_dup, ldap_destroy, - Duplicate and destroy LDAP session handles

</pre><h4><b>LIBRARY</b></h4><pre>
       OpenLDAP LDAP (libldap, -lldap)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;ldap.h&gt;</b>

       <b>LDAP</b> <b>*ldap_dup(</b>
              <b>LDAP</b> <b>*</b><u>old</u> <b>);</b>

       <b>int</b> <b>ldap_destroy(</b>
              <b>LDAP</b> <b>*</b><u>old</u> <b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ldap_dup()</b>  duplicates  an  existing  LDAP  (<b>LDAP</b>  <b>*</b>) session handle.  The new session handle may be used
       concurrently with the original session handle.  In a threaded environment, different threads may  execute
       concurrent  requests  on  the same connection/session without fear of contamination.  Each session handle
       manages its own private error results.

       <b>ldap_destroy()</b> destroys an existing session handle.

       The <b>ldap_dup()</b> and <b>ldap_destroy()</b> functions are used in conjunction  with  a  "thread  safe"  version  of
       <b>libldap</b>  to  enable  operation thread safe API calls, so that a single session may be simultaneously used
       across multiple threads with consistent error handling.

       When a session  is  created  through  the  use  of  one  of  the  session  creation  functions  including
       <b><a href="../man3/ldap_open.3.html">ldap_open</a></b>(3), <b><a href="../man3/ldap_init.3.html">ldap_init</a></b>(3), <b><a href="../man3/ldap_initialize.3.html">ldap_initialize</a></b>(3) or <b><a href="../man3/ldap_init_fd.3.html">ldap_init_fd</a></b>(3) an <b>LDAP</b> <b>*</b> session handle is returned to
       the application.  The session handle may be shared amongst threads, however the error codes are unique to
       a  session  handle.   Multiple threads performing different operations using the same session handle will
       result in inconsistent error codes and return values.

       To prevent this confusion, <b>ldap_dup()</b> is used duplicate an  existing  session  handle  so  that  multiple
       threads can share the session, and maintain consistent error information and results.

       The  message queues for a session are shared between sibling session handles.  Results of operations on a
       sibling session handles are accessible to all the sibling session handles.  Applications desiring results
       associated with a specific operation should provide the appropriate msgid to <b>ldap_result()</b>.  Applications
       should avoid calling <b>ldap_result()</b> with <b>LDAP_RES_ANY</b> as that  may  "steal"  and  return  results  in  the
       calling  thread  that  another  operation  in  a  different thread, using a different session handle, may
       require to complete.

       When <b>ldap_unbind()</b> is called on a session handle with siblings, all the siblings become invalid.

       Siblings must be destroyed using <b>ldap_destroy()</b>.  Session handle resources associated with  the  original
       (<b>LDAP</b>  <b>*</b>)  will be freed when the last session handle is destroyed or when <b>ldap_unbind()</b> is called, if no
       other session handles currently exist.

</pre><h4><b>ERRORS</b></h4><pre>
       If an error occurs, <b>ldap_dup()</b> will return NULL and <u>errno</u> should be  set  appropriately.   <b>ldap_destroy()</b>
       will  directly  return  the LDAP code associated to the error (or <u>LDAP_SUCCESS</u> in case of success); <u>errno</u>
       should be set as well whenever appropriate.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ldap_open.3.html">ldap_open</a></b>(3), <b><a href="../man3/ldap_init.3.html">ldap_init</a></b>(3), <b><a href="../man3/ldap_initialize.3.html">ldap_initialize</a></b>(3), <b><a href="../man3/ldap_init_fd.3.html">ldap_init_fd</a></b>(3), <b><a href="../man3/errno.3.html">errno</a></b>(3)

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       This work is based on the previously proposed <b>LDAP</b> <b>C</b> <b>API</b> <b>Concurrency</b>  <b>Extensions</b>  draft  <b>(</b>draft-zeilenga-
       ldap-c-api-concurrency-00.txt<b>)</b>  effort.   <b>OpenLDAP</b>  <b>Software</b>  is developed and maintained by The OpenLDAP
       Project &lt;<a href="http://www.openldap.org/">http://www.openldap.org/</a>&gt;.  <b>OpenLDAP</b> <b>Software</b> is derived from the University  of  Michigan  LDAP
       3.3 Release.

OpenLDAP 2.6.9+dfsg-2ubuntu1                       2024/11/26                                       <u><a href="../man3/LDAP_OPEN.3.html">LDAP_OPEN</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>