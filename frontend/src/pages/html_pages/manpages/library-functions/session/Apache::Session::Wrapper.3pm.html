<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apache::Session::Wrapper - A simple wrapper around Apache::Session</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libapache-session-wrapper-perl">libapache-session-wrapper-perl_0.34-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Apache::Session::Wrapper - A simple wrapper around Apache::Session

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $wrapper =
            Apache::Session::Wrapper-&gt;new( class  =&gt; 'MySQL',
                                           handle =&gt; $dbh,
                                           cookie_name =&gt; 'example-dot-com-cookie',
                                         );

        # will get an existing session from a cookie, or create a new session
        # and cookie if needed
        $wrapper-&gt;session-&gt;{foo} = 1;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module is a simple wrapper around Apache::Session which provides some methods to simplify getting
       and setting the session id.

       It can uses cookies to store the session id, or it can look in a provided object for a specific
       parameter.  Alternately, you can simply provide the session id yourself in the call to the "session()"
       method.

       If you're using Mason, you should probably take a look at "MasonX::Request::WithApacheSession" first,
       which integrates this module directly into Mason.

</pre><h4><b>METHODS</b></h4><pre>
       This class provides the following public methods:

       •   new

           This method creates a new "Apache::Session::Wrapper" object.

           If  the  parameters  you  provide are not correct (wrong type, missing parameters, etc.), this method
           throws an "Apache::Session::Wrapper::Exception::Params" exception.  You can treat this exception as a
           string if you want.

       •   session

           This method returns a hash tied to the "Apache::Session" class.

           This method accepts an optional "session_id" parameter.

       •   delete_session

           This method deletes the existing session from persistent storage.  If  you  are  using  the  built-in
           cookie handling, it also deletes the cookie in the browser.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       This  module  accepts  quite  a  number  of  parameters,  most  of  which  are  simply  passed through to
       "Apache::Session".  For this reason, you are advised to familiarize yourself with  the  "Apache::Session"
       documentation before attempting to configure this module.

       You   can  also  register  "Apache::Session"  classes,  or  the  classes  used  for  doing  the  work  in
       "Apache::Session::Flex". See REGISTERING CLASSES for details.

   <b>Supported</b> <b>Classes</b>
       The following classes are already supported and do not require registration:

       •   Apache::Session::MySQL

       •   Apache::Session::Postgres

       •   Apache::Session::Oracle

       •   Apache::Session::Informix

       •   Apache::Session::Sybase

       •   Apache::Session::File

       •   Apache::Session::DB_File

       •   Apache::Session::PHP

       •   Apache::Session::Flex

       The following classes can be used with "Apache::Session::Flex":

       •   Apache::Session::Store::MySQL

       •   Apache::Session::Store::Postgres

       •   Apache::Session::Store::Informix

       •   Apache::Session::Store::Oracle

       •   Apache::Session::Store::Sybase

       •   Apache::Session::Store::File

       •   Apache::Session::Store::DB_File

       •   Apache::Session::Store::PHP

       •   Apache::Session::Lock::MySQL

       •   Apache::Session::Lock::File

       •   Apache::Session::Lock::Null

       •   Apache::Session::Lock::Semaphore

       •   Apache::Session::Generate::MD5

       •   Apache::Session::Generate::ModUsertrack

       •   Apache::Session::Serialize::Storable

       •   Apache::Session::Serialize::Base64

       •   Apache::Session::Serialize::Sybase

       •   Apache::Session::Serialize::UUEncode

       •   Apache::Session::Serialize::PHP

   <b>Generic</b> <b>Parameters</b>
       •   class  =&gt;  class name

           The name of the "Apache::Session" subclass you would like to use.

           This module will load this class for you if necessary.

           This parameter is required.

       •   always_write  =&gt;  boolean

           If this is true, then this module will ensure that "Apache::Session" writes the session.   If  it  is
           false, the default "Apache::Session" behavior is used instead.

           This defaults to true.

       •   allow_invalid_id  =&gt;  boolean

           If  this is true, an attempt to create a session with a session id that does not exist in the session
           storage will  be  ignored,  and  a  new  session  will  be  created  instead.   If  it  is  false,  a
           "Apache::Session::Wrapper::Exception::NonExistentSessionID" exception will be thrown instead.

           This defaults to true.

       •   session_id  =&gt;  string

           Try  this session id first and use it if it exist. If the session does not exist, it will ignore this
           parameter and make a new session.

   <b>Cookie-Related</b> <b>Parameters</b>
       •   use_cookie  =&gt;  boolean

           If true, then this module will use one of "Apache::Cookie", "Apache2::Cookie"  or  "CGI::Cookie"  (as
           appropriate) to set and read cookies that contain the session id.

       •   cookie_name  =&gt;  name

           This  is the name of the cookie that this module will set.  This defaults to "Apache-Session-Wrapper-
           cookie".  Corresponds to the "Apache::Cookie" "-name" constructor parameter.

       •   cookie_expires  =&gt;  expiration

           How long before the cookie expires.  This defaults to 1 day, "+1d".  Corresponds  to  the  "-expires"
           parameter.

           As a special case, you can set this value to "session" to have the "-expires" parameter set to undef,
           which gives you a cookie that expires at the end of the session.

       •   cookie_domain  =&gt;  domain

           This  corresponds  to  the  "-domain"  parameter.   If  not given this will not be set as part of the
           cookie.

           If it is undefined, then no "-domain" parameter will be given.

       •   cookie_path  =&gt;  path

           Corresponds to the "-path" parameter.  It defaults to "/".

       •   cookie_secure  =&gt;  boolean

           Corresponds to the "-secure" parameter.  It defaults to false.

       •   cookie_resend  =&gt;  boolean

           By default, this parameter is true, and the cookie will be sent for <u>every</u> <u>request</u>.  If it  is  false,
           then  the  cookie  will only be sent when the session is <u>created</u>.  This is important as resending the
           cookie has the effect of updating the expiration time.

       •   header_object =&gt; object

           When running outside of mod_perl, you must provide an object to which the cookie header can be added.
           This object must provide an "err_headers_out()" or "headers_out()" method.

           Under mod_perl 1, this will default to the object returned by "Apache-&gt;request()". Under  mod_perl  2
           we call "Apache2::RequestUtil-&gt;request()"

   <b>Query/POST-Related</b> <b>Parameters</b>
       •   param_name  =&gt;  name

           If  set,  then  this  module  will  first  look  for  the  session  id  in  the  object specified via
           "param_object".  This parameter determines the name of the parameter that is checked.

           If you are also using cookies, then the module checks the param object <u>first</u>, and then it checks  for
           a cookie.

       •   param_object  =&gt;  object

           This  should be an object that provides a "param()" method.  This object will be checked to see if it
           contains the parameter  named  in  "params_name".   This  object  will  probably  be  a  "CGI.pm"  or
           "Apache::Request" object, but it doesn't have to be.

   <b>Apache::Session-related</b> <b>Parameters</b>
       These parameters are simply passed through to "Apache::Session".

       •   data_source  =&gt;  DSN

           Corresponds to the "DataSource" parameter passed to the DBI-related session modules.

       •   user_name  =&gt;  user name

           Corresponds to the "UserName" parameter passed to the DBI-related session modules.

       •   password  =&gt;  password

           Corresponds  to  the  "Password"  parameter  passed  to the DBI-related session modules.  Defaults to
           undef.

       •   handle =&gt;  DBI handle

           Corresponds to the "Handle" parameter passed to the DBI-related session modules.  This cannot be  set
           via  the  <u>httpd.conf</u>  file,  because  it  needs  to  be an <u>actual</u> <u>Perl</u> <u>variable</u>, not the <u>name</u> of that
           variable.

       •   table_name  =&gt;  table name

           Corresponds to the "TableName" paramaeter passed to DBI-related modules.

       •   lock_data_source  =&gt;  DSN

           Corresponds to the "LockDataSource" parameter passed to "Apache::Session::MySQL".

       •   lock_user_name  =&gt;  user name

           Corresponds to the "LockUserName" parameter passed to "Apache::Session::MySQL".

       •   lock_password  =&gt;  password

           Corresponds to the "LockPassword" parameter passed to "Apache::Session::MySQL".  Defaults to undef.

       •   lock_handle  =&gt;  DBI handle

           Corresponds to the "LockHandle" parameter passed to the DBI-related session  modules.   As  with  the
           "handle" parameter, this cannot be set via the <u>httpd.conf</u> file.

       •   commit =&gt;  boolean

           Corresponds to the "Commit" parameter passed to the DBI-related session modules.

       •   transaction  =&gt;  boolean

           Corresponds to the "Transaction" parameter.

       •   directory  =&gt;  directory

           Corresponds to the "Directory" parameter passed to "Apache::Session::File".

       •   lock_directory  =&gt;  directory

           Corresponds to the "LockDirectory" parameter passed to "Apache::Session::File".

       •   file_name  =&gt;  file name

           Corresponds to the "FileName" parameter passed to "Apache::Session::DB_File".

       •   store  =&gt;  class

           Corresponds to the "Store" parameter passed to "Apache::Session::Flex".

       •   lock  =&gt;  class

           Corresponds to the "Lock" parameter passed to "Apache::Session::Flex".

       •   generate  =&gt;  class

           Corresponds to the "Generate" parameter passed to "Apache::Session::Flex".

       •   serialize  =&gt;  class

           Corresponds to the "Serialize" parameter passed to "Apache::Session::Flex".

       •   textsize  =&gt;  size

           Corresponds to the "textsize" parameter passed to "Apache::Session::Sybase".

       •   long_read_len  =&gt;  size

           Corresponds to the "LongReadLen" parameter passed to "Apache::Session::MySQL".

       •   n_sems  =&gt;  number

           Corresponds to the "NSems" parameter passed to "Apache::Session::Lock::Semaphore".

       •   semaphore_key  =&gt;  key

           Corresponds to the "SemaphoreKey" parameter passed to "Apache::Session::Lock::Semaphore".

       •   mod_usertrack_cookie_name  =&gt;  name

           Corresponds        to        the       "ModUsertrackCookieName"       parameter       passed       to
           "Apache::Session::Generate::ModUsertrack".

       •   save_path  =&gt;  path

           Corresponds to the "SavePath" parameter passed to "Apache::Session::PHP".

</pre><h4><b>HOW</b> <b>COOKIES</b> <b>ARE</b> <b>HANDLED</b></h4><pre>
       When run under mod_perl,  this  module  attempts  to  first  use  "Apache::Cookie"  for  cookie-handling.
       Otherwise it uses "CGI::Cookie" as a fallback.

       If  it  ends  up  using "CGI::Cookie" then you must provide a "header_object" parameter. This object must
       have an "err_headers_out()" or "headers_out()" method. It looks for these  methods  in  that  order.  The
       method is expected to return an object with an API like "Apache::Table". It calls "add()" on the returned
       method to add a "Set-Cookie" header.

</pre><h4><b>REGISTERING</b> <b>CLASSES</b></h4><pre>
       In  order  to  support  any  "Apache::Session"  subclasses,  this  module  provides a simple registration
       mechanism.

       You can register an "Apache::Session" subclass, or a class intended to provide a  class  that  implements
       something required by "Apache::Session::Flex".

   <b>Registering</b> <b>a</b> <b>Complete</b> <b>Subclass</b>
       This is done by calling "Apache::Session::Wrapper-&gt;RegisterClass()":

         Apache::Session::Wrapper-&gt;RegisterClass
             ( name     =&gt; 'MyClass',
               required =&gt; [ [ qw( param1 param2 ) ],
                             [ qw( param3 param4 ) ] ],
               optional =&gt; [ 'optional_p' ],
             );

         Apache::Session::Wrapper-&gt;RegisterClass
             ( name     =&gt; 'Apache::Session::MyFile',
               required =&gt; 'File',
               optional =&gt; 'File',
             );

       The "RegisterClass()" method takes the following options:

       •   name

           This  should  be  the  name  of  the  class  you  are  registering.  The actual class must start with
           "Apache::Session::", but this part does not need to be included  when  registering  the  class  (it's
           optional).

       •   required

           These are the required parameters for this class.

           The value of this parameter can either be a string or a reference to an array of array references.

           If  it  is  a  string,  then  it  identifies  an existing "Apache::Session" subclass which is already
           registered or built-in, like "File" or "Postgres".

           If it an array reference, then <u>that</u> <u>reference</u> should in turn contain one or  more  array  references.
           Each   of   those   contained   references  represents  one  set  of  required  parameters.  When  an
           "Apache::Session::Wrapper" object is constructed, only one of these  sets  must  be  passed  in.  For
           example:

             required =&gt; [ [ qw( p1 p2 ) ],
                           [ qw( p2 p3 p4 ) ] ]

           This says that either "p1" and "p2" must be provided, <u>or</u> "p2", "p3", and "p4".

           If there are no required parameters for this class, then the "required" parameter can be omitted.

       •   optional

           This specifies optional parameters, and should just be a simple array reference.

   <b>Registering</b> <b>a</b> <b>Subclass</b> <b>for</b> <b>Flex</b>
       Registering  a  subclass  that  can be used with "Apache::Session::Flex" is very similar to registering a
       complete class:

         Apache::Session::Wrapper-&gt;RegisterFlexClass
             ( name     =&gt; 'MyClass',
               type     =&gt; 'Store',
               required =&gt; [ [ qw( param1 param2 ) ],
                             [ qw( param3 param4 ) ] ],
               optional =&gt; [ 'optional_p' ],
             );

         Apache::Session::Wrapper-&gt;RegisterFlexClass
             ( name     =&gt; 'Apache::Session::Store::MyFile',
               type     =&gt; 'store',
               required =&gt; 'File',
               optional =&gt; 'File',
             );

       The "RegisterFlexClass()" method has the same parameters as "RegisterClass()", but  it  also  requires  a
       "type" parameter. This must be one of "store", "lock", "generate", or "serialize".

</pre><h4><b>SUBCLASSING</b></h4><pre>
       This  class  provides  a  simple  hook for subclasses.  Before trying to get a session id from the URL or
       cookie, it calls a method named "_get_session_id()".  In this class, that method is a no-op, but you  can
       override this in a subclass.

       This  class  is  a  "Class::Container"  subclass, so if you accept additional constructor parameters, you
       should declare them via the "valid_params()" method.

</pre><h4><b>SUPPORT</b></h4><pre>
       As can be seen by the number of parameters above, "Apache::Session" has <b>way</b> too many possibilities for me
       to test all of them.  This means there are almost certainly bugs.

       Please        submit        bugs         to         the         CPAN         RT         system         at
       <a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=Apache%3A%3ASession%3A%3AWrapper    or    via   email   at
       <a href="mailto:bug-apache-session-wrapper@rt.cpan.org">bug-apache-session-wrapper@rt.cpan.org</a>.

       Support questions can be sent to me at my email address, shown below.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dave Rolsky, &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2003-2006 David Rolsky.  All rights reserved.  This  program  is  free  software;  you  can
       redistribute it and/or modify it under the same terms as Perl itself.

       The full text of the license can be found in the LICENSE file included with this module.

perl v5.34.0                                       2022-06-06                      <u>Apache::Session::<a href="../man3pm/Wrapper.3pm.html">Wrapper</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>