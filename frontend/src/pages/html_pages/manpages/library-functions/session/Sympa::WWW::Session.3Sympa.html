<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sympa::WWW::Session - Web session</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sympa">sympa_6.2.76~dfsg-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Sympa::WWW::Session - Web session

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Sympa::WWW::Session;

         my $session = Sympa::WWW::Session-&gt;new($robot,
             {cookie =&gt; Sympa::WWW::Session::get_session_cookie($ENV{'HTTP_COOKIE'})}
         );
         $session-&gt;renew();
         $session-&gt;store();

   <b>Confirmation</b>
         $session-&gt;confirm_action($action, 'init');

         sub do_myaction {

             # Validate arguments...

             $param-&gt;{arg} = $arg;
             my $next_action = $session-&gt;confirm_action($action, $response,
                 $arg, $previous_action);
             return $next_action unless $next_action eq '1';

             # Process action...

         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Sympa::WWW::Session provides web session for Sympa web interface.  HTTP cookie is required to determine
       users.  Session store is used to keep users' personal data.

   <b>Methods</b>
       new ( $robot, { [ cookie =&gt; $cookie ], ... } )
           <u>Constructor</u>.  Creates new instance and loads user data from session store.

           Parameters:

           $robot
               Context of the session.

           { cookie =&gt; $cookie }
               HTTP cookie.

           Returns:

           A new instance.

       as_hashref ( )
           <u>Instance</u> <u>method</u>.  Casts the instance to hashref.

           Parameters:

           None.

           Returns:

           A hashref including attributes of instance (see "Attributes").

       confirm_action ( $action, $response, [ arg =&gt; $arg, ] [ previous_action =&gt; $previous_action ] )
           <u>Instance</u> <u>method</u>.  Check if action has been confirmed.

           Confirmation follows two steps:

           1.  The  method  is  called  with  no  (undefined)  response.   The  action,  hash  of  argument  and
               previous_action are stored into session store.  And then this method returns 'confirm_action'.

           2.  The method is called with 'confirm' or other true value as  response.   <u>If</u>  action  and  hash  of
               argument match with those in session store, and:

               •   If 'confirm' is given, returns 1.

               •   If   other   true   value   is  given,  returns  previous  action  stored  in  session  store
                   (previous_action given in argument is ignored).

               In both cases session store is cleared.

           Anytime when the action submitted by user is determined, This method may be called with  response  as
           'init'.   In  this  case,  if  action doesn't match with that in session store, session store will be
           cleared.

           Parameters:

           $action
               Action to be checked.

           $response
               Response from user: 'init', false value (not yet  checked),  'confirm'  and  others  (cancelled).
               This may typically be given by user using "response_action" parameter.

           arg =&gt; $arg
               Argument(s) of action.

           previous_action =&gt; $previous_action
               The  action  users will be redirected when action is confirmed.  This may typically given by user
               using "previous_action" parameter.

       is_anonymous ( )
           <u>Instance</u> <u>method</u>.  TBD.

       renew ( )
           <u>Instance</u> <u>method</u>.  Renews the session.  Updates internal session ID and HTTP cookie.

       store ( )
           <u>Instance</u> <u>method</u>.  Stores session into session store.

   <b>Functions</b>
       check_cookie_extern ( )
           <u>Function</u>.  Deprecated.

       decrypt_session_id ( )
           <u>Function</u>.  Deprecated.

       encrypt_session_id ( )
           <u>Function</u>.  Deprecated.

       list_sessions ( )
           <u>Function</u>.  TBD.

       purge_old_sessions ( )
           <u>Function</u>.  Deprecated.

       set_cookie ( $cookie_domain, $expires, [ $use_ssl ] )
           <u>Instance</u> <u>method</u>.  TBD.

       set_cookie_extern ( $cookie_domain, [ $use_ssl ] )
           <u>Instance</u> <u>method</u>.  Deprecated.

   <b>Attributes</b>
       TBD.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Sympa::DatabaseManager.

</pre><h4><b>HISTORY</b></h4><pre>
       SympaSession appeared on Sympa 5.4a3.

       It was renamed to Sympa::Session on Sympa 6.2a.41, then Sympa::WWW::Session on Sympa 6.2.26.

       "confirm_action" method was added on Sympa 6.2.17.

6.2.76                                             2025-02-12                        <u>Sympa::WWW::<a href="../man3Sympa/Session.3Sympa.html">Session</a></u>(3Sympa)
</pre>
 </div>
</div></section>
</div>
</body>
</html>