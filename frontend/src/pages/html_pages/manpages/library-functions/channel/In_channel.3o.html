<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>In_channel - Input channels.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ocaml-man">ocaml-man_5.3.0-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       In_channel - Input channels.

</pre><h4><b>Module</b></h4><pre>
       Module   In_channel

</pre><h4><b>Documentation</b></h4><pre>
       Module <b>In_channel</b>
        : <b>sig</b> <b>end</b>

       Input channels.

       This module provides functions for working with input channels.

       See <b>In_channel.examples</b> below.

       <b>Since</b> 4.14

   <b>Channels</b>
       <u>type</u> <u>t</u> = <b>in_channel</b>

       The type of input channel.

       <u>type</u> <u>open_flag</u> = <b>open_flag</b> =
        | Open_rdonly  (* open for reading.
        *)
        | Open_wronly  (* open for writing.
        *)
        | Open_append  (* open for appending: always write at end of file.
        *)
        | Open_creat  (* create the file if it does not exist.
        *)
        | Open_trunc  (* empty the file if it already exists.
        *)
        | Open_excl  (* fail if Open_creat and the file already exists.
        *)
        | Open_binary  (* open in binary mode (no conversion).
        *)
        | Open_text  (* open in text mode (may perform conversions).
        *)
        | Open_nonblock  (* open in non-blocking mode.
        *)

       Opening modes for <b>In_channel.open_gen</b> .

       <u>val</u> <u>stdin</u> : <b>t</b>

       The standard input for the process.

       <u>val</u> <u>open_bin</u> : <b>string</b> <b>-&gt;</b> <b>t</b>

       Open the named file for reading, and return a new input channel on that file, positioned at the beginning
       of the file.

       <u>val</u> <u>open_text</u> : <b>string</b> <b>-&gt;</b> <b>t</b>

       Same  as  <b>In_channel.open_bin</b>  ,  but  the file is opened in text mode, so that newline translation takes
       place during reads. On operating systems that do not distinguish between text mode and binary mode,  this
       function behaves like <b>In_channel.open_bin</b> .

       <u>val</u> <u>open_gen</u> : <b>open_flag</b> <b>list</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>string</b> <b>-&gt;</b> <b>t</b>

       <b>open_gen</b>  <b>mode</b>  <b>perm</b>  <b>filename</b>  opens the named file for reading, as described above. The extra arguments
       <b>mode</b>  and  <b>perm</b>  specify   the   opening   mode   and   file   permissions.    <b>In_channel.open_text</b>   and
       <b>In_channel.open_bin</b> are special cases of this function.

       <u>val</u> <u>with_open_bin</u> : <b>string</b> <b>-&gt;</b> <b>(t</b> <b>-&gt;</b> <b>'a)</b> <b>-&gt;</b> <b>'a</b>

       <b>with_open_bin</b> <b>fn</b> <b>f</b> opens a channel <b>ic</b> on file <b>fn</b> and returns <b>f</b>
           <b>ic</b> . After <b>f</b> returns, either with a value or by raising an exception, <b>ic</b> is guaranteed to be closed.

       <u>val</u> <u>with_open_text</u> : <b>string</b> <b>-&gt;</b> <b>(t</b> <b>-&gt;</b> <b>'a)</b> <b>-&gt;</b> <b>'a</b>

       Like <b>In_channel.with_open_bin</b> , but the channel is opened in text mode (see <b>In_channel.open_text</b> ).

       <u>val</u> <u>with_open_gen</u> : <b>open_flag</b> <b>list</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>string</b> <b>-&gt;</b> <b>(t</b> <b>-&gt;</b> <b>'a)</b> <b>-&gt;</b> <b>'a</b>

       Like  <b>In_channel.with_open_bin</b>  ,  but can specify the opening mode and file permission, in case the file
       must be created (see <b>In_channel.open_gen</b> ).

       <u>val</u> <u>close</u> : <b>t</b> <b>-&gt;</b> <b>unit</b>

       Close the given channel.  Input functions raise a <b>Sys_error</b> exception when they are applied to  a  closed
       input channel, except <b>In_channel.close</b> , which does nothing when applied to an already closed channel.

       <u>val</u> <u>close_noerr</u> : <b>t</b> <b>-&gt;</b> <b>unit</b>

       Same as <b>In_channel.close</b> , but ignore all errors.

   <b>Input</b>
       <u>val</u> <u>input_char</u> : <b>t</b> <b>-&gt;</b> <b>char</b> <b>option</b>

       Read one character from the given input channel.  Returns <b>None</b> if there are no more characters to read.

       <u>val</u> <u>input_byte</u> : <b>t</b> <b>-&gt;</b> <b>int</b> <b>option</b>

       Same  as <b>In_channel.input_char</b> , but return the 8-bit integer representing the character. Returns <b>None</b> if
       the end of file was reached.

       <u>val</u> <u>input_line</u> : <b>t</b> <b>-&gt;</b> <b>string</b> <b>option</b>

       <b>input_line</b> <b>ic</b> reads characters from <b>ic</b> until a newline or the end of file is reached.  Returns the string
       of all characters read, without the newline (if any).  Returns <b>None</b> if the  end  of  the  file  has  been
       reached.  In particular, this will be the case if the last line of input is empty.

       A newline is the character <b>\n</b> unless the file is open in text mode and <b>Sys.win32</b> is <b>true</b> in which case it
       is the sequence of characters <b>\r\n</b> .

       <u>val</u> <u>really_input_string</u> : <b>t</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>string</b> <b>option</b>

       <b>really_input_string</b>  <b>ic</b>  <b>len</b>  reads  <b>len</b>  characters  from  channel  <b>ic</b> and returns them in a new string.
       Returns <b>None</b> if the end of file is reached before <b>len</b> characters have been read.

       If the same channel is read concurrently by multiple threads, the returned string is  not  guaranteed  to
       contain contiguous characters from the input.

       <u>val</u> <u>input_all</u> : <b>t</b> <b>-&gt;</b> <b>string</b>

       <b>input_all</b> <b>ic</b> reads all remaining data from <b>ic</b> .

       If  the  same  channel is read concurrently by multiple threads, the returned string is not guaranteed to
       contain contiguous characters from the input.

       <u>val</u> <u>input_lines</u> : <b>t</b> <b>-&gt;</b> <b>string</b> <b>list</b>

       <b>input_lines</b> <b>ic</b> reads lines using <b>In_channel.input_line</b> until the end of file is reached.  It returns  the
       list of all lines read, in the order they were read.  The newline characters that terminate lines are not
       included in the returned strings.  Empty lines produce empty strings.

       <b>Since</b> 5.1

   <b>Advanced</b> <b>input</b>
       <u>val</u> <u>input</u> : <b>t</b> <b>-&gt;</b> <b>bytes</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>int</b>

       <b>input</b> <b>ic</b> <b>buf</b> <b>pos</b> <b>len</b> reads up to <b>len</b> characters from the given channel <b>ic</b> , storing them in byte sequence
       <b>buf</b>  ,  starting at character number <b>pos</b> . It returns the actual number of characters read, between 0 and
       <b>len</b> (inclusive). A return value of 0 means that the end of file was reached.

       Use <b>In_channel.really_input</b> to read exactly <b>len</b> characters.

       <b>Raises</b> <b>Invalid_argument</b> if <b>pos</b> and <b>len</b> do not designate a valid range of <b>buf</b> .

       <u>val</u> <u>input_bigarray</u> : <b>t</b> <b>-&gt;</b> <b>('a,</b> <b>Bigarray.int8_unsigned_elt,</b> <b>Bigarray.c_layout)</b> <b>Bigarray.Array1.t</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b>
       <b>int</b> <b>-&gt;</b> <b>int</b>

       Same as <b>In_channel.input</b> , but read the data into a bigarray.

       <b>Since</b> 5.2

       <u>val</u> <u>really_input</u> : <b>t</b> <b>-&gt;</b> <b>bytes</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>unit</b> <b>option</b>

       <b>really_input</b> <b>ic</b> <b>buf</b> <b>pos</b> <b>len</b> reads <b>len</b> characters from channel <b>ic</b> , storing them in byte  sequence  <b>buf</b>  ,
       starting at character number <b>pos</b> .

       Returns <b>None</b> if the end of file is reached before <b>len</b> characters have been read.

       If  the  same  channel  is  read concurrently by multiple threads, the bytes read by <b>really_input</b> are not
       guaranteed to be contiguous.

       <b>Raises</b> <b>Invalid_argument</b> if <b>pos</b> and <b>len</b> do not designate a valid range of <b>buf</b> .

       <u>val</u> <u>really_input_bigarray</u> : <b>t</b> <b>-&gt;</b> <b>('a,</b> <b>Bigarray.int8_unsigned_elt,</b> <b>Bigarray.c_layout)</b> <b>Bigarray.Array1.t</b> <b>-&gt;</b>
       <b>int</b> <b>-&gt;</b> <b>int</b> <b>-&gt;</b> <b>unit</b> <b>option</b>

       Same as <b>In_channel.really_input</b> , but read the data into a bigarray.

       <b>Since</b> 5.2

       <u>val</u> <u>fold_lines</u> : <b>('acc</b> <b>-&gt;</b> <b>string</b> <b>-&gt;</b> <b>'acc)</b> <b>-&gt;</b> <b>'acc</b> <b>-&gt;</b> <b>t</b> <b>-&gt;</b> <b>'acc</b>

       <b>fold_lines</b> <b>f</b> <b>init</b> <b>ic</b> reads lines from <b>ic</b> using <b>In_channel.input_line</b> until the end of  file  is  reached,
       and  successively  passes  each  line to function <b>f</b> in the style of a fold.  More precisely, if lines <b>l1,</b>
       <b>...,</b> <b>lN</b> are read, <b>fold_lines</b> <b>f</b> <b>init</b> <b>ic</b> computes <b>f</b> <b>(...</b> <b>(f</b> <b>(f</b> <b>init</b> <b>l1)</b> <b>l2)</b> <b>...)</b> <b>lN</b> .  If  <b>f</b>  has  no  side
       effects,  this is equivalent to <b>List.fold_left</b> <b>f</b> <b>init</b> <b>(In_channel.input_lines</b> <b>ic)</b> , but is more efficient
       since it does not construct the list of all lines read.

       <b>Since</b> 5.1

   <b>Seeking</b>
       <u>val</u> <u>seek</u> : <b>t</b> <b>-&gt;</b> <b>int64</b> <b>-&gt;</b> <b>unit</b>

       <b>seek</b> <b>chan</b> <b>pos</b> sets the current reading position to <b>pos</b> for channel <b>chan</b> . This  works  only  for  regular
       files. On files of other kinds, the behavior is unspecified.

       <u>val</u> <u>pos</u> : <b>t</b> <b>-&gt;</b> <b>int64</b>

       Return  the current reading position for the given channel.  For files opened in text mode under Windows,
       the returned position is approximate (owing to end-of-line conversion); in particular, saving the current
       position with <b>In_channel.pos</b> , then going back to this position using <b>In_channel.seek</b> will not work.  For
       this programming idiom to work reliably and portably, the file must be opened in binary mode.

   <b>Attributes</b>
       <u>val</u> <u>length</u> : <b>t</b> <b>-&gt;</b> <b>int64</b>

       Return the size (number of characters) of the regular file on which the given channel is opened.  If  the
       channel  is  opened  on  a file that is not a regular file, the result is meaningless.  The returned size
       does not take into account the end-of-line translations that can be performed when reading from a channel
       opened in text mode.

       <u>val</u> <u>set_binary_mode</u> : <b>t</b> <b>-&gt;</b> <b>bool</b> <b>-&gt;</b> <b>unit</b>

       <b>set_binary_mode</b> <b>ic</b> <b>true</b> sets the channel <b>ic</b> to binary mode: no translations take place during input.

       <b>set_binary_mode</b> <b>ic</b> <b>false</b> sets the channel <b>ic</b> to text  mode:  depending  on  the  operating  system,  some
       translations  may  take place during input.  For instance, under Windows, end-of-lines will be translated
       from <b>\r\n</b> to <b>\n</b> .

       This function has no effect under operating systems that do not distinguish between text mode and  binary
       mode.

       <u>val</u> <u>is_binary_mode</u> : <b>t</b> <b>-&gt;</b> <b>bool</b>

       <b>is_binary_mode</b> <b>ic</b> returns whether the channel <b>ic</b> is in binary mode (see <b>In_channel.set_binary_mode</b> ).

       <b>Since</b> 5.2

       <u>val</u> <u>isatty</u> : <b>t</b> <b>-&gt;</b> <b>bool</b>

       <b>isatty</b> <b>ic</b> is <b>true</b> if <b>ic</b> refers to a terminal or console window, <b>false</b> otherwise.

       <b>Since</b> 5.1

   <b>Examples</b>
       Reading the contents of a file:
             <b>let</b> <b>read_file</b> <b>file</b> <b>=</b> <b>In_channel.with_open_bin</b> <b>file</b> <b>In_channel.input_all</b>

       Reading a line from stdin:
             <b>let</b> <b>user_input</b> <b>()</b> <b>=</b> <b>In_channel.input_line</b> <b>In_channel.stdin</b>

OCamldoc                                           2025-06-12                                     <u><a href="../man3o/In_channel.3o.html">In_channel</a></u>(3o)
</pre>
 </div>
</div></section>
</div>
</body>
</html>