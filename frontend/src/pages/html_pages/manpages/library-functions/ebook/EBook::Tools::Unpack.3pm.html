<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EBook::Tools::Unpack - Object class for unpacking e-book files into their component parts and metadata</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libebook-tools-perl">libebook-tools-perl_0.5.4-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       EBook::Tools::Unpack - Object class for unpacking e-book files into their component parts and metadata

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use EBook::Tools::Unpack;
        my $unpacker = EBook::Tools::Unpack-&gt;new(
           'file'     =&gt; $filename,
           'dir'      =&gt; $dir,
           'encoding' =&gt; $encoding,
           'format'   =&gt; $format,
           'raw'      =&gt; $raw,
           'author'   =&gt; $author,
           'title'    =&gt; $title,
           'opffile'  =&gt; $opffile,
           'tidy'     =&gt; $tidy,
           'nosave'   =&gt; $nosave,
           );
        $unpacker-&gt;unpack;

       or, more simply:

        use EBook::Tools::Unpack;
        my $unpacker = EBook::Tools::Unpack-&gt;new('file' =&gt; 'mybook.prc');
        $unpacker-&gt;unpack;

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
   <b>new(%args)</b>
       Instantiates a new Ebook::Tools::Unpack object.

       <u>Arguments</u>

       •   "file"

           The file to unpack.  Specifying this is mandatory.

       •   "dir"

           The directory to unpack into.  If not specified, defaults to the basename of the file.

       •   "encoding"

           If  specified, overrides the encoding to use when unpacking.  This is normally detected from the file
           and does not need to be specified.

           Valid values are '1252' (specifying Windows-1252) and '65001' (specifying UTF-8).

       •   "htmlconvert"

           If set to true, an attempt will be made to convert non-HTML output text to HTML where possible.

       •   "key"

           The decryption key to use if necessary (not yet implemented)

       •   "keyfile"

           The file holding the decryption keys to use if necessary (not yet implemented)

       •   "language"

           If specified, overrides the detected language information.

       •   "opffile"

           The name of the file  in  which  the  metadata  will  be  stored.   If  not  specified,  defaults  to
           "content.opf".

       •   "raw"

           If  set true, this forces no corrections to be done on any extracted text and a lot of raw, unparsed,
           unmodified data to be dumped into  the  directory  along  with  everything  else.   It's  useful  for
           debugging exactly what was in the file being unpacked, and (when combined with "nosave") reducing the
           time needed to extract parsed data from an ebook container without actually unpacking it.

       •   "author"

           Overrides the detected author name.

       •   "title"

           Overrides the detected title.

       •   "tidy"

           If  set  to true, the unpacker will run tidy on any HTML output files to convert them to valid XHTML.
           Be warned that this can occasionally change the formatting, as Tidy isn't very forgiving  on  certain
           common tricks (such as empty &lt;pre&gt; elements with style elements) that abuse the standard.

       •   "nosave"

           If  set  to true, the unpacker will run through all of the unpacking steps except those that actually
           write to the disk.  This is useful for testing, but also (particularly when combined with "raw")  can
           be used for extracting parsed data from an ebook container without actually unpacking it.

</pre><h4><b>ACCESSOR</b> <b>METHODS</b></h4><pre>
       See  "<b>new()</b>"  for  more details on what some of these mean.  Note that some values cannot be autodetected
       until an unpack method executes.

   <b>"author"</b>
   <b>"dir"</b>
   <b>"file"</b>
   <b>"filebase"</b>
       In scalar context, this is the basename of "file".  In list context, it actually  returns  the  basename,
       directory, and extension as per "fileparse" from File::Basename.

   <b>"format"</b>
   <b>"key"</b>
   <b>"keyfile"</b>
   <b>"language"</b>
       This  returns  the  language  specified  by  the  user, if any.  It remains undefined if the user has not
       requested that a language code be set even if a language was autodetected.

   <b>"opffile"</b>
   <b>"raw"</b>
   <b>"title"</b>
       This returns the title specified by the user, if any.  It remains undefined if the user has not requested
       a title be set even if a title was autodetected.

   <b>"detected"</b>
       This returns a hash containing the autodetected metadata, if any.

</pre><h4><b>MODIFIER</b> <b>METHODS</b></h4><pre>
   <b>detect_format()</b>
       Attempts to automatically detect the format of the input file and  set  the  internal  object  attributes
       "$self-&gt;{format}" and "$self-&gt;{formatinfo}", where the former is a one-word string used by the dispatcher
       to  select  the correct unpacking method and the latter may contain additional detected information (such
       as a title or version).

       Croaks if detection fails.

       In  scalar  context,  returns  "$self-&gt;{format}".   In  list  context,  returns  the  two  element   list
       "($self-&gt;{format},$self-&gt;{formatinfo})"

       This is automatically called by "<b>new()</b>" if the "format" argument is not specified.

   <b>detect_from_mobi_exth()</b>
       Detects  metadata  values  from  the MOBI EXTH headers retrieved via "<b>unpack_mobi_exth()</b>" and places them
       into the "detected" attribute.

   <b>gen_opf(%args)</b>
       This generates an OPF file from detected and specified metadata.  It does not honor  the  "nosave"  flag,
       and will always write its output.

       Normally  this is called automatically from inside the "unpack" methods, but can be called manually after
       an unpack if the "nosave" flag was set to write an OPF anyway.

       Returns the filename of the OPF file.

       <u>Arguments</u>

       •   "opffile" (optional)

           If specified, this overrides the object attribute "opffile", and determines the filename to  use  for
           the  generated  OPF  file.   If  not  specified,  and the object attribute "opffile" has somehow been
           cleared (the attribute is set during "<b>new()</b>"), it will be generated  by  looking  at  the  "textfile"
           argument.   If  no  value can be found, the method croaks.  If a value was found somewhere other than
           the object attribute "opffile", then the object attribute is updated to match.

       •   "textfile" (optional)

           The file containing the main text of the document.  If specified, the method will  attempt  to  split
           metadata out of the file and add whatever remains to the manifest of the OPF.

       •   "mediatype" (optional)

           The media type (mime type) of the document specified via "textfile".  If "textfile" is not specified,
           this argument is ignored.  If "textfile" is specified, but

   <b>unpack()</b>
       This is a dispatcher for the specific unpacking methods needed to unpack a particular format.  Unless you
       feel  a  need  to  override  the unpacking method specified or detected during object construction, it is
       probalby better to call this than the specific unpacking methods.

   <b>unpack_ereader()</b>
       Unpacks Fictionwise/PeanutPress eReader (-er.pdb) files.

   <b>unpack_imp()</b>
       Unpacks SoftBook/GEB/REB/eBookWise (.imp) files.

   <b>unpack_mobi()</b>
       Unpacks Mobipocket (.prc / .mobi) files.

   <b>unpack_msreader()</b>
       Unpacks Microsoft Reader (.lit) files

   <b>unpack_palmdoc()</b>
       Unpacks PalmDoc / AportisDoc (.pdb) files

   <b>unpack_zip()</b>
       Unpacks Zip archives (including ePub files).

</pre><h4><b>BUGS</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
       •   DRM isn't handled.  Infrastructure to support this via an external plug-in module may  eventually  be
           built, but it will never become part of the main module for legal reasons.

       •   Unit tests are incomplete

       •   Documentation is incomplete.  Accessors in particular could use some cleaning up.

       •   Need to implement setter methods for object attributes

       •   Import/extraction/unpacking  is  currently  limited  to PalmDoc, Mobipocket, and eReader.  Extraction
           from Microsoft Reader (.lit) and ePub is also eventually planned.   Other  formats  may  follow  from
           there.

</pre><h4><b>AUTHOR</b></h4><pre>
       Zed Pobre &lt;<a href="mailto:zed@debian.org">zed@debian.org</a>&gt;

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright 2008 Zed Pobre

       Licensed to the public under the terms of the GNU GPL, version 2

perl v5.40.0                                       2025-01-10                          <u>EBook::Tools::<a href="../man3pm/Unpack.3pm.html">Unpack</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>