<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPI_execute_with_args - execute a command with out-of-line parameters</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-doc-17">postgresql-doc-17_17.5-1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SPI_execute_with_args - execute a command with out-of-line parameters

</pre><h4><b>SYNOPSIS</b></h4><pre>
       int SPI_execute_with_args(const char *<u>command</u>,
                                 int <u>nargs</u>, Oid *<u>argtypes</u>,
                                 Datum *<u>values</u>, const char *<u>nulls</u>,
                                 bool <u>read_only</u>, long <u>count</u>)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SPI_execute_with_args</b> executes a command that might include references to externally supplied parameters.
       The command text refers to a parameter as $<u>n</u>, and the call specifies data types and values for each such
       symbol.  <u>read_only</u> and <u>count</u> have the same interpretation as in <b>SPI_execute</b>.

       The main advantage of this routine compared to <b>SPI_execute</b> is that data values can be inserted into the
       command without tedious quoting/escaping, and thus with much less risk of SQL-injection attacks.

       Similar results can be achieved with <b>SPI_prepare</b> followed by <b>SPI_execute_plan</b>; however, when using this
       function the query plan is always customized to the specific parameter values provided. For one-time
       query execution, this function should be preferred. If the same command is to be executed with many
       different parameters, either method might be faster, depending on the cost of re-planning versus the
       benefit of custom plans.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       const char * <u>command</u>
           command string

       int <u>nargs</u>
           number of input parameters ($1, $2, etc.)

       Oid * <u>argtypes</u>
           an array of length <u>nargs</u>, containing the OIDs of the data types of the parameters

       Datum * <u>values</u>
           an array of length <u>nargs</u>, containing the actual parameter values

       const char * <u>nulls</u>
           an array of length <u>nargs</u>, describing which parameters are null

           If <u>nulls</u> is NULL then <b>SPI_execute_with_args</b> assumes that no parameters are null. Otherwise, each
           entry of the <u>nulls</u> array should be ' ' if the corresponding parameter value is non-null, or 'n' if
           the corresponding parameter value is null. (In the latter case, the actual value in the corresponding
           <u>values</u> entry doesn't matter.) Note that <u>nulls</u> is not a text string, just an array: it does not need a
           '\0' terminator.

       bool <u>read_only</u>
           true for read-only execution

       long <u>count</u>
           maximum number of rows to return, or 0 for no limit

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The return value is the same as for <b>SPI_execute</b>.

       <u>SPI_processed</u> and <u>SPI_tuptable</u> are set as in <b>SPI_execute</b> if successful.

PostgreSQL 17.5                                       2025                              <u><a href="../man3/SPI_EXECUTE_WITH_ARGS.3.html">SPI_EXECUTE_WITH_ARGS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>