<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_LinkArray, Tcl_LinkVar, Tcl_UnlinkVar, Tcl_UpdateLinkedVar - link Tcl variable to C variable</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_LinkArray, Tcl_LinkVar, Tcl_UnlinkVar, Tcl_UpdateLinkedVar - link Tcl variable to C variable

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       int
       <b>Tcl_LinkVar</b>(<u>interp,</u> <u>varName,</u> <u>addr,</u> <u>type</u>)

       int                                                                                                       2
       <b>Tcl_LinkArray</b>(<u>interp,</u> <u>varName,</u> <u>addr,</u> <u>type,</u> <u>size</u>)                                                          2

       <b>Tcl_UnlinkVar</b>(<u>interp,</u> <u>varName</u>)

       <b>Tcl_UpdateLinkedVar</b>(<u>interp,</u> <u>varName</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)          Interpreter  that  contains <u>varName</u>.  Also used by <b>Tcl_LinkVar</b> to return
                                        error messages.

       const char <u>*varName</u> (in)         Name of global variable.

       void <u>*addr</u> (in)                  Address of C variable that is to be linked to <u>varName</u>.

                                        In <b>Tcl_LinkArray</b>, may be NULL to tell Tcl to create the storage for  the 2
                                        array in the variable.

       int <u>type</u> (in)                    Type  of  C  variable  for  <b>Tcl_LinkVar</b>  or  type  of  array element for
                                        <b>Tcl_LinkArray</b>.    Must   be   one   of   <b>TCL_LINK_INT</b>,    <b>TCL_LINK_UINT</b>,
                                        <b>TCL_LINK_CHAR</b>,    <b>TCL_LINK_UCHAR</b>,    <b>TCL_LINK_SHORT</b>,    <b>TCL_LINK_USHORT</b>,
                                        <b>TCL_LINK_LONG</b>,  <b>TCL_LINK_ULONG</b>,  <b>TCL_LINK_WIDE_INT</b>,  <b>TCL_LINK_WIDE_UINT</b>,
                                        <b>TCL_LINK_FLOAT</b>,  <b>TCL_LINK_DOUBLE</b>,  <b>TCL_LINK_BOOLEAN</b>, or one of the extra
                                        ones listed below.

                                        In <b>Tcl_LinkVar</b>, the additional linked type <b>TCL_LINK_STRING</b> may be used.

                                        In  <b>Tcl_LinkArray</b>,  the  additional  linked  types  <b>TCL_LINK_CHARS</b>   and 2
                                        <b>TCL_LINK_BINARY</b> may be used.

                                        All   the  above  for  both  functions  may  be  optionally  OR'ed  with
                                        <b>TCL_LINK_READ_ONLY</b> to make the Tcl variable read-only.

       Tcl_Size <u>size</u> (in)               The number of elements in the C array. Must be greater than zero.        2
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tcl_LinkVar</b> uses variable traces to keep the Tcl variable named by <u>varName</u> in sync with the C variable at
       the address given by <u>addr</u>.  Whenever the Tcl variable is read  the  value  of  the  C  variable  will  be
       returned, and whenever the Tcl variable is written the C variable will be updated to have the same value.
       <b>Tcl_LinkVar</b>  normally returns <b>TCL_OK</b>;  if an error occurs while setting up the link (e.g. because <u>varName</u>
       is the name of array) then <b>TCL_ERROR</b> is returned and the interpreter's result contains an error message.

       <b>Tcl_LinkArray</b> is similar, but for arrays of fixed size (given  by  the  <u>size</u>  argument).  When  asked  to 2
       allocate  the  backing  C array storage (via the <u>addr</u> argument being NULL), it writes the address that it 2
       allocated to the Tcl interpreter result.

       The <u>type</u> argument specifies the type of the C variable, or the type of the elements of the C  array,  and
       must have one of the following values, optionally OR'ed with <b>TCL_LINK_READ_ONLY</b>:

       <b>TCL_LINK_INT</b>
              The  C  variable,  or each element of the C array, is of type <b>int</b>.  Any value written into the Tcl
              variable must have a proper integer form acceptable to <b>Tcl_GetIntFromObj</b>;  attempts to write  non-
              integer  values  into <u>varName</u> will be rejected with Tcl errors. Incomplete integer representations
              (like the empty string, '+', '-' or the hex/octal/decimal/binary prefix) are accepted as  if  they
              are valid too.

       <b>TCL_LINK_UINT</b>
              The  C  variable, or each element of the C array, is of type <b>unsigned</b> <b>int</b>.  Any value written into
              the Tcl variable must have a proper unsigned integer form acceptable to <b>Tcl_GetWideIntFromObj</b>  and
              in  the  platform's  defined range for the <b>unsigned</b> <b>int</b> type; attempts to write non-integer values
              (or values outside the range) into <u>varName</u> will be rejected with Tcl  errors.  Incomplete  integer
              representations  (like  the  empty  string,  '+',  '-' or the hex/octal/decimal/binary prefix) are
              accepted as if they are valid too.

       <b>TCL_LINK_CHAR</b>
              The C variable, or each element of the C array, is of type <b>char</b>.  Any value written into  the  Tcl
              variable  must  have  a proper integer form acceptable to <b>Tcl_GetIntFromObj</b> and be in the range of
              the <b>char</b> datatype; attempts to write non-integer or  out-of-range  values  into  <u>varName</u>  will  be
              rejected  with  Tcl errors. Incomplete integer representations (like the empty string, '+', '-' or
              the hex/octal/decimal/binary prefix) are accepted as if they are valid too.

              If using an array of these, consider using <b>TCL_LINK_CHARS</b> instead.                                 2

       <b>TCL_LINK_CHARS</b>
              The C array is of type <b>char</b> <b>*</b> and is mapped into Tcl as a string.  Any value written into the  Tcl 2
              variable must have the same length as the underlying storage. Only supported with <b>Tcl_LinkArray</b>.

       <b>TCL_LINK_UCHAR</b>
              The  C variable, or each element of the C array, is of type <b>unsigned</b> <b>char</b>.  Any value written into
              the Tcl variable must have a proper unsigned integer form acceptable to <b>Tcl_GetIntFromObj</b>  and  in
              the  platform's defined range for the <b>unsigned</b> <b>char</b> type; attempts to write non-integer values (or
              values outside the range) into <u>varName</u> will  be  rejected  with  Tcl  errors.  Incomplete  integer
              representations  (like  the  empty  string,  '+',  '-' or the hex/octal/decimal/binary prefix) are
              accepted as if they are valid too.

              If using an array of these, consider using <b>TCL_LINK_BINARY</b> instead.                                2

       <b>TCL_LINK_BINARY</b>
              The C array is of type <b>unsigned</b> <b>char</b> <b>*</b> and is mapped into Tcl as a bytearray.  Any  value  written 2
              into  the  Tcl  variable  must have the same length as the underlying storage. Only supported with 2
              <b>Tcl_LinkArray</b>.

       <b>TCL_LINK_SHORT</b>
              The C variable, or each element of the C array, is of type <b>short</b>.  Any value written into the  Tcl
              variable  must  have  a proper integer form acceptable to <b>Tcl_GetIntFromObj</b> and be in the range of
              the <b>short</b> datatype; attempts to write non-integer or out-of-range  values  into  <u>varName</u>  will  be
              rejected  with  Tcl errors. Incomplete integer representations (like the empty string, '+', '-' or
              the hex/octal/decimal/binary prefix) are accepted as if they are valid too.

       <b>TCL_LINK_USHORT</b>
              The C variable, or each element of the C array, is of type <b>unsigned</b> <b>short</b>.  Any value written into
              the Tcl variable must have a proper unsigned integer form acceptable to <b>Tcl_GetIntFromObj</b>  and  in
              the platform's defined range for the <b>unsigned</b> <b>short</b> type; attempts to write non-integer values (or
              values  outside  the  range)  into  <u>varName</u>  will  be rejected with Tcl errors. Incomplete integer
              representations (like the empty string, '+',  '-'  or  the  hex/octal/decimal/binary  prefix)  are
              accepted as if they are valid too.

       <b>TCL_LINK_LONG</b>
              The  C  variable, or each element of the C array, is of type <b>long</b>.  Any value written into the Tcl
              variable must have a proper integer form acceptable to <b>Tcl_GetLongFromObj</b>; attempts to write  non-
              integer  or  out-of-range values into <u>varName</u> will be rejected with Tcl errors. Incomplete integer
              representations (like the empty string, '+',  '-'  or  the  hex/octal/decimal/binary  prefix)  are
              accepted as if they are valid too.

       <b>TCL_LINK_ULONG</b>
              The  C variable, or each element of the C array, is of type <b>unsigned</b> <b>long</b>.  Any value written into
              the Tcl variable must have a proper unsigned integer form acceptable to <b>Tcl_GetWideIntFromObj</b>  and
              in  the  platform's defined range for the <b>unsigned</b> <b>long</b> type; attempts to write non-integer values
              (or values outside the range) into <u>varName</u> will be rejected with Tcl  errors.  Incomplete  integer
              representations  (like  the  empty  string,  '+',  '-' or the hex/octal/decimal/binary prefix) are
              accepted as if they are valid too.

       <b>TCL_LINK_DOUBLE</b>
              The C variable, or each element of the C array, is of type <b>double</b>.  Any value written into the Tcl
              variable must have a proper real form acceptable to <b>Tcl_GetDoubleFromObj</b>;  attempts to write  non-
              real  values  into  <u>varName</u>  will  be  rejected  with  Tcl  errors.  Incomplete  integer  or  real
              representations (like the empty string, '.', '+', '-' or the hex/octal/decimal/binary prefix)  are
              accepted as if they are valid too.

       <b>TCL_LINK_FLOAT</b>
              The  C variable, or each element of the C array, is of type <b>float</b>.  Any value written into the Tcl
              variable must have a proper real form acceptable to <b>Tcl_GetDoubleFromObj</b> and must  be  within  the
              range acceptable for a <b>float</b>; attempts to write non-real values (or values outside the range) into
              <u>varName</u>  will  be  rejected  with Tcl errors. Incomplete integer or real representations (like the
              empty string, '.', '+', '-' or the hex/octal/decimal/binary prefix) are accepted as  if  they  are
              valid too.

       <b>TCL_LINK_WIDE_INT</b>
              The  C  variable, or each element of the C array, is of type <b>Tcl_WideInt</b> (which is an integer type
              at least 64-bits wide on all platforms that can support it.)   Any  value  written  into  the  Tcl
              variable  must  have a proper integer form acceptable to <b>Tcl_GetWideIntFromObj</b>;  attempts to write
              non-integer  values  into  <u>varName</u>  will  be  rejected  with  Tcl   errors.   Incomplete   integer
              representations  (like  the  empty  string,  '+',  '-' or the hex/octal/decimal/binary prefix) are
              accepted as if they are valid too.

       <b>TCL_LINK_WIDE_UINT</b>
              The C variable, or each element of the C array, is of type  <b>Tcl_WideUInt</b>  (which  is  an  unsigned
              integer  type at least 64-bits wide on all platforms that can support it.)  Any value written into
              the   Tcl   variable   must   have   a   proper   unsigned   wideinteger   form   acceptable    to
              <b>Tcl_GetWideUIntFromObj</b>;  attempts  to  write non-integer values into <u>varName</u> will be rejected with
              Tcl  errors.  Incomplete  integer  representations  (like  the  empty  string,  '+',  '-'  or  the
              hex/octal/decimal/binary prefix) are accepted as if they are valid too.

       <b>TCL_LINK_BOOLEAN</b>
              The C variable, or each element of the C array, is of type <b>int</b>.  If its value is zero then it will
              read from Tcl as “0”; otherwise it will read from Tcl as “1”.  Whenever <u>varName</u> is modified, the C
              variable  will  be  set  to  a  0 or 1 value.  Any value written into the Tcl variable must have a
              proper boolean form acceptable to <b>Tcl_GetBooleanFromObj</b>;  attempts  to  write  non-boolean  values
              into <u>varName</u> will be rejected with Tcl errors.

       <b>TCL_LINK_STRING</b>
              The  C variable is of type <b>char</b> <b>*</b>.  If its value is not NULL then it must be a pointer to a string
              allocated with <b>Tcl_Alloc</b>.  Whenever the Tcl variable is modified the  current  C  string  will  be
              freed  and  new  memory  will  be  allocated to hold a copy of the variable's new value.  If the C
              variable contains a NULL pointer then the  Tcl  variable  will  read  as  “NULL”.   This  is  only
              supported by <b>Tcl_LinkVar</b>.

       If  the  <b>TCL_LINK_READ_ONLY</b> flag is present in <u>type</u> then the variable will be read-only from Tcl, so that
       its value can only be changed by modifying the C variable.  Attempts to write the variable from Tcl  will
       be rejected with errors.

       <b>Tcl_UnlinkVar</b>  removes  the  link previously set up for the variable given by <u>varName</u>.  If there does not
       exist a link for <u>varName</u> then the procedure has no effect.

       <b>Tcl_UpdateLinkedVar</b> may be invoked after the C variable has changed to  force  the  Tcl  variable  to  be
       updated  immediately.   In  many  cases  this  procedure is not needed, since any attempt to read the Tcl
       variable will return the latest value of the C variable.  However, if a trace has been  set  on  the  Tcl
       variable  (such  as  a  Tk  widget  that wishes to display the value of the variable), the trace will not
       trigger when the C variable has changed.  <b>Tcl_UpdateLinkedVar</b> ensures that any traces on the Tcl variable
       are invoked.

       Note that, as with any call to a Tcl interpreter, <b>Tcl_UpdateLinkedVar</b> must be called from the same thread
       that created the interpreter. The safest mechanism is to ensure that the C variable is only ever  updated
       from  the  same  thread  that  created  the  interpreter  (possibly  in  response to an event posted with
       <b>Tcl_ThreadQueueEvent</b>), but when it is necessary to update the  variable  in  a  separate  thread,  it  is
       advised  that <b>Tcl_AsyncMark</b> be used to indicate to the thread hosting the interpreter that it is ready to
       run <b>Tcl_UpdateLinkedVar</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/Tcl_TraceVar.3tcl.html">Tcl_TraceVar</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       boolean, integer, link, read-only, real, string, trace, variable

Tcl                                                    7.5                                     <u><a href="../man3tcl/Tcl_LinkVar.3tcl.html">Tcl_LinkVar</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>