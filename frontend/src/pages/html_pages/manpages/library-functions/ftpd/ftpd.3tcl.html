<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ftpd - Tcl FTP server implementation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ftpd - Tcl FTP server implementation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>ftpd</b> <b>?1.4.1?</b>

       <b>::ftpd::server</b> ?<u>myaddr</u>?

       <b>::ftpd::config</b> ?<u>option</u> <u>value</u>? ?<u>option</u> <u>value</u> <u>...</u>?

       <u>fsCmd</u> <b>append</b> <u>path</u>

       <u>fsCmd</u> <b>delete</b> <u>path</u> <u>channel</u>

       <u>fsCmd</u> <b>dlist</b> <u>path</u> <u>style</u> <u>channel</u>

       <u>fsCmd</u> <b>exists</b> <u>path</u>

       <u>fsCmd</u> <b>mkdir</b> <u>path</u> <u>channel</u>

       <u>fsCmd</u> <b>mtime</b> <u>path</u> <u>channel</u>

       <u>fsCmd</u> <b>permissions</b> <u>path</u>

       <u>fsCmd</u> <b>rename</b> <u>path</u> <u>newpath</u> <u>channel</u>

       <u>fsCmd</u> <b>retr</b> <u>path</u>

       <u>fsCmd</u> <b>rmdir</b> <u>path</u> <u>channel</u>

       <u>fsCmd</u> <b>size</b> <u>path</u> <u>channel</u>

       <u>fsCmd</u> <b>store</b> <u>path</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>ftpd</b>  package provides a simple Tcl-only server library for the FTP protocol as specified in RFC 959
       (<u><a href="http://www.rfc-editor.org/rfc/rfc959.txt">http://www.rfc-editor.org/rfc/rfc959.txt</a></u>).  It works by listening on  the  standard  FTP  socket.   Most
       server  errors  are  returned  as  error  messages with the appropriate code attached to them.  Since the
       server code for the ftp daemon is executed in the event loop, it is  possible  that  a  <b>bgerror</b>  will  be
       thrown on the server if there are problems with the code in the module.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::ftpd::server</b> ?<u>myaddr</u>?
              Open  a listening socket to listen to and accept ftp connections.  myaddr is an optional argument.
              <u>myaddr</u> is the domain-style name or numerical IP address of the client-side  network  interface  to
              use for the connection.

       <b>::ftpd::config</b> ?<u>option</u> <u>value</u>? ?<u>option</u> <u>value</u> <u>...</u>?
              The  value  is  always the name of the command to call as the callback. The option specifies which
              callback should be configured.  See section <b>CALLBACKS</b> for descriptions of the arguments and return
              values for each of the callbacks.

              -authIpCmd <u>proc</u>
                     Callback to authenticate new connections based on the ip-address of the peer.

              -authUsrCmd <u>proc</u>
                     Callback to authenticate new connections based on  the  user  logging  in  (and  the  users
                     password).

              -authFileCmd <u>proc</u>
                     Callback to accept or deny a users access to read and write to a specific path or file.

              -logCmd <u>proc</u>
                     Callback for log information generated by the FTP engine.

              -fsCmd <u>proc</u>
                     Callback to connect the engine to the filesystem it operates on.

              -closeCmd <u>proc</u>
                     Callback to be called when a connection is closed. This allows the embedding application to
                     perform its own cleanup operations.

              -xferDoneCmd <u>proc</u>
                     Callback  for  transfer  completion  notification.  In other words, it is called whenever a
                     transfer of data to or from the client has completed.

</pre><h4><b>CALLBACKS</b></h4><pre>
       <b>authIpCmd</b> callback
              The authIpCmd receives the ip-address of the peer attempting to connect to the ftp server  as  its
              argument.  It  returns  a  1  to  allow users from the specified IP to attempt to login and a 0 to
              reject the login attempt from the specified IP.

       <b>authUsrCmd</b> callback
              The authUsrCmd receives the username and password as its two arguments. It returns a 1  to  accept
              the attempted login to the ftpd and a 0 to reject the attempted login.

       <b>authFileCmd</b> callback
              The  authFileCmd  receives  the  user  (that is currently logged in), the path or filename that is
              about to be read or written, and <b>read</b> or <b>write</b> as its three arguments.  It returns a  1  to  allow
              the  path  or filename to be read or written, and a 0 to reject the attempted read or write with a
              permissions error code.

       <b>logCmd</b> callback
              The logCmd receives a severity and a message as its two arguments.  The severities used within the
              ftpd package are <b>note</b>, <b>debug</b>, and <b>error</b>. The logCmd doesn't return anything.

       <b>fsCmd</b> callback
              The fsCmd receives a subcommand, a filename or path, and optional additional arguments  (depending
              on the subcommand).

              The subcommands supported by the fsCmd are:

              <u>fsCmd</u> <b>append</b> <u>path</u>
                     The  append  subcommand  receives  the  filename to append to as its argument. It returns a
                     writable tcl channel as its return value.

              <u>fsCmd</u> <b>delete</b> <u>path</u> <u>channel</u>
                     The delete subcommand receives the filename to delete, and a channel to write to as its two
                     arguments.  The file specified is deleted and the appropriate ftp message is written to the
                     channel that is passed as the second argument.  The delete subcommand returns nothing.

              <u>fsCmd</u> <b>dlist</b> <u>path</u> <u>style</u> <u>channel</u>
                     The dlist subcommand receives the path that it should list the files that are in, the style
                     in which the files should be listed which is either <b>nlst</b> or <b>list</b>, and a channel to write to
                     as its three arguments.  The files in the specified  path  are  printed  to  the  specified
                     channel  one  per  line.   If the style is <b>nlst</b> only the name of the file is printed to the
                     channel.  If the style is <b>list</b> then the file permissions, number of links to the file,  the
                     name of the user that owns the file, the name of the group that owns the file, the size (in
                     bytes)  of  the  file, the modify time of the file, and the filename are printed out to the
                     channel in a formatted space separated format.  The <b>dlist</b> subcommand returns nothing.

              <u>fsCmd</u> <b>exists</b> <u>path</u>
                     The exists subcommand receives the name of a file to check the existence  of  as  its  only
                     argument.   The  exists subcommand returns a 1 if the path specified exists and the path is
                     not a directory.

              <u>fsCmd</u> <b>mkdir</b> <u>path</u> <u>channel</u>
                     The mkdir subcommand receives the path of a directory to create and a channel to  write  to
                     as  its  two  arguments.  The mkdir subcommand creates the specified directory if necessary
                     and possible.  The mkdir subcommand then prints the appropriate success or failure  message
                     to the channel.  The mkdir subcommand returns nothing.

              <u>fsCmd</u> <b>mtime</b> <u>path</u> <u>channel</u>
                     The  mtime subcommand receives the path of a file to check the modify time on and a channel
                     as its two arguments.  If the file exists the mtime is printed to the channel in the proper
                     FTP format, otherwise an appropriate error message and code are  printed  to  the  channel.
                     The mtime subcommand returns nothing.

              <u>fsCmd</u> <b>permissions</b> <u>path</u>
                     The permissions subcommand receives the path of a file to retrieve the permissions of.  The
                     permissions  subcommand returns the octal file permissions of the specified file.  The file
                     is expected to exist.

              <u>fsCmd</u> <b>rename</b> <u>path</u> <u>newpath</u> <u>channel</u>
                     The rename subcommand receives the path of the current file,  the  new  file  path,  and  a
                     channel to write to as its three arguments.  The rename subcommand renames the current file
                     to  the  new  file  path  if  the  path  to  the  new  file exists, and then prints out the
                     appropriate message to the channel.  If the new file path  doesn't  exist  the  appropriate
                     error message is printed to the channel.  The rename subcommand returns nothing.

              <u>fsCmd</u> <b>retr</b> <u>path</u>
                     The  retr  subcommand  receives  the path of a file to read as its only argument.  The retr
                     subcommand returns a readable channel that the specified file can be read from.

              <u>fsCmd</u> <b>rmdir</b> <u>path</u> <u>channel</u>
                     The rmdir subcommand receives the path of a directory to remove and a channel to  write  to
                     as  its  two arguments.  The rmdir subcommand removes the specified directory (if possible)
                     and prints the appropriate message to the channel (which may be an error if  the  specified
                     directory does not exist or is not empty).  The rmdir subcommand returns nothing.

              <u>fsCmd</u> <b>size</b> <u>path</u> <u>channel</u>
                     The size subcommand receives the path of a file to get the size (in bytes) of and a channel
                     to  write to as its two arguments.  The size subcommand prints the appropriate code and the
                     size of the file if the specified path is a file, otherwise an appropriate error  code  and
                     message are printed to the channel.  The size subcommand returns nothing.

              <u>fsCmd</u> <b>store</b> <u>path</u>
                     The  store subcommand receives the path of a file to write as its only argument.  The store
                     subcommand returns a writable channel.

       <b>closeCmd</b>
              The <b>closeCmd</b> receives no arguments when it is invoked, and any return value  it  may  generate  is
              discarded.

       <b>xferDoneCmd</b> sock sock2 file bytes filename err
              The  <b>xferDoneCmd</b> receives six arguments when invoked. These are, in this order, the channel handle
              of the control socket for the connection, the channel handle of  the  data  socket  used  for  the
              transfer (already closed), the handle of the channel containing the transfered file, the number of
              bytes transfered, the path of the file which was transfered, and a (possibly empty) error message.
              Any return value it may generate is discarded.

</pre><h4><b>VARIABLES</b></h4><pre>
       <b>::ftpd::cwd</b>
              The  current  working  directory for a session when someone first connects to the FTPD or when the
              <b>REIN</b> ftp command is received.

       <b>::ftpd::contact</b>
              The e-mail address of the person that is the contact for the ftp server.  This address is  printed
              out as part of the response to the <b>FTP</b> <b>HELP</b> command.

       <b>::ftpd::port</b>
              The port that the ftp server should listen on.  If port is specified as zero, the operating system
              will allocate an unused port for use as a server socket; afterwards, the variable will contain the
              port number that was allocated.

       <b>::ftpd::welcome</b>
              The message that is printed out when the user first connects to the ftp server.

       <b>::ftpd::CurrentSocket</b>
              Accessible to all callbacks and all filesystem commands (which are a special form of callback) and
              contains the handle of the socket channel which was active when the callback was invoked.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>ftpd</u> of the <u>Tcllib</u> <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       ftp, ftpd, ftpserver, rfc 959, services

</pre><h4><b>CATEGORY</b></h4><pre>
       Networking

tcllib                                                1.4.1                                           <u><a href="../man3tcl/ftpd.3tcl.html">ftpd</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>