<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPI_execute_plan_extended - execute a statement prepared by SPI_prepare</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-doc-17">postgresql-doc-17_17.5-1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SPI_execute_plan_extended - execute a statement prepared by <b>SPI_prepare</b>

</pre><h4><b>SYNOPSIS</b></h4><pre>
       int SPI_execute_plan_extended(SPIPlanPtr <u>plan</u>,
                                     const SPIExecuteOptions * <u>options</u>)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SPI_execute_plan_extended</b> executes a statement prepared by <b>SPI_prepare</b> or one of its siblings. This
       function is equivalent to <b>SPI_execute_plan</b>, except that information about the parameter values to be
       passed to the query is presented differently, and additional execution-controlling options can be passed.

       Query parameter values are represented by a ParamListInfo struct, which is convenient for passing down
       values that are already available in that format. Dynamic parameter sets can also be used, via hook
       functions specified in ParamListInfo.

       Also, instead of always accumulating the result tuples into a <u>SPI_tuptable</u> structure, tuples can be
       passed to a caller-supplied DestReceiver object as they are generated by the executor. This is
       particularly helpful for queries that might generate many tuples, since the data can be processed
       on-the-fly instead of being accumulated in memory.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       SPIPlanPtr <u>plan</u>
           prepared statement (returned by <b>SPI_prepare</b>)

       const SPIExecuteOptions * <u>options</u>
           struct containing optional arguments

       Callers should always zero out the entire <u>options</u> struct, then fill whichever fields they want to set.
       This ensures forward compatibility of code, since any fields that are added to the struct in future will
       be defined to behave backwards-compatibly if they are zero. The currently available <u>options</u> fields are:

       ParamListInfo <u>params</u>
           data structure containing query parameter types and values; NULL if none

       bool <u>read_only</u>
           true for read-only execution

       bool <u>allow_nonatomic</u>
           true allows non-atomic execution of CALL and DO statements (but this field is ignored unless the
           SPI_OPT_NONATOMIC flag was passed to <b>SPI_connect_ext</b>)

       bool <u>must_return_tuples</u>
           if true, raise error if the query is not of a kind that returns tuples (this does not forbid the case
           where it happens to return zero tuples)

       uint64 <u>tcount</u>
           maximum number of rows to return, or 0 for no limit

       DestReceiver * <u>dest</u>
           DestReceiver object that will receive any tuples emitted by the query; if NULL, result tuples are
           accumulated into a <u>SPI_tuptable</u> structure, as in <b>SPI_execute_plan</b>

       ResourceOwner <u>owner</u>
           The resource owner that will hold a reference count on the plan while it is executed. If NULL,
           CurrentResourceOwner is used. Ignored for non-saved plans, as SPI does not acquire reference counts
           on those.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The return value is the same as for <b>SPI_execute_plan</b>.

       When <u>options-&gt;dest</u> is NULL, <u>SPI_processed</u> and <u>SPI_tuptable</u> are set as in <b>SPI_execute_plan</b>. When
       <u>options-&gt;dest</u> is not NULL, <u>SPI_processed</u> is set to zero and <u>SPI_tuptable</u> is set to NULL. If a tuple count
       is required, the caller's DestReceiver object must calculate it.

PostgreSQL 17.5                                       2025                          <u><a href="../man3/SPI_EXECUTE_PLAN_EXTENDED.3.html">SPI_EXECUTE_PLAN_EXTENDED</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>