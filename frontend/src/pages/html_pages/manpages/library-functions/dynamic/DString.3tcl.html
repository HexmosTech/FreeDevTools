<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_DStringInit,        Tcl_DStringAppend,       Tcl_DStringAppendElement,       Tcl_DStringStartSublist,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_DStringInit,        Tcl_DStringAppend,       Tcl_DStringAppendElement,       Tcl_DStringStartSublist,
       Tcl_DStringEndSublist,  Tcl_DStringLength,   Tcl_DStringValue,   Tcl_DStringSetLength,   Tcl_DStringFree,
       Tcl_DStringResult, Tcl_DStringGetResult, Tcl_DStringToObj - manipulate dynamic strings

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       <b>Tcl_DStringInit</b>(<u>dsPtr</u>)

       char *
       <b>Tcl_DStringAppend</b>(<u>dsPtr,</u> <u>bytes,</u> <u>length</u>)

       char *
       <b>Tcl_DStringAppendElement</b>(<u>dsPtr,</u> <u>element</u>)

       <b>Tcl_DStringStartSublist</b>(<u>dsPtr</u>)

       <b>Tcl_DStringEndSublist</b>(<u>dsPtr</u>)

       Tcl_Size
       <b>Tcl_DStringLength</b>(<u>dsPtr</u>)

       char *
       <b>Tcl_DStringValue</b>(<u>dsPtr</u>)

       <b>Tcl_DStringSetLength</b>(<u>dsPtr,</u> <u>newLength</u>)

       <b>Tcl_DStringFree</b>(<u>dsPtr</u>)

       <b>Tcl_DStringResult</b>(<u>interp,</u> <u>dsPtr</u>)

       <b>Tcl_DStringGetResult</b>(<u>interp,</u> <u>dsPtr</u>)

       Tcl_Obj *
       <b>Tcl_DStringToObj</b>(<u>dsPtr</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_DString <u>*dsPtr</u> (in/out)         Pointer to structure that is used to manage a dynamic string.

       const char <u>*bytes</u> (in)              Pointer to characters to append to dynamic string.

       const char <u>*element</u> (in)            Pointer to characters to append as list element to dynamic string.

       Tcl_Size <u>length</u> (in)                Number  of  bytes  from <u>bytes</u> to add to dynamic string.  If negative,
                                           add all characters up to null terminating character.

       Tcl_Size <u>newLength</u> (in)             New  length  for  dynamic  string,  not  including  null  terminating
                                           character.

       Tcl_Interp <u>*interp</u> (in/out)         Interpreter  whose  result  is to be set from or moved to the dynamic
                                           string.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Dynamic strings provide a mechanism for building up  arbitrarily  long  strings  by  gradually  appending
       information.   If  the  dynamic string is short then there will be no memory allocation overhead;  as the
       string gets larger, additional space will be allocated as needed.

       <b>Tcl_DStringInit</b> initializes a dynamic string to zero length.  The Tcl_DString structure  must  have  been
       allocated  by  the  caller.   No  assumptions are made about the current state of the structure; anything
       already in it is discarded.  If the structure has been used previously, <b>Tcl_DStringFree</b> should be  called
       first to free up any memory allocated for the old string.

       <b>Tcl_DStringAppend</b>  adds  new  information  to  a dynamic string, allocating more memory for the string if
       needed.  If <u>length</u> is less than zero then  everything  in  <u>bytes</u>  is  appended  to  the  dynamic  string;
       otherwise  <u>length</u>  specifies  the  number of bytes to append.  <b>Tcl_DStringAppend</b> returns a pointer to the
       characters of the new string.  The string can also be retrieved from the <u>string</u> field of the  Tcl_DString
       structure.

       <b>Tcl_DStringAppendElement</b>  is  similar to <b>Tcl_DStringAppend</b> except that it does not take a <u>length</u> argument
       (it appends all of <u>element</u>) and it converts the  string  to  a  proper  list  element  before  appending.
       <b>Tcl_DStringAppendElement</b>  adds  a separator space before the new list element unless the new list element
       is the first in a list or sub-list (i.e. either the current string is empty, or it  contains  the  single
       character  “{”,  or  the  last  two characters of the current string are “ {”).  <b>Tcl_DStringAppendElement</b>
       returns a pointer to the characters of the new string.

       <b>Tcl_DStringStartSublist</b> and <b>Tcl_DStringEndSublist</b> can be used to create nested lists.  To append  a  list
       element  that is itself a sublist, first call <b>Tcl_DStringStartSublist</b>, then call <b>Tcl_DStringAppendElement</b>
       for each  of  the  elements  in  the  sublist,  then  call  <b>Tcl_DStringEndSublist</b>  to  end  the  sublist.
       <b>Tcl_DStringStartSublist</b>   appends   a   space   character   if   needed,   followed  by  an  open  brace;
       <b>Tcl_DStringEndSublist</b> appends a close brace.  Lists can be nested to any depth.

       <b>Tcl_DStringLength</b> is a macro that returns the current length of  a  dynamic  string  (not  including  the
       terminating null character).  <b>Tcl_DStringValue</b> is a  macro that returns a pointer to the current contents
       of a dynamic string.

       <b>Tcl_DStringSetLength</b>  changes  the  length  of  a dynamic string.  If <u>newLength</u> is less than the string's
       current length, then the string is truncated.  If <u>newLength</u> is greater than the string's current  length,
       then  the  string  will become longer and new space will be allocated for the string if needed.  However,
       <b>Tcl_DStringSetLength</b> will not initialize the new space except to provide a  terminating  null  character;
       it  is  up  to  the  caller to fill in the new space.  <b>Tcl_DStringSetLength</b> does not free up the string's
       storage space even if the string is truncated to zero length, so <b>Tcl_DStringFree</b> will still  need  to  be
       called.

       <b>Tcl_DStringFree</b> should be called when you are finished using the string.  It frees up any memory that was
       allocated for the string and reinitializes the string's value to an empty string.

       <b>Tcl_DStringResult</b>  sets  the result of <u>interp</u> to the value of the dynamic string given by <u>dsPtr</u>.  It does
       this by moving a pointer from <u>dsPtr</u> to the interpreter's result.  This saves the cost of  allocating  new
       memory  and  copying  the  string.   <b>Tcl_DStringResult</b>  also reinitializes the dynamic string to an empty
       string.  Since the dynamic string is reinitialized, there is no need to further call  <b>Tcl_DStringFree</b>  on
       it  and  it can be reused without calling <b>Tcl_DStringInit</b>. The caller must ensure that the dynamic string
       stored in <u>dsPtr</u> is encoded in Tcl's internal UTF-8 format.

       <b>Tcl_DStringGetResult</b> does the opposite of <b>Tcl_DStringResult</b>.  It sets the value of <u>dsPtr</u> to the result of
       <u>interp</u> and it clears <u>interp</u>'s result.  If possible it does this  by  moving  a  pointer  rather  than  by
       copying the string.

       <b>Tcl_DStringToObj</b>  returns  a  <b>Tcl_Obj</b>  containing the value of the dynamic string given by <u>dsPtr</u>. It does
       this by moving a pointer from <u>dsPtr</u> to a newly allocated <b>Tcl_Obj</b> and reinitializing to dynamic string  to
       an  empty  string. This saves the cost of allocating new memory and copying the string. Since the dynamic
       string is reinitialized, there is no need to further call <b>Tcl_DStringFree</b> on it  and  it  can  be  reused
       without calling <b>Tcl_DStringInit</b>. The returned <b>Tcl_Obj</b> has a reference count of 0.  The caller must ensure
       that the dynamic string stored in <u>dsPtr</u> is encoded in Tcl's internal UTF-8 format.

</pre><h4><b>KEYWORDS</b></h4><pre>
       append, dynamic string, free, result

Tcl                                                    7.4                                     <u><a href="../man3tcl/Tcl_DString.3tcl.html">Tcl_DString</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>