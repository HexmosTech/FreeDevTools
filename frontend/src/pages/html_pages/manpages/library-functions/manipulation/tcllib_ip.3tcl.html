<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcllib_ip - IPv4 and IPv6 address manipulation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcllib_ip - IPv4 and IPv6 address manipulation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>ip</b> <b>?1.5.1?</b>

       <b>::ip::version</b> <u>address</u>

       <b>::ip::is</b> <u>class</u> <u>address</u>

       <b>::ip::equal</b> <u>address</u> <u>address</u>

       <b>::ip::normalize</b> <u>address</u>

       <b>::ip::contract</b> <u>address</u>

       <b>::ip::distance</b> <u>ipaddr1</u> <u>ipaddr2</u>

       <b>::ip::nextIp</b> <u>ipaddr</u> ?<u>offset</u>?

       <b>::ip::prefix</b> <u>address</u>

       <b>::ip::type</b> <u>address</u>

       <b>::ip::mask</b> <u>address</u>

       <b>::ip::prefixToNative</b> <u>prefix</u>

       <b>::ip::nativeToPrefix</b> <u>nativeList</u>|<u>native</u> ?<b>-ipv4</b>?

       <b>::ip::intToString</b> <u>number</u> ?<b>-ipv4</b>?

       <b>::ip::toInteger</b> <u>ipaddr</u>

       <b>::ip::toHex</b> <u>ipaddr</u>

       <b>::ip::maskToInt</b> <u>ipmask</u>

       <b>::ip::broadcastAddress</b> <u>prefix</u> ?<b>-ipv4</b>?

       <b>::ip::maskToLength</b> <u>dottedMask</u>|<u>integerMask</u>|<u>hexMask</u> ?<b>-ipv4</b>?

       <b>::ip::lengthToMask</b> <u>maskLength</u> ?<b>-ipv4</b>?

       <b>::ip::nextNet</b> <u>ipaddr</u> <u>ipmask</u> ?<u>count</u>? ?<b>-ipv4</b>?

       <b>::ip::isOverlap</b> <u>prefix</u> <u>prefix</u>...

       <b>::ip::isOverlapNative</b> ?<b>-all</b>? ?<b>-inline</b>? ?<b>-ipv4</b>? <u>hexipaddr</u> <u>hexipmask</u> <u>hexiplist</u>

       <b>::ip::ipToLayer2Multicast</b> <u>ipaddr</u>

       <b>::ip::ipHostFromPrefix</b> <u>prefix</u> ?<b>-exclude</b> <u>prefixExcludeList</u>?

       <b>::ip::reduceToAggregates</b> <u>prefixlist</u>

       <b>::ip::longestPrefixMatch</b> <u>ipaddr</u> <u>prefixlist</u> ?<b>-ipv4</b>?

       <b>::ip::collapse</b> <u>prefixlist</u>

       <b>::ip::subtract</b> <u>prefixlist</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package provides a set of commands to help in parsing, displaying and comparing internet addresses.
       The package can handle both IPv4 (1) and IPv6 (2) address types.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::ip::version</b> <u>address</u>
              Returns the protocol version of the address (<b>4</b> or <b>6</b>), or <b>-1</b> if the  address  is  neither  IPv4  or
              IPv6.

       <b>::ip::is</b> <u>class</u> <u>address</u>
              Returns  true  if  the address is a member of the given protocol class. The class parameter may be
              either <b>ipv4</b> or <b>ipv6</b> This is effectively a boolean equivalent of the  <b>version</b>  command.  The  <u>class</u>
              argument may be shortened to <b>4</b> or <b>6</b>.

       <b>::ip::equal</b> <u>address</u> <u>address</u>
              Compare  two  address specifications for equivalence. The arguments are normalized and the address
              prefix determined (if a mask is supplied). The normalized addresses are then  compared  bit-by-bit
              and the procedure returns true if they match.

       <b>::ip::normalize</b> <u>address</u>
              Convert an IPv4 or IPv6 address into a fully expanded version. There are various shorthand ways to
              write internet addresses, missing out redundant parts or digits. This procedure is the opposite of
              <b>contract</b>.

       <b>::ip::contract</b> <u>address</u>
              Convert a <b>normalize</b>d internet address into a more compact form suitable for displaying to users.

       <b>::ip::distance</b> <u>ipaddr1</u> <u>ipaddr2</u>
              This  command  computes  the (integer) distance from IPv4 address <u>ipaddr1</u> to IPv4 address <u>ipaddr2</u>,
              i.e. "ipaddr2 - ipaddr1"

                 % ::ip::distance 1.1.1.1  1.1.1.5
                 4

       <b>::ip::nextIp</b> <u>ipaddr</u> ?<u>offset</u>?
              This command adds the integer <u>offset</u> to the IPv4 address <u>ipaddr</u> and returns the new IPv4 address.

                 % ::ip::distance 1.1.1.1  4
                 1.1.1.5

       <b>::ip::prefix</b> <u>address</u>
              Returns the address prefix generated by masking the address part with the  mask  if  provided.  If
              there is no mask then it is equivalent to calling <b>normalize</b>

       <b>::ip::type</b> <u>address</u>

       <b>::ip::mask</b> <u>address</u>
              If the address supplied includes a mask then this is returned otherwise returns an empty string.

       <b>::ip::prefixToNative</b> <u>prefix</u>
              This  command converts the string <u>prefix</u> from dotted form (&lt;ipaddr&gt;/&lt;mask&gt; format) to native (hex)
              form. Returns a list containing two elements, ipaddress and mask, in this  order,  in  hexadecimal
              notation.

                 % ip::prefixToNative 1.1.1.0/24
                 0x01010100 0xffffff00

       <b>::ip::nativeToPrefix</b> <u>nativeList</u>|<u>native</u> ?<b>-ipv4</b>?
              This  command  converts  from  native  (hex)  form  to  dotted  form.   It  is  the  complement of
              <b>::ip::prefixToNative</b>.

              list <u>nativeList</u> (in)
                     List of several ip addresses in native form. The native form  is  a  list  as  returned  by
                     <b>::ip::prefixToNative</b>.

              list <u>native</u> (in)
                     A list as returned by <b>::ip::prefixToNative</b>.

       The  command  returns  a  list  of  addresses  in  dotted form if it was called with a list of addresses.
       Otherwise a single address in dotted form is returned.

                 % ip::nativeToPrefix {0x01010100 0xffffff00} -ipv4
                 1.1.1.0/24

       <b>::ip::intToString</b> <u>number</u> ?<b>-ipv4</b>?
              This command converts from an ip address specified as integer number to dotted form.

                     ip::intToString 4294967295
                     255.255.255.255

       <b>::ip::toInteger</b> <u>ipaddr</u>
              This command converts a dotted form ip into an integer number.

                 % ::ip::toInteger 1.1.1.0
                 16843008

       <b>::ip::toHex</b> <u>ipaddr</u>
              This command converts dotted form ip into a hexadecimal number.

                 % ::ip::toHex 1.1.1.0
                 0x01010100

       <b>::ip::maskToInt</b> <u>ipmask</u>
              This command convert an ipmask in either dotted (255.255.255.0) form or mask length form (24) into
              an integer number.

                 ::ip::maskToInt 24
                 4294967040

       <b>::ip::broadcastAddress</b> <u>prefix</u> ?<b>-ipv4</b>?
              This commands returns a broadcast address in dotted form for the given route <u>prefix</u>, either in the
              form "addr/mask", or in native form. The result is in dotted form.

                 ::ip::broadcastAddress 1.1.1.0/24
                 1.1.1.255

                 ::ip::broadcastAddress {0x01010100 0xffffff00}
                 0x010101ff

       <b>::ip::maskToLength</b> <u>dottedMask</u>|<u>integerMask</u>|<u>hexMask</u> ?<b>-ipv4</b>?
              This command converts the dotted or integer form of an ipmask to the mask length form.

                 ::ip::maskToLength 0xffffff00 -ipv4
                 24

                 % ::ip::maskToLength 255.255.255.0
                 24

       <b>::ip::lengthToMask</b> <u>maskLength</u> ?<b>-ipv4</b>?
              This command converts an ipmask in mask length form to its dotted form.

                 ::ip::lengthToMask 24
                 255.255.255.0

       <b>::ip::nextNet</b> <u>ipaddr</u> <u>ipmask</u> ?<u>count</u>? ?<b>-ipv4</b>?
              This command returns an ipaddress in the same position in the  <u>count</u>  next  network.  The  default
              value for <u>count</u> is <b>1</b>.

              The address can be specified as either integer number or in dotted form. The mask can be specified
              as either integer number, dotted form, or mask length form.

              The result is in hex form.

       <b>::ip::isOverlap</b> <u>prefix</u> <u>prefix</u>...
              This  command  checks  if  the given ip prefixes overlap.  All arguments are in dotted "addr/mask"
              form. All arguments after the first prefix are compared against the first prefix. The result is  a
              boolean value. It is true if an overlap was found for any of the prefixes.

                % ::ip::isOverlap 1.1.1.0/24 2.1.0.1/32
                0

                ::ip::isOverlap 1.1.1.0/24 2.1.0.1/32 1.1.1.1/32
                1

       <b>::ip::isOverlapNative</b> ?<b>-all</b>? ?<b>-inline</b>? ?<b>-ipv4</b>? <u>hexipaddr</u> <u>hexipmask</u> <u>hexiplist</u>
              This  command is similar to <b>::ip::isOverlap</b>, however the arguments are in the native form, and the
              form of the result is under greater control of the caller.  If the option  <b>-all</b>  is  specified  it
              checks all addresses for overlap, not only until the first one is found.  If the option <b>-inline</b> is
              specified the command returns the overlapping prefix instead of index values.

              The result of the command is, depending on the specified options,

              no options
                     The index of the first overlap found, or 0 if there is none.

              -all   A list containing the indices of all overlaps found, or an empty list if there are none.

              -inline
                     The first overlapping prefix, or an empoty string if there is none.

              -all -inline
                     A list containing the prefixes of all overlaps found, or an empty list if there are none.

                % ::ip::isOverlapNative 0x01010100 0xffffff00 {{0x02010001 0xffffffff}}
                0

                % ::ip::isOverlapNative 0x01010100 0xffffff00 {{0x02010001 0xffffffff} {0x01010101 0xffffffff}}
                2

       <b>::ip::ipToLayer2Multicast</b> <u>ipaddr</u>
              This  command  an  converts  ipv4 address in dotted form into a layer 2 multicast address, also in
              dotted form.

                % ::ip::ipToLayer2Multicast 224.0.0.2
                01.00.5e.00.00.02

       <b>::ip::ipHostFromPrefix</b> <u>prefix</u> ?<b>-exclude</b> <u>prefixExcludeList</u>?
              This command returns a host address from a prefix in the form "ipaddr/masklen", also  making  sure
              that  the result is not an address found in the <u>prefixExcludeList</u>.  The result is an ip address in
              dotted form.

                %::ip::ipHostFromPrefix  1.1.1.5/24
                1.1.1.1

                %::ip::ipHostFromPrefix  1.1.1.1/32
                1.1.1.1

       <b>::ip::reduceToAggregates</b> <u>prefixlist</u>
              This command finds nets that overlap and filters out the more specific nets. The prefixes  are  in
              either addr/mask form or in native format.  The result is a list containing the non-overlapping ip
              prefixes from the input.

                % ::ip::reduceToAggregates {1.1.1.0/24 1.1.0.0/8  2.1.1.0/24 1.1.1.1/32 }
                1.0.0.0/8 2.1.1.0/24

       <b>::ip::longestPrefixMatch</b> <u>ipaddr</u> <u>prefixlist</u> ?<b>-ipv4</b>?
              This  command  finds longest prefix match from set of prefixes, given a specific host address. The
              prefixes in the list are in either native or dotted form, whereas the host address  is  in  either
              ipprefix  format,  dotted  form,  or  integer  form.   The  result is the prefix which is the most
              specific match to the host address.

                % ::ip::longestPrefixMatch 1.1.1.1 {1.1.1.0/24 1.0.0.0/8  2.1.1.0/24 1.1.1.0/28 }
                1.1.1.0/28

       <b>::ip::collapse</b> <u>prefixlist</u>
              This commands takes a list of prefixes and returns a  list  prefixes  with  the  largest  possible
              subnet masks covering the input, in this manner collapsing adjacent prefixes into larger ranges.

              This is different from <b>::ip::reduceToAggregates</b> in that the latter only removes specific nets from
              a  list  when they are covered by other elements of the input whereas this command actively merges
              nets into larger ranges when they are adjacent to each other.

              % ::ip::collapse {1.2.2.0/24 1.2.3.0/24}
              1.2.2.0/23

       <b>::ip::subtract</b> <u>prefixlist</u>
              This command takes a list of prefixes, some of which are prefixed by a dash. These latter <u>negative</u>
              prefixes are used to punch holes into the ranges described by the other, <u>positive</u>, prefixes.  I.e.
              the  negative  prefixes  are  subtracted  frrom  the  positive ones, resulting in a larger list of
              describes describing the covered ranges only as positives.

</pre><h4><b>EXAMPLES</b></h4><pre>
              % ip::version ::1
              6
              % ip::version 127.0.0.1
              4

              % ip::normalize 127/8
              127.0.0.0/8
              % ip::contract 192.168.0.0
              192.168
              %
              % ip::normalize fec0::1
              fec0:0000:0000:0000:0000:0000:0000:0001
              % ip::contract fec0:0000:0000:0000:0000:0000:0000:0001
              fec0::1

              % ip::equal 192.168.0.4/16 192.168.0.0/16
              1
              % ip::equal fec0::1/10 fec0::fe01/10
              1

</pre><h4><b>REFERENCES</b></h4><pre>
       [1]    Postel, J. "Internet Protocol." RFC 791,  September 1981, (<u><a href="http://www.ietf.org/rfc/rfc791.txt">http://www.ietf.org/rfc/rfc791.txt</a></u>)

       [2]    Hinden, R. and Deering, S., "Internet Protocol Version  6  (IPv6)  Addressing  Architecture",  RFC
              3513, April 2003 (<u><a href="http://www.ietf.org/rfc/rfc3513.txt">http://www.ietf.org/rfc/rfc3513.txt</a></u>)

</pre><h4><b>AUTHORS</b></h4><pre>
       Pat Thoyts

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>dns</u> of the <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/inet.3.html">inet</a>(3), <a href="../man7/ip.7.html">ip</a>(7), <a href="../man7/ipv6.7.html">ipv6</a>(7)

</pre><h4><b>KEYWORDS</b></h4><pre>
       internet address, ip, ipv4, ipv6, rfc 3513

</pre><h4><b>CATEGORY</b></h4><pre>
       Networking

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2004, Pat Thoyts
       Copyright (c) 2005 Aamer Akhter &lt;<a href="mailto:aakhter@cisco.com">aakhter@cisco.com</a>&gt;

tcllib                                                1.5.1                                      <u><a href="../man3tcl/tcllib_ip.3tcl.html">tcllib_ip</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>