<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>curl_url_get - extract a part from a URL</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       curl_url_get - extract a part from a URL

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLUcode curl_url_get(const CURLU *url,
                              CURLUPart part,
                              char **content,
                              unsigned int flags);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Given a <u>url</u> handle of a URL object, this function extracts an individual piece or the full URL from it.

       The  <u>part</u>  argument  specifies which part to extract (see list below) and <u>content</u> points to a 'char *' to
       get updated to point to a newly allocated string with the contents.

       The <u>flags</u> argument is a bitmask with individual features.

       The returned content pointer must be freed with <u><a href="../man3/curl_free.3.html">curl_free</a>(3)</u> after use.

</pre><h4><b>FLAGS</b></h4><pre>
       The flags argument is zero, one or more bits set in a bitmask.

       CURLU_DEFAULT_PORT
              If the handle has no port stored, this option makes <u><a href="../man3/curl_url_get.3.html">curl_url_get</a>(3)</u> return the  default  port  for
              the used scheme.

       CURLU_DEFAULT_SCHEME
              If  the  handle  has no scheme stored, this option makes <u><a href="../man3/curl_url_get.3.html">curl_url_get</a>(3)</u> return the default scheme
              instead of error.

       CURLU_NO_DEFAULT_PORT
              Instructs <u><a href="../man3/curl_url_get.3.html">curl_url_get</a>(3)</u> to not return a port number if it  matches  the  default  port  for  the
              scheme.

       CURLU_URLDECODE
              Asks  <u><a href="../man3/curl_url_get.3.html">curl_url_get</a>(3)</u>  to  URL  decode  the  contents  before returning it. It does not decode the
              scheme, the port number or the full URL.

              The query component also gets plus-to-space conversion as a bonus when this bit is set.

              Note that this URL decoding is charset unaware and you get a null-terminated string back with data
              that could be intended for a particular encoding.

              If there are byte values lower than 32 in the decoded string, the get operation returns  an  error
              instead.

       CURLU_URLENCODE
              If  set,  <u><a href="../man3/curl_url_get.3.html">curl_url_get</a>(3)</u>  URL  encodes the hostname part when a full URL is retrieved. If not set
              (default), libcurl returns the URL with the hostname raw to support IDN names to appear as-is. IDN
              hostnames are typically using non-ASCII bytes that otherwise gets percent-encoded.

              Note that even when not asking for URL encoding, the '%' (byte 37) is URL encoded to make sure the
              hostname remains valid.

       CURLU_PUNYCODE
              If set and <u>CURLU_URLENCODE</u> is not set, and asked to retrieve the <b>CURLUPART_HOST</b>  or  <b>CURLUPART_URL</b>
              parts,  libcurl  returns the host name in its punycode version if it contains any non-ASCII octets
              (and is an IDN name).

              If libcurl is built  without  IDN  capabilities,  using  this  bit  makes  <u><a href="../man3/curl_url_get.3.html">curl_url_get</a>(3)</u>  return
              <u>CURLUE_LACKS_IDN</u> if the hostname contains anything outside the ASCII range.

              (Added in curl 7.88.0)

       CURLU_PUNY2IDN
              If  set  and  asked  to  retrieve  the  <b>CURLUPART_HOST</b> or <b>CURLUPART_URL</b> parts, libcurl returns the
              hostname in its IDN (International Domain Name) UTF-8  version  if  it  otherwise  is  a  punycode
              version.   If   the   punycode  name  cannot  be  converted  to  IDN  correctly,  libcurl  returns
              <u>CURLUE_BAD_HOSTNAME</u>.

              If libcurl is built  without  IDN  capabilities,  using  this  bit  makes  <u><a href="../man3/curl_url_get.3.html">curl_url_get</a>(3)</u>  return
              <u>CURLUE_LACKS_IDN</u> if the hostname is using punycode.

              (Added in curl 8.3.0)

       CURLU_GET_EMPTY
              When  this  flag is used in curl_url_get(), it makes the function return empty query and fragments
              parts or when used  in  the  full  URL.  By  default,  libcurl  otherwise  considers  empty  parts
              non-existing.

              An  empty query part is one where this is nothing following the question mark (before the possible
              fragment). An empty fragments part is one where there is nothing following the hash sign.

              (Added in curl 8.8.0)

       CURLU_NO_GUESS_SCHEME
              When this flag is used in curl_url_get(), it treats the scheme as non-existing if it was set as  a
              result of a previous guess; when CURLU_GUESS_SCHEME was used parsing a URL.

              Using this flag when getting CURLUPART_SCHEME if the scheme was set as the result of a guess makes
              curl_url_get() return CURLUE_NO_SCHEME.

              Using  this  flag  when getting CURLUPART_URL if the scheme was set as the result of a guess makes
              curl_url_get() return the full URL without the scheme component. Such  a  URL  can  then  only  be
              parsed with curl_url_set() if CURLU_GUESS_SCHEME is used.

              (Added in curl 8.9.0)

</pre><h4><b>PARTS</b></h4><pre>
       CURLUPART_URL
              When  asked  to  return the full URL, <u><a href="../man3/curl_url_get.3.html">curl_url_get</a>(3)</u> returns a slightly cleaned up version of the
              complete URL using all available parts.

              We advise using the <u>CURLU_PUNYCODE</u> option to get the URL as "normalized"  as  possible  since  IDN
              allows hostnames to be written in many different ways that still end up the same punycode version.

              Zero-length queries and fragments are excluded from the URL unless CURLU_GET_EMPTY is set.

       CURLUPART_SCHEME
              Scheme cannot be URL decoded on get.

       CURLUPART_USER

       CURLUPART_PASSWORD

       CURLUPART_OPTIONS
              The  options field is an optional field that might follow the password in the userinfo part. It is
              only recognized/used when parsing URLs for the following schemes: pop3, smtp and imap. The URL API
              still allows users to set and get this field independently of scheme when not parsing full URLs.

       CURLUPART_HOST
              The hostname. If it is an IPv6 numeric address, the zone id is not part  of  it  but  is  provided
              separately in <u>CURLUPART_ZONEID</u>. IPv6 numerical addresses are returned within brackets ([]).

              IPv6  names are normalized when set, which should make them as short as possible while maintaining
              correct syntax.

       CURLUPART_ZONEID
              If the hostname is a numeric IPv6 address, this field might also be set.

       CURLUPART_PORT
              A port cannot be URL decoded on get. This number is returned in  a  string  just  like  all  other
              parts. That string is guaranteed to hold a valid port number in ASCII using base 10.

       CURLUPART_PATH
              The  <u>part</u>  is  always  at  least a slash ('/') even if no path was supplied in the URL. A URL path
              always starts with a slash.

       CURLUPART_QUERY
              The initial question mark that denotes the beginning of the query part is a delimiter only. It  is
              not part of the query contents.

              A not-present query returns <u>part</u> set to NULL.

              A zero-length query returns <u>part</u> as NULL unless CURLU_GET_EMPTY is set.

              The  query  part  gets  pluses  converted  to  space  when  asked  to  URL  decode on get with the
              CURLU_URLDECODE bit.

       CURLUPART_FRAGMENT
              The initial hash sign that denotes the beginning of the fragment is a delimiter only.  It  is  not
              part of the fragment contents.

              A not-present fragment returns <u>part</u> set to NULL.

              A zero-length fragment returns <u>part</u> as NULL unless CURLU_GET_EMPTY is set.

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURLUcode rc;
         CURLU *url = curl_url();
         rc = curl_url_set(url, CURLUPART_URL, "https://example.com", 0);
         if(!rc) {
           char *scheme;
           rc = curl_url_get(url, CURLUPART_SCHEME, &amp;scheme, 0);
           if(!rc) {
             printf("the scheme is %s\n", scheme);
             curl_free(scheme);
           }
           curl_url_cleanup(url);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.62.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Returns   a   CURLUcode   error  value,  which  is  CURLUE_OK  (0)  if  everything  went  fine.  See  the
       <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u> man page for the full list with descriptions.

       If this function returns an error, no URL part is returned.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_CURLU.3.html">CURLOPT_CURLU</a></b>(3),      <b><a href="../man3/curl_url.3.html">curl_url</a></b>(3),      <b><a href="../man3/curl_url_cleanup.3.html">curl_url_cleanup</a></b>(3),      <b><a href="../man3/curl_url_dup.3.html">curl_url_dup</a></b>(3),      <b><a href="../man3/curl_url_set.3.html">curl_url_set</a></b>(3),
       <b><a href="../man3/curl_url_strerror.3.html">curl_url_strerror</a></b>(3)

libcurl                                            2025-06-16                                    <u><a href="../man3/curl_url_get.3.html">curl_url_get</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>