<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::DMARC::Report::Aggregate - aggregate report object</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-dmarc-perl">libmail-dmarc-perl_1.20240314-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::DMARC::Report::Aggregate - aggregate report object

</pre><h4><b>VERSION</b></h4><pre>
       version 1.20240314

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class is used as the canonization of an aggregate report.

       When reports are received, the XML is parsed into an Aggregate object, which then gets passed to the
       Report::Store and saved. When sending DMARC reports, data is extracted from the Store as an Aggregate
       object, exported as XML, and sent.

</pre><h4><b>2013</b> <b>Draft</b> <b>Description</b></h4><pre>
       AGGREGATE REPORTS

       The report SHOULD include the following data:

          o  Enough information for the report consumer to re-calculate DMARC
             disposition based on the published policy, message disposition, and
             SPF, DKIM, and identifier alignment results. {R12}

          o  Data for each sender subdomain separately from mail from the
             sender's organizational domain, even if no subdomain policy is
             applied. {R13}

          o  Sending and receiving domains {R17}

          o  The policy requested by the Domain Owner and the policy actually
             applied (if different) {R18}

          o  The number of successful authentications {R19}

          o  The counts of messages based on all messages received even if
             their delivery is ultimately blocked by other filtering agents {R20}

       Aggregate reports are most useful when they all cover a common time period.  By contrast, correlation of
       these reports from multiple generators when they cover incongruous time periods is difficult or
       impossible.  Report generators SHOULD, wherever possible, adhere to hour boundaries for the reporting
       period they are using.  For example, starting a per-day report at 00:00; starting per-hour reports at
       00:00, 01:00, 02:00; et cetera.  Report Generators using a 24-hour report period are strongly encouraged
       to begin that period at 00:00 UTC, regardless of local timezone or time of report production, in order to
       facilitate correlation.

</pre><h4><b>Report</b> <b>Structure</b></h4><pre>
       This is a translation of the XML report format in the 2013 Draft, converted to perl data structures.

          feedback =&gt; {
             version          =&gt; 1.0,  # decimal
             report_metadata  =&gt; {                # info about DMARC reporter
                 report_id          =&gt; string
                 org_name           =&gt; 'Art Farm',
                 email              =&gt; '<a href="mailto:no-reply@theartfarm.com">no-reply@theartfarm.com</a>',
                 extra_contact_info =&gt; string     # min 0
                 date_range         =&gt; {
                     begin          =&gt; epoch time,
                     end            =&gt; epoch time,
                 },
                 error              =&gt; string,   # min 0, max unbounded
             },
             policy_published =&gt; {
                 domain =&gt;   string
                 adkim  =&gt;   r, s
                 aspf   =&gt;   r, s
                 p      =&gt;   none, quarantine, reject
                 sp     =&gt;   none, quarantine, reject
                 pct    =&gt;   integer
                 fo     =&gt;   string
             },
             record   =&gt; [
                {  row =&gt; {
                      source_ip     =&gt;   # IPAddress
                      count         =&gt;   # integer
                      policy_evaluated =&gt; {       # min=1
                         disposition =&gt;           # none, quarantine, reject
                         dkim        =&gt;           # pass, fail
                         spf         =&gt;           # pass, fail
                         reason      =&gt; [         # min 0, max unbounded
                             {   type    =&gt;    # forwarded sampled_out, trusted_forwarder, mailing_list, local_policy, other
                                 comment =&gt;    # string, min 0
                             },
                         ],
                       }
                   },
                   identifiers =&gt; {
                       envelope_to    min=0
                       envelope_from  min=1
                       header_from    min=1
                   },
                   auth_results =&gt; {
                      spf =&gt; [            # min 1, max unbounded
                         {  domain  =&gt;    # min 1
                            scope   =&gt;    # min 1, helo, mfrom
                            result  =&gt;    # min 1, none neutral pass fail softfail temperror permerror
                         }
                      ]                   # ( unknown -&gt; temperror, error -&gt; permerror )
                      dkim   =&gt; [                # min 0, max unbounded
                         {  domain       =&gt;  ,   # min 1, the d= parameter in the signature
                            selector     =&gt;  ,   # min 0, string
                            result       =&gt;  ,   # none pass fail policy neutral temperror permerror
                            human_result =&gt;      # min 0, string
                         },
                      ],
                   },
               ]
            },
         };

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Matt Simerson &lt;<a href="mailto:msimerson@cpan.org">msimerson@cpan.org</a>&gt;

       •   Davide Migliavacca &lt;<a href="mailto:shari@cpan.org">shari@cpan.org</a>&gt;

       •   Marc Bradshaw &lt;<a href="mailto:marc@marcbradshaw.net">marc@marcbradshaw.net</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by Matt Simerson.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.38.2                                       2024-08-21                <u>Mail::DMARC::Report::<a href="../man3pm/Aggregate.3pm.html">Aggregate</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>