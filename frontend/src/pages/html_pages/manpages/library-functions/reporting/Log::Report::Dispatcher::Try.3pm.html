<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log::Report::Dispatcher::Try - capture all reports as exceptions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblog-report-perl">liblog-report-perl_1.40-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Log::Report::Dispatcher::Try - capture all reports as exceptions

</pre><h4><b>INHERITANCE</b></h4><pre>
        Log::Report::Dispatcher::Try
          is a Log::Report::Dispatcher

</pre><h4><b>SYNOPSIS</b></h4><pre>
        try { ... };       # mind the ';' !!
        if($@) {           # signals something went wrong

        if(try {...}) {    # block ended normally

        my $x = try { read_temperature() };
        my @x = try { read_lines_from_file() };

        try { ... }        # no comma!!
           mode =&gt; 'DEBUG', accept =&gt; 'ERROR-';

        try sub { ... },   # with comma
           mode =&gt; 'DEBUG', accept =&gt; 'ALL';

        try \&amp;myhandler, accept =&gt; 'ERROR-';
        try { ... } hide =&gt; 'TRACE';

        print ref $@;      # Log::Report::Dispatcher::Try

        $@-&gt;reportFatal;   # re-dispatch result of try block
        $@-&gt;reportAll;     # ... also warnings etc
        if($@) {...}       # if errors
        if($@-&gt;failed) {   # same       # }
        if($@-&gt;success) {  # no errors  # }

        try { # something causes an error report, which is caught
              failure 'no network';
            };
        $@-&gt;reportFatal(to =&gt; 'syslog');  # overrule destination

        print $@-&gt;exceptions; # no re-cast, just print

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>try</b> works like Perl's build-in eval(), but implements real exception handling which Perl core lacks.

       The <b>Log::Report::try()</b> function creates this "::Try" dispatcher object with name 'try'.  After the try()
       is over, you can find the object in $@.  The $@ as "::Try" object behaves exactly as the $@ produced by
       "eval", but has many added features.

       The try() function catches fatal errors happening inside the BLOCK (CODE reference which is just
       following the function name) into the "::Try" object $@.  The errors are not automatically progressed to
       active dispatchers.  However, non-fatal exceptions (like info or notice) are also collected (unless not
       accepted, see new(accept), but also immediately passed to the active dispatchers (unless the reason is
       hidden, see new(hide))

       After the try() has run, you can introspect the collected exceptions.  Typically, you use <b>wasFatal()</b> to
       get the exception which terminated the run of the BLOCK.

       Extends "DESCRIPTION" in Log::Report::Dispatcher.

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Log::Report::Dispatcher.

   <b>Constructors</b>
       Extends "Constructors" in Log::Report::Dispatcher.

       $obj-&gt;<b>close</b>()
           Inherited, see "Constructors" in Log::Report::Dispatcher

       Log::Report::Dispatcher::Try-&gt;<b>new</b>($type, $name, %options)
            -Option       --Defined in             --Default
             accept         Log::Report::Dispatcher  depend on mode
             charset        Log::Report::Dispatcher  &lt;undef&gt;
             died                                    undef
             exceptions                              []
             format_reason  Log::Report::Dispatcher  'LOWERCASE'
             hide                                    'NONE'
             locale         Log::Report::Dispatcher  &lt;system locale&gt;
             mode           Log::Report::Dispatcher  'NORMAL'
             on_die                                  'ERROR'

           accept =&gt; REASONS
           charset =&gt; CHARSET
           died =&gt; STRING
             The exit string or object ($@) of the eval'ed block, in its unprocessed state.

           exceptions =&gt; ARRAY
             ARRAY of Log::Report::Exception objects.

           format_reason =&gt; 'UPPERCASE'|'LOWERCASE'|'UCFIRST'|'IGNORE'|CODE
           hide =&gt; REASONS|ARRAY|'ALL'|'NONE'
             [1.09] see <b>hide()</b>

           locale =&gt; LOCALE
           mode =&gt; 'NORMAL'|'VERBOSE'|'ASSERT'|'DEBUG'|0..3
           on_die =&gt; 'ERROR'|'PANIC'
             When  code  which  runs  in  this  block  exits  with  a  <b>die()</b>,  it  will  get  translated  into a
             Log::Report::Exception using  <b>Log::Report::Die::die_decode()</b>.   How  serious  are  we  about  these
             errors?

   <b>Accessors</b>
       Extends "Accessors" in Log::Report::Dispatcher.

       $obj-&gt;<b>die2reason</b>()
           Returns the value of new(on_die).

       $obj-&gt;<b>died</b>( [STRING] )
           The  exit  string  or  object  ($@) of the eval'ed block, in its unprocessed state.  They will always
           return true when they where deadly, and it always stringifies into something useful.

       $obj-&gt;<b>exceptions</b>()
           Returns all collected "Log::Report::Exceptions".  The last of them may be a fatal one.  The other are
           non-fatal.

       $obj-&gt;<b>hide</b>(@reasons)
           [1.09] By default, the try will only catch messages which stop the execution  of  the  block  (errors
           etc, internally a 'die').  Other messages are passed to the parent dispatchers.

           This  option  gives  the opportunity to stop, for instance, trace messages.  Those messages are still
           collected inside the try object (unless excluded by new(accept)), so  may  get  passed-on  later  via
           <b>reportAll()</b> if you like.

           Be warned: Using this method will reset the whole 'hide' configuration: it's a <u>set</u> not an <u>add</u>.

           example: change the setting of the running block

             my $parent_try = dispatcher 'active-try';
             $parent_try-&gt;hide('ALL');

       $obj-&gt;<b>hides</b>($reason)
           Check whether the try stops message which were produced for $reason.

       $obj-&gt;<b>isDisabled</b>()
           Inherited, see "Accessors" in Log::Report::Dispatcher

       $obj-&gt;<b>mode</b>()
           Inherited, see "Accessors" in Log::Report::Dispatcher

       $obj-&gt;<b>name</b>()
           Inherited, see "Accessors" in Log::Report::Dispatcher

       $obj-&gt;<b>needs</b>( [$reason] )
           Inherited, see "Accessors" in Log::Report::Dispatcher

       $obj-&gt;<b>type</b>()
           Inherited, see "Accessors" in Log::Report::Dispatcher

   <b>Logging</b>
       Extends "Logging" in Log::Report::Dispatcher.

       $obj-&gt;<b>addSkipStack</b>(@CODE)
       Log::Report::Dispatcher::Try-&gt;<b>addSkipStack</b>(@CODE)
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>collectLocation</b>()
       Log::Report::Dispatcher::Try-&gt;<b>collectLocation</b>()
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>collectStack</b>( [$maxdepth] )
       Log::Report::Dispatcher::Try-&gt;<b>collectStack</b>( [$maxdepth] )
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>log</b>($opts, $reason, $message)
           Other  dispatchers translate the message here, and make it leave the program.  However, messages in a
           "try" block are only captured in an intermediate layer: they may never be presented to an  end-users.
           And for sure, we do not know the language yet.

           The $message is either a STRING or a Log::Report::Message.

       $obj-&gt;<b>reportAll</b>(%options)
           Re-cast  the  messages  in  all  collect exceptions into the defined dispatchers, which were disabled
           during the try block. The %options will end-up as HASH  of  %options  to  <b>Log::Report::report()</b>;  see
           <b>Log::Report::Exception::throw()</b> which does the job.

       $obj-&gt;<b>reportFatal</b>()
           Re-cast  only  the fatal message to the defined dispatchers.  If the block was left without problems,
           then nothing will be done.  The %options will end-up as HASH of  %options  to  <b>Log::Report::report()</b>;
           see <b>Log::Report::Exception::throw()</b> which does the job.

       $obj-&gt;<b>skipStack</b>()
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>stackTraceLine</b>(%options)
       Log::Report::Dispatcher::Try-&gt;<b>stackTraceLine</b>(%options)
           Inherited, see "Logging" in Log::Report::Dispatcher

       $obj-&gt;<b>translate</b>(HASH-$of-%options, $reason, $message)
           Inherited, see "Logging" in Log::Report::Dispatcher

   <b>Status</b>
       $obj-&gt;<b>failed</b>()
           Returns true if the block was left with an fatal message.

       $obj-&gt;<b>showStatus</b>()
           If  this  object  is  kept  in  $@,  and someone uses this as string, we want to show the fatal error
           message.

           The message is not very informative for the good cause: we do not want people to simply print the $@,
           but wish for a re-cast of the message using <b>reportAll()</b> or <b>reportFatal()</b>.

       $obj-&gt;<b>success</b>()
           Returns true if the block exited normally.

       $obj-&gt;<b>wasFatal</b>(%options)
           Returns the Log::Report::Exception which caused the "try" block  to  die,  otherwise  an  empty  LIST
           (undef).

            -Option--Default
             class   undef

           class =&gt; CLASS|REGEX
             Only  return the exception if it was fatal, and in the same time in the specified CLASS (as string)
             or matches the REGEX.  See <b>Log::Report::Message::inClass()</b>

</pre><h4><b>DETAILS</b></h4><pre>
       Extends "DETAILS" in Log::Report::Dispatcher.

</pre><h4><b>OVERLOADING</b></h4><pre>
       overload: <b>boolean</b>
           Returns true if the previous try block did produce a terminal error.  This "try" object  is  assigned
           to $@, and the usual perl syntax is "if($@) {...error-handler...}".

       overload: <b>stringify</b>
           When $@ is used the traditional way, it is checked to have a string content.  In this case, stringify
           into the fatal error or nothing.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This  module  is  part  of  Log-Report  distribution  version  1.40,  built  on  April 18, 2025. Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2007-2025 by [Mark Overmeer &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]. For other contributors see ChangeLog.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-20                  <u>Log::Report::Dispatcher::<a href="../man3pm/Try.3pm.html">Try</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>