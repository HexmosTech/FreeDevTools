<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>report - Create and manipulate report objects</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       report - Create and manipulate report objects

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>report</b> <b>?0.5?</b>

       <b>::report::report</b> <u>reportName</u> <u>columns</u> ?<b>style</b> <u>style</u> <u>arg...</u>?

       <b>reportName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <b>::report::defstyle</b> <u>styleName</u> <u>arguments</u> <u>script</u>

       <b>::report::rmstyle</b> <u>styleName</u>

       <b>::report::stylearguments</b> <u>styleName</u>

       <b>::report::stylebody</b> <u>styleName</u>

       <b>::report::styles</b>

       <u>reportName</u> <b>destroy</b>

       <u>reportName</u> <u>templatecode</u> <b>disable</b>|<b>enable</b>

       <u>reportName</u> <u>templatecode</u> <b>enabled</b>

       <u>reportName</u> <u>templatecode</u> <b>get</b>

       <u>reportName</u> <u>templatecode</u> <b>set</b> <u>templatedata</u>

       <u>reportName</u> <b>tcaption</b> ?<u>size</u>?

       <u>reportName</u> <b>bcaption</b> <u>size</u>

       <u>reportName</u> <b>size</b> <u>column</u> ?<u>number</u>|<b>dyn</b>?

       <u>reportName</u> <b>sizes</b> ?<u>size-list</u>?

       <u>reportName</u> <b>pad</b> <u>column</u> ?<b>left</b>|<b>right</b>|<b>both</b> ?<u>padstring</u>??

       <u>reportName</u> <b>justify</b> <u>column</u> ?<b>left</b>|<b>right</b>|<b>center</b>?

       <u>reportName</u> <b>printmatrix</b> <u>matrix</u>

       <u>reportName</u> <b>printmatrix2channel</b> <u>matrix</u> <u>chan</u>

       <u>reportName</u> <b>columns</b>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides  report  objects which can be used by the formatting methods of matrix objects to
       generate tabular reports of the matrix in various forms. The  report  objects  defined  here  break  each
       report  down  into  three  <b>REGIONS</b>  and ten classes of <u>lines</u> (various separator- and data-lines). See the
       following section for more detailed explanations.

       <b>::report::report</b> <u>reportName</u> <u>columns</u> ?<b>style</b> <u>style</u> <u>arg...</u>?
              Creates a new report object for a report having <u>columns</u> columns  with  an  associated  global  Tcl
              command  whose  name  is  <u>reportName</u>.  This  command  may  be used to invoke various configuration
              operations on the report. It has the following general form:

              <b>reportName</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
                     <u>Option</u> and the <u>arg</u>s determine the exact behavior of the command. See section <b>REPORT</b> <b>METHODS</b>
                     for more explanations. If no <b>style</b> is specified the report will use the builtin style <b>plain</b>
                     as its default configuration.

       <b>::report::defstyle</b> <u>styleName</u> <u>arguments</u> <u>script</u>
              Defines the new style <u>styleName</u>. See section <b>STYLES</b> for more information.

       <b>::report::rmstyle</b> <u>styleName</u>
              Deletes the style <u>styleName</u>. Trying to delete an unknown or builtin style will result in an error.
              Beware, this command will not check that there are no other styles depending on the  deleted  one.
              Deleting  a style which is still used by another style FOO will result in a runtime error when FOO
              is applied to a newly instantiated report.

       <b>::report::stylearguments</b> <u>styleName</u>
              This introspection command returns the list of arguments associated with the style <u>styleName</u>.

       <b>::report::stylebody</b> <u>styleName</u>
              This introspection command returns the script associated with the style <u>styleName</u>.

       <b>::report::styles</b>
              This introspection command returns a list containing the names of all styles known to the  package
              at the time of the call. The order of the names in the list reflects the order in which the styles
              were  created. In other words, the first item is the predefined style <b>plain</b>, followed by the first
              style defined by the user, and so on.

</pre><h4><b>REGIONS</b></h4><pre>
       The three regions are the <u>top</u> <u>caption</u>, <u>data</u> <u>area</u> and <u>bottom</u> <u>caption</u>. These  are,  roughly  speaking,  the
       title,  the  values to report and a title at the bottom. The size of the caption regions can be specified
       by the user as the number of rows they occupy in the matrix to format. The  size  of  the  data  area  is
       specified implicitly.

</pre><h4><b>LINES</b></h4><pre>
       <b>TEMPLATES</b>  are  associated  with  each  of the ten line classes, defining the formatting for this kind of
       line. The user is able to enable and disable the separator lines at will, but not the data  lines.  Their
       usage  is  solely  determined  by  the  number of rows contained in the three regions. Data lines and all
       enabled separators must have a template associated with them.

       Note that the data-lines in a report and the rows in the matrix the report was generated from are <u>not</u>  in
       a 1:1 relationship if any row in the matrix has a height greater than one.

       The different kinds of lines and the codes used by the report methods to address them are:

       <b>top</b>    The  topmost  line  of a report. Separates the report from anything which came before it. The user
              can enable the usage of this line at will.

       <b>topdatasep</b>
              This line is used to separate the data rows in the top caption region, if it  contains  more  than
              one row and the user enabled its usage.

       <b>topcapsep</b>
              This  line  is  used to separate the top caption and data regions, if the top caption is not empty
              and the user enabled its usage.

       <b>datasep</b>
              This line is used to separate the data rows in the data region, if it contains more than  one  row
              and the user enabled its usage.

       <b>botcapsep</b>
              This  line  is  used to separate the data and bottom caption regions, if the bottom caption is not
              empty and the user enabled its usage.

       <b>botdatasep</b>
              This line is used to separate the data rows in the bottom caption region, if it contains more than
              one row and the user enabled its usage.

       <b>bottom</b> The bottommost line of a report. Separates the report from anything which comes after it. The user
              can enable the usage of this line at will.

       <b>topdata</b>
              This line defines the format of data lines in the top caption region of the report.

       <b>data</b>   This line defines the format of data lines in the data region of the report.

       <b>botdata</b>
              This line defines the format of data lines in the bottom caption region of the report.

</pre><h4><b>TEMPLATES</b></h4><pre>
       Each template is a list of strings used to format the line it is associated with. For a report containing
       <b>n</b> columns a template for a data line has to contain "<b>n</b>+1" items and  a  template  for  a  separator  line
       "2*<b>n</b>+1" items.

       The  items  in a data template specify the strings used to separate the column information. Together with
       the corresponding items in the separator templates they form the vertical lines in the report.

       <u>Note</u> that the corresponding items in all defined templates have to be  of  equal  length.  This  will  be
       checked by the report object. The first item defines the leftmost vertical line and the last item defines
       the rightmost vertical line. The item at index <b>k</b> ("1",...,"<b>n</b>-2") separates the information in the columns
       "<b>k</b>-1" and "<b>k</b>".

       The  items  in  a  separator  template  having  an  even-numbered index ("0","2",...)  specify the column
       separators. The item at index "2*<b>k</b>" ("0","2",...,"2*<b>n</b>") corresponds to the items at index "<b>k</b>" in the data
       templates.

       The items in a separator template having an odd-numbered index ("1","3",...) specify the strings used  to
       form  the  horizontal  lines  in  the  separator  lines.  The item at index "2*<b>k</b>+1" ("1","3",...,"2*<b>n</b>+1")
       corresponds to column "<b>k</b>". When generating the horizontal lines the items are replicated to be  at  least
       as long as the size of their column and then cut to the exact size.

</pre><h4><b>STYLES</b></h4><pre>
       Styles are a way for the user of this package to define common configurations for report objects and then
       use  them  later during the actual instantiation of report objects. They are defined as tcl scripts which
       when executed configure the report object into the requested configuration.

       The command to define styles is <b>::report::defstyle</b>. Its last argument is the tcl  <b>script</b>  performing  the
       actual reconfiguration of the report object to obtain the requested style.

       In  this script the names of all previously defined styles are available as commands, as are all commands
       found in a safe interpreter and the configuration  methods  of  report  objects.  The  latter  implicitly
       operate  on the object currently executing the style script. The <b>arguments</b> declared here are available in
       the <b>script</b> as variables. When calling the command of  a  previously  declared  style  all  the  arguments
       expected by it have to be defined in the call.

</pre><h4><b>REPORT</b> <b>METHODS</b></h4><pre>
       The following commands are possible for report objects:

       <u>reportName</u> <b>destroy</b>
              Destroys the report, including its storage space and associated command.

       <u>reportName</u> <u>templatecode</u> <b>disable</b>|<b>enable</b>
              Enables  or  disables  the usage of the template addressed by the <u>templatecode</u>. Only the codes for
              separator lines are allowed here. It is not possible to enable or disable data lines.

              Enabling a template causes the report to check all  used  templates  for  inconsistencies  in  the
              definition of the vertical lines (See section <b>TEMPLATES</b>).

       <u>reportName</u> <u>templatecode</u> <b>enabled</b>
              Returns the whether the template addressed by the <u>templatecode</u> is currently enabled or not.

       <u>reportName</u> <u>templatecode</u> <b>get</b>
              Returns the template currently associated with the kind of line addressed by the <u>templatecode</u>. All
              known templatecodes are allowed here.

       <u>reportName</u> <u>templatecode</u> <b>set</b> <u>templatedata</u>
              Sets  the template associated with the kind of line addressed by the <u>templatecode</u> to the new value
              in <u>templatedata</u>. See section <b>TEMPLATES</b> for constraints on the length of templates.

       <u>reportName</u> <b>tcaption</b> ?<u>size</u>?
              Specifies the <u>size</u> of the top caption region as the number rows it occupies in the  matrix  to  be
              formatted.  Only  numbers  greater  than or equal to zero are allowed. If no <u>size</u> is specified the
              command will return the current size instead.

              Setting the size of the top caption to a value greater than zero enables  the  corresponding  data
              template  and  causes the report to check all used templates for inconsistencies in the definition
              of the vertical lines (See section <b>TEMPLATES</b>).

       <u>reportName</u> <b>bcaption</b> <u>size</u>
              Specifies the <u>size</u> of the bottom caption region as the number rows it occupies in the matrix to be
              formatted. Only numbers greater than or equal to zero are allowed. If no  <u>size</u>  is  specified  the
              command will return the current size instead.

              Setting the size of the bottom caption to a value greater than zero enables the corresponding data
              template  and  causes the report to check all used templates for inconsistencies in the definition
              of the vertical lines (See section <b>TEMPLATES</b>).

       <u>reportName</u> <b>size</b> <u>column</u> ?<u>number</u>|<b>dyn</b>?
              Specifies the size of the <u>column</u> in the output. The value <b>dyn</b> means that the columnwidth  returned
              by the matrix to be formatted for the specified column shall be used. The formatting of the column
              is  dynamic. If a fixed <u>number</u> is used instead of <b>dyn</b> it means that the column has a width of that
              many characters (padding excluded). Only numbers greater than zero are allowed here.

              If no size specification is given the command will return the current size of the <u>column</u> instead.

       <u>reportName</u> <b>sizes</b> ?<u>size-list</u>?
              This method allows the user to specify the sizes of all columns in one call.  Its  argument  is  a
              list  containing the sizes to associate with the columns. The first item is associated with column
              0, the next with column 1, and so on.

              If no <u>size-list</u> is specified the command will return a list containing  the  currently  set  sizes
              instead.

       <u>reportName</u> <b>pad</b> <u>column</u> ?<b>left</b>|<b>right</b>|<b>both</b> ?<u>padstring</u>??
              This  method  allows  the user to specify padding on the left, right or both sides of a <u>column</u>. If
              the <u>padstring</u> is not specified it defaults to a single space character. <u>Note</u>: An  alternative  way
              of  specifying  the  padding is to use vertical separator strings longer than one character in the
              templates (See section <b>TEMPLATES</b>).

              If no pad specification is given at all the command will return the current state of  padding  for
              the  column  instead.  This  will  be  a  list containing two elements, the first element the left
              padding, the second describing the right padding.

       <u>reportName</u> <b>justify</b> <u>column</u> ?<b>left</b>|<b>right</b>|<b>center</b>?
              Declares how the cell values for a <u>column</u> are filled into the report given the specified size of a
              column in the report.

              For <b>left</b> and <b>right</b> justification a cell value shorter than the width of the column is  bound  with
              its  named  edge to the same edge of the column. The other side is filled with spaces. In the case
              of <b>center</b> the spaces are placed to both sides of the value and the left number  of  spaces  is  at
              most one higher than the right number of spaces.

              For a value longer than the width of the column the value is cut at the named edge. This means for
              <b>left</b> justification that the <u>tail</u> (i.e. the <b>right</b> part) of the value is made visible in the output.
              For  <b>center</b> the value is cut at both sides to fit into the column and the number of characters cut
              at the left side of the value is at most one less than the number of characters cut from the right
              side.

              If no justification was specified the command will return the current justification for the column
              instead.

       <u>reportName</u> <b>printmatrix</b> <u>matrix</u>
              Formats the <u>matrix</u> according to the configuration of the report and returns the resulting  string.
              The  matrix  has  to  have  the  same number of columns as the report. The matrix also has to have
              enough rows so that the top and bottom caption regions do not overlap. The data region is  allowed
              to be empty.

       <u>reportName</u> <b>printmatrix2channel</b> <u>matrix</u> <u>chan</u>
              Formats  the  <u>matrix</u>  according  to the configuration of the report and writes the result into the
              channel <u>chan</u>. The matrix has to have the same number of columns as the report. The matrix also has
              to have enough rows so that the top and bottom caption regions do not overlap. The data region  is
              allowed to be empty.

       <u>reportName</u> <b>columns</b>
              Returns the number of columns in the report.

       The  methods <b>size</b>, <b>pad</b> and <b>justify</b> all take a column index as their first argument. This index is allowed
       to use all the forms of an index as accepted by the <b>lindex</b> command. The  allowed  range  for  indices  is
       "0,...,[<b>reportName</b> columns]-1".

</pre><h4><b>EXAMPLES</b></h4><pre>
       Our examples define some generally useful report styles.

       A  simple  table  with  lines  surrounding  all information and vertical separators, but without internal
       horizontal separators.

                  ::report::defstyle simpletable {} {
                data set [split "[string repeat "| "   [columns]]|"]
                top  set [split "[string repeat "+ - " [columns]]+"]
                bottom  set [top get]
                top  enable
                bottom  enable
                  }

       An extension of a <b>simpletable</b>, see above, with a title area.

                  ::report::defstyle captionedtable {{n 1}} {
                simpletable
                topdata   set [data get]
                topcapsep set [top get]
                topcapsep enable
                tcaption $n
                  }

       Given the definitions above now an example which actually formats a matrix  into  a  tabular  report.  It
       assumes that the matrix actually contains useful data.

                  % ::struct::matrix m
                  % # ... fill m with data, assume 5 columns
                  % ::report::report r 5 style captionedtable 1
                  % r printmatrix m
                  +---+-------------------+-------+-------+--------+
                  |000|VERSIONS:          |2:8.4a3|1:8.4a3|1:8.4a3%|
                  +---+-------------------+-------+-------+--------+
                  |001|CATCH return ok    |7      |13     |53.85   |
                  |002|CATCH return error |68     |91     |74.73   |
                  |003|CATCH no catch used|7      |14     |50.00   |
                  |004|IF if true numeric |12     |33     |36.36   |
                  |005|IF elseif          |15     |47     |31.91   |
                  |   |true numeric       |       |       |        |
                  +---+-------------------+-------+-------+--------+
                  %
                  % # alternate way of doing the above
                  % m format 2string r

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>report</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       matrix, report, table

</pre><h4><b>CATEGORY</b></h4><pre>
       Data structures

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2002-2014,2022 Andreas Kupries &lt;<a href="mailto:andreas.kupries@gmail.com">andreas.kupries@gmail.com</a>&gt;

tcllib                                                 0.5                                          <u><a href="../man3tcl/report.3tcl.html">report</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>