<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User::Simple::Admin - User::Simple user administration</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libuser-simple-perl">libuser-simple-perl_1.45-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       User::Simple::Admin - User::Simple user administration

</pre><h4><b>SYNOPSIS</b></h4><pre>
         $ua = User::Simple::Admin-&gt;new($db, $user_table);

         $ua = User::Simple::Admin-&gt;create_rdbms_db_structure($db, $user_table,
             [$extra_sql]);
         $ua = User::Simple::Admin-&gt;create_plain_db_structure($db, $user_table,
             [$extra_sql]);
         $ok = User::Simple::Admin-&gt;has_db_structure($db, $user_table);

         %users = $ua-&gt;dump_users;

         $id = $ua-&gt;id($login);
         $login = $ua-&gt;login($id);

         $otherattrib = $user-&gt;otherattrib($id);

         $ok = $usr-&gt;set_login($id, $login);
         $ok = $usr-&gt;set_passwd($id, $passwd);
         $ok = $usr-&gt;set_otherattrib($id, $value);
         $ok = $usr-&gt;clear_session($id);

         $id = $ua-&gt;new_user(login =&gt; $login, passwd =&gt; $passwd,
               [otherattribute =&gt; $otherattribute]);

         $ok = $ua-&gt;remove_user($id);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       User::Simple::Admin manages the administrative part of the User::Simple modules - Please check
       User::Simple for a general overview of these modules and an explanation on what-goes-where.

       User::Simple::Admin works as a regular administrator would: The module should be instantiated only once
       for all of your users' administration, if possible, and not instantiated once for each user (in
       contraposition to User::Simple, as it works from each of the users' perspective in independent
       instantiations).

       Note also that User::Simple::Admin does b&lt;not&gt; perform the administrative user checks - It is meant to be
       integrated to your system, and it is your system which should carry out all of the needed authentication
       checks.

   <b>CONSTRUCTOR</b>
       Administrative actions for User::Simple modules are handled through this Admin object. To instantiate it:

         $ua = User::Simple::Admin-&gt;new($db, $user_table);

       $db is an open connection to the database where the user data is stored.

       $user_table is the name of the table that holds the users' data.

       If we do not yet have the needed DB structure to store the user information, we can use this class method
       as a constructor as well:

         $ua = User::Simple::Admin-&gt;create_rdbms_db_structure($db, $user_table,
             [$extra_sql]);

         $ua = User::Simple::Admin-&gt;create_plain_db_structure($db, $user_table,
             [$extra_sql]);

       The first one should be used if your DBI handle ($db) points to a real RDBMS, such as PostgreSQL or
       MySQL. In case you are using a file-based DBD (such as DBD::XBase, DBD::DBM, DBD::CVS or any other which
       does not use a real RDBMS for storage), use "User::Simple::Admin-&gt;create_plain_db_structure" instead.
       What is the difference? In the first case, we will create a table that has internal consistency checks -
       Some fields are declared NOT NULL, some fields are declared UNIQUE, and the user ID is used as a PRIMARY
       KEY. This cannot, of course, be achieved using file-based structures, so the integrity can only be
       maintained from within our scripts.

       This module does not provide the functionality to modify the created tables by adding columns to it,
       although methods do exist to access and modify the values stored in those columns (see the "CREATING,
       QUERYING AND MODIFYING USERS" section below), as many DBDs do not implement the ALTER TABLE SQL commands.
       It does, however, allow you to specify extra fields in the tables at creation time - If you specify a
       third extra parameter, it will be included as part of the table creation - i.e., you can create a
       User::Simple table with fields for the user's first and family names and a UNIQUE constraint over them
       this way:

         $ua = User::Simple::Admin-&gt;create_rdbms_db_structure($db, $user_table,
             'firstname <a href="../man30/varchar.30.html">varchar</a>(30) NOT NULL, famname <a href="../man30/varchar.30.html">varchar</a>(30) NOT NULL,
              UNIQUE (firstname,famname)');

       Keep in mind that the internal fields are "id", "login", "passwd", "session" and "session_exp". Don't
       mess with them ;-) Avoid adding any fields starting with "set_" or called as any method defined here, as
       they will become unreachable. And, of course, keep in mind what SQL construct does your DBD support.

       If you add any fields with names starting with "adm_", they will be visible but not modifiable from
       within User::Simple - You will only be able to modify them from User::Simple::Admin.

   <b>QUERYING</b> <b>FOR</b> <b>DATABASE</b> <b>READINESS</b>
       In order to check if the database is ready to be used by this module with the specified table name, use
       the "has_db_structure" class method:

         $ok = User::Simple::Admin-&gt;has_db_structure($db, $user_table);

   <b>RETRIEVING</b> <b>THE</b> <b>SET</b> <b>OF</b> <b>USERS</b>
         %users = $ua-&gt;dump_users;

       Will return a hash with the data regarding the registered users with all of the existing DB fields, in
       the following form:

         ( $id1 =&gt; { login=&gt;$login1, firstname=&gt;$firstname1, famname=&gt;$famname1 },
           $id2 =&gt; { login=&gt;$login2, firstname=&gt;$firstname2, famname=&gt;$famname2 },
           (...) )

       Of course, with the appropriate attributes. The internal attributes "id", "session" and "session_exp"
       will not be included in the resulting hashes (you have the "id" as the hash keys).

   <b>CREATING,</b> <b>QUERYING</b> <b>AND</b> <b>MODIFYING</b> <b>USERS</b>
         $id = $ua-&gt;new_user(login =&gt; $login, passwd =&gt; $passwd,
               [otherattribute =&gt; $otherattribute]);

       Creates a new user with the specified data. Returns the new user's ID. Only the login is mandatory (as it
       uniquely identifies the user), unless you have specified extra NOT NULL fields or constraints in the DB.
       If no password is supplied, the account will be created, but no login will be allowed until one is
       supplied.

         $ok = $ua-&gt;remove_user($id);

       Removes the user specified by the ID.

         $id = $ua-&gt;id($login);
         $login = $ua-&gt;login($id);

         $otherattrib = $user-&gt;otherattrib($id);

       Get the value of each of the mentioned attributes. Note that in order to get the ID you can supply the
       login, every other method answers only to the ID. In case you have the login and want to get the
       firstname, you can use "$ua-"firstname($ua-&gt;id($login));&gt;

       Of course, beware: if you request for a field which does not exist in your table, User::Simple will raise
       an  error and die just as if an unknown method had been called.

         $ok = $usr-&gt;set_login($id, $login);
         $ok = $usr-&gt;set_passwd($id, $passwd);

       Modifies the requested attribute of the specified user, setting it to the new value. Except for the
       login, they can all be set to null values - If the password is set to a null or empty value, the account
       will be locked (that is, no password will be accepted). The internal attributes "id", "session" and
       "session_exp" cannot be directly modified (you have the "id" as the hash keys).

       Just as with the accessors, if you have extra columns, you can modify them the same way:

         $ok = $usr-&gt;set_otherattrib($id, $value);

       i.e.

         $ok = $usr-&gt;set_name($id, $name);

   <b>SESSIONS</b>
         $ok = $usr-&gt;clear_session($id);

       Removes the session which the current user had open, if any.

       Note that you cannot create a new session through this module - The only way of creating a session is
       through the "ck_login" method of User::Simple.

</pre><h4><b>DEPENDS</b> <b>ON</b></h4><pre>
       Digest::MD5

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       User::Simple for the regular user authentication routines (that is, to use the functionality this module
       adimisters)

</pre><h4><b>AUTHOR</b></h4><pre>
       Gunnar Wolf &lt;<a href="mailto:gwolf@gwolf.org">gwolf@gwolf.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2005-2009 Gunnar Wolf / Instituto de Investigaciones Economicas UNAM

       This module is Free Software; it can be redistributed under the same terms as Perl.

perl v5.34.0                                       2022-06-28                           <u>User::Simple::<a href="../man3pm/Admin.3pm.html">Admin</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>