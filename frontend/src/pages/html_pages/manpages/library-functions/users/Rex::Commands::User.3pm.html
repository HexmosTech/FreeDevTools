<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rex::Commands::User - Manipulate users and groups</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/rex">rex_1.16.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Rex::Commands::User - Manipulate users and groups

</pre><h4><b>DESCRIPTION</b></h4><pre>
       With this module you can manage user and groups.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Rex::Commands::User;

        task "create-user", "remoteserver", sub {
          create_user "root",
            uid         =&gt; 0,
            home        =&gt; '<a href="file:/root">/root</a>',
            comment     =&gt; 'Root Account',
            expire      =&gt; '2011-05-30',
            groups      =&gt; [ 'root', '...' ],
            password    =&gt; 'blahblah',
            system      =&gt; 1,
            create_home =&gt; TRUE,
            shell       =&gt; '<a href="file:/bin/bash">/bin/bash</a>',
            ssh_key     =&gt; "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQChUw...";
        };

</pre><h4><b>EXPORTED</b> <b>FUNCTIONS</b></h4><pre>
   <b>account($name,</b> <b>%option)</b>
       Manage user account.

        account "krimdomu",
          ensure         =&gt; "present",  # default
          uid            =&gt; 509,
          home           =&gt; '<a href="file:/root">/root</a>',
          comment        =&gt; 'User Account',
          expire         =&gt; '2011-05-30',
          groups         =&gt; [ 'root', '...' ],
          login_class    =&gt; 'staff',   # on OpenBSD
          password       =&gt; 'blahblah',
          crypt_password =&gt; '*', # on Linux, OpenBSD and NetBSD
          system         =&gt; 1,
          create_home    =&gt; TRUE,
          shell          =&gt; '<a href="file:/bin/bash">/bin/bash</a>',
          ssh_key        =&gt; "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQChUw...";

       There is also a no_create_home option similar to create_home but doing the opposite. If both used,
       create_home takes precedence as it the preferred option to specify home directory creation policy.

       If none of them are specified, Rex follows the remote system's home creation policy.

       The crypt_password option specifies the encrypted value as found in <a href="file:/etc/shadow">/etc/shadow</a>; on Linux special values
       are '*' and '!' which mean 'disabled password' and 'disabled login' respectively.

   <b>create_user($user</b> <b>=&gt;</b> <b>{})</b>
       Create or update a user.

       This function supports the following hooks:

       before
           This gets executed before the user is created. All original parameters are passed to it.

       after
           This  gets  executed  after  the  user  is created. All original parameters, and the user's "UID" are
           passed to it.

   <b>get_uid($user)</b>
       Returns the uid of $user.

   <b>get_user($user)</b>
       Returns all information about $user.

   <b>user_groups($user)</b>
       Returns group membership about $user.

   <b>user_list()</b>
       Returns user list via getent passwd.

        task "list_user", "server01", sub {
          for my $user (user_list) {
            print "name: $user / uid: " . get_uid($user) . "\n";
          }
        };

   <b>delete_user($user)</b>
       Delete a user from the system.

        delete_user "trak", {
          delete_home =&gt; 1,
          force     =&gt; 1,
        };

   <b>lock_password($user)</b>
       Lock the password of a user account. Currently this is only available on Linux (see  passwd  --lock)  and
       OpenBSD.

   <b>unlock_password($user)</b>
       Unlock  the  password  of a user account. Currently this is only available on Linux (see passwd --unlock)
       and OpenBSD.

   <b>create_group($group,</b> <b>{})</b>
       Create or update a group.

        create_group $group, {
          gid =&gt; 1500,
          system =&gt; 1,
        };

   <b>get_gid($group)</b>
       Return the group id of $group.

   <b>get_group($group)</b>
       Return information of $group.

        $info = get_group("wheel");

   <b>delete_group($group)</b>
       Delete a group.

perl v5.40.0                                       2025-02-06                           <u>Rex::Commands::<a href="../man3pm/User.3pm.html">User</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>