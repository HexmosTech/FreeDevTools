<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User::Identity::Collection - base class for collecting roles of a user</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libuser-identity-perl">libuser-identity-perl_1.02-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       User::Identity::Collection - base class for collecting roles of a user

</pre><h4><b>INHERITANCE</b></h4><pre>
        User::Identity::Collection
          is a User::Identity::Item

        User::Identity::Collection is extended by
          User::Identity::Collection::Emails
          User::Identity::Collection::Locations
          User::Identity::Collection::Systems
          User::Identity::Collection::Users

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use User::Identity;
        use User::Identity::Collection;
        my $me    = User::Identity-&gt;new(...);
        my $set   = User::Identity::Collection::Emails-&gt;new(...);
        $me-&gt;addCollection($set);

        # Simpler
        use User::Identity;
        my $me    = User::Identity-&gt;new(...);
        my $set   = $me-&gt;addCollection(type =&gt; 'email', ...)
        my $set   = $me-&gt;addCollection('email', ...)

        my @roles = $me-&gt;collection('email');  # list of collected items

        my $coll  = $me-&gt;collection('email');  # a User::Identity::Collection
        my @roles = $coll-&gt;roles;
        my @roles = @$coll;                    # same, by overloading

        my $role  = $me-&gt;collection('email')-&gt;find($coderef);
        my $role  = $me-&gt;collection('location')-&gt;find('work');
        my $role  = $me-&gt;find(location =&gt; 'work');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The "User::Identity::Collection" object maintains a set user related objects.  It helps selecting these
       objects, which is partially common to all collections (for instance, each object has a name so you can
       search on names), and sometimes specific to the extension of this collection.

       Currently imlemented extensions are

       •   <u>people</u> is a collection of users

       •   <u>whereabouts</u> are locations

       •   a <u>mailinglist</u> is a

           collection of email addresses

       •   a <u>network</u> contains

           groups of systems

       Extends "DESCRIPTION" in User::Identity::Item.

</pre><h4><b>OVERLOADED</b></h4><pre>
       overload: <b>@{}</b>
           When  the  reference  to  a collection object is used as array-reference, it will be shown as list of
           roles.

           example:

            my $locations = $ui-&gt;collection('location');
            foreach my $loc (@$location) ...
            print $location-&gt;[0];

       overload: <b>stringification</b>
           Returns the name of the collection and a sorted list of defined items.

           example:

            print "$collection\n";  #   location: home, work

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in User::Identity::Item.

   <b>Constructors</b>
       Extends "Constructors" in User::Identity::Item.

       User::Identity::Collection-&gt;<b>new</b>( [$name], %options )
            -Option     --Defined in          --Default
             description  User::Identity::Item  undef
             item_type                          &lt;required&gt;
             name         User::Identity::Item  &lt;required&gt;
             parent       User::Identity::Item  undef
             roles                              undef

           description =&gt; STRING
           item_type =&gt; CLASS
             The CLASS which is used to store the information for each of the  maintained  objects  within  this
             collection.

           name =&gt; STRING
           parent =&gt; OBJECT
           roles =&gt; ROLE|ARRAY
             Immediately  add  some roles to this collection.  In case of an ARRAY, each element of the array is
             passed separately to <b>addRole()</b>. So, you may end-up with an ARRAY of arrays each grouping a  set  of
             options to create a role.

   <b>Attributes</b>
       Extends "Attributes" in User::Identity::Item.

       $obj-&gt;<b>description</b>()
           Inherited, see "Attributes" in User::Identity::Item

       $obj-&gt;<b>itemType</b>()
           Returns the type of the items collected.

       $obj-&gt;<b>name</b>( [$newname] )
           Inherited, see "Attributes" in User::Identity::Item

       $obj-&gt;<b>roles</b>()
           Returns all defined roles within this collection.  Be warned: the rules are returned in random (hash)
           order.

   <b>Collections</b>
       Extends "Collections" in User::Identity::Item.

       $obj-&gt;<b>add</b>($collection, $role)
           Inherited, see "Collections" in User::Identity::Item

       $obj-&gt;<b>addCollection</b>( $object | &lt;[$type], %options&gt; )
           Inherited, see "Collections" in User::Identity::Item

       $obj-&gt;<b>collection</b>($name)
           Inherited, see "Collections" in User::Identity::Item

       $obj-&gt;<b>parent</b>( [$parent] )
           Inherited, see "Collections" in User::Identity::Item

       $obj-&gt;<b>removeCollection</b>($object|$name)
           Inherited, see "Collections" in User::Identity::Item

       $obj-&gt;<b>type</b>()
       User::Identity::Collection-&gt;<b>type</b>()
           Inherited, see "Collections" in User::Identity::Item

       $obj-&gt;<b>user</b>()
           Inherited, see "Collections" in User::Identity::Item

   <b>Maintaining</b> <b>roles</b>
       $obj-&gt;<b>addRole</b>($role| &lt;[$name],%options&gt; | ARRAY)
           Adds  a  new role to this collection.  $role is an object of the right type (depends on the extension
           of this module which type that is) or a list of %options which are used to  create  such  role.   The
           options can also be passed as reference to an ARRAY.  The added role is returned.

           example:

            my $uicl = User::Identity::Collection::Locations-&gt;new;

            my $uil  = User::Identity::Location-&gt;new(home =&gt; ...);
            $uicl-&gt;addRole($uil);

            $uicl-&gt;addRole( home =&gt; address =&gt; 'street 32' );
            $uicl-&gt;addRole( [home =&gt; address =&gt; 'street 32'] );

           Easier

            $ui      = User::Identity;
            $ui-&gt;add(location =&gt; 'home', address =&gt; 'street 32' );
            $ui-&gt;add(location =&gt; [ 'home', address =&gt; 'street 32' ] );

       $obj-&gt;<b>removeRole</b>($role|$name)
           The deleted role is returned (if it existed).

       $obj-&gt;<b>renameRole</b>( &lt;$role|$oldname&gt;, $newname )
           Give the role a different name, and move it in the collection.

       $obj-&gt;<b>sorted</b>()
           Returns the roles sorted by name, alphabetically and case-sensitive.

   <b>Searching</b>
       Extends "Searching" in User::Identity::Item.

       $obj-&gt;<b>find</b>($name|CODE|undef)
           Find  the object with the specified $name in this collection.  With "undef", a randomly selected role
           is returned.

           When a code reference is specified, all collected roles are scanned one after the other  (in  unknown
           order).  For each role,

            CODE-&gt;($object, $collection)

           is  called.   When  the CODE returns true, the role is selected.  In list context, all selected roles
           are returned.  In scalar context, the first match is returned and the scan is aborted immediately.

           example:

            my $emails = $ui-&gt;collection('emails');
            $emails-&gt;find('work');

            sub find_work($$) {
               my ($mail, $emails) = @_;
               $mail-&gt;location-&gt;name eq 'work';
            }
            my @at_work = $emails-&gt;find(\&amp;find_work);
            my @at_work = $ui-&gt;find(location =&gt; \&amp;find_work);
            my $any     = $ui-&gt;find(location =&gt; undef );

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error: $object is not a collection.
           The first argument is an object, but not of a class which extends User::Identity::Collection.

       Error: Cannot create a $type to add this to my collection.
           Some options are specified to create a $type object, which is native to  this  collection.   However,
           for some reason this failed.

       Error: Cannot load collection module for $type ($class).
           Either  the  specified  $type does not exist, or that module named $class returns compilation errors.
           If the type as specified in the warning is not the name of a package, you specified a nickname  which
           was not defined.  Maybe you forgot the 'require' the package which defines the nickname.

       Error: Cannot rename $name into $newname: already exists
       Error: Cannot rename $name into $newname: doesn't exist
       Error: Creation of a collection via $class failed.
           The  $class  did compile, but it was not possible to create an object of that class using the options
           you specified.

       Error: Don't know what type of collection you want to add.
           If you add a collection, it must either by a collection object or a list of options which can be used
           to create a collection object.  In the latter case, the type of collection must be specified.

       Warning: No collection $name
           The collection with $name does not exist and can not be created.

       Error: Wrong type of role for $collection: requires a $expect but got a $type
           Each $collection groups sets of roles of one specific type ($expect).  You cannot add  objects  of  a
           different $type.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This  module  is  part  of  User-Identity  distribution  version  1.02, built on April 17, 2023. Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2003-2023 by [Mark Overmeer &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]. For other contributors see ChangeLog.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.36.0                                       2023-06-11                    <u>User::Identity::<a href="../man3pm/Collection.3pm.html">Collection</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>