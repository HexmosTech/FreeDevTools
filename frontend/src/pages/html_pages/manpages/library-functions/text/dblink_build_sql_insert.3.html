<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dblink_build_sql_insert - builds an INSERT statement using a local tuple, replacing the primary key field</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-doc-17">postgresql-doc-17_17.5-1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dblink_build_sql_insert - builds an INSERT statement using a local tuple, replacing the primary key field
       values with alternative supplied values

</pre><h4><b>SYNOPSIS</b></h4><pre>
       dblink_build_sql_insert(text relname,
                               int2vector primary_key_attnums,
                               integer num_primary_key_atts,
                               text[] src_pk_att_vals_array,
                               text[] tgt_pk_att_vals_array) returns text

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dblink_build_sql_insert</b> can be useful in doing selective replication of a local table to a remote
       database. It selects a row from the local table based on primary key, and then builds an SQL <b>INSERT</b>
       command that will duplicate that row, but with the primary key values replaced by the values in the last
       argument. (To make an exact copy of the row, just specify the same values for the last two arguments.)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>relname</u>
           Name of a local relation, for example foo or myschema.mytab. Include double quotes if the name is
           mixed-case or contains special characters, for example "FooBar"; without quotes, the string will be
           folded to lower case.

       <u>primary_key_attnums</u>
           Attribute numbers (1-based) of the primary key fields, for example 1 2.

       <u>num_primary_key_atts</u>
           The number of primary key fields.

       <u>src_pk_att_vals_array</u>
           Values of the primary key fields to be used to look up the local tuple. Each field is represented in
           text form. An error is thrown if there is no local row with these primary key values.

       <u>tgt_pk_att_vals_array</u>
           Values of the primary key fields to be placed in the resulting <b>INSERT</b> command. Each field is
           represented in text form.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Returns the requested SQL statement as text.

</pre><h4><b>NOTES</b></h4><pre>
       As of PostgreSQL 9.0, the attribute numbers in <u>primary_key_attnums</u> are interpreted as logical column
       numbers, corresponding to the column's position in SELECT * FROM relname. Previous versions interpreted
       the numbers as physical column positions. There is a difference if any column(s) to the left of the
       indicated column have been dropped during the lifetime of the table.

</pre><h4><b>EXAMPLES</b></h4><pre>
           SELECT dblink_build_sql_insert('foo', '1 2', 2, '{"1", "a"}', '{"1", "b''a"}');
                        dblink_build_sql_insert
           --------------------------------------------------
            INSERT INTO foo(f1,f2,f3) VALUES('1','b''a','1')
           (1 row)

PostgreSQL 17.5                                       2025                            <u><a href="../man3/DBLINK_BUILD_SQL_INSERT.3.html">DBLINK_BUILD_SQL_INSERT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>