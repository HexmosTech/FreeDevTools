<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>text, tk_textCopy, tk_textCut, tk_textPaste - Create and manipulate 'text' hypertext editing widgets</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tk9.0-doc">tk9.0-doc_9.0.1-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       text, tk_textCopy, tk_textCut, tk_textPaste - Create and manipulate 'text' hypertext editing widgets

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>text</b> <u>pathName</u> ?<u>options</u>?
       <b>tk_textCopy</b> <u>pathName</u>
       <b>tk_textCut</b> <u>pathName</u>
       <b>tk_textPaste</b> <u>pathName</u>

</pre><h4><b>STANDARD</b> <b>OPTIONS</b></h4><pre>
       <b>-background</b>           <b>-highlightthickness</b>  <b>-relief</b>
       <b>-borderwidth</b>          <b>-insertbackground</b>    <b>-selectbackground</b>
       <b>-cursor</b>               <b>-insertborderwidth</b>   <b>-selectborderwidth</b>
       <b>-exportselection</b>      <b>-insertofftime</b>       <b>-selectforeground</b>
       <b>-font</b>                 <b>-insertontime</b>        <b>-setgrid</b>
       <b>-foreground</b>           <b>-insertwidth</b>         <b>-takefocus</b>
       <b>-highlightbackground</b>  <b>-padx</b>                <b>-xscrollcommand</b>
       <b>-highlightcolor</b>       <b>-pady</b>                <b>-yscrollcommand</b>

       See the <b>options</b> manual entry for details on the standard options.

</pre><h4><b>WIDGET-SPECIFIC</b> <b>OPTIONS</b></h4><pre>
       Command-Line Name:<b>-autoseparators</b>
       Database Name:  <b>autoSeparators</b>
       Database Class: <b>AutoSeparators</b>

              Specifies  a  boolean  that  says whether separators are automatically inserted in the undo stack.
              Only meaningful when the <b>-undo</b> option is true.

       Command-Line Name:<b>-blockcursor</b>
       Database Name:  <b>blockCursor</b>
       Database Class: <b>BlockCursor</b>

              Specifies a boolean that says  whether  the  blinking  insertion  cursor  should  be  drawn  as  a
              character-sized  rectangular  block.  If  false (the default) a thin vertical line is used for the
              insertion cursor.

       Command-Line Name:<b>-endline</b>
       Database Name:  <b>endLine</b>
       Database Class: <b>EndLine</b>

              Specifies an integer line index representing the line of the underlying textual  data  store  that
              should  be  just after the last line contained in the widget. This allows a text widget to reflect
              only a portion of a larger piece of text. Instead of an integer, the empty string can be  provided
              to  this configuration option, which will configure the widget to end at the very last line in the
              textual data store.

       Command-Line Name:<b>-height</b>
       Database Name:  <b>height</b>
       Database Class: <b>Height</b>

              Specifies the desired height for the window, in units of characters in the font given by the <b>-font</b>
              option. Must be at least one.

       Command-Line Name:<b>-inactiveselectbackground</b>
       Database Name:  <b>inactiveSelectBackground</b>
       Database Class: <b>Foreground</b>

              Specifies the colour to use for the selection (the <b>sel</b> tag) when the  window  does  not  have  the
              input focus. If empty, <b>{}</b>, then no selection is shown when the window does not have the focus.

       Command-Line Name:<b>-insertunfocussed</b>
       Database Name:  <b>insertUnfocussed</b>
       Database Class: <b>InsertUnfocussed</b>

              Specifies  how  to  display  the insertion cursor when the widget does not have the focus. Must be 2
              <b>none</b> (the default) which means to not display the cursor, <b>hollow</b> which means to display  a  hollow 2
              box,  or  <b>solid</b>  which  means  to display a solid box. Note that <b>hollow</b> and <b>solid</b> will appear very 2
              similar when the <b>-blockcursor</b> option is false.

       Command-Line Name:<b>-maxundo</b>
       Database Name:  <b>maxUndo</b>
       Database Class: <b>MaxUndo</b>

              Specifies the maximum number of compound undo actions on the undo stack.  A  zero  or  a  negative
              value imply an unlimited undo stack.

       Command-Line Name:<b>-spacing1</b>
       Database Name:  <b>spacing1</b>
       Database Class: <b>Spacing1</b>

              Requests  additional space above each text line in the widget, using any of the standard forms for
              screen distances. If a line wraps, this option only applies to the first line on the display. This
              option may be overridden with <b>-spacing1</b> options in tags.

       Command-Line Name:<b>-spacing2</b>
       Database Name:  <b>spacing2</b>
       Database Class: <b>Spacing2</b>

              For lines that wrap (so that they cover more than one line on the display) this  option  specifies
              additional  space  to  provide between the display lines that represent a single line of text. The
              value may have any of the standard forms for screen distances. This option may be overridden  with
              <b>-spacing2</b> options in tags.

       Command-Line Name:<b>-spacing3</b>
       Database Name:  <b>spacing3</b>
       Database Class: <b>Spacing3</b>

              Requests  additional space below each text line in the widget, using any of the standard forms for
              screen distances. If a line wraps, this option only applies to the last line on the display.  This
              option may be overridden with <b>-spacing3</b> options in tags.

       Command-Line Name:<b>-startline</b>
       Database Name:  <b>startLine</b>
       Database Class: <b>StartLine</b>

              Specifies  an  integer line index representing the first line of the underlying textual data store
              that should be contained in the widget. This allows a text widget to reflect only a portion  of  a
              larger  piece  of  text.  Instead  of  an  integer,  the  empty  string  can  be  provided to this
              configuration option, which will configure the widget to start at  the  very  first  line  in  the
              textual data store.

       Command-Line Name:<b>-state</b>
       Database Name:  <b>state</b>
       Database Class: <b>State</b>

              Specifies  one  of  two  states  for  the  text:  <b>normal</b> or <b>disabled</b>. If the text is disabled then
              characters may not be inserted or deleted and no insertion cursor will be displayed, even  if  the
              input focus is in the widget.

       Command-Line Name:<b>-tabs</b>
       Database Name:  <b>tabs</b>
       Database Class: <b>Tabs</b>

              Specifies  a  set  of  tab  stops  for the window. The option's value consists of a list of screen
              distances giving the positions of the tab stops, each of which is a distance relative to the  left
              edge  of the widget (excluding borders, padding, etc). Each position may optionally be followed in
              the next list element by one of the keywords <b>left</b>, <b>right</b>, <b>center</b>, or <b>numeric</b>, which specifies  how
              to  justify  text relative to the tab stop.  <b>Left</b> is the default; it causes the text following the
              tab character to be positioned with its left edge at the tab position. <b>Right</b> means that the  right
              edge  of  the text following the tab character is positioned at the tab position, and <b>center</b> means
              that the text is centered at the tab position. <b>Numeric</b> means that the decimal point in the text is
              positioned at the tab position; if there is no decimal point then the least significant  digit  of
              the  number  is positioned just to the left of the tab position; if there is no number in the text
              then the text is right-justified at the tab position. For example, “<b>-tabs</b> <b>{2c</b> <b>left</b> <b>4c</b> <b>6c</b>  <b>center}</b>”
              creates  three tab stops at two-centimeter intervals; the first two use left justification and the
              third uses center justification.

              If the list of tab stops does not have enough elements to cover all of the tabs in  a  text  line,
              then  Tk  extrapolates new tab stops using the spacing and alignment from the last tab stop in the
              list. Tab distances must be strictly positive, and must always increase from one tab stop  to  the
              next  (if  not,  an  error  is  thrown).  The value of the <b>-tabs</b> option may be overridden by <b>-tabs</b>
              options in tags.

              If no <b>-tabs</b> option is specified, or if it is specified as an empty list, then Tk uses default tabs
              spaced every eight (average size) characters.   To  achieve  a  different  standard  spacing,  for
              example  every  4  characters,  simply  configure the widget with “<b>-tabs</b> <b>"[expr</b> <b>{4</b> <b>*</b> <b>[font</b> <b>measure</b>
              <b>$font</b> <b>0]}]</b> <b>left"</b> <b>-tabstyle</b> <b>wordprocessor</b>”.

       Command-Line Name:<b>-tabstyle</b>
       Database Name:  <b>tabStyle</b>
       Database Class: <b>TabStyle</b>

              Specifies how to interpret the relationship between tab stops on a line and tabs in  the  text  of
              that  line.  The  value  must  be  <b>tabular</b>  (the  default)  or  <b>wordprocessor</b>.  Note that tabs are
              interpreted as they are encountered in the text. If the tab style is <b>tabular</b>  then  the  <u>n</u>'th  tab
              character  in  the line's text will be associated with the <u>n</u>'th tab stop defined for that line. If
              the tab character's x coordinate falls to the right of the <u>n</u>'th tab stop, then a gap of  a  single
              space  will  be  inserted  as a fallback. If the tab style is <b>wordprocessor</b> then any tab character
              being laid out will use (and be defined by) the first tab stop  to  the  right  of  the  preceding
              characters  already  laid out on that line. The value of the <b>-tabstyle</b> option may be overridden by
              <b>-tabstyle</b> options in tags.

       Command-Line Name:<b>-undo</b>
       Database Name:  <b>undo</b>
       Database Class: <b>Undo</b>

              Specifies a boolean that says whether the undo mechanism is active or not.

       Command-Line Name:<b>-width</b>
       Database Name:  <b>width</b>
       Database Class: <b>Width</b>

              Specifies the desired width for the window in units of characters in the font given by  the  <b>-font</b>
              option.  If  the font does not have a uniform width then the width of the character “0” is used in
              translating from character units to screen units.

       Command-Line Name:<b>-wrap</b>
       Database Name:  <b>wrap</b>
       Database Class: <b>Wrap</b>

              Specifies how to handle lines in the text that are too long to be displayed in a  single  line  of
              the  text's  window.  The  value must be <b>none</b> or <b>char</b> or <b>word</b>. A wrap mode of <b>none</b> means that each
              line of text appears as exactly one line on the screen; extra characters that do not  fit  on  the
              screen  are  not  displayed.  In  the other modes each line of text will be broken up into several
              screen lines if necessary to keep all the characters visible.  In <b>char</b> mode a  screen  line  break
              may occur after any character; in <b>word</b> mode a line break will only be made at word boundaries.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>text</b>  command creates a new window (given by the <u>pathName</u> argument) and makes it into a text widget.
       Additional options, described above, may be specified on the command line or in the  option  database  to
       configure  aspects of the text such as its default background color and relief.  The <b>text</b> command returns
       the path name of the new window.

       A text widget displays one or more lines of text and allows that text to be edited. Text widgets  support
       four different kinds of annotations on the text, called tags, marks, embedded windows or embedded images.
       Tags  allow  different portions of the text to be displayed with different fonts and colors. In addition,
       Tcl commands can be associated with tags so that scripts are invoked  when  particular  actions  such  as
       keystrokes  and  mouse  button  presses  occur  in particular ranges of the text. See <b>TAGS</b> below for more
       details.

       The second form of annotation consists of floating markers in the text called “marks”.  Marks are used to
       keep track of various interesting positions in the text as  it  is  edited.  See  <b>MARKS</b>  below  for  more
       details.

       The  third  form  of  annotation  allows  arbitrary windows to be embedded in a text widget. See <b>EMBEDDED</b>
       <b>WINDOWS</b> below for more details.

       The fourth form of annotation allows Tk images to be embedded in a text widget. See <b>EMBEDDED</b> <b>IMAGES</b> below
       for more details.

       The text widget also has a built-in undo/redo mechanism. See <b>THE</b> <b>UNDO</b> <b>MECHANISM</b> below for more details.

       The text widget allows for the creation of peer widgets. These are other text  widgets  which  share  the
       same underlying data (text, marks, tags, images, etc).  See <b>PEER</b> <b>WIDGETS</b> below for more details.

</pre><h4><b>INDICES</b></h4><pre>
       Many  of  the widget commands for texts take one or more indices as arguments.  An index is a string used
       to indicate a particular place within a text, such as a place to insert characters or one endpoint  of  a
       range of characters to delete. Indices have the syntax
              <u>base</u> <u>modifier</u> <u>modifier</u> <u>modifier</u> <u>...</u>
       Where  <u>base</u>  gives a starting point and the <u>modifier</u>s adjust the index from the starting point (e.g. move
       forward or backward one character).  Every index must contain a <u>base</u>, but  the  <u>modifier</u>s  are  optional.
       Most  modifiers  (as  documented  below)  allow  an  optional submodifier. Valid submodifiers are <b>any</b> and
       <b>display</b>. If the submodifier is abbreviated, then it must be followed by whitespace, but  otherwise  there
       need  be  no space between the submodifier and the following <u>modifier</u>.  Typically the <b>display</b> submodifier
       adjusts the meaning of the following <u>modifier</u> to make it refer to visual or non-elided units rather  than
       logical units, but this is explained for each relevant case below. Lastly, where <u>count</u> is used as part of
       a  modifier,  it  can be positive or negative, so “<u>base</u> - -3 lines” is perfectly valid (and equivalent to
       “<u>base</u> +3lines”).

       The <u>base</u> for an index must have one of the following forms:

       <u>line</u><b>.</b><u>char</u>   Indicates <u>char</u>'th character on line <u>line</u>. Lines are numbered  from  1  for  consistency  with
                   other  UNIX  programs that use this numbering scheme.  Within a line, characters are numbered
                   from 0. If <u>char</u> is <b>end</b> then it refers to the newline character that ends the line.

       <b>@</b><u>x</u><b>,</b><u>y</u>        Indicates the character that covers the pixel whose x and y  coordinates  within  the  text's
                   window are <u>x</u> and <u>y</u>.

       <b>end</b>         Indicates the end of the text (the character just after the last newline).

       <u>mark</u>        Indicates the character just after the mark whose name is <u>mark</u> (see <b>MARKS</b> for details).

       <u>tag</u><b>.first</b>   Indicates the first character in the text that has been tagged with <u>tag</u>.  This form generates
                   an error if no characters are currently tagged with <u>tag</u>.

       <u>tag</u><b>.last</b>    Indicates  the  character  just after the last one in the text that has been tagged with <u>tag</u>.
                   This form generates an error if no characters are currently tagged with <u>tag</u>.

       <u>pathName</u>    Indicates the position of the embedded window whose name is <u>pathName</u>.  This form generates an
                   error if there is no embedded window by the given name.

       <u>imageName</u>   Indicates the position of the embedded image whose name is <u>imageName</u>.  This form generates an
                   error if there is no embedded image by the given name.

       If the <u>base</u> could match more than one of the above forms, such as a <u>mark</u> and <u>imageName</u>  both  having  the
       same value, then the form earlier in the above list takes precedence. If modifiers follow the base index,
       each  one  of  them  must  have  one of the forms listed below. Keywords such as <b>chars</b> and <b>wordend</b> may be
       abbreviated as long as the abbreviation is unambiguous.

       <b>+</b> <u>count</u> ?<u>submodifier</u>? <b>chars</b>
              Adjust the index forward by <u>count</u> characters, moving to later lines in the text if  necessary.  If
              there  are  fewer than <u>count</u> characters in the text after the current index, then set the index to
              the last index in the text.  Spaces  on  either  side  of  <u>count</u>  are  optional.  If  the  <b>display</b>
              submodifier  is  given, elided characters are skipped over without being counted. If <b>any</b> is given,
              then all characters are counted. For historical reasons, if neither modifier  is  given  then  the
              count  actually  takes place in units of index positions (see <b>INDICES</b> for details). This behaviour
              may be changed in a future major release, so if you need an index count, you are encouraged to use
              <b>indices</b> instead wherever possible.

       <b>-</b> <u>count</u> ?<u>submodifier</u>? <b>chars</b>
              Adjust the index backward by <u>count</u> characters, moving to earlier lines in the text  if  necessary.
              If  there are fewer than <u>count</u> characters in the text before the current index, then set the index
              to the first index in the text (1.0). Spaces on either side of <u>count</u> are optional. If the  <b>display</b>
              submodifier  is  given, elided characters are skipped over without being counted. If <b>any</b> is given,
              then all characters are counted. For historical reasons, if neither modifier  is  given  then  the
              count  actually  takes  place in units of index positions (see <b>INDICES</b> for details). This behavior
              may be changed in a future major release, so if you need an index count, you are encouraged to use
              <b>indices</b> instead wherever possible.

       <b>+</b> <u>count</u> ?<u>submodifier</u>? <b>indices</b>
              Adjust the index forward by <u>count</u> index positions, moving to later lines in the text if necessary.
              If there are fewer than <u>count</u> index positions in the text after the current index,  then  set  the
              index  to  the  last index position in the text. Spaces on either side of <u>count</u> are optional. Note
              that an index position is either a single character or a single embedded image or embedded window.
              If the <b>display</b> submodifier is given, elided indices are skipped over without being counted. If <b>any</b>
              is given, then all indices are counted; this is also the  default  behaviour  if  no  modifier  is
              given.

       <b>-</b> <u>count</u> ?<u>submodifier</u>? <b>indices</b>
              Adjust  the  index  backward  by  <u>count</u>  index  positions,  moving to earlier lines in the text if
              necessary. If there are fewer than <u>count</u> index positions in the text  before  the  current  index,
              then  set  the index to the first index position (1.0) in the text. Spaces on either side of <u>count</u>
              are optional. If the <b>display</b> submodifier is given, elided indices are skipped over  without  being
              counted.  If  <b>any</b> is given, then all indices are counted; this is also the default behaviour if no
              modifier is given.

       <b>+</b> <u>count</u> ?<u>submodifier</u>? <b>lines</b>
              Adjust the index forward by <u>count</u> lines, retaining the same character position within the line. If
              there are fewer than <u>count</u> lines after the line containing the current index, then set  the  index
              to  refer  to  the  same character position on the last line of the text. Then, if the line is not
              long enough to contain a character at the  indicated  character  position,  adjust  the  character
              position to refer to the last character of the line (the newline).  Spaces on either side of <u>count</u>
              are  optional.  If  the  <b>display</b>  submodifier  is  given, then each visual display line is counted
              separately.  Otherwise, if <b>any</b> (or no modifier) is given, then each logical line  (no  matter  how
              many  times  it is visually wrapped) counts just once. If the relevant lines are not wrapped, then
              these two methods of counting are equivalent.

       <b>-</b> <u>count</u> ?<u>submodifier</u>? <b>lines</b>
              Adjust the index backward by <u>count</u> logical lines, retaining the same character position within the
              line. If there are fewer than <u>count</u> lines before the line containing the current index,  then  set
              the index to refer to the same character position on the first line of the text. Then, if the line
              is  not  long  enough  to  contain  a  character  at  the indicated character position, adjust the
              character position to refer to the last character of the line (the newline). Spaces on either side
              of <u>count</u> are optional. If the <b>display</b> submodifier is given,  then  each  visual  display  line  is
              counted separately. Otherwise, if <b>any</b> (or no modifier) is given, then each logical line (no matter
              how  many  times  it is visually wrapped) counts just once. If the relevant lines are not wrapped,
              then these two methods of counting are equivalent.

       ?<u>submodifier</u>? <b>linestart</b>
              Adjust the index to refer to the first index on the line. If the  <b>display</b>  submodifier  is  given,
              this is the first index on the display line, otherwise on the logical line.

       ?<u>submodifier</u>? <b>lineend</b>
              Adjust  the index to refer to the last index on the line (the newline). If the <b>display</b> submodifier
              is given, this is the last index on the display line, otherwise on the logical line.

       ?<u>submodifier</u>? <b>wordstart</b>
              Adjust the index to refer to the first character of the word containing the current index. A  word
              consists  of  any  number  of  adjacent  characters that are letters, digits, or underscores, or a
              single character that is not one of these. If the <b>display</b> submodifier is given, this only examines
              non-elided characters, otherwise all characters (elided or not) are examined.

       ?<u>submodifier</u>? <b>wordend</b>
              Adjust the index to refer to the character just after the last one  of  the  word  containing  the
              current  index.  If  the  current  index  refers  to the last character of the text then it is not
              modified. If the <b>display</b> submodifier is given, this only examines non-elided characters, otherwise
              all characters (elided or not) are examined.

       If more than one modifier is present then they are applied in left-to-right order. For example, the index
       “<b>end</b> <b>-</b> <b>1</b> <b>chars</b>” refers to the next-to-last character in the text and “<b>insert</b> <b>wordstart</b> <b>-</b> <b>1</b> <b>c</b>”  refers  to
       the  character  just  before  the  first  one  in the word containing the insertion cursor. Modifiers are
       applied one by one in this left to right order, and after each step the resulting index is constrained to
       be a valid index in the text widget. So, for example, the index “<b>1.0</b> <b>-1c</b> <b>+1c</b>” refers to the index “<b>2.0</b>”.

       Where modifiers result in index changes by display lines, display chars or display indices, and the  <u>base</u>
       refers  to  an  index  inside  an elided tag, that base index is considered to be equivalent to the first
       following non-elided index.

</pre><h4><b>TAGS</b></h4><pre>
       The first form of annotation in text widgets is a tag. A tag is a textual string that is associated  with
       some of the characters in a text. Tags may contain arbitrary characters, but it is probably best to avoid
       using  the  characters  “  ”  (space), <b>+</b>, or <b>-</b>: these characters have special meaning in indices, so tags
       containing them cannot be used as indices. There may be any number of tags associated with characters  in
       a text. Each tag may refer to a single character, a range of characters, or several ranges of characters.
       An individual character may have any number of tags associated with it.

       A  priority  order  is defined among tags, and this order is used in implementing some of the tag-related
       functions described below. When a tag is defined (by  associating  it  with  characters  or  setting  its
       display  options  or  binding  commands  to it), it is given a priority higher than any existing tag. The
       priority order of tags may be redefined using the “<u>pathName</u> <b>tag</b> <b>raise</b>” and “<u>pathName</u>  <b>tag</b>  <b>lower</b>”  widget
       commands.

       Tags  serve  three  purposes in text widgets. First, they control the way information is displayed on the
       screen. By default, characters are displayed as determined by the  <b>-background</b>,  <b>-font</b>,  and  <b>-foreground</b>
       options  for  the  text widget. However, display options may be associated with individual tags using the
       “<u>pathName</u> <b>tag</b> <b>configure</b>” widget command. If a  character  has  been  tagged,  then  the  display  options
       associated with the tag override the default display style. The following options are currently supported
       for tags:

       <b>-background</b> <u>color</u>
              <u>Color</u>  specifies  the  background color to use for characters associated with the tag. It may have
              any of the forms accepted by <b>Tk_GetColor</b>.

       <b>-bgstipple</b> <u>bitmap</u>
              <u>Bitmap</u> specifies a bitmap that is used as a stipple pattern for the background. It may have any of
              the forms accepted by <b>Tk_GetBitmap</b>. If <u>bitmap</u> has not been specified, or if it is specified as  an
              empty string, then a solid fill will be used for the background.

       <b>-borderwidth</b> <u>pixels</u>
              <u>Pixels</u>  specifies  the width of a border to draw around the tag using any of the forms accepted by
              <b>Tk_GetPixels</b>. This option should be used in conjunction with the <b>-relief</b>  option  to  provide  the
              desired border.

       <b>-elide</b> <u>boolean</u>
              <u>Elide</u>  specifies  whether  the  data  should  be elided. Elided data (characters, images, embedded
              windows, etc.) is not displayed and takes no space on screen,  but  further  on  behaves  just  as
              normal data.

       <b>-fgstipple</b> <u>bitmap</u>
              <u>Bitmap</u> specifies a bitmap that is used as a stipple pattern when drawing text and other foreground
              information  such  as underlines. It may have any of the forms accepted by <b>Tk_GetBitmap</b>. If <u>bitmap</u>
              has not been specified, or if it is specified as an empty string, then a solid fill will be used.

       <b>-font</b> <u>fontName</u>
              <u>FontName</u> is the name of a font to use for drawing  characters.  It  may  have  any  of  the  forms
              accepted by <b>Tk_GetFont</b>.

       <b>-foreground</b> <u>color</u>
              <u>Color</u>  specifies  the  color  to  use  when  drawing text and other foreground information such as
              underlines. It may have any of the forms accepted by <b>Tk_GetColor</b>.

       <b>-justify</b> <u>justify</u>
              If the first non-elided character of a display line has a tag  for  which  this  option  has  been
              specified,  then  <u>justify</u>  determines  how  to justify the line. It must be one of <b>left</b>, <b>right</b>, or
              <b>center</b>. If a line wraps, then the justification for each line on the display is determined by  the
              first non-elided character of that display line.

       <b>-lmargin1</b> <u>pixels</u>
              If  the  first  non-elided  character  of  a  text  line  has a tag for which this option has been
              specified, then <u>pixels</u> specifies how much the line should be indented from the left  edge  of  the
              window.  <u>Pixels</u>  may have any of the standard forms for screen distances. If a line of text wraps,
              this option only applies to the first line on the  display;  the  <b>-lmargin2</b>  option  controls  the
              indentation for subsequent lines.

       <b>-lmargin2</b> <u>pixels</u>
              If  the  first  non-elided  character  of  a display line has a tag for which this option has been
              specified, and if the display line is not the first for its text line (i.e.,  the  text  line  has
              wrapped),  then  <u>pixels</u>  specifies  how much the line should be indented from the left edge of the
              window.  <u>Pixels</u> may have any of the standard forms for screen distances. This option is only  used
              when  wrapping  is  enabled,  and it only applies to the second and later display lines for a text
              line.

       <b>-lmargincolor</b> <u>color</u>
              <u>Color</u> specifies the background color to use in regions that do not contain characters because they
              are indented by <b>-lmargin1</b> or <b>-lmargin2</b>. It may have any of the forms accepted by  <b>Tk_GetColor</b>.  If
              <u>color</u>  has  not  been  specified, or if it is specified as an empty string, then the color used is
              specified by the <b>-background</b> tag option (or, if this  is  also  unspecified,  by  the  <b>-background</b>
              widget option).

       <b>-offset</b> <u>pixels</u>
              <u>Pixels</u>  specifies  an  amount  by  which  the text's baseline should be offset vertically from the
              baseline of the overall line,  in  pixels.  For  example,  a  positive  offset  can  be  used  for
              superscripts and a negative offset can be used for subscripts. <u>Pixels</u> may have any of the standard
              forms for screen distances.

       <b>-overstrike</b> <u>boolean</u>
              Specifies  whether  or not to draw a horizontal rule through the middle of characters. <u>Boolean</u> may
              have any of the forms accepted by <b>Tcl_GetBoolean</b>.

       <b>-overstrikefg</b> <u>color</u>
              <u>Color</u> specifies the color to use when displaying the overstrike. It may  have  any  of  the  forms
              accepted  by  <b>Tk_GetColor</b>.  If  <u>color</u>  has  not  been specified, or if it is specified as an empty
              string, then the color specified by the <b>-foreground</b> tag option is used.

       <b>-relief</b> <u>relief</u>
              <u>Relief</u> specifies the relief style to use for drawing the border, in any of the forms  accepted  by
              <b>Tk_GetRelief</b>.  This  option  is  used in conjunction with the <b>-borderwidth</b> option to enable to the
              desired border appearance.

       <b>-rmargin</b> <u>pixels</u>
              If the first non-elided character of a display line has a tag  for  which  this  option  has  been
              specified,  then  <u>pixels</u>  specifies how wide a margin to leave between the end of the line and the
              right edge of the window.  <u>Pixels</u> may have any of the standard forms for  screen  distances.  This
              option is only used when wrapping is enabled. If a text line wraps, the right margin for each line
              on the display is determined by the first non-elided character of that display line.

       <b>-rmargincolor</b> <u>color</u>
              <u>Color</u> specifies the background color to use in regions that do not contain characters because they
              are  indented  by <b>-rmargin</b>. It may have any of the forms accepted by <b>Tk_GetColor</b>. If <u>color</u> has not
              been specified, or if it is specified as an empty string, then the color used is specified by  the
              <b>-background</b> tag option (or, if this is also unspecified, by the <b>-background</b> widget option).

       <b>-selectbackground</b> <u>color</u>
              <u>Color</u> specifies the background color to use when displaying selected items. It may have any of the
              forms  accepted by <b>Tk_GetColor</b>. If <u>color</u> has not been specified, or if it is specified as an empty
              string, then the color specified by the <b>-background</b> tag option is used.

       <b>-selectforeground</b> <u>color</u>
              <u>Color</u> specifies the foreground color to use when displaying selected items. It may have any of the
              forms accepted by <b>Tk_GetColor</b>. If <u>color</u> has not been specified, or if it is specified as an  empty
              string, then the color specified by the <b>-foreground</b> tag option is used.

       <b>-spacing1</b> <u>pixels</u>
              <u>Pixels</u>  specifies  how much additional space should be left above each text line, using any of the
              standard forms for screen distances. If a line wraps, this option only applies to the  first  line
              on the display.

       <b>-spacing2</b> <u>pixels</u>
              For  lines that wrap, this option specifies how much additional space to leave between the display
              lines for a single text line. <u>Pixels</u> may have any of the standard forms for screen distances.

       <b>-spacing3</b> <u>pixels</u>
              <u>Pixels</u> specifies how much additional space should be left below each text line, using any  of  the
              standard forms for screen distances. If a line wraps, this option only applies to the last line on
              the display.

       <b>-tabs</b> <u>tabList</u>
              <u>TabList</u> specifies a set of tab stops in the same form as for the <b>-tabs</b> option for the text widget.
              This option only applies to a display line if it applies to the first non-elided character on that
              display  line.  If  this option is specified as an empty string, it cancels the option, leaving it
              unspecified for the tag (the default). If the option is specified as a non-empty string that is an
              empty list, such as <b>-tags</b> <b>{</b> <b>}</b>, then it requests default 8-character  tabs  as  described  for  the
              <b>-tags</b> widget option.

       <b>-tabstyle</b> <u>style</u>
              <u>Style</u>  specifies  either the <u>tabular</u> or <u>wordprocessor</u> style of tabbing to use for the text widget.
              This option only applies to a display line if it applies to the first non-elided character on that
              display line. If this option is specified as an empty string, it cancels the  option,  leaving  it
              unspecified for the tag (the default).

       <b>-underline</b> <u>boolean</u>
              <u>Boolean</u>  specifies  whether  or not to draw an underline underneath characters. It may have any of
              the forms accepted by <b>Tcl_GetBoolean</b>.

       <b>-underlinefg</b> <u>color</u>
              <u>Color</u> specifies the color to use when displaying the underline. It  may  have  any  of  the  forms
              accepted  by  <b>Tk_GetColor</b>.  If  <u>color</u>  has  not  been specified, or if it is specified as an empty
              string, then the color specified by the <b>-foreground</b> tag option is used.

       <b>-wrap</b> <u>mode</u>
              <u>Mode</u> specifies how to handle lines that are wider than the text's window. This option only applies
              to a display line if it applies to the first non-elided character on that display line. It has the
              same legal values as the <b>-wrap</b> option for the text widget: <b>none</b>, <b>char</b>, or <b>word</b>. If this tag option
              is specified, it overrides the <b>-wrap</b> option for the text widget.

       If a character has several tags associated with it, and if  their  display  options  conflict,  then  the
       options of the highest priority tag are used. If a particular display option has not been specified for a
       particular  tag, or if it is specified as an empty string, then that option will never be used; the next-
       highest-priority tag's option will used instead. If no tag specifies a particular  display  option,  then
       the default style for the widget will be used.

       The second purpose for tags is event bindings. You can associate bindings with a tag in much the same way
       you can associate bindings with a widget class: whenever particular X events occur on characters with the
       given  tag, a given Tcl command will be executed. Tag bindings can be used to give behaviors to ranges of
       characters; among other things, this allows hypertext-like features to be implemented. For  details,  see
       the description of the “<u>pathName</u> <b>tag</b> <b>bind</b>” widget command below. Tag bindings are shared between all peer
       widgets (including any bindings for the special <b>sel</b> tag).

       The  third  use for tags is in managing the selection. See <b>THE</b> <b>SELECTION</b> below. With the exception of the
       special <b>sel</b> tag, all tags are shared between peer text widgets, and may be manipulated on an equal  basis
       from  any  such widget. The <b>sel</b> tag exists separately and independently in each peer text widget (but any
       tag bindings to <b>sel</b> are shared).

</pre><h4><b>MARKS</b></h4><pre>
       The second form of annotation in text widgets is a mark. Marks are used for remembering particular places
       in a text. They are something like tags, in that they have names and they refer to places  in  the  file,
       but  a  mark  is  not  associated  with particular characters. Instead, a mark is associated with the gap
       between two characters. Only a single position may be associated with a mark at any given  time.  If  the
       characters  around  a  mark  are  deleted  the  mark  will  still  remain; it will just have new neighbor
       characters. In contrast, if the characters containing a tag are deleted then the tag will no longer  have
       an  association  with  characters  in  the file. Marks may be manipulated with the “<u>pathName</u> <b>mark</b>” widget
       command, and their current locations may be determined by using the mark  name  as  an  index  in  widget
       commands.

       Each  mark  also  has  a  “gravity”, which is either <b>left</b> or <b>right</b>. The gravity for a mark specifies what
       happens to the mark when text is inserted at the point of the mark. If a mark has left gravity, then  the
       mark  is treated as if it were attached to the character on its left, so the mark will remain to the left
       of any text inserted at the mark position. If the mark has right gravity, new text inserted at  the  mark
       position will appear to the left of the mark (so that the mark remains rightmost). The gravity for a mark
       defaults to <b>right</b>.

       The name space for marks is different from that for tags: the same name may be used for both a mark and a
       tag, but they will refer to different things.

       Two  marks  have special significance. First, the mark <b>insert</b> is associated with the insertion cursor, as
       described under <b>THE</b> <b>INSERTION</b> <b>CURSOR</b> below. Second, the mark <b>current</b> is  associated  with  the  character
       closest  to  the  mouse  and is adjusted automatically to track the mouse position and any changes to the
       text in the widget (one exception: <b>current</b> is not updated in response to mouse motions if a mouse  button
       is  down;  the  update  will  be  deferred until all mouse buttons have been released).  Neither of these
       special marks may be deleted. With the exception of these two special marks, all marks are shared between
       peer text widgets, and may be manipulated on an equal basis from any peer.

</pre><h4><b>EMBEDDED</b> <b>WINDOWS</b></h4><pre>
       The third form of annotation in text widgets is an  embedded  window.  Each  embedded  window  annotation
       causes  a  window  to be displayed at a particular point in the text. There may be any number of embedded
       windows in a text widget, and any widget may be used as an embedded window (subject to  the  usual  rules
       for  geometry  management,  which  require  the  text window to be the parent of the embedded window or a
       descendant of its parent).

       The embedded window's position on the screen will be updated as the text is modified or scrolled, and  it
       will  be  mapped  and  unmapped  as  it  moves  into and out of the visible area of the text widget. Each
       embedded window occupies one unit's worth of index space in the text widget, and it may  be  referred  to
       either by the name of its embedded window or by its position in the widget's index space. If the range of
       text containing the embedded window is deleted then the window is destroyed. Similarly if the text widget
       as a whole is deleted, then the window is destroyed.

       Eliding  an embedded window immediately after scheduling it for creation via <u>pathName</u> <b>window</b> <b>create</b> <u>index</u>
       <b>-create</b> will prevent it from being effectively created. Uneliding an elided embedded window scheduled for
       creation via <u>pathName</u> <b>window</b> <b>create</b> <u>index</u> <b>-create</b> will  automatically  trigger  the  associated  creation
       script. After destroying an elided embedded window, the latter won't get automatically recreated.

       When an embedded window is added to a text widget with the <u>pathName</u> <b>window</b> <b>create</b> widget command, several
       configuration  options  may  be associated with it. These options may be modified later with the <u>pathName</u>
       <b>window</b> <b>configure</b> widget command. The following options are currently supported:

       <b>-align</b> <u>where</u>
              If the window is not as tall as the line in which it is displayed, this  option  determines  where
              the  window  is displayed in the line. <u>Where</u> must have one of the values <b>top</b> (align the top of the
              window with the top of the line), <b>center</b> (center the window within the range of the line),  <b>bottom</b>
              (align the bottom of the window with the bottom of the line's area), or <b>baseline</b> (align the bottom
              of the window with the baseline of the line).

       <b>-create</b> <u>script</u>
              Specifies  a  Tcl  script  that  may  be  evaluated to create the window for the annotation. If no
              <b>-window</b> option has been specified for the annotation  this  script  will  be  evaluated  when  the
              annotation  is about to be displayed on the screen. <u>Script</u> must create a window for the annotation
              and return the name of that window as its result. Two substitutions will be  performed  in  <u>script</u>
              before  evaluation.  <u>%W</u>  will be substituted by the name of the parent text widget, and <u>%%</u> will be
              substituted by a single <u>%</u>.  If the annotation's window should ever  be  deleted,  <u>script</u>  will  be
              evaluated again the next time the annotation is displayed.

       <b>-padx</b> <u>pixels</u>
              <u>Pixels</u>  specifies  the  amount of extra space to leave on each side of the embedded window. It may
              have any of the usual forms defined for a screen distance.

       <b>-pady</b> <u>pixels</u>
              <u>Pixels</u> specifies the amount of extra space to leave on the top and on the bottom of  the  embedded
              window. It may have any of the usual forms defined for a screen distance.

       <b>-stretch</b> <u>boolean</u>
              If  the requested height of the embedded window is less than the height of the line in which it is
              displayed, this option can be used to specify whether the window should be stretched vertically to
              fill its line. If the <b>-pady</b> option has been specified as well, then the requested padding will  be
              retained even if the window is stretched.

       <b>-window</b> <u>pathName</u>
              Specifies the name of a window to display in the annotation. Note that if a <u>pathName</u> has been set,
              then  later  configuring  a window to the empty string will not delete the widget corresponding to
              the old <u>pathName</u>.  Rather it will remove the association between the old  <u>pathName</u>  and  the  text
              widget.  If  multiple  peer widgets are in use, it is usually simpler to use the <b>-create</b> option if
              embedded windows are desired in each peer.

</pre><h4><b>EMBEDDED</b> <b>IMAGES</b></h4><pre>
       The final form of annotation in text widgets is an embedded image. Each embedded image annotation  causes
       an image to be displayed at a particular point in the text. There may be any number of embedded images in
       a text widget, and a particular image may be embedded in multiple places in the same text widget.

       The  embedded  image's  position  on the screen will be updated as the text is modified or scrolled. Each
       embedded image occupies one unit's worth of index space in the text widget, and it  may  be  referred  to
       either by its position in the widget's index space, or the name it is assigned when the image is inserted
       into  the  text  widget with <u>pathName</u> <b>image</b> <b>create</b>. If the range of text containing the embedded image is
       deleted then that copy of the image is removed from the screen.

       Eliding an embedded image immediately after scheduling it for creation via <u>pathName</u>  <b>image</b>  <b>create</b>  <u>index</u>
       <b>-create</b>  will prevent it from being effectively created. Uneliding an elided embedded image scheduled for
       creation via <u>pathName</u> <b>image</b> <b>create</b> <u>index</u> <b>-create</b>  will  automatically  trigger  the  associated  creation
       script. After destroying an elided embedded image, the latter won't get automatically recreated.

       When  an  embedded  image is added to a text widget with the <u>pathName</u> <b>image</b> <b>create</b> widget command, a name
       unique to this instance of the image is returned. This name may then be  used  to  refer  to  this  image
       instance. The name is taken to be the value of the <b>-name</b> option (described below). If the <b>-name</b> option is
       not  provided,  the  <b>-image</b> name is used instead.  If the <u>imageName</u> is already in use in the text widget,
       then <b>#</b><u>nn</u> is added to the end of the <u>imageName</u>, where  <u>nn</u>  is  an  arbitrary  integer.  This  insures  the
       <u>imageName</u>  is  unique. Once this name is assigned to this instance of the image, it does not change, even
       though the <b>-image</b> or <b>-name</b> values can be changed with <u>pathName</u> <b>image</b> <b>configure</b>.

       When an embedded image is added to a text widget with the <u>pathName</u> <b>image</b> <b>create</b> widget  command,  several
       configuration  options  may  be associated with it. These options may be modified later with the <u>pathName</u>
       <b>image</b> <b>configure</b> widget command. The following options are currently supported:

       <b>-align</b> <u>where</u>
              If the image is not as tall as the line in which it is displayed, this option determines where the
              image is displayed in the line. <u>Where</u> must have one of the values <b>top</b> (align the top of the  image
              with  the  top of the line), <b>center</b> (center the image within the range of the line), <b>bottom</b> (align
              the bottom of the image with the bottom of the line's area), or <b>baseline</b> (align the bottom of  the
              image with the baseline of the line).

       <b>-image</b> <u>image</u>
              Specifies the name of the Tk image to display in the annotation. If <u>image</u> is not a valid Tk image,
              then an error is returned.

       <b>-name</b> <u>ImageName</u>
              Specifies the name by which this image instance may be referenced in the text widget. If <u>ImageName</u>
              is  not  supplied,  then  the name of the Tk image is used instead. If the <u>imageName</u> is already in
              use, <u>#nn</u> is appended to the end of the name as described above.

       <b>-padx</b> <u>pixels</u>
              <u>Pixels</u> specifies the amount of extra space to leave on each side of the  embedded  image.  It  may
              have any of the usual forms defined for a screen distance.

       <b>-pady</b> <u>pixels</u>
              <u>Pixels</u>  specifies  the amount of extra space to leave on the top and on the bottom of the embedded
              image. It may have any of the usual forms defined for a screen distance.

</pre><h4><b>THE</b> <b>SELECTION</b></h4><pre>
       Selection support is implemented via tags. If the <b>-exportselection</b> option for the  text  widget  is  true
       then the <b>sel</b> tag will be associated with the selection:

       [1]    Whenever characters are tagged with <b>sel</b> the text widget will claim ownership of the selection.

       [2]    Attempts  to  retrieve  the  selection  will  be  serviced  by  the text widget, returning all the
              characters with the <b>sel</b> tag.

       [3]    If the selection is claimed  away  by  another  application  or  by  another  window  within  this
              application, then the <b>sel</b> tag will be removed from all characters in the text.

       [4]    Whenever  the  <b>sel</b> tag range changes a virtual event <b>&lt;&lt;Selection&gt;&gt;</b> is generated.  It might also be
              generated when selection is affected  but  not  actually  changed.   Further,  multiple  selection
              changes  could  happen  before  events  can  be processed leading to multiple events with the same
              visible selection.

       The <b>sel</b> tag is automatically defined when a text widget is created, and it may not be  deleted  with  the
       “<u>pathName</u>  <b>tag</b>  <b>delete</b>”  widget  command.  Furthermore,  the  <b>-selectbackground</b>,  <b>-selectborderwidth</b>, and
       <b>-selectforeground</b> options for the text widget are tied to the <b>-background</b>, <b>-borderwidth</b>, and  <b>-foreground</b>
       options  for  the  <b>sel</b>  tag:  changes  in  either  will automatically be reflected in the other. Also the
       <b>-inactiveselectbackground</b> option for the text widget is used instead of <b>-selectbackground</b> when  the  text
       widget  does  not  have the focus. This allows programmatic control over the visualization of the <b>sel</b> tag
       for foreground and background windows, or to have <b>sel</b> not shown at all (when <b>-inactiveselectbackground</b> is
       empty) for background windows. Each peer text widget  has  its  own  <b>sel</b>  tag  which  can  be  separately
       configured and set.

</pre><h4><b>THE</b> <b>INSERTION</b> <b>CURSOR</b></h4><pre>
       The  mark  named <b>insert</b> has special significance in text widgets. It is defined automatically when a text
       widget is created and it may not be unset with the “<u>pathName</u> <b>mark</b> <b>unset</b>” widget command. The <b>insert</b>  mark
       represents  the position of the insertion cursor, and the insertion cursor will automatically be drawn at
       this point whenever the text widget has the input focus.

</pre><h4><b>THE</b> <b>MODIFIED</b> <b>FLAG</b></h4><pre>
       The text widget can keep track of changes to the content of the widget by means  of  the  modified  flag.
       Inserting  or deleting text will set this flag. The flag can be queried, set and cleared programmatically
       as well. Whenever the flag changes state a <b>&lt;&lt;Modified&gt;&gt;</b> virtual event is generated. See the <u>pathName</u> <b>edit</b>
       <b>modified</b> widget command for more details.

</pre><h4><b>THE</b> <b>UNDO</b> <b>MECHANISM</b></h4><pre>
       The text widget has an unlimited undo and redo mechanism (when the <b>-undo</b> widget  option  is  true)  which
       records every insert and delete action on a stack.

       Boundaries (called “separators”) are inserted between edit actions. The purpose of these separators is to
       group  inserts,  deletes  and  replaces  into  one compound edit action. When undoing a change everything
       between two separators will be undone. The undone changes are then moved to the redo stack,  so  that  an
       undone edit can be redone again.  The redo stack is cleared whenever new edit actions are recorded on the
       undo stack. The undo and redo stacks can be cleared to keep their depth under control.

       Separators  are  inserted  automatically  when  the <b>-autoseparators</b> widget option is true. You can insert
       separators programmatically as well. If a separator is already present at the top of the  undo  stack  no
       other will be inserted. That means that two separators on the undo stack are always separated by at least
       one insert or delete action.

       The <b>&lt;&lt;UndoStack&gt;&gt;</b> virtual event is generated every time the undo stack or the redo stack becomes empty or
       unempty.

       The  undo  mechanism  is also linked to the modified flag. This means that undoing or redoing changes can
       take a modified text widget back to the unmodified state or vice versa. The modified  flag  will  be  set
       automatically  to the appropriate state. This automatic coupling does not work when the modified flag has
       been set by the user, until the flag has been reset again.

       See below for the <u>pathName</u> <b>edit</b> widget command that controls the undo mechanism.

</pre><h4><b>PEER</b> <b>WIDGETS</b></h4><pre>
       The text widget has a separate store of all its data concerning  each  line's  textual  contents,  marks,
       tags, images and windows, and the undo stack.

       While  this  data  store  cannot  be  accessed  directly (i.e. without a text widget as an intermediary),
       multiple text widgets can be created, each of which present different views on the same underlying  data.
       Such text widgets are known as peer text widgets.

       As  text  is  added,  deleted,  edited  and  coloured  in  any one widget, and as images, marks, tags are
       adjusted, all such changes will be reflected in all peers.

       All data and markup is shared, except for a few small  details.  First,  the  <b>sel</b>  tag  may  be  set  and
       configured  (in  its  display  style) differently for each peer. Second, each peer has its own <b>insert</b> and
       <b>current</b> mark positions (but all other marks are shared). Third, embedded  windows,  which  are  arbitrary
       other  widgets,  cannot  be  shared  between  peers. This means the <b>-window</b> option of embedded windows is
       independently set for each peer (it is advisable to use the <b>-create</b> script  capabilities  to  allow  each
       peer to create its own embedded windows as needed). Fourth, all of the configuration options of each peer
       (e.g.  <b>-font</b>, etc) can be set independently, with the exception of <b>-undo</b>, <b>-maxundo</b>, <b>-autoseparators</b> (i.e.
       all undo, redo and modified state issues are shared).

       Finally any single peer need not contain all lines from the underlying data store. When creating a  peer,
       a  contiguous  range  of  lines  (e.g. only lines 52 through 125) may be specified. This allows a peer to
       contain just a small portion of the overall text. The range of lines will expand and contract as text  is
       inserted  or  deleted. The peer will only ever display complete lines of text (one cannot share just part
       of a line). If the peer's contents contracts to nothing (i.e. all complete lines in the peer widget  have
       been  deleted  from  another  widget),  then it is impossible for new lines to be inserted. The peer will
       simply become an empty shell on which the background can be configured, but which  will  never  show  any
       content  (without  manual  reconfiguration  of  the start and end lines). Note that a peer which does not
       contain all of the underlying data store still has indices numbered from “1.0” to “end”.   It  is  simply
       that  those  indices  reflect  a  subset  of  the total data, and data outside the contained range is not
       accessible to the peer. This means that the command <u>peerName</u> <b>index</b> <b>end</b> may return quite different  values
       in  different  peers.  Similarly,  commands like <u>peerName</u> <b>tag</b> <b>ranges</b> will not return index ranges outside
       that which is meaningful to the peer. The configuration options <b>-startline</b> and <b>-endline</b> may  be  used  to
       control how much of the underlying data is contained in any given text widget.

       Note  that  peers are really peers. Deleting the “original” text widget will not cause any other peers to
       be deleted, or otherwise affected.

       See below for the <u>pathName</u> <b>peer</b> widget command that controls the creation of peer widgets.

</pre><h4><b>ASYNCHRONOUS</b> <b>UPDATE</b> <b>OF</b> <b>LINE</b> <b>HEIGHTS</b></h4><pre>
       In order to maintain a responsive user-experience, the text widget calculates lines metrics (line heights
       in pixels) asynchronously. Because of this, some commands of the text widget may return wrong results  if
       the  asynchronous  calculations  are  not finished at the time of calling. This applies to <u>pathName</u> <b>count</b>
       <b>-ypixels</b> and <u>pathName</u> <b>yview</b>.

       Again for performance reasons, it would not be appropriate to let these commands always wait for the  end
       of  the  update calculation each time they are called. In most use cases of these commands a more or less
       inaccurate result does not really matter compared to execution speed.

       In case accurate result is needed (and if the text widget is managed by  a  geometry  manager),  one  can
       resort  to  <u>pathName</u>  <b>sync</b>  and  <u>pathName</u>  <b>pendingsync</b> to control the synchronization of the view of text
       widgets.

       The <b>&lt;&lt;WidgetViewSync&gt;&gt;</b> virtual event fires when the line heights of the text widget become obsolete  (due
       to some editing command or configuration change), and again when the internal data of the text widget are
       back  in sync with the widget view. The detail field (%d substitution) is either true (when the widget is
       in sync) or false (when it is not).

       <u>pathName</u> <b>sync</b>, <u>pathName</u> <b>pendingsync</b> and <b>&lt;&lt;WidgetViewSync&gt;&gt;</b> apply to each text widget independently of its
       peers.

       Examples of use:
              ## Example 1:
              # immediately complete line metrics at any cost (GUI unresponsive)
              $w sync
              $w yview moveto $fraction

              ## Example 2:
              # synchronously wait for up-to-date line metrics (GUI responsive)
              # before executing the scheduled command, but don't block execution flow
              $w sync -command [list $w yview moveto $fraction]

              ## Example 3:
              # init
              set yud($w) 0
              proc updateaction w {
              set ::yud($w) 1
              # any other update action here...
              }
              # runtime, synchronously wait for up-to-date line metrics (GUI responsive)
              $w sync -command [list updateaction $w]
              vwait yud($w)
              $w yview moveto $fraction

              ## Example 4:
              # init
              set todo($w) {}
              proc updateaction w {
              foreach cmd $::todo($w) {uplevel #0 $cmd}
              set todo($w) {}
              }
              # runtime
              lappend todo($w) [list $w yview moveto $fraction]
              $w sync -command [list updateaction $w]

              ## Example 5:
              # init
              set todo($w) {}
              bind $w &lt;&lt;WidgetViewSync&gt;&gt; {
              if {%d} {
              foreach cmd $todo(%W) {eval $cmd}
              set todo(%W) {}
              }
              }
              # runtime
              if {![$w pendingsync]} {
              $w yview moveto $fraction
              } else {
              lappend todo($w) [list $w yview moveto $fraction]
              }

</pre><h4><b>WIDGET</b> <b>COMMAND</b></h4><pre>
       The <b>text</b> command creates a new Tcl command whose name is the same as the path name of the text's  window.
       This command may be used to invoke various operations on the widget. It has the following general form:
              <u>pathName</u> <u>option</u> ?<u>arg</u> <u>...</u>?
       <u>PathName</u>  is  the  name  of the command, which is the same as the text widget's path name. <u>Option</u> and the
       <u>arg</u>s determine the exact behavior of the command. The following commands are possible for text widgets:

       <u>pathName</u> <b>bbox</b> <u>index</u>
              Returns a list of four elements describing the screen area of the character given  by  <u>index</u>.  The
              first  two  elements of the list give the x and y coordinates of the upper-left corner of the area
              occupied by the character, and the last two elements give the width and height of the area. If the
              character is only partially visible on the screen, then the return value reflects just the visible
              part. If the character is not visible on the screen then the return value is an empty list.

       <u>pathName</u> <b>cget</b> <u>option</u>
              Returns the current value of the configuration option given by <u>option</u>.  <u>Option</u> may have any of the
              values accepted by the <b>text</b> command.

       <u>pathName</u> <b>compare</b> <u>index1</u> <u>op</u> <u>index2</u>
              Compares the indices given by <u>index1</u> and <u>index2</u> according to the relational operator given by  <u>op</u>,
              and returns 1 if the relationship is satisfied and 0 if it is not. <u>Op</u> must be one of the operators
              &lt;,  &lt;=,  ==,  &gt;=,  &gt;,  or  !=. If <u>op</u> is == then 1 is returned if the two indices refer to the same
              character, if <u>op</u> is &lt; then 1 is returned if <u>index1</u> refers to an earlier character in the text than
              <u>index2</u>, and so on.

       <u>pathName</u> <b>configure</b> ?<u>option</u>? ?<u>value</u> <u>option</u> <u>value</u> <u>...</u>?
              Query or modify the configuration options of the widget. If no <u>option</u> is specified, returns a list
              describing all of the available options for <u>pathName</u> (see <b>Tk_ConfigureInfo</b> for information on  the
              format  of  this  list).  If  <u>option</u>  is  specified with no <u>value</u>, then the command returns a list
              describing the one named option (this list will be identical to the corresponding sublist  of  the
              value  returned  if no <u>option</u> is specified). If one or more <u>option-value</u> pairs are specified, then
              the command modifies the given widget option(s) to have the  given  value(s);  in  this  case  the
              command returns an empty string. <u>Option</u> may have any of the values accepted by the <b>text</b> command.

       <u>pathName</u> <b>count</b> ?<u>options</u>? <u>index1</u> <u>index2</u>
              Counts  the  number  of  relevant  things  between the two indices. If <u>index1</u> is after <u>index2</u>, the
              result will be a negative number (and this holds for each of the  possible  options).  The  actual
              items which are counted depend on the options given. The result is a list of integers, one for the
              result  of  each  counting  option  given.  Valid  counting  options  are  <b>-chars</b>,  <b>-displaychars</b>,
              <b>-displayindices</b>, <b>-displaylines</b>, <b>-indices</b>, <b>-lines</b>, <b>-xpixels</b> and <b>-ypixels</b>. The default value, if  no
              option  is  specified,  is  <b>-indices</b>.  There  is  an additional possible option <b>-update</b> which is a
              modifier. If given (and if the text widget is managed by a geometry manager), then all  subsequent
              options ensure that any possible out of date information is recalculated.  This currently only has
              any  effect  for  the  <b>-ypixels</b>  count (which, if <b>-update</b> is not given, will use the text widget's
              current cached value for each line). This <b>-update</b> option is obsoleted by <u>pathName</u>  <b>sync</b>,  <u>pathName</u>
              <b>pendingsync</b> and <b>&lt;&lt;WidgetViewSync&gt;&gt;</b>.  The count options are interpreted as follows:

              <b>-chars</b> count all characters, whether elided or not. Do not count embedded windows or images.

              <b>-displaychars</b>
                     count all non-elided characters.

              <b>-displayindices</b>
                     count all non-elided characters, windows and images.

              <b>-displaylines</b>
                     count all display lines (i.e. counting one for each time a line wraps) from the line of the
                     first  index  up  to,  but not including the display line of the second index. Therefore if
                     they are both on the same display line, zero will be returned. By  definition  displaylines
                     are visible and therefore this only counts portions of actual visible lines.

              <b>-indices</b>
                     count  all characters and embedded windows or images (i.e. everything which counts in text-
                     widget index space), whether they are elided or not.

              <b>-lines</b> count all logical lines (irrespective of wrapping) from the line of the first index up  to,
                     but  not  including  the  line  of the second index. Therefore if they are both on the same
                     line, zero will be returned. Logical lines are counted whether they are  currently  visible
                     (non-elided) or not.

              <b>-xpixels</b>
                     count  the  number of horizontal pixels from the first pixel of the first index to (but not
                     including) the first pixel of the second index. To count the total  desired  width  of  the
                     text  widget  (assuming  wrapping is not enabled), first find the longest line and then use
                     “.text count -xpixels "${line}.0" "${line}.0 lineend"”.

              <b>-ypixels</b>
                     count the number of vertical pixels from the first pixel of the first  index  to  (but  not
                     including)  the  first  pixel  of the second index. If both indices are on the same display
                     line, zero will be returned. To count the total number  of  vertical  pixels  in  the  text
                     widget,  use  “.text  count -ypixels 1.0 end”, and to ensure this is up to date, use “.text
                     count -update -ypixels 1.0 end”.

              The command returns a positive or negative integer corresponding to the number  of  items  counted
              between the two indices. One such integer is returned for each counting option given, so a list is
              returned if more than one option was supplied. For example “.text count -xpixels -ypixels 1.3 4.5”
              is perfectly valid and will return a list of two elements.

       <u>pathName</u> <b>debug</b> ?<u>boolean</u>?
              If  <u>boolean</u>  is  specified,  then  it  must  have  one  of  the  true  or false values accepted by
              Tcl_GetBoolean. If the value is a true one then internal consistency checks will be turned  on  in
              the  B-tree  code  associated  with  text widgets. If <u>boolean</u> has a false value then the debugging
              checks will be turned off. In either case the command returns an empty string. If <u>boolean</u>  is  not
              specified  then  the  command returns <b>on</b> or <b>off</b> to indicate whether or not debugging is turned on.
              There is a single debugging switch shared by all text widgets: turning debugging on or off in  any
              widget turns it on or off for all widgets. For widgets with large amounts of text, the consistency
              checks may cause a noticeable slow-down.

              When  debugging  is  turned  on,  the drawing routines of the text widget set the global variables
              <b>tk_textRedraw</b> and <b>tk_textRelayout</b> to the lists of indices that are redrawn. The  values  of  these
              variables are tested by Tk's test suite.

       <u>pathName</u> <b>delete</b> <u>index1</u> ?<u>index2</u> <u>...</u>?
              Delete  a range of characters from the text.  If both <u>index1</u> and <u>index2</u> are specified, then delete
              all the characters starting with the one given by <u>index1</u> and stopping just before <u>index2</u> (i.e. the
              character at <u>index2</u> is not deleted).  If <u>index2</u> does not specify a position later in the text than
              <u>index1</u> then no characters are deleted.  If <u>index2</u> is not specified then the  single  character  at
              <u>index1</u>  is  deleted.   Attempts  to delete characters in a way that would leave the text without a
              newline as the last character will be tweaked by the text widget to  avoid  this.  In  particular,
              deletion  of  complete  lines  of  text  up  to  the  end of the text will also delete the newline
              character just before the deleted block so that it is replaced by the new  final  newline  of  the
              text  widget.  The command returns an empty string.  If more indices are given, multiple ranges of
              text will be deleted.  All indices are first checked for validity before any deletions  are  made.
              They  are  sorted  and  the text is removed from the last range to the first range so deleted text
              does not cause an undesired index shifting side-effects.  If multiple ranges with the  same  start
              index  are given, then the longest range is used.  If overlapping ranges are given, then they will
              be merged into spans that do not cause deletion of text outside  the  given  ranges  due  to  text
              shifted during deletion.

       <u>pathName</u> <b>dlineinfo</b> <u>index</u>
              Returns  a  list  with  five  elements describing the area occupied by the display line containing
              <u>index</u>. The first two elements of the list give the x and y coordinates of the upper-left corner of
              the area occupied by the line, the third and fourth elements give the  width  and  height  of  the
              area,  and  the  fifth element gives the position of the baseline for the line, measured down from
              the top of the area. All of this information is measured in pixels. If the current  wrap  mode  is
              <b>none</b>  and  the  line  extends  beyond the boundaries of the window, the area returned reflects the
              entire area of the line, including the portions that are out of the window. If the line is shorter
              than the full width of the window then the area returned reflects just the  portion  of  the  line
              that  is  occupied by characters and embedded windows. If the display line containing <u>index</u> is not
              visible on the screen then the return value is an empty list.

       <u>pathName</u> <b>dump</b> ?<u>switches</u>? <u>index1</u> ?<u>index2</u>?
              Return the contents of the text widget from <u>index1</u> up to, but not including <u>index2</u>, including  the
              text  and information about marks, tags, and embedded windows. If <u>index2</u> is not specified, then it
              defaults to one character past <u>index1</u>. The information is returned in the following format:

              <u>key1</u> <u>value1</u> <u>index1</u> <u>key2</u> <u>value2</u> <u>index2</u> ...

              The possible <u>key</u> values are <b>text</b>, <b>mark</b>, <b>tagon</b>, <b>tagoff</b>, <b>image</b>, and <b>window</b>. The corresponding  <u>value</u>
              is  the  text, mark name, tag name, image name, or window name. The <u>index</u> information is the index
              of the start of the text, mark, tag transition, image or window. One  or  more  of  the  following
              switches (or abbreviations thereof) may be specified to control the dump:

              <b>-all</b>   Return  information about all elements: text, marks, tags, images and windows.  This is the
                     default.

              <b>-command</b> <u>command</u>
                     Instead of returning the information as the  result  of  the  dump  operation,  invoke  the
                     <u>command</u>  on  each  element  of  the  text  widget  within the range.  The command has three
                     arguments appended to it before it is evaluated: the <u>key</u>, <u>value</u>, and <u>index</u>.

              <b>-image</b> Include information about images in the dump results.

              <b>-mark</b>  Include information about marks in the dump results.

              <b>-tag</b>   Include information about tag transitions in the dump results. Tag information is  returned
                     as  <b>tagon</b>  and  <b>tagoff</b>  elements that indicate the begin and end of each range of each tag,
                     respectively.

              <b>-text</b>  Include information about text in the dump results. The value is the text up  to  the  next
                     element  or  the end of range indicated by <u>index2</u>. A text element does not span newlines. A
                     multi-line block of text that contains no marks or tag transitions will still be dumped  as
                     a set of text segments that each end with a newline. The newline is part of the value.

              <b>-window</b>
                     Include  information  about  embedded windows in the dump results. The value of a window is
                     its Tk pathname, unless the window has not  been  created  yet.  (It  must  have  a  create
                     script.)  In  this  case  an empty string is returned, and you must query the window by its
                     index position to get more information.

       <u>pathName</u> <b>edit</b> <u>option</u> ?<u>arg</u> <u>...</u>?
              This command controls the undo mechanism and the modified flag. The exact behavior of the  command
              depends  on the <u>option</u> argument that follows the <b>edit</b> argument. The following forms of the command
              are currently supported:

              <u>pathName</u> <b>edit</b> <b>canredo</b>
                     Returns a boolean true if redo is  possible,  i.e.  when  the  redo  stack  is  not  empty.
                     Otherwise returns false.

              <u>pathName</u> <b>edit</b> <b>canundo</b>
                     Returns  a  boolean  true  if  undo  is  possible,  i.e.  when the undo stack is not empty.
                     Otherwise returns false.

              <u>pathName</u> <b>edit</b> <b>modified</b> ?<u>boolean</u>?
                     If <u>boolean</u> is not specified, returns the modified flag of the widget.  The insert,  delete,
                     edit undo and edit redo commands or the user can set or clear the modified flag. If <u>boolean</u>
                     is specified, sets the modified flag of the widget to <u>boolean</u>.

              <u>pathName</u> <b>edit</b> <b>redo</b>
                     When the <b>-undo</b> option is true, reapplies the last undone edits provided no other edits were
                     done  since  then, and returns a list of indices indicating what ranges were changed by the
                     redo operation. Generates an error when the redo stack is  empty.  Does  nothing  when  the
                     <b>-undo</b> option is false.

              <u>pathName</u> <b>edit</b> <b>reset</b>
                     Clears the undo and redo stacks.

              <u>pathName</u> <b>edit</b> <b>separator</b>
                     Inserts  a  separator  (boundary)  on the undo stack. Does nothing when the <b>-undo</b> option is
                     false.

              <u>pathName</u> <b>edit</b> <b>undo</b>
                     Undoes the last edit action when the <b>-undo</b> option is true, and returns a  list  of  indices
                     indicating what ranges were changed by the undo operation. An edit action is defined as all
                     the  insert  and  delete  commands  that  are  recorded  on  the  undo stack in between two
                     separators. Generates an error when the undo stack is empty. Does nothing  when  the  <b>-undo</b>
                     option is false.

       <u>pathName</u> <b>get</b> ?<b>-displaychars</b>? ?<b>--</b>? <u>index1</u> ?<u>index2</u> <u>...</u>?
              Return  a  range  of  characters from the text. The return value will be all the characters in the
              text starting with the one whose index is <u>index1</u> and ending just before the  one  whose  index  is
              <u>index2</u>  (the  character  at  <u>index2</u>  will  not  be returned). If <u>index2</u> is omitted then the single
              character at <u>index1</u> is returned. If there are no characters in the specified range (e.g. <u>index1</u> is
              past the end of the file or <u>index2</u> is less than or equal  to  <u>index1</u>)  then  an  empty  string  is
              returned.  If the specified range contains embedded windows, no information about them is included
              in the returned string. If multiple index pairs  are  given,  multiple  ranges  of  text  will  be
              returned  in  a  list.  Invalid ranges will not be represented with empty strings in the list. The
              ranges are returned in the order passed to <u>pathName</u> <b>get</b>. If the  <b>-displaychars</b>  option  is  given,
              then,  within  each  range,  only those characters which are not elided will be returned. This may
              have the effect that some of the returned ranges are empty strings.

       <u>pathName</u> <b>image</b> <u>option</u> ?<u>arg</u> <u>...</u>?
              This command is used to manipulate embedded images. The behavior of the  command  depends  on  the
              <u>option</u>  argument that follows the <b>image</b> argument. The following forms of the command are currently
              supported:

              <u>pathName</u> <b>image</b> <b>cget</b> <u>index</u> <u>option</u>
                     Returns the value of a configuration option for an embedded  image.  <u>Index</u>  identifies  the
                     embedded  image,  and <u>option</u> specifies a particular configuration option, which must be one
                     of the ones listed in the section <b>EMBEDDED</b> <b>IMAGES</b>.

              <u>pathName</u> <b>image</b> <b>configure</b> <u>index</u> ?<u>option</u> <u>value</u> <u>...</u>?
                     Query or modify the configuration options for an embedded image. If no <u>option</u> is specified,
                     returns a list describing all of the available options for the embedded image at <u>index</u> (see
                     <b>Tk_ConfigureInfo</b> for information on the format of this list). If <u>option</u> is  specified  with
                     no  <u>value</u>,  then the command returns a list describing the one named option (this list will
                     be identical to the corresponding sublist of the value returned if no <u>option</u> is specified).
                     If one or more <u>option-value</u> pairs are  specified,  then  the  command  modifies  the  given
                     option(s) to have the given value(s); in this case the command returns an empty string. See
                     <b>EMBEDDED</b> <b>IMAGES</b> for information on the options that are supported.

              <u>pathName</u> <b>image</b> <b>create</b> <u>index</u> ?<u>option</u> <u>value</u> <u>...</u>?
                     This  command creates a new image annotation, which will appear in the text at the position
                     given by <u>index</u>. Any number  of  <u>option-value</u>  pairs  may  be  specified  to  configure  the
                     annotation.  Returns  a  unique  identifier  that  may be used as an index to refer to this
                     image. See <b>EMBEDDED</b> <b>IMAGES</b> for information  on  the  options  that  are  supported,  and  a
                     description of the identifier returned.

              <u>pathName</u> <b>image</b> <b>names</b>
                     Returns  a  list  whose elements are the names of all image instances currently embedded in
                     <u>window</u>.

       <u>pathName</u> <b>index</b> <u>index</u>
              Returns the position corresponding to <u>index</u> in the form <u>line.char</u> where <u>line</u> is  the  line  number
              and <u>char</u> is the character number.  <u>Index</u> may have any of the forms described under <b>INDICES</b> above.

       <u>pathName</u> <b>insert</b> <u>index</u> <u>chars</u> ?<u>tagList</u> <u>chars</u> <u>tagList</u> <u>...</u>?
              Inserts  all of the <u>chars</u> arguments just before the character at <u>index</u>. If <u>index</u> refers to the end
              of the text (the character after the last newline) then the new text is inserted just  before  the
              last  newline  instead. If there is a single <u>chars</u> argument and no <u>tagList</u>, then the new text will
              receive any tags that are present on both  the  character  before  and  the  character  after  the
              insertion  point;  if a tag is present on only one of these characters then it will not be applied
              to the new text. If <u>tagList</u> is specified then it  consists  of  a  list  of  tag  names;  the  new
              characters will receive all of the tags in this list and no others, regardless of the tags present
              around the insertion point. If multiple <u>chars</u>-<u>tagList</u> argument pairs are present, they produce the
              same  effect  as  if  a  separate <u>pathName</u> <b>insert</b> widget command had been issued for each pair, in
              order. The last <u>tagList</u> argument may be omitted.

       <u>pathName</u> <b>mark</b> <u>option</u> ?<u>arg</u> <u>...</u>?
              This command is used to manipulate marks. The exact behavior of the command depends on the  <u>option</u>
              argument  that  follows  the  <b>mark</b>  argument.  The  following  forms  of the command are currently
              supported:

              <u>pathName</u> <b>mark</b> <b>gravity</b> <u>markName</u> ?<u>direction</u>?
                     If <u>direction</u> is not specified, returns <b>left</b> or <b>right</b> to  indicate  which  of  its  adjacent
                     characters  <u>markName</u>  is  attached to. If <u>direction</u> is specified, it must be <b>left</b> or <b>right</b>;
                     the gravity of <u>markName</u> is set to the given value.

              <u>pathName</u> <b>mark</b> <b>names</b>
                     Returns a list whose elements are the names of all the marks that are currently set.

              <u>pathName</u> <b>mark</b> <b>next</b> <u>index</u>
                     Returns the name of the next mark at or after <u>index</u>. If <u>index</u>  is  specified  in  numerical
                     form,  then  the  search  for the next mark begins at that index. If <u>index</u> is the name of a
                     mark, then the search for the next mark begins immediately after that mark. This can  still
                     return  a  mark  at  the same position if there are multiple marks at the same index. These
                     semantics mean that the <b>mark</b> <b>next</b> operation can be used to step through all the marks in  a
                     text  widget  in  the  same  order  as  the  mark information returned by the <u>pathName</u> <b>dump</b>
                     operation. If a mark has been set to the special <b>end</b> index, then it appears to be <u>after</u> <b>end</b>
                     with respect to the <u>pathName</u> <b>mark</b> <b>next</b> operation. An empty string is returned if there  are
                     no marks after <u>index</u>.

              <u>pathName</u> <b>mark</b> <b>previous</b> <u>index</u>
                     Returns  the  name of the mark at or before <u>index</u>. If <u>index</u> is specified in numerical form,
                     then the search for the previous mark begins with the character just before that index.  If
                     <u>index</u>  is  the  name of a mark, then the search for the next mark begins immediately before
                     that mark. This can still return a mark at the same position if there are multiple marks at
                     the same index. These semantics mean that the <u>pathName</u> <b>mark</b> <b>previous</b> operation can be  used
                     to step through all the marks in a text widget in the reverse order as the mark information
                     returned  by the <u>pathName</u> <b>dump</b> operation. An empty string is returned if there are no marks
                     before <u>index</u>.

              <u>pathName</u> <b>mark</b> <b>set</b> <u>markName</u> <u>index</u>
                     Sets the mark named <u>markName</u> to a position just before the character at <u>index</u>. If  <u>markName</u>
                     already  exists,  it  is  moved  from its old position; if it does not exist, a new mark is
                     created. This command returns an empty string.

              <u>pathName</u> <b>mark</b> <b>unset</b> <u>markName</u> ?<u>markName</u> <u>markName</u> <u>...</u>?
                     Remove the mark corresponding to each of the <u>markName</u> arguments. The removed marks will not
                     be usable in indices and will not be returned by future calls  to  “<u>pathName</u>  <b>mark</b>  <b>names</b>”.
                     This command returns an empty string.

       <u>pathName</u> <b>peer</b> <u>option</u> <u>args</u>
              This command is used to create and query widget peers. It has two forms, depending on <u>option</u>:

              <u>pathName</u> <b>peer</b> <b>create</b> <u>newPathName</u> ?<u>options</u>?
                     Creates  a  peer  text  widget  with  the  given  <u>newPathName</u>,  and  any  optional standard
                     configuration options (as for the <u>text</u> command). By default the peer  will  have  the  same
                     start  and  end  line  as  the parent widget, but these can be overridden with the standard
                     configuration options.

              <u>pathName</u> <b>peer</b> <b>names</b>
                     Returns a list of peers of this widget (this does not include the widget itself). The order
                     within this list is undefined.

       <u>pathName</u> <b>pendingsync</b>
              Returns 1 if the line heights calculations are not up-to-date, 0 otherwise.

       <u>pathName</u> <b>replace</b> <u>index1</u> <u>index2</u> <u>chars</u> ?<u>tagList</u> <u>chars</u> <u>tagList</u> <u>...</u>?
              Replaces the range of characters between <u>index1</u> and <u>index2</u> with the  given  characters  and  tags.
              See  the  section  on  <u>pathName</u>  <b>insert</b>  for  an  explanation  of  the  handling of the <u>tagList...</u>
              arguments, and the section on <u>pathName</u> <b>delete</b> for an explanation of the handling of  the  indices.
              If <u>index2</u> corresponds to an index earlier in the text than <u>index1</u>, an error will be generated.

              The deletion and insertion are arranged so that no unnecessary scrolling of the window or movement
              of  insertion  cursor  occurs.  In  addition  the  undo/redo stack are correctly modified, if undo
              operations are active in the text widget. The command returns an empty string.

       <u>pathName</u> <b>scan</b> <u>option</u> <u>args</u>
              This command is used to implement scanning on texts. It has two forms, depending on <u>option</u>:

              <u>pathName</u> <b>scan</b> <b>mark</b> <u>x</u> <u>y</u>
                     Records <u>x</u> and <u>y</u> and the current view in the text window, for use in conjunction with  later
                     <u>pathName</u>  <b>scan</b>  <b>dragto</b>  commands.  Typically this command is associated with a mouse button
                     press in the widget. It returns an empty string.

              <u>pathName</u> <b>scan</b> <b>dragto</b> <u>x</u> <u>y</u>
                     This command computes the difference between its  <u>x</u>  and  <u>y</u>  arguments  and  the  <u>x</u>  and  <u>y</u>
                     arguments  to  the last <u>pathName</u> <b>scan</b> <b>mark</b> command for the widget. It then adjusts the view
                     by 10 times the difference in coordinates. This command is typically associated with  mouse
                     motion  events  in  the  widget,  to  produce the effect of dragging the text at high speed
                     through the window. The return value is an empty string.

       <u>pathName</u> <b>search</b> ?<u>switches</u>? <u>pattern</u> <u>index</u> ?<u>stopIndex</u>?
              Searches the text in <u>pathName</u> starting at <u>index</u> for a range of characters that matches <u>pattern</u>. If
              a match is found, the index of the first character in the match is returned as  result;  otherwise
              an  empty string is returned. One or more of the following switches (or abbreviations thereof) may
              be specified to control the search:

              <b>-forwards</b>
                     The search will proceed forward through the text, finding the first matching range starting
                     at or after the position given by <u>index</u>. This is the default.

              <b>-backwards</b>
                     The search will proceed backward through the text, finding the matching  range  closest  to
                     <u>index</u>  whose first character is before <u>index</u> (it is not allowed to be at <u>index</u>). Note that,
                     for a variety of reasons, backwards searches can  be  substantially  slower  than  forwards
                     searches  (particularly when using <b>-regexp</b>), so it is recommended that performance-critical
                     code use forward searches.

              <b>-exact</b> Use exact matching: the characters in the matching range must  be  identical  to  those  in
                     <u>pattern</u>. This is the default.

              <b>-regexp</b>
                     Treat  <u>pattern</u>  as  a  regular expression and match it against the text using the rules for
                     regular expressions (see the <b>regexp</b> command  and  the  <b>re_syntax</b>  page  for  details).  The
                     default  matching  automatically  passes  both the <b>-lineanchor</b> and <b>-linestop</b> options to the
                     regexp engine (unless <b>-nolinestop</b> is used), so that <u>^$</u> match beginning and end of line, and
                     <u>.</u>, <u>[^</u> sequences will never match the newline character <u>\n</u>.

              <b>-nolinestop</b>
                     This allows <u>.</u> and <u>[^</u> sequences to match the newline character <u>\n</u>, which they will otherwise
                     not do (see the <b>regexp</b> command for details). This option is only meaningful if  <b>-regexp</b>  is
                     also  given,  and an error will be thrown otherwise. For example, to match the entire text,
                     use “<u>pathName</u> <b>search</b> <b>-nolinestop</b> <b>-regexp</b> ".*" 1.0”.

              <b>-nocase</b>
                     Ignore case differences between the pattern and the text.

              <b>-count</b> <u>varName</u>
                     The argument following <b>-count</b> gives the name of a variable; if a match is found, the number
                     of index positions between beginning and end of the matching range will be  stored  in  the
                     variable.  If  there are no embedded images or windows in the matching range (and there are
                     no elided characters if <b>-elide</b>  is  not  given),  this  is  equivalent  to  the  number  of
                     characters  matched.  In  either  case,  the range <u>matchIdx</u> to <u>matchIdx</u> <u>+</u> <u>$count</u> <u>chars</u> will
                     return the entire matched text.

              <b>-all</b>   Find all matches in the given range and return a list of the indices of the first character
                     of each match. If a <b>-count</b> <u>varName</u> switch is given, then <u>varName</u> is  also  set  to  a  list
                     containing  one  element for each successful match. Note that, even for exact searches, the
                     elements of this list may be different, if there are embedded  images,  windows  or  hidden
                     text.   Searches  with  <b>-all</b>  behave very similarly to the Tcl command <b>regexp</b> <b>-all</b>, in that
                     overlapping matches are not normally returned. For example, applying an <b>-all</b> search of  the
                     pattern “\w+” against “hello there” will just match twice, once for each word, and matching
                     “Z[a-z]+Z” against “ZooZooZoo” will just match once.

              <b>-overlap</b>
                     When  performing  <b>-all</b>  searches,  the  normal  behaviour  is that matches which overlap an
                     already-found match will not be returned. This switch changes that behaviour  so  that  all
                     matches  which  are  not  totally  enclosed within another match are returned. For example,
                     applying an <b>-overlap</b> search of the pattern “\w+” against  “hello  there”  will  just  match
                     twice  (i.e.  no  different to just <b>-all</b>), but matching “Z[a-z]+Z” against “ZooZooZoo” will
                     now match twice. An error will be thrown if this switch is used without <b>-all</b>.

              <b>-strictlimits</b>
                     When performing any search, the normal behaviour is that the  start  and  stop  limits  are
                     checked  with  respect  to the start of the matching text. With the <b>-strictlimits</b> flag, the
                     entire matching range must lie inside the start and stop limits specified for the match  to
                     be valid.

              <b>-elide</b> Find elided (hidden) text as well. By default only displayed text is searched.

              <b>--</b>     This  switch has no effect except to terminate the list of switches: the next argument will
                     be treated as <u>pattern</u> even if it starts with <b>-</b>.

              The matching range may be within a single line of text, or run across multiple lines (if parts  of
              the  pattern  can  match  a  new-line).  For  regular  expression matching one can use the various
              newline-matching features such as <b>$</b> to match the end of a line, <b>^</b> to  match  the  beginning  of  a
              line,  and  to  control  whether  <b>.</b> is allowed to match a new-line. If <u>stopIndex</u> is specified, the
              search stops at that index: for  forward  searches,  no  match  at  or  after  <u>stopIndex</u>  will  be
              considered; for backward searches, no match earlier in the text than <u>stopIndex</u> will be considered.
              If  <u>stopIndex</u>  is omitted, the entire text will be searched: when the beginning or end of the text
              is reached, the search continues at the other end until the starting location is reached again; if
              <u>stopIndex</u> is specified, no wrap-around will occur. This means that, for example, if the search  is
              <b>-forwards</b>  but  <u>stopIndex</u>  is earlier in the text than <u>startIndex</u>, nothing will ever be found. See
              <b>KNOWN</b> <b>BUGS</b> below for a number of minor limitations of the <u>pathName</u> <b>search</b> command.

       <u>pathName</u> <b>see</b> <u>index</u>
              Adjusts the view in the window so that the character given by  <u>index</u>  is  completely  visible.  If
              <u>index</u>  is already visible then the command does nothing. If <u>index</u> is a short distance out of view,
              the command adjusts the view just enough to make <u>index</u> visible at the  edge  of  the  window.   If
              <u>index</u> is far out of view, then the command centers <u>index</u> in the window.

       <u>pathName</u> <b>sync</b> ?<b>-command</b> <u>command</u>?
              Controls the synchronization of the view of the text widget.

              <u>pathName</u> <b>sync</b>
                     Immediately  brings the line metrics up-to-date by forcing computation of any outdated line
                     heights. The command returns immediately  if  there  is  no  such  outdated  line  heights,
                     otherwise  it  returns  only  at  the end of the computation.  The command returns an empty
                     string.

              <u>pathName</u> <b>sync</b> <b>-command</b> <u>command</u>
                     Schedules <u>command</u> to be executed (by the event loop) exactly  once  as  soon  as  all  line
                     heights  are  up-to-date. If there are no pending line metrics calculations, the scheduling
                     is immediate. The command returns the empty string. <b>bgerror</b> is called on <u>command</u> failure.

       <u>pathName</u> <b>tag</b> <u>option</u> ?<u>arg</u> <u>...</u>?
              This command is used to manipulate tags. The exact behavior of the command depends on  the  <u>option</u>
              argument  that  follows  the  <b>tag</b>  argument.  The  following  forms  of  the command are currently
              supported:

              <u>pathName</u> <b>tag</b> <b>add</b> <u>tagName</u> <u>index1</u> ?<u>index2</u> <u>index1</u> <u>index2</u> <u>...</u>?
                     Associate the tag <u>tagName</u> with all of the characters starting with <u>index1</u> and  ending  just
                     before  <u>index2</u>  (the  character  at <u>index2</u> is not tagged). A single command may contain any
                     number of <u>index1</u>-<u>index2</u> pairs. If the last <u>index2</u> is omitted then the single  character  at
                     <u>index1</u>  is  tagged.  If there are no characters in the specified range (e.g. <u>index1</u> is past
                     the end of the file or <u>index2</u> is less than or equal to <u>index1</u>)  then  the  command  has  no
                     effect.

              <u>pathName</u> <b>tag</b> <b>bind</b> <u>tagName</u> ?<u>sequence</u>? ?<u>script</u>?
                     This  command associates <u>script</u> with the tag given by <u>tagName</u>.  Whenever the event sequence
                     given by <u>sequence</u> occurs for a character that has been tagged with <u>tagName</u>, the script will
                     be invoked. This widget command is similar to the <b>bind</b> command except that it  operates  on
                     characters  in  a  text  rather than entire widgets. See the <b>bind</b> manual entry for complete
                     details on the syntax of <u>sequence</u> and the substitutions performed on <u>script</u> before invoking
                     it. If all arguments are specified then a new binding is created,  replacing  any  existing
                     binding  for  the  same  <u>sequence</u> and <u>tagName</u> (if the first character of <u>script</u> is “+” then
                     <u>script</u> augments an existing binding rather than replacing it).  In  this  case  the  return
                     value  is  an  empty  string.  If  <u>script</u>  is  omitted  then the command returns the <u>script</u>
                     associated with <u>tagName</u> and <u>sequence</u> (an error occurs if there is no such binding). If both
                     <u>script</u> and <u>sequence</u> are omitted then the command returns a list of all  the  sequences  for
                     which bindings have been defined for <u>tagName</u>.

                     The  only  events  for  which  bindings may be specified are those related to the mouse and
                     keyboard (such as <b>Enter</b>, <b>Leave</b>, <b>Button</b>, <b>Motion</b>, and  <b>Key</b>)  or  virtual  events.  Mouse  and
                     keyboard  event  bindings  for  a text widget respectively use the <b>current</b> and <b>insert</b> marks
                     described under <b>MARKS</b> above. An <b>Enter</b> event triggers for a tag when the tag  first  becomes
                     present on the current character, and a <b>Leave</b> event triggers for a tag when it ceases to be
                     present  on  the  current  character.  <b>Enter</b> and <b>Leave</b> events can happen either because the
                     <b>current</b> mark moved or because the character at  that  position  changed.  Note  that  these
                     events  are different than <b>Enter</b> and <b>Leave</b> events for windows. Mouse events are directed to
                     the current character, while keyboard events are directed to the insert  character.   If  a
                     virtual  event  is used in a binding, that binding can trigger only if the virtual event is
                     defined by an underlying mouse-related or keyboard-related event.

                     It is possible for the current character to have multiple tags, and for  each  of  them  to
                     have  a  binding  for a particular event sequence. When this occurs, one binding is invoked
                     for each tag, in order from lowest-priority to highest  priority.  If  there  are  multiple
                     matching  bindings  for  a  single  tag,  then the most specific binding is chosen (see the
                     manual entry for the <b>bind</b> command for details). <b>continue</b> and <b>break</b> commands within  binding
                     scripts are processed in the same way as for bindings created with the <b>bind</b> command.

                     If  bindings  are  created  for  the  widget  as a whole using the <b>bind</b> command, then those
                     bindings will supplement the tag bindings. The tag bindings will be invoked first, followed
                     by bindings for the window as a whole.

              <u>pathName</u> <b>tag</b> <b>cget</b> <u>tagName</u> <u>option</u>
                     This command returns the current value of the option named <u>option</u> associated with  the  tag
                     given  by <u>tagName</u>. <u>Option</u> may have any of the values accepted by the <u>pathName</u> <b>tag</b> <b>configure</b>
                     widget command.

              <u>pathName</u> <b>tag</b> <b>configure</b> <u>tagName</u> ?<u>option</u>? ?<u>value</u>? ?<u>option</u> <u>value</u> <u>...</u>?
                     This command is similar to the <u>pathName</u> <b>configure</b> widget command except  that  it  modifies
                     options  associated  with  the  tag  given  by <u>tagName</u> instead of modifying options for the
                     overall text widget. If no <u>option</u> is specified, the command returns a list  describing  all
                     of the available options for <u>tagName</u> (see <b>Tk_ConfigureInfo</b> for information on the format of
                     this  list).  If  <u>option</u>  is  specified  with  no  <u>value</u>,  then  the command returns a list
                     describing the one named option (this list will be identical to the  corresponding  sublist
                     of  the  value  returned  if no <u>option</u> is specified). If one or more <u>option-value</u> pairs are
                     specified, then the command modifies the given option(s) to  have  the  given  value(s)  in
                     <u>tagName</u>;  in  this case the command returns an empty string.  See <b>TAGS</b> above for details on
                     the options available for tags.

              <u>pathName</u> <b>tag</b> <b>delete</b> <u>tagName</u> ?<u>tagName</u> <u>...</u>?
                     Deletes all tag information for each of the <u>tagName</u> arguments. The command removes the tags
                     from all characters in the file and also deletes any other information associated with  the
                     tags, such as bindings and display information. The command returns an empty string.

              <u>pathName</u> <b>tag</b> <b>lower</b> <u>tagName</u> ?<u>belowThis</u>?
                     Changes the priority of tag <u>tagName</u> so that it is just lower in priority than the tag whose
                     name  is  <u>belowThis</u>. If <u>belowThis</u> is omitted, then <u>tagName</u>'s priority is changed to make it
                     lowest priority of all tags.

              <u>pathName</u> <b>tag</b> <b>names</b> ?<u>index</u>?
                     Returns a list whose elements are the names  of  all  the  tags  that  are  active  at  the
                     character position given by <u>index</u>. If <u>index</u> is omitted, then the return value will describe
                     all  of  the tags that exist for the text (this includes all tags that have been named in a
                     “<u>pathName</u> <b>tag</b>” widget command but have not been deleted by a “<u>pathName</u> <b>tag</b>  <b>delete</b>”  widget
                     command,  even if no characters are currently marked with the tag). The list will be sorted
                     in order from lowest priority to highest priority.

              <u>pathName</u> <b>tag</b> <b>nextrange</b> <u>tagName</u> <u>index1</u> ?<u>index2</u>?
                     This command searches the text for a range of characters  tagged  with  <u>tagName</u>  where  the
                     first  character  of the range is no earlier than the character at <u>index1</u> and no later than
                     the character just before <u>index2</u> (a range starting at <u>index2</u> will not  be  considered).  If
                     several  matching  ranges  exist,  the first one is chosen. The command's return value is a
                     list containing two elements, which are the index of the first character of the  range  and
                     the  index  of  the character just after the last one in the range. If no matching range is
                     found then the return value is an empty string. If <u>index2</u> is not given then it defaults  to
                     the end of the text.

              <u>pathName</u> <b>tag</b> <b>prevrange</b> <u>tagName</u> <u>index1</u> ?<u>index2</u>?
                     This  command  searches  the  text  for a range of characters tagged with <u>tagName</u> where the
                     first character of the range is before the character at <u>index1</u>  and  no  earlier  than  the
                     character  at  <u>index2</u>  (a range starting at <u>index2</u> will be considered). If several matching
                     ranges exist, the one closest to <u>index1</u> is chosen. The command's return  value  is  a  list
                     containing  two  elements,  which are the index of the first character of the range and the
                     index of the character just after the last one in the range. If no matching range is  found
                     then  the  return value is an empty string.  If <u>index2</u> is not given then it defaults to the
                     beginning of the text.

              <u>pathName</u> <b>tag</b> <b>raise</b> <u>tagName</u> ?<u>aboveThis</u>?
                     Changes the priority of tag <u>tagName</u> so that it is just higher  in  priority  than  the  tag
                     whose  name  is  <u>aboveThis</u>.  If <u>aboveThis</u> is omitted, then <u>tagName</u>'s priority is changed to
                     make it highest priority of all tags.

              <u>pathName</u> <b>tag</b> <b>ranges</b> <u>tagName</u>
                     Returns a list describing all of the ranges of text that have been tagged with <u>tagName</u>. The
                     first two elements of the list describe the first tagged range in the text,  the  next  two
                     elements describe the second range, and so on.  The first element of each pair contains the
                     index  of the first character of the range, and the second element of the pair contains the
                     index of the character just after the last one in the range. If  there  are  no  characters
                     tagged with <u>tag</u> then an empty string is returned.

              <u>pathName</u> <b>tag</b> <b>remove</b> <u>tagName</u> <u>index1</u> ?<u>index2</u> <u>index1</u> <u>index2</u> <u>...</u>?
                     Remove the tag <u>tagName</u> from all of the characters starting at <u>index1</u> and ending just before
                     <u>index2</u>  (the  character at <u>index2</u> is not affected). A single command may contain any number
                     of <u>index1</u>-<u>index2</u> pairs. If the last <u>index2</u> is omitted then the  tag  is  removed  from  the
                     single  character at <u>index1</u>. If there are no characters in the specified range (e.g. <u>index1</u>
                     is past the end of the file or <u>index2</u> is less than or equal to <u>index1</u>) then the command has
                     no effect. This command returns an empty string.

       <u>pathName</u> <b>window</b> <u>option</u> ?<u>arg</u> <u>...</u>?
              This command is used to manipulate embedded windows. The behavior of the command  depends  on  the
              <u>option</u> argument that follows the <b>window</b> argument. The following forms of the command are currently
              supported:

              <u>pathName</u> <b>window</b> <b>cget</b> <u>index</u> <u>option</u>
                     Returns  the  value of a configuration option for an embedded window.  <u>Index</u> identifies the
                     embedded window, and <u>option</u> specifies a particular configuration option, which must be  one
                     of the ones listed in the section <b>EMBEDDED</b> <b>WINDOWS</b>.

              <u>pathName</u> <b>window</b> <b>configure</b> <u>index</u> ?<u>option</u> <u>value</u> <u>...</u>?
                     Query  or  modify  the  configuration  options  for  an  embedded  window.  If no <u>option</u> is
                     specified, returns a list describing all of the available options for the  embedded  window
                     at  <u>index</u>  (see  <b>Tk_ConfigureInfo</b> for information on the format of this list). If <u>option</u> is
                     specified with no <u>value</u>, then the command returns a list describing the  one  named  option
                     (this  list  will  be  identical  to  the corresponding sublist of the value returned if no
                     <u>option</u> is specified). If one or more <u>option-value</u> pairs are  specified,  then  the  command
                     modifies  the  given option(s) to have the given value(s); in this case the command returns
                     an empty string. See <b>EMBEDDED</b> <b>WINDOWS</b> for information on the options that are supported.

              <u>pathName</u> <b>window</b> <b>create</b> <u>index</u> ?<u>option</u> <u>value</u> <u>...</u>?
                     This command creates a new window annotation, which will appear in the text at the position
                     given by <u>index</u>. Any number  of  <u>option-value</u>  pairs  may  be  specified  to  configure  the
                     annotation. See <b>EMBEDDED</b> <b>WINDOWS</b> for information on the options that are supported. Returns
                     an empty string.

              <u>pathName</u> <b>window</b> <b>names</b>
                     Returns a list whose elements are the names of all windows currently embedded in <u>window</u>.

       <u>pathName</u> <b>xview</b> <u>option</u> <u>args</u>
              This  command  is  used  to  query  and change the horizontal position of the text in the widget's
              window. It can take any of the following forms:

              <u>pathName</u> <b>xview</b>
                     Returns a list containing two elements. Each element is a real fraction between  0  and  1;
                     together they describe the portion of the document's horizontal span that is visible in the
                     window.  For  example,  if the first element is .2 and the second element is .6, 20% of the
                     text is off-screen to the left, the middle 40% is visible in the window,  and  40%  of  the
                     text  is  off-screen  to the right. The fractions refer only to the lines that are actually
                     visible in the window: if the lines in the window are all very  short,  so  that  they  are
                     entirely  visible, the returned fractions will be 0 and 1, even if there are other lines in
                     the text that are much wider than  the  window.   These  are  the  same  values  passed  to
                     scrollbars via the <b>-xscrollcommand</b> option.

              <u>pathName</u> <b>xview</b> <b>moveto</b> <u>fraction</u>
                     Adjusts  the view in the window so that <u>fraction</u> of the horizontal span of the text is off-
                     screen to the left. <u>Fraction</u> is a fraction between 0 and 1.

              <u>pathName</u> <b>xview</b> <b>scroll</b> <u>number</u> <u>what</u>
                     This command shifts the view in the window left or right according to <u>number</u> and <u>what</u>. <u>What</u>
                     must be <b>pages</b>, <b>pixels</b>, or <b>units</b>. If <u>what</u> is <b>pages</b> or <b>units</b> then <u>number</u> must be an  integer,
                     otherwise  number  may be specified in any of the forms acceptable to <b>Tk_GetPixels</b>, such as
                     “2.0c” or “1i” (the result is rounded to the nearest integer value. If no units are  given,
                     pixels  are assumed). If <u>what</u> is <b>pages</b> then the view adjusts by <u>number</u> screenfuls; if it is
                     <b>pixels</b> then the view adjusts by <u>number</u> pixels; if it is <b>units</b>, the  view  adjusts  left  or
                     right  by  <u>number</u>  average-width  characters  on  the  display.  If <u>number</u> is negative then
                     characters farther to the left become visible; if it is positive then characters farther to
                     the right become visible.

       <u>pathName</u> <b>yview</b> ?<u>args</u>?
              This command is used to query and change the vertical position of the text in the widget's window.
              It can take any of the following forms:

              <u>pathName</u> <b>yview</b>
                     Returns a list containing two elements, both of which are real fractions between 0  and  1.
                     The  first element gives the position of the first visible pixel of the first character (or
                     image, etc) in the top line in the window, relative to the text as a whole (0.5 means it is
                     halfway through the text, for example). The second element gives the position of the  first
                     pixel  just  after  the  last visible one in the bottom line of the window, relative to the
                     text as a whole. These are the same values passed to  scrollbars  via  the  <b>-yscrollcommand</b>
                     option.

              <u>pathName</u> <b>yview</b> <b>moveto</b> <u>fraction</u>
                     Adjusts  the  view  in the window so that the pixel given by <u>fraction</u> appears at the top of
                     the top line of the window. <u>Fraction</u> is a fraction between 0 and 1; 0 indicates  the  first
                     pixel  of  the  first character in the text, 0.33 indicates the pixel that is one-third the
                     way through the text; and so on. Values close to 1 will indicate values close to  the  last
                     pixel in the text (1 actually refers to one pixel beyond the last pixel), but in such cases
                     the widget will never scroll beyond the last pixel, and so a value of 1 will effectively be
                     rounded  back  to  whatever fraction ensures the last pixel is at the bottom of the window,
                     and some other pixel is at the top.

              <u>pathName</u> <b>yview</b> <b>scroll</b> <u>number</u> <u>what</u>
                     This command adjust the view in the window up or down according to <u>number</u>  and  <u>what</u>.  <u>What</u>
                     must  be <b>pages</b>, <b>pixels</b>, or <b>units</b>. If <u>what</u> is <b>units</b> or <b>pages</b> then <u>number</u> must be an integer,
                     otherwise number may be specified in any of the forms acceptable to <b>Tk_GetPixels</b>,  such  as
                     “2.0c”  or “1i” (the result is rounded to the nearest integer value. If no units are given,
                     pixels are assumed). If <u>what</u> is <b>units</b>, the view adjusts up or down by <u>number</u> lines  on  the
                     display;  if  it  is <b>pages</b> then the view adjusts by <u>number</u> screenfuls; if it is <b>pixels</b> then
                     the view adjusts by <u>number</u> pixels. If <u>number</u> is negative then earlier positions in the text
                     become visible; if it is positive then later positions in the text become visible.

              <u>pathName</u> <b>yview</b> ?<b>-pickplace</b>? <u>index</u>
                     Changes the view in the widget's window to make <u>index</u> visible. If the <b>-pickplace</b> option  is
                     not  specified  then <u>index</u> will appear at the top of the window. If <b>-pickplace</b> is specified
                     then the widget chooses where <u>index</u> appears in the window:

                     [1]    If <u>index</u> is already visible somewhere in the window then the command does nothing.

                     [2]    If <u>index</u> is only a few lines off-screen above the window then it will be  positioned
                            at the top of the window.

                     [3]    If  <u>index</u> is only a few lines off-screen below the window then it will be positioned
                            at the bottom of the window.

                     [4]    Otherwise, <u>index</u> will be centered in the window.

                     The <b>-pickplace</b> option has been obsoleted by the <u>pathName</u> <b>see</b> widget command  (<u>pathName</u>  <b>see</b>
                     handles  both  x- and y-motion to make a location visible, whereas the <b>-pickplace</b> mode only
                     handles motion in y).

              <u>pathName</u> <b>yview</b> <u>number</u>
                     This command makes the first character on the line after the one given by <u>number</u> visible at
                     the top of the window. <u>Number</u> must be  an  integer.  This  command  used  to  be  used  for
                     scrolling, but now it is obsolete.

</pre><h4><b>BINDINGS</b></h4><pre>
       Tk  automatically creates class bindings for texts that give them the following default behavior.  In the
       descriptions below, “word” is dependent on the value of the <b>tcl_wordchars</b> variable.  See <b><a href="../man3tcl/tclvars.3tcl.html">tclvars</a></b>(3tcl).

       [1]    Clicking mouse button 1 positions the insertion cursor  at  the  closest  edge  of  the  character
              underneath  the mouse cursor, sets the input focus to this widget, and clears any selection in the
              widget. Dragging with mouse button 1 strokes out a selection between the insertion cursor and  the
              character under the mouse.

       [2]    Double-clicking  with  mouse button 1 selects the word under the mouse and positions the insertion
              cursor at the start of the word. Dragging after  a  double  click  will  stroke  out  a  selection
              consisting of whole words.

       [3]    Triple-clicking  with  mouse button 1 selects the line under the mouse and positions the insertion
              cursor at the start of the line. Dragging after  a  triple  click  will  stroke  out  a  selection
              consisting of whole lines.

       [4]    The  ends  of the selection can be adjusted by dragging with mouse button 1 while the Shift key is
              down; this will adjust the end of the selection that was nearest to the mouse cursor when button 1
              was pressed. If the button is double-clicked before dragging then the selection will  be  adjusted
              in  units  of whole words; if it is triple-clicked then the selection will be adjusted in units of
              whole lines.

       [5]    Clicking mouse button 1 with the Control key down will reposition  the  insertion  cursor  without
              affecting the selection.

       [6]    If  any  normal  printing  characters  are  typed, they are inserted at the point of the insertion
              cursor.

       [7]    The view in the widget can be adjusted by dragging with the middle  mouse  button  (button  2,  or
              button 3 in TkAqua). If the middle mouse button is clicked without moving the mouse, the selection
              is  copied  into  the  text  at  the position of the mouse cursor. The Insert key also inserts the
              selection, but at the position of the insertion cursor.

       [8]    If the mouse is dragged out of the widget while button 1 is pressed, the entry will  automatically
              scroll  to  make  more  text visible (if there is more text off-screen on the side where the mouse
              left the window).

       [9]    The Left and Right keys move the insertion cursor one character to the left or  right;  they  also
              clear  any  selection  in  the  text.  If Left or Right is typed with the Shift key down, then the
              insertion cursor moves and the selection is extended to include the  new  character.  Control-Left
              and  Control-Right  move  the insertion cursor by words, and Control-Shift-Left and Control-Shift-
              Right move the insertion cursor by words and also extend the selection.  Control-b  and  Control-f
              behave the same as Left and Right, respectively. Meta-b and Meta-f behave the same as Control-Left
              and Control-Right, respectively.

       [10]   The  Up and Down keys move the insertion cursor one line up or down and clear any selection in the
              text. If Up or Right is typed with the Shift key down, then the insertion  cursor  moves  and  the
              selection is extended to include the new character. Control-Up and Control-Down move the insertion
              cursor by paragraphs (groups of lines separated by blank lines), and Control-Shift-Up and Control-
              Shift-Down  move  the  insertion cursor by paragraphs and also extend the selection. Control-p and
              Control-n behave the same as Up and Down, respectively.

       [11]   The Next and Prior keys move the insertion cursor forward or backwards by one screenful and  clear
              any  selection  in  the text. If the Shift key is held down while Next or Prior is typed, then the
              selection is extended to include the new character.

       [12]   Control-Next and Control-Prior scroll the view right or  left  by  one  page  without  moving  the
              insertion cursor or affecting the selection.

       [13]   Home  and  Control-a  move the insertion cursor to the beginning of its display line and clear any
              selection in the widget. Shift-Home moves the insertion cursor to the  beginning  of  the  display
              line and also extends the selection to that point.

       [14]   End and Control-e move the insertion cursor to the end of the display line and clear any selection
              in the widget. Shift-End moves the cursor to the end of the display line and extends the selection
              to that point.

       [15]   Control-Home  and  Meta-&lt;  move  the  insertion  cursor to the beginning of the text and clear any
              selection in the widget. Control-Shift-Home moves the insertion cursor to  the  beginning  of  the
              text and also extends the selection to that point.

       [16]   Control-End and Meta-&gt; move the insertion cursor to the end of the text and clear any selection in
              the widget. Control-Shift-End moves the cursor to the end of the text and extends the selection to
              that point.

       [17]   The Select key and Control-Space set the selection anchor to the position of the insertion cursor.
              They  do  not  affect  the  current  selection.  Shift-Select  and  Control-Shift-Space adjust the
              selection to the current position of the insertion  cursor,  selecting  from  the  anchor  to  the
              insertion cursor if there was not any selection previously.

       [18]   Control-/ selects the entire contents of the widget.

       [19]   Control-\ clears any selection in the widget.

       [20]   The  F16 key (labelled Copy on many Sun workstations) or Meta-w copies the selection in the widget
              to the clipboard, if there is a selection. This action is carried out by the command <b>tk_textCopy</b>.

       [21]   The F20 key (labelled Cut on many Sun workstations) or  Control-w  copies  the  selection  in  the
              widget  to  the  clipboard  and  deletes  the selection. This action is carried out by the command
              <b>tk_textCut</b>. If there is no selection in the widget then these keys have no effect.

       [22]   The F18 key (labelled Paste on many Sun workstations) or Control-y inserts  the  contents  of  the
              clipboard  at  the  position  of  the  insertion cursor. This action is carried out by the command
              <b>tk_textPaste</b>.

       [23]   The Delete key deletes the selection, if there is one in the widget. If there is no selection,  it
              deletes the character to the right of the insertion cursor.

       [24]   Backspace  and  Control-h  delete  the  selection,  if there is one in the widget.  If there is no
              selection, they delete the character to the left of the insertion cursor.

       [25]   Control-d deletes the character to the right of the insertion cursor.

       [26]   Meta-d deletes the word to the right of the insertion cursor.

       [27]   Control-k deletes from the insertion cursor to the end of its line; if  the  insertion  cursor  is
              already at the end of a line, then Control-k deletes the newline character.

       [28]   Control-o  opens  a  new  line  by  inserting a newline character in front of the insertion cursor
              without moving the insertion cursor.

       [29]   Meta-backspace and Meta-Delete delete the word to the left of the insertion cursor.

       [30]   Control-t reverses the order of the two characters to the right of the insertion cursor.

       [31]   Control-x deletes whatever is selected in the text widget after copying it to the clipboard.

       [32]   Control-z undoes the last edit action if the <b>-undo</b> option is true.  Does nothing otherwise.

       [33]   Control-Z (or Control-y on Windows) reapplies the last undone edit action if the <b>-undo</b>  option  is
              true. Does nothing otherwise.

       If the widget is disabled using the <b>-state</b> option, then its view can still be adjusted and text can still
       be selected, but no insertion cursor will be displayed and no text modifications will take place.

       The behavior of texts can be changed by defining new bindings for individual widgets or by redefining the
       class bindings.

</pre><h4><b>KNOWN</b> <b>ISSUES</b></h4><pre>
   <b>ISSUES</b> <b>CONCERNING</b> <b>CHARS</b> <b>AND</b> <b>INDICES</b>
       Before Tk 8.5, the widget used the string “chars” to refer to index positions (which included characters,
       embedded  windows  and embedded images). As of Tk 8.5 the text widget deals separately and correctly with
       “chars” and “indices”.  For backwards compatibility, however, the index  modifiers  “+N  chars”  and  “-N
       chars”  continue to refer to indices. One must use any of the full forms “+N any chars” or “-N any chars”
       etc. to refer to actual character indices. This confusion may be fixed in a future release by making  the
       widget correctly interpret “+N chars” as a synonym for “+N any chars”.

   <b>PERFORMANCE</b> <b>ISSUES</b>
       Text  widgets  should run efficiently under a variety of conditions. The text widget uses about 2-3 bytes
       of main memory for each byte of text, so texts containing a megabyte or more should be practical on  most
       workstations.  Text  is  represented  internally  with  a modified B-tree structure that makes operations
       relatively efficient even with large texts. Tags are included in the  B-tree  structure  in  a  way  that
       allows  tags  to span large ranges or have many disjoint smaller ranges without loss of efficiency. Marks
       are also implemented in a way that allows large numbers of marks. In most cases it is fine to have  large
       numbers of unique tags, or a tag that has many distinct ranges.

       One  performance  problem can arise if you have hundreds or thousands of different tags that all have the
       following characteristics: the first and last ranges of each tag are near the beginning and  end  of  the
       text, respectively, or a single tag range covers most of the text widget. The cost of adding and deleting
       tags  like  this is proportional to the number of other tags with the same properties. In contrast, there
       is no problem with having thousands of distinct tags if their overall ranges  are  localized  and  spread
       uniformly throughout the text.

       Very long text lines can be expensive, especially if they have many marks and tags within them.

       The  display  line  with  the insert cursor is redrawn each time the cursor blinks, which causes a steady
       stream of graphics traffic. Set the <b>-insertofftime</b> attribute to 0 avoid this.

   <b>KNOWN</b> <b>BUGS</b>
       The <u>pathName</u> <b>search</b> <b>-regexp</b> sub-command attempts to perform sophisticated regexp matching across multiple
       lines in an efficient fashion (since Tk 8.5), examining each line individually, and then in small  groups
       of  lines,  whether  searching  forwards  or  backwards. Under certain conditions the search result might
       differ from that obtained by applying the same regexp to the entire text from the widget in one  go.  For
       example,  when  searching with a greedy regexp, the widget will continue to attempt to add extra lines to
       the match as long as one of two conditions are true: either  Tcl's  regexp  library  returns  a  code  to
       indicate  a  longer match is possible (but there are known bugs in Tcl which mean this code is not always
       correctly returned); or if each extra line added results in at least a partial match  with  the  pattern.
       This  means  in  the  case  where  the first extra line added results in no match and Tcl's regexp system
       returns the incorrect code and adding a second extra line would actually  match,  the  text  widget  will
       return the wrong result. In practice this is a rare problem, but it can occur, for example:
              pack [<b>text</b> .t]
              .t insert 1.0 "aaaa\nbbbb\ncccc\nbbbb\naaaa\n"
              .t search -regexp -- {(a+|b+\nc+\nb+)+\na+} 1.0
       will not find a match when one exists of 19 characters starting from the first “b”.

       Whenever  one possible match is fully enclosed in another, the search command will attempt to ensure only
       the larger match is returned. When performing backwards regexp searches it is possible that Tcl will  not
       always achieve this, in the case where a match is preceded by one or more short, non-overlapping matches,
       all  of  which are preceded by a large match which actually encompasses all of them. The search algorithm
       used by the widget does not look back arbitrarily far for  a  possible  match  which  might  cover  large
       portions of the widget. For example:
              pack [<b>text</b> .t]
              .t insert 1.0 "aaaa\nbbbb\nbbbb\nbbbb\nbbbb\n"
              .t search -regexp -backward -- {b+\n|a+\n(b+\n)+} end
       matches  at  “5.0” when a true greedy match would match at “1.0”.  Similarly if we add <b>-all</b> to this case,
       it matches at all of “5.0”, “4.0”, “3.0” and “1.0”, when really it should only match at “1.0” since  that
       match encloses all the others.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tk/entry.3tk.html">entry</a>(3tk), <a href="../man3tk/scrollbar.3tk.html">scrollbar</a>(3tk)

</pre><h4><b>KEYWORDS</b></h4><pre>
       text, widget, tkvars

Tk                                                     8.5                                             <u><a href="../man3tk/text.3tk.html">text</a></u>(3tk)
</pre>
 </div>
</div></section>
</div>
</body>
</html>