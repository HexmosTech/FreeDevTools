<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dancer2::Serializer::Mutable - Serialize and deserialize content based on HTTP header</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdancer2-perl">libdancer2-perl_1.1.2+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Dancer2::Serializer::Mutable - Serialize and deserialize content based on HTTP header

</pre><h4><b>VERSION</b></h4><pre>
       version 1.1.2

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # in config.yml
           serializer: Mutable

           engines:
               serializer:
                   Mutable:
                       mapping:
                           'text/x-yaml'        : YAML
                           'text/html'          : YAML
                           'text/x-data-dumper' : Dumper
                           'text/x-json'        : JSON
                           'application/json'   : JSON

           # in the app
           put '/something' =&gt; sub {
               # deserialized from request
               my $name = param( 'name' );

               ...

               # will be serialized to the most
               # fitting format
               return { message =&gt; "user $name added" };
           };

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This serializer will try find the best (de)serializer for a given request.  For this, it will pick the
       first valid content type found from the following list and use its related serializer.

       •   The <b>content_type</b> from the request headers

       •   the <b>accept</b> from the request headers

       •   The default is <b>application/json</b>

       The content-type/serializer mapping that "Dancer2::Serializer::Mutable" uses is

           serializer                  | content types
           ----------------------------------------------------------
           Dancer2::Serializer::YAML   | text/x-yaml, text/html
           Dancer2::Serializer::Dumper | text/x-data-dumper
           Dancer2::Serializer::JSON   | text/x-json, application/json

       A  different  mapping  can  be  provided  via  the config file. For example, the default mapping would be
       configured as

           engines:
               serializer:
                   Mutable:
                       mapping:
                           'text/x-yaml'        : YAML
                           'text/html'          : YAML
                           'text/x-data-dumper' : Dumper
                           'text/x-json'        : JSON
                           'application/json'   : JSON

       The keys of the mapping are the content-types to serialize,  and  the  values  the  serializers  to  use.
       Serialization  for  "YAML",  "Dumper"  and  "JSON"  are  done using internal Dancer mechanisms. Any other
       serializer will be taken to be as Dancer2 serialization class (minus the "Dancer2::Serializer::"  prefix)
       and   an   instance   of   it   will   be   used  to  serialize/deserialize  data.  For  example,  adding
       Dancer2::Serializer::XML to the mapping would be:

           engines:
               serializer:
                   Mutable:
                       mapping:
                           'text/x-yaml'        : YAML
                           'text/html'          : YAML
                           'text/x-data-dumper' : Dumper
                           'text/x-json'        : JSON
                           'text/xml'           : XML

   <b>INTERNAL</b> <b>METHODS</b>
       The following methods are used internally by "Dancer2" and are not made accessible via the DSL.

   <b>serialize</b>
       Serialize a data structure. The format it is serialized  to  is  determined  automatically  as  described
       above.  It  can  be one of YAML, Dumper, JSON, defaulting to JSON if there's no clear preference from the
       request.

   <b>deserialize</b>
       Deserialize the provided serialized data to a data structure.  The type of serialization  format  depends
       on the request's content-type. For now, it can be one of YAML, Dumper, JSON.

   <b>content_type</b>
       Returns  the  content-type  that was used during the last "serialize" / "deserialize" call. <b>WARNING</b> : you
       must call "serialize" / "deserialize" before calling "content_type". Otherwise the return value  will  be
       "undef".

</pre><h4><b>AUTHOR</b></h4><pre>
       Dancer Core Developers

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by Alexis Sukrieh.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.0                                       2024-12-08                  <u>Dancer2::Serializer::<a href="../man3pm/Mutable.3pm.html">Mutable</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>