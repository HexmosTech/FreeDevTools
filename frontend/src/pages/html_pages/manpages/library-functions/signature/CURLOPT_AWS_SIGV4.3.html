<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_AWS_SIGV4 - V4 signature</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_AWS_SIGV4 - V4 signature

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_AWS_SIGV4, char *param);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Provides AWS V4 signature authentication on HTTP(S) header.

       Pass  a  char  pointer  that  is  the  collection  of  specific  arguments are used for creating outgoing
       authentication headers. The format of the <u>param</u> option is:

       provider1[:provider2[:region[:service]]]

       provider1, provider2
              The  providers  arguments  are  used  for  generating  some  authentication  parameters  such   as
              "Algorithm", "date", "request type" and "signed headers".

       region The  argument  is  a geographic area of a resources collection.  It is extracted from the hostname
              specified in the URL if omitted.

       service
              The argument is a function provided by a cloud. It is extracted from the hostname specified in the
              URL if omitted.

       NOTE:  This  call  set  <u><a href="../man3/CURLOPT_HTTPAUTH.3.html">CURLOPT_HTTPAUTH</a>(3)</u>  to  CURLAUTH_AWS_SIGV4.  Calling  <u><a href="../man3/CURLOPT_HTTPAUTH.3.html">CURLOPT_HTTPAUTH</a>(3)</u>   with
       CURLAUTH_AWS_SIGV4 is the same as calling this with <b>"aws:amz"</b> in parameter.

       Example  with  "Test:Try", when curl uses the algorithm, it generates <b>"TEST-HMAC-SHA256"</b> for "Algorithm",
       <b>"x-try-date"</b>    and    <b>"X-Try-Date"</b>    for    "date",     <b>"test4_request"</b>     for     "request     type",
       <b>"SignedHeaders=content-type;host;x-try-date"</b> for "signed headers"

       If you use just "test", instead of "test:try", test is used for every generated string.

       Setting <u><a href="../man3/CURLOPT_HTTPAUTH.3.html">CURLOPT_HTTPAUTH</a>(3)</u> with the CURLAUTH_AWS_SIGV4 bit set is the same as setting this option with a
       <b>"aws:amz"</b> parameter.

       The application does not have to keep the string around after setting this option.

       Using  this option multiple times makes the last set string override the previous ones. Set it to NULL to
       disable its use again.

</pre><h4><b>DEFAULT</b></h4><pre>
       NULL

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects http only

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();

         if(curl) {
           curl_easy_setopt(curl, CURLOPT_URL,
                           "https://service.region.example.com/uri");
           curl_easy_setopt(curl, CURLOPT_AWS_SIGV4, "provider1:provider2");

           /* service and region can also be set in CURLOPT_AWS_SIGV4 */
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com/uri");
           curl_easy_setopt(curl, CURLOPT_AWS_SIGV4,
                            "provider1:provider2:region:service");

           curl_easy_setopt(curl, CURLOPT_USERPWD, "MY_ACCESS_KEY:MY_SECRET_KEY");
           curl_easy_perform(curl);
         }
       }

</pre><h4><b>NOTES</b></h4><pre>
       This option overrides the other auth types you might have set  in  <u><a href="../man3/CURLOPT_HTTPAUTH.3.html">CURLOPT_HTTPAUTH</a>(3)</u>  which  should  be
       highlighted as this makes this auth method special. This method cannot be combined with other auth types.

       A  sha256  checksum  of  the  request  payload  is  used  as input to the signature calculation. For POST
       requests, this is a checksum of the provided <u><a href="../man3/CURLOPT_POSTFIELDS.3.html">CURLOPT_POSTFIELDS</a>(3)</u>. Otherwise, it is the checksum  of  an
       empty  buffer.  For  requests  like  PUT,  you  can  provide  your  own  checksum in an HTTP header named
       <b>x-provider2-content-sha256</b>.

       For <b>aws:s3</b>, a <b>x-amz-content-sha256</b> header is added to every  request  if  not  already  present.  For  s3
       requests with unknown payload, this header takes the special value "UNSIGNED-PAYLOAD".

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.75.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_HEADEROPT.3.html">CURLOPT_HEADEROPT</a></b>(3), <b><a href="../man3/CURLOPT_HTTPAUTH.3.html">CURLOPT_HTTPAUTH</a></b>(3), <b><a href="../man3/CURLOPT_HTTPHEADER.3.html">CURLOPT_HTTPHEADER</a></b>(3), <b><a href="../man3/CURLOPT_PROXYAUTH.3.html">CURLOPT_PROXYAUTH</a></b>(3)

libcurl                                            2025-06-16                               <u><a href="../man3/CURLOPT_AWS_SIGV4.3.html">CURLOPT_AWS_SIGV4</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>