<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>g2_addfield.c - Pack sections 4 through 7 and add them to a GRIB2 message.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libg2c-dev">libg2c-dev_2.1.0-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       g2_addfield.c - Pack sections 4 through 7 and add them to a GRIB2 message.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include 'grib2_int.h'
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;

   <b>Functions</b>
       <b>g2int</b> <b>g2_addfield</b> (unsigned char *cgrib, <b>g2int</b> ipdsnum, <b>g2int</b> *ipdstmpl, float *coordlist, <b>g2int</b>
           numcoord, <b>g2int</b> idrsnum, <b>g2int</b> *idrstmpl, float *fld, <b>g2int</b> ngrdpts, <b>g2int</b> ibmap, <b>g2int</b> *bmap)
           Pack sections 4 through 7 and adds them to a GRIB2 message.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Pack sections 4 through 7 and add them to a GRIB2 message.

       <b>Author</b>
           Stephen Gilbert

       <b>Date</b>
           2002-11-05

       Definition in file <b>g2_addfield.c</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>g2int</b> <b>g2_addfield</b> <b>(unsigned</b> <b>char</b> <b>*</b> <b>cgrib,</b> <b>g2int</b> <b>ipdsnum,</b> <b>g2int</b> <b>*</b> <b>ipdstmpl,</b> <b>float</b> <b>*</b> <b>coordlist,</b> <b>g2int</b> <b>numcoord,</b>
       <b>g2int</b> <b>idrsnum,</b> <b>g2int</b> <b>*</b> <b>idrstmpl,</b> <b>float</b> <b>*</b> <b>fld,</b> <b>g2int</b> <b>ngrdpts,</b> <b>g2int</b> <b>ibmap,</b> <b>g2int</b> <b>*</b> <b>bmap)</b>
       Pack sections 4 through 7 and adds them to a GRIB2 message. They are:

       4.  Product Definition Section

       5.  Data Representation Section

       6.  Bit-Map Section

       7.  Data Section

       This routine is used with routines <b>g2_create()</b>, <b>g2_addlocal()</b>, <b>g2_addgrid()</b>, and <b>g2_gribend()</b> to create a
       complete  GRIB2  message.  Function  <b>g2_create()</b>  must be called first to initialize a new GRIB2 message.
       Function <b>g2_addgrid()</b> must be called after <b>g2_create()</b> and before this routine  to  add  the  appropriate
       grid description to the GRIB2 message. A call to <b>g2_gribend()</b> is required to complete GRIB2 message after
       all fields have been added.

   <b>Program</b> <b>History</b> <b>Log</b>
       Date    Programmer    Comments     2002-11-05   Gilbert   Initial    2002-12-23   Gilbert   Added complex
       spherical harmonic packing    2003-08-27   Gilbert   Added  support  for  new  templates  using  PNG  and
       JPEG2000  algorithms/templates.     2004-11-29   Gilbert   JPEG2000 now can use WMO Template 5.40 PNG can
       use WMO Template 5.41. Added packing algorithm check.    2005-05-10   Gilbert   Imposed minimum  size  on
       cpack.    2009-01-14   Vuong   Changed structure name template to gtemplate    2023-09-08   Engle   Added
       support for new template, 5.42, using CCSDS compression (libaec).

       <b>Parameters</b>
           <u>cgrib</u>  Char array that contains the GRIB2 message to which sections 4 through 7 should be added. Must
           be allocated large enough to store the entire GRIB2 message.
           <u>ipdsnum</u> Product Definition Template Number (see Code Table 4.0).
           <u>ipdstmpl</u> Contains the data values for the Product Definition Template specified by ipdsnum.
           <u>coordlist</u> Array containg floating point values  intended  to  document  the  vertical  discretisation
           associated to model data on hybrid coordinate vertical levels.
           <u>numcoord</u> number of values in array coordlist.
           <u>idrsnum</u> Data Representation Template Number (see Code Table 5.0).
           <u>idrstmpl</u>  The  data  values for the Data Representation Template specified by idrsnum. Note that some
           values in this template (eg. reference values, number of bits, etc...) may be  changed  by  the  data
           packing  algorithms.  Use  this  to  specify  scaling  factors  and order of spatial differencing, if
           desired.
           <u>fld</u> Array of data points to pack.
           <u>ngrdpts</u> Number of data points in grid. i.e. size of fld and bmap.
           <u>ibmap</u> Bitmap indicator (see Code Table 6.0)

           • 0 = bitmap applies and is included in Section 6.

           • 1-253 = Predefined bitmap applies.

           • 254 = Previously defined bitmap applies to this field.

           • 255 = Bit map does not apply to this product.

           <u>bmap</u> Integer array containing bitmap to be added (if ibmap = 0).

       <b>Returns</b>

           • &gt; 0 Current size of updated GRIB2 message

           • <b>G2_ADD_MSG_INIT</b> GRIB message was not initialized. Need to call routine <b>g2_create()</b> first.

           • <b>G2_ADD_MSG_COMPLETE</b> GRIB message already complete. Cannot add new section.

           • <b>G2_BAD_SEC_COUNTS</b> Sum of Section byte counts doesn't add to total byte count.

           • <b>G2_BAD_SEC</b> Previous Section was not 3 or 7.

           • <b>G2_ADDFIELD_BAD_PDT</b> Could not find requested Product Definition Template.

           • <b>G2_ADDFIELD_BAD_GDS</b> Section 3 (GDS) not previously defined in message.

           • <b>G2_ADDFIELD_BAD_DRT</b> Tried to use unsupported Data Representationi Template.

           • <b>G2_ADDFIELD_BAD_BITMAP</b> Specified use of a previously defined bitmap, but one does not exist in  the
             GRIB message.

           • <b>G2_ADDFIELD_BAD_GDT</b> GDT of one of 5.50 through 5.53 required to pack field using DRT 5.51.

           • <b>G2_ADDFIELD_ERR</b> Error packing data field.

       <b>Note</b>
           Note that the Sections 4 through 7 can only follow Section 3 or Section 7 in a GRIB2 message.

       <b>Author</b>
           Stephen Gilbert

       <b>Date</b>
           2002-11-05

       Definition at line <b>100</b> of file <b>g2_addfield.c</b>.

       References     <b>aecpack()</b>,     <b>cmplxpack()</b>,     <b>gtemplate::ext</b>,    <b>gtemplate::extlen</b>,    <b>extpdstemplate()</b>,
       <b>G2_ADD_MSG_COMPLETE</b>, <b>G2_ADD_MSG_INIT</b>, <b>G2_ADDFIELD_BAD_BITMAP</b>,  <b>G2_ADDFIELD_BAD_DRT</b>,  <b>G2_ADDFIELD_BAD_GDS</b>,
       <b>G2_ADDFIELD_BAD_GDT</b>,     <b>G2_ADDFIELD_BAD_PDT</b>,     <b>G2_ADDFIELD_ERR</b>,     <b>G2_BAD_SEC</b>,     <b>G2_BAD_SEC_COUNTS</b>,
       <b>g2c_check_msg()</b>, <b>G2C_EMSGCOMPLETE</b>, <b>G2C_ENOTGRIB</b>, <b>gbit()</b>,  <b>getdim()</b>,  <b>getdrstemplate()</b>,  <b>getpdstemplate()</b>,
       <b>getpoly()</b>, <b>jpcpack()</b>, <b>gtemplate::map</b>, <b>gtemplate::maplen</b>, <b>mkieee()</b>, <b>gtemplate::needext</b>, <b>pngpack()</b>, <b>sbit()</b>,
       <b>sbits()</b>, <b>simpack()</b>, and <b>specpack()</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for NCEPLIBS-g2c from the source code.

NCEPLIBS-g2c                                      Version 2.1.0                                 <u><a href="../man3/g2_addfield.c.3.html">g2_addfield.c</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>