<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_CreateEnsemble,       Tcl_FindEnsemble,       Tcl_GetEnsembleFlags,       Tcl_GetEnsembleMappingDict,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_CreateEnsemble,       Tcl_FindEnsemble,       Tcl_GetEnsembleFlags,       Tcl_GetEnsembleMappingDict,
       Tcl_GetEnsembleNamespace,          Tcl_GetEnsembleParameterList,           Tcl_GetEnsembleUnknownHandler,
       Tcl_GetEnsembleSubcommandList,    Tcl_IsEnsemble,    Tcl_SetEnsembleFlags,    Tcl_SetEnsembleMappingDict,
       Tcl_SetEnsembleParameterList, Tcl_SetEnsembleSubcommandList, Tcl_SetEnsembleUnknownHandler  -  manipulate
       ensemble commands

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Command
       <b>Tcl_CreateEnsemble</b>(<u>interp,</u> <u>name,</u> <u>namespacePtr,</u> <u>ensFlags</u>)

       Tcl_Command
       <b>Tcl_FindEnsemble</b>(<u>interp,</u> <u>cmdNameObj,</u> <u>flags</u>)

       int
       <b>Tcl_IsEnsemble</b>(<u>token</u>)

       int
       <b>Tcl_GetEnsembleFlags</b>(<u>interp,</u> <u>token,</u> <u>ensFlagsPtr</u>)

       int
       <b>Tcl_SetEnsembleFlags</b>(<u>interp,</u> <u>token,</u> <u>ensFlags</u>)

       int
       <b>Tcl_GetEnsembleMappingDict</b>(<u>interp,</u> <u>token,</u> <u>dictObjPtr</u>)

       int
       <b>Tcl_SetEnsembleMappingDict</b>(<u>interp,</u> <u>token,</u> <u>dictObj</u>)

       int
       <b>Tcl_GetEnsembleParameterList</b>(<u>interp,</u> <u>token,</u> <u>listObjPtr</u>)

       int
       <b>Tcl_SetEnsembleParameterList</b>(<u>interp,</u> <u>token,</u> <u>listObj</u>)

       int
       <b>Tcl_GetEnsembleSubcommandList</b>(<u>interp,</u> <u>token,</u> <u>listObjPtr</u>)

       int
       <b>Tcl_SetEnsembleSubcommandList</b>(<u>interp,</u> <u>token,</u> <u>listObj</u>)

       int
       <b>Tcl_GetEnsembleUnknownHandler</b>(<u>interp,</u> <u>token,</u> <u>listObjPtr</u>)

       int
       <b>Tcl_SetEnsembleUnknownHandler</b>(<u>interp,</u> <u>token,</u> <u>listObj</u>)

       int
       <b>Tcl_GetEnsembleNamespace</b>(<u>interp,</u> <u>token,</u> <u>namespacePtrPtr</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in/out)                   The  interpreter  in which the ensemble is to be created or
                                                     found. Also where error result messages  are  written.  The
                                                     functions whose names start with <b>Tcl_GetEnsemble</b> may have a
                                                     NULL for the <u>interp</u>, but all other functions must not.

       const char <u>*name</u> (in)                         The name of the ensemble command to be created.

       Tcl_Namespace <u>*namespacePtr</u> (in)              The namespace to which the ensemble command is to be bound,
                                                     or NULL for the current namespace.

       int <u>ensFlags</u> (in)                             An   OR'ed   set   of   flag   bits  describing  the  basic
                                                     configuration of the ensemble. Currently only one  bit  has
                                                     meaning,  <b>TCL_ENSEMBLE_PREFIX</b>,  which  is  present when the
                                                     ensemble command should also match unambiguous prefixes  of
                                                     subcommands.

       Tcl_Obj <u>*cmdNameObj</u> (in)                      A  value  holding  the name of the ensemble command to look
                                                     up.

       int <u>flags</u> (in)                                An OR'ed set of  flag  bits  controlling  the  behavior  of
                                                     <b>Tcl_FindEnsemble</b>.   Currently   only  <b>TCL_LEAVE_ERR_MSG</b>  is
                                                     supported.

       Tcl_Command <u>token</u> (in)                        A normal command token that refers to an ensemble  command,
                                                     or which you wish to use for testing as an ensemble command
                                                     in <b>Tcl_IsEnsemble</b>.

       int <u>*ensFlagsPtr</u> (out)                        Pointer  to  a  variable  into  which  to write the current
                                                     ensemble   flag    bits;    currently    only    the    bit
                                                     <b>TCL_ENSEMBLE_PREFIX</b> is defined.

       Tcl_Obj <u>*dictObj</u> (in)                         A   dictionary   value   to   use  for  the  subcommand  to
                                                     implementation command prefix  mapping  dictionary  in  the
                                                     ensemble.  May  be  NULL if the mapping dictionary is to be
                                                     removed.

       Tcl_Obj <u>**dictObjPtr</u> (out)                    Pointer to a variable  into  which  to  write  the  current
                                                     ensemble mapping dictionary.

       Tcl_Obj <u>*listObj</u> (in)                         A  list  value to use for the list of formal pre-subcommand
                                                     parameters,  the  defined  list  of  subcommands   in   the
                                                     dictionary   or  the  unknown  subcommand  handler  command
                                                     prefix. May be NULL  if  the  subcommand  list  or  unknown
                                                     handler are to be removed.

       Tcl_Obj <u>**listObjPtr</u> (out)                    Pointer  to a variable into which to write the current list
                                                     of formal pre-subcommand parameters, the  defined  list  of
                                                     subcommands or the current unknown handler prefix.

       Tcl_Namespace <u>**namespacePtrPtr</u> (out)         Pointer to a variable into which to write the handle of the
                                                     namespace to which the ensemble is bound.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       An  ensemble  is  a  command,  bound  to  some  namespace,  which consists of a collection of subcommands
       implemented by other Tcl commands. The first argument to the ensemble command is always interpreted as  a
       selector that states what subcommand to execute.

       Ensembles  are  created  using  <b>Tcl_CreateEnsemble</b>,  which  takes four arguments: the interpreter to work
       within, the name of the ensemble to create, the namespace within the interpreter to bind the ensemble to,
       and the default set of ensemble flags. The result of the function is the command token for the  ensemble,
       which may be used to further configure the ensemble using the API described below in <b>ENSEMBLE</b> <b>PROPERTIES</b>.

       Given   the   name  of  an  ensemble  command,  the  token  for  that  command  may  be  retrieved  using
       <b>Tcl_FindEnsemble</b>. If the given command name (in <u>cmdNameObj</u>) does not refer to an  ensemble  command,  the
       result  of  the  function  is NULL and (if the <b>TCL_LEAVE_ERR_MSG</b> bit is set in <u>flags</u>) an error message is
       left in the interpreter result.

       A command token may be checked to see if it refers to an ensemble using <b>Tcl_IsEnsemble</b>. This returns 1 if
       the token refers to an ensemble, or 0 otherwise.

   <b>ENSEMBLE</b> <b>PROPERTIES</b>
       Every ensemble has four read-write properties and a read-only property. The properties are:

       <b>flags</b> (read-write)
              The set of flags for the ensemble, expressed as a bit-field. Currently, the only  public  flag  is
              <b>TCL_ENSEMBLE_PREFIX</b>  which  is  set  when  unambiguous prefixes of subcommands are permitted to be
              resolved to implementations as well as exact matches. The flags may  be  read  and  written  using
              <b>Tcl_GetEnsembleFlags</b>  and <b>Tcl_SetEnsembleFlags</b> respectively. The result of both of those functions
              is a Tcl result code (<b>TCL_OK</b>, or <b>TCL_ERROR</b> if the token does not refer to an ensemble).

       <b>mapping</b> <b>dictionary</b> (read-write)
              A dictionary containing a mapping from subcommand names to lists of words  to  use  as  a  command
              prefix (replacing the first two words of the command which are the ensemble command itself and the
              subcommand  name),  or  NULL  if  every  subcommand  is  to be mapped to the command with the same
              unqualified name in the ensemble's bound namespace. Defaults to NULL.  May  be  read  and  written
              using  <b>Tcl_GetEnsembleMappingDict</b>  and <b>Tcl_SetEnsembleMappingDict</b> respectively. The result of both
              of those functions is a Tcl result code (<b>TCL_OK</b>, or <b>TCL_ERROR</b> if the token does not  refer  to  an
              ensemble)  and the dictionary obtained from <b>Tcl_GetEnsembleMappingDict</b> should always be treated as
              immutable   even   if   it   is   unshared.    All   command   names   in   prefixes    set    via
              <b>Tcl_SetEnsembleMappingDict</b> must be fully qualified.

       <b>formal</b> <b>pre-subcommand</b> <b>parameter</b> <b>list</b> (read-write)
              A  list  of formal parameter names (the names only being used when generating error messages) that
              come at invocation of the ensemble between the name of the ensemble and the  subcommand  argument.
              NULL   (the   default)   is  equivalent  to  the  empty  list.  May  be  read  and  written  using
              <b>Tcl_GetEnsembleParameterList</b> and <b>Tcl_SetEnsembleParameterList</b> respectively. The result of both  of
              those  functions  is  a  Tcl  result  code (<b>TCL_OK</b>, or <b>TCL_ERROR</b> if the token does not refer to an
              ensemble) and the dictionary obtained from <b>Tcl_GetEnsembleParameterList</b> should always  be  treated
              as immutable even if it is unshared.

       <b>subcommand</b> <b>list</b> (read-write)
              A  list of all the subcommand names for the ensemble, or NULL if this is to be derived from either
              the keys of the mapping dictionary (see above) or (if that is also NULL) from the set of  commands
              exported  by  the bound namespace. May be read and written using <b>Tcl_GetEnsembleSubcommandList</b> and
              <b>Tcl_SetEnsembleSubcommandList</b> respectively. The result of both of those functions is a Tcl  result
              code  (<b>TCL_OK</b>, or <b>TCL_ERROR</b> if the token does not refer to an ensemble) and the list obtained from
              <b>Tcl_GetEnsembleSubcommandList</b> should always be treated as immutable even if it is unshared.

       <b>unknown</b> <b>subcommand</b> <b>handler</b> <b>command</b> <b>prefix</b> (read-write)
              A list of words to prepend on the front of any subcommand when the subcommand is  unknown  to  the
              ensemble  (according  to the current prefix handling rule); see the <b>namespace</b> <b>ensemble</b> command for
              more details. If NULL, the default behavior - generate a suitable error message  -  will  be  used
              when    an    unknown    subcommand    is   encountered.   May   be   read   and   written   using
              <b>Tcl_GetEnsembleUnknownHandler</b> and <b>Tcl_SetEnsembleUnknownHandler</b> respectively. The result  of  both
              functions  is  a Tcl result code (<b>TCL_OK</b>, or <b>TCL_ERROR</b> if the token does not refer to an ensemble)
              and the list obtained from <b>Tcl_GetEnsembleUnknownHandler</b> should always  be  treated  as  immutable
              even if it is unshared.

       <b>bound</b> <b>namespace</b> (read-only)
              The  namespace  to  which  the  ensemble  is bound; when the namespace is deleted, so too will the
              ensemble, and this namespace is also the namespace whose list of exported commands is used if both
              the  mapping  dictionary  and  the  subcommand  list  properties  are  NULL.  May  be  read  using
              <b>Tcl_GetEnsembleNamespace</b>  which  returns a Tcl result code (<b>TCL_OK</b>, or <b>TCL_ERROR</b> if the token does
              not refer to an ensemble).

</pre><h4><b>REFERENCE</b> <b>COUNT</b> <b>MANAGEMENT</b></h4><pre>
       <b>Tcl_FindEnsemble</b> does not modify the reference count of its <u>cmdNameObj</u>  argument;  it  only  reads.  Note
       however  that  this  function may set the interpreter result; if that is the only place that is holding a
       reference to the object, it will be deleted.

       The    ensemble    property    getters     (<b>Tcl_GetEnsembleMappingDict</b>,     <b>Tcl_GetEnsembleParameterList</b>,
       <b>Tcl_GetEnsembleSubcommandList</b>,  and  <b>Tcl_GetEnsembleUnknownHandler</b>) do not manipulate the reference count
       of the values they provide out; if those are non-NULL, they will have a reference count of  at  least  1.
       Note that these functions may set the interpreter result.

       The     ensemble     property    setters    (<b>Tcl_SetEnsembleMappingDict</b>,    <b>Tcl_SetEnsembleParameterList</b>,
       <b>Tcl_SetEnsembleSubcommandList</b>, and <b>Tcl_SetEnsembleUnknownHandler</b>) will increment the reference  count  of
       the  new  value  of the property they are given if they succeed (and decrement the reference count of the
       old value of the property, if relevant). If the property setters return <b>TCL_ERROR</b>, the reference count of
       the Tcl_Obj argument is left unchanged.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/namespace.3tcl.html">namespace</a>(3tcl), <a href="../man3tcl/Tcl_DeleteCommandFromToken.3tcl.html">Tcl_DeleteCommandFromToken</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       command, ensemble

Tcl                                                    8.5                                    <u><a href="../man3tcl/Tcl_Ensemble.3tcl.html">Tcl_Ensemble</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>