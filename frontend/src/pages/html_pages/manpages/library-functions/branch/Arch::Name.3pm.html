<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arch::Name - parse, store and construct an arch name</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libarch-perl">libarch-perl_0.5.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Arch::Name - parse, store and construct an arch name

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Arch::Name;

           my $version_spec = '<a href="mailto:some@hacker.org--pub">some@hacker.org--pub</a>/bugzilla--main--1.2';
           my $name = Arch::Name-&gt;new($version_spec);
           die unless $name eq $version;
           die unless $name - 2 eq '<a href="mailto:some@hacker.org--pub">some@hacker.org--pub</a>/bugzilla';
           die unless $name-&gt;branch eq 'main';

           # list other branches (latest versions) in the tree archive
           my $category = Arch::Name-&gt;new($tree-&gt;get_version)-&gt;<a href="../man2/go_up.2.html">go_up</a>(2);

           foreach my $branch_str ($session-&gt;branches($category)) {
               my $branch = $category-&gt;child($branch_str);
               my $latest_version = ($session-&gt;versions($branch))[-1];

               print $branch-&gt;go_down($latest_version)-&gt;to_string, "\n";
           }

           # another way to manipulate it
           my $category = Arch::Name-&gt;new($tree-&gt;get_version);
           $category-&gt;apply([undef, undef]);
           print $category-&gt;fqn, "\n", $category-&gt;parent-&gt;to_hash, "\n";

           # validate arch name from the user input
           # suppose we write a tool that accepts 3 command line args:
           #   * tree directory or branch+ (to get tree)
           #   * fully qualified revision (to get changeset)
           #   * archive+ (fully qualified category is ok too)
           my ($name_or_dir, $rvsn, $archv) = @ARGV;

           my $tree = Arch::Name-&gt;is_valid($name_or_dir, "branch+")?
               Arch::Session-&gt;new-&gt;get_tree($name_or_dir):
               Arch::Tree-&gt;new($name_or_dir);
           my $cset = $session-&gt;get_revision_changeset($rvsn)
               if Arch::Name-&gt;is_valid($rvsn, 'revision');
           my $possibly_archive = Arch::Name-&gt;new($archv);
           die "No archive" unless $possibly_archive-&gt;is_valid;
           my $archive = $possibly_archive-&gt;cast('archive');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class represents the Arch name concept and provides useful methods to manipulate it.

       The fully qualified Arch name looks like <u>archive</u>/<u>category</u>--<u>branch</u>--<u>version</u>--<u>revision</u> for revisions and
       some prefix of it for other hierarchy citizens. The branchless names have "--<u>branch</u>" part removed.

</pre><h4><b>METHODS</b></h4><pre>
       The following class methods are available:

       <b>new</b>, <b>set</b>, <b>clone</b>, <b>apply</b>, <b>go_up</b>, <b>go_down</b>, <b>parent</b>, <b>child</b>, <b>to_string</b>, <b>to_nonarch_string</b>, <b>to_array</b>, <b>to_hash</b>,
       <b>fqn</b>, <b>nan</b>, <b>get</b>, <b>archive</b>, <b>category</b>, <b>branch</b>, <b>version</b>, <b>revision</b>, <b>error</b>, <b>level</b>, <b>cast</b>, <b>is_valid</b>.

       <b>new</b>
       <b>new</b> <u>init</u> [<u>on_error</u>=0]
           Construct  the  "Arch::Name"  instanse.  If  the optional <u>init</u> parameter is given, then <b>set</b> method is
           called with this parameter on the newly created instanse.

           By default (without <u>init</u>), the empty name is created that does not pass <b>is_valid</b> check.

           If <u>on_error</u> is set and positive, then die on any initialization error, i.e. when only a partial  name
           is  parsed  or  no  name  components  are given.  By default an object representing a partial name is
           returning, and <b>error</b> may be used. If <u>on_error</u> is set and is negative, then don't set any error.

           Please note, that passing "Arch::Name" object as the parameter does not construct a new instance, but
           returns this passed object. Use <b>clone</b> instead if you want to clone the passed object.  Or  explicitly
           call <b>set</b>.

       <b>set</b> <u>object</u>
       <b>set</b> <u>string</u>
       <b>set</b> <u>arrayref</u>
       <b>set</b> <u>hashref</u>
           Store  the new content. Multiple argument types supported. <u>object</u> is another reference object of type
           "Arch::Name". <u>string</u> is fully qualified name.  <u>arrayref</u> contains subnames, like the ones returned  by
           <b>to_array</b>  method.   <u>hashref</u>  is  hash  with  some  or all keys <u>archive</u>, <u>category</u>, <u>branch</u>, <u>version</u> and
           <u>revision</u>, like the ones returned by <b>to_hash</b> method.

       <b>clone</b> [<u>init</u> ..]
           Create and return a new "Arch::Name" instanse that stores the same logical arch name. If the optional
           <u>init</u> parameter(s) given, then <b>apply</b> method is called with  these  parameters  on  the  newly  created
           instanse.

       <b>apply</b> <u>hashref</u>
       <b>apply</b> [<u>reversed_arrayref</u>] [<u>subname</u> ..]
           Similar to <b>set</b>, but enables to apply a partial change. For example:

               my $name = Arch::Name-&gt;new("user@host--arch/cat--felix--1.2.3");

               $name-&gt;apply([ '1.2.4', 'leo' ]);        # ok, new branch-version
           or:
               $name-&gt;apply({ branch =&gt; 'leo', version =&gt; '1.2.4' });  # ditto
           or:
               $name-&gt;apply([ 'panther' ]);             # error, invalid version
           or:
               $name-&gt;apply([ undef, 'panther' ]);      # ok, it is branch now
           or:
               $name-&gt;apply({ category =&gt; 'dog' });     # ok, it is category now
           or:
               $name-&gt;apply({ branch =&gt; 'leo' });       # ok, == [undef, 'leo']
           or:
               $name-&gt;apply({ version =&gt; undef });      # ok, it is branch now
           or:
               $name-&gt;apply({ revision =&gt; 'patch-6' }); # ok, it is revision now
           or:
               $name-&gt;apply([], 'patch-6');             # ditto
           or:
               $name-&gt;apply([ '1.2.4' ], 'patch-6');    # ditto with new version
           or:
               $branch-&gt;apply([], '0', 'base-0');       # ok, go import revision
           or:
               $branch-&gt;apply('0', 'base-0') ;          # ditto

       <b>go_up</b> [<u>level</u>=1]
           Remove  one dimension (i.e. the last component) from the name, or more than one dimension if <u>level</u> is
           given. This is effectivelly just a convenient shortcut for "apply([ (undef) x <u>level</u> ])".

       <b>go_down</b> <u>string</u> ..
           Add one more dimension (i.e. new  component  <u>string</u>)  to  the  name.   Multiple  new  dimentions  are
           supported. This is effectivelly just an alias for "apply(<u>string</u>, .. )".

       <b>parent</b> [<u>level</u>=1]
           Return object representing the parent arch name. This is just a shortcut for "clone-&gt;go_up(<u>level</u>)".

       <b>child</b> <u>string</u> ..
           Return object representing the child arch name. This is just a shortcut for "clone-&gt;go_down(<u>string</u>)".

       <b>to_string</b>
           Return the fully qualified name.

       <b>to_nonarch_string</b>
           Return the nonarch name (that is the fully qualified name without <u>archive/</u> part).

       <b>to_array</b>
           Return  the components of the name starting from archive to revision.  The returned array may contain
           0 to 5 strings; the branch in branchless names is represented by empty string.

           Returns array or arrayref depending on context.

       <b>to_hash</b>
           Return the hash containing the components of the name with keys: <u>archive</u>, <u>category</u>,  <u>branch</u>,  <u>version</u>
           and <u>revision</u>.

           Returns hash or hashref depending on context.

       <b>fqn</b> This is an alias for <b>to_string</b>.

       <b>nan</b> This is an alias for <b>to_nonarch_string</b>.

       <b>get</b> This is an alias for <b>to_array</b>.

       <b>archive</b> [<u>archive</u>]
           Get or set the archive component only (the string). See also, <b>to_array</b> (getter) and <b>apply</b> (setter).

       <b>category</b> [<u>category</u>]
           Get or set the category component only (the string). See also, <b>to_array</b> (getter) and <b>apply</b> (setter).

       <b>branch</b> [<u>branch</u>]
           Get or set the branch component only (the string). See also, <b>to_array</b> (getter) and <b>apply</b> (setter).

       <b>version</b> [<u>version</u>]
           Get or set the version component only (the string). See also, <b>to_array</b> (getter) and <b>apply</b> (setter).

       <b>revision</b> [<u>revision</u>]
           Get or set the revision component only (the string). See also, <b>to_array</b> (getter) and <b>apply</b> (setter).

       <b>error</b>
           Return the last error string or undef. Some errors are fatal (like passing unexiting [<u>elem</u>] parameter
           to  <b>is_valid</b>),  then the module dies. Some errors are however not fatal (like setting malformed fully
           qualified name, or setting revision part when no version part is set). In this case the name  is  set
           to something adequate (usually empty name), and this method may be used to get the error message.

           This last error string is class global and it is (un)set on every <b>set</b> or <b>apply</b> method.

       <b>level</b> [<u>stringify-flag</u>]
           Return 0 if the name is not valid (empty).  Return integer [1 .. 5] if the name is <u>archive</u>, <u>category</u>,
           <u>branch</u>, <u>version</u> and <u>revision</u> correspondingly.

           If  <u>stringify-flag</u> is set, then return the same as a text, i.e. one of the values: "none", "archive",
           "category", "branch", "version", "revision".

       <b>cast</b> <u>elem</u>
           Similar to <b>parent</b> or <b>clone</b>, but requires argument that is one of the values that <b>level</b> returns  (i.e.
           either integers 0 .. 5 or strings "none" .. "revision"). The returned cloned object contains only the
           number of components specified by <u>elem</u>.

           If the original object contains less components than requested, then undef if returned.

       <b>is_valid</b> [<u>elem</u>]
           Return true if the object contains the valid arch name (i.e. at least one component).

           If  <u>elem</u>  is  given  that  is  one  of  the  strings  "archive",  "category", "branch", "version" and
           "revision", then return true if the object represents the given element (for example, category),  and
           false otherwise.

           If  <u>elem</u>  is  given  that  is  one  of the strings "archive+", "category+", "branch+", "version+" and
           "revision+", then return true if the  object  represents  at  least  the  given  element,  and  false
           otherwise.

       Arch::Name-&gt;<b>is_valid</b> <u>name</u> [<u>elem</u>]
           This  class  method  does  two  things,  first  constructs  the  "Arch::Name" object with <u>name</u> as the
           constructor parameter, and then calls the <b>is_valid</b> method on this created object with  optional  <u>elem</u>
           passed.

</pre><h4><b>OVERLOADED</b> <b>OPERATORS</b></h4><pre>
       The following operators are overloaded:

           ""    # to_string
           0+    # level
           bool  # is_valid
           =     # clone
           +     # child
           -     # parent
           +=    # go_down
           -=    # go_up

</pre><h4><b>BUGS</b></h4><pre>
       No known bugs.

       "man perl | grep more"

</pre><h4><b>AUTHORS</b></h4><pre>
       Mikhael Goikhman (<a href="mailto:migo@homemail.com--Perl-GPL">migo@homemail.com--Perl-GPL</a>/arch-perl--devel).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For more information, see tla, Arch::Session, Arch::Library, Arch::Tree.

perl v5.20.2                                       2005-01-09                                    <u>Arch::<a href="../man3pm/Name.3pm.html">Name</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>