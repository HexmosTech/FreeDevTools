<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cron - Tool for automating the period callback of commands</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cron - Tool for automating the period callback of commands

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.6</b> <b>9</b>

       package require <b>cron</b> <b>?2.2?</b>

       <b>::cron::at</b> <u>?processname?</u> <u>timecode</u> <u>command</u>

       <b>::cron::cancel</b> <u>processname</u>

       <b>::cron::every</b> <u>processname</u> <u>frequency</u> <u>command</u>

       <b>::cron::in</b> <u>?processname?</u> <u>timecode</u> <u>command</u>

       <b>::cron::object_coroutine</b> <u>object</u> <u>coroutine</u> <u>?info?</u>

       <b>::cron::sleep</b> <u>milliseconds</u>

       <b>::cron::task</b> <b>delete</b> <u>process</u>

       <b>::cron::task</b> <b>exists</b> <u>process</u>

       <b>::cron::task</b> <b>info</b> <u>process</u>

       <b>::cron::task</b> <b>set</b> <u>process</u> <u>field</u> <u>value</u> <u>?field...?</u> <u>?value...?</u>

       <b>::cron::wake</b> <u>?who?</u>

       <b>::cron::clock_step</b> <u>milliseconds</u>

       <b>::cron::clock_delay</b> <u>milliseconds</u>

       <b>::cron::clock_sleep</b> <u>seconds</u> <u>?offset?</u>

       <b>::cron::clock_set</b> <u>newtime</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>cron</b> package provides a Pure-tcl set of tools to allow programs to schedule tasks to occur at regular
       intervals.  Rather  than force each task to issue it's own call to the event loop, the cron system mimics
       the cron utility in Unix: on task periodically checks to see if something is to be done, and  issues  all
       commands for a given time step at once.

       Changes in version 2.0

       While  cron  was  originally  designed  to  handle  time scales &gt; 1 second, the latest version's internal
       understand time granularity down to the millisecond, making it  easier  to  integrate  with  other  timed
       events.   Version  2.0 also understands how to properly integrate coroutines and objects.  It also adds a
       facility for an external (or script driven) clock. Note that vwait style events won't work very well with
       an external clock.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::cron::at</b> <u>?processname?</u> <u>timecode</u> <u>command</u>
              This command registers a <u>command</u> to be called at the time specified by <u>timecode</u>.  If  <u>timecode</u>  is
              expressed  as  an  integer,  the  timecode  is assumed to be in unixtime. All other inputs will be
              interpreted by <b>clock</b> <b>scan</b> and converted to unix time.  This task can  be  modified  by  subsequent
              calls  to  this  package's  commands by referencing <u>processname</u>. If <u>processname</u> exists, it will be
              replaced.  If <u>processname</u> is not given, one is generated and returned by the command.

              ::cron::at start_coffee {Tomorrow at 9:00am}  {remote::exec::coffeepot power on}
              ::cron::at shutdown_coffee {Tomorrow at 12:00pm}  {remote::exec::coffeepot power off}

       <b>::cron::cancel</b> <u>processname</u>
              This command unregisters  the  process  <u>processname</u>  and  cancels  any  pending  commands.   Note:
              processname can be a process created by either <b>::cron::at</b> or <b>::cron::every</b>.

              ::cron::cancel check_mail

       <b>::cron::every</b> <u>processname</u> <u>frequency</u> <u>command</u>
              This command registers a <u>command</u> to be called at the interval of <u>frequency</u>.  <u>frequency</u> is given in
              seconds.  This  task can be modified by subsequent calls to this package's commands by referencing
              <u>processname</u>. If <u>processname</u> exists, it will be replaced.

              ::cron::every check_mail 900  ::imap_client::check_mail
              ::cron::every backup_db  3600 {::backup_procedure ::mydb}

       <b>::cron::in</b> <u>?processname?</u> <u>timecode</u> <u>command</u>
              This command registers a <u>command</u> to be called  after  a  delay  of  time  specified  by  <u>timecode</u>.
              <u>timecode</u>  is  expressed  as  an  seconds.   This  task can be modified by subsequent calls to this
              package's commands by referencing <u>processname</u>. If <u>processname</u> exists, it  will  be  replaced.   If
              <u>processname</u> is not given, one is generated and returned by the command.

       <b>::cron::object_coroutine</b> <u>object</u> <u>coroutine</u> <u>?info?</u>
              This  command  registers  a <u>coroutine</u>, associated with <u>object</u> to be called given the parameters of
              <u>info</u>. If now parameters are given, the coroutine is assumed to be an idle task  which  will  self-
              terminate. <u>info</u> can be given in any form compadible with <b>::cron::task</b> <b>set</b>

       <b>::cron::sleep</b> <u>milliseconds</u>
              When  run  within  a  coroutine,  this  command  will register the coroutine for a callback at the
              appointed time, and immediately yield.

              If the ::cron::time variable is &gt; 0 this command will advance the internal time, 100ms at a time.

              In all other cases this command will generate a fictious variable, generate  an  after  call,  and
              vwait the variable:

              set eventid [incr ::cron::eventcount]
              set var ::cron::event_#$eventid
              set $var 0
              ::after $ms "set $var 1"
              ::vwait $var
              ::unset $var

       Usage:

              ::cron::sleep 250

       <b>::cron::task</b> <b>delete</b> <u>process</u>
              Delete the process specified the <u>process</u>

       <b>::cron::task</b> <b>exists</b> <u>process</u>
              Returns true if <u>process</u> is registered with cron.

       <b>::cron::task</b> <b>info</b> <u>process</u>
              Returns a dict describing <u>process</u>. See <b>::cron::task</b> <b>set</b> for a description of the options.

       <b>::cron::task</b> <b>set</b> <u>process</u> <u>field</u> <u>value</u> <u>?field...?</u> <u>?value...?</u>

              If <u>process</u> does not exist, it is created. Options Include:

              <b>command</b>
                     If  <b>coroutine</b> is black, a global command which implements this process. If <b>coroutine</b> is not
                     black, the command to invoke to create or recreate the coroutine.

              <b>coroutine</b>
                     The name of the coroutine (if any) which implements this process.

              <b>frequency</b>
                     If -1, this process is terminated after the next event. If 0 this process should be  called
                     during every idle event. If positive, this process should generate events periodically. The
                     frequency is an integer number of milliseconds between events.

              <b>object</b> The object associated with this process or coroutine.

              <b>scheduled</b>
                     If  non-zero,  the  absolute  time  from the epoch (in milliseconds) that this process will
                     trigger an event.  If zero, and the <b>frequency</b> is also zero, this process  is  called  every
                     idle loop.

              <b>running</b>
                     A boolean flag. If true it indicates the process never returned or yielded during the event
                     loop, and will not be called again until it does so.

       <b>::cron::wake</b> <u>?who?</u>
              Wake up cron, and arrange for its event loop to be run during the next Idle cycle.

              ::cron::wake {I just did something important}

       Several  utility commands are provided that are used internally within cron and for testing cron, but may
       or may not be useful in the general cases.

       <b>::cron::clock_step</b> <u>milliseconds</u>

              Return a clock time absolute to the epoch which falls on the next border between  one  second  and
              the next for the value of <u>milliseconds</u>

       <b>::cron::clock_delay</b> <u>milliseconds</u>

              Return  a  clock  time absolute to the epoch which falls on the next border between one second and
              the next <u>milliseconds</u> in the future.

       <b>::cron::clock_sleep</b> <u>seconds</u> <u>?offset?</u>

              Return a clock time absolute to the epoch which falls exactly <u>seconds</u> in the future. If offset  is
              given  it may be positive or negative, and will shift the final time to before or after the second
              would flip.

       <b>::cron::clock_set</b> <u>newtime</u>

              Sets the internal clock for  cron.  This  command  will  advance  the  time  in  100ms  increment,
              triggering events, until the internal time catches up with <u>newtime</u>.

              <u>newtime</u> is expressed in absolute milliseconds since the beginning of the epoch.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>odie</u> of the <u>Tcllib</u> <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       cron, odie

</pre><h4><b>CATEGORY</b></h4><pre>
       System

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2016-2018 Sean Woods &lt;<a href="mailto:yoda@etoyoc.com">yoda@etoyoc.com</a>&gt;

tcllib                                                 2.2                                            <u><a href="../man3tcl/cron.3tcl.html">cron</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>