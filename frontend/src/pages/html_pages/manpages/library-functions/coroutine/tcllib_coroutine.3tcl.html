<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>coroutine - Coroutine based event and IO handling</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       coroutine - Coroutine based event and IO handling

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.6</b> <b>9</b>

       package require <b>coroutine</b> <b>1.4</b>

       <b>coroutine::util</b> <b>after</b> <u>delay</u>

       <b>coroutine::util</b> <b>await</b> <u>varname</u>...

       <b>coroutine::util</b> <b>create</b> <u>arg</u>...

       <b>coroutine::util</b> <b>exit</b> ?<u>status</u>?

       <b>coroutine::util</b> <b>gets</b> <u>chan</u> ?<u>varname</u>?

       <b>coroutine::util</b> <b>gets_safety</b> <u>chan</u> <u>limit</u> <u>varname</u>

       <b>coroutine::util</b> <b>global</b> <u>varname</u>...

       <b>coroutine::util</b> <b>puts</b> ?<b>-nonewline</b>? <u>channel</u> <u>string</u>

       <b>coroutine::util</b> <b>read</b> <b>-nonewline</b> <u>chan</u> ?<u>n</u>?

       <b>coroutine::util</b> <b>socket</b> ?<u>options...</u>? <u>host</u> <u>port</u>

       <b>coroutine::util</b> <b>update</b> ?<b>idletasks</b>?

       <b>coroutine::util</b> <b>vwait</b> <u>varname</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>coroutine</b>  package  provides  coroutine-aware  implementations of various event- and channel related
       commands. It can be in multiple modes:

       [1]    Call the commands through their ensemble, in code which  is  explicitly  written  for  use  within
              coroutines.

       [2]    Import  the commands into a namespace, either directly, or through <b>namespace</b> <b>path</b>. This allows the
              use from within code which is not coroutine-aware per se and restricted to specific namespaces.

       A more agressive form of making code coroutine-oblivious than point 2  above  is  available  through  the
       package  <b>coroutine::auto</b>, which intercepts the relevant builtin commands and changes their implementation
       dependending on the context they are run in, i.e.  inside or outside of a coroutine.

</pre><h4><b>API</b></h4><pre>
       All the commands listed below are synchronous with respect to the  coroutine  invoking  them,  i.e.  this
       coroutine blocks until the result is available. The overall eventloop is not blocked however.

       <b>coroutine::util</b> <b>after</b> <u>delay</u>
              This command delays the coroutine invoking it by <u>delay</u> milliseconds.

       <b>coroutine::util</b> <b>await</b> <u>varname</u>...
              This  command is an extension form of the <b>coroutine::util</b> <b>vwait</b> command (see below) which waits on
              a write to one of many named namespace variables.

       <b>coroutine::util</b> <b>create</b> <u>arg</u>...
              This command creates a new coroutine with an automatically assigned name and causes it to run  the
              code specified by the arguments.

       <b>coroutine::util</b> <b>exit</b> ?<u>status</u>?
              This  command exits the current coroutine, causing it to return <u>status</u>. If no status was specified
              the default <u>0</u> is returned.

       <b>coroutine::util</b> <b>gets</b> <u>chan</u> ?<u>varname</u>?
              This command reads a line from the channel <u>chan</u> and returns it either as  its  result,  or,  if  a
              <u>varname</u> was specified, writes it to the named variable and returns the number of characters read.

       <b>coroutine::util</b> <b>gets_safety</b> <u>chan</u> <u>limit</u> <u>varname</u>
              This command reads a line from the channel <u>chan</u> up to size <u>limit</u> and stores the result in <u>varname</u>.
              Of  <u>limit</u>  is  reached  before  the set first newline, an error is thrown. The command returns the
              number of characters read.

       <b>coroutine::util</b> <b>global</b> <u>varname</u>...
              This command imports the named global variables of the coroutine into the current scope. From  the
              technical  point  of  view these variables reside in level <b>#1</b> of the Tcl stack. I.e. these are not
              the regular global variable in to the global namespace, and each coroutine can have their own set,
              independent of all others.

       <b>coroutine::util</b> <b>puts</b> ?<b>-nonewline</b>? <u>channel</u> <u>string</u>
              This commands writes the string to the specified <u>channel</u>.   Contrary  to  the  builtin  <b>puts</b>  this
              command waits until the <u>channel</u> is writable before actually writing to it.

       <b>coroutine::util</b> <b>read</b> <b>-nonewline</b> <u>chan</u> ?<u>n</u>?
              This  command reads <u>n</u> characters from the channel <u>chan</u> and returns them as its result. If <u>n</u> is not
              specified the command will read the channel until EOF is reached.

       <b>coroutine::util</b> <b>socket</b> ?<u>options...</u>? <u>host</u> <u>port</u>
              This command connects to the specified host and port and returns when that is  done.  Contrary  to
              the  builtin  command  it  performs  a  non-blocking connect in the background. As such, while its
              blocks the calling coroutine, the overall application is not blocked.

       <b>coroutine::util</b> <b>update</b> ?<b>idletasks</b>?
              This command causes the coroutine invoking it to  run  pending  events  or  idle  handlers  before
              proceeding.

       <b>coroutine::util</b> <b>vwait</b> <u>varname</u>
              This  command  causes the coroutine calling it to wait for a write to the named namespace variable
              <u>varname</u>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the  category  <u>coroutine</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       after, channel, coroutine, events, exit, gets, global, green threads, read, threads, update, vwait

</pre><h4><b>CATEGORY</b></h4><pre>
       Coroutine

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2010-2015 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 1.4                                       <u><a href="../man3tcl/coroutine.3tcl.html">coroutine</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>