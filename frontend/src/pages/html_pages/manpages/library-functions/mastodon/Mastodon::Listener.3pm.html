<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastodon::Listener - Access the streaming API of a Mastodon server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmastodon-client-perl">libmastodon-client-perl_0.017-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mastodon::Listener - Access the streaming API of a Mastodon server

</pre><h4><b>SYNOPSIS</b></h4><pre>
         # From Mastodon::Client
         my $listener = $client-&gt;stream( 'public' );

         # Or use it directly
         my $listener = Mastodon::Listener-&gt;new(
           url =&gt; 'https://mastodon.cloud/api/v1/streaming/public',
           access_token =&gt; $token,
           coerce_entities =&gt; 1,
         )

         $listener-&gt;on( update =&gt; sub {
           my ($listener, $status) = @_;
           printf "%s said: %s\n",
             $status-&gt;account-&gt;display_name,
             $status-&gt;content;
         });

         $listener-&gt;start;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A Mastodon::Listener object is created by calling the <b>stream</b> method from a Mastodon::Client, and it
       exists for the sole purpose of parsing a stream of events from a Mastodon server.

       Mastodon::Listener objects inherit from Role::EventEmitter. Please refer to its documentation for details
       on how to register callbacks for the different events.

       Once callbacks have been registered, the listener can be set in motion by calling its <b>start</b> method, which
       takes no arguments and never returns.  The <b>stop</b> method can be called from within callbacks to disconnect
       from the stream.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       <b>access_token</b>
           The  OAuth2  access  token  of  your  application, if authorization is needed. This is not needed for
           streaming from public timelines.

       <b>api_version</b>
           The API version to use. Defaults to 1.

       <b>coerce_entities</b>
           Whether JSON responses should be coerced into Mastodon::Entity objects.  Currently defaults to  false
           (but this will likely change in v0.01).

       <b>instance</b>
           The instance to use, as a Mastodon::Entity::Instance object. Will be coerced from a URL, and defaults
           to "mastodon.social".

       <b>stream</b>
           The  stream  to  use.  Current valid streams are "public", "user", and tag timelines. To access a tag
           timeline, the argument to this value should begin with a hash character ("#").

       <b>url</b> The full streaming URL to use. By default, it  is  constructed  from  the  values  in  the  <b>instance</b>,
           <b>api_version</b>, and <b>stream</b> attributes.

</pre><h4><b>EVENTS</b></h4><pre>
       <b>update</b>
           A new status has appeared. Callback will be called with the listener and the new status.

       <b>notification</b>
           A new notification has appeared. Callback will be called with the listener and the new notification.

       <b>delete</b>
           A  status  has  been  deleted.  Callback  will  be called with the listener and the ID of the deleted
           status.

       <b>heartbeat</b>
           A new ":thump" has been received from the server. This is mostly for debugging purposes.

       <b>error</b>
           Inherited from Role::EventEmitter, will be emitted when an error was found.   The  callback  will  be
           called with a fatal flag, an error message, and any relevant data as a single third arghument.

           If  the error event is triggered in response to a 4xx or 5xx error, the data payload will be an array
           reference with the response and request objects as received from Net::Async::HTTP.

</pre><h4><b>AUTHOR</b></h4><pre>
       •   José Joaquín Atria &lt;<a href="mailto:jjatria@cpan.org">jjatria@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2017 by José Joaquín Atria.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.36.0                                       2022-11-03                            <u>Mastodon::<a href="../man3pm/Listener.3pm.html">Listener</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>