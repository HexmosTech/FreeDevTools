<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDL_OpenAudio - Opens the audio device with the desired parameters.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libsdl1.2-dev">libsdl1.2-dev_1.2.15+dfsg2-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SDL_OpenAudio - Opens the audio device with the desired parameters.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>"SDL.h"</b>

       <b>int</b> <b>SDL_OpenAudio</b>(<b>SDL_AudioSpec</b> <b>*desired,</b> <b>SDL_AudioSpec</b> <b>*obtained</b>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  function  opens  the audio device with the <b>desired</b> parameters, and returns 0 if successful, placing
       the actual hardware parameters in the structure pointed to by <b>obtained</b>. If <b>obtained</b> is  NULL,  the  audio
       data  passed  to  the  callback  function  will  be guaranteed to be in the requested format, and will be
       automatically converted to the hardware audio format if necessary. This function returns -1 if it  failed
       to open the audio device, or couldn't set up the audio thread.

       To open the audio device a <b>desired</b> <b>SDL_AudioSpec</b> must be created.

       SDL_AudioSpec *desired;
       .
       .
       desired=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));

        You must then fill this structure with your desired audio specifications.

       <b>desired</b>-&gt;<b>freq</b>

       <b>desired</b>-&gt;<b>format</b>

       <b>desired</b>-&gt;<b>samples</b>

       <b>desired</b>-&gt;<b>callback</b>

       void callback(void *userdata, Uint8 *stream, int len);

        <b>userdata</b>  is the pointer stored in <b>userdata</b> field of the <b>SDL_AudioSpec</b>. <b>stream</b> is a pointer to the audio
       buffer you want to fill with information and <b>len</b> is the length of the audio buffer in bytes.

       <b>desired</b>-&gt;<b>userdata</b>

       <b>SDL_OpenAudio</b> reads these fields from the <b>desired</b>  <b>SDL_AudioSpec</b>  structure  pass  to  the  function  and
       attempts  to  find  an  audio  configuration  matching  your <b>desired</b>. As mentioned above, if the <b>obtained</b>
       parameter is <b>NULL</b> then SDL with convert from your <b>desired</b> audio settings to the hardware settings  as  it
       plays.

       If  <b>obtained</b> is <b>NULL</b> then the <b>desired</b> <b>SDL_AudioSpec</b> is your working specification, otherwise the <b>obtained</b>
       <b>SDL_AudioSpec</b> becomes the working specification and the <b>desirec</b> specification can be deleted. The data in
       the working specification is used when building <b>SDL_AudioCVT</b>'s for converting loaded data to the hardware
       format.

       <b>SDL_OpenAudio</b> calculates the <b>size</b> and <b>silence</b> fields for both the <b>desired</b>  and  <b>obtained</b>  specifications.
       The  <b>size</b>  field  stores  the total size of the audio buffer in bytes, while the <b>silence</b> stores the value
       used to represent silence in the audio buffer

       The audio device starts out playing <b>silence</b> when it's opened,  and  should  be  enabled  for  playing  by
       calling  <b>SDL_PauseAudio</b><u>(</u><b>0</b>)  when  you  are ready for your audio <b>callback</b> function to be called. Since the
       audio driver may modify the requested <b>size</b> of the audio buffer, you  should  allocate  any  local  mixing
       buffers after you open the audio device.

</pre><h4><b>EXAMPLES</b></h4><pre>
       /* Prototype of our callback function */
       void my_audio_callback(void *userdata, Uint8 *stream, int len);

       /* Open the audio device */
       SDL_AudioSpec *desired, *obtained;
       SDL_AudioSpec *hardware_spec;

       /* Allocate a desired SDL_AudioSpec */
       desired=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));

       /* Allocate space for the obtained SDL_AudioSpec */
       obtained=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));

       /* 22050Hz - FM Radio quality */
       desired-&gt;freq=22050;

       /* 16-bit signed audio */
       desired-&gt;format=AUDIO_S16LSB;

       /* Mono */
       desired-&gt;channels=0;

       /* Large audio buffer reduces risk of dropouts but increases response time */
       desired-&gt;samples=8192;

       /* Our callback function */
       desired-&gt;callback=my_audio_callback;

       desired-&gt;userdata=NULL;

       /* Open the audio device */
       if ( SDL_OpenAudio(desired, obtained) &lt; 0 ){
         fprintf(stderr, "Couldn't open audio: %s
       ", SDL_GetError());
         exit(-1);
       }
       /* desired spec is no longer needed */
       free(desired);
       hardware_spec=obtained;
       .
       .
       /* Prepare callback for playing */
       .
       .
       .
       /* Start playing */
       <a href="../man0/SDL_PauseAudio.0.html">SDL_PauseAudio</a>(0);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>SDL_AudioSpec</b>, <b>SDL_LockAudio</b>, <b>SDL_UnlockAudio</b>, <b>SDL_PauseAudio</b>

SDL                                          Tue 11 Sep 2001, 22:58                             <u><a href="../man3/SDL_OpenAudio.3.html">SDL_OpenAudio</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>