<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDL_ConvertAudio - Convert audio data to a desired audio format.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libsdl1.2-dev">libsdl1.2-dev_1.2.15+dfsg2-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SDL_ConvertAudio - Convert audio data to a desired audio format.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>"SDL.h"</b>

       <b>int</b> <b>SDL_ConvertAudio</b>(<b>SDL_AudioCVT</b> <b>*cvt</b>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SDL_ConvertAudio</b> takes one parameter, <b>cvt</b>, which was previously initilized. Initilizing a <b>SDL_AudioCVT</b> is
       a two step process. First of all, the structure must be passed to <b>SDL_BuildAudioCVT</b> along with source and
       destination  format parameters. Secondly, the <b>cvt</b>-&gt;<b>buf</b> and <b>cvt</b>-&gt;<b>len</b> fields must be setup. <b>cvt</b>-&gt;<b>buf</b> should
       point to the audio data and <b>cvt</b>-&gt;<b>len</b> should be set to the length of the audio data  in  bytes.  Remember,
       the length of the buffer pointed to by <b>buf</b> show be <b>len</b>*<b>len_mult</b> bytes in length.

       Once  the <b>SDL_AudioCVT</b>structure is initilized then we can pass it to <b>SDL_ConvertAudio</b>, which will convert
       the audio data pointer to by <b>cvt</b>-&gt;<b>buf</b>. If <b>SDL_ConvertAudio</b> returned <b>0</b> then the conversion  was  completed
       successfully, otherwise <b>-1</b> is returned.

       If  the  conversion  completed  successfully then the converted audio data can be read from <b>cvt</b>-&gt;<b>buf</b>. The
       amount of valid, converted, audio data in the buffer is equal to <b>cvt</b>-&gt;<b>len</b>*<b>cvt</b>-&gt;<b>len_ratio</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       /* Converting some WAV data to hardware format */
       void my_audio_callback(void *userdata, Uint8 *stream, int len);

       SDL_AudioSpec *desired, *obtained;
       SDL_AudioSpec wav_spec;
       SDL_AudioCVT  wav_cvt;
       Uint32 wav_len;
       Uint8 *wav_buf;
       int ret;

       /* Allocated audio specs */
       desired=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));
       obtained=(SDL_AudioSpec *)malloc(sizeof(SDL_AudioSpec));

       /* Set desired format */
       desired-&gt;freq=22050;
       desired-&gt;format=AUDIO_S16LSB;
       desired-&gt;samples=8192;
       desired-&gt;callback=my_audio_callback;
       desired-&gt;userdata=NULL;

       /* Open the audio device */
       if ( SDL_OpenAudio(desired, obtained) &lt; 0 ){
         fprintf(stderr, "Couldn't open audio: %s
       ", SDL_GetError());
         exit(-1);
       }

       free(desired);

       /* Load the test.wav */
       if( SDL_LoadWAV("test.wav", &amp;wav_spec, &amp;wav_buf, &amp;wav_len) == NULL ){
         fprintf(stderr, "Could not open test.wav: %s
       ", SDL_GetError());
         SDL_CloseAudio();
         free(obtained);
         exit(-1);
       }

       /* Build AudioCVT */
       ret = SDL_BuildAudioCVT(&amp;wav_cvt,
                               wav_spec.format, wav_spec.channels, wav_spec.freq,
                               obtained-&gt;format, obtained-&gt;channels, obtained-&gt;freq);

       /* Check that the convert was built */
       if(ret==-1){
         fprintf(stderr, "Couldn't build converter!
       ");
         SDL_CloseAudio();
         free(obtained);
         SDL_FreeWAV(wav_buf);
       }

       /* Setup for conversion */
       wav_cvt.buf=(Uint8 *)malloc(wav_len*wav_cvt.len_mult);
       wav_cvt.len=wav_len;
       memcpy(wav_cvt.buf, wav_buf, wav_len);

       /* We can delete to original WAV data now */
       SDL_FreeWAV(wav_buf);

       /* And now we're ready to convert */
       SDL_ConvertAudio(&amp;wav_cvt);

       /* do whatever */
       .
       .
       .
       .

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>SDL_BuildAudioCVT</b>, <b>SDL_AudioCVT</b>

SDL                                          Tue 11 Sep 2001, 22:58                          <u><a href="../man3/SDL_ConvertAudio.3.html">SDL_ConvertAudio</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>