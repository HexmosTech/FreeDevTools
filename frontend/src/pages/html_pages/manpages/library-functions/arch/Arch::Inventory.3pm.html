<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arch::Inventory - class representing a tree inventory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libarch-perl">libarch-perl_0.5.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Arch::Inventory - class representing a tree inventory

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Arch::Inventory qw(:category :type);

           my $inv = Arch::Inventory-&gt;new;  # use cwd
           print Arch::Inventory-&gt;to_string($inv-&gt;get_root_entry), "\n";
           print $inv-&gt;get_listing;

       or (most commonly):

           use Arch::Tree;

           my $tree = Arch::Tree-&gt;new;
           my $inv = $tree-&gt;get_inventory;
           print $inv-&gt;get_listing;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Arch::Inventory generates a tree inventory.

       An inventory is a tree structure of elements, each representing a single directory entry of the source
       tree. Each inventory entry is described by an hash with the following fields:

       <b>category</b>
           The  classification  of  the  tree  element. <b>category</b> can be one of <b>TREE</b>, <b>SOURCE</b>, <b>PRECIOUS</b>, <b>BACKUP</b> or
           <b>JUNK</b>.

       <b>untagged</b>
           A boolean value indicating whether the element was first classified as <b>SOURCE</b> but lacked an inventory
           id.

       <b>type</b>
           The tree element type. <b>type</b> can be one of <b>FILE</b>, <b>DIRECTORY</b> or <b>SYMLINK</b>.

       <b>path</b>
           The complete path to the tree element relative to the inventory base directory.

       <b>id</b>  The elements inventory id. May be "undef".

       <b>children</b>
           A hash of the elements direct children, idexed by their last path element.

           This field exists for elements of type <b>DIRECTORY</b> only.

       The <b>category</b> and <b>type</b> constants can be conveniently imported using the tags ":category" and ":type".

           use Arch::Inventory qw(:category :type);

</pre><h4><b>METHODS</b></h4><pre>
       The following methods are available:

       <b>new</b>, <b>directory</b>, <b>get_root_entry</b>, <b>get_entry</b>, <b>get_listing</b>, <b>annotate_fs</b>, <b>foreach</b>, <b>dump</b>, <b>to_string</b>.

       <b>new</b> [<u>$dir</u>]
           Create an inventory for <u>$dir</u> or the current directory if <u>$dir</u> is not specified.

       <b>directory</b>
           Returns the inventories base directory as passed to <b>new</b>.

       <b>get_root_entry</b>
           Returns the inventory element for the base directory.

           The root entry always has the following properties:

               $root = {
                   category =&gt; TREE,       # if {arch} exists, SOURCE otherwise
                   untagged =&gt; 1,
                   type     =&gt; DIRECTORY,
                   path     =&gt; '',
                   id       =&gt; undef,
                   children =&gt; { ... },
               }

       <b>get_entry</b> <u>$path</u>
       <b>get_entry</b> <u>@path_elements</u>
           Returns the inventory element for the specified path. The path may either be given as a single string
           or as a list of path elements.

           If the element does not exist "undef" is returned.

           Using an empty or no path is equivalent to calling <b>get_root_entry</b>.

       <b>get_listing</b>
           Generates a textual inventory listing equivalent to the output of

               tla inventory -tspbju -B --kind --ids --untagged

           <b>Note:</b> The output order is not equivalent to tla. Instead of strict  ASCII  order  of  path  names,  a
           directory  entry is always directly followed by its child entries. Entries with the same parent entry
           are ASCII ordered.

       <b>annotate_fs</b>
       <b>annotate_fs</b> <u>$entry</u>
           Add filesystem information to <u>$entry</u> or every inventory entry if none  is  provided.  This  adds  the
           fields  <b>stat</b>  and  <b>symlink</b>  to  the  annotated entries which contain the output of <b>lstat</b> and <b>readlink</b>
           respectively.

       <b>foreach</b> <u>$coderef</u>
           Execute <u>$coderef</u> for every inventory entry, passing the entry as $_[0].

       <b>dump</b>
           Generates a dump of the inventory structure using Data::Dumper.

       <b>to_string</b> <u>$inventory_element</u>
           Generates an inventory line for the inventory element as produced by tla.

</pre><h4><b>BUGS</b></h4><pre>
       Awaiting for your reports.

</pre><h4><b>AUTHORS</b></h4><pre>
       Mikhael Goikhman (<a href="mailto:migo@homemail.com--Perl-GPL">migo@homemail.com--Perl-GPL</a>/arch-perl--devel).

       Enno Cramer (<a href="mailto:uebergeek@web.de--2003">uebergeek@web.de--2003</a>/arch-perl--devel).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For more information, see tla, Arch::Util.

perl v5.20.2                                       2005-10-23                               <u>Arch::<a href="../man3pm/Inventory.3pm.html">Inventory</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>