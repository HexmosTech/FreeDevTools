<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arch::Tree - class representing Arch tree</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libarch-perl">libarch-perl_0.5.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Arch::Tree - class representing Arch tree

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Arch::Tree;
           my $tree = Arch::Tree-&gt;new;  # assume the current dir

           print map { "$_\n" } $tree-&gt;get_log_versions;

           foreach my $log ($tree-&gt;get_logs) {
               print "-" x 80, "\n";
               print $log-&gt;standard_date, "\n";
               print $log-&gt;summary, "\n\n";
               print $log-&gt;body;
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class represents the working tree concept in Arch and provides some useful methods.

</pre><h4><b>METHODS</b></h4><pre>
       The following methods are available:

       <b>new</b>, <b>root</b>, <b>get_version</b>, <b>set_version</b>, <b>get_log_versions</b>, <b>add_log_version</b>, <b>get_log_revisions</b>, <b>get_log</b>,
       <b>get_logs</b>, <b>get_log_revision_descs</b>, <b>get_inventory</b>, <b>get_changes</b>, <b>get_changeset</b>, <b>get_merged_log_text</b>,
       <b>get_merged_revision_summaries</b>, <b>get_merged_revisions</b>, <b>get_missing_revisions</b>, <b>get_missing_revision_descs</b>,
       <b>get_previous_revision</b>, <b>get_ancestry_logs</b>, <b>get_history_revision_descs</b>, <b>get_annotate_revision_descs</b>,
       <b>clear_cache</b>, <b>add</b>, <b>delete</b>, <b>mode</b>, <b>get_file_diff</b>, <b>make_log</b>, <b>import</b>, <b>commit</b>.

       <b>new</b> [<u>dir-name</u>]
           Construct  the  Arch::Tree object associated with the existing directory <u>dir-name</u>. The default is the
           current '.' directory.

       <b>root</b>
           Returns the project tree root.

       <b>get_version</b>
           Returns the fully qualified tree version.

       <b>get_revision</b>
           Returns the fully qualified tree revision.

       <b>set_version</b> <u>version</u>
           Changes the tree version to <u>version</u>.

       <b>get_log_versions</b>
           Returns all version names (including the main one and merged ones) for which logs are stored  in  the
           tree. In the scalar context returns arrayref.

       <b>add_log_version</b> <u>version</u>
           Add log version <u>version</u> to project tree.

       <b>get_log_revisions</b> [<u>version</u>]
           Returns  all revision names of the given <u>version</u> (the default is the tree version) for which logs are
           stored in the tree. In the scalar context returns arrayref.

       <b>get_log</b> <u>revision</u>
           Return Arch::Log object corresponding to the tree log of the given <u>revision</u>.

       <b>get_logs</b> [<u>version</u>]
           Return Arch::Log objects corresponding to the tree logs of the given <u>version</u>.  In the scalar  context
           returns arrayref.

           The default <u>version</u> is the tree version (see "get_version").  A special version name '*' may be used,
           in  this  case  all logs in "get_log_versions" are returned. <u>version</u> may be arrayref as well with the
           similar results.

       <b>get_log_revision_descs</b> [<u>version</u>]
           Returns arrayref of log revision description hashes corresponding to <u>version</u>.  The  optional  <u>version</u>
           argument may get the same values that are supported by <b>get_logs</b>.

       <b>get_inventory</b>
           Returns Arch::Inventory object for the project tree.

       <b>get_changes</b>
           Returns a list of uncommited changes in the project tree.

       <b>get_changeset</b> <u>dir</u>
           Creates  an <b>Arch::Changeset</b> of the uncommited changes in the tree. The directory <u>dir</u> is used to store
           the changeset and must not already exist. It will not be automatically removed.

       <b>get_merged_log_text</b>
           This is just the output of "tla log-for-merge".

       <b>get_merged_revision_summaries</b>
           Returns hash (actually sorted array of pairs) or hashref in the scalar context. The pair is for every
           merged revision: full-name =&gt; summary.

       <b>get_merged_revisions</b>
           The list of all merged in (present in the changes) full revisions.  In  the  scalar  context  returns
           arrayref.

       <b>get_missing_revisions</b> [<u>version</u>]
           The list of all missing revisions corresponding to <u>version</u>.  In the scalar context returns arrayref.

           The default <u>version</u> is the tree version (see "get_version").

       <b>get_missing_revision_descs</b> [<u>version</u>]
           The  hashref  of  all  missing  revision  descriptions  corresponding  to <u>version</u>.  The hash keys are
           revisions and the values are hashrefs with keys <u>name</u>, <u>summary</u>, <u>creator</u>, <u>email</u>, <u>date</u>, <u>kind</u>.

           The default <u>version</u> is the tree version (see "get_version").

       <b>get_previous_revision</b> [&lt;revision&gt;]
           Given the fully qualified revision name (defaulting to <b>get_revision</b>) return  the  previous  namespace
           revision  in  this  tree  version. Return undef for the <u>base-0</u> revision. Note, the <u>version-0</u> revision
           argument is handled specially.

       <b>get_ancestry_logs</b> [<u>%args</u>]
           Return all ancestry revision logs (calculated from the tree). The first log in the returned  arrayref
           corresponds  to  the  current tree revision, the last log is normally the original import log. If the
           tree has certain logs pruned (such practice is not recommended), then such pruned log is not returned
           and this method tries its best to determine its ancestor, still without accessing the archive.

           <u>%args</u> accepts: flags <u>no_continuation</u> and <u>one_version</u>, and <u>callback</u> to filter a revision log before it
           is collected.

           If <u>no_continuation</u> is set, then do not follow tags backward.

           If <u>one_version</u> is set, then do not follow tags from the versions different than the initial  version.
           This  is  similar  to  <u>no_continuation</u>,  but  not the same, since it is possible to tag into the same
           version.

           The default callback is effectivelly:

               sub {
                   my ($log) = @_;
                   return $log;
               }

           Note that if the callback does $_[0] = undef among other things, this is taken as a  signal  to  stop
           processing  of  ancestry (the return value is still collected even in this case; return empty list to
           collect nothing).

       <b>get_history_revision_descs</b> [<u>filepath</u> [<u>%args</u>]]
           Return arrayref of all ancestry revision descriptions in the backward order (i.e. from a more  recent
           to  an  older).  If  <u>filepath</u> is given, then only revisions that modified the given file (or dir) are
           returned. The revision description is hashref with keys <u>name</u>, <u>summary</u>, <u>creator</u>, <u>email</u>, <u>date</u>, <u>kind</u>.

           If <u>filepath</u> if given, then  the  revision  description  hash  additionally  contains  keys  <u>filepath</u>,
           <u>orig_filepath</u>   (if   renamed   on   that   revision),   <u>is_filepath_added</u>,  <u>is_filepath_renamed</u>  and
           <u>is_filepath_modified</u>.

           <u>%args</u> accepts: flags <u>no_continuation</u> and <u>one_version</u>, and <u>callback</u> to filter a  revision  description
           before it is collected.

           The default callback is effectivelly:

               sub {
                   my ($revision_desc, $log) = @_;
                   return $revision_desc;
               }

           The <u>%args</u> flags and assigning to $_[0] in callback have the same meaning as in <b>get_ancestry_logs</b>.

       <b>get_annotate_revision_descs</b> [<u>filepath</u> [<u>%args</u>]]
           Return  file  annotation  data.  In  scalar  context,  returns  arrayref  of  all  ancestry  revision
           descriptions in the backward order (i.e. from a  more  recent  to  an  older)  responsible  for  last
           modification of all file lines.  In list context, returns list of 3 values:

               ($lines, $line_revision_desc_indexes, $revision_descs) =
                   $tree-&gt;get_annotate_revision_descs($filename);

           $lines  is arrayref that contains all <u>filepath</u> lines with no end-of-line; $line_revision_desc_indexes
           is arrayref of the same length that contains indexes  to  the  $revision_descs  arrayref.  Note  that
           $revision_descs  is  the  same  returned  in the scalar context, it is similar to the one returned by
           <b>get_history_revision_descs</b>, but possibly contains less elements, since some revisions  only  modified
           metadata,  or only modified lines that were modified by other revisions afterward, all such revisions
           are not included.

           If some lines can't be annotated (usually, because  the  history  was  cut),  then  the  corresonding
           $line_revision_desc_indexes elements are undefined.

           <u>%args</u>  accepts:  flags <u>no_continuation</u> and <u>one_version</u>, and <u>callback</u> to filter a revision description
           before it is collected.

           The default callback is effectivelly:

               sub {
                   my ($revision_desc, $log) = @_;
                   return $revision_desc;
               }

           The <u>%args</u> flags and assigning to $_[0] in callback have the same meaning as in <b>get_ancestry_logs</b>  and
           <b>get_history_revision_descs</b>.

           Additionally,  <u>prefetch_callback</u>  is  supported.  If given, it is called before fetching a changeset,
           with two arguments: revision, and filename to look at the patch of which.

           More <u>%args</u> keys are <u>linenums</u> (either string or arrayref or hashref), <u>match_re</u> (regular expression  to
           filter  lines).  And flags <u>highlight</u> (syntax highlight lines using markup), <u>full_history</u> (include all
           file history revision even those that didn't add the current file lines).

       <b>clear_cache</b> [key ..]
           For performance reasons, some method results are cached (memoized  in  fact).   Use  this  method  to
           explicitly request this cache to be cleared.

           By  default  all  cached  keys  are  cleared; <u>key</u> may be one of the strings 'missing_revision_descs',
           'missing_revisions'.

       <b>add</b> [{ <u>options</u> }] <u>files</u> <u>...</u>
           Add exlicit inventory ids for <u>files</u>. A specific inventory id may be passed via the <u>options</u> hash  with
           the key "id".

       <b>delete</b> <u>files</u> <u>...</u>
           Delete explicit inventory ids for <u>files</u>.

       <b>move</b> <u>old_file</u> <u>new_file</u>
           Move exlicit file id for <u>old_file</u> to <u>new_file</u>.

       <b>get_file_diff</b> <u>file</u>
           Get modifications for <u>file</u> as unified diff.

       <b>make_log</b>
           Create a new commit log, if it does not yet exist. Returns the filename.

       <b>import</b> [{ <u>options</u> }] [<u>version</u>]
           Similar to 'tla import'.

       <b>commit</b> [{ <u>options</u> }] [<u>version</u>]
           Commit changes in tree.

           Note, <u>version</u> argument is not supported in newer baz versions.

           Optional file limits may be passed using <u>files</u> arrayref in <u>options</u>.

</pre><h4><b>BUGS</b></h4><pre>
       Awaiting for your reports.

</pre><h4><b>AUTHORS</b></h4><pre>
       Mikhael Goikhman (<a href="mailto:migo@homemail.com--Perl-GPL">migo@homemail.com--Perl-GPL</a>/arch-perl--devel).

       Enno Cramer (<a href="mailto:uebergeek@web.de--2003">uebergeek@web.de--2003</a>/arch-perl--devel).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For more information, see tla, Arch::Log, Arch::Inventory, Arch::Changes, Arch::Util, Arch::Name.

perl v5.20.2                                       2005-11-14                                    <u>Arch::<a href="../man3pm/Tree.3pm.html">Tree</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>