<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arch::Util - Arch utility functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libarch-perl">libarch-perl_0.5.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Arch::Util - Arch utility functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Arch::Util qw(run_tla load_file save_file setup_config_dir);

           my $abrowse_output = run_tla('abrowse --summary --date --creator');
           my ($full_version) = run_tla('tree-version');
           my @full_revisions = run_tla('logs', '-r', '-f');

           my $cfg_dir = setup_config_dir(undef, "archipelago");
           my $content = load_file("$cfg_dir/versions.cfg");
           $content =~ s/^last_version = .*/last_version = $full_version/m;
           save_file("$cfg_dir/versions.cfg", $content);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A set of helper functions suitable for GNU Arch related projects in Perl.

       Higher (object oriented) levels of Arch/Perl library make use of these helper functions.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       The following functions are available:

       <b>run_tla</b>, <b>run_cmd</b>, <b>run_pipe_from</b>, <b>load_file</b>, <b>save_file</b>, <b>copy_dir</b>, <b>remove_dir</b>, <b>setup_config_dir</b>,
       <b>standardize_date</b>, <b>date2daysago</b>, <b>date2age</b>, <b>parse_creator_email</b>, <b>adjacent_revision</b>.

       The system functions die on errors.

       <b>is_tla_functional</b>
           Verify  whether  the  system  has  a  working  arch  backend  installed  (and  possibly configured by
           environment variables, like TLA or ARCH_BACKEND), needed for this perl library to function.

       <b>run_tla</b> <u>subcommand_with_args</u>
       <b>run_tla</b> <u>subcommand</u> arg ...
           Run the given <u>tla</u> subcommand with optional arguments. Return the tla output in  the  scalar  context,
           and a list of <b>chomp</b>-ed lines in the list context.

       <b>run_cmd</b> <u>shell_command_with_args</u>
       <b>run_cmd</b> <u>shell_command</u> <u>arg</u> ...
           Run  the  given shell command (like <u>wc</u> or <u>awk</u>) with optional arguments.  Return the command output in
           the scalar context, and a list of <b>chomp</b>-ed lines in the list context.

           <b>run_tla</b> is implemented using <b>run_cmd</b>.

       <b>run_pipe_from</b> <u>shell_command_with_args</u>
       <b>run_pipe_from</b> <u>shell_command</u> <u>arg</u> ...
           Run the given shell command (like <u>ls</u> or <u>tar</u>) with optional arguments in the separate process.  Return
           the pipe (file handle) that may be used to read the command output from.

           <b>run_cmd</b> is implemented using <b>run_pipe_from</b>.

       <b>load_file</b> <u>file_name</u>
       <b>load_file</b> <u>file_name</u> <u>scalar_ref</u>
       <b>load_file</b> <u>file_name</u> <u>array_ref</u>
           Load  the  given  <u>file_name</u>.  Return  the  file content if the returning value is expected. As a side
           effect, may modify the <u>scalar_ref</u> or <u>array_ref</u> if given, in the last case all file  lines  are  split
           and <b>chomp</b>-ed.

       <b>save_file</b> <u>file_name</u> <u>content</u>
           Save the given <u>content</u> in the given <u>file_name</u>. The <u>content</u> may be either scalar, scalar ref, or array
           ref (see <b>load_file</b>).

       <b>copy_dir</b> <u>dir1</u> <u>dir2</u>
           Copy <u>dir1</u> to <u>dir2</u> recursivelly, preserving as many attributes as possible.

       <b>remove_dir</b> <u>dir</u> ..
           Remove <u>dir</u> (or dirs) recusivelly. Please be careful.

       <b>setup_config_dir</b>
       <b>setup_config_dir</b> <u>dir</u>
       <b>setup_config_dir</b> <u>dir</u> <u>subdir</u> ...
           Create  (if needed) the configuration <u>dir</u> that defaults to either $ARCH_MAGIC_DIR or <u><a href="file:~/.arch-magic">~/.arch-magic</a></u> or
           <u>/tmp/.arch-magic</u> if $HOME is unset.

           If one or more consecutive <u>subdir</u> given, repeat the same procedure for the  sub-directory  (including
           creating and diagnostics if needed).

           Return a name of the existing directory (including sub-directories if any).

       <b>standardize_date</b> <u>default_unix_date_string</u>
           Try to convert the given date string to "yyyy-mm-dd HH:MM:SS TMZ".  If failed, the original string is
           returned.

       <b>date2daysago</b> <u>date_string</u>
           Convert a date string to time difference to now in full days.

           In list content, return (num_days_ago, unix_time, timezone_str).

       <b>date2age</b> <u>date_string</u>
           Like  <b>date2daysago</b>,  but return a human readable string, like "5 days" or "-6 weeks" or "7 months" or
           "3 years".

       <b>parse_creator_email</b> <u>my_id</u>
           Try to parse the <u>arch</u> <b>my-id</b> of the patch creator. Return a list of his/her name and email.

       <b>adjacent_revision</b> <u>full_revision</u> <u>offset</u>
           Given the <u>full_revision</u> and positive or negative offset, try to guess the full name of  the  adjacent
           revision.

</pre><h4><b>BUGS</b></h4><pre>
       Awaiting for your reports.

</pre><h4><b>AUTHORS</b></h4><pre>
       Mikhael Goikhman (<a href="mailto:migo@homemail.com--Perl-GPL">migo@homemail.com--Perl-GPL</a>/arch-perl--devel).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For more information, see tla, Arch.

perl v5.20.2                                       2010-03-08                                    <u>Arch::<a href="../man3pm/Util.3pm.html">Util</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>