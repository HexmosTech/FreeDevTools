<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>drag&drop - facilities for handling drag&drop data transfers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/blt-dev">blt-dev_2.5.3+dfsg-8_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       drag&amp;drop - facilities for handling drag&amp;drop data transfers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>drag&amp;drop</b> <b>source</b>
       <b>drag&amp;drop</b> <b>source</b> <u>window</u> ?<u>options</u>?
       <b>drag&amp;drop</b> <b>source</b> <u>window</u> <b>handler</b> ?<u>dataType</u>? ?<u>command</u> <u>arg</u> <u>arg...</u>?

       <b>drag&amp;drop</b> <b>target</b>
       <b>drag&amp;drop</b> <b>target</b> <u>window</u> <b>handler</b> ?<u>dataType</u> <u>command</u> <u>arg</u> <u>arg...</u>?

       <b>drag&amp;drop</b> <b>target</b> <u>window</u> <b>handle</b> <u>dataType</u> ?<u>value</u>?

       <b>drag&amp;drop</b> <b>token</b> <u>window</u>

       <b>drag&amp;drop</b> <b>drag</b> <u>window</u> <u>x</u> <u>y</u>
       <b>drag&amp;drop</b> <b>drop</b> <u>window</u> <u>x</u> <u>y</u>
       <b>drag&amp;drop</b> <b>active</b>
       <b>drag&amp;drop</b> <b>errors</b> ?<u>proc</u>?
       <b>drag&amp;drop</b> <b>location</b> ?<u>x</u> <u>y</u>?
_________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>drag&amp;drop</b>  command provides access to a set of facilities for managing drag-and-drop data transfers.
       Any of the usual Tk widgets can be registered to  participate  in  the  drag-and-drop  process.   Widgets
       registered as a drag&amp;drop <u>source</u> can export data to other widgets registered as a drag&amp;drop <u>target</u>.  Note
       that a particular widget can be registered as a source, as a target, or as both.

       The  drag-and-drop  process  begins  when  the user clicks and holds a mouse button in a source window; a
       token window appears with an icon or message to represent the data being transferred.  As the user  moves
       the  mouse  pointer,  the  token  window follows along, acting as a movable packet of data.  Whenever the
       mouse pointer falls on a valid target window, the border of the token  window  is  changed  to  a  raised
       (active)  state.   When  the mouse button is released over the target window, a Tcl routine is invoked to
       send the data to the desired application, and the target window is asked to "handle" the data.   If  this
       communication  process  fails,  a  rejection symbol (a circle with a line through it) is displayed on the
       token window to indicate failure.

       The details of the communication process are fully configurable by the  application  developer.   In  the
       simplest  case,  the  value  that  is sent to the target window is a simple string.  The target window is
       simply asked to "handle" that string value.  In general, the source window can have a  special  "handler"
       procedure  to  transfer  a  particular data type by issuing a series of "send" commands.  After this, the
       target window is again asked to "handle" the result.

       Both sources and targets can have a list of "handlers" for different data types.  As a  token  window  is
       dragged  from  its  source  to  various targets, each target is checked to see if it recognizes a handler
       offered by the source.  If it does, it is treated as a valid target.  Otherwise,  it  is  ignored.   This
       scheme  allows  the  same source to interact with many different kinds of targets.  For example, a source
       for RGB color samples might have "color" and "string" handlers.  This would allow it to communicate  with
       "color" targets (sending RGB data) as well as entry widgets (sending strings of the form "#rrggbb").

       This  introduction  was  presented  as a brief overview of the communication process; further details are
       presented below:

       <b>drag&amp;drop</b> <b>source</b>
              Returns a list of path names for widgets registered as drag&amp;drop sources.  Returns an empty string
              if no widgets have been registered.

       <b>drag&amp;drop</b> <b>source</b> <u>window</u> ?<u>options</u>?
              Registers a new drag&amp;drop source window with the given options, or modifies  the  options  for  an
              existing window:

              Name:     <b>buttonBinding</b>
              Class:    <b>ButtonBinding</b>
              Switch:   <b>-button</b> <u>n</u>

                     Specifies  the  mouse  button (integer 1-5) that will invoke the drag&amp;drop operation on the
                     source window.  This causes the following bindings to be added to the widget:

                     <b>bind</b> <u>win</u> <b>&lt;ButtonPress-</b><u>n</u><b>&gt;</b> <b>{drag&amp;drop</b> <b>drag</b> <b>%W</b> <b>%X</b> <b>%Y}</b>
                     <b>bind</b> <u>win</u> <b>&lt;B</b><u>n</u><b>-Motion&gt;</b> <b>{drag&amp;drop</b> <b>drag</b> <b>%W</b> <b>%X</b> <b>%Y}</b>
                     <b>bind</b> <u>win</u> <b>&lt;ButtonRelease-</b><u>n</u><b>&gt;</b> <b>{drag&amp;drop</b> <b>drop</b> <b>%W</b> <b>%X</b> <b>%Y}</b>

              The default value is button 3.  If the value "0" is specified, then no bindings  are  added;  this
              enables the user to establish bindings manually.

              Name:     <b>packageCommand</b>
              Class:    <b>Command</b>
              Switch:   <b>-packagecmd</b> <u>command</u>

                     Specifies  a  Tcl command used to establish the appearance of the token window at the start
                     of each drag&amp;drop operation.  This command is automatically invoked by the  <b>drag&amp;drop</b>  <b>drag</b>
                     command  whenever  the  token window is about to be mapped for a drag operation.  It should
                     update the appearance of the token window to represent the data that is being moved.

              The following substitutions are made in the <u>command</u> string before it is executed:

                     <b>%t</b>     Replaced with the window path name for the token which  represents  the  data  being
                            dragged.

                     <b>%W</b>     Replaced with the window path name for the drag&amp;drop source.

              The  return  value from the package command represents the data being transferred.  If the package
              command returns an empty string, the drag operation is quietly  aborted.   This  can  be  used  to
              disallow  drag&amp;drop  operations  from  certain  parts  of  a  widget,  if  the  drag  position  is
              inappropriate.

              For example, the following package routine will select an item from a listbox  and  configure  the
              token  window to display the selected string.  It uses the <b>drag&amp;drop</b> <b>location</b> command to determine
              the entry in the listbox that the user has selected and it returns this as the data value:

                     <b>proc</b> <b>package_list_item</b> <b>{lbox</b> <b>token}</b> <b>{</b>
                         <b>set</b> <b>xy</b> <b>[drag&amp;drop</b> <b>location]</b>
                         <b>set</b> <b>y</b>  <b>[expr</b> <b>[lindex</b> <b>$xy</b> <b>1]-[winfo</b> <b>rooty</b> <b>$lbox]]</b>

                         <b>set</b> <b>str</b> <b>[$lbox</b> <b>get</b> <b>[$lbox</b> <b>nearest</b> <b>$y]]</b>
                         <b>$token.value</b> <b>configure</b> <b>-text</b> <b>$str</b>
                         <b>return</b> <b>$str</b>
                     <b>}</b>

              The return value is available later when the source and target communicate.  If the source  has  a
              command  associated  with its data handler, then this value is substituted in place of "%v" in the
              source handler.  Otherwise, it is substituted in place of "%v" in the target handler.

              Name:     <b>rejectBackground</b>
              Class:    <b>Background</b>
              Switch:   <b>-rejectbg</b> <u>color</u>

                     Specifies the color used to draw the background  of  the  rejection  symbol  on  the  token
                     window.   The  rejection  symbol  (a circle with a line through it--the international "no")
                     appears whenever communication fails.

              Name:     <b>rejectForeground</b>
              Class:    <b>Foreground</b>
              Switch:   <b>-rejectfg</b> <u>color</u>

                     Specifies the color used to draw the foreground  of  the  rejection  symbol  on  the  token
                     window.

              Name:     <b>rejectStipple</b>
              Class:    <b>Stipple</b>
              Switch:   <b>-rejectstipple</b> <u>pattern</u>

                     Specifies  a  stipple  pattern  used  to draw the foreground of the rejection symbol on the
                     token window.  Any of the forms acceptable to Tk_GetBitmap can be used.

              Name:     <b>selfTarget</b>
              Class:    <b>SelfTarget</b>
              Switch:   <b>-selftarget</b> <u>boolean</u>

                     If the <u>boolean</u> value is true, and if a source widget is also  registered  as  a  compatible
                     target,  then  the  source  will be able to transmit to itself during drag&amp;drop operations.
                     This is primarily useful for complex sources such as a canvas widget, where  items  may  be
                     moved from place to place within the same widget.  By default, this option is disabled.

              Name:     <b>send</b>
              Class:    <b>Send</b>
              Switch:   <b>-send</b> <u>list</u>

                     Specifies  a  <u>list</u>  of  <u>dataTypes</u>  enabled  for  communication.   Only <u>dataTypes</u> defined by
                     commands of the form "<b>drag&amp;drop</b> <b>source</b> <u>window</u> <b>handler</b> ?<u>dataType</u> ?<u>command</u> <u>arg</u>  <u>arg...</u>?"  are
                     allowed.   This  list  also determines the priority of the various <u>dataTypes</u>.  When a token
                     window is over a potential drag&amp;drop target, this list is searched from start to finish for
                     a <u>dataType</u> that is also recognized by  the  target.   The  first  matching  <u>dataType</u>  found
                     determines the value that will be sent if the token is dropped.  If no matching <u>dataType</u> is
                     found,  then  the  target is incompatible, and is ignored.  By default, this option has the
                     value "all", indicating that all <u>dataTypes</u> should be considered in the order that they were
                     defined for the source.

              Note that this option makes it easy to control a drag&amp;drop source.  Setting the value to an  empty
              string disables the source; setting the value back to "all" restores communication.

              Name:     <b>siteCommand</b>
              Class:    <b>Command</b>
              Switch:   <b>-sitecmd</b> <u>command</u>

                     Specifies  a  Tcl command used to update the appearance of the token window.  If specified,
                     this command is automatically invoked by the <b>drag&amp;drop</b>  <b>drag</b>  command  whenever  the  token
                     window is over a compatible drag&amp;drop target.

              The following substitutions are made in the <u>command</u> string before it is executed:

                     <b>%s</b>     Replaced  with  "1"  if  the  token  window  is  over  a  compatible target, and "0"
                            otherwise.

                     <b>%t</b>     Replaced with the window path name for the token which  represents  the  data  being
                            dragged.

              Regardless  of  this  command, border of the token window will become raised whenever the token is
              over a valid target.  This command can be used to display other visual cues.

              Name:     <b>tokenAnchor</b>
              Class:    <b>Anchor</b>
              Switch:   <b>-tokenanchor</b> <u>anchor</u>

                     Specifies how the token window is positioned relative  to  the  mouse  pointer  coordinates
                     passed  to  the  <b>drag&amp;drop</b> <b>drag</b> command.  Must be one of the values n, s, e, w, center, nw,
                     ne, sw or se.  For example, "nw" means to position  the  token  such  that  its  upper-left
                     corner is at the mouse pointer.  The default value is "center".

              Name:     <b>tokenBackground</b>
              Class:    <b>Background</b>
              Switch:   <b>-tokenbg</b> <u>color</u>

                     Specifies the color used to draw the background of the token window.

              Name:     <b>tokenBorderWidth</b>
              Class:    <b>BorderWidth</b>
              Switch:   <b>-tokenborderwidth</b> <u>size</u>

                     Specifies  the  width in pixels of the border around the token window.  This border becomes
                     raised to indicate when the token is over a compatible drag&amp;drop target  site.   The  value
                     may have any of the forms acceptable to Tk_GetPixels.  The default value is "3".

              Name:     <b>tokenCursor</b>
              Class:    <b>Cursor</b>
              Switch:   <b>-tokencursor</b> <u>cursor</u>

                     Specifies  the  cursor  used  when a token window is active.  The value may have any of the
                     forms acceptable to Tk_GetCursor.  The default value is "center_ptr".

       <b>drag&amp;drop</b> <b>source</b> <u>window</u> <b>handler</b> ?<u>dataType</u>? ?<u>command</u> <u>arg</u> <u>arg...</u>?
              With no extra arguments, this command returns  a  list  of  all  <u>dataType</u>  names  that  have  been
              registered for the source <u>window</u>.  If only the <u>dataType</u> is specified, then the <u>dataType</u> is created
              if  necessary,  and  the  command  associated  with  the  <u>dataType</u>  is  returned.   Otherwise,  it
              concatenates the <u>command</u> and any extra <u>arg</u>  strings,  and  registers  a  new  <u>dataType</u>  with  this
              command.

       The following substitutions are made in the <u>command</u> string before it is executed:

              <b>%i</b>     Replaced with the name of the interpreter for the target application.

              <b>%v</b>     Replaced with the value returned from the "-packagecmd" command.

              <b>%w</b>     Replaced with the window path name for the target window.

       A  typical  source  handler  contains  one  or  more  "send"  commands  which transfer data to the remote
       application.  The target window is then asked to handle the new data.  Whatever value is returned by  the
       source <u>command</u> handler is automatically substituted into the "%v" fields of the target handler.

       This  separation  between  the  transfer  and  the handling of the data is important.  It allows the same
       source handler to transfer data for many different targets, and it allows each of the targets  to  handle
       the  incoming  data  differently.   If  an  error  is  encountered  during the communication process, the
       rejection symbol is posted on the token window to indicate failure.

       <b>drag&amp;drop</b> <b>target</b>
              Returns a list of path names for widgets registered as drag&amp;drop targets.  Returns an empty string
              if no widgets have been registered.

       <b>drag&amp;drop</b> <b>target</b> <u>window</u> <b>handler</b> ?<u>dataType</u> <u>command</u> <u>arg</u> <u>arg...</u>?
              Registers a new drag&amp;drop target window with a given handler, or  modifies  the  handlers  for  an
              existing window.  If no <u>dataType</u> is specified, this command returns the current list of recognized
              <u>dataType</u>  strings.   Each  <u>dataType</u>  is  a  symbolic  name  representing  a  form of data, and the
              corresponding <u>command</u> is a Tcl command that specifies how the target will make use  of  the  data.
              This command is invoked indirectly after a source has transferred data to a target application.

       The following substitutions are made in the <u>command</u> string before it is executed:

              <b>%v</b>     In  the  simplest  case, the source window does not have a handler command for the selected
                     <u>dataType</u>, and this field is replaced with the result from the "-packagecmd" command.   When
                     the  source  does  have  a  handler  command,  the result from the "-packagecmd" command is
                     substituted into its "%v" field, and the result from this command is substituted into  this
                     field in the target command.

              <b>%W</b>     Replaced with the window path name for the target window.

       <b>drag&amp;drop</b> <b>target</b> <u>window</u> handle <u>dataType</u> ?<u>value</u>?
              Searches  for  the  given  <u>dataType</u>  name among the handlers registered for the target <u>window</u>, and
              invokes the appropriate <u>command</u>.  If a <u>value</u> is specified, it is substituted into any "%v"  fields
              in the handler command associated with the <u>dataType</u>.  If the <u>dataType</u> name is not recognized, this
              command  returns  an  error.  This command is invoked automatically by the drag&amp;drop facility when
              data is being transferred from a source to a target.

       <b>drag&amp;drop</b> <b>token</b> <u>window</u>
              Returns the token window associated with a drag&amp;drop source <u>window</u>.  The token window is  used  to
              represent  data  as  it  is  being  dragged  from  the source to a target.  When a source is first
              established, its token window must be filled  with  widgets  to  display  the  source  data.   For
              example,

              <b>drag&amp;drop</b> <b>source</b> <b>.foo</b>

              <b>set</b> <b>win</b> <b>[drag&amp;drop</b> <b>token</b> <b>.foo]</b>
              <b>label</b> <b>$win.label</b> <b>-text</b> <b>"Data"</b>
              <b>pack</b> <b>$win.label</b>

       <b>drag&amp;drop</b> <b>drag</b> <u>window</u> <u>x</u> <u>y</u>
              Marks  the  start  of (or movement during) a drag&amp;drop operation.  If the token window is unmapped
              when this command is invoked, then the <b>-packagecmd</b> for the source <u>window</u>  is  executed.   If  this
              command  is  successful  and returns a non-null string, the token window is mapped.  On subsequent
              calls, the token window is moved to the new <u>x</u> <u>y</u>  location.   Unless  the  "<b>-button</b>  <b>0</b>"  option  is
              specified  for  the source, this command is automatically bound to &lt;ButtonPress-<u>n</u>&gt; and &lt;B<u>n</u>-Motion&gt;
              events for "<b>-button</b> <u>n</u>" of the source widget.

       <b>drag&amp;drop</b> <b>drop</b> <u>window</u> <u>x</u> <u>y</u>
              Marks the end of a drag&amp;drop operation.  If the mouse pointer is over a compatible target  window,
              then  the appropriate send handler for the first compatible <u>dataType</u> is invoked to handle the data
              transfer.  If the data transfer is successful, then the token window  is  unmapped;  otherwise,  a
              rejection  symbol  is  drawn  on the token window, and the window is unmapped after a small delay.
              Unless the "<b>-button</b> <b>0</b>" option is specified for the source, this command is automatically bound  to
              the &lt;ButtonRelease-<u>n</u>&gt; event for "<b>-button</b> <u>n</u>" of the source widget.

       <b>drag&amp;drop</b> <b>active</b>
              Returns  "1"  if  a  drag&amp;drop operation is in progress, and "0" otherwise.  A drag&amp;drop operation
              officially starts after the package command has been executed successfully,  and  ends  after  the
              send handler has been executed (successfully or otherwise).

       <b>drag&amp;drop</b> <b>errors</b> ?<u>proc</u>?
              Specifies  a Tcl <u>proc</u> used to handle errors encountered during drag&amp;drop operations.  If a <u>proc</u> is
              not specified, this command returns the current error handler.  By default, all errors are sent to
              the usual <b>tkerror</b> command, and therefore appear in a dialog box to the  user.   This  behavior  is
              quite  useful  when  debugging  communication  protocols,  but  may not be desirable in a finished
              application.  Errors can be suppressed entirely (leaving the rejection symbol as  the  only  error
              indicator) by specifying a null string in place of the <u>proc</u> name.

       <b>drag&amp;drop</b> <b>location</b> ?<u>x</u> <u>y</u>?
              Used to set or query the pointer location during a drag&amp;drop operation.  The <u>x</u> <u>y</u> arguments specify
              the  current  location;  if  these arguments are missing, then the last reported (x,y) location is
              returned as a list with two elements.  This command is issued automatically within  the  <b>drag&amp;drop</b>
              <b>drag</b> and <b>drag&amp;drop</b> <b>drop</b> commands, to keep track of pointer movement.

</pre><h4><b>KEYWORDS</b></h4><pre>
       drag&amp;drop, send, bind, widget

BLT                                                    2.5                                  <u>blt::drag&amp;<a href="../man3tcl/drop.3tcl.html">drop</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>