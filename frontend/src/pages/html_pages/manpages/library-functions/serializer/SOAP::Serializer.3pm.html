<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOAP::Serializer - the means by which the toolkit manages the expression of data as XML</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsoap-lite-perl">libsoap-lite-perl_1.27-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SOAP::Serializer - the means by which the toolkit manages the expression of data as XML

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The SOAP::Serializer class is the means by which the toolkit manages the expression of data as XML. The
       object that a SOAP::Lite instance uses by default is generally enough for the task, with no need for the
       application to create its own. The main purpose of this class is to provide a place for applications to
       extend the serializer by defining additional methods for handling new datatypes.

</pre><h4><b>METHODS</b></h4><pre>
       new(optional key/value pairs)
               $serialize = SOAP::Serializer-&gt;new( );

           This is the constructor method for the class. In addition to creating a basic object and initializing
           it  with  default  values,  the  constructor  can also take names and values for most of the accessor
           methods that the class supports.

       envelope(method, data arguments)
               $serialize-&gt;envelope(fault =&gt; $fault_obj);

           Provides the core purpose for the SOAP::Serializer class. It creates the full SOAP envelope based  on
           the  input  passed  in  to  it. The data arguments passed in the list of parameters to the method are
           divided into two sublists: any parameters that are SOAP::Header objects or derivatives of go into one
           list, while the remainder go into the other. The nonheader objects are used as the  content  for  the
           message  body, with the body itself being largely dependent on the value of the first argument in the
           list. This argument is expected to be a string and should be one of the following:

       context
               $serialize-&gt;context-&gt;packager();

           This provides access to the calling context of "SOAP::Serializer". In a client side context the often
           means a reference to an instance of SOAP::Lite. In a server side context this means a reference to  a
           SOAP::Server instance.

           method
               The envelope is being created to encapsulate a RPC-style method call.

           response
               The message being created is that of a response stemming from a RPC-style method call.

           fault
               For this specifier, the envelope being created is to transmit a fault.

           freeform
               This  identifier is used as a general-case encoding style for messages that don't fit into any of
               the previous cases. The arguments are encoded into the envelope's Body tag without  any  sort  of
               context sensitivity.

           Any value other than these four results in an error.

       envprefix(optional value)
               $serialize-&gt;envprefix('env');

           Gets or sets the prefix that labels the SOAP envelope namespace. This defaults to SOAP-ENV.

       encprefix(optional value)
               $serialize-&gt;envprefix('enc');

           Gets or sets the prefix that labels the SOAP encoding namespace. Defaults to SOAP-ENC.

       soapversion(optional value)
               $serialize-&gt;soapversion('1.2');

           If  no  parameter  is  given, returns the current version of SOAP that is being used as the basis for
           serializing messages. If a parameter is given, attempts to set that as  the  version  of  SOAP  being
           used.  The value should be either 1.1 or 1.2. When the SOAP version is being set, the package selects
           new URNs for envelope and encoding spaces and also calls the xmlschema method to set the  appropriate
           schema definition.

       xmlschema(optional value)
               $serialize-&gt;xmlschema($xml_schema_1999);

           Gets  or  sets the URN for the schema being used to express the structure of the XML generated by the
           serializer. If setting the value, the input must be the full URN for the new schema  and  is  checked
           against the list of known SOAP schemas.

       register_ns
           The  register_ns  subroutine  allows users to register a global namespace with the SOAP Envelope. The
           first parameter is the namespace, the second parameter to this subroutine is an optional prefix. If a
           prefix is not provided, one will be generated automatically for you. All namespaces  registered  with
           the serializer get declared in the &lt;soap:Envelope /&gt; element.

       find_prefix
           The  find_prefix  subroutine takes a namespace as a parameter and returns the assigned prefix to that
           namespace. This eliminates the need to declare and redeclare  namespaces  within  an  envelope.  This
           subroutine  is  especially  helpful  in  determining  the  proper  prefix  when assigning a type to a
           SOAP::Data element. A good example of how this might be used is as follows:

               SOAP::Data-&gt;name("foo" =&gt; $inputParams{'foo'})
                  -&gt;type($client-&gt;serializer-&gt;find_prefix('urn:Foo').':Foo');

</pre><h4><b>CUSTOM</b> <b>DATA</b> <b>TYPES</b></h4><pre>
       When serializing an object, or blessed hash reference, into XML, "SOAP::Serializer" first checks  to  see
       if  a  subroutine  has  been  defined  for  the corresponding class name. For example, in the code below,
       "SOAP::Serializer" will check to see if a subroutine called "as_MyModule__MyPackage" has been defined. If
       so, then it will pass $foo to that subroutine along with other data known about the "SOAP::Data"  element
       being encoded.

          $foo = MyModule::MyPackage-&gt;new;
          my $client = SOAP::Lite
             -&gt;uri($NS)
             -&gt;proxy($HOST);
          $som = $client-&gt;someMethod(SOAP::Data-&gt;name("foo" =&gt; $foo));

</pre><h4><b>as_TypeName</b> <b>SUBROUTINE</b> <b>REQUIREMENTS</b></h4><pre>
       Naming Convention
           The  subroutine  should  always  be prepended with "as_" followed by the type's name. The type's name
           must have all colons (':') substituted with an underscore ('_').

       Input
           The input to "as_TypeName" will have at least one parameter, and at most four parameters.  The  first
           parameter will always be the value or the object to be encoded. The following three parameters depend
           upon the context of the value/object being encoded.

           If  the  value/object being encoded was part of a "SOAP::Data" object (as in the above example), then
           the second, third and fourth parameter will be the "SOAP::Data" element's name, type,  and  attribute
           set  respectively. If on the other hand, the value/object being encoded is <u>not</u> part of a "SOAP::Data"
           object, as in the code below:

              $foo = MyModule::MyPackage-&gt;new;
              my $client = SOAP::Lite
                 -&gt;uri($NS)
                 -&gt;proxy($HOST);
              $som = $client-&gt;someMethod($foo);

           Then the second and third parameters will be the class name of the value/object being  encoded  (e.g.
           "MyModule::MyPackage" in the example above), and the fourth parameter will be an empty hash.

       Output
           The  encoding  subroutine  must  return  an  array  containing three elements: 1) the name of the XML
           element, 2) a hash containing the attributes to be placed into the element, and 3) the value  of  the
           element.

</pre><h4><b>AUTOTYPING</b></h4><pre>
       When  the  type  of  an element has not been declared explicitly, SOAP::Lite must "guess" at the object's
       type. That is due to the fact that the only form of introspection that Perl provides (through the use  of
       the  "ref"  subroutine)  does not provide enough information to "SOAP::Serializer" to allow SOAP::Lite to
       determine the exact type of an element being serialized.

       To work around this limitation,  the  "SOAP::Serializer::typelookup"  hash  was  created.  This  hash  is
       populated  with  all  the  data  types  that  the  current  "SOAP::Serializer" can auto detect. Users and
       developers are free to modify the contents of this hash allowing them to register new data types with the
       system.

       When "SOAP::Serializer" is asked to encode an object into XML,  it  goes  through  the  following  steps.
       First, "SOAP::Serializer" checks to see if a type has been explicitly stated for the current object. If a
       type  has  been  provided "SOAP::Serializer" checks to see if an "as_TypeName" subroutine as been defined
       for that type. If such a subroutine exists, then  "SOAP::Serializer"  passes  the  object  to  it  to  be
       encoded.  If  the  subroutine  does not exist, or the type has not been provided, then "SOAP::Serializer"
       must attempt to "guess" the type of the object being serialized.

       To do so, "SOAP::Serializer" runs in sequence a set of tests stored in the "SOAP::Serializer::typelookup"
       hash. "SOAP::Serializer" continues to run each test until one of the tests returns true, indicating  that
       the  type  of  the  object  has  been  detected.  When  the  type  of  the object has been detected, then
       "SOAP::Serializer" passes the object to the encoding subroutine that corresponds with the test  that  was
       passed.  If  all  the tests fail, and the type was not determined, then "SOAP::Serializer" will as a last
       resort encode the object based on one of the four basic data types known to Perl: REF, SCALAR, ARRAY  and
       HASH.

       The following table contains the set of data types detectable by "SOAP::Lite" by default and the order in
       which their corresponding test subroutine will be run, according to their precedence value.

         Table 1 - Autotyping Precedence

         TYPENAME    PRECEDENCE VALUE
         ----------------------------
         base64      10
         int         20
         long        25
         float       30
         gMonth      35
         gDay        40
         gYear       45
         gMonthDay   50
         gYearMonth  55
         date        60
         time        70
         dateTime    75
         duration    80
         boolean     90
         anyURI      95
         string      100

   <b>REGISTERING</b> <b>A</b> <b>NEW</b> <b>DATA</b> <b>TYPE</b>
       To  register  a new data type that can be automatically detected by "SOAP::Lite" and then serialized into
       XML, the developer must provide the following four things:

       •   The name of the new data type.

       •   A subroutine that is capable of detecting whether a value passed to it is of the  corresponding  data
           type.

       •   A  number  representing  the  test  subroutine's  precedence  relative  to  all the other types' test
           subroutinestypes. See <u>Table</u> <u>1</u> <u>-</u> <u>Autotyping</u> <u>Precedence</u>.

       •   A subroutine that is capable of  providing  "SOAP::Serializer"  with  the  information  necessary  to
           serialize an object of the corresponding data type into XML.

       <u>EXAMPLE</u> <u>1</u>

       If,  for  example,  you wish to create a new datatype called "uriReference" for which you would like Perl
       values to be automatically detected and serialized into, then you follow these steps.

       <b>Step</b> <b>1:</b> <b>Write</b> <b>a</b> <b>Test</b> <b>Subroutine</b>

       The test subroutine will have passed to  it  by  "SOAP::Serializer"  a  value  to  be  tested.  The  test
       subroutine  must  return 1 if the value passed to it is of the corresponding type, or else it must return
       0.

           sub SOAP::Serializer::uriReferenceTest {
             my ($value) = @_;
             return 1 if ($value =~ m!^http://!);
             return 0;
           }

       <b>Step</b> <b>2:</b> <b>Write</b> <b>an</b> <b>Encoding</b> <b>Subroutine</b>

       The encoding subroutine provides "SOAP::Serializer" with the data necessary to encode the value passed to
       it into XML. The encoding subroutine name's should be of the following format: "as_"&lt;Type Name&gt;.

       The encoding subroutine will have passed to it by "SOAP::Serializer" four parameters:  the  value  to  be
       encoded,  the  name  of  the  element being encoded, the assumed type of the element being encoded, and a
       reference to a hash containing the attributes of the element being encoded. The encoding subroutine  must
       return an array representing the encoded datatype. "SOAP::Serializer" will use the contents of this array
       to  generate  the  corresponding  XML  of the value being encoded, or serialized. This array contains the
       following 3 elements: the name of the XML element, a hash containing the attributes to be placed into the
       element, and the value of the element.

         sub SOAP::Serializer::as_uriReference {
           my $self = shift;
           my($value, $name, $type, $attr) = @_;
           return [$name, {'xsi:type' =&gt; 'xsd:uriReference', %$attr}, $value];
         }

       <b>Step</b> <b>3:</b> <b>Register</b> <b>the</b> <b>New</b> <b>Data</b> <b>Type</b>

       To register the new data type, simply add the type to the "SOAP::Serializer::typelookup" hash  using  the
       type name as the key, and an array containing the precedence value, the test subroutine, and the encoding
       subroutine.

         $s-&gt;typelookup-&gt;{uriReference}
             = [11, \&amp;uriReferenceTest, 'as_uriReference'];

       <u>Tip:</u>  <u>As</u> <u>a</u> <u>short</u> <u>hand,</u> <u>you</u> <u>could</u> <u>just</u> <u>as</u> <u>easily</u> <u>use</u> <u>an</u> <u>anonymous</u> <u>test</u> <u>subroutine</u> <u>when</u> <u>registering</u> <u>the</u> <u>new</u>
       <u>datatype</u> <u>in</u> <u>place</u> <u>of</u> <u>the</u> <u>"urlReferenceTest"</u> <u>subroutine</u> <u>above.</u> <u>For</u> <u>example:</u>

         $s-&gt;typelookup-&gt;{uriReference}
             = [11, sub { $_[0] =~ m!^http://! }, 'as_uriReference'];

       Once complete, "SOAP::Serializer" will be able to serialize the following "SOAP::Data" object into XML:

         $elem = SOAP::Data-&gt;name("someUri" =&gt; '<a href="http://yahoo.com">http://yahoo.com</a>')-&gt;type('uriReference');

       "SOAP::Serializer" will also be able to automatically  determine  and  serialize  the  following  untyped
       "SOAP::Data" object into XML:

         $elem = SOAP::Data-&gt;name("someUri" =&gt; '<a href="http://yahoo.com">http://yahoo.com</a>');

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       Special  thanks  to  O'Reilly  publishing  which  has  graciously  allowed  SOAP::Lite  to  republish and
       redistribute large excerpts from <u>Programming</u> <u>Web</u> <u>Services</u> <u>with</u>  <u>Perl</u>,  mainly  the  SOAP::Lite  reference
       found in Appendix B.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2000-2004 Paul Kulchenko. All rights reserved.

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>AUTHORS</b></h4><pre>
       Paul Kulchenko (<a href="mailto:paulclinger@yahoo.com">paulclinger@yahoo.com</a>)

       Randy J. Ray (<a href="mailto:rjray@blackperl.com">rjray@blackperl.com</a>)

       Byrne Reese (<a href="mailto:byrne@majordojo.com">byrne@majordojo.com</a>)

perl v5.36.0                                       2023-03-01                              <u>SOAP::<a href="../man3pm/Serializer.3pm.html">Serializer</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>