<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dancer::Serializer::Mutable - Serialize and deserialize content using the appropriate HTTP header</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdancer-perl">libdancer-perl_1.3521+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Dancer::Serializer::Mutable - Serialize and deserialize content using the appropriate HTTP header

</pre><h4><b>VERSION</b></h4><pre>
       version 1.3521

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # in config.yml
           serializer: Mutable

           # in the app
           put '/something' =&gt; sub {
               # deserialized from request
               my $name = param( 'name' );

               ...

               # will be serialized to the most
               # fitting format
               return { message =&gt; "user $name added" };
           };

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This serializer will try find the best (de)serializer for a given request.  For this, it will pick the
       first content type found from the following list and use its related serializer.

       •   The <b>content_type</b> from the request headers

       •   the <b>content_type</b> parameter from the URL

       •   the <b>accept</b> from the request headers

       •   The default is <b>application/json</b>

       The content-type/serializer mapping that "Dancer::Serializer::Mutable" uses is

           serializer               | content types
           ----------------------------------------------------------
           Dancer::Serializer::YAML | text/x-yaml, text/html
           Dancer::Serializer::XML  | text/xml
           Dancer::Serializer::JSON | text/x-json, application/json

</pre><h4><b>EXPORTABLE</b> <b>FUNCTIONS</b></h4><pre>
   <b>template_or_serialize(</b> <b>$template,</b> <b>$data,</b> <b>$options</b> <b>)</b>
       For  instances  where  you  want  to render a template for normal browser requests, and return serialized
       content for AJAX calls.

       If the requested content-type is <u>text/html</u>, "template_or_serialize" returns the rendered  template,  else
       it returns <u>$data</u> unmodified (which will then be serialized as usual).

       "template_or_serialize" is not exported by default.

           use Dancer::Serializer::Mutable qw/ template_or_serialize /;

           get '/greetings' =&gt; sub {
               ...;

               return template_or_serialize 'greetings' =&gt; {
                   title =&gt; $title,
                   name  =&gt; $name,
               };
           };

   <b>INTERNAL</b> <b>METHODS</b>
       The following methods are used internally by "Dancer" and are not made accessible via the DSL.

   <b>serialize</b>
       Serialize  a  data  structure.  The  format  it is serialized to is determined automatically as described
       above. It can be one of YAML, XML, JSON, defaulting to JSON if  there's  no  clear  preference  from  the
       request.

   <b>deserialize</b>
       Deserialize  the  provided serialized data to a data structure.  The type of serialization format depends
       on the request's content-type. For now, it can be one of YAML, XML, JSON.

   <b>content_type</b>
       Returns the content-type that was used during the last "serialize" / "deserialize" call.  <b>WARNING</b>  :  you
       must  call  "serialize" / "deserialize" before calling "content_type". Otherwise the return value will be
       "undef".

</pre><h4><b>AUTHOR</b></h4><pre>
       Dancer Core Developers

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2010 by Alexis Sukrieh.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.36.0                                       2023-02-10                   <u>Dancer::Serializer::<a href="../man3pm/Mutable.3pm.html">Mutable</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>