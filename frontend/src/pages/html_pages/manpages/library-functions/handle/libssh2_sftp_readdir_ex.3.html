<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libssh2_sftp_readdir_ex - read directory data from an SFTP handle</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssh2-1-dev">libssh2-1-dev_1.11.1-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libssh2_sftp_readdir_ex - read directory data from an SFTP handle

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;libssh2.h&gt;
       #include &lt;libssh2_sftp.h&gt;

       int
       libssh2_sftp_readdir_ex(LIBSSH2_SFTP_HANDLE *handle,
                               char *buffer, size_t buffer_maxlen,
                               char *longentry, size_t longentry_maxlen,
                               LIBSSH2_SFTP_ATTRIBUTES *attrs);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Reads  a  block of data from a LIBSSH2_SFTP_HANDLE and returns file entry information for the next entry,
       if any.

       <u>handle</u> - is the SFTP File Handle as returned by <b><a href="../man3/libssh2_sftp_open_ex.3.html">libssh2_sftp_open_ex</a>(3)</b>

       <u>buffer</u> - is a pointer to a pre-allocated buffer of at least <u>buffer_maxlen</u> bytes to read data into.

       <u>buffer_maxlen</u> - is the length of buffer in bytes. If the length of the filename is longer than the  space
       provided by buffer_maxlen it will be truncated to fit.

       <u>longentry</u>  - is a pointer to a pre-allocated buffer of at least <u>longentry_maxlen</u> bytes to read data into.
       The format of the `longname' field is unspecified by SFTP protocol. It MUST be suitable for  use  in  the
       output of a directory listing command (in fact, the recommended operation for a directory listing command
       is to display this data).

       <u>longentry_maxlen</u>  -  is  the  length  of longentry in bytes. If the length of the full directory entry is
       longer than the space provided by <u>longentry_maxlen</u> it will be truncated to fit.

       <u>attrs</u> - is a pointer to LIBSSH2_SFTP_ATTRIBUTES storage to populate statbuf style data into.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Number of bytes actually populated into buffer (not  counting  the  terminating  zero),  or  negative  on
       failure.  It  returns LIBSSH2_ERROR_EAGAIN when it would otherwise block. While LIBSSH2_ERROR_EAGAIN is a
       negative number, it is not really a failure per se.

</pre><h4><b>BUG</b></h4><pre>
       Passing in a too small buffer for 'buffer' or 'longentry' when receiving data  only  results  in  libssh2
       1.2.7  or  earlier to not copy the entire data amount, and it is not possible for the application to tell
       when it happens!

</pre><h4><b>ERRORS</b></h4><pre>
       <u>LIBSSH2_ERROR_ALLOC</u> - An internal memory allocation call failed.

       <u>LIBSSH2_ERROR_SOCKET_SEND</u> - Unable to send data on socket.

       <u>LIBSSH2_ERROR_SOCKET_TIMEOUT</u> -

       <u>LIBSSH2_ERROR_SFTP_PROTOCOL</u> - An invalid SFTP protocol response was received on the socket,  or  an  SFTP
       operation caused an errorcode to be returned by the server.

       From  1.2.8,  LIBSSH2_ERROR_BUFFER_TOO_SMALL  is  returned  if  any  of the given 'buffer' or 'longentry'
       buffers are too small to fit the requested object name.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libssh2_sftp_open_ex.3.html">libssh2_sftp_open_ex</a>(3),</b> <b><a href="../man3/libssh2_sftp_close_handle.3.html">libssh2_sftp_close_handle</a>(3)</b>

libssh2 0.15                                       1 Jun 2007                         <u><a href="../man3/libssh2_sftp_readdir_ex.3.html">libssh2_sftp_readdir_ex</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>