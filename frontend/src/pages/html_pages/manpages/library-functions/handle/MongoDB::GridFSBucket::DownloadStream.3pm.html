<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB::GridFSBucket::DownloadStream - File handle abstraction for downloading</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongodb-perl">libmongodb-perl_2.2.2-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MongoDB::GridFSBucket::DownloadStream - File handle abstraction for downloading

</pre><h4><b>VERSION</b></h4><pre>
       version v2.2.2

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # OO API
           $stream = $bucket-&gt;open_download_stream($file_id)
           while ( my $line = $stream-&gt;readline ) {
               ...
           }

           # Tied-handle API
           $fh = $stream-&gt;fh;
           while ( my $line = &lt;$fh&gt; ) {
               ...
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class provides a file abstraction for downloading.  You can stream data from an object of this class
       using method calls or a tied-handle interface.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>file_doc</b>
       The file document for the file to be downloaded.

       Valid file documents typically include the following fields:

       •   _id – a unique ID for this document, typically a BSON::OID object. Legacy GridFS files may store this
           value as a different type.

       •   length – the length of this stored file, in bytes

       •   chunkSize – the size, in bytes, of each full data chunk of this file.

       •   uploadDate  –  the  date  and time this file was added to GridFS, stored as a BSON datetime value and
           inflated per the bucket's bson_codec attribute.

       •   filename – the name of this stored file; this does not need to be unique

       •   metadata – any additional application-specific data

       •   md5 – DEPRECATED

       •   contentType – DEPRECATED

       •   aliases – DEPRECATED

</pre><h4><b>METHODS</b></h4><pre>
   <b>fh</b>
           my $fh = $downloadstream-&gt;fh;
           while ( &lt;$fh&gt; ) {
               say($_);
           }

       Returns a new Perl file handle tied to this instance of DownloadStream that can be operated on  with  the
       built-in functions "read", "readline", "getc", "eof", "fileno" and "close".

       <b>Important</b> <b>notes</b>:

       Allowing  one  of  these tied filehandles to fall out of scope will NOT cause close to be called. This is
       due to the way tied file handles are implemented in Perl.  For close to be called  implicitly,  all  tied
       filehandles and the original object must go out of scope.

       Each  file  handle  retrieved this way is tied back to the same object, so calling close on multiple tied
       file handles and/or the original object will have the same effect as calling close on the original object
       multiple times.

   <b>close</b>
           $stream-&gt;close

       Works like the builtin "close".

       <b>Important</b> <b>notes:</b>

       •   Calling close will also cause any tied file handles created for the stream to also close.

       •   "close" will be automatically called when a stream object is destroyed.

       •   Calling "close" repeatedly will warn.

   <b>eof</b>
           if ( $stream-&gt;eof() ) { ... }

       Works like the builtin "eof".

   <b>fileno</b>
           if ( $stream-&gt;fileno() ) { ... }

       Works like the builtin "fileno", but it returns -1 if the stream is open and undef if closed.

   <b>getc</b>
           $char = $stream-&gt;getc();

       Works like the builtin "getc".

   <b>read</b>
           $data = $stream-&gt;read($buf, $length, $offset)

       Works like the builtin "read".

   <b>readline</b>
           $line  = $stream-&gt;readline();
           @lines = $stream-&gt;readline();

       Works like the builtin "readline".

</pre><h4><b>AUTHORS</b></h4><pre>
       •   David Golden &lt;<a href="mailto:david@mongodb.com">david@mongodb.com</a>&gt;

       •   Rassi &lt;<a href="mailto:rassi@mongodb.com">rassi@mongodb.com</a>&gt;

       •   Mike Friedman &lt;<a href="mailto:friedo@friedo.com">friedo@friedo.com</a>&gt;

       •   Kristina Chodorow &lt;<a href="mailto:k.chodorow@gmail.com">k.chodorow@gmail.com</a>&gt;

       •   Florian Ragwitz &lt;<a href="mailto:rafl@debian.org">rafl@debian.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2020 by MongoDB, Inc.

       This is free software, licensed under:

         The Apache License, Version 2.0, January 2004

perl v5.40.1                                       2025-04-03              <u>MongoDB::GridF...:<a href="../man3pm/DownloadStream.3pm.html">DownloadStream</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>