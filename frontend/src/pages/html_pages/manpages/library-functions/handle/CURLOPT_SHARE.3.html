<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_SHARE - share handle to use</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_SHARE - share handle to use

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_SHARE, CURLSH *share);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass  a  <u>share</u>  handle  as  a  parameter.  The  share handle must have been created by a previous call to
       <u><a href="../man3/curl_share_init.3.html">curl_share_init</a>(3)</u>. Setting this option, makes this curl handle use  the  data  from  the  shared  handle
       instead  of  keeping  the  data  to  itself. This enables several curl handles to share data. If the curl
       handles are used simultaneously in multiple threads, you <b>MUST</b>  use  the  locking  methods  in  the  share
       handle. See <u><a href="../man3/curl_share_setopt.3.html">curl_share_setopt</a>(3)</u> for details.

       If  you  add  a  share  that is set to share cookies, your easy handle uses that cookie cache and get the
       cookie engine enabled. If you stop sharing an object that was using cookies (or change to another  object
       that does not share cookies), the easy handle gets its cookie engine disabled.

       Data that the share object is not set to share is dealt with the usual way, as if no share was used.

       Set this option to NULL again to stop using that share object.

</pre><h4><b>DEFAULT</b></h4><pre>
       NULL

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         CURL *curl2 = curl_easy_init(); /* a second handle */
         if(curl) {
           CURLcode res;
           CURLSH *shobject = curl_share_init();
           curl_share_setopt(shobject, CURLSHOPT_SHARE, CURL_LOCK_DATA_COOKIE);

           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com/");
           curl_easy_setopt(curl, CURLOPT_COOKIEFILE, "");
           curl_easy_setopt(curl, CURLOPT_SHARE, shobject);
           res = curl_easy_perform(curl);
           curl_easy_cleanup(curl);

           /* the second handle shares cookies from the first */
           curl_easy_setopt(curl2, CURLOPT_URL, "https://example.com/second");
           curl_easy_setopt(curl2, CURLOPT_COOKIEFILE, "");
           curl_easy_setopt(curl2, CURLOPT_SHARE, shobject);
           res = curl_easy_perform(curl2);
           curl_easy_cleanup(curl2);

           curl_share_cleanup(shobject);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.10

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_COOKIE.3.html">CURLOPT_COOKIE</a></b>(3), <b><a href="../man3/CURLSHOPT_SHARE.3.html">CURLSHOPT_SHARE</a></b>(3)

libcurl                                            2025-06-16                                   <u><a href="../man3/CURLOPT_SHARE.3.html">CURLOPT_SHARE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>