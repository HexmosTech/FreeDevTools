<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>path_to_handle,  path_to_fshandle,  fd_to_handle, handle_to_fshandle, open_by_handle, readlink_by_handle,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/xfslibs-dev">xfslibs-dev_6.13.0-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       path_to_handle,  path_to_fshandle,  fd_to_handle, handle_to_fshandle, open_by_handle, readlink_by_handle,
       attr_multi_by_handle,   attr_list_by_handle,   fssetdm_by_handle,   free_handle,    getparents_by_handle,
       getparentpaths_by_handle - file handle operations

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;xfs/handle.h&gt;</b>

       <b>int</b> <b>path_to_handle(char</b> <b>*</b><u>path</u><b>,</b> <b>void</b> <b>**</b><u>hanp</u><b>,</b> <b>size_t</b> <b>*</b><u>hlen</u><b>);</b>

       <b>int</b> <b>path_to_fshandle(char</b> <b>*</b><u>path</u><b>,</b> <b>void</b> <b>**</b><u>hanp</u><b>,</b> <b>size_t</b> <b>*</b><u>hlen</u><b>);</b>

       <b>int</b> <b>fd_to_handle(int</b> <u>fd</u><b>,</b> <b>void</b> <b>**</b><u>hanp</u><b>,</b> <b>size_t</b> <b>*</b><u>hlen</u><b>);</b>

       <b>int</b> <b>handle_to_fshandle(void</b> <b>*</b><u>hanp</u><b>,</b> <b>size_t</b> <u>hlen</u><b>,</b> <b>void</b> <b>**</b><u>fshanp</u><b>,</b> <b>size_t</b> <b>*</b><u>fshlen</u><b>);</b>

       <b>int</b> <b>open_by_handle(void</b> <b>*</b><u>hanp</u><b>,</b> <b>size_t</b> <u>hlen</u><b>,</b> <b>int</b> <u>oflag</u><b>);</b>

       <b>int</b> <b>readlink_by_handle(void</b> <b>*</b><u>hanp</u><b>,</b> <b>size_t</b> <u>hlen</u><b>,</b> <b>void</b> <b>*</b><u>buf</u><b>,</b> <b>size_t</b> <u>bs</u><b>);</b>

       <b>int</b> <b>attr_multi_by_handle(void</b> <b>*</b><u>hanp</u><b>,</b> <b>size_t</b> <u>hlen</u><b>,</b> <b>void</b> <b>*</b><u>buf</u><b>,</b> <b>int</b> <u>rtrvcnt</u><b>,</b> <b>int</b> <u>flags</u><b>);</b>

       <b>int</b> <b>attr_list_by_handle(void</b>   <b>*</b><u>hanp</u><b>,</b>   <b>size_t</b>   <u>hlen</u><b>,</b>  <b>char</b>  <b>*</b><u>buf</u><b>,</b>  <b>size_t</b>  <u>bufsiz</u><b>,</b>  <b>int</b>  <u>flags</u><b>,</b>  <b>struct</b>
              <b>attrlist_cursor</b> <b>*</b><u>cursor</u><b>);</b>

       <b>int</b> <b>fssetdm_by_handle(void</b> <b>*</b><u>hanp</u><b>,</b> <b>size_t</b> <u>hlen</u><b>,</b> <b>struct</b> <b>fsdmidata</b> <b>*</b><u>fssetdm</u><b>);</b>

       <b>void</b> <b>free_handle(void</b> <b>*</b><u>hanp</u><b>,</b> <b>size_t</b> <u>hlen</u><b>);</b>

       <b>int</b> <b>getparents_by_handle(void</b> <b>*</b><u>hanp</u><b>,</b> <b>size_t</b> <u>hlen</u><b>,</b> <b>parent_t</b> <b>*</b><u>buf</u><b>,</b> <b>size_t</b> <u>bufsiz</u><b>,</b> <b>parent_cursor_t</b>  <b>*</b><u>cursor</u><b>,</b>
              <b>unsigned</b> <b>int</b> <b>*</b><u>count</u><b>,</b> <b>unsigned</b> <b>int</b> <b>*</b><u>more</u><b>);</b>

       <b>int</b> <b>getparentpaths_by_handle(void</b>  <b>*</b><u>hanp</u><b>,</b>  <b>size_t</b>  <u>hlen</u><b>,</b>  <b>parent_t</b>  <b>*</b><u>buf</u><b>,</b>  <b>size_t</b> <u>bufsiz</u><b>,</b> <b>parent_cursor_t</b>
              <b>*</b><u>cursor</u><b>,</b> <b>unsigned</b> <b>int</b> <b>*</b><u>count</u><b>,</b> <b>unsigned</b> <b>int</b> <b>*</b><u>more</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These functions provide a way to perform certain filesystem operations without using a file descriptor to
       access filesystem objects. They are intended for use by a limited set of system utilities such as  backup
       programs. They are supported only by the XFS filesystem.  Link with the <b>libhandle</b> library to access these
       functions.

       A  handle,  <u>hanp</u>, uniquely identifies a filesystem object or an entire filesystem.  There is one and only
       one handle per filesystem or filesystem object.  Handles consist of some number of bytes. The size  of  a
       handle  (i.e.  the number of bytes comprising it) varies by the type of handle and may vary for different
       objects of the same type.  The content of a handle is opaque to applications.  Since  handle  sizes  vary
       and  their  contents  are  opaque,  handles  are described by two quantities, a pointer (<u>hanp</u>) and a size
       (<u>hlen</u>).  The size, <u>hlen</u>, indicates the number of bytes in the handle which are pointed to by the pointer.

       The <b>path_to_handle</b>() function returns the handle for the object given by the <u>path</u> argument. If the  final
       component of the path name is a symbolic link, the handle returned is that of the link itself.

       The  <b>path_to_fshandle</b>()  function  returns the handle for the filesystem in which the object given by the
       <u>path</u> argument resides.

       The <b>fd_to_handle</b>() function returns the handle for the object referenced by the <u>fd</u> argument,  which  must
       be a valid file descriptor.

       The <b>handle_to_fshandle</b>() function returns the handle for the filesystem in which the object referenced by
       the handle given by the <u>hanp</u> and <u>hlen</u> arguments resides.

       The  <b>open_by_handle</b>()  function  opens  a  file  descriptor for the object referenced by a handle.  It is
       analogous and identical to <b><a href="../man2/open.2.html">open</a></b>(2) with the exception of accepting handles instead of path names.

       The <b>readlink_by_handle</b>() function returns the contents of a symbolic link referenced by a handle.

       The <b>attr_multi_by_handle</b>() function manipulates multiple user attributes on a filesystem object.   It  is
       analogous and identical to <b><a href="../man3/attr_multif.3.html">attr_multif</a></b>(3) except that a handle is specified instead of a file descriptor.

       The  <b>attr_list_by_handle</b>()  function returns the names of the user attributes of a filesystem object.  It
       is analogous and identical to <b><a href="../man3/attr_listf.3.html">attr_listf</a></b>(3)  except  that  a  handle  is  specified  instead  of  a  file
       descriptor.

       The  <b>fssetdm_by_handle</b>()  function sets the <b>di_dmevmask</b> and <b>di_dmstate</b> fields in an XFS on-disk inode. It
       is analogous to the <b>XFS_IOC_FSSETDM</b> <b><a href="../man3/xfsctl.3.html">xfsctl</a></b>(3) command, except that a handle is  specified  instead  of  a
       file.  This function is not supported on Linux.

       The  <b>free_handle</b>()  function frees the storage allocated for handles returned by the following functions:
       <b>path_to_handle</b>(), <b>path_to_fshandle</b>(), <b>fd_to_handle</b>(), and <b>handle_to_fshandle</b>().

       The <b>getparents_by_handle</b>() function returns an array of <b>parent_t</b> structures  for  each  hardlink  to  the
       inode  represented by the given handle.  The parent structure encodes the parent inode number, generation
       number and the basename of the link.  <b>This</b> <b>function</b> <b>is</b> <b>not</b> <b>operational</b> <b>on</b> <b>Linux.</b>

       The <b>getparentpaths_by_handle</b>() function is identical to the <b>getparents_by_handle</b>() function  except  that
       instead  of  returning the basename it returns the path of the link up to the mount point.  <b>This</b> <b>function</b>
       <b>is</b> <b>also</b> <b>not</b> <b>operational</b> <b>on</b> <b>Linux.</b>

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The function <b>free_handle</b>() has no failure indication. The other functions  return  the  value  0  to  the
       calling process if they succeed; otherwise, they return the value -1 and set <u>errno</u> to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EACCES</b> Search permission was denied for a component of <u>path</u>.

       <b>EBADF</b>  <u>fd</u> is not a valid and open file descriptor.

       <b>EFAULT</b> An argument pointed to an invalid address.

       <b>EINVAL</b> <u>path</u> is in a filesystem that does not support these functions.

       <b>ELOOP</b>  Too many symbolic links were encountered in translating the path name.

       <b>ENAMETOOLONG</b>
              A component of <u>path</u> or the entire length of <u>path</u> exceeds filesystem limits.

       <b>ENOENT</b> A component of <u>path</u> does not exist.

       <b>EPERM</b>  The caller does not have sufficient privileges.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/open.2.html">open</a></b>(2), <b><a href="../man2/readlink.2.html">readlink</a></b>(2), <b><a href="../man3/attr_multi.3.html">attr_multi</a></b>(3), <b><a href="../man3/attr_list.3.html">attr_list</a></b>(3), <b><a href="../man3/xfsctl.3.html">xfsctl</a></b>(3), <b><a href="../man5/xfs.5.html">xfs</a></b>(5).

                                                                                                       <u><a href="../man3/HANDLE.3.html">HANDLE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>