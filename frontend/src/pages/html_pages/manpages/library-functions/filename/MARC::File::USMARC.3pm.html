<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MARC::File::USMARC - USMARC-specific file handling</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmarc-record-perl">libmarc-record-perl_2.0.7-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MARC::File::USMARC - USMARC-specific file handling

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use MARC::File::USMARC;

           my $file = MARC::File::USMARC-&gt;in( $filename );

           while ( my $marc = $file-&gt;next() ) {
               # Do something
           }
           $file-&gt;close();
           undef $file;

</pre><h4><b>EXPORT</b></h4><pre>
       None.

</pre><h4><b>METHODS</b></h4><pre>
   <b>decode(</b> <b>$string</b> <b>[,</b> <b>\&amp;filter_func</b> <b>]</b> <b>)</b>
       Constructor for handling data from a USMARC file.  This function takes care of all the tag directory
       parsing &amp; mangling.

       Any warnings or coercions can be checked in the "warnings()" function.

       The $filter_func is an optional reference to a user-supplied function that determines on a tag-by-tag
       basis if you want the tag passed to it to be put into the MARC record.  The function is passed the tag
       number and the raw tag data, and must return a boolean.  The return of a true value tells
       MARC::File::USMARC::decode that the tag should get put into the resulting MARC record.

       For example, if you only want title and subject tags in your MARC record, try this:

           sub filter {
               my ($tagno,$tagdata) = @_;

               return ($tagno == 245) || ($tagno &gt;= 600 &amp;&amp; $tagno &lt;= 699);
           }

           my $marc = MARC::File::USMARC-&gt;decode( $string, \&amp;filter );

       Why would you want to do such a thing?  The big reason is that creating fields is processor-intensive,
       and if your program is doing read-only data analysis and needs to be as fast as possible, you can save
       time by not creating fields that you'll be ignoring anyway.

       Another possible use is if you're only interested in printing certain tags from the record, then you can
       filter them when you read from disc and not have to delete unwanted tags yourself.

   <b>update_leader()</b>
       If any changes get made to the MARC record, the first 5 bytes of the leader (the length) will be invalid.
       This function updates the leader with the correct length of the record as it would be if written out to a
       file.

   <b>_build_tag_directory()</b>
       Function for internal use only: Builds the tag directory that gets put in front of the data in a MARC
       record.

       Returns two array references, and two lengths: The tag directory, and the data fields themselves, the
       length of all data (including the Leader that we expect will be added), and the size of the Leader and
       tag directory.

   <b>encode()</b>
       Returns a string of characters suitable for writing out to a USMARC file, including the leader, directory
       and all the fields.

</pre><h4><b>RELATED</b> <b>MODULES</b></h4><pre>
       MARC::Record

</pre><h4><b>TODO</b></h4><pre>
       Make some sort of autodispatch so that you don't have to explicitly specify the MARC::File::X subclass,
       sort of like how DBI knows to use DBD::Oracle or DBD::Mysql.

       Create a toggle-able option to check inside the field data for end of field characters.  Presumably it
       would be good to have it turned on all the time, but it's nice to be able to opt out if you don't want to
       take the performance hit.

</pre><h4><b>LICENSE</b></h4><pre>
       This code may be distributed under the same terms as Perl itself.

       Please note that these modules are not products of or supported by the employers of the various
       contributors to the code.

</pre><h4><b>AUTHOR</b></h4><pre>
       Andy Lester, "&lt;<a href="mailto:andy@petdance.com">andy@petdance.com</a>&gt;"

perl v5.36.0                                       2022-10-13                            <u>MARC::File::<a href="../man3pm/USMARC.3pm.html">USMARC</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>