<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perl::Critic::Policy::InputOutput::RequireEncodingWithUTF8Layer - Write "open $fh, q{<:encoding(UTF-8)},</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libperl-critic-perl">libperl-critic-perl_1.156-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Perl::Critic::Policy::InputOutput::RequireEncodingWithUTF8Layer - Write "open $fh, q{&lt;:encoding(UTF-8)},
       $filename;" instead of "open $fh, q{&lt;:utf8}, $filename;".

</pre><h4><b>AFFILIATION</b></h4><pre>
       This Policy is part of the core Perl::Critic distribution.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Use of the ":utf8" I/O layer (as opposed to :encoding(UTF8) or :encoding(UTF-8)) was suggested in the
       Perl documentation up to version 5.8.8. This may be OK for output, but on input ":utf8" does not validate
       the input, leading to unexpected results.

       An exploit based on this behavior of ":utf8" is exhibited on PerlMonks at
       &lt;<a href="http://www.perlmonks.org/">http://www.perlmonks.org/</a>?node_id=644786&gt;. The exploit involves a string read from an external file and
       sanitized with "m/^(\w+)$/", where $1 nonetheless ends up containing shell meta-characters.

       To summarize:

        open $fh, '&lt;:utf8', 'foo.txt';             # BAD
        open $fh, '&lt;:encoding(UTF8)', 'foo.txt';   # GOOD
        open $fh, '&lt;:encoding(UTF-8)', 'foo.txt';  # BETTER

       See the Encode documentation for the difference between "UTF8" and "UTF-8". The short version is that
       "UTF-8" implements the Unicode standard, and "UTF8" is liberalized.

       For consistency's sake, this policy checks files opened for output as well as input. For complete
       coverage it also checks binmode() calls, where the direction of operation can not be determined.

</pre><h4><b>CONFIGURATION</b></h4><pre>
       This Policy is not configurable except for the standard options.

</pre><h4><b>NOTES</b></h4><pre>
       Because "Perl::Critic" does a static analysis, this policy can not detect cases like

        my $encoding = ':utf8';
        binmode $fh, $encoding;

       where the encoding is computed.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       PerlIO

       Encode

       "perldoc -f binmode"

       &lt;<a href="http://www.socialtext.net/perl5/index.cgi">http://www.socialtext.net/perl5/index.cgi</a>?the_utf8_perlio_layer&gt;

       &lt;<a href="http://www.perlmonks.org/">http://www.perlmonks.org/</a>?node_id=644786&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Thomas R. Wyant, III <u>wyant</u> <u>at</u> <u>cpan</u> <u>dot</u> <u>org</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2010-2011 Thomas R. Wyant, III

       This program is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself.

perl v5.40.0                                       2024-10-28              <u>Perl::Critic::...<a href="../man3pm/ngWithUTF8Layer.3pm.html">ngWithUTF8Layer</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>