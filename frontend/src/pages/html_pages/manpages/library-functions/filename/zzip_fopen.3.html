<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zzip_fopen, zzip_freopen -  start usage.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libzzip-dev">libzzip-dev_0.13.78+dfsg.1-0.1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zzip_fopen, zzip_freopen -  start usage.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;zzip/lib.h&gt;</b>

       ZZIP_FILE*
       <u>zzip_fopen</u>(zzip_char_t* filename, zzip_char_t* mode)

       ZZIP_FILE*
       <u>zzip_freopen</u>(zzip_char_t* filename, zzip_char_t* mode, ZZIP_FILE* stream)

</pre><h4><b>DESCRIPTION</b></h4><pre>
        The <u>zzip_fopen</u> function will <u><a href="../man3/fopen.3.html">fopen</a>(3)</u> a real/zipped file.

        It has some magic functionality builtin - it will first try to open the given
       &lt;emphasis&gt;filename&lt;/emphasis&gt; as a normal file. If it does not exist, the given path to the filename (if
       any) is split into its directory-part and the file-part. A ".zip" extension is then added to the
       directory-part to create the name of a zip-archive. That zip-archive (if it exists) is being searched for
       the file-part, and if found a zzip-handle is returned.

        Note that if the file is found in the normal fs-directory the returned structure is mostly empty and the
       <u>zzip_read</u> call will use the libc <u><a href="../man2/read.2.html">read</a>(2)</u> to obtain data. Otherwise a <u>zzip_file_open</u> is performed and any
       error mapped to <u><a href="../man3/errno.3.html">errno</a>(3)</u>.

        unlike the posix-wrapper <u>zzip_open</u> the mode-argument is a string which allows for more freedom to
       support the extra zzip modes called ZZIP_CASEINSENSITIVE and ZZIP_IGNOREPATH. Currently, this <u>zzip_fopen</u>
       call will convert the following characters in the mode-string into their corrsponding mode-bits:

         <u>"r"</u> <u>:</u> <u>O_RDONLY</u> <u>:</u>  read-only

         <u>"b"</u> <u>:</u> <u>O_BINARY</u> <u>:</u>  binary (win32 specific)

         <u>"f"</u> <u>:</u> <u>O_NOCTTY</u> <u>:</u>  no char device (unix)

         <u>"i"</u> <u>:</u> <u>ZZIP_CASELESS</u> <u>:</u>  inside zip file

         <u>"*"</u> <u>:</u> <u>ZZIP_NOPATHS</u> <u>:</u>  inside zip file only

        all other modes will be ignored for zip-contained entries but they are transferred for compatibility and
       portability, including these extra sugar bits:

         <u>"x"</u> <u>:</u> <u>O_EXCL</u> <u>:</u> fail if file did exist

         <u>"s"</u> <u>:</u> <u>O_SYNC</u> <u>:</u> synchronized access

         <u>"n"</u> <u>:</u> <u>O_NONBLOCK</u> <u>:</u> nonblocking access

         <u>"z#"</u> <u>:</u> <u>compression</u> <u>level</u> <u>:</u> for zlib

         <u>"g#"</u> <u>:</u> <u>group</u> <u>access</u> <u>:</u> unix access bits

         <u>"u#"</u> <u>:</u> <u>owner</u> <u>access</u> <u>:</u> unix access bits

         <u>"o#"</u> <u>:</u> <u>world</u> <u>access</u> <u>:</u> unix access bits

        ... the access bits are in traditional unix bit format with 7 = read/write/execute, 6 = read/write, 4 =
       read-only.

        The default access mode is 0664, and the compression level is ignored since the lib can not yet write
       zip files, otherwise it would be the initialisation value for the zlib deflateInit where 0 = no-
       compression, 1 = best-speed, 9 = best-compression.

        The <u>zzip_fopen</u> function returns a new zzip-handle (use <u>zzip_close</u> to return it). On error the <u>zzip_fopen</u>
       function will return null setting <u><a href="../man3/errno.3.html">errno</a>(3)</u>.

        The <u>zzip_freopen</u> function receives an additional argument pointing to a ZZIP_FILE* being already in use.
       If this extra argument is null then the <u>zzip_freopen</u> function is identical with calling <u>zzip_fopen</u>

        Per default, the old file stream is closed and only the internal structures associated with it are kept.
       These internal structures may be reused for the return value, and this is a lot quicker when the filename
       matches a zipped file that is incidentally in the very same zip arch as the old filename wrapped in the
       stream struct.

        That's simply because the zip arch's central directory does not need to be read again. As an extension
       for the <u>zzip_freopen</u> function, if the mode-string contains a "q" then the old stream is not closed but
       left untouched, instead it is only given as a hint that a new file handle may share/copy the zip arch
       structures of the old file handle if that is possible, i.e when they are in the same zip arch.

        The <u>zzip_freopen</u> function returns a new zzip-handle (use <u>zzip_close</u> to return it). On error the
       <u>zzip_freopen</u> function will return null setting <u><a href="../man3/errno.3.html">errno</a>(3)</u>.

</pre><h4><b>AUTHOR</b></h4><pre>
        Guido Draheim &lt;<a href="mailto:guidod@gmx.de">guidod@gmx.de</a>&gt; Tomi Ollila &lt;<a href="mailto:Tomi.Ollila@iki.fi">Tomi.Ollila@iki.fi</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
        Copyright (c) Guido Draheim, use under copyleft (LGPL,MPL)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        <a href="../man2/fopen.2.html">fopen</a>(2)

zziplib                                              0.13.78                                       <u><a href="../man3/zzip_fopen.3.html">zzip_fopen</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>