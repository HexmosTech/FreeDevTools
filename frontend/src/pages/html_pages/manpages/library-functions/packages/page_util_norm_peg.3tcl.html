<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>page_util_norm_peg - page AST normalization, PEG</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       page_util_norm_peg - page AST normalization, PEG

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>page::util::norm_peg</b> <b>?0.2?</b>

       package require <b>snit</b>

       <b>::page::util::norm::peg</b> <u>tree</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides  a single utility command which takes an AST for a parsing expression grammar and
       normalizes it in various ways. The result is called a <u>Normalized</u> <u>PE</u> <u>Grammar</u> <u>Tree</u>.

       <u>Note</u> that this package can only be used from within a plugin managed by the package <b>page::pluginmgr</b>.

</pre><h4><b>API</b></h4><pre>
       <b>::page::util::norm::peg</b> <u>tree</u>
              This command assumes the <u>tree</u> object contains for a parsing expression grammar. It normalizes this
              tree in place.  The result is called a  <u>Normalized</u> <u>PE</u> <u>Grammar</u> <u>Tree</u>.

              The following operations are performd

              [1]    The data for all terminals is stored in their grandparental nodes. The terminal  nodes  and
                     their parents are removed. Type information is dropped.

              [2]    All  nodes  which have exactly one child are irrelevant and are removed, with the exception
                     of the root node. The immediate child of the root is irrelevant as  well,  and  removed  as
                     well.

              [3]    The  name of the grammar is moved from the tree node it is stored in to an attribute of the
                     root node, and the tree node removed.

                     The node keeping the start expression separate is removed as irrelevant and the  root  node
                     of  the  start  expression  tagged  with  a  marker  attribute,  and its handle saved in an
                     attribute of the root node for quick access.

              [4]    Nonterminal hint information is moved from nodes into attributes, and  the  now  irrelevant
                     nodes are deleted.

                     <u>Note:</u>  This transformation is dependent on the removal of all nodes with exactly one child,
                     as it removes the all 'Attribute' nodes already. Otherwise this transformation  would  have
                     to put the information into the grandparental node.

                     The default mode given to the nonterminals is <b>value</b>.

                     Like  with  the  global  metadata definition specific information is moved out out of nodes
                     into attributes, the  now  irrelevant  nodes  are  deleted,  and  the  root  nodes  of  all
                     definitions  are  tagged  with  marker  attributes.  This  provides  us with a mapping from
                     nonterminal names to their defining nodes as well, which is saved in an  attribute  of  the
                     root node for quick reference.

                     At  last  the range in the input covered by a definition is computed. The left extent comes
                     from the terminal for the nonterminal symbol it defines. The right extent  comes  from  the
                     rightmost  child  under  the definition. While this not an expression tree yet the location
                     data is sound already.

              [5]    The remaining nodes under all definitions are transformed  into  proper  expression  trees.
                     First character ranges, followed by unary operations, characters, and nonterminals. At last
                     the tree is flattened by the removal of superfluous inner nodes.

                     The  order  matters, to shed as much nodes as possible early, and to avoid unnecessary work
                     later.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in the category <u>page</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       PEG, graph walking, normalization, page, parser generator, text processing, tree walking

</pre><h4><b>CATEGORY</b></h4><pre>
       Page Parser Generator

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2007 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 1.0                              <u><a href="../man3tcl/page_util_norm_peg.3tcl.html">page_util_norm_peg</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>