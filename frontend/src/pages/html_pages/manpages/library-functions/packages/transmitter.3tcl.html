<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>transfer::transmitter - Data source</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       transfer::transmitter - Data source

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>snit</b> <b>?1.0?</b>

       package require <b>transfer::copy</b> <b>?0.3?</b>

       package require <b>transfer::data::source</b> <b>?0.3?</b>

       package require <b>transfer::connect</b> <b>?0.3?</b>

       package require <b>transfer::transmitter</b> <b>?0.3?</b>

       <b>transfer::transmitter</b> <u>objectName</u> ?<u>options</u>...?

       <b>transfer::transmitter</b> <b>stream</b> <b>channel</b> <u>chan</u> <u>host</u> <u>port</u> ?<u>arg</u>...?

       <b>transfer::transmitter</b> <b>stream</b> <b>file</b> <u>path</u> <u>host</u> <u>port</u> ?<u>arg</u>...?

       <u>objectName</u> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?

       <u>objectName</u> <b>destroy</b>

       <u>objectName</u> <b>start</b>

       <u>objectName</u> <b>busy</b>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This package pulls data sources and connection setup together into a combined object for the transmission
       of  information  over  a  socket.   These  objects understand all the options from objects created by the
       packages <b>transfer::data::source</b> and <b>transfer::connect</b>.

</pre><h4><b>API</b></h4><pre>
   <b>PACKAGE</b> <b>COMMANDS</b>
       <b>transfer::transmitter</b> <u>objectName</u> ?<u>options</u>...?
              This command creates a new transmitter object  with  an  associated  Tcl  command  whose  name  is
              <u>objectName</u>.   This  <u>object</u>  command is explained in full detail in the sections <b>Object</b> <b>command</b> and
              <b>Object</b> <b>methods</b>. The set of supported <u>options</u> is explained in section <b>Options</b>.

              The object command will be created under the current namespace if  the  <u>objectName</u>  is  not  fully
              qualified,  and  in  the  specified  namespace  otherwise.  The fully qualified name of the object
              command is returned as the result of the command.

       <b>transfer::transmitter</b> <b>stream</b> <b>channel</b> <u>chan</u> <u>host</u> <u>port</u> ?<u>arg</u>...?
              This method creates a fire-and-forget transfer  for  the  data  contained  in  the  channel  <u>chan</u>,
              starting  at  the  current  seek location. The channel is configured to use binary translation and
              encoding for the transfer.  The channel is automatically closed when the transfer has completed.

              If both <u>host</u> and <u>port</u> are provided an <b>active</b> connection to the destination is made. If only a <u>port</u>
              is specified (with <u>host</u> the empty string) then a <b>passive</b> connection is made instead.

              Any arguments after the port are treated as  options  and  are  used  to  configure  the  internal
              transmitter  object.   See  the  section  <b>Options</b>  for  a  list of the supported options and their
              meaning.  <u>Note</u> however that the signature  of  the  command  prefix  specified  for  the  <b>-command</b>
              callback  differs from the signature for the same option of the transmitter object.  This callback
              is only given the number of bytes and transfered, and possibly an error message. No  reference  to
              the internally used transmitter object is made.

              The result returned by the command is the empty string if it was set to make an <u>active</u> connection,
              and  the port the internal transmitter object is listening on otherwise, i.e when it is configured
              to connect <u>passive</u>ly.  See also the package <b>transfer::connect</b> and the description  of  the  method
              <b>connect</b> for where this behaviour comes from.

       <b>transfer::transmitter</b> <b>stream</b> <b>file</b> <u>path</u> <u>host</u> <u>port</u> ?<u>arg</u>...?
              This method is like <b>stream</b> <b>channel</b>, except that the data contained in the file <u>path</u> is transfered.

   <b>OBJECT</b> <b>COMMAND</b>
       All objects created by the <b>::transfer::transmitter</b> command have the following general form:

       <u>objectName</u> <b>method</b> ?<u>arg</u> <u>arg</u> <u>...</u>?
              The  method  <b>method</b>  and  its <u>arg</u>'uments determine the exact behavior of the command.  See section
              <b>Object</b> <b>methods</b> for the detailed specifications.

   <b>OBJECT</b> <b>METHODS</b>
       <u>objectName</u> <b>destroy</b>
              This method destroys the object. Doing so while a transmission is in progress  will  cause  errors
              later  on,  when the transmission completes and tries to access the now missing data structures of
              the destroyed object.

       <u>objectName</u> <b>start</b>
              This method initiates the data transmission, setting up the connection first and then copying  the
              information.  The method will throw an error if a transmission is already/still in progress.  I.e.
              it  is  not  possible  to  run two transmissions in parallel on a single object, only in sequence.
              Multiple transmitter objects are needed  to  manage  parallel  transfers,  one  per  transmission.
              Errors will also be thrown if the configuration of the data source is invalid, or if no completion
              callback was specified.

              The  result  returned by the method is the empty string for an object configured to make an <u>active</u>
              connection, and the port the object is listening on  otherwise,  i.e  when  it  is  configured  to
              connect  <u>passive</u>ly.   See  also  the  package  <b>transfer::connect</b> and the description of the method
              <b>connect</b> for where this behaviour comes from.

       <u>objectName</u> <b>busy</b>
              This method returns a boolean value telling us whether a transmission is in  progress  (<b>True</b>),  or
              not (<b>False</b>).

   <b>OPTIONS</b>
       All  transmitter  objects  support  the  union  of the options supported by their connect and data source
       components, plus two of their own.  See also the documentation for  the  packages  <b>transfer::data::source</b>
       and <b>transfer::connect</b>.

       <b>-blocksize</b> <u>int</u>
              This  option  specifies  the size of the chunks to be transmitted in one block. Usage is optional,
              its default value is <b>1024</b>.

       <b>-command</b> <u>cmdprefix</u>
              This option specifies the command to invoke when the transmission  of  the  information  has  been
              completed.   The  arguments given to this command are the same as given to the completion callback
              of the command <b>transfer::copy::do</b> provided by the package <b>transfer::copy</b>.

       <b>-mode</b> <u>mode</u>
              This option specifies the mode the object is in. It is optional and defaults to <b>active</b>  mode.  The
              two possible modes are:

              <b>active</b> In this mode the two options <b>-host</b> and <b>-port</b> are relevant and specify the host and TCP port
                     the object has to connect to. The host is given by either name or IP address.

              <b>passive</b>
                     In this mode the option <b>-host</b> has no relevance and is ignored should it be configured.  The
                     only option the object needs is <b>-port</b>, and it specifies the TCP port on which the listening
                     socket is opened to await the connection from the partner.

       <b>-host</b> <u>hostname-or-ipaddr</u>
              This  option  specifies  the  host  to connect to in <u>active</u> mode, either by name or ip-address. An
              object configured for <u>passive</u> mode ignores this option.

       <b>-port</b> <u>int</u>
              For <u>active</u> mode this option specifies the port the object is expected to connect to.  For  <u>passive</u>
              mode  however  it  is  the  port  where  the  object  creates  the  listening socket waiting for a
              connection. It defaults to <b>0</b>, which allows the OS to choose the actual port to listen on.

       <b>-socketcmd</b> <u>command</u>
              This option allows the user to specify which command to use to open a socket. The  default  is  to
              use the builtin <b>::socket</b>. Any compatible with that command is allowed.

              The  envisioned main use is the specfication of <b>tls::socket</b>. I.e.  this option allows the creation
              of secure transfer channels, without making this package explicitly dependent on the <b>tls</b> package.

              See also section <b>Secure</b> <b>connections</b>.

       <b>-encoding</b> encodingname

       <b>-eofchar</b> eofspec

       <b>-translation</b> transspec
              These options are the same as are recognized by the builtin command <b>fconfigure</b>. They  provide  the
              configuration  to  be  set for the channel between the two partners after it has been established,
              but before the callback is invoked (See method <b>connect</b>).

       <b>-string</b> <u>text</u>
              This option specifies that the source of the data is  an  immediate  string,  and  its  associated
              argument contains the string in question.

       <b>-channel</b> <u>handle</u>
              This option specifies that the source of the data is a channel, and its associated argument is the
              handle of the channel containing the data.

       <b>-file</b> <u>path</u>
              This  option  specifies  that the source of the data is a file, and its associated argument is the
              path of the file containing the data.

       <b>-variable</b> <u>varname</u>
              This option specifies that the source of the data is a  string  stored  in  a  variable,  and  its
              associated  argument  contains the name of the variable in question. The variable is assumed to be
              global or namespaced, anchored at the global namespace.

       <b>-size</b> <u>int</u>
              This option specifies the size of the data transfer. It is  optional  and  defaults  to  -1.  This
              value, and any other value less than zero signals to transfer all the data from the source.

       <b>-progress</b> <u>command</u>
              This  option,  if  specified, defines a command to be invoked for each chunk of bytes transmitted,
              allowing the user to monitor the progress of the transmission of the data. The callback is  always
              invoked with one additional argument, the number of bytes transmitted so far.

</pre><h4><b>SECURE</b> <b>CONNECTIONS</b></h4><pre>
       One  way  to  secure  connections  made by objects of this package is to require the package <b>tls</b> and then
       configure the option <b>-socketcmd</b> to force the use of command <b>tls::socket</b> to open the socket.

                  # Load and initialize tls
                  package require tls
                  tls::init -cafile /path/to/ca/cert -keyfile ...

                  # Create a connector with secure socket setup,
                  transfer::transmitter T -socketcmd tls::socket ...
                  ...

</pre><h4><b>TLS</b> <b>SECURITY</b> <b>CONSIDERATIONS</b></h4><pre>
       This package uses the <b>TLS</b> package to handle the security for <b>https</b> urls and other socket connections.

       Policy decisions like the set of protocols to support and what ciphers to use are not the  responsibility
       of  <b>TLS</b>,  nor  of  this  package  itself  however.   Such  decisions  are the responsibility of whichever
       application is using the package, and are likely influenced by the set of servers  the  application  will
       talk to as well.

       For        example,        in        light        of        the        recent        <u>POODLE</u>        <u>attack</u>
       [<a href="http://googleonlinesecurity.blogspot.co.uk/2014/10/this-poodle-bites-exploiting-ssl-30.html">http://googleonlinesecurity.blogspot.co.uk/2014/10/this-poodle-bites-exploiting-ssl-30.html</a>]  discovered
       by  Google  many  servers  will  disable  support  for  the  SSLv3  protocol.   To handle this change the
       applications using <b>TLS</b> must be patched, and not this package, nor <b>TLS</b> itself.  Such a  patch  may  be  as
       simple as generally activating <b>tls1</b> support, as shown in the example below.

                  package require tls
                  tls::init -tls1 1 ;# forcibly activate support for the TLS1 protocol

                  ... your own application code ...

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category  <u>transfer</u>  of  the  <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       channel, copy, data source, secure, ssl, tls, transfer, transmitter

</pre><h4><b>CATEGORY</b></h4><pre>
       Transfer module

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2006-2009 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 0.3                           <u>transfer::<a href="../man3tcl/transmitter.3tcl.html">transmitter</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>