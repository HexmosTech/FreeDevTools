<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>critcl_application_package - CriTcl Application Package Reference</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/critcl">critcl_3.3.1+dfsg-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       critcl_application_package - CriTcl Application Package Reference

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b>  <b>8.6</b>

       package require <b>critcl::app</b>  <b>?3.3.1?</b>

       package require <b>critcl</b>  <b>?3.3.1?</b>

       package require <b>platform</b>  <b>?1.0.2?</b>

       package require <b>cmdline</b>

       <b>::critcl::app::main</b> <u>commandline</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Be  welcome  to the <u>C</u> <u>Runtime</u> <u>In</u> <u>Tcl</u> (short: <u>CriTcl</u>), a system for embedding and using C code from within
       <u>Tcl</u> [<a href="http://core.tcl-lang.org/tcl">http://core.tcl-lang.org/tcl</a>] scripts.

       This document is the reference manpage for the <b>critcl::app</b> package. Its intended audience are  developers
       working  on  critcl's  internals.  These commands are not needed to simply write a <u>CriTcl</u> <u>script</u>.  If you
       are in need of an overview of the whole system instead, please go and read the <u>Introduction</u> <u>To</u> <u>CriTcl</u>.

       This package resides in the Application Layer of CriTcl.

       *================*
       |Applications    |
       | critcl         |
       | critcl::app    |
       *================*

       +----------------+
       |Core Packages   |
       | critcl         |
       | critcl::util   |
       +----------------+

       +----------------+
       |Support Packages|
       | stubs::*       |
       | md5, platform  |
       |  ...           |
       +----------------+

       , implementing the functionality of the <u>CriTcl</u> <u>Application</u>, and through this, the mode <b>generate</b>  <b>package</b>.
       The  actual  application  is (only) a shim wrapping around this package. It itself is build on top of the
       core package <b>critcl</b>.

</pre><h4><b>API</b></h4><pre>
       The package exports a single command

       <b>::critcl::app::main</b> <u>commandline</u>
              The <u>commandline</u> is a list of zero or more options followed by zero or more  <u>CriTcl</u>  <u>script</u>  files.
              By default, the <u>CriTcl</u> <u>script</u> files are build and the results cached.   This cuts down on the time
              needed  to  load  the  package.   The  last  occurrence of <b>-pkg</b> and <b>-tea</b>, if provided, selects the
              corresponding alternative mode of operations.  For a larger set of  examples  please  see  section
              "Building CriTcl Packages" in the document about <u>Using</u> <u>CriTcl</u>.

       The options are:

</pre><h4><b>OPTIONS</b></h4><pre>
       The following options are understood:

       <b>-v</b>

       <b>--version</b>
              Print the version to <b>stdout</b> and exit.

       <b>-I</b> path
              Arranges for the compiler to search <u>path</u> for headers.  Uses of this option are cumulative.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-L</b> path
              Arranges for the linker to search <u>path</u>.  Uses of this option are cumulative.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-cache</b> path
              Sets  <u>path</u>  as the directory to use as the result cache. The default is "<u><a href="file:~/.critcl/">~/.critcl/</a>&lt;platform&gt;</u>", or
              "<u><a href="file:~/.critcl/">~/.critcl/</a>&lt;pid&gt;.&lt;epoch&gt;</u>" when generating a package.  See option <b>-pkg</b>, below.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-clean</b> Arranges for all files and directories in the  result  cache  to  be  deleted  before  compilation
              begins.

              Ignored  when  generating  a  package  because this mode starts out with a unique and empty result
              cache.  See option <b>-pkg</b>, below.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-config</b> path
              Provides a custom configuration file.  By default a configuration included in the system  core  is
              used.  When specified multiple times the last value is used.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-debug</b> mode
              Activates one of the following debugging modes:

              <b>memory</b> Track and report memory allocations made by the Tcl core.

              <b>symbols</b>
                     Compile all "<u>.c</u>" files with debugging symbols.

              <b>all</b>    Both <b>memory</b> and <b>symbols</b>.

       Ignored when generating a TEA package (see option <b>-tea</b> below).  Uses of this option are cumulative.

       <b>-disable</b> name
              Sets the value of the custom build configuration option <u>name</u> to <b>false</b>. It is equivalent to "-with-
              <u>name</u> 0".

       Validated  only  if one of the input files for the <u>CriTcl</u> <u>script</u> actually defines and uses a custom build
       configuration option with that <u>name</u>.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-enable</b> name
              Sets the value of the custom build configuration option <u>name</u> to <b>true</b>. It is equivalent to  "-with-
              <u>name</u> 1".

       Validated  only  if one of the input files for the <u>CriTcl</u> <u>script</u> actually defines and uses a custom build
       configuration option with that <u>name</u>.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-force</b> Forces compilation even if a shared library for the file  already  exists.   Unlike  cleaning  the
              cache, this is lazy in the destruction of files and only affects relevant files.

              Ignored  when  generating  a  package (see option <b>-pkg</b>, below), which starts out with a unique and
              empty result cache.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-help</b>  Prints a short description of command line syntax and options and then exits the application.

       <b>-keep</b>  Causes the system to cache compiled "<u>.c</u>" files.  Also prevents the deletion of the  unique  result
              cache used by the run when generating a package (see option <b>-pkg</b> below), Intended for debugging of
              <b>critcl</b> itself, where it may be necessary to inspect the generated C code.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-libdir</b> directory
              Adds  <u>directory</u>  to  the list of directories the linker searches for libraries in (like <b>-L</b>).  With
              <b>-pkg</b>, generated packages are saved in <u>directory</u>.  When specified multiple times the last value  is
              used.  The default is "<u>lib</u>", resolved relative to the current working directory.

       <b>-includedir</b> directory
              Adds  <u>directory</u>  to  the  list  of  directories  the  compiler searches for headers in. With <b>-pkg</b>,
              generated header files are saved in <u>directory</u>.  Uses of this  option  are  cumulative.   The  last
              value  is  used  as  the  destination  for  generated  header  files.  The default is the relative
              directory "<u>include</u>", resolved relative to the current working directory.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-pkg</b>   Generates a package from the <u>CriTcl</u> <u>script</u> files.  Input files are processed first as  usual,  but
              are then bundled into a single library, with additional generated files to form the library into a
              standard Tcl package.

              generation. If both options, i.e. <b>-pkg</b> and <b>-tea</b> are specified the last one specified wins.

              Options <b>-clean</b> and <b>-force</b> are ignored. <b>-libdir</b> is relevant in both this and <b>-tea</b> mode.

              The  basename  of  the  first  file  is the name of the package to generate. If its file extension
              indicates a shared library ("<u>.so</u>", "<u>.sl</u>", "<u>.dylib</u>", and "<u>.dll</u>") it is also removed from the set of
              input files. Each <u>CriTcl</u> <u>script</u> file is kept as part of the input. A single file without a  suffix
              is  assumed  to  be  a  <u>CriTcl</u> <u>script</u>. A file without a suffix, but other input files following is
              treated like the name of a shared library proper, and removed from the set of input files.

              Examples:

                ... -pkg ... foo

                =&gt; Package name is: foo
                =&gt; Input file is:   foo.tcl

                ... -pkg ... foo bar.tcl

                =&gt; Package name is: foo
                =&gt; Input file is:   bar.tcl

                ... -pkg ... foo.tcl

                =&gt; Package name is: foo
                =&gt; Input file is:   foo.tcl

                ... -pkg ... foo.so bar.tcl

                =&gt; Package name is: foo
                =&gt; Input file is:   bar.tcl

       <b>-show</b>  Prints the configuration of the chosen target to <b>stdout</b> and then exits.  Set <b>-target</b>, below.

       <b>-showall</b>
              Prints the whole chosen configuration file to <b>stdout</b> and then exits.  See <b>-config</b>, above.

       <b>-target</b> name
              Overrides the default choice of build target.  Only the last occurrence of this  option  is  used.
              The  named  target must exist in the chosen configuration file.  Use <b>-targets</b> (see below) to get a
              list of the acceptable targets.  Use <b>-config</b> to select the configuration file.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

       <b>-targets</b>
              Prints the list of all known targets from the chosen configuration file to <b>stdout</b> and then  exits.
              Use <b>-config</b> to select the configuration file.

       <b>-tea</b>   Like  <b>-pkg</b>,  except no binaries are generated. Creates a directory hierarchy containing the <u>CriTcl</u>
              <u>script</u>, its companion files, and a TEA-conformant build system with most  of  the  needed  support
              code, including copies of the critcl packages.

              If both <b>-pkg</b> and <b>-tea</b> are specified the last occurrence wins.

              <b>-I</b>,  <b>-L</b>,  <b>-clean</b>,  <b>-force</b>,  <b>-cache</b>,  <b>-includedir</b>, <b>-enable</b>, <b>-disable</b>, and <b>-with-FOO</b> are ignored. In
              contrast, the option <b>-libdir</b> is relevant in both this and <b>-pkg</b> mode.

              The basename of the first file is the name of the package  to  generate.  If  its  file  extension
              indicates a shared library ("<u>.so</u>", "<u>.sl</u>", "<u>.dylib</u>", and "<u>.dll</u>") it is also removed from the set of
              input  files. Each <u>CriTcl</u> <u>script</u> file is kept as part of the input. A single file without a suffix
              is assumed to be a <u>CriTcl</u> <u>script</u>. A file without a suffix, but  other  input  files  following  is
              treated like the name of a shared library proper, and removed from the set of input files.

              Examples:

                ... -tea ... foo

                =&gt; Package name is: foo
                =&gt; Input file is:   foo.tcl

                ... -tea ... foo bar.tcl

                =&gt; Package name is: foo
                =&gt; Input file is:   bar.tcl

                ... -tea ... foo.tcl

                =&gt; Package name is: foo
                =&gt; Input file is:   foo.tcl

                ... -tea ... foo.so bar.tcl

                =&gt; Package name is: foo
                =&gt; Input file is:   bar.tcl

       <b>-with-name</b> value
              This option sets the value of the custom build configuration option <u>name</u> to <u>value</u>.

              The  information is validated only if one of the "<u>.critcl</u>" input files actually defines and uses a
              custom build configuration option with that <u>name</u>.

       Ignored when generating a TEA package (see option <b>-tea</b> below).

</pre><h4><b>MODES</b> <b>OF</b> <b>OPERATION/USE</b></h4><pre>
       CriTcl can be used in three different modes of operation, called

       [1]    <u>Compile</u> <u>&amp;</u> <u>Run</u>, and

       [2]    <u>Generate</u> <u>Package</u>

       [3]    <u>Generate</u> <u>TEA</u> <u>Package</u>

       <u>Compile</u> <u>&amp;</u> <u>Run</u> was the original mode and is the default for <u>critcl_pkg</u>.  Collects the C fragments from the
       <u>CriTcl</u> <u>script</u>, builds them as needed, and caches the results to improve load times later.

       The second mode, <u>Generate</u> <u>Package</u>, was introduced  to  enable  the  creation  of  (prebuilt)  deliverable
       packages  which do not depend on the existence of a build system, i.e. C compiler, on the target machine.
       This was originally done through the experimental <b>Critbind</b>  tool,  and  is  now  handled  by  the  <u>CriTcl</u>
       <u>Application</u>, also named <b>critcl</b>.

       Newly  introduced  with  CriTcl  version  3  is  <u>Generate</u>  <u>TEA</u>  <u>Package</u>. This mode constructs a directory
       hierarchy from the package which can later be built like a regular TEA package, i.e. using

                .../configure --prefix ...
                make all isntall

</pre><h4><b>PACKAGE</b> <b>STRUCTURE</b></h4><pre>
       Packages generated by critcl have the following basic structure:

              &lt;TOP&gt;
              +- pkgIndex.tcl
              +- critcl-rt.tcl
              +- license.terms (optional)
              |
              +- tcl (optional)
              |  +- &lt;tsources files&gt;
              |
              +- &lt;platform&gt;
                 +- &lt;shared library&gt;

       <u>Notes</u>

       [1]    The file "<u>pkgIndex.tcl</u>" is the standard package index file expected by Tcl's  package  management.
              It  is  sourced  during a search for packages, and declares the package to Tcl with its files, and
              how to handle them.

       [2]    The file "<u>critcl-rt.tcl</u>" is a helper file containing the common code  used  by  "<u>pkgIndex.tcl</u>"  to
              perform its tasks.

       [3]    The  file  "<u>license.terms</u>"  is  optional  and  appears  only  if the "<u>.critcl</u>" file the package is
              generated from used the command <b>critcl::license</b> to declare package author and license.

       [4]    All files declared with the command <b>critcl::tsources</b> are put into the sub-directory "<u>tcl</u>".

       [5]    The shared library generated by critcl is put into a platform-specific sub-directory.

       The whole structure, and especially the last point, enable us to later merge the results  (for  the  same
       package,  and  version) for multiple target platforms into a single directory structure without conflict,
       by simply copying the top directories over each other. The only files which can conflict are in the &lt;TOP&gt;
       and "<u>tcl</u>" directories, and for these we know that they are identical across targets. The result of such a
       merge would look like:

              &lt;TOP&gt;
              +- pkgIndex.tcl
              +- critcl-rt.tcl
              +- license.terms (optional)
              |
              +- tcl (optional)
              |  +- &lt;tsources files&gt;
              |
              +- &lt;platform1&gt;
              |  +- &lt;shared library1&gt;
              +- &lt;platform2&gt;
              |  +- &lt;shared library2&gt;
              ...
              +- &lt;platformN&gt;
                 +- &lt;shared libraryN&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Jean Claude Wippler, Steve Landers, Andreas Kupries

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report them at <u>https://github.com/andreas-kupries/critcl/issues</u>.  Ideas for enhancements you may have for
       either  package,  application,  and/or  the documentation are also very welcome and should be reported at
       <u>https://github.com/andreas-kupries/critcl/issues</u> as well.

</pre><h4><b>KEYWORDS</b></h4><pre>
       C code, Embedded C Code, calling C code from Tcl, code generator, compile &amp; run, compiler,  dynamic  code
       generation, dynamic compilation, generate package, linker, on demand compilation, on-the-fly compilation

</pre><h4><b>CATEGORY</b></h4><pre>
       Glueing/Embedded C code

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) Jean-Claude Wippler
       Copyright (c) Steve Landers
       Copyright (c) 2011-2024 Andreas Kupries

doc                                                   3.3.1                     <u><a href="../man3tcl/critcl_application_package.3tcl.html">critcl_application_package</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>