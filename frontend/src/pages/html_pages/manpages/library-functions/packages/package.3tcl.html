<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>package - Facilities for package loading and version control</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       package - Facilities for package loading and version control

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>package</b> <b>files</b> <u>package</u>
       <b>package</b> <b>forget</b> ?<u>package</u> <u>package</u> <u>...</u>?
       <b>package</b> <b>ifneeded</b> <u>package</u> <u>version</u> ?<u>script</u>?
       <b>package</b> <b>names</b>
       <b>package</b> <b>present</b> <u>package</u> ?<u>requirement...</u>?
       <b>package</b> <b>present</b> <b>-exact</b> <u>package</u> <u>version</u>
       <b>package</b> <b>provide</b> <u>package</u> ?<u>version</u>?
       <b>package</b> <b>require</b> <u>package</u> ?<u>requirement...</u>?
       <b>package</b> <b>require</b> <b>-exact</b> <u>package</u> <u>version</u>
       <b>package</b> <b>unknown</b> ?<u>command</u>?
       <b>package</b> <b>vcompare</b> <u>version1</u> <u>version2</u>
       <b>package</b> <b>versions</b> <u>package</u>
       <b>package</b> <b>vsatisfies</b> <u>version</u> <u>requirement...</u>
       <b>package</b> <b>prefer</b> ?<b>latest</b>|<b>stable</b>?
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This command keeps a simple database of the packages available for use by the current interpreter and how
       to  load  them  into the interpreter.  It supports multiple versions of each package and arranges for the
       correct version of a package to be loaded based on what is needed by the application.  This command  also
       detects  and  reports  version clashes.  Typically, only the <b>package</b> <b>require</b> and <b>package</b> <b>provide</b> commands
       are invoked in normal Tcl scripts;  the other commands are used primarily by system scripts that maintain
       the package database.

       The behavior of the <b>package</b> command is determined  by  its  first  argument.   The  following  forms  are
       permitted:

       <b>package</b> <b>files</b> <u>package</u>
              Lists  all  files  forming  part of <u>package</u>. Auto-loaded files are not included in this list, only
              files which were directly sourced during package initialization. The list order  corresponds  with
              the order in which the files were sourced.

       <b>package</b> <b>forget</b> ?<u>package</u> <u>package</u> <u>...</u>?
              Removes  all information about each specified package from this interpreter, including information
              provided by both <b>package</b> <b>ifneeded</b> and <b>package</b> <b>provide</b>.

       <b>package</b> <b>ifneeded</b> <u>package</u> <u>version</u> ?<u>script</u>?
              This command typically appears only  in  system  configuration  scripts  to  set  up  the  package
              database.   It indicates that a particular version of a particular package is available if needed,
              and that the package can be added to the interpreter by executing <u>script</u>.  The script is saved  in
              a database for use by subsequent <b>package</b> <b>require</b> commands;  typically, <u>script</u> sets up auto-loading
              for  the  commands  in  the  package  (or calls <b>load</b> and/or <b>source</b> directly), then invokes <b>package</b>
              <b>provide</b> to indicate that the package is present.  There may be information  in  the  database  for
              several  different versions of a single package.  If the database already contains information for
              <u>package</u> and <u>version</u>, the new <u>script</u> replaces the existing one.  If the <u>script</u> argument is omitted,
              the current script for version <u>version</u> of package <u>package</u> is returned, or an empty  string  if  no
              <b>package</b> <b>ifneeded</b> command has been invoked for this <u>package</u> and <u>version</u>.

       <b>package</b> <b>names</b>
              Returns  a  list  of  the  names  of  all packages in the interpreter for which a version has been
              provided (via <b>package</b> <b>provide</b>) or for which a <b>package</b> <b>ifneeded</b> script is available.  The order  of
              elements in the list is arbitrary.

       <b>package</b> <b>present</b> ?<b>-exact</b>? <u>package</u> ?<u>requirement...</u>?
              This  command is equivalent to <b>package</b> <b>require</b> except that it does not try and load the package if
              it is not already loaded.

       <b>package</b> <b>provide</b> <u>package</u> ?<u>version</u>?
              This command is invoked to indicate that version <u>version</u> of package <u>package</u> is now present in  the
              interpreter.  It is typically invoked once as part of an <b>ifneeded</b> script, and again by the package
              itself  when  it  is  finally  loaded.  An error occurs if a different version of <u>package</u> has been
              provided by a previous <b>package</b> <b>provide</b> command.  If the <u>version</u>  argument  is  omitted,  then  the
              command  returns  the  version number that is currently provided, or an empty string if no <b>package</b>
              <b>provide</b> command has been invoked for <u>package</u> in this interpreter.

       <b>package</b> <b>require</b> <u>package</u> ?<u>requirement...</u>?
              This command is typically invoked by Tcl code that  wishes  to  use  a  particular  version  of  a
              particular  package.  The arguments indicate which package is wanted, and the command ensures that
              a suitable version of the package is loaded into the interpreter.  If  the  command  succeeds,  it
              returns the version number that is loaded;  otherwise it generates an error.

              A suitable version of the package is any version which satisfies at least one of the requirements,
              per the rules of <b>package</b> <b>vsatisfies</b>. If multiple versions are suitable the implementation with the
              highest  version  is  chosen.  This last part is additionally influenced by the selection mode set
              with <b>package</b> <b>prefer</b>.

              In the “stable” selection mode the command will select the highest stable version  satisfying  the
              requirements,  if  any.  If  no  stable  version  satisfies the requirements, the highest unstable
              version satisfying the requirements will be selected.  In the “latest” selection mode the  command
              will accept the highest version satisfying all the requirements, regardless of its stableness.

              If  a version of <u>package</u> has already been provided (by invoking the <b>package</b> <b>provide</b> command), then
              its version number must satisfy the <u>requirement</u>s and the command returns immediately.   Otherwise,
              the command searches the database of information provided by previous <b>package</b> <b>ifneeded</b> commands to
              see  if  an  acceptable  version  of  the package is available.  If so, the script for the highest
              acceptable version number is evaluated in the global namespace; it must do whatever  is  necessary
              to  load  the package, including calling <b>package</b> <b>provide</b> for the package.  If the <b>package</b> <b>ifneeded</b>
              database does not contain an acceptable version of the package and a <b>package</b> <b>unknown</b>  command  has
              been  specified  for the interpreter then that command is evaluated in the global namespace;  when
              it completes, Tcl checks again to see if the package is now provided or  if  there  is  a  <b>package</b>
              <b>ifneeded</b>  script  for  it.   If  all  of  these steps fail to provide an acceptable version of the
              package, then the command returns an error.

       <b>package</b> <b>require</b> <b>-exact</b> <u>package</u> <u>version</u>
              This form of the command is used when only the given <u>version</u>  of  <u>package</u>  is  acceptable  to  the
              caller.  This command is equivalent to <b>package</b> <b>require</b> <u>package</u> <u>version</u>-<u>version</u>.

       <b>package</b> <b>unknown</b> ?<u>command</u>?
              This  command  supplies  a  “last  resort” command to invoke during <b>package</b> <b>require</b> if no suitable
              version of a package can be found in the <b>package</b> <b>ifneeded</b> database.  If the  <u>command</u>  argument  is
              supplied,  it  contains the first part of a command;  when the command is invoked during a <b>package</b>
              <b>require</b> command, Tcl appends one or more additional arguments giving the desired package name  and
              requirements.   For  example, if <u>command</u> is <b>foo</b> <b>bar</b> and later the command <b>package</b> <b>require</b> <b>test</b> <b>2.4</b>
              is invoked, then Tcl will execute the command <b>foo</b> <b>bar</b>  <b>test</b>  <b>2.4</b>  to  load  the  package.   If  no
              requirements  are  supplied  to  the  <b>package</b> <b>require</b> command, then only the name will be added to
              invoked command.  If the <b>package</b> <b>unknown</b> command is invoked without a <u>command</u> argument,  then  the
              current  <b>package</b>  <b>unknown</b>  script is returned, or an empty string if there is none.  If <u>command</u> is
              specified as an empty string, then the current <b>package</b> <b>unknown</b> script is removed, if there is one.

       <b>package</b> <b>vcompare</b> <u>version1</u> <u>version2</u>
              Compares the two version numbers given by <u>version1</u> and <u>version2</u>.  Returns -1  if  <u>version1</u>  is  an
              earlier version than <u>version2</u>, 0 if they are equal, and 1 if <u>version1</u> is later than <u>version2</u>.

       <b>package</b> <b>versions</b> <u>package</u>
              Returns  a  list  of all the version numbers of <u>package</u> for which information has been provided by
              <b>package</b> <b>ifneeded</b> commands.

       <b>package</b> <b>vsatisfies</b> <u>version</u> <u>requirement...</u>
              Returns 1 if the <u>version</u> satisfies at least one of the given requirements, and 0  otherwise.  Each
              <u>requirement</u> is allowed to have any of the forms:

              <u>min</u>    This form is called “min-bounded”.

              <u>min</u><b>-</b>   This form is called “min-unbound”.

              <u>min</u><b>-</b><u>max</u>
                     This form is called “bounded”.

              where  “<u>min</u>”  and  “<u>max</u>”  are  valid  version  numbers. The legacy syntax is a special case of the
              extended syntax, keeping backward compatibility. Regarding satisfaction the rules are:

              [1]    The <u>version</u> has to pass at least one of the listed <u>requirement</u>s to be satisfactory.

              [2]    A version satisfies a “bounded” requirement when

                     [a]    For <u>min</u> equal to the <u>max</u> if, and only if the <u>version</u> is equal to the <u>min</u>.

                     [b]    Otherwise if, and only if the <u>version</u> is greater than or equal to the <u>min</u>, and  less
                            than  the  <u>max</u>,  where both <u>min</u> and <u>max</u> have been padded internally with “a0”.  Note
                            that while the comparison to <u>min</u> is inclusive, the comparison to <u>max</u> is exclusive.

              [3]    A “min-bounded” requirement is a “bounded” requirement  in  disguise,  with  the  <u>max</u>  part
                     implicitly  specified  as  the  next higher major version number of the <u>min</u> part. A version
                     satisfies it per the rules above.

              [4]    A <u>version</u> satisfies a “min-unbound” requirement if, and only if it is greater than or equal
                     to the <u>min</u>, where the <u>min</u> has been padded internally with “a0”.  There is no constraint  to
                     a maximum.

       <b>package</b> <b>prefer</b> ?<b>latest</b>|<b>stable</b>?
              With  no  arguments,  the  commands  returns  either “latest” or “stable”, whichever describes the
              current mode of selection logic used by <b>package</b> <b>require</b>.

              When passed the argument “latest”, it sets the selection logic mode to “latest”.

              When passed the argument “stable”, if the mode is already “stable”, that value is  kept.   If  the
              mode  is already “latest”, then the attempt to set it back to “stable” is ineffective and the mode
              value remains “latest”.

              When passed any other value as an argument, raise an invalid argument error.

              When an interpreter is created, its initial selection mode value is set  to  “stable”  unless  the
              environment  variable  <b>TCL_PKG_PREFER_LATEST</b>  is  set  (to any value) or the Tcl package itself is
              unstable. Otherwise the initial (and permanent) selection mode value is set to “latest”.

</pre><h4><b>VERSION</b> <b>NUMBERS</b></h4><pre>
       Version numbers consist of one or more decimal numbers separated by dots, such as 2 or 1.162 or 3.1.13.1.
       The first number is called the major version number.  Larger numbers correspond to later  versions  of  a
       package,  with  leftmost numbers having greater significance.  For example, version 2.1 is later than 1.3
       and version 3.4.6 is later than 3.3.5.  Missing fields are equivalent to zeroes:  version 1.3 is the same
       as version 1.3.0 and 1.3.0.0, so it is earlier than 1.3.1 or  1.3.0.2.   In  addition,  the  letters  “a”
       (alpha)  and/or  “b”  (beta)  may  appear  exactly  once  to  replace a dot for separation. These letters
       semantically add a negative specifier into the version, where “a” is -2, and  “b”  is  -1.  Each  may  be
       specified  only  once,  and  “a”  or  “b”  are  mutually  exclusive  in  a  specifier. Thus 1.3a1 becomes
       (semantically) 1.3.-2.1, 1.3b1 is  1.3.-1.1.  Negative  numbers  are  not  directly  allowed  in  version
       specifiers.  A version number not containing the letters “a” or “b” as specified above is called a <b>stable</b>
       version,  whereas  presence  of the letters causes the version to be called is <b>unstable</b>.  A later version
       number is assumed to be upwards compatible with an earlier version number as long as both  versions  have
       the same major version number.  For example, Tcl scripts written for version 2.3 of a package should work
       unchanged under versions 2.3.2, 2.4, and 2.5.1.  Changes in the major version number signify incompatible
       changes: if code is written to use version 2.1 of a package, it is not guaranteed to work unmodified with
       either version 1.7.3 or version 3.1.

</pre><h4><b>PACKAGE</b> <b>INDICES</b></h4><pre>
       The  recommended  way to use packages in Tcl is to invoke <b>package</b> <b>require</b> and <b>package</b> <b>provide</b> commands in
       scripts, and use the procedure <b>pkg_mkIndex</b> to create package index  files.   Once  you  have  done  this,
       packages will be loaded automatically in response to <b>package</b> <b>require</b> commands.  See the documentation for
       <b>pkg_mkIndex</b> for details.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To state that a Tcl script requires the Tk and http packages, put this at the top of the script:

              <b>package</b> <b>require</b> Tk
              <b>package</b> <b>require</b> http

       To  test  to  see  if  the  Snack  package  is  available  and  load  if it is (often useful for optional
       enhancements to programs where the loss of the functionality is not critical) do this:

              if {[catch {<b>package</b> <b>require</b> Snack}]} {
                  # Error thrown - package not found.
                  # Set up a dummy interface to work around the absence
              } else {
                  # We have the package, configure the app to use it
              }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/msgcat.3tcl.html">msgcat</a>(3tcl), <a href="../man3tcl/packagens.3tcl.html">packagens</a>(3tcl), <a href="../man3tcl/pkgMkIndex.3tcl.html">pkgMkIndex</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       package, version

Tcl                                                    7.5                                         <u><a href="../man3tcl/package.3tcl.html">package</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>