<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>modbus_set_slave - set slave number in the context</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libmodbus-dev">libmodbus-dev_3.1.6-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       modbus_set_slave - set slave number in the context

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>int</b> <b>modbus_set_slave(modbus_t</b> <b>*</b><u>ctx</u><b>,</b> <b>int</b> <u>slave</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>modbus_set_slave()</b> function shall set the slave number in the libmodbus context.

       The behavior depends of network and the role of the device:

       <b>RTU</b>
           Define the slave ID of the remote device to talk in master mode or set the internal slave ID in slave
           mode. According to the protocol, a Modbus device must only accept message holding its slave number or
           the special broadcast number.

       <b>TCP</b>
           The slave number is only required in TCP if the message must reach a device on a serial network. Some
           not compliant devices or software (such as modpoll) uses the slave ID as unit identifier, that’s
           incorrect (cf page 23 of Modbus Messaging Implementation Guide v1.0b) but without the slave value,
           the faulty remote device or software drops the requests! The special value MODBUS_TCP_SLAVE (0xFF)
           can be used in TCP mode to restore the default value.

       The broadcast address is MODBUS_BROADCAST_ADDRESS. This special value must be use when you want all
       Modbus devices of the network receive the request.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The function shall return 0 if successful. Otherwise it shall return -1 and set errno to one of the
       values defined below.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EINVAL</b>
           The slave number is invalid.

</pre><h4><b>EXAMPLE</b></h4><pre>
           modbus_t *ctx;

           ctx = modbus_new_rtu("/dev/ttyUSB0", 115200, 'N', 8, 1);
           if (ctx == NULL) {
               fprintf(stderr, "Unable to create the libmodbus context\n");
               return -1;
           }

           rc = modbus_set_slave(ctx, YOUR_DEVICE_ID);
           if (rc == -1) {
               fprintf(stderr, "Invalid slave ID\n");
               modbus_free(ctx);
               return -1;
           }

           if (modbus_connect(ctx) == -1) {
               fprintf(stderr, "Connection failed: %s\n", modbus_strerror(errno));
               modbus_free(ctx);
               return -1;
           }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/modbus_get_slave.3.html">modbus_get_slave</a></b>(3)

</pre><h4><b>AUTHORS</b></h4><pre>
       The libmodbus documentation was written by Stéphane Raimbault &lt;<a href="mailto:stephane.raimbault@gmail.com">stephane.raimbault@gmail.com</a>&gt;

libmodbus v3.1.6                                   12/09/2019                                <u><a href="../man3/MODBUS_SET_SLAVE.3.html">MODBUS_SET_SLAVE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>