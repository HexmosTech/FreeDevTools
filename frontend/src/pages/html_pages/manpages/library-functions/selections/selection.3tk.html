<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>selection - Manipulate the X selection</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tk9.0-doc">tk9.0-doc_9.0.1-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       selection - Manipulate the X selection

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>selection</b> <u>option</u> ?<u>arg</u> <u>...</u>?
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  command  provides  a  Tcl  interface to the X selection mechanism and implements the full selection
       functionality described in the X Inter-Client Communication Conventions Manual (ICCCM).

       Note that for management of the <b>CLIPBOARD</b> selection (see below), the <b>clipboard</b> command may also be used.

       The first argument to <b>selection</b> determines the format of the rest of the arguments and  the  behavior  of
       the command.  The following forms are currently supported:

       <b>selection</b> <b>clear</b> ?<b>-displayof</b> <u>window</u>? ?<b>-selection</b> <u>selection</u>?
              If  <u>selection</u>  exists  anywhere on <u>window</u>'s display, clear it so that no window owns the selection
              anymore.  <u>Selection</u> specifies the X selection that should be cleared, and should be an  atom  name
              such  as  <b>PRIMARY</b> or <b>CLIPBOARD</b>; see the Inter-Client Communication Conventions Manual for complete
              details.  <u>Selection</u> defaults to <b>PRIMARY</b> and <u>window</u> defaults to “.”.  Returns an empty string.

       <b>selection</b> <b>get</b> ?<b>-displayof</b> <u>window</u>? ?<b>-selection</b> <u>selection</u>? ?<b>-type</b> <u>type</u>?
              Retrieves the value of <u>selection</u> from <u>window</u>'s display and returns  it  as  a  result.   <u>Selection</u>
              defaults to <b>PRIMARY</b> and <u>window</u> defaults to “.”.  <u>Type</u> specifies the form in which the selection is
              to  be returned (the desired “target” for conversion, in ICCCM terminology), and should be an atom
              name such as <b>STRING</b> or <b>FILE_NAME</b>;  see  the  Inter-Client  Communication  Conventions  Manual  for
              complete  details.   <u>Type</u>  defaults  to  <b>STRING</b>.   The  selection  owner  may choose to return the
              selection in any of several different representation formats, such as <b>STRING</b>,  <b>UTF8_STRING</b>,  <b>ATOM</b>,
              <b>INTEGER</b>,  etc.  (this  format  is  different  than  the  selection type; see the ICCCM for all the
              confusing details).  If the selection is returned in a non-string format, such as <b>INTEGER</b> or <b>ATOM</b>,
              the <b>selection</b> command converts it to string format as a collection of fields separated by  spaces:
              atoms  are  converted  to  their  textual  names,  and  anything  else is converted to hexadecimal
              integers.  Note that <b>selection</b> <b>get</b> does not retrieve  the  selection  in  the  <b>UTF8_STRING</b>  format
              unless told to.

       <b>selection</b> <b>handle</b> ?<b>-selection</b> <u>s</u>? ?<b>-type</b> <u>t</u>? ?<b>-format</b> <u>f</u>? <u>window</u> <u>command</u>
              Creates  a handler for selection requests, such that <u>command</u> will be executed whenever selection <u>s</u>
              is owned by <u>window</u> and someone attempts to retrieve it in the form given by  type  <u>t</u>  (e.g.  <u>t</u>  is
              specified  in  the  <b>selection</b>  <b>get</b>  command).   <u>S</u> defaults to <b>PRIMARY</b>, <u>t</u> defaults to <b>STRING</b>, and <u>f</u>
              defaults to <b>STRING</b>.  If <u>command</u> is an empty string then any existing handler for <u>window</u>, <u>t</u>, and  <u>s</u>
              is  removed.   Note  that  when  the  selection is handled as type <b>STRING</b> it is also automatically
              handled as type <b>UTF8_STRING</b> as well.

              When <u>selection</u> is requested, <u>window</u> is the selection  owner,  and  <u>type</u>  is  the  requested  type,
              <u>command</u>  will  be executed as a Tcl command with two additional numbers appended to it (with space
              separators).  The two additional numbers are <u>offset</u> and <u>maxChars</u>:   <u>offset</u>  specifies  a  starting
              character  position  in  the  selection  and  <u>maxChars</u>  gives  the maximum number of characters to
              retrieve.  The command should return a value consisting of at  most  <u>maxChars</u>  of  the  selection,
              starting  at position <u>offset</u>.  For very large selections (larger than <u>maxChars</u>) the selection will
              be retrieved using several invocations of <u>command</u>  with  increasing  <u>offset</u>  values.   If  <u>command</u>
              returns a string whose length is less than <u>maxChars</u>, the return value is assumed to include all of
              the  remainder  of  the  selection;   if  the length of <u>command</u>'s result is equal to <u>maxChars</u> then
              <u>command</u> will be invoked again, until it eventually returns a result shorter  than  <u>maxChars</u>.   The
              value of <u>maxChars</u> will always be relatively large (thousands of characters).

              If  <u>command</u> returns an error then the selection retrieval is rejected just as if the selection did
              not exist at all.

              The <u>format</u> argument specifies the representation that should be used to transmit the selection  to
              the  requester  (the second column of Table 2 of the ICCCM), and defaults to <b>STRING</b>.  If <u>format</u> is
              <b>STRING</b>, the selection is transmitted as 8-bit ASCII characters (i.e.  just in the form returned by
              <u>command</u>, in the system <b>encoding</b>; the <b>UTF8_STRING</b> format always uses UTF-8 as  its  encoding).   If
              <u>format</u>  is  <b>ATOM</b>,  then  the  return  value from <u>command</u> is divided into fields separated by white
              space;  each field is converted to its atom value,  and  the  32-bit  atom  value  is  transmitted
              instead  of  the  atom  name.  For any other <u>format</u>, the return value from <u>command</u> is divided into
              fields separated by white space and each field is converted to a  32-bit  integer;   an  array  of
              integers is transmitted to the selection requester.

              The <u>format</u> argument is needed only for compatibility with selection requesters that do not use Tk.
              If  Tk is being used to retrieve the selection then the value is converted back to a string at the
              requesting end, so <u>format</u> is irrelevant.

       <b>selection</b> <b>own</b> ?<b>-displayof</b> <u>window</u>? ?<b>-selection</b> <u>selection</u>?

       <b>selection</b> <b>own</b> ?<b>-command</b> <u>command</u>? ?<b>-selection</b> <u>selection</u>? <u>window</u>
              The first form of <b>selection</b> <b>own</b> returns the path name of the window in this application that  owns
              <u>selection</u>  on  the  display containing <u>window</u>, or an empty string if no window in this application
              owns the selection.  <u>Selection</u> defaults to <b>PRIMARY</b> and <u>window</u> defaults to “.”.

              The second form of <b>selection</b> <b>own</b> causes <u>window</u> to become the new owner of  <u>selection</u>  on  <u>window</u>'s
              display,  returning an empty string as result. The existing owner, if any, is notified that it has
              lost the selection.  If <u>command</u> is specified, it is a Tcl script to execute when some other window
              claims ownership of the selection away from <u>window</u>.  <u>Selection</u> defaults to PRIMARY.

</pre><h4><b>WIDGET</b> <b>FACILITIES</b></h4><pre>
       The <b>text</b>, <b>entry</b>, <b>ttk::entry</b>, <b>listbox</b>, <b>spinbox</b> and <b>ttk::spinbox</b> widgets have the option  <b>-exportselection</b>.
       If  a widget has this option set to boolean <b>true</b>, then (in an unsafe interpreter) a selection made in the
       widget is automatically written to the <b>PRIMARY</b> selection.

       A GUI event, for example <b>&lt;&lt;PasteSelection&gt;&gt;</b>, can copy the <b>PRIMARY</b> selection  to  certain  widgets.   This
       copy  is implemented by a widget binding to the event.  The binding script makes appropriate calls to the
       <b>selection</b> command.

</pre><h4><b>PORTABILITY</b> <b>ISSUES</b></h4><pre>
       On X11, the <b>PRIMARY</b> selection is a system-wide feature of the X server,  allowing  communication  between
       different processes that are X11 clients.

       On Windows, the <b>PRIMARY</b> selection is not provided by the system, but only by Tk, and so it is shared only
       between  windows  of  a  parent  interpreter  and  its  child  interpreters.   It  is  not shared between
       interpreters in different processes or different threads.  Each parent interpreter has a separate <b>PRIMARY</b>
       selection that is shared only with its child interpreters which are not safe interpreters.

</pre><h4><b>SECURITY</b></h4><pre>
       A safe interpreter cannot read from the <b>PRIMARY</b> selection because its <b>selection</b> command is  hidden.   For
       this reason the <b>PRIMARY</b> selection cannot be written to the Tk widgets of a safe interpreter.

       A  Tk  widget  can  have  its option <b>-exportselection</b> set to boolean <b>true</b>, but in a safe interpreter this
       option has no effect: writing from the widget to the <b>PRIMARY</b> selection is disabled.

       These are security features.  A safe interpreter may run untrusted code, and it is  a  security  risk  if
       this untrusted code can read or write the <b>PRIMARY</b> selection used by other interpreters.

</pre><h4><b>EXAMPLES</b></h4><pre>
       On  X11  platforms,  one of the standard selections available is the <b>SECONDARY</b> selection. Hardly anything
       uses it, but here is how to read it using Tk:

              set selContents [<b>selection</b> <b>get</b> -selection SECONDARY]

       Many different types of data may be available for a selection; the special type <b>TARGETS</b> allows you to get
       a list of available types:

              foreach type [<b>selection</b> <b>get</b> -type TARGETS] {
                 puts "Selection PRIMARY supports type $type"
              }

       To claim the selection, you must first set up a handler to supply the data for the  selection.  Then  you
       have to claim the selection...
              # Set up the data handler ready for incoming requests
              set foo "This is a string with some data in it... blah blah"
              <b>selection</b> <b>handle</b> -selection SECONDARY . getData
              proc getData {offset maxChars} {
                 puts "Retrieving selection starting at $offset"
                 return [string range $::foo $offset [expr {$offset+$maxChars-1}]]
              }

              # Now we grab the selection itself
              puts "Claiming selection"
              <b>selection</b> <b>own</b> -command lost -selection SECONDARY .
              proc lost {} {
                 puts "Lost selection"
              }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tk/clipboard.3tk.html">clipboard</a>(3tk)

</pre><h4><b>KEYWORDS</b></h4><pre>
       clear, format, handler, ICCCM, own, selection, target, type

Tk                                                     8.1                                        <u><a href="../man3tk/selection.3tk.html">selection</a></u>(3tk)
</pre>
 </div>
</div></section>
</div>
</body>
</html>