<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mojo::Server::Hypnotoad - A production web serv...ALL GLORY TO THE HYPNOTOAD!</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmojolicious-perl">libmojolicious-perl_9.39+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mojo::Server::Hypnotoad - A production web serv...ALL GLORY TO THE HYPNOTOAD!

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Mojo::Server::Hypnotoad;

         my $hypnotoad = Mojo::Server::Hypnotoad-&gt;new;
         $hypnotoad-&gt;run('/home/sri/myapp.pl');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mojo::Server::Hypnotoad is a full featured, UNIX optimized, pre-forking non-blocking I/O HTTP and
       WebSocket server, built around the very well tested and reliable Mojo::Server::Prefork, with IPv6, TLS,
       SNI, UNIX domain socket, Comet (long polling), keep-alive, multiple event loop and hot deployment support
       that just works. Note that the server uses signals for process management, so you should avoid modifying
       signal handlers in your applications.

       To start applications with it you can use the hypnotoad script, which listens on port 8080, automatically
       daemonizes the server process and defaults to "production" mode for Mojolicious and Mojolicious::Lite
       applications.

         $ hypnotoad ./myapp.pl

       You can run the same command again for automatic hot deployment.

         $ hypnotoad ./myapp.pl
         Starting hot deployment for Hypnotoad server 31841.

       This second invocation will load the application again, detect the process id file with it, and send a
       "USR2" signal to the already running server.

       For better scalability (epoll, kqueue) and to provide non-blocking name resolution, SOCKS5 as well as TLS
       support, the optional modules EV (4.32+), Net::DNS::Native (0.15+), IO::Socket::Socks (0.64+) and
       IO::Socket::SSL (2.009+) will be used automatically if possible. Individual features can also be disabled
       with the "MOJO_NO_NNR", "MOJO_NO_SOCKS" and "MOJO_NO_TLS" environment variables.

       See "DEPLOYMENT" in Mojolicious::Guides::Cookbook for more.

</pre><h4><b>MANAGER</b> <b>SIGNALS</b></h4><pre>
       The Mojo::Server::Hypnotoad manager process can be controlled at runtime with the following signals.

   <b>INT,</b> <b>TERM</b>
       Shut down server immediately.

   <b>QUIT</b>
       Shut down server gracefully.

   <b>TTIN</b>
       Increase worker pool by one.

   <b>TTOU</b>
       Decrease worker pool by one.

   <b>USR2</b>
       Attempt zero downtime software upgrade (hot deployment) without losing any incoming connections.

         Manager (old)
         |- Worker [1]
         |- Worker [2]
         |- Worker [3]
         |- Worker [4]
         +- Manager (new)
            |- Worker [1]
            |- Worker [2]
            |- Worker [3]
            +- Worker [4]

       The new manager will automatically send a "QUIT" signal to the old manager and take over serving requests
       after starting up successfully.

</pre><h4><b>WORKER</b> <b>SIGNALS</b></h4><pre>
       Mojo::Server::Hypnotoad worker processes can be controlled at runtime with the following signals.

   <b>QUIT</b>
       Stop worker gracefully.

</pre><h4><b>SETTINGS</b></h4><pre>
       Mojo::Server::Hypnotoad can be configured with the following settings, see "Hypnotoad" in
       Mojolicious::Guides::Cookbook for examples.

   <b>accepts</b>
         accepts =&gt; 100

       Maximum number of connections a worker is allowed to accept, before stopping gracefully and then getting
       replaced with a newly started worker, defaults to the value of "accepts" in Mojo::Server::Prefork.
       Setting the value to 0 will allow workers to accept new connections indefinitely. Note that up to half of
       this value can be subtracted randomly to improve load balancing, and to make sure that not all workers
       restart at the same time.

   <b>backlog</b>
         backlog =&gt; 128

       Listen backlog size, defaults to the value of "backlog" in Mojo::Server::Daemon.

   <b>clients</b>
         clients =&gt; 100

       Maximum number of accepted connections each worker process is allowed to handle concurrently, before
       stopping to accept new incoming connections, defaults to the value of "max_connections" in Mojo::IOLoop.
       Note that high concurrency works best with applications that perform mostly non-blocking operations, to
       optimize for blocking operations you can decrease this value and increase "workers" instead for better
       performance.

   <b>graceful_timeout</b>
         graceful_timeout =&gt; 15

       Maximum amount of time in seconds stopping a worker gracefully may take before being forced, defaults to
       the value of "graceful_timeout" in Mojo::Server::Prefork. Note that this value should usually be a little
       larger than the maximum amount of time you expect any one request to take.

   <b>heartbeat_interval</b>
         heartbeat_interval =&gt; 3

       Heartbeat interval in seconds, defaults to the value of "heartbeat_interval" in Mojo::Server::Prefork.

   <b>heartbeat_timeout</b>
         heartbeat_timeout =&gt; 2

       Maximum amount of time in seconds before a worker without a heartbeat will be stopped gracefully,
       defaults to the value of "heartbeat_timeout" in Mojo::Server::Prefork. Note that this value should
       usually be a little larger than the maximum amount of time you expect any one operation to block the
       event loop.

   <b>inactivity_timeout</b>
         inactivity_timeout =&gt; 10

       Maximum amount of time in seconds a connection with an active request can be inactive before getting
       closed, defaults to the value of "inactivity_timeout" in Mojo::Server::Daemon. Setting the value to 0
       will allow connections to be inactive indefinitely.

   <b>keep_alive_timeout</b>
         keep_alive_timeout =&gt; 10

       Maximum amount of time in seconds a connection without an active request can be inactive before getting
       closed, defaults to the value of "keep_alive_timeout" in Mojo::Server::Daemon. Setting the value to 0
       will allow connections to be inactive indefinitely.

   <b>listen</b>
         listen =&gt; ['http://*:80']

       Array reference with one or more locations to listen on, defaults to "http://*:8080". See also "listen"
       in Mojo::Server::Daemon for more examples.

   <b>pid_file</b>
         pid_file =&gt; '/var/run/hypnotoad.pid'

       Full path to process id file, defaults to "hypnotoad.pid" in the same directory as the application. Note
       that this value can only be changed after the server has been stopped.

   <b>proxy</b>
         proxy =&gt; 1

       Activate reverse proxy support, which allows for the "X-Forwarded-For" and "X-Forwarded-Proto" headers to
       be picked up automatically, defaults to the value of "reverse_proxy" in Mojo::Server.

   <b>requests</b>
         requests =&gt; 50

       Number of keep-alive requests per connection, defaults to the value of "max_requests" in
       Mojo::Server::Daemon.

   <b>spare</b>
         spare =&gt; 4

       Temporarily spawn up to this number of additional workers if there is a need, defaults to the value of
       "spare" in Mojo::Server::Prefork. This allows for new workers to be started while old ones are still
       shutting down gracefully, drastically reducing the performance cost of worker restarts.

   <b>trusted_proxies</b>
         trusted_proxies =&gt; ['10.0.0.0/8', '127.0.0.1', '172.16.0.0/12', '192.168.0.0/16', 'fc00::/7']

       Trusted reverse proxies, addresses or networks in CIDR form.

   <b>upgrade_timeout</b>
         upgrade_timeout =&gt; 45

       Maximum amount of time in seconds a zero downtime software upgrade may take before getting canceled,
       defaults to 180.

   <b>workers</b>
         workers =&gt; 10

       Number of worker processes, defaults to the value of "workers" in Mojo::Server::Prefork. A good rule of
       thumb is two worker processes per CPU core for applications that perform mostly non-blocking operations,
       blocking operations often require more and benefit from decreasing concurrency with "clients" (often as
       low as 1). Note that during zero downtime software upgrades there will be twice as many workers active
       for a short amount of time.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       Mojo::Server::Hypnotoad implements the following attributes.

   <b>prefork</b>
         my $prefork = $hypnotoad-&gt;prefork;
         $hypnotoad  = $hypnotoad-&gt;prefork(Mojo::Server::Prefork-&gt;new);

       Mojo::Server::Prefork object this server manages.

   <b>upgrade_timeout</b>
         my $timeout = $hypnotoad-&gt;upgrade_timeout;
         $hypnotoad  = $hypnotoad-&gt;<a href="../man15/upgrade_timeout.15.html">upgrade_timeout</a>(15);

       Maximum amount of time in seconds a zero downtime software upgrade may take before getting canceled,
       defaults to 180.

</pre><h4><b>METHODS</b></h4><pre>
       Mojo::Server::Hypnotoad inherits all methods from Mojo::Base and implements the following new ones.

   <b>configure</b>
         $hypnotoad-&gt;configure('hypnotoad');

       Configure server from application settings.

   <b>run</b>
         $hypnotoad-&gt;run('script/my_app');

       Run server for application and wait for "MANAGER SIGNALS".

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mojolicious, Mojolicious::Guides, &lt;https://mojolicious.org&gt;.

perl v5.40.0                                       2024-12-07                       <u>Mojo::Server::<a href="../man3pm/Hypnotoad.3pm.html">Hypnotoad</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>