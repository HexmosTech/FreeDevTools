<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ares_set_servers_csv, ares_set_servers_ports_csv, ares_get_servers_csv - Set or Get a list of DNS servers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libc-ares-dev">libc-ares-dev_1.34.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ares_set_servers_csv, ares_set_servers_ports_csv, ares_get_servers_csv - Set or Get a list of DNS servers
       used for queries.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;ares.h&gt;

       int ares_set_servers_csv(ares_channel_t *<u>channel</u>, const char* <u>servers</u>)

       int ares_set_servers_ports_csv(ares_channel_t *<u>channel</u>, const char* <u>servers</u>)

       char *ares_get_servers_csv(const ares_channel_t *<u>channel</u>)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>ares_set_servers_csv</b> and <b>ares_set_servers_ports_csv</b> functions set the list of DNS servers that c-ares
       will  query.   As  of  v1.22.0  this  function  can  be called on an active channel with running queries,
       previously it would return ARES_ENOTIMP.

       Though not recommended, passing NULL for servers will clear all configured servers and make an inoperable
       channel, this may be advantageous for test simulation but unlikely to be useful in production.

       The <b>ares_get_servers_csv</b> retrieves the list of servers in comma delimited format.

       The input and output format is a comma separated list of servers.  Two formats are available, the typical
       <b><a href="../man5/resolv.conf.5.html">resolv.conf</a>(5)</b> <u>nameserver</u> format, as well as a <u>URI</u> format.  Both formats can be used at the same time  in
       the provided CSV string.

       The <u>nameserver</u> format is:

       ip[:port][%iface]

           The  <b>ip</b> may be encapsulated in square brackets ([ ]), and must be if using ipv6 and also specifying a
           port.

           The <b>port</b> is optional, and will default to 53 or the value specified in <b><a href="../man3/ares_init_options.3.html">ares_init_options</a>(3)</b>.

           The <b>iface</b> is specific to IPv6 link-local servers (fe80::/10) and should not otherwise be used.

       <u>nameserver</u> format examples:

       192.168.1.100
       192.168.1.101:53
       [1:2:3::4]:53
       [fe80::1]:53%eth0

       The <u>URI</u> format is is made up of these defined schemes:
           <u>dns://</u> - Normal DNS server (UDP + TCP). We need to be careful  not  to  conflict  with  query  params
           defined in RFC4501 since we'd technically be extending this URI scheme. Port defaults to 53.

           <u>dns+tls://</u> - DNS over TLS. Port defaults to 853.

           <u>dns+https://</u> - DNS over HTTPS. Port defaults to 443.

       Query parameters are defined as below.  Additional parameters may be defined in the future.

           <u>tcpport</u>  -  TCP  port  to  use,  only  for <u>dns://</u> scheme. The port specified as part of the authority
           component of the URI will be used for both UDP and TCP by default, this option will override the  TCP
           port.

           <u>ipaddr</u>  -  Only  for  <u>dns+tls://</u>  and  <u>dns+https://</u>. If the authority component of the URI contains a
           hostname, this is used to specify the ip address of the hostname. If not specified, will need to  use
           a non-secure server to perform a DNS lookup to retrieve this information. It is always recommended to
           have both the ip address and fully qualified domain name specified.

           <u>hostname</u> - Only for <u>dns+tls://</u> and <u>dns+https://</u>. If the authority component of the URI contains an ip
           address,  this  is  used  to specify the fully qualified domain name of the server. If not specified,
           will need to use a non-secure server to perform a DNS reverse lookup to retrieve this information. It
           is always recommended to have both the ip address and fully qualified domain name specified.

           <u>domain</u> - If specified, this server is a domain-specific server. Any queries for this domain  will  be
           routed to this server. Multiple servers may be tagged with the same domain.

       <u>URI</u> format Examples:

       dns://8.8.8.8
       dns://[2001:4860:4860::8888]
       dns://[fe80::b542:84df:1719:65e3%en0]
       dns://192.168.1.1:55
       dns://192.168.1.1?tcpport=1153
       dns://10.0.1.1?domain=myvpn.com
       dns+tls://8.8.8.8?hostname=dns.google
       dns+tls://one.one.one.one?ipaddr=1.1.1.1

       <b>NOTE</b>: While we are defining the scheme for things like domain-specific servers, DNS over TLS and DNS over
       HTTPS,  the  underlying  implementations for those features do not yet exist and therefore will result in
       errors if they are attempted to be used.

       As of c-ares 1.24.0, <b>ares_set_servers_csv</b> and <b>ares_set_servers_ports_csv</b> are identical.   Prior  versions
       would  simply omit ports in <b>ares_set_servers_csv</b> but due to the addition of link local interface support,
       this difference was removed.

</pre><h4><b>EXAMPLE</b></h4><pre>
       192.168.1.100,[fe80::1]:53%eth0,dns://192.168.1.1?tcpport=1153

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b><a href="../man3/ares_set_servers_csv.3.html">ares_set_servers_csv</a>(3)</b> and <b><a href="../man3/ares_set_servers_ports_csv.3.html">ares_set_servers_ports_csv</a>(3)</b> may return any of the following values:

       <b>ARES_SUCCESS</b>   The name servers configuration was successfully initialized.

       <b>ARES_ENOMEM</b>    The process's available memory was exhausted.

       <b>ARES_ENODATA</b>   The channel data identified by <u>channel</u> was invalid.

       <b>ARES_ENOTINITIALIZED</b>
                      c-ares library initialization not yet performed.

       <b><a href="../man3/ares_get_servers_csv.3.html">ares_get_servers_csv</a>(3)</b> returns a string representing the servers configured which  must  be  freed  with
       <b><a href="../man3/ares_free_string.3.html">ares_free_string</a>(3)</b>.  If it returns NULL, this is an out of memory condition.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ares_set_servers.3.html">ares_set_servers</a></b>(3)

</pre><h4><b>AVAILABILITY</b></h4><pre>
       <b>ares_set_servers_csv</b>  was  added  in  c-ares 1.7.2 <b>ares_set_servers_ports_csv</b> was added in c-ares 1.11.0.
       <b>ares_get_servers_csv</b> was added in c-ares 1.24.0.  <u>URI</u> support was added in c-ares 1.34.0.

                                                   5 Dec 2023                            <u><a href="../man3/ARES_SET_SERVERS_CSV.3.html">ARES_SET_SERVERS_CSV</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>