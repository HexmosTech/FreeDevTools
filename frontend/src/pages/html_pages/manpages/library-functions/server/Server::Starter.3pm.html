<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server::Starter - a superdaemon for hot-deploying server programs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libserver-starter-perl">libserver-starter-perl_0.35-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Server::Starter - a superdaemon for hot-deploying server programs

</pre><h4><b>SYNOPSIS</b></h4><pre>
         # from command line
         % start_server --port=80 my_httpd

         # in my_httpd
         use Server::Starter qw(server_ports);

         my $listen_sock = IO::Socket::INET-&gt;new(
             Proto =&gt; 'tcp',
         );
         $listen_sock-&gt;fdopen((values %{server_ports()})[0], 'w')
             or die "failed to bind to listening socket:$!";

         while (1) {
             if (my $conn = $listen_sock-&gt;accept) {
                 ....
             }
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       It is often a pain to write a server program that supports graceful restarts, with no resource leaks.
       Server::Starter solves the problem by splitting the task into two.  One is start_server, a script
       provided as a part of the module, which works as a superdaemon that binds to zero or more TCP ports or
       unix sockets, and repeatedly spawns the server program that actually handles the necessary tasks (for
       example, responding to incoming connections).  The spawned server programs under Server::Starter call
       <b><a href="../man2/accept.2.html">accept</a></b>(2) and handle the requests.

       To gracefully restart the server program, send SIGHUP to the superdaemon.  The superdaemon spawns a new
       server program, and if (and only if) it starts up successfully, sends SIGTERM to the old server program.

       By using Server::Starter it is much easier to write a hot-deployable server.  Following are the only
       requirements a server program to be run under Server::Starter should conform to:

       •   receive file descriptors to listen to through an environment variable

       •   perform a graceful shutdown when receiving SIGTERM

       A   Net::Server   personality   that   can   be   run   under   Server::Starter  exists  under  the  name
       Net::Server::SS::PreFork.

</pre><h4><b>METHODS</b></h4><pre>
       server_ports
           Returns zero or more file descriptors on which the server program should call <b><a href="../man2/accept.2.html">accept</a></b>(2) in a hashref.
           Each element of the hashref is: (host:port|port|path_of_unix_socket) =&gt; file_descriptor.

       start_server
           Starts the superdaemon.  Used by the "start_server" script.

</pre><h4><b>AUTHOR</b></h4><pre>
       Kazuho Oku

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Net::Server::SS::PreFork

</pre><h4><b>LICENSE</b></h4><pre>
       This library is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

perl v5.36.0                                       2022-12-12                               <u>Server::<a href="../man3pm/Starter.3pm.html">Starter</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>