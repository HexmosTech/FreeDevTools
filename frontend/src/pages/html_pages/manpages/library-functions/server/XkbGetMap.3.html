<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XkbGetMap  -  Allocate  an XkbDescRec structure and populate it with the server's keyboard client map and</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libx11-doc">libx11-doc_1.8.12-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       XkbGetMap  -  Allocate  an XkbDescRec structure and populate it with the server's keyboard client map and
       server map

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>XkbDescPtr</b> <b>XkbGetMap</b> <b>(Display</b> <b>*</b><u>display</u><b>,</b> <b>unsigned</b> <b>int</b> <u>which</u><b>,</b> <b>unsigned</b> <b>int</b> <u>device_spec</u><b>);</b>

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>display</u>
              connection to X server

       <u>which</u>  mask selecting subcomponents to populate

       <u>device_spec</u>
              device_id, or XkbUseCoreKbd

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Xkb provides two functions to obtain the keyboard mapping components from the server. The first function,
       <u>XkbGetMap,</u> allocates an XkbDescRec structure, retrieves mapping components from the  server,  and  stores
       them  in  the  XkbDescRec  structure  it just allocated. The second function, <u>XkbGetUpdatedMap,</u> retrieves
       mapping components from the server and stores them in an XkbDescRec structure that  has  previously  been
       allocated.

       To allocate an XkbDescRec structure and populate it with the server's keyboard client map and server map,
       use  <u>XkbGetMap.</u>  <u>XkbGetMap</u> is similar to <u>XkbGetKeyboard,</u> but is used only for obtaining the address of an
       XkbDescRec structure that is populated with keyboard mapping components. It  allows  finer  control  over
       which  substructures  of  the  keyboard  mapping  components  are to be populated.  <u>XkbGetKeyboard</u> always
       returns fully populated components, while <u>XkbGetMap</u> can be instructed to  return  a  partially  populated
       component.

       The  <u>which</u>  <u>mask</u> <u>is</u> <u>a</u> <u>bitwise</u> <u>inclusive</u> <u>OR</u> <u>of</u> <u>the</u> <u>masks</u> <u>defined</u> <u>in</u> <u>Table</u> <u>14.1.</u> <u>Only</u> those portions of the
       keyboard server map and the keyboard client maps that are specified in <u>which</u> are allocated and populated.

       In addition to allocating and obtaining the server map and  the  client  map,  <u>XkbGetMap</u>  also  sets  the
       <u>device_spec,</u> the <u>min_key_code,</u> and <u>max_key_code</u> fields of the keyboard description.

       <u>XkbGetMap</u>  is synchronous; it queries the server for the desired information, waits for a reply, and then
       returns. If successful, <u>XkbGetMap</u> returns  a  pointer  to  the  XkbDescRec  structure  it  allocated.  If
       unsuccessful,  <u>XkbGetMap</u>  returns  NULL.  When unsuccessful, one of the following protocol errors is also
       generated: BadAlloc (unable to allocate the XkbDescRec structure), BadValue (some mask bits in <u>which</u>  are
       undefined),  or  BadImplementation  (a  compatible  version  of the Xkb extension is not available in the
       server). To free the returned data, use <u>XkbFreeKeyboard.</u>

       Xkb also provides convenience functions to get partial  component  definitions  from  the  server.  These
       functions are specified in the "convenience functions" column in Table 1. Refer to the sections listed in
       the table for more information on these functions.

                                     Table 1 Xkb Mapping Component Masks
                                          and Convenience Functions
       ────────────────────────────────────────────────────────────────────────────────────────────────
       Mask                             Value    Map      Fields        Convenience
                                                                        Functions
       ────────────────────────────────────────────────────────────────────────────────────────────────
       XkbKeyTypesMask                  (1&lt;&lt;0)   client   types         XkbGetKeyTypes
                                                          size_types    XkbResizeKeyType
                                                          num_types     XkbCopyKeyType
                                                                        XkbCopyKeyTypes
       XkbKeySymsMask                   (1&lt;&lt;1)   client   syms          XkbGetKeySyms
                                                          size_syms     XkbResizeKeySyms
                                                          num_syms      XkbChangeTypesOfKey
                                                          key_sym_map
       XkbModifierMapMask               (1&lt;&lt;2)   client   modmap        XkbGetKeyModifierMap
       XkbExplicitComponentsMask        (1&lt;&lt;3)   server   explicit      XkbGetKeyExplicitComponents
       XkbKeyActionsMask                (1&lt;&lt;4)   server   key_acts      XkbGetKeyActions
                                                          acts          XkbResizeKeyActions
                                                          num_acts
                                                          size_acts
       XkbKeyBehaviorsMask              (1&lt;&lt;5)   server   behaviors     XkbGetKeyBehaviors
       XkbVirtualModsMask               (1&lt;&lt;6)   server   vmods         XkbGetVirtualMods
       XkbVirtualModMapMask             (1&lt;&lt;7)   server   vmodmap       XkbGetVirtualModMap

       Xkb defines combinations of these masks for convenience:

          #define XkbResizableInfoMask   (XkbKeyTypesMask)
          #define XkbAllClientInfoMask   (XkbKeyTypesMask | XkbKeySymsMask |
                                          XkbModifierMapMask)
          #define XkbAllServerInfoMask   (XkbExplicitComponentsMask |
                                          XkbKeyActionsMask |
                                          XkbKeyBehaviorsMask |
                                          XkbVirtualModsMask |
                                          XkbVirtualModMapMask)
          #define XkbAllMapComponentsMask XkbAllClientInfoMask |
                                          XkbAllServerInfoMask)

       Key  types,  symbol maps, and actions are all interrelated: changes in one require changes in the others.
       The convenience functions make it easier to edit these components and handle the interdependencies.

</pre><h4><b>STRUCTURES</b></h4><pre>
       The complete description of an Xkb keyboard is given by an XkbDescRec. The component  structures  in  the
       XkbDescRec represent the major Xkb components.

       typedef struct {
          struct _XDisplay * display;      /* connection to X server */
          unsigned short     flags;        /* private to Xkb, do not modify */
          unsigned short     device_spec;  /* device of interest */
          KeyCode            min_key_code; /* minimum keycode for device */
          KeyCode            max_key_code; /* maximum keycode for device */
          XkbControlsPtr     ctrls;        /* controls */
          XkbServerMapPtr    server;       /* server keymap */
          XkbClientMapPtr    map;          /* client keymap */
          XkbIndicatorPtr    indicators;   /* indicator map */
          XkbNamesPtr        names;        /* names for all components */
          XkbCompatMapPtr    compat;       /* compatibility map */
          XkbGeometryPtr     geom;         /* physical geometry of keyboard */
       } XkbDescRec, *XkbDescPtr;

       The  <u>display</u> field points to an X display structure. The <u>flags</u> <u>field</u> <u>is</u> <u>private</u> <u>to</u> <u>the</u> <u>library:</u> <u>modifying</u>
       <u>flags</u> may yield unpredictable results. The <u>device_spec</u> field  specifies  the  device  identifier  of  the
       keyboard  input device, or XkbUseCoreKeyboard, which specifies the core keyboard device. The <u>min_key_code</u>
       and <u>max_key_code</u> fields specify the least and greatest keycode that can be returned by the keyboard.

       Each structure component has a corresponding mask bit that is used in function calls to indicate that the
       structure should be manipulated in some manner, such as allocating it or  freeing  it.  These  masks  and
       their relationships to the fields in the XkbDescRec are shown in Table 2.

               Table 2 Mask Bits for XkbDescRec
       ──────────────────────────────────────────────────
       Mask Bit               XkbDescRec Field   Value
       ──────────────────────────────────────────────────
       XkbControlsMask        ctrls              (1L&lt;&lt;0)
       XkbServerMapMask       server             (1L&lt;&lt;1)
       XkbIClientMapMask      map                (1L&lt;&lt;2)
       XkbIndicatorMapMask    indicators         (1L&lt;&lt;3)
       XkbNamesMask           names              (1L&lt;&lt;4)
       XkbCompatMapMask       compat             (1L&lt;&lt;5)
       XkbGeometryMask        geom               (1L&lt;&lt;6)
       XkbAllComponentsMask   All Fields         (0x7f)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/XkbChangeTypesOfKey.3.html">XkbChangeTypesOfKey</a></b>(3),  <b><a href="../man3/XkbCopyKeyType.3.html">XkbCopyKeyType</a></b>(3), <b><a href="../man3/XkbCopyKeyTypes.3.html">XkbCopyKeyTypes</a></b>(3), <b><a href="../man3/XkbFreeClientMap.3.html">XkbFreeClientMap</a></b>(3), <b><a href="../man3/XkbGetKeyActions.3.html">XkbGetKeyActions</a></b>(3),
       <b><a href="../man3/XkbGetKeyBehaviors.3.html">XkbGetKeyBehaviors</a></b>(3),   <b><a href="../man3/XkbGetKeyboard.3.html">XkbGetKeyboard</a></b>(3),   <b><a href="../man3/XkbGetKeyExplicitComponents.3.html">XkbGetKeyExplicitComponents</a></b>(3),    <b><a href="../man3/XkbGetKeyModifierMap.3.html">XkbGetKeyModifierMap</a></b>(3),
       <b><a href="../man3/XkbGetKeySyms.3.html">XkbGetKeySyms</a></b>(3),  <b><a href="../man3/XkbGetKeyTypes.3.html">XkbGetKeyTypes</a></b>(3),  <b><a href="../man3/XkbGetUpdatedMap.3.html">XkbGetUpdatedMap</a></b>(3), <b><a href="../man3/XkbGetVirtualModMap.3.html">XkbGetVirtualModMap</a></b>(3), <b><a href="../man3/XkbGetVirtualMods.3.html">XkbGetVirtualMods</a></b>(3),
       <b><a href="../man3/XkbResizeKeyActions.3.html">XkbResizeKeyActions</a></b>(3), <b><a href="../man3/XkbResizeKeySyms.3.html">XkbResizeKeySyms</a></b>(3), <b><a href="../man3/XkbResizeKeyType.3.html">XkbResizeKeyType</a></b>(3)

X Version 11                                      libX11 1.8.12                                     <u><a href="../man3/XkbGetMap.3.html">XkbGetMap</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>