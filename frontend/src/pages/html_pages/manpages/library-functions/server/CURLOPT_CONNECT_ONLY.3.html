<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_CONNECT_ONLY - stop when connected to target server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_CONNECT_ONLY - stop when connected to target server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_CONNECT_ONLY, long only);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass  a  long.  If  the  parameter  equals  1,  it  tells  the  library to perform all the required proxy
       authentication and connection setup, but no data transfer, and then return.

       The option can be used to simply test a connection to a server, but is more useful  when  used  with  the
       <u><a href="../man3/CURLINFO_ACTIVESOCKET.3.html">CURLINFO_ACTIVESOCKET</a>(3)</u> option to <u><a href="../man3/curl_easy_getinfo.3.html">curl_easy_getinfo</a>(3)</u> as the library can set up the connection and then
       the application can obtain the most recently used socket for special data transfers.

       Since  7.86.0,  this  option  can  be  set to '2' and if HTTP or WebSocket are used, libcurl performs the
       request and reads all response headers before handing over control to the application.

       Transfers marked connect only do not reuse any existing connections and connections marked  connect  only
       are not allowed to get reused.

       If  the  connect  only transfer is done using the multi interface, the particular easy handle must remain
       added to the multi handle for as long as the application wants to use it. Once it has been  removed  with
       <u><a href="../man3/curl_multi_remove_handle.3.html">curl_multi_remove_handle</a>(3)</u>, <u><a href="../man3/curl_easy_send.3.html">curl_easy_send</a>(3)</u> and <u><a href="../man3/curl_easy_recv.3.html">curl_easy_recv</a>(3)</u> do not function.

</pre><h4><b>DEFAULT</b></h4><pre>
       0

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           CURLcode ret;
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com/");
           curl_easy_setopt(curl, CURLOPT_CONNECT_ONLY, 1L);
           ret = curl_easy_perform(curl);
           if(ret == CURLE_OK) {
             /* only connected */
           }
         }
       }

</pre><h4><b>HISTORY</b></h4><pre>
       WS and WSS support added in 7.86.0.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.15.2

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_HTTPPROXYTUNNEL.3.html">CURLOPT_HTTPPROXYTUNNEL</a></b>(3), <b><a href="../man3/CURLOPT_VERBOSE.3.html">CURLOPT_VERBOSE</a></b>(3), <b><a href="../man3/curl_easy_recv.3.html">curl_easy_recv</a></b>(3), <b><a href="../man3/curl_easy_send.3.html">curl_easy_send</a></b>(3)

libcurl                                            2025-06-16                            <u><a href="../man3/CURLOPT_CONNECT_ONLY.3.html">CURLOPT_CONNECT_ONLY</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>