<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmdaLabel, pmdaSetLabelCallBack - fill pmLabelSet structures with metric labels</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp-pmda3-dev">libpcp-pmda3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmdaLabel</b>, <b>pmdaSetLabelCallBack</b> - fill pmLabelSet structures with metric labels

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>
       <b>#include</b> <b>&lt;pcp/pmda.h&gt;</b>

       <b>int</b> <b>pmdaLabel(int</b> <u>ident</u><b>,</b> <b>int</b> <u>type</u><b>,</b> <b>pmLabelSet</b> <b>**</b><u>sets</u><b>,</b> <b>pmdaExt</b> <b>*</b><u>pmda</u><b>);</b>
       <b>int</b> <b>pmdaSetLabelCallBack(pmdaInterface</b> <b>*</b><u>dispatch</u><b>,</b> <b>pmdaLabelCallBack</b> <u>callback</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp_pmda</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       As part of the Performance Metrics Domain Agent (PMDA) API (see <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3)), <b>pmdaLabel</b> uses the standard <b>PM‐</b>
       <b><a href="../man3/DA.3.html">DA</a></b>(3)  data structures to return the labels for performance domain, instance domain, metric or individual
       instances in "JSONB" format in the given <u>sets</u> data structure.

       The <u>type</u> argument determines the interpretation of <u>ident</u> and the requested form of label, as follows:

       <b>PM_LABEL_DOMAIN</b>
           when <u>ident</u> is a PMDA domain identifier,

       <b>PM_LABEL_CLUSTER</b>
           when <u>ident</u> is a metric identifier and labels for the cluster containing that  metric  are  being  re‐
           quested.

       <b>PM_LABEL_ITEM</b>
           when <u>ident</u> is a metric identifier,

       <b>PM_LABEL_INDOM</b>
           when <u>ident</u> is an instance domain identifier, or

       <b>PM_LABEL_INSTANCES</b>
           when <u>ident</u> is a metric identifier and labels for all instances of that metric are being requested.

       The label <u>sets</u> pointer must be initialised to NULL before calling <b>pmdaLabel</b> and space is only to be allo‐
       cated  when  labels  are present and returned.  In this case, the return code must indicate the number of
       label <u>sets</u> that have been allocated.  This will only ever be greater than one in  the  <b>PM_LABEL_INSTANCES</b>
       case.

       This  is  one  of  the few generic callbacks in <u>libpcp_pmda</u> (see <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3)) that is incomplete, requiring a
       further <b>pmdaLabelCallBack</b> method of its own.  The additional callback should be registered using <b>pmdaSet‐</b>
       <b>LabelCallBack</b> and the <b>pmdaLabelCallBack</b> method has the following prototype:
       int func(pmInDom <u>indom</u>, unsigned int <u>inst</u>, pmLabelSet **<u>set</u>)

       The purpose of the <b>pmdaLabelCallBack</b> routine is to return the label(s) for an individual instance <u>inst</u> of
       a given instance domain, <u>indom</u>.  Its successful return code differs significantly to  <b>pmdaLabel</b>,  as  de‐
       scribed below.

</pre><h4><b>CAVEAT</b></h4><pre>
       The  PMDA  must  be  using  <b>PMDA_INTERFACE_7</b> or later, as specified in the call to <b><a href="../man3/pmdaDSO.3.html">pmdaDSO</a></b>(3) or <b>pmdaDae‐</b>
       <b><a href="../man3/mon.3.html">mon</a></b>(3).

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       On success <b>pmdaLabel</b> returns the number of label <u>sets</u> created.  This is usually zero or  one,  except  in
       the  case  of  <b>PM_LABEL_INSTANCES</b> where more than one label <u>sets</u> will often be returned, one for each in‐
       stance of the requested metric.

       By contrast, on success of the <b>pmdaLabelCallBack</b> routine the number of labels successfully added  to  the
       provided labelset pointer must be returned (and not the total number of label <u>sets</u>).

       If labels for the requested entity could not be obtained due to a catastrophic failure, such as an out of
       memory condition, these routines will return a negative error code.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pminfo.1.html">pminfo</a></b>(1), <b><a href="../man3/malloc.3.html">malloc</a></b>(3), <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3), <b><a href="../man3/PMDA.3.html">PMDA</a></b>(3), <b><a href="../man3/pmdaDaemon.3.html">pmdaDaemon</a></b>(3), <b><a href="../man3/pmdaDSO.3.html">pmdaDSO</a></b>(3), <b><a href="../man3/pmdaInit.3.html">pmdaInit</a></b>(3) and <b><a href="../man3/pmLookupLabels.3.html">pmLookupLabels</a></b>(3).

Performance Co-Pilot                                   PCP                                          <u><a href="../man3/PMDALABEL.3.html">PMDALABEL</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>