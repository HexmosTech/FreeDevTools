<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MooseX::Daemonize - Role for daemonizing your Moose based application</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmoosex-daemonize-perl">libmoosex-daemonize-perl_0.22-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MooseX::Daemonize - Role for daemonizing your Moose based application

</pre><h4><b>VERSION</b></h4><pre>
       version 0.22

</pre><h4><b>SYNOPSIS</b></h4><pre>
           package My::Daemon;
           use Moose;

           with qw(MooseX::Daemonize);

           # ... define your class ....

           after start =&gt; sub {
               my $self = shift;
               return unless $self-&gt;is_daemon;
               # your daemon code here ...
           };

           # then in your script ...

           my $daemon = My::Daemon-&gt;new_with_options();

           my ($command) = @{$daemon-&gt;extra_argv}
           defined $command || die "No command specified";

           $daemon-&gt;start   if $command eq 'start';
           $daemon-&gt;status  if $command eq 'status';
           $daemon-&gt;restart if $command eq 'restart';
           $daemon-&gt;stop    if $command eq 'stop';

           warn($daemon-&gt;status_message);
           exit($daemon-&gt;exit_code);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Often you want to write a persistent daemon that has a pid file, and responds appropriately to Signals.
       This module provides a set of basic roles as an infrastructure to do that.

</pre><h4><b>WARNING</b></h4><pre>
       The maintainers of this module now recommend using Daemon::Control instead.

</pre><h4><b>CAVEATS</b></h4><pre>
       When going into background MooseX::Daemonize closes all open file handles. This may interfere with you
       logging because it may also close the log file handle you want to write to. To prevent this you can
       either defer opening the log file until after start. Alternatively, use can use the
       'dont_close_all_files' option either from the command line or in your .sh script.

       Assuming you want to use Log::Log4perl for example you could expand the MooseX::Daemonize example above
       like this.

           after start =&gt; sub {
               my $self = shift;
               return unless $self-&gt;is_daemon;
               Log::Log4perl-&gt;init(\$log4perl_config);
               my $logger = Log::Log4perl-&gt;get_logger();
               $logger-&gt;info("Daemon started");
               # your daemon code here ...
           };

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       This list includes attributes brought in from other roles as well we include them here for ease of
       documentation. All of these attributes are settable though MooseX::Getopt's command line handling, with
       the exception of "is_daemon".

       <u>progname</u> <u>Path::Class::Dir</u> <u>|</u> <u>Str</u>
           The name of our daemon, defaults to "$package_name =~ s/::/_/";

       <u>pidbase</u> <u>Path::Class::Dir</u> <u>|</u> <u>Str</u>
           The base for our PID, defaults to "<a href="file:/var/run/">/var/run/</a>"

       <u>basedir</u> <u>Path::Class::Dir</u> <u>|</u> <u>Str</u>
           The directory we chdir to; defaults to "/".

       <u>pidfile</u> <u>MooseX::Daemonize::Pid::File</u> <u>|</u> <u>Str</u>
           The file we store our PID in, defaults to "$pidbase/$progname.pid"

       <u>foreground</u> <u>Bool</u>
           If true, the process won't background. Useful for debugging. This option can be set via Getopt's -f.

       <u>no_double_fork</u> <u>Bool</u>
           If  true,  the process will not perform the typical double-fork, which is extra added protection from
           your process accidentally acquiring a  controlling  terminal.   More  information  can  be  found  by
           Googling "double fork daemonize".

       <u>ignore_zombies</u> <u>Bool</u>
           If true, the process will not clean up zombie processes.  Normally you don't want this.

       <u>dont_close_all_files</u> <u>Bool</u>
           If  true,  the  objects open filehandles will not be closed when daemonized.  Normally you don't want
           this.

       <u>is_daemon</u> <u>Bool</u>
           If true, the process is the backgrounded daemon process, if false it is the parent process.  This  is
           useful for example in an "after 'start' =" sub { }&gt; block.

           <b>NOTE:</b> This option is explicitly <b>not</b> available through MooseX::Getopt.

       <u>stop_timeout</u>
           Number  of  seconds  to  wait for the process to stop, before trying harder to kill it. Defaults to 2
           seconds.

       These are the internal attributes, which are not available through MooseX::Getopt.

       <u>exit_code</u> <u>Int</u>
       <u>status_message</u> <u>Str</u>

</pre><h4><b>METHODS</b></h4><pre>
   <b>Daemon</b> <b>Control</b> <b>Methods</b>
       These methods can be used to control the daemon behavior. Every  effort  has  been  made  to  have  these
       methods DWIM (Do What I Mean), so that you can focus on just writing the code for your daemon.

       Extending  these  methods  is  best  done  with the Moose method modifiers, such as "before", "after" and
       "around".

       <b>start</b>
           Setup a pidfile, fork, then setup the signal handlers.

       <b>stop</b>
           Stop the process matching the pidfile, and unlinks the pidfile.

       <b>restart</b>
           Literally this is:

               $self-&gt;stop();
               $self-&gt;start();

       <b>status</b>
       <b>shutdown</b>

   <b>Pidfile</b> <b>Handling</b> <b>Methods</b>
       <b>init_pidfile</b>
           This method will create a MooseX::Daemonize::Pid::File object and tell it to store  the  PID  in  the
           file "$pidbase/$progname.pid".

       <b>check</b>
           This checks to see if the daemon process is currently running by checking the pidfile.

       <b>get_pid</b>
           Returns the PID of the daemon process.

       <b>save_pid</b>
           Write the pidfile.

       <b>remove_pid</b>
           Removes the pidfile.

   <b>Signal</b> <b>Handling</b> <b>Methods</b>
       <b>setup_signals</b>
           Setup  the signal handlers, by default it only sets up handlers for SIGINT and SIGHUP. If you wish to
           add more signals just use the "after" method modifier and add them.

       <b>handle_sigint</b>
           Handle a INT signal, by default calls "$self-"<b>stop()</b>&gt;

       <b>handle_sighup</b>
           Handle a HUP signal. By default calls "$self-"<b>restart()</b>&gt;

   <b>Exit</b> <b>Code</b> <b>Methods</b>
       These are overridable constant methods used for setting the exit code.

       OK  Returns 0.

       ERROR
           Returns 1.

   <b>Introspection</b>
       <b>meta()</b>
           The "meta()" method from Class::MOP::Class

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       Moose, MooseX::Getopt, MooseX::Types::Path::Class and POSIX

</pre><h4><b>INCOMPATIBILITIES</b></h4><pre>
       Obviously this will not work on Windows.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Daemon::Control, Proc::Daemon, Daemon::Generic

</pre><h4><b>THANKS</b></h4><pre>
       Mike Boyko, Matt S. Trout, Stevan Little, Brandon Black, Ash Berlin and the #moose denizens

       Some bug fixes sponsored by Takkle Inc.

</pre><h4><b>SUPPORT</b></h4><pre>
       Bugs        may        be        submitted        through        the        RT        bug         tracker
       &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=MooseX-Daemonize&gt; (or <a href="mailto:bug-MooseX-Daemonize@rt.cpan.org">bug-MooseX-Daemonize@rt.cpan.org</a>
       &lt;<a href="mailto:bug-MooseX-Daemonize@rt.cpan.org">mailto:bug-MooseX-Daemonize@rt.cpan.org</a>&gt;).

       There    is    also    a    mailing    list    available    for    users   of   this   distribution,   at
       &lt;<a href="http://lists.perl.org/list/moose.html">http://lists.perl.org/list/moose.html</a>&gt;.

       There is also an irc channel available for users of this  distribution,  at  "#moose"  on  "irc.perl.org"
       &lt;irc://irc.perl.org/#moose&gt;.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Stevan Little &lt;<a href="mailto:stevan.little@iinteractive.com">stevan.little@iinteractive.com</a>&gt;

       •   Chris Prather &lt;<a href="mailto:chris@prather.org">chris@prather.org</a>&gt;

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       •   Karen Etheridge &lt;<a href="mailto:ether@cpan.org">ether@cpan.org</a>&gt;

       •   Michael Reddick &lt;<a href="mailto:michael.reddick@gmail.com">michael.reddick@gmail.com</a>&gt;

       •   Yuval Kogman &lt;<a href="mailto:nothingmuch@woobling.org">nothingmuch@woobling.org</a>&gt;

       •   Ash Berlin &lt;<a href="mailto:ash@cpan.org">ash@cpan.org</a>&gt;

       •   Brandon L Black &lt;<a href="mailto:blblack@gmail.com">blblack@gmail.com</a>&gt;

       •   Jonathan Sailor &lt;<a href="mailto:jsailor@cpan.org">jsailor@cpan.org</a>&gt;

       •   David Steinbrunner &lt;<a href="mailto:dsteinbrunner@pobox.com">dsteinbrunner@pobox.com</a>&gt;

       •   Michael Schwern &lt;<a href="mailto:mschwern@cpan.org">mschwern@cpan.org</a>&gt;

       •   Shoichi Kaji &lt;<a href="mailto:skaji@cpan.org">skaji@cpan.org</a>&gt;

       •   Dave Rolsky &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

       •   Chisel Wright &lt;<a href="mailto:chisel@chizography.net">chisel@chizography.net</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENCE</b></h4><pre>
       This software is copyright (c) 2007 by Chris Prather.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.30.0                                       2019-12-22                             <u>MooseX::<a href="../man3pm/Daemonize.3pm.html">Daemonize</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>