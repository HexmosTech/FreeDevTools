<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmGetVersion - fetch installed PCP version number</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmGetVersion</b> - fetch installed PCP version number

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>

       <b>int</b> <b>pmGetVersion(void);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmGetVersion</b> returns a binary encoding of the locally installed PCP version number.

       This  may  be  used  in conjunction with the related macros <b>PM_VERSION</b>(a,b,c) and <b>PM_VERSION_CURRENT</b> that
       generate PCP version numbers in the same format.  Refer to the example below.

       The encoding uses one byte for each of the parts of the version number  of  the  installed  PCP  package,
       namely  the  major number, the minor number and the revision number.  So PCP version 3.10.5 is encoded as
       0x30a05.

       The string format of the installed PCP package version number as also available from <b>pmGetConfig</b> with the
       argument <b>PCP_VERSION</b>.

       <b>pmGetVersion</b> was introduced in PCP 3.10.5.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The following C fragment  demonstrates  the  use  of  both  the  compile-time  macros  and  the  run-time
       <b>pmGetVersion</b> function for an application that should not be built for PCP versions older than 3.10.5, but
       after  that  there are two alternative implementations with a newer (faster, sweeter, smaller) variant of
       the XYZ service that only becoming available in PCP 4.0.0.

       #include &lt;pcp/pmapi.h&gt;

       #ifdef PM_VERSION_CURRENT
       #if PM_VERSION_CURRENT &lt; PM_VERSION(3,10,5)
           /* no pmGetVersion() before PCP 3.10.5 */
           printf("PCP version 0x%x too old\n", PM_VERSION_CURRENT);
       #endif
           version = pmGetVersion();
           if (version &gt;= PM_VERSION(4,0,0) {
            /* V2 of the XYZ service introduced in PCP 4.0.0 */
            printf("Using V2 of service XYZ\n")
            ...
           }
           else {
            printf("Using V1 of service XYZ\n")
            ...
           }
       #else
           {
            char *ver = pmGetConfig("PCP_VERSION");
            /* only option is to extract version number from returned string */
            ...
           }
       #endif

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3), and <b><a href="../man3/pmGetConfig.3.html">pmGetConfig</a></b>(3).

Performance Co-Pilot                                   PCP                                       <u><a href="../man3/PMGETVERSION.3.html">PMGETVERSION</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>