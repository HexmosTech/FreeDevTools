<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"IO::Async::OS" - operating system abstractions for "IO::Async"</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libio-async-perl">libio-async-perl_0.804-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "IO::Async::OS" - operating system abstractions for "IO::Async"

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module acts as a class to provide a number of utility methods whose exact behaviour may depend on
       the type of OS it is running on. It is provided as a class so that specific kinds of operating system can
       override methods in it.

       As well as these support functions it also provides a number of constants, all with names beginning
       "HAVE_" which describe various features that may or may not be available on the OS or perl build. Most of
       these are either hard-coded per OS, or detected at runtime.

       The following constants may be overridden by environment variables.

       •   HAVE_POSIX_FORK

           True  if  the  fork()  call has full POSIX semantics (full process separation).  This is true on most
           OSes but false on MSWin32.

           This may be overridden to be false by setting the environment variable "IO_ASYNC_NO_FORK".

       •   HAVE_THREADS

           True if "ithreads" are available, meaning that the "threads" module can  be  used.  This  depends  on
           whether perl was built with threading support.

           This may be overridable to be false by setting the environment variable "IO_ASYNC_NO_THREADS".

   <b>getfamilybyname</b>
          $family = IO::Async::OS-&gt;getfamilybyname( $name )

       Return  a protocol family value based on the given name. If $name looks like a number it will be returned
       as-is. The string values "inet", "inet6" and "unix" will be converted to the appropriate "AF_*" constant.

   <b>getsocktypebyname</b>
          $socktype = IO::Async::OS-&gt;getsocktypebyname( $name );

       Return a socket type value based on the given name. If $name looks like a number it will be returned  as-
       is. The string values "stream", "dgram" and "raw" will be converted to the appropriate "SOCK_*" constant.

   <b>socketpair</b>
          ( $S1, $S2 ) = IO::Async::OS-&gt;socketpair( $family, $socktype, $proto );

       An abstraction of the <a href="../man2/socketpair.2.html">socketpair</a>(2) syscall, where any argument may be missing (or given as "undef").

       If  $family is not provided, a suitable value will be provided by the OS (likely "AF_UNIX" on POSIX-based
       platforms). If $socktype is not provided, then "SOCK_STREAM" will be used.

       Additionally, this method  supports  building  connected  "SOCK_STREAM"  or  "SOCK_DGRAM"  pairs  in  the
       "AF_INET"  family  even  if  the  underlying  platform's <a href="../man2/socketpair.2.html">socketpair</a>(2) does not, by connecting two normal
       sockets together.

       $family  and  $socktype  may  also  be  given  symbolically   as   defined   by   "getfamilybyname"   and
       "getsocktypebyname".

   <b>pipepair</b>
          ( $rd, $wr ) = IO::Async::OS-&gt;pipepair;

       An abstraction of the <a href="../man2/pipe.2.html">pipe</a>(2) syscall, which returns the two new handles.

   <b>pipequad</b>
          ( $rdA, $wrA, $rdB, $wrB ) = IO::Async::OS-&gt;pipequad;

       This  method  is  intended  for  creating two pairs of filehandles that are linked together, suitable for
       passing as the STDIN/STDOUT pair to a child process.  After this function returns, $rdA and $wrA will  be
       a linked pair, as will $rdB and $wrB.

       On  platforms  that  support <a href="../man2/socketpair.2.html">socketpair</a>(2), this implementation will be preferred, in which case $rdA and
       $wrB will actually be the same filehandle, as will $rdB and $wrA. This saves a  file  descriptor  in  the
       parent process.

       When  creating  a  IO::Async::Stream  or  subclass of it, the "read_handle" and "write_handle" parameters
       should always be used.

          my ( $childRd, $myWr, $myRd, $childWr ) = IO::Async::OS-&gt;pipequad;

          $loop-&gt;open_process(
             stdin  =&gt; $childRd,
             stdout =&gt; $childWr,
             ...
          );

          my $str = IO::Async::Stream-&gt;new(
             read_handle  =&gt; $myRd,
             write_handle =&gt; $myWr,
             ...
          );
          $loop-&gt;add( $str );

   <b>signame2num</b>
          $signum = IO::Async::OS-&gt;signame2num( $signame );

       This utility method converts a signal name (such as "TERM") into its system- specific signal number. This
       may be useful to pass to "POSIX::SigSet" or use in other places which use  numbers  instead  of  symbolic
       names.

   <b>signum2name</b>
          $signame = IO::Async::OS-&gt;signum2name( $signum );

       The inverse of signame2num; this method convers signal numbers into readable names.

   <b>extract_addrinfo</b>
          ( $family, $socktype, $protocol, $addr ) = IO::Async::OS-&gt;extract_addrinfo( $ai );

       Given  an  ARRAY  or HASH reference value containing an addrinfo, returns a family, socktype and protocol
       argument suitable for a "socket" call and an address suitable for "connect" or "bind".

       If given an ARRAY it should be in the following form:

          [ $family, $socktype, $protocol, $addr ]

       If given a HASH it should contain the following keys:

          family socktype protocol addr

       Each field in the result will be initialised to 0 (or empty string for the address) if not defined in the
       $ai value.

       The family type may also be given as a symbolic string as defined by "getfamilybyname".

       The socktype may also be given as a symbolic string; "stream", "dgram" or "raw"; this will  be  converted
       to the appropriate "SOCK_*" constant.

       Note  that  the  "addr"  field,  if  provided,  must  be  a  packed  socket  address, such as returned by
       "pack_sockaddr_in" or "pack_sockaddr_un".

       If the HASH form is used, rather than passing a packed socket address in the "addr" field, certain  other
       hash keys may be used instead for convenience on certain named families.

       family =&gt; 'inet'
           Will pack an IP address and port number from keys called "ip" and "port".  If "ip" is missing it will
           be set to "0.0.0.0". If "port" is missing it will be set to 0.

       family =&gt; 'inet6'
           Will pack an IP address and port number from keys called "ip" and "port".  If "ip" is missing it will
           be  set  to  "::". If "port" is missing it will be set to 0. Optionally will also include values from
           "scopeid" and "flowinfo" keys if provided.

           This will only work if a "pack_sockaddr_in6" function can be found in "Socket"

       family =&gt; 'unix'
           Will pack a UNIX socket path from a key called "path".

   <b>make_addr_for_peer</b>
          $connectaddr = IO::Async::OS-&gt;make_addr_for_peer( $family, $listenaddr );

       Given the "sockdomain" and "sockname" of a listening socket. creates an address suitable to connect()  to
       it.

       This  method  will handle specially any "AF_INET" address bound to "INADDR_ANY" or any "AF_INET6" address
       bound to "IN6ADDR_ANY", as some OSes do not allow <a href="../man2/connect.2.html">connect</a>(2)ing to those  and  would  instead  insist  on
       receiving "INADDR_LOOPBACK" or "IN6ADDR_LOOPBACK" respectively.

       This method is used by the "-&gt;connect( peer =&gt; $sock )" parameter of handle and loop connect methods.

</pre><h4><b>LOOP</b> <b>IMPLEMENTATION</b> <b>METHODS</b></h4><pre>
       The  following  methods  are  provided  on "IO::Async::OS" because they are likely to require OS-specific
       implementations, but are used by IO::Async::Loop to implement its functionality.  It  can  use  the  HASH
       reference "$loop-&gt;{os}" to store other data it requires.

   <b>loop_watch_signal</b>
   <b>loop_unwatch_signal</b>
          IO::Async::OS-&gt;loop_watch_signal( $loop, $signal, $code );

          IO::Async::OS-&gt;loop_unwatch_signal( $loop, $signal );

       Used to implement the "watch_signal" / "unwatch_signal" Loop pair.

   <b>potentially_open_fds</b>
          @fds = IO::Async::OS-&gt;potentially_open_fds;

       Returns  a  list  of  filedescriptors  which  might  need  closing.  By  default  this  will return "0 ..
       _SC_OPEN_MAX". OS-specific subclasses may have a better guess.

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.40.1                                       2025-05-17                                 <u>IO::Async::<a href="../man3pm/OS.3pm.html">OS</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>