<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"IO::Async::Handle" - event callbacks for a non-blocking file descriptor</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libio-async-perl">libio-async-perl_0.804-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "IO::Async::Handle" - event callbacks for a non-blocking file descriptor

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This class is likely not to be used directly, because subclasses of it exist to handle more specific
       cases. Here is an example of how it would be used to watch a listening socket for new connections. In
       real code, it is likely that the "Loop-&gt;listen" method would be used instead.

          use IO::Socket::INET;
          use IO::Async::Handle;

          use IO::Async::Loop;
          my $loop = IO::Async::Loop-&gt;new;

          my $socket = IO::Socket::INET-&gt;new( LocalPort =&gt; 1234, Listen =&gt; 1 );

          my $handle = IO::Async::Handle-&gt;new(
             handle =&gt; $socket,

             on_read_ready  =&gt; sub {
                my $new_client = $socket-&gt;accept;
                ...
             },
          );

          $loop-&gt;add( $handle );

       For most other uses with sockets, pipes or other filehandles that carry a byte stream, the
       IO::Async::Stream class is likely to be more suitable. For non-stream sockets, see IO::Async::Socket.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This subclass of IO::Async::Notifier allows non-blocking IO on filehandles.  It provides event handlers
       for when the filehandle is read- or write-ready.

</pre><h4><b>EVENTS</b></h4><pre>
       The following events are invoked, either using subclass methods or CODE references in parameters:

   <b>on_read_ready</b>
       Invoked when the read handle becomes ready for reading.

   <b>on_write_ready</b>
       Invoked when the write handle becomes ready for writing.

   <b>on_closed</b>
       Optional. Invoked when the handle becomes closed.

       This handler is invoked before the filehandles are closed and the Handle removed from its containing
       Loop. The "loop" will still return the containing Loop object.

</pre><h4><b>PARAMETERS</b></h4><pre>
       The following named parameters may be passed to "new" or "configure":

   <b>read_handle</b> <b>=&gt;</b> <b>IO</b>
   <b>write_handle</b> <b>=&gt;</b> <b>IO</b>
       The reading and writing IO handles. Each must implement the "fileno" method.  Primarily used for passing
       "STDIN" / "STDOUT"; see the SYNOPSIS section of IO::Async::Stream for an example.

   <b>handle</b> <b>=&gt;</b> <b>IO</b>
       The IO handle for both reading and writing; instead of passing each separately as above. Must implement
       "fileno" method in way that "IO::Handle" does.

   <b>read_fileno</b> <b>=&gt;</b> <b>INT</b>
   <b>write_fileno</b> <b>=&gt;</b> <b>INT</b>
       File descriptor numbers for reading and writing. If these are given as an alternative to "read_handle" or
       "write_handle" then a new "IO::Handle" instance will be constructed around each.

   <b>on_read_ready</b> <b>=&gt;</b> <b>CODE</b>
   <b>on_write_ready</b> <b>=&gt;</b> <b>CODE</b>
   <b>on_closed</b> <b>=&gt;</b> <b>CODE</b>
       CODE references for event handlers.

   <b>want_readready</b> <b>=&gt;</b> <b>BOOL</b>
   <b>want_writeready</b> <b>=&gt;</b> <b>BOOL</b>
       If present, enable or disable read- or write-ready notification as per the "want_readready" and
       "want_writeready" methods.

       It is required that a matching "on_read_ready" or "on_write_ready" are available for any handle that is
       provided; either passed as a callback CODE reference or as an overridden the method. I.e. if only a
       "read_handle" is given, then "on_write_ready" can be absent. If "handle" is used as a shortcut, then both
       read and write-ready callbacks or methods are required.

       If no IO handles are provided at construction time, the object is still created but will not yet be
       fully-functional as a Handle. IO handles can be assigned later using the "set_handle" or "set_handles"
       methods, or by "configure". This may be useful when constructing an object to represent a network
       connection, before the <a href="../man2/connect.2.html">connect</a>(2) has actually been performed yet.

</pre><h4><b>METHODS</b></h4><pre>
       The following methods documented in "await" expressions return Future instances.

   <b>set_handle</b>
          $handle-&gt;set_handles( %params );

       Sets new reading or writing filehandles. Equivalent to calling the "configure" method with the same
       parameters.

   <b>set_handle</b>
          $handle-&gt;set_handle( $fh );

       Shortcut for

          $handle-&gt;configure( handle =&gt; $fh );

   <b>close</b>
          $handle-&gt;close;

       This method calls "close" on the underlying IO handles. This method will then remove the handle from its
       containing loop.

   <b>close_read</b>
   <b>close_write</b>
          $handle-&gt;close_read;

          $handle-&gt;close_write;

       Closes the underlying read or write handle, and deconfigures it from the object. Neither of these methods
       will invoke the "on_closed" event, nor remove the object from the Loop if there is still one open handle
       in the object. Only when both handles are closed, will "on_closed" be fired, and the object removed.

   <b>new_close_future</b>
          await $handle-&gt;new_close_future;

       Returns a new IO::Async::Future object which will become done when the handle is closed. Cancelling the
       $future will remove this notification ability but will not otherwise affect the $handle.

   <b>read_handle</b>
   <b>write_handle</b>
          $handle = $handle-&gt;read_handle;

          $handle = $handle-&gt;write_handle;

       These accessors return the underlying IO handles.

   <b>read_fileno</b>
   <b>write_fileno</b>
          $fileno = $handle-&gt;read_fileno;

          $fileno = $handle-&gt;write_fileno;

       These accessors return the file descriptor numbers of the underlying IO handles.

   <b>want_readready</b>
   <b>want_writeready</b>
          $value = $handle-&gt;want_readready;

          $oldvalue = $handle-&gt;want_readready( $newvalue );

          $value = $handle-&gt;want_writeready;

          $oldvalue = $handle-&gt;want_writeready( $newvalue );

       These are the accessor for the "want_readready" and "want_writeready" properties, which define whether
       the object is interested in knowing about read- or write-readiness on the underlying file handle.

   <b>socket</b>
          $handle-&gt;socket( $ai );

       Convenient shortcut to creating a socket handle, as given by an addrinfo structure, and setting it as the
       read and write handle for the object.

       $ai may be either a "HASH" or "ARRAY" reference of the same form as given to IO::Async::OS's
       "extract_addrinfo" method.

       This method returns nothing if it succeeds, or throws an exception if it fails.

   <b>bind</b>
          $handle = await $handle-&gt;bind( %args );

       Performs a "getaddrinfo" resolver operation with the "passive" flag set, and then attempts to bind a
       socket handle of any of the return values.

   <b>bind</b> <b>(1</b> <b>argument)</b>
          $handle = await $handle-&gt;bind( $ai );

       When invoked with a single argument, this method is a convenient shortcut to creating a socket handle and
       bind()ing it to the address as given by an addrinfo structure, and setting it as the read and write
       handle for the object.

       $ai may be either a "HASH" or "ARRAY" reference of the same form as given to IO::Async::OS's
       "extract_addrinfo" method.

       The returned future returns the handle object itself for convenience.

   <b>connect</b>
          $handle = await $handle-&gt;connect( %args );

       A convenient wrapper for calling the "connect" method on the underlying IO::Async::Loop object.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       â€¢   IO::Handle - Supply object methods for I/O handles

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.40.1                                       2025-05-17                             <u>IO::Async::<a href="../man3pm/Handle.3pm.html">Handle</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>