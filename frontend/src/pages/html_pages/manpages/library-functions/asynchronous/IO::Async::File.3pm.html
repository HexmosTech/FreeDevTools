<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"IO::Async::File" - watch a file for changes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libio-async-perl">libio-async-perl_0.804-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "IO::Async::File" - watch a file for changes

</pre><h4><b>SYNOPSIS</b></h4><pre>
          use IO::Async::File;

          use IO::Async::Loop;
          my $loop = IO::Async::Loop-&gt;new;

          my $file = IO::Async::File-&gt;new(
             filename =&gt; "config.ini",
             on_mtime_changed =&gt; sub {
                my ( $self ) = @_;
                print STDERR "Config file has changed\n";
                reload_config( $self-&gt;handle );
             }
          );

          $loop-&gt;add( $file );

          $loop-&gt;run;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This subclass of IO::Async::Notifier watches an open filehandle or named filesystem entity for changes in
       its stat() fields. It invokes various events when the values of these fields change. It is most often
       used to watch a file for size changes; for this task see also IO::Async::FileStream.

       While called "File", it is not required that the watched filehandle be a regular file. It is possible to
       watch anything that <a href="../man2/stat.2.html">stat</a>(2) may be called on, such as directories or other filesystem entities.

</pre><h4><b>EVENTS</b></h4><pre>
       The following events are invoked, either using subclass methods or CODE references in parameters.

   <b>on_dev_changed</b> <b>$new_dev,</b> <b>$old_dev</b>
   <b>on_ino_changed</b> <b>$new_ino,</b> <b>$old_ino</b>
   <b>...</b>
   <b>on_ctime_changed</b> <b>$new_ctime,</b> <b>$old_ctime</b>
       Invoked when each of the individual stat() fields have changed. All the stat() fields are supported apart
       from "blocks" and "blksize". Each is passed the new and old values of the field.

   <b>on_devino_changed</b> <b>$new_stat,</b> <b>$old_stat</b>
       Invoked when either of the "dev" or "ino" fields have changed. It is passed two File::stat instances
       containing the complete old and new stat() fields. This can be used to observe when a named file is
       renamed; it will not be observed to happen on opened filehandles.

   <b>on_stat_changed</b> <b>$new_stat,</b> <b>$old_stat</b>
       Invoked when any of the stat() fields have changed. It is passed two File::stat instances containing the
       old and new stat() fields.

</pre><h4><b>PARAMETERS</b></h4><pre>
       The following named parameters may be passed to "new" or "configure".

   <b>handle</b> <b>=&gt;</b> <b>IO</b>
       The opened filehandle to watch for stat() changes if "filename" is not supplied.

   <b>filename</b> <b>=&gt;</b> <b>STRING</b>
       Optional. If supplied, watches the named file rather than the filehandle given in "handle". The file will
       be opened for reading and then watched for renames. If the file is renamed, the new filename is opened
       and tracked similarly after closing the previous file.

   <b>interval</b> <b>=&gt;</b> <b>NUM</b>
       Optional. The interval in seconds to poll the filehandle using <a href="../man2/stat.2.html">stat</a>(2) looking for size changes. A
       default of 2 seconds will be applied if not defined.

</pre><h4><b>METHODS</b></h4><pre>
   <b>handle</b>
          $handle = $file-&gt;handle;

       Returns the filehandle currently associated with the instance; either the one passed to the "handle"
       parameter, or opened from the "filename" parameter.

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.40.1                                       2025-05-17                               <u>IO::Async::<a href="../man3pm/File.3pm.html">File</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>