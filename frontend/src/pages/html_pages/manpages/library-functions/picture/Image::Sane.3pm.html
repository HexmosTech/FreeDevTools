<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image::Sane - Perl extension for the SANE (Scanner Access Now Easy) Project</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libimage-sane-perl">libimage-sane-perl_5-2build4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Image::Sane - Perl extension for the SANE (Scanner Access Now Easy) Project

</pre><h4><b>VERSION</b></h4><pre>
       5

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Image::Sane;
         my @devices = Image::Sane-&gt;get_devices;
         my $device = Image::Sane::Device-&gt;open($devices[0]-&gt;{name});
         my $param = $device-&gt;get_parameters;
         $device-&gt;write_pnm_header($fh, $param);
         my ($data, $len) = $device-&gt;read ($param-&gt;{bytes_per_line});
         print $fh $data;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These Perl bindings for the SANE (Scanner Access Now Easy) Project allow you to access SANE-compatible
       scanners in a Perlish and object-oriented way, freeing you from the casting and memory management in C,
       yet remaining very close in spirit to original API.

       Find out more about SANE at &lt;<a href="http://www.sane-project.org">http://www.sane-project.org</a>&gt;.

</pre><h4><b>SUBROUTINES/METHODS</b></h4><pre>
   <b>Image::Sane-&gt;get_version</b>
       Returns an array with the SANE_VERSION_(MAJOR|MINOR|BUILD) versions:

         join('.', Image::Sane-&gt;get_version)

   <b>Image::Sane-&gt;get_version_scalar</b>
       Returns an scalar with the SANE_VERSION_(MAJOR|MINOR|BUILD) versions combined as per the Perl version
       numbering, i.e. sane 1.0.19 gives 1.000019. This allows simple version comparisons.

   <b>Image::Sane-&gt;get_devices</b>
       This function can be used to query the list of devices that are available.  If the function executes
       successfully, it returns a array of hash references with the devices found.  The returned list is
       guaranteed to remain valid until (a) another call to this function is performed or (b) a call to
       <b>sane_exit()</b> is performed.  This function can be called repeatedly to detect when new devices become
       available.

       If argument local_only is true, only local devices are returned (devices directly attached to the machine
       that SANE is running on).  If it is false, the device list includes all remote devices that are
       accessible to the SANE library.

         try {
             @devices = Image::Sane-&gt;get_devices;
             print "Name: $devices[0]-&gt;{name}\n";
             print "Vendor: $devices[0]-&gt;{vendor}\n";
             print "Model: $devices[0]-&gt;{model}\n";
             print "Type: $devices[0]-&gt;{type}\n";
         }
         catch {
             print "Error getting devices:", $_-&gt;error, "\n";
         };

   <b>Image::Sane::Device-&gt;open</b>
       This function is used to establish a connection to a particular device.  The name of the device to be
       opened is passed in argument name.  If the call completes successfully, a Image::Sane::Device object is
       returned.  As a special case, specifying a zero-length string as the device requests opening the first
       available device (if there is such a device).

         my $device = Image::Sane::Device-&gt;open($device_name);

   <b>Image::Sane::Device-&gt;get_option_descriptor</b>
       This function is used to access option descriptors.  The function returns a hash reference with the
       option descriptor for option number n of the Image::Sane::Device object.  Option number 0 is guaranteed
       to be a valid option.  Its value is an integer that specifies the number of options that are available
       for the Image::Sane::Device object (the count includes option 0). If n is not a valid option index, the
       function croaks.

         try {
             $option = $device-&gt;get_option_descriptor($n);
             print "Name: $option-&gt;{name}\n";
             print "Name: $option-&gt;{title}\n";
             print "Name: $option-&gt;{desc}\n";
             print "Name: $option-&gt;{type}\n";
             print "Name: $option-&gt;{unit}\n";
             print "Name: $option-&gt;{cap}\n";
             print "Name: $option-&gt;{max_values}\n";
             print "Name: $option-&gt;{constraint_type}\n";
         }
         catch {
             print "Error getting option descriptor:", $_-&gt;error, "\n";
         };

       The contents of the hash keys "name", "title", "desc", "type", "unit", "cap" and "constraint_type" are as
       per the C API description (&lt;<a href="http://www.sane-project.org/html">http://www.sane-project.org/html</a>&gt;). There is a further constraint key that
       either contains an array with the possible option values, or a hash with keys "max", "min", and "quant".

       The max_values key replaced the size key in the C API, and contains the maximum number of values that the
       option may contain.

   <b>Image::Sane::Device-&gt;get_option</b>
       Returns the current value of the selected option.

         try {
             $value = $device-&gt;get_option($n);
             print "value: $value\n";
         }
         catch {
             print "Error getting option:", $_-&gt;error, "\n";
         };

       For $option-&gt;{max_values} &gt; 1, $value is a reference to an array.

   <b>Image::Sane::Device-&gt;set_auto</b>
       Commands the selected device to automatically select an appropriate value.  This mode remains effective
       until overridden by an explicit set_option request.

         $device-&gt;set_auto($n);

   <b>Image::Sane::Device-&gt;set_option</b>
       Sets the selected option, returning flags in $info, which are described in the C API
       (&lt;<a href="http://www.sane-project.org/html">http://www.sane-project.org/html</a>&gt;).

         $orig = $device-&gt;get_option($n);
         $info = $device-&gt;set_option($n, $value);
         if ($info &amp; SANE_INFO_INEXACT) {
          $value = $device-&gt;get_option($n);
          print "rounded value of $opt-&gt;{name} from $orig to $value\n";
         }

       For $option-&gt;{max_values} &gt; 1, $value can be a reference to an array.

   <b>Image::Sane::Device-&gt;get_parameters</b>
       This function is used to obtain the current scan parameters.  The returned parameters are guaranteed to
       be accurate between the time a scan has been started (Image::Sane::Device-&gt;<b>start()</b> has been called) and
       the completion of that request. Outside of that window, the returned values are best-effort estimates of
       what the parameters will be when Image::Sane::Device-&gt;<b>start()</b> gets invoked. Calling this function before
       a scan has actually started allows, for example, to get an estimate of how big the scanned image will be.

         try {
             $param = $device-&gt;get_parameters;
             print "format $param-&gt;{format}\n";
             print "last_frame $param-&gt;{last_frame}\n";
             print "bytes_per_line $param-&gt;{bytes_per_line}\n";
             print "pixels_per_line $param-&gt;{pixels_per_line}\n";
             print "lines $param-&gt;{lines}\n";
             print "depth $param-&gt;{depth}\n";
         }
         catch {
             print "Error getting parameters:", $_-&gt;error, "\n";
         };

       Please see the C documentation (&lt;<a href="http://www.sane-project.org/html">http://www.sane-project.org/html</a>&gt;) for details of the above values.

   <b>Image::Sane::Device-&gt;start</b>
       This function initiates acquisition of an image from the device specified.

         $device-&gt;start;

   <b>Image::Sane::Device-&gt;read</b>
       This function is used to read image data from the device specified.  The number of bytes returned in $buf
       is stored in $len.  A backend must set this to zero when an error is thrown.  if the call succeeds, the
       number of bytes returned can be anywhere in the range from 0 to $maxlen bytes.

         $param = $device-&gt;get_parameters;
         $maxlen = $param-&gt;{bytes_per_line};
         ($buf, $len) = $test-&gt;read ($maxlen);

       If this function is called when no data is available, one of two things may happen, depending on the I/O
       mode that is in effect for the device.

       1. If the device is in blocking I/O mode (the default mode), the call blocks until at least one data byte
       is available (or until some error occurs).
       2. If the device is in non-blocking I/O mode, the call returns immediately with $len set to zero.

       The I/O mode of the device can be set via a call to Image::Sane::Device-&gt;<b>set_io_mode()</b>.

   <b>Image::Sane::Device-&gt;cancel</b>
       This  function is used to immediately or as quickly as possible cancel the currently pending operation of
       the device.

         $device-&gt;cancel;

       This function can be called at any time (as long as $device is valid) but  usually  affects  long-running
       operations  only  (such  as image is acquisition). It is safe to call this function asynchronously (e.g.,
       from within a signal handler). It is important to note that completion of this operation does  not  imply
       that  the  currently  pending operation has been cancelled. It only guarantees that cancellation has been
       initiated. Cancellation completes only when the cancelled call throws  an  exception  (typically  with  a
       status  value  of SANE_STATUS_CANCELLED).  Since the SANE API does not require any other operations to be
       re-entrant, this implies that a frontend must not call any other operation until the cancelled  operation
       has returned.

   <b>Image::Sane::Device-&gt;set_io_mode</b>
       This  function  is  used  to  set the I/O mode of the device. The I/O mode can be either blocking or non-
       blocking. If argument $bool is SANE_TRUE, the mode is set to non-blocking mode,  otherwise  it's  set  to
       blocking  mode.  This  function  can be called only after a call to Image::Sane::Device-&gt;<b>start()</b> has been
       performed.

         $device-&gt;set_io_mode ($bool);

       By default, newly opened handles operate in blocking mode. A  backend  may  elect  not  to  support  non-
       blocking   I/O   mode.   In   such   a   case  the  call  throws  an  exception  with  the  status  value
       SANE_STATUS_UNSUPPORTED. Blocking I/O must be supported by all backends, so calling  this  function  with
       SANE_FALSE is guaranteed to complete successfully.

   <b>Image::Sane::Device-&gt;get_select_fd</b>
       This  function is used to obtain a (platform-specific) file-descriptor for the device that is readable if
       and only if image data is available (i.e., when a call  to  Image::Sane::Device-&gt;<b>read()</b>  will  return  at
       least one byte of data).

         $fd = $device-&gt;get_select_fd;

       This  function can be called only after a call to Image::Sane::Device-&gt;<b>start()</b> has been performed and the
       returned file-descriptor is guaranteed to remain valid for the duration of the current image  acquisition
       (i.e.,  until  Image::Sane::Device-&gt;<b>cancel()</b>  or  Image::Sane::Device-&gt;<b>start()</b>  is  called again or until
       Image::Sane::Device-&gt;<b>read()</b> throws an exception with status SANE_STATUS_EOF).   Indeed,  a  backend  must
       guarantee   to   close   the   returned   select   file   descriptor   at   the   point   when  the  next
       Image::Sane::Device-&gt;<b>read()</b> call would throw an exception with  SANE_STATUS_EOF.  This  is  necessary  to
       ensure  the  application  can  detect  when  this  condition  occurs  without  actually  having  to  call
       Image::Sane::Device-&gt;<b>read()</b>.

       A backend may elect not to support this operation. In such a case, the function throws an exception  with
       status code SANE_STATUS_UNSUPPORTED.

       Note  that  the  only  operation  supported  by  the  returned file-descriptor is a host operating-system
       dependent test whether the file-descriptor is readable (e.g., this test can be implemented using <b>select()</b>
       or <b>poll()</b> under UNIX). If any other operation is performed on the file descriptor, the behaviour  of  the
       backend  becomes  unpredictable.  Once the file-descriptor signals ``readable'' status, it will remain in
       that state until a call to <b>sane_read()</b> is performed. Since many input devices are very slow, support  for
       this  operation  is  strongly  encouraged  as  it  permits  an  application  to do other work while image
       acquisition is in progress.

   <b>Image::Sane::Device-&gt;write_pnm_header</b>
       This function is a pure-Perl helper function to write a PNM header.  It  will  fetch  the  current  image
       settings using Image::Sane::Device-&gt;get_parameters, if they are not already provided, e.g.:

        $device-&gt;write_pnm_header($fh);

       or

        $parm = $device-&gt;get_parameters;
        $device-&gt;write_pnm_header ($fh, $parm-&gt;{format},
                                        $parm-&gt;{pixels_per_line},
                                        $parm-&gt;{lines}, $parm-&gt;{depth});

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       If  the  underlying  SANE  library  returns  a  status value other than SANE_STATUS_GOOD, an exception is
       thrown. It is therefore suggested that these are  caught  using  the  Try::Tiny  module.  $_-&gt;status  and
       $_-&gt;error can be used within the catch{} clause to give the status code and its equivalent string.

</pre><h4><b>CONFIGURATION</b> <b>AND</b> <b>ENVIRONMENT</b></h4><pre>
       This  module  does  not require any special configuration or environment, beyond that needed for Perl and
       SANE.

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       Obviously, the SANE library is required, together with the backends for the scanners to be used.
       Exception::Class is used for throwing exceptions. It is suggested that these are caught with Try::Tiny.

</pre><h4><b>INCOMPATIBILITIES</b></h4><pre>
       None known.

</pre><h4><b>BUGS</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
       None known.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The SANE Standard Reference &lt;<a href="http://www.sane-project.org/html">http://www.sane-project.org/html</a>&gt; is a handy companion.  The  Perl  bindings
       follow  the  C  API  very  closely,  and the C reference documentation should be considered the canonical
       source.

</pre><h4><b>AUTHOR</b></h4><pre>
       Jeffrey Ratcliffe, &lt;<a href="mailto:jffry@posteo.net">jffry@posteo.net</a>&gt;

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2008--2019 by Jeffrey Ratcliffe

       This library is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself, either Perl version 5.8.5 or, at your option, any later version of Perl 5 you may have available.

perl v5.40.0                                       2024-10-20                                   <u>Image::<a href="../man3pm/Sane.3pm.html">Sane</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>