<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tk_FindPhoto,  Tk_PhotoPutBlock, Tk_PhotoPutZoomedBlock, Tk_PhotoGetImage, Tk_PhotoBlank, Tk_PhotoExpand,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tk9.0-doc">tk9.0-doc_9.0.1-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tk_FindPhoto,  Tk_PhotoPutBlock, Tk_PhotoPutZoomedBlock, Tk_PhotoGetImage, Tk_PhotoBlank, Tk_PhotoExpand,
       Tk_PhotoGetSize, Tk_PhotoSetSize - manipulate the image data stored in a photo image.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       Tk_PhotoHandle
       <b>Tk_FindPhoto</b>(<u>interp,</u> <u>imageName</u>)

       int
       <b>Tk_PhotoPutBlock</b>(<u>interp,</u> <u>handle,</u> <u>blockPtr,</u> <u>x,</u> <u>y,</u> <u>width,</u> <u>height,compRule</u>)

       int
       <b>Tk_PhotoPutZoomedBlock</b>(<u>interp,</u> <u>handle,</u> <u>blockPtr,</u> <u>x,</u> <u>y,</u> <u>width,</u> <u>height,zoomX,</u> <u>zoomY,</u> <u>subsampleX,</u> <u>subsampleY,</u> <u>compRule</u>)

       int
       <b>Tk_PhotoGetImage</b>(<u>handle,</u> <u>blockPtr</u>)

       <b>Tk_PhotoBlank</b>(<u>handle</u>)

       int
       <b>Tk_PhotoExpand</b>(<u>interp,</u> <u>handle,</u> <u>width,</u> <u>height</u>)

       <b>Tk_PhotoGetSize</b>(<u>handle,</u> <u>widthPtr,</u> <u>heightPtr</u>)

       int
       <b>Tk_PhotoSetSize</b>(<u>interp.</u> <u>handle,</u> <u>width,</u> <u>height</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)                      Interpreter in which image was created and  in  which  error
                                                    reporting is to be done.

       const char <u>*imageName</u> (in)                   Name of the photo image.

       Tk_PhotoHandle <u>handle</u> (in)                   Opaque handle identifying the photo image to be affected.

       Tk_PhotoImageBlock <u>*blockPtr</u> (in)            Specifies the address and storage layout of image data.

       int <u>x</u> (in)                                   Specifies  the X coordinate where the top-left corner of the
                                                    block is to be placed within the image.

       int <u>y</u> (in)                                   Specifies the Y coordinate where the top-left corner of  the
                                                    block is to be placed within the image.

       int <u>width</u> (in)                               Specifies  the  width  of the image area to be affected (for
                                                    <b>Tk_PhotoPutBlock</b>)  or   the   desired   image   width   (for
                                                    <b>Tk_PhotoExpand</b> and <b>Tk_PhotoSetSize</b>).

       int <u>compRule</u> (in)                            Specifies   the   compositing   rule   used  when  combining
                                                    transparent pixels in a block of data with  a  photo  image.
                                                    Must  be  one  of <b>TK_PHOTO_COMPOSITE_OVERLAY</b> (which puts the
                                                    block of data over the top of the existing photo image, with
                                                    the previous contents showing  through  in  the  transparent
                                                    bits) or <b>TK_PHOTO_COMPOSITE_SET</b> (which discards the existing
                                                    photo  image  contents  in the rectangle covered by the data
                                                    block.)

       int <u>height</u> (in)                              Specifies the height of the image area to be  affected  (for
                                                    <b>Tk_PhotoPutBlock</b>)   or   the   desired   image  height  (for
                                                    <b>Tk_PhotoExpand</b> and <b>Tk_PhotoSetSize</b>).

       int <u>*widthPtr</u> (out)                          Pointer to location in which to store the image width.

       int <u>*heightPtr</u> (out)                         Pointer to location in which to store the image height.

       int <u>subsampleX</u> (in)                          Specifies the subsampling factor  in  the  X  direction  for
                                                    input image data.

       int <u>subsampleY</u> (in)                          Specifies  the  subsampling  factor  in  the Y direction for
                                                    input image data.

       int <u>zoomX</u> (in)                               Specifies the zoom factor to be applied in the  X  direction
                                                    to pixels being written to the photo image.

       int <u>zoomY</u> (in)                               Specifies  the  zoom factor to be applied in the Y direction
                                                    to pixels being written to the photo image.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tk_FindPhoto</b> returns an opaque handle that is used to identify a particular  photo  image  to  the  other
       procedures.   The  parameter  is  the  name of the image, that is, the name specified to the <b>image</b> <b>create</b>
       <b>photo</b> command, or assigned by that command if no name was specified.  If <u>imageName</u> does not exist  or  is
       not a photo image, <b>Tk_FindPhoto</b> returns NULL.

       <b>Tk_PhotoPutBlock</b> is used to supply blocks of image data to be displayed.  The call affects an area of the
       image  of  size  <u>width</u>  x  <u>height</u>  pixels,  with its top-left corner at coordinates (<u>x</u>,<u>y</u>).  All of <u>width</u>,
       <u>height</u>, <u>x</u>, and <u>y</u> must be non-negative.  If part of this area lies  outside  the  current  bounds  of  the
       image,  the  image  will be expanded to include the area, unless the user has specified an explicit image
       size with the <b>-width</b> and/or <b>-height</b> widget configuration options (see <a href="../man3tk/photo.3tk.html">photo</a>(3tk)); in that case the  area
       is silently clipped to the image boundaries.

       The <u>block</u> parameter is a pointer to a <b>Tk_PhotoImageBlock</b> structure, defined as follows:
              typedef struct {
                  unsigned char *<u>pixelPtr</u>;
                  int <u>width</u>;
                  int <u>height</u>;
                  int <u>pitch</u>;
                  int <u>pixelSize</u>;
                  int <u>offset</u>[4];
              } <b>Tk_PhotoImageBlock</b>;
       The  <u>pixelPtr</u>  field  points to the first pixel, that is, the top-left pixel in the block.  The <u>width</u> and
       <u>height</u> fields specify the dimensions of the block of pixels.  The <u>pixelSize</u> field specifies  the  address
       difference  between  two  horizontally adjacent pixels.  It should be 4 for RGB and 2 for grayscale image
       data.  Other values are possible, if the offsets in the <u>offset</u> array are adjusted accordingly  (e.g.  for
       red,  green  and  blue  data  stored  in different planes).  Using such a layout is strongly discouraged,
       though. Due to a bug, it might not work correctly if an alpha channel is provided. (see the <b>BUGS</b>  section
       below).  The  <u>pitch</u>  field  specifies the address difference between two vertically adjacent pixels.  The
       <u>offset</u> array contains the offsets from the address of a pixel to the addresses of  the  bytes  containing
       the  red,  green,  blue  and alpha (transparency) components.  If the offsets for red, green and blue are
       equal, the image is interpreted as grayscale. If they differ, RGB data is assumed. Normally  the  offsets
       will  be  0,  1,  2,  3  for RGB data and 0, 0, 0, 1 for grayscale.  It is possible to provide image data
       without an alpha channel by setting the offset for alpha to a negative value and adjusting the  <u>pixelSize</u>
       field accordingly. This use is discouraged, though (see the <b>BUGS</b> section below).

       The  <u>compRule</u>  parameter  to  <b>Tk_PhotoPutBlock</b>  specifies  a  compositing  rule that says what to do with
       transparent pixels.  The value <b>TK_PHOTO_COMPOSITE_OVERLAY</b> says that the previous contents  of  the  photo
       image  should  show  through, and the value <b>TK_PHOTO_COMPOSITE_SET</b> says that the previous contents of the
       photo image should be completely ignored, and the values from the block be copied directly  across.   The
       behavior in Tk8.3 and earlier was equivalent to having <b>TK_PHOTO_COMPOSITE_OVERLAY</b> as a compositing rule.

       The  value given for the <u>width</u> and <u>height</u> parameters to <b>Tk_PhotoPutBlock</b> do not have to correspond to the
       values specified in <u>block</u>.  If they are smaller, <b>Tk_PhotoPutBlock</b> extracts a  sub-block  from  the  image
       data  supplied.   If  they  are  larger,  the  data given are replicated (in a tiled fashion) to fill the
       specified area.  These rules operate independently in the horizontal and vertical directions.

       <b>Tk_PhotoPutBlock</b> normally returns <b>TCL_OK</b>, though if it cannot allocate  sufficient  memory  to  hold  the
       resulting  image, <b>TCL_ERROR</b> is returned instead and, if the <u>interp</u> argument is non-NULL, an error message
       is placed in the interpreter's result.

       <b>Tk_PhotoPutZoomedBlock</b> works like <b>Tk_PhotoPutBlock</b> except that the image can be reduced or  enlarged  for
       display.   The  <u>subsampleX</u>  and  <u>subsampleY</u>  parameters  allow  the  size  of  the image to be reduced by
       subsampling.  <b>Tk_PhotoPutZoomedBlock</b> will use only pixels from the input image whose  X  coordinates  are
       multiples  of  <u>subsampleX</u>, and whose Y coordinates are multiples of <u>subsampleY</u>.  For example, an image of
       512x512 pixels can be reduced to 256x256 by setting <u>subsampleX</u> and <u>subsampleY</u> to 2.

       The <u>zoomX</u> and <u>zoomY</u> parameters allow the image to be enlarged by pixel replication.  Each  pixel  of  the
       (possibly  subsampled)  input image will be written to a block <u>zoomX</u> pixels wide and <u>zoomY</u> pixels high of
       the displayed image.  Subsampling and zooming can be used together for special effects.

       <b>Tk_PhotoGetImage</b> can be used to retrieve image data from a photo image.  <b>Tk_PhotoGetImage</b>  fills  in  the
       structure  pointed  to  by the <u>blockPtr</u> parameter with values that describe the address and layout of the
       image data that the photo image has stored internally.  The values are valid until the image is destroyed
       or its size is changed.

       It is possible to modify an image by writing directly to the data the <u>pixelPtr</u> field points to. The  size
       of the image cannot be changed this way, though.  Also, changes made by writing directly to <u>pixelPtr</u> will
       not  be  immediately  visible, but only after a call to <b>Tk_ImageChanged</b> or after an event that causes the
       interested widgets to redraw themselves.  For these reasons usually it is preferable to make changes to a
       copy of the image data and write it back with <b>Tk_PhotoPutBlock</b> or <b>Tk_PhotoPutZoomedBlock</b>.

       <b>Tk_PhotoGetImage</b> returns 1 for compatibility with the corresponding procedure in the old photo widget.

       <b>Tk_PhotoBlank</b> blanks the entire area of the photo image.  Blank areas of a photo image are transparent.

       <b>Tk_PhotoExpand</b> requests that the widget's image be expanded to be at least <u>width</u> x <u>height</u> pixels in size.
       The width and/or height are unchanged if the user has specified an explicit image width  or  height  with
       the  <b>-width</b>  and/or <b>-height</b> configuration options, respectively.  If the image data are being supplied in
       many small blocks, it is more efficient to use <b>Tk_PhotoExpand</b> or <b>Tk_PhotoSetSize</b> at the beginning  rather
       than allowing the image to expand in many small increments as image blocks are supplied.

       <b>Tk_PhotoExpand</b>  normally  returns  <b>TCL_OK</b>,  though  if  it  cannot allocate sufficient memory to hold the
       resulting image, <b>TCL_ERROR</b> is returned instead and, if the <u>interp</u> argument is non-NULL, an error  message
       is placed in the interpreter's result.

       <b>Tk_PhotoSetSize</b>  specifies the size of the image, as if the user had specified the given <u>width</u> and <u>height</u>
       values to the <b>-width</b> and <b>-height</b> configuration options.  A value of zero for <u>width</u>  or  <u>height</u>  does  not
       change  the  image's width or height, but allows the width or height to be changed by subsequent calls to
       <b>Tk_PhotoPutBlock</b>, <b>Tk_PhotoPutZoomedBlock</b> or <b>Tk_PhotoExpand</b>.

       <b>Tk_PhotoSetSize</b> normally returns <b>TCL_OK</b>, though if it cannot  allocate  sufficient  memory  to  hold  the
       resulting  image, <b>TCL_ERROR</b> is returned instead and, if the <u>interp</u> argument is non-NULL, an error message
       is placed in the interpreter's result.

       <b>Tk_PhotoGetSize</b> returns the dimensions of the image in *<u>widthPtr</u> and *<u>heightPtr</u>.

</pre><h4><b>PORTABILITY</b></h4><pre>
       In Tk 8.3 and earlier, <b>Tk_PhotoPutBlock</b> and <b>Tk_PhotoPutZoomedBlock</b> had different signatures. If you  want
       to  compile  code that uses the old interface against 8.4 without updating your code, compile it with the
       flag -DUSE_COMPOSITELESS_PHOTO_PUT_BLOCK.  Code linked using Stubs against  older  versions  of  Tk  will
       continue to work.

       In  Tk  8.4, <b>Tk_PhotoPutBlock</b>, <b>Tk_PhotoPutZoomedBlock</b>, <b>Tk_PhotoExpand</b> and <b>Tk_PhotoSetSize</b> did not take an
       <u>interp</u> argument or return any result code.  If insufficient memory was available for an image,  Tk  would
       panic.   This  behaviour  is  still  supported  if  you  compile  your extension with the additional flag
       -DUSE_PANIC_ON_PHOTO_ALLOC_FAILURE.  Code linked using Stubs against older versions of Tk  will  continue
       to work.

</pre><h4><b>BUGS</b></h4><pre>
       The  <b>Tk_PhotoImageBlock</b>  structure  used  to  provide  image  data  to  <b>Tk_PhotoPutBlock</b>  promises  great
       flexibility in the layout of the data (e.g. separate planes for the red, green, blue and alpha channels).
       Unfortunately, the implementation fails to hold this promise.  The problem is that the <u>pixelSize</u> field is
       (incorrectly) used to determine whether the image has an alpha channel.  Currently, if the offset for the
       alpha channel is greater than or equal to <u>pixelSize</u>, <b>tk_PhotoPutblock</b> assumes no alpha  data  is  present
       and  makes  the  image fully opaque.  This means that for layouts where the channels are separate (or any
       other exotic layout where <u>pixelSize</u> has to be smaller than the alpha offset), the alpha channel will  not
       be  read correctly.  In order to be on the safe side if this issue will be corrected in a future release,
       it is strongly recommended you always provide alpha data - even if the image has no  transparency  -  and
       only  use the "standard" layout with a <u>pixelSize</u> of 2 for grayscale and 4 for RGB data with <u>offset</u>s of 0,
       0, 0, 1 or 0, 1, 2, 3 respectively.

</pre><h4><b>CREDITS</b></h4><pre>
       The code for the photo image type was developed by Paul Mackerras, based  on  his  earlier  photo  widget
       code.

</pre><h4><b>KEYWORDS</b></h4><pre>
       photo, image

Tk                                                     8.0                                     <u><a href="../man3tk/Tk_FindPhoto.3tk.html">Tk_FindPhoto</a></u>(3tk)
</pre>
 </div>
</div></section>
</div>
</body>
</html>