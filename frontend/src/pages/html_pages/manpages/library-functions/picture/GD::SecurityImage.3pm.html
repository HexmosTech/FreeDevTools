<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GD::SecurityImage - Security image (captcha) generator.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libgd-securityimage-perl">libgd-securityimage-perl_1.75-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       GD::SecurityImage - Security image (captcha) generator.

</pre><h4><b>VERSION</b></h4><pre>
       version 1.75

</pre><h4><b>SYNOPSIS</b></h4><pre>
          use GD::SecurityImage;

          # Create a normal image
          my $image = GD::SecurityImage-&gt;new(
                         width   =&gt; 80,
                         height  =&gt; 30,
                         lines   =&gt; 10,
                         gd_font =&gt; 'giant',
                      );
             $image-&gt;random( $your_random_str );
             $image-&gt;create( normal =&gt; 'rect' );
          my($image_data, $mime_type, $random_number) = $image-&gt;out;

       or

          # use external ttf font
          my $image = GD::SecurityImage-&gt;new(
                         width    =&gt; 100,
                         height   =&gt; 40,
                         lines    =&gt; 10,
                         font     =&gt; "/absolute/path/to/your.ttf",
                         scramble =&gt; 1,
                      );
             $image-&gt;random( $your_random_str );
             $image-&gt;create( ttf =&gt; 'default' );
             $image-&gt;particle;
          my($image_data, $mime_type, $random_number) = $image-&gt;out;

       or you can just say (most of the public methods can be chained)

          my($image, $type, $rnd) = GD::SecurityImage-&gt;new-&gt;random-&gt;create-&gt;particle-&gt;out;

       to create a security image with the default settings. But that may not be useful. If you "require" the
       module, you <b>must</b> import it:

          require GD::SecurityImage;
          GD::SecurityImage-&gt;import;

       The module also supports "Image::Magick", but the default interface uses the "GD" module. To enable
       "Image::Magick" support, you must call the module with the "use_magick" option:

          use GD::SecurityImage use_magick =&gt; 1;

       If you "require" the module, you <b>must</b> import it:

          require GD::SecurityImage;
          GD::SecurityImage-&gt;import(use_magick =&gt; 1);

       The module does not <u>export</u> anything actually. But "import" loads the necessary sub modules. If you don' t
       "import", the required modules will not be loaded and probably, you'll die().

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The (so called) <u>"Security</u> <u>Images"</u> are so popular. Most internet software use these in their registration
       screens to block robot programs (which may register tons of  fake member accounts). Security images are
       basicaly, graphical <b>CAPTCHA</b>s (<b>C</b>ompletely <b>A</b>utomated <b>P</b>ublic <b>T</b>uring Test to Tell <b>C</b>omputers and <b>H</b>umans
       <b>A</b>part). This module gives you a basic interface to create such an image. The final output is the actual
       graphic data, the mime type of the graphic and the created random string. The module also has some
       <u>"styles"</u> that are used to create the background (or foreground) of the image.

       If you are an "Authen::Captcha" user, see GD::SecurityImage::AC for migration from "Authen::Captcha" to
       "GD::SecurityImage".

       This module is <b>just</b> <b>an</b> <b>image</b> <b>generator</b>. Not a <u>captcha</u> <u>handler</u>.  The validation of the generated graphic
       is left to your programming taste. But there are some <u>captcha</u> <u>handlers</u> for several Perl FrameWorks.  If
       you are an user of one of these frameworks, see "GD::SecurityImage Implementations" in "SEE ALSO" section
       for information.

</pre><h4><b>NAME</b></h4><pre>
       GD::SecurityImage - Security image (captcha) generator.

</pre><h4><b>COLOR</b> <b>PARAMETERS</b></h4><pre>
       This module can use both RGB and HEX values as the color parameters. HEX values are recommended, since
       they are widely used and recognised.

          $color  = '#80C0F0';     # HEX
          $color2 = [15, 100, 75]; # RGB
          $i-&gt;create($meth, $style, $color, $color2)

          $i-&gt;create(ttf =&gt; 'box', '#80C0F0', '#0F644B')

       RGB values must be passed as an array reference including the three <u><b>R</b>ed</u>, <u><b>G</b>reen</u> and <u><b>B</b>lue</u> values.

       Color conversion is transparent to the user. You can use hex values under both "GD" and "Image::Magick".
       They' ll be automagically converted to RGB if you are under "GD".

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
       The constructor. new() method takes several arguments. These arguments are listed below.

       width
           The width of the image (in pixels).

       height
           The height of the image (in pixels).

       ptsize
           Numerical  value. The point size of the ttf character.  Only necessarry if you want to use a ttf font
           in the image.

       lines
           The number of lines that you' ll see in the background of the image.  The alignment of lines  can  be
           vertical,  horizontal  or  angled  or all of them. If you increase this parameter' s value, the image
           will be more cryptic.

       font
           The absolute path to your TrueType (.ttf) font file. Be  aware  that  relative  font  paths  are  not
           recognized due to problems in the "libgd" library.

           If  you are sure that you've set this parameter to a correct value and you get warnings or you get an
           empty image, be sure that your path does not include spaces in it. It  looks  like  libgd  also  have
           problems with this kind of paths (eg: '/Documents and Settings/user' under Windows).

           Set this parameter if you want to use ttf in your image.

       gd_font
           If  you  want  to  use  the default interface, set this parameter. The recognized values are "Small",
           "Large", "MediumBold", "Tiny", "Giant".  The names are case-insensitive;  you  can  pass  lower-cased
           parameters.

       bgcolor
           The background color of the image.

       send_ctobg
           If  has a true value, the random security code will be displayed in the background and the lines will
           pass over it.  (send_ctobg = send code to background)

       frame
           If has a true value, a frame will be added around the image. This option is enabled by default.

       scramble
           If set, the characters will be scrambled. If you enable this option, be sure to use  a  wider  image,
           since the characters will be separated with three spaces.

       angle
           Sets  the  angle  for scrambled/normal characters. Beware that, if you pass an "angle" parameter, the
           characters in your random string will have a fixed angle. If you do not set an "angle" parameter, the
           angle(s) will be random.

           When the scramble option is not enabled, this parameter still controls the angle of  the  text.  But,
           since  the  text will be centered inside the image, using this parameter without scramble option will
           require a taller image. Clipping will occur with smaller height values.

           Unlike the GD interface, "angle" is in "degree"s and can take values between 0 and 360.

       thickness
           Sets the line drawing width. Can take numerical values.  Default values are 1  for  GD  and  0.6  for
           Image:Magick.

       rndmax
           The minimum length of the random string. Default value is 6.

       rnd_data
           Default  character  set  used  to  create the random string is 0..9.  But, if you want to use letters
           also, you can set this parameter.  This parameter takes an array reference as the value.

           <b>Not</b> <b>necessary</b> <b>and</b> <b>will</b> <b>not</b> <b>be</b> <b>used</b> <b>if</b> <b>you</b> <b>pass</b> <b>your</b> <b>own</b> <b>random</b> <b>string.</b>

   <b>random</b>
       Creates the random security string or <b>sets</b> <b>the</b> <b>random</b> <b>string</b> to the value you have passed.  If  you  pass
       your own random string, be aware that it must be at least six (defined in "rndmax") characters long.

   <b>random_str</b>
       Returns the random string. Must be called after random().

   <b>create</b>
       This method creates the actual image. It takes four arguments, but none are mandatory.

          $image-&gt;create($method, $style, $text_color, $line_color);

       $method can be <b>"normal"</b> or <b>"ttf"</b>.

       $style can be one of the following:

       <b>default</b>
           The default style. Draws horizontal, vertical and angular lines.

       <b>rect</b>
           Draws horizontal and vertical lines

       <b>box</b> Draws two filled rectangles.

           The  "lines"  option  passed  to new, controls the size of the inner rectangle for this style. If you
           increase the "lines", you'll get a smaller internal rectangle. Using smaller values  like  5  can  be
           better.

       <b>circle</b>
           Draws circles.

       <b>ellipse</b>
           Draws ellipses.

       <b>ec</b>  This is the combination of ellipse and circle styles. Draws both ellipses and circles.

       <b>blank</b>
           Draws nothing. See "OTHER USES".

       You can use this code to get all available style names:

          my @styles = grep {s/^style_//} keys %GD::SecurityImage::Styles::;

       The  last  two  arguments  ($text_color  and $line_color) are the colors used in the image (text and line
       color -- respectively):

          $image-&gt;create($method, $style, [0,0,0], [200,200,200]);
          $image-&gt;create($method, $style, '#000000', '#c8c8c8');

   <b>particle</b>
       Must be called after create.

       Adds random dots to the image. They'll cover all over the surface.  Accepts two parameters;  the  density
       (number) of the particles and the maximum number of dots around the main dot.

          $image-&gt;particle($density, $maxdots);

       Default value of $density is dependent on your image' s width or height value. The greater value of width
       and height is taken and multiplied by twenty. So; if your width is 200 and height is 70, $density is "200
       * 20 = 4000" (unless you pass your own value).  The default value of $density can be too much for smaller
       images.

       $maxdots  defines  the maximum number of dots near the default dot.  Default value is 1. If you set it to
       4, The selected pixel and 3 other pixels near it will be used and colored.

       The color of the particles are the same as the color of your text (defined in create).

   <b>info_text</b>
       This method must be called after create. If you call it early, you'll die. "info_text" adds an extra text
       to the generated image. You can also put a strip under the text. The purpose of this method is to display
       additional information on the image. Copyright information can be an example for that.

          $image-&gt;info_text(
             x      =&gt; 'right',
             y      =&gt; 'up',
             gd     =&gt; 1,
             strip  =&gt; 1,
             color  =&gt; '#000000',
             scolor =&gt; '#FFFFFF',
             text   =&gt; 'Generated by GD::SecurityImage',
          );

       Options:

       x   Controls the horizontal location of the information text. Can be either "left" or "right".

       y   Controls the vertical location of the information text. Can be either "up" or "down".

       strip
           If has a true value, a strip will be added to the background of the information text.

       gd  This option can only be used under "GD". Has no effect under Image::Magick. If has a true value,  the
           standard GD font "Tiny" will be used for the information text.

           If  this  option  is not present or has a false value, the TTF font parameter passed to "new" will be
           used instead.

       ptsize
           The ptsize value of the information text to be used with the TTF font.  TTF font parameter can not be
           set with info_text(). The value passed to new() will be used instead.

       color
           The color of the information text.

       scolor
           The color of the strip.

       text
           This parameter controls the displayed text. If you want to display long texts, be sure to adjust  the
           image, or clipping will occur.

   <b>out</b>
       This  method  finally  returns  the  created  image,  the mime type of the image and the random number(s)
       generated.

       The returned mime type is "png" or "gif" or "jpeg" for "GD" and "gif" for "Image::Magick" (if you do  not
       "force" some other format).

       "out" method accepts arguments:

          @data = $image-&gt;out(%args);

       force
           You can set the output format with the "force" parameter:

              @data = $image-&gt;out(force =&gt; 'png');

           If  "png" is supported by the interface (via "GD" or "Image::Magick"); you'll get a png image, if the
           interface does not support this format, out() method will use it's default configuration.

       compress
           And with the "compress" parameter, you can define the compression for "png" and quality for "jpeg":

              @data = $image-&gt;out(force =&gt; 'png' , compress =&gt; 1);
              @data = $image-&gt;out(force =&gt; 'jpeg', compress =&gt; 100);

           When you use "compress" with "png" format, the value of "compress" is ignored and it is only  checked
           if it has a true value. With "png" the compression will always be 9 (maximum compression). eg:

              @data = $image-&gt;out(force =&gt; 'png' , compress =&gt; 1);
              @data = $image-&gt;out(force =&gt; 'png' , compress =&gt; 3);
              @data = $image-&gt;out(force =&gt; 'png' , compress =&gt; 5);
              @data = $image-&gt;out(force =&gt; 'png' , compress =&gt; 1500);

           All will default to 9. But this will disable compression:

              @data = $image-&gt;out(force =&gt; 'png' , compress =&gt; 0);

           But  the  behaviour  changes if the format is "jpeg"; the value of "compress" will be used for "jpeg"
           quality; which is in the range 1..100.

           Compression and quality operations are disabled by default.

   <b>raw</b>
       Depending on your usage of the module; returns the raw "GD::Image" object:

          my $gd = $image-&gt;raw;
          print $gd-&gt;png;

       or the raw "Image::Magick" object:

          my $magick = $image-&gt;raw;
          $magick-&gt;Write("gif:-");

       Can be useful, if you want to modify the graphic yourself. If you want to  get  an  <u>image</u>  <u>type</u>  see  the
       "force" option in "out".

   <b>gdbox_empty</b>
       See "path bug" in "GD bug" for usage and other information on this method.

   <b>add_strip</b>
   <b>cconvert</b>
   <b>gdf</b>
   <b>h2r</b>
   <b>is_hex</b>
   <b>r2h</b>
   <b>random_angle</b>
</pre><h4><b>UTILITY</b> <b>METHODS</b></h4><pre>
   <b>backends</b>
       Returns a list of available GD::SecurityImage back-ends.

          my @be = GD::SecurityImage-&gt;backends;

       or

          my @be = $image-&gt;backends;

       If called in a void context, prints a verbose list of available GD::SecurityImage back-ends:

          Available back-ends in GD::SecurityImage v1.55 are:
                  GD
                  Magick

          Search directories:
                     /some/@INC/dir/containing/GDSI

       you can see the output with this command:

          perl -MGD::SecurityImage -e 'GD::SecurityImage-&gt;backends'

       or under windows:

          perl -MGD::SecurityImage -e "GD::SecurityImage-&gt;backends"

</pre><h4><b>EXAMPLES</b></h4><pre>
       See  the  tests  in  the  distribution.  Also  see the demo program "eg/demo.pl" for an "Apache::Session"
       implementation of "GD::SecurityImage".

       Download the distribution from a CPAN mirror near you, if you don't have the files.

       Running the test suite will also create some sample images.

   <b>OTHER</b> <b>USE</b> <b>CASES</b>
       "GD::SecurityImage" drawing capabilities can also be used for  <u>counter</u>  <u>image</u>  generation  or  displaying
       arbitrary messages:

          use CGI qw(header);
          use GD::SecurityImage 1.64; # we need the "blank" style

          my $font  = "StayPuft.ttf";
          my $rnd   = "10.257"; # counter data

          my $image = GD::SecurityImage-&gt;new(
             width  =&gt;   140,
             height =&gt;    75,
             ptsize =&gt;    30,
             rndmax =&gt;     1, # keeping this low helps to display short strings
             frame  =&gt;     0, # disable borders
             font   =&gt; $font,
          );

          $image-&gt;random( $rnd );
          # use the blank style, so that nothing will be drawn
          # to distort the image.
          $image-&gt;create( ttf =&gt; 'blank', '#CC8A00' );
          $image-&gt;info_text(
             text   =&gt; 'You are visitor number',
             ptsize =&gt; 10,
             strip  =&gt;  0,
             color  =&gt; '#0094CC',
          );
          $image-&gt;info_text(
             text   =&gt; '( c ) 2 0 0 7   m y s i t e',
             ptsize =&gt; 10,
             strip  =&gt;  0,
             color  =&gt; '#d7d7d7',
             y      =&gt; 'down',
          );

          my($data, $mime, $random) = $image-&gt;out;

          binmode STDOUT;
          print header -type =&gt; "image/$mime";
          print $data;

</pre><h4><b>ERROR</b> <b>HANDLING</b></h4><pre>
       "die" is called in some methods if something fails. You may need to "eval" your code to catch exceptions.

</pre><h4><b>TIPS</b></h4><pre>
       If  you  look  at  the  demo program (not just look at it, try to run it) you'll see that the random code
       changes after every request (successful or not). If you do not change the  random  code  after  a  failed
       request and display the random code inside HTML (like <u>"Wrong!</u> <u>It</u> <u>must</u> <u>be</u> <u>&lt;random&gt;"</u>), then you are doing a
       logical  mistake,  since  the  user  (or  robot) can now copy &amp; paste the random code into your validator
       without looking at the security image and will pass the test. Just don't do that. Random code must change
       after every validation.

       If you want to be a little more strict, you can also add a timeout  key  to  the  session  (this  feature
       currently  does not exits in the demo) and expire the related random code after the timeout. Since robots
       can call the image generator directly (without requiring the HTML form), they can examine the image for a
       while without changing it. A timeout implemetation may prevent this.

</pre><h4><b>BUGS</b></h4><pre>
       See the "SUPPORT" section if you have a bug or request to report.

   <b>GD</b> <b>bug</b>
       <u>path</u> <u>bug</u>

       libgd and GD.pm don't like relative paths and paths that have spaces in them. If you  pass  a  font  path
       that is not an <b>exact</b> <b>path</b> or a path that have a space in it, you may get an empty image.

       To  check if the module failed to find the ttf font (when using "GD"), a new method added: gdbox_empty().
       It must be called after create():

          $image-&gt;create;
          die "Error loading ttf font for GD: $@" if $image-&gt;gdbox_empty;

       gdbox_empty() always returns false, if you are using "Image::Magick".

</pre><h4><b>COMMON</b> <b>ERRORS</b></h4><pre>
   <b>Wrong</b> <b>GD</b> <b>installation</b>
       I got some error reports saying that GD::SecurityImage dies with this error:

          Can't locate object method "new" via package "GD::Image"
          (perhaps you forgot to load "GD::Image"?) at ...

       This is due to a <u>wrong</u> installation of the GD module. GD includes "XS" code and it needs to be  compiled.
       You  can't  just  copy/paste  the <u>GD.pm</u> and expect it to work. It will not.  If you are under Windows and
       don't have a C compiler, you have to add new  repositories  to  install  <u>GD</u>,  since  ActiveState'  s  own
       repositories  don't  include <u>GD</u>. Randy Kobes and J-L Morel have ppm repositories for both 5.6.x and 5.8.x
       and they both have <u>GD</u>:

          <a href="http://www.bribes.org/perl/ppmdir.html">http://www.bribes.org/perl/ppmdir.html</a>
          <a href="http://theoryx5.uwinnipeg.ca/">http://theoryx5.uwinnipeg.ca/</a>

       <u>bribes.org</u> also has a <u>GD::SecurityImage</u>  ppd,  so  you  can  just  install  <u>GD::SecurityImage</u>  from  that
       repository.

   <b>libgd</b> <b>errors</b>
       There are some issues related to wrong/incomplete compiling of libgd and old/new version conflicts.

       <u>libgd</u> <u>without</u> <u>TTF</u> <u>support</u>

       If  your  libgd  is compiled without TTF support, you'll get an <u>empty</u> image. The lines will be drawn, but
       there will be no text. You can check it with "gdbox_empty" method.

       <u>GIF</u> <u>-</u> <u>Old</u> <u>libgd</u> <u>or</u> <u>libgd</u> <u>without</u> <u>GIF</u> <u>support</u> <u>enabled</u>

       If your GD has a "gif" method, but you get empty images with gif() method, you have to update your  libgd
       or compile it with GIF enabled.

       You can test if "gif" is working from the command line:

          perl -MGD -e '$_=GD::Image-&gt;new;$_-&gt;colorAllocate(0,0,0);print$_-&gt;gif'

       or under windows:

          perl -MGD -e "$_=GD::Image-&gt;new;$_-&gt;colorAllocate(0,0,0);print$_-&gt;gif"

       Conclusions:

       •   If it dies, your GD is very old.

       •   If it prints nothing, your libgd was compiled without GIF enabled (upgrade or re-compile).

       •   If it prints out a junk that starts with 'GIF87a', everything is OK.

</pre><h4><b>CAVEAT</b> <b>EMPTOR</b></h4><pre>
       •   Using  the  default  library  "GD"  is a better choice. Since it is faster and does not use that much
           memory, while "Image::Magick" is slower and uses more memory.

       •   The internal random code generator is used <b>only</b> for demonstration purposes for this  module.  It  may
           not be <u>effective</u>. You must supply your own random code and use this module to display it.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
   <b>Other</b> <b>CAPTCHA</b> <b>Implementations</b> <b>&amp;</b> <b>Perl</b> <b>Modules</b>
       •   GD, Image::Magick

       •   ImagePwd, Authen::Captcha.

       •   "ImageCode" Perl Module (commercial): &lt;<a href="http://www.progland.com/ImageCode.html">http://www.progland.com/ImageCode.html</a>&gt;.

       •   The CAPTCHA project: &lt;<a href="http://www.captcha.net/">http://www.captcha.net/</a>&gt;.

       •   A      definition      of      CAPTCHA      (From      Wikipedia,     the     free     encyclopedia):
           &lt;<a href="http://en.wikipedia.org/wiki/Captcha">http://en.wikipedia.org/wiki/Captcha</a>&gt;.

       •   WebService::CaptchasDotNet:  A  Perl  interface  to   <u><a href="http://captchas.net">http://captchas.net</a></u>   free   captcha   service.
           <u>captchas.net</u> also offers <u>audio</u> captchas.

   <b>GD::SecurityImage</b> <b>Implementations</b>
       •   GD::SecurityImage::AC: "Authen::Captcha" drop-in replacement module.

       •   Sledge::Plugin::Captcha

       •   Catalyst::Plugin::Captcha

       •   CGI::Application::Plugin::CAPTCHA

       •   Angerwhale::Controller::Captcha

</pre><h4><b>AUTHOR</b></h4><pre>
       Burak Gursoy &lt;<a href="mailto:burak@cpan.org">burak@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2004 by Burak Gursoy.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.38.2                                       2024-03-06                             <u>GD::<a href="../man3pm/SecurityImage.3pm.html">SecurityImage</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>