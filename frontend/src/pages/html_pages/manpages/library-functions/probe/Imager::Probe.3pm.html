<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imager::Probe - hot needle of inquiry for libraries</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libimager-perl">libimager-perl_1.027+dfsg-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Imager::Probe - hot needle of inquiry for libraries

</pre><h4><b>SYNOPSIS</b></h4><pre>
         require Imager::Probe;

         my %probe =
           (
            # short name of what we're looking for (displayed to user)
            name =&gt; "FOO",
            # pkg-config lookup
            pkg =&gt; [ qw/name1 name2 name3/ ],
            # perl subs that probe for the library
            code =&gt; [ \&amp;foo_probe1, \&amp;foo_probe2 ],
            # or just: code =&gt; \&amp;foo_probe,
            inccheck =&gt; sub { ... },
            libcheck =&gt; sub { ... },
            # search for this library if libcheck not supplied
            libbase =&gt; "foo",
            # library link time options, uses libbase to build options otherwise
            libopts =&gt; "-lfoo",
            # C code to check the library is sane
            testcode =&gt; "...",
            # header files needed
            testcodeheaders =&gt; [ "stdio.h", "foo.h" ],
           );
         my $result = Imager::Probe-&gt;probe(\%probe)
           or print "Foo library not found: ",Imager::Probe-&gt;error;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Does the probes that were hidden in Imager's <u>Makefile.PL</u>, pulled out so the file format libraries can be
       externalized.

       The return value is either nothing if the probe fails, or a hash containing:

       •   "INC" - "-I" and other C options

       •   "LIBS" - "-L", "-l" and other link-time options

       •   "DEFINE" - "-D" options, if any.

       The possible values for the hash supplied to the <b>probe()</b> method are:

       •   "pkg"  -  an  array  of <u>pkg-config</u> names to probe for.  If the <u>pkg-config</u> checks pass, "inccheck" and
           "libcheck" aren't used.

       •   "inccheck" - a code reference that checks if the supplied include  directory  contains  the  required
           header files.

       •   "libcheck"  -  a  code  reference that checks if the supplied library directory contains the required
           library files.  Note: the <u>Makefile.PL</u> version of this was supplied all  of  the  library  file  names
           instead.  "libcheck" can also be an arrayref of library check code references, all of which must find
           a match for the library to be considered "found".

       •   "libbase"  -  if  "inccheck"  is  supplied,  but  "libcheck" isn't, then a "libcheck" that checks for
           "lib"<u>libbase$Config{_a}</u> and "lib"<u>libbase</u>.<u>$Config{so}</u> is created.  If "libopts"  isn't  supplied  then
           that  can  be  synthesized as "-l<u>libbase</u>". "libbase" can also be an arrayref of library base names to
           search for, in which case all of the libraries mentioned must be found for the probe to succeed.

       •   "libopts" - if the libraries are found via "inccheck"/"libcheck",  these  are  the  "-l"  options  to
           supply during the link phase.

       •   "code"  - a code reference to perform custom checks.  Returns the probe result directly.  Can also be
           an array ref of functions to call.

       •   "testcode" - test C code that is run with Devel::CheckLib.  You also need to set "testcodeheaders".

       •   "testcodeprologue" - C code to insert between the headers and the main function.

       •   "incpath" - $Config{path_sep} separated list of header file directories to check, or a  reference  to
           an array of such.

       •   "libpath"  - $Config{path_sep} separated list of library file directories to check, or a reference to
           an array of such.

       •   "alternatives" - an optional array reference of alternate configurations (as hash references) to test
           if the primary configuration isn't successful.  Each alternative  should  include  an  "altname"  key
           describing  the  alternative.  Any key not mentioned in an alternative defaults to the value from the
           main configuration.

</pre><h4><b>AUTHOR</b></h4><pre>
       Tony Cook &lt;<a href="mailto:tonyc@cpan.org">tonyc@cpan.org</a>&gt;, Arnar M. Hrafnkelsson

perl v5.40.1                                       2025-03-16                                 <u>Imager::<a href="../man3pm/Probe.3pm.html">Probe</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>