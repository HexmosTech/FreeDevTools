<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sam_initialize - Initialize health checking</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsam-dev">libsam-dev_3.1.9-2ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sam_initialize - Initialize health checking

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;corosync/sam.h&gt;</b>

       <b>cs_error_t</b> <b>sam_initialize</b> <b>(int</b> <u>time_interval</u><b>,</b> <b>sam_recovery_policy_t</b> <u>recovery_policy</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>sam_initialize</b> function is used to initialize health checking of a process.

       Application  can  have  only  one  instance  of SAM. This function must be called before any other of SAM
       functions.  It is recommended to initialize before the process begins any process initialization.

       The <u>time_interval</u> parameter is a timeout in milliseconds before taking recovery action after  having  not
       received a healthcheck.

       If  <u>time_interval</u>  parameter  is  zero,  there  is  no  time limit and no healthcheck must be sent by the
       process.  In this operational mode, a process failure will continue to execute the recovery policy.

       The <u>recovery_policy</u> is defined as type:

         typedef enum {
              SAM_RECOVERY_POLICY_QUIT = 1,
              SAM_RECOVERY_POLICY_RESTART = 2,
               SAM_RECOVERY_POLICY_QUORUM = 0x08,
               SAM_RECOVERY_POLICY_QUORUM_QUIT = SAM_RECOVERY_POLICY_QUORUM | SAM_RECOVERY_POLICY_QUIT,
               SAM_RECOVERY_POLICY_QUORUM_RESTART = SAM_RECOVERY_POLICY_QUORUM | SAM_RECOVERY_POLICY_RESTART,
               SAM_RECOVERY_POLICY_CMAP = 0x10,
               SAM_RECOVERY_POLICY_CONFDB = 0x10,
         } sam_recovery_policy_t;

       where

       SAM_RECOVERY_POLICY_QUIT
              on failure, the process will terminate.

       SAM_RECOVERY_POLICY_RESTART
              on failure, the process will restart.

       SAM_RECOVERY_POLICY_QUORUM
              is not policy. Used only as flag meaning quorum integration

       SAM_RECOVERY_POLICY_QUORUM_QUIT
              same as <u>SAM_RECOVERY_POLICY_QUIT</u> but <b>sam_start</b> <b>(3)</b> will block until corosync becomes  quorate  and
              process will be terminated if quorum is lost.

       SAM_RECOVERY_POLICY_QUORUM_RESTART
              same  as  <u>SAM_RECOVERY_POLICY_RESTART</u>  but <b>sam_start</b> <b>(3)</b> will block until corosync becomes quorate
              and process will be restarted if quorum is lost.

       SAM_RECOVERY_POLICY_CMAP
              is not policy. Used only as flag meaning cmap integration.  It  can  be  used  with  all  previous
              policies.    For   backward   compatibility,   SAM_RECOVERY_POLICY_CONFDB  with  same  meaning  as
              <u>SAM_RECOVERY_POLICY_CMAP</u> is also provided.

       To perform event driven healthchecking, <b><a href="../man3/sam_register.3.html">sam_register</a>(3)</b> and <b><a href="../man3/sam_start.3.html">sam_start</a>(3)</b> functions  must  called.   Event
       driven healthchecking causes the duplicate standby process running the SAM serve rto periodically request
       healthchecks from the active process.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This call return CS_OK value if successful, otherwise and error is returned.

</pre><h4><b>ERRORS</b></h4><pre>
       CS_ERR_BAD_HANDLE
              can happened in case of double initialization.

       CS_ERR_INVALID_PARAM
              <u>recovery_policy</u> has invalid value.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/sam_register.3.html">sam_register</a></b>(3), <b><a href="../man3/sam_start.3.html">sam_start</a></b>(3), <b><a href="../man3/sam_hc_callback_register.3.html">sam_hc_callback_register</a></b>(3)

       <b>CS_ERR_TRY_AGAIN</b> Resource temporarily unavailable

       <b>CS_ERR_INVALID_PARAM</b> Invalid argument

       <b>CS_ERR_ACCESS</b> Permission denied

       <b>CS_ERR_LIBRARY</b> The connection failed

       <b>CS_ERR_INTERRUPT</b> System call interrupted by a signal

       <b>CS_ERR_NOT_SUPPORTED</b> The requested protocol/functionality not supported

       <b>CS_ERR_MESSAGE_ERROR</b> Incorrect auth message received

       <b>CS_ERR_NO_MEMORY</b> Not enough memory to complete the requested task

corosync Man Page                                  21/05/2010                                  <u><a href="../man3/SAM_INITIALIZE.3.html">SAM_INITIALIZE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>