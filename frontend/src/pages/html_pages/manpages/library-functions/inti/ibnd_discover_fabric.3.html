<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ibnd_discover_fabric,  ibnd_destroy_fabric,  ibnd_debug  ibnd_show_progress  -  initialize  ibnetdiscover</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libibnetdisc-dev">libibnetdisc-dev_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ibnd_discover_fabric,  ibnd_destroy_fabric,  ibnd_debug  ibnd_show_progress  -  initialize  ibnetdiscover
       library.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;infiniband/ibnetdisc.h&gt;</b>

       <b>ibnd_fabric_t</b> <b>*ibnd_discover_fabric(struct</b> <b>ibmad_port</b> <b>*ibmad_port,</b> <b>int</b> <b>timeout_ms,</b> <b>ib_portid_t</b> <b>*from,</b> <b>int</b> <b>hops)</b>
       <b>void</b> <b>ibnd_destroy_fabric(ibnd_fabric_t</b> <b>*fabric)</b>
       <b>void</b> <b>ibnd_debug(int</b> <b>i)</b>
       <b>void</b> <b>ibnd_show_progress(int</b> <b>i)</b>
       <b>int</b> <b>ibnd_set_max_smps_on_wire(int</b> <b>i)</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ibnd_discover_fabric()</b> Discover the fabric connected to the port specified by ibmad_port, using a timeout
       specified.  The "from" and "hops" parameters are optional and allow one to  scan  part  of  a  fabric  by
       specifying a node "from" and a number of hops away from that node to scan, "hops".  This gives the user a
       "sub-fabric" which is "centered" anywhere they chose.

       ibmad_port   must   be   opened   with   at   least  IB_SMI_CLASS  and  IB_SMI_DIRECT_CLASS  classes  for
       ibnd_discover_fabric to work.

       <b>ibnd_destroy_fabric()</b> free all memory and resources associated with the fabric.

       <b>ibnd_debug()</b> Set the debug level to be printed as library operations take place.

       <b>ibnd_show_progress()</b> Indicate that the library should  print  debug  output  which  shows  it's  progress
       through the fabric.

       <b>ibnd_set_max_smps_on_wire()</b> Set the number of SMP's which will be issued on the wire simultaneously.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>ibnd_discover_fabric()</b> return NULL on failure, otherwise a valid ibnd_fabric_t object.

       <b>ibnd_destory_fabric(),</b> <b>ibnd_debug()</b> NONE

       <b>ibnd_set_max_smps_on_wire()</b> The previous value is returned

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>Discover</b> <b>the</b> <b>entire</b> <b>fabric</b> <b>connected</b> <b>to</b> <b>device</b> <b>mthca0</b> <b>,</b> <b>port</b> <b>1.</b>

            int  mgmt_classes[2]  =  {IB_SMI_CLASS,  IB_SMI_DIRECT_CLASS};       struct ibmad_port *ibmad_port =
       mad_rpc_open_port(ca,     ca_port,     mgmt_classes,      2);           ibnd_fabric_t      *fabric      =
       ibnd_discover_fabric(ibmad_port,    100,    NULL,    0);         ...         ibnd_destroy_fabric(fabric);
            mad_rpc_close_port(ibmad_port);

       <b>Discover</b> <b>only</b> <b>a</b> <b>single</b> <b>node</b> <b>and</b> <b>those</b> <b>nodes</b> <b>connected</b> <b>to</b> <b>it.</b>

            ...       str2drpath(&amp;(port_id.drpath), from, 0, 0);      ...       ibnd_discover_fabric(ibmad_port,
       100, &amp;port_id, 1);      ...

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
            libibmad, mad_rpc_open_port

</pre><h4><b>AUTHORS</b></h4><pre>
       Ira Weiny &lt;<a href="mailto:weiny2@llnl.gov">weiny2@llnl.gov</a>&gt;

OpenIB                                            July 25, 2008                          <u><a href="../man3/IBND_DISCOVER_FABRIC.3.html">IBND_DISCOVER_FABRIC</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>