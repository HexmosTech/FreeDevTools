<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       setpgid — set process group ID for job control

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;

       int setpgid(pid_t <u>pid</u>, pid_t <u>pgid</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>setpgid</u>()  function shall either join an existing process group or create a new process group within
       the session of the calling process.

       The process group ID of a session leader shall not change.

       Upon successful completion, the process group ID of the process with a process ID that matches <u>pid</u>  shall
       be set to <u>pgid</u>.

       As  a special case, if <u>pid</u> is 0, the process ID of the calling process shall be used. Also, if <u>pgid</u> is 0,
       the process ID of the indicated process shall be used.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, <u>setpgid</u>() shall return 0; otherwise, -1 shall be returned and <u>errno</u> shall  be
       set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>setpgid</u>() function shall fail if:

       <b>EACCES</b> The value of the <u>pid</u> argument matches the process ID of a child process of the calling process and
              the child process has successfully executed one of the <u>exec</u> functions.

       <b>EINVAL</b> The value of the <u>pgid</u> argument is less than 0, or is not a value supported by the implementation.

       <b>EPERM</b>  The process indicated by the <u>pid</u> argument is a session leader.

       <b>EPERM</b>  The value of the <u>pid</u> argument matches the process ID of a child process of the calling process and
              the child process is not in the same session as the calling process.

       <b>EPERM</b>  The value of the <u>pgid</u> argument is valid but does not match the process ID of the process indicated
              by  the <u>pid</u> argument and there is no process with a process group ID that matches the value of the
              <u>pgid</u> argument in the same session as the calling process.

       <b>ESRCH</b>  The value of the <u>pid</u> argument does not match the process ID of the calling process or of  a  child
              process of the calling process.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       The  <u>setpgid</u>()  function  shall  group  processes  together  for  the  purpose of signaling, placement in
       foreground or background, and other job control actions.

       The <u>setpgid</u>() function is similar to the <u>setpgrp</u>() function of 4.2 BSD, except that 4.2 BSD  allowed  the
       specified  new  process  group  to  assume any value. This presents certain security problems and is more
       flexible than necessary to support job control.

       To provide tighter security, <u>setpgid</u>() only allows the calling process to join a process group already in
       use inside its session or create a new process group whose process group ID was equal to its process ID.

       When a job control shell spawns a new job, the processes in the job must be placed  into  a  new  process
       group via <u>setpgid</u>().  There are two timing constraints involved in this action:

        1. The  new  process  must be placed in the new process group before the appropriate program is launched
           via one of the <u>exec</u> functions.

        2. The new process must be placed in the new process group before the shell can correctly  send  signals
           to the new process group.

       To  address  these  constraints, the following actions are performed. The new processes call <u>setpgid</u>() to
       alter their own process groups after <u>fork</u>() but before <u>exec</u>.  This satisfies the first constraint.  Under
       4.3  BSD,  the  second  constraint  is satisfied by the synchronization property of <u>vfork</u>(); that is, the
       shell is suspended until the child has completed the <u>exec</u>, thus ensuring that the child has completed the
       <u>setpgid</u>().  A new version of <u>fork</u>() with this same synchronization property was considered,  but  it  was
       decided  instead  to  merely  allow  the  parent  shell  process to adjust the process group of its child
       processes via <u>setpgid</u>().  Both timing constraints are now satisfied by having both the parent  shell  and
       the  child  attempt  to  adjust the process group of the child process; it does not matter which succeeds
       first.

       Since it would be confusing to an application to have its process group change after it  began  executing
       (that is, after <u>exec</u>), and because the child process would already have adjusted its process group before
       this, the <b>[EACCES]</b> error was added to disallow this.

       One non-obvious use of <u>setpgid</u>() is to allow a job control shell to return itself to its original process
       group  (the  one in effect when the job control shell was executed). A job control shell does this before
       returning control back to its parent when it is terminating or suspending itself as a  way  of  restoring
       its  job control ``state'' back to what its parent would expect. (Note that the original process group of
       the job control shell typically matches the process group of its parent,  but  this  is  not  necessarily
       always the case.)

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>exec</u>, <u>getpgrp</u>(), <u>setsid</u>(), <u>tcsetpgrp</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;sys_types.h&gt;</b>, <b>&lt;unistd.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                       <u><a href="../man3POSIX/SETPGID.3POSIX.html">SETPGID</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>