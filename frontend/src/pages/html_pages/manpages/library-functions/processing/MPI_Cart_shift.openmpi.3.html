<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C Syntax</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openmpi-doc">openmpi-doc_5.0.7-1build1_all</a> <br><br><pre>
</pre><h4><b>SYNTAX</b></h4><pre>
   <b>C</b> <b>Syntax</b>
          #include &lt;mpi.h&gt;

          int MPI_Cart_shift(MPI_Comm comm, int direction, int disp,
              int *rank_source, int *rank_dest)

   <b>Fortran</b> <b>Syntax</b>
          USE MPI
          ! or the older form: INCLUDE 'mpif.h'

          MPI_CART_SHIFT(COMM, DIRECTION, DISP, RANK_SOURCE,
                  RANK_DEST, IERROR)
              INTEGER COMM, DIRECTION, DISP, RANK_SOURCE
              INTEGER RANK_DEST, IERROR

   <b>Fortran</b> <b>2008</b> <b>Syntax</b>
          USE mpi_f08

          MPI_Cart_shift(comm, direction, disp, rank_source, rank_dest, ierror)
              TYPE(MPI_Comm), INTENT(IN) :: comm
              INTEGER, INTENT(IN) :: direction, disp
              INTEGER, INTENT(OUT) :: rank_source, rank_dest
              INTEGER, OPTIONAL, INTENT(OUT) :: ierror

</pre><h4><b>INPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>comm</b> : Communicator with Cartesian structure (handle).

       • <b>direction</b> : Coordinate dimension of shift (integer).

       •

         <b>disp</b> <b>(Displacement</b> <b>(</b> <b>&gt;</b> <b>0:</b> <b>upward</b> <b>shift,</b> <b>&lt;</b> <b>0:</b> <b>downward</b> <b>shift))</b>
                (integer).

</pre><h4><b>OUTPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>rank_source</b> : Rank of source process (integer).

       • <b>rank_dest</b> : Rank of destination process (integer).

       • <b>ierror</b> : Fortran only: Error status (integer).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       If  the process topology is a Cartesian structure, an <u>MPI_Sendrecv</u> operation is likely to be used along a
       coordinate <b>direction</b> to perform a shift of data. As input,  <u>MPI_Sendrecv</u>  takes  the  rank  of  a  source
       process  for  the  receive,  and  the  rank  of  a  destination  process  for  the  send. If the function
       <u>MPI_Cart_shift</u> is called for a Cartesian process group, it provides the calling process  with  the  above
       identifiers,  which  then  can be passed to <u>MPI_Sendrecv</u>. The user specifies the coordinate <b>direction</b> and
       the size of the step (positive or negative). The function is local.

       The <b>direction</b> argument indicates the dimension of the shift, i.e., the coordinate whose value is modified
       by the shift. The coordinates are numbered from 0 to ndims-1, where ndims is the number of dimensions.

       Note: The <b>direction</b> argument is in the range [0, n-1] for an n-dimensional Cartesian mesh.

       Depending on the periodicity of the Cartesian group in the specified coordinate <b>direction</b>, <u>MPI_Cart_shift</u>
       provides the identifiers for a circular or an end-off shift. In the case of an end-off shift,  the  value
       <b>MPI_PROC_NULL</b>  may be returned in <b>rank_source</b> or <b>rank_dest</b>, indicating that the source or the destination
       for the shift is out of range.

       Example: The <b>comm</b>unicator, <b>comm</b>, has a two-dimensional, periodic, Cartesian topology associated with  it.
       A  two-dimensional  array  of  REALs is stored one element per process, in variable A. One wishes to skew
       this array, by shifting column i (vertically, i.e., along the column) by i steps.

          ! find process rank
              CALL MPI_COMM_RANK(comm, rank, ierr)
          ! find Cartesian coordinates
              CALL MPI_CART_COORDS(comm, rank, maxdims, coords, ierr)
          ! compute shift source and destination
              CALL MPI_CART_SHIFT(comm, 0, <a href="../man2/coords.2.html">coords</a>(2), source, dest, ierr)
          ! skew array
              CALL MPI_SENDRECV_REPLACE(A, 1, MPI_REAL, dest, 0, source, 0, comm, status,
                                        ierr)

</pre><h4><b>NOTE</b></h4><pre>
       In Fortran, the dimension indicated by DIRECTION = i has DIMS(i+1) nodes, where DIMS is  the  array  that
       was used to create the grid. In C, the dimension indicated by direction = i is the dimension specified by
       dims[i].

</pre><h4><b>ERRORS</b></h4><pre>
       Almost  all  MPI  routines  return  an  error  value; C routines as the return result of the function and
       Fortran routines in the last argument.

       Before the error value is returned, the current MPI  error  handler  associated  with  the  communication
       object  (e.g.,  communicator, window, file) is called.  If no communication object is associated with the
       MPI call, then the call is considered attached to MPI_COMM_SELF and will call the  associated  MPI  error
       handler.   When   MPI_COMM_SELF   is   not  initialized  (i.e.,  before  <u>MPI_Init</u>/<u>MPI_Init_thread</u>,  after
       <u>MPI_Finalize</u>, or when using the Sessions Model exclusively) the error raises the initial  error  handler.
       The  initial  error handler can be changed by calling <u>MPI_Comm_set_errhandler</u> on MPI_COMM_SELF when using
       the World model, or the mpi_initial_errhandler CLI argument to mpiexec or info  key  to  <u>MPI_Comm_spawn</u>/‐
       <u>MPI_Comm_spawn_multiple</u>.   If no other appropriate error handler has been set, then the MPI_ERRORS_RETURN
       error handler is called for MPI I/O functions and the MPI_ERRORS_ABORT error handler is  called  for  all
       other MPI functions.

       Open MPI includes three predefined error handlers that can be used:

       • <b>MPI_ERRORS_ARE_FATAL</b> Causes the program to abort all connected MPI processes.

       • <b>MPI_ERRORS_ABORT</b> An error handler that can be invoked on a communicator, window, file, or session. When
         called  on  a  communicator,  it  acts  as if <u>MPI_Abort</u> was called on that communicator. If called on a
         window or file, acts as if <u>MPI_Abort</u> was called on a communicator containing the group of processes  in
         the corresponding window or file. If called on a session, aborts only the local process.

       • <b>MPI_ERRORS_RETURN</b> Returns an error code to the application.

       MPI applications can also implement their own error handlers by calling:

       • <u>MPI_Comm_create_errhandler</u> then <u>MPI_Comm_set_errhandler</u>

       • <u>MPI_File_create_errhandler</u> then <u>MPI_File_set_errhandler</u>

       • <u>MPI_Session_create_errhandler</u> then <u>MPI_Session_set_errhandler</u> or at <u>MPI_Session_init</u>

       • <u>MPI_Win_create_errhandler</u> then <u>MPI_Win_set_errhandler</u>

       Note that MPI does not guarantee that an MPI program can continue past an error.

       See the <u>MPI</u> <u>man</u> <u>page</u> for a full list of <u>MPI</u> <u>error</u> <u>codes</u>.

       See the Error Handling section of the MPI-3.1 standard for more information.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2025, The Open MPI Community

                                                  Jun 07, 2025                                 <u><a href="../man3/MPI_CART_SHIFT.3.html">MPI_CART_SHIFT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>