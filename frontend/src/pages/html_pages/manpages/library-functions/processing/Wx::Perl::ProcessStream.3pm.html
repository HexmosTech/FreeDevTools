<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wx::Perl::ProcessStream - access IO of external processes via events</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libwx-perl-processstream-perl">libwx-perl-processstream-perl_0.32-1.1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Wx::Perl::ProcessStream - access IO of external processes via events

</pre><h4><b>VERSION</b></h4><pre>
       Version 0.32

</pre><h4><b>SYNOPSYS</b></h4><pre>
           use Wx::Perl::ProcessStream qw( :everything );

           EVT_WXP_PROCESS_STREAM_STDOUT    ( $self, \&amp;evt_process_stdout );
           EVT_WXP_PROCESS_STREAM_STDERR    ( $self, \&amp;evt_process_stderr );
           EVT_WXP_PROCESS_STREAM_EXIT      ( $self, \&amp;evt_process_exit   );
           EVT_WXP_PROCESS_STREAM_MAXLINES  ( $self, \&amp;evt_process_maxlines  );

           my $proc1 = Wx::Perl::ProcessStream::Process-&gt;new('perl -e"print qq($_\n) for(@INC);"', 'MyName1', $self);
           $proc1-&gt;Run;

           my $command = 'executable.exe parm1 parm2 parm3'
           my $proc2 = Wx::Perl::ProcessStream::Process-&gt;new($command, 'MyName2', $self)
                                                       -&gt;Run;

           my @args = qw( executable.exe parm1 parm2 parm3 );
           my $proc3 = Wx::Perl::ProcessStream::Process-&gt;new(\@args, 'MyName2', $self);
           $proc3-&gt;Run;

           my $proc4 = Wx::Perl::ProcessStream::Process-&gt;new(\@args, 'MyName2', $self, 'readline')-&gt;Run;

           my $proc5 = Wx::Perl::ProcessStream::Process-&gt;new(\@args, 'MyName2', $self);

           sub evt_process_stdout {
               my ($self, $event) = @_;
               $event-&gt;<a href="../man1/Skip.1.html">Skip</a>(1);
               my $process = $event-&gt;GetProcess;
               my $line = $event-&gt;GetLine;

               if($line eq 'something we are waiting for') {
                   $process-&gt;WriteProcess('a message to stdin');

                   $process-&gt;CloseInput() if($finishedwriting);
               }
               ............
               # To Clear Buffer
               my @buffers = @{ $process-&gt;GetStdOutBuffer };

           }

           sub evt_process_stderr {
               my ($self, $event) = @_;
               $event-&gt;<a href="../man1/Skip.1.html">Skip</a>(1);
               my $process = $event-&gt;GetProcess;
               my $line = $event-&gt;GetLine;
               print STDERR qq($line\n);
               # To Clear Buffer
               my @errors = @{ $process-&gt;GetStdErrBuffer };
           }

           sub evt_process_exit {
               my ($self, $event) = @_;
               $event-&gt;<a href="../man1/Skip.1.html">Skip</a>(1);
               my $process = $event-&gt;GetProcess;
               my $line = $event-&gt;GetLine;
               my @buffers = @{ $process-&gt;GetStdOutBuffer };
               my @errors = @{ $process-&gt;GetStdErrBuffer };
               my $exitcode = $process-&gt;GetExitCode;
               ............
               $process-&gt;Destroy;
           }

           sub evt_process_maxlines {
               my ($self, $event) = @_;
               my $process = $event-&gt;GetProcess;

               ..... bad process

               $process-&gt;Kill;
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides the STDOUT, STDERR and exit codes of asynchronously running processes via events.
       It may be used for long running or blocking processes that provide periodic updates on state via STDOUT.
       Simple IPC is possible via STDIN.

       Do not use this module simply to collect the output of another process. For that, it is much simpler to
       do:

           my ($status, $output) = Wx::ExecuteStdout( 'perl -e"print qq($_\n) for(@INC);"' );

   <b>Wx::Perl::ProcessStream::Process</b>
       <u>Methods</u>

       new         Create  a  new  Wx::Perl::ProcessStream::Process  object. You must then use the Run method to
                   execute your command.

                       my $process = Wx::Perl::ProcessStream::Process-&gt;new($command, $name, $eventhandler, $readmethod);

                       $command      = command text (and parameters) you wish to run. You may also pass a
                                       reference to an array containing the command and parameters.
                       $name         = an arbitray name for the process.
                       $eventhandler = the Wx EventHandler (Wx:Window) that will handle events for this process.
                       $readmethod   = 'read' or 'readline' (default = 'readline') an optional param. From Wx version
                                       0.75 you can specify the method you wish to use to read the output of an
                                       external process.
                                       The default depends on your Wx version ( 'getc' &lt; 0.75,'readline' &gt;= 0.75)
                                       read       -- uses the Wx::InputStream-&gt;READ method to read bytes.
                                       readline   -- uses the Wx::InputStream-&gt;READLINE method to read bytes
                                       getc       -- alias for read (getc not actually used)

       SetMaxLines Set the maximum number of lines that will be read from a continuous stream before  raising  a
                   EVT_WXP_PROCESS_STREAM_MAXLINES  event.  The  default is 1000. A continuous stream will cause
                   your application to hang.

                       $process-&gt;<a href="../man10/SetMaxLines.10.html">SetMaxLines</a>(10);

       Run         Run the process with the parameters passed to new. On success,  returns  the  process  object
                   itself.   This  allows you to do: my $process = Wx::Perl::ProcessStream-&gt;new($command, $name,
                   $self)-&gt;Run; Returns undef if the process could not be started.

                       my $process = Wx::Perl::ProcessStream::Process-&gt;new($command, $name, $eventhandler, $readmethod);
                       $process-&gt;Run;

       CloseInput  Close the STDIN stream of the external process. (Some processes may not close until STDIN  is
                   closed.)

                       $process-&gt;CloseInput();

       GetAppCloseAction
                   Returns  the  current process signal that will used on application exit. Either wxpSIGTERM or
                   wxpSIGKILL.  See SetAppCloseAction.

                       my $action = $process-&gt;GetAppCloseAction();

       GetExitCode Returns the process exit code. It is undefined until a wxpEVT_PROCESS_STREAM_EXIT  event  has
                   been received.

                       my $exitcode = $process-&gt;GetExitCode();

       GetProcessName
                   Returns the process name as passed to the OpenProcess constructor.

                       my $processname = $process-&gt;GetProcessName();

       GetStdErrBuffer
                   This  returns a reference to an array containing all the lines sent by the process to stderr.
                   Calling this clears the process object internal stderr buffer.  (This has no  effect  on  the
                   actual process I/O buffers.)

                       my $arryref = $process-&gt;GetStdErrBuffer();

       GetStdOutBuffer
                   This  returns a reference to an array containing all the lines sent by the process to stdout.
                   Calling this clears the process object internal stdout buffer.  (This has no  effect  on  the
                   actual process I/O buffers.)

                       my $arryref = $process-&gt;GetStdOutBuffer();

       GetStdErrBufferLineCount
                   This returns the number of lines currently in the stderr buffer.

                       my $count = $process-&gt;GetStdErrBufferLineCount();

       GetStdOutBufferLineCount
                   This returns the number of lines currently in the stdout buffer.

                       my $count = $process-&gt;GetStdOutBufferLineCount();

       PeekStdErrBuffer
                   This  returns a reference to an array containing all the lines sent by the process to stderr.
                   To retrieve the buffer and clear it, call GetStdErrBuffer instead.

                       my $arryref = $process-&gt;PeekStdErrBuffer();

       PeekStdOutBuffer
                   This returns a reference to an array containing all the lines sent by the process to  stdout.
                   To retrieve the buffer and clear it, call GetStdOutBuffer instead.

                       my $arryref = $process-&gt;PeekStdOutBuffer();

       GetProcessId
                   Returns the process id assigned by the system.

                       my $processid = $process-&gt;GetProcessId();

       GetPid      Returns the process id assigned by the system.

                       my $processid = $process-&gt;GetPid();

       IsAlive     Check  if  the process still exists in the system.  Returns 1 if process exists, 0 if process
                   does not exist. If the process has already signalled its exit, the IsAlive method will always
                   return 0. Therefore IsAlive should always return 0 (false) once a EVT_WXP_PROCESS_STREAM_EXIT
                   event has been sent.

                       my $isalive = $process-&gt;IsAlive();

       KillProcess Send a SIGKILL signal to the external process.

                       $process-&gt;KillProcess();

       SetAppCloseAction
                   When your application exits, any remaining Wx::Perl::ProcessStream::Process objects  will  be
                   signaled to close.  The default signal is wxpSIGTERM but you can change this to wxpSIGKILL if
                   you are sure this is what you want.

                       $process-&gt;SetAppCloseAction( $newaction );

                       $newaction = one of wxpSIGTERM, wxpSIGKILL

       TerminateProcess
                   Send a SIGTERM signal to the external process.

                       $process-&gt;TerminateProcess();

       WriteProcess
                   Write to the STDIN of process.

                       $process-&gt;WriteProcess( $writedata . "\n" );

                       $writedata = The data you wish to write. Remember to add any appropriate line endings your external process may expect.

   <b>Wx::Perl::ProcessStream</b>
       <u>Methods</u>

       OpenProcess Run  an  external  process. DEPRECATED - use Wx::Perl::ProcessStream::Process-&gt;<b>new()</b>-&gt;Run; If
                   the process is launched successfully, returns a Wx::Perl::ProcessStream::Process object.   If
                   the process could not be launched, returns undef;

                       my $process = Wx::Perl::ProcessStream-&gt;OpenProcess($command, $name, $eventhandler, $readmethod);

                       $command      = command text (and parameters) you wish to run. You may also pass a
                                       reference to an array containing the command and parameters.
                       $name         = an arbitray name for the process.
                       $eventhandler = the Wx object that will handle events for this process.
                       $process      = Wx::Perl::ProcessStream::Process object
                       $readmethod   = 'getc' or 'readline' (default = 'readline') an optional param. From Wx version
                                       0.75 you can specifiy the method you wish to use to read the output of an
                                       external process. The default depends on your Wx version ( 'getc' &lt; 0.75,
                                       'readline' &gt;= 0.75)
                                       'getc' uses the Wx::InputStream-&gt;GetC method to read bytes.
                                       'readline', uses the wxPerl implementation of Wx::InputStream-&gt;READLINE.

                   If  the  process could not be started then zero is returned.  You should destroy each process
                   after it has completed. You can do this after receiving the exit event.

       GetDefaultAppCloseAction
                   Returns the default on application close action that will be given to  new  processes.   When
                   your  application  exits,  any  remaining  Wx::Perl::ProcessStream::Process  objects  will be
                   signalled to close.  The default signal is wxpSIGTERM but you can change this  to  wxpSIGKILL
                   if  you  are  sure  this is what you want.  Whenever a mew process is opened, it is given the
                   application close  action  returned  by  GetDefaultAppCloseAction.   You  can  also  set  the
                   application close action at an individual process level.

                       my $def-action = Wx::Perl::ProcessStream-&gt;SetDefaultAppCloseAction();

                       $def-action will be one of wxpSIGTERM or wxpSIGKILL; (default wxpSIGTERM)

       SetDefaultAppCloseAction
                   Sets  the  default  on  application  close  action  that will be given to new processes.  See
                   GetDefaultAppCloseAction.

                       Wx::Perl::ProcessStream-&gt;SetDefaultAppCloseAction( $newdefaction );

                       $newdefaction = one of wxpSIGTERM or wxpSIGKILL

       SetDefaultMaxLines
                   Sets the default maximum number  of  lines  that  will  be  processed  continuously  from  an
                   individual process. If a process produces a continuous stream of output, this would hang your
                   application.  This  setting  provides  a  maximum  number of lines that will be read from the
                   process streams before control is yielded and the events can be processed.   Additionally,  a
                   EVT_WXP_PROCESS_STREAM_MAXLINES event will be sent to the eventhandler.  The setting can also
                   be set on an individual process basis using $process-&gt;SetMaxLines

                       Wx::Perl::ProcessStream-&gt;SetDefaultMaxLines( $maxlines );

                       the default maxlines number is 1000

       GetPollInterval
                   Get the current polling interval. See SetPollInterval.

                       $milliseconds = Wx::Perl::ProcessStream-&gt;GetPollInterval();

       SetPollInterval
                   When  all  buffers  are  empty  but there are still running external process, the module will
                   pause before polling the processes again for output.  By default, the module  waits  for  500
                   milliseconds.  You can set the value of this polling intrval with this method.  Internally, a
                   Wx::Timer object is used to handle polling and the value you set here is passed  directly  to
                   that.  The precision of the intervals is OS dependent.

                       Wx::Perl::ProcessStream-&gt;SetPollInterval( $milliseconds );

                       $milliseconds = number of milliseconds to wait when no buffer activity

   <b>Wx::Perl::ProcessStream::ProcessEvent</b>
       A  Wx::Perl::ProcessStream::ProcessEvent  is  sent  whenever an external process started with OpenProcess
       writes to STDOUT, STDERR or when the process exits.

       <u>Event</u> <u>Connectors</u>

       EVT_WXP_PROCESS_STREAM_STDOUT
                   Install an event handler for  an  event  of  type  wxpEVT_PROCESS_STREAM_STDOUT  exported  on
                   request     by     this     module.      The     event     subroutine    will    receive    a
                   Wx::Perl::ProcessStream::ProcessEvent for every  line  written  to  STDOUT  by  the  external
                   process.

                       EVT_WXP_PROCESS_STREAM_STDOUT( $eventhandler, $codref );

       EVT_WXP_PROCESS_STREAM_STDERR
                   Install  an  event  handler  for  an  event  of type wxpEVT_PROCESS_STREAM_STDERR exported on
                   request    by    this    module.      The     event     subroutine     will     receive     a
                   Wx::Perl::ProcessStream::ProcessEvent  for  every  line  written  to  STDERR  by the external
                   process.

                       EVT_WXP_PROCESS_STREAM_STDERR( $eventhandler, $codref );

       EVT_WXP_PROCESS_STREAM_EXIT
                   Install an event handler for an event of type wxpEVT_PROCESS_STREAM_EXIT exported on  request
                   by  this  module.   The event subroutine will receive a Wx::Perl::ProcessStream::ProcessEvent
                   when the external process exits.

                       EVT_WXP_PROCESS_STREAM_EXIT( $eventhandler, $codref );

       EVT_WXP_PROCESS_STREAM_MAXLINES
                   Install an event handler for an event  of  type  wxpEVT_PROCESS_STREAM_MAXLINES  exported  on
                   request     by     this     module.      The     event     subroutine    will    receive    a
                   Wx::Perl::ProcessStream::ProcessEvent when the external process produces a continuous  stream
                   of  lines  on  stderr  and  stdout that exceed the max lines set via $process-&gt;SetMaxLines or
                   Wx::Perl::ProcessStream-&gt;SetDefaultMaxLines.

                       EVT_WXP_PROCESS_STREAM_MAXLINES( $eventhandler, $codref );

       <u>Methods</u>

       GetLine     For events of type wxpEVT_PROCESS_STREAM_STDOUT and  wxpEVT_PROCESS_STREAM_STDERR  this  will
                   return the line written by the process.

       GetProcess  This returns the process that raised the event. If this is a wxpEVT_PROCESS_STREAM_EXIT event
                   you should destroy the process with $process-&gt;Destroy;

</pre><h4><b>COPYRIGHT</b> <b>&amp;</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2007-2010 Mark Dootson, all rights reserved.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
       Thanks to Johan Vromans for testing and suggesting a better interface.

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Dootson, "&lt;mdootson at cpan.org&gt;"

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The distribution includes examples in the 'example' folder.  From the source root, run

           perl -Ilib example/psexample.pl

       You can enter commands, execute them and view results.

       You may also wish to consult the wxWidgets manuals for:

       Wx::Process

       Wx::Execute

       Wx::ExecuteArgs

       Wx::ExecuteCommand

       Wx::ExecuteStdout

       Wx::ExecuteStdoutStderr

perl v5.36.0                                       2023-03-08                       <u>Wx::Perl::<a href="../man3pm/ProcessStream.3pm.html">ProcessStream</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>