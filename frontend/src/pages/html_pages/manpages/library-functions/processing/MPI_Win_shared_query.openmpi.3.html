<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C Syntax</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openmpi-doc">openmpi-doc_5.0.7-1build1_all</a> <br><br><pre>
</pre><h4><b>SYNTAX</b></h4><pre>
   <b>C</b> <b>Syntax</b>
          #include &lt;mpi.h&gt;

          int MPI_Win_shared_query (MPI_Win win, int rank, MPI_Aint *size,
                                    int *disp_unit, void *baseptr)

   <b>Fortran</b> <b>Syntax</b>
          USE MPI
          ! or the older form: INCLUDE 'mpif.h'
          MPI_WIN_SHARED_QUERY(WIN, RANK, SIZE, DISP_UNIT, BASEPTR, IERROR)
                  INTEGER WIN, RANK, DISP_UNIT, IERROR
                  INTEGER(KIND=MPI_ADDRESS_KIND) SIZE, BASEPTR

   <b>Fortran</b> <b>2008</b> <b>Syntax</b>
          USE mpi_f08
          MPI_Win_shared_query(win, rank, size, disp_unit, baseptr, ierror)
               USE, INTRINSIC :: ISO_C_BINDING, ONLY : C_PTR
               TYPE(MPI_Win), INTENT(IN) :: win
               INTEGER, INTENT(IN) :: rank
               INTEGER(KIND=MPI_ADDRESS_KIND), INTENT(OUT) :: size
               INTEGER, INTENT(OUT) :: disp_unit
               TYPE(C_PTR), INTENT(OUT) :: baseptr
               INTEGER, OPTIONAL, INTENT(OUT) :: ierror

</pre><h4><b>INPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>win</b>: Shared memory window object (handle).

       • <b>rank</b>: Rank in the group of window <u>win</u> (non-negative integer) or <b>MPI_PROC_NULL</b>.

</pre><h4><b>OUTPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>size</b>: Size of the window segment (non-negative integer).

       • <b>disp_unit</b>: Local unit size for displacements, in bytes (positive integer).

       • <b>baseptr</b>: Address for load/store access to window segment (choice).

       • <b>ierror</b>: Fortran only: Error status (integer).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>MPI_Win_shared_query</u>   queries  the  process-local  address  for  remote  memory  segments  created  with
       <u>MPI_Win_allocate_shared</u>. This function can return different process-local addresses for the same physical
       memory on different processes. The returned memory can be used for load/store  accesses  subject  to  the
       constraints  defined  in  MPI-3.1  section  11.7. This function can only be called with windows of flavor
       MPI_WIN_FLAVOR_SHARED.  If  the  passed  window  is  not  of  flavor  MPI_WIN_FLAVOR_SHARED,  the   error
       MPI_ERR_RMA_FLAVOR  is  raised. When rank is <b>MPI_PROC_NULL</b>, the <u>pointer</u>, <u>disp_unit</u>, and <u>size</u> returned are
       the pointer, disp_unit, and size of the memory segment belonging the lowest rank that specified <u>size</u> &gt; 0.
       If all processes in the group attached to the window specified <u>size</u> = 0, then the call returns <u>size</u>  =  0
       and a <u>baseptr</u> as if <u>MPI_Alloc_mem</u> was called with <u>size</u> = 0.

</pre><h4><b>C</b> <b>NOTES</b></h4><pre>
       The  parameter  <u>baseptr</u>  is  of  type  <b>void</b> <b>*</b> to allow passing any pointer object for this parameter. The
       provided argument should be a pointer to a pointer of arbitrary type (e.g. <b>void</b> <b>**</b>).

</pre><h4><b>ERRORS</b></h4><pre>
       Almost all MPI routines return an error value; C routines as  the  return  result  of  the  function  and
       Fortran routines in the last argument.

       Before  the  error  value  is  returned,  the current MPI error handler associated with the communication
       object (e.g., communicator, window, file) is called.  If no communication object is associated  with  the
       MPI  call,  then  the call is considered attached to MPI_COMM_SELF and will call the associated MPI error
       handler.  When  MPI_COMM_SELF  is  not  initialized   (i.e.,   before   <u>MPI_Init</u>/<u>MPI_Init_thread</u>,   after
       <u>MPI_Finalize</u>,  or  when using the Sessions Model exclusively) the error raises the initial error handler.
       The initial error handler can be changed by calling <u>MPI_Comm_set_errhandler</u> on MPI_COMM_SELF  when  using
       the  World  model,  or the mpi_initial_errhandler CLI argument to mpiexec or info key to <u>MPI_Comm_spawn</u>/‐
       <u>MPI_Comm_spawn_multiple</u>.  If no other appropriate error handler has been set, then the  MPI_ERRORS_RETURN
       error  handler  is  called for MPI I/O functions and the MPI_ERRORS_ABORT error handler is called for all
       other MPI functions.

       Open MPI includes three predefined error handlers that can be used:

       • <b>MPI_ERRORS_ARE_FATAL</b> Causes the program to abort all connected MPI processes.

       • <b>MPI_ERRORS_ABORT</b> An error handler that can be invoked on a communicator, window, file, or session. When
         called on a communicator, it acts as if <u>MPI_Abort</u> was called on  that  communicator.  If  called  on  a
         window  or file, acts as if <u>MPI_Abort</u> was called on a communicator containing the group of processes in
         the corresponding window or file. If called on a session, aborts only the local process.

       • <b>MPI_ERRORS_RETURN</b> Returns an error code to the application.

       MPI applications can also implement their own error handlers by calling:

       • <u>MPI_Comm_create_errhandler</u> then <u>MPI_Comm_set_errhandler</u>

       • <u>MPI_File_create_errhandler</u> then <u>MPI_File_set_errhandler</u>

       • <u>MPI_Session_create_errhandler</u> then <u>MPI_Session_set_errhandler</u> or at <u>MPI_Session_init</u>

       • <u>MPI_Win_create_errhandler</u> then <u>MPI_Win_set_errhandler</u>

       Note that MPI does not guarantee that an MPI program can continue past an error.

       See the <u>MPI</u> <u>man</u> <u>page</u> for a full list of <u>MPI</u> <u>error</u> <u>codes</u>.

       See the Error Handling section of the MPI-3.1 standard for more information.

       <b>SEE</b> <b>ALSO:</b>

          • <u>MPI_Alloc_mem</u>

          • <u>MPI_Win_allocate_shared</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2025, The Open MPI Community

                                                  Jun 07, 2025                           <u><a href="../man3/MPI_WIN_SHARED_QUERY.3.html">MPI_WIN_SHARED_QUERY</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>