<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openmpi-doc">openmpi-doc_5.0.7-1build1_all</a> <br><br><pre>
<b>OMPI_Affinity_str</b> - Obtain prettyprint strings of processor affinity information for this process

</pre><h4><b>SYNTAX</b></h4><pre>
   <b>C</b> <b>Syntax</b>
          #include &lt;mpi.h&gt;
          #include &lt;mpi-ext.h&gt;

          int OMPI_Affinity_str(ompi_affinity_fmt_type_t fmt_type,
                                char ompi_bound[OMPI_AFFINITY_STRING_MAX],
                                char current_binding[OMPI_AFFINITY_STRING_MAX],
                                char exists[OMPI_AFFINITY_STRING_MAX])

   <b>Fortran</b> <b>Syntax</b>
       There is no Fortran binding for this function.

   <b>Fortran</b> <b>2008</b> <b>Syntax</b>
       There is no Fortran 2008 binding for this function.

   <b>C++</b> <b>Syntax</b>
       There is no C++ binding for this function.

</pre><h4><b>INPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>fmt_type</b>:  An  enum  indicating  how  to  format  the  returned ompi_bound and current_binding strings.
         OMPI_AFFINITY_RSRC_STRING_FMT returns the string as human-readable resource names, such as  “socket  0,
         core 0”.

       • <b>OMPI_AFFINITY_LAYOUT_FMT</b>  <b>returns</b>  <b>ASCII</b>  <b>art</b> <b>representing</b> <b>where</b> <b>this</b> <b>MPI</b>: process is bound relative to
         the machine resource layout. For example “[. B][. .]” shows the process  that  called  the  routine  is
         bound to socket 0, core 1 in a system with 2 sockets, each containing 2 cores.

       • <b>See</b> <b>below</b> <b>for</b> <b>more</b> <b>output</b> <b>examples.</b>:

</pre><h4><b>OUTPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>ompi_bound</b>:  A  prettyprint  string  describing  what processor(s) Open MPI bound this process to, or a
         string indicating that Open MPI did not bind this process.

       • <b>current_binding</b>: A prettyprint string describing what processor(s) this process is currently bound  to,
         or  a  string  indicating  that  the  process  is  bound  to all available processors (and is therefore
         considered “unbound”).

       • <b>exists</b>: A prettyprint string describing the available sockets and sockets on this host.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Open MPI may bind a process to specific sockets and/or cores at process launch  time.  This  non-standard
       Open MPI function call returns prettyprint information about three things:

       <b>Where</b> <b>Open</b> <b>MPI</b> <b>bound</b> <b>this</b> <b>process.</b>
              The  string returned in <b>ompi_bound</b> will either indicate that Open MPI did not bind this process to
              anything, or it will contain a prettyprint description of the processor(s) to which Open MPI bound
              this process.

       <b>Where</b> <b>this</b> <b>process</b> <b>is</b> <b>currently</b> <b>bound.</b>
              Regardless of whether Open MPI bound this process or not, another entity may have  bound  it.  The
              string  returned  in  <b>current_binding</b>  will  indicate what the <u>current</u> binding is of this process,
              regardless of what Open MPI may have done earlier. The string returned will either  indicate  that
              the process is unbound (meaning that it is bound to all available processors) or it will contain a
              prettyprint description of the sockets and cores to which the process is currently bound.

       <b>What</b> <b>processors</b> <b>exist.</b>
              As  a  convenience  to  the  user, the <b>exists</b> string will contain a prettyprint description of the
              sockets and cores that this process can see (which is <u>usually</u> all processors in the system).

   <b>EXAMPLES</b>
       <b>Example</b> <b>1:</b> Print out processes binding using resource string format.

          int rank;
          char ompi_bound[OMPI_AFFINITY_STRING_MAX];
          char current_binding[OMPI_AFFINITY_STRING_MAX];
          char exists[OMPI_AFFINITY_STRING_MAX];

          MPI_Init(&amp;argc, &amp;argv);
          MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);

          OMPI_Affinity_str(OMPI_AFFINITY_RSRC_STRING_FMT,
                            ompi_bound, current_binding, exists);
          printf("rank %d: \n"
                 "       ompi_bound: %s\n"
                 "  current_binding: %s\n"
                 "           exists: %s\n",
                 rank, ompi_bound, current_binding, exists);
          ...

       Output of <b>mpirun</b> <b>-n</b> <b>2</b> <b>-bind-to-core</b> <b>a.out</b>:

          rank 0:
                 ompi_bound: socket 0[core 0]
            current_binding: socket 0[core 0]
                     exists: socket 0 has 4 cores
          rank 1:
                 ompi_bound: socket 0[core 1]
            current_binding: socket 0[core 1]
                     exists: socket 0 has 4 cores

       Output of <b>mpirun</b> <b>-n</b> <b>2</b> <b>-bind-to-socket</b> <b>a.out</b>:

          rank 0:
                 ompi_bound: socket 0[core 0-3]
            current_binding: Not bound (or bound to all available processors)
                     exists: socket 0 has 4 cores
          rank 1:
                 ompi_bound: socket 0[core 0-3]
            current_binding: Not bound (or bound to all available processors)
                     exists: socket 0 has 4 cores

       <b>Example</b> <b>2:</b> Print out processes binding using layout string format.

          int rank;
          char ompi_bound[OMPI_AFFINITY_STRING_MAX];
          char current_binding[OMPI_AFFINITY_STRING_MAX];
          char exists[OMPI_AFFINITY_STRING_MAX];

          MPI_Init(&amp;argc, &amp;argv);
          MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);

          OMPI_Affinity_str(OMPI_AFFINITY_LAYOUT_FMT,
                            ompi_bound, current_binding, exists);
          printf("rank %d: \n"
                 "       ompi_bound: %s\n"
                 "  current_binding: %s\n"
                 "           exists: %s\n",
                 rank, ompi_bound, current_binding, exists);
          ...

       Output of <b>mpirun</b> <b>-n</b> <b>2</b> <b>-bind-to-core</b> <b>a.out</b>:

          rank 0:
                 ompi_bound: [B . . .]
            current_binding: [B . . .]
                     exists: [. . . .]
          rank 1:
                 ompi_bound: [. B . .]
            current_binding: [. B . .]
                     exists: [. . . .]

       Output of <b>mpirun</b> <b>-n</b> <b>2</b> <b>-bind-to-socket</b> <b>a.out</b>:

          rank 0:
                 ompi_bound: [B B B B]
            current_binding: [B B B B]
                     exists: [. . . .]
          rank 1:
                 ompi_bound: [B B B B]
            current_binding: [B B B B]
                     exists: [. . . .]

       <b>SEE</b> <b>ALSO:</b>
          <u><a href="../man1/mpirun.1.html">mpirun</a>(1)</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2025, The Open MPI Community

                                                  Jun 07, 2025                              <u><a href="../man3/OMPI_AFFINITY_STR.3.html">OMPI_AFFINITY_STR</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>