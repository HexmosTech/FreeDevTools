<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C Syntax</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openmpi-doc">openmpi-doc_5.0.7-1build1_all</a> <br><br><pre>
</pre><h4><b>SYNTAX</b></h4><pre>
   <b>C</b> <b>Syntax</b>
          #include &lt;mpi.h&gt;

          int MPI_Comm_spawn(const char *command, char *argv[], int maxprocs,
               MPI_Info info, int root, MPI_Comm comm,
               MPI_Comm *intercomm, int array_of_errcodes[])

   <b>Fortran</b> <b>Syntax</b>
          USE MPI
          ! or the older form: INCLUDE 'mpif.h'
          MPI_COMM_SPAWN(COMMAND, ARGV, MAXPROCS, INFO, ROOT, COMM,
               INTERCOMM, ARRAY_OF_ERRCODES, IERROR)

               CHARACTER*(*) COMMAND, ARGV(*)
               INTEGER INFO, MAXPROCS, ROOT, COMM, INTERCOMM,
               ARRAY_OF_ERRCODES(*), IERROR

   <b>Fortran</b> <b>2008</b> <b>Syntax</b>
          USE mpi_f08
          MPI_Comm_spawn(command, argv, maxprocs, info, root, comm, intercomm,
                       array_of_errcodes, ierror)
               CHARACTER(LEN=*), INTENT(IN) :: command, argv(*)
               INTEGER, INTENT(IN) :: maxprocs, root
               TYPE(MPI_Info), INTENT(IN) :: info
               TYPE(MPI_Comm), INTENT(IN) :: comm
               TYPE(MPI_Comm), INTENT(OUT) :: intercomm
               INTEGER :: array_of_errcodes(*)
               INTEGER, OPTIONAL, INTENT(OUT) :: ierror

</pre><h4><b>INPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>command</b>: Name of program to be spawned (string, significant only at <u>root</u>).

       • <b>argv</b>: Arguments to <u>command</u> (array of strings, significant only at <u>root</u>).

       • <b>maxprocs</b>: Maximum number of processes to start (integer, significant only at <u>root</u>).

       • <b>info</b>: A set of key-value pairs telling the runtime system where and how to start the processes (handle,
         significant only at <u>root</u>).

       • <b>root</b>: Rank of process in which previous arguments are examined (integer).

       • <b>comm</b>: Intracommunicator containing group of spawning processes (handle).

</pre><h4><b>OUTPUT</b> <b>PARAMETER</b></h4><pre>
       • <b>intercomm</b>: Intercommunicator between original group and the newly spawned group (handle).

       • <b>array_of_errcodes</b>: One code per process (array of integers).

       • <b>ierror</b>: Fortran only: Error status (integer).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>MPI_Comm_spawn</u>  tries  to  start  <u>maxprocs</u>  identical  copies  of  the  MPI program specified by <u>command</u>,
       establishing communication with them and  returning  an  intercommunicator.  The  spawned  processes  are
       referred  to  as children. The children have their own MPI_COMM_WORLD, which is separate from that of the
       parents. <u>MPI_Comm_spawn</u> is collective over <u>comm</u>, and also may not return until <u>MPI_Init</u> has  been  called
       in  the  children.   Similarly,  <u>MPI_Init</u>  in  the  children may not return until all parents have called
       <u>MPI_Comm_spawn</u>. In this sense, <u>MPI_Comm_spawn</u> in  the  parents  and  <u>MPI_Init</u>  in  the  children  form  a
       collective  operation  over  the  union  of parent and child processes. The intercommunicator returned by
       <u>MPI_Comm_spawn</u> contains the parent processes in the local group and the child  processes  in  the  remote
       group. The ordering of processes in the local and remote groups is the same as the as the ordering of the
       group   of  the  <u>comm</u>  in  the  parents  and  of  MPI_COMM_WORLD  of  the  children,  respectively.  This
       intercommunicator can be obtained in the children through the function <u>MPI_Comm_get_parent</u>.

       The MPI standard allows an implementation to use the MPI_UNIVERSE_SIZE  attribute  of  MPI_COMM_WORLD  to
       specify the number of processes that will be active in a program. Although this implementation of the MPI
       standard  defines  MPI_UNIVERSE_SIZE, it does not allow the user to set its value.  If you try to set the
       value of MPI_UNIVERSE_SIZE, you will get an error message.

       The <u>command</u> Argument

       The <u>command</u> argument is a string containing  the  name  of  a  program  to  be  spawned.  The  string  is
       null-terminated  in C. In Fortran, leading and trailing spaces are stripped. MPI looks for the file first
       in the working directory of the spawning process.

       The <u>argv</u> Argument

       <u>argv</u> is an array of strings containing arguments that are passed to the program.  The  first  element  of
       <u>argv</u>  is  the  first  argument  passed  to <u>command</u>, not, as is conventional in some contexts, the command
       itself.  The argument list is terminated by NULL in C and an empty string in Fortran (note that it is the
       MPI application’s responsibility to ensure that the last entry of the <u>argv</u> array is an empty string;  the
       compiler  will not automatically insert it). In Fortran, leading and trailing spaces are always stripped,
       so that a string consisting of all spaces is considered an empty string. The constant  MPI_ARGV_NULL  may
       be used in C and Fortran to indicate an empty argument list. In C, this constant is the same as NULL.

       In  C, the <u>MPI_Comm_spawn</u> argument <u>argv</u> differs from the <u>argv</u> argument of <u>main</u> in two respects. First, it
       is shifted by one element.  Specifically, <u>argv</u>[0] of <u>main</u> contains the name  of  the  program  (given  by
       <u>command</u>).  <u>argv</u>[1]  of  <u>main</u>  corresponds  to  <u>argv</u>[0]  in  <u>MPI_Comm_spawn</u>, <u>argv</u>[2] of <u>main</u> to <u>argv</u>[1] of
       <u>MPI_Comm_spawn</u>, and so on. Second, <u>argv</u> of <u>MPI_Comm_spawn</u> must be null-terminated, so that its length can
       be determined. Passing an <u>argv</u> of MPI_ARGV_NULL to <u>MPI_Comm_spawn</u> results in <u>main</u> receiving <u>argc</u> of 1 and
       an <u>argv</u> whose element 0 is the name of the program.

       The <u>maxprocs</u> Argument

       Open MPI tries to spawn <u>maxprocs</u> processes. If it is unable to spawn <u>maxprocs</u>  processes,  it  raises  an
       error  of  class MPI_ERR_SPAWN. If MPI is able to spawn the specified number of processes, <u>MPI_Comm_spawn</u>
       returns successfully and the number of spawned processes, <u>m</u>, is given by the size of the remote group  of
       <u>intercomm</u>.

       A  spawn  call  with  the  default  behavior  is  called hard. A spawn call for which fewer than <u>maxprocs</u>
       processes may be returned is called soft.

       The <u>info</u> Argument

       The <u>info</u> argument is an opaque handle of type MPI_Info in C and INTEGER in Fortran. It is a container for
       a number of user-specified (<u>key,value</u>) pairs. <u>key</u> and <u>value</u> are strings (null-terminated  <b>char</b>  <b>*</b>  in  C,
       <b>character*(*)</b>  in  Fortran). Routines to create and manipulate the <u>info</u> argument are described in Section
       4.10 of the MPI-2 standard.

       For the SPAWN calls, <u>info</u> provides additional,  implementation-dependent  instructions  to  MPI  and  the
       runtime system on how to start processes. An application may pass MPI_INFO_NULL in C or Fortran. Portable
       programs not requiring detailed control over process locations should use MPI_INFO_NULL.

       The  following  keys for <u>info</u> are recognized in Open MPI. (The reserved values mentioned in Section 5.3.4
       of the MPI-2 standard are not implemented.)

          Key                    Type     Description
          ---                    ----     -----------

          host                   char *   Host on which the process should be
                                          spawned.  See the orte_host man
                                          page for an explanation of how this
                                          will be used.
          hostfile               char *   Hostfile containing the hosts on which
                                          the processes are to be spawned. See
                                          the orte_hostfile man page for
                                          an explanation of how this will be
                                          used.
          add-host               char *   Add the specified host to the list of
                                          hosts known to this job and use it for
                                          the associated process. This will be
                                          used similarly to the -host option.
          add-hostfile           char *   Hostfile containing hosts to be added
                                          to the list of hosts known to this job
                                          and use it for the associated
                                          process. This will be used similarly
                                          to the -hostfile option.
          wdir                   char *   Directory where the executable is
                                          located. If files are to be
                                          pre-positioned, then this location is
                                          the desired working directory at time
                                          of execution - if not specified, then
                                          it will automatically be set to
                                          ompi_preload_files_dest_dir.
          ompi_prefix            char *   Same as the --prefix command line
                                          argument to mpirun.
          ompi_preload_binary    bool     If set to true, pre-position the
                                          specified executable onto the remote
                                          host. A destination directory must
                                          also be provided.
          ompi_preload_files     char *   A comma-separated list of files that
                                          are to be pre-positioned in addition
                                          to the executable.  Note that this
                                          option does not depend upon
                                          ompi_preload_binary - files can
                                          be moved to the target even if an
                                          executable is not moved.
          ompi_stdin_target      char *   Comma-delimited list of ranks to
                                          receive stdin when forwarded.
          ompi_non_mpi           bool     If set to true, launching a non-MPI
                                          application; the returned communicator
                                          will be MPI_COMM_NULL. Failure to set
                                          this flag when launching a non-MPI
                                          application will cause both the child
                                          and parent jobs to "hang".
          ompi_param             char *   Pass an OMPI MCA parameter to the
                                          child job.  If that parameter already
                                          exists in the environment, the value
                                          will be overwritten by the provided
                                          value.
          mapper                 char *   Mapper to be used for this job
          map_by                 char *   Mapping directive indicating how
                                          processes are to be mapped (slot,
                                          node, socket, etc.).
          rank_by                char *   Ranking directive indicating how
                                          processes are to be ranked (slot,
                                          node, socket, etc.).
          bind_to                char *   Binding directive indicating how
                                          processes are to be bound (core, slot,
                                          node, socket, etc.).
          path                   char *   List of directories to search for
                                          the executable
          npernode               char *   Number of processes to spawn on
                                          each node of the allocation
          pernode                bool     Equivalent to npernode of 1
          ppr                    char *   Spawn specified number of processes
                                          on each of the identified object type
          env                    char *   Newline-delimited list of envars to
                                          be passed to the spawned procs

       <u>bool</u> info keys are actually strings but are evaluated as follows: if the string value is a number, it  is
       converted  to  an integer and cast to a boolean (meaning that zero integers are false and non-zero values
       are true). If the string value is (case-insensitive) “yes” or “true”, the boolean is true. If the  string
       value  is  (case-insensitive)  “no”  or  “false”,  the  boolean  is  false.  All  other string values are
       unrecognized, and therefore false.

       The <u>root</u> Argument

       All arguments before the <u>root</u> argument are examined only on the process whose rank in <u>comm</u>  is  equal  to
       <u>root</u>. The value of these arguments on other processes is ignored.

       The <u>array_of_errcodes</u> Argument

       The  <u>array_of_errcodes</u>  is  an  array of length <u>maxprocs</u> in which MPI reports the status of the processes
       that MPI was requested to start. If all <u>maxprocs</u> processes were spawned, <u>array_of_errcodes</u> is  filled  in
       with  the  value MPI_SUCCESS. If anyof the processes are <u>not</u> spawned, <u>array_of_errcodes</u> is filled in with
       the value MPI_ERR_SPAWN. In C or Fortran, an application  may  pass  MPI_ERRCODES_IGNORE  if  it  is  not
       interested in the error codes.

</pre><h4><b>NOTES</b></h4><pre>
       Completion of <u>MPI_Comm_spawn</u> in the parent does not necessarily mean that <u>MPI_Init</u> has been called in the
       children (although the returned intercommunicator can be used immediately).

</pre><h4><b>ERRORS</b></h4><pre>
       Almost  all  MPI  routines  return  an  error  value; C routines as the return result of the function and
       Fortran routines in the last argument.

       Before the error value is returned, the current MPI  error  handler  associated  with  the  communication
       object  (e.g.,  communicator, window, file) is called.  If no communication object is associated with the
       MPI call, then the call is considered attached to MPI_COMM_SELF and will call the  associated  MPI  error
       handler.   When   MPI_COMM_SELF   is   not  initialized  (i.e.,  before  <u>MPI_Init</u>/<u>MPI_Init_thread</u>,  after
       <u>MPI_Finalize</u>, or when using the Sessions Model exclusively) the error raises the initial  error  handler.
       The  initial  error handler can be changed by calling <u>MPI_Comm_set_errhandler</u> on MPI_COMM_SELF when using
       the World model, or the mpi_initial_errhandler CLI argument to mpiexec or info  key  to  <u>MPI_Comm_spawn</u>/‐
       <u>MPI_Comm_spawn_multiple</u>.   If no other appropriate error handler has been set, then the MPI_ERRORS_RETURN
       error handler is called for MPI I/O functions and the MPI_ERRORS_ABORT error handler is  called  for  all
       other MPI functions.

       Open MPI includes three predefined error handlers that can be used:

       • <b>MPI_ERRORS_ARE_FATAL</b> Causes the program to abort all connected MPI processes.

       • <b>MPI_ERRORS_ABORT</b> An error handler that can be invoked on a communicator, window, file, or session. When
         called  on  a  communicator,  it  acts  as if <u>MPI_Abort</u> was called on that communicator. If called on a
         window or file, acts as if <u>MPI_Abort</u> was called on a communicator containing the group of processes  in
         the corresponding window or file. If called on a session, aborts only the local process.

       • <b>MPI_ERRORS_RETURN</b> Returns an error code to the application.

       MPI applications can also implement their own error handlers by calling:

       • <u>MPI_Comm_create_errhandler</u> then <u>MPI_Comm_set_errhandler</u>

       • <u>MPI_File_create_errhandler</u> then <u>MPI_File_set_errhandler</u>

       • <u>MPI_Session_create_errhandler</u> then <u>MPI_Session_set_errhandler</u> or at <u>MPI_Session_init</u>

       • <u>MPI_Win_create_errhandler</u> then <u>MPI_Win_set_errhandler</u>

       Note that MPI does not guarantee that an MPI program can continue past an error.

       See the <u>MPI</u> <u>man</u> <u>page</u> for a full list of <u>MPI</u> <u>error</u> <u>codes</u>.

       See the Error Handling section of the MPI-3.1 standard for more information.

       <b>SEE</b> <b>ALSO:</b>

          • <u>MPI_Comm_spawn_multiple</u>

          • <u>MPI_Comm_get_parent</u>

          • <u><a href="../man1/mpirun.1.html">mpirun</a>(1)</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2025, The Open MPI Community

                                                  Jun 07, 2025                                 <u><a href="../man3/MPI_COMM_SPAWN.3.html">MPI_COMM_SPAWN</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>