<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Specio::Coercion - A class representing a coercion from one type to another</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libspecio-perl">libspecio-perl_0.50-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Specio::Coercion - A class representing a coercion from one type to another

</pre><h4><b>VERSION</b></h4><pre>
       version 0.50

</pre><h4><b>SYNOPSIS</b></h4><pre>
           my $coercion = $type-&gt;coercion_from_type('Int');

           my $new_value = $coercion-&gt;<a href="../man42/coerce_value.42.html">coerce_value</a>(42);

           if ( $coercion-&gt;can_be_inlined() ) {
               my $code = $coercion-&gt;inline_coercion('$_[0]');
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class represents a coercion from one type to another. Internally, a coercion is a piece of code that
       takes a value of one type returns a new value of a new type. For example, a coercion from c&lt;Num&gt; to "Int"
       might round a number to its nearest integer and return that integer.

       Coercions can be implemented either as a simple subroutine reference or as an inline generator
       subroutine. Using an inline generator is faster but more complicated.

</pre><h4><b>API</b></h4><pre>
       This class provides the following methods.

   <b>Specio::Coercion-&gt;new(</b> <b>...</b> <b>)</b>
       This method creates a new coercion object. It accepts the following named parameters:

       •   from =&gt; $type

           The   type   this   coercion   is   from.   The   type   must   be   an   object   which   does   the
           Specio::Constraint::Role::Interface interface.

           This parameter is required.

       •   to =&gt; $type

           The   type   this   coercion   is   to.   The   type   must   be   an   object   which    does    the
           Specio::Constraint::Role::Interface interface.

           This parameter is required.

       •   coercion =&gt; sub { ... }

           A  subroutine  reference  implementing  the coercion. It will be called as a method on the object and
           passed a single argument, the value to coerce.

           It should return the new value.

           This parameter is mutually exclusive with "inline_generator".

           Either this parameter or the "inline_generator" parameter is required.

           You can also pass this option with the key "using" in the parameter list.

       •   inline_generator =&gt; sub { ... }

           This should be a subroutine reference which returns a string containing  a  single  term.  This  code
           should <u>not</u> end in a semicolon. This code should implement the coercion.

           The generator will be called as a method on the coercion with a single argument. That argument is the
           name of the variable being coerced, something like '$_[0]' or '$var'.

           This parameter is mutually exclusive with "coercion".

           Either this parameter or the "coercion" parameter is required.

           You can also pass this option with the key "inline" in the parameter list.

       •   inline_environment =&gt; {}

           This  should  be  a  hash reference of variable names (with sigils) and values for that variable. The
           values should be <u>references</u> to the values of the variables.

           This environment will be used when compiling  the  coercion  as  part  of  a  subroutine.  The  named
           variables will be captured as closures in the generated subroutine, using Eval::Closure.

           It  should  be  very  rare  to  need  to set this in the constructor. It's more likely that a special
           coercion subclass would need to provide values that it generates internally.

           This parameter defaults to an empty hash reference.

       •   declared_at =&gt; $declared_at

           This parameter must be a Specio::DeclaredAt object.

           This parameter is required.

   <b>$coercion-&gt;from(),</b> <b>$coercion-&gt;to(),</b> <b>$coercion-&gt;declared_at()</b>
       These methods are all read-only attribute accessors for the corresponding attribute.

   <b>$coercion-&gt;description</b>
       This returns a string describing the coercion. This includes the names of the to and from type and  where
       the  coercion  was  declared,  so  you  end  up with something like 'coercion from Foo to Bar declared in
       package My::Lib (lib/My/Lib.pm) at line 42'.

   <b>$coercion-&gt;coerce($value)</b>
       Given a value of the right "from" type, returns a new value of the "to" type.

       This method does not actually check that the types of given or return values.

   <b>$coercion-&gt;inline_coercion($var)</b>
       Given a variable name like '$_[0]' this returns a string with code for the coercion.

       Note that this method will die if the coercion does not have an inline generator.

   <b>$coercion-&gt;can_be_inlined()</b>
       This returns true if the coercion has an inline generator <u>and</u> the constraint it is from can  be  inlined.
       This  exists  primarily  for  the  benefit  of the inline_coercion_and_check() method for type constraint
       object.

   <b>$coercion-&gt;inline_environment()</b>
       This returns a hash defining the variables that need to be closed over when inlining  the  coercion.  The
       keys  are  full  variable  names  like  '$foo'  or '@bar'. The values are <u>references</u> to a variable of the
       matching type.

   <b>$coercion-&gt;clone()</b>
       Returns a clone of this object.

   <b>$coercion-&gt;clone_with_new_to($new_to_type)</b>
       This returns a clone of the coercion, replacing the "to" type with a new one.  This is intended  for  use
       when  the  to  type itself is being cloned as part of importing that type. We need to make sure the newly
       cloned coercion has the newly cloned type as well.

</pre><h4><b>ROLES</b></h4><pre>
       This class does the Specio::Role::Inlinable role.

</pre><h4><b>SUPPORT</b></h4><pre>
       Bugs may be submitted at &lt;https://github.com/houseabsolute/Specio/issues&gt;.

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Specio can be found at &lt;https://github.com/houseabsolute/Specio&gt;.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dave Rolsky &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2012 - 2025 by Dave Rolsky.

       This is free software, licensed under:

         The Artistic License 2.0 (GPL Compatible)

       The full text of the license can be found in the <u>LICENSE</u> file included with this distribution.

perl v5.40.1                                       2025-03-01                              <u>Specio::<a href="../man3pm/Coercion.3pm.html">Coercion</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>