<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>erl_eval - The Erlang meta interpreter.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       erl_eval - The Erlang meta interpreter.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides an interpreter for Erlang expressions. The expressions are in the abstract syntax as
       returned by <u>erl_parse</u>, the Erlang parser, or <u>io</u>.

</pre><h4><b>DATA</b> <b>TYPES</b></h4><pre>
       <b>bindings()</b> = [{name(), value()}]

       <b>binding_struct()</b> = orddict:orddict() | map()

              A  binding  structure. It is either a <u>map</u> or an <u>orddict</u>. <u>erl_eval</u> will always return the same type
              as the one given.

       <b>expression()</b> = erl_parse:abstract_expr()

       <b>expressions()</b> = [erl_parse:abstract_expr()]

              As returned by <u>erl_parse:parse_exprs/1</u> or <u>io:parse_erl_exprs/2</u>.

       <b>expression_list()</b> = [expression()]

       <b>func_spec()</b> =
           {Module :: module(), Function :: atom()} | function()

       <b>lfun_eval_handler()</b> =
           fun((Name :: atom(),
                Arguments :: expression_list(),
                Bindings :: binding_struct()) -&gt;
                   {value,
                    Value :: value(),
                    NewBindings :: binding_struct()})

       <b>lfun_value_handler()</b> =
           fun((Name :: atom(), Arguments :: [term()]) -&gt;
                   Value :: value())

       <b>local_function_handler()</b> =
           {value, lfun_value_handler()} |
           {eval, lfun_eval_handler()} |
           none

              Further described in section  Local Function Handler in this module

       <b>name()</b> = term()

       <b>nlfun_handler()</b> =
           fun((FuncSpec :: func_spec(), Arguments :: [term()]) -&gt; term())

       <b>non_local_function_handler()</b> = {value, nlfun_handler()} | none

              Further described in section  Non-Local Function Handler in this module.

       <b>value()</b> = term()

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>add_binding(Name,</b> <b>Value,</b> <b>BindingStruct)</b> <b>-&gt;</b> <b>binding_struct()</b>

              Types:

                 Name = name()
                 Value = value()
                 BindingStruct = binding_struct()

              Adds binding <u>Name=Value</u> to <u>BindingStruct</u>. Returns an updated binding structure.

       <b>binding(Name,</b> <b>BindingStruct)</b> <b>-&gt;</b> <b>{value,</b> <b>value()}</b> <b>|</b> <b>unbound</b>

              Types:

                 Name = name()
                 BindingStruct = binding_struct()

              Returns the binding of <u>Name</u> in <u>BindingStruct</u>.

       <b>bindings(BindingStruct</b> <b>::</b> <b>binding_struct())</b> <b>-&gt;</b> <b>bindings()</b>

              Returns the list of bindings contained in the binding structure.

       <b>del_binding(Name,</b> <b>BindingStruct)</b> <b>-&gt;</b> <b>binding_struct()</b>

              Types:

                 Name = name()
                 BindingStruct = binding_struct()

              Removes the binding of <u>Name</u> in <u>BindingStruct</u>. Returns an updated binding structure.

       <b>expr(Expression,</b> <b>Bindings)</b> <b>-&gt;</b> <b>{value,</b> <b>Value,</b> <b>NewBindings}</b>

       <b>expr(Expression,</b> <b>Bindings,</b> <b>LocalFunctionHandler)</b> <b>-&gt;</b>
               {value, Value, NewBindings}

       <b>expr(Expression,</b> <b>Bindings,</b> <b>LocalFunctionHandler,</b>
            NonLocalFunctionHandler) -&gt;
               {value, Value, NewBindings}

       <b>expr(Expression,</b> <b>Bindings,</b> <b>LocalFunctionHandler,</b>
            NonLocalFunctionHandler, ReturnFormat) -&gt;
               {value, Value, NewBindings} | Value

              Types:

                 Expression = expression()
                 Bindings = binding_struct()
                 LocalFunctionHandler = local_function_handler()
                 NonLocalFunctionHandler = non_local_function_handler()
                 ReturnFormat = none | value
                 Value = value()
                 NewBindings = binding_struct()

              Evaluates <u>Expression</u> with the set of bindings <u>Bindings</u>. <u>Expression</u> is an  expression  in  abstract
              syntax.   For   an  explanation  of  when  and  how  to  use  arguments  <u>LocalFunctionHandler</u>  and
              <u>NonLocalFunctionHandler</u>, see sections  Local Function Handler and  Non-Local Function  Handler  in
              this module.

              Returns <u>{value,</u> <u>Value,</u> <u>NewBindings}</u> by default. If <u>ReturnFormat</u> is <u>value</u>, only <u>Value</u> is returned.

       <b>expr_list(ExpressionList,</b> <b>Bindings)</b> <b>-&gt;</b> <b>{ValueList,</b> <b>NewBindings}</b>

       <b>expr_list(ExpressionList,</b> <b>Bindings,</b> <b>LocalFunctionHandler)</b> <b>-&gt;</b>
                    {ValueList, NewBindings}

       <b>expr_list(ExpressionList,</b> <b>Bindings,</b> <b>LocalFunctionHandler,</b>
                 NonLocalFunctionHandler) -&gt;
                    {ValueList, NewBindings}

              Types:

                 ExpressionList = expression_list()
                 Bindings = binding_struct()
                 LocalFunctionHandler = local_function_handler()
                 NonLocalFunctionHandler = non_local_function_handler()
                 ValueList = [value()]
                 NewBindings = binding_struct()

              Evaluates  a list of expressions in parallel, using the same initial bindings for each expression.
              Attempts are made to merge the bindings returned from each evaluation. This function is useful  in
              <u>LocalFunctionHandler</u>, see section  Local Function Handler in this module.

              Returns <u>{ValueList,</u> <u>NewBindings}</u>.

       <b>exprs(Expressions,</b> <b>Bindings)</b> <b>-&gt;</b> <b>{value,</b> <b>Value,</b> <b>NewBindings}</b>

       <b>exprs(Expressions,</b> <b>Bindings,</b> <b>LocalFunctionHandler)</b> <b>-&gt;</b>
                {value, Value, NewBindings}

       <b>exprs(Expressions,</b> <b>Bindings,</b> <b>LocalFunctionHandler,</b>
             NonLocalFunctionHandler) -&gt;
                {value, Value, NewBindings}

              Types:

                 Expressions = expressions()
                 Bindings = binding_struct()
                 LocalFunctionHandler = local_function_handler()
                 NonLocalFunctionHandler = non_local_function_handler()
                 Value = value()
                 NewBindings = binding_struct()

              Evaluates  <u>Expressions</u>  with  the  set  of  bindings  <u>Bindings</u>, where <u>Expressions</u> is a sequence of
              expressions (in abstract syntax) of a type that can be returned by  <u>io:parse_erl_exprs/2</u>.  For  an
              explanation of when and how to use arguments <u>LocalFunctionHandler</u> and <u>NonLocalFunctionHandler</u>, see
              sections  Local Function Handler and  Non-Local Function Handler in this module.

              Returns <u>{value,</u> <u>Value,</u> <u>NewBindings}</u>

       <b>new_bindings()</b> <b>-&gt;</b> <b>binding_struct()</b>

              Returns an empty binding structure.

</pre><h4><b>LOCAL</b> <b>FUNCTION</b> <b>HANDLER</b></h4><pre>
       During  evaluation  of  a  function, no calls can be made to local functions. An undefined function error
       would be generated. However, the optional argument <u>LocalFunctionHandler</u> can be used to define a  function
       that is called when there is a call to a local function. The argument can have the following formats:

         <u>{value,Func}</u>:
           This defines a local function handler that is called with:

         Func(Name, Arguments)

           <u>Name</u>  is the name of the local function (an atom) and <u>Arguments</u> is a list of the <u>evaluated</u> arguments.
           The function handler returns the value of the local function. In  this  case,  the  current  bindings
           cannot be accessed. To signal an error, the function handler calls <u>exit/1</u> with a suitable exit value.

         <u>{eval,Func}</u>:
           This defines a local function handler that is called with:

         Func(Name, Arguments, Bindings)

           <u>Name</u>  is  the name of the local function (an atom), <u>Arguments</u> is a list of the <u>unevaluated</u> arguments,
           and <u>Bindings</u> are the current variable bindings. The function handler returns:

         {value,Value,NewBindings}

           <u>Value</u> is the value of the local function and <u>NewBindings</u> are the updated variable bindings.  In  this
           case,  the  function handler must itself evaluate all the function arguments and manage the bindings.
           To signal an error, the function handler calls <u>exit/1</u> with a suitable exit value.

         <u>none</u>:
           There is no local function handler.

</pre><h4><b>NON-LOCAL</b> <b>FUNCTION</b> <b>HANDLER</b></h4><pre>
       The optional argument <u>NonLocalFunctionHandler</u> can be used to define a function  that  is  called  in  the
       following cases:

         * A functional object (fun) is called.

         * A built-in function is called.

         * A function is called using the <u>M:F</u> syntax, where <u>M</u> and <u>F</u> are atoms or expressions.

         * An operator <u>Op/A</u> is called (this is handled as a call to function <u>erlang:Op/A</u>).

       Exceptions are calls to <u>erlang:apply/2,3</u>; neither of the function handlers are called for such calls. The
       argument can have the following formats:

         <u>{value,Func}</u>:
           This defines a non-local function handler that is called with:

         Func(FuncSpec, Arguments)

           <u>FuncSpec</u>  is the name of the function on the form <u>{Module,Function}</u> or a fun, and <u>Arguments</u> is a list
           of the <u>evaluated</u> arguments. The function handler returns the value of  the  function.  To  signal  an
           error, the function handler calls <u>exit/1</u> with a suitable exit value.

         <u>none</u>:
           There is no non-local function handler.

   <b>Note:</b>
       For  calls  such as <u>erlang:apply(Fun,</u> <u>Args)</u> or <u>erlang:apply(Module,</u> <u>Function,</u> <u>Args)</u>, the call of the non-
       local function handler corresponding to the call to <u>erlang:apply/2,3</u> itself (<u>Func({erlang,</u> <u>apply},</u>  <u>[Fun,</u>
       <u>Args])</u> or <u>Func({erlang,</u> <u>apply},</u> <u>[Module,</u> <u>Function,</u> <u>Args])</u>) never takes place.

       The  non-local  function  handler  <u>is</u>  however  called  with  the  evaluated  arguments  of  the  call to
       <u>erlang:apply/2,3</u>: <u>Func(Fun,</u> <u>Args)</u> or <u>Func({Module,</u> <u>Function},</u> <u>Args)</u> (assuming that <u>{Module,</u> <u>Function}</u>  is
       not <u>{erlang,</u> <u>apply}</u>).

       Calls  to  functions  defined  by evaluating fun expressions <u>"fun</u> <u>...</u> <u>end"</u> are also hidden from non-local
       function handlers.

       The non-local function handler argument is probably not used as frequently as the local function  handler
       argument.  A possible use is to call <u>exit/1</u> on calls to functions that for some reason are not allowed to
       be called.

</pre><h4><b>KNOWN</b> <b>LIMITATION</b></h4><pre>
       Undocumented functions in this module are not to be used.

Ericsson AB                                        stdlib 3.17                                    <u><a href="../man3erl/erl_eval.3erl.html">erl_eval</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>