<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSL_CTX_set1_cert_comp_preference, SSL_set1_cert_comp_preference, SSL_CTX_compress_certs,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SSL_CTX_set1_cert_comp_preference, SSL_set1_cert_comp_preference, SSL_CTX_compress_certs,
       SSL_compress_certs, SSL_CTX_get1_compressed_cert, SSL_get1_compressed_cert, SSL_CTX_set1_compressed_cert,
       SSL_set1_compressed_cert - Certificate compression functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/ssl.h&gt;

        int SSL_CTX_set1_cert_comp_preference(SSL_CTX *ctx, int *algs, size_t len);
        int SSL_set1_cert_comp_preference(SSL *ssl, int *algs, size_t len);

        int SSL_CTX_compress_certs(SSL_CTX *ctx, int alg);
        int SSL_compress_certs(SSL *ssl, int alg);

        size_t SSL_CTX_get1_compressed_cert(SSL_CTX *ctx, int alg, unsigned char **data,
                                            size_t *orig_len);
        size_t SSL_get1_compressed_cert(SSL *ssl, int alg, unsigned char **data,
                                        size_t *orig_len);

        int SSL_CTX_set1_compressed_cert(SSL_CTX *ctx, int alg,
                                         unsigned char *comp_data,
                                         size_t comp_length, size_t orig_length);
        int SSL_set1_compressed_cert(SSL *ssl, int alg, unsigned char *comp_data,
                                     size_t comp_length, size_t orig_length);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These functions control the certificate compression feature. Certificate compression is only available
       for TLSv1.3 as defined in RFC8879.

       <b>SSL_CTX_set1_cert_comp_preference()</b> and <b>SSL_set1_cert_comp_preference()</b> are used to specify the preferred
       compression algorithms. The <b>algs</b> argument is an array of algorithms, and <b>length</b> is number of elements in
       the <b>algs</b> array. Only those algorithms enabled in the library will be accepted in <b>algs</b>, unknown algorithms
       in <b>algs</b> are ignored. On an error, the preference order is left unmodified.

       The following compression algorithms (<b>alg</b> arguments) may be used:

       •   TLSEXT_comp_cert_brotli

       •   TLSEXT_comp_cert_zlib

       •   TLSEXT_comp_cert_zstd

       The  above is also the default preference order. If a preference order is not specified, then the default
       preference order is sent to the peer  and  the  received  peer's  preference  order  will  be  used  when
       compressing a certificate.  Otherwise, the configured preference order is sent to the peer and is used to
       filter the peer's preference order.

       <b>SSL_CTX_compress_certs()</b>   and   <b>SSL_compress_certs()</b>   are  used  to  pre-compress  all  the  configured
       certificates on an SSL_CTX/SSL object with algorithm  <b>alg</b>.  If  <b>alg</b>  is  0,  then  the  certificates  are
       compressed  with  the  algorithms  specified  in the preference list. Calling these functions on a client
       SSL_CTX/SSL object will result in an error, as only server certificates may be pre-compressed.

       <b>SSL_CTX_get1_compressed_cert()</b>  and  <b>SSL_get1_compressed_cert()</b>  are  used  to  get  the   pre-compressed
       certificate  most  recently  set  that  may  be stored for later use. Calling these functions on a client
       SSL_CTX/SSL object will result in an error, as only server certificates may be pre-compressed.  The  <b>data</b>
       and <b>orig_len</b> arguments are required.

       The    compressed    certificate    data    may    be   passed   to   <b>SSL_CTX_set1_compressed_cert()</b>   or
       <b>SSL_set1_compressed_cert()</b> to provide a pre-compressed version of the most recently set certificate. This
       pre-compressed certificate can only be used by a server.

</pre><h4><b>NOTES</b></h4><pre>
       Each side of the connection sends their compression algorithm preference list to  their  peer  indicating
       compressed  certificate  support.  The  received preference list is filtered by the configured preference
       list (i.e. the intersection is saved). As the default list  includes  all  the  enabled  algorithms,  not
       specifying  a  preference  will  allow  any enabled algorithm by the peer. The filtered peer's preference
       order is used to determine what algorithm to use when sending a compressed certificate.

       Only  server  certificates  may   be   pre-compressed.   Calling   any   of   these   functions   (except
       <b>SSL_CTX_set1_cert_comp_preference()</b>/<b>SSL_set1_cert_comp_preference()</b>)  on a client SSL_CTX/SSL object will
       return an error. Client certificates are compressed on-demand as unique context data from the  server  is
       compressed along with the certificate.

       For  <b>SSL_CTX_set1_cert_comp_preference()</b> and <b>SSL_set1_cert_comp_preference()</b> the <b>len</b> argument is the size
       of the <b>algs</b> argument in bytes.

       The compressed certificate returned by <b>SSL_CTX_get1_compressed_cert()</b> and  <b>SSL_get1_compressed_cert()</b>  is
       the  last  certificate  set on the SSL_CTX/SSL object.  The certificate is copied by the function and the
       caller must free <b>*data</b> via <b>OPENSSL_free()</b>.

       The compressed certificate data set by <b>SSL_CTX_set1_compressed_cert()</b> and  <b>SSL_set1_compressed_cert()</b>  is
       copied into the SSL_CTX/SSL object.

       <b>SSL_CTX_compress_certs()</b> and <b>SSL_compress_certs()</b> return an error under the following conditions:

       •   If no certificates have been configured.

       •   If the specified algorithm <b>alg</b> is not enabled.

       •   If <b>alg</b> is 0 and no compression algorithms are enabled.

       Sending     compressed     certificates     may     be    disabled    on    a    connection    via    the
       SSL_OP_NO_TX_CERTIFICATE_COMPRESSION option. Receiving compressed  certificates  may  be  disabled  on  a
       connection via the SSL_OP_NO_RX_CERTIFICATE_COMPRESSION option.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>SSL_CTX_set1_cert_comp_preference()</b>,      <b>SSL_set1_cert_comp_preference()</b>,      <b>SSL_CTX_compress_certs()</b>,
       <b>SSL_compress_certs()</b>, <b>SSL_CTX_set1_compressed_cert()</b>, and <b>SSL_set1_compressed_cert()</b> return 1 for success
       and 0 on error.

       <b>SSL_CTX_get1_compressed_cert()</b> and <b>SSL_get1_compressed_cert()</b> return the length of the  allocated  memory
       on success and 0 on error.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/SSL_CTX_set_options.3.html">SSL_CTX_set_options</a></b>(3), <b><a href="../man3/SSL_CTX_use_certificate.3.html">SSL_CTX_use_certificate</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       These functions were added in OpenSSL 3.2.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2022 The OpenSSL Project Authors. All Rights Reserved.

       Licensed  under  the  Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain  a  copy  in  the  file  LICENSE  in  the  source  distribution  or  at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04            <u><a href="../man3SSL/SSL_CTX_SET1_CERT_COMP_PREFERENCE.3SSL.html">SSL_CTX_SET1_CERT_COMP_PREFERENCE</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>