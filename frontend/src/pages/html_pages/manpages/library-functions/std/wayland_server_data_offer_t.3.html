<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wayland::server::data_offer_t - offer to transfer data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/waylandpp-dev">waylandpp-dev_1.0.0-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wayland::server::data_offer_t - offer to transfer data

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;wayland-server-protocol.hpp&gt;

       Inherits wayland::server::resource_t.

   <b>Public</b> <b>Member</b> <b>Functions</b>
       std::function&lt; void(uint32_t, std::string)&gt; &amp; <b>on_accept</b> ()
           accept one of the offered mime types
       std::function&lt; void(std::string, int)&gt; &amp; <b>on_receive</b> ()
           request that the data is transferred
       std::function&lt; void()&gt; &amp; <b>on_destroy</b> ()
           destroy data offer
       std::function&lt; void()&gt; &amp; <b>on_finish</b> ()
           the offer will no longer be used
       std::function&lt; void(<b>data_device_manager_dnd_action</b>, <b>data_device_manager_dnd_action</b>)&gt; &amp; <b>on_set_actions</b> ()
           set the available/preferred drag-and-drop actions
       void <b>offer</b> (std::string const &amp;mime_type, bool post=true)
           advertise offered mime type
       void <b>source_actions</b> (<b>data_device_manager_dnd_action</b> const &amp;source_actions, bool post=true)
           notify the source-side available actions
       bool <b>can_source_actions</b> () const
           Check whether the <b>source_actions</b> function is available with the currently bound version of the
           protocol.
       void <b>action</b> (<b>data_device_manager_dnd_action</b> const &amp;dnd_action, bool post=true)
           notify the selected action
       bool <b>can_action</b> () const
           Check whether the <b>action</b> function is available with the currently bound version of the protocol.
       void <b>post_invalid_finish</b> (std::string const &amp;msg)
           Post error: finish request was called untimely.
       void <b>post_invalid_action_mask</b> (std::string const &amp;msg)
           Post error: action mask contains invalid values.
       void <b>post_invalid_action</b> (std::string const &amp;msg)
           Post error: action argument has an invalid value.
       void <b>post_invalid_offer</b> (std::string const &amp;msg)
           Post error: offer doesn't accept this request.
       bool <b>proxy_has_object</b> () const
           Check whether this wrapper actually wraps an object.
       void <b>post_no_memory</b> () const
       uint32_t <b>get_id</b> () const
       client_t <b>get_client</b> () const
       unsigned int <b>get_version</b> () const
       std::string <b>get_class</b> ()

   <b>Static</b> <b>Public</b> <b>Attributes</b>
       static constexpr std::uint32_t <b>offer_since_version</b> = 1
           Minimum protocol version required for the <b>offer</b> function.
       static constexpr std::uint32_t <b>source_actions_since_version</b> = 3
           Minimum protocol version required for the <b>source_actions</b> function.
       static constexpr std::uint32_t <b>action_since_version</b> = 3
           Minimum protocol version required for the <b>action</b> function.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       offer to transfer data

       A wl_data_offer represents a piece of data offered for transfer by another client (the source client). It
       is used by the copy-and-paste and drag-and-drop mechanisms. The offer describes the different mime types
       that the data can be converted to and provides the mechanism for transferring the data directly from the
       source client.

       Definition at line <b>821</b> of file <b>wayland-server-protocol.hpp</b>.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>void</b> <b>data_offer_t::action</b> <b>(data_device_manager_dnd_action</b> <b>const</b> <b>&amp;</b> <b>dnd_action,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       notify the selected action

       <b>Parameters</b>
           <u>dnd_action</u> action selected by the compositor

       This event indicates the action selected by the compositor after matching the source/destination side
       actions. Only one action (or none) will be offered here.

       This event can be emitted multiple times during the drag-and-drop operation in response to destination
       side action changes through wl_data_offer.set_actions.

       This event will no longer be emitted after wl_data_device.drop happened on the drag-and-drop destination,
       the client must honor the last action received, or the last preferred one set through
       wl_data_offer.set_actions when handling an 'ask' action.

       Compositors may also change the selected action on the fly, mainly in response to keyboard modifier
       changes during the drag-and-drop operation.

       The most recent action received is always the valid one. Prior to receiving wl_data_device.drop, the
       chosen action may change (e.g. due to keyboard modifiers being pressed). At the time of receiving
       wl_data_device.drop the drag-and-drop destination must honor the last action received.

       Action changes may still happen after wl_data_device.drop, especially on 'ask' actions, where the drag-
       and-drop destination may choose another action afterwards. Action changes happening at this stage are
       always the result of inter-client negotiation, the compositor shall no longer be able to induce a
       different action.

       Upon 'ask' actions, it is expected that the drag-and-drop destination may potentially choose a different
       action and/or mime type, based on wl_data_offer.source_actions and finally chosen by the user (e.g.
       popping up a menu with the available options). The final wl_data_offer.set_actions and
       wl_data_offer.accept requests must happen before the call to wl_data_offer.finish.

       Definition at line <b>1893</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>bool</b> <b>data_offer_t::can_action</b> <b>()</b> <b>const</b>
       Check whether the <b>action</b> function is available with the currently bound version of the protocol.

       Definition at line <b>1898</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>bool</b> <b>data_offer_t::can_source_actions</b> <b>()</b> <b>const</b>
       Check whether the <b>source_actions</b> function is available with the currently bound version of the protocol.

       Definition at line <b>1888</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::string</b> <b>wayland::server::resource_t::get_class</b> <b>()</b> <b>[inherited]</b>
       Retrieve the interface name (class) of a resource object.

       <b>Returns</b>
           Interface name of the resource object.

   <b>client_t</b> <b>wayland::server::resource_t::get_client</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the associated client

       <b>Returns</b>
           the client that owns the resource.

   <b>uint32_t</b> <b>wayland::server::resource_t::get_id</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the internal ID of the resource

       <b>Returns</b>
           the internal ID of the resource

   <b>unsigned</b> <b>int</b> <b>wayland::server::resource_t::get_version</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get interface version

       <b>Returns</b>
           Interface version this resource has been constructed with.

   <b>void</b> <b>data_offer_t::offer</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>mime_type,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       advertise offered mime type

       <b>Parameters</b>
           <u>mime_type</u> offered mime type

       Sent immediately after creating the wl_data_offer object. One event per offered mime type.

       Definition at line <b>1878</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(uint32_t,</b> <b>std::string)&gt;</b> <b>&amp;</b> <b>data_offer_t::on_accept</b> <b>()</b>
       accept one of the offered mime types

       <b>Parameters</b>
           <u>serial</u> serial number of the accept request
           <u>mime_type</u> mime type accepted by the client

       Indicate that the client can accept the given mime type, or NULL for not accepted.

       For objects of version 2 or older, this request is used by the client to give feedback whether the client
       can receive the given mime type, or NULL if none is accepted; the feedback does not determine whether the
       drag-and-drop operation succeeds or not.

       For objects of version 3 or newer, this request determines the final result of the drag-and-drop
       operation. If the end result is that no mime types were accepted, the drag-and-drop operation will be
       cancelled and the corresponding drag source will receive wl_data_source.cancelled. Clients may still use
       this event in conjunction with wl_data_source.action for feedback.

       Definition at line <b>1848</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void()&gt;</b> <b>&amp;</b> <b>data_offer_t::on_destroy</b> <b>()</b>
       destroy data offer Destroy the data offer.

       Definition at line <b>1860</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void()&gt;</b> <b>&amp;</b> <b>data_offer_t::on_finish</b> <b>()</b>
       the offer will no longer be used Notifies the compositor that the drag destination successfully finished
       the drag-and-drop operation.

       Upon receiving this request, the compositor will emit wl_data_source.dnd_finished on the drag source
       client.

       It is a client error to perform other requests than wl_data_offer.destroy after this one. It is also an
       error to perform this request after a NULL mime type has been set in wl_data_offer.accept or no action
       was received through wl_data_offer.action.

       If wl_data_offer.finish request is received for a non drag and drop operation, the invalid_finish
       protocol error is raised.

       Definition at line <b>1866</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(std::string,</b> <b>int)&gt;</b> <b>&amp;</b> <b>data_offer_t::on_receive</b> <b>()</b>
       request that the data is transferred

       <b>Parameters</b>
           <u>mime_type</u> mime type desired by receiver
           <u>fd</u> file descriptor for data transfer

       To transfer the offered data, the client issues this request and indicates the mime type it wants to
       receive. The transfer happens through the passed file descriptor (typically created with the pipe system
       call). The source client writes the data in the mime type representation requested and then closes the
       file descriptor.

       The receiving client reads from the read end of the pipe until EOF and then closes its end, at which
       point the transfer is complete.

       This request may happen multiple times for different mime types, both before and after
       wl_data_device.drop. Drag-and-drop destination clients may preemptively fetch data or examine it more
       closely to determine acceptance.

       Definition at line <b>1854</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(data_device_manager_dnd_action,</b> <b>data_device_manager_dnd_action)&gt;</b> <b>&amp;</b>
       <b>data_offer_t::on_set_actions</b> <b>()</b>
       set the available/preferred drag-and-drop actions

       <b>Parameters</b>
           <u>dnd_actions</u> actions supported by the destination client
           <u>preferred_action</u> action preferred by the destination client

       Sets the actions that the destination side client supports for this operation. This request may trigger
       the emission of wl_data_source.action and wl_data_offer.action events if the compositor needs to change
       the selected action.

       This request can be called multiple times throughout the drag-and-drop operation, typically in response
       to wl_data_device.enter or wl_data_device.motion events.

       This request determines the final result of the drag-and-drop operation. If the end result is that no
       action is accepted, the drag source will receive wl_data_source.cancelled.

       The dnd_actions argument must contain only values expressed in the wl_data_device_manager.dnd_actions
       enum, and the preferred_action argument must only contain one of those values set, otherwise it will
       result in a protocol error.

       While managing an 'ask' action, the destination drag-and-drop client may perform further
       wl_data_offer.receive requests, and is expected to perform one last wl_data_offer.set_actions request
       with a preferred action other than 'ask' (and optionally wl_data_offer.accept) before requesting
       wl_data_offer.finish, in order to convey the action selected by the user. If the preferred action is not
       in the wl_data_offer.source_actions mask, an error will be raised.

       If the 'ask' action is dismissed (e.g. user cancellation), the client is expected to perform
       wl_data_offer.destroy right away.

       This request can only be made on drag-and-drop offers, a protocol error will be raised otherwise.

       Definition at line <b>1872</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_offer_t::post_invalid_action</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>msg)</b>
       Post error: action argument has an invalid value.

       Definition at line <b>1913</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_offer_t::post_invalid_action_mask</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>msg)</b>
       Post error: action mask contains invalid values.

       Definition at line <b>1908</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_offer_t::post_invalid_finish</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>msg)</b>
       Post error: finish request was called untimely.

       Definition at line <b>1903</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>data_offer_t::post_invalid_offer</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>msg)</b>
       Post error: offer doesn't accept this request.

       Definition at line <b>1918</b> of file <b>wayland-server-protocol.cpp</b>.

   <b>void</b> <b>wayland::server::resource_t::post_no_memory</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Post 'not enough memory' error to the client

       If the compositor has not enough memory to fulfill a certail request of the client, this function can be
       called to notify the client of this circumstance.

   <b>bool</b> <b>wayland::server::resource_t::proxy_has_object</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Check whether this wrapper actually wraps an object.

       <b>Returns</b>
           true if there is an underlying object, false if this wrapper is empty

   <b>void</b> <b>data_offer_t::source_actions</b> <b>(data_device_manager_dnd_action</b> <b>const</b> <b>&amp;</b> <b>source_actions,</b> <b>bool</b> <b>post</b> <b>=</b> <b>true)</b>
       notify the source-side available actions

       <b>Parameters</b>
           <u>source_actions</u> actions offered by the data source

       This event indicates the actions offered by the data source. It will be sent right after
       wl_data_device.enter, or anytime the source side changes its offered actions through
       wl_data_source.set_actions.

       Definition at line <b>1883</b> of file <b>wayland-server-protocol.cpp</b>.

</pre><h4><b>Member</b> <b>Data</b> <b>Documentation</b></h4><pre>
   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::data_offer_t::action_since_version</b> <b>=</b> <b>3</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>action</b> function.

       Definition at line <b>1038</b> of file <b>wayland-server-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::data_offer_t::offer_since_version</b> <b>=</b> <b>1</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>offer</b> function.

       Definition at line <b>973</b> of file <b>wayland-server-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::server::data_offer_t::source_actions_since_version</b> <b>=</b> <b>3</b> <b>[static],</b>
       <b>[constexpr]</b>
       Minimum protocol version required for the <b>source_actions</b> function.

       Definition at line <b>987</b> of file <b>wayland-server-protocol.hpp</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for Wayland++ from the source code.

Version 1.0.0                                Wed May 1 2024 17:27:19            <u>wayland::server::<a href="../man3/data_offer_t.3.html">data_offer_t</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>