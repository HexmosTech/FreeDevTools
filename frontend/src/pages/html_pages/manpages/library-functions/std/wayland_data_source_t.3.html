<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wayland::data_source_t - offer to transfer data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/waylandpp-dev">waylandpp-dev_1.0.0-6_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wayland::data_source_t - offer to transfer data

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;wayland-client-protocol.hpp&gt;

       Inherits <b>wayland::proxy_t</b>.

   <b>Public</b> <b>Types</b>
       enum class <b>wrapper_type</b> { <b>standard</b>, <b>display</b>, <b>foreign</b>, <b>proxy_wrapper</b> }

   <b>Public</b> <b>Member</b> <b>Functions</b>
       void <b>offer</b> (std::string const &amp;mime_type)
           add an offered mime type
       void <b>set_actions</b> (<b>data_device_manager_dnd_action</b> const &amp;dnd_actions)
           set the available drag-and-drop actions
       bool <b>can_set_actions</b> () const
           Check whether the <b>set_actions</b> function is available with the currently bound version of the protocol.
       std::function&lt; void(std::string)&gt; &amp; <b>on_target</b> ()
           a target accepts an offered mime type
       std::function&lt; void(std::string, int)&gt; &amp; <b>on_send</b> ()
           send the data
       std::function&lt; void()&gt; &amp; <b>on_cancelled</b> ()
           selection was cancelled
       std::function&lt; void()&gt; &amp; <b>on_dnd_drop_performed</b> ()
           the drag-and-drop operation physically finished
       std::function&lt; void()&gt; &amp; <b>on_dnd_finished</b> ()
           the drag-and-drop operation concluded
       std::function&lt; void(<b>data_device_manager_dnd_action</b>)&gt; &amp; <b>on_action</b> ()
           notify the selected action
       uint32_t <b>get_id</b> () const
           Get the id of a proxy object.
       std::string <b>get_class</b> () const
           Get the interface name (class) of a proxy object.
       uint32_t <b>get_version</b> () const
           Get the protocol object version of a proxy object.
       <b>wrapper_type</b> <b>get_wrapper_type</b> () const
           Get the type of a proxy object.
       void <b>set_queue</b> (<b>event_queue_t</b> queue)
           Assign a proxy to an event queue.
       wl_proxy * <b>c_ptr</b> () const
           Get a pointer to the underlying C struct.
       bool <b>proxy_has_object</b> () const
           Check whether this wrapper actually wraps an object.
       <b>operator</b> <b>bool</b> () const
           Check whether this wrapper actually wraps an object.
       bool <b>operator==</b> (const <b>proxy_t</b> &amp;right) const
           Check whether two wrappers refer to the same object.
       bool <b>operator!=</b> (const <b>proxy_t</b> &amp;right) const
           Check whether two wrappers refer to different objects.
       void <b>proxy_release</b> ()
           Release the wrapped object (if any), making this an empty wrapper.

   <b>Static</b> <b>Public</b> <b>Attributes</b>
       static constexpr std::uint32_t <b>offer_since_version</b> = 1
           Minimum protocol version required for the <b>offer</b> function.
       static constexpr std::uint32_t <b>set_actions_since_version</b> = 3
           Minimum protocol version required for the <b>set_actions</b> function.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       offer to transfer data

       The wl_data_source object is the source side of a wl_data_offer. It is created by the source client in a
       data transfer and provides a way to describe the offered data and a way to respond to requests to
       transfer the data.

       Definition at line <b>1001</b> of file <b>wayland-client-protocol.hpp</b>.

</pre><h4><b>Member</b> <b>Enumeration</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>class</b> <b>wayland::proxy_t::wrapper_type</b> <b>[strong],</b>  <b>[inherited]</b>
       Underlying wl_proxy type and properties of a <b>proxy_t</b> that affect construction, destruction, and event
       handling

       <b>Enumerator</b>

       <u>standard</u>
              C pointer is a standard type compatible with wl_proxy*. Events are dispatched and it is destructed
              when the <b>proxy_t</b> is destructed. User data is set.

       <u>display</u>
              C  pointer  is  a  wl_display*. No events are dispatched, wl_display_disconnect is called when the
              <b>proxy_t</b> is destructed. User data is set.

       <u>foreign</u>
              C pointer is a standard type compatible with wl_proxy*, but another library owns it and it  should
              not  be  touched  in  a  way  that  could affect the operation of the other library. No events are
              dispatched, wl_proxy_destroy is not called when the  <b>proxy_t</b>  is  destructed,  user  data  is  not
              touched.  Consequently,  there is no reference counting for the <b>proxy_t</b>. Lifetime of such wrappers
              should preferably be short to minimize the chance that the owning library decides to  destroy  the
              wl_proxy.

       <u>proxy_wrapper</u>
              C  pointer  is  a  wl_proxy*  that  was  constructed  with  wl_proxy_create_wrapper. No events are
              dispatched, wl_proxy_wrapper_destroy is called when the <b>proxy_t</b> is destroyed.  Reference  counting
              is  active.  A reference to the <b>proxy_t</b> creating this proxy wrapper is held to extend its lifetime
              until after the proxy wrapper is destroyed.

       Definition at line <b>116</b> of file <b>wayland-client.hpp</b>.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>wl_proxy</b> <b>*</b> <b>wayland::proxy_t::c_ptr</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get a pointer to the underlying C struct.

       <b>Returns</b>
           The underlying wl_proxy wrapped by this <b>proxy_t</b> if it exists, otherwise an exception is thrown

   <b>bool</b> <b>data_source_t::can_set_actions</b> <b>()</b> <b>const</b>
       Check whether the <b>set_actions</b> function is available with the currently bound version of the protocol.

       Definition at line <b>2158</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::string</b> <b>wayland::proxy_t::get_class</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the interface name (class) of a proxy object.

       <b>Returns</b>
           The interface name of the object associated with the proxy

   <b>uint32_t</b> <b>wayland::proxy_t::get_id</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the id of a proxy object.

       <b>Returns</b>
           The id the object associated with the proxy

   <b>uint32_t</b> <b>wayland::proxy_t::get_version</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Get the protocol object version of a proxy object. Gets the protocol object version of a proxy object, or
       0 if the proxy was created with unversioned API.

       A returned value of 0 means that no version information is  available,  so  the  caller  must  make  safe
       assumptions about the object's real version.

       <b>display_t</b> will always return version 0.

       <b>Returns</b>
           The protocol object version of the proxy or 0

   <b>wrapper_type</b> <b>wayland::proxy_t::get_wrapper_type</b> <b>()</b> <b>const</b> <b>[inline],</b>  <b>[inherited]</b>
       Get the type of a proxy object.

       Definition at line <b>302</b> of file <b>wayland-client.hpp</b>.

   <b>void</b> <b>data_source_t::offer</b> <b>(std::string</b> <b>const</b> <b>&amp;</b> <b>mime_type)</b>
       add an offered mime type

       <b>Parameters</b>
           <u>mime_type</u> mime type offered by the data source

       This request adds a mime type to the set of mime types advertised to targets. Can be called several times
       to offer multiple types.

       Definition at line <b>2147</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(data_device_manager_dnd_action)&gt;</b> <b>&amp;</b> <b>data_source_t::on_action</b> <b>()</b>
       notify the selected action

       <b>Parameters</b>
           <u>dnd_action</u> action selected by the compositor

       This  event  indicates  the  action selected by the compositor after matching the source/destination side
       actions. Only one action (or none) will be offered here.

       This event can be emitted multiple times during  the  drag-and-drop  operation,  mainly  in  response  to
       destination  side  changes  through  wl_data_offer.set_actions,  and  as  the  data  device enters/leaves
       surfaces.

       It is only possible to receive this event after wl_data_source.dnd_drop_performed  if  the  drag-and-drop
       operation  ended  in  an  'ask'  action,  in which case the final wl_data_source.action event will happen
       immediately before wl_data_source.dnd_finished.

       Compositors may also change the selected action on the fly,  mainly  in  response  to  keyboard  modifier
       changes during the drag-and-drop operation.

       The  most  recent  action  received  is  always  the  valid  one.  The chosen action may change alongside
       negotiation (e.g. an 'ask' action can turn into a 'move' operation), so the effects of the  final  action
       must always be applied in wl_data_offer.dnd_finished.

       Clients can trigger cursor surface changes from this point, so they reflect the current action.

       Definition at line <b>2189</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void()&gt;</b> <b>&amp;</b> <b>data_source_t::on_cancelled</b> <b>()</b>
       selection  was  cancelled  This  data source is no longer valid. There are several reasons why this could
       happen:

       • The data source has been replaced by another data source.

       • The drag-and-drop operation was performed, but the drop destination did not  accept  any  of  the  mime
         types offered through wl_data_source.target.

       • The  drag-and-drop  operation was performed, but the drop destination did not select any of the actions
         present in the mask offered through wl_data_source.action.

       • The drag-and-drop operation was performed but didn't happen over a surface.

       • The compositor cancelled the drag-and-drop operation (e.g. compositor dependent timeouts to avoid stale
         drag-and-drop transfers).

       The client should clean up and destroy this data source.

       For objects of version 2 or older, wl_data_source.cancelled will only be emitted if the data  source  was
       replaced by another data source.

       Definition at line <b>2174</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void()&gt;</b> <b>&amp;</b> <b>data_source_t::on_dnd_drop_performed</b> <b>()</b>
       the  drag-and-drop  operation physically finished The user performed the drop action. This event does not
       indicate acceptance, wl_data_source.cancelled may still be emitted afterwards  if  the  drop  destination
       does not accept any mime type.

       However, this event might however not be received if the compositor cancelled the drag-and-drop operation
       before this event could happen.

       Note that the data_source may still be used in the future and should not be destroyed here.

       Definition at line <b>2179</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void()&gt;</b> <b>&amp;</b> <b>data_source_t::on_dnd_finished</b> <b>()</b>
       the drag-and-drop operation concluded The drop destination finished interoperating with this data source,
       so the client is now free to destroy this data source and free all associated data.

       If the action used to perform the operation was 'move', the source can now delete the transferred data.

       Definition at line <b>2184</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(std::string,</b> <b>int)&gt;</b> <b>&amp;</b> <b>data_source_t::on_send</b> <b>()</b>
       send the data

       <b>Parameters</b>
           <u>mime_type</u> mime type for the data
           <u>fd</u> file descriptor for the data

       Request  for  data  from  the  client.  Send  the  data  as  the specified mime type over the passed file
       descriptor, then close it.

       Definition at line <b>2169</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>std::function&lt;</b> <b>void(std::string)&gt;</b> <b>&amp;</b> <b>data_source_t::on_target</b> <b>()</b>
       a target accepts an offered mime type

       <b>Parameters</b>
           <u>mime_type</u> mime type accepted by the target

       Sent when a target accepts pointer_focus or motion events. If a target does not accept any of the offered
       types, type is NULL.

       Used for feedback during drag-and-drop.

       Definition at line <b>2164</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>wayland::proxy_t::operator</b> <b>bool</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Check whether this wrapper actually wraps an object.

       <b>Returns</b>
           true if there is an underlying object, false if this wrapper is empty

   <b>bool</b> <b>wayland::proxy_t::operator!=</b> <b>(const</b> <b>proxy_t</b> <b>&amp;</b> <b>right)</b> <b>const</b> <b>[inherited]</b>
       Check whether two wrappers refer to different objects.

   <b>bool</b> <b>wayland::proxy_t::operator==</b> <b>(const</b> <b>proxy_t</b> <b>&amp;</b> <b>right)</b> <b>const</b> <b>[inherited]</b>
       Check whether two wrappers refer to the same object.

   <b>bool</b> <b>wayland::proxy_t::proxy_has_object</b> <b>()</b> <b>const</b> <b>[inherited]</b>
       Check whether this wrapper actually wraps an object.

       <b>Returns</b>
           true if there is an underlying object, false if this wrapper is empty

   <b>void</b> <b>wayland::proxy_t::proxy_release</b> <b>()</b> <b>[inherited]</b>
       Release the wrapped object (if any), making this an empty wrapper. Note that <b>display_t</b>  instances  cannot
       be released this way. Attempts to do so are ignored.

       <b>Examples</b>
           <b>foreign_display.cpp</b>.

   <b>void</b> <b>data_source_t::set_actions</b> <b>(data_device_manager_dnd_action</b> <b>const</b> <b>&amp;</b> <b>dnd_actions)</b>
       set the available drag-and-drop actions

       <b>Parameters</b>
           <u>dnd_actions</u> actions supported by the data source

       Sets  the  actions  that  the  source  side  client supports for this operation. This request may trigger
       wl_data_source.action and wl_data_offer.action events if the compositor  needs  to  change  the  selected
       action.

       The  dnd_actions  argument  must  contain only values expressed in the wl_data_device_manager.dnd_actions
       enum, otherwise it will result in a protocol error.

       This request must be made once only, and can only be made on sources used in drag-and-drop, so it must be
       performed before wl_data_device.start_drag. Attempting to use the source  other  than  for  drag-and-drop
       will raise a protocol error.

       Definition at line <b>2153</b> of file <b>wayland-client-protocol.cpp</b>.

   <b>void</b> <b>wayland::proxy_t::set_queue</b> <b>(event_queue_t</b> <b>queue)</b> <b>[inherited]</b>
       Assign a proxy to an event queue.

       <b>Parameters</b>
           <u>queue</u> The event queue that will handle this proxy

       Assign  proxy  to  event queue. Events coming from proxy will be queued in queue instead of the display's
       main queue.

       See also: <b>display_t::dispatch_queue()</b>.

       <b>Examples</b>
           <b>proxy_wrapper.cpp</b>.

</pre><h4><b>Member</b> <b>Data</b> <b>Documentation</b></h4><pre>
   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::data_source_t::offer_since_version</b> <b>=</b> <b>1</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>offer</b> function.

       Definition at line <b>1041</b> of file <b>wayland-client-protocol.hpp</b>.

   <b>constexpr</b> <b>std::uint32_t</b> <b>wayland::data_source_t::set_actions_since_version</b> <b>=</b> <b>3</b> <b>[static],</b>  <b>[constexpr]</b>
       Minimum protocol version required for the <b>set_actions</b> function.

       Definition at line <b>1065</b> of file <b>wayland-client-protocol.hpp</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for Wayland++ from the source code.

Version 1.0.0                                Wed May 1 2024 17:27:19                   <u>wayland::<a href="../man3/data_source_t.3.html">data_source_t</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>