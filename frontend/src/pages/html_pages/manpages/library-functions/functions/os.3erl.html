<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>os - Operating system-specific functions.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       os - Operating system-specific functions.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  functions  in  this module are operating system-specific. Careless use of these functions results in
       programs that will only run on a specific platform. On the other hand, with careful use, these  functions
       can be of help in enabling a program to run on most platforms.

   <b>Note:</b>
       The  functions in this module will raise a <u>badarg</u> exception if their arguments contain invalid characters
       according to the description in the "Data Types" section.

</pre><h4><b>DATA</b> <b>TYPES</b></h4><pre>
       <b>env_var_name()</b> = nonempty_string()

              A string containing valid characters on the specific  OS  for  environment  variable  names  using
              <u>file:native_name_encoding()</u>  encoding.  Null  characters  (integer value zero) are not allowed. On
              Unix, <u>=</u> characters are not allowed. On Windows, a <u>=</u> character is only allowed as  the  very  first
              character in the string.

       <b>env_var_value()</b> = string()

              A  string  containing  valid  characters  on the specific OS for environment variable values using
              <u>file:native_name_encoding()</u> encoding. Null characters (integer value zero) are not allowed.

       <b>env_var_name_value()</b> = nonempty_string()

              Assuming that environment variables has been correctly set, a strings containing valid  characters
              on  the  specific  OS  for environment variable names and values using <u>file:native_name_encoding()</u>
              encoding. The first <u>=</u> characters appearing in the string separates environment variable  name  (on
              the left) from environment variable value (on the right).

       <b>os_command()</b> = atom() | io_lib:chars()

              All  characters  needs to be valid characters on the specific OS using <u>file:native_name_encoding()</u>
              encoding. Null characters (integer value zero) are not allowed.

       <b>os_command_opts()</b> = #{max_size =&gt; integer() &gt;= 0 | infinity}

              Options for <u>os:cmd/2</u>

                <u>max_size</u>:
                  The maximum size of the data returned by the <u>os:cmd/2</u> call. See the <u>os:cmd/2</u> documentation for
                  more details.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>cmd(Command)</b> <b>-&gt;</b> <b>string()</b>

       <b>cmd(Command,</b> <b>Options)</b> <b>-&gt;</b> <b>string()</b>

              Types:

                 Command = os_command()
                 Options = os_command_opts()

              Executes <u>Command</u> in a command shell of the target OS, captures the standard output of the command,
              and returns this result as a string.

              <u>Examples:</u>

              LsOut = os:cmd("ls"), % on unix platform
              DirOut = os:cmd("dir"), % on Win32 platform

              Notice that in some cases, standard output of a command when  called  from  another  program  (for
              example,  <u>os:cmd/1</u>)  can  differ,  compared  with  the  standard output of the command when called
              directly from an OS command shell.

              <u>os:cmd/2</u> was added in kernel-5.5 (OTP-20.2.1). It makes it possible to pass an options map as  the
              second argument in order to control the behaviour of <u>os:cmd</u>. The possible options are:

                <u>max_size</u>:
                  The maximum size of the data returned by the <u>os:cmd</u> call. This option is a safety feature that
                  should be used when the command executed can return a very large, possibly infinite, result.

                &gt; os:cmd("cat /dev/zero", #{ max_size =&gt; 20 }).
                [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]

       <b>env()</b> <b>-&gt;</b> <b>[{env_var_name(),</b> <b>env_var_value()}]</b>

              Returns  a  list  of  all environment variables. Each environment variable is expressed as a tuple
              <u>{VarName,Value}</u>, where <u>VarName</u> is the name of the variable and <u>Value</u> its value.

              If Unicode filename encoding is in effect (see the <u>erl</u>  manual  page),  the  strings  can  contain
              characters with codepoints &gt; 255.

       <b>find_executable(Name)</b> <b>-&gt;</b> <b>Filename</b> <b>|</b> <b>false</b>

       <b>find_executable(Name,</b> <b>Path)</b> <b>-&gt;</b> <b>Filename</b> <b>|</b> <b>false</b>

              Types:

                 Name = Path = Filename = string()

              These  two  functions look up an executable program, with the specified name and a search path, in
              the same way as the underlying OS. <u>find_executable/1</u> uses the current execution path (that is, the
              environment variable <u>PATH</u> on Unix and Windows).

              <u>Path</u>, if specified, is to conform to the syntax of execution paths on the OS. Returns the absolute
              filename of the executable program <u>Name</u>, or <u>false</u> if the program is not found.

       <b>getenv()</b> <b>-&gt;</b> <b>[env_var_name_value()]</b>

              Returns a list of all environment variables. Each environment variable is expressed  as  a  single
              string  on  the  format  <u>"VarName=Value"</u>,  where <u>VarName</u> is the name of the variable and <u>Value</u> its
              value.

              If Unicode filename encoding is in effect (see the <u>erl</u>  manual  page),  the  strings  can  contain
              characters with codepoints &gt; 255.

              Consider using <u>env/0</u> for a nicer 2-tuple format.

       <b>getenv(VarName)</b> <b>-&gt;</b> <b>Value</b> <b>|</b> <b>false</b>

              Types:

                 VarName = env_var_name()
                 Value = env_var_value()

              Returns  the  <u>Value</u>  of  the environment variable <u>VarName</u>, or <u>false</u> if the environment variable is
              undefined.

              If Unicode filename encoding is in effect (see the <u>erl</u> manual page), the strings <u>VarName</u> and <u>Value</u>
              can contain characters with codepoints &gt; 255.

       <b>getenv(VarName,</b> <b>DefaultValue)</b> <b>-&gt;</b> <b>Value</b>

              Types:

                 VarName = env_var_name()
                 DefaultValue = Value = env_var_value()

              Returns the <u>Value</u> of the environment variable <u>VarName</u>, or <u>DefaultValue</u> if the environment variable
              is undefined.

              If Unicode filename encoding is in effect (see the <u>erl</u> manual page), the strings <u>VarName</u> and <u>Value</u>
              can contain characters with codepoints &gt; 255.

       <b>getpid()</b> <b>-&gt;</b> <b>Value</b>

              Types:

                 Value = string()

              Returns the process identifier of the current Erlang emulator in the format most commonly used  by
              the  OS environment. Returns <u>Value</u> as a string containing the (usually) numerical identifier for a
              process. On Unix, this is typically the return value of the <u>getpid()</u> system call. On Windows,  the
              process id as returned by the <u>GetCurrentProcessId()</u> system call is used.

       <b>putenv(VarName,</b> <b>Value)</b> <b>-&gt;</b> <b>true</b>

              Types:

                 VarName = env_var_name()
                 Value = env_var_value()

              Sets a new <u>Value</u> for environment variable <u>VarName</u>.

              If Unicode filename encoding is in effect (see the <u>erl</u> manual page), the strings <u>VarName</u> and <u>Value</u>
              can contain characters with codepoints &gt; 255.

              On  Unix platforms, the environment is set using UTF-8 encoding if Unicode filename translation is
              in effect. On Windows, the environment is set using wide character interfaces.

       <b>set_signal(Signal,</b> <b>Option)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 Signal =
                     sighup | sigquit | sigabrt | sigalrm | sigterm | sigusr1 |
                     sigusr2 | sigchld | sigstop | sigtstp
                 Option = default | handle | ignore

              Enables or disables OS signals.

              Each signal my be set to one of the following options:

                <u>ignore</u>:
                   This signal will be ignored.

                <u>default</u>:
                   This signal will use the default signal handler for the operating system.

                <u>handle</u>:
                   This signal will notify <u>erl_signal_server</u> when it is received by the Erlang runtime system.

       <b>system_time()</b> <b>-&gt;</b> <b>integer()</b>

              Returns the current OS system time in <u>native</u> time unit.

          <b>Note:</b>
              This time is <u>not</u> a monotonically increasing time.

       <b>system_time(Unit)</b> <b>-&gt;</b> <b>integer()</b>

              Types:

                 Unit = erlang:time_unit()

              Returns the current OS system time converted into the <u>Unit</u> passed as argument.

              Calling <u>os:system_time(Unit)</u> is equivalent to  <u>erlang:convert_time_unit</u>(<u>os:system_time(),</u>  <u>native,</u>
              <u>Unit)</u>.

          <b>Note:</b>
              This time is <u>not</u> a monotonically increasing time.

       <b>timestamp()</b> <b>-&gt;</b> <b>Timestamp</b>

              Types:

                 Timestamp = erlang:timestamp()
                   Timestamp = {MegaSecs, Secs, MicroSecs}

              Returns the current OS system time in the same format as <u>erlang:timestamp/0</u>. The tuple can be used
              together  with  function  <u>calendar:now_to_universal_time/1</u>  or <u>calendar:now_to_local_time/1</u> to get
              calendar time. Using the calendar time, together with the <u>MicroSecs</u> part of the return tuple  from
              this  function,  allows  you to log time stamps in high resolution and consistent with the time in
              the rest of the OS.

              Example of code formatting a string in format "DD Mon YYYY HH:MM:SS.mmmmmm", where DD is  the  day
              of month, Mon is the textual month name, YYYY is the year, HH:MM:SS is the time, and mmmmmm is the
              microseconds in six positions:

              -module(print_time).
              -export([format_utc_timestamp/0]).
              format_utc_timestamp() -&gt;
                  TS = {_,_,Micro} = os:timestamp(),
                  {{Year,Month,Day},{Hour,Minute,Second}} =
              calendar:now_to_universal_time(TS),
                  Mstr = element(Month,{"Jan","Feb","Mar","Apr","May","Jun","Jul",
                  "Aug","Sep","Oct","Nov","Dec"}),
                  io_lib:format("~2w ~s ~4w ~2w:~2..0w:~2..0w.~6..0w",
                  [Day,Mstr,Year,Hour,Minute,Second,Micro]).

              This module can be used as follows:

              1&gt; io:format("~s~n",[print_time:format_utc_timestamp()]).
              29 Apr 2009  9:55:30.051711

              OS system time can also be retreived by <u>system_time/0</u> and <u>system_time/1</u>.

       <b>perf_counter()</b> <b>-&gt;</b> <b>Counter</b>

              Types:

                 Counter = integer()

              Returns  the  current  performance  counter  value  in  <u>perf_counter</u>  time  unit. This is a highly
              optimized call that might not be traceable.

       <b>perf_counter(Unit)</b> <b>-&gt;</b> <b>integer()</b>

              Types:

                 Unit = erlang:time_unit()

              Returns a performance counter that can be used as a very fast and high resolution timestamp.  This
              counter  is  read  directly  from  the hardware or operating system with the same guarantees. This
              means that two consecutive calls to the function are not guaranteed to  be  monotonic,  though  it
              most  likely  will  be.  The  performance counter will be converted to the resolution passed as an
              argument.

              1&gt; T1 = os:<a href="../man1000/perf_counter.1000.html">perf_counter</a>(1000),receive after 10000 -&gt; ok end,T2 = os:<a href="../man1000/perf_counter.1000.html">perf_counter</a>(1000).
              176525861
              2&gt; T2 - T1.
              10004

       <b>type()</b> <b>-&gt;</b> <b>{Osfamily,</b> <b>Osname}</b>

              Types:

                 Osfamily = unix | win32
                 Osname = atom()

              Returns the <u>Osfamily</u> and, in some cases, the <u>Osname</u> of the current OS.

              On Unix, <u>Osname</u> has the same value as <u>uname</u> <u>-s</u> returns, but in lower case. For example, on Solaris
              1 and 2, it is <u>sunos</u>.

              On Windows, <u>Osname</u> is <u>nt</u>.

          <b>Note:</b>
              Think twice before using this function. Use module <u>filename</u>  if  you  want  to  inspect  or  build
              filenames in a portable way. Avoid matching on atom <u>Osname</u>.

       <b>unsetenv(VarName)</b> <b>-&gt;</b> <b>true</b>

              Types:

                 VarName = env_var_name()

              Deletes the environment variable <u>VarName</u>.

              If  Unicode  filename  encoding  is  in  effect  (see the <u>erl</u> manual page), the string <u>VarName</u> can
              contain characters with codepoints &gt; 255.

       <b>version()</b> <b>-&gt;</b> <b>VersionString</b> <b>|</b> <b>{Major,</b> <b>Minor,</b> <b>Release}</b>

              Types:

                 VersionString = string()
                 Major = Minor = Release = integer() &gt;= 0

              Returns the OS version. On most systems, this function returns a tuple, but a string  is  returned
              instead if the system has versions that cannot be expressed as three numbers.

          <b>Note:</b>
              Think twice before using this function. If you still need to use it, always <u>call</u> <u>os:type()</u> first.

Ericsson AB                                        kernel 8.2                                           <u><a href="../man3erl/os.3erl.html">os</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>