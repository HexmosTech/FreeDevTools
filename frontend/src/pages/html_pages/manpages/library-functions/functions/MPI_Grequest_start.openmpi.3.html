<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C Syntax</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openmpi-doc">openmpi-doc_5.0.7-1build1_all</a> <br><br><pre>
</pre><h4><b>SYNTAX</b></h4><pre>
   <b>C</b> <b>Syntax</b>
          #include &lt;mpi.h&gt;

          int MPI_Grequest_start(MPI_Grequest_query_function *query_fn,
              MPI_Grequest_free_function *free_fn,
              MPI_Grequest_cancel_function *cancel_fn, void *extra_state,
              MPI_Request *request)

   <b>Fortran</b> <b>Syntax</b>
          USE MPI
          ! or the older form: INCLUDE 'mpif.h'

          MPI_GREQUEST_START(QUERY_FN, FREE_FN, CANCEL_FN, EXTRA_STATE,
              REQUEST, IERROR)
              INTEGER REQUEST, IERROR
              EXTERNAL QUERY_FN, FREE_FN, CANCEL_FN
                INTEGER(KIND=MPI_ADDRESS_KIND) EXTRA_STATE

   <b>Fortran</b> <b>2008</b> <b>Syntax</b>
          USE mpi_f08

          MPI_Grequest_start(query_fn, free_fn, cancel_fn, extra_state, request,
                  ierror)
              PROCEDURE(MPI_Grequest_query_function) :: query_fn
              PROCEDURE(MPI_Grequest_free_function) :: free_fn
              PROCEDURE(MPI_Grequest_cancel_function) :: cancel_fn
              INTEGER(KIND=MPI_ADDRESS_KIND), INTENT(IN) :: extra_state
              TYPE(MPI_Request), INTENT(OUT) :: request
              INTEGER, OPTIONAL, INTENT(OUT) :: ierror

</pre><h4><b>INPUT</b> <b>PARAMETERS</b></h4><pre>
       •

         <b>query_fn</b> <b>(Callback</b> <b>function</b> <b>invoked</b> <b>when</b> <b>request</b> <b>status</b> <b>is)</b>
                queried (function).

       •

         <b>free_fn</b> <b>(Callback</b> <b>function</b> <b>invoked</b> <b>when</b> <b>request</b> <b>is</b> <b>freed)</b>
                (function).

       •

         <b>cancel_fn</b> <b>(Callback</b> <b>function</b> <b>invoked</b> <b>when</b> <b>request</b> <b>is</b> <b>canceled)</b>
                (function).

       • <b>extra_state</b> : Extra state.

</pre><h4><b>OUTPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>request</b> : Generalized request (handle).

       • <b>ierror</b> : Fortran only: Error status (integer).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>MPI_Grequest_start</u> starts a generalized <b>request</b> and returns a handle to it in <b>request</b>.

       The  syntax and meaning of the callback functions are listed below. All callback functions are passed the
       <b>extra_state</b> argument that was associated with the <b>request</b> by the starting call  <u>MPI_Grequest_start</u>.  This
       can be used to maintain user-defined state for the <b>request</b>. In C, the query function is

          typedef int MPI_Grequest_query_function(void *extra_state,
              MPI_Status *status);

       In Fortran, it is

          SUBROUTINE GREQUEST_QUERY_FUNCTION(EXTRA_STATE, STATUS, IERROR)
              INTEGER STATUS(MPI_STATUS_SIZE), IERROR
              INTEGER(KIND=MPI_ADDRESS_KIND) EXTRA_STATE

       The <b>query_fn</b> function computes the status that should be returned for the generalized request. The status
       also  includes  information  about  successful/unsuccessful  cancellation  of  the  request (result to be
       returned by <b>MPI_Test_cancelled</b>).

       The <b>query_fn</b> function is invoked by the <b>MPI_{Wait|Test}{any|some|all}</b> call that completed the generalized
       request  associated  with  this  callback.  The  callback  function  is  also   invoked   by   calls   to
       <b>MPI_Request_get_status</b>  if  the  request is complete when the call occurs. In both cases, the callback is
       passed a reference to the corresponding status variable passed by the user to the MPI call. If  the  user
       provided  <b>MPI_STATUS_IGNORE</b> or <b>MPI_STATUSES_IGNORE</b> to the MPI function that causes <b>query_fn</b> to be called,
       then MPI will pass a valid status object to <b>query_fn</b>, and this status will be ignored upon return of  the
       callback  function.  Note  that  <b>query_fn</b>  is  invoked  only after <b>MPI_Grequest_complete</b> is called on the
       request; it may be invoked several times for the same generalized request.  Note  also  that  a  call  to
       <b>MPI_{Wait|Test}{some|all}</b>  may  cause  multiple  invocations of <b>query_fn</b> callback functions, one for each
       generalized request that is completed by the MPI call. The order of these invocations is not specified by
       MPI.

       In C, the free function is

          typedef int MPI_Grequest_free_function(void *extra_state);

       And in Fortran, it is

          SUBROUTINE GREQUEST_FREE_FUNCTION(EXTRA_STATE, IERROR)
              INTEGER IERROR
              INTEGER(KIND=MPI_ADDRESS_KIND) EXTRA_STATE

       The <b>free_fn</b> callback function is invoked to  clean  up  user-allocated  resources  when  the  generalized
       request is freed.

       The  <b>free_fn</b> function is invoked by the <b>MPI_{Wait|Test}{any|some|all}</b> call that completed the generalized
       request associated with this callback. <b>free_fn</b> is invoked  after  the  call  to  <b>query_fn</b>  for  the  same
       request.  However,  if  the  MPI call completed multiple generalized requests, the order in which <b>free_fn</b>
       callback functions are invoked is not specified by MPI.

       The  <b>free_fn</b>  callback  is  also  invoked  for  generalized  requests  that  are  freed  by  a  call   to
       <b>MPI_Request_free</b>  (no call to <b>MPI_{Wait|Test}{any|some|all}</b> will occur for such a request). In this case,
       the callback function will be called either in the MPI call <b>MPI_Request_free(request)</b> or in the MPI  call
       <b>MPI_Grequest_complete(request)</b>,  whichever  happens last. In other words, in this case the actual freeing
       code is executed as soon as both calls (<b>MPI_Request_free</b> and <b>MPI_Grequest_complete</b>)  have  occurred.  The
       <b>request</b> is not deallocated until after <b>free_fn</b> completes. Note that <b>free_fn</b> will be invoked only once per
       request by a correct program.

       In C, the cancel function is

          typedef int MPI_Grequest_cancel_function(void *extra_state, int complete);

       In Fortran, the cancel function is

          SUBROUTINE GREQUEST_CANCEL_FUNCTION(EXTRA_STATE, COMPLETE, IERROR)
               INTEGER IERROR
               INTEGER(KIND=MPI_ADDRESS_KIND) EXTRA_STATE
               LOGICAL COMPLETE

       The  <b>cancel_fn</b>  function  is  invoked to start the cancellation of a generalized request. It is called by
       <b>MPI_Request_cancel(request)</b>.  MPI passes to the callback function complete=true if  <b>MPI_Grequest_complete</b>
       has already been called on the request, and complete=false otherwise.

</pre><h4><b>ERRORS</b></h4><pre>
       Almost  all  MPI  routines  return  an  error  value; C routines as the return result of the function and
       Fortran routines in the last argument.

       Before the error value is returned, the current MPI  error  handler  associated  with  the  communication
       object  (e.g.,  communicator, window, file) is called.  If no communication object is associated with the
       MPI call, then the call is considered attached to MPI_COMM_SELF and will call the  associated  MPI  error
       handler.   When   MPI_COMM_SELF   is   not  initialized  (i.e.,  before  <u>MPI_Init</u>/<u>MPI_Init_thread</u>,  after
       <u>MPI_Finalize</u>, or when using the Sessions Model exclusively) the error raises the initial  error  handler.
       The  initial  error handler can be changed by calling <u>MPI_Comm_set_errhandler</u> on MPI_COMM_SELF when using
       the World model, or the mpi_initial_errhandler CLI argument to mpiexec or info  key  to  <u>MPI_Comm_spawn</u>/‐
       <u>MPI_Comm_spawn_multiple</u>.   If no other appropriate error handler has been set, then the MPI_ERRORS_RETURN
       error handler is called for MPI I/O functions and the MPI_ERRORS_ABORT error handler is  called  for  all
       other MPI functions.

       Open MPI includes three predefined error handlers that can be used:

       • <b>MPI_ERRORS_ARE_FATAL</b> Causes the program to abort all connected MPI processes.

       • <b>MPI_ERRORS_ABORT</b> An error handler that can be invoked on a communicator, window, file, or session. When
         called  on  a  communicator,  it  acts  as if <u>MPI_Abort</u> was called on that communicator. If called on a
         window or file, acts as if <u>MPI_Abort</u> was called on a communicator containing the group of processes  in
         the corresponding window or file. If called on a session, aborts only the local process.

       • <b>MPI_ERRORS_RETURN</b> Returns an error code to the application.

       MPI applications can also implement their own error handlers by calling:

       • <u>MPI_Comm_create_errhandler</u> then <u>MPI_Comm_set_errhandler</u>

       • <u>MPI_File_create_errhandler</u> then <u>MPI_File_set_errhandler</u>

       • <u>MPI_Session_create_errhandler</u> then <u>MPI_Session_set_errhandler</u> or at <u>MPI_Session_init</u>

       • <u>MPI_Win_create_errhandler</u> then <u>MPI_Win_set_errhandler</u>

       Note that MPI does not guarantee that an MPI program can continue past an error.

       See the <u>MPI</u> <u>man</u> <u>page</u> for a full list of <u>MPI</u> <u>error</u> <u>codes</u>.

       See the Error Handling section of the MPI-3.1 standard for more information.

       All  callback  functions  return an error code. The code is passed back and dealt with as appropriate for
       the error code by the MPI function that invoked the callback function. For example, if  error  codes  are
       returned, then the error code returned by the callback function will be returned by the MPI function that
       invoked  the  callback  function. In the case of a <b>MPI_{Wait|Test}any</b> call that invokes both <b>query_fn</b> and
       <b>free_fn</b>, the MPI call will return the error code returned by the last callback, namely <b>free_fn</b>. If one or
       more of the <b>request``s</b> <b>in</b> <b>a</b> <b>call</b> <b>to</b> <b>``MPI_{Wait|Test}{some|all</b>} has failed, then the MPI call will return
       <b>MPI_ERR_IN_STATUS</b>. In such a case, if the MPI call was passed an array of statuses, then MPI will  return
       in each of the statuses that correspond to a completed generalized <b>request</b> the error code returned by the
       corresponding  invocation  of  its  <b>free_fn</b>  callback  function.  However, if the MPI function was passed
       <b>MPI_STATUSES_IGNORE</b>, then the individual error codes returned by each callback function will be lost.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2025, The Open MPI Community

                                                  Jun 07, 2025                             <u><a href="../man3/MPI_GREQUEST_START.3.html">MPI_GREQUEST_START</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>