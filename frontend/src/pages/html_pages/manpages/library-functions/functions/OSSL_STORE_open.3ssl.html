<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OSSL_STORE_CTX, OSSL_STORE_post_process_info_fn, OSSL_STORE_open, OSSL_STORE_open_ex, OSSL_STORE_ctrl,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       OSSL_STORE_CTX, OSSL_STORE_post_process_info_fn, OSSL_STORE_open, OSSL_STORE_open_ex, OSSL_STORE_ctrl,
       OSSL_STORE_load, OSSL_STORE_eof, OSSL_STORE_delete, OSSL_STORE_error, OSSL_STORE_close - Types and
       functions to read objects from a URI

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/store.h&gt;

        typedef struct ossl_store_ctx_st OSSL_STORE_CTX;

        typedef OSSL_STORE_INFO *(*OSSL_STORE_post_process_info_fn)(OSSL_STORE_INFO *,
                                                                    void *);

        OSSL_STORE_CTX *OSSL_STORE_open(const char *uri, const UI_METHOD *ui_method,
                                        void *ui_data,
                                        OSSL_STORE_post_process_info_fn post_process,
                                        void *post_process_data);
        OSSL_STORE_CTX *
        OSSL_STORE_open_ex(const char *uri, OSSL_LIB_CTX *libctx, const char *propq,
                           const UI_METHOD *ui_method, void *ui_data,
                           const OSSL_PARAM params[],
                           OSSL_STORE_post_process_info_fn post_process,
                           void *post_process_data);

        OSSL_STORE_INFO *OSSL_STORE_load(OSSL_STORE_CTX *ctx);
        int OSSL_STORE_eof(OSSL_STORE_CTX *ctx);
        int OSSL_STORE_delete(const char *uri, OSSL_LIB_CTX *libctx, const char *propq,
                              const UI_METHOD *ui_method, void *ui_data,
                              const OSSL_PARAM params[]);
        int OSSL_STORE_error(OSSL_STORE_CTX *ctx);
        int OSSL_STORE_close(OSSL_STORE_CTX *ctx);

       The following function has been deprecated since OpenSSL 3.0, and can be hidden entirely by defining
       <b>OPENSSL_API_COMPAT</b> with a suitable version value, see <b><a href="../man7/openssl_user_macros.7.html">openssl_user_macros</a></b>(7):

        int OSSL_STORE_ctrl(OSSL_STORE_CTX *ctx, int cmd, ... /* args */);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These functions help the application to fetch supported objects (see "SUPPORTED OBJECTS" in
       <b><a href="../man3/OSSL_STORE_INFO.3.html">OSSL_STORE_INFO</a></b>(3) for information on which those are) from a given URI.  The general method to do so is
       to "open" the URI using <b>OSSL_STORE_open()</b>, read each available and supported object using
       <b>OSSL_STORE_load()</b> as long as <b>OSSL_STORE_eof()</b> hasn't been reached, and finish it off with
       <b>OSSL_STORE_close()</b>.

       The retrieved information is stored in a <b>OSSL_STORE_INFO</b>, which is further described in
       <b><a href="../man3/OSSL_STORE_INFO.3.html">OSSL_STORE_INFO</a></b>(3).

   <b>Types</b>
       <b>OSSL_STORE_CTX</b> is a context variable that holds all the internal information for <b>OSSL_STORE_open()</b>,
       <b>OSSL_STORE_open_ex()</b>, <b>OSSL_STORE_load()</b>, <b>OSSL_STORE_eof()</b> and <b>OSSL_STORE_close()</b> to work together.

   <b>Functions</b>
       <b>OSSL_STORE_open_ex()</b> takes a uri or path <u>uri</u>, password UI method <u>ui_method</u> with associated data <u>ui_data</u>,
       and post processing callback <u>post_process</u> with associated data <u>post_process_data</u>, a library context
       <u>libctx</u> with an associated property query <u>propq</u>, and opens a channel to the data located at the URI and
       returns a <b>OSSL_STORE_CTX</b> with all necessary internal information.  The given <u>ui_method</u> and <u>ui_data</u> will
       be reused by all functions that use <b>OSSL_STORE_CTX</b> when interaction is needed, for instance to provide a
       password.  The auxiliary <b><a href="../man3/OSSL_PARAM.3.html">OSSL_PARAM</a></b>(3) parameters in <u>params</u> can be set to further modify the store
       operation.  The given <u>post_process</u> and <u>post_process_data</u> will be reused by <b>OSSL_STORE_load()</b> to
       manipulate or drop the value to be returned.  The <u>post_process</u> function drops values by returning NULL,
       which will cause <b>OSSL_STORE_load()</b> to start its process over with loading the next object, until
       <u>post_process</u> returns something other than NULL, or the end of data is reached as indicated by
       <b>OSSL_STORE_eof()</b>.

       <b>OSSL_STORE_open()</b> is similar to <b>OSSL_STORE_open_ex()</b> but uses NULL for the <u>params</u>, the library context
       <u>libctx</u> and property query <u>propq</u>.

       <b>OSSL_STORE_ctrl()</b> takes a <b>OSSL_STORE_CTX</b>, and command number <u>cmd</u> and more arguments not specified here.
       The available loader specific command numbers and arguments they each take depends on the loader that's
       used and is documented together with that loader.

       There are also global controls available:

       <b>OSSL_STORE_C_USE_SECMEM</b>
           Controls  if the loader should attempt to use secure memory for any allocated <b>OSSL_STORE_INFO</b> and its
           contents.  This control expects one argument, a pointer to an <u>int</u> that is expected to have the  value
           1 (yes) or 0 (no).  Any other value is an error.

       <b>OSSL_STORE_load()</b>  takes  a  <b>OSSL_STORE_CTX</b>  and  tries  to  load the next available object and return it
       wrapped with <b>OSSL_STORE_INFO</b>.

       <b>OSSL_STORE_delete()</b> deletes the object identified by <u>uri</u>.

       <b>OSSL_STORE_eof()</b> takes a <b>OSSL_STORE_CTX</b> and checks if we've reached the end of data.

       <b>OSSL_STORE_error()</b> takes a <b>OSSL_STORE_CTX</b> and checks if an error occurred in the  last  <b>OSSL_STORE_load()</b>
       call.   Note  that it may still be meaningful to try and load more objects, unless <b>OSSL_STORE_eof()</b> shows
       that the end of data has been reached.

       <b>OSSL_STORE_close()</b> takes a <b>OSSL_STORE_CTX</b>, closes the channel that was opened  by  <b>OSSL_STORE_open()</b>  and
       frees  all other information that was stored in the <b>OSSL_STORE_CTX</b>, as well as the <b>OSSL_STORE_CTX</b> itself.
       If <u>ctx</u> is NULL it does nothing.

</pre><h4><b>NOTES</b></h4><pre>
       A string without a scheme prefix (that is, a non-URI string) is implicitly interpreted as using the <u>file:</u>
       scheme.

       There are some tools that can be used together with <b>OSSL_STORE_open()</b> to  determine  if  any  failure  is
       caused  by  an  unparsable URI, or if it's a different error (such as memory allocation failures); if the
       URI  was   parsable   but   the   scheme   unregistered,   the   top   error   will   have   the   reason
       "OSSL_STORE_R_UNREGISTERED_SCHEME".

       These  functions make no direct assumption regarding the pass phrase received from the password callback.
       The loaders may make assumptions, however.  For example, the <b>file:</b> scheme loader inherits the assumptions
       made by OpenSSL functionality that handles the different file types; this is mostly relevant for  PKCS#12
       objects.  See <b><a href="../man7/passphrase-encoding.7.html">passphrase-encoding</a></b>(7) for further information.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>OSSL_STORE_open()</b> returns a pointer to a <b>OSSL_STORE_CTX</b> on success, or NULL on failure.

       <b>OSSL_STORE_load()</b> returns a pointer to a <b>OSSL_STORE_INFO</b> on success, or NULL on error or when end of data
       is reached.  Use <b>OSSL_STORE_error()</b> and <b>OSSL_STORE_eof()</b> to determine the meaning of a returned NULL.

       <b>OSSL_STORE_eof()</b> returns 1 if the end of data has been reached or an error occurred, 0 otherwise.

       <b>OSSL_STORE_error()</b> returns 1 if an error occurred in an <b>OSSL_STORE_load()</b> call, otherwise 0.

       <b>OSSL_STORE_delete()</b>, <b>OSSL_STORE_ctrl()</b> and <b>OSSL_STORE_close()</b> return 1 on success, or 0 on failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/ossl_store.7.html">ossl_store</a></b>(7), <b><a href="../man3/OSSL_STORE_INFO.3.html">OSSL_STORE_INFO</a></b>(3), <b><a href="../man3/OSSL_STORE_register_loader.3.html">OSSL_STORE_register_loader</a></b>(3), <b><a href="../man7/passphrase-encoding.7.html">passphrase-encoding</a></b>(7)

</pre><h4><b>HISTORY</b></h4><pre>
       <b>OSSL_STORE_delete()</b> was added in OpenSSL 3.2.

       <b>OSSL_STORE_open_ex()</b> was added in OpenSSL 3.0.

       <b>OSSL_STORE_CTX</b>,       <b>OSSL_STORE_post_process_info_fn()</b>,       <b>OSSL_STORE_open()</b>,      <b>OSSL_STORE_ctrl()</b>,
       <b>OSSL_STORE_load()</b>, <b>OSSL_STORE_eof()</b> and <b>OSSL_STORE_close()</b> were added in OpenSSL 1.1.1.

       Handling of NULL <u>ctx</u> argument for <b>OSSL_STORE_close()</b> was introduced in OpenSSL 1.1.1h.

       <b>OSSL_STORE_ctrl()</b> and <b>OSSL_STORE_vctrl()</b> were deprecated in OpenSSL 3.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2016-2023 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file  except  in  compliance
       with  the  License.   You  can  obtain  a  copy  in  the  file  LICENSE  in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                              <u><a href="../man3SSL/OSSL_STORE_OPEN.3SSL.html">OSSL_STORE_OPEN</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>