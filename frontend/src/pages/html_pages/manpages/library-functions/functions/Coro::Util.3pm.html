<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coro::Util - various utility functions.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcoro-perl">libcoro-perl_6.570-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Coro::Util - various utility functions.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Coro::Util;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module implements various utility functions, mostly replacing perl functions by non-blocking
       counterparts.

       Many of these functions exist for the sole purpose of emulating existing interfaces, no matter how bad or
       limited they are (e.g. no IPv6 support).

       This module is an AnyEvent user. Refer to the AnyEvent documentation to see how to integrate it into your
       own programs.

       $ipn = Coro::Util::inet_aton $hostname || $ip
           Works  almost  exactly  like its "Socket::inet_aton" counterpart, except that it does not block other
           coroutines.

           Does not handle multihomed hosts or IPv6 - consider using  "AnyEvent::Socket::resolve_sockaddr"  with
           the Coro rouse functions instead.

       gethostbyname, gethostbyaddr
           Work  similarly  to  their  Perl  counterparts,  but  do  not block. Uses "AnyEvent::Util::inet_aton"
           internally.

           Does not handle multihomed hosts or IPv6 -  consider  using  "AnyEvent::Socket::resolve_sockaddr"  or
           "AnyEvent::DNS::reverse_lookup" with the Coro rouse functions instead.

       @result = Coro::Util::fork_eval { ... }, @args
           Executes  the  given  code  block  or  code reference with the given arguments in a separate process,
           returning the results. The return values must be serialisable with Coro::Storable. It may, of course,
           block.

           Note that using event handling in the sub is not usually a good idea as you will inherit a mixed  set
           of watchers from the parent.

           Exceptions will be correctly forwarded to the caller.

           This  function is useful for pushing cpu-intensive computations into a different process, for example
           to take advantage of multiple CPU's. Its also  useful  if  you  want  to  simply  run  some  blocking
           functions  (such  as system()) and do not care about the overhead enough to code your own pid watcher
           etc.

           This function might keep a pool of processes in some future version, as fork can be  rather  slow  in
           large processes.

           You  should  also  look at "AnyEvent::Util::fork_eval", which is newer and more compatible to totally
           broken Perl implementations such as the one from ActiveState.

           Example: execute some external program (convert image to rgba raw form) and add  a  long  computation
           (extract  the  alpha  channel)  in  a  separate  process,  making  sure that never more then $NUMCPUS
           processes are being run.

              my $cpulock = new Coro::Semaphore $NUMCPUS;

              sub do_it {
                 my ($path) = @_;

                 my $guard = $cpulock-&gt;guard;

                 Coro::Util::fork_eval {
                    open my $fh, "convert -depth 8 \Q$path\E rgba:"
                       or die "$path: $!";

                    local $/;
                    # make my eyes hurt
                    pack "C*", unpack "(xxxC)*", &lt;$fh&gt;
                 }
              }

              my $alphachannel = do_it "/tmp/img.png";

</pre><h4><b>AUTHOR/SUPPORT/CONTACT</b></h4><pre>
          Marc A. Lehmann &lt;<a href="mailto:schmorp@schmorp.de">schmorp@schmorp.de</a>&gt;
          <a href="http://software.schmorp.de/pkg/Coro.html">http://software.schmorp.de/pkg/Coro.html</a>

perl v5.40.1                                       2025-03-21                                          <u><a href="../man3pm/Util.3pm.html">Util</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>