<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>munge_ctx_create,  munge_ctx_copy,  munge_ctx_destroy, munge_ctx_strerror, munge_ctx_get, munge_ctx_set -</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmunge-dev">libmunge-dev_0.5.16-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       munge_ctx_create,  munge_ctx_copy,  munge_ctx_destroy, munge_ctx_strerror, munge_ctx_get, munge_ctx_set -
       MUNGE context functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;munge.h&gt;</b>

       <b>munge_ctx_t</b> <b>munge_ctx_create</b> <b>(void);</b>

       <b>munge_ctx_t</b> <b>munge_ctx_copy</b> <b>(munge_ctx_t</b> <u>ctx</u><b>);</b>

       <b>void</b> <b>munge_ctx_destroy</b> <b>(munge_ctx_t</b> <u>ctx</u><b>);</b>

       <b>const</b> <b>char</b> <b>*</b> <b>munge_ctx_strerror</b> <b>(munge_ctx_t</b> <u>ctx</u><b>);</b>

       <b>munge_err_t</b> <b>munge_ctx_get</b> <b>(munge_ctx_t</b> <u>ctx</u><b>,</b> <b>munge_opt_t</b> <u>opt</u><b>,</b> <b>...);</b>

       <b>munge_err_t</b> <b>munge_ctx_set</b> <b>(munge_ctx_t</b> <u>ctx</u><b>,</b> <b>munge_opt_t</b> <u>opt</u><b>,</b> <b>...);</b>

       <b>cc</b> <b>`pkg-config</b> <b>--cflags</b> <b>--libs</b> <b>munge`</b> <b>-o</b> <b>foo</b> <b>foo.c</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>munge_ctx_create</b>() function creates and returns a new MUNGE context, or NULL on error.

       The <b>munge_ctx_copy</b>() function copies the context <u>ctx</u> and returns a new MUNGE context, or NULL on error.

       The <b>munge_ctx_destroy</b>() function destroys the context <u>ctx</u>.

       The <b>munge_ctx_strerror</b>() function returns a descriptive text string describing  the  MUNGE  error  number
       according  to  the  context  <u>ctx</u>, or NULL if no error condition exists.  This may provide a more detailed
       error message than that returned by <b>munge_strerror</b>().

       The <b>munge_ctx_get</b>() function gets the value for the option <u>opt</u> associated with  the  MUNGE  context  <u>ctx</u>,
       storing the result in the subsequent pointer argument.  If the result is a string, that string should not
       be freed or modified by the caller.

       The  <b>munge_ctx_set</b>()  function  sets  the value for the option <u>opt</u> associated with the MUNGE context <u>ctx</u>,
       using the value of the subsequent argument.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>munge_ctx_create</b>() and <b>munge_ctx_copy</b>() functions return a newly allocated MUNGE context, or NULL  on
       error.

       The  <b>munge_ctx_strerror</b>() function returns a pointer to a NUL-terminated constant text string, or NULL if
       no error condition exists.  This string should not be freed or modified by the caller.

       The <b>munge_ctx_get</b>() and <b>munge_ctx_set</b>() functions return <b>EMUNGE_SUCCESS</b> on  success,  or  a  MUNGE  error
       number otherwise.

</pre><h4><b>CONTEXT</b> <b>OPTIONS</b></h4><pre>
       The  following  context options can be queried via <b>munge_ctx_get</b>() or specified via <b>munge_ctx_set</b>().  The
       type following each enumeration is the variable type used for the subsequent argument in <b>munge_ctx_set</b>(),
       or the variable type of a pointer used for the subsequent argument in <b>munge_ctx_get</b>().

       <b>MUNGE_OPT_CIPHER_TYPE</b> , <u>int</u>
              Get or set the cipher type (see <b>CIPHER</b> <b>TYPES</b>).

       <b>MUNGE_OPT_MAC_TYPE</b> , <u>int</u>
              Get or set the MAC type (see <b>MAC</b> <b>TYPES</b>).

       <b>MUNGE_OPT_ZIP_TYPE</b> , <u>int</u>
              Get or set the compression type (see <b>COMPRESSION</b> <b>TYPES</b>).

       <b>MUNGE_OPT_REALM</b> , <u>char</u> <u>*</u>
              Get or set the security realm, where the <u>char</u> <u>*</u> type is a NUL-terminated  character  string.   The
              string  returned  by <b>munge_ctx_get</b>() should not be freed or modified by the caller.  <b>NOT</b> <b>CURRENTLY</b>
              <b>SUPPORTED</b>.

       <b>MUNGE_OPT_TTL</b> , <u>int</u>
              Get or set the time-to-live (in seconds) (see <b>TTL</b>  <b>TYPES</b>).   This  value  controls  how  long  the
              credential is valid once it has been encoded.

       <b>MUNGE_OPT_ADDR4</b> , <u>struct</u> <u>in_addr</u>
              Get  the  IPv4  address  of  the  host  where  the  credential was encoded.  This option cannot be
              explicitly set.

       <b>MUNGE_OPT_ENCODE_TIME</b> , <u>time_t</u>
              Get the time (in seconds since the epoch) at which the credential was encoded.  This option cannot
              be explicitly set.

       <b>MUNGE_OPT_DECODE_TIME</b> , <u>time_t</u>
              Get the time (in seconds since the epoch) at which the credential was decoded.  This option cannot
              be explicitly set.

       <b>MUNGE_OPT_SOCKET</b> , <u>char</u> <u>*</u>
              Get or set the local domain socket for connecting with <b>munged</b>, where the <u>char</u> <u>*</u>  type  is  a  NUL-
              terminated  character  string.   The  string  returned  by  <b>munge_ctx_get</b>() should not be freed or
              modified by the caller.

       <b>MUNGE_OPT_UID_RESTRICTION</b> , <u>uid_t</u>
              Get or set the UID allowed to decode the credential (see <b>UID</b> <b>&amp;</b> <b>GID</b> <b>TYPES</b>).   This  value  will  be
              matched against the effective user ID of the process requesting the credential decode.

       <b>MUNGE_OPT_GID_RESTRICTION</b> , <u>gid_t</u>
              Get  or  set  the  GID allowed to decode the credential (see <b>UID</b> <b>&amp;</b> <b>GID</b> <b>TYPES</b>).  This value will be
              matched against the effective group ID of the process requesting the credential decode, as well as
              each supplementary group of which the effective user ID of that process is a member.

</pre><h4><b>CIPHER</b> <b>TYPES</b></h4><pre>
       Credentials can be encrypted using the secret key shared by all <b>munged</b> daemons within a  security  realm.
       Anyone  having  access to this key can use it to decrypt a credential, thereby bypassing any restrictions
       being imposed by <b>munged</b>.

       <b>MUNGE_CIPHER_NONE</b>
              Specify that encryption is to be disabled.

       <b>MUNGE_CIPHER_DEFAULT</b>
              Specify the default according to the <b>munged</b> configuration.

       <b>MUNGE_CIPHER_BLOWFISH</b>
              Specify the Blowfish cipher designed by Bruce Schneier.  This cipher has a 64-bit block-size and a
              variable key length.  MUNGE uses it with a 128-bit key in CBC mode.  It is a fast block cipher but
              suffers from a slow  key  setup  time.   Consequently,  it  underperforms  when  generating  small
              credentials.

       <b>MUNGE_CIPHER_CAST5</b>
              Specify  the  CAST5  cipher  designed  by  Carlisle Adams and Stafford Tavares.  This cipher has a
              64-bit block-size and a variable key length.  MUNGE uses it with a 128-bit key in CBC mode.

       <b>MUNGE_CIPHER_AES128</b>
              Specify the AES (Advanced Encryption Standard) cipher, also known as Rijndael.  It was designed by
              Joan Daemen and Vincent Rijmen.  This cipher has a 128-bit block-size and a  key  length  of  128,
              192, or 256 bits.  MUNGE uses it here with a 128-bit key in CBC mode.

       <b>MUNGE_CIPHER_AES256</b>
              Specify the AES (Advanced Encryption Standard) cipher, also known as Rijndael.  It was designed by
              Joan  Daemen  and  Vincent  Rijmen.  This cipher has a 128-bit block-size and a key length of 128,
              192,  or  256  bits.   MUNGE  uses  it  here  with  a  256-bit  key  in  CBC   mode.    Currently,
              <b>MUNGE_CIPHER_AES256</b> requires the use of <b>MUNGE_MAC_SHA256</b>.

</pre><h4><b>MAC</b> <b>TYPES</b></h4><pre>
       The  message authentication code (MAC) is a required component of the credential; consequently, it cannot
       be disabled.

       <b>MUNGE_MAC_DEFAULT</b>
              Specify the default according to the <b>munged</b> configuration.

       <b>MUNGE_MAC_MD5</b>
              Specify the MD5 algorithm designed by Ron Rivest and published in  1991.   This  algorithm  has  a
              128-bit  message digest.  In 2004, a successful collision attack against MD5 was demonstrated.  In
              2009, a theoretical pre-image attack against MD5 was published.  Consequently, use of MD5  is  not
              recommended due to its lower security margin.

       <b>MUNGE_MAC_SHA1</b>
              Specify  the  SHA-1 algorithm designed by the National Security Agency and published in 1995; this
              is the successor to the original Secure Hash Algorithm (now called SHA-0) published in 1993.  This
              algorithm has a 160-bit message digest.  In 2005, successful collision attacks  were  demonstrated
              against SHA-1.  In 2017, a successful identical-prefix collision attack (SHAttered) was announced.
              In 2020, a successful chosen-prefix collision attack (SHA-1 is a Shambles) was announced.  Since a
              pre-image  attack  has  not yet been demonstrated, SHA-1 should still be safe to use within MUNGE;
              however, use of a SHA-2 hash function (such as SHA-256 or SHA-512) should be preferred.

       <b>MUNGE_MAC_RIPEMD160</b>
              Specify the RIPEMD-160 (RACE Integrity Primitives Evaluation Message Digest) algorithm designed in
              Europe by Hans Dobbertin, Antoon Bosselaers, and  Bart  Preneel,  and  published  in  1996.   This
              algorithm   has   a  160-bit  message  digest.   It  is  somewhat  less  popular  than  SHA-1  and
              correspondingly less well studied.  While slower than SHA-1, it is believed  to  have  a  slightly
              better security margin.

       <b>MUNGE_MAC_SHA256</b>
              Specify the SHA-256 algorithm designed by the National Security Agency and published in 2002; this
              is  one  of  the SHA-2 variants in the Secure Hash Algorithm family.  This algorithm has a 256-bit
              message digest.  In 2006, NIST began encouraging the use of the SHA-2 family of hash functions for
              all new applications and protocols.

       <b>MUNGE_MAC_SHA512</b>
              Specify the SHA-512 algorithm designed by the National Security Agency and published in 2002; this
              is one of the SHA-2 variants in the Secure Hash Algorithm family.  This algorithm  has  a  512-bit
              message digest.  In 2006, NIST began encouraging the use of the SHA-2 family of hash functions for
              all new applications and protocols.

</pre><h4><b>COMPRESSION</b> <b>TYPES</b></h4><pre>
       If  a  compression  type  is  specified,  a  payload-bearing  credential  will be compressed accordingly.
       However, if the resulting compressed data is larger than the original uncompressed data, the uncompressed
       data will be restored and compression will be disabled for that credential.

       <b>MUNGE_ZIP_NONE</b>
              Specify that compression is to be disabled.  This is the recommended setting  unless  there  is  a
              payload of sufficient size to compress.

       <b>MUNGE_ZIP_DEFAULT</b>
              Specify the default according to the <b>munged</b> configuration.

       <b>MUNGE_ZIP_BZLIB</b>
              Specify  the  bzip2  library developed by Julian Seward.  This is slower and uses more memory, but
              generally gets better compression on larger payloads.

       <b>MUNGE_ZIP_ZLIB</b>
              Specify the zlib library developed by Jean-loup Gailly and Mark Adler.  This is  faster  and  uses
              less memory, but gets pretty good compression nonetheless.

</pre><h4><b>TTL</b> <b>TYPES</b></h4><pre>
       The  time-to-live  value  specifies  the  number  of seconds after the encode-time that the credential is
       considered valid.  In addition to specifying an integer value, the following types are available.

       <b>MUNGE_TTL_MAXIMUM</b>
              Specify the maximum allowed by the <b>munged</b> configuration.

       <b>MUNGE_TTL_DEFAULT</b>
              Specify the default according to the <b>munged</b> configuration.

</pre><h4><b>UID</b> <b>&amp;</b> <b>GID</b> <b>TYPES</b></h4><pre>
       The UID and GID restrictions can be used to  restrict  the  decoding  of  the  credential  based  on  the
       effective  user  and group ID of the requesting process.  In addition to specifying an integer value, the
       following types are available.

       <b>MUNGE_UID_ANY</b>
              Specify that no UID restriction is to take effect; this is the default behavior.

       <b>MUNGE_GID_ANY</b>
              Specify that no GID restriction is to take effect; this is the default behavior.

</pre><h4><b>ERRORS</b></h4><pre>
       Refer to <b><a href="../man3/munge.3.html">munge</a></b>(3) for a complete list of errors.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The following example program illustrates the use of the MUNGE context  to  query  the  location  of  the
       <b>munged</b> domain socket.

       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;                      /* for printf() */
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;                     /* for exit() */
       #include &lt;munge.h&gt;

       int
       main (int argc, char *argv[])
       {
           munge_ctx_t  ctx;
           munge_err_t  err;
           char        *str;

           if (!(ctx = munge_ctx_create ())) {
               fprintf (stderr, "ERROR: Unable to create MUNGE context\n");
               exit (1);
           }
           err = munge_ctx_get (ctx, MUNGE_OPT_SOCKET, &amp;str);

           if (err != EMUNGE_SUCCESS) {
               fprintf (stderr, "ERROR: %s\n", munge_ctx_strerror (ctx));
               exit (1);
           }
           printf ("socket=%s\n", str);
           /*
            *  Note that 'str' is not to be free()d since
            *    it points to a string within the 'ctx'.
            */
           munge_ctx_destroy (ctx);
           exit (0);
       }

</pre><h4><b>NOTES</b></h4><pre>
       Abandoning a new or copied MUNGE context without destroying it will result in a memory leak.

       The  context  passed to <b>munge_encode</b>() is treated read-only except for the error message that is set when
       an error is returned.  The context passed to <b>munge_decode</b>() is set  according  to  the  context  used  to
       encode  the  credential; however, on error, its settings may be in a state which is invalid for encoding.
       Consequently, separate contexts should be used for encoding and decoding.

       A context should not be shared between threads unless it is protected  by  a  mutex;  however,  a  better
       alternative  is  to  use  a  separate  context (or two) for each thread, either by creating a new one via
       <b>munge_ctx_create</b>() or copying an existing one via <b>munge_ctx_copy</b>().

</pre><h4><b>AUTHOR</b></h4><pre>
       Chris Dunlap &lt;<a href="mailto:cdunlap@llnl.gov">cdunlap@llnl.gov</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 2007-2024 Lawrence Livermore National Security, LLC.
       Copyright (C) 2002-2007 The Regents of the University of California.

       MUNGE is free software: you can redistribute it and/or modify it under  the  terms  of  the  GNU  General
       Public License as published by the Free Software Foundation, either version 3 of the License, or (at your
       option) any later version.

       Additionally  for  the MUNGE library (libmunge), you can redistribute it and/or modify it under the terms
       of the GNU Lesser General Public License as published by the Free Software Foundation, either  version  3
       of the License, or (at your option) any later version.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/munge.1.html">munge</a></b>(1), <b><a href="../man1/remunge.1.html">remunge</a></b>(1), <b><a href="../man1/unmunge.1.html">unmunge</a></b>(1), <b><a href="../man3/munge.3.html">munge</a></b>(3), <b><a href="../man3/munge_enum.3.html">munge_enum</a></b>(3), <b><a href="../man7/munge.7.html">munge</a></b>(7), <b><a href="../man8/munged.8.html">munged</a></b>(8), <b><a href="../man8/mungekey.8.html">mungekey</a></b>(8).

       <b>https://github.com/dun/munge</b>

munge-0.5.16                                       2024-03-15                                       <u><a href="../man3/MUNGE_CTX.3.html">MUNGE_CTX</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>