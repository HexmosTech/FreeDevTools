<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tss2_Tcti_Cmd_Init - Initialization function for the Cmd TCTI library.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtss2-doc">libtss2-doc_4.1.3-1.2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tss2_Tcti_Cmd_Init - Initialization function for the Cmd TCTI library.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tss2/tss2_tcti_cmd.h&gt;</b>

       <b>TSS2_RC</b> <b>Tss2_Tcti_Cmd_Init</b> <b>(TSS2_TCTI_CONTEXT</b> <u>*tctiContext</u><b>,</b> <b>size_t</b> <u>*contextSize</u><b>,</b> <b>const</b> <b>char</b> <u>*conf</u><b>);</b>

       The  <b>Tss2_Tcti_Cmd_Init</b>()  function  initializes  a  TCTI  context  used to communicate with a subprocess
       specified in the conf string.  TCTI  send  and  receives  utilize  the  sub-process's  stdio  and  stdout
       respectively.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tss2_Tcti_Cmd_Init</b>()  attempts  to  initialize  a caller allocated <u>tcti_context</u> of size <u>size</u> using caller
       provided configuration string <u>conf</u> . Since the <u>tcti_context</u> must be a caller allocated buffer, the caller
       needs to know the buffer size required by the TCTI library. The minimum  size  of  this  context  can  be
       discovered  by  providing  <b>NULL</b>  for  the <u>tcti_context</u> and a non- <b>NULL</b> <u>size</u> parameter. The initialization
       function will then populate the <u>size</u> parameter with the minimum size  of  the  <u>tcti_context</u>  buffer.  The
       caller  must  then  allocate  a  buffer  of  this  size  (or larger) and call <b>Tss2_Tcti_Cmd_Init</b> <b>()</b> again
       providing the newly allocated <u>tcti_context</u> and the size of this  context  in  the  <u>size</u>  parameter.  This
       pattern  is  common to all TCTI initialization functions. We provide an example of this pattern using the
       <b>Tss2_Tcti_Cmd_Init</b>() function in the section titled <b>EXAMPLE.</b>

       The <u>conf</u> parameter is a C string used to configure the TCTI context. This  configuration  string  is  the
       command used for <a href="../man3/popen.3.html">popen</a>(3). The conf string cannot be NULL for this TCTI.

       Once initialized, the TCTI context returned exposes the Trusted Computing Group (TCG) defined API for the
       lowest  level  communication  with the TPM.  Using this API the caller can exchange (send / receive) TPM2
       command and response buffers with a service that can excahnge  TPM2  command  and  response  buffers.  In
       nearly  all  cases  however,  the caller will initialize a context using this function before passing the
       context to a higher level API like the System API (SAPI), Enhanced System  API  (ESAPI)  or  Feature  API
       (FAPI) and then never touch it again.

       For a more thorough discussion of the TCTI API see the “TSS System Level API and TPM Command Transmission
       Interface           Specification”           as          published          by          the          TCG:
       https://trustedcomputinggroup.org/tss-system-level-api-tpm-command-transmission-interface-specification/

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       A successful call to <b>Tss2_Tcti_Cmd_Init</b>() will return <b>TSS2_RC_SUCCESS.</b>  An unsuccessful call will produce
       a response code described in section <b>ERRORS.</b>

</pre><h4><b>ERRORS</b></h4><pre>
       <b>TSS2_TCTI_RC_BAD_VALUE</b> is returned if both the <u>tcti_context</u> and the <u>size</u> parameters are NULL, or  if  the
       <u>config</u> parameter is NULL.

</pre><h4><b>EXAMPLE</b></h4><pre>
       TCTI initialization fragment:

       #include &lt;<a href="file:/usr/include/inttypes.h">inttypes.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;tcti/tcti_mssim.h&gt;

       TSS2_RC rc;
       TSS2_TCTI_CONTEXT *tcti_context;
       size_t size;
       const char *conf = "XXX TODO SAMPLE"

       rc = Tss2_Tcti_Cmd_Init (NULL, &amp;size, NULL);
       if (rc != TSS2_RC_SUCCESS) {
           fprintf (stderr, "Failed to get allocation size for mssim TCTI "
                    " context: 0x%" PRIx32 "0, rc);
           exit (EXIT_FAILURE);
       }
       tcti_context = calloc (1, size);
       if (tcti_context == NULL) {
           fprintf (stderr, "Allocation for TCTI context failed: %s0,
                    strerror (errno));
           exit (EXIT_FAILURE);
       }
       rc = Tss2_Tcti_Cmd_Init (&amp;tcti_context, &amp;size, conf);
       if (rc != TSS2_RC_SUCCESS) {
           fprintf (stderr, "Failed to initialize mssim TCTI context: "
                    "0x%" PRIx32 "0, rc);
           free (tcti_context);
           exit (EXIT_FAILURE);
       }

</pre><h4><b>AUTHOR</b></h4><pre>
       TPM2 Software Project &lt;https://github.com/tpm2-software/tpm2-tss&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/Tss2_Tcti_Device_Init.3.html">Tss2_Tcti_Device_Init</a></b>(3), <b><a href="../man3/Tss2_Tcti_Socket_Init.3.html">Tss2_Tcti_Socket_Init</a></b>(3), <b><a href="../man3/Tss2_TctiLdr_Initialize.3.html">Tss2_TctiLdr_Initialize</a></b>(3), <b><a href="../man3/Tss2_TctiLdr_Finalize.3.html">Tss2_TctiLdr_Finalize</a></b>(3),
       <b><a href="../man7/tcti-device.7.html">tcti-device</a></b>(7), <b><a href="../man7/tcti-socket.7.html">tcti-socket</a></b>(7), <b><a href="../man7/tcti-tabrmd.7.html">tcti-tabrmd</a></b>(7), <b><a href="../man8/tpm2-abrmd.8.html">tpm2-abrmd</a></b>(8)

</pre><h4><b>COLOPHON</b></h4><pre>
       This page is part of release 4.1.3 of Open Source implementation of the TCG TPM2 Software Stack (TSS2). A
       description  of the project, information about reporting bugs, and the latest version of this page can be
       found at https://github.com/tpm2-software/tpm2-tss/.

TPM2 Software Stack                                 MAY 2020                               <u><a href="../man3/Tss2_Tcti_Cmd_Init.3.html">Tss2_Tcti_Cmd_Init</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>