<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rinci::resmeta - Function/method result metadata</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/librinci-perl">librinci-perl_1.1.104-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Rinci::resmeta - Function/method result metadata

</pre><h4><b>SPECIFICATION</b> <b>VERSION</b></h4><pre>
        1.1

</pre><h4><b>VERSION</b></h4><pre>
       This document describes version 1.1.104 of Rinci::resmeta (from Perl distribution Rinci), released on
       2023-09-30.

</pre><h4><b>INTRODUCTION</b></h4><pre>
       This document describes metadata for function/method result. This specification is part of Rinci. Please
       do a read up on it first, if you have not already done so.

</pre><h4><b>SPECIFICATION</b></h4><pre>
       There are currently several properties being used:

   <b>cmdline.*</b>
       Interpreted by Perinci::CmdLine. See its documentation for more detail.

   <b>content_type</b>
       Value: str* (MIME content type)

       Can be used to describe the MIME content type of result. Example enveloped result (in Perl):

        [200, "OK", "...", {content_type =&gt; "image/jpeg"}]

       See also "Properties: func_content_type.*".

       Note: borrowed from HTTP.

   <b>func.*</b>
       Value: any.

       These properties allow function to return extra results. Usually done to avoid breaking format of
       existing result (to maintain API compatibility). The attributes after "func." is up to the respective
       function. An example is the get_args_from_argv() function in the Perinci::Sub::GetArgs::Argv Perl module.
       The function returns $args but from v0.26 it also wants to give hints about whether or not there are
       missing arguments. It can do this via "func.missing_arg" result metadata. Some other examples (in Perl):

        # result from check_user()
        [200, "OK", 1,         # 1 means valie
        {
            "func.detail" =&gt; { # detailed check result
                last_login      =&gt; '2021-01-21T01:55:40Z',
                password_secure =&gt; 1,
                quota_exceeded  =&gt; 0,
            },
        }]

   <b>func_content_type.*</b>
       Value: str* (MIME content type)

       Can be used to describe the MIME content type of each extra result. Example (in Perl):

        func.attachment =&gt; '...',
        func_content_type.attachment =&gt; 'image/jpeg',

       See also "Property: content_type".

   <b>len</b>
       Value: int*

       The "len", "part_start" and "part_len" properties specifies the range of data when function sends partial
       result. Suppose your function is returning a partial content of a large file where total file size is
       24500000 bytes and the returned content is from bytes 10000000 to 15000000, then "len" is 24500000,
       "part_len" is 5000000, and "part_start" is 10000000. When returning partial content, status will be 206.

   <b>location</b>
       Value: str* (URL)

       Can be used to specify that the content is elsewhere. Used in combination with 301 or 302 result status.
       Example (in Perl):

        # result from a function that generates a chart
        [301, "Moved", undef, {content_type =&gt; "image/jpeg", location=&gt;"file:/tmp/asd9uxzw.png"}]

       Note: borrowed from HTTP.

   <b>logs</b>
       Value: array[hash]

       Store log of events happening to this result, stored chronologically (older first). Each log should be a
       hash which should have at least the following keys: "time" (Unix timestamp), "type" (string).

       Normally, the first element of the log will contain information about who produced the result and
       where/when. It has the "type" key with the value of "create". It should be a hash with the following
       keys:

       •   package

           Package (namespace) where this result is produced.

       •   file

           File name where the result is created. Might be a relative or absolute path.

       •   line

           Line number where the result is created.

       •   func

           Function name where this result is produced.

       •   stack_trace

           Optional, a stack trace. In Perl this can be produced by using &lt;&lt; [<b><a href="../man1/caller.1.html">caller</a></b>(1), <b><a href="../man2/caller.2.html">caller</a></b>(2), ...] &gt;&gt;.

   <b>part_len</b>
       Value: int*

       See "Property: len"

   <b>part_start</b>
       Value: int*

       See "Property: len".

   <b>perm_err</b>
       Value: bool

       Indicate that error is permanent (instead of temporary/transient). This is to provide a feature like that
       found in SMTP/POP protocol, where 4xx codes indicate transient errors and 5xx permanent ones.

   <b>prev</b>
       Value: any

       Store  "previous  result".  Result  MUST  be enveloped. Usually useful when tracing errors, especially in
       conjunction with "logs": when reporting error that results from a call to another function, the  original
       result  can  be  set  here,  to  preserve  information.  See Perinci::Sub::Util's err() for a convenience
       function for this, and Perinci::CmdLine's way of displaying it.

       Example:

        sub f1 {
            ...
            if (error) { return [500, "Can't f1: blah"] }
            ...
        }

        sub f2 {
            ...
            my $res = f1(...);
            if ($res is error) { return [500, "Can't f2", undef, {prev=&gt;$res}] }
            ...
        }

        sub f3 {
            ...
            my $res = f1(...);
            if ($res is error) { return [500, "Can't f3", undef, {prev=&gt;$res}] }
        }

   <b>results</b>
       Value: array*

       When a function returns an error response (in particular status 207, but  other  statuses  can  also  use
       this),  it can put detailed errors here. For example, a function which processed 5 items wanted to report
       that 2 items were successfully processed but the rest 3 failed:

        [207, "Multistatus", undef, {
             results =&gt; [
                 {status=&gt;200, message=&gt;"OK", item_id=&gt;1},
                 {status=&gt;403, message=&gt;"Forbidden", item_id=&gt;2},
                 {status=&gt;404, message=&gt;"Not found", item_id=&gt;3},
                 {status=&gt;500, message=&gt;"Failed", item_id=&gt;4},
                 {status=&gt;200, message=&gt;"OK", item_id=&gt;5},
             ],
         }]

       Each result is a hash to be able to store "status", "message", as well as additional data like  "item_id"
       or whatever the function wants.

       Another example, a function wants to give information on what arguments fail validation:

        [400, "Some arguments fail validation", undef, {
             results =&gt; [
                 {status=&gt;400, arg=&gt;"name", message=&gt;"Missing"},
                 {status=&gt;400, arg=&gt;"location/street", message=&gt;"Missing"},
                 {status=&gt;400, arg=&gt;"age", message=&gt;"Must be numbers only"},
                 {status=&gt;400, arg=&gt;"password", is_warning=&gt;1,
                  message=&gt;"Should be longer than 4 characters"}, # warning only
             ],
        }]

   <b>schema</b>
       Value: sah::schema

       Describe result's schema. Has lower precedence than schema from function metadata's result property.

   <b>stream</b>
       Value: bool*

       If  set to true, signify that result is an output stream. Usually in implementations the result will be a
       filehandle or an object with "getline" or "getitem" methods, where caller can then fetch data from it.

   <b>caption</b>
       Value: str*

       Optional.

   <b>undo_data</b>
       Value: any

       (DEPRECATED) Explained in "undo" feature section in Rinci::function.

</pre><h4><b>FAQ</b></h4><pre>
</pre><h4><b>HOMEPAGE</b></h4><pre>
       Please visit the project's homepage at &lt;https://metacpan.org/release/Rinci&gt;.

</pre><h4><b>SOURCE</b></h4><pre>
       Source repository is at &lt;https://github.com/perlancar/perl-Rinci&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Rinci

</pre><h4><b>AUTHOR</b></h4><pre>
       perlancar &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;

</pre><h4><b>CONTRIBUTING</b></h4><pre>
       To contribute, you can send patches by email/via RT, or send pull requests on GitHub.

       Most of the time, you don't need to build the distribution yourself. You can simply modify the code, then
       test via:

        % prove -l

       If you want to build the distribution (e.g. to try to install it locally on your system), you can install
       Dist::Zilla, Dist::Zilla::PluginBundle::Author::PERLANCAR,  Pod::Weaver::PluginBundle::Author::PERLANCAR,
       and  sometimes  one  or  two other Dist::Zilla- and/or Pod::Weaver plugins. Any additional steps required
       beyond that are considered a bug and can be reported to me.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2023, 2022, 2021, 2020, 2019, 2018, 2017, 2016, 2015, 2014, 2013, 2012  by
       perlancar &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

</pre><h4><b>BUGS</b></h4><pre>
       Please    report    any    bugs     or     feature     requests     on     the     bugtracker     website
       &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=Rinci&gt;

       When  submitting  a  bug  or request, please include a test-file or a patch to an existing test-file that
       illustrates the bug or desired feature.

perl v5.38.2                                       2024-01-20                                <u>Rinci::<a href="../man3pm/resmeta.3pm.html">resmeta</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>