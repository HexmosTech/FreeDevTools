<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tss2_Tcti_Tabrmd_Init - Initialization function for the tpm2-abrmd TCTI library.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtss2-tcti-tabrmd-dev">libtss2-tcti-tabrmd-dev_3.0.0-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tss2_Tcti_Tabrmd_Init - Initialization function for the tpm2-abrmd TCTI library.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       The  <b>Tss2_Tcti_Tabrmd_Init</b>()  function  is  used  to initialize a TCTI context for communication with the
       <b><a href="../man8/tpm2-abrmd.8.html">tpm2-abrmd</a></b>(8).

       <b>#include</b> <b>&lt;tcti/tcti-tabrmd.h&gt;</b>

       <b>TSS2_RC</b> <b>Tss2_Tcti_Tabrmd_Init</b> <b>(TSS2_TCTI_CONTEXT</b> <u>*tcti_context</u><b>,</b> <b>size_t</b> <u>*size</u><b>,</b> <b>const</b> <b>char</b> <u>*conf</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tss2_Tcti_Tabrmd_Init</b>() attempts to  initialize  a  caller  allocated  <u>tcti_context</u>  of  size  <u>size</u>  with
       configuration  specified  in  the  configuration  string <u>conf.</u>  . Since the <u>tcti_context</u> must be a caller
       allocated buffer, the caller needs to know the size required by the TCTI library.  The  minimum  size  of
       this context can be discovered by providing <b>NULL</b> for the <u>tcti_context</u> and a non- <b>NULL</b> <u>size</u> parameter. The
       initialization  function  will then populate the <u>size</u> parameter with the minimum size of the <u>tcti_context</u>
       buffer. The caller my then allocate a buffer of this size (or larger) and call  <b>tss2_Tcti_Tabrmd_Init</b>  <b>()</b>
       again providing the newly allocated <u>tcti_context</u> and the size of this context in the <u>size</u> parameter. This
       pattern  is  common to all TCTI initialization functions. We provide an example of this pattern using the
       <b>Tss2_Tcti_Tabrmd_Init</b>() function in the section titled <b>EXAMPLE.</b>

       The <u>conf</u> parameter is a string of key / value pairs describing the desired connection properties for  the
       TCTI.  If  the  caller  provides a NULL <u>conf</u> string then defaults that correspond to the defaults for the
       tpm2-abrmd   (8)   will   be   used.   This   is   the   same   as    providing    the    <u>conf</u>    string:
       "bus_name=com.intel.tss2.Tabrmd,bus_type=system".  Keys  and  values  are  separated by the '=' character
       while each key / value pair is separated by the ',' character. The supported keys and values are:

       • <b>bus_name</b> - the dbus name owned by the daemon. See the tpm2-abrmd (8) <u>--dbus-name</u> option.

       • <b>bus_type</b> - the bus type used for the connection with the daemon. The value associated with this key may
         be either "system" or "session".

       Once initialized, the TCTI context returned exposes the Trusted Computing Group (TCG) defined API for the
       lowest level communication with the TPM.  Using this API the caller can exchange (send  /  receive)  TPM2
       command  and  response  buffers  with  the  <b>tpm2-abrmd</b> <b>(8).</b>  In nearly all cases however, the caller will
       initialize a context using this function before passing the context to a higher level API like the System
       API (SAPI), and then never touch it again.

       For a more thorough discussion of the TCTI API see the “TSS System Level API and TPM Command Transmission
       Interface       Specification”       specification       as       published       by       the       TCG:
       https://trustedcomputinggroup.org/tss-system-level-api-tpm-command-transmission-interface-specification/

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       A  successful  call  to  <b>Tss2_Tcti_Tabrmd_Init</b>()  will return <b>TSS2_RC_SUCCESS.</b>  An unsuccessful call will
       produce a response code described in section <b>ERRORS.</b>

</pre><h4><b>ERRORS</b></h4><pre>
       <b>TSS2_TCTI_RC_BAD_VALUE</b> is returned if the <u>size</u> parameter is NULL.

       <b>TSS2_TCTI_RC_NO_CONNECTION</b> is returned when communication with the tpm2-abrmd (8) fails.

       <b>TSS2_TCTI_RC_GENERAL_FAILURE</b> is returned for all other errors.

</pre><h4><b>EXAMPLE</b></h4><pre>
       #include &lt;<a href="file:/usr/include/inttypes.h">inttypes.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;tcti/tcti-tabrmd.h&gt;

       TSS2_RC rc;
       TSS2_TCTI_CONTEXT *tcti_context;
       size_t size;

       rc = tss2_tcti_tabrmd_init (NULL, &amp;size, NULL,
       if (rc != TSS2_RC_SUCCESS) {
           fprintf (stderr, "Failed to get allocation size for tabrmd TCTI "
                    " context: 0x%" PRIx32 "0, rc);
           exit (EXIT_FAILURE);
       }
       tcti_context = calloc (1, size);
       if (tcti_context == NULL) {
           fprintf (stderr, "Allocation for TCTI context failed: %s0,
                    strerror (errno));
           exit (EXIT_FAILURE);
       }
       rc = tss2_tcti_tabrmd_init (tcti_context, &amp;size, NULL);
       if (rc != TSS2_RC_SUCCESS) {
           fprintf (stderr, "Failed to initialize tabrmd TCTI context: "
                    "0x%" PRIx32 "0, rc);
           free (tcti_context);
           exit (EXIT_FAILURE);
       }
       exit (EXIT_SUCCESS);

</pre><h4><b>AUTHOR</b></h4><pre>
       Philip Tricca &lt;<a href="mailto:philip.b.tricca@intel.com">philip.b.tricca@intel.com</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/tcti-tabrmd.7.html">tcti-tabrmd</a></b>(7), <b><a href="../man8/tpm2-abrmd.8.html">tpm2-abrmd</a></b>(8)

</pre><h4><b>COLOPHON</b></h4><pre>
       This page is part of the 3.0.0 release of Intel's TPM2 Access Broker  &amp;  Resource  Management  Daemon.  A
       description  of the project, information about reporting bugs, and the latest version of this page can be
       found at https://github.com/01org/tpm2-abrmd/.

Intel                                              APRIL 2018                           <u><a href="../man3/TSS2_TCTI_TABRMD_INIT.3.html">TSS2_TCTI_TABRMD_INIT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>