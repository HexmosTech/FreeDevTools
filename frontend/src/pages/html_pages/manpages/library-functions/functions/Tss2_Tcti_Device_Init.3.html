<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tss2_Tcti_Device_init - Initialization function for the device TCTI library.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtss2-doc">libtss2-doc_4.1.3-1.2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tss2_Tcti_Device_init - Initialization function for the device TCTI library.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcti/tcti_device.h&gt;</b>

       <b>TSS2_RC</b> <b>Tss2_Tcti_Device_Init</b> <b>(TSS2_TCTI_CONTEXT</b> <u>*tctiContext</u><b>,</b> <b>size_t</b> <u>*size</u><b>,</b> <b>const</b> <b>char</b> <u>*conf</u><b>);</b>

       The  <b>Tss2_Tcti_Device_Init</b>()  function initializes a TCTI context used to communicate with the TPM device
       driver.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tss2_Tcti_Device_Init</b>() attempts to initialize a caller allocated <u>tctiContext</u> of size <u>size</u>  .  Since  the
       <u>tctiContext</u>  must  be  a  caller allocated buffer, the caller needs to know the size required by the TCTI
       library. The minimum size of this context can be discovered by providing <b>NULL</b> for the <u>tctiContext</u>  and  a
       non-  <b>NULL</b>  <u>size</u>  parameter.  The  initialization function will then populate the <u>size</u> parameter with the
       minimum size of the <u>tctiContext</u> buffer. The caller must then allocate a buffer of this size  (or  larger)
       and  call  <b>Tss2_Tcti_Device_Init</b>  <b>()</b> again providing the newly allocated <u>tctiContext</u> and the size of this
       context in the <u>size</u> parameter. This pattern is common to all TCTI initialization functions. We provide an
       example of this pattern using the <b>Tss2_Tcti_Device_Init</b>() function in the section titled <b>EXAMPLE.</b>

       The <u>conf</u> parameter is a C  string.  If  this  string  is  <b>NULL</b>  then  the  library  will  use  a  default
       configuration  string  for the caller.  Alternatively, the caller may provide a configuration string that
       must contain the path to the device node exposed by the TPM device driver.

       Once initialized, the TCTI context returned exposes the Trusted Computing Group (TCG) defined API for the
       lowest level communication with the TPM.  Using this API the caller can exchange (send  /  receive)  TPM2
       command  and  response  buffers  with the TPM device driver. In nearly all cases however, the caller will
       initialize a context using this function before passing the context to a higher level API like the System
       API (SAPI), and then never touch it again.

       TCG TSS 2.0 TPM Command Transmission Interface (TCTI) API Specification

       For a more thorough discussion of the TCTI API see the “TCG TSS 2.0 TPM  Command  Transmission  Interface
       (TCTI)         API         Specification”         as         published         by         the        TCG:
       https://trustedcomputinggroup.org/wp-content/uploads/TSS_TCTI_Version-1.0_Revision-05_Review_END030918.pdf

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       A successful call to <b>Tss2_Tcti_Device_Init</b>() will return  <b>TSS2_RC_SUCCESS.</b>   An  unsuccessful  call  will
       produce a response code described in section <b>ERRORS.</b>

</pre><h4><b>ERRORS</b></h4><pre>
       <b>TSS2_TCTI_RC_BAD_VALUE</b>     is     returned    if    any    parameters    contain    unexpected    values.
       <b>TSS2_TCTI_RC_BAD_REFERENCE</b>  is  returned  if  any  parameters  are  NULL  when  they   should   not   be.
       <b>TSS2_TCTI_RC_BAD_CONTEXT</b> is returned if the size of the provided <u>tctiContext</u> is insufficient.

</pre><h4><b>EXAMPLE</b></h4><pre>
       TCTI initialization fragment:

       #include &lt;<a href="file:/usr/include/inttypes.h">inttypes.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;tcti/tcti_device.h&gt;

       TSS2_RC rc;
       TSS2_TCTI_CONTEXT *tcti_context;
       size_t size;
       char *conf = "/dev/tpm0",

       rc = Tss2_Tcti_Device_Init (NULL, &amp;size, NULL);
       if (rc != TSS2_RC_SUCCESS) {
           fprintf (stderr, "Failed to get allocation size for device TCTI "
                    " context: 0x%" PRIx32 "0, rc);
           exit (EXIT_FAILURE);
       }
       tcti_context = calloc (1, size);
       if (tcti_context == NULL) {
           fprintf (stderr, "Allocation for TCTI context failed: %s0,
                    strerror (errno));
           exit (EXIT_FAILURE);
       }
       rc = Tss2_Tcti_Device_Init (&amp;tcti_context, &amp;size, &amp;conf);
       if (rc != TSS2_RC_SUCCESS) {
           fprintf (stderr, "Failed to initialize device TCTI context: "
                    "0x%" PRIx32 "0, rc);
           free (tcti_context);
           exit (EXIT_FAILURE);
       }
       exit (EXIT_SUCCESS);

</pre><h4><b>AUTHOR</b></h4><pre>
       TPM2 Software Project &lt;https://github.com/tpm2-software/tpm2-tss&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/Tss2_Tcti_Device_Init.3.html">Tss2_Tcti_Device_Init</a></b>(3), <b><a href="../man3/Tss2_Tcti_Socket_Init.3.html">Tss2_Tcti_Socket_Init</a></b>(3), <b><a href="../man3/Tss2_TctiLdr_Initialize.3.html">Tss2_TctiLdr_Initialize</a></b>(3), <b><a href="../man3/Tss2_TctiLdr_Finalize.3.html">Tss2_TctiLdr_Finalize</a></b>(3),
       <b><a href="../man7/tcti-device.7.html">tcti-device</a></b>(7), <b><a href="../man7/tcti-socket.7.html">tcti-socket</a></b>(7), <b><a href="../man7/tcti-tabrmd.7.html">tcti-tabrmd</a></b>(7), <b><a href="../man8/tpm2-abrmd.8.html">tpm2-abrmd</a></b>(8)

</pre><h4><b>COLOPHON</b></h4><pre>
       This page is part of release 4.1.3 of Open Source implementation of the TCG TPM2 Software Stack (TSS2). A
       description  of the project, information about reporting bugs, and the latest version of this page can be
       found at https://github.com/tpm2-software/tpm2-tss/.

TPM2 Software Stack                                MARCH 2018                           <u><a href="../man3/Tss2_Tcti_Device_Init.3.html">Tss2_Tcti_Device_Init</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>