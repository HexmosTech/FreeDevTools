<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tracefs_instance_get_name, tracefs_instance_get_trace_dir, tracefs_instances_walk,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtracefs-doc">libtracefs-doc_1.8.1-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tracefs_instance_get_name, tracefs_instance_get_trace_dir, tracefs_instances_walk,
       tracefs_instance_exists, tracefs_instance_get_buffer_size, tracefs_instance_set_buffer_size,
       tracefs_instance_get_buffer_percent, tracefs_instance_set_buffer_percent - Helper functions for working
       with tracing instances.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tracefs.h&gt;</b>

       const char *<b>tracefs_instance_get_name</b>(struct tracefs_instance *<u>instance</u>);
       const char *<b>tracefs_instance_get_trace_dir</b>(struct tracefs_instance *<u>instance</u>);
       int <b>tracefs_instances_walk</b>(int (*<u>callback</u>)(const char *, void *), void *<u>context)</u>;
       bool <b>tracefs_instance_exists</b>(const char *<u>name</u>);
       size_t <b>tracefs_instance_get_buffer_size</b>(struct tracefs_instance *<u>instance</u>, int <u>cpu</u>);
       int <b>tracefs_instance_set_buffer_size</b>(struct tracefs_instance *<u>instance</u>, size_t <u>size</u>, int <u>cpu</u>);
       int <b>tracefs_instance_get_buffer_percent</b>(struct tracefs_instance *<u>instance</u>);
       int <b>tracefs_instance_set_buffer_percent</b>(struct tracefs_instance *<u>instance</u>, int <u>val</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Helper functions for working with trace instances.

       The <b>tracefs_instance_get_name()</b> function returns the name of the given <u>instance</u>. Note that the top
       instance has no name, the function returns NULL for it.

       The <b>tracefs_instance_get_trace_dir()</b> function returns the tracing directory, where the given <u>instance</u> is
       configured.

       The <b>tracefs_instances_walk()</b> function walks through all configured tracing instances in the system and
       calls <u>callback</u> for each one of them. The <u>context</u> argument is passed to the <u>callback</u>, together with the
       instance name. If the <u>callback</u> returns non-zero, the iteration stops. Note, the <u>callback</u> is not called
       for the top top instance.

       The <b>tracefs_instance_exists()</b> function checks if an instance with the given <u>name</u> exists in the system.

       The <b>tracefs_instace_get_buffer_size()</b> returns the size of the ring buffer. If <u>cpu</u> is negative, it returns
       the total size of all the per CPU ring buffers, otherwise it returns the size of the per CPU ring buffer
       for <u>cpu</u>.

       The <b>tracefs_instance_set_buffer_size()</b> function sets the size of the ring buffer. If <u>cpu</u> is negative,
       then it sets all the per CPU ring buffers to <u>size</u> (note the total size is the number of CPUs * <u>size</u>). If
       <u>cpu</u> is specified, then it only sets the size of the per CPU ring buffer.

       The <b>tracefs_instance_set_buffer_percent()</b> sets the buffer percent value of the tracing ring buffer for
       <u>instance</u> or the top level buffer if <u>instance</u> is NULL. The buffer percent decides when readers on
       <b><a href="../man3/tracefs_cpu_read.3.html">tracefs_cpu_read</a></b>(3), <b><a href="../man3/tracefs_cpu_buffered_read.3.html">tracefs_cpu_buffered_read</a></b>(3), <b><a href="../man3/tracefs_cpu_write.3.html">tracefs_cpu_write</a></b>(3) and <b><a href="../man3/tracefs_cpu_pipe.3.html">tracefs_cpu_pipe</a></b>(3) will
       block when O_NONBLOCK is not set. The value of <u>val</u> must be between 0 and 100, where:

             0   - block until there’s any data in the ring buffer
             1   - block until 1% of the ring buffer sub-buffers are filled
             50  - block until 50% of the ring buffer sub-buffers are filled
             100 - block until the entire ring buffer is filled

       Note, any number from 0 to 100 can be used where it is the percentage of the ring buffer that must be
       filled before a blocked reader will be notified that there’s data to be retrieved.

       The <b>tracefs_instance_get_buffer_percent()</b> retrieves the current buffer percent setting of the tracing
       ring buffer for <u>instance</u> or the top level buffer if <u>instance</u> is NULL.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <b>tracefs_instance_get_name()</b> returns a string or NULL in case of the top instance. The returned string
       must <u>not</u> be freed.

       The <b>tracefs_instance_get_trace_dir()</b> returns a string or NULL in case of an error. The returned string
       must <u>not</u> be freed.

       The <b>tracefs_instances_walk()</b> function returns 0, if all instances were iterated, 1 if the iteration was
       stopped by the <u>callback</u>, or -1 in case of an error.

       The <b>tracefs_instance_exists()</b> returns true if an instance with the given <u>name</u> exists in the system or
       false otherwise.

       The <b>tracefs_instance_get_buffer_size()</b> returns the size of the ring buffer depending on the <u>cpu</u> value
       passed in, or -1 on error.

       The <b>tracefs_instance_set_buffer_size()</b> returns zero on success and -1 on error.

</pre><h4><b>EXAMPLE</b></h4><pre>
           #include &lt;tracefs.h&gt;

           struct tracefs_instance *inst;
           ....
           char *name = tracefs_instance_get_name(inst);
                   if(name) {
                           /* Got name of the instance */
                   }
           char *dir = tracefs_instance_get_trace_dir(inst);
                   if(dir) {
                           /* Got tracing directory of the instance */
                   }
           ...
           static int instance_walk(char *name, void *context)
           {
                   /* Got instance with name */
                   return 0;
           }
           ...
                   if (tracefs_instances_walk(instance_walk, NULL) &lt; 0) {
                           /* Error walking through the instances */
                   }
           ...
                   if (tracefs_instance_exists("foo")) {
                           /* There is instance with name foo in the system */
                   } else {
                           /* There is no instance with name foo in the system */
                   }

</pre><h4><b>FILES</b></h4><pre>
           <b>tracefs.h</b>
                   Header file to include in order to have access to the library APIs.
           <b>-ltracefs</b>
                   Linker switch to add when building a program that uses the library.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/libtracefs.3.html">libtracefs</a></b>(3), <b><a href="../man3/libtraceevent.3.html">libtraceevent</a></b>(3), <b><a href="../man1/trace-cmd.1.html">trace-cmd</a></b>(1)

</pre><h4><b>AUTHOR</b></h4><pre>
           <b>Steven</b> <b>Rostedt</b> &lt;<b><a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a></b>[1]&gt;
           <b>Tzvetomir</b> <b>Stoyanov</b> &lt;<b><a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a></b>[2]&gt;

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs to &lt;<b><a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a></b>[3]&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       libtracefs is Free Software licensed under the GNU LGPL 2.1

</pre><h4><b>RESOURCES</b></h4><pre>
       <b>https://git.kernel.org/pub/scm/libs/libtrace/libtracefs.git/</b>

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2020 VMware, Inc. Free use of this software is granted under the terms of the GNU Public
       License (GPL).

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:rostedt@goodmis.org">rostedt@goodmis.org</a>
           <a href="mailto:rostedt@goodmis.org">mailto:rostedt@goodmis.org</a>

        2. <a href="mailto:tz.stoyanov@gmail.com">tz.stoyanov@gmail.com</a>
           <a href="mailto:tz.stoyanov@gmail.com">mailto:tz.stoyanov@gmail.com</a>

        3. <a href="mailto:linux-trace-devel@vger.kernel.org">linux-trace-devel@vger.kernel.org</a>
           <a href="mailto:linux-trace-devel@vger.kernel.org">mailto:linux-trace-devel@vger.kernel.org</a>

libtracefs 1.8.1                                   06/05/2025                                      <u><a href="../man3/LIBTRACEFS.3.html">LIBTRACEFS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>