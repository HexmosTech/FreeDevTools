<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASN1_TIME_set, ASN1_UTCTIME_set, ASN1_GENERALIZEDTIME_set, ASN1_TIME_adj, ASN1_UTCTIME_adj,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ASN1_TIME_set, ASN1_UTCTIME_set, ASN1_GENERALIZEDTIME_set, ASN1_TIME_adj, ASN1_UTCTIME_adj,
       ASN1_GENERALIZEDTIME_adj, ASN1_TIME_check, ASN1_UTCTIME_check, ASN1_GENERALIZEDTIME_check,
       ASN1_TIME_set_string, ASN1_UTCTIME_set_string, ASN1_GENERALIZEDTIME_set_string,
       ASN1_TIME_set_string_X509, ASN1_TIME_normalize, ASN1_TIME_to_tm, ASN1_TIME_print, ASN1_TIME_print_ex,
       ASN1_UTCTIME_print, ASN1_GENERALIZEDTIME_print, ASN1_TIME_diff, ASN1_TIME_cmp_time_t,
       ASN1_UTCTIME_cmp_time_t, ASN1_TIME_compare, ASN1_TIME_to_generalizedtime, ASN1_TIME_dup,
       ASN1_UTCTIME_dup, ASN1_GENERALIZEDTIME_dup - ASN.1 Time functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
        ASN1_TIME *ASN1_TIME_set(ASN1_TIME *s, time_t t);
        ASN1_UTCTIME *ASN1_UTCTIME_set(ASN1_UTCTIME *s, time_t t);
        ASN1_GENERALIZEDTIME *ASN1_GENERALIZEDTIME_set(ASN1_GENERALIZEDTIME *s,
                                                       time_t t);

        ASN1_TIME *ASN1_TIME_adj(ASN1_TIME *s, time_t t, int offset_day,
                                 long offset_sec);
        ASN1_UTCTIME *ASN1_UTCTIME_adj(ASN1_UTCTIME *s, time_t t,
                                       int offset_day, long offset_sec);
        ASN1_GENERALIZEDTIME *ASN1_GENERALIZEDTIME_adj(ASN1_GENERALIZEDTIME *s,
                                                       time_t t, int offset_day,
                                                       long offset_sec);

        int ASN1_TIME_set_string(ASN1_TIME *s, const char *str);
        int ASN1_TIME_set_string_X509(ASN1_TIME *s, const char *str);
        int ASN1_UTCTIME_set_string(ASN1_UTCTIME *s, const char *str);
        int ASN1_GENERALIZEDTIME_set_string(ASN1_GENERALIZEDTIME *s,
                                            const char *str);

        int ASN1_TIME_normalize(ASN1_TIME *s);

        int ASN1_TIME_check(const ASN1_TIME *t);
        int ASN1_UTCTIME_check(const ASN1_UTCTIME *t);
        int ASN1_GENERALIZEDTIME_check(const ASN1_GENERALIZEDTIME *t);

        int ASN1_TIME_print(BIO *b, const ASN1_TIME *s);
        int ASN1_TIME_print_ex(BIO *bp, const ASN1_TIME *tm, unsigned long flags);
        int ASN1_UTCTIME_print(BIO *b, const ASN1_UTCTIME *s);
        int ASN1_GENERALIZEDTIME_print(BIO *b, const ASN1_GENERALIZEDTIME *s);

        int ASN1_TIME_to_tm(const ASN1_TIME *s, struct tm *tm);
        int ASN1_TIME_diff(int *pday, int *psec, const ASN1_TIME *from,
                           const ASN1_TIME *to);

        int ASN1_TIME_cmp_time_t(const ASN1_TIME *s, time_t t);
        int ASN1_UTCTIME_cmp_time_t(const ASN1_UTCTIME *s, time_t t);

        int ASN1_TIME_compare(const ASN1_TIME *a, const ASN1_TIME *b);

        ASN1_GENERALIZEDTIME *ASN1_TIME_to_generalizedtime(ASN1_TIME *t,
                                                           ASN1_GENERALIZEDTIME **out);

        ASN1_TIME *ASN1_TIME_dup(const ASN1_TIME *t);
        ASN1_UTCTIME *ASN1_UTCTIME_dup(const ASN1_UTCTIME *t);
        ASN1_GENERALIZEDTIME *ASN1_GENERALIZEDTIME_dup(const ASN1_GENERALIZEDTIME *t);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>ASN1_TIME_set()</b>, <b>ASN1_UTCTIME_set()</b> and <b>ASN1_GENERALIZEDTIME_set()</b> functions set the structure <u>s</u> to
       the time represented by the time_t value <u>t</u>. If <u>s</u> is NULL a new time structure is allocated and returned.

       The <b>ASN1_TIME_adj()</b>, <b>ASN1_UTCTIME_adj()</b> and <b>ASN1_GENERALIZEDTIME_adj()</b> functions set the time structure <u>s</u>
       to the time represented by the time <u>offset_day</u> and <u>offset_sec</u> after the time_t value <u>t</u>.  The values of
       <u>offset_day</u> or <u>offset_sec</u> can be negative to set a time before <u>t</u>. The <u>offset_sec</u> value can also exceed the
       number of seconds in a day. If <u>s</u> is NULL a new structure is allocated and returned.

       The <b>ASN1_TIME_set_string()</b>, <b>ASN1_UTCTIME_set_string()</b> and <b>ASN1_GENERALIZEDTIME_set_string()</b> functions set
       the time structure <u>s</u> to the time represented by string <u>str</u> which must be in appropriate ASN.1 time format
       (for example YYMMDDHHMMSSZ or YYYYMMDDHHMMSSZ). If <u>s</u> is NULL this function performs a format check on <u>str</u>
       only. The string <u>str</u> is copied into <u>s</u>.

       <b>ASN1_TIME_set_string_X509()</b> sets <b>ASN1_TIME</b> structure <u>s</u> to the time represented by string <u>str</u> which must
       be in appropriate time format that RFC 5280 requires, which means it only allows YYMMDDHHMMSSZ and
       YYYYMMDDHHMMSSZ (leap second is rejected), all other ASN.1 time format are not allowed. If <u>s</u> is NULL this
       function performs a format check on <u>str</u> only.

       The <b>ASN1_TIME_normalize()</b> function converts an <b>ASN1_GENERALIZEDTIME</b> or <b>ASN1_UTCTIME</b> into a time value
       that can be used in a certificate. It should be used after the <b>ASN1_TIME_set_string()</b> functions and
       before <b>ASN1_TIME_print()</b> functions to get consistent (i.e. GMT) results.

       The <b>ASN1_TIME_check()</b>, <b>ASN1_UTCTIME_check()</b> and <b>ASN1_GENERALIZEDTIME_check()</b> functions check the syntax
       of the time structure <u>s</u>.

       The <b>ASN1_TIME_print()</b>, <b>ASN1_UTCTIME_print()</b> and <b>ASN1_GENERALIZEDTIME_print()</b> functions print the time
       structure <u>s</u> to BIO <u>b</u> in human readable format. It will be of the format MMM DD HH:MM:SS[.s*] YYYY GMT,
       for example "Feb  3 00:55:52 2015 GMT", which does not include a newline.  If the time structure has
       invalid format it prints out "Bad time value" and returns an error. The output for generalized time may
       include a fractional part following the second.

       <b>ASN1_TIME_print_ex()</b> provides <u>flags</u> to specify the output format of the datetime. This can be either
       <b>ASN1_DTFLGS_RFC822</b> or <b>ASN1_DTFLGS_ISO8601</b>.

       <b>ASN1_TIME_to_tm()</b> converts the time <u>s</u> to the standard <u>tm</u> structure.  If <u>s</u> is NULL, then the current time
       is converted. The output time is GMT.  The <u>tm_sec</u>, <u>tm_min</u>, <u>tm_hour</u>, <u>tm_mday</u>, <u>tm_wday</u>, <u>tm_yday</u>, <u>tm_mon</u> and
       <u>tm_year</u> fields of <u>tm</u> structure are set to proper values, whereas all other fields are set to 0. If <u>tm</u> is
       NULL this function performs a format check on <u>s</u> only. If <u>s</u> is in Generalized format with fractional
       seconds, e.g. YYYYMMDDHHMMSS.SSSZ, the fractional seconds will be lost while converting <u>s</u> to <u>tm</u>
       structure.

       <b>ASN1_TIME_diff()</b> sets <u>*pday</u> and <u>*psec</u> to the time difference between <u>from</u> and <u>to</u>. If <u>to</u> represents a time
       later than <u>from</u> then one or both (depending on the time difference) of <u>*pday</u> and <u>*psec</u> will be positive.
       If <u>to</u> represents a time earlier than <u>from</u> then one or both of <u>*pday</u> and <u>*psec</u> will be negative. If <u>to</u> and
       <u>from</u> represent the same time then <u>*pday</u> and <u>*psec</u> will both be zero.  If both <u>*pday</u> and <u>*psec</u> are nonzero
       they will always have the same sign. The value of <u>*psec</u> will always be less than the number of seconds in
       a day. If <u>from</u> or <u>to</u> is NULL the current time is used.

       The <b>ASN1_TIME_cmp_time_t()</b> and <b>ASN1_UTCTIME_cmp_time_t()</b> functions compare the two times represented by
       the time structure <u>s</u> and the time_t <u>t</u>.

       The <b>ASN1_TIME_compare()</b> function compares the two times represented by the time structures <u>a</u> and <u>b</u>.

       The <b>ASN1_TIME_to_generalizedtime()</b> function converts an <b>ASN1_TIME</b> to an <b>ASN1_GENERALIZEDTIME</b>, regardless
       of year. If either <u>out</u> or <u>*out</u> are NULL, then a new object is allocated and must be freed after use.

       The <b>ASN1_TIME_dup()</b>, <b>ASN1_UTCTIME_dup()</b> and <b>ASN1_GENERALIZEDTIME_dup()</b> functions duplicate the time
       structure <u>t</u> and return the duplicated result correspondingly.

</pre><h4><b>NOTES</b></h4><pre>
       The <b>ASN1_TIME</b> structure corresponds to the ASN.1 structure <b>Time</b> defined in RFC5280 et al. The time
       setting functions obey the rules outlined in RFC5280: if the date can be represented by UTCTime it is
       used, else GeneralizedTime is used.

       The <b>ASN1_TIME</b>, <b>ASN1_UTCTIME</b> and <b>ASN1_GENERALIZEDTIME</b> structures are represented as an <b>ASN1_STRING</b>
       internally and can be freed up using <b>ASN1_STRING_free()</b>.

       The <b>ASN1_TIME</b> structure can represent years from 0000 to 9999 but no attempt is made to correct ancient
       calendar changes (for example from Julian to Gregorian calendars).

       <b>ASN1_UTCTIME</b> is limited to a year range of 1950 through 2049.

       Some applications add offset times directly to a time_t value and pass the results to <b>ASN1_TIME_set()</b> (or
       equivalent). This can cause problems as the time_t value can overflow on some systems resulting in
       unexpected results.  New applications should use <b>ASN1_TIME_adj()</b> instead and pass the offset value in the
       <u>offset_sec</u> and <u>offset_day</u> parameters instead of directly manipulating a time_t value.

       <b>ASN1_TIME_adj()</b> may change the type from <b>ASN1_GENERALIZEDTIME</b> to <b>ASN1_UTCTIME</b>, or vice versa, based on
       the resulting year.  <b>ASN1_GENERALIZEDTIME_adj()</b> and <b>ASN1_UTCTIME_adj()</b> will not modify the type of the
       return structure.

       It is recommended that functions starting with <b>ASN1_TIME</b> be used instead of those starting with
       <b>ASN1_UTCTIME</b> or <b>ASN1_GENERALIZEDTIME</b>. The functions starting with <b>ASN1_UTCTIME</b> and <b>ASN1_GENERALIZEDTIME</b>
       act only on that specific time format. The functions starting with <b>ASN1_TIME</b> will operate on either
       format.

       Users familiar with RFC822 should note that when specifying the flag <b>ASN1_DTFLGS_RFC822</b> the year will be
       formatted as documented above, i.e., using 4 digits, not 2 as specified in RFC822.

</pre><h4><b>BUGS</b></h4><pre>
       <b>ASN1_TIME_print()</b>, <b>ASN1_UTCTIME_print()</b> and <b>ASN1_GENERALIZEDTIME_print()</b> do not print out the timezone:
       it either prints out "GMT" or nothing. But all certificates complying with RFC5280 et al use GMT anyway.

       <b>ASN1_TIME_print()</b>, <b>ASN1_TIME_print_ex()</b>, <b>ASN1_UTCTIME_print()</b> and <b>ASN1_GENERALIZEDTIME_print()</b> do not
       distinguish if they fail because of an I/O error or invalid time format.

       Use the <b>ASN1_TIME_normalize()</b> function to normalize the time value before printing to get GMT results.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>ASN1_TIME_set()</b>, <b>ASN1_UTCTIME_set()</b>, <b>ASN1_GENERALIZEDTIME_set()</b>, <b>ASN1_TIME_adj()</b>, <b>ASN1_UTCTIME_adj()</b> and
       <b>ASN1_GENERALIZEDTIME_set()</b> return a pointer to a time structure or NULL if an error occurred.

       <b>ASN1_TIME_set_string()</b>, <b>ASN1_UTCTIME_set_string()</b>, <b>ASN1_GENERALIZEDTIME_set_string()</b> and
       <b>ASN1_TIME_set_string_X509()</b> return 1 if the time value is successfully set and 0 otherwise.

       <b>ASN1_TIME_normalize()</b> returns 1 on success, and 0 on error.

       <b>ASN1_TIME_check()</b>, ASN1_UTCTIME_check and <b>ASN1_GENERALIZEDTIME_check()</b> return 1 if the structure is
       syntactically correct and 0 otherwise.

       <b>ASN1_TIME_print()</b>, <b>ASN1_UTCTIME_print()</b> and <b>ASN1_GENERALIZEDTIME_print()</b> return 1 if the time is
       successfully printed out and 0 if an I/O error occurred an error occurred (I/O error or invalid time
       format).

       <b>ASN1_TIME_to_tm()</b> returns 1 if the time is successfully parsed and 0 if an error occurred (invalid time
       format).

       <b>ASN1_TIME_diff()</b> returns 1 for success and 0 for failure. It can fail if the passed-in time structure has
       invalid syntax, for example.

       <b>ASN1_TIME_cmp_time_t()</b> and <b>ASN1_UTCTIME_cmp_time_t()</b> return -1 if <u>s</u> is before <u>t</u>, 0 if <u>s</u> equals <u>t</u>, or 1 if
       <u>s</u> is after <u>t</u>. -2 is returned on error.

       <b>ASN1_TIME_compare()</b> returns -1 if <u>a</u> is before <u>b</u>, 0 if <u>a</u> equals <u>b</u>, or 1 if <u>a</u> is after <u>b</u>. -2 is returned on
       error.

       <b>ASN1_TIME_to_generalizedtime()</b> returns a pointer to the appropriate time structure on success or NULL if
       an error occurred.

       <b>ASN1_TIME_dup()</b>, <b>ASN1_UTCTIME_dup()</b> and <b>ASN1_GENERALIZEDTIME_dup()</b> return a pointer to a time structure
       or NULL if an error occurred.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Set a time structure to one hour after the current time and print it out:

        #include &lt;<a href="file:/usr/include/time.h">time.h</a>&gt;
        #include &lt;openssl/asn1.h&gt;

        ASN1_TIME *tm;
        time_t t;
        BIO *b;

        t = time(NULL);
        tm = ASN1_TIME_adj(NULL, t, 0, 60 * 60);
        b = BIO_new_fp(stdout, BIO_NOCLOSE);
        ASN1_TIME_print(b, tm);
        ASN1_STRING_free(tm);
        BIO_free(b);

       Determine if one time is later or sooner than the current time:

        int day, sec;

        if (!ASN1_TIME_diff(&amp;day, &amp;sec, NULL, to))
            /* Invalid time format */

        if (day &gt; 0 || sec &gt; 0)
            printf("Later\n");
        else if (day &lt; 0 || sec &lt; 0)
            printf("Sooner\n");
        else
            printf("Same\n");

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>ASN1_TIME_to_tm()</b> function was added in OpenSSL 1.1.1.  The <b>ASN1_TIME_set_string_X509()</b> function was
       added in OpenSSL 1.1.1.  The <b>ASN1_TIME_normalize()</b> function was added in OpenSSL 1.1.1.  The
       <b>ASN1_TIME_cmp_time_t()</b> function was added in OpenSSL 1.1.1.  The <b>ASN1_TIME_compare()</b> function was added
       in OpenSSL 1.1.1.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2015-2025 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain a copy in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                                <u><a href="../man3SSL/ASN1_TIME_SET.3SSL.html">ASN1_TIME_SET</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>