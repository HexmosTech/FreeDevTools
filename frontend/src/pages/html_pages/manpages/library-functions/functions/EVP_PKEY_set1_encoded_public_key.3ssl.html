<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVP_PKEY_set1_encoded_public_key, EVP_PKEY_get1_encoded_public_key, EVP_PKEY_set1_tls_encodedpoint,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       EVP_PKEY_set1_encoded_public_key, EVP_PKEY_get1_encoded_public_key, EVP_PKEY_set1_tls_encodedpoint,
       EVP_PKEY_get1_tls_encodedpoint - functions to set and get public key data within an EVP_PKEY

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/evp.h&gt;

        int EVP_PKEY_set1_encoded_public_key(EVP_PKEY *pkey,
                                             const unsigned char *pub, size_t publen);

        size_t EVP_PKEY_get1_encoded_public_key(EVP_PKEY *pkey, unsigned char **ppub);

       The following functions have been deprecated since OpenSSL 3.0, and can be hidden entirely by defining
       <b>OPENSSL_API_COMPAT</b> with a suitable version value, see <b><a href="../man7/openssl_user_macros.7.html">openssl_user_macros</a></b>(7):

        int EVP_PKEY_set1_tls_encodedpoint(EVP_PKEY *pkey,
                                           const unsigned char *pt, size_t ptlen);

        size_t EVP_PKEY_get1_tls_encodedpoint(EVP_PKEY *pkey, unsigned char **ppt);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>EVP_PKEY_set1_encoded_public_key()</b> can be used to set the public key value within an existing EVP_PKEY
       object, which does not yet have either a public or private key assigned.  For the built-in OpenSSL
       algorithms this currently only works for those that support key exchange or key encapsulation.
       Parameters are not set as part of this operation, so typically an application will create an EVP_PKEY
       first, set the parameters on it, and then call this function.  For example setting the parameters might
       be done using <b><a href="../man3/EVP_PKEY_copy_parameters.3.html">EVP_PKEY_copy_parameters</a></b>(3).

       The format for the encoded public key will depend on the algorithm in use. For DH it should be encoded as
       a positive integer in big-endian form. For EC is should be a point conforming to Sec. 2.3.4 of the SECG
       SEC 1 ("Elliptic Curve Cryptography") standard. For <b>X25519</b> and <b>X448</b> it should be encoded in the format
       defined by RFC7748.  For <b>ML-KEM-512</b>, <b>ML-KEM-768</b> and <b>ML-KEM-1024</b>, this is the public key format defined in
       <b>FIPS</b> <b>203</b> (the 12-bit per-coefficient encoded public <u>t</u> vector and 32-byte matrix seed <u>rho</u>).

       The key to be updated is supplied in <b>pkey</b>. The buffer containing the encoded key is pointed to be <b>pub</b>.
       The length of the buffer is supplied in <b>publen</b>.

       <b>EVP_PKEY_get1_encoded_public_key()</b> does the equivalent operation except that the encoded public key is
       returned to the application. The key containing the public key data is supplied in <b>pkey</b>. A buffer
       containing the encoded key will be allocated and stored in <b>*ppub</b>. The length of the encoded public key is
       returned by the function. The application is responsible for freeing the allocated buffer.

       The macro <b>EVP_PKEY_set1_tls_encodedpoint()</b> is deprecated and simply calls
       <b>EVP_PKEY_set1_encoded_public_key()</b> with all the same arguments. New applications should use
       <b>EVP_PKEY_set1_encoded_public_key()</b> instead.

       The macro <b>EVP_PKEY_get1_tls_encodedpoint()</b> is deprecated and simply calls
       <b>EVP_PKEY_get1_encoded_public_key()</b> with all the same arguments. New applications should use
       <b>EVP_PKEY_get1_encoded_public_key()</b> instead.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>EVP_PKEY_set1_encoded_public_key()</b> returns 1 for success and 0 or a negative value for failure.

       <b>EVP_PKEY_get1_encoded_public_key()</b> returns the length of the encoded key or 0 for failure.

</pre><h4><b>EXAMPLES</b></h4><pre>
       See <b><a href="../man3/EVP_PKEY_derive_init.3.html">EVP_PKEY_derive_init</a></b>(3) and <b><a href="../man3/EVP_PKEY_derive.3.html">EVP_PKEY_derive</a></b>(3) for information about performing a key exchange
       operation.

   <b>Set</b> <b>up</b> <b>a</b> <b>peer's</b> <b>EVP_PKEY</b> <b>ready</b> <b>for</b> <b>a</b> <b>key</b> <b>exchange</b> <b>operation</b>
        #include &lt;openssl/evp.h&gt;

        int exchange(EVP_PKEY *ourkey, unsigned char *peer_pub, size_t peer_pub_len)
        {
            EVP_PKEY *peerkey = EVP_PKEY_new();

            if (peerkey == NULL || EVP_PKEY_copy_parameters(peerkey, ourkey) &lt;= 0)
                return 0;

            if (EVP_PKEY_set1_encoded_public_key(peerkey, peer_pub,
                                                 peer_pub_len) &lt;= 0)
                return 0;

            /* Do the key exchange here */

            EVP_PKEY_free(peerkey);

            return 1;
        }

   <b>Get</b> <b>an</b> <b>encoded</b> <b>public</b> <b>key</b> <b>to</b> <b>send</b> <b>to</b> <b>a</b> <b>peer</b>
        #include &lt;openssl/evp.h&gt;

        int get_encoded_pub_key(EVP_PKEY *ourkey)
        {
            unsigned char *pubkey;
            size_t pubkey_len;

           pubkey_len = EVP_PKEY_get1_encoded_public_key(ourkey, &amp;pubkey);
           if (pubkey_len == 0)
               return 0;

           /*
            * Send the encoded public key stored in the buffer at "pubkey" and of
            * length pubkey_len, to the peer.
            */

           OPENSSL_free(pubkey);
           return 1;
        }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/EVP_PKEY_new.3.html">EVP_PKEY_new</a></b>(3), <b><a href="../man3/EVP_PKEY_copy_parameters.3.html">EVP_PKEY_copy_parameters</a></b>(3), <b><a href="../man3/EVP_PKEY_derive_init.3.html">EVP_PKEY_derive_init</a></b>(3), <b><a href="../man3/EVP_PKEY_derive.3.html">EVP_PKEY_derive</a></b>(3),
       <b><a href="../man7/EVP_PKEY-DH.7.html">EVP_PKEY-DH</a></b>(7), <b><a href="../man7/EVP_PKEY-EC.7.html">EVP_PKEY-EC</a></b>(7), <b><a href="../man7/EVP_PKEY-X25519.7.html">EVP_PKEY-X25519</a></b>(7), <b><a href="../man7/EVP_PKEY-X448.7.html">EVP_PKEY-X448</a></b>(7), <b><a href="../man7/EVP_PKEY-ML-KEM-512.7.html">EVP_PKEY-ML-KEM-512</a></b>(7),
       <b><a href="../man7/EVP_PKEY-ML-KEM-768.7.html">EVP_PKEY-ML-KEM-768</a></b>(7), <b><a href="../man7/EVP_PKEY-ML-KEM-1024.7.html">EVP_PKEY-ML-KEM-1024</a></b>(7).

</pre><h4><b>HISTORY</b></h4><pre>
       <b>EVP_PKEY_set1_encoded_public_key()</b> and <b>EVP_PKEY_get1_encoded_public_key()</b> were added in OpenSSL 3.0.

       <b>EVP_PKEY_set1_tls_encodedpoint()</b> and <b>EVP_PKEY_get1_tls_encodedpoint()</b> were deprecated in OpenSSL 3.0.

       Support for <b>ML-KEM</b> was added in OpenSSL 3.5.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2020-2025 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain a copy in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04             <u><a href="../man3SSL/EVP_PKEY_SET1_ENCODED_PUBLIC_KEY.3SSL.html">EVP_PKEY_SET1_ENCODED_PUBLIC_KEY</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>