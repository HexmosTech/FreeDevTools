<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>libmawk_register_function - registers a C function with a callback</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmawk1t64">libmawk1t64_1.0.4-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       libmawk_register_function - registers a C function with a callback

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libmawk.h&gt;</b>

       <b>typedef</b> <b>CELL</b> <b>*libmawk_c_function(mawk_state_t</b> <b>*</b><u>m</u><b>,</b> <b>CELL</b> <b>*</b><u>sp</u><b>,</b> <b>int</b> <u>a_args</u><b>);</b>
       <b>int</b> <b>libmawk_register_function(mawk_state_t</b> <b>*</b><u>MAWK</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>fname</u><b>,</b> <b>libmawk_c_function</b> <b>*</b><u>callback</u><b>);</b>
       <b>CELL</b> <b>*libmawk_stackret(CELL</b> <b>*</b><u>original_sp</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>libmawk_register_function</b>()  call registers an user defined function donated by the host application
       in a mawk context so that it acts exactly like user defined functions in written in awk. The name of  the
       new  function  is  given  in <u>fname</u> and should not match any of the user defined function names in the awk
       script.

       When the user function is called back, argument <u>sp</u> is the stack pointer and <u>a_args</u> holds  the  number  of
       arguments.  The  user  function is responsible for managing the stack: it should pop all arguments before
       returning.

       The user function should also generate a return value, which is done by calling libmawk_set_cell() on the
       stack slot returned by libmawk_stackret.  Libmawk_stackret should be called with the  modified  <u>sp</u>  after
       popping all arguments.

       Argument    m    is    a    libmawk    context    previously    returned   by   libmawk_initialize()   or
       libmawk_initialize_stage3().

       For more information about user function  callbacks,  especially  on  stack  handling,  see  manual  page
       <a href="../man3libmawk/example.3libmawk.html">example</a>(3libmawk).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The user function should return the stack pointer after popping all arguments.

       The libmawk_register_function call returns 0 on success.

       Call libmawk_stackret returns a stack pointer to the slot where the user function should store its return
       value.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3libmawk/libmawk_initialize_stage.3libmawk.html">libmawk_initialize_stage</a></b>(3libmawk),       <b><a href="../man3libmawk/libmawk_initialize.3libmawk.html">libmawk_initialize</a></b>(3libmawk),       <b><a href="../man3libmawk/libmawk_set_cell.3libmawk.html">libmawk_set_cell</a></b>(3libmawk),
       <b><a href="../man3libmawk/libmawk_print_cell.3libmawk.html">libmawk_print_cell</a></b>(3libmawk).

libmawk                                            2009-08-12                <u><a href="../man3libmawk/LIBMAWK_REGISTER_FUNCTION.3libmawk.html">LIBMAWK_REGISTER_FUNCTION</a></u>(3libmawk)
</pre>
 </div>
</div></section>
</div>
</body>
</html>