<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_machine_get_class, sd_machine_get_ifindices - Determine the class and network interface indices of a</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_machine_get_class, sd_machine_get_ifindices - Determine the class and network interface indices of a
       locally running virtual machine or container

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-login.h&gt;</b>

       <b>int</b> <b>sd_machine_get_class(const</b> <b>char*</b> <u>machine</u><b>,</b> <b>char</b> <b>**</b><u>class</u><b>);</b>

       <b>int</b> <b>sd_machine_get_ifindices(const</b> <b>char*</b> <u>machine</u><b>,</b> <b>int</b> <b>**</b><u>ret_ifindices</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_machine_get_class()</b> may be used to determine the class of a locally running virtual machine or
       container that is registered with <b><a href="../man8/systemd-machined.service.8.html">systemd-machined.service</a></b>(8). The string returned is either "vm" or
       "container". The returned string needs to be freed with the libc <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

       <b>sd_machine_get_ifindices()</b> may be used to determine the numeric indices of the network interfaces on the
       host that are pointing towards the specified locally running virtual machine or container. The vm or
       container must be registered with <b><a href="../man8/systemd-machined.service.8.html">systemd-machined.service</a></b>(8). The output parameter <u>ret_ifindices</u> may be
       passed as <b>NULL</b> when the output value is not needed. The returned array needs to be freed with the libc
       <b><a href="../man3/free.3.html">free</a></b>(3) call after use.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, these functions return a non-negative integer.  <b>sd_machine_get_ifindices()</b> returns the number
       of the relevant network interfaces. On failure, these calls return a negative errno-style error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-ENXIO</b>
           The specified machine does not exist or is currently not running.

       <b>-EINVAL</b>
           An input parameter was invalid (out of range, or <b>NULL</b>, where that is not accepted).

       <b>-ENOMEM</b>
           Memory allocation failed.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_machine_get_class()</b> and <b>sd_machine_get_ifindices()</b> were added in version 217.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-login.3.html">sd-login</a></b>(3), <b><a href="../man8/systemd-machined.service.8.html">systemd-machined.service</a></b>(8), <b><a href="../man3/sd_pid_get_machine_name.3.html">sd_pid_get_machine_name</a></b>(3)

systemd 257.7                                                                            <u><a href="../man3/SD_MACHINE_GET_CLASS.3.html">SD_MACHINE_GET_CLASS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>