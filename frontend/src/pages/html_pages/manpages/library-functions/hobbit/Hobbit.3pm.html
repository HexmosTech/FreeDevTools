<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hobbit.pm -- Perl module to easily write Hobbit/Xymon tests</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/hobbit-plugins">hobbit-plugins_20230301_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Hobbit.pm -- Perl module to easily write Hobbit/Xymon tests

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Hobbit;
        my $bb = new Hobbit('testname');

        if (somethings_is_not_so_good) {
           $bb-&gt;color_line('yellow', 'Something is not so good');
        }

        if (somethings_is_really_bad) {
           $bb-&gt;color_line('red', 'Something is really bad');
        }

        $bb-&gt;send();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Hobbit.pm is part of the Debian package hobbit-plugins and was written to gather common tasks needed when
       writing tests for the Xymon monitoring system (formerly known as Hobbit).

</pre><h4><b>EXPORTABLE</b> <b>HELPER</b> <b>FUNCTIONS</b></h4><pre>
   <b>@regexps</b> <b>=</b> <b>file_to_list_of_regexps($file)</b>
   <b>@globs</b> <b>=</b> <b>file_to_list_of_globs($file)</b>
</pre><h4><b>INTERNAL</b> <b>FUNCTIONS</b></h4><pre>
   <b>$max_color</b> <b>=</b> <b>max_color($color1,</b> <b>$color)</b>
       Out of two colors, returns the color with the highest severity.

</pre><h4><b>METHODS</b></h4><pre>
   <b>Constructor:</b> <b>new</b> <b>Hobbit('testname');</b>
   <b>Constructor:</b> <b>new</b> <b>Hobbit({</b> <b>test</b> <b>=&gt;</b> <b>'testname',</b> <b>ttl</b> <b>=&gt;</b> <b>60,</b> <b>...});</b>
       Creates a new Hobbit object.

       <u>Common</u> <u>use</u> <u>cases</u>

         my $bb = new Hobbit('sometest');
         my $bb = new Hobbit({ test      =&gt; 'testname',
                               color     =&gt; 'green',
                               hostname  =&gt; 'host.example.com',
                               text      =&gt; 'Test successful',
                               title     =&gt; 'Some Test',
                               ttl       =&gt; 60,
                               type      =&gt; 'status',
                               dont_moan =&gt; 1 });

       <u>Available</u> <u>parameters</u>

       color
          The initial color of the test. (Default: "clear")

       dont_moan
          Disable  <b>moan()</b>  and  <b>croak()</b>  (see  below).  Needed  if e.g. another used Perl module throws a lot of
          warnings but works fine otherwise, etc.

       hostname
          The hostname for which the test should report. (Default: $ENV{CLIENTHOSTNAME} || $ENV{MACHINEDOTS}  ||
          $ENV{MACHINE} || 'unknown')

       test
          The name of the test, i.e. the name of the column on the hobbit status web pages. (Mandatory)

       text
          Text which is prepended to generated report. (Default: the empty string)

       title
          The summary of the test. (Default: "$test OK" respectively "$test NOT ok")

       ttl
          How long the test result is valid before the test state is changed to purple by the xymon daemon if no
          newer test results have been received.

          The default value is set on the xymon server and is 300 seconds by default.

          Values  without  unit  are  interpreted as minutes. Valid units are h for hours, d for days, and w for
          weeks. No space between value and unit allowed.

       type
          Allows one to send messages of other types than "status", e.g. data, notify, disable, enable, etc.

          May not yet work with all of these types properly. Please report bugs  via  the  Debian  Bug  Tracking
          system.

   <b>Constructor:</b> <b>Hobbit::trends;</b>
   <b>Constructor:</b> <b>Hobbit::trends</b> <b>('hostname');</b>
       Creates  a new Hobbit trends object. This is a shorthand for new Hobbit({ type = 'data', test = 'trends',
       hostname = $hostname, dont_moan =&gt; 1 });

       <u>Common</u> <u>use</u> <u>case</u>

         my $trends = Hobbit::trends;
         $trends-&gt;print ("[$bb-&gt;{test},extralabel.rrd]\n");
         $trends-&gt;print ("DS:lambda:GAUGE:600:U:U $value\n");
         $trends-&gt;send;

   <b>add_color('somecolor')</b>
       Minutes that a sub test caused the given color state. Adjusts the overall resulting color accordingly.

   <b>print('some</b> <b>text')</b>
       Adds the given text to the end of the current report without changing the current color.

   <b>sprintf('format',</b> <b>args</b> <b>...)</b>
       Like the <b>print()</b> method, but using <b>sprintf()</b> with format string and arguments.

   <b>color_print('somecolor',</b> <b>'some</b> <b>text')</b>
       Adds the given text to the end of the current report and minutes that a sub test caused the  given  color
       state. Adjusts the overall resulting color accordingly.

   <b>color_line('somecolor',</b> <b>'some</b> <b>text')</b>
       Adds  the  given text to the end of the current report and minutes that a sub test caused the given color
       state. Prepends that text with an accordingly colored Xymon icon and adjusts the overall resulting  color
       accordingly.

   <b>graph('graphname')</b>
       Adds HTML for showing a graph. Xymon itself can only show a single graph per test (others can be added to
       the "trends" column). This method works around that limitation by manually linking to the graph CGI.

   <b>send()</b>
       Sends the report to the xymon server.

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>grep(</b><u><b>tag</b></u><b>)</b>
       Run  a  xymongrep  (bbhostgrep)  query  and  return  an  array reference of hashes with keys <b>ip</b> (string),
       <b>hostname</b> (string), and <b>tags</b> (array reference).

         my $list = Hobbit::grep('foobar');
         foreach my $host (@$list) {
           print "$host-&gt;{ip} $host-&gt;{hostname}\n";
         }

</pre><h4><b>INTERNAL</b> <b>METHODS</b></h4><pre>
   <b>moan()</b>
       If the check issues a Perl warning, this warning is added to the report with color state "yellow".

       Set dont_moan to 1 to disable this feature.

   <b>croak()</b>
       If the check issues a Perl error, this error is added to the report with color state "red".

       Set dont_moan to 1 to disable this feature.

</pre><h4><b>AUTHORS</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
        Copyright (C) 2008-2011  Christoph Berg &lt;<a href="mailto:myon@debian.org">myon@debian.org</a>&gt;
        Copyright (C) 2011       Axel Beckert &lt;<a href="mailto:abe@debian.org">abe@debian.org</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       &lt;<a href="http://www.xymon.org/">http://www.xymon.org/</a>&gt; <b><a href="../man5/bb.5.html">bb</a></b>(5), <b><a href="../man1/xymon.1.html">xymon</a></b>(1)

perl v5.36.0                                       2023-03-01                                        <u><a href="../man3pm/Hobbit.3pm.html">Hobbit</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>