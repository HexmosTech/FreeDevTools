<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>curl_multi_info_read - read multi stack information</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       curl_multi_info_read - read multi stack information

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLMsg *curl_multi_info_read(CURLM *multi_handle, int *msgs_in_queue);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Ask  the  multi  handle  if  there  are  any messages from the individual transfers. Messages may include
       information such as an error code from the transfer or just the fact that a transfer is  completed.  More
       details on these should be written down as well.

       Repeated calls to this function returns a new struct each time, until a NULL is returned as a signal that
       there  is  no more to get at this point. The integer pointed to with <u>msgs_in_queue</u> contains the number of
       remaining messages after this function was called.

       When you fetch a message using this function, it is removed from  the  internal  queue  so  calling  this
       function again does not return the same message again. It instead returns new messages at each new invoke
       until the queue is emptied.

       <b>WARNING:</b>  The  data  the  returned  pointer  points  to  does  not survive calling <u><a href="../man3/curl_multi_cleanup.3.html">curl_multi_cleanup</a>(3)</u>,
       <u><a href="../man3/curl_multi_remove_handle.3.html">curl_multi_remove_handle</a>(3)</u> or <u><a href="../man3/curl_easy_cleanup.3.html">curl_easy_cleanup</a>(3)</u>.

       The <u>CURLMsg</u> struct is simple and only contains basic information. If more involved information is wanted,
       the particular "easy  handle"  is  present  in  that  struct  and  can  be  used  in  subsequent  regular
       <u><a href="../man3/curl_easy_getinfo.3.html">curl_easy_getinfo</a>(3)</u> calls (or similar):

        struct CURLMsg {
          CURLMSG msg;       /* what this message means */
          CURL *easy_handle; /* the handle it concerns */
          union {
            void *whatever;    /* message-specific data */
            CURLcode result;   /* return code for transfer */
          } data;
        };

       When  <b>msg</b>  is  <u>CURLMSG_DONE</u>, the message identifies a transfer that is done, and then <b>result</b> contains the
       return code for the easy handle that just completed.

       At this point, there are no other <b>msg</b> types defined.

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURLM *multi = curl_multi_init();
         CURL *curl = curl_easy_init();
         if(curl) {
           struct CURLMsg *m;

           /* call curl_multi_perform or curl_multi_socket_action first, then loop
              through and check if there are any transfers that have completed */

           do {
             int msgq = 0;
             m = curl_multi_info_read(multi, &amp;msgq);
             if(m &amp;&amp; (m-&gt;msg == CURLMSG_DONE)) {
               CURL *e = m-&gt;easy_handle;
               /* m-&gt;data.result holds the error code for the transfer */
               curl_multi_remove_handle(multi, e);
               curl_easy_cleanup(e);
             }
           } <a href="../manm/while.m.html">while</a>(m);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.9.6

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       A pointer to a filled-in struct, or NULL if it failed or ran out of structs.  It also writes  the  number
       of messages left in the queue (after this read) in the integer the second argument points to.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/curl_multi_cleanup.3.html">curl_multi_cleanup</a></b>(3), <b><a href="../man3/curl_multi_init.3.html">curl_multi_init</a></b>(3), <b><a href="../man3/curl_multi_perform.3.html">curl_multi_perform</a></b>(3)

libcurl                                            2025-06-16                            <u><a href="../man3/curl_multi_info_read.3.html">curl_multi_info_read</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>