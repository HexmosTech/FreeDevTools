<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML::FormHandler::Manual::Testing - testing forms</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libhtml-formhandler-perl">libhtml-formhandler-perl_0.40068-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       HTML::FormHandler::Manual::Testing - testing forms

</pre><h4><b>VERSION</b></h4><pre>
       version 0.40068

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Manual Index

       One of the big advantages of FormHandler compared to many other form packages is that you can test the
       same form that you use in your controller.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       It's difficult to test forms that are instantiated in controllers with 'add_element' calls and from YAML,
       and that have no form class. It's one of the reasons that 'dynamic' forms generated with a field_list
       aren't a good idea for anything except the simplest forms. If you have a form class that contains
       everything that is needed for processing the form, it's really really easy to create tests for forms.
       Look in the FormHandler 't' directory. It's full of tests for forms.

       You can test that the validations work, that the database is getting updated correctly, even that the
       HTML that's being rendered is correct. If something isn't working correctly, it's ten times easier to
       debug in a test case than sitting in a controller somewhere. And when you finally start up your
       application and use the form, there should be very few surprises.

       FormHandler provides a simple function to test whether the HTML output is correct, 'is_html' in
       HTML::FormHandler::Test, which uses HTML::TreeBuilder.  If you need to build forms that use the rendering
       code to produce particular output, it can be helpful.

</pre><h4><b>Example</b></h4><pre>
       Here's an example of a test, originally copied from one of the DBIC model tests.  But you should download
       the tar.gz or checkout the distribution from github and browse through the tests.

          use Test::More;
          use lib 't/lib';

          use_ok( 'BookDB::Form::Book');
          use_ok( 'BookDB::Schema::DB');

          my $schema = BookDB::Schema::DB-&gt;connect('dbi:SQLite:t/db/book.db');
          ok($schema, 'get db schema');

          my $form = BookDB::Form::Book-&gt;new(schema =&gt; $schema);

          # This is munging up the equivalent of param data from a form
          my $good = {
              'title' =&gt; 'How to Test Perl Form Processors',
              'author' =&gt; 'I.M. Author',
              'genres' =&gt; [2, 4],
              'format'       =&gt; 2,
              'isbn'   =&gt; '123-02345-0502-2' ,
              'publisher' =&gt; 'EreWhon Publishing',
          };
          ok( $form-&gt;process( params =&gt; $good ), 'Good data' );

          my $book = $form-&gt;item;
          END { $book-&gt;delete };
          ok ($book, 'get book object from form');
          my $num_genres = $book-&gt;genres-&gt;count;
          is( $num_genres, 2, 'multiple select list updated ok');
          is( $form-&gt;field('format')-&gt;value, 2, 'get value for format' );

          my $bad_1 = {
              notitle =&gt; 'not req',
              silly_field   =&gt; 4,
          };
          ok( !$form-&gt;process( $bad_1 ), 'bad 1' );

          my $bad_2 = {
              'title' =&gt; "Another Silly Test Book",
              'author' =&gt; "C. Foolish",
              'year' =&gt; '1590',
              'pages' =&gt; 'too few',
              'format' =&gt; '22',
          };
          ok( !$form-&gt;process( $bad_2 ), 'bad 2');
          ok( $form-&gt;field('year')-&gt;has_errors, 'year has error' );
          ok( $form-&gt;field('pages')-&gt;has_errors, 'pages has error' );
          ok( !$form-&gt;field('author')-&gt;has_errors, 'author has no error' );
          ok( $form-&gt;field('format')-&gt;has_errors, 'format has error' );

          my $good = {
             title =&gt; "Another Silly Test Book",
             author =&gt; "C. Foolish",
             year =&gt; 1999,
             pages =&gt; 101,
             format =&gt; 2
          };
          ok( $form-&gt;process($good), 'now form validates' );

          done_testing;

</pre><h4><b>AUTHOR</b></h4><pre>
       FormHandler Contributors - see HTML::FormHandler

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2017 by Gerda Shank.

       This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.34.0                                       2022-03-25             <u>HTML::FormHandl...Manual::<a href="../man3pm/Testing.3pm.html">Testing</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>