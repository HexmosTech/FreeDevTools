<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Embperl::Form::Validate - Form validation with server- and client-side support.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libembperl-perl">libembperl-perl_2.5.0-16build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Embperl::Form::Validate - Form validation with server- and client-side support.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This modules is developed to do form validation for you. It works on the server side by checking the
       posted form data and it generates client side script functions, to validate the form values, as far as
       possible, before they are send to the server, to avoid another server roundtrip.

       Also it has the best support for Embperl, it should also work outside of Embperl e.g. with CGI.pm or
       mod_perl.

       It can be extended by new validation rules for additional syntaxes (e.g. US zip codes, German
       Postleitzahlen, number plates, iso-3166 2-digit language or country codes, etc.)

       Each module has the ability to rely it's answer on parameters like e.g. the browser, which caused the
       request for or submitted the form.

       The module fully supports internationalisation. Any message can be provided in multiple languages and it
       makes use of Embperl's multilanguage support.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Embperl::Form::Validate;

        my $epf = new Embperl::Form::Validate($rules, $form_id);

        $epf-&gt;add_rule('fnord', $fnord_rules);

        # validate the form values and returns error information, if any
        my $result = $epf -&gt; validate ;

        # Does the form content validate?
        print 'Validate: ' . ($result?'no':'yes');

        # validate the form values and reaturn all error messages, if any
        my $errors = $epf-&gt;validate_messages($fdat, $pref);

        # Get the code for a client-side form validation according to the
        # rules given to new:
        $epf -&gt; get_script_code ;

</pre><h4><b>METHODS</b></h4><pre>
       The following methods are available:

   <b>$epf</b> <b>=</b> <b>Embperl::Form::Validate</b> <b>-&gt;</b> <b>new</b> <b>($rules</b> <b>[,</b> <b>$form_id</b> <b>],</b> <b>[$default_language],</b> <b>[$charset]);</b>
       Constructor for a new form validator. Returns a reference to a Embperl::Form::Validate object.

       $rules
           should be a reference to an array of rules, see "RULES" elsewhere in this document for details.

       $form_id
           should  be  the  name  (im  HTML)  or  id  (in  XHTML)  parameter  of  the  form tag, which has to be
           verified.It\'s e.g. used for generating the  right  path  in  the  JavaScript  DOM.  It  defaults  to
           'forms[0]' which should be the first form in your page.

       $default_language
           language to use when no messages are available in the desired language.  Defaults to 'en'.

       $charset
           Pass 'utf-8' in case you want utf-8 messages.

   <b>$epf-&gt;add_rules($field,</b> <b>$field_rules);</b>
       Adds rules $field_rules for a (new) field $field to the validator, e.g.

        $epf-&gt;add_rule([ -key =&gt; 'fnord', -type =&gt; 'Number', -max =&gt; 1.3, -name =&gt; 'Fnord' ]);

       The new rule will be appended to the end of the list of rules.

       See "RULES" elsewhere in this document.

   <b>$epf</b> <b>-&gt;</b> <b>validate</b> <b>([$fdat,</b> <b>[$pref]]);</b>
       Does the server-side form validation.

       $fdat
           should  be  a hash reference to all postend form values.  It defaults to %fdat of the current Embperl
           page.

       $pref
           can contain additional information for the validation process.  At the moment the keys "language" and
           "default_language"  are  recognized.  "language"  defaults  to   the   language   set   by   Embperl.
           "default_language" defaults to the one given with "new".

       The  method  verifies  the  content  $fdat  according  to  the rules given to the Embperl::Form::Validate
       constructor and added by the <b>add_rule()</b> method and returns an array reference to  error  information.  If
       there is no error it returns undef. Each element of the returned array contains a hash with the following
       keys:

       key key into $fdat which caused the error

       id  message id

       typeobj
           object reference to the Validate object which was used to validate the field

       name
           human readable name, if any. Maybe a hash with multiple languages.

       msg field specific messages, if any. Maybe a hash with multiple languages.

       param
           array with parameters which should subsituted inside the message

   <b>$epf</b> <b>-&gt;</b> <b>error_message</b> <b>($err,</b> <b>[</b> <b>$pref</b> <b>])</b>
       Converts one item returned by validate into a error message

       $err
           Item returned by validate

       $pref
           Preferences (see validate)

   <b>$epf</b> <b>-&gt;</b> <b>validate_messages</b> <b>($fdat,</b> <b>[</b> <b>$pref</b> <b>])</b>
       Validate the form content and returns the error messages as array ref if any. See validate for details.

   <b>$epf</b> <b>-&gt;</b> <b>get_script_code</b> <b>([$pref])</b>
       Returns  the script code necessary to do the client-side validation.  Put the result between &lt;SCRIPT&gt; and
       &lt;/SCRIPT&gt;   tags   inside   your   page.    It    will    contain    a    function    that    is    named
       "epform_validate_&lt;name_of_your_form"&gt;  where  &lt;name_of_your_form&gt;  is replaced by the form named you have
       passed to new. You should call this function in the "onSubmit" of your form.  Example:

           &lt;script&gt;
           [+ do { local $escmode = 0 ; $epf -&gt; get_script_code } +]
           &lt;/script&gt;

           &lt;form name="foo" action="POST" onSubmit="return epform_validate_foo()"&gt;
               ....
           &lt;/form&gt;

</pre><h4><b>DATA</b> <b>STRUCTURES</b></h4><pre>
       The functions and methods expect the named data structures as follows:

   <b>RULES</b>
       The $rules array contains a list of tests to perform. Alls the given tests are process sequenzially.  You
       can  group tests together, so when one test fails the remaining tests of the same group are not processed
       and the processing continues in the next outer group with the next test.

         [
           [
           -key        =&gt; 'lang',
           -name       =&gt; 'Language'
           required    =&gt; 1,
           length_max  =&gt; 5,
           ],
           [
           -key        =&gt; 'from',
           -type       =&gt; 'EMail',
           emptyok     =&gt; 1,
           ],

           -key        =&gt; ['foo', 'bar']
           required    =&gt; 1,
         ]

       All items starting with a dash are control elements, while all items without a dash are tests to perform.

       -key
           gives the key in the passed form data hash which should be tested. -key is normally the name given in
           the HTML name attribute within a form field.  "-key" can also be a arrayref, in which case  <b>only</b>  <b>one</b>
           <b>of</b> the given keys must satisfy the following test to succeed.

       -name
           is  a human readable name that should be used in error messages. Can be hash with multiple languages,
           e.g.

               -name =&gt; { 'en' =&gt; 'date', 'de' =&gt; 'Datum' }

       -type
           specfify to not use the standard tests, but the ones for a special type.  For example there is a type
           "Number" which will replace all the comparisons by numeric ones instead of  string  comparisons.  You
           may  add  your  own  types by writing a module that contains the necessary test and dropping it under
           Embperl::Form::Validate::&lt;Typename&gt;. The -type directive also can verify that the given  data  has  a
           valid format for the type.

           The following types are available:

           Default
               This one is used when no type is specified. It contains all the standard tests.

           Number
               Input must be a floating point number.

           Integer
               Input must be a integer number.

           PosInteger
               Input must be a integer number and greater or equal zero.

           TimeHHMM
               Input must be the time in the format hh::mm

           TimeHHMMSS
               Input must be the time in the format hh::mm:ss

           TimeValue
               Input must be a number followed by s, m, h, d or w.

           EMail
               Input must be a valid email address including a top level domain e.g. <a href="mailto:user@example.com">user@example.com</a>

           EMailRFC
               Input must be a valid email address, no top level domain is required, so user@foo is also valid.

           IPAddr
               Input must be an ip-address in the form nnn.nnn.nnn.nnn

           IPAddr_Mask
               Input must be an ip-address and network mask in the form nnn.nnn.nnn.nnn/mm

           FQDN_IPAddr
               Input must be an ip-address or an fqdn (host.domain)

           select
               This  used  together with required and causes Embperl::Form::Validate to test of a selected index
               != 0 instead of a non empty input.

           If you write your own type package, make sure to send them back, so they can  be  part  of  the  next
           distribution.

       -msg
           Used  to  give messages which should be used when the test fails. This message overrides the standard
           messages provided by Embperl::Form::Validate and by Embperl's message management. Can also be a  hash
           with messages for multiple languages. The -msg parameter must precede the test for which it should be
           displayed. You can have multiple different messages for different tests, e.g.

                  [
                   -key        =&gt; 'email',
                   -name       =&gt; 'E-Mail-Address',
                   emptyok     =&gt; 1,                   # it's ok to leave this field empty (in this case the following tests are skipped)

                   -msg =&gt; 'The E-Mail-Address is invalid.',
                   matches_regex =&gt; '(^[^ &lt;&gt;()@¡-ÿ]+@[^ &lt;&gt;()@¡-ÿ]+\.[a-zA-Z]{2,3}$)',

                   -msg =&gt; 'The E-Mail address must contain a "@".',
                   must_contain_one_of =&gt; '@',

                   -msg =&gt; 'The E-Mail address must contain at least one period.',
                   must_contain_one_of =&gt; '.',
                  ],

       -fail
           stops further validation of any rule after the first error is found

       -cont
           continues validation in the same group, also a error was found

       -break =&gt; 1
           errors  only  break current block, but does not display any message.  -break =&gt; 0 turns bak to normal
           behaviour. This can be used for preconditions:

               [
               -key =&gt; 'action',  emptyok =&gt; 1, -break =&gt; 1, ne =&gt; 0, -break =&gt; 0,
               -key =&gt; 'input', 'required' =&gt; 1
               ]

           The above example will only require the field "input", when the field "action" is not  empty  and  is
           not zero.

       [arrayref]
           you can place a arrayref with tests at any point in the rules list. The array will be considered as a
           group  and  the  default  is  the  stop processing of a group as soon as the first error is found and
           continue with processing with the next rule in the next outer group.

       The following test are currently defined:

       required
       emptyok
       length_min
       length_max
       length_eq
       eq
       same
           Value must be the same as in field given as argument. This is useful if you want for  example  verify
           that  two passwords are the same. The Text displayed to the user for the second field may be added to
           the argument separated by a colon. Example:

             $epf = Embperl::Form::Validate -&gt; new (
                   [
                       -key =&gt; 'pass',  -name =&gt; 'Password', required =&gt; 1, length_min =&gt; 4,
                       -key =&gt; 'pass2', -name =&gt; 'Repeat Password', required =&gt; 1, length_min =&gt; 4,
                                        same =&gt; 'pass:Password',
                   ],
                   'passform') ;

       ne
       lt
       gt
       le
       ge
       matches_regex
           Value must match <b>Perl</b> regular expression. Only executed on server side.

       matches_regex_js
           Value must match <b>JavaScript</b> regular expression. Only executed on client side.  <b>IMPORTANT:</b> If the user
           has disabled JavaScript in his browser this test will be never executed.  Use  a  corresponding  Perl
           Regex  with  "matches_regex"  to  get a server side validation. Use this with care, because different
           browser may have different support for regular expressions.

       not_matches_regex
           Value must not match <b>Perl</b> regular expression. Only executed on server side.

       not_matches_regex_js
           Value must not match <b>JavaScript</b> regular expression. Only executed on client side.  <b>IMPORTANT:</b> If  the
           user  has  disabled  JavaScript  in his browser this test will be never executed. Use a corresponding
           Perl Regex with "not_matches_regex" to get a server side validation.  Use  this  with  care,  because
           different browser may have different support for regular expressions.

       matches_wildcard
       must_only_contain
       must_not_contain
       must_contain_one_of
       checked
           Checkbox must be selected

       notchecked
           Checkbox must not be selected

   <b>PREFERENCES</b>
       The  $pref  hash  (reference)  contains  information  about a single form request or submission, e.g. the
       browser version, which made the request or submission and the language in which the error messages should
       be returned. See also validate

   <b>ERROR</b> <b>CODES</b>
       For a descriptions of the error codes, validate is returning see validate

   <b>FDAT</b>
       See also Embperl.

        my $fdat = { foo =&gt; 'foobar',
                     bar =&gt; 'baz',
                     baz =&gt; 49,
                     fnord =&gt; 1.2 };

</pre><h4><b>Example</b></h4><pre>
       This example simply validates the form input when you hit submit.  If your input is correct, the form  is
       redisplay  with  your  input,  otherwise  the  error  message  is  shown.  If you turn off JavaScript the
       validation is still done one the server-side. Any  validation  for  which  no  JavaScript  validation  is
       defined (like regex matches), only the server-side validation is performed.

           &lt;html&gt;
           &lt;head&gt;
           [-

           use Embperl::Form::Validate ;

           $epf = Embperl::Form::Validate -&gt; new (
               [
                   [
                   -key =&gt; 'name',
                   -name =&gt; 'Name',
                   required =&gt; 1,
                   length_min =&gt; 4,
                   ],
                   [
                   -key =&gt; 'id',
                   -name =&gt; 'Id',
                   -type =&gt; 'Number',
                   gt   =&gt; 0,
                   lt   =&gt; 10,
                   ],
                   [
                   -key =&gt; 'email',
                   -msg =&gt; 'This is not a valid E-Mail address',
                   must_contain_one_of =&gt; '@.',
                   matches_regex =&gt; '..+@..+\\...+',
                   length_min =&gt; 8,
                   ],
                   [
                   -key =&gt; 'msg',
                   -name =&gt; 'Message',
                   emptyok =&gt; 1,
                   length_min =&gt; 10,
                   ]
               ]) ;

           if ($fdat{check})
               {
               $errors = $epf -&gt; validate_messages ;
               }

           -]
           &lt;script&gt;
           [+ do { local $escmode = 0 ; $epf -&gt; get_script_code } +]
           &lt;/script&gt;
           &lt;/head&gt;
           &lt;body&gt;

           &lt;h1&gt;Embperl Example - Input Form Validation&lt;/h1&gt;

           [$if @$errors $]
               &lt;h3&gt;Please correct the following errors&lt;/h3&gt;
               [$foreach $e (@$errors)$]
                   &lt;font color="red"&gt;[+ $e +]&lt;/font&gt;&lt;br&gt;
               [$endforeach$]
           [$else$]
               &lt;h3&gt;Please enter your data&lt;/h3&gt;
           [$endif$]

           &lt;form action="formvalidation.htm" method="GET" onSubmit="return epform_validate_forms_0_()"&gt;
             &lt;table&gt;
               &lt;tr&gt;&lt;td&gt;&lt;b&gt;Name&lt;/b&gt;&lt;/td&gt; &lt;td&gt;&lt;input type="text" name="name"&gt;&lt;/td&gt;&lt;/tr&gt;
               &lt;tr&gt;&lt;td&gt;&lt;b&gt;Id (1-9)&lt;/b&gt;&lt;/td&gt; &lt;td&gt;&lt;input type="text" name="id"&gt;&lt;/td&gt;&lt;/tr&gt;
               &lt;tr&gt;&lt;td&gt;&lt;b&gt;E-Mail&lt;/b&gt;&lt;/td&gt; &lt;td&gt;&lt;input type="text" name="email"&gt;&lt;/td&gt;&lt;/tr&gt;
               &lt;tr&gt;&lt;td&gt;&lt;b&gt;Message&lt;/b&gt;&lt;/td&gt; &lt;td&gt;&lt;input type="text" name="msg"&gt;&lt;/td&gt;&lt;/tr&gt;
               &lt;tr&gt;&lt;td colspan=2&gt;&lt;input type="submit" name="check" value="send"&gt;&lt;/td&gt;&lt;/tr&gt;
             &lt;/table&gt;
           &lt;/form&gt;

           &lt;p&gt;&lt;hr&gt;

           &lt;small&gt;Embperl (c) 1997-2010 G.Richter / ecos gmbh &lt;a href="<a href="http://www.ecos.de">http://www.ecos.de</a>"&gt;www.ecos.de&lt;/a&gt;&lt;/small&gt;

           &lt;/body&gt;
           &lt;/html&gt;

       See also eg/x/formvalidation.htm

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       See also Embperl.

</pre><h4><b>AUTHOR</b></h4><pre>
       Axel Beckert (<a href="mailto:abe@ecos.de">abe@ecos.de</a>) Gerald Richter (richter at embperl dot org)

perl v5.34.0                                       2022-02-06                                <u>Form::<a href="../man3pm/Validate.3pm.html">Validate</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>