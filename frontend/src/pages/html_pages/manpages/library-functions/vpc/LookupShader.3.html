<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vpSetLookupShader - specify shading lookup tables</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvolpack1-dev">libvolpack1-dev_1.0b3-10_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vpSetLookupShader - specify shading lookup tables

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;volpack.h&gt;

       vpResult
       <b>vpSetLookupShader(</b><u>vpc,</u>   <u>color_channels,</u>   <u>num_materials,</u>   <u>color_field,</u>  <u>color_table,</u>  <u>color_table_size,</u>
               <u>weight_field,</u> <u>weight_table,</u> <u>weight_table_size</u><b>)</b>
           vpContext *<u>vpc;</u>
           int <u>color_channels,</u> <u>num_materials;</u>
           int <u>color_field;</u>
           float *<u>color_table;</u>
           int <u>color_table_size;</u>
           int <u>weight_field;</u>
           float *<u>weight_table;</u>
           int <u>weight_table_size;</u>

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>vpc</u>    VolPack context from <b>vpCreateContext.</b>

       <u>color_channels</u>
              The number of color channels per pixel (1 or 3).

       <u>num_materials</u>
              The number of material types.

       <u>color_field</u>
              Field number for voxel field containing color lookup table index.

       <u>color_table</u>
              Color lookup table.

       <u>color_table_size</u>
              Size of color lookup table in bytes.

       <u>weight_field</u>
              Field number for voxel field containing material weight lookup table index.

       <u>weight_table</u>
              Material weight lookup table.

       <u>weight_table_size</u>
              Size of material weight lookup table in bytes.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>vpSetLookupShader</b> is used to specify lookup tables that define  a  shading  function.   The  lookup-table
       shading  algorithm provided by VolPack is designed to support the following shading model.  Each voxel is
       assumed to contain a mixture of some set of basic material types.  Each material type has its own shading
       parameters for the Phong shading equation (for example, the diffuse color components and the  shinyness).
       The  color  of a voxel is found by computing a color for each material type and then combining the colors
       in proportion to the fraction of each material in the voxel.  The shading model also supports directional
       (infinite-distance) light sources.

       This shading model is implemented using lookup tables.  The tables can be precomputed so that the shading
       equation does not have to be evaluated for every voxel.  VolPack provides routines to compute the  lookup
       tables  (see  <a href="../man3/vpShadeTable.3.html">vpShadeTable</a>(3)).   The lookup tables can also be used to implement other shading models by
       using a user-supplied routine to compute  the  contents  of  the  tables.   See  <a href="../man3/vpSetDepthCueing.3.html">vpSetDepthCueing</a>(3)  for
       information about depth cueing.

       It  is  also  possible  to  define  a  callback  function  that will be called to shade each voxel during
       rendering, instead of using a lookup table.  This method allows more general  shading  models  but  slows
       down  rendering.   To  define  a  callback  shader,  call  <b>vpSetCallback</b>  with  the VP_GRAY_SHADE_FUNC or
       VP_RGB_SHADE_FUNC option code (see <a href="../man3/vpSetCallback.3.html">vpSetCallback</a>(3)).  The lookup tables are used if the last  successful
       call  to  <b>vpSetLookupShader</b>  occurred  after  the  last  successful call to <b>vpSetCallback</b> with one of the
       VP_*_SHADE_FUNC options.

       The <u>color_channels</u> argument determines whether the shading table will contain grayscale  (1  channel)  or
       RGB  (3  channel) pixels.  The <u>num_materials</u> argument specifies the number of basic material types out of
       which each voxel can be composed (at least 1).  The <u>color_table</u> and <u>weight_table</u>  arguments  specify  two
       lookup  tables,  and the <u>color_field</u> and <u>weight_field</u> arguments specify two voxel fields that are used to
       index    the    tables.     The    size    of    the     <u>color_table</u>     array     must     be:     float
       <u>color_table[n][num_materials][color_channels];</u>   where  <u>n</u>  is  the  number  of  possible  values  in  the
       <u>color_field</u> field of the voxel (the maximum value plus one).  The size of the <u>weight_table</u> argument  must
       be:  float  <u>weight_table[m][num_materials];</u>  where <u>m</u> is the number of possible values in the <u>weight_field</u>
       field of the voxel (the maximum value plus one).  If there is only one material then <u>weight_table</u> is  not
       used and may be a NULL pointer.

       During  rendering  the  shading  lookup tables are accessed as follows.  Suppose a particular voxel to be
       shaded has the value <u>color_index</u> in the field specified by <u>color_field</u> and the value <u>weight_index</u> in  the
       field  specified  by <u>weight_field</u>.  For each material number <u>material_index,</u> a weighted color is computed
       from the formula: color = color_table[color_index][material_index] *
       168u' weight_table[weight_index][material_index] Then the weighted colors  for  each  material  type  are
       added  up  to  give  the  voxel color.  If <u>color_table</u> contains RGB values then each component is treated
       separately using the above formula.  If there is  only  one  material  type  then  the  constant  1.0  is
       substituted for the <u>weight_table</u> value.

       The  suggested  way  to  use  the  tables is as follows.  The voxel field specified by <u>color_field</u> should
       contain an encoded surface normal vector; this should be the same field as  the  <u>norm_field</u>  argument  to
       <b>vpVolumeNormals</b> or <b>vpClassifyScalars</b>.  In the <u>color_table</u> array, for each possible encoded surface normal
       (the  <u>color</u>  index)  and  material  type  (the  <u>material</u> index) the array should contain the color of the
       material given the current viewing direction and lighting arrangement.  The color is independent  of  the
       voxel location because the light sources are assumed to be infinitely distant.  The function <b>vpShadeTable</b>
       initializes the contents of <u>color_table</u> in this way.

       The  voxel  field  specified  by  <u>weight_field</u>  should contain some quantity that determines the material
       composition of the voxel.  For example, a field containing the  scalar  value  could  be  used.   In  the
       <u>weight_table</u> array, for each possible value of <u>weight_field</u> there should be one row of material occupancy
       fractions.   Each  entry should be a number in the range 0.0-1.0 that specifies the fraction of the voxel
       occupied by the corresponding material.  For example, if there are  two  material  types  and  a  voxel's
       <u>weight_field</u>  contains the value 62, then <u>weight_table</u>[62][0] gives the fraction of the voxel occupied by
       material 0, and <u>weight_table</u>[62][1] gives the fraction of the voxel occupied by  material  1.   Normally,
       the numbers in a given row of <u>weight_table</u> should add up to 1.0 (although special effects can be achieved
       by  bending  the rules).  The function <b>vpRamp</b> is useful for initializing the weight table with piece-wise
       linear ramps.

       The values in the shading lookup tables may be initialized before  or  after  calling  <b>vpSetLookupShader.</b>
       Typically  <b>vpSetLookupShader</b>  is called once at the beginning of a rendering session, and then the values
       in the shading tables are modified as the user changes the lighting and shading parameters or the viewing
       direction.

</pre><h4><b>STATE</b> <b>VARIABLES</b></h4><pre>
       Information about the current shading table parameters can be retrieved with the following state variable
       codes     (see     <a href="../man3/vpGeti.3.html">vpGeti</a>(3)):     VP_COLOR_CHANNELS,     VP_SHADE_COLOR_TABLE,      VP_SHADE_COLOR_SIZE,
       VP_SHADE_WEIGHT_TABLE,       VP_SHADE_WEIGHT_SIZE,      VP_SHADE_COLOR_FIELD,      VP_SHADE_WEIGHT_FIELD,
       VP_MATERIAL_COUNT

</pre><h4><b>ERRORS</b></h4><pre>
       The normal return value is VP_OK.  The following error return values are possible:

       VPERROR_BAD_VALUE
              One or more of the arguments has an invalid value or is out of range.

       VPERROR_LIMIT_EXCEEDED
              The <u>num_materials</u> argument has exceeded an internal limit.  Change the value of VP_MAX_MATERIAL in
              volpack.h and recompile the VolPack library.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/VolPack.3.html">VolPack</a>(3),  <a href="../man3/vpCreateContext.3.html">vpCreateContext</a>(3),  <a href="../man3/vpShadeTable.3.html">vpShadeTable</a>(3),   <a href="../man3/vpSetCallback.3.html">vpSetCallback</a>(3),   <a href="../man3/vpRamp.3.html">vpRamp</a>(3),   <a href="../man3/vpVolumeNormals.3.html">vpVolumeNormals</a>(3),
       <a href="../man3/vpClassifyScalars.3.html">vpClassifyScalars</a>(3), <a href="../man3/vpSetDepthCueing.3.html">vpSetDepthCueing</a>(3)

VolPack                                                                                     <u><a href="../man3/vpSetLookupShader.3.html">vpSetLookupShader</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>