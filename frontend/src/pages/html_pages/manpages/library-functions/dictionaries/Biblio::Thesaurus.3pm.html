<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblio::Thesaurus - Perl extension for managing ISO thesaurus</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbiblio-thesaurus-perl">libbiblio-thesaurus-perl_0.43-3build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Biblio::Thesaurus - Perl extension for managing ISO thesaurus

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Biblio::Thesaurus;

         $obj = thesaurusNew();
         $obj = thesaurusLoad('iso-file');
         $obj = thesaurusRetrieve('storable-file');
         $obj = thesaurusMultiLoad('iso-file1','iso-file2',...);

         $obj-&gt;save('iso-file');
         $obj-&gt;storeOn('storable-file');

         $obj-&gt;addTerm('term');
         $obj-&gt;addRelation('term','relation','term1',...,'termn');
         $obj-&gt;deleteTerm('term');

         $obj-&gt;isDefined('term');

         $obj-&gt;describe( { rel='NT', desc="Narrow Term", lang=&gt;"UK" } );

         $obj-&gt;addInverse('Relation1','Relation2');

         $obj-&gt;order('rela1', 'rel2', ....);
         @order = $obj-&gt;order();

         $obj-&gt;languages('l1', 'l2', ....);
         @langs = $obj-&gt;languages();

         $obj-&gt;baselang('l');
         $lang = $obj-&gt;baselang();

         $obj-&gt;topName('term');
         $term = $obj-&gt;topName();

         $html = $obj-&gt;navigate(+{configuration},%parameters);

         $html = $obj-&gt;getHTMLTop();

         $output = $obj-&gt;downtr(\%handler);
         $output = $obj-&gt;downtr(\%handler,'term', ... );

         $obj-&gt;appendThesaurus("iso-file");
         $obj-&gt;appendThesaurus($tobj);

         $obj-&gt;tc('term', 'relation1', 'relation2');
         $obj-&gt;depth_first('term', 2, "NT", "UF")

         $latex = $obj-&gt;toTex( ...)
         $xml   = $obj-&gt;toXml( ...)

</pre><h4><b>ABSTRACT</b></h4><pre>
       This module provides transparent methods to maintain Thesaurus files.  The module uses a subset from ISO
       2788 which defines some standard features to be found on thesaurus files. The module also supports
       multilingual thesaurus and some extensions to the ISOs standard.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A Thesaurus is a classification structure. We can see it as a graph where nodes are terms and the
       vertices are relations between terms.

       This module provides transparent methods to maintain Thesaurus files.  The module uses a subset from ISO
       2788 which defines some standard features to be found on thesaurus files. This ISO includes a set of
       relations that can be seen as standard but, this program can use user defined ones.  So, it can be used
       on ISO or not ISO thesaurus files.

</pre><h4><b>File</b> <b>Structure</b></h4><pre>
       Thesaurus used with this module are standard ASCII documents. This file can contain processing
       instructions, comments or term definitions. The instructions area is used to define new relations and
       mathematical properties between them.

       We can see the file with this structure:

          ______________
         |              |
         |    HEADER    | --&gt; Can contain, only, processing instructions,
         |______________|     comment or empty lines.
         |              |
         |  Def Term 1  | --&gt; Each term definition should be separated
         |              |     from each other with an empty line.
         |  Def Term 2  |
         |              |
         |     .....    |
         |              |
         |  Def Term n  |
         |______________|

       Comments can appear on any line. Meanwhile, the comment character (<b>#</b>) should be the first character on
       the line (with no spaces before).  Comments line span to the end of the line (until the first carriage
       return).

       Processing instructions lines, like comments, should start with the percent sign (<b>%</b>). We describe these
       instructions later on this document.

       Terms definitions can't contain any empty line because they are used to separate definitions from each
       other. On the first line of term definition record should appear the defined term. Next lines defines
       relations with other terms. The first characters should be an abbreviation of the relation (on upper
       case) and spaces. Then, should appear a comma separated list of terms.

       There can be more than one line with the same relation. Thesaurus module will concatenate the lists. If
       you want to continue a list on the next line you can repeat the relation term of leave some spaces
       between the start of the line and the terms list.

       Here is an example:

         Animal
         NT cat, dog, cow
            fish, ant
         NT camel
         BT Life being

         cat
         BT Animal
         SN domestic animal to be kicked when
            anything bad occurs.

       There can be defined a special term ("_top_"). It should be used when you want a top tree for thesaurus
       navigation. So, we normally define the "_top_" term with the more interesting terms to be navigated.

       The <b>ISO</b> subset used are:

       <b>TT</b> - Top Term
           The broadest term we can define about the current term.

       <b>NT</b> - Narrower Term
           Terms more specific than current term.

       <b>BT</b> - Broader Term
           More generic terms than current term.

       <b>USE</b> - Synonym
           Another chances when finding a Synonym.

       <b>UF</b> - Quasi-Synonym
           Terms that are no synonyms of current term but can be used, sometimes with that meaning.

       <b>RT</b> - Related Term
           Related term that can't be inserted on any other category.

       <b>SN</b> - Scope Note
           Text.  Note  of  context of the current term. Use for definitions or comments about the scope you are
           using that term.

   <b>Processing</b> <b>Instructions</b>
       Processing instructions, as said before, are written on a line starting with the  percent  sign.  Current
       commands are:

       <b>top</b> When presenting a thesaurus, we need a term, to know where to start.  Normally, we want the thesaurus
           to have some kind of top level, where to start navigating. This command specifies that term, the term
           that should be used when no term is specified.

           Example:

             %top Contents

             Contents
             NT Biography ...
             RT ...

       <b>enc</b>oding
           This command defines the encoding used in the thesaurus file.

           Example:

            %enc utf8

       <b>inv</b>erse
           This command defines the mathematic inverse of the relation. That is, if you define "inverse A B" and
           you know that "foo" is related by "A" with "bar", then, "bar" is related by "B" with "foo".

           Example:

             %inv BT NT
             %inverse UF USE

       <b>desc</b>ription
           This  command  defines  a  description  for  some  relation  class.  These descriptions are used when
           outputting thesaurus on HTML.

           Example:

             %desc SN Note of Scope
             %description IOF Instance of

           If you are constructing a multilingual thesaurus, you will  want  to  translate  the  relation  class
           description. To do this, you should use the "description" command with the language in from of it:

             %desc[PT] SN Nota de Contexto
             %description[PT] IOF Instancia de

       <b>ext</b>ernals
           This  defines  classes that does not relate terms but, instead, relate a term with some text (a scope
           note, an url, etc.). This can be used like this:

             %ext SN URL
             %externals SN URL

           Note that you can specify more than one relation type per line.

       <b>lang</b>uages
           This other command permits the  construction  of  a  multilingual  thesaurus.  TO  specify  languages
           classifiers (like PT, EN, FR, and so on) you can use one of these lines:

             %lang PT EN FR
             %languages PT EN FR

           To  describe  (legend)  the  language  names,  you  should use the <b>description</b> command, so, you could
           append:

             %description PT Portuguese
             %description EN English
             %description FR French

       <b>baselang</b>uage
           This one makes it possible to explicitly name the base  language  for  the  thesaurus.  This  command
           should be used with the "description" one, to describe the language name. Here is a simple example:

             %baselang PT
             %languages EN FR

             %description PT Portuguese
             %description EN English
             %description FR French

   <b>I18N</b>
       Internationalization functions, "languages" and "setLanguage" should be used before any other function or
       constructor.  Note  that  when  loading  a saved thesaurus, descriptions defined on that file will be not
       translated.  That's important!

         interfaceLanguages()

       This function returns a list of languages that can be used on the current Thesaurus version.

         interfaceSetLanguage( &lt;lang-name&gt; )

       This function turns on the language specified. So, it is the first function you should  call  when  using
       this  module.  By  default, it uses Portuguese. Future version can change this, so you should call it any
       way.

</pre><h4><b>API</b></h4><pre>
       This module uses a perl object oriented model programming, so you must create an object with one  of  the
       "thesaurusNew", "thesaurusLoad" or "thesaurusRetrieve" commands. Next commands should be called using the
       <b>OO</b> fashion.

</pre><h4><b>Constructors</b></h4><pre>
   <b>thesaurusNew</b>
       To  create an empty thesaurus object. The returned newly created object contains the inversion properties
       from the ISO classes and some stub descriptions for the same classes.

   <b>thesaurusLoad</b>
       To use the "thesaurusLoad" function, you must supply a file name.  This file name  should  correspond  to
       the  ISO  ASCII file as defined on earlier sections. It returns the object with the contents of the file.
       If the file does not defined relations and descriptions about the ISO classes, they are added.

       Also,

         $obj = thesaurusLoad({ completed =&gt; 1}, 'iso-file');

       can be used to say that the thesaurus needs  <b>not</b> to be complete after load.

   <b>thesaurusMultiLoad</b>
       You can join different thesaurus ISO files using this function:

         $obj = thesaurusMultiLoad('iso-file1','iso-file2',...);

   <b>appendThesaurus</b>
       You can also append a thesaurus ISO (or another thesaurus object) to a loaded thesaurus.  For  that,  use
       one of:

         $obj-&gt;appendThesaurus("iso-file");
         $obj-&gt;appendThesaurus( $other_thesaurus_object );

   <b>thesaurusLoadM</b>
       This method is used to load a thesaurus on the meta-thesaurus format. This is still under development.

   <b>thesaurusRetrieve</b>
       Everybody knows that text access and parsing of files is not efficient. So, this module can save and load
       thesaurus from Storable files. This function should receive a file name from a file which was saved using
       the "storeOn" function.

</pre><h4><b>Methods</b></h4><pre>
   <b>save</b>
       This  method dumps the object on an ISO ASCII file. Note that the sequence "thesaurusLoad", "save" is not
       the identity function. Comments are removed and processing instructions can be  added.  To  use  it,  you
       should supply a file name.

       Note:  if  the  process  fails, this method will return 0. Any other method die when failing to save on a
       file.

   <b>meta2str</b>
       This method returns the ISO ascii description of the metadata.

   <b>storeOn</b>
       This method saves the thesaurus object in Storable format. You should use it when you want to  load  with
       the "thesaurusRetrieve" function.

   <b>addTerm</b>
       You  can add terms definitions using the perl API. This method adds a term on the thesaurus. Note that if
       that term already exists, all its relations will be deleted.

   <b>all_terms</b>
       Returns an array with all terms for the thesaurus base language.  NOTE: this function is deprecated.  Use
       allTerms instead.

   <b>allTerms</b>
       Returns an array with all terms for the thesaurus base language.

   <b>topName</b>
       Returns the term in the top of the thesaurus, or defined a new one if called with an argument.

   <b>top_name</b>
       Deprecated. See "&lt;topName"&gt;;

   <b>addRelation</b>
       To  add  relations  to  a  term,  use  this  method.  It can be called again and again. Previous inserted
       relations will not be deleted.  This method can be used with a list of terms for the relation like:

         $obj-&gt;addRelation('Animal','NT','cat','dog','cow','camel');

       Note: After you add a big amount of relations, autocomplete  the  thesaurus  using  the  $obj-&gt;<b>complete()</b>
       method. Completing after each relation addiction is time and cpu consuming.

   <b>hasRelation</b>
       Checks if a specific relation exists in the Thesaurus:

         if ($obj-&gt;hasRelation('Animal','NT','cat')) { ... }

       You can check if a term has a relation "X" with anything:

         if ($obj-&gt;hasRelation('Animal','SN')) { ... }

   <b>deleteRelation</b>
         $obj-&gt;deleteRelation('Animal','NT','cat','dog','cow','camel');

   <b>deleteTerm</b>
       Use this method to remove all references of the term supplied. Note that <b>all</b> references will be deleted.

   <b>describe</b>
       You  can  use this method to describe some relation class. You can use it to change the description of an
       existing class (like the ISO ones) or to define a new class.

   <b>isDefined</b>
       Use this method to check if a term exists in the thesaurus.

   <b>setExternal</b>
       Use this method to define that a relation is "extern".

   <b>isExternal</b>
       Use this method to check if a relation is "extern".

   <b>isLanguage</b>
       Use this method to check if a relation is a Language.

   <b>getdefinition</b>
       Deprecated. Use "&lt;getDefinition"

   <b>getDefinition</b>
       Returns the definition for a term. The definition is a feature structure containing the term information.

   <b>getDescription</b>
       Given a relation name and a language (or the default will be used), it returns the description  for  that
       relation.

   <b>relations</b>
       Call this method with a term, and it returns a list of the relations defined for that term.

   <b>addInverse</b>
       This  method should be used to describe the inversion property to relation classes. Note that if there is
       some previous property about any of the relations, it will de deleted. If any of the relations  does  not
       exist, it will be added.

   <b>order</b>
       With this method you can define (and access) the order of classes. This order is used whenever you call a
       dump function, or the navigation CGI.

   <b>navigate</b>
       This  function  is  a  some  what type of CGI included on a object method. You must supply an associative
       array of CGI parameters. This method prints an HTML thesaurus for Web Navigation.

       The typical thesaurus navigation CGI is:

         #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?perl">/usr/bin/perl</a> -w

         use CGI qw/:standard/;
         use Biblio::Thesaurus;

         print header;
         for (param()) { $arg{$_} = param($_) }
         $thesaurus = thesaurusLoad("thesaurus_file");
         print $thesaurus-&gt;navigate(%arg);

       This method can receive, as first argument, a reference to an associative array with  some  configuration
       variables like what relations to be expanded and what language to be used by default.

       So, in the last example we could write

         $thesaurus-&gt;navigate(+{expand=&gt;['NT', 'USE'],
                                lang  =&gt;'EN'})

       meaning that the structure should show two levels of 'NT' and 'USE' relations, and that it should use the
       English language.

       These options include:

       capitalize
           try to capitalize terms when they are the title of the page.

       expand
           a  reference  to  a  list  of relations that should be expanded at first level; Defaults to the empty
           list.

       title
           can be "yes" or "no". If it is "no", the current term will not be  shown  as  a  title;  Defaults  to
           "yes".

       scriptname
           the name of the script the links should point on. Defaults to current page name.

       level1hide
           a  reference  to  a list of relations to do not show on the first level.  Defaults to the empty list.
           Useful to hide the 'LEN' relation when using Library::Simple.

       level2size
           the number of terms to be shown on each second level relation; Defaults to 0 (all terms).

       level2hide
           a reference to a list of relations to do not show on the second level. Defaults to the empty list.

       topic_name
           the name of the topic CGI parameter (default: "t")

   <b>dumpHTML</b>
       This method returns a big string containing all the thesaurus in HTML. It is mainly used for debug.

   <b>getHTMLTop</b>
       This method returns the HTML needed for the top level of the browsing thesaurus. It can  be  useful  when
       putting a top level on the first page of a portal.

   <b>complete</b>
       This  function  completes  the  thesaurus  based  on the invertibility properties. This operation is only
       needed when adding terms and relations by this API. Whenever the system loads a thesaurus ISO file, it is
       completed.

   <b>baselang</b>
       Use this method to set or retrieve the base language of the thesaurus.  If no baselang is  provided,  the
       value "_" is returned

   <b>downtr</b>
       The  "downtr"  method  is  used to produce something from a set of terms.  When no term is given, the all
       thesaurus is taken.  It should be passed as argument a term  and  an  associative  array  (handler)  with
       anonymous  subroutines that process each relation. These functions can use the pre-instantiated variables
       $term, $rel, @terms.  The handler can have three  special  functions:  "-default"  (default  handler  for
       relations  that don't have a defined function in the handler), "-eachTerm" executed with each term output
       (received as $_), and "-end" executed over the output of the the other functions (received as $_),

       If a "-order" array reference is provided, the correspondent order of the relations will be used.

       Example:

          $the-&gt;downtr( { NT       =&gt; sub{ ""},    #Do nothing with NT relations
                          -default =&gt; sub{ print "$rel", join(",",@terms) }
                        },
                        "frog" );

          print $thesaurus-&gt;downtr(
            {-default  =&gt; sub { "\n$rel \t".join("\n\t",@terms)},
             -eachTerm =&gt; sub { "\n______________ $term $_"},
             -end      =&gt; sub { "Thesaurus :\n $_ \nFIM\n"},
             -order    =&gt; ["BT","NT","RT"],
            });

       Both functions return a output value: the concatenation of the internal values (but  functions  can  also
       work with side effects)

   <b>depth_first</b>
       The  "depth_first" method is used to get the list of terms (in fact the tree of terms) related with $term
       by relations @r up to the level $lev

         $hashref = $the-&gt;depth_first($term ,$lev, @r)

         $hashref = $the-&gt;depth_first("frog", 2, "NT","UF")

       $lev should be an integer greater then 0.

   <b>tc</b> <b>transitive</b> <b>closure</b>
       The "tc" method is used to eval the transitive closure of the relations @r starting from a term $term

         $the-&gt;tc($term , @r)

         $the-&gt;tc("frog", "NT","UF")

   <b>terms</b>
       The "terms" method is used to get all the terms related by relations @r with $term

         $the-&gt;terms($term , @r);

         $the-&gt;terms("frog", "NT", "UF");

   <b>toTex</b>
       Writes a thesaurus in LaTeX format...  The first argument is used to pass a tag  substitution  hash.   It
       uses  downtr function to make the translation; a downtr handler can be given to tune some transformations
       details...

         print $thesaurus-&gt;toTex(
                {EN=&gt;["\\\\\\emph{Ingles} -- ",""]},
                {FR =&gt; sub{""}})

   <b>toXml</b>
       This method writes a thesaurus in XML format...  The first argument is used fo pass  a  tag  substitution
       hash.   It  uses  downtr  function  to  make  the translation; a downtr handler can be given to tune some
       transformations details...

         print $thesaurus-&gt;toXml();

   <b>toJson</b>
       Returns a JSON tree based on NT relation. Other relation can be supplied as an argument. Future  versions
       might include language selection.

         print $thesaurus-&gt;toJson();

   <b>toHash</b>
       Returns a Hash reference with a tree based on NT relation. Other relation can be supplied as an argument.
       Future versions might include language selection.

         print $thesaurus-&gt;toHash();

</pre><h4><b>AUTHOR</b></h4><pre>
       Alberto Simoes, &lt;<a href="mailto:albie@alfarrabio.di.uminho.pt">albie@alfarrabio.di.uminho.pt</a>&gt;

       Jos� Joao Almeida, &lt;<a href="mailto:jj@di.uminho.pt">jj@di.uminho.pt</a>&gt;

       Sara Correia,  &lt;<a href="mailto:sara.correia@portugalmail.com">sara.correia@portugalmail.com</a>&gt;

       This module is included in the Natura project. You can visit it at <a href="http://natura.di.uminho.pt">http://natura.di.uminho.pt</a>, and access
       the SVN tree.

</pre><h4><b>COPYRIGHT</b> <b>&amp;</b> <b>LICENSE</b></h4><pre>
       Copyright 2000-2012 Project Natura.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The example thesaurus file ("examples/thesaurus"),

       Manpages:

         Biblio::<a href="../man3/WebPortal.3.html">WebPortal</a>(3)
         Biblio::<a href="../man3/Catalog.3.html">Catalog</a>(3)
         Biblio::Catalog::<a href="../man3/Bibtex.3.html">Bibtex</a>(3)
         <a href="../man1/perl.1.html">perl</a>(1) manpages.

   <b>loading</b> <b>from</b> <b>Iso</b> <b>2788</b> <b>=head2</b> <b>building</b> <b>a</b> <b>thesaurus</b> <b>with</b> <b>internal</b> <b>constructors</b> <b>=head2</b> <b>writing</b>  <b>a</b>  <b>thesaurus</b>  <b>in</b>
       <b>another</b> <b>format</b>
perl v5.40.1                                       2025-02-18                             <u>Biblio::<a href="../man3pm/Thesaurus.3pm.html">Thesaurus</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>