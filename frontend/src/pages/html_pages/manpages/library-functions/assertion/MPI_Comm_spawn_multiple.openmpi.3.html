<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C Syntax</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/openmpi-doc">openmpi-doc_5.0.7-1build1_all</a> <br><br><pre>
</pre><h4><b>SYNTAX</b></h4><pre>
   <b>C</b> <b>Syntax</b>
          #include &lt;mpi.h&gt;

          int MPI_Comm_spawn_multiple(int count, char *array_of_commands[],
               char **array_of_argv[], const int array_of_maxprocs[], const MPI_Info
               array_of_info[], int root, MPI_Comm comm, MPI_Comm *intercomm,
               int array_of_errcodes[])

   <b>Fortran</b> <b>Syntax</b>
          USE MPI
          ! or the older form: INCLUDE 'mpif.h'
          MPI_COMM_SPAWN_MULTIPLE(COUNT, ARRAY_OF_COMMANDS, ARRAY_OF_ARGV,
               ARRAY_OF_MAXPROCS, ARRAY_OF_INFO, ROOT, COMM, INTERCOMM,
               ARRAY_OF_ERRCODES, IERROR)
               INTEGER COUNT, ARRAY_OF_INFO(*), ARRAY_OF_MAXPROCS(*), ROOT,
                       COMM, INTERCOMM, ARRAY_OF_ERRCODES(*), IERROR
               CHARACTER*(*) ARRAY_OF_COMMANDS(*), ARRAY_OF_ARGV(COUNT, *)

   <b>Fortran</b> <b>2008</b> <b>Syntax</b>
          USE mpi_f08
          MPI_Comm_spawn_multiple(count, array_of_commands, array_of_argv,
               array_of_maxprocs, array_of_info, root, comm, intercomm,
                       array_of_errcodes, ierror)
               INTEGER, INTENT(IN) :: count, array_of_maxprocs(*), root
               CHARACTER(LEN=*), INTENT(IN) :: array_of_commands(*)
               CHARACTER(LEN=*), INTENT(IN) :: array_of_argv(count, *)
               TYPE(MPI_Info), INTENT(IN) :: array_of_info(*)
               TYPE(MPI_Comm), INTENT(IN) :: comm
               TYPE(MPI_Comm), INTENT(OUT) :: intercomm
               INTEGER :: array_of_errcodes(*)
               INTEGER, OPTIONAL, INTENT(OUT) :: ierror

</pre><h4><b>INPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>count</b>: Number of commands (positive integer, significant to MPI only at <u>root</u> — see NOTES).

       • <b>array_of_commands</b>: Programs to be executed (array of strings, significant only at <u>root</u>).

       • <b>array_of_argv</b>: Arguments for <u>commands</u> (array of array of strings, significant only at <u>root</u>).

       • <b>array_of_maxprocs</b>:  Maximum  number  of  processes  to  start  for  each  command  (array  of integers,
         significant only at <u>root</u>).

       • <b>array_of_info</b>: Info objects telling the runtime system where and  how  to  start  processes  (array  of
         handles, significant only at <u>root</u>).

       • <b>root</b>: Rank of process in which previous arguments are examined (integer).

       • <b>comm</b>: Intracommunicator containing group of spawning processes (handle).

</pre><h4><b>OUTPUT</b> <b>PARAMETERS</b></h4><pre>
       • <b>intercomm</b>: Intercommunicator between original group and the newly spawned group (handle).

       • <b>array_of_errcodes</b>: One code per process (array of integers).

       • <b>ierror</b>: Fortran only: Error status (integer).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>MPI_Comm_spawn_multiple</u>  is  identical to <u>MPI_Comm_spawn</u> except that it can specify multiple executables.
       The first argument, <u>count</u>, indicates the number of executables. The next three arguments  are  arrays  of
       the  corresponding  arguments  in  <u>MPI_Comm_spawn</u>.  The next argument, <u>array_of_info</u>, is an array of <u>info</u>
       arguments, one for each executable. See the INFO ARGUMENTS section for more information.

       For the Fortran version of <u>array_of_argv</u>, the element <u>array_of_argv</u>(i,j) is the jth argument  to  command
       number i.

       In  any language, an application may use the constant MPI_ARGVS_NULL (which is likely to be <b>(char</b> <b>**)0</b> in
       C) to specify that no arguments should be passed to  any  commands.  The  effect  of  setting  individual
       elements of <u>array_of_argv</u> to MPI_ARGV_NULL is not defined. To specify arguments for some commands but not
       others,  the  commands  without  arguments  should  have a corresponding <u>argv</u> whose first element is null
       <b>((char</b> <b>*)0</b> in C and empty string in Fortran).

       All of the spawned processes have the same  MPI_COMM_WORLD.  Their  ranks  in  MPI_COMM_WORLD  correspond
       directly  to  the  order  in  which the commands are specified in <u>MPI_Comm_spawn_multiple</u>. Assume that m1
       processes are generated by the first command, m2 by the second, etc. The processes corresponding  to  the
       first  command  have  ranks  0,  1,…,  m1-1.  The processes in the second command have ranks m1, m1+1, …,
       m1+m2-1. The processes in the third have ranks m1+m2, m1+m2+1, …, m1+m2+m3-1, etc.

       The <u>array_of_errcodes</u> argument is 1-dimensional array of size

           _ count
          \       n ,
          /_ i=1   i

       where i is the ith element of <u>array_of_maxprocs</u>. Command number <u>i</u> corresponds to the i  contiguous  slots
       in this array from element

                           _              _
           _ i-1          |   _ i          |
          \       n ,  to |  \      n      | -1
          /_ j=1   i      |  /_ j=1  j     |
                          |_              _|

       Error codes are treated as for <u>MPI_Comm_spawn</u>.

</pre><h4><b>INFO</b> <b>ARGUMENTS</b></h4><pre>
       The following keys for <u>info</u> are recognized in “#PACKAGE_NAME#”. (The reserved values mentioned in Section
       5.3.4 of the MPI-2 standard are not implemented.)

          Key                    Type     Description
          ---                    ----     -----------

          host                   char *   Comma-separated list of hosts on which
                                          the processes should be spawned.  See
                                          the orte_host man page for an
                                          explanation of how this will be used.
          hostfile               char *   Hostfile containing the hosts on which
                                          the processes are to be spawned. See
                                          the orte_hostfile man page for
                                          an explanation of how this will be
                                          used.
          add-host               char *   Add the specified hosts to the list of
                                          hosts known to this job and use it for
                                          the associated processes. This will be
                                          used similarly to the -host option.
          add-hostfile           char *   Hostfile containing hosts to be added
                                          to the list of hosts known to this job
                                          and use it for the associated
                                          process. This will be used similarly
                                          to the -hostfile option.
          wdir                   char *   Directory where the executable is
                                          located. If files are to be
                                          pre-positioned, then this location is
                                          the desired working directory at time
                                          of execution - if not specified, then
                                          it will automatically be set to
                                          ompi_preload_files_dest_dir.
          ompi_prefix            char *   Same as the --prefix command line
                                          argument to mpirun.
          ompi_preload_binary    bool     If set to true, pre-position the
                                          specified executable onto the remote
                                          host. A destination directory must
                                          also be provided.
          ompi_preload_files     char *   A comma-separated list of files that
                                          are to be pre-positioned in addition
                                          to the executable.  Note that this
                                          option does not depend upon
                                          ompi_preload_binary - files can
                                          be moved to the target even if an
                                          executable is not moved.
          ompi_stdin_target      char *   Comma-delimited list of ranks to
                                          receive stdin when forwarded.
          ompi_non_mpi           bool     If set to true, launching a non-MPI
                                          application; the returned communicator
                                          will be MPI_COMM_NULL. Failure to set
                                          this flag when launching a non-MPI
                                          application will cause both the child
                                          and parent jobs to "hang".
          ompi_param             char *   Pass an OMPI MCA parameter to the
                                          child job.  If that parameter already
                                          exists in the environment, the value
                                          will be overwritten by the provided
                                          value.
          mapper                 char *   Mapper to be used for this job
          map_by                 char *   Mapping directive indicating how
                                          processes are to be mapped (slot,
                                          node, socket, etc.).
          rank_by                char *   Ranking directive indicating how
                                          processes are to be ranked (slot,
                                          node, socket, etc.).
          bind_to                char *   Binding directive indicating how
                                          processes are to be bound (core, slot,
                                          node, socket, etc.).
          path                   char *   List of directories to search for
                                          the executable
          npernode               char *   Number of processes to spawn on
                                          each node of the allocation
          pernode                bool     Equivalent to npernode of 1
          ppr                    char *   Spawn specified number of processes
                                          on each of the identified object type
          env                    char *   Newline-delimited list of envars to
                                          be passed to the spawned procs

       <u>bool</u>  info keys are actually strings but are evaluated as follows: if the string value is a number, it is
       converted to an integer and cast to a boolean (meaning that zero integers are false and  non-zero  values
       are  true). If the string value is (case-insensitive) “yes” or “true”, the boolean is true. If the string
       value is (case-insensitive) “no”  or  “false”,  the  boolean  is  false.  All  other  string  values  are
       unrecognized, and therefore false.

       Note  that  if  any of the info handles have <u>ompi_non_mpi</u> set to true, then all info handles must have it
       set to true. If some are set to true, but others are set to false (or are unset),  MPI_ERR_INFO  will  be
       returned.

       Note  that  in “#PACKAGE_NAME#”, the first array location in <u>array_of_info</u> is applied to all the commands
       in <u>array_of_commands</u>.

</pre><h4><b>NOTES</b></h4><pre>
       The argument <u>count</u> is interpreted by MPI only at  the  root,  as  is  <u>array_of_argv</u>.  Since  the  leading
       dimension  of  <u>array_of_argv</u> is <u>count</u>, a nonpositive value of <u>count</u> at a nonroot node could theoretically
       cause a runtime bounds check error, even though <u>array_of_argv</u> should be ignored  by  the  subroutine.  If
       this happens, you should explicitly supply a reasonable value of <u>count</u> on the nonroot nodes.

       Similar  to  <u>MPI_Comm_spawn</u>,  it  is the application’s responsibility to terminate each individual set of
       argv in the <u>array_of_argv</u> argument.  In C, each argv array is terminated by a NULL pointer.  In  Fortran,
       each  argv array is terminated by an empty string (note that compilers will not automatically insert this
       blank string; the application must ensure to have enough space for an empty  string  entry  as  the  last
       element of the array).

       Other  restrictions  apply  to  the <u>array_of_argv</u> parameter; see <u>MPI_Comm_spawn</u>’s description of the <u>argv</u>
       parameter for more details.

       MPI-3.1 implies (but does not directly state) that the argument <u>array_of_commands</u> must  be  an  array  of
       strings  of  length  <u>count</u>.   Unlike  the  <u>array_of_argv</u> parameter, <u>array_of_commands</u> does not need to be
       terminated with a NULL pointer in C or a blank string in Fortran.  Older versions of  Open  MPI  required
       that  <u>array_of_commands</u>  be terminated with a blank string in Fortran; that is no longer required in this
       version of Open MPI.

       Calling <u>MPI_Comm_spawn</u> many times would create many sets  of  children  with  different  MPI_COMM_WORLDs,
       whereas <u>MPI_Comm_spawn_multiple</u> creates children with a single MPI_COMM_WORLD, so the two methods are not
       completely  equivalent. Also if you need to spawn multiple executables, you may get better performance by
       using <u>MPI_Comm_spawn_multiple</u> instead of calling <u>MPI_Comm_spawn</u> several times.

</pre><h4><b>ERRORS</b></h4><pre>
       Almost all MPI routines return an error value; C routines as  the  return  result  of  the  function  and
       Fortran routines in the last argument.

       Before  the  error  value  is  returned,  the current MPI error handler associated with the communication
       object (e.g., communicator, window, file) is called.  If no communication object is associated  with  the
       MPI  call,  then  the call is considered attached to MPI_COMM_SELF and will call the associated MPI error
       handler.  When  MPI_COMM_SELF  is  not  initialized   (i.e.,   before   <u>MPI_Init</u>/<u>MPI_Init_thread</u>,   after
       <u>MPI_Finalize</u>,  or  when using the Sessions Model exclusively) the error raises the initial error handler.
       The initial error handler can be changed by calling <u>MPI_Comm_set_errhandler</u> on MPI_COMM_SELF  when  using
       the  World  model,  or the mpi_initial_errhandler CLI argument to mpiexec or info key to <u>MPI_Comm_spawn</u>/‐
       <u>MPI_Comm_spawn_multiple</u>.  If no other appropriate error handler has been set, then the  MPI_ERRORS_RETURN
       error  handler  is  called for MPI I/O functions and the MPI_ERRORS_ABORT error handler is called for all
       other MPI functions.

       Open MPI includes three predefined error handlers that can be used:

       • <b>MPI_ERRORS_ARE_FATAL</b> Causes the program to abort all connected MPI processes.

       • <b>MPI_ERRORS_ABORT</b> An error handler that can be invoked on a communicator, window, file, or session. When
         called on a communicator, it acts as if <u>MPI_Abort</u> was called on  that  communicator.  If  called  on  a
         window  or file, acts as if <u>MPI_Abort</u> was called on a communicator containing the group of processes in
         the corresponding window or file. If called on a session, aborts only the local process.

       • <b>MPI_ERRORS_RETURN</b> Returns an error code to the application.

       MPI applications can also implement their own error handlers by calling:

       • <u>MPI_Comm_create_errhandler</u> then <u>MPI_Comm_set_errhandler</u>

       • <u>MPI_File_create_errhandler</u> then <u>MPI_File_set_errhandler</u>

       • <u>MPI_Session_create_errhandler</u> then <u>MPI_Session_set_errhandler</u> or at <u>MPI_Session_init</u>

       • <u>MPI_Win_create_errhandler</u> then <u>MPI_Win_set_errhandler</u>

       Note that MPI does not guarantee that an MPI program can continue past an error.

       See the <u>MPI</u> <u>man</u> <u>page</u> for a full list of <u>MPI</u> <u>error</u> <u>codes</u>.

       See the Error Handling section of the MPI-3.1 standard for more information.

       <b>SEE</b> <b>ALSO:</b>

          • <u>MPI_Comm_spawn</u>

          • <u>MPI_Comm_get_parent</u>

          • <u><a href="../man1/mpirun.1.html">mpirun</a>(1)</u>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2003-2025, The Open MPI Community

                                                  Jun 07, 2025                        <u><a href="../man3/MPI_COMM_SPAWN_MULTIPLE.3.html">MPI_COMM_SPAWN_MULTIPLE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>