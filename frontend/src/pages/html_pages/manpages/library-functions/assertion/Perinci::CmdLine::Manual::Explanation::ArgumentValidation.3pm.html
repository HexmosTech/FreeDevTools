<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perinci::CmdLine::Manual::Explanation::ArgumentValidation - Argument validation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libperinci-cmdline-perl">libperinci-cmdline-perl_2.000.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Perinci::CmdLine::Manual::Explanation::ArgumentValidation - Argument validation

</pre><h4><b>VERSION</b></h4><pre>
       This document describes version 2.000.1 of Perinci::CmdLine::Manual::Explanation::ArgumentValidation
       (from Perl distribution Perinci-CmdLine), released on 2024-11-12.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Argument validation is performed before passing the arguments to the function.  It includes: making sure
       required arguments (arguments with "req" property set to true) are specified, the values of specified
       arguments conforms to the argument schema ("schema" property, described in Sah format), and argument
       relation rules (in "args_rels" property in the "args" function metadata property) are followed.

       Arguments will be checked against their schemas for all arguments that are specified by the user <u>or</u> have
       a default value/rules in their schema, e.g.:

        # argument specification

        # this argument has a default clause in its schema
        foo =&gt; {
            schema =&gt; ['str*', default=&gt;'on'],
            ...
        }

        # this argument has a default-value rule clause in its schema
        mod =&gt; {
            schema =&gt; ['perl::modname*', 'x.perl.default_value_rules'=&gt;['Perl::this_mod']],
            ...
        }

</pre><h4><b>FAQ</b></h4><pre>
   <b>How</b> <b>to</b> <b>find</b> <b>out</b> <b>if</b> <b>an</b> <b>argument</b> <b>is</b> <b>set</b> <b>explicitly</b> <b>by</b> <b>the</b> <b>user</b> <b>or</b> <b>is</b> <b>getting</b> <b>a</b> <b>default</b> <b>value</b> <b>from</b> <b>the</b>
       <b>schema/argument</b> <b>specification?</b>
       Use the special argument "-set_ARGNAME".

   <b>How</b> <b>to</b> <b>get</b> <b>the</b> <b>original</b> <b>value</b> <b>on</b> <b>an</b> <b>argument</b> <b>sent</b> <b>by</b> <b>user</b> <b>before</b> <b>the</b> <b>argument</b> <b>is</b> <b>being</b> <b>coerced/filtered/given</b>
       <b>default</b> <b>value</b> <b>by</b> <b>the</b> <b>schema?</b>
       Use the special argument "-orig_ARGNAME".

   <b>How</b> <b>to</b> <b>get</b> <b>the</b> <b>default</b> <b>value</b> <b>of</b> <b>an</b> <b>argument</b> <b>from</b> <b>the</b> <b>schema/argument</b> <b>specifcation?</b>
       Use the special argument "-default_ARGNAME".

   <b>What's</b> <b>the</b> <b>difference</b> <b>between</b> <b>setting</b> <b>a</b> <b>default</b> <b>in</b> <b>the</b> <b>argument</b> <b>specification</b> <b>vs</b> <b>in</b> <b>the</b> <b>schema?</b>
       There are two ways to set a default value. The first one is via the "default" property in argument
       specification:

        # in the function metadata property...
        args =&gt; {
            foo =&gt; {
                schema =&gt; 'str*',
                default =&gt; 'on',
            },
            ...
        }

       This means, if user does not specify the argument:

        # via CLI
        % progname

        # via wrapped function call
        funcname()

       then the function will get a "foo" key in its %args automatically. As well as "-set_foo" set to false,
       "-default_foo" set to "on". We know (from "-set_foo") that "foo" gets its value from the default and not
       from the user explicitly setting it.

       Another way is by setting default value in the schema's "default" clause or "x.perl.default_value_rules"
       property (the latter allows dynamic default values):

        # in the function metadata property...
        args =&gt; {
            bar =&gt; {
                schema =&gt; ['str*', default=&gt;'on'],
                ...
            },
            baz =&gt; {
                schema =&gt; ['perl::modname*', 'x.perl.default_value_rules'=&gt;['Perl::this_mod']],
                ...
            },
            ...
        }

       This means that if the argument value is set to undefined value ("undef"), it will get set the default
       from schema during argument validation:

        # via CLI
        % progname --baz-json 'null'

        # via wrapped function call
        funcname(baz=&gt;undef)

       Function will receive "bar" key in its %args set to "on", "baz" set to e.g. "Some::Module" instead of
       "undef". %args will also contain "-set_bar" (false), "-set_baz" (true), "-orig_baz" ("undef") as well as
       "-default_bar" ("on") and "-default_baz" ("Some::Module").

       You can know from "-set_bar" that the argument is set by default value and not explicitly by user.

</pre><h4><b>HOMEPAGE</b></h4><pre>
       Please visit the project's homepage at &lt;https://metacpan.org/release/Perinci-CmdLine&gt;.

</pre><h4><b>SOURCE</b></h4><pre>
       Source repository is at &lt;https://github.com/perlancar/perl-Perinci-CmdLine&gt;.

</pre><h4><b>AUTHOR</b></h4><pre>
       perlancar &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;

</pre><h4><b>CONTRIBUTING</b></h4><pre>
       To contribute, you can send patches by email/via RT, or send pull requests on GitHub.

       Most of the time, you don't need to build the distribution yourself. You can simply modify the code, then
       test via:

        % prove -l

       If you want to build the distribution (e.g. to try to install it locally on your system), you can install
       Dist::Zilla, Dist::Zilla::PluginBundle::Author::PERLANCAR, Pod::Weaver::PluginBundle::Author::PERLANCAR,
       and sometimes one or two other Dist::Zilla- and/or Pod::Weaver plugins. Any additional steps required
       beyond that are considered a bug and can be reported to me.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by perlancar &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;.

       This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5
       programming language system itself.

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs or feature requests on the bugtracker website
       &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=Perinci-CmdLine&gt;

       When submitting a bug or request, please include a test-file or a patch to an existing test-file that
       illustrates the bug or desired feature.

perl v5.40.0                                       2024-11-15              <u>Perinci::<a href="../man3pm/CmdLi...umentValidation.3pm.html">CmdLi...umentValidation</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>