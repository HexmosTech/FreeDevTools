<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VistaIOIdentifyFiles - identify files specified by command line arguments</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvistaio-dev">libvistaio-dev_1.2.19-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       VistaIOIdentifyFiles - identify files specified by command line arguments

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;vistaio.h&gt;</b>

       <b>VistaIOBoolean</b> <b>VistaIOIdentifyFiles</b> <b>(</b><u>noptions</u><b>,</b> <u>options</u><b>,</b> <u>keyword</u><b>,</b> <u>argc</u><b>,</b> <u>argv</u><b>,</b> <u>fd</u><b>)</b>
              <b>int</b> <u>noptions</u><b>;</b>
              <b>VistaIOOptionDescRec</b> <u>options</u><b>[</b><u>noptions</u><b>];</b>
              <b>VistaIOStringConst</b> <u>keyword</u><b>;</b>
              <b>int</b> <b>*</b><u>argc</u><b>;</b>
              <b>char</b> <b>*</b><u>argv</u><b>;</b>
              <b>int</b> <u>fd</u><b>;</b>

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>noptions</u>  Specifies the number of entries in the table of option descriptors.

       <u>options</u>   Specifies the location of the table of option descriptors.

       <u>keyword</u>   Specifies the option keyword that is used on the command line to specify filenames.

       <u>argc</u>      Specifies  the  number  of  command  line  arguments  to  be  parsed, and returns the number of
                 arguments that were not recognized as valid filenames.

       <u>argv</u>      Specifies a vector of command line arguments  to  be  parsed,  and  returns  a  vector  of  the
                 arguments that were not recognized as valid filenames.

       <u>fd</u>        May  specify  an open file descriptor that should be checked to ensure it corresponds to a file
                 or pipe if no filenames are explicitly given by command line arguments. Or  it  may  be  -1  to
                 indicate that no such checking should be done.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       By  convention,  a  Vista program that reads one or more files can be told of those files in any of three
       ways:

         (a) the   filenames   can   be   supplied   as   arguments   to   a   command   line   option    (e.g.,
             <b>vxview</b> <b>-in</b> <u>file1</u> <u>file2</u> ...);

         (b) the  filenames  can be supplied as command line arguments not associated with any particular option
             (e.g., <b>vxview</b> <u>file1</u> <u>file2</u> ...); or

         (c) a file can be directed to the program's standard input stream (e.g., <b>vxview</b> <b>&lt;</b> <u>file1</u>).

       In parsing a command's arguments, these alternatives are considered in order. That is, first the  program
       looks for an appropriate command line option (e.g., <b>-in</b>). If no such option has been specified, it checks
       for command line arguments not associated with any option. If those are also absent, it tries to read its
       file from the standard input stream.

       Similarly,  an output file may be specified using a command line option (e.g., <b>vconvolve</b> <b>-out</b> <u>file1</u>), or,
       by omitting the option and directing the program's standard output stream (e.g., <b>vconvolve</b> <b>&gt;</b> <u>file1</u>).

       <b>VistaIOIdentifyFiles</b> identifies a program's input files or output files according to this convention.  It
       is  called  after  <b><a href="../man3/VistaIOParseCommand.3.html">VistaIOParseCommand</a></b>(3) has parsed any command line arguments that can be identified as
       options, leaving the remaining arguments in <u>*argc</u> and <u>argv</u>.  <b>VistaIOIdentifyFiles</b> is then called once  to
       identify any input files, and perhaps again to identify an output file.

       The  <u>noptions</u>  and  <u>options</u>  parameters  specify  the  table used earlier by <b>VistaIOParseCommand</b> to parse
       command line options. (See <b><a href="../man3/VistaIOoption.3.html">VistaIOoption</a></b>(3) for details.) The <u>argc</u> and <u>argv</u> parameters specify a list  of
       command  line  arguments that <b>VistaIOParseCommand</b> has returned as unparsed (including the program's name,
       which should be first in this list). The <u>keyword</u> parameter specifies the command line option that may  be
       used  to  specify  filenames  (e.g., ``in'' or ``out''), absent any ``-'' prefix. The entry in the option
       table for the option specified by <u>keyword</u> must (a) refer to a ``found'' flag that <b>VistaIOParseCommand</b> can
       use to record whether or not the option is present on the command line, and (b) refer to a location where
       the option's arguments can be stored.

       <b>VistaIOIdentifyFiles</b> consults the ``found'' flag to determine whether  the  option  was  present  on  the
       command  line.  If it was, <b>VistaIOIdentifyFiles</b> returns immediately. Otherwise, it then examines <u>*argc</u> to
       determine whether an appropriate number of  unparsed  command  line  arguments  exist.  If  there  are  a
       sufficient  number  of  arguments  present,  they are interpreted as filenames and stored at the location
       indicated by the option table entry

       Finally, if no filenames are found either as arguments to a -<u>keyword</u> option or as additional command line
       arguments, <b>VistaIOIdentifyFiles</b> considers the possibility that  a  file  has  been  attached  to  a  file
       descriptor  such as the standard input or output stream. You may wish to ensure that a file is allowed to
       default to one of these streams only if the stream has been associated with a file or  pipe,  and  not  a
       terminal.   In  that  case,  pass  as  <u>fd</u>  the  file  descriptor that will serve as the default source or
       destination of the file, and <b>VistaIOIdentifyFiles</b> will check that it is indeed associated with a file  or
       pipe. Otherwise, pass -1 for <u>fd</u> and it will not perform this check.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>VistaIOIdentifyFiles</b> returns <b>TRUE</b> if it finds one or more files specified on the command line, and if the
       number of files specified is compatible with the <u>number</u> field of the option table entry. It returns <b>FALSE</b>
       if  no files were specified, if the wrong number of files were specified, or if the file would default to
       a file descriptor but the file descriptor <u>fd</u> is not associated with a file or pipe.

       On successful return <b>VistaIOIdentifyFiles</b> will have eliminated, from the list represented  by  <u>*argc</u>  and
       <u>argv</u>,  any  command  line  arguments  that  it identified as filenames. Also, the filenames found will be
       stored at the location indicated by the option table entry for <u>keyword</u>. A default to the  standard  input
       or output stream will be identified by a filename of ``-''.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The following fragment is drawn from a program that reads one or more files and writes a single file. The
       input  files may be specified with a <b>-in</b> option, as extra command line arguments, or by being directed to
       the standard input stream. The output file may be specified with a <b>-out</b> option, and, if  that  option  is
       not  present,  the  file  will  be  written  to  the  standard  output stream regardless of whether it is
       associated with a file or a terminal.

       <b>VistaIOArgVector</b> <b>in_filenames;</b>
       <b>VistaIOStringConst</b> <b>out_filename;</b>
       <b>VistaIOBoolean</b> <b>in_found,</b> <b>out_found;</b>

       <b>VistaIOOptionDescRec</b> <b>options[]</b> <b>=</b> <b>{</b>
            <b>{</b> <b>"in",</b> <b>VistaIOStringRepn,</b> <b>0,</b> <b>&amp;</b> <b>in_filenames,</b> <b>&amp;</b> <b>in_found,</b>
                 <b>NULL,</b> <b>"Input</b> <b>file(s)"</b> <b>},</b>
            <b>{</b> <b>"out",</b> <b>VistaIOStringRepn,</b> <b>1,</b> <b>&amp;</b> <b>out_filename,</b> <b>&amp;</b> <b>out_found,</b>
                 <b>NULL,</b> <b>"Output</b> <b>file"</b> <b>}</b>
       <b>};</b>

       <b>main</b> <b>(int</b> <b>argc,</b> <b>char</b> <b>*argv)</b>
       <b>{</b>
            <b>/*</b> <b>Parse</b> <b>command</b> <b>line</b> <b>options:</b> <b>*/</b>
            <b>if</b> <b>(!</b> <b>VistaIOParseCommand</b> <b>(VistaIONumber</b> <b>(options),</b> <b>options,</b>
                                <b>&amp;</b> <b>argc,</b> <b>argv))</b> <b>{</b>
       <b>Usage:</b>         <b>VistaIOReportUsage</b> <b>(argv[0],</b> <b>VistaIONumber</b> <b>(options),</b> <b>options,</b>
                                <b>"file1</b> <b>file2...");</b>
                 <b>exit</b> <b>(1);</b>
            <b>}</b>

            <b>/*</b> <b>Identify</b> <b>input</b> <b>file(s):</b> <b>*/</b>
            <b>if</b> <b>(!</b> <b>VistaIOIdentifyFiles</b> <b>(VistaIONumber</b> <b>(options),</b> <b>options,</b> <b>"in",</b>
                                <b>&amp;</b> <b>argc,</b> <b>argv,</b> <b>0))</b>
                 <b>goto</b> <b>Usage;</b>

            <b>/*</b> <b>Any</b> <b>remaining</b> <b>unparsed</b> <b>arguments</b> <b>are</b> <b>erroneous:</b> <b>*/</b>
            <b>if</b> <b>(argc</b> <b>&gt;</b> <b>1)</b> <b>{</b>
                 <b>VistaIOReportBadArgs</b> <b>(argc,</b> <b>argv);</b>
                 <b>goto</b> <b>Usage;</b>
            <b>}</b>

            <b>/*</b> <b>Identify</b> <b>output</b> <b>file:</b> <b>*/</b>
            <b>if</b> <b>(!</b> <b>VistaIOIdentifyFiles</b> <b>(VistaIONumber</b> <b>(options),</b> <b>options,</b> <b>"out",</b>
                                <b>&amp;</b> <b>argc,</b> <b>argv,</b> <b>-1))</b>
                 <b>goto</b> <b>Usage;</b>

            <b>/*</b> <b>Open</b> <b>and</b> <b>process</b> <b>each</b> <b>input</b> <b>file:</b> <b>*/</b>
            <b>for</b> <b>(i</b> <b>=</b> <b>0;</b> <b>i</b> <b>&lt;</b> <b>in_filenames.number;</b> <b>i++)</b> <b>{</b>
                 <b>filename</b> <b>=</b> <b>((VistaIOStringConst</b> <b>*)</b> <b>in_filename.vector)[i];</b>
                 <b>if</b> <b>(strcmp</b> <b>(filename,</b> <b>"-")</b> <b>!=</b> <b>0)</b> <b>{</b>
                      <b>f</b> <b>=</b> <b>fopen</b> <b>(filename,</b> <b>"r");</b>
                      <b>if</b> <b>(f</b> <b>==</b> <b>NULL)</b>
                           <b>VistaIOError</b> <b>("Unable</b> <b>to</b> <b>open</b> <b>file</b> <b>\"%s\"",</b> <b>filename);</b>
                 <b>}</b> <b>else</b> <b>f</b> <b>=</b> <b>stdin;</b>

                 ...

            <b>}</b>
       <b>}</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/VistaIOOpenFile.3.html">VistaIOOpenFile</a></b>(3), <b><a href="../man3/VistaIOParseCommand.3.html">VistaIOParseCommand</a></b>(3), <b><a href="../man3/VistaIOReportBadArgs.3.html">VistaIOReportBadArgs</a></b>(3), <b><a href="../man3/VistaIOReportUsage.3.html">VistaIOReportUsage</a></b>(3),
       <b><a href="../man3/VistaIOoption.3.html">VistaIOoption</a></b>(3),

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>VistaIOIdentifyFiles</b> reports errors in command line options by printing directly to  the  standard  error
       stream.  Error reports include the program name obtained from <u>argv</u>[0]. The following messages may be pro‐
       duced:

       ``<u>n</u> files must be specified by -<u>keyword</u> or extra command arguments''
              The program requires that <u>n</u> files be specified (<u>n</u> &gt; 1). Neither a -<u>keyword</u> option was  present  on
              the  command line, nor were there at least <u>n</u> unparsed arguments that could be interpreted as file‐
              names.

       ``No file specified by -<u>keyword</u>, extra command argument, or &lt;''
              The program requires that at least one file be specified, and it can be specified in any of  three
              ways. However, it wasn't specified in any form.

       In addition, <b>VistaIOIdentifyFiles</b> may invoke <b>VistaIOError</b> with the following messages:

       ``Option -<u>keyword</u> not defined in option table''
              The <u>keyword</u> parameter specified a keyword not defined in the option table.

       ``No value storage for option -<u>keyword''</u>
              The <u>keyword</u> parameter specifies an option table entry whose <u>value</u> field is <b>NULL</b>

       ``No "found" flag for option -<u>keyword''</u>
              The  <u>keyword</u>  parameter specifies an option table entry whose <u>found</u> field doesn't point to a dedi‐
              cated <b>VistaIOBoolean</b> variable.

       ``Failed to fstat() fd <u>fd</u>''
              An <b>fstat</b>() call failed on the supplied file descriptor, <u>fd</u>.

</pre><h4><b>AUTHOR</b></h4><pre>
       Art Pope &lt;<a href="mailto:pope@cs.ubc.ca">pope@cs.ubc.ca</a>&gt;

       Adaption to vistaio: Gert Wollny &lt;<a href="mailto:gw.fossdev@gmail.com">gw.fossdev@gmail.com</a>&gt;

VistaIO Version 1.2.14                            24 April 1993                          <u><a href="../man3/VistaIOIdentifyFiles.3.html">VistaIOIdentifyFiles</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>