<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>stpncpy, strncpy - fill a fixed-size buffer with non-null bytes from a string, padding with null bytes as</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       stpncpy, strncpy - fill a fixed-size buffer with non-null bytes from a string, padding with null bytes as
       needed

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/string.h">string.h</a>&gt;</b>

       <b>char</b> <b>*strncpy(char</b> <u>dst</u><b>[restrict</b> <b>.</b><u>dsize</u><b>],</b> <b>const</b> <b>char</b> <b>*restrict</b> <u>src</u><b>,</b>
                     <b>size_t</b> <u>dsize</u><b>);</b>
       <b>char</b> <b>*stpncpy(char</b> <u>dst</u><b>[restrict</b> <b>.</b><u>dsize</u><b>],</b> <b>const</b> <b>char</b> <b>*restrict</b> <u>src</u><b>,</b>
                     <b>size_t</b> <u>dsize</u><b>);</b>

   Feature Test Macro Requirements for glibc (see <b><a href="../man7/feature_test_macros.7.html">feature_test_macros</a></b>(7)):

       <b>stpncpy</b>():
           Since glibc 2.10:
               _POSIX_C_SOURCE &gt;= 200809L
           Before glibc 2.10:
               _GNU_SOURCE

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These  functions  copy non-null bytes from the string pointed to by <u>src</u> into the array pointed to by <u>dst</u>.
       If the source has too few non-null bytes to fill the destination, the functions pad the destination  with
       trailing  null  bytes.   If  the  destination buffer, limited by its size, isn't large enough to hold the
       copy, the resulting character sequence is truncated.  For the difference between the two  functions,  see
       RETURN VALUE.

       An implementation of these functions might be:

           char *
           strncpy(char *restrict dst, const char *restrict src, size_t dsize)
           {
               stpncpy(dst, src, dsize);
               return dst;
           }

           char *
           stpncpy(char *restrict dst, const char *restrict src, size_t dsize)
           {
               size_t  dlen;

               dlen = strnlen(src, dsize);
               return memset(mempcpy(dst, src, dlen), 0, dsize - dlen);
           }

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>strncpy</b>()
              returns <u>dst</u>.

       <b>stpncpy</b>()
              returns a pointer to one after the last character in the destination character sequence.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌─────────────────────────────────────────────────────────────────────────────┬───────────────┬─────────┐
       │ <b>Interface</b>                                                                   │ <b>Attribute</b>     │ <b>Value</b>   │
       ├─────────────────────────────────────────────────────────────────────────────┼───────────────┼─────────┤
       │ <b>stpncpy</b>(), <b>strncpy</b>()                                                        │ Thread safety │ MT-Safe │
       └─────────────────────────────────────────────────────────────────────────────┴───────────────┴─────────┘

</pre><h4><b>STANDARDS</b></h4><pre>
       <b>strncpy</b>()
              C11, POSIX.1-2008.

       <b>stpncpy</b>()
              POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>strncpy</b>()
              C89, POSIX.1-2001, SVr4, 4.3BSD.

       <b>stpncpy</b>()
              glibc 1.07.  POSIX.1-2008.

</pre><h4><b>CAVEATS</b></h4><pre>
       The  name of these functions is confusing.  These functions produce a null-padded character sequence, not
       a string (see <b><a href="../man7/string_copying.7.html">string_copying</a></b>(7)).  For example:

           strncpy(buf, "1", 5);       // { '1',   0,   0,   0,   0 }
           strncpy(buf, "1234", 5);    // { '1', '2', '3', '4',   0 }
           strncpy(buf, "12345", 5);   // { '1', '2', '3', '4', '5' }
           strncpy(buf, "123456", 5);  // { '1', '2', '3', '4', '5' }

       It's impossible to distinguish truncation by the result of the call, from a character sequence that  just
       fits  the  destination  buffer; truncation should be detected by comparing the length of the input string
       with the size of the destination buffer.

       If you're going to use this function in chained calls, it would be useful to develop a  similar  function
       that  accepts  a pointer to the end (one after the last element) of the destination buffer instead of its
       size.

</pre><h4><b>EXAMPLES</b></h4><pre>
       #include &lt;<a href="file:/usr/include/err.h">err.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/string.h">string.h</a>&gt;

       int
       main(void)
       {
           char    *p;
           char    buf1[20];
           char    buf2[20];
           size_t  len;

           if (sizeof(buf2) &lt; strlen("Hello world!"))
               errx("strncpy: truncating character sequence");
           strncpy(buf2, "Hello world!", sizeof(buf2));
           len = strnlen(buf2, sizeof(buf2));

           printf("[len = %zu]: ", len);
           fwrite(buf2, 1, len, stdout);
           putchar('\n');

           if (sizeof(buf1) &lt; strlen("Hello world!"))
               errx("stpncpy: truncating character sequence");
           p = stpncpy(buf1, "Hello world!", sizeof(buf1));
           len = p - buf1;

           printf("[len = %zu]: ", len);
           fwrite(buf1, 1, len, stdout);
           putchar('\n');

           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/wcpncpy.3.html">wcpncpy</a></b>(3), <b><a href="../man7/string_copying.7.html">string_copying</a></b>(7)

Linux man-pages 6.9.1                              2024-06-15                                         <u><a href="../man3/stpncpy.3.html">stpncpy</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>