<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ibv_alloc_parent_domain(), ibv_dealloc_pd() - allocate and deallocate the parent domain object</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libibverbs-dev">libibverbs-dev_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ibv_alloc_parent_domain(), ibv_dealloc_pd() - allocate and deallocate the parent domain object

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;infiniband/verbs.h&gt;</b>

       <b>struct</b> <b>ibv_pd</b> <b>*ibv_alloc_parent_domain(struct</b> <b>ibv_context</b> <u>*context</u><b>,</b> <b>struct</b> <b>ibv_parent_domain_init_attr</b> <u>*attr</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ibv_alloc_parent_domain()</b> allocates a parent domain object for the RDMA device context <u>context</u>.

       The  parent  domain object extends the normal protection domain with additional objects, such as a thread
       domain.

       A parent domain is completely interchangeable with the <u>struct</u> <u>ibv_pd</u> used to create it, and can  be  used
       as an input argument to any function accepting a <u>struct</u> <u>ibv_pd.</u>

       The  behavior  of  each  verb  may  be different if the verb is passed a parent domain <u>struct</u> <u>ibv_pd</u> that
       contains a <u>struct</u> <u>ibv_td</u> <u>pointer</u>.  For instance the verb may choose to share  resources  between  objects
       using the same thread domain. The exact behavior is provider dependent.

       The <u>attr</u> argument specifies the following:

       enum ibv_parent_domain_init_attr_mask {
               IBV_PARENT_DOMAIN_INIT_ATTR_ALLOCATORS = 1 &lt;&lt; 0,
               IBV_PARENT_DOMAIN_INIT_ATTR_PD_CONTEXT = 1 &lt;&lt; 1,
       };

       struct ibv_parent_domain_init_attr {
               struct ibv_pd *pd; /* reference to a protection domain, can't be NULL */
               struct ibv_td *td; /* reference to a thread domain, or NULL */
               uint32_t comp_mask;
               void *(*alloc)(struct ibv_pd *pd, void *pd_context, size_t size,
                              size_t alignment, uint64_t resource_type);
               void (*free)(struct ibv_pd *pd, void *pd_context, void *ptr,
                            uint64_t resource_type);
               void *pd_context;
       };

       <b>ibv_dealloc_pd()</b> will deallocate the parent domain as its exposed as an ibv_pd <u>pd</u>.  All resources created
       with the parent domain should be destroyed prior to deallocating the parent domain.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <b>pd</b> Reference to the protection domain that this parent domain uses.

       <b>td</b> An optional thread domain that the parent domain uses.

       <b>comp_mask</b> Bit-mask of optional fields in the ibv_parent_domain_init_attr struct.

       <b>alloc</b> Custom memory allocation function for this parent domain. Provider memory allocations will use this
       function  to  allocate the needed memory.  The allocation function is passed the parent domain <b>pd</b> and the
       user-specified context <b>pd_context.</b>  In addition, the callback receives the <b>size</b> and the <b>alignment</b> of  the
       requested buffer, as well a vendor-specific <b>resource_type</b> , which is derived from the rdma_driver_id enum
       (upper  32  bits) and a vendor specific resource code.  The function returns the pointer to the allocated
       buffer, or NULL to designate an error.  It may also return <b>IBV_ALLOCATOR_USE_DEFAULT</b> asking the callee to
       allocate the buffer using the default allocator.

       The callback makes sure the allocated buffer is initialized with zeros. It is also the responsibility  of
       the  callback  to  make  sure  the  memory  cannot  be  COWed, e.g. by using madvise(MADV_DONTFORK) or by
       allocating anonymous shared memory.

       <b>free</b> Callback to free memory buffers that were allocated using a successful alloc().

       <b>pd_context</b> A pointer for additional user-specific data to be associated  with  this  parent  domain.  The
       pointer is passed back to the custom allocator functions.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>ibv_alloc_parent_domain()</b> returns a pointer to the allocated struct <u>ibv_pd</u> object, or NULL if the request
       fails (and sets errno to indicate the failure reason).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ibv_alloc_parent_domain.3.html">ibv_alloc_parent_domain</a></b>(3), <b><a href="../man3/ibv_dealloc_pd.3.html">ibv_dealloc_pd</a></b>(3), <b><a href="../man3/ibv_alloc_pd.3.html">ibv_alloc_pd</a></b>(3), <b><a href="../man3/ibv_alloc_td.3.html">ibv_alloc_td</a></b>(3)

</pre><h4><b>AUTHORS</b></h4><pre>
       Alex Rosenbaum &lt;<a href="mailto:alexr@mellanox.com">alexr@mellanox.com</a>&gt;

       Yishai Hadas &lt;<a href="mailto:yishaih@mellanox.com">yishaih@mellanox.com</a>&gt;

libibverbs                                         2017-11-06                         <u><a href="../man3/IBV_ALLOC_PARENT_DOMAIN.3.html">IBV_ALLOC_PARENT_DOMAIN</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>