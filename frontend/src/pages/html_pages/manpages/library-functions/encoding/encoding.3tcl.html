<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>encoding - Manipulate encodings</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       encoding - Manipulate encodings

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>encoding</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
________________________________________________________________________________________________________________

</pre><h4><b>INTRODUCTION</b></h4><pre>
       Strings  in  Tcl are logically a sequence of Unicode characters.  These strings are represented in memory
       as a sequence of bytes that may be in one of several encodings: modified UTF-8 (which uses 1 to  4  bytes
       per character), or a custom encoding start as 8 bit binary data.

       Different  operating  system  interfaces  or applications may generate strings in other encodings such as
       Shift-JIS.  The <b>encoding</b> command helps to bridge the gap between Unicode and these other formats.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Performs one of several encoding related operations, depending on <u>option</u>.  The legal <u>option</u>s are:

       <b>encoding</b> <b>convertfrom</b> ?<u>encoding</u>? <u>data</u>

       <b>encoding</b> <b>convertfrom</b> ?<b>-profile</b> <u>profile</u>? ?<b>-failindex</b> <b>var</b>? <u>encoding</u> <u>data</u>                                    2
              Converts <u>data</u>, which should be in binary string encoded as per  <u>encoding</u>,  to  a  Tcl  string.  If
              <u>encoding</u> is not specified, the current system encoding is used.

       The  <b>-profile</b>  option  determines  the  command  behavior  in  the presence of conversion errors. See the 2
       <b>PROFILES</b> section below for details. Any premature termination of processing due  to  errors  is  reported 2
       through an exception if the <b>-failindex</b> option is not specified.                                           2

       If the <b>-failindex</b> is specified, instead of an exception being raised on premature termination, the result 2
       of the conversion up to the point of the error is returned as the result of the command. In addition, the 2
       index  of the source byte triggering the error is stored in <b>var</b>. If no errors are encountered, the entire 2
       result of the conversion is returned and the value <b>-1</b> is stored in <b>var</b>.

       <b>encoding</b> <b>convertto</b> ?<u>encoding</u>? <u>data</u>

       <b>encoding</b> <b>convertto</b> ?<b>-profile</b> <u>profile</u>? ?<b>-failindex</b> <b>var</b>? <u>encoding</u> <u>data</u>
              Convert <u>string</u> to the specified <u>encoding</u>. The result is a Tcl  binary  string  that  contains  the
              sequence  of bytes representing the converted string in the specified encoding. If <u>encoding</u> is not
              specified, the current system encoding is used.

       The <b>-profile</b> and <b>-failindex</b> options have the same  effect  as  described  for  the  <b>encoding</b>  <b>convertfrom</b> 2
       command.

       <b>encoding</b> <b>dirs</b> ?<u>directoryList</u>?
              Tcl can load encoding data files from the file system that describe additional encodings for it to
              work  with.  This  command  sets  the  search  path  for  <b>*.enc</b> encoding data files to the list of
              directories <u>directoryList</u>. If <u>directoryList</u> is omitted then the command returns the  current  list
              of  directories  that  make up the search path. It is an error for <u>directoryList</u> to not be a valid
              list. If, when a search for an encoding data file is happening, an element in  <u>directoryList</u>  does
              not refer to a readable, searchable directory, that element is ignored.

       <b>encoding</b> <b>names</b>
              Returns  a  list  containing  the names of all of the encodings that are currently available.  The
              encodings “utf-8” and “iso8859-1” are guaranteed to be present in the list.

       <b>encoding</b> <b>profiles</b>
              Returns a list of the names of encoding profiles. See <b>PROFILES</b> below.                              2

       <b>encoding</b> <b>system</b> ?<u>encoding</u>?
              Set the system encoding to <u>encoding</u>. If <u>encoding</u> is omitted then the command returns  the  current
              system encoding.  The system encoding is used whenever Tcl passes strings to system calls.

</pre><h4><b>PROFILES</b></h4><pre>
       Operations  involving encoding transforms may encounter several types of errors such as invalid sequences 2
       in the source data, characters that cannot be encoded in the  target  encoding  and  so  on.   A  <u>profile</u> 2
       prescribes the strategy for dealing with such errors in one of two ways:

       •      Terminating  further  processing  of  the  source  data.  The  profile does not determine how this 2
              premature termination is conveyed to the caller. By default,  this  is  signalled  by  raising  an 2
              exception. If the <b>-failindex</b> option is specified, errors are reported through that mechanism.

       •      Continue  further  processing  of  the  source data using a fallback strategy such as replacing or 2
              discarding the offending bytes in a profile-defined manner.

       The following profiles are currently implemented with <b>strict</b> being the default if  the  <b>-profile</b>  is  not
       specified.                                                                                                2

       <b>strict</b>                                                                                                    2
              The  <b>strict</b>  profile always stops processing when an conversion error is encountered. The error is 2
              signalled via an exception or the <b>-failindex</b> option mechanism. The  <b>strict</b>  profile  implements  a 2
              Unicode standard conformant behavior.                                                              2

       <b>tcl8</b>                                                                                                      2
              The  <b>tcl8</b>  profile  always  follows  the  first  strategy above and corresponds to the behavior of 2
              encoding transforms in Tcl 8.6. When converting from an external encoding <b>other</b> <b>than</b> <b>utf-8</b> to  Tcl 2
              strings  with  the  <b>encoding</b>  <b>convertfrom</b>  command,  invalid bytes are mapped to their numerically 2
              equivalent code points. For example, the byte 0x80 which is invalid in ASCII would  be  mapped  to 2
              code point U+0080. When converting from <b>utf-8</b>, invalid bytes that are defined in CP1252 are mapped 2
              to  their Unicode equivalents while those that are not fall back to the numerical equivalents. For 2
              example, byte 0x80 is defined by CP1252 and is therefore mapped to its Unicode  equivalent  U+20AC 2
              while byte 0x81 which is not defined by CP1252 is mapped to U+0081. As an additional special case, 2
              the sequence 0xC0 0x80 is mapped to U+0000.                                                        2

              When  converting  from  Tcl  strings  to  an  external  encoding  format using <b>encoding</b> <b>convertto</b>, 2
              characters that cannot be represented in the target encoding are replaced by an encoding-dependent 2
              character, usually the question mark <b>?</b>.                                                            2

       <b>replace</b>                                                                                                   2
              Like the <b>tcl8</b> profile, the <b>replace</b> profile always continues processing on  conversion  errors  but 2
              follows a Unicode standard conformant method for substitution of invalid source data.              2

              When converting an encoded byte sequence to a Tcl string using <b>encoding</b> <b>convertfrom</b>, invalid bytes 2
              are replaced by the U+FFFD REPLACEMENT CHARACTER code point.                                       2

              When  encoding a Tcl string with <b>encoding</b> <b>convertto</b>, code points that cannot be represented in the 2
              target encoding are transformed to an encoding-specific  fallback  character,  U+FFFD  REPLACEMENT 2
              CHARACTER for UTF targets and generally `?` for other encodings.

</pre><h4><b>EXAMPLES</b></h4><pre>
       These examples use the utility proc below that prints the Unicode code points comprising a Tcl string.

              proc codepoints s {join [lmap c [split $s {}] {
                  string cat U+ [format %.6X [scan $c %c]]}]
              }

       Example 1: convert a byte sequence in Japanese euc-jp encoding to a TCL string:

              % codepoints [<b>encoding</b> <b>convertfrom</b> euc-jp "\xA4\xCF"]
              U+00306F

       The result is the unicode codepoint “\u306F”, which is the Hiragana letter HA.                            2

       Example 2: Error handling based on profiles:                                                              2

       The letter <b>A</b> is Unicode character U+0041 and the byte "\x80" is invalid in ASCII encoding.                2

              % codepoints [<b>encoding</b> <b>convertfrom</b> -profile tcl8 ascii A\x80]                                      2
              U+000041 U+000080                                                                                  2
              % codepoints [<b>encoding</b> <b>convertfrom</b> -profile replace ascii A\x80]                                   2
              U+000041 U+00FFFD                                                                                  2
              % codepoints [<b>encoding</b> <b>convertfrom</b> -profile strict ascii A\x80]                                    2
              unexpected byte sequence starting at index 1: '\x80'                                               2

       Example 3: Get partial data and the error location:                                                       2

              % codepoints [<b>encoding</b> <b>convertfrom</b> -profile strict -failindex idx ascii AB\x80]                    2
              U+000041 U+000042                                                                                  2
              % set idx                                                                                          2
              2                                                                                                  2

       Example 4: Encode a character that is not representable in ISO8859-1:                                     2

              % <b>encoding</b> <b>convertto</b> iso8859-1 A\u0141                                                             2
              A?                                                                                                 2
              % <b>encoding</b> <b>convertto</b> -profile strict iso8859-1 A\u0141                                             2
              unexpected character at index 1: 'U+000141'                                                        2
              % <b>encoding</b> <b>convertto</b> -profile strict -failindex idx iso8859-1 A\u0141                              2
              A                                                                                                  2
              % set idx                                                                                          2
              1                                                                                                  2

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/Tcl_GetEncoding.3tcl.html">Tcl_GetEncoding</a>(3tcl), <a href="../man3tcl/fconfigure.3tcl.html">fconfigure</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       encoding, unicode

Tcl                                                    8.1                                        <u><a href="../man3tcl/encoding.3tcl.html">encoding</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>