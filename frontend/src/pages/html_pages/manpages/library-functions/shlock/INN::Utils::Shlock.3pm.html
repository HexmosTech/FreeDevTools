<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>INN::Utils::Shlock - Wrapper around the shlock program</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2">inn2_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       INN::Utils::Shlock - Wrapper around the shlock program

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This Perl module wraps the <a href="../man8/shlock.8.html">shlock</a>(8) program so that it can easily be used.  Calling <b>shlock</b> is more
       portable than using <a href="../man2/flock.2.html">flock</a>(2) and its corresponding Perl function because this function does not work as
       expected on all existing systems.

       See the <a href="../man8/shlock.8.html">shlock</a>(8) documentation for more information.

       Using INN::Utils::Shlock is straight-forward:

           use lib '&lt;pathnews&gt;/lib/perl';
           use INN::Utils::Shlock;

           my $lockfile = "myprogram.LOCK";

           # Acquire a lock.
           INN::Utils::Shlock::lock($lockfile);

           # Do whatever you want.  The lock prevents concurrent accesses.

           # Unlock.
           INN::Utils::Shlock::unlock($lockfile);

       These two functions return "1" on success, "0" on failure.  For example, the success of (un)locking can
       be checked as:

           INN::Utils::Shlock::lock($lockfile)
               or die "cannot create lock file";

       or:

           if (! INN::Utils::Shlock::lock($lockfile, 4)) {
               die "giving up after 4 attempts to create lock file";
           }

       Instead of calling "unlock(<u>lockfile</u>)", the "releaselocks()" function can be called.  It removes any
       leftover locks, which is useful when several different locks are used.  Another possible use is to call
       it in an END code block:

           END {
               # In case we bail out, while holding a lock.
               INN::Utils::Shlock::releaselocks();
           }

</pre><h4><b>INTERFACE</b></h4><pre>
       lock(<u>lockfile</u>)
           Tries to create a lock file named <u>lockfile</u>.

           This function returns "1" on success, "0" on failure.

       lock(<u>lockfile</u>, <u>tries</u>)
           Tries  to create a lock file named <u>lockfile</u>.  If it fails, locking attempts are repeated once every 2
           seconds for at most <u>tries</u> times (including the first unsuccessful attempt).

           This function returns "1" on success, "0" on failure.

       lock(<u>lockfile</u>, <u>tries</u>, <u>delay</u>)
           Tries to create a lock file named <u>lockfile</u>.  If it fails, locking attempts are  repeated  once  every
           <u>delay</u> seconds for at most <u>tries</u> times (including the first unsuccessful attempt).

           Note that "lock(<u>lockfile</u>)" is equivalent to "lock(<u>lockfile</u>, 1, 2)".

           This function returns "1" on success, "0" on failure.

       releaselocks()
           Removes all the lock files previously created by calling the "lock(<u>lockfile</u>)" function.

           This function returns the number of removed lock files.

       unlock(<u>lockfile</u>)
           Removes the file named <u>lockfile</u>.

           This function returns "1" on success, "0" on failure.

</pre><h4><b>HISTORY</b></h4><pre>
       Documentation and Perl module written by Julien Ã‰lie for InterNetNews.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/perl.1.html">perl</a>(1), <a href="../man8/shlock.8.html">shlock</a>(8).

INN 2.7.3                                          2025-05-19                            <u>INN::Utils::<a href="../man3pm/Shlock.3pm.html">Shlock</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>