<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBIx::Class::Helper::ResultSet::SetOperations - Do set operations with DBIx::Class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdbix-class-helpers-perl">libdbix-class-helpers-perl_2.037000-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DBIx::Class::Helper::ResultSet::SetOperations - Do set operations with DBIx::Class

</pre><h4><b>SYNOPSIS</b></h4><pre>
        package MyApp::Schema::ResultSet::Foo;

        __PACKAGE__-&gt;load_components(qw{Helper::ResultSet::SetOperations});

        ...

        1;

       And then elsewhere, like in a controller:

        my $rs1 = $rs-&gt;search({ foo =&gt; 'bar' });
        my $rs2 = $rs-&gt;search({ baz =&gt; 'biff' });
        for ($rs1-&gt;union($rs2)-&gt;all) { ... }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This component allows you to use various set operations with your ResultSets.  See "NOTE" in
       DBIx::Class::Helper::ResultSet for a nice way to apply it to your entire schema.

       Component throws exceptions if ResultSets have different ResultClasses or different "Columns Specs."

       The basic idea here is that in SQL if you use a set operation they must be selecting the same columns
       names, so that the results will all match.  The deal with the ResultClasses is that DBIC needs to inflate
       the results the same for the entire ResultSet, so if one were to try to apply something like a union in a
       table with the same column name but different classes DBIC wouldn't be doing what you would expect.

       A nice way to use this is with DBIx::Class::ResultClass::HashRefInflator.

       You might have something like the following sketch autocompletion code:

        my $rs1 = $schema-&gt;resultset('Album')-&gt;search({
           name =&gt; { -like =&gt; "$input%" }
        }, {
          columns =&gt; [qw( id name ), {
             tablename =&gt; \['?', [{} =&gt; 'album']],
          }],
        });

        my $rs2 = $schema-&gt;resultset('Artist')-&gt;search({
           name =&gt; { -like =&gt; "$input%" }
        }, {
          columns =&gt; [qw( id name ), {
             tablename =&gt; \['?', [{} =&gt; 'artist']],
          }],
        });

        my $rs3 = $schema-&gt;resultset('Song')-&gt;search({
           name =&gt; { -like =&gt; "$input%" }
        }, {
          columns =&gt; [qw( id name ), {
             tablename =&gt; \['?', [{} =&gt; 'song']],
          }],
        });

        $_-&gt;result_class('DBIx::Class::ResultClass::HashRefInflator')
          for ($rs1, $rs2, $rs3);

        my $data = [$rs1-&gt;union([$rs2, $rs3])-&gt;all];

</pre><h4><b>METHODS</b></h4><pre>
   <b>union</b>
   <b>union_all</b>
   <b>intersect</b>
   <b>intersect_all</b>
   <b>except</b>
   <b>except_all</b>
       All of these methods take a single ResultSet or an ArrayRef of ResultSets as the parameter only
       parameter.

       On Oracle "except" will issue a "MINUS" operation.

</pre><h4><b>AUTHOR</b></h4><pre>
       Arthur Axel "fREW" Schmidt &lt;frioux+<a href="mailto:cpan@gmail.com">cpan@gmail.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by Arthur Axel "fREW" Schmidt.

       This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.0                                       2024-11-16              <u>DBIx::Class::H...::<a href="../man3pm/SetOperations.3pm.html">SetOperations</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>