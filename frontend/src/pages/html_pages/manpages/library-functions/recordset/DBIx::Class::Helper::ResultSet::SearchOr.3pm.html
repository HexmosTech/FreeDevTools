<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBIx::Class::Helper::ResultSet::SearchOr - Combine ResultSet searches with OR's</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdbix-class-helpers-perl">libdbix-class-helpers-perl_2.037000-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DBIx::Class::Helper::ResultSet::SearchOr - Combine ResultSet searches with OR's

</pre><h4><b>SYNOPSIS</b></h4><pre>
        package MyApp::Schema::ResultSet::Tests;

        use parent 'DBIx::Class::ResultSet';

        __PACKAGE__-&gt;load_components(qw(Helper::ResultSet::IgnoreWantarray Helper::ResultSet::SearchOr));

        sub failed {
          my $self = shift;

          my $me = $self-&gt;current_source_alias;

          $self-&gt;search({ "$me.passed" =&gt; '0' });
        }

        sub untested {
          my $self = shift;

          my $me = $self-&gt;current_source_alias;

          $self-&gt;search({ "$me.passed" =&gt; undef });
        }

        sub not_passed {
          my $self = shift;

          my $me = $self-&gt;current_source_alias;

          $self-&gt;search_or([$self-&gt;failed, $self-&gt;untested]);
        }

        1;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       I would argue that the most important feature of DBIx::Class is the fact that you can "chain" ResultSet
       searches.  Unfortunately this can cause problems when you need to reuse multiple ResultSet methods as...
       well as or's.  In the past I got around this by doing:

        $rs-&gt;foo-&gt;union([ $rs-&gt;bar]);

       While this works, it can generate some hairy SQL pretty fast.  This Helper is supposed to basically be a
       lightweight union.  Note that it therefor has a number of "LIMITATIONS".  The thing that makes this
       module special is that the ResultSet that is doing the "search_or" ing still limits everything correctly.
       To be clear, the following only returns $user's friends that match either of the following criteria:

        my $friend_rs = $schema-&gt;resultset('Friend');
        my @internet_friends = $user-&gt;friends-&gt;search_or([
          $friend_rs-&gt;on_facebook,
          $friend_rs-&gt;on_twitter,
        ])-&gt;all;

       With a union, you'd have to implement it like this:

        $user-&gt;friends-&gt;on_facebook-&gt;union([ $user-&gt;friends-&gt;on_twitter ]);

       The union will work, but it will generate more complex SQL that may have lower performance on your
       database.

       See "NOTE" in DBIx::Class::Helper::ResultSet for a nice way to apply it to your entire schema.

</pre><h4><b>METHODS</b></h4><pre>
   <b>search_or</b>
        my $new_rs = $rs-&gt;search_or([ $rs-&gt;foo, $rs-&gt;bar ]);

       "search_or" takes a single arrayref of ResultSets.  The ResultSets <b>must</b> point to the same source or you
       will get an error message.  Additionally, no check is made to ensure that more than one ResultSet is in
       the ArrayRef, but only passing one ResultSet would not make any sense.

</pre><h4><b>LIMITATIONS</b></h4><pre>
       Because this module us basically an expression union and not a true union, "JOIN"'s won't Just Work.  If
       you have a ResultSet method that uses a "JOIN" and you want to "OR" it with another method, you'll need
       to do something like this:

        my @authors = $authors-&gt;search(undef, { join =&gt; 'books' })-&gt;search_or([
           $authors-&gt;wrote_good_books,
           $authors-&gt;wrote_bestselling_books,
        ])-&gt;all;

       Furthermore, if you want to "OR" two methods that "JOIN" in the same relationship via alternate paths you
       <b>must</b> use union.

</pre><h4><b>AUTHOR</b></h4><pre>
       Arthur Axel "fREW" Schmidt &lt;frioux+<a href="mailto:cpan@gmail.com">cpan@gmail.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by Arthur Axel "fREW" Schmidt.

       This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.0                                       2024-11-16             <u>DBIx::Class::He...ltSet::<a href="../man3pm/SearchOr.3pm.html">SearchOr</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>