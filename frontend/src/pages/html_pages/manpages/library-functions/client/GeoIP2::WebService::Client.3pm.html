<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeoIP2::WebService::Client - Perl API for the GeoIP2 Precision web services</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libgeoip2-perl">libgeoip2-perl_2.006002-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       GeoIP2::WebService::Client - Perl API for the GeoIP2 Precision web services

</pre><h4><b>VERSION</b></h4><pre>
       version 2.006002

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use 5.008;

         use GeoIP2::WebService::Client;

         # This creates a Client object that can be reused across requests.
         # Replace "42" with your account id and "abcdef123456" with your license
         # key.
         my $client = GeoIP2::WebService::Client-&gt;new(
             account_id  =&gt; 42,
             license_key =&gt; 'abcdef123456',
         );

         # Replace "insights" with the method corresponding to the web service
         # that you are using, e.g., "country", "city".
         my $insights = $client-&gt;insights( ip =&gt; '24.24.24.24' );

         my $country = $insights-&gt;country();
         print $country-&gt;iso_code(), "\n";

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class provides a client API for all the GeoIP2 Precision web service end points. The end points are
       Country, City, and Insights. Each end point returns a different set of data about an IP address, with
       Country returning the least data and Insights the most.

       Each web service end point is represented by a different model class, and these model classes in turn
       contain multiple Record classes. The record classes have attributes which contain data about the IP
       address.

       If the web service does not return a particular piece of data for an IP address, the associated attribute
       is not populated.

       The web service may not return any information for an entire record, in which case all of the attributes
       for that record class will be empty.

</pre><h4><b>SSL</b></h4><pre>
       Requests to the GeoIP2 web service are always made with SSL.

</pre><h4><b>USAGE</b></h4><pre>
       The basic API for this class is the same for all of the web service end points. First you create a web
       service object with your MaxMind "account_id" and "license_key", then you call the method corresponding
       to a specific end point, passing it the IP address you want to look up.

       If the request succeeds, the method call will return a model class for the end point you called. This
       model in turn contains multiple record classes, each of which represents part of the data returned by the
       web service.

       If the request fails, the client class throws an exception.

</pre><h4><b>IP</b> <b>GEOLOCATION</b> <b>USAGE</b></h4><pre>
       IP geolocation is inherently imprecise. Locations are often near the center of the population. Any
       location provided by a GeoIP2 web service should not be used to identify a particular address or
       household.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       This class has a single constructor method:

   <b>GeoIP2::WebService::Client-&gt;new()</b>
       This method creates a new client object. It accepts the following arguments:

       •   account_id

           Your  MaxMind  Account  ID.  Go  to  &lt;https://www.maxmind.com/en/my_license_key&gt;  to see your MaxMind
           Account ID and license key.

           <b>Note</b>: This replaces  a  previous  "user_id"  parameter,  which  is  still  supported  for  backwards-
           compatibility, but should no longer be used for new code.

           This argument is required.

       •   license_key

           Your  MaxMind  license  key.  Go  to  &lt;https://www.maxmind.com/en/my_license_key&gt; to see your MaxMind
           Account ID and license key.

           This argument is required.

       •   locales

           This is an array reference where each value is a string indicating a locale.  This argument  will  be
           passed onto record classes to use when their "name()" methods are called.

           The  order  of  the  locales  is  significant. When a record class has multiple names (country, city,
           etc.), its "name()" method will look at each element of this array ref and return  the  first  locale
           for which it has a name.

           Note  that the only locale which is always present in the GeoIP2 data in "en".  If you do not include
           this locale, the "name()" method may end up returning "undef" even when the record in question has an
           English name.

           Currently, the valid list of locale codes is:

           •       de - German

           •       en - English

                   English names may still include accented characters if  that  is  the  accepted  spelling  in
                   English. In other words, English does not mean ASCII.

           •       es - Spanish

           •       fr - French

           •       ja - Japanese

           •       pt-BR - Brazilian Portuguese

           •       ru - Russian

           •       zh-CN - simplified Chinese

           Passing any other locale code will result in an error.

           The default value for this argument is "['en']".

       •   host

           The  hostname  to  make  a  request against. This defaults to "geoip.maxmind.com". In most cases, you
           should not need to set this explicitly.

       •   ua

           This argument allows you to your own LWP::UserAgent object. This  is  useful  if  you  cannot  use  a
           vanilla LWP object, for example if you need to set proxy parameters.

           This can actually be any object which supports "agent()" and "request()" methods. This method will be
           called  with  an HTTP::Request object as its only argument. This method must return an HTTP::Response
           object.

</pre><h4><b>REQUEST</b> <b>METHODS</b></h4><pre>
       All of the request methods accept a single argument:

       •   ip

           This must be a valid IPv4 or IPv6 address, or the string "me". This is the address that you  want  to
           look up using the GeoIP2 web service.

           If you pass the string "me" then the web service returns data on the client system's IP address. Note
           that this is the IP address that the web service sees. If you are using a proxy, the web service will
           not see the client system's actual IP address.

   <b>$client-&gt;country()</b>
       This method calls the GeoIP2 Precision: Country end point. It returns a GeoIP2::Model::Country object.

   <b>$client-&gt;city()</b>
       This method calls the GeoIP2 Precision: City end point. It returns a GeoIP2::Model::City object.

   <b>$client-&gt;insights()</b>
       This method calls the GeoIP2 Precision: Insights end point. It returns a GeoIP2::Model::Insights object.

</pre><h4><b>User-Agent</b> <b>HEADER</b></h4><pre>
       This  module  will set the User-Agent header to include the package name and version of this module (or a
       subclass if you use one), the package name and version of the user agent object, and the version of Perl.

       This is set in order to help us support individual users, as  well  to  determine  support  policies  for
       dependencies and Perl itself.

</pre><h4><b>EXCEPTIONS</b></h4><pre>
       For    details    on    the    possible    errors    returned    by   the   web   service   itself,   see
       &lt;<a href="http://dev.maxmind.com/geoip/geoip2/web-services">http://dev.maxmind.com/geoip/geoip2/web-services</a>&gt; for the GeoIP2 web service docs.

       If the web service returns an explicit error document, this  is  thrown  as  a  GeoIP2::Error::WebService
       exception object. If some other sort of error occurs, this is thrown as a GeoIP2::Error::HTTP object. The
       difference  is  that  the web service error includes an error message and error code delivered by the web
       service. The latter is thrown when some sort of unanticipated error  occurs,  such  as  the  web  service
       returning a 500 or an invalid error document.

       If   the  web  service  returns  any  status  code  besides  200,  4xx,  or  5xx,  this  also  becomes  a
       GeoIP2::Error::HTTP object.

       Finally,  if  the  web  service  returns  a  200  but  the  body  is  invalid,  the   client   throws   a
       GeoIP2::Error::Generic object.

       All  of  these error classes have an "$error-&gt;message()" method and overload stringification to show that
       message. This means that if you don't explicitly catch errors they will ultimately be  sent  to  "STDERR"
       with some sort of (hopefully) useful error message.

</pre><h4><b>WHAT</b> <b>DATA</b> <b>IS</b> <b>RETURNED?</b></h4><pre>
       While  many  of  the end points return the same basic records, the attributes which can be populated vary
       between end points. In addition, while an end point may offer a particular piece of  data,  MaxMind  does
       not always have every piece of data for any given IP address.

       Because  of  these  factors, it is possible for any end point to return a record where some or all of the
       attributes are unpopulated.

       See &lt;<a href="http://dev.maxmind.com/geoip/geoip2/web-services">http://dev.maxmind.com/geoip/geoip2/web-services</a>&gt; for details  on  what  data  each  end  point  <u>may</u>
       return.

       The  only  piece of data which is always returned is the "ip_address" key in the "GeoIP2::Record::Traits"
       record.

       Every record class attribute has a corresponding predicate  method  so  you  can  check  to  see  if  the
       attribute is set.

</pre><h4><b>SUPPORT</b></h4><pre>
       Bugs may be submitted through &lt;https://github.com/maxmind/GeoIP2-perl/issues&gt;.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Dave Rolsky &lt;<a href="mailto:drolsky@maxmind.com">drolsky@maxmind.com</a>&gt;

       •   Greg Oschwald &lt;<a href="mailto:goschwald@maxmind.com">goschwald@maxmind.com</a>&gt;

       •   Mark Fowler &lt;<a href="mailto:mfowler@maxmind.com">mfowler@maxmind.com</a>&gt;

       •   Olaf Alders &lt;<a href="mailto:oalders@maxmind.com">oalders@maxmind.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2013 - 2019 by MaxMind, Inc.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.36.0                                       2022-11-21                    <u>GeoIP2::WebService::<a href="../man3pm/Client.3pm.html">Client</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>