<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monitoring::Icinga2::Client::REST - REST integration with icinga2</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmonitoring-icinga2-client-rest-perl">libmonitoring-icinga2-client-rest-perl_2.0.4-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Monitoring::Icinga2::Client::REST - REST integration with icinga2

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use strict;
           use warnings;

           use Monitoring::Icinga2::Client::REST;

           my $icinga = new Monitoring::Icinga2::Client::REST("fqdn",
               port =&gt; $port,
               path =&gt; $path,
               version =&gt; $version,
               cacert =&gt; $cacert_file,
           );
           $icinga-&gt;login("username","password") or die $icinga-&gt;login_status;

           my $host_object = {
               attrs =&gt; {
                   address =&gt; "127.0.0.1",
                   check_command =&gt; "hostalive"
               }
           };

           my $put_result = $icinga-&gt;do_request("PUT", "/objects/hosts/localhost.example.com", "", $host_object)
               or warn sprintf("%s: %s", $icinga-&gt;request_code, $icinga-&gt;request_status_line);

           my $post_result = $icinga-&gt;do_request("POST", "/objects/hosts/localhost.example.com", "",$host_object)
               or warn sprintf("%s: %s", $icinga-&gt;request_code, $icinga-&gt;request_status_line);

           my $get_result = $icinga-&gt;do_request("GET", "/objects/hosts/localhost.example.com")
               or warn sprintf("%s: %s", $icinga-&gt;request_code, $icinga-&gt;request_status_line);

           my $delete_result = $icinga-&gt;do_request("DELETE", "/objects/hosts/localhost.example.com")
               or warn sprintf("%s: %s", $icinga-&gt;request_code, $icinga-&gt;request_status_line);

           $icinga-&gt;logout;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Module used to integrate with the REST API that Icinga2 provides.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       new (FQDN, PORT, PATH, VERSION, INSECURE)
       new (FQDN, PORT, PATH, VERSION, [ INSECURE ])
           Monitoring::Icinga2::Client::REST object.

           The  former  calling  convention  with  four  mandatory arguments is the old one. If a port number is
           present after the Icinga host, the constructor assumes you want this form. The arguments are:

           •   FQDN is your Icinga monitoring host.

           •   PORT is the port the REST API runs on.

           •   PATH is the URI where to find the API, usually "/".

           •   VERSION should be set to the API version, usually 1.

           •   INSECURE is optional and makes this module skip certificate verification if set.

           The latter form treats only the FQDN as mandatory and allows all other arguments to  be  passed  hash
           style with the following keys:

           •   "port" see above; defaults to 5665.

           •   "path" see above; defaults to "/".

           •   "version" see above; defaults to 1 and is therefore completely redundant as long as there is only
               one API version.

           •   "insecure" see above; defaults to false

           •   "cacert"  The file name of a PEM-format file containing the certificate of the CA that issued the
               server's HTTPS certificate. As internal monitoring servers often use  certs  from  in-house  CAs,
               this still allows for secure peer identification instead of using insecure mode.

</pre><h4><b>METHODS</b></h4><pre>
       login (USERNAME, PASSWORD)
           Configures  and  validates  credentials.  Please  note  that  user  needs  at  least  the  permission
           "status/query". This methos does nothing if it has  been  called  on  the  sameobject  before  unless
           "logout" was called before.

       logout
           Destroys the login session.

       login_status
           Returns a human readable login status of the current session.

       logged_in
           Returns true when logged in, otherwise returns undef.

       do_request (HTTP METHOD, URI, PARAMS, DATA)
           Performs the actual request.

           "PARAMS" is optional and can be any parameters that the Icinga API supports.

           "DATA" is optional and is a Perl data structure that will be converted to JSON.

           Returns the result in a perl reference.

       export (FULL, API_ONLY)
           Returns a Perl Data structure without unnecessary meta data. $icinga-&gt;export can only be called after
           do_request. The name of the object is stored in $object-&gt;{attrs}{vars}{__export_name} so that you can
           access if you need it, please note that you can't use this variable name for other things if you whis
           to use this library as it will be overwritten in the exported object.

           "FULL"  is  optional and if it is true, write once attributes will be included in the export. Objects
           exported with FULL set to true can be converted to json  and  be  used  for  PUT  requests,  but  not
           necessarily for POST requests.

           "API_ONLY" is optional and if it is true only objects created via the API will be exported.

       request_code
           Returns the last HTTP status code.

       request_status_line
           Returns the last HTTP status line.

</pre><h4><b>DEPENDS</b></h4><pre>
       LWP::UserAgent, HTTP::Request, URI::Escape, JSON, Encode

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (c) 2016-, IT Services, Stockholm University

       All rights reserved.

       Redistribution  and  use in source and binary forms, with or without modification, are permitted provided
       that the following conditions are met:

       Redistributions of source code must retain the above copyright notice, this list of  conditions  and  the
       following disclaimer.

       Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the
       following disclaimer in the documentation and/or other materials provided with the distribution.

       Neither  the  name  of  Stockholm  University nor the names of its contributors may be used to endorse or
       promote products derived from this software without specific prior written permission.

       THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY  EXPRESS  OR  IMPLIED
       WARRANTIES,  INCLUDING,  BUT  NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
       PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE  LIABLE  FOR
       ANY  DIRECT,  INDIRECT,  INCIDENTAL,  SPECIAL,  EXEMPLARY,  OR  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
       LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF  USE,  DATA,  OR  PROFITS;  OR  BUSINESS
       INTERRUPTION)  HOWEVER  CAUSED  AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR
       TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE  OF  THIS  SOFTWARE,  EVEN  IF
       ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

</pre><h4><b>AUTHOR</b></h4><pre>
       Johan  Wassberg  &lt;<a href="mailto:jocar@su.se">jocar@su.se</a>&gt;,  Mikael  Nordin  &lt;<a href="mailto:mikael.nordin@su.se">mikael.nordin@su.se</a>&gt; Bits and pieces by Matthias Bethke
       &lt;<a href="mailto:matthias@towiski.de">matthias@towiski.de</a>&gt;

perl v5.30.3                                       2020-07-15             <u>Monitoring::Icinga2::Client::<a href="../man3pm/REST.3pm.html">REST</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>