<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmhttpNewClient, pmhttpFreeClient, pmhttpClientFetch - simple HTTP client interfaces</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp-web1-dev">libpcp-web1-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmhttpNewClient</b>, <b>pmhttpFreeClient</b>, <b>pmhttpClientFetch</b> - simple HTTP client interfaces

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>
       <b>#include</b> <b>&lt;pcp/pmhttp.h&gt;</b>

       <b>struct</b> <b>http_client</b> <b>*pmhttpNewClient(void);</b>
       <b>void</b> <b>pmhttpFreeClient(struct</b> <b>http_client</b> <b>*</b><u>client</u><b>);</b>
       <b>int</b> <b>pmhttpClientFetch(struct</b> <b>http_client</b> <b>*</b><u>client</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>url</u><b>,</b> <b>char</b> <b>*</b><u>bodybuf</u><b>,</b> <b>size_t</b> <u>bodylen</u><b>,</b> <b>char</b>
               <b>*</b><u>typebuf</u><b>,</b> <b>size_t</b> <u>typelen</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp_web</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmhttpNewClient</b>  allocates  and  initializes  an opaque HTTP client that is ready to make requests from a
       server.

       The URL request interface <b>pmhttpClientFetch</b> issues an HTTP GET request to the  server  specified  in  the
       supplied  <u>url</u>.   The  body  of the response is returned in the caller supplied <u>bodybuf</u> buffer, of <u>bodylen</u>
       bytes length.  An optional <u>typebuf</u> buffer, of <u>typelen</u> bytes length, can also be  supplied  and  (if  non-
       NULL) will contain the value of the content-type header returned from the server.

       The  <u>url</u>  parameter  is  an  <u>RFC1630</u> format URL.  This will typically be prefixed with "http://", however
       these interfaces also support Unix domain sockets.  Those are instead prefixed by "unix://", followed  by
       the full filesystem path to the desired Unix domain socket.

       To  free  up resources associated with an HTTP client, including closing any persistent server connection
       that has been established earlier, is accomplished using the <b>pmhttpFreeClient</b> routine.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>pmhttpNewClient</b> will return NULL on failure, which can only occur when allocation of memory is not possi‚Äê
       ble.

       <b>pmhttpClientFetch</b> will return the number of bytes places into the <u>bodybuf</u> buffer, else  a  negated  error
       code indicating the nature of the failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pmdaapache.1.html">pmdaapache</a></b>(1), <b><a href="../man3/pmjsonInit.3.html">pmjsonInit</a></b>(3), <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3), <b><a href="../man3/PMWEBAPI.3.html">PMWEBAPI</a></b>(3) and <b>https://tools.ietf.org/html/rfc1630</b>.

Performance Co-Pilot                                   PCP                                    <u><a href="../man3/PMHTTPNEWCLIENT.3.html">PMHTTPNEWCLIENT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>