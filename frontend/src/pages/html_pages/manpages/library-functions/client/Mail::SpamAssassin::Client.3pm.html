<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::SpamAssassin::Client - Client for spamd Protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/spamassassin">spamassassin_4.0.1-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::SpamAssassin::Client - Client for spamd Protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
         my $client = Mail::SpamAssassin::Client-&gt;new({
                                       port =&gt; 783,
                                       host =&gt; 'localhost',
                                       username =&gt; 'someuser'});
         or

         my $client = Mail::SpamAssassin::Client-&gt;new({
                                       socketpath =&gt; '/path/to/socket',
                                       username =&gt; 'someuser'});

         Optionally takes timeout, which is applied to IO::Socket for the
         initial connection.  If not supplied, it defaults to 30 seconds.

         if ($client-&gt;ping()) {
           print "Ping is ok\n";
         }

         my $result = $client-&gt;process($testmsg);

         if ($result-&gt;{isspam} eq 'True') {
           do something with spam message here
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mail::SpamAssassin::Client is a module which provides a perl implementation of the spamd protocol.

</pre><h4><b>PUBLIC</b> <b>METHODS</b></h4><pre>
   <b>new</b>
       public class (Mail::SpamAssassin::Client) new (\% $args)

       Description: This method creates a new Mail::SpamAssassin::Client object.

   <b>process</b>
       public instance (\%) process (String $msg)

       Description: This method calls the spamd server with the PROCESS command.

       The return value is a hash reference containing several pieces of information, if available:

       content_length

       isspam

       score

       threshold

       message

       report

   <b>spam_report</b>
       public instance (\%) spam_report (String $msg)

       Description: The method implements the report call.

       See the process method for the return value.

   <b>spam_report_ifspam</b>
       public instance (\%) spam_report_ifspam (String $msg)

       Description: The method implements the report_ifspam call.  A report will be returned only if the message
       is spam.

       See the process method for the return value.

   <b>check</b>
       public instance (\%) check (String $msg)

       Description: The method implements the check call.

       See the process method for the return value.

   <b>headers</b>
       public instance (\%) headers (String $msg)

       Description: This method implements the headers call.

       See the process method for the return value.

   <b>learn</b>
       public instance (Boolean) learn (String $msg, Integer $learntype)

       Description: This method implements the learn call.  $learntype should be an integer, 0 for spam, 1 for
       ham and 2 for forget.  The return value is a boolean indicating if the message was learned or not.

       An undef return value indicates that there was an error and you should check the resp_code/resp_msg
       values to determine what the error was.

   <b>report</b>
       public instance (Boolean) report (String $msg)

       Description: This method provides the report interface to spamd.

   <b>revoke</b>
       public instance (Boolean) revoke (String $msg)

       Description: This method provides the revoke interface to spamd.

   <b>ping</b>
       public instance (Boolean) ping ()

       Description: This method performs a server ping and returns 0 or 1 depending on if the server responded
       correctly.

</pre><h4><b>PRIVATE</b> <b>METHODS</b></h4><pre>
   <b>_create_connection</b>
       private instance (IO::Socket) _create_connection ()

       Description: This method sets up a proper IO::Socket connection based on the arguments used when creating
       the client object.

       On failure, it sets an internal error code and returns undef.

   <b>_parse_response_line</b>
       private instance (@) _parse_response_line (String $line)

       Description: This method parses the initial response line/header from the server and returns its parts.

       We have this as a separate method in case we ever decide to get fancy with the response line.

   <b>_clear_errors</b>
       private instance () _clear_errors ()

       Description: This method clears out any current errors.

   <b>_filter</b>
       private instance (\%) _filter (String $msg, String $command)

       Description: Makes the actual call to the spamd server for the various filter method (ie PROCESS, CHECK,
       HEADERS, etc).  The command that is passed in is sent to the spamd server.

       The return value is a hash reference containing several pieces of information, if available:

       content_length

       isspam

       score

       threshold

       message (if available)

       report (if available)

perl v5.40.1                                       2025-06-26                    <u>Mail::SpamAssassin::<a href="../man3pm/Client.3pm.html">Client</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>