<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ne_sock_init, ne_sock_exit - perform library initialization</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libneon27-gnutls-dev">libneon27-gnutls-dev_0.34.2-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ne_sock_init, ne_sock_exit - perform library initialization

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;ne_socket.h&gt;</b>

       <b>int</b> <b>ne_sock_init(void);</b>

       <b>void</b> <b>ne_sock_exit(void);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       In some platforms and configurations, neon may be using some socket or SSL libraries which require global
       initialization before use. To perform this initialization, the <b>ne_sock_init</b> function must be called
       before any other library functions are used.

       Once all use of neon is complete, <b>ne_sock_exit</b> can be called to perform de-initialization of socket or
       SSL libraries, if necessary. Uses of <b>ne_sock_init</b> and <b>ne_sock_exit</b> are "reference counted"; if N calls to
       <b>ne_sock_init</b> are made, only the Nth call to <b>ne_sock_exit</b> will have effect.

       <b>ne_sock_init</b> will set the disposition of the SIGPIPE signal to <u>ignored</u>. No change is made to the SIGPIPE
       disposition by <b>ne_sock_exit</b>.

       Both the SSL libraries supported by neon — OpenSSL and GnuTLS — require callbacks to be registered to
       allow thread-safe use of SSL. These callbacks are stored as global variables and so their state persists
       for as long as the library in question is loaded into the process. If multiple users of the SSL library
       exist within the process, this can be problematic, particularly if one is dynamically loaded (and may
       subsequently be unloaded).

       If neon is configured using the --enable-threadsafe-ssl flag, thread-safe SSL support will be enabled
       automatically, as covered in the following section. Otherwise, it is not safe to use neon with SSL in a
       multi-threaded process. The ne_has_support function can be used to determine whether neon is built to
       enable thread-safety support in the SSL library.

   <b>Thread-safe</b> <b>SSL</b> <b>with</b> <b>OpenSSL</b>
       neon follows two simple rules when dealing with the OpenSSL locking callbacks:

       •   <b>ne_sock_init</b> will set thread-safety locking callbacks if and only if no locking callbacks are already
           registered.

       •   <b>ne_sock_exit</b> will unset the thread-safety locking callbacks if and only if the locking callbacks
           registered are those registered by <b>ne_sock_init</b>.

       Applications and libraries should be able to co-operate to ensure that SSL use is always thread-safe if
       similar rules are always followed.

   <b>Thread-safe</b> <b>SSL</b> <b>with</b> <b>GnuTLS</b>
       The cryptography library used by GnuTLS, libgcrypt, only supports an initialization operation to register
       thread-safety callbacks.  <b>ne_sock_init</b> will register the thread-safe locking callbacks on first use;
       <b>ne_sock_exit</b> cannot unregister them. If multiple users of GnuTLS are present within the process, it is
       unsafe to dynamically unload neon from the process if neon is configured with thread-safe SSL support
       enabled (since the callbacks would be left pointing at unmapped memory once neon is unloaded).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>ne_sock_init</b> returns zero on success, or non-zero on error. If an error occurs, no further use of the
       neon library should be attempted.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/neon.3.html">neon</a>(3), <a href="../man3/ne_has_support.3.html">ne_has_support</a>(3)

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 2001-2024 Joe Orton

neon 0.34.2                                       15 April 2025                                  <u><a href="../man3/NE_SOCK_INIT.3.html">NE_SOCK_INIT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>