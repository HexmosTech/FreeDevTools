<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X11::Protocol::Ext::XTEST - synthetic user input and more</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libx11-protocol-other-perl">libx11-protocol-other-perl_31-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       X11::Protocol::Ext::XTEST - synthetic user input and more

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use X11::Protocol;
        my $X = X11::Protocol-&gt;new;
        $X-&gt;init_extension('XTEST')
          or print "XTEST extension not available";

        $X-&gt;XTestFakeInput (name   =&gt; 'ButtonPress',
                            detail =&gt; 3);  # physical button 3
        $X-&gt;XTestFakeInput (name   =&gt; 'ButtonRelease',
                            detail =&gt; 3);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The XTEST extension provides

       •   Synthetic keyboard and mouse pointer actions.

       •   Displayed cursor comparisons.

       •   Test programs continuing during "GrabServer" by other clients.

       These things help exercise library or server features which would otherwise require user interaction.

</pre><h4><b>REQUESTS</b></h4><pre>
       The   following  requests  are  made  available  with  an  "init_extension()",  as  per  "EXTENSIONS"  in
       X11::Protocol.

           my $is_available = $X-&gt;init_extension('XTEST');

       "($server_major, $server_minor) = $X-&gt;XTestGetVersion ($client_major, $client_minor)"
           Negotiate a protocol version with the server.  $client_major and $client_minor  is  what  the  client
           would like.  The returned $server_major and $server_minor is what the server will do.

           The  current  code  supports  up  to  2.1.   The  intention  would  be  to automatically negotiate in
           "init_extension()" if/when necessary.

   <b>Cursor</b> <b>Comparisons</b>
       "$is_same = $X-&gt;XTestCompareCursor ($window, $cursor)"
           Return true if the cursor attribute of $window is equal to $cursor.  $cursor can be

           •   XID (an integer) of a cursor.

           •   "None" (or 0).

           •   "CurrentCursor" (or 1) for the currently displayed cursor.

           This can be used to check that the cursor attribute of some $window is a desired setting, for example

               $desired_cursor = $X-&gt;new_rsrc;
               $X-&gt;CreateGlyphCursor ($desired_cursor, ...);

               $X-&gt;XTestCompareCursor ($window, $desired_cursor)
                 or die "Oops, $window doesn't have desired cursor";

           Or alternatively, construct a window with a particular cursor and use "CurrentCursor" to  check  that
           what's  currently  displayed  is  as  desired,  for example to see if a "GrabPointer()" is displaying
           what's intended,

               my $test_window = $X-&gt;new_rsrc;
               $X-&gt;CreateWindow ($test_window, ...,
                                 cursor =&gt; $desired_cursor);

               $X-&gt;XTestCompareCursor ($test_window, "CurrentCursor");
                 or die "Oops, currently displayed cursor is not as desired";

   <b>Simulated</b> <b>Input</b>
       "$X-&gt;XTestFakeInput (name=&gt;...)"
       "$X-&gt;XTestFakeInput ([ name=&gt;... ])"
       "$X-&gt;XTestFakeInput ([ name=&gt;], [name=&gt;], ...)"
           Simulate user input for button presses, key presses, and pointer movement.

           An input action is specified as an event packet using fields similar to "$X-&gt;pack_event()".

           "XTestFakeInput()" is always a single user action, so for example a button press and  button  release
           are two separate "XTestFakeInput()" requests.  For the core events a single event packet is enough to
           describe an input but some extensions such as "XInputExtension" may require more.

           Button Press and Release
               The argument fields are

                   name       "ButtonPress" or "ButtonRelease"
                   detail     physical button number (1 upwards)
                   time       milliseconds delay before event, default 0

               For example to fake a physical button 3 press

                   $X-&gt;XTestFakeInput (name   =&gt; 'ButtonPress',
                                       detail =&gt; 3);

               "detail"   is  the  physical  button  number,  before  the  core  protocol  "SetPointerMapping()"
               translation  is  applied.    To   simulate   a   logical   button   it's   necessary   to   check
               "GetPointerMapping()" to see which physical button, if any, corresponds.

               Be   careful  when  faking  a  "ButtonPress"  as  it  might  be  important  to  fake  a  matching
               "ButtonRelease" too.  On the X.org server circa 1.9.x after a synthetic press the physical  mouse
               doesn't work to generate a release and the button is left hung (presumably in its normal implicit
               pointer grab).

           Key Press and Release
               The argument fields are

                   name       "KeyPress" or "KeyRelease"
                   detail     keycode (integer)
                   time       milliseconds delay before event, default 0

           Mouse Pointer Movement
               Mouse  pointer  motion  can  be  induced  with  the  following.   The  effect  is  similar  to  a
               "WarpPointer()".

                   name       "MotionNotify"
                   root       XID of root window, default "None" for current
                   root_x     \ pointer position to move to
                   root_y     /
                   detail     flag 0=absolute, 1=relative, default 0
                   time       milliseconds delay before event, default 0

               "root" is the root window (integer XID) to move on.  The default "None" (or 0) means  the  screen
               the pointer is currently on.

                   $X-&gt;XTestFakeInput (name   =&gt; 'MotionNotify',
                                       root_x =&gt; 123,
                                       root_y =&gt; 456);

               "detail" can be 1 to move relative to the current mouse position.

                   $X-&gt;XTestFakeInput (name   =&gt; 'MotionNotify',
                                       root_x =&gt; 10,
                                       root_y =&gt; -20,
                                       detail =&gt; 1); # relative motion

           Other Events
               Extension   events   can   be   faked  after  an  "init_extension()"  so  they're  recognised  by
               "$X-&gt;pack_event()".  It's up to the server or extension which events can actually be simulated.

               If an extension input requires more  than  one  event  packet  to  describe  then  pass  multiple
               arrayrefs.  For example "DeviceMotion" (from "XInputExtension") may need further "DeviceValuator"
               packets,

                   $X-&gt;XTestFakeInput ([ name =&gt; 'DeviceMotion', ... ],
                                       [ name =&gt; 'DeviceValuator', ... ],
                                       [ name =&gt; 'DeviceValuator',  ... ]);

           For  all  events  "time" is how long in milliseconds the server should wait before playing the event.
           The default is 0 for no delay.  No further requests are processed from the current client during  the
           delay, so a sequence of "XTestFakeInput()" with delays will execute sequentially with one delay after
           another.

           Generally  the  event  fields  from  a  "$X-&gt;{'event_handler'}" function cannot be passed directly to
           "XTestFakeInput()" to replay it.  In particular,

           •   "time" from an event is a timestamp, so would have to be zeroed or adjusted to  a  relative  time
               for a delay in "XTestFakeInput()".

           •   For  "MotionNotify", "detail" from an event is the hint mechanism, so would have to be zeroed for
               the absolute/relative flag in "XTestFakeInput()".

           •   For "ButtonPress" and "ButtonRelease", "detail" from an event is a logical  button  number  after
               "SetPointerMapping()"  transformation, whereas "XFakeInput()" takes a physical number.  A reverse
               lookup through the "GetPointerMapping()" table would be needed.

   <b>GrabServer</b> <b>Imperviousness</b>
       "$X-&gt;XTestGrabControl ($impervious)"
           Control the current client's behaviour during a "GrabServer()" by another client.

           If $impervious is 1 then the current client can continue to make requests,  ie.  it's  impervious  to
           server grabs by other clients.

           If  $impervious  is  0  then  the  current  client  behaves  as normal.  Its requests wait during any
           "GrabServer()" by another client.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       X11::Protocol, X11::Protocol::Ext::XInputExtension

       <b><a href="../man1/xdotool.1.html">xdotool</a></b>(1), X11::GUITest, Xlib <b><a href="../man3/XTestQueryExtension.3.html">XTestQueryExtension</a></b>(3)

       <u>/usr/share/doc/x11proto-xext-dev/xtest.txt.gz</u>, <u>/usr/share/X11/doc/hardcopy/Xext/xtest.PS.gz</u>

</pre><h4><b>HOME</b> <b>PAGE</b></h4><pre>
       &lt;<a href="http://user42.tuxfamily.org/x11-protocol-other/index.html">http://user42.tuxfamily.org/x11-protocol-other/index.html</a>&gt;

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright 2011, 2012, 2013, 2014, 2017 Kevin Ryde

       X11-Protocol-Other is free software; you can redistribute it and/or modify it under the terms of the  GNU
       General  Public  License  as  published  by  the  Free Software Foundation; either version 3, or (at your
       option) any later version.

       X11-Protocol-Other is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without
       even  the  implied  warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General
       Public License for more details.

       You should have received a copy of the GNU General Public License along with X11-Protocol-Other.  If not,
       see &lt;<a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>&gt;.

perl v5.28.1                                       2019-08-26                     <u>X11::Protocol::Ext::<a href="../man3pm/XTEST.3pm.html">XTEST</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>