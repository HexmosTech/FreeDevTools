<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>globus_gram_protocol_definition - GRAM Protocol Definition.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libglobus-gram-protocol-doc">libglobus-gram-protocol-doc_13.6-3build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       globus_gram_protocol_definition - GRAM Protocol Definition.

       The GRAM Protocol is used to handle communication between the Gatekeeper, Job Manager, and GRAM Clients.
       The protocol is based on a subset of the HTTP/1.1 protocol, with a small set of message types and
       responses sent as the body of the HTTP requests and responses. This document describes GRAM Protocol
       version 2.

   <b>Framing</b>
       GRAM messages are framed in HTTP/1.1 messages. However, only a small subset of the HTTP specification is
       used or understood by the GRAM system. All GRAM requests are HTTP POST messages. Only the following HTTP
       headers are understood:

       • Host

       • Content-Type (set to 'application/x-globus-gram' in all cases)

       • Content-Length

       • Connection (set to 'close' in all HTTP responses)

       Only the following status codes are supported in response's HTTP Status-Lines:

       • 200 OK

       • 403 Forbidden

       • 404 Not Found

       • 500 Internal Server Error

       • 400 Bad Request

   <b>Message</b> <b>Format</b>
       All  messages use the carriage return (ASCII value 13) followed by line feed (ASCII value 10) sequence to
       delimit lines. In all cases, a  blank  line  separates  the  HTTP  header  from  the  message  body.  All
       <b>application/x-globus-gram</b>  message  bodies  consist  of attribute names followed by a colon, a space, and
       then the value of the attribute. When the value may  contain  a  newline  or  double-quote  character,  a
       special  escaping  rule  is  used  to  encapsulate  the  complete  string. This encapsulation consists of
       surrounding the string with double-quotes, and escaping all double-quote and backslash characters  within
       the string with a backslash. All other characters are sent without modification. For example, the string

       rsl: &amp;( executable = "<a href="file:/bin/echo">/bin/echo</a>" )
        ( arguments = "hello" )

        becomes

       rsl: "&amp;( executable = \"bin/echo\" )
         (arguments = \"hello\" )"

       This  is  the  only  form  of  quoting which <b>application/x-globus-gram</b> messages support. Use of % HEX HEX
       escapes (such as seen in URL encodings) is not meaningful for this protocol.

   <b>Message</b> <b>Types</b>
   <b>Ping</b> <b>Request</b>
       A ping request is used to verify that the gatekeeper is configured properly to handle  a  named  service.
       The ping request consists of the following:

           POST ping/<u>job-manager-name</u> HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>

       The values of the message-specific strings are

       <u>job-manager-name</u>
           The  name  of  the  service  to have the gatekeeper check. The service name corresponds to one of the
           gatekeeper's  configured  grid-services,  and  is  usually  of  the  form  'jobmanager-&lt;em&gt;scheduler-
           type&lt;/em&gt;'.

       <u>host-name</u>
           The  name of the host on which the gatekeeper is running. This exists only for compatibility with the
           HTTP/1.1 protocol.

       <u>message-size</u>
           The length of the content of the message, not including the HTTP/1.1 header.

       <u>version</u>
           The version of the GRAM protocol which is being used. For the protocol defined in this document,  the
           value must be the string '2'.

   <b>Job</b> <b>Request</b>
       A  job  request  is  used  to  scheduler a job remotely using GRAM. The ping request consists of the HTTP
       framing described above with the request-URI consisting of <u>job-manager-name</u>, where  <u>job-manager</u>  <u>name</u>  is
       the  name  of the service to use to schedule the job. The format of a job request message consists of the
       following:

           POST <u>job-manager-name</u>[@<u>user-name</u>] HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>
           job-state-mask: <u>mask</u>
           callback-url: <u>callback-contact</u>
           rsl: <u>rsl-description</u>

       The values of the emphasized text items are as below:

       <u>job-manager-name</u>
           The name of the service to submit the job request to. The service name  corresponds  to  one  of  the
           gatekeeper's  configured  grid-services,  and  is  usually  of  the  form  'jobmanager-&lt;em&gt;scheduler-
           type&lt;/em&gt;'.

       <u>user-name</u>
           Starting with GT4.0, a client may request that a certain account by used by the gatekeeper  to  start
           the  job  manager. This is done optionally by appending the @ symbol and the local user name that the
           job should be run as to the <u>job-manager-name</u>. If the @ and username are not present, then  the  first
           grid  map  entry  will be used. If the client credential is not authorized in the grid map to use the
           specified account, an authorization error will occur in the gatekeeper.

       <u>host-name</u>
           The name of the host on which the gatekeeper is running. This exists only for compatibility with  the
           HTTP/1.1 protocol.

       <u>message-size</u>
           The length of the content of the message, not including the HTTP/1.1 header.

       <u>version</u>
           The  version of the GRAM protocol which is being used. For the protocol defined in this document, the
           value must be the string '2'.

       <u>mask</u>
           An integer representation of the job state mask. This value is obtained from a bitwise-OR of the  job
           state  values  which  the  client wishes to receive job status callbacks about. These meanings of the
           various job state values are defined in the <b>GRAM</b> <b>Protocol</b> <b>API</b> <b>documentation</b>.

       <u>callback-contact</u>
           A https URL which defines a GRAM protocol listener which will receive job state updates. The  from  a
           bitwise-OR of the job state values which the client wishes to receive job status callbacks about. The
           job status update messages are defined <b>below</b>.

       <u>rsl-description</u>
           A quoted string containing the RSL description of the job request.

   <b>Status</b> <b>Request</b>
       A  status  request  is  used by a GRAM client to get the current job state of a running job. This type of
       message can only be sent to a job manager's job-contact (as returned  in  the  reply  to  a  job  request
       message). The format of a job request message consists of the following:

           POST <u>job-contact</u> HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>
           'status'

       The values of the emphasized text items are as below:

       <u>job-contact</u>
           The job contact string returned in a response to a job request message, or determined by querying the
           MDS system.

       <u>host-name</u>
           The name of the host on which the job manager is running. This exists only for compatibility with the
           HTTP/1.1 protocol.

       <u>message-size</u>
           The length of the content of the message, not including the HTTP/1.1 header.

       <u>version</u>
           The  version of the GRAM protocol which is being used. For the protocol defined in this document, the
           value must be the string '2'.

   <b>Callback</b> <b>Register</b> <b>Request</b>
       A callback register request is used by a GRAM client to register a new callback contact to  receive  GRAM
       job  state  updates. This type of message can only be sent to a job manager's job-contact (as returned in
       the reply to a job request message). The format of a job request message consists of the following:

           POST <u>job-contact</u> HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>
           'register &lt;em&gt;mask&lt;/em&gt; &lt;em&gt;callback-contact&lt;/em&gt;'

       The values of the emphasized text items are as below:

       <u>job-contact</u>
           The job contact string returned in a response to a job request message, or determined by querying the
           MDS system.

       <u>host-name</u>
           The name of the host on which the job manager is running. This exists only for compatibility with the
           HTTP/1.1 protocol.

       <u>message-size</u>
           The length of the content of the message, not including the HTTP/1.1 header.

       <u>version</u>
           The version of the GRAM protocol which is being used. For the protocol defined in this document,  the
           value must be the string '2'.

       <u>mask</u>
           An  integer representation of the job state mask. This value is obtained from a bitwise-OR of the job
           state values which the client wishes to receive job status callbacks about.  These  meanings  of  the
           various job state values are defined in the <b>GRAM</b> <b>Protocol</b> <b>API</b> <b>documentation</b>.

       <u>callback-contact</u>
           A  https  URL which defines a GRAM protocol listener which will receive job state updates. The from a
           bitwise-OR of the job state values which the client wishes to receive job status callbacks about. The
           job status update messages are defined <b>below</b>.

   <b>Callback</b> <b>Unregister</b> <b>Request</b>
       A callback unregister request is used by a GRAM client to request that the job manager no longer send job
       state updates to the specified callback contact. This type of message can only be sent to a job manager's
       job-contact (as returned in the reply to a job request message). The format  of  a  job  request  message
       consists of the following:

           POST <u>job-contact</u> HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>
           'unregister &lt;em&gt;callback-contact&lt;/em&gt;'

       The values of the emphasized text items are as below:

       <u>job-contact</u>
           The job contact string returned in a response to a job request message, or determined by querying the
           MDS system.

       <u>host-name</u>
           The name of the host on which the job manager is running. This exists only for compatibility with the
           HTTP/1.1 protocol.

       <u>message-size</u>
           The length of the content of the message, not including the HTTP/1.1 header.

       <u>version</u>
           The  version of the GRAM protocol which is being used. For the protocol defined in this document, the
           value must be the string '2'.

       <u>callback-contact</u>
           A https URL which defines a GRAM protocol listener which should no longer receive job state  updates.
           The from a bitwise-OR of the job state values which the client wishes to receive job status callbacks
           about. The job status update messages are defined <b>below</b>.

   <b>Job</b> <b>Cancel</b> <b>Request</b>
       A  job cancel request is used by a GRAM client to request that the job manager terminate a job. This type
       of message can only be sent to a job manager's job-contact (as returned in the reply  to  a  job  request
       message). The format of a job request message consists of the following:

           POST <u>job-contact</u> HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>
           'cancel'

       The values of the emphasized text items are as below:

       <u>job-contact</u>
           The job contact string returned in a response to a job request message, or determined by querying the
           MDS system.

       <u>host-name</u>
           The name of the host on which the job manager is running. This exists only for compatibility with the
           HTTP/1.1 protocol.

       <u>message-size</u>
           The length of the content of the message, not including the HTTP/1.1 header.

       <u>version</u>
           The  version of the GRAM protocol which is being used. For the protocol defined in this document, the
           value must be the string '2'.

   <b>Job</b> <b>Signal</b> <b>Request</b>
       A job signal request is used by a GRAM client to request that the job manager process a signal for a job.
       The  arguments  to  the  various  signals  are   discussed   in   the   <b>globus_gram_protocol_job_signal_t</b>
       documentation.

           POST <u>job-contact</u> HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>
           '&lt;em&gt;signal&lt;/em&gt;'

       The values of the emphasized text items are as below:

       <u>job-contact</u>
           The job contact string returned in a response to a job request message, or determined by querying the
           MDS system.

       <u>host-name</u>
           The name of the host on which the job manager is running. This exists only for compatibility with the
           HTTP/1.1 protocol.

       <u>message-size</u>
           The length of the content of the message, not including the HTTP/1.1 header.

       <u>version</u>
           The  version of the GRAM protocol which is being used. For the protocol defined in this document, the
           value must be the string '2'.

       <u>signal</u>
           A quoted string containing the signal number and it's parameters.

   <b>Job</b> <b>State</b> <b>Updates</b>
       A job status update message is sent by the job manager to all registered callback contacts when the job's
       status changes. The format of the job status update messages is as follows:

           POST <u>callback-contact</u> HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>
           job-manager-url: <u>job-contact</u>
           status: <u>status-code</u>
           failure-code: <u>failure-code</u>

       The values of the emphasized text items are as below:

       <u>callback-contact</u>
           The callback contact string registered with the job manager either by being passed as  the  <u>callback-</u>
           <u>contact</u> in a job request message or in a callback register message.

       <u>host-name</u>
           The  host  part  of  the  callback-contact  URL. This exists only for compatibility with the HTTP/1.1
           protocol.

       <u>message-size</u>
           The length of the content of the message, not including the HTTP/1.1 header.

       <u>version</u>
           The version of the GRAM protocol which is being used. For the protocol defined in this document,  the
           value must be the string '2'.

       <u>job-contact</u>
           The job contact of the job which has changed states.

   <b>Proxy</b> <b>Delegation</b>
       A proxy delegation message is sent by the client to the job manager to initiate a delegation handshake to
       generate  a  new  proxy credential for the job manager. This credential is used by the job manager or the
       job when making further secured connections. The format of the delegation message is as follows:

           POST <u>callback-contact</u> HTTP/1.1
           Host: <u>host-name</u>
           Content-Type: application/x-globus-gram
           Content-Length: <u>message-size</u>

           protocol-version: <u>version</u>
           'renew'

       If a successful (200) reply is sent in response to this message, then the client will proceed with a  GSI
       delegation  handshake.  The tokens in this handshake will be framed with a 4 byte big-endian token length
       header. The framed tokens will then be wrapped using the GLOBUS_IO_SECURE_CHANNEL_MODE_SSL_WRAP  wrapping
       mode.  The  job manager will frame response tokens in the same manner. After the job manager receives its
       final delegation token, it will  respond  with  another  response  message  that  indicates  whether  the
       delegation was processed or not. This response message is a standard GRAM response message.

   <b>Note</b> <b>on</b> <b>Security</b> <b>Attributes</b>
       The following security attributes are needed to communicate with the Gatekeeper:

       • Authentication must be done using GSSAPI mutual authentication

       • Messages  must  be  wrapped  with  support  for  the delegation message. When using Globus I/O, this is
         accomplished by using the the GLOBUS_IO_SECURE_CHANNEL_MODE_GSI_WRAP wrapping mode.

   <b>Changes</b>
       2004-08-11 Added information about gridmap choosing

globus_gram_protocol                              Version 13.6                <u><a href="../man3/globus_gram_protocol_definition.3.html">globus_gram_protocol_definition</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>