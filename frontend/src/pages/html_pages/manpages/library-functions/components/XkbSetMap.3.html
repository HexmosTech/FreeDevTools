<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XkbSetMap - Send a complete new set of values for entire components to the server.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libx11-doc">libx11-doc_1.8.12-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       XkbSetMap - Send a complete new set of values for entire components to the server.

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>Bool</b> <b>XkbSetMap</b> <b>(Display</b> <b>*</b><u>dpy</u><b>,</b> <b>unsigned</b> <b>int</b> <u>which</u><b>,</b> <b>XkbDescPtr</b> <u>xkb</u><b>);</b>

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>dpy</u>    connection to X server

       <u>which</u>  mask selecting subcomponents to update

       <u>xkb</u>    description from which new values are taken

</pre><h4><b>DESCRIPTION</b></h4><pre>
       There  are two ways to make changes to map components: either change a local copy of the keyboard map and
       call <u>XkbSetMap</u> to send  the  modified  map  to  the  server,  or,  to  reduce  network  traffic,  use  an
       XkbMapChangesRec structure and call <u>XkbChangeMap.</u>

       Use  <u>XkbSetMap</u>  to send a complete new set of values for entire components (for example, all symbols, all
       actions, and so on) to the server. The <u>which</u> parameter specifies the components to be sent to the server,
       and is a bitwise inclusive OR of the masks listed in Table 1. The  <u>xkb</u>  parameter  is  a  pointer  to  an
       XkbDescRec  structure  and  contains  the information to be copied to the server. For each bit set in the
       <u>which</u> parameter, <u>XkbSetMap</u> takes the corresponding structure values from the <u>xkb</u> parameter and  sends  it
       to the server specified by <u>dpy</u>.

       If  any  components  specified  by  <u>which</u>  are not present in the <u>xkb</u> parameter, <u>XkbSetMap</u> returns False.
       Otherwise, it sends the update request to the server and returns True.  <u>XkbSetMap</u> can generate  BadAlloc,
       BadLength, and BadValue protocol errors.

       Key  types,  symbol maps, and actions are all interrelated; changes in one require changes in the others.
       Xkb provides functions to make it easier to edit these components and handle the interdependencies. Table
       1 lists these helper functions and provides a pointer to where they are defined.

                                  Table 1 Xkb Mapping Component Masks
                                       and Convenience Functions
       ───────────────────────────────────────────────────────────────────────────────────────────
       Mask                        Value    Map      Fields        Convenience
                                                                   Functions
       ───────────────────────────────────────────────────────────────────────────────────────────
       XkbKeyTypesMask             (1&lt;&lt;0)   client   types         XkbGetKeyTypes
                                                     size_types    XkbResizeKeyType
                                                     num_types     XkbCopyKeyType
                                                                   XkbCopyKeyTypes
       XkbKeySymsMask              (1&lt;&lt;1)   client   syms          XkbGetKeySyms
                                                     size_syms     XkbResizeKeySyms
                                                     num_syms      XkbChangeTypesOfKey
                                                     key_sym_map
       XkbModifierMapMask          (1&lt;&lt;2)   client   modmap        XkbGetKeyModifierMap
       XkbExplicitComponentsMask   (1&lt;&lt;3)   server   explicit      XkbGetKeyExplicitComponents
       XkbKeyActionsMask           (1&lt;&lt;4)   server   key_acts      XkbGetKeyActions
                                                     acts          XkbResizeKeyActions
                                                     num_acts
                                                     size_acts
       XkbKeyBehaviorsMask         (1&lt;&lt;5)   server   behaviors     XkbGetKeyBehaviors
       XkbVirtualModsMask          (1&lt;&lt;6)   server   vmods         XkbGetVirtualMods
       XkbVirtualModMapMask        (1&lt;&lt;7)   server   vmodmap       XkbGetVirtualModMap

       The <u>changed</u> field identifies the map components that have changed in  an  XkbDescRec  structure  and  may
       contain  any  of  the  bits  in  Table  1,  which  are also shown in Table 2. Every 1 bit in <u>changed</u> also
       identifies which other fields in the XkbMapChangesRec structure contain valid  values,  as  indicated  in
       Table  2.  The  <u>min_key_code</u>  and  <u>max_key_code</u>  fields  are  for reference only; they are ignored on any
       requests sent to the server and are always updated by the server whenever it  returns  the  data  for  an
       XkbMapChangesRec.
                                     Table 2 XkbMapChangesRec Masks
       ────────────────────────────────────────────────────────────────────────────────────────────
                                   Valid
       Mask                        XkbMapChangesRec       XkbDescRec Field Containing
                                   Fields                 Changed Data
       ────────────────────────────────────────────────────────────────────────────────────────────
       XkbKeyTypesMask             first_type,            map-&gt;type[first_type] ..
                                   num_types              map-&gt;type[first_type + num_types - 1]

       XkbKeySymsMask              first_key_sym,         map-&gt;key_sym_map[first_key_sym] ..
                                   num_key_syms           map-&gt;key_sym_map[first_key_sym +
                                                          num_key_syms - 1]

       XkbModifierMapMask          first_modmap_key,      map-&gt;modmap[first_modmap_key] ..
                                   num_modmap_keys        map-&gt;modmap[first_modmap_key +
                                                          num_modmap_keys - 1]

       XkbExplicitComponentsMask   first_key_explicit,    server-&gt;explicit[first_key_explicit] ..
                                   num_key_explicit       server-&gt;explicit[first_key_explicit +
                                                          num_key_explicit - 1]

       XkbKeyActionsMask           first_key_act,         server-&gt;key_acts[first_key_act] ..
                                   num_key_acts           server-&gt;key_acts[first_key_act +
                                                          num_key_acts - 1]

       XkbKeyBehaviorsMask         first_key_behavior,    server-&gt;behaviors[first_key_behavior] ..
                                   num_key_behaviors      server-&gt;behaviors[first_key_behavior +
                                                          num_key_behaviors - 1]

       XkbVirtualModsMask          vmods                  server-&gt;vmods[*]

       XkbVirtualModMapMask        first_vmodmap_key,     server-&gt;vmodmap[first_vmodmap_key] ..
                                   num_vmodmap_keys       server-&gt;vmodmap[first_vmodmap_key +
                                                          num_vmodmap_keys - 1]

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       True           The  <u>XkbSetMap</u>  function returns True all components specified by <u>which</u> are present in the
                      <u>xkb</u> parameter.

       False          The <u>XkbSetMap</u> function returns False if any component specified by <u>which</u> is not present in
                      the <u>xkb</u> parameter.

</pre><h4><b>STRUCTURES</b></h4><pre>
       Use the XkbMapChangesRec structure to identify and track partial modifications to the mapping  components
       and to reduce the amount of traffic between the server and clients.

       typedef struct _XkbMapChanges {
           unsigned short   changed;            /* identifies valid components in structure */
           KeyCode          min_key_code;       /* lowest numbered keycode for device */
           KeyCode          max_key_code;       /* highest numbered keycode for device */
           unsigned char    first_type;         /* index of first key type modified */
           unsigned char    num_types;          /* # types modified */
           KeyCode          first_key_sym;      /* first key whose key_sym_map changed */
           unsigned char    num_key_syms;       /* # key_sym_map entries changed */
           KeyCode          first_key_act;      /* first key whose key_acts entry changed */
           unsigned char    num_key_acts;       /* # key_acts entries changed */
           KeyCode          first_key_behavior; /* first key whose behaviors changed */
           unsigned char    num_key_behaviors;  /* # behaviors entries changed */
           KeyCode          first_key_explicit; /* first key whose explicit entry changed */
           unsigned char    num_key_explicit;   /* # explicit entries changed */
           KeyCode          first_modmap_key;   /* first key whose modmap entry changed */
           unsigned char    num_modmap_keys;    /* # modmap entries changed */
           KeyCode          first_vmodmap_key;  /* first key whose vmodmap changed */
           unsigned char    num_vmodmap_keys;   /* # vmodmap entries changed */
           unsigned char    pad1;               /* reserved */
           unsigned short   vmods;              /* mask indicating which vmods changed */
       } XkbMapChangesRec,*XkbMapChangesPtr;

       The  complete  description  of an Xkb keyboard is given by an XkbDescRec. The component structures in the
       XkbDescRec represent the major Xkb components.

       typedef struct {
          struct _XDisplay * display;      /* connection to X server */
          unsigned short     flags;        /* private to Xkb, do not modify */
          unsigned short     device_spec;  /* device of interest */
          KeyCode            min_key_code; /* minimum keycode for device */
          KeyCode            max_key_code; /* maximum keycode for device */
          XkbControlsPtr     ctrls;        /* controls */
          XkbServerMapPtr    server;       /* server keymap */
          XkbClientMapPtr    map;          /* client keymap */
          XkbIndicatorPtr    indicators;   /* indicator map */
          XkbNamesPtr        names;        /* names for all components */
          XkbCompatMapPtr    compat;       /* compatibility map */
          XkbGeometryPtr     geom;         /* physical geometry of keyboard */
       } XkbDescRec, *XkbDescPtr;

       The <u>display</u> field points to an X display structure. The <u>flags</u> <u>field</u> <u>is</u> <u>private</u> <u>to</u> <u>the</u> <u>library:</u>  <u>modifying</u>
       <u>flags</u>  may  yield  unpredictable  results.  The  <u>device_spec</u> field specifies the device identifier of the
       keyboard input device, or XkbUseCoreKeyboard, which specifies the core keyboard device. The  <u>min_key_code</u>
       and <u>max_key_code</u> fields specify the least and greatest keycode that can be returned by the keyboard.

       Each structure component has a corresponding mask bit that is used in function calls to indicate that the
       structure  should  be  manipulated  in  some manner, such as allocating it or freeing it. These masks and
       their relationships to the fields in the XkbDescRec are shown in Table 3.
               Table 3 Mask Bits for XkbDescRec
       ──────────────────────────────────────────────────
       Mask Bit               XkbDescRec Field   Value
       ──────────────────────────────────────────────────
       XkbControlsMask        ctrls              (1L&lt;&lt;0)
       XkbServerMapMask       server             (1L&lt;&lt;1)
       XkbIClientMapMask      map                (1L&lt;&lt;2)
       XkbIndicatorMapMask    indicators         (1L&lt;&lt;3)
       XkbNamesMask           names              (1L&lt;&lt;4)
       XkbCompatMapMask       compat             (1L&lt;&lt;5)
       XkbGeometryMask        geom               (1L&lt;&lt;6)
       XkbAllComponentsMask   All Fields         (0x7f)

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>BadAlloc</b>       Unable to allocate storage

       <b>BadLength</b>      The length of a request is shorter or longer than that required to minimally  contain  the
                      arguments

       <b>BadValue</b>       An argument is out of range

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/XkbChangeMap.3.html">XkbChangeMap</a></b>(3),   <b><a href="../man3/XkbChangeTypesOfKey.3.html">XkbChangeTypesOfKey</a></b>(3),  <b><a href="../man3/XkbCopyKeyType.3.html">XkbCopyKeyType</a></b>(3),  <b><a href="../man3/XkbCopyKeyTypes.3.html">XkbCopyKeyTypes</a></b>(3),  <b><a href="../man3/XkbGetKeyActions.3.html">XkbGetKeyActions</a></b>(3),
       <b><a href="../man3/XkbGetKeyBehaviors.3.html">XkbGetKeyBehaviors</a></b>(3),   <b><a href="../man3/XkbGetKeyExplicitComponents.3.html">XkbGetKeyExplicitComponents</a></b>(3),    <b><a href="../man3/XkbGetKeyModifierMap.3.html">XkbGetKeyModifierMap</a></b>(3),    <b><a href="../man3/XkbGetKeySyms.3.html">XkbGetKeySyms</a></b>(3),
       <b><a href="../man3/XkbGetKeyTypes.3.html">XkbGetKeyTypes</a></b>(3),        <b><a href="../man3/XkbResizeKeyActions.3.html">XkbResizeKeyActions</a></b>(3),        <b><a href="../man3/XkbResizeKeySyms.3.html">XkbResizeKeySyms</a></b>(3),        <b><a href="../man3/XkbResizeKeyType.3.html">XkbResizeKeyType</a></b>(3),
       <b><a href="../man3/XkbGetVirtualModMap.3.html">XkbGetVirtualModMap</a></b>(3), <b><a href="../man3/XkbGetVirtualMods.3.html">XkbGetVirtualMods</a></b>(3)

X Version 11                                      libX11 1.8.12                                     <u><a href="../man3/XkbSetMap.3.html">XkbSetMap</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>