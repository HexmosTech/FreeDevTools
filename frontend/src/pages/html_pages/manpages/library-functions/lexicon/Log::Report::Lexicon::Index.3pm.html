<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Log::Report::Lexicon::Index - search through available translation files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblog-report-lexicon-perl">liblog-report-lexicon-perl_1.12-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Log::Report::Lexicon::Index - search through available translation files

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $index = Log::Report::Lexicon::Index-&gt;new($directory);
        my $fn    = $index-&gt;find('my-domain', 'nl_NL.utf-8');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module handles the lookup of translation files for a whole directory tree.  It is lazy loading,
       which means that it will only build the search tree when addressed, not when the object is created.

</pre><h4><b>METHODS</b></h4><pre>
   <b>Constructors</b>
       Log::Report::Lexicon::Index-&gt;<b>new</b>($directory, %options)
           Create  an  index  for  a  certain  directory.  If the directory does not exist or is empty, then the
           object will still be created.

           All files the $directory tree which are recognized as an translation table format which is understood
           will be listed.  Momentarily, those are:

           . files with extension "po", see Log::Report::Lexicon::POTcompact
           . [0.993] files with extension "mo", see Log::Report::Lexicon::MOTcompact

           [0.99] Files which are in directories which start with a dot (hidden  directories)  and  files  which
           start with a dot (hidden files) are skipped.

   <b>Accessors</b>
       $obj-&gt;<b>directory</b>()
           Returns the directory name.

   <b>Search</b>
       $obj-&gt;<b>addFile</b>( $basename, [$absolute] )
           Add  a certain file to the index.  This method returns the $absolute path to that file, which must be
           used to access it.  When not explicitly specified, the $absolute path will be calculated.

       $obj-&gt;<b>find</b>($textdomain, $locale)
           Lookup the best translation table, according to the rules described in chapter "DETAILS", below.

           Returned is a filename, or "undef" if nothing is defined for the $locale (there is no default on this
           level).

       $obj-&gt;<b>index</b>()
           For internal use only.  Force the creation of the index (if not already done).  Returns a  hash  with
           key-value  pairs,  where  the key is the lower-cased version of the filename, and the value the case-
           sensitive version of the filename.

       $obj-&gt;<b>list</b>( $domain, [$extension] )
           Returned is a list of filenames which is used to update the list of MSGIDs  when  source  files  have
           changed.  All translation files which belong to a certain $domain are listed.

           The  $extension filter can be used to reduce the filenames further, for instance to select only "po",
           "mo" or "gmo" files, and  ignore  readme's.   Use  an  string,  without  dot  and  interpreted  case-
           insensitive, or a regular expression.

           example:

             my @l = $index-&gt;list('my-domain');
             my @l = $index-&gt;list('my-domain', 'po');
             my @l = $index-&gt;list('my-domain', qr/^readme/i);

</pre><h4><b>DETAILS</b></h4><pre>
       It's always complicated to find the lexicon files, because the perl package can be installed on any weird
       operating  system.   Therefore,  you may need to specify the lexicon directory or alternative directories
       explicitly.  However, you may also choose to install the lexicon files in between the perl modules.

   <b>merge</b> <b>lexicon</b> <b>files</b> <b>with</b> <b>perl</b> <b>modules</b>
       By default,  the  filename  which  contains  the  package  which  contains  the  textdomain's  translator
       configuration  is  taken  (that  can  be  only  one) and changed into a directory name.  The path is then
       extended with "messages" to form the root of the lexicon: the top of the index.  After this,  the  locale
       indication,  the  lc-category  (usually  LC_MESSAGES),  and the "textdomain" followed by ".po" are added.
       This is exactly as <a href="../man1/gettext.1.html">gettext</a>(1) does, but then using the PO text file instead of the MO binary file.

       <b>.</b> <b>Example:</b> <b>lexicon</b> <b>in</b> <b>module</b> <b>tree</b>

       My module is named "Some::Module" and installed in some of perl's  directories,  say  "~perl5.8.8".   The
       module  is defining textdomain "my-domain".  The translation is made into "nl-NL.utf-8" (locale for Dutch
       spoken in The Netherlands, utf-8 encoded text file).

       The default location for the translation table is under
        ~perl5.8.8/Some/Module/messages/

       for instance
        ~perl5.8.8/Some/Module/messages/nl-NL.utf-8/LC_MESSAGES/my-domain.po

       There are alternatives, as described in Log::Report::Lexicon::Index, for instance
        ~perl5.8.8/Some/Module/messages/my-domain/nl-NL.utf-8.po
        ~perl5.8.8/Some/Module/messages/my-domain/nl.po

   <b>Locale</b> <b>search</b>
       The exact gettext defined format of the locale is
         language[_territory[.codeset]][@modifier] The modifier will be used in above directory search, but only
       if provided explicitly.

       The manual "info gettext" determines the  rules.   During  the  search,  components  of  the  locale  get
       stripped, in the following order:

       1. codeset
       2. normalized codeset
       3. territory
       4. modifier

       The normalized codeset (character-set name) is derived by

       1. Remove all characters beside numbers and letters.
       2. Fold letters to lowercase.
       3. If the same only contains digits prepend the string "iso".

       To speed-up the search for the right table, the full directory tree will be indexed only once when needed
       the first time.  The content of all defined lexicon directories will get merged into one tree.

   <b>Example</b>
       My  module is named "Some::Module" and installed in some of perl's directories, say "~perl5".  The module
       is defining textdomain "my-domain".  The translation is made into "nl-NL.utf-8" (locale for Dutch  spoken
       in The Netherlands, utf-8 encoded text file).

       The translation table is taken from the first existing of these files:
         nl-NL.utf-8/LC_MESSAGES/my-domain.po
         nl-NL.utf-8/LC_MESSAGES/my-domain.po
         nl-NL.utf8/LC_MESSAGES/my-domain.po
         nl-NL/LC_MESSAGES/my-domain.po
         nl/LC_MESSAGES/my-domain.po

       Then,  attempts  are  made  which  are  not compatible with gettext.  The advantage is that the directory
       structure is much simpler.  The idea is that each domain  has  its  own  locale  installation  directory,
       instead of everything merged in one place, what gettext presumes.

       In order of attempts:
         nl-NL.utf-8/my-domain.po
         nl-NL.utf8/my-domain.po
         nl-NL/my-domain.po
         nl/my-domain.po
         my-domain/nl-NL.utf8.po
         my-domain/nl-NL.po
         my-domain/nl.po

       Filenames  may  get  mutulated  by  the platform (which we will try to hide from you [please help improve
       this]), and are treated case-INsensitive!

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module is part of Log-Report-Lexicon distribution version 1.12, built on April  18,  2025.  Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2007-2025 by [Mark Overmeer &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]. For other contributors see ChangeLog.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-24                   <u>Log::Report::Lexicon::<a href="../man3pm/Index.3pm.html">Index</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>