<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>keyctl_pkey_encrypt, keyctl_pkey_decrypt - Encrypt and decrypt data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libkeyutils-dev">libkeyutils-dev_1.6.3-6ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       keyctl_pkey_encrypt, keyctl_pkey_decrypt - Encrypt and decrypt data

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;keyutils.h&gt;</b>

       <b>long</b> <b>keyctl_pkey_encrypt(key_serial_t</b> <u>key</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>info</u><b>,</b>
                                <b>const</b> <b>void</b> <b>*</b><u>data</u><b>,</b> <b>size_t</b> <u>data_len</u><b>,</b>
                                <b>void</b> <b>*</b><u>enc</u><b>,</b> <b>size_t</b> <u>enc_len</u><b>);</b>

       <b>long</b> <b>keyctl_pkey_decrypt(key_serial_t</b> <u>key</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>info</u><b>,</b>
                                <b>const</b> <b>void</b> <b>*</b><u>enc</u><b>,</b> <b>size_t</b> <u>enc_len</u><b>,</b>
                                <b>void</b> <b>*</b><u>data</u><b>,</b> <b>size_t</b> <u>data_len</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>keyctl_pkey_encrypt</b>()  asks  the kernel to use the crypto material attached to a key to encrypt a blob of
       data and <b>keyctl_pkey_decrypt</b>() asks the kernel to use the key to reverse the operation  and  recover  the
       original  data.  Note that these operations may involve the kernel calling out to cryptographic hardware.
       The caller must have <b>search</b> permission on a key to be able to use them in this manner.

       When invoking the function, <u>key</u> indicates the key that will provide the cryptographic material  and  <u>info</u>
       points to a space- or tab-separated string of "key[=value]" parameters that indicate things like encoding
       forms and passwords to unlock the key; see <a href="../man7/asymmetric-key.7.html">asymmetric-key</a>(7) for more information.

       <u>data</u>  and  <u>datalen</u> indicate the address and size of the decrypted data buffer and <u>enc</u> and <u>enclen</u> indicate
       the address and size of the encrypted data buffer.  The encrypt function draws data  from  the  decrypted
       data  buffer  and  places  the output into the encryption buffer.  The decrypt function does the reverse,
       drawing from the encryption buffer and writing into the data buffer.

       <b><a href="../man2/keyctl_pkey_query.2.html">keyctl_pkey_query</a></b>(2) can be called to find out how large the buffers need to be.

       Note that not all asymmetric-type keys will support these operations; further, the  operations  available
       may  depend on which components of the key material are available: typically encryption only requires the
       public key, but decryption requires the private key  as  well.   Which  operations  are  supported  on  a
       particular key can also be determined using the query function.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  success  <b>keyctl_pkey_encrypt</b>()  and  <b>keyctl_pkey_decrypt</b>() return the amount of data written into the
       output buffer.  On error, the value <b>-1</b> will be returned and <u>errno</u> will have been set  to  an  appropriate
       error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>ENOKEY</b> The key specified is invalid.

       <b>EKEYEXPIRED</b>
              The key specified has expired.

       <b>EKEYREVOKED</b>
              The key specified has been revoked.

       <b>EACCES</b> The key exists, but is not <b>searchable</b> by the calling process.

       <b>ENOPKG</b> Some  facility needed to complete the requested operation is not available.  This is most probably
              a requested or required digest or encryption algorithm.

       <b>EFAULT</b> Bad address.

</pre><h4><b>LINKING</b></h4><pre>
       This is a library function that can  be  found  in  <u>libkeyutils</u>.   When  linking,  <b>-lkeyutils</b>  should  be
       specified to the linker.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/keyctl.1.html">keyctl</a></b>(1), <b><a href="../man2/add_key.2.html">add_key</a></b>(2), <b><a href="../man2/keyctl.2.html">keyctl</a></b>(2), <b><a href="../man3/keyctl.3.html">keyctl</a></b>(3), <b><a href="../man3/keyctl_pkey_query.3.html">keyctl_pkey_query</a></b>(3), <b><a href="../man3/keyctl_pkey_sign.3.html">keyctl_pkey_sign</a></b>(3), <b><a href="../man7/keyrings.7.html">keyrings</a></b>(7),
       <b><a href="../man7/keyutils.7.html">keyutils</a></b>(7)

Linux                                              8 Nov 2018                             <u><a href="../man3/KEYCTL_PKEY_ENCRYPT.3.html">KEYCTL_PKEY_ENCRYPT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>