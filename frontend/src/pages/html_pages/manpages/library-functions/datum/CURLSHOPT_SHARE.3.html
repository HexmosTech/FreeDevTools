<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLSHOPT_SHARE - add data to share</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLSHOPT_SHARE - add data to share

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLSHcode curl_share_setopt(CURLSH *share, CURLSHOPT_SHARE, long type);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>type</u>  parameter specifies what specific data that should be shared and kept in the share object that
       was created with <u><a href="../man3/curl_share_init.3.html">curl_share_init</a>(3)</u>.  The given <u>type</u> must be one of the values described below.  You  can
       set  <u><a href="../man3/CURLSHOPT_SHARE.3.html">CURLSHOPT_SHARE</a>(3)</u>  multiple  times  with  different  data  arguments to have the share object share
       multiple types of data. Unset a type again by setting <u><a href="../man3/CURLSHOPT_UNSHARE.3.html">CURLSHOPT_UNSHARE</a>(3)</u>.

       CURL_LOCK_DATA_COOKIE
              Cookie data is shared across the easy handles using this shared object. Note that  this  does  not
              activate   an   easy   handle's   cookie   handling.   You   can   do  that  separately  by  using
              <u><a href="../man3/CURLOPT_COOKIEFILE.3.html">CURLOPT_COOKIEFILE</a>(3)</u> for example.

              It is not supported to share cookies between multiple concurrent threads.

       CURL_LOCK_DATA_DNS
              Cached DNS hosts are shared across the easy handles using this shared object. Note that  when  you
              use  the  multi  interface, all easy handles added to the same multi handle share the DNS cache by
              default without using this option.

       CURL_LOCK_DATA_SSL_SESSION
              SSL sessions are shared across the easy handles using this shared object. This  reduces  the  time
              spent  in  the SSL handshake when reconnecting to the same server. This symbol was added in 7.10.3
              but was not implemented until 7.23.0.

              Note that when you use the multi interface, all easy handles added to the same multi handle  share
              the SSL session cache by default without using this option.

       CURL_LOCK_DATA_CONNECT
              Put  the  connection  cache  in the share object and make all easy handles using this share object
              share the connection cache.

              It is not supported to share connections between multiple concurrent threads.

              Connections that are used for HTTP/2 or HTTP/3 multiplexing only get additional transfers added to
              them if the existing connection is held by the same multi or easy handle. libcurl does not support
              doing multiplexed streams in different threads using a shared connection.

              Support for <b>CURL_LOCK_DATA_CONNECT</b> was added in 7.57.0, but the symbol existed before this.

              Note that when you use the multi interface, all easy handles added to the same multi handle  share
              the connection cache by default without using this option.

       CURL_LOCK_DATA_PSL
              The  Public  Suffix  List stored in the share object is made available to all easy handle bound to
              the later. Since the Public Suffix List is periodically refreshed, this avoids updates in too many
              different contexts.

              Added in 7.61.0.

              Note that when you use the multi interface, all easy handles added to the same multi handle  share
              the PSL cache by default without using this option.

       CURL_LOCK_DATA_HSTS
              The in-memory HSTS cache.

              It is not supported to share the HSTS between multiple concurrent threads.

              Added in 7.88.0

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURLSHcode sh;
         CURLSH *share = curl_share_init();
         sh = curl_share_setopt(share, CURLSHOPT_SHARE, CURL_LOCK_DATA_COOKIE);
         if(sh)
           printf("Error: %s\n", curl_share_strerror(sh));
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.10.3

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       CURLSHE_OK  (zero)  means  that  the  option  was  set  properly,  non-zero  means an error occurred. See
       <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u> for the full list with descriptions.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLSHOPT_UNSHARE.3.html">CURLSHOPT_UNSHARE</a></b>(3), <b><a href="../man3/curl_share_cleanup.3.html">curl_share_cleanup</a></b>(3), <b><a href="../man3/curl_share_init.3.html">curl_share_init</a></b>(3), <b><a href="../man3/curl_share_setopt.3.html">curl_share_setopt</a></b>(3)

libcurl                                            2025-06-16                                 <u><a href="../man3/CURLSHOPT_SHARE.3.html">CURLSHOPT_SHARE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>