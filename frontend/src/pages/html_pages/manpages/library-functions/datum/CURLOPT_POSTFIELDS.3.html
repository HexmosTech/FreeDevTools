<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_POSTFIELDS - data to POST to server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_POSTFIELDS - data to POST to server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_POSTFIELDS, char *postdata);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass a char pointer as parameter, pointing to the data buffer to use in an HTTP POST operation or an MQTT
       subscribe. The data must be formatted and encoded the way you want the server to receive it. libcurl does
       not convert or encode it in any way. For example, a web server may assume that this data is URL encoded.

       The  data  pointed to is NOT copied by the library: as a consequence, it must be preserved by the calling
       application until the associated transfer finishes.  This behavior can be changed (so libcurl  does  copy
       the data) by instead using the <u><a href="../man3/CURLOPT_COPYPOSTFIELDS.3.html">CURLOPT_COPYPOSTFIELDS</a>(3)</u> option.

       This  POST  is  a  normal  <b>application/x-www-form-urlencoded</b>  kind (and libcurl sets that Content-Type by
       default when this option is used), which is  commonly  used  by  HTML  forms.  Change  Content-Type  with
       <u><a href="../man3/CURLOPT_HTTPHEADER.3.html">CURLOPT_HTTPHEADER</a>(3)</u>.

       You can use <u><a href="../man3/curl_easy_escape.3.html">curl_easy_escape</a>(3)</u> to URL encode your data, if necessary. It returns a pointer to an encoded
       string that can be passed as <u>postdata</u>.

       Using <u><a href="../man3/CURLOPT_POSTFIELDS.3.html">CURLOPT_POSTFIELDS</a>(3)</u> implies setting <u><a href="../man3/CURLOPT_POST.3.html">CURLOPT_POST</a>(3)</u> to 1.

       If  <u><a href="../man3/CURLOPT_POSTFIELDS.3.html">CURLOPT_POSTFIELDS</a>(3)</u>  is  explicitly  set  to  NULL  then  libcurl  gets the POST data from the read
       callback. To send a zero-length (empty) POST, set  <u><a href="../man3/CURLOPT_POSTFIELDS.3.html">CURLOPT_POSTFIELDS</a>(3)</u>  to  an  empty  string,  or  set
       <u><a href="../man3/CURLOPT_POST.3.html">CURLOPT_POST</a>(3)</u> to 1 and <u><a href="../man3/CURLOPT_POSTFIELDSIZE.3.html">CURLOPT_POSTFIELDSIZE</a>(3)</u> to 0.

       libcurl   assumes   this   option   points   to   a   null-terminated   string   unless   you   also  set
       <u><a href="../man3/CURLOPT_POSTFIELDSIZE.3.html">CURLOPT_POSTFIELDSIZE</a>(3)</u> to specify the length of the provided data, which then is strictly  required  if
       you want to send off null bytes included in the data.

       Using POST with HTTP 1.1 implies the use of a "Expect: 100-continue" header, and libcurl adds that header
       automatically  if  the POST is either known to be larger than 1MB or if the expected size is unknown. You
       can disable this header with <u><a href="../man3/CURLOPT_HTTPHEADER.3.html">CURLOPT_HTTPHEADER</a>(3)</u> as usual.

       To  make  <b>multipart/formdata</b>  posts,   check   out   the   <u><a href="../man3/CURLOPT_MIMEPOST.3.html">CURLOPT_MIMEPOST</a>(3)</u>   option   combined   with
       <u><a href="../man3/curl_mime_init.3.html">curl_mime_init</a>(3)</u>.

       Using this option multiple times makes the last set pointer override the previous ones. Set it to NULL to
       disable its use again.

</pre><h4><b>DEFAULT</b></h4><pre>
       NULL

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects http and mqtt

</pre><h4><b>EXAMPLE</b></h4><pre>
       /* send an application/x-www-form-urlencoded POST */
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           const char *data = "data to send";

           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");

           /* size of the POST data if strlen() is not good enough */
           curl_easy_setopt(curl, CURLOPT_POSTFIELDSIZE, 12L);

           /* pass in a pointer to the data - libcurl does not copy */
           curl_easy_setopt(curl, CURLOPT_POSTFIELDS, data);

           curl_easy_perform(curl);
         }

         /* send an application/json POST */
         curl = curl_easy_init();
         if(curl) {
           const char *json = "{\"name\": \"daniel\"}";
           struct curl_slist *slist1 = NULL;
           slist1 = curl_slist_append(slist1, "Content-Type: application/json");
           slist1 = curl_slist_append(slist1, "Accept: application/json");

           /* set custom headers */
           curl_easy_setopt(curl, CURLOPT_HTTPHEADER, slist1);

           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");

           /* pass in a pointer to the data - libcurl does not copy */
           curl_easy_setopt(curl, CURLOPT_POSTFIELDS, json);

           curl_easy_perform(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.1

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_COPYPOSTFIELDS.3.html">CURLOPT_COPYPOSTFIELDS</a></b>(3),    <b><a href="../man3/CURLOPT_MIMEPOST.3.html">CURLOPT_MIMEPOST</a></b>(3),   <b><a href="../man3/CURLOPT_POSTFIELDSIZE.3.html">CURLOPT_POSTFIELDSIZE</a></b>(3),   <b><a href="../man3/CURLOPT_READFUNCTION.3.html">CURLOPT_READFUNCTION</a></b>(3),
       <b><a href="../man3/CURLOPT_UPLOAD.3.html">CURLOPT_UPLOAD</a></b>(3)

libcurl                                            2025-06-16                              <u><a href="../man3/CURLOPT_POSTFIELDS.3.html">CURLOPT_POSTFIELDS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>