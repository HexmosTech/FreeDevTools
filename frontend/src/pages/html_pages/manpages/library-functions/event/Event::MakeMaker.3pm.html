<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event::MakeMaker - MakeMaker glue for the C-level Event API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libevent-perl">libevent-perl_1.28-2build4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Event::MakeMaker - MakeMaker glue for the C-level Event API

</pre><h4><b>SYNOPSIS</b></h4><pre>
       This is an advanced feature of Event.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       For optimal performance, hook into Event at the C-level.  You'll need to make changes to your
       "Makefile.PL" and add code to your "xs" / "c" file(s).

</pre><h4><b>WARNING</b></h4><pre>
       When you hook in at the C-level you get a <u>huge</u> performance gain, but you also reduce the chances that
       your code will work unmodified with newer versions of "perl" or "Event".  This may or may not be a
       problem.  Just be aware, and set your expectations accordingly.

</pre><h4><b>HOW</b> <b>TO</b></h4><pre>
   <b>Makefile.PL</b>
         use Event::MakeMaker qw(event_args);

         # ... set up %args ...

         WriteMakefile(event_args(%args));

   <b>XS</b>
         #include "EventAPI.h"

         BOOT:
           I_EVENT_API("YourModule");

   <b>API</b> <b>(v21)</b>
        struct EventAPI {
           I32 Ver;

           /* EVENTS */
           void (*queue   )(pe_event *ev);
           void (*start   )(pe_watcher *ev, int repeat);
           void (*now     )(pe_watcher *ev);
           void (*stop    )(pe_watcher *ev, int cancel_events);
           void (*cancel  )(pe_watcher *ev);
           void (*suspend )(pe_watcher *ev);
           void (*resume  )(pe_watcher *ev);

           /* All constructors optionally take a stash and template.  Either
             or both can be NULL.  The template should not be a reference. */
           pe_idle     *(*new_idle  )(HV*, SV*);
           pe_timer    *(*new_timer )(HV*, SV*);
           pe_io       *(*new_io    )(HV*, SV*);
           pe_var      *(*new_var   )(HV*, SV*);
           pe_signal   *(*new_signal)(HV*, SV*);

           /* TIMEABLE */
           void (*tstart)(pe_timeable *);
           void (*tstop)(pe_timeable *);

           /* HOOKS */
           pe_qcallback *(*add_hook)(char *which, void *cb, void *ext_data);
           void (*cancel_hook)(pe_qcallback *qcb);

           /* STATS */
           void (*install_stats)(pe_event_stats_vtbl *esvtbl);
           void (*collect_stats)(int yes);
           pe_ring *AllWatchers;

           /* TYPEMAP */
           SV   *(*watcher_2sv)(pe_watcher *wa);
           void *(*sv_2watcher)(SV *sv);
           SV   *(*event_2sv)(pe_event *ev);
           void *(*sv_2event)(SV *sv);
        };

   <b>EXAMPLE</b>
         static pe_io *X11_ev=0;

         static void x_server_dispatch(void *ext_data)
         { ... }

         if (!X11_ev) {
           X11_ev = GEventAPI-&gt;new_io(0,0);
           X11_ev-&gt;poll = PE_R;
           sv_setpv(X11_ev-&gt;base.desc, "X::Server");
           X11_ev-&gt;base.callback = (void*) x_server_dispatch;
           X11_ev-&gt;base.ext_data = &lt;whatever&gt;;
           X11_ev-&gt;base.prio = PE_PRIO_NORMAL;
         }
         X11_ev-&gt;fd = x_fd;
         GEventAPI-&gt;resume((pe_event*) X11_ev);
         GEventAPI-&gt;start((pe_event*) X11_ev, 0);

   <b>BUT</b> <b>I</b> <b>NEED</b> <b>A</b> <b>NEW</b> <b>TYPE</b> <b>OF</b> <b>WATCHER</b> <b>FOR</b> <b>MY</b> <b>INTERGALACTIC</b> <b>INFEROMETER</b>
       I'd prefer not to export the entire Event.h apparatus in favor of minimizing interdependencies.  If you
       really, really need to create a new type of watcher send your problem analysis to the mailing list!

perl v5.40.0                                       2024-10-20                              <u>Event::<a href="../man3pm/MakeMaker.3pm.html">MakeMaker</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>