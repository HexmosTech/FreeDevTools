<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_event_source_set_prepare - Set a preparation callback for event sources</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_event_source_set_prepare - Set a preparation callback for event sources

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-event.h&gt;</b>

       <b>int</b> <b>sd_event_source_set_prepare(sd_event_source</b> <b>*</b><u>source</u><b>,</b> <b>sd_event_handler_t</b> <u>callback</u><b>);</b>

       <b>typedef</b> <b>int</b> <b>(*sd_event_handler_t)(sd_event_source</b> <b>*</b><u>s</u><b>,</b> <b>void</b> <b>*</b><u>userdata</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_event_source_set_prepare()</b> may be used to set a preparation callback for the event source object
       specified as <u>source</u>. The callback function specified as <u>callback</u> will be invoked immediately before the
       event loop goes to sleep to wait for incoming events. It is invoked with the user data pointer passed
       when the event source was created. The event source will be disabled if the callback function returns a
       negative error code. The callback function may be used to reconfigure the precise events to wait for. If
       the <u>callback</u> parameter is passed as <b>NULL</b> the callback function is reset.

       Event source objects have no preparation callback associated when they are first created with calls such
       as <b><a href="../man3/sd_event_add_io.3.html">sd_event_add_io</a></b>(3), <b><a href="../man3/sd_event_add_time.3.html">sd_event_add_time</a></b>(3). Preparation callback functions are supported for all event
       source types with the exception of those created with <b><a href="../man3/sd_event_add_exit.3.html">sd_event_add_exit</a></b>(3). Preparation callback
       functions are dispatched in the order indicated by the event source's priority field, as set with
       <b><a href="../man3/sd_event_source_set_priority.3.html">sd_event_source_set_priority</a></b>(3). Preparation callbacks of disabled event sources (see
       <b><a href="../man3/sd_event_source_set_enabled.3.html">sd_event_source_set_enabled</a></b>(3)) are not invoked.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>sd_event_source_set_prepare()</b> returns a non-negative integer. On failure, it returns a
       negative errno-style error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-EINVAL</b>
           <u>source</u> is not a valid pointer to an sd_event_source object.

       <b>-ESTALE</b>
           The event loop is already terminated.

       <b>-ENOMEM</b>
           Not enough memory.

       <b>-ECHILD</b>
           The event loop has been created in a different process, library or module instance.

       <b>-EDOM</b>
           The specified event source has been created with <b><a href="../man3/sd_event_add_exit.3.html">sd_event_add_exit</a></b>(3).

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_event_source_set_prepare()</b> and <b>sd_event_handler_t()</b> were added in version 229.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/sd-event.3.html">sd-event</a></b>(3), <b><a href="../man3/sd_event_add_io.3.html">sd_event_add_io</a></b>(3), <b><a href="../man3/sd_event_add_time.3.html">sd_event_add_time</a></b>(3), <b><a href="../man3/sd_event_add_signal.3.html">sd_event_add_signal</a></b>(3), <b><a href="../man3/sd_event_add_child.3.html">sd_event_add_child</a></b>(3),
       <b><a href="../man3/sd_event_add_inotify.3.html">sd_event_add_inotify</a></b>(3), <b><a href="../man3/sd_event_add_defer.3.html">sd_event_add_defer</a></b>(3), <b><a href="../man3/sd_event_source_set_enabled.3.html">sd_event_source_set_enabled</a></b>(3),
       <b><a href="../man3/sd_event_source_set_priority.3.html">sd_event_source_set_priority</a></b>(3), <b><a href="../man3/sd_event_source_set_userdata.3.html">sd_event_source_set_userdata</a></b>(3)

systemd 257.7                                                                     <u><a href="../man3/SD_EVENT_SOURCE_SET_PREPARE.3.html">SD_EVENT_SOURCE_SET_PREPARE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>