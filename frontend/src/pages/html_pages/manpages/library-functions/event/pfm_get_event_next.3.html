<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pfm_get_event_next - iterate over events</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpfm4-dev">libpfm4-dev_4.13.0+git99-gc5587f9-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pfm_get_event_next - iterate over events

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;perfmon/pfmlib.h&gt;</b>

       <b>int</b> <b>pfm_get_event_next(int</b> <u>idx</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Events  are  uniquely  identified  with  opaque integer identifiers.  There is no guaranteed order within
       identifiers. Thus, to list all the events, it is necessary to use iterators.

       Events are grouped in tables within the library. A table usually corresponds to a PMU  model  or  family.
       The  library  contains  support  for  multiple PMU models, thus it has multiple tables. Based on the host
       hardware  and  software  environments,  tables  get  activated  when  the  library  is  initialized   via
       <b>pfm_initialize()</b>. Events from activated tables are called active events. Events from non-activated tables
       are called supported events.

       Event identifiers are usually retrieved via <b>pfm_find_event()</b> or when encoding events.

       To  iterate  over a list of events for a given PMU model, all that is needed is an initial identifier for
       the PMU. The first event identifier is usually obtained via <b>pfm_get_pmu_info()</b>.

       The <b>pfm_get_event_next()</b> function returns the identifier of next supported event after the one passed  in
       <b>idx</b>.  This  iterator  stops  when  the  last  event  for the PMU is passed as argument, in which case the
       function returns -1.

       void list_pmu_events(pfm_pmu_t pmu)
       {
          struct pfm_event_info info;
          struct pfm_pmu_info pinfo;
          int i, ret;

          memset(&amp;info, 0, sizeof(info));
          memset(&amp;pinfo, 0, sizeof(pinfo));

          info.size = sizeof(info);
          pinfo.size = sizeof(pinfo);

          ret = pfm_get_pmu_info(pmu, &amp;pinfo);
          if (ret != PFM_SUCCESS)
             errx(1, "cannot get pmu info");

          for (i = pinfo.first_event; i != -1; i = pfm_get_event_next(i)) {
             ret = pfm_get_event_info(i, &amp;info);
             if (ret != PFM_SUCCESS)
               errx(1, "cannot get event info");

               printf("%s Event: %s::%s\n",
                      pinfo.present ? "Active" : "Supported",
                      pinfo.name, info.name);
         }
       }

</pre><h4><b>RETURN</b></h4><pre>
       The function returns the identifier of the next supported event. It  returns  -1  when  the  argument  is
       already the last event for the PMU.

</pre><h4><b>ERRORS</b></h4><pre>
       No error code, besides -1, is returned by this function.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/pfm_find_event.3.html">pfm_find_event</a>(3)

</pre><h4><b>AUTHOR</b></h4><pre>
       Stephane Eranian &lt;<a href="mailto:eranian@gmail.com">eranian@gmail.com</a>&gt;

                                                 September, 2009                                       <u><a href="../man3/LIBPFM.3.html">LIBPFM</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>