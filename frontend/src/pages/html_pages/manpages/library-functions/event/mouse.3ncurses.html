<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>has_mouse,  getmouse, ungetmouse, mousemask, wenclose, mouse_trafo, wmouse_trafo, mouseinterval, mmask_t,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ncurses-doc">ncurses-doc_6.5+20250216-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>has_mouse</b>,  <b>getmouse</b>, <b>ungetmouse</b>, <b>mousemask</b>, <b>wenclose</b>, <b>mouse_trafo</b>, <b>wmouse_trafo</b>, <b>mouseinterval</b>, <b>mmask_t</b>,
       <b>MEVENT</b> - get mouse events in <u>ncurses</u>

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;curses.h&gt;</b>

       <u>/*</u> <u>data</u> <u>types</u> <u>*/</u>
       <b>typedef</b> <b>unsigned</b> <b>long</b> <b>mmask_t;</b>

       <b>typedef</b> <b>struct</b> <b>{</b>
           <b>short</b> <b>id;</b>       <u>/*</u> <u>ID</u> <u>to</u> <u>distinguish</u> <u>multiple</u> <u>devices</u> <u>*/</u>
           <b>int</b> <b>x,</b> <b>y,</b> <b>z;</b>    <u>/*</u> <u>event</u> <u>coordinates</u> <u>*/</u>
           <b>mmask_t</b> <b>bstate;</b> <u>/*</u> <u>button</u> <u>state</u> <u>bits</u> <u>*/</u>
       <b>}</b> <b>MEVENT;</b>

       <u>/*</u> <u>functions</u> <u>*/</u>
       <b>bool</b> <b>has_mouse(void);</b>

       <b>mmask_t</b> <b>mousemask(mmask_t</b> <u>new-mask</u><b>,</b> <b>mmask_t</b> <b>*</b> <u>old-mask</u><b>);</b>

       <b>int</b> <b>getmouse(MEVENT</b> <b>*</b> <u>event</u><b>);</b>
       <b>int</b> <b>ungetmouse(MEVENT</b> <b>*</b> <u>event</u><b>);</b>

       <b>bool</b> <b>wenclose(const</b> <b>WINDOW</b> <b>*</b> <u>win</u><b>,</b> <b>int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>);</b>

       <b>bool</b> <b>mouse_trafo(int</b> <b>*</b> <u>pY</u><b>,</b> <b>int</b> <b>*</b> <u>pX</u><b>,</b> <b>bool</b> <u>to-screen</u><b>);</b>
       <b>bool</b> <b>wmouse_trafo(const</b> <b>WINDOW</b> <b>*</b> <u>win</u><b>,</b>
             <b>int</b> <b>*</b> <u>pY</u><b>,</b> <b>int</b> <b>*</b> <u>pX</u><b>,</b> <b>bool</b> <u>to-screen</u><b>);</b>

       <b>int</b> <b>mouseinterval(int</b> <u>erval</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>ncurses</u> provides an interface to the mouse or other pointing device.  An  application  can  register  its
       interest  in  such  events;  the  library  then  exposes  the  availability of a mouse event via an <u>input</u>
       <u>character</u>  <u>reading</u>  <u>function</u>:  this  is  <b><a href="../man3NCURSES/wgetch.3NCURSES.html">wgetch</a></b>(3NCURSES)  in  the  non-wide  character  <u>curses</u>  API  and
       <b><a href="../man3NCURSES/wget_wch.3NCURSES.html">wget_wch</a></b>(3NCURSES)  in  the  wide  character  API.   A  queue distinct from that used for keyboard events
       accumulates the details of mouse events.  The input character reading function reports the <b>KEY_MOUSE</b>  key
       code  when  a  mouse  event  is  available for collection.  A single mouse event queue serves all windows
       associated with the screen.

       The <u>MEVENT</u> structure describes a mouse event.   Its  <u>y</u>  and  <u>x</u>  coordinates  are  screen-,  not  window-,
       relative.  The <u>bstate</u> member has exactly one bit set indicating the event type.

       <u>ncurses</u>  ignores mouse events when input is in canonical (“cooked”) mode, and produces an error beep when
       canonical mode is simulated in a window by a function such as <b><a href="../man3NCURSES/getstr.3NCURSES.html">getstr</a></b>(3NCURSES) that expects a linefeed to
       terminate its input loop.

   <b>has_mouse</b>
       The terminal type or operating system interface must support the encoding  of  mouse  events.   <b>has_mouse</b>
       returns <b>TRUE</b> if <u>ncurses</u>'s mouse driver initialized successfully, and <b>FALSE</b> otherwise.

   <b>mousemask</b>
       Use  <b>mousemask</b>  to  select  the varieties of mouse event your application wishes to receive.  By default,
       <u>ncurses</u> reports no mouse events.

       •   The function returns an updated copy of <u>new-mask</u> indicating which of the specified mouse  events  can
           be reported.

           If  the  screen  is  not  initialized,  or the terminal interface does report mouse events, <b>mousemask</b>
           returns 0.

       •   If <u>old-mask</u> is not a null pointer, <b>mousemask</b> stores the previous value of the  screen's  mouse  event
           mask there.

       As  a  side  effect,  setting a zero mouse mask may turn off the mouse cursor; setting a nonzero mask may
       turn it on.  Whether this happens is device-dependent.

   <b>Mouse</b> <b>Events</b>
       Several mouse event types may be selected; construct a mask by logically “or”-ing their values.

       <b>Name</b>                     <b>Description</b>
       ──────────────────────────────────────────────────────────────────────────────────────────────────────────
       <b>BUTTON1_PRESSED</b>          mouse button 1 down
       <b>BUTTON1_RELEASED</b>         mouse button 1 up
       <b>BUTTON1_CLICKED</b>          mouse button 1 clicked
       <b>BUTTON1_DOUBLE_CLICKED</b>   mouse button 1 double clicked
       <b>BUTTON1_TRIPLE_CLICKED</b>   mouse button 1 triple clicked
       ──────────────────────────────────────────────────────────────────────────────────────────────────────────
       <b>BUTTON2_PRESSED</b>          mouse button 2 down
       <b>BUTTON2_RELEASED</b>         mouse button 2 up
       <b>BUTTON2_CLICKED</b>          mouse button 2 clicked
       <b>BUTTON2_DOUBLE_CLICKED</b>   mouse button 2 double clicked
       <b>BUTTON2_TRIPLE_CLICKED</b>   mouse button 2 triple clicked
       ──────────────────────────────────────────────────────────────────────────────────────────────────────────
       <b>BUTTON3_PRESSED</b>          mouse button 3 down
       <b>BUTTON3_RELEASED</b>         mouse button 3 up
       <b>BUTTON3_CLICKED</b>          mouse button 3 clicked
       <b>BUTTON3_DOUBLE_CLICKED</b>   mouse button 3 double clicked
       <b>BUTTON3_TRIPLE_CLICKED</b>   mouse button 3 triple clicked
       ──────────────────────────────────────────────────────────────────────────────────────────────────────────
       <b>BUTTON4_PRESSED</b>          mouse button 4 down
       <b>BUTTON4_RELEASED</b>         mouse button 4 up
       <b>BUTTON4_CLICKED</b>          mouse button 4 clicked
       <b>BUTTON4_DOUBLE_CLICKED</b>   mouse button 4 double clicked
       <b>BUTTON4_TRIPLE_CLICKED</b>   mouse button 4 triple clicked
       ──────────────────────────────────────────────────────────────────────────────────────────────────────────
       <b>BUTTON5_PRESSED</b>          mouse button 5 down
       <b>BUTTON5_RELEASED</b>         mouse button 5 up
       <b>BUTTON5_CLICKED</b>          mouse button 5 clicked
       <b>BUTTON5_DOUBLE_CLICKED</b>   mouse button 5 double clicked
       <b>BUTTON5_TRIPLE_CLICKED</b>   mouse button 5 triple clicked
       ──────────────────────────────────────────────────────────────────────────────────────────────────────────
       <b>BUTTON_SHIFT</b>             a shift key was down during button state change
       <b>BUTTON_CTRL</b>              a control key was down during button state change
       <b>BUTTON_ALT</b>               an alt key was down during button state change
       <b>ALL_MOUSE_EVENTS</b>         report all button state changes
       <b>REPORT_MOUSE_POSITION</b>    report mouse movement
       ──────────────────────────────────────────────────────────────────────────────────────────────────────────

   <b>getmouse</b>
       Once a class of mouse events has been made visible in a  window,  calling  the  input  character  reading
       function on that window may return <b>KEY_MOUSE</b> as an indicator that a mouse event is enqueued.  To read the
       event  data  and pop the event off the queue, call <b>getmouse</b>, which returns <b>OK</b> if a mouse event is visible
       in the given window and <b>ERR</b> otherwise.  When <b>getmouse</b> returns <b>OK</b>, it deposits data describing  the  mouse
       event  in  the  <u>event</u> pointer you supply.  A subsequent <b>getmouse</b> call retrieves the next older event from
       the queue.

   <b>ungetmouse</b>
       <b>ungetmouse</b> behaves analogously to <b><a href="../man3NCURSES/ungetch.3NCURSES.html">ungetch</a></b>(3NCURSES).  It pushes a <b>KEY_MOUSE</b> event onto the screen's input
       queue, and <u>event</u> onto the mouse event queue.

   <b>wenclose</b>
       <b>wenclose</b> returns <b>TRUE</b> if the pair of screen-relative coordinates (<u>y</u>, <u>x</u>) is enclosed by the  given  window
       <u>win</u>, and <b>FALSE</b> otherwise.  If <u>win</u> is a pad, <b>wenclose</b> uses its most recent screen coordinates as specified
       in a <b><a href="../man3NCURSES/prefresh.3NCURSES.html">prefresh</a></b>(3NCURSES) or <b><a href="../man3NCURSES/pnoutrefresh.3NCURSES.html">pnoutrefresh</a></b>(3NCURSES) call.

       <b>wenclose</b>  is  useful for determining what subset of the screen's windows encloses the location of a mouse
       event; it is otherwise independent of the <u>ncurses</u> mouse API.

   <b>wmouse_trafo</b>
       <b>wmouse_trafo</b> transforms the given pair of coordinate pointers (<u>pY</u>, <u>pX</u>) from a  <u>win</u>-relative  basis  to  a
       screen-relative  one  or  <u>vice</u>  <u>versa</u>,  as  <u>to-screen</u>  is  <b>TRUE</b>  or <b>FALSE</b>, respectively.  <b>stdscr</b>-relative
       coordinates are not always identical to screen coordinates: <u>curses</u> supports reservation of  screen  lines
       at the top and/or bottom for other purposes; see <b><a href="../man3NCURSES/ripoffline.3NCURSES.html">ripoffline</a></b>(3NCURSES) and <b><a href="../man3NCURSES/slk_init.3NCURSES.html">slk_init</a></b>(3NCURSES).

       If  <u>to-screen</u>  <u>is</u>  <b>TRUE</b> and the pointers (<u>pY</u>, <u>pX</u>) reference coordinates inside <u>win</u>, <u>ncurses</u> updates their
       values to <b>stdscr</b>-relative coordinates and returns <b>TRUE</b>.  If either <u>pY</u> or <u>pX</u> is a null  pointer,  or  (<u>pY</u>,
       <u>pX</u>) is not inside <u>win</u>, <b>wmouse_trafo</b> returns <b>FALSE</b>.

       If  <u>to-screen</u>  <u>is</u>  <b>FALSE</b>  and  the pointers (<u>pY</u>, <u>pX</u>) reference coordinates inside <b>stdscr</b>, <u>ncurses</u> updates
       their values to <u>win</u>-relative coordinates and returns <b>TRUE</b>.  If either <u>pY</u> or <u>pX</u> is a null pointer, or (<u>pY</u>,
       <u>pX</u>) is not inside <b>stdscr</b>, <b>wmouse_trafo</b> returns <b>FALSE</b>.

   <b>mouse_trafo</b>
       <b>mouse_trafo</b> applies the <b>wmouse_trafo</b>  translation  to  <b>stdscr</b>.   If  no  screen  lines  are  reserved  by
       <b><a href="../man3NCURSES/ripoffline.3NCURSES.html">ripoffline</a></b>(3NCURSES) or <b><a href="../man3NCURSES/slk_init.3NCURSES.html">slk_init</a></b>(3NCURSES), this is the identity transformation.

   <b>mouseinterval</b>
       <b>mouseinterval</b>  sets  the  maximum  time  (in  thousandths  of a second) that can elapse between press and
       release events for them to be resolved as a <u>click</u>.  An  application  might  interpret  button  press  and
       release events separated by more than the mouse interval as a “long press”, or, with motion, as a “drag”.

       Calling  <b><a href="../man0/mouseinterval.0.html">mouseinterval</a>(0)</b>  disables  click  resolution.   When  <u>ncurses</u>  detects a mouse event, it awaits
       further input activity up to this interval, and then checks for a subsequent mouse  event  which  can  be
       combined  with the first event.  If the timeout expires without input activity (which would happen with a
       zero interval), then no click resolution occurs.

       This function returns the previous interval value.  Use <b>mouseinterval(-1)</b> to obtain the interval  without
       altering it.

       The mouse interval is set to one sixth of a second when the corresponding screen is initialized, e.g., in
       <b><a href="../man3NCURSES/initscr.3NCURSES.html">initscr</a></b>(3NCURSES) or <b><a href="../man3NCURSES/setupterm.3NCURSES.html">setupterm</a></b>(3NCURSES).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>has_mouse</b>, <b>wenclose</b>, <b>mouse_trafo</b>, and <b>wmouse_trafo</b> return <b>TRUE</b> or <b>FALSE</b> as noted above.

       <b>getmouse</b> and <b>ungetmouse</b> return <b>ERR</b> upon failure and <b>OK</b> upon success.

       <b>getmouse</b> fails if:

       •   no mouse driver was initialized,

       •   the mask of reportable events is zero,

       •   a mouse event was detected that does not match the mask, or

       •   no more events remain in the queue.

       <b>ungetmouse</b> returns <b>ERR</b> if the event queue is full.

       <b>mousemask</b> returns the mask of reportable events.

       <b>mouseinterval</b>  returns  the  previous  interval  value, unless the terminal was not initialized.  In that
       case, it returns the maximum interval value (166).

</pre><h4><b>NOTES</b></h4><pre>
       The order of the <b>MEVENT</b> structure members is not guaranteed.  Additional  fields  may  be  added  to  the
       structure in the future.

       Under  <u>ncurses</u>, these calls are implemented using either <u>xterm</u>'s built-in mouse-tracking API or platform-
       specific drivers including

          •   Alessandro Rubini's gpm server

          •   FreeBSD sysmouse

          •   OS/2 EMX

       If you are using an unsupported configuration, mouse events are not visible to <u>ncurses</u> (and the <b>mousemask</b>
       function always returns <b>0</b>).

       If the terminal type possesses the (nonstandard) <u>terminfo</u> string capability  <b>XM</b>,  <u>ncurses</u>'s  <u>xterm</u>  mouse
       driver  uses  it  when  initializing  the terminal for mouse operation.  The default, if <b>XM</b> is not found,
       corresponds to private mode 1000 of <u>xterm</u>.

          \E[?1000%?%p1%{1}%=%th%el%;

       <u>ncurses</u> also recognizes <u>xterm</u>'s newer private mode 1006.

          \E[?1006;1000%?%p1%{1}%=%th%el%;

       The <u>id</u> member of the mouse event structure is not presently used; no terminal type  or  operating  system
       interface  supports reporting events from distinguishable pointing devices.  If you synthesize an <u>MEVENT</u>,
       use an <u>id</u> of 0.

       The <u>z</u> member of the mouse event structure is not presently used.  It  is  intended  for  use  with  touch
       screens (which may be pressure-sensitive) or with 3D-mice/trackballs/power gloves.

       The  <b>ALL_MOUSE_EVENTS</b>  class does not include <b>REPORT_MOUSE_POSITION</b>.  They are distinct.  For example, in
       <u>xterm</u>, wheel/scrolling mice send position reports as a sequence of presses of  buttons  4  or  5  without
       matching button-releases.

</pre><h4><b>EXTENSIONS</b></h4><pre>
       These  functions  are  <u>ncurses</u>  extensions, and are not found in SVr4 <u>curses</u>, 4.4BSD <u>curses</u>, or any other
       previous <u>curses</u> implementation.  (SVr4 <u>curses</u> did have a <u>getmouse</u> function, which took  no  argument  and
       returned an <u>unsigned</u> <u>long</u>.)

</pre><h4><b>PORTABILITY</b></h4><pre>
       Applications  employing  the  <u>ncurses</u>  mouse  extension should condition its use on the visibility of the
       <b>NCURSES_MOUSE_VERSION</b> preprocessor macro.  When the interface  changes,  the  macro's  value  increments.
       Multiple  versions  are  available  when <u>ncurses</u> is configured; see section “ALTERNATE CONFIGURATIONS” of
       <b><a href="../man3NCURSES/ncurses.3NCURSES.html">ncurses</a></b>(3NCURSES).  The following values may be specified.

          <b>1</b>  has definitions for reserved events.  The mask uses 28 bits.

          <b>2</b>  adds definitions for button 5, removes the definitions for reserved events.  The mask uses 29 bits.

</pre><h4><b>HISTORY</b></h4><pre>
       SVr4 (1989) added mouse support to its variant of <u><a href="../man1/xterm.1.html">xterm</a></u>(1).  It is mentioned in a few places, with little
       supporting documentation.

       •   Its “libcurses” manual page lists functions for this feature prototyped in <u>curses.h</u>.

               extern int mouse_set(long int);
               extern int mouse_on(long int);
               extern int mouse_off(long int);
               extern int request_mouse_pos(void);
               extern int map_button(unsigned long);
               extern void wmouse_position(WINDOW *, int *, int *);
               extern unsigned long getmouse(void), getbmap(void);

       •   Its “terminfo” manual page lists capabilities for the feature.

               <b>buttons</b>         <b>btns</b>    <b>BT</b>   Number of buttons on the mouse
               <b>get_mouse</b>       <b>getm</b>    <b>Gm</b>   Curses should get button events
               <b>key_mouse</b>       <b>kmous</b>   <b>Km</b>   0631, Mouse event has occurred
               <b>mouse_info</b>      <b>minfo</b>   <b>Mi</b>   Mouse status information
               <b>req_mouse_pos</b>   <b>reqmp</b>   <b>RQ</b>   Request mouse position report

       •   The interface made assumptions (as does <u>ncurses</u>) about the escape sequences sent to and received from
           the terminal.

           For instance, the SVr4 <u>curses</u> library used the <b>get_mouse</b> (<b>getm</b>) capability to tell the terminal which
           mouse button events it should send, passing the mouse-button bit mask  to  the  terminal.   Also,  it
           could ask the terminal where the mouse was using the <b>req_mouse_pos</b> (<b>reqmp</b>) capability.

           Those  features  required  a  terminal program that had been modified to work with SVr4 <u>curses</u>.  They
           were not part of the X Consortium's <u>xterm</u>.

       When developing the <u>xterm</u> mouse support for <u>ncurses</u> in September 1995, Eric Raymond was  uninterested  in
       using  the  same  interface  due  to  its lack of documentation.  Later, in 1998, Mark Hesseling provided
       support in <u>PDCurses</u> 2.3 using the SVr4 interface.  <u>PDCurses</u>,  however,  does  not  use  video  terminals,
       making it unnecessary to be concerned about compatibility with the escape sequences.

</pre><h4><b>BUGS</b></h4><pre>
       Mouse  events  from  <u>xterm</u>  are  <u>not</u>  ignored  in  canonical mode if they have been enabled by <b>mousemask</b>.
       Instead, the <u>xterm</u> mouse report sequence appears in the string read.

       An <u>ncurses</u> window must enable <b><a href="../man3NCURSES/keypad.3NCURSES.html">keypad</a></b>(3NCURSES) to correctly receive mouse event reports from <u>xterm</u>  since
       they  are encoded like function keys.  Set the terminal's <u>terminfo</u> capability <b>key_mouse</b> (<b>kmous</b>) to “\E[M”
       (the beginning of the response from <u>xterm</u> for mouse clicks).  Other values  of  <b>key_mouse</b>  are  permitted
       under the same assumption, that is, the report begins with that sequence.

       Because  there  are  no standard response sequences that serve to identify terminals supporting the <u>xterm</u>
       mouse protocol, <u>ncurses</u> assumes that if <b>key_mouse</b> (<b>kmous</b>) is defined in the terminal description,  or  if
       the  terminal type's primary name or aliases contain the string “xterm”, then the terminal may send mouse
       events.  <u>ncurses</u> checks the <b>kmous</b> cap-code first, allowing use of newer <u>xterm</u> mouse  protocols,  such  as
       its private mode 1006.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3NCURSES/ncurses.3NCURSES.html">ncurses</a></b>(3NCURSES),       <b><a href="../man3NCURSES/inopts.3NCURSES.html">inopts</a></b>(3NCURSES),      <b><a href="../man3NCURSES/kernel.3NCURSES.html">kernel</a></b>(3NCURSES),      <b><a href="../man3NCURSES/pad.3NCURSES.html">pad</a></b>(3NCURSES),      <b><a href="../man3NCURSES/slk.3NCURSES.html">slk</a></b>(3NCURSES),
       <b><a href="../man3NCURSES/curses_variables.3NCURSES.html">curses_variables</a></b>(3NCURSES)

ncurses 6.5                                        2025-02-15                                    <u><a href="../man3NCURSES/mouse.3NCURSES.html">mouse</a></u>(3NCURSES)
</pre>
 </div>
</div></section>
</div>
</body>
</html>