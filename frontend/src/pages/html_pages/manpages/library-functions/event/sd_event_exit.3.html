<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_event_exit, sd_event_get_exit_code - Ask the event loop to exit</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_event_exit, sd_event_get_exit_code - Ask the event loop to exit

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-event.h&gt;</b>

       <b>int</b> <b>sd_event_exit(sd_event</b> <b>*</b><u>event</u><b>,</b> <b>int</b> <u>code</u><b>);</b>

       <b>int</b> <b>sd_event_get_exit_code(sd_event</b> <b>*</b><u>event</u><b>,</b> <b>int</b> <b>*</b><u>ret</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_event_exit()</b> requests the event loop specified in the <u>event</u> event loop object to exit. The <u>code</u>
       parameter may be any integer value and is returned as-is by <b><a href="../man3/sd_event_loop.3.html">sd_event_loop</a></b>(3) after the last event loop
       iteration. It may also be queried using <b>sd_event_get_exit_code()</b>, see below.

       When exiting is requested the event loop will stop listening for and dispatching regular event sources.
       Instead it will proceed with executing only event sources registered with <b><a href="../man3/sd_event_add_exit.3.html">sd_event_add_exit</a></b>(3) in the
       order defined by their priority. After all exit event sources have been dispatched the event loop is
       terminated.

       If <b>sd_event_exit()</b> is invoked a second time while the event loop is still processing exit event sources,
       the exit code stored in the event loop object is updated, but otherwise no further operation is executed.

       <b>sd_event_get_exit_code()</b> may be used to query the exit code passed to an earlier call of <b>sd_event_exit()</b>.
       The return parameter <u>ret</u> may be set to <b>NULL</b>, in order to simply check if <b>sd_event_exit()</b> has been called
       before (as <b>sd_event_get_exit_code()</b> fails with <b>-ENODATA</b> if that's not the case, see below).

       While the full positive and negative integer ranges may be used for the exit code, care should be taken
       not pick exit codes that conflict with regular exit codes returned by <b>sd_event_loop()</b>, if these exit
       codes shall be distinguishable.

       Note that for most event source types passing the callback pointer as <b>NULL</b> in the respective constructor
       call (i.e. in <b><a href="../man3/sd_event_add_time.3.html">sd_event_add_time</a></b>(3), <b><a href="../man3/sd_event_add_signal.3.html">sd_event_add_signal</a></b>(3), ...) has the effect of <b>sd_event_exit()</b> being
       invoked once the event source triggers, with the specified userdata pointer cast to an integer as the
       exit code parameter. This is useful to automatically terminate an event loop after some condition, such
       as a timeout or reception of <b>SIGTERM</b> or similar. See the documentation for the respective constructor
       call for details.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>sd_event_exit()</b> and <b>sd_event_get_exit_code()</b> return 0 or a positive integer. On failure, they
       return a negative errno-style error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-EINVAL</b>
           The event loop object or error code pointer are invalid.

       <b>-ECHILD</b>
           The event loop was created in a different process, library or module instance.

       <b>-ESTALE</b>
           The event loop has exited already and all exit handlers are already processed.

       <b>-ENODATA</b>
           Returned by <b>sd_event_get_exit_code()</b> in case the event loop has not been requested to exit yet.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_event_exit()</b> and <b>sd_event_get_exit_code()</b> were added in version 229.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-event.3.html">sd-event</a></b>(3), <b><a href="../man3/sd_event_new.3.html">sd_event_new</a></b>(3), <b><a href="../man3/sd_event_add_exit.3.html">sd_event_add_exit</a></b>(3), <b><a href="../man3/sd_event_add_time.3.html">sd_event_add_time</a></b>(3),
       <b><a href="../man3/sd_event_add_signal.3.html">sd_event_add_signal</a></b>(3), <b><a href="../man3/sd_event_add_io.3.html">sd_event_add_io</a></b>(3), <b><a href="../man3/sd_event_add_defer.3.html">sd_event_add_defer</a></b>(3), <b><a href="../man3/sd_event_add_inotify.3.html">sd_event_add_inotify</a></b>(3)

systemd 257.7                                                                                   <u><a href="../man3/SD_EVENT_EXIT.3.html">SD_EVENT_EXIT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>