<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zmonitor - Class for socket event monitor</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libczmq-dev">libczmq-dev_4.2.1-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zmonitor - Class for socket event monitor

</pre><h4><b>SYNOPSIS</b></h4><pre>
       //  Create new zmonitor actor instance to monitor a zsock_t socket:
       //
       //      zactor_t *monitor = zactor_new (zmonitor, mysocket);
       //
       //  Destroy zmonitor instance.
       //
       //      zactor_destroy (&amp;monitor);
       //
       //  Enable verbose logging of commands and activity.
       //
       //      zstr_send (monitor, "VERBOSE");
       //
       //  Listen to monitor event type (zero or types, ending in NULL):
       //      zstr_sendx (monitor, "LISTEN", type, ..., NULL);
       //
       //      Events:
       //      CONNECTED
       //      CONNECT_DELAYED
       //      CONNECT_RETRIED
       //      LISTENING
       //      BIND_FAILED
       //      ACCEPTED
       //      ACCEPT_FAILED
       //      CLOSED
       //      CLOSE_FAILED
       //      DISCONNECTED
       //      MONITOR_STOPPED
       //      ALL
       //
       //  Start monitor; after this, any further LISTEN commands are ignored.
       //
       //      zstr_send (monitor, "START");
       //      zsock_wait (monitor);
       //
       //  Receive next monitor event:
       //
       //      zmsg_t *msg = zmsg_recv (monitor);
       //
       //  This is the zmonitor constructor as a zactor_fn; the argument can be
       //  a zactor_t, zsock_t, or libzmq void * socket:
       CZMQ_EXPORT void
           zmonitor (zsock_t *pipe, void *sock);

       //  Selftest
       CZMQ_EXPORT void
           zmonitor_test (bool verbose);
       Please add '@interface' section in './../src/zmonitor.c'.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The zmonitor actor provides an API for obtaining socket events such as connected, listen, disconnected,
       etc. Socket events are only available for sockets connecting or bound to ipc:// and tcp:// endpoints.

       This class wraps the ZMQ socket monitor API, see zmq_socket_monitor for details. Works on all versions of
       libzmq from 3.2 onwards. This class replaces zproxy_v2, and is meant for applications that use the CZMQ
       v3 API (meaning, zsock).

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>From</b> <b>zmonitor_test</b> <b>method</b>.

           zsock_t *client = zsock_new (ZMQ_DEALER);
           assert (client);
           zactor_t *clientmon = zactor_new (zmonitor, client);
           assert (clientmon);
           if (verbose)
               zstr_sendx (clientmon, "VERBOSE", NULL);
           zstr_sendx (clientmon, "LISTEN", "LISTENING", "ACCEPTED", NULL);
           #if defined (ZMQ_EVENT_HANDSHAKE_SUCCEED)
           zstr_sendx (clientmon, "LISTEN", "HANDSHAKE_SUCCEED", NULL);
           #endif
           #if defined (ZMQ_EVENT_HANDSHAKE_SUCCEEDED)
           zstr_sendx (clientmon, "LISTEN", "HANDSHAKE_SUCCEEDED", NULL);
           #endif
           zstr_sendx (clientmon, "START", NULL);
           zsock_wait (clientmon);

           zsock_t *server = zsock_new (ZMQ_DEALER);
           assert (server);
           zactor_t *servermon = zactor_new (zmonitor, server);
           assert (servermon);
           if (verbose)
               zstr_sendx (servermon, "VERBOSE", NULL);
           zstr_sendx (servermon, "LISTEN", "CONNECTED", "DISCONNECTED", NULL);
           zstr_sendx (servermon, "START", NULL);
           zsock_wait (servermon);

           //  Allow a brief time for the message to get there...
           zmq_poll (NULL, 0, 200);

           //  Check client is now listening
           int port_nbr = zsock_bind (client, "tcp://127.0.0.1:*");
           assert (port_nbr != -1);
           s_assert_event (clientmon, "LISTENING");

           //  Check server connected to client
           zsock_connect (server, "tcp://127.0.0.1:%d", port_nbr);
           s_assert_event (servermon, "CONNECTED");

           //  Check client accepted connection
           s_assert_event (clientmon, "ACCEPTED");
           #if defined (ZMQ_EVENT_HANDSHAKE_SUCCEED)
           s_assert_event (clientmon, "HANDSHAKE_SUCCEED");
           #endif
           #if defined (ZMQ_EVENT_HANDSHAKE_SUCCEEDED)
           s_assert_event (clientmon, "HANDSHAKE_SUCCEEDED");
           #endif

           zactor_destroy (&amp;clientmon);
           zactor_destroy (&amp;servermon);
           zsock_destroy (&amp;client);
           zsock_destroy (&amp;server);

           #if defined (__WINDOWS__)
           zsys_shutdown();
           #endif

</pre><h4><b>AUTHORS</b></h4><pre>
       The czmq manual was written by the authors in the AUTHORS file.

</pre><h4><b>RESOURCES</b></h4><pre>
       Main web site:

       Report bugs to the email &lt;<b><a href="mailto:zeromq-dev@lists.zeromq.org">zeromq-dev@lists.zeromq.org</a></b>[1]&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) the Contributors as noted in the AUTHORS file. This file is part of CZMQ, the high-level C
       binding for 0MQ: <a href="http://czmq.zeromq.org">http://czmq.zeromq.org</a>. This Source Code Form is subject to the terms of the Mozilla
       Public License, v. 2.0. If a copy of the MPL was not distributed with this file, You can obtain one at
       <a href="http://mozilla.org/MPL/2.0/">http://mozilla.org/MPL/2.0/</a>. LICENSE included with the czmq distribution.

</pre><h4><b>NOTES</b></h4><pre>
        1. <a href="mailto:zeromq-dev@lists.zeromq.org">zeromq-dev@lists.zeromq.org</a>
           <a href="mailto:zeromq-dev@lists.zeromq.org">mailto:zeromq-dev@lists.zeromq.org</a>

CZMQ 4.2.1                                         05/24/2024                                        <u><a href="../man3/ZMONITOR.3.html">ZMONITOR</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>