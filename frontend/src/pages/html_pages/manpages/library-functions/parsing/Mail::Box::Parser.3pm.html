<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Box::Parser - reading and writing messages</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-message-perl">libmail-message-perl_3.017-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Box::Parser - reading and writing messages

</pre><h4><b>INHERITANCE</b></h4><pre>
        Mail::Box::Parser
          is a Mail::Reporter

        Mail::Box::Parser is extended by
          Mail::Box::Parser::C
          Mail::Box::Parser::Perl

</pre><h4><b>SYNOPSIS</b></h4><pre>
        # Not instatiatiated itself

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The "Mail::Box::Parser" manages the parsing of folders.  Usually, you won't need to know anything about
       this module, except the options which are involved with this code.

       There are two implementations of this module planned:

       •   Mail::Box::Parser::Perl

           A  slower parser which only uses plain Perl.  This module is a bit slower, and does less checking and
           less recovery.

       •   Mail::Box::Parser::C

           A fast parser written in "C".  This package is released as  separate  module  on  CPAN,  because  the
           module  distribution  via CPAN can not handle XS files which are not located in the root directory of
           the module tree.  If a C compiler is available on your system, it will be used automatically.

       Extends "DESCRIPTION" in Mail::Reporter.

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Mail::Reporter.

   <b>Constructors</b>
       Extends "Constructors" in Mail::Reporter.

       Mail::Box::Parser-&gt;<b>new</b>(%options)
           Create a parser object which can handle one file.  For mbox-like mailboxes, this object can  be  used
           to read a whole folder.  In case of MH-like mailboxes, each message is contained in a single file, so
           each message has its own parser object.

            -Option  --Defined in     --Default
             file                       undef
             filename                   &lt;required&gt;
             log       Mail::Reporter   'WARNINGS'
             mode                       'r'
             trace     Mail::Reporter   'WARNINGS'

           file =&gt; FILE-HANDLE
             Any  "IO::File"  or  "GLOB"  which  can  be  used  to  read  the data from.  In case this option is
             specified, the "filename" is informational only.

           filename =&gt; FILENAME
             The name of the file to be read.

           log =&gt; LEVEL
           mode =&gt; OPENMODE
             File-open mode, which defaults to 'r', which means `read-only'.  See "perldoc -f open" for possible
             modes.  Only applicable when no "file" is specified.

           trace =&gt; LEVEL

   <b>The</b> <b>parser</b>
       $obj-&gt;<b>fileChanged</b>()
           Returns whether the file which is parsed has changed after the last time <b>takeFileInfo()</b> was called.

       $obj-&gt;<b>filename</b>()
           Returns the name of the file this parser is working on.

       $obj-&gt;<b>restart</b>()
           Restart the parser on a certain file, usually because the content has changed.

       $obj-&gt;<b>start</b>(%options)
           Start the parser by opening a file.

            -Option--Default
             file    undef

           file =&gt; FILEHANDLE|undef
             The file is already open, for instance because the data must be read from STDIN.

       $obj-&gt;<b>stop</b>()
           Stop the parser, which will include a close of the file.  The lock on the folder will not be  removed
           (is not the responsibility of the parser).

   <b>Parsing</b>
       $obj-&gt;<b>bodyAsFile</b>( $fh [$chars, [$lines]] )
           Try  to  read  one message-body from the file, and immediately write it to the specified file-handle.
           Optionally, the predicted number of CHARacterS and/or $lines to  be  read  can  be  supplied.   These
           values may be "undef" and may be wrong.

           The  return  is  a  list of three scalars: the location of the body (begin and end) and the number of
           lines in the body.

       $obj-&gt;<b>bodyAsList</b>( [$chars, [$lines]] )
           Try to read one message-body from the file.  Optionally, the predicted number  of  CHARacterS  and/or
           $lines to be read can be supplied.  These values may be "undef" and may be wrong.

           The  return  is  a list of scalars, each containing one line (including line terminator), preceded by
           two integers representing the location in the file where this body started and ended.

       $obj-&gt;<b>bodyAsString</b>( [$chars, [$lines]] )
           Try to read one message-body from the file.  Optionally, the predicted number  of  CHARacterS  and/or
           $lines to be read can be supplied.  These values may be "undef" and may be wrong.

           The return is a list of three scalars, the location in the file where the body starts, where the body
           ends, and the string containing the whole body.

       $obj-&gt;<b>bodyDelayed</b>( [$chars, [$lines]] )
           Try  to  read  one  message-body  from  the file, but the data is skipped.  Optionally, the predicted
           number of CHARacterS and/or $lines to be skipped can be supplied.  These values may  be  "undef"  and
           may be wrong.

           The return is a list of four scalars: the location of the body (begin and end), the size of the body,
           and the number of lines in the body.  The number of lines may be "undef".

       $obj-&gt;<b>filePosition</b>( [$position] )
           Returns  the  location  of the next byte to be used in the file which is parsed.  When a $position is
           specified, the location in the file is moved to the indicated spot first.

       $obj-&gt;<b>lineSeparator</b>()
           Returns the character or characters which are used to separate lines in the  folder  file.   This  is
           based on the first line of the file.  UNIX systems use a single LF to separate lines.  Windows uses a
           CR and a LF.  Mac uses CR.

       $obj-&gt;<b>popSeparator</b>()
           Remove  the  last-pushed separator from the list which is maintained by the parser.  This will return
           "undef" when there is none left.

       $obj-&gt;<b>pushSeparator</b>(STRING|Regexp)
           Add a boundary line.  Separators tell the parser where to stop reading.  A famous  separator  is  the
           "From"-line,  which  is used in Mbox-like folders to separate messages.  But also parts (<u>attachments</u>)
           is a message are divided by separators.

           The specified STRING describes the start of the  separator-line.   The  Regexp  can  specify  a  more
           complicated format.

       $obj-&gt;<b>readHeader</b>()
           Read the whole message-header and return it as list of field-value pairs.  Mind that some fields will
           appear more than once.

           The  first  element will represent the position in the file where the header starts.  The follows the
           list of header field names and bodies.

           example:

            my ($where, @header) = $parser-&gt;readHeader;

       $obj-&gt;<b>readSeparator</b>(%options)
           Read the currently active separator (the last one which  was  pushed).   The  line  (or  "undef")  is
           returned.  Blank-lines before the separator lines are ignored.

           The  return are two scalars, where the first gives the location of the separator in the file, and the
           second the line which is found as separator.  A new separator is activated using <b>pushSeparator()</b>.

   <b>Internals</b>
       $obj-&gt;<b>closeFile</b>()
           Close the file which was being parsed.

       $obj-&gt;<b>defaultParserType</b>( [$class] )
       Mail::Box::Parser-&gt;<b>defaultParserType</b>( [$class] )
           Returns the parser to be used to parse all subsequent messages, possibly  first  setting  the  parser
           using  the optional argument.  Usually, the parser is autodetected; the "C"-based parser will be used
           when it can be, and the Perl-based parser will be used otherwise.

           The $class argument allows you to specify a package name to force a  particular  parser  to  be  used
           (such  as your own custom parser). You have to "use" or "require" the package yourself before calling
           this method with an argument. The parser must be a sub-class of "Mail::Box::Parser".

       $obj-&gt;<b>openFile</b>($args)
           Open the file to be parsed.  $args is a ref-hash of options.

            -Option  --Default
             filename  &lt;required&gt;
             mode      &lt;required&gt;

           filename =&gt; FILENAME
           mode =&gt; STRING
       $obj-&gt;<b>takeFileInfo</b>()
           Capture some data about the file being parsed, to be compared later.

   <b>Error</b> <b>handling</b>
       Extends "Error handling" in Mail::Reporter.

       $obj-&gt;<b>AUTOLOAD</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>addReport</b>($object)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
       Mail::Box::Parser-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>errors</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>log</b>( [$level, [$strings]] )
       Mail::Box::Parser-&gt;<b>log</b>( [$level, [$strings]] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logPriority</b>($level)
       Mail::Box::Parser-&gt;<b>logPriority</b>($level)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logSettings</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>notImplemented</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>report</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>reportAll</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>trace</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>warnings</b>()
           Inherited, see "Error handling" in Mail::Reporter

   <b>Cleanup</b>
       Extends "Cleanup" in Mail::Reporter.

       $obj-&gt;<b>DESTROY</b>()
           Inherited, see "Cleanup" in Mail::Reporter

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Warning: File $filename changed during access.
           When a message parser starts working, it takes size and modification time of the file  at  hand.   If
           the folder is written, it checks whether there were changes in the file made by external programs.

           Calling <b>Mail::Box::update()</b> on a folder before it being closed will read these new messages.  But the
           real  source of this problem is locking: some external program (for instance the mail transfer agent,
           like sendmail) uses a different locking mechanism as you do and therefore violates your rights.

       Error: Filename or handle required to create a parser.
           A message parser needs to know the source of the  message  at  creation.   These  sources  can  be  a
           filename (string), file handle object or GLOB.  See new(filename) and new(file).

       Error: Package $package does not implement $method.
           Fatal  error:  the specific package (or one of its superclasses) does not implement this method where
           it should. This message means that some other related classes do implement this  method  however  the
           class  at  hand does not.  Probably you should investigate this and probably inform the author of the
           package.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module is part of Mail-Message distribution  version  3.017,  built  on  April  18,  2025.  Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]. For other contributors see ChangeLog.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-25                             <u>Mail::Box::<a href="../man3pm/Parser.3pm.html">Parser</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>