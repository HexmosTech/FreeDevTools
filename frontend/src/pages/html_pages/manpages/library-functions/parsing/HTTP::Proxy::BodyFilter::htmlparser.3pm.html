<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP::Proxy::BodyFilter::htmlparser - Filter using HTML::Parser</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libhttp-proxy-perl">libhttp-proxy-perl_0.304-5build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       HTTP::Proxy::BodyFilter::htmlparser - Filter using HTML::Parser

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use HTTP::Proxy::BodyFilter::htmlparser;

           # $parser is a HTML::Parser object
           $proxy-&gt;push_filter(
               mime     =&gt; 'text/html',
               response =&gt; HTTP::Proxy::BodyFilter::htmlparser-&gt;new( $parser );
           );

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The HTTP::Proxy::BodyFilter::htmlparser lets you create a filter based on the HTML::Parser object of your
       choice.

       This filter takes a HTML::Parser object as an argument to its constructor.  The filter is either read-
       only or read-write. A read-only filter will not allow you to change the data on the fly. If you request a
       read-write filter, you'll have to rewrite the response-body completely.

       With a read-write filter, you <b>must</b> recreate the whole body data. This is mainly due to the fact that the
       HTML::Parser has its own buffering system, and that there is no easy way to correlate the data that
       triggered the HTML::Parser event and its original position in the chunk sent by the origin server. See
       below for details.

       Note that a simple filter that modify the HTML text (not the tags) can be created more easily with
       HTTP::Proxy::BodyFilter::htmltext.

   <b>Creating</b> <b>a</b> <b>HTML::Parser</b> <b>that</b> <b>rewrites</b> <b>pages</b>
       A read-write filter is declared by passing "rw =&gt; 1" to the constructor:

            HTTP::Proxy::BodyFilter::htmlparser-&gt;new( $parser, rw =&gt; 1 );

       To be able to modify the body of a message, a filter created with HTTP::Proxy::BodyFilter::htmlparser
       must rewrite it completely. The HTML::Parser object can update a special attribute named "output".  To do
       so, the HTML::Parser handler will have to request the "self" attribute (that is to say, require access to
       the parser itself) and update its "output" key.

       The following attributes are added to the HTML::Parser object by this filter:

       output
           A string that will hold the data sent back by the proxy.

           This string will be used as a replacement for the body data only if the filter is read-write, that is
           to say, if it was initialised with "rw =&gt; 1".

           Data should always be <b>appended</b> to "$parser-&gt;{output}".

       message
           A reference to the HTTP::Message that triggered the filter.

       protocol
           A reference to the HTTP::Protocol object.

</pre><h4><b>METHODS</b></h4><pre>
       This filter defines three methods, called automatically:

       <b>filter()</b>
           The filter() method handles all the interactions with the HTML::Parser object.

       <b>init()</b>
           Initialise the filter with the HTML::Parser object passed to the constructor.

       <b>will_modify()</b>
           This  method  returns a boolean value that indicates to the system if it will modify the data passing
           through. The value is actually the value of the "rw" parameter passed to the constructor.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       HTTP::Proxy, HTTP::Proxy::Bodyfilter, HTTP::Proxy::BodyFilter::htmltext.

</pre><h4><b>AUTHOR</b></h4><pre>
       Philippe "BooK" Bruhat, &lt;<a href="mailto:book@cpan.org">book@cpan.org</a>&gt;.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2003-2015, Philippe Bruhat.

</pre><h4><b>LICENSE</b></h4><pre>
       This module is free software; you can redistribute it or modify it under the same terms as Perl itself.

perl v5.40.1                                       2025-02-18              <u>HTTP::Proxy::B...ter::<a href="../man3pm/htmlparser.3pm.html">htmlparser</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>