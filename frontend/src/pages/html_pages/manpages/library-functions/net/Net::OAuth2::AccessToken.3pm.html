<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net::OAuth2::AccessToken - OAuth2 bearer token</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnet-oauth2-perl">libnet-oauth2-perl_0.67-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
         Net::OAuth2::AccessToken - OAuth2 bearer token

</pre><h4><b>SYNOPSIS</b></h4><pre>
         my $auth    = Net::OAuth2::Profile::WebServer-&gt;new(...);

         my $session = $auth-&gt;get_access_token($code, ...);
         # $session is a Net::OAuth2::AccessToken object
         if($session-&gt;error)
         {   print $session-&gt;error_description;
         }

         my $response = $session-&gt;get($request);
         my $response = $session-&gt;get($header, $content);
         print $session-&gt;to_string;  # JSON

         # probably better to set new(auto_refresh), but you may do:
         $session-&gt;refresh if $session-&gt;expired;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This object represents a received (bearer) token, and offers ways to use it and maintain it.  A better
       name for this module would include <b>client</b> <b>or</b> <b>session</b>.

       A "bearer token" is an abstract proof of your existence: different services or potentially different
       physical servers are able to exchange information about your session based on this, for instance whether
       someone logged-in while showing the token.

</pre><h4><b>METHODS</b></h4><pre>
   <b>Constructors</b>
       Net::OAuth2::AccessToken-&gt;<b>new</b>(%options)
            -Option           --Default
             access_token       undef
             auto_refresh       &lt;false&gt;
             changed            &lt;false&gt;
             error              undef
             error_description  &lt;value of error&gt;
             error_uri          undef
             expires_at         undef
             expires_in         undef
             profile            &lt;required&gt;
             refresh_always     BOOLEAN
             refresh_token      false
             scope              undef
             token_type         undef

           access_token =&gt; STRING
           auto_refresh =&gt; BOOLEAN
             Refresh the token when expired.

           changed =&gt; BOOLEAN
             [0.52] The token (session) needs to be saved.

           error =&gt; STRING
             Set when an error has occurred, the token is not valid.  This is not numerical.

           error_description =&gt; STRING
             A  humanly  readible  explanation  on  the error.  This defaults to the string set with the "error"
             option, which is not nice to read.

           error_uri =&gt; URI
             Where to find more details about the error.

           expires_at =&gt; TIMESTAMP
             Expire this token after TIMESTAMP (as produced by the <b>time()</b> function)

           expires_in =&gt; SECONDS
             Expire the token SECONDS after the initiation of this object.

           profile =&gt; Net::OAuth2::Profile object
           refresh_always =&gt; BOOLEAN
             [0.53] Auto-refresh the token at each use.

           refresh_token =&gt; STRING
             [0.53] Token which can be used to refresh the token, after it has expired or earlier.

           scope =&gt; URL
           token_type =&gt; TYPE
       Net::OAuth2::AccessToken-&gt;<b>session_thaw</b>($session, %options)
           Pass in the output of a <b>session_freeze()</b> call in the past (maybe even for an older  version  of  this
           module) and get the token object revived. This $session is a HASH.

           You may pass any of the parameters for <b>new()</b> as %options, to overrule the values inside the $session.

            -Option --Default
             profile  &lt;required&gt;

           profile =&gt; Net::OAuth2::Profile object

           example:

             my $auth    = Net::OAuth2::Profile::WebServer-&gt;new(...);
             my $token   = $auth-&gt;get_access_token(...);
             my $session = $token-&gt;session_freeze;
             # now save $session in database or file
             ...
             # restore session
             my $auth    = Net::OAuth2::Profile::WebServer-&gt;new(...);
             my $token   = Net::OAuth2::AccessToken-&gt;session_thaw($session
               , profile =&gt; $auth);

   <b>Accessors</b>
       $obj-&gt;<b>access_token</b>()
           Returns  the  (base64  encoded version of the) access token.  The token will get updated first, if it
           has expired and refresh_token is enabled, or when new(auto_refresh) is set.

           It does not matter that the token is base64 encoded or not: it will always need to be base64  encoded
           during transport.

       $obj-&gt;<b>attribute</b>(NAME)
           [0.58]  Sometimes,  the  token gets attributes which are not standard; they have no official accessor
           (yet?).  You can get them with this generic accessor.

       $obj-&gt;<b>changed</b>( [BOOLEAN] )
           [0.52] The session (token) needs to be saved,  because  any  of  the  crucial  parameters  have  been
           modified and "auto_save" is not defined by the profile.

       $obj-&gt;<b>hd</b>()
       $obj-&gt;<b>profile</b>()
       $obj-&gt;<b>scope</b>()
       $obj-&gt;<b>state</b>()
       $obj-&gt;<b>token_type</b>()

       <u>errors</u>

       When  the  token is received (hence this object created) it be the result of an error.  It is the way the
       original code was designed...

       $obj-&gt;<b>error</b>()
       $obj-&gt;<b>error_description</b>()
       $obj-&gt;<b>error_uri</b>()

       <u>Expiration</u>

       $obj-&gt;<b>auto_refresh</b>()
       $obj-&gt;<b>expired</b>( [$after] )
           Returns true when the token has an expiration set and that time has passed.  We use this token $after
           this check: to avoid the token to timeout inbetween, we take (by default 15 seconds) margin.

       $obj-&gt;<b>expires_at</b>( [$timestamp] )
           Returns the expiration timestamp of this token (true) or "undef" (false) when it is not set.

       $obj-&gt;<b>expires_in</b>()
           Returns the number of seconds left, before the token is expired.  That may be negative.

       $obj-&gt;<b>refresh_always</b>()
       $obj-&gt;<b>refresh_token</b>()
       $obj-&gt;<b>update_token</b>( $token, $tokentype, $expires_at, [$refresh_token] )
           Change the token.

   <b>Actions</b>
       $obj-&gt;<b>refresh</b>()
           Refresh the token, even if it has not expired yet.  Returned is the new access_token value, which may
           be undef on failure.

       $obj-&gt;<b>session_freeze</b>(%options)
           This returns a SESSION (a flat HASH) containing all token parameters which needs to be  saved  to  be
           able to restore this token later.  This SESSION can be passed to <b>session_thaw()</b> to get revived.

           The "changed" flag will be cleared by this method.

           Be  sure  that  your  storage  is  character-set  aware.   For  instance,  you  probably  want to set
           'mysql_enable_utf8' when you store this in a MySQL database.  Perl's JSON module will output utf8  by
           default.

       $obj-&gt;<b>to_json</b>()
           Freeze  this  object  into  JSON.   The JSON syntax is also used by the OAuth2 protocol, so a logical
           choice to provide.  However, generically, the <b>session_freeze()</b> method provided.

       <u>HTTP</u>

       The token can be encoded in transport protocol in different ways. Using these method will add  the  token
       to the HTTP messages sent.

       $obj-&gt;<b>delete</b>( $uri, [$header, [$content]] )
       $obj-&gt;<b>get</b>( $uri, [$header, [$content]] )
       $obj-&gt;<b>post</b>( $uri, [$header, [$content]] )
       $obj-&gt;<b>put</b>( $uri, [$header, [$content]] )
       $obj-&gt;<b>request</b>($request)

</pre><h4><b>COPYRIGHTS</b></h4><pre>
       Copyrights 2013-2019 on the perl code and the related documentation
        by  [Mark  Overmeer  &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]  for  SURFnet  bv,  The Netherlands.  For other contributors see
       "Changes".

       Copyrights 2011-2012 by Keith Grennan.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.32.1                                       2021-10-15                      <u>Net::OAuth2::<a href="../man3pm/AccessToken.3pm.html">AccessToken</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>