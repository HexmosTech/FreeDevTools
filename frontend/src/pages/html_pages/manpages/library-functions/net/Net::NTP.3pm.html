<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net::NTP - Perl extension for decoding NTP server responses</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnet-ntp-perl">libnet-ntp-perl_1.5-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Net::NTP - Perl extension for decoding NTP server responses

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Net::NTP qw(get_ntp_response);
         use Time::HiRes qw(time);
         my %response = get_ntp_response();

         my $xmttime = time();
         my $spkt = Net::NTP::Packet-&gt;new_client_packet($xmttime);
         $socket-&gt;send($pkt-&gt;encode());
         $socket-&gt;recv(my $data, 1024);
         my $rectime = time();
         my $cpkt = Net::NTP::Packet-&gt;decode($data, $xmttime, $rectime);
         print "Stratum: ", $cpkt-&gt;{stratum}, "\n";
         print "Offset: ", Net::NTP-&gt;offset($pkt, $xmttime, $rectime), "\n"

</pre><h4><b>ABSTRACT</b></h4><pre>
       All this module does is send a packet to an NTP server and then decode the packet received into it's
       respective parts - as outlined in RFC5905 (superseding RFC1305 and RFC2030).

</pre><h4><b>LIMITATIONS</b></h4><pre>
       This only supports Association Mode 3 (Client).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module exports a single method (get_ntp_response) and returns an associative array based upon
       RFC1305 and RFC2030.  The response from the server is "humanized" to a point that further processing of
       the information received from the server can be manipulated.  For example: timestamps are in epoch, so
       one could use the localtime function to produce an even more "human" representation of the timestamp.

   <b>EXPORT</b>
       get_ntp_response(&lt;server&gt;, &lt;port&gt;);

       This module exports a single method - get_ntp_response.  It takes the server as the first argument
       (localhost is the default) and port to send/recieve the packets (ntp or 123 by default).  It returns an
       associative array of the various parts of the packet as outlined in RFC1305.  It "normalizes" or
       "humanizes" various parts of the packet.  For example: all the timestamps are in epoch, NOT hexidecimal.

       Two special fields ("Delay" and "Offset") are calculated and added to the response.

       If there's a timeout or other communications error get_ntp_response will die (so call get_ntp_response in
       an eval block).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       perl, IO::Socket, RFC5905, RFC1305, RFC2030

</pre><h4><b>AUTHOR</b></h4><pre>
       Now maintained by Ask Bjørn Hansen, &lt;<a href="mailto:ask@develooper.com">ask@develooper.com</a>&lt;gt&gt;

       Originally by James G. Willmore, &lt;jwillmore (at) adelphia.net&lt;gt&gt; or &lt;owner (at) ljcomputing.net&lt;gt&gt;

       Special thanks to Ralf D. Kloth &lt;ralf (at) qrq.de&lt;gt&gt; for the code to decode NTP packets.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2009 by Ask Bjørn Hansen; 2004 by James G. Willmore

       This library is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>NAME</b></h4><pre>
       Net::NTP::Packet

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Representation of a NTP Packet with serialization primitives.

   <b>PROTOCOL</b> <b>-</b> <b>RFC</b> <b>5905</b> <b>-</b> <b>Section</b> <b>7.</b>
              0                   1                   2                   3
              0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |LI | VN  |Mode |    Stratum     |     Poll      |  Precision   |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                         Root Delay                            |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                         Root Dispersion                       |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                          Reference ID                         |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                                                               |
             +                     Reference Timestamp (64)                  +
             |                                                               |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                                                               |
             +                      Origin Timestamp (64)                    +
             |                                                               |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                                                               |
             +                      Receive Timestamp (64)                   +
             |                                                               |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                                                               |
             +                      Transmit Timestamp (64)                  +
             |                                                               |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                                                               |
             .                                                               .
             .                    Extension Field 1 (variable)               .
             .                                                               .
             |                                                               |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                                                               |
             .                                                               .
             .                    Extension Field 2 (variable)               .
             .                                                               .
             |                                                               |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                          Key Identifier                       |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             |                                                               |
             |                            dgst (128)                         |
             |                                                               |
             +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   <b>new</b>
       create a new Net::NTP::Packet instance.

       Parameters are the field names, gotten from "7.3.  Packet Header Variables"

   <b>new_client_packet($xmttime)</b>
       Make a packet in association mode 'Client' to be sent to a server.

   <b>encode()</b>
       Encode a packet to its wire format.  NOTE: It only encodes server packets at the moment.

   <b>$packet</b> <b>=</b> <b>Net::NTP::Packet-&gt;decode($data,</b> <b>$xmttime,</b> <b>$rectime)</b>
       decode the NTP packet from its wire format.

perl v5.36.0                                       2022-10-13                                      <u>Net::<a href="../man3pm/NTP.3pm.html">NTP</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>