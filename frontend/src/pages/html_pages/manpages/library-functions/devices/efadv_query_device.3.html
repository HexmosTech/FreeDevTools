<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>efadv_query_device - Query device capabilities</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libibverbs-dev">libibverbs-dev_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       efadv_query_device - Query device capabilities

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;infiniband/efadv.h&gt;

              int efadv_query_device(struct ibv_context *ibvctx,
                             struct efadv_device_attr *attr,
                             uint32_t inlen);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>efadv_query_device()</b> Queries EFA device specific attributes.

       Compatibility is handled using the comp_mask and inlen fields.

              struct efadv_device_attr {
                  uint64_t comp_mask;
                  uint32_t max_sq_wr;
                  uint32_t max_rq_wr;
                  uint16_t max_sq_sge;
                  uint16_t max_rq_sge;
                  uint16_t inline_buf_size;
                  uint8_t reserved[2];
                  uint32_t device_caps;
                  uint32_t max_rdma_size;
              };

       <u>inlen</u>  In: Size of struct efadv_device_attr.

       <u>comp_mask</u>
              Compatibility mask.

       <u>max_sq_wr</u>
              Maximum Send Queue (SQ) Work Requests (WRs).

       <u>max_rq_wr</u>
              Maximum Receive Queue (RQ) Work Requests (WRs).

       <u>max_sq_sge</u>
              Maximum Send Queue (SQ) Scatter Gather Elements (SGEs).

       <u>max_rq_sge</u>
              Maximum Receive Queue (RQ) Scatter Gather Elements (SGEs).

       <u>inline_buf_size</u>
              Maximum inline buffer size.

       <u>device_caps</u>
              Bitmask of device capabilities:

              EFADV_DEVICE_ATTR_CAPS_RDMA_READ: RDMA read is supported.

              EFADV_DEVICE_ATTR_CAPS_RNR_RETRY: RNR retry is supported for SRD QPs.

              EFADV_DEVICE_ATTR_CAPS_CQ_WITH_SGID:   Reading  source  address  (SGID)  from  receive  completion
              descriptors is supported.  Valid only for unknown AH.

              EFADV_DEVICE_ATTR_CAPS_RDMA_WRITE: RDMA write is supported

              EFADV_DEVICE_ATTR_CAPS_UNSOLICITED_WRITE_RECV: Indicates the device has support for  creating  QPs
              that  can  receive  unsolicited  RDMA write with immediate.  RQ with this feature enabled will not
              consume any work requests in order to receive RDMA write with immediate and  a  WC  generated  for
              such receive will be marked as unsolicited.

       <u>max_rdma_size</u>
              Maximum RDMA transfer size in bytes.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>efadv_query_device()</b>  returns 0 on success, or the value of errno on failure (which indicates the failure
       reason).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/efadv.7.html">efadv</a></b>(7)

</pre><h4><b>NOTES</b></h4><pre>
       â€¢ Compatibility mask (comp_mask) is an out field and currently has no values.

</pre><h4><b>AUTHORS</b></h4><pre>
       Gal Pressman <a href="mailto:galpress@amazon.com">galpress@amazon.com</a>

efa                                                2019-04-22                              <u><a href="../man3/EFADV_QUERY_DEVICE.3.html">EFADV_QUERY_DEVICE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>