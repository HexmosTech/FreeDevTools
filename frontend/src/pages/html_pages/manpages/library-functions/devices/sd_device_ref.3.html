<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_device_ref, sd_device_unref, sd_device_unrefp - Create or destroy references to a device object</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_device_ref, sd_device_unref, sd_device_unrefp - Create or destroy references to a device object

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-device.h&gt;</b>

       <b>sd_device*</b> <b>sd_device_ref(sd_device</b> <b>*</b><u>device</u><b>);</b>

       <b>sd_device*</b> <b>sd_device_unref(sd_device</b> <b>*</b><u>device</u><b>);</b>

       <b>void</b> <b>sd_device_unrefp(sd_device</b> <b>**</b><u>device</u><b>);</b>

       <b>sd_device_ref()</b> increases the internal reference counter of <u>device</u> by one.

       <b>sd_device_unref()</b> decreases the internal reference counter of <u>device</u> by one. Once the reference count has
       dropped to zero, <u>device</u> is destroyed and cannot be used anymore, so further calls to <b>sd_device_ref()</b> or
       <b>sd_device_unref()</b> are illegal.

       <b>sd_device_unrefp()</b> is similar to <b>sd_device_unref()</b> but takes a pointer to a pointer to an <b>sd_device</b>
       object. This call is useful in conjunction with GCC's and LLVM's <b>Clean-up</b> <b>Variable</b> <b>Attribute</b>[1]. Note
       that this function is defined as an inline function. Use a declaration like the following, in order to
       allocate a device object that is freed automatically as the code block is left:

       {
         __attribute__((cleanup(sd_device_unrefp))) sd_device *device = NULL;
         int r;
         ...
         r = sd_device_new_from_syspath(&amp;device, "...");
         if (r &lt; 0) {
           errno = -r;
           fprintf(stderr, "Failed to allocate device: %m\n");
         }
         ...
       }

       <b>sd_device_ref()</b> and <b>sd_device_unref()</b> execute no operation if the argument is <b>NULL</b>.  <b>sd_device_unrefp()</b>
       will first dereference its argument, which must not be <b>NULL</b>, and will execute no operation if <u>that</u> is
       <b>NULL</b>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>sd_device_ref()</b> always returns the argument, and <b>sd_device_unref()</b> always returns <b>NULL</b>.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_device_ref()</b>, <b>sd_device_unref()</b>, and <b>sd_device_unrefp()</b> were added in version 251.

</pre><h4><b>NOTES</b></h4><pre>
        1. Clean-up Variable Attribute
           https://gcc.gnu.org/onlinedocs/gcc/Common-Variable-Attributes.html

systemd 257.7                                                                                   <u><a href="../man3/SD_DEVICE_REF.3.html">SD_DEVICE_REF</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>