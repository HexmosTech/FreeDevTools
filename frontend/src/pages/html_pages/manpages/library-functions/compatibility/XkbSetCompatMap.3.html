<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XkbSetCompatMap - Modify the server's compatibility map</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libx11-doc">libx11-doc_1.8.12-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       XkbSetCompatMap - Modify the server's compatibility map

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>Bool</b> <b>XkbSetCompatMap</b> <b>(Display</b> <b>*</b><u>display</u><b>,</b> <b>unsigned</b> <b>int</b> <u>which</u><b>,</b> <b>XkbDescPtr</b> <u>xkb</u><b>,</b> <b>Bool</b> <u>update_actions</u><b>);</b>

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>display</u>
              connection to server

       <u>which</u>  mask of compat map components to set

       <u>xkb</u>    source for compat map components

       <u>update_actions</u>
              True =&gt; apply to server's keyboard map

</pre><h4><b>DESCRIPTION</b></h4><pre>
       To  modify  the  server's compatibility map, first modify a local copy of the Xkb compatibility map, then
       call <u>XkbSetCompatMap.</u>  You may allocate a new compatibility map for this purpose using <u>XkbAllocCompatMap.</u>
       You may also use a compatibility map from another server, although you need  to  adjust  the  <u>device_spec</u>
       field  in  the  XkbDescRec  accordingly.  Note  that  symbol  interpretations  in  a  compatibility map (
       <u>sym_interpret</u>, the vector of XkbSymInterpretRec structures) are also allocated using this same  function.
       <u>XkbSetCompatMap</u>  copies  compatibility map information from the keyboard description in <u>xkb</u> to the server
       specified in <u>display's</u> compatibility map for the device  specified  by  the  <u>device_spec</u>  field  of  <u>xkb</u>.
       Unless you have specifically modified this field, it is the default keyboard device.  <u>which</u> specifies the
       compatibility map components to be set, and is an inclusive OR of the bits shown in Table 1.

                 Table 1 Compatibility Map Component Masks
       ───────────────────────────────────────────────────────────────
       Mask                 Value    Affecting
       ───────────────────────────────────────────────────────────────
       XkbSymInterpMask     (1&lt;&lt;0)   Symbol interpretations
       XkbGroupCompatMask   (1&lt;&lt;1)   Group maps
       XkbAllCompatMask     (0x3)    All compatibility map components

       After  updating  its  compatibility  map  for the specified device, if <u>update_actions</u> is True, the server
       applies the new compatibility map to its entire keyboard for the device to generate  a  new  set  of  key
       semantics,  compatibility  state,  and  a  new  core  keyboard  map.  If <u>update_actions</u> is False, the new
       compatibility map is not used to generate any modifications to the current device  semantics,  state,  or
       core  keyboard  map. One reason for not applying the compatibility map immediately would be if one server
       was being configured to match another on  a  piecemeal  basis;  the  map  should  not  be  applied  until
       everything  is  updated. To force an update at a later time, use <u>XkbSetCompatMap</u> specifying <u>which</u> as zero
       and <u>update_actions</u> as True.  <u>XkbSetCompatMap</u> returns True if successful and False  if  unsuccessful.  The
       server may report problems it encounters when processing the request subsequently via protocol errors.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       True           The <u>XkbSetCompatMap</u> function returns True if successful.

       False          The <u>XkbSetCompatMap</u> function returns False if unsuccessful.

</pre><h4><b>STRUCTURES</b></h4><pre>
       The  complete  description  of an Xkb keyboard is given by an XkbDescRec. The component structures in the
       XkbDescRec represent the major Xkb components.

       typedef struct {
          struct _XDisplay  *display;      /* connection to X server */
          unsigned short     flags;        /* private to Xkb, do not modify */
          unsigned short     device_spec;  /* device of interest */
          KeyCode            min_key_code; /* minimum keycode for device */
          KeyCode            max_key_code; /* maximum keycode for device */
          XkbControlsPtr     ctrls;        /* controls */
          XkbServerMapPtr    server;       /* server keymap */
          XkbClientMapPtr    map;          /* client keymap */
          XkbIndicatorPtr    indicators;   /* indicator map */
          XkbNamesPtr        names;        /* names for all components */
          XkbCompatMapPtr    compat;       /* compatibility map */
          XkbGeometryPtr     geom;         /* physical geometry of keyboard */
       } XkbDescRec, *XkbDescPtr;

       The <u>display</u> field points to an X display structure. The <u>flags</u> field is private to the library:  modifying
       <u>flags</u>  may  yield  unpredictable  results.  The  <u>device_spec</u> field specifies the device identifier of the
       keyboard input device, or XkbUseCoreKeyboard, which specifies the core keyboard device. The  <u>min_key_code</u>
       and <u>max_key_code</u> fields specify the least and greatest keycode that can be returned by the keyboard.

       Each structure component has a corresponding mask bit that is used in function calls to indicate that the
       structure  should  be  manipulated  in  some manner, such as allocating it or freeing it. These masks and
       their relationships to the fields in the XkbDescRec are shown in Table 2.

               Table 2 Mask Bits for XkbDescRec
       ──────────────────────────────────────────────────
       Mask Bit               XkbDescRec Field   Value
       ──────────────────────────────────────────────────
       XkbControlsMask        ctrls              (1L&lt;&lt;0)
       XkbServerMapMask       server             (1L&lt;&lt;1)
       XkbIClientMapMask      map                (1L&lt;&lt;2)
       XkbIndicatorMapMask    indicators         (1L&lt;&lt;3)
       XkbNamesMask           names              (1L&lt;&lt;4)
       XkbCompatMapMask       compat             (1L&lt;&lt;5)
       XkbGeometryMask        geom               (1L&lt;&lt;6)
       XkbAllComponentsMask   All Fields         (0x7f)

       The XkbSymInterpretRec structure specifies a symbol interpretation:

           typedef struct {
               KeySym        sym;         /* keysym of interest or NULL */
               unsigned char flags;       /* XkbSI_AutoRepeat, XkbSI_LockingKey */
               unsigned char match;       /* specifies how mods is interpreted */
               unsigned char mods;        /* modifier bits, correspond to eight real modifiers */
               unsigned char virtual_mod; /* 1 modifier to add to key virtual mod map */
               XkbAnyAction  act;         /* action to bind to symbol position on key */
           } XkbSymInterpretRec,*XkbSymInterpretPtr;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/XkbAllocCompatMap.3.html">XkbAllocCompatMap</a></b>(3)

X Version 11                                      libX11 1.8.12                               <u><a href="../man3/XkbSetCompatMap.3.html">XkbSetCompatMap</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>