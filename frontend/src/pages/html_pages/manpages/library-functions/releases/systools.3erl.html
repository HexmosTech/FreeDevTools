<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>systools - A Set of Release Handling Tools</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       systools - A Set of Release Handling Tools

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module contains functions to generate boot scripts (<u>.boot</u>, <u>.script</u>), a release upgrade file (<u>relup</u>),
       and release packages.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>make_relup(Name,</b> <b>UpFrom,</b> <b>DownTo)</b> <b>-&gt;</b> <b>Result</b>
       <b>make_relup(Name,</b> <b>UpFrom,</b> <b>DownTo,</b> <b>[Opt])</b> <b>-&gt;</b> <b>Result</b>

              Types:

                 Name = string()
                 UpFrom = DownTo = [Name | {Name,Descr}]
                  Descr = term()
                 Opt = {path,[Dir]} | restart_emulator | silent | noexec | {outdir,Dir} | warnings_as_errors
                  Dir = string()
                 Result = ok | error | {ok,Relup,Module,Warnings} | {error,Module,Error}
                  Relup, see <a href="../man5/relup.5.html">relup</a>(5)
                  Module = atom()
                  Warnings = Error = term()

              Generates  a  release upgrade file <u>relup</u> containing instructions for upgrading from or downgrading
              to one or more previous releases. The instructions are used by <u>release_handler</u> when  installing  a
              new version of a release in runtime.

              By  default,  <u>relup</u>  file  is  located in the current working directory. If option <u>{outdir,Dir}</u> is
              specified, the <u>relup</u> file is located in <u>Dir</u> instead.

              The release resource file  <u>Name.rel</u>  is  compared  with  all  release  resource  files  <u>Name2.rel</u>,
              specified in <u>UpFrom</u> and <u>DownTo</u>. For each such pair, the following is deducted:

                * Which  applications  to  be  deleted,  that  is,  applications  listed  in <u>Name.rel</u> but not in
                  <u>Name2.rel</u>

                * Which applications to be added, that is, applications listed in <u>Name2.rel</u> but not in <u>Name.rel</u>

                * Which applications to be upgraded/downgraded, that is, applications listed  in  both  <u>Name.rel</u>
                  and <u>Name2.rel</u> but with different versions

                * If  the  emulator  needs  to be restarted after upgrading or downgrading, that is, if the ERTS
                  version differs between <u>Name.rel</u> and <u>Name2.rel</u>

              Instructions for this are added to the <u>relup</u> file in the above order. Instructions  for  upgrading
              or  downgrading  between  application  versions  are fetched from the relevant application upgrade
              files <u>App.appup</u>, sorted in the same order as when generating a boot script,  see  <u>make_script/1,2</u>.
              High-level  instructions  are  translated into low-level instructions and the result is printed to
              the <u>relup</u> file.

              The optional <u>Descr</u> parameter is included "as is" in the <u>relup</u> file, see <u><a href="../man5/relup.5.html">relup</a>(5)</u>. Defaults to  the
              empty list.

              All  the files are searched for in the code path. It is assumed that the <u>.app</u> and <u>.appup</u> files for
              an application are located in the same directory.

              If option <u>{path,[Dir]}</u> is specified, this path is appended to the  current  path.  Wildcard  <u>*</u>  is
              expanded to all matching directories, for example, <u>lib/*/ebin</u>.

              If  option  <u>restart_emulator</u>  is  specified,  a  low-level  instruction to restart the emulator is
              appended to the <u>relup</u> file. This ensures that a complete reboot of the system  is  done  when  the
              system is upgraded or downgraded.

              If  an  upgrade  includes  a change from an emulator earlier than OTP R15 to OTP R15 or later, the
              warning <u>pre_R15_emulator_upgrade</u> is issued. For more information about this, see Design Principles
              in <u>System</u> <u>Documentation</u>.

              By default, errors and warnings are printed to tty and the function returns <u>ok</u> or <u>error</u>. If option
              <u>silent</u> is specified, the function instead either returns <u>{ok,Relup,Module,Warnings}</u>,  where  <u>Relup</u>
              is  the  release  upgrade  file,  or <u>{error,Module,Error}</u>. Warnings and errors can be converted to
              strings by calling <u>Module:format_warning(Warnings)</u> or <u>Module:format_error(Error)</u>.

              If option <u>noexec</u> is specified, the function returns the same values as for  <u>silent</u>  but  no  <u>relup</u>
              file is created.

              If option <u>warnings_as_errors</u> is specified, warnings are treated as errors.

       <b>make_script(Name)</b> <b>-&gt;</b> <b>Result</b>
       <b>make_script(Name,</b> <b>[Opt])</b> <b>-&gt;</b> <b>Result</b>

              Types:

                 Name = string()
                 Opt  = src_tests | {path,[Dir]} | local | {variables,[Var]} | exref | {exref,[App]}] | silent |
                 {outdir,Dir} | no_dot_erlang | no_warn_sasl | warnings_as_errors | {script_name, Name}
                  Dir = string()
                  Var = {VarName,Prefix}
                  VarName = Prefix = string()
                  App = atom()
                 Result = ok | error | {ok,Module,Warnings} | {error,Module,Error}
                  Module = atom()
                  Warnings = Error = term()

              Generates a boot script <u>Name.script</u> and its binary version, the boot file  <u>Name.boot</u>,  unless  the
              <u>{script_name,</u>  <u>ScriptName}</u>  option  is  given,  in  which case the names are <u>ScriptName.script</u> and
              <u>ScriptName.boot</u> The boot file specifies which code to be  loaded  and  which  applications  to  be
              started when the Erlang runtime system is started. See <u><a href="../man5/script.5.html">script</a>(5)</u>.

              The  release  resource  file  <u>Name.rel</u> is read to determine which applications are included in the
              release. Then the relevant application resource files <u>App.app</u> are read to determine which  modules
              to  be  loaded,  and  if  and  how  the applications are to be started. (Keys <u>modules</u> and <u>mod</u>, see
              <u><a href="../man5/app.5.html">app</a>(5)</u>.

              By default, the boot script and boot file are located in the same directory as <u>Name.rel</u>. That  is,
              in the current working directory unless <u>Name</u> contains a path. If option <u>{outdir,Dir}</u> is specified,
              they are located in <u>Dir</u> instead.

              The correctness of each application is checked as follows:

                * The  version  of  an  application  specified in the <u>.rel</u> file is to be the same as the version
                  specified in the <u>.app</u> file.

                * There are to be no undefined applications, that is, dependencies to applications that are  not
                  included in the release. (Key <u>applications</u> in the <u>.app</u> file).

                * There are to be no circular dependencies among the applications.

                * There  are  to  be no duplicated modules, that is, modules with the same name but belonging to
                  different applications.

                * If option <u>src_tests</u> is specified, a warning is issued if the  source  code  for  a  module  is
                  missing or is newer than the object code.

              The  applications  are  sorted according to the dependencies between the applications. Where there
              are no dependencies, the order in the <u>.rel</u> file is kept.

              The function fails if the mandatory applications Kernel and STDLIB are not included  in  the  <u>.rel</u>
              file and have start type <u>permanent</u> (which is default).

              If  SASL  is  not  included as an application in the <u>.rel</u> file, a warning is issued because such a
              release cannot be used in an upgrade. To turn off this warning, add option <u>no_warn_sasl</u>.

              All files are searched for in the current path. It is assumed that the <u>.app</u> and <u>.beam</u> files for an
              application are located in the same directory. The <u>.erl</u> files are also assumed to  be  located  in
              this  directory,  unless  it  is  an  <u>ebin</u>  directory  in  which  case  they can be located in the
              corresponding <u>src</u> directory.

              If option <u>{path,[Dir]}</u> is specified, this path is appended to the current path. A directory in the
              path can be specified with a wildcard <u>*</u>, this is expanded to all  matching  directories.  Example:
              <u>"lib/*/ebin"</u>.

              In  the generated boot script all application directories are structured as <u>App-Vsn/ebin</u>. They are
              assumed to be located in <u>$ROOT/lib</u>, where <u>$ROOT</u> is the root directory of the installed release. If
              option <u>local</u> is specified, the actual directories where  the  applications  were  found  are  used
              instead. This is a useful way to test a generated boot script locally.

              Option <u>variables</u> can be used to specify an installation directory other than <u>$ROOT/lib</u> for some of
              the  applications.  If  a  variable <u>{VarName,Prefix}</u> is specified and an application is found in a
              directory <u>Prefix/Rest/App[-Vsn]/ebin</u>, this application gets the path <u>VarName/Rest/App-Vsn/ebin</u>  in
              the   boot  script.  If  an  application  is  found  in  a  directory  <u>Prefix/Rest</u>,  the  path  is
              <u>VarName/Rest/App-Vsn/ebin</u>. When starting Erlang, all variables  <u>VarName</u>  are  given  values  using
              command-line flag <u>boot_var</u>.

              <u>Example:</u>   If   option  <u>{variables,[{"TEST","lib"}]}</u>  is  specified  and  <u>myapp.app</u>  is  found  in
              <u>lib/myapp/ebin</u>, the path to this application  in  the  boot  script  is  <u>"$TEST/myapp-1/ebin"</u>.  If
              <u>myapp.app</u> is found in <u>lib/test</u>, the path is <u>$TEST/test/myapp-1/ebin</u>.

              The checks performed before the boot script is generated can be extended with some cross reference
              checks  by  specifying  option  <u>exref</u>.  These  checks  are  performed  with  the  Xref  tool.  All
              applications, or the applications specified with <u>{exref,[App]}</u>, are checked by Xref  and  warnings
              are issued for calls to undefined functions.

              By default, errors and warnings are printed to tty and the function returns <u>ok</u> or <u>error</u>. If option
              <u>{ok,Module,Warnings}</u>  or  <u>{error,Module,Error}</u>.  <u>silent</u> is specified, the function instead returns
              Warnings and errors can be converted to  strings  by  calling  <u>Module:format_warning(Warnings)</u>  or
              <u>Module:format_error(Error)</u>.

              If option <u>warnings_as_errors</u> is specified, warnings are treated as errors.

              If  option <u>no_dot_erlang</u> is specified, the instruction to load the <u>.erlang</u> file during boot is <u>not</u>
              included.

       <b>make_tar(Name)</b> <b>-&gt;</b> <b>Result</b>

       <b>make_tar(Name,</b> <b>Opts)</b> <b>-&gt;</b> <b>Result</b>

              Types:

                 Name = string()
                 Opts = [Opt]
                 Opt =
                     {dirs, [IncDir]} |
                     {path, [Dir]} |
                     {variables, [Var]} |
                     {var_tar, VarTar} |
                     {erts, Dir} |
                     erts_all | src_tests | exref |
                     {exref, [App]} |
                     silent |
                     {outdir, Dir} |
                     no_warn_sasl | warnings_as_errors |
                     {extra_files, ExtraFiles}
                 Dir = file:filename_all()
                 IncDir = src | include | atom()
                 Var = {VarName, PreFix}
                 VarName = PreFix = string()
                 VarTar = include | ownfile | omit
                 App = atom()
                 Result =
                     ok | error |
                     {ok, Module :: module(), Warnings :: term()} |
                     {error, Module :: module(), Error :: term()}
                 ExtraFiles = [{NameInArchive, file:filename_all()}]
                 NameInArchive = string()

              Creates a release package file <u>Name.tar.gz</u>. This file must be uncompressed  and  unpacked  on  the
              target system using <u>release_handler</u> before the new release can be installed.

              The  release  resource  file  <u>Name.rel</u> is read to determine which applications are included in the
              release. Then the relevant application resource files <u>App.app</u> are read to  determine  the  version
              and modules of each application (keys <u>vsn</u> and <u>modules</u>, see <u><a href="../man5/app.5.html">app</a>(5)</u>).

              By default, the release package file is located in the same directory as <u>Name.rel</u>. That is, in the
              current  working directory unless <u>Name</u> contains a path. If option <u>{outdir,Dir}</u> is specified, it is
              located in <u>Dir</u> instead.

              If SASL is not included as an application in the <u>.rel</u> file, a warning is  issued  because  such  a
              release cannot be used in an upgrade. To turn off this warning, add option <u>no_warn_sasl</u>.

              By default, the release package contains the directories <u>lib/App-Vsn/ebin</u> and <u>lib/App-Vsn/priv</u> for
              each  included  application. If more directories are to be included, option <u>dirs</u> is specified, for
              example, <u>{dirs,[src,examples]}</u>.

              All these files are searched for in the current path. If option <u>{path,[Dir]}</u>  is  specified,  this
              path is appended to the current path. Wildcard <u>*</u> is expanded to all matching directories. Example:
              <u>"lib/*/ebin"</u>.

              If  the  <u>{extra_files,</u>  <u>ExtraFiles}</u>  option  is given then the <u>ExtraFiles</u> are added to the tarball
              after everything else to be included has been added. The <u>ExtraFiles</u> list is a  list  of  files  or
              directories in the same format as the <u>add_type()</u> tuple for erl_tar:add/3,4

              Option  <u>variables</u>  can be used to specify an installation directory other than <u>lib</u> for some of the
              applications. If variable <u>{VarName,Prefix}</u> is specified and an application is found  in  directory
              <u>Prefix/Rest/App[-Vsn]/ebin</u>,  this  application  is  packed  into a separate <u>VarName.tar.gz</u> file as
              <u>Rest/App-Vsn/ebin</u>.

              <u>Example:</u>  If  option  <u>{variables,[{"TEST","lib"}]}</u>  is  specified  and  <u>myapp.app</u>  is  located  in
              <u>lib/myapp-1/ebin</u>, application <u>myapp</u> is included in <u>TEST.tar.gz</u>:

              % tar tf TEST.tar
              myapp-1/ebin/myapp.app
              ...

              Option <u>{var_tar,VarTar}</u> can be used to specify if and where a separate package is to be stored. In
              this option <u>VarTar</u> is one of the following:

                <u>include</u>:
                  Each  separate (variable) package is included in the main <u>ReleaseName.tar.gz</u> file. This is the
                  default.

                <u>ownfile</u>:
                  Each separate (variable) package is generated as a separate file in the same directory as  the
                  <u>ReleaseName.tar.gz</u> file.

                <u>omit</u>:
                  No  separate  (variable)  packages  are  generated.  Applications  that are found underneath a
                  variable directory are ignored.

              A directory <u>releases</u>  is  also  included  in  the  release  package,  containing  <u>Name.rel</u>  and  a
              subdirectory <u>RelVsn</u>. <u>RelVsn</u> is the release version as specified in <u>Name.rel</u>.

              <u>releases/RelVsn</u>  contains the boot script <u>Name.boot</u> renamed to <u>start.boot</u> and, if found, the files
              <u>relup</u> and <u>sys.config</u> or <u>sys.config.src</u>. These files are searched for  in  the  same  directory  as
              <u>Name.rel</u>, in the current working directory, and in any directories specified using option <u>path</u>. In
              the case of <u>sys.config</u> it is not included if <u>sys.config.src</u> is found.

              If  the  release package is to contain a new Erlang runtime system, the <u>erts-ErtsVsn/bin</u> directory
              of the specified runtime system <u>{erts,Dir}</u> is copied to <u>erts-ErtsVsn/bin</u>.  Some  erts  executables
              are  not  copied  by  default,  if  you  want to include all executables you can give the <u>erts_all</u>
              option.

              All checks with function <u>make_script</u> are performed before the release package is created.  Options
              <u>src_tests</u> and <u>exref</u> are also valid here.

              The  return  value  and  the  handling  of  errors  and  warnings  are  the  same as described for
              <u>make_script</u>.

       <b>script2boot(File)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>error</b>

              Types:

                 File = string()

              The Erlang runtime system requires that the contents of the script used to boot the  system  is  a
              binary  Erlang  term. This function transforms the <u>File.script</u> boot script to a binary term, which
              is stored in the <u>File.boot</u> file.

              A boot script generated using <u>make_script</u> is already transformed to the binary form.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/app.5.html">app</a>(5)</u>, <u><a href="../man5/appup.5.html">appup</a>(5)</u>, <u><a href="../man1/erl.1.html">erl</a>(1)</u>, <u><a href="../man5/rel.5.html">rel</a>(5)</u>, <u><a href="../man3erl/release_handler.3erl.html">release_handler</a>(3erl)</u>, <u><a href="../man5/relup.5.html">relup</a>(5)</u>, <u><a href="../man5/script.5.html">script</a>(5)</u>

Ericsson AB                                        sasl 4.1.1                                     <u><a href="../man3erl/systools.3erl.html">systools</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>