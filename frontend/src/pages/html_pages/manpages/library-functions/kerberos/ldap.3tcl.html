<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ldap - LDAP client</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ldap - LDAP client

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>ldap</b> <b>?1.10.2?</b>

       <b>::ldap::connect</b> <u>host</u> ?<u>port</u>?

       <b>::ldap::tlsoptions</b> <b>reset</b>

       <b>::ldap::tlsoptions</b> ?<u>opt1</u> <u>val1</u>? ?<u>opt2</u> <u>val2</u>? ...

       <b>::ldap::secure_connect</b> <u>host</u> ?<u>port</u>?

       <b>::ldap::secure_connect</b> <u>host</u> ?<u>port</u>? ?<u>verify_cert</u>? ?<u>sni_servername</u>?

       <b>::ldap::disconnect</b> <u>handle</u>

       <b>::ldap::starttls</b> <u>handle</u>

       <b>::ldap::starttls</b> <u>handle</u> ?<u>cafile</u>? ?<u>certfile</u>? ?<u>keyfile</u>? ?<u>verify_cert</u>? ?<u>sni_servername</u>?

       <b>::ldap::bind</b> <u>handle</u> ?<u>name</u>? ?<u>password</u>?

       <b>::ldap::bindSASL</b> <u>handle</u> ?<u>name</u>? ?<u>password</u>?

       <b>::ldap::unbind</b> <u>handle</u>

       <b>::ldap::search</b> <u>handle</u> <u>baseObject</u> <u>filterString</u> <u>attributes</u> <u>options</u>

       <b>::ldap::searchInit</b> <u>handle</u> <u>baseObject</u> <u>filterString</u> <u>attributes</u> <u>options</u>

       <b>::ldap::searchNext</b> <u>handle</u>

       <b>::ldap::searchEnd</b> <u>handle</u>

       <b>::ldap::modify</b> <u>handle</u> <u>dn</u> <u>attrValToReplace</u> ?<u>attrToDelete</u>? ?<u>attrValToAdd</u>?

       <b>::ldap::modifyMulti</b> <u>handle</u> <u>dn</u> <u>attrValToReplace</u> ?<u>attrValToDelete</u>? ?<u>attrValToAdd</u>?

       <b>::ldap::add</b> <u>handle</u> <u>dn</u> <u>attrValueTuples</u>

       <b>::ldap::addMulti</b> <u>handle</u> <u>dn</u> <u>attrValueTuples</u>

       <b>::ldap::delete</b> <u>handle</u> <u>dn</u>

       <b>::ldap::modifyDN</b> <u>handle</u> <u>dn</u> <u>newrdn</u> ?<u>deleteOld</u>? ?<u>newSuperior</u>?

       <b>::ldap::info</b> <b>ip</b> <u>handle</u>

       <b>::ldap::info</b> <b>bound</b> <u>handle</u>

       <b>::ldap::info</b> <b>bounduser</b> <u>handle</u>

       <b>::ldap::info</b> <b>connections</b>

       <b>::ldap::info</b> <b>tls</b> <u>handle</u>

       <b>::ldap::info</b> <b>tlsstatus</b> <u>handle</u>

       <b>::ldap::info</b> <b>saslmechanisms</b> <u>handle</u>

       <b>::ldap::info</b> <b>control</b> <u>handle</u>

       <b>::ldap::info</b> <b>extensions</b> <u>extensions</u>

       <b>::ldap::info</b> <b>whoami</b> <u>handle</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>ldap</b>  package  provides  a  Tcl-only client library for the LDAPv3 protocol as specified in RFC 4511
       (<u><a href="http://www.rfc-editor.org/rfc/rfc4511.txt">http://www.rfc-editor.org/rfc/rfc4511.txt</a></u>).  It works by opening the standard (or secure) LDAP socket on
       the server, and then providing a Tcl API to access the LDAP protocol commands.   All  server  errors  are
       returned as Tcl errors (thrown) which must be caught with the Tcl <b>catch</b> command.

</pre><h4><b>TLS</b> <b>SECURITY</b> <b>CONSIDERATIONS</b></h4><pre>
       This package uses the <b>TLS</b> package to handle the security for <b>LDAPS</b> connections.

       Policy  decisions like the set of protocols to support and what ciphers to use are not the responsibility
       of <b>TLS</b>, nor of this  package  itself  however.   Such  decisions  are  the  responsibility  of  whichever
       application  is  using  the package, and are likely influenced by the set of servers the application will
       talk to as well.

       For        example,        in        light        of        the        recent        <u>POODLE</u>        <u>attack</u>
       [<a href="http://googleonlinesecurity.blogspot.co.uk/2014/10/this-poodle-bites-exploiting-ssl-30.html">http://googleonlinesecurity.blogspot.co.uk/2014/10/this-poodle-bites-exploiting-ssl-30.html</a>]  discovered
       by Google many servers will  disable  support  for  the  SSLv3  protocol.   To  handle  this  change  the
       applications  using  <b>TLS</b>  must  be patched, and not this package, nor <b>TLS</b> itself.  Such a patch may be as
       simple as generally activating <b>tls1</b> support, as shown in the example below.

                  ldap::tlsoptions -tls1 1 -ssl2 0 -ssl3 0 ;# forcibly activate support for the TLS1 protocol

                  ... your own application code ...

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::ldap::connect</b> <u>host</u> ?<u>port</u>?
              Opens a LDAPv3 connection to the specified <u>host</u>, at the given <u>port</u>, and returns a  token  for  the
              connection.  This  token is the <u>handle</u> argument for all other commands. If no <u>port</u> is specified it
              will default to <b>389</b>.

              The command blocks until the connection has been established, or establishment definitely failed.

       <b>::ldap::tlsoptions</b> <b>reset</b>
              This command resets TLS options to default values. It returns the  set  of  options.   Using  this
              command is incompatible with the obsolete form of <b>::ldap::secure_connect</b> and <b>::ldap_starttls</b>.

       <b>::ldap::tlsoptions</b> ?<u>opt1</u> <u>val1</u>? ?<u>opt2</u> <u>val2</u>? ...
              This  commands adds one or more options to some value, and may be used more than one time in order
              to add options in several steps.  A complete description of  options  may  be  found  in  the  <b>tls</b>
              package documentation. Valid options and values are:

              <b>-cadir</b> directory
                     Provide the directory containing the CA certificates.  No default.

              <b>-cafile</b> file
                     Provide the CA file.  No default.

              <b>-cipher</b> string
                     Provide the cipher suites to use.  No default.

              <b>-dhparams</b> file
                     Provide a Diffie-Hellman parameters file.  No default.

              <b>-request</b> boolean
                     Request a certificate from peer during SSL handshake.  Default: true.

              <b>-require</b> boolean
                     Require  a  valid  certificate  from peer during SSL handshake. If this is set to true then
                     -request must also be set to true.  Default: false

              <b>-servername</b> host
                     Only available if the OpenSSL library the TLS package is linked against  supports  the  TLS
                     hostname  extension for 'Server Name Indication' (SNI). Use to name the logical host we are
                     talking to and expecting a certificate for.  No default.

              <b>-ssl2</b> bool
                     Enable use of SSL v2.  Default: false

              <b>-ssl3</b> bool
                     Enable use of SSL v3.  Default: false

              <b>-tls1</b> bool
                     Enable use of TLS v1 Default: true

              <b>-tls1.1</b> bool
                     Enable use of TLS v1.1 Default: true

              <b>-tls1.2</b> bool
                     Enable use of TLS v1.2 Default: true

       This command returns the current set of TLS options and values.  In particular, one may use this  command
       without any arguments to get the current set of options.

       Using  this  command is incompatible with the obsolete form of <b>::ldap::secure_connect</b> and <b>::ldap_starttls</b>
       (see below).

       <b>::ldap::secure_connect</b> <u>host</u> ?<u>port</u>?
              Like <b>::ldap::connect</b>, except that the created connection is secured by SSL. The port  defaults  to
              <b>636</b>.  This command depends on the availability of the package <b>TLS</b>, which is a SSL binding for Tcl.
              If <b>TLS</b> is not available, then this command will fail.

              TLS options are specified with <b>::ldap::tlsoptions</b>.

              The command blocks until the connection has been established, or establishment definitely failed.

       <b>::ldap::secure_connect</b> <u>host</u> ?<u>port</u>? ?<u>verify_cert</u>? ?<u>sni_servername</u>?
              Note:  this  form  of  the  command  is  deprecated,  since TLS options had to be specified with a
              combination of parameters to this  command  (<u>verify_cert</u>  and  <u>sni_servername</u>)  and  arguments  to
              <b>::tls::init</b>  (from package <b>tls</b>) for example to setup defaults for trusted certificates. Prefer the
              above form (without the <u>verify_cert</u> and  <u>sni_servername</u>  parameters)  and  set  TLS  options  with
              <b>::ldap::tlsoptions</b>.

              If  <u>verify_cert</u>  is  set  to  1, the default, this checks the server certificate against the known
              hosts. If <u>sni_servername</u> is set, the given hostname is  used  as  the  hostname  for  Server  Name
              Indication in the TLS handshake.

              Use <b>::tls::init</b> to setup defaults for trusted certificates.

              TLS  supports  different  protocol  levels.  In  common use are the versions 1.0, 1.1 and 1.2.  By
              default all those versions are offered. If you need to modify the acceptable  protocols,  you  can
              change the ::ldap::tlsProtocols list (deprecated).

       <b>::ldap::disconnect</b> <u>handle</u>
              Closes the ldap connection refered to by the token <u>handle</u>. Returns the empty string as its result.

       <b>::ldap::starttls</b> <u>handle</u>
              Start  TLS  negotiation  on  the  connection  denoted  by  <u>handle</u>,  with  TLS  parameters set with
              <b>::ldap::tlsoptions</b>.

       <b>::ldap::starttls</b> <u>handle</u> ?<u>cafile</u>? ?<u>certfile</u>? ?<u>keyfile</u>? ?<u>verify_cert</u>? ?<u>sni_servername</u>?
              Note: this form of the command is deprecated, since  TLS  options  had  to  be  specified  with  a
              combination   of   parameters   to  this  command  (<u>cafile</u>,  <u>certfile</u>,  <u>keyfile</u>,  <u>verify_cert</u>  and
              <u>sni_servername</u>) and arguments to <b>::tls::init</b> (from package <b>tls</b>).  Prefer the above  form  (without
              specific TLS arguments) and set TLS options with <b>::ldap::tlsoptions</b>.

              Start  TLS  negotiation  on the connection denoted by <u>handle</u>.  You need to set at least the <u>cafile</u>
              argument to a file with trusted certificates, if <u>verify_cert</u> is 1,  which  is  the  default.   The
              <u>sni_servername</u> can be used to signal a different hostname during the TLS handshake.  The announced
              protocols  are determined in the same way as <b>::ldap::secure_connect</b>.  You can specify a TLS client
              certificate with the <u>certfile</u> and <u>keyfile</u> options.

       <b>::ldap::bind</b> <u>handle</u> ?<u>name</u>? ?<u>password</u>?
              This command authenticates the ldap connection refered to by the token in <u>handle</u>, with a user name
              and associated password. It blocks until a response from the ldap server arrives.  Its  result  is
              the empty string.  Both <u>name</u> and <u>passwd</u> default to the empty string if they are not specified.  By
              leaving  out  <u>name</u>  and  <u>passwd</u>  you can make an anonymous bind to the ldap server.  You can issue
              <b>::ldap::bind</b> again to bind with different credentials.

       <b>::ldap::bindSASL</b> <u>handle</u> ?<u>name</u>? ?<u>password</u>?
              This command uses SASL authentication mechanisms to do a multistage bind.  Its otherwise identical
              to the standard <b>::ldap::bind</b>.  This feature is currently experimental and subject to  change.  See
              the  documentation for the <b>SASL</b> and the "<u>SASL.txt</u>" in the tcllib CVS repository for details how to
              setup and use SASL with openldap.

       <b>::ldap::unbind</b> <u>handle</u>
              This command asks the ldap server to release the last bind done for the connection refered  to  by
              the token in <u>handle</u>.  The <u>handle</u> is invalid after the unbind, as the server closes the connection.
              So this is effectivly just a more polite disconnect operation.

       <b>::ldap::search</b> <u>handle</u> <u>baseObject</u> <u>filterString</u> <u>attributes</u> <u>options</u>
              This  command  performs  a  LDAP  search  below  the  <u>baseObject</u>  tree using a complex LDAP search
              expression <u>filterString</u> and returns the specified <u>attributes</u> of all matching objects (DNs). If the
              list of <u>attributes</u> was empty all attributes are returned. The command blocks until it has received
              all results.  The valid <u>options</u> are identical to the options listed for <b>::ldap::searchInit</b>.

              An example of a search expression is

                  set filterString "|(cn=Linus*)(sn=Torvalds*)"

       The return value of the command is a list of  nested  dictionaries.  The  first  level  keys  are  object
       identifiers (DNs), second levels keys are attribute names. In other words, it is in the form

                  {dn1 {attr1 {val11 val12 ...} attr2 {val21...} ...}} {dn2 {a1 {v11 ...} ...}} ...

       <b>::ldap::searchInit</b> <u>handle</u> <u>baseObject</u> <u>filterString</u> <u>attributes</u> <u>options</u>
              This  command  initiates  a  LDAP  search  below  the  <u>baseObject</u> tree using a complex LDAP search
              expression <u>filterString</u>.  The search gets the specified <u>attributes</u> of all matching objects  (DNs).
              The command itself just starts the search, to retrieve the actual results, use <b>::ldap::searchNext</b>.
              A  search  can  be  terminated  at  any time by <b>::ldap::searchEnd</b>. This informs the server that no
              further results should be sent by sending and ABANDON message and cleans up the internal state  of
              the  search.   Only  one  <b>::ldap::search</b>  can  be  active  at  a  given  time,  this  includes the
              introspection commands <b>::ldap::info</b> <b>saslmechanisms</b>, <b>ldap::info</b> <b>control</b> and <b>ldap::info</b>  <b>extensions</b>,
              which  invoke  a  search  internally.   Error  responses from the server due to wrong arguments or
              similar things are returned with the first <b>::ldap::searchNext</b>  call  and  should  be  checked  and
              dealed  with there.  If the list of requested <u>attributes</u> is empty all attributes will be returned.
              The parameter <u>options</u> specifies the options to be used  in  the  search,  and  has  the  following
              format:

                  {-option1 value1 -option2 value2 ... }

       Following options are available:

              <b>-scope</b> base one sub
                     Control  the  scope  of  the  search  to be one of <b>base</b>, <b>one</b>, or <b>sub</b>,  to  specify  a  base
                     object,  one-level or  subtree  search.   The  default is <b>sub</b>.

              <b>-derefaliases</b> never search find always
                     Control how aliases dereferencing is done.  Should be one of  <b>never</b>,  <b>always</b>,  <b>search</b>,   or
                     <b>find</b>   to  specify  that  aliases are never dereferenced, always dereferenced, dereferenced
                     when searching, or dereferenced only when locating the base object  for  the  search.   The
                     default is to never dereference aliases.

              <b>-sizelimit</b> num
                     Determines  the maximum number of entries to return in a search. If specified as 0 no limit
                     is enforced. The server may enforce a configuration dependent sizelimit, which may be lower
                     than the one given by this option. The default is 0, no limit.

              <b>-timelimit</b> seconds
                     Asks the server to use a timelimit of <u>seconds</u> for the search.  Zero  means  no  limit.  The
                     default is 0, no limit.

              <b>-attrsonly</b> boolean
                     If  set  to  1  only  the  attribute names but not the values will be present in the search
                     result.  The default is to retrieve attribute names and values.

              <b>-referencevar</b> varname
                     If set the search result reference LDAPURIs, if any, are returned in  the  given  variable.
                     The  caller  can  than  decide  to follow those references and query other LDAP servers for
                     further results.

       <b>::ldap::searchNext</b> <u>handle</u>
              This command returns the next entry from a LDAP search initiated by <b>::ldap::searchInit</b>. It returns
              only after a new result is received or when no further results are available, but  takes  care  to
              keep the event loop alive.  The returned entry is a list with two elements: the first is the DN of
              the entry, the second is the list of attributes and values, under the format:

                  dn {attr1 {val11 val12 ...} attr2 {val21...} ...}

       The <b>::ldap::searchNext</b> command returns an empty list at the end of the search.

       <b>::ldap::searchEnd</b> <u>handle</u>
              This  command  terminates  a  LDAP  search  initiated by <b>::ldap::searchInit</b>. It also cleans up the
              internal state so a new search can be initiated.  If the client has not yet received all  results,
              the  client sends an ABANDON message to inform the server that no further results for the previous
              search should to be sent.

       <b>::ldap::modify</b> <u>handle</u> <u>dn</u> <u>attrValToReplace</u> ?<u>attrToDelete</u>? ?<u>attrValToAdd</u>?
              This command modifies the object <u>dn</u> on the ldap server we are connected to via <u>handle</u>. It replaces
              attributes with new values, deletes attributes, and adds new  attributes  with  new  values.   All
              arguments  are  dictionaries  mapping attribute names to values. The optional arguments default to
              the empty dictionary, which means that no attributes will be deleted nor added.

              dictionary <u>attrValToReplace</u> (in)
                     No attributes will be changed if this argument is empty. The dictionary  contains  the  new
                     attributes and their values. They <u>replace</u> <u>all</u> attributes known to the object.

              dictionary <u>attrToDelete</u> (in)
                     No  attributes  will  be  deleted  if  this  argument  is  empty. The dictionary values are
                     restrictions on the deletion. An attribute listed here will be deleted if and only  if  its
                     current  value at the server matches the value specified in the dictionary, or if the value
                     in the dictionary is the empty string.

              dictionary <u>attrValToAdd</u> (in)
                     No attributes will be added if this argument is empty. The dictionary values are the values
                     for the new attributes.

       The command blocks until all modifications have completed. Its result is the empty string.

       <b>::ldap::modifyMulti</b> <u>handle</u> <u>dn</u> <u>attrValToReplace</u> ?<u>attrValToDelete</u>? ?<u>attrValToAdd</u>?
              This command modifies the object <u>dn</u> on the ldap server we are connected to via <u>handle</u>. It replaces
              attributes with new values, deletes attributes, and adds new  attributes  with  new  values.   All
              arguments are lists with the format:

                  attr1 {val11 val12 ...} attr2 {val21...} ...

       where  each value list may be empty for deleting all attributes.  The optional arguments default to empty
       lists of attributes to delete and to add.

              list <u>attrValToReplace</u> (in)
                     No attributes will be changed if this argument is empty. The dictionary  contains  the  new
                     attributes and their values. They <u>replace</u> <u>all</u> attributes known to the object.

              list <u>attrValToDelete</u> (in)
                     No  attributes  will  be  deleted  if this argument is empty. If no value is specified, the
                     whole set of values for an attribute will be deleted.

              list <u>attrValToAdd</u> (in)
                     No attributes will be added if this argument is empty.

       The command blocks until all modifications have completed. Its result is the empty string.

       <b>::ldap::add</b> <u>handle</u> <u>dn</u> <u>attrValueTuples</u>
              This command creates a new object using the specified <u>dn</u>. The attributes of the new object are set
              to the values in the list <u>attrValueTuples</u>.  Multiple valuated attributes may  be  specified  using
              multiple  tuples.   The  command blocks until the operation has completed. Its result is the empty
              string.

       <b>::ldap::addMulti</b> <u>handle</u> <u>dn</u> <u>attrValueTuples</u>
              This command is the preferred one to create a new object using the specified <u>dn</u>. The attributes of
              the new object are set to the values in the dictionary <u>attrValueTuples</u>  (which  is  keyed  by  the
              attribute  names).  Each tuple is a list containing multiple values.  The command blocks until the
              operation has completed. Its result is the empty string.

       <b>::ldap::delete</b> <u>handle</u> <u>dn</u>
              This command removes the object specified by <u>dn</u>, and all its  attributes  from  the  server.   The
              command blocks until the operation has completed. Its result is the empty string.

       <b>::ldap::modifyDN</b> <u>handle</u> <u>dn</u> <u>newrdn</u> ?<u>deleteOld</u>? ?<u>newSuperior</u>?
              This  command  moves or copies the object specified by <u>dn</u> to a new location in the tree of object.
              This location is specified by <u>newrdn</u>, a <u>relative</u> designation, or  by  <u>newrdn</u>  and  <u>newSuperior</u>,  a
              <u>absolute</u> designation.  The optional argument <u>deleteOld</u> defaults to <b>true</b>, i.e. a move operation. If
              <u>deleteOld</u>  is  not  set,  then  the  operation  will create a copy of <u>dn</u> in the new location.  The
              optional argument <u>newSuperior</u> defaults an empty string,  meaning  that  the  object  must  not  be
              relocated in another branch of the tree. If this argument is given, the argument <u>deleteOld</u> must be
              specified  also.   The  command  blocks until the operation has completed. Its result is the empty
              string.

       <b>::ldap::info</b> <b>ip</b> <u>handle</u>
              This command returns the IP address of the remote LDAP server the handle is connected to.

       <b>::ldap::info</b> <b>bound</b> <u>handle</u>
              This command returns 1 if a handle has successfully completed a <b>::ldap::bind</b>.  If no bind was done
              or it failed, a 0 is returned.

       <b>::ldap::info</b> <b>bounduser</b> <u>handle</u>
              This command returns the username used  in  the  bind  operation  if  a  handle  has  successfully
              completed a <b>::ldap::bind</b>.  If no bound was done or it failed, an empty string is returned.

       <b>::ldap::info</b> <b>connections</b>
              This command returns all currently existing ldap connection handles.

       <b>::ldap::info</b> <b>tls</b> <u>handle</u>
              This   command  returns  1  if  the  ldap  connection  <u>handle</u>  used  TLS/SSL  for  connection  via
              <b>ldap::secure_connect</b> or completed <b>ldap::starttls</b>, 0 otherwise.

       <b>::ldap::info</b> <b>tlsstatus</b> <u>handle</u>
              This command returns the current security status of an TLS secured channel. The result is  a  list
              of  key-value  pairs  describing  the  connected  peer  (see the <b>TLS</b> package documentation for the
              returned values).  If the connection is not secured with TLS, an empty list is returned.

       <b>::ldap::info</b> <b>saslmechanisms</b> <u>handle</u>
              Return the supported SASL mechanisms advertised by  the  server.  Only  valid  in  a  bound  state
              (anonymous or other).

       <b>::ldap::info</b> <b>control</b> <u>handle</u>
              Return  the  supported  controls advertised by the server as a list of OIDs. Only valid in a bound
              state.  This is currently experimental and subject to change.

       <b>::ldap::info</b> <b>extensions</b> <u>extensions</u>
              Returns the supported LDAP extensions as list of OIDs. Only valid  in  a  bound  state.   This  is
              currently experimental and subject to change.

       <b>::ldap::info</b> <b>whoami</b> <u>handle</u>
              Returns authzId for the current connection. This implements the RFC 4532 protocol extension.

</pre><h4><b>EXAMPLES</b></h4><pre>
       A small example, extracted from the test application coming with this code.

                  package require ldap

                  # Connect, bind, add a new object, modify it in various ways

                  set handle [ldap::connect localhost 9009]

                  set dn "cn=Manager, o=University of Michigan, c=US"
                  set pw secret

                  ldap::bind $handle $dn $pw

                  set dn "cn=Test User,ou=People,o=University of Michigan,c=US"

                  ldap::add $handle $dn {
                objectClass     OpenLDAPperson
                cn              {Test User}
                mail            <a href="mailto:test.user@google.com">test.user@google.com</a>
                uid             testuid
                sn              User
                telephoneNumber +31415926535
                telephoneNumber +27182818285
                  }

                  set dn "cn=Another User,ou=People,o=University of Michigan,c=US"

                  ldap::addMulti $handle $dn {
                objectClass     {OpenLDAPperson}
                cn              {{Anotther User}}
                mail            {<a href="mailto:test.user@google.com">test.user@google.com</a>}
                uid             {testuid}
                sn              {User}
                telephoneNumber {+31415926535 +27182818285}
                  }

                  # Replace all attributes
                  ldap::modify $handle $dn [list drink icetea uid JOLO]

                  # Add some more
                  ldap::modify $handle $dn {} {} [list drink water  drink orangeJuice pager "+1 313 555 7671"]

                  # Delete
                  ldap::modify $handle $dn {} [list drink water  pager ""]

                  # Move
                  ldap::modifyDN $handle $dn "cn=Tester"

                  # Kill the test object, and shut the connection down.
                  set dn "cn=Tester,ou=People,o=University of Michigan,c=US"
                  ldap::delete $handle $dn

                  ldap::unbind     $handle
                  ldap::disconnect $handle

       And another example, a simple query, and processing the results.

                  package require ldap
                  set handle [ldap::connect ldap.acme.com 389]
                  ldap::bind $handle
                  set results [ldap::search $handle "o=acme,dc=com" "(uid=jdoe)" {}]
                  foreach result $results {
                foreach {object attributes} $result break

                # The processing here is similar to what 'parray' does.
                # I.e. finding the longest attribute name and then
                # generating properly aligned output listing all attributes
                # and their values.

                set width 0
                set sortedAttribs {}
                foreach {type values} $attributes {
                    if {[string length $type] &gt; $width} {
                   set width [string length $type]
                    }
                    lappend sortedAttribs [list $type $values]
                }

                puts "object='$object'"

                foreach sortedAttrib  $sortedAttribs {
                    foreach {type values} $sortedAttrib break
                    foreach value $values {
                   regsub -all "\[\x01-\x1f\]" $value ? value
                   puts [format "  %-${width}s %s" $type $value]
                    }
                }
                puts ""
                  }
                  ldap::unbind $handle
                  ldap::disconnect $handle

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>ldap</u> of the <u>Tcllib</u> <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       directory access, internet, ldap, ldap client, protocol, rfc 2251, rfc 4511, x.500

</pre><h4><b>CATEGORY</b></h4><pre>
       Networking

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2004 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;
       Copyright (c) 2004 Jochen Loewer &lt;<a href="mailto:loewerj@web.de">loewerj@web.de</a>&gt;
       Copyright (c) 2006 Michael Schlenker &lt;<a href="mailto:mic42@users.sourceforge.net">mic42@users.sourceforge.net</a>&gt;

tcllib                                               1.10.2                                           <u><a href="../man3tcl/ldap.3tcl.html">ldap</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>