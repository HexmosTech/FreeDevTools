<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bench - bench - Processing benchmark suites</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bench - bench - Processing benchmark suites

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>bench</b> <b>?0.6?</b>

       <b>::bench::locate</b> <u>pattern</u> <u>paths</u>

       <b>::bench::run</b> ?<u>option</u> <u>value</u>...? <u>interp_list</u> <u>file</u>...

       <b>::bench::versions</b> <u>interp_list</u>

       <b>::bench::del</b> <u>bench_result</u> <u>column</u>

       <b>::bench::edit</b> <u>bench_result</u> <u>column</u> <u>newvalue</u>

       <b>::bench::merge</b> <u>bench_result</u>...

       <b>::bench::norm</b> <u>bench_result</u> <u>column</u>

       <b>::bench::out::raw</b> <u>bench_result</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This package provides commands for the execution of benchmarks written in the bench language, and for the
       processing of results generated by such execution.

       A  reader  interested  in the bench language itself should start with the <u>bench</u> <u>language</u> <u>introduction</u> and
       proceed from there to the formal <u>bench</u> <u>language</u> <u>specification</u>.

</pre><h4><b>PUBLIC</b> <b>API</b></h4><pre>
   <b>BENCHMARK</b> <b>EXECUTION</b>
       <b>::bench::locate</b> <u>pattern</u> <u>paths</u>
              This command locates Tcl interpreters and returns a list containing their paths. It searches  them
              in the list of <u>paths</u> specified by the caller, using the glob <u>pattern</u>.

              The  command  resolves  soft  links to find the actual executables matching the pattern. Note that
              only interpreters which are marked as executable  and  are  actually  executable  on  the  current
              platform are put into the result.

       <b>::bench::run</b> ?<u>option</u> <u>value</u>...? <u>interp_list</u> <u>file</u>...
              This  command  executes  the  benchmarks  declared  in  the set of files, once per Tcl interpreter
              specified via the <u>interp_list</u>, and per the  configuration  specified  by  the  options,  and  then
              returns  the  accumulated timing results. The format of this result is described in section <b>Result</b>
              <b>format</b>.

              It is assumed that the contents of the files are written in the bench language.

              The available options are

              <b>-errors</b> <u>flag</u>
                     The argument is a boolean value. If set errors in benchmarks are propagated to the command,
                     aborting benchmark execution. Otherwise they are  recorded  in  the  timing  result  via  a
                     special result code. The default is to propagate and abort.

              <b>-threads</b> <u>n</u>
                     The  argument  is a non-negative integer value declaring the number of threads to use while
                     executing the benchmarks. The default value is <b>0</b>, to not use threads.

              <b>-match</b> <u>pattern</u>
                     The argument is a glob pattern. Only benchmarks whose description matches the  pattern  are
                     executed. The default is the empty string, to execute all patterns.

              <b>-rmatch</b> <u>pattern</u>
                     The argument is a regular expression pattern. Only benchmarks whose description matches the
                     pattern are executed. The default is the empty string, to execute all patterns.

              <b>-iters</b> <u>n</u>
                     The  argument  is  positive  integer  number,  the  maximal  number  of  iterations for any
                     benchmark. The default is <b>1000</b>. Individual benchmarks can override this.

              <b>-pkgdir</b> <u>path</u>
                     The argument is a path to an existing, readable directory. Multiple paths can be specified,
                     simply use the option multiple times, each time with one of the paths to use.

                     If no paths were specified the system will behave as before.  If  one  or  more  paths  are
                     specified,  say  <b>N</b>, each of the specified interpreters will be invoked <b>N</b> times, with one of
                     the specified paths. The chosen path is put into the interpreters' <b>auto_path</b>, thus allowing
                     it to find specific versions of a package.

                     In this way the use of <b>-pkgdir</b> allows the user to benchmark several different versions of a
                     package, against one or more interpreters.

                     <u>Note:</u> The empty string is allowed as a path and causes the  system  to  run  the  specified
                     interpreters  with  an  unmodified  <b>auto_path</b>. In case the package in question is available
                     there as well.

       <b>::bench::versions</b> <u>interp_list</u>
              This command takes a list of Tcl interpreters, identified by their path, and returns a  dictionary
              mapping  from  the interpreters to their versions. Interpreters which are not actually executable,
              or fail when interrogated, are  not  put  into  the  result.  I.e  the  result  may  contain  less
              interpreters than there in the input list.

              The command uses builtin command <b>info</b> <b>patchlevel</b> to determine the version of each interpreter.

   <b>RESULT</b> <b>MANIPULATION</b>
       <b>::bench::del</b> <u>bench_result</u> <u>column</u>
              This command removes a column, i.e. all benchmark results for a specific Tcl interpreter, from the
              specified benchmark result and returns the modified result.

              The benchmark results are in the format described in section <b>Result</b> <b>format</b>.

              The column is identified by an integer number.

       <b>::bench::edit</b> <u>bench_result</u> <u>column</u> <u>newvalue</u>
              This  command  renames a column in the specified benchmark result and returns the modified result.
              This means that the path of the Tcl  interpreter  in  the  identified  column  is  changed  to  an
              arbitrary string.

              The benchmark results are in the format described in section <b>Result</b> <b>format</b>.

              The column is identified by an integer number.

       <b>::bench::merge</b> <u>bench_result</u>...
              This  commands  takes  one or more benchmark results, merges them into one big result, and returns
              that as its result.

              All benchmark results are in the format described in section <b>Result</b> <b>format</b>.

       <b>::bench::norm</b> <u>bench_result</u> <u>column</u>
              This command normalizes the timing results in the  specified  benchmark  result  and  returns  the
              modified  result.  This  means that the cell values are not times anymore, but factors showing how
              much faster or slower the execution was relative to the baseline.

              The baseline against which the command normalizes are the timing results  in  the  chosen  column.
              This  means  that after the normalization the values in this column are all <b>1</b>, as these benchmarks
              are neither faster nor slower than the baseline.

              A factor less than <b>1</b> indicates a benchmark which was faster than the baseline,  whereas  a  factor
              greater than <b>1</b> indicates a slower execution.

              The benchmark results are in the format described in section <b>Result</b> <b>format</b>.

              The column is identified by an integer number.

       <b>::bench::out::raw</b> <u>bench_result</u>
              This  command  formats  the  specified  benchmark  result  for output to a file, socket, etc. This
              specific command does no formatting at all, it passes the input through unchanged.

              For other formatting styles see the packages <b>bench::out::text</b> and  <b>bench::out::csv</b>  which  provide
              commands  to  format  benchmark results for human consumption, or as CSV data importable by spread
              sheets, respectively.

              Complementary, to read benchmark results from files, sockets etc. look for the  package  <b>bench::in</b>
              and the commands provided by it.

   <b>RESULT</b> <b>FORMAT</b>
       After  the  execution  of a set of benchmarks the raw result returned by this package is a Tcl dictionary
       containing all the relevant information.  The dictionary is a compact representation, i.e. serialization,
       of a 2-dimensional table which has Tcl interpreters as columns and benchmarks as rows. The cells  of  the
       table  contain  the  timing  results.  The Tcl interpreters / columns are identified by their paths.  The
       benchmarks / rows are identified by their description.

       The possible keys are all valid Tcl lists of two or three elements and have one of the following forms:

       {interp *}
              The set of keys matching this glob pattern capture the information about all the Tcl  interpreters
              used to run the benchmarks. The second element of the key is the path to the interpreter.

              The associated value is the version of the Tcl interpreter.

       {desc *}
              The  set of keys matching this glob pattern capture the information about all the benchmarks found
              in the executed benchmark suite. The  second  element  of  the  key  is  the  description  of  the
              benchmark, which has to be unique.

              The associated value is irrelevant, and set to the empty string.

       {usec * *}
              The  set  of  keys  matching  this  glob  pattern capture the performance information, i.e. timing
              results. The second element of the key is the description of the benchmark, the third element  the
              path of the Tcl interpreter which was used to run it.

              The associated value is either one of several special result codes, or the time it took to execute
              the benchmark, in microseconds. The possible special result codes are

              ERR    Benchmark could not be executed, failed with a Tcl error.

              BAD_RES
                     The  benchmark  could  be  executed,  however  the  result  from its body did not match the
                     declared expectations.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such in the category <u>bench</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       bench_intro, bench_lang_intro, bench_lang_spec, bench_read, bench_wcsv, bench_wtext

</pre><h4><b>KEYWORDS</b></h4><pre>
       benchmark, merging, normalization, performance, testing

</pre><h4><b>CATEGORY</b></h4><pre>
       Benchmark tools

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2007-2008 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                 0.6                                           <u><a href="../man3tcl/bench.3tcl.html">bench</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>