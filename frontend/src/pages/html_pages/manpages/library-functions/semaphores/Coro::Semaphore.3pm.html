<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coro::Semaphore - counting semaphores</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcoro-perl">libcoro-perl_6.570-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Coro::Semaphore - counting semaphores

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Coro;

        $sig = new Coro::Semaphore [initial value];

        $sig-&gt;down; # wait for signal

        # ... some other "thread"

        $sig-&gt;up;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module implements counting semaphores. You can initialize a mutex with any level of parallel users,
       that is, you can initialize a semaphore that can be "down"ed more than once until it blocks. There is no
       owner associated with semaphores, so one thread can "down" it while another can "up" it (or vice versa),
       "up" can be called before "down" and so on: the semaphore is really just an integer counter that
       optionally blocks when it is 0.

       Counting semaphores are typically used to coordinate access to resources, with the semaphore count
       initialized to the number of free resources. Threads then increment the count when resources are added
       and decrement the count when resources are removed.

       You don't have to load "Coro::Semaphore" manually, it will be loaded automatically when you "use Coro"
       and call the "new" constructor.

       new [initial count]
           Creates  a new semaphore object with the given initial lock count. The default lock count is 1, which
           means it is unlocked by default. Zero (or negative values)  are  also  allowed,  in  which  case  the
           semaphore is locked by default.

       $sem-&gt;count
           Returns  the current semaphore count. The semaphore can be down'ed without blocking when the count is
           strictly higher than 0.

       $sem-&gt;adjust ($diff)
           Atomically adds the amount given to the current semaphore count. If the count becomes positive, wakes
           up any waiters. Does not block if the count becomes negative, however.

       $sem-&gt;down
           Decrement the counter, therefore "locking" the semaphore. This method waits until  the  semaphore  is
           available if the counter is zero or less.

       $sem-&gt;wait
           Similar  to "down", but does not actually decrement the counter. Instead, when this function returns,
           a following call to "down" or "try" is guaranteed to succeed without blocking, until the next  thread
           switch ("cede" etc.).

           Note  that  using  "wait"  is much less efficient than using "down", so try to prefer "down" whenever
           possible.

       $sem-&gt;wait ($callback)
           If you pass a callback argument to "wait", it will not wait, but  immediately  return.  The  callback
           will be called as soon as the semaphore becomes available (which might be instantly), and gets passed
           the semaphore as first argument.

           The callback might "down" the semaphore exactly once, might wake up other threads, but is <u>NOT</u> allowed
           to block (switch to other threads).

       $sem-&gt;up
           Unlock the semaphore again.

       $sem-&gt;try
           Try  to  "down"  the semaphore. Returns true when this was possible, otherwise return false and leave
           the semaphore unchanged.

       $sem-&gt;waiters
           In scalar context, returns the number of threads waiting for this semaphore. Might accidentally cause
           WW3 if called in other contexts, so don't use these.

       $guard = $sem-&gt;guard
           This method calls "down" and then creates a guard object. When  the  guard  object  is  destroyed  it
           automatically calls "up".

</pre><h4><b>AUTHOR/SUPPORT/CONTACT</b></h4><pre>
          Marc A. Lehmann &lt;<a href="mailto:schmorp@schmorp.de">schmorp@schmorp.de</a>&gt;
          <a href="http://software.schmorp.de/pkg/Coro.html">http://software.schmorp.de/pkg/Coro.html</a>

perl v5.40.1                                       2025-03-21                                     <u><a href="../man3pm/Semaphore.3pm.html">Semaphore</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>