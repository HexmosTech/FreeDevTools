<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       sem_open — initialize and open a named semaphore

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/semaphore.h">semaphore.h</a>&gt;

       sem_t *sem_open(const char *<u>name</u>, int <u>oflag</u>, ...);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>sem_open</u>() function shall establish a connection between a named semaphore and a process. Following a
       call to <u>sem_open</u>() with semaphore name <u>name</u>, the process may reference the semaphore associated with <u>name</u>
       using  the  address returned from the call. This semaphore may be used in subsequent calls to <u>sem_wait</u>(),
       <u>sem_timedwait</u>(), <u>sem_trywait</u>(), <u>sem_post</u>(), and  <u>sem_close</u>().   The  semaphore  remains  usable  by  this
       process  until  the  semaphore is closed by a successful call to <u>sem_close</u>(), <b>_</b><u>exit</u>(), or one of the <u>exec</u>
       functions.

       The <u>oflag</u> argument controls whether  the  semaphore  is  created  or  merely  accessed  by  the  call  to
       <u>sem_open</u>().  The following flag bits may be set in <u>oflag</u>:

       O_CREAT   This  flag  is  used to create a semaphore if it does not already exist.  If O_CREAT is set and
                 the semaphore already exists, then O_CREAT  has  no  effect,  except  as  noted  under  O_EXCL.
                 Otherwise, <u>sem_open</u>() creates a named semaphore. The O_CREAT flag requires a third and a fourth
                 argument:  <u>mode</u>,  which is of type <b>mode_t</b>, and <u>value</u>, which is of type <b>unsigned</b>.  The semaphore
                 is created with an initial value of <u>value</u>.  Valid initial values for semaphores are  less  than
                 or equal to {SEM_VALUE_MAX}.

                 The user ID of the semaphore shall be set to the effective user ID of the process. The group ID
                 of  the  semaphore  shall be set to the effective group ID of the process; however, if the <u>name</u>
                 argument is visible in the file system, the group ID  may  be  set  to  the  group  ID  of  the
                 containing  directory.  The  permission  bits of the semaphore are set to the value of the <u>mode</u>
                 argument except those set in the file mode creation mask of the  process.  When  bits  in  <u>mode</u>
                 other than the file permission bits are specified, the effect is unspecified.

                 After  the  semaphore  named  <u>name</u>  has been created by <u>sem_open</u>() with the O_CREAT flag, other
                 processes can connect to the semaphore by calling <u>sem_open</u>() with the same value of <u>name</u>.

       O_EXCL    If O_EXCL and O_CREAT are set, <u>sem_open</u>() fails if the semaphore <u>name</u> exists. The check for the
                 existence of the semaphore and the creation of the semaphore if it does not  exist  are  atomic
                 with  respect to other processes executing <u>sem_open</u>() with O_EXCL and O_CREAT set. If O_EXCL is
                 set and O_CREAT is not set, the effect is undefined.

                 If flags other than O_CREAT and O_EXCL are specified in the  <u>oflag</u>  parameter,  the  effect  is
                 unspecified.

       The  <u>name</u>  argument  points  to  a  string  naming a semaphore object. It is unspecified whether the name
       appears in the file system and is visible to  functions  that  take  pathnames  as  arguments.  The  <u>name</u>
       argument  conforms  to  the  construction rules for a pathname, except that the interpretation of &lt;slash&gt;
       characters other than the leading &lt;slash&gt; character in  <u>name</u>  is  implementation-defined,  and  that  the
       length  limits  for the <u>name</u> argument are implementation-defined and need not be the same as the pathname
       limits {PATH_MAX} and {NAME_MAX}.  If <u>name</u> begins with the  &lt;slash&gt;  character,  then  processes  calling
       <u>sem_open</u>() with the same value of <u>name</u> shall refer to the same semaphore object, as long as that name has
       not  been  removed.  If  <u>name</u>  does  not  begin with the &lt;slash&gt; character, the effect is implementation-
       defined.

       If a process makes multiple successful calls to <u>sem_open</u>()  with  the  same  value  for  <u>name</u>,  the  same
       semaphore address shall be returned for each such successful call, provided that there have been no calls
       to  <u>sem_unlink</u>()  for  this  semaphore,  and  at  least  one previous successful <u>sem_open</u>() call for this
       semaphore has not been matched with a <u>sem_close</u>() call.

       References to copies of the semaphore produce undefined results.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, the <u>sem_open</u>() function shall return the address of the semaphore. Otherwise,
       it shall return a value of SEM_FAILED and set <u>errno</u> to indicate  the  error.  The  symbol  SEM_FAILED  is
       defined  in  the  <u>&lt;semaphore.h&gt;</u>  header.  No  successful  return  from  <u>sem_open</u>() shall return the value
       SEM_FAILED.

</pre><h4><b>ERRORS</b></h4><pre>
       If any of the following conditions occur, the <u>sem_open</u>() function shall return SEM_FAILED and  set  <u>errno</u>
       to the corresponding value:

       <b>EACCES</b> The  named  semaphore  exists  and  the  permissions  specified  by <u>oflag</u> are denied, or the named
              semaphore does not exist and permission to create the named semaphore is denied.

       <b>EEXIST</b> O_CREAT and O_EXCL are set and the named semaphore already exists.

       <b>EINTR</b>  The <u>sem_open</u>() operation was interrupted by a signal.

       <b>EINVAL</b> The <u>sem_open</u>() operation is not supported for the given name, or O_CREAT was  specified  in  <u>oflag</u>
              and <u>value</u> was greater than {SEM_VALUE_MAX}.

       <b>EMFILE</b> Too many semaphore descriptors or file descriptors are currently in use by this process.

       <b>ENFILE</b> Too many semaphores are currently open in the system.

       <b>ENOENT</b> O_CREAT is not set and the named semaphore does not exist.

       <b>ENOMEM</b> There is insufficient memory for the creation of the new named semaphore.

       <b>ENOSPC</b> There is insufficient space on a storage device for the creation of the new named semaphore.

       If  any of the following conditions occur, the <u>sem_open</u>() function may return SEM_FAILED and set <u>errno</u> to
       the corresponding value:

       <b>ENAMETOOLONG</b>
              The length of the <u>name</u> argument exceeds {_POSIX_PATH_MAX} on systems that do not support  the  XSI
              option  or  exceeds  {_XOPEN_PATH_MAX}  on XSI systems, or has a pathname component that is longer
              than  {_POSIX_NAME_MAX}  on  systems  that  do  not  support  the  XSI  option  or   longer   than
              {_XOPEN_NAME_MAX} on XSI systems.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       Early  drafts  required  an  error  return value of -1 with the type <b>sem_t</b> <b>*</b> for the <u>sem_open</u>() function,
       which is not guaranteed to be portable across implementations. The revised  text  provides  the  symbolic
       error code SEM_FAILED to eliminate the type conflict.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       A  future  version  might  require the <u>sem_open</u>() and <u>sem_unlink</u>() functions to have semantics similar to
       normal file system operations.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>semctl</u>(), <u>semget</u>(), <u>semop</u>(), <u>sem_close</u>(), <u>sem_post</u>(), <u>sem_timedwait</u>(), <u>sem_trywait</u>(), <u>sem_unlink</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;semaphore.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                      <u><a href="../man3POSIX/SEM_OPEN.3POSIX.html">SEM_OPEN</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>