<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ace::Browser::AceSubs - Subroutines for AceBrowser</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libace-perl">libace-perl_1.92-12build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Ace::Browser::AceSubs - Subroutines for AceBrowser

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Ace;
         use Ace::Browser::AceSubs;
         use CGI qw(:standard);
         use CGI::Cookie;

         my $obj = GetAceObject() || AceNotFound();
         PrintTop($obj);
         print $obj-&gt;asHTML;
         PrintBottom();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Ace::Browser::AceSubs exports a set of routines that are useful for creating search pages and displays
       for AceBrowser CGI pages. See <a href="http://stein.cshl.org/AcePerl/AceBrowser">http://stein.cshl.org/AcePerl/AceBrowser</a>.

       The following subroutines are exported by default:

         AceError
         AceMissing
         AceNotFound
         Configuration
         DoRedirect
         GetAceObject
         Object2URL
         ObjectLink
         OpenDatabase
         PrintTop
         PrintBottom
         Url

       The following subroutines are exported if explicitly requested:

         AceAddCookie
         AceInit
         AceHeader
         AceMultipleChoices
         AceRedirect
         DB_Name
         Footer
         Header
         ResolveUrl
         Style
         Toggle
         TypeSelector

       To load the default subroutines load the module with:

          use Ace::Browser::AceSubs;

       To bring in a set of optionally routines, load the module with:

          use Ace::Browser::AceSubs qw(AceInit AceRedirect);

       To bring in all the default subroutines, plus some of the optional ones:

          use Ace::Browser::AceSubs qw(:DEFAULT AceInit AceRedirect);

       There are two main types of AceBrowser scripts:

       display scripts
           These are called with the CGI parameters b&lt;name&gt; and b&lt;class&gt;, corresponding to the name and class of
           an AceDB object to display.  The subroutine <b>GetAceObject()</b> will return the requested object, or undef
           if the object does not exist.

           To retrieve the parameters, use the CGI.pm <b>param()</b> method:

             $name  = param('name');
             $class = param('class');

       search scripts
           These  are  not  called  with  any CGI parameters on their first invocation, but can define their own
           parameter lists by creating  fill-out  forms.   The  AceBrowser  system  remembers  the  last  search
           performed  by  a  search script in a cookie and regenerates the CGI parameters the next time the user
           selects that search script.

</pre><h4><b>SUBROUTINES</b></h4><pre>
       The following sections describe the exported subroutines.

       AceError($message)
           This subroutine will print out an error message and exit the script.  The  text  of  the  message  is
           taken from $message.

       <b>AceHeader()</b>
           This  function  prints the HTTP header and issues a number of cookies used for maintaining AceBrowser
           state.  It is not exported by default.

       AceAddCookie(@cookies)
           This subroutine, which must be called b&lt;after&gt; <b>OpenDatabase()</b>  and/or  <b>GetAceObject()</b>  and  b&lt;before&gt;
           <b>PrintTop()</b>,  will  add  one  or  more  cookies  to  the  outgoing  HTTP  headers  that are emitted by
           <b>AceHeader()</b>.  Cookies must be CGI::Cookie objects.

       <b>AceInit()</b>
           This subroutine initializes the AcePerl connection to  the  configured  database.   If  the  database
           cannot  be  opened,  it  generates  an  error  message and exits.  This subroutine is not exported by
           default, but is called by <b>PrintTop()</b> and <b>Header()</b> internally.

       AceMissing([$class,$name])
           This subroutine will print out an error message indicating that an object is present  in  AceDB,  but
           that the information the user requested is absent. It will then exit the script. This is infrequently
           encountered  when  following  XREFed objects. If the class and name of the object are not provided as
           arguments, they are taken from CGI's <b>param()</b> function.

       AceMultipleChoices($symbol,$report,$objects)
           This function is called when a search has recovered multiple objects and the user must make a  choice
           among  them.  The user is presented with an ordered list of the objects, and asked to click on one of
           them.

           The three arguments are:

              $symbol   The keyword or query string the user was searching
                        on, undef if none.

              $report   The symbolic name of the current display, or undef
                        if none.

              $objects  An array reference containing the Ace objects in
                        question.

           This subroutine is not exported by default.

       AceNotFound([$class,$name])
           This subroutine will print out an error message indicating that the requested object is  not  present
           in  AceDB,  even as a name. It will then exit the script. If the class and name of the object are not
           provided as arguments, they are taken from CGI's <b>param()</b> function.

       ($uri,$physical_path) = AcePicRoot($directory)
           This function returns the physical and URL paths of a temporary directory in which the pic script can
           write pictures.  Not exported by default.  Returns a two-element list containing the URL and physical
           path.

       AceRedirect($report,$object)
           This function redirects the user to a named display script for viewing an Ace object.   It  is  used,
           for example, to convert a request for a sequence into a request for a protein:

             $obj = GetAceObject();
             if ($obj-&gt;CDS) {
               my $protein = $obj-&gt;Corresponding_protein;
               AceRedirect('protein',$protein);
             }

           AceRedirect  must  be called b&lt;before&gt; <b>PrintTop()</b> or  <b>AceHeader()</b>.  It invokes <b>exit()</b>, so it will not
           return.

           This subroutine is not exported by default.  It differs from  <b>DoRedirect()</b>  in  that  it  displays  a
           message  to  the user for two seconds before it generates the new page. It also allows the display to
           be set explicitly, rather than determined automatically by the AceBrowser system.

       $configuration = <b>Configuration()</b>
           The <b>Configuration()</b> function returns the Ace::Browser::SiteDefs object for the current session.  From
           this object you can retrieve information from the configuration file.

       $name = <b>DB_Name()</b>
           This function returns the symbolic name of the current database, for example "default".

       DoRedirect($object)
           This subroutine immediately redirects to the default display for the Ace::Object indicated by $object
           and exits the script.  It must be called before <b>PrintTop()</b> or any  other  HTML-generating  code.   It
           differs from <b>AceRedirect()</b> in that it generates a fast redirect without alerting the user.

           This function is not exported by default.

       $footer = <b>Footer()</b>
           This  function  returns the contents of the footer as a string, but does not print it out.  It is not
           exported by default.

       $object = <b>GetAceObject()</b>
           This function is called by display scripts to return the Ace::Object.that the user  wishes  to  view.
           It  automatically  opens  or refreshes the database, and performs the request using the values of the
           "name" and "class" CGI variables.

           If a single object is found, the function returns it as the  function  result.   If  no  objects  are
           found, it returns undef.  If more than one object is found, the function invokes <b>AceMultipleChoices()</b>
           and exits the script.

       $html = <b>Header()</b>
           This  subroutine  returns the boilerplate at the top of the HTML page as a string, but does not print
           it out.  It is not exported by default.

       $url = Object2URL($object)
       $url = Object2URL($name,$class)
           In its single-argument form, this function takes an AceDB Object and returns an AceBrowser URL.   The
           URL chosen is determined by the configuration settings.

           It  is  also  possible  to pass Object2URL an object name and class, in the case that an AceDB object
           isn't available.

           The return value is a URL.

       $link = ObjectLink($object [,$link_text])
           This function converts an AceDB object into a hypertext link.  The first argument is an  Ace::Object.
           The  second,  optional  argument is the text to use for the link.  If not provided, the object's name
           becomes the link text.

           This function is used extensively to create  cross  references  between  Ace::Objects  on  AceBrowser
           pages.

           Example:

             my $author = $db-&gt;fetch(Author =&gt; 'Sulston JE');
             print ObjectLink($author,$author-&gt;Full_name);

           This  will  print out a link to a page that will display details on the author page.  The text of the
           link will be the value of the Full_name tag.

       $db = <b>OpenDatabase()</b>
           This  function  opens  the  Acedb  database  designated  by  the  configuration  file.   In   modperl
           environments,  this  function  caches database handles and reuses them, pinging and reopening them in
           the case of timeouts.

           This function is not exported by default.

       PrintTop($object,$class,$title,@html_headers)
           The <b>PrintTop()</b> function generates all the boilerplate at  the  top  of  a  typical  AceBrowser  page,
           including  the HTTP header information, the page title, the navigation bar for searches, the web site
           banner, the type selector for choosing alternative displays, and a level-one header.

           Call it with one or more arguments.  The arguments are:

             $object    An AceDB object.  The navigation bar and title will be
                        customized for the object.

             $class     If no AceDB object is available, then you can pass
                        a string containing the AceDB class that this page is
                        designed to display.

             $title     A title to use for the HTML page and the first level-one
                        header.  If not provided, a generic title "Report for
                        Object" is generated.

             @html_headers  Additional HTML headers to pass to the the CGI.pm
                        start_html.

       <b>PrintBottom()</b>
           The <b>PrintBottom()</b> function outputs all the boilerplate at the bottom of a  typical  AceBrowser  page.
           If  a  user-defined  footer  is  present  in the configuration file, that is printed.  Otherwise, the
           method prints a horizontal rule followed by links to the site home page, the AcePerl home  page,  the
           privacy policy, and the feedback page.

       $hashref = <b>Style()</b>
           This  subroutine  returns  a  hashref  containing  a  reference  to the configured stylesheet, in the
           following format:

             { -src =&gt; '/ace/stylesheets/current_stylesheet.css' }

           This hash is suitable for passing to the -style argument of CGI.pm's <b>start_html()</b>  function,  or  for
           use  as  an  additional header in <b>PrintTop()</b>.  You may add locally-defined stylesheet elements to the
           hash before calling <b>start_html()</b>.  See the pic script for an example of how this is done this.

           This function is not exported by default.

       $url = ResolveUrl($url,$param)
           Given a URL and a set of parameters, this function does the  necessary  magic  to  add  the  symbolic
           database name to the end of the URL (if needed) and then tack the parameters onto the end.

           A typical call is:

             $url = ResolveUrl('/cgi-bin/ace/generic/tree','name=fred;class=Author');

           This function is not exported by default.

       $boolean = Toggle($section,[$label,$object_count,$add_plural,$add_count])
       ($link,$bool) = Toggle($section,$label,$object_count,$add_plural,$add_count)
           The  <b>Toggle()</b>  subroutine  makes  it  easy  to create HTML sections that open and close when the user
           selects a toggle icon (a yellow triangle).

           <b>Toggle()</b> can be used to manage multiple collapsible HTML sections,  but  each  section  must  have  a
           unique name.  The required first argument is the section name.  Optional arguments are:

             $label         The text of the generated link, for example "sequence"

             $object_count  The number of objects that opening the section will reveal

             $add_plural    If true, the label will be pluralized when
                            appropriate

             $add_count     If true, the label will have the object count added
                            when appropriate

           In  a  scalar  context,  <b>Toggle()</b>  prints  the  link  HTML and returns a boolean flag.  A true result
           indicates that the section is expanded and should be generated.  A false result  indicates  that  the
           section is collapsed.

           In  a  list  context,  <b>Toggle()</b>  returns a two-element list.  The first element is the HTML link that
           expands and contracts the section.  The second element  is  a  boolean  that  indicates  whether  the
           section is currently open or closed.

           This example indicates typical usage:

             my $sequence = GetAceObject();
             print "sequence name = ",$sequence,"\n";
             print "sequence clone = ",$sequence-&gt;Clone,"\n";
             if (Toggle('dna','Sequence DNA')) {
                 print $sequence-&gt;asDNA;
             }

           An alternative way to do the same thing:

             my $sequence = GetAceObject();
             print "sequence name = ",$sequence,"\n";
             print "sequence clone = ",$sequence-&gt;Clone,"\n";
             my ($link,$open) = Toggle('dna','Sequence DNA');
             print $link;
             print $sequence-&gt;asDNA if $open;

       $html = TypeSelector($name,$class)
           This  subroutine  generates  the HTML for the type selector navigation bar.  The links in the bar are
           dynamically generated based on  the  values  of  $name  and  $class.   This  function  is  called  by
           <b>PrintTop()</b>.  It is not exported by default.

       $url = Url($display,$params)
           Given a symbolic display name, such as "tree" and a set of parameters, this function looks up its URL
           and then calls <b>ResolveUrl()</b> to create a single Url.

           When  hard-coding  relative URLs into AceBrowser scripts, it is important to pass them through <b>Url()</b>.
           The reason for this is that AceBrowser may need to attach the database name to the URL  in  order  to
           identify it.

           Example:

             my $url = Url('../sequence_dump',"name=$name;long_dump=yes");
             print a({-href=&gt;$url},'Dump this sequence');

</pre><h4><b>BUGS</b></h4><pre>
       Please report them.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Ace::Object, Ace::Browser::SiteDefs, Ace::Browsr::SearchSubs, the README.ACEBROWSER file.

</pre><h4><b>AUTHOR</b></h4><pre>
       Lincoln Stein &lt;<a href="mailto:lstein@cshl.org">lstein@cshl.org</a>&gt;.

       Copyright (c) 2001 Cold Spring Harbor Laboratory

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See DISCLAIMER.txt for disclaimers of warranty.

perl v5.40.0                                       2024-10-20                         <u>Ace::Browser::<a href="../man3pm/AceSubs.3pm.html">AceSubs</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>