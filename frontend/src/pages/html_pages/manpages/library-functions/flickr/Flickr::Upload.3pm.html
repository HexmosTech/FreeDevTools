<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flickr::Upload - Upload images to "flickr.com"</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libflickr-upload-perl">libflickr-upload-perl_1.60-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Flickr::Upload - Upload images to "flickr.com"

</pre><h4><b>SYNOPSIS</b></h4><pre>
               use Flickr::Upload;

               my $ua = Flickr::Upload-&gt;new(
                       {
                               'key' =&gt; '90909354',
                               'secret' =&gt; '37465825'
                       });
               $ua-&gt;upload(
                       'photo' =&gt; '/tmp/image.jpg',
                       'auth_token' =&gt; $auth_token,
                       'tags' =&gt; 'me myself eye',
                       'is_public' =&gt; 1,
                       'is_friend' =&gt; 1,
                       'is_family' =&gt; 1
               ) or die "Failed to upload /tmp/image.jpg";

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Upload an image to flickr.com.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
       Using Flickr Authentication
                   my $ua = Flickr::Upload-&gt;new(
                           {
                                   'key' =&gt; '90909354',
                                   'secret' =&gt; '37465825'
                           });

       Using OAuth Authentication
                   my $ua = Flickr::Upload-&gt;new(
                           {
                                   'consumer_key' =&gt; 'your_api_key',
                                   'consumer_secret' =&gt; 'your_app_secret',
                           });

       Retrieve saved configuration (possibly including OAuth access token)
                   my $config_file = "$ENV{HOME}/saved-flickr.st";
                   my $ua = Flickr::Upload-&gt;import_storable_config($config_file);

       Instantiates   a   Flickr::Upload   instance,  using  either  the  Flickr  Authentication  or  the  OAuth
       Authentication.  The  "key"  or  "consumer_key"  argument  is  your  API  key   and   the   "secret"   or
       "consumer_secret"  argument  is  the  API  secret associated with it. To get an API key and secret, go to
       &lt;https://www.flickr.com/services/api/key.gne&gt;.

       The resulting Flickr::Upload instance is a subclass of Flickr::API and can be used for any  other  Flickr
       API calls.  As such, Flickr::Upload is also a subclass of LWP::UserAgent.

   <b>upload</b>
               my $photoid = $ua-&gt;upload(
                       'photo' =&gt; '/tmp/image.jpg',
                       'auth_token' =&gt; $auth_token,
                       'tags' =&gt; 'me myself eye',
                       'is_public' =&gt; 1,
                       'is_friend' =&gt; 1,
                       'is_family' =&gt; 1
                       'async' =&gt; 0,
               );

       Taking  a  Flickr::Upload instance $ua as an argument, this is basically a direct interface to the Flickr
       Photo Upload API. Required parameters are "photo" and, when using  Flickr  Authentication,  "auth_token".
       Note  that  the "auth_token" must have been issued against the API key and secret used to instantiate the
       uploader.

       When using OAuth, "auth_token" is not required, and the Flickr::Upload instance must  instead  contain  a
       valid Net::OAuth access token which can be added by calling the Flickr::API "oauth_access_token" method.

       Returns  the  resulting identifier of the uploaded photo on success, "undef" on failure. According to the
       API   documentation,   after   an   upload   the    user    should    be    directed    to    the    page
       &lt;https://www.flickr.com/tools/uploader_edit.gne?ids=$photoid&gt;.

       If  the  "async"  option  is  non-zero, the photo will be uploaded asynchronously and a successful upload
       returns a ticket identifier. See &lt;https://www.flickr.com/services/api/upload.async.html&gt;. The caller  can
       then  periodically  poll  for  a  photo  id  using  the "check_upload" method. Note that photo and ticket
       identifiers aren't necessarily numeric.

   <b>check_upload</b>
               my %status2txt = (0 =&gt; 'not complete', 1 =&gt; 'completed', 2 =&gt; 'failed');
               my @rc = $ua-&gt;check_upload( @ticketids );
               for( @rc ) {
                       print "Ticket $_-&gt;{id} has $status2txt{$_-&gt;{complete}}\n";
                       print "\tPhoto id is $_-&gt;{photoid}\n" if exists $_-&gt;{photoid};
               }

       This function will check the status of one or more asynchronous uploads. A list of ticket identifiers are
       provided (@ticketids) and each is checked. This is  basically  just  a  wrapper  around  the  Flickr  API
       "flickr.photos.upload.checkTickets" method.

       On  success, a list of hash references is returned. Each hash contains a "id" (the ticket id), "complete"
       and, if completed, "photoid" members. "invalid" may also be returned.  Status codes (for "complete")  are
       as  documented  at  &lt;https://www.flickr.com/services/api/upload.async.html&gt;  and,  actually, the returned
       fields are identical to those listed in the "ticket" tag  of  the  response.   The  returned  list  isn't
       guaranteed to be in any particular order.

       This function polls a web server, so avoid calling it too frequently.

   <b>make_upload_request</b>
               my $req = $uploader-&gt;make_upload_request(
                       'auth_token' =&gt; '82374523',
                       'tags' =&gt; 'me myself eye',
                       'is_public' =&gt; 1,
                       'is_friend' =&gt; 1,
                       'is_family' =&gt; 1
               );
               $req-&gt;header( 'X-Greetz' =&gt; 'hi cal' );
               my $resp = $ua-&gt;request( $req );

       Creates  an  HTTP::Request  object  loaded  with all the flick upload parameters. This will also sign the
       request, which means you won't be able to mess any further with the upload request parameters.

       Takes all the same parameters as upload, except that the photo argument isn't required. This in  intended
       so  that the caller can include it by messing directly with the HTTP content (via $DYNAMIC_FILE_UPLOAD or
       the HTTP::Message class, among other things).  See  "t/"  directory  from  the  source  distribution  for
       examples.

       Returns  a  standard  HTTP::Response  POST object. The caller can manually do the upload or just call the
       upload_request function.

   <b>upload_request</b>
               my $photoid = upload_request( $ua, $request );

       Taking (at least) LWP::UserAgent and HTTP::Request objects as arguments, this executes  the  request  and
       processes the result as a flickr upload. It's assumed that the request looks a lot like something created
       with make_upload_request. Note that the request must be signed according to the Flickr API authentication
       rules.

       Returns  the  resulting identifier of the uploaded photo (or ticket for asynchronous uploads) on success,
       "undef" on failure. According to the API documentation, after an upload the user should  be  directed  to
       the page &lt;https://www.flickr.com/tools/uploader_edit.gne?ids=$photoid&gt;.

   <b>file_length_in_encoded_chunk</b>
               $HTTP::Request::Common::DYNAMIC_FILE_UPLOAD = 1;
               my $photo = 'image.jpeg';
               my $photo_size = (stat($photo))[7];
               my $req = $ua-&gt;make_upload_request( ... );
               my $gen = $req-&gt;content();
               die unless ref($gen) eq "CODE";

               my $state;
               my $size;

               $req-&gt;content(
                       sub {
                               my $chunk = &amp;$gen();

                               $size += Flickr::Upload::file_length_in_encoded_chunk(\$chunk, \$state, $photo_size);

                               warn "$size bytes have now been uploaded";

                               return $chunk;
                       }
               );

               $rc = $ua-&gt;upload_request( $req );

       This  subroutine  is  tells  you  how  much of a chunk in a series of variable size multipart HTTP chunks
       contains a single file being uploaded given a reference to the current chunk,  a  reference  to  a  state
       variable that lives between calls, and the size of the file being uploaded.

       It  can  be  used  used  along  with  HTTP::Request::Common's $HTTP::Request::Common::DYNAMIC_FILE_UPLOAD
       facility to implement upload progress bars or other upload monitors, see flickr_upload  for  a  practical
       example and <u>t/progress_request.t</u> for tests.

   <b>photosets_create</b>
               Calls Flickr's "flickr.photosets.create" method,
               to create a new Set.

               The set will use the PrimaryPhotoID as the thumbnail photo.

               returns: UNDEF on failure, PhotosetID on success.

               my $photoset_id = $ua-&gt;photosets_create( title =&gt; 'title',
                                              description =&gt; 'description',
                                              primary_photo_id =&gt; ID,
                                              auth_token =&gt; AUTH_TOKEN );

               $ua-&gt;photosets_addphoto ( photoset_id =&gt; $photoset_id,
                                         photo_id =&gt; ID );

   <b>photosets_addphoto</b>
               Calls Flickr's "flickr.photosets.addPhoto" method,
               to add a (existing) photo to an existing set.

               returns: UNDEF on failure, TRUE on success.

               my $photoset_id = $ua-&gt;photosets_create( title =&gt; 'title',
                                              description =&gt; 'description',
                                              primary_photo_id =&gt; ID,
                                              auth_token =&gt; AUTH_TOKEN );

               $ua-&gt;photosets_addphoto ( photoset_id =&gt; $photoset_id,
                                         photo_id =&gt; ID );

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       &lt;https://www.flickr.com/services/api/&gt;

       Flickr::API

</pre><h4><b>AUTHORS</b></h4><pre>
       Christophe Beauregard, <a href="mailto:cpb@cpan.org">cpb@cpan.org</a>

       Ævar Arnfjörð Bjarmason, &lt;<a href="mailto:avar@cpan.org">avar@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This module is not an official Flickr.com (or Ludicorp, or Yahoo) service.

       Copyright (C) 2004-2008 by Christophe Beauregard and 2008-2009 by Ævar Arnfjörð Bjarmason

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself, either Perl version 5.8.3 or, at your option, any later version of Perl 5 you may have available.

perl v5.34.0                                       2022-06-14                                <u>Flickr::<a href="../man3pm/Upload.3pm.html">Upload</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>