<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>regcomp, regexec, regerror, regfree - POSIX regex functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       regcomp, regexec, regerror, regfree - POSIX regex functions

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/regex.h">regex.h</a>&gt;</b>

       <b>int</b> <b>regcomp(regex_t</b> <b>*restrict</b> <u>preg</u><b>,</b> <b>const</b> <b>char</b> <b>*restrict</b> <u>regex</u><b>,</b>
                   <b>int</b> <u>cflags</u><b>);</b>
       <b>int</b> <b>regexec(const</b> <b>regex_t</b> <b>*restrict</b> <u>preg</u><b>,</b> <b>const</b> <b>char</b> <b>*restrict</b> <u>string</u><b>,</b>
                   <b>size_t</b> <u>nmatch</u><b>,</b> <b>regmatch_t</b> <u>pmatch</u><b>[_Nullable</b> <b>restrict</b> <b>.</b><u>nmatch</u><b>],</b>
                   <b>int</b> <u>eflags</u><b>);</b>

       <b>size_t</b> <b>regerror(int</b> <u>errcode</u><b>,</b> <b>const</b> <b>regex_t</b> <b>*_Nullable</b> <b>restrict</b> <u>preg</u><b>,</b>
                   <b>char</b> <u>errbuf</u><b>[_Nullable</b> <b>restrict</b> <b>.</b><u>errbuf_size</u><b>],</b>
                   <b>size_t</b> <u>errbuf_size</u><b>);</b>
       <b>void</b> <b>regfree(regex_t</b> <b>*</b><u>preg</u><b>);</b>

       <b>typedef</b> <b>struct</b> <b>{</b>
           <b>size_t</b>    <b>re_nsub;</b>
       <b>}</b> <b>regex_t;</b>

       <b>typedef</b> <b>struct</b> <b>{</b>
           <b>regoff_t</b>  <b>rm_so;</b>
           <b>regoff_t</b>  <b>rm_eo;</b>
       <b>}</b> <b>regmatch_t;</b>

       <b>typedef</b> /* ... */  <b>regoff_t;</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>Compilation</b>
       <b>regcomp</b>()  is  used to compile a regular expression into a form that is suitable for subsequent <b>regexec</b>()
       searches.

       On success, the pattern buffer at <u>*preg</u> is initialized.  <u>regex</u> is a null-terminated string.   The  locale
       must be the same when running <b>regexec</b>().

       After  <b>regcomp</b>()  succeeds,  <u>preg-&gt;re_nsub</u> holds the number of subexpressions in <u>regex</u>.  Thus, a value of
       <u>preg-&gt;re_nsub</u> + 1 passed as <u>nmatch</u> to <b>regexec</b>() is sufficient to capture all matches.

       <u>cflags</u> is the bitwise OR of zero or more of the following:

       <b>REG_EXTENDED</b>
              Use POSIX Extended Regular Expression syntax when interpreting <u>regex</u>.  If  not  set,  POSIX  Basic
              Regular Expression syntax is used.

       <b>REG_ICASE</b>
              Do  not  differentiate case.  Subsequent <b>regexec</b>() searches using this pattern buffer will be case
              insensitive.

       <b>REG_NOSUB</b>
              Report only overall success.  <b>regexec</b>() will use only <u>pmatch</u> for <b>REG_STARTEND</b>, ignoring <u>nmatch</u>.

       <b>REG_NEWLINE</b>
              Match-any-character operators don't match a newline.

              A nonmatching list (<b>[^...]</b>) not containing a newline does not match a newline.

              Match-beginning-of-line operator (<b>^</b>)  matches  the  empty  string  immediately  after  a  newline,
              regardless of whether <u>eflags</u>, the execution flags of <b>regexec</b>(), contains <b>REG_NOTBOL</b>.

              Match-end-of-line  operator  (<b>$</b>) matches the empty string immediately before a newline, regardless
              of whether <u>eflags</u> contains <b>REG_NOTEOL</b>.

   <b>Matching</b>
       <b>regexec</b>() is used to match a null-terminated string against the compiled pattern buffer in  <u>*preg</u>,  which
       must  have  been  initialised  with <b>regexec</b>().  <u>eflags</u> is the bitwise OR of zero or more of the following
       flags:

       <b>REG_NOTBOL</b>
              The match-beginning-of-line  operator  always  fails  to  match  (but  see  the  compilation  flag
              <b>REG_NEWLINE</b>  above).   This  flag  may  be  used when different portions of a string are passed to
              <b>regexec</b>() and the beginning of the string should not be interpreted as the beginning of the line.

       <b>REG_NOTEOL</b>
              The match-end-of-line operator always fails to match (but see  the  compilation  flag  <b>REG_NEWLINE</b>
              above).

       <b>REG_STARTEND</b>
              Match  [<u>string</u>  <u>+</u>  <u>pmatch[0].rm_so</u>,  <u>string</u>  <u>+</u>  <u>pmatch[0].rm_eo</u>)  instead  of  [<u>string</u>,  <u>string</u>  <u>+</u>
              <u>strlen(string)</u>).  This allows matching embedded NUL bytes and avoids a <b><a href="../man3/strlen.3.html">strlen</a></b>(3)  on  known-length
              strings.   If any matches are returned (<b>REG_NOSUB</b> wasn't passed to <b>regcomp</b>(), the match succeeded,
              and <u>nmatch</u> &gt; 0), they overwrite <u>pmatch</u> as usual, and the match offsets remain relative  to  <u>string</u>
              (not <u>string</u> <u>+</u> <u>pmatch[0].rm_so</u>).  This flag is a BSD extension, not present in POSIX.

   <b>Match</b> <b>offsets</b>
       Unless  <b>REG_NOSUB</b>  was  passed  to  <b>regcomp</b>(),  it  is possible to obtain the locations of matches within
       <u>string</u>: <b>regexec</b>() fills <u>nmatch</u> elements of <u>pmatch</u> with  results:  <u>pmatch[0]</u>  corresponds  to  the  entire
       match,  <u>pmatch[1]</u>  to  the  first  subexpression,  etc.  If there were more matches than <u>nmatch</u>, they are
       discarded; if fewer, unused elements of <u>pmatch</u> are filled with <b>-1</b>s.

       Each returned valid (non-<b>-1</b>) match corresponds to the range [<u>string</u> <u>+</u> <u>rm_so</u>, <u>string</u> <u>+</u> <u>rm_eo</u>).

       <u>regoff_t</u> is a signed integer type capable of storing the largest value that can be stored  in  either  an
       <u>ptrdiff_t</u> type or a <u>ssize_t</u> type.

   <b>Error</b> <b>reporting</b>
       <b>regerror</b>()  is  used  to  turn  the error codes that can be returned by both <b>regcomp</b>() and <b>regexec</b>() into
       error message strings.

       If <u>preg</u> isn't a null pointer, <u>errcode</u> must be the latest error returned from an operation on <u>preg</u>.

       If <u>errbuf_size</u> isn't 0, up to <u>errbuf_size</u> bytes are copied to <u>errbuf</u>; the error string  is  always  null-
       terminated, and truncated to fit.

   <b>Freeing</b>
       <b>regfree</b>()  deinitializes the pattern buffer at <u>*preg</u>, freeing any associated memory; <u>*preg</u> must have been
       initialized via <b>regcomp</b>().

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>regcomp</b>() returns zero for a successful compilation or an error code for failure.

       <b>regexec</b>() returns zero for a successful match or <b>REG_NOMATCH</b> for failure.

       <b>regerror</b>() returns the size of the buffer required to hold the string.

</pre><h4><b>ERRORS</b></h4><pre>
       The following errors can be returned by <b>regcomp</b>():

       <b>REG_BADBR</b>
              Invalid use of back reference operator.

       <b>REG_BADPAT</b>
              Invalid use of pattern operators such as group or list.

       <b>REG_BADRPT</b>
              Invalid use of repetition operators such as using '*' as the first character.

       <b>REG_EBRACE</b>
              Un-matched brace interval operators.

       <b>REG_EBRACK</b>
              Un-matched bracket list operators.

       <b>REG_ECOLLATE</b>
              Invalid collating element.

       <b>REG_ECTYPE</b>
              Unknown character class name.

       <b>REG_EEND</b>
              Nonspecific error.  This is not defined by POSIX.

       <b>REG_EESCAPE</b>
              Trailing backslash.

       <b>REG_EPAREN</b>
              Un-matched parenthesis group operators.

       <b>REG_ERANGE</b>
              Invalid use of the range operator; for example, the ending point of the range occurs prior to  the
              starting point.

       <b>REG_ESIZE</b>
              Compiled  regular  expression requires a pattern buffer larger than 64 kB.  This is not defined by
              POSIX.

       <b>REG_ESPACE</b>
              The regex routines ran out of memory.

       <b>REG_ESUBREG</b>
              Invalid back reference to a subexpression.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌──────────────────────────────────────────────────────────────────────┬───────────────┬────────────────┐
       │ <b>Interface</b>                                                            │ <b>Attribute</b>     │ <b>Value</b>          │
       ├──────────────────────────────────────────────────────────────────────┼───────────────┼────────────────┤
       │ <b>regcomp</b>(), <b>regexec</b>()                                                 │ Thread safety │ MT-Safe locale │
       ├──────────────────────────────────────────────────────────────────────┼───────────────┼────────────────┤
       │ <b>regerror</b>()                                                           │ Thread safety │ MT-Safe env    │
       ├──────────────────────────────────────────────────────────────────────┼───────────────┼────────────────┤
       │ <b>regfree</b>()                                                            │ Thread safety │ MT-Safe        │
       └──────────────────────────────────────────────────────────────────────┴───────────────┴────────────────┘

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001.

       Prior to POSIX.1-2008, <u>regoff_t</u> was required to be capable of storing  the  largest  value  that  can  be
       stored in either an <u>off_t</u> type or a <u>ssize_t</u> type.

</pre><h4><b>CAVEATS</b></h4><pre>
       <u>re_nsub</u>  is  only required to be initialized if <b>REG_NOSUB</b> wasn't specified, but all known implementations
       initialize it regardless.

       Both <u>regex_t</u> and <u>regmatch_t</u> may (and do) have more members, in any order.  Always reference them by name.

</pre><h4><b>EXAMPLES</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/regex.h">regex.h</a>&gt;

       #define ARRAY_SIZE(arr) (sizeof((arr)) / sizeof((arr)[0]))

       static const char *const str =
               "1) John Driverhacker;\n2) John Doe;\n3) John Foo;\n";
       static const char *const re = "John.*o";

       int main(void)
       {
           static const char *s = str;
           regex_t     regex;
           regmatch_t  pmatch[1];
           regoff_t    off, len;

           if (regcomp(&amp;regex, re, REG_NEWLINE))
               exit(EXIT_FAILURE);

           printf("String = \"%s\"\n", str);
           printf("Matches:\n");

           for (unsigned int i = 0; ; i++) {
               if (regexec(&amp;regex, s, ARRAY_SIZE(pmatch), pmatch, 0))
                   break;

               off = pmatch[0].rm_so + (s - str);
               len = pmatch[0].rm_eo - pmatch[0].rm_so;
               printf("#%zu:\n", i);
               printf("offset = %jd; length = %jd\n", (intmax_t) off,
                       (intmax_t) len);
               printf("substring = \"%.*s\"\n", len, s + pmatch[0].rm_so);

               s += pmatch[0].rm_eo;
           }

           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/grep.1.html">grep</a></b>(1), <b><a href="../man7/regex.7.html">regex</a></b>(7)

       The glibc manual section, <u>Regular</u> <u>Expressions</u>

Linux man-pages 6.9.1                              2024-06-15                                           <u><a href="../man3/regex.3.html">regex</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>