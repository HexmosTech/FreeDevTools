<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wiki::Toolkit::Search::Lucy - Use Lucy to search your Wiki::Toolkit wiki.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libwiki-toolkit-perl">libwiki-toolkit-perl_0.86-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Wiki::Toolkit::Search::Lucy - Use Lucy to search your Wiki::Toolkit wiki.

</pre><h4><b>SYNOPSIS</b></h4><pre>
         my $search = Wiki::Toolkit::Search::Lucy-&gt;new( path =&gt; "/var/lucy/wiki" );
         my %wombat_nodes = $search-&gt;search_nodes( "wombat" );

       Provides Lucy-based search methods for Wiki::Toolkit.

</pre><h4><b>METHODS</b></h4><pre>
       <b>new</b>
             my $search = Wiki::Toolkit::Search::Lucy-&gt;new(
                 path =&gt; "/var/lucy/wiki",
                 metadata_fields =&gt; [ "category", "locale", "address" ],
                 boost =&gt; { title =&gt; 2.5 },
                 content_munger =&gt; sub {
                                       my $content = shift;
                                       $content =~ s/secretword//gs;
                                       return $content;
                                   },
                 node_filter =&gt; sub {
                                    my %args = @_;
                                    return $args{content} =~ /REDIRECT/ ? 0 : 1;
                                   },
             );

           The  "path"  parameter  is  mandatory.  "path"  must be a directory for storing the indexed data.  It
           should exist and be writeable.

           The other four parameters are optional:

           "metadata_fields" should be a reference to an array of metadata field names.

           "boost" should be a reference to a hash in which the keys are fields and the values are numbers - see
           Lucy::Plan::FieldType for more info.  Only "title" is currently supported as a field value.

           "content_munger" should be a reference to a subroutine which takes the node content as a  string  and
           returns another string which will be indexed in place of the original content.

           "node_filter"  should  be  a  reference  to  a  subroutine  which  takes  the named arguments "node",
           "content", and "metadata" and returns either true (yes, index this node) or false  (no,  don't  index
           this node).

           Content munging takes place BEFORE node filtering.

       <b>index_node</b>
             $search-&gt;index_node( $node, $content, $metadata );

           Indexes or reindexes the given node in the search engine indexes.  You must supply both the node name
           and its content, but metadata is optional.

           If  you  do  supply  metadata, it should be a reference to a hash where the keys are the names of the
           metadata fields and the values are either scalars or references to arrays of scalars.  For example:

             $search-&gt;index_node( "Calthorpe Arms", "Nice pub in Bloomsbury.",
                                  { category =&gt; [ "Pubs", "Bloomsbury" ],
                                    postcode =&gt; "WC1X 8JR" } );

           Only those metadata fields which were supplied to -&gt;new will be taken notice  of  -  others  will  be
           silently ignored.

           If  "content_munger"  has been supplied to "new" as a subroutine reference, then $content will be run
           through this before indexing.

           If "node_filter" has been supplied to "new" as a subroutine reference, then  this  will  be  used  to
           check whether the node should be indexed or ignored.

           Content munging takes place BEFORE node filtering.

       <b>search_nodes</b>
             # Find all the nodes which contain the word 'expert'.
             my %results = $search-&gt;search_nodes( "expert" );

           Returns a (possibly empty) hash whose keys are the node names and whose values are the scores.

           Defaults to AND searches (if $and_or is not supplied, or is anything other than "OR" or "or").

           Searches are case-insensitive.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Wiki::Toolkit, Wiki::Toolkit::Search::Base.

perl v5.32.0                                       2021-01-04                   <u>Wiki::Toolkit::Search::<a href="../man3pm/Lucy.3pm.html">Lucy</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>