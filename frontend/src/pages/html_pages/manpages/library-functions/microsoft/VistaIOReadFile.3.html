<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VistaIOReadFile - read a Vista data file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvistaio-dev">libvistaio-dev_1.2.19-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       VistaIOReadFile - read a Vista data file

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;stdio&gt;</b>
       <b>#include</b> <b>&lt;vistaio.h&gt;</b>

       <b>VistaIOAttrList</b> <b>VistaIOReadFile</b> <b>(</b><u>file</u><b>,</b> <u>filter</u><b>)</b>
              <b>FILE</b> <b>*</b><u>file</u><b>;</b>
              <b>VistaIOReadFileFilterProc</b> <b>*</b><u>filter</u><b>;</b>

       <b>typedef</b> <b>VistaIOBoolean</b> <b>VistaIOReadFileFilterProc</b> <b>(VistaIOBundle,</b> <b>VistaIORepnKind);</b>

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>file</u>      Specifies the open stream from which the data file should be read.

       <u>filter</u>    May  specify a function that determines which attributes' binary data is read from the file, or
                 it may be <b>NULL</b> to indicate that all binary data should be read.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>VistaIOReadFile</b> reads the contents of a Vista data file. It returns a list of the attributes found in the
       file. Attribute values in that  list  will  have  been  converted  to  internal  form,  as  described  by
       <b><a href="../man3/VistaIOattribute.3.html">VistaIOattribute</a></b>(3) and <b><a href="../man3/VistaIOtype.3.html">VistaIOtype</a></b>(3).

       With  the  <u>filter</u> argument you may supply a function that gets to decide for each attribute value that is
       an object whether or not that object's binary data should be read. This mechanism allows you to avoid the
       expense of reading binary data that is not of interest (e.g., image pixel values when images are  not  of
       concern).  However,  you  need  only  supply  a  filter  function if you are particularly concerned about
       efficiency.  Your filter function should be declared:

              <b>VistaIOBoolean</b> <u>MyFilter</u> <b>(</b><u>bundle</u><b>,</b> <u>repn</u><b>)</b>
                     <b>VistaIOBundle</b> <u>bundle</u><b>;</b>
                     <b>VistaIORepnKind</b> <u>repn</u><b>;</b>

       Your filter function will be called once for each object encountered at any level in the file. It will be
       passed a <b>VistaIOBundle</b> representing the object (including its type name and attribute list, but  not  its
       binary  data),  and  the  <u>repn</u>  value  obtained  by looking up its type name (i.e., the value returned by
       <b><a href="../man3/VistaIOLookupType.3.html">VistaIOLookupType</a></b>(3) on the type name, which could be <b>VistaIOUnknownRepn</b>). The object's binary data  will
       be  read only if the filter function returns <b>TRUE</b>. If it returns <b>FALSE</b>, the object will be represented in
       the attribute list as a <b>VistaIOBundle</b>, without binary data — it will not be converted  to  internal  form
       (e.g.,  not to a <b>VistaIOImage</b>). If no filter function is supplied (i.e., <u>filter</u> is <b>NULL</b>), <b>VistaIOReadFile</b>
       will read all binary data associated with all objects.

       For backwards compatibility <b>VistaIOReadFile</b> will recognize and read the contents  of  a  UBC  image  file
       format  (IFF)  file.  If  the  first  character  read  from  the  stream  is  ``I'', <b>VistaIOReadFile</b> uses
       <b>VistaIOReadUbcIff</b> to read a single UBC IFF image. The image is returned as a <b>VistaIOImage</b> attribute value
       in a list containing a single attribute. In this case, the <u>filter</u> argument has no effect.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>VistaIOReadData</b> returns an attribute list representing the file's  contents,  or  <b>NULL</b>  if  an  error  is
       encountered. In the case of an error, the stream may not have been completely read.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/VistaIOReadObjects.3.html">VistaIOReadObjects</a></b>(3), <b><a href="../man3/VistaIOReadUbcIff.3.html">VistaIOReadUbcIff</a></b>(3), <b><a href="../man3/stdio.3.html">stdio</a></b>(3),
       <b><a href="../man3/VistaIOBundle.3.html">VistaIOBundle</a></b>(3), <b><a href="../man3/VistaIOattribute.3.html">VistaIOattribute</a></b>(3), <b><a href="../man3/VistaIOtype.3.html">VistaIOtype</a></b>(3)

</pre><h4><b>NOTES</b></h4><pre>
       Data is read from the stream sequentially, permitting the stream to be a pipe. No rewind is performed ei‐
       ther before reading or after.

</pre><h4><b>DIAGNOSTIC</b></h4><pre>
       ``EOF encountered in <u>name</u> attribute.''
              The end-of-file was encountered unexpectedly while reading the value of the named attribute.

       ``File continues beyond expected EOF.''
              The end-of-file wasn't encountered immediately after all expected binary data.

       ``Invalid <u>name</u> attribute.''
              The  named  attribute  is  encoded  incorrectly in the stream. It may, for example, be missing the
              ``<b>:</b>'' that should separate its name and value.

       ``Missing {.''
              The ``<b>{</b>'' marking the start of an attribute list is missing.

       ``Missing }.''
              The ``<b>}</b>'' marking the end of an attribute list is missing.

       ``<u>name</u> attribute has data but not length.''
              The named attribute's value is an object whose attribute list contains a <b>data</b> attribute but not  a
              <b>length</b> attribute. Both attributes must be present to specify binary data. (A similar diagnostic is
              produced if there is a <b>length</b> attribute but no <b>data</b> attribute.)

       ``<u>name</u> attribute's <u>attr</u> attribute incorrect.''
              The named attribute's value is an object whose attribute list indicates it has binary data. Howev‐
              er,  its  <b>data</b>  attribute specifies an offset too early in the binary data portion of the file, or
              its <b>data</b> or <b>length</b> attribute has a non-integer value.

       ``Read from stream failed.''
              An attempt to read a block of binary data failed, perhaps because of a premature end-of-file.

       ``Vista data file delimiter not found.''
              The <b>FORMFEED</b> <b>NEWLINE</b> sequence terminating the attribute list  portion  of  the  data  file  wasn't
              found.

       ``Vista data file isn't version 2.''
              The data file's header indicates a file format version other than 2, the current version.

</pre><h4><b>AUTHOR</b></h4><pre>
       Art Pope &lt;<a href="mailto:pope@cs.ubc.ca">pope@cs.ubc.ca</a>&gt;

       Adaption to vistaio: Gert Wollny &lt;<a href="mailto:gw.fossdev@gmail.com">gw.fossdev@gmail.com</a>&gt;

VistaIO Version 1.2.14                           26 January 1994                              <u><a href="../man3/VistaIOReadFile.3.html">VistaIOReadFile</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>