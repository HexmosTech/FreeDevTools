<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmGetArchiveEnd, pmGetHighResArchiveEnd - locate logical end of file for a set of archives</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmGetArchiveEnd</b>, <b>pmGetHighResArchiveEnd</b> - locate logical end of file for a set of archives

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>

       <b>int</b> <b>pmGetArchiveEnd(struct</b> <b>timeval</b> <b>*</b><u>tp</u><b>);</b>
       <b>int</b> <b>pmGetHighResArchiveEnd(struct</b> <b>timespec</b> <b>*</b><u>tp</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Assuming  the  current  PMAPI  context  is  associated  with  a  set  of  archives,  <b>pmGetArchiveEnd</b>  and
       <b>pmGetHighResArchiveEnd</b> will attempt to find the logical end of file (after the last  complete  record  in
       the  set  of  archives),  and return the last recorded timestamp via <u>tp</u>.  This timestamp may be passed to
       <b><a href="../man3/pmSetMode.3.html">pmSetMode</a></b>(3) or <b><a href="../man3/pmSetModeHighRes.3.html">pmSetModeHighRes</a></b>(3) to reliably position the context at the last  valid  archive  record,
       e.g. in preparation for subsequent reading in reverse chronological order.

       For  archives  that  are  not concurrently being written, the physical end of file and the logical end of
       file are co-incident.  However if an archive is  being  written  by  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1)  at  the  same  time  an
       application is trying to read the archive, the logical end of file may be before the physical end of file
       due to write buffering that is not aligned with the logical record boundaries.

       <b>pmGetArchiveEnd</b>  and  <b>pmGetHighResArchiveEnd</b>  return  an  error  less than zero if the context is neither
       valid, nor associated with a set of archives, or the set of archives is seriously corrupted.   Otherwise,
       the  return  value is 0 if there has been no change of state since the last call, or 1 if the logical end
       of file has advanced since the last call.

       In the absence of an error, the result returned via <u>tp</u> is well-defined.

       Both <b>pmGetArchiveEnd</b> and <b>pmGetHighResArchiveEnd</b> preserve the positioning state of the archive file  prior
       to this function call.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>PM_ERR_NOCONTEXT</b>
              the current PMAPI context is either invalid, or not associated with a set of archives

       <b>PM_ERR_LOGREC</b>
              the set of archives is sufficiently damaged, that not a single valid record can be found

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment  variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used by
       PCP.  On each installation, the file <u>/etc/pcp.conf</u> contains the local values for  these  variables.   The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).
       Values for these variables may be obtained programmatically using the <b><a href="../man3/pmGetConfig.3.html">pmGetConfig</a></b>(3) function.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3),      <b><a href="../man3/pmFetch.3.html">pmFetch</a></b>(3),      <b><a href="../man3/pmFetchArchive.3.html">pmFetchArchive</a></b>(3),      <b><a href="../man3/pmFetchHighRes.3.html">pmFetchHighRes</a></b>(3),      <b><a href="../man3/pmFetchHighResArchive.3.html">pmFetchHighResArchive</a></b>(3),
       <b><a href="../man3/pmGetArchiveLabel.3.html">pmGetArchiveLabel</a></b>(3),  <b><a href="../man3/pmGetConfig.3.html">pmGetConfig</a></b>(3),  <b><a href="../man3/pmGetHighResArchiveLabel.3.html">pmGetHighResArchiveLabel</a></b>(3),  <b><a href="../man3/pmSetMode.3.html">pmSetMode</a></b>(3),  <b><a href="../man3/pmSetModeHighRes.3.html">pmSetModeHighRes</a></b>(3),
       <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5) and <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5).

Performance Co-Pilot                                   PCP                                    <u><a href="../man3/PMGETARCHIVEEND.3.html">PMGETARCHIVEEND</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>