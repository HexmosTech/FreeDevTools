<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmaRewriteMeta - try to change the version of an archive metadata record</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp-archive1-dev">libpcp-archive1-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmaRewriteMeta</b> - try to change the version of an archive metadata record

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>
       <b>#include</b> <b>&lt;pcp/libpcp.h&gt;</b>
       <b>#include</b> <b>&lt;pcp/archive.h&gt;</b>

       <b>int</b> <b>pmaRewriteMeta(__pmLogCtl</b> <b>*</b><u>inlcp</u><b>,</b> <b>__pmLogCtl</b> <b>*</b><u>outlcp</u><b>,</b> <b>__int32_t</b> <b>*</b><u>rbuf</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp_archive</b> <b>-lpcp</b>

</pre><h4><b>CAVEAT</b></h4><pre>
       This documentation is intended for internal Performance Co-Pilot (PCP) developer use.

       These  interfaces  are  not part of the PCP APIs that are guaranteed to remain fixed across releases, and
       they may not work, or may provide different semantics at some point in the future.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A physical metadata record from the input archive identified by <u>inlcp</u> is passed in via <u>rbuf</u> and  this  is
       reformatted  if  required  to produce the equivalent metadata record for the output archive identified by
       <u>outlcp</u>.

       Combined with the input and output archive versions, the type of the metadata record (as  extracted  from
       <u>rbuf</u>) is used to decide if; for some record types and version changes no rewriting is required.

       <b>pmaRewriteMeta</b>  is  intended  to  be  used  in  cases  where  the archive version of <u>inlcp</u> and <u>outlcp</u> are
       different.  The only sane choice of archive versions today is <b>PM_LOG_VERS02</b> for <u>inlcp</u>  and  <b>PM_LOG_VERS03</b>
       for <u>outlcp</u>, which would be requesting a rewrite from archive version 2 format to archive version 3 format
       (as only versions 2 and 3 are currently supported).

       If  rewriting takes place the old <u>rbuf</u> will have been free'd and a new <u>rbuf</u> allocated with <b><a href="../man3/malloc.3.html">malloc</a></b>(3).  It
       is the caller's responsibility to make sure this  potential  free-and-allocate  will  be  safe,  e.g.  no
       dangling references into the contents of <u>rbuf</u>, or pass in a copy of the record if it is precious.

</pre><h4><b>DIAGNOSTICS</b> <b>AND</b> <b>RETURN</b> <b>VALUES</b></h4><pre>
       In several places, fatal errors will trigger an error message and force the application to exit.

       If  there  is  no  defined  translation  for the versions of <u>inlcp</u> and <u>outlcp</u> then <b>pmaRewriteMeta</b> returns
       <b>PM_ERR_APPVERSION</b> (a slight perversion of this error code).

       If no rewrite is performed, the return value is 0, otherwise a return value of 1 indicates a rewrite  has
       taken place and <u>rbuf</u> has been reallocated.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/free.3.html">free</a></b>(3), <b><a href="../man3/malloc.3.html">malloc</a></b>(3), <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3), and <b><a href="../man3/pmaRewriteData.3.html">pmaRewriteData</a></b>(3).

Performance Co-Pilot                                   PCP                                     <u><a href="../man3/PMAREWRITEMETA.3.html">PMAREWRITEMETA</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>