<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arch::Registry - manage registered archives, search archives on the web</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libarch-perl">libarch-perl_0.5.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Arch::Registry - manage registered archives, search archives on the web

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Arch::Registry;
           my $registry = Arch::Registry-&gt;new;

           my %archive_locations = $registry-&gt;registered_archives;
           $registry-&gt;register_archive('<a href="http://john.com/archives/main">http://john.com/archives/main</a>');
           $registry-&gt;unregister_archive('<a href="mailto:john@mail.com--tux">john@mail.com--tux</a>');

           %archive_locations = $registry-&gt;supermirror_archives;
           die $registry-&gt;web_error if $registry-&gt;web_error;

           my @john_versions = @{
               $registry-&gt;supermirror_archive_versions-&gt;{'<a href="mailto:john@mail.com--tux">john@mail.com--tux</a>')
           };

           my $archives = $registry-&gt;search_supermirror('.*', '--cset-gui--');
           die $registry-&gt;web_error unless defined $archives;

           my $versions = $registry-&gt;search_supermirror('john@', '^tla\b', 1);
           print map { "$_\n" } @$versions;  # print <a href="mailto:john@mail.com--tux">john@mail.com--tux</a>/tla...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class provides the way to register and unregister GNU Arch archives for the caller user and list all
       registered archives. It also provides the way to search the supermirror (currently
       mirrors.sourcecontrol.net) by archive name or archive/category/branch/version regexp.

</pre><h4><b>METHODS</b></h4><pre>
       The following class methods are available:

       <b>new</b>, <b>register_archive</b>, <b>unregister_archive</b>, <b>registered_archives</b>, <b>set_web_cache</b>, <b>flag_web_cache</b>,
       <b>supermirror_archives</b>, <b>supermirror_archive_versions</b>, <b>search_supermirror</b>, <b>web_error</b>.

       <b>new</b> Construct Arch::Registry object.

       <b>register_archive</b> <u>location</u> [<u>archive</u>]
           Register archive at the given <u>location</u> and optional <u>archive</u> (if missing then the location is actually
           accessed to find the archive name).  Returns true on success.

       <b>unregister_archive</b> <u>archive</u>
           Unregister <u>archive</u>. Returns true on success.

       <b>registered_archives</b>
           Returns  a  hash  (or  hashref  in  scalar  context) of registered archives, that is pairs <u>archive</u> =&gt;
           <u>location</u>.

       <b>set_web_cache</b> [ <u>named-values</u> ]
           Define the web cache to use with operations on the supermirror.

           The keys of <u>named-values</u> are <u>dir</u> (the web cache directory) and <u>ttl</u> (time  to  live  in  minutes).  If
           <u>named-values</u> is empty or misses <u>dir</u>, or <u>dir</u> does not exist, the cache is unset.

           This  method  has  a side effect of forgetting memoized real-web-or-cache content fetches. So you may
           call it with or without parameters to reset the memoized  values,  although  this  should  rarely  be
           needed.

       <b>flag_web_cache</b> [<u>value</u>]
           Turn on or off the web cache depending on the parameter.

           <u>value</u>  may  be  "enabled",  "disabled", "nowrite" and "noread". Additionally, the false <u>value</u> will be
           taken as "disabled", the true <u>value</u> as "enabled".

       <b>supermirror_archives</b>
           Returns a hash (or hashref in scalar context) of archives mirrored on the supermirror, that is  pairs
           <u>archive</u> =&gt; <u>location</u>.

       <b>supermirror_archive_versions</b>
           Returns  a  hashref  of  archives  mirrored  on the supermirror and all their versions, that is pairs
           <u>archive</u> =&gt; [ <u>version</u>, .. ].

       <b>search_supermirror</b>
       <b>search_supermirror</b> <u>archive_regexp</u>
       <b>search_supermirror</b> <u>archive_regexp</u> <u>version_regexp</u>
       <b>search_supermirror</b> <u>archive_regexp</u> <u>version_regexp</u> <u>return_versions</u>
           Search the archives (and possibly their branches/versions) by <u>archive</u> and <u>version</u> regular expressions
           given.

           If  <u>return_versions</u>  is  unset,  returns  arrayref  that  is  all  matching  [  <u>archive</u>,  ..  ].   If
           <u>return_versions</u> is set to 'joined', returns arrayref that is all matching [ <u>archive</u>/<u>version</u>, .. ]. If
           <u>return_versions</u>  is set to 'hashref', returns hashref similar to <b>supermirror_archive_versions</b> that is
           all matching { <u>archive</u> =&gt; [ <u>version</u>, .. ], ... }.

           If <b>web_error</b> occurred, returns undef.

           <u>archive_regexp</u> defaults to "any", <u>version_regexp</u>  defaults  to  "any",  <u>return_versions</u>  defaults  to
           false.

       <b>web_error</b>
           Returns the string containing the error while fetching one or another supermirror url (the last one).
           Returns undef if no error occured.

</pre><h4><b>BUGS</b></h4><pre>
       Waiting for your reports.

</pre><h4><b>AUTHORS</b></h4><pre>
       Mikhael Goikhman (<a href="mailto:migo@homemail.com--Perl-GPL">migo@homemail.com--Perl-GPL</a>/arch-perl--devel).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For more information, see tla, Arch::Util, Arch::LiteWeb.

perl v5.20.2                                       2005-05-13                                <u>Arch::<a href="../man3pm/Registry.3pm.html">Registry</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>