<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>keyctl_search - search a keyring for a key</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libkeyutils-dev">libkeyutils-dev_1.6.3-6ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       keyctl_search - search a keyring for a key

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;keyutils.h&gt;</b>

       <b>long</b> <b>keyctl_search(key_serial_t</b> <u>keyring</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>type</u><b>,</b>
       <b>const</b> <b>char</b> <b>*</b><u>description</u><b>,</b> <b>key_serial_t</b> <u>destination</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>keyctl_search</b>() recursively searches the <u>keyring</u> for a key of the specified <u>type</u> and <u>description</u>.

       If  found,  the key will be attached to the <u>destination</u> keyring (if given), and its serial number will be
       returned.

       The source keyring must grant <b>search</b> permission to the caller, and for a key to be found,  it  must  also
       grant <b>search</b> permission to the caller.  Child keyrings will be only be recursively searched if they grant
       <b>search</b> permission to the caller as well.

       If  the  destination  keyring  is  <b>zero</b>, no attempt will be made to forge a link to the key, and just the
       serial number will be returned.

       If the destination keyring is given, then the link may only be formed if the found key grants the  caller
       <b>link</b> permission and the destination keyring grants the caller <b>write</b> permission.

       If the search is successful, and if the destination keyring already contains a link to a key that matches
       the specified <u>type</u> and <u>description</u>, then that link will be replaced by a link to the found key.

       The  source  keyring  and  destination keyring serial numbers may be those of valid keyrings to which the
       caller has appropriate permission, or they may be special keyring IDs:

       <b>KEY_SPEC_THREAD_KEYRING</b>
              This specifies the caller's thread-specific keyring.

       <b>KEY_SPEC_PROCESS_KEYRING</b>
              This specifies the caller's process-specific keyring.

       <b>KEY_SPEC_SESSION_KEYRING</b>
              This specifies the caller's session-specific keyring.

       <b>KEY_SPEC_USER_KEYRING</b>
              This specifies the caller's UID-specific keyring.

       <b>KEY_SPEC_USER_SESSION_KEYRING</b>
              This specifies the caller's UID-session keyring.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success <b>keyctl_search</b>() returns the serial number of the key it found.  On error, the value <b>-1</b> will be
       returned and <u>errno</u> will have been set to an appropriate error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>ENOKEY</b> One of the keyrings doesn't exist, no key was found by the search, or the only key  found  by  the
              search was a negative key.

       <b>ENOTDIR</b>
              One of the keyrings is a valid key that isn't a keyring.

       <b>EKEYEXPIRED</b>
              One of the keyrings has expired, or the only key found was expired.

       <b>EKEYREVOKED</b>
              One of the keyrings has been revoked, or the only key found was revoked.

       <b>ENOMEM</b> Insufficient memory to expand the destination keyring.

       <b>EDQUOT</b> The  key  quota  for  this  user  would  be  exceeded  by  creating a link to the found key in the
              destination keyring.

       <b>EACCES</b> The source keyring didn't grant <b>search</b> permission, the  destination  keyring  didn't  grant  <b>write</b>
              permission or the found key didn't grant <b>link</b> permission to the caller.

</pre><h4><b>LINKING</b></h4><pre>
       Although  this  is a Linux system call, it is not present in <u>libc</u> but can be found rather in <u>libkeyutils</u>.
       When linking, <b>-lkeyutils</b> should be specified to the linker.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/keyctl.1.html">keyctl</a></b>(1), <b><a href="../man2/add_key.2.html">add_key</a></b>(2), <b><a href="../man2/keyctl.2.html">keyctl</a></b>(2), <b><a href="../man2/request_key.2.html">request_key</a></b>(2), <b><a href="../man3/keyctl.3.html">keyctl</a></b>(3), <b><a href="../man7/keyrings.7.html">keyrings</a></b>(7), <b><a href="../man7/keyutils.7.html">keyutils</a></b>(7)

Linux                                              4 May 2006                                   <u><a href="../man3/KEYCTL_SEARCH.3.html">KEYCTL_SEARCH</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>