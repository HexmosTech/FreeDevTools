<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File::KDBX::Key::YubiKey - A Yubico challenge-response key</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libfile-kdbx-perl">libfile-kdbx-perl_0.906-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       File::KDBX::Key::YubiKey - A Yubico challenge-response key

</pre><h4><b>VERSION</b></h4><pre>
       version 0.906

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use File::KDBX::Key::YubiKey;
           use File::KDBX;

           my $yubikey = File::KDBX::Key::YubiKey-&gt;new(%attributes);

           my $kdbx = File::KDBX-&gt;load_file('database.kdbx', $yubikey);
           # OR
           my $kdbx = File::KDBX-&gt;load_file('database.kdbx', ['password', $yubikey]);

           # Scan for USB YubiKeys:
           my ($first_key, @other_keys) = File::KDBX::Key::YubiKey-&gt;scan;

           my $response = $first_key-&gt;challenge('hello');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A File::KDBX::Key::YubiKey is a type of challenge-response key. This module follows the KeePassXC-style
       challenge-response implementation, so this might not work at all with incompatible challenge-response
       implementations (e.g. KeeChallenge).

       Inherets methods and attributes from File::KDBX::Key::ChallengeResponse.

       To use this type of key to secure a File::KDBX database, you also need to install the YubiKey
       Personalization Tool (CLI) &lt;https://developers.yubico.com/yubikey-personalization/&gt; and configure at
       least one of the slots on your YubiKey for HMAC-SHA1 challenge response mode. You can use the YubiKey
       Personalization Tool GUI to do this.

       See &lt;https://keepassxc.org/docs/#faq-yubikey-howto&gt; for more information.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>device</b>
           $device = $key-&gt;device($device);

       Get or set the device number, which is the index number starting and incrementing from zero assigned to
       the YubiKey device. If there is only one detected YubiKey device, its number is 0.

       Defaults to 0.

   <b>slot</b>
           $slot = $key-&gt;slot($slot);

       Get or set the slot number, which is a number starting and incrementing from one. A YubiKey can have
       multiple slots (often just two) which can be independently configured.

       Defaults to 1.

   <b>timeout</b>
           $timeout = $key-&gt;timeout($timeout);

       Get or set the timeout, in seconds. If the challenge takes longer than this, the challenge will be
       cancelled and an error is thrown.

       If the timeout is zero, the challenge is non-blocking; an error is thrown if the challenge would block.
       If the timeout is negative, timeout is disabled and the challenge will block forever or until a response
       is received.

       Defaults to 0.

   <b>pre_challenge</b>
           $callback = $key-&gt;pre_challenge($callback);

       Get or set a callback function that will be called immediately before any challenge is issued. This might
       be used to prompt the user so they are aware that they are expected to interact with their YubiKey.

           $key-&gt;pre_challenge(sub {
               my ($key, $challenge) = @_;

               if ($key-&gt;requires_interaction) {
                   say 'Please touch your key device to proceed with decrypting your KDBX file.';
               }
               say 'Key: ', $key-&gt;name;
               if (0 &lt; $key-&gt;timeout) {
                   say 'Key access request expires: ' . localtime(time + $key-&gt;timeout);
               }
           });

       You can throw from this subroutine to abort the challenge. If the challenge is part of loading or dumping
       a KDBX database, the entire load/dump will be aborted.

   <b>post_challenge</b>
           $callback = $key-&gt;post_challenge($callback);

       Get or set a callback function that will be called immediately after a challenge response has been
       received.

       You can throw from this subroutine to abort the challenge. If the challenge is part of loading or dumping
       a KDBX database, the entire load/dump will be aborted.

   <b>ykchalresp</b>
           $program = $key-&gt;ykchalresp;

       Get or set the <b><a href="../man1/ykchalresp.1.html">ykchalresp</a></b>(1) program name or filepath. Defaults to $ENV{YKCHALRESP} or "ykchalresp".

   <b>ykinfo</b>
           $program = $key-&gt;ykinfo;

       Get or set the <b><a href="../man1/ykinfo.1.html">ykinfo</a></b>(1) program name or filepath. Defaults to $ENV{YKINFO} or "ykinfo".

</pre><h4><b>METHODS</b></h4><pre>
   <b>scan</b>
           @keys = File::KDBX::Key::YubiKey-&gt;scan(%options);

       Find connected, configured YubiKeys that are capable of responding to a challenge. This can take several
       seconds.

       Options:

       •   "limit" - Scan for only up to this many YubiKeys (default: 4)

       Other options are passed as-is as attributes to the key constructors of found keys (if any).

   <b>serial</b>
       Get the device serial number, as a number, or "undef" if there is no such device.

   <b>version</b>
       Get the device firmware version (or "undef").

   <b>touch_level</b>
       Get the "touch level" value for the device associated with this key (or "undef").

   <b>vendor_id</b>
   <b>product_id</b>
       Get the vendor ID or product ID for the device associated with this key (or "undef").

   <b>name</b>
           $name = $key-&gt;name;

       Get a human-readable string identifying the YubiKey (or "undef").

   <b>requires_interaction</b>
       Get  whether  or  not  the  key  requires  interaction (e.g. a touch) to provide a challenge response (or
       "undef").

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       •   "YKCHALRESP" - Path to the <b><a href="../man1/ykchalresp.1.html">ykchalresp</a></b>(1) program

       •   "YKINFO" - Path to the <b><a href="../man1/ykinfo.1.html">ykinfo</a></b>(1) program

       •   "YKCHALRESP_FLAGS" - Extra arguments to the <b><a href="../man1/ykchalresp.1.html">ykchalresp</a>(1)</b> program

       •   "YKINFO_FLAGS" - Extra arguments to the <b><a href="../man1/ykinfo.1.html">ykinfo</a>(1)</b> program

       <b>YubiKey</b> searches for these programs in the same way perl typically searches for  executables  (using  the
       "PATH" environment variable on many platforms). If the programs aren't installed normally, or if you want
       to override the default programs, these environment variables can be used.

</pre><h4><b>CAVEATS</b></h4><pre>
       This  doesn't work yet on Windows, probably. The hangup is pretty silly: IPC. Theoretically it would work
       if "run_forked" from IPC::Cmd worked in Windows, but it probably doesn't. I spent a couple hours applying
       various quirks to IPC::Open3 and IPC::Cmd implementations but never  quite  got  it  to  worked  reliably
       without deadlocks. Maybe I'll revisit this later. Hit me up so I know if there's interest.

       It  would  also  be  possible  to implement this as an XS module that incorporated ykcore, using libusb-1
       which would probably make it more portable with Windows. Perhaps if I get around to it.

</pre><h4><b>BUGS</b></h4><pre>
       Please    report    any    bugs     or     feature     requests     on     the     bugtracker     website
       &lt;https://github.com/chazmcgarvey/File-KDBX/issues&gt;

       When  submitting  a  bug  or request, please include a test-file or a patch to an existing test-file that
       illustrates the bug or desired feature.

</pre><h4><b>AUTHOR</b></h4><pre>
       Charles McGarvey &lt;<a href="mailto:ccm@cpan.org">ccm@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2022 by Charles McGarvey.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.40.1                                       2025-05-04                      <u>File::KDBX::Key::<a href="../man3pm/YubiKey.3pm.html">YubiKey</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>