<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>memcached_cas - Atomic Compare and Swap</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmemcached-dev">libmemcached-dev_1.1.4-1.1build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       memcached_cas - Atomic Compare and Swap

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;libmemcached/memcached.h&gt;</b>
              Compile and link with -lmemcached

       <u>memcached_return_t</u> <b>memcached_cas(</b><u>memcached_st</u> <b>*ptr,</b> <b>const</b> <b>char</b> <b>*key,</b> <b>size_t</b> <b>key_length,</b> <b>const</b> <b>char</b>
       <b>*value,</b> <b>size_t</b> <b>value_length,</b> <b>time_t</b> <b>expiration,</b> <b>uint32_t</b> <b>flags,</b> <b>uint64_t</b> <b>cas)</b>

       <u>memcached_return_t</u> <b>memcached_cas_by_key(</b><u>memcached_st</u> <b>*ptr,</b> <b>const</b> <b>char</b> <b>*group_key,</b> <b>size_t</b>
       <b>group_key_length,</b> <b>const</b> <b>char</b> <b>*key,</b> <b>size_t</b> <b>key_length,</b> <b>const</b> <b>char</b> <b>*value,</b> <b>size_t</b> <b>value_length,</b> <b>time_t</b>
       <b>expiration,</b> <b>uint32_t</b> <b>flags,</b> <b>uint64_t</b> <b>cas)</b>

              <b>Parameters</b>

                     • <b>ptr</b> -- pointer to an initialized <u>memcached_st</u> struct

                     • <b>group_key</b> -- key namespace

                     • <b>group_key_length</b> -- length of the <u>group_key</u> without any trailing zero

                     • <b>key</b> -- the key to check

                     • <b>key_length</b> -- the length of the <u>key</u> without any trailing zero

                     • <b>value</b> -- the value to set

                     • <b>value_length</b> -- the length of the <u>value</u> without any trailing zero

                     • <b>expiration</b> -- expiration time as unix timestamp or relative time in seconds

                     • <b>flags</b> -- 16 bit flags

                     • <b>cas</b> -- the <b>cas</b> value to compare

              <b>Returns</b>
                     <u>memcached_return_t</u> indicating success

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>memcached_cas()</u>  overwrites  data in the server as long as the <b>cas</b> value is still the same in the server.
       You can get the <b>cas</b> value  of  a  result  by  calling  <u>memcached_result_cas()</u>  on  a  <u>memcached_result_st</u>
       structure.

       <u>memcached_cas_by_key()</u> method behaves in a similar way as the non key methods.  The difference is that it
       uses the <b>group_key</b> parameter to map objects to particular servers.

       <u>memcached_cas()</u> is tested with the <u>MEMCACHED_BEHAVIOR_USE_UDP</u> behavior enabled. However, when using these
       operations  with  this behavior on, there are limits to the size of the payload being sent to the server.
       The reason for these limits is that the Memcached Server does not allow multi-datagram requests  and  the
       current  server  implementation  sets a datagram size to 1400 bytes. Due to protocol overhead, the actual
       limit of the user supplied data is less than 1400 bytes and depends on the protocol in use  as,  well  as
       the  operation being executed. When running with the binary protocol, <u>MEMCACHED_BEHAVIOR_BINARY_PROTOCOL</u>,
       the size of the key,value, flags and expiry combined may not exceed 1368 bytes.  When  running  with  the
       ASCII  protocol, the exact limit fluctuates depending on which function is being executed and whether the
       function is a cas operation or not. For non-cas ASCII set operations,  there  are  at  least  1335  bytes
       available to split among the key, key_prefix, and value; for cas ASCII operations there are at least 1318
       bytes available to split among the key, key_prefix and value. If the total size of the command, including
       overhead, exceeds 1400 bytes, a <u>MEMCACHED_WRITE_FAILURE</u> will be returned.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       All  methods  return a value of type <u>memcached_return_t</u>.  On success the value will be <u>MEMCACHED_SUCCESS</u>.
       Use <u>memcached_strerror()</u> to translate this value to a printable string.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/memcached.1.html">memcached</a>(1)</b> <b><a href="../man3/libmemcached.3.html">libmemcached</a>(3)</b> <b><a href="../man3/memcached_strerror.3.html">memcached_strerror</a>(3)</b> <b><a href="../man3/memcached_set.3.html">memcached_set</a>(3)</b> <b><a href="../man3/memcached_append.3.html">memcached_append</a>(3)</b>  <b><a href="../man3/memcached_add.3.html">memcached_add</a>(3)</b>
       <b><a href="../man3/memcached_prepend.3.html">memcached_prepend</a>(3)</b> <b><a href="../man3/memcached_replace.3.html">memcached_replace</a>(3)</b>

1.1                                               Mar 31, 2024                                  <u><a href="../man3/MEMCACHED_CAS.3.html">MEMCACHED_CAS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>