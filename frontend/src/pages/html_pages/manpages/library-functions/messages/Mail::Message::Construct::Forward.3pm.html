<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Message::Construct::Forward - forwarding a Mail::Message</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-message-perl">libmail-message-perl_3.017-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Message::Construct::Forward - forwarding a Mail::Message

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my Mail::Message $forward = $message-&gt;forward(To =&gt; 'you');
        $forward-&gt;send;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Complex functionality on Mail::Message objects is implemented in different files which are autoloaded.
       This file implements the functionality related to creating forwarded messages.

</pre><h4><b>METHODS</b></h4><pre>
   <b>Constructing</b> <b>a</b> <b>message</b>
       $obj-&gt;<b>forward</b>(%options)
           Forward the content of this message.  The body of the message to be forwarded is encapsulated in some
           accompanying  text  (if  you  have  no wish for that, than "bounce" is your choice).  A Mail::Message
           object is returned on success.

           You may forward a whole message, but also message parts.  You  may  wish  to  overrule  some  of  the
           default header settings for the reply immediately, or you may do that later with "set" on the header.

           When  a  multi-part  body is encountered, and the message is included to ATTACH, the parts which look
           like signatures will be removed.  If only one message  remains,  it  will  be  the  added  as  single
           attachment,  otherwise  a  nested  multipart  will  be the result.  The value of this option does not
           matter, as long as it is present.  See "Mail::Message::Body::Multipart".

            -Option    --Default
             Bcc         undef
             Cc          undef
             Date        &lt;now&gt;
             From        &lt;'to' in current&gt;
             Message-ID  &lt;uniquely generated&gt;
             Subject     forwardSubject()
             To          &lt;required&gt;
             body        undef
             include     &lt;if body then 'NO' else C&lt;'INLINE'&gt;&gt;
             preamble    constructed from prelude and postlude
             signature   undef

           Bcc =&gt; ADDRESSES
             Receivers of blind carbon copies: their names will not be published to other message receivers.

           Cc =&gt; ADDRESSES
             The carbon-copy receivers, by default none.

           Date =&gt; DATE
             The date to be used in the message sent.

           From =&gt; ADDRESSES
             Your identification, by default taken from the "To" field of the source message.

           Message-ID =&gt; STRING
             Supply a STRING as specific message-id for the forwarded message.  By default, one is generated for
             you.  If there are no angles around your id, they will be added.

           Subject =&gt; STRING|CODE
             Force the subject line to the specific STRING, or the result of the subroutine specified  by  CODE.
             The  subroutine  will  be  called passing the subject of the original message as only argument.  By
             default, the <b>forwardSubject()</b> method is used.

           To =&gt; ADDRESSES
             The destination of your  message.  Obligatory.   The  ADDRESSES  may  be  specified  as  string,  a
             Mail::Address object, or as array of Mail::Address objects.

           body =&gt; OBJECT
             If  you  specify  a  fully prepared body OBJECT, it will be used as forwarded message contents.  In
             this case, only the headers are constructed for you.

           include =&gt; 'NO'|'INLINE'|'ATTACH'|'ENCAPSULATE'
             Must the message where this is a reply to be included in the message?  When "INLINE" is given,  you
             may pass the options of <b>forwardInline()</b> as well.

             In  many  applications, the forward option "as attachment" results in a structure which is produced
             when this option is set to "ENCAPSULATE".  Their default behavior is usually "INLINE".

             It is only possible to inline textual messages, therefore binary or multi-part messages will always
             be enclosed as attachment.  Read the details in section "Creating a forward"..

           preamble =&gt; STRING|BODY
             Part which is attached before the  forwarded  message.   If  no  preamble  is  given,  then  it  is
             constructed  from  the prelude and postlude.  When these are also not present, you will still get a
             one liner: the result of <b>forwardPrelude()</b>

           signature =&gt; BODY|MESSAGE
             The signature to be added in case of a multi-part forward.  The mime-type  of  the  signature  body
             should  indicate  this  is a used as such.  However, in INLINE mode, the body will be taken, a line
             containing '-- ' added before it, and added behind the epilogue.

       $obj-&gt;<b>forwardAttach</b>(%options)
           Forward the message as <u>flat</u> attachment to the specified "preamble".   You  can  specify  all  options
           available  to  forward(), although a "preamble" which is provided as body object is required, and any
           specified "body" is ignored.

            -Option  --Default
             preamble  &lt;required&gt;

           preamble =&gt; BODY|PART
       $obj-&gt;<b>forwardEncapsulate</b>(%options)
           Like <b>forwardAttach()</b>, but in this case the original message is first encapsulated as  nested  message
           in a Mail::Message::Body::Nested, and then joint into a multipart.

           You  can  specify all options available to forward(), although a "preamble" which is provided as body
           object is required, and any specified "body" is ignored.  Signatures are  not  stripped.   Signatures
           are not stripped.

            -Option  --Default
             preamble  &lt;required&gt;

           preamble =&gt; BODY|PART
       $obj-&gt;<b>forwardInline</b>(%options)
           This  method  is  equivalent in behavior to <b>forward()</b> with the option "include" set to 'INLINE'.  You
           can specify most of the fields which are available to <b>forward()</b> except "include" and "body".

            -Option         --Default
             is_attached      "[The forwarded message is attached]\n"
             max_signature    10
             postlude         undef
             prelude          undef
             quote            undef
             strip_signature  qr/^--\s/

           is_attached =&gt; STRING
             A forward on binary messages can not be inlined.  Therefore, they are automatically translated into
             an attachment, as made by <b>forwardAttach()</b>.  The obligatory preamble option to that  method  may  be
             specified  as  option  to  this  method,  to  be used in case of such a forward of a binary, but is
             otherwise constructed from the prelude, the value of this option, and the postlude.

           max_signature =&gt; INTEGER
             Passed to Mail::Message::Body::<a href="../manmax_lines/stripSignature.max_lines.html">stripSignature</a>(max_lines).  Only effective for single-part messages.

           postlude =&gt; BODY
             The line(s) which to be added after the quoted reply lines.  Create a  body  for  it  first.   This
             should  not include the signature, which has its own option.  The signature will be added after the
             postlude when the forwarded message is "INLINE"d.

           prelude =&gt; BODY
             The line(s) which will be added before the quoted forwarded lines.  If nothing  is  specified,  the
             result  of  the  <b>forwardPrelude()</b>  method  is  used.  When "undef" is specified, no prelude will be
             added.

           quote =&gt; CODE|STRING
             Mangle the lines of an "INLINE"d reply with CODE, or by prepending a  STRING  to  each  line.   The
             routine specified by CODE is called when the line is in $_.

             By  default,  nothing  is added before each line.  This option is processed after the body has been
             decoded.

           strip_signature =&gt; REGEXP|STRING|CODE
             Remove  the  signature  of  the   sender.    The   value   of   this   parameter   is   passed   to
             Mail::Message::Body::stripSignature(pattern),   unless  the  source  text  is  not  included.   The
             signature is stripped from the message before quoting.

       $obj-&gt;<b>forwardNo</b>(%options)
           Construct a forward, where the whole body of the message is already constructed.  That  complex  body
           is usually produced in <b>forwardInline()</b>, <b>forwardAttach()</b>, or <b>forwardEncapsulate()</b>.

           The  %options are the same as for forward() except that "body" is required.  Some other options, like
           "preamble", are ignored.

            -Option--Default
             body    &lt;required&gt;

           body =&gt; BODY
       $obj-&gt;<b>forwardPostlude</b>()
           Added after the forwarded message.

           example:

            ---- END forwarded message

       $obj-&gt;<b>forwardPrelude</b>()
           Create a few lines to be included before the forwarded message content.  The return is  an  array  of
           lines.

           example:

            ---- BEGIN forwarded message
            From: <a href="mailto:him@somewhere.else.nl">him@somewhere.else.nl</a> (Original Sender)
            To: <a href="mailto:me@example.com">me@example.com</a> (Me the receiver)
            Cc: <a href="mailto:the.rest@world.net">the.rest@world.net</a>
            Date: Wed, 9 Feb 2000 15:44:05 -0500
            &lt;blank line&gt;

       $obj-&gt;<b>forwardSubject</b>(STRING)
           Create  a  subject  for  a message which is a forward from this one.  This routine tries to count the
           level of reply in  subject  field,  and  transform  it  into  a  standard  form.   Please  contribute
           improvements.

           example:

            subject                 --&gt; Forw: subject
            Re: subject             --&gt; Forw: Re: subject
            Re[X]: subject          --&gt; Forw: Re[X]: subject
            &lt;blank&gt;                 --&gt; Forwarded

</pre><h4><b>DETAILS</b></h4><pre>
   <b>Creating</b> <b>a</b> <b>forward</b>
       The  main difference between <b>bounce()</b> and <b>forward()</b> is the reason for message processing.  The <u>bounce</u> has
       no intention to modify the content of message: the same information is passed-on to someplace else.  This
       may mean some conversions, but for instance, the Message-ID does not need to be changed.

       The purpose of <u><b>forward()</b></u> is to pass  on  information  which  is  modified:  annotated  or  reduced.   The
       information is not sent back to the author of the original message (which is implemented by <b>reply()</b>), but
       to someone else.

       So:  some  information  comes  in, is modified, and than forwarded to someone else.  Currently, there are
       four ways to get the original information included, which are explained in the next sections.

       After the creation of the  forward,  you  may  want  to  <b>rebuild()</b>  the  message  to  remove  unnecessary
       complexities.  Of course, that is not required.

       <u>forward,</u> <u>specify</u> <u>a</u> <u>body</u>

       When  you  specify  forward(body),  you  have  created  your own body object to be used as content of the
       forwarded message.  This implies that forward(include) is 'NO': no automatic generation of the  forwarded
       body.

       <u>forward,</u> <u>inline</u> <u>the</u> <u>original</u>

       The  forward(include)  is  set to 'INLINE' (the default) This is the most complicated situation, but most
       often used by MUAs: the original message is inserted textually in the new body.  You can set-up automatic
       stripping of signatures, the way of encapsulation, and texts which should be added before and  after  the
       encapsulated part.

       However,  the  result  may  not  always  be  what  you  expect.   For instance, some people use very long
       signatures which will not be automatically stripped because the pass the  threshold.   So,  you  probably
       need some manual intervention after the message is created and before it is sent.

       When a binary message is encountered, inlining is impossible.  In that case, the message is treated as if
       'ENCAPSULATE' was requested.

       <u>forward,</u> <u>attach</u> <u>the</u> <u>original</u>

       When  forward(include)  is  explicitly  set to 'ATTACH' the result will be a multipart which contains two
       parts.  The first part will be your message, and the second the body of the original message.

       This means that the headers of the forwarded message are used for the new message, and detached from  the
       part which now contains the original body information.  Content related headers will (of course) still be
       part of that part, but lines line "To" and "Subject" will not be stored with that part.

       As example of the structural transformation:

        # code: $original-&gt;printStructure;
        multipart/alternative: The source message
          text/plain: content in raw text
          text/html: content as html

        # code: $fwd = $original-&gt;forward(include =&gt; 'ATTACH');
        # code: $fwd-&gt;printStructure
        multipart/mixed: The source message
          text/plain: prelude/postlude/signature
          multipart/alternative
            text/plain: content in raw text
            text/html: content as html

       <u>forward,</u> <u>encapsulate</u> <u>the</u> <u>original</u>

       When  forward(include)  is  explicitly set to 'ENCAPSULATE', then the original message is left in-tact as
       good as possible.  The lines of the original message are  used  in  the  main  message  header  but  also
       enclosed in the part header.

       The  encapsulation  is  implemented using a nested message, content type "message/rfc822".  As example of
       the structural transformation:

        # code: $original-&gt;printStructure;
        multipart/alternative: The source message
          text/plain: content in raw text
          text/html: content as html

        # code: $fwd = $original-&gt;forward(include =&gt; 'ENCAPSULATE');
        # code: $fwd-&gt;printStructure
        multipart/mixed: The source message
          text/plain: prelude/postlude/signature
          message/rfc822
             multipart/alternative: The source message
                text/plain: content in raw text
                text/html: content as html

       The message structure is much more complex, but no information is lost.  This is probably the reason  why
       many MUAs use this when the forward an original message as attachment.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error: Cannot include forward source as $include.
           Unknown  alternative  for  the  forward(include).   Valid  choices  are "NO", "INLINE", "ATTACH", and
           "ENCAPSULATE".

       Error: Method forwardAttach requires a preamble
       Error: Method forwardEncapsulate requires a preamble
       Error: No address to create forwarded to.
           If a forward message is created, a destination address must be specified.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module is part of Mail-Message distribution  version  3.017,  built  on  April  18,  2025.  Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]. For other contributors see ChangeLog.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-25             <u>Mail::Message::Construct::<a href="../man3pm/Forward.3pm.html">Forward</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>