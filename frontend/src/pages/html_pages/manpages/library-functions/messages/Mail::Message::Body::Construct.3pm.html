<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Message::Body::Construct - adds functionality to Mail::Message::Body</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-message-perl">libmail-message-perl_3.017-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Message::Body::Construct - adds functionality to Mail::Message::Body

</pre><h4><b>SYNOPSIS</b></h4><pre>
</pre><h4><b>DESCRIPTION</b></h4><pre>
       This package adds complex functionality to the Mail::Message::Body class.  This functions less often
       used, so many programs will not compile this package.

</pre><h4><b>METHODS</b></h4><pre>
   <b>Constructing</b> <b>a</b> <b>body</b>
       $obj-&gt;<b>attach</b>($messages, %options)
           Make  a  multipart  containing  this  body and the specified $messages. The options are passed to the
           constructor of the multi-part body.  If you need more control, create the multi-part  body  yourself.
           At least take a look at Mail::Message::Body::Multipart.

           The  message-parts  will  be  coerced into a Mail::Message::Part, so you may attach Mail::Internet or
           MIME::Entity objects if you want --see <b>Mail::Message::coerce()</b>.  A new body with attached messages is
           returned.

           example:

            my $pgpkey = Mail::Message::Body::File-&gt;new(file =&gt; 'a.pgp');
            my $msg    = Mail::Message-&gt;buildFromBody(
               $message-&gt;decoded-&gt;attach($pgpkey));

            # The last message of the $multi multiparted body becomes a coerced $entity.
            my $entity  = MIME::Entity-&gt;new;
            my $multi   = $msg-&gt;body-&gt;attach($entity);

            # Now create a new message
            my $msg     = Mail::Message-&gt;new(head =&gt; ..., body =&gt; $multi);

       $obj-&gt;<b>concatenate</b>($components)
           Concatenate a list of elements into one new body.

           Specify a list of text $components.  Each component can be a message (Mail::Message, the body of  the
           message  is  used),  a  plain  body  (Mail::Message::Body), "undef" (which will be skipped), a scalar
           (which is split into lines), or an array of scalars (each providing one line).

           example:

            # all arguments are Mail::Message::Body's.
            my $sum = $body-&gt;concatenate($preamble, $body, $epilogue, "-- \n" , $sig);

       $obj-&gt;<b>foreachLine</b>(CODE)
           Create a new body by performing an action on each of its lines.  If none of  the  lines  change,  the
           current body will be returned, otherwise a new body is created of the same type as the current.

           The  CODE  refers  to  a  subroutine which is called, where $_ contains body's original line.  DO NOT
           CHANGE $_!!!  The result of the routine is taken as new line.  When the routine returns "undef",  the
           line will be skipped.

           example:

            my $content  = $msg-&gt;decoded;
            my $reply    = $content-&gt;foreachLine( sub { '&gt; '.$_ } );
            my $rev      = $content-&gt;foreachLine( sub {reverse} );

            sub filled() { length $_ &gt; 1 ? $_ : undef }
            my $nonempty = $content-&gt;foreachLine( \&amp;filled );

            my $wrong    = $content-&gt;foreachLine( sub {s/a/A/} );  # WRONG!!!
            my $right    = $content-&gt;foreachLine(
                   sub {(my $x=$_) =~ s/a/A/; $x} );

       $obj-&gt;<b>stripSignature</b>(%options)
           Strip  the  signature  from the body.  The body must already be decoded otherwise the wrong lines may
           get stripped.  Returned is the stripped version  body,  and  in  list  context  also  the  signature,
           encapsulated  in  its  own  body  object.   The signature separator is the first line of the returned
           signature body.

           The signature is added by the sender to tell about him-  or  herself.   It  is  superfluous  in  some
           situations,  for  instance  if  you want to create a reply to the person's message you do not need to
           include that signature.

           If the body had no signature, the original body object is returned, and  "undef"  for  the  signature
           body.

            -Option     --Default
             max_lines    10
             pattern      qr/^--\s?$/
             result_type  &lt;same as current&gt;

           max_lines =&gt; INTEGER|undef
             The  maximum number of lines which can be the length of a signature.  Specify "undef" to remove the
             limit.

           pattern =&gt; REGEX|STRING|CODE
             Which pattern defines the line which indicates the separator between the message and the signature.
             In case of a STRING, this is matched to the beginning of the line, and  REGEX  is  a  full  regular
             expression.

             In  case  of  CODE,  each  line (from last to front) is passed to the specified subroutine as first
             argument.  The subroutine must return TRUE when the separator is found.

           result_type =&gt; CLASS
             The type of body to be created for the stripped body  (and  maybe  also  to  contain  the  stripped
             signature)

           example:

            my $start = $message-&gt;decoded;
            my $start = $body-&gt;decoded;

            my $stripped = $start-&gt;stripSignature;

            my ($stripped, $sign) = $start-&gt;stripSignature
                (max_lines =&gt; 5, pattern =&gt; '-*-*-');

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This  module  is  part  of  Mail-Message  distribution  version  3.017, built on April 18, 2025. Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer &lt;<a href="mailto:markov@cpan.org">markov@cpan.org</a>&gt;]. For other contributors see ChangeLog.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-25                <u>Mail::Message::Body::<a href="../man3pm/Construct.3pm.html">Construct</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>