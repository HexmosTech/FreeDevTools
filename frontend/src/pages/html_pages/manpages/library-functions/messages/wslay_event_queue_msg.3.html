<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wslay_event_queue_msg - Queue a message for future transmission</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libwslay-doc">libwslay-doc_1.1.1-4build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wslay_event_queue_msg - Queue a message for future transmission

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;wslay/wslay.h&gt;

       <b>int</b> <b>wslay_event_queue_msg(wslay_event_context_ptr</b> <b>ctx,</b> <b>const</b> <b>struct</b> <b>wslay_event_msg</b> <b>*arg)</b>

       <b>int</b> <b>wslay_event_queue_msg_ex(wslay_event_context_ptr</b> <b>ctx,</b> <b>const</b> <b>struct</b> <b>wslay_event_msg</b> <b>*arg,</b> <b>uint8_t</b> <b>rsv)</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>wslay_event_queue_msg()</u>  and  <u>wslay_event_queue_msg_ex()</u>  queue  message  specified  in  <u>arg</u>.  The <u>struct</u>
       <u>wslay_event_msg</u> is defined as:

          struct wslay_event_msg {
              uint8_t        opcode;
              const uint8_t *msg;
              size_t         msg_length;
          };

       The <u>opcode</u> member is opcode of the message.  The <u>msg</u> member is the pointer  to  the  message  data.   The
       <u>msg_length</u> member is the length of message data.

       This  function  supports  both  control  and  non-control  messages and the given message is sent without
       fragmentation.  If fragmentation is needed, use <u>wslay_event_queue_fragmented_msg()</u> function instead.

       This function makes a copy of <u>msg</u> of length <u>msg_length</u>.

       This function just queues a message and does not send it.  <u>wslay_event_send()</u> function call  sends  these
       queued messages.

       <u>wslay_event_queue_msg_ex()</u>  additionally  accepts <u>rsv</u> parameter, which is a reserved bits to send. To set
       reserved    bits,    use    macro    <b>WSLAY_RSV1_BIT</b>,    <b>WSLAY_RSV2_BIT</b>,    and    <b>WSLAY_RSV3_BIT</b>.     See
       <u>wslay_event_config_set_allowed_rsv_bits()</u> to see the allowed reserved bits to set.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u>wslay_event_queue_msg()</u>  and <u>wslay_event_queue_msg_ex()</u> return 0 if it succeeds, or returns the following
       negative error codes:

       <b>WSLAY_ERR_NO_MORE_MSG</b>
              Could not queue given message. The one of possible reason is that close  control  frame  has  been
              queued/sent and no further queueing message is not allowed.

       <b>WSLAY_ERR_INVALID_ARGUMENT</b>
              The  given message is invalid; or RSV1 is set for control frame; or bit is set in <u>rsv</u> which is not
              allowed (see <u>wslay_event_config_set_allowed_rsv_bits()</u>).

       <b>WSLAY_ERR_NOMEM</b>
              Out of memory.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>wslay_event_queue_fragmented_msg()</u>, <u>wslay_event_queue_fragmented_msg_ex()</u>, <u>wslay_event_queue_close()</u>

</pre><h4><b>AUTHOR</b></h4><pre>
       Tatsuhiro Tsujikawa

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2024, 2015, Tatsuhiro Tsujikawa

@PACKAGE_VERSION@                                 Apr 22, 2024                          <u><a href="../man3/WSLAY_EVENT_QUEUE_MSG.3.html">WSLAY_EVENT_QUEUE_MSG</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>