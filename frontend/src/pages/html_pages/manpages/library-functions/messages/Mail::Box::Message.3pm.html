<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Box::Message - manage one message within a mail-folder</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-box-perl">libmail-box-perl_3.011-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Box::Message - manage one message within a mail-folder

</pre><h4><b>INHERITANCE</b></h4><pre>
        Mail::Box::Message
          is a Mail::Message
          is a Mail::Reporter

        Mail::Box::Message is extended by
          Mail::Box::Dir::Message
          Mail::Box::File::Message
          Mail::Box::Message::Destructed
          Mail::Box::Net::Message

</pre><h4><b>SYNOPSIS</b></h4><pre>
        # Usually these message objects are created indirectly
        use Mail::Box::Manager;
        my $manager = Mail::Box::Manager-&gt;new;
        my $folder  = $manager-&gt;open(folder =&gt; 'Mail/Drafts');
        my $msg     = $folder-&gt;<a href="../man1/message.1.html">message</a>(1);
        $msg-&gt;delete;
        $msg-&gt;size;   # and much more

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These pages do only describe methods which relate to folders.  If you access the knowledge of a message,
       then read Mail::Message.

       During its life, a message will pass through certain stages.  These stages were introduced to reduce the
       access-time to the folder.  Changing from stage, the message's body and head objects may change.

       Extends "DESCRIPTION" in Mail::Message.

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Mail::Message.

   <b>Constructors</b>
       Extends "Constructors" in Mail::Message.

       $obj-&gt;<b>clone</b>(%options)
           Inherited, see "Constructors" in Mail::Message

       Mail::Box::Message-&gt;<b>new</b>(%options)
            -Option    --Defined in     --Default
             body        Mail::Message    undef
             body_type                    &lt;from folder&gt;
             deleted     Mail::Message    &lt;false&gt;
             field_type  Mail::Message    undef
             folder                       &lt;required&gt;
             head        Mail::Message    undef
             head_type   Mail::Message    Mail::Message::Head::Complete
             labels      Mail::Message    {}
             log         Mail::Reporter   'WARNINGS'
             messageId   Mail::Message    undef
             modified    Mail::Message    &lt;false&gt;
             size                         undef
             trace       Mail::Reporter   'WARNINGS'
             trusted     Mail::Message    &lt;false&gt;

           body =&gt; OBJECT
           body_type =&gt; CODE|CLASS
             If the body of a message is used delay-loaded, the message must what type of message to become when
             it  finally  gets  parsed.   The  folder  which  is delaying the load must specify the algorithm to
             determine that type.

           deleted =&gt; BOOLEAN
           field_type =&gt; CLASS
           folder =&gt; FOLDER
             The folder where this message appeared in.  The argument is an  instance  of  (a  sub-class  of)  a
             Mail::Box.

           head =&gt; OBJECT
           head_type =&gt; CLASS
           labels =&gt; ARRAY|HASH
           log =&gt; LEVEL
           messageId =&gt; STRING
           modified =&gt; BOOLEAN
           size =&gt; INTEGER
             The size of the message, which includes head and body, but without the message separators which may
             be used by the folder type.

           trace =&gt; LEVEL
           trusted =&gt; BOOLEAN

   <b>Constructing</b> <b>a</b> <b>message</b>
       Extends "Constructing a message" in Mail::Message.

       $obj-&gt;<b>bounce</b>( [&lt;$rg_object|%options&gt;] )
           Inherited, see "Constructing a message" in Mail::Message::Construct::Bounce

       Mail::Box::Message-&gt;<b>build</b>( [$message|$part|$body], $content )
           Inherited, see "Constructing a message" in Mail::Message::Construct::Build

       Mail::Box::Message-&gt;<b>buildFromBody</b>($body, [$head], $headers)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Build

       $obj-&gt;<b>forward</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardAttach</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardEncapsulate</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardInline</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardNo</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardPostlude</b>()
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardPrelude</b>()
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardSubject</b>(STRING)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       Mail::Box::Message-&gt;<b>read</b>($fh|STRING|SCALAR|ARRAY, %options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Read

       $obj-&gt;<b>rebuild</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Rebuild

       $obj-&gt;<b>reply</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Reply

       $obj-&gt;<b>replyPrelude</b>( [STRING|$field|$address|ARRAY-$of-$things] )
           Inherited, see "Constructing a message" in Mail::Message::Construct::Reply

       $obj-&gt;<b>replySubject</b>(STRING)
       Mail::Box::Message-&gt;<b>replySubject</b>(STRING)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Reply

   <b>The</b> <b>message</b>
       Extends "The message" in Mail::Message.

       $obj-&gt;<b>container</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>copyTo</b>($folder, %options)
           Copy the message to the indicated opened $folder, without deleting the original.  The coerced message
           (the clone in the destination folder) is returned.

            -Option      --Default
             shallow       &lt;false&gt;
             shallow_body  &lt;false&gt;
             shallow_head  &lt;false&gt;
             share         &lt;false&gt;

           shallow =&gt; BOOLEAN
             Used for clone(shallow).

           shallow_body =&gt; BOOLEAN
             Used for clone(shallow_body).

           shallow_head =&gt; BOOLEAN
             Used for clone(shallow_head).

           share =&gt; BOOLEAN
             Try to share the physical storage of the message between the two folders.  Sometimes, they even may
             be of different types.  When not possible, this options will be silently ignored.

           example:

            my $draft = $mgr-&gt;open(folder =&gt; 'Draft');
            $message-&gt;copyTo($draft, share =&gt; 1);

       $obj-&gt;<b>folder</b>( [$folder] )
           In with folder did we detect this message/dummy?  This is a reference to the folder-object.

       $obj-&gt;<b>isDummy</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>isPart</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>messageId</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>moveTo</b>($folder, %options)
           Move  the  message  from this folder to the $folder specified.  This will create a copy using <b>clone()</b>
           first.  Then, this original message is flagged to get deleted.  So until the source folder is closed,
           two copies of the message may stay in memory.

           The newly created message clone (part of the destination  folder)  is  returned.   All  %options  are
           passed to <b>copyTo()</b>

            -Option      --Default
             shallow_body  &lt;undef&gt;
             share         &lt;true unless shallow_body exists&gt;

           shallow_body =&gt; BOOLEAN
             Only create a shallow body, which means that the header can not be reused.  A message can therefore
             not be shared in storage unless explicitly stated.

           share =&gt; BOOLEAN
             When  there is a chance that the original message can be undeleted, then this must be set to false.
             Otherwise a shallow clone will be made, which will share the header which can be  modified  in  the
             undeleted message.

           example: of moving a message

            my $trash = Mail::Box::Mbox-&gt;new(folder =&gt; 'trash');
            my $t = $msg-&gt;moveTo($trash);

           is equivalent to

            my $t = $msg-&gt;copyTo($trash, share =&gt; 1);
            $msg-&gt;delete;

       $obj-&gt;<b>partNumber</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>print</b>( [$fh] )
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>send</b>( [$mailer], %options )
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>seqnr</b>( [$integer] )
           Get  the  number of this message is the current folder.  It starts counting from zero.  Do not change
           the number.

       $obj-&gt;<b>size</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>toplevel</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>write</b>( [$fh] )
           Inherited, see "The message" in Mail::Message

   <b>The</b> <b>header</b>
       Extends "The header" in Mail::Message.

       $obj-&gt;<b>bcc</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>cc</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>date</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>destinations</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>from</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>get</b>($fieldname)
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>guessTimestamp</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>head</b>( [$head] )
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>nrLines</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>sender</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>study</b>($fieldname)
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>subject</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>timestamp</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>to</b>()
           Inherited, see "The header" in Mail::Message

   <b>The</b> <b>body</b>
       Extends "The body" in Mail::Message.

       $obj-&gt;<b>body</b>( [$body] )
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>contentType</b>()
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>decoded</b>(%options)
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>encode</b>(%options)
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>isMultipart</b>()
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>isNested</b>()
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>parts</b>( [&lt;'ALL'|'ACTIVE'|'DELETED'|'RECURSE'|$filter&gt;] )
           Inherited, see "The body" in Mail::Message

   <b>Flags</b>
       Extends "Flags" in Mail::Message.

       $obj-&gt;<b>delete</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>deleted</b>( [BOOLEAN] )
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>isDeleted</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>isModified</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>label</b>($label|PAIRS)
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>labels</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>labelsToStatus</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>modified</b>( [BOOLEAN] )
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>statusToLabels</b>()
           Inherited, see "Flags" in Mail::Message

   <b>The</b> <b>whole</b> <b>message</b> <b>as</b> <b>text</b>
       Extends "The whole message as text" in Mail::Message.

       $obj-&gt;<b>file</b>()
           Inherited, see "The whole message as text" in Mail::Message::Construct::Text

       $obj-&gt;<b>lines</b>()
           Inherited, see "The whole message as text" in Mail::Message::Construct::Text

       $obj-&gt;<b>printStructure</b>( [$fh|undef],[$indent] )
           Inherited, see "The whole message as text" in Mail::Message::Construct::Text

       $obj-&gt;<b>string</b>()
           Inherited, see "The whole message as text" in Mail::Message::Construct::Text

   <b>Internals</b>
       Extends "Internals" in Mail::Message.

       $obj-&gt;<b>clonedFrom</b>()
           Inherited, see "Internals" in Mail::Message

       Mail::Box::Message-&gt;<b>coerce</b>($message, %options)
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>diskDelete</b>()
           Remove a message from disk.  This is not from the folder, but everything  else,  like  parts  of  the
           message which are stored outside from the folder.

       $obj-&gt;<b>isDelayed</b>()
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>readBody</b>( $parser, $head, [$bodytype] )
           Read  the body of one message.  The $parser gives access to the folder file.  The $head has been read
           with <b>readHead()</b>.  The optional $bodytype supplies the class name of the body to be created, or a code
           reference to a routine which can produce a body type based on the head (passed as first argument).

           By default, the $bodytype will call <b>Mail::Box::determineBodyType()</b> where the message  will  be  added
           to.

       $obj-&gt;<b>readFromParser</b>( $parser, [$bodytype] )
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>readHead</b>( $parser, [$class] )
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>recursiveRebuildPart</b>($part, %options)
           Inherited, see "Internals" in Mail::Message::Construct::Rebuild

       $obj-&gt;<b>storeBody</b>($body)
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>takeMessageId</b>( [STRING] )
           Inherited, see "Internals" in Mail::Message

   <b>Error</b> <b>handling</b>
       Extends "Error handling" in Mail::Message.

       $obj-&gt;<b>AUTOLOAD</b>()
           Inherited, see "METHODS" in Mail::Message::Construct

       $obj-&gt;<b>addReport</b>($object)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
       Mail::Box::Message-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>errors</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>log</b>( [$level, [$strings]] )
       Mail::Box::Message-&gt;<b>log</b>( [$level, [$strings]] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logPriority</b>($level)
       Mail::Box::Message-&gt;<b>logPriority</b>($level)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logSettings</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>notImplemented</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>report</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>reportAll</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>shortSize</b>( [$value] )
       Mail::Box::Message-&gt;<b>shortSize</b>( [$value] )
           Inherited, see "Error handling" in Mail::Message

       $obj-&gt;<b>shortString</b>()
           Inherited, see "Error handling" in Mail::Message

       $obj-&gt;<b>trace</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>warnings</b>()
           Inherited, see "Error handling" in Mail::Reporter

   <b>Cleanup</b>
       Extends "Cleanup" in Mail::Message.

       $obj-&gt;<b>DESTROY</b>()
           Inherited, see "Cleanup" in Mail::Reporter

       $obj-&gt;<b>destruct</b>()
           Removes  most  of  the  memory  occupied  by the message by detaching the header and body.  Then, the
           object changes into a Mail::Box::Message::Destructed which will catch  all  attempts  to  access  the
           header and body.  Be careful with the usage of this method.

</pre><h4><b>DETAILS</b></h4><pre>
       Extends "DETAILS" in Mail::Message.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error: Cannot coerce a $class object into a $class object
       Error: Cannot include forward source as $include.
           Unknown  alternative  for  the  forward(include).   Valid  choices  are "NO", "INLINE", "ATTACH", and
           "ENCAPSULATE".

       Error: Cannot include reply source as $include.
           Unknown alternative for the "include" option of <b>reply()</b>.   Valid  choices  are  "NO",  "INLINE",  and
           "ATTACH".

       Error: Method bounce requires To, Cc, or Bcc
           The message <b>bounce()</b> method forwards a received message off to someone else without modification; you
           must  specified  it's  new  destination.   If  you  have the urge not to specify any destination, you
           probably are looking for <b>reply()</b>. When you wish to modify the content, use <b>forward()</b>.

       Error: Method forwardAttach requires a preamble
       Error: Method forwardEncapsulate requires a preamble
       Error: No address to create forwarded to.
           If a forward message is created, a destination address must be specified.

       Error: No default mailer found to send message.
           The message <b>send()</b> mechanism had not enough information to automatically find a mail  transfer  agent
           to sent this message.  Specify a mailer explicitly using the "via" options.

       Error: No rebuild rule $name defined.
       Error: Only <b>build()</b> Mail::Message's; they are not in a folder yet
           You may wish to construct a message to be stored in a some kind of folder, but you need to do that in
           two  steps.   First,  create  a  normal  Mail::Message,  and  then add it to the folder.  During this
           <b>Mail::Box::addMessage()</b> process, the message will get <b>coerce()</b>-d into the right message type,  adding
           storage information and the like.

       Error: Package $package does not implement $method.
           Fatal  error:  the specific package (or one of its superclasses) does not implement this method where
           it should. This message means that some other related classes do implement this  method  however  the
           class  at  hand does not.  Probably you should investigate this and probably inform the author of the
           package.

       Error: coercion starts with some object

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module is  part  of  Mail-Box  distribution  version  3.011,  built  on  April  18,  2025.  Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer]. For other contributors see ChangeLog.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-25                            <u>Mail::Box::<a href="../man3pm/Message.3pm.html">Message</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>