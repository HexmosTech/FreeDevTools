<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBB::HMacBuf - Computes HMAC Message Digests from information inserted into a std::ostream</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbobcat-dev">libbobcat-dev_6.07.01-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FBB::HMacBuf - Computes HMAC Message Digests from information inserted into a std::ostream

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;bobcat/hmacbuf&gt;</b>
       Linking option:  <u>-lbobcat</u> <u>-lcrypto</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>FBB::HMacBuf</b> objects are <b>std::streambuf</b> objects that can be used to initialize <u>std::ostream</u> objects with.

       All information inserted into such a <u>std::ostream</u> is used to compute a message HMAC.

       All the message digest and cipher algorithms defined by the OpenSSL library that can be selected by name,
       may be used in combination with <u>HMacBuf</u> objects.

       For the currently supported  message digest algorithms issue the command

           openssl list -digest-commands

       For the currently supported  message cipher algorithms issue the command

           openssl list -cipher-commands

       The  defaults  used  by  <u>HMacBuf</u>  constructors are the <u>sha256</u> digest algorithm and the <u>aes-128-cbc</u> cipher
       algorithm.

</pre><h4><b>NAMESPACE</b></h4><pre>
       <b>FBB</b>
       All constructors, members, operators and manipulators, mentioned in this man-page,  are  defined  in  the
       namespace <b>FBB</b>.

</pre><h4><b>INHERITS</b> <b>FROM</b></h4><pre>
       <b>std::streambuf</b>

</pre><h4><b>CONSTRUCTORS</b></h4><pre>
       o      <b>HMacBuf()</b>:
              The  default  constructor  defines a <u>HmacBuf</u> object. It can be used once a non-default constructed
              <u>HMacBuf</u> object has been move-assigned to it;

       o      <b>HMacBuf(HMacBuf</b> <b>&amp;&amp;tmp)</b>:
              The move constructor initialized a <u>HmacBuf</u> object by moving <u>tmp</u> into the current <u>HMacBuf</u> object;

       o      <b>HMacBuf(std::string</b> <b>const</b> <b>&amp;key,</b> <b>char</b> <b>const</b> <b>*digest,</b> <b>size_t</b> <b>bufsize)</b>:
              This constructor initializes the streambuf,  setting  it  up  for  the  message  digest  algorithm
              specified with <u>digest</u>. E.g., to use the sha256 algorithm specify <u>"sha256"</u>.

              The  constructor’s  first  argument  defines  the  key  to be used when computing the HMAC message
              digest. The key’s length must be 16 characters.  An  exception  is  thrown  if  an  empty  key  is
              specified.

              The <u>bufsize</u> argument specifies the size (in bytes) of the internal buffer used by <u>HMacBuf</u> to store
              incoming characters temporarily. A value of 1024 should be OK for all normal cases;

       o      <b>HMacBuf(std::string</b> <b>const</b> <b>&amp;key,</b> <b>char</b> <b>const</b> <b>*cipher</b> <b>=</b> <b>"aes-128-cbc",</b> <b>char</b> <b>const</b> <b>*digest</b> <b>=</b> <b>"sha256",</b>
              <b>size_t</b> <b>bufsize</b> <b>=</b> <b>1024)</b>:
              Like  the  previous constructor, but this one offers defaults for the cipher and digest algorithms
              and buffer size. When specifying another cipher algorithm the key length  must  match  the  cipher
              requirement.  Usually the cipher’s name contains a number (like 128), which can be divided by 8 to
              obtain the required key length of fixed-key length ciphers.

</pre><h4><b>OVERLOADED</b> <b>OPERATOR</b></h4><pre>
       o      <b>HMacBuf</b> <b>&amp;operator=(HMacBuf</b> <b>&amp;&amp;rhs)</b>:
              The move assignment operator moves the <u>rhs</u> <u>HMacBuf</u> object into the current object;

       o      <b>std::ostream</b> <b>&amp;operator&lt;&lt;(std::ostream</b> <b>&amp;out,</b> <b>HMacBuf</b> <b>const</b> <b>&amp;hmacbuf)</b>:
              The insertion operator is a free function defined in the namespace <u>FBB</u>. It inserts a hash value as
              a series of hexadecimally displayed values into the provided <u>ostream</u>. See the example below for an
              illustration.

</pre><h4><b>MEMBER</b> <b>FUNCTIONS</b></h4><pre>
       All members of <b>std::streambuf</b> are available, as <b>FBB::HMacBuf</b> inherits from this class.

       o      <b>std::string</b> <b>const</b> <b>&amp;hash()</b> <b>const</b>:
              This member returns the hash value computed by the <u>HMacBuf</u> object. Its value is only defined after
              having called <u>close()</u>. The hash value is returned in a <u>std::string</u> object. This string’s  <u>length()</u>
              member  contains  the number of characters used by the hash value, and its <u>data()</u> member refers to
              the hash value’s characters. Note that a hash value’s character value may be 0 (not to be confused
              with <u>’0’</u>).

              When called from a default constructed <u>HMacBuf</u> object an empty string is returned;

       o      <b>void</b> <b>reset()</b>:
              This member reinitializes the message hmac computation. One a message hmac has been computed  for,
              say  a  stream  <u>streamA</u> this member can be called after which the hmac for a stream <u>streamB</u> can be
              computed using the same <u>HMacBuf</u> object.

              No action is performed When called from a default constructed <u>HMacBuf</u> object;

       o      <b>void</b> <b>eoi()</b>:
              This member can be called to complete the message digest  computation.  Instead  of  calling  this
              member the <u>eoi</u> manipulator (see below) can be used.

</pre><h4><b>MANIPULATOR</b></h4><pre>
       o      <b>FBB::eoi</b>:
              The  <u>eoi</u> manipulator can be inserted into the <u>ostream</u> to complete the digest computation. If it is
              inserted into a plain <u>std::ostream</u> nothing happens.

              <u>eoi</u> can also be called as a function, receiving the stream that uses the <u>HMacBuf</u> as its <u>streambuf</u>,
              but it must be called  either  way  as  the  <u>HMacBuf</u>  object  itself  cannot  decide  whether  all
              information  to  compute  the  digest  for  has yet been received or not. The general approach for
              computing a message hmac is therefore:

                  1. create a HMacBuf object
                  2. use it to create a std::ostream object
                  3. insert information into the ostream object
                  4. call the HMacBuf object’s eoi() member or insert eoi into the ostream
                     object
                  5. obtain/process the hash value from the HMacBuf object.

</pre><h4><b>EXAMPLE</b></h4><pre>
       #include &lt;fstream&gt;
       #include &lt;iostream&gt;
       #include &lt;bobcat/hmacbuf&gt;

       using namespace std;
       using namespace FBB;

       int main(int argc, char **argv)
       try
       {
                               // using the default (sha256) digest algorithm
           if (argc == 1)
               throw Exception{} &lt;&lt;
                       "Usage: arg1: 16-byte key, arg2: file to process,\n"
                       "       arg3 (opt) buf size (default 1024)";

           HMacBuf hmacbuf{ argv[1], "aes-128-cbc", "sha256",
                            argc == 3 ? 1024 : stoul(argv[3]) };

           HMacBuf empty;                              // Demo: an empty HMacBuf
           empty = HMacBuf{ argv[1], "sha256", 100 };  // Demo: move assignmeent

           ostream out(&amp;hmacbuf);              // the ostream receiving the
                                               // input to compute the hmac of

           ifstream in{ argv[2] };             // the file to process

           out &lt;&lt; in.rdbuf() &lt;&lt; eoi;           // compute the hmac
                                               // and show the hmac value
           cout &lt;&lt; "  computed hmac value: &gt;" &lt;&lt; hmacbuf &lt;&lt; "&lt;\n";

           <a href="../man0/in.seekg.0.html">in.seekg</a>(0);                        // to illustrate ’reset’: do it
           hmacbuf.reset();                    // again

           out &lt;&lt; in.rdbuf();
           eoi(out);                           // calling eoi as a function
           cout &lt;&lt; "recomputed hmac value: &gt;" &lt;&lt; hmacbuf &lt;&lt; "&lt;\n";
       }
       catch(exception const &amp;err)
       {
           cout &lt;&lt; err.what() &lt;&lt; endl;
           return errno;
       }

</pre><h4><b>FILES</b></h4><pre>
       <u>bobcat/hmacbuf</u> - defines the class interface

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/bobcat.7.html">bobcat</a></b>(7), <b><a href="../man3bobcat/digestbuf.3bobcat.html">digestbuf</a></b>(3bobcat), <b>std::streambuf</b>

</pre><h4><b>BUGS</b></h4><pre>
       None reported

</pre><h4><b>BOBCAT</b> <b>PROJECT</b> <b>FILES</b></h4><pre>
       o      <u>https://fbb-git.gitlab.io/bobcat/</u>: gitlab project page;

       Debian Bobcat project files:

       o      <u>libbobcat6</u>: debian package containing the shared library, changelog and copyright note;

       o      <u>libbobcat-dev</u>: debian package containing the static library, headers, manual pages, and  developer
              info;

</pre><h4><b>BOBCAT</b></h4><pre>
       Bobcat is an acronym of `Brokken’s Own Base Classes And Templates’.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This is free software, distributed under the terms of the GNU General Public License (GPL).

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank B. Brokken (<b><a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a></b>).

libbobcat-dev_6.07.01                               2005-2025                              <u>FBB::<a href="../man3bobcat/HMacBuf.3bobcat.html">HMacBuf</a></u>(3bobcat)
</pre>
 </div>
</div></section>
</div>
</body>
</html>