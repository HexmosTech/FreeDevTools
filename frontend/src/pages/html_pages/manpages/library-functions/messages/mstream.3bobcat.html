<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FBB::Mstream - Generic message handling stream</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libbobcat-dev">libbobcat-dev_6.07.01-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FBB::Mstream - Generic message handling stream

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;bobcat/mstream&gt;</b>
       Linking option: <u>-lbobcat</u>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Objects of this class are used for handling messages in a standardized way. Messages may be prefixed with
       order  (line) numbers an/or, labels. Messages generated by <u>Mstream</u> objects may optionally end by throwing
       an <u>FBB::Exception</u> (which is an <u>std::exception</u>), allowing simple  implementation  of,  e.g.,  fatal  error
       messages.

       Four  message  streams  are  provided  by  the <u>BOBCAT</u> library and may be used after including the <u>mstream</u>
       header file. They are all defined in the <u>FBB</u> namespace:

       o      <u>FBB::emsg</u> for generating standard (labeled and numbered) error messages, e.g.

              [Error 1] this is an error message

       o      <u>FBB::fmsg</u> for generating (labeled) fatal error messages, ending in an exception, e.g.,

              [Fatal] this fatal message is followed by an exception

              The exception’s <u>what</u> member contains <u>FBB::fmsg’s</u> <u>id</u> value (see member <u>id</u> below).

       o      <u>FBB::imsg</u> for generating plain informational messages, e.g.,

              this is a plain message

       o      <u>FBB::wmsg</u> for generating (labeled) warning messages;

              [Warning] this is a warning

              By default all messages are inserted into the  standard  output  stream,  but  other  destinations
              (standard error, a named file, etc.) can easily be configured.

       <u>Mstream</u>  objects  themselves are <u>std::ostream</u> objects, so they can be used as objects passed to functions
       expecting <u>ostream</u> arguments. Messages inserted into <u>Mstream</u> objects are  buffered  until  the  buffer  is
       flushed  by  their  <u>std::ostream</u>  parts  or  when either the <u>FBB::endl</u> or <u>FBB::flush</u> is inserted into the
       message stream. Since these manipulators act like <u>std::endl</u> and <u>std::flush</u>  when  inserted  into  another
       kind  of <u>std::ostream</u> object, <u>using</u> <u>FBB::endl</u> and <u>using</u> <u>FBB::flush</u> might be worth considering. Also, when
       <u>using</u> <u>namespace</u> <u>std</u> <u>and</u> <u>using</u> <u>namespace</u> <u>FBB</u> is specified the <u>FBB::endl</u> and  <u>FBB::flush</u>  manipulator  will
       automatically be used with <u>Mstream</u> objects.

       Messages  inserted  into  <u>Mstream</u>  objects  are considered completed at the insertion of the <u>FBB::endl</u> or
       <u>FBB::flush</u> manipulators. Message labels, line number labels and line numbers will only be shown  for  the
       next  line  after  these manipulators have been inserted and exceptions are, if needed, thrown from these
       manipulators.

</pre><h4><b>NAMESPACE</b></h4><pre>
       <b>FBB</b>
       All elements mentioned in this man-page, are defined in the namespace <b>FBB</b>.

</pre><h4><b>INHERITS</b> <b>FROM</b></h4><pre>
       <b>std::ostream</b>

</pre><h4><b>CONSTRUCTORS</b></h4><pre>
       o      <b>Mstream()</b>:
              The default constructor generates messages using the <u>std::streambuf</u> used by <u>std::cout</u>. There is no
              limit to the number of messages that may be inserted. No message or line  numbers  are  shown,  no
              exceptions are thrown when inserting messages.

       o      <b>explicit</b>   <b>Mstream(std::ostream</b>   <b>&amp;ostr,</b>  <b>size_t</b>  <b>maxCount</b>  <b>=</b>  <b>std::numeric_limits&lt;size_t&gt;::max(),</b>
              <b>std::string</b> <b>const</b> <b>&amp;tag</b> <b>=</b> <b>"",</b> <b>bool</b> <b>throwing</b> <b>=</b> <b>false)</b>:
              This constructor uses the <u>std::streambuf</u> that is also used by the <u>ostream</u> <u>ostr</u>. By default  (using
              the  default argument values) there is no limit to the number of messages that may be inserted. No
              message or line numbers are shown, no exceptions are thrown when  inserting  messages.  Specifying
              any  other  value  than <u>std::numeric_limits&lt;size_t&gt;::max()</u> will set the maximum number of messages
              that can be inserted to that value. The <u>tag</u> defines the text of the message label (e.g., <u>Error</u>).

              When <u>throwing</u> is <u>true</u> an exception is thrown after completing a message. The generated exception’s
              <u>what</u> member may show the <b>FBB::Mstream</b> object’s id (see below at the  member  <u>id</u>)  of  the  <u>Mstream</u>
              object throwing the exception.

       o      <b>explicit</b>   <b>Mstream(std::streambuf</b>  <b>*buf,</b>  <b>size_t</b>  <b>maxCount</b>  <b>=</b>  <b>std::numeric_limits&lt;size_t&gt;::max(),</b>
              <b>std::string</b> <b>const</b> <b>&amp;tag</b> <b>=</b> <b>"",</b> <b>bool</b> <b>throwing</b> <b>=</b> <b>false)</b>:
              This constructor uses <u>buf</u> to insert messages into. The remaining parameters are identical to those
              of the previous constructor.

       o      <b>explicit</b> <b>Mstream(std::string</b> <b>const</b> <b>&amp;name,</b> <b>size_t</b>  <b>maxCount</b>  <b>=</b>  <b>std::numeric_limits&lt;size_t&gt;::max(),</b>
              <b>std::string</b> <b>const</b> <b>&amp;tag</b> <b>=</b> <b>"",</b> <b>bool</b> <b>throwing</b> <b>=</b> <b>false)</b>:
              This  constructor creates a <u>std::ofstream</u> from the provided <u>name</u> parameter. It throws an exception
              if the stream cannot be opened for writing. If a file by that name already exists it is rewritten.
              The remaining parameters are identical to those of the previous two constructors.

       Copy and move constructors (and assignment operators) are not available.

</pre><h4><b>MEMBER</b> <b>FUNCTIONS</b></h4><pre>
       o      <b>size_t</b> <b>count()</b> <b>const</b>:
              returns the number of inserted messages (if <u>setCount</u> has been called: the value set  by  the  last
              <u>setCount</u> call plus the number of inserted messages since that call).

       o      <b>bool</b>  <b>isActive()</b> <b>const</b>:
              returns  <u>true</u>  if  messages  can   actually be inserted into the <b>FBB::MStream</b> object, and <u>false</u> if
              inserted messages are ignored. When ignoring messages the message count is not updated.

       o      <b>int</b> <b>id()</b> <b>const</b>:
              returns the unique <u>id</u> of the <u>Mstream</u> object.

       o      <b>bool</b> <b>lineExcess()</b> <b>const</b>:
              returns <b>true</b> after attempting to insert an additional message after <u>maxCount</u>  number  of  messages
              have been inserted.

       o      <b>std::string</b> <b>const</b> <b>&amp;lineTag()</b> <b>const</b>:
              returns the currently used line-tag (by default `<u>Line</u>’).

       o      <b>size_t</b> <b>maxCount()</b> <b>const</b>:
              returns  the  maximum  number  of  messages  that  can  be  inserted. If the returned value equals
              <u>std::numeric_limits&lt;size_t&gt;::max()</u> then there is no limit to the number of messages  that  can  be
              inserted.

       o      <b>void</b> <b>noLineNr()</b>:
              calling  this  member  will  suppress  the  display of a line number if it is called after calling
              <u>setLineNr</u> (see below) but before a message is being (or has been) inserted.

       o      <b>void</b> <b>off()</b>:
              after calling <u>off</u> messages inserted into the <u>Mstream</u> object are silently  ignored.  After  calling
              <u>off</u> the internal message counter is not incremented when messages are inserted.

       o      <b>void</b> <b>on()</b>:
              by  default  and  after  calling  <u>on</u>  messages  inserted into the <u>Mstream</u> object are sent to their
              destination stream.

       o      <b>void</b> <b>reset(std::ostream</b> <b>&amp;ostr)</b>:
              messages inserted into the <u>Mstream</u> object are handled by the <u>std::streambuf</u>  also  used  by  <u>ostr</u>.
              Other parameters (e.g., <u>maxCount</u>, the message label) are kept as-is.

       o      <b>void</b> <b>reset(std::streambuf</b> <b>*buf)</b>:
              messages  inserted  into  the  <u>Mstream</u>  object are handled by <u>std::streambuf</u> <u>buf</u>. Other parameters
              (e.g., <u>maxCount</u>, the message label) are kept as-is.

       o      <b>void</b> <b>reset(FBB::Mstream</b> <b>const</b> <b>&amp;mstream)</b>:
              the current object is reset using the parameters of the <u>mstream</u> parameter.

       o      <b>void</b> <b>reset(std::string</b> <b>const</b> <b>&amp;name)</b>:
              messages inserted into <u>Mstream</u> objects are handled by a <u>std::ofstream</u> created using  the  provided
              <u>name</u>  parameter.   An exception is thrown if the stream cannot be opened for writing. If a file by
              that name already exists it is rewritten. Other parameters (e.g., <u>maxCount</u>, the message label) are
              kept as-is.

       o      <b>void</b> <b>reset(std::ostream</b> <b>&amp;ostr,</b> <b>size_t</b> <b>maxCount,</b> <b>std::string</b> <b>const</b> <b>&amp;tag,</b> <b>bool</b> <b>throwing)</b>:
              messages inserted into <u>Mstream</u> objects are handled by the <u>std::streambuf</u> also used  by  <u>ostr</u>.   By
              specifying  <u>std::numeric_limits&lt;size_t&gt;::max()</u>  for  <u>maxCount</u>  there  is no limit to the number of
              messages that may be handled by this <u>std::streambuf</u>. The <u>tag</u> defines the text of the message label
              (e.g., <u>Error</u> or the empty string for no message label). When <u>throwing</u>  is  specified  as  <u>true</u>  an
              exception is thrown after completing a message.

       o      <b>void</b> <b>reset(std::streambuf</b> <b>*buf,</b> <b>size_t</b> <b>maxCount,</b> <b>std::string</b> <b>const</b> <b>&amp;tag,</b> <b>bool</b> <b>throwing)</b>:
              messages inserted into <u>Mstream</u> objects are handled by <u>std::streambuf</u> <u>buf</u>. The remaining parameters
              are identical to those of the previous <u>reset</u> member.

       o      <b>void</b> <b>reset(std::string</b> <b>const</b> <b>&amp;name,</b> <b>size_t</b> <b>maxCount,</b> <b>std::string</b> <b>const</b> <b>&amp;tag,</b> <b>bool</b> <b>throwing)</b>:
              messages  inserted  into <u>Mstream</u> objects are handled by a <u>std::ofstream</u> created using the provided
              <u>name</u> parameter. It throws an exception if the stream cannot be opened for writing. If  a  file  by
              that  name already exists it is rewritten.  The remaining parameters are identical to those of the
              previous two <u>reset</u> members.

       o      <b>void</b> <b>reset(FBB::Mstream</b> <b>const</b> <b>&amp;mstream)</b>:
              the current object is reset using the parameters of the <u>mstream</u> parameter. Following the reset all
              of the current object’s parameters can independently be modified from those used by <u>mstream</u>.

       o      <b>bool</b> <b>setActive(bool</b> <b>ifTrue)</b>:
              If <u>ifTrue</u> equals <u>true</u> the <u>Mstream</u> is activated  otherwise  its  actions  are  suppressed.  Returns
              <u>ifTrue</u>.

       o      <b>void</b> <b>setCount(size_t</b> <b>count)</b>:
              assigns the value <u>count</u> to the object’s message counter.

       o      <b>void</b> <b>setLineNr(size_t</b> <b>lineNr)</b>:
              specifies  the value <u>lineNr</u> as the message’s line number when the next line is displayed (see also
              <u>noLineNr</u>). This value is <u>not</u> changed by the <u>Mstream</u> object. To display  another  line  number  the
              member will have to be called again (i.e., the line number is not displayed automatically again at
              every new line).

       o      <b>void</b> <b>setLineTag(std::string</b> <b>const</b> <b>&amp;tag)</b>:
              specifies the tag prefixing line numbers. By default the line tag equals `<u>Line</u>’.

       o      <b>void</b> <b>setMaxCount(size_t</b> <b>maxCount)</b>:
              defines <u>maxCount</u> as the maximum number of messages that can be inserted into the <u>Mstream</u> object.

       o      <b>void</b> <b>setTag(std::string</b> <b>const</b> <b>&amp;tag)</b>:
              specifies  the  tag  prefixing  messages.  By  default  the  tag is empty. If not empty the tag is
              enclosed by square brackets. E.g., specifying the tag `<u>Error</u>’ will prefix messages with <u>[Error]</u>.

       o      <b>std::string</b> <b>const</b> <b>&amp;tag()</b> <b>const</b>:
              returns the currently used message tag (by default an empty string).

       o      <b>bool</b> <b>throws()</b>:
              returns <u>true</u> when the <u>Mstream</u> object will throw an exception at the next  completed  message.  The
              generated  exception’s  <u>what</u> member contains the id (see earlier for the member <u>id</u>) of the <u>Mstream</u>
              object throwing the exception.

       o      <b>void</b> <b>throwing(bool</b> <b>ifTrue)</b>:
              modifies the behaviro of <u>Mstream</u> objects at completed messages. After passing <u>true</u> <u>Mstream</u> objects
              will throw an exception at the next completed message, otherwise this exception is not thrown. The
              generated exception’s <u>what</u> member contains the id (see earlier for the member <u>id</u>) of  the  <u>Mstream</u>
              object throwing the exception.

</pre><h4><b>MANIPULATORS</b></h4><pre>
       Note  that  the  following  two manipulators are not members of the class <b>Mstream</b>, but are free functions
       defined in the namespace <b>FBB</b>.

       o      <b>std::ostream</b> <b>&amp;endl(std::ostream</b> <b>&amp;out)</b>:
              This manipulator inserts a newline character in the <u>Mstream</u>’s stream and  then  calls  <u>FBB::flush</u>.
              This  manipulator  acts  like  <u>std::endl</u>  and  <u>std::flush</u>  when  inserted  into  another  kind  of
              <u>std::ostream</u> object.

       o      <b>std::ostream</b> <b>&amp;flush(std::ostream</b> <b>&amp;out)</b>:
              This manipulator completes the message that is currently being inserted into an <u>Mstream</u> object. It
              flushes the object’s destination stream and prepares the object for the next  message.   When  the
              object’s  <u>throws</u> member returns <u>true</u> it throws an exception whose <u>what</u> member contains the id (see
              earlier for the member <u>id</u>) of the <u>Mstream</u> object throwing the exception. When used in  combination
              with another kind of <u>std::ostream</u> object it acts like <u>std::flush</u>.

       o      <b>std::ostream</b> <b>&amp;noid(std::ostream</b> <b>&amp;out)</b>:
              This manipulator completes the message that is currently being inserted into an <u>Mstream</u> object. It
              flushes  the  object’s  destination stream and prepares the object for the next message.  When the
              object’s <u>throws</u> member returns <u>true</u> it throws an exception whose <u>what</u> member does not contain  the
              <b>Mstream</b>  object’s  ID.  When  used in combination with another kind of <u>std::ostream</u> object it acts
              like <u>std::flush</u>.

       o      <b>std::ostream</b> <b>&amp;noidl(std::ostream</b> <b>&amp;out)</b>:
              This manipulator inserts a newline character in the <u>Mstream</u>’s stream  and  then  calls  <u>FBB::noid</u>.
              This  manipulator  acts  like  <u>std::endl</u>  and  <u>std::flush</u>  when  inserted  into  another  kind  of
              <u>std::ostream</u> object.

       As the manipulators <u>FBB::endl</u> and <u>FBB::flush</u>  act  like,  respectively,  <u>std::endl</u>  and  <u>std::flush</u>  when
       inserted  into  another  kind of <u>std::ostream</u> object, using the declarations `<u>using</u> <u>FBB::endl</u>’ and `<u>using</u>
       <u>FBB::flush</u>’ might be worth considering. Also, when  <u>using</u>  <u>namespace</u>  <u>std</u>  <u>and</u>  <u>using</u>  <u>namespace</u>  <u>FBB</u>  is
       specified  the  <u>FBB::endl</u>  and <u>FBB::flush</u> manipulator will automatically be called when inserting <u>endl</u> or
       <u>flush</u> into <u>Mstream</u> objects.

</pre><h4><b>EXAMPLE</b></h4><pre>
       #include &lt;iostream&gt;
       #include &lt;algorithm&gt;
       #include &lt;iterator&gt;

       #include &lt;bobcat/mstream&gt;

       using namespace std;
       using namespace FBB;

       int main(int argc, char **argv)
       try
       {
           cout &lt;&lt; sizeof(Mstream) &lt;&lt; ’ ’ &lt;&lt; sizeof(Mbuf) &lt;&lt; ’\n’;

           imsg &lt;&lt; "Informational: " &lt;&lt; endl;
           imsg.off();
           cout &lt;&lt; "The i-msg stream is now off. This message should appear once" &lt;&lt;
                                                                               endl;
           imsg &lt;&lt; "The i-msg stream is now off. This message should appear once" &lt;&lt;
                                                                               endl;
           imsg &lt;&lt; "The i-msg stream is now off. This message should appear once" &lt;&lt;
                                                                               endl;
           cout &lt;&lt; "But this message is shown" &lt;&lt; endl;

           wmsg &lt;&lt; "Warning message" &lt;&lt; endl;
           emsg &lt;&lt; "Oops, this this is an error (not really)" &lt;&lt; endl;
           emsg &lt;&lt; "Oops, this goes wrong, too" &lt;&lt; noid;

           imsg.on();
           imsg &lt;&lt; "And another informational msg: " &lt;&lt; emsg.count() &lt;&lt;
                   " error messages\n" &lt;&lt; flush;

           emsg &lt;&lt; "Third error" &lt;&lt; endl;
           <a href="../man3/emsg.setMaxCount.3.html">emsg.setMaxCount</a>(3);

           imsg &lt;&lt; "Msg in between" &lt;&lt; endl;

           imsg.setTag("tag");
           imsg &lt;&lt; "tagged message" &lt;&lt; endl;

           imsg.setTag("label");
           imsg &lt;&lt; "labeled message" &lt;&lt; endl;

           cerr &lt;&lt; "(cerr) LineExcess: " &lt;&lt; emsg.lineExcess() &lt;&lt; ", count = " &lt;&lt;
                   emsg.count() &lt;&lt; endl;

           emsg &lt;&lt; "Fourth error\n" &lt;&lt; noid;       // no id is shown
           emsg &lt;&lt; "Fourth error\n" &lt;&lt; flush;      // shows id (remove the previous
                                                   // statement)

           cerr &lt;&lt; "(cerr) LineExcess: " &lt;&lt; emsg.lineExcess() &lt;&lt; ", count = " &lt;&lt;
                   emsg.count() &lt;&lt; endl;

           cerr &lt;&lt; "Beyond\n";
       }
       catch(exception const &amp;e)
       {
           std::cerr &lt;&lt; "Got a std::exception: " &lt;&lt; e.what() &lt;&lt; ’\n’;
       }
       catch(...)
       {
           std::cerr &lt;&lt; "Got an exception\n";
       }

</pre><h4><b>FILES</b></h4><pre>
       <u>bobcat/mstream</u> - defines the class interface

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man7/bobcat.7.html">bobcat</a></b>(7), <b><a href="../man3bobcat/exception.3bobcat.html">exception</a></b>(3bobcat), <b><a href="../man3bobcat/mbuf.3bobcat.html">mbuf</a></b>(3bobcat)

</pre><h4><b>BUGS</b></h4><pre>
       None Reported.

</pre><h4><b>BOBCAT</b> <b>PROJECT</b> <b>FILES</b></h4><pre>
       o      <u>https://fbb-git.gitlab.io/bobcat/</u>: gitlab project page;

       Debian Bobcat project files:

       o      <u>libbobcat6</u>: debian package containing the shared library, changelog and copyright note;

       o      <u>libbobcat-dev</u>: debian package containing the static library, headers, manual pages, and  developer
              info;

</pre><h4><b>BOBCAT</b></h4><pre>
       Bobcat is an acronym of `Brokken’s Own Base Classes And Templates’.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This is free software, distributed under the terms of the GNU General Public License (GPL).

</pre><h4><b>AUTHOR</b></h4><pre>
       Frank B. Brokken (<b><a href="mailto:f.b.brokken@rug.nl">f.b.brokken@rug.nl</a></b>).

libbobcat-dev_6.07.01                               2005-2025                              <u>FBB::<a href="../man3bobcat/Mstream.3bobcat.html">Mstream</a></u>(3bobcat)
</pre>
 </div>
</div></section>
</div>
</body>
</html>