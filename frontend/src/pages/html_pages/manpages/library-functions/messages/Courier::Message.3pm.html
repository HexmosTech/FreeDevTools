<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courier::Message - Class implementing an interface to a mail message in the Courier MTA's message queue.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/courier-filter-perl">courier-filter-perl_0.200+ds-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Courier::Message - Class implementing an interface to a mail message in the Courier MTA's message queue.

</pre><h4><b>VERSION</b></h4><pre>
       0.200

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Courier::Message;

           my $message = Courier::Message-&gt;new(
               file_name           =&gt; $message_file_name,
               control_file_names  =&gt; \@control_file_names,
           );

           # File names:
           my $message_file_name   = $message-&gt;file_name;
           my @control_file_names  = $message-&gt;control_file_names;

           # Message data properties:
           my $raw_message_text    = $message-&gt;text;
           my $header_hash         = $message-&gt;header;
           my $header_field        = $message-&gt;header($field);
           my $raw_body            = $message-&gt;body;

           # Control properties:
           my $control_hash        = $message-&gt;control;
           my $is_authenticated    = $message-&gt;authenticated;
           my $authenticated_user  = $message-&gt;authenticated_user;
           my $is_trusted          = $message-&gt;trusted;
           my $sender              = $message-&gt;sender;
           my @recipients          = $message-&gt;recipients;
           my $remote_host         = $message-&gt;remote_host;
           my $remote_host_name    = $message-&gt;remote_host_name;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Courier::Message</b> encapsulates a mail message that is stored in the Courier MTA's message queue, including
       the belonging control file(s), and provides an easy to use, read-only interface through its message data
       and control properties.  For light-weight calling of library functions or external commands, the message
       and control file names may be retrieved without causing the files to be parsed by <b>Courier::Message</b>.

   <b>Constructor</b>
       The following constructor is provided:

       <b>new(%options)</b>: returns <u>Courier::Message</u>
           Creates  a  new  "Courier::Message"  object from the given message file name and zero or more control
           file names.

           %options is a list of key/value pairs representing any of the following options:

           <b>file_name</b>
               <u>Required</u>.  The absolute file name of the message file.

           <b>control_file_names</b>
               <u>Required</u>.  An array-ref containing the absolute file  name(s)  of  zero  or  more  control  files
               belonging to the message.

   <b>Instance</b> <b>methods</b>
       <u>File</u> <u>names</u>

       The following file name accessors are provided:

       <b>file_name</b>: returns <u>string</u>
           Returns the absolute file name of the message file.

       <b>control_file_names</b>: returns <u>list</u> of <u>string</u>
           Returns the absolute file names of the control files belonging to the message.

       <u>Message</u> <u>data</u> <u>properties</u>

       <b>text</b>: returns <u>string</u>; throws Perl exceptions
           Reads the message text from the message file into memory once.  Returns the raw message text as bytes
           (see bytes, and "bytes" in PerlIO).  Throws a Perl exception if the message file cannot be read.

       <b>header</b>: returns <u>hash-ref</u> of <u>string</u>
       <b>header($field)</b>: returns <u>list</u> of <u>string</u>
           Parses  the  message  header  once  by  doing  the following: tries to interpret the header as <u>UTF-8</u>,
           falling back to the 8-bit legacy encoding <u>Windows-1252</u> (a superset of <u>ISO-8859-1</u>) and  decoding  that
           to  <u>UTF-8</u>;  parses header fields from the header; and decodes any MIME encoded words in field values.
           If no field name is specified, returns a hash-ref containing all  header  fields  and  array-refs  of
           their values.  If a (case <u>in</u>sensitive) field name is specified, in list context returns a list of the
           values  of  all  header  fields of that name, in the order they occurred in the message header, or in
           scalar context returns the value of the first header field of that name (or <b>undef</b> if no  such  header
           field exists).

       <b>body</b>: returns <u>string</u>
           Returns the raw message body as bytes (see bytes, and "bytes" in PerlIO).

       <u>Control</u> <u>properties</u>

       <b>control</b>: returns <u>hash-ref</u> of <u>string</u>; throws Perl exceptions
       <b>control($field)</b>: returns <u>list</u> of <u>string</u>; throws Perl exceptions
           Reads  and  parses  all  of the message's control files once.  If a (case sensitive) field name (i.e.
           record type) is specified, returns a list of the values of all control fields of that  name,  in  the
           order  they  occurred  in  the  control  file(s).   If no field name is specified, returns a hash-ref
           containing all control fields and array-refs of their values.  Throws a Perl exception if any of  the
           control files cannot be read.

       <b>authenticated</b>: returns <u>boolean</u>
           Returns  the  authentication  information  (guaranteed  to  be  a <b>true</b> value) if the message has been
           submitted by an authenticated user.  Returns <b>false</b> otherwise.

           <u>Note</u>:  The authentication status and information is currently determined and taken from the message's
           first (i.e. the trustworthy) "Received" header field.  This is guaranteed to work correctly,  but  is
           not  very  elegant,  so  this is subject to change.  As soon as Courier supports storing the complete
           authentication info (including the authenticated user name) in a control  field,  <u>that</u>  will  be  the
           preferred  source.   This  mostly just means that the <u>format</u> of the authentication info will probably
           change in the future.

       <b>authenticated_user</b>: returns <u>string</u>
           Returns the user name that was used for authentication during submission  of  the  message.   Returns
           <b>undef</b> if no authentication took place.

       <b>trusted</b>: returns <u>boolean</u>
           Returns  a  boolean value indicating whether the message is trusted.  Currently, trusted messages are
           defined to be messages directly  submitted  by  an  authenticated  user.   For  details  on  how  the
           authenticated status is determined, see the description of the "authenticated" property.

       <b>sender</b>: returns <u>string</u>
           Returns the message's envelope sender (from the "MAIL FROM" SMTP command).

       <b>recipients</b>: returns <u>list</u> of <u>string</u>
           Returns all of the message's envelope recipients (from the "RCPT TO" SMTP commands).

       <b>remote_host</b>: returns <u>string</u>
           Returns the IP address of the SMTP client that submitted the message.

       <b>remote_host_name</b>: returns <u>string</u>
           Returns  the  host  name  (gained  by  Courier  through a DNS reverse lookup) of the SMTP client that
           submitted the message, if available.

       <b>remote_host_helo</b>: returns <u>string</u>
           Returns the HELO string that the SMTP client specified, if available.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For AVAILABILITY, SUPPORT, and LICENSE information, see Courier::Filter::Overview.

</pre><h4><b>AUTHOR</b></h4><pre>
       Julian Mehnle &lt;<a href="mailto:julian@mehnle.net">julian@mehnle.net</a>&gt;

perl v5.20.2                                       2015-11-28                              <u>Courier::<a href="../man3pm/Message.3pm.html">Message</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>