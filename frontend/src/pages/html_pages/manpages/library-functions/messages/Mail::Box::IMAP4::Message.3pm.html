<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Box::IMAP4::Message - one message on a IMAP4 server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-box-imap4-perl">libmail-box-imap4-perl_3.009-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Box::IMAP4::Message - one message on a IMAP4 server

</pre><h4><b>INHERITANCE</b></h4><pre>
        Mail::Box::IMAP4::Message
          is a Mail::Box::Net::Message
          is a Mail::Box::Message
          is a Mail::Message
          is a Mail::Reporter

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $folder = new Mail::Box::IMAP4 ...
        my $message = $folder-&gt;<a href="../man10/message.10.html">message</a>(10);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A "Mail::Box::IMAP4::Message" represents one message on a IMAP4 server, maintained by a Mail::Box::IMAP4
       folder. Each message is stored as separate entity on the server, and maybe temporarily in your program as
       well.

       Extends "DESCRIPTION" in Mail::Box::Net::Message.

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Mail::Box::Net::Message.

   <b>Constructors</b>
       Extends "Constructors" in Mail::Box::Net::Message.

       $obj-&gt;<b>clone</b>(%options)
           Inherited, see "Constructors" in Mail::Message

       Mail::Box::IMAP4::Message-&gt;<b>new</b>(%options)
            -Option      --Defined in             --Default
             body          Mail::Message            undef
             body_type     Mail::Box::Message       Mail::Message::Body::Lines
             cache_body                             &lt;false&gt;
             cache_head                             &lt;false&gt;
             cache_labels                           &lt;false&gt;
             deleted       Mail::Message            &lt;false&gt;
             field_type    Mail::Message            undef
             folder        Mail::Box::Message       &lt;required&gt;
             head          Mail::Message            undef
             head_type     Mail::Message            Mail::Message::Head::Complete
             labels        Mail::Message            {}
             log           Mail::Reporter           'WARNINGS'
             messageId     Mail::Message            undef
             modified      Mail::Message            &lt;false&gt;
             size          Mail::Box::Message       undef
             trace         Mail::Reporter           'WARNINGS'
             trusted       Mail::Message            &lt;false&gt;
             unique        Mail::Box::Net::Message  &lt;unique string&gt;
             write_labels                           &lt;true&gt;

           body =&gt; OBJECT
           body_type =&gt; CODE|CLASS
           cache_body =&gt; BOOLEAN
           cache_head =&gt; BOOLEAN
           cache_labels =&gt; BOOLEAN
             All  standard  IMAP  labels  can be cached on the local server to improve speed.  This has the same
             dangers as setting "write_labels" to false.  The caching starts when the first label of the message
             was read.

           deleted =&gt; BOOLEAN
           field_type =&gt; CLASS
           folder =&gt; FOLDER
           head =&gt; OBJECT
           head_type =&gt; CLASS
           labels =&gt; ARRAY|HASH
           log =&gt; LEVEL
           messageId =&gt; STRING
           modified =&gt; BOOLEAN
           size =&gt; INTEGER
           trace =&gt; LEVEL
           trusted =&gt; BOOLEAN
           unique =&gt; STRING
           write_labels =&gt; BOOLEAN
             When a label is changed or its value read, using <b>label()</b>, that info should  be  sent  to  the  IMAP
             server.   But,  this action could be superfluous, for instance because the label was already set or
             clear, and communication is expensive.  On the other hand,  someone  else  may  use  IMAP  to  make
             changes in the same folder, and will get the updates too late or never...

   <b>Constructing</b> <b>a</b> <b>message</b>
       Extends "Constructing a message" in Mail::Box::Net::Message.

       $obj-&gt;<b>bounce</b>( [&lt;$rg_object|%options&gt;] )
           Inherited, see "Constructing a message" in Mail::Message::Construct::Bounce

       Mail::Box::IMAP4::Message-&gt;<b>build</b>( [$message|$part|$body], $content )
           Inherited, see "Constructing a message" in Mail::Message::Construct::Build

       Mail::Box::IMAP4::Message-&gt;<b>buildFromBody</b>($body, [$head], $headers)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Build

       $obj-&gt;<b>forward</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardAttach</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardEncapsulate</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardInline</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardNo</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardPostlude</b>()
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardPrelude</b>()
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       $obj-&gt;<b>forwardSubject</b>(STRING)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Forward

       Mail::Box::IMAP4::Message-&gt;<b>read</b>($fh|STRING|SCALAR|ARRAY, %options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Read

       $obj-&gt;<b>rebuild</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Rebuild

       $obj-&gt;<b>reply</b>(%options)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Reply

       $obj-&gt;<b>replyPrelude</b>( [STRING|$field|$address|ARRAY-$of-$things] )
           Inherited, see "Constructing a message" in Mail::Message::Construct::Reply

       $obj-&gt;<b>replySubject</b>(STRING)
       Mail::Box::IMAP4::Message-&gt;<b>replySubject</b>(STRING)
           Inherited, see "Constructing a message" in Mail::Message::Construct::Reply

   <b>The</b> <b>message</b>
       Extends "The message" in Mail::Box::Net::Message.

       $obj-&gt;<b>container</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>copyTo</b>($folder, %options)
           Inherited, see "The message" in Mail::Box::Message

       $obj-&gt;<b>folder</b>( [$folder] )
           Inherited, see "The message" in Mail::Box::Message

       $obj-&gt;<b>isDummy</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>isPart</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>messageId</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>moveTo</b>($folder, %options)
           Inherited, see "The message" in Mail::Box::Message

       $obj-&gt;<b>partNumber</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>print</b>( [$fh] )
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>send</b>( [$mailer], %options )
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>seqnr</b>( [$integer] )
           Inherited, see "The message" in Mail::Box::Message

       $obj-&gt;<b>size</b>()
           Returns  the size of this message.  If the message is still on the remote server, IMAP is used to ask
           for the size.  When the message is already loaded onto the local  system,  the  size  of  the  parsed
           message is taken.  These sizes can differ because the difference in line-ending representation.

       $obj-&gt;<b>toplevel</b>()
           Inherited, see "The message" in Mail::Message

       $obj-&gt;<b>unique</b>( [STRING|undef] )
           Inherited, see "The message" in Mail::Box::Net::Message

       $obj-&gt;<b>write</b>( [$fh] )
           Inherited, see "The message" in Mail::Message

   <b>The</b> <b>header</b>
       Extends "The header" in Mail::Box::Net::Message.

       $obj-&gt;<b>bcc</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>cc</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>date</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>destinations</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>from</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>get</b>($fieldname)
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>guessTimestamp</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>head</b>( [$head] )
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>nrLines</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>sender</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>study</b>($fieldname)
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>subject</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>timestamp</b>()
           Inherited, see "The header" in Mail::Message

       $obj-&gt;<b>to</b>()
           Inherited, see "The header" in Mail::Message

   <b>The</b> <b>body</b>
       Extends "The body" in Mail::Box::Net::Message.

       $obj-&gt;<b>body</b>( [$body] )
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>contentType</b>()
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>decoded</b>(%options)
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>encode</b>(%options)
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>isMultipart</b>()
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>isNested</b>()
           Inherited, see "The body" in Mail::Message

       $obj-&gt;<b>parts</b>( [&lt;'ALL'|'ACTIVE'|'DELETED'|'RECURSE'|$filter&gt;] )
           Inherited, see "The body" in Mail::Message

   <b>Flags</b>
       Extends "Flags" in Mail::Box::Net::Message.

       $obj-&gt;<b>delete</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>deleted</b>( [BOOLEAN] )
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>isDeleted</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>isModified</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>label</b>($label|PAIRS)
           With  only  one  argument, the value related to $label is returned.  With more that one argument, the
           list is interpreted a label-value PAIRS to be set.

           The IMAP protocol defines its own names for the labels, which must be set immediately to inform other
           IMAP clients which may have the same folder open. But that can  be  changed  with  new(write_labels).
           Some labels are translated to the corresponding IMAP system labels.

       $obj-&gt;<b>labels</b>()
           Get  the  names  of  all labels (LIST context, not efficient in IMAP4), or a reference to a hash with
           labels.  You should only use the returned hash to read the labels, because changes made  to  it  will
           not be passed to the remote server.  See <b>labels()</b> to set values.

       $obj-&gt;<b>labelsToStatus</b>()
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>modified</b>( [BOOLEAN] )
           Inherited, see "Flags" in Mail::Message

       $obj-&gt;<b>statusToLabels</b>()
           Inherited, see "Flags" in Mail::Message

   <b>The</b> <b>whole</b> <b>message</b> <b>as</b> <b>text</b>
       Extends "The whole message as text" in Mail::Box::Net::Message.

       $obj-&gt;<b>file</b>()
           Inherited, see "The whole message as text" in Mail::Message::Construct::Text

       $obj-&gt;<b>lines</b>()
           Inherited, see "The whole message as text" in Mail::Message::Construct::Text

       $obj-&gt;<b>printStructure</b>( [$fh|undef],[$indent] )
           Inherited, see "The whole message as text" in Mail::Message::Construct::Text

       $obj-&gt;<b>string</b>()
           Inherited, see "The whole message as text" in Mail::Message::Construct::Text

   <b>Internals</b>
       Extends "Internals" in Mail::Box::Net::Message.

       $obj-&gt;<b>clonedFrom</b>()
           Inherited, see "Internals" in Mail::Message

       Mail::Box::IMAP4::Message-&gt;<b>coerce</b>($message, %options)
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>diskDelete</b>()
           Inherited, see "Internals" in Mail::Box::Message

       $obj-&gt;<b>fetch</b>( [$info, ...] )
           Use  the  IMAP's  "UID FETCH IMAP" command to get some data about this message.  The $info request is
           passed to <b>Mail::Box::IMAP4::fetch()</b>.  Without $info, "ALL" information is retrieved and returned as a
           HASH.

       $obj-&gt;<b>isDelayed</b>()
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>loadBody</b>()
           Inherited, see "Internals" in Mail::Box::Net::Message

       $obj-&gt;<b>readBody</b>( $parser, $head, [$bodytype] )
           Inherited, see "Internals" in Mail::Box::Message

       $obj-&gt;<b>readFromParser</b>( $parser, [$bodytype] )
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>readHead</b>( $parser, [$class] )
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>recursiveRebuildPart</b>($part, %options)
           Inherited, see "Internals" in Mail::Message::Construct::Rebuild

       $obj-&gt;<b>storeBody</b>($body)
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>takeMessageId</b>( [STRING] )
           Inherited, see "Internals" in Mail::Message

       $obj-&gt;<b>writeDelayed</b>($imap)
           Write all delayed information, like label changes, to the server.   This  is  done  under  force,  so
           should  even  be  done for folders opened without write-access. This method is called indirectly by a
           <b>Mail::Box::write()</b> or <b>Mail::Box::close()</b>.

           The $imap argument is a Mail::IMAPClient which has the right folder already selected.

           Writing changes to the remote folder is not without hassle: IMAP4 (or  is  it  only  Mail::IMAPClient
           doesn't  support  replacing header or body.  Therefore, when either of them change, the whole message
           is rewritten to the server (which is supported), and the original flagged for deletion.

   <b>Error</b> <b>handling</b>
       Extends "Error handling" in Mail::Box::Net::Message.

       $obj-&gt;<b>AUTOLOAD</b>()
           Inherited, see "METHODS" in Mail::Message::Construct

       $obj-&gt;<b>addReport</b>($object)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
       Mail::Box::IMAP4::Message-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>errors</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>log</b>( [$level, [$strings]] )
       Mail::Box::IMAP4::Message-&gt;<b>log</b>( [$level, [$strings]] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logPriority</b>($level)
       Mail::Box::IMAP4::Message-&gt;<b>logPriority</b>($level)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logSettings</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>notImplemented</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>report</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>reportAll</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>shortSize</b>( [$value] )
       Mail::Box::IMAP4::Message-&gt;<b>shortSize</b>( [$value] )
           Inherited, see "Error handling" in Mail::Message

       $obj-&gt;<b>shortString</b>()
           Inherited, see "Error handling" in Mail::Message

       $obj-&gt;<b>trace</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>warnings</b>()
           Inherited, see "Error handling" in Mail::Reporter

   <b>Cleanup</b>
       Extends "Cleanup" in Mail::Box::Net::Message.

       $obj-&gt;<b>DESTROY</b>()
           Inherited, see "Cleanup" in Mail::Reporter

       $obj-&gt;<b>destruct</b>()
           Inherited, see "Cleanup" in Mail::Box::Message

</pre><h4><b>DETAILS</b></h4><pre>
       Extends "DETAILS" in Mail::Box::Net::Message.

   <b>Structure</b> <b>of</b> <b>a</b> <b>Message</b>
       Extends "Structure of a Message" in Mail::Box::Net::Message.

   <b>Message</b> <b>object</b> <b>implementation</b>
       Extends "Message object implementation" in Mail::Box::Net::Message.

   <b>Message</b> <b>class</b> <b>implementation</b>
       Extends "Message class implementation" in Mail::Box::Net::Message.

   <b>Labels</b>
       Extends "Labels" in Mail::Box::Net::Message.

       <u>Predefined</u> <u>labels</u>

       Extends "Predefined labels" in Mail::Box::Net::Message.

       <u>Status</u> <u>and</u> <u>X-Status</u> <u>fields</u>

       Extends "Status and X-Status fields" in Mail::Box::Net::Message.

       <u>IMAP</u> <u>protocol</u> <u>flags</u>

       Labels (or flags) are known to all folder formats, but differ how they are stored.  Some folder types use
       message header lines to keep the labels, other use a separate file.  The IMAP protocol does  not  specify
       how the labels are kept on the server, but does specify how they are named.

       The label names as defined by the IMAP protocol are standardized into the MailBox standard to hide folder
       differences.  The following translations are always performed:

        \Seen     =&gt; seen
        \Answered =&gt; replied
        \Flagged  =&gt; flagged
        \Deleted  =&gt; deleted
        \Draft    =&gt; draft
        \Recent   =&gt; NOT old

       <b>.</b> <b>Example:</b> <b>of</b> <b>label</b> <b>translations</b>

        $imap-&gt;<a href="../man3/message.3.html">message</a>(3)-&gt;label(replied =&gt; 1, draft =&gt; 0);

       will result in a IMAP protocol statements like

        A003 STORE 4 +FLAGS (\Answered)
        A003 STORE 4 -FLAGS (\Draft)

       <u>Other</u> <u>labels</u>

       Of  course,  your  program  may  be in need for more labels than those provided by the protocol.  You can
       still use these: they stay locally (and are lost when the  folder  is  closed).   Some  IMAP4  extensions
       permit more labels than the basic RFC, but that is not yet supported by this implementation.

       <u>Caching</u> <u>labels</u>

       When  you  ask for one or more flags of a message more than once, you may improve the overall performance
       by setting new(cache_labels) to "YES".  However, this may cause inconsistencies when multiple clients use
       the same folder on the IMAP server.

       You may also delay the label updates to the server until the folder is closed (or for ever when read-only
       is required).  When <b>Mail::Box::write()</b> or <b>Mail::Box::close()</b> is called, it is decided  whether  to  throw
       all changes away or write after all.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error: Cannot coerce a $class object into a $class object
       Error: Cannot include forward source as $include.
           Unknown  alternative  for  the  forward(include).   Valid  choices  are "NO", "INLINE", "ATTACH", and
           "ENCAPSULATE".

       Error: Cannot include reply source as $include.
           Unknown alternative for the "include" option of <b>reply()</b>.   Valid  choices  are  "NO",  "INLINE",  and
           "ATTACH".

       Error: Method bounce requires To, Cc, or Bcc
           The message <b>bounce()</b> method forwards a received message off to someone else without modification; you
           must  specified  it's  new  destination.   If  you  have the urge not to specify any destination, you
           probably are looking for <b>reply()</b>. When you wish to modify the content, use <b>forward()</b>.

       Error: Method forwardAttach requires a preamble
       Error: Method forwardEncapsulate requires a preamble
       Error: No address to create forwarded to.
           If a forward message is created, a destination address must be specified.

       Error: No default mailer found to send message.
           The message <b>send()</b> mechanism had not enough information to automatically find a mail  transfer  agent
           to sent this message.  Specify a mailer explicitly using the "via" options.

       Error: No rebuild rule $name defined.
       Error: Only <b>build()</b> Mail::Message's; they are not in a folder yet
           You may wish to construct a message to be stored in a some kind of folder, but you need to do that in
           two  steps.   First,  create  a  normal  Mail::Message,  and  then add it to the folder.  During this
           <b>Mail::Box::addMessage()</b> process, the message will get <b>coerce()</b>-d into the right message type,  adding
           storage information and the like.

       Error: Package $package does not implement $method.
           Fatal  error:  the specific package (or one of its superclasses) does not implement this method where
           it should. This message means that some other related classes do implement this  method  however  the
           class  at  hand does not.  Probably you should investigate this and probably inform the author of the
           package.

       Error: Unable to read delayed body.
       Error: Unable to read delayed head.
       Error: coercion starts with some object

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This module is part of Mail-Box-IMAP4 distribution version 3.009,  built  on  April  18,  2025.  Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer]. For other contributors see ChangeLog.

       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-19                     <u>Mail::Box::IMAP4::<a href="../man3pm/Message.3pm.html">Message</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>