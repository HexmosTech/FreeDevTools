<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zmq_recvmsg - receive a message part from a socket</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libzmq3-dev">libzmq3-dev_4.3.5-1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zmq_recvmsg - receive a message part from a socket

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>int</b> <b>zmq_recvmsg</b> <b>(void</b> <u>*socket</u><b>,</b> <b>zmq_msg_t</b> <u>*msg</u><b>,</b> <b>int</b> <u>flags</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>zmq_recvmsg()</u> function shall receive a message part from the socket referenced by the <u>socket</u> argument
       and store it in the message referenced by the <u>msg</u> argument. Any content previously stored in <u>msg</u> shall be
       properly deallocated. If there are no message parts available on the specified <u>socket</u> the <u>zmq_recvmsg()</u>
       function shall block until the request can be satisfied. The <u>flags</u> argument is a combination of the flags
       defined below:

       <b>ZMQ_DONTWAIT</b>
           Specifies that the operation should be performed in non-blocking mode. If there are no messages
           available on the specified <u>socket</u>, the <u>zmq_recvmsg()</u> function shall fail with <u>errno</u> set to EAGAIN.

           <b>Note</b>

           this API method is deprecated in favor of <a href="../man3/zmq_msg_recv.3.html">zmq_msg_recv</a>(3).

   <b>Multi-part</b> <b>messages</b>
       A 0MQ message is composed of 1 or more message parts. Each message part is an independent <u>zmq_msg_t</u> in
       its own right. 0MQ ensures atomic delivery of messages: peers shall receive either all <u>message</u> <u>parts</u> of a
       message or none at all. The total number of message parts is unlimited except by available memory.

       An application that processes multi-part messages must use the <u>ZMQ_RCVMORE</u> <b><a href="../man3/zmq_getsockopt.3.html">zmq_getsockopt</a></b>(3) option after
       calling <u>zmq_recvmsg()</u> to determine if there are further parts to receive.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <u>zmq_recvmsg()</u> function shall return number of bytes in the message if successful. Otherwise it shall
       return -1 and set <u>errno</u> to one of the values defined below.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EAGAIN</b>
           Either the timeout set via the socket-option ZMQ_RCVTIMEO (see <b><a href="../man3/zmq_setsockopt.3.html">zmq_setsockopt</a></b>(3)) has been reached
           (flag ZMQ_DONTWAIT not set) without being able to read a message from the socket or there are no
           messages available at the moment (flag ZMQ_DONTWAIT set) and the operation would block.

       <b>ENOTSUP</b>
           The <u>zmq_recvmsg()</u> operation is not supported by this socket type.

       <b>EFSM</b>
           The <u>zmq_recvmsg()</u> operation cannot be performed on this socket at the moment due to the socket not
           being in the appropriate state. This error may occur with socket types that switch between several
           states, such as ZMQ_REP. See the <u>messaging</u> <u>patterns</u> section of <b><a href="../man3/zmq_socket.3.html">zmq_socket</a></b>(3) for more information.

       <b>ETERM</b>
           The 0MQ <u>context</u> associated with the specified <u>socket</u> was terminated.

       <b>ENOTSOCK</b>
           The provided <u>socket</u> was invalid.

       <b>EINTR</b>
           The operation was interrupted by delivery of a signal before a message was available.

       <b>EFAULT</b>
           The message passed to the function was invalid.

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>Receiving</b> <b>a</b> <b>message</b> <b>from</b> <b>a</b> <b>socket</b>.

           /* Create an empty 0MQ message */
           zmq_msg_t msg;
           int rc = zmq_msg_init (&amp;msg);
           assert (rc == 0);
           /* Block until a message is available to be received from socket */
           rc = zmq_recvmsg (socket, &amp;msg, 0);
           assert (rc != -1);
           /* Release message */
           zmq_msg_close (&amp;msg);

       <b>Receiving</b> <b>a</b> <b>multi-part</b> <b>message</b>.

           int more;
           size_t more_size = sizeof (more);
           do {
               /* Create an empty 0MQ message to hold the message part */
               zmq_msg_t part;
               int rc = zmq_msg_init (&amp;part);
               assert (rc == 0);
               /* Block until a message is available to be received from socket */
               rc = zmq_recvmsg (socket, &amp;part, 0);
               assert (rc != -1);
               /* Determine if more message parts are to follow */
               rc = zmq_getsockopt (socket, ZMQ_RCVMORE, &amp;more, &amp;more_size);
               assert (rc == 0);
               zmq_msg_close (&amp;part);
           } while (more);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/zmq_recv.3.html">zmq_recv</a></b>(3) <b><a href="../man3/zmq_send.3.html">zmq_send</a></b>(3) <b><a href="../man3/zmq_getsockopt.3.html">zmq_getsockopt</a></b>(3) <b><a href="../man3/zmq_setsockopt.3.html">zmq_setsockopt</a></b>(3) <b><a href="../man7/zmq_socket.7.html">zmq_socket</a></b>(7) <b><a href="../man7/zmq.7.html">zmq</a></b>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       This page was written by the 0MQ community. To make a change please read the 0MQ Contribution Policy at
       <b><a href="http://www.zeromq.org/docs">http://www.zeromq.org/docs</a>:contributing</b>.

0MQ 4.3.5                                          03/31/2024                                     <u><a href="../man3/ZMQ_RECVMSG.3.html">ZMQ_RECVMSG</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>