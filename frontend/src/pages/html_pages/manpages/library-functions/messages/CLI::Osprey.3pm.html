<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CLI::Osprey - MooX::Options + MooX::Cmd + Sanity</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcli-osprey-perl">libcli-osprey-perl_0.08-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CLI::Osprey - MooX::Options + MooX::Cmd + Sanity

</pre><h4><b>VERSION</b></h4><pre>
       version 0.08

</pre><h4><b>SYNOPSIS</b></h4><pre>
       in Hello.pm

           package Hello;
           use Moo;
           use CLI::Osprey;

           option 'message' =&gt; (
               is =&gt; 'ro',
               format =&gt; 's',
               doc =&gt; 'The message to display',
               default =&gt; 'Hello world!',
           );

           sub run {
               my ($self) = @_;
               print $self-&gt;message, "\n";
           }

       In hello.pl

           use Hello;
           Hello-&gt;new_with_options-&gt;run;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       CLI::Osprey is a module to assist in writing commandline applications with M* OO modules (Moose, Moo,
       Mo). With it, you structure your app as one or more modules, which get instantiated with the commandline
       arguments as attributes.  Arguments are parsed using Getopt::Long::Descriptive, and both long and short
       help messages as well as complete manual pages are automatically generated. An app can be a single
       command with options, or have sub-commands (like "git"). Sub-commands can be defined as modules (with
       options of their own) or as simple coderefs.

   <b>Differences</b> <b>from</b> <b>MooX::Options</b>
       Osprey is deliberately similar to MooX::Options, and porting an app that uses MooX::Options to Osprey
       should be fairly simple in most cases. However there are a few important differences:

       •   Osprey  is  pure-perl,  without  any  mandatory  XS dependencies, meaning it can be used in fatpacked
           scripts, and other situations where you may need to run on diverse machines, where a C  compiler  and
           control over the ennvironment aren't guaranteed.

       •   Osprey's  support  for  sub-commands is built-in from the beginning. We think this makes for a better
           experience than MooX::Options + MooX::Cmd.

       •   While MooX::Options requires an option's primary name to be the same as the attribute that holds  it,
           and  MooX::Cmd  derives  a  sub-command's name from the name of the module that implements it, Osprey
           separates these, so  that  Perl  identifier  naming  conventions  don't  dictate  your  command  line
           interface.

       •   Osprey  doesn't  use  an  automatic module finder (like Module::Pluggable) to locate modules for sub-
           commands; their names are given explicitly. This small amount of additional  typing  gives  you  more
           control and less fragility.

       There are also a few things MooX::Options has that Osprey lacks. While they may be added in the future, I
       haven't  seen  the  need  yet.  Currently  known  missing  feeatures are JSON options, "config_from_file"
       support, "autosplit", and "autorange".

       For JSON support, you can use a coercion on the attribute,  turning  it  from  a  string  to  a  ref  via
       "decode_json".

       To  default  an  app's  options from a config file, you may want to do something like this in your script
       file:

           use JSON 'decode_json';
           use Path::Tiny;

           MyApp-&gt;new_with_options(
               map decode_json(path($_)-&gt;slurp),
               grep -f,
               "$ENV{HOME}/.myapprc"
           )-&gt;run;

       Provided that "prefer_commandline" is true (which is the default), any options in ".myapprc" will be used
       as defaults if that file exists, but will still be overrideable from the commandline.

</pre><h4><b>IMPORTED</b> <b>METHODS</b></h4><pre>
       The following methods, will be imported into a class that uses CLI::Osprey:

   <b>new_with_options</b>
       Parses commandline arguments, validates them, and calls the "new" method with the  resulting  parameters.
       Any parameters passed to "new_with_options" will also be passed to "new"; the "prefer_commandline" import
       option controls which overrides which.

   <b>option</b>
       The  "option"  keyword  acts  like  "has"  (and  accepts  all of the arguments that "has" does), but also
       registers the attribute as a commandline option. See "OPTION PARAMETERS" for usage.

   <b>osprey_usage($code,</b> <b>@messages)</b>
       Displays a short usage message, the same as if the app was invoked with the "-h"  option.  Also  displays
       the  lines of text in @messages if any are passed. If $code is passed a defined value, exits with that as
       a status.

   <b>osprey_help($code)</b>
       Displays a more substantial usage message, the same as if the app was invoked with the  "--help"  option.
       If $code is passed a defined value, exits with that as a status.

   <b>osprey_man</b>
       Displays a manual page for the app, containing long descriptive text (if provided) about each command and
       option, then exits.

</pre><h4><b>IMPORT</b> <b>PARAMETERS</b></h4><pre>
       The  parameters  to  "use  CLI::Osprey"  serve  two roles: to customize Osprey's behavior, and to provide
       information about the app and its options for use in the usage messages. They are:

   <b>abbreviate</b>
       Default: true.

       If "abbreviate" is set to a true value, then long options can be abbreviated to the point of  uniqueness.
       That  is,  "--long-option-name"  can  be called as "--lon" as long as there are no other options starting
       with those letters. An option can always be called by its full name, even if  it  is  a  prefix  of  some
       longer  option's name. If "abbreviate" is false, options must always be called by their full names (or by
       a defined short name).

   <b>added_order</b>
       Default: true.

       If "added_order" is set to a true value, then two options with the same "order" (or  none  at  all)  will
       appear  in the help text in the same order as their "option" keywords were executed. If it is false, they
       will appear in alphabetical order instead.

   <b>desc</b>
       Default: none.

       A short description of the command, to be shown at the top of the manual page,  and  in  the  listing  of
       subcommands if this command is a subcommand.

   <b>description_pod</b>
       Default: none.

       A description, of any length, in POD format, to be included as the "DESCRIPTION" section of the command's
       manual page.

   <b>extra_pod</b>
       Default: none.

       Arbitrary extra POD to be included between the "DESCRIPTION" and "OPTIONS" sections of the manual page.

   <b>getopt_options</b>
       Default: "['require_order']".

       Contains  a  list  of  options  to  control  option  parsing  behavior (see "Configuring Getopt::Long" in
       Getopt::Long). Note, however, that many of these are not helpful with Osprey, and  that  using  "permute"
       will likely break subcommands entirely. MooX::Options calls this parameter "flavour".

   <b>prefer_commandline</b>
       Default: true.

       If  true,  command-line  options  override  key/value  pairs  passed to "new_with_options". If false, the
       reverse is true.

   <b>preserve_argv</b>
       Default: false.

       If true, the @ARGV array will be localized for the duration of "new_with_options", and will  be  left  in
       the  same  state  after  option  parsing  as it was before. If false, the @ARGV array will be modified by
       option parsing, removing any  recognized  options,  values,  and  subcommands,  and  leaving  behind  any
       positional parameters or anything after and including a "--" separator.

   <b>usage_string</b>
       Default: "USAGE: $program_name %o"

       Provides  the  header  of  the usage message printed in response to the "-h" option or an error in option
       processing. The format of the string is described in "$usage_desc" in Getopt::Long::Descriptive.

   <b>on_demand</b>
       Default: false

       If set to a true value, the commands' modules won't be loaded at compile time,  but  if  the  command  is
       invoked.  This  is  useful  for  minimizing  compile time if the application has a lot of commands or the
       commands are on the heavy side. Note that enabling the feature may interfere with the ability to  fatpack
       the application.

</pre><h4><b>OPTION</b> <b>PARAMETERS</b></h4><pre>
   <b>doc</b>
       Default: None.

       Documentation  for  the option, used in "--help" output. For best results, should be no more than a short
       paragraph.

   <b>format</b>
       Default: None (i.e. boolean).

       The format of the option argument, same as Getopt::Long. An option with  no  format  is  a  boolean,  not
       taking an additional argument. Other formats are:

       s   string

       i   decimal integer

       o   integer (supports "0x" for hex, "0b" for binary, and 0 for octal).

       f   floating-point number

   <b>format_doc</b>
       Default: depends on "format".

       Describes  the  type  of  an  option's  argument. For example, if the string option "copy-to" specifies a
       hostname, you can give it "format_doc =&gt; "hostname"" and it will display as "<b>--copy-to</b> <u>hostname</u>"  in  the
       help text, instead of "<b>--copy-to</b> <u>string</u>".

   <b>hidden</b>
       Default: <b>false</b>.

       A "hidden" option will be recognized, but not listed in automatically generated documentation.

   <b>negatable</b>
       Default: <b>false</b>.

       Adds  the  "--no-"  version  of  the  option,  which  sets  it  to  a  false value.  Equivalent to "!" in
       Getopt::Long.

   <b>option</b>
       Default: Same as the attribute name, with underscores replaced by hyphens.

       Allows the command-line option for an attribute to differ from the  attribute  name  --  like  "init_arg"
       except for the commandline.

   <b>long_doc</b>
       Default: none.

       Long  documentation  of  the option for the manual page. This is POD, so POD formatting is available, and
       paragraphs need to be separated by "\n\n". If not provided, the short documentation will be used instead.

   <b>order</b>
       Default: None.

       Allows controlling the order that options are listed in the help text. Options without an order attribute
       are sorted by the order their "option"  statements  are  executed,  if  "added_order"  is  true,  and  by
       alphabetical order otherwise.  They are placed as though they had order 9999, so use small values to sort
       before automaticall-sorted options, and values of 10000 and up to sort at the end.

   <b>repeatable</b>
       Default: <b>false</b>.

       Allows  an  option to be specified more than once. When used on a "boolean" option with no "format", each
       appearace of the option will increment the value by 1 (equivalent to "+" in Getopt::Long. When used on an
       option with arguments, produces an arrayref, one value per appearance of the option.

   <b>required</b>
       Default: <b>false</b>.

       This is a Moo/Moose feature honored by Osprey. A "required" attribute must be passed on  the  commandline
       unless it's passed to the constructor. Generated documentation will show the option as non-optional.

   <b>short</b>
       Default: None.

       Gives an option a single-character "short" form, e.g. "-v" for "--verbose".

   <b>spacer_before</b>
       Default: <b>false</b>.

       Causes a blank line to appear before this option in help output.

   <b>spacer_after</b>
       Default: <b>false</b>.

       Causes a blank line to appear after this option in help output.

</pre><h4><b>SUBCOMMANDS</b></h4><pre>
       An  Osprey  command  can  have  subcommands  with  their  own  options, documentation, etc., allowing for
       complicated applications under the roof of a single command.  Osprey will parse the options  for  all  of
       the  commands  in  the chain, and construct them in top-to-bottom order, with each subcommand receiving a
       reference to its parent.

   <b>Subcommand</b> <b>Classes</b>
       A subcommand can be another class, which also uses "CLI::Osprey". For example:

           package MyApp;
           use Moo;
           use CLI::Osprey;

           option verbose =&gt; (
               is =&gt; 'ro',
               short =&gt; 'v',
           );

           subcommand frobnicate =&gt; 'MyApp::Frobnicate';

           package MyApp::Frobnicate;
           use Moo;
           use CLI::Osprey;

           option target =&gt; (
               is =&gt; 'ro',
               format =&gt; 's',
           );

           sub run {
               my ($self) = @_;
               if ($self-&gt;parent_command-&gt;verbose) {
                   say "Be dangerous, and unpredictable... and make a lot of noise.";
               }
               $self-&gt;do_something_with($self-&gt;target);
           }

   <b>Inline</b> <b>Subcommands</b>
       A subcommand can also be specified as a coderef, for when  a  separate  class  would  be  excessive.  For
       example:

           package Greet;
           use Moo;
           use CLI::Osprey;

           option target =&gt; (
               is =&gt; 'ro',
               default =&gt; "world",
           );

           subcommand hello =&gt; sub {
               my ($self, $parent) = @_;
               say "Hello ", $parent-&gt;target;
           };

           subcommand goodbye =&gt; sub {
               my ($self, $parent) = @_;
               say "Goodbye ", $parent-&gt;target;
           };

       which  can  be  invoked  as  "greet  --target  world  hello".  Inline  subcommands  are implemented using
       CLI::Osprey::InlineSubcommand.

</pre><h4><b>THANKS</b></h4><pre>
       This module is based heavily on code from MooX::Options and takes strong inspiration from  MooX::Cmd  and
       MooX::Options::Actions. Thanks to celogeek, Jens Reshack, Getty, Tom Bloor, and all contributors to those
       modules. Thanks to mst for prodding me to do this. Thanks Grinnz for helping me update my dzillage.

</pre><h4><b>AUTHOR</b></h4><pre>
       Andrew Rodland &lt;<a href="mailto:arodland@cpan.org">arodland@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2020 by Andrew Rodland.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.32.1                                       2021-10-21                                   <u>CLI::<a href="../man3pm/Osprey.3pm.html">Osprey</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>