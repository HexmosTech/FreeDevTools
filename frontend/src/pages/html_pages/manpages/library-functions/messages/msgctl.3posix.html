<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       msgctl — XSI message control operations

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;sys/msg.h&gt;

       int msgctl(int <u>msqid</u>, int <u>cmd</u>, struct msqid_ds *<u>buf</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>msgctl</u>()  function  operates on XSI message queues (see the Base Definitions volume of POSIX.1‐2017,
       <u>Section</u> <u>3.226</u>, <u>Message</u> <u>Queue</u>).  It is unspecified whether this function interoperates with  the  realtime
       interprocess communication facilities defined in <u>Section</u> <u>2.8</u>, <u>Realtime</u>.

       The <u>msgctl</u>() function shall provide message control operations as specified by <u>cmd</u>.  The following values
       for <u>cmd</u>, and the message control operations they specify, are:

       IPC_STAT    Place  the  current value of each member of the <b>msqid_ds</b> data structure associated with <u>msqid</u>
                   into the structure pointed to by  <u>buf</u>.   The  contents  of  this  structure  are  defined  in
                   <u>&lt;sys/msg.h&gt;</u>.

       IPC_SET     Set  the  value of the following members of the <b>msqid_ds</b> data structure associated with <u>msqid</u>
                   to the corresponding value found in the structure pointed to by <u>buf</u>:

                       msg_perm.uid
                       msg_perm.gid
                       msg_perm.mode
                       msg_qbytes

                   Also, the <u>msg_ctime</u> timestamp shall be set to the  current  time,  as  described  in  <u>Section</u>
                   <u>2.7.1</u>, <u>IPC</u> <u>General</u> <u>Description</u>.

                   IPC_SET  can  only  be  executed  by  a  process  with  appropriate privileges or that has an
                   effective user ID equal to the value of <b>msg_perm.cuid</b> or <b>msg_perm.uid</b> in  the  <b>msqid_ds</b>  data
                   structure  associated  with  <u>msqid</u>.  Only a process with appropriate privileges can raise the
                   value of <b>msg_qbytes</b>.

       IPC_RMID    Remove the message queue identifier specified by  <u>msqid</u>  from  the  system  and  destroy  the
                   message queue and <b>msqid_ds</b> data structure associated with it. IPC_RMD can only be executed by
                   a process with appropriate privileges or one that has an effective user ID equal to the value
                   of <b>msg_perm.cuid</b> or <b>msg_perm.uid</b> in the <b>msqid_ds</b> data structure associated with <u>msqid</u>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon  successful  completion,  <u>msgctl</u>()  shall  return  0; otherwise, it shall return -1 and set <u>errno</u> to
       indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>msgctl</u>() function shall fail if:

       <b>EACCES</b> The argument <u>cmd</u> is IPC_STAT and the calling process does not have read  permission;  see  <u>Section</u>
              <u>2.7</u>, <u>XSI</u> <u>Interprocess</u> <u>Communication</u>.

       <b>EINVAL</b> The  value  of  <u>msqid</u>  is not a valid message queue identifier; or the value of <u>cmd</u> is not a valid
              command.

       <b>EPERM</b>  The argument <u>cmd</u> is IPC_RMID or IPC_SET and the effective user ID of the calling  process  is  not
              equal  to  that  of  a  process  with  appropriate  privileges and it is not equal to the value of
              <b>msg_perm.cuid</b> or <b>msg_perm.uid</b> in the data structure associated with <u>msqid</u>.

       <b>EPERM</b>  The argument <u>cmd</u> is IPC_SET, an attempt is being made to increase to the value of <b>msg_qbytes</b>,  and
              the effective user ID of the calling process does not have appropriate privileges.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       The  POSIX  Realtime  Extension  defines  alternative  interfaces  for  interprocess communication (IPC).
       Application developers who need to use IPC should design their applications so that modules using the IPC
       routines described in <u>Section</u> <u>2.7</u>, <u>XSI</u> <u>Interprocess</u> <u>Communication</u> can  be  easily  modified  to  use  the
       alternative interfaces.

</pre><h4><b>RATIONALE</b></h4><pre>
       None.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>Section</u>   <u>2.7</u>,   <u>XSI</u>   <u>Interprocess</u>  <u>Communication</u>,  <u>Section</u>  <u>2.8</u>,  <u>Realtime</u>,  <u>mq_close</u>(),  <u>mq_getattr</u>(),
       <u>mq_notify</u>(), <u>mq_open</u>(), <u>mq_receive</u>(), <u>mq_send</u>(), <u>mq_setattr</u>(), <u>mq_unlink</u>(), <u>msgget</u>(), <u>msgrcv</u>(), <u>msgsnd</u>()

       The Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>3.226</u>, <u>Message</u> <u>Queue</u>, <b>&lt;sys_msg.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                        <u><a href="../man3POSIX/MSGCTL.3POSIX.html">MSGCTL</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>