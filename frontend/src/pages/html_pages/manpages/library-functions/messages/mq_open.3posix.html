<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       mq_open — open a message queue (<b>REALTIME</b>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/mqueue.h">mqueue.h</a>&gt;

       mqd_t mq_open(const char *<u>name</u>, int <u>oflag</u>, ...);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>mq_open</u>()  function  shall  establish  the  connection  between a process and a message queue with a
       message queue descriptor. It shall create an open message queue description that refers  to  the  message
       queue,  and  a  message  queue descriptor that refers to that open message queue description. The message
       queue descriptor is used by other functions to refer to that message queue. The <u>name</u> argument points to a
       string naming a message queue. It is unspecified whether the name appears  in  the  file  system  and  is
       visible  to  other  functions  that  take  pathnames  as  arguments.  The  <u>name</u>  argument conforms to the
       construction rules for a pathname, except that the interpretation of &lt;slash&gt; characters  other  than  the
       leading  &lt;slash&gt;  character  in  <u>name</u>  is implementation-defined, and that the length limits for the <u>name</u>
       argument are implementation-defined and need not be the  same  as  the  pathname  limits  {PATH_MAX}  and
       {NAME_MAX}.   If  <u>name</u>  begins with the &lt;slash&gt; character, then processes calling <u>mq_open</u>() with the same
       value of <u>name</u> shall refer to the same message queue object, as long as that name has not been removed. If
       <u>name</u> does not begin with the &lt;slash&gt;  character,  the  effect  is  implementation-defined.  If  the  <u>name</u>
       argument is not the name of an existing message queue and creation is not requested, <u>mq_open</u>() shall fail
       and return an error.

       A  message  queue  descriptor  may be implemented using a file descriptor, in which case applications can
       open up to at least {OPEN_MAX} file and message queues.

       The <u>oflag</u> argument requests the desired receive and/or send access to the message  queue.  The  requested
       access  permission  to receive messages or send messages shall be granted if the calling process would be
       granted read or write access, respectively, to an equivalently protected file.

       The value of <u>oflag</u> is the bitwise-inclusive OR of values from the  following  list.   Applications  shall
       specify exactly one of the first three values (access modes) below in the value of <u>oflag</u>:

       O_RDONLY    Open the message queue for receiving messages. The process can use the returned message queue
                   descriptor  with <u>mq_receive</u>(), but not <u>mq_send</u>().  A message queue may be open multiple times
                   in the same or different processes for receiving messages.

       O_WRONLY    Open the queue for  sending  messages.  The  process  can  use  the  returned  message  queue
                   descriptor  with  <u>mq_send</u>() but not <u>mq_receive</u>().  A message queue may be open multiple times
                   in the same or different processes for sending messages.

       O_RDWR      Open the queue for both receiving and sending messages.  The  process  can  use  any  of  the
                   functions  allowed  for  O_RDONLY and O_WRONLY. A message queue may be open multiple times in
                   the same or different processes for sending messages.

       Any combination of the remaining flags may be specified in the value of <u>oflag</u>:

       O_CREAT     Create a message queue. It requires two additional arguments: <u>mode</u>, which shall  be  of  type
                   <b>mode_t</b>,  and <u>attr</u>, which shall be a pointer to an <b>mq_attr</b> structure. If the pathname <u>name</u> has
                   already been used to create a message queue that still exists, then this flag shall  have  no
                   effect,  except  as  noted under O_EXCL.  Otherwise, a message queue shall be created without
                   any messages in it. The user ID of the message queue shall be set to the effective user ID of
                   the process. The group ID of the message queue shall be set to the effective group ID of  the
                   process; however, if the <u>name</u> argument is visible in the file system, the group ID may be set
                   to the group ID of the containing directory. When bits in <u>mode</u> other than the file permission
                   bits  are  specified,  the effect is unspecified. If <u>attr</u> is NULL, the message queue shall be
                   created with implementation-defined default message queue attributes. If <u>attr</u> is non-NULL and
                   the calling process has appropriate privileges on  <u>name</u>,  the  message  queue  <u>mq_maxmsg</u>  and
                   <u>mq_msgsize</u>  attributes shall be set to the values of the corresponding members in the <b>mq_attr</b>
                   structure referred to by <u>attr</u>.  The values of the <u>mq_flags</u>  and  <u>mq_curmsgs</u>  members  of  the
                   <b>mq_attr</b>  structure  shall  be  ignored. If <u>attr</u> is non-NULL, but the calling process does not
                   have appropriate privileges on <u>name</u>, the <u>mq_open</u>() function shall fail and  return  an  error
                   without creating the message queue.

       O_EXCL      If  O_EXCL  and  O_CREAT  are set, <u>mq_open</u>() shall fail if the message queue <u>name</u> exists. The
                   check for the existence of the message queue and the creation of the message queue if it does
                   not exist shall be atomic with respect to other threads executing <u>mq_open</u>() naming  the  same
                   <u>name</u>  with  O_EXCL  and  O_CREAT  set. If O_EXCL is set and O_CREAT is not set, the result is
                   undefined.

       O_NONBLOCK  Determines whether an <u>mq_send</u>() or <u>mq_receive</u>() waits for resources or messages that are  not
                   currently  available, or fails with <u>errno</u> set to <b>[EAGAIN]</b>; see <u>mq_send</u>() and <u>mq_receive</u>() for
                   details.

       The <u>mq_open</u>() function does not add or remove messages from the queue.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, the function shall return a message queue descriptor; otherwise, the function
       shall return (<b>mqd_t</b>)-1 and set <u>errno</u> to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>mq_open</u>() function shall fail if:

       <b>EACCES</b> The message queue exists and the permissions specified by <u>oflag</u> are denied, or the  message  queue
              does not exist and permission to create the message queue is denied.

       <b>EEXIST</b> O_CREAT and O_EXCL are set and the named message queue already exists.

       <b>EINTR</b>  The <u>mq_open</u>() function was interrupted by a signal.

       <b>EINVAL</b> The <u>mq_open</u>() function is not supported for the given name.

       <b>EINVAL</b> O_CREAT  was specified in <u>oflag</u>, the value of <u>attr</u> is not NULL, and either <u>mq_maxmsg</u> or <u>mq_msgsize</u>
              was less than or equal to zero.

       <b>EMFILE</b> Too many message queue descriptors or file descriptors are currently in use by this process.

       <b>ENFILE</b> Too many message queues are currently open in the system.

       <b>ENOENT</b> O_CREAT is not set and the named message queue does not exist.

       <b>ENOSPC</b> There is insufficient space for the creation of the new message queue.

       If any of the following conditions occur, the <u>mq_open</u>() function may return (<b>mqd_t</b>)-1 and  set  <u>errno</u>  to
       the corresponding value.

       <b>ENAMETOOLONG</b>
              The  length  of the <u>name</u> argument exceeds {_POSIX_PATH_MAX} on systems that do not support the XSI
              option or exceeds {_XOPEN_PATH_MAX} on XSI systems, or has a pathname  component  that  is  longer
              than   {_POSIX_NAME_MAX}   on  systems  that  do  not  support  the  XSI  option  or  longer  than
              {_XOPEN_NAME_MAX} on XSI systems.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       None.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       A future version might require the <u>mq_open</u>() and <u>mq_unlink</u>()  functions  to  have  semantics  similar  to
       normal file system operations.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>mq_close</u>(),   <u>mq_getattr</u>(),  <u>mq_receive</u>(),  <u>mq_send</u>(),  <u>mq_setattr</u>(),  <u>mq_unlink</u>(),  <u>msgctl</u>(),  <u>msgget</u>(),
       <u>msgrcv</u>(), <u>msgsnd</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;mqueue.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                       <u><a href="../man3POSIX/MQ_OPEN.3POSIX.html">MQ_OPEN</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>