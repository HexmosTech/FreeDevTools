<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_CreateCommand - implement new commands in C</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_CreateCommand - implement new commands in C

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       Tcl_Command
       <b>Tcl_CreateCommand</b>(<u>interp,</u> <u>cmdName,</u> <u>proc,</u> <u>clientData,</u> <u>deleteProc</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)                     Interpreter in which to create new command.

       const char <u>*cmdName</u> (in)                    Name of command.

       Tcl_CmdProc <u>*proc</u> (in)                      Implementation  of new command:  <u>proc</u> will be called whenever
                                                   <u>cmdName</u> is invoked as a command.

       void <u>*clientData</u> (in)                       Arbitrary one-word value to pass to <u>proc</u> and <u>deleteProc</u>.

       Tcl_CmdDeleteProc <u>*deleteProc</u> (in)          Procedure  to  call  before  <u>cmdName</u>  is  deleted  from   the
                                                   interpreter;  allows  for command-specific cleanup.  If NULL,
                                                   then no procedure is called before the command is deleted.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tcl_CreateCommand</b> defines a new command in <u>interp</u>  and  associates  it  with  procedure  <u>proc</u>  such  that
       whenever  <u>cmdName</u> is invoked as a Tcl command (via a call to <b>Tcl_Eval</b>) the Tcl interpreter will call <u>proc</u>
       to process the command.  It differs from <b>Tcl_CreateObjCommand</b> in  that  a  new  string-based  command  is
       defined;  that  is,  a  command  procedure  is defined that takes an array of argument strings instead of
       values.  The value-based command procedures registered by <b>Tcl_CreateObjCommand</b> can execute  significantly
       faster  than the string-based command procedures defined by <b>Tcl_CreateCommand</b>.  This is because they take
       Tcl values as arguments and those values can retain an internal representation that  can  be  manipulated
       more efficiently.  Also, Tcl's interpreter now uses values internally.  In order to invoke a string-based
       command  procedure  registered  by  <b>Tcl_CreateCommand</b>, it must generate and fetch a string representation
       from each argument value before the call.  New commands should be defined using <b>Tcl_CreateObjCommand</b>.  We
       support <b>Tcl_CreateCommand</b> for backwards compatibility.

       The procedures <b>Tcl_DeleteCommand</b>, <b>Tcl_GetCommandInfo</b>, and <b>Tcl_SetCommandInfo</b> are used in conjunction with
       <b>Tcl_CreateCommand</b>.

       <b>Tcl_CreateCommand</b> will delete an existing  command  <u>cmdName</u>,  if  one  is  already  associated  with  the
       interpreter.   It  returns  a  token  that  may  be  used  to refer to the command in subsequent calls to
       <b>Tcl_GetCommandName</b>.  If <u>cmdName</u> contains any <b>::</b> namespace qualifiers, then the command is  added  to  the
       specified  namespace;  otherwise  the  command is added to the global namespace.  If <b>Tcl_CreateCommand</b> is
       called for an interpreter that is in the process of being deleted, then it does not create a new  command
       and it returns NULL.  <u>Proc</u> should have arguments and result that match the type <b>Tcl_CmdProc</b>:

              typedef int <b>Tcl_CmdProc</b>(
                      void *<u>clientData</u>,
                      Tcl_Interp *<u>interp</u>,
                      int <u>argc</u>,
                      const char *<u>argv</u>[]);

       When  <u>proc</u>  is  invoked  the <u>clientData</u> and <u>interp</u> parameters will be copies of the <u>clientData</u> and <u>interp</u>
       arguments given to <b>Tcl_CreateCommand</b>.  Typically,  <u>clientData</u>  points  to  an  application-specific  data
       structure  that  describes  what to do when the command procedure is invoked.  <u>Argc</u> and <u>argv</u> describe the
       arguments to the command, <u>argc</u> giving the number of arguments  (including  the  command  name)  and  <u>argv</u>
       giving the values of the arguments as strings.  The <u>argv</u> array will contain <u>argc</u>+1 values; the first <u>argc</u>
       values point to the argument strings, and the last value is NULL.

       Note  that  the  argument  strings should not be modified as they may point to constant strings or may be
       shared with other parts of the  interpreter.   Note  also  that  the  argument  strings  are  encoded  in
       normalized UTF-8 since version 8.1 of Tcl.

       <u>Proc</u>  must return an integer code that is expected to be one of <b>TCL_OK</b>, <b>TCL_ERROR</b>, <b>TCL_RETURN</b>, <b>TCL_BREAK</b>,
       or <b>TCL_CONTINUE</b>. See the <b>return</b> man page for details on what these codes mean and  the  use  of  extended
       values for an extension's private use. Most normal commands will only return <b>TCL_OK</b> or <b>TCL_ERROR</b>.

       In  addition,  <u>proc</u>  must  set the interpreter result; in the case of a <b>TCL_OK</b> return code this gives the
       result of the command, and in the case of  <b>TCL_ERROR</b>  it  gives  an  error  message.   The  <b>Tcl_SetResult</b>
       procedure  provides  an  easy  interface  for  setting the return value;  for complete details on how the
       interpreter result field is managed, see the <b>Tcl_Interp</b> man page.  Before invoking a  command  procedure,
       <b>Tcl_Eval</b>  sets the interpreter result to point to an empty string, so simple commands can return an empty
       result by doing nothing at all.

       The contents of the <u>argv</u> array belong to Tcl and are not guaranteed to persist once <u>proc</u>  returns:   <u>proc</u>
       should  not  modify  them,  nor  should  it  set the interpreter result to point anywhere within the <u>argv</u>
       values.  Call <b>Tcl_SetResult</b> with status <b>TCL_VOLATILE</b> if you want to return something from the <u>argv</u> array.

       <u>DeleteProc</u>  will  be  invoked  when  (if)  <u>cmdName</u>  is  deleted.  This  can  occur  through  a  call   to
       <b>Tcl_DeleteCommand</b>  or  <b>Tcl_DeleteInterp</b>,  or  by  replacing <u>cmdName</u> in another call to <b>Tcl_CreateCommand</b>.
       <u>DeleteProc</u> is invoked before the command is deleted, and gives the application an opportunity to  release
       any  structures  associated with the command.  <u>DeleteProc</u> should have arguments and result that match the
       type <b>Tcl_CmdDeleteProc</b>:

              typedef void <b>Tcl_CmdDeleteProc</b>(
                      void *<u>clientData</u>);

       The <u>clientData</u> argument will be the same as the <u>clientData</u> argument passed to <b>Tcl_CreateCommand</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Tcl_CreateObjCommand,  Tcl_DeleteCommand,  Tcl_GetCommandInfo,  Tcl_SetCommandInfo,   Tcl_GetCommandName,
       Tcl_SetObjResult

</pre><h4><b>KEYWORDS</b></h4><pre>
       bind, command, create, delete, interpreter, namespace

Tcl                                                                                      <u><a href="../man3tcl/Tcl_CreateCommand.3tcl.html">Tcl_CreateCommand</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>