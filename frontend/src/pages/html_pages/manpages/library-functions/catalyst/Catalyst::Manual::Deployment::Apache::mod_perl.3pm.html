<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catalyst::Manual::Deployment::Apache::mod_perl - Deploying Catalyst with mod_perl</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcatalyst-manual-perl">libcatalyst-manual-perl_5.9013-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Catalyst::Manual::Deployment::Apache::mod_perl - Deploying Catalyst with mod_perl

</pre><h4><b>mod_perl</b> <b>Deployment</b></h4><pre>
       The recommended method of deploying Catalyst applications is FastCGI. In many cases, mod_perl is not the
       best solution, but we'll list some pros and cons so you can decide for yourself.

   <b>Pros</b>
       <u>Speed</u>

       mod_perl is fast, and your entire app will be loaded in memory within each Apache process.

       <u>Shared</u> <u>memory</u> <u>for</u> <u>multiple</u> <u>apps</u>

       If you need to run several Catalyst apps on the same server, mod_perl will share the memory for common
       modules.

   <b>Cons</b>
       <u>Memory</u> <u>usage</u>

       Since your application is fully loaded in memory, every Apache process will be rather large.  This means
       a large Apache process will be tied up while serving static files, large files, or dealing with slow
       clients.  For this reason, it is best to run a two-tiered web architecture with a lightweight frontend
       server passing dynamic requests to a large backend mod_perl server.

       <u>Reloading</u>

       Any changes made to the code of your app require a full restart of Apache. Catalyst does not support
       Apache::Reload or StatINC. This is another good reason to run a frontend web server where you can set up
       an "ErrorDocument 502" page to report that your app is down for maintenance.

       Cannot run multiple versions of the same app

       It is not possible to run two different versions of the same application in the same Apache instance
       because the namespaces will collide.

       <u>Cannot</u> <u>run</u> <u>different</u> <u>versions</u> <u>of</u> <u>libraries</u>

       If you have two different applications which run on the same machine, and each application needs a
       different versions of a library, the only way to do this is to have per-vhost perl interpreters (with
       different library paths). This is entirely possible, but nullifies all the memory sharing benefits that
       you get from having multiple applications sharing the same interpreter.

</pre><h4><b>Setup</b></h4><pre>
       Now that we have that out of the way, let's talk about setting up mod_perl to run a Catalyst app.

   <b>2.</b> <b>Install</b> <b>Apache</b> <b>with</b> <b>mod_perl</b>
       Both Apache 1.3 and Apache 2 are supported, although Apache 2 is highly recommended.  With Apache 2, make
       sure you are using the prefork MPM and not the worker MPM.  The reason for this is that many Perl modules
       are not thread-safe and may have problems running within the threaded worker environment.  Catalyst is
       thread-safe however, so if you know what you're doing, you may be able to run using worker.

       In Debian, the following commands should get you going.

           apt-get install apache2-mpm-prefork
           apt-get install libapache2-mod-perl2

   <b>3.</b> <b>Configure</b> <b>your</b> <b>application</b>
       Every Catalyst application will automagically become a mod_perl handler when run within mod_perl.  This
       makes the configuration extremely easy.  Here is a basic Apache 2 configuration.

           PerlSwitches -I/var/www/MyApp/lib
           PerlModule MyApp

           &lt;Location /&gt;
               SetHandler          modperl
               PerlResponseHandler MyApp
           &lt;/Location&gt;

       The most important line here is "PerlModule MyApp".  This causes mod_perl to preload your entire
       application into shared memory, including all of your controller, model, and view classes and
       configuration.  If you have -Debug mode enabled, you will see the startup output scroll by when you first
       start Apache.

       Also, there have been reports that the block above should instead be (but this has not been confirmed):

           &lt;Perl&gt;
               use lib '/var/www/MyApp/lib';
               use MyApp;
           &lt;/Perl&gt;

           &lt;Location /&gt;
               SetHandler          modperl
               PerlResponseHandler MyApp
           &lt;/Location&gt;

       For an example Apache 1.3 configuration, please see the documentation for Catalyst::Engine::Apache::MP13.

   <b>Test</b> <b>It</b>
       That's it, your app is now a full-fledged mod_perl application!  Try it out by going to
       <a href="http://your.server.com/">http://your.server.com/</a>.

</pre><h4><b>Other</b> <b>Options</b></h4><pre>
   <b>Non-root</b> <b>location</b>
       You may not always want to run your app at the root of your server or virtual host.  In this case, it's a
       simple change to run at any non-root location of your choice.

           &lt;Location /myapp&gt;
               SetHandler          modperl
               PerlResponseHandler MyApp
           &lt;/Location&gt;

       When running this way, it is best to make use of the "uri_for" method in Catalyst for constructing
       correct links.

   <b>Static</b> <b>file</b> <b>handling</b>
       Static files can be served directly by Apache for a performance boost.

           DocumentRoot /var/www/MyApp/root
           &lt;Location /static&gt;
               SetHandler default-handler
           &lt;/Location&gt;

       This will let all files within root/static be handled directly by Apache.  In a two-tiered setup, the
       frontend server should handle static files.  The configuration to do this on the frontend will vary.

       Note the path of the application needs to be stated explicitly in the web server configuration for this
       recipes.

</pre><h4><b>AUTHORS</b></h4><pre>
       Catalyst Contributors, see Catalyst.pm

</pre><h4><b>COPYRIGHT</b></h4><pre>
       This library is free software. You can redistribute it and/or modify it under the same terms as Perl
       itself.

perl v5.38.2                                       2024-03-30             <u>Catalyst::Manua...pache::<a href="../man3pm/mod_perl.3pm.html">mod_perl</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>