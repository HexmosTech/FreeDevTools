<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moose::Cookbook::Basics::Document_AugmentAndInner - The augment modifier, which turns normal method</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmoose-perl">libmoose-perl_2.2207-1build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Moose::Cookbook::Basics::Document_AugmentAndInner - The augment modifier, which turns normal method
       overriding "inside-out"

</pre><h4><b>VERSION</b></h4><pre>
       version 2.2207

</pre><h4><b>SYNOPSIS</b></h4><pre>
         package Document::Page;
         use Moose;

         has 'body' =&gt; ( is =&gt; 'rw', isa =&gt; 'Str', default =&gt; sub {''} );

         sub create {
             my $self = shift;
             $self-&gt;open_page;
             inner();
             $self-&gt;close_page;
         }

         sub append_body {
             my ( $self, $appendage ) = @_;
             $self-&gt;body( $self-&gt;body . $appendage );
         }

         sub open_page  { (shift)-&gt;append_body('&lt;page&gt;') }
         sub close_page { (shift)-&gt;append_body('&lt;/page&gt;') }

         package Document::PageWithHeadersAndFooters;
         use Moose;

         extends 'Document::Page';

         augment 'create' =&gt; sub {
             my $self = shift;
             $self-&gt;create_header;
             inner();
             $self-&gt;create_footer;
         };

         sub create_header { (shift)-&gt;append_body('&lt;header/&gt;') }
         sub create_footer { (shift)-&gt;append_body('&lt;footer/&gt;') }

         package TPSReport;
         use Moose;

         extends 'Document::PageWithHeadersAndFooters';

         augment 'create' =&gt; sub {
             my $self = shift;
             $self-&gt;create_tps_report;
             inner();
         };

         sub create_tps_report {
             (shift)-&gt;append_body('&lt;report type="tps"/&gt;');
         }

         # &lt;page&gt;&lt;header/&gt;&lt;report type="tps"/&gt;&lt;footer/&gt;&lt;/page&gt;
         my $report_xml = TPSReport-&gt;new-&gt;create;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This recipe shows how the "augment" method modifier works. This modifier reverses the normal subclass to
       parent method resolution order. With an "augment" modifier the <u>least</u> specific method is called first.
       Each successive call to "inner" descends the inheritance tree, ending at the most specific subclass.

       The "augment" modifier lets you design a parent class that can be extended in a specific way. The parent
       provides generic wrapper functionality, and the subclasses fill in the details.

       In the example above, we've created a set of document classes, with the most specific being the
       "TPSReport" class.

       We start with the least specific class, "Document::Page". Its create method contains a call to inner():

         sub create {
             my $self = shift;
             $self-&gt;open_page;
             inner();
             $self-&gt;close_page;
         }

       The "inner" function is exported by "Moose", and is like "super" for augmented methods. When "inner" is
       called, Moose finds the next method in the chain, which is the "augment" modifier in
       "Document::PageWithHeadersAndFooters". You'll note that we can call "inner" in our modifier:

         augment 'create' =&gt; sub {
             my $self = shift;
             $self-&gt;create_header;
             inner();
             $self-&gt;create_footer;
         };

       This finds the next most specific modifier, in the "TPSReport" class.

       Finally, in the "TPSReport" class, the chain comes to an end:

         augment 'create' =&gt; sub {
             my $self = shift;
             $self-&gt;create_tps_report;
             inner();
         };

       We do call the "inner" function one more time, but since there is no more specific subclass, this is a
       no-op. Making this call means we can easily subclass "TPSReport" in the future.

</pre><h4><b>CONCLUSION</b></h4><pre>
       The "augment" modifier is a powerful tool for creating a set of nested wrappers. It's not something you
       will need often, but when you do, it is very handy.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Stevan Little &lt;<a href="mailto:stevan@cpan.org">stevan@cpan.org</a>&gt;

       •   Dave Rolsky &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

       •   Jesse Luehrs &lt;<a href="mailto:doy@cpan.org">doy@cpan.org</a>&gt;

       •   Shawn M Moore &lt;<a href="mailto:sartak@cpan.org">sartak@cpan.org</a>&gt;

       •   יובל קוג'מן (Yuval Kogman) &lt;<a href="mailto:nothingmuch@woobling.org">nothingmuch@woobling.org</a>&gt;

       •   Karen Etheridge &lt;<a href="mailto:ether@cpan.org">ether@cpan.org</a>&gt;

       •   Florian Ragwitz &lt;<a href="mailto:rafl@debian.org">rafl@debian.org</a>&gt;

       •   Hans Dieter Pearcey &lt;<a href="mailto:hdp@cpan.org">hdp@cpan.org</a>&gt;

       •   Chris Prather &lt;<a href="mailto:chris@prather.org">chris@prather.org</a>&gt;

       •   Matt S Trout &lt;<a href="mailto:mstrout@cpan.org">mstrout@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2006 by Infinity Interactive, Inc.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.0                                       2024-10-20              <u>Moose::<a href="../man3pm/Cookboo...AugmentAndInner.3pm.html">Cookboo...AugmentAndInner</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>