<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web::Dispatch::HTTPMethods - Helpers to make RESTFul Dispatchers Easier</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libweb-simple-perl">libweb-simple-perl_0.033-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Web::Dispatch::HTTPMethods - Helpers to make RESTFul Dispatchers Easier

</pre><h4><b>SYNOPSIS</b></h4><pre>
           package MyApp:WithHTTPMethods;

           use Web::Simple;
           use Web::Dispatch::HTTPMethods;

           sub as_text {
             [200, ['Content-Type' =&gt; 'text/plain'],
               [$_[0]-&gt;{REQUEST_METHOD}, $_[0]-&gt;{REQUEST_URI}] ]
           }

           sub dispatch_request {
             sub (/get) {
               GET { as_text(pop) }
             },
             sub (/get-head) {
               GET { as_text(pop) }
               HEAD { [204,[],[]] },
             },
             sub (/get-post-put) {
               GET { as_text(pop) }  ## NOTE: no commas separating http methods
               POST { as_text(pop) }
               PUT { as_text(pop) }
             },
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Exports the most commonly used HTTP methods as subroutine helpers into your Web::Simple based
       application.  Use of these methods additionally adds an automatic HTTP code 405 "Method Not Allowed"
       response if none of the HTTP methods match for a given dispatch and also adds a dispatch rule for "HEAD"
       if no "HEAD" exists but a "GET" does (in which case the "HEAD" returns the "GET" dispatch with an empty
       body.)

       We also add support at the end of the chain for the OPTIONS method.  This defaults to HTTP 200 OK +
       Allows http headers.

       We also try to set correct HTTP headers such as "Allows" as makes sense based on your dispatch chain.

       The following dispatch chains are basically the same:

           sub dispatch_request {
             sub (/get-http-methods) {
               GET { [200, ['Content-Type' =&gt; 'text/plain'], ['Hello World']] }
             },
             sub(/get-classic) {
               sub (GET) { [200, ['Content-Type' =&gt; 'text/plain'], ['Hello World']] },
               sub (HEAD)  { [200, ['Content-Type' =&gt; 'text/plain'], []] },
               sub (OPTIONS)  {
                 [200, ['Content-Type' =&gt; 'text/plain', Allows=&gt;'GET,HEAD,OPTIONS'], []];
               },
               sub () {
                 [405, ['Content-Type' =&gt; 'text/plain', Allows=&gt;'GET,HEAD,OPTIONS'],
                  ['Method Not Allowed']]
               },
             }
           }

       The idea here is less boilerplate to distract the reader from the main point of the code and also to
       encapsulate some best practices.

       <b>NOTE</b> You currently cannot mix http method style and prototype sub style in the same scope, as in the
       following example:

           sub dispatch_request {
             sub (/get-head) {
               GET { ... }
               sub (HEAD) { ... }
             },
           }

       If you try this our code will notice and issue a "die".  If you have a good use case please bring it to
       the authors.

   <b>EXPORTS</b>
       This automatically exports the following subroutines:

           GET
           PUT
           POST
           HEAD
           DELETE
           OPTIONS

</pre><h4><b>AUTHOR</b></h4><pre>
       See Web::Simple for AUTHOR

</pre><h4><b>CONTRIBUTORS</b></h4><pre>
       See Web::Simple for CONTRIBUTORS

</pre><h4><b>COPYRIGHT</b></h4><pre>
       See Web::Simple for COPYRIGHT

</pre><h4><b>LICENSE</b></h4><pre>
       See Web::Simple for LICENSE

perl v5.34.0                                       2022-06-28                    <u>Web::Dispatch::<a href="../man3pm/HTTPMethods.3pm.html">HTTPMethods</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>