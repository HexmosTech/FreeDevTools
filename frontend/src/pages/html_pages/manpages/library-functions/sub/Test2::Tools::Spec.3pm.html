<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test2::Tools::Spec - RSPEC implementation on top of Test2::Workflow</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest2-suite-perl">libtest2-suite-perl_0.000163-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test2::Tools::Spec - RSPEC implementation on top of Test2::Workflow

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This uses Test2::Workflow to implement an RSPEC variant. This variant supports isolation and/or
       concurrency via forking or threads.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Test2::Bundle::Extended;
           use Test2::Tools::Spec;

           describe foo =&gt; sub {
               before_all  once =&gt; sub { ... };
               before_each many =&gt; sub { ... };

               after_all  once =&gt; sub { ... };
               after_each many =&gt; sub { ... };

               case condition_a =&gt; sub { ... };
               case condition_b =&gt; sub { ... };

               tests foo =&gt; sub { ... };
               tests bar =&gt; sub { ... };
           };

           done_testing;

</pre><h4><b>EXPORTS</b></h4><pre>
       All of these use the same argument pattern. The first argument must always be a name for the block. The
       last argument must always be a code reference.  Optionally a configuration hash can be inserted between
       the name and the code reference.

           FUNCTION "name" =&gt; sub { ... };

           FUNCTION "name" =&gt; {...}, sub { ... };

       NAME
           The  first  argument  to  a  Test2::Tools::Spec function MUST be a name. The name does not need to be
           unique.

       PARAMS
           This argument is optional. If present this should be a hashref.

           Here are the valid keys for the hashref:

           flat =&gt; $bool
                   If this is set to true then the block will not render as a subtest, instead the  events  will
                   be inline with the parent subtest (or main test).

           async =&gt; $bool
                   Set  this  to  true  to mark a block as being capable of running concurrently with other test
                   blocks. This does not mean the block WILL be run concurrently, just that it can be.

           iso =&gt; $bool
                   Set this to true if the block MUST be run in isolation. If this is true then the  block  will
                   run in its own forked process.

                   These  tests  will  be  skipped  on  any  platform  that  does  not  have  true  forking,  or
                   working/enabled threads.

                   Threads will ONLY be used if the T2_WORKFLOW_USE_THREADS env var is  set.  Thread  tests  are
                   only run if the T2_DO_THREAD_TESTS env var is set.

           todo =&gt; $reason
                   Use this to mark an entire block as TODO.

           skip =&gt; $reason
                   Use this to prevent a block from running at all.

       CODEREF
           This argument is required. This should be a code reference that will run some assertions.

   <b>ESSENTIALS</b>
       tests NAME =&gt; sub { ... }
       tests NAME =&gt; \%params, sub { ... }
       tests($NAME, \%PARAMS, \&amp;CODE)
       it NAME =&gt; sub { ... }
       it NAME =&gt; \%params, sub { ... }
       it($NAME, \%PARAMS, \&amp;CODE)
           This defines a test block. Test blocks are essentially subtests. All test blocks will be run, and are
           expected to produce events. Test blocks can run multiple times if the case() function is also used.

           it() is an alias to tests().

           These ARE NOT inherited by nested describe blocks.

       case NAME =&gt; sub { ... }
       case NAME =&gt; \%params, sub { ... }
       case($NAME, \%PARAMS, \&amp;CODE)
           This  lets  you  specify multiple conditions in which the test blocks should be run. Every test block
           within the same group ("describe") will be run once per case.

           These ARE NOT inherited by nested describe blocks, but nested describe blocks will be  executed  once
           per case.

       before_each NAME =&gt; sub { ... }
       before_each NAME =&gt; \%params, sub { ... }
       before_each($NAME, \%PARAMS, \&amp;CODE)
           Specify  a  codeblock that should be run multiple times, once before each tests() block is run. These
           will run AFTER case() blocks but before tests() blocks.

           These ARE inherited by nested describe blocks.

       before_case NAME =&gt; sub { ... }
       before_case NAME =&gt; \%params, sub { ... }
       before_case($NAME, \%PARAMS, \&amp;CODE)
           Same as before_each(), except these blocks run BEFORE case() blocks.

           These ARE NOT inherited by nested describe blocks.

       before_all NAME =&gt; sub { ... }
       before_all NAME =&gt; \%params, sub { ... }
       before_all($NAME, \%PARAMS, \&amp;CODE)
           Specify a codeblock that should be run once, before all the test blocks run.

           These ARE NOT inherited by nested describe blocks.

       around_each NAME =&gt; sub { ... }
       around_each NAME =&gt; \%params, sub { ... }
       around_each($NAME, \%PARAMS, \&amp;CODE)
           Specify a codeblock that should wrap around each test block. These blocks are run AFTER case  blocks,
           but before test blocks.

               around_each wrapit =&gt; sub {
                   my $cont = shift;

                   local %ENV = ( ... );

                   $cont-&gt;();

                   ...
               };

           The  first  argument to the codeblock will be a callback that MUST be called somewhere inside the sub
           in order for nested items to run.

           These ARE inherited by nested describe blocks.

       around_case NAME =&gt; sub { ... }
       around_case NAME =&gt; \%params, sub { ... }
       around_case($NAME, \%PARAMS, \&amp;CODE)
           Same as "around_each" except these run BEFORE case blocks.

           These ARE NOT inherited by nested describe blocks.

       around_all NAME =&gt; sub { ... }
       around_all NAME =&gt; \%params, sub { ... }
       around_all($NAME, \%PARAMS, \&amp;CODE)
           Same as "around_each" except that it only runs once to wrap ALL test blocks.

           These ARE NOT inherited by nested describe blocks.

       after_each NAME =&gt; sub { ... }
       after_each NAME =&gt; \%params, sub { ... }
       after_each($NAME, \%PARAMS, \&amp;CODE)
           Same as "before_each" except it runs right after each test block.

           These ARE inherited by nested describe blocks.

       after_case NAME =&gt; sub { ... }
       after_case NAME =&gt; \%params, sub { ... }
       after_case($NAME, \%PARAMS, \&amp;CODE)
           Same as "after_each" except it runs right after the case block, and before the test block.

           These ARE NOT inherited by nested describe blocks.

       after_all NAME =&gt; sub { ... }
       after_all NAME =&gt; \%params, sub { ... }
       after_all($NAME, \%PARAMS, \&amp;CODE)
           Same as "before_all" except it runs after all test blocks have been run.

           These ARE NOT inherited by nested describe blocks.

   <b>SHORTCUTS</b>
       These are shortcuts. Each of these is the same as tests() except some parameters are added for you.

       These are NOT exported by default/.

       mini NAME =&gt; sub { ... }
           Same as:

               tests NAME =&gt; { flat =&gt; 1 }, sub { ... }

       iso NAME =&gt; sub { ... }
           Same as:

               tests NAME =&gt; { iso =&gt; 1 }, sub { ... }

       miso NAME =&gt; sub { ... }
           Same as:

               tests NAME =&gt; { mini =&gt; 1, iso =&gt; 1 }, sub { ... }

       async NAME =&gt; sub { ... }
           Same as:

               tests NAME =&gt; { async =&gt; 1 }, sub { ... }

           <b>Note:</b> This conflicts with the async() exported from threads. Don't import both.

       masync NAME =&gt; sub { ... }
           Same as:

               tests NAME =&gt; { minit =&gt; 1, async =&gt; 1 }, sub { ... }

   <b>CUSTOM</b> <b>ATTRIBUTE</b> <b>DEFAULTS</b>
       Sometimes you want to apply default attributes to all tests() or case() blocks. This can be done, and  is
       lexical to your describe or package root!

           use Test2::Bundle::Extended;
           use Test2::Tools::Spec ':ALL';

           # All 'tests' blocks after this declaration will have C&lt;&lt;iso =&gt; 1&gt;&gt; by default
           spec_defaults tests =&gt; (iso =&gt; 1);

           tests foo =&gt; sub { ... }; # isolated

           tests foo, {iso =&gt; 0}, sub { ... }; # Not isolated

           spec_defaults tests =&gt; (iso =&gt; 0); # Turn it off again

       Defaults are inherited by nested describe blocks. You can also override the defaults for the scope of the
       describe:

           spec_defaults tests =&gt; (iso =&gt; 1);

           describe foo =&gt; sub {
               spec_defaults tests =&gt; (async =&gt; 1); # Scoped to this describe and any child describes

               tests bar =&gt; sub { ... }; # both iso and async
           };

           tests baz =&gt; sub { ... }; # Just iso, no async.

       You can apply defaults to any type of blocks:

           spec_defaults case =&gt; (iso =&gt; 1); # All cases are 'iso';

       Defaults are not inherited when a builder's return is captured.

           spec_defaults tests =&gt; (iso =&gt; 1);

           # Note we are not calling this in void context, that is the key here.
           my $d = describe foo =&gt; {
               tests bar =&gt; sub { ... }; # Not iso
           };

</pre><h4><b>EXECUTION</b> <b>ORDER</b></h4><pre>
       As  each  function is encountered it executes, just like any other function. The describe() function will
       immediately execute the codeblock it is given. All other functions will stash their codeblocks to be  run
       later.  When  done_testing()  is  run the workflow will be compiled, at which point all other blocks will
       run.

       Here is an overview of the order in which blocks get called once compiled (at done_testing()).

           before_all
               for-each-case {
                   before_case
                       case
                   after_case

                   # AND/OR nested describes
                   before_each
                       tests
                   after_each
               }
           after_all

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Test2-Workflow can be found at <u>https://github.com/Test-More/Test2-Suite/</u>.

</pre><h4><b>MAINTAINERS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2018 Chad Granum &lt;<a href="mailto:exodist7@gmail.com">exodist7@gmail.com</a>&gt;.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

       See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.38.2                                       2024-06-07                            <u>Test2::Tools::<a href="../man3pm/Spec.3pm.html">Spec</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>