<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tk_CanvasTkwin,        Tk_CanvasGetCoord,       Tk_CanvasDrawableCoords,       Tk_CanvasSetStippleOrigin,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tk9.0-doc">tk9.0-doc_9.0.1-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tk_CanvasTkwin,        Tk_CanvasGetCoord,       Tk_CanvasDrawableCoords,       Tk_CanvasSetStippleOrigin,
       Tk_CanvasWindowCoords, Tk_CanvasEventuallyRedraw, Tk_CanvasTagsOption -  utility  procedures  for  canvas
       type managers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tk.h&gt;</b>

       Tk_Window
       <b>Tk_CanvasTkwin</b>(<u>canvas</u>)

       int
       <b>Tk_CanvasGetCoord</b>(<u>interp,</u> <u>canvas,</u> <u>string,</u> <u>doublePtr</u>)

       <b>Tk_CanvasDrawableCoords</b>(<u>canvas,</u> <u>x,</u> <u>y,</u> <u>drawableXPtr,</u> <u>drawableYPtr</u>)

       <b>Tk_CanvasSetStippleOrigin</b>(<u>canvas,</u> <u>gc</u>)

       <b>Tk_CanvasWindowCoords</b>(<u>canvas,</u> <u>x,</u> <u>y,</u> <u>screenXPtr,</u> <u>screenYPtr</u>)

       <b>Tk_CanvasEventuallyRedraw</b>(<u>canvas,</u> <u>x1,</u> <u>y1,</u> <u>x2,</u> <u>y2</u>)

       Tk_OptionParseProc *<b>Tk_CanvasTagsParseProc</b>;

       Tk_OptionPrintProc *<b>Tk_CanvasTagsPrintProc</b>;

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tk_Canvas <u>canvas</u> (in)                   A token that identifies a canvas widget.

       Tcl_Interp <u>*interp</u> (in/out)             Interpreter to use for error reporting.

       const char <u>*string</u> (in)                 Textual description of a canvas coordinate.

       double <u>*doublePtr</u> (out)                 Points to place to store a converted coordinate.

       double <u>x</u> (in)                           An x coordinate in the space of the canvas.

       double <u>y</u> (in)                           A y coordinate in the space of the canvas.

       short <u>*drawableXPtr</u> (out)               Pointer  to  a  location in which to store an x coordinate in the
                                               space of the drawable  currently  being  used  to  redisplay  the
                                               canvas.

       short <u>*drawableYPtr</u> (out)               Pointer  to  a  location  in which to store a y coordinate in the
                                               space of the drawable  currently  being  used  to  redisplay  the
                                               canvas.

       GC <u>gc</u> (out)                             Graphics context to modify.

       short <u>*screenXPtr</u> (out)                 Points  to  a location in which to store the screen coordinate in
                                               the canvas window that corresponds to <u>x</u>.

       short <u>*screenYPtr</u> (out)                 Points to a location in which to store the screen  coordinate  in
                                               the canvas window that corresponds to <u>y</u>.

       int <u>x1</u> (in)                             Left  edge of the region that needs redisplay.  Only pixels at or
                                               to the right of this coordinate need to be redisplayed.

       int <u>y1</u> (in)                             Top edge of the region that needs redisplay.  Only pixels  at  or
                                               below this coordinate need to be redisplayed.

       int <u>x2</u> (in)                             Right  edge  of  the region that needs redisplay.  Only pixels to
                                               the left of this coordinate need to be redisplayed.

       int <u>y2</u> (in)                             Bottom edge of the region  that  needs  redisplay.   Only  pixels
                                               above this coordinate need to be redisplayed.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These procedures are called by canvas type managers to perform various utility functions.

       <b>Tk_CanvasTkwin</b> returns the Tk_Window associated with a particular canvas.

       <b>Tk_CanvasGetCoord</b>  translates  a string specification of a coordinate (such as <b>2p</b> or <b>1.6c</b>) into a double-
       precision canvas coordinate.  If <u>string</u> is a valid coordinate description then  <b>Tk_CanvasGetCoord</b>  stores
       the  corresponding  canvas  coordinate  at  *<u>doublePtr</u>  and returns <b>TCL_OK</b>.  Otherwise it stores an error
       message in the interpreter result and returns <b>TCL_ERROR</b>.

       <b>Tk_CanvasDrawableCoords</b> is called by type managers during redisplay to  compute  where  to  draw  things.
       Given  <u>x</u> and <u>y</u> coordinates in the space of the canvas, <b>Tk_CanvasDrawableCoords</b> computes the corresponding
       pixel in the drawable that is currently being  used  for  redisplay;  it  returns  those  coordinates  in
       *<u>drawableXPtr</u> and *<u>drawableYPtr</u>.  This procedure should not be invoked except during redisplay.

       <b>Tk_CanvasSetStippleOrigin</b>  is  also  used  during  redisplay.   It  sets the stipple origin in <u>gc</u> so that
       stipples drawn with <u>gc</u> in the current offscreen pixmap will line up with stipples drawn with origin (0,0)
       in the canvas's actual window.  <b>Tk_CanvasSetStippleOrigin</b> is needed in order to  guarantee  that  stipple
       patterns  line up properly when the canvas is redisplayed in small pieces.  Redisplays are carried out in
       double-buffered fashion where a piece of the canvas is redrawn in an offscreen  pixmap  and  then  copied
       back  onto  the  screen.   In  this approach the stipple origins in graphics contexts need to be adjusted
       during each redisplay to compensate for the position of the off-screen pixmap relative to the window.  If
       an item is being drawn with stipples, its type manager  typically  calls  <b>Tk_CanvasSetStippleOrigin</b>  just
       before  using <u>gc</u> to draw something;  after it is finished drawing, the type manager calls <b>XSetTSOrigin</b> to
       restore the origin in <u>gc</u> back to (0,0) (the restore is needed because graphics contexts  are  shared,  so
       they cannot be modified permanently).

       <b>Tk_CanvasWindowCoords</b>  is  similar  to  <b>Tk_CanvasDrawableCoords</b> except that it returns coordinates in the
       canvas's window on the screen, instead of coordinates in an off-screen pixmap.

       <b>Tk_CanvasEventuallyRedraw</b> may be invoked by a type manager to inform Tk that a portion of a canvas  needs
       to  be  redrawn.  The <u>x1</u>, <u>y1</u>, <u>x2</u>, and <u>y2</u> arguments specify the region that needs to be redrawn, in canvas
       coordinates.  Type managers rarely need to invoke <b>Tk_CanvasEventuallyRedraw</b>, since Tk can normally figure
       out when an item has changed and make the redisplay request on its  behalf  (this  happens,  for  example
       whenever  Tk  calls  a  <u>configureProc</u>  or  <u>scaleProc</u>).   The  only time that a type manager needs to call
       <b>Tk_CanvasEventuallyRedraw</b> is if an item has changed on its own without being invoked through one  of  the
       procedures  in its Tk_ItemType; this could happen, for example, in an image item if the image is modified
       using image commands.

       <b>Tk_CanvasTagsParseProc</b> and <b>Tk_CanvasTagsPrintProc</b> are procedures that handle the <b>-tags</b> option for  canvas
       items.   The  code  of  a canvas type manager will not call these procedures directly, but will use their
       addresses to create a <b>Tk_CustomOption</b> structure for the <b>-tags</b> option.   The  code  typically  looks  like
       this:

              static const Tk_CustomOption tagsOption = {Tk_CanvasTagsParseProc,
                  Tk_CanvasTagsPrintProc, NULL
              };

              static const Tk_ConfigSpec configSpecs[] = {
                  ...
                  {TK_CONFIG_CUSTOM, "-tags", NULL, NULL,
                      NULL, 0, TK_CONFIG_NULL_OK, &amp;tagsOption},
                  ...
              };

</pre><h4><b>KEYWORDS</b></h4><pre>
       canvas, focus, item type, redisplay, selection, type manager

Tk                                                     4.1                                   <u><a href="../man3tk/Tk_CanvasTkwin.3tk.html">Tk_CanvasTkwin</a></u>(3tk)
</pre>
 </div>
</div></section>
</div>
</body>
</html>