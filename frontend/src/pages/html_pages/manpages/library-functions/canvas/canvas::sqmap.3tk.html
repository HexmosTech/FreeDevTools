<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>canvas::sqmap - Canvas with map background based on square tiles</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tklib">tklib_0.9-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       canvas::sqmap - Canvas with map background based on square tiles

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.4</b>

       package require <b>Tk</b> <b>8.4</b>

       package require <b>snit</b>

       package require <b>uevent::onidle</b>

       package require <b>cache::async</b>

       package require <b>canvas::sqmap</b> <b>?0.3.1?</b>

       <b>::canvas::sqmap</b> <u>pathName</u> ?options?

       <u>canvasName</u> <b>image</b> <b>set</b> <u>cell</u> <u>image</u>

       <u>canvasName</u> <b>image</b> <b>unset</b> <u>cell</u>

       <u>canvasName</u> <b>flush</b>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides  an extended canvas widget for the display of maps based on a set of square image
       tiles. The tiles are the background of the canvas, with all other canvas  items  added  always  shown  in
       front  of  them.  The  number  of  tiles  shown,  tile  size, and where to get the images to show are all
       configurable.

</pre><h4><b>API</b></h4><pre>
       <b>::canvas::sqmap</b> <u>pathName</u> ?options?
              Creates the canvas <u>pathName</u> and configures it. The new widget supports  all  of  the  options  and
              methods of a regular canvas, plus the options and methods described below.

              The result of the command is <u>pathName</u>.

   <b>OPTIONS</b>
       <b>-grid-cell-width</b>
              The  value  for  this  option  is  a non-negative integer. It specifies the width of the cells the
              background is made up of.

       <b>-grid-cell-height</b>
              The value for this option is a non-negative integer. It specifies the  height  of  the  cells  the
              background is made up of.

       <b>-grid-cell-command</b>
              The  value  for this option is a command prefix. It is invoked whenever the canvas needs the image
              for a specific cell of the background, with two additional arguments, the id of the  cell,  and  a
              command prefix to invoke when the image is ready, or known to not exist.

              The  id  of the cell is a 2-element list containing the row and column number of the cell, in this
              order. The result command prefix (named "$result" in the example below) has  to  be  invoked  with
              either two or three arguments, i.e.

                  $result set   $cellid $image ; # image is known and ready
                  $result unset $cellid        ; # image does not exist

              This  option  may be left undefined, i.e. the canvas can operate without it. In that case the only
              images shown in grid cells are those explicitly set with  the  method  <b>image</b>  <b>set</b>,  see  the  next
              section. All other grid cells will simply be empty.

       <b>-viewport-command</b>
              This  option  specifies  a command prefix to invoke when the viewport of the canvas is changed, to
              allow users keep track of where in the scroll-region we are at all times. This can  be  used,  for
              example,  to  drive  derivate  displays,  or  to keep items in view by moving them as the viewport
              moves.

       <b>-image-on-load</b>
              The value for this option is an image. If specified the image is shown in a cell while the  actual
              image for that cell is getting loaded through the callback specified by the <b>-grid-cell-command</b>.

       <b>-image-on-unset</b>
              The  value  for  this  option is an image. If specified the image is shown in a cell for which the
              callback specified by the <b>-grid-cell-command</b> reported that there is no actual image to be shown.

   <b>METHODS</b>
       <u>canvasName</u> <b>image</b> <b>set</b> <u>cell</u> <u>image</u>
              Invoking this method places the <u>image</u> into the specified <u>cell</u> of the background. The cell is given
              as a 2-element list containing row and column number, in this order.

              Note that an image is allowed to be associated with and displayed in multiple cells of the canvas.

       <u>canvasName</u> <b>image</b> <b>unset</b> <u>cell</u>
              Invoking this method declares the specified <u>cell</u> of the background as  empty,  an  existing  image
              shown  by  this  cell will be forgotten.  The cell is given as a 2-element list containing row and
              column number, in this order.

       <u>canvasName</u> <b>flush</b>
              Invoking this method forces the canvas to completely reload the images for all cells. Do  not  use
              this  method  if  the  canvas is operated without a <b>-grid-cell-command</b>, as in that case the canvas
              will simply forget all images without being able to reload them.

</pre><h4><b>IMAGE</b> <b>OWNERSHIP</b></h4><pre>
       Note that the canvas <u>does</u> <u>not</u> take ownership of the images it shows in the background.  In  other  words,
       when we say that the canvas forgets an image this means only that the association between a grid cell and
       shown image is broken. The image is <u>not</u> deleted. Managing the lifecycle of the images shown by the canvas
       is responsibility of the user of the canvas.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>canvas</u> of the <u>Tklib</u> <u>Trackers</u>  [<a href="http://core.tcl.tk/tklib/reportlist">http://core.tcl.tk/tklib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

</pre><h4><b>KEYWORDS</b></h4><pre>
       canvas, cell, grid, image, map, square map, tile

tklib                                                 0.3.1                                   <u>canvas::<a href="../man3tk/sqmap.3tk.html">sqmap</a></u>(3tk)
</pre>
 </div>
</div></section>
</div>
</body>
</html>