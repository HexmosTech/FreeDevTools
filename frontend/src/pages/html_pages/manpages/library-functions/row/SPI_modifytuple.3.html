<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SPI_modifytuple - create a row by replacing selected fields of a given row</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-doc-17">postgresql-doc-17_17.5-1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SPI_modifytuple - create a row by replacing selected fields of a given row

</pre><h4><b>SYNOPSIS</b></h4><pre>
       HeapTuple SPI_modifytuple(Relation <u>rel</u>, HeapTuple <u>row</u>, int <u>ncols</u>,
                                 int * <u>colnum</u>, Datum * <u>values</u>, const char * <u>nulls</u>)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>SPI_modifytuple</b> creates a new row by substituting new values for selected columns, copying the original
       row's columns at other positions. The input row is not modified. The new row is returned in the upper
       executor context.

       This function can only be used while connected to SPI. Otherwise, it returns NULL and sets <u>SPI_result</u> to
       SPI_ERROR_UNCONNECTED.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Relation <u>rel</u>
           Used only as the source of the row descriptor for the row. (Passing a relation rather than a row
           descriptor is a misfeature.)

       HeapTuple <u>row</u>
           row to be modified

       int <u>ncols</u>
           number of columns to be changed

       int * <u>colnum</u>
           an array of length <u>ncols</u>, containing the numbers of the columns that are to be changed (column
           numbers start at 1)

       Datum * <u>values</u>
           an array of length <u>ncols</u>, containing the new values for the specified columns

       const char * <u>nulls</u>
           an array of length <u>ncols</u>, describing which new values are null

           If <u>nulls</u> is NULL then <b>SPI_modifytuple</b> assumes that no new values are null. Otherwise, each entry of
           the <u>nulls</u> array should be ' ' if the corresponding new value is non-null, or 'n' if the corresponding
           new value is null. (In the latter case, the actual value in the corresponding <u>values</u> entry doesn't
           matter.) Note that <u>nulls</u> is not a text string, just an array: it does not need a '\0' terminator.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       new row with modifications, allocated in the upper executor context, or NULL on error (see <u>SPI_result</u> for
       an error indication)

       On error, <u>SPI_result</u> is set as follows:

       SPI_ERROR_ARGUMENT
           if <u>rel</u> is NULL, or if <u>row</u> is NULL, or if <u>ncols</u> is less than or equal to 0, or if <u>colnum</u> is NULL, or
           if <u>values</u> is NULL.

       SPI_ERROR_NOATTRIBUTE
           if <u>colnum</u> contains an invalid column number (less than or equal to 0 or greater than the number of
           columns in <u>row</u>)

       SPI_ERROR_UNCONNECTED
           if SPI is not active

PostgreSQL 17.5                                       2025                                    <u><a href="../man3/SPI_MODIFYTUPLE.3.html">SPI_MODIFYTUPLE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>