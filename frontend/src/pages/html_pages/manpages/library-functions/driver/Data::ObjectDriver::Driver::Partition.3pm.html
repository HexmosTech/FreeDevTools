<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data::ObjectDriver::Driver::Partition - base class for partitioned object drivers</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdata-objectdriver-perl">libdata-objectdriver-perl_0.25-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Data::ObjectDriver::Driver::Partition - base class for partitioned object drivers

</pre><h4><b>SYNOPSIS</b></h4><pre>
           package SomeObject;

           __PACKAGE__-&gt;install_properties({
               ...
               primary_key =&gt; 'id',
               driver      =&gt; Data::ObjectDriver::Driver::Partition-&gt;new(get_driver =&gt; \&amp;find_partition),
           });

           # Say we have a list of 5 arrayrefs of the DBI driver information.
           my @DBI_INFO;

           sub find_partition {
               my ($part_key, $args) = @_;

               my $id;

               if (ref $terms &amp;&amp; ref $terms eq 'HASH') {
                   # This is a search($terms, $args) call.
                   my $terms = $part_key;
                   $id = $terms-&gt;{id}
                       or croak "Can't determine partition from a search() with no id field";
               }
               else {
                   # This is a lookup($id) or some method invoked on an object where we know the ID.
                   my $id = $part_key;
               }

               # "ID modulo N" is not a good partitioning strategy, but serves as an example.
               my $partition = $id % 5;
               return Data::ObjectDriver::Driver::DBI-&gt;new( @{ $DBI_INFO[$partition] } );
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Data::ObjectDriver::Driver::Partition</u> provides the basic structure for partitioning objects into
       different databases. Using partitions, you can horizontally scale your application by using different
       database servers to hold sets of data.

       To partition data, you need a certain criteria to determine which partition data goes in. Partition
       drivers use a "get_driver" function to find the database driver for the correct partition, given either
       the arguments to a search() or the object's primary key for a lookup(), update(), etc where the key is
       known.

</pre><h4><b>SUGGESTED</b> <b>PRACTICES</b></h4><pre>
       While you can use any stable, predictable method of selecting the partition for an object, the most
       flexible way is to keep an unpartitioned table that maps object keys to their partitions. You can then
       look up the appropriate record in your get_driver method to find the partition.

       For many applications, you can partition several classes of data based on the ID of the user account that
       "owns" them. In this case, you would include the user ID as the first part of a complex primary key.

       Because multiple objects can use the same partitioning scheme, often
       <u>Data::ObjectDriver::Driver::Partition</u> is subclassed to define the "get_driver" function once and
       automatically specify it to the <u>Data::ObjectDriver::Driver::Partition</u> constructor.

       Note these practices are codified into the <u>Data::ObjectDriver::Driver::SimplePartition</u> class.

</pre><h4><b>USAGE</b></h4><pre>
   <b>"Data::ObjectDriver::Driver::Partition-&gt;new(%params)"</b>
       Creates a new partitioning driver. The required members of %params are:

       •   "get_driver"

           A  reference  to  a  function  to be used to retrieve for a given object or set of search terms. Your
           function is invoked as either:

           •   "get_driver(\%terms, \%args)"

               Return a driver based on the given search() parameters.

           •   get_driver($id)

               Return a driver based on the given object ID. Note that $id may be an arrayref, if the class  was
               defined with a complex primary key.

       •   "pk_generator"

           A reference to a function that, given a data object, generates a primary key for it. This is the same
           "pk_generator" given to "Data::ObjectDriver"'s constructor.

   <b>"$driver-&gt;search($class,</b> <b>$terms,</b> <b>$args)"</b>
   <b>"$driver-&gt;lookup($class,</b> <b>$id)"</b>
   <b>"$driver-&gt;lookup_multi($class,</b> <b>@ids)"</b>
   <b>"$driver-&gt;exists($obj)"</b>
   <b>"$driver-&gt;insert($obj)"</b>
   <b>"$driver-&gt;update($obj)"</b>
   <b>"$driver-&gt;remove($obj)"</b>
   <b>"$driver-&gt;fetch_data($what)"</b>
       Performs  the  named  action,  by  passing  these  methods  through to the appropriate database driver as
       determined by $driver's "get_driver" function.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       No errors are created by <u>Data::ObjectDriver::Driver::Partition</u> itself.  Errors may come from  a  specific
       partitioning subclass or the driver for a particular database.

</pre><h4><b>BUGS</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
       There are no known bugs in this module.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>Data::ObjectDriver::Driver::SimplePartition</u>

</pre><h4><b>LICENSE</b></h4><pre>
       <u>Data::ObjectDriver</u>  is  free  software;  you may redistribute it and/or modify it under the same terms as
       Perl itself.

</pre><h4><b>AUTHOR</b> <b>&amp;</b> <b>COPYRIGHT</b></h4><pre>
       Except where otherwise noted, <u>Data::ObjectDriver</u> is Copyright 2005-2006 Six Apart, <a href="mailto:cpan@sixapart.com">cpan@sixapart.com</a>. All
       rights reserved.

perl v5.40.1                                       2025-04-19              <u>Data::ObjectDr...iver::<a href="../man3pm/Partition.3pm.html">Partition</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>