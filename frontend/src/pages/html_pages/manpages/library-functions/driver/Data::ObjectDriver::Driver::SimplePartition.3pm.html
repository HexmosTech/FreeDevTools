<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data::ObjectDriver::Driver::SimplePartition - basic partitioned object driver</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdata-objectdriver-perl">libdata-objectdriver-perl_0.25-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Data::ObjectDriver::Driver::SimplePartition - basic partitioned object driver

</pre><h4><b>SYNOPSIS</b></h4><pre>
           package ParentObject;
           use base qw( Data::ObjectDriver::BaseObject );

           __PACKAGE__-&gt;install_properties({
               columns     =&gt; [ 'parent_id', 'partition_id', ... ],
               ...
               driver      =&gt; Data::ObjectDriver::Driver::DBI-&gt;new( @$GLOBAL_DB_INFO ),
               primary_key =&gt; 'parent_id',
           });

           __PACKAGE__-&gt;has_partitions(
               number     =&gt; scalar @PARTITIONS,
               get_driver =&gt; \&amp;get_driver_by_partition,
           );

           package SomeObject;
           use base qw( Data::ObjectDriver::BaseObject );

           __PACKAGE__-&gt;install_properties({
               ...
               driver               =&gt; Data::ObjectDriver::Driver::SimplePartition-&gt;new(
                                           using =&gt; 'ParentObject'
                                       ),
               primary_key          =&gt; ['parent_id', 'object_id'],
           });

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Data::ObjectDriver::Driver::SimplePartition</u> is a basic driver for objects partitioned into separate
       databases. See Data::ObjectDriver::Driver::Partition for more about partitioning databases.

       <u>SimplePartition</u> helps you partition objects into databases based on their association with one record of
       a <u>parent</u> class. If your classes don't meet the requirements imposed by <u>SimplePartition</u>, you can still
       write your own partitioning driver. See Data::ObjectDriver::Driver::Partition.

</pre><h4><b>SUGGESTED</b> <b>PRACTICES</b></h4><pre>
       Often this is used for user partitioning, where the parent class is your user account class; all records
       of other classes that are "owned" by that user are partitioned into the same database. This allows you to
       scale horizontally with the number of users, at the cost of complicating querying multiple users' data
       together.

       <u>SimplePartition</u> will load the related instance of the parent class every time it needs to find the
       partition for a related object. Consider using a minimal mapping class for the parent, keeping as much
       data as possible in other related classes. For example, if "User" were your parent class, you might keep
       <u>only</u> the user ID and other data used to find users (such as login name and email address) in "User",
       keeping further profile data in another "UserProfile" class.

       As all the partitioned classes related to a given parent class will share the same "partition_get_driver"
       logic to turn a partition ID into a driver, you might put the "partition_get_driver" function in the
       parent class, or use a custom subclass of <u>SimplePartition</u> that contains and automatically specifies the
       "partition_get_driver" function.

</pre><h4><b>USAGE</b></h4><pre>
   <b>Data::ObjectDriver::Driver::SimplePartition-&gt;new(%params)</b>
       Creates a new basic partitioning driver for a particular class. The required members of %params are:

       •   "using"

           The name of the parent class on which the driven class is partitioned.

           Using a class as a parent partitioned class requires these properties to be defined:

           •   "columns"

               The  parent  class  must  have  a  "partition_id"  column containing a partition identifier. This
               identifier is passed to the "partition_get_driver" function to identify a driver to return.

           •   "primary_key"

               The parent class's primary key must be a simple single-column key, and that column  must  be  the
               same as the referencing column in the partitioned classes.

           •   "partition_get_driver"

               The  "partition_get_driver"  property  must  be a function that returns an object driver, given a
               partition ID and any extra parameters given to the "SimplePartition" constructor.

               This property can also be defined as "get_driver" in a  call  to  "Class-&gt;has_partitions()".  See
               Data::ObjectDriver::BaseObject.

       You  can  also  include  any further optional parameters you like. They will be passed to the partitioned
       class's "partition_get_driver" function as given.

       A <u>SimplePartition</u> driver will require these properties to be defined for partitioned classes:

       •   "primary_key"

           Your primary key should be a complex primary key (arrayref) with the simple key of the parent  object
           for the first field.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       •   "using is required."

           The  "using"  parameter  to  the  <u>SimplePartition</u>  constructor  is required to create the partitioned
           class's "get_driver" function. Perhaps you omitted it, or your subclass of  <u>SimplePartition</u>  did  not
           properly specify it to its parent's constructor.

       •   "Bogus classname."

           The  parent  class  name  you specified in your "using" parameter does not appear to be a valid class
           name. If you are automatically generating parent class names, check that your  method  of  converting
           strings to class names is correct.

       •   "Failed to load parent class: <u>error</u>"

           The  parent  class you specified in your "using" parameter could not be loaded, for the given reason.
           Perhaps you didn't include its location in your library path.

       •   "Partitioning driver not defined for <u>partitioned</u> <u>class</u>"

           The partitioned class named in the error is configured to use the <u>SimplePartition</u> driver but does not
           have a "partition_get_driver" set.  Check that you intended to use <u>SimplePartition</u>  with  that  class
           or,  if  you're  automatically specifying the "partition_get_driver" function, that your technique is
           working correctly.

       •   "Cannot extract <u>column</u> from terms <u>search</u> <u>terms</u> <u>or</u> <u>primary</u> <u>key</u>"

           The <u>SimplePartition</u> driver could not determine from the given search terms or object key what the  ID
           of the related parent record was. Check that your columns in the partitioned and parent classes share
           the  same  name,  and  that  your  application  includes  the parent ID in all search() calls for the
           partitioned class and instances of partitioned objects before attempting to save them.

           Optionally you can enable a basic  support  of  search  across  multiple  partition  by  passing  the
           'multi_partition' arg (true value) to the search query.

       •   "Member of <u>class</u> with ID <u>parent</u> <u>ID</u> not found"

           The  parent  record  associated  with  the  partitioned  object  could  not  be loaded.  Perhaps your
           application deleted the parent record without removing its associated partitioned objects first.

</pre><h4><b>BUGS</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
       There are no known bugs in this module.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Data::ObjectDriver::Driver::Partition

</pre><h4><b>LICENSE</b></h4><pre>
       <u>Data::ObjectDriver</u> is free software; you may redistribute it and/or modify it under  the  same  terms  as
       Perl itself.

</pre><h4><b>AUTHOR</b> <b>&amp;</b> <b>COPYRIGHT</b></h4><pre>
       Except where otherwise noted, <u>Data::ObjectDriver</u> is Copyright 2005-2006 Six Apart, <a href="mailto:cpan@sixapart.com">cpan@sixapart.com</a>. All
       rights reserved.

perl v5.40.1                                       2025-04-19              <u>Data::<a href="../man3pm/ObjectDr...SimplePartition.3pm.html">ObjectDr...SimplePartition</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>