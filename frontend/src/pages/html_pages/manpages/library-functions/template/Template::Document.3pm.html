<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template::Document - Compiled template document object</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtemplate-perl">libtemplate-perl_2.27-1build11_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Template::Document - Compiled template document object

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Template::Document;

           $doc = Template::Document-&gt;new({
               BLOCK =&gt; sub { # some perl code; return $some_text },
               DEFBLOCKS =&gt; {
                   header =&gt; sub { # more perl code; return $some_text },
                   footer =&gt; sub { # blah blah blah; return $some_text },
               },
               METADATA =&gt; {
                   author  =&gt; 'Andy Wardley',
                   version =&gt; 3.14,
               }
           }) || die $Template::Document::ERROR;

           print $doc-&gt;process($context);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module defines an object class whose instances represent compiled template documents.  The
       Template::Parser module creates a "Template::Document" instance to encapsulate a template as it is
       compiled into Perl code.

       The constructor method, <b>new()</b>, expects a reference to a hash array containing the "BLOCK", "DEFBLOCKS"
       and "METADATA" items.

       The "BLOCK" item should contain a reference to a Perl subroutine or a textual representation of Perl
       code, as generated by the Template::Parser module.  This is then evaluated into a subroutine reference
       using eval().

       The "DEFLOCKS" item should reference a hash array containing further named "BLOCK"s which may be defined
       in the template. The keys represent "BLOCK" names and the values should be subroutine references or text
       strings of Perl code as per the main "BLOCK" item.

       The "METADATA" item should reference a hash array of metadata items relevant to the document.

       The <b>process()</b> method can then be called on the instantiated "Template::Document" object, passing a
       reference to a Template::Context object as the first parameter. This will install any locally defined
       blocks ("DEFBLOCKS") in the "BLOCKS" cache in the context (via a call to <b>visit()</b>) so that they may be
       subsequently resolved by the context. The main "BLOCK" subroutine is then executed, passing the context
       reference on as a parameter. The text returned from the template subroutine is then returned by the
       <b>process()</b> method, after calling the context <b>leave()</b> method to permit cleanup and de-registration of named
       "BLOCKS" previously installed.

       An "AUTOLOAD" method provides access to the "METADATA" items for the document. The Template::Service
       module installs a reference to the main "Template::Document" object in the stash as the "template"
       variable. This allows metadata items to be accessed from within templates, including "PRE_PROCESS"
       templates.

       header:

           &lt;html&gt;
           &lt;head&gt;
           &lt;title&gt;[% template.title %]
           &lt;/head&gt;
           ...

       "Template::Document" objects are usually created by the Template::Parser but can be manually instantiated
       or sub-classed to provide custom template components.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new(\%config)</b>
       Constructor method which accept a reference to a hash array containing the structure as shown in this
       example:

           $doc = Template::Document-&gt;new({
               BLOCK =&gt; sub { # some perl code; return $some_text },
               DEFBLOCKS =&gt; {
                   header =&gt; sub { # more perl code; return $some_text },
                   footer =&gt; sub { # blah blah blah; return $some_text },
               },
               METADATA =&gt; {
                   author  =&gt; 'Andy Wardley',
                   version =&gt; 3.14,
               }
           }) || die $Template::Document::ERROR;

       "BLOCK" and "DEFBLOCKS" items may be expressed as references to Perl subroutines or as text strings
       containing Perl subroutine definitions, as is generated by the Template::Parser module.  These are
       evaluated into subroutine references using eval().

       Returns a new "Template::Document" object or "undef" on error. The <b>error()</b> class method can be called, or
       the $ERROR package variable inspected to retrieve the relevant error message.

   <b>process($context)</b>
       Main processing routine for the compiled template document. A reference to a Template::Context object
       should be passed as the first parameter. The method installs any locally defined blocks via a call to the
       context <b>visit()</b> method, processes its own template, (passing the context reference as a parameter) and
       then calls <b>leave()</b> in the context to allow cleanup.

           print $doc-&gt;process($context);

       Returns a text string representing the generated output for the template.  Errors are thrown via die().

   <b>block()</b>
       Returns a reference to the main "BLOCK" subroutine.

   <b>blocks()</b>
       Returns a reference to the hash array of named "DEFBLOCKS" subroutines.

   <b>variables()</b>
       Returns a reference to a hash of variables used in the template.  This requires the TRACE_VARS option to
       be enabled.

   <b>AUTOLOAD</b>
       An autoload method returns "METADATA" items.

           print $doc-&gt;author();

</pre><h4><b>CLASS</b> <b>METHODS</b></h4><pre>
       These methods are used internally.

   <b>as_perl($content)</b>
       This method generate a Perl representation of the template.

           my $perl = Template::Document-&gt;as_perl({
               BLOCK     =&gt; $main_block,
               DEFBLOCKS =&gt; {
                   foo   =&gt; $foo_block,
                   bar   =&gt; $bar_block,
               },
               METADATA  =&gt; {
                   name  =&gt; 'my_template',
               }
           });

   <b>write_perl_file(\%config)</b>
       This method is used to write compiled Perl templates to disk.  If the "COMPILE_EXT" option (to indicate a
       file extension for saving compiled templates) then the Template::Parser module calls this subroutine
       before calling the <b>new()</b> constructor.  At this stage, the parser has a representation of the template as
       text strings containing Perl code.  We can write that to a file, enclosed in a small wrapper which will
       allow us to subsequently require() the file and have Perl parse and compile it into a
       "Template::Document".  Thus we have persistence of compiled templates.

</pre><h4><b>INTERNAL</b> <b>FUNCTIONS</b></h4><pre>
   <b>catch_warnings()</b>
       This is a simple handler used to catch any errors that arise when the compiled Perl template is first
       evaluated (that is, evaluated by Perl to create a template subroutine at compile, rather than the
       template being processed at runtime).

   <b>is_utf8()</b>
       This is mapped to "utf8::is_utf8" for versions of Perl that have it (&gt; 5.008) or to "Encode::is_utf8" for
       Perl 5.008.  Earlier versions of Perl are not supported.

</pre><h4><b>AUTHOR</b></h4><pre>
       Andy Wardley &lt;<a href="mailto:abw@wardley.org">abw@wardley.org</a>&gt; &lt;<a href="http://wardley.org/">http://wardley.org/</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (C) 1996-2013 Andy Wardley.  All Rights Reserved.

       This module is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Template, Template::Parser

perl v5.40.0                                       2024-10-20                            <u>Template::<a href="../man3pm/Document.3pm.html">Document</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>