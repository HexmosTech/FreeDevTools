<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>io_uring_prep_read_multishot - prepare I/O read multishot request</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liburing-dev">liburing-dev_2.11-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       io_uring_prep_read_multishot - prepare I/O read multishot request

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;liburing.h&gt;</b>

       <b>void</b> <b>io_uring_prep_read_multishot(struct</b> <b>io_uring_sqe</b> <b>*</b><u>sqe</u><b>,</b>
                                         <b>int</b> <u>fd</u><b>,</b>
                                         <b>unsigned</b> <u>nbytes</u><b>,</b>
                                         <b>__u64</b> <u>offset</u><b>,</b>
                                         <b>int</b> <u>buf_group</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man3/io_uring_prep_read_multishot.3.html">io_uring_prep_read_multishot</a></b>(3)  helper  prepares an IO read multishot request. The submission queue
       entry <u>sqe</u> is setup to use the file descriptor <u>fd</u> to start reading into a buffer from the provided  buffer
       group with ID <u>buf_group</u> at the specified <u>offset</u>.

       <u>nbytes</u>  must  be  set to zero, as the size read will be given by the size of the buffers in the indicated
       buffer group IO.

       On files that are not capable of seeking, the offset must be 0 or -1.

       If <u>nbytes</u> exceeds the size of the buffers in the specified buffer group, or if <u>nbytes</u> is  <b>0</b>  <b>,</b>  then  the
       size of the buffer in that group will be used for the transfer.

       A  multishot  read  request will repeatedly trigger a completion event whenever data is available to read
       from the file. Because of that, this type of request can only be used with a file type that is  pollable.
       Examples  of  that  include pipes, tun devices, etc. If used with a regular file, or a wrong file type in
       general, the request will fail with <b>-EBADFD</b> in the CQE <u>res</u> field.

       Since multishot requests repeatedly trigger completion events as data  arrives,  it  must  be  used  with
       provided  buffers.  With provided buffers, the application provides buffers to io_uring upfront, and then
       the kernel picks a buffer from the specified group in <u>buf_group</u> when the request  is  ready  to  transfer
       data.

       A  multishot request will persist as long as no errors are encountered doing handling of the request. For
       each CQE posted on behalf of this  request,  the  CQE  <u>flags</u>  will  have  <b>IORING_CQE_F_MORE</b>  set  if  the
       application  should  expect  more  completions  from  this  request.   If  this flag isn't set, then that
       signifies termination of the multishot read request.

       After the read has been prepared it can be submitted with one of the submit functions.

       Available since 6.7.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       None

</pre><h4><b>ERRORS</b></h4><pre>
       The CQE <u>res</u> field will contain the result of the operation. See the  related  man  page  for  details  on
       possible  values. Note that where synchronous system calls will return <b>-1</b> on failure and set <u>errno</u> to the
       actual error value, io_uring never uses <u>errno</u>.  Instead it returns the negated <u>errno</u> directly in the  CQE
       <u>res</u> field.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/io_uring_get_sqe.3.html">io_uring_get_sqe</a></b>(3),     <b><a href="../man3/io_uring_prep_read.3.html">io_uring_prep_read</a></b>(3),    <b><a href="../man3/io_uring_buf_ring_init.3.html">io_uring_buf_ring_init</a></b>(3)    <b><a href="../man3/io_uring_buf_ring_add.3.html">io_uring_buf_ring_add</a></b>(3),
       <b><a href="../man3/io_uring_submit.3.html">io_uring_submit</a></b>(3)

liburing-2.5                                   September 12, 2023                <u><a href="../man3/io_uring_prep_read_multishot.3.html">io_uring_prep_read_multishot</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>