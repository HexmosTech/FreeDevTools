<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>svc_dg_enablecache,  svc_exit,  svc_fdset, svc_freeargs, svc_getargs, svc_getreq_common, svc_getreq_poll,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtirpc-dev">libtirpc-dev_1.3.6+ds-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       svc_dg_enablecache,  svc_exit,  svc_fdset, svc_freeargs, svc_getargs, svc_getreq_common, svc_getreq_poll,
       svc_getreqset, svc_getrpccaller, svc_pollset, svc_run, svc_sendreply â€” library routines for RPC servers

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;rpc/rpc.h&gt;</b>

       <u>int</u>
       <b>svc_dg_enablecache</b>(<u>SVCXPRT</u> <u>*xprt</u>, <u>const</u> <u>unsigned</u> <u>cache_size</u>);

       <u>void</u>
       <b>svc_exit</b>(<u>void</u>);

       <u>bool_t</u>
       <b>svc_freeargs</b>(<u>const</u> <u>SVCXPRT</u> <u>*xprt</u>, <u>const</u> <u>xdrproc_t</u> <u>inproc</u>, <u>caddr_t</u> <u>in</u>);

       <u>bool_t</u>
       <b>svc_getargs</b>(<u>const</u> <u>SVCXPRT</u> <u>*xprt</u>, <u>const</u> <u>xdrproc_t</u> <u>inproc</u>, <u>caddr_t</u> <u>in</u>);

       <u>void</u>
       <b>svc_getreq_common</b>(<u>const</u> <u>int</u> <u>fd</u>);

       <u>void</u>
       <b>svc_getreq_poll</b>(<u>struct</u> <u>pollfd</u> <u>*pfdp</u>, <u>const</u> <u>int</u> <u>pollretval</u>);

       <u>void</u>
       <b>svc_getreqset</b>(<u>fd_set</u> <u>*</u> <u>rdfds</u>);

       <u>struct</u> <u>netbuf</u> <u>*</u>
       <b>svc_getrpccaller</b>(<u>const</u> <u>SVCXPRT</u> <u>*xprt</u>);

       <u>struct</u> <u>cmsgcred</u> <u>*</u>
       <b>__svc_getcallercreds</b>(<u>const</u> <u>SVCXPRT</u> <u>*xprt</u>);

       <u>struct</u> <u>pollfd</u> <u>svc_pollset[FD_SETSIZE];</u>

       <u>void</u>
       <b>svc_run</b>(<u>void</u>);

       <u>bool_t</u>
       <b>svc_sendreply</b>(<u>SVCXPRT</u> <u>*xprt</u>, <u>xdrproc_t</u> <u>outproc</u>, <u>char</u> <u>*out</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       These routines are part of the RPC library which allows C language programs to make  procedure  calls  on
       other machines across the network.

       These  routines are associated with the server side of the RPC mechanism.  Some of them are called by the
       server side dispatch function, while others (such as <b>svc_run</b>()) are called when the server is initiated.

</pre><h4><b>Routines</b></h4><pre>
       See <u><a href="../man3/rpc.3.html">rpc</a></u>(3) for the definition of the <u>SVCXPRT</u> data structure.

       <b>svc_dg_enablecache</b>()    This function allocates a duplicate request cache for the service endpoint  <u>xprt</u>,
                               large  enough  to  hold  <u>cache_size</u>  entries.   Once  enabled, there is no way to
                               disable caching.  This routine returns 0 if space necessary for a  cache  of  the
                               given size was successfully allocated, and 1 otherwise.

       <b>svc_exit</b>()              This  function,  when  called  by  any  of the RPC server procedure or otherwise,
                               causes <b>svc_run</b>() to return.

                               As currently implemented, <b>svc_exit</b>() zeroes the <u>svc_fdset</u>  global  variable.   If
                               RPC  server activity is to be resumed, services must be reregistered with the RPC
                               library  either  through  one  of  the  <u><a href="../man3/rpc_svc_create.3.html">rpc_svc_create</a></u>(3)  functions,  or   using
                               <b>xprt_register</b>().   The  <b>svc_exit</b>()  function  has  global  scope and ends all RPC
                               server activity.

       <u>fd_set</u> <u>svc_fdset</u>        A global variable reflecting the RPC server's read file descriptor bit  mask;  it
                               is  suitable  as  an  argument  to  the  <u><a href="../man2/select.2.html">select</a></u>(2)  system call.  This is only of
                               interest if service implementors do not call <b>svc_run</b>(), but rather do  their  own
                               asynchronous  event  processing.   This  variable  is  read-only (do not pass its
                               address to <u><a href="../man2/select.2.html">select</a></u>(2)!), yet it may change after calls to <b>svc_getreqset</b>()  or  any
                               creation routines.

       <b>svc_freeargs</b>()          A  function  macro  that  frees  any data allocated by the RPC/XDR system when it
                               decoded the arguments to a service procedure using <b>svc_getargs</b>().   This  routine
                               returns TRUE if the results were successfully freed, and FALSE otherwise.

       <b>svc_getargs</b>()           A function macro that decodes the arguments of an RPC request associated with the
                               RPC  service  transport  handle  <u>xprt</u>.   The <u>in</u> argument is the address where the
                               arguments will be placed; <u>inproc</u> is the XDR routine used to decode the arguments.
                               This routine returns TRUE if decoding succeeds, and FALSE otherwise.

       <b>svc_getreq_common</b>()     This routine is called to handle a request on the given file descriptor.

       <b>svc_getreq_poll</b>()       This routine is  only  of  interest  if  a  service  implementor  does  not  call
                               <b>svc_run</b>(),  but  instead  implements custom asynchronous event processing.  It is
                               called when <u><a href="../man2/poll.2.html">poll</a></u>(2) has determined that an RPC request has arrived  on  some  RPC
                               file  descriptors;  <u>pollretval</u>  is  the return value from <u><a href="../man2/poll.2.html">poll</a></u>(2) and <u>pfdp</u> is the
                               array of <u>pollfd</u> structures on which the <u><a href="../man2/poll.2.html">poll</a></u>(2) was done.  It is assumed to be an
                               array large enough to contain the maximal number of descriptors allowed.

       <b>svc_getreqset</b>()         This routine is  only  of  interest  if  a  service  implementor  does  not  call
                               <b>svc_run</b>(),  but  instead  implements custom asynchronous event processing.  It is
                               called when <u><a href="../man2/poll.2.html">poll</a></u>(2) has determined that an RPC request has arrived  on  some  RPC
                               file  descriptors;  <u>rdfds</u>  is  the  resultant read file descriptor bit mask.  The
                               routine returns when all file descriptors associated with the value of <u>rdfds</u> have
                               been serviced.

       <b>svc_getrpccaller</b>()      The approved way of getting the network address of  the  caller  of  a  procedure
                               associated with the RPC service transport handle <u>xprt</u>.

       <b>__svc_getcallercreds</b>()  <u>Warning</u>:  this  macro  is  specific to FreeBSD and thus not portable.  This macro
                               returns a pointer to a <u>cmsgcred</u> structure, defined in &lt;<u>sys/socket.h</u>&gt;, identifying
                               the calling client.  This only works if the client is calling the server over  an
                               AF_LOCAL socket.

       <u>struct</u> <u>pollfd</u> <u>svc_pollset[FD_SETSIZE]</u>;
                               <u>svc_pollset</u>  is  an  array  of <u>pollfd</u> structures derived from <u>svc_fdset[]</u>.  It is
                               suitable  as  an  argument  to  the  <u><a href="../man2/poll.2.html">poll</a></u>(2)  system  call.   The  derivation  of
                               <u>svc_pollset</u>  from  <u>svc_fdset</u>  is made in the current implementation in <b>svc_run</b>().
                               Service implementors who do not call <b>svc_run</b>() and who wish  to  use  this  array
                               must perform this derivation themselves.

       <b>svc_run</b>()               This  routine  never returns.  It waits for RPC requests to arrive, and calls the
                               appropriate service procedure using <b>svc_getreq_poll</b>()  when  one  arrives.   This
                               procedure is usually waiting for the <u><a href="../man2/poll.2.html">poll</a></u>(2) system call to return.

       <b>svc_sendreply</b>()         Called  by  an  RPC  service's  dispatch  routine to send the results of a remote
                               procedure call.  The <u>xprt</u> argument is the request's associated transport  handle;
                               <u>outproc</u>  is  the  XDR routine which is used to encode the results; and <u>out</u> is the
                               address of the  results.   This  routine  returns  TRUE  if  it  succeeds,  FALSE
                               otherwise.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       These functions are part of libtirpc.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/poll.2.html">poll</a></u>(2), <u><a href="../man2/select.2.html">select</a></u>(2), <u><a href="../man3/rpc.3.html">rpc</a></u>(3), <u><a href="../man3/rpc_svc_create.3.html">rpc_svc_create</a></u>(3), <u><a href="../man3/rpc_svc_err.3.html">rpc_svc_err</a></u>(3), <u><a href="../man3/rpc_svc_reg.3.html">rpc_svc_reg</a></u>(3)

Debian                                             May 3, 1993                                  <u><a href="../man3/RPC_SVC_CALLS.3.html">RPC_SVC_CALLS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>