<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pslib - Library to create PostScript files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/pslib-dev">pslib-dev_0.4.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pslib - Library to create PostScript files

</pre><h4><b>DESCRIPTION</b></h4><pre>
       pslib  is  a  library  to create PostScript files with a set of about 50 functions for line drawing, text
       output, page handling, etc.  It is very similar to other libraries  like  panda,  cpdf  or  pdflib  which
       produce PDF. pslib can to a certain degree replace those libraries if the PostScript file is converted to
       PDF  with  ghostscripts  excellent pdf writer. The results achieved with pslib can be even better when it
       comes to text output, because it supports kerning, ligatures and hyphenation.

       pslib is a C-library but there are bindings for Perl, Python, Tcl and PHP.  This documentation will  only
       describe  the  functions  of  the C-library, though most of what is said here can be applied to the other
       language bindings.  The PHP extension of pslib is documented in PEAR. The extension is called ps.

</pre><h4><b>GETTING</b> <b>STARTED</b></h4><pre>
       Programs which want to use pslib will have to include the header  file  libps/pslib.h  and  link  against
       libps.  Before doing any document creation the library should be initialized with <b><a href="../man3/PS_boot.3.html">PS_boot</a>(3)</b>. It will set
       the  locale and selects the messages in your language as defined by the environment variable LC_ALL. Your
       locale settings will affect hyphenation which uses <b><a href="../man3/isalpha.3.html">isalpha</a>(3)</b> and <b><a href="../man3/tolower.3.html">tolower</a>(3)</b>  to  prepare  the  word  for
       hyphenation. German umlauts will be filtered out if the locale is not set properly. The library should be
       finalized by <b><a href="../man3/PS_shutdown.3.html">PS_shutdown</a>(3)</b>.

       A PostScript document is represented by a pointer to PSDoc. Such a document can be created with <b><a href="../man3/PS_new.3.html">PS_new</a>(3)</b>
       and  destroyed  with <b><a href="../man3/PS_delete.3.html">PS_delete</a>(3)</b>. <b><a href="../man3/PS_new.3.html">PS_new</a>(3)</b> returns a pointer to PSDoc. You can handle several documents
       at the same time. The following example will do the basic preparation without creating a document on  the
       disk.

       ...
       #include &lt;libps/pslib.h&gt;

       main(int argc, char *argv[]) {
            PSDoc *psdoc;

            PS_boot();
            psdoc = PS_new();
            PS_delete(psdoc);
            PS_shutdown();
       }

       In order to actually create a PostScript document on disk you will have to call

       <b>int</b> <b>PS_open_file</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>filename</u><b>);</b>

       or

       <b>int</b> <b>PS_open_fp</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>FILE</b> <b>*</b><u>fp</u><b>);</b>

       <b><a href="../man3/PS_open_file.3.html">PS_open_file</a>(3)</b>  will create a new file with the given file name, while <b><a href="../man3/PS_open_fp.3.html">PS_open_fp</a>(3)</b> will use an already
       open file. Both require a pointer to PSDoc.

       If the document shall not be created on disk but in memory, which can be very handy in  web  application,
       one can use

       <b>int</b> <b>PS_open_mem</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>(*writeproc)</b> <u>(PSDoc</u> <u>*p,</u> <u>void</u> <u>*data,</u> <u>size_t</u> <u>size)</u><b>);</b>

       The second parameter is a function which is called instead of pslib's own output function.

       Extending  the  previous  example with one of the former three functions to open a document will at least
       create an initial empty PostScript document. It has to be closed with <b><a href="../man3/PS_close.3.html">PS_close</a>(3)</b>.  <b><a href="../man3/PS_close.3.html">PS_close</a>(3)</b> will only
       close the file if it was opened by <b><a href="../man3/PS_open_file.3.html">PS_open_file</a>(3)</b>.

       ...
       #include &lt;libps/pslib.h&gt;

       main(int argc, char *argv[]) {
            PSDoc *psdoc;

            PS_boot();
            psdoc = PS_new();
            PS_open_file(psdoc, "test.ps");
            PS_close(psdoc);
            PS_delete(psdoc);
            PS_shutdown();
       }

       There are more sophisticated funktions to start a new PostScript  document.  They  are  used  when  error
       handling  and  memory  management  shall be controlled by the calling application. Check the manual pages
       <b><a href="../man3/PS_new2.3.html">PS_new2</a>(3)</b> and <b><a href="../man3/PS_new3.3.html">PS_new3</a>(3)</b> for a detailed description or read the  section  about  memory  management  and
       error handler below..

</pre><h4><b>PAGE</b> <b>HANDLING</b></h4><pre>
       A PostScript document contains one or more pages. pslib provides the function

       <b>int</b> <b>PS_begin_page</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>width</u><b>,</b> <b>float</b> <u>height</u><b>);</b>

       and

       <b>int</b> <b>PS_end_page</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       to  start a new page with the given size in points and to end a page. All functions that draw any visible
       output will only work within a page. The page size has no meaning for the PostScript interpreter but will
       be used by ghostscript or Acrobat Distiller to set the page size in the  PDF  document.  Some  PostScript
       viewer also use the size to resize the output window.

       Starting  the first page of a document will internally end the PostScript header. This may have impact on
       resource handling. For more information see the section about resource handling.

</pre><h4><b>COORDINATE</b> <b>SYSTEM,</b> <b>SCOPE</b></h4><pre>
       PostScript defines a coordinate system with its origin in the lower left corner of a page. Its base  unit
       is  point which is 1/72 of an inch. Unless the coordinate system is scaled all values will be expected in
       point.

       pslib provides many functions which may not be called at any time.  For example, drawing and text  output
       functions  may only be called within a page, path constrution functions may only be called within a path.
       pslib defines so called scopes which are checked before executing a function. Those  scopes  are  prolog,
       document, page, pattern, template, path and object. If for example, one tries to output text outside of a
       page or within a path, then an error will be issued.

</pre><h4><b>DRAWING,</b> <b>PATH</b> <b>CONSTRUCTION</b></h4><pre>
       PostScript  does  not  have  any functions to draw a line directly but uses a two pass mechanism. First a
       path is constructed which is then drawn (stroken). The path can also be used for filling an  area  or  to
       clip further drawing. A path must not be a continues line, it may consist of several subpaths.

       Each path is started with

       <b>void</b> <b>PS_moveto</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>x</u><b>,</b> <b>float</b> <u>y</u><b>);</b>

       If  this  function is called within a path, it will just start a new subpath. The path can be constructed
       with one of the following functions.

       <b>void</b> <b>PS_lineto</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>x</u><b>,</b> <b>float</b> <u>y</u><b>);</b>

       <b>void</b> <b>PS_rect</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>x</u><b>,</b> <b>float</b> <u>y</u><b>,</b> <b>float</b> <u>width</u><b>,</b> <b>float</b> <u>height</u><b>);</b>

       <b>void</b> <b>PS_circle</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>x</u><b>,</b> <b>float</b> <u>y</u><b>,</b> <b>float</b> <u>radius</u><b>);</b>

       <b>void</b> <b>PS_arc</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>x</u><b>,</b> <b>float</b> <u>y</u><b>,</b> <b>float</b> <u>radius</u><b>,</b> <b>float</b> <u>alpha</u><b>,</b> <b>float</b> <u>beta</u><b>);</b>

       <b>void</b> <b>PS_arcn</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>x</u><b>,</b> <b>float</b> <u>y</u><b>,</b> <b>float</b> <u>radius</u><b>,</b> <b>float</b> <u>alpha</u><b>,</b> <b>float</b> <u>beta</u><b>);</b>

       <b>void</b> <b>PS_curveto</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>x1</u><b>,</b> <b>float</b> <u>y1</u><b>,</b> <b>float</b> <u>x2</u><b>,</b> <b>float</b> <u>y2</u><b>,</b> <b>float</b> <u>x3</u><b>,</b> <b>float</b> <u>y3</u><b>);</b>

       Once a path is constructed it can be optionally closed by

       <b>void</b> <b>PS_closepath</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       Closing a path means to add a segment from the last point to the  starting  point  of  the  path.  It  is
       helpful if an area is to be filled. In most cases the path is used for drawing which is done with

       <b>void</b> <b>PS_stroke</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       In  such  a  case you would not want to close the path. As already mentioned a path can also be filled or
       even both with the functions.

       <b>void</b> <b>PS_fill</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       <b>void</b> <b>PS_fill_stroke</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       <b><a href="../man3/PS_fill_stroke.3.html">PS_fill_stroke</a>(3)</b> does first fill and than stroke a path.  This  is  important  to  realize  because  the
       stroken line may cover parts of the filled area, depending on how wide it is.

</pre><h4><b>TEXT</b> <b>OUTPUT</b></h4><pre>
       Text  output  is  definetly  one  of  the  strongest  parts of pslib.  pslib supports kerning, protusion,
       ligatures and hyphenation. All of it is in a wide range  customizeable  by  parameters.  The  hyphenation
       algorithmn is based on the one used by TeX without the ability to take a whole paragraph into acount.

       Text  output requires at least the Adobe font metric files, even for the standard PostScript fonts. pslib
       has not, like other libraries, the font metrics for the standard  fonts  compiled  in.  They  are  freely
       available  in  the internet. If the font is to be embedded into the document, then the font outline (.pfb
       file) is also needed.

       Additional files are needed for more sophisticated text output.  It  will  be  explained  later  in  this
       documentation.

       Before being able to output any text a font has to be loaded with

       <b>int</b> <b>PS_findfont</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>fontname</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>encoding</u><b>,</b> <b>int</b> <u>embed</u><b>);</b>

       It returns a unique id for the font.  The fontname is the filename of the Adobe font metrics file without
       the  extension .afm. If the font shall be embedded into the document, then the last parameter must be set
       to 1 and the file <u>fontname</u>.pfb must be present.

       The <u>encoding</u> specifies the font encoding to be used in the PostScript document. It defaults to  TeXBase1,
       which  is  a  reasonable  set of glyphs covering most western languages, when the empty string or NULL is
       passed. The special encoding 'builtin' stands for the encoding as provided by  the  font  itself.  It  is
       usually  AdobeStandardEncoding  which  is  a  smaller  set  of glyphs than TeXBase1.  If unsure leave the
       encoding parameter empty.

       Calling <b><a href="../man3/PS_findfont.3.html">PS_findfont</a>(3)</b> is a sensitive matter.  Thought it may be called  in  almost  every  scope  it  is
       highly  recommended  to  call  it  either  within  a  page  or before the first page (within the prolog).
       Especially when the font is to be embedded or uses a non default encoding.  This  limitation  has  to  be
       enforced in order to be able to extract certain pages from the document without corruption. Programs like
       <b>psselect</b> extract a page by taking the prolog of the PostScript document and the selected page. Resources,
       like fonts, not being part of the page or the prolog will not be included into the resulting document and
       using those resources will provoke errors.  pslib will output a warning in case of potential problems.

       <b>int</b> <b>PS_setfont</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>int</b> <u>fontid</u><b>,</b> <b>float</b> <u>size</u><b>);</b>

       sets  the  font  which  was  loaded  with  <b><a href="../man3/PS_findfont.3.html">PS_findfont</a>(3)</b>  in  a  given size. After calling this function
       everything is prepared to output text with one of the following functions. Each text output function uses
       kerning pairs and ligatures if available.

       <b>int</b> <b>PS_show</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>text</u><b>);</b>

       outputs text at the current text position and moves the x position to the end of the text. If text is  to
       be output at a certain position on the page the function

       <b>int</b> <b>PS_show_xy</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>text</u><b>,</b> <b>float</b> <u>x</u><b>,</b> <b>float</b> <u>y</u><b>);</b>

       can  be used. Both functions also exist in a version which requires the length of the string as the third
       parameter. The are called <b><a href="../man3/PS_show2.3.html">PS_show2</a>(3)</b> and <b><a href="../man3/PS_show_xy2.3.html">PS_show_xy2</a>(3)</b>.

       The functions mentioned so far will print all text into one line.  If one would like  to  wrap  a  longer
       text into a box, the function

       <b>int</b>  <b>PS_show_boxed</b>  <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>text</u><b>,</b> <b>float</b> <u>left</u><b>,</b> <b>float</b> <u>bottom</u><b>,</b> <b>float</b> <u>width</u><b>,</b> <b>float</b> <u>height</u><b>,</b>
       <b>const</b> <b>char</b> <b>*</b><u>hmode</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>feature</u><b>);</b>

       should be usesd. It breaks the text into lines of length <u>width</u> and fills the box until there is no  space
       left.  The function returns the number of remaining chars which did not fit into the box. This number can
       be  used  to  create  a  second,  third,  ...   box for the remaining text. Text can be left and/or right
       justified or centered depending on the parameter <u>hmode</u>.  Hyphenation is turned off by default, because it
       needs to be set up before it can be used.

       Once again, working with fonts is an error prune issue, because it is important at what position  in  the
       document  the  fonts are loaded. At a rule of thumb you should load fonts which are used on several pages
       of the document before the first page, and fonts only used on a single page within that page. For a  more
       detailed discussion see the section on resource handling.

</pre><h4><b>HYPHENATION,</b> <b>KERNING,</b> <b>LIGATURES,</b> <b>PROTUSION</b></h4><pre>
       pslib's  advanced  text  output features cover hyphenation, kerning, ligatures and protusion. Kerning and
       ligatures are turned on by default and will be used if the current font supports it. Some  ligatures  are
       built  into  pslib,  just  in  case the font has the glyphs but misses the command to build the ligature.
       Those ligatures are fi, fl, ff, ffi, and ffl. Both ligatures and kerning can be turned off by setting the
       parameter 'ligature' respectively 'kerning' to false. pslib  automatically  inserts  a  ligature  if  the
       character  sequence  of  that  ligature  is  found.   If  a ligature is not to be used then its character
       sequence must be broken up with a broken bar character. Ligatures will never be used if charspacing has a
       value unequal to zero.

       If a font provides more ligatures as those mentioned before, they are usually at places  not  conform  to
       the  Adobe  Standard  Encoding.  There  glyph  name is often the name of the glyph supposed to be at that
       position in the Adobe Standard Encoding. pslib can utilize those ligatures when a so called encoding file
       is supplied. The encoding file contains an font encoding vector and definitions for extra  ligatures.  An
       encoding   file   is   very   similar   to   encoding   files   used   by  <b>dvips</b>  and  usually  found  in
       <u>/usr/share/texmf/dvips/base</u>.  Adding a ligature requires a line like the following:

       % LIGKERN char1 char2 =: ligature ;

       If 'char1' is followed by 'char2' they will be both replaced by the glyph  'ligature'.  This  replacement
       may not be used exclusively for ligatures like 'fi' or 'ff' but for any combination of characters.  Quite
       common is a hyphen followed by a hyphen, which is replaced by an endash.

       In  order  to  set  up  hyphenation you will first need a hyphenation dictionary for your language. Since
       pslib uses a well know hyphenation algorithmn used not just by TeX, but also by openoffice  and  scribus,
       one  can  take the dictionary from those programs. If you have scribus installed on your system, you will
       find the dictionaries for many languages in <u>/usr/lib/scribus/dicts</u>.

       Hyphenation is turned on when the parameter 'hyphenation' is set to true and the  parameter  'hyphendict'
       contains the file name of the hyphenation dictionary.

       Protusion  is  an  advanced  method  to  improve  the  appearance of text margins. It is only used by the
       function <b><a href="../man3/PS_show_boxed.3.html">PS_show_boxed</a>(3)</b> if the horizontal mode is set to 'justify'. A margin may not look  straight  if
       lines  end  or  begin  with  characters  with a 'light' appearance like a period, hyphen or comma.  Those
       characters should reach into the margin to make it look straight.   pslib  tries  to  read  a  so  called
       protusion  file whenever a font is loaded with <b><a href="../man3/PS_findfont.3.html">PS_findfont</a>(3)</b>. If it cannot be found a warning is issued.
       The file must be named 'fontname.pro' and contains a line for each character with protusion  information.
       Finding reasonable protusion values can be a tedious work.

       N hyphen ; M 0 650 ;
       N comma ; M 0 650 ;
       N period ; M 0 650 ;
       N semicolon ; M 0 500 ;

       The  syntax  is  similar to an .afm file. The protusion values for the left and right margin are the last
       two numbers.

</pre><h4><b>LOADING</b> <b>FILES</b></h4><pre>
       All files which are being loaded by pslib are searched for in the current directory and the 'SearchPath'.
       'SearchPath' is a parameter which is set  by  <b><a href="../man3/PS_set_parameter.3.html">PS_set_parameter</a>(3)</b>.   <b><a href="../man3/PS_set_parameter.3.html">PS_set_parameter</a>(3)</b>  can  be  called
       multiple  times  to add several directories to the search path. Function which are affected by the search
       path are <b><a href="../man3/PS_findfont.3.html">PS_findfont</a>(3)</b> for loading .afm, .pfb, and .enc files, <b><a href="../man3/PS_include_file.3.html">PS_include_file</a>(3)</b>.

</pre><h4><b>RESOURCE</b> <b>HANDLING</b></h4><pre>
       Resources in pslib are fonts, patterns, templates, spot colors, and  images.  Templates  and  images  are
       treated  equally. A resource is usally loaded or created and can be used repeatingly afterwards. Resource
       handling is somewhat sensitve, in terms of the position in the document where they are loaded or created.
       Plain PostScript does not care about where a resource is defined as long as it  is  known  before  it  is
       used. PostScript documents are not always printed but quite often displayed on the screen or processed by
       software.  Most software which reads PostScript documents does not just interpret the PostScript code but
       also so called Document Structuring Conventions (DSC). Such instructions are helpful to  provide  further
       information  about  the  document  and  to  partition the document into sections like a prolog and pages.
       Programs evaluating those instructions can easily determine the page size, the creator, title or  author,
       the  number  of  pages  and  can jump straight to a certain page without interpreting the PostScript code
       before that page. Especially isolating certain  pages  requires  the  document  to  be  created  stringly
       following  the  DSC.  This means that all resource which are used through out the document must be either
       created on each page where they are used (not very sensible if the resource is used more  than  once)  or
       within  the  prolog right before the first page. pslib will put everything before the first page into the
       prolog.  On the other side the prolog may not contain any PostScript code  that  does  output  something.
       pslib makes sure this rule is not violated.

       In  practice  the  above  rules do not apply equally to all resource but can be seen as a general rule of
       thumb. Fonts can under certain circumstances be loaded at any time (see the section on 'Text output').

       Please note, that starting from 0.4.5 of pslib images are treated  as  resources  as  well,  though  this
       behaviour  can  be  turned  of  by setting `imagereuse' to `false' if existing code shows unexpected side
       effects.

</pre><h4><b>IMAGES</b></h4><pre>
       Placing images on a page in the PostScript document is similar to font handling. First the image  has  to
       be loaded with

       <b>int</b>  <b>PS_open_image_file</b>  <b>(PSDoc</b>  <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>type</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>filename</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>stringparam</u><b>,</b>
       <b>int</b> <u>intparam</u><b>);</b>

       or

       <b>int</b> <b>PS_open_image</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>type</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>source</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>data</u><b>,</b> <b>long</b> <u>length</u><b>,</b> <b>int</b>
       <u>width</u><b>,</b> <b>int</b> <u>height</u><b>,</b> <b>int</b> <u>components</u><b>,</b> <b>int</b> <u>bpc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>params</u><b>);</b>

       and than it can be placed on the page with the function

       <b>int</b> <b>PS_place_image</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>int</b> <u>imageid</u><b>,</b> <b>float</b> <u>x</u><b>,</b> <b>float</b> <u>y</u><b>,</b> <b>float</b> <u>scale</u><b>);</b>

       Once an image is not needed anymore it should be closed to free the resources.

       <b>int</b> <b>PS_close_image</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>int</b> <u>imageid</u><b>);</b>

       Until version 0.4.4 of pslib images are not real resources. Each  call  of  <b><a href="../man3/PS_place_image.3.html">PS_place_image</a>(3)</b>  wrote  the
       complete  image  into  the  PostScript  file.  Starting with version 0.4.5 images are by default reusable
       objects which are saved once into the PostScript file (with  <b><a href="../man3/PS_open_image.3.html">PS_open_image</a>(3)</b>  or  <b><a href="../man3/PS_open_image_file.3.html">PS_open_image_file</a>(3)</b>)
       and replayed as often as desired with <b><a href="../man3/PS_place_image.3.html">PS_place_image</a>(3)</b>. This behaviour can be turned off if `imagereuse'
       is  set  to `false'. Reusing images usually has the advantages of smaller file size, faster processing of
       the PostScript file and the possibility to place images into templates which was not allowed till version
       0.4.4. If an image is placed into a template and is not needed anymore, it  can  be  closed  right  after
       ending the template.

       Please note, that everything sayed about resources becomes true for reusable images, too.

</pre><h4><b>TEMPLATES</b></h4><pre>
       Templates  are  a  bit  like  images  created  within  the  document  itself.  Their big advantage is its
       reusability on any page thoughout the document by simply referencing them. This saves a lot of disk space
       if the template is placed many times. They are often used for logos or headers which are to be placed  on
       each page. A template is started with the function

       <b>int</b> <b>PS_begin_template</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>width</u><b>,</b> <b>float</b> <u>height</u><b>);</b>

       Like  a  page or an image a template has a boundig box. Within that box almost any operation for drawing,
       text output, etc. can be called.  Everything beyond the bounding box is clipped.  A template is ended and
       ready for use with

       <b>int</b> <b>PS_end_template</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       Each template has its own id which was returned by <b><a href="../man3/PS_begin_template.3.html">PS_begin_template</a>(3)</b>. This id is like an image id  and
       can be passed to <b><a href="../man3/PS_place_image.3.html">PS_place_image</a>(3)</b>. This makes a template identical to an image in terms of handling. Any
       call  of <b><a href="../man3/PS_place_image.3.html">PS_place_image</a>(3)</b> will only place a reference to the template into the document which results in
       a small document size.

</pre><h4><b>COLORS</b></h4><pre>
       pslib supports all colorspaces available in PostScript including spot colors. Opposed to  the  PostScript
       color  modell  which  knows  just one current color, pslib distinguishes between a stroke and fill color.
       Colors are set with

       <b>int</b> <b>PS_setcolor</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>type</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>colorspace</u><b>,</b> <b>float</b> <u>c1</u><b>,</b> <b>float</b>  <u>c2</u><b>,</b>  <b>float</b>  <u>c3</u><b>,</b>
       <b>float</b> <u>c4</u><b>);</b>

       <u>type</u>  determines  if the fill, stroke or both (fillstroke) colors are set by the function. The colorspace
       can be any of 'gray', 'rgb', 'cmyk', 'spot', or 'pattern'. The colorspace 'pattern' is  somewhat  special
       and  will be discussed in the next section.  The float parameters contain the actual values of the color.
       Depending on the colorspace not all parameters will be evaluated. Spot colors need to be  created  before
       with

       <b>int</b> <b>PS_makespotcolor</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>name</u><b>,</b> <b>float</b><u>reserved</u><b>);</b>

       The  name  of  the spot color can be any string value, thought one will usually take the official name of
       the spot color, e.g. PANTONE 114 C.  Each spot color has a color in an alternative  colorspace  which  is
       used  when  the  spot  color  itself  cannot be used. This is always the case when the PostScript file is
       viewed on a computer screen or printed by an ink printer. If the PostScript  document  is  separated  for
       professional  printing,  the  alternative  color  has no meaning. The alternative color is taken from the
       current fill color. This means, that you have to call <b><a href="../man3/PS_setcolor.3.html">PS_setcolor</a>(3)</b>  and  set  the  current  fill  color
       before  calling  <b><a href="../man3/PS_makespotcolor.3.html">PS_makespotcolor</a>(3)</b>.   <b><a href="../man3/PS_makespotcolor.3.html">PS_makespotcolor</a>(3)</b> can only handle fill colors in the colorspace
       'gray', 'rgb', or 'cmyk'.

       <b><a href="../man3/PS_makespotcolor.3.html">PS_makespotcolor</a>(3)</b> returns the id of the spot color which is passed as parameter <u>c1</u>  to  <b><a href="../man3/PS_setcolor.3.html">PS_setcolor</a>(3)</b>.
       All  spot colors used in the document should be defined before the first page, otherwise they will not be
       included into the list of custom colors within the document comments section  at  the  beginning  of  the
       file.

</pre><h4><b>COLOR</b> <b>SEPARATION</b></h4><pre>
       Printing  a  document  sometimes  requires  to  separate colors because certain printers print each color
       separately.  Color separation is often done on the multi color document by the printing company. However,
       pslib can separate colors very easily by setting the value 'separationcolor' on a  value  from  1  to  4,
       depending  on the color you would like to separate (1=cyan, 2=magenta, 3=yellow, 4=black). This has to be
       done before creating a page. The resulting document will contain only those parts in the separated color.
       Consequently, one  has  to  create  four  identical  pages,  each  called  with  a  different  value  for
       'separationcolor'.

</pre><h4><b>PATTERNS</b></h4><pre>
       Filling  an  area  can  be done with a single color or a self designed pattern. Such a pattern can be any
       drawing. Actually, it can be everything which can be put on a page. If a pattern is used for  filling  it
       is  repeatingly  placed  in  horizontal and vertical direction with a given distance. Pattern are started
       with

       <b>int</b> <b>PS_begin_pattern</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>width</u><b>,</b> <b>float</b> <u>height</u><b>,</b> <b>float</b> <u>xstep</u><b>,</b> <b>float</b> <u>ystep</u><b>,</b> <b>int</b> <u>painttype</u><b>);</b>

       and ended with

       <b>int</b> <b>PS_end_pattern</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       Within those two functions almost any output operation can be used  for  creating  the  pattern.  Once  a
       pattern  is  created,  it  can  be  used like a color for filling. Just pass the string "pattern" and the
       pattern id (returned by <b><a href="../man3/PS_begin_pattern.3.html">PS_begin_pattern</a>(3)</b>) to <b><a href="../man3/PS_setcolor.3.html">PS_setcolor</a>(3)</b>.  Any  following  drawing  and/or  filling
       operation will now use the pattern.

</pre><h4><b>HYPERLINKS,</b> <b>BOOKMARKS</b></h4><pre>
       PostScript  itself  does  not support any hyperlink functions like PDF does. Nervertheless, one can embed
       hyperlinks into a PostScript document which will be used if the document is later converted to PDF.  Such
       commands for embedding hyperlinks are  called  pdfmarks.  pdfmarks  allow  to  store  any  feature  in  a
       PostScript  document which is available in PDF. The PostScript interpreter itself will not care about the
       pdfmarks. This features makes pslib a viable alternative to libraries creating PDF directly.

       Some functions of pslib will place a pdfmark silently into the document. The most prominent  function  is
       <b><a href="../man3/PS_begin_page.3.html">PS_begin_page</a>(3)</b> which stores the page size with the help of pdfmarks.

       pslib supports several types of hyperlinks, which are inserted with the following function.

       <b>int</b> <b>PS_add_weblink</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>llx</u><b>,</b> <b>float</b> <u>lly</u><b>,</b> <b>float</b> <u>urx</u><b>,</b> <b>float</b> <u>ury</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>url</u><b>);</b>

       <b>int</b>  <b>PS_add_pdflink</b>  <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>llx</u><b>,</b> <b>float</b> <u>lly</u><b>,</b> <b>float</b> <u>urx</u><b>,</b> <b>float</b> <u>ury</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>filename</u><b>,</b> <b>int</b>
       <u>page</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>dest</u><b>);</b>

       <b>int</b> <b>PS_add_locallink</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>llx</u><b>,</b> <b>float</b> <u>lly</u><b>,</b> <b>float</b> <u>urx</u><b>,</b> <b>float</b>  <u>ury</u><b>,</b>  <b>int</b>  <u>page</u><b>,</b>  <b>const</b>  <b>char</b>
       <b>*</b><u>dest</u><b>);</b>

       <b>int</b> <b>PS_add_launchlink</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>llx</u><b>,</b> <b>float</b> <u>lly</u><b>,</b> <b>float</b> <u>urx</u><b>,</b> <b>float</b> <u>ury</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>filename</u><b>);</b>

       Each  of  the  above  function  requires a rectangle with its lower left corner at <u>llx</u>, <u>lly</u> and its upper
       right corner at <u>urx</u>, <u>ury</u>. The rectangle will not be visible in the PostScript file and marks the sensitve
       area of the link. When the document is  concerted  to  PDF,  the  rectangle  will  become  visible.   Its
       appearance can be set with the functions.

       <b>int</b> <b>PS_set_border_style</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>style</u><b>,</b> <b>float</b> <u>width</u><b>);</b>

       <u>style</u> can be either 'solid' or 'dashed'.

       <b>int</b> <b>PS_set_border_color</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>red</u><b>,</b> <b>float</b> <u>green</u><b>,</b> <b>float</b> <u>blue</u><b>);</b>

       <b>int</b> <b>PS_set_border_dash</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>float</b> <u>black</u><b>,</b> <b>float</b> <u>white</u><b>);</b>

       pslib  also  supports to add bookmarks which will be displayed by PDF viewers as a table of contents next
       to the document. Bookmarks have a title and point to a page in the document. The can be added with

       <b>int</b> <b>PS_add_bookmark</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>text</u><b>,</b> <b>int</b> <u>parent</u><b>,</b> <b>int</b> <u>open</u><b>);</b>

       To build up a hierachical tree of bookmarks, one can pass a parent bookmark when creating a new one.  The
       parent  bookmark  is  referenced by its id as it is returned by the function itself. A bookmark is always
       added for the current page. It is shown open if the parameter <u>open</u> is greater 0.

</pre><h4><b>TYPE3</b> <b>FONTS</b></h4><pre>
       PostScript knows several types of fonts. The most common is called Type1 which  are  usally  supplied  by
       many  font  manufactures as .pfb files. pslib can read those fonts and use them right away.  Another type
       of font is called Type3. Type3 fonts distinguish from Type1 fonts by the way its glyphs are  constructed.
       Glyphs  in Type3 fonts are created with regular PostScript commands and can easily be created with pslib.
       All you need to do is start a new font with

       <b>int</b> <b>PS_begin_font</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>fontname</u><b>,</b> <b>int</b> <u>reserved</u><b>,</b> <b>double</b> <u>a</u><b>,</b> <b>double</b> <u>b</u><b>,</b> <b>double</b> <u>c</u><b>,</b> <b>double</b>
       <u>d</u><b>,</b> <b>double</b> <u>e</u><b>,</b> <b>double</b> <u>f</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>optlist</u><b>);</b>

       and end finish it with

       <b>int</b> <b>PS_end_font</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       Each font contains of a number of glyphs which are created with a pair of

       <b>int</b> <b>PS_begin_glyph</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>glyphname</u><b>,</b> <b>double</b> <u>wx</u><b>,</b> <b>double</b> <u>llx</u><b>,</b> <b>double</b> <u>lly</u><b>,</b>  <b>double</b>  <u>urx</u><b>,</b>
       <b>double</b> <u>ury</u><b>);</b>

       and

       <b>int</b> <b>PS_end_glyph</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>);</b>

       Within  a glyph each command is allowed to create a path and to stroke or fill it. Once a font is created
       it can be used like any other font by calling <b><a href="../man3/PS_setfont.3.html">PS_setfont</a>(3)</b>.

       The font cannot be saved to a file and used by other applications  but  it  can  used  within  the  pslib
       document which has several advantages when certain symbols, e.g. logos are used through out a document.

</pre><h4><b>MEMORY</b> <b>MANAGEMENT,</b> <b>ERROR</b> <b>HANDLING</b></h4><pre>
       pslib  uses  by  default its on memory management and error handling functions. In many cases the calling
       application has its own memory management and error handling. pslib can be told to use those functions by
       calling <b><a href="../man3/PS_new2.3.html">PS_new2</a>(3)</b> instead of <b><a href="../man3/PS_new.3.html">PS_new</a>(3)</b>.

       <b>int</b> <b>PS_new2</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>(errorhandler</b> <b>*)</b> <u>(PSDoc</u> <u>*p,</u> <u>int</u> <u>type,</u> <u>const</u> <u>char</u> <u>*msg,</u> <u>void</u> <u>*data)</u><b>,</b> <b>(allocproc</b>
       <b>*)</b> <u>(PSDoc</u> <u>*p,</u> <u>size_t</u> <u>size,</u> <u>const</u> <u>char</u> <u>*caller)</u><b>,</b> <b>(reallocproc</b> <b>*)</b> <u>(PSDoc</u> <u>*p,</u> <u>void</u> <u>*mem,</u> <u>size_t</u> <u>size,</u>  <u>const</u>
       <u>char</u> <u>*caller)</u><b>,</b> <b>(freeproc</b> <b>*)</b> <u>(PSDoc</u> <u>*p,</u> <u>void</u> <u>*mem)</u><b>,</b> <b>void</b> <b>*</b><u>opaque</u><b>);</b>

       The  errorhandler and the last parameter <u>opaque</u> allow to pass arbitrary data as the last parameter to its
       own errorhandler. This is quite often used if errors are being output in a widget of a graphical toolkit.
       The pointer to that widget can be passed as <u>opaque</u> and pslib will pass it forward to the error handler.

</pre><h4><b>DOCUMENT</b> <b>INFORMATION</b></h4><pre>
       PostScript documents usually contain a header made of comments with information about the  document.  The
       printer usually disregards this information but many PostScript viewer use it. Besides that, one can also
       place  pdfmarks  into  the  PostScript  document  which  contain  the  title,  keywords, author and other
       information. pslib provides the function <b><a href="../man3/PS_set_info.3.html">PS_set_info</a>(3)</b> to set those fields.

       <b>int</b> <b>PS_set_info</b> <b>(PSDoc</b> <b>*</b><u>psdoc</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>key</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>value</u><b>);</b>

       <b><a href="../man3/PS_set_info.3.html">PS_set_info</a>(3)</b> must be called before the first page. Calling it later will have no effect and produces  a
       warning.   The  function  may  also be used to set the bounding box of the document.  Usually there is no
       need for it, because the dimension of the first page will be used for the bounding box.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The detailed manual pages for each function of the library.

</pre><h4><b>AUTHOR</b></h4><pre>
       This manual page was written by Uwe Steinmann &lt;<a href="mailto:uwe@steinmann.cx">uwe@steinmann.cx</a>&gt;.

                                                 March 28, 2011                                         <u><a href="../man3/PSLIB.3.html">PSLIB</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>