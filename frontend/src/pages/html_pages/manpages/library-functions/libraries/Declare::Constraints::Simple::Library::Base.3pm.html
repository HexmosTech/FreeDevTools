<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Declare::Constraints::Simple::Library::Base - Library Base Class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdeclare-constraints-simple-perl">libdeclare-constraints-simple-perl_0.03-1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Declare::Constraints::Simple::Library::Base - Library Base Class

</pre><h4><b>SYNOPSIS</b></h4><pre>
         package My::Constraint::Library;
         use warnings;
         use strict;

         # this installs the base class and helper functions
         use Declare::Constraints::Simple-Library;

         # we can also automagically provide other libraries
         # to the importer
         use base 'Declare::Constraints::Simple::Library::Numericals';

         # with this we define a constraint to check a value
         # against a serial number regular expression
         constraint 'SomeSerial',
           sub {
             return sub {
               return _true if $_[0] =~ /\d{3}-\d{3}-\d{4}/;
               return _false('Not in SomeSerial format');
             };
           };

         1;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This base class contains the common library functionalities. This includes helper functions and install
       mechanisms.

</pre><h4><b>METHODS</b></h4><pre>
   <b>install_into($target)</b>
       Installs the base classes and helper functions into the $target namespace. The %CONSTRAINT_GENERATORS
       package variable of that class will be used as storage for it's constraints.

   <b>fetch_constraint_declarations()</b>
       Class method. Returns all constraints registered to the class.

   <b>fetch_constraint_generator($name)</b>
       Class method. Returns the constraint generator code reference registered under $name. The call will raise
       a "croak" if the generator could not be found.

   <b>prepare_generator($constraint_name,</b> <b>$generator)</b>
       Class method. This wraps the $generator in a closure that provides stack and failure-collapsing
       decisions.

   <b>add_constraint_generator($name,</b> <b>$code)</b>
       Class method. The actual registration method, used by "constraint".

</pre><h4><b>HELPER</b> <b>FUNCTIONS</b></h4><pre>
       Note that some of the helper functions are prefixed with "_". Although this means they are internal
       functions, it is ok to call them, as they have a fixed API. They are not distribution internal, but
       library internal, and only intended to be used from inside constraints.

   <b>constraint($name,</b> <b>$code)</b>
         constraint 'Foo', sub { ... };

       This registers a new constraint in the calling library. Note that constraints <b>have</b> <b>to</b> return result
       objects. To do this, you can use the helper functions "_result($bool, $msg", <b>_true()</b> and _false($msg).

   <b>_result($bool,</b> <b>$msg)</b>
       Returns a new result object. It's validity flag will depend on the $bool argument. The $msg argument is
       the error message to use on failure.

   <b>_false($msg)</b>
       Returns a non-valid result object, with it's message set to $msg.

   <b>_true()</b>
       Returns a valid result object.

   <b>_info($info)</b>
       Sets the current failure info to use in the stack info part.

   <b>_apply_checks($value,</b> <b>\@constraints,</b> <b>[$info])</b>
       This applies all constraints in the "\@constraints" array reference to the passed $value. You can
       optionally specify an $info string to be used in the stack of the newly created non-valid results.

   <b>_listify($value)</b>
       Puts $value into an array reference and returns it, if it isn't already one.

   <b>_with_message($msg,</b> <b>$closure,</b> <b>@args)</b>
       This is the internal version of the general "Message" constraint. It sets the current overridden message
       to $msg and executes the $closure with @args as arguments.

   <b>_with_scope($scope_name,</b> <b>$constraint,</b> <b>@args)</b>
       Applies the $constraint to @args in a newly created scope named by $scope_name.

   <b>_set_result($scope,</b> <b>$name,</b> <b>$result)</b>
       Stores the given $result unter the name $name in $scope.

   <b>_get_result($scope,</b> <b>$name)</b>
       Returns the result named $name from $scope.

   <b>_has_result($scope,</b> <b>$name)</b>
       Returns true only if such a result was registered already.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Declare::Constraints::Simple, Declare::Constraints::Simple::Library

</pre><h4><b>AUTHOR</b></h4><pre>
       Robert 'phaylon' Sedlacek "&lt;<a href="mailto:phaylon@dunkelheit.at">phaylon@dunkelheit.at</a>&gt;"

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       This module is free software, you can redistribute it and/or modify it under the same terms as perl
       itself.

perl v5.32.0                                       2021-01-09              <u>Declare::Const...::Library::<a href="../man3pm/Base.3pm.html">Base</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>