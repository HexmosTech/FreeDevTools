<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ares_library_cleanup - c-ares library deinitialization</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libc-ares-dev">libc-ares-dev_1.34.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ares_library_cleanup - c-ares library deinitialization

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;ares.h&gt;

       void ares_library_cleanup(void)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>ares_library_cleanup</b>  function  uninitializes  the  c-ares library, freeing all resources previously
       acquired by <u><a href="../man3/ares_library_init.3.html">ares_library_init</a>(3)</u> when the library was initialized, provided there  was  only  one  single
       previous  call to <u><a href="../man3/ares_library_init.3.html">ares_library_init</a>(3)</u>. If there was more than one previous call to <u><a href="../man3/ares_library_init.3.html">ares_library_init</a>(3)</u>,
       this  function  uninitializes  the  c-ares  library  only  if  it  is  the  call  matching  the  call  to
       <u><a href="../man3/ares_library_init.3.html">ares_library_init</a>(3)</u> which initialized the library (usually the very first call to <u><a href="../man3/ares_library_init.3.html">ares_library_init</a>(3)</u>).
       Other calls to <u><a href="../man3/ares_library_cleanup.3.html">ares_library_cleanup</a>(3)</u> have no effect other than decrementing an internal counter.

       This  function must be called when the program using c-ares will no longer need any c-ares function. Once
       the program has called <u><a href="../man3/ares_library_cleanup.3.html">ares_library_cleanup</a>(3)</u> sufficiently often such that the library is uninitialised,
       it shall not make any further call to any c-ares function.

       This function does not cancel any pending c-ares lookups or requests previously done. Program   must  use
       <u><a href="../man3/ares_cancel.3.html">ares_cancel</a>(3)</u> for this purpose.

       <b>This</b>  <b>function</b>  <b>is</b> <b>not</b> <b>thread</b> <b>safe.</b>  You have to call it once the program is about to terminate, but this
       call must be done once the program has terminated every single thread that it could have initiated.  This
       is required to avoid potential race conditions in library deinitialization, and also due to the fact that
       <u><a href="../man3/ares_library_cleanup.3.html">ares_library_cleanup</a>(3)</u>  might  call  functions  from  other  libraries that are thread unsafe, and could
       conflict with any other thread that is already using these other libraries.

       Win32/64 application DLLs shall not call <u><a href="../man3/ares_library_cleanup.3.html">ares_library_cleanup</a>(3)</u> from the DllMain function. Doing so will
       produce deadlocks and other problems.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       This function was first introduced in c-ares version 1.7.0 along  with  the  definition  of  preprocessor
       symbol  <u>CARES_HAVE_ARES_LIBRARY_CLEANUP</u>  as an indication of the availability of this function. Reference
       counting in <u><a href="../man3/ares_library_init.3.html">ares_library_init</a>(3)</u> and <u><a href="../man3/ares_library_cleanup.3.html">ares_library_cleanup</a>(3)</u>, which requires calls to the former function
       to match calls  to  the  latter,  is  present  since  c-ares  version  1.10.0.   Earlier  versions  would
       deinitialize the library on the first call to <u><a href="../man3/ares_library_cleanup.3.html">ares_library_cleanup</a>(3)</u>.

       Since  the  introduction of this function, it is absolutely mandatory to call it for any Win32/64 program
       using c-ares.

       Non-Win32/64 systems can still use c-ares version 1.7.0 without calling  <u><a href="../man3/ares_library_cleanup.3.html">ares_library_cleanup</a>(3)</u>  due  to
       the fact that <u>currently</u> it is nearly a do-nothing function on non-Win32/64 platforms.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ares_library_init.3.html">ares_library_init</a></b>(3), <b><a href="../man3/ares_cancel.3.html">ares_cancel</a></b>(3)

                                                   19 May 2009                           <u><a href="../man3/ARES_LIBRARY_CLEANUP.3.html">ARES_LIBRARY_CLEANUP</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>