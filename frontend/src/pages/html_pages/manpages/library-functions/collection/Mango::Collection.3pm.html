<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mango::Collection - MongoDB collection</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmango-perl">libmango-perl_1.30-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mango::Collection - MongoDB collection

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Mango::Collection;

         my $collection = Mango::Collection-&gt;new(db =&gt; $db);
         my $cursor     = $collection-&gt;find({foo =&gt; 'bar'});

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mango::Collection is a container for MongoDB collections used by Mango::Database.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       Mango::Collection implements the following attributes.

   <b>db</b>
         my $db      = $collection-&gt;db;
         $collection = $collection-&gt;db(Mango::Database-&gt;new);

       Mango::Database object this collection belongs to.

   <b>name</b>
         my $name    = $collection-&gt;name;
         $collection = $collection-&gt;name('bar');

       Name of this collection.

</pre><h4><b>METHODS</b></h4><pre>
       Mango::Collection inherits all methods from Mojo::Base and implements the following new ones.

   <b>aggregate</b>
         my $cursor = $collection-&gt;aggregate(
           [{'$group' =&gt; {_id =&gt; undef, total =&gt; {'$sum' =&gt; '$foo'}}}]);
         my $collection = $collection-&gt;aggregate(
           [{'$match' =&gt; {'$gt' =&gt; 23}}, {'$out' =&gt; 'some_collection'}]);
         my $doc = $collection-&gt;aggregate(
           [{'$match' =&gt; {'$gt' =&gt; 23}}], {explain =&gt; bson_true});

       Aggregate collection with aggregation framework, additional options will be passed along to the server
       verbatim. You can also append a callback to perform operation non-blocking.

         my $pipeline = [{'$group' =&gt; {_id =&gt; undef, total =&gt; {'$sum' =&gt; '$foo'}}}];
         $collection-&gt;aggregate($pipeline =&gt; sub {
           my ($collection, $err, $cursor) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>build_index_name</b>
         my $name = $collection-&gt;build_index_name(bson_doc(foo =&gt; 1, bar =&gt; -1));
         my $name = $collection-&gt;build_index_name({foo =&gt; 1});

       Build name for index specification, the order of keys matters for compound indexes.

   <b>bulk</b>
         my $bulk = $collection-&gt;bulk;

       Build Mango::Bulk object.

         my $bulk = $collection-&gt;bulk;
         $bulk-&gt;insert({foo =&gt; $_}) for 1 .. 10;
         $bulk-&gt;find({foo =&gt; 4})-&gt;update_one({'$set' =&gt; {bar =&gt; 'baz'}});
         $bulk-&gt;find({foo =&gt; 7})-&gt;remove_one;
         my $results = $bulk-&gt;execute;

   <b>create</b>
         $collection-&gt;create;
         $collection-&gt;create({capped =&gt; bson_true, max =&gt; 5, size =&gt; 10000});

       Create collection. You can also append a callback to perform operation non-blocking.

         $collection-&gt;create({capped =&gt; bson_true, max =&gt; 5, size =&gt; 10000} =&gt; sub {
           my ($collection, $err) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>drop</b>
         $collection-&gt;drop;

       Drop collection. You can also append a callback to perform operation non-blocking.

         $collection-&gt;drop(sub {
           my ($collection, $err) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>drop_index</b>
         $collection-&gt;drop_index('foo');

       Drop index. You can also append a callback to perform operation non-blocking.

         $collection-&gt;drop_index(foo =&gt; sub {
           my ($collection, $err) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>ensure_index</b>
         $collection-&gt;ensure_index(bson_doc(foo =&gt; 1, bar =&gt; -1));
         $collection-&gt;ensure_index({foo =&gt; 1});
         $collection-&gt;ensure_index({foo =&gt; 1}, {unique =&gt; bson_true});

       Make sure an index exists, the order of keys matters for compound indexes, additional options will be
       passed along to the server verbatim. You can also append a callback to perform operation non-blocking.

         $collection-&gt;ensure_index(({foo =&gt; 1}, {unique =&gt; bson_true}) =&gt; sub {
           my ($collection, $err) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>find</b>
         my $cursor = $collection-&gt;find;
         my $cursor = $collection-&gt;find({foo =&gt; 'bar'});
         my $cursor = $collection-&gt;find({foo =&gt; 'bar'}, {foo =&gt; 1});

       Build Mango::Cursor::Query object for query.

         # Exclude "_id" field from results
         my $docs = $collection-&gt;find({foo =&gt; 'bar'}, {_id =&gt; 0})-&gt;all;

   <b>find_and_modify</b>
         my $doc = $collection-&gt;find_and_modify(
           {query =&gt; {foo =&gt; 'bar'}, update =&gt; {'$set' =&gt; {foo =&gt; 'baz'}}});

       Fetch and update or remove a document atomically. You can also append a callback to perform operation
       non-blocking.

         my $opts = {query =&gt; {foo =&gt; 'bar'}, update =&gt; {'$set' =&gt; {foo =&gt; 'baz'}}};
         $collection-&gt;find_and_modify($opts =&gt; sub {
           my ($collection, $err, $doc) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

       By default this method returns the unmodified version of the document. To change this behaviour, add the
       option "new =&gt; 1".

   <b>find_one</b>
         my $doc = $collection-&gt;find_one({foo =&gt; 'bar'});
         my $doc = $collection-&gt;find_one({foo =&gt; 'bar'}, {foo =&gt; 1});
         my $doc = $collection-&gt;find_one($oid, {foo =&gt; 1});

       Find one document. You can also append a callback to perform operation non-blocking.

         $collection-&gt;find_one({foo =&gt; 'bar'} =&gt; sub {
           my ($collection, $err, $doc) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>full_name</b>
         my $name = $collection-&gt;full_name;

       Full name of this collection.

   <b>index_information</b>
         my $info = $collection-&gt;index_information;
         # return only the 5 first indexes
         my $info = $collection-&gt;index_information(cursor =&gt; { batchSize =&gt; 5 });

       Get index information for collection. You can also append a callback to perform operation non-blocking.

         $collection-&gt;index_information(sub {
           my ($collection, $err, $info) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>insert</b>
         my $oid  = $collection-&gt;insert({foo =&gt; 'bar'});
         my $oids = $collection-&gt;insert([{foo =&gt; 'bar'}, {baz =&gt; 'yada'}]);

       Insert one or more documents into collection. You can also append a callback to perform operation non-
       blocking.

         $collection-&gt;insert({foo =&gt; 'bar'} =&gt; sub {
           my ($collection, $err, $oid) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

       Note that "insert" has to ensure each document has an "_id" before sending them to MongoDB. To avoid
       modifying your data, it makes a copy of the documents. This can be a bit slow if you are sending big
       objects like pictures. To avoid that, consider using "save" instead.

   <b>map_reduce</b>
         my $collection = $collection-&gt;map_reduce($map, $reduce, {out =&gt; 'foo'});
         my $docs = $collection-&gt;map_reduce($map, $reduce, {out =&gt; {inline =&gt; 1}});
         my $docs = $collection-&gt;map_reduce(
           bson_code($map), bson_code($reduce), {out =&gt; {inline =&gt; 1}});

       Perform map/reduce operation on collection, additional options will be passed along to the server
       verbatim. You can also append a callback to perform operation non-blocking.

         $collection-&gt;map_reduce(($map, $reduce, {out =&gt; {inline =&gt; 1}}) =&gt; sub {
             my ($collection, $err, $docs) = @_;
             ...
           }
         );
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>options</b>
         my $doc = $collection-&gt;options;

       Get options for collection. You can also append a callback to perform operation non-blocking.

         $collection-&gt;options(sub {
           my ($collection, $err, $doc) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>remove</b>
         my $result = $collection-&gt;remove;
         my $result = $collection-&gt;remove($oid);
         my $result = $collection-&gt;remove({foo =&gt; 'bar'});
         my $result = $collection-&gt;remove({foo =&gt; 'bar'}, {single =&gt; 1});

       Remove documents from collection. You can also append a callback to perform operation non-blocking.
       Returns a WriteResult document.

         $collection-&gt;remove(({foo =&gt; 'bar'}, {single =&gt; 1}) =&gt; sub {
           my ($collection, $err, $doc) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

       These options are currently available:

       single
           single =&gt; 1

         Remove only one document.

   <b>rename</b>
         my $new_collection = $collection-&gt;rename('NewName');

       Rename  a  collection,  keeping all of its original contents and options. Returns a new Mango::Collection
       object pointing to the renamed collection. You can also append  a  callback  to  perform  operation  non-
       blocking.

         $collection-&gt;rename('NewName' =&gt; sub {
           my ($collection, $err, $oid) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>save</b>
         my $oid = $collection-&gt;save({foo =&gt; 'bar'});

       Save  document  to collection. The document MUST have an "_id". You can also append a callback to perform
       operation non-blocking.

         $collection-&gt;save({foo =&gt; 'bar'} =&gt; sub {
           my ($collection, $err, $oid) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>stats</b>
         my $stats = $collection-&gt;stats;

       Get collection statistics. You can also append a callback to perform operation non-blocking.

         $collection-&gt;stats(sub {
           my ($collection, $err, $stats) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>update</b>
         my $result = $collection-&gt;update($oid, {foo =&gt; 'baz'});
         my $result = $collection-&gt;update({foo =&gt; 'bar'}, {foo =&gt; 'baz'});
         my $result = $collection-&gt;update({foo =&gt; 'bar'}, {foo =&gt; 'baz'}, {multi =&gt; 1});

       Update document in collection. You can also append a callback to perform operation non-blocking.  Returns
       a WriteResult document.

         $collection-&gt;update(({foo =&gt; 'bar'}, {foo =&gt; 'baz'}, {multi =&gt; 1}) =&gt; sub {
           my ($collection, $err, $doc) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

       These options are currently available:

       multi
           multi =&gt; 1

         Update more than one document.

       upsert
           upsert =&gt; 1

         Insert document if none could be updated.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mango, Mojolicious::Guides, &lt;<a href="http://mojolicio.us">http://mojolicio.us</a>&gt;.

perl v5.30.3                                       2020-06-05                             <u>Mango::<a href="../man3pm/Collection.3pm.html">Collection</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>