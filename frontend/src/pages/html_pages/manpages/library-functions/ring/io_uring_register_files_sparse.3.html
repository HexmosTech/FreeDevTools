<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>io_uring_register_files - register file descriptors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liburing-dev">liburing-dev_2.9-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       io_uring_register_files - register file descriptors

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;liburing.h&gt;</b>

       <b>int</b> <b>io_uring_register_files(struct</b> <b>io_uring</b> <b>*</b><u>ring</u><b>,</b>
                                   <b>const</b> <b>int</b> <b>*</b><u>files</u><b>,</b>
                                   <b>unsigned</b> <u>nr_files</u><b>);</b>

       <b>int</b> <b>io_uring_register_files_tags(struct</b> <b>io_uring</b> <b>*</b><u>ring</u><b>,</b>
                                        <b>const</b> <b>int</b> <b>*</b><u>files</u><b>,</b>
                                        <b>const</b> <b>__u64</b> <b>*</b><u>tags</u><b>,</b>
                                        <b>unsigned</b> <u>nr</u><b>);</b>

       <b>int</b> <b>io_uring_register_files_sparse(struct</b> <b>io_uring</b> <b>*</b><u>ring</u><b>,</b>
                                          <b>unsigned</b> <u>nr_files</u><b>);</b>

       <b>int</b> <b>io_uring_register_files_update(struct</b> <b>io_uring</b> <b>*</b><u>ring</u><b>,</b>
                                          <b>unsigned</b> <u>off</u><b>,</b>
                                          <b>const</b> <b>int</b> <b>*</b><u>files</u><b>,</b>
                                          <b>unsigned</b> <u>nr_files</u><b>);</b>

       <b>int</b> <b>io_uring_register_files_update_tag(struct</b> <b>io_uring</b> <b>*</b><u>ring</u><b>,</b>
                                          <b>unsigned</b> <u>off</u><b>,</b>
                                          <b>const</b> <b>int</b> <b>*</b><u>files</u><b>,</b>
                                          <b>const</b> <b>__u64</b> <b>*</b><u>tags</u><b>,</b>
                                          <b>unsigned</b> <u>nr_files</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man3/io_uring_register_files.3.html">io_uring_register_files</a></b>(3)  function  registers  <u>nr_files</u>  number of file descriptors defined by the
       array <u>files</u> belonging to the <u>ring</u> for subsequent operations.

       The <b><a href="../man3/io_uring_register_files_tags.3.html">io_uring_register_files_tags</a></b>(3) function behaves the same as <b><a href="../man3/io_uring_register_files.3.html">io_uring_register_files</a></b>(3) function  but
       additionally takes <u>tags</u> parameter. See <b>IORING_REGISTER_BUFFERS2</b> for the resource tagging description.

       The  <b><a href="../man3/io_uring_register_files_sparse.3.html">io_uring_register_files_sparse</a></b>(3)  function registers an empty file table of <u>nr_files</u> number of file
       descriptors. These files must be updated  before  use,  using  eg  <b><a href="../man3/io_uring_register_files_update_tag.3.html">io_uring_register_files_update_tag</a></b>(3).
       Note   that   if   the   size   of   the   sparse   table   exceeds   what   <b>RLIMIT_NOFILE</b>  allows,  then
       <b><a href="../man3/io_uring_register_files_sparse.3.html">io_uring_register_files_sparse</a></b>(3) will attempt to raise the limit  using  <b>setrlimit</b>  <b>(2)</b>  and  retry  the
       operation.  If  the  registration  fails  after  doing  that, then an error will be returned.  The sparse
       variant is available in kernels 5.19 and later.

       Registering a file table is a prerequisite for using any request that uses direct descriptors.

       Registered files have less overhead per operation than normal files. This is due to the kernel grabbing a
       reference count on a file when an operation begins, and dropping it when it's done. When the process file
       table is shared, for example if the process has ever created any threads, then this  cost  goes  up  even
       more.  Using  registered  files  reduces  the  overhead of file reference management across requests that
       operate on a file.

       The <b><a href="../man3/io_uring_register_files_update.3.html">io_uring_register_files_update</a></b>(3) function updates existing registered files. The <u>off</u>  is  offset  on
       which to start the update <u>nr_files</u> number of files defined by the array <u>files</u> belonging to the <u>ring</u>.

       The  <b><a href="../man3/io_uring_register_files_update_tag.3.html">io_uring_register_files_update_tag</a></b>(3) function behaves the same as <b><a href="../man3/io_uring_register_files_update.3.html">io_uring_register_files_update</a></b>(3)
       function but additionally takes <u>tags</u> parameter. See <b>IORING_REGISTER_BUFFERS2</b>  for  the  resource  tagging
       description.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On         success         <b><a href="../man3/io_uring_register_files.3.html">io_uring_register_files</a></b>(3),         <b><a href="../man3/io_uring_register_files_tags.3.html">io_uring_register_files_tags</a></b>(3)        and
       <b><a href="../man3/io_uring_register_files_sparse.3.html">io_uring_register_files_sparse</a></b>(3)      return       0.        <b><a href="../man3/io_uring_register_files_update.3.html">io_uring_register_files_update</a></b>(3)       and
       <b><a href="../man3/io_uring_register_files_update_tag.3.html">io_uring_register_files_update_tag</a></b>(3) return number of files updated.  On failure they return <b>-errno</b>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/io_uring_register.2.html">io_uring_register</a></b>(2), <b><a href="../man3/io_uring_get_sqe.3.html">io_uring_get_sqe</a></b>(3), <b><a href="../man3/io_uring_unregister_files.3.html">io_uring_unregister_files</a></b>(3)

liburing-2.1                                    November 15, 2021                     <u><a href="../man3/io_uring_register_files.3.html">io_uring_register_files</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>