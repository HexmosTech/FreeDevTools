<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>io_uring_resize_rings - resize the SQ and CQ rings</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liburing-dev">liburing-dev_2.11-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       io_uring_resize_rings - resize the SQ and CQ rings

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;liburing.h&gt;</b>

       <b>int</b> <b>io_uring_resize_rings(struct</b> <b>io_uring</b> <b>*</b><u>ring</u><b>,</b>
                                 <b>struct</b> <b>io_uring_params</b> <b>*</b><u>p</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b><a href="../man3/io_uring_resize_rings.3.html">io_uring_resize_rings</a></b>(3) function performs resizes the SQ and/or CQ ring associated with <u>ring</u> by the
       parameters specified in <u>p</u> <u>.</u>

       The <u>p</u> argument must be filled in with the appropriate information for the resize operations, most notably
       the <u>sq_entries</u> and <u>cq_entries</u> fields must be filled out. The <u>flags</u> field can also be set, see  below  for
       potential values that may be used with a resize operation.

       It's  fairly  uncommon  to  need to resize the SQ ring, but not that uncommon that the CQ ring would need
       resizing. For networked workloads, it can be hard to appropriately size the CQ ring upfront, as it's  not
       always  known  what  load  a  given  ring will see. If overflow conditions are seen for the CQ ring, then
       resizing it larger may be a good idea.

       When a ring is resized, any pending SQ or CQ entries are copied along the way. It is not legal to  resize
       a CQ ring that is in an overflow condition, and attempting to do so will fail.

       Currently  doesn't  support  resizing  rings setup with <b>IORING_SETUP_NO_MMAP</b> <b>.</b>  This is purely a liburing
       limitation, the kernel does support it.

       Also note that ring resizing is currently only supported on rings setup with <b>IORING_SETUP_DEFER_TASKRUN</b> <b>.</b>
       Attempting to resize differently configured rings will result in an <b>-EINVAL</b> error.

       Valid flags in <u>flags</u>:

       <b>IORING_SETUP_CQSIZE</b>
              If this isn't set, then the CQ ring size is set based on the specified SQ ring size.  The  default
              is  twice  as  many  CQ ring entries as there are SQ ring entries. If set, then <u>cq_entries</u> will be
              used to size the CQ ring.

       <b>IORING_SETUP_CLAMP</b>
              If set, then SQ and CQ ring entries are clamped to the maximum  allowable  size,  if  they  exceed
              that. If not set, setting sizes too large will cause the operation to fail.

       Other   flags   are   inherited   from   the   way   the   ring  was  setup,  that  includes  flags  like
       <b>IORING_SETUP_NO_SQARRAY</b> <b>,</b> <b>IORING_SETUP_SQE128</b> <b>,</b> <b>IORING_SETUP_CQE32</b> <b>,</b> and <b>IORING_SETUP_NO_MMAP</b> <b>.</b>

       Other fields in <u>p</u> should be cleared to zero.

       Available since kernel 6.13.

       Also see <b><a href="../man2/io_uring_setup.2.html">io_uring_setup</a></b>(2) for a detailed description of the setup flags.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Returns 0 on success, and &lt; 0 on failure. Potential common failure cases:

       <b>-EEXIST</b>
              Attempting to resize a ring  setup  with  <b>IORING_SETUP_SINGLE_ISSUER</b>  and  the  resizing  task  is
              different from the one that created/enabled the ring.

       <b>-EFAULT</b>
              Copying of <u>p</u> was unsuccessful.

       <b>-EINVAL</b>
              Invalid flags were specified for the operation

       <b>-EINVAL</b>
              Attempt to resize a ring not setup with <b>IORING_SETUP_DEFER_TASKRUN</b>.

       <b>-EOVERFLOW</b>
              The values specified for SQ or CQ entries would cause an overflow.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/io_uring_setup.2.html">io_uring_setup</a></b>(2)

liburing-2.9                                    October 29, 2024                        <u><a href="../man3/io_uring_resize_rings.3.html">io_uring_resize_rings</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>