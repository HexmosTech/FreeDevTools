<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carp::Object - a replacement for Carp or Carp::Clan, object-oriented</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcarp-object-perl">libcarp-object-perl_1.02-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Carp::Object - a replacement for Carp or Carp::Clan, object-oriented

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Object-oriented</b> <b>API</b>
         use Carp::Object ();
         my $carper = Carp::Object-&gt;new(%options);

         # warn of error (from the perspective of caller)
         $carper-&gt;carp("this is very wrong") if some_bad_condition();

         # die of error (from the perspective of caller)
         $carper-&gt;croak("that's a dead end") if some_deadly_condition();

         # warn with full stacktrace
         $carper-&gt;cluck("this is very wrong");

         # die with full stacktrace
         $carper-&gt;confess("that's a dead end");

   <b>Functional</b> <b>API</b>
         use Carp::Object qw/:all/;            # many other import options are available, see below
         our %CARP_OBJECT_CONSTRUCTOR = (...); # optional opportunity to tune the carping behaviour
         our @CARP_NOT = (...);                # optional opportunity to exclude packages from stack traces

         # warn of error (from the perspective of caller)
         carp "this is very wrong" if some_bad_condition();

         # die of error (from the perspective of caller)
         croak "that's a dead end" if some_deadly_condition();

         # full stacktrace
         cluck "this is very wrong";
         confess "that's a dead end";

         # temporary change some parameters, like for example the "clan" of modules to ignore
         { local %CARP_OBJECT_CONSTRUCTOR = (clan =&gt; qw(^(Foo|Bar)));
            croak "wrong call to Foo-&gt;.. or to Bar-&gt;.." if $something_is_wrong; }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is an object-oriented alternative to "croak" in Carp or "croak" in Carp::Clan, for reporting errors
       in modules from the perspective of the caller instead of reporting the internal implementation line where
       the error occurs.

       Carp or Carp::Clan were designed long ago, at a time when Perl had no support yet for object-oriented
       programming; therefore they only have a functional API that is not very well suited for extensions.  The
       present module attempts to mimic the same behaviour, but with an object-oriented implementation that
       offers more tuning options, and also supports errors raised as Exception objects.

       Unlike Carp or Carp::Clan, where the presentation of stack frames is hard-coded, here it is delegated to
       Devel::StackTrace. This means that clients can also take advantage of options in Devel::StackTrace to
       tune the output -- or even replace it by another class.

       Clients can choose between the object-oriented API, presented in the next chapter, or a traditional
       functional API compatible with Carp or Carp::Clan, presented in the following chapter.

       <b>DISCLAIMER</b>: this module is very young and not battle-proofed yet.  Despite many efforts to make it behave
       as close as possible to the original Carp, there might be some edge cases where it is not strictly
       equivalent.  If you encounter such situations, please open an issue at
       &lt;https://github.com/damil/Carp-Object/issues&gt;.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
         use Carp::Object (); # '()' to avoid importing any symbols
         my $carper = Carp::Object-&gt;new(%options);

       This is the constructor for a "carper" object. Options are :

       verbose
           if true, a 'croak' method call is treated as a 'confess', and a 'carp' is treated as a 'cluck'.

       stacktrace_class
           The class to be used for inspecting stack traces. Default is Devel::StackTrace.

       clan
           A  regexp  for identifying packages that should be skipped in stack traces, like in Carp::Clan.  This
           option internally computes a "frame_filter" and therefore is  incompatible  with  the  "frame_filter"
           option.

       display_frame
           A  reference to a subroutine for computing a textual representation of a stack frame.  The default is
           _default_display_frame, which is a light wrapper on top of "as_string"  in  Devel::StackTrace::Frame,
           with improved representation of method calls.  The given subroutine will receive three arguments :

           1.  a reference to a Devel::StackTrace::Frame instance

           2.  a  boolean  flag  telling  if  this  is  the  first  stack frame in the list (because the display
               algorithm is usually different for the first stack frame).

           3.  A hashref of optional parameters. Currently there is only one option "max_arg_length",  discribed
               in "as_string(\%p)" in Devel::StackTrace.

       display_frame_param
           The optional hashref to be supplied as third parameter to the "display_frame" subroutine.

       ignore_class
           an  arrayref  of  classes  that  will  be  passed  to Devel::StackTrace; any class that belongs to or
           inherits from that list will be ignored in  stack  traces.   "Carp::Object"  will  automatically  add
           itself to the list supplied by the client.

       In  addition  to  these  options, the constructor also accepts all options to "new" in Devel::StackTrace,
       like for example "ignore_package", "skip_frames", "frame_filter", "indent", etc.

   <b>croak</b>
       Die of error, from the perspective of the caller.

   <b>carp</b>
       Warn of error, from the perspective of the caller.

   <b>confess</b>
       Die of error, with full stack backtrace.

   <b>cluck</b>
       Warn of error, with full stack backtrace.

   <b>msg</b>
         my $msg = $carper-&gt;msg($errstr, $n_frames);

       Build the message to be used for dieing or warning.  $errstr is the initial error message; it  may  be  a
       plain  string  or  an  exception  object with a stringification method.  $n_frames is the number of stack
       frames to display (usually 1); if undefined, the whole stack trace is displayed.

</pre><h4><b>FUNCTIONAL</b> <b>API:</b> <b>THE</b> <b>IMPORT()</b> <b>METHOD</b></h4><pre>
         use Carp::Object;                # no import list =&gt; defaults to (':carp');
         # or
         use Carp::Object @import_list;

       When using this functional API, subroutines equivalent to their corresponding object-oriented methods are
       exported into the caller's symbol table: the caller can then call "carp", "croak", etc.   like  with  the
       venerable Carp module.

   <b>Import</b> <b>list</b>
       The import list accepts the following items :

       "carp", "croak", "confess" and/or "cluck"
           Individual import of specific routines

       ":carp"
           Import group equivalent to the list "carp", "croak", "confess".

       ":all"
           Import group equivalent to the list "carp", "croak", "confess", "cluck".

       "\%options"
           A  hashref  within the import list is interpreted as a collection of importing options, in the spirit
           of Sub::Exporter or Exporter::Tiny. Admitted options are :

           "-as"
                 use Carp::Object carp =&gt; {-as =&gt; 'complain'}, croak =&gt; {-as =&gt; 'explode'};

               Local name for the last imported function.

           "-prefix"
                 use Carp::Object qw/carp croak/, {-prefix =&gt; 'CO_'};
                 ...
                 CO_croak "aargh";

               Names of imported functions will be prefixed by this string.

           "-suffix"
                 use Carp::Object qw/carp croak/, {-suffix =&gt; '_CO'};
                 ...
                 croak_CO "ouch";

               Names of imported functions will be suffixed by this string.

           "-constructor_args"
                 use Carp::Object qw/carp croak/, {-constructor_args =&gt; {indent =&gt; 0}};

               The given hashref will be passed to "new" in Carp::Object at each call to an imported function.

       "-reexport"
             use Carp::Object -reexport =&gt; qw/carp croak/;

           Imported symbols will be reexported into the caller of the caller !   This  is  useful  when  several
           modules  from  a same family share a common carping module.  See DBIx::DataModel::Carp for an example
           (actually, this was the initial motivation for working on "Carp::Object"().

       <u>regexp</u>
             use Carp::Object qw(^(MyClan::|FriendlyOther::));

           If the import item "looks like a regexp", it is interpreted as syntactic sugar for "use  Carp::Object
           {-constructor_args =&gt; {clan =&gt; ..}}", in order to be compatible with the API of Carp::Clan.

           The import item "looks like a regexp" if it starts with a '^' character, or contains a '|' or a '('.

   <b>Global</b> <b>variables</b>
       When  using  the  functional  API,  customization of "Carp::Object" can be done indirectly through global
       variables in the calling package.  Such variables can be localized  in  inner  blocks  if  some  specific
       behaviour is needed.

       <u>%CARP_OBJECT_CONSTRUCTOR</u>

         { local %CARP_OBJECT_CONSTRUCTOR = (indent =&gt; 0);
           confess "I'm a great sinner"; # for this call, stack frames will not be indented
         }

       The content of this hash will be passed to "new" in Carp::Object at each call to an imported function.

       <u>@CARP_NOT</u>

       The content of this array will be passed as "ignore_package" argument to to "new" in Carp::Object at each
       call to an imported function.

       <u>$Carp::Verbose</u>

       if true, a 'croak' method call is treated as a 'confess', and a 'carp' is treated as a 'cluck'.

</pre><h4><b>INTERNAL</b> <b>SUBROUTINES</b></h4><pre>
   <b>_default_display_frame</b>
       This is the internal routine for displaying a stack frame.

       It  calls  "as_string"  in  Devel::StackTrace::Frame for doing most of the work. An additional feature is
       that the presentation string is rewritten for frames  that  "look  like  a  method  call"  :  instead  of
       "Foobar::method('Foobar=...',  @other_args)",  we write "Foobar=...-&gt;method(@other_args)", so that method
       calls become apparent within the stack trace.

       A frame "looks like a method call" if the first argument to the routine is  a  string  identical  to  the
       class, or reference blessed into that class.

</pre><h4><b>AUTHOR</b></h4><pre>
       Laurent Dami, &lt;dami at cpan.org&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2024 by Laurent Dami.

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

perl v5.40.0                                       2024-10-06                                  <u>Carp::<a href="../man3pm/Object.3pm.html">Object</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>