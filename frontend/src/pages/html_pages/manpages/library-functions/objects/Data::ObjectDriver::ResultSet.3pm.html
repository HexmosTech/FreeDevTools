<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data::ObjectDriver::ResultSet - Manage a DB query</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdata-objectdriver-perl">libdata-objectdriver-perl_0.25-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Data::ObjectDriver::ResultSet - Manage a DB query

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # Get a resultset object for Object::Widget, which inherits from
           # Data::ObjectDriver::BaseObject
           my $result = Object::Widget-&gt;result($terms, $args);

           $result-&gt;add_term({color =&gt; 'blue'});

           $result-&gt;<a href="../man10/add_limit.10.html">add_limit</a>(10);
           $result-&gt;<a href="../man100/add_offset.100.html">add_offset</a>(100);

           while (my $widget = $result-&gt;next) {
               # Do stuff with $widget
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This object is returned by the 'result' method found in the Data::ObjectDriver::BaseObject class.  This
       object manages a query and the resulting data.  It allows additional search terms and arguments to be
       added and will not submit the query until a method that returns data is called.  By passing this object
       around code in multiple places can alter the query easily until the data is needed.

       Once a method returning data is called (next, count, etc) the query is submitted to the database and the
       returned data is managed by the ResultSet object like an iterator.

</pre><h4><b>METHODS</b></h4><pre>
   <b>$result_set</b> <b>=</b> <b>$class-&gt;result($terms,</b> <b>$args)</b>
       This method is actually defined in Data::ObjectDriver::BaseObject but it is the way a new ResultSet
       object is created.

       Arguments:

       <u>$terms</u> - A hashref.  Same format as the first argument to Data::ObjectDriver::DBI::search
       <u>$args</u> - A hashref.  Same format as the second argument to Data::ObjectDriver::DBI::search

       Return value:

       This method returns a Data::ObjectDriver::ResultSet object

   <b>$new_result</b> <b>=</b> <b>Data::ObjectDriver::ResultSet-&gt;iterator(\@data)</b>
       Create  a new result set object that takes existing data and operates only as an iterator, without any of
       the query management.

       Arguments:

       $data - An array ref of data elements

       Return value:

       A Data::ObjectDriver::ResultSet object

   <b>add_constraint</b>
       Apply  a  constraint  to  the  result.   The  format  of  the  two  arguments  is   the   same   as   for
       Data::ObjectDriver::DBI::search

       Arguments:

       $terms - A hashref of object fields and values constraining them.  Same as first parameter to <u>result</u>
       method.
       $args - A hashref of values that affect the returned data, such as limit and sort by.  Same as first
       parameter to <u>result</u> method.

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes : Do we fail if called after we've retrieved the result set?  Ignore it?  Requery?

       ; Example

         $res-&gt;add_constraint({object_id =&gt; $id}, {limit =&gt; 100})

   <b>add_term</b>
       Apply a single search term to the result.  Equivalent to:

         $res-&gt;add_constraint($terms)

       Arguments:

       $terms - A hashref of object fields and values constraining them

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes : Same question as for <u>add_constraint</u>

       ; Example

         $res-&gt;add_term({object_id =&gt; $id})

   <b>clear_term</b>
       Clear a single search term from the result.

       Arguments:

       @terms - An array of term names to clear

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes : <u>none</u>

       ; Example

         $res-&gt;clear_term(qw(limit offset))

   <b>add_limit</b>
       Apply a limit to the result.  Equivalent to:

         $res-&gt;add_constraint({}, {limit =&gt; $limit})

       Arguments:

       $limit - A scalar numeric value giving the limit of the number of objects returned

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes :

       ; Example

         $res-&gt;<a href="../man100/add_limit.100.html">add_limit</a>(100)

   <b>clear_limit</b>
       Clear any limit value in the result.

       Arguments:

       <u>none</u>

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes : <u>None</u>

       ; Example

         $res-&gt;clear_limit

   <b>add_offset</b>
       Add an offset for the results returned.  Result set must also have a limit set at some point.

       Arguments:

       $offset - A scalar numeric value giving the offset for the first object returned

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes : <u>none</u>

       ; Example

         $res-&gt;<a href="../man5_000/add_offset.5_000.html">add_offset</a>(5_000)

   <b>clear_offset</b>
       Clear any offset value in the result.

       Arguments:

       <u>none</u>

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes :

       ; Example

         $res-&gt;clear_offset

   <b>add_order</b>
       Add a sort order for the results returned.

       Arguments:

       [0] = $order =  <u>-</u> <u>A</u> <u>scalar</u> <u>string</u> <u>value</u> <u>giving</u> <u>the</u> <u>sort</u> <u>order</u> <u>for</u> <u>the</u> <u>results,</u> <u>one</u> <u>of</u> <u>ascend</u> <u>or</u> <u>descend</u>

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes : &gt;none''

       ; Example

         $res-&gt;add_order('ascend')

   <b>clear_order</b>
       Clear any offset value in the result.

       Arguments:

       <u>none</u>

       ; Return value : Returns <u>1</u> if successful and <u>0</u> otherwise

       ; Notes : <u>none</u>

       ; Example

         $res-&gt;clear_order

   <b>index</b>
       Return the current index into the result set.

       Arguments:

       <u>none</u>

       ; Return value : An integer giving the zero based index of the current element in the result set.

       ; Notes : <u>none</u>

       ; Example

         $idx = $res-&gt;index;

   <b>next</b>
       Retrieve the next item in the resultset

       Arguments:

       <u>none</u>

       ; Return value : The next object or undef if past the end of the result set

       ;  Notes  :  Calling  this  method  will force a DB query.  All subsequent calls to <u>curr</u> will return this
       object

       ; Example

         $obj = $res-&gt;next;

   <b>peek_next</b>
       Retrieve the next item in the resultset WITHOUT advancing the cursor.

       Arguments:

       <u>none</u>

       ; Return value : The next object or undef if past the end of the result set

       ; Notes : Calling this method will force a DB query.  All subsequent  calls  to  <u>curr</u>  will  return  this
       object

       ; Example

         while ($bottle = $res-&gt;next){

             if ($bottle-&gt;type eq 'Bud Light'
                 &amp;&amp; $res-&gt;peek_next-&gt;type eq 'Chimay'){

                 $bottle-&gt;pass; #don't spoil my palate

             }else{
                 $bottle-&gt;drink;
             }
         }

   <b>prev</b>
       Retrieve the previous item in the result set

       Arguments:

       <u>none</u>

       ; Return value : The previous object or undef if before the beginning of the result set

       ; Notes : All subsequent calls to <u>curr</u> will return this object

       ; Example

         $obj = $res-&gt;prev;

   <b>curr</b>
       Retrieve the current item in the result set.  This item is set by calls to <u>next</u> and <u>prev</u>

       Arguments:

       <u>none</u>

       ; Return value : The current object or undef if past the boundaries of the result set

       ; Notes : <u>none</u>

       ; Example

         $obj = $res-&gt;curr

   <b>slice</b>
       Return  a  slice  of the result set.  This is logically equivalent to setting a limit and offset and then
       retrieving all the objects via <u>-</u>next&gt;.  If you call <u>slice</u> and then call <u>next</u>,  you  will  get  <u>undef</u>  and
       additionally <u>is_finished</u> will be true.

       Arguments:

       $from - Scalar integer giving the start of the slice range
       $to - Scalar integer giving the end of the slice range

       ; Return value : An array of objects

       ; Notes : Objects are index from 0 just like perl arrays.

       ; Example

         my @objs = $res-&gt;slice(0, 20)

   <b>count</b>
       Get the count of the items in the result set.

       Arguments:

       <u>none</u>

       ; Return value : A scalar count of the number of items in the result set

       ;  Notes  :  This will cause a <b>count()</b> query on the database if the result set hasn't been retrieved yet.
       If the result set has been retrieved it will just return the number of objects stored in the  result  set
       object.

       ; Example

         $num = $res-&gt;count

   <b>is_finished</b>
       Returns whether we've arrived at the end of the result set

       Arguments:

       <u>none</u>

       ; Return value : Returns <u>1</u> if we are finished iterating though the result set and <u>0</u> otherwise

       ; Notes : <u>none</u>

       ; Example

         while (not $res-&gt;is_finished) {
             my $obj = $res-&gt;next;
             # Stuff ...
         }

   <b>dod_debug</b>
       Set this and you'll see $Data::ObjectDriver::DEBUG output when I go to get the results.

   <b>rewind</b>
       Move back to the start of the iterator for this instance of results of a query.

   <b>first</b>
       Returns the first object in the result set.

       Arguments:

       <u>none</u>

       ; Return value : The first object in the result set

       ; Notes : Resets the current cursor so that calls to <u>curr</u> return this value.

       ; Example

         $obj = $res-&gt;first

   <b>last</b>
       Returns the last object in the result set.

       Arguments:

       <u>none</u>

       ; Return value : The last object in the result set

       ; Notes : Resets the current cursor so that calls to <u>curr</u> return this value.

       ; Example

         $obj = $res-&gt;last

   <b>is_last</b>
       Returns 1 if the cursor is on the last row of the result set, 0 if it is not.

       Arguments:

       <u>none</u>

       ; Return value : Returns <u>1</u> if the cursor is on the last row of the result set, <u>0</u> if it is not.

       ; Example

         if ( $res-&gt;is_last ) {
            ## do some stuff
         }

perl v5.40.1                                       2025-04-19                 <u>Data::ObjectDriver::<a href="../man3pm/ResultSet.3pm.html">ResultSet</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>