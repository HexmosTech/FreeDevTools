<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KiokuDB::LiveObjects - Live object set tracking</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libkiokudb-perl">libkiokudb-perl_0.57-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       KiokuDB::LiveObjects - Live object set tracking

</pre><h4><b>VERSION</b></h4><pre>
       version 0.57

</pre><h4><b>SYNOPSIS</b></h4><pre>
           $live_objects-&gt;insert( $entry =&gt; $object );

           $live_objects-&gt;insert( $id =&gt; $object );

           my $id = $live_objects-&gt;object_to_id( $object );

           my $obj = $live_objects-&gt;id_to_object( $id );

           my $scope = $live_objects-&gt;new_scope;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This object keeps track of the set of live objects, their associated IDs, and the storage entries.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       clear_leaks
           Boolean. Defaults to false.

           If  true,  when  the last known scope is removed but some objects are still live they will be removed
           from the live object set.

           Note that this does <b>NOT</b> prevent leaks (memory cannot be reclaimed), it merely prevents stale  objects
           from staying loaded.

       leak_tracker
           This is a coderef or object.

           If  any  objects are leaked (see "clear_leaks") then the this can be used to report them, or to break
           the circular structure.

           When an object is provided the "leaked_objects" method is called. The coderef is simply invoked  with
           the objects as arguments.

           Triggered after "clear_leaks" causes "clear" to be called.

           For example, to break cycles you can use Data::Structure::Util's "circular_off" function:

               use Data::Structure::Util qw(circular_off);

               $dir-&gt;live_objects-&gt;leak_tracker(sub {
                   my @leaked_objects = @_;
                   circular_off($_) for @leaked_objects;
               });

       keep_entries
           <b>EXPERIMENTAL</b>

           When  true  (the  default),  KiokuDB::Entries loaded from the backend or created by the collapser are
           kept around.

           This results in a considerable memory overhead, so it's no longer required.

</pre><h4><b>METHODS</b></h4><pre>
       insert
           Takes pairs, id or entry as the key, and object as the value, registering the objects.

       objects_to_ids
       object_to_id
           Given objects, returns their IDs, or undef for objects which not registered.

       objects_to_entries
       object_to_entry
           Given objects, find the corresponding entries.

       ids_to_objects
       id_to_object
           Given IDs, find the corresponding objects.

       ids_to_entries
           Given IDs, find the corresponding entries.

       update_entries
           Given entries, replaces the live entries of the corresponding objects with the newly updated ones.

           The objects must already be in the live object set.

           This method is called on a successful transaction commit.

       new_scope
           Creates a new KiokuDB::LiveObjects::Scope, with the current scope as its parent.

       current_scope
           The current KiokuDB::LiveObjects::Scope instance.

           This is the scope into which newly registered objects are pushed.

       new_txn
           Creates a new KiokuDB::LiveObjects::TXNScope, with the current txn scope as its parent.

       txn_scope
           The current KiokuDB::LiveObjects::TXNScope.

       clear
           Forces a clear of the live object set.

           This removes all objects and entries, and can be useful in  the  case  of  leaks  (to  prevent  false
           positives on lookups).

           Note  that  this  does not actually break the circular structures, so the leak is unresolved, but the
           objects are no longer considered live by the KiokuDB instance.

       live_entries
       live_objects
       live_ids
           Enumerates the live entries, objects or ids.

       rollback_entries
           Called by "rollback" in KiokuDB::LiveObjects::TXNScope.

       remove
           Removes entries from the live object set.

       remove_scope $scope
           Removes a scope from the set of known scopes.

           Also calls "detach_scope", and calls "KiokuDB::LiveObjects::Scope/clear" on the scope itself.

       detach_scope $scope
           Detaches $scope if it's the current scope.

           This prevents "push" from being called on this scope object implicitly anymore.

</pre><h4><b>AUTHOR</b></h4><pre>
       Yuval Kogman &lt;<a href="mailto:nothingmuch@woobling.org">nothingmuch@woobling.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2014 by Yuval Kogman, Infinity Interactive.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.34.0                                       2022-05-23                          <u>KiokuDB::<a href="../man3pm/LiveObjects.3pm.html">LiveObjects</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>