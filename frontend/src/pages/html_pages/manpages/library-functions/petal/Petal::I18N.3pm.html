<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Petal::I18N - Attempt at implementing ZPT I18N for Petal</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpetal-perl">libpetal-perl_2.26-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Petal::I18N - Attempt at implementing ZPT I18N for Petal

</pre><h4><b>SYNOPSIS</b></h4><pre>
       in your Perl code:

         use Petal;
         use Petal::TranslationService::Gettext;

         my $translation_service = new Petal::TranslationService::Gettext (
             locale_dir  =&gt; '/path/to/my/app/locale',
             target_lang =&gt; gimme_target_lang(),
         );

         my $template = new Petal (
             file =&gt; 'example.html',
             translation_service =&gt; $translation_service
         );

         # we want to internationalize to the h4x0rz 31337 l4nGu4g3z. w00t!
         my $translation_service = Petal::TranslationService::h4x0r-&gt;new();
         my $template = new Petal (
             file =&gt; 'silly_example.xhtml',
             translation_service =&gt; $ts,
         );

         print $template-&gt;process ();

</pre><h4><b>I18N</b> <b>Howto</b></h4><pre>
   <b>Preparing</b> <b>your</b> <b>templates:</b>
       Say your un-internationalized template looks like this:

         &lt;html xmlns:tal="<a href="http://purl.org/petal/1.0/">http://purl.org/petal/1.0/</a>"&gt;
           &lt;body&gt;
             &lt;img src="/images/my_logo.png"
                  alt="the logo of our organisation" /&gt;

             &lt;p&gt;Hello,
                &lt;span petal:content="user_name"&gt;Joe&lt;/span&gt;.&lt;/p&gt;

             &lt;p&gt;How are you today?&lt;/p&gt;
           &lt;/body&gt;
         &lt;/html&gt;

       You need to markup your template according to the ZPT I18N specification, which can be found at
       <a href="http://dev.zope.org/Wikis/DevSite/Projects/ComponentArchitecture/ZPTInternationalizationSupport">http://dev.zope.org/Wikis/DevSite/Projects/ComponentArchitecture/ZPTInternationalizationSupport</a>

         &lt;html xmlns:tal="<a href="http://purl.org/petal/1.0/">http://purl.org/petal/1.0/</a>"
               xmlns:i18n="<a href="http://xml.zope.org/namespaces/i18n">http://xml.zope.org/namespaces/i18n</a>"
               i18n:domain="my_app"&gt;
           &lt;body&gt;
             &lt;img src="/images/my_logo.png"
                  alt="the logo of our organisation"
                  i18n:attributes="alt" /&gt;
             &lt;p i18n:translate=""&gt;Hello, &lt;span petal:content="user_name"&gt;Joe&lt;/span&gt;.&lt;/p&gt;
             &lt;p i18n:translate=""&gt;How are you today?&lt;/p&gt;
           &lt;/body&gt;
         &lt;/html&gt;

   <b>Extracting</b> <b>I18N</b> <b>strings:</b>
       Once your templates are marked up properly, you will need to use a tool to extract the I18N strings into
       .pot (po template) files. To my knowledge you can use i18ndude (standalone python executable),
       i18nextract.py (part of Zope 3), or I18NFool.

       I use i18ndude to find strings which are not marked up properly with i18n:translate attributes and
       I18NFool for extracting strings and managing .po files.

       Assuming you're using i18nfool:

         mkdir -p /path/to/my/app/locale
         cd /path/to/my/app/locale
         i18nfool-extract /path/to/my/template/example.html
         mkdir en
         mkdir fr
         mkdir es
         i18nfool-update

       Then you translate the .po files into their respective target languages. When that's done, you type:

         cd /path/to/my/app/locale
         i18nfool-build

       And it builds all the .mo files.

   <b>Making</b> <b>your</b> <b>application</b> <b>use</b> <b>a</b> <b>Gettext</b> <b>translation</b> <b>service:</b>
       Previously you might have had:

         use Petal;
         # lotsa code here
         my $template = Petal-&gt;new ('example.html');

       This needs to become:

         use Petal;
         use Petal::TranslationService::Gettext;
         # lotsa code here
         my $template = Petal-&gt;new ('example.html');
         $template-&gt;{translation_service} = Petal::TranslationService::Gettext-&gt;new (
             locale_dir  =&gt; '/path/to/my/app/locale',
             target_lang =&gt; gimme_language_code(),
         );

       Where <b>gimme_language_code()</b> returns a language code depending on LC_LANG, content-negotiation, config-
       file, or whatever mechanism you are using to decide which language is desired.

   <b>And</b> <b>then?</b>
       And then that's it! Your application should be easily internationalizable.  There are a few traps /
       gotchas thought, which are described below.

</pre><h4><b>BUGS,</b> <b>TRAPS,</b> <b>GOTCHAS</b> <b>and</b> <b>other</b> <b>niceties</b></h4><pre>
   <b>Translation</b> <b>Phase</b>
       The translation step takes place ONLY ONCE THE TEMPLATE HAS BEEN PROCESSED.

       So if you have:

         &lt;p i18n:translate=""&gt;Hello,
           &lt;span i18n:name="user_login" tal:replace="self/user_login"&gt;Joe&lt;/span&gt;
         &lt;/p&gt;

       It most likely will not work because the tal:replace would remove the &lt;span&gt; tag and also the i18n:name
       in the process.

       This means that instead of receiving something such as:

         Hello, ${user_login}

       The translation service would receive:

         Hello, Fred Flintstone

       Or

         Hello, Joe SixPack

       etc.

       To fix this issue, use tal:content instead of tal:replace and leave the span and its i18n:name attribute.

   <b>Character</b> <b>sets</b>
       I haven't worried too much about them (yet) so if you run into trouble join the Petal mailing list and
       we'll try to fix any issues together.

   <b>Limitations</b>
       At the moment, Petal::I18N supports the following constructs:

       xmlns:i18n="<a href="http://xml.zope.org/namespaces/i18n">http://xml.zope.org/namespaces/i18n</a>"
       i18n:translate
       i18n:domain
       i18n:name
       i18n:attribute

       It does *NOT* (well, not yet) support i18n:source, i18n:target or i18n:data.

perl v5.36.0                                       2022-11-19                                   <u>Petal::<a href="../man3pm/I18N.3pm.html">I18N</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>