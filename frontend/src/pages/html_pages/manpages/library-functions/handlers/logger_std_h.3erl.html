<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>logger_std_h - Standard handler for Logger.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       logger_std_h - Standard handler for Logger.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  is  the standard handler for Logger. Multiple instances of this handler can be added to Logger, and
       each instance prints logs to <u>standard_io</u>, <u>standard_error</u>, or to file.

       The handler has an  overload  protection  mechanism  that  keeps  the  handler  process  and  the  Kernel
       application  alive  during  high loads of log events. How overload protection works, and how to configure
       it, is described in the <u>User's</u> <u>Guide</u>.

       To add a new instance of the  standard  handler,  use  <u>logger:add_handler/3</u>.  The  handler  configuration
       argument  is a map which can contain general configuration parameters, as documented in the <u>User's</u> <u>Guide</u>,
       and handler specific parameters. The specific data is stored in a sub map with the key  <u>config</u>,  and  can
       contain the following parameters:

         <u>type</u> <u>=</u> <u>standard_io</u> <u>|</u> <u>standard_error</u> <u>|</u> <u>file</u> <u>|</u> <u>{device,</u> <u>io:device()}</u>:
           Specifies the log destination.

           The value is set when the handler is added, and it cannot be changed in runtime.

           Defaults to <u>standard_io</u>, unless parameter <u>file</u> is given, in which case it defaults to <u>file</u>.

         <u>file</u> <u>=</u> <u>file:filename()</u>:
           This specifies the name of the log file when the handler is of type <u>file</u>.

           The value is set when the handler is added, and it cannot be changed in runtime.

           Defaults to the same name as the handler identity, in the current directory.

         <u>modes</u> <u>=</u> <u>[file:mode()]</u>:
           This  specifies  the  file  modes to use when opening the log file, see <u>file:open/2</u>. If <u>modes</u> are not
           specified, the default list used is <u>[raw,append,delayed_write]</u>. If  <u>modes</u>  are  specified,  the  list
           replaces the default modes list with the following adjustments:

           *
              If <u>raw</u> is not found in the list, it is added.

           *
              If none of <u>write</u>, <u>append</u> or <u>exclusive</u> is found in the list, <u>append</u> is added.

           * If  none  of  <u>delayed_write</u>  or  <u>{delayed_write,Size,Delay}</u>  is found in the list, <u>delayed_write</u> is
             added.

           Log  files  are  always  UTF-8  encoded.  The  encoding  cannot  be  changed  by  setting  the   mode
           <u>{encoding,Encoding}</u>.

           The value is set when the handler is added, and it cannot be changed in runtime.

           Defaults to <u>[raw,append,delayed_write]</u>.

         <u>max_no_bytes</u> <u>=</u> <u>pos_integer()</u> <u>|</u> <u>infinity</u>:
           This  parameter  specifies if the log file should be rotated or not. The value <u>infinity</u> means the log
           file will grow indefinitely, while an integer value specifies at which file size (bytes) the file  is
           rotated.

           Defaults to <u>infinity</u>.

         <u>max_no_files</u> <u>=</u> <u>non_neg_integer()</u>:
           This  parameter  specifies  the number of rotated log file archives to keep. This has meaning only if
           <u>max_no_bytes</u> is set to an integer value.

           The log archives are named <u>FileName.0</u>, <u>FileName.1</u>, ... <u>FileName.N</u>, where <u>FileName</u> is the name of  the
           current  log  file. <u>FileName.0</u> is the newest of the archives. The maximum value for <u>N</u> is the value of
           <u>max_no_files</u> minus 1.

           Notice that setting this value to <u>0</u> does not turn off rotation. It only specifies  that  no  archives
           are kept.

           Defaults to <u>0</u>.

         <u>compress_on_rotate</u> <u>=</u> <u>boolean()</u>:
           This parameter specifies if the rotated log file archives shall be compressed or not. If set to <u>true</u>,
           all archives are compressed with <u>gzip</u>, and renamed to <u>FileName.N.gz</u>

           <u>compress_on_rotate</u> has no meaning if <u>max_no_bytes</u> has the value <u>infinity</u>.

           Defaults to <u>false</u>.

         <u>file_check</u> <u>=</u> <u>non_neg_integer()</u>:
           When  <u>logger_std_h</u>  logs to a file, it reads the file information of the log file prior to each write
           operation. This is to make sure the file still exists and has the same inode as when it  was  opened.
           This implies some performance loss, but ensures that no log events are lost in the case when the file
           has been removed or renamed by an external actor.

           In  order to allow minimizing the performance loss, the <u>file_check</u> parameter can be set to a positive
           integer value, <u>N</u>. The handler will then skip reading the file information prior to writing,  as  long
           as no more than <u>N</u> milliseconds have passed since it was last read.

           Notice that the risk of loosing log events grows when the <u>file_check</u> value grows.

           Defaults to 0.

         <u>filesync_repeat_interval</u> <u>=</u> <u>pos_integer()</u> <u>|</u> <u>no_repeat</u>:
           This  value,  in  milliseconds,  specifies  how often the handler does a file sync operation to write
           buffered data to disk. The handler attempts the operation repeatedly, but only performs a new sync if
           something has actually been logged.

           If <u>no_repeat</u> is set as value, the repeated file sync operation is disabled, and it is  the  operating
           system  settings that determine how quickly or slowly data is written to disk. The user can also call
           the <u>filesync/1</u> function to perform a file sync.

           Defaults to <u>5000</u> milliseconds.

       Other configuration parameters exist, to be used for customizing the overload protection  behaviour.  The
       same parameters are used both in the standard handler and the disk_log handler, and are documented in the
       <u>User's</u> <u>Guide</u>.

       Notice  that if changing the configuration of the handler in runtime, the <u>type</u>, <u>file</u>, or <u>modes</u> parameters
       must not be modified.

       Example of adding a standard handler:

       logger:add_handler(my_standard_h, logger_std_h,
                          #{config =&gt; #{file =&gt; "./system_info.log",
                                        filesync_repeat_interval =&gt; 1000}}).

       To set the default handler, that starts initially with the Kernel application, to log to file instead  of
       <u>standard_io</u>, change the Kernel default logger configuration. Example:

       erl -kernel logger '[{handler,default,logger_std_h,
                             #{config =&gt; #{file =&gt; "./log.log"}}}]'

       An  example  of  how  to  replace the standard handler with a disk_log handler at startup is found in the
       <u>logger_disk_log_h</u> manual.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>filesync(Name)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 Name = atom()
                 Reason = handler_busy | {badarg, term()}

              Write buffered data to disk.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3erl/logger.3erl.html">logger</a>(3erl)</u>, <u><a href="../man3erl/logger_disk_log_h.3erl.html">logger_disk_log_h</a>(3erl)</u>

Ericsson AB                                        kernel 8.2                                 <u><a href="../man3erl/logger_std_h.3erl.html">logger_std_h</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>