<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>logger_disk_log_h - A disk_log based handler for Logger</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       logger_disk_log_h - A disk_log based handler for Logger

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is a handler for Logger that offers circular (wrapped) logs by using <u>disk_log</u>. Multiple instances of
       this  handler can be added to Logger, and each instance prints to its own disk log file, created with the
       name and settings specified in the handler configuration.

       The default standard handler, <u>logger_std_h</u>, can be replaced by a  disk_log  handler  at  startup  of  the
       Kernel application. See an example of this below.

       The  handler  has  an  overload  protection  mechanism  that  keeps  the  handler  process and the Kernel
       application alive during high loads of log events. How overload protection works, and  how  to  configure
       it, is described in the <u>User's</u> <u>Guide</u>.

       To  add  a  new  instance  of  the  disk_log handler, use <u>logger:add_handler/3</u>. The handler configuration
       argument is a map which can contain general configuration parameters, as documented in the <u>User's</u>  <u>Guide</u>,
       and  handler  specific  parameters. The specific data is stored in a sub map with the key <u>config</u>, and can
       contain the following parameters:

         <u>file</u>:
           This is the full name of the disk log file. The option  corresponds  to  the  <u>name</u>  property  in  the
           <u>dlog_option()</u> datatype.

           The value is set when the handler is added, and it cannot be changed in runtime.

           Defaults to the same name as the handler identity, in the current directory.

         <u>type</u>:
           This  is  the  disk  log  type,  <u>wrap</u>  or  <u>halt</u>.  The  option corresponds to the <u>type</u> property in the
           <u>dlog_option()</u> datatype.

           The value is set when the handler is added, and it cannot be changed in runtime.

           Defaults to <u>wrap</u>.

         <u>max_no_files</u>:
           This is the maximum number of  files  that  disk_log  uses  for  its  circular  logging.  The  option
           corresponds to the <u>MaxNoFiles</u> element in the <u>size</u> property in the <u>dlog_option()</u> datatype.

           The value is set when the handler is added, and it cannot be changed in runtime.

           Defaults to <u>10</u>.

           The setting has no effect on a halt log.

         <u>max_no_bytes</u>:
           This  is  the maximum number of bytes that is written to a log file before disk_log proceeds with the
           next file in order, or generates an error in case of a full halt log. The option corresponds  to  the
           <u>MaxNoBytes</u> element in the <u>size</u> property in the <u>dlog_option()</u> datatype.

           The value is set when the handler is added, and it cannot be changed in runtime.

           Defaults to <u>1048576</u> bytes for a wrap log, and <u>infinity</u> for a halt log.

         <u>filesync_repeat_interval</u>:
           This  value, in milliseconds, specifies how often the handler does a disk_log sync operation to write
           buffered data to disk. The handler attempts the operation repeatedly, but only performs a new sync if
           something has actually been logged.

           Defaults to <u>5000</u> milliseconds.

           If <u>no_repeat</u> is set as value, the repeated sync operation is disabled. The user  can  also  call  the
           <u>filesync/1</u> function to perform a disk_log sync.

       Other  configuration  parameters exist, to be used for customizing the overload protection behaviour. The
       same parameters are used both in the standard handler and the disk_log handler, and are documented in the
       <u>User's</u> <u>Guide</u>.

       Notice that when changing the configuration of the handler in runtime, the disk_log options (<u>file</u>,  <u>type</u>,
       <u>max_no_files</u>, <u>max_no_bytes</u>) must not be modified.

       Example of adding a disk_log handler:

       logger:add_handler(my_disk_log_h, logger_disk_log_h,
                          #{config =&gt; #{file =&gt; "./my_disk_log",
                                        type =&gt; wrap,
                                        max_no_files =&gt; 4,
                                        max_no_bytes =&gt; 10000,
                                        filesync_repeat_interval =&gt; 1000}}).

       To  use the disk_log handler instead of the default standard handler when starting an Erlang node, change
       the Kernel default logger to use <u>logger_disk_log_h</u>. Example:

       erl -kernel logger '[{handler,default,logger_disk_log_h,
                             #{config =&gt; #{file =&gt; "./system_disk_log"}}}]'

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>filesync(Name)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>{error,</b> <b>Reason}</b>

              Types:

                 Name = atom()
                 Reason = handler_busy | {badarg, term()}

              Write buffered data to disk.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3erl/logger.3erl.html">logger</a>(3erl)</u>, <u><a href="../man3erl/logger_std_h.3erl.html">logger_std_h</a>(3erl)</u>, <u><a href="../man3erl/disk_log.3erl.html">disk_log</a>(3erl)</u>

Ericsson AB                                        kernel 8.2                            <u><a href="../man3erl/logger_disk_log_h.3erl.html">logger_disk_log_h</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>