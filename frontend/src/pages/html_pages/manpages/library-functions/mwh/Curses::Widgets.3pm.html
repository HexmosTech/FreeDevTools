<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curses::Widgets - Base widget class for use with the Curses::Application framework</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurses-widgets-perl">libcurses-widgets-perl_1.997-8_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Curses::Widgets - Base widget class for use with the Curses::Application framework

</pre><h4><b>MODULE</b> <b>VERSION</b></h4><pre>
       $Id: Widgets.pm,v 1.997 2002/11/14 01:30:19 corliss Exp corliss $

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Curses::Widgets;

         $rv = test_colour();
         test_color();

         $colpr = select_colour($fore, $back);
         $colpr = select_color($fore, $back);

         $key = scankey($mwh);

         @lines = textwrap($text, 40);

         # The following are provided for use with descendent
         # classes, and while they are not expected to be
         # overridden, they can be.
         $obj = Curses::Widgets-&gt;new({KEY =&gt; 'value'});
         $obj-&gt;_copy($href1, $href2);
         $obj-&gt;reset;
         $obj-&gt;input($string);
         $value = $obj-&gt;getField('VALUE');
         $obj-&gt;setField(
           'FIELD1'  =&gt; 1,
           'FIELD2'  =&gt; 'value'
           );
         $obj-&gt;execute($mwh);
         $obj-&gt;draw($mwh, 1);
         @geom = $obj-&gt;_geometry;
         @geom = $obj-&gt;_cgeometry;
         $dwh = $obj-&gt;_canvas($mwh, @geom);
         $obj-&gt;_save($mwh);
         $obj-&gt;_restore($mwh);
         $obj-&gt;_border($mwh);
         $obj-&gt;_caption

         # The following are provided for use with descendent
         # classes, and are expected to be overridden.
         $obj-&gt;_conf(%conf);
         $obj-&gt;input_key($ch);
         $obj-&gt;_content($mwh);
         $obj-&gt;_cursor

</pre><h4><b>REQUIREMENTS</b></h4><pre>
       Curses

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  module  serves  two  purposes:   to  provide  a  framework  for creating custom widget classes, and
       importing a few useful functions for global use.

       Widget specific methods are documented in each Widget's pod, of which the following widgets are currently
       available:

       Button Set (Curses::Widgets::ButtonSet)
       Calendar (Curses::Widgets::Calendar)
       Combo-Box (Curses::Widgets::ComboBox)
       Label (Curses::Widgets::Label)
       List Box (Curses::Widgets::ListBox)
       Multicolumn List Box (Curses::Widgets::ListBox::MultiColumn)
       Menu (Curses::Widgets::Menu)
       Progress Bar (Curses::Widgets::ProgressBar)
       Text Field (Curses::Widgets::TextField)
       Text Memo (Curses::Widgets::TextMemo)

       The following tutorials are available:

       Widget Usage -- General Usage &amp; Tips (Curses::Widgets::Tutorial)
       Widget Creation (Curses::Widgets::Tutorial::Creation)
       Widget Creation -- ComboBox Example (Curses::Widgets::Tutorial::ComboBox)

       For even higher (and  simpler)  level  control  over  collections  of  widgets  on  "forms",  please  see
       <b>Curses::Forms</b>, which uses this module as well.

</pre><h4><b>EXPORTED</b> <b>FUNCTIONS</b></h4><pre>
   <b>test_colour/test_color</b>
         $rv = test_colour();
         test_color();

       This   function   tests   the   console   for   colour   capability,   and   if   found,   it   will  set
       <b>$Curses::Widgets::DEFAULTFG</b> and <b>$Curses::Widgets::DEFAULTBG</b> to  the  default  foreground  and  background
       colour, respectively.

       It  also calls the Curses <b>start_color</b> for you.  Unless you need to know the default foreground/background
       colours ahead of time, you won't need to call this, <b>select_colour</b> will do it for you the first time  it's
       called, if necessary.

       This function returns a true or false, designating colour support.

   <b>select_colour/select_color</b>
         $colpr = select_colour($fore, $back);
         $colpr = select_color($fore, $back);

       This function returns the number of the specified colour pair.  In doing so, it saves quite a few steps.

       After  the initial colour test, this function will safely (and quietly) return on all subsequent calls if
       no colour support is found.  It returns '0', which is hardwired to  your  terminal  default.   If  colour
       support  is  present,  it  allocates the colour pair using (n)curses <b>init_pair</b> for you, if it hasn't been
       done already.

       Most terminals have a limited number of colour pairs that  can  be  defined.   Because  of  this  0  (the
       terminal  default  colour pair) will be returned in lieu of attempting to allocate more colour pairs than
       the terminal supports.  If you need a specific set of colours to be available, you  might  want  allocate
       each  pair  ahead  of  time  using  this function to prevent less important pairs from running you out of
       pairs.

       As a final note, yes, both the British and American spellings of 'colo(u)r' are supported.

       Known colours:

         black           cyan
         green           magenta
         red             white
         yellow          blue

       The colours are not case sensitive.

   <b>scankey</b>
         $key = scankey($mwh);

       The scankey function returns the key pressed, when it does.  All it does is loop over a  (n)curses  <b>getch</b>
       call  until  something  other  than  -1 is returned.  Whether or not the <b>getch</b> call is (half)-blocking or
       cooked output is determined by how the (n)curses environment was initialised by your  application.   This
       is provided only to provide the most basic input functionality to your application, should you decide not
       to implement your own.

       The only argument is a handle to a curses/window object.

   <b>textwrap</b>
         @lines = textwrap($text, 40);

       The  textwrap  function  takes  a  string  and  splits  according  to  the passed column limit, splitting
       preferrably along whitespace.  Newlines are preserved.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
         $obj = Curses::Widgets-&gt;new({KEY =&gt; 'value'});

       The new class method provides a basic constructor for all  descendent  widget  classes.   Internally,  it
       assumes  any  configuration information to be passed in a hash ref as the sole argument.  It dereferences
       that  ref  and  passes  it  to  the  internal  method  <b>_conf</b>,  which  is  expected  to   do   any   input
       validation/initialisation  required  by  your  widget.   That  method  should return a 1 or 0, which will
       determine if <b>new</b> returns a handle to the new object.

       If <b>_conf</b> returns a 1, the <b>_copy</b> is called to back up the initial state information.

       If descendent widgets use the methods provided in  the  class  (instead  of  overriding  them)  then  the
       following keys should always be recognised:

         Key             Description
         ====================================================
         FOREGROUND      Foreground colour
         BACKGROUND      Background colour
         BORDERCOL       Border (foreground) colour
         CAPTIONCOL      Caption (foreground) colour
         BORDER          Whether or not to display a border
         CAPTION         The string to use as the caption

       The  colours  will  default  to  the  terminal  foreground/background defaults.  Other arguments may have
       defaults defined by the descendent classes.

   <b>_conf</b>
         $obj-&gt;_conf(%conf);

       This method should be overridden in your  descendant  class.   As  mentioned  above,  it  should  do  any
       initialisation  and validation required, based on the passed configuration hash.  It should return a 1 or
       0, depending on whether any critical errors were encountered during instantiation.

       <b>Note:</b>  your <b>_conf</b> method should call, as a last act, <b>SUPER::_conf</b>.  This is important to do,  since  this
       method  takes  care  of  some  colour initialisation steps for you automatically.  The following keys are
       known by this module, and are used by certain rendering and initiation methods:

         Field              Default      Description
         ============================================================
         FOREGROUND   (terminal default) Default foreground colour
         BACKGROUND   (terminal default) Default background colour
         BORDERCOL       (FOREGROUND)    Default border colour
         CAPTIONCOL      (FOREGROUND)    Default caption colour

       As a final note, here are some rules regarding the structure of your configuration hash.  You *must* save
       your state information in this  hash.   Another  subroutine  will  copy  that  information  after  object
       instantiation  in  order  to  support  the reset method.  Also note that everything stored in this should
       *not* be more than one additional level deep (in other words, values can be hash or array refs, but  none
       of  the  values in *that* structure should be refs), otherwise those refs will be copied over, instead of
       the data inside the structure.  This essentially destroys your backup.

       If you have special requirements, override the _copy method as well.

   <b>_copy</b>
         $obj-&gt;_copy($href1, $href2);

       This method copies the contents of $href1 to $href2.  This will only copy two  levels  of  data,  so  any
       reference  values  deeper  than  that  will  be  passed  by  reference,  not  as  a  copy  of reference's
       (dereferenced) value.

   <b>reset</b>
         $obj-&gt;reset;

       The reset method resets the object back to the original  state  by  copying  the  original  configuration
       information into the working hash.

   <b>input_key</b>
         $obj-&gt;input_key($ch);

       The input_key method should be overridden in all descendent classes.  This method should accept character
       input  and  update  it's  internal  state  information  appropriately.   This method will be used in both
       interactive and non-interactive modes to send keystrokes to the widget.

   <b>input</b>
         $obj-&gt;input($string);

       The input method provides a non-interactive method for sending input to the widget.  This is  essentially
       just  a  wrapper  for  the  <b>input_key</b> method, but will accept any number of string arguments at once.  It
       splits all of the input into separate characters for feeding to the <b>input_key</b> method.

   <b>execute</b>
         $obj-&gt;execute($mwh);

       This method puts the widget into interactive mode, which consists of calling the  <b>draw</b>  method,  scanning
       for keyboard input, feeding it to the <b>input_key</b> method, and redrawing.

       execute  uses the widget's configuration information to allow easy modification of its behavoiur.  First,
       it checks for the existance of a INPUTFUNC key.  Setting its value to a subroutine reference  allows  you
       to  substitute  any  custom keyboard scanning/polling routine in leiu of the default  <b>scankey</b> provided by
       this module.

       Second, it checks the return value of the  input  function  against  the  regular  expression  stored  in
       FOCUSSWITCH,  if  any.   Any matches against that expression will tell this method to exit, returning the
       key that matches it.  This effectively causes the widget to 'lose focus'.

       The only argument is a handle to a valid curses window object.

       <b>NOTE</b>:  If \t is in your regex, KEY_STAB will also be a trigger for a focus switch.

   <b>getField</b>
         $value = $obj-&gt;getField('VALUE');

       The getField method retrieves the value(s) for every field requested that  exists  in  the  configuration
       hash.

   <b>setField</b>
         $obj-&gt;setField(
           'FIELD1'  =&gt; 1,
           'FIELD2'  =&gt; 'value'
           );

       The setField method sets the value for every key/value pair passed.

   <b>draw</b>
         $obj-&gt;draw($mwh, 1);

       The  draw  method  can be overridden in each descendant class.  It is reponsible for the rendering of the
       widget, and only that.  The first argument is mandatory, being a valid window handle with which to create
       the widget's derived window.  The second is optional, but if set to true, will tell the  widget  to  draw
       itself  in  an  'active'  state.   For  instance, the TextField widget will also render a cursor, while a
       ButtonSet widget will render the selected button in standout mode.

       The rendering sequence defined in this class is as follows:

         # Get the canvas geometry and create a window handle to it
         $dwh = $self-&gt;_canvas($mwh, $self-&gt;_geometry);
         return 0 unless $dwh;

         $self-&gt;_init($dwh);
         $self-&gt;_border($dwh);
         $self-&gt;_caption($dwh);

         # Get the content area geometry and create a window handle to it
         $cwh = $self-&gt;_canvas($dwh, $self-&gt;_cgeometry);
         unless (defined $cwh) {
           $dwh-&gt;delwin;
           return 0;
         }

         $self-&gt;_content($cwh);
         $self-&gt;_cursor($cwh) if $active;

   <b>_geometry</b>
         @geom = $obj-&gt;_geometry;

       This method returns the size of the canvas, with dimensions adjusted to account for a  border  (based  on
       the value of <b>BORDER</b> in the configuration hash).

   <b>_cgeometry</b>
         @geom = $obj-&gt;_cgeometry;

       This method returns the size of the content area.  The Y and X coordinates are adjusted appropriately for
       rendering  in a widget canvas.  (0, 0) is returned for widgets with no border, and (1, 1) is returned for
       widgets with a border (based on the value of <b>BORDER</b> in the configuration hash).

   <b>_canvas</b>
         $dwh = $obj-&gt;_canvas($mwh, @geom);

       This method returns a window handle to a derived  window  in  the  passed  window,  using  the  specified
       geometry.  This will return undef and produce a warning if the call fails for any reason.

   <b>_init</b>
         $obj-&gt;_init($mwh);

       This  method  erases  the window and sets the foreground/background colours as found in the configuration
       hash.

   <b>_save</b>
         $obj-&gt;_save($mwh);

       This method saves the current attributes and colour  pair  in  the  passed  window.   This  method  would
       typically  be  called by the draw routine after _init is called on the derived window (though the current
       _init method calls this for you).

   <b>_restore</b>
         $obj-&gt;_restore($mwh);

       This method restores the last saved attributes and colour pair used in the window.  This should be called
       at the end of any rendering phase that may alter the default colour and attribute settings.

   <b>_border</b>
         $obj-&gt;_border($mwh);

       This method draws the border around the passed window if <b>BORDER</b> is true within the configuration hash.

   <b>_caption</b>
         $obj-&gt;_caption

       This method draws a caption on the first line of the passed window  if  <b>CAPTION</b>  is  defined  within  the
       configuration hash.

   <b>_content</b>
         $obj-&gt;_content($mwh);

       This  method  should be overridden in all descendent classes, and should render any content in the passed
       window.  The <b>draw</b> method, as defined in this class, will pass a window the  exact  size  of  the  content
       area, so no adjustments will need to be made to accommodate a border.

   <b>_cursor</b>
         $obj-&gt;_cursor

       This  method  should  be  overridden in all descendent classes that display a cursor in the content area.
       The <b>draw</b> method, as defined in this class, calls this method after the content is rendered, and passes it
       a window handle the exact size of the content area.

</pre><h4><b>HISTORY</b></h4><pre>
       2001/07/05 -- First implementation of the base class.

</pre><h4><b>AUTHOR/COPYRIGHT</b></h4><pre>
       (c) 2001 Arthur Corliss (<a href="mailto:corliss@digitalmages.com">corliss@digitalmages.com</a>)

perl v5.34.0                                       2022-06-12                                       <u><a href="../man3pm/Widgets.3pm.html">Widgets</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>