<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fields - compile-time class fields</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/perl-doc">perl-doc_5.40.1-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       fields - compile-time class fields

</pre><h4><b>SYNOPSIS</b></h4><pre>
           {
               package Foo;
               use fields qw(foo bar _Foo_private);
               sub new {
                   my Foo $self = shift;
                   unless (ref $self) {
                       $self = fields::new($self);
                       $self-&gt;{_Foo_private} = "this is Foo's secret";
                   }
                   $self-&gt;{foo} = 10;
                   $self-&gt;{bar} = 20;
                   return $self;
               }
           }

           my $var = Foo-&gt;new;
           $var-&gt;{foo} = 42;

           # this will generate a run-time error
           $var-&gt;{zap} = 42;

           # this will generate a compile-time error
           my Foo $foo = Foo-&gt;new;
           $foo-&gt;{zap} = 24;

           # subclassing
           {
               package Bar;
               use base 'Foo';
               use fields qw(baz _Bar_private);        # not shared with Foo
               sub new {
                   my $class = shift;
                   my $self = fields::new($class);
                   $self-&gt;SUPER::new();                # init base fields
                   $self-&gt;{baz} = 10;                  # init own fields
                   $self-&gt;{_Bar_private} = "this is Bar's secret";
                   return $self;
               }
           }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The "fields" pragma enables compile-time and run-time verified class fields.

       NOTE: The current implementation keeps the declared fields in the %FIELDS hash of the calling package,
       but this may change in future versions.  Do <b>not</b> update the %FIELDS hash directly, because it must be
       created at compile-time for it to be fully useful, as is done by this pragma.

       If a typed lexical variable (my Class $var) holding a reference is used to access a hash element and a
       package with the same name as the type has declared class fields using this pragma, then the hash key is
       verified at compile time.  If the variables are not typed, access is only checked at run time.

       The related "base" pragma will combine fields from base classes and any fields declared using the
       "fields" pragma.  This enables field inheritance to work properly.  Inherited fields can be overridden
       but will generate a warning if warnings are enabled.

       <b>Only</b> <b>valid</b> <b>for</b> <b>Perl</b> <b>5.8.x</b> <b>and</b> <b>earlier:</b> Field names that start with an underscore character are made
       private to the class and are not visible to subclasses.

       Also, <b>in</b> <b>Perl</b> <b>5.8.x</b> <b>and</b> <b>earlier</b>, this pragma uses pseudo-hashes, the effect being that you can have
       objects with named fields which are as compact and as fast arrays to access, as long as the objects are
       accessed through properly typed variables.

       The following functions are supported:

       new <b>fields::new()</b>  creates  and  blesses a hash of the fields declared using the "fields" pragma into the
           specified class.  It is the recommended way to construct a fields-based object.

           This makes it possible to write a constructor like this:

               package Critter::Sounds;
               use fields qw(cat dog bird);

               sub new {
                   my $self = shift;
                   $self = fields::new($self) unless ref $self;
                   $self-&gt;{cat} = 'meow';                      # scalar element
                   @$self{'dog','bird'} = ('bark','tweet');    # slice
                   return $self;
               }

       phash
           <b>This</b> <b>function</b> <b>only</b> <b>works</b> <b>in</b> <b>Perl</b> <b>5.8.x</b> <b>and</b> <b>earlier.</b>  Pseudo-hashes were removed from Perl as of 5.10.
           Consider using restricted hashes or <b>fields::new()</b> instead (which itself uses restricted hashes  under
           5.10+).  See Hash::Util.  Using <b>fields::phash()</b> under 5.10 or higher will cause an error.

           <b>fields::phash()</b>  can be used to create and initialize a plain (unblessed) pseudo-hash.  This function
           should always be used instead of creating pseudo-hashes directly.

           If the first argument is a reference to an array, the pseudo-hash will be created with keys from that
           array.  If a second argument is supplied, it must also be a reference to an array whose elements will
           be used as the values.  If the second array contains less  elements  than  the  first,  the  trailing
           elements  of the pseudo-hash will not be initialized.  This makes it particularly useful for creating
           a pseudo-hash from subroutine arguments:

               sub dogtag {
                  my $tag = fields::phash([qw(name rank ser_num)], [@_]);
               }

           <b>fields::phash()</b> also accepts a list of key-value pairs that will be  used  to  construct  the  pseudo
           hash.  Examples:

               my $tag = fields::phash(name =&gt; "Joe",
                                       rank =&gt; "captain",
                                       ser_num =&gt; 42);

               my $pseudohash = fields::phash(%args);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       base, Hash::Util

perl v5.40.1                                       2025-07-03                                      <u><a href="../man3perl/fields.3perl.html">fields</a></u>(3perl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>