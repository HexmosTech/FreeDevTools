<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_journal_enumerate_fields, sd_journal_restart_fields, SD_JOURNAL_FOREACH_FIELD - Read used field names</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_journal_enumerate_fields, sd_journal_restart_fields, SD_JOURNAL_FOREACH_FIELD - Read used field names
       from the journal

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-journal.h&gt;</b>

       <b>int</b> <b>sd_journal_enumerate_fields(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>const</b> <b>char</b> <b>**</b><u>field</u><b>);</b>

       <b>void</b> <b>sd_journal_restart_fields(sd_journal</b> <b>*</b><u>j</u><b>);</b>

       <b>SD_JOURNAL_FOREACH_FIELD(sd_journal</b> <b>*</b><u>j</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>field</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_journal_enumerate_fields()</b> may be used to iterate through all field names used in the opened journal
       files. On each invocation the next field name is returned. The order of the returned field names is not
       defined. It takes two arguments: the journal context object, plus a pointer to a constant string pointer
       where the field name is stored in. The returned data is in a read-only memory map and is only valid until
       the next invocation of <b>sd_journal_enumerate_fields()</b>. Note that this call is subject to the data field
       size threshold as controlled by <b>sd_journal_set_data_threshold()</b>.

       <b>sd_journal_restart_fields()</b> resets the field name enumeration index to the beginning of the list. The
       next invocation of <b>sd_journal_enumerate_fields()</b> will return the first field name again.

       The <b>SD_JOURNAL_FOREACH_FIELD()</b> macro may be used as a handy wrapper around <b>sd_journal_restart_fields()</b>
       and <b>sd_journal_enumerate_fields()</b>.

       These functions currently are not influenced by matches set with <b>sd_journal_add_match()</b> but this might
       change in a later version of this software.

       To retrieve the possible values a specific field can take use <b><a href="../man3/sd_journal_query_unique.3.html">sd_journal_query_unique</a></b>(3).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>sd_journal_enumerate_fields()</b> returns a positive integer if the next field name has been read, 0 when no
       more field names are known, or a negative errno-style error code.  <b>sd_journal_restart_fields()</b> returns
       nothing.

</pre><h4><b>NOTES</b></h4><pre>
       All functions listed here are thread-agnostic and only a single specific thread may operate on a given
       object during its entire lifetime. It is safe to allocate multiple independent objects and use each from
       a specific thread in parallel. However, it is not safe to allocate such an object in one thread, and
       operate or free it from any other, even if locking is used to ensure these threads do not operate on it
       at the very same time.

       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Use the <b>SD_JOURNAL_FOREACH_FIELD()</b> macro to iterate through all field names in use in the current
       journal.

           /* SPDX-License-Identifier: MIT-0 */

           #include &lt;<a href="file:/usr/include/errno.h">errno.h</a>&gt;
           #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
           #include &lt;systemd/sd-journal.h&gt;

           int main(int argc, char *argv[]) {
             sd_journal *j;
             const char *field;
             int r;

             r = sd_journal_open(&amp;j, SD_JOURNAL_LOCAL_ONLY);
             if (r &lt; 0) {
               fprintf(stderr, "Failed to open journal: %s\n", strerror(-r));
               return 1;
             }
             SD_JOURNAL_FOREACH_FIELD(j, field)
               printf("%s\n", field);
             sd_journal_close(j);
             return 0;
           }

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_journal_enumerate_fields()</b>, <b>sd_journal_restart_fields()</b>, and <b>SD_JOURNAL_FOREACH_FIELD()</b> were added in
       version 229.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man7/systemd.journal-fields.7.html">systemd.journal-fields</a></b>(7), <b><a href="../man3/sd-journal.3.html">sd-journal</a></b>(3), <b><a href="../man3/sd_journal_open.3.html">sd_journal_open</a></b>(3), <b><a href="../man3/sd_journal_query_unique.3.html">sd_journal_query_unique</a></b>(3),
       <b><a href="../man3/sd_journal_get_data.3.html">sd_journal_get_data</a></b>(3), <b><a href="../man3/sd_journal_add_match.3.html">sd_journal_add_match</a></b>(3)

systemd 257.7                                                                     <u><a href="../man3/SD_JOURNAL_ENUMERATE_FIELDS.3.html">SD_JOURNAL_ENUMERATE_FIELDS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>