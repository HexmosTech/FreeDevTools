<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Catmandu::Fix::Bind::marc_each - a binder that loops over MARC fields</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcatmandu-marc-perl">libcatmandu-marc-perl_1.320-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Catmandu::Fix::Bind::marc_each - a binder that loops over MARC fields

</pre><h4><b>SYNOPSIS</b></h4><pre>
           # Only add the 720 field to the authors when the $e subfield contains a 'promotor'
           do marc_each()
               if marc_match("720e","promotor")
                   marc_map("720ab",authors.$append)
               end
           end

           # Delete all the 500 fields
           do marc_each()
               if marc_has("500")
                   reject()
               end
           end

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The marc_each binder will iterate over each individual MARC field and execute the fixes on each
       individual field.

       When a MARC record contains:

           500  $aTest
           500  $aTest2$eskip
           500  $aTest3

       then the Fix bellow will copy all 500 fields to note field, except for 500 fields with a subfield $e
       equal to "skip".

           do marc_each()
               unless marc_match("500e",skip)
                   marc_map("500",note.$append)
               end
           end

       The result will be:

           note: [Test,Test3]

</pre><h4><b>CONFIGURATION</b></h4><pre>
   <b>var</b>
       Optional loop variable which contains a HASH containing MARC field information with the following fields:

           tag        - The names of the MARC field
           ind1       - The value of the first indicator
           ind2       - The value of the second indicator
           subfields  - An array of subfield items. Each subfield item is a
                        hash of the subfield code and subfield value

       Given the MARC field:

           500[1, ] $aTest$bRest

       the loop variable will contain:

           tag: 500
           ind1: 1
           ind2: ' '
           subfields:
               - a : Test
               - b : Rest

       The loop variables can be used to have extra control over the processing of the MARC fields.

           do marc_each(var:this)
             # Set the indicator1 of all MARC 500 field to the value "3"
             if all_match(this.tag,500)
               set_field(tag.ind1,3)
               # Store the result in the MARC file
               <a href="../man500/marc_remove.500.html">marc_remove</a>(500)
               marc_paste(this)
             end
           end

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Catmandu::Fix::Bind

perl v5.38.2                                       2024-08-03                <u>Catmandu::Fix::Bind::<a href="../man3pm/marc_each.3pm.html">marc_each</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>