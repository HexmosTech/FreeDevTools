<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>statvfs, fstatvfs - get filesystem statistics</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       statvfs, fstatvfs - get filesystem statistics

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/statvfs.h&gt;</b>

       <b>int</b> <b>statvfs(const</b> <b>char</b> <b>*restrict</b> <u>path</u><b>,</b> <b>struct</b> <b>statvfs</b> <b>*restrict</b> <u>buf</u><b>);</b>
       <b>int</b> <b>fstatvfs(int</b> <u>fd</u><b>,</b> <b>struct</b> <b>statvfs</b> <b>*</b><u>buf</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  function <b>statvfs</b>() returns information about a mounted filesystem.  <u>path</u> is the pathname of any file
       within the mounted filesystem.  <u>buf</u> is a pointer to a <u>statvfs</u> structure defined approximately as follows:

           struct statvfs {
               unsigned long  f_bsize;    /* Filesystem block size */
               unsigned long  f_frsize;   /* Fragment size */
               fsblkcnt_t     f_blocks;   /* Size of fs in f_frsize units */
               fsblkcnt_t     f_bfree;    /* Number of free blocks */
               fsblkcnt_t     f_bavail;   /* Number of free blocks for
                                             unprivileged users */
               fsfilcnt_t     f_files;    /* Number of inodes */
               fsfilcnt_t     f_ffree;    /* Number of free inodes */
               fsfilcnt_t     f_favail;   /* Number of free inodes for
                                             unprivileged users */
               unsigned long  f_fsid;     /* Filesystem ID */
               unsigned long  f_flag;     /* Mount flags */
               unsigned long  f_namemax;  /* Maximum filename length */
           };

       Here the types <u>fsblkcnt_t</u> and <u>fsfilcnt_t</u> are defined in <u>&lt;sys/types.h&gt;</u>.  Both used to be <u>unsigned</u> <u>long</u>.

       The field <u>f_flag</u> is a bit  mask  indicating  various  options  that  were  employed  when  mounting  this
       filesystem.  It contains zero or more of the following flags:

       <b>ST_MANDLOCK</b>
              Mandatory locking is permitted on the filesystem (see <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2)).

       <b>ST_NOATIME</b>
              Do not update access times; see <b><a href="../man2/mount.2.html">mount</a></b>(2).

       <b>ST_NODEV</b>
              Disallow access to device special files on this filesystem.

       <b>ST_NODIRATIME</b>
              Do not update directory access times; see <b><a href="../man2/mount.2.html">mount</a></b>(2).

       <b>ST_NOEXEC</b>
              Execution of programs is disallowed on this filesystem.

       <b>ST_NOSUID</b>
              The  set-user-ID  and  set-group-ID  bits  are  ignored  by  <b><a href="../man3/exec.3.html">exec</a></b>(3)  for executable files on this
              filesystem

       <b>ST_RDONLY</b>
              This filesystem is mounted read-only.

       <b>ST_RELATIME</b>
              Update atime relative to mtime/ctime; see <b><a href="../man2/mount.2.html">mount</a></b>(2).

       <b>ST_SYNCHRONOUS</b>
              Writes are synched to the filesystem immediately (see the description of <b>O_SYNC</b> in <b><a href="../man2/open.2.html">open</a></b>(2)).

       It is unspecified whether all members of the returned struct have meaningful values on all filesystems.

       <b>fstatvfs</b>() returns the same information about an open file referenced by descriptor <u>fd</u>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, zero is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EACCES</b> (<b>statvfs</b>()) Search permission is denied for a component of the path prefix  of  <u>path</u>.   (See  also
              <b><a href="../man7/path_resolution.7.html">path_resolution</a></b>(7).)

       <b>EBADF</b>  (<b>fstatvfs</b>()) <u>fd</u> is not a valid open file descriptor.

       <b>EFAULT</b> <u>Buf</u> or <u>path</u> points to an invalid address.

       <b>EINTR</b>  This call was interrupted by a signal; see <b><a href="../man7/signal.7.html">signal</a></b>(7).

       <b>EIO</b>    An I/O error occurred while reading from the filesystem.

       <b>ELOOP</b>  (<b>statvfs</b>()) Too many symbolic links were encountered in translating <u>path</u>.

       <b>ENAMETOOLONG</b>
              (<b>statvfs</b>()) <u>path</u> is too long.

       <b>ENOENT</b> (<b>statvfs</b>()) The file referred to by <u>path</u> does not exist.

       <b>ENOMEM</b> Insufficient kernel memory was available.

       <b>ENOSYS</b> The filesystem does not support this call.

       <b>ENOTDIR</b>
              (<b>statvfs</b>()) A component of the path prefix of <u>path</u> is not a directory.

       <b>EOVERFLOW</b>
              Some values were too large to be represented in the returned struct.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌─────────────────────────────────────────────────────────────────────────────┬───────────────┬─────────┐
       │ <b>Interface</b>                                                                   │ <b>Attribute</b>     │ <b>Value</b>   │
       ├─────────────────────────────────────────────────────────────────────────────┼───────────────┼─────────┤
       │ <b>statvfs</b>(), <b>fstatvfs</b>()                                                       │ Thread safety │ MT-Safe │
       └─────────────────────────────────────────────────────────────────────────────┴───────────────┴─────────┘

</pre><h4><b>VERSIONS</b></h4><pre>
       Only  the  <b>ST_NOSUID</b>  and  <b>ST_RDONLY</b>  flags  of  the  <u>f_flag</u>  field  are specified in POSIX.1.  To obtain
       definitions of the remaining flags, one must define <b>_GNU_SOURCE</b>.

</pre><h4><b>NOTES</b></h4><pre>
       The Linux kernel has system calls <b><a href="../man2/statfs.2.html">statfs</a></b>(2) and <b><a href="../man2/fstatfs.2.html">fstatfs</a></b>(2) to support this library call.

       The glibc implementations of

           pathconf(path, _PC_REC_XFER_ALIGN);
           pathconf(path, _PC_ALLOC_SIZE_MIN);
           pathconf(path, _PC_REC_MIN_XFER_SIZE);

       respectively use the <u>f_frsize</u>, <u>f_frsize</u>, and <u>f_bsize</u> fields returned by a  call  to  <b>statvfs</b>()  with  the
       argument <u>path</u>.

       Under  Linux,  <u>f_favail</u>  is  always  the  same  as <u>f_ffree</u>, and there's no way for a filesystem to report
       otherwise.  This is not an issue, since no filesystems with an inode root reservation exist.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001.

       Before glibc 2.13, <b>statvfs</b>() populated the bits of the <u>f_flag</u> field by scanning the mount  options  shown
       in  <u><a href="file:/proc/mounts">/proc/mounts</a></u>.  However, starting with Linux 2.6.36, the underlying <b><a href="../man2/statfs.2.html">statfs</a></b>(2) system call provides the
       necessary information via the <u>f_flags</u> field, and since  glibc  2.13,  the  <b>statvfs</b>()  function  will  use
       information from that field rather than scanning <u><a href="file:/proc/mounts">/proc/mounts</a></u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/statfs.2.html">statfs</a></b>(2)

Linux man-pages 6.9.1                              2024-05-02                                         <u><a href="../man3/statvfs.3.html">statvfs</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>