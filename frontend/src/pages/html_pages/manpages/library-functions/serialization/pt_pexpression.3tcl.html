<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pt::pe - Parsing Expression Serialization</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pt::pe - Parsing Expression Serialization

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>pt::pe</b> <b>?1.0.2?</b>

       package require <b>char</b>

       <b>::pt::pe</b> <b>verify</b> <u>serial</u> ?<u>canonvar</u>?

       <b>::pt::pe</b> <b>verify-as-canonical</b> <u>serial</u>

       <b>::pt::pe</b> <b>canonicalize</b> <u>serial</u>

       <b>::pt::pe</b> <b>print</b> <u>serial</u>

       <b>::pt::pe</b> <b>bottomup</b> <u>cmdprefix</u> <u>pe</u>

       <b>cmdprefix</b> <u>pe</u> <u>op</u> <u>arguments</u>

       <b>::pt::pe</b> <b>topdown</b> <u>cmdprefix</u> <u>pe</u>

       <b>::pt::pe</b> <b>equal</b> <u>seriala</u> <u>serialb</u>

       <b>::pt::pe</b> <b>epsilon</b>

       <b>::pt::pe</b> <b>dot</b>

       <b>::pt::pe</b> <b>alnum</b>

       <b>::pt::pe</b> <b>alpha</b>

       <b>::pt::pe</b> <b>ascii</b>

       <b>::pt::pe</b> <b>control</b>

       <b>::pt::pe</b> <b>digit</b>

       <b>::pt::pe</b> <b>graph</b>

       <b>::pt::pe</b> <b>lower</b>

       <b>::pt::pe</b> <b>print</b>

       <b>::pt::pe</b> <b>punct</b>

       <b>::pt::pe</b> <b>space</b>

       <b>::pt::pe</b> <b>upper</b>

       <b>::pt::pe</b> <b>wordchar</b>

       <b>::pt::pe</b> <b>xdigit</b>

       <b>::pt::pe</b> <b>ddigit</b>

       <b>::pt::pe</b> <b>terminal</b> <u>t</u>

       <b>::pt::pe</b> <b>range</b> <u>ta</u> <u>tb</u>

       <b>::pt::pe</b> <b>nonterminal</b> <u>nt</u>

       <b>::pt::pe</b> <b>choice</b> <u>pe</u>...

       <b>::pt::pe</b> <b>sequence</b> <u>pe</u>...

       <b>::pt::pe</b> <b>repeat0</b> <u>pe</u>

       <b>::pt::pe</b> <b>repeat1</b> <u>pe</u>

       <b>::pt::pe</b> <b>optional</b> <u>pe</u>

       <b>::pt::pe</b> <b>ahead</b> <u>pe</u>

       <b>::pt::pe</b> <b>notahead</b> <u>pe</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Are  you lost ?  Do you have trouble understanding this document ?  In that case please read the overview
       provided by the <u>Introduction</u> <u>to</u> <u>Parser</u> <u>Tools</u>. This document is the entrypoint to  the  whole  system  the
       current package is a part of.

       This  package  provides commands to work with the serializations of parsing expressions as managed by the
       Parser Tools, and specified in section <b>PE</b> <b>serialization</b> <b>format</b>.

       This is a supporting package in the Core Layer of Parser Tools.

       IMAGE: arch_core_support

</pre><h4><b>API</b></h4><pre>
       <b>::pt::pe</b> <b>verify</b> <u>serial</u> ?<u>canonvar</u>?
              This command verifies that the content of <u>serial</u> is a valid serialization of a parsing  expression
              and will throw an error if that is not the case. The result of the command is the empty string.

              If  the  argument <u>canonvar</u> is specified it is interpreted as the name of a variable in the calling
              context. This variable will be written to if and only if <u>serial</u> is a valid regular  serialization.
              Its  value  will  be a boolean, with <b>True</b> indicating that the serialization is not only valid, but
              also <u>canonical</u>. <b>False</b> will be written for a valid, but non-canonical serialization.

              For the specification of serializations see the section <b>PE</b> <b>serialization</b> <b>format</b>.

       <b>::pt::pe</b> <b>verify-as-canonical</b> <u>serial</u>
              This command verifies that the content of <u>serial</u> is a valid <u>canonical</u> serialization of  a  parsing
              expression and will throw an error if that is not the case. The result of the command is the empty
              string.

              For the specification of canonical serializations see the section <b>PE</b> <b>serialization</b> <b>format</b>.

       <b>::pt::pe</b> <b>canonicalize</b> <u>serial</u>
              This  command  assumes  that  the  content of <u>serial</u> is a valid <u>regular</u> serialization of a parsing
              expression and will throw an error if that is not the case.

              It will then convert the input into the <u>canonical</u> serialization of  this  parsing  expression  and
              return it as its result. If the input is already canonical it will be returned unchanged.

              For  the  specification  of  regular and canonical serializations see the section <b>PE</b> <b>serialization</b>
              <b>format</b>.

       <b>::pt::pe</b> <b>print</b> <u>serial</u>
              This command assumes that the  argument  <u>serial</u>  contains  a  valid  serialization  of  a  parsing
              expression and returns a string containing that PE in a human readable form.

              The  exact  format  of  this  form  is  not specified and cannot be relied on for parsing or other
              machine-based activities.

              For the specification of serializations see the section <b>PE</b> <b>serialization</b> <b>format</b>.

       <b>::pt::pe</b> <b>bottomup</b> <u>cmdprefix</u> <u>pe</u>
              This command walks the parsing expression <u>pe</u> from the bottom up to the root, invoking the  command
              prefix  <u>cmdprefix</u>  for  each  partial  expression.  This  implies  that  the children of a parsing
              expression PE are handled before PE.

              The command prefix has the signature

              <b>cmdprefix</b> <u>pe</u> <u>op</u> <u>arguments</u>
                     I.e. it is invoked with the parsing expression <u>pe</u> the walk is currently at,  the  <u>op</u>'erator
                     in the <u>pe</u>, and the operator's <u>arguments</u>.

                     The  result  returned  by the command prefix replaces <u>pe</u> in the parsing expression it was a
                     child of, allowing transformations of the expression tree.

                     This also means that for all inner parsing expressions the contents of  <u>arguments</u>  are  the
                     results of the command prefix invoked for the children of this inner parsing expression.

       <b>::pt::pe</b> <b>topdown</b> <u>cmdprefix</u> <u>pe</u>
              This  command  walks  the  parsing  expression  <u>pe</u>  from the root down to the leaves, invoking the
              command prefix <u>cmdprefix</u> for each partial expression. This implies that the children of a  parsing
              expression PE are handled after PE.

              The command prefix has the same signature as for <b>bottomup</b>, see above.

              The result returned by the command prefix is <u>ignored</u>.

       <b>::pt::pe</b> <b>equal</b> <u>seriala</u> <u>serialb</u>
              This  command  tests  the two parsing expressions <u>seriala</u> and <u>serialb</u> for structural equality. The
              result of the command is a boolean value. It will be set to <b>true</b> if the expressions are identical,
              and <b>false</b> otherwise.

              String equality is usable only if we can assume that the two  parsing  expressions  are  pure  Tcl
              lists.

       <b>::pt::pe</b> <b>epsilon</b>
              This command constructs the atomic parsing expression for epsilon.

       <b>::pt::pe</b> <b>dot</b>
              This command constructs the atomic parsing expression for dot.

       <b>::pt::pe</b> <b>alnum</b>
              This command constructs the atomic parsing expression for alnum.

       <b>::pt::pe</b> <b>alpha</b>
              This command constructs the atomic parsing expression for alpha.

       <b>::pt::pe</b> <b>ascii</b>
              This command constructs the atomic parsing expression for ascii.

       <b>::pt::pe</b> <b>control</b>
              This command constructs the atomic parsing expression for control.

       <b>::pt::pe</b> <b>digit</b>
              This command constructs the atomic parsing expression for digit.

       <b>::pt::pe</b> <b>graph</b>
              This command constructs the atomic parsing expression for graph.

       <b>::pt::pe</b> <b>lower</b>
              This command constructs the atomic parsing expression for lower.

       <b>::pt::pe</b> <b>print</b>
              This command constructs the atomic parsing expression for print.

       <b>::pt::pe</b> <b>punct</b>
              This command constructs the atomic parsing expression for punct.

       <b>::pt::pe</b> <b>space</b>
              This command constructs the atomic parsing expression for space.

       <b>::pt::pe</b> <b>upper</b>
              This command constructs the atomic parsing expression for upper.

       <b>::pt::pe</b> <b>wordchar</b>
              This command constructs the atomic parsing expression for wordchar.

       <b>::pt::pe</b> <b>xdigit</b>
              This command constructs the atomic parsing expression for xdigit.

       <b>::pt::pe</b> <b>ddigit</b>
              This command constructs the atomic parsing expression for ddigit.

       <b>::pt::pe</b> <b>terminal</b> <u>t</u>
              This command constructs the atomic parsing expression for the terminal symbol <u>t</u>.

       <b>::pt::pe</b> <b>range</b> <u>ta</u> <u>tb</u>
              This command constructs the atomic parsing expression for the range of terminal symbols <u>ta</u> ... <u>tb</u>.

       <b>::pt::pe</b> <b>nonterminal</b> <u>nt</u>
              This command constructs the atomic parsing expression for the nonterminal symbol <u>nt</u>.

       <b>::pt::pe</b> <b>choice</b> <u>pe</u>...
              This  command  constructs  the  parsing  expression representing the ordered or prioritized choice
              between the argument parsing expressions. The first argument has the highest priority.

       <b>::pt::pe</b> <b>sequence</b> <u>pe</u>...
              This command constructs the parsing expression representing the sequence of the  argument  parsing
              expression. The first argument is the first element of the sequence.

       <b>::pt::pe</b> <b>repeat0</b> <u>pe</u>
              This  command  constructs  the  parsing expression representing the zero or more repetition of the
              argument parsing expression <u>pe</u>, also known as the kleene closure.

       <b>::pt::pe</b> <b>repeat1</b> <u>pe</u>
              This command constructs the parsing expression representing the one  or  more  repetition  of  the
              argument parsing expression <u>pe</u>, also known as the positive kleene closure.

       <b>::pt::pe</b> <b>optional</b> <u>pe</u>
              This  command  constructs  the  parsing  expression  representing  the optionality of the argument
              parsing expression <u>pe</u>.

       <b>::pt::pe</b> <b>ahead</b> <u>pe</u>
              This command constructs the parsing expression representing the positive lookahead of the argument
              parsing expression <u>pe</u>.

       <b>::pt::pe</b> <b>notahead</b> <u>pe</u>
              This command constructs the parsing expression representing the negative lookahead of the argument
              parsing expression <u>pe</u>.

</pre><h4><b>PE</b> <b>SERIALIZATION</b> <b>FORMAT</b></h4><pre>
       Here we specify the format used by the Parser Tools to serialize Parsing Expressions as immutable  values
       for transport, comparison, etc.

       We  distinguish  between  <u>regular</u> and <u>canonical</u> serializations.  While a parsing expression may have more
       than one regular serialization only exactly one of them will be <u>canonical</u>.

       Regular serialization

              <b>Atomic</b> <b>Parsing</b> <b>Expressions</b>

                     [1]    The string <b>epsilon</b> is an atomic parsing expression. It matches the empty string.

                     [2]    The string <b>dot</b> is an atomic parsing expression. It matches any character.

                     [3]    The string <b>alnum</b> is an atomic parsing expression. It matches any Unicode alphabet or
                            digit character. This is a custom extension of PEs based on  Tcl's  builtin  command
                            <b>string</b> <b>is</b>.

                     [4]    The  string  <b>alpha</b>  is an atomic parsing expression. It matches any Unicode alphabet
                            character. This is a custom extension of PEs based on Tcl's builtin  command  <b>string</b>
                            <b>is</b>.

                     [5]    The  string  <b>ascii</b> is an atomic parsing expression. It matches any Unicode character
                            below U0080. This is a custom extension of PEs based on Tcl's builtin command <b>string</b>
                            <b>is</b>.

                     [6]    The string <b>control</b> is an atomic parsing expression. It matches any  Unicode  control
                            character.  This  is a custom extension of PEs based on Tcl's builtin command <b>string</b>
                            <b>is</b>.

                     [7]    The string <b>digit</b> is an atomic parsing  expression.  It  matches  any  Unicode  digit
                            character. Note that this includes characters outside of the [0..9] range. This is a
                            custom extension of PEs based on Tcl's builtin command <b>string</b> <b>is</b>.

                     [8]    The  string  <b>graph</b>  is an atomic parsing expression. It matches any Unicode printing
                            character, except for space. This is a  custom  extension  of  PEs  based  on  Tcl's
                            builtin command <b>string</b> <b>is</b>.

                     [9]    The  string <b>lower</b> is an atomic parsing expression. It matches any Unicode lower-case
                            alphabet character. This is a custom extension of PEs based on Tcl's builtin command
                            <b>string</b> <b>is</b>.

                     [10]   The string <b>print</b> is an atomic parsing expression. It matches  any  Unicode  printing
                            character, including space. This is a custom extension of PEs based on Tcl's builtin
                            command <b>string</b> <b>is</b>.

                     [11]   The string <b>punct</b> is an atomic parsing expression. It matches any Unicode punctuation
                            character.  This  is a custom extension of PEs based on Tcl's builtin command <b>string</b>
                            <b>is</b>.

                     [12]   The string <b>space</b> is an atomic parsing  expression.  It  matches  any  Unicode  space
                            character.  This  is a custom extension of PEs based on Tcl's builtin command <b>string</b>
                            <b>is</b>.

                     [13]   The string <b>upper</b> is an atomic parsing expression. It matches any Unicode  upper-case
                            alphabet character. This is a custom extension of PEs based on Tcl's builtin command
                            <b>string</b> <b>is</b>.

                     [14]   The  string  <b>wordchar</b>  is  an atomic parsing expression. It matches any Unicode word
                            character. This is  any  alphanumeric  character  (see  alnum),  and  any  connector
                            punctuation  characters  (e.g.  underscore). This is a custom extension of PEs based
                            on Tcl's builtin command <b>string</b> <b>is</b>.

                     [15]   The string <b>xdigit</b> is an atomic parsing expression. It matches any hexadecimal  digit
                            character.  This  is a custom extension of PEs based on Tcl's builtin command <b>string</b>
                            <b>is</b>.

                     [16]   The string <b>ddigit</b> is an atomic parsing expression.  It  matches  any  decimal  digit
                            character. This is a custom extension of PEs based on Tcl's builtin command <b>regexp</b>.

                     [17]   The  expression  [list t <b>x</b>] is an atomic parsing expression. It matches the terminal
                            string <b>x</b>.

                     [18]   The expression  [list  n  <b>A</b>]  is  an  atomic  parsing  expression.  It  matches  the
                            nonterminal <b>A</b>.

              <b>Combined</b> <b>Parsing</b> <b>Expressions</b>

                     [1]    For  parsing  expressions <b>e1</b>, <b>e2</b>, ... the result of [list / <b>e1</b> <b>e2</b> ... ] is a parsing
                            expression as well.  This is the <u>ordered</u> <u>choice</u>, aka <u>prioritized</u> <u>choice</u>.

                     [2]    For parsing expressions <b>e1</b>, <b>e2</b>, ... the result of [list x <b>e1</b> <b>e2</b> ... ] is  a  parsing
                            expression as well.  This is the <u>sequence</u>.

                     [3]    For a parsing expression <b>e</b> the result of [list * <b>e</b>] is a parsing expression as well.
                            This is the <u>kleene</u> <u>closure</u>, describing zero or more repetitions.

                     [4]    For a parsing expression <b>e</b> the result of [list + <b>e</b>] is a parsing expression as well.
                            This is the <u>positive</u> <u>kleene</u> <u>closure</u>, describing one or more repetitions.

                     [5]    For a parsing expression <b>e</b> the result of [list &amp; <b>e</b>] is a parsing expression as well.
                            This is the <u>and</u> <u>lookahead</u> <u>predicate</u>.

                     [6]    For a parsing expression <b>e</b> the result of [list ! <b>e</b>] is a parsing expression as well.
                            This is the <u>not</u> <u>lookahead</u> <u>predicate</u>.

                     [7]    For a parsing expression <b>e</b> the result of [list ? <b>e</b>] is a parsing expression as well.
                            This is the <u>optional</u> <u>input</u>.

       Canonical serialization
              The  canonical  serialization  of a parsing expression has the format as specified in the previous
              item, and then additionally satisfies the constraints below, which make it unique  among  all  the
              possible serializations of this parsing expression.

              [1]    The  string representation of the value is the canonical representation of a pure Tcl list.
                     I.e. it does not contain superfluous whitespace.

              [2]    Terminals are <u>not</u> encoded as ranges (where start and end of the range are identical).

   <b>EXAMPLE</b>
       Assuming the parsing expression shown on the right-hand side of the rule

                  Expression &lt;- Term (AddOp Term)*

       then its canonical serialization (except for whitespace) is

                  {x {n Term} {* {x {n AddOp} {n Term}}}}

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the  category <u>pt</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       EBNF,  LL(k),  PEG,  TDPL,  context-free  languages,  expression,  grammar,  matching,  parser,   parsing
       expression,  parsing  expression grammar, push down automaton, recursive descent, state, top-down parsing
       languages, transducer

</pre><h4><b>CATEGORY</b></h4><pre>
       Parsing and Grammars

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2009 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                1.0.2                                         <u>pt::<a href="../man3tcl/pe.3tcl.html">pe</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>