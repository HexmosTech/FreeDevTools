<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>atomics - Atomic Functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/erlang-manpages">erlang-manpages_24.2.1+dfsg-1ubuntu0.5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       atomics - Atomic Functions

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  module  provides  a  set of functions to do atomic operations towards mutable atomic variables. The
       implementation utilizes only atomic hardware instructions without any software level locking, which makes
       it very efficient for concurrent access. The  atomics  are  organized  into  arrays  with  the  following
       semantics:

         * Atomics are 64 bit integers.

         * Atomics can be represented as either signed or unsigned.

         * Atomics wrap around at overflow and underflow operations.

         * All  operations  guarantee atomicity. No intermediate results can be seen. The result of one mutation
           can only be the input to one following mutation.

         * All atomic operations are mutually ordered. If atomic B is updated <u>after</u> atomic A, then that  is  how
           it  will  appear  to any concurrent readers. No one can read the new value of B and then read the old
           value of A.

         * Indexes into atomic arrays are one-based. An atomic array of arity N contains N  atomics  with  index
           from 1 to N.

</pre><h4><b>DATA</b> <b>TYPES</b></h4><pre>
       <b>atomics_ref()</b>

              Identifies an atomic array returned from <u>new/2</u>.

</pre><h4><b>EXPORTS</b></h4><pre>
       <b>new(Arity,</b> <b>Opts)</b> <b>-&gt;</b> <b>atomics_ref()</b>

              Types:

                 Arity = integer() &gt;= 1
                 Opts = [Opt]
                 Opt = {signed, boolean()}

              Create a new array of <u>Arity</u> number of atomics. All atomics in the array are initially set to zero.

              Argument <u>Opts</u> is a list of the following possible options:

                <u>{signed,</u> <u>boolean()}</u>:
                  Indicate  if the elements of the array will be treated as signed or unsigned integers. Default
                  is <u>true</u> (signed).

                  The integer interval for signed atomics are from <u>-(1</u> <u>bsl</u> <u>63)</u> to <u>(1</u> <u>bsl</u> <u>63)-1</u> and for  unsigned
                  atomics from <u>0</u> to <u>(1</u> <u>bsl</u> <u>64)-1</u>.

              Atomics  are not tied to the current process and are automatically garbage collected when they are
              no longer referenced.

       <b>put(Ref,</b> <b>Ix,</b> <b>Value)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 Ref = atomics_ref()
                 Ix = Value = integer()

              Set atomic to <u>Value</u>.

       <b>get(Ref,</b> <b>Ix)</b> <b>-&gt;</b> <b>integer()</b>

              Types:

                 Ref = atomics_ref()
                 Ix = integer()

              Read atomic value.

       <b>add(Ref,</b> <b>Ix,</b> <b>Incr)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 Ref = atomics_ref()
                 Ix = Incr = integer()

              Add <u>Incr</u> to atomic.

       <b>add_get(Ref,</b> <b>Ix,</b> <b>Incr)</b> <b>-&gt;</b> <b>integer()</b>

              Types:

                 Ref = atomics_ref()
                 Ix = Incr = integer()

              Atomic addition and return of the result.

       <b>sub(Ref,</b> <b>Ix,</b> <b>Decr)</b> <b>-&gt;</b> <b>ok</b>

              Types:

                 Ref = atomics_ref()
                 Ix = Decr = integer()

              Subtract <u>Decr</u> from atomic.

       <b>sub_get(Ref,</b> <b>Ix,</b> <b>Decr)</b> <b>-&gt;</b> <b>integer()</b>

              Types:

                 Ref = atomics_ref()
                 Ix = Decr = integer()

              Atomic subtraction and return of the result.

       <b>exchange(Ref,</b> <b>Ix,</b> <b>Desired)</b> <b>-&gt;</b> <b>integer()</b>

              Types:

                 Ref = atomics_ref()
                 Ix = Desired = integer()

              Atomically replaces the value of the atomic with <u>Desired</u> and returns the value it held previously.

       <b>compare_exchange(Ref,</b> <b>Ix,</b> <b>Expected,</b> <b>Desired)</b> <b>-&gt;</b> <b>ok</b> <b>|</b> <b>integer()</b>

              Types:

                 Ref = atomics_ref()
                 Ix = Expected = Desired = integer()

              Atomically compares the atomic with <u>Expected</u>, and if those  are  equal,  set  atomic  to  <u>Desired</u>.
              Returns <u>ok</u> if <u>Desired</u> was written. Returns the actual atomic value if not equal to <u>Expected</u>.

       <b>info(Ref)</b> <b>-&gt;</b> <b>Info</b>

              Types:

                 Ref = atomics_ref()
                 Info =
                     #{size := Size, max := Max, min := Min, memory := Memory}
                 Size = integer() &gt;= 0
                 Max = Min = integer()
                 Memory = integer() &gt;= 0

              Return information about an atomic array in a map. The map has the following keys:

                <u>size</u>:
                  The number of atomics in the array.

                <u>max</u>:
                  The highest possible value an atomic in this array can hold.

                <u>min</u>:
                  The lowest possible value an atomic in this array can hold.

                <u>memory</u>:
                  Approximate memory consumption for the array in bytes.

Ericsson AB                                        erts 12.2.1                                     <u><a href="../man3erl/atomics.3erl.html">atomics</a></u>(3erl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>