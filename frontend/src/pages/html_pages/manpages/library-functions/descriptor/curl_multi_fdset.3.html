<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>curl_multi_fdset - extract file descriptor information from a multi handle</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       curl_multi_fdset - extract file descriptor information from a multi handle

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLMcode curl_multi_fdset(CURLM *multi_handle,
                                  fd_set *read_fd_set,
                                  fd_set *write_fd_set,
                                  fd_set *exc_fd_set,
                                  int *max_fd);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This function extracts file descriptor information from a given multi_handle.  libcurl returns its <u>fd_set</u>
       sets.  The  application  can  use  these  to select() on, but be sure to <u>FD_ZERO</u> them before calling this
       function as <u><a href="../man3/curl_multi_fdset.3.html">curl_multi_fdset</a>(3)</u> only adds its own descriptors, it does not zero or otherwise  remove  any
       others.  The  <u><a href="../man3/curl_multi_perform.3.html">curl_multi_perform</a>(3)</u>  function should be called as soon as one of them is ready to be read
       from or written to.

       The <u>read_fd_set</u> argument should point to an object of type <b>fd_set</b> that  on  returns  specifies  the  file
       descriptors to be checked for being ready to read.

       The  <u>write_fd_set</u>  argument  should  point  to an object of type <b>fd_set</b> that on return specifies the file
       descriptors to be checked for being ready to write.

       The <u>exc_fd_set</u> argument should point to an object of type  <b>fd_set</b>  that  on  return  specifies  the  file
       descriptors to be checked for error conditions.

       If  no  file  descriptors  are set by libcurl, <u>max_fd</u> contain -1 when this function returns. Otherwise it
       contains the highest descriptor number libcurl set. When libcurl returns -1  in  <u>max_fd</u>,  it  is  because
       libcurl  currently  does something that is not possible for your application to monitor with a socket and
       unfortunately you can then not know exactly when the current action is completed using select(). You then
       need to wait a while before you proceed and call <u><a href="../man3/curl_multi_perform.3.html">curl_multi_perform</a>(3)</u> anyway. How long to  wait?  Unless
       <u><a href="../man3/curl_multi_timeout.3.html">curl_multi_timeout</a>(3)</u>  gives  you  a lower number, we suggest 100 milliseconds or so, but you may want to
       test it out in your own particular conditions to find a suitable value.

       When doing select(), you should use <u><a href="../man3/curl_multi_timeout.3.html">curl_multi_timeout</a>(3)</u> to figure out how long to wait for action. Call
       <u><a href="../man3/curl_multi_perform.3.html">curl_multi_perform</a>(3)</u> even if no activity has been seen on the  <b>fd_sets</b>  after  the  timeout  expires  as
       otherwise internal retries and timeouts may not work as you would think and want.

       If  one  of  the sockets used by libcurl happens to be larger than what can be set in an <b>fd_set</b>, which on
       POSIX systems means that the file descriptor is larger than <b>FD_SETSIZE</b>, then libcurl tries to not set it.
       Setting a too large file descriptor in an <b>fd_set</b> implies an out of bounds write which can cause  crashes,
       or worse. The effect of NOT storing it might possibly save you from the crash, but makes your program NOT
       wait for sockets it should wait for...

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         fd_set fdread;
         fd_set fdwrite;
         fd_set fdexcep;
         int maxfd;
         int rc;
         CURLMcode mc;
         struct timeval timeout = {1, 0};

         CURLM *multi = curl_multi_init();

         do {

           /* call curl_multi_perform() */

           FD_ZERO(&amp;fdread);
           FD_ZERO(&amp;fdwrite);
           FD_ZERO(&amp;fdexcep);

           /* get file descriptors from the transfers */
           mc = curl_multi_fdset(multi, &amp;fdread, &amp;fdwrite, &amp;fdexcep, &amp;maxfd);

           if(mc != CURLM_OK) {
             fprintf(stderr, "curl_multi_fdset() failed, code %d.\n", mc);
             break;
           }

           /* wait for activity on one of the sockets */
           rc = select(maxfd + 1, &amp;fdread, &amp;fdwrite, &amp;fdexcep, &amp;timeout);

         } while(!mc);
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.9.6

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This function returns a CURLMcode indicating success or error.

       CURLM_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/curl_multi_cleanup.3.html">curl_multi_cleanup</a></b>(3),       <b><a href="../man3/curl_multi_init.3.html">curl_multi_init</a></b>(3),       <b><a href="../man3/curl_multi_perform.3.html">curl_multi_perform</a></b>(3),      <b><a href="../man3/curl_multi_timeout.3.html">curl_multi_timeout</a></b>(3),
       <b><a href="../man3/curl_multi_wait.3.html">curl_multi_wait</a></b>(3), <b><a href="../man3/curl_multi_waitfds.3.html">curl_multi_waitfds</a></b>(3), <b><a href="../man2/select.2.html">select</a></b>(2)

libcurl                                            2025-06-16                                <u><a href="../man3/curl_multi_fdset.3.html">curl_multi_fdset</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>