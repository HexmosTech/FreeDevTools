<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EVP_PKEY_set1_RSA, EVP_PKEY_set1_DSA, EVP_PKEY_set1_DH, EVP_PKEY_set1_EC_KEY, EVP_PKEY_get1_RSA,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       EVP_PKEY_set1_RSA, EVP_PKEY_set1_DSA, EVP_PKEY_set1_DH, EVP_PKEY_set1_EC_KEY, EVP_PKEY_get1_RSA,
       EVP_PKEY_get1_DSA, EVP_PKEY_get1_DH, EVP_PKEY_get1_EC_KEY, EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA,
       EVP_PKEY_get0_DH, EVP_PKEY_get0_EC_KEY, EVP_PKEY_assign_RSA, EVP_PKEY_assign_DSA, EVP_PKEY_assign_DH,
       EVP_PKEY_assign_EC_KEY, EVP_PKEY_assign_POLY1305, EVP_PKEY_assign_SIPHASH, EVP_PKEY_get0_hmac,
       EVP_PKEY_get0_poly1305, EVP_PKEY_get0_siphash, EVP_PKEY_get0, EVP_PKEY_type, EVP_PKEY_get_id,
       EVP_PKEY_get_base_id, EVP_PKEY_set1_engine, EVP_PKEY_get0_engine, EVP_PKEY_id, EVP_PKEY_base_id -
       EVP_PKEY assignment functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/evp.h&gt;

        int EVP_PKEY_get_id(const EVP_PKEY *pkey);
        int EVP_PKEY_get_base_id(const EVP_PKEY *pkey);
        int EVP_PKEY_type(int type);

        #define EVP_PKEY_id EVP_PKEY_get_id
        #define EVP_PKEY_base_id EVP_PKEY_get_base_id

       The following functions have been deprecated since OpenSSL 3.0, and can be hidden entirely by defining
       <b>OPENSSL_API_COMPAT</b> with a suitable version value, see <b><a href="../man7/openssl_user_macros.7.html">openssl_user_macros</a></b>(7):

        int EVP_PKEY_set1_RSA(EVP_PKEY *pkey, RSA *key);
        int EVP_PKEY_set1_DSA(EVP_PKEY *pkey, DSA *key);
        int EVP_PKEY_set1_DH(EVP_PKEY *pkey, DH *key);
        int EVP_PKEY_set1_EC_KEY(EVP_PKEY *pkey, EC_KEY *key);

        RSA *EVP_PKEY_get1_RSA(EVP_PKEY *pkey);
        DSA *EVP_PKEY_get1_DSA(EVP_PKEY *pkey);
        DH *EVP_PKEY_get1_DH(EVP_PKEY *pkey);
        EC_KEY *EVP_PKEY_get1_EC_KEY(EVP_PKEY *pkey);

        const unsigned char *EVP_PKEY_get0_hmac(const EVP_PKEY *pkey, size_t *len);
        const unsigned char *EVP_PKEY_get0_poly1305(const EVP_PKEY *pkey, size_t *len);
        const unsigned char *EVP_PKEY_get0_siphash(const EVP_PKEY *pkey, size_t *len);
        const RSA *EVP_PKEY_get0_RSA(const EVP_PKEY *pkey);
        const DSA *EVP_PKEY_get0_DSA(const EVP_PKEY *pkey);
        const DH *EVP_PKEY_get0_DH(const EVP_PKEY *pkey);
        const EC_KEY *EVP_PKEY_get0_EC_KEY(const EVP_PKEY *pkey);
        void *EVP_PKEY_get0(const EVP_PKEY *pkey);

        int EVP_PKEY_assign_RSA(EVP_PKEY *pkey, RSA *key);
        int EVP_PKEY_assign_DSA(EVP_PKEY *pkey, DSA *key);
        int EVP_PKEY_assign_DH(EVP_PKEY *pkey, DH *key);
        int EVP_PKEY_assign_EC_KEY(EVP_PKEY *pkey, EC_KEY *key);
        int EVP_PKEY_assign_POLY1305(EVP_PKEY *pkey, ASN1_OCTET_STRING *key);
        int EVP_PKEY_assign_SIPHASH(EVP_PKEY *pkey, ASN1_OCTET_STRING *key);

        ENGINE *EVP_PKEY_get0_engine(const EVP_PKEY *pkey);
        int EVP_PKEY_set1_engine(EVP_PKEY *pkey, ENGINE *engine);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>EVP_PKEY_get_base_id()</b> returns the type of <u>pkey</u>. For example an RSA key will return <b>EVP_PKEY_RSA</b>.

       <b>EVP_PKEY_get_id()</b> returns the actual NID associated with <u>pkey</u> only if the <u>pkey</u> type isn't implemented
       just in a <b><a href="../man7/provider.7.html">provider</a></b>(7).  Historically keys using the same algorithm could use different NIDs.  For example
       an RSA key could use the NIDs corresponding to the NIDs <b>NID_rsaEncryption</b> (equivalent to <b>EVP_PKEY_RSA</b>) or
       <b>NID_rsa</b> (equivalent to <b>EVP_PKEY_RSA2</b>). The use of alternative non-standard NIDs is now rare so
       <b>EVP_PKEY_RSA2</b> et al are not often seen in practice.  <b>EVP_PKEY_get_id()</b> returns -1 (<b>EVP_PKEY_KEYMGMT</b>) if
       the <u>pkey</u> is only implemented in a <b><a href="../man7/provider.7.html">provider</a></b>(7).

       <b>EVP_PKEY_type()</b> returns the underlying type of the NID <u>type</u>. For example EVP_PKEY_type(EVP_PKEY_RSA2)
       will return <b>EVP_PKEY_RSA</b>.

       <b>EVP_PKEY_set1_RSA()</b>, <b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> and <b>EVP_PKEY_set1_EC_KEY()</b> set the key
       referenced by <u>pkey</u> to <u>key</u>. These functions are deprecated. Applications should instead use
       <b><a href="../man3/EVP_PKEY_fromdata.3.html">EVP_PKEY_fromdata</a></b>(3).

       <b>EVP_PKEY_assign_RSA()</b>, <b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>, <b>EVP_PKEY_assign_EC_KEY()</b>,
       <b>EVP_PKEY_assign_POLY1305()</b> and <b>EVP_PKEY_assign_SIPHASH()</b> set the referenced key to <u>key</u> however these use
       the supplied <u>key</u> internally and so <u>key</u> will be freed when the parent <u>pkey</u> is freed. These macros are
       deprecated. Applications should instead read an EVP_PKEY directly using the OSSL_DECODER APIs (see
       <b><a href="../man3/OSSL_DECODER_CTX_new_for_pkey.3.html">OSSL_DECODER_CTX_new_for_pkey</a></b>(3)), or construct an EVP_PKEY from data using <b><a href="../man3/EVP_PKEY_fromdata.3.html">EVP_PKEY_fromdata</a></b>(3).

       <b>EVP_PKEY_get1_RSA()</b>, <b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and <b>EVP_PKEY_get1_EC_KEY()</b> return the
       referenced key in <u>pkey</u> or NULL if the key is not of the correct type. The returned key must be freed
       after use.  These functions are deprecated. Applications should instead use the EVP_PKEY directly where
       possible. If access to the low level key parameters is required then applications should use
       <b><a href="../man3/EVP_PKEY_get_params.3.html">EVP_PKEY_get_params</a></b>(3) and other similar functions. To write an EVP_PKEY out use the OSSL_ENCODER APIs
       (see <b><a href="../man3/OSSL_ENCODER_CTX_new_for_pkey.3.html">OSSL_ENCODER_CTX_new_for_pkey</a></b>(3)).

       <b>EVP_PKEY_get0_hmac()</b>, <b>EVP_PKEY_get0_poly1305()</b>, <b>EVP_PKEY_get0_siphash()</b>, <b>EVP_PKEY_get0_RSA()</b>,
       <b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> and <b>EVP_PKEY_get0_EC_KEY()</b> return the referenced key in <u>pkey</u> or
       NULL if the key is not of the correct type. The reference count of the returned key is <b>not</b> incremented
       and so the key must not be freed after use. These functions are deprecated. Applications should instead
       use the EVP_PKEY directly where possible. If access to the low level key parameters is required then
       applications should use <b><a href="../man3/EVP_PKEY_get_params.3.html">EVP_PKEY_get_params</a></b>(3) and other similar functions.  To write an EVP_PKEY out use
       the OSSL_ENCODER APIs (see <b><a href="../man3/OSSL_ENCODER_CTX_new_for_pkey.3.html">OSSL_ENCODER_CTX_new_for_pkey</a></b>(3)). <b>EVP_PKEY_get0()</b> returns a pointer to the
       legacy key or NULL if the key is not legacy.

       Note that if an EVP_PKEY was not constructed using one of the deprecated functions such as
       <b>EVP_PKEY_set1_RSA()</b>, <b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> or <b>EVP_PKEY_set1_EC_KEY()</b>, or via the
       similarly named <b>EVP_PKEY_assign</b> macros described above then the internal key will be managed by a
       provider (see <b><a href="../man7/provider.7.html">provider</a></b>(7)). In that case the key returned by <b>EVP_PKEY_get1_RSA()</b>, <b>EVP_PKEY_get1_DSA()</b>,
       <b>EVP_PKEY_get1_DH()</b>, <b>EVP_PKEY_get1_EC_KEY()</b>, <b>EVP_PKEY_get0_hmac()</b>, <b>EVP_PKEY_get0_poly1305()</b>,
       <b>EVP_PKEY_get0_siphash()</b>, <b>EVP_PKEY_get0_RSA()</b>, <b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> or
       <b>EVP_PKEY_get0_EC_KEY()</b> will be a cached copy of the provider's key. Subsequent updates to the provider's
       key will not be reflected back in the cached copy, and updates made by an application to the returned key
       will not be reflected back in the provider's key. Subsequent calls to <b>EVP_PKEY_get1_RSA()</b>,
       <b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and <b>EVP_PKEY_get1_EC_KEY()</b> will always return the cached copy
       returned by the first call.

       <b>EVP_PKEY_get0_engine()</b> returns a reference to the ENGINE handling <u>pkey</u>. This function is deprecated.
       Applications should use providers instead of engines (see <b><a href="../man7/provider.7.html">provider</a></b>(7) for details).

       <b>EVP_PKEY_set1_engine()</b> sets the ENGINE handling <u>pkey</u> to <u>engine</u>. It must be called after the key algorithm
       and components are set up.  If <u>engine</u> does not include an <b>EVP_PKEY_METHOD</b> for <u>pkey</u> an error occurs. This
       function is deprecated. Applications should use providers instead of engines (see <b><a href="../man7/provider.7.html">provider</a></b>(7) for
       details).

</pre><h4><b>WARNINGS</b></h4><pre>
       The following functions are only reliable with <b>EVP_PKEY</b>s that have been assigned an internal key with
       EVP_PKEY_assign_*():

       <b>EVP_PKEY_get_id()</b>, <b>EVP_PKEY_get_base_id()</b>, <b>EVP_PKEY_type()</b>

       For EVP_PKEY key type checking purposes, <b><a href="../man3/EVP_PKEY_is_a.3.html">EVP_PKEY_is_a</a></b>(3) is more generic.

       For purposes of retrieving the name of the <b>EVP_PKEY</b> the function <b><a href="../man3/EVP_PKEY_get0_type_name.3.html">EVP_PKEY_get0_type_name</a></b>(3) is more
       generally useful.

       The keys returned from the functions <b>EVP_PKEY_get0_RSA()</b>, <b>EVP_PKEY_get0_DSA()</b>, <b>EVP_PKEY_get0_DH()</b> and
       <b>EVP_PKEY_get0_EC_KEY()</b> were changed to have a "const" return type in OpenSSL 3.0. As described above the
       keys returned may be cached copies of the key held in a provider. Due to this, and unlike in earlier
       versions of OpenSSL, they should be considered read-only copies of the key.  Updates to these keys will
       not be reflected back in the provider side key. The <b>EVP_PKEY_get1_RSA()</b>, <b>EVP_PKEY_get1_DSA()</b>,
       <b>EVP_PKEY_get1_DH()</b> and <b>EVP_PKEY_get1_EC_KEY()</b> functions were not changed to have a "const" return type in
       order that applications can "free" the return value. However applications should still consider them as
       read-only copies.

</pre><h4><b>NOTES</b></h4><pre>
       In accordance with the OpenSSL naming convention the key obtained from or assigned to the <u>pkey</u> using the
       <b>1</b> functions must be freed as well as <u>pkey</u>.

       <b>EVP_PKEY_assign_RSA()</b>, <b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>, <b>EVP_PKEY_assign_EC_KEY()</b>,
       <b>EVP_PKEY_assign_POLY1305()</b> and <b>EVP_PKEY_assign_SIPHASH()</b> are implemented as macros.

       <b>EVP_PKEY_assign_EC_KEY()</b> looks at the curve name id to determine if the passed <b>EC_KEY</b> is an <b><a href="../man7/SM2.7.html">SM2</a></b>(7) key,
       and will set the <b>EVP_PKEY</b> type to <b>EVP_PKEY_SM2</b> in that case, instead of <b>EVP_PKEY_EC</b>.

       Most applications wishing to know a key type will simply call <b>EVP_PKEY_get_base_id()</b> and will not care
       about the actual type: which will be identical in almost all cases.

       Previous versions of this document suggested using EVP_PKEY_type(pkey-&gt;type) to determine the type of a
       key. Since <b>EVP_PKEY</b> is now opaque this is no longer possible: the equivalent is
       EVP_PKEY_get_base_id(pkey).

       <b>EVP_PKEY_set1_engine()</b> is typically used by an ENGINE returning an HSM key as part of its routine to load
       a private key.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>EVP_PKEY_set1_RSA()</b>, <b>EVP_PKEY_set1_DSA()</b>, <b>EVP_PKEY_set1_DH()</b> and <b>EVP_PKEY_set1_EC_KEY()</b> return 1 for
       success or 0 for failure.

       <b>EVP_PKEY_get1_RSA()</b>, <b>EVP_PKEY_get1_DSA()</b>, <b>EVP_PKEY_get1_DH()</b> and <b>EVP_PKEY_get1_EC_KEY()</b> return the
       referenced key or NULL if an error occurred.

       <b>EVP_PKEY_assign_RSA()</b>, <b>EVP_PKEY_assign_DSA()</b>, <b>EVP_PKEY_assign_DH()</b>, <b>EVP_PKEY_assign_EC_KEY()</b>,
       <b>EVP_PKEY_assign_POLY1305()</b> and <b>EVP_PKEY_assign_SIPHASH()</b> return 1 for success and 0 for failure.

       <b>EVP_PKEY_get_base_id()</b>, <b>EVP_PKEY_get_id()</b> and <b>EVP_PKEY_type()</b> return a key type or <b>NID_undef</b>
       (equivalently <b>EVP_PKEY_NONE</b>) on error.

       <b>EVP_PKEY_set1_engine()</b> returns 1 for success and 0 for failure.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/EVP_PKEY_new.3.html">EVP_PKEY_new</a></b>(3), <b><a href="../man7/SM2.7.html">SM2</a></b>(7)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>EVP_PKEY_id()</b> and <b>EVP_PKEY_base_id()</b> functions were renamed to include "get" in their names in
       OpenSSL 3.0, respectively. The old names are kept as non-deprecated alias macros.

       EVP_PKEY_set1_RSA, EVP_PKEY_set1_DSA, EVP_PKEY_set1_DH, EVP_PKEY_set1_EC_KEY, EVP_PKEY_get1_RSA,
       EVP_PKEY_get1_DSA, EVP_PKEY_get1_DH, EVP_PKEY_get1_EC_KEY, EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA,
       EVP_PKEY_get0_DH, EVP_PKEY_get0_EC_KEY, EVP_PKEY_assign_RSA, EVP_PKEY_assign_DSA, EVP_PKEY_assign_DH,
       EVP_PKEY_assign_EC_KEY, EVP_PKEY_assign_POLY1305, EVP_PKEY_assign_SIPHASH, EVP_PKEY_get0_hmac,
       EVP_PKEY_get0_poly1305, EVP_PKEY_get0_siphash, EVP_PKEY_set1_engine and EVP_PKEY_get0_engine were
       deprecated in OpenSSL 3.0.

       The return value from EVP_PKEY_get0_RSA, EVP_PKEY_get0_DSA, EVP_PKEY_get0_DH, EVP_PKEY_get0_EC_KEY were
       made const in OpenSSL 3.0.

       The function <b>EVP_PKEY_set_alias_type()</b> was previously documented on this page.  It was removed in OpenSSL
       3.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2002-2023 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file except in compliance
       with the License.  You can obtain a copy in the file LICENSE in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                            <u><a href="../man3SSL/EVP_PKEY_SET1_RSA.3SSL.html">EVP_PKEY_SET1_RSA</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>