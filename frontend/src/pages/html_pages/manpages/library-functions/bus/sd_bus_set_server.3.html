<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_bus_set_server, sd_bus_is_server, sd_bus_get_bus_id, sd_bus_set_bus_client, sd_bus_is_bus_client,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_bus_set_server, sd_bus_is_server, sd_bus_get_bus_id, sd_bus_set_bus_client, sd_bus_is_bus_client,
       sd_bus_set_monitor, sd_bus_is_monitor - Configure connection mode for a bus object

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-bus.h&gt;</b>

       <b>int</b> <b>sd_bus_set_server(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>int</b> <u>b</u><b>,</b> <b>sd_id128_t</b> <u>id</u><b>);</b>

       <b>int</b> <b>sd_bus_is_server(sd_bus</b> <b>*</b><u>bus</u><b>);</b>

       <b>int</b> <b>sd_bus_get_bus_id(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_id128_t</b> <b>*</b><u>id</u><b>);</b>

       <b>int</b> <b>sd_bus_set_bus_client(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>int</b> <u>b</u><b>);</b>

       <b>int</b> <b>sd_bus_is_bus_client(sd_bus</b> <b>*</b><u>bus</u><b>);</b>

       <b>int</b> <b>sd_bus_set_monitor(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>int</b> <u>b</u><b>);</b>

       <b>int</b> <b>sd_bus_is_monitor(sd_bus</b> <b>*</b><u>bus</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_bus_set_server()</b> configures the bus object as a server for direct D-Bus connections.  <u>b</u>
       enables/disables the server mode. If zero, the server mode is disabled. Otherwise, the server mode is
       enabled. Configuring a bus object as a server is required to allow establishing direct connections
       between two peers without going via the D-Bus daemon.  <u>id</u> must contain a 128-bit integer id for the
       server. If clients add a guid field to their D-Bus address string, the server id must match this guid or
       the D-Bus authentication handshake will fail. If no specific id is defined for the server,
       <b><a href="../man3/sd_id128_randomize.3.html">sd_id128_randomize</a></b>(3) can be used to generate a random id instead.

       <b>sd_bus_is_server()</b> returns whether the server mode is enabled for the given bus object.

       <b>sd_bus_get_bus_id()</b> stores the D-Bus server id configured using <b>sd_bus_set_server()</b> (for server bus
       objects) or received during D-Bus authentication (for client bus objects) in <u>id</u>.

       <b>sd_bus_set_bus_client()</b> configures the bus object as a D-Bus daemon client.  <u>b</u> enables/disables the
       client mode. If zero, the client mode is disabled and the bus object should connect directly to a D-Bus
       server. Otherwise, the client mode is enabled and the bus object should connect to a D-Bus daemon. When
       connecting to an existing bus using any of the functions in the <b><a href="../man3/sd_bus_open.3.html">sd_bus_open</a></b>(3) family of functions or any
       of the functions in the <b><a href="../man3/sd_bus_default.3.html">sd_bus_default</a></b>(3) family of functions, the bus object is automatically configured
       as a bus client. However, when connecting to a D-Bus daemon by calling <b><a href="../man3/sd_bus_set_address.3.html">sd_bus_set_address</a></b>(3) followed by
       <b><a href="../man3/sd_bus_start.3.html">sd_bus_start</a></b>(3), the bus object should be manually configured as a bus client using
       <b>sd_bus_set_bus_client()</b>. By default, a bus object is not configured as a D-Bus daemon client.

       <b>sd_bus_is_bus_client()</b> returns whether the client mode is enabled/disabled for the given bus object.

       <b>sd_bus_set_monitor()</b> configures the bus object as a D-Bus monitor object.  <u>b</u> enables/disables the monitor
       mode. If zero, the monitor mode is disabled. If non-zero, the monitor mode is enabled. When the monitor
       mode is enabled, no messages may be sent via the bus object and it may not expose any objects on the bus.
       To start monitoring messages, call the <b>org.freedesktop.DBus.Monitoring.BecomeMonitor</b> method of the D-Bus
       daemon and pass a list of matches indicating which messages to intercept. See <b>The</b> <b>D-Bus</b> <b>specification</b>[1]
       for more information.

       <b>sd_bus_is_monitor()</b> returns whether the monitor mode is enabled/disabled for the given bus object.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>sd_bus_set_server()</b>, <b>sd_bus_get_bus_id()</b>, <b>sd_bus_set_bus_client()</b> and <b>sd_bus_set_monitor()</b>
       return a non-negative integer. On failure, they return a negative errno-style error code.

       <b>sd_bus_is_server()</b>, <b>sd_bus_is_bus_client()</b> and <b>sd_bus_is_monitor()</b> return a positive integer when the
       server or client mode is enabled, respectively. Otherwise, they return zero.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-ECHILD</b>
           The bus connection has been created in a different process, library or module instance.

           Added in version 246.

       <b>-EPERM</b>
           The bus connection has already been started.

           Added in version 246.

       <b>-ENOPKG</b>
           The bus cannot be resolved.

           Added in version 246.

       <b>-EINVAL</b>
           A required parameter was <b>NULL</b> or <u>b</u> was zero and <u>id</u> did not equal <b>SD_ID128_NULL</b>.

           Added in version 246.

       <b>-ENOTCONN</b>
           The bus is not connected.

           Added in version 246.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_bus_set_server()</b>, <b>sd_bus_is_server()</b>, <b>sd_bus_get_bus_id()</b>, <b>sd_bus_set_bus_client()</b>,
       <b>sd_bus_is_bus_client()</b>, <b>sd_bus_set_monitor()</b>, and <b>sd_bus_is_monitor()</b> were added in version 246.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-bus.3.html">sd-bus</a></b>(3)

</pre><h4><b>NOTES</b></h4><pre>
        1. The D-Bus specification
           https://dbus.freedesktop.org/doc/dbus-specification.html#bus-messages-become-monitor

systemd 257.7                                                                               <u><a href="../man3/SD_BUS_SET_SERVER.3.html">SD_BUS_SET_SERVER</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>