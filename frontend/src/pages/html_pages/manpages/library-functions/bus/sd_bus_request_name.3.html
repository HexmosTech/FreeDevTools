<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_bus_request_name, sd_bus_request_name_async, sd_bus_release_name, sd_bus_release_name_async - Request</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_bus_request_name, sd_bus_request_name_async, sd_bus_release_name, sd_bus_release_name_async - Request
       or release a well-known service name on a bus

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-bus.h&gt;</b>

       <b>typedef</b> <b>int</b> <b>(*sd_bus_message_handler_t)(sd_bus_message</b> <b>*</b><u>m</u><b>,</b> <b>void</b> <b>*</b><u>userdata</u><b>,</b> <b>sd_bus_error</b> <b>*</b><u>ret_error</u><b>);</b>

       <b>int</b> <b>sd_bus_request_name(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>name</u><b>,</b> <b>uint64_t</b> <u>flags</u><b>);</b>

       <b>int</b> <b>sd_bus_request_name_async(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_bus_slot</b> <b>**</b><u>slot</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>name</u><b>,</b> <b>uint64_t</b> <u>flags</u><b>,</b>
                                     <b>sd_bus_message_handler_t</b> <u>callback</u><b>,</b> <b>void</b> <b>*</b><u>userdata</u><b>);</b>

       <b>int</b> <b>sd_bus_release_name(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>name</u><b>);</b>

       <b>int</b> <b>sd_bus_release_name_async(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_bus_slot</b> <b>**</b><u>slot</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>name</u><b>,</b>
                                     <b>sd_bus_message_handler_t</b> <u>callback</u><b>,</b> <b>void</b> <b>*</b><u>userdata</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_bus_request_name()</b> requests a well-known service name on a bus. It takes a bus connection, a valid bus
       name, and a flags parameter. The flags parameter is a combination of zero or more of the following flags:

       <b>SD_BUS_NAME_ALLOW_REPLACEMENT</b>
           After acquiring the name successfully, permit other peers to take over the name when they try to
           acquire it with the <b>SD_BUS_NAME_REPLACE_EXISTING</b> flag set. If <b>SD_BUS_NAME_ALLOW_REPLACEMENT</b> is not
           set on the original request, such a request by other peers will be denied.

           Added in version 209.

       <b>SD_BUS_NAME_REPLACE_EXISTING</b>
           Take over the name if it was already acquired by another peer, and that other peer has permitted
           takeover by setting <b>SD_BUS_NAME_ALLOW_REPLACEMENT</b> while acquiring it.

           Added in version 209.

       <b>SD_BUS_NAME_QUEUE</b>
           Queue the acquisition of the name when the name is already taken.

           Added in version 209.

       <b>sd_bus_request_name()</b> operates in a synchronous fashion: a message requesting the name is sent to the bus
       broker, and the call waits until the broker responds.

       <b>sd_bus_request_name_async()</b> is an asynchronous version of <b>sd_bus_request_name()</b>. Instead of waiting for
       the request to complete, the request message is enqueued. The specified <u>callback</u> will be called when the
       broker's response is received. If the parameter is specified as <b>NULL</b> a default implementation is used
       instead which will terminate the connection when the name cannot be acquired. The function returns a slot
       object in its <u>slot</u> parameter — if it is passed as non-<b>NULL</b> — which may be used as a reference to the name
       request operation. Use <b><a href="../man3/sd_bus_slot_unref.3.html">sd_bus_slot_unref</a></b>(3) to destroy this reference. Note that destroying the reference
       will not unregister the name, but simply ensure the specified callback is no longer called.

       <b>sd_bus_release_name()</b> releases an acquired well-known name. It takes a bus connection and a valid bus
       name as parameters. This function operates synchronously, sending a release request message to the bus
       broker and waiting for it to reply.

       <b>sd_bus_release_name_async()</b> is an asynchronous version of <b>sd_bus_release_name()</b>. The specified <u>callback</u>
       function is called when the name has been released successfully. If specified as <b>NULL</b> a generic
       implementation is used that ignores the result of the operation. As above, the <u>slot</u> (if non-<b>NULL</b>) is set
       to an object that may be used to reference the operation.

       These functions are supported only on bus connections, i.e. connections to a bus broker and not on direct
       connections.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, these calls return 0 or a positive integer. On failure, these calls return a negative
       errno-style error code.

       If <b>SD_BUS_NAME_QUEUE</b> is specified, <b>sd_bus_request_name()</b> will return 0 when the name is already taken by
       another peer and the client has been added to the queue for the name. In that case, the caller can
       subscribe to "NameOwnerChanged" signals to be notified when the name is successfully acquired.
       <b>sd_bus_request_name()</b> returns &gt; 0 when the name has immediately been acquired successfully.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-EALREADY</b>
           The caller already is the owner of the specified name.

       <b>-EEXIST</b>
           The name has already been acquired by a different peer, and SD_BUS_NAME_REPLACE_EXISTING was not
           specified or the other peer did not specify SD_BUS_NAME_ALLOW_REPLACEMENT while acquiring the name.

       <b>-ESRCH</b>
           It was attempted to release a name that is currently not registered on the bus.

       <b>-EADDRINUSE</b>
           It was attempted to release a name that is owned by a different peer on the bus.

       <b>-EINVAL</b>
           A specified parameter is invalid. This is also generated when the requested name is a special service
           name reserved by the D-Bus specification, or when the operation is requested on a connection that
           does not refer to a bus.

       <b>-ENOTCONN</b>
           The bus connection has been disconnected.

       <b>-ECHILD</b>
           The bus connection has been created in a different process than the current one.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_bus_request_name()</b> and <b>sd_bus_release_name()</b> were added in version 209.

       <b>sd_bus_request_name_async()</b> and <b>sd_bus_release_name_async()</b> were added in version 237.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-bus.3.html">sd-bus</a></b>(3), <b><a href="../man3/sd_bus_new.3.html">sd_bus_new</a></b>(3), <b><a href="../man3/sd_bus_slot_unref.3.html">sd_bus_slot_unref</a></b>(3)

systemd 257.7                                                                             <u><a href="../man3/SD_BUS_REQUEST_NAME.3.html">SD_BUS_REQUEST_NAME</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>