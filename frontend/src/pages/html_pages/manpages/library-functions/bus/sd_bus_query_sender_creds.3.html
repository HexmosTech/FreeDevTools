<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_bus_query_sender_creds, sd_bus_query_sender_privilege - Query bus message sender</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_bus_query_sender_creds, sd_bus_query_sender_privilege - Query bus message sender
       credentials/privileges

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-bus.h&gt;</b>

       <b>int</b> <b>sd_bus_query_sender_creds(sd_bus_message</b> <b>*</b><u>m</u><b>,</b> <b>uint64_t</b> <u>mask</u><b>,</b> <b>sd_bus_creds</b> <b>**</b><u>creds</u><b>);</b>

       <b>sd_bus_error*</b> <b>sd_bus_query_sender_privilege(sd_bus_message</b> <b>*</b><u>m</u><b>,</b> <b>int</b> <u>capability</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_bus_query_sender_creds()</b> returns the credentials of the message <u>m</u>. The <u>mask</u> parameter is a combo of
       <b>SD_BUS_CREDS_*</b> flags that indicate which credential info the caller is interested in. See
       <b><a href="../man3/sd_bus_creds_new_from_pid.3.html">sd_bus_creds_new_from_pid</a></b>(3) for a list of possible flags. First, this message checks if the requested
       credentials are attached to the message itself. If not, but the message contains the pid of the sender
       and the caller specified the <b>SD_BUS_CREDS_AUGMENT</b> flag, this function tries to figure out the missing
       credentials via other means (starting from the pid). If the PID is not available but the message has a
       sender, this function calls <b><a href="../man3/sd_bus_get_name_creds.3.html">sd_bus_get_name_creds</a></b>(3) to get the requested credentials. If the message has
       no sender (when a direct connection is used), this function calls <b><a href="../man3/sd_bus_get_owner_creds.3.html">sd_bus_get_owner_creds</a></b>(3) to get the
       requested credentials. On success, the requested credentials are stored in <u>creds</u>. Ownership of the
       credentials object in <u>creds</u> is transferred to the caller and should be freed by calling
       <b><a href="../man3/sd_bus_creds_unref.3.html">sd_bus_creds_unref</a></b>(3).

       <b>sd_bus_query_sender_privilege()</b> checks if the message <u>m</u> has the requested privileges. If <u>capability</u> is a
       non-negative integer, this function checks if the message has the capability with the same value. See
       <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7) for a list of capabilities. If <u>capability</u> is a negative integer, this function returns
       whether the sender of the message runs as the same user as the receiver of the message, or if the sender
       of the message runs as root and the receiver of the message does not run as root. On success and if the
       message has the requested privileges, this function returns a positive integer. If the message does not
       have the requested privileges, this function returns zero.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, these functions return a non-negative integer. On failure, they return a negative errno-style
       error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-EINVAL</b>
           The message <u>m</u> or an output parameter is <b>NULL</b>.

           Added in version 246.

       <b>-ENOTCONN</b>
           The bus of <u>m</u> is not connected.

           Added in version 246.

       <b>-ECHILD</b>
           The bus of <u>m</u> was created in a different process, library or module instance.

           Added in version 246.

       <b>-EPERM</b>
           The message <u>m</u> is not sealed.

           Added in version 246.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_bus_query_sender_creds()</b> and <b>sd_bus_query_sender_privilege()</b> were added in version 246.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-bus.3.html">sd-bus</a></b>(3), <b><a href="../man3/sd_bus_creds_new_from_pid.3.html">sd_bus_creds_new_from_pid</a></b>(3), <b><a href="../man3/sd_bus_get_name_creds.3.html">sd_bus_get_name_creds</a></b>(3), <b><a href="../man3/sd_bus_get_owner_creds.3.html">sd_bus_get_owner_creds</a></b>(3),
       <b><a href="../man3/sd_bus_creds_unref.3.html">sd_bus_creds_unref</a></b>(3), <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7)

systemd 257.7                                                                       <u><a href="../man3/SD_BUS_QUERY_SENDER_CREDS.3.html">SD_BUS_QUERY_SENDER_CREDS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>