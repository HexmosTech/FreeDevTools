<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_bus_close, sd_bus_flush, sd_bus_default_flush_close - Close and flush a bus connection</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_bus_close, sd_bus_flush, sd_bus_default_flush_close - Close and flush a bus connection

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-bus.h&gt;</b>

       <b>void</b> <b>sd_bus_close(sd_bus</b> <b>*</b><u>bus</u><b>);</b>

       <b>int</b> <b>sd_bus_flush(sd_bus</b> <b>*</b><u>bus</u><b>);</b>

       <b>void</b> <b>sd_bus_default_flush_close(void);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_bus_close()</b> disconnects the specified bus connection. When this call is invoked and the specified bus
       object refers to an active connection it is immediately terminated. No further messages may be sent or
       received on it. Any messages queued in the bus object (both incoming and outgoing) are released. If
       invoked on <b>NULL</b> bus object or when the bus connection is already closed this function executes no
       operation. This call does not free or unreference the bus object itself. Use <b><a href="../man3/sd_bus_unref.3.html">sd_bus_unref</a></b>(3) for that.

       <b>sd_bus_flush()</b> synchronously writes out all outgoing queued message on a bus connection if there are any.
       This function call may block if the peer is not processing bus messages quickly.

       Before a program exits it is usually a good idea to flush any pending messages with <b>sd_bus_flush()</b> and
       then close connections with <b>sd_bus_close()</b> to ensure that no unwritten messages are lost, no further
       messages may be queued and all incoming but unprocessed messages are released. After both operations have
       been done, it is a good idea to also drop any remaining references to the bus object so that it may be
       freed. Since these three operations are frequently done together a helper call
       <b><a href="../man3/sd_bus_flush_close_unref.3.html">sd_bus_flush_close_unref</a></b>(3) is provided that combines them into one.

       <b>sd_bus_default_flush_close()</b> is similar to <b>sd_bus_flush_close_unref()</b>, but does not take a bus pointer
       argument and instead iterates over any of the "default" buses opened by <b><a href="../man3/sd_bus_default.3.html">sd_bus_default</a></b>(3),
       <b><a href="../man3/sd_bus_default_user.3.html">sd_bus_default_user</a></b>(3), <b><a href="../man3/sd_bus_default_system.3.html">sd_bus_default_system</a></b>(3), and similar calls.  <b>sd_bus_default_flush_close()</b> is
       particularly useful to clean up any buses opened using those calls before the program exits.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>sd_bus_flush()</b> returns a non-negative integer. On failure, it returns a negative errno-style
       error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-ECHILD</b>
           The bus connection has been created in a different process, library or module instance.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_bus_close()</b> and <b>sd_bus_flush()</b> were added in version 221.

       <b>sd_bus_default_flush_close()</b> was added in version 227.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-bus.3.html">sd-bus</a></b>(3), <b><a href="../man3/sd_bus_unref.3.html">sd_bus_unref</a></b>(3), <b><a href="../man3/sd_bus_set_close_on_exit.3.html">sd_bus_set_close_on_exit</a></b>(3)

systemd 257.7                                                                                    <u><a href="../man3/SD_BUS_CLOSE.3.html">SD_BUS_CLOSE</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>