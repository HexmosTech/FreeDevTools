<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sd_bus_send, sd_bus_send_to, sd_bus_message_send - Queue a D-Bus message for transfer</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsystemd-dev">libsystemd-dev_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sd_bus_send, sd_bus_send_to, sd_bus_message_send - Queue a D-Bus message for transfer

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;systemd/sd-bus.h&gt;</b>

       <b>int</b> <b>sd_bus_send(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_bus_message</b> <b>*</b><u>m</u><b>,</b> <b>uint64_t</b> <b>*</b><u>cookie</u><b>);</b>

       <b>int</b> <b>sd_bus_send_to(sd_bus</b> <b>*</b><u>bus</u><b>,</b> <b>sd_bus_message</b> <b>*</b><u>m</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>destination</u><b>,</b> <b>uint64_t</b> <b>*</b><u>cookie</u><b>);</b>

       <b>int</b> <b>sd_bus_message_send(sd_bus_message</b> <b>*</b><u>m</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sd_bus_send()</b> queues the bus message object <u>m</u> for transfer. If <u>bus</u> is <b>NULL</b>, the bus that <u>m</u> is attached to
       is used.  <u>bus</u> only needs to be set when the message is sent to a different bus than the one it is
       attached to, for example when forwarding messages. If the output parameter <u>cookie</u> is not <b>NULL</b>, it is set
       to the message identifier. This value can later be used to match incoming replies to their corresponding
       messages. If <u>cookie</u> is set to <b>NULL</b> and the message is not sealed, <b>sd_bus_send()</b> assumes the message <u>m</u>
       does not expect a reply and adds the necessary headers to indicate this.

       Note that in most scenarios, <b>sd_bus_send()</b> should not be called directly. Instead, use higher level
       functions such as <b><a href="../man3/sd_bus_call_method.3.html">sd_bus_call_method</a></b>(3) and <b><a href="../man3/sd_bus_reply_method_return.3.html">sd_bus_reply_method_return</a></b>(3) which call <b>sd_bus_send()</b>
       internally.

       <b>sd_bus_send_to()</b> is a shorthand for sending a message to a specific destination. It's main use case is to
       simplify sending unicast signal messages (signals that only have a single receiver). It's behavior is
       similar to calling <b><a href="../man3/sd_bus_message_set_destination.3.html">sd_bus_message_set_destination</a></b>(3) followed by calling <b>sd_bus_send()</b>.

       <b>sd_bus_send()</b>/<b>sd_bus_send_to()</b> will write the message directly to the underlying transport (e.g. kernel
       socket buffer) if possible. If the connection is not set up fully yet the message is queued locally. If
       the transport buffers are congested any unwritten message data is queued locally, too. If the connection
       has been closed or is currently being closed the call fails.  <b><a href="../man3/sd_bus_process.3.html">sd_bus_process</a></b>(3) should be invoked to
       write out any queued message data to the transport.

       <b>sd_bus_message_send()</b> is the same as <b>sd_bus_send()</b> but without the first and last argument.
       <b><a href="../manm/sd_bus_message_send.m.html">sd_bus_message_send</a>(m)</b> is equivalent to <b>sd_bus_send(<a href="../manm/sd_bus_message_get_bus.m.html">sd_bus_message_get_bus</a>(m),</b> <b>m,</b> <b>NULL)</b>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, these functions return a non-negative integer. On failure, they return a negative errno-style
       error code.

   <b>Errors</b>
       Returned errors may indicate the following problems:

       <b>-EINVAL</b>
           The input parameter <u>m</u> is <b>NULL</b>.

           Added in version 246.

       <b>-EOPNOTSUPP</b>
           The bus connection does not support sending file descriptors.

           Added in version 246.

       <b>-ECHILD</b>
           The bus connection was allocated in a parent process and is being reused in a child process after
           <b>fork()</b>.

           Added in version 246.

       <b>-ENOBUFS</b>
           The bus connection's write queue is full.

           Added in version 246.

       <b>-ENOTCONN</b>
           The input parameter <u>bus</u> is <b>NULL</b> or the bus is not connected.

           Added in version 246.

       <b>-ECONNRESET</b>
           The bus connection was closed while waiting for the response.

           Added in version 246.

       <b>-ENOMEM</b>
           Memory allocation failed.

           Added in version 246.

</pre><h4><b>NOTES</b></h4><pre>
       Functions described here are available as a shared library, which can be compiled against and linked to
       with the <b>libsystemd</b> <b><a href="../man1/pkg-config.1.html">pkg-config</a></b>(1) file.

       The code described here uses <b><a href="../man3/getenv.3.html">getenv</a></b>(3), which is declared to be not multi-thread-safe. This means that
       the code calling the functions described here must not call <b><a href="../man3/setenv.3.html">setenv</a></b>(3) from a parallel thread. It is
       recommended to only do calls to <b>setenv()</b> from an early phase of the program when no other threads have
       been started.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>sd_bus_send()</b> and <b>sd_bus_send_to()</b> were added in version 246.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man3/sd-bus.3.html">sd-bus</a></b>(3), <b><a href="../man3/sd_bus_call_method.3.html">sd_bus_call_method</a></b>(3), <b><a href="../man3/sd_bus_message_set_destination.3.html">sd_bus_message_set_destination</a></b>(3),
       <b><a href="../man3/sd_bus_reply_method_return.3.html">sd_bus_reply_method_return</a></b>(3), <b><a href="../man3/sd_bus_process.3.html">sd_bus_process</a></b>(3)

systemd 257.7                                                                                     <u><a href="../man3/SD_BUS_SEND.3.html">SD_BUS_SEND</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>