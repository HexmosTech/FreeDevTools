<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       pthread_join — wait for thread termination

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/pthread.h">pthread.h</a>&gt;

       int pthread_join(pthread_t <u>thread</u>, void **<u>value_ptr</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>pthread_join</u>()  function  shall  suspend  execution  of  the  calling thread until the target <u>thread</u>
       terminates, unless the target <u>thread</u> has already terminated. On return from a  successful  <u>pthread_join</u>()
       call  with  a  non-NULL  <u>value_ptr</u> argument, the value passed to <u>pthread_exit</u>() by the terminating thread
       shall be made available  in  the  location  referenced  by  <u>value_ptr</u>.   When  a  <u>pthread_join</u>()  returns
       successfully,  the  target  thread  has  been  terminated.  The results of multiple simultaneous calls to
       <u>pthread_join</u>() specifying the same target thread are undefined. If the thread calling  <u>pthread_join</u>()  is
       canceled, then the target thread shall not be detached.

       It   is   unspecified   whether   a   thread   that  has  exited  but  remains  unjoined  counts  against
       {PTHREAD_THREADS_MAX}.

       The behavior is undefined if the value specified by the <u>thread</u> argument to <u>pthread_join</u>() does not  refer
       to a joinable thread.

       The  behavior  is undefined if the value specified by the <u>thread</u> argument to <u>pthread_join</u>() refers to the
       calling thread.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       If successful, the <u>pthread_join</u>() function shall  return  zero;  otherwise,  an  error  number  shall  be
       returned to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>pthread_join</u>() function may fail if:

       <b>EDEADLK</b>
              A deadlock was detected.

       The <u>pthread_join</u>() function shall not return an error code of <b>[EINTR]</b>.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       An example of thread creation and deletion follows:

           typedef struct {
               int *ar;
               long n;
           } subarray;

           void *
           incer(void *arg)
           {
               long i;

               for (i = 0; i &lt; ((subarray *)arg)-&gt;n; i++)
                   ((subarray *)arg)-&gt;ar[i]++;
           }

           int main(void)
           {
               int        ar[1000000];
               pthread_t  th1, th2;
               subarray   sb1, sb2;

               sb1.ar = &amp;ar[0];
               sb1.n  = 500000;
               (void) pthread_create(&amp;th1, NULL, incer, &amp;sb1);

               sb2.ar = &amp;ar[500000];
               sb2.n  = 500000;
               (void) pthread_create(&amp;th2, NULL, incer, &amp;sb2);

               (void) pthread_join(th1, NULL);
               (void) pthread_join(th2, NULL);
               return 0;
           }

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       The <u>pthread_join</u>() function is a convenience that has proven useful in multi-threaded applications. It is
       true  that  a  programmer  could simulate this function if it were not provided by passing extra state as
       part of the argument to the <u>start_routine</u>().  The  terminating  thread  would  set  a  flag  to  indicate
       termination  and  broadcast  a  condition that is part of that state; a joining thread would wait on that
       condition variable. While such a technique would allow a thread to wait on more complex  conditions  (for
       example,  waiting  for  multiple  threads  to  terminate),  waiting  on  individual thread termination is
       considered widely useful. Also, including the <u>pthread_join</u>() function in no way  precludes  a  programmer
       from  coding  such complex waits. Thus, while not a primitive, including <u>pthread_join</u>() in this volume of
       POSIX.1‐2017 was considered valuable.

       The <u>pthread_join</u>() function provides a simple mechanism allowing an application to wait for a  thread  to
       terminate.  After  the thread terminates, the application may then choose to clean up resources that were
       used by the thread. For instance, after <u>pthread_join</u>() returns, any  application-provided  stack  storage
       could be reclaimed.

       The  <u>pthread_join</u>()  or  <u>pthread_detach</u>()  function  should eventually be called for every thread that is
       created with the <u>detachstate</u> attribute set to PTHREAD_CREATE_JOINABLE so that storage associated with the
       thread may be reclaimed.

       The interaction between <u>pthread_join</u>() and cancellation is well-defined for the following reasons:

        *  The <u>pthread_join</u>() function, like all other non-async-cancel-safe functions, can only be called  with
           deferred cancelability type.

        *  Cancellation cannot occur in the disabled cancelability state.

       Thus,  only  the  default cancelability state need be considered. As specified, either the <u>pthread_join</u>()
       call is canceled, or it succeeds, but not both. The difference  is  obvious  to  the  application,  since
       either  a  cancellation  handler  is  run  or  <u>pthread_join</u>() returns. There are no race conditions since
       <u>pthread_join</u>() was called in the deferred cancelability state.

       If an implementation detects that the value specified by the <u>thread</u> argument to <u>pthread_join</u>()  does  not
       refer to a joinable thread, it is recommended that the function should fail and report an <b>[EINVAL]</b> error.

       If  an implementation detects that the value specified by the <u>thread</u> argument to <u>pthread_join</u>() refers to
       the calling thread, it is recommended that the function should fail and report an <b>[EDEADLK]</b> error.

       If an implementation detects use of a thread ID after the end of its lifetime, it is recommended that the
       function should fail and report an <b>[ESRCH]</b> error.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>pthread_create</u>(), <u>wait</u>()

       The Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>4.12</u>, <u>Memory</u> <u>Synchronization</u>, <b>&lt;pthread.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                  <u><a href="../man3POSIX/PTHREAD_JOIN.3POSIX.html">PTHREAD_JOIN</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>