<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       pthread_create — thread creation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/pthread.h">pthread.h</a>&gt;

       int pthread_create(pthread_t *restrict <u>thread</u>,
           const pthread_attr_t *restrict <u>attr</u>,
           void *(*<u>start_routine</u>)(void*), void *restrict <u>arg</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>pthread_create</u>()  function  shall  create  a new thread, with attributes specified by <u>attr</u>, within a
       process. If <u>attr</u> is NULL, the default attributes shall be used. If the attributes specified by  <u>attr</u>  are
       modified   later,   the   thread's  attributes  shall  not  be  affected.   Upon  successful  completion,
       <u>pthread_create</u>() shall store the ID of the created thread in the location referenced by <u>thread</u>.

       The thread is created executing <u>start_routine</u> with  <u>arg</u>  as  its  sole  argument.  If  the  <u>start_routine</u>
       returns, the effect shall be as if there was an implicit call to <u>pthread_exit</u>() using the return value of
       <u>start_routine</u>  as  the  exit  status. Note that the thread in which <u>main</u>() was originally invoked differs
       from this. When it returns from <u>main</u>(), the effect shall be as if there was an implicit  call  to  <u>exit</u>()
       using the return value of <u>main</u>() as the exit status.

       The signal state of the new thread shall be initialized as follows:

        *  The signal mask shall be inherited from the creating thread.

        *  The set of signals pending for the new thread shall be empty.

       The thread-local current locale and the alternate stack shall not be inherited.

       The floating-point environment shall be inherited from the creating thread.

       If <u>pthread_create</u>() fails, no new thread is created and the contents of the location referenced by <u>thread</u>
       are undefined.

       If  _POSIX_THREAD_CPUTIME  is  defined,  the  new  thread shall have a CPU-time clock accessible, and the
       initial value of this clock shall be set to zero.

       The behavior is undefined if the value specified by the <u>attr</u> argument to <u>pthread_create</u>() does not  refer
       to an initialized thread attributes object.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       If  successful,  the  <u>pthread_create</u>()  function  shall  return zero; otherwise, an error number shall be
       returned to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>pthread_create</u>() function shall fail if:

       <b>EAGAIN</b> The system lacked the necessary resources to create another thread, or the system-imposed limit on
              the total number of threads in a process {PTHREAD_THREADS_MAX} would be exceeded.

       <b>EPERM</b>  The caller does not have appropriate privileges to  set  the  required  scheduling  parameters  or
              scheduling policy.

       The <u>pthread_create</u>() function shall not return an error code of <b>[EINTR]</b>.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       There  is  no requirement on the implementation that the ID of the created thread be available before the
       newly created thread starts executing. The calling thread can obtain the ID of the created thread through
       the <u>thread</u> argument of the <u>pthread_create</u>() function, and the newly created thread can obtain its ID by a
       call to <u>pthread_self</u>().

</pre><h4><b>RATIONALE</b></h4><pre>
       A suggested alternative to <u>pthread_create</u>() would be to define two separate operations: create and start.
       Some applications would find such behavior more natural. Ada, in particular, separates  the  ``creation''
       of a task from its ``activation''.

       Splitting the operation was rejected by the standard developers for many reasons:

        *  The  number  of  calls  required  to  start a thread would increase from one to two and thus place an
           additional burden on applications that do not require  the  additional  synchronization.  The  second
           call, however, could be avoided by the additional complication of a start-up state attribute.

        *  An  extra  state would be introduced: ``created but not started''. This would require the standard to
           specify the behavior of the thread operations when the target has not yet started executing.

        *  For those applications that require such behavior, it is possible to simulate the two separate  steps
           with  the facilities that are currently provided. The <u>start_routine</u>() can synchronize by waiting on a
           condition variable that is signaled by the start operation.

       An Ada implementor can choose to create the thread at either of two points in the Ada program:  when  the
       task  object  is created, or when the task is activated (generally at a ``begin''). If the first approach
       is adopted, the <u>start_routine</u>() needs to wait on a condition variable  to  receive  the  order  to  begin
       ``activation''.  The  second  approach  requires  no such condition variable or extra synchronization. In
       either approach, a separate Ada task control block would need to be  created  when  the  task  object  is
       created to hold rendezvous queues, and so on.

       An  extension of the preceding model would be to allow the state of the thread to be modified between the
       create and start. This would allow the thread attributes object to be eliminated. This has been  rejected
       because:

        *  All state in the thread attributes object has to be able to be set for the thread. This would require
           the definition of functions to modify thread attributes. There would be no reduction in the number of
           function  calls  required  to set up the thread. In fact, for an application that creates all threads
           using identical attributes, the number of function calls required to set  up  the  threads  would  be
           dramatically  increased. Use of a thread attributes object permits the application to make one set of
           attribute setting function calls.  Otherwise, the set of attribute setting function calls needs to be
           made for each thread creation.

        *  Depending on the implementation architecture, functions to set  thread  state  would  require  kernel
           calls,  or  for  other  implementation reasons would not be able to be implemented as macros, thereby
           increasing the cost of thread creation.

        *  The ability for applications to segregate threads by class would be lost.

       Another suggested alternative uses a model similar to that for process creation, such as ``thread fork''.
       The fork semantics would provide more flexibility and the ``create'' function can be  implemented  simply
       by  doing  a  thread fork followed immediately by a call to the desired ``start routine'' for the thread.
       This alternative has these problems:

        *  For many implementations, the entire stack of the calling thread would need to be  duplicated,  since
           in many architectures there is no way to determine the size of the calling frame.

        *  Efficiency  is  reduced  since  at least some part of the stack has to be copied, even though in most
           cases the thread never needs the copied context, since it merely calls the desired start routine.

       If an implementation detects that the value specified by the <u>attr</u> argument to <u>pthread_create</u>()  does  not
       refer  to  an  initialized  thread attributes object, it is recommended that the function should fail and
       report an <b>[EINVAL]</b> error.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>fork</u>(), <u>pthread_exit</u>(), <u>pthread_join</u>()

       The Base Definitions volume of POSIX.1‐2017, <u>Section</u> <u>4.12</u>, <u>Memory</u> <u>Synchronization</u>, <b>&lt;pthread.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group  Base
       Specifications  Issue  7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical and Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE and The Open Group Standard, the original IEEE and The Open Group Standard is the referee  document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any  typographical  or formatting errors that appear in this page are most likely to have been introduced
       during  the  conversion  of  the  source  files  to  man  page  format.  To  report  such   errors,   see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                <u><a href="../man3POSIX/PTHREAD_CREATE.3POSIX.html">PTHREAD_CREATE</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>