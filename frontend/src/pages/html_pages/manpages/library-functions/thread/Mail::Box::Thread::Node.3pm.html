<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::Box::Thread::Node - one node in a message thread</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-box-perl">libmail-box-perl_3.011-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::Box::Thread::Node - one node in a message thread

</pre><h4><b>INHERITANCE</b></h4><pre>
        Mail::Box::Thread::Node
          is a Mail::Reporter

</pre><h4><b>SYNOPSIS</b></h4><pre>
        my $node = Mail::Box::Thread::Node-&gt;new;
        $node-&gt;addMessage($message);
        ...

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The "Mail::Box::Thread::Node" maintains one node in the linked list of threads.  Each node contains one
       message, and a list of its follow-ups.  Next to that, it refers to its own ancestor and contains
       information about the trustworthiness of that relationship.

       To complicate things a little, because the thread-manager can maintain multiple folders, and merge there
       content, you may find the same message in more folders.  All versions of the same message (based on
       message-id) are stored in the same node.

       Extends "DESCRIPTION" in Mail::Reporter.

</pre><h4><b>METHODS</b></h4><pre>
       Extends "METHODS" in Mail::Reporter.

   <b>Constructors</b>
       Extends "Constructors" in Mail::Reporter.

       Mail::Box::Thread::Node-&gt;<b>new</b>(%options)
           You  will  not  call  this  method  yourself.  The  Mail::Box::Thread::Manager object will call it to
           construct "Mail::Box::Thread::Node" objects.  Either a "message" or a "messageId" must be supplied.

            -Option    --Defined in     --Default
             dummy_type                   undef
             log         Mail::Reporter   'WARNINGS'
             message                      undef
             messageId                    undef
             trace       Mail::Reporter   'WARNINGS'

           dummy_type =&gt; CLASS
             Indicates  the  class  name  of  dummy   messages.   Dummy   messages   are   placeholders   in   a
             Mail::Box::Thread::Manager data structure.

           log =&gt; LEVEL
           message =&gt; MESSAGE
             The MESSAGE which is stored in this node.  The message must be a Mail::Box::Message.

           messageId =&gt; MESSAGE-ID
             The  MESSAGE-ID  for the message which is stored in this node.  Only specify it when you don't have
             the message yet.

           trace =&gt; LEVEL

   <b>The</b> <b>thread</b> <b>node</b>
       $obj-&gt;<b>addMessage</b>($message)
           Add one message to the thread node.  If the node contains  a  dummy,  then  the  dummy  is  replaced.
           Otherwise, the messages is added to the end of the list.

       $obj-&gt;<b>expand</b>( [BOOLEAN] )
           Returns  whether this (part of the) folder has to be shown expanded or not.  This is simply done by a
           label, which means that most folder types can store this.

       $obj-&gt;<b>isDummy</b>()
           Returns true if the message is a dummy. A dummy is a "hole" in a thread which has follow-ups but does
           not have a message.

       $obj-&gt;<b>message</b>()
           Get the message which is stored in this thread node.  NOTE: the same message may be located  in  many
           folders at the same time, and these folders may be controlled by the same thread manager.

           In  scalar context, this method returns the first instance of the message that is not deleted. If all
           instances are flagged for deletion, then you get the first deleted message.  When  the  open  folders
           only   contain   references  to  the  message,  but  no  instance,  you  get  a  dummy  message  (see
           Mail::Message::Dummy).

           In list context, all instances of the message which have been found are returned.

           example:

            my $threads = $mgr-&gt;threads(folders =&gt; [$draft, $sent]);
            my $node    = $draft-&gt;<a href="../man1/message.1.html">message</a>(1)-&gt;thread;

            foreach my $instance ($node-&gt;message) {
               print "Found in ", $instance-&gt;folder, ".\n";
            }

            print "Subject is ", $node-&gt;message-&gt;subject, ".\n";

       $obj-&gt;<b>messageId</b>()
           Return the message-id related to this thread node.  Each of the messages listed  in  this  node  will
           have the same ID.

   <b>The</b> <b>thread</b> <b>order</b>
       $obj-&gt;<b>followUps</b>()
           Returns  the  list  of follow-ups to this thread node.  This list may contain parsed, not-parsed, and
           dummy messages.

       $obj-&gt;<b>followedBy</b>($threads)
           Register that the $threads are follow-ups to this message. These follow-ups need not  be  related  to
           each other in any way other than sharing the same parent.

           Defining the same relation more than once will not cause information to be duplicated.

       $obj-&gt;<b>follows</b>($thread, $quality)
           Register that the current thread is a reply to the specified $thread. The $quality of the relation is
           specified by the second argument.  The method returns "undef" if the link is not accepted in order to
           avoid circular references.

           The  relation  may  be  specified  more  than once, but only the most confident relation is used. For
           example, if a reply ($quality equals "REPLY") is specified, later calls to  the  follow  method  will
           have  no  effect.  If  "follows"  is called with a $quality that matches the current quality, the new
           thread overrides the previous.

       $obj-&gt;<b>repliedTo</b>()
           Returns the message(s) to which the message in this node replies. In scalar context, this method will
           return the message to which the message in this node replies. This message  object  may  be  a  dummy
           message.

           If  the  message seems to be the first message of a thread, the value "undef" is returned.  (Remember
           that some MUA are not adding reference information to the message's header, so you can never be  sure
           a message is the start of a thread)

           In  list  context,  this  method  returns  a  second  string value indicating the confidence that the
           messages are related.  When extended thread discovery is enabled, then some heuristics are applied to
           determine if messages are related. Values for the STRING may be:

           •   'REPLY'

               This relation was directly derived from an `in-reply-to' message header field. The relation has a
               high confidence.

           •   'REFERENCE'

               This relation is based on information found in a `Reference' message header field.   One  message
               may  reference  a  list  of  messages  which  precede it in the thread. The heuristic attempts to
               determine relationships between messages  assuming  that  the  references  are  in  order.   This
               relation has a lower confidence.

           •   'GUESS'

               The relation is a big guess, with low confidence.  It may be based on a subject which seems to be
               related, or commonalities in the message's body.

           More constants may be added later.

           example:

            my $question = $answer-&gt;repliedTo;
            my ($question, $quality) = $answer-&gt;repliedTo;
            if($question &amp;&amp; $quality eq 'REPLY') { ... };

       $obj-&gt;<b>sortedFollowUps</b>( [$prepare, [$compare]] )
           Returns  the  list  of <b>followUps()</b>, but sorted.  By default sorting is based on the estimated time of
           the reply. See <b>startTimeEstimate()</b>.

   <b>On</b> <b>the</b> <b>whole</b> <b>thread</b>
       Some convenience methods are added to threads, to simplify retrieving information from it.

       $obj-&gt;<b>endTimeEstimate</b>()
           Returns a guess as to when the thread has ended (although you never know for sure whether there  fill
           follow messages in the future).

       $obj-&gt;<b>ids</b>()
           Returns all the ids in the thread starting at the current thread node.

           example:

            $newfolder-&gt;addMessages($folder-&gt;ids($thread-&gt;ids));
            $folder-&gt;delete($thread-&gt;ids);

       $obj-&gt;<b>numberOfMessages</b>()
           Number of messages in the thread starting at the current thread node, but not counting the dummies.

       $obj-&gt;<b>recurse</b>(CODE)
           Execute  a  function  for  all  sub-threads.  If the subroutine returns true, sub-threads are visited
           recursively. Otherwise, the current branch traversal is aborted.  The  routine  is  called  with  the
           thread-node as the only argument.

       $obj-&gt;<b>startTimeEstimate</b>()
           Returns a guess as to when the thread was started.  Each message contains various date specifications
           (each  with various uncertainties resulting from timezones and out-of-sync clocks). One of these date
           specifications is used as the timestamp for the message. If the node contains  a  dummy  message  the
           lowest  timestamp of the replies is returned. Otherwise the estimated timestamp of the node's message
           is returned.

       $obj-&gt;<b>threadMessages</b>()
           Returns all the messages in the thread starting at the current  thread  node.   This  list  will  not
           include dummies.

           example:

            my @t = $folder-&gt;<a href="../man3/message.3.html">message</a>(3)
                           -&gt;threadStart
                           -&gt;threadMessages;

       $obj-&gt;<b>threadToString</b>( [CODE] )
           Translate  a  thread  into a string. The string will contain at least one line for each message which
           was found, but tries to fold dummies.  This is useful for debugging, but most  message  readers  will
           prefer to implement their own thread printer.

           The  optional  CODE argument is a reference to a routine which will be called for each message in the
           thread.  The routine will be called with the message as the first argument.  The  default  shows  the
           subject of the message.  In the first example below, this routine is called seven times.

           example:

            print $node-&gt;threadToString;

           may result in

            Subject of this message
            |- Re: Subject of this message
            |-*- Re: Re: Subject of this message
            | |- <a href="../man2/Re.2.html">Re</a>(2) Subject of this message
            | |- [3] <a href="../man2/Re.2.html">Re</a>(2) Subject of this message
            | `- Re: Subject of this message (reply)
            `- Re: Subject of this message

           The  `*'  represents  a missing message (a "dummy" message).  The `[3]' presents a folded thread with
           three messages.

            print $node-&gt;threadToString(\&amp;show);

            sub show($) {
               my $message = shift;
               my $subject = $message-&gt;head-&gt;get('subject');
               length $subject ? $subject : '&lt;no subject&gt;';
            }

       $obj-&gt;<b>totalSize</b>()
           Returns the sum of the size of all the messages in the thread.

   <b>Error</b> <b>handling</b>
       Extends "Error handling" in Mail::Reporter.

       $obj-&gt;<b>AUTOLOAD</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>addReport</b>($object)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
       Mail::Box::Thread::Node-&gt;<b>defaultTrace</b>( [$level]|[$loglevel, $tracelevel]|[$level, $callback] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>errors</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>log</b>( [$level, [$strings]] )
       Mail::Box::Thread::Node-&gt;<b>log</b>( [$level, [$strings]] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logPriority</b>($level)
       Mail::Box::Thread::Node-&gt;<b>logPriority</b>($level)
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>logSettings</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>notImplemented</b>()
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>report</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>reportAll</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>trace</b>( [$level] )
           Inherited, see "Error handling" in Mail::Reporter

       $obj-&gt;<b>warnings</b>()
           Inherited, see "Error handling" in Mail::Reporter

   <b>Cleanup</b>
       Extends "Cleanup" in Mail::Reporter.

       $obj-&gt;<b>DESTROY</b>()
           Inherited, see "Cleanup" in Mail::Reporter

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Error: Package $package does not implement $method.
           Fatal error: the specific package (or one of its superclasses) does not implement this  method  where
           it  should.  This  message means that some other related classes do implement this method however the
           class at hand does not.  Probably you should investigate this and probably inform the author  of  the
           package.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This  module  is  part  of  Mail-Box  distribution  version  3.011,  built  on  April  18, 2025. Website:
       <u><a href="http://perl.overmeer.net/CPAN/">http://perl.overmeer.net/CPAN/</a></u>

</pre><h4><b>LICENSE</b></h4><pre>
       Copyrights 2001-2025 by [Mark Overmeer]. For other contributors see ChangeLog.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.  See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-04-25                       <u>Mail::Box::Thread::<a href="../man3pm/Node.3pm.html">Node</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>