<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>globus_thread - Threading</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libglobus-common-doc">libglobus-common-doc_18.14-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       globus_thread - Threading

        - Portable Thread Abstraction.

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Modules</b>
       <b>Mutual</b> <b>Exclusion</b>
           Mutual Exclusion.
       <b>Condition</b> <b>Variables</b>
           Condition Variables.
       <b>Thread-Specific</b> <b>Storage</b>
           Thread-Specific Storage.
       <b>One-time</b> <b>execution</b>
           One-time execution.

   <b>Data</b> <b>Structures</b>
       union <b>globus_thread_t</b>
           Thread ID.
       union <b>globus_threadattr_t</b>
           Thread attributes.
       union <b>globus_thread_key_t</b>
           Thread-specific data key.

   <b>Macros</b>
       #define <b>GLOBUS_THREAD_CANCEL_DISABLE</b>   0
           Disable thread cancellation value.
       #define <b>GLOBUS_THREAD_CANCEL_ENABLE</b>   1
           Enable thread cancellation value.
       #define <b>GLOBUS_THREAD_MODULE</b>
           Thread Module.

   <b>Typedefs</b>
       typedef void(* <b>globus_thread_key_destructor_func_t</b>) (void *value)
           Thread-specific data destructor.

   <b>Functions</b>
       int <b>globus_thread_set_model</b> (const char *model)
           Select threading model for an application.
       int <b>globus_thread_create</b> (<b>globus_thread_t</b> *thread, <b>globus_threadattr_t</b> *attr, globus_thread_func_t func,
           void *user_arg)
           Create a new thread.
       void <b>globus_thread_yield</b> (void)
           Yield execution to another thread.
       void <b>globus_thread_exit</b> (void *value)
           Terminate the current thread.
       int <b>globus_thread_sigmask</b> (int how, const sigset_t *new_mask, sigset_t *old_mask)
           Modify the current thread's signal mask.
       int <b>globus_thread_kill</b> (<b>globus_thread_t</b> thread, int sig)
           Send a signal to a thread.
       <b>globus_thread_t</b> <b>globus_thread_self</b> (void)
           Determine the current thread's ID.
       <b>globus_bool_t</b> <b>globus_thread_equal</b> (<b>globus_thread_t</b> thread1, <b>globus_thread_t</b> thread2)
           Check whether thread identifiers match.
       <b>globus_bool_t</b> <b>globus_thread_preemptive_threads</b> (void)
           Indicate whether the active thread model supports preemption.
       <b>globus_bool_t</b> <b>globus_i_am_only_thread</b> (void)
           Determine if threads are supported.
       void * <b>globus_thread_cancellable_func</b> (void *(*func)(void *), void *arg, void(*cleanup_func)(void *),
           void *cleanup_arg, <b>globus_bool_t</b> execute_cleanup)
           Execute a function with thread cleanup in case of cancellation.
       int <b>globus_thread_cancel</b> (<b>globus_thread_t</b> thr)
           Cancel a thread.
       void <b>globus_thread_testcancel</b> (void)
           Thread cancellation point.
       int <b>globus_thread_setcancelstate</b> (int state, int *oldstate)
           Set the thread's cancellable state.

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Portable Thread Abstraction.

       The Globus runtime includes support for portably creating threads on POSIX and Windows systems. It also
       provides a callback-driven system for applications that may use threads but don't require them. The
       Globus Thread API is modeled closely after the POSIX threads API.

       Applications can choose whether to run as threaded or non-threaded at runtime by either setting the
       GLOBUS_THREAD_MODEL environment variable or calling the <b>globus_thread_set_model()</b> function prior to
       activating any Globus modules.

       The Globus thread system provides primitives for mutual exclusion (<b>globus_mutex_t</b>, <b>globus_rmutex_t</b>,
       globus_rw_mutex_t), event synchronization (<b>globus_cond_t</b>), one-time execution (globus_once_t), and
       threading (<b>globus_thread_t</b>).

       In non-threaded operation, <b>globus_cond_wait()</b> and its variants will poll the callback queue and I/O
       system to allow event-driven programs to run in the absence of threads. The <b>globus_thread_create()</b>
       function will fail in that model. Other primitive operations will return success but not provide any
       thread exclusion as there is only one thread.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>GLOBUS_THREAD_CANCEL_DISABLE</b>   <b>0</b>
       Disable thread cancellation value.

       <b>See</b> <b>also</b>
           <b>globus_thread_setcancelstate()</b>

   <b>#define</b> <b>GLOBUS_THREAD_CANCEL_ENABLE</b>   <b>1</b>
       Enable thread cancellation value.

       <b>See</b> <b>also</b>
           <b>globus_thread_setcancelstate()</b>

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>globus_bool_t</b> <b>globus_i_am_only_thread</b> <b>(void)</b>
       Determine if threads are supported. The <b>globus_i_am_only_thread()</b> function determines whether multiple
       threads may be running in this process.

       <b>Returns</b>
           The <b>globus_i_am_only_thread()</b> function returns GLOBUS_TRUE if the current thread model is the 'none'
           thread model; GLOBUS_FALSE otherwise.

   <b>int</b> <b>globus_thread_cancel</b> <b>(globus_thread_t</b> <b>thr)</b>
       Cancel a thread. The <b>globus_thread_cancel()</b> function cancels the thread with the identifier <u>thr</u> if it is
       still executing. If it is running with a cancellation cleanup stack, the functions in that stack are
       executed. The target thread's cancel state determines when the cancellation is delivered.

       <b>Parameters</b>
           <u>thr</u> The id of the thread to cancel

       <b>Returns</b>
           On success, the <b>globus_thread_cancel()</b> function delivers the cancellation to the target thread and
           returns GLOBUS_SUCCESS. If an error occurs, <b>globus_thread_cancel()</b> returns an implementation-specific
           non-zero error value.

   <b>void</b> <b>*</b> <b>globus_thread_cancellable_func</b> <b>(void</b> <b>*(*)(void</b> <b>*)</b> <b>func,</b> <b>void</b> <b>*</b> <b>arg,</b> <b>void(*)(void</b> <b>*)</b> <b>cleanup_func,</b> <b>void</b>
       <b>*</b> <b>cleanup_arg,</b> <b>globus_bool_t</b> <b>execute_cleanup)</b>
       Execute a function with thread cleanup in case of cancellation. The <b>globus_thread_cancellable_func()</b>
       function provides an interface to POSIX thread cancellation points that does not rely on preprocessor
       macros. It is roughly equivalent to

       pthread_cleanup_push(cleanup_func, cleanup_arg);
       (*func)(arg);
       pthread_cleanup_pop(execute_cleanup)

       <b>Parameters</b>
           <u>func</u> Pointer to a function which may be cancelled.
           <u>arg</u> Parameter to the <u>func</u> function.
           <u>cleanup_func</u> Pointer to a function to execute if thread cancellation occurs during <u>func</u>.
           <u>cleanup_arg</u> Parameter to the <u>cleanup_func</u> function.
           <u>execute_cleanup</u> Flag indicating whether the function pointed to by <u>cleanup_func</u> should be executed
           after <u>func</u> completes even if it is not cancelled.

       <b>Returns</b>
           <b>globus_thread_cancellable_func()</b> returns the value returned by <u>func</u>.

   <b>int</b> <b>globus_thread_create</b> <b>(globus_thread_t</b> <b>*</b> <b>thread,</b> <b>globus_threadattr_t</b> <b>*</b> <b>attr,</b> <b>globus_thread_func_t</b> <b>func,</b>
       <b>void</b> <b>*</b> <b>user_arg)</b>
       Create a new thread. The <b>globus_thread_create()</b> function creates a new thread of execution in the current
       process to run the function pointed to by the <u>func</u> parameter passed the <u>user_arg</u> value as its only
       parameter. This new thread will be detached, so that storage associated with the thread will be
       automatically reclaimed by the operating system. A thread identifier will be copied to the value pointed
       by the <u>thread</u> parameter if it is non-NULL. The caller may use this thread identifier to signal or cancel
       this thread. The <u>attr</u> parameter is ignored by this function. If the 'none' threading model is used by an
       application, then this function will always fail. One alternative that will work both with and without
       threads is to use the functions in the <b>Globus</b> <b>Callback</b> <b>API</b> .

       <b>Parameters</b>
           <u>thread</u> Pointer to a variable to contain the new thread's identifier.
           <u>attr</u> Ignored
           <u>func</u> Pointer to a function to start in the new thread.
           <u>user_arg</u> Argument to the new thread's function.

       <b>Returns</b>
           On success, <b>globus_thread_create()</b> will start a new thread, invoking (*func)(user_arg), modify the
           value pointed to by the <u>thread</u> parameter to contain the new thread's identifier and return
           GLOBUS_SUCCESS. If an error occurs, then the value of <u>thread</u> is undefined and <b>globus_thread_create()</b>
           returns an implementation-specific non-zero error value.

   <b>globus_bool_t</b> <b>globus_thread_equal</b> <b>(globus_thread_t</b> <b>thread1,</b> <b>globus_thread_t</b> <b>thread2)</b>
       Check whether thread identifiers match. The <b>globus_thread_equal()</b> function checks whether the thread
       identifiers passed as the <u>thread1</u> and <u>thread2</u> parameters refer to the same thread. If so,
       <b>globus_thread_equal()</b> returns GLOBUS_TRUE; otherwise GLOBUS_FALSE.

       <b>Parameters</b>
           <u>thread1</u> Thread identifier to compare.
           <u>thread2</u> Thread identifier to compare.

       <b>Return</b> <b>values</b>
           <u>GLOBUS_TRUE</u> thread1 and thread2 refer to the same thread.
           <u>GLOBUS_FALSE</u> thread1 and thread2 do not refer to the same thread.

   <b>void</b> <b>globus_thread_exit</b> <b>(void</b> <b>*</b> <b>value)</b>
       Terminate the current thread. The <b>globus_thread_exit()</b> terminates the current thread with the value
       passed to it. This function does not return.

   <b>int</b> <b>globus_thread_kill</b> <b>(globus_thread_t</b> <b>thread,</b> <b>int</b> <b>sig)</b>
       Send a signal to a thread. The <b>globus_thread_kill()</b> function sends the signal specified by the <u>sig</u> number
       to the thread whose ID matches the <u>thread</u> parameter. Depending on the signal mask of that thread, this
       may result in a signal being delivered or not, and depending on the process's signal actions, a signal
       handler, termination, or no operation will occur in that thread.

       <b>Parameters</b>
           <u>thread</u> The thread identifier of the thread to signal.
           <u>sig</u> The signal to send to the thread.

       <b>Returns</b>
           On success, <b>globus_thread_kill()</b> queues the signal for delivery to the specified thread and returns
           GLOBUS_SUCCESS. If an error occurs, <b>globus_thread_kill()</b> returns an implementation-specific non-zero
           error value.

   <b>globus_bool_t</b> <b>globus_thread_preemptive_threads</b> <b>(void)</b>
       Indicate whether the active thread model supports preemption.

       <b>Returns</b>
           The <b>globus_thread_preemptive_threads()</b> function returns GLOBUS_TRUE if the current thread model
           supports thread preemption; otherwise it returns GLOBUS_FALSE.

   <b>globus_thread_t</b> <b>globus_thread_self</b> <b>(void)</b>
       Determine the current thread's ID. The <b>globus_thread_self()</b> function returns the thread identifier of the
       current thread. This value is unique among all threads which are running at any given time.

       <b>Returns</b>
           The <b>globus_thread_self()</b> function returns the current thread's ID.

   <b>int</b> <b>globus_thread_set_model</b> <b>(const</b> <b>char</b> <b>*</b> <b>model)</b>
       Select threading model for an application. The <b>globus_thread_set_model()</b> function selects which runtime
       model the current application will use. By default, the Globus runtime uses a non-threaded model.
       Additional models may be available based on system support: pthread, or windows. This function must be
       called prior to activating any globus module, as it changes how certain functions (like
       <b>globus_mutex_lock()</b> and <b>globus_cond_wait()</b>) behave. This function overrides the value set by the
       GLOBUS_THREAD_MODEL environment variable.

       The <b>globus_thread_set_model()</b> function will fail if a Globus module has been activated already.

       <b>Parameters</b>
           <u>model</u> The name of the thread model to use. Depending on operating system capabilities, this may be
           'none', 'pthread', 'windows', or some other custom thread implementation. The corresponding libtool
           module 'libglobus_thread_pthread.la' or 'libglobus_thread_windows.la' must be installed on the system
           for it to be used.

       <b>Returns</b>
           On success, <b>globus_thread_set_model()</b> sets the name of the thread model to use and returns
           GLOBUS_SUCCESS. If an error occurs, then <b>globus_thread_set_model()</b> returns GLOBUS_FAILURE.

   <b>int</b> <b>globus_thread_setcancelstate</b> <b>(int</b> <b>state,</b> <b>int</b> <b>*</b> <b>oldstate)</b>
       Set the thread's cancellable state. The <b>globus_thread_setcancelstate()</b> function sets the current
       cancellation state to either GLOBUS_THREAD_CANCEL_DISABLE or GLOBUS_THREAD_CANCEL_ENABLE, do control
       whether <b>globus_thread_cancel()</b> is able to cancel this thread.

       <b>Parameters</b>
           <u>state</u> The desired cancellation state. If the value is GLOBUS_THREAD_CANCEL_DISABLE, then cancellation
           will be disabled for this thread. If the value is GLOBUS_THREAD_CANCEL_ENABLE, then cancellation will
           be enabled for this thread.
           <u>oldstate</u> A pointer to a value which will be set to the value of the thread's cancellation state when
           this function call began. This may be NULL if the caller is not interested in the previous value.

       <b>Returns</b>
           On success, the <b>globus_thread_setcancelstate()</b> function modifies the thread cancellation state,
           modifies oldstate (if non-NULL) to the value of its previous state, and returns GLOBUS_SUCCESS. If an
           error occurs, <b>globus_thread_setcancelstate()</b> returns an implementation-specific non-zero error value.

   <b>int</b> <b>globus_thread_sigmask</b> <b>(int</b> <b>how,</b> <b>const</b> <b>sigset_t</b> <b>*</b> <b>new_mask,</b> <b>sigset_t</b> <b>*</b> <b>old_mask)</b>
       Modify the current thread's signal mask. The <b>globus_thread_sigmask()</b> function modifies the current
       thread's signal mask and returns the old value of the signal mask in the value pointed to by the <u>old_mask</u>
       parameter. The <u>how</u> parameter can be one of SIG_BLOCK, SIG_UNBLOCK, or SIG_SETMASK to control how the
       signal mask is modified.

       <b>Parameters</b>
           <u>how</u> Flag indicating how to interpret <u>new_mask</u> if it is non-NULL. If <u>how</u> is SIG_BLOCK, then all
           signals in <u>new_mask</u> are blocked, as well as any which were previously blocked. If <u>how</u> is SIG_UNBLOCK,
           then all signals in which were previously blocked in <u>new_mask</u> are unblocked. If <u>how</u> is SIG_SETMASK,
           then the old signal mask is replaced with the value of <u>new_mask</u>.
           <u>new_mask</u> Set of signals to block or unblock, based on the <u>how</u> parameter.
           <u>old_mask</u> A pointer to be set to the old signal mask associated with the current thread.

       <b>Returns</b>
           On success, <b>globus_thread_sigmask()</b> modifies the signal mask, modifies the value pointed to by
           <u>old_mask</u> with the signal mask prior to this function's execution and returns GLOBUS_SUCCESS. If an
           error occurs, <b>globus_thread_sigmask()</b> returns an implementation-specific non-zero error value.

   <b>void</b> <b>globus_thread_testcancel</b> <b>(void)</b>
       Thread cancellation point. The <b>globus_thread_testcancel()</b> function acts as a cancellation point for the
       current thread. If a thread has called <b>globus_thread_cancel()</b> and cancellation is enabled, this will
       cause the thread to be cancelled and any functions on the thread's cleanup stack to be executed. This
       function will not return if the thread is cancelled.

   <b>void</b> <b>globus_thread_yield</b> <b>(void)</b>
       Yield execution to another thread. The <b>globus_thread_yield()</b> function yields execution to other threads
       which are ready for execution. The current thread may continue to execute if there are no other threads
       in the system's ready queue.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for globus_common from the source code.

globus_common                                     Version 18.14                                 <u><a href="../man3/globus_thread.3.html">globus_thread</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>