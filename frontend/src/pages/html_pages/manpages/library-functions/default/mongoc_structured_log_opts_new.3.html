<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mongoc_structured_log_opts_t *</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmongoc-doc">libmongoc-doc_1.30.4-1ubuntu1_all</a> <br><br><pre>
</pre><h4><b>SYNOPSIS</b></h4><pre>
          mongoc_structured_log_opts_t *
          mongoc_structured_log_opts_new (void);

       Creates a new <u>mongoc_structured_log_opts_t</u>, filled with defaults captured from the current environment.

       Sets a default log handler which would write a text representation of each log message to <b>stderr</b>, <b>stdout</b>,
       or  another  file configurable using <b>MONGODB_LOG_PATH</b>.  This setting has no effect if the default handler
       is replaced using <u>mongoc_structured_log_opts_set_handler()</u>.

       Environment variable errors are non-fatal, and result in one-time warnings delivered as  an  unstructured
       log.

       Per-component maximum levels are initialized equivalently to:

          mongoc_structured_log_opts_set_max_level_for_all_components(opts, MONGOC_STRUCTURED_LOG_LEVEL_WARNING);
          mongoc_structured_log_opts_set_max_levels_from_env(opts);

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLES</b></h4><pre>
       This is a full list of the captured environment variables.

       • <b>MONGODB_LOG_MAX_DOCUMENT_LENGTH</b>:  Maximum length for JSON-serialized documents that appear within a log
         message.   It  may  be  a  number,  in  bytes,  or  <b>unlimited</b>   (case   insensitive)   to   choose   an
         implementation-specific  value  near  the  maximum representable length.  By default, the limit is 1000
         bytes.  This limit affects interior documents like commands and replies, not  the  total  length  of  a
         structured log message.

       • <b>MONGODB_LOG_PATH</b>:  A  file  path  or  one  of  the  special strings <b>stderr</b> or <b>stdout</b> (case insensitive)
         specifying the destination for structured logs seen by the default handler.  By default, it  writes  to
         <b>stderr</b>.   This  path  will  be  captured  during  <b>mongoc_structured_log_opts_new()</b>,  but  it  will  not
         immediately be opened.  If the file can't be opened, a warning is then written to the unstructured  log
         and the handler writes structured logs to <b>stderr</b> instead.

         <b>WARNING:</b>
            When  a  file path is given for <b>MONGODB_LOG_PATH</b>, each log instance (one stand-alone client or pool)
            will separately open this file for append.  The results are operating system specific. On  UNIX-like
            platforms each instance's output will be interleaved, in most cases without splitting individual log
            messages.  Notably  on  Windows  the file will be opened in exclusive mode by the first instance and
            subsequent instances will fail, falling back on  the  default  of  <b>stderr</b>.   Applications  that  use
            multiple  processes or multiple client pools will likely want to supply a log handler that annotates
            each message with information about its originating log instance.

       • <b>MONGODB_LOG_COMMAND</b>:     A     log     level     name     to     set     as     the     maximum     for
         <b>MONGOC_STRUCTURED_LOG_COMPONENT_COMMAND</b>.

       • <b>MONGODB_LOG_TOPOLOGY</b>:     A     log     level     name     to     set     as     the     maximum    for
         <b>MONGOC_STRUCTURED_LOG_COMPONENT_TOPOLOGY</b>.

       • <b>MONGODB_LOG_SERVER_SELECTION</b>:    A    log    level    name    to    set    as    the    maximum     for
         <b>MONGOC_STRUCTURED_LOG_COMPONENT_SERVER_SELECTION</b>.

       • <b>MONGODB_LOG_CONNECTION</b>:     A     log     level     name     to     set     as    the    maximum    for
         <b>MONGOC_STRUCTURED_LOG_COMPONENT_CONNECTION</b>.

       • <b>MONGODB_LOG_ALL</b>: A log level name applied to all components not otherwise specified.

       Note that log level names are always case  insensitive.   This  is  a  full  list  of  recognized  names,
       including allowed aliases:

       • <b>emergency</b>, <b>off</b>

       • <b>alert</b>

       • <b>critical</b>

       • <b>error</b>

       • <b>warning</b>, <b>warn</b>

       • <b>notice</b>

       • <b>informational</b>, <b>info</b>

       • <b>debug</b>

       • <b>trace</b>

</pre><h4><b>RETURNS</b></h4><pre>
       A newly allocated <u>mongoc_structured_log_opts_t</u>.

</pre><h4><b>AUTHOR</b></h4><pre>
       MongoDB, Inc

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2009-present, MongoDB, Inc.

1.30.4                                            Jun 08, 2025                 <u><a href="../man3/MONGOC_STRUCTURED_LOG_OPTS_NEW.3.html">MONGOC_STRUCTURED_LOG_OPTS_NEW</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>