<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dist::Zilla::Plugin::ModuleBuild::Custom - Allow a dist to have a custom Build.PL</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdist-zilla-plugins-cjm-perl">libdist-zilla-plugins-cjm-perl_6.000-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Dist::Zilla::Plugin::ModuleBuild::Custom - Allow a dist to have a custom Build.PL

</pre><h4><b>VERSION</b></h4><pre>
       This document describes version 4.26 of Dist::Zilla::Plugin::ModuleBuild::Custom, released December 17,
       2017 as part of Dist-Zilla-Plugins-CJM version 6.000.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       In <u>dist.ini</u>:

         [ModuleBuild::Custom]
         mb_version = 0.34  ; the default comes from the ModuleBuild plugin

       In your <u>Build.PL</u>:

         use Module::Build;

         my %module_build_args = (
           module_name =&gt; 'Foo::Bar',
         ##{ $plugin-&gt;<a href="../man1/get_prereqs.1.html">get_prereqs</a>(1) ##}
         ##{ $plugin-&gt;get_default('share_dir') ##}
         );

         unless ( eval { Module::Build-&gt;VERSION(0.4004) } ) {
           my $tr = delete $module_build_args{test_requires};
           my $br = $module_build_args{build_requires};
           for my $mod ( keys %$tr ) {
             if ( exists $br-&gt;{$mod} ) {
               $br-&gt;{$mod} = $tr-&gt;{$mod} if $tr-&gt;{$mod} &gt; $br-&gt;{$mod};
             }
             else {
               $br-&gt;{$mod} = $tr-&gt;{$mod};
             }
           }
         } # end unless Module::Build is 0.4004 or newer

         my $builder = Module::Build-&gt;new(%module_build_args);
         $builder-&gt;create_build_script;

       Of course, your <u>Build.PL</u> doesn't need to look exactly like this.  If you can require Module::Build
       0.4004, then you can remove the "unless eval" section.  If you're not using "share_dir", you can remove
       that line.

       And if you're not adding your own code to <u>Build.PL</u>, you don't need this plugin.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This plugin is for people who need something more complex than the auto-generated <u>Makefile.PL</u> or <u>Build.PL</u>
       generated by the MakeMaker or ModuleBuild plugins.

       It is a subclass of the ModuleBuild plugin, but it does not write a <u>Build.PL</u> for you.  Instead, you write
       your own <u>Build.PL</u>, which may do anything Module::Build is capable of (except generate a compatibility
       <u>Makefile.PL</u>).

       This plugin will process <u>Build.PL</u> as a template (using Text::Template), which allows you to add data from
       Dist::Zilla to the version you distribute (if you want).  The template delimiters are "##{" and "##}",
       because that makes them look like comments.  That makes it easier to have a <u>Build.PL</u> that works both
       before and after it is processed as a template.

       This is particularly useful for XS-based modules, because it can allow you to build and test the module
       without the overhead of "dzil build" after every small change.

       The template may use the following variables:

       $dist
           The name of the distribution.

       $meta
           The hash of metadata (in META 1.4 format) that will be stored in <u>META.yml</u>.

       $meta2
           The hash of metadata (in META 2 format) that will be stored in <u>META.json</u>.

       $plugin
           The ModuleBuild::Custom object that is processing the template.

       $version
           The distribution's version number.

       $zilla
           The Dist::Zilla object that is creating the distribution.

   <b>Using</b> <b>ModuleBuild::Custom</b> <b>with</b> <b>AutoPrereqs</b>
       If  you  are using the AutoPrereqs plugin, then you will probably want to set its "configure_finder" to a
       FileFinder that includes <u>Build.PL</u>.  You may also want to set this plugin's "mb_version"  parameter  to  0
       and allow AutoPrereqs to get the version from your "use Module::Build" line.

       Example <u>dist.ini</u> configuration:

         [ModuleBuild::Custom]
         mb_version = 0 ; AutoPrereqs gets actual version from Build.PL

         [FileFinder::ByName / :BuildPL]
         file = Build.PL

         [AutoPrereqs]
         :version = 4.300005 ; need configure_finder
         configure_finder = :BuildPL
         ; Add next line if your Build.PL uses modules you ship in inc/
         configure_finder = :IncModules

       Then in your <u>Build.PL</u> you'd say:

         use Module::Build 0.28; # or whatever version you need

</pre><h4><b>METHODS</b></h4><pre>
   <b>get_default</b>
         $plugin-&gt;get_default(qw(key1 key2 ...))

       A  template can call this method to extract the specified key(s) from the default Module::Build arguments
       created by the normal ModuleBuild plugin and have them formatted into a comma-separated list suitable for
       a hash constructor or a method's parameter list.

       If any key has no value (or its value is an empty hash or array ref) it will be omitted  from  the  list.
       If all keys are omitted, the empty string is returned.  Otherwise, the result always ends with a comma.

       The most common usage would be

           ##{ $plugin-&gt;get_default('share_dir') ##}

   <b>get_meta</b>
         $plugin-&gt;get_meta(qw(key1 key2 ...))

       A  template  can call this method to extract the specified key(s) from "distmeta" and have them formatted
       into a comma-separated list suitable for a hash constructor or a method's parameter list.  The keys  (and
       the returned values) are from the META 1.4 spec, because that's what Module::Build uses in its API.

       If  any  key  has no value (or its value is an empty hash or array ref) it will be omitted from the list.
       If all keys are omitted, the empty string is returned.  Otherwise, the result always ends with a comma.

   <b>get_prereqs</b>
         $plugin-&gt;get_prereqs($api_version)

       This returns all the keys that describe the distribution's  prerequisites.   The  $api_version  indicates
       what keys the template can handle.  The currently defined values are:

       0 (or undef)
               This is equivalent to

                 $plugin-&gt;get_meta(qw(build_requires configure_requires requires
                                      recommends conflicts))

       1       This adds "test_requires" as a separate key (which requires Dist::Zilla 4.300032 or later).  It's
               equivalent to

                 $plugin-&gt;get_default(qw(build_requires configure_requires requires
                                         test_requires recommends conflicts))

               Your   <u>Build.PL</u>   should   either  require  Module::Build  0.4004,  or  fold  test_requires  into
               build_requires if an older version is used (as shown in the SYNOPSIS).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       The MakeMaker::Custom plugin does basically the same thing as this plugin, but for  <u>Makefile.PL</u>  (if  you
       prefer ExtUtils::MakeMaker).

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       ModuleBuild::Custom  requires  Dist::Zilla  (6  or  later) and Text::Template.  I also recommend applying
       <u>Template_strict.patch</u> to Text::Template.  This will add support for the STRICT option,  which  will  help
       catch errors in your templates.

</pre><h4><b>INCOMPATIBILITIES</b></h4><pre>
       You must not use this in conjunction with the ModuleBuild plugin.

</pre><h4><b>BUGS</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
       No bugs have been reported.

</pre><h4><b>AUTHOR</b></h4><pre>
       Christopher J. Madsen  "&lt;perl AT cjmweb.net&gt;"

       Please  report  any  bugs or feature requests to "&lt;bug-Dist-Zilla-Plugins-CJM AT rt.cpan.org&gt;" or through
       the web interface at &lt;<a href="http://rt.cpan.org/Public/Bug/Report.html">http://rt.cpan.org/Public/Bug/Report.html</a>?Queue=Dist-Zilla-Plugins-CJM&gt;.

       You     can     follow     or     contribute     to     Dist-Zilla-Plugins-CJM's      development      at
       &lt;https://github.com/madsen/dist-zilla-plugins-cjm&gt;.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2017 by Christopher J. Madsen.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

</pre><h4><b>DISCLAIMER</b> <b>OF</b> <b>WARRANTY</b></h4><pre>
       BECAUSE THIS SOFTWARE IS LICENSED FREE OF CHARGE, THERE IS NO WARRANTY FOR THE SOFTWARE,  TO  THE  EXTENT
       PERMITTED  BY  APPLICABLE LAW. EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER
       PARTIES PROVIDE THE SOFTWARE "AS  IS"  WITHOUT  WARRANTY  OF  ANY  KIND,  EITHER  EXPRESSED  OR  IMPLIED,
       INCLUDING,  BUT  NOT  LIMITED  TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
       PURPOSE. THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF  THE  SOFTWARE  IS  WITH  YOU.  SHOULD  THE
       SOFTWARE PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY SERVICING, REPAIR, OR CORRECTION.

       IN  NO  EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL ANY COPYRIGHT HOLDER, OR ANY
       OTHER PARTY WHO MAY MODIFY AND/OR REDISTRIBUTE THE SOFTWARE AS PERMITTED BY THE ABOVE LICENSE, BE  LIABLE
       TO  YOU  FOR DAMAGES, INCLUDING ANY GENERAL, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES ARISING OUT OF
       THE USE OR INABILITY TO USE THE SOFTWARE (INCLUDING BUT NOT  LIMITED  TO  LOSS  OF  DATA  OR  DATA  BEING
       RENDERED  INACCURATE  OR LOSSES SUSTAINED BY YOU OR THIRD PARTIES OR A FAILURE OF THE SOFTWARE TO OPERATE
       WITH ANY OTHER SOFTWARE), EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF  SUCH
       DAMAGES.

perl v5.34.0                                       2022-06-13             <u>Dist::Zilla::Pl...leBuild::<a href="../man3pm/Custom.3pm.html">Custom</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>