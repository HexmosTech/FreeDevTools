<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CGI::Application::Plugin::Stream - CGI::Application Plugin for streaming files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcgi-application-plugin-stream-perl">libcgi-application-plugin-stream-perl_2.12-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CGI::Application::Plugin::Stream - CGI::Application Plugin for streaming files

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use CGI::Application::Plugin::Stream (qw/stream_file/);

         sub runmode {
           # ...

           # Set up any headers you want to set explicitly
           # using header_props() or header_add() as usual

           #...

           if ( $self-&gt;stream_file( $file ) ) {
             return;
           } else {
             return $self-&gt;error_mode();
           }
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This plugin provides a way to stream a file back to the user.

       This is useful if you are creating a PDF or Spreadsheet document dynamically to deliver to the user.

       The file is read and printed in small chunks to keep memory consumption down.

       This plugin is a consumer, as in your runmode shouldn't try to do any output or anything afterwards.
       This plugin affects the HTTP response headers, so anything you do afterwards will probably not work.  If
       you pass along a filehandle, we'll make sure to close it for you.

       It's recommended that you increment $| (or set it to 1), which will autoflush the buffer as your
       application is streaming out the file.

</pre><h4><b>METHODS</b></h4><pre>
   <b>stream_file()</b>
         $self-&gt;stream_file($fh);
         $self-&gt;stream_file( '/path/to/file',2048);

       This method can take two parameters, the first the path to the file or a filehandle and the second, an
       optional number of bytes to determine the chunk size of the stream. It defaults to 1024.

       It will either stream a file to the user or return false if it fails, perhaps because it couldn't find
       the file you referenced.

       We highly recommend you provide a file name if passing along a filehandle, as we won't be able to deduce
       the file name, and will use 'FILE' by default. Example:

        $self-&gt;header_add( -attachment =&gt; 'my_file.txt' );

       With both a file handle or file name, we will try to determine the correct content type by using
       File::MMagic. A default of 'application/octet-stream' will be used if File::MMagic can't figure it out.

       The size will be calculated and added to the headers as well.

       Again, you can set these explicitly if you want as well:

        $self-&gt;header_add(
             -type                     =&gt;      'text/plain',
             -Content_Length   =&gt;      42, # bytes
        );

</pre><h4><b>AUTHOR</b></h4><pre>
       Jason Purdy, &lt;<a href="mailto:Jason@Purdy.INFO">Jason@Purdy.INFO</a>&gt;, with inspiration from Tobias Henoeckl and tremendous support from the
       cgiapp mailing list.

       Mark Stosberg also contributed to this module.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       CGI::Application, &lt;<a href="http://www.cgi-app.org">http://www.cgi-app.org</a>&gt;, "CREATING A STANDARD HTTP HEADER" in CGI.pm,
       &lt;<a href="http://www.mail-archive.com/cgiapp">http://www.mail-archive.com/cgiapp</a>@lists.erlbaum.net/msg02660.html&gt;, File::Basename, "$|" in perlvar

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (C) 2004-2005 Jason Purdy, &lt;<a href="mailto:Jason@Purdy.INFO">Jason@Purdy.INFO</a>&gt;

       This library is free software. You can modify and or distribute it under the same terms as Perl itself.

perl v5.34.0                                       2022-06-09              <u>CGI::Application::Plugin::<a href="../man3pm/Stream.3pm.html">Stream</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>