<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::MtPolicyd::Plugin::Fail2Ban - mtpolicyd plugin to block an address with fail2ban</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mtpolicyd">mtpolicyd_2.05-1.2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::MtPolicyd::Plugin::Fail2Ban - mtpolicyd plugin to block an address with fail2ban

</pre><h4><b>VERSION</b></h4><pre>
       version 2.05

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This plugin can be used to block an ip with iptable thru the fail2ban daemon.

       For more information abount fail2ban read:

       <a href="http://www.fail2ban.org/">http://www.fail2ban.org/</a>

       This plugin will directly talk to the daemon thru the unix domain socket and execute an banip command:

         set &lt;JAIL&gt; banip &lt;IP&gt;

</pre><h4><b>PARAMETERS</b></h4><pre>
       socket (default: /var/run/fail2ban/fail2ban.sock)
           Path to the fail2ban unix socket.

           Make sure mtpolicyd is allowed to write to this socket!

       jail (default: postfix)
           The jail in which the ip should be banned.

</pre><h4><b>EXAMPLE</b></h4><pre>
       Execute a ban on all client-ips which send a mail with a score of &gt;=15:

         &lt;Plugin ScoreBan&gt;
           module = "ScoreAction"
           threshold = 15
           &lt;Plugin ban-ip&gt;
             module = "Fail2Ban"
             socket = "/var/run/fail2ban/fail2ban.sock"
             jail = "postfix"
           &lt;/Plugin&gt;
         &lt;/Plugin&gt;

</pre><h4><b>FAIL2BAN</b> <b>CONFIGURATION</b></h4><pre>
       To allow mtpolicyd to access fail2ban you must make sure fail2ban can write to the fail2ban unix socket.

         chgrp mtpolicyd /var/run/fail2ban/fail2ban.sock
         chmod g+rwx /var/run/fail2ban/fail2ban.sock

       You may want to add this to the fail2ban startup script.

       You  may  want  to  use  the predefined postfix jail.  To activate it create /etc/fail2ban/jail.local and
       enable the postfix fail by setting enabled=true.

         [postfix]
         enabled = true

</pre><h4><b>AUTHOR</b></h4><pre>
       Markus Benning &lt;<a href="mailto:ich@markusbenning.de">ich@markusbenning.de</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2014 by Markus Benning &lt;<a href="mailto:ich@markusbenning.de">ich@markusbenning.de</a>&gt;.

       This is free software, licensed under:

         The GNU General Public License, Version 2, June 1991

perl v5.38.2                                       2024-05-26             <u>Mail::MtPolicyd::Plugin::<a href="../man3pm/Fail2Ban.3pm.html">Fail2Ban</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>