<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::MtPolicyd::Plugin::SqlList - mtpolicyd plugin for accessing a SQL white/black/access list</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mtpolicyd">mtpolicyd_2.05-1.2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::MtPolicyd::Plugin::SqlList - mtpolicyd plugin for accessing a SQL white/black/access list

</pre><h4><b>VERSION</b></h4><pre>
       version 2.05

</pre><h4><b>SYNOPSIS</b></h4><pre>
         &lt;Plugin whitelist&gt;
           module="SqlList"
           sql_query="SELECT client_ip FROM whitelist WHERE client_ip=?"
           match_action=dunno
         &lt;/Plugin&gt;

         &lt;Plugin blacklist&gt;
           module="SqlList"
           sql_query="SELECT client_ip FROM blacklist WHERE client_ip=?"
           match_action="reject you are blacklisted!"
         &lt;/Plugin&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Plugin checks a field against a SQL table/query.

       Depending on whether a supplied SQL query matched actions can be taken.

   <b>PARAMETERS</b>
       The module takes the following parameters:

       (uc_)enabled (default: "on")
           Could be set to 'off' to deactivate check. Could be used to activate/deactivate check per user.

       sql_query (default: "SELECT client_ip FROM whitelist WHERE client_ip=INET_ATON(?)")
           Prepared SQL statement to use for checking an IP address.

           ? will be replaced by the IP address.

           The module will match if the statement returns one or more rows.

       By default the plugin will do nothing. One of the following actions should be specified:

       match_action (default: empty)
           If given this action will be returned to the MTA if the SQL query matched.

       not_match_action (default: empty)
           If given this action will be returned to the MTA if the SQL query DID NOT matched.

       score (default: empty)
           If given this score will be applied to the session.

       field (default: client_address)
           The field the query parameter will be taken from.

</pre><h4><b>EXAMPLE</b> <b>WITH</b> <b>A</b> <b>MYSQL</b> <b>TABLE</b></h4><pre>
       You may use the following table for storing IPv4 addresses in MySQL:

         CREATE TABLE `whitelist` (
           `id` <a href="../man11/int.11.html">int</a>(11) NOT NULL AUTO_INCREMENT,
           `client_ip` INT UNSIGNED NOT NULL,
           PRIMARY KEY (`id`),
           UNIQUE KEY `client_ip` (`client_ip`)
         ) ENGINE=MyISAM  DEFAULT CHARSET=latin1

         INSERT INTO whitelist VALUES(NULL, INET_ATON('127.0.0.1'));

       And use it as a whitelist in mtpolicyd:

         &lt;VirtualHost 12345&gt;
           name="reputation"
           &lt;Plugin whitelist&gt;
             module="SqlList"
             sql_query="SELECT client_ip FROM whitelist WHERE client_ip=INET_ATON(?)"
             match_action="dunno"
           &lt;/Plugin&gt;
           &lt;Plugin trigger-greylisting&gt;
           ...
         &lt;/VirtualHost&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Markus Benning &lt;<a href="mailto:ich@markusbenning.de">ich@markusbenning.de</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2014 by Markus Benning &lt;<a href="mailto:ich@markusbenning.de">ich@markusbenning.de</a>&gt;.

       This is free software, licensed under:

         The GNU General Public License, Version 2, June 1991

perl v5.38.2                                       2024-05-26              <u>Mail::MtPolicyd::Plugin::<a href="../man3pm/SqlList.3pm.html">SqlList</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>