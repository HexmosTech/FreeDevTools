<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mojolicious::Plugin::DefaultHelpers - Default helpers plugin</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmojolicious-perl">libmojolicious-perl_9.39+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mojolicious::Plugin::DefaultHelpers - Default helpers plugin

</pre><h4><b>SYNOPSIS</b></h4><pre>
         # Mojolicious
         $app-&gt;plugin('DefaultHelpers');

         # Mojolicious::Lite
         plugin 'DefaultHelpers';

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mojolicious::Plugin::DefaultHelpers is a collection of helpers for Mojolicious.

       This is a core plugin, that means it is always enabled and its code a good example for learning to build
       new plugins, you're welcome to fork it.

       See "PLUGINS" in Mojolicious::Plugins for a list of plugins that are available by default.

</pre><h4><b>HELPERS</b></h4><pre>
       Mojolicious::Plugin::DefaultHelpers implements the following helpers.

   <b>accepts</b>
         my $formats = $c-&gt;accepts;
         my $format  = $c-&gt;accepts('html', 'json', 'txt');

       Select best possible representation for resource from "format" "GET"/"POST" parameter, "format" stash
       value or "Accept" request header with "accepts" in Mojolicious::Renderer, defaults to returning the first
       extension if no preference could be detected.

         # Check if JSON is acceptable
         $c-&gt;render(json =&gt; {hello =&gt; 'world'}) if $c-&gt;accepts('json');

         # Check if JSON was specifically requested
         $c-&gt;render(json =&gt; {hello =&gt; 'world'}) if $c-&gt;accepts('', 'json');

         # Unsupported representation
         $c-&gt;render(data =&gt; '', status =&gt; 204)
           unless my $format = $c-&gt;accepts('html', 'json');

         # Detected representations to select from
         my @formats = @{$c-&gt;accepts};

   <b>app</b>
         %= app-&gt;secrets-&gt;[0]

       Alias for "app" in Mojolicious::Controller.

   <b>b</b>
         %= b('Joel is a slug')-&gt;slugify

       Turn string into a Mojo::ByteStream object.

   <b>c</b>
         %= c('a', 'b', 'c')-&gt;shuffle-&gt;join

       Turn list into a Mojo::Collection object.

   <b>config</b>
         %= config 'something'

       Alias for "config" in Mojolicious.

   <b>content</b>
         %= content foo =&gt; begin
           test
         % end
         %= content bar =&gt; 'Hello World!'
         %= content 'foo'
         %= content 'bar'
         %= content

       Store partial rendered content in a named buffer and retrieve it later, defaults to retrieving the named
       buffer "content", which is used by the renderer for the "layout" and "extends" features. New content will
       be ignored if the named buffer is already in use.

   <b>content_for</b>
         % content_for foo =&gt; begin
           test
         % end
         %= content_for 'foo'

       Same as "content", but appends content to named buffers if they are already in use.

         % content_for message =&gt; begin
           Hello
         % end
         % content_for message =&gt; begin
           world!
         % end
         %= content 'message'

   <b>content_with</b>
         % content_with foo =&gt; begin
           test
         % end
         %= content_with 'foo'

       Same as "content", but replaces content of named buffers if they are already in use.

         % content message =&gt; begin
           world!
         % end
         % content_with message =&gt; begin
           Hello &lt;%= content 'message' %&gt;
         % end
         %= content 'message'

   <b>csrf_token</b>
         %= csrf_token

       Get CSRF token from "session", and generate one if none exists.

   <b>current_route</b>
         % if (current_route 'login') {
           Welcome to Mojolicious!
         % }
         %= current_route

       Check or get name of current route.

   <b>dumper</b>
         %= dumper {some =&gt; 'data'}

       Dump a Perl data structure with "dumper" in Mojo::Util, very useful for debugging.

   <b>exception_format</b>
         my $format = $c-&gt;exception_format;
         $c         = $c-&gt;exception_format('txt');

       Format for HTTP exceptions ("html", "json", or "txt"), defaults to the value of "exception_format" in
       Mojolicious.

   <b>extends</b>
         % extends 'blue';
         % extends 'blue', title =&gt; 'Blue!';

       Set "extends" stash value, all additional key/value pairs get merged into the "stash".

   <b>flash</b>
         my $foo = $c-&gt;flash('foo');
         $c      = $c-&gt;flash({foo =&gt; 'bar'});
         $c      = $c-&gt;flash(foo =&gt; 'bar');
         %= flash 'foo'

       Data storage persistent only for the next request, stored in the "session".

         # Show message after redirect
         $c-&gt;flash(message =&gt; 'User created successfully!');
         $c-&gt;redirect_to('show_user', id =&gt; 23);

   <b>inactivity_timeout</b>
         $c = $c-&gt;<a href="../man3600/inactivity_timeout.3600.html">inactivity_timeout</a>(3600);

       Use "stream" in Mojo::IOLoop to find the current connection and increase timeout if possible.

         # Longer version
         Mojo::IOLoop-&gt;stream($c-&gt;tx-&gt;connection)-&gt;<a href="../man3600/timeout.3600.html">timeout</a>(3600);

   <b>include</b>
         %= include 'menubar'
         %= include 'menubar', format =&gt; 'txt'

       Alias for "render_to_string" in Mojolicious::Controller.

   <b>is_fresh</b>
         my $bool = $c-&gt;is_fresh;
         my $bool = $c-&gt;is_fresh(etag =&gt; 'abc');
         my $bool = $c-&gt;is_fresh(etag =&gt; 'W/"def"');
         my $bool = $c-&gt;is_fresh(last_modified =&gt; $epoch);

       Check freshness of request by comparing the "If-None-Match" and "If-Modified-Since" request headers to
       the "ETag" and "Last-Modified" response headers with "is_fresh" in Mojolicious::Static.

         # Add ETag/Last-Modified headers and check freshness before rendering
         $c-&gt;is_fresh(etag =&gt; 'abc', last_modified =&gt; 1424985708)
           ? $c-&gt;<a href="../man304/rendered.304.html">rendered</a>(304)
           : $c-&gt;render(text =&gt; 'I â™¥ Mojolicious!');

   <b>layout</b>
         % layout 'green';
         % layout 'green', title =&gt; 'Green!';

       Set "layout" stash value, all additional key/value pairs get merged into the "stash".

   <b>log</b>
         my $log = $c-&gt;log;

       Alternative to "log" in Mojolicious that includes "request_id" in Mojo::Message::Request with every log
       message.

         # Log message with context
         $c-&gt;log-&gt;debug('This is a log message with request id');

         # Pass logger with context to model
         my $log = $c-&gt;log;
         $c-&gt;some_model-&gt;create({foo =&gt; $foo}, $log);

   <b>param</b>
         %= param 'foo'

       Alias for "param" in Mojolicious::Controller.

   <b>proxy-&gt;get_p</b>
         my $promise = $c-&gt;proxy-&gt;get_p('<a href="http://example.com">http://example.com</a>' =&gt; {Accept =&gt; '*/*'});

       Perform non-blocking "GET" request and forward response as efficiently as possible, takes the same
       arguments as "get" in Mojo::UserAgent and returns a Mojo::Promise object.

         # Forward with exception handling
         $c-&gt;proxy-&gt;get_p('<a href="http://mojolicious.org">http://mojolicious.org</a>')-&gt;catch(sub ($err) {
           $c-&gt;log-&gt;debug("Proxy error: $err");
           $c-&gt;render(text =&gt; 'Something went wrong!', status =&gt; 400);
         });

   <b>proxy-&gt;post_p</b>
         my $promise = $c-&gt;proxy-&gt;post_p('<a href="http://example.com">http://example.com</a>' =&gt; {Accept =&gt; '*/*'});

       Perform non-blocking "POST" request and forward response as efficiently as possible, takes the same
       arguments as "post" in Mojo::UserAgent and returns a Mojo::Promise object.

         # Forward with exception handling
         $c-&gt;proxy-&gt;post_p('example.com' =&gt; form =&gt; {test =&gt; 'pass'})-&gt;catch(sub ($err) {
           $c-&gt;log-&gt;debug("Proxy error: $err");
           $c-&gt;render(text =&gt; 'Something went wrong!', status =&gt; 400);
         });

   <b>proxy-&gt;start_p</b>
         my $promise = $c-&gt;proxy-&gt;start_p(Mojo::Transaction::HTTP-&gt;new);

       Perform non-blocking request for a custom Mojo::Transaction::HTTP object and forward response as
       efficiently as possible, returns a Mojo::Promise object.

         # Forward with exception handling
         my $tx = $c-&gt;ua-&gt;build_tx(GET =&gt; '<a href="http://mojolicious.org">http://mojolicious.org</a>');
         $c-&gt;proxy-&gt;start_p($tx)-&gt;catch(sub ($err) {
           $c-&gt;log-&gt;debug("Proxy error: $err");
           $c-&gt;render(text =&gt; 'Something went wrong!', status =&gt; 400);
         });

         # Forward with custom request and response headers
         my $headers = $c-&gt;req-&gt;headers-&gt;clone-&gt;dehop;
         $headers-&gt;header('X-Proxy' =&gt; 'Mojo');
         my $tx = $c-&gt;ua-&gt;build_tx(GET =&gt; '<a href="http://example.com">http://example.com</a>' =&gt; $headers-&gt;to_hash);
         $c-&gt;proxy-&gt;start_p($tx);
         $tx-&gt;res-&gt;content-&gt;once(body =&gt; sub ($content) { $c-&gt;res-&gt;headers-&gt;header('X-Proxy' =&gt; 'Mojo') });

   <b>redirect_to</b>
         $c = $c-&gt;redirect_to('named', foo =&gt; 'bar');
         $c = $c-&gt;redirect_to('named', {foo =&gt; 'bar'});
         $c = $c-&gt;redirect_to('/index.html');
         $c = $c-&gt;redirect_to('<a href="http://example.com/index.html">http://example.com/index.html</a>');

       Prepare a 302 (if the status code is not already "3xx") redirect response with "Location" header, takes
       the same arguments as "url_for".

         # Moved Permanently
         $c-&gt;res-&gt;<a href="../man301/code.301.html">code</a>(301);
         $c-&gt;redirect_to('some_route');

         # Temporary Redirect
         $c-&gt;res-&gt;<a href="../man307/code.307.html">code</a>(307);
         $c-&gt;redirect_to('some_route');

   <b>reply-&gt;asset</b>
         $c-&gt;reply-&gt;asset(Mojo::Asset::File-&gt;new);

       Reply with a Mojo::Asset::File or Mojo::Asset::Memory object using "serve_asset" in Mojolicious::Static,
       and perform content negotiation with "Range", "If-Modified-Since" and "If-None-Match" headers.

         # Serve asset with custom modification time
         my $asset = Mojo::Asset::Memory-&gt;new;
         $asset-&gt;add_chunk('Hello World!')-&gt;<a href="../man784111777/mtime.784111777.html">mtime</a>(784111777);
         $c-&gt;res-&gt;headers-&gt;content_type('text/plain');
         $c-&gt;reply-&gt;asset($asset);

         # Serve static file if it exists
         if (my $asset = $c-&gt;app-&gt;static-&gt;file('images/logo.png')) {
           $c-&gt;res-&gt;headers-&gt;content_type('image/png');
           $c-&gt;reply-&gt;asset($asset);
         }

   <b>reply-&gt;exception</b>
         $c = $c-&gt;reply-&gt;exception('Oops!');
         $c = $c-&gt;reply-&gt;exception(Mojo::Exception-&gt;new);

       Render an exception response in the appropriate format by delegating to more specific exception helpers.

   <b>reply-&gt;file</b>
         $c-&gt;reply-&gt;file('<a href="file:/etc/passwd">/etc/passwd</a>');

       Reply with a static file from an absolute path anywhere on the file system using "static" in Mojolicious.

         # Longer version
         $c-&gt;reply-&gt;asset(Mojo::Asset::File-&gt;new(path =&gt; '<a href="file:/etc/passwd">/etc/passwd</a>'));

         # Serve file from an absolute path with a custom content type
         $c-&gt;res-&gt;headers-&gt;content_type('application/myapp');
         $c-&gt;reply-&gt;file('/home/sri/foo.txt');

         # Serve file from a secret application directory
         $c-&gt;reply-&gt;file($c-&gt;app-&gt;home-&gt;child('secret', 'file.txt'));

   <b>reply-&gt;html_exception</b>
         $c = $c-&gt;reply-&gt;html_exception('Oops!');
         $c = $c-&gt;reply-&gt;html_exception(Mojo::Exception-&gt;new);

       Render the exception template "exception.$mode.$format.*" or "exception.$format.*" and set the response
       status code to 500. Also sets the stash values "exception" to a Mojo::Exception object and "snapshot" to
       a copy of the "stash" for use in the templates.

   <b>reply-&gt;html_not_found</b>
         $c = $c-&gt;reply-&gt;html_not_found;

       Render the not found template "not_found.$mode.$format.*" or "not_found.$format.*" and set the response
       status code to 404. Also sets the stash value "snapshot" to a copy of the "stash" for use in the
       templates.

   <b>reply-&gt;json_exception</b>
         $c = $c-&gt;reply-&gt;json_exception('Oops!');
         $c = $c-&gt;reply-&gt;json_exception(Mojo::Exception-&gt;new);

       Render a JSON response and set the response status to 500.

   <b>reply-&gt;json_not_found</b>
         $c = $c-&gt;reply-&gt;json_not_found;

       Render a JSON response and set the response status to 404.

   <b>reply-&gt;not_found</b>
         $c = $c-&gt;reply-&gt;not_found;

       Render a not found response in the appropriate format by delegating to more specific exception helpers.

   <b>reply-&gt;static</b>
         $c-&gt;reply-&gt;static('images/logo.png');
         $c-&gt;reply-&gt;static('../lib/MyApp.pm');

       Reply with a static file using "static" in Mojolicious, usually from the "public" directories or "DATA"
       sections of your application. Note that this helper uses a relative path, but does not protect from
       traversing to parent directories.

         # Serve file from a relative path with a custom content type
         $c-&gt;res-&gt;headers-&gt;content_type('application/myapp');
         $c-&gt;reply-&gt;static('foo.txt');

   <b>reply-&gt;txt_exception</b>
         $c = $c-&gt;reply-&gt;txt_exception('Oops!');
         $c = $c-&gt;reply-&gt;txt_exception(Mojo::Exception-&gt;new);

       Render a plain text response and set the response status to 500.

   <b>reply-&gt;txt_not_found</b>
         $c = $c-&gt;reply-&gt;txt_not_found;

       Render a plain text response and set the response status to 404.

   <b>respond_to</b>
         $c = $c-&gt;respond_to(
           json =&gt; {json =&gt; {message =&gt; 'Welcome!'}},
           html =&gt; {template =&gt; 'welcome'},
           any  =&gt; sub {...}
         );

       Automatically select best possible representation for resource from "format" "GET"/"POST" parameter,
       "format" stash value or "Accept" request header, defaults to "default_format" in Mojolicious::Renderer or
       rendering an empty 204 response. Each representation can be handled with a callback or a hash reference
       containing arguments to be passed to "render" in Mojolicious::Controller.

         # Everything else than "json" and "xml" gets a 204 response
         $c-&gt;respond_to(
           json =&gt; sub { $c-&gt;render(json =&gt; {just =&gt; 'works'}) },
           xml  =&gt; {text =&gt; '&lt;just&gt;works&lt;/just&gt;'},
           any  =&gt; {data =&gt; '', status =&gt; 204}
         );

       For more advanced negotiation logic you can also use "accepts".

   <b>session</b>
         %= session 'foo'

       Alias for "session" in Mojolicious::Controller.

   <b>stash</b>
         %= stash 'foo'
         % stash foo =&gt; 'bar';

       Alias for "stash" in Mojolicious::Controller.

         %= stash('name') // 'Somebody'

   <b>timing-&gt;begin</b>
         $c-&gt;timing-&gt;begin('foo');

       Create named timestamp for "timing-&gt;elapsed".

   <b>timing-&gt;elapsed</b>
         my $elapsed = $c-&gt;timing-&gt;elapsed('foo');

       Return fractional amount of time in seconds since named timstamp has been created with "timing-&gt;begin" or
       "undef" if no such timestamp exists.

         # Log timing information
         $c-&gt;timing-&gt;begin('database_stuff');
         ...
         my $elapsed = $c-&gt;timing-&gt;elapsed('database_stuff');
         $c-&gt;app-&gt;log-&gt;debug("Database stuff took $elapsed seconds");

   <b>timing-&gt;rps</b>
         my $rps = $c-&gt;timing-&gt;rps('0.001');

       Return fractional number of requests that could be performed in one second if every singe one took the
       given amount of time in seconds or "undef" if the number is too low.

         # Log more timing information
         $c-&gt;timing-&gt;begin('web_stuff');
         ...
         my $elapsed = $c-&gt;timing-&gt;elapsed('web_stuff');
         my $rps     = $c-&gt;timing-&gt;rps($elapsed);
         $c-&gt;app-&gt;log-&gt;debug("Web stuff took $elapsed seconds ($rps per second)");

   <b>timing-&gt;server_timing</b>
         $c-&gt;timing-&gt;server_timing('metric');
         $c-&gt;timing-&gt;server_timing('metric', 'Some Description');
         $c-&gt;timing-&gt;server_timing('metric', 'Some Description', '0.001');

       Create "Server-Timing" header with optional description and duration.

         # "Server-Timing: miss"
         $c-&gt;timing-&gt;server_timing('miss');

         # "Server-Timing: dc;desc=atl"
         $c-&gt;timing-&gt;server_timing('dc', 'atl');

         # "Server-Timing: db;desc=Database;dur=0.0001"
         $c-&gt;timing-&gt;begin('database_stuff');
         ...
         my $elapsed = $c-&gt;timing-&gt;elapsed('database_stuff');
         $c-&gt;timing-&gt;server_timing('db', 'Database', $elapsed);

         # "Server-Timing: miss, dc;desc=atl"
         $c-&gt;timing-&gt;server_timing('miss');
         $c-&gt;timing-&gt;server_timing('dc', 'atl');

   <b>title</b>
         %= title
         % title 'Welcome!';
         % title 'Welcome!', foo =&gt; 'bar';

       Get or set "title" stash value, all additional key/value pairs get merged into the "stash".

   <b>ua</b>
         %= ua-&gt;get('mojolicious.org')-&gt;result-&gt;dom-&gt;at('title')-&gt;text

       Alias for "ua" in Mojolicious.

   <b>url_for</b>
         %= url_for 'named', foo =&gt; 'bar', baz =&gt; 'yada'

       Alias for "url_for" in Mojolicious::Controller.

         %= url_for('/index.html')-&gt;query(foo =&gt; 'bar')

   <b>url_for_asset</b>
         %= url_for_asset('/app.js');

       Alias for "url_for_asset" in Mojolicious::Controller.

   <b>url_for_file</b>
         %= url_for_file('/index.html');

       Alias for "url_for_file" in Mojolicious::Controller.

   <b>url_with</b>
         %= url_with 'named', foo =&gt; 'bar', baz =&gt; 'yada'

       Does the same as "url_for", but inherits query parameters from the current request.

         %= url_with-&gt;query({page =&gt; 2})

   <b>validation</b>
         my $v = $c-&gt;validation;

       Get Mojolicious::Validator::Validation object for current request to validate file uploads as well as
       "GET" and "POST" parameters extracted from the query string and "application/x-www-form-urlencoded" or
       "multipart/form-data" message body. Parts of the request body need to be loaded into memory to parse
       "POST" parameters, so you have to make sure it is not excessively large. There's a 16MiB limit for
       requests by default.

         # Validate GET/POST parameter
         my $v = $c-&gt;validation;
         $v-&gt;required('title', 'trim')-&gt;size(3, 50);
         my $title = $v-&gt;param('title');

         # Validate file upload
         my $v = $c-&gt;validation;
         $v-&gt;required('tarball')-&gt;upload-&gt;size(1, 1048576);
         my $tarball = $v-&gt;param('tarball');

</pre><h4><b>METHODS</b></h4><pre>
       Mojolicious::Plugin::DefaultHelpers inherits all methods from Mojolicious::Plugin and implements the
       following new ones.

   <b>register</b>
         $plugin-&gt;register(Mojolicious-&gt;new);

       Register helpers in Mojolicious application.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mojolicious, Mojolicious::Guides, &lt;https://mojolicious.org&gt;.

perl v5.40.0                                       2024-12-07              <u>Mojolicious::P...:<a href="../man3pm/DefaultHelpers.3pm.html">DefaultHelpers</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>