<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::MtPolicyd::Plugin::Accounting - mtpolicyd plugin for accounting in sql tables</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mtpolicyd">mtpolicyd_2.05-1.2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::MtPolicyd::Plugin::Accounting - mtpolicyd plugin for accounting in sql tables

</pre><h4><b>VERSION</b></h4><pre>
       version 2.05

</pre><h4><b>SYNOPSIS</b></h4><pre>
         &lt;Plugin acct-clients&gt;
           module = "Accounting"
           # per ip and user
           fields = "client_address,sasl_username"
           # statistics per month
           time_pattern = "%Y-%m"
           table_prefix = "acct_"
         &lt;/Plugin&gt;

       This will create a table acct_client_address and a table acct_sasl_username.

       If a request is received containing the field the plugin will update the row in the fields table. The key
       is the fields value(ip or username) and the time string build from the time_pattern.

       For each key the following counters are stored:

         * count
         * count_rcpt (count per recipient)
         * size
         * size_rcpt  (size * recipients)

       The resulting tables will look like:

         mysql&gt; select * from acct_client_address;
         +----+--------------+---------+-------+------------+--------+-----------+
         | id | key          | time    | count | count_rcpt | size   | size_rcpt |
         +----+--------------+---------+-------+------------+--------+-----------+
         |  1 | 192.168.0.1  | 2014-12 |    11 |         11 | 147081 |    147081 |
         |  2 | 192.168.1.1  | 2014-12 |     1 |          1 |  13371 |     13371 |
         | 12 | 192.168.2.1  | 2014-12 |    10 |        100 | 133710 |   1337100 |
         ...

   <b>PARAMETERS</b>
       The module takes the following parameters:

       (uc_)enabled (default: on)
           Enable/disable this check.

       fields (required)
           A comma separated list of fields used for accounting.

           For each field a table will be created.

           For a list of available fields see postfix documentation:

           <a href="http://www.postfix.org/SMTPD_POLICY_README.html">http://www.postfix.org/SMTPD_POLICY_README.html</a>

       time_pattern (default: "%Y-%m")
           A format string for building the time key used to store counters.

           Default is to build counters on a monthly base.

           For example use:

             * "%Y-%W" for weekly
             * "%Y-%m-%d" for daily

           See "man date" for format string sequences.

       table_prefix (default: "acct_")
           A prefix to add to every table.

           The table name will be the prefix + field_name.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This plugin can be used to do accounting based on request fields.

</pre><h4><b>AUTHOR</b></h4><pre>
       Markus Benning &lt;<a href="mailto:ich@markusbenning.de">ich@markusbenning.de</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2014 by Markus Benning &lt;<a href="mailto:ich@markusbenning.de">ich@markusbenning.de</a>&gt;.

       This is free software, licensed under:

         The GNU General Public License, Version 2, June 1991

perl v5.38.2                                       2024-05-26              <u>Mail::MtPolicy...gin::<a href="../man3pm/Accounting.3pm.html">Accounting</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>