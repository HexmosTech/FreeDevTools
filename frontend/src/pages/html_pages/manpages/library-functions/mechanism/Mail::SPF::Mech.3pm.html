<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mail::SPF::Mech - SPF record mechanism base class</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmail-spf-perl">libmail-spf-perl_3.20250505-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mail::SPF::Mech - SPF record mechanism base class

</pre><h4><b>VERSION</b></h4><pre>
       version 3.20250505

</pre><h4><b>DESCRIPTION</b></h4><pre>
       An object of class <b>Mail::SPF::Mech</b> represents a mechanism within an SPF record.  Mail::SPF::Mech cannot
       be instantiated directly.  Create an instance of a concrete sub-class instead.

   <b>Constructors</b>
       The following constructors are provided:

       <b>new(%options)</b>: returns <u>Mail::SPF::Mech</u>
           <u>Abstract</u>.  Creates a new SPF record mechanism object.

           %options is a list of key/value pairs representing any of the following options:

           <b>text</b>
               A <u>string</u> denoting the unparsed text of the mechanism.

           <b>qualifier</b>
               A  single-character  <u>string</u> denoting the qualifier of the mechanism.  Any of the following may be
               specified: <b>'+'</b> ("Pass"), <b>'-'</b> ("Fail"), <b>'~'</b> ("SoftFail"), <b>'?'</b> ("Neutral").  See  RFC  4408,  4.6.2
               and 2.5, for their meanings.  Defaults to <b>'+'</b>.

           <b>name</b>
               A  <u>string</u>  denoting  the name of the mechanism.  <u>Required</u> if a generic <u>Mail::SPF::Mech</u> object (as
               opposed to a specific sub-class) is being constructed.

           <b>ip_network</b>
               A <u>NetAddr::IP</u> object denoting an optional IP address network parameter of the mechanism.  Can  be
               either  an  IPv4  or  an  IPv6 address, with an optional network prefix length.  IPv4-mapped IPv6
               addresses (e.g.  '::ffff:192.168.0.1')  must  <u>not</u>  be  specified  directly,  but  as  plain  IPv4
               addresses.

           <b>domain_spec</b>
               Either  a  plain  <u>string</u>  or  a  <u>Mail::SPF::MacroString</u> object denoting an optional "domain-spec"
               parameter of the mechanism.

           <b>ipv4_prefix_length</b>
           <b>ipv6_prefix_length</b>
               A <u>string</u> denoting an optional IPv4 or IPv6 network prefix length for  the  "domain_spec"  of  the
               mechanism.   Note  that  these  options  do  not  apply to the "ip_network" option, which already
               includes an optional network prefix length.

           Other options may be specified by sub-classes of Mail::SPF::Mech.

       <b>new_from_string($text,</b> <b>%options)</b>: returns <u>Mail::SPF::Mech</u>; throws <u>Mail::SPF::ENothingToParse</u>,
       <u>Mail::SPF::EInvalidMech</u>
           <u>Abstract</u>.  Creates a new SPF record mechanism object by parsing the string and any options given.

   <b>Class</b> <b>methods</b>
       The following class methods are provided:

       <b>default_qualifier</b>: returns <u>string</u>
           Returns the default qualifier, i.e. <b>'+'</b>.

       <b>default_ipv4_prefix_length</b>: returns <u>integer</u>
           Returns the default IPv4 network prefix length, i.e. <b>32</b>.

       <b>default_ipv6_prefix_length</b>: returns <u>integer</u>
           Returns the default IPv6 network prefix length, i.e. <b>128</b>.

       <b>qualifier_pattern</b>: returns <u>Regexp</u>
           Returns a regular expression that matches any legal mechanism qualifier, i.e. <b>'+'</b>, <b>'-'</b>, <b>'~'</b>, or <b>'?'</b>.

       <b>name</b>: returns <u>string</u>
           <u>Abstract</u>.  Returns the name of the mechanism.

           This method is abstract and must be implemented by sub-classes of Mail::SPF::Mech.

       <b>name_pattern</b>: returns <u>Regexp</u>
           Returns a regular expression that matches any legal mechanism name.

   <b>Instance</b> <b>methods</b>
       The following instance methods are provided:

       <b>text</b>: returns <u>string</u>; throws <u>Mail::SPF::ENoUnparsedText</u>
           Returns the unparsed text of the mechanism.  Throws a  <u>Mail::SPF::ENoUnparsedText</u>  exception  if  the
           mechanism was created synthetically instead of being parsed, and no text was provided.

       <b>qualifier</b>: returns <u>string</u>
           Returns  the  qualifier of the mechanism.  See the description of the "new" constructor's "qualifier"
           option.

       <b>params</b>: returns <u>string</u>
           <u>Abstract</u>.  Returns the mechanism's parameters formatted as a string.

           A sub-class of Mail::SPF::Mech does not have to implement this method if it supports no parameters.

       <b>stringify</b>: returns <u>string</u>
           Formats the mechanism's qualifier, name, and parameters as a string and  returns  it.   (A  qualifier
           that matches the default of <b>'+'</b> is omitted.)  You can simply use a Mail::SPF::Mech object as a string
           for the same effect, see "OVERLOADING".

       <b>domain($server,</b> <b>$request)</b>: returns <u>string</u>
           Returns the target domain of the mechanism.  Depending on whether the mechanism does have an explicit
           "domain_spec"  parameter, this is either the macro-expanded "domain_spec" parameter, or the request's
           authority domain (see "authority_domain" in Mail::SPF::Request) otherwise.  Both a  <u>Mail::SPF::Server</u>
           and a <u>Mail::SPF::Request</u> object are required for resolving the target domain.

       <b>match($server,</b> <b>$request)</b>: returns <u>boolean</u>; throws <u>Mail::SPF::Result::Error</u>
           <u>Abstract</u>.    Checks  whether  the  mechanism  matches  the  parameters  of  the  given  request  (see
           Mail::SPF::Request) and returns <b>true</b> if it does, or <b>false</b> otherwise.   In  any  case,  takes  both  a
           <u>Mail::SPF::Server</u> and a <u>Mail::SPF::Request</u> object.

           This method is abstract and must be implemented by sub-classes of Mail::SPF::Mech.

       <b>match_in_domain($server,</b> <b>$request)</b>: returns <u>boolean</u>; throws <u>Mail::SPF::Result::Error</u>
       <b>match_in_domain($server,</b> <b>$request,</b> <b>$domain)</b>: returns <u>boolean</u>; throws <u>Mail::SPF::Result::Error</u>
           Checks  whether  the  mechanism's  target domain name (that is, any of its DNS "A" or "AAAA" records)
           matches the given request's IP address (see "ip_address" in Mail::SPF::Request), and returns <b>true</b>  if
           it  does,  or  <b>false</b>  otherwise.   If  an  explicit  domain  is  specified, it is used instead of the
           mechanism's target domain.  The mechanism's IP network prefix lengths are respected when matching DNS
           address records against the request's IP address.  See RFC 4408, 5, for the exact algorithm used.

           This method exists mainly for the convenience of sub-classes of Mail::SPF::Mech.

       <b>explain($server,</b> <b>$request,</b> <b>$result)</b>
           Locally generates an explanation for why the mechanism caused the given result, and stores it in  the
           given request object's state.

           There is no need to override this method in sub-classes.  See the "explanation_template" method.

       <b>explanation_template($server,</b> <b>$request,</b> <b>$result)</b>: returns <u>string</u>
           Returns  a macro string template for a locally generated explanation for why the mechanism caused the
           given result object.

           Sub-classes should either define an "explanation_templates_by_result_code" hash constant  with  their
           own templates, or override this method.

</pre><h4><b>OVERLOADING</b></h4><pre>
       If  a  Mail::SPF::Mech  object  is used as a <u>string</u>, the "stringify" method is used to convert the object
       into a string.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mail::SPF::Mech::All,       Mail::SPF::Mech::IP4,        Mail::SPF::Mech::IP6,        Mail::SPF::Mech::A,
       Mail::SPF::Mech::MX, Mail::SPF::Mech::PTR, Mail::SPF::Mech::Exists, Mail::SPF::Mech::Include

       Mail::SPF, Mail::SPF::Record, Mail::SPF::Term

       &lt;<a href="http://tools.ietf.org/html/rfc4408">http://tools.ietf.org/html/rfc4408</a>&gt;

       For availability, support, and license information, see the README file included with Mail::SPF.

</pre><h4><b>AUTHORS</b></h4><pre>
       Julian Mehnle &lt;<a href="mailto:julian@mehnle.net">julian@mehnle.net</a>&gt;, Shevek &lt;<a href="mailto:cpan@anarres.org">cpan@anarres.org</a>&gt;

perl v5.40.1                                       2025-05-10                               <u>Mail::SPF::<a href="../man3pm/Mech.3pm.html">Mech</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>