<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>__pmServerNotifyServiceManagerReady,  __pmServerNotifyServiceManagerStopping  -  notify service start and</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>__pmServerNotifyServiceManagerReady</b>,  <b>__pmServerNotifyServiceManagerStopping</b>  -  notify service start and
       stop

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>"pmapi.h"</b>
       <b>#include</b> <b>"libpcp.h"</b>

       <b>int</b> <b>__pmServerNotifyServiceManagerReady(pid_t</b> <u>mainpid</u><b>);</b>
       <b>int</b> <b>__pmServerNotifyServiceManagerStopping(pid_t</b> <u>mainpid</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>CAVEAT</b></h4><pre>
       This documentation is intended for internal Performance Co-Pilot (PCP) developer use.

       These interfaces are not part of the PCP APIs that are guaranteed to remain fixed  across  releases,  and
       they may not work, or may provide different semantics at some point in the future.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Within  the  libraries  and  applications  of  the  Performance  Co-Pilot  (PCP) these routines provide a
       convenient and portable interface to service manager APIs, such as <b><a href="../man3/sd_notify.3.html">sd_notify</a></b>(3).

       PCP service daemons should call <b>__pmServerNotifyServiceManagerReady</b> immediately prior to  entering  their
       main  loop,  regardless  of  whether or not they have forked or daemonised.  This will notify the service
       manager (if any, depending on the platform) that the daemon  service  has  started,  and  that  the  main
       process to be tracked is <b>mainpid</b>.

       Similarly  when  shutting  down,  service  daemons  should call <b>__pmServerNotifyServiceManagerStopping</b> to
       notify the service manager (if any) that the tracked process of the service has returned from  it's  main
       loop and is about to shut down.

       These  routines are intended to be portable and thus no conditional code should be needed for any service
       daemon on any platform.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       These functions will print diagnostics to the <b>stderr</b> stream if <b>pmDebugOptions.services</b> is set.

</pre><h4><b>RETURN</b> <b>CODE</b></h4><pre>
       If successful, <b>__pmServerNotifyServiceManagerReady</b>  returns  a  positive  integer  that  depends  on  the
       platform  service  manager.   In  the  case  of <b><a href="../man1/systemd.1.html">systemd</a></b>(1), the return code is from <b><a href="../man3/sd_notify.3.html">sd_notify</a></b>(3).  If the
       platform supports <b><a href="../man1/systemd.1.html">systemd</a></b>(1) but the <b>NOTIFY_SOCKET</b> environment variable is not set (as may be the case if
       the server program is started manually rather than by <b><a href="../man1/systemd.1.html">systemd</a></b>(1)), the return code will be <b>PM_ERR_GENERIC</b>
       which will normally be ignored but a diagnostic will be printed if <b>pmDebugOptions.services</b>  is  set.   On
       platforms  that  have no service manager, the return code will be <b>PM_ERR_NYI</b>.  For backward compatibility
       on these platforms, the return code should be ignored.

Performance Co-Pilot                                   PCP                  <u><a href="../man3/PMSERVERNOTIFYSERVICEMANAGERREADY.3.html">PMSERVERNOTIFYSERVICEMANAGERREADY</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>