<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rex::Commands::Service - Manage System Services</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/rex">rex_1.16.0-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Rex::Commands::Service - Manage System Services

</pre><h4><b>DESCRIPTION</b></h4><pre>
       With this module you can manage Linux services.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Rex::Commands::Service

        service apache2 =&gt; "start";

        service apache2 =&gt; "stop";

        service apache2 =&gt; "restart";

        service apache2 =&gt; "status";

        service apache2 =&gt; "reload";

        service apache2 =&gt; "ensure", "started";

        service apache2 =&gt; "ensure", "stopped";

</pre><h4><b>EXPORTED</b> <b>FUNCTIONS</b></h4><pre>
   <b>service($service,</b> <b>$action,</b> <b>[$option])</b>
       The service function accepts 2 parameters. The first is the service name and the second the action you
       want to perform.

       starting a service
            task "start-service", "server01", sub {
              service apache2 =&gt; "start";
            };

       stopping a service
            task "stop-service", "server01", sub {
              service apache2 =&gt; "stop";
            };

       restarting a service
            task "restart-service", "server01", sub {
              service apache2 =&gt; "restart";
            };

       checking status of a service
            task "status-service", "server01", sub {
              if( service apache2 =&gt; "status" ) {
                say "Apache2 is running";
              }
              else {
                say "Apache2 is not running";
              }
            };

       reloading a service
            task "reload-service", "server01", sub {
              service apache2 =&gt; "reload";
            };

       ensure that a service will started at boot time
            task "prepare", sub {
              service "apache2",
                ensure =&gt; "started";
            };

       ensure that a service will NOT be started.
            task "prepare", sub {
              service "apache2",
                ensure =&gt; "stopped";
            };

           If  you  need  to  define a custom command for start, stop, restart, reload or status you can do this
           with the corresponding options.

            task "prepare", sub {
              service "apache2",
                ensure  =&gt; "started",
                start   =&gt; "/usr/local/bin/httpd -f /etc/my/httpd.conf",
                stop    =&gt; "killall httpd",
                status  =&gt; "ps -efww | grep httpd",
                restart =&gt; "killall httpd &amp;&amp; /usr/local/bin/httpd -f /etc/my/httpd.conf",
                reload  =&gt; "killall httpd &amp;&amp; /usr/local/bin/httpd -f /etc/my/httpd.conf";
            };

           This function supports the following hooks:

           before_${action}
               For example: "before_start", "before_stop", "before_restart"

               This gets executed right before the given service action. All original parameters are  passed  to
               it.

           after_${action}
               For example: "after_start", "after_stop", "after_restart"

               This  gets  executed  right  after  the  given  service  action. All original parameters, and any
               returned results are passed to it.

   <b>service_provider_for</b> <b>$os</b> <b>=&gt;</b> <b>$type;</b>
       To set another service provider as the default, use this function.

        user "root";

        group "db" =&gt; "db[01..10]";
        service_provider_for SunOS =&gt; "svcadm";

        task "start", group =&gt; "db", sub {
           service ssh =&gt; "restart";
        };

       This example will restart the <u>ssh</u> service via svcadm (but only on SunOS, on other  operating  systems  it
       will use the default).

perl v5.40.0                                       2025-02-06                        <u>Rex::Commands::<a href="../man3pm/Service.3pm.html">Service</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>