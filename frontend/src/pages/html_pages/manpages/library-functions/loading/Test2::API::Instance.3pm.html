<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test2::API::Instance - Object used by Test2::API under the hood</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-simple-perl">libtest-simple-perl_1.302210-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test2::API::Instance - Object used by Test2::API under the hood

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This object encapsulates the global shared state tracked by Test2. A single global instance of this
       package is stored (and obscured) by the Test2::API package.

       There is no reason to directly use this package. This package is documented for completeness. This
       package can change, or go away completely at any time.  Directly using, or monkeypatching this package is
       not supported in any way shape or form.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Test2::API::Instance;

           my $obj = Test2::API::Instance-&gt;new;

       $pid = $obj-&gt;pid
           PID of this instance.

       $obj-&gt;tid
           Thread ID of this instance.

       $obj-&gt;<b>reset()</b>
           Reset the object to defaults.

       $obj-&gt;<b>load()</b>
           Set the internal state to loaded, and run and stored post-load callbacks.

       $bool = $obj-&gt;loaded
           Check if the state is set to loaded.

       $arrayref = $obj-&gt;post_load_callbacks
           Get the post-load callbacks.

       $obj-&gt;add_post_load_callback(sub { ... })
           Add  a  post-load  callback.  If load() has already been called then the callback will be immediately
           executed. If load() has not been called then the callback will be  stored  and  executed  later  when
           load() is called.

       $hashref = $obj-&gt;<b>contexts()</b>
           Get a hashref of all active contexts keyed by hub id.

       $arrayref = $obj-&gt;context_acquire_callbacks
           Get all context acquire callbacks.

       $arrayref = $obj-&gt;context_init_callbacks
           Get all context init callbacks.

       $arrayref = $obj-&gt;context_release_callbacks
           Get all context release callbacks.

       $arrayref = $obj-&gt;pre_subtest_callbacks
           Get all pre-subtest callbacks.

       $obj-&gt;add_context_init_callback(sub { ... })
           Add  a  context  init  callback.  Subs are called every time a context is created. Subs get the newly
           created context as their only argument.

       $obj-&gt;add_context_release_callback(sub { ... })
           Add a context release callback. Subs are called every time  a  context  is  released.  Subs  get  the
           released context as their only argument. These callbacks should not call release on the context.

       $obj-&gt;add_pre_subtest_callback(sub { ... })
           Add  a  pre-subtest  callback.  Subs are called every time a subtest is going to be run. Subs get the
           subtest name, coderef, and any arguments.

       $obj-&gt;<b>set_exit()</b>
           This is intended to be called in an "END { ... }" block. This will look at test  state  and  set  $?.
           This will also call any end callbacks, and wait on child processes/threads.

       $obj-&gt;set_ipc_pending($val)
           Tell  other  processes  and  threads there is a pending event. $val should be a unique value no other
           thread/process will generate.

           <b>Note:</b> This will also make the current process see a pending event.

       $pending = $obj-&gt;<b>get_ipc_pending()</b>
           This returns -1 if it is not possible to know.

           This returns 0 if there are no pending events.

           This returns 1 if there are pending events.

       $timeout = $obj-&gt;ipc_timeout;
       $obj-&gt;set_ipc_timeout($timeout);
           How long to wait for child processes and threads before aborting.

       $drivers = $obj-&gt;ipc_drivers
           Get the list of IPC drivers.

       $obj-&gt;add_ipc_driver($DRIVER_CLASS)
           Add an IPC driver to the list. The most recently added IPC driver will become the global  one  during
           initialization. If a driver is added after initialization has occurred a warning will be generated:

               "IPC driver $driver loaded too late to be used as the global ipc driver"

       $bool = $obj-&gt;ipc_polling
           Check if polling is enabled.

       $obj-&gt;enable_ipc_polling
           Turn  on  polling.  This  will  cull  events from other processes and threads every time a context is
           created.

       $obj-&gt;disable_ipc_polling
           Turn off IPC polling.

       $bool = $obj-&gt;no_wait
       $bool = $obj-&gt;set_no_wait($bool)
           Get/Set no_wait. This option is used to turn off process/thread waiting at exit.

       $arrayref = $obj-&gt;exit_callbacks
           Get the exit callbacks.

       $obj-&gt;add_exit_callback(sub { ... })
           Add an exit callback. This callback will be called by set_exit().

       $bool = $obj-&gt;finalized
           Check if the object is finalized. Finalization happens when either ipc(), stack(),  or  format()  are
           called  on  the  object.  Once  finalization  happens  these  fields are considered unchangeable (not
           enforced here, enforced by Test2).

       $ipc = $obj-&gt;ipc
           Get the one true IPC instance.

       $obj-&gt;ipc_disable
           Turn IPC off

       $bool = $obj-&gt;ipc_disabled
           Check if IPC is disabled

       $stack = $obj-&gt;stack
           Get the one true hub stack.

       $formatter = $obj-&gt;formatter
           Get the global formatter. By default this is the 'Test2::Formatter::TAP' package. This could  be  any
           package that implements the write() method. This can also be an instantiated object.

       $bool = $obj-&gt;<b>formatter_set()</b>
           Check if a formatter has been set.

       $obj-&gt;add_formatter($class)
       $obj-&gt;add_formatter($obj)
           Add  a formatter. The most recently added formatter will become the global one during initialization.
           If a formatter is added after initialization has occurred a warning will be generated:

               "Formatter $formatter loaded too late to be used as the global formatter"

       $obj-&gt;set_add_uuid_via(sub { ... })
       $sub = $obj-&gt;<b>add_uuid_via()</b>
           This allows you to provide a UUID generator. If provided UUIDs will be attached to all events,  hubs,
           and contexts. This is useful for storing, tracking, and linking these objects.

           The  sub  you provide should always return a unique identifier. Most things will expect a proper UUID
           string, however nothing in Test2::API enforces this.

           The sub will receive exactly 1 argument, the type of thing being tagged 'context', 'hub', or 'event'.
           In the future additional things may be tagged, in which case new strings will be passed in. These are
           purely informative, you can (and usually should) ignore them.

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Test2 can be found at &lt;https://github.com/Test-More/test-more/&gt;.

</pre><h4><b>MAINTAINERS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

       See &lt;https://dev.perl.org/licenses/&gt;

perl v5.40.1                                       2025-03-30                          <u>Test2::API::<a href="../man3pm/Instance.3pm.html">Instance</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>