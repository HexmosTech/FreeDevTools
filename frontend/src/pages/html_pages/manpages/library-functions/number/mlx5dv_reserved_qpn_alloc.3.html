<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mlx5dv_reserved_qpn_alloc - Allocate a reserved QP number from device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libibverbs-dev">libibverbs-dev_56.1-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mlx5dv_reserved_qpn_alloc - Allocate a reserved QP number from device

       mlx5dv_reserved_qpn_dealloc - Release the reserved QP number

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;infiniband/mlx5dv.h&gt;

              int mlx5dv_reserved_qpn_alloc(struct ibv_context *ctx, uint32_t *qpn);

              int mlx5dv_reserved_qpn_dealloc(struct ibv_context *ctx, uint32_t qpn);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       When  work  with  RDMA_CM  RDMA_TCP_PS  +  external  QP support, a client node needs GUID level unique QP
       numbers to comply with the CM’s timewait logic.

       If a real unique QP is not allocated, a device global QPN value is required and can be allocated via this
       interface.

       The mlx5 DCI QP is such an example, which could connect to the remote DCT’s multiple times as long as the
       application provides unique QPN for each new RDMA_CM connection.

       These 2 APIs provide the allocation/deallocation of a unique QP number from/to device.  This qpn  can  be
       used  with  DC  QPN  in  RDMA_CM  connection establishment, which will comply with the CM timewait kernel
       logic.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>ctx</u>    The device context to issue the action on.

       <u>qpn</u>    The allocated QP number (for alloc API), or the QP number to be deallocated (for dealloc API).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       0 on success; EOPNOTSUPP if not supported, or other errno value on other failures.

</pre><h4><b>AUTHOR</b></h4><pre>
       Mark Zhang <a href="mailto:markzhang@nvidia.com">markzhang@nvidia.com</a>

       Alex Rosenbaum <a href="mailto:alexr@nvidia.com">alexr@nvidia.com</a>

mlx5                                               2020-12-29             <u>mlx5dv_reserved_qpn_alloc</u> <u>/</u> <u><a href="../man3/dealloc.3.html">dealloc</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>