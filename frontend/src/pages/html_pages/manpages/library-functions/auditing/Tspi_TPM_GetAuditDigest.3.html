<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tspi_TPM_GetAuditDigest - retrieve the audit digest.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtspi-dev">libtspi-dev_0.3.15-0.4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tspi_TPM_GetAuditDigest - retrieve the audit digest.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tss/tspi.h&gt;</b>

       <b>TSS_RESULT</b> <b>Tspi_TPM_GetAuditDigest(TSS_HTPM</b>        <u>hTpm</u><b>,</b>            <b>TSS_HKEY</b>           <u>hKey</u><b>,</b>
                                          <b>TSS_BOOL</b>        <u>closeAudit</u><b>,</b>      <b>UINT32*</b>            <u>pulAuditDigestSize</u><b>,</b>
                                          <b>BYTE**</b>          <u>prgbAuditDigest</u><b>,</b> <b>TPM_COUNTER_VALUE*</b> <u>pCounterValue</u><b>,</b>
                                          <b>TSS_VALIDATION*</b> <u>pValidationData</u><b>,</b> <b>UINT32*</b>            <u>ordSize</u><b>,</b>
                                          <b>UINT32**</b>        <u>ordList</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Tspi_TPM_GetAuditDigest</b>   is  used  to  retrieve the audit digest.  The audit digest may be signed or un‐
       signed.  If the audit digest is signed (hKey is non-NULL) then the current audit digest, the current  au‐
       dit  counter  and, optionally, the hash of the audited ordinal list and a signature are returned.  If the
       audit digest is not signed (hKey is NULL) then the current audit digest, the current  audit  counter  and
       the full list of audited ordinals is returned.

</pre><h4><b>PARAMETERS</b></h4><pre>
   <b>hTpm</b>
       Handle of the TPM object.

   <b>hKey</b>
       Handle of the signature key object (the handle can be NULL).

   <b>closeAudit</b>
       A flag indicating whether or not to close the current audit digest after it is signed.  This parameter is
       ignored if <u>hKey</u> is NULL.

   <b>pulAuditDigestSize</b>
       Pointer to the size of the returned audit digest.

   <b>prgbAuditDigest</b>
       Pointer to a buffer that holds the returned audit digest.

   <b>pCounterValue</b>
       Pointer to a TPM_COUNTER_VALUE structure that holds the returned audit counter.

   <b>pValidationData</b>
       Pointer  to a validation data structure.  The validation data structure provides external information re‐
       quired to compute the signature.  On input, the fields representing the ExternalData must contain an  an‐
       ti-replay  nonce that will be used in the signing operation.  On output, this structure provides a buffer
       containing the data used to compute the validation data and a buffer containing the  validation  data  (a
       signature  generated  by  signing  the data using the key referenced by <u>hKey</u>).  If this parameter is NULL
       then the TSS will perform the validation.  This parameter is ignored if <u>hKey</u> is NULL.

   <b>ordSize</b>
       Pointer to the number of ordinals in the returned audited ordinal list.  This  parameter  is  ignored  if
       <u>hKey</u> is non-NULL.

   <b>ordList</b>
       Pointer  to  a buffer that holds the returned audited ordinal list.  This parameter is ignored if <u>hKey</u> is
       non-NULL.

</pre><h4><b>RETURN</b> <b>CODES</b></h4><pre>
       <b>Tspi_TPM_GetAuditDigest</b> returns TSS_SUCCESS on success, otherwise one of the  following  values  are  re‐
       turned:

       TSS_E_INVALID_HANDLE

       TSS_E_BAD_PARAMETER

       TSS_E_INTERNAL_ERROR - An error occurred internal to the TSS.

</pre><h4><b>CONFORMING</b> <b>TO</b></h4><pre>
       <b>Tspi_TPM_GetAuditDigest</b> conforms to the Trusted Computing Group Software Specification Version 1.2

TSS 1.2                                            2007-06-27                         <u><a href="../man3/Tspi_TPM_GetAuditDigest.3.html">Tspi_TPM_GetAuditDigest</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>