<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>notcurses_direct - the Direct Mode API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnotcurses-core-dev">libnotcurses-core-dev_3.0.7+dfsg.1-1ubuntu8_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       notcurses_direct - the Direct Mode API

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;notcurses/direct.h&gt;

              #define NCDIRECT_OPTION_INHIBIT_SETLOCALE   0x0001ull
              #define NCDIRECT_OPTION_INHIBIT_CBREAK      0x0002ull
              #define NCDIRECT_OPTION_NO_QUIT_SIGHANDLERS 0x0008ull
              #define NCDIRECT_OPTION_VERBOSE             0x0010ull
              #define NCDIRECT_OPTION_VERY_VERBOSE        0x0020ull

       <b>struct</b> <b>ncdirect*</b> <b>ncdirect_init(const</b> <b>char*</b> <u>termtype</u><b>,</b> <b>FILE*</b> <u>fp</u><b>,</b> <b>uint64_t</b> <u>flags</u><b>);</b>

       <b>unsigned</b> <b>ncdirect_palette_size(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>ncdirect_set_bg_rgb8(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>unsigned</b> <u>r</u><b>,</b> <b>unsigned</b> <u>g</u><b>,</b> <b>unsigned</b> <u>b</u><b>);</b>

       <b>int</b> <b>ncdirect_set_fg_rgb8(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>unsigned</b> <u>r</u><b>,</b> <b>unsigned</b> <u>g</u><b>,</b> <b>unsigned</b> <u>b</u><b>);</b>

       <b>int</b> <b>ncdirect_set_fg_rgb(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>unsigned</b> <u>rgb</u><b>);</b>

       <b>int</b> <b>ncdirect_set_bg_rgb(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>unsigned</b> <u>rgb</u><b>);</b>

       <b>int</b> <b>ncdirect_set_fg_default(struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>ncdirect_set_bg_default(struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>ncdirect_set_fg_palindex(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>int</b> <u>pidx</u><b>);</b>

       <b>int</b> <b>ncdirect_set_bg_palindex(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>int</b> <u>pidx</u><b>);</b>

       <b>unsigned</b> <b>ncdirect_dim_x(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>unsigned</b> <b>ncdirect_dim_y(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>unsigned</b> <b>ncdirect_supported_styles(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>ncdirect_styles_set(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>unsigned</b> <u>stylebits</u><b>);</b>

       <b>int</b> <b>ncdirect_styles_on(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>unsigned</b> <u>stylebits</u><b>);</b>

       <b>int</b> <b>ncdirect_styles_off(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>unsigned</b> <u>stylebits</u><b>);</b>

       <b>unsigned</b> <b>ncdirect_styles(struct</b> <b>ncdirect*</b> <u>n</u><b>);</b>

       <b>int</b> <b>ncdirect_clear(struct</b> <b>ncdirect*</b> <u>nc</u><b>)</b>

       <b>int</b> <b>ncdirect_stop(struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>ncdirect_cursor_move_yx(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>int</b> <u>y</u><b>,</b> <b>int</b> <u>x</u><b>);</b>

       <b>int</b> <b>ncdirect_cursor_yx(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>unsigned*</b> <u>y</u><b>,</b> <b>unsigned*</b> <u>x</u><b>);</b>

       <b>int</b> <b>ncdirect_cursor_enable(struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>ncdirect_cursor_disable(struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>ncdirect_cursor_up(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>int</b> <u>num</u><b>);</b>

       <b>int</b> <b>ncdirect_cursor_left(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>int</b> <u>num</u><b>);</b>

       <b>int</b> <b>ncdirect_cursor_right(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>int</b> <u>num</u><b>);</b>

       <b>int</b> <b>ncdirect_cursor_down(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>int</b> <u>num</u><b>);</b>

       <b>int</b> <b>ncdirect_putstr(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>uint64_t</b> <u>channels</u><b>,</b> <b>const</b> <b>char*</b> <u>utf8</u><b>);</b>

       <b>int</b> <b>ncdirect_putegc(struct</b> <b>ncdirect*</b> <u>nc</u><b>,</b> <b>uint64_t</b> <u>channels</u><b>,</b> <b>const</b> <b>char*</b> <u>utf8</u><b>,</b> <b>int*</b> <u>sbytes</u><b>);</b>

       <b>int</b> <b>ncdirect_printf_aligned(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>int</b> <u>y</u><b>,</b> <b>ncalign_e</b> <u>align</u><b>,</b> <b>const</b> <b>char*</b> <u>fmt</u><b>,</b> <u>...</u><b>);</b>

       <b>const</b> <b>char*</b> <b>ncdirect_detected_terminal(const</b> <b>struct</b> <b>ncdirect*</b> <u>n</u><b>);</b>

       <b>int</b> <b>ncdirect_hline_interp(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>const</b> <b>char*</b> <u>egc</u><b>,</b> <b>unsigned</b> <u>len</u><b>,</b> <b>uint64_t</b> <u>h1</u><b>,</b> <b>uint64_t</b> <u>h2</u><b>);</b>

       <b>int</b> <b>ncdirect_vline_interp(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>const</b> <b>char*</b> <u>egc</u><b>,</b> <b>unsigned</b> <u>len</u><b>,</b> <b>uint64_t</b> <u>h1</u><b>,</b> <b>uint64_t</b> <u>h2</u><b>);</b>

       <b>int</b>  <b>ncdirect_box(struct</b>  <b>ncdirect*</b> <u>n</u><b>,</b> <b>uint64_t</b> <u>ul</u><b>,</b> <b>uint64_t</b> <u>ur</u><b>,</b> <b>uint64_t</b> <u>ll</u><b>,</b> <b>uint64_t</b> <u>lr</u><b>,</b> <b>const</b> <b>wchar_t*</b>
       <u>wchars</u><b>,</b> <b>int</b> <u>ylen</u><b>,</b> <b>int</b> <u>xlen</u><b>,</b> <b>unsigned</b> <u>ctlword</u><b>);</b>

       <b>int</b> <b>ncdirect_rounded_box(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>uint64_t</b> <u>ul</u><b>,</b> <b>uint64_t</b> <u>ur</u><b>,</b>  <b>uint64_t</b>  <u>ll</u><b>,</b>  <b>uint64_t</b>  <u>lr</u><b>,</b>  <b>int</b>
       <u>ylen</u><b>,</b> <b>int</b> <u>xlen</u><b>,</b> <b>unsigned</b> <u>ctlword</u><b>);</b>

       <b>int</b> <b>ncdirect_double_box(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>uint64_t</b> <u>ul</u><b>,</b> <b>uint64_t</b> <u>ur</u><b>,</b> <b>uint64_t</b> <u>ll</u><b>,</b> <b>uint64_t</b> <u>lr</u><b>,</b> <b>int</b> <u>ylen</u><b>,</b>
       <b>int</b> <u>xlen</u><b>,</b> <b>unsigned</b> <u>ctlword</u><b>);</b>

       <b>ncdirectv*</b> <b>ncdirect_render_frame(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>const</b> <b>char*</b> <u>filename</u><b>,</b> <b>ncblitter_e</b> <u>blitter</u><b>,</b> <b>ncscale_e</b>
       <u>scale</u><b>,</b> <b>int</b> <u>maxy</u><b>,</b> <b>int</b> <u>maxx</u><b>);</b>

       <b>char*</b> <b>ncdirect_readline(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>const</b> <b>char*</b> <u>prompt</u><b>);</b>

       <b>bool</b> <b>ncdirect_cantruecolor(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canchangecolor(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canfade(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canopen_images(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canopen_videos(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canutf8(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>int</b> <b>ncdirect_check_pixel_support(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canhalfblock(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canquadrant(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_cansextant(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canbraille(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>bool</b> <b>ncdirect_canget_cursor(const</b> <b>struct</b> <b>ncdirect*</b> <u>nc</u><b>);</b>

       <b>uint32_t</b> <b>ncdirect_get(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>const</b> <b>struct</b> <b>timespec*</b> <u>absdl</u><b>,</b> <b>ncinput*</b> <u>ni</u><b>);</b>

              typedef struct ncvgeom {
                int pixy, pixx;     // true pixel geometry of ncvisual data
                int cdimy, cdimx;   // terminal cell geometry when this was calculated
                int rpixy, rpixx;   // rendered pixel geometry
                int rcelly, rcellx; // rendered cell geometry
                int scaley, scalex; // pixels per filled cell
                // only defined for NCBLIT_PIXEL
                int maxpixely, maxpixelx;
              } ncvgeom;

       <b>int</b>  <b>ncdirect_render_image(struct</b>  <b>ncdirect*</b>  <u>n</u><b>,</b>  <b>const</b>  <b>char*</b>  <u>filename</u><b>,</b>  <b>ncblitter_e</b> <u>blitter</u><b>,</b> <b>ncscale_e</b>
       <u>scale</u><b>);</b>

       <b>int</b> <b>ncdirect_raster_frame(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>ncdirectv*</b> <u>ncdv</u><b>,</b> <b>ncalign_e</b> <u>align</u><b>);</b>

       <b>int</b> <b>ncdirect_stream(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>const</b> <b>char*</b> <u>filename</u><b>,</b> <b>ncstreamcb</b>  <u>streamer</u><b>,</b>  <b>struct</b>  <b>ncvisual_op‐</b>
       <b>tions*</b> <u>vopts</u><b>,</b> <b>void*</b> <u>curry</u><b>);</b>

       <b>int</b> <b>ncdirect_raster_frame(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>ncdirectv*</b> <u>ncdv</u><b>,</b> <b>ncalign_e</b> <u>align</u><b>);</b>

       <b>struct</b> <b>ncdirectf*</b> <b>ncdirectf_from_file(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>const</b> <b>char*</b> <u>filename</u><b>);</b>*

       <b>void</b> <b>ncdirectf_free(struct</b> <b>ncdirectf*</b> <u>frame</u><b>);</b>

       <b>ncdirectv*</b>  <b>ncdirectf_render(struct</b>  <b>ncdirect*</b>  <u>n</u><b>,</b> <b>struct</b> <b>ncdirectf*</b> <u>frame</u><b>,</b> <b>const</b> <b>struct</b> <b>ncvisual_options</b>
       <u>vopts</u><b>);</b>

       <b>int</b> <b>ncdirectf_geom(struct</b> <b>ncdirect*</b> <u>n</u><b>,</b> <b>struct</b> <b>ncdirectf*</b> <u>frame</u><b>,</b> <b>const</b> <b>struct</b> <b>ncvisual_options</b> <u>vopts</u><b>,</b> <b>ncv‐</b>
       <b>geom*</b> <u>geom</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>ncdirect_init</b> prepares the <b>FILE</b> provided as <b>fp</b> for colorizing and styling.  On success, a  pointer  to  a
       valid <b>struct</b> <b>ncdirect</b> is returned.  <b>NULL</b> is returned on failure.  Before the process exits, <b>ncdirect_stop</b>
       should  be  called  to  reset the terminal and free up resources.  <b>ncdirect_init</b> places the terminal into
       "cbreak" (also known as "rare") mode, disabling line-buffering and echo of input.  <b>ncdirect_stop</b> restores
       the terminal state as it was when the corresponding <b>ncdirect_init</b> call was made.  A process can have only
       one context active at once.

       The following flags are defined:

       • <b>NCDIRECT_OPTION_INHIBIT_SETLOCALE</b>: Unless this flag is set, <b>ncdirect_init</b> will  call  <b>setlocale(LC_ALL,</b>
         <b>NULL)</b>.   If  the  result  is either "<b>C</b>" or "<b>POSIX</b>", it will print a diagnostic to <b>stderr</b>, and then call
         <b>setlocale(LC_ALL,</b> <b>"").</b>  This will attempt to set the locale based off the  <b>LANG</b>  environment  variable.
         Your program should call <b><a href="../man3/setlocale.3.html">setlocale</a>(3)</b> itself, usually as one of the first lines.

       • <b>NCDIRECT_OPTION_INHIBIT_CBREAK</b>:  Unless  this  flag  is set, <b>ncdirect_init</b> will place the terminal into
         cbreak mode (i.e.  disabling echo and line buffering; see <b><a href="../man3/tcgetattr.3.html">tcgetattr</a>(3)</b>).

       • <b>NCDIRECT_OPTION_DRAIN_INPUT</b>: Standard input may be freely discarded.  If you do not intend  to  process
         input, pass this flag.  Otherwise, input can buffer up, eventually preventing Notcurses from processing
         terminal messages.  It will furthermore avoid wasting time processing useless input.

       • <b>NCDIRECT_OPTION_NO_QUIT_SIGHANDLERS</b>:  A  signal  handler will usually be installed for <b>SIGABRT</b>, <b>SIGBUS</b>,
         <b>SIGFPE</b>, <b>SIGILL</b>, <b>SIGINT</b>, <b>SIGQUIT</b>, <b>SIGSEGV</b>, and <b>SIGTERM</b>, cleaning up the  terminal  on  such  exceptions.
         With this flag, the handler will not be installed.

       • <b>NCDIRECT_OPTION_VERBOSE</b>: Enable diagnostics to <b>stderr</b> at the level of <b>NCLOGLEVEL_WARNING</b>.

       • <b>NCDIRECT_OPTION_VERY_VERBOSE</b>:  Enable  all diagnostics (equivalent to <b>NCLOGLEVEL_TRACE</b>).  Implies <b>NCDI‐</b>
         <b>RECT_OPTION_VERBOSE</b>.

       The loglevel can also be set externally using the <b>NOTCURSES_LOGLEVEL</b> environment variable.  See  <b>notcurs‐</b>
       <b><a href="../man3/es_init.3.html">es_init</a>(3)</b> for more information.

       An  appropriate  <b><a href="../man5/terminfo.5.html">terminfo</a>(5)</b> entry must exist for the terminal.  This entry is usually selected using the
       value of the <b>TERM</b> environment variable (see <b><a href="../man3/getenv.3.html">getenv</a>(3)</b>), but a non-<b>NULL</b> value for <b>termtype</b>  will  override
       this.   An  invalid terminfo specification can lead to reduced performance, reduced display capabilities,
       and/or display errors.  notcurses natively targets 24bpp/8bpc RGB color, and it is thus desirable to  use
       a terminal with the <b>rgb</b> capability (e.g.  xterm's <b>xterm-direct</b>).

       <b>ncdirect_dim_x</b> returns the current number of columns, and <b>ncdirect_dim_y</b> the current number of rows.

       <b>ncdirect_clear</b>  clears  the  screen using a control code if one exists in terminfo.  Otherwise, it prints
       successive newlines to scroll everything off.

       <b>ncdirect_cursor_move_yx</b> moves the cursor to the specified coordinate.  -1 can be specified for  either  <b>y</b>
       or <b>x</b> to leave that axis unchanged.

       <b>ncdirect_enable_cursor</b>  and <b>ncdirect_disable_cursor</b> always flush the output stream, taking effect immedi‐
       ately.

       <b>ncdirect_cursor_up</b> and friends all move relative to the current position.  Attempting to  e.g.   move  up
       while on the top row will return 0, but have no effect.

       <b>ncdirect_readline</b>  reads  a  (heap-allocated) line of arbitrary length, supporting some libreadline-style
       line-editing controls.  <b>NCDIRECT_OPTION_INHIBIT_CBREAK</b> should not be used if  you  intend  to  use  <b>ncdi‐</b>
       <b>rect_readline</b>;  if  used,  line-editing  keybindings cannot be implemented.  Input will be echoed whether
       this option is used or not.

       <b>ncdirect_check_pixel_support</b> must be called (and successfully return) before <b>NCBLIT_PIXEL</b> can be used  to
       render images; see <b><a href="../man3/notcurses_visual.3.html">notcurses_visual</a>(3)</b> for more details.

       When  rendering  an  image, <u><b>maxy</b></u> and <u><b>maxx</b></u> specify a maximum number of (cell) rows and columns to use, re‐
       spectively.  Passing 0 means "use as much space as is necessary".  It is an error to pass a negative num‐
       ber for either.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>ncdirect_init</b> returns <b>NULL</b> on failure.  Otherwise, the return value points to a  valid  <b>struct</b>  <b>ncdirect</b>,
       which can be used until it is provided to <b>ncdirect_stop</b>.

       <b>ncdirect_printf_aligned</b> returns the number of bytes written on success.  On failure, it returns some neg‐
       ative number.

       <b>ncdirect_putstr</b> returns a nonnegative number on success, and <b>EOF</b> on failure.

       <b>ncdirect_putegc</b>  returns  the  number of columns consumed on success, or -1 on failure.  If <u><b>sbytes</b></u> is not
       <b>NULL</b>, the number of bytes consumed will be written to it.

       <b>ncdirect_check_pixel_support</b> returns -1 on error, 0 if there is no pixel support, and 1 if pixel  support
       is successfully detected.

       <b>ncdirect_styles</b> returns the current styling, a bitmask over the various <b>NCSTYLE_</b> constants.

       All other functions return 0 on success, and non-zero on error.

</pre><h4><b>NOTES</b></h4><pre>
       You are recommended to accept <b>-v</b> and <b>-vv</b> as command-line options, mapping them to <b>NCDIRECT_OPTION_VERBOSE</b>
       and <b>NCDIRECT_OPTION_VERY_VERBOSE</b> respectively.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/getenv.3.html">getenv</a>(3)</b>,   <b><a href="../man3/notcurses.3.html">notcurses</a>(3)</b>,   <b><a href="../man3/notcurses_init.3.html">notcurses_init</a>(3)</b>,   <b><a href="../man3/notcurses_plane.3.html">notcurses_plane</a>(3)</b>,  <b><a href="../man3/notcurses_visual.3.html">notcurses_visual</a>(3)</b>,  <b><a href="../man5/terminfo.5.html">terminfo</a>(5)</b>,
       <b><a href="../man3/termios.3.html">termios</a>(3)</b>

</pre><h4><b>AUTHORS</b></h4><pre>
       nick black &lt;<a href="mailto:nickblack@linux.com">nickblack@linux.com</a>&gt;.

                                                     v3.0.7                                  <u><a href="../man3/notcurses_direct.3.html">notcurses_direct</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>