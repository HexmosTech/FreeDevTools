<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tchdb - the hash database API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtokyocabinet-dev">libtokyocabinet-dev_1.4.48-15.1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tchdb - the hash database API

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Hash database is a file containing a hash table and is handled with the hash database API.

       To use the hash database API, include `<b>tcutil.h</b>', `<b>tchdb.h</b>', and related standard header files.  Usually,
       write the following description near the front of a source file.

              <b>#include</b> <b>&lt;tcutil.h&gt;</b>
              <b>#include</b> <b>&lt;tchdb.h&gt;</b>
              <b>#include</b> <b>&lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;</b>
              <b>#include</b> <b>&lt;<a href="file:/usr/include/time.h">time.h</a>&gt;</b>
              <b>#include</b> <b>&lt;stdbool.h&gt;</b>
              <b>#include</b> <b>&lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;</b>

       Objects  whose  type  is pointer to `<b>TCHDB</b>' are used to handle hash databases.  A hash database object is
       created with the function `<b>tchdbnew</b>' and is deleted with the function `<b>tchdbdel</b>'.  To avoid memory  leak,
       it is important to delete every object when it is no longer in use.

       Before  operations  to store or retrieve records, it is necessary to open a database file and connect the
       hash database object to it.  The function `<b>tchdbopen</b>' is used to open a database file  and  the  function
       `<b>tchdbclose</b>' is used to close the database file.  To avoid data missing or corruption, it is important to
       close  every database file when it is no longer in use.  It is forbidden for multiple database objects in
       a process to open the same database at the same time.

</pre><h4><b>API</b></h4><pre>
       The function `tchdberrmsg' is used in order to get the message string corresponding to an error code.

              <b>const</b> <b>char</b> <b>*tchdberrmsg(int</b> <u>ecode</u><b>);</b>
                     `<u>ecode</u>' specifies the error code.
                     The return value is the message string of the error code.

       The function `tchdbnew' is used in order to create a hash database object.

              <b>TCHDB</b> <b>*tchdbnew(void);</b>
                     The return value is the new hash database object.

       The function `tchdbdel' is used in order to delete a hash database object.

              <b>void</b> <b>tchdbdel(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     If the database is not closed, it is closed implicitly.  Note that the deleted  object  and
                     its derivatives can not be used anymore.

       The function `tchdbecode' is used in order to get the last happened error code of a hash database object.

              <b>int</b> <b>tchdbecode(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     The return value is the last happened error code.
                     The  following error codes are defined: `TCESUCCESS' for success, `TCETHREAD' for threading
                     error, `TCEINVALID' for invalid operation, `TCENOFILE' for file not found, `TCENOPERM'  for
                     no  permission,  `TCEMETA'  for  invalid  meta  data, `TCERHEAD' for invalid record header,
                     `TCEOPEN' for open error, `TCECLOSE' for close error, `TCETRUNC' for trunc error, `TCESYNC'
                     for sync error, `TCESTAT' for stat error, `TCESEEK' for  seek  error,  `TCEREAD'  for  read
                     error,  `TCEWRITE'  for  write  error,  `TCEMMAP' for mmap error, `TCELOCK' for lock error,
                     `TCEUNLINK' for unlink error, `TCERENAME' for rename error,  `TCEMKDIR'  for  mkdir  error,
                     `TCERMDIR'  for rmdir error, `TCEKEEP' for existing record, `TCENOREC' for no record found,
                     and `TCEMISC' for miscellaneous error.

       The function `tchdbsetmutex' is used in order to set mutual exclusion control of a hash  database  object
       for threading.

              <b>bool</b> <b>tchdbsetmutex(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object which is not opened.
                     If successful, the return value is true, else, it is false.
                     Note that the mutual exclusion control of the database should be set before the database is
                     opened.

       The function `tchdbtune' is used in order to set the tuning parameters of a hash database object.

              <b>bool</b> <b>tchdbtune(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>int64_t</b> <u>bnum</u><b>,</b> <b>int8_t</b> <u>apow</u><b>,</b> <b>int8_t</b> <u>fpow</u><b>,</b> <b>uint8_t</b> <u>opts</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object which is not opened.
                     `<u>bnum</u>' specifies the number of elements of the bucket array.  If it is not more than 0, the
                     default  value  is  specified.   The  default value is 16381.  Suggested size of the bucket
                     array is about from 0.5 to 4 times of the number of all records to be stored.
                     `<u>apow</u>' specifies the size of record alignment by power  of  2.   If  it  is  negative,  the
                     default value is specified.  The default value is 4 standing for 2^4=16.
                     `<u>fpow</u>'  specifies  the maximum number of elements of the free block pool by power of 2.  If
                     it is negative, the default value is specified.  The  default  value  is  10  standing  for
                     2^10=1024.
                     `<u>opts</u>' specifies options by bitwise-or: `HDBTLARGE' specifies that the size of the database
                     can  be  larger  than  2GB  by using 64-bit bucket array, `HDBTDEFLATE' specifies that each
                     record is compressed with Deflate  encoding,  `HDBTBZIP'  specifies  that  each  record  is
                     compressed  with  BZIP2  encoding, `HDBTTCBS' specifies that each record is compressed with
                     TCBS encoding.
                     If successful, the return value is true, else, it is false.
                     Note that the tuning parameters should be set before the database is opened.

       The function `tchdbsetcache' is used in order to set the caching parameters of a hash database object.

              <b>bool</b> <b>tchdbsetcache(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>int32_t</b> <u>rcnum</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object which is not opened.
                     `<u>rcnum</u>' specifies the maximum number of records to be cached.  If it is not  more  than  0,
                     the record cache is disabled.  It is disabled by default.
                     If successful, the return value is true, else, it is false.
                     Note that the caching parameters should be set before the database is opened.

       The  function  `tchdbsetxmsiz'  is  used  in  order  to set the size of the extra mapped memory of a hash
       database object.

              <b>bool</b> <b>tchdbsetxmsiz(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>int64_t</b> <u>xmsiz</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object which is not opened.
                     `<u>xmsiz</u>' specifies the size of the extra mapped memory.  If it is not more than 0, the extra
                     mapped memory is disabled.  The default size is 67108864.
                     If successful, the return value is true, else, it is false.
                     Note that the mapping parameters should be set before the database is opened.

       The function `tchdbsetdfunit' is used in order to set the unit step number of auto defragmentation  of  a
       hash database object.

              <b>bool</b> <b>tchdbsetdfunit(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>int32_t</b> <u>dfunit</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object which is not opened.
                     `<u>dfunit</u>' specifie the unit step number.  If it is not more than 0, the auto defragmentation
                     is disabled.  It is disabled by default.
                     If successful, the return value is true, else, it is false.
                     Note that the defragmentation parameters should be set before the database is opened.

       The function `tchdbopen' is used in order to open a database file and connect a hash database object.

              <b>bool</b> <b>tchdbopen(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>path</u><b>,</b> <b>int</b> <u>omode</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object which is not opened.
                     `<u>path</u>' specifies the path of the database file.
                     `<u>omode</u>'  specifies the connection mode: `HDBOWRITER' as a writer, `HDBOREADER' as a reader.
                     If the mode is `HDBOWRITER', the following may be added by bitwise-or:  `HDBOCREAT',  which
                     means  it  creates  a  new database if not exist, `HDBOTRUNC', which means it creates a new
                     database regardless if one exists, `HDBOTSYNC', which means every transaction  synchronizes
                     updated contents with the device.  Both of `HDBOREADER' and `HDBOWRITER' can be added to by
                     bitwise-or:  `HDBONOLCK',  which  means it opens the database file without file locking, or
                     `HDBOLCKNB', which means locking is performed without blocking.
                     If successful, the return value is true, else, it is false.

       The function `tchdbclose' is used in order to close a hash database object.

              <b>bool</b> <b>tchdbclose(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     If successful, the return value is true, else, it is false.
                     Update of a database is assured to be written when the database is  closed.   If  a  writer
                     opens a database but does not close it appropriately, the database will be broken.

       The function `tchdbput' is used in order to store a record into a hash database object.

              <b>bool</b> <b>tchdbput(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>' specifies the size of the region of the value.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, it is overwritten.

       The function `tchdbput2' is used in order to store a string record into a hash database object.

              <b>bool</b> <b>tchdbput2(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>vstr</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the key.
                     `<u>vstr</u>' specifies the string of the value.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, it is overwritten.

       The function `tchdbputkeep' is used in order to store a new record into a hash database object.

              <b>bool</b> <b>tchdbputkeep(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>' specifies the size of the region of the value.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, this function has no effect.

       The function `tchdbputkeep2' is used in order to store a new string record into a hash database object.

              <b>bool</b> <b>tchdbputkeep2(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>vstr</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the key.
                     `<u>vstr</u>' specifies the string of the value.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, this function has no effect.

       The function `tchdbputcat' is used in order to concatenate a value at the end of the existing record in a
       hash database object.

              <b>bool</b> <b>tchdbputcat(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>' specifies the size of the region of the value.
                     If successful, the return value is true, else, it is false.
                     If there is no corresponding record, a new record is created.

       The  function  `tchdbputcat2'  is  used in order to concatenate a string value at the end of the existing
       record in a hash database object.

              <b>bool</b> <b>tchdbputcat2(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>vstr</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the key.
                     `<u>vstr</u>' specifies the string of the value.
                     If successful, the return value is true, else, it is false.
                     If there is no corresponding record, a new record is created.

       The function `tchdbputasync' is used in  order  to  store  a  record  into  a  hash  database  object  in
       asynchronous fashion.

              <b>bool</b> <b>tchdbputasync(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>vsiz</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>vbuf</u>' specifies the pointer to the region of the value.
                     `<u>vsiz</u>' specifies the size of the region of the value.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, it is overwritten.  Records passed to
                     this function are accumulated into the inner buffer and wrote into the file at a blast.

       The  function  `tchdbputasync2'  is used in order to store a string record into a hash database object in
       asynchronous fashion.

              <b>bool</b> <b>tchdbputasync2(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>vstr</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the key.
                     `<u>vstr</u>' specifies the string of the value.
                     If successful, the return value is true, else, it is false.
                     If a record with the same key exists in the database, it is overwritten.  Records passed to
                     this function are accumulated into the inner buffer and wrote into the file at a blast.

       The function `tchdbout' is used in order to remove a record of a hash database object.

              <b>bool</b> <b>tchdbout(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     If successful, the return value is true, else, it is false.

       The function `tchdbout2' is used in order to remove a string record of a hash database object.

              <b>bool</b> <b>tchdbout2(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kstr</u>' specifies the string of the key.
                     If successful, the return value is true, else, it is false.

       The function `tchdbget' is used in order to retrieve a record in a hash database object.

              <b>void</b> <b>*tchdbget(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>int</b> <b>*</b><u>sp</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>sp</u>' specifies the pointer to the variable into which the size of the region of the  return
                     value is assigned.
                     If  successful,  the  return  value  is  the  pointer  to  the  region  of the value of the
                     corresponding record.  `NULL' is returned if no record corresponds.
                     Because an additional zero code is appended at the end of the region of the  return  value,
                     the  return  value  can be treated as a character string.  Because the region of the return
                     value is allocated with the `malloc' call, it should be released with the `free' call  when
                     it is no longer in use.

       The function `tchdbget2' is used in order to retrieve a string record in a hash database object.

              <b>char</b> <b>*tchdbget2(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>kstr</u>' specifies the string of the key.
                     If  successful,  the  return  value is the string of the value of the corresponding record.
                     `NULL' is returned if no record corresponds.
                     Because the region of the return value is allocated with the `malloc' call,  it  should  be
                     released with the `free' call when it is no longer in use.

       The  function  `tchdbget3'  is used in order to retrieve a record in a hash database object and write the
       value into a buffer.

              <b>int</b> <b>tchdbget3(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>void</b> <b>*</b><u>vbuf</u><b>,</b> <b>int</b> <u>max</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>vbuf</u>' specifies the pointer to the buffer into which the value of the corresponding record
                     is written.
                     `<u>max</u>' specifies the size of the buffer.
                     If successful, the return value is the size of the written data, else, it  is  -1.   -1  is
                     returned if no record corresponds to the specified key.
                     Note  that  an additional zero code is not appended at the end of the region of the writing
                     buffer.

       The function `tchdbvsiz' is used in order to get the size of the value of a record  in  a  hash  database
       object.

              <b>int</b> <b>tchdbvsiz(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     If successful, the return value is the size of the value of the corresponding record, else,
                     it is -1.

       The  function  `tchdbvsiz2'  is  used  in order to get the size of the value of a string record in a hash
       database object.

              <b>int</b> <b>tchdbvsiz2(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>kstr</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>kstr</u>' specifies the string of the key.
                     If successful, the return value is the size of the value of the corresponding record, else,
                     it is -1.

       The function `tchdbiterinit' is used in order to initialize the iterator of a hash database object.

              <b>bool</b> <b>tchdbiterinit(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     If successful, the return value is true, else, it is false.
                     The iterator is used in order to access the key of every record stored in a database.

       The function `tchdbiternext' is used in order to get the next key of the  iterator  of  a  hash  database
       object.

              <b>void</b> <b>*tchdbiternext(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>int</b> <b>*</b><u>sp</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>sp</u>'  specifies the pointer to the variable into which the size of the region of the return
                     value is assigned.
                     If successful, the return value is the pointer to the region of the next key, else,  it  is
                     `NULL'.  `NULL' is returned when no record is to be get out of the iterator.
                     Because  an  additional zero code is appended at the end of the region of the return value,
                     the return value can be treated as a character string.  Because the region  of  the  return
                     value  is allocated with the `malloc' call, it should be released with the `free' call when
                     it is no longer in use.  It is possible to access every record by iteration of calling this
                     function.  It is allowed to update or remove records  whose  keys  are  fetched  while  the
                     iteration.   However,  it  is  not  assured  if updating the database is occurred while the
                     iteration.  Besides, the order of this traversal access method is arbitrary, so it  is  not
                     assured that the order of storing matches the one of the traversal access.

       The  function  `tchdbiternext2'  is  used  in  order to get the next key string of the iterator of a hash
       database object.

              <b>char</b> <b>*tchdbiternext2(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     If successful, the return value is the string of the next key, else, it is `NULL'.   `NULL'
                     is returned when no record is to be get out of the iterator.
                     Because  the  region  of the return value is allocated with the `malloc' call, it should be
                     released with the `free' call when it is no longer in use.  It is possible to access  every
                     record  by  iteration of calling this function.  However, it is not assured if updating the
                     database is occurred while the iteration.  Besides, the  order  of  this  traversal  access
                     method  is arbitrary, so it is not assured that the order of storing matches the one of the
                     traversal access.

       The function `tchdbiternext3' is used in order to get the next extensible objects of the  iterator  of  a
       hash database object.

              <b>bool</b> <b>tchdbiternext3(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>TCXSTR</b> <b>*</b><u>kxstr</u><b>,</b> <b>TCXSTR</b> <b>*</b><u>vxstr</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>kxstr</u>' specifies the object into which the next key is wrote down.
                     `<u>vxstr</u>' specifies the object into which the next value is wrote down.
                     If  successful,  the  return  value  is true, else, it is false.  False is returned when no
                     record is to be get out of the iterator.

       The function `tchdbfwmkeys' is used in order to get forward matching keys in a hash database object.

              <b>TCLIST</b> <b>*tchdbfwmkeys(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>pbuf</u><b>,</b> <b>int</b> <u>psiz</u><b>,</b> <b>int</b> <u>max</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>pbuf</u>' specifies the pointer to the region of the prefix.
                     `<u>psiz</u>' specifies the size of the region of the prefix.
                     `<u>max</u>' specifies the maximum number of keys to be fetched.  If it is negative, no  limit  is
                     specified.
                     The  return  value  is  a  list object of the corresponding keys.  This function does never
                     fail.  It returns an empty list even if no key corresponds.
                     Because the object of the return value is created with the function `tclistnew', it  should
                     be  deleted  with  the  function  `tclistdel'  when it is no longer in use.  Note that this
                     function may be very slow because every key in the database is scanned.

       The function `tchdbfwmkeys2' is used in order to get forward matching string  keys  in  a  hash  database
       object.

              <b>TCLIST</b> <b>*tchdbfwmkeys2(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>pstr</u><b>,</b> <b>int</b> <u>max</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>pstr</u>' specifies the string of the prefix.
                     `<u>max</u>'  specifies  the maximum number of keys to be fetched.  If it is negative, no limit is
                     specified.
                     The return value is a list object of the corresponding  keys.   This  function  does  never
                     fail.  It returns an empty list even if no key corresponds.
                     Because  the object of the return value is created with the function `tclistnew', it should
                     be deleted with the function `tclistdel' when it is no  longer  in  use.   Note  that  this
                     function may be very slow because every key in the database is scanned.

       The function `tchdbaddint' is used in order to add an integer to a record in a hash database object.

              <b>int</b> <b>tchdbaddint(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>int</b> <u>num</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>num</u>' specifies the additional value.
                     If successful, the return value is the summation value, else, it is `INT_MIN'.
                     If the corresponding record exists, the value is treated as an integer and is added to.  If
                     no record corresponds, a new record of the additional value is stored.

       The  function  `tchdbdbadddouble'  is  used  in order to add a real number to a record in a hash database
       object.

              <b>double</b> <b>tchdbadddouble(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>void</b> <b>*</b><u>kbuf</u><b>,</b> <b>int</b> <u>ksiz</u><b>,</b> <b>double</b> <u>num</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>kbuf</u>' specifies the pointer to the region of the key.
                     `<u>ksiz</u>' specifies the size of the region of the key.
                     `<u>num</u>' specifies the additional value.
                     If successful, the return value is the summation value, else, it is Not-a-Number.
                     If the corresponding record exists, the value is treated as a real number and is added  to.
                     If no record corresponds, a new record of the additional value is stored.

       The  function `tchdbsync' is used in order to synchronize updated contents of a hash database object with
       the file and the device.

              <b>bool</b> <b>tchdbsync(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     If successful, the return value is true, else, it is false.
                     This function is useful when another process connects to the same database file.

       The function `tchdboptimize' is used in order to optimize the file of a hash database object.

              <b>bool</b> <b>tchdboptimize(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>int64_t</b> <u>bnum</u><b>,</b> <b>int8_t</b> <u>apow</u><b>,</b> <b>int8_t</b> <u>fpow</u><b>,</b> <b>uint8_t</b> <u>opts</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     `<u>bnum</u>' specifies the number of elements of the bucket array.  If it is not more than 0, the
                     default value is specified.  The default value is two times of the number of records.
                     `<u>apow</u>' specifies the size of record alignment by power  of  2.   If  it  is  negative,  the
                     current setting is not changed.
                     `<u>fpow</u>'  specifies  the maximum number of elements of the free block pool by power of 2.  If
                     it is negative, the current setting is not changed.
                     `<u>opts</u>' specifies options by bitwise-or: `HDBTLARGE' specifies that the size of the database
                     can be larger than 2GB by using 64-bit bucket  array,  `HDBTDEFLATE'  specifies  that  each
                     record  is  compressed  with  Deflate  encoding,  `HDBTBZIP'  specifies that each record is
                     compressed with BZIP2 encoding, `HDBTTCBS' specifies that each record  is  compressed  with
                     TCBS encoding.  If it is `UINT8_MAX', the current setting is not changed.
                     If successful, the return value is true, else, it is false.
                     This  function is useful to reduce the size of the database file with data fragmentation by
                     successive updating.

       The function `tchdbvanish' is used in order to remove all records of a hash database object.

              <b>bool</b> <b>tchdbvanish(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     If successful, the return value is true, else, it is false.

       The function `tchdbcopy' is used in order to copy the database file of a hash database object.

              <b>bool</b> <b>tchdbcopy(TCHDB</b> <b>*</b><u>hdb</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>path</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     `<u>path</u>' specifies the path of the destination file.  If it begins  with  `@',  the  trailing
                     substring is executed as a command line.
                     If  successful,  the  return  value  is  true, else, it is false.  False is returned if the
                     executed command returns non-zero code.
                     The database file is assured to be kept synchronized and not modified while the copying  or
                     executing operation is in progress.  So, this function is useful to create a backup file of
                     the database file.

       The function `tchdbtranbegin' is used in order to begin the transaction of a hash database object.

              <b>bool</b> <b>tchdbtranbegin(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     If successful, the return value is true, else, it is false.
                     The database is locked by the thread while the transaction so that only one transaction can
                     be  activated  with  a  database object at the same time.  Thus, the serializable isolation
                     level is assumed if every database operation is performed in the transaction.  All  updated
                     regions are kept track of by write ahead logging while the transaction.  If the database is
                     closed during transaction, the transaction is aborted implicitly.

       The function `tchdbtrancommit' is used in order to commit the transaction of a hash database object.

              <b>bool</b> <b>tchdbtrancommit(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     If successful, the return value is true, else, it is false.
                     Update in the transaction is fixed when it is committed successfully.

       The function `tchdbtranabort' is used in order to abort the transaction of a hash database object.

              <b>bool</b> <b>tchdbtranabort(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object connected as a writer.
                     If successful, the return value is true, else, it is false.
                     Update  in  the  transaction is discarded when it is aborted.  The state of the database is
                     rollbacked to before transaction.

       The function `tchdbpath' is used in order to get the file path of a hash database object.

              <b>const</b> <b>char</b> <b>*tchdbpath(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     The return value is the path of the database file or `NULL' if the object does not  connect
                     to any database file.

       The function `tchdbrnum' is used in order to get the number of records of a hash database object.

              <b>uint64_t</b> <b>tchdbrnum(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     The  return  value  is  the  number  of  records or 0 if the object does not connect to any
                     database file.

       The function `tchdbfsiz' is used in order to get the size of the database file of a hash database object.

              <b>uint64_t</b> <b>tchdbfsiz(TCHDB</b> <b>*</b><u>hdb</u><b>);</b>
                     `<u>hdb</u>' specifies the hash database object.
                     The return value is the size of the database file or 0 if the object does  not  connect  to
                     any database file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/tchtest.1.html">tchtest</a></b>(1), <b><a href="../man1/tchmttest.1.html">tchmttest</a></b>(1), <b><a href="../man1/tchmgr.1.html">tchmgr</a></b>(1), <b><a href="../man3/tokyocabinet.3.html">tokyocabinet</a></b>(3)

Man Page                                           2012-08-18                                           <u><a href="../man3/TCHDB.3.html">TCHDB</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>