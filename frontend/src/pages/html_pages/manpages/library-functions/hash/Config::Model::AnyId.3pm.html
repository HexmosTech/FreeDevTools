<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config::Model::AnyId - Base class for hash or list element</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libconfig-model-perl">libconfig-model-perl_2.155-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Config::Model::AnyId - Base class for hash or list element

</pre><h4><b>VERSION</b></h4><pre>
       version 2.155

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Config::Model;

        # define configuration tree object
        my $model = Config::Model-&gt;new;
        $model-&gt;create_config_class(
           name    =&gt; "Foo",
           element =&gt; [
               [qw/foo bar/] =&gt; {
                   type       =&gt; 'leaf',
                   value_type =&gt; 'string'
               },
           ]
        );

        $model-&gt;create_config_class(
           name    =&gt; "MyClass",
           element =&gt; [
               plain_hash =&gt; {
                   type       =&gt; 'hash',
                   index_type =&gt; 'string',
                   cargo      =&gt; {
                       type       =&gt; 'leaf',
                       value_type =&gt; 'string',
                   },
               },
               bounded_hash =&gt; {
                   type       =&gt; 'hash',      # hash id
                   index_type =&gt; 'integer',

                   # hash boundaries
                   min_index =&gt; 1, max_index =&gt; 123, max_nb =&gt; 2,

                   # specify cargo held by hash
                   cargo =&gt; {
                       type       =&gt; 'leaf',
                       value_type =&gt; 'string'
                   },
               },
               bounded_list =&gt; {
                   type =&gt; 'list',    # list id

                   max_index =&gt; 123,
                   cargo     =&gt; {
                       type       =&gt; 'leaf',
                       value_type =&gt; 'string'
                   },
               },
               hash_of_nodes =&gt; {
                   type       =&gt; 'hash',     # hash id
                   index_type =&gt; 'string',
                   cargo      =&gt; {
                       type              =&gt; 'node',
                       config_class_name =&gt; 'Foo'
                   },
               },
           ],
        );

        my $inst = $model-&gt;instance( root_class_name =&gt; 'MyClass' );

        my $root = $inst-&gt;config_root;

        # put data
        my $steps = 'plain_hash:foo=boo bounded_list=foo,bar,baz
          bounded_hash:3=foo bounded_hash:30=baz
          hash_of_nodes:"foo node" foo="in foo node" -
          hash_of_nodes:"bar node" bar="in bar node" ';
        $root-&gt;load( steps =&gt; $steps );

        # dump resulting tree
        print $root-&gt;dump_tree;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class provides hash or list elements for a Config::Model::Node.

       The hash index can either be en enumerated type, a boolean, an integer or a string.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
       AnyId object should not be created directly.

</pre><h4><b>Hash</b> <b>or</b> <b>list</b> <b>model</b> <b>declaration</b></h4><pre>
       A hash or list element must be declared with the following parameters:

       type
           Mandatory  element  type.  Must be "hash" or "list" to have a collection element.  The actual element
           type must be specified by "cargo =&gt; type".

       index_type
           Either "integer" or "string". Mandatory for hash.

       ordered
           Whether to keep the order of the hash keys (default no). (a bit like Tie::IxHash).  The hash keys are
           ordered along their creation. The order can be modified with swap, move_up or move_down.

       duplicates
           Specify the policy regarding duplicated values stored in the list or as hash values (valid only  when
           cargo  type  is  "leaf").  The  policy can be "allow" (default), "suppress", "warn" (which offers the
           possibility to apply a fix), "forbid". Note that  duplicates  <u>check</u>  <u>cannot</u>  <u>be</u>  <u>performed</u>  <u>when</u>  <u>the</u>
           <u>duplicated</u>  <u>value</u>  <u>is</u> <u>stored</u>: this happens outside of this object. Duplicates can be check only after
           when the value is read.

       write_empty_value
           By default, hash entries without data are not saved in configuration files. Without  data  means  the
           cargo of the hash key is empty: either its value is undef or all the values of the contained node are
           also empty.

           Set  this parameter to 1 if the key must be saved in the configuration file even if the hash contains
           no value for that key.

           Note that writing hash entries without value may not be supported by all  backends.  Use  with  care.
           Supported only for hash elements.

       cargo
           Hash ref specifying the cargo held by the hash of list. This has must contain:

           type    Can be "node" or "leaf" (default).

           config_class_name
                   Specifies  the  type of configuration object held in the hash. Only valid when "cargo" "type"
                   is "node".

           &lt;other&gt; Constructor arguments passed to the cargo object. See Config::Model::Node when  "cargo-&gt;type"
                   is "node". See Config::Model::Value when "cargo-&gt;type" is "leaf".

       min_index
           Specify the minimum value (optional, only for hash and for integer index)

       max_index
           Specify the maximum value (optional, only for list or for hash with integer index)

       max_nb
           Specify the maximum number of indexes. (hash only, optional, may also be used with string index type)

       default_keys
           When  set,  the  default parameter (or set of parameters) are used as default keys hashes and created
           automatically when the "keys" or "exists" functions are used on an <u>empty</u> hash.

           You can use "default_keys =&gt; 'foo'", or "default_keys =&gt; ['foo', 'bar']".

       default_with_init
           To perform special set-up on children nodes you can also use

              default_with_init =&gt;  {
                 foo =&gt; 'X=Av Y=Bv',
                 bar =&gt; 'Y=Av Z=Cv'
              }

           When the hash contains leaves, you can also use:

              default_with_init =&gt; {
                  def_1 =&gt; 'def_1 stuff',
                  def_2 =&gt; 'def_2 stuff'
              }

       migrate_keys_from
           Specifies that the keys of the hash are copied from another hash in the configuration tree only  when
           the  hash  is  read  for  the  first  time  after initial load (i.e. once the configuration files are
           completely read).

              migrate_keys_from =&gt; '- another_hash'

       migrate_values_from
           Specifies that the values of the hash (or list) are  copied  from  another  hash  (or  list)  in  the
           configuration  tree  only when the hash (or list) is read for the first time after initial load (i.e.
           once the configuration files are completely read).

              migrate_values_from =&gt; '- another_hash_or_list'

       follow_keys_from
           Specifies that the keys of the hash follow the keys of another hash in  the  configuration  tree.  In
           other words, the created hash always has the same keys as the other hash.

              follow_keys_from =&gt; '- another_hash'

       allow_keys
           Specifies authorized keys:

             allow_keys =&gt; ['foo','bar','baz']

       allow_keys_from
           A  bit  like  the "follow_keys_from" parameters. Except that the hash pointed to by "allow_keys_from"
           specified the authorized keys for this hash.

             allow_keys_from =&gt; '- another_hash'

       allow_keys_matching
           Keys must match the specified regular expression. For instance:

             allow_keys_matching =&gt; '^foo\d\d$'

       auto_create_keys
           When set, the default parameter  (or  set  of  parameters)  are  used  as  keys  hashes  and  created
           automatically. (valid only for hash elements)

           Called with "auto_create_keys =&gt; ['foo']", or "auto_create_keys =&gt; ['foo', 'bar']".

       warn_if_key_match
           Issue a warning if the key matches the specified regular expression

       warn_unless_key_match
           Issue a warning unless the key matches the specified regular expression

       auto_create_ids
           Specifies  the  number  of elements to create automatically. E.g.  "auto_create_ids =&gt; 4" initializes
           the list with 4 undef elements.  (valid only for list elements)

       convert =&gt; [uc | lc ]
           The hash key are converted to uppercase (uc) or lowercase (lc).

       warp
           See "Warp: dynamic value configuration" below.

</pre><h4><b>Warp:</b> <b>dynamic</b> <b>value</b> <b>configuration</b></h4><pre>
       The Warp functionality enables  an  HashId  or  ListId  object  to  change  its  default  settings  (e.g.
       "min_index",  "max_index"  or  "max_nb" parameters) dynamically according to the value of another "Value"
       object. (See Config::Model::Warper for explanation on warp mechanism)

       For instance, with this model:

        $model -&gt;create_config_class
         (
          name =&gt; 'Root',
          'element'
          =&gt; [
              macro =&gt; { type =&gt; 'leaf',
                         value_type =&gt; 'enum',
                         name       =&gt; 'macro',
                         choice     =&gt; [qw/A B C/],
                       },
              warped_hash =&gt; { type =&gt; 'hash',
                               index_type =&gt; 'integer',
                               max_nb     =&gt; 3,
                               warp       =&gt; {
                                              follow =&gt; '- macro',
                                              rules =&gt; { A =&gt; { max_nb =&gt; 1 },
                                                         B =&gt; { max_nb =&gt; 2 }
                                                       }
                                             },
                               cargo =&gt; { type =&gt; 'node',
                                          config_class_name =&gt; 'Dummy'
                                        }
                             },
            ]
         );

       Setting "macro" to "A" means that "warped_hash" can only accept one "Dummy" class item .

       Setting "macro" to "B" means that "warped_hash" accepts two "Dummy" class items.

       Like other warped class, a HashId or ListId can have multiple warp masters (See "Warp follow argument" in
       Config::Model::Warper:

         warp =&gt; { follow =&gt; { m1 =&gt; '- macro1',
                               m2 =&gt; '- macro2'
                             },
                   rules  =&gt; [ '$m1 eq "A" and $m2 eq "A2"' =&gt; { max_nb =&gt; 1},
                               '$m1 eq "A" and $m2 eq "B2"' =&gt; { max_nb =&gt; 2}
                             ],
                 }

   <b>Warp</b> <b>and</b> <b>auto_create_ids</b> <b>or</b> <b>auto_create_keys</b>
       When a warp is applied with "auto_create_keys" or "auto_create_ids" parameter, the auto_created items are
       created if they are not already present. But this warp never removes  items  that  were  previously  auto
       created.

       For instance, when a tied hash is created with "auto_create =&gt; [a,b,c]", the hash contains "(a,b,c)".

       Then,  once  a  warp with "auto_create_keys =&gt; [c,d,e]" is applied, the hash then contains "(a,b,c,d,e)".
       The items created by the first auto_create_keys are not removed.

   <b>Warp</b> <b>and</b> <b>max_nb</b>
       When a warp is applied, the items that do not fit the constraint (e.g. min_index, max_index) are removed.

       For the max_nb constraint, an exception is raised if a warp leads to a number of items greater  than  the
       max_nb constraint.

</pre><h4><b>Content</b> <b>check</b></h4><pre>
       By  default,  this  class  provides  an  optional  content  check that checks for duplicated values (when
       "duplicates" parameter is set).

       Derived classes can register more global checker with the following method.

   <b>add_check_content</b>
       This method expects a sub ref with signature "( $self, $error, $warn, $apply_fix )".   Where  $error  and
       $warn  are array ref. You can push error or warning messages there.  $apply_fix is a boolean. When set to
       1, the passed method can fix the warning or the error. Please make sure to weaken $self to  avoid  memory
       cycles.

       Example:

        package MyId;
        use Mouse;
        extends qw/Config::Model::HashId/;
        use Scalar::Util qw/weaken/;

        sub setup {
           my $self = shift;
           weaken($self);
           $self-&gt; add_check_content( sub { $self-&gt;check_usused_licenses(@_);} )
       }

</pre><h4><b>Introspection</b> <b>methods</b></h4><pre>
       The  following methods returns the current value stored in the Id object (as declared in the model unless
       they were warped):

       min_index
       max_index
       max_nb
       index_type
       default_keys
       default_with_init
       follow_keys_from
       auto_create_ids
       auto_create_keys
       ordered
       morph
       config_model

   <b>get_cargo_type</b>
       Returns the object type contained by the hash or list (i.e. returns "cargo -&gt; type").

   <b>get_cargo_info</b>
       Parameters: "( &lt; what &gt; )"

       Returns more info on the cargo contained by the hash or list. "what" may be  "value_type"  or  any  other
       cargo info stored in the model.  Returns undef if the requested info is not provided in the model.

   <b>get_default_keys</b>
       Returns  a  list (or a list ref) of the current default keys. These keys can be set by the "default_keys"
       or "default_with_init" parameters or by the other hash pointed by "follow_keys_from" parameter.

   <b>name</b>
       Returns the object name. The name finishes with ' id'.

   <b>config_class_name</b>
       Returns the config_class_name of collected elements. Valid only for collection of nodes.

       This method returns undef if "cargo" "type" is not "node".

   <b>has_fixes</b>
       Returns the number of fixes that can be applied to the current value.

</pre><h4><b>Information</b> <b>management</b></h4><pre>
   <b>fetch_with_id</b>
       Parameters: "( index =&gt; $idx , [ check =&gt; 'no' ])"

       Fetch the collected element held by the hash or list. Index check is 'yes' by  default.   Can  be  called
       with one parameter which is used as index.

   <b>get</b>
       Get a value from a directory like path. Parameters are:

       path
           Poor man's version of XPath style path. This string is in the form:

            /foo/bar/4

           Each word between the '/' is either an element name or a hash key or a list index.

       mode
           Either "default", "custom", "user",...  See "mode" parameter in &lt;Config::Model::Value/"fetch( ... )"&gt;

       check
           Either "skip", "no"

       get_obj
           If  the  path  leads  to  a leaf, this parameter tell whether to return the stored value or the value
           object.

       autoadd
           Whether to create missing keys

       dir_char_mockup
           When the hash key used contains '/', (for instance a directory value), the key cannot be used  as  is
           with this method. Because '/' is already used to separate configuration items (this is also important
           with  Config::Model::FuseUI).  This  parameter  specifies  how the forbidden '/' char is shown in the
           path. Default is "&lt;slash&gt;"

   <b>set</b>
       Parameters: "( path, value )"

       Set a value with a directory like path.

   <b>copy</b>
       Parameters: "( from_index, to_index )"

       Deep copy an element within the hash or list. If the element contained by the hash or list is a node, all
       configuration information is copied from one node to another.

   <b>fetch_all</b>
       Returns an array containing all elements held by the hash or list.

   <b>fetch_value</b>
       Parameters: "( idx =&gt; ..., mode =&gt; ..., check =&gt; ...)"

       Returns the value held by the "idx" element of the hash or list. This method is only valid  for  hash  or
       list containing leaves.

       See  fetch_all_values  for  "mode" argument documentation and "fetch" in Config::Model::Value for "check"
       argument documentation.

   <b>fetch_summary</b>
       Arguments: "( idx =&gt; ..., mode =&gt; ..., check =&gt; ...)"

       Like "fetch_value", but returns a truncated value when the value is a string or uniline that is too  long
       to be displayed.

   <b>fetch_all_values</b>
       Parameters: "( mode =&gt; ..., check =&gt; ...)"

       Returns  an  array  containing  all defined values held by the hash or list. (undefined values are simply
       discarded). This method is only valid for hash or list containing leaves.

       With "mode" parameter, this method returns either:

       custom
           The value entered by the user

       preset
           The value entered in preset mode

       standard
           The value entered in preset mode or checked by default.

       default
           The default value (defined by the configuration model)

       See "fetch" in Config::Model::Value for "check" argument documentation.

   <b>fetch</b>
       Similar to "fetch_all_values", with the same parameters, Returns  the  result  as  a  string  with  comma
       separated list values.

   <b>fetch_all_indexes</b>
       Returns  an array containing all indexes of the hash or list. Hash keys are sorted alphabetically, except
       for ordered hashed.

   <b>children</b>
       Like fetch_all_indexes. This method is polymorphic for all non-leaf objects of the configuration tree.

   <b>defined</b>
       Parameters: "( index )"

       Returns true if the value held at "index" is defined.

   <b>exists</b>
       Parameters: "( index )"

       Returns true if the value held at "index" exists (i.e the key exists but the  value  may  be  undefined).
       This method may not make sense for list element.

   <b>has_data</b>
       Return true if the array or hash is not empty.

   <b>delete</b>
       Parameters: "( index )"

       Delete the "index"ed value

   <b>clear</b>
       Delete all values (also delete underlying value or node objects).

   <b>clear_values</b>
       Delete all values (without deleting underlying value objects).

   <b>warning_msg</b>
       Parameters: "( [index] )"

       Returns  warnings  concerning  indexes  of this hash.  Without parameter, returns a string containing all
       warnings or undef. With an index, return the warnings concerning this index or undef.

   <b>has_warning</b>
       Returns the current number of warning.

   <b>error_msg</b>
       Returns the error messages of this object (if any)

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont, ddumont [AT] cpan [DOT] org

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Config::Model,       Config::Model::Instance,       Config::Model::Node,       Config::Model::WarpedNode,
       Config::Model::HashId, Config::Model::ListId, Config::Model::CheckList, Config::Model::Value

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2005-2022 by Dominique Dumont.

       This is free software, licensed under:

         The GNU Lesser General Public License, Version 2.1, February 1999

perl v5.40.0                                       2024-11-30                          <u>Config::Model::<a href="../man3pm/AnyId.3pm.html">AnyId</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>