<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moose::Cookbook::Roles::Restartable_AdvancedComposition - Advanced Role Composition - method exclusion</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmoose-perl">libmoose-perl_2.2207-1build3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Moose::Cookbook::Roles::Restartable_AdvancedComposition - Advanced Role Composition - method exclusion
       and aliasing

</pre><h4><b>VERSION</b></h4><pre>
       version 2.2207

</pre><h4><b>SYNOPSIS</b></h4><pre>
         package Restartable;
         use Moose::Role;

         has 'is_paused' =&gt; (
             is      =&gt; 'rw',
             isa     =&gt; 'Bool',
             default =&gt; 0,
         );

         requires 'save_state', 'load_state';

         sub stop { 1 }

         sub start { 1 }

         package Restartable::ButUnreliable;
         use Moose::Role;

         with 'Restartable' =&gt; {
             -alias =&gt; {
                 stop  =&gt; '_stop',
                 start =&gt; '_start'
             },
             -excludes =&gt; [ 'stop', 'start' ],
         };

         sub stop {
             my $self = shift;

             $self-&gt;explode() if <a href="../man1/rand.1.html">rand</a>(1) &gt; .5;

             $self-&gt;_stop();
         }

         sub start {
             my $self = shift;

             $self-&gt;explode() if <a href="../man1/rand.1.html">rand</a>(1) &gt; .5;

             $self-&gt;_start();
         }

         package Restartable::ButBroken;
         use Moose::Role;

         with 'Restartable' =&gt; { -excludes =&gt; [ 'stop', 'start' ] };

         sub stop {
             my $self = shift;

             $self-&gt;explode();
         }

         sub start {
             my $self = shift;

             $self-&gt;explode();
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       In this example, we demonstrate how to exercise fine-grained control over what methods we consume from a
       role. We have a "Restartable" role which provides an "is_paused" attribute, and two methods, "stop" and
       "start".

       Then we have two more roles which implement the same interface, each putting their own spin on the "stop"
       and "start" methods.

       In the "Restartable::ButUnreliable" role, we want to provide a new implementation of "stop" and "start",
       but still have access to the original implementation. To do this, we alias the methods from "Restartable"
       to private methods, and provide wrappers around the originals (1).

       Note that aliasing simply <u>adds</u> a name, so we also need to exclude the methods with their original names.

         with 'Restartable' =&gt; {
             -alias =&gt; {
                 stop  =&gt; '_stop',
                 start =&gt; '_start'
             },
             -excludes =&gt; [ 'stop', 'start' ],
         };

       In the "Restartable::ButBroken" role, we want to provide an entirely new behavior for "stop" and "start".
       We exclude them entirely when composing the "Restartable" role into "Restartable::ButBroken".

       It's worth noting that the "-excludes" parameter also accepts a single string as an argument if you just
       want to exclude one method.

         with 'Restartable' =&gt; { -excludes =&gt; [ 'stop', 'start' ] };

</pre><h4><b>CONCLUSION</b></h4><pre>
       Exclusion and renaming are a power tool that can be handy, especially when building roles out of other
       roles. In this example, all of our roles implement the "Restartable" role. Each role provides same API,
       but each has a different implementation under the hood.

       You can also use the method aliasing and excluding features when composing a role into a class.

</pre><h4><b>FOOTNOTES</b></h4><pre>
       (1) The  mention  of  wrapper should tell you that we could do the same thing using method modifiers, but
           for the sake of this example, we don't.

</pre><h4><b>AUTHORS</b></h4><pre>
       •   Stevan Little &lt;<a href="mailto:stevan@cpan.org">stevan@cpan.org</a>&gt;

       •   Dave Rolsky &lt;<a href="mailto:autarch@urth.org">autarch@urth.org</a>&gt;

       •   Jesse Luehrs &lt;<a href="mailto:doy@cpan.org">doy@cpan.org</a>&gt;

       •   Shawn M Moore &lt;<a href="mailto:sartak@cpan.org">sartak@cpan.org</a>&gt;

       •   יובל קוג'מן (Yuval Kogman) &lt;<a href="mailto:nothingmuch@woobling.org">nothingmuch@woobling.org</a>&gt;

       •   Karen Etheridge &lt;<a href="mailto:ether@cpan.org">ether@cpan.org</a>&gt;

       •   Florian Ragwitz &lt;<a href="mailto:rafl@debian.org">rafl@debian.org</a>&gt;

       •   Hans Dieter Pearcey &lt;<a href="mailto:hdp@cpan.org">hdp@cpan.org</a>&gt;

       •   Chris Prather &lt;<a href="mailto:chris@prather.org">chris@prather.org</a>&gt;

       •   Matt S Trout &lt;<a href="mailto:mstrout@cpan.org">mstrout@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2006 by Infinity Interactive, Inc.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.40.0                                       2024-10-20              <u>Moose::<a href="../man3pm/Cookboo...ncedComposition.3pm.html">Cookboo...ncedComposition</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>