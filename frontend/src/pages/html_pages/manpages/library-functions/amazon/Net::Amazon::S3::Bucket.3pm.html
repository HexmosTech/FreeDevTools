<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Net::Amazon::S3::Bucket - convenience object for working with Amazon S3 buckets</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnet-amazon-s3-perl">libnet-amazon-s3-perl_0.991-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Net::Amazon::S3::Bucket - convenience object for working with Amazon S3 buckets

</pre><h4><b>VERSION</b></h4><pre>
       version 0.991

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Net::Amazon::S3;

         my $bucket = $s3-&gt;bucket("foo");

         ok($bucket-&gt;add_key("key", "data"));
         ok($bucket-&gt;add_key("key", "data", {
            content_type =&gt; "text/html",
           'x-amz-meta-colour' =&gt; 'orange',
         }));

         # Enable server-side encryption
         ok($bucket-&gt;add_key("key", "data", {
            encryption =&gt; 'AES256',
         }));

         # the err and errstr methods just proxy up to the Net::Amazon::S3's
         # objects err/errstr methods.
         $bucket-&gt;add_key("bar", "baz") or
             die $bucket-&gt;err . $bucket-&gt;errstr;

         # fetch a key
         $val = $bucket-&gt;get_key("key");
         is( $val-&gt;{value},               'data' );
         is( $val-&gt;{content_type},        'text/html' );
         is( $val-&gt;{etag},                'b9ece18c950afbfa6b0fdbfa4ff731d3' );
         is( $val-&gt;{'x-amz-meta-colour'}, 'orange' );

         # fetch a part of the key
         $val = $bucket-&gt;get_key("key", { range =&gt; "bytes=1024-10240" });

         # returns undef on missing or on error (check $bucket-&gt;err)
         is(undef, $bucket-&gt;get_key("non-existing-key"));
         die $bucket-&gt;errstr if $bucket-&gt;err;

         # fetch a key's metadata
         $val = $bucket-&gt;head_key("key");
         is( $val-&gt;{value},               '' );
         is( $val-&gt;{content_type},        'text/html' );
         is( $val-&gt;{etag},                'b9ece18c950afbfa6b0fdbfa4ff731d3' );
         is( $val-&gt;{'x-amz-meta-colour'}, 'orange' );

         # delete a key
         ok($bucket-&gt;delete_key($key_name));
         ok(! $bucket-&gt;delete_key("non-exist-key"));

         # delete the entire bucket (Amazon requires it first be empty)
         $bucket-&gt;delete_bucket;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module represents an S3 bucket.  You get a bucket object from the Net::Amazon::S3 object.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
       Create a new bucket object. Expects a hash containing these two arguments:

       bucket
       account

   <b>add_key</b>
       Takes three positional parameters:

       key
       value
       configuration
           A hash of configuration data for this key.

           acl
           encryption
           any additional HTTP header

           See Net::Amazon::S3::Operation::Object::Add::Request for details

       Returns a boolean.

   <b>add_key_filename</b>
       Use this to upload a large file to S3. Takes three positional parameters:

       key
       filename
       configuration
           A hash of configuration data for this key. (See synopsis);

       Returns a boolean.

   <b>copy_key</b>
       Creates  (or replaces) a key, copying its contents from another key elsewhere in S3.  Takes the following
       parameters:

       key The key to (over)write

       source
           Where to copy the key from. Should be in the form "/<u>bucketname</u>/<u>keyname</u>"<a href="file:/.">/.</a>

       conf
           Optional configuration hash. If present and defined, the configuration (ACL and headers)  there  will
           be used for the new key; otherwise it will be copied from the source key.

   <b>edit_metadata</b>
       Changes the metadata associated with an existing key. Arguments:

       key The key to edit

       conf
           The new configuration hash to use

   <b>head_key</b> <b>KEY</b>
       Takes the name of a key in this bucket and returns its configuration hash

   <b>query_string_authentication_uri</b> <b>KEY,</b> <b>EXPIRES_AT</b>
               my $uri = $bucket-&gt;query_string_authentication_uri (
                       key =&gt; 'foo',
                       expires_at =&gt; time + 3_600, # valid for one hour
               );

               my $uri = $bucket-&gt;query_string_authentication_uri (
                       key =&gt; 'foo',
                       expires_at =&gt; time + 3_600,
                       method =&gt; 'PUT',
               );

       Returns uri presigned with your credentials.

       When  used  with  Signature  V4  you have to specify also HTTP method this presigned uri will be used for
       (default: "GET")

       Method provides authenticated uri only for direct object operations.

       Method follows API's "CALLING CONVENTION".

       Recognized positional arguments (mandatory).

       key
       expires_at
           Expiration time (epoch time).

       Optional arguments

       method
           Default: "GET"

           Intended HTTP method this uri will be presigned for.

           Signature V2 doesn't use it but Signature V4 does.

           See &lt;https://docs.aws.amazon.com/AmazonS3/latest/dev/PresignedUrlUploadObject.html&gt;

   <b>get_key</b> <b>$key_name</b> <b>[$method]</b>
       Takes a key name and an optional HTTP method (which defaults to "GET".  Fetches the key from AWS.

       On failure:

       Returns undef on missing content, throws an exception (dies) on server errors.

       On success:

       Returns a hashref of { content_type, etag, value, @meta } on success. Other values from  the  server  are
       there too, with the key being lowercased.

   <b>get_key_filename</b> <b>$key_name</b> <b>$method</b> <b>$filename</b>
       Use this to download large files from S3. Takes a key name and an optional HTTP method (which defaults to
       "GET". Fetches the key from AWS and writes it to the filename. THe value returned will be empty.

       On failure:

       Returns undef on missing content, throws an exception (dies) on server errors.

       On success:

       Returns a hashref of { content_type, etag, value, @meta } on success

   <b>delete_key</b> <b>$key_name</b>
       Removes $key from the bucket. Forever. It's gone after this.

       Returns true on success and false on failure

   <b>delete_bucket</b>
       Delete the current bucket object from the server. Takes no arguments.

       Fails if the bucket has anything in it.

       This is an alias for "$s3-&gt;delete_bucket($bucket)"

   <b>list</b>
       List all keys in this bucket.

       see "list_bucket" in Net::Amazon::S3 for documentation of this method.

   <b>list_all</b>
       List  all  keys in this bucket without having to worry about 'marker'. This may make multiple requests to
       S3 under the hood.

       see "list_bucket_all" in Net::Amazon::S3 for documentation of this method.

   <b>get_acl</b>
       Takes one optional positional parameter

       key (optional)
           If no key is specified, it returns the acl for the bucket.

       Returns an acl in XML format.

   <b>set_acl</b>
       Takes a configuration hash_ref containing:

       acl_xml (cannot be used in conjunction with acl_short)
           An XML string which contains access control information  which  matches  Amazon's  published  schema.
           There is an example of one of these XML strings in the tests for this module.

       acl_short (cannot be used in conjunction with acl_xml)
           You can use the shorthand notation instead of specifying XML for certain 'canned' types of acls.

           (from the Amazon API documentation)

           private: Owner gets FULL_CONTROL. No one else has any access rights.  This is the default.

           public-read:Owner  gets  FULL_CONTROL  and  the  anonymous  principal is granted READ access. If this
           policy is used on an object, it can be read from a browser with no authentication.

           public-read-write:Owner gets FULL_CONTROL, the anonymous principal is granted READ and WRITE  access.
           This  is  a  useful  policy to apply to a bucket, if you intend for any anonymous user to PUT objects
           into the bucket.

           authenticated-read:Owner gets FULL_CONTROL, and any principal authenticated as a registered Amazon S3
           user is granted READ access.

       key (optional)
           If the key is not set, it will apply the acl to the bucket.

       Returns a boolean.

   <b>get_location_constraint</b>
       Retrieves the location constraint set when the bucket was created. Returns a string (eg, 'EU'), or  undef
       if no location constraint was set.

   <b>err</b>
       The S3 error code for the last error the object ran into

   <b>errstr</b>
       A human readable error string for the last error the object ran into

   <b>add_tags</b>
               # Add tags for a bucket
               $s3-&gt;add_tags ({
                       bucket =&gt; 'bucket-name',
                       tags   =&gt; { tag1 =&gt; 'value-1', tag2 =&gt; 'value-2' },
               });

               # Add tags for an object
               $s3-&gt;add_tags ({
                       bucket =&gt; 'bucket-name',
                       key    =&gt; 'key',
                       tags   =&gt; { tag1 =&gt; 'value-1', tag2 =&gt; 'value-2' },
               });

       Takes configuration parameters

       key (optional, scalar)
           If key is specified, add tag(s) to object, otherwise on bucket.

       tags (mandatory, hashref)
           Set specified tags and their respective values.

       version_id (optional)
           Is specified (in conjunction with "key") add tag(s) to versioned object.

       Returns "true" on success.

       Returns "false" and sets "err"/"errstr" otherwise.

   <b>delete_tags</b>
               # Add tags for a bucket
               $s3-&gt;delete_tags ({
                       bucket =&gt; 'bucket-name',
               });

               # Add tags for an object
               $s3-&gt;delete_tags ({
                       bucket     =&gt; 'bucket-name',
                       key        =&gt; 'key',
                       version_id =&gt; $version_id,
               });

       Takes configuration parameters

       key (optional, scalar)
           If key is specified, add tag(s) to object, otherwise on bucket.

       version_id (optional)
           Is specified (in conjunction with "key") add tag(s) to versioned object.

       Returns "true" on success.

       Returns "false" and sets "err"/"errstr" otherwise.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Net::Amazon::S3

</pre><h4><b>AUTHOR</b></h4><pre>
       Branislav Zahradník &lt;<a href="mailto:barney@cpan.org">barney@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This  software  is  copyright  (c) 2022 by Amazon Digital Services, Leon Brocard, Brad Fitzpatrick, Pedro
       Figueiredo, Rusty Conover, Branislav Zahradník.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

perl v5.34.0                                       2022-07-18                       <u>Net::Amazon::S3::<a href="../man3pm/Bucket.3pm.html">Bucket</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>