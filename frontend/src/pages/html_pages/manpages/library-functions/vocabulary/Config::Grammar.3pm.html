<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config::Grammar - A grammar-based, user-friendly config parser</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libconfig-grammar-perl">libconfig-grammar-perl_1.13-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Config::Grammar - A grammar-based, user-friendly config parser

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Config::Grammar;

        my $args = { encoding =&gt; 'utf8' }; # the second parameter to parse() is optional
        my $parser = Config::Grammar-&gt;new(\%grammar);
        my $cfg = $parser-&gt;parse('app.cfg', $args) or die "ERROR: $parser-&gt;{err}\n";
        my $pod = $parser-&gt;makepod();
        my $ex = $parser-&gt;maketmpl('TOP','SubNode');
        my $minex = $parser-&gt;maketmplmin('TOP','SubNode');

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Config::Grammar is a module to parse configuration files. The optional second parameter to the <b>parse()</b>
       method can be used to specify the file encoding to use for opening the file (see documentation for Perl's
       use open pragma).

       The configuration may consist of multiple-level sections with assignments and tabular data. The parsed
       data will be returned as a hash containing the whole configuration. Config::Grammar uses a grammar that
       is supplied upon creation of a Config::Grammar object to parse the configuration file and return helpful
       error messages in case of syntax errors. Using the <b>makepod</b> method you can generate documentation of the
       configuration file format.

       The <b>maketmpl</b> method can generate a template configuration file.  If your grammar contains regexp matches,
       the template will not be all that helpful as Config::Grammar is not smart enough to give you sensible
       template data based in regular expressions. The related function <b>maketmplmin</b> generates a minimal
       configuration template without examples, regexps or comments and thus allows an experienced user to fill
       in the configuration data more efficiently.

   <b>Grammar</b> <b>Definition</b>
       The grammar is a multiple-level hash of hashes, which follows the structure of the configuration. Each
       section or variable is represented by a hash with the same structure.  Each hash contains special keys
       starting with an underscore such as '_sections', '_vars', '_sub' or '_re' to denote meta data with
       information about that section or variable. Other keys are used to structure the hash according to the
       same nesting structure of the configuration itself. The starting hash given as parameter to 'new'
       contains the "root section".

       <u>Special</u> <u>Section</u> <u>Keys</u>

       _sections   Array  containing  the  list  of  sub-sections of this section. Each sub-section must then be
                   represented by a sub-hash in this hash with the same name of the sub-section.

                   The sub-section can also be a regular expression denoted by the syntax '/re/',  where  re  is
                   the  regular-expression. In case a regular expression is used, a sub-hash named with the same
                   '/re/' must be included in this hash.

       _vars       Array containing the list of variables (assignments) in this section.  Analogous to sections,
                   regular expressions can be used.

       _mandatory  Array containing the list of mandatory sections and variables.

       _inherited  Array containing the list of the variables that should be assigned the same value as  in  the
                   parent section if nothing is specified here.

       _table      Hash  containing  the  table  grammar (see Special Table Keys). If not specified, no table is
                   allowed in this section. The grammar of the columns if specified by sub-hashes named with the
                   column number.

       _text       Section contains free-form text. Only sections and @includes statements will be  interpreted,
                   the rest will be added in the returned hash under '_text' as string.

                   <b>_text</b>  is  a hash reference which can contain a <b>_re</b> and a <b>_re_error</b> key which will be used to
                   scrutanize the text ... if the hash is empty, all text will be accepted.

       _order      If defined, a '_order' element will be put in every  hash  containing  the  sections  with  a
                   number that determines the order in which the sections were defined.

       _doc        Describes what this section is about

       _sub        A  function  pointer.  It is called for every instance of this section, with the real name of
                   the section passed as its first argument.  This  is  probably  only  useful  for  the  regexp
                   sections.  If  the  function  returns  a  defined  value  it is assumed that the test was not
                   successful and an error is generated with the returned string as content.

       <u>Special</u> <u>Variable</u> <u>Keys</u>

       _re         Regular expression upon which the value will be checked.

       _re_error   String containing the returned error in case the regular expression  doesn't  match  (if  not
                   specified, a generic 'syntax error' message will be returned).

       _sub        A  function  pointer. It called for every value, with the value passed as its first argument.
                   If the function returns a defined value it is assumed that the test was not successful and an
                   error is generated with the returned string as content.

                   If the '_varlist' key (see above) is defined in this section, the '_sub' function  will  also
                   receive  an  array  reference  as  the  second  argument.  The array contains a list of those
                   variables already defined in the same section. This can be used to enforce the order  of  the
                   variables.

       _default    A default value that will be assigned to the variable if none is specified or inherited.

       _doc        Description of the variable.

       _example    A one line example for the content of this variable.

       <u>Special</u> <u>Table</u> <u>Keys</u>

       _columns    Number of columns. If not specified, it will not be enforced.

       _key        If  defined,  the specified column number will be used as key in a hash in the returned hash.
                   If not defined, the returned hash will contain a '_table' element with the  contents  of  the
                   table as array. The rows of the tables are stored as arrays.

       _sub        they work analog to the description in the previous section.

       _doc        describes the content of the column.

       _example    example for the content of this column

       <u>Special</u> <u>Text</u> <u>Keys</u>

       _re         Regular expression upon which the text will be checked (everything as a single line).

       _re_error   String  containing  the  returned  error in case the regular expression doesn't match (if not
                   specified, a generic 'syntax error' message will be returned).

       _sub        they work analog to the description in the previous section.

       _doc        Ditto.

       _example    Potential multi line example for the content of this text section

   <b>Configuration</b> <b>Syntax</b>
       <u>General</u> <u>Syntax</u>

       '#' denotes a comment up to the end-of-line, empty lines are allowed and space at the beginning  and  end
       of lines is trimmed.

       '\'  at  the  end  of  the  line marks a continued line on the next line. A single space will be inserted
       between the concatenated lines.

       '@include filename' is used to include another file. Include works relative to the  directory  where  the
       parent file is in.

       '@define a some value' will replace all occurrences of 'a' in the following text with 'some value'.

       Fields  in  tables that contain white space can be enclosed in either "'" or """.  Whitespace can also be
       escaped with "\". Quotes inside quotes are allowed but must be escaped with a backslash as well.

       <u>Sections</u>

       Config::Grammar supports hierarchical configurations through sections, whose syntax is as follows:

       Level 1        *** section name ***

       Level 2        + section name

       Level 3        ++ section name

       Level n, n&gt;1   +..+ section name (number of '+' determines level)

       <u>Assignments</u>

       Assignments take the form: 'variable = value', where value can be any string (can contain whitespaces and
       special characters). The spaces before and after the equal sign are optional.

       <u>Tabular</u> <u>Data</u>

       The data is interpreted as one or more columns separated by spaces.

   <b>Example</b>
       <u>Code</u>

        use Data::Dumper;
        use Config::Grammar;

        my $RE_IP       = '\d+\.\d+\.\d+\.\d+';
        my $RE_MAC      = '[0-9a-f]{2}(?::[0-9a-f]{2}){5}';
        my $RE_HOST     = '\S+';

        my $parser = Config::Grammar-&gt;new({
          _sections =&gt; [ 'network', 'hosts' ],
          network =&gt; {
             _vars     =&gt; [ 'dns' ],
             _sections =&gt; [ "/$RE_IP/" ],
             dns       =&gt; {
                _doc =&gt; "address of the dns server",
                _example =&gt; "ns1.oetiker.xs",
                _re =&gt; $RE_HOST,
                _re_error =&gt;
                   'dns must be an host name or ip address',
                },
             "/$RE_IP/" =&gt; {
                _doc    =&gt; "Ip Adress",
                _example =&gt; '10.2.3.2',
                _vars   =&gt; [ 'netmask', 'gateway' ],
                netmask =&gt; {
                   _doc =&gt; "Netmask",
                   _example =&gt; "255.255.255.0",
                   _re =&gt; $RE_IP,
                   _re_error =&gt;
                      'netmask must be a dotted ip address'
                   },
                gateway =&gt; {
                   _doc =&gt; "Default Gateway address in IP notation",
                   _example =&gt; "10.22.12.1",
                   _re =&gt; $RE_IP,
                   _re_error =&gt;
                      'gateway must be a dotted ip address' },
                },
             },
          hosts =&gt; {
             _doc =&gt; "Details about the hosts",
             _table  =&gt; {
                 _doc =&gt; "Description of all the Hosts",
                _key =&gt; 0,
                _columns =&gt; 3,
                0 =&gt; {
                   _doc =&gt; "Ethernet Address",
                   _example =&gt; "0:3:3:d:a:3:dd:a:cd",
                   _re =&gt; $RE_MAC,
                   _re_error =&gt;
                      'first column must be an ethernet mac address',
                   },
                1 =&gt; {
                   _doc =&gt; "IP Address",
                   _example =&gt; "10.11.23.1",
                   _re =&gt; $RE_IP,
                   _re_error =&gt;
                      'second column must be a dotted ip address',
                   },
                2 =&gt; {
                   _doc =&gt; "Host Name",
                   _example =&gt; "tardis",
                    },
                },
             },
          });

        my $args = { encoding =&gt; 'utf8' }; # the second parameter to parse() is optional
        my $cfg = $parser-&gt;parse('test.cfg', $args) or
          die "ERROR: $parser-&gt;{err}\n";
        print Dumper($cfg);
        print $parser-&gt;makepod;

       <u>Configuration</u>

        *** network ***

          dns      = 192.168.7.87

        + 192.168.7.64

          netmask  = 255.255.255.192
          gateway  = 192.168.7.65

        *** hosts ***

          00:50:fe:bc:65:11     192.168.7.97    plain.hades
          00:50:fe:bc:65:12     192.168.7.98    isg.ee.hades
          00:50:fe:bc:65:14     192.168.7.99    isg.ee.hades

       <u>Result</u>

        {
          'hosts' =&gt; {
                       '00:50:fe:bc:65:11' =&gt; [
                                                '00:50:fe:bc:65:11',
                                                '192.168.7.97',
                                                'plain.hades'
                                              ],
                       '00:50:fe:bc:65:12' =&gt; [
                                                '00:50:fe:bc:65:12',
                                                '192.168.7.98',
                                                'isg.ee.hades'
                                              ],
                       '00:50:fe:bc:65:14' =&gt; [
                                                '00:50:fe:bc:65:14',
                                                '192.168.7.99',
                                                'isg.ee.hades'
                                              ]
                     },
          'network' =&gt; {
                         '192.168.7.64' =&gt; {
                                             'netmask' =&gt; '255.255.255.192',
                                             'gateway' =&gt; '192.168.7.65'
                                           },
                         'dns' =&gt; '192.168.7.87'
                       }
        };

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Config::Grammar::Dynamic

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2000-2005 by ETH Zurich. All rights reserved.  Copyright (c) 2007 by David Schweikert.  All
       rights reserved.

</pre><h4><b>LICENSE</b></h4><pre>
       This  program  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself.

</pre><h4><b>AUTHORS</b></h4><pre>
       David Schweikert, Tobias Oetiker, Niko Tyni

perl v5.34.0                                       2022-05-26                               <u>Config::<a href="../man3pm/Grammar.3pm.html">Grammar</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>