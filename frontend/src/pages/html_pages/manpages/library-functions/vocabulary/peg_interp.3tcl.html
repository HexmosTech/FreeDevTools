<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>grammar::peg::interp - Interpreter for parsing expression grammars</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       grammar::peg::interp - Interpreter for parsing expression grammars

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>grammar::mengine</b> <b>?0.1?</b>

       package require <b>grammar::peg::interp</b> <b>?0.1.2?</b>

       <b>::grammar::peg::interp::setup</b> <u>peg</u>

       <b>::grammar::peg::interp::parse</b> <u>nextcmd</u> <u>errorvar</u> <u>astvar</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This package provides commands for the controlled matching of a character stream via a parsing expression
       grammar and the creation of an abstract syntax tree for the stream and partials.

       It  is  built  on  top  of  the  virtual  machine  provided  by the package <b>grammar::me::tcl</b> and directly
       interprets the parsing expression grammar given to it.  In other words, the grammar is  <u>not</u>  pre-compiled
       but used as is.

       The  grammar  to be interpreted is taken from a container object following the interface specified by the
       package <b>grammar::peg::container</b>. Only the relevant parts are copied into the state of this package.

       It should be noted that the package provides exactly one instance of the interpreter, and interpreting  a
       second  grammar  requires  the  user to either abort or complete a running interpretation, or to put them
       into different Tcl interpreters.

       Also of note is that the implementation assumes a pull-type handling of the input. In  other  words,  the
       interpreter  pulls  characters  from  the input stream as it needs them. For usage in a push environment,
       i.e. where the environment pushes new characters as they come we have to put  the  engine  into  its  own
       thread.

</pre><h4><b>THE</b> <b>INTERPRETER</b> <b>API</b></h4><pre>
       The package exports the following API

       <b>::grammar::peg::interp::setup</b> <u>peg</u>
              This  command (re)initializes the interpreter. It returns the empty string. This command has to be
              invoked first, before any matching run.

              Its argument <u>peg</u> is the  handle  of  an  object  containing  the  parsing  expression  grammar  to
              interpret. This grammar has to be valid, or an error will be thrown.

       <b>::grammar::peg::interp::parse</b> <u>nextcmd</u> <u>errorvar</u> <u>astvar</u>
              This  command interprets the loaded grammar and tries to match it against the stream of characters
              represented by the command prefix <u>nextcmd</u>.

              The command prefix <u>nextcmd</u> represents the input  stream  of  characters  and  is  invoked  by  the
              interpreter  whenever the a new character from the stream is required.  The callback has to return
              either the empty list, or a list of 4 elements containing the token, its lexeme attribute, and its
              location as line number and column index, in this order.  The empty list is the  signal  that  the
              end  of  the  input stream has been reached. The lexeme attribute is stored in the terminal cache,
              but otherwise not used by the machine.

              The result of the command  is  a  boolean  value  indicating  whether  the  matching  process  was
              successful (<b>true</b>), or not (<b>false</b>). In the case of a match failure error information will be stored
              into  the  variable  referenced by <u>errorvar</u>. The variable referenced by <u>astvar</u> will always contain
              the generated abstract syntax tree, however in the case of an error it will be  only  partial  and
              possibly malformed.

              The  abstract  syntax  tree is represented by a nested list, as described in section <b>AST</b> <b>VALUES</b> of
              document <u>grammar::me_ast</u>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the category <u>grammar_peg</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].
       Please also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       LL(k), TDPL, context-free languages, expression, grammar, matching, parsing, parsing expression,  parsing
       expression   grammar,  push  down  automaton,  recursive  descent,  state,  top-down  parsing  languages,
       transducer, virtual machine

</pre><h4><b>CATEGORY</b></h4><pre>
       Grammars and finite automata

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2005-2011 Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                0.1.2                           <u>grammar::peg::<a href="../man3tcl/interp.3tcl.html">interp</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>