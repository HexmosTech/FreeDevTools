<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test::BDD::Cucumber::StepContext - Data made available to step definitions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-bdd-cucumber-perl">libtest-bdd-cucumber-perl_0.87-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test::BDD::Cucumber::StepContext - Data made available to step definitions

</pre><h4><b>VERSION</b></h4><pre>
       version 0.87

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The coderefs in Step Definitions have a single argument passed to them, a
       "Test::BDD::Cucumber::StepContext" object. This is an attribute-only class, populated by
       Test::BDD::Cucumber::Executor.

       When steps are run normally, C() is set directly before execution to return the context; this allows you
       to do:

         sub { return C-&gt;columns }

       instead of:

         sub { my $c = shift; return $c-&gt;columns; }

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>columns</b>
       If the step-specific data supplied is a table, the this attribute will contain the column names in the
       order they appeared.

   <b>_data</b>
       Step-specific data. Will either be a text string in the case of a """ string, or an arrayref of hashrefs
       if the step had an associated table.

       See the "data" method below.

   <b>stash</b>
       A hash of hashes, containing two keys, "feature", "scenario".  The stash allows you to persist data
       across features or scenarios.

       The scenario-level stash is also available to steps by calling S(), making the following two lines of
       code equivalent:

        sub { my $context = shift; my $stash = $context-&gt;stash-&gt;{'scenario'}; $stash-&gt;{'count'} = 1 }
        sub { S-&gt;{'count'} = 1 }

   <b>feature</b>
   <b>scenario</b>
   <b>step</b>
       Links to the Test::BDD::Cucumber::Model::Feature, Test::BDD::Cucumber::Model::Scenario, and
       Test::BDD::Cucumber::Model::Step objects respectively.

   <b>verb</b>
       The lower-cased verb a Step Definition was called with.

   <b>text</b>
       The text of the step, minus the verb. Placeholders will have already been multiplied out at this point.

   <b>harness</b>
       The Test::BDD::Cucumber::Harness harness being used by the executor.

   <b>executor</b>
       Weak reference to the Test::BDD::Cucumber::Executor being used - this allows for step redispatch.

   <b>matches</b>
       Any matches caught by the Step Definition's regex. These are also available as $1, $2 etc as appropriate.

   <b>is_hook</b>
       The harness processing the output can decide whether to shop information for this step which is actually
       an internal hook, i.e. a Before or After step

   <b>parent</b>
       If a step redispatches to another step, the child step will have a link back to its parent step here;
       otherwise undef. See "Redispatching".

</pre><h4><b>METHODS</b></h4><pre>
   <b>background</b>
       Boolean for "is this step being run as part of the background section?".  Currently implemented by asking
       the linked Scenario object...

   <b>data</b>
       See the "_data" attribute above.

       Calling this method will return either the """ string, or a possibly Transform-ed set of table data.

   <b>matches</b>
       See the "_matches" attribute above.

       Call this method will return the possibly Transform-ed matches .

   <b>transform</b>
       Used internally to transform data and placeholders, but it can also be called from within your
       Given/When/Then code.

</pre><h4><b>Redispatching</b></h4><pre>
       Sometimes you want to call one step from another step. You can do this via the <u>StepContext</u>, using the
       dispatch() method. For example:

         Given qr/I have entered (\d+)/, sub {
               C-&gt;dispatch( 'Given', "I have pressed $1");
               C_&gt;dispatch( 'Given', "I have passed-in data", C-&gt;data );
               C-&gt;dispatch( 'Given', "I have pressed enter", { some =&gt; 'data' } );
         };

       You redispatch step will have its own, new step context with almost everything copied from the parent
       step context. However, specifically not copied are: "columns", "data", the "step" object, and of course
       the "verb" and the "text".

       If you want to pass data to your child step, you should IDEALLY do it via the text of the step itself, or
       failing that, through the scenario-level stash.  Otherwise it'd make more sense just to be calling some
       subroutine... But you <b>can</b> pass in a third argument - a hashref which will be used as "data". The data in
       that third argument can be one of:

       •   a string

           This  scenario  corresponds with having a """ ... """ string argument to the step. It's passed to the
           child step verbatim.

       •   a hash reference (deprecated)

           This scenario corresponds with the third example above and has been supported historically. There  is
           no  good  reason  to use this type of argument passing, because there is no way for a feature to pass
           data to the step. When you need to  use  this  scenario,  please  consider  implementing  a  separate
           subroutine instead.

       •   a reference to an array of hashes

           This scenario corresponsds with a data table argument to the step. The names of the columns are taken
           from the first hash in the array (the first row in the data table).

           No  transformations  are  applied  to  the table passed in to prevent duplicate transformations being
           applied.

       The value of the third argument will be used as the "C-&gt;data" value for the "StepContext"  of  the  child
       step.  All  values passed in, will be passed to the child without applying "Transform" declarations. That
       way, double transformation is prevented.

       If the step you dispatch to doesn't pass for any reason (can't be found, dies,  fails,  whatever),  it'll
       throw  an  exception.  This  will get caught by the parent step, which will then fail, and show debugging
       output.

       <b>You</b> <b>must</b> <b>use</b> <b>the</b> <b>English</b> <b>names</b> <b>for</b> <b>the</b> <b>step</b> <b>verb,</b> <b>because</b> <b>we</b> <b>have</b> <b>no</b> <b>access</b> <b>to</b> <b>the</b> <b>parser.</b> <b>Also,</b> <b>remember</b>
       <b>to</b> <b>quote</b> <b>them</b> <b>as</b> <b>if</b> <b>you're</b> <b>in</b> <b>a</b> <b>step</b> <b>file,</b> <b>there</b> <b>may</b> <b>be</b> <b>a</b> <b>subroutine</b> <b>defined</b> <b>with</b> <b>the</b> <b>same</b> <b>name.</b>

   <b>dispatch</b>
           C-&gt;dispatch( 'Then', "the page has loaded successfully");

       See the paragraphs immediately above this

</pre><h4><b>AUTHOR</b></h4><pre>
       Peter Sergeant "<a href="mailto:pete@clueball.com">pete@clueball.com</a>"

</pre><h4><b>LICENSE</b></h4><pre>
         Copyright 2019-2023, Erik Huelsmann
         Copyright 2011-2019, Peter Sergeant; Licensed under the same terms as Perl

perl v5.40.1                                       2025-05-29              <u>Test::BDD::Cucumber::<a href="../man3pm/StepContext.3pm.html">StepContext</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>