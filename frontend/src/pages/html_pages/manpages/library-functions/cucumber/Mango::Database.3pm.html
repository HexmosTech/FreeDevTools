<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mango::Database - MongoDB database</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmango-perl">libmango-perl_1.30-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mango::Database - MongoDB database

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Mango::Database;

         my $db = Mango::Database-&gt;new(mango =&gt; $mango);
         my $collection = $db-&gt;collection('foo');
         my $gridfs     = $db-&gt;gridfs;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mango::Database is a container for MongoDB databases used by Mango.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       Mango::Database implements the following attributes.

   <b>mango</b>
         my $mango = $db-&gt;mango;
         $db       = $db-&gt;mango(Mango-&gt;new);

       Mango object this database belongs to. Note that this reference is usually weakened, so the Mango object
       needs to be referenced elsewhere as well.

   <b>name</b>
         my $name = $db-&gt;name;
         $db      = $db-&gt;name('bar');

       Name of this database.

</pre><h4><b>METHODS</b></h4><pre>
       Mango::Database inherits all methods from Mojo::Base and implements the following new ones.

   <b>build_write_concern</b>
         my $concern = $db-&gt;build_write_concern;

       Build write concern based on l&lt;/"mango"&gt; settings.

   <b>collection</b>
         my $collection = $db-&gt;collection('foo');

       Build Mango::Collection object for collection.

   <b>collection_names</b>
         my $names = $db-&gt;collection_names;

       Names of all collections in this database. You can filter the results by using the same arguments as for
       "list_collections". You can also append a callback to perform operation non-blocking.

         $db-&gt;collection_names(sub {
           my ($db, $err, $names) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>command</b>
         my $doc = $db-&gt;command(bson_doc(text =&gt; 'foo.bar', search =&gt; 'test'));
         my $doc = $db-&gt;command(bson_doc(getLastError =&gt; 1, w =&gt; 2));
         my $doc = $db-&gt;command('getLastError', w =&gt; 2);

       Run command against database. You can also append a callback to run command non-blocking.

         $db-&gt;command(('getLastError', w =&gt; 2) =&gt; sub {
           my ($db, $err, $doc) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>dereference</b>
         my $doc = $db-&gt;dereference($dbref);

       Resolve database reference. You can also append a callback to perform operation non-blocking.

         $db-&gt;dereference($dbref =&gt; sub {
           my ($db, $err, $doc) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>gridfs</b>
         my $gridfs = $db-&gt;gridfs;

       Build Mango::GridFS object.

   <b>list_collections</b>
         # return a cursor for all collections
         my $cursor = $db-&gt;list_collections;
         # only collections which name matchs a regex
         my $cursor = $db-&gt;list_collections(filter =&gt; { name =&gt; qr{^prefix} });
         # only capped collections
         my $cursor = $db-&gt;list_collections(filter =&gt; { 'options.capped' =&gt; 1 });
         # only the first 10 collections
         my $cursor = $db-&gt;list_collections(cursor =&gt; { batchSize =&gt; 10 });

       Returns a Mango::Cursor of all collections in this database. Each collection is represented by a document
       containing at least the keys "name" and "options". You can also append a callback to perform operation
       non-blocking.

         $db-&gt;list_collections(sub {
           my ($db, $err, $cursor) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

   <b>stats</b>
         my $stats = $db-&gt;stats;

       Get database statistics. You can also append a callback to perform operation non-blocking.

         $db-&gt;stats(sub {
           my ($db, $err, $stats) = @_;
           ...
         });
         Mojo::IOLoop-&gt;start unless Mojo::IOLoop-&gt;is_running;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mango, Mojolicious::Guides, &lt;<a href="http://mojolicio.us">http://mojolicio.us</a>&gt;.

perl v5.30.3                                       2020-06-05                               <u>Mango::<a href="../man3pm/Database.3pm.html">Database</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>