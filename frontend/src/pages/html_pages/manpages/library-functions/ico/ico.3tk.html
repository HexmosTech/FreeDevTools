<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ico - Reading and writing windows icons</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tklib">tklib_0.9-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ico - Reading and writing windows icons

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.4</b>

       package require <b>ico</b> <b>?1.1.3?</b>

       <b>::ico::icons</b> <u>file</u> ?<u>option</u> <u>value</u>...?

       <b>::ico::iconMembers</b> <u>file</u> <u>name</u> ?<u>option</u> <u>value</u>...?

       <b>::ico::getIcon</b> <u>file</u> <u>name</u> ?<u>option</u> <u>value</u>...?

       <b>::ico::getIconByName</b> <u>file</u> <u>name</u> ?<u>option</u> <u>value</u>...?

       <b>::ico::getFileIcon</b> <u>file</u> ?<u>option</u> <u>value</u>...?

       <b>::ico::writeIcon</b> <u>file</u> <u>name</u> <u>depth</u> <u>data</u> ?<u>option</u> <u>value</u>...?

       <b>::ico::copyIcon</b> <u>file</u> <u>index</u> <u>file2</u> <u>index2</u> ?<u>option</u> <u>value</u>...?

       <b>::ico::EXEtoICO</b> <u>file</u> ?dir?

       <b>::ico::clearCache</b> ?file?

       <b>::ico::transparentColor</b> <u>image</u> <u>color</u>

       <b>::ico::Show</b> <u>file</u> ?<u>option</u> <u>value</u>...?

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides  functions for reading and writing Windows icons from ICO, EXE, DLL, ICL, and BMP
       files.  As used in this module an icon is a visual representation of an object.  An icon consists of  one
       or  more  images  usually  with  varying  resolution  and color depth. Each icon and image has a resource
       identifier which may be a text string or a positive integer value. Most commands use this  identifier  to
       specify which icon or image to operate on.

</pre><h4><b>API</b></h4><pre>
       <b>::ico::icons</b> <u>file</u> ?<u>option</u> <u>value</u>...?
              Returns a list of icons found in <u>file</u> where each element is the name or numeric ID. Recognizes the
              following options:

              <b>-type</b> fileFormat

       <b>::ico::iconMembers</b> <u>file</u> <u>name</u> ?<u>option</u> <u>value</u>...?
              Returns  a  list of images that make up the icon with ID <u>name</u>. Each element is itself a sublist in
              the format {name width height bpp}. Recognizes the following options:

              <b>-type</b> fileFormat

       <b>::ico::getIcon</b> <u>file</u> <u>name</u> ?<u>option</u> <u>value</u>...?
              Extracts the icon with ID <u>name</u> from <u>file</u>.  The default <b>-format</b> is <b>image</b> which will return the name
              of a Tk image containing the icon. The resolution and color depth are selected  with  the  ?-res?,
              ?-bpp?,  and  ?-exact?  options.   If -exact is specified and there is no exact match, an error is
              thrown.  Optionally <b>-image</b> may be used to specify the name of the Tk image  that  is  created.  If
              <b>-format</b>  is <b>colors</b> then a list of color names in the #RRGGBB format is returned. Each list element
              is a horizontal row. Each horizontal row contains a list of colors for all the pixels in that  row
              from  left  to  right.  If <b>-format</b> is <b>name</b> then the resource name of the image chosen is returned.
              This is useful for calling writeIcon or getIconByName.  Recognizes the following <u>option</u>s.

              <b>-type</b> fileFormat

              <b>-format</b> value

              <b>-image</b> value

              <b>-res</b> value

              <b>-bpp</b> value

              <b>-exact</b> value

       <b>::ico::getIconByName</b> <u>file</u> <u>name</u> ?<u>option</u> <u>value</u>...?
              Extracts the image with ID <u>name</u> from <u>file</u>. This name should be the name of  a  specific  image  as
              returned  by  <b>::ico::iconMembers</b>,  not  an  icon  name  returned from <b>::ico::icons</b>. If there is no
              matching resource ID in <u>file</u> an error is thrown. Recognizes the following options:

              <b>-type</b> fileFormat

              <b>-format</b> value

       <b>::ico::getFileIcon</b> <u>file</u> ?<u>option</u> <u>value</u>...?
              This command is only functional when running under Windows.  It  reads  the  Windows  registry  to
              determine  the display icon for <u>file</u> as it would appear in Explorer or similar. <u>file</u> does not need
              to exist and may also be specified as a file extension with a leading dot. If <u>file</u> is a  directory
              or  you  specify  the  special  name  <b>Folder</b> then the icon representing a folder is returned. This
              command takes the same arguments and usage as <b>getIcon</b>:

              <b>-format</b> value

              <b>-image</b> value

              <b>-res</b> value

              <b>-bpp</b> value

              <b>-exact</b> value

       <b>::ico::writeIcon</b> <u>file</u> <u>name</u> <u>depth</u> <u>data</u> ?<u>option</u> <u>value</u>...?
              Writes an image to <u>file</u>. <u>name</u> is the resource identifier of the image  in  <u>file</u>  to  write.   When
              writing to an EXE, DLL, or ICL file you may only overwrite existing icons with an icon of the same
              dimensions and color depth. No icons may be added to these file types.

              When writing to BMP the name is ignored as this type can contain only one image. This means if the
              file already existed it is completely overwritten.

              When  writing  to  an  ICO  or  ICODATA file if the name specified does not exist then an image is
              appended and will be named the next in sequence (the specified name is ignored). Images in ICO and
              ICODATA files may be overwritten with differing dimensions or color depths.  Note  that  you  will
              get strange results when displaying icons if you fail to change every image which makes up a given
              icon.

              integer <u>depth</u> (in)
                     This  argument  must  have  a value of <b>1</b>, <b>4</b>, <b>8</b>, <b>24</b>, or <b>32</b>. If <u>data</u> has more colors than the
                     color depth allows an error will be generated.

              options <u>data</u> (in)
                     This argument is either a list of colors in the format returned by  <b>::ico::getIcon</b>  <b>-format</b>
                     <b>colors</b> or the name of a Tk image.

       Recognizes the following <u>option</u>s.

              <b>-type</b> fileFormat

       <b>::ico::copyIcon</b> <u>file</u> <u>index</u> <u>file2</u> <u>index2</u> ?<u>option</u> <u>value</u>...?
              Copies the icon at <u>index</u> in <u>file</u> to <u>index2</u> in <u>file2</u>.

              <b>-fromtype</b> fileFormat

              <b>-totype</b> fileFormat

       <b>::ico::EXEtoICO</b> <u>file</u> ?dir?
              Extracts  all  icons  from  the  executable <u>file</u> to ICO files placed in <u>dir</u>. ?dir? defaults to the
              directory <u>file</u> is located in. Icon files will be named in the form <u>file</u>-ID.ico  where  ID  is  the
              icon resource identifier.

              <b>-type</b> fileFormat

       <b>::ico::clearCache</b> ?file?
              The <b>::ico::getIconList</b> command caches icon offsets inside EXE, DLL, ICL, and ICO files in order to
              speed up extraction.  This command clears that cache for the specific ?file? or all files.

       <b>::ico::transparentColor</b> <u>image</u> <u>color</u>
              If  <u>image</u>  is a single word it is assumed to be the name of a Tk image.  All pixels matching <u>color</u>
              in the <u>image</u> will be set transparent.  Alternatively, <u>image</u> may be a color list in  which  case  a
              modified list is returned.

       <b>::ico::Show</b> <u>file</u> ?<u>option</u> <u>value</u>...?
              Application level command which displays a window showing all the icons in <u>file</u> and their name.

              <b>-type</b> fileFormat

              <b>-parent</b> pathName

</pre><h4><b>EXAMPLE</b></h4><pre>
                  button .explore -image [::ico::getIcon explorer.exe 0 -name explore -res 16 -bpp 8]

                  set i [lsearch -inline [::ico::iconMembers tclkit.exe 0] {* 32 32 8}]
                  set colorlist [::ico::getIconByName tclkit.exe [lindex $i 0] -format colors]

</pre><h4><b>LIMITATIONS</b></h4><pre>
       Icons  may  not  be  added  or  removed  from file types other than ICO. Icons in these files may only be
       replaced with icons of the same dimensions and color depth.

       Icons of 8bpp or lower must include black in the pallete, this means if your icon does not have black  in
       it, you will need to leave a color free so that it may be included by writeIcon.

       There is currently no way to read alpha channel information from 32bpp icons.

       Tk  images  do not have an alpha channel so the only way to write a true 32bpp icon is from a color list.
       writing a 32bpp icon from a Tkimage is identical to writing a 24bpp icon.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report such in the category <u>ico</u> of the <u>Tklib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tklib/reportlist">http://core.tcl.tk/tklib/reportlist</a>].  Please also
       report any ideas for enhancements you may have for either package and/or documentation.

</pre><h4><b>KEYWORDS</b></h4><pre>
       dll, entry, exe, ico, icon

tklib                                                 1.1.3                                             <u><a href="../man3tk/ico.3tk.html">ico</a></u>(3tk)
</pre>
 </div>
</div></section>
</div>
</body>
</html>