<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>png - PNG querying and manipulation of meta data</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       png - PNG querying and manipulation of meta data

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>crc32</b>

       package require <b>png</b> <b>?0.4.1?</b>

       <b>::png::validate</b> <u>file</u>

       <b>::png::isPNG</b> <u>file</u>

       <b>::png::imageInfo</b> <u>file</u>

       <b>::png::getTimestamp</b> <u>file</u>

       <b>::png::setTimestamp</b> <u>file</u> <u>time</u>

       <b>::png::getComments</b> <u>file</u>

       <b>::png::removeComments</b> <u>file</u>

       <b>::png::addComment</b> <u>file</u> <u>keyword</u> <u>text</u>

       <b>::png::addComment</b> <u>file</u> <u>keyword</u> <u>lang</u> <u>keyword2</u> <u>text</u>

       <b>::png::getPixelDimension</b> <u>file</u>

       <b>::png::image</b> <u>file</u>

       <b>::png::write</b> <u>file</u> <u>data</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  package  provides commands to query and modify PNG images. PNG stands for <u>Portable</u> <u>Network</u> <u>Graphics</u>
       and is specified at <u><a href="http://www.libpng.org/pub/png/spec/1.2">http://www.libpng.org/pub/png/spec/1.2</a></u>.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::png::validate</b> <u>file</u>
              Returns a value indicating if <u>file</u> is a valid PNG file. The file is  checked  for  PNG  signature,
              each  chunks  checksum  is verified, existence of a data chunk is verified, first chunk is checked
              for header, last chunk is checked for ending. Things <u>not</u>  checked  for  are:  validity  of  values
              within  a  chunk,  multiple header chunks, noncontiguous data chunks, end chunk before actual eof.
              This procedure can take lots of time.

              Possible return values:

              OK     File is a valid PNG file.

              SIG    no/broken PNG signature.

              BADLEN corrupt chunk length.

              EOF    premature end of file.

              NOHDR  missing header chunk.

              CKSUM  crc mismatch.

              NODATA missing data chunk(s).

              NOEND  missing end marker.

       <b>::png::isPNG</b> <u>file</u>
              Returns a boolean value indicating if the file <u>file</u> starts with a PNG signature. This  is  a  much
              faster  and  less  intensive  check  than  <b>::png::validate</b> as it does not check if the PNG data is
              valid.

       <b>::png::imageInfo</b> <u>file</u>
              Returns a dictionary with keys <b>width</b>, <b>height</b>, <b>depth</b>, <b>color</b>, <b>compression</b>,  <b>filter</b>,  and  <b>interlace</b>.
              The values are the associated properties of the PNG image in <u>file</u>.  Throws an error if file is not
              a  PNG  image,  or  if  the checksum of the header is invalid. For information on interpreting the
              values for the returned properties see <u><a href="http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html">http://www.libpng.org/pub/png/spec/1.2/PNG-Chunks.html</a></u>.

       <b>::png::getTimestamp</b> <u>file</u>
              Returns the epoch time if a timestamp chunk is found in the  PNG  image  contained  in  the  <u>file</u>,
              otherwise  returns  the  empty  string.  Does  not attempt to verify the checksum of the timestamp
              chunk.  Throws an error if the <u>file</u> is not a valid PNG image.

       <b>::png::setTimestamp</b> <u>file</u> <u>time</u>
              Writes a new timestamp to the <u>file</u>, either replacing the old timestamp, or adding one just  before
              the  data chunks if there was no previous timestamp. <u>time</u> is the new time in the gmt epoch format.
              Throws an error if <u>file</u> is not a valid PNG image.

       <b>::png::getComments</b> <u>file</u>
              Currently supports only uncompressed comments. Does not attempt to verify  the  checksums  of  the
              comment chunks. Returns a list where each element is a comment. Each comment is itself a list. The
              list  for  a  plain  text comment consists of 2 elements: the human readable keyword, and the text
              data. A unicode (international) comment consists of 4 elements: the human  readable  keyword,  the
              language  identifier,  the translated keyword, and the unicode text data.  Throws an error if <u>file</u>
              is not a valid PNG image.

       <b>::png::removeComments</b> <u>file</u>
              Removes all comments from the PNG image in <u>file</u>. Beware - This uses memory equal to the file  size
              minus  comments,  to  hold  the  intermediate  result.  Throws an error if <u>file</u> is not a valid PNG
              image.

       <b>::png::addComment</b> <u>file</u> <u>keyword</u> <u>text</u>
              Adds a plain <u>text</u> comment to the PNG image in <u>file</u>, just before the first data chunk.  Will  throw
              an  error  if no data chunk is found. <u>keyword</u> has to be less than 80 characters long to conform to
              the PNG specification.

       <b>::png::addComment</b> <u>file</u> <u>keyword</u> <u>lang</u> <u>keyword2</u> <u>text</u>
              Adds a unicode (international) comment to the PNG image in <u>file</u>, just before the first data chunk.
              Will throw an error if no data chunk is found. <u>keyword</u> has to be less than 80 characters  long  to
              conform to the PNG specification. <u>keyword2</u> is the translated <u>keyword</u>, in the language specified by
              the language identifier <u>lang</u>.

       <b>::png::getPixelDimension</b> <u>file</u>
              Returns  a  dictionary with keys <b>ppux</b>, <b>ppuy</b> and <b>unit</b> if the information is present.  Otherwise, it
              returns the empty string.

              The values of <b>ppux</b> and <b>ppuy</b> return the pixel per unit value in X or Y direction.

              The allowed values for key <b>unit</b> are <b>meter</b> and <b>unknown</b>. In the case of meter, the dpi value can  be
              calculated by multiplying with the conversion factor <b>0.0254</b>.

       <b>::png::image</b> <u>file</u>
              Given a PNG file returns the image in the list of scanlines format used by Tk_GetColor.

       <b>::png::write</b> <u>file</u> <u>data</u>
              Takes a list of scanlines in the Tk_GetColor format and writes the represented image to <u>file</u>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>png</u> of the <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       comment, image, png, timestamp

</pre><h4><b>CATEGORY</b></h4><pre>
       File formats

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2004, Code: Aaron Faupell &lt;<a href="mailto:afaupell@users.sourceforge.net">afaupell@users.sourceforge.net</a>&gt;
       Copyright (c) 2004, Doc:  Andreas Kupries &lt;<a href="mailto:andreas_kupries@users.sourceforge.net">andreas_kupries@users.sourceforge.net</a>&gt;

tcllib                                                0.4.1                                            <u><a href="../man3tcl/png.3tcl.html">png</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>