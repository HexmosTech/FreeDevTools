<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Text::Layout - Pango style markup formatting</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtext-layout-perl">libtext-layout-perl_0.045-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Text::Layout - Pango style markup formatting

       This module will cooperate with PDF::API2, PDF::Builder, Cairo, and Pango.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Text::Layout provides methods for Pango style text formatting. Where possible the methods have identical
       names and (near) identical behaviour as their Pango counterparts.

       See &lt;https://developer.gnome.org/pango/stable/pango-Layout-Objects.html&gt;.

       The package uses Text::Layout::FontConfig (included) to organize fonts by description.

       If module HarfBuzz::Shaper is installed, Text::Layout can use it for text shaping.

       Example, using PDF::API2 integration:

           use PDF::API2;              # or PDF::Builder
           use Text::Layout;

           # Create a PDF document.
           my $pdf = PDF::API2-&gt;new;   # or PDF::Builder-&gt;new
           $pdf-&gt;default_page_size("a4")       # ISO A4

           # Set up page and get the text context.
           my $page = $pdf-&gt;page;
           my $ctx  = $page-&gt;text;

           # Create a markup instance.
           my $layout = Text::Layout-&gt;new($pdf);

           # This example uses PDF corefonts only.
           Text::Layout::FontConfig-&gt;register_corefonts;

           $layout-&gt;set_font_description(Text::Layout::FontConfig-&gt;from_string("times 40"));
           $layout-&gt;set_markup( q{The &lt;i&gt;&lt;span foreground="red"&gt;quick&lt;/span&gt; &lt;span size="20"&gt;&lt;b&gt;brown&lt;/b&gt;&lt;/span&gt;&lt;/i&gt; fox} );

           # Center text.
           $layout-&gt;<a href="../man595/set_width.595.html">set_width</a>(595);    # width of A4 page
           $layout-&gt;set_alignment("center");

           # Render it.
           $layout-&gt;show( 0, 600, $ctx );
           $pdf-&gt;save("out.pdf");

       All PDF::API2 graphic and text methods can still be used, they won't interfere with the layout methods.

</pre><h4><b>NOTES</b> <b>FOR</b> <b>PDF::API2/Builder</b> <b>USERS</b></h4><pre>
   <b>Baselines</b>
       PDF::API2 and PDF::Builder render texts using the font baseline as origin.

       This module typesets text in an area of possibly limited width and height. The origin is the top left of
       this area. Currently this area contains only a single line of text. This will change in the future when
       line breaking and paragraph formatting is implemented.

       PDF::API2 and PDF::Builder coordinates have origin bottom left. This module produces information with
       respect to top left coordinates.

</pre><h4><b>IMPORTANT</b> <b>NOTES</b> <b>FOR</b> <b>PANGO</b> <b>USERS</b></h4><pre>
   <b>Coordinate</b> <b>system</b>
       Pango, layered upon Cairo, uses a coordinate system that starts off top left. So for western text the
       direction is increasing <u>x</u> and increasing <u>y</u>.

       PDF::API2 uses the coordinate system as defined in the PDF specification. It starts off bottom left. For
       western text the direction is increasing <u>x</u> and <b>de</b>creasing <u>y</u>.

</pre><h4><b>Pango</b> <b>Conformance</b> <b>Mode</b></h4><pre>
       Text::Layout can operate in one of two modes: <u>convenience</u> <u>mode</u> (enabled by default), and <u>Pango</u>
       <u>conformance</u> <u>mode</u>. The desired mode can be selected by calling the method <b>set_pango_scaling()</b>.

   <b>Pango</b> <b>coordinates</b>
       Pango uses two device coordinates units: Pango units and device units.  Pango units are 1024
       ("PANGO_SCALE") times the device units.

       Several methods have two variants, e.g. <b>get_size()</b> and <b>get_pixel_size()</b>. The pixel-variant uses device
       units while the other variant uses Pango units.

       In <u>convenience</u> <u>mode</u>, this module assumes no scaling. All units are PDF device units (1/72 inch).

   <b>Pango</b> <b>device</b> <b>units</b>
       Device units are used for font rendering. Pango device units are 96dpi while PDF uses 72dpi.

       In <u>convenience</u> <u>mode</u> this is ignored. E.g. a "Times 20" font will be of equal size in the two systems,

       In <u>Pango</u> <u>conformance</u> <u>mode</u> you would need to specify a font size of 15360 to get a 20pt font.

</pre><h4><b>SUPPORTED</b> <b>MARKUP</b></h4><pre>
       Text::Layout recognizes most of the Pango markup as provided by the Pango library version 1.50 or newer.
       However, not everything is supported.

   <b>Span</b> <b>attributes</b>
       font="<u>DESC</u>"   font_desc="<u>DESC</u>"
               Specifies a font to be used, e.g. "Serif 20".

       font_face="<u>FAM</u>"   face="<u>FAM</u>"
               Specifies a font family to be used.

       font_family="<u>FAM</u>"
               Same as font_face="<u>FAM</u>".

       size=<u>FNUM</u>   size=<u>FNUM</u>pt   size=<u>FNUM</u>%
               Font  size  in  1024ths  of  a  point  (conformance  mode),  or  in points (e.g.  '12.5pt'), or a
               percentage (e.g. '200%'), or one of the relative sizes 'smaller' or 'larger'.

               Note that in Pango conformance mode, the actual font size is 96/72 larger. So "45pt" gives a 60pt
               font.

       style="<u>STYLE</u>"   font_style="<u>STYLE</u>"
               Specifes the font style, e.g. "italic".

       weight="<u>WEIGHT</u>"   font_weight="<u>WEIGHT</u>"
               Specifies the font weight, e.g. "bold".

       foreground="<u>COLOR</u>"   fgcolor="<u>COLOR</u>"   color="<u>COLOR</u>"
               Specifies the foreground colour, e.g. "black".

       background="<u>COLOR</u>"   bgcolor="<u>COLOR</u>"
               Specifies the background colour, e.g. "white".

       underline="<u>TYPE</u>"
               Enables underlining.  <u>TYPE</u> must be "none", "single", or "double".

       underline_color="<u>COLOR</u>"
               The colour to be used for underlining, if enabled.

       overline="<u>TYPE</u>"
               Enables overlining.  <u>TYPE</u> must be "none", "single", or "double".

       overline_color="<u>COLOR</u>"
               The colour to be used for ovderlining, if enabled.

       strikethrough="<u>ARG</u>"
               Enables or disables overlining. <u>ARG</u> must be "true" or 1 to enable, and "false" or 0 to disable.

       strikethrough_color="<u>COLOR</u>"
               The colour to be used for striking, if enabled.

       rise="NUM"
               In convenience mode, lowers the text by <u>NUM</u>/1024 of the font size.  May be negative to  rise  the
               text.

               In  Pango  conformance  mode,  rises the text by <u>NUM</u> units from the baseline.  May be negative to
               lower the text.

               Note: In Pango conformance mode, "rise" does <b>not</b> accumulate.
                Use "baseline_shift" instead.

       rise="NUM"pt   rise="NUM"%   rise="NUM"em   rise="NUM"ex
               Rises the text from the baseline. May be negative to lower the text.

               Units are points if postfixed by <b>pt</b>, and a percentage of the current font size if postfixed by <b>%</b>.

               <b>em</b> units are equal to the current font size, <b>ex</b> half the font size.

               Note: This is not (yet?) part of the Pango markup standard.

       baseline_shift="NUM"   beseline_shift="NUM"pt   baseline_shift="NUM"%
               Like "rise", but accumulates.

       Also supported but not part of the official Pango Markup specification.

       href=""TARGET""
               Creates a clickable target that activates the <u>TARGET</u>.

               The <u>TARGET</u> can be:

               •   The name of an external PDF document, e.g. "that.pdf".

               •   A named destination in the document, e.g. "#there".  See "Strut attributes".

               •   a named destination in an external document, e.g. "that.pdf#there".

   <b>Img</b> <b>(image)</b> <b>attributes</b>
       <u>This</u> <u>is</u> <u>an</u> <u>extension</u> <u>to</u> <u>Pango</u> <u>markup.</u>

       Note that image markup elements may only occur as closed elements, i.e., "&lt;img/&gt;".

       id="<u>ID</u>" Implementation dependent.

       src="<u>URI</u>"
               Source filename or url for the image.

       width="<u>WIDTH</u>" (short: w="<u>WIDTH</u>")
               The width the image should be considered to occupy, regardless its actual dimensions.

       height="<u>HEIGHT</u>" (short: h="<u>HEIGHT</u>")
               The height the image should be considered to occupy, regardless its actual dimensions.

       x="<u>XDISP</u>"
               Horizontal displacement of the image relative to the "&lt;img/&gt;" element.

       y="<u>YDISP</u>"
               Vertical displacement of the image relative to the "&lt;img/&gt;" element.

       border="<u>THICK</u>"
               Provide a border around the element. <u>THICK</u> denotes its thickness.

   <b>Strut</b> <b>attributes</b>
       <u>This</u> <u>is</u> <u>an</u> <u>extension</u> <u>to</u> <u>Pango</u> <u>markup.</u>

       A "strut" is a markup element that has bounding box dimensions but no ink dimensions.

       Note that strut markup elements may only occur as closed elements, i.e., "&lt;strut/&gt;".

       label="<u>LABEL</u>"
               An optional identifying label.

               When a label is used, this will create a <u>named</u> <u>destination</u>, a symbolic name for a location in the
               document.  See the "span" "href" attribute,

       width="<u>WIDTH</u>" (short w="<u>WIDTH</u>")
               The width of the strut. Default value is zero.

               Width may be expressed in points, "em" (font size) or "ex" (half of font size).

       ascender="<u>ASC</u>" (short: a="<u>ASC</u>")
               The ascender of the strut. Optional.

               May be expressed in points, "em" (font size) or "ex" (half of font size).

       descender="<u>DESC</u>" (short: d="<u>DESC</u>")
               The descender of the strut. Optional.

               May be expressed in points, "em" (font size) or "ex" (half of font size).

   <b>Shortcuts</b>
       Equivalent "span" attributes for shortcuts.

       b       weight=bold

       big     larger

       emp     style=italic

       i       style=italic

       s       strikethrough=true

       small   size=smaller

       strong  weight=bold

       sub     size=smaller rise=-30%

       sup     size=smaller rise=30%

       tt      face=monospace

       u       underline=single

</pre><h4><b>METHODS</b></h4><pre>
       new( $pdf )
           Creates a new layout instance for PDF::API2. This is for convenience.  It is equivalent to

               use Text::Layout::PDFAPI2;
               $layout = Text::Layout::PDFAPI2-&gt;new($pdf);

           For other implementations only the above method can be used.

           The argument is the <u>context</u> for text formatting. In the case of PDF::API2 this will  be  a  PDF::API2
           object.

       copy
           Copies (clones) a layout instance.

           The content is copied deeply, the context and fonts are copied by reference.

       get_context
           Gets the context of this layout.

       context_changed
           Not supported.

       get_serial
           Not supported.

       set_text( $text )
           Puts a string in this layout instance. No markup is processed.

           Note  that if you have used <b>set_markup()</b> on this layout before, you may want to call <b>set_attributes()</b>
           to clear the attributes set on the layout from the  markup  as  this  function  does  not  clear  all
           attributes.

       get_text
           Gets the content of this layout instance as a single string.  Markup is ignored.

           Returns undef if no text has been set.

       get_character_count
           Returns the number of characters in the text of this layout.

           Basically the same as length of <b>get_text()</b>.

           Returns undef if no text has been set.

       set_markup( $string )
           Puts a string in this layout instance.

           The          string          can         contain         Pango-compatible         markup.         See
           &lt;https://developer.gnome.org/pygtk/stable/pango-markup-language.html&gt;.

           Implementation note: Although all markup is parsed, not all is implemented.

       set_markup_with_accel
           Not supported.

       set_attributes
       get_attributes
           Not yet implemented.

       set_font_description( $description )
           Sets the default font description for the layout. If no font description is set on  the  layout,  the
           font description from the layout's context is used.

           $description is a Text::Layout::FontConfig object.

       get_font_description
           Gets the font description for the layout.

           Returns undef if no font has been set yet.

       set_width( $width )
           Sets  the width to which the lines of the layout should align, wrap or ellipsized. A value of zero or
           less means unlimited width.  The width is in Pango units.

           Implementation note: Only alignment is implemented.

       get_width
           Gets the width in Pango units for for this instance, or zero if unlimited.

       set_height( $height )
           Sets the height in Pango units for this instance.

           Implementation note: Height restrictions are not yet implemented.

       get_height
           Gets the height in Pango units for this instance, or zero if no height restrictions apply.

       set_wrap( $mode )
           Sets the wrap mode; the wrap mode only has effect if a width is set on the layout  with  <b>set_width()</b>.
           To turn off wrapping, set the width to zero or less.

           Not yet implemented.

       get_wrap
           Returns the current wrap mode.

           Not yet implemented.

       is_wrapped
           Queries whether the layout had to wrap any paragraphs.

       set_ellipsize( $mode )
           Sets the type of ellipsization being performed for the layout.

           Not yet implemented.

       get_ellipsize
           Gets the type of ellipsization being performed for the layout.

       is_ellipsized
           Queries whether the layout had to ellipsize any paragraphs.

           Not yet implemented.

       set_indent( $value )
           Sets the width in Pango units to indent for each paragraph.

           A  negative value of indent will produce a hanging indentation. That is, the first line will have the
           full width, and subsequent lines will be indented by the absolute value of indent.

           The indent setting is ignored if layout alignment is set to "center".

           Not yet implemented.

       get_indent
           Gets the current indent value in Pango units.

       set_spacing( $value )
           Sets the amount of spacing, in Pango units, between lines of the layout.

           When placing lines with spacing, things are arranged so that

               line2.top = line1.bottom + spacing

           Note: By default the line height (as determined by the font) for placing lines is used.  The  spacing
           set  with  this  function  is only taken into account when the line-height factor is set to zero with
           <b>set_line_spacing()</b>.

           Not yet implemented.

       get_spacing
           Gets the current amount of spacing, in Pango units.

       set_line_spacing( $factor )
           Sets a factor for line spacing. Typical values are: 0, 1, 1.5, 2. The default value is 0.

           If factor is non-zero, lines are placed so that

               baseline2 = baseline1 + factor * height2

           where height2 is the line height of the second line (as determined by the font(s)). In this case, the
           spacing set with <b>set_spacing()</b> is ignored.

           If factor is zero, spacing is applied as before.

           Not yet implemented.

       get_line_spacing
           Gets the current line spacing factor.

       set_justify( $state )
           Sets whether each complete line should be stretched to fill the entire  width  of  the  layout.  This
           stretching is typically done by adding whitespace.

           Not yet implemented.

       get_justify
           Gets whether each complete line should be stretched to fill the entire width of the layout.

       set_auto_dir( $state )
       get_auto_dir
           Not supported.

       set_alignment( $align )
           Sets  the  alignment  for  the  layout:  how partial lines are positioned within the horizontal space
           available.

           $align must be one of "left", "center", or "right",

       get_alignment
           Gets the alignment for this instance.

       set_tabs( $stops )
       get_tabs
           Not yet implemented.

       set_single_paragraph_mode( $state )
       get_single_paragraph_mode
           Not yet implemented.

       get_unknown_glyphs_count
           Counts the number unknown glyphs in the layout.

           Not yet implemented.

       get_log_attrs
       get_log_attrs_readonly
           Not implemented.

       index_to_pos( $index )
           Converts from a character index within the layout to  the  onscreen  position  corresponding  to  the
           grapheme at that index, which is represented as rectangle.

           Not yet implemented.

       index_to_line_x ( $index )
           Converts from a character index within the layout to line and X position.

           Not yet implemented.

       xy_to_index ( $x, $y )
           Converts from $x,$y position to a character index within the layout.

           Not yet implemented.

       get_extents
           Computes the logical and ink extents of the layout.

           Logical extents are usually what you want for positioning things.

           Return value in scalar context is a hash ref with 4 values:
            "x",  "y",  "width",  and "height" describing the logical extents of the layout.  In list context an
           array of two hashrefs is returned.  The first reflects  the  ink  extents,  the  second  the  logical
           extents.

           In  the  extents, "x" will reflect the offset when text is centered or right aligned. It will be zero
           for left aligned text. For right aligned text, it will be the width of the layout.

           "y" will reflect the offset when text is centered vertically or bottom aligned. It will be  zero  for
           top aligned text.

           See also get_pixel_extents below.

           Implementation  note:  If  the PDF::API support layer cannot calculate ink, this function returns two
           identical extents.

       get_pixel_extents
           Same as get_extents, but using device units.

           The returned values are suitable for (assuming $pdf_text and $pdf_gfx are the PDF text  and  graphics
           contexts):

               $layout-&gt;render( $x, $y, $pdf_text );
               $box = $layout-&gt;get_pixel_extents;
               $pdf_gfx-&gt;translate( $x, $y );
               $pdf_gfx-&gt;rect( @$box{ qw( x y width height ) } );
               $pdf_gfx-&gt;stroke;

       get_size
           Returns the width and height of this layout.

           In  list  context, width and height are returned as an two-element list.  In scalar context a hashref
           with keys "width" and "height" is returned.

       get_pixel_size
           Same as <b>get_size()</b>.

       get_iter
           Returns the layout for the first line.

           Implementation note: This is a dummy, it returns the  layout.   It  is  provided  so  you  can  write
           $layout-&gt;<b>get_iter()</b>-&gt;<b>get_baseline()</b> to be compatible with the official Pango API.

       get_baseline
           Gets the Y position of the baseline of the first line in this layout.

           Implementation  note: Position is relative to top left, so due to the PDF coordinate system this is a
           negative number.

           Note: The Python API only supports this method on iteration objects.  See <b>get_iter()</b>.

</pre><h4><b>METHODS</b> <b>NOT</b> <b>IMPLEMENTED</b></h4><pre>
       get_line_count
       get_line( $index )
       get_line_readonly( $index )
       get_lines
       get_lines_readonly
       line_get_extents
       line_get_pixel_entents
       line_index_to_x
       line_x_to_index
       line_get_x_ranges
       line_get_height
       get_cursor_pos
       move_cursor_visually

   <b>ADDITIONAL</b> <b>METHODS</b>
       The following methods are not part of the Pango API.

       set_font_size( $size )
           Sets the size for the current font.

       get_font_size
           Returns the size of the current font.

       get_bbox
           Returns the bounding box of the text, w.r.t. the (top-left) origin.

           bb = ( bl, x, y, width, height )

           bb[0] = baseline distance from the top.

           bb[1] = displacement from the left, nonzero for centered and right aligned text

           bb[2] = displacement from the top, usually zero

           bb[3] = advancewidth

           bb[4] = height

           Note that the bounding box will in general  be  equal  to  the  font  bounding  box  except  for  the
           advancewidth.

           NOTE: Some fonts do not include accents on capital letters in the ascend.

           If  an  argument  is supplied and true, <b>get_bbox()</b> will attempt to calculate the ink extents as well,
           and add these as another set of 4 elements,

           In list context returns the array of values, in scalar context an array ref.

       get_struts
           Returns the list of the struts in the layout, if any.

           Each element of the list is a hash, with key/value pairs for all the attributes of the  corresponding
           "&lt;strut/&gt;" markup item.

           Additionally,  in  each  element  there's a key "_x" that contains the horizontal displacement of the
           strut relative to the star of the layout.

           In list context returns the array of values, in scalar context an array ref.

       align_struts( $other )
           Aligns the fragments in both layouts to each other, based on the struts.

           This will adjust the widths of the struts of both participants.

       spread_struts
           Evenly distributes the available space over the struts, if any.

       show( $x, $y, $text )
           Transfers the content of this layout instance to the designated graphics environment.

           Use this instead of <b>Pango::Cairo::show_layout()</b>.

           For PDF::API2, $text must be an object created by the $page-&gt;text method.

       set_pango_mode( $enable )
           Enable/disable Pango conformance mode.  See "Pango Conformance Mode".

           Returns the internal Pango scaling factor if enabled.

       get_pango
           See "Pango Conformance Mode".

           Returns the internal Pango scaling factor if conformance mode is  enabled,  otherwise  it  returns  1
           (one).

       register_shortcode( $code, $span, %flags )
           Add user-defined shortcodes.  This is just a replacement of &lt;$code&gt; -&gt; &lt;span $span&gt;.

           When used as a class method, the shortcodes are accessible to all layout instances,

           Flags:

           remove =&gt; 1 -- remove this shortcode

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Description of the Pango Markup Language: &lt;https://docs.gtk.org/Pango/pango_markup.html#pango-markup&gt;.

       Documentation of the Pango Layout class: &lt;https://docs.gtk.org/Pango/class.Layout.html&gt;.

       PDF::API2, PDF::Builder, HarfBuzz::Shaper, Font::TTF.

</pre><h4><b>AUTHOR</b></h4><pre>
       Johan Vromans, "&lt;JV at CPAN dot org&gt;"

</pre><h4><b>SUPPORT</b></h4><pre>
       Development of this module takes place on GitHub: &lt;https://github.com/sciurius/perl-Text-Layout&gt;.

       You can find documentation for this module with the perldoc command.

         perldoc Text::Layout

       Please report any bugs or feature requests using the issue tracker on GitHub.

</pre><h4><b>LICENSE</b></h4><pre>
       Copyright (C) 2019,2024 Johan Vromans

       This  module  is  free software. You can redistribute it and/or modify it under the terms of the Artistic
       License 2.0.

       This program is distributed in the hope that it will be useful, but without any  warranty;  without  even
       the implied warranty of merchantability or fitness for a particular purpose.

perl v5.40.1                                       2025-08-15                                  <u>Text::<a href="../man3pm/Layout.3pm.html">Layout</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>