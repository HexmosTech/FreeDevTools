<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collectd::Unixsock - Abstraction layer for accessing the functionality by collectd's unixsock plugin.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/collectd-core">collectd-core_5.12.0-23ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Collectd::Unixsock - Abstraction layer for accessing the functionality by collectd's unixsock plugin.

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Collectd::Unixsock;

         my $sock = Collectd::Unixsock-&gt;new ($path);

         my $value = $sock-&gt;getval (%identifier);
         $sock-&gt;putval (%identifier,
                        time =&gt; time (),
                        values =&gt; [123, 234, 345]);

         $sock-&gt;destroy ();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       collectd's unixsock plugin allows external programs to access the values it has collected or received and
       to submit own values. This Perl-module is simply a little abstraction layer over this interface to make
       it even easier for programmers to interact with the daemon.

</pre><h4><b>VALUE</b> <b>IDENTIFIERS</b></h4><pre>
       The values in the collectd are identified using a five-tuple (host, plugin, plugin-instance, type, type-
       instance) where only plugin instance and type instance may be undef. Many functions expect an <u>%identifier</u>
       hash that has at least the members <b>host</b>, <b>plugin</b>, and <b>type</b>, possibly completed by <b>plugin_instance</b> and
       <b>type_instance</b>.

       Usually you can pass this hash as follows:

         $self-&gt;method (host =&gt; $host, plugin =&gt; $plugin, type =&gt; $type, %other_args);

</pre><h4><b>PUBLIC</b> <b>METHODS</b></h4><pre>
       <u>$self</u> = Collectd::Unixsock-&gt;<b>new</b> ([<u>$path</u>]);
           Creates a new connection to the daemon. The optional <u>$path</u> argument gives the path to the UNIX socket
           of the "unixsock plugin" and defaults to <u>/var/run/collectd-unixsock</u>. Returns the newly created object
           on success and false on error.

       <u>$res</u> = <u>$self</u>-&gt;<b>getval</b> (<u>%identifier</u>);
           Requests  a value-list from the daemon. On success a hash-ref is returned with the name of each data-
           source as the key and the according value as, well, the value. On error false is returned.

       <u>$res</u> = <u>$self</u>-&gt;<b>getthreshold</b> (<u>%identifier</u>);
           Requests a threshold from the daemon. On success a hash-ref is returned with the threshold  data.  On
           error false is returned.

       <u>$self</u>-&gt;<b>putval</b> (<u>%identifier</u>, <b>time</b> =&gt; <u>$time</u>, <b>values</b> =&gt; [...]);
           Submits  a  value-list  to  the  daemon. If the <b>time</b> argument is omitted time() is used. The required
           argument <b>values</b> is a reference to an array of values that is to be submitted. The  number  of  values
           must match the number of values expected for the given <b>type</b> (see "VALUE IDENTIFIERS"), though this is
           checked  by  the  daemon,  not  the  Perl module. Also, gauge data-sources (e. g. system-load) may be
           "undef". Returns true upon success and false otherwise.

       <u>$res</u> = <u>$self</u>-&gt;<b>listval_filter</b> ( %identifier )
           Queries a list of values from the daemon while restricting the results to certain hosts, plugins etc.
           The argument may be anything that passes for an identifier (cf. "VALUE  IDENTIFIERS"),  although  all
           fields are optional.  The returned data is in the same format as from "listval".

       <u>$res</u> = <u>$self</u>-&gt;<b>listval</b> ()
           Queries  a list of values from the daemon. The list is returned as an array of hash references, where
           each hash reference is a valid identifier. The "time" member of each hash holds the  epoch  value  of
           the last update of that value.

       <u>$res</u> = <u>$self</u>-&gt;<b>putnotif</b> (<b>severity</b> =&gt; <u>$severity</u>, <b>message</b> =&gt; <u>$message</u>, ...);
           Submits a notification to the daemon.

           Valid options are:

           <b>severity</b>
               Sets the severity of the notification. The value must be one of the following strings: "failure",
               "warning", or "okay". Case does not matter. This option is mandatory.

           <b>message</b>
               Sets the message of the notification. This option is mandatory.

           <b>time</b>
               Sets the time. If omitted, time() is used.

           <u>Value</u> <u>identifier</u>
               All  the  other  fields  of  the  value  identifiers,  <b>host</b>,  <b>plugin</b>,  <b>plugin_instance</b>, <b>type</b>, and
               <b>type_instance</b>, are optional. When given, the notification is associated with the performance data
               of that identifier.  For more details, please see <b><a href="../man5/collectd-unixsock.5.html">collectd-unixsock</a></b>(5).

       <u>$self</u>-&gt;<b>flush</b> (<b>timeout</b> =&gt; <u>$timeout</u>, <b>plugins</b> =&gt; [...], <b>identifier</b>  =&gt; [...]);
           Flush cached data.

           Valid options are:

           <b>timeout</b>
               If this option is specified, only data older than <u>$timeout</u> seconds is flushed.

           <b>plugins</b>
               If this option is specified, only the selected  plugins  will  be  flushed.  The  argument  is  a
               reference to an array of strings.

           <b>identifier</b>
               If  this  option  is  specified,  only the given identifier(s) will be flushed. The argument is a
               reference to an array of identifiers. Identifiers, in this case, are hash references and have the
               members as outlined in "VALUE IDENTIFIERS".

       <u>$self</u>-&gt;destroy ();
           Closes the socket before the object is destroyed. This function is also automatically called then the
           object goes out of scope.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/collectd.1.html">collectd</a></b>(1), <b><a href="../man5/collectd.conf.5.html">collectd.conf</a></b>(5), <b><a href="../man5/collectd-unixsock.5.html">collectd-unixsock</a></b>(5)

</pre><h4><b>AUTHOR</b></h4><pre>
       Florian octo Forster &lt;<a href="mailto:octo@collectd.org">octo@collectd.org</a>&gt;

perl v5.40.1                                       2025-06-02                            <u>Collectd::<a href="../man3pm/Unixsock.3pm.html">Unixsock</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>