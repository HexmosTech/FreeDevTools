<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>__pmParseHostAttrsSpec,  __pmUnparseHostAttrsSpec,  __pmFreeHostAttrsSpec,  __pmFreeAttrsSpec  - host and</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>__pmParseHostAttrsSpec</b>,  <b>__pmUnparseHostAttrsSpec</b>,  <b>__pmFreeHostAttrsSpec</b>,  <b>__pmFreeAttrsSpec</b>  - host and
       attributes specification parser

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>"pmapi.h"</b>
       <b>#include</b> <b>"libpcp.h"</b>

       <b>int</b> <b>__pmParseHostAttrsSpec(const</b> <b>char</b> <b>*</b><u>string</u><b>,</b> <b>__pmHostSpec</b> <b>**</b><u>hostsp</u><b>,</b> <b>int</b> <b>*</b><u>count</u><b>,</b> <b>__pmHashCtl</b> <b>*</b><u>attrs</u><b>,</b>
               <b>char</b> <b>**</b><u>errmsg</u><b>);</b>
       <b>int</b> <b>__pmUnparseHostAttrsSpec(__pmHostSpec</b> <b>*</b><u>hostsp</u><b>,</b> <b>int</b> <b>*</b><u>count</u><b>,</b> <b>__pmHashCtl</b> <b>*</b><u>attrs</u><b>,</b> <b>char</b> <b>*</b><u>string</u><b>,</b> <b>size_t</b>
               <u>size</u><b>);</b>
       <b>void</b> <b>__pmFreeHostAttrsSpec(__pmHostSpec</b> <b>*</b><u>hosts</u><b>,</b> <b>int</b> <u>count</u><b>,</b> <b>__pmHashCtl</b> <b>*</b><u>attrs</u><b>);</b>
       <b>void</b> <b>__pmFreeAttrsSpec(__pmHashCtl</b> <b>*</b><u>attrs</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>CAVEAT</b></h4><pre>
       This documentation is intended for internal Performance Co-Pilot (PCP) developer use.

       These interfaces are not part of the PCP APIs that are guaranteed to remain fixed  across  releases,  and
       they may not work, or may provide different semantics at some point in the future.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>__pmParseHostAttrsSpec</b>  accepts  a  <b>string</b>  specifying the location of a PCP performance metric collector
       daemon, and any attributes that should be associated with the connection to that daemon.

       The syntax allows the optional specification of a protocol (native PCP protocol, encrypted  PCP  protocol
       or unix domain socket protocol).

       If  the specified protocol is native PCP protocol, or encrypted PCP protocol, an initial <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1) hostname
       with optional port numbers and optional proxy host, and optional attributes which are  to  be  associated
       with the connection may be specified.  Some examples follow:

            pcp://nas1.servers.com:<a href="mailto:44321@firewalls.r.us">44321@firewalls.r.us</a>?compress
            pcps://nas1.servers.com?user=otto&amp;pass=blotto&amp;compress

       If the specified protocol is a unix domain socket protocol, the path to the socket in the local file sys‐
       tem  may be specified along with optional attributes which are to be associated with the connection.  For
       example:

            unix://$PCP_RUN_DIR/pmcd.socket:?compress
            local://my/local/pmcd.socket:?user=otto&amp;pass=blotto&amp;compress

       If the optional protocol component is not specified, then the default setting will be used - which is the
       native PCP binary protocol.  However, this can still be overwritten via the environment as  described  in
       <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).   If  the protocol prefix is specified, it must be one of either "pcp://" (clear), "pcps://"
       (secure, encrypted), "unix://" (authenticated local) or "local://" ("unix://" then "pcp://").

       The path specified for the "unix://" and "local://" protocols will always be interpreted as  an  absolute
       path name. For example, the following are all interpreted identically as <u>$PCP_RUN_DIR/pmcd.socket</u>.

            unix://$PCP_RUN_DIR/pmcd.socket
            unix:/$PCP_RUN_DIR/pmcd.socket
            unix:$PCP_RUN_DIR/pmcd.socket

       Refer to <b><a href="../man3/__pmParseHostSpec.3.html">__pmParseHostSpec</a></b>(3) for further details of the host and proxy host components.

       If  any  optional connection attributes are to be specified, these are separated from the hostname compo‐
       nent via the '?' character.  Each attribute is separated by the '&amp;' character, and each can be  either  a
       simple attribute flag (such as "compress") or a name=value pair (such as "username=fred").

       <b>__pmParseHostAttrsSpec</b>  takes  a  null-terminated host-and-attributes specification <b>string</b> and returns an
       array of <b>__pmHostSpec</b> structures, where the array has <b>count</b> entries, and an <b>attrs</b> hash  table  containing
       any attributes (including the optional protocol, if it was specified).

       Full details of the <b>__pmHostSpec</b> structures are provided in <b><a href="../man3/__pmParseHostSpec.3.html">__pmParseHostSpec</a></b>(3).

       The  <b>__pmHashCtl</b>  structure  that  is filled out on return via <b>attributes</b>, represents each individual at‐
       tribute in the specification <b>string</b> with any associated value.  It should be considered an opaque  struc‐
       ture and should be zeroed beforehand.

       The  returned hash table control structure can be iterated using one of the supplied iteration mechanisms
       - <b>__pmHashWalkCB</b> (a callback-based mechanism) or <b>__pmHashWalk</b> (a  simple  procedural  mechanism).   These
       provide access to the individual hash nodes, as <b>__pmHashNode</b> entries, which provide access to decoded at‐
       tributes and their (optional) values.

           typedef struct __pmHashNode {
               __pmHashNode    *next;    /* next node in hash bucket (internal) */
               unsigned int    key;      /* key identifying particular attribute */
               void            *data;    /* attributes value (optional, string) */
           } __pmHashNode;

       There  are a set number of valid attributes, however these may be extended in future releases as new con‐
       nection parameters become needed.  These can be identified via the PCP_ATTR_* macros in  the  PCP  header
       files.

       <b>__pmUnparseHostSpec</b>  performs  the inverse operation, creating a <b>string</b> representation from <b>hosts</b> and <b>at‐</b>
       <b>tributes</b> structures.  The size of the supplied <b>string</b> buffer must be provided by  the  caller  using  the
       <b>size</b> parameter.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       If the given <b>string</b> is successfully parsed <b>__pmParseHostAttrsSpec</b> returns zero.  In this case the dynamic
       storage  allocated  by  <b>__pmParseHostAttrsSpec</b> can be released by calling <b>__pmFreeHostAttrsSpec</b> using the
       addresses returned from <b>__pmParseHostAttrsSpec</b>

       Alternatively, the <b>hosts</b> and <b>attributes</b> memory can be freed  separately,  using  <b><a href="../man3/__pmFreeHostSpec.3.html">__pmFreeHostSpec</a></b>(3)  and
       <b>__pmFreeAttrsSpec</b>.

       <b>__pmParseHostAttrsSpec</b> returns <b>PM_ERR_GENERIC</b> and a dynamically allocated error message string in <b>errmsg</b>,
       if the given <b>string</b> does not parse, and the user-supplied <b>errmsg</b> pointer is non-null.  Be sure to <b><a href="../man3/free.3.html">free</a></b>(3)
       the error message string in this situation.

       In  the case of an error, both <b>hosts</b> and <b>attributes</b> are undefined.  In the case of success, <b>errmsg</b> is un‐
       defined.

       On success <b>__pmUnparseHostAttrsSpec</b> returns a positive value indicating the number of characters  written
       into  the  supplied  buffer.   However,  if  the supplied buffer was too small, a negative status code of
       <b>-E2BIG</b> will be returned.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pmcd.1.html">pmcd</a></b>(1), <b><a href="../man1/pmproxy.1.html">pmproxy</a></b>(1), <b><a href="../man1/pmchart.1.html">pmchart</a></b>(1), <b><a href="../man3/__pmParseHostSpec.3.html">__pmParseHostSpec</a></b>(3), <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3) and <b><a href="../man3/pmNewContext.3.html">pmNewContext</a></b>(3).

Performance Co-Pilot                                   PCP                               <u><a href="../man3/PMPARSEHOSTATTRSSPEC.3.html">PMPARSEHOSTATTRSSPEC</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>