<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmGetArchiveLabel,  pmGetHighResArchiveLabel  -  fetch the label record from a set of performance metrics</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmGetArchiveLabel</b>,  <b>pmGetHighResArchiveLabel</b>  -  fetch the label record from a set of performance metrics
       archives

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>

       <b>int</b> <b>pmGetArchiveLabel(pmLogLabel</b> <b>*</b><u>lp</u><b>);</b>
       <b>int</b> <b>pmGetHighResArchiveLabel(pmHighResLogLabel</b> <b>*</b><u>lp</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Within the framework of the Performance Co-Pilot (PCP), archives of performance  metrics  values  may  be
       accumulated and saved using the program <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) and the <b><a href="../man3/LOGIMPORT.3.html">LOGIMPORT</a></b>(3) programming interface.

       The  routines <b>pmGetArchiveLabel</b> and <b>pmGetHighResArchiveLabel</b> may be used to fetch the label record from a
       set of archives that has already been opened  using  <b><a href="../man3/pmNewContext.3.html">pmNewContext</a></b>(3),  or  <b><a href="../man3/pmDupContext.3.html">pmDupContext</a></b>(3),  and  thereby
       associated with the current Performance Metrics Application Programming Interface (PMAPI) context.

       It  is recommended that new applications use the high resolution API and existing applications transition
       to this interface over time.

       The result returned via the pointer <u>lp</u> is a structure that must be pre-allocated by the  caller  and  has
       one of the following two formats (defined in <b>pmapi.h</b>).

         typedef struct {
           int        magic;       /* PM_LOG_MAGIC | archive format version no. */
           pid_t      pid;         /* PID of logger */
           struct timespec start;  /* start of this archive */
           char       hostname[PM_MAX_HOSTNAMELEN];   /* collection host full name */
           char       timezone[PM_MAX_TIMEZONELEN];   /* generic, squashed $TZ */
           char       zoneinfo[PM_MAX_ZONEINFOLEN];   /* local platform $TZ */
         } pmHighResLogLabel;

         typedef struct {
           int        ll_magic;    /* PM_LOG_MAGIC | archive format version no. */
           pid_t      ll_pid;      /* PID of logger */
           struct timeval ll_start;/* start of this archive */
           char       ll_hostname[PM_LOG_MAXHOSTLEN]; /* name of collection host */
           char       ll_tz[40];   /* $TZ at collection host */
         } pmLogLabel;

       Both  forms  can  be  used  with  either version 2 or version 3 archives.  However, the pmHighResLogLabel
       structure provides the higher resolution start time stored in the newer  format,  as  well  as  the  full
       timezone  and  extended  length  host  name  fields.   For detailed information about the archive on-disk
       format, refer to <b><a href="../man5/LOGARCHIVE.5.html">LOGARCHIVE</a></b>(5).

       For an application using <b>pmGetHighResArchiveLabel</b>, the most useful information from the archive label  is
       likely to be in the fields <u>start</u>, <u>hostname</u>, <u>timezone</u>, and <u>zoneinfo</u>.

       The  <u>zoneinfo</u>  field  contains  the  most  detailed timezone information available, and should be used if
       present (non-zero length string).  It will only not be present in the case of version 2 archives  -  this
       is a new field added as part of the version 3 format.  The <u>timezone</u> field will always be present, however
       it is the 'squashed' timezone value and in certain situations is not the most accurate timezone.

       For  older  applications  using  <b>pmGetArchiveLabel</b>, the most useful information from the archive label is
       likely to be in the fields <u>ll_start</u>, <u>ll_hostname</u> or <u>ll_tz</u>.  Note that the size of the  <u>ll_hostname</u>  field
       is  <u>PM_LOG_MAXHOSTLEN</u>  (64  bytes)  which  is  less  than  <b>MAXHOSTNAMELEN</b>  (see <b><a href="../man3/gethostbyname.3.html">gethostbyname</a></b>(3)) on some
       platforms.  These semantics are necessary to retain backwards compatibility with  the  PCP  archive  file
       format.

       Both <b>pmGetArchiveLabel</b> and <b>pmGetHighResArchiveLabel</b> return zero for success.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>PM_ERR_NOCONTEXT</b>
              the current PMAPI context is either invalid, or not associated with a set of archives

</pre><h4><b>PCP</b> <b>ENVIRONMENT</b></h4><pre>
       Environment  variables with the prefix <b>PCP_</b> are used to parameterize the file and directory names used by
       PCP.  On each installation, the file <u>/etc/pcp.conf</u> contains the local values for  these  variables.   The
       <b>$PCP_CONF</b> variable may be used to specify an alternative configuration file, as described in <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5).
       Values for these variables may be obtained programmatically using the <b><a href="../man3/pmGetConfig.3.html">pmGetConfig</a></b>(3) function.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1),  <b><a href="../man3/LOGIMPORT.3.html">LOGIMPORT</a></b>(3),  <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3),  <b><a href="../man3/pmDupContext.3.html">pmDupContext</a></b>(3),  <b><a href="../man3/pmGetConfig.3.html">pmGetConfig</a></b>(3), <b><a href="../man3/pmNewContext.3.html">pmNewContext</a></b>(3), <b><a href="../man5/LOGARCHIVE.5.html">LOGARCHIVE</a></b>(5),
       <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5) and <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5).

Performance Co-Pilot                                   PCP                                  <u><a href="../man3/PMGETARCHIVELABEL.3.html">PMGETARCHIVELABEL</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>