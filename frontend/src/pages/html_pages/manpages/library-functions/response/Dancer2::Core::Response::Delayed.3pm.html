<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dancer2::Core::Response::Delayed - Delayed responses</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdancer2-perl">libdancer2-perl_1.1.2+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Dancer2::Core::Response::Delayed - Delayed responses

</pre><h4><b>VERSION</b></h4><pre>
       version 1.1.2

</pre><h4><b>SYNOPSIS</b></h4><pre>
           my $response = Dancer2::Core::Response::Delayed-&gt;new(
               request   =&gt; Dancer2::Core::Request-&gt;new(...),
               response  =&gt; Dancer2::Core::Response-&gt;new(...),
               cb        =&gt; sub {...},

               # optional error handling
               error_cb  =&gt; sub {
                   my ($error) = @_;
                   ...
               },
           );

           # or in an app
           get '/' =&gt; sub {
               # delayed response:
               delayed {
                   # streaming content
                   content "data";
                   content "more data";

                   # close user connection
                   done;
               } on_error =&gt; sub {
                   my ($error) = @_;
                   warning 'Failed to stream to user: ' . request-&gt;remote_address;
               };
           };

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This object represents a delayed (asynchronous) response for Dancer2.  It can be used via the "delayed"
       keyword.

       It keeps references to a request and a response in order to avoid keeping a reference to the application.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>request</b>
       Contains a request the delayed response uses.

       In the context of a web request, this will be the request that existed when the delayed response has been
       created.

   <b>response</b>
       Contains a response the delayed response uses.

       In the context of a web request, this will be the response that existed when the delayed response has
       been created.

   <b>cb</b>
       The code that will be run asynchronously.

   <b>error_cb</b>
       A callback for handling errors. This callback receives the error as its first (and currently only)
       parameter.

</pre><h4><b>METHODS</b></h4><pre>
   <b>is_halted</b>
       A method indicating whether the response has halted.

       This is useless in the context of an asynchronous request so it simply returns no.

       This method is likely going away.

   <b>has_passed</b>
       A method indicating whether the response asked to skip the current response.

       This is useless in the context of an asynchronous request so it simply returns no.

       This method is likely going away.

   <b>to_psgi</b>
       Create a PSGI response. The way it works is by returning a proper PSGI response subroutine which
       localizes the request and response (in case the callback wants to edit them without a reference to them),
       and then calls the callback.

       Finally, when the callback is done, it asks the response (whether it was changed or not) to create its
       own PSGI response (calling "to_psgi") and sends that to the callback it receives as a delayed response.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dancer Core Developers

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by Alexis Sukrieh.

       This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.0                                       2024-12-08              <u>Dancer2::Core::Response::<a href="../man3pm/Delayed.3pm.html">Delayed</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>