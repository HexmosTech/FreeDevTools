<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File::Flock::Retry - Yet another flock module</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libfile-flock-retry-perl">libfile-flock-retry-perl_0.632-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       File::Flock::Retry - Yet another flock module

</pre><h4><b>VERSION</b></h4><pre>
       This document describes version 0.632 of File::Flock::Retry (from Perl distribution File-Flock-Retry),
       released on 2021-08-10.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use File::Flock::Retry;

        # try to acquire exclusive lock. if fail to acquire lock within 60s, die.
        my $lock = File::Flock::Retry-&gt;lock($file);

        # explicitly unlock
        $lock-&gt;release;

        # automatically unlock if object is DESTROY-ed.
        undef $lock;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is yet another flock module. It is a more lightweight alternative to File::Flock with some other
       differences:

       •   OO interface only

       •   Autoretry (by default for 60s) when trying to acquire lock

           I prefer this approach to blocking/waiting indefinitely or failing immediately.

</pre><h4><b>METHODS</b></h4><pre>
   <b>lock</b>
       Usage:

        $lock = File::Flock::Retry-&gt;lock($path, \%opts)

       Attempt  to  acquire  an exclusive lock on $path. By default, $path will be created if not already exists
       (see "mode"). If $path is already locked by another process, will retry every  second  for  a  number  of
       seconds (by default 60). Will die if failed to acquire lock after all retries.

       Will automatically unlock if $lock goes out of scope. Upon unlock, will remove $path if it is still empty
       (zero-sized).

       Available options:

       •   mode

           Integer. Default: O_CREAT | O_RDWR.

           File  open mode, to be passed to Perl's "sysopen()". For example, if you want to avoid race condition
           between creating and locking the file, you might want to use "O_CREAT | O_EXCL | O_RDWR" to fail when
           the file already  exists.  Note  that  the  constants  are  available  after  you  do  a  "use  Fcntl
           ':DEFAULT';".

       •   retries

           Integer. Default: 60.

           Number of retries (equals number of seconds, since retry is done every second).

       •   shared

           Boolean. Default: 0.

           By  default,  an  exclusive  lock  (LOCK_EX)  is attempted. However, if this option is set to true, a
           shared lock (LOCK_SH) is attempted.

   <b>unlock</b>
       Usage:

        $lock-&gt;unlock

       Unlock. will remove lock file if it is still empty.

   <b>release</b>
       Usage:

        $lock-&gt;release

       Synonym for "unlock".

   <b>handle</b>
       Usage:

        my $fh = $lock-&gt;handle;

       Return the file handle.

</pre><h4><b>HOMEPAGE</b></h4><pre>
       Please visit the project's homepage at &lt;https://metacpan.org/release/File-Flock-Retry&gt;.

</pre><h4><b>SOURCE</b></h4><pre>
       Source repository is at &lt;https://github.com/perlancar/perl-File-Flock-Retry&gt;.

</pre><h4><b>BUGS</b></h4><pre>
       Please    report    any    bugs     or     feature     requests     on     the     bugtracker     website
       &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=File-Flock-Retry&gt;

       When  submitting  a  bug  or request, please include a test-file or a patch to an existing test-file that
       illustrates the bug or desired feature.

</pre><h4><b>CAVEATS</b></h4><pre>
       Not yet tested on Windows. Some filesystems do not support inode?

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       File::Flock, a bit too heavy in terms of dependencies and startup overhead, for my taste. It  depends  on
       things like File::Slurp and Data::Structure::Util (which loads Digest::MD5, Storable, among others).

       File::Flock::Tiny  which  is also tiny, but does not have the autoremove and autoretry capability which I
       want. See also: &lt;https://github.com/trinitum/perl-File-Flock-Tiny/issues/1&gt;

       <b>flock()</b> Perl function.

       An alternative to <b>flock()</b> is just using <b>sysopen()</b> with O_CREAT|O_EXCL mode to create lock files. This  is
       supported on more filesystems (particularly network filesystems which lack <b>flock()</b>).

</pre><h4><b>AUTHOR</b></h4><pre>
       perlancar &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2021, 2019, 2017, 2015, 2014 by perlancar &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.36.0                                       2022-10-13                            <u>File::Flock::<a href="../man3pm/Retry.3pm.html">Retry</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>