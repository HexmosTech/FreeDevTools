<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBD::LDAP - Perl extension for DBI, providing an SQL/Perl DBI interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdbd-ldap-perl">libdbd-ldap-perl_0.20-1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
            DBD::LDAP - Perl extension for DBI, providing an SQL/Perl DBI interface
            to Ldap databases.  LDAP stands for the "Lightweight Directory Access
            Protocol".  For more information, see:  <a href="http://www.ogre.com/ldap/docs.html">http://www.ogre.com/ldap/docs.html</a>

</pre><h4><b>AUTHOR</b></h4><pre>
           This module is Copyright (C) 2000-2009 by

                       Jim Turner

               Email:  turnerjw784 .att. yahoo.com

           All rights reserved Without Prejudice.

           You may distribute this module under the same terms as Perl itself.

</pre><h4><b>PREREQUISITES</b></h4><pre>
               Convert::ANS1   (required by Net::LDAP)
               Net::LDAP
               DBI
               - an LDAP database to connect to.

</pre><h4><b>SYNOPSIS</b></h4><pre>
            use DBI;
            $dbh = DBI-&gt;connect("DBI:LDAP:ldapdb",'user','password')  #USER LOGIN.
                or die "Cannot connect as user: " . $DBI::errstr;

            $dbh = DBI-&gt;connect("DBI:LDAP:ldapdb")  #ANONYMOUS LOGIN (Read-only).
                or die "Cannot connect as guest (readonly): " . $DBI::errstr;

            $sth = $dbh-&gt;prepare("select * from people where (cn like 'Smith%')")
                or die "Cannot prepare: " . $dbh-&gt;errstr();
            $sth-&gt;execute() or die "Cannot execute: " . $sth-&gt;errstr();
                while ((@results) = $sth-&gt;fetchrow_array)
                {
                        print "--------------------------------------------------------\n";
                        ++$cnt;
                        while (@results)
                        {
                                print "------&gt;".join('|',split(/\0/, shift(@results)))."\n";
                        }
                }
            $sth-&gt;finish();
            $dbh-&gt;disconnect();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       DBD::LDAP is a DBI extension module adding an SQL database interface to standard LDAP databases to Perl's
       database-independent database interface.  You will need access to an existing LDAP database or set up
       your own using an LDAP server, ie. "OpenLDAP", see (<a href="http://www.openldap.org">http://www.openldap.org</a>).

       The main advantage of DBD::LDAP is the ability to query LDAP databases via standard SQL queries in leu of
       cryptic LDAP "filters".  LDAP is optimized for quick lookup of existing data, but DBD::LDAP does support
       entry inserts, updates, and deletes with commit/rollback via the standard SQL commands!

       LDAP databases are "heirarchical" in structure, whereas other DBD-supported databases are "relational"
       and there is no LDAP-equivalent to SQL "tables", so DBD::LDAP maps a "table" interface over the LDAP
       "tree" via a configuration file you must set up.  Each "table" is mapped to a common "base DN".  For
       example, consider a typical LDAP database of employees within different departments within a company.
       You might have a "company" names "Acme" and the root "dn" of "dc=Acme, dc=com" (Acme.com).  Below the
       company level, are divisions, ie. "Widgets", and "Blivets".  Each division would have an entry with a
       "dn" of "ou=Widgets, dc=Acme, dc=com".  Employees within each division could have a "dn" of "cn=John Doe,
       ou=Widgets, dc=Acme, dc=com".  With DBD::LDAP, we could create tables to access these different levels,
       ie. "top", which would have a "DN" of "dc=Acme, dc=com", "WidgetDivision" for "dc=Acme, dc=com".  Tables
       can also be constained by additional attribute specifications (filters), ie constraining by
       "objectclass", ie.  "(objectclass=person)".  Then, doing a "select * from WidgetDivision" would display
       all "person"s with a "dn" containing ""ou=Widgets, dc=Acme, dc=com".

</pre><h4><b>INSTALLATION</b></h4><pre>
           Installing this module (and the prerequisites from above) is quite
           simple. You just fetch the archive, extract it with

               gzip -cd DBD-LDAP-####.tar.gz | tar xf -


                       -or-
                       tar -xzvf DBD-LDAP-####.tar.gz

           (this is for Unix users, Windows users would prefer WinZip or something
           similar) and then enter the following:

               cd DBD-LDAP-#.###
               perl Makefile.PL
               make
               make test

           If any tests fail, let me know. Otherwise go on with

               make install

           Note that you almost definitely need root or administrator permissions.
           If you don't have them, read the ExtUtils::MakeMaker man page for
           details on installing in your own directories.

</pre><h4><b>GETTING</b> <b>STARTED:</b></h4><pre>
               1) Create a "database", ie. "foo" by creating a text file "foo.ldb".  The
               general format of this file is:

       ---------------------------------------------------------- hostname[;port][:[root-dn][:[loginrule]]]
       tablename1:[basedn]:[basefilter]:dnattrs:[visableattrs]:[insertattrs]: \\ [ldap_options]
       tablename2:[basedn]:[basefilter]:dnattrs:[visableattrs]:[insertattrs]: \\ [ldap_options] ...
       ----------------------------------------------------------

               &lt;hostname&gt;              represents the ldap server host name.
               &lt;port&gt;                  represents the server's port, default is 389.
               &lt;root-dn&gt;                       if specified, is appended to the end of each tablename's
                                       base-dn.
               &lt;loginrule&gt;     if specified, converts single word "usernames" to the
                                       appropriate DN, ie:

                               "cn=*,&lt;ROOT&gt;" would convert user name "foo" to "cn=foo, " and
                               append the "&lt;root-dn&gt;" onto that.  The asterisk is converted to
                               the user-name specified in the "connect" method.  If not specified,
                               the username specified in the "connect" method must be a full DN.
                               If the "&lt;root-dn&gt;" is not specified, then the "&lt;loginrule&gt;" would
                               need to be a full DN.

               tablename       -       represents the name to be used in SQL statements for a given
                               set of entries which make up a virtual "table".
               basedn - if specified, is appended to the "&lt;root-dn&gt;" to make up the
                               common base DN for all entries in this table.  If "&lt;root-dn&gt;" is
                               not specified, then a full DN must be specified; otherwise, the
                               default is the root-dn.
               basefilter      - if specified, specifies a filter to be used if no "where"-
                               clause is specified in SQL queries.  If a "where"-clause is
                               specified, the resulting filter is "and"-ed with this one.  The
                               default is "(objectclass=*)".
               dnattrs - specifies which attributes that values for which are to be
                               appended to the left of the basedn to create DNs for new entries
                               being inserted into the table.
               visableattrs - if specified, one or more attributes separated by commas
                               which will be sought when the SQL statement does not specify
                               attributes, ie. "select * from tablename".  If not specified, the
                               attributes of the first matching entry are returned and used for
                               all entries matching a given query.
               insertattrs - if specified, one or more attribute/value combinations to be
                               added to any new entry inserted into the table, usually needed for
                               objectclass values.  The attributes and values usually correspond
                               to those specivied in the "&lt;basefilter&gt;".  The general format is:
                               attr1=value1[|value2...],attr2=value1...,...
                               These attributes and values will be joined with any user-specified
                               values for these attributes.
               ldap_options - if specified, can be any one or more of the following:

                       ldap_sizelimit - Limit the number of entries fetch by a query to this
                                       number (0 = no limit) - default:  0.
                       ldap_timelimit - Limit the search to this number of seconds per query.
                                       (0 = no limit) - default:  0.
                       ldap_scope - specify the "scope" of the search.  Values are:  "base",
                                       "one", and "sub", see Net::LDAP docs.  Default is "one",
                                       meaning the set of records one level below the basedn.  "base"
                                       means search only the basedn, and "sub" means the union
                                       of entries at the "base" level and "one" level below.
                       ldap_inseparator - specify the separator character/string to be used
                                       in queries to separate multiple values being specified for
                                       a given attribute.  Default is "|".
                       ldap_outseparator - specify the separator character/string to be used
                                       in queryies to separate multiple values displayed as a result
                                       of a query.  Default is "|".
                       ldap_firstonly - only display the 1st value fetched for each attribute
                                       per entry.  This makes "ldap_outseparator" unnecessary.

               2) write your script to use DBI, ie:

                       #!<a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?perl">/usr/bin/perl</a>
                       use DBI;

                       $dbh = DBI-&gt;connect('DBD:LDAP:mydb','me','mypassword') ||
                                       die "Could not connect (".$DBI-&gt;err.':'.$DBI-&gt;errstr.")!";
                       ...
                       #CREATE A TABLE, INSERT SOME RECORDS, HAVE SOME FUN!

               3) get your application working.

</pre><h4><b>INSERTING,</b> <b>FETCHING</b> <b>AND</b> <b>MODIFYING</b> <b>DATA</b></h4><pre>
               1st, we'll create a database called "ldapdb" with the tables previously
               mentioned in the example in the DESCRIPTION section:

       ----------------- file "ldapdb.ldb" ---------------- ldapserver:dc=Acme, dc=com:cn=*,&lt;ROOT&gt; top:::dc
       WidgetDivision:ou=Widgets, :&amp;(objectclass=top)(objectclass=person): \\
       cn:cn,sn,ou,title,telephonenumber,description,objectclass,dn: \\
       objectclass=top|person|organizationalPerson:ldap_outseparator =&gt; ":"
       ----------------------------------------------------

           The following examples insert some data in a table and fetch it back:
           First all data in the string:

               $dbh-&gt;do(&lt;&lt;END_SQL);
               INSERT INTO top (ou, cn, objectclass)
               VALUES ('Widgets', 'WidgetDivision', 'top|organizationalUnit')
       END_SQL

           Next an example using parameters:

               $dbh-&gt;do("INSERT INTO WidgetDivision (cn,sn,title,telephonenumber) VALUES (?, ?, ?, ?)",
               'John Doe','DoeJ','Manager','123-1111');
       END_SQL
               $dbh-&gt;commit();

               NOTE:  Unlike most other DBD modules which support transactions, changes
                       made do NOT show up until the "commit" function is called, unless
                       "AutoCommit" is set.  This is due to the fact that fetches are done
                       from the LDAP server and changes do not take effect there until the
                       Net::LDAP "update" function is called, which is called by "commit".

               NOTE: The "dn" field is generated automatically from the base "dn" and the
                       dn component fields specified by "dnattrs", If you try to insert a
                       value directly into it, it will be ignored.  Also, if not specified,
                       any attribute/value combinations specified in the "insertattrs"
                       option will be added automatically.

           To retrieve data, you can use the following:

               my($query) = "SELECT * FROM WidgetDivision WHERE cn like 'John%' ORDER BY cn";
               my($sth) = $dbh-&gt;prepare($query);
               $sth-&gt;execute();
               while (my $entry = $sth-&gt;fetchrow_hashref) {
                   print("Found result record: cn = ", $entry-&gt;{'cn'},
                         ", phone = ", $row-&gt;{'telephonenumber'});
               }
               $sth-&gt;finish();

               The SQL "SELECT" statement above (combined with the table information
               in the "ldapdb.ldb" database file would generate and execute the following
               equivalent LDAP Search:

                       base =&gt; 'ou=Widgets, dc=Acme, dc=com',
                       filter =&gt; '(&amp;(&amp;(objectclass=top)(objectclass=person))(cn=John*))',
                       scope =&gt; 'one',
                       attrs =&gt; 'cn,sn,ou,title,telephonenumber,description,objectclass,dn'

           See the <a href="../man3/DBI.3.html">DBI</a>(3) manpage for details on these methods. See the

           Data rows are modified with the UPDATE statement:

               $dbh-&gt;do("UPDATE WidgetDivision SET description = 'Outstanding Employee' WHERE cn = 'John Doe'");

               NOTE:  You can NOT change the "dn" field directly - direct changes will be
                       ignored.  You change the "rdn" component of the "dn" field by changing
                       the value of the other field(s) which are appended to the base "dn".
                       Also, if not specified, any attribute/value combinations specified in
                       the "insertattrs" option will be added automatically.

           Likewise you use the DELETE statement for removing entries:

               $dbh-&gt;do("DELETE FROM WidgetDivision WHERE description = 'Outstanding Employee'");

</pre><h4><b>METADATA</b></h4><pre>
           The following attributes are handled by DBI itself and not by DBD::LDAP,
           thus they should all work as expected.

               PrintError
               RaiseError
               Warn

           The following DBI attributes are handled by DBD::LDAP:

           AutoCommit
               Works

           NUM_OF_FIELDS
               Valid after '$sth-&gt;execute'

           NUM_OF_PARAMS
               Valid after '$sth-&gt;prepare'

           NAME
               Valid after '$sth-&gt;execute'; undef for Non-Select statements.

           NULLABLE
               Not really working. Always returns an array ref of one's, as
               DBD::LDAP always allows NULL (handled as an empty string).
               Valid after `$sth-&gt;execute'.

           LongReadLen
                       Should work

           LongTruncOk
                       Should work

           These attributes and methods are not supported:

               bind_param_inout
               CursorName

           In addition to the DBI attributes, you can use the following dbh
           attributes.  These attributes are read-only after "connect".

               ldap_dbuser
                       Current database user.

               ldap_HOME
                       Environment variable specifying a path to search for LDAP
                       databases (*.sdb) files.

</pre><h4><b>DRIVER</b> <b>PRIVATE</b> <b>METHODS</b></h4><pre>
           DBI-&gt;data_sources()
               The `data_sources' method returns a list of "databases" (.ldb files)
               found in the current directory and, if specified, the path in
               the ldap_HOME environment variable.

           $dbh-&gt;tables()
               This method returns a list of table names specified in the current
               database.
               Example:

                   my($dbh) = DBI-&gt;connect("DBI:LDAP:mydatabase",'me','mypswd');
                   my(@list) = $dbh-&gt;func('tables');

</pre><h4><b>OTHER</b> <b>SUPPORTING</b> <b>UTILITIES</b></h4><pre>
</pre><h4><b>RESTRICTIONS</b></h4><pre>
               DBD::LDAP currently treats all data as strings and all fields as
               <a href="../man255/VARCHAR.255.html">VARCHAR</a>(255).

               Currently, you must define tables manually in the "&lt;database&gt;.ldb" file
               using your favorite text editor.  I hope to add support for the SQL
               "Create Table", "Alter Table", and "Drop Table" functions to handle this
               eventually.

</pre><h4><b>TODO</b></h4><pre>
               "Create Table", "Alter Table", and "Drop Table" SQL functions for
               creating, altering, and deleting the tables defined in the
               "&lt;database&gt;.ldb" file.

               Some kind of datatype support, ie. numeric (for sorting), CHAR for padding,
               Long/Blob - for &gt;255 chars per field, etc.

</pre><h4><b>KNOWN</b> <b>BUGS</b></h4><pre>
               none - (yet).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
               Net::<a href="../man3/LDAP.3.html">LDAP</a>(3), <a href="../man3/DBI.3.html">DBI</a>(3), <a href="../man1/perl.1.html">perl</a>(1)

perl v5.32.0                                       2021-01-03                                     <u>DBD::<a href="../man3pm/LDAP.3pm.html">LDAP</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>