<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imager::Test - common functions used in testing Imager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libimager-perl">libimager-perl_1.027+dfsg-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Imager::Test - common functions used in testing Imager

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Imager::Test 'diff_text_with_nul';
         diff_text_with_nul($test_name, $text1, $text2, @string_options);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is a repository of functions used in testing Imager.

       Some functions will only be useful in testing Imager itself, while others should be useful in testing
       modules that use Imager.

       No functions are exported by default.

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>Test</b> <b>functions</b>
       is_color1($color, $grey, $comment)
           Tests if the first channel of $color matches $grey.

       is_color3($color, $red, $green, $blue, $comment)
           Tests if $color matches the given ($red, $green, $blue)

       is_color4($color, $red, $green, $blue, $alpha, $comment)
           Tests if $color matches the given ($red, $green, $blue, $alpha)

       is_fcolor1($fcolor, $grey, $comment)
       is_fcolor1($fcolor, $grey, $epsilon, $comment)
           Tests if $fcolor's first channel is within $epsilon of ($grey).  For the first form $epsilon is taken
           as 0.001.

       is_fcolor3($fcolor, $red, $green, $blue, $comment)
       is_fcolor3($fcolor, $red, $green, $blue, $epsilon, $comment)
           Tests  if  $fcolor's  channels  are  within  $epsilon  of  ($red, $green, $blue).  For the first form
           $epsilon is taken as 0.001.

       is_fcolor4($fcolor, $red, $green, $blue, $alpha, $comment)
       is_fcolor4($fcolor, $red, $green, $blue, $alpha, $epsilon, $comment)
           Tests if $fcolor's channels are within $epsilon of ($red, $green, $blue, $alpha).  For the first form
           $epsilon is taken as 0.001.

       is_image($im1, $im2, $comment)
           Tests if the 2 images have the same content.  Both images must  be  defined,  have  the  same  width,
           height, channels and the same color in each pixel.  The color comparison is done at 8-bits per pixel.
           The  color representation such as direct vs paletted, bits per sample are not checked.  Equivalent to
           is_image_similar($im1, $im2, 0, $comment).

       is_imaged($im, $im2, $comment)
       is_imaged($im, $im2, $epsilon, $comment)
           Tests if the two images have the same content at the double/sample level.  $epsilon defaults  to  the
           platform DBL_EPSILON multiplied by four.

       is_image_similar($im1, $im2, $maxdiff, $comment)
           Tests if the 2 images have similar content.  Both images must be defined, have the same width, height
           and  channels.   The  sum of the squares of the differences of each sample are calculated and must be
           less than or equal to <u>$maxdiff</u> for the test to pass.  The color comparison  is  done  at  8-bits  per
           pixel.  The color representation such as direct vs paletted, bits per sample are not checked.

       isnt_image($im1, $im2, $comment)
           Tests  that the two images are different.  For regressions tests where something (like text output of
           "0") produced no change, but should have produced a change.

       test_colorf_gpix($im, $x, $y, $expected, $epsilon, $comment)
           Retrieves the pixel ($x,$y) from the low-level image $im and compares it to the floating point  color
           $expected, with a tolerance of epsilon.

       test_color_gpix($im, $x, $y, $expected, $comment)
           Retrieves  the pixel ($x,$y) from the low-level image $im and compares it to the floating point color
           $expected.

       test_colorf_glin($im, $x, $y, $pels, $comment)
           Retrieves the floating point pixels ($x, $y)-[$x+@$pels,  $y]  from  the  low  level  image  $im  and
           compares them against @$pels.

       is_color_close3($color, $red, $green, $blue, $tolerance, $comment)
           Tests if $color's first three channels are within $tolerance of ($red, $green, $blue).

   <b>Test</b> <b>suite</b> <b>functions</b>
       Functions   that  perform  one  or  more  tests,  typically  used  to  test  various  parts  of  Imager's
       implementation.

       image_bounds_checks($im)
           Attempts to write to various pixel positions outside the edge of the image to ensure that it fails in
           those locations.

           Any new image type should pass these tests.  Does 16 separate tests.

       mask_tests($im, $epsilon)
           Perform a standard set of mask tests on the OO image $im.  Does 24 separate tests.

       diff_text_with_nul($test_name, $text1, $text2, @options)
           Creates 2 test images and writes $text1 to the first image and $text2 to the second  image  with  the
           <b>string()</b> method.  Each call adds 3 "ok"/"not ok" to the output of the test script.

           Extra options that should be supplied include the font and either a color or channel parameter.

           This was explicitly created for regression tests on #21770.

       std_font_tests({ font =&gt; $font })
           Perform standard font interface tests.

       <b>std_font_test_count()</b>
           The number of tests performed by <b>std_font_tests()</b>.

   <b>Helper</b> <b>functions</b>
       <b>test_image_raw()</b>
           Returns a 150x150x3 Imager::ImgRaw test image.

       <b>test_image()</b>
           Returns a 150x150x3 8-bit/sample OO test image. Name: "basic".

       <b>test_image_16()</b>
           Returns a 150x150x3 16-bit/sample OO test image. Name: "basic16"

       <b>test_image_double()</b>
           Returns a 150x150x3 double/sample OO test image. Name: "basic_double".

       <b>test_image_gray()</b>
           Returns a 150x150 single channel OO test image. Name: "gray".

       <b>test_image_gray_16()</b>
           Returns a 150x150 16-bit/sample single channel OO test image. Name: "gray16".

       <b>test_image_mono()</b>
           Returns a 150x150 bilevel image that passes the <b>is_bilevel()</b> test.  Name: "mono".

       test_image_named($name)
           Return one of the other test images above based on name.

       color_cmp($c1, $c2)
           Performs an ordering of 3-channel colors (like &lt;=&gt;).

       colorf_cmp($c1, $c2)
           Performs an ordering of 3-channel floating point colors (like &lt;=&gt;).

</pre><h4><b>AUTHOR</b></h4><pre>
       Tony Cook &lt;<a href="mailto:tony@develop-help.com">tony@develop-help.com</a>&gt;

perl v5.40.1                                       2025-03-16                                  <u>Imager::<a href="../man3pm/Test.3pm.html">Test</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>