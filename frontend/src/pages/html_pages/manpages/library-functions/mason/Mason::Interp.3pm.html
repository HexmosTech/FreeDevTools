<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mason::Interp - Mason Interpreter</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmason-perl">libmason-perl_2.24-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mason::Interp - Mason Interpreter

</pre><h4><b>SYNOPSIS</b></h4><pre>
           my $interp = Mason-&gt;new(
               comp_root =&gt; '/path/to/comps',
               data_dir  =&gt; '/path/to/data',
               ...
           );
           my $output = $interp-&gt;run( '/request/path', foo =&gt; 5 )-&gt;output();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Interp is the central Mason object, returned from "Mason-&gt;new". It is responsible for creating new
       requests, compiling components, and maintaining the cache of loaded components.

</pre><h4><b>PARAMETERS</b> <b>TO</b> <b>THE</b> <b>new()</b> <b>CONSTRUCTOR</b></h4><pre>
       allow_globals (varnames)
           List  of  one  or  more global variable names that will be available in all components, like $m is by
           default.

               allow_globals =&gt; [qw($dbh)]

           As in any programming environment, globals should be created sparingly (if  at  all)  and  only  when
           other    mechanisms    (parameter    passing,    attributes,    singletons)    will    not   suffice.
           Catalyst::View::Mason2, for example, creates a $c global set to the context object in each request.

           Set the values of globals with set_global.

       autobase_names
           Array reference of autobase filenames to check in order when determining  a  component's  superclass.
           Default is "["Base.mp", "Base.mc"]".

       autoextend_request_path
           Whether  to  automatically  add  the top level extensions (by default ".mp" and ".mc") to the request
           path when searching for a matching page component. Defaults to true.

       class_header
           Perl code to be added at the top of the compiled class for every component, e.g. to bring  in  common
           features or import common methods. Default is the empty string.

               # Add to the top of every component class:
               #   use Modern::Perl;
               #   use JSON::XS qw(encode_json decode_json);
               #
               my $mason = Mason-&gt;new(
                   ...
                   class_header =&gt; qq(
                       use Modern::Perl;
                       use JSON::XS qw(encode_json decode_json);
                   ),
               );

           This  is  used  by Mason::Compilation::output_class_header.  For more advanced usage you can override
           that method in a subclass or plugin.

       comp_root
           Required. The component root marks the top of your component  hierarchy  and  defines  how  component
           paths   are   translated   into   real   file   paths.   For  example,  if  your  component  root  is
           <u>/usr/local/httpd/docs</u>,  a   component   path   of   <u>/products/sales.mc</u>   translates   to   the   file
           <u>/usr/local/httpd/docs/products/sales.mc</u>.

           This  parameter  may  be  either  a  single  path  or  an array reference of paths. If it is an array
           reference, the paths will be searched in the provided order whenever a component  path  is  resolved,
           much like Perl's @INC.

       component_class_prefix
           Prefix  to use in generated component classnames. Defaults to 'MC' plus the interpreter's count, e.g.
           MC0. So a component '/foo/bar' would get a classname like 'MC0::foo::bar'.

       data_dir
           The data directory is a writable directory that Mason uses for various  features  and  optimizations:
           for example, component object files and data cache files.  Mason will create the directory on startup
           if necessary.

           Defaults  to a temporary directory that will be cleaned up at process end. This will hurt performance
           as Mason will have to recompile components on each run.

       dhandler_names
           Array reference of dhandler file names to check in order when resolving a top-level path. Default  is
           "["dhandler.mp", "dhandler.mc"]". An empty list disables this feature.

       index_names
           Array  reference  of  index  file names to check in order when resolving a top-level path. Default is
           "["index.mp", "index.mc"]". An empty list disables this feature.

       no_source_line_numbers
           Do not put in source line number comments when generating code.  Setting  this  to  true  will  cause
           error line numbers to reflect the real object file, rather than the source component.

       object_file_extension
           Extension to add to the end of object files. Default is ".mobj".

       plugins
           A list of plugins and/or plugin bundles:

               plugins =&gt; [
                 'OnePlugin',
                 'AnotherPlugin',
                 '+My::Mason::Plugin::AThirdPlugin',
                 '@APluginBundle',
                 '-DontLikeThisPlugin',
               ]);

           See Mason::Manual::Plugins.

       out_method
           Default out_method passed to each new request.

       pure_perl_extensions
           A  listref of file extensions of components to be considered as pure perl (see Pure Perl Components).
           Default is "['.mp']". If an empty list is specified, then no components will be considered pure perl.

       static_source
           True or false, default is false. When false, Mason checks the timestamp of the component source  file
           each  time  the  component  is used to see if it has changed.  This provides the instant feedback for
           source changes that is expected for development.  However  it  does  entail  a  file  stat  for  each
           component executed.

           When  true,  Mason  assumes that the component source tree is unchanging: it will not check component
           source files to determine if the memory cache or object file has expired.  This can  save  many  file
           stats  per  request.  However, in order to get Mason to recognize a component source change, you must
           touch the static_source_touch_file.

           We recommend turning this mode on in your production sites if possible,  if  performance  is  of  any
           concern.

       static_source_touch_file
           Specifies  a  filename  that  Mason  will  check  once  at  the  beginning  of  every request when in
           static_source mode. When the file timestamp changes (indicating that a component has changed),  Mason
           will clear its in-memory component cache and recheck existing object files.

       top_level_extensions
           A  listref  of  file  extensions of components to be considered "top level", accessible directly from
           "$interp-&gt;run" or a web request. Default is "['.mp', '.mc']". If an empty  list  is  specified,  then
           there will be <u>no</u> restriction; that is, <u>all</u> components will be considered top level.

</pre><h4><b>CUSTOM</b> <b>MASON</b> <b>CLASSES</b></h4><pre>
       These parameters specify alternate classes to use instead of the default Mason:: classes.

       For example, to use your own Compilation base class:

           my $interp = Mason-&gt;new(base_compilation_class =&gt; 'MyApp::Mason::Compilation', ...);

       Relevant plugins, if any, will applied to this class to create a final class, which you can get with

           $interp-&gt;compilation_class

       base_code_cache_class
           Specify alternate to Mason::CodeCache

       base_compilation_class
           Specify alternate to Mason::Compilation

       base_component_class
           Specify alternate to Mason::Component

       base_component_moose_class
           Specify alternate to Mason::Component::Moose

       base_component_class_meta_class
           Specify alternate to Mason::Component::ClassMeta

       base_component_import_class
           Specify alternate to Mason::Component::Import

       base_request_class
           Specify alternate to Mason::Request

       base_result_class
           Specify alternate to Mason::Result

</pre><h4><b>PUBLIC</b> <b>METHODS</b></h4><pre>
       all_paths ([dir_path])
           Returns  a  list  of  distinct component paths under <u>dir_path</u>, which defaults to '/' if not provided.
           For example,

              $interp-&gt;all_paths('/foo/bar')
                 =&gt; ('/foo/bar/baz.mc', '/foo/bar/blargh.mc')

           Note that these are all component paths, not filenames, and all component roots are searched if there
           are multiple ones.

       comp_exists (path)
           Returns a boolean indicating whether a component exists for the absolute component <u>path</u>.

       count
           Returns the number of this interpreter, a monotonically increasing integer for the  process  starting
           at 0.

       flush_code_cache
           Empties the component cache and removes all component classes.

       glob_paths (pattern)
           Returns a list of all component paths matching the glob <u>pattern</u>. e.g.

              $interp-&gt;glob_paths('/foo/b*.mc')
                 =&gt; ('/foo/bar.mc', '/foo/baz.mc')

           Note that these are all component paths, not filenames, and all component roots are searched if there
           are multiple ones.

       load (path)
           Returns  the  component  object corresponding to an absolute component <u>path</u>, or undef if none exists.
           Dies with an error if the component fails to load because of a syntax error.

       object_dir
           Returns the directory containing component object files.

       run ([request params], path, args...)
           Creates a new Mason::Request object for  the  given  <u>path</u>  and  <u>args</u>,  and  executes  it.  Returns  a
           Mason::Result object, which is generally accessed to get the output. e.g.

               my $output = $interp-&gt;run('/foo/bar', baz =&gt; 5)-&gt;output;

           The  first  argument  may  optionally  be  a  hashref  of request parameters, which are passed to the
           Mason::Request constructor. e.g. this tells the request to output to standard output:

               $interp-&gt;run({out_method =&gt; sub { print $_[0] }}, '/foo/bar', baz =&gt; 5);

       set_global (varname, value)
           Set the global <u>varname</u> to <u>value</u>. This will be visible in all components loaded by  this  interpreter.
           The variables must be on the allow_globals list.

               $interp-&gt;set_global('$scalar', 5);
               $interp-&gt;set_global('$scalar2', $some_object);

           See also set_global.

</pre><h4><b>MODIFIABLE</b> <b>METHODS</b></h4><pre>
       These methods are not intended to be called externally, but may be useful to modify with method modifiers
       in plugins and subclasses. Their APIs will be kept as stable as possible.

       is_pure_perl_comp_path ($path)
           Determines whether <u>$path</u> is a pure Perl component - by default, uses pure_perl_extensions.

       is_top_level_comp_path ($path)
           Determines whether <u>$path</u> is a valid top-level component - by default, uses top_level_extensions.

       modify_loaded_class ( $compc )
           An  opportunity  to modify loaded component class <u>$compc</u> (e.g. add additional methods or apply roles)
           before it is made immutable.

       write_object_file ($object_file, $object_contents)
           Write compiled  component  <u>$object_contents</u>  to  <u>$object_file</u>.  This  is  an  opportunity  to  modify
           <u>$object_contents</u> before it is written, or <u>$object_file</u> after it is written.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mason

</pre><h4><b>AUTHOR</b></h4><pre>
       Jonathan Swartz &lt;<a href="mailto:swartz@pobox.com">swartz@pobox.com</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2012 by Jonathan Swartz.

       This  is  free  software;  you  can  redistribute  it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.34.0                                       2022-05-27                                 <u>Mason::<a href="../man3pm/Interp.3pm.html">Interp</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>