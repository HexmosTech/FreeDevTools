<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ftp - Client-side tcl implementation of the ftp protocol</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ftp - Client-side tcl implementation of the ftp protocol

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>ftp</b> <b>?2.4.14?</b>

       <b>::ftp::Open</b> <u>server</u> <u>user</u> <u>passwd</u> ?<u>options</u>?

       <b>::ftp::Close</b> <u>handle</u>

       <b>::ftp::Cd</b> <u>handle</u> <u>directory</u>

       <b>::ftp::Pwd</b> <u>handle</u>

       <b>::ftp::Type</b> <u>handle</u> ?<b>ascii|binary|tenex</b>?

       <b>::ftp::List</b> <u>handle</u> ?<u>pattern</u>?

       <b>::ftp::NList</b> <u>handle</u> ?<u>directory</u>?

       <b>::ftp::FileSize</b> <u>handle</u> <u>file</u>

       <b>::ftp::ModTime</b> <u>handle</u> <u>file</u>

       <b>::ftp::Delete</b> <u>handle</u> <u>file</u>

       <b>::ftp::Rename</b> <u>handle</u> <u>from</u> <u>to</u>

       <b>::ftp::Put</b> <u>handle</u> (<u>local</u> | -data <u>data</u> | -channel <u>chan</u>) ?<u>remote</u>?

       <b>::ftp::Append</b> <u>handle</u> (<u>local</u> | -data <u>data</u> | -channel <u>chan</u>) ?<u>remote</u>?

       <b>::ftp::Get</b> <u>handle</u> <u>remote</u> ?(<u>local</u> | -variable <u>varname</u> | -channel <u>chan</u>)?

       <b>::ftp::Reget</b> <u>handle</u> <u>remote</u> ?<u>local</u>? ?<u>from</u>? ?<u>to</u>?

       <b>::ftp::Newer</b> <u>handle</u> <u>remote</u> ?<u>local</u>?

       <b>::ftp::MkDir</b> <u>handle</u> <u>directory</u>

       <b>::ftp::RmDir</b> <u>handle</u> <u>directory</u>

       <b>::ftp::Quote</b> <u>handle</u> <u>arg1</u> <u>arg2</u> <u>...</u>

       <b>::ftp::DisplayMsg</b> <u>handle</u> <u>msg</u> ?<u>state</u>?

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  ftp  package  provides  the client side of the ftp protocol as specified in RFC 959 (<u><a href="http://www.rfc">http://www.rfc</a>-</u>
       <u>editor.org/rfc/rfc959.txt</u>).  The package implements both active (default) and passive ftp sessions.

       A new ftp session is started with the <b>::ftp::Open</b> command.  To  shutdown  an  existing  ftp  session  use
       <b>::ftp::Close</b>.  All  other  commands are restricted to usage in an an open ftp session. They will generate
       errors if they are used out of context.   The  ftp  package  includes  file  and  directory  manipulating
       commands  for  remote sites. To perform the same operations on the local site use commands built into the
       core, like <b>cd</b> or <b>file</b>.

       The output of the package is controlled by two state variables, <b>::ftp::VERBOSE</b> and <b>::ftp::DEBUG</b>.  Setting
       <b>::ftp::VERBOSE</b> to "1" forces the package to show all responses from a remote server. The default value is
       "0".  Setting  <b>::ftp::DEBUG</b>  to  "1"  enables  debugging and forces the package to show all return codes,
       states, state changes and "real" ftp commands. The default value is "0".

       The command <b>::ftp::DisplayMsg</b> is used to show the different messages from the ftp session. The setting of
       <b>::ftp::VERBOSE</b> determines if this command is called or not. The current  implementation  of  the  command
       uses  the  <b>log</b>  package  of  tcllib to write the messages to their final destination. This means that the
       behaviour of <b>::ftp::DisplayMsg</b> can be customized without changing its implementation.  For  more  radical
       changes  overwriting  its  implementation  by  the application is of course still possible. Note that the
       default implementation honors the option <b>-output</b> to <b>::ftp::Open</b> for a session specific log command.

       <u>Caution</u>: The default implementation logs error messages like all other messages.  If  this  behaviour  is
       changed  to  throwing an error instead all commands in the API will change their behaviour too. In such a
       case they will not return a failure code as described below but pass the thrown error to their caller.

</pre><h4><b>API</b></h4><pre>
       <b>::ftp::Open</b> <u>server</u> <u>user</u> <u>passwd</u> ?<u>options</u>?
              This command is used to start a FTP session by  establishing  a  control  connection  to  the  FTP
              server. The defaults are used for any option not specified by the caller.

              The  command  takes a host name <u>server</u>, a user name <u>user</u> and a password <u>password</u> as its parameters
              and returns a session handle that is an integer number greater  than  or  equal  to  "0",  if  the
              connection  is  successfully established. Otherwise it returns "-1".  The <u>server</u> parameter must be
              the name or internet address (in dotted decimal notation) of the ftp server  to  connect  to.  The
              <u>user</u>  and  <u>passwd</u>  parameters  must  contain  a valid user name and password to complete the login
              process.

              The options overwrite some default values or set special abilities:

              <b>-blocksize</b> <u>size</u>
                     The blocksize is used during data transfer. At most <u>size</u> bytes are transfered at once.  The
                     default  value  for  this option is 4096.  The package will evaluate the <b>-progress</b> <b>callback</b>
                     for the session after the transfer of each block.

              <b>-timeout</b> <u>seconds</u>
                     If <u>seconds</u> is non-zero, then <b>::ftp::Open</b> sets up a  timeout  which  will  occur  after  the
                     specified number of seconds. The default value is 600.

              <b>-port</b> <u>number</u>
                     The  port  <u>number</u>  specifies  an alternative remote port on the ftp server on which the ftp
                     service resides. Most ftp services listen for connection requests on the default  port  21.
                     Sometimes,  usually  for  security  reasons,  port  numbers  other than 21 are used for ftp
                     connections.

              <b>-mode</b> <u>mode</u>
                     The transfer <u>mode</u> option determines if a file transfer occurs in <b>active</b> or <b>passive</b> mode. In
                     passive mode the client will ask the ftp server to listen on a data port and wait  for  the
                     connection rather than to initiate the process by itself when a data transfer request comes
                     in. Passive mode is normally a requirement when accessing sites via a firewall. The default
                     mode is <b>active</b>.

              <b>-progress</b> <u>callback</u>
                     This  <u>callback</u>  is  evaluated  whenever  a  block  of  data  was transfered. See the option
                     <b>-blocksize</b> for how to specify the size of the transfered blocks.

                     When evaluating the <u>callback</u> one argument is appended to the callback script,  the  current
                     accumulated number of bytes transferred so far.

              <b>-command</b> <u>callback</u>
                     Specifying  this  option  places  the  connection  into  asynchronous mode. The <u>callback</u> is
                     evaluated after the completion of any operation. When an operation is  running  no  further
                     operations  must  be started until a callback has been received for the currently executing
                     operation.

                     When evaluating the <u>callback</u> several arguments are appended to the callback script,  namely
                     the  keyword  of  the operation that has completed and any additional arguments specific to
                     the operation.  If an error occurred during the execution of the operation the callback  is
                     given the keyword <b>error</b>.

              <b>-output</b> <u>callback</u>
                     This  option  has  no default. If it is set the default implementation of <b>::ftp::DisplayMsg</b>
                     will use its value as command prefix to log all internal messages. The callback  will  have
                     three  arguments  appended  to  it  before  evaluation,  the id of the session, the message
                     itself, and the connection state, in this order.

       <b>::ftp::Close</b> <u>handle</u>
              This command terminates the specified ftp session. If no file transfer is in progress, the  server
              will  close  the  control  connection  immediately. If a file transfer is in progress however, the
              control connection will remain open until the transfers completes. When that  happens  the  server
              will write the result response for the transfer to it and close the connection afterward.

       <b>::ftp::Cd</b> <u>handle</u> <u>directory</u>
              This  command  changes  the  current  working  directory  on  the ftp server to a specified target
              <u>directory</u>.  The command returns 1 if the current working directory was successfully changed to the
              specified directory or 0 if it fails.  The target directory can be

              •      a subdirectory of the current directory,

              •      Two dots, <b>..</b>  (as an indicator for the parent directory of the current directory)

              •      or a fully qualified path to a new working directory.

       <b>::ftp::Pwd</b> <u>handle</u>
              This command returns the complete path of the current working directory on the ftp server,  or  an
              empty string in case of an error.

       <b>::ftp::Type</b> <u>handle</u> ?<b>ascii|binary|tenex</b>?
              This command sets the ftp file transfer type to either <b>ascii</b>, <b>binary</b>, or <b>tenex</b>. The command always
              returns the currently set type. If called without type no change is made.

              Currently only <b>ascii</b> and <b>binary</b> types are supported. There is some early (alpha) support for Tenex
              mode.  The  type  <b>ascii</b>  is  normally  used  to convert text files into a format suitable for text
              editors on the platform of the destination machine. This mainly affects end-of-line  markers.  The
              type  <b>binary</b>  on  the  other  hand  allows  the  undisturbed  transfer  of non-text files, such as
              compressed files, images and executables.

       <b>::ftp::List</b> <u>handle</u> ?<u>pattern</u>?
              This command returns a human-readable list of files.  Wildcard expressions  such  as  "<u>*.tcl</u>"  are
              allowed.   If  <u>pattern</u>  refers  to  a  specific directory, then the contents of that directory are
              returned.  If the <u>pattern</u> is not a fully-qualified path name, the command lists  entries  relative
              to  the  current remote directory.  If no <u>pattern</u> is specified, the contents of the current remote
              directory is returned.

              The listing includes any system-dependent information that the  server  chooses  to  include.  For
              example most UNIX systems produce output from the command <b>ls</b> <b>-l</b>. The command returns the retrieved
              information  as  a  tcl  list  with  one  item per entry. Empty lines and UNIX's "total" lines are
              ignored and not included in the result as reported by this command.

              If the command fails an empty list is returned.

       <b>::ftp::NList</b> <u>handle</u> ?<u>directory</u>?
              This command has the same behavior as the <b>::ftp::List</b> command, except that it  only  retrieves  an
              abbreviated listing. This means only file names are returned in a sorted list.

       <b>::ftp::FileSize</b> <u>handle</u> <u>file</u>
              This  command  returns  the  size of the specified <u>file</u> on the ftp server. If the command fails an
              empty string is returned.

              <u>ATTENTION!</u> It will not work properly when in ascii mode and is not supported  by  all  ftp  server
              implementations.

       <b>::ftp::ModTime</b> <u>handle</u> <u>file</u>
              This command retrieves the time of the last modification of the <u>file</u> on the ftp server as a system
              dependent  integer  value  in  seconds  or  an empty string if an error occurred. Use the built-in
              command <b>clock</b> to convert the retrieves value into other formats.

       <b>::ftp::Delete</b> <u>handle</u> <u>file</u>
              This command deletes the specified <u>file</u> on the ftp server. The command returns 1 if the  specified
              file was successfully deleted or 0 if it failed.

       <b>::ftp::Rename</b> <u>handle</u> <u>from</u> <u>to</u>
              This command renames the file <u>from</u> in the current directory of the ftp server to the specified new
              file  name  <u>to</u>. This new file name must not be the same as any existing subdirectory or file name.
              The command returns 1 if the specified file was successfully renamed or 0 if it failed.

       <b>::ftp::Put</b> <u>handle</u> (<u>local</u> | -data <u>data</u> | -channel <u>chan</u>) ?<u>remote</u>?
              This command transfers a local file <u>local</u> to a remote file <u>remote</u> on the ftp server. If  the  file
              parameters  passed  to  the  command  do  not  fully qualified path names the command will use the
              current directory on local and remote host. If the remote file name  is  unspecified,  the  server
              will  use  the  name  of  the  local file as the name of the remote file. The command returns 1 to
              indicate a successful transfer and 0 in the case of a failure.

              If <b>-data</b> <u>data</u> is specified instead of a local file, the system will not transfer a file,  but  the
              <u>data</u> passed into it. In this case the name of the remote file has to be specified.

              If  <b>-channel</b>  <u>chan</u>  is specified instead of a local file, the system will not transfer a file, but
              read the contents of the channel <u>chan</u> and write this to the remote file. In this case the name  of
              the remote file has to be specified. After the transfer <u>chan</u> will be closed.

       <b>::ftp::Append</b> <u>handle</u> (<u>local</u> | -data <u>data</u> | -channel <u>chan</u>) ?<u>remote</u>?
              This  command behaves like <b>::ftp::Puts</b>, but appends the transfered information to the remote file.
              If the file did not exist on the server it will be created.

       <b>::ftp::Get</b> <u>handle</u> <u>remote</u> ?(<u>local</u> | -variable <u>varname</u> | -channel <u>chan</u>)?
              This command retrieves a remote file <u>remote</u> on the ftp server and stores  its  contents  into  the
              local  file <u>local</u>. If the file parameters passed to the command are not fully qualified path names
              the command will use the current directory on local and remote host. If the  local  file  name  is
              unspecified,  the  server  will use the name of the remote file as the name of the local file. The
              command returns 1 to indicate a successful transfer and 0 in the case of a  failure.  The  command
              will throw an error if the directory the file <u>local</u> is to be placed in does not exist.

              If  <b>-variable</b>  <u>varname</u>  is  specified,  the system will store the retrieved data into the variable
              <u>varname</u> instead of a file.

              If <b>-channel</b> <u>chan</u> is specified, the system will write the retrieved  data  into  the  channel  <u>chan</u>
              instead  of  a file. The system will <u>not</u> close <u>chan</u> after the transfer, this is the responsibility
              of the caller to <b>::ftp::Get</b>.

       <b>::ftp::Reget</b> <u>handle</u> <u>remote</u> ?<u>local</u>? ?<u>from</u>? ?<u>to</u>?
              This command behaves like <b>::ftp::Get</b>, except that if local file <u>local</u> exists and is  smaller  than
              remote  file  <u>remote</u>,  the local file is presumed to be a partially transferred copy of the remote
              file and the transfer is continued from the apparent point of failure.  The command will throw  an
              error  if  the  directory the file <u>local</u> is to be placed in does not exist. This command is useful
              when transferring very large files over networks that tend to drop connections.

              Specifying the additional byte offsets <u>from</u> and <u>to</u> will cause the command to change its  behaviour
              and  to  download  exactly the specified slice of the remote file. This mode is possible only if a
              local destination is explicitly provided. Omission of <u>to</u> leads to downloading till the end of  the
              file.

       <b>::ftp::Newer</b> <u>handle</u> <u>remote</u> ?<u>local</u>?
              This  command  behaves  like  <b>::ftp::Get</b>,  except  that  it  retrieves the remote file only if the
              modification time of the remote file is more recent than the file on the local system. If the file
              does not exist on the local system, the remote file is considered newer. The command will throw an
              error if the directory the file <u>local</u> is to be placed in does not exist.

       <b>::ftp::MkDir</b> <u>handle</u> <u>directory</u>
              This command creates the specified <u>directory</u> on the ftp server. If the specified path is  relative
              the  new  directory  will  be created as a subdirectory of the current working directory. Else the
              created directory will have the  specified  path  name.  The  command  returns  1  to  indicate  a
              successful creation of the directory and 0 in the case of a failure.

       <b>::ftp::RmDir</b> <u>handle</u> <u>directory</u>
              This  command  removes  the  specified directory on the ftp server. The remote directory has to be
              empty or the command will fail. The command returns 1 to indicate  a  successful  removal  of  the
              directory and 0 in the case of a failure.

       <b>::ftp::Quote</b> <u>handle</u> <u>arg1</u> <u>arg2</u> <u>...</u>
              This command is used to send an arbitrary ftp command to the server. It cannot be used to obtain a
              directory  listing  or  for  transferring files. It is included to allow an application to execute
              commands on the ftp server which are not  provided  by  this  package.   The  arguments  are  sent
              verbatim, i.e. as is, with no changes.

              In  contrast to the other commands in this package this command will not parse the response it got
              from the ftp server but return it verbatim to the caller.

       <b>::ftp::DisplayMsg</b> <u>handle</u> <u>msg</u> ?<u>state</u>?
              This command is used by the package itself to show the different messages from the  ftp  sessions.
              The  package  itself  declares  this  command  very  simple,  writing  the  messages to <b>stdout</b> (if
              <b>::ftp::VERBOSE</b> was set, see below)  and  throwing  tcl  errors  for  error  messages.  It  is  the
              responsibility of the application to overwrite it as needed. A state variable for different states
              assigned to different colors is recommended by the author. The package <b>log</b> is useful for this.

       <b>::ftp::VERBOSE</b>
              A  state  variable controlling the output of the package. Setting <b>::ftp::VERBOSE</b> to "1" forces the
              package to show all responses from a remote server. The default value is "0".

       <b>::ftp::DEBUG</b>
              A state variable controlling the output of ftp. Setting <b>::ftp::DEBUG</b> to "1" enables debugging  and
              forces  the  package  to show all return codes, states, state changes and "real" ftp commands. The
              default value is "0".

</pre><h4><b>BUGS</b></h4><pre>
       The correct execution of many commands depends upon the proper behavior by the remote server, network and
       router configuration.

       An update command placed in the procedure <b>::ftp::DisplayMsg</b> may run into persistent  errors  or  infinite
       loops. The solution to this problem is to use <b>update</b> <b>idletasks</b> instead of <b>update</b>.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This  document,  and  the package it describes, will undoubtedly contain bugs and other problems.  Please
       report such in the category <u>ftp</u> of the <u>Tcllib</u>  <u>Trackers</u>  [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].   Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note  further  that  <u>attachments</u>  are strongly preferred over inlined patches. Attachments can be made by
       going to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most  button
       in the secondary navigation bar.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       ftpd, mime, pop3, smtp

</pre><h4><b>KEYWORDS</b></h4><pre>
       ftp, internet, net, rfc 959

</pre><h4><b>CATEGORY</b></h4><pre>
       Networking

tcllib                                               2.4.14                                            <u><a href="../man3tcl/ftp.3tcl.html">ftp</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>