<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hwlocality_diff - Topology differences</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libhwloc-doc">libhwloc-doc_2.12.0-4build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       hwlocality_diff - Topology differences

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Data</b> <b>Structures</b>
       union <b>hwloc_topology_diff_obj_attr_u</b>
       union <b>hwloc_topology_diff_u</b>

   <b>Typedefs</b>
       typedef enum <b>hwloc_topology_diff_obj_attr_type_e</b> <b>hwloc_topology_diff_obj_attr_type_t</b>
       typedef enum <b>hwloc_topology_diff_type_e</b> <b>hwloc_topology_diff_type_t</b>
       typedef union <b>hwloc_topology_diff_u</b> * <b>hwloc_topology_diff_t</b>

   <b>Enumerations</b>
       enum <b>hwloc_topology_diff_obj_attr_type_e</b> { <b>HWLOC_TOPOLOGY_DIFF_OBJ_ATTR_SIZE</b>,
           <b>HWLOC_TOPOLOGY_DIFF_OBJ_ATTR_NAME</b>, <b>HWLOC_TOPOLOGY_DIFF_OBJ_ATTR_INFO</b> }
       enum <b>hwloc_topology_diff_type_e</b> { <b>HWLOC_TOPOLOGY_DIFF_OBJ_ATTR</b>, <b>HWLOC_TOPOLOGY_DIFF_TOO_COMPLEX</b> }
       enum <b>hwloc_topology_diff_apply_flags_e</b> { <b>HWLOC_TOPOLOGY_DIFF_APPLY_REVERSE</b> }

   <b>Functions</b>
       int <b>hwloc_topology_diff_build</b> (<b>hwloc_topology_t</b> topology, <b>hwloc_topology_t</b> newtopology, unsigned long
           flags, <b>hwloc_topology_diff_t</b> *diff)
       int <b>hwloc_topology_diff_apply</b> (<b>hwloc_topology_t</b> topology, <b>hwloc_topology_diff_t</b> diff, unsigned long
           flags)
       int <b>hwloc_topology_diff_destroy</b> (<b>hwloc_topology_diff_t</b> diff)
       int <b>hwloc_topology_diff_load_xml</b> (const char *xmlpath, <b>hwloc_topology_diff_t</b> *diff, char **refname)
       int <b>hwloc_topology_diff_export_xml</b> (<b>hwloc_topology_diff_t</b> diff, const char *refname, const char *xmlpath)
       int <b>hwloc_topology_diff_load_xmlbuffer</b> (const char *xmlbuffer, int buflen, <b>hwloc_topology_diff_t</b> *diff,
           char **refname)
       int <b>hwloc_topology_diff_export_xmlbuffer</b> (<b>hwloc_topology_diff_t</b> diff, const char *refname, char
           **xmlbuffer, int *buflen)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Applications that manipulate many similar topologies, for instance one for each node of a homogeneous
       cluster, may want to compress topologies to reduce the memory footprint.

       This file offers a way to manipulate the difference between topologies and export/import it to/from XML.
       Compression may therefore be achieved by storing one topology entirely while the others are only
       described by their differences with the former. The actual topology can be reconstructed when actually
       needed by applying the precomputed difference to the reference topology.

       This interface targets very similar nodes. Only very simple differences between topologies are actually
       supported, for instance a change in the memory size, the name of the object, or some info attribute. More
       complex differences such as adding or removing objects cannot be represented in the difference structures
       and therefore return errors. Differences between object sets or topology-wide allowed sets, cannot be
       represented either.

       It means that there is no need to apply the difference when looking at the tree organization (how many
       levels, how many objects per level, what kind of objects, CPU and node sets, etc) and when binding to
       objects. However the difference must be applied when looking at object attributes such as the name, the
       memory size or info attributes.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>enum</b> <b>hwloc_topology_diff_obj_attr_type_e</b> <b>hwloc_topology_diff_obj_attr_type_t</b>
       Type of one object attribute difference.

   <b>typedef</b> <b>union</b> <b>hwloc_topology_diff_u</b> <b>*</b> <b>hwloc_topology_diff_t</b>
       One element of a difference list between two topologies.

   <b>typedef</b> <b>enum</b> <b>hwloc_topology_diff_type_e</b> <b>hwloc_topology_diff_type_t</b>
       Type of one element of a difference list.

</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>hwloc_topology_diff_apply_flags_e</b>
       Flags to be given to <b>hwloc_topology_diff_apply()</b>.

       <b>Enumerator</b>

       <u>HWLOC_TOPOLOGY_DIFF_APPLY_REVERSE</u>
              Apply topology diff in reverse direction.

   <b>enum</b> <b>hwloc_topology_diff_obj_attr_type_e</b>
       Type of one object attribute difference.

       <b>Enumerator</b>

       <u>HWLOC_TOPOLOGY_DIFF_OBJ_ATTR_SIZE</u>
              The       object       local      memory      is      modified.      The      union      is      a
              <b>hwloc_topology_diff_obj_attr_u::hwloc_topology_diff_obj_attr_uint64_s</b>  (and  the  index  field  is
              ignored).

       <u>HWLOC_TOPOLOGY_DIFF_OBJ_ATTR_NAME</u>
              The        object        name        is        modified.        The        union        is       a
              <b>hwloc_topology_diff_obj_attr_u::hwloc_topology_diff_obj_attr_string_s</b>  (and  the  name  field   is
              ignored).

       <u>HWLOC_TOPOLOGY_DIFF_OBJ_ATTR_INFO</u>
              the     value     of     an     info     attribute     is     modified.    The    union    is    a
              <b>hwloc_topology_diff_obj_attr_u::hwloc_topology_diff_obj_attr_string_s</b>.

   <b>enum</b> <b>hwloc_topology_diff_type_e</b>
       Type of one element of a difference list.

       <b>Enumerator</b>

       <u>HWLOC_TOPOLOGY_DIFF_OBJ_ATTR</u>
              An       object       attribute       was       changed.       The        union        is        a
              <b>hwloc_topology_diff_u::hwloc_topology_diff_obj_attr_s</b>.

       <u>HWLOC_TOPOLOGY_DIFF_TOO_COMPLEX</u>
              The  difference is too complex, it cannot be represented. The difference below this object has not
              been    checked.    <b>hwloc_topology_diff_build()</b>    will    return    1.    The    union    is    a
              <b>hwloc_topology_diff_u::hwloc_topology_diff_too_complex_s</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b> <b>hwloc_topology_diff_apply</b> <b>(hwloc_topology_t</b> <b>topology,</b> <b>hwloc_topology_diff_t</b> <b>diff,</b> <b>unsigned</b> <b>long</b> <b>flags)</b>
       Apply    a    topology    diff    to    an    existing    topology.    flags   is   an   OR'ed   set   of
       <b>hwloc_topology_diff_apply_flags_e</b>.

       The new topology is modified in place. <b>hwloc_topology_dup()</b> may be used to duplicate it before patching.

       If the difference cannot be  applied  entirely,  all  previous  applied  elements  are  unapplied  before
       returning.

       <b>Returns</b>
           0 on success.

           -N  if  applying  the  difference  failed  while trying to apply the N-th part of the difference. For
           instance -1 is returned if the very first difference element could not be applied.

   <b>int</b> <b>hwloc_topology_diff_build</b> <b>(hwloc_topology_t</b> <b>topology,</b> <b>hwloc_topology_t</b> <b>newtopology,</b> <b>unsigned</b> <b>long</b>  <b>flags,</b>
       <b>hwloc_topology_diff_t</b> <b>*</b> <b>diff)</b>
       Compute  the difference between 2 topologies. The difference is stored as a list of <b>hwloc_topology_diff_t</b>
       entries starting at diff. It is computed  by  doing  a  depth-first  traversal  of  both  topology  trees
       simultaneously.

       If  the  difference between 2 objects is too complex to be represented (for instance if some objects have
       different   types,   or   different   numbers   of   children),   a   special   diff   entry   of    type
       <b>HWLOC_TOPOLOGY_DIFF_TOO_COMPLEX</b>  is  queued.  The  computation  of the diff does not continue below these
       objects. So each such diff entry means that the difference between two subtrees could not be computed.

       <b>Returns</b>
           0 if the difference can be represented properly.

           0 with diff pointing to NULL if there is no difference between the topologies.

           1 if the difference is  too  complex  (see  above).  Some  entries  in  the  list  will  be  of  type
           <b>HWLOC_TOPOLOGY_DIFF_TOO_COMPLEX</b>.

           -1 on any other error.

       <b>Note</b>
           flags is currently not used. It should be 0.

           The output diff has to be freed with <b>hwloc_topology_diff_destroy()</b>.

           The  output  diff  can  only  be  exported  to  XML or passed to <b>hwloc_topology_diff_apply()</b> if 0 was
           returned, i.e. if no entry of type <b>HWLOC_TOPOLOGY_DIFF_TOO_COMPLEX</b> is listed.

           The output diff may be modified by removing some entries from the list. The removed entries should be
           freed by passing them to to <b>hwloc_topology_diff_destroy()</b> (possible as another list).

   <b>int</b> <b>hwloc_topology_diff_destroy</b> <b>(hwloc_topology_diff_t</b> <b>diff)</b>
       Destroy a list of topology differences.

       <b>Returns</b>
           0.

   <b>int</b> <b>hwloc_topology_diff_export_xml</b> <b>(hwloc_topology_diff_t</b> <b>diff,</b> <b>const</b> <b>char</b> <b>*</b> <b>refname,</b> <b>const</b> <b>char</b> <b>*</b> <b>xmlpath)</b>
       Export a list of topology differences to a XML file. If not NULL, refname defines  an  identifier  string
       for  the  reference  topology which was used as a base when computing this difference. This identifier is
       usually the name of the other XML file that contains the reference topology. This attribute is given back
       when reading the diff from XML.

       <b>Returns</b>
           0 on success, -1 on error.

   <b>int</b>  <b>hwloc_topology_diff_export_xmlbuffer</b>  <b>(hwloc_topology_diff_t</b>  <b>diff,</b>  <b>const</b>  <b>char</b>  <b>*</b>  <b>refname,</b>  <b>char</b>   <b>**</b>
       <b>xmlbuffer,</b> <b>int</b> <b>*</b> <b>buflen)</b>
       Export  a list of topology differences to a XML buffer. If not NULL, refname defines an identifier string
       for the reference topology which was used as a base when computing this difference.  This  identifier  is
       usually the name of the other XML file that contains the reference topology. This attribute is given back
       when reading the diff from XML.

       The returned buffer ends with a \0 that is included in the returned length.

       <b>Returns</b>
           0 on success, -1 on error.

       <b>Note</b>
           The XML buffer should later be freed with <b>hwloc_free_xmlbuffer()</b>.

   <b>int</b> <b>hwloc_topology_diff_load_xml</b> <b>(const</b> <b>char</b> <b>*</b> <b>xmlpath,</b> <b>hwloc_topology_diff_t</b> <b>*</b> <b>diff,</b> <b>char</b> <b>**</b> <b>refname)</b>
       Load  a  list  of  topology  differences  from  a  XML file. If not NULL, refname will be filled with the
       identifier string of the reference topology for the difference file, if any  was  specified  in  the  XML
       file. This identifier is usually the name of the other XML file that contains the reference topology.

       <b>Returns</b>
           0 on success, -1 on error.

       <b>Note</b>
           the pointer returned in refname should later be freed by the caller.

   <b>int</b>  <b>hwloc_topology_diff_load_xmlbuffer</b>  <b>(const</b>  <b>char</b>  <b>*</b> <b>xmlbuffer,</b> <b>int</b> <b>buflen,</b> <b>hwloc_topology_diff_t</b> <b>*</b> <b>diff,</b>
       <b>char</b> <b>**</b> <b>refname)</b>
       Load a list of topology differences from a XML buffer. Build a list of differences from  the  XML  memory
       buffer given at xmlbuffer and of length buflen (including an ending \0). This buffer may have been filled
       earlier with <b>hwloc_topology_diff_export_xmlbuffer()</b>.

       If  not  NULL,  refname  will  be  filled  with  the  identifier string of the reference topology for the
       difference file, if any was specified in the XML file. This identifier is usually the name of  the  other
       XML file that contains the reference topology.

       <b>Returns</b>
           0 on success, -1 on error.

       <b>Note</b>
           the pointer returned in refname should later be freed by the caller.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for Hardware Locality (hwloc) from the source code.

Hardware Locality (hwloc)                        Version 2.12.0                               <u><a href="../man3/hwlocality_diff.3.html">hwlocality_diff</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>