<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finance::Streamer - Interface to Datek Streamer.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libfinance-streamer-perl">libfinance-streamer-perl_1.10-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Finance::Streamer - Interface to Datek Streamer.

</pre><h4><b>VERSION</b></h4><pre>
       This document refers to version 1.07 of Finance::Streamer, released Tue, 27 Aug 2002.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Finance::Streamer;

        my $user = 'USER1234';
        my $pass = 'SF983JFDLKJSDFJL8342398KLSJF8329483LF';
        my $symbols = 'JDSU+QCOM+AMAT+IBM+^COMPX';
        my $fields = '0+1+2+3+4+8+9+21';

        my $streamer = Finance::Streamer-&gt;new( user =&gt; $user,
                                               pass =&gt; $pass,
                                               symbols =&gt; $symbols,
                                               fields =&gt; $fields,
                                               );

        my $sub = sub
        {
               my (%all_data) = @_;

               foreach my $symbol (keys %all_data) {
                       print "$symbol\n";
                       my %data = %{$all_data{$symbol}};
                       foreach my $data_part (keys %data) {
                               print "$data_part", "=", $data{$data_part}, "\n";
                       }
               }
        };

        $streamer-&gt;{sub_recv} = $sub;

        #$streamer-&gt;receive;
        $streamer-&gt;receive_all;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This library provides an interface that can be used to access Datek Streamer market data.

       It works with the new Streamer (version 3) as opposed to the older (version 2).

       There are four subroutines available to use.  The first two, <u>connect</u> and <u>Parser</u>, make the required tasks
       of connecting to a Streamer server and parsing raw quote data into an easier to use format (such as a
       hash) easy to do.  The third, <u>receive</u>, makes the task of using the data as easy as possible by using the
       previously mentioned subroutines (connect, receive).  The fourth, <u>receive_all</u>, is identical to <u>receive</u>
       but it returns the data state.

       If you just want to use the data, focus on the functions <u>receive</u> and <u>receive_all</u>.  If you want to know
       how the protocol works (roughly), focus on the <u>connect</u> and <u>Parser</u> functions.

</pre><h4><b>OPERATIONS</b></h4><pre>
   <b>Finance::Streamer-&gt;new;</b>
               Returns: defined object on success, FALSE otherwise

       The <u>new</u> sub stores the values passed to it for use by other subroutines later.  For example, if you
       wanted to use a subroutine that required a value for <u>symbols</u> to be defined, you could do it like so.

        $obj = Finance::Streamer-&gt;new(symbols =&gt; $your_symbols)
               or die "error new()";

        # then use the sub that requires "symbols"

   <b>$obj-&gt;connect;</b>
               Returns: IO::Socket::INET object on success, FALSE on error

               Requires the following object attributes:
                       user pass symbols fields [agent] [timeout]

       The <u>connect</u> sub is used to initiate a connection with the data server.

       The object attributes <u>user</u>, <u>pass</u>, <u>symbols</u>, <u>fields</u>, optional <u>agent</u>, and an optional <u>timeout</u>, must be
       defined in the <u>streamer</u> object before using this subroutine.  Each is describe in more detail below.

        $obj-&gt;{user} = $user;
        $obj-&gt;{pass} = $pass;
        $obj-&gt;{symbols} = $symbols;
        $obj-&gt;{fields} = $fields;
        $obj-&gt;{agent} =&gt; $agent;       # optional
        $obj-&gt;{timeout} =&gt; $timeout;   # optional

       The <u>user</u> and <u>pass</u> value is the user name and password of the account to be used for receiving data.  See
       the section "how to obtain user name and password" below, for more info.

       <b>IMPORTANT</b> - If the <u>user</u> or <u>pass</u> is wrong, there is no indication other than no data arriving after
       connection.

       The <u>symbols</u> value can contain up to 23 symbols in all uppercase joined by a '+' character.

        $symbols = "JDSU+QCOM+AMAT+IBM";

       The <u>fields</u> value can be any combination of the integers 0 to 21 in sequential order joined by the '+'
       character.  See the section "field numbers" below, for more info.

        $fields = "0+1+2+3+21";

       The <u>agent</u> field determines the id of this library when it connects to a Streamer server.  By default the
       id is the name of this library.  The string should be one line with <b>no</b> carriage return ('\n').

        $agent = "My Server 1.01";

       The <u>timeout</u> specifies the maximum number of seconds to wait for the connection to succeed.  The default
       value of <b>60</b> <b>seconds</b> is used if no value is specified.

        $timeout = 30;

        my $sock = $obj-&gt;connect
               or die "error connect()";

   <b>Finance::Streamer::Parser($raw_data);</b>
               Returns: %data on success, FALSE otherwise

       The <u>Parser</u> subroutine changes raw quote data into a form that is easier to use.

       <b>IMPORTANT</b> - The raw quote data must have been received using the <u>fields</u> value 0 or this subroutine wont
       work.

       This subroutine does not use the <u>streamer</u> object, so the name must be fully specified.  The only argument
       that is required is a variable containing the raw data for a quote.

       If the parser is successful a hash containing the data will be returned.  The hash will contain a key for
       each symbol that data was received for.  Each symbol entry is a reference to another hash that has a key
       for each value that data is available for.  A helpful tool for visualizing this is the <u>Data::Dumper</u>
       module.

       Many checks/tests are made while the data is being parsed.  If something is wrong with the data, an error
       message will be printed to STDERR and <u>undef</u> will be returned if the error was substantial enough that the
       quote data is wrong.

   <b>$obj-&gt;receive;</b>
               Returns: does not return

               Requires the following object attributes:
                       sub_recv user pass symbols fields [timeout] [sub_hrtbt]

       The <u>receive</u> subroutine deals with all the issues of connecting to the server, receiving data, etc, and
       executes the subroutine specified by <u>sub_recv</u>, passing a single argument which contains the quote data
       every time a quote is received.

       The object attributes <u>sub_recv</u>, <u>user</u>, <u>pass</u>, <u>symbols</u>, <u>fields</u>, optional <u>timeout</u> and optional <u>sub_hrtbt</u> must
       be defined before using this subroutine.

        $obj-&gt;{sub_recv} = $sub_ref;
        $obj-&gt;{sub_hrtbt} = $sub_ref_heartbeat;

       The <u>sub_recv</u> value is a reference to a subroutine to be executed when new quote data arrives.  One
       argument, an object of parsed data as returned by <u>Parser</u>, will be passed to this subroutine.

       The values <u>user</u>, <u>pass</u>, <u>symbols</u>, <u>fields</u> and <u>timeout</u> are used for the <u>connect</u> subroutine.  See the section
       on <u>connect</u> for more information.

       The <u>timeout</u> value, while it is used for <u>connect</u>, is also used in this subroutine to specify the maximum
       number of seconds to wait for new data to arrive before reconnecting.  The default value of <b>60</b> <b>seconds</b> is
       used if no value is specified.

       The <u>sub_hrtbt</u> value is a reference to a subroutine to be executed when a <b>heartbeat</b> happens.  One
       argument, the time at which the heartbeat occurred, will be passed to this subroutine when executed.

       Error messages may be displayed.  Messages about errors receiving data will indicate why and may result
       in a reconnection.  Messages about the status indicated in the received data are for information purposes
       and do not usually result in a reconnect.  All messages are displayed to STDERR and so can be easily
       redirected.  An example of how to turn off messages is below, where "a.out" is the name of the program
       and "2" is the number of the file descriptor representing standard error.

        a.out 2&gt;/dev/null

   <b>$obj-&gt;receive_all;</b>
       Identical to the function <b>receive()</b> except that instead of getting just the changed values, any values
       that do not have changed values have their most recent value.  So, it sort of keeps a current state
       changing only the values that are updated returning the current state.

        Example:
        1: bid_size = 200, ask_size = 300
        2: bid_size = 400                      # receive()
        2: bind_size = 400, ask_size = 300     # receive_all()

</pre><h4><b>NEED</b> <b>TO</b> <b>KNOW</b></h4><pre>
       This section contains information that must be understood in order to use this library.

   <b>how</b> <b>to</b> <b>obtain</b> <b>user</b> <b>name</b> <b>and</b> <b>password</b>
       When you first start the Streamer application provided by Datek a window will pop up giving you a choice
       of what you want to launch (Streamer, Portfolio, Last Sale, Index).  If you look at the html source of
       that window you will find near the top a place where your user name is displayed in all capitals (e.g.
       "USER12345") and below it is a long string of upper case letters and numbers.  The long string is your
       password.

   <b>field</b> <b>numbers</b>
       The <u>field</u> <u>numbers</u> are used to choose what data you want to receive for each symbol.

        number         name            description
        ------         ----            -----------
        0              symbol
        1              bid
        2              ask
        3              last
        4              bid_size        size of bid in 100's
        5              ask_size        size of ask in 100's
        6              bidID           (Q=Nasdaq)
        7              askID
        8              volume          total volume
        9              last_size       size of last trade
        10             trade_time      time of last trade (HH:MM:SS)
        11             quote_time      time of last quote (HH:MM:SS)
        12             high            high of day
        13             low             low of day
        14             BT              tick, up(U) or down(D)
        15             prev_close      previous close
        16             exch            exchange(q=Nasdaq)
        17             ?               do not use, unknown
        18             ?               do not use, unknown
        19             isld_bid        Island bid
        20             isld_ask        Island ask
        21             isld_vol        Island volume

</pre><h4><b>PREREQUISITES</b></h4><pre>
        Module             Version
        ------             -------
        IO::Socket::INET   1.25
        IO::Select         1.14

</pre><h4><b>AUTHOR</b></h4><pre>
       Jeremiah Mahler &lt;<a href="mailto:jmahler@pacbell.net">jmahler@pacbell.net</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2002, Jeremiah Mahler. All Rights Reserved.  This module is free software.  It may be used,
       redistributed and/or modified under the same terms as Perl itself.

perl v5.36.0                                       2022-10-22                             <u>Finance::<a href="../man3pm/Streamer.3pm.html">Streamer</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>