<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>timeval, timespec — time structures</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libbsd-dev">libbsd-dev_0.11.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       timeval, timespec — time structures

</pre><h4><b>LIBRARY</b></h4><pre>
       Utility functions from BSD systems (libbsd, -lbsd)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/time.h&gt;</b>
       (See <u><a href="../man7/libbsd.7.html">libbsd</a></u>(7) for include usage.)

       <u>void</u>
       <b>TIMEVAL_TO_TIMESPEC</b>(<u>struct</u> <u>timeval</u> <u>*tv</u>, <u>struct</u> <u>timespec</u> <u>*ts</u>);

       <u>void</u>
       <b>TIMESPEC_TO_TIMEVAL</b>(<u>struct</u> <u>timeval</u> <u>*tv</u>, <u>struct</u> <u>timespec</u> <u>*ts</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The &lt;<u>sys/time.h</u>&gt; header, included by &lt;<u>time.h</u>&gt;, defines various structures related to time and timers.

        1.   The following structure is used by <u><a href="../man2/gettimeofday.2.html">gettimeofday</a></u>(2), among others:

                   struct timeval {
                           time_t          tv_sec;
                           suseconds_t     tv_usec;
                   };

             The  <u>tv_sec</u> member represents the elapsed time, in whole seconds.  The <u>tv_usec</u> member captures rest
             of the elapsed time, represented as the number of microseconds.

        2.   The following structure is used by <u><a href="../man2/nanosleep.2.html">nanosleep</a></u>(2), among others:

                   struct timespec {
                           time_t          tv_sec;
                           long            tv_nsec;
                   };

             The <u>tv_sec</u> member is again the elapsed time in whole seconds.  The <u>tv_nsec</u>  member  represents  the
             rest of the elapsed time in nanoseconds.

             A  microsecond is equal to one millionth of a second, 1000 nanoseconds, or 1/1000 milliseconds.  To
             ease the conversions, the macros <b>TIMEVAL_TO_TIMESPEC</b>() and <b>TIMESPEC_TO_TIMEVAL</b>()  can  be  used  to
             convert between <u>struct</u> <u>timeval</u> and <u>struct</u> <u>timespec</u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       It  can  be  stressed  that  the traditional UNIX <u>timeval</u> and <u>timespec</u> structures represent elapsed time,
       measured by the system clock.  The following sketch implements a function suitable for use in  a  context
       where the <u>timespec</u> structure is required for a conditional timeout:

             static void
             example(struct timespec *spec, time_t minutes)
             {
                     struct timeval elapsed;

                     (void)gettimeofday(&amp;elapsed, NULL);

                     _DIAGASSERT(spec != NULL);
                     TIMEVAL_TO_TIMESPEC(&amp;elapsed, spec);

                     /* Add the offset for timeout in minutes. */
                     spec-&gt;tv_sec = spec-&gt;tv_sec + minutes * 60;
             }

       A better alternative would use the more precise <u><a href="../man2/clock_gettime.2.html">clock_gettime</a></u>(2).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man3bsd/timeradd.3bsd.html">timeradd</a></u>(3bsd)

Debian                                           April 12, 2011                                    <u><a href="../man3bsd/TIMEVAL.3bsd.html">TIMEVAL</a></u>(3bsd)
</pre>
 </div>
</div></section>
</div>
</body>
</html>