<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Arch::SharedIndex - a synchronized data structure (map) for IPC</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libarch-perl">libarch-perl_0.5.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Arch::SharedIndex - a synchronized data structure (map) for IPC

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Arch::SharedIndex;

           my $map = Arch::SharedIndex-&gt;new(file =&gt; "/tmp/logintimes.idx");
           my $time = time;
           $map-&gt;store(migo =&gt; $time - 75, bob =&gt; $time - 5, enno =&gt; $time);

           printf "All users: %s, %s, %s\n", $map-&gt;keys;
           printf "New users: %s\n", $map-&gt;grep(sub { $_[1] == $time });
           printf "Login time of migo: %s\n", $map-&gt;fetch('migo');

           $map-&gt;update(sub { $_[1] + 10 }, sub { $_[1] == $time });
           $map-&gt;store(migo =&gt; $time);
           $map-&gt;delete('bob');

           printf "Logged users with times: (%s)\n", join(", ", $map-&gt;hash);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Arch::SharedIndex provides a key-value map that can be shared and accessed safely by multiple processes.

</pre><h4><b>METHODS</b></h4><pre>
       The following methods are available:

       <b>new</b>, <b>encode_value</b>, <b>decode_value</b>, <b>store_value</b>, <b>fetch_value</b>, <b>delete_value</b>, <b>store</b>, <b>fetch</b>, <b>delete</b>,
       <b>fetch_store</b>, <b>keys</b>, <b>values</b>, <b>hash</b>, <b>list</b>, <b>grep</b>, <b>filter</b>, <b>update</b>, <b>query_index_list</b>.

       <b>new</b> <u>options</u>
           Create a new index object.  <u>option</u> is a hash of parameters.

           <b>file</b>
               The path of the index file, used to store data.  Must not be omitted.

           <b>can_create</b>
               Whether the index file is automatically created.  Defaults to 1.

           <b>max_size</b>
               Maximum number of entries in the index.  Defaults to 0 (no limit).

           <b>expiration</b>
               Timeout in seconds after which unused entries are removed.  Defaults to 0 (don't expire entries)

           <b>time_renewal</b>
               Whether fetching values resets the entry expiration timeout.  Defaults to 1 if <b>max_size</b> is set, 0
               otherwise.

           <b>perl_data</b>
               Whether non-scalar perl data can be stored.  If true, values are encoded using Data::Dumper.

           <b>perl_data_indent</b>
               Indent value for Data::Dumper when <b>perl_data</b> is set.  Defaults to 0.

           <b>perl_data_pair</b>
               Pair value for Data::Dumper when <b>perl_data</b> is set.  Defaults to "=&gt;".

       <b>encode_value</b> <u>ref</u>
           Encode the value referenced by <u>ref</u> in a string representation.  The encoding is done in place.

       <b>decode_value</b> <u>ref</u>
           Decode  a  value  encoded  with <b>encode_value</b> from its string representation.  The decoding is done in
           place.

       <b>store_value</b> <u>key</u> <u>token</u> <u>value</u>
           Store a value for the given <u>key</u> and <u>token</u>.  Create a new token if none is given.  Returns  the  (new)
           token.  Sub-classes should implement this method.

       <b>fetch_value</b> <u>key</u> <u>token</u>
           Fetch the value stored for the given <u>key</u> and <u>token</u>.  Sub-classes should implement this method.

       <b>delete_value</b> <u>key</u> <u>token</u>
           Delete a value stored for the given <u>key</u> and <u>value</u>.  Sub-classes should implement this method.

       <b>store</b> <u>kvp</u>
           Store  a  set  of key-value pairs.  <u>kvp</u> may either be a reference to a hash or array, or list of keys
           and values.

       <b>fetch</b> <u>keys</u>
           Fetch values stored for a list of keys. <u>keys</u> may either be an array reference, or a list of keys.

       <b>delete</b> <u>keys</u>
           Delete values stored for a list of keys.  <u>keys</u> may either be an array reference, or a list of keys.

       <b>fetch_store</b> <u>mapfunc</u> <u>keys</u>
           This is an optimized (<b>fetch</b> or <b>store</b>) in a single step.  Fetch values  stored  for  keys,  just  like
           <b>fetch</b>,  but  store  values  for the missing keys in the process.  <u>keys</u> may be an array reference or a
           list of keys.  <u>mapfunc</u> will be called once for every key in <u>keys</u> that has no associated  value,  with
           the key as its only argument.  Its return value will be stored for that key.

       <b>keys</b>
           Returns a list of all valid keys.  In scalar context, returns an array reference.

           Keys  are  returned  in  no  particular order, but <b>values</b> will return values in matching order if the
           index has not been changed between calls.

       <b>values</b>
           Returns a list of all stored values.  In scalar context, returns an array reference.

           Values are returned in no particular order, but <b>keys</b> will return values  in  matching  order  if  the
           index has not been changed between calls.

       <b>hash</b>
           Returns the stored keys and values as a perl hash.  In scalar context, returns hash reference.

       <b>list</b>
           Returns  the stored keys and values as a list of pairs (array references with two elements each).  In
           scalar context, returns an array reference.

       <b>grep</b> <u>predicate</u>
           Returns a list of keys for which <u>predicate</u> returns a true value.  <u>predicate</u> is called once for  every
           key, with the key and the stored value as its first and second argument.

       <b>filter</b> <u>predicate</u>
           Deletes  every  entry  for  which <u>predicate</u> returns a true value.  <u>predicate</u> is called once for every
           key, with the key and the stored value asi its first and second argument.

       <b>update</b> <u>mapfunc</u> <u>predicate</u>
           Updates the value for every key for which <u>predicate</u> returns a true value with the return  value  from
           <u>mapfunc</u>.  Both <u>predicate</u> and <u>mapfunc</u> are called with the key and the stored values as their first and
           second argument.

       <b>update_index_list</b> <u>code</u>
           Synchronize  access  and  call  <u>code</u> with a reference to a list of pairs, each containing the key and
           token, for every stored value.

           Used internally by <b>store</b>, <b>fetch</b>, <b>delete</b>, <b>fetch_store</b>, <b>keys</b>, <b>values</b>,  <b>hash</b>,  <b>list</b>,  <b>grep</b>,  <b>filter</b>  and
           <b>update</b>.

</pre><h4><b>BUGS</b></h4><pre>
       Awaiting for your reports.

</pre><h4><b>AUTHORS</b></h4><pre>
       Mikhael Goikhman (<a href="mailto:migo@homemail.com--Perl-GPL">migo@homemail.com--Perl-GPL</a>/arch-perl--devel).

       Enno Cramer (<a href="mailto:uebergeek@web.de--2003">uebergeek@web.de--2003</a>/arch-perl--devel).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       For more information, see Arch::SharedCache.

perl v5.20.2                                       2005-09-17                             <u>Arch::<a href="../man3pm/SharedIndex.3pm.html">SharedIndex</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>