<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mime - Manipulation of MIME body parts</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mime - Manipulation of MIME body parts

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>mime</b> <b>?1.7.2?</b>

       <b>::mime::initialize</b>  ?<b>-canonical</b>  <u>type/subtype</u>  ?<b>-param</b>  {<u>key</u>  <u>value</u>}...?  ?<b>-encoding</b> <u>value</u>? ?<b>-header</b> {<u>key</u>
       <u>value</u>}...?? (<b>-file</b> <u>name</u> | <b>-string</b> <u>value</u> | <b>-parts</b> {<u>token1</u> ... <u>tokenN</u>})

       <b>::mime::finalize</b> <u>token</u> ?<b>-subordinates</b> <b>all</b> | <b>dynamic</b> | <b>none</b>?

       <b>::mime::getproperty</b> <u>token</u> ?<u>property</u> | <b>-names</b>?

       <b>::mime::getheader</b> <u>token</u> ?<u>key</u> | <b>-names</b>?

       <b>::mime::setheader</b> <u>token</u> <u>key</u> <u>value</u> ?<b>-mode</b> <b>write</b> | <b>append</b> | <b>delete</b>?

       <b>::mime::getbody</b> <u>token</u> ?<b>-decode</b>? ?<b>-command</b> <u>callback</u> ?<b>-blocksize</b> <u>octets</u>??

       <b>::mime::copymessage</b> <u>token</u> <u>channel</u>

       <b>::mime::buildmessage</b> <u>token</u>

       <b>::mime::parseaddress</b> <u>string</u>

       <b>::mime::parsedatetime</b> (<u>string</u> | <b>-now</b>) <u>property</u>

       <b>::mime::mapencoding</b> <u>encoding_name</u>

       <b>::mime::reversemapencoding</b> <u>charset_type</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>mime</b> library package provides the commands to create and manipulate MIME body parts.

       <b>::mime::initialize</b> ?<b>-canonical</b> <u>type/subtype</u> ?<b>-param</b> {<u>key</u> <u>value</u>}...? ?<b>-encoding</b> <u>value</u>? ?<b>-header</b> {<u>key</u>
       <u>value</u>}...?? (<b>-file</b> <u>name</u> | <b>-string</b> <u>value</u> | <b>-parts</b> {<u>token1</u> ... <u>tokenN</u>})
              Creates a MIME part and returns a token representing it.

              •      If the <b>-canonical</b> option is present, then the body is in canonical (raw) form and is  found
                     by consulting either the <b>-file</b>, <b>-string</b>, or <b>-parts</b> option.

                     In  addition,  both  the <b>-param</b> and <b>-header</b> options may occur zero or more times to specify
                     <b>Content-Type</b>  parameters  (e.g.,  <b>charset</b>)  and  header  keyword/values   (e.g.,   <b>Content-</b>
                     <b>Disposition</b>), respectively.

                     Also, <b>-encoding</b>, if present, specifies the <b>Content-Transfer-Encoding</b> when copying the body.

              •      If  the  <b>-canonical</b> option is not present, then the MIME part contained in either the <b>-file</b>
                     or the <b>-string</b> option is parsed, dynamically generating subordinates as appropriate.

       <b>::mime::finalize</b> <u>token</u> ?<b>-subordinates</b> <b>all</b> | <b>dynamic</b> | <b>none</b>?
              Destroys the MIME part represented by <u>token</u>. It returns an empty string.

              If the <b>-subordinates</b> option is present, it specifies which subordinates should also be  destroyed.
              The default value is <b>dynamic</b>, destroying all subordinates which were created by <b>::mime::initialize</b>
              together with the containing body part.

       <b>::mime::getproperty</b> <u>token</u> ?<u>property</u> | <b>-names</b>?
              Returns  a string or a list of strings containing the properties of a MIME part. If the command is
              invoked with the name of a specific property, then the corresponding value is  returned;  instead,
              if  <b>-names</b>  is  specified,  a list of all properties is returned; otherwise, a serialized array of
              properties and values is returned.

              The possible properties are:

              <b>content</b>
                     The type/subtype describing the content

              <b>encoding</b>
                     The "Content-Transfer-Encoding"

              <b>params</b> A list of "Content-Type" parameters

              <b>parts</b>  A list of tokens for the part's subordinates.  This property is present only  if  the  MIME
                     part has subordinates.

              <b>size</b>   The approximate size of the content (unencoded)

       <b>::mime::getheader</b> <u>token</u> ?<u>key</u> | <b>-names</b>?
              Returns the header of a MIME part as a dictionary with possibly-redundant keys.

              If <u>key</u> is provided, then a list of values of matching names, without regard to case, is returned.

              If <b>-names</b> is provided, a list of all keys is returned.

       <b>::mime::setheader</b> <u>token</u> <u>key</u> <u>value</u> ?<b>-mode</b> <b>write</b> | <b>append</b> | <b>delete</b>?
              If  <b>append</b> is provided, creates a new header named <u>key</u> with the value of <u>value</u> is added.  If <b>write</b>
              is provided, deletes any existing headers whose names match <u>key</u> and  then  creates  a  new  header
              named  <u>key</u>  with the value of <u>value</u>.  If <b>delete</b> is provided any existing header having a name that
              matches <u>key</u> is deleted.  Returns a list of strings containing the previous value  associated  with
              the key.

              The value for <b>-mode</b> is one of:

              <b>write</b>  The <u>key</u>/<u>value</u> is either created or overwritten (the default).

              <b>append</b> A new <u>value</u> is appended for the <u>key</u> (creating it as necessary).

              <b>delete</b> All values associated with the key are removed (the <u>value</u> parameter is ignored).

       <b>::mime::getbody</b> <u>token</u> ?<b>-decode</b>? ?<b>-command</b> <u>callback</u> ?<b>-blocksize</b> <u>octets</u>??
              Returns a string containing the body of the leaf MIME part represented by <u>token</u> in canonical form.

              If  the  <b>-command</b>  option is present, then it is repeatedly invoked with a fragment of the body as
              this:

                uplevel #0 $callback [list "data" $fragment]

       (The <b>-blocksize</b> option, if present, specifies the maximum size of each fragment passed to the callback.)

       When the end of the body is reached, the callback is invoked as:

                  uplevel #0 $callback "end"

       Alternatively, if an error occurs, the callback is invoked as:

                  uplevel #0 $callback [list "error" reason]

       Regardless, the return  value  of  the  final  invocation  of  the  callback  is  propagated  upwards  by
       <b>::mime::getbody</b>.

       If  the  <b>-command</b>  option  is absent, then the return value of <b>::mime::getbody</b> is a string containing the
       MIME part's entire body.

       If the option <b>-decode</b> is absent the return value computed above is returned as is.  This  means  that  it
       will be in the charset specified for the token and not the usual utf-8.  If the option <b>-decode</b> is present
       however the command will use the charset information associated with the token to convert the string from
       its encoding into utf-8 before returning it.

       <b>::mime::copymessage</b> <u>token</u> <u>channel</u>
              Copies  the  MIME  represented  by  <u>token</u>  part  to  the  specified  <u>channel</u>. The command operates
              synchronously, and uses fileevent to allow asynchronous operations to  proceed  independently.  It
              returns an empty string.

       <b>::mime::buildmessage</b> <u>token</u>
              Returns  the  MIME  part  represented by <u>token</u> as a string.  It is similar to <b>::mime::copymessage</b>,
              only it returns the data as a return string instead of writing to a channel.

       <b>::mime::parseaddress</b> <u>string</u>
              Takes a string containing one or more 822-style address  specifications  and  returns  a  list  of
              serialized  arrays, one element for each address specified in the argument. If the string contains
              more than one address they will be separated by commas.

              Each serialized array contains the properties below. Note that one or more of these properties may
              be empty.

              <b>address</b>
                     local@domain

              <b>comment</b>
                     822-style comment

              <b>domain</b> the domain part (rhs)

              <b>error</b>  non-empty on a parse error

              <b>group</b>  this address begins a group

              <b>friendly</b>
                     user-friendly rendering

              <b>local</b>  the local part (lhs)

              <b>memberP</b>
                     this address belongs to a group

              <b>phrase</b> the phrase part

              <b>proper</b> 822-style address specification

              <b>route</b>  822-style route specification (obsolete)

       <b>::mime::parsedatetime</b> (<u>string</u> | <b>-now</b>) <u>property</u>
              Takes a string containing an 822-style date-time specification and returns the specified  property
              as a serialized array.

              The list of properties and their ranges are:

              <b>hour</b>   0 .. 23

              <b>lmonth</b> January, February, ..., December

              <b>lweekday</b>
                     Sunday, Monday, ... Saturday

              <b>mday</b>   1 .. 31

              <b>min</b>    0 .. 59

              <b>mon</b>    1 .. 12

              <b>month</b>  Jan, Feb, ..., Dec

              <b>proper</b> 822-style date-time specification

              <b>rclock</b> elapsed seconds between then and now

              <b>sec</b>    0 .. 59

              <b>wday</b>   0 .. 6 (Sun .. Mon)

              <b>weekday</b>
                     Sun, Mon, ..., Sat

              <b>yday</b>   1 .. 366

              <b>year</b>   1900 ...

              <b>zone</b>   -720 .. 720 (minutes east of GMT)

       <b>::mime::mapencoding</b> <u>encoding_name</u>
              Maps  tcl  encodings  onto  the  proper  names for their MIME charset type.  This is only done for
              encodings whose charset types were known.  The remaining encodings return "" for now.

       <b>::mime::reversemapencoding</b> <u>charset_type</u>
              Maps MIME charset types onto tcl encoding names.  Those that are unknown return "".

</pre><h4><b>KNOWN</b> <b>BUGS</b></h4><pre>
       Tcllib Bug #447037
              This problem affects only people which are using Tcl and Mime on a 64-bit  system.  The  currently
              recommended  fix  for  this problem is to upgrade to Tcl version 8.4. This version has extended 64
              bit support and the bug does not appear anymore.

              The problem could have been generally solved by requiring the use of Tcl 8.4 for this package.  We
              decided  against  this  solution  as  it would force a large number of unaffected users to upgrade
              their Tcl interpreter for no reason.

              See <u>Ticket</u> <u>447037</u> [/tktview?name=447037] for additional information.

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in the category <u>mime</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       ftp, http, pop3, smtp

</pre><h4><b>KEYWORDS</b></h4><pre>
       email, internet, mail, mime, net, rfc 2045, rfc 2046, rfc 2049, rfc 821, rfc 822, smtp

</pre><h4><b>CATEGORY</b></h4><pre>
       Text processing

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 1999-2000 Marshall T. Rose

tcllib                                                1.7.2                                           <u><a href="../man3tcl/mime.3tcl.html">mime</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>