<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Config::Model::Node - Class for configuration tree node</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libconfig-model-perl">libconfig-model-perl_2.155-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Config::Model::Node - Class for configuration tree node

</pre><h4><b>VERSION</b></h4><pre>
       version 2.155

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use Config::Model;

        # define configuration tree object
        my $model = Config::Model-&gt;new;
        $model-&gt;create_config_class(
           name              =&gt; 'OneConfigClass',
           class_description =&gt; "OneConfigClass detailed description",

           element =&gt; [
               [qw/X Y Z/] =&gt; {
                   type       =&gt; 'leaf',
                   value_type =&gt; 'enum',
                   choice     =&gt; [qw/Av Bv Cv/]
               }
           ],

           status      =&gt; [ X =&gt; 'deprecated' ],
           description =&gt; [ X =&gt; 'X-ray description (can be long)' ],
           summary     =&gt; [ X =&gt; 'X-ray' ],

           accept =&gt; [
               'ip.*' =&gt; {
                   type       =&gt; 'leaf',
                   value_type =&gt; 'uniline',
                   summary    =&gt; 'ip address',
               }
           ]
        );
        my $instance = $model-&gt;instance (root_class_name =&gt; 'OneConfigClass');
        my $root = $instance-&gt;config_root ;

        # X is not shown below because of its deprecated status
        print $root-&gt;describe,"\n" ;
        # name         value        type         comment
        # Y            [undef]      enum         choice: Av Bv Cv
        # Z            [undef]      enum         choice: Av Bv Cv

        # add some data
        $root-&gt;load( steps =&gt; 'Y=Av' );

        # add some accepted element, ipA and ipB are created on the fly
        $root-&gt;load( steps =&gt; q!ipA=192.168.1.0 ipB=192.168.1.1"! );

        # show also ip* element created in the last "load" call
        print $root-&gt;describe,"\n" ;
        # name         value        type         comment
        # Y            Av           enum         choice: Av Bv Cv
        # Z            [undef]      enum         choice: Av Bv Cv
        # ipA          192.168.1.0  uniline
        # ipB          192.168.1.1  uniline

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This class provides the nodes of a configuration tree. When created, a node object gets a set of rules
       that defines its properties within the configuration tree.

       Each node contain a set of elements. An element can contain:

       •   A leaf element implemented with Config::Model::Value. A leaf can be plain (unconstrained value) or be
           strongly typed (values are checked against a set of rules).

       •   Another node.

       •   A  collection  of  items:  a  list  element, implemented with Config::Model::ListId. Each item can be
           another node or a leaf.

       •   A collection of identified items: a hash element, implemented with Config::Model::HashId.  Each  item
           can be another node or a leaf.

</pre><h4><b>Configuration</b> <b>class</b> <b>declaration</b></h4><pre>
       A class declaration is made of the following parameters:

       <b>name</b>
           Mandatory  "string"  parameter.  This  config  class  name  can  be used by a node element in another
           configuration class.

       <b>class_description</b>
           Optional "string" parameter. This description is used while generating user interfaces.

       <b>class</b>
           Optional  "string"   to   specify   a   Perl   class   to   override   the   default   implementation
           (Config::Model::Node).  This Perl Class <b>must</b> inherit Config::Model::Node. Use with care.

       <b>element</b>
           Mandatory "list ref" of elements of the configuration class :

             element =&gt; [ foo =&gt; { type = 'leaf', ... },
                          bar =&gt; { type = 'leaf', ... }
                        ]

           Element names can be grouped to save typing:

             element =&gt; [ [qw/foo bar/] =&gt; { type = 'leaf', ... } ]

           See below for details on element declaration.

       <b>gist</b>
           String used to construct a summary of the content of a node. This parameter is used by user interface
           to  show  users the gist of the content of this node. This parameter has no other effect. This string
           may contain element values in the form ""{foo} or {bar}"". When constructing  the  gist,  "{foo}"  is
           replaced by the value of element "foo". Likewise for "{bar}".

       <b>level</b>
           Optional "list ref" of the elements whose level are different from default value ("normal"). Possible
           values are "important", "normal" or "hidden".

           The  level  is  used  to  set  how  configuration  data  is  presented  to the user in browsing mode.
           "Important" elements are shown to the user no matter what. "hidden" elements are explained  with  the
           <u>warp</u> notion.

             level  =&gt; [ [qw/X Y/] =&gt; 'important' ]

       <b>status</b>
           Optional  "list  ref"  of  the  elements  whose status are different from default value ("standard").
           Possible values are "obsolete", "deprecated" or "standard".

           Using a deprecated element issues a warning. Using an  obsolete  element  raises  an  exception  (See
           Config::Model::Exception.

             status  =&gt; [ [qw/X Y/] =&gt; 'obsolete' ]

       <b>description</b>
           Optional  "list  ref"  of  element  summaries.  These  summaries  may  be  used  when generating user
           interfaces.

       <b>description</b>
           Optional "list ref" of element descriptions. These descriptions may  be  used  when  generating  user
           interfaces.

       <b>rw_config</b>
       <b>config_dir</b>
           Parameters used to load on demand configuration data.  See Config::Model::BackendMgr for details.

       <b>accept</b>
           Optional  list  of  criteria  (i.e.  a regular expression to match ) to accept unknown elements. Each
           criteria has a list of specification that enable "Config::Model" to create a model  snippet  for  the
           unknown element.

           Example:

            accept =&gt; [
               'list.*' =&gt; {
                   type  =&gt; 'list',
                   cargo =&gt; {
                       type       =&gt; 'leaf',
                       value_type =&gt; 'string',
                   },
               },
               'str.*' =&gt; {
                   type       =&gt; 'leaf',
                   value_type =&gt; 'uniline'
               },
             ]

           All "element" parameters can be used in specifying accepted elements.

           If  Text::Levenshtein::Damerau  is installed, a warning is issued if an accepted element is too close
           to an existing element.

           The parameter "accept_after" to specify where to insert the accepted element.  This does  not  change
           much the behavior of the tree, but helps generate a more usable user interface.

           Example:

            element =&gt; [
               'Bug' =&gt; { type =&gt; 'leaf', value_type =&gt; 'uniline' } ,
            ]
            accept =&gt; [
               'Bug-.*' =&gt;  {
                    value_type =&gt; 'uniline',
                    type =&gt; 'leaf'
                    accept_after =&gt; 'Bug' ,
               }
            ]

           The model snippet above ensures that "Bug-Debian" is shown right after "bug".

</pre><h4><b>Element</b> <b>declaration</b></h4><pre>
   <b>Element</b> <b>type</b>
       Each element is declared with a list ref that contains all necessary information:

         element =&gt; [
                      foo =&gt; { ... }
                    ]

       This most important information from this hash ref is the mandatory <b>type</b> parameter. The <u>type</u> type can be:

       "node"  The  element  is  a  node  of  a  tree  instantiated  from  a  configuration class (declared with
               "create_config_class( ... )" in Config::Model).  See "Node element".

       "warped_node"
               The element is a node whose properties  (mostly  "config_class_name")  can  be  changed  (warped)
               according  to  the  values  of  one  or  more  leaf  elements  in  the  configuration  tree.  See
               Config::Model::WarpedNode for details.

       "leaf"  The element is a scalar value. See "Leaf element"

       "hash"  The element is a collection of nodes or values (default). Each  element  of  this  collection  is
               identified  by  a  string (Just like a regular hash, except that you can set up constraint of the
               keys).  See "Hash element"

       "list"  The element is a collection of nodes or values (default). Each  element  of  this  collection  is
               identified  by  an integer (Just like a regular perl array, except that you can set up constraint
               of the keys).  See "List element"

       "check_list"
               The element is a collection of values which are unique in the check_list. See CheckList.

       "class" Override the default class for leaf, list and  hash  elements.  The  override  class  be  inherit
               Config::Model::Value   for   leaf   element,   Config::Model::HashId   for   hash   element   and
               Config::Model::ListId for list element.

   <b>Node</b> <b>element</b>
       When declaring a "node" element, you must also provide a "config_class_name" parameter. For instance:

        $model -&gt;create_config_class
          (
          name =&gt; "ClassWithOneNode",
          element =&gt; [
                       the_node =&gt; {
                                     type =&gt; 'node',
                                     config_class_name =&gt; 'AnotherClass',
                                   },
                     ]
          ) ;

   <b>Leaf</b> <b>element</b>
       When declaring a "leaf" element, you must also provide a "value_type" parameter. See Config::Model::Value
       for more details.

   <b>Hash</b> <b>element</b>
       When declaring a "hash" element, you must also provide a "index_type" parameter.

       You can also provide a "cargo_type" parameter set to "node" or "leaf" (default).

       See Config::Model::HashId and Config::Model::AnyId for more details.

   <b>List</b> <b>element</b>
       You can also provide a "cargo_type" parameter set to "node" or "leaf" (default).

       See Config::Model::ListId and Config::Model::AnyId for more details.

</pre><h4><b>Constructor</b></h4><pre>
       The "new" constructor accepts the following parameters:

       config_file
           Specify configuration file to be used by backend. This parameter may override a file declared in  the
           model. Note that this parameter is not propagated in children nodes.

</pre><h4><b>Introspection</b> <b>methods</b></h4><pre>
   <b>name</b>
       Returns the location of the node, or its config class name (for root node).

   <b>get_type</b>
       Returns "node".

   <b>config_model</b>
       Returns the <b>entire</b> configuration model (Config::Model object).

   <b>model</b>
       Returns the configuration model of this node (data structure).

   <b>config_class_name</b>
       Returns the configuration class name of this node.

   <b>instance</b>
       Returns the instance object containing this node. Inherited from Config::Model::AnyThing

   <b>has_element</b>
       Arguments: "( name =&gt; element_name, [ type =&gt; searched_type ],  [ autoadd =&gt; 1 ] )"

       Returns 1 if the class model has the element declared.

       Returns  1  as  well  if "autoadd" is 1 (i.e. by default) and the element name is matched by the optional
       "accept" model parameter.

       If "type" is specified, the element name must also match the type.

   <b>find_element</b>
       Parameters: "( element_name , [ case =&gt; any ])"

       Returns $name if the class model has the element declared or if  the  element  name  is  matched  by  the
       optional "accept" parameter.

       If  "case"  is  set  to  any, "has_element" returns the element name who match the passed name in a case-
       insensitive manner.

       Returns empty if no matching element is found.

   <b>model_searcher</b>
       Returns an object dedicated to search an element in the configuration model.

       This method returns a Config::Model::SearchElement object. See Config::Model::SearchElement  for  details
       on how to handle a search.

       This method is inherited from Config::Model::AnyThing.

   <b>element_model</b>
       Parameters: "( element_name )"

       Returns model of the element.

   <b>element_type</b>
       Parameters: "( element_name )"

       Returns  the  type  (e.g. leaf, hash, list, checklist or node) of the element. Also returns the type of a
       potentially accepted element.  Dies if the element is not known or cannot be accepted.

   <b>element_name</b>
       Returns the element name that contain this object. Inherited from Config::Model::AnyThing

   <b>index_value</b>
       See "<b>index_value()</b>" in Config::Model::AnyThing

   <b>parent</b>
       See "parent" in Config::Model::AnyThing

   <b>root</b>
       See "root" in Config::Model::AnyThing

   <b>location</b>
       See "location" in Config::Model::AnyThing

   <b>backend_support_annotation</b>
       Returns 1 if at least one of the backends attached to self or a parent node support  to  read  and  write
       annotations (aka comments) in the configuration file.

</pre><h4><b>Element</b> <b>property</b> <b>management</b></h4><pre>
   <b>get_element_names</b>
       Return all available element names, including the element that were accepted.

       Optional parameters are:

       •   <b>all</b>:  Boolean.  When  set  return  all  element names, even the hidden ones and does not trigger warp
           mechanism. Defaults to 0. This option should be  set  to  1  when  this  method  is  needed  to  read
           configuration data from a backend.

       •   <b>type</b>:  Returns  only  element  of requested type (e.g. "list", "hash", "leaf",...). By default return
           elements of any type.

       •   <b>cargo_type</b>: Returns only hash or list elements that  contain  the  requested  cargo  type.   E.g.  if
           "get_element_names"  is  called with "cargo_type =&gt; 'leaf'", then "get_element_names" returns hash or
           list elements that contain a leaf object.

       •   <b>check</b>: "yes", "no" or "skip"

       "type" and "cargo_type" parameters  can  be  specified  together.  In  this  case,  this  method  returns
       parameters  that  satisfy  <b>both</b>  conditions. I.e. with "type =&gt;'hash', cargo_type =&gt; 'leaf'", this method
       returns only hash elements that contain leaf objects.

       Returns a list in array context, and a string (e.g. "join(' ',@array)") in scalar context.

   <b>children</b>
       Like "get_element_names" without parameters. Returns the list of elements. This method is polymorphic for
       all non-leaf objects of the configuration tree.

   <b>next_element</b>
       This method provides a way to iterate through the elements of a node.   Mandatory  parameter  is  "name".
       Optional parameter: "status".

       Returns  the  next  element  name  for  status  (default  "normal").  Returns undef if no next element is
       available.

   <b>previous_element</b>
       Parameters: "( name =&gt; element_name )"

       This method provides a way to iterate through the elements of a node.

       Returns the previous element name. Returns undef if no previous element is available.

   <b>get_element_property</b>
       Parameters: "( element =&gt; ..., property =&gt; ... )"

       Retrieve a property of an element.

       I.e. for a model :

         status     =&gt; [ X =&gt; 'deprecated' ]
         element    =&gt; [ X =&gt; { ... } ]

       This call returns "deprecated":

         $node-&gt;get_element_property ( element =&gt; 'X', property =&gt; 'status' )

   <b>set_element_property</b>
       Parameters: "( element =&gt; ..., property =&gt; ... )"

       Set a property of an element.

   <b>reset_element_property</b>
       Parameters: "( element =&gt; ... )"

       Reset a property of an element according to the original model.

</pre><h4><b>Information</b> <b>management</b></h4><pre>
   <b>fetch_element</b>
       Arguments: "( name =&gt; .. , [ check =&gt; ..], [ autoadd =&gt; 1 ] )"

       Fetch and returns an element from a node if the class model has the element declared.

       Also fetch and returns an element from a node if "autoadd" is 1 (i.e. by default) and the element name is
       matched by the optional "accept" model parameter.

       "check" can be set to "yes", "no" or "skip".  When "check" is "no" or "skip", this method returns "undef"
       when the element is unknown, or 0 if the element is not available (hidden).

       By default, "accepted" elements are automatically created. Set "autoadd" to 0 when this behavior  is  not
       wanted.

   <b>fetch_element_value</b>
       Parameters: "( name =&gt; ... [ check =&gt; ...] )"

       Fetch and returns the <u>value</u> of a leaf element from a node.

   <b>fetch_gist</b>
       Return the gist of the node. See description of "gist" parameter above.

   <b>store_element_value</b>
       Parameters: "( name, value )"

       Store a <u>value</u> in a leaf element from a node.

       Can be invoked with named parameters (name, value, check). E.g.

        ( name =&gt; 'foo', value =&gt; 'bar', check =&gt; 'skip' )

   <b>is_element_available</b>
       Parameters: "( name =&gt; ...,  )"

       Returns 1 if the element "name" is available and if the element is not "hidden". Returns 0 otherwise.

       As a syntactic sugar, this method can be called with only one parameter:

          is_element_available( 'element_name' ) ;

   <b>accept_element</b>
       Parameters: "( name )"

       Checks  and returns the appropriate model of an acceptable element (i.e. declared as a model "element" or
       part of an "accept" declaration).  Returns undef if the element cannot be accepted.

   <b>accept_regexp</b>
       Parameters: "( name )"

       Returns the list of regular expressions used to check for acceptable parameters.  Useful for diagnostics.

   <b>element_exists</b>
       Parameters: "( element_name )"

       Returns 1 if the element is known in the model.

   <b>is_element_defined</b>
       Parameters: "( element_name )"

       Returns 1 if the element is defined.

   <b>grab</b>
       See "grab"" in Config::Model::Role::Grab.

   <b>grab_value</b>
       See "grab_value"" in Config::Model::Role::Grab.

   <b>grab_root</b>
       See "grab_root" in Config::Model::Role::Grab.

   <b>get</b>
       Parameters: "( path =&gt; ..., mode =&gt; ... ,  check =&gt; ... , get_obj =&gt; 1|0, autoadd =&gt; 1|0)"

       Get a value from a directory like path. If "get_obj" is  1,  "get"  returns  a  leaf  object  instead  of
       returning its value.

   <b>set</b>
       Parameters: "( path  , value)"

       Set a value from a directory like path.

</pre><h4><b>Validation</b></h4><pre>
   <b>deep_check</b>
       Scan  the tree and deep check on all elements that support this. Currently only hash or list element have
       this feature.

</pre><h4><b>data</b> <b>modification</b></h4><pre>
   <b>migrate</b>
       Force a read of the configuration and perform all changes regarding deprecated elements or values. Return
       1 if data needs to be saved.

   <b>apply_fixes</b>
       Scan the tree from this  node  and  apply  fixes  that  are  attached  to  warning  specifications.   See
       "warn_if_match" or "warn_unless_match" in "" in Config::Model::Value. Return $self since v2.151.

   <b>load</b>
       Parameters: "( steps =&gt; string [ ... ])"

       Load configuration data from the string into the node and its siblings.

       This string follows the syntax defined in Config::Model::Loader.  See "load" in Config::Model::Loader for
       details on parameters.

       This method can also be called with a single parameter:

         $node-&gt;load("some data:to be=loaded");

   <b>load_data</b>
       Parameters: "( data =&gt; hash_ref, [ check =&gt; $check, ...  ])"

       Load  configuration  data with a hash ref. The hash ref key must match the available elements of the node
       (or accepted element). The hash ref structure must match the structure of the configuration model.

       Use "check =&gt; skip" to make data loading more tolerant: bad data are discarded.

       "load_data" can be called with a single hash ref parameter.

       Returns 1 if some data were saved (instead of skipped).

   <b>needs_save</b>
       return 1 if one of the elements of the node's sub-tree has been modified.

</pre><h4><b>Serialization</b></h4><pre>
   <b>dump_tree</b>
       Dumps the configuration  data  of  the  node  and  its  siblings  into  a  string.   See  "dump_tree"  in
       Config::Model::Dumper for parameter details.

       This  string  follows the syntax defined in Config::Model::Loader. The string produced by "dump_tree" can
       be passed to "load".

   <b>dump_annotations_as_pod</b>
       Dumps  the  configuration  annotations  of  the   node   and   its   siblings   into   a   string.    See
       "dump_annotations_as_pod" in Config::Model::Dumper for parameter details.

   <b>describe</b>
       Parameters: "( [ element =&gt; ... ] )"

       Provides a description of the node elements or of one element.

   <b>report</b>
       Provides a text report on the content of the configuration below this node.

   <b>audit</b>
       Provides  a  text  audit on the content of the configuration below this node. This audit shows only value
       different from their default value.

   <b>copy_from</b>
       Parameters: "( from =&gt; another_node_object, [ check =&gt; ... ] )"

       Copy configuration data from another node into this node and its siblings. The copy  can  be  made  in  a
       <u>tolerant</u>  mode  where  invalid  data  is discarded with "check =&gt; skip". This method can be called with a
       single argument: copy_from($another_node)

</pre><h4><b>Help</b> <b>management</b></h4><pre>
   <b>get_help</b>
       Parameters: "( [ [ description | summary ] =&gt; element_name ] )"

       If called without element, returns the description of the class (Stored in "class_description"  attribute
       of a node declaration).

       If called with an element name, returns the description of the element (Stored in "description" attribute
       of a node declaration).

       If called with 2 argument, either return the "summary" or the "description" of the element.

       Returns an empty string if no description was found.

   <b>get_info</b>
       Returns  a  list  of  information  related  to  the node. See "get_info" in Config::Model::Value for more
       details.

   <b>tree_searcher</b>
       Parameters: "( type =&gt; ... )"

       Returns an object able to search the configuration tree.  Parameters are :

       type
           Where to perform the search. It can be "element", "value", "key", "summary", "description", "help" or
           "all".

       Then, "search" method must then be called on the object returned by "tree_searcher".

       Returns a Config::Model::TreeSearcher object.

   <b>Lazy</b> <b>load</b> <b>of</b> <b>node</b> <b>data</b>
       As  configuration  model  are  getting  bigger,  the   load   time   of   a   tree   gets   longer.   The
       Config::Model::BackendMgr class provides a way to load the configuration information only when needed.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont, (ddumont at cpan dot org)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Config::Model,        Config::Model::Instance,        Config::Model::HashId,       Config::Model::ListId,
       Config::Model::CheckList, Config::Model::WarpedNode, Config::Model::Value

</pre><h4><b>AUTHOR</b></h4><pre>
       Dominique Dumont

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is Copyright (c) 2005-2022 by Dominique Dumont.

       This is free software, licensed under:

         The GNU Lesser General Public License, Version 2.1, February 1999

perl v5.40.0                                       2024-11-30                           <u>Config::Model::<a href="../man3pm/Node.3pm.html">Node</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>