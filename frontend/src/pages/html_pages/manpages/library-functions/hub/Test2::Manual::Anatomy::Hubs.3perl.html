<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test2::Manual::Anatomy::Hubs - Internals documentation for the hub stack, and hubs.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/perl-doc">perl-doc_5.40.1-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test2::Manual::Anatomy::Hubs - Internals documentation for the hub stack, and hubs.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This document describes the hub stack, and the hubs it contains. It explains why we have a stack, and
       when to add/remove hubs from it.

</pre><h4><b>WHAT</b> <b>IS</b> <b>A</b> <b>HUB?</b></h4><pre>
       Test2 is an event system, tools generate events, those events are then processed to modify the testing
       state (number of tests, number of failures, etc). The hub is responsible for receiving and processing
       events to record the change in state. All events should eventually reach a destination hub.

       The base hub is Test2::Hub. All hub classes should inherit from the base hub class. The base hub class
       provides several hooks that allow you to monitor or modify events. Hubs are also responsible for
       forwarding events to the output formatter.

</pre><h4><b>WHY</b> <b>DO</b> <b>WE</b> <b>HAVE</b> <b>A</b> <b>HUB</b> <b>STACK?</b></h4><pre>
       There are cases where it makes sense to have more than one hub:

       subtests
           In   Test2  subtests  are  implemented  using  the  hub  stack.  When  you  start  a  subtest  a  new
           Test2::Hub::Subtest instance is created and pushed to the stack. Once  this  is  done  all  calls  to
           "Test2::API::context"  will  find  the  new  hub  and send all events to it. When the subtest tool is
           complete it will remove the new hub, and send a final subtest event to the parent hub.

       testing your test tools
           Test2::API::intercept() is implemented using the hub stack. The Test2::API::intercept() function will
           add an Test2::Hub::Interceptor instance to the stack, any calls to  <b>Test2::API::context()</b>  will  find
           the new hub, and send it all events. The intercept hub is special in that is has no connection to the
           parent hub, and usually does not have a formatter.

</pre><h4><b>WHEN</b> <b>SHOULD</b> <b>I</b> <b>ADD</b> <b>A</b> <b>HUB</b> <b>TO</b> <b>THE</b> <b>STACK?</b></h4><pre>
       Any  time  you  want  to  intercept  or  block events from effecting the test state.  Adding a new hub is
       essentially a way to create a sandbox where you have absolute control over what events do. Adding  a  new
       hub insures that the main test state will not be effected.

</pre><h4><b>WHERE</b> <b>IS</b> <b>THE</b> <b>STACK?</b></h4><pre>
       The   stack   is   an  instance  of  Test2::API::Stack.  You  can  access  the  global  hub  stack  using
       "Test2::API::test2_stack".

</pre><h4><b>WHAT</b> <b>ABOUT</b> <b>THE</b> <b>ROOT</b> <b>HUB?</b></h4><pre>
       The root hub is created automatically as needed. A call to "Test2::API::test2_stack-&gt;top()"  will  create
       the root hub if it does not already exist.

</pre><h4><b>HOW</b> <b>DO</b> <b>HUBS</b> <b>HANDLE</b> <b>IPC?</b></h4><pre>
       If  the  IPC  system (Test2::IPC) was not loaded, then IPC is not handled at all. Forking or creating new
       threads without the IPC system can cause unexpected problems.

       All hubs track the PID and Thread ID that was current when they were created.  If an event is sent  to  a
       hub  in  a  new process/thread the hub will detect this and try to forward the event along to the correct
       process/thread. This is accomplished using the IPC system.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Test2::Manual - Primary index of the manual.

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Test2-Manual can be found at <u>https://github.com/Test-More/Test2-Suite/</u>.

</pre><h4><b>MAINTAINERS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2018 Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

       See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-07-03                <u>Test2::Manual::Anatomy::<a href="../man3perl/Hubs.3perl.html">Hubs</a></u>(3perl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>