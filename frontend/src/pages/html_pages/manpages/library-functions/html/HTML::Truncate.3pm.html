<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML::Truncate - (beta software) truncate HTML by percentage or character count while preserving</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libhtml-truncate-perl">libhtml-truncate-perl_0.20-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       HTML::Truncate - (beta software) truncate HTML by percentage or character count while preserving
       well-formedness.

</pre><h4><b>VERSION</b></h4><pre>
       0.20

</pre><h4><b>ABSTRACT</b></h4><pre>
       When working with text it is common to want to truncate strings to make them fit a desired context. E.g.,
       you might have a menu that is only 100px wide and prefer text doesn't wrap so you'd truncate it around
       15-30 characters, depending on preference and typeface size. This is trivial with plain text using substr
       but with HTML it is somewhat difficult because whitespace has fluid significance and open tags that are
       not properly closed destroy well-formedness and can wreck an entire layout.

       HTML::Truncate attempts to account for those two problems by padding truncation for spacing and entities
       and closing any tags that remain open at the point of truncation.

</pre><h4><b>SYNOPSIS</b></h4><pre>
        use strict;
        use HTML::Truncate;

        my $html = '&lt;p&gt;&lt;i&gt;We&lt;/i&gt; have to test &lt;b&gt;something&lt;/b&gt;.&lt;/p&gt;';
        my $readmore = '... &lt;a href="/full-article"&gt;[readmore]&lt;/a&gt;';

        my $html_truncate = HTML::Truncate-&gt;new();
        $html_truncate-&gt;<a href="../man20/chars.20.html">chars</a>(20);
        $html_truncate-&gt;ellipsis($readmore);
        print $html_truncate-&gt;truncate($html);

        # or

        use Encode;
        my $ht = HTML::Truncate-&gt;new( utf8_mode =&gt; 1,
                                      chars =&gt; 1_000,
                                     );
        print Encode::encode_utf8( $ht-&gt;truncate($html) );

</pre><h4><b>XHTML</b></h4><pre>
       This module is designed to work with XHTML-style nested tags. More below.

</pre><h4><b>WHITESPACE</b> <b>AND</b> <b>ENTITIES</b></h4><pre>
       Repeated natural whitespace (i.e., "\s+" and not " &amp;nbsp; ") in HTML -- with rare exception (pre tags or
       user defined styles) -- is not meaningful. Therefore it is normalized when truncating. Entities are also
       normalized. The following is only counted 14 chars long.

         \n&lt;p&gt;\nthis     is   &amp;#8216;text&amp;#8217;\n\n&lt;/p&gt;
         ^^^^^^^12345----678--9------01234------^^^^^^^^

</pre><h4><b>METHODS</b></h4><pre>
       <b>new</b> Can take all the methods as hash style args. "percent" and "chars" are incompatible so don't use them
           both. Whichever is set most recently will erase the other.

            my $ht = HTML::Truncate-&gt;new(utf8_mode =&gt; 1,
                                         chars =&gt; 500, # default is 100
                                         );

       <b>utf8_mode</b>
           Set/get,  true/false. If "utf8_mode" is set, <a href="../man1/utf8_mode.1.html">utf8_mode</a>(1) is also set in the underlying HTML::Parser,
           entities will be transformed with decode and the default ellipsis will be a literal ellipsis and  not
           the default of "&amp;#8230;".

       <b>chars</b>
           Set/get. The number of characters remaining after truncation, <b>excluding</b> the "ellipsis".

           Entities are counted as single characters. E.g., "&amp;copy;" is one character for truncation counts.

           Default is "100." Side-effect: clears any "percent" that has been set.

       <b>percent</b>
           Set/get.  A  percentage  to  keep  while  truncating  the  rest.  For  a  document  of  1,000  chars,
           percent('15%') and <a href="../man150/chars.150.html">chars</a>(150) would be equivalent. The actual amount of character  that  the  percent
           represents cannot be known until the given HTML is parsed.

           Side-effect: clears any "chars" that has been set.

       <b>ellipsis</b>
           Set/get. Ellipsis in this case means --

               The omission of a word or phrase necessary for a complete
               syntactical construction but not necessary for understanding.
                                    <a href="http://www.answers.com/topic/ellipsis">http://www.answers.com/topic/ellipsis</a>

           What  it will probably mean in most real applications is "read more."  The default is "&amp;#8230;" which
           if the utf8 flag is true will render as a literal ellipsis, "<a href="../man8230/chr.8230.html">chr</a>(8230)".

           The reason the default is "&amp;#8230;" and not "..." is this is meant for use in HTML environments,  not
           plain text, and "..." (dot-dot-dot) is not typographically correct or equivalent to a real horizontal
           ellipsis character.

       <b>truncate</b>
           It returns the truncated XHTML if asked for a return value.

            my $truncated = $ht-&gt;truncate($html);

           It will truncate the string in place if no return value is expected (wantarray is not defined).

              $ht-&gt;truncate($html);
              print $html;


           Also can be called with inline arguments-
              print $ht-&gt;truncate( $html,
                                   $chars_or_percent,
                                   $ellipsis );

           No  arguments  are strictly required. Without HTML to operate upon it returns undef. The two optional
           arguments may be preset with the methods "chars" (or "percent") and "ellipsis".

           Valid nesting of tags is required (alla XHTML). Therefore some old HTML habits  like  &lt;p&gt;  without  a
           &lt;/p&gt; are not supported and may cause a fatal error. See "repair" for help with badly formed HTML.

           Certain tags are omitted by default from the truncated output.

           •   Skipped tags

               These will not be included in truncated output by default.

                  &lt;head&gt;...&lt;/head&gt; &lt;script&gt;...&lt;/script&gt; &lt;form&gt;...&lt;/form&gt;
                  &lt;iframe&gt;&lt;/iframe&gt; &lt;title&gt;...&lt;/title&gt; &lt;style&gt;...&lt;/style&gt;
                  &lt;base/&gt; &lt;link/&gt; &lt;meta/&gt;

           •   Tags allowed to self-close

               See emptyElement in HTML::Tagset.

       <b>add_skip_tags(</b> <b>qw(</b> <b>tag</b> <b>list</b> <b>)</b> <b>)</b>
           Put  one  or  more new tags into the list of those to be omitted from truncated output. An example of
           when you  might  like  to  use  this  is  if  you're  thumb-nailing  articles  and  they  start  with
           "&lt;h1&gt;title&lt;/h1&gt;"  or  such  before the article body. The heading level would be absurd with a list of

           excerpts so you could drop it completely this way--
            $ht-&gt;add_skip_tags( 'h1' );

       <b>dont_skip_tags(</b> <b>qw(</b> <b>tag</b> <b>list</b> <b>)</b> <b>)</b>
           Takes tags out of the current list to be omitted from truncated output.

       <b>repair</b>
           Set/get, true/false. If true, will attempt to repair unclosed HTML tags by adding close-tags as  late
           as possible (eg. "&lt;i&gt;&lt;b&gt;foobar&lt;/i&gt;" becomes "&lt;i&gt;&lt;b&gt;foobar&lt;/b&gt;&lt;/i&gt;"). Unmatched close tags are dropped
           ("foobar&lt;/b&gt;" becomes "foobar").

       <b>on_space</b>
           This  will  make the truncation back up to the first space it finds so it doesn't truncate in the the
           middle of a word. "on_space" runs before "cleanly" if both are set.

       <b>cleanly</b>
           Set/get -- a regular expression. This is on by default and the default cleaning regular expression is
           "cleanly(qr/[\s[:punct:]]+\z/)".  It  will  make  the  truncation  strip  any  trailing  spacing  and
           punctuation  so  you  don't  get  things  like  "The  End...."  or "What? ..." You can cancel it with
           "$ht-&gt;cleanly(undef)" or provide your own regular expression.

</pre><h4><b>COOKBOOK</b> <b>(well,</b> <b>a</b> <b>recipe)</b></h4><pre>
   <b>Template</b> <b>Toolkit</b> <b>filter</b>
       For excerpting HTML in your Templates. Note the "add_skip_tags" which is set to drop any images from  the
       truncated output.

        use Template;
        use HTML::Truncate;

        my %config =
           (
            FILTERS =&gt; {
                truncate_html =&gt; [ \&amp;truncate_html_filter_factory, 1 ],
            },
            );

        my $tt = Template-&gt;new(\%config) or die $Template::ERROR;

        # ... etc ...

        sub truncate_html_filter_factory {
            my ( $context, $len, $ellipsis ) = @_;
            $len = 32 unless $len;
            $ellipsis = <a href="../man8230/chr.8230.html">chr</a>(8230) unless defined $ellipsis;
            my $ht = HTML::Truncate-&gt;new();
            $ht-&gt;add_skip_tags(qw( img ));
            return sub {
                my $html = shift || return '';
                return $ht-&gt;truncate( $html, $len, $ellipsis );
            }
        }

       Then in your templates you can do things like this:

        [% FOR item IN search_results %]
          &lt;div class="searchResult"&gt;
            &lt;a href="[% item.uri %]"&gt;[% item.title %]&lt;/a&gt;&lt;br /&gt;
            [% item.body | <a href="../man200/truncate_html.200.html">truncate_html</a>(200) %]
          &lt;/div&gt;
        [% END %]

       See also Template::Filters.

</pre><h4><b>AUTHOR</b></h4><pre>
       Ashley Pond V, "&lt;<a href="mailto:ashley@cpan.org">ashley@cpan.org</a>&gt;".

</pre><h4><b>LIMITATIONS</b></h4><pre>
       There may be places where this will break down right now. I'll pad out possible edge cases as I find them
       or they are sent to me via the CPAN bug ticket system.

   <b>This</b> <b>is</b> <b>not</b> <b>an</b> <b>HTML</b> <b>filter</b>
       Although  this  happens  to  do  some crude HTML filtering to achieve its end, it is not a fully featured
       filter. If you are looking for one, check out HTML::Scrubber and HTML::Sanitizer.

</pre><h4><b>BUGS,</b> <b>FEEDBACK,</b> <b>PATCHES</b></h4><pre>
       Please report any bugs or  feature  requests  to  "<a href="mailto:bug-html-truncate@rt.cpan.org">bug-html-truncate@rt.cpan.org</a>",  or  through  the  web
       interface  at  &lt;<a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=HTML-Truncate&gt;. I will get the ticket, and
       then you'll automatically be notified of progress as I make changes.

   <b>TO</b> <b>DO</b>
       Write a couple more tests (percent and skip stuff) then take out beta notice. Try to make the  5.6  stuff
       work without decode...? Try a "drop_tags" method?

       Write an XML::LibXML based version to load when possible...? Or make that part of XHTML::Util?

</pre><h4><b>THANKS</b> <b>TO</b></h4><pre>
       Kevin Riggle for the "repair" functionality; patch, Pod, and tests.

       Lorenzo Iannuzzi for the "on_space" functionality.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       HTML::Entities, HTML::TokeParser, the "truncate" filter in Template, and Text::Truncate.

       HTML::Scrubber and HTML::Sanitizer.

</pre><h4><b>COPYRIGHT</b> <b>&amp;</b> <b>LICENSE</b></h4><pre>
       Copyright (©) 2005-2009 Ashley Pond V.

       This  program is free software; you can redistribute it or modify it or both under the same terms as Perl
       itself.

</pre><h4><b>DISCLAIMER</b> <b>OF</b> <b>WARRANTY</b></h4><pre>
       Because this software is licensed free of charge, there is no warranty for the software,  to  the  extent
       permitted  by  applicable  law.  Except  when  otherwise stated in writing the copyright holders or other
       parties provide the software "as  is"  without  warranty  of  any  kind,  either  expressed  or  implied,
       including,  but  not  limited  to, the implied warranties of merchantability and fitness for a particular
       purpose. The entire risk as to the quality and performance of  the  software  is  with  you.  Should  the
       software prove defective, you assume the cost of all necessary servicing, repair, or correction.

       In  no  event unless required by applicable law or agreed to in writing will any copyright holder, or any
       other party who may modify and/or redistribute the software as permitted by the above licence, be  liable
       to  you  for damages, including any general, special, incidental, or consequential damages arising out of
       the use or inability to use the software (including but not  limited  to  loss  of  data  or  data  being
       rendered  inaccurate  or losses sustained by you or third parties or a failure of the software to operate
       with any other software), even if such holder or other party has been advised of the possibility of  such
       damages.

perl v5.34.0                                       2022-06-14                                <u>HTML::<a href="../man3pm/Truncate.3pm.html">Truncate</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>