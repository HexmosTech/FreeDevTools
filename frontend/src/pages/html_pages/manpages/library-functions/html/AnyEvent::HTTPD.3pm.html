<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnyEvent::HTTPD - A simple lightweight event based web (application) server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libanyevent-httpd-perl">libanyevent-httpd-perl_0.93-6_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       AnyEvent::HTTPD - A simple lightweight event based web (application) server

</pre><h4><b>VERSION</b></h4><pre>
       Version 0.93

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use AnyEvent::HTTPD;

           my $httpd = AnyEvent::HTTPD-&gt;new (port =&gt; 9090);

           $httpd-&gt;reg_cb (
              '/' =&gt; sub {
                 my ($httpd, $req) = @_;

                 $req-&gt;respond ({ content =&gt; ['text/html',
                    "&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello World!&lt;/h1&gt;"
                    . "&lt;a href=\"/test\"&gt;another test page&lt;/a&gt;"
                    . "&lt;/body&gt;&lt;/html&gt;"
                 ]});
              },
              '/test' =&gt; sub {
                 my ($httpd, $req) = @_;

                 $req-&gt;respond ({ content =&gt; ['text/html',
                    "&lt;html&gt;&lt;body&gt;&lt;h1&gt;Test page&lt;/h1&gt;"
                    . "&lt;a href=\"/\"&gt;Back to the main page&lt;/a&gt;"
                    . "&lt;/body&gt;&lt;/html&gt;"
                 ]});
              },
           );

           $httpd-&gt;run; # making a AnyEvent condition variable would also work

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides a simple HTTPD for serving simple web application interfaces. It's completely event
       based and independend from any event loop by using the AnyEvent module.

       It's HTTP implementation is a bit hacky, so before using this module make sure it works for you and the
       expected deployment. Feel free to improve the HTTP support and send in patches!

       The documentation is currently only the source code, but next versions of this module will be better
       documented hopefully. See also the "samples/" directory in the AnyEvent::HTTPD distribution for basic
       starting points.

</pre><h4><b>FEATURES</b></h4><pre>
       •   support for GET and POST requests.

       •   support for HTTP 1.0 keep-alive.

       •   processing  of  "x-www-form-urlencoded"  and  "multipart/form-data"  ("multipart/mixed") encoded form
           parameters.

       •   support for streaming responses.

       •   with version 0.8 no more dependend on LWP for HTTP::Date.

       •   (limited) support for SSL

</pre><h4><b>METHODS</b></h4><pre>
       The AnyEvent::HTTPD class inherits directly from AnyEvent::HTTPD::HTTPServer  which  inherits  the  event
       callback interface from Object::Event.

       Event  callbacks  can be registered via the Object::Event API (see the documentation of Object::Event for
       details).

       For a list of available events see below in the <u>EVENTS</u> section.

       <b>new</b> <b>(%args)</b>
           This is the constructor for a AnyEvent::HTTPD object.  The  %args  hash  may  contain  one  of  these
           key/value pairs:

           host =&gt; $host
               The  TCP  address  of the HTTP server will listen on. Usually 0.0.0.0 (the default), for a public
               server, or 127.0.0.1 for a local server.

           port =&gt; $port
               The TCP port the HTTP server will listen on. If undefined some free port will be  used.  You  can
               get it via the "port" method.

           ssl =&gt; $tls_ctx
               If  this  option is given the server will listen for a SSL/TLS connection on the configured port.
               As $tls_ctx you can pass anything that you can pass as "tls_ctx" to an AnyEvent::Handle object.

               Example:

                  my $httpd =
                     AnyEvent::HTTPD-&gt;new (
                        port =&gt; 443,
                        ssl  =&gt; { cert_file =&gt; "/path/to/my/server_cert_and_key.pem" }
                     );

               Or:

                  my $httpd =
                     AnyEvent::HTTPD-&gt;new (
                        port =&gt; 443,
                        ssl  =&gt; AnyEvent::TLS-&gt;new (...),
                     );

           request_timeout =&gt; $seconds
               This will set the request timeout for connections.  The default value is 60 seconds.

           backlog =&gt; $int
               The backlog argument defines the maximum length the queue of pending  connections  may  grow  to.
               The  real  maximum  queue  length  will be 1.5 times more than the value specified in the backlog
               argument.

               See also "man 2 listen".

               By default will be set by AnyEvent::Socket"::tcp_server" to 128.

           connection_class =&gt; $class
               This  is  a  special  parameter  that  you  can  use  to  pass  your  own  connection  class   to
               AnyEvent::HTTPD::HTTPServer.   This  is  only  of  interest  to  you  if  you  plan  to  subclass
               AnyEvent::HTTPD::HTTPConnection.

           request_class =&gt; $class
               This is a special parameter that you can use to pass your own request class  to  AnyEvent::HTTPD.
               This is only of interest to you if you plan to subclass AnyEvent::HTTPD::Request.

           allowed_methods =&gt; $arrayref
               This  parameter  sets  the  allowed  HTTP methods for requests, defaulting to GET, HEAD and POST.
               Each request received is matched against this list, and a '501 not implemented' is returned if no
               match is found.  Requests using disallowed handlers will never trigger callbacks.

       <b>port</b>
           Returns the port number this server is bound to.

       <b>host</b>
           Returns the host/ip this server is bound to.

       <b>allowed_methods</b>
           Returns an arrayref of allowed HTTP methods, possibly as set by the allowed_methods argument  to  the
           constructor.

       <b>stop_request</b>
           When  the server walks the request URI path upwards you can stop the walk by calling this method. You
           can even stop further handling after the "request" event.

           Example:

              $httpd-&gt;reg_cb (
                 '/test' =&gt; sub {
                    my ($httpd, $req) = @_;

                    # ...

                    $httpd-&gt;stop_request; # will prevent that the callback below is called
                 },
                 '' =&gt; sub { # this one wont be called by a request to '/test'
                    my ($httpd, $req) = @_;

                    # ...
                 }
              );

       <b>run</b> This method is a simplification of the "AnyEvent" condition variable idiom. You can use it instead of
           writing:

              my $cvar = AnyEvent-&gt;condvar;
              $cvar-&gt;wait;

       <b>stop</b>
           This will stop the HTTP server and return from the "run" method <b>if</b> <b>you</b> <b>started</b> <b>the</b>  <b>server</b>  <b>via</b>  <b>that</b>
           <b>method!</b>

</pre><h4><b>EVENTS</b></h4><pre>
       Every  request  goes to a specific URL. After a (GET or POST) request is received the URL's path segments
       are walked down and for each segment a event is generated. An example:

       If the URL '/test/bla.jpg' is requestes following events will be generated:

         '/test/bla.jpg' - the event for the last segment
         '/test'         - the event for the 'test' segment
         ''              - the root event of each request

       To actually handle any request you just have to register a callback for the event  name  with  the  empty
       string.  To  handle  all  requests in the '/test' directory you have to register a callback for the event
       with the name '/test'.  Here is an example how to register an event for the example URL above:

          $httpd-&gt;reg_cb (
             '/test/bla.jpg' =&gt; sub {
                my ($httpd, $req) = @_;

                $req-&gt;respond ([200, 'ok', { 'Content-Type' =&gt; 'text/html' }, '&lt;h1&gt;Test&lt;/h1&gt;' }]);
             }
          );

       See also "stop_request" about stopping the walk of the path segments.

       The first argument to such a callback is always the AnyEvent::HTTPD object itself.  The  second  argument
       ($req) is the AnyEvent::HTTPD::Request object for this request. It can be used to get the (possible) form
       parameters for this request or the transmitted content and respond to the request.

       Along with the above mentioned events these events are also provided:

       request =&gt; $req
           Every  request  also  emits  the  "request" event, with the same arguments and semantics as the above
           mentioned path request events.  You can use this to implement your own request multiplexing. You  can
           use  "stop_request" to stop any further processing of the request as the "request" event is the first
           thing that is executed for an incoming request.

           An example of one of many possible uses:

              $httpd-&gt;reg_cb (
                 request =&gt; sub {
                    my ($httpd, $req) = @_;

                    my $url = $req-&gt;url;

                    if ($url-&gt;path =~ /\/images\/img_(\d+).jpg$/) {
                       handle_image_request ($req, $1); # your task :)

                       # stop the request from emitting further events
                       # so that the '/images/img_001.jpg' and the
                       # '/images' and '' events are NOT emitted:
                       $httpd-&gt;stop_request;
                    }
                 }
              );

       client_connected =&gt; $host, $port
       client_disconnected =&gt; $host, $port
           These events are emitted whenever a client coming from "$host:$port" connects to your  server  or  is
           disconnected from it.

</pre><h4><b>CACHING</b></h4><pre>
       Any  response  from  the  HTTP server will have "Cache-Control" set to "max-age=0" and also the "Expires"
       header set to the "Date" header. Meaning: Caching is disabled.

       You can of course set those headers yourself in the response, or remove them by setting  them  to  undef,
       but keep in mind that the default for those headers are like mentioned above.

       If you need more support here you can send me a mail or even better: a patch :)

</pre><h4><b>AUTHOR</b></h4><pre>
       Robin Redeker, "&lt;elmex at ta-sa.org&gt;"

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs or feature requests to "bug-bs-httpd at rt.cpan.org", or through the web interface
       at  &lt;<a href="http://rt.cpan.org/NoAuth/ReportBug.html">http://rt.cpan.org/NoAuth/ReportBug.html</a>?Queue=AnyEvent-HTTPD&gt;.  I will be notified, and then you'll
       automatically be notified of progress on your bug as I make changes.

</pre><h4><b>SUPPORT</b></h4><pre>
       You can find documentation for this module with the perldoc command.

           perldoc AnyEvent::HTTPD

       You can also look for information at:

       •   Git repository

           &lt;<a href="http://git.ta-sa.org/AnyEvent-HTTPD.git">http://git.ta-sa.org/AnyEvent-HTTPD.git</a>&gt;

       •   RT: CPAN's request tracker

           &lt;<a href="http://rt.cpan.org/NoAuth/Bugs.html">http://rt.cpan.org/NoAuth/Bugs.html</a>?Dist=AnyEvent-HTTPD&gt;

       •   AnnoCPAN: Annotated CPAN documentation

           &lt;<a href="http://annocpan.org/dist/AnyEvent-HTTPD">http://annocpan.org/dist/AnyEvent-HTTPD</a>&gt;

       •   CPAN Ratings

           &lt;<a href="http://cpanratings.perl.org/d/AnyEvent-HTTPD">http://cpanratings.perl.org/d/AnyEvent-HTTPD</a>&gt;

       •   Search CPAN

           &lt;<a href="http://search.cpan.org/dist/AnyEvent-HTTPD">http://search.cpan.org/dist/AnyEvent-HTTPD</a>&gt;

</pre><h4><b>ACKNOWLEDGEMENTS</b></h4><pre>
          Andrey Smirnov   - for keep-alive patches.
          Pedro Melo       - for valuable input in general and patches.
          Nicholas Harteau - patch for ';' pair separator support,
                             patch for allowed_methods support
          Chris Kastorff   - patch for making default headers removable
                             and more fault tolerant w.r.t. case.
          Mons Anderson    - Optimizing the regexes in L&lt;AnyEvent::HTTPD::HTTPConnection&gt;
                             and adding the C&lt;backlog&gt; option to L&lt;AnyEvent::HTTPD&gt;.

</pre><h4><b>COPYRIGHT</b> <b>&amp;</b> <b>LICENSE</b></h4><pre>
       Copyright 2008-2011 Robin Redeker, all rights reserved.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

perl v5.34.0                                       2022-06-05                               <u>AnyEvent::<a href="../man3pm/HTTPD.3pm.html">HTTPD</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>