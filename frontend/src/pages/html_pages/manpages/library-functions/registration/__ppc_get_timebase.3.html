<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
<b>__</b><u>ppc_get_timebase</u>(3)                       Library Functions Manual                       <b>__</b><u>ppc_get_timebase</u>(3)

</pre><h4><b>NAME</b></h4><pre>
       __ppc_get_timebase,  __ppc_get_timebase_freq  -  get the current value of the Time Base Register on Power
       architecture and its frequency.

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/platform/ppc.h&gt;</b>

       <b>uint64_t</b> <b>__ppc_get_timebase(void);</b>
       <b>uint64_t</b> <b>__ppc_get_timebase_freq(void);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>__ppc_get_timebase</b>() reads the current value of the Time Base  Register  and  returns  its  value,  while
       <b>__ppc_get_timebase_freq</b>() returns the frequency in which the Time Base Register is updated.

       The  Time  Base  Register  is  a  64-bit register provided by Power Architecture processors.  It stores a
       monotonically incremented value that is updated at a system-dependent frequency  that  may  be  different
       from the processor frequency.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>__ppc_get_timebase</b>() returns a 64-bit unsigned integer that represents the current value of the Time Base
       Register.

       <b>__ppc_get_timebase_freq</b>()  returns  a  64-bit unsigned integer that represents the frequency at which the
       Time Base Register is updated.

</pre><h4><b>STANDARDS</b></h4><pre>
       GNU.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>__ppc_get_timebase</b>()
              glibc 2.16.

       <b>__ppc_get_timebase_freq</b>()
              glibc 2.17.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The  following  program  will  calculate  the  time,  in  microseconds,  spent  between  two   calls   to
       <b>__ppc_get_timebase</b>().

   <b>Program</b> <b>source</b>

       #include &lt;<a href="file:/usr/include/inttypes.h">inttypes.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdint.h">stdint.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;sys/platform/ppc.h&gt;

       /* Maximum value of the Time Base Register: 2^60 - 1.
          Source: POWER ISA.  */
       #define MAX_TB 0xFFFFFFFFFFFFFFF

       int
       main(void)
       {
           uint64_t tb1, tb2, diff;
           uint64_t freq;

           freq = __ppc_get_timebase_freq();
           printf("Time Base frequency = %"PRIu64" Hz\n", freq);

           tb1 = __ppc_get_timebase();

           // Do some stuff...

           tb2 = __ppc_get_timebase();

           if (tb2 &gt; tb1) {
               diff = tb2 - tb1;
           } else {
               /* Treat Time Base Register overflow.  */
               diff = (MAX_TB - tb2) + tb1;
           }

           printf("Elapsed time  = %1.2f usecs\n",
                  (double) diff * 1000000 / freq);

           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/time.2.html">time</a></b>(2), <b><a href="../man3/usleep.3.html">usleep</a></b>(3)

Linux man-pages 6.9.1                              2024-06-15                              <b>__</b><u><a href="../man3/ppc_get_timebase.3.html">ppc_get_timebase</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>