<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paranoid::Debug - Trace message support for paranoid programs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libparanoid-perl">libparanoid-perl_2.10-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Paranoid::Debug - Trace message support for paranoid programs

</pre><h4><b>VERSION</b></h4><pre>
       $Id: lib/Paranoid/Debug.pm, 2.10 2022/03/08 00:01:04 acorliss Exp $

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Paranoid::Debug;

         PDEBUG        = 1;
         PDMAXINDENT   = 40;
         PDPREFIX      = sub { scalar localtime };
         pdebug("starting program", PDEBUG1);
         foo();

         # New method
         sub foo {
           my $foo = shift;
           my @bar = shift;
           my $rv;

           subPreamble(PDEBUG1, '$@', $foo, @bar);

           # Miscellaneous code...
           pdebug("someting happened!", PDEBUG2);

           # More miscellaneous code...

           subPostamble(PDEBUG1, '$', $rv);

           return $rv;
         }

         # Old method
         sub foo {
           my $foo = shift;
           my @bar = shift;
           my $rv;

           pdebug('entering w/(%s)(%s)', PDEBUG1, $foo, @bar);
           pIn();

           # Miscellaneous code...
           pdebug("someting happened!", PDEBUG2);

           # More miscellaneous code...

           pOut();
           pdebug('leaving w/rv: %s', PDEBUG1, $rv);

           return $rv;
         }

         pderror("error msg");

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The purpose of this module is to provide a useful framework to produce debugging output.  With this
       module you can assign a level of detail to pdebug statements, and they'll only be displayed to STDERR
       when PDEBUG is set to that level or higher.  This allows you to have your program produce varying levels
       of debugging output.

       Using the <b>subPreamble</b> and <b>subPostamble</b> functions at the beginning and end of each function will cause
       debugging output to be indented appropriately so you can visually see the level of recursion.

       <b>NOTE:</b> All modules within the Paranoid framework use this module.  Their debug levels range from 9 and up.
       You should use 1 - 8 for your own modules or code.  PDEBUG1 - PDEBUG8 exists for those purposes.

</pre><h4><b>IMPORT</b> <b>LISTS</b></h4><pre>
       This module exports the following symbols by default:

           PDEBUG pdebug pIn pOut subPreamble subPostamble PDEBUG1 .. PDEBUG8

       The following specialized import lists also exist:

           List        Members
           --------------------------------------------------------
           constants   PDEBUG1 PDEBUG2 PDEBUG3 PDEBUG4 PDEBUG5
                       PDEBUG6 PDEBUG7 PDEBUG8
           all         @defaults @constants
                       pderror PDPREFIX PDLEVEL1 PDLEVEL2
                       PDLEVEL3 PDLEVEL4 PDMAXINDENT

</pre><h4><b>CONSTANTS</b></h4><pre>
   <b>PDEBUG1</b> <b>..</b> <b>PDEBUG8</b>
       There are eight constants exported by default for use by developers that allow for up to eight levels of
       diagnostic output.  None of these levels are used by internal <b>Paranoid</b> code, they are reserved for use by
       third parties.

   <b>PDLEVEL1</b> <b>..</b> <b>PDLEVEL4</b>
       These constants are not intended for use by other modules, rather the exist for the internal debug levels
       used by all Paranoid::* modules.  These levels are all higher than what PDEBUG* to allow the developer to
       have as much control over their verbosity as possible, but without the Paranoid diagnostics adding
       unwanted noise.

</pre><h4><b>SUBROUTINES/METHODS</b></h4><pre>
   <b>PDEBUG</b>
       <b>PDEBUG</b> is an lvalue subroutine which is initially set to 0, but can be set to any positive integer.  The
       higher the number the more pdebug statements are printed.

   <b>PDPREFIX</b>
           PDPREFIX = sub {

               # Old default Prefix to use with debug messages looks like:
               #
               #   [PID - $dlevel] Subroutine:
               #
               my $caller      = shift;
               my $indentation = shift;
               my $oi          = $indentation;
               my $maxLevel    = PDMAXINDENT;
               my $prefix;

               # Cap indentation
               $indentation = $maxLevel if $indentation &gt; $maxLevel;

               # Construct the prefix
               $prefix = ' ' x $indentation . "[$$-$oi] $caller: ";

               return $prefix;
               };

       <b>PDPREFIX</b> is an lvalue subroutine that contains a code reference to a subroutine that returns an
       appropriate prefix for debug messages.  The default subroutine prints an indented string (indented
       according to depth on the call stack) that prints the process PID, debug level, and the current
       routine/or method that <b>pdebug</b> was called in.

   <b>PDMAXINDENT</b>
       <b>PDMAXINDENT</b> is an lvalue subroutine which is initially set to 40, but can be set to any integer.  This
       controls the max indentation of the debug messages.  Obviously, it wouldn't help to indent a debug
       message by a hundred columns on an eighty column terminal just because your stack depth gets that deep.

   <b>pderror</b>
         pderror("error msg");

       This function prints the passed message to STDERR.

   <b>pdebug</b>
         pdebug("debug statement", PDEBUG3);
         pdebug("debug statement: %s %2d %.3f", PDEBUG3, @values);

       This function is called with one mandatory argument (the string to be printed), and an optional integer.
       This integer is compared against <b>PDEBUG</b> and the debug statement is printed if PDEBUG is equal to it or
       higher.

       The return value is always the debug statement itself.  This allows for a single statement to produce
       debug output and set variables.  For instance:

           Paranoid::ERROR = pdebug("Something bad happened!", PDEBUG3);

       As an added benefit you can pass a printf template along with their values and they will be handled
       appropriately.  String values passed as <b>undef</b> will be replaced with the literal string "<u>undef</u>".

       One deviation from printf allows you to specify a placeholder which can gobble up any number of extra
       arguments while still performing the "<u>undef</u>" substitution:

           pdebug("I was passed these values: %s", 3, @values);

   <b>pIn</b>
         pIn();

       This function causes all subsequent pdebug messages to be indented by one additional space.

   <b>pOut</b>
         pOut();

       This function causes all subsequent pdebug messages to be indented by one less space.

   <b>subPreamble</b>
           subPreamble(PDEBUG1, '$@', @_);

       This function combines the functionality of pdebug and pIn to mark the entry point into a given function.
       It also provides a convenient summarization function to prevent logging overly long arguments to
       diagnostic output.

       The second argument to this function would be essentially whatever a valid subroutine prototype would be
       for your function (see <u>Prototypes</u> in <b><a href="../man3/perlsub.3.html">perlsub</a></b>(3) for more examples).  In addition to the standard
       prototypes, we also support <b>p</b> as a prototype.  This is essentially the same as a scalar prototype, but
       instead of printing a summarized excerpt of its contents, it replaces all characters with <u>*</u> characters.
       Any argument containing sensitive information, such as passwords, etc, should use <b>p</b> instead of <b>$</b>.

       Summarization is performed in the following manner:  any scalar value (excluding references of any kind)
       that exceeds 20 characters gets truncated to 20 characters, and appended with the full number of bytes.
       Lists merely report how many elements in the array, and hashes list the number if key/value pairs in the
       hash.  All other types are passed as-is.

       Indentation is adjusted after the initial summarized message.

   <b>subPostamble</b>
           subPostamble(PDEBUG1, '$', $rv);

       This function works the same as subPreamble, but with indentation happening in reverse order.  The
       prototype should reflect the prototype of the returned value, not the function arguments.  Indentation is
       set back prior to the the summarized message is printed.

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       o   Paranoid

       o   Carp

</pre><h4><b>BUGS</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
       <b>pderror</b> (and by extension, <b>pdebug</b>) will generate errors if STDERR is closed elsewhere in the program.

</pre><h4><b>AUTHOR</b></h4><pre>
       Arthur Corliss (<a href="mailto:corliss@digitalmages.com">corliss@digitalmages.com</a>)

</pre><h4><b>LICENSE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       This  software  is  free  software.   Similar to Perl, you can redistribute it and/or modify it under the
       terms of either:

         a)     the GNU General Public License
                &lt;https://www.gnu.org/licenses/gpl-1.0.html&gt; as published by the
                Free Software Foundation &lt;<a href="http://www.fsf.org/">http://www.fsf.org/</a>&gt;; either version 1
                &lt;https://www.gnu.org/licenses/gpl-1.0.html&gt;, or any later version
                &lt;https://www.gnu.org/licenses/license-list.html#GNUGPL&gt;, or
         b)     the Artistic License 2.0
                &lt;https://opensource.org/licenses/Artistic-2.0&gt;,

       subject to the following additional term:  No trademark rights to "Paranoid" have been  or  are  conveyed
       under  any  of  the  above  licenses.  However, "Paranoid" may be used fairly to describe this unmodified
       software, in good faith, but not as a trademark.

       (c)  2005  -  2020,  Arthur  Corliss  (<a href="mailto:corliss@digitalmages.com">corliss@digitalmages.com</a>)  (tm)  2008  -   2020,   Paranoid   Inc.
       (www.paranoid.com)

perl v5.38.2                                       2024-03-07                               <u>Paranoid::<a href="../man3pm/Debug.3pm.html">Debug</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>