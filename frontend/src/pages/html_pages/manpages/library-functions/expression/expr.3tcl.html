<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>expr - Evaluate an expression</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       expr - Evaluate an expression

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>expr</b> <u>arg</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Concatenates <u>arg</u>s, separated by a space, into an expression, and evaluates that expression, returning its
       value.   The  operators  permitted  in  an  expression  include  a subset of the operators permitted in C
       expressions.  For those operators common to both Tcl and C, Tcl applies the same meaning  and  precedence
       as  the  corresponding  C  operators.   The  value  of an expression is often a numeric result, either an
       integer or a floating-point value, but may also be a non-numeric value.  For example, the expression

              <b>expr</b> 8.2 + 6

       evaluates to 14.2.  Expressions differ from C  expressions  in  the  way  that  operands  are  specified.
       Expressions  also  support  non-numeric  operands,  string comparisons, and some additional operators not
       found in C.

       When the result of expression is an integer, it is in decimal form, and when the result  is  a  floating-
       point number, it is in the form produced by the <b>%g</b> format specifier of <b>format</b>.

       At  any  point  in the expression except within double quotes or braces, <b>#</b> is the beginning of a comment, 2
       which lasts to the end of the line or the end of the expression, whichever comes first.

   <b>OPERANDS</b>
       An expression consists of a combination of operands, operators, parentheses  and  commas,  possibly  with
       whitespace  between  any  of  these elements, which is ignored.  Each operand is interpreted as a numeric
       value if at all possible.

       Each operand has one of the following forms:

              A <b>numeric</b> <b>value</b>

                     Either integer or floating-point.  The first two characters of an integer may  also  be  <b>0d</b>
                     for decimal, <b>0b</b> for binary, <b>0o</b> for octal or <b>0x</b> for hexadecimal.

                     A  floating-point number may be take any of several common decimal formats, and may use the
                     decimal point <b>.</b>, <b>e</b> or <b>E</b> for scientific notation, and the sign  characters  <b>+</b>  and  <b>-</b>.   The
                     following  are  all valid floating-point numbers:  2.1, 3., 6e4, 7.91e+16.  The strings <b>Inf</b>
                     and <b>NaN</b>, in any combination of case, are also recognized  as  floating  point  values.   An
                     operand  that  doesn't  have  a numeric interpretation must be quoted with either braces or
                     with double quotes.

                     Digits in any numeric value may be separated with one or more underscore  characters,  "<b>_</b>".
                     A  separator  may  only  appear between digits, not appear at the start of a numeric value,
                     between the leading 0 and radix specifier, or at the end of a numeric value.  Here are some
                     examples:

                            <b>expr</b> 100_000_000                   <u>100000000</u>
                            <b>expr</b> 0xffff_ffff                   <u>4294967295</u>
                            <b>format</b> 0x%x 0b1111_1110_1101_1011  <u>0xfedb</u>
                            <b>expr</b> 3_141_592_653_589e-1_2        <u>3.141592653589</u>

              A <b>boolean</b> <b>value</b>
                     Using any form understood by <b>string</b> <b>is</b> <b>boolean</b>.

              A <b>variable</b>
                     Using standard <b>$</b> notation.  The value of the variable is the value of the operand.

              A string enclosed in <b>double-quotes</b>
                     Backslash, variable, and command substitution are performed according to the rules for <b>Tcl</b>.

              A string enclosed in <b>braces</b>.
                     The operand is treated as a braced value according to the rule for braces in <b>Tcl</b>.

              A Tcl command enclosed in <b>brackets</b>
                     Command substitution is performed as according to the command substitution rule for <b>Tcl</b>.

              A function call.
                     This is mathematical function such as <b>sin($x)</b>, whose arguments have any of the above  forms
                     for  operands.  See <b>MATH</b> <b>FUNCTIONS</b> below for a discussion of how mathematical functions are
                     handled.

       Because <b>expr</b> parses and performs substitutions on values that have already been parsed and substituted by
       <b>Tcl</b>, it is usually best to enclose expressions in braces to avoid the first  round  of  substitutions  by
       <b>Tcl</b>.

       Below  are  some  examples  of simple expressions where the value of <b>a</b> is 3 and the value of <b>b</b> is 6.  The
       command on the left side of each line produces the value on the right side.

              <b>expr</b> {3.1 + $a}                    <u>6.1</u>
              <b>expr</b> {2 + "$a.$b"}                 <u>5.6</u>
              <b>expr</b> {4*[llength {6 2}]}           <u>8</u>
              <b>expr</b> {{word one} &lt; "word $a"}      <u>0</u>

   <b>OPERATORS</b>
       For operators having both a numeric mode and a string mode, the numeric mode is chosen when all  operands
       have  a numeric interpretation.  The integer interpretation of an operand is preferred over the floating-
       point interpretation.  To ensure string operations on arbitrary values it is generally a good idea to use
       <b>eq</b>, <b>ne</b>, or the <b>string</b> command instead of more versatile operators such as <b>==</b>.

       Unless otherwise specified, operators accept non-numeric operands.  The value of a boolean operation is 1
       if true, 0 otherwise.  See also <b>string</b> <b>is</b> <b>boolean</b>.  The valid operators, most of which are also available
       as commands in the <b>tcl::mathop</b> namespace (see <b><a href="../man3tcl/mathop.3tcl.html">mathop</a></b>(3tcl)), are  listed  below,  grouped  in  decreasing
       order of precedence:

       <b>-</b>  <b>+</b>  <b>~</b>  <b>!</b>          Unary  minus,  unary  plus,  bit-wise  NOT, logical NOT.  These operators may only be
                           applied to numeric operands, and bit-wise NOT may only be applied to integers.

       <b>**</b>                  Exponentiation.  Valid for numeric operands.  The maximum exponent value that Tcl can
                           handle if the first number is an integer &gt; 1 is 268435455.

       <b>*</b>  <b>/</b>  <b>%</b>             Multiply and divide, which are valid for numeric operands, and  remainder,  which  is
                           valid for integers.  The remainder, an absolute value smaller than the absolute value
                           of the divisor, has the same sign as the divisor.

                           When  applied  to integers, division and remainder can be considered to partition the
                           number line into a sequence of adjacent non-overlapping pieces, where each  piece  is
                           the  size  of  the  divisor;  the  quotient  identifies which piece the dividend lies
                           within, and the remainder identifies where within that piece  the  dividend  lies.  A
                           consequence  of this is that the result of “-57 <b>/</b> 10” is always -6, and the result of
                           “-57 <b>%</b> 10” is always 3.

       <b>+</b>  <b>-</b>                Add and subtract.  Valid for numeric operands.

       <b>&lt;&lt;</b>  <b>&gt;&gt;</b>              Left and right shift.  Valid for integers.  A right shift always propagates the  sign
                           bit.

       <b>&lt;</b>  <b>&gt;</b>  <b>&lt;=</b>  <b>&gt;=</b>        Boolean  numeric-preferring comparisons: less than, greater than, less than or equal,
                           and greater than or equal. If either argument is not numeric, the comparison is  done
                           using UNICODE string comparison, as with the string comparison operators below, which
                           have the same precedence.

       <b>lt</b>  <b>gt</b>  <b>le</b>  <b>ge</b>      Boolean  string comparisons: less than, greater than, less than or equal, and greater 2
                           than or equal. These always compare values using  their  UNICODE  strings  (also  see 2
                           <b>string</b> <b>compare</b>), unlike with the numeric-preferring comparisons above, which have the 2
                           same precedence.

       <b>==</b>  <b>!=</b>              Boolean equal and not equal.

       <b>eq</b>  <b>ne</b>              Boolean string equal and string not equal.

       <b>in</b>  <b>ni</b>              List  containment and negated list containment.  The first argument is interpreted as
                           a string, the second as a list.  <b>in</b> tests for membership in the list, and <b>ni</b>  is  the
                           inverse.

       <b>&amp;</b>                   Bit-wise AND.  Valid for integer operands.

       <b>^</b>                   Bit-wise exclusive OR.  Valid for integer operands.

       <b>|</b>                   Bit-wise OR.  Valid for integer operands.

       <b>&amp;&amp;</b>                  Logical  AND.   If  both  operands  are  true, the result is 1, or 0 otherwise.  This
                           operator evaluates lazily; it only evaluates its second operand if it must  in  order
                           to  determine  its  result.   This  operator  evaluates lazily; it only evaluates its
                           second operand if it must in order to determine its result.

       <b>||</b>                  Logical OR.  If both operands are false, the result  is  0,  or  1  otherwise.   This
                           operator  evaluates  lazily; it only evaluates its second operand if it must in order
                           to determine its result.

       <u>x</u> <b>?</b> <u>y</u> <b>:</b> <u>z</u>           If-then-else, as in C.  If <u>x</u> is false , the result is the value of <u>y</u>.  Otherwise  the
                           result is the value of <u>z</u>.  This operator evaluates lazily; it evaluates only one of <u>y</u>
                           or <u>z</u>.

       The exponentiation operator promotes types in the same way that the multiply and divide operators do, and
       the  result is is the same as the result of <b>pow</b>.  Exponentiation groups right-to-left within a precedence
       level. Other binary operators group left-to-right.  For example, the value of

              <b>expr</b> {4*2 &lt; 7}

       is 0, while the value of

              <b>expr</b> {2**3**2}

       is 512.

       As in C, <b>&amp;&amp;</b>, <b>||</b>, and <b>?:</b> feature “lazy evaluation”, which means that operands are not  evaluated  if  they
       are not needed to determine the outcome.  For example, in

              <b>expr</b> {$v?[a]:[b]}

       only  one  of  <b>[a]</b> or <b>[b]</b> is evaluated, depending on the value of <b>$v</b>.  This is not true of the normal Tcl
       parser, so it is normally recommended to enclose the arguments to <b>expr</b> in braces.  Without braces, as  in
       <b>expr</b> $v ? [a] : [b] both <b>[a]</b> and <b>[b]</b> are evaluated before <b>expr</b> is even called.

       For more details on the results produced by each operator, see the documentation for C.

   <b>MATH</b> <b>FUNCTIONS</b>
       A  mathematical  function  such  as  <b>sin($x)</b>  is  replaced  with a call to an ordinary Tcl command in the
       <b>tcl::mathfunc</b> namespace.  The evaluation of an expression such as

              <b>expr</b> {sin($x+$y)}

       is the same in every way as the evaluation of

              <b>expr</b> {[tcl::mathfunc::sin [<b>expr</b> {$x+$y}]]}

       which in turn is the same as the evaluation of

              tcl::mathfunc::sin [<b>expr</b> {$x+$y}]

       <b>tcl::mathfunc::sin</b> is resolved as described in <b>NAMESPACE</b> <b>RESOLUTION</b> in the <b><a href="../man3tcl/namespace.3tcl.html">namespace</a></b>(3tcl) documentation.
       Given   the   default   value   of   <b>namespace</b>   <b>path</b>,   <b>[namespace</b>    <b>current]::tcl::mathfunc::sin</b>    or
       <b>::tcl::mathfunc::sin</b> are the typical resolutions.

       As in C, a mathematical function may accept multiple arguments separated by commas. Thus,

              <b>expr</b> {hypot($x,$y)}

       becomes

              tcl::mathfunc::hypot $x $y

       See the <b><a href="../man3tcl/mathfunc.3tcl.html">mathfunc</a></b>(3tcl) documentation for the math functions that are available by default.

   <b>TYPES,</b> <b>OVERFLOW,</b> <b>AND</b> <b>PRECISION</b>
       Internal  floating-point computations are performed using the <u>double</u> C type.  When converting a string to
       floating-point value, exponent overflow is detected and results in the <u>double</u> value of  <b>Inf</b>  or  <b>-Inf</b>  as
       appropriate.  Floating-point overflow and underflow are detected to the degree supported by the hardware,
       which is generally fairly reliable.

       Conversion  among  internal  representations  for  integer,  floating-point,  and string operands is done
       automatically as needed.  For arithmetic computations, integers are used until some floating-point number
       is introduced, after which floating-point values are used.  For example,

              <b>expr</b> {5 / 4}

       returns 1, while

              <b>expr</b> {5 / 4.0}
              <b>expr</b> {5 / ( [string length "abcd"] + 0.0 )}

       both return 1.25.  A floating-point result can be distinguished from an integer result by the presence of
       either “<b>.</b>”  or “<b>e</b>”

              <b>expr</b> {20.0/5.0}

       returns <b>4.0</b>, not <b>4</b>.

</pre><h4><b>PERFORMANCE</b> <b>CONSIDERATIONS</b></h4><pre>
       Where an expression contains syntax that Tcl would  otherwise  perform  substitutions  on,  enclosing  an
       expression  in  braces  or  otherwise  quoting  it so that it's a static value allows the Tcl compiler to
       generate bytecode for the expression, resulting in better speed and smaller storage  requirements.   This
       also  avoids  issues that can arise if Tcl is allowed to perform substitution on the value before <b>expr</b> is
       called.

       In the following example, the value of the expression is 11 because the Tcl parser first  substitutes  <b>$b</b>
       and  <b>expr</b>  then substitutes <b>$a</b> as part of evaluating the expression “$a + 2*4”.  Enclosing the expression
       in braces would result in a syntax error as <b>$b</b> does not evaluate to a numeric value.

              set a 3
              set b {$a + 2}
              <b>expr</b> $b*4

       When an expression is generated at runtime, like the one above is, the bytecode compiler must ensure that
       new code is generated each time the expression is evaluated.  This is the most costly kind of  expression
       from  a  performance  perspective.   In such cases, consider directly using the commands described in the
       <b><a href="../man3tcl/mathfunc.3tcl.html">mathfunc</a></b>(3tcl) or <b><a href="../man3tcl/mathop.3tcl.html">mathop</a></b>(3tcl) documentation instead of <b>expr</b>.

       Most expressions are not formed at runtime, but are literal strings or contain substitutions  that  don't
       introduce  other  substitutions.   To  allow the bytecode compiler to work with an expression as a string
       literal at compilation time, ensure that it contains no substitutions or that it is enclosed in braces or
       otherwise quoted to prevent Tcl from performing substitutions, allowing <b>expr</b> to perform them instead.

       If it is necessary to include a non-constant expression string within the wider context of an  otherwise-
       constant  expression, the most efficient technique is to put the varying part inside a recursive <b>expr</b>, as
       this at least allows for the compilation of the outer part, though it does mean  that  the  varying  part
       must  itself  be evaluated as a separate expression. Thus, in this example the result is 20 and the outer
       expression benefits from fully cached bytecode compilation.

              set a 3
              set b {$a + 2}
              <b>expr</b> {[<b>expr</b> $b] * 4}

       In general, you should enclose your expression in braces wherever possible, and where not  possible,  the
       argument  to  <b>expr</b>  should  be  an expression defined elsewhere as simply as possible. It is usually more
       efficient and safer to use other techniques (e.g., the commands in the <b>tcl::mathop</b> namespace) than it  is
       to do complex expression generation.

</pre><h4><b>EXAMPLES</b></h4><pre>
       A numeric comparison whose result is 1:

              <b>expr</b> {"0x03" &gt; "2"}

       A string comparison whose result is 1:

              <b>expr</b> {"0y" &gt; "0x12"}

       A forced string comparison whose result is 0:                                                             2

              <b>expr</b> {"0x03" gt "2"}                                                                               2

       Define a procedure that computes an “interesting” mathematical function:

              proc tcl::mathfunc::calc {x y} {
                  <b>expr</b> { ($x**2 - $y**2) / exp($x**2 + $y**2) }
              }

       Convert polar coordinates into cartesian coordinates:

              # convert from ($radius,$angle)
              set x [<b>expr</b> { $radius * cos($angle) }]
              set y [<b>expr</b> { $radius * sin($angle) }]

       Convert cartesian coordinates into polar coordinates:

              # convert from ($x,$y)
              set radius [<b>expr</b> { hypot($y, $x) }]
              set angle  [<b>expr</b> { atan2($y, $x) }]

       Print a message describing the relationship of two string values to each other:

              puts "a and b are [<b>expr</b> {$a eq $b ? {equal} : {different}}]"

       Set a variable indicating whether an environment variable is defined and has value of true:

              set isTrue [<b>expr</b> {
                  # Does the environment variable exist, and...
                  [info exists ::env(SOME_ENV_VAR)] &amp;&amp;
                  # ...does it contain a proper true value?
                  [string is true -strict $::env(SOME_ENV_VAR)]
              }]

       Generate a random integer in the range 0..99 inclusive:

              set randNum [<b>expr</b> { int(100 * rand()) }]

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/array.3tcl.html">array</a>(3tcl),    <a href="../man3tcl/for.3tcl.html">for</a>(3tcl),   <a href="../man3tcl/if.3tcl.html">if</a>(3tcl),   <a href="../man3tcl/mathfunc.3tcl.html">mathfunc</a>(3tcl),   <a href="../man3tcl/mathop.3tcl.html">mathop</a>(3tcl),   <a href="../man3tcl/namespace.3tcl.html">namespace</a>(3tcl),   <a href="../man3tcl/proc.3tcl.html">proc</a>(3tcl),
       <a href="../man3tcl/string.3tcl.html">string</a>(3tcl), <a href="../man3tcl/Tcl.3tcl.html">Tcl</a>(3tcl), <a href="../man3tcl/while.3tcl.html">while</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       arithmetic, boolean, compare, expression, fuzzy comparison, integer value

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright © 1993 The Regents of the University of California.
       Copyright © 1994-2000 Sun Microsystems Incorporated.
       Copyright © 2005 Kevin B. Kenny &lt;<a href="mailto:kennykb@acm.org">kennykb@acm.org</a>&gt;. All rights reserved.

Tcl                                                    8.5                                            <u><a href="../man3tcl/expr.3tcl.html">expr</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>