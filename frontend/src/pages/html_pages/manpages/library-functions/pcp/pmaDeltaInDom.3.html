<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmaDeltaInDom - generate a ``delta indom'' if two observations of an instance domain are different</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp-archive1-dev">libpcp-archive1-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmaDeltaInDom</b> - generate a ``delta indom'' if two observations of an instance domain are different

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>
       <b>#include</b> <b>&lt;pcp/libpcp.h&gt;</b>
       <b>#include</b> <b>&lt;pcp/archive.h&gt;</b>

       <b>void</b> <b>pmaDeltaInDom(__pmLogInDom</b> <b>*</b><u>old</u><b>,</b> <b>__pmLogInDom</b> <b>*</b><u>new</u><b>,</b> <b>__pmLogInDom</b> <b>*</b><u>new_delta</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp_archive</b> <b>-lpcp</b>

</pre><h4><b>CAVEAT</b></h4><pre>
       This documentation is intended for internal Performance Co-Pilot (PCP) developer use.

       These  interfaces  are  not part of the PCP APIs that are guaranteed to remain fixed across releases, and
       they may not work, or may provide different semantics at some point in the future.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Checks if two observations of the same instance domain are identical, and  if  they  are  <b>not</b>,  tries  to
       generate a ``delta indom'' to describe the differences.

       The  code  assumes (a) <u>old</u>-&gt;<u>indom</u> == <u>new</u>-&gt;<u>indom</u> and (b) both the instance domains are sorted in ascending
       internal instance identifier sequence; see <b><a href="../man3/pmaSortInDom.3.html">pmaSortInDom</a></b>(3) to see how to make the second condition true.

       The ``delta indom'' format is only supported for Version 3 archives and it is the caller's responsibility
       to determine if calling <b>pmaDeltaInDom</b> is appropriate, rather than calling <b><a href="../man3/pmaSameInDom.3.html">pmaSameInDom</a></b>(3)  which  is  the
       preferred method for V2 archives.

       <b>pmaDeltaInDom</b> returns 0 if the <u>old</u> and <u>new</u> instance domains are the same.

       A  return  value of 1 indicates that the instance domains are different and the ``delta indom'' format is
       <b>not</b> more efficient; in this case <u>new_delta</u> is not modified.

       A return value of 2 indicates that the instance domains are different and <u>new_delta</u> has been  set  up  to
       describe  the  ``delta  indom''  encoding of the differences;  in this case the caller is responsible for
       freeing <u>new_delta</u>-&gt;<u>instlist</u> and <u>new_delta</u>-&gt;<u>namelist.</u>

       The instance domains are considered different if any of the following hold:

       1.  <u>old</u>-&gt;<u>numinst</u> != <u>new</u>-&gt;<u>numinst</u>

       2.  For some i, <u>old</u>-&gt;<u>instlist</u>[<u>i</u>] <u>!=</u> new<u>-&gt;</u>instlist<u>[</u>i<u>]</u>

       3.  For some i, the strings pointed to by <u>old</u>-&gt;<u>namelist</u>[<u>i</u>] and <u>new</u>-&gt;<u>instlist</u>[<u>i</u>] are not identical

</pre><h4><b>DELTA</b> <b>INDOM</b> <b>FORMAT</b></h4><pre>
       As for a regular instance domain, <u>new_delta</u>-&gt;<u>numinst</u> defines the number of instance specifications.

       If <u>new_delta</u>-&gt;<u>namelist</u>[<u>i</u>] == NULL then the instance identified by <u>new_delta</u>-&gt;<u>instlist</u>[<u>i</u>] has been <b>deleted</b>
       from the instance domain.

       If <u>new_delta</u>-&gt;<u>namelist</u>[<u>i</u>] != NULL then the instance identified by <u>new_delta</u>-&gt;<u>instlist</u>[<u>i</u>] has  been  <b>added</b>
       to the instance domain.

       Because   the  ``delta  indom''  is  only  likely  to  have  short-term  relevance  to  the  caller,  the
       <u>new_delta</u>-&gt;<u>namelist</u>[<u>i</u>]  entries  that  are  not  NULL  will   point   back   into   <u>old</u>-&gt;<u>namelist</u>[<u>j</u>]   or
       <u>new</u>-&gt;<u>namelist</u>[<u>k</u>] and so <u>old</u> and <u>new</u> should not be freed until the caller has finished with <u>new_delta</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3), <b><a href="../man3/pmaSortInDom.3.html">pmaSortInDom</a></b>(3) and <b><a href="../man3/pmaSameInDom.3.html">pmaSameInDom</a></b>(3).

Performance Co-Pilot                                   PCP                                      <u><a href="../man3/PMADELTAINDOM.3.html">PMADELTAINDOM</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>