<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_lcore.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_lcore.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;rte_compat.h&gt;
       #include &lt;rte_config.h&gt;
       #include &lt;rte_per_lcore.h&gt;
       #include &lt;rte_eal.h&gt;
       #include &lt;rte_launch.h&gt;
       #include &lt;rte_thread.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_lcore_usage</b>

   <b>Macros</b>
       #define <b>LCORE_ID_ANY</b>   UINT32_MAX
       #define <b>RTE_LCORE_FOREACH</b>(i)
       #define <b>RTE_LCORE_FOREACH_WORKER</b>(i)

   <b>Typedefs</b>
       <b>typedef</b> int(* <b>rte_lcore_init_cb</b>) (unsigned int lcore_id, void *arg)
       <b>typedef</b> void(* <b>rte_lcore_uninit_cb</b>) (unsigned int lcore_id, void *arg)
       <b>typedef</b> int(* <b>rte_lcore_iterate_cb</b>) (unsigned int lcore_id, void *arg)
       <b>typedef</b> int(* <b>rte_lcore_usage_cb</b>) (unsigned int lcore_id, struct <b>rte_lcore_usage</b> *usage)

   <b>Enumerations</b>
       enum <b>rte_lcore_role_t</b>

   <b>Functions</b>
       <b>RTE_DECLARE_PER_LCORE</b> (unsigned, _lcore_id)
       enum <b>rte_lcore_role_t</b> <b>rte_eal_lcore_role</b> (unsigned int lcore_id)
       int <b>rte_lcore_has_role</b> (unsigned int lcore_id, enum <b>rte_lcore_role_t</b> role)
       static unsigned <b>rte_lcore_id</b> (void)
       unsigned int <b>rte_get_main_lcore</b> (void)
       unsigned int <b>rte_lcore_count</b> (void)
       int <b>rte_lcore_index</b> (int lcore_id)
       unsigned int <b>rte_socket_id</b> (void)
       unsigned int <b>rte_socket_count</b> (void)
       int <b>rte_socket_id_by_idx</b> (unsigned int idx)
       unsigned int <b>rte_lcore_to_socket_id</b> (unsigned int lcore_id)
       int <b>rte_lcore_to_cpu_id</b> (int lcore_id)
       rte_cpuset_t <b>rte_lcore_cpuset</b> (unsigned int lcore_id)
       int <b>rte_lcore_is_enabled</b> (unsigned int lcore_id)
       unsigned int <b>rte_get_next_lcore</b> (unsigned int i, int skip_main, int wrap)
       void * <b>rte_lcore_callback_register</b> (const char *name, <b>rte_lcore_init_cb</b> init, <b>rte_lcore_uninit_cb</b> uninit,
           void *arg)
       void <b>rte_lcore_callback_unregister</b> (void *handle)
       int <b>rte_lcore_iterate</b> (<b>rte_lcore_iterate_cb</b> cb, void *arg)
       void <b>rte_lcore_register_usage_cb</b> (<b>rte_lcore_usage_cb</b> cb)
       void <b>rte_lcore_dump</b> (FILE *f)
       int <b>rte_thread_register</b> (void)
       void <b>rte_thread_unregister</b> (void)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       API for lcore and socket manipulation

       Definition in file <b>rte_lcore.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>LCORE_ID_ANY</b>   <b>UINT32_MAX</b>
       Any lcore.

       Definition at line <b>26</b> of file <b>rte_lcore.h</b>.

   <b>#define</b> <b>RTE_LCORE_FOREACH(i)</b>
       <b>Value:</b>.PP
           for (i = rte_get_next_lcore(-1, 0, 0);               \
                i &lt; RTE_MAX_LCORE;                     \
                i = rte_get_next_lcore(i, 0, 0))
       Macro to browse all running lcores.

       Definition at line <b>217</b> of file <b>rte_lcore.h</b>.

   <b>#define</b> <b>RTE_LCORE_FOREACH_WORKER(i)</b>
       <b>Value:</b>.PP
           for (i = rte_get_next_lcore(-1, 1, 0);               \
                i &lt; RTE_MAX_LCORE;                     \
                i = rte_get_next_lcore(i, 1, 0))
       Macro to browse all running lcores except the main lcore.

       Definition at line <b>225</b> of file <b>rte_lcore.h</b>.

</pre><h4><b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>int(*</b> <b>rte_lcore_init_cb)</b> <b>(unsigned</b> <b>int</b> <b>lcore_id,</b> <b>void</b> <b>*arg)</b>
       Callback prototype for initializing lcores.

       <b>Parameters</b>
           <u>lcore_id</u> The lcore to consider.
           <u>arg</u> An opaque pointer passed at callback registration.

       <b>Returns</b>

           • -1 when refusing this operation,

           • 0 otherwise.

       Definition at line <b>241</b> of file <b>rte_lcore.h</b>.

   <b>typedef</b> <b>void(*</b> <b>rte_lcore_uninit_cb)</b> <b>(unsigned</b> <b>int</b> <b>lcore_id,</b> <b>void</b> <b>*arg)</b>
       Callback prototype for uninitializing lcores.

       <b>Parameters</b>
           <u>lcore_id</u> The lcore to consider.
           <u>arg</u> An opaque pointer passed at callback registration.

       Definition at line <b>251</b> of file <b>rte_lcore.h</b>.

   <b>typedef</b> <b>int(*</b> <b>rte_lcore_iterate_cb)</b> <b>(unsigned</b> <b>int</b> <b>lcore_id,</b> <b>void</b> <b>*arg)</b>
       Callback prototype for iterating over lcores.

       <b>Parameters</b>
           <u>lcore_id</u> The lcore to consider.
           <u>arg</u> An opaque pointer coming from the caller.

       <b>Returns</b>

           • 0 lets the iteration continue.

           • !0 makes the iteration stop.

       Definition at line <b>309</b> of file <b>rte_lcore.h</b>.

   <b>typedef</b> <b>int(*</b> <b>rte_lcore_usage_cb)</b> <b>(unsigned</b> <b>int</b> <b>lcore_id,</b> <b>struct</b> <b>rte_lcore_usage</b> <b>*usage)</b>
       Callback to allow applications to report lcore usage.

       <b>Parameters</b>
           <u>lcore_id</u> The lcore to consider.
           <u>usage</u> Counters representing this lcore usage. This can never be NULL.

       <b>Returns</b>

           • 0  if  fields  in usage were updated successfully. The fields that the application does not support
             must not be modified.

           • a negative value if the information is not available or if any error occurred.

       Definition at line <b>359</b> of file <b>rte_lcore.h</b>.

</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>rte_lcore_role_t</b>
       The lcore role (used in RTE or not).

       Definition at line <b>33</b> of file <b>rte_lcore.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>RTE_DECLARE_PER_LCORE</b> <b>(unsigned,</b> <b>_lcore_id)</b>
       Per thread 'lcore id'.

   <b>enum</b> <b>rte_lcore_role_t</b> <b>rte_eal_lcore_role</b> <b>(unsigned</b> <b>int</b> <b>lcore_id)</b>
       Get a lcore's role.

       <b>Parameters</b>
           <u>lcore_id</u> The identifier of the lcore, which MUST be between 0 and RTE_MAX_LCORE-1.

       <b>Returns</b>
           The role of the lcore.

   <b>int</b> <b>rte_lcore_has_role</b> <b>(unsigned</b> <b>int</b> <b>lcore_id,</b> <b>enum</b> <b>rte_lcore_role_t</b> <b>role)</b>
       Test if the core supplied has a specific role

       <b>Parameters</b>
           <u>lcore_id</u> The identifier of the lcore, which MUST be between 0 and RTE_MAX_LCORE-1.
           <u>role</u> The role to be checked against.

       <b>Returns</b>
           Boolean value: positive if test is true; otherwise returns 0.

   <b>static</b> <b>unsigned</b> <b>rte_lcore_id</b> <b>(void)</b> <b>[inline],</b>  <b>[static]</b>
       Return the Application thread ID of the execution unit.

       Note: in most cases the lcore id returned here will also correspond to the processor id  of  the  CPU  on
       which  the  thread  is pinned, this will not be the case if the user has explicitly changed the thread to
       core affinities using --lcores EAL argument e.g. --lcores '(0-3)@10' to run threads with lcore IDs 0,  1,
       2 and 3 on physical core 10..

       <b>Returns</b>
           Logical core ID (in EAL thread or registered non-EAL thread) or LCORE_ID_ANY (in unregistered non-EAL
           thread)

       Definition at line <b>78</b> of file <b>rte_lcore.h</b>.

   <b>unsigned</b> <b>int</b> <b>rte_get_main_lcore</b> <b>(void)</b>
       Get the id of the main lcore

       <b>Returns</b>
           the id of the main lcore

   <b>unsigned</b> <b>int</b> <b>rte_lcore_count</b> <b>(void)</b>
       Return the number of execution units (lcores) on the system.

       <b>Returns</b>
           the number of execution units (lcores) on the system.

   <b>int</b> <b>rte_lcore_index</b> <b>(int</b> <b>lcore_id)</b>
       Return the index of the lcore starting from zero.

       When  option  -c  or  -l  is given, the index corresponds to the order in the list. For example: -c 0x30,
       lcore 4 has index 0, and 5 has index 1. -l 22,18 lcore 22 has index 0, and 18 has index 1.

       <b>Parameters</b>
           <u>lcore_id</u> The targeted lcore, or -1 for the current one.

       <b>Returns</b>
           The relative index, or -1 if not enabled.

   <b>unsigned</b> <b>int</b> <b>rte_socket_id</b> <b>(void)</b>
       Return the ID of the physical socket of the logical core we are running on.

       <b>Returns</b>
           the ID of current lcoreid's physical socket

   <b>unsigned</b> <b>int</b> <b>rte_socket_count</b> <b>(void)</b>
       Return number of physical sockets detected on the system.

       Note that number of nodes may not be correspondent to their physical id's:  for  example,  a  system  may
       report two socket id's, but the actual socket id's may be 0 and 8.

       <b>Returns</b>
           the number of physical sockets as recognized by EAL

   <b>int</b> <b>rte_socket_id_by_idx</b> <b>(unsigned</b> <b>int</b> <b>idx)</b>
       Return socket id with a particular index.

       This  will  return  socket  id at a particular position in list of all detected physical socket id's. For
       example, on a machine with sockets [0, 8], passing 1 as a parameter will return 8.

       <b>Parameters</b>
           <u>idx</u> index of physical socket id to return

       <b>Returns</b>

           • physical socket id as recognized by EAL

           • -1 on error, with errno set to EINVAL

   <b>unsigned</b> <b>int</b> <b>rte_lcore_to_socket_id</b> <b>(unsigned</b> <b>int</b> <b>lcore_id)</b>
       Get the ID of the physical socket of the specified lcore

       <b>Parameters</b>
           <u>lcore_id</u> the targeted lcore, which MUST be between 0 and RTE_MAX_LCORE-1.

       <b>Returns</b>
           the ID of lcoreid's physical socket

   <b>int</b> <b>rte_lcore_to_cpu_id</b> <b>(int</b> <b>lcore_id)</b>
       Return the id of the lcore on a socket starting from zero.

       <b>Parameters</b>
           <u>lcore_id</u> The targeted lcore, or -1 for the current one.

       <b>Returns</b>
           The relative index, or -1 if not enabled.

   <b>rte_cpuset_t</b> <b>rte_lcore_cpuset</b> <b>(unsigned</b> <b>int</b> <b>lcore_id)</b>
       Return the cpuset for a given lcore.

       <b>Parameters</b>
           <u>lcore_id</u> the targeted lcore, which MUST be between 0 and RTE_MAX_LCORE-1.

       <b>Returns</b>
           The cpuset of that lcore

   <b>int</b> <b>rte_lcore_is_enabled</b> <b>(unsigned</b> <b>int</b> <b>lcore_id)</b>
       Test if an lcore is enabled.

       <b>Parameters</b>
           <u>lcore_id</u> The identifier of the lcore, which MUST be between 0 and RTE_MAX_LCORE-1.

       <b>Returns</b>
           True if the given lcore is enabled; false otherwise.

   <b>unsigned</b> <b>int</b> <b>rte_get_next_lcore</b> <b>(unsigned</b> <b>int</b> <b>i,</b> <b>int</b> <b>skip_main,</b> <b>int</b> <b>wrap)</b>
       Get the next enabled lcore ID.

       <b>Parameters</b>
           <u>i</u> The current lcore (reference).
           <u>skip_main</u> If true, do not return the ID of the main lcore.
           <u>wrap</u> If true, go back to 0 when RTE_MAX_LCORE is reached; otherwise, return RTE_MAX_LCORE.

       <b>Returns</b>
           The next lcore_id or RTE_MAX_LCORE if not found.

   <b>void</b> <b>*</b> <b>rte_lcore_callback_register</b> <b>(const</b> <b>char</b> <b>*</b> <b>name,</b> <b>rte_lcore_init_cb</b>  <b>init,</b>  <b>rte_lcore_uninit_cb</b>  <b>uninit,</b>
       <b>void</b> <b>*</b> <b>arg)</b>
       Register callbacks invoked when initializing and uninitializing a lcore.

       This  function  calls  the  init  callback  with  all  initialized lcores. Any error reported by the init
       callback triggers a rollback calling the uninit callback for each  lcore.  If  this  step  succeeds,  the
       callbacks are put in the lcore callbacks list that will get called for each lcore allocation/release.

       Note: callbacks execution is serialised under a write lock protecting the lcores and callbacks list.

       <b>Parameters</b>
           <u>name</u> A name serving as a small description for this callback.
           <u>init</u> The callback invoked when a lcore_id is initialized. init can be NULL.
           <u>uninit</u> The callback invoked when a lcore_id is uninitialized. uninit can be NULL.
           <u>arg</u> An optional argument that gets passed to the callback when it gets invoked.

       <b>Returns</b>
           On success, returns an opaque pointer for the registered object. On failure (either memory allocation
           issue in the function itself or an error is returned by the init callback itself), returns NULL.

   <b>void</b> <b>rte_lcore_callback_unregister</b> <b>(void</b> <b>*</b> <b>handle)</b>
       Unregister callbacks previously registered with rte_lcore_callback_register.

       This  function calls the uninit callback with all initialized lcores. The callbacks are then removed from
       the lcore callbacks list.

       <b>Parameters</b>
           <u>handle</u> The handle pointer returned by a former successful call to rte_lcore_callback_register.

   <b>int</b> <b>rte_lcore_iterate</b> <b>(rte_lcore_iterate_cb</b> <b>cb,</b> <b>void</b> <b>*</b> <b>arg)</b>
       Iterate on all active lcores (ROLE_RTE, ROLE_SERVICE and ROLE_NON_EAL).  No  modification  on  the  lcore
       states is allowed in the callback.

       Note: as opposed to init/uninit callbacks, iteration callbacks can be invoked in parallel as they are run
       under a read lock protecting the lcores and callbacks list.

       <b>Parameters</b>
           <u>cb</u> The callback that gets passed each lcore.
           <u>arg</u> An opaque pointer passed to cb.

       <b>Returns</b>
           Same return code as the callback last invocation (see rte_lcore_iterate_cb description).

   <b>void</b> <b>rte_lcore_register_usage_cb</b> <b>(rte_lcore_usage_cb</b> <b>cb)</b>
       Register  a  callback  from  an  application  to  be  called  in <b>rte_lcore_dump()</b> and the /eal/lcore/info
       telemetry endpoint handler. Applications are expected to report lcore usage statistics via this callback.

       If a callback was already registered, it can be replaced with another callback or unregistered with NULL.
       The previously registered callback may remain in use for an undetermined period of time.

       <b>Parameters</b>
           <u>cb</u> The callback function.

   <b>void</b> <b>rte_lcore_dump</b> <b>(FILE</b> <b>*</b> <b>f)</b>
       List all lcores.

       <b>Parameters</b>
           <u>f</u> The output stream where the dump should be sent.

   <b>int</b> <b>rte_thread_register</b> <b>(void)</b>
       Register current non-EAL thread as a lcore.

       <b>Note</b>
           This API is not compatible with the multi-process feature:

           • if a primary process registers a non-EAL thread, then no secondary process will initialise.

           • if a secondary process initialises successfully, trying to register a non-EAL  thread  from  either
             primary or secondary processes will always end up with the thread getting LCORE_ID_ANY as lcore.

       <b>Returns</b>
           On success, return 0; otherwise return -1 with rte_errno set.

   <b>void</b> <b>rte_thread_unregister</b> <b>(void)</b>
       Unregister current thread and release lcore if one was associated.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                                  <u><a href="../man3/rte_lcore.h.3.html">rte_lcore.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>