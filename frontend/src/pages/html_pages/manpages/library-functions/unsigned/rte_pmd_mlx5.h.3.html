<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_pmd_mlx5.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_pmd_mlx5.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;rte_compat.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_pmd_mlx5_geneve_tlv</b>

   <b>Macros</b>
       #define <b>RTE_PMD_MLX5_DOMAIN_BIT_NIC_RX</b>   (1 &lt;&lt; 0)
       #define <b>RTE_PMD_MLX5_DOMAIN_BIT_NIC_TX</b>   (1 &lt;&lt; 1)
       #define <b>RTE_PMD_MLX5_DOMAIN_BIT_FDB</b>   (1 &lt;&lt; 2)
       #define <b>RTE_PMD_MLX5_EXTERNAL_RX_QUEUE_ID_MIN</b>   (UINT16_MAX - 1000 + 1)
       #define <b>MLX5_EXTERNAL_TX_QUEUE_ID_MIN</b>   (UINT16_MAX - 1000 + 1)
       #define <b>RTE_PMD_MLX5_LINEAR_HASH_TAG_INDEX</b>   255
       #define <b>RTE_PMD_MLX5_HOST_SHAPER_FLAG_AVAIL_THRESH_TRIGGERED</b>   0
       #define <b>RTE_PMD_MLX5_FLOW_ENGINE_FLAG_STANDBY_DUP_INGRESS</b>   <b><a href="../man0/RTE_BIT32.0.html">RTE_BIT32</a></b>(0)

   <b>Functions</b>
       __rte_experimental int <b>rte_pmd_mlx5_get_dyn_flag_names</b> (char *names[], unsigned int n)
       __rte_experimental int <b>rte_pmd_mlx5_sync_flow</b> (uint16_t port_id, uint32_t domains)
       __rte_experimental int <b>rte_pmd_mlx5_external_rx_queue_id_map</b> (uint16_t port_id, uint16_t dpdk_idx,
           uint32_t hw_idx)
       __rte_experimental int <b>rte_pmd_mlx5_external_rx_queue_id_unmap</b> (uint16_t port_id, uint16_t dpdk_idx)
       __rte_experimental int <b>rte_pmd_mlx5_external_tx_queue_id_map</b> (uint16_t port_id, uint16_t dpdk_idx,
           uint32_t hw_idx)
       __rte_experimental int <b>rte_pmd_mlx5_external_tx_queue_id_unmap</b> (uint16_t port_id, uint16_t dpdk_idx)
       __rte_experimental int <b>rte_pmd_mlx5_host_shaper_config</b> (int port_id, uint8_t rate, uint32_t flags)
       __rte_experimental int <b>rte_pmd_mlx5_external_sq_enable</b> (uint16_t port_id, uint32_t sq_num)
       __rte_experimental int <b>rte_pmd_mlx5_flow_engine_set_mode</b> (enum rte_pmd_mlx5_flow_engine_mode mode,
           uint32_t flags)
       __rte_experimental void * <b>rte_pmd_mlx5_create_geneve_tlv_parser</b> (uint16_t port_id, const struct
           <b>rte_pmd_mlx5_geneve_tlv</b> tlv_list[], uint8_t nb_options)
       __rte_experimental int <b>rte_pmd_mlx5_destroy_geneve_tlv_parser</b> (void *handle)
       __rte_experimental int <b>rte_pmd_mlx5_rxq_dump_contexts</b> (uint16_t port_id, uint16_t queue_id, const char
           *filename)
       __rte_experimental int <b>rte_pmd_mlx5_txq_dump_contexts</b> (uint16_t port_id, uint16_t queue_id, const char
           *filename)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       MLX5 public header.

       This interface provides the ability to support private PMD dynamic flags.

       Definition in file <b>rte_pmd_mlx5.h</b>.

</pre><h4><b>Macro</b> <b>Definition</b> <b>Documentation</b></h4><pre>
   <b>#define</b> <b>RTE_PMD_MLX5_DOMAIN_BIT_NIC_RX</b>   <b>(1</b> <b>&lt;&lt;</b> <b>0)</b>
       NIC RX domain bit mask.

       Definition at line <b>41</b> of file <b>rte_pmd_mlx5.h</b>.

   <b>#define</b> <b>RTE_PMD_MLX5_DOMAIN_BIT_NIC_TX</b>   <b>(1</b> <b>&lt;&lt;</b> <b>1)</b>
       NIC TX domain bit mask.

       Definition at line <b>42</b> of file <b>rte_pmd_mlx5.h</b>.

   <b>#define</b> <b>RTE_PMD_MLX5_DOMAIN_BIT_FDB</b>   <b>(1</b> <b>&lt;&lt;</b> <b>2)</b>
       FDB (TX + RX) domain bit mask.

       Definition at line <b>43</b> of file <b>rte_pmd_mlx5.h</b>.

   <b>#define</b> <b>RTE_PMD_MLX5_EXTERNAL_RX_QUEUE_ID_MIN</b>   <b>(UINT16_MAX</b> <b>-</b> <b>1000</b> <b>+</b> <b>1)</b>
       External Rx queue rte_flow index minimal value.

       Definition at line <b>69</b> of file <b>rte_pmd_mlx5.h</b>.

   <b>#define</b> <b>MLX5_EXTERNAL_TX_QUEUE_ID_MIN</b>   <b>(UINT16_MAX</b> <b>-</b> <b>1000</b> <b>+</b> <b>1)</b>
       External Tx queue rte_flow index minimal value.

       Definition at line <b>74</b> of file <b>rte_pmd_mlx5.h</b>.

   <b>#define</b> <b>RTE_PMD_MLX5_LINEAR_HASH_TAG_INDEX</b>   <b>255</b>
       Tag level to set the linear hash index.

       Definition at line <b>79</b> of file <b>rte_pmd_mlx5.h</b>.

   <b>#define</b> <b>RTE_PMD_MLX5_HOST_SHAPER_FLAG_AVAIL_THRESH_TRIGGERED</b>   <b>0</b>
       The rate of the host port shaper will be updated directly at the next available descriptor threshold
       event to the rate that comes with this flag set; set rate 0 to disable this rate update. Unset this flag
       to update the rate of the host port shaper directly in the API call; use rate 0 to disable the current
       shaper.

       Definition at line <b>174</b> of file <b>rte_pmd_mlx5.h</b>.

   <b>#define</b> <b>RTE_PMD_MLX5_FLOW_ENGINE_FLAG_STANDBY_DUP_INGRESS</b>   <b><a href="../man0/RTE_BIT32.0.html">RTE_BIT32</a>(0)</b>
       When set on the flow engine of a standby process, ingress flow rules will be effective in active and
       standby processes, so the ingress traffic may be duplicated.

       Definition at line <b>224</b> of file <b>rte_pmd_mlx5.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_get_dyn_flag_names</b> <b>(char</b> <b>*</b> <b>names[],</b> <b>unsigned</b> <b>int</b> <b>n)</b>
       Returns the dynamic flags name, that are supported.

       <b>Parameters</b>
           <u>names</u> Array that is used to return the supported dynamic flags names.
           <u>n</u> The number of elements in the names array.

       <b>Returns</b>
           The number of dynamic flags that were copied if not negative. Otherwise:

           • ENOMEM - not enough entries in the array

           • EINVAL - invalid array entry

   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_sync_flow</b> <b>(uint16_t</b> <b>port_id,</b> <b>uint32_t</b> <b>domains)</b>
       Synchronize  the  flows  to  make them take effort on hardware. It only supports DR flows now. For DV and
       Verbs flows, there is no need to call this function, and a success will return directly in case of Verbs.

       <b>Parameters</b>
           <u>port_id</u> The port identifier of the Ethernet device.
           <u>domains</u> Refer to '/usr/include/infiniband/mlx5dv.h'. Bitmask of domains in which the  synchronization
           will  be  done.  RTE_PMD_MLX5_DOMAIN_BIT_*  macros  are  used  to  specify  the domains. An ADD or OR
           operation could be used to synchronize flows in more than one domain per call.

       <b>Returns</b>

           • (0) if successful.

           • Negative value if an error.

   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_external_rx_queue_id_map</b> <b>(uint16_t</b> <b>port_id,</b> <b>uint16_t</b>  <b>dpdk_idx,</b>  <b>uint32_t</b>
       <b>hw_idx)</b>
       Update  mapping  between  rte_flow  queue  index (16 bits) and HW queue index (32 bits) for RxQs which is
       created outside the PMD.

       <b>Parameters</b>
           <u>port_id</u> The port identifier of the Ethernet device.
           <u>dpdk_idx</u> Queue index in rte_flow.
           <u>hw_idx</u> Queue index in hardware.

       <b>Returns</b>
           0 on success, a negative errno value otherwise and rte_errno is set. Possible values for rte_errno:

           • EEXIST - a mapping with the same rte_flow index already exists.

           • EINVAL - invalid rte_flow index, out of range.

           • ENODEV - there is no Ethernet device for this port id.

           • ENOTSUP - the port doesn't support external RxQ.

   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_external_rx_queue_id_unmap</b> <b>(uint16_t</b> <b>port_id,</b> <b>uint16_t</b> <b>dpdk_idx)</b>
       Remove mapping between rte_flow queue index (16 bits) and HW queue index (32  bits)  for  RxQs  which  is
       created outside the PMD.

       <b>Parameters</b>
           <u>port_id</u> The port identifier of the Ethernet device.
           <u>dpdk_idx</u> Queue index in rte_flow.

       <b>Returns</b>
           0 on success, a negative errno value otherwise and rte_errno is set. Possible values for rte_errno:

           • EINVAL - invalid index, out of range, still referenced or doesn't exist.

           • ENODEV - there is no Ethernet device for this port id.

           • ENOTSUP - the port doesn't support external RxQ.

   <b>__rte_experimental</b>  <b>int</b>  <b>rte_pmd_mlx5_external_tx_queue_id_map</b> <b>(uint16_t</b> <b>port_id,</b> <b>uint16_t</b> <b>dpdk_idx,</b> <b>uint32_t</b>
       <b>hw_idx)</b>
       Update mapping between rte_flow Tx queue index (16 bits) and HW queue index (32 bits) for TxQs  which  is
       created outside the PMD.

       <b>Parameters</b>
           <u>port_id</u> The port identifier of the Ethernet device.
           <u>dpdk_idx</u> Queue index in rte_flow.
           <u>hw_idx</u> Queue index in hardware.

       <b>Returns</b>
           0 on success, a negative errno value otherwise and rte_errno is set. Possible values for rte_errno:

           • EEXIST - a mapping with the same rte_flow index already exists.

           • EINVAL - invalid rte_flow index, out of range.

           • ENODEV - there is no Ethernet device for this port id.

           • ENOTSUP - the port doesn't support external TxQ.

   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_external_tx_queue_id_unmap</b> <b>(uint16_t</b> <b>port_id,</b> <b>uint16_t</b> <b>dpdk_idx)</b>
       Remove  mapping  between rte_flow Tx queue index (16 bits) and HW queue index (32 bits) for TxQs which is
       created outside the PMD.

       <b>Parameters</b>
           <u>port_id</u> The port identifier of the Ethernet device.
           <u>dpdk_idx</u> Queue index in rte_flow.

       <b>Returns</b>
           0 on success, a negative errno value otherwise and rte_errno is set. Possible values for rte_errno:

           • EINVAL - invalid index, out of range, still referenced or doesn't exist.

           • ENODEV - there is no Ethernet device for this port id.

           • ENOTSUP - the port doesn't support external TxQ.

   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_host_shaper_config</b> <b>(int</b> <b>port_id,</b> <b>uint8_t</b> <b>rate,</b> <b>uint32_t</b> <b>flags)</b>
       Configure a HW shaper to limit Tx rate for a host port. The configuration  will  affect  all  the  ethdev
       ports belonging to the same rte_device.

       <b>Parameters</b>
           <u>port_id</u> The port identifier of the Ethernet device.
           <u>rate</u> Unit is 100Mbps, setting the rate to 0 disables the shaper.
           <u>flags</u> Host shaper flags (see RTE_PMD_MLX5_HOST_SHAPER_FLAG_*).

       <b>Returns</b>
           0 : operation success. Otherwise:

           • ENOENT - no ibdev interface.

           • EBUSY - the register access unit is busy.

           • EIO - the register access command meets IO error.

   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_external_sq_enable</b> <b>(uint16_t</b> <b>port_id,</b> <b>uint32_t</b> <b>sq_num)</b>
       Enable traffic for external SQ.

       <b>Parameters</b>
           <u>port_id</u> The port identifier of the Ethernet device.
           <u>sq_num</u> SQ HW number.

       <b>Returns</b>
           0 on success, a negative errno value otherwise and rte_errno is set. Possible values for rte_errno:

           • EINVAL - invalid sq_number or port type.

           • ENODEV - there is no Ethernet device for this port id.

   <b>__rte_experimental</b>  <b>int</b>  <b>rte_pmd_mlx5_flow_engine_set_mode</b> <b>(enum</b> <b>rte_pmd_mlx5_flow_engine_mode</b> <b>mode,</b> <b>uint32_t</b>
       <b>flags)</b>
       <b>Warning</b>
           <b>EXPERIMENTAL:</b> this API may change without prior notice

       Set the flow engine mode of the process to active or standby, affecting network traffic handling.

       If one device does not support this operation or fails, the whole operation is failed and rolled back.

       It is forbidden to have multiple flow engines with the same mode unless only one of them is configured to
       handle the traffic.

       The application's flow engine is active by default. The configuration from  the  active  flow  engine  is
       effective  immediately  while  the configuration from the standby flow engine is queued by hardware. When
       configuring the device from a standby flow engine, it has no effect except for below situations:

       • traffic not handled by the active flow engine configuration

       • no active flow engine

       When flow engine of a process is changed from a standby to an active mode, all  preceding  configurations
       that  are queued by hardware should become effective immediately. Before mode transition, all the traffic
       handling configurations set by the active flow engine should be flushed first.

       In summary, the operations are expected to happen in this order in 'old' and 'new' applications:  device:
       already  configured  by  the  old application new: start as active new: probe the same device new: set as
       standby new: configure the device device: has configurations from old and new applications old: clear its
       device configuration device: has only 1 configuration from new application new:  set  as  active  device:
       downtime for connecting all to the new application old: shutdown

       <b>Parameters</b>
           <u>mode</u> The desired mode (see rte_pmd_mlx5_flow_engine_mode).
           <u>flags</u> Mode specific flags (see RTE_PMD_MLX5_FLOW_ENGINE_FLAG_*).

       <b>Returns</b>
           Positive value on success, -rte_errno value on error:

           • (&gt; 0) Number of switched devices.

           • (-EINVAL) if error happen and rollback internally.

           • (-EPERM) if operation failed and can't recover.

   <b>__rte_experimental</b>   <b>void</b>   <b>*</b>   <b>rte_pmd_mlx5_create_geneve_tlv_parser</b>   <b>(uint16_t</b>   <b>port_id,</b>   <b>const</b>   <b>struct</b>
       <b>rte_pmd_mlx5_geneve_tlv</b> <b>tlv_list[],</b> <b>uint8_t</b> <b>nb_options)</b>
       Creates GENEVE TLV parser for the selected port. This function must be called before first use of  GENEVE
       option.

       This  API  is  port  oriented,  but  the configuration is done once for all ports under the same physical
       device. Each port should call this API before using GENEVE OPT item, but it must use the same options  in
       the same order inside the list.

       Each  physical  device  has 7 DWs for GENEVE TLV options. Each nonzero element in 'match_data_mask' array
       consumes one DW, and choosing matchable mode for class consumes additional  one.  Calling  this  API  for
       second port under same physical device doesn't consume more DW, it uses same configuration.

       <b>Parameters</b>
           <u>port_id</u> The port identifier of the Ethernet device.
           <u>tlv_list</u> A list of GENEVE TLV options to create parser for them.
           <u>nb_options</u> The number of options in TLV list.

       <b>Returns</b>
           A  pointer  to  TLV  handle  on  success,  NULL  otherwise  and rte_errno is set. Possible values for
           rte_errno:

           • ENOMEM - not enough memory to create GENEVE TLV parser.

           • EEXIST - this port already has GENEVE TLV parser or another port under  same  physical  device  has
             already prepared a different parser.

           • EINVAL - invalid GENEVE TLV requested.

           • ENODEV - there is no Ethernet device for this port id.

           • ENOTSUP - the port doesn't support GENEVE TLV parsing.

   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_destroy_geneve_tlv_parser</b> <b>(void</b> <b>*</b> <b>handle)</b>
       Destroy  GENEVE  TLV  parser for the selected port. This function must be called after last use of GENEVE
       option and before port closing.

       <b>Parameters</b>
           <u>handle</u> Handle for the GENEVE TLV parser object to be destroyed.

       <b>Returns</b>
           0 on success, a negative errno value otherwise and rte_errno is set. Possible values for rte_errno:

           • EINVAL - invalid handle.

           • ENOENT - there is no valid GENEVE TLV parser in this handle.

           • EBUSY - one of options is in used by template table.

   <b>__rte_experimental</b> <b>int</b> <b>rte_pmd_mlx5_rxq_dump_contexts</b> <b>(uint16_t</b> <b>port_id,</b>  <b>uint16_t</b>  <b>queue_id,</b>  <b>const</b>  <b>char</b>  <b>*</b>
       <b>filename)</b>
       Dump Rx Queue Context for a given port/queue

       <b>Parameters</b>
           <u>port_id</u> Port ID
           <u>queue_id</u> Queue ID
           <u>filename</u> Name of file to dump the Rx Queue Context

       <b>Returns</b>
           0 for success, non-zero value depending on failure type

   <b>__rte_experimental</b>  <b>int</b>  <b>rte_pmd_mlx5_txq_dump_contexts</b>  <b>(uint16_t</b>  <b>port_id,</b>  <b>uint16_t</b> <b>queue_id,</b> <b>const</b> <b>char</b> <b>*</b>
       <b>filename)</b>
       Dump Tx Queue Context for a given port/queue

       <b>Parameters</b>
           <u>port_id</u> Port ID
           <u>queue_id</u> Queue ID
           <u>filename</u> Name of file to dump the Tx Queue Context

       <b>Returns</b>
           0 for success, non-zero value depending on failure type

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                               <u><a href="../man3/rte_pmd_mlx5.h.3.html">rte_pmd_mlx5.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>