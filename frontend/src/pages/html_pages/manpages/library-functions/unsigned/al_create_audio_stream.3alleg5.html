<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>al_create_audio_stream - Allegro 5 API</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/allegro5-doc">allegro5-doc_5.2.10.1+dfsg-1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       al_create_audio_stream - Allegro 5 API

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;allegro5/allegro_audio.h&gt;

              ALLEGRO_AUDIO_STREAM *al_create_audio_stream(size_t fragment_count,
                 unsigned int frag_samples, unsigned int freq, ALLEGRO_AUDIO_DEPTH depth,
                 ALLEGRO_CHANNEL_CONF chan_conf)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Creates an <a href="../man3alleg5/ALLEGRO_AUDIO_STREAM.3alleg5.html">ALLEGRO_AUDIO_STREAM</a>(3alleg5).  The stream will be set to play by default.  It will feed audio
       data from a buffer, which is split into a number of fragments.

       Parameters:

       • fragment_count  -  How  many  fragments  to  use  for the audio stream.  Usually only two fragments are
         required - splitting the audio buffer in two halves.  But it means that the only time when new data can
         be supplied is whenever one half has finished playing.  When using many fragments, you usually will use
         fewer samples for one, so there always will be (small) fragments available to be filled with new data.

       • frag_samples - The size of a fragment in samples.  See note and explanation below.

       • freq - The frequency, in Hertz.

       • depth - Must be one of the values listed for <a href="../man3alleg5/ALLEGRO_AUDIO_DEPTH.3alleg5.html">ALLEGRO_AUDIO_DEPTH</a>(3alleg5).

       • chan_conf - Must be one of the values listed for <a href="../man3alleg5/ALLEGRO_CHANNEL_CONF.3alleg5.html">ALLEGRO_CHANNEL_CONF</a>(3alleg5).

       A sample that is referred to by the <u>frag_samples</u> parameter refers  to  a  sequence  channel  intensities.
       E.g.  if you’re making a stereo stream with the <u>frag_samples</u> set to 4, then the layout of the data in the
       fragment will be:

              LRLRLRLR

       Where  L  and R are the intensities for the left and right channels respectively.  A single sample, then,
       refers to the LR pair in this example.

       The choice of <u>fragment_count</u>, <u>frag_samples</u> and <u>freq</u> directly influences the audio delay.   The  delay  in
       seconds can be expressed as:

              delay = fragment_count * frag_samples / freq

       This  is only the delay due to Allegro’s streaming, there may be additional delay caused by sound drivers
       and/or hardware.

              <u>Note:</u> If you know the fragment size in bytes, you can get the size in samples like this:

                     sample_size = al_get_channel_count(chan_conf) * al_get_audio_depth_size(depth);
                     samples = bytes_per_fragment / sample_size;

              The size of the complete buffer is:

                     buffer_size = bytes_per_fragment * fragment_count

              <u>Note:</u> Unlike many Allegro objects, audio streams are not implicitly destroyed when Allegro is shut
              down.  You must destroy them  manually  with  <a href="../man3alleg5/al_destroy_audio_stream.3alleg5.html">al_destroy_audio_stream</a>(3alleg5)  before  the  audio
              system is shut down.

Allegro reference manual                                                         <u><a href="../man3alleg5/al_create_audio_stream.3alleg5.html">al_create_audio_stream</a></u>(3alleg5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>