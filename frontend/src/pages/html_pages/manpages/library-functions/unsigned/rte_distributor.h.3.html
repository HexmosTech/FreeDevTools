<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_distributor.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_distributor.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Functions</b>
       struct rte_distributor * <b>rte_distributor_create</b> (const char *name, unsigned int socket_id, unsigned int
           num_workers, unsigned int alg_type)
       int <b>rte_distributor_process</b> (struct rte_distributor *d, struct <b>rte_mbuf</b> **mbufs, unsigned int num_mbufs)
       int <b>rte_distributor_returned_pkts</b> (struct rte_distributor *d, struct <b>rte_mbuf</b> **mbufs, unsigned int
           max_mbufs)
       int <b>rte_distributor_flush</b> (struct rte_distributor *d)
       void <b>rte_distributor_clear_returns</b> (struct rte_distributor *d)
       int <b>rte_distributor_get_pkt</b> (struct rte_distributor *d, unsigned int worker_id, struct <b>rte_mbuf</b> **pkts,
           struct <b>rte_mbuf</b> **oldpkt, unsigned int retcount)
       int <b>rte_distributor_return_pkt</b> (struct rte_distributor *d, unsigned int worker_id, struct <b>rte_mbuf</b>
           **oldpkt, int num)
       void <b>rte_distributor_request_pkt</b> (struct rte_distributor *d, unsigned int worker_id, struct <b>rte_mbuf</b>
           **oldpkt, unsigned int count)
       int <b>rte_distributor_poll_pkt</b> (struct rte_distributor *d, unsigned int worker_id, struct <b>rte_mbuf</b> **mbufs)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       RTE distributor

       The distributor is a component which is designed to pass packets one-at-a-time to workers, with dynamic
       load balancing.

       Definition in file <b>rte_distributor.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>struct</b> <b>rte_distributor</b> <b>*</b> <b>rte_distributor_create</b> <b>(const</b> <b>char</b> <b>*</b> <b>name,</b> <b>unsigned</b> <b>int</b> <b>socket_id,</b> <b>unsigned</b> <b>int</b>
       <b>num_workers,</b> <b>unsigned</b> <b>int</b> <b>alg_type)</b>
       Function to create a new distributor instance

       Reserves the memory needed for the distributor operation and initializes the distributor to work with the
       configured number of workers.

       <b>Parameters</b>
           <u>name</u> The name to be given to the distributor instance.
           <u>socket_id</u> The NUMA node on which the memory is to be allocated
           <u>num_workers</u> The maximum number of workers that will request packets from this distributor
           <u>alg_type</u> Call the legacy API, or use the new burst API. legacy uses 32-bit flow ID, and works on a
           single packet at a time. Latest uses 15- bit flow ID and works on up to 8 packets at a time to
           workers.

       <b>Returns</b>
           The newly created distributor instance

   <b>int</b> <b>rte_distributor_process</b> <b>(struct</b> <b>rte_distributor</b> <b>*</b> <b>d,</b> <b>struct</b> <b>rte_mbuf</b> <b>**</b> <b>mbufs,</b> <b>unsigned</b> <b>int</b> <b>num_mbufs)</b>
       Process a set of packets by distributing them among workers that request packets. The distributor will
       ensure that no two packets that have the same flow id, or tag, in the mbuf will be processed on different
       cores at the same time.

       The user is advocated to set tag for each mbuf before calling this function. If user doesn't set the tag,
       the tag value can be various values depending on driver implementation and configuration.

       This is not multi-thread safe and should only be called on a single lcore.

       <b>Parameters</b>
           <u>d</u> The distributor instance to be used
           <u>mbufs</u> The mbufs to be distributed
           <u>num_mbufs</u> The number of mbufs in the mbufs array

       <b>Returns</b>
           The number of mbufs processed.

   <b>int</b> <b>rte_distributor_returned_pkts</b> <b>(struct</b> <b>rte_distributor</b> <b>*</b> <b>d,</b> <b>struct</b> <b>rte_mbuf</b> <b>**</b> <b>mbufs,</b> <b>unsigned</b> <b>int</b>
       <b>max_mbufs)</b>
       Get a set of mbufs that have been returned to the distributor by workers

       This should only be called on the same lcore as <b>rte_distributor_process()</b>

       <b>Parameters</b>
           <u>d</u> The distributor instance to be used
           <u>mbufs</u> The mbufs pointer array to be filled in
           <u>max_mbufs</u> The size of the mbufs array

       <b>Returns</b>
           The number of mbufs returned in the mbufs array.

   <b>int</b> <b>rte_distributor_flush</b> <b>(struct</b> <b>rte_distributor</b> <b>*</b> <b>d)</b>
       Flush the distributor component, so that there are no in-flight or backlogged packets awaiting processing

       This should only be called on the same lcore as <b>rte_distributor_process()</b>

       <b>Parameters</b>
           <u>d</u> The distributor instance to be used

       <b>Returns</b>
           The number of queued/in-flight packets that were completed by this call.

   <b>void</b> <b>rte_distributor_clear_returns</b> <b>(struct</b> <b>rte_distributor</b> <b>*</b> <b>d)</b>
       Clears the array of returned packets used as the source for the <b>rte_distributor_returned_pkts()</b> API call.

       This should only be called on the same lcore as <b>rte_distributor_process()</b>

       <b>Parameters</b>
           <u>d</u> The distributor instance to be used

   <b>int</b> <b>rte_distributor_get_pkt</b> <b>(struct</b> <b>rte_distributor</b> <b>*</b> <b>d,</b> <b>unsigned</b> <b>int</b> <b>worker_id,</b> <b>struct</b> <b>rte_mbuf</b> <b>**</b> <b>pkts,</b>
       <b>struct</b> <b>rte_mbuf</b> <b>**</b> <b>oldpkt,</b> <b>unsigned</b> <b>int</b> <b>retcount)</b>
       API called by a worker to get new packets to process. Any previous packets given to the worker is assumed
       to have completed processing, and may be optionally returned to the distributor via the oldpkt parameter.

       <b>Parameters</b>
           <u>d</u> The distributor instance to be used
           <u>worker_id</u> The worker instance number to use - must be less that num_workers passed at distributor
           creation time.
           <u>pkts</u> The mbufs pointer array to be filled in (up to 8 packets)
           <u>oldpkt</u> The previous packets, if any, being processed by the worker
           <u>retcount</u> The number of packets being returned

       <b>Returns</b>
           The number of packets in the pkts array

   <b>int</b> <b>rte_distributor_return_pkt</b> <b>(struct</b> <b>rte_distributor</b> <b>*</b> <b>d,</b> <b>unsigned</b> <b>int</b> <b>worker_id,</b> <b>struct</b> <b>rte_mbuf</b> <b>**</b>
       <b>oldpkt,</b> <b>int</b> <b>num)</b>
       API called by a worker to return a completed packet without requesting a new packet, for example, because
       a worker thread is shutting down

       <b>Parameters</b>
           <u>d</u> The distributor instance to be used
           <u>worker_id</u> The worker instance number to use - must be less that num_workers passed at distributor
           creation time.
           <u>oldpkt</u> The previous packets being processed by the worker
           <u>num</u> The number of packets in the oldpkt array

   <b>void</b> <b>rte_distributor_request_pkt</b> <b>(struct</b> <b>rte_distributor</b> <b>*</b> <b>d,</b> <b>unsigned</b> <b>int</b> <b>worker_id,</b> <b>struct</b> <b>rte_mbuf</b> <b>**</b>
       <b>oldpkt,</b> <b>unsigned</b> <b>int</b> <b>count)</b>
       API called by a worker to request a new packet to process. Any previous packets given to the worker are
       assumed to have completed processing, and may be optionally returned to the distributor via the oldpkt
       parameter. Unlike <b>rte_distributor_get_pkt()</b>, this function does not wait for new packets to be provided
       by the distributor.

       NOTE: after calling this function, <b>rte_distributor_poll_pkt()</b> should be used to poll for the packets
       requested. The <b>rte_distributor_get_pkt()</b> API should <u>not</u> be used to try and retrieve the new packets.

       <b>Parameters</b>
           <u>d</u> The distributor instance to be used
           <u>worker_id</u> The worker instance number to use - must be less that num_workers passed at distributor
           creation time.
           <u>oldpkt</u> The returning packets, if any, processed by the worker
           <u>count</u> The number of returning packets

   <b>int</b> <b>rte_distributor_poll_pkt</b> <b>(struct</b> <b>rte_distributor</b> <b>*</b> <b>d,</b> <b>unsigned</b> <b>int</b> <b>worker_id,</b> <b>struct</b> <b>rte_mbuf</b> <b>**</b> <b>mbufs)</b>
       API called by a worker to check for new packets that were previously requested by a call to
       <b>rte_distributor_request_pkt()</b>. It does not wait for the new packets to be available, but returns if the
       request has not yet been fulfilled by the distributor.

       <b>Parameters</b>
           <u>d</u> The distributor instance to be used
           <u>worker_id</u> The worker instance number to use - must be less that num_workers passed at distributor
           creation time.
           <u>mbufs</u> The array of mbufs being given to the worker

       <b>Returns</b>
           The number of packets being given to the worker thread, -1 if no packets are yet available (burst API
           - RTE_DIST_ALG_BURST) 0 if no packets are yet available (legacy single API - RTE_DIST_ALG_SINGLE)

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                            <u><a href="../man3/rte_distributor.h.3.html">rte_distributor.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>