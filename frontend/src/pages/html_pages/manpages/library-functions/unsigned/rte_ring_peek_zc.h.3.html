<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rte_ring_peek_zc.h</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dpdk-doc">dpdk-doc_24.11.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rte_ring_peek_zc.h

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;rte_ring_peek_elem_pvt.h&gt;

   <b>Data</b> <b>Structures</b>
       struct <b>rte_ring_zc_data</b>

   <b>Functions</b>
       static <b>__rte_always_inline</b> unsigned int <b>rte_ring_enqueue_zc_bulk_elem_start</b> (struct <b>rte_ring</b> *r, unsigned
           int esize, unsigned int n, struct <b>rte_ring_zc_data</b> *zcd, unsigned int *free_space)
       static <b>__rte_always_inline</b> unsigned int <b>rte_ring_enqueue_zc_bulk_start</b> (struct <b>rte_ring</b> *r, unsigned int
           n, struct <b>rte_ring_zc_data</b> *zcd, unsigned int *free_space)
       static <b>__rte_always_inline</b> unsigned int <b>rte_ring_enqueue_zc_burst_elem_start</b> (struct <b>rte_ring</b> *r,
           unsigned int esize, unsigned int n, struct <b>rte_ring_zc_data</b> *zcd, unsigned int *free_space)
       static <b>__rte_always_inline</b> unsigned int <b>rte_ring_enqueue_zc_burst_start</b> (struct <b>rte_ring</b> *r, unsigned int
           n, struct <b>rte_ring_zc_data</b> *zcd, unsigned int *free_space)
       static <b>__rte_always_inline</b> void <b>rte_ring_enqueue_zc_elem_finish</b> (struct <b>rte_ring</b> *r, unsigned int n)
       static <b>__rte_always_inline</b> void <b>rte_ring_enqueue_zc_finish</b> (struct <b>rte_ring</b> *r, unsigned int n)
       static <b>__rte_always_inline</b> unsigned int <b>rte_ring_dequeue_zc_bulk_elem_start</b> (struct <b>rte_ring</b> *r, unsigned
           int esize, unsigned int n, struct <b>rte_ring_zc_data</b> *zcd, unsigned int *available)
       static <b>__rte_always_inline</b> unsigned int <b>rte_ring_dequeue_zc_bulk_start</b> (struct <b>rte_ring</b> *r, unsigned int
           n, struct <b>rte_ring_zc_data</b> *zcd, unsigned int *available)
       static <b>__rte_always_inline</b> unsigned int <b>rte_ring_dequeue_zc_burst_elem_start</b> (struct <b>rte_ring</b> *r,
           unsigned int esize, unsigned int n, struct <b>rte_ring_zc_data</b> *zcd, unsigned int *available)
       static <b>__rte_always_inline</b> unsigned int <b>rte_ring_dequeue_zc_burst_start</b> (struct <b>rte_ring</b> *r, unsigned int
           n, struct <b>rte_ring_zc_data</b> *zcd, unsigned int *available)
       static <b>__rte_always_inline</b> void <b>rte_ring_dequeue_zc_elem_finish</b> (struct <b>rte_ring</b> *r, unsigned int n)
       static <b>__rte_always_inline</b> void <b>rte_ring_dequeue_zc_finish</b> (struct <b>rte_ring</b> *r, unsigned int n)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       It is not recommended to include this file directly. Please include &lt;<b>rte_ring_elem.h</b>&gt; instead.

       Ring Peek Zero Copy APIs These APIs make it possible to split public enqueue/dequeue API into 3 parts:

       • enqueue/dequeue start

       • copy data to/from the ring

       • enqueue/dequeue  finish  Along  with the advantages of the peek APIs, these APIs provide the ability to
         avoid copying of the data to temporary area (for ex: array of mbufs on the stack).

       Note that currently these APIs are available only for two sync modes: 1) Single Producer/Single  Consumer
       (RTE_RING_SYNC_ST)  2)  Serialized  Producer/Serialized  Consumer  (RTE_RING_SYNC_MT_HTS).  It  is user's
       responsibility to create/init ring with appropriate sync modes selected.

       Following are some examples showing the API usage. 1) struct  elem_obj  {uint64_t  a;  uint32_t  b,  c;};
       struct elem_obj *obj;

       //  Create  ring with sync type RTE_RING_SYNC_ST or RTE_RING_SYNC_MT_HTS // Reserve space on the ring n =
       rte_ring_enqueue_zc_bulk_elem_start(r, sizeof(elem_obj), 1, &amp;zcd, NULL);

       // Produce the data directly on the ring memory obj = (struct elem_obj *)zcd-&gt;ptr1; obj-&gt;a = rte_get_a();
       obj-&gt;b = rte_get_b(); obj-&gt;c = rte_get_c(); rte_ring_enqueue_zc_elem_finish(ring, n);

       2) // Create ring with sync type RTE_RING_SYNC_ST or RTE_RING_SYNC_MT_HTS // Reserve space on the ring  n
       = rte_ring_enqueue_zc_burst_start(r, 32, &amp;zcd, NULL);

       //  Pkt  I/O  core  polls  packets  from  the NIC if (n != 0) { nb_rx = rte_eth_rx_burst(portid, queueid,
       zcd-&gt;ptr1, zcd-&gt;n1); if (nb_rx == zcd-&gt;n1 &amp;&amp; n !=  zcd-&gt;n1)  nb_rx  =  rte_eth_rx_burst(portid,  queueid,
       zcd-&gt;ptr2, n - zcd-&gt;n1);

       // Provide packets to the packet processing cores rte_ring_enqueue_zc_finish(r, nb_rx); }

       Note  that  between  <u>start</u>  and  <u>finish</u> none other thread can proceed with enqueue/dequeue operation till
       <u>finish</u> completes.

       Definition in file <b>rte_ring_peek_zc.h</b>.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>static</b> <b>__rte_always_inline</b> <b>unsigned</b> <b>int</b> <b>rte_ring_enqueue_zc_bulk_elem_start</b> <b>(struct</b> <b>rte_ring</b>  <b>*</b>  <b>r,</b>  <b>unsigned</b>
       <b>int</b> <b>esize,</b> <b>unsigned</b> <b>int</b> <b>n,</b> <b>struct</b> <b>rte_ring_zc_data</b> <b>*</b> <b>zcd,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>free_space)</b> <b>[static]</b>
       Start  to  enqueue  several objects on the ring. Note that no actual objects are put in the queue by this
       function, it just reserves space for the user on the ring. User has to copy objects into the queue  using
       the  returned  pointers.  User  should  call  rte_ring_enqueue_zc_elem_finish  to  complete  the  enqueue
       operation.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>esize</u> The size of ring element, in bytes. It must be a multiple of 4.
           <u>n</u> The number of objects to add in the ring.
           <u>zcd</u> Structure containing the pointers and length of the space reserved on the ring storage.
           <u>free_space</u> If non-NULL, returns the amount of space in the ring after the reservation  operation  has
           finished.

       <b>Returns</b>
           The number of objects that can be enqueued, either 0 or n

       Definition at line <b>180</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b>  <b>__rte_always_inline</b> <b>unsigned</b> <b>int</b> <b>rte_ring_enqueue_zc_bulk_start</b> <b>(struct</b> <b>rte_ring</b> <b>*</b> <b>r,</b> <b>unsigned</b> <b>int</b> <b>n,</b>
       <b>struct</b> <b>rte_ring_zc_data</b> <b>*</b> <b>zcd,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>free_space)</b> <b>[static]</b>
       Start to enqueue several pointers to objects on the ring. Note that no actual pointers  are  put  in  the
       queue  by  this  function,  it just reserves space for the user on the ring. User has to copy pointers to
       objects into the queue using the  returned  pointers.  User  should  call  rte_ring_enqueue_zc_finish  to
       complete the enqueue operation.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>n</u> The number of objects to add in the ring.
           <u>zcd</u> Structure containing the pointers and length of the space reserved on the ring storage.
           <u>free_space</u>  If  non-NULL, returns the amount of space in the ring after the reservation operation has
           finished.

       <b>Returns</b>
           The number of objects that can be enqueued, either 0 or n

       Definition at line <b>210</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b> <b>__rte_always_inline</b> <b>unsigned</b> <b>int</b> <b>rte_ring_enqueue_zc_burst_elem_start</b> <b>(struct</b> <b>rte_ring</b> <b>*</b>  <b>r,</b>  <b>unsigned</b>
       <b>int</b> <b>esize,</b> <b>unsigned</b> <b>int</b> <b>n,</b> <b>struct</b> <b>rte_ring_zc_data</b> <b>*</b> <b>zcd,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>free_space)</b> <b>[static]</b>
       Start  to  enqueue  several objects on the ring. Note that no actual objects are put in the queue by this
       function, it just reserves space for the user on the ring. User has to copy objects into the queue  using
       the  returned  pointers.  User  should  call  rte_ring_enqueue_zc_elem_finish  to  complete  the  enqueue
       operation.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>esize</u> The size of ring element, in bytes. It must be a multiple of 4.
           <u>n</u> The number of objects to add in the ring.
           <u>zcd</u> Structure containing the pointers and length of the space reserved on the ring storage.
           <u>free_space</u> If non-NULL, returns the amount of space in the ring after the reservation  operation  has
           finished.

       <b>Returns</b>
           The number of objects that can be enqueued, either 0 or n

       Definition at line <b>241</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b> <b>__rte_always_inline</b> <b>unsigned</b> <b>int</b> <b>rte_ring_enqueue_zc_burst_start</b> <b>(struct</b> <b>rte_ring</b> <b>*</b> <b>r,</b> <b>unsigned</b> <b>int</b> <b>n,</b>
       <b>struct</b> <b>rte_ring_zc_data</b> <b>*</b> <b>zcd,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>free_space)</b> <b>[static]</b>
       Start  to  enqueue  several  pointers to objects on the ring. Note that no actual pointers are put in the
       queue by this function, it just reserves space for the user on the ring. User has  to  copy  pointers  to
       objects  into  the  queue  using  the  returned  pointers. User should call rte_ring_enqueue_zc_finish to
       complete the enqueue operation.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>n</u> The number of objects to add in the ring.
           <u>zcd</u> Structure containing the pointers and length of the space reserved on the ring storage.
           <u>free_space</u> If non-NULL, returns the amount of space in the ring after the reservation  operation  has
           finished.

       <b>Returns</b>
           The number of objects that can be enqueued, either 0 or n.

       Definition at line <b>271</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b>  <b>__rte_always_inline</b>  <b>void</b>  <b>rte_ring_enqueue_zc_elem_finish</b>  <b>(struct</b>  <b>rte_ring</b>  <b>*</b>  <b>r,</b>  <b>unsigned</b> <b>int</b> <b>n)</b>
       <b>[static]</b>
       Complete enqueuing several objects on the ring. Note that number of objects to enqueue should not  exceed
       previous enqueue_start return value.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>n</u> The number of objects to add to the ring.

       Definition at line <b>289</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b> <b>__rte_always_inline</b> <b>void</b> <b>rte_ring_enqueue_zc_finish</b> <b>(struct</b> <b>rte_ring</b> <b>*</b> <b>r,</b> <b>unsigned</b> <b>int</b> <b>n)</b> <b>[static]</b>
       Complete enqueuing several pointers to objects on the ring. Note that number of objects to enqueue should
       not exceed previous enqueue_start return value.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>n</u> The number of pointers to objects to add to the ring.

       Definition at line <b>321</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b>  <b>__rte_always_inline</b>  <b>unsigned</b>  <b>int</b> <b>rte_ring_dequeue_zc_bulk_elem_start</b> <b>(struct</b> <b>rte_ring</b> <b>*</b> <b>r,</b> <b>unsigned</b>
       <b>int</b> <b>esize,</b> <b>unsigned</b> <b>int</b> <b>n,</b> <b>struct</b> <b>rte_ring_zc_data</b> <b>*</b> <b>zcd,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>available)</b> <b>[static]</b>
       Start to dequeue several objects from the ring. Note that no actual objects are copied from the queue  by
       this  function.  User  has  to  copy objects from the queue using the returned pointers. User should call
       rte_ring_dequeue_zc_elem_finish to complete the dequeue operation.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>esize</u> The size of ring element, in bytes. It must be a multiple of 4.
           <u>n</u> The number of objects to remove from the ring.
           <u>zcd</u> Structure containing the pointers and length of the space reserved on the ring storage.
           <u>available</u> If non-NULL, returns the number of remaining ring entries after the dequeue has finished.

       <b>Returns</b>
           The number of objects that can be dequeued, either 0 or n.

       Definition at line <b>387</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b> <b>__rte_always_inline</b> <b>unsigned</b> <b>int</b> <b>rte_ring_dequeue_zc_bulk_start</b> <b>(struct</b> <b>rte_ring</b> <b>*</b> <b>r,</b> <b>unsigned</b> <b>int</b>  <b>n,</b>
       <b>struct</b> <b>rte_ring_zc_data</b> <b>*</b> <b>zcd,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>available)</b> <b>[static]</b>
       Start to dequeue several pointers to objects from the ring. Note that no actual pointers are removed from
       the  queue  by  this  function.  User  has  to copy pointers to objects from the queue using the returned
       pointers. User should call rte_ring_dequeue_zc_finish to complete the dequeue operation.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>n</u> The number of objects to remove from the ring.
           <u>zcd</u> Structure containing the pointers and length of the space reserved on the ring storage.
           <u>available</u> If non-NULL, returns the number of remaining ring entries after the dequeue has finished.

       <b>Returns</b>
           The number of objects that can be dequeued, either 0 or n.

       Definition at line <b>416</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b> <b>__rte_always_inline</b> <b>unsigned</b> <b>int</b> <b>rte_ring_dequeue_zc_burst_elem_start</b> <b>(struct</b> <b>rte_ring</b> <b>*</b>  <b>r,</b>  <b>unsigned</b>
       <b>int</b> <b>esize,</b> <b>unsigned</b> <b>int</b> <b>n,</b> <b>struct</b> <b>rte_ring_zc_data</b> <b>*</b> <b>zcd,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>available)</b> <b>[static]</b>
       Start  to dequeue several objects from the ring. Note that no actual objects are copied from the queue by
       this function. User has to copy objects from the queue using the  returned  pointers.  User  should  call
       rte_ring_dequeue_zc_elem_finish to complete the dequeue operation.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>esize</u>  The  size  of  ring element, in bytes. It must be a multiple of 4. This must be the same value
           used while creating the ring. Otherwise the results are undefined.
           <u>n</u> The number of objects to dequeue from the ring.
           <u>zcd</u> Structure containing the pointers and length of the space reserved on the ring storage.
           <u>available</u> If non-NULL, returns the number of remaining ring entries after the dequeue has finished.

       <b>Returns</b>
           The number of objects that can be dequeued, either 0 or n.

       Definition at line <b>448</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b> <b>__rte_always_inline</b> <b>unsigned</b> <b>int</b> <b>rte_ring_dequeue_zc_burst_start</b> <b>(struct</b> <b>rte_ring</b> <b>*</b> <b>r,</b> <b>unsigned</b> <b>int</b> <b>n,</b>
       <b>struct</b> <b>rte_ring_zc_data</b> <b>*</b> <b>zcd,</b> <b>unsigned</b> <b>int</b> <b>*</b> <b>available)</b> <b>[static]</b>
       Start to dequeue several pointers to objects from the ring. Note that no actual pointers are removed from
       the queue by this function. User has to copy pointers to  objects  from  the  queue  using  the  returned
       pointers. User should call rte_ring_dequeue_zc_finish to complete the dequeue operation.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>n</u> The number of objects to remove from the ring.
           <u>zcd</u> Structure containing the pointers and length of the space reserved on the ring storage.
           <u>available</u> If non-NULL, returns the number of remaining ring entries after the dequeue has finished.

       <b>Returns</b>
           The number of objects that can be dequeued, either 0 or n.

       Definition at line <b>477</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b>  <b>__rte_always_inline</b>  <b>void</b>  <b>rte_ring_dequeue_zc_elem_finish</b>  <b>(struct</b>  <b>rte_ring</b>  <b>*</b>  <b>r,</b>  <b>unsigned</b> <b>int</b> <b>n)</b>
       <b>[static]</b>
       Complete dequeuing several objects from the ring. Note that number of  objects  to  dequeued  should  not
       exceed previous dequeue_start return value.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>n</u> The number of objects to remove from the ring.

       Definition at line <b>495</b> of file <b>rte_ring_peek_zc.h</b>.

   <b>static</b> <b>__rte_always_inline</b> <b>void</b> <b>rte_ring_dequeue_zc_finish</b> <b>(struct</b> <b>rte_ring</b> <b>*</b> <b>r,</b> <b>unsigned</b> <b>int</b> <b>n)</b> <b>[static]</b>
       Complete  dequeuing  several  objects  from  the ring. Note that number of objects to dequeued should not
       exceed previous dequeue_start return value.

       <b>Parameters</b>
           <u>r</u> A pointer to the ring structure.
           <u>n</u> The number of objects to remove from the ring.

       Definition at line <b>527</b> of file <b>rte_ring_peek_zc.h</b>.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for DPDK from the source code.

DPDK                                             Version 24.11.2                           <u><a href="../man3/rte_ring_peek_zc.h.3.html">rte_ring_peek_zc.h</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>