<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tcl::process - Subprocess management</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tcl::process - Subprocess management

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>::tcl::process</b> <u>option</u> ?<u>arg</u> <u>arg</u> <u>...</u>?
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  command  provides a way to manage subprocesses created by the <b>open</b> and <b>exec</b> commands, as identified
       by the process identifiers (PIDs) of those subprocesses. The legal <u>options</u>  (which  may  be  abbreviated)
       are:

       <b>::tcl::process</b> <b>autopurge</b> ?<u>flag</u>?
              Automatic  purge facility. If <u>flag</u> is specified as a boolean value then it activates or deactivate
              autopurge. In all cases it returns the current status  as  a  boolean  value.  When  autopurge  is
              active,  <b>Tcl_ReapDetachedProcs</b>  is called each time the <b>exec</b> command is executed or a pipe channel
              created by <b>open</b> is closed. When  autopurge  is  inactive,  <b>::tcl::process</b>  purge  must  be  called
              explicitly. By default autopurge is active.

       <b>::tcl::process</b> <b>list</b>
              Returns  the  list  of subprocess PIDs. This includes all currently executing subprocesses and all
              terminated subprocesses that have not yet had their corresponding process table entries purged.

       <b>::tcl::process</b> <b>purge</b> ?<u>pids</u>?
              Cleans up all data associated with terminated subprocesses. If <u>pids</u> is specified as a list of PIDs
              then the command only cleanup data for the matching subprocesses if  they  exist,  and  raises  an
              error otherwise. If a process listed is still active, this command does nothing to that process.

       <b>::tcl::process</b> <b>status</b> ?<u>switches</u>? ?<u>pids</u>?
              Returns a dictionary mapping subprocess PIDs to their respective status. If <u>pids</u> is specified as a
              list  of PIDs then the command only returns the status of the matching subprocesses if they exist,
              and raises an error otherwise. For active processes, the status is an empty value. For  terminated
              processes, the status is a list with the following format: “<b>{</b><u>code</u> ?<u>msg</u> <u>errorCode</u>?<b>}</b>”, where:

              <u>code</u>   is a standard Tcl return code, i.e., <b>0</b> for TCL_OK and <b>1</b> for TCL_ERROR,

              <u>msg</u>    is the human-readable error message,

              <u>errorCode</u>
                     uses the same format as the <b>errorCode</b> global variable

              Note that <b>msg</b> and <b>errorCode</b> are only present for abnormally terminated processes (i.e. those where
              the  <u>code</u> is nonzero). Under the hood this command calls <b>Tcl_WaitPid</b> with the <b>WNOHANG</b> flag set for
              non-blocking behavior, unless the <b>-wait</b> switch is set (see below).

              Additionally, <b>::tcl::process</b> <b>status</b> accepts the following switches:

              <b>-wait</b>  By default the command returns immediately (the underlying <b>Tcl_WaitPid</b> is called  with  the
                     <b>WNOHANG</b>  flag  set)  unless this switch is set. If <u>pids</u> is specified as a list of PIDs then
                     the command waits until the status of the matching subprocesses are available. If <u>pids</u>  was
                     not specified, this command will wait for all known subprocesses.

              <b>--</b>     Marks  the  end  of switches.  The argument following this one will be treated as the first
                     <u>arg</u> even if it starts with a <b>-</b>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       These show the use of <b>::tcl::process</b>. Some of the results  from  <b>::tcl::process</b>  <b>status</b>  are  split  over
       multiple lines for readability.

              <b>::tcl::process</b> <b>autopurge</b>
                   <u>→</u> <u>true</u>
              <b>::tcl::process</b> <b>autopurge</b> false
                   <u>→</u> <u>false</u>

              set pid1 [exec command1 a b c | command2 d e f &amp;]
                   <u>→</u> <u>123</u> <u>456</u>
              set chan [open "|command1 a b c | command2 d e f"]
                   <u>→</u> <u>file123</u>
              set pid2 [pid $chan]
                   <u>→</u> <u>789</u> <u>1011</u>

              <b>::tcl::process</b> <b>list</b>
                   <u>→</u> <u>123</u> <u>456</u> <u>789</u> <u>1011</u>

              <b>::tcl::process</b> <b>status</b>
                   <u>→</u> <u>123</u> <u>0</u>
                     <u>456</u> <u>{1</u> <u>"child</u> <u>killed:</u> <u>write</u> <u>on</u> <u>pipe</u> <u>with</u> <u>no</u> <u>readers"</u> <u>{</u>
                       <u>CHILDKILLED</u> <u>456</u> <u>SIGPIPE</u> <u>"write</u> <u>on</u> <u>pipe</u> <u>with</u> <u>no</u> <u>readers"}}</u>
                     <u>789</u> <u>{1</u> <u>"child</u> <u>suspended:</u> <u>background</u> <u>tty</u> <u>read"</u> <u>{</u>
                       <u>CHILDSUSP</u> <u>789</u> <u>SIGTTIN</u> <u>"background</u> <u>tty</u> <u>read"}}</u>
                     <u>1011</u> <u>{}</u>

              <b>::tcl::process</b> <b>status</b> 123
                   <u>→</u> <u>123</u> <u>0</u>

              <b>::tcl::process</b> <b>status</b> 1011
                   <u>→</u> <u>1011</u> <u>{}</u>

              <b>::tcl::process</b> <b>status</b> -wait
                   <u>→</u> <u>123</u> <u>0</u>
                     <u>456</u> <u>{1</u> <u>"child</u> <u>killed:</u> <u>write</u> <u>on</u> <u>pipe</u> <u>with</u> <u>no</u> <u>readers"</u> <u>{</u>
                       <u>CHILDKILLED</u> <u>456</u> <u>SIGPIPE</u> <u>"write</u> <u>on</u> <u>pipe</u> <u>with</u> <u>no</u> <u>readers"}}</u>
                     <u>789</u> <u>{1</u> <u>"child</u> <u>suspended:</u> <u>background</u> <u>tty</u> <u>read"</u> <u>{</u>
                       <u>CHILDSUSP</u> <u>789</u> <u>SIGTTIN</u> <u>"background</u> <u>tty</u> <u>read"}}</u>
                     <u>1011</u> <u>{1</u> <u>"child</u> <u>process</u> <u>exited</u> <u>abnormally"</u> <u>{</u>
                       <u>CHILDSTATUS</u> <u>1011</u> <u>-1}}</u>

              <b>::tcl::process</b> <b>status</b> 1011
                   <u>→</u> <u>1011</u> <u>{1</u> <u>"child</u> <u>process</u> <u>exited</u> <u>abnormally"</u> <u>{</u>
                       <u>CHILDSTATUS</u> <u>1011</u> <u>-1}}</u>

              <b>::tcl::process</b> <b>purge</b>
              exec command1 1 2 3 &amp;
                   <u>→</u> <u>1213</u>
              <b>::tcl::process</b> <b>list</b>
                   <u>→</u> <u>1213</u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/exec.3tcl.html">exec</a>(3tcl), <a href="../man3tcl/open.3tcl.html">open</a>(3tcl), <a href="../man3tcl/pid.3tcl.html">pid</a>(3tcl), <a href="../man3tcl/Tcl_DetachPids.3tcl.html">Tcl_DetachPids</a>(3tcl), <a href="../man3tcl/Tcl_WaitPid.3tcl.html">Tcl_WaitPid</a>(3tcl), <a href="../man3tcl/Tcl_ReapDetachedProcs.3tcl.html">Tcl_ReapDetachedProcs</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       background, child, detach, process, wait

Tcl                                                    9.0                                         <u><a href="../man3tcl/process.3tcl.html">process</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>