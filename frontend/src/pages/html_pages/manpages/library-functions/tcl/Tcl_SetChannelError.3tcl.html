<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_SetChannelError,    Tcl_SetChannelErrorInterp,   Tcl_GetChannelError,   Tcl_GetChannelErrorInterp   -</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_SetChannelError,    Tcl_SetChannelErrorInterp,   Tcl_GetChannelError,   Tcl_GetChannelErrorInterp   -
       functions to create/intercept Tcl errors by channel drivers.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       <b>Tcl_SetChannelError</b>(<u>chan,</u> <u>msg</u>)

       <b>Tcl_SetChannelErrorInterp</b>(<u>interp,</u> <u>msg</u>)

       <b>Tcl_GetChannelError</b>(<u>chan,</u> <u>msgPtr</u>)

       <b>Tcl_GetChannelErrorInterp</b>(<u>interp,</u> <u>msgPtr</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Channel <u>chan</u> (in)          Refers to the Tcl channel whose bypass area is accessed.

       Tcl_Interp* <u>interp</u> (in)        Refers to the Tcl interpreter whose bypass area is accessed.

       Tcl_Obj* <u>msg</u> (in)              Error message put into a bypass area. A list of return options and values,
                                      followed  by  a  string  message.  Both  message  and   the   option/value
                                      information are optional. This <u>must</u> be a well-formed list.

       Tcl_Obj** <u>msgPtr</u> (out)         Reference  to a place where the message stored in the accessed bypass area
                                      can be stored in.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The standard definition of a Tcl channel driver does not permit the  direct  return  of  arbitrary  error
       messages,  except for the setting and retrieval of channel options. All other functions are restricted to
       POSIX error codes.

       The  functions  described  here  overcome  this  limitation.  Channel  drivers   are   allowed   to   use
       <b>Tcl_SetChannelError</b>  and  <b>Tcl_SetChannelErrorInterp</b>  to  place  arbitrary  error messages in <u>bypass</u> <u>areas</u>
       defined  for  channels  and  interpreters.  And  the  generic  I/O  layer  uses  <b>Tcl_GetChannelError</b>  and
       <b>Tcl_GetChannelErrorInterp</b>  to  look  for  messages  in  the  bypass areas and arrange for their return as
       errors. The POSIX error codes set by a driver are used now if and only if no messages are present.

       <b>Tcl_SetChannelError</b> stores error information in the bypass area of the specified channel. The  number  of
       references to the <b>msg</b> value goes up by one. Previously stored information will be discarded, by releasing
       the reference held by the channel. The channel reference must not be NULL.

       <b>Tcl_SetChannelErrorInterp</b>  stores  error information in the bypass area of the specified interpreter. The
       number of references to the <b>msg</b> value goes up by one. Previously stored information will be discarded, by
       releasing the reference held by the interpreter. The interpreter reference must not be NULL.

       <b>Tcl_GetChannelError</b> places either the error message held in the bypass area of the specified channel into
       <u>msgPtr</u>, or NULL; and resets the bypass, that is, after  an  invocation  all  following  invocations  will
       return  NULL,  until an intervening invocation of <b>Tcl_SetChannelError</b> with a non-NULL message. The <u>msgPtr</u>
       must not be NULL. The reference count of the message is not touched.  The reference  previously  held  by
       the  channel  is  now  held  by  the  caller of the function and it is its responsibility to release that
       reference when it is done with the value.

       <b>Tcl_GetChannelErrorInterp</b> places either the error message held  in  the  bypass  area  of  the  specified
       interpreter  into  <u>msgPtr</u>,  or  NULL;  and  resets the bypass, that is, after an invocation all following
       invocations will return NULL, until an intervening invocation of <b>Tcl_SetChannelErrorInterp</b>  with  a  non-
       NULL  message.  The  <u>msgPtr</u>  must  not  be  NULL. The reference count of the message is not touched.  The
       reference previously held by the interpreter is now held by the caller of the  function  and  it  is  its
       responsibility to release that reference when it is done with the value.

       Which functions of a channel driver are allowed to use which bypass function is listed below, as is which
       functions of the public channel API may leave a messages in the bypass areas.

       <b>Tcl_DriverInputProc</b>
              May use <b>Tcl_SetChannelError</b>, and only this function.

       <b>Tcl_DriverOutputProc</b>
              May use <b>Tcl_SetChannelError</b>, and only this function.

       <b>Tcl_DriverWideSeekProc</b>
              May use <b>Tcl_SetChannelError</b>, and only this function.

       <b>Tcl_DriverSetOptionProc</b>
              Has already the ability to pass arbitrary error messages. Must <u>not</u> use any of the new functions.

       <b>Tcl_DriverGetOptionProc</b>
              Has already the ability to pass arbitrary error messages. Must <u>not</u> use any of the new functions.

       <b>Tcl_DriverWatchProc</b>
              Must  <u>not</u> use any of the new functions. Is internally called and has no ability to return any type
              of error whatsoever.

       <b>Tcl_DriverBlockModeProc</b>
              May use <b>Tcl_SetChannelError</b>, and only this function.

       <b>Tcl_DriverGetHandleProc</b>
              Must <u>not</u> use any of the new functions. It is only a  low-level  function,  and  not  used  by  Tcl
              commands.

       <b>Tcl_DriverHandlerProc</b>
              Must  <u>not</u> use any of the new functions. Is internally called and has no ability to return any type
              of error whatsoever.

       Given the information above the following public functions of  the  Tcl  C  API  are  affected  by  these
       changes;  when  these  functions are called, the channel may now contain a stored arbitrary error message
       requiring processing by the caller.

              <b>Tcl_Flush</b>          <b>Tcl_GetsObj</b>          <b>Tcl_Gets</b>
              <b>Tcl_ReadChars</b>      <b>Tcl_ReadRaw</b>          <b>Tcl_Read</b>
              <b>Tcl_Seek</b>           <b>Tcl_StackChannel</b>     <b>Tcl_Tell</b>
              <b>Tcl_WriteChars</b>     <b>Tcl_WriteObj</b>         <b>Tcl_WriteRaw</b>
              <b>Tcl_Write</b>

       All other API functions are  unchanged.  In  particular,  the  functions  below  leave  all  their  error
       information in the interpreter result.

              <b>Tcl_Close</b>          <b>Tcl_UnstackChannel</b>   <b>Tcl_UnregisterChannel</b>

</pre><h4><b>REFERENCE</b> <b>COUNT</b> <b>MANAGEMENT</b></h4><pre>
       The  <u>msg</u>  argument  to  <b>Tcl_SetChannelError</b>  and  <b>Tcl_SetChannelErrorInterp</b>,  if  not  NULL, may have any
       reference count; these functions will copy.

       <b>Tcl_GetChannelError</b> and <b>Tcl_GetChannelErrorInterp</b> write a value reference into their <u>msgPtr</u>, but  do  not
       manipulate its reference count.  The reference count will be at least 1 (unless the reference is NULL).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/Tcl_Close.3tcl.html">Tcl_Close</a>(3tcl), <a href="../man3tcl/Tcl_OpenFileChannel.3tcl.html">Tcl_OpenFileChannel</a>(3tcl), <a href="../man3tcl/Tcl_SetErrno.3tcl.html">Tcl_SetErrno</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       channel driver, error messages, channel type

Tcl                                                    8.5                             <u><a href="../man3tcl/Tcl_SetChannelError.3tcl.html">Tcl_SetChannelError</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>