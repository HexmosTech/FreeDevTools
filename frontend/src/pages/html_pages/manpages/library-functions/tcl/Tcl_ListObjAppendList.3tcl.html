<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tcl_ListObjAppendList,  Tcl_ListObjAppendElement, Tcl_NewListObj, Tcl_SetListObj, Tcl_ListObjGetElements,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcl9.0-doc">tcl9.0-doc_9.0.1+dfsg-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Tcl_ListObjAppendList,  Tcl_ListObjAppendElement, Tcl_NewListObj, Tcl_SetListObj, Tcl_ListObjGetElements,
       Tcl_ListObjLength, Tcl_ListObjIndex, Tcl_ListObjReplace - manipulate Tcl values as lists

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;tcl.h&gt;</b>

       int
       <b>Tcl_ListObjAppendList</b>(<u>interp,</u> <u>listPtr,</u> <u>elemListPtr</u>)

       int
       <b>Tcl_ListObjAppendElement</b>(<u>interp,</u> <u>listPtr,</u> <u>objPtr</u>)

       Tcl_Obj *
       <b>Tcl_NewListObj</b>(<u>objc,</u> <u>objv</u>)

       <b>Tcl_SetListObj</b>(<u>objPtr,</u> <u>objc,</u> <u>objv</u>)

       int
       <b>Tcl_ListObjGetElements</b>(<u>interp,</u> <u>listPtr,</u> <u>objcPtr,</u> <u>objvPtr</u>)

       int
       <b>Tcl_ListObjLength</b>(<u>interp,</u> <u>listPtr,</u> <u>lengthPtr</u>)

       int
       <b>Tcl_ListObjIndex</b>(<u>interp,</u> <u>listPtr,</u> <u>index,</u> <u>objPtrPtr</u>)

       int
       <b>Tcl_ListObjReplace</b>(<u>interp,</u> <u>listPtr,</u> <u>first,</u> <u>count,</u> <u>objc,</u> <u>objv</u>)

</pre><h4><b>ARGUMENTS</b></h4><pre>
       Tcl_Interp <u>*interp</u> (in)                   If an error occurs while converting a value to be a list value,
                                                 an error message is left  in  the  interpreter's  result  value
                                                 unless <u>interp</u> is NULL.

       Tcl_Obj <u>*listPtr</u> (in/out)                 Points  to  the  list value to be manipulated.  If <u>listPtr</u> does
                                                 not already point to a list value, an attempt will be  made  to
                                                 convert it to one.

       Tcl_Obj <u>*elemListPtr</u> (in/out)             For   <b>Tcl_ListObjAppendList</b>,   this  points  to  a  list  value
                                                 containing elements to be appended onto <u>listPtr</u>.  Each  element
                                                 of  *<u>elemListPtr</u>  will  become  a  new  element of <u>listPtr</u>.  If
                                                 *<u>elemListPtr</u> is not NULL and does not already point to  a  list
                                                 value, an attempt will be made to convert it to one.

       Tcl_Obj <u>*objPtr</u> (in)                      For <b>Tcl_ListObjAppendElement</b>, points to the Tcl value that will
                                                 be appended to <u>listPtr</u>.  For <b>Tcl_SetListObj</b>, this points to the
                                                 Tcl value that will be converted to a list value containing the
                                                 <u>objc</u> elements of the array referenced by <u>objv</u>.

       Tcl_Size | int <u>*objcPtr</u> (in)              Points  to  location  where  <b>Tcl_ListObjGetElements</b>  stores the
                                                 number of element values in <u>listPtr</u>.  May be  (Tcl_Size  *)NULL
                                                 when  not  used.  If  it points to a variable which type is not
                                                 <b>Tcl_Size</b>, a  compiler  warning  will  be  generated.   If  your
                                                 extensions  is  compiled  with  -DTCL_8_API, this function will
                                                 return NULL for lists with more than  INT_MAX  elements  (which
                                                 should  trigger  proper error-handling), otherwise expect it to
                                                 crash.

       Tcl_Obj <u>***objvPtr</u> (out)                  A location where <b>Tcl_ListObjGetElements</b> stores a pointer to  an
                                                 array of pointers to the element values of <u>listPtr</u>.

       Tcl_Size <u>objc</u> (in)                        The number of Tcl values that <b>Tcl_NewListObj</b> will insert into a
                                                 new   list  value,  and  <b>Tcl_ListObjReplace</b>  will  insert  into
                                                 <u>listPtr</u>.  For <b>Tcl_SetListObj</b>,  the  number  of  Tcl  values  to
                                                 insert into <u>objPtr</u>.

       Tcl_Obj *const <u>objv[]</u> (in)                An  array  of  pointers  to values.  <b>Tcl_NewListObj</b> will insert
                                                 these values into a new list value and <b>Tcl_ListObjReplace</b>  will
                                                 insert them into an existing <u>listPtr</u>.  Each value will become a
                                                 separate list element.

       Tcl_Size | int <u>*lengthPtr</u> (out)           Points to location where <b>Tcl_ListObjLength</b> stores the length of
                                                 the  list.  May be (Tcl_Size *)NULL when not used. If it points
                                                 to a variable which type is not <b>Tcl_Size</b>,  a  compiler  warning
                                                 will  be  generated.   If  your  extensions  is  compiled  with
                                                 -DTCL_8_API, this function will return TCL_ERROR for lists with
                                                 more than INT_MAX elements (which should trigger proper  error-
                                                 handling), otherwise expect it to crash.

       Tcl_Size <u>index</u> (in)                       Index  of  the list element that <b>Tcl_ListObjIndex</b> is to return.
                                                 The first element has index 0.

       Tcl_Obj <u>**objPtrPtr</u> (out)                 Points to place where <b>Tcl_ListObjIndex</b> is to store a pointer to
                                                 the resulting list element value.

       Tcl_Size <u>first</u> (in)                       Index of the starting list element that  <b>Tcl_ListObjReplace</b>  is
                                                 to replace.  The list's first element has index 0.

       Tcl_Size <u>count</u> (in)                       The number of elements that <b>Tcl_ListObjReplace</b> is to replace.
________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Tcl  list values have an internal representation that supports the efficient indexing and appending.  The
       procedures described in this man page are used to create, modify, index, and append to  Tcl  list  values
       from C code.

       <b>Tcl_ListObjAppendList</b>  and  <b>Tcl_ListObjAppendElement</b>  both  add one or more values to the end of the list
       value referenced by <u>listPtr</u>.  <b>Tcl_ListObjAppendList</b> appends each element of the list value referenced  by
       <u>elemListPtr</u>  while  <b>Tcl_ListObjAppendElement</b>  appends  the  single  value  referenced  by  <u>objPtr</u>.   Both
       procedures will convert the value referenced by <u>listPtr</u> to a list value if necessary.  If an error occurs
       during conversion, both procedures return <b>TCL_ERROR</b> and leave  an  error  message  in  the  interpreter's
       result  value  if  <u>interp</u> is not NULL.  Similarly, if <u>elemListPtr</u> does not already refer to a list value,
       <b>Tcl_ListObjAppendList</b> will attempt to convert it to one and if an error occurs  during  conversion,  will
       return  <b>TCL_ERROR</b>  and  leave  an  error message in the interpreter's result value if interp is not NULL.
       Both procedures invalidate any old string representation of <u>listPtr</u> and, if it was converted  to  a  list
       value,  free  any  old  internal representation.  Similarly, <b>Tcl_ListObjAppendList</b> frees any old internal
       representation of <u>elemListPtr</u> if it converts it to  a  list  value.   After  appending  each  element  in
       <u>elemListPtr</u>, <b>Tcl_ListObjAppendList</b> increments the element's reference count since <u>listPtr</u> now also refers
       to  it.   For the same reason, <b>Tcl_ListObjAppendElement</b> increments <u>objPtr</u>'s reference count.  If no error
       occurs, the two procedures return <b>TCL_OK</b> after appending the values.

       <b>Tcl_NewListObj</b> and <b>Tcl_SetListObj</b> create a new value or  modify  an  existing  value  to  hold  the  <u>objc</u>
       elements of the array referenced by <u>objv</u> where each element is a pointer to a Tcl value.  If <u>objc</u> is less
       than  or  equal  to  zero,  they  return  an  empty value. If <u>objv</u> is NULL, the resulting list contains 0
       elements, with reserved space in an  internal  representation  for  <u>objc</u>  more  elements  (to  avoid  its
       reallocation  later).   The  new  value's  string  representation  is  left  invalid.  The two procedures
       increment the reference counts of the elements in <u>objc</u> since the list value now refers to them.  The  new
       list value returned by <b>Tcl_NewListObj</b> has reference count zero.

       <b>Tcl_ListObjGetElements</b>  returns  a  count  and a pointer to an array of the elements in a list value.  It
       returns the count by storing it in the address <u>objcPtr</u>.  Similarly,  it  returns  the  array  pointer  by
       storing  it  in  the address <u>objvPtr</u>.  The memory pointed to is managed by Tcl and should not be freed or
       written to by the caller. If the list is empty, 0 is stored at <u>objcPtr</u> and NULL at  <u>objvPtr</u>.  If  <u>objcPtr</u>
       points  to  a  variable  of type <b>int</b> and the list contains more than 2**31 elements, the function returns
       <b>TCL_ERROR</b>.  If <u>listPtr</u> is not already a list value, <b>Tcl_ListObjGetElements</b> will attempt to convert it  to
       one;  if  the  conversion  fails,  it  returns <b>TCL_ERROR</b> and leaves an error message in the interpreter's
       result value if <u>interp</u> is not NULL.  Otherwise it returns  <b>TCL_OK</b>  after  storing  the  count  and  array
       pointer.

       <b>Tcl_ListObjLength</b>  returns  the number of elements in the list value referenced by <u>listPtr</u>.  If the value
       is not already a list value, <b>Tcl_ListObjLength</b> will attempt to convert  it  to  one;  if  the  conversion
       fails,  it  returns  <b>TCL_ERROR</b> and leaves an error message in the interpreter's result value if <u>interp</u> is
       not NULL.  Otherwise it returns <b>TCL_OK</b> after storing the list's length.

       The procedure <b>Tcl_ListObjIndex</b> returns a pointer to the value at element <u>index</u> in the list referenced  by
       <u>listPtr</u>.  It returns this value by storing a pointer to it in the address <u>objPtrPtr</u>.  If <u>listPtr</u> does not
       already  refer  to  a  list  value, <b>Tcl_ListObjIndex</b> will attempt to convert it to one; if the conversion
       fails, it returns <b>TCL_ERROR</b> and leaves an error message in the interpreter's result value  if  <u>interp</u>  is
       not  NULL.   If  the  index  is  out of range, that is, <u>index</u> is negative or greater than or equal to the
       number of elements in the  list,  <b>Tcl_ListObjIndex</b>  stores  a  NULL  in  <u>objPtrPtr</u>  and  returns  <b>TCL_OK</b>.
       Otherwise  it returns <b>TCL_OK</b> after storing the element's value pointer.  The reference count for the list
       element is not incremented; the caller must do that if it needs to retain a pointer to  the  element,  or
       "bounce" the reference count when the element is no longer needed. This is because a returned element may
       have  a  reference  count  of 0. Abstract Lists create a new element Obj on demand, and do not retain any
       element Obj values. Therefore, the caller is responsible for freeing the element when  it  is  no  longer
       needed. Note that this is a change from Tcl 8 where all list elements always have a reference count of at
       least 1. (See <b>ABSTRACT</b> <b>LIST</b> <b>TYPES</b>, <b>STORAGE</b> <b>MANAGEMENT</b> <b>OF</b> <b>VALUES</b>, <a href="../man3tcl/Tcl_BounceRefCount.3tcl.html">Tcl_BounceRefCount</a>(3tcl), and <a href="../man3tcl/lseq.3tcl.html">lseq</a>(3tcl)
       for more information.)

       <b>Tcl_ListObjReplace</b>  replaces zero or more elements of the list referenced by <u>listPtr</u> with the <u>objc</u> values
       in the array referenced by <u>objv</u>.  If <u>listPtr</u> does not point to  a  list  value,  <b>Tcl_ListObjReplace</b>  will
       attempt  to  convert it to one; if the conversion fails, it returns <b>TCL_ERROR</b> and leaves an error message
       in the interpreter's result value if <u>interp</u> is not NULL.  Otherwise, it returns  <b>TCL_OK</b>  after  replacing
       the  values.   If <u>objv</u> is NULL, no new elements are added.  If the argument <u>first</u> is zero or negative, it
       refers to the first element.  If <u>first</u> is greater than or equal to the number of elements  in  the  list,
       then  no  elements  are  deleted;  the  new elements are appended to the list.  <u>count</u> gives the number of
       elements to replace.  If <u>count</u> is zero or negative then no elements are deleted;  the  new  elements  are
       simply  inserted before the one designated by <u>first</u>.  <b>Tcl_ListObjReplace</b> invalidates <u>listPtr</u>'s old string
       representation.  The reference counts of any elements  inserted  from  <u>objv</u>  are  incremented  since  the
       resulting  list  now  refers  to  them.   Similarly,  the  reference  counts  for any replaced values are
       decremented.

       Because <b>Tcl_ListObjReplace</b> combines both element insertion and deletion, it can be used  to  implement  a
       number  of  list  operations.   For example, the following code inserts the <u>objc</u> values referenced by the
       array of value pointers <u>objv</u> just before the element <u>index</u> of the list referenced by <u>listPtr</u>:

              result = <b>Tcl_ListObjReplace</b>(interp, listPtr, index, 0,
                      objc, objv);

       Similarly, the following code appends the <u>objc</u> values referenced by the array <u>objv</u> to the end of the list
       <u>listPtr</u>:

              result = <b>Tcl_ListObjLength</b>(interp, listPtr, &amp;length);
              if (result == TCL_OK) {
                  result = <b>Tcl_ListObjReplace</b>(interp, listPtr, length, 0,
                          objc, objv);
              }

       The <u>count</u> list elements starting at <u>first</u> can be deleted by simply calling <b>Tcl_ListObjReplace</b> with a NULL
       <u>objvPtr</u>:

              result = <b>Tcl_ListObjReplace</b>(interp, listPtr, first, count,
                      0, NULL);

</pre><h4><b>REFERENCE</b> <b>COUNT</b> <b>MANAGEMENT</b></h4><pre>
       <b>Tcl_NewListObj</b> always returns a zero-reference object, much like <b>Tcl_NewObj</b>. If a non-NULL <u>objv</u>  argument
       is given, the reference counts of the first <u>objc</u> values in that array are incremented.

       <b>Tcl_SetListObj</b>  does  not  modify  the  reference count of its <u>objPtr</u> argument, but does require that the
       object be unshared. The reference counts of the first <u>objc</u> values in the <u>objv</u> array are incremented.

       <b>Tcl_ListObjGetElements</b>, <b>Tcl_ListObjIndex</b>, and <b>Tcl_ListObjLength</b> do not  modify  the  reference  count  of
       their  <u>listPtr</u> arguments; they only read. Note however that these three functions may set the interpreter
       result; if that is the only place that is holding a reference to the object, it will be deleted.

       <b>Tcl_ListObjAppendList</b>, <b>Tcl_ListObjAppendElement</b>,  and  <b>Tcl_ListObjReplace</b>  require  an  unshared  <u>listPtr</u>
       argument.    <b>Tcl_ListObjAppendList</b>   only   reads  its  <u>elemListPtr</u>  argument.   <b>Tcl_ListObjAppendElement</b>
       increments the reference count of its <u>objPtr</u> on  success.  <b>Tcl_ListObjReplace</b>  increments  the  reference
       count of the first <u>objc</u> values in the <u>objv</u> array on success.  Note however that all these three functions
       may  set  the interpreter result on failure; if that is the only place that is holding a reference to the
       object, it will be deleted.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3tcl/Tcl_NewObj.3tcl.html">Tcl_NewObj</a>(3tcl), <a href="../man3tcl/Tcl_DecrRefCount.3tcl.html">Tcl_DecrRefCount</a>(3tcl), <a href="../man3tcl/Tcl_IncrRefCount.3tcl.html">Tcl_IncrRefCount</a>(3tcl), <a href="../man3tcl/Tcl_GetObjResult.3tcl.html">Tcl_GetObjResult</a>(3tcl)

</pre><h4><b>KEYWORDS</b></h4><pre>
       append, index, insert, internal representation, length, list, list value, list type, value,  value  type,
       replace, string representation

Tcl                                                    8.0                                     <u><a href="../man3tcl/Tcl_ListObj.3tcl.html">Tcl_ListObj</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>