<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLINFO_ACTIVESOCKET - get the active socket</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLINFO_ACTIVESOCKET - get the active socket

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_getinfo(CURL *handle, CURLINFO_ACTIVESOCKET,
                                  curl_socket_t *socket);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass  a  pointer  to  a  curl_socket_t  to  receive the most recently active socket used for the transfer
       connection by this curl session. If the socket is no longer valid, <u>CURL_SOCKET_BAD</u> is returned. When  you
       are  finished working with the socket, you must call <u><a href="../man3/curl_easy_cleanup.3.html">curl_easy_cleanup</a>(3)</u> as usual on the easy handle and
       let libcurl close the socket and cleanup other resources associated with the handle. This option  returns
       the  active  socket  only  after  the  transfer  is  complete,  and is typically used in combination with
       <u><a href="../man3/CURLOPT_CONNECT_ONLY.3.html">CURLOPT_CONNECT_ONLY</a>(3)</u>, which skips the transfer phase.

       <u><a href="../man3/CURLINFO_ACTIVESOCKET.3.html">CURLINFO_ACTIVESOCKET</a>(3)</u> was added as a replacement for <u><a href="../man3/CURLINFO_LASTSOCKET.3.html">CURLINFO_LASTSOCKET</a>(3)</u>  since  that  one  is  not
       working on all platforms.

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           CURLcode res;
           curl_socket_t sockfd;
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");

           /* Do not do the transfer - only connect to host */
           curl_easy_setopt(curl, CURLOPT_CONNECT_ONLY, 1L);
           res = curl_easy_perform(curl);
           if(res != CURLE_OK) {
             printf("Error: %s\n", curl_easy_strerror(res));
             curl_easy_cleanup(curl);
             return 1;
           }

           /* Extract the socket from the curl handle */
           res = curl_easy_getinfo(curl, CURLINFO_ACTIVESOCKET, &amp;sockfd);
           if(!res &amp;&amp; sockfd != CURL_SOCKET_BAD) {
             /* operate on sockfd */
           }

           curl_easy_cleanup(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.45.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_getinfo.3.html">curl_easy_getinfo</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLINFO_LASTSOCKET.3.html">CURLINFO_LASTSOCKET</a></b>(3), <b><a href="../man3/CURLOPT_CONNECT_ONLY.3.html">CURLOPT_CONNECT_ONLY</a></b>(3), <b><a href="../man3/curl_easy_getinfo.3.html">curl_easy_getinfo</a></b>(3), <b><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a></b>(3)

libcurl                                            2025-06-16                           <u><a href="../man3/CURLINFO_ACTIVESOCKET.3.html">CURLINFO_ACTIVESOCKET</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>