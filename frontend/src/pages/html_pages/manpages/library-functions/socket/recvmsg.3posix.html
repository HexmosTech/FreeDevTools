<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       recvmsg — receive a message from a socket

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;sys/socket.h&gt;

       ssize_t recvmsg(int <u>socket</u>, struct msghdr *<u>message</u>, int <u>flags</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>recvmsg</u>()  function shall receive a message from a connection-mode or connectionless-mode socket. It
       is normally used with connectionless-mode sockets because it permits  the  application  to  retrieve  the
       source address of received data.

       The <u>recvmsg</u>() function takes the following arguments:

       <u>socket</u>      Specifies the socket file descriptor.

       <u>message</u>     Points  to a <b>msghdr</b> structure, containing both the buffer to store the source address and the
                   buffers for the incoming message. The length and format of the address depend on the  address
                   family  of  the  socket. The <u>msg_flags</u> member is ignored on input, but may contain meaningful
                   values on output.

       <u>flags</u>       Specifies the type of message reception. Values of this  argument  are  formed  by  logically
                   OR'ing zero or more of the following values:

                   MSG_OOB     Requests out-of-band data. The significance and semantics of out-of-band data are
                               protocol-specific.

                   MSG_PEEK    Peeks at the incoming message.

                   MSG_WAITALL On  SOCK_STREAM  sockets  this  requests  that  the function block until the full
                               amount of data can be returned. The function may return  the  smaller  amount  of
                               data  if  the  socket  is  a  message-based socket, if a signal is caught, if the
                               connection is terminated, if MSG_PEEK was specified, or if an  error  is  pending
                               for the socket.

       The  <u>recvmsg</u>() function shall receive messages from unconnected or connected sockets and shall return the
       length of the message.

       The <u>recvmsg</u>() function shall return the total length of the message. For message-based sockets,  such  as
       SOCK_DGRAM  and  SOCK_SEQPACKET,  the entire message shall be read in a single operation. If a message is
       too long to fit in the supplied buffers, and MSG_PEEK is not set in the <u>flags</u> argument, the excess  bytes
       shall  be  discarded,  and  MSG_TRUNC  shall  be set in the <u>msg_flags</u> member of the <b>msghdr</b> structure. For
       stream-based sockets, such as SOCK_STREAM, message boundaries shall be ignored. In this case, data  shall
       be returned to the user as soon as it becomes available, and no data shall be discarded.

       If the MSG_WAITALL flag is not set, data shall be returned only up to the end of the first message.

       If  no  messages  are  available at the socket and O_NONBLOCK is not set on the socket's file descriptor,
       <u>recvmsg</u>() shall block until a message arrives. If no messages are available at the socket and  O_NONBLOCK
       is  set  on  the socket's file descriptor, the <u>recvmsg</u>() function shall fail and set <u>errno</u> to <b>[EAGAIN]</b> or
       <b>[EWOULDBLOCK]</b>.

       In the <b>msghdr</b> structure, the <u>msg_name</u> member may be a null pointer if the source address is not required.
       Otherwise, if the socket is unconnected, the <u>msg_name</u> member points to a <b>sockaddr</b> structure in which  the
       source  address is to be stored, and the <u>msg_namelen</u> member on input specifies the length of the supplied
       <b>sockaddr</b> structure and on output specifies the length of the stored address.  If the actual length of the
       address is greater than the length of the supplied  <b>sockaddr</b>  structure,  the  stored  address  shall  be
       truncated. If the socket is connected, the <u>msg_name</u> and <u>msg_namelen</u> members shall be ignored. The <u>msg_iov</u>
       and  <u>msg_iovlen</u>  fields  are used to specify where the received data shall be stored.  The <u>msg_iov</u> member
       points to an array of <b>iovec</b> structures; the <u>msg_iovlen</u> member shall be  set  to  the  dimension  of  this
       array.  In  each <b>iovec</b> structure, the <u>iov_base</u> field specifies a storage area and the <u>iov_len</u> field gives
       its size in bytes. Each storage area indicated by <u>msg_iov</u> is filled with received data in turn until  all
       of the received data is stored or all of the areas have been filled.

       Upon  successful completion, the <u>msg_flags</u> member of the message header shall be the bitwise-inclusive OR
       of all of the following flags that indicate conditions detected for the received message:

       MSG_EOR     End-of-record was received (if supported by the protocol).

       MSG_OOB     Out-of-band data was received.

       MSG_TRUNC   Normal data was truncated.

       MSG_CTRUNC  Control data was truncated.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, <u>recvmsg</u>() shall return the length of the message in bytes. If no messages are
       available to be received and the peer has performed  an  orderly  shutdown,  <u>recvmsg</u>()  shall  return  0.
       Otherwise, -1 shall be returned and <u>errno</u> set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <u>recvmsg</u>() function shall fail if:

       <b>EAGAIN</b> or <b>EWOULDBLOCK</b>
              The  socket's  file  descriptor  is  marked  O_NONBLOCK  and no data is waiting to be received; or
              MSG_OOB is set and no out-of-band data is available and either the  socket's  file  descriptor  is
              marked O_NONBLOCK or the socket does not support blocking to await out-of-band data.

       <b>EBADF</b>  The <u>socket</u> argument is not a valid open file descriptor.

       <b>ECONNRESET</b>
              A connection was forcibly closed by a peer.

       <b>EINTR</b>  This function was interrupted by a signal before any data was available.

       <b>EINVAL</b> The  sum  of the <u>iov_len</u> values overflows a <b>ssize_t</b>, or the MSG_OOB flag is set and no out-of-band
              data is available.

       <b>EMSGSIZE</b>
              The <u>msg_iovlen</u> member of the <b>msghdr</b> structure pointed to by <u>message</u> is less than or equal to 0, or
              is greater than {IOV_MAX}.

       <b>ENOTCONN</b>
              A receive is attempted on a connection-mode socket that is not connected.

       <b>ENOTSOCK</b>
              The <u>socket</u> argument does not refer to a socket.

       <b>EOPNOTSUPP</b>
              The specified flags are not supported for this socket type.

       <b>ETIMEDOUT</b>
              The connection timed out during connection establishment, or due  to  a  transmission  timeout  on
              active connection.

       The <u>recvmsg</u>() function may fail if:

       <b>EIO</b>    An I/O error occurred while reading from or writing to the file system.

       <b>ENOBUFS</b>
              Insufficient resources were available in the system to perform the operation.

       <b>ENOMEM</b> Insufficient memory was available to fulfill the request.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
       None.

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       The <u>select</u>() and <u>poll</u>() functions can be used to determine when data is available to be received.

</pre><h4><b>RATIONALE</b></h4><pre>
       None.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>poll</u>(), <u>pselect</u>(), <u>recv</u>(), <u>recvfrom</u>(), <u>send</u>(), <u>sendmsg</u>(), <u>sendto</u>(), <u>shutdown</u>(), <u>socket</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;sys_socket.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                       <u><a href="../man3POSIX/RECVMSG.3POSIX.html">RECVMSG</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>