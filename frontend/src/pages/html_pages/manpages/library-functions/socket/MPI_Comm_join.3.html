<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MPI_Comm_join -  Connect two MPI processed joined by a socket</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/lam4-dev">lam4-dev_7.1.4-7.2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       MPI_Comm_join -  Connect two MPI processed joined by a socket

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;mpi.h&gt;
       int
       MPI_Comm_join(int fd, MPI_Comm *newcomm)

</pre><h4><b>INPUT</b> <b>PARAMETER</b></h4><pre>
       <b>fd</b>     - socket file descriptor

</pre><h4><b>OUTPUT</b> <b>PARAMETER</b></h4><pre>
       <b>newcomm</b>
              - intercommunicator with client as remote group

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  function only works between two LAM/MPI processes that are connected by a socket.  They either must
       have the same endian orientation, or not have used  the  homogeneous  flag  to  <u>mpirun</u>  (1)  (-O).   Both
       processes  must  be in a single LAM universe -- they must share LAM daemons that are already connected to
       each other.  That is, they were either initially <a href="../man1/lamboot.1.html">lamboot</a>(1)ed together, or a <a href="../man1/lamgrow.1.html">lamgrow</a>(1) command was given
       to grow an initial LAM universe such that the resulting set includes the two hosts in question.

       The socket may not  be  used  by  the  calling  application  until  <u>MPI_Comm_join</u>  has  completed.   When
       <u>MPI_Comm_join</u>  completes,  <u>fd</u> may be used by the calling application.  Per MPI-2, the socket is only used
       for initial handshaking -- it will not be used as the communications channel between the newly  connected
       processes.

</pre><h4><b>SAMPLE</b></h4><pre>
       The  following  code shows an abbreviated example using <u>MPI_Comm_join</u> since no example is provided in the
       MPI-2 standard.  Note that only one rank in each MPI application should call  this  function  since  each
       socket  can only have two endpoints (i.e., an endpoint in each process).  Upon successful completion, the
       intercommunicator that is returned will have two members -- the local process and the remote process.

       MPI_Comm
       do_join(char* server_name, int port) {
       int sfd, fd = -1;
       unsigned char addr[4];
       MPI_Comm intercomm;
       if (server_name != NULL) {
       if (getinetaddr(server_name, &amp;addr) == 0)
       fd = open_socket_to_server(addr, port);
       } else {
       if ((sfd = open_listening_socket(&amp;port)) &gt;= 0) {
       fd = accept_client_socket(sfd, -1);
       close(sfd);
       }
       }
       if (fd &lt; 0)
       MPI_Abort(MPI_COMM_WORLD, 0);
       MPI_Comm_join(fd, &amp;intercomm);
       return intercomm;
       }

</pre><h4><b>NOTES</b> <b>FOR</b> <b>FORTRAN</b></h4><pre>
       All MPI routines in Fortran (except for <u>MPI_WTIME</u> and <u>MPI_WTICK</u> ) have an additional argument <u>ierr</u> at the
       end of the argument list.  <u>ierr</u> is an integer and has the same meaning as the return value of the routine
       in C.  In Fortran, MPI routines are subroutines, and are invoked with the <u>call</u> statement.

       All MPI objects (e.g., <u>MPI_Datatype</u> , <u>MPI_Comm</u> ) are of type <u>INTEGER</u> in Fortran.

</pre><h4><b>USAGE</b> <b>WITH</b> <b>IMPI</b> <b>EXTENSIONS</b></h4><pre>
       The IMPI standard only supports MPI-1 functions.  Hence, this  function  is  currently  not  designed  to
       operate within an IMPI job.

</pre><h4><b>ERRORS</b></h4><pre>
       If an error occurs in an MPI function, the current MPI error handler is called to handle it.  By default,
       this  error  handler  aborts the MPI job.  The error handler may be changed with <u>MPI_Errhandler_set</u> ; the
       predefined error handler <u>MPI_ERRORS_RETURN</u> may be used to cause error values to be  returned  (in  C  and
       Fortran;  this  error  handler is less useful in with the C++ MPI bindings.  The predefined error handler
       <u>MPI::ERRORS_THROW_EXCEPTIONS</u> should be used in C++ if the error value needs to be recovered).  Note  that
       MPI does <u>not</u> guarantee that an MPI program can continue past an error.

       All  MPI routines (except <u>MPI_Wtime</u> and <u>MPI_Wtick</u> ) return an error value; C routines as the value of the
       function and Fortran routines in the last argument.  The C++ bindings for MPI do not return error values;
       instead, error values are communicated  by  throwing  exceptions  of  type  <u>MPI::Exception</u>  (but  not  by
       default).  Exceptions are only thrown if the error value is not <u>MPI::SUCCESS</u> .

       Note that if the <u>MPI::ERRORS_RETURN</u> handler is set in C++, while MPI functions will return upon an error,
       there will be no way to recover what the actual error value was.
       <b>MPI_SUCCESS</b>
              - No error; MPI routine completed successfully.
       <b>MPI_ERR_ARG</b>
              -  Invalid  argument.   Some  argument is invalid and is not identified by a specific error class.
              This is typically a NULL pointer or other such error.
       <b>MPI_ERR_INTERN</b>
              - An internal error has been detected.  This is fatal.  Please  send  a  bug  report  to  the  LAM
              mailing list (see <u><a href="http://www.lam-mpi.org/contact.php">http://www.lam-mpi.org/contact.php</a></u> ).
       <b>MPI_ERR_OTHER</b>
              - Other error; use <u>MPI_Error_string</u> to get more information about this error code.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/lamboot.1.html">lamboot</a>(1), <a href="../man1/lamgrow.1.html">lamgrow</a>(1), <a href="../man1/mpirun.1.html">mpirun</a>(1), <a href="../man3/MPI_Finalize.3.html">MPI_Finalize</a>(3)

</pre><h4><b>MORE</b> <b>INFORMATION</b></h4><pre>
       For  more  information,  please  see the official MPI Forum web site, which contains the text of both the
       MPI-1 and MPI-2 standards.  These documents contain detailed information about each MPI function (most of
       which is not duplicated in these man pages).

       <u><a href="http://www.mpi-forum.org/">http://www.mpi-forum.org/</a></u>

</pre><h4><b>LOCATION</b></h4><pre>
       join.c

LAM/MPI 7.1.4                                       6/24/2006                                   <u><a href="../man3/MPI_Comm_join.3.html">MPI_Comm_join</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>