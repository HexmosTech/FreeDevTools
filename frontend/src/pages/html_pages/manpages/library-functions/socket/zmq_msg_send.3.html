<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>zmq_msg_send - send a message part on a socket</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libzmq3-dev">libzmq3-dev_4.3.5-1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       zmq_msg_send - send a message part on a socket

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>int</b> <b>zmq_msg_send</b> <b>(zmq_msg_t</b> <u>*msg</u><b>,</b> <b>void</b> <u>*socket</u><b>,</b> <b>int</b> <u>flags</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>zmq_msg_send()</u> function is identical to <b><a href="../man3/zmq_sendmsg.3.html">zmq_sendmsg</a></b>(3), which shall be deprecated in future versions.
       <u>zmq_msg_send()</u> is more consistent with other message manipulation functions.

       The <u>zmq_msg_send()</u> function shall queue the message referenced by the <u>msg</u> argument to be sent to the
       socket referenced by the <u>socket</u> argument. The <u>flags</u> argument is a combination of the flags defined below:

       <b>ZMQ_DONTWAIT</b>
           For socket types (DEALER, PUSH) that block (either with ZMQ_IMMEDIATE option set and no peer
           available, or all peers having full high-water mark), specifies that the operation should be
           performed in non-blocking mode. If the message cannot be queued on the <u>socket</u>, the <u>zmq_msg_send()</u>
           function shall fail with <u>errno</u> set to EAGAIN.

       <b>ZMQ_SNDMORE</b>
           Specifies that the message being sent is a multi-part message, and that further message parts are to
           follow. Refer to the section regarding multi-part messages below for a detailed description.

       The <u>zmq_msg_t</u> structure passed to <u>zmq_msg_send()</u> is nullified on a successful call. If you want to send
       the same message to multiple sockets you have to copy it (e.g. using <u>zmq_msg_copy()</u>). If the call fails,
       the <u>zmq_msg_t</u> structure stays intact, and must be consumed by another call to <u>zmq_msg_send()</u> on the same
       or another socket, or released using <u>zmq_msg_close()</u> to avoid a memory leak.

           <b>Note</b>

           A successful invocation of <u>zmq_msg_send()</u> does not indicate that the message has been transmitted to
           the network, only that it has been queued on the <u>socket</u> and 0MQ has assumed responsibility for the
           message. You do not need to call <u>zmq_msg_close()</u> after a successful <u>zmq_msg_send()</u>.

   <b>Multi-part</b> <b>messages</b>
       A 0MQ message is composed of 1 or more message parts. Each message part is an independent <u>zmq_msg_t</u> in
       its own right. 0MQ ensures atomic delivery of messages: peers shall receive either all <u>message</u> <u>parts</u> of a
       message or none at all. The total number of message parts is unlimited except by available memory.

       An application that sends multi-part messages must use the <u>ZMQ_SNDMORE</u> flag when sending each message
       part except the final one.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       The <u>zmq_msg_send()</u> function shall return number of bytes in the message if successful (if number of bytes
       is higher than <u>MAX_INT</u>, the function will return <u>MAX_INT</u>). Otherwise it shall return -1 and set <u>errno</u> to
       one of the values defined below.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EAGAIN</b>
           Non-blocking mode was requested and the message cannot be sent at the moment.

       <b>ENOTSUP</b>
           The <u>zmq_msg_send()</u> operation is not supported by this socket type.

       <b>EINVAL</b>
           The sender tried to send multipart data, which the socket type does not allow.

       <b>EFSM</b>
           The <u>zmq_msg_send()</u> operation cannot be performed on this socket at the moment due to the socket not
           being in the appropriate state. This error may occur with socket types that switch between several
           states, such as ZMQ_REP. See the <u>messaging</u> <u>patterns</u> section of <b><a href="../man3/zmq_socket.3.html">zmq_socket</a></b>(3) for more information.

       <b>ETERM</b>
           The 0MQ <u>context</u> associated with the specified <u>socket</u> was terminated.

       <b>ENOTSOCK</b>
           The provided <u>socket</u> was invalid.

       <b>EINTR</b>
           The operation was interrupted by delivery of a signal before the message was sent.

       <b>EFAULT</b>
           Invalid message.

       <b>EHOSTUNREACH</b>
           The message cannot be routed.

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>Filling</b> <b>in</b> <b>a</b> <b>message</b> <b>and</b> <b>sending</b> <b>it</b> <b>to</b> <b>a</b> <b>socket</b>.

           /* Create a new message, allocating 6 bytes for message content */
           zmq_msg_t msg;
           int rc = zmq_msg_init_size (&amp;msg, 6);
           assert (rc == 0);
           /* Fill in message content with 'AAAAAA' */
           memset (zmq_msg_data (&amp;msg), 'A', 6);
           /* Send the message to the socket */
           rc = zmq_msg_send (&amp;msg, socket, 0);
           assert (rc == 6);

       <b>Sending</b> <b>a</b> <b>multi-part</b> <b>message</b>.

           /* Send a multi-part message consisting of three parts to socket */
           rc = zmq_msg_send (&amp;part1, socket, ZMQ_SNDMORE);
           rc = zmq_msg_send (&amp;part2, socket, ZMQ_SNDMORE);
           /* Final part; no more parts to follow */
           rc = zmq_msg_send (&amp;part3, socket, 0);

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/zmq_recv.3.html">zmq_recv</a></b>(3) <b><a href="../man3/zmq_send.3.html">zmq_send</a></b>(3) <b><a href="../man3/zmq_msg_recv.3.html">zmq_msg_recv</a></b>(3) <b><a href="../man7/zmq_socket.7.html">zmq_socket</a></b>(7) <b><a href="../man7/zmq.7.html">zmq</a></b>(7)

</pre><h4><b>AUTHORS</b></h4><pre>
       This page was written by the 0MQ community. To make a change please read the 0MQ Contribution Policy at
       <b><a href="http://www.zeromq.org/docs">http://www.zeromq.org/docs</a>:contributing</b>.

0MQ 4.3.5                                          03/31/2024                                    <u><a href="../man3/ZMQ_MSG_SEND.3.html">ZMQ_MSG_SEND</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>