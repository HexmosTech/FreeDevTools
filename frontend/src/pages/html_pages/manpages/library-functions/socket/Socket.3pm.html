<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"Socket" - networking constants and support functions</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libsocket-perl">libsocket-perl_2.038-1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "Socket" - networking constants and support functions

</pre><h4><b>SYNOPSIS</b></h4><pre>
       "Socket" a low-level module used by, among other things, the IO::Socket family of modules. The following
       examples demonstrate some low-level uses but a practical program would likely use the higher-level API
       provided by "IO::Socket" or similar instead.

           use Socket qw(PF_INET SOCK_STREAM pack_sockaddr_in inet_aton);

           socket(my $socket, PF_INET, SOCK_STREAM, 0)
               or die "socket: $!";

           my $port = getservbyname "echo", "tcp";
           connect($socket, pack_sockaddr_in($port, inet_aton("localhost")))
               or die "connect: $!";

           print $socket "Hello, world!\n";
           print &lt;$socket&gt;;

       See also the "EXAMPLES" section.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module provides a variety of constants, structure manipulators and other functions related to
       socket-based networking. The values and functions provided are useful when used in conjunction with Perl
       core functions such as <b>socket()</b>, <b>setsockopt()</b> and <b>bind()</b>. It also provides several other support
       functions, mostly for dealing with conversions of network addresses between human-readable and native
       binary forms, and for hostname resolver operations.

       Some constants and functions are exported by default by this module; but for backward-compatibility any
       recently-added symbols are not exported by default and must be requested explicitly. When an import list
       is provided to the "use Socket" line, the default exports are not automatically imported. It is therefore
       best practice to always to explicitly list all the symbols required.

       Also, some common socket "newline" constants are provided: the constants "CR", "LF", and "CRLF", as well
       as $CR, $LF, and $CRLF, which map to "\015", "\012", and "\015\012". If you do not want to use the
       literal characters in your programs, then use the constants provided here. They are not exported by
       default, but can be imported individually, and with the ":crlf" export tag:

           use Socket qw(:DEFAULT :crlf);

           $sock-&gt;print("GET / HTTP/1.0$CRLF");

       The entire <b>getaddrinfo()</b> subsystem can be exported using the tag ":addrinfo"; this exports the
       <b>getaddrinfo()</b> and <b>getnameinfo()</b> functions, and all the "AI_*", "NI_*", "NIx_*" and "EAI_*" constants.

</pre><h4><b>CONSTANTS</b></h4><pre>
       In each of the following groups, there may be many more constants provided than just the ones given as
       examples in the section heading. If the heading ends "..." then this means there are likely more; the
       exact constants provided will depend on the OS and headers found at compile-time.

   <b>PF_INET,</b> <b>PF_INET6,</b> <b>PF_UNIX,</b> <b>...</b>
       Protocol family constants to use as the first argument to <b>socket()</b> or the value of the "SO_DOMAIN" or
       "SO_FAMILY" socket option.

   <b>AF_INET,</b> <b>AF_INET6,</b> <b>AF_UNIX,</b> <b>...</b>
       Address family constants used by the socket address structures, to pass to such functions as <b>inet_pton()</b>
       or <b>getaddrinfo()</b>, or are returned by such functions as <b>sockaddr_family()</b>.

   <b>SOCK_STREAM,</b> <b>SOCK_DGRAM,</b> <b>SOCK_RAW,</b> <b>...</b>
       Socket type constants to use as the second argument to <b>socket()</b>, or the value of the "SO_TYPE" socket
       option.

   <b>SOCK_NONBLOCK.</b> <b>SOCK_CLOEXEC</b>
       Linux-specific shortcuts to specify the "O_NONBLOCK" and "FD_CLOEXEC" flags during a <a href="../man2/socket.2.html">socket</a>(2) call.

           socket( my $sockh, PF_INET, SOCK_DGRAM|SOCK_NONBLOCK, 0 )

   <b>SOL_SOCKET</b>
       Socket option level constant for <b>setsockopt()</b> and <b>getsockopt()</b>.

   <b>SO_ACCEPTCONN,</b> <b>SO_BROADCAST,</b> <b>SO_ERROR,</b> <b>...</b>
       Socket option name constants for <b>setsockopt()</b> and <b>getsockopt()</b> at the "SOL_SOCKET" level.

   <b>IP_OPTIONS,</b> <b>IP_TOS,</b> <b>IP_TTL,</b> <b>...</b>
       Socket option name constants for IPv4 socket options at the "IPPROTO_IP" level.

   <b>IP_PMTUDISC_WANT,</b> <b>IP_PMTUDISC_DONT,</b> <b>...</b>
       Socket option value constants for "IP_MTU_DISCOVER" socket option.

   <b>IPTOS_LOWDELAY,</b> <b>IPTOS_THROUGHPUT,</b> <b>IPTOS_RELIABILITY,</b> <b>...</b>
       Socket option value constants for "IP_TOS" socket option.

   <b>MSG_BCAST,</b> <b>MSG_OOB,</b> <b>MSG_TRUNC,</b> <b>...</b>
       Message flag constants for <b>send()</b> and <b>recv()</b>.

   <b>SHUT_RD,</b> <b>SHUT_RDWR,</b> <b>SHUT_WR</b>
       Direction constants for <b>shutdown()</b>.

   <b>INADDR_ANY,</b> <b>INADDR_BROADCAST,</b> <b>INADDR_LOOPBACK,</b> <b>INADDR_NONE</b>
       Constants giving the special "AF_INET" addresses for wildcard, broadcast, local loopback, and invalid
       addresses.

       Normally equivalent to inet_aton('0.0.0.0'), inet_aton('255.255.255.255'), inet_aton('localhost') and
       inet_aton('255.255.255.255') respectively.

   <b>IPPROTO_IP,</b> <b>IPPROTO_IPV6,</b> <b>IPPROTO_TCP,</b> <b>...</b>
       IP protocol constants to use as the third argument to <b>socket()</b>, the level argument to <b>getsockopt()</b> or
       <b>setsockopt()</b>, or the value of the "SO_PROTOCOL" socket option.

   <b>TCP_CORK,</b> <b>TCP_KEEPALIVE,</b> <b>TCP_NODELAY,</b> <b>...</b>
       Socket option name constants for TCP socket options at the "IPPROTO_TCP" level.

   <b>IN6ADDR_ANY,</b> <b>IN6ADDR_LOOPBACK</b>
       Constants giving the special "AF_INET6" addresses for wildcard and local loopback.

       Normally equivalent to inet_pton(AF_INET6, "::") and inet_pton(AF_INET6, "::1") respectively.

   <b>IPV6_ADD_MEMBERSHIP,</b> <b>IPV6_MTU,</b> <b>IPV6_V6ONLY,</b> <b>...</b>
       Socket option name constants for IPv6 socket options at the "IPPROTO_IPV6" level.

</pre><h4><b>STRUCTURE</b> <b>MANIPULATORS</b></h4><pre>
       The following functions convert between lists of Perl values and packed binary strings representing
       structures.

   <b>$family</b> <b>=</b> <b>sockaddr_family</b> <b>$sockaddr</b>
       Takes a packed socket address (as returned by <b>pack_sockaddr_in()</b>, <b>pack_sockaddr_un()</b> or the perl builtin
       functions <b>getsockname()</b> and <b>getpeername()</b>). Returns the address family tag. This will be one of the
       "AF_*" constants, such as "AF_INET" for a "sockaddr_in" addresses or "AF_UNIX" for a "sockaddr_un". It
       can be used to figure out what unpack to use for a sockaddr of unknown type.

   <b>$sockaddr</b> <b>=</b> <b>pack_sockaddr_in</b> <b>$port,</b> <b>$ip_address</b>
       Takes two arguments, a port number and an opaque string (as returned by <b>inet_aton()</b>, or a v-string).
       Returns the "sockaddr_in" structure with those arguments packed in and "AF_INET" filled in. For Internet
       domain sockets, this structure is normally what you need for the arguments in <b>bind()</b>, <b>connect()</b>, and
       <b>send()</b>.

       An undefined $port argument is taken as zero; an undefined $ip_address is considered a fatal error.

   <b>($port,</b> <b>$ip_address)</b> <b>=</b> <b>unpack_sockaddr_in</b> <b>$sockaddr</b>
       Takes a "sockaddr_in" structure (as returned by <b>pack_sockaddr_in()</b>, <b>getpeername()</b> or <b>recv()</b>). Returns a
       list of two elements: the port and an opaque string representing the IP address (you can use <b>inet_ntoa()</b>
       to convert the address to the four-dotted numeric format). Will croak if the structure does not represent
       an "AF_INET" address.

       In scalar context will return just the IP address.

   <b>$sockaddr</b> <b>=</b> <b>sockaddr_in</b> <b>$port,</b> <b>$ip_address</b>
   <b>($port,</b> <b>$ip_address)</b> <b>=</b> <b>sockaddr_in</b> <b>$sockaddr</b>
       A wrapper of <b>pack_sockaddr_in()</b> or <b>unpack_sockaddr_in()</b>. In list context, unpacks its argument and
       returns a list consisting of the port and IP address.  In scalar context, packs its port and IP address
       arguments as a "sockaddr_in" and returns it.

       Provided largely for legacy compatibility; it is better to use <b>pack_sockaddr_in()</b> or <b>unpack_sockaddr_in()</b>
       explicitly.

   <b>$sockaddr</b> <b>=</b> <b>pack_sockaddr_in6</b> <b>$port,</b> <b>$ip6_address,</b> <b>[$scope_id,</b> <b>[$flowinfo]]</b>
       Takes two to four arguments, a port number, an opaque string (as returned by <b>inet_pton()</b>), optionally a
       scope ID number, and optionally a flow label number. Returns the "sockaddr_in6" structure with those
       arguments packed in and "AF_INET6" filled in. IPv6 equivalent of <b>pack_sockaddr_in()</b>.

       An undefined $port argument is taken as zero; an undefined $ip6_address is considered a fatal error.

   <b>($port,</b> <b>$ip6_address,</b> <b>$scope_id,</b> <b>$flowinfo)</b> <b>=</b> <b>unpack_sockaddr_in6</b> <b>$sockaddr</b>
       Takes a "sockaddr_in6" structure. Returns a list of four elements: the port number, an opaque string
       representing the IPv6 address, the scope ID, and the flow label. (You can use <b>inet_ntop()</b> to convert the
       address to the usual string format). Will croak if the structure does not represent an "AF_INET6"
       address.

       In scalar context will return just the IP address.

   <b>$sockaddr</b> <b>=</b> <b>sockaddr_in6</b> <b>$port,</b> <b>$ip6_address,</b> <b>[$scope_id,</b> <b>[$flowinfo]]</b>
   <b>($port,</b> <b>$ip6_address,</b> <b>$scope_id,</b> <b>$flowinfo)</b> <b>=</b> <b>sockaddr_in6</b> <b>$sockaddr</b>
       A wrapper of <b>pack_sockaddr_in6()</b> or <b>unpack_sockaddr_in6()</b>. In list context, unpacks its argument
       according to <b>unpack_sockaddr_in6()</b>. In scalar context, packs its arguments according to
       <b>pack_sockaddr_in6()</b>.

       Provided largely for legacy compatibility; it is better to use <b>pack_sockaddr_in6()</b> or
       <b>unpack_sockaddr_in6()</b> explicitly.

   <b>$sockaddr</b> <b>=</b> <b>pack_sockaddr_un</b> <b>$path</b>
       Takes one argument, a pathname. Returns the "sockaddr_un" structure with that path packed in with
       "AF_UNIX" filled in. For "PF_UNIX" sockets, this structure is normally what you need for the arguments in
       <b>bind()</b>, <b>connect()</b>, and <b>send()</b>.

   <b>($path)</b> <b>=</b> <b>unpack_sockaddr_un</b> <b>$sockaddr</b>
       Takes a "sockaddr_un" structure (as returned by <b>pack_sockaddr_un()</b>, <b>getpeername()</b> or <b>recv()</b>). Returns a
       list of one element: the pathname. Will croak if the structure does not represent an "AF_UNIX" address.

   <b>$sockaddr</b> <b>=</b> <b>sockaddr_un</b> <b>$path</b>
   <b>($path)</b> <b>=</b> <b>sockaddr_un</b> <b>$sockaddr</b>
       A wrapper of <b>pack_sockaddr_un()</b> or <b>unpack_sockaddr_un()</b>. In a list context, unpacks its argument and
       returns a list consisting of the pathname. In a scalar context, packs its pathname as a "sockaddr_un" and
       returns it.

       Provided largely for legacy compatibility; it is better to use <b>pack_sockaddr_un()</b> or <b>unpack_sockaddr_un()</b>
       explicitly.

       These are only supported if your system has &lt;<u>sys/un.h</u>&gt;.

   <b>$ip_mreq</b> <b>=</b> <b>pack_ip_mreq</b> <b>$multiaddr,</b> <b>$interface</b>
       Takes an IPv4 multicast address and optionally an interface address (or "INADDR_ANY"). Returns the
       "ip_mreq" structure with those arguments packed in. Suitable for use with the "IP_ADD_MEMBERSHIP" and
       "IP_DROP_MEMBERSHIP" sockopts.

   <b>($multiaddr,</b> <b>$interface)</b> <b>=</b> <b>unpack_ip_mreq</b> <b>$ip_mreq</b>
       Takes an "ip_mreq" structure. Returns a list of two elements; the IPv4 multicast address and interface
       address.

   <b>$ip_mreq_source</b> <b>=</b> <b>pack_ip_mreq_source</b> <b>$multiaddr,</b> <b>$source,</b> <b>$interface</b>
       Takes an IPv4 multicast address, source address, and optionally an interface address (or "INADDR_ANY").
       Returns the "ip_mreq_source" structure with those arguments packed in. Suitable for use with the
       "IP_ADD_SOURCE_MEMBERSHIP" and "IP_DROP_SOURCE_MEMBERSHIP" sockopts.

   <b>($multiaddr,</b> <b>$source,</b> <b>$interface)</b> <b>=</b> <b>unpack_ip_mreq_source</b> <b>$ip_mreq</b>
       Takes an "ip_mreq_source" structure. Returns a list of three elements; the IPv4 multicast address, source
       address and interface address.

   <b>$ipv6_mreq</b> <b>=</b> <b>pack_ipv6_mreq</b> <b>$multiaddr6,</b> <b>$ifindex</b>
       Takes an IPv6 multicast address and an interface number. Returns the "ipv6_mreq" structure with those
       arguments packed in. Suitable for use with the "IPV6_ADD_MEMBERSHIP" and "IPV6_DROP_MEMBERSHIP" sockopts.

   <b>($multiaddr6,</b> <b>$ifindex)</b> <b>=</b> <b>unpack_ipv6_mreq</b> <b>$ipv6_mreq</b>
       Takes an "ipv6_mreq" structure. Returns a list of two elements; the IPv6 address and an interface number.

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>$ip_address</b> <b>=</b> <b>inet_aton</b> <b>$string</b>
       Takes a string giving the name of a host, or a textual representation of an IP address and translates
       that to an packed binary address structure suitable to pass to <b>pack_sockaddr_in()</b>. If passed a hostname
       that cannot be resolved, returns "undef". For multi-homed hosts (hosts with more than one address), the
       first address found is returned.

       For portability do not assume that the result of <b>inet_aton()</b> is 32 bits wide, in other words, that it
       would contain only the IPv4 address in network order.

       This IPv4-only function is provided largely for legacy reasons. Newly-written code should use
       <b>getaddrinfo()</b> or <b>inet_pton()</b> instead for IPv6 support.

   <b>$string</b> <b>=</b> <b>inet_ntoa</b> <b>$ip_address</b>
       Takes a packed binary address structure such as returned by <b>unpack_sockaddr_in()</b> (or a v-string
       representing the four octets of the IPv4 address in network order) and translates it into a string of the
       form "d.d.d.d" where the "d"s are numbers less than 256 (the normal human-readable four dotted number
       notation for Internet addresses).

       This IPv4-only function is provided largely for legacy reasons. Newly-written code should use
       <b>getnameinfo()</b> or <b>inet_ntop()</b> instead for IPv6 support.

   <b>$address</b> <b>=</b> <b>inet_pton</b> <b>$family,</b> <b>$string</b>
       Takes an address family (such as "AF_INET" or "AF_INET6") and a string containing a textual
       representation of an address in that family and translates that to an packed binary address structure.

       See also <b>getaddrinfo()</b> for a more powerful and flexible function to look up socket addresses given
       hostnames or textual addresses.

   <b>$string</b> <b>=</b> <b>inet_ntop</b> <b>$family,</b> <b>$address</b>
       Takes an address family and a packed binary address structure and translates it into a human-readable
       textual representation of the address; typically in "d.d.d.d" form for "AF_INET" or "hhhh:hhhh::hhhh"
       form for "AF_INET6".

       See also <b>getnameinfo()</b> for a more powerful and flexible function to turn socket addresses into human-
       readable textual representations.

   <b>($err,</b> <b>@result)</b> <b>=</b> <b>getaddrinfo</b> <b>$host,</b> <b>$service,</b> <b>[$hints]</b>
       Given both a hostname and service name, this function attempts to resolve the host name into a list of
       network addresses, and the service name into a protocol and port number, and then returns a list of
       address structures suitable to <b>connect()</b> to it.

       Given just a host name, this function attempts to resolve it to a list of network addresses, and then
       returns a list of address structures giving these addresses.

       Given just a service name, this function attempts to resolve it to a protocol and port number, and then
       returns a list of address structures that represent it suitable to <b>bind()</b> to. This use should be combined
       with the "AI_PASSIVE" flag; see below.

       Given neither name, it generates an error.

       If present, $hints should be a reference to a hash, where the following keys are recognised:

       flags =&gt; INT
           A bitfield containing "AI_*" constants; see below.

       family =&gt; INT
           Restrict to only generating addresses in this address family

       socktype =&gt; INT
           Restrict to only generating addresses of this socket type

       protocol =&gt; INT
           Restrict to only generating addresses for this protocol

       The return value will be a list; the first value being an error indication, followed by a list of address
       structures (if no error occurred).

       The  error  value  will be a dualvar; comparable to the "EAI_*" error constants, or printable as a human-
       readable error message string. If no error occurred it will be zero numerically and an empty string.

       Each value in the results list will be a hash reference containing the following fields:

       family =&gt; INT
           The address family (e.g. "AF_INET")

       socktype =&gt; INT
           The socket type (e.g. "SOCK_STREAM")

       protocol =&gt; INT
           The protocol (e.g. "IPPROTO_TCP")

       addr =&gt; STRING
           The address in a packed string (such as would be returned by <b>pack_sockaddr_in()</b>)

       canonname =&gt; STRING
           The canonical name for the host if the "AI_CANONNAME" flag was provided, or "undef"  otherwise.  This
           field will only be present on the first returned address.

       The  following  flag  constants  are  recognised  in  the  $hints hash. Other flag constants may exist as
       provided by the OS.

       AI_PASSIVE
           Indicates that this resolution is for a local <b>bind()</b> for a passive (i.e.  listening)  socket,  rather
           than an active (i.e. connecting) socket.

       AI_CANONNAME
           Indicates  that  the  caller  wishes  the  canonical hostname ("canonname") field of the result to be
           filled in.

       AI_NUMERICHOST
           Indicates that the caller will pass a numeric address, rather than a hostname, and that <b>getaddrinfo()</b>
           must not perform a resolve operation on this name. This flag will  prevent  a  possibly-slow  network
           lookup operation, and instead return an error if a hostname is passed.

   <b>($err,</b> <b>$hostname,</b> <b>$servicename)</b> <b>=</b> <b>getnameinfo</b> <b>$sockaddr,</b> <b>[$flags,</b> <b>[$xflags]]</b>
       Given a packed socket address (such as from <b>getsockname()</b>, <b>getpeername()</b>, or returned by <b>getaddrinfo()</b> in
       a "addr" field), returns the hostname and symbolic service name it represents. $flags may be a bitmask of
       "NI_*" constants, or defaults to 0 if unspecified.

       The  return  value will be a list; the first value being an error condition, followed by the hostname and
       service name.

       The error value will be a dualvar; comparable to the "EAI_*" error constants, or printable  as  a  human-
       readable error message string. The host and service names will be plain strings.

       The  following flag constants are recognised as $flags. Other flag constants may exist as provided by the
       OS.

       NI_NUMERICHOST
           Requests that a human-readable string representation of the numeric  address  be  returned  directly,
           rather  than  performing a name resolve operation that may convert it into a hostname. This will also
           avoid potentially-blocking network IO.

       NI_NUMERICSERV
           Requests that the port number be returned directly as a number representation rather than  performing
           a name resolve operation that may convert it into a service name.

       NI_NAMEREQD
           If  a  name  resolve  operation  fails  to provide a name, then this flag will cause <b>getnameinfo()</b> to
           indicate an error, rather than returning the numeric representation as a human-readable string.

       NI_DGRAM
           Indicates that the socket address relates to a "SOCK_DGRAM"  socket,  for  the  services  whose  name
           differs between TCP and UDP protocols.

       The following constants may be supplied as $xflags.

       NIx_NOHOST
           Indicates  that the caller is not interested in the hostname of the result, so it does not have to be
           converted. "undef" will be returned as the hostname.

       NIx_NOSERV
           Indicates that the caller is not interested in the service name of the result, so it does not have to
           be converted. "undef" will be returned as the service name.

</pre><h4><b>getaddrinfo()</b> <b>/</b> <b>getnameinfo()</b> <b>ERROR</b> <b>CONSTANTS</b></h4><pre>
       The following constants may be returned by <b>getaddrinfo()</b> or <b>getnameinfo()</b>.  Others may be provided by the
       OS.

       EAI_AGAIN
           A temporary failure occurred during name resolution. The operation may be successful if it is retried
           later.

       EAI_BADFLAGS
           The value of the "flags" hint to <b>getaddrinfo()</b>, or the $flags  parameter  to  <b>getnameinfo()</b>  contains
           unrecognised flags.

       EAI_FAMILY
           The  "family"  hint  to <b>getaddrinfo()</b>, or the family of the socket address passed to <b>getnameinfo()</b> is
           not supported.

       EAI_NODATA
           The host name supplied to <b>getaddrinfo()</b> did not provide any usable address data.

       EAI_NONAME
           The host name supplied to <b>getaddrinfo()</b> does not exist, or the address supplied to  <b>getnameinfo()</b>  is
           not associated with a host name and the "NI_NAMEREQD" flag was supplied.

       EAI_SERVICE
           The service name supplied to <b>getaddrinfo()</b> is not available for the socket type given in the $hints.

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Lookup</b> <b>for</b> <b>connect()</b>
       The  <b>getaddrinfo()</b>  function  converts  a  hostname  and  a  service name into a list of structures, each
       containing a potential way to <b>connect()</b> to the named service on the named host.

           use IO::Socket;
           use Socket qw(SOCK_STREAM getaddrinfo);

           my %hints = (socktype =&gt; SOCK_STREAM);
           my ($err, @res) = getaddrinfo("localhost", "echo", \%hints);
           die "Cannot getaddrinfo - $err" if $err;

           my $sock;

           foreach my $ai (@res) {
               my $candidate = IO::Socket-&gt;new();

               $candidate-&gt;socket($ai-&gt;{family}, $ai-&gt;{socktype}, $ai-&gt;{protocol})
                   or next;

               $candidate-&gt;connect($ai-&gt;{addr})
                   or next;

               $sock = $candidate;
               last;
           }

           die "Cannot connect to localhost:echo" unless $sock;

           $sock-&gt;print("Hello, world!\n");
           print &lt;$sock&gt;;

       Because a list of potential candidates is returned, the "while" loop tries each in turn  until  it  finds
       one that succeeds both the <b>socket()</b> and <b>connect()</b> calls.

       This function performs the work of the legacy functions <b>gethostbyname()</b>, <b>getservbyname()</b>, <b>inet_aton()</b> and
       <b>pack_sockaddr_in()</b>.

       In practice this logic is better performed by IO::Socket::IP.

   <b>Making</b> <b>a</b> <b>human-readable</b> <b>string</b> <b>out</b> <b>of</b> <b>an</b> <b>address</b>
       The <b>getnameinfo()</b> function converts a socket address, such as returned by <b>getsockname()</b> or <b>getpeername()</b>,
       into a pair of human-readable strings representing the address and service name.

           use IO::Socket::IP;
           use Socket qw(getnameinfo);

           my $server = IO::Socket::IP-&gt;new(LocalPort =&gt; 12345, Listen =&gt; 1) or
               die "Cannot listen - $@";

           my $socket = $server-&gt;accept or die "accept: $!";

           my ($err, $hostname, $servicename) = getnameinfo($socket-&gt;peername);
           die "Cannot getnameinfo - $err" if $err;

           print "The peer is connected from $hostname\n";

       Since  in  this  example  only  the hostname was used, the redundant conversion of the port number into a
       service name may be omitted by passing the "NIx_NOSERV" flag.

           use Socket qw(getnameinfo NIx_NOSERV);

           my ($err, $hostname) = getnameinfo($socket-&gt;peername, 0, NIx_NOSERV);

       This  function  performs  the  work  of   the   legacy   functions   <b>unpack_sockaddr_in()</b>,   <b>inet_ntoa()</b>,
       <b>gethostbyaddr()</b> and <b>getservbyport()</b>.

       In practice this logic is better performed by IO::Socket::IP.

   <b>Resolving</b> <b>hostnames</b> <b>into</b> <b>IP</b> <b>addresses</b>
       To  turn  a hostname into a human-readable plain IP address use <b>getaddrinfo()</b> to turn the hostname into a
       list of socket structures, then <b>getnameinfo()</b> on each one to make it a readable IP address again.

           use Socket qw(:addrinfo SOCK_RAW);

           my ($err, @res) = getaddrinfo($hostname, "", {socktype =&gt; SOCK_RAW});
           die "Cannot getaddrinfo - $err" if $err;

           while( my $ai = shift @res ) {
               my ($err, $ipaddr) = getnameinfo($ai-&gt;{addr}, NI_NUMERICHOST, NIx_NOSERV);
               die "Cannot getnameinfo - $err" if $err;

               print "$ipaddr\n";
           }

       The "socktype" hint to <b>getaddrinfo()</b> filters the results to only include one socket  type  and  protocol.
       Without  this  most  OSes  return  three  combinations,  for  "SOCK_STREAM", "SOCK_DGRAM" and "SOCK_RAW",
       resulting in triplicate output of addresses. The "NI_NUMERICHOST" flag  to  <b>getnameinfo()</b>  causes  it  to
       return a string-formatted plain IP address, rather than reverse resolving it back into a hostname.

       This combination performs the work of the legacy functions <b>gethostbyname()</b> and <b>inet_ntoa()</b>.

   <b>Accessing</b> <b>socket</b> <b>options</b>
       The many "SO_*" and other constants provide the socket option names for <b>getsockopt()</b> and <b>setsockopt()</b>.

           use IO::Socket::INET;
           use Socket qw(SOL_SOCKET SO_RCVBUF IPPROTO_IP IP_TTL);

           my $socket = IO::Socket::INET-&gt;new(LocalPort =&gt; 0, Proto =&gt; 'udp')
               or die "Cannot create socket: $@";

           $socket-&gt;setsockopt(SOL_SOCKET, SO_RCVBUF, 64*1024) or
               die "setsockopt: $!";

           print "Receive buffer is ", $socket-&gt;getsockopt(SOL_SOCKET, SO_RCVBUF),
               " bytes\n";

           print "IP TTL is ", $socket-&gt;getsockopt(IPPROTO_IP, IP_TTL), "\n";

       As  a  convenience, IO::Socket's <b>setsockopt()</b> method will convert a number into a packed byte buffer, and
       <b>getsockopt()</b> will unpack a byte buffer of the correct size back into a number.

</pre><h4><b>AUTHOR</b></h4><pre>
       This module was originally maintained in Perl core by the Perl 5 Porters.

       It was extracted to dual-life on CPAN at version 1.95 by Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.40.0                                       2024-10-20                                        <u><a href="../man3pm/Socket.3pm.html">Socket</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>