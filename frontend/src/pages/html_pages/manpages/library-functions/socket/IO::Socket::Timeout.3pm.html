<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IO::Socket::Timeout - IO::Socket with read/write timeout</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libio-socket-timeout-perl">libio-socket-timeout-perl_0.32-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       IO::Socket::Timeout - IO::Socket with read/write timeout

</pre><h4><b>VERSION</b></h4><pre>
       version 0.32

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use IO::Socket::Timeout;

         # creates a standard IO::Socket::INET object, with a connection timeout
         my $socket = IO::Socket::INET-&gt;new( Timeout =&gt; 2 );
         # enable read and write timeouts on the socket
         IO::Socket::Timeout-&gt;enable_timeouts_on($socket);
         # setup the timeouts
         $socket-&gt;read_timeout(0.5);
         $socket-&gt;write_timeout(0.5);

         # When using the socket:
         use Errno qw(ETIMEDOUT EWOULDBLOCK);
         print $socket "some request";
         my $response = &lt;$socket&gt;;
         if (! $response &amp;&amp; ( 0+$! == ETIMEDOUT || 0+$! == EWOULDBLOCK )) {
           die "timeout reading on the socket";
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "IO::Socket" provides a way to set a timeout on the socket, but the timeout will be used only for
       connection, not for reading / writing operations.

       This module provides a way to set a timeout on read / write operations on an "IO::Socket" instance, or
       any "IO::Socket::*" modules, like "IO::Socket::INET".

</pre><h4><b>CLASS</b> <b>METHOD</b></h4><pre>
   <b>enable_timeouts_on</b>
         IO::Socket::Timeout-&gt;enable_timeouts_on($socket);

       Given a socket, it'll return it, but will enable read and write timeouts on it.  You'll have to use
       "read_timeout" and "write_timeout" on it later on.

       Returns the socket, so that you can chain this method with others.

       If the argument is "undef", the method simply returns empty list.

</pre><h4><b>METHODS</b></h4><pre>
       These methods are to be called on a socket that has been previously passed to "enable_timeouts_on()".

   <b>read_timeout</b>
         my $current_timeout = $socket-&gt;read_timeout();
         $socket-&gt;read_timeout($new_timeout);

       Get or set the read timeout value for a socket created with this module.

   <b>write_timeout</b>
         my $current_timeout = $socket-&gt;write_timeout();
         $socket-&gt;write_timeout($new_timeout);

       Get or set the write timeout value for a socket created with this module.

   <b>disable_timeout</b>
         $socket-&gt;disable_timeout;

       Disable the read and write timeouts for a socket created with this module.

   <b>enable_timeout</b>
         $socket-&gt;enable_timeout;

       Re-enable the read and write timeouts for a socket created with this module.

   <b>timeout_enabled</b>
         my $is_timeout_enabled = $socket-&gt;timeout_enabled();
         $socket-&gt;<a href="../man0/timeout_enabled.0.html">timeout_enabled</a>(0);

       Get or Set the fact that a socket has timeouts enabled.

</pre><h4><b>WHEN</b> <b>TIMEOUT</b> <b>IS</b> <b>HIT</b></h4><pre>
       When a timeout (read, write) is hit on the socket, the function trying to be performed will return
       "undef" or empty string, and $! will be set to "ETIMEOUT" or "EWOULDBLOCK". You should test for both.

       You can import "ETIMEOUT" and "EWOULDBLOCK" by using "POSIX":

         use Errno qw(ETIMEDOUT EWOULDBLOCK);

</pre><h4><b>IF</b> <b>YOU</b> <b>NEED</b> <b>TO</b> <b>RETRY</b></h4><pre>
       If you want to implement a try / wait / retry mechanism, I recommend using a third-party module, like
       "Action::Retry". Something like this:

         my $socket;

         my $action = Action::Retry-&gt;new(
           attempt_code =&gt; sub {
               # (re-)create the socket if needed
               if (! $socket) {
                 $socket = IO::Socket-&gt;new(...);
                 IO::Socket::Timeout-&gt;enable_timeouts_on($socket);
                 $socket-&gt;read_timeout(0.5);
               }
               # send the request, read the answer
               $socket-&gt;print($_[0]);
               defined(my $answer = $socket-&gt;getline)
                 or $socket = undef, die $!;
               $answer;
           },
           on_failure_code =&gt; sub { die 'aborting, to many retries' },
         );

         my $reply = $action-&gt;run('GET mykey');

</pre><h4><b>IMPORT</b> <b>options</b></h4><pre>
       You can give a list of socket modules names when use-ing this module, so that internally, composed
       classes needed gets created and loaded at compile time.

         use IO::Socket::Timeout qw(IO::Socket::INET);

</pre><h4><b>ENVIRONMENT</b> <b>VARIABLE</b></h4><pre>
   <b>PERL_IO_SOCKET_TIMEOUT_FORCE_SELECT</b>
       This module implements timeouts using one of two strategies. If possible (if the operating system is
       linux, freebsd or mac), it uses "setsockopt()" to set read / write timeouts. Otherwise it uses "select()"
       before performing socket operations.

       To force the use of "select()", you can set PERL_IO_SOCKET_TIMEOUT_FORCE_SELECT to a true value at
       compile time (typically in a BEGIN block)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Action::Retry, IO::Select, PerlIO::via::Timeout, Time::Out

</pre><h4><b>THANKS</b></h4><pre>
       Thanks to Vincent Pitt, Christian Hansen and Toby Inkster for various help and useful remarks.

</pre><h4><b>AUTHOR</b></h4><pre>
       Damien "dams" Krotkine

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2013 by Damien "dams" Krotkine.

       This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.36.0                                       2022-11-19                           <u>IO::Socket::<a href="../man3pm/Timeout.3pm.html">Timeout</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>