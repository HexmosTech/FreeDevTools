<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>curl_multi_assign - set data to associate with an internal socket</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       curl_multi_assign - set data to associate with an internal socket

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLMcode curl_multi_assign(CURLM *multi_handle, curl_socket_t sockfd,
                                   void *sockptr);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  function  creates an association in the multi handle between the given socket and a private pointer
       of the application. This is designed for <u><a href="../man3/curl_multi_socket_action.3.html">curl_multi_socket_action</a>(3)</u> uses.

       When set, the <u>sockptr</u> pointer is passed to all future socket callbacks for the specific <u>sockfd</u> socket.

       If the given <u>sockfd</u> is not already in use by libcurl, this function returns an error.

       libcurl only keeps one single pointer associated with a socket, so calling this  function  several  times
       for the same socket makes the last set pointer get used.

       The  idea here being that this association (socket to private pointer) is something that just about every
       application that uses this API needs and then libcurl can just as well do it since  it  already  has  the
       necessary functionality.

       It is acceptable to call this function from your multi callback functions.

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all supported protocols

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURLM *multi = curl_multi_init();
         int private = 123;
         curl_socket_t fd = 0; /* file descriptor to associate our data with */

         /* make our struct pointer associated with socket fd */
         CURLMcode mc = curl_multi_assign(multi, fd, &amp;private);
         <a href="../manmc/if.mc.html">if</a>(mc)
           printf("error: %s\n", <a href="../manmc/curl_multi_strerror.mc.html">curl_multi_strerror</a>(mc));
       }

</pre><h4><b>TYPICAL</b> <b>USAGE</b></h4><pre>
       In  a  typical  application you allocate a struct or at least use some kind of semi-dynamic data for each
       socket that we must wait for action on when using the <u><a href="../man3/curl_multi_socket_action.3.html">curl_multi_socket_action</a>(3)</u> approach.

       When our socket-callback gets called by libcurl and we get to know about yet another socket to wait  for,
       we  can  use <u><a href="../man3/curl_multi_assign.3.html">curl_multi_assign</a>(3)</u> to point out the particular data so that when we get updates about this
       same socket again, we do not have to find the struct associated with this socket by ourselves.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.15.5

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This function returns a CURLMcode indicating success or error.

       CURLM_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/curl_multi_setopt.3.html">curl_multi_setopt</a></b>(3), <b><a href="../man3/curl_multi_socket_action.3.html">curl_multi_socket_action</a></b>(3)

libcurl                                            2025-06-16                               <u><a href="../man3/curl_multi_assign.3.html">curl_multi_assign</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>