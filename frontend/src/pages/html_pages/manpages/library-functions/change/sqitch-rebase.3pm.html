<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sqitch-rebase - Revert and redeploy database changes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sqitch">sqitch_1.5.2-1_all</a> <br><br><pre>
</pre><h4><b>Name</b></h4><pre>
       sqitch-rebase - Revert and redeploy database changes

</pre><h4><b>Synopsis</b></h4><pre>
         sqitch rebase [options] [&lt;database&gt;]
         sqitch rebase [options] [&lt;database&gt;] --onto-change &lt;change&gt;
         sqitch rebase [options] [&lt;database&gt;] --onto-change &lt;change&gt; --upto-change &lt;change&gt;
         sqitch rebase [options] [&lt;database&gt;] &lt;change&gt;
         sqitch rebase [options] [&lt;database&gt;] &lt;change&gt; --upto-change &lt;change&gt;
         sqitch rebase [options] [&lt;database&gt;] &lt;change&gt; &lt;change&gt;
         sqitch rebase [options] [&lt;database&gt;] --modified
         sqitch rebase [options] [&lt;database&gt;] --modified --upto-change &lt;change&gt;

</pre><h4><b>Description</b></h4><pre>
       Revert and redeploy changes to the database. It's effectively a shortcut for running "sqitch revert" and
       "sqitch deploy" in succession.

       More specifically, starting from the current deployment state, changes will be reverted in reverse the
       order of application. All changes will be reverted unless a change is specified, either via "--onto" or
       with no option flag, in which case changes will be reverted back to that change. If nothing needs to be
       reverted, a message will be emitted explaining why and nothing will be reverted.

       Once the revert finishes, changes will be deployed starting from the deployed state through the rest of
       the deployment plan. They will run to the latest change in the plan, unless a change is specified, either
       via "--upto" or with no option flag, in which case changes will be deployed up-to and including that
       change.

       If the database has not been deployed to, or its state already matches the specified change, no reverts
       will be run. And if, at that point, the database is up-to-date, no deploys will be run.

       The "&lt;database&gt;" parameter specifies the database to which to connect, and may also be specified as the
       "--target" option. It can be target name, a URI, an engine name, or plan file path.

</pre><h4><b>Options</b></h4><pre>
       "-t"
       "--target"
           The  target  database to which to connect. This option can be either a URI or the name of a target in
           the configuration.

       "--onto-change"
       "--onto"
           Specify the reversion change. Defaults to reverting all changes. See sqitchchanges  for  the  various
           ways in which changes can be specified.

       "--upto-change"
       "--upto"
           Specify  the  deployment  change.  Defaults  to the last point in the plan. See sqitchchanges for the
           various ways in which changes can be specified.

       "-m"
       "--modified"
           Finds the change to revert onto based on modifications to deploy scripts. Reverts the change prior to
           earliest change with a revised deploy script. Handy for quick rebases  during  iterative  development
           cycles.

       "--mode"
           Specify the reversion mode to use in case of deploy failure. Possible values are:

           "all"
               In  the  event  of  failure,  revert  all  deployed changes, back to "--onto-change". This is the
               default.

           "tag"
               In the event of failure, revert all deployed changes to the last successfully-applied tag. If  no
               tags were applied, all changes will be reverted to "--onto-change".

           "change"
               In  the event of failure, no changes will be reverted. This is on the assumption that a change is
               atomic, and thus may may be deployed again.

       "--verify"
           Verify each change by running its verify script, if there is one, immediate after deploying it. If  a
           verify test fails, the deploy will be considered to have failed and the appropriate reversion will be
           carried out, depending on the value of "--mode".

       "--no-verify"
           Don't verify each change. This is the default.

       "-s"
       "--set"
           Set  a  variable  name and value for use by the database engine client, if it supports variables. The
           format must be "name=value", e.g., "--set defuser='Homer Simpson'". Overrides any values loaded  from
           "configuration Variables".

       "-e"
       "--set-deploy"
           Set  a  variable  name and value for use by the database engine client when deploying, if it supports
           variables. The format must be "name=value", e.g.,  "--set  defuser='Homer  Simpson'".  Overrides  any
           values from "--set" or values loaded from "configuration Variables".

       "-r"
       "--set-revert"
           Sets  a  variable name to be used by the database engine client during when reverting, if it supports
           variables. The format must be "name=value", e.g.,  "--set  defuser='Homer  Simpson'".  Overrides  any
           values from "--set" or values loaded from "configuration Variables".

       "--log-only"
           Log  the  changes  as if they were deployed and reverted, but without actually running the deploy and
           revert scripts.

       "--lock-timeout"
             sqitch rebase --lock-timeout 600

           Set the number of seconds for Sqitch to wait  to  get  an  exclusive  advisory  lock  on  the  target
           database,  for  engines  that  support such a lock. This lock prevents other instances of Sqitch from
           working on the target at the same time, but prevents no other database activity. Defaults to 60.

       "-y"
           Disable the prompt that normally asks whether or not to execute the revert.

       "--registry"
             sqitch rebase --registry registry

           The name of the Sqitch registry schema or database in which sqitch stores its own data.

       "--db-client"
       "--client"
             sqitch rebase --client /usr/local/pgsql/bin/psql

           Path to the command-line client for the database engine. Defaults to a client  in  the  current  path
           named appropriately for the database engine.

       "-d"
       "--db-name"
             sqitch rebase --db-name widgets
             sqitch rebase -d bricolage

           Name  of  the  database.  In  general, targets and URIs are preferred, but this option can be used to
           override the database name in a target.

       "-u"
       "--db-user"
       "--db-username"
             sqitch rebase --db-username root
             sqitch rebase --db-user postgres
             sqitch rebase -u Mom

           User name to use when connecting to the database. Does not apply to all engines. In general,  targets
           and URIs are preferred, but this option can be used to override the user name in a target.

       "-h"
       "--db-host"
             sqitch rebase --db-host db.example.com
             sqitch rebase -h appdb.example.net

           Host  name to use when connecting to the database. Does not apply to all engines. In general, targets
           and URIs are preferred, but this option can be used to override the host name in a target.

       "-p"
       "--db-port"
             sqitch rebase --db-port 7654
             sqitch rebase -p 5431

           Port number to connect to. Does not apply to all engines. In general, targets and URIs are preferred,
           but this option can be used to override the port in a target.

       "--plan-file"
       "-f"
             sqitch rebase --plan-file my.plan

           Path to the deployment plan file. Overrides target, engine, and core configuration  values.  Defaults
           to <u>$top_dir/sqitch.plan</u>.

</pre><h4><b>Configuration</b> <b>Variables</b></h4><pre>
       "[deploy.variables]"
       "[revert.variables]"
           A  section  defining  database  client  variables. These variables are useful if your database engine
           supports     variables     in     scripts,     such     as     PostgreSQL's     "psql"      variables
           &lt;https://www.postgresql.org/docs/current/static/app-psql.html#APP-PSQL-INTERPOLATION&gt;,      Vertica's
           "vsql"                                                                                      variables
           &lt;https://my.vertica.com/docs/7.1.x/HTML/index.htm#Authoring/ConnectingToHPVertica/vsql/Variables.htm&gt;,
           MySQL's   user  variables  &lt;https://dev.mysql.com/doc/refman/5.6/en/user-variables.html&gt;,  SQL*Plus's
           "DEFINE"    variables    &lt;https://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12017.htm&gt;,    and
           Snowflake's   SnowSQL   variables   &lt;https://docs.snowflake.com/en/user-guide/snowsql-use.html#using-
           variables&gt;.

           May be overridden by "--set", "--set-deploy", "--set-revert", or  target  and  engine  configuration.
           Variables are merged in the following priority order:

           "--set-revert"
               Used only while reverting changes.

           "--set-deploy"
               Used only while deploying changes.

           "--set"
               Used while reverting and deploying changes.

           "target.$target.variables"
               Used while reverting and deploying changes.

           "engine.$engine.variables"
               Used while reverting and deploying changes.

           "revert.variables"
               Used only while reverting changes.

           "deploy.variables"
               Used while reverting and deploying changes.

           "core.variables"
               Used while reverting and deploying changes.

       "rebase.verify"
       "deploy.verify"
           Boolean indicating whether or not to verify each change after deploying it.

       "rebase.mode"
       "deploy.mode"
           Deploy mode. The supported values are the same as for the "--mode" option.

       "[rebase.no_prompt]"
       "[revert.no_prompt]"
           A  boolean  value  indicating  whether  or not to disable the prompt before executing the revert. The
           "rebase.no_prompt" variable takes precedence over "revert.no_prompt",  and  both  may  of  course  be
           overridden by "-y".

       "[rebase.prompt_accept]"
       "[revert.prompt_accept]"
           A  boolean value indicating whether default reply to the prompt before executing the revert should be
           "yes" or "no". The "rebase.prompt_accept" variable takes precedence over "revert.prompt_accept",  and
           both default to true, meaning to accept the revert by default.

       "[rebase.strict]"
       "[revert.strict]"
           A  boolean  value  that, when true, disables the "revert" command. The "revert.strict" variable takes
           precedence over "revert.strict".

</pre><h4><b>Sqitch</b></h4><pre>
       Part of the sqitch suite.

perl v5.40.1                                       2025-05-10                                 <u><a href="../man3pm/sqitch-rebase.3pm.html">sqitch-rebase</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>