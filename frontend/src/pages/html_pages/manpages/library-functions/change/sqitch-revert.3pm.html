<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sqitch-revert - Revert changes to a database</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sqitch">sqitch_1.5.2-1_all</a> <br><br><pre>
</pre><h4><b>Name</b></h4><pre>
       sqitch-revert - Revert changes to a database

</pre><h4><b>Synopsis</b></h4><pre>
         sqitch revert [options] [&lt;database&gt;]
         sqitch revert [options] [&lt;database&gt;] &lt;change&gt;
         sqitch revert [options] [&lt;database&gt;] --to-change &lt;change&gt;
         sqitch revert [options] [&lt;database&gt;] --modified

</pre><h4><b>Description</b></h4><pre>
       Revert changes to the database. Starting from the current deployment state, changes will be reverted in
       reverse the order of application. All changes will be reverted unless a change is specified, either via
       "--to" or with no option flag, in which case changes will be reverted back to that change.

       If the database has not been deployed to, or its state already matches the specified change, no changes
       will be made. If the change appears later in the plan than the currently-deployed state, an error will be
       returned, along with a suggestion to instead use sqitch-deploy.

       The "&lt;database&gt;" parameter specifies the database to which to connect, and may also be specified as the
       "--target" option. It can be target name, a URI, an engine name, or plan file path.

   <b>Attention</b> <b>Git</b> <b>Users</b>
       If you're a git user thinking this is like "git revert", it's not.  "sqitch revert" is more like time
       travel. It takes your database back to the state it had just after applying the target change. It feels
       like magic, but it's actually all the time you spent writing revert scripts that finally pays off.
       Starting from the last change currently deployed, "sqitch revert" runs each revert script in turn until
       the target change is reached and becomes the last change deployed.

</pre><h4><b>Options</b></h4><pre>
       "-t"
       "--target"
           The  target  database to which to connect. This option can be either a URI or the name of a target in
           the configuration.

       "--to-change"
       "--change"
       "--to"
           Specify the reversion change. Defaults to reverting all changes. See sqitchchanges  for  the  various
           ways in which changes can be specified.

       "-m"
       "--modified"
           Finds the change to revert onto based on modifications to deploy scripts. Reverts the change prior to
           earliest change with a revised deploy script.

       "-s"
       "--set"
           Set  a  variable  name and value for use by the database engine client, if it supports variables. The
           format must be "name=value", e.g., "--set defuser='Homer Simpson'". Overrides any values loaded  from
           "configuration Variables".

       "--log-only"
           Log the changes as if they were reverted, but without actually running the revert scripts.

       "--lock-timeout"
             sqitch deploy --lock-timeout 600

           Set  the  number  of  seconds  for  Sqitch  to  wait  to get an exclusive advisory lock on the target
           database, for engines that support such a lock. This lock prevents other  instances  of  Sqitch  from
           deploying to the target at the same time, but prevents no other database activity. Defaults to 60.

       "-y"
           Disable the prompt that normally asks whether or not to execute the revert.

       "--registry"
             sqitch revert --registry registry

           The name of the Sqitch registry schema or database in which sqitch stores its own data.

       "--db-client"
       "--client"
             sqitch revert --client /usr/local/pgsql/bin/psql

           Path  to  the  command-line  client for the database engine. Defaults to a client in the current path
           named appropriately for the database engine.

       "-d"
       "--db-name"
             sqitch revert --db-name widgets
             sqitch revert -d bricolage

           Name of the database. In general, targets and URIs are preferred, but this  option  can  be  used  to
           override the database name in a target.

       "-u"
       "--db-user"
       "--db-username"
             sqitch revert --db-username root
             sqitch revert --db-user postgres
             sqitch revert -u Mom

           User  name to use when connecting to the database. Does not apply to all engines. In general, targets
           and URIs are preferred, but this option can be used to override the user name in a target.

       "-h"
       "--db-host"
             sqitch revert --db-host db.example.com
             sqitch revert -h appdb.example.net

           Host name to use when connecting to the database. Does not apply to all engines. In general,  targets
           and URIs are preferred, but this option can be used to override the host name in a target.

       "-p"
       "--db-port"
             sqitch revert --db-port 7654
             sqitch revert -p 5431

           Port number to connect to. Does not apply to all engines. In general, targets and URIs are preferred,
           but this option can be used to override the port in a target.

       "--plan-file"
       "-f"
             sqitch revert --plan-file my.plan

           Path  to  the deployment plan file. Overrides target, engine, and core configuration values. Defaults
           to <u>$top_dir/sqitch.plan</u>.

</pre><h4><b>Configuration</b> <b>Variables</b></h4><pre>
       "[deploy.variables]"
       "[revert.variables]"
           A section defining database client variables. The "deploy.variables" configuration is read  from  the
           "deploy"  command  configuration,  on  the  assumption  that the values will generally be the same on
           revert. If they're not, use "revert.variables" to override "deploy.variables".

           These variables  are  useful  if  your  database  engine  supports  variables  in  scripts,  such  as
           PostgreSQL's "psql" variables &lt;https://www.postgresql.org/docs/current/static/app-psql.html#APP-PSQL-
           INTERPOLATION&gt;,                     Vertica's                     "vsql"                    variables
           &lt;https://my.vertica.com/docs/7.1.x/HTML/index.htm#Authoring/ConnectingToHPVertica/vsql/Variables.htm&gt;,
           MySQL's  user  variables  &lt;https://dev.mysql.com/doc/refman/5.6/en/user-variables.html&gt;,   SQL*Plus's
           "DEFINE"    variables    &lt;https://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12017.htm&gt;,    and
           Snowflake's   SnowSQL   variables   &lt;https://docs.snowflake.com/en/user-guide/snowsql-use.html#using-
           variables&gt;.

           May  be  overridden  by  "--set"  or  target  and  engine  configuration. Variables are merged in the
           following priority order:

           "--set"
           "target.$target.variables"
           "engine.$engine.variables"
           "revert.variables"
           "deploy.variables"
           "core.variables"
       "revert.strict"
           A boolean value indicating whether or not the change to revert to must be specified.

       "[revert.no_prompt]"
           A boolean value indicating whether or not to disable the prompt before executing the revert.  May  be
           overridden by "-y".

       "[revert.prompt_accept]"
           A  boolean value indicating whether default reply to the prompt before executing the revert should be
           "yes" or "no". Defaults to true, meaning to accept the revert.

</pre><h4><b>Sqitch</b></h4><pre>
       Part of the sqitch suite.

perl v5.40.1                                       2025-05-10                                 <u><a href="../man3pm/sqitch-revert.3pm.html">sqitch-revert</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>