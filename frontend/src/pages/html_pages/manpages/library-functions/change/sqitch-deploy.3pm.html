<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sqitch-deploy - Deploy changes to a database</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sqitch">sqitch_1.5.2-1_all</a> <br><br><pre>
</pre><h4><b>Name</b></h4><pre>
       sqitch-deploy - Deploy changes to a database

</pre><h4><b>Synopsis</b></h4><pre>
         sqitch deploy [options] [&lt;database&gt;]
         sqitch deploy [options] [&lt;database&gt;] &lt;change&gt;
         sqitch deploy [options] [&lt;database&gt;] --to-change &lt;change&gt;

</pre><h4><b>Description</b></h4><pre>
       Deploy changes to the database. Changes will begin from the current deployment state. They will run to
       the latest change, unless a change is specified, either via "--to" or with no option flag, in which case
       changes will be deployed up-to and including that change.

       If the database it up-to-date or already deployed to the specified change, no changes will be made. If
       the change appears earlier in the plan than the currently-deployed state, an error will be returned,
       along with a suggestion to instead use sqitch-revert.

       The "&lt;database&gt;" parameter specifies the database to which to connect, and may also be specified as the
       "--target" option. It can be target name, a URI, an engine name, or plan file path.

</pre><h4><b>Options</b></h4><pre>
       "-t"
       "--target"
           The  target  database to which to connect. This option can be either a URI or the name of a target in
           the configuration.

       "--to-change"
       "--change"
       "--to"
           Specify the deployment change. Defaults to the last point in the  plan.  See  sqitchchanges  for  the
           various ways in which changes can be specified.

       "--mode"
           Specify the reversion mode to use in case of deploy or verify failure.  Possible values are:

           "all"
               In  the  event  of  failure,  revert  all deployed changes, back to the point at which deployment
               started. This is the default.

           "tag"
               In the event of failure, revert all deployed changes to the last successfully-applied tag. If  no
               tags  were  applied  during  this  deployment, all changes will be reverted to the point at which
               deployment began.

           "change"
               In the event of deploy failure, no changes will be reverted;  for  a  verify  failure,  only  the
               failed change will be reverted.

           Note  that  Sqitch  assumes  that  each  change  is atomic. Therefore, when a deploy script fails, it
           assumes there is nothing to revert. If a verify script fails, it will of course run the revert script
           for the failed change.

       "--verify"
           Verify each change by running its verify script, if there is one. If a verify test fails, the  deploy
           will be considered to have failed and the appropriate reversion will be carried out, depending on the
           value of "--mode".

       "--no-verify"
           Don't verify each change. This is the default.

       "-s"
       "--set"
           Set  a  variable  name and value for use by the database engine client, if it supports variables. The
           format must be "name=value", e.g., "--set defuser='Homer Simpson'". Overrides any values loaded  from
           "configuration Variables".

       "--log-only"
           Log the changes as if they were deployed, but without actually running the deploy scripts. Useful for
           an  existing  database  that  is  being  converted to Sqitch, and you need to log changes as deployed
           because they have been deployed by other means in the past.

       "--lock-timeout"
             sqitch deploy --lock-timeout 600

           Set the number of seconds for Sqitch to wait  to  get  an  exclusive  advisory  lock  on  the  target
           database,  for  engines  that  support such a lock. This lock prevents other instances of Sqitch from
           working on the target at the same time, but prevents no other database activity. Defaults to 60.

       "--registry"
             sqitch deploy --registry registry

           The name of the Sqitch registry schema or database in which sqitch stores its own data.

       "--db-client"
       "--client"
             sqitch deploy --client /usr/local/pgsql/bin/psql

           Path to the command-line client for the database engine. Defaults to a client  in  the  current  path
           named appropriately for the database engine.

       "-d"
       "--db-name"
             sqitch deploy --db-name widgets
             sqitch deploy -d bricolage

           Name  of  the  database.  In  general, targets and URIs are preferred, but this option can be used to
           override the database name in a target.

       "-u"
       "--db-user"
       "--db-username"
             sqitch deploy --db-username root
             sqitch deploy --db-user postgres
             sqitch deploy -u Mom

           User name to use when connecting to the database. Does not apply to all engines. In general,  targets
           and URIs are preferred, but this option can be used to override the user name in a target.

       "-h"
       "--db-host"
             sqitch deploy --db-host db.example.com
             sqitch deploy -h appdb.example.net

           Host  name to use when connecting to the database. Does not apply to all engines. In general, targets
           and URIs are preferred, but this option can be used to override the host name in a target.

       "-p"
       "--db-port"
             sqitch deploy --db-port 7654
             sqitch deploy -p 5431

           Port number to connect to. Does not apply to all engines. In general, targets and URIs are preferred,
           but this option can be used to override the port in a target.

       "--plan-file"
       "-f"
             sqitch deploy --plan-file my.plan

           Path to the deployment plan file. Overrides target, engine, and core configuration  values.  Defaults
           to <u>$top_dir/sqitch.plan</u>.

</pre><h4><b>Configuration</b> <b>Variables</b></h4><pre>
       "deploy.mode"
           Deploy mode. The supported values are the same as for the "--mode" option.

       "deploy.verify"
           Boolean indicating whether or not to verify each change.

       "[deploy.variables]"
           A  section  defining  database client variables. Useful if your database engine supports variables in
           scripts, such as PostgreSQL's "psql"  variables  &lt;https://www.postgresql.org/docs/current/static/app-
           psql.html#APP-PSQL-INTERPOLATION&gt;,               Vertica's              "vsql"              variables
           &lt;https://my.vertica.com/docs/7.1.x/HTML/index.htm#Authoring/ConnectingToHPVertica/vsql/Variables.htm&gt;
           MySQL's  user  variables  &lt;https://dev.mysql.com/doc/refman/5.6/en/user-variables.html&gt;,   SQL*Plus's
           "DEFINE"    variables    &lt;https://docs.oracle.com/cd/B19306_01/server.102/b14357/ch12017.htm&gt;,    and
           Snowflake's   SnowSQL   variables   &lt;https://docs.snowflake.com/en/user-guide/snowsql-use.html#using-
           variables&gt;.

           May  be  overridden  by  "--set"  or  target  and  engine  configuration. Variables are merged in the
           following priority order:

           "--set"
           "target.$target.variables"
           "engine.$engine.variables"
           "deploy.variables"
           "core.variables"

</pre><h4><b>Sqitch</b></h4><pre>
       Part of the sqitch suite.

perl v5.40.1                                       2025-05-10                                 <u><a href="../man3pm/sqitch-deploy.3pm.html">sqitch-deploy</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>