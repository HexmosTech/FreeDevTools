<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clientlib - NNTP clientlib part of InterNetNews library</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2-dev">inn2-dev_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       clientlib - NNTP clientlib part of InterNetNews library

</pre><h4><b>SYNOPSIS</b></h4><pre>
           #include &lt;inn/libinn.h&gt;

           extern FILE *ser_rd_fp;
           extern FILE *ser_wr_fp;
           extern char ser_line[];

           extern char *getserverbyfile(char *file UNUSED);
           extern int server_init(char *host, int port);
           extern int handle_server_response(int response, char *host);
           extern void put_server(const char *text);
           extern int get_server(char *buff, int buffsize);
           extern void close_server(void);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The routines described in this manual page are part of the InterNetNews library, <a href="../man3/libinn.3.html">libinn</a>(3).  They are
       replacements for the <u>clientlib</u> part of the NNTP distribution, and are intended to be used in building
       news clients.

       The <b>getserverbyfile</b> function retrieves the value of the <u>server</u> parameter in <u>inn.conf</u> (or the value of the
       "NNTPSERVER" environment variable if set) as the name of the local NNTP server.  It returns a pointer to
       static space.  The <u>file</u> parameter is ignored (<u>inn.conf</u> is forced).

       The <b>server_init</b> function opens a connection to the NNTP server at the specified <u>host</u>, in reader mode.  It
       returns the server's response code or "-1" on error.  If a connection was made, then <u>ser_rd_fp</u> and
       <u>ser_wr_fp</u> can be used to read from and write to the server, respectively, and <u>ser_line</u> will contain the
       server's response (though you should use the more convenient <b>put_server</b> and <b>get_server</b> functions
       instead).

       The <b>handle_server_response</b> function decodes the <u>response</u> code, which comes from the server on <u>host</u>.  If
       the client is authorized, it returns "0".  A client that is only allowed to read is authorized, but
       <b>handle_server_response</b> will print a message on the standard output.  If the client is not authorized to
       talk to the server, then a message is printed and the routine returns "-1".

       The <b>put_server</b> function sends <u>text</u> to the server, adding the necessary NNTP line terminators, and
       flushing the I/O buffer.

       The <b>get_server</b> function reads a line of text from the server into <u>buff</u>, reading at most <u>buffsize</u>
       characters.  Any trailing "\r\n" terminators are stripped off.  <b>get_server</b> returns "-1" on error, "0" on
       success.

       The <b>close_server</b> function sends a "QUIT" command to the server and closes the connection.

</pre><h4><b>HISTORY</b></h4><pre>
       Written by Rich $alz &lt;<a href="mailto:rsalz@uunet.uu.net">rsalz@uunet.uu.net</a>&gt; for InterNetNews.  Rewritten into POD by Julien Elie.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man3/libinn.3.html">libinn</a>(3).

INN 2.7.3                                          2025-05-19                                <u><a href="../man3/libinn_clientlib.3.html">libinn_clientlib</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>