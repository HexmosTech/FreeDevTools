<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nagios::StatusLog, Nagios::(Service|Host|Program)::Status - Perl objects to represent the Nagios status</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libnagios-object-perl">libnagios-object-perl_0.21.20-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Nagios::StatusLog, Nagios::(Service|Host|Program)::Status - Perl objects to represent the Nagios status
       file

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Reads the Nagios status log and returns ::Status objects that can be used to get status information about
       a host.   For Nagios version 2.x logs, pass in the Version =&gt; 2.0 parameter to <b>new()</b>.  And similarly,
       pass in the Version =&gt; 3.0 parameter to <b>new()</b> for Nagios version 3.x logs.

        my $log = Nagios::StatusLog-&gt;new(
                       Filename =&gt; "/var/opt/nagios/status.log",
                       Version  =&gt; 1.0
                  );
        $localhost = $log-&gt;host( "localhost" );
        print "status of localhost is now ",$localhost-&gt;status(),"\n";
        $log-&gt;update();
        print "status of localhost is now ",$localhost-&gt;status(),"\n";

        # for Nagios v2.0
        my $log = Nagios::StatusLog-&gt;new(
                       Filename =&gt; "/var/cache/nagios2/status.dat",
                       Version  =&gt; 2.0
                  );

        # for Nagios v3.0
        my $log = Nagios::StatusLog-&gt;new(
                       Filename =&gt; "/var/cache/nagios3/status.dat",
                       Version  =&gt; 3.0
                  );

</pre><h4><b>METHODS</b></h4><pre>
       <b>new()</b>
           Create   a   new  Nagios::StatusLog  instance.   The  object  will  be  initialized  for  you  (using
           $self-&gt;<b>update()</b>).
            Nagios::StatusLog-&gt;new( "/var/opt/nagios/status.log" );

       <b>update()</b>
           Updates the internal data structures from the logfile.
            $log-&gt;<b>update()</b>;

       <b>service()</b>
           Returns a Nagios::Service::Status object.  Input arguments can be a host_name and  description  list,
           or a Nagios::Service object.

            my $svc_stat = $log-&gt;service( "localhost", "SSH" );
            my $svc_stat = $log-&gt;service( $localhost_ssh_svc_object );

           Nagios::Service::Status has the following accessor methods (For V1):
            host_name
            description
            status
            current_attempt
            state_type
            last_check next_check
            check_type
            checks_enabled
            accept_passive_service_checks
            event_handler_enabled
            last_state_change
            problem_has_been_acknowledged
            last_hard_state
            time_ok
            current_notification_number
            time_warning
            time_critical
            process_performance_data
            notifications_enabled
            latency
            scheduled_downtime_depth
            is_flapping
            plugin_output
            percent_state_change
            execution_time
            time_unknown
            failure_prediction_enabled
            last_notification
            obsess_over_service
            flap_detection_enabled

       <b>list_services()</b>
           Returns  an array of all service descriptions in the status log.  Services that may be listed on more
           than one host are only listed once here.

            my @all_services = $log-&gt;list_services;

       <b>list_services_on_host()</b>
           Returns an array of services descriptions for a given host.

            my @host_services = $log-&gt;list_services_on_host($hostname);
            my @host_services = $log-&gt;list_services_on_host($nagios_object);

       <b>serviceproblems()</b>
           Returns a hash of all services that are not in an OK state

            my %serviceproblems = $log-&gt;serviceproblems();

       <b>host()</b>
           Returns a Nagios::Host::Status object.  Input can be a simple host_name, a Nagios::Host object, or  a
           Nagios::Service object.

            my $hst_stat = $log-&gt;host( 'localhost' );
            my $hst_stat = $log-&gt;host( $host_object );
            my $hst_stat = $log-&gt;host( $svc_object );

           Nagios::Host::Status has the following accessor methods (for V1):
            host_name
            status
            last_check
            last_state_change
            problem_has_been_acknowledged
            time_up
            time_down
            time_unreachable
            last_notification
            current_notification_number
            notifications_enabled
            event_handler_enabled
            checks_enabled
            flap_detection_enabled
            is_flapping
            percent_state_change
            scheduled_downtime_depth
            failure_prediction_enabled
            process_performance_data
            plugin_output

       <b>list_hosts()</b>
           Returns a simple array of host names (no objects).

            my @hosts = $log-&gt;list_hosts;

       <b>list_hostdowntime()</b>
           Returns a simple array of host downtimes (no objects)

            my @hostdowntimes = $log-&gt;list_hostdowntime;

       <b>info()</b> [Nagios v2 &amp; v3 logs only]
           Returns a Nagios::Info::Status object.   It only has two methods, <b>created()</b> and <b>version()</b>.

            my $i = $log-&gt;info;
            printf "Logfile created at %s unix epoch time for Nagios verion %s\n",
               $i-&gt;created,
               $i-&gt;version;

       <b>contact()</b> [Nagios v3 logs only]
           Returns  a  Nagios::Contact::Status object.  Input can be a simple contact_name, or a Nagios::Contact
           object.

            my $c = $log-&gt;contact( 'john' );
            my $c = $log-&gt;contact( $contact_object );

           Nagios::Contact::Status has the following accessor methods (for v3):
            contact_name
            modified_attributes
            modified_host_attributes
            modified_service_attributes
            host_notification_period
            service_notification_period
            last_host_notification
            last_service_notification
            host_notifications_enabled
            service_notifications_enabled

       <b>hostcomment()</b> [Nagios v3 logs only]
           Returns a Nagios::Hostcomment::Status object.  Input can be a simple host_name, or a Nagios::Host  or
           Nagios::Service object.

            my $c = $log-&gt;hostcomment( 'localhost' );
            my $c = $log-&gt;hostcomment( $localhost_object );
            my $c = $log-&gt;hostcomment( $localhost_service_object );
            foreach my $id (sort keys %$c) {
                printf "Host %s has a comment[$id] made by %s on %s: %s",
                  $c-&gt;{$id}-&gt;host_name, $c-&gt;{$id}-&gt;author, scalar localtime $c-&gt;{$id}-&gt;entry_time, $c-&gt;{$id}-&gt;comment_data;
            }

           Nagios::Hostcomment::Status  is a perl HASH, keyed with the Nagios comment IDs, where each ID has the
           following accessor methods (for v3):
            host_name
            entry_type
            comment_id
            source
            persistent
            entry_time
            expires
            expire_time
            author
            comment_data

       <b>servicecomment()</b> [Nagios v3 logs only]
           Returns a Nagios::Servicecomment::Status object.  Input can be a  simple  host_name  or  Nagios::Host
           object  with  a  service  description  or Nagios::Service object, or just a Nagios::Service object by
           itself.

            my $c = $log-&gt;servicecomment( 'localhost', 'SSH' );
            my $c = $log-&gt;servicecomment( $localhost_object, $localhost_ssh_svc_object );
            my $c = $log-&gt;servicecomment( $localhost_ssh_svc_object );
            foreach my $id (sort keys %$c) {
                printf "Service %s on %s  has a comment[$id] made by %s on %s: %s",
                  $c-&gt;{$id}-&gt;service_description, $c-&gt;{$id}-&gt;host_name, $c-&gt;{$id}-&gt;author, scalar localtime $c-&gt;{$id}-&gt;entry_time, $c-&gt;{$id}-&gt;comment_data;
            }

           Nagios::Servicecomment::Status is a perl HASH, keyed with the Nagios comment IDs, where each  ID  has
           the following accessor methods (for v3):
            host_name
            service_description
            entry_type
            comment_id
            source
            persistent
            entry_time
            expires
            expire_time
            author
            comment_data

       <b>hostdowntime()</b> [Nagios v3 logs only]
           Returns a Nagios::Hostdowntime::Status object.  Input can be a simple host_name, or a Nagios::Host or
           Nagios::Service object.

            my $d = $log-&gt;hostdowntime( 'localhost' );
            my $d = $log-&gt;hostdowntime( $localhost_object );
            my $d = $log-&gt;hostdowntime( $localhost_service_object );
            foreach my $id (sort keys %$d) {
                printf "Host %s has scheduled downtime[$id] made by %s on %s for %.1f hours [%s - %s]: %s",
                  $d-&gt;{$id}-&gt;host_name, $d-&gt;{$id}-&gt;author, scalar localtime $d-&gt;{$id}-&gt;entry_time, ($d-&gt;{$id}-&gt;duration)/3600.0,
                    scalar localtime $d-&gt;{$id}-&gt;start_time, scalar localtime $d-&gt;{$id}-&gt;end_time, $d-&gt;{$id}-&gt;comment;
            }

           Nagios::Hostdowntime::Status  is  a  perl HASH, keyed with the Nagios downtime IDs, where each ID has
           the following accessor methods (for v3):
            host_name
            downtime_id
            entry_time
            start_time
            end_time
            triggered_by
            fixed
            duration
            author
            comment

       <b>servicedowntime()</b> [Nagios v3 logs only]
           Returns a Nagios::Servicedowntime::Status object.  Input can be a simple  host_name  or  Nagios::Host
           object  with  a  service  description  or Nagios::Service object, or just a Nagios::Service object by
           itself.

            my $c = $log-&gt;servicedowntime( 'localhost', 'SSH' );
            my $c = $log-&gt;servicedowntime( $localhost_object, $localhost_ssh_svc_object );
            my $c = $log-&gt;servicedowntime( $localhost_ssh_svc_object );
            foreach my $id (sort keys %$d) {
                printf "Service %s on %s has scheduled downtime[$id] made by %s on %s for %.1f hours [%s - %s]: %s",
                  $d-&gt;{$id}-&gt;service_description, $d-&gt;{$id}-&gt;host_name, $d-&gt;{$id}-&gt;author, scalar localtime $d-&gt;{$id}-&gt;entry_time, ($d-&gt;{$id}-&gt;duration)/3600.0,
                    scalar localtime $d-&gt;{$id}-&gt;start_time, scalar localtime $d-&gt;{$id}-&gt;end_time, $d-&gt;{$id}-&gt;comment;
            }

           Nagios::Servicedowntime::Status is a perl HASH, keyed with the Nagios downtime IDs, where each ID has
           the following accessor methods (for v3):
            host_name
            service_description
            downtime_id
            entry_time
            start_time
            end_time
            triggered_by
            fixed
            duration
            author
            comment

       <b>program()</b>
           Returns a Nagios::Program::Status object. No arguments.

            my $prog_st = $log-&gt;program;

           Nagios::Program::Status has the following accessor methods (For V1):
            program_start
            nagios_pid
            daemon_mode
            last_command_check
            last_log_rotation
            enable_notifications
            execute_service_checks
            accept_passive_service_checks
            enable_event_handlers
            obsess_over_services
            enable_flap_detection
            enable_failure_prediction
            process_performance_data

</pre><h4><b>STRUCTURE</b></h4><pre>
       This module contains 4 packages: Nagios::StatusLog,  Nagios::Host::Status,  Nagios::Service::Status,  and
       Nagios::Program::Status.   The  latter 3 of them are mostly generated at compile-time in the BEGIN block.
       The accessor methods are real subroutines, not AUTOLOAD, so making a ton of calls to this  module  should
       be fairly quick.  Also, <b>update()</b> is set up to only do what it says - updating from a fresh logfile should
       not invalidate your existing ::Status objects.

</pre><h4><b>AUTHOR</b></h4><pre>
       Al Tobey &lt;<a href="mailto:tobeya@tobert.org">tobeya@tobert.org</a>&gt;

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Nagios::Host Nagios::Service

perl v5.34.0                                       2022-06-16                             <u>Nagios::<a href="../man3pm/StatusLog.3pm.html">StatusLog</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>