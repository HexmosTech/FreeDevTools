<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DateTime::Event::Sunrise - Perl DateTime extension for computing the sunrise/sunset on a given day</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdatetime-event-sunrise-perl">libdatetime-event-sunrise-perl_0.0506-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DateTime::Event::Sunrise - Perl DateTime extension for computing the sunrise/sunset on a given day

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use DateTime;
         use DateTime::Event::Sunrise;

         # generating DateTime objects from a DateTime::Event::Sunrise object
         my $sun_Kyiv = DateTime::Event::Sunrise-&gt;new(longitude =&gt; +30.85,  # 30°51'E
                                                      latitude  =&gt; +50.45); # 50°27'N
         for (12, 13, 14) {
           my $dt_yapc_eu = DateTime-&gt;new(year      =&gt; 2013,
                                          month     =&gt;    8,
                                          day       =&gt;   $_,
                                          time_zone =&gt; 'Europe/Kiev');
           say "In Kyiv (50°27'N, 30°51'E) on ", $dt_yapc_eu-&gt;ymd, " sunrise occurs at ", $sun_Kyiv-&gt;sunrise_datetime($dt_yapc_eu)-&gt;hms,
                                                                " and sunset occurs at ", $sun_Kyiv-&gt;sunset_datetime ($dt_yapc_eu)-&gt;hms;
         }

         # generating DateTime objects from DateTime::Set objects
         my $sunrise_Austin = DateTime::Event::Sunrise-&gt;sunrise(longitude =&gt; -94.73,  # 97°44'W
                                                                latitude  =&gt; +30.3);  # 30°18'N
         my $sunset_Austin  = DateTime::Event::Sunrise-&gt;sunset (longitude =&gt; -94.73,
                                                                latitude  =&gt; +30.3);
         my $dt_yapc_na_rise = DateTime-&gt;new(year      =&gt; 2013,
                                             month     =&gt;    6,
                                             day       =&gt;    3,
                                             time_zone =&gt; 'America/Chicago');
         my $dt_yapc_na_set = $dt_yapc_na_rise-&gt;clone;
         say "In Austin (30°18'N, 97°44'W), sunrises and sunsets are";
         for (1..3) {
           $dt_yapc_na_rise = $sunrise_Austin-&gt;next($dt_yapc_na_rise);
           $dt_yapc_na_set  = $sunset_Austin -&gt;next($dt_yapc_na_set);
           say $dt_yapc_na_rise, ' ', $dt_yapc_na_set;
         }

         # If you deal with a polar location
         my $sun_in_Halley = DateTime::Event::Sunrise-&gt;new(
                                        longitude =&gt; -26.65, # 26°39'W
                                        latitude  =&gt; -75.58, # 75°35'S
                                        precise   =&gt; 1,
                                        );
         my $Alex_arrival = DateTime-&gt;new(year  =&gt; 2006, # approximate date, not necessarily the exact one
                                          month =&gt;    1,
                                          day   =&gt;   15,
                                          time_zone =&gt; 'Antarctica/Rothera');
         say $Alex_arrival-&gt;strftime("Alex Gough (a Perl programmer) arrived at Halley Base on %Y-%m-%d.");
         if ($sun_in_Halley-&gt;is_polar_day($Alex_arrival)) {
           say "It would be days, maybe weeks, before the sun would set.";
         }
         elsif ($sun_in_Halley-&gt;is_polar_night($Alex_arrival)) {
           say "It would be days, maybe weeks, before the sun would rise.";
         }
         else {
           my $sunset = $sun_in_Halley-&gt;sunset_datetime($Alex_arrival);
           say $sunset-&gt;strftime("And he saw his first antarctic sunset at %H:%M:%S.");
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module will computes the time of sunrise and sunset for a given date and a given location. The
       computation uses Paul Schlyter's algorithm.

       Actually, the module creates a DateTime::Event::Sunrise object or a DateTime::Set object, which are used
       to generate the sunrise or the sunset times for a given location and for any date.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
       This is the DateTime::Event::Sunrise constructor. It takes keyword parameters, which are:

       longitude
           This  is  the  longitude of the location where the sunrises and sunsets are observed.  It is given as
           decimal degrees: no minutes, no seconds, but tenths and hundredths of degrees.   Another  break  with
           the normal usage is that Eastern longitude are positive, Western longitudes are negative.

           Default value is 0, that is Greenwich or any location on the eponymous meridian.

       latitude
           This  is  the  latitude  of  the  location  where  the sunrises and sunsets are observed.  As for the
           longitude, it is given  as  decimal  degrees.  Northern  latitudes  are  positive  numbers,  Southern
           latitudes are negative numbers.

           Default value is 0, that is any location on the equator.

       altitude
           This  is  the height of the Sun at sunrise or sunset. In astronomical context, the altitude or height
           is the angle between the Sun and the local horizon. It  is  expressed  as  degrees,  usually  with  a
           negative number, since the Sun is <u>below</u> the horizon.

           Default  value  is  -0.833,  that  is  when the sun's upper limb touches the horizon, while taking in
           account the light refraction.

           Positive altitude are allowed, in case the location is near a mountain range  behind  which  the  sun
           rises or sets.

       precise
           Boolean  to  control  which  algorithm is used. A false value gives a simple algorithm, but which can
           lead to inaccurate sunrise times and sunset times. A true value gives  a  more  elaborate  algorithm,
           with a loop to refine the sunrise and sunset times and obtain a better precision.

           Default value is 0, to choose the simple algorithm.

           This parameter replaces the "iteration" deprecated parameter.

       upper_limb
           Boolean  to  choose  between  checking  the Sun's upper limb or its center.  A true value selects the
           upper limb, a false value selects the center.

           This parameter is significant only when the altitude does not already deal with the sun radius.  When
           the altitude takes into account the sun radius, this parameter should be false.

           Default value is 0, since the upper limb correction is already taken  in  account  with  the  default
           -0.833 altitude.

       silent
           Boolean  to  control  the  output  of some warning messages.  With polar locations and dates near the
           winter solstice or the summer solstice, it may happen that the sun never rises above the  horizon  or
           never  sets  below.   If  this  parameter  is  set  to false, the module will send warnings for these
           conditions. If this parameter is set to true, the module will not pollute your <u>STDERR</u> stream.

           Default value is 0, for backward compatibility.

       trace
           This parameter should  either be a false value or  a filehandle opened for output.   In  the   latter
           case,   a  few messages  are printed  to the filehandle, which  allows the programmer to  see step by
           step  how the sunrise and the sunset are computed.

           Used for  analysis and debugging purposes.  You need to read  the text <u>doc/astronomical-notes.pod</u>  in
           the sister  module Astro::Sunrise to understand what the traced values represent.

           Default value is 0, which does not produce trace messages.

   <b>sunrise,</b> <b>sunset</b>
       Although   they  come  from  the  DateTime::Event::Sunrise  module,  these  methods  are  "DateTime::Set"
       constructors. They use the same parameters as the  "new"  constructor,  but  they  give  objects  from  a
       different class.

   <b>sunrise_datetime,</b> <b>sunset_datetime</b>
       These two methods apply to "DateTime::Event::Sunrise" objects (that is, created with "new", not "sunrise"
       or  "sunset").  They receive one parameter in addition to $self, a "DateTime" object. They return another
       "DateTime" object, for the same day, but with the time of the sunrise or sunset, respectively.

   <b>sunrise_sunset_span</b>
       This method applies to "DateTime::Event::Sunrise" objects. It accepts a "DateTime" object as  the  second
       parameter. It returns a "DateTime::Span" object, beginning at sunrise and ending at sunset.

   <b>is_polar_night,</b> <b>is_polar_day,</b> <b>is_day_and_night</b>
       These  methods apply to "DateTime::Event::Sunrise" objects. They accept a "DateTime" object as the second
       parameter. They return a boolean indicating the following condutions:

       •   is_polar_night is true when the sun stays under the horizon. Or rather under the  altitude  parameter
           used when the "DateTime::Event::Sunrise" object was created.

       •   is_polar_day  is  true when the sun stays above the horizon, resulting in a "Midnight sun". Or rather
           when it stays above the altitude  parameter  used  when  the  "DateTime::Event::Sunrise"  object  was
           created.

       •   is_day_and_night is true when neither is_polar_day, nor is_polar_night are true.

   <b>next</b> <b>current</b> <b>previous</b> <b>contains</b> <b>as_list</b> <b>iterator</b>
       See DateTime::Set.

</pre><h4><b>EXTENDED</b> <b>EXAMPLES</b></h4><pre>
         my $dt = DateTime-&gt;new( year   =&gt; 2000,
                                 month  =&gt; 6,
                                 day    =&gt; 20,
                         );

         my $sunrise = DateTime::Event::Sunrise -&gt;sunrise (
                               longitude =&gt;'-118',
                               latitude  =&gt;'33',
                               altitude  =&gt; '-0.833',
                               precise   =&gt; '1'
                         );

         my $sunset = DateTime::Event::Sunrise -&gt;sunset (
                               longitude =&gt;'-118',
                               latitude  =&gt;'33',
                               altitude  =&gt; '-0.833',
                               precise   =&gt; '1'
                         );

         my $tmp_rise = $sunrise-&gt;next( $dt );

         my $dt2 = DateTime-&gt;new( year   =&gt; 2000,
                                  month  =&gt; 12,
                                  day    =&gt; 31,
                          );

         # iterator
         my $dt_span = DateTime::Span-&gt;new( start =&gt;$dt, end=&gt;$dt2 );
         my $set = $sunrise-&gt;intersection($dt_span);
         my $iter = $set-&gt;iterator;
         while ( my $dt = $iter-&gt;next ) {
           print ' ',$dt-&gt;datetime;
         }

         # is it day or night?
         my $day_set = DateTime::SpanSet-&gt;from_sets(
           start_set =&gt; $sunrise, end_set =&gt; $sunset );
         print $day_set-&gt;contains( $dt ) ? 'day' : 'night';

         my $dt = DateTime-&gt;new( year   =&gt; 2000,
                          month  =&gt; 6,
                          day    =&gt; 20,
                          time_zone =&gt; 'America/Los_Angeles',
                           );

         my $sunrise = DateTime::Event::Sunrise -&gt;new(
                              longitude =&gt;'-118' ,
                              latitude  =&gt; '33',
                              altitude  =&gt; '-0.833',
                              precise   =&gt; '1'

         );

         my $tmp = $sunrise-&gt;sunrise_sunset_span($dt);
         print "Sunrise is:" , $tmp-&gt;start-&gt;datetime , "\n";
         print "Sunset is:" , $tmp-&gt;end-&gt;datetime;

</pre><h4><b>NOTES</b></h4><pre>
   <b>Longitude</b> <b>Signs</b>
       Remember, contrary to the usual convention,

       EASTERN longitudes are POSITIVE,

       WESTERN longitudes are NEGATIVE.

       On the other hand, the latitude signs follow the usual convention:

       Northen latitudes are positive,

       Southern latitudes are negative.

   <b>Sun</b> <b>Height</b>
       There  are  a  number  of  sun  heights  to  choose from. The default is -0.833 because this is what most
       countries use. Feel free to specify it if you need to. Here is the list of  values  to  specify  the  sun
       height with:

       •   <b>0</b> degrees

           Center of Sun's disk touches a mathematical horizon

       •   <b>-0.25</b> degrees

           Sun's upper limb touches a mathematical horizon

       •   <b>-0.583</b> degrees

           Center of Sun's disk touches the horizon; atmospheric refraction accounted for

       •   <b>-0.833</b> degrees

           Sun's supper limb touches the horizon; atmospheric refraction accounted for

       •   <b>-6</b> degrees

           Civil twilight (one can no longer read outside without artificial illumination)

       •   <b>-12</b> degrees

           Nautical twilight (navigation using a sea horizon no longer possible)

       •   <b>-15</b> degrees

           Amateur astronomical twilight (the sky is dark enough for most astronomical observations)

       •   <b>-18</b> degrees

           Astronomical twilight (the sky is completely dark)

   <b>Notes</b> <b>on</b> <b>the</b> <b>Precise</b> <b>Algorithm</b>
       The  original  method  only  gives  an  approximate  value of the Sun's rise/set times.  The error rarely
       exceeds one or two minutes, but at high latitudes, when the Midnight Sun soon  will  start  or  just  has
       ended,  the  errors  may  be  much  larger. If you want higher accuracy, you must then select the precise
       variant of the algorithm. This feature is new as of version 0.7. Here is what  I  (module  creator)  have
       tried to accomplish with this.

       a)  Compute sunrise or sunset as always, with one exception: to convert LHA from degrees to hours, divide
           by  15.04107 instead of 15.0 (this accounts for the difference between the solar day and the sidereal
           day.

       b)  Re-do the computation but compute the Sun's RA and Decl, and also GMST0, for the moment of sunrise or
           sunset last computed.

       c)  Iterate b) until the  computed  sunrise  or  sunset  no  longer  changes  significantly.   Usually  2
           iterations are enough, in rare cases 3 or 4 iterations may be needed.

       However,  I (second module maintainer) have checked with a few external sources, to obtain test data. And
       actually, using the value 15.0 gives results closer to what Stellarium  and  the  NOAA  solar  calculator
       give.  So I will use value 15.0, unless I find a bug in the precise algorithm as presently implemented.

   <b>Notes</b> <b>on</b> <b>polar</b> <b>locations</b>
       If  the  location  is  beyond either polar circle, and if the date is near either solstice,  there can be
       midnight sun  or polar night.  In this case, there  is neither  sunrise  nor  sunset,   and  the   module
       "carp"s  that  the  sun never  rises or never sets. Then, it  returns the time at which the sun is at its
       highest or lowest point.

       When computing twilights instead of  sunrises / sunsets, the limit for polar locations extends  a  little
       beyond  the  polar  circle.  For  example, for  nautical twilights  (12 degrees  below the  horizon), the
       limits where midnight sun might happen is  12 degrees southward of the Arctic  Circle   and  12   degrees
       northward  of the  Antarctic Circle,  that is, about 54° latitude instead of 66°33′.

</pre><h4><b>DEPENDENCIES</b></h4><pre>
       This module requires:

       •   DateTime

       •   DateTime::Set

       •   DateTime::Span

       •   Params::Validate

       •   Set::Infinite

       •   POSIX

       •   Math::Trig

</pre><h4><b>BUGS</b> <b>AND</b> <b>CAVEATS</b></h4><pre>
       Using  a  latitude  of  90  degrees (North Pole or South Pole) gives curious results.  I guess that it is
       linked with a ambiguous value resulting from a 0/0 computation.

       Using a longitude of 177 degrees, or any longitude near the 180 meridian, may also give curious  results,
       especially with the precise algorithm.

       The precise algorithm should be thoroughly analysed, to understand why the value 15.04107 advised by Paul
       Schlyter does not give the expected results.

       The  precise  algorithm  is  not  tested  with  polar locations. At least, it is tested with a near-polar
       location,  Fairbanks, at the time when the night is at its shortest, that is, in June.

</pre><h4><b>AUTHORS</b></h4><pre>
       Original author: Ron Hill &lt;<a href="mailto:rkhill@firstlight.net">rkhill@firstlight.net</a>&gt;

       Co-maintainer: Jean Forget &lt;<a href="mailto:JFORGET@cpan.org">JFORGET@cpan.org</a>&gt;

</pre><h4><b>SPECIAL</b> <b>THANKS</b></h4><pre>
       Robert Creager [<a href="mailto:Astro-Sunrise@LogicalChaos.org">Astro-Sunrise@LogicalChaos.org</a>]
           for providing help with converting Paul's C code to perl.

       Flávio S. Glock [<a href="mailto:fglock@pucrs.br">fglock@pucrs.br</a>]
           for providing the the interface to the DateTime::Set module.

       Eric Jensen
           for  positive and  interesting advices  about the  new version  of the module

</pre><h4><b>CREDITS</b></h4><pre>
       Paul Schlyter, Stockholm, Sweden
           for his excellent web page on the subject.

       Rich Bowen (<a href="mailto:rbowen@rbowen.com">rbowen@rbowen.com</a>)
           for suggestions.

       People at &lt;https://geocoder.opencagedata.com/&gt;
           for noticing an endless loop condition in Astro::Sunrise and for fixing it.

</pre><h4><b>COPYRIGHT</b> <b>and</b> <b>LICENSE</b></h4><pre>
   <b>Perl</b> <b>Module</b>
       This program is distributed under the same terms as Perl 5.16.3: GNU Public License version  1  or  later
       and Perl Artistic License

       You     can     find     the    text    of    the    licenses    in    the    <u>LICENSE</u>    file    or    at
       &lt;https://dev.perl.org/licenses/artistic.html&gt; and &lt;https://www.gnu.org/licenses/gpl-1.0.html&gt;.

       Here is the summary of GPL:

       This program is free software; you can redistribute it and/or modify  it  under  the  terms  of  the  GNU
       General  Public  License  as  published  by  the  Free Software Foundation; either version 1, or (at your
       option) any later version.

       This program is distributed in the hope that it will be useful, but WITHOUT ANY  WARRANTY;  without  even
       the  implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public
       License for more details.

       You should have received a copy of the GNU General Public License along with this program; if not,  write
       to the Free Software Foundation, Inc., &lt;https://www.fsf.org/&gt;.

   <b>Original</b> <b>C</b> <b>program</b>
       Here is the copyright information provided by Paul Schlyter for the original C program:

       Written as DAYLEN.C, 1989-08-16

       Modified to SUNRISET.C, 1992-12-01

       (c) Paul Schlyter, 1989, 1992

       Released to the public domain by Paul Schlyter, December 1992

       Permission  is  hereby  granted,  free  of  charge,  to  any person obtaining a copy of this software and
       associated documentation files (the "Software"), to deal in the Software without  restriction,  including
       without  limitation  the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
       copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to  the
       following conditions:

       The  above  copyright  notice  and  this permission notice shall be included in all copies or substantial
       portions of the Software.

       THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR  IMPLIED,  INCLUDING  BUT  NOT
       LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
       EVENT  SHALL  THE  AUTHOR  BE  LIABLE  FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF
       CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR  OTHER
       DEALINGS IN THE SOFTWARE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/perl.1.html">perl</a></b>(1).

       DateTime Web page at &lt;<a href="http://datetime.perl.org/">http://datetime.perl.org/</a>&gt;

       DateTime::Set

       DateTime::SpanSet

       Astro::Sunrise

       DateTime::Event::Jewish::Sunrise

       Astro::Coords

       Astro::PAL

       Paul Schlyter's homepage at &lt;https://stjarnhimlen.se/english.html&gt;

       The NOAA solar calculator at &lt;https://www.esrl.noaa.gov/gmd/grad/solcalc/&gt;

perl v5.36.0                                       2022-08-28                      <u>DateTime::Event::<a href="../man3pm/Sunrise.3pm.html">Sunrise</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>