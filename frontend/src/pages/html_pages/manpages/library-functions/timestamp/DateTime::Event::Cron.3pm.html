<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DateTime::Event::Cron - DateTime extension for generating recurrence sets from crontab lines and files.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdatetime-event-cron-perl">libdatetime-event-cron-perl_0.09-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DateTime::Event::Cron - DateTime extension for generating recurrence sets from crontab lines and files.

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use DateTime::Event::Cron;

         # check if a date matches (defaults to current time)
         my $c = DateTime::Event::Cron-&gt;new('* 2 * * *');
         if ($c-&gt;match) {
           # do stuff
         }
         if ($c-&gt;match($date)) {
           # do something else for datetime $date
         }

         # DateTime::Set construction from crontab line
         $crontab = '*/3 15 1-10 3,4,5 */2';
         $set = DateTime::Event::Cron-&gt;from_cron($crontab);
         $iter = $set-&gt;iterator(after =&gt; DateTime-&gt;now);
         while (1) {
           my $next = $iter-&gt;next;
           my $now  = DateTime-&gt;now;
           sleep(($next-&gt;subtract_datetime_absolute($now))-&gt;seconds);
           # do stuff...
         }

         # List of DateTime::Set objects from crontab file
         @sets = DateTime::Event::Cron-&gt;from_crontab(file =&gt; '<a href="file:/etc/crontab">/etc/crontab</a>');
         $now = DateTime-&gt;now;
         print "Now: ", $now-&gt;datetime, "\n";
         foreach (@sets) {
           my $next = $_-&gt;next($now);
           print $next-&gt;datetime, "\n";
         }

         # DateTime::Set parameters
         $crontab = '* * * * *';

         $now = DateTime-&gt;now;
         %set_parms = ( after =&gt; $now );
         $set = DateTime::Event::Cron-&gt;from_cron(cron =&gt; $crontab, %set_parms);
         $dt = $set-&gt;next;
         print "Now: ", $now-&gt;datetime, " and next: ", $dt-&gt;datetime, "\n";

         # Spans for DateTime::Set
         $crontab = '* * * * *';
         $now = DateTime-&gt;now;
         $now2 = $now-&gt;clone;
         $span = DateTime::Span-&gt;from_datetimes(
                   start =&gt; $now-&gt;add(minutes =&gt; 1),
                   end   =&gt; $now2-&gt;add(hours =&gt; 1),
                 );
         %parms = (cron =&gt; $crontab, span =&gt; $span);
         $set = DateTime::Event::Cron-&gt;from_cron(%parms);
         # ...do things with the DateTime::Set

         # Every RTFCT relative to 12am Jan 1st this year
         $crontab = '7-10 6,12-15 10-28/2 */3 3,4,5';
         $date = DateTime-&gt;now-&gt;truncate(to =&gt; 'year');
         $set = DateTime::Event::Cron-&gt;from_cron(cron =&gt; $crontab, after =&gt; $date);

         # Rather than generating DateTime::Set objects, next/prev
         # calculations can be made directly:

         # Every day at 10am, 2pm, and 6pm. Reference date
         # defaults to DateTime-&gt;now.
         $crontab = '10,14,18 * * * *';
         $dtc = DateTime::Event::Cron-&gt;new_from_cron(cron =&gt; $crontab);
         $next_datetime = $dtc-&gt;next;
         $last_datetime = $dtc-&gt;previous;
         ...

         # List of DateTime::Event::Cron objects from
         # crontab file
         @dtc = DateTime::Event::Cron-&gt;new_from_crontab(file =&gt; '<a href="file:/etc/crontab">/etc/crontab</a>');

         # Full cron lines with user, such as from <a href="file:/etc/crontab">/etc/crontab</a>
         # or files in <a href="file:/etc/cron.d">/etc/cron.d</a>, are supported and auto-detected:
         $crontab = '* * * * * gump <a href="file:/bin/date">/bin/date</a>';
         $dtc = DateTime::Event::Cron-&gt;new(cron =&gt; $crontab);

         # Auto-detection of users is disabled if you explicitly
         # enable/disable via the user_mode parameter:
         $dtc = DateTime::Event::Cron-&gt;new(cron =&gt; $crontab, user_mode =&gt; 1);
         my $user = $dtc-&gt;user;
         my $command = $dtc-&gt;command;

         # Unparsed original cron entry
         my $original = $dtc-&gt;original;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       DateTime::Event::Cron generated DateTime events or DateTime::Set objects based on crontab-style entries.

</pre><h4><b>METHODS</b></h4><pre>
       The cron fields are typical crontab-style entries. For more information, see <b><a href="../man5/crontab.5.html">crontab</a></b>(5) and extensions
       described in Set::Crontab. The fields can be passed as a single string or as a reference to an array
       containing each field. Only the first five fields are retained.

   <b>DateTime::Set</b> <b>Factories</b>
       See DateTime::Set for methods provided by Set objects, such as "next()" and "previous()".

       from_cron($cronline)
       from_cron(cron =&gt; $cronline, %parms, %set_parms)
           Generates  a  DateTime::Set  recurrence  for the cron line provided. See <b>new()</b> for details on %parms.
           Optionally takes parameters for DateTime::Set.

       from_crontab(file =&gt; $crontab_fh, %parms, %set_parms)
           Returns a list of DateTime::Set recurrences based on lines from a crontab file.  $crontab_fh  can  be
           either  a  filename  or  filehandle  reference.  See  <b>new()</b>  for  details  on %parm. Optionally takes
           parameters for DateTime::Set which will be passed along to each set for each line.

       as_set(%set_parms)
           Generates a DateTime::Set recurrence from an existing DateTime::Event::Cron object.

   <b>Constructors</b>
       new_from_cron(cron =&gt; $cronstring, %parms)
           Returns a DateTime::Event::Cron object based on the cron specification.  Optional parameters  include
           the  boolean 'user_mode' which indicates that the crontab entry includes a username column before the
           command.

       new_from_crontab(file =&gt; $fh, %parms)
           Returns a list of DateTime::Event::Cron objects based on the lines of a  crontab  file.  $fh  can  be
           either  a filename or a filehandle reference.  Optional parameters include the boolean 'user_mode' as
           mentioned above.

   <b>Other</b> <b>methods</b>
       <b>next()</b>
       next($date)
           Returns the next valid datetime according to the cron specification.  $date defaults to DateTime-&gt;now
           unless provided.

       <b>previous()</b>
       previous($date)
           Returns the previous  valid  datetime  according  to  the  cron  specification.   $date  defaults  to
           DateTime-&gt;now unless provided.

       increment($date)
       decrement($date)
           Same as "next()" and "previous()" except that the provided datetime is modified to the new datetime.

       match($date)
           Returns  whether  or  not  the  given  datetime  (defaults  to current time) matches the current cron
           specification. Dates are truncated to minute resolution.

       valid($date)
           A more strict version of <b>match()</b>. Returns whether the given datetime is valid under the current  cron
           specification.  Cron  dates  are only accurate to the minute -- datetimes with seconds greater than 0
           are invalid by default. (note: never fear, all methods accepting dates will accept invalid  dates  --
           they  will  simply  be  rounded  to  the  next nearest valid date in all cases except this particular
           method)

       <b>command()</b>
           Returns the command string, if any, from the original  crontab  entry.   Currently  no  expansion  is
           performed such as resolving environment variables, etc.

       <b>user()</b>
           Returns  the  username  under  which  this cron command was to be executed, assuming such a field was
           present in the original cron entry.

       <b>original()</b>
           Returns the original, unparsed cron string including any user or command fields.

</pre><h4><b>AUTHOR</b></h4><pre>
       Matthew P. Sisk &lt;<a href="mailto:sisk@mojotoad.com">sisk@mojotoad.com</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2003 Matthew P. Sisk. All rights reserved.  All  wrongs  revenged.  This  program  is  free
       software; you can distribute it and/or modify it under the same terms as Perl itself.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/DateTime.3.html">DateTime</a></b>(3),       <b>DateTime::<a href="../man3/Set.3.html">Set</a></b>(3),       <b>DateTime::Event::<a href="../man3/Recurrence.3.html">Recurrence</a></b>(3),      <b>DateTime::Event::<a href="../man3/ICal.3.html">ICal</a></b>(3),
       <b>DateTime::<a href="../man3/Span.3.html">Span</a></b>(3), <b>Set::<a href="../man3/Crontab.3.html">Crontab</a></b>(3), <b><a href="../man5/crontab.5.html">crontab</a></b>(5)

perl v5.34.0                                       2022-06-13                         <u>DateTime::Event::<a href="../man3pm/Cron.3pm.html">Cron</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>