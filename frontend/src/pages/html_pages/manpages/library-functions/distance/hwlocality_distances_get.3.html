<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hwlocality_distances_get - Retrieve distances between objects</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libhwloc-doc">libhwloc-doc_2.12.0-4build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       hwlocality_distances_get - Retrieve distances between objects

</pre><h4><b>SYNOPSIS</b></h4><pre>
   <b>Data</b> <b>Structures</b>
       struct <b>hwloc_distances_s</b>

   <b>Enumerations</b>
       enum <b>hwloc_distances_kind_e</b> { <b>HWLOC_DISTANCES_KIND_FROM_OS</b>, <b>HWLOC_DISTANCES_KIND_FROM_USER</b>,
           <b>HWLOC_DISTANCES_KIND_MEANS_LATENCY</b>, <b>HWLOC_DISTANCES_KIND_MEANS_BANDWIDTH</b>,
           <b>HWLOC_DISTANCES_KIND_HETEROGENEOUS_TYPES</b> }
       enum <b>hwloc_distances_transform_e</b> { <b>HWLOC_DISTANCES_TRANSFORM_REMOVE_NULL</b>,
           <b>HWLOC_DISTANCES_TRANSFORM_LINKS</b>, <b>HWLOC_DISTANCES_TRANSFORM_MERGE_SWITCH_PORTS</b>,
           <b>HWLOC_DISTANCES_TRANSFORM_TRANSITIVE_CLOSURE</b> }

   <b>Functions</b>
       int <b>hwloc_distances_get</b> (<b>hwloc_topology_t</b> topology, unsigned *nr, struct <b>hwloc_distances_s</b> **distances,
           unsigned long kind, unsigned long flags)
       int <b>hwloc_distances_get_by_depth</b> (<b>hwloc_topology_t</b> topology, int depth, unsigned *nr, struct
           <b>hwloc_distances_s</b> **distances, unsigned long kind, unsigned long flags)
       int <b>hwloc_distances_get_by_type</b> (<b>hwloc_topology_t</b> topology, <b>hwloc_obj_type_t</b> type, unsigned *nr, struct
           <b>hwloc_distances_s</b> **distances, unsigned long kind, unsigned long flags)
       int <b>hwloc_distances_get_by_name</b> (<b>hwloc_topology_t</b> topology, const char *name, unsigned *nr, struct
           <b>hwloc_distances_s</b> **distances, unsigned long flags)
       const char * <b>hwloc_distances_get_name</b> (<b>hwloc_topology_t</b> topology, struct <b>hwloc_distances_s</b> *distances)
       void <b>hwloc_distances_release</b> (<b>hwloc_topology_t</b> topology, struct <b>hwloc_distances_s</b> *distances)
       int <b>hwloc_distances_transform</b> (<b>hwloc_topology_t</b> topology, struct <b>hwloc_distances_s</b> *distances, enum
           <b>hwloc_distances_transform_e</b> transform, void *transform_attr, unsigned long flags)

</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
</pre><h4><b>Enumeration</b> <b>Type</b> <b>Documentation</b></h4><pre>
   <b>enum</b> <b>hwloc_distances_kind_e</b>
       Kinds of distance matrices. The kind attribute of struct <b>hwloc_distances_s</b> is a OR'ed set of kinds.

       Each distance matrix may have only one kind among HWLOC_DISTANCES_KIND_FROM_* specifying where distance
       information comes from, and one kind among HWLOC_DISTANCES_KIND_MEANS_* specifying whether values are
       latencies or bandwidths.

       <b>Enumerator</b>

       <u>HWLOC_DISTANCES_KIND_FROM_OS</u>
              These distances were obtained from the operating system or hardware.

       <u>HWLOC_DISTANCES_KIND_FROM_USER</u>
              These distances were provided by the user.

       <u>HWLOC_DISTANCES_KIND_MEANS_LATENCY</u>
              Distance  values  are similar to latencies between objects. Values are smaller for closer objects,
              hence minimal on the diagonal of the matrix (distance between an object and itself). It could also
              be the number of network hops between objects, etc.

       <u>HWLOC_DISTANCES_KIND_MEANS_BANDWIDTH</u>
              Distance values are similar to bandwidths between objects. Values are higher for  closer  objects,
              hence  maximal  on the diagonal of the matrix (distance between an object and itself). Such values
              are currently ignored for distance-based grouping.

       <u>HWLOC_DISTANCES_KIND_HETEROGENEOUS_TYPES</u>
              This  distances  structure  covers  objects  of  different  types.   This   may   apply   to   the
              'NVLinkBandwidth' structure in presence of a NVSwitch or POWER processor NVLink port.

   <b>enum</b> <b>hwloc_distances_transform_e</b>
       Transformations of distances structures.

       <b>Enumerator</b>

       <u>HWLOC_DISTANCES_TRANSFORM_REMOVE_NULL</u>
              Remove  NULL objects from the distances structure. Every object that was replaced with NULL in the
              objs array is removed and the values array is updated accordingly.

       At least 2 objects must remain, otherwise <b>hwloc_distances_transform()</b> will return -1 with  errno  set  to
       EINVAL.

       kind  will be updated with or without <b>HWLOC_DISTANCES_KIND_HETEROGENEOUS_TYPES</b> according to the remaining
       objects.

       <u>HWLOC_DISTANCES_TRANSFORM_LINKS</u>
              Replace bandwidth values with a number of links. Usually all values will be either 0 (no link)  or
              1  (one  link). However some matrices could get larger values if some pairs of peers are connected
              by different numbers of links.

       Values on the diagonal are set to 0.

       This transformation only applies to bandwidth matrices.

       <u>HWLOC_DISTANCES_TRANSFORM_MERGE_SWITCH_PORTS</u>
              Merge switches with multiple ports into a single object. This currently only applies to NVSwitches
              where GPUs seem connected to different switch ports. Switch ports must  be  objects  with  subtype
              'NVSwitch' as in the NVLinkBandwidth matrix.

       This  transformation  will  replace  all  ports with only the first one, now connected to all GPUs. Other
       ports are removed by applying <b>HWLOC_DISTANCES_TRANSFORM_REMOVE_NULL</b> internally.

       <u>HWLOC_DISTANCES_TRANSFORM_TRANSITIVE_CLOSURE</u>
              Apply a transitive closure to the matrix to connect objects across switches.  All  pairs  of  GPUs
              will be reported as directly connected instead GPUs being only connected to switches.

       Switch ports must be objects with subtype 'NVSwitch' as in the NVLinkBandwidth matrix.

</pre><h4><b>Function</b> <b>Documentation</b></h4><pre>
   <b>int</b>  <b>hwloc_distances_get</b>  <b>(hwloc_topology_t</b>  <b>topology,</b>  <b>unsigned</b> <b>*</b> <b>nr,</b> <b>struct</b> <b>hwloc_distances_s</b> <b>**</b> <b>distances,</b>
       <b>unsigned</b> <b>long</b> <b>kind,</b> <b>unsigned</b> <b>long</b> <b>flags)</b>
       Retrieve distance matrices. Retrieve distance matrices from the topology into the distances array.

       flags is currently unused, should be 0.

       kind  serves  as  a  filter.  If  0,  all  distance  matrices  are  returned.   If   it   contains   some
       HWLOC_DISTANCES_KIND_FROM_*,  only  distance matrices whose kind matches one of these are returned. If it
       contains some HWLOC_DISTANCES_KIND_MEANS_*, only distance matrices whose kind matches one  of  these  are
       returned.

       On  input,  nr  points  to the number of distance matrices that may be stored in distances. On output, nr
       points to the number of distance matrices that were actually found, even if  some  of  them  couldn't  be
       stored  in  distances.  Distance  matrices  that  couldn't  be stored are ignored, but the function still
       returns success (0). The caller may find out by comparing the value pointed by nr before  and  after  the
       function call.

       Each  distance  matrix  returned  in  the  distances  array  should  be  released  by  the  caller  using
       <b>hwloc_distances_release()</b>.

       <b>Returns</b>
           0 on success, -1 on error.

   <b>int</b>  <b>hwloc_distances_get_by_depth</b>  <b>(hwloc_topology_t</b>   <b>topology,</b>   <b>int</b>   <b>depth,</b>   <b>unsigned</b>   <b>*</b>   <b>nr,</b>   <b>struct</b>
       <b>hwloc_distances_s</b> <b>**</b> <b>distances,</b> <b>unsigned</b> <b>long</b> <b>kind,</b> <b>unsigned</b> <b>long</b> <b>flags)</b>
       Retrieve   distance   matrices   for   object   at  a  specific  depth  in  the  topology.  Identical  to
       <b>hwloc_distances_get()</b> with the additional depth filter.

       <b>Returns</b>
           0 on success, -1 on error.

   <b>int</b> <b>hwloc_distances_get_by_name</b> <b>(hwloc_topology_t</b>  <b>topology,</b>  <b>const</b>  <b>char</b>  <b>*</b>  <b>name,</b>  <b>unsigned</b>  <b>*</b>  <b>nr,</b>  <b>struct</b>
       <b>hwloc_distances_s</b> <b>**</b> <b>distances,</b> <b>unsigned</b> <b>long</b> <b>flags)</b>
       Retrieve  a  distance  matrix with the given name. Usually only one distances structure may match a given
       name.

       The name of the most common structure  is  'NUMALatency'.  Others  include  'XGMIBandwidth',  'XGMIHops',
       'XeLinkBandwidth', and 'NVLinkBandwidth'.

       <b>Returns</b>
           0 on success, -1 on error.

   <b>int</b>  <b>hwloc_distances_get_by_type</b>  <b>(hwloc_topology_t</b>  <b>topology,</b>  <b>hwloc_obj_type_t</b>  <b>type,</b> <b>unsigned</b> <b>*</b> <b>nr,</b> <b>struct</b>
       <b>hwloc_distances_s</b> <b>**</b> <b>distances,</b> <b>unsigned</b> <b>long</b> <b>kind,</b> <b>unsigned</b> <b>long</b> <b>flags)</b>
       Retrieve distance matrices for object of a specific type. Identical  to  <b>hwloc_distances_get()</b>  with  the
       additional type filter.

       <b>Returns</b>
           0 on success, -1 on error.

   <b>const</b> <b>char</b> <b>*</b> <b>hwloc_distances_get_name</b> <b>(hwloc_topology_t</b> <b>topology,</b> <b>struct</b> <b>hwloc_distances_s</b> <b>*</b> <b>distances)</b>
       Get  a  description  of  what  a  distances  structure contains. For instance 'NUMALatency' for hardware-
       provided NUMA distances (ACPI SLIT), or NULL if unknown.

       <b>Returns</b>
           the constant string with the name of the distance structure.

       <b>Note</b>
           The returned name should not be freed by the caller, it belongs to the hwloc library.

   <b>void</b> <b>hwloc_distances_release</b> <b>(hwloc_topology_t</b> <b>topology,</b> <b>struct</b> <b>hwloc_distances_s</b> <b>*</b> <b>distances)</b>
       Release a distance matrix structure previously returned by <b>hwloc_distances_get()</b>.

       <b>Note</b>
           This function is not required if the structure is removed with <b>hwloc_distances_release_remove()</b>.

   <b>int</b>  <b>hwloc_distances_transform</b>  <b>(hwloc_topology_t</b>  <b>topology,</b>  <b>struct</b>  <b>hwloc_distances_s</b>  <b>*</b>  <b>distances,</b>   <b>enum</b>
       <b>hwloc_distances_transform_e</b> <b>transform,</b> <b>void</b> <b>*</b> <b>transform_attr,</b> <b>unsigned</b> <b>long</b> <b>flags)</b>
       Apply  a  transformation  to  a  distances  structure.  Modify  a distances structure that was previously
       obtained with <b>hwloc_distances_get()</b> or one of its variants.

       This modifies the local copy of the distances structures but does not modify  the  distances  information
       stored inside the topology (retrieved by another call to <b>hwloc_distances_get()</b> or exported to XML). To do
       so,  one should add a new distances structure with same name, kind, objects and values (see <b>Add</b> <b>distances</b>
       <b>between</b> <b>objects</b>) and then remove this old one with <b>hwloc_distances_release_remove()</b>.

       transform must be one of the transformations listed in <b>hwloc_distances_transform_e</b>.

       These transformations may modify the contents of the objs or values arrays.

       transform_attr must be NULL for now.

       flags must be 0 for now.

       <b>Returns</b>
           0 on success, -1 on error for instance if flags are invalid.

       <b>Note</b>
           Objects  in  distances   array   objs   may   be   directly   modified   in   place   without   using
           <b>hwloc_distances_transform()</b>. One may use <b>hwloc_get_obj_with_same_locality()</b> to easily convert between
           similar objects of different types.

</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for Hardware Locality (hwloc) from the source code.

Hardware Locality (hwloc)                        Version 2.12.0                      <u><a href="../man3/hwlocality_distances_get.3.html">hwlocality_distances_get</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>