<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test2::Harness::Util::Queue - Representation of a queue.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest2-harness-perl">libtest2-harness-perl_1.000158-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Test2::Harness::Util::Queue - Representation of a queue.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module represents a queue, stored as a jsonl file.

</pre><h4><b>SYNOPSIS</b></h4><pre>
           use Test2::Harness::Util::Queue;

           my $queue = Test2::Harness::Util::Queue-&gt;new(file =&gt; '/path/to/queue.jsonl');

           $queue-&gt;start(); # Create the queue

           $queue-&gt;enqueue({foo =&gt; 'bar', baz =&gt; 'bat'});
           $queue-&gt;enqueue({foo =&gt; 'bar2', baz =&gt; 'bat2'});
           ...

           $queue-&gt;end();

       Then in another processs:

           use Test2::Harness::Util::Queue;

           my $queue = Test2::Harness::Util::Queue-&gt;new(file =&gt; '/path/to/queue.jsonl');

           my @items;
           while (1) {
               @items = $queue-&gt;poll();
               while (@items) {
                   my $item = shift @items or last;

                   ... process $item
               }

               # Queue ends with an 'undef' entry
               last if @items &amp;&amp; !defined($items[0]);
           }

</pre><h4><b>METHODS</b></h4><pre>
       $path = $queue-&gt;file
           The filename used for the queue

   <b>READING</b>
       $queue-&gt;<b>reset()</b>
           Restart reading the queue.

       @items = $queue-&gt;<b>poll()</b>
           Get  more  items  from the queue. May need to call it multiple times, specially if another process is
           still writing to the queue.

           Returns an empty list if no items are available yet.

           Returns 'undef' to terminate the list.

       $bool = $queue-&gt;<b>ended()</b>
           Check if the queue has ended.

</pre><h4><b>WRITING</b></h4><pre>
       $queue-&gt;<b>start()</b>
           Open the queue file for writing.

       $queue-&gt;enqueue(\%HASHREF)
           Add an item to the queue.

       $queue-&gt;<b>end()</b>
           Terminate the queue.

</pre><h4><b>SOURCE</b></h4><pre>
       The source code repository for Test2-Harness can be found at <u><a href="http://github.com/Test-More/Test2-Harness/">http://github.com/Test-More/Test2-Harness/</a></u>.

</pre><h4><b>MAINTAINERS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>AUTHORS</b></h4><pre>
       Chad Granum &lt;<a href="mailto:exodist@cpan.org">exodist@cpan.org</a>&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2020 Chad Granum &lt;<a href="mailto:exodist7@gmail.com">exodist7@gmail.com</a>&gt;.

       This program is free software; you can redistribute it and/or modify it under  the  same  terms  as  Perl
       itself.

       See <u><a href="http://dev.perl.org/licenses/">http://dev.perl.org/licenses/</a></u>

perl v5.40.1                                       2025-05-23                   <u>Test2::Harness::Util::<a href="../man3pm/Queue.3pm.html">Queue</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>