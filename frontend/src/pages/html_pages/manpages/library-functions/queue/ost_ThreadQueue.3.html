<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ost::ThreadQueue - Somewhat generic queue processing class to establish a producer consumer queue.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/libcommoncpp2-doc">libcommoncpp2-doc_1.8.1-10_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ost::ThreadQueue - Somewhat generic queue processing class to establish a producer consumer queue.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;buffer.h&gt;

       Inherits <b>ost::Mutex</b>, <b>ost::Thread</b>, and <b>ost::Semaphore</b>.

   <b>Classes</b>
       struct <b>_data</b>

   <b>Public</b> <b>Member</b> <b>Functions</b>
       <b>ThreadQueue</b> (const char *id, int pri, size_t stack=0)
           Create instance of our queue and give it a process priority.
       virtual <b>~ThreadQueue</b> ()
           Destroy the queue.
       void <b>setTimer</b> (<b>timeout_t</b> <b>timeout</b>)
           Set the queue timeout.
       void <b>post</b> (const void *data, unsigned len)
           Put some unspecified data into this queue.

   <b>Protected</b> <b>Types</b>
       typedef struct <b>ost::ThreadQueue::_data</b> <b>data_t</b>

   <b>Protected</b> <b>Member</b> <b>Functions</b>
       virtual void <b>final</b> ()
       virtual void <b>startQueue</b> (void)
           Start of dequeing.
       virtual void <b>stopQueue</b> (void)
           End of dequeing, we expect the queue is empty for now.
       virtual void <b>onTimer</b> (void)
           A derivable method to call when the timout is expired.
       virtual void <b>runQueue</b> (void *data)=0
           Virtual callback method to handle processing of a queued data items.

   <b>Protected</b> <b>Attributes</b>
       <b>timeout_t</b> <b>timeout</b>
       bool <b>started</b>
       <b>data_t</b> * <b>first</b>
       <b>data_t</b> * <b>last</b>
       <b>String</b> <b>name</b>

   <b>Additional</b> <b>Inherited</b> <b>Members</b>
</pre><h4><b>Detailed</b> <b>Description</b></h4><pre>
       Somewhat generic queue processing class to establish a producer consumer queue.

       This may be used to buffer cdr records, or for other purposes where an in-memory queue is needed for
       rapid posting. This class is derived from <b>Mutex</b> and maintains a linked list. A thread is used to dequeue
       data and pass it to a callback method that is used in place of 'run' for each item present on the queue.
       The conditional is used to signal the run thread when new data is posted.

       This class was changed by Angelo Naselli to have a timeout on the queue

       in memory data queue interface.

       <b>Author</b>
           David Sugar <a href="mailto:dyfet@ostel.com">dyfet@ostel.com</a>

</pre><h4><b>Member</b> <b>Typedef</b> <b>Documentation</b></h4><pre>
   <b>typedef</b> <b>struct</b> <b>ost::ThreadQueue::_data</b> <b>ost::ThreadQueue::data_t</b> <b>[protected]</b>
</pre><h4><b>Constructor</b> <b>&amp;</b> <b>Destructor</b> <b>Documentation</b></h4><pre>
   <b>ost::ThreadQueue::ThreadQueue</b> <b>(const</b> <b>char</b> <b>*</b> <b>id,</b> <b>int</b> <b>pri,</b> <b>size_t</b> <b>stack</b> <b>=</b> <b>0)</b>
       Create instance of our queue and give it a process priority.

       <b>Parameters</b>
           <u>id</u> queue ID.
           <u>pri</u> process priority.
           <u>stack</u> stack size.

   <b>virtual</b> <b>ost::ThreadQueue::~ThreadQueue</b> <b>()</b> <b>[virtual]</b>
       Destroy the queue.

</pre><h4><b>Member</b> <b>Function</b> <b>Documentation</b></h4><pre>
   <b>virtual</b> <b>void</b> <b>ost::ThreadQueue::final</b> <b>()</b> <b>[protected],</b>  <b>[virtual]</b>
       Reimplemented from <b>ost::Thread</b>.

   <b>virtual</b> <b>void</b> <b>ost::ThreadQueue::onTimer</b> <b>(void)</b> <b>[protected],</b>  <b>[virtual]</b>
       A derivable method to call when the timout is expired.

   <b>void</b> <b>ost::ThreadQueue::post</b> <b>(const</b> <b>void</b> <b>*</b> <b>data,</b> <b>unsigned</b> <b>len)</b>
       Put some unspecified data into this queue. A new qd structure is created and sized to contain a copy of
       the actual content.

       <b>Parameters</b>
           <u>data</u> pointer to data.
           <u>len</u> size of data.

   <b>virtual</b> <b>void</b> <b>ost::ThreadQueue::runQueue</b> <b>(void</b> <b>*</b> <b>data)</b> <b>[protected],</b>  <b>[pure</b> <b>virtual]</b>
       Virtual callback method to handle processing of a queued data items. After the item is processed, it is
       deleted from memory. We can call multiple instances of runQueue in order if multiple items are waiting.

       <b>Parameters</b>
           <u>data</u> item being dequed.

   <b>void</b> <b>ost::ThreadQueue::setTimer</b> <b>(timeout_t</b> <b>timeout)</b>
       Set the queue timeout. When the timer expires, the <b>onTimer()</b> method is called for the thread

       <b>Parameters</b>
           <u>timeout</u> timeout in milliseconds.

   <b>virtual</b> <b>void</b> <b>ost::ThreadQueue::startQueue</b> <b>(void)</b> <b>[protected],</b>  <b>[virtual]</b>
       Start of dequeing. Maybe we need to connect a database or something, so we have a virtual...

   <b>virtual</b> <b>void</b> <b>ost::ThreadQueue::stopQueue</b> <b>(void)</b> <b>[protected],</b>  <b>[virtual]</b>
       End of dequeing, we expect the queue is empty for now. Maybe we need to disconnect a database or
       something, so we have another virtual.

</pre><h4><b>Member</b> <b>Data</b> <b>Documentation</b></h4><pre>
   <b>data_t*</b> <b>ost::ThreadQueue::first</b> <b>[protected]</b>
   <b>data_t</b> <b>*</b> <b>ost::ThreadQueue::last</b> <b>[protected]</b>
   <b>String</b> <b>ost::ThreadQueue::name</b> <b>[protected]</b>
   <b>bool</b> <b>ost::ThreadQueue::started</b> <b>[protected]</b>
   <b>timeout_t</b> <b>ost::ThreadQueue::timeout</b> <b>[protected]</b>
</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for GNU CommonC++ from the source code.

GNU CommonC++                                    Sun Dec 27 2020                             <u>ost::<a href="../man3/ThreadQueue.3.html">ThreadQueue</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>