<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>s2argv - convert a command string in an argv array</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libexecs-dev">libexecs-dev_1.4-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       s2argv - convert a command string in an argv array

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;</b>
       <b>#include</b> <b>&lt;execs.h&gt;</b>

       <b>char</b> <b>**s2argv(const</b> <b>char</b> <b>*</b><u>args</u><b>);</b>
       <b>void</b> <b>s2argv_free(char</b> <b>**</b><u>argv</u><b>);</b>

       <b>size_t</b> <b>s2argvlen(char</b> <b>**</b><u>argv</u><b>);</b>

       <b>size_t</b> <b>s2argc(char</b> <b>**</b><u>argv</u><b>);</b>

       <b>typedef</b> <b>char</b> <b>*</b> <b>(*</b> <b>s2argv_getvar_t)</b> <b>(const</b> <b>char</b> <b>*name);</b>
       <b>extern</b> <b>s2argv_getvar_t</b> <b>s2argv_getvar;</b>

       These functions are provided by libexecs and libeexecs. Link with <u>-lexecs</u> or <u>-leexecs</u>.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>s2argv</b> convert a command string in an argv array for <b><a href="../man3/execv.3.html">execv</a></b>(3), <b><a href="../man3/execvp.3.html">execvp</a></b>(3) or <b><a href="../man3/execvpe.3.html">execvpe</a></b>(3).  Single or double
       quotes can be used to delimitate command arguments including spaces and a non quoted backslash (<b>\</b>) is the
       escape character to protect the next char.
       <b>s2argv</b> can parse several commands separated by semicolons (<b>;</b>).  The argv of each command is terminated by
       a NULL element, one further NULL element tags the end of the array returned by s2argv.
       <b>s2argv</b> supports variables as arguments. When an argument of a command is a dollar sign followed by a name
       (e.g. $USER) <b>s2argv</b> puts the output of the <b>s2argv_getvar</b> function instead. (It is possible for example to
       assign <b>s2argv_getvar=getenv</b>.  For security reasons, the function is NULL by default and all variables get
       replaced with an empty string. Programmers can use their own custom function instead).

       <b>s2argv_free</b> frees the memory that was allocated by <b>s2argv</b>.

       <b>s2argvlen</b>  returns the sum of the <b>s2argc</b> for all the commands, including the trailing NULLs that separate
       them.

       <b>s2argc</b> returns the number of arguemnts of the (first) command returned by <b>s2argv</b>.  (The beginning of  the
       next argv is <b>argv+s2argc(argv)+1</b>).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>s2argv</b>  returns  a  dynamically allocated argv, ready to be used as an argument to <b><a href="../man3/execv.3.html">execv</a></b>(3), <b><a href="../man3/execvp.3.html">execvp</a></b>(3) or
       <b><a href="../man3/execvpe.3.html">execvpe</a></b>(3).  The return value of <b>s2argv</b> should be freed by <b>s2argv_free</b> in case the exec command does  not
       succeed.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The following program demonstrates the use of <b>s2argv</b>:

       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;execs.h&gt;

       #define BUFLEN 1024
       int main(int argc, char *argv)
       {
            char buf[BUFLEN];
            printf("type in a command and its arguments, e.g. 'ls -l'\n");
            if (fgets(buf, BUFLEN, stdin) != NULL) {
                 char **argv=s2argv(buf);
                 execvp(argv[0], argv);
                 s2argv_free(argv);
                 printf("exec error\n");
            }
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/exec.3.html">exec</a></b>(3)

</pre><h4><b>BUGS</b></h4><pre>
       Bug reports should be addressed to &lt;<a href="mailto:info@virtualsquare.org">info@virtualsquare.org</a>&gt;

</pre><h4><b>AUTHOR</b></h4><pre>
       Renzo Davoli &lt;<a href="mailto:renzo@cs.unibo.it">renzo@cs.unibo.it</a>&gt;

VirtualSquare                                      2014-05-27                                          <u><a href="../man3/S2ARGV.3.html">S2ARGV</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>