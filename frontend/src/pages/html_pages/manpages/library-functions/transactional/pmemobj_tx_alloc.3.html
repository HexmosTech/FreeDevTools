<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmemobj_tx_alloc(),  pmemobj_tx_zalloc(),  pmemobj_tx_xalloc(),  pmemobj_tx_realloc(),  pmemobj_tx_zreal‐</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpmemobj-dev">libpmemobj-dev_1.13.1-1.1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmemobj_tx_alloc</b>(),  <b>pmemobj_tx_zalloc</b>(),  <b>pmemobj_tx_xalloc</b>(),  <b>pmemobj_tx_realloc</b>(),  <b>pmemobj_tx_zreal‐</b>
       <b>loc</b>(),  <b>pmemobj_tx_strdup</b>(),  <b>pmemobj_tx_xstrdup</b>(),  <b>pmemobj_tx_wcsdup</b>(),  <b>pmemobj_tx_xwcsdup</b>(),   <b>pmemo‐</b>
       <b>bj_tx_free</b>(), <b>pmemobj_tx_xfree</b>()

       <b>TX_NEW</b>(),  <b>TX_ALLOC</b>(),  <b>TX_ZNEW</b>(),  <b>TX_ZALLOC</b>(),  <b>TX_XALLOC</b>(),  <b>TX_REALLOC</b>(), <b>TX_ZREALLOC</b>(), <b>TX_STRDUP</b>(),
       <b>TX_XSTRDUP</b>(), <b>TX_WCSDUP</b>(), <b>TX_XWCSDUP</b>(), <b>TX_FREE</b>(), <b>TX_XFREE</b>() - transactional object manipulation

</pre><h4><b>SYNOPSIS</b></h4><pre>
              #include &lt;libpmemobj.h&gt;

              PMEMoid pmemobj_tx_alloc(size_t size, uint64_t type_num);
              PMEMoid pmemobj_tx_zalloc(size_t size, uint64_t type_num);
              PMEMoid pmemobj_tx_xalloc(size_t size, uint64_t type_num, uint64_t flags);
              PMEMoid pmemobj_tx_realloc(PMEMoid oid, size_t size, uint64_t type_num);
              PMEMoid pmemobj_tx_zrealloc(PMEMoid oid, size_t size, uint64_t type_num);
              PMEMoid pmemobj_tx_strdup(const char *s, uint64_t type_num);
              PMEMoid pmemobj_tx_wcsdup(const wchar_t *s, uint64_t type_num);
              int pmemobj_tx_free(PMEMoid oid);
              int pmemobj_tx_xfree(PMEMoid oid, uint64_t flags);

              TX_NEW(TYPE)
              TX_ALLOC(TYPE, size_t size)
              TX_ZNEW(TYPE)
              TX_ZALLOC(TYPE, size_t size)
              TX_XALLOC(TYPE, size_t size, uint64_t flags)
              TX_REALLOC(TOID o, size_t size)
              TX_ZREALLOC(TOID o, size_t size)
              TX_STRDUP(const char *s, uint64_t type_num)
              TX_WCSDUP(const wchar_t *s, uint64_t type_num)
              TX_FREE(TOID o)
              TX_XFREE(TOID o, uint64_t flags)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>pmemobj_tx_alloc</b>() function transactionally allocates a new object of given <u>size</u>  and  <u>type_num</u>.   In
       contrast to the non-transactional allocations, the objects are added to the internal object containers of
       given  <u>type_num</u>  only  after  the  transaction is committed, making the objects visible to the <b>POBJ_FORE‐</b>
       <b>ACH_*</b>() macros.  This function must be called during <b>TX_STAGE_WORK</b>.

       The <b>pmemobj_tx_zalloc</b>() function transactionally  allocates  a  new  zeroed  object  of  given  <u>size</u>  and
       <u>type_num</u>.  This function must be called during <b>TX_STAGE_WORK</b>.

       The  <b>pmemobj_tx_xalloc</b>() function transactionally allocates a new object of given <u>size</u> and <u>type_num</u>.  The
       <u>flags</u> argument is a bitmask of the following values:

       • <b>POBJ_XALLOC_ZERO</b> - zero the allocated object (equivalent of pmemobj_tx_zalloc)

       • <b>POBJ_XALLOC_NO_FLUSH</b> - skip flush on commit (when application deals with flushing or uses  pmemobj_mem‐
         cpy_persist)

       • <b>POBJ_CLASS_ID(class_id)</b> - allocate an object from the allocation class with id equal to <u>class_id</u>

       • <b>POBJ_ARENA_ID(arena_id)</b>  - allocate an object from the arena specified by <u>arena_id</u>.  The arena must ex‐
         ist, otherwise, the behavior is undefined.  If <u>arena_id</u> is equal 0, then arena assigned to the  current
         thread will be used.

       • <b>POBJ_XALLOC_NO_ABORT</b> - if the function does not end successfully, do not abort the transaction.

       This function must be called during <b>TX_STAGE_WORK</b>.

       The  <b>pmemobj_tx_realloc</b>()  function  transactionally  resizes  an  existing  object to the given <u>size</u> and
       changes its type to <u>type_num</u>.  If <u>oid</u> is <b>OID_NULL</b>, then the call is equivalent  to  <u>pmemobj_tx_alloc(pop,</u>
       <u>size,</u> <u>type_num)</u>.  If <u>size</u> is equal to zero and <u>oid</u> is not <b>OID_NULL</b>, then the call is equivalent to <u>pmemo‐</u>
       <u>bj_tx_free(oid)</u>.   If the new size is larger than the old size, the added memory will <u>not</u> be initialized.
       This function must be called during <b>TX_STAGE_WORK</b>.

       The <b>pmemobj_tx_zrealloc</b>() function transactionally resizes an existing  object  to  the  given  <u>size</u>  and
       changes its type to <u>type_num</u>.  If the new size is larger than the old size, the extended new space is ze‐
       roed.  This function must be called during <b>TX_STAGE_WORK</b>.

       The  <b>pmemobj_tx_strdup</b>()  function  transactionally  allocates a new object containing a duplicate of the
       string <u>s</u> and assigns it a type <u>type_num</u>.  This function must be called during <b>TX_STAGE_WORK</b>.

       The <b>pmemobj_tx_xstrdup</b>() function behaves exactly the same as <b>pmemobj_tx_strdup</b>() when <u>flags</u> equals zero.
       The <u>flags</u> argument is a bitmask of values described in <b>pmemobj_tx_xalloc</b> section.

       The <b>pmemobj_tx_wcsdup</b>() function transactionally allocates a new object containing  a  duplicate  of  the
       wide  character  string  <u>s</u>  and  assigns  it  a  type  <u>type_num</u>.   This  function  must  be called during
       <b>TX_STAGE_WORK</b>.

       The <b>pmemobj_tx_xwcsdup</b>() function behaves exactly the same as <b>pmemobj_tx_wcsdup</b>() when <u>flags</u> equals zero.
       The <u>flags</u> argument is a bitmask of values described in <b>pmemobj_tx_xalloc</b> section.

       The <b>pmemobj_tx_free</b>() function transactionally frees an existing object referenced by <u>oid</u>.  This function
       must be called during <b>TX_STAGE_WORK</b>.

       The <b>pmemobj_tx_xfree</b>() function behaves exactly the same as <b>pmemobj_tx_free</b>()  when  <u>flags</u>  equals  zero.
       <u>flags</u> is a bitmask of the following value:

       • <b>POBJ_XFREE_NO_ABORT</b> - if the function does not end successfully, do not abort the transaction.

       This function must be called during <b>TX_STAGE_WORK</b>.

       The <b>TX_NEW</b>() macro transactionally allocates a new object of given <u>TYPE</u> and assigns it a type number read
       from  the typed <u>OID</u>.  The allocation size is determined from the size of the user-defined structure <u>TYPE</u>.
       If successful and called during <b>TX_STAGE_WORK</b> it returns a handle to the newly allocated object.   Other‐
       wise, the stage is changed to <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is returned, and <u>errno</u> is set appropriately.

       The  <b>TX_ALLOC</b>()  macro  transactionally allocates a new object of given <u>TYPE</u> and assigns it a type number
       read from the typed <u>OID</u>.  The allocation size is passed by <u>size</u> parameter.  If successful and called dur‐
       ing <b>TX_STAGE_WORK</b> it returns a handle to the newly allocated object.  Otherwise,  the  stage  is  set  to
       <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is returned, and <u>errno</u> is set appropriately.

       The  <b>TX_ZNEW</b>()  macro  transactionally  allocates a new zeroed object of given <u>TYPE</u> and assigns it a type
       number read from the typed <u>OID</u>.  The allocation size is determined from  the  size  of  the  user-defined
       structure <u>TYPE</u>.  If successful and called during <b>TX_STAGE_WORK</b> it returns a handle to the newly allocated
       object.   Otherwise,  stage changes to <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is returned, and <u>errno</u> is set appropri‐
       ately.

       The <b>TX_ZALLOC</b>() macro transactionally allocates a new zeroed object of given <u>TYPE</u> and assigns it  a  type
       number  read  from  the  typed  <u>OID</u>.   The allocation size is passed by <u>size</u> argument.  If successful and
       called during <b>TX_STAGE_WORK</b> it returns a handle to the newly allocated object.  Otherwise, the  stage  is
       changed to <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is returned, and <u>errno</u> is set appropriately.

       The  <b>TX_XALLOC</b>()  macro transactionally allocates a new object of given <u>TYPE</u> and assigns it a type number
       read from the typed <u>OID</u>.  The allocation size is passed by <u>size</u> argument.  The <u>flags</u> argument is  a  bit‐
       mask  of values described in <b>pmemobj_tx_xalloc</b> section.  If successful and called during <b>TX_STAGE_WORK</b> it
       returns a handle to the newly allocated object.  Otherwise, the <b>OID_NULL</b> is returned, <b>errno</b>  is  set  and
       when flags do not contain <b>POBJ_XALLOC_NO_ABORT</b>, the transaction is aborted.

       The  <b>TX_REALLOC</b>()  macro transactionally resizes an existing object referenced by a handle <u>o</u> to the given
       <u>size</u>.  If successful and called during <b>TX_STAGE_WORK</b> it returns a handle to the reallocated object.  Oth‐
       erwise, the stage is changed to <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is returned, and <u>errno</u> is set appropriately.

       The <b>TX_ZREALLOC</b>() macro transactionally resizes an existing object referenced by a handle <u>o</u> to the  given
       <u>size</u>.   If the new size is larger than the old size, the extended new space is zeroed.  If successful and
       called during <b>TX_STAGE_WORK</b> it returns a handle to the  reallocated  object.   Otherwise,  the  stage  is
       changed to <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is returned, and <u>errno</u> is set appropriately.

       The  <b>TX_STRDUP</b>()  macro transactionally allocates a new object containing a duplicate of the string <u>s</u> and
       assigns it type <u>type_num</u>.  If successful and called during <b>TX_STAGE_WORK</b> it returns a handle to the newly
       allocated object.  Otherwise, the stage is changed to <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is returned,  and  <u>errno</u>
       is set appropriately.

       The  <b>TX_XSTRDUP</b>() macro transactionally allocates a new object containing a duplicate of the string <u>s</u> and
       assigns it type <u>type_num</u>.  The <u>flags</u> argument is a bitmask of values described in <b>pmemobj_tx_xalloc</b>  sec‐
       tion.   If  successful and called during <b>TX_STAGE_WORK</b> it returns a handle to the newly allocated object.
       Otherwise, the <b>OID_NULL</b> is returned, <b>errno</b> is set and when flags do not contain <b>POBJ_XALLOC_NO_ABORT</b>, the
       transaction is aborted.

       The <b>TX_WCSDUP</b>() macro transactionally allocates a new object containing a duplicate of the wide character
       string <u>s</u> and assigns it a type <u>type_num</u>.  If successful and called during  <b>TX_STAGE_WORK</b>,  it  returns  a
       handle  to  the newly allocated object.  Otherwise, the stage is changed to <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is
       returned, and <u>errno</u> is set appropriately.

       The <b>TX_XWCSDUP</b>() macro transactionally allocates a new object containing a duplicate of the wide  charac‐
       ter  string  <u>s</u>  and  assigns  it a type <u>type_num</u>.  The <u>flags</u> argument is a bitmask of values described in
       <b>pmemobj_tx_xalloc</b> section.  If successful and called during <b>TX_STAGE_WORK</b> it returns a handle to the new‐
       ly allocated object.  Otherwise, the <b>OID_NULL</b> is returned, <b>errno</b> is set and when  flags  do  not  contain
       <b>POBJ_XALLOC_NO_ABORT</b>, the transaction is aborted.

       The  <b>TX_FREE</b>()  macro  transactionally frees the memory space represented by an object handle <u>o</u>.  If <u>o</u> is
       <b>OID_NULL</b>, no operation is performed.  If successful and called during <b>TX_STAGE_WORK</b>, <b>TX_FREE</b>() returns 0.
       Otherwise, the stage is changed to <b>TX_STAGE_ONABORT</b> and <u>errno</u> is set appropriately.

       The <b>TX_XFREE</b>() macro transactionally frees the memory space represented by an object handle <u>o</u>.  If  <u>o</u>  is
       <b>OID_NULL</b>,  no  operation  is  performed.   The  <u>flags</u> argument is a bitmask of values described in <b>pmemo‐</b>
       <b>bj_tx_xfree</b> section.  If successful and called during <b>TX_STAGE_WORK</b>, <b>TX_FREE</b>() returns 0.  Otherwise, the
       error number is returned, <b>errno</b> is set and when flags do not contain <b>POBJ_XFREE_NO_ABORT</b>, the transaction
       is aborted.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, the  <b>pmemobj_tx_alloc</b>(),  <b>pmemobj_tx_zalloc</b>(),  <b>pmemobj_tx_strdup</b>()  and  <b>pmemobj_tx_wcsdup</b>()
       functions return a handle to the newly allocated object.  Otherwise, the stage is changed to <b>TX_STAGE_ON‐</b>
       <b>ABORT</b>,  <b>OID_NULL</b> is returned, and <u>errno</u> is set appropriately.  If <u>size</u> equals 0, <b>OID_NULL</b> is returned and
       <u>errno</u> is set appropriately.

       On success, the <b>pmemobj_tx_xalloc</b>(), <b>pmemobj_tx_xstrdup</b>() and  <b>pmemobj_tx_xwcsdup</b>()  functions  return  a
       handle  to  the newly allocated object.  Otherwise, the <b>OID_NULL</b> is returned, <b>errno</b> is set and when flags
       do not contain <b>POBJ_XALLOC_NO_ABORT</b>, the transaction is aborted.

       On success, <b>pmemobj_tx_realloc</b>() and <b>pmemobj_tx_zrealloc</b>() return a handle to the resized object.  Other‐
       wise, the stage is changed to <b>TX_STAGE_ONABORT</b>, <b>OID_NULL</b> is returned, and  <u>errno</u>  is  set  appropriately.
       Note that the object handle value may change as a result of reallocation.

       On  success,  <b>pmemobj_tx_free</b>() returns 0.  Otherwise, the stage is changed to <b>TX_STAGE_ONABORT</b>, <b>errno</b> is
       set appropriately and transaction is aborted

       On success <b>pmemobj_tx_xfree</b>() returns 0.  Otherwise, the error number is returned, <b>errno</b> is set and  when
       flags do not contain <b>POBJ_XFREE_NO_ABORT</b>, the transaction is aborted.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/pmemobj_tx_add_range.3.html">pmemobj_tx_add_range</a></b>(3), <b><a href="../man3/pmemobj_tx_begin.3.html">pmemobj_tx_begin</a></b>(3), <b><a href="../man7/libpmemobj.7.html">libpmemobj</a></b>(7) and <b>&lt;https://pmem.io&gt;</b>
</pre>
 </div>
</div></section>
</div>
</body>
</html>