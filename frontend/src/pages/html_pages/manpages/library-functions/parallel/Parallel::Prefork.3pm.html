<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Parallel::Prefork - A simple prefork server framework</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libparallel-prefork-perl">libparallel-prefork-perl_0.18-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Parallel::Prefork - A simple prefork server framework

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Parallel::Prefork;

         my $pm = Parallel::Prefork-&gt;new({
           max_workers  =&gt; 10,
           trap_signals =&gt; {
             TERM =&gt; 'TERM',
             HUP  =&gt; 'TERM',
             USR1 =&gt; undef,
           }
         });

         while ($pm-&gt;signal_received ne 'TERM') {
           load_config();
           $pm-&gt;start(sub {
               ... do some work within the child process ...
           });
         }

         $pm-&gt;wait_all_children();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "Parallel::Prefork" is much like "Parallel::ForkManager", but supports graceful shutdown and run-time
       reconfiguration.

</pre><h4><b>METHODS</b></h4><pre>
   <b>new</b>
       instantiation.  Takes a hashref as an argument.  Recognized attributes are as follows.

       <u>max_workers</u>

       number of worker processes (default: 10)

       <u>spawn_interval</u>

       interval in seconds between spawning child processes unless a child process exits abnormally (default: 0)

       <u>err_respawn_interval</u>

       number of seconds to deter spawning of child processes after a worker exits abnormally (default: 1)

       <u>trap_signals</u>

       hashref of signals to be trapped.  Manager process will trap the signals listed in the keys of the hash,
       and send the signal specified in the associated value (if any) to all worker processes.  If the
       associated value is a scalar then it is treated as the name of the signal to be sent immediately to all
       the worker processes.  If the value is an arrayref the first value is treated the name of the signal and
       the second value is treated as the interval (in seconds) between sending the signal to each worker
       process.

       <u>on_child_reap</u>

       coderef that is called when a child is reaped. Receives the instance to the current Parallel::Prefork,
       the child's pid, and its exit status.

       <u>before_fork</u>

       <u>after_fork</u>

       coderefs that are called in the manager process before and after fork, if being set

   <b>start</b>
       The main routine.  There are two ways to use the function.

       If given a subref as an argument, forks child processes and executes that subref within the child
       processes.  The processes will exit with 0 status when the subref returns.

       The other way is to not give any arguments to the function.  The function returns undef in child
       processes.  Caller should execute the application logic and then call "finish" to terminate the process.

       The "start" function returns true within manager process upon receiving a signal specified in the
       "trap_signals" hashref.

   <b>finish</b>
       Child processes (when executed by a zero-argument call to "start") should call this function for
       termination.  Takes exit code as an optional argument.  Only usable from child processes.

   <b>signal_all_children</b>
       Sends signal to all worker processes.  Only usable from manager process.

   <b>wait_all_children()</b>
   <b>wait_all_children($timeout)</b>
       Waits until all worker processes exit or timeout (given as an optional argument in seconds) exceeds.  The
       method returns the number of the worker processes still running.

</pre><h4><b>AUTHOR</b></h4><pre>
       Kazuho Oku

</pre><h4><b>LICENSE</b></h4><pre>
       This program is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself.

       See <a href="http://www.perl.com/perl/misc/Artistic.html">http://www.perl.com/perl/misc/Artistic.html</a>

perl v5.34.0                                       2022-05-24                             <u>Parallel::<a href="../man3pm/Prefork.3pm.html">Prefork</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>