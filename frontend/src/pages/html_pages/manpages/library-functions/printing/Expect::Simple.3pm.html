<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expect::Simple - wrapper around the Expect module</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libexpect-simple-perl">libexpect-simple-perl_0.04-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Expect::Simple - wrapper around the Expect module

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Expect::Simple;

         my $obj = new Expect::Simple
               { Cmd =&gt; [ dmcoords =&gt; 'verbose=1', "infile=$infile"],
                 Prompt =&gt; [ -re =&gt; 'dmcoords&gt;:\s+' ],
                 DisconnectCmd =&gt; 'q',
                 Verbose =&gt; 0,
                 Debug =&gt; 0,
                 Timeout =&gt; 100
               };

         $obj-&gt;send( $cmd );
         print $obj-&gt;before;
         print $obj-&gt;after;
         print $obj-&gt;match_str, "\n";
         print $obj-&gt;match_idx, "\n";
         print $obj-&gt;error_expect;
         print $obj-&gt;error;

         $expect_object = $obj-&gt;expect_handle;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "Expect::Simple" is a wrapper around the "Expect" module which should suffice for simple applications.
       It hides most of the "Expect" machinery; the "Expect" object is available for tweaking if need be.

       Generally, one starts by creating an <b>Expect::Simple</b> object using <b>new</b>.  This will start up the target
       program, and will wait until one of the specified prompts is output by the target.  At that point the
       caller should <b>send()</b> commands to the program; the results are available via the <b>before</b>, <b>after</b>, <b>match_str</b>,
       and <b>match_idx</b> methods.  Since <b>Expect</b> simulates a terminal, there will be extra "\r" characters at the end
       of each line in the result (on UNIX at least).  This is easily fixed:

           ($res = $obj-&gt;before) =~ tr/\r//d;
           @lines = split( "\n", $res );

       This is <b>not</b> done automatically.

       Exceptions will be thrown on error (match with "/Expect::Simple/").  Errors from <b>Expect</b> are available via
       the <b>error_expect</b> method.  More human readable errors are available via the <b>error</b> method.

       The connection is automatically broken (by sending the specified disconnect command to the target) when
       the <b>Expect::Simple</b> object is destroyed.

   <b>Methods</b>
       new
                   $obj = Expect::Simple-&gt;new( \%attr );

               This  creates  a  new object, starting up the program with which to communicate (using the <b>Expect</b>
               <b>spawn</b> method) and waiting for a prompt.  The passed hash reference  must  contain  at  least  the
               <b>Prompt</b>, <b>DisconnectCmd</b>, and <b>Cmd</b> elements.  The available attributes are:

               Cmd
                         Cmd =&gt; $command,
                         Cmd =&gt; [ $command, $arg1, $arg2, ... ],

                       The command to which to connect.  The passed command may either be a scalar or an array.

               Prompt  This  specifies one or more prompts to scan for.  For a single prompt, the value may be a
                       scalar; for more, or  for  matching  of  regular  expressions,  it  should  be  an  array
                       reference.  For example,

                         Prompt =&gt; 'prompt1&gt; ',
                         Prompt =&gt; [ 'prompt1&gt; ', 'prompt2&gt; ', -re =&gt; 'prompt\d+&gt;\s+' ]

                       All  prompts  are  taken literally, unless immediately preceded by a "-re" flag, in which
                       case they are regular expressions.

               DisconnectCmd
                       This is the command to be sent to the target program which will cause it to exit.

               RawPty  If  set,  then  underlying  <b>Expect</b>  object's  pty  mode  is  set   to   raw   mode   (see
                       <b>Expect::raw_pty()</b>).

               Timeout The  time  in  seconds to wait until giving up on the target program responding.  This is
                       used during program startup and when any commands are sent to the program.   It  defaults
                       to 1000 seconds.

               Debug   The value is passed to <b>Expect</b> via its <b>debug</b> method.

               Verbose This  results  in  various  messages printed to the STDERR stream.  If greater than 3, it
                       turns on <b>Expect</b>'s logging to STDOUT (via the <b>log_stdout</b> <b>Expect</b> method.

       send
                  $obj-&gt;send( $cmd );
                  $obj-&gt;send( @cmds );

               Send one or more commands to the target.  After each command is sent, it waits for a prompt  from
               the  target.  Only the output resulting from the last command is available via the <b>after</b>, <b>before</b>,
               etc. methods.

       match_idx
               This returns a unary based index indicating which prompt (in the list of  prompts  specified  via
               the  "Prompt" attribute to the <b>new</b> method) was received after the last command was sent.  It will
               be undef if none was returned.

       match_str
               This returns the prompt which was matched after the last command was sent.

       before  This returns the string received before the prompt.  If no prompt was seen, it returns all output
               accumulated.  This is usually what the caller wants to parse.  Note  that  the  first  line  will
               (usually)  be  the command that was sent to the target, because of echoing.  Check this out to be
               sure!

       after   This returns the 'after' string.  Please read the <b>Expect</b> docs for more enlightenment.

       error   This returns a cleaned up, more humanly readable version of the errors  from  <b>Expect</b>.   It'll  be
               undef if there was no error.

       error_expect
               This returns the original <b>Expect</b> error.

       expect_handle
               This returns the <b>Expect</b> object, in case further tweaking is necessary.

</pre><h4><b>BUGS</b></h4><pre>
       If  the command to be run does not exist (or not in the current execution path), it's quite possible that
       the <b>new</b> method will not throw an exception.  It's up to the caller to make sure  that  the  command  will
       run!  There's no known workaround for this.

</pre><h4><b>LICENSE</b></h4><pre>
       This software is released under the GNU General Public License.  You may find a copy at

          <a href="http://www.fsf.org/copyleft/gpl.html">http://www.fsf.org/copyleft/gpl.html</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       Diab Jerius (<a href="mailto:djerius@cpan.org">djerius@cpan.org</a>)

perl v5.40.0                                       2025-02-05                                <u>Expect::<a href="../man3pm/Simple.3pm.html">Simple</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>