<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APR::URI - Perl API for URI manipulations</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libapache2-mod-perl2">libapache2-mod-perl2_2.0.13-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       APR::URI - Perl API for URI manipulations

</pre><h4><b>Synopsis</b></h4><pre>
         use APR::URI ();

         my $url = '<a href="http://user">http://user</a>:<a href="mailto:pass@example.com">pass@example.com</a>:80/foo?bar#item5';

         # parse and break the url into components
         my $parsed = APR::URI-&gt;parse($r-&gt;pool, $url);
         print $parsed-&gt;scheme;
         print $parsed-&gt;user;
         print $parsed-&gt;password;
         print $parsed-&gt;hostname;
         print $parsed-&gt;port;
         print $parsed-&gt;path;
         print $parsed-&gt;rpath;
         print $parsed-&gt;query;
         print $parsed-&gt;fragment;

         # reconstruct the url, after changing some components and completely
         # removing other
         $parsed-&gt;scheme($new_scheme);
         $parsed-&gt;user(undef);
         $parsed-&gt;password(undef);
         $parsed-&gt;hostname($new_hostname);
         $parsed-&gt;port($new_port);
         $parsed-&gt;path($new_path);
         $parsed-&gt;query(undef);
         $parsed-&gt;fragment(undef);
         print $parsed-&gt;unparse;

         # get the password field too (by default it's not revealed)
         use APR::Const -compile =&gt; qw(URI_UNP_REVEALPASSWORD);
         print $parsed-&gt;unparse(APR::Const::URI_UNP_REVEALPASSWORD);

         # what the default port for the ftp protocol?
         my $ftp_port = APR::URI::port_of_scheme("ftp");

</pre><h4><b>Description</b></h4><pre>
       "APR::URI" allows you to parse URI strings, manipulate each of the URI elements and deparse them back
       into URIs.

       All "APR::URI" object accessors accept a string or an "undef" value as an argument. Same goes for return
       value. It's important to distinguish between an empty string and "undef". For example let's say your code
       was:

         my $uri = '<a href="http://example.com/foo">http://example.com/foo</a>?bar#item5';
         my $parsed = APR::URI-&gt;parse($r-&gt;pool, $uri);

       Now you no longer want to the query and fragment components in the final url. If you do:

         $parsed-&gt;fragment('');
         $parsed-&gt;query('');

       followed by:

         my $new_uri = parsed-&gt;unparse;

       the resulting URI will be:

         <a href="http://example.com/foo">http://example.com/foo</a>?#

       which is probably not something that you've expected. In order to get rid of the separators, you must
       completely unset the fields you don't want to see. So, if you do:

         $parsed-&gt;fragment(undef);
         $parsed-&gt;query(undef);

       followed by:

         my $new_uri = parsed-&gt;unparse;

       the resulting URI will be:

          <a href="http://example.com/foo">http://example.com/foo</a>

       As mentioned earlier the same goes for return values, so continuing this example:

         my $new_fragment = $parsed-&gt;fragment();
         my $new_query    = $parsed-&gt;query();

       Both values now contain "undef", therefore you must be careful when using the return values, when you use
       them, as you may get warnings.

       Also make sure you read through "the unparse() section" as various optional flags affect how the deparsed
       URI is rendered.

</pre><h4><b>API</b></h4><pre>
       "APR::URI" provides the following functions and/or methods:

   <b>"fragment"</b>
       Get/set trailing "#fragment" string

         $oldval = $parsed-&gt;fragment($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
       since: 2.0.00

   <b>"hostinfo"</b>
       Get/set combined "[user[:password]@]host[:port]"

         $oldval = $parsed-&gt;hostinfo($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
       since: 2.0.00

       The "hostinfo" value is set automatically when parse() is called.

       It's not updated if any of the individual fields is modified.

       It's not used when unparse() is called.

   <b>"hostname"</b>
       Get/set hostname

         $oldval = $parsed-&gt;hostname($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
       since: 2.0.00

   <b>"password"</b>
       Get/set password (as in <a href="http://user">http://user</a>:password@host:port/)

         $oldval = $parsed-&gt;password($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
       since: 2.0.00

   <b>"parse"</b>
       Parse the URI string into URI components

         $parsed = APR::URI-&gt;parse($pool, $uri);

       obj: $parsed ( "APR::URI object or class" )
       arg1: $pool ( string ) ( "APR::Pool object" )
       arg2: $uri ( string )
           The URI to parse

       ret: $parsed ( "APR::URI object or class" )
           The parsed URI object

       since: 2.0.00

       After parsing, if a component existed but was an empty string (e.g. empty query <u><a href="http://hostname/path">http://hostname/path</a>?</u>) --
       the  corresponding  accessor will return an empty string. If a component didn't exist (e.g. no query part
       <u><a href="http://hostname/path">http://hostname/path</a></u>) -- the corresponding accessor will return "undef".

   <b>"path"</b>
       Get/set the request path

         $oldval = $parsed-&gt;path($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
           "/" if only "scheme://host"

       since: 2.0.00

   <b>"rpath"</b>
       Gets the "path" minus the "path_info"

         $rpath =  $parsed-&gt;rpath();

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
           The path minus the <u>path_info</u>

       since: 2.0.00

   <b>"port"</b>
       Get/set port number

         $oldval = $parsed-&gt;port($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( number or string or undef )
       ret: $oldval ( string or undef )
           If the port component didn't appear in the parsed URI, APR internally calls port_of_scheme() to  find
           out the port number for the given scheme().

       since: 2.0.00

   <b>"port_of_scheme"</b>
       Return  the  default port for a given scheme.  The recognized schemes are http, ftp, https, gopher, wais,
       nntp, snews and prospero.

         $port = APR::URI::port_of_scheme($scheme);

       obj: $scheme ( string )
           The scheme string

       ret: $port (integer)
           The default port for this scheme

       since: 2.0.00

   <b>"query"</b>
       Get/set the query string (the part starting after '?' and all the way till the  end  or  the  '#fragment'
       part if the latter exists).

         $oldval = $parsed-&gt;query($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
       since: 2.0.00

   <b>"scheme"</b>
       Get/set the protocol scheme ("http", "ftp", ...)

         $oldval = $parsed-&gt;scheme($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
       since: 2.0.00

   <b>"user"</b>
       Get/set user name (as in <a href="http://user">http://user</a>:password@host:port/)

         $oldval = $parsed-&gt;user($newval);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $newval ( string or undef )
       ret: $oldval ( string or undef )
       since: 2.0.00

   <b>"unparse"</b>
       Unparse the URI components back into a URI string

         $new_uri = $parsed-&gt;unparse();
         $new_uri = $parsed-&gt;unparse($flags);

       obj: $parsed ( "APR::URI object" )
       opt arg1: $flags ( the APR::Const :uri constants )
           By default the constant "APR::Const::URI_UNP_OMITPASSWORD" is passed.

           If you need to pass more than one flag use unary "|", e.g.:

             $flags = APR::Const::URI_UNP_OMITUSER|APR::Const::URI_UNP_OMITPASSWORD;

           The valid "flags" constants are listed next

       ret: $new_uri ( string )
       since: 2.0.00

       Valid "flags" constants:

       To import all URI constants you could do:

         use APR::Const -compile =&gt; qw(:uri);

       but  there  is a significant amount of them, most irrelevant to this method. Therefore you probably don't
       want to do that. Instead specify explicitly the ones that you need.  All  the  relevant  to  this  method
       constants start with "APR::URI_UNP_".

       And the available constants are:

       "APR::Const::URI_UNP_OMITSITEPART"
           Don't  show "scheme", "user", "password", "hostname" and "port" components (i.e. if you want only the
           relative URI)

       "APR::Const::URI_UNP_OMITUSER"
           Hide the "user" component

       "APR::Const::URI_UNP_OMITPASSWORD"
           Hide the "password" component (the default)

       "APR::Const::URI_UNP_REVEALPASSWORD"
           Reveal the "password" component

       "APR::Const::URI_UNP_OMITPATHINFO"
           Don't show "path", "query" and "fragment" components

       "APR::Const::URI_UNP_OMITQUERY"
           Don't show "query" and "fragment" components

       Notice that some flags overlap.

       If the optional $flags argument is passed  and  contains  no  "APR::Const::URI_UNP_OMITPASSWORD"  and  no
       "APR::Const::URI_UNP_REVEALPASSWORD"  --  the  "password"  part  will be rendered as a literal "XXXXXXXX"
       string.

       If the "port" number matches the port_of_scheme(), the unparsed URI won't include it and there is no flag
       to force that "port" to appear. If the "port" number is non-standard it will  show  up  in  the  unparsed
       string.

       Examples:

       Starting with the parsed URL:

         use APR::URI ();
         my $url = '<a href="http://user">http://user</a>:<a href="mailto:pass@example.com">pass@example.com</a>:80/foo?bar#item5';
         my $parsed = APR::URI-&gt;parse($r-&gt;pool, $url);

       deparse it back including and excluding parts, using different values for the optional "flags" argument:

       •   Show all but the "password" fields:

             print $parsed-&gt;unparse;

           Prints:

             <a href="http://user">http://user</a>@example.com/foo?bar#item5

           Notice that the "port" field is gone too, since it was a default "port" for "scheme" "http://".

       •   Include the "password" field (by default it's not revealed)

             use APR::Const -compile =&gt; qw(URI_UNP_REVEALPASSWORD);
             print $parsed-&gt;unparse(APR::Const::URI_UNP_REVEALPASSWORD);

           Prints:

             <a href="http://user">http://user</a>:<a href="mailto:pass@example.com">pass@example.com</a>/foo?bar#item5

       •   Show all fields but the last three, "path", "query" and "fragment":

             use APR::Const -compile =&gt; qw(URI_UNP_REVEALPASSWORD
                                           APR::Const::URI_UNP_OMITPATHINFO);
             print $parsed-&gt;unparse(
                 APR::Const::URI_UNP_REVEALPASSWORD|URI_UNP_OMITPATHINFO);

           Prints:

             <a href="http://user">http://user</a>:<a href="mailto:pass@example.com">pass@example.com</a>

</pre><h4><b>See</b> <b>Also</b></h4><pre>
       "Apache2::URI", mod_perl 2.0 documentation.

</pre><h4><b>Copyright</b></h4><pre>
       mod_perl 2.0 and its core modules are copyrighted under The Apache Software License, Version 2.0.

</pre><h4><b>Authors</b></h4><pre>
       The mod_perl development team and numerous contributors.

perl v5.40.0                                       2024-10-20             <u>libapache2-mod-...::api::APR::<a href="../man3pm/URI.3pm.html">URI</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>