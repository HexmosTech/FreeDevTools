<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_DOH_SSL_VERIFYHOST - verify the hostname in the DoH SSL certificate</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_DOH_SSL_VERIFYHOST - verify the hostname in the DoH SSL certificate

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_DOH_SSL_VERIFYHOST,
                                 long verify);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass  a long set to 2L as asking curl to <u>verify</u> the DoH (DNS-over-HTTPS) server's certificate name fields
       against the hostname.

       This option is the DoH equivalent of <u><a href="../man3/CURLOPT_SSL_VERIFYHOST.3.html">CURLOPT_SSL_VERIFYHOST</a>(3)</u> and  only  affects  requests  to  the  DoH
       server.

       When  <u><a href="../man3/CURLOPT_DOH_SSL_VERIFYHOST.3.html">CURLOPT_DOH_SSL_VERIFYHOST</a>(3)</u>  is  2,  the SSL certificate provided by the DoH server must indicate
       that the server name is the same as the server name to which you meant to connect to, or  the  connection
       fails.

       curl  considers  the  DoH  server the intended one when the Common Name field or a Subject Alternate Name
       field in the certificate matches the hostname in the DoH URL to which you told curl to connect.

       When the <u>verify</u> value is set to 1L it is treated the same as 2L. However for consistency with  the  other
       <u>VERIFYHOST</u> options we suggest use 2 and not 1.

       When  the  <u>verify</u>  value  is  set  to  0L,  the  connection  succeeds regardless of the names used in the
       certificate. Use that ability with caution.

       See also <u><a href="../man3/CURLOPT_DOH_SSL_VERIFYPEER.3.html">CURLOPT_DOH_SSL_VERIFYPEER</a>(3)</u> to verify the digital signature of the DoH server certificate.

</pre><h4><b>DEFAULT</b></h4><pre>
       2

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects all TLS based protocols: HTTPS, FTPS, IMAPS, POP3S, SMTPS etc.

       All TLS backends support this option.

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           curl_easy_setopt(curl, CURLOPT_URL, "https://example.com");

           curl_easy_setopt(curl, CURLOPT_DOH_URL,
                            "https://cloudflare-dns.com/dns-query");

           /* Disable host name verification of the DoH server */
           curl_easy_setopt(curl, CURLOPT_DOH_SSL_VERIFYHOST, 0L);

           curl_easy_perform(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.76.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_DOH_SSL_VERIFYPEER.3.html">CURLOPT_DOH_SSL_VERIFYPEER</a></b>(3),     <b><a href="../man3/CURLOPT_PROXY_SSL_VERIFYHOST.3.html">CURLOPT_PROXY_SSL_VERIFYHOST</a></b>(3),      <b><a href="../man3/CURLOPT_PROXY_SSL_VERIFYPEER.3.html">CURLOPT_PROXY_SSL_VERIFYPEER</a></b>(3),
       <b><a href="../man3/CURLOPT_SSL_VERIFYHOST.3.html">CURLOPT_SSL_VERIFYHOST</a></b>(3), <b><a href="../man3/CURLOPT_SSL_VERIFYPEER.3.html">CURLOPT_SSL_VERIFYPEER</a></b>(3)

libcurl                                            2025-06-16                      <u><a href="../man3/CURLOPT_DOH_SSL_VERIFYHOST.3.html">CURLOPT_DOH_SSL_VERIFYHOST</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>