<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mojo::SQLite::Migrations - Migrations</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmojo-sqlite-perl">libmojo-sqlite-perl_3.009-2build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Mojo::SQLite::Migrations - Migrations

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Mojo::SQLite::Migrations;

         my $migrations = Mojo::SQLite::Migrations-&gt;new(sqlite =&gt; $sql);
         $migrations-&gt;from_file('/home/dbook/migrations.sql')-&gt;migrate;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mojo::SQLite::Migrations is used by Mojo::SQLite to allow database schemas to evolve easily over time. A
       migration file is just a collection of sql blocks, with one or more statements, separated by comments of
       the form "-- VERSION UP/DOWN".

         -- 1 up
         create table messages (message text);
         insert into messages values ('I ♥ Mojolicious!');
         -- 1 down
         drop table messages;

         -- 2 up (...you can comment freely here...)
         create table stuff (whatever integer);
         -- 2 down
         drop table stuff;

       The idea is to let you migrate from any version, to any version, up and down.  Migrations are very safe,
       because they are performed in transactions and only one can be performed at a time. If a single statement
       fails, the whole migration will fail and get rolled back. Every set of migrations has a "name", which is
       stored together with the currently active version in an automatically created table named
       "mojo_migrations".

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       Mojo::SQLite::Migrations implements the following attributes.

   <b>name</b>
         my $name    = $migrations-&gt;name;
         $migrations = $migrations-&gt;name('foo');

       Name for this set of migrations, defaults to "migrations".

   <b>sqlite</b>
         my $sql     = $migrations-&gt;sqlite;
         $migrations = $migrations-&gt;sqlite(Mojo::SQLite-&gt;new);

       Mojo::SQLite object these migrations belong to. Note that this attribute is weakened.

</pre><h4><b>METHODS</b></h4><pre>
       Mojo::SQLite::Migrations inherits all methods from Mojo::Base and implements the following new ones.

   <b>active</b>
         my $version = $migrations-&gt;active;

       Currently active version.

   <b>from_data</b>
         $migrations = $migrations-&gt;from_data;
         $migrations = $migrations-&gt;from_data('main');
         $migrations = $migrations-&gt;from_data('main', 'file_name');

       Extract migrations from a file in the DATA section of a class with "data_section" in Mojo::Loader,
       defaults to using the caller class and "name".

         __DATA__
         @@ migrations
         -- 1 up
         create table messages (message text);
         insert into messages values ('I ♥ Mojolicious!');
         -- 1 down
         drop table messages;

   <b>from_file</b>
         $migrations = $migrations-&gt;from_file('/home/dbook/migrations.sql');

       Extract migrations from a file.

   <b>from_string</b>
         $migrations = $migrations-&gt;from_string(
           '-- 1 up
            create table foo (bar integer);
            -- 1 down
            drop table foo;'
         );

       Extract migrations from string.

   <b>latest</b>
         my $version = $migrations-&gt;latest;

       Latest version available.

   <b>migrate</b>
         $migrations = $migrations-&gt;migrate;
         $migrations = $migrations-&gt;<a href="../man3/migrate.3.html">migrate</a>(3);

       Migrate from "active" to a different version, up or down, defaults to using "latest". All version numbers
       need to be positive, with version 0 representing an empty database.

         # Reset database
         $migrations-&gt;<a href="../man0/migrate.0.html">migrate</a>(0)-&gt;migrate;

   <b>sql_for</b>
         my $sql = $migrations-&gt;sql_for(5, 10);

       Get SQL to migrate from one version to another, up or down.

</pre><h4><b>DEBUGGING</b></h4><pre>
       You can set the "MOJO_MIGRATIONS_DEBUG" environment variable to get some advanced diagnostics information
       printed to "STDERR".

         MOJO_MIGRATIONS_DEBUG=1

</pre><h4><b>BUGS</b></h4><pre>
       Report any issues on the public bugtracker.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dan Book, "<a href="mailto:dbook@cpan.org">dbook@cpan.org</a>"

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright 2015, Dan Book.

       This library is free software; you may redistribute it and/or modify it under the terms of the Artistic
       License version 2.0.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Mojo::SQLite

perl v5.40.1                                       2025-02-18                      <u>Mojo::SQLite::<a href="../man3pm/Migrations.3pm.html">Migrations</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>