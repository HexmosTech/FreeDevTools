<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>filetest - Perl pragma to control the filetest permission operators</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/perl-doc">perl-doc_5.40.1-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       filetest - Perl pragma to control the filetest permission operators

</pre><h4><b>SYNOPSIS</b></h4><pre>
           $can_perhaps_read = -r "file";      # use the mode bits
           {
               use filetest 'access';          # intuit harder
               $can_really_read = -r "file";
           }
           $can_perhaps_read = -r "file";      # use the mode bits again

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This pragma tells the compiler to change the behaviour of the filetest permission operators, "-r" "-w"
       "-x" "-R" "-W" "-X" (see perlfunc).

       The default behaviour of file test operators is to use the simple mode bits as returned by the <b>stat()</b>
       family of system calls.  However, many operating systems have additional features to define more complex
       access rights, for example ACLs (Access Control Lists).  For such environments, "use filetest" may help
       the permission operators to return results more consistent with other tools.

       The "use filetest" or "no filetest" statements affect file tests defined in their block, up to the end of
       the closest enclosing block (they are lexically block-scoped).

       Currently, only the "access" sub-pragma is implemented.  It enables (or disables) the use of <b>access()</b>
       when available, that is, on most UNIX systems and other POSIX environments.  See details below.

   <b>Consider</b> <b>this</b> <b>carefully</b>
       The <b>stat()</b> mode bits are probably right for most of the files and directories found on your system,
       because few people want to use the additional features offered by <b>access()</b>. But you may encounter
       surprises if your program runs on a system that uses ACLs, since the <b>stat()</b> information won't reflect the
       actual permissions.

       There may be a slight performance decrease in the filetest operations when the filetest pragma is in
       effect, because checking bits is very cheap.

       Also, note that using the file tests for security purposes is a lost cause from the start: there is a
       window open for race conditions (who is to say that the permissions will not change between the test and
       the real operation?).  Therefore if you are serious about security, just try the real operation and test
       for its success - think in terms of atomic operations.  Filetests are more useful for filesystem
       administrative tasks, when you have no need for the content of the elements on disk.

   <b>The</b> <b>"access"</b> <b>sub-pragma</b>
       UNIX and POSIX systems provide an abstract <b>access()</b> operating system call, which should be used to query
       the read, write, and execute rights. This function hides various distinct approaches in additional
       operating system specific security features, like Access Control Lists (ACLs)

       The extended filetest functionality is used by Perl only when the argument of the operators is a
       filename, not when it is a filehandle.

   <b>Limitation</b> <b>with</b> <b>regard</b> <b>to</b> <b>"_"</b>
       Because <b>access()</b> does not invoke <b>stat()</b> (at least not in a way visible to Perl), <b>the</b> <b>stat</b> <b>result</b> <b>cache</b>
       <b>"_"</b> <b>is</b> <b>not</b> <b>set</b>.  This means that the outcome of the following two tests is different.  The first has the
       stat bits of <u><a href="file:/etc/passwd">/etc/passwd</a></u> in "_", and in the second case this still contains the bits of "<a href="file:/etc">/etc</a>".

        { -d '<a href="file:/etc">/etc</a>';
          -w '<a href="file:/etc/passwd">/etc/passwd</a>';
          print -f _ ? 'Yes' : 'No';   # Yes
        }

        { use filetest 'access';
          -d '<a href="file:/etc">/etc</a>';
          -w '<a href="file:/etc/passwd">/etc/passwd</a>';
          print -f _ ? 'Yes' : 'No';   # No
        }

       Of course, unless your OS does not implement <b>access()</b>, in which case the pragma is simply ignored.  Best
       not to use "_" at all in a file where the filetest pragma is active!

       As a side effect, as "_" doesn't work, stacked filetest operators ("-f -w $file") won't work either.

       This limitation might be removed in a future version of perl.

perl v5.40.1                                       2025-07-03                                    <u><a href="../man3perl/filetest.3perl.html">filetest</a></u>(3perl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>