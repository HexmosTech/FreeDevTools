<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VM::EC2::SecurityGroup - Object describing an Amazon EC2 security group</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libvm-ec2-perl">libvm-ec2-perl_1.28-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       VM::EC2::SecurityGroup - Object describing an Amazon EC2 security group

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use VM::EC2;

         $ec2       = VM::EC2-&gt;new(...);
         @sg = $ec2-&gt;describe_security_groups;
         for my $sg (@sg) {
             $name = $sg-&gt;groupName;
             $id   = $sg-&gt;groupId;
             $desc = $sg-&gt;groupDescription;
             $tags = $sg-&gt;tags;
             @inbound_permissions  = $sg-&gt;ipPermissions;
             @outbound_permissions = $sg-&gt;ipPermissionsEgress;
             for $i (@inbound_permissions) {
                $protocol = $i-&gt;ipProtocol;
                $fromPort = $i-&gt;fromPort;
                $toPort   = $i-&gt;toPort;
                @ranges   = $i-&gt;ipRanges;
             }
         }

        $sg = $sg[0];

        # Add a new security rule
        $sg-&gt;authorize_incoming(-protocol  =&gt; 'tcp',
                                -port      =&gt; 80,
                                -source_ip =&gt; ['192.168.2.0/24','192.168.2.1/24'});

        # write it to AWS.
        $sg-&gt;update();

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This object is used to describe an Amazon EC2 security group. It is returned by
       VM::EC2-&gt;<b>describe_security_groups()</b>. You may also obtain this object by calling an Instance object's
       <b>groups()</b> method, and then invoking one of the group's <b>permissions()</b> method. See VM::EC2::Group.

</pre><h4><b>METHODS</b></h4><pre>
       The following object methods are supported:

        ownerId          -- Owner of this security group
        groupId          -- ID of this security group
        groupName        -- Name of this security group
        groupDescription -- Description of this group
        vpcId            -- Virtual Private Cloud ID, if applicable
        ipPermissions    -- A list of rules that govern incoming connections
                            to instances running under this security group.
                            Each rule is a
                            L&lt;VM::EC2::SecurityGroup::IpPermission&gt; object.
        ipPermissionsEgress -- A list of rules that govern outgoing connections
                            from instances running under this security group.
                            Each rule is a
                            L&lt;VM::EC2::SecurityGroup::IpPermission object&gt;.
                            This field is only valid for VPC groups.
        tags             -- Hashref containing tags associated with this group.
                            See L&lt;VM::EC2::Generic&gt;.

       For convenience, the following aliases are provided for commonly used methods:

        inbound_permissions  -- same as ipPermissions()
        outbound_permissions -- same as ipPermissionsEgress()
        name                 -- same as groupName()

       See VM::EC2::SecurityGroup::IpPermission for details on accessing port numbers, IP ranges and other
       fields associated with incoming and outgoing firewall rules.

</pre><h4><b>MODIFYING</b> <b>FIREWALL</b> <b>RULES</b></h4><pre>
       To add or revoke firewall rules, call the authorize_incoming, authorize_outgoing, revoke_incoming or
       <b>revoke_outgoing()</b> methods one or more times. Each of these methods either adds or removes a single
       firewall rule. After adding or revoking the desired rules, call <b>update()</b> to write the modified group back
       to Amazon. The object will change to reflect the new permissions.

   <b>$permission</b> <b>=</b> <b>$group-&gt;authorize_incoming(%args)</b>
       Add a rule for incoming firewall traffic. Arguments are as follows:

        -protocol        The protocol, either a string (tcp,udp,icmp) or
                          the corresponding protocol number (6, 17, 1).
                          Use -1 to indicate all protocols. (required)

        -port, -ports    The port or port range. When referring to a single
                          port, you may use either the port number or the
                          service name (e.g. "ssh"). For this to work the
                          service name must be located in /etc/services.
                          When specifying a port range, use "start..end" as
                          in "8000..9000". Note that this is a string that
                          contains two dots, and not two numbers separated
                          by the perl range operator. For the icmp protocol,
                          this argument corresponds to the ICMP type number.
                          (required).

        -group, -groups   Security groups to authorize. Instances that belong
                           to the named security groups will be allowed
                           access. You may specify either a single group or
                           a list of groups as an arrayref. The following
                           syntaxes are recognized:

                           "sg-12345"       authorize group with this groupId
                           "12345/my group" authorize group named "my group"
                                             owned by user 12345
                            "my group"      authorize group named "my group"
                                             owned by yourself

        -source, -source_ip Authorize incoming traffic from an IP address, IP
                             address range, or set of such ranges. IP
                             addresses use the CIDR notation of a.b.c.d/mask,
                             as described in
                             <a href="http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing">http://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing</a>.
                             Pass an arrayref to simultaneously authorize
                             multiple CIDR ranges.

       The result of this call is a VM::EC2::SecurityGroup::IpPermission object corresponding to the rule you
       defined. Note that the rule is not written to Amazon until you call <b>update()</b>.

       Here are some examples:

        $sg-&gt;authorize_incoming(-protocol  =&gt; 'tcp',
                                -port      =&gt; 80,
                                -source_ip =&gt; ['192.168.2.0/24','192.168.2.1/24'});

        # TCP on ports 22 and 23 from anyone
        $sg-&gt;authorize_incoming(-protocol  =&gt; 'tcp',
                                -port      =&gt; '22..23',
                                -source_ip =&gt; '0.0.0.0/0');

        # ICMP on echo (ping) port from anyone
        $sg-&gt;authorize_incoming(-protocol  =&gt; 'icmp',
                                -port      =&gt; -1,
                                -source_ip =&gt; '0.0.0.0/0');

        # TCP to port 25 (mail) from instances belonging to
        # the "Mail relay" group belonging to user 12345678.
        $sg-&gt;authorize_incoming(-protocol  =&gt; 'tcp',
                                -port      =&gt; 25,
                                -group     =&gt; '12345678/Mail relay');

   <b>$permission</b> <b>=</b> <b>$group-&gt;authorize_outgoing(%args)</b>
       This is identical to <b>authorize_incoming()</b> except that the rule applies to outbound traffic. Only VPC
       security groups can define outgoing firewall rules.

   <b>$permission</b> <b>=</b> <b>$group-&gt;revoke_incoming($rule)</b>
   <b>$permission</b> <b>=</b> <b>$group-&gt;revoke_incoming(%args)</b>
       This method revokes an incoming firewall rule. You can call it with a single argument consisting of a
       VM::EC2::SecurityGroup::IpPermission object in order to revoke that rule. Alternatively, when called with
       the named arguments listed for <b>authorize_incoming()</b>, it will attempt to match an existing rule to the
       provided arguments and queue it for deletion.

       Here is an example of revoking all rules that allow ssh (port 22) access:

        @ssh_rules = grep {$_-&gt;fromPort == 22} $group-&gt;ipPermissions;
        $group-&gt;revoke_incoming($_) foreach @ssh_rules;
        $group-&gt;update();

   <b>$boolean</b> <b>=</b> <b>$group-&gt;update()</b>
       This method will write all queued rule authorizations and revocations to Amazon, and return a true value
       if successful. The method will return false if any of the rule updates failed. You can examine the
       VM::EC2 object's <b>error_str()</b> method to determine what went wrong, and check the group object's
       <b>ipPermissions()</b> method to see what firewall rules are currently defined.

   <b>$boolean</b> <b>=</b> <b>$group-&gt;write()</b>
       An alias for <b>update()</b>

   <b>$group-&gt;refresh()</b>
       This method refreshes the group information from Amazon. It is called automatically by <b>update()</b>.

</pre><h4><b>STRING</b> <b>OVERLOADING</b></h4><pre>
       When used in a string context, this object will interpolate the groupId.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       VM::EC2 VM::EC2::Generic VM::EC2::Instance VM::EC2::Group VM::EC2::SecurityGroup::IpPermission

</pre><h4><b>AUTHOR</b></h4><pre>
       Lincoln Stein &lt;<a href="mailto:lincoln.stein@gmail.com">lincoln.stein@gmail.com</a>&gt;.

       Copyright (c) 2011 Ontario Institute for Cancer Research

       This package and its accompanying libraries is free software; you can redistribute it and/or modify it
       under the terms of the GPL (either version 1, or at your option, any later version) or the Artistic
       License 2.0.  Refer to LICENSE for the full license text. In addition, please see DISCLAIMER.txt for
       disclaimers of warranty.

perl v5.38.2                                       2024-08-10                        <u>VM::EC2::<a href="../man3pm/SecurityGroup.3pm.html">SecurityGroup</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>