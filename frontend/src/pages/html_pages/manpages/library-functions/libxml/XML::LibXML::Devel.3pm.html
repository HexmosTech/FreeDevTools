<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XML::LibXML::Devel - makes functions from LibXML.xs available</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libxml-libxml-perl">libxml-libxml-perl_2.0207+dfsg+really+2.0207-0ubuntu5_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       XML::LibXML::Devel - makes functions from LibXML.xs available

</pre><h4><b>SYNOPSIS</b></h4><pre>
         /**********************************************
          * C functions you want to access
          */
         xmlNode *return_node();
         void receive_node(xmlNode *);

         ###############################################
         # XS Code
         void *
           xs_return_node
           CODE:
               RETVAL = return_node();
           OUTPUT:
               RETVAL

         void
           xs_receive_node
               void *n
           CODE:
               receive_node(n);

         ###############################################
         # Perl code
         use XML::LibXML::Devel;

         sub return_node
         {
           my $raw_node = xs_return_node();
           my $node = XML::LibXML::Devel::node_to_perl($raw_node);
           XML::LibXML::Devel::refcnt_inc($raw_node);
           return $node;
         }

         sub receive_node
         {
           my ($node) = @_;
           my $raw_node = XML::LibXML::Devel::node_from_perl($node);
           xs_receive_node($raw_node);
           XML::LibXML::Devel::refcnt_inc($raw_node);
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "XML::LibXML::Devel" makes functions from LibXML.xs available that are needed to wrap libxml2 nodes in
       and out of XML::LibXML::Nodes.  This gives cleaner dependencies than using LibXML.so directly.

       To XS a library that uses libxml2 nodes the first step is to do this so that xmlNodePtr is passed as void
       *. These raw nodes are then turned into libxml nodes by using this "Devel" functions.

       Be aware that this module is currently rather experimental. The function names may change if I XS more
       functions and introduce a reasonable naming convention.

       Be also aware that this module is a great tool to cause segfaults and introduce memory leaks. It does
       however provide a partial cure by making "xmlMemUsed" available as "mem_used".

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>NODE</b> <b>MANAGEMENT</b>
       node_to_perl
          node_to_perl($raw_node);

        Returns a LibXML::Node object. This has a proxy node with a reference counter and an owner attached. The
        raw  node  will be deleted as soon as the reference counter reaches zero.  If the C library is keeping a
        pointer to the raw node, you need to call refcnt_inc immediately.  You also need to replace  xmlFreeNode
        by a call to refcnt_dec.

       node_to_perl
          node_from_perl($node);

        Returns  a  raw  node.  This is a void * pointer and you can do nothing but passing it to functions that
        treat it as an xmlNodePtr. The raw node will be freed as soon as its reference counter reaches zero.  If
        the C library is keeping a pointer to the raw node, you need to call refcnt_inc immediately.   You  also
        need to replace xmlFreeNode by a call to refcnt_dec.

       refcnt_inc
          refcnt_inc($raw_node);

        Increments  the  raw  nodes  reference  counter.  The  raw  node must already be known to perl to have a
        reference counter.

       refcnt_dec
          refcnt_dec($raw_node);

        Decrements the raw nodes reference counter and returns the value it had before. if the  counter  becomes
        zero  or  less, this method will free the proxy node holding the reference counter.  If the node is part
        of a subtree, refcnt_dec will fix the reference counts and delete the subtree if it is not required  any
        more.

       refcnt
          refcnt($raw_node);

        Returns the value of the reference counter.

       fix_owner
          fix_owner($raw_node, $raw_parent);

        This  functions fixes the reference counts for an entire subtree.  it is very important to fix an entire
        subtree after node operations where the documents or the owner node may  get  changed.  this  method  is
        aware about nodes that already belong to a certain owner node.

   <b>MEMORY</b> <b>DEBUGGING</b>
       $ENV{DEBUG_MEMORY}
          BEGIN {$ENV{DEBUG_MEMORY} = 1;};
          use XML::LibXML;

        This turns on libxml2 memory debugging. It must be set before XML::LibXML is loaded.

       mem_used
          mem_used();

        Returns the number of bytes currently allocated.

   <b>EXPORT</b>
       None by default.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       This was created to support the needs of Apache2::ModXml2. So this can serve as an example.

</pre><h4><b>AUTHOR</b></h4><pre>
       Joachim Zobel &lt;<a href="mailto:jz-2011@heute-morgen.de">jz-2011@heute-morgen.de</a>&gt;

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       Copyright (C) 2011 by Joachim Zobel

       This  library  is  free  software;  you can redistribute it and/or modify it under the same terms as Perl
       itself, either Perl version 5.10.1 or, at your  option,  any  later  version  of  Perl  5  you  may  have
       available.

perl v5.40.1                                       2025-06-09                            <u>XML::LibXML::<a href="../man3pm/Devel.3pm.html">Devel</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>