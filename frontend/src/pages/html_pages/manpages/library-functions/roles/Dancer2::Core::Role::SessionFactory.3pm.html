<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dancer2::Core::Role::SessionFactory - Role for session factories</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdancer2-perl">libdancer2-perl_1.1.2+dfsg-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Dancer2::Core::Role::SessionFactory - Role for session factories

</pre><h4><b>VERSION</b></h4><pre>
       version 1.1.2

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Any class that consumes this role will be able to store, create, retrieve and destroy session objects.

       The default values for attributes can be overridden in your Dancer2 configuration. See "Session-engine"
       in Dancer2::Config.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
   <b>cookie_name</b>
       The name of the cookie to create for storing the session key

       Defaults to "dancer.session"

   <b>cookie_domain</b>
       The domain of the cookie to create for storing the session key.  Defaults to the empty string and is
       unused as a result.

   <b>cookie_path</b>
       The path of the cookie to create for storing the session key.  Defaults to "/".

   <b>cookie_duration</b>
       Default duration before session cookie expiration.  If set, the Dancer2::Core::Session "expires"
       attribute will be set to the current time plus this duration (expression parsed by Dancer2::Core::Time).

   <b>cookie_same_site</b>
       Restricts the session cookie to a first-party or same-site context.  Defaults to the empty string and is
       unused as a result.  See "same_site" in Dancer2::Core::Cookie.

   <b>session_duration</b>
       Duration in seconds before sessions should expire, regardless of cookie expiration.  If set, then
       SessionFactories should use this to enforce a limit on session validity.

   <b>is_secure</b>
       Boolean flag to tell if the session cookie is secure or not.

       Default is false.

   <b>is_http_only</b>
       Boolean flag to tell if the session cookie is http only.

       Default is true.

</pre><h4><b>INTERFACE</b></h4><pre>
       Following is the interface provided by this role. When specified the required methods to implement are
       described.

   <b>create</b>
       Create a brand new session object and store it. Returns the newly created session object.

       Triggers an exception if the session is unable to be created.

           my $session = MySessionFactory-&gt;create();

       This method does not need to be implemented in the class.

   <b>generate_id</b>
       Returns a randomly-generated, guaranteed-unique string.  By default, it is a 32-character, URL-safe,
       Base64 encoded combination of a 32 bit timestamp and a 160 bit SHA1 digest of random seed data.  The
       timestamp ensures that session IDs are generally monotonic.

       The default algorithm is not guaranteed cryptographically secure, but it's still reasonably strong for
       general use.

       If you have installed Math::Random::ISAAC::XS and Crypt::URandom, the seed data will be generated from a
       cryptographically-strong random number generator.

       This method is used internally by <b>create()</b> to set the session ID.

       This method does not need to be implemented in the class unless an alternative method for session ID
       generation is desired.

   <b>validate_id</b>
       Returns true if a session id is of the correct format, or false otherwise.

       By default, this ensures that the session ID is a string of characters from the Base64 schema for "URL
       Applications" plus the "~" character.

       This method does not need to be implemented in the class unless an alternative set of characters for
       session IDs is desired.

   <b>retrieve</b>
       Return the session object corresponding to the session ID given. If none is found, triggers an exception.

           my $session = MySessionFactory-&gt;retrieve(id =&gt; $id);

       The method "_retrieve" must be implemented.  It must take $id as a single argument and must return a hash
       reference of session data.

   <b>change_id</b>
       Changes the session ID of the corresponding session.

           MySessionFactory-&gt;change_id(session =&gt; $session_object);

       The method "_change_id" must be implemented. It must take $old_id and $new_id as arguments and change the
       ID from the old one to the new one in the underlying session storage.

   <b>destroy</b>
       Purges the session object that matches the ID given. Returns the ID of the destroyed session if
       succeeded, triggers an exception otherwise.

           MySessionFactory-&gt;destroy(id =&gt; $id);

       The "_destroy" method must be implemented. It must take $id as a single argument and destroy the
       underlying data.

   <b>flush</b>
       Make sure the session object is stored in the factory's backend. This method is called to notify the
       backend about the change in the session object.

       The Dancer application will not call flush unless the session "is_dirty" attribute is true to avoid
       unnecessary writes to the database when no data has been modified.

       An exception is triggered if the session is unable to be updated in the backend.

           MySessionFactory-&gt;flush(session =&gt; $session);

       The "_flush" method must be implemented.  It must take two arguments: the $id and a hash reference of
       session data.

   <b>set_cookie_header</b>
       Sets the session cookie into the response object

           MySessionFactory-&gt;set_cookie_header(
               response  =&gt; $response,
               session   =&gt; $session,
               destroyed =&gt; undef,
           );

       The "response" parameter contains a Dancer2::Core::Response object.  The "session" parameter contains a
       Dancer2::Core::Session object.

       The "destroyed" parameter is optional.  If true, it indicates the session was marked destroyed by the
       request context.  The default "set_cookie_header" method doesn't need that information, but it is
       included in case a SessionFactory must handle destroyed sessions differently (such as signalling to
       middleware).

   <b>cookie</b>
       Coerce a session object into a Dancer2::Core::Cookie object.

           MySessionFactory-&gt;cookie(session =&gt; $session);

   <b>sessions</b>
       Return a list of all session IDs stored in the backend.  Useful to create cleaning scripts, in
       conjunction with session's creation time.

       The "_sessions" method must be implemented.  It must return an array reference of session IDs (or an
       empty array reference).

</pre><h4><b>CONFIGURATION</b></h4><pre>
       If there are configuration values specific to your session factory in your config.yml or environment,
       those will be passed to the constructor of the session factory automatically.  In order to accept and
       store them, you need to define accessors for them.

           engines:
             session:
               Example:
                 database_connection: "some_data"

       In your session factory:

           package Dancer2::Session::Example;
           use Moo;
           with "Dancer2::Core::Role::SessionFactory";

           has database_connection =&gt; ( is =&gt; "ro" );

       You need to do this for every configuration key. The ones that do not have accessors defined will just go
       to the void.

</pre><h4><b>AUTHOR</b></h4><pre>
       Dancer Core Developers

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This software is copyright (c) 2024 by Alexis Sukrieh.

       This is free software; you can redistribute it and/or modify it under the same terms as the Perl 5
       programming language system itself.

perl v5.40.0                                       2024-12-08              <u>Dancer2::Core:...:<a href="../man3pm/SessionFactory.3pm.html">SessionFactory</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>