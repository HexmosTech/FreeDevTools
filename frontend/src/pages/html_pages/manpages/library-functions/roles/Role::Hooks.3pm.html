<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Role::Hooks - role callbacks</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/librole-hooks-perl">librole-hooks-perl_0.008-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Role::Hooks - role callbacks

</pre><h4><b>SYNOPSIS</b></h4><pre>
         package Local::Role {
           use Moo::Role;
           use Role::Hooks;

           Role::Hooks-&gt;after_apply(__PACKAGE__, sub {
             my ($role, $target) = @_;
             print "$role has been applied to $target.\n";
           });
         }

         package Local::Class {
           use Moo;
           with "Local::Role";   # prints above message
         }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This module allows a role to run a callback when it is applied to a class or to another role.

   <b>Compatibility</b>
       It should work with Role::Tiny, Moo::Role, Moose::Role, Mouse::Role, Role::Basic, and Mite. Not all class
       builders work well with all role builders (for example, a Moose class consuming a Mouse role).  But when
       they do work together, Role::Hooks should be able to run the callbacks. (The only combination I've tested
       is Moo with Moose though.)

       Some other role implementations (such as Moos::Role, exact::role, and OX::Role) are just wrappers around
       one of the supported role builders, so should mostly work.

       With Role::Basic, the "after_apply" hook is called a little earlier than would be ideal; after the role
       has been fully loaded and its methods have been copied into the target package, but before handling
       "requires", and before patching the "DOES" method in the target package. If you are using Role::Basic,
       consider switching to Role::Tiny.

       With Mite, the "before_apply" hook is called fairly late; after the role is fully loaded and attributes
       and methods have been copied into the target package, after "DOES" has been patched, but before method
       modifiers from the role have been applied to the target package.

       Apart from Role::Tiny/Moo::Role, a hashref of additional arguments (things like "-excludes" and "-alias")
       can be passed when consuming a role. Although I discourage people from using these in general, if you
       need access to these arguments in the callback, you can check %Role::Hooks::ARGS.

       Roles generated via Package::Variant should work; see <u>t/20packagevariant.t</u> for a demonstration.

   <b>Methods</b>
       "before_apply"
             Role::Hooks-&gt;before_apply($rolename, $callback);

           Sets up a callback for a role that will be called before the role is applied to a target package. The
           callback will be passed two parameters: the role being applied and the target package.

           The role being applied may not be the same role as the role the callback was defined in!

             package Local::Role1 {
               use Moo::Role;
               use Role::Hooks;
               Role::Hooks-&gt;before_apply(__PACKAGE__, sub {
                 my ($role, $target) = @_;
                 print "$role has been applied to $target.\n";
               });
             }

             package Local::Role2 {
               use Moo::Role;
               with "Local::Role1";
             }

             package Local::Class1 {
               use Moo::Role;
               with "Local::Role2";
             }

           This will print:

             Local::Role1 has been applied to Local::Role2.
             Local::Role2 has been applied to Local::Class1.

           If you only care about direct applications of roles (i.e. the first one):

             Role::Hooks-&gt;before_apply(__PACKAGE__, sub {
               my ($role, $target) = @_;
               return if $role ne __PACKAGE__;
               print "$role has been applied to $target.\n";
             });

           If you only care about roles being applied to classes (i.e. the second one):

             Role::Hooks-&gt;before_apply(__PACKAGE__, sub {
               my ($role, $target) = @_;
               return if Role::Hooks-&gt;is_role($target);
               print "$role has been applied to $target.\n";
             });

       "after_apply"
             Role::Hooks-&gt;after_apply($rolename, $callback);

           The same as "before_apply", but called later in the role application process.

           Note  that  when  the  callback  is  called,  even though it's after the role has been applied to the
           target, it doesn't mean the target has finished being  built.  For  example,  there  might  be  "has"
           statements after the "with" statement, and those will not have been evaluated yet.

           If  you  want  to  throw  an  error  when someone applies your role to an inappropriate target, it is
           probably better to do that in "before_apply" if you can.

       "after_inflate"
             Role::Hooks-&gt;after_inflate($pkg_name, $callback);

           Even though this is part of Role::Hooks, it works on classes too.  But it only works on  classes  and
           roles  built  using Moo. This runs your callback if your Moo class or role gets "inflated" to a Moose
           class or role.

           If you set up a callback for a role, then the callback will also get called if any packages that role
           was applied to get inflated.

       "is_role"
           Will return true if the given package seems to be a role, false otherwise.

           (In fact, returns  a  string  representing  which  role  builder  the  role  seems  to  be  using  --
           "Role::Tiny",  "Moose::Role",  "Mouse::Role",  "Role::Basic",  or  "Mite::Role";  roles  built  using
           Moo::Role are detected as "Role::Tiny".)

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The environment variable "PERL_ROLE_HOOKS_DEBUG" may be set to true to enable debugging messages.

</pre><h4><b>BUGS</b></h4><pre>
       Please report any bugs to &lt;<a href="http://rt.cpan.org/Dist/Display.html">http://rt.cpan.org/Dist/Display.html</a>?Queue=Role-Hooks&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Role::Tiny, Moose::Role.

</pre><h4><b>AUTHOR</b></h4><pre>
       Toby Inkster &lt;<a href="mailto:tobyink@cpan.org">tobyink@cpan.org</a>&gt;.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENCE</b></h4><pre>
       This software is copyright (c) 2020-2022 by Toby Inkster.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

</pre><h4><b>DISCLAIMER</b> <b>OF</b> <b>WARRANTIES</b></h4><pre>
       THIS  PACKAGE  IS  PROVIDED  "AS  IS"  AND  WITHOUT ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, WITHOUT
       LIMITATION, THE IMPLIED WARRANTIES OF MERCHANTIBILITY AND FITNESS FOR A PARTICULAR PURPOSE.

perl v5.34.0                                       2022-07-20                                   <u>Role::<a href="../man3pm/Hooks.3pm.html">Hooks</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>