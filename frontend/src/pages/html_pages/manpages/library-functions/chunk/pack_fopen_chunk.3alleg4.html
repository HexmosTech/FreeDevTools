<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pack_fopen_chunk - Opens a sub-chunk of a file. Allegro game programming library.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/allegro4-doc">allegro4-doc_4.4.3.1-5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pack_fopen_chunk - Opens a sub-chunk of a file. Allegro game programming library.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;allegro.h&gt;</b>

       <b>PACKFILE</b> <b>*pack_fopen_chunk(PACKFILE</b> <b>*f,</b> <b>int</b> <b>pack);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Opens  a  sub-chunk  of  a file. Chunks are primarily intended for use by the datafile code, but they may
       also be useful for your own file routines. A chunk provides a logical view of part of a file,  which  can
       be  compressed  as  an individual entity and will automatically insert and check length counts to prevent
       reading past the end of the chunk. The PACKFILE parameter is a previously opened file, and  `pack'  is  a
       boolean parameter which will turn compression on for the sub-chunk if it is non-zero.  Example:

          PACKFILE *output = pack_fopen("out.raw", "w!");
          ...
          /* Create a sub-chunk with compression. */
          output = pack_fopen_chunk(output, 1);
          if (!output)
             abort_on_error("Error saving data!");
          /* Write some data to the sub-chunk. */
          ...
          /* Close the sub-chunk, recovering parent file. */
          output = pack_fclose_chunk(output);

       The  data  written  to the chunk will be prefixed with two length counts (32-bit, a.k.a. big-endian). For
       uncompressed chunks these will both be set to the size of the data in the chunk.  For  compressed  chunks
       (created  by setting the `pack' flag), the first length will be the raw size of the chunk, and the second
       will be the negative size of the uncompressed data.

       To read the chunk, use the following code:

          PACKFILE *input = pack_fopen("out.raw", "rp");
          ...
          input = pack_fopen_chunk(input, 1);
          /* Read data from the sub-chunk and close it. */
          ...
          input = pack_fclose_chunk(input);

       This sequence will read the  length  counts  created  when  the  chunk  was  written,  and  automatically
       decompress  the  contents  of  the  chunk  if  it was compressed. The length will also be used to prevent
       reading past the end of the chunk (Allegro will return EOF if you attempt  this),  and  to  automatically
       skip past any unread chunk data when you call pack_fclose_chunk().

       Chunks  can  be  nested  inside each other by making repeated calls to pack_fopen_chunk(). When writing a
       file, the compression status is inherited from the parent file, so you only need to set the pack flag  if
       the  parent  is not compressed but you want to pack the chunk data. If the parent file is already open in
       packed mode, setting the pack flag will result in data being compressed twice: once as it is  written  to
       the chunk, and again as the chunk passes it on to the parent file.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Returns  a  pointer  to  the  sub-chunked  PACKFILE, or NULL if there was some error (eg. you are using a
       custom PACKFILE vtable).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3alleg4/pack_fclose_chunk.3alleg4.html">pack_fclose_chunk</a></b>(3alleg4), <b><a href="../man3alleg4/pack_fopen.3alleg4.html">pack_fopen</a></b>(3alleg4)

Allegro                                           version 4.4.3                        <u><a href="../man3alleg4/pack_fopen_chunk.3alleg4.html">pack_fopen_chunk</a></u>(3alleg4)
</pre>
 </div>
</div></section>
</div>
</body>
</html>