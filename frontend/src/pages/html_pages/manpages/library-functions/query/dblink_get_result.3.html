<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dblink_get_result - gets an async query result</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/postgresql-doc-17">postgresql-doc-17_17.5-1build1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dblink_get_result - gets an async query result

</pre><h4><b>SYNOPSIS</b></h4><pre>
       dblink_get_result(text connname [, bool fail_on_error]) returns setof record

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>dblink_get_result</b> collects the results of an asynchronous query previously sent with <b>dblink_send_query</b>.
       If the query is not already completed, <b>dblink_get_result</b> will wait until it is.

</pre><h4><b>ARGUMENTS</b></h4><pre>
       <u>connname</u>
           Name of the connection to use.

       <u>fail_on_error</u>
           If true (the default when omitted) then an error thrown on the remote side of the connection causes
           an error to also be thrown locally. If false, the remote error is locally reported as a NOTICE, and
           the function returns no rows.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       For an async query (that is, an SQL statement returning rows), the function returns the row(s) produced
       by the query. To use this function, you will need to specify the expected set of columns, as previously
       discussed for <b>dblink</b>.

       For an async command (that is, an SQL statement not returning rows), the function returns a single row
       with a single text column containing the command's status string. It is still necessary to specify that
       the result will have a single text column in the calling FROM clause.

</pre><h4><b>NOTES</b></h4><pre>
       This function <u>must</u> be called if <b>dblink_send_query</b> returned 1. It must be called once for each query sent,
       and one additional time to obtain an empty set result, before the connection can be used again.

       When using <b>dblink_send_query</b> and <b>dblink_get_result</b>, dblink fetches the entire remote query result before
       returning any of it to the local query processor. If the query returns a large number of rows, this can
       result in transient memory bloat in the local session. It may be better to open such a query as a cursor
       with <b>dblink_open</b> and then fetch a manageable number of rows at a time. Alternatively, use plain <b>dblink()</b>,
       which avoids memory bloat by spooling large result sets to disk.

</pre><h4><b>EXAMPLES</b></h4><pre>
           contrib_regression=# SELECT dblink_connect('dtest1', 'dbname=contrib_regression');
            dblink_connect
           ----------------
            OK
           (1 row)

           contrib_regression=# SELECT * FROM
           contrib_regression-# dblink_send_query('dtest1', 'select * from foo where f1 &lt; 3') AS t1;
            t1
           ----
             1
           (1 row)

           contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
            f1 | f2 |     f3
           ----+----+------------
             0 | a  | {a0,b0,c0}
             1 | b  | {a1,b1,c1}
             2 | c  | {a2,b2,c2}
           (3 rows)

           contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
            f1 | f2 | f3
           ----+----+----
           (0 rows)

           contrib_regression=# SELECT * FROM
           contrib_regression-# dblink_send_query('dtest1', 'select * from foo where f1 &lt; 3; select * from foo where f1 &gt; 6') AS t1;
            t1
           ----
             1
           (1 row)

           contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
            f1 | f2 |     f3
           ----+----+------------
             0 | a  | {a0,b0,c0}
             1 | b  | {a1,b1,c1}
             2 | c  | {a2,b2,c2}
           (3 rows)

           contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
            f1 | f2 |      f3
           ----+----+---------------
             7 | h  | {a7,b7,c7}
             8 | i  | {a8,b8,c8}
             9 | j  | {a9,b9,c9}
            10 | k  | {a10,b10,c10}
           (4 rows)

           contrib_regression=# SELECT * FROM dblink_get_result('dtest1') AS t1(f1 int, f2 text, f3 text[]);
            f1 | f2 | f3
           ----+----+----
           (0 rows)

PostgreSQL 17.5                                       2025                                  <u><a href="../man3/DBLINK_GET_RESULT.3.html">DBLINK_GET_RESULT</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>