<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ares_mkquery - Compose a single-question DNS query buffer</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libc-ares-dev">libc-ares-dev_1.34.5-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ares_mkquery - Compose a single-question DNS query buffer

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;ares.h&gt;

       int ares_mkquery(const char *<u>name</u>, int <u>dnsclass</u>, int <u>type</u>,
                        unsigned short <u>id</u>, int <u>rd</u>, unsigned char **<u>buf</u>,
                        int *<u>buflen</u>)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This function is deprecated as of c-ares 1.10, please use <u><a href="../man3/ares_dns_record_create.3.html">ares_dns_record_create</a>(3)</u> instead.

       The  <b>ares_mkquery</b>  function  composes  a  DNS query with a single question.  The parameter <u>name</u> gives the
       query name as a NUL-terminated C string of period-separated  labels  optionally  ending  with  a  period;
       periods and backslashes within a label must be escaped with a backlash.  The parameters <u>dnsclass</u> and <u>type</u>
       give  the  class  and  type  of the query using the values defined in <b>&lt;arpa/nameser.h&gt;</b>.  The parameter <u>id</u>
       gives a 16-bit identifier for the query.  The parameter <u>rd</u> should be nonzero  if  recursion  is  desired,
       zero  if  not.  The query will be placed in an allocated buffer, a pointer to which will be stored in the
       variable pointed to by <u>buf</u>, and the length of which will be stored in the variable pointed to by  <u>buflen</u>.
       It  is  the  caller's  responsibility  to free this buffer using <u><a href="../man3/ares_free_string.3.html">ares_free_string</a>(3)</u> when it is no longer
       needed.

       Usage of <u><a href="../man3/ares_mkquery.3.html">ares_mkquery</a>(3)</u> is deprecated, whereas the function is equivalent to  <u><a href="../man3/ares_create_query.3.html">ares_create_query</a>(3)</u>  with
       <b>max_udp_size</b> set to 0.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>ares_mkquery</b> can return any of the following values:

       <b>ARES_SUCCESS</b>   Construction of the DNS query succeeded.

       <b>ARES_ENOTFOUND</b> The query name <u>name</u> refers to a <u>.onion</u> domain name. See RFC 7686.

       <b>ARES_EBADNAME</b>  The  query  name <u>name</u> could not be encoded as a domain name, either because it contained a
                      zero-length label or because it contained a label of more than 63 characters.

       <b>ARES_ENOMEM</b>    Memory was exhausted.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/ares_expand_name.3.html">ares_expand_name</a></b>(3), <b><a href="../man3/ares_dns_record.3.html">ares_dns_record</a></b>(3), <b><a href="../man3/ares_free_string.3.html">ares_free_string</a></b>(3)

                                                   20 Nov 2009                                   <u><a href="../man3/ARES_MKQUERY.3.html">ARES_MKQUERY</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>