<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APR::Finfo - Perl API for APR fileinfo structure</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libapache2-mod-perl2">libapache2-mod-perl2_2.0.13-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       APR::Finfo - Perl API for APR fileinfo structure

</pre><h4><b>Synopsis</b></h4><pre>
         use APR::Finfo ();
         use APR::Const -compile =&gt; qw(FINFO_NORM);
         my $finfo = APR::Finfo::stat("/tmp/test", APR::Const::FINFO_NORM, $pool);

         $device = $finfo-&gt;device;     # (stat $file)[0]
         $inode  = $finfo-&gt;inode;      # (stat $file)[1]
         # stat returns an octal number while protection is hex
         $prot   = $finfo-&gt;protection; # (stat $file)[2]
         $nlink  = $finfo-&gt;nlink;      # (stat $file)[3]
         $gid    = $finfo-&gt;group;      # (stat $file)[4]
         $uid    = $finfo-&gt;user;       # (stat $file)[5]
         $size   = $finfo-&gt;size;       # (stat $file)[7]
         $atime  = $finfo-&gt;atime;      # (stat $file)[8]
         $mtime  = $finfo-&gt;mtime;      # (stat $file)[9]
         $ctime  = $finfo-&gt;ctime;      # (stat $file)[10]

         $csize = $finfo-&gt;csize; # consumed size: not portable!

         $filetype = $finfo-&gt;filetype; # file/dir/socket/etc

         $fname = $finfo-&gt;fname;
         $name  = $finfo-&gt;name;  # in filesystem case:

         # valid fields that can be queried
         $valid = $finfo-&gt;valid;

</pre><h4><b>Description</b></h4><pre>
       APR fileinfo structure provides somewhat similar information to Perl's stat() call, but you will want to
       use this module's API to query an already "stat()'ed" filehandle to avoid an extra system call or to
       query attributes specific to APR file handles.

       During the HTTP request handlers coming after "PerlMapToStorageHandler", "$r-&gt;finfo" already contains the
       cached values from the apr's stat() call. So you don't want to perform it again, but instead get the
       "ARP::Finfo" object via:

         my $finfo = $r-&gt;finfo;

</pre><h4><b>API</b></h4><pre>
       "APR::Finfo" provides the following functions and/or methods:

   <b>"atime"</b>
       Get the time the file was last accessed:

         $atime = $finfo-&gt;atime;

       obj: $finfo ( "APR::Finfo object" )
       return: $atime ( integer )
           Last access time in seconds since the epoch

       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[8]

       Note  that  this  method  may  not  be reliable on all platforms, most notably Win32 -- FAT32 filesystems
       appear to work properly, but NTFS filesystems do not.

   <b>"csize"</b>
       Get the storage size consumed by the file

         $csize = $finfo-&gt;csize;

       obj: $finfo ( "APR::Finfo object" )
       return: $csize ( integer )
       since: 2.0.00

       Chances are that you don't want to use this method, since its functionality  is  not  supported  on  most
       platforms (in which case it always returns 0).

   <b>"ctime"</b>
       Get the time the file was last changed

         $ctime = $finfo-&gt;ctime;

       obj: $finfo ( "APR::Finfo object" )
       return: $ctime ( integer )
           Inode change time in seconds since the epoch

       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[10]

       The ctime field is non-portable.  In particular, you cannot expect it to be a "creation time", see "Files
       and Filesystems" in the <u>perlport</u> manpage for details.

   <b>"device"</b>
       Get the id of the device the file is on.

         $device = $finfo-&gt;device;

       obj: $finfo ( "APR::Finfo object" )
       return: $device ( integer )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[0]

       Note that this method is non-portable. It doesn't work on all platforms, most notably Win32.

   <b>"filetype"</b>
       Get the type of file.

         $filetype = $finfo-&gt;filetype;

       obj: $finfo ( "APR::Finfo object" )
       return: $filetype ( ":filetype constant" )
       since: 2.0.00

       For example:

         use APR::Pool;
         use APR::Finfo;
         use APR::Const -compile =&gt; qw(FILETYPE_DIR FILETYPE_REG FINFO_NORM);
         my $pool  = APR::Pool-&gt;new();
         my $finfo = APR::Finfo::stat("<a href="file:/tmp">/tmp</a>", APR::Const::FINFO_NORM, $pool);
         my $finfo = $finfo-&gt;filetype;
         if ($finfo == APR::Const::FILETYPE_REG) {
             print "regular file";
         }
         elsif ($finfo == APR::Const::FILETYPE_REG) {
             print "directory";
         }
         else {
             print "other file";
         }

       Since <u><a href="file:/tmp">/tmp</a></u> is a directory, this will print:

         directory

   <b>"fname"</b>
       Get the pathname of the file (possibly unrooted)

         $fname = $finfo-&gt;fname;

       obj: $finfo ( "APR::Finfo object" )
       return: $filetype ( string )
       since: 2.0.00

   <b>"group"</b>
       Get the group id that owns the file:

         $gid = $finfo-&gt;group;

       obj: $finfo ( "APR::Finfo object" )
       return: $gid ( number )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[5]

       Note that this method may not be meaningful on all platforms, most notably Win32.  Incorrect results have
       also been reported on some versions of OSX.

   <b>"inode"</b>
       Get the inode of the file.

         $inode = $finfo-&gt;inode;

       obj: $finfo ( "APR::Finfo object" )
       return: $inode ( integer )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[1]

       Note that this method may not be meaningful on all platforms, most notably Win32.

   <b>"mtime"</b>
       The time the file was last modified

         $mtime = $finfo-&gt;mtime;

       obj: $finfo ( "APR::Finfo object" )
       return: $mtime ( integer )
           Last modify time in seconds since the epoch

       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[9]

   <b>"name"</b>
       Get the file's name (no path) in filesystem case:

         $name = $finfo-&gt;name;

       obj: $finfo ( "APR::Finfo object" )
       return: $device ( string )
       since: 2.0.00

   <b>"nlink"</b>
       Get the number of hard links to the file.

         $nlink = $finfo-&gt;nlink;

       obj: $finfo ( "APR::Finfo object" )
       return: $nlink ( integer )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[3]

   <b>"protection"</b>
       Get the access permissions of the file.  Mimics Unix access rights.

         $prot = $finfo-&gt;protection;

       obj: $finfo ( "APR::Finfo object" )
       return: $prot ( ":fprot constant" )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[2]

       Note: Perl's stat returns an octal number while mod_perl's "protection" returns a hex number.

       See perldoc -f stat and APR's file_io for more information on each.

   <b>"size"</b>
       Get the size of the file

         $size = $finfo-&gt;size;

       obj: $finfo ( "APR::Finfo object" )
       return: $size ( integer )
           Total size of file, in bytes

       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[7]

   <b>"stat"</b>
       Get the specified file's stats.

         $finfo = APR::Finfo::stat($fname, $wanted_fields, $p);

       arg1: $fname ( string )
           The path to the file to stat().

       arg2: $wanted_fields ( ":finfo constant" )
           The desired fields, as a bitmask flag of "APR::FINFO_*" constants.

           Notice  that you can also use the constants that already combine several elements in one. For example
           "APR::Const::FINFO_PROT" asks for all protection bits, "APR::Const::FINFO_MIN" asks for the following
           fields: type, mtime, ctime, atime,  size  and  "APR::Const::FINFO_NORM"  asks  for  all  atomic  unix
           apr_stat() fields (similar to perl's stat()).

       arg3: $p ( "APR::Pool object" )
           the pool to use to allocate the file stat structure.

       ret: $finfo ( "APR::Finfo object" )
       since: 2.0.00

       For example, here is how to get most of the "stat" fields:

         use APR::Pool ();
         use APR::Finfo ();
         use APR::Const -compile =&gt; qw(FINFO_NORM);
         my $pool = APR::Pool-&gt;new();
         my $finfo = APR::Finfo::stat("/tmp/test", APR::Const::FINFO_NORM, $pool);

   <b>"user"</b>
       Get the user id that owns the file:

         $uid = $finfo-&gt;user;

       obj: $finfo ( "APR::Finfo object" )
       return: $uid ( number )
       since: 2.0.00

       This method returns the same value as Perl's:

         (stat $filename)[4]

       Note that this method may not be meaningful on all platforms, most notably Win32.

   <b>"valid"</b>
       The bitmask describing valid fields of this apr_finfo_t structure including all available 'wanted' fields
       and potentially more

         $valid = $finfo-&gt;valid;

       obj: $finfo ( "APR::Finfo object" )
       arg1: $valid ( bitmask )
           This bitmask flag should be bit-OR'ed against ":finfo constant" constants.

       since: 2.0.00

</pre><h4><b>See</b> <b>Also</b></h4><pre>
       mod_perl 2.0 documentation.

</pre><h4><b>Copyright</b></h4><pre>
       mod_perl 2.0 and its core modules are copyrighted under The Apache Software License, Version 2.0.

</pre><h4><b>Authors</b></h4><pre>
       The mod_perl development team and numerous contributors.

perl v5.40.0                                       2024-10-20             <u>libapache2-mod-...api::APR::<a href="../man3pm/Finfo.3pm.html">Finfo</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>