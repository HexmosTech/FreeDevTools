<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plack::App::URLMap - Map multiple apps in different paths</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libplack-perl">libplack-perl_1.0051-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Plack::App::URLMap - Map multiple apps in different paths

</pre><h4><b>SYNOPSIS</b></h4><pre>
         use Plack::App::URLMap;

         my $app1 = sub { ... };
         my $app2 = sub { ... };
         my $app3 = sub { ... };

         my $urlmap = Plack::App::URLMap-&gt;new;
         $urlmap-&gt;map("/" =&gt; $app1);
         $urlmap-&gt;map("/foo" =&gt; $app2);
         $urlmap-&gt;map("<a href="http://bar.example.com/">http://bar.example.com/</a>" =&gt; $app3);

         my $app = $urlmap-&gt;to_app;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Plack::App::URLMap is a PSGI application that can dispatch multiple applications based on URL path and
       host names (a.k.a "virtual hosting") and takes care of rewriting "SCRIPT_NAME" and "PATH_INFO" (See "HOW
       THIS WORKS" for details). This module is inspired by Ruby's Rack::URLMap.

</pre><h4><b>METHODS</b></h4><pre>
       map
             $urlmap-&gt;map("/foo" =&gt; $app);
             $urlmap-&gt;map("<a href="http://bar.example.com/">http://bar.example.com/</a>" =&gt; $another_app);

           Maps URL path or an absolute URL to a PSGI application. The match order is sorted by host name length
           and then path length (longest strings first).

           URL  paths  need to match from the beginning and should match completely until the path separator (or
           the end of the path). For example, if you register the path "/foo", it <u>will</u> match  with  the  request
           "/foo", "/foo/" or "/foo/bar" but it <u>won't</u> match with "/foox".

           Mapping  URLs with host names is also possible, and in that case the URL mapping works like a virtual
           host.

           Mappings will nest.  If $app is already mapped to "/baz" it will match a request for  "/foo/baz"  but
           not "/foo". See "HOW THIS WORKS" for more details.

       mount
           Alias for "map".

       to_app
             my $handler = $urlmap-&gt;to_app;

           Returns  the PSGI application code reference. Note that the Plack::App::URLMap object is callable (by
           overloading the code dereference), so returning the object itself as a PSGI application  should  also
           work.

</pre><h4><b>PERFORMANCE</b></h4><pre>
       If  you  "map"  (or  "mount" with Plack::Builder) N applications, Plack::App::URLMap will need to at most
       iterate through N paths to match incoming requests.

       It is a good idea to use "map" only for a known, limited amount of applications, since mounting  hundreds
       of applications could affect runtime request performance.

</pre><h4><b>DEBUGGING</b></h4><pre>
       You  can  set  the environment variable "PLACK_URLMAP_DEBUG" to see how this application matches with the
       incoming request host names and paths.

</pre><h4><b>HOW</b> <b>THIS</b> <b>WORKS</b></h4><pre>
       This application works by <u>fixing</u> "SCRIPT_NAME" and "PATH_INFO" before dispatching the incoming request to
       the relocated applications.

       Say you have a Wiki application that takes "/index" and "/page/*" and makes a PSGI application  $wiki_app
       out of it, using one of supported web frameworks, you can put the whole application under "/wiki" by:

         # MyWikiApp looks at PATH_INFO and handles /index and /page/*
         my $wiki_app = sub { MyWikiApp-&gt;run(@_) };

         use Plack::App::URLMap;
         my $app = Plack::App::URLMap-&gt;new;
         $app-&gt;mount("/wiki" =&gt; $wiki_app);

       When  a request comes in with "PATH_INFO" set to "/wiki/page/foo", the URLMap application $app strips the
       "/wiki" part from "PATH_INFO" and <b>appends</b> that to "SCRIPT_NAME".

       That way, if the $app is mounted under the root (i.e. "SCRIPT_NAME" is "") with  standalone  web  servers
       like  Starman, "SCRIPT_NAME" is now locally set to "/wiki" and "PATH_INFO" is changed to "/page/foo" when
       $wiki_app gets called.

</pre><h4><b>AUTHOR</b></h4><pre>
       Tatsuhiko Miyagawa

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Plack::Builder

perl v5.38.2                                       2024-01-20                            <u>Plack::App::<a href="../man3pm/URLMap.3pm.html">URLMap</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>