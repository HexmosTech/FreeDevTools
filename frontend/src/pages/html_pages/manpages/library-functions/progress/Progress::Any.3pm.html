<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress::Any - Record progress to any output</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libprogress-any-perl">libprogress-any-perl_0.220-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Progress::Any - Record progress to any output

</pre><h4><b>VERSION</b></h4><pre>
       This document describes version 0.220 of Progress::Any (from Perl distribution Progress-Any), released on
       2022-10-18.

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Example of using in a script with terminal progress bar as output (progress bar will be cleared on
       "finish()") (you'll need to install Progress::Any::Output::TermProgressBarColor as well):

        use Progress::Any '$progress';
        use Progress::Any::Output 'TermProgressBarColor';

        $progress-&gt;<a href="../man10/target.10.html">target</a>(10);
        for (1..10) {
            $progress-&gt;update(message =&gt; "Doing item $_");
            sleep 1;
        }
        $progress-&gt;finish();

       Sample output:

        % ./script.pl
         60% [Doing item 6====           ]3s left

       Another example, this time with terminal message as output:

        use Progress::Any '$progress';
        use Progress::Any::Output 'TermMessage', template =&gt; '[%n] %P/%T (%6.2p%%) %m';

        $progress-&gt;<a href="../man10/target.10.html">target</a>(10);
        for (1..10) {
            $progress-&gt;update(message =&gt; "Item $_/10");
            sleep 1;
        }
        sleep 1;
        $progress-&gt;finish(message =&gt; "Finished!");

       Sample output:

        % ./script.pl
        [] 1/10 ( 10.00%) Item 1/10
        [] 2/10 ( 20.00%) Item 2/10
        ...
        [] 10/10 (100.00%) Item 10/10
        [] 10/10 (100.00%) Finished!

       Example of using in a module as well as script:

        # in lib/MyApp.pm
        package MyApp;
        use Progress::Any;

        sub download {
            my @urls = @_;
            return unless @urls;
            my $progress = Progress::Any-&gt;get_indicator(
                task =&gt; "download", pos=&gt;0, target=&gt;scalar @urls);
            for my $url (@urls) {
                # download the $url ...
                $progress-&gt;update(message =&gt; "Downloaded $url");
            }
            $progress-&gt;finish;
        }

        # in script.pl
        use MyApp;
        use Progress::Any::Output;
        Progress::Any::Output-&gt;set('TermProgressBarColor');

        MyApp::download("url1", "url2", "url3", "url4", "url5");

       Sample output:

        % ./script.pl
         20% [====== Downloaded url1           ]0m00s Left

       Example that demonstrates multiple indicator objects:

        use Progress::Any;
        use Progress::Any::Output;

        my $pdl = Progress::Any-&gt;get_indicator(task =&gt; 'download');
        Progress::Any::Output-&gt;set({task=&gt;'download'}, 'TermMessage', template =&gt; '[%-8t] [%P/%2T] %m');
        my $pcp = Progress::Any-&gt;get_indicator(task =&gt; 'copy');
        Progress::Any::Output-&gt;set({task=&gt;'copy'    }, 'TermMessage', template =&gt; '[%-8t] [%P/%2T] %m');

        $pdl-&gt;<a href="../man10/target.10.html">target</a>(10);
        $pdl-&gt;update(message =&gt; "downloading A");
        $pcp-&gt;update(message =&gt; "copying A");
        sleep 1;
        $pdl-&gt;update(message =&gt; "downloading B");
        $pcp-&gt;update(message =&gt; "copying B");

       will show something like:

        [download] [1/10] downloading A
        [copy    ] [1/ ?] copying A
        [download] [2/10] downloading B
        [copy    ] [2/ ?] copying B

   <b>Example</b> <b>of</b> <b>using</b> <b>with</b> <b>Perinci::CmdLine</b>
       If you use Perinci::CmdLine, you can mark your function as expecting a Progress::Any object and it will
       be supplied to you in a special argument "-progress":

        use File::chdir;
        use Perinci::CmdLine;
        $SPEC{check_dir} = {
            v =&gt; 1.1,
            args =&gt; {
                dir =&gt; {summary=&gt;"Path to check", schema=&gt;"str*", req=&gt;1, pos=&gt;0},
            },
            features =&gt; {progress=&gt;1},
        };
        sub check_dir {
            my %args = @_;
            my $progress = $args{-progress};
            my $dir = $args{dir};
            (-d $dir) or return [412, "No such dir: $dir"];
            local $CWD = $dir;
            opendir my($dh), $dir;
            my @ent = readdir($dh);
            $progress-&gt;<a href="../man0/pos.0.html">pos</a>(0);
            $progress-&gt;target(scalar @ent);
            for (@ent) {
                # do the check ...
                $progress-&gt;update(message =&gt; $_);
                sleep 1;
            }
            $progress-&gt;finish;
            [200];
        }
        Perinci::CmdLine-&gt;new(url =&gt; '/main/check_dir')-&gt;run;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       "Progress::Any" is an interface for applications that want to display progress to users. It decouples
       progress updating and output, rather similar to how Log::Any decouples log producers and consumers
       (output). The API is also rather similar to Log::Any, except <u>Adapter</u> is called <u>Output</u> and <u>category</u> is
       called <u>task</u>.

       Progress::Any records position/target and calculates elapsed time, estimated remaining time, and
       percentage of completion. One or more output modules (Progress::Any::Output::*) display this information.

       In your modules, you typically only need to use Progress::Any, get one or more indicators, set target and
       update it during work. In your application, you use Progress::Any::Output and set/add one or more outputs
       to display the progress (you'll need to install one of the output modules as they are not included in
       this minimal distribution). By setting output only in the application and not in modules, you separate
       the formatting/display concern from the logic.

       Screenshots:

</pre><h4><b>STATUS</b></h4><pre>
       API might still change, will be stabilized in 1.0.

       The list of features:

       •   multiple progress indicators

           You can use different indicator for each task/subtask.

       •   customizable output

           Output  is  handled by one of "Progress::Any::Output::*" modules. Currently available outputs: "Null"
           (no output), "TermMessage" (display as simple message on terminal),  "TermProgressBarColor"  (display
           as  color  progress  bar on terminal), "LogAny" (log using Log::Any), "Callback" (call a subroutine).
           Other possible output ideas: IM/Twitter/SMS, GUI, web/AJAX, remote/RPC (over  Riap  for  example,  so
           that Perinci::CmdLine-based command-line clients can display progress update from remote functions).

       •   multiple outputs

           One or more outputs can be used to display one or more indicators.

       •   hierarchical progress

           A task can be divided into subtasks. If a subtask is updated, its parent task (and its parent, and so
           on) are also updated proportionally.

       •   message

           Aside from setting a number/percentage, allow including a message when updating indicator.

       •   undefined target

           Target can be undefined, so a bar output might not show any bar (or show them, but without percentage
           indicator), but can still show messages.

       •   retargetting

           Target can be changed in the middle of things.

</pre><h4><b>EXPORTS</b></h4><pre>
   <b>$progress</b> <b>=&gt;</b> <b>OBJ</b>
       The root indicator. Equivalent to:

        Progress::Any-&gt;get_indicator(task =&gt; '')

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       Below are the attributes of an indicator/task:

   <b>task</b>
       String. Default: from caller's package, or "main".

       Task name. If not specified will be set to caller's package ("::" will be replaced with "."), e.g. if you
       are  calling  this  method  from "Foo::Bar::baz()", then task will be set to "Foo.Bar". If caller is code
       inside eval, "main" will be used instead.

   <b>title</b>
       String. Default: task name.

       Specify task title. Task title is a longer description for a  task  and  can  contain  spaces  and  other
       characters. It is displayed in some outputs, as well as using %t in "fill_template()". For example, for a
       task called "copy", its title might be "Copying files to remote server".

   <b>target</b>
       Non-negative number. Default: 0.

       The  total number of items to finish. Can be set to undef to mean that we don't know (yet) how many items
       there are to finish (in which case, we cannot estimate percent of completion and remaining time).

   <b>pos</b>
       Non-negative number. Default: 0.

       The number of items that are already done. It cannot be larger than "target", if "target" is defined.  If
       "target" is set to a value smaller than "pos" or "pos" is set to a value larger than "target", "pos" will
       be changed to be "target".

   <b>state</b>
       String. Default: "stopped".

       State  of  task/indicator.  Either:  "stopped",  "started",  or  "finished".  Initially it will be set to
       "stopped", which means elapsed time won't be running and will stay at 0. "update()" will set the state to
       "started" to get elapsed time to run. At the end of task, you can call "finish()" (or  alternatively  set
       "state" to "finished") to stop the elapsed time again.

       The  difference  between  "stopped"  and  "finished"  is:  when "target" and "pos" are both at 0, percent
       completed is assumed to be 0% when state is "stopped", but 100% when state is "finished".

</pre><h4><b>METHODS</b></h4><pre>
   <b>get_indicator</b>
       Usage:

        Progress::Any-&gt;get_indicator(%args) =&gt; obj

       Get a progress indicator for a certain task. %args contain attribute values,  at  least  "task"  must  be
       specified.

       Note  that  this  module  maintains  a  list of indicator singleton objects for each task (in %indicators
       package variable), so subsequent "get_indicator()" for the same task will return the same object.

   <b>update</b>
       Usage:

        $progress-&gt;update(%args)

       Update indicator. Will also, usually, update associated output(s) if necessary.

       Arguments:

       •   pos =&gt; NUM

           Set the new position. If unspecified, defaults to current position + 1. If pos is larger than target,
           outputs will generally still show 100%. Note that fractions are allowed.

       •   message =&gt; str|code

           Set a message to be displayed when updating indicator.

           Aside from a string, you can also pass a coderef here. It can be used to  delay  costly  calculation.
           The message will only be calculated when actually sent to output.

       •   priority =&gt; str ("normal"|"low"|"high", default: "normal")

           Set  importance  level of this update. Default is "normal". Output can choose to ignore updates lower
           than a certain level.

       •   state =&gt; STR

           Can be set to "finished" to finish a task.

       •   force_update =&gt; BOOL

           Default false. Some outputs choose only to update themselves after a certain amount of time or number
           of updates have passed; this forces their update.

   <b>finish</b>
       Usage:

        $progress-&gt;finish(%args)

       Equivalent to:

        $progress-&gt;update(
            ( pos =&gt; $progress-&gt;target ) x !!defined($progress-&gt;target),
            state =&gt; 'finished',
            %args,
        );

   <b>reset</b>
       Usage:

        $progress-&gt;reset(%args)

       Equivalent to:

        $progress-&gt;update(
            pos =&gt; 0,
            state =&gt; 'started',
            %args,
        );

   <b>start</b>
       Usage:

        $progress-&gt;start()

       Set state to "started".

   <b>stop</b>
       Usage:

        $progress-&gt;stop()

       Set state to "stopped".

   <b>elapsed</b>
       Usage:

        $progress-&gt;elapsed() =&gt; float

       Get elapsed time. Just like a stop-watch, when state is "started" elapsed time will run and when state is
       "stopped", it will freeze.

   <b>remaining</b>
       Usage:

        $progress-&gt;remaining() =&gt; undef|float

       Give estimated remaining time until task is finished, which will depend on how  fast  the  "update()"  is
       called, i.e. how fast "pos" is approaching "target".  Will be undef if "target" is undef.

   <b>total_remaining</b>
       Usage:

        $progress-&gt;total_remaining() =&gt; undef|FLOAT

       Give estimated remaining time added by all its subtasks' remaining. Return undef if any one of those time
       is undef.

   <b>total_pos</b>
       Usage:

        $progress-&gt;total_pos() =&gt; float

       Total of indicator's pos and all of its subtasks'.

   <b>total_target</b>
       Usage:

        $progress-&gt;total_target() =&gt; undef|float

       Total of indicator's target and all of its subtasks'. Return undef if any one of those is undef.

   <b>percent_complete</b>
       Usage:

        $progress-&gt;percent_complete() =&gt; undef|float

       Give  percentage  of completion, calculated using "total_pos / total_target * 100". Undef if total_target
       is undef.

   <b>fill_template</b>
       Usage:

        $progress-&gt;fill_template($template) =&gt; str

       Fill template with values, like in "sprintf()". Usually used by output modules.  Available templates:

       •   "%(width)n"

           Task name (the value of the "task" attribute). "width" is optional, an integer, like in  "sprintf()",
           can be negative to mean left-justify instead of right.

       •   "%(width)t"

           Task title (the value of the "title" attribute).

       •   "%(width)e"

           Elapsed time (the result from the "elapsed()" method). Currently using Time::Duration concise format,
           e.g.  10s,  1m40s,  16m40s,  1d4h,  and  so  on.  Format might be configurable and localizable in the
           future. Default width is -8.  Examples:

            2m30s
            10s

       •   "%(width)r"

           Estimated  remaining  time  (the  result  of  the  "total_remaining()"  method).    Currently   using
           Time::Duration  concise  format,  e.g. 10s, 1m40s, 16m40s, 1d4h, and so on. Will show "?" if unknown.
           Format might be configurable and localizable in the future. Default width is -8. Examples:

            1m40s
            5s

       •   "%(width)R"

           Estimated remaining time <u>or</u> elapsed time, if estimated remaining time is not calculatable (e.g.  when
           target  is  undefined).  Format might be configurable and localizable in the future. Default width is
           -(8+1+7). Examples:

            30s left
            1m40s elapsed

       •   "%(width).(prec)p"

           Percentage of completion (the result of the "percent_complete()" method).   "width"  and  "precision"
           are  optional,  like  %f  in Perl's "sprintf()", default is "%3.0p". If percentage is unknown (due to
           target being undef), will show "?".

       •   "%(width)P"

           Current position (the result of the "total_pos()" method).

       •   "%(width)T"

           Target (the result of the "total_target()" method). If undefined, will show "?".

       •   %m

           Message (the "update()" parameter). If message is unspecified, will show empty string.

       •   "%%"

           A literal "%" sign.

</pre><h4><b>FAQ</b></h4><pre>
</pre><h4><b>ENVIRONMENT</b></h4><pre>
   <b>PROGRESS</b>
       Boolean. Default 1. Can be set to 0 to supress display progress output.

</pre><h4><b>HOMEPAGE</b></h4><pre>
       Please visit the project's homepage at &lt;https://metacpan.org/release/Progress-Any&gt;.

</pre><h4><b>SOURCE</b></h4><pre>
       Source repository is at &lt;https://github.com/perlancar/perl-Progress-Any&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       Progress::Any::Examples distribution contains example scripts.

       Other progress modules  on  CPAN:  Term::ProgressBar,  Term::ProgressBar::Simple,  Time::Progress,  among
       others.

       Output  modules:  "Progress::Any::Output::*".  You  need  to  install at least one module to actually see
       progress being outputted/displayed somewhere, e.g. &lt;&gt; to Progress::Any::Output::TermProgressBarColor.

       See examples on how Progress::Any is used by other modules: Perinci::CmdLine (supplying  progress  object
       to functions), Git::Bunch (using progress object).

</pre><h4><b>AUTHOR</b></h4><pre>
       perlancar &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;

</pre><h4><b>CONTRIBUTOR</b></h4><pre>
       Steven Haryanto &lt;<a href="mailto:stevenharyanto@gmail.com">stevenharyanto@gmail.com</a>&gt;

</pre><h4><b>CONTRIBUTING</b></h4><pre>
       To contribute, you can send patches by email/via RT, or send pull requests on GitHub.

       Most of the time, you don't need to build the distribution yourself. You can simply modify the code, then
       test via:

        % prove -l

       If you want to build the distribution (e.g. to try to install it locally on your system), you can install
       Dist::Zilla,  Dist::Zilla::PluginBundle::Author::PERLANCAR, Pod::Weaver::PluginBundle::Author::PERLANCAR,
       and sometimes one or two other Dist::Zilla- and/or Pod::Weaver plugins.  Any  additional  steps  required
       beyond that are considered a bug and can be reported to me.

</pre><h4><b>COPYRIGHT</b> <b>AND</b> <b>LICENSE</b></h4><pre>
       This   software   is   copyright   (c)   2022,   2020,   2018,   2015,  2014,  2013,  2012  by  perlancar
       &lt;<a href="mailto:perlancar@cpan.org">perlancar@cpan.org</a>&gt;.

       This is free software; you can redistribute it and/or modify it under  the  same  terms  as  the  Perl  5
       programming language system itself.

</pre><h4><b>BUGS</b></h4><pre>
       Please     report     any     bugs     or     feature     requests     on    the    bugtracker    website
       &lt;https://rt.cpan.org/Public/Dist/Display.html?Name=Progress-Any&gt;

       When submitting a bug or request, please include a test-file or a patch to  an  existing  test-file  that
       illustrates the bug or desired feature.

perl v5.36.0                                       2022-10-30                                 <u>Progress::<a href="../man3pm/Any.3pm.html">Any</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>