<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tar - Tar file creation, extraction & manipulation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/tcllib">tcllib_2.0+dfsg-4_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tar - Tar file creation, extraction &amp; manipulation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       package require <b>Tcl</b> <b>8.5</b> <b>9</b>

       package require <b>tar</b> <b>?0.13?</b>

       <b>::tar::contents</b> <u>tarball</u> ?<b>-chan</b>? ?<b>-gzip</b>?

       <b>::tar::stat</b> <u>tarball</u> ?file? ?<b>-chan</b>? ?<b>-gzip</b>?

       <b>::tar::untar</b> <u>tarball</u> <u>args</u>

       <b>::tar::get</b> <u>tarball</u> <u>fileName</u> ?<b>-chan</b>? ?<b>-gzip</b>?

       <b>::tar::create</b> <u>tarball</u> <u>files</u> <u>args</u>

       <b>::tar::add</b> <u>tarball</u> <u>files</u> <u>args</u>

       <b>::tar::remove</b> <u>tarball</u> <u>files</u>

________________________________________________________________________________________________________________

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>Note</u>:  Starting  with  version  0.8 the tar reader commands (contents, stats, get, untar) support the GNU
       LongName extension (header type Â´L') for large paths.

</pre><h4><b>BEWARE</b></h4><pre>
       For all commands, when using <b>-chan</b> ...

       [1]    It is assumed that the channel was opened for reading, and configured for binary input.

       [2]    It is assumed that the channel position is at the beginning of a legal tar file.

       [3]    The commands will <u>modify</u> the channel position as they perform their task.

       [4]    The commands will <u>not</u> close the channel.

       [5]    In other words, the commands leave the channel in a  state  very  likely  unsuitable  for  use  by
              further <b>tar</b> commands. Still doing so will very likely results in errors, bad data, etc. pp.

       [6]    It is the responsibility of the user to seek the channel back to a suitable position.

       [7]    When  using  a channel transformation which is not generally seekable, for example <b>gunzip</b>, then it
              is the responsibility of the user to (a) unstack the transformation  before  seeking  the  channel
              back to a suitable position, and (b) for restacking it after.

       Regarding support for gzip compression:

       [1]    Errors  are  thrown when attempting to read from compressed tar archives while compression support
              (i.e. <b>::zlib</b>) is not available.

       [2]    Errors are thrown when attempting  to  read  an  uncompressed  tar  archive  when  compression  is
              requested by the user (<b>-gzip</b>).

              No  errors  are  thrown  when attempting to read a compressed tar archive when compression was not
              requested, and is supported. In that case the commands automatically activate  the  code  handling
              the compression.

       [3]    Errors are thrown when attempting to edit compressed tar archives.  See the commands <b>tar::add</b>, and
              <b>tar::remove</b>.  This is not supported.

       [4]    Creation of compressed tar archives however is supported, as this sequentially writes the archive,
              allowing for streaming compression.

</pre><h4><b>COMMANDS</b></h4><pre>
       <b>::tar::contents</b> <u>tarball</u> ?<b>-chan</b>? ?<b>-gzip</b>?
              Returns a list of the files contained in <u>tarball</u>. The order is not sorted and depends on the order
              files were stored in the archive.

              If  the option <b>-chan</b> is present <u>tarball</u> is interpreted as an open channel.  It is assumed that the
              channel was opened for reading, and configured for binary input.  The command will <u>not</u>  close  the
              channel.

       <b>::tar::stat</b> <u>tarball</u> ?file? ?<b>-chan</b>? ?<b>-gzip</b>?
              Returns  a nested dict containing information on the named ?file? in <u>tarball</u>, or all files if none
              is specified. The top level are pairs of filename and info. The info is a dict with the keys "<b>mode</b>
              <b>uid</b> <b>gid</b> <b>size</b> <b>mtime</b> <b>type</b> <b>linkname</b> <b>uname</b> <b>gname</b> <b>devmajor</b> <b>devminor</b>"

              % ::tar::stat tarball.tar
              foo.jpg {mode 0644 uid 1000 gid 0 size 7580 mtime 811903867 type file linkname {} uname user gname wheel devmajor 0 devminor 0}

       If the option <b>-chan</b> is present <u>tarball</u> is interpreted as an open channel.  It is assumed that the channel
       was opened for reading, and configured for binary input.  The command will <u>not</u> close the channel.

       <b>::tar::untar</b> <u>tarball</u> <u>args</u>
              Extracts <u>tarball</u>. <u>-file</u> and <u>-glob</u> limit the extraction to files which  exactly  match  or  pattern
              match  the  given  argument.  No  error  is  thrown if no files match. Returns a list of filenames
              extracted and the file size. The size will be null for non regular files. Leading path  seperators
              are stripped so paths will always be relative.

              <b>-dir</b> dirName
                     Directory to extract to. Uses <b>pwd</b> if none is specified

              <b>-file</b> fileName
                     Only  extract the file with this name. The name is matched against the complete path stored
                     in the archive including directories.

              <b>-glob</b> pattern
                     Only extract files patching this glob style pattern. The pattern  is  matched  against  the
                     complete path stored in the archive.

              <b>-nooverwrite</b>
                     Dont overwrite files that already exist

              <b>-nomtime</b>
                     Leave  the file modification time as the current time instead of setting it to the value in
                     the archive.

              <b>-noperms</b>
                     In Unix, leave the file permissions as the current umask instead of  setting  them  to  the
                     values in the archive.

              <b>-chan</b>  If  this  option  is present <u>tarball</u> is interpreted as an open channel.  It is assumed that
                     the channel was opened for reading, and configured for binary input.  The command will  <u>not</u>
                     close the channel.

              % foreach {file size} [::tar::untar tarball.tar -glob *.jpg] {
              puts "Extracted $file ($size bytes)"
              }

       <b>::tar::get</b> <u>tarball</u> <u>fileName</u> ?<b>-chan</b>? ?<b>-gzip</b>?
              Returns the contents of <u>fileName</u> from the <u>tarball</u>.

              % set readme [::tar::get tarball.tar doc/README] {
              % puts $readme
              }

       If the option <b>-chan</b> is present <u>tarball</u> is interpreted as an open channel.  It is assumed that the channel
       was opened for reading, and configured for binary input.  The command will <u>not</u> close the channel.

       An error is thrown when <u>fileName</u> is not found in the tar archive.

       <b>::tar::create</b> <u>tarball</u> <u>files</u> <u>args</u>
              Creates a new tar file containing the <u>files</u>. <u>files</u> must be specified as a single argument which is
              a proper list of filenames.

              <b>-dereference</b>
                     Normally  <b>create</b>  will store links as an actual link pointing at a file that may or may not
                     exist in the archive. Specifying this option will cause the actual file  point  to  by  the
                     link to be stored instead.

              <b>-chan</b>  If  this  option  is present <u>tarball</u> is interpreted as an open channel.  It is assumed that
                     the channel was opened for writing, and configured for binary output.  The command will <u>not</u>
                     close the channel.

              % ::tar::create new.tar [glob -nocomplain file*]
              % ::tar::contents new.tar
              file1 file2 file3

       <b>::tar::add</b> <u>tarball</u> <u>files</u> <u>args</u>
              Appends <u>files</u> to the end of the existing <u>tarball</u>. <u>files</u> must be specified  as  a  single  argument
              which is a proper list of filenames.

              <b>-dereference</b>
                     Normally  <b>add</b>  will  store  links  as an actual link pointing at a file that may or may not
                     exist in the archive. Specifying this option will cause the actual file  point  to  by  the
                     link to be stored instead.

              <b>-prefix</b> string
                     Normally  <b>add</b>  will  store files under exactly the name specified as argument. Specifying a
                     ?-prefix? causes the <u>string</u> to be prepended to every name.

              <b>-quick</b> The only sure way to find the position in the <u>tarball</u> where new files can be  added  is  to
                     read  it  from  start,  but if <u>tarball</u> was written with a "blocksize" of 1 (as this package
                     does) then one can alternatively find this position by seeking from the end.  The  ?-quick?
                     option tells <b>add</b> to do the latter.

       <b>::tar::remove</b> <u>tarball</u> <u>files</u>
              Removes  <u>files</u>  from  the <u>tarball</u>. No error will result if the file does not exist in the tarball.
              Directory write permission and free disk space equivalent to at least the size of the tarball will
              be needed.

              % ::tar::remove new.tar {file2 file3}
              % ::tar::contents new.tar
              file3

</pre><h4><b>BUGS,</b> <b>IDEAS,</b> <b>FEEDBACK</b></h4><pre>
       This document, and the package it describes, will undoubtedly contain bugs and  other  problems.   Please
       report  such  in  the category <u>tar</u> of the <u>Tcllib</u> <u>Trackers</u> [<a href="http://core.tcl.tk/tcllib/reportlist">http://core.tcl.tk/tcllib/reportlist</a>].  Please
       also report any ideas for enhancements you may have for either package and/or documentation.

       When proposing code changes, please provide <u>unified</u> <u>diffs</u>, i.e the output of <b>diff</b> <b>-u</b>.

       Note further that <u>attachments</u> are strongly preferred over inlined patches. Attachments  can  be  made  by
       going  to the <b>Edit</b> form of the ticket immediately after its creation, and then using the left-most button
       in the secondary navigation bar.

</pre><h4><b>KEYWORDS</b></h4><pre>
       archive, tape archive, tar

</pre><h4><b>CATEGORY</b></h4><pre>
       File formats

tcllib                                                0.13                                             <u><a href="../man3tcl/tar.3tcl.html">tar</a></u>(3tcl)
</pre>
 </div>
</div></section>
</div>
</body>
</html>