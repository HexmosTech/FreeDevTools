<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"IO::Async::Loop::Poll" - use "IO::Async" with "poll(2)"</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libio-async-perl">libio-async-perl_0.804-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "IO::Async::Loop::Poll" - use "IO::Async" with "<a href="../man2/poll.2.html">poll</a>(2)"

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Normally an instance of this class would not be directly constructed by a program. It may however, be
       useful for runinng IO::Async with an existing program already using an "IO::Poll" object.

          use IO::Poll;
          use IO::Async::Loop::Poll;

          my $poll = IO::Poll-&gt;new;
          my $loop = IO::Async::Loop::Poll-&gt;new( poll =&gt; $poll );

          $loop-&gt;add( ... );

          <a href="../man1/while.1.html">while</a>(1) {
             my $timeout = ...
             my $ret = $poll-&gt;poll( $timeout );
             $loop-&gt;post_poll;
          }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This subclass of IO::Async::Loop uses the <a href="../man2/poll.2.html">poll</a>(2) system call to perform read-ready and write-ready
       tests.

       By default, this loop will use the underlying poll() system call directly, bypassing the usual IO::Poll
       object wrapper around it because of a number of bugs and design flaws in that class; namely

       • &lt;https://rt.cpan.org/Ticket/Display.html?id=93107&gt;  -  IO::Poll  relies on stable stringification of IO
         handles

       • &lt;https://rt.cpan.org/Ticket/Display.html?id=25049&gt; - IO::Poll-&gt;<b>poll()</b> with no  handles  always  returns
         immediately

       However,  to  integrate  with  existing  code that uses an "IO::Poll" object, a "post_poll" can be called
       immediately after the "poll" method that "IO::Poll" object. The appropriate mask bits are  maintained  on
       the  "IO::Poll"  object  when  notifiers  are  added  or removed from the loop, or when they change their
       "want_*" status. The "post_poll" method inspects the result  bits  and  invokes  the  "on_read_ready"  or
       "on_write_ready" methods on the notifiers.

</pre><h4><b>CONSTRUCTOR</b></h4><pre>
   <b>new</b>
          $loop = IO::Async::Loop::Poll-&gt;new( %args );

       This  function  returns  a new instance of a "IO::Async::Loop::Poll" object. It takes the following named
       arguments:

       "poll"  The "IO::Poll" object to use for notification. Optional; if a value is not given, the  underlying
               IO::Poll::_poll() function is invoked directly, outside of the object wrapping.

</pre><h4><b>METHODS</b></h4><pre>
   <b>post_poll</b>
          $count = $loop-&gt;post_poll;

       This  method  checks  the  returned  event  list  from  a  "IO::Poll::poll"  call,  and  calls any of the
       notification methods or callbacks that are appropriate.  It returns the total number  of  callbacks  that
       were invoked; that is, the total number of "on_read_ready" and "on_write_ready" callbacks for "watch_io",
       and "watch_time" event callbacks.

   <b>loop_once</b>
          $count = $loop-&gt;loop_once( $timeout );

       This  method  calls  the "poll" method on the stored "IO::Poll" object, passing in the value of $timeout,
       and then runs the "post_poll" method on itself. It returns the total number of callbacks invoked  by  the
       "post_poll" method, or "undef" if the underlying "poll" method returned an error.

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.40.1                                       2025-05-17                         <u>IO::Async::Loop::<a href="../man3pm/Poll.3pm.html">Poll</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>