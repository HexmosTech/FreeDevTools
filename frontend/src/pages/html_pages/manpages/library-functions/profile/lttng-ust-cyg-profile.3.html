<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>lttng-ust-cyg-profile - Function tracing (LTTng-UST helper)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/liblttng-ust-dev">liblttng-ust-dev_2.13.9-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       lttng-ust-cyg-profile - Function tracing (LTTng-UST helper)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Compile your application with compiler option <b>-finstrument-functions</b>.

       Launch your application by preloading <b>liblttng-ust-cyg-profile-fast.so</b> for fast function tracing:

       $ <b>LD_PRELOAD=liblttng-ust-cyg-profile-fast.so</b> my-app

       Launch your application by preloading <b>liblttng-ust-cyg-profile.so</b> for slower, more verbose function
       tracing:

       $ <b>LD_PRELOAD=liblttng-ust-cyg-profile.so</b> my-app

</pre><h4><b>DESCRIPTION</b></h4><pre>
       When the <b>liblttng-ust-cyg-profile.so</b> or the <b>liblttng-ust-cyg-profile-fast.so</b> library is preloaded before
       a given application starts, all function entry and return points are traced by LTTng-UST (see <b><a href="../man3/lttngust.3.html">lttng-</a></b>
       <b><a href="../man3/lttngust.3.html">ust</a></b>(3)), provided said application was compiled with the <b>-finstrument-functions</b> compiler option.

       See <b><a href="../man1/lttng.1.html">lttng</a></b>(1) to learn more about how to control LTTng tracing sessions.

       Function tracing with LTTng-UST comes in two flavors, each one providing a different trade-off between
       performance and robustness:

       <b>liblttng-ust-cyg-profile-fast.so</b>
           This is a lightweight variant that should only be used where it can be <u>guaranteed</u> that the complete
           event stream is recorded without any missing events. Any kind of duplicate information is left out.

           At each function entry, the address of the called function is recorded in an LTTng-UST event.
           Function exits are recorded as another, empty LTTng-UST event.

           See the <u>Fast</u> <u>function</u> <u>tracing</u> section below for the complete list of emitted events and their fields.

       <b>liblttng-ust-cyg-profile.so</b>
           This is a more robust variant which also works for use cases where events might get discarded, or not
           recorded from application startup. In these cases, the trace analyzer needs extra information to be
           able to reconstruct the program flow.

           At each function entry <u>and</u> exit, the address of the called function <u>and</u> the call site address are
           recorded in an LTTng-UST event.

           See the <u>Verbose</u> <u>function</u> <u>tracing</u> section below for the complete list of emitted events and their
           fields.

   <b>Usage</b>
       To use LTTng-UST function tracing, you need to make sure the sources of your application are compiled
       with the <b>-finstrument-functions</b> compiler option.

       It might be necessary to limit the number of source files where this option is used to prevent excessive
       amount of trace data to be generated at run time. Usually, there are additional compiler flags that allow
       you to specify a more fine-grained selection of function instrumentation.

       For each instrumented function, the executable will contain calls to profiling function hooks (after
       function entry, named <b>__cyg_profile_func_enter()</b>, and just before function exit, named
       <b>__cyg_profile_func_exit()</b>).

       By preloading (using the <b>LD_PRELOAD</b> environment variable) one of the provided shared libraries, these
       profiling hooks get defined to emit LTTng events (as described below).

           <b>Note</b>

           Using this feature can result in a <b>massive</b> <b>amount</b> of trace data to be generated by the instrumented
           application. Application run time is also considerably affected. Be careful on systems with limited
           resources.

   <b>Fast</b> <b>function</b> <b>tracing</b>
       The following LTTng-UST events are available when using <b>liblttng-ust-cyg-profile-fast.so</b>. Their log level
       is set to <b>LTTNG_UST_TRACEPOINT_LOGLEVEL_DEBUG_FUNCTION</b>.

       <b>lttng_ust_cyg_profile_fast:func_entry</b>
           Emitted when an application function is entered, or more specifically, when
           <b>__cyg_profile_func_enter()</b> is called.

           Fields:
           ┌────────────┬───────────────────┐
           │ <b>Field</b> <b>name</b> │ <b>Description</b>       │
           ├────────────┼───────────────────┤
           │ <b>func_addr</b>  │ Function address. │
           └────────────┴───────────────────┘

       <b>lttng_ust_cyg_profile_fast:func_exit</b>
           Emitted when an application function returns, or more specifically, when <b>__cyg_profile_func_exit()</b> is
           called.

           This event has no fields. Since the <b>liblttng-ust-cyg-profile-fast.so</b> library should only be used when
           it can be guaranteed that the complete event stream is recorded without any missing events, a
           per-thread, stack-based approach can be used on the trace analyzer side to match function entry and
           return events.

   <b>Verbose</b> <b>function</b> <b>tracing</b>
       The following LTTng-UST events are available when using <b>liblttng-ust-cyg-profile.so</b>. Their log level is
       set to <b>LTTNG_UST_TRACEPOINT_LOGLEVEL_DEBUG_FUNCTION</b>.

       <b>lttng_ust_cyg_profile:func_entry</b>
           Emitted when an application function is entered, or more specifically, when
           <b>__cyg_profile_func_enter()</b> is called.

           Fields:
           ┌────────────┬──────────────────────────────────────┐
           │ <b>Field</b> <b>name</b> │ <b>Description</b>                          │
           ├────────────┼──────────────────────────────────────┤
           │ <b>func_addr</b>  │ Function address.                    │
           ├────────────┼──────────────────────────────────────┤
           │ <b>call_site</b>  │ Address from which this function was │
           │            │ called.                              │
           └────────────┴──────────────────────────────────────┘

       <b>lttng_ust_cyg_profile:func_exit</b>
           Emitted when an application function returns, or more specifically, when <b>__cyg_profile_func_exit()</b> is
           called.

           Fields:
           ┌────────────┬──────────────────────────────────────┐
           │ <b>Field</b> <b>name</b> │ <b>Description</b>                          │
           ├────────────┼──────────────────────────────────────┤
           │ <b>func_addr</b>  │ Function address.                    │
           ├────────────┼──────────────────────────────────────┤
           │ <b>call_site</b>  │ Address from which this function was │
           │            │ called.                              │
           └────────────┴──────────────────────────────────────┘

</pre><h4><b>BUGS</b></h4><pre>
       If you encounter any issue or usability problem, please report it on the LTTng bug tracker
       &lt;https://bugs.lttng.org/projects/lttng-ust&gt;.

</pre><h4><b>RESOURCES</b></h4><pre>
       •   LTTng project website &lt;<a href="http://lttng.org">http://lttng.org</a>&gt;

       •   LTTng documentation &lt;<a href="http://lttng.org/docs">http://lttng.org/docs</a>&gt;

       •   Git repositories &lt;<a href="http://git.lttng.org">http://git.lttng.org</a>&gt;

       •   GitHub organization &lt;<a href="http://github.com/lttng">http://github.com/lttng</a>&gt;

       •   Continuous integration &lt;<a href="http://ci.lttng.org/">http://ci.lttng.org/</a>&gt;

       •   Mailing list &lt;<a href="http://lists.lttng.org">http://lists.lttng.org</a>&gt; for support and development: <b><a href="mailto:lttng-dev@lists.lttng.org">lttng-dev@lists.lttng.org</a></b>

       •   IRC channel &lt;irc://irc.oftc.net/lttng&gt;: <b>#lttng</b> on <b>irc.oftc.net</b>

</pre><h4><b>COPYRIGHTS</b></h4><pre>
       This library is part of the LTTng-UST project.

       This library is distributed under the GNU Lesser General Public License, version 2.1
       &lt;<a href="http://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html">http://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html</a>&gt;. See the <b>COPYING</b>
       &lt;https://github.com/lttng/lttng-ust/blob/v2.13/COPYING&gt; file for more details.

</pre><h4><b>THANKS</b></h4><pre>
       Thanks to Ericsson for funding this work, providing real-life use cases, and testing.

       Special thanks to Michel Dagenais and the DORSAL laboratory &lt;<a href="http://www.dorsal.polymtl.ca/">http://www.dorsal.polymtl.ca/</a>&gt; at École
       Polytechnique de Montréal for the LTTng journey.

</pre><h4><b>AUTHORS</b></h4><pre>
       LTTng-UST was originally written by Mathieu Desnoyers, with additional contributions from various other
       people. It is currently maintained by Mathieu Desnoyers &lt;<a href="mailto:mathieu.desnoyers@efficios.com">mailto:mathieu.desnoyers@efficios.com</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/lttng-ust.3.html">lttng-ust</a></b>(3), <b><a href="../man1/lttng.1.html">lttng</a></b>(1), <b><a href="../man1/gcc.1.html">gcc</a></b>(1), <b><a href="../man8/ld.so.8.html">ld.so</a></b>(8)

LTTng 2.13.9                                       04/14/2025                               <u><a href="../man3/LTTNG-UST-CYG-PRO.3.html">LTTNG-UST-CYG-PRO</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>