<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBD::Gofer::Transport::corostream - Async DBD::Gofer stream transport using Coro and AnyEvent</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libdbi-perl">libdbi-perl_1.647-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       DBD::Gofer::Transport::corostream - Async DBD::Gofer stream transport using Coro and AnyEvent

</pre><h4><b>SYNOPSIS</b></h4><pre>
          DBI_AUTOPROXY="dbi:Gofer:transport=corostream" perl some-perl-script-using-dbi.pl

       or

          $dsn = ...; # the DSN for the driver and database you want to use
          $dbh = DBI-&gt;connect("dbi:Gofer:transport=corostream;dsn=$dsn", ...);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>BIG</u> <u>WIN</u> from using Coro is that it enables the use of existing DBI frameworks like DBIx::Class.

</pre><h4><b>KNOWN</b> <b>ISSUES</b> <b>AND</b> <b>LIMITATIONS</b></h4><pre>
         - Uses Coro::Select so alters CORE::select globally
           Parent class probably needs refactoring to enable a more encapsulated approach.

         - Doesn't prevent multiple concurrent requests
           Probably just needs a per-connection semaphore

         - Coro has many caveats. Caveat emptor.

</pre><h4><b>STATUS</b></h4><pre>
       THIS IS CURRENTLY JUST A PROOF-OF-CONCEPT IMPLEMENTATION FOR EXPERIMENTATION.

       Please note that I have no plans to develop this code further myself.  I'd very much welcome
       contributions. Interested? Let me know!

</pre><h4><b>AUTHOR</b></h4><pre>
       Tim Bunce, &lt;<a href="http://www.tim.bunce.name">http://www.tim.bunce.name</a>&gt;

</pre><h4><b>LICENCE</b> <b>AND</b> <b>COPYRIGHT</b></h4><pre>
       Copyright (c) 2010, Tim Bunce, Ireland. All rights reserved.

       This module is free software; you can redistribute it and/or modify it under the same terms as Perl
       itself. See perlartistic.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       DBD::Gofer::Transport::stream

       DBD::Gofer

</pre><h4><b>APPENDIX</b></h4><pre>
       Example code:

           #!perl

           use strict;
           use warnings;
           use Time::HiRes qw(time);

           BEGIN { $ENV{PERL_ANYEVENT_STRICT} = 1; $ENV{PERL_ANYEVENT_VERBOSE} = 1; }

           use AnyEvent;

           BEGIN { $ENV{DBI_TRACE} = 0; $ENV{DBI_GOFER_TRACE} = 0; $ENV{DBD_GOFER_TRACE} = 0; };

           use DBI;

           $ENV{DBI_AUTOPROXY} = 'dbi:Gofer:transport=corostream';

           my $ticker = AnyEvent-&gt;timer( after =&gt; 0, interval =&gt; 0.1, cb =&gt; sub {
               warn sprintf "-tick- %.2f\n", time
           } );

           warn "connecting...\n";
           my $dbh = DBI-&gt;connect("dbi:NullP:");
           warn "...connected\n";

           for (1..3) {
               warn "entering DBI...\n";
               $dbh-&gt;do("sleep 0.3"); # pseudo-sql understood by the DBD::NullP driver
               warn "...returned\n";
           }

           warn "done.";

       Example output:

           $ perl corogofer.pl
           connecting...
           -tick- 1293631437.14
           -tick- 1293631437.14
           ...connected
           entering DBI...
           -tick- 1293631437.25
           -tick- 1293631437.35
           -tick- 1293631437.45
           -tick- 1293631437.55
           ...returned
           entering DBI...
           -tick- 1293631437.66
           -tick- 1293631437.76
           -tick- 1293631437.86
           ...returned
           entering DBI...
           -tick- 1293631437.96
           -tick- 1293631438.06
           -tick- 1293631438.16
           ...returned
           done. at corogofer.pl line 39.

       You can see that the timer callback is firing while the code 'waits' inside the <b>do()</b> method for the
       response from the database. Normally that would block.

perl v5.40.0                                       2025-02-01             <u>DBD::Gofer::Transport::<a href="../man3pm/corostream.3pm.html">corostream</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>