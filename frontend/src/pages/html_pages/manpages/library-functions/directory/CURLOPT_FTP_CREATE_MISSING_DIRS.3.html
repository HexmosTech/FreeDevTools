<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_FTP_CREATE_MISSING_DIRS - create missing directories for FTP and SFTP</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_FTP_CREATE_MISSING_DIRS - create missing directories for FTP and SFTP

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       typedef enum {
         CURLFTP_CREATE_DIR_NONE,
         CURLFTP_CREATE_DIR,
         CURLFTP_CREATE_DIR_RETRY
       } curl_ftpcreatedir;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_FTP_CREATE_MISSING_DIRS,
                                 long create);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Pass a long telling libcurl to <u>create</u> the dir. If the value is <u>CURLFTP_CREATE_DIR</u> (1), libcurl may create
       any remote directory that it fails to "move" into.

       For FTP requests, that means a CWD command fails. CWD being the command that changes working directory.

       For  SFTP  requests,  libcurl  may  create  the  remote  directory  if  it  cannot obtain a handle to the
       target-location. The creation fails if a file of the same name as the directory to create already  exists
       or lack of permissions prevents creation.

       Setting  <u>create</u>  to  <u>CURLFTP_CREATE_DIR_RETRY</u>  (2),  tells  libcurl to retry the CWD command again if the
       subsequent <b>MKD</b> command fails. This is especially useful if you are doing  many  simultaneous  connections
       against  the  same  server  and  they  all  have this option enabled, as then CWD may first fail but then
       another connection does <b>MKD</b> before this connection and thus <b>MKD</b> fails but trying CWD works.

</pre><h4><b>DEFAULT</b></h4><pre>
       CURLFTP_CREATE_DIR_NONE (0)

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects ftp only

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           CURLcode res;
           curl_easy_setopt(curl, CURLOPT_URL,
                            "<a href="ftp://example.com/non-existing/new.txt">ftp://example.com/non-existing/new.txt</a>");
           curl_easy_setopt(curl, CURLOPT_FTP_CREATE_MISSING_DIRS,
                            (long)CURLFTP_CREATE_DIR_RETRY);

           res = curl_easy_perform(curl);

           curl_easy_cleanup(curl);
         }
       }

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.10.7

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_FTP_FILEMETHOD.3.html">CURLOPT_FTP_FILEMETHOD</a></b>(3), <b><a href="../man3/CURLOPT_FTP_USE_EPSV.3.html">CURLOPT_FTP_USE_EPSV</a></b>(3)

libcurl                                            2025-06-16                 <u><a href="../man3/CURLOPT_FTP_CREATE_MISSING_DIRS.3.html">CURLOPT_FTP_CREATE_MISSING_DIRS</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>