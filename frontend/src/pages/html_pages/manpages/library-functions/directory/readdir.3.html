<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>readdir - read a directory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       readdir - read a directory

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/dirent.h">dirent.h</a>&gt;</b>

       <b>struct</b> <b>dirent</b> <b>*readdir(DIR</b> <b>*</b><u>dirp</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>readdir</b>()  function returns a pointer to a <u>dirent</u> structure representing the next directory entry in
       the directory stream pointed to by <u>dirp</u>.  It returns NULL on reaching the end of the directory stream  or
       if an error occurred.

       In the glibc implementation, the <u>dirent</u> structure is defined as follows:

           struct dirent {
               ino_t          d_ino;       /* Inode number */
               off_t          d_off;       /* Not an offset; see below */
               unsigned short d_reclen;    /* Length of this record */
               unsigned char  d_type;      /* Type of file; not supported
                                              by all filesystem types */
               char           d_name[256]; /* Null-terminated filename */
           };

       The  only  fields  in  the <u>dirent</u> structure that are mandated by POSIX.1 are <u>d_name</u> and <u>d_ino</u>.  The other
       fields are unstandardized, and not present on all systems; see VERSIONS.

       The fields of the <u>dirent</u> structure are as follows:

       <u>d_ino</u>  This is the inode number of the file.

       <u>d_off</u>  The value returned in <u>d_off</u> is the same as would be returned by calling <b><a href="../man3/telldir.3.html">telldir</a></b>(3) at the  current
              position  in  the  directory  stream.  Be aware that despite its type and name, the <u>d_off</u> field is
              seldom any kind of directory offset on modern filesystems.  Applications should treat  this  field
              as an opaque value, making no assumptions about its contents; see also <b><a href="../man3/telldir.3.html">telldir</a></b>(3).

       <u>d_reclen</u>
              This  is the size (in bytes) of the returned record.  This may not match the size of the structure
              definition shown above; see VERSIONS.

       <u>d_type</u> This field contains a value indicating the file type, making it possible to avoid the  expense  of
              calling <b><a href="../man2/lstat.2.html">lstat</a></b>(2) if further actions depend on the type of the file.

              When a suitable feature test macro is defined (<b>_DEFAULT_SOURCE</b> since glibc 2.19, or <b>_BSD_SOURCE</b> on
              glibc  2.19  and  earlier),  glibc defines the following macro constants for the value returned in
              <u>d_type</u>:

              <b>DT_BLK</b>      This is a block device.

              <b>DT_CHR</b>      This is a character device.

              <b>DT_DIR</b>      This is a directory.

              <b>DT_FIFO</b>     This is a named pipe (FIFO).

              <b>DT_LNK</b>      This is a symbolic link.

              <b>DT_REG</b>      This is a regular file.

              <b>DT_SOCK</b>     This is a UNIX domain socket.

              <b>DT_UNKNOWN</b>  The file type could not be determined.

              Currently, only some filesystems (among them: Btrfs, ext2, ext3, and ext4) have full  support  for
              returning the file type in <u>d_type</u>.  All applications must properly handle a return of <b>DT_UNKNOWN</b>.

       <u>d_name</u> This field contains the null terminated filename; see VERSIONS.

       The data returned by <b>readdir</b>() may be overwritten by subsequent calls to <b>readdir</b>() for the same directory
       stream.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  success,  <b>readdir</b>()  returns  a  pointer  to  a  <u>dirent</u> structure.  (This structure may be statically
       allocated; do not attempt to <b><a href="../man3/free.3.html">free</a></b>(3) it.)

       If the end of the directory stream is reached, NULL is returned and <u>errno</u> is not changed.   If  an  error
       occurs,  NULL  is  returned and <u>errno</u> is set to indicate the error.  To distinguish end of stream from an
       error, set <u>errno</u> to zero before calling <b>readdir</b>() and then check the value of <u>errno</u> if NULL is returned.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EBADF</b>  Invalid directory stream descriptor <u>dirp</u>.

</pre><h4><b>ATTRIBUTES</b></h4><pre>
       For an explanation of the terms used in this section, see <b><a href="../man7/attributes.7.html">attributes</a></b>(7).
       ┌────────────────────────────────────────────────────────────┬───────────────┬──────────────────────────┐
       │ <b>Interface</b>                                                  │ <b>Attribute</b>     │ <b>Value</b>                    │
       ├────────────────────────────────────────────────────────────┼───────────────┼──────────────────────────┤
       │ <b>readdir</b>()                                                  │ Thread safety │ MT-Unsafe race:dirstream │
       └────────────────────────────────────────────────────────────┴───────────────┴──────────────────────────┘

       In the current POSIX.1 specification  (POSIX.1-2008),  <b>readdir</b>()  is  not  required  to  be  thread-safe.
       However,  in  modern  implementations (including the glibc implementation), concurrent calls to <b>readdir</b>()
       that specify different directory streams are thread-safe.  In cases where multiple threads must read from
       the same directory stream, using <b>readdir</b>() with external synchronization is still preferable to  the  use
       of  the  deprecated  <b><a href="../man3/readdir_r.3.html">readdir_r</a></b>(3) function.  It is expected that a future version of POSIX.1 will require
       that <b>readdir</b>() be thread-safe when concurrently employed on different directory streams.

</pre><h4><b>VERSIONS</b></h4><pre>
       Only the fields <u>d_name</u> and (as an XSI extension) <u>d_ino</u> are specified in POSIX.1.  Other than  Linux,  the
       <u>d_type</u>  field  is  available mainly only on BSD systems.  The remaining fields are available on many, but
       not all systems.  Under glibc, programs can check for the availability  of  the  fields  not  defined  in
       POSIX.1  by  testing whether the macros <b>_DIRENT_HAVE_D_NAMLEN</b>, <b>_DIRENT_HAVE_D_RECLEN</b>, <b>_DIRENT_HAVE_D_OFF</b>,
       or <b>_DIRENT_HAVE_D_TYPE</b> are defined.

   <b>The</b> <b>d_name</b> <b>field</b>
       The <u>dirent</u> structure definition shown above is taken from the glibc headers, and shows the  <u>d_name</u>  field
       with a fixed size.

       <u>Warning</u>:  applications  should avoid any dependence on the size of the <u>d_name</u> field.  POSIX defines it as
       <u>char</u> <u>d_name[]</u>, a character array of unspecified size, with at  most  <b>NAME_MAX</b>  characters  preceding  the
       terminating null byte ('\0').

       POSIX.1  explicitly  notes that this field should not be used as an lvalue.  The standard also notes that
       the use of <u>sizeof(d_name)</u> is incorrect; use <u>strlen(d_name)</u> instead.  (On  some  systems,  this  field  is
       defined  as  <u>char</u>  <u>d_name[1]</u>!)   By implication, the use <u>sizeof(struct</u> <u>dirent)</u> to capture the size of the
       record including the size of <u>d_name</u> is also incorrect.

       Note that while the call

           fpathconf(fd, _PC_NAME_MAX)

       returns the value 255 for most filesystems, on some filesystems (e.g., CIFS, Windows  SMB  servers),  the
       null-terminated  filename  that is (correctly) returned in <u>d_name</u> can actually exceed this size.  In such
       cases, the <u>d_reclen</u> field will contain a value that exceeds the size of the glibc <u>dirent</u> structure  shown
       above.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001, SVr4, 4.3BSD.

</pre><h4><b>NOTES</b></h4><pre>
       A directory stream is opened using <b><a href="../man3/opendir.3.html">opendir</a></b>(3).

       The  order  in  which  filenames  are  read  by  successive  calls to <b>readdir</b>() depends on the filesystem
       implementation; it is unlikely that the names will be sorted in any fashion.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/getdents.2.html">getdents</a></b>(2), <b><a href="../man2/read.2.html">read</a></b>(2), <b><a href="../man3/closedir.3.html">closedir</a></b>(3), <b><a href="../man3/dirfd.3.html">dirfd</a></b>(3), <b><a href="../man3/ftw.3.html">ftw</a></b>(3), <b><a href="../man3/offsetof.3.html">offsetof</a></b>(3), <b><a href="../man3/opendir.3.html">opendir</a></b>(3), <b><a href="../man3/readdir_r.3.html">readdir_r</a></b>(3), <b><a href="../man3/rewinddir.3.html">rewinddir</a></b>(3),
       <b><a href="../man3/scandir.3.html">scandir</a></b>(3), <b><a href="../man3/seekdir.3.html">seekdir</a></b>(3), <b><a href="../man3/telldir.3.html">telldir</a></b>(3)

Linux man-pages 6.9.1                              2024-06-16                                         <u><a href="../man3/readdir.3.html">readdir</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>