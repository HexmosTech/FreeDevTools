<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>__pmCleanMapDir - remove old files from a map directory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>__pmCleanMapDir</b> - remove old files from a map directory

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>"pmapi.h"</b>
       <b>#include</b> <b>"libpcp.h"</b>

       <b>int</b> <b>__pmCleanMapDir(const</b> <b>char</b> <b>*</b><u>dirname</u><b>,</b> <b>const</b> <b>char</b> <b>*</b> <u>special</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>CAVEAT</b></h4><pre>
       This documentation is intended for internal Performance Co-Pilot (PCP) developer use.

       These  interfaces  are  not part of the PCP APIs that are guaranteed to remain fixed across releases, and
       they may not work, or may provide different semantics at some point in the future.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1) and <b><a href="../man1/pmie.1.html">pmie</a></b>(1) maintain directories of map files that provide a mapping from  a  <b><a href="../man1/pmlogger.1.html">pmlogger</a></b>(1)  or
       <b><a href="../man1/pmie.1.html">pmie</a></b>(1) process id (PID) to important parameters of those processes.

       <b>__pmCleanMapDir</b>  removes  ``dead''  files  in  these  directories,  specifically the directory entries in
       <u>dirname</u> should follow these rules, else <b>__pmCleanMapDir</b> will remove them:

       + the name should be numeric, else it should be equal <u>special</u> (if <u>special</u> is not NULL)

       + for a numeric directory entry it should be a regular file and the name should be the PID of  a  running
         process

       + for a match on <u>special</u> the directory entry should be a symbolic link and the last component of the link
         should be the ASCII encoding of the PID of a running process

       Before  any  of these checks are done, <b>__pmCleanMapDir</b> checks that <u>dirname</u> is indeed a directory, and the
       user id and group id of the caller match the user id and group id of <u>dirname</u>.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       If a serious error  occurs,  <b>__pmCleanMapDir</b>  returns  a  negative  value  suitable  for  reporting  with
       <b><a href="../man3/pmErrStr.3.html">pmErrStr</a></b>(3).  Otherwise the return value is the number of entries that have been removed.

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       Verbose  diagnostics  describing the actions of <b>__pmCleanMapDir</b> will be reported on standard error of the
       debug option <b>misc</b> is set, e.g. via <b>-D</b> <b>misc</b> from the command line.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/pmdbg.1.html">pmdbg</a></b>(1), <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3) and <b><a href="../man3/pmErrStr.3.html">pmErrStr</a></b>(3).

Performance Co-Pilot                                   PCP                                      <u><a href="../man3/PMCLEANMAPDIR.3.html">PMCLEANMAPDIR</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>