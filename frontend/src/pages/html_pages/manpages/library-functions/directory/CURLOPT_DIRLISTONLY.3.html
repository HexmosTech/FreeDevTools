<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CURLOPT_DIRLISTONLY - ask for names only in a directory listing</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcurl4-doc">libcurl4-doc_8.14.1-1ubuntu2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       CURLOPT_DIRLISTONLY - ask for names only in a directory listing

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;curl/curl.h&gt;

       CURLcode curl_easy_setopt(CURL *handle, CURLOPT_DIRLISTONLY, long listonly);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       For  FTP  and  SFTP  based  URLs  a  parameter set to 1 tells the library to list the names of files in a
       directory, rather than performing a full directory listing that would normally include file sizes,  dates
       etc.

       For  POP3  a  parameter  of 1 tells the library to list the email message or messages on the POP3 server.
       This can be used to change the default behavior of libcurl, when combined with  a  URL  that  contains  a
       message ID, to perform a "scan listing" which can then be used to determine the size of an email.

       For FILE, this option has no effect yet as directories are always listed in this mode.

       Note:  For FTP this causes a NLST command to be sent to the FTP server. Beware that some FTP servers list
       only files in their response to NLST; they might not include subdirectories and symbolic links.

       Setting this option to 1 also implies a directory listing even if the URL does  not  end  with  a  slash,
       which otherwise is necessary.

       Do not use this option if you also use <u><a href="../man3/CURLOPT_WILDCARDMATCH.3.html">CURLOPT_WILDCARDMATCH</a>(3)</u> as it effectively breaks that feature.

</pre><h4><b>DEFAULT</b></h4><pre>
       0, disabled

</pre><h4><b>PROTOCOLS</b></h4><pre>
       This functionality affects ftp, pop3 and sftp

</pre><h4><b>EXAMPLE</b></h4><pre>
       int main(void)
       {
         CURL *curl = curl_easy_init();
         if(curl) {
           CURLcode res;
           curl_easy_setopt(curl, CURLOPT_URL, "<a href="ftp://example.com/dir/">ftp://example.com/dir/</a>");

           /* list only */
           curl_easy_setopt(curl, CURLOPT_DIRLISTONLY, 1L);

           res = curl_easy_perform(curl);

           curl_easy_cleanup(curl);
         }
       }

</pre><h4><b>HISTORY</b></h4><pre>
       This option was known as CURLOPT_FTPLISTONLY up to 7.16.4. POP3 is supported since 7.21.5.

</pre><h4><b>AVAILABILITY</b></h4><pre>
       Added in curl 7.17.0

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <u><a href="../man3/curl_easy_setopt.3.html">curl_easy_setopt</a>(3)</u> returns a CURLcode indicating success or error.

       CURLE_OK (0) means everything was OK, non-zero means an error occurred, see <u><a href="../man3/libcurl-errors.3.html">libcurl-errors</a>(3)</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/CURLOPT_CUSTOMREQUEST.3.html">CURLOPT_CUSTOMREQUEST</a></b>(3), <b><a href="../man3/CURLOPT_WILDCARDMATCH.3.html">CURLOPT_WILDCARDMATCH</a></b>(3)

libcurl                                            2025-06-16                             <u><a href="../man3/CURLOPT_DIRLISTONLY.3.html">CURLOPT_DIRLISTONLY</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>