<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-posix-dev">manpages-posix-dev_2017a-2_all</a> <br><br><pre>
</pre><h4><b>PROLOG</b></h4><pre>
       This  manual  page  is part of the POSIX Programmer's Manual.  The Linux implementation of this interface
       may differ (consult the corresponding Linux manual page for details of Linux behavior), or the  interface
       may not be implemented on Linux.

</pre><h4><b>NAME</b></h4><pre>
       mkdir, mkdirat — make a directory

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;sys/stat.h&gt;

       int mkdir(const char *<u>path</u>, mode_t <u>mode</u>);

       #include &lt;<a href="file:/usr/include/fcntl.h">fcntl.h</a>&gt;

       int mkdirat(int <u>fd</u>, const char *<u>path</u>, mode_t <u>mode</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <u>mkdir</u>()  function  shall create a new directory with name <u>path</u>.  The file permission bits of the new
       directory shall be initialized from <u>mode</u>.  These file permission bits  of  the  <u>mode</u>  argument  shall  be
       modified by the process' file creation mask.

       When  bits  in  <u>mode</u> other than the file permission bits are set, the meaning of these additional bits is
       implementation-defined.

       The directory's user ID shall be set to the process' effective user ID.  The directory's group  ID  shall
       be  set  to  the  group  ID  of  the  parent  directory  or  to  the  effective  group ID of the process.
       Implementations shall provide a way to initialize the directory's group ID to the group ID of the  parent
       directory.  Implementations  may,  but  need not, provide an implementation-defined way to initialize the
       directory's group ID to the effective group ID of the calling process.

       The newly created directory shall be an empty directory.

       If <u>path</u> names a symbolic link, <u>mkdir</u>() shall fail and set <u>errno</u> to <b>[EEXIST]</b>.

       Upon successful completion, <u>mkdir</u>() shall mark for update the last data access, last  data  modification,
       and  last  file status change timestamps of the directory. Also, the last data modification and last file
       status change timestamps of the directory that contains the new entry shall be marked for update.

       The <u>mkdirat</u>() function shall be equivalent to  the  <u>mkdir</u>()  function  except  in  the  case  where  <u>path</u>
       specifies  a relative path. In this case the newly created directory is created relative to the directory
       associated with the file descriptor <u>fd</u> instead of the current working directory. If the  access  mode  of
       the  open  file description associated with the file descriptor is not O_SEARCH, the function shall check
       whether directory searches are permitted using the current permissions of the  directory  underlying  the
       file descriptor. If the access mode is O_SEARCH, the function shall not perform the check.

       If  <u>mkdirat</u>()  is  passed  the  special value AT_FDCWD in the <u>fd</u> parameter, the current working directory
       shall be used and the behavior shall be identical to a call to <u>mkdir</u>().

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, these functions shall return 0.  Otherwise, these functions shall  return  -1
       and set <u>errno</u> to indicate the error. If -1 is returned, no directory shall be created.

</pre><h4><b>ERRORS</b></h4><pre>
       These functions shall fail if:

       <b>EACCES</b> Search  permission  is  denied on a component of the path prefix, or write permission is denied on
              the parent directory of the directory to be created.

       <b>EEXIST</b> The named file exists.

       <b>ELOOP</b>  A loop exists in symbolic links encountered during resolution of the <u>path</u> argument.

       <b>EMLINK</b> The link count of the parent directory would exceed {LINK_MAX}.

       <b>ENAMETOOLONG</b>
              The length of a component of a pathname is longer than {NAME_MAX}.

       <b>ENOENT</b> A component of the path prefix specified by <u>path</u> does not name an existing directory or <u>path</u> is an
              empty string.

       <b>ENOSPC</b> The file system does not contain enough space to hold the contents of  the  new  directory  or  to
              extend the parent directory of the new directory.

       <b>ENOTDIR</b>
              A  component  of the path prefix names an existing file that is neither a directory nor a symbolic
              link to a directory.

       <b>EROFS</b>  The parent directory resides on a read-only file system.

       In addition, the <u>mkdirat</u>() function shall fail if:

       <b>EACCES</b> The access mode of the  open  file  description  associated  with  <u>fd</u>  is  not  O_SEARCH  and  the
              permissions of the directory underlying <u>fd</u> do not permit directory searches.

       <b>EBADF</b>  The  <u>path</u> argument does not specify an absolute path and the <u>fd</u> argument is neither AT_FDCWD nor a
              valid file descriptor open for reading or searching.

       <b>ENOTDIR</b>
              The <u>path</u> argument is not an absolute path and <u>fd</u> is a  file  descriptor  associated  with  a  non-
              directory file.

       These functions may fail if:

       <b>ELOOP</b>  More than {SYMLOOP_MAX} symbolic links were encountered during resolution of the <u>path</u> argument.

       <b>ENAMETOOLONG</b>
              The length of a pathname exceeds {PATH_MAX}, or pathname resolution of a symbolic link produced an
              intermediate result with a length that exceeds {PATH_MAX}.

       <u>The</u> <u>following</u> <u>sections</u> <u>are</u> <u>informative.</u>

</pre><h4><b>EXAMPLES</b></h4><pre>
   <b>Creating</b> <b>a</b> <b>Directory</b>
       The  following  example  shows  how  to  create  a directory named <b>/home/cnd/mod1</b>, with read/write/search
       permissions for owner and group, and with read/search permissions for others.

           #include &lt;sys/types.h&gt;
           #include &lt;sys/stat.h&gt;

           int status;
           ...
           status = mkdir("/home/cnd/mod1", S_IRWXU | S_IRWXG | S_IROTH | S_IXOTH);

</pre><h4><b>APPLICATION</b> <b>USAGE</b></h4><pre>
       None.

</pre><h4><b>RATIONALE</b></h4><pre>
       The <u>mkdir</u>() function originated in 4.2 BSD and was added to System V in Release 3.0.

       4.3 BSD detects <b>[ENAMETOOLONG]</b>.

       The POSIX.1‐1990 standard required that the group ID of a newly created directory be set to the group  ID
       of  its  parent  directory or to the effective group ID of the creating process. FIPS 151‐2 required that
       implementations provide a way to have the group ID be set to the group ID of  the  containing  directory,
       but  did not prohibit implementations also supporting a way to set the group ID to the effective group ID
       of the creating process.  Conforming applications should not assume which group ID will be  used.  If  it
       matters,  an application can use <u>chown</u>() to set the group ID after the directory is created, or determine
       under what conditions the implementation will set the desired group ID.

       The purpose of the <u>mkdirat</u>() function is to create a directory in  directories  other  than  the  current
       working directory without exposure to race conditions. Any part of the path of a file could be changed in
       parallel  to the call to <u>mkdir</u>(), resulting in unspecified behavior. By opening a file descriptor for the
       target directory and using the <u>mkdirat</u>() function it can be guaranteed that the newly  created  directory
       is located relative to the desired directory.

</pre><h4><b>FUTURE</b> <b>DIRECTIONS</b></h4><pre>
       None.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u>chmod</u>(), <u>mkdtemp</u>(), <u>mknod</u>(), <u>umask</u>()

       The Base Definitions volume of POSIX.1‐2017, <b>&lt;fcntl.h&gt;</b>, <b>&lt;sys_stat.h&gt;</b>, <b>&lt;sys_types.h&gt;</b>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1-2017, Standard
       for  Information  Technology  --  Portable  Operating  System  Interface  (POSIX),  The  Open  Group Base
       Specifications Issue 7, 2018 Edition, Copyright (C) 2018 by the Institute of Electrical  and  Electronics
       Engineers, Inc and The Open Group.  In the event of any discrepancy between this version and the original
       IEEE  and The Open Group Standard, the original IEEE and The Open Group Standard is the referee document.
       The original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a> .

       Any typographical or formatting errors that appear in this page are most likely to have  been  introduced
       during   the   conversion  of  the  source  files  to  man  page  format.  To  report  such  errors,  see
       https://www.kernel.org/doc/man-pages/reporting_bugs.html .

IEEE/The Open Group                                   2017                                         <u><a href="../man3POSIX/MKDIR.3POSIX.html">MKDIR</a></u>(3POSIX)
</pre>
 </div>
</div></section>
</div>
</body>
</html>