<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>auth_mkhomedir - Autocreate a new account's home directory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/courier-authlib-dev">courier-authlib-dev_0.72.4-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       auth_mkhomedir - Autocreate a new account's home directory

</pre><h4><b>SYNOPSIS</b></h4><pre>
       #include &lt;courierauth.h&gt;

       <b>int</b> <b>rc=auth_mkhomedir(struct</b> <b>authinfo</b> <b>*</b><u>auth</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A <u>callback_func</u> that's passed as a parameter to <b><a href="../man3/auth_getuserinfo_meta.3.html">auth_getuserinfo_meta</a></b>(3)[1] can invoke this function to
       automatically create a new account's home directory, if the authlib client is running as root, forwarding
       the authinfo pointer from the callback.

       <b>auth_mkhomedir</b>() checks if the <b>AUTH_MKHOMEDIR_SKEL</b> environment variable is set, and if the authenticated
       account's home directory does not exist. If the environment variable is set it must point to a directory
       like <a href="file:/etc/skel">/etc/skel</a> that contains a template for the contents of a new account's home directory.

       If <b>AUTH_MKHOMEDIR_SKEL</b> is not set, or if the home directory exists, <b>auth_mkhomedir</b>() does nothing and
       returns 0. Otherwise the account's home directory gets created, and the contents of the
       <b>AUTH_MKHOMEDIR_SKEL</b> directory get recursively copied into the new home directory. The permissions of
       <b>AUTH_MKHOMEDIR_SKEL</b> and its contents are preserved, and the owner userid and groupid is set to the
       authenticated account's userid and groupid.

</pre><h4><b>RETURNS</b></h4><pre>
       <b>auth_mkhomedir</b>() returns a non-zero value if an error occured while creating the new account's home
       directory.  <b>auth_mkhomedir</b>() returns zero if the new account's home directory was created successfully,
       or if the account's home directory already exists.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/authlib.3.html">authlib</a></b>(3)[2], <b><a href="../man3/auth_getuserinfo_meta.3.html">auth_getuserinfo_meta</a></b>(3)[1].

</pre><h4><b>NOTES</b></h4><pre>
        1. <b><a href="../man3/auth_getuserinfo_meta.3.html">auth_getuserinfo_meta</a></b>(3)
           <a href="http://www.courier-mta.org/authlib/auth_getuserinfo.html">http://www.courier-mta.org/authlib/auth_getuserinfo.html</a>

        2. <b><a href="../man3/authlib.3.html">authlib</a></b>(3)
           <a href="http://www.courier-mta.org/authlib/authlib.html">http://www.courier-mta.org/authlib/authlib.html</a>

Double Precision, Inc.                             10/28/2020                                  <u><a href="../man3/AUTH_MKHOMEDIR.3.html">AUTH_MKHOMEDIR</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>