<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SSL_new_listener, SSL_new_listener_from, SSL_is_listener, SSL_get0_listener, SSL_listen,</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libssl-doc">libssl-doc_3.5.0-2ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       SSL_new_listener, SSL_new_listener_from, SSL_is_listener, SSL_get0_listener, SSL_listen,
       SSL_accept_connection, SSL_get_accept_connection_queue_len, SSL_new_from_listener,
       SSL_ACCEPT_CONNECTION_NO_BLOCK - SSL object interface for abstracted connection acceptance

</pre><h4><b>SYNOPSIS</b></h4><pre>
        #include &lt;openssl/ssl.h&gt;

        SSL *SSL_new_listener(SSL_CTX *ctx, uint64_t flags);
        SSL *SSL_new_listener_from(SSL *ssl, uint64_t flags);

        int SSL_is_listener(SSL *ssl);
        SSL *SSL_get0_listener(SSL *ssl);

        int SSL_listen(SSL *ssl);

        #define SSL_ACCEPT_CONNECTION_NO_BLOCK
        SSL *SSL_accept_connection(SSL *ssl, uint64_t flags);

        size_t SSL_get_accept_connection_queue_len(SSL *ssl);

        SSL *SSL_new_from_listener(SSL *ssl, uint64_t flags);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>SSL_new_listener()</b> function creates a listener SSL object.  Listener SSL objects are specialised to
       only accept network connections in a protocol- agnostic manner. They cannot be used, for example, for
       sending or receiving data using <b><a href="../man3/SSL_write_ex.3.html">SSL_write_ex</a></b>(3) or <b><a href="../man3/SSL_read_ex.3.html">SSL_read_ex</a></b>(3). In general, only those functions
       expressly documented as being supported on a listener SSL object are available.

       The <b>SSL_new_listener_from()</b> function creates a listener SSL object which is subordinate to a QUIC domain
       SSL object <u>ssl</u>. See <b><a href="../man3/SSL_new_domain.3.html">SSL_new_domain</a></b>(3) and <b><a href="../man7/openssl-quic-concurrency.7.html">openssl-quic-concurrency</a></b>(7) for details on QUIC domain SSL
       objects.

       A listener SSL object supports the following operations:

       •   Standard reference counting and free operations, such as <b><a href="../man3/SSL_up_ref.3.html">SSL_up_ref</a></b>(3) and <b><a href="../man3/SSL_free.3.html">SSL_free</a></b>(3);

       •   Network BIO configuration operations, such as <b><a href="../man3/SSL_set_bio.3.html">SSL_set_bio</a></b>(3);

       •   Event  processing and polling enablement APIs such as <b><a href="../man3/SSL_handle_events.3.html">SSL_handle_events</a></b>(3), <b><a href="../man3/SSL_get_event_timeout.3.html">SSL_get_event_timeout</a></b>(3),
           <b><a href="../man3/SSL_get_rpoll_descriptor.3.html">SSL_get_rpoll_descriptor</a></b>(3),      <b><a href="../man3/SSL_get_wpoll_descriptor.3.html">SSL_get_wpoll_descriptor</a></b>(3),      <b><a href="../man3/SSL_net_read_desired.3.html">SSL_net_read_desired</a></b>(3)       and
           <b><a href="../man3/SSL_net_write_desired.3.html">SSL_net_write_desired</a></b>(3);

       •   Certain  configurable  parameters  described  in <b><a href="../man3/SSL_get_value_uint.3.html">SSL_get_value_uint</a></b>(3) (see <b><a href="../man3/SSL_get_value_uint.3.html">SSL_get_value_uint</a></b>(3) for
           details);

       •   Accepting  network  connections  using  the  functions  documented  in  this  manual  page,  such  as
           <b>SSL_accept_connection()</b>.

       The basic workflow of using a listener object is as follows:

       •   Create  a  new  listener  object  using  <b>SSL_new_listener()</b>  using  a  <b>SSL_CTX</b> which uses a supported
           <b>SSL_METHOD</b> (such as <b><a href="../man3/OSSL_QUIC_server_method.3.html">OSSL_QUIC_server_method</a></b>(3));

       •   Configure appropriate network BIOs using <b><a href="../man3/SSL_set_bio.3.html">SSL_set_bio</a></b>(3) on the listener SSL object;

       •   Configure the blocking mode using <b><a href="../man3/SSL_set_blocking_mode.3.html">SSL_set_blocking_mode</a></b>(3);

       •   Accept connections in a loop by calling <b>SSL_accept_connection()</b>. Each returned SSL object is a  valid
           connection which can be used in a normal manner.

       The <b>SSL_is_listener()</b> function returns 1 if and only if a SSL object is a listener SSL object.

       The  <b>SSL_get0_listener()</b>  function returns a listener object which is related to the given SSL object, if
       there is one. For a listener object, this is the same object (the function returns its argument).  For  a
       connection  object  which  was created by a listener object, that listener object is returned. If the <u>ssl</u>
       argument is an SSL object which is not a listener object and which  is  not  descended  from  a  listener
       object  (e.g.  a  connection obtained using <b>SSL_accept_connection()</b>) or indirectly from a listener object
       (e.g. a QUIC stream SSL object obtained using <b>SSL_accept_stream()</b> called on a connection  obtained  using
       <b>SSL_accept_connection()</b>)  the  return  value  is NULL. See NOTES below for caveats related to pending SSL
       connections on a QUIC listener's accept queue.

       The <b>SSL_listen()</b> function begins monitoring the listener <u>ssl</u> for incoming connections.  Appropriate  BIOs
       must  have been configured before calling <b>SSL_listen()</b>, along with any other needed configuration for the
       listener SSL object. It is typically not necessary  to  call  <b>SSL_listen()</b>  because  it  will  be  called
       automatically  on  the  first  call  to  <b>SSL_accept_connection()</b>.  However,  <b>SSL_listen()</b>  may  be called
       explicitly if it is desired to control precisely when the listening process begins, or to ensure that  no
       errors   occur   when   starting   to   listen   for  connections.  After  a  call  to  <b>SSL_listen()</b>  (or
       <b>SSL_accept_connection()</b>) succeeds. The <b>SSL_listen()</b> function is idempotent, subsequent calls on the  same
       <u>ssl</u> object are no-ops. This call is supported only on listener SSL objects.

       The  <b>SSL_accept_connection()</b>  call  is supported only on a listener SSL object and accepts a new incoming
       connection. A new SSL object representing the accepted connection is created and returned on success.  If
       no  incoming  connection is available and the listener SSL object is configured in nonblocking mode, NULL
       is returned.

       The <b>SSL_ACCEPT_CONNECTION_NO_BLOCK</b> flag may be specified to <b>SSL_accept_connection()</b>.  If  specified,  the
       call does not block even if the listener SSL object is configured in blocking mode.

       The  <b>SSL_get_accept_connection_queue_len()</b>  call  returns  the  number  of pending connections on the <u>ssl</u>
       listener's queue. <b>SSL_accept_connection()</b> returns the next  pending  connection,  removing  it  from  the
       queue. The returned connection count is a point-in-time value, the actual number of connections that will
       ultimately be returned may be different.

       Currently,  listener SSL objects are only supported for QUIC server usage via <b><a href="../man3/OSSL_QUIC_server_method.3.html">OSSL_QUIC_server_method</a></b>(3),
       or QUIC  client-only  usage  via  <b><a href="../man3/OSSL_QUIC_client_method.3.html">OSSL_QUIC_client_method</a></b>(3)  or  <b><a href="../man3/OSSL_QUIC_client_thread_method.3.html">OSSL_QUIC_client_thread_method</a></b>(3)  (see
       "CLIENT-ONLY  USAGE").  It  is expected that the listener interface, which provides an abstracted API for
       connection acceptance, will be expanded to support other protocols, such as TLS over TCP,  plain  TCP  or
       DTLS in future.

       <b>SSL_listen()</b> and <b>SSL_accept_connection()</b> are "I/O" functions, meaning that they update the value returned
       by <b><a href="../man3/SSL_get_error.3.html">SSL_get_error</a></b>(3) if they fail.

</pre><h4><b>CLIENT-ONLY</b> <b>USAGE</b></h4><pre>
       It is also possible to use the listener interface without accepting any connections and without listening
       for  connections.  This  can be useful in circumstances where it is desirable for multiple connections to
       share the same underlying network resources. For example, multiple outgoing QUIC client connections could
       be made to use the same underlying UDP socket.

       To disable client address validation on a listener SSL object, the flag <b>SSL_LISTENER_FLAG_NO_VALIDATE</b> may
       be passed in the flags field of both <b>SSL_new_listener()</b> and <b>SSL_new_listener_from()</b>.  Note that this flag
       only impacts the sending of retry frames for server address validation.  Tokens may still be communicated
       from the server via NEW_TOKEN frames, which will still be validated on  receipt  in  future  connections.
       Note that this setting is not recommended and may be dangerous in untrusted environments.  Not performing
       address validation exposes the server to malicious clients that may open large numbers of connections and
       never  transact  data  on  them  (roughly equivalent to a TCP syn flood attack), which address validation
       mitigates.

       The <b>SSL_new_from_listener()</b> function creates a client connection under a given listener SSL  object.  For
       QUIC,  it  is  also  possible to use <b>SSL_new_from_listener()</b>, leading to a UDP network endpoint which has
       both incoming and outgoing connections.

       The <u>flags</u> argument of <b>SSL_new_from_listener()</b> is reserved and must be set to 0.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>SSL_new_listener()</b> and <b>SSL_new_listener_from()</b> return a new listener SSL object or NULL on failure.

       <b>SSL_is_listener()</b> returns 1 if its <u>ssl</u> argument is a listener object, 0 otherwise.

       <b>SSL_get0_listener()</b> returns an SSL object pointer (potentially to the same object on which it is  called)
       or NULL.

       <b>SSL_listen()</b> returns 1 on success or 0 on failure.

       <b>SSL_accept_connection()</b>  returns a pointer to a new SSL object on success or NULL on failure. On success,
       the caller assumes ownership of the reference.

       <b>SSL_get_accept_connection_queue_len()</b> returns a nonnegative value, or 0 if the queue is empty, or  called
       on an unsupported SSL object type.

       <b>SSL_new_from_listener()</b>  returns a pointer to a new SSL object on success or NULL on failure. On success,
       the caller assumes ownership of the reference.

</pre><h4><b>NOTES</b></h4><pre>
       <b>SSL_get0_listener()</b> behaves somewhat  differently  in  SSL  callbacks  for  QUIC  connections.   As  QUIC
       connections  begin  TLS handshake operations prior to them being accepted via <b>SSL_accept_connection()</b>, an
       application  may  receive   callbacks   for   such   pending   connection   prior   to   acceptance   via
       <b>SSL_accept_connection()</b>.   As  listener association takes place during the accept process, prior to being
       returned from <b>SSL_accept_connection()</b>, calls to <b>SSL_get0_listener()</b> made from  such  SSL  callbacks  will
       return NULL.  This can be used as an indicator within the callback that the referenced SSL object has not
       yet been accepted.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/OSSL_QUIC_server_method.3.html">OSSL_QUIC_server_method</a></b>(3),          <b><a href="../man3/SSL_free.3.html">SSL_free</a></b>(3),          <b><a href="../man3/SSL_set_bio.3.html">SSL_set_bio</a></b>(3),          <b><a href="../man3/SSL_handle_events.3.html">SSL_handle_events</a></b>(3),
       <b><a href="../man3/SSL_get_rpoll_descriptor.3.html">SSL_get_rpoll_descriptor</a></b>(3), <b><a href="../man3/SSL_set_blocking_mode.3.html">SSL_set_blocking_mode</a></b>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       These functions were added in OpenSSL 3.5.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2024-2025 The OpenSSL Project Authors. All Rights Reserved.

       Licensed under the Apache License 2.0 (the "License").  You may not use this file  except  in  compliance
       with  the  License.   You  can  obtain  a  copy  in  the  file  LICENSE  in the source distribution or at
       &lt;https://www.openssl.org/source/license.html&gt;.

3.5.0                                              2025-06-04                             <u><a href="../man3SSL/SSL_NEW_LISTENER.3SSL.html">SSL_NEW_LISTENER</a></u>(3SSL)
</pre>
 </div>
</div></section>
</div>
</body>
</html>