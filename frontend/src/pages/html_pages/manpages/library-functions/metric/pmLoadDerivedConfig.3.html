<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmLoadDerivedConfig - load derived metric definitions from files</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmLoadDerivedConfig</b> - load derived metric definitions from files

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>

       <b>int</b> <b>pmLoadDerivedConfig(char</b> <b>*</b><u>path</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Derived  metrics  may  be  used  to  extend the available metrics with new (derived) metrics using simple
       arithmetic expressions.  The definitions of these metrics can be persisted and loaded programmatically by
       monitor tools using <b>pmLoadDerivedConfig</b>.

       The <u>path</u> parameter defines a colon separated list of files and/or directories (the syntax is the same  as
       for  the <b>$PATH</b> variable for <b><a href="../man1/sh.1.html">sh</a></b>(1)), from which derived metric specifications are to be sourced.  The <u>path</u>
       components are expanded into a list of files as follows: if a component is a  file,  then  that  file  is
       added  to  the  list,  else if a component is a directory then recursive descent is used to enumerate all
       files below that directory and these are added to the list.  Each file in the resulting list is parsed in
       order, and according to the derived metrics syntax described below.

       Each line of the file(s) identified by <u>path</u> is either a comment line (with a ``#'' in the first  position
       of the line) or the declaration of a derived performance metric, specified as:

       * the name of the derived metric, using the same ``dot notation'' syntax that is used for PCP performance
         metrics, see <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1) and <b><a href="../man5/PMNS.5.html">PMNS</a></b>(5).
       * an equals sign (``='')
       * a valid expression for a derived metric, as described in <b><a href="../man3/pmRegisterDerived.3.html">pmRegisterDerived</a></b>(3).

       For  each line containing a derived metric definition, <b><a href="../man3/pmRegisterDerived.3.html">pmRegisterDerived</a></b>(3) is called to register the new
       derived metric.

       Once a derived metric has been declared, it may be assigned additional attributes  with  a  line  of  the
       form:

       * the name of the derived metric,
       * a left parenthesis, an <u>attribute</u> <u>type</u> and a right parenthesis,
       * an equals sign (``=''),
       * an <u>attribute</u> <u>value</u>.

       Currently,  <u>attribute</u>  <u>type</u>  may  be either <b>oneline</b> or <b>helptext</b> to designate the ``one line'' or expanded
       help text to be associated with the derived metric, see <b><a href="../man3/pmLookupText.3.html">pmLookupText</a></b>(3).

       The <u>attribute</u> <u>value</u> may be either arbitrary text following the ``='' and ending at the end of  the  line,
       else  a  string  enclosed  in  either  single  quotes  (') or double quotes (").  In the latter case, the
       <u>attribute</u> <u>value</u> may span multiple lines, and a simple escape  mechanism  is  supported,  namely  for  any
       character  ``x'',  ``\x''  is  replaced  by  ``x'' (this allows quotes to be escaped within a string, for
       example), and there is a special case when the ``\'' comes at the end of  the  line  in  which  case  the
       following newline is not included in the <u>attribute</u> <u>value</u>.

       Outside of <u>attribute</u> <u>values</u>, white space is ignored in the lines, and blank lines are ignored altogether.

       Because  <b>pmLoadDerivedConfig</b>  may  process  many  files,  each  of  which may contain many derived metric
       specifications, it is not possible to provide a specific error status on return.  Hence the  result  from
       <b>pmLoadDerivedConfig</b>  will  be  the  number of derived metrics successfully loaded from files on the given
       <u>path</u>.  Catastrophic errors such as not being able to open one of the files on the given <u>path</u>  will  cause
       an  immediate  return  with  a  negative  return  value  that  can be passed to <b><a href="../man3/pmErrStr.3.html">pmErrStr</a></b>(3) to obtain the
       associated error message.

       When errors are encountered in the derived metric specifications diagnostic  messages  are  generated  by
       <b><a href="../man3/pmRegisterDerived.3.html">pmRegisterDerived</a></b>(3) and displayed via <b><a href="../man3/pmprintf.3.html">pmprintf</a></b>(3).

</pre><h4><b>EXAMPLE</b></h4><pre>
       # sample derived metric definitions
       bad_in_pkts = network.interface.in.errors + network.interface.in.drops
       # note the following would need to be on a single line ...
       disk.dev.read_pct = 100 * delta(disk.dev.read) /
                   (delta(disk.dev.read) + delta(disk.dev.write))
       disk.dev.read_pct(oneline) = percentage of disk reads
       disk.dev.read_pct(helptext) = '\
       Percentage of disk reads compared to the total number of
       disk reads and disk writes.'

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/sh.1.html">sh</a></b>(1), <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1), <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3), <b><a href="../man3/pmLookupText.3.html">pmLookupText</a></b>(3), <b><a href="../man3/pmRegisterDerived.3.html">pmRegisterDerived</a></b>(3), <b><a href="../man3/pmprintf.3.html">pmprintf</a></b>(3) and <b><a href="../man5/PMNS.5.html">PMNS</a></b>(5).

Performance Co-Pilot                                                                      <u><a href="../man3/PMLOADDERIVEDCONFIG.3.html">PMLOADDERIVEDCONFIG</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>