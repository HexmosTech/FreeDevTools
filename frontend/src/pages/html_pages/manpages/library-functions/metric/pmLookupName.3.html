<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmLookupName - translate performance metric names into PMIDs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmLookupName</b> - translate performance metric names into PMIDs

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>

       <b>int</b> <b>pmLookupName(int</b> <u>numpmid</u><b>,</b> <b>const</b> <b>char</b> <b>**</b><u>namelist</u><b>,</b> <b>pmID</b> <b>*</b><u>pmidlist</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Given  a  list  in  <u>namelist</u> containing <u>numpmid</u> full pathnames for performance metrics from a Performance
       Metrics Name Space (PMNS), <b>pmLookupName</b> returns the list of  associated  Performance  Metric  Identifiers
       (PMIDs) via <u>pmidlist</u>.

       The  result  from  <b>pmLookupName</b>  depends  on  the presence of any lookup failures, their severity and the
       number of metrics being looked up.

       1.  If there are no lookup failures, the return value will be <u>numpmid</u>.

       2.  If a fatal error is encountered, the return value will be less than 0.  For example  <b>PM_ERR_TOOSMALL</b>,
           <b>PM_ERR_NOPMNS</b> or <b>PM_ERR_IPC</b>.

       3.  If <u>numpmid</u> is greater than one and non-fatal error(s) are encountered, the return value is the number
           of metric names that have successfully been looked up (greater than or equal to zero and less than or
           equal to <u>numpmid</u>).

       4.  If <u>numpmid</u> is one and a non-fatal error is encountered, the return value is the error code (less than
           zero).

       When  errors are encountered, any metrics that cannot be looked up result in the corresponding element of
       <u>pmidlist</u> being set to <b>PM_ID_NULL</b>.

       The slightly convoluted error protocol allows bulk lookups, then probing for more error  details  in  the
       case of a specific failure, as shown in the <b>EXAMPLES</b> section below.

       Note  that the error protocol guarantees there is a 1:1 relationship between the elements of <u>namelist</u> and
       <u>pmidlist</u>, hence both lists contain exactly <u>numpmid</u> elements.  For this reason, the caller is expected  to
       have preallocated a suitably sized array for <u>pmidlist</u>.

</pre><h4><b>EXAMPLE</b></h4><pre>
       #include &lt;pcp/pmapi.h&gt;

       #define NUMPMID (sizeof(names)/sizeof(const char *))
       const char *names[] = {
                      "sample.bin",
                      "sample",
                      "sample.bog",
                      "sample.secret.bar",
                      "sample.secret.bar.bad"
                    };
       pmID pmids[NUMPMID];

       int
       main(int argc, char **argv)
       {
           int  sts;
           int  numpmid = NUMPMID;

           pmNewContext(PM_CONTEXT_HOST, "local:");

           sts = pmLookupName(numpmid, names, pmids);

           if (sts &lt; 0) {
            fprintf(stderr, "pmLookupName failed: %s0, pmErrStr(sts));
            <a href="../man1/exit.1.html">exit</a>(1);
           }
           if (sts != numpmid) {
            /*
             * some of the lookups failed ... report the reason(s)
             */
            int  i;

            for (i = 0; i &lt; numpmid; i++) {
                if (pmids[i] != PM_ID_NULL) continue;
                /* this one failed */
                sts = pmLookupName(1, &amp;names[i], &amp;pmids[i]);
                fprintf(stderr, "%s: lookup failed: %s0, names[i], pmErrStr(sts));
            }
            <a href="../man1/exit.1.html">exit</a>(1);
           }

           /* all good ... */
           ...
       }

</pre><h4><b>DIAGNOSTICS</b></h4><pre>
       <b>PM_ERR_TOOSMALL</b>
              <u>numpmid</u> must be at least 1

       <b>PM_ERR_NOPMNS</b>
              Failed  to  access  a  PMNS  for  operation.   Note that if the application hasn't a priori called
              <b><a href="../man3/pmLoadNameSpace.3.html">pmLoadNameSpace</a></b>(3) and wants to use the distributed PMNS, then a call to <b>pmLookupName</b> must be made
              after the creation of a context (see <b><a href="../man3/pmNewContext.3.html">pmNewContext</a></b>(3)).

       <b>PM_ERR_NAME</b>
              <u>namelist[0]</u> does not correspond to a valid metric name in the PMNS.

       <b>PM_ERR_NONLEAF</b>
              <u>namelist[0]</u> refers to a node in the PMNS but it was not a leaf node.

       <b>PM_ERR_*</b>
              Other diagnostics are for protocol failures when accessing the distributed PMNS.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3),  <b><a href="../man3/pmGetChildren.3.html">pmGetChildren</a></b>(3),  <b><a href="../man3/pmGetChildrenStatus.3.html">pmGetChildrenStatus</a></b>(3),  <b><a href="../man3/pmGetConfig.3.html">pmGetConfig</a></b>(3),  <b><a href="../man3/pmLoadNameSpace.3.html">pmLoadNameSpace</a></b>(3),  <b><a href="../man3/pmNameID.3.html">pmNameID</a></b>(3),
       <b><a href="../man3/pmNewContext.3.html">pmNewContext</a></b>(3), <b><a href="../man5/pcp.conf.5.html">pcp.conf</a></b>(5) and <b><a href="../man5/pcp.env.5.html">pcp.env</a></b>(5).

Performance Co-Pilot                                   PCP                                       <u><a href="../man3/PMLOOKUPNAME.3.html">PMLOOKUPNAME</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>