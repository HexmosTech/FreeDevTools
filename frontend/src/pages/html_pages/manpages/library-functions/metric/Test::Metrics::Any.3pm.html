<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"Test::Metrics::Any" - assert that code produces metrics via Metrics::Any</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libtest-metrics-any-perl">libtest-metrics-any-perl_0.01-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "Test::Metrics::Any" - assert that code produces metrics via Metrics::Any

</pre><h4><b>SYNOPSIS</b></h4><pre>
          use Test::More;
          use Test::Metrics::Any;

          use Module::Under::Test;

          is_metrics_from(
             sub { Module::Under::Test::do_a_thing for 1 .. 5 },
             {
                things_done =&gt; 5,
                time_taken =&gt; Test::Metrics::Any::positive,
             },
             'do_a_thing reported some metrics'
          );

          done_testing;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This test module helps write unit tests which assert that the code under test reports metrics via
       Metrics::Any.

       Loading this module automatically sets the Metrics::Any::Adapter type to "Test".

</pre><h4><b>FUNCTIONS</b></h4><pre>
   <b>is_metrics</b>
          is_metrics( \%metrics, $name )

       Asserts that the current value of every metric named in the given hash reference is set to the value
       provided. Values can either be given as exact numbers, or by one of the match functions mentioned in
       "PREDICATES".

       Key names in the given hash should match the name format used by Metrics::Any::Adapter::Test. Name
       components are joined by underscores, and any label tags are appended with spaces, as "name:value".

          {
             "a_basic_metric"               =&gt; 123,
             "a_labelled_metric label:here" =&gt; 456,
          }

       This function only checks the values of metrics actually mentioned in the hash given as its argument. It
       is not a failure for more metrics to have been reported by the code under test than are mentioned in the
       hash. This helps to ensure that new metrics added in code do not break existing tests that weren't set up
       to expect them.

   <b>is_metrics_from</b>
          is_metrics_from( $code, \%metrics, $name )

       Asserts the value of metrics reported by running the given piece of code.

       The metrics in the test adapter are cleared, then the code is invoked, then any metrics are checked in
       the same manner as "is_metrics".

</pre><h4><b>PREDICATES</b></h4><pre>
       As an alternative to expecting exact values for metrics, the following test functions can be provided
       instead to assert that the metric is behaving sensibly without needing to be an exact value. This could
       be useful for example when the exact number of bytes or timing measures can vary between test runs or
       platforms.

       These predicates are not exported but must be invoked fully-qualified.

   <b>positive</b>
          metric =&gt; Test::Metrics::Any::positive

       Asserts that the number is greater than zero. It must not be zero.

   <b>at_least</b>
          metric =&gt; Test::Metrics::Any::at_least( $n )

       Asserts that the number at least that given - it can be equal or greater.

   <b>greater_than</b>
          metric =&gt; Test::Metrics::Any::greater_than( $n )

       Asserts that the number is greater than that given - it must not be equal.

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.30.3                                       2020-06-13                            <u>Test::Metrics::<a href="../man3pm/Any.3pm.html">Any</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>