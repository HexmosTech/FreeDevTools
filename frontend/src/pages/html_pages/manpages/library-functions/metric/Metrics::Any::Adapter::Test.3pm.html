<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"Metrics::Any::Adapter::Test" - a metrics reporting adapter for unit testing</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmetrics-any-perl">libmetrics-any-perl_0.10-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "Metrics::Any::Adapter::Test" - a metrics reporting adapter for unit testing

</pre><h4><b>SYNOPSIS</b></h4><pre>
          use Test2::V0;
          use Metrics::Any::Adapter 'Test';

          {
             Metrics::Any::Adapter::Test-&gt;clear;

             # perform some work in the code under test

             is( Metrics::Any::Adapter::Test-&gt;metrics,
                "an_expected_metric = 1\n",
                'Metrics were reported while doing something'
             );
          }

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This Metrics::Any adapter type stores reported metrics locally, allowing access to them by the "metrics"
       method. This is useful to use in a unit test to check that the code under test reports the correct
       metrics.

       This adapter supports timer metrics by storing as distributions. By default, distributions store only a
       summary, giving the count and total duration. If required, the full values can be stored by setting
       "use_full_distributions".

       For predictable output of timer metrics in unit tests, a unit test may wish to use the
       "override_timer_duration" method.

       This adapter type supports batch mode reporting. Callbacks are invoked at the beginning of the "metrics"
       method.

</pre><h4><b>METHODS</b></h4><pre>
   <b>metrics</b>
          $result = Metrics::Any::Adapter::Test-&gt;metrics

       This class method returns a string describing all of the stored metric values.  Each is reported on a
       line formatted as

          name = value

       Each line, including the final one, is terminated by a linefeed. The metrics are sorted alphabetically.
       Any multi-part metric names will be joined with underscores ("_").

       Metrics that have additional labels are formatted with additional label names and label values in
       declared order after the name and before the "=" symbol:

          name l1:v1 l2:v2 = value

   <b>use_full_distributions</b>
          Metrics::Any::Adapter::Test-&gt;use_full_distributions;  # enables the option

          Metrics::Any::Adapter::Test-&gt;use_full_distributions( $enable );

       <u>Since</u> <u>version</u> <u>0.08.</u>

       If enabled, this option stores the full value of every reported observation into distributions, rathr
       than just the count-and-total summary.

       Full value distributions will be formatted as a sequence of lines containing the count of observations at
       that particular value, in square brackets, followed by the summary count.

          name[v1] = c1
          name[v2] = c2
          ...
          name_count = c

       In order not to be too sensitive to numerical rounding errors, values are stored to only 3 decimal
       places.

   <b>clear</b>
          Metrics::Any::Adapter::Test-&gt;clear

       This class method removes all of the stored values of reported metrics.

   <b>override_timer_duration</b>
          Metrics::Any::Adapter::Test-&gt;override_timer_duration( $duration )

       This class method sets a duration value, that any subsequent call to "inc_timer" will use instead of the
       value the caller actually passed in. This will ensure reliably predictable output in unit tests.

       Any value set here will be cleared by "clear".

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.36.0                                       2023-09-29                   <u>Metrics::Any::Adapter::<a href="../man3pm/Test.3pm.html">Test</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>