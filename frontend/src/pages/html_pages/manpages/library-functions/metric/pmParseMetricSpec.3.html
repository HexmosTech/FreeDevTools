<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pmParseMetricSpec, pmFreeMetricSpec - uniform metric specification parser</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpcp3-dev">libpcp3-dev_6.3.8-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>pmParseMetricSpec</b>, <b>pmFreeMetricSpec</b> - uniform metric specification parser

</pre><h4><b>C</b> <b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;pcp/pmapi.h&gt;</b>

       <b>int</b> <b>pmParseMetricSpec(const</b> <b>char</b> <b>*</b><u>string</u><b>,</b> <b>int</b> <u>isarch</u><b>,</b> <b>char</b> <b>*</b><u>source</u><b>,</b> <b>pmMetricSpec</b> <b>**</b><u>rsltp</u><b>,</b> <b>char</b> <b>**</b><u>errmsg</u><b>);</b>
       <b>void</b> <b>pmFreeMetricSpec(pmMetricSpec</b> <b>*</b><u>rslt</u><b>);</b>

       <b>cc</b> <b>...</b> <b>-lpcp</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>pmParseMetricSpec</b>  accepts  a  <b>string</b> specifying the name of a PCP performance metric, and optionally the
       source (either a hostname or a PCP archive filename) and instances for that metric.  The  syntax  is  de‐
       scribed in <b><a href="../man1/PCPIntro.1.html">PCPIntro</a></b>(1).

       If  neither <b>host</b> nor <b>archive</b> component of the metric specification is provided, the <b>isarch</b> and <b>source</b> ar‐
       guments are used to fill in the returned <b>pmMetricSpec</b> structure.

       The <b>pmMetricSpec</b> structure that is returned via <b>rsltp</b> represents the parsed <b>string</b> and has the  following
       declaration:

           typedef struct {
               int     isarch;      /* source type: 0 -&gt; live host, 1 -&gt; archive, 2 -&gt; local context */
               char    *source;     /* name of source host or archive */
               char    *metric;     /* name of metric */
               int     ninst;       /* number of instances, 0 -&gt; all */
               char    *inst[1];    /* array of instance names */
           } pmMetricSpec;

       <b>pmParseMetricSpec</b>  returns  0  if the given <b>string</b> was successfully parsed.  In this case all the storage
       allocated by <b>pmParseMetricSpec</b> can be released by a single call to <b><a href="../man3/free.3.html">free</a></b>(3)  using  the  address  returned
       from  <b>pmMetricSpec</b>  via  <b>rsltp</b>.  The convenience macro <b>pmFreeMetricSpec</b> is a thinly disguised wrapper for
       <b><a href="../man3/free.3.html">free</a></b>(3).

       <b>pmParseMetricSpec</b> returns <b>PM_ERR_GENERIC</b> and a dynamically allocated error message string in  <b>errmsg</b>,  if
       the given <b>string</b> does not parse.  Be sure to <b><a href="../man3/free.3.html">free</a></b>(3) the error message string in this situation.

       In  the  case  of  an  error,  <b>rsltp</b>  is  undefined.   In  the  case of success, <b>errmsg</b> is undefined.  If
       <b>rsltp-&gt;ninst</b> is 0, then <b>rsltp-&gt;inst[0]</b> is undefined.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/PMAPI.3.html">PMAPI</a></b>(3) and <b><a href="../man3/pmLookupName.3.html">pmLookupName</a></b>(3).

Performance Co-Pilot                                   PCP                                  <u><a href="../man3/PMPARSEMETRICSPEC.3.html">PMPARSEMETRICSPEC</a></u>(3)
</pre>
 </div>
</div></section>
</div>
</body>
</html>