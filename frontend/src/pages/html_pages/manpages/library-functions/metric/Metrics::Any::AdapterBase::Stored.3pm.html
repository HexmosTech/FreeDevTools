<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>"Metrics::Any::AdapterBase::Stored" - a base class for metrics adapters which store values</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libmetrics-any-perl">libmetrics-any-perl_0.10-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       "Metrics::Any::AdapterBase::Stored" - a base class for metrics adapters which store values

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This base class assists in creating Metrics::Any::Adapter classes which store values of reported metrics
       directly. These can then be retrieved later by the containing application, or the subclass code, by using
       the "walk" method.

       This base class internally stores counter and gauge metrics as single scalar values directly. In order to
       provide flexibility for a variety of use-cases, it requires assistance from the implementing class on how
       to store distribution and timer metrics. The implementing class should provide these methods, returning
       whatever values it wishes to implement them with. These values are stored by the base class, and handed
       back as part of the "walk" method.

       The base class stores a value for each unique set of labels and values on every metric; the subclass does
       not need to handle this.

</pre><h4><b>METHODS</b></h4><pre>
   <b>walk</b>
          $stored-&gt;walk( $code )

             $code-&gt;( $type, $name, $labels, $value )

       Given a CODE reference, this method invokes it once per labelset of every stored metric.

       For each labelset, $type will give the metric type (as a string, either "counter", "distribution",
       "gauge" or "timer"), $name gives the name it was registered with, $labels will be a reference to an even-
       sized array containing label names and values.

       For counter and gauge metrics, $value will be a numerical scalar giving the current value. For
       distribution and timer metrics, $value will be whatever the implementing class's corresponding
       "store_distribution" or "store_timer" method returns for them.

   <b>clear_values</b>
          $stored-&gt;clear_values

       Clears all of the metric storage. Every labelset of every metric is deleted.  The metric definitions
       themselves remain.

</pre><h4><b>REQUIRED</b> <b>METHODS</b></h4><pre>
   <b>store_distribution</b>
   <b>store_timer</b>
          $storage = $stored-&gt;store_distribution( $storage, $amount )

          $storage = $stored-&gt;store_timer( $storage, $duration )

       The implementing class must provide these two methods to assist in the management of storage for
       distribution and timer metrics.

       When a new observation for the metric is required, the method will be invoked, passing in the currently-
       stored perl value for the given metric and label values, and the new observation. Whatever the method
       returns is stored by the base class, to be passed in next time or used by the "walk" method.

       The base class stores this value directly and does not otherwise interact with it; letting the
       implementing class decide what is best. For example, a simple implementation may just store every
       observation individually by pushing them into an array; so the $storage would be an ARRAY reference:

          sub store_distribution
          {
             my $self = shift;
             my ( $storage, $amount ) = @_;

             push @$storage, $amount;

             return $storage;
          }

</pre><h4><b>AUTHOR</b></h4><pre>
       Paul Evans &lt;<a href="mailto:leonerd@leonerd.org.uk">leonerd@leonerd.org.uk</a>&gt;

perl v5.36.0                                       2023-09-29             <u>Metrics::Any::AdapterBase::<a href="../man3pm/Stored.3pm.html">Stored</a></u>(3pm)
</pre>
 </div>
</div></section>
</div>
</body>
</html>