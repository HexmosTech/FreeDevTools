<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>s390_runtime_instr - enable/disable s390 CPU run-time instrumentation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       s390_runtime_instr - enable/disable s390 CPU run-time instrumentation

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;asm/runtime_instr.h&gt;</b> /* Definition of <b>S390_*</b> constants */
       <b>#include</b> <b>&lt;sys/syscall.h&gt;</b>       /* Definition of <b>SYS_*</b> constants */
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <b>int</b> <b>syscall(SYS_s390_runtime_instr,</b> <b>int</b> <u>command</u><b>,</b> <b>int</b> <u>signum</u><b>);</b>

       <u>Note</u>: glibc provides no wrapper for <b>s390_runtime_instr</b>(), necessitating the use of <b><a href="../man2/syscall.2.html">syscall</a></b>(2).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>s390_runtime_instr</b>() system call starts or stops CPU run-time instrumentation for the calling thread.

       The  <u>command</u>  argument controls whether run-time instrumentation is started (<b>S390_RUNTIME_INSTR_START</b>, 1)
       or stopped (<b>S390_RUNTIME_INSTR_STOP</b>, 2) for the calling thread.

       The <u>signum</u> argument specifies the number of a real-time signal.  This argument  was  used  to  specify  a
       signal  number  that should be delivered to the thread if the run-time instrumentation buffer was full or
       if the run-time-instrumentation-halted interrupt had occurred.  This feature was never used, and in Linux
       4.4 support for this feature was removed; thus, in current kernels, this argument is ignored.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>s390_runtime_instr</b>() returns 0  and  enables  the  thread  for  run-time  instrumentation  by
       assigning  the  thread  a  default  run-time instrumentation control block.  The caller can then read and
       modify the control block and start the run-time instrumentation.  On error, -1 is returned and  <u>errno</u>  is
       set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EINVAL</b> The value specified in <u>command</u> is not a valid command.

       <b>EINVAL</b> The  value  specified  in  <u>signum</u>  is  not a real-time signal number.  From Linux 4.4 onwards, the
              <u>signum</u> argument has no effect, so that an invalid signal number will not result in an error.

       <b>ENOMEM</b> Allocating memory for the run-time instrumentation control block failed.

       <b>EOPNOTSUPP</b>
              The run-time instrumentation facility is not available.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux on s390.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 3.7.  System z EC12.

</pre><h4><b>NOTES</b></h4><pre>
       The <u>asm/runtime_instr.h</u> header file is available since Linux 4.16.

       Starting with Linux 4.4, support for signalling was removed, as was the check whether <u>signum</u> is  a  valid
       real-time  signal.   For  backwards  compatibility  with older kernels, it is recommended to pass a valid
       real-time signal number in <u>signum</u> and install a handler for that signal.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/syscall.2.html">syscall</a></b>(2), <b><a href="../man7/signal.7.html">signal</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                              <u><a href="../man2/s390_runtime_instr.2.html">s390_runtime_instr</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>