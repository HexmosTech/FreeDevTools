<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sched_setattr, sched_getattr - set and get scheduling policy and attributes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sched_setattr, sched_getattr - set and get scheduling policy and attributes

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/sched.h">sched.h</a>&gt;</b>            /* Definition of <b>SCHED_*</b> constants */
       <b>#include</b> <b>&lt;sys/syscall.h&gt;</b>      /* Definition of <b>SYS_*</b> constants */
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <b>int</b> <b>syscall(SYS_sched_setattr,</b> <b>pid_t</b> <u>pid</u><b>,</b> <b>struct</b> <b>sched_attr</b> <b>*</b><u>attr</u><b>,</b>
                   <b>unsigned</b> <b>int</b> <u>flags</u><b>);</b>
       <b>int</b> <b>syscall(SYS_sched_getattr,</b> <b>pid_t</b> <u>pid</u><b>,</b> <b>struct</b> <b>sched_attr</b> <b>*</b><u>attr</u><b>,</b>
                   <b>unsigned</b> <b>int</b> <u>size</u><b>,</b> <b>unsigned</b> <b>int</b> <u>flags</u><b>);</b>

       <u>Note</u>: glibc provides no wrappers for these system calls, necessitating the use of <b><a href="../man2/syscall.2.html">syscall</a></b>(2).

</pre><h4><b>DESCRIPTION</b></h4><pre>
   <b>sched_setattr()</b>
       The <b>sched_setattr</b>() system call sets the scheduling policy and associated attributes for the thread whose
       ID  is  specified in <u>pid</u>.  If <u>pid</u> equals zero, the scheduling policy and attributes of the calling thread
       will be set.

       Currently, Linux supports the following "normal" (i.e., non-real-time) scheduling policies as values that
       may be specified in <u>policy</u>:

       <b>SCHED_OTHER</b>   the standard round-robin time-sharing policy;

       <b>SCHED_BATCH</b>   for "batch" style execution of processes; and

       <b>SCHED_IDLE</b>    for running <u>very</u> low priority background jobs.

       Various "real-time" policies are also supported, for special time-critical applications that need precise
       control over the way in which runnable threads are selected for execution.  For the rules governing  when
       a  process  may use these policies, see <b><a href="../man7/sched.7.html">sched</a></b>(7).  The real-time policies that may be specified in <u>policy</u>
       are:

       <b>SCHED_FIFO</b>    a first-in, first-out policy; and

       <b>SCHED_RR</b>      a round-robin policy.

       Linux also provides the following policy:

       <b>SCHED_DEADLINE</b>
                     a deadline scheduling policy; see <b><a href="../man7/sched.7.html">sched</a></b>(7) for details.

       The <u>attr</u> argument is a pointer to a structure that defines the new scheduling policy and  attributes  for
       the specified thread.  This structure has the following form:

           struct sched_attr {
               u32 size;              /* Size of this structure */
               u32 sched_policy;      /* Policy (SCHED_*) */
               u64 sched_flags;       /* Flags */
               s32 sched_nice;        /* Nice value (SCHED_OTHER,
                                         SCHED_BATCH) */
               u32 sched_priority;    /* Static priority (SCHED_FIFO,
                                         SCHED_RR) */
               /* For SCHED_DEADLINE */
               u64 sched_runtime;
               u64 sched_deadline;
               u64 sched_period;

               /* Utilization hints */
               u32 sched_util_min;
               u32 sched_util_max;
           };

       The fields of the <u>sched_attr</u> structure are as follows:

       <b>size</b>   This  field  should be set to the size of the structure in bytes, as in <u>sizeof(struct</u> <u>sched_attr)</u>.
              If the provided structure is smaller than the kernel structure, any additional fields are  assumed
              to  be  '0'.   If  the provided structure is larger than the kernel structure, the kernel verifies
              that all additional fields are 0; if they are not, <b>sched_setattr</b>() fails with the error <b>E2BIG</b>  and
              updates <u>size</u> to contain the size of the kernel structure.

              The above behavior when the size of the user-space <u>sched_attr</u> structure does not match the size of
              the  kernel  structure  allows  for future extensibility of the interface.  Malformed applications
              that pass oversize structures won't break in the future if  the  size  of  the  kernel  <u>sched_attr</u>
              structure  is increased.  In the future, it could also allow applications that know about a larger
              user-space <u>sched_attr</u> structure to determine whether they are running on an older kernel that does
              not support the larger structure.

       <u>sched_policy</u>
              This field specifies the scheduling policy, as one of the <b>SCHED_*</b> values listed above.

       <u>sched_flags</u>
              This field contains zero or more of  the  following  flags  that  are  ORed  together  to  control
              scheduling behavior:

              <b>SCHED_FLAG_RESET_ON_FORK</b>
                     Children  created  by  <b><a href="../man2/fork.2.html">fork</a></b>(2) do not inherit privileged scheduling policies.  See <b><a href="../man7/sched.7.html">sched</a></b>(7)
                     for details.

              <b>SCHED_FLAG_RECLAIM</b> (since Linux 4.13)
                     This flag allows a <b>SCHED_DEADLINE</b> thread to reclaim bandwidth  unused  by  other  real-time
                     threads.

              <b>SCHED_FLAG_DL_OVERRUN</b> (since Linux 4.16)
                     This  flag  allows an application to get informed about run-time overruns in <b>SCHED_DEADLINE</b>
                     threads.  Such overruns may be caused by (for example) coarse execution time accounting  or
                     incorrect  parameter  assignment.  Notification takes the form of a <b>SIGXCPU</b> signal which is
                     generated on each overrun.

                     This <b>SIGXCPU</b> signal is <u>process-directed</u> (see <b><a href="../man7/signal.7.html">signal</a></b>(7)) rather than thread-directed.   This
                     is  probably  a  bug.   On  the one hand, <b>sched_setattr</b>() is being used to set a per-thread
                     attribute.  On the other hand, if the process-directed signal  is  delivered  to  a  thread
                     inside  the  process other than the one that had a run-time overrun, the application has no
                     way of knowing which thread overran.

              <b>SCHED_FLAG_UTIL_CLAMP_MIN</b>
              <b>SCHED_FLAG_UTIL_CLAMP_MAX</b> (both since Linux 5.3)
                     These flags indicate that the <u>sched_util_min</u> or <u>sched_util_max</u>  fields,  respectively,  are
                     present, representing the expected minimum and maximum utilization of the thread.

                     The  utilization  attributes  provide  the scheduler with boundaries within which it should
                     schedule the thread, potentially informing  its  decisions  regarding  task  placement  and
                     frequency selection.

       <u>sched_nice</u>
              This  field  specifies  the  nice  value  to be set when specifying <u>sched_policy</u> as <b>SCHED_OTHER</b> or
              <b>SCHED_BATCH</b>.  The nice value is a number in the range -20 (high priority) to +19  (low  priority);
              see <b><a href="../man7/sched.7.html">sched</a></b>(7).

       <u>sched_priority</u>
              This  field  specifies the static priority to be set when specifying <u>sched_policy</u> as <b>SCHED_FIFO</b> or
              <b>SCHED_RR</b>.   The  allowed  range  of  priorities  for  these  policies  can  be  determined   using
              <b><a href="../man2/sched_get_priority_min.2.html">sched_get_priority_min</a></b>(2)  and  <b><a href="../man2/sched_get_priority_max.2.html">sched_get_priority_max</a></b>(2).  For other policies, this field must be
              specified as 0.

       <u>sched_runtime</u>
              This field specifies the "Runtime" parameter for deadline scheduling.  The value is  expressed  in
              nanoseconds.   This  field,  and the next two fields, are used only for <b>SCHED_DEADLINE</b> scheduling;
              for further details, see <b><a href="../man7/sched.7.html">sched</a></b>(7).

       <u>sched_deadline</u>
              This field specifies the "Deadline" parameter for deadline scheduling.  The value is expressed  in
              nanoseconds.

       <u>sched_period</u>
              This  field  specifies  the "Period" parameter for deadline scheduling.  The value is expressed in
              nanoseconds.

       <u>sched_util_min</u>
       <u>sched_util_max</u> (both since Linux 5.3)
              These fields specify the expected minimum and maximum utilization, respectively.  They are ignored
              unless their  corresponding  <b>SCHED_FLAG_UTIL_CLAMP_MIN</b>  or  <b>SCHED_FLAG_UTIL_CLAMP_MAX</b>  is  set  in
              <u>sched_flags</u>.

              Utilization  is  a value in the range [0, 1024], representing the percentage of CPU time used by a
              task when running at the maximum frequency on the highest capacity CPU of the system.  This  is  a
              fixed point representation, where 1024 corresponds to 100%, and 0 corresponds to 0%.  For example,
              a  20%  utilization  task  is  a  task  running  for  2ms  every  10ms at maximum frequency and is
              represented by a utilization value of <u>0.2</u> <u>*</u> <u>1024</u> <u>=</u> <u>205</u>.

              A task with a minimum utilization value larger than 0 is more likely scheduled on  a  CPU  with  a
              capacity  big  enough to fit the specified value.  A task with a maximum utilization value smaller
              than 1024 is more likely scheduled on a CPU with no more capacity than the specified value.

              A task utilization boundary can be reset by setting its field to <b>UINT32_MAX</b> (since Linux 5.11).

       The <u>flags</u> argument is provided  to  allow  for  future  extensions  to  the  interface;  in  the  current
       implementation it must be specified as 0.

   <b>sched_getattr()</b>
       The  <b>sched_getattr</b>()  system  call  fetches  the  scheduling policy and the associated attributes for the
       thread whose ID is specified in <u>pid</u>.  If <u>pid</u> equals zero, the scheduling policy  and  attributes  of  the
       calling thread will be retrieved.

       The  <u>size</u>  argument  should  be  set to the size of the <u>sched_attr</u> structure as known to user space.  The
       value must be at least as large as the size of the initially published <u>sched_attr</u> structure, or the  call
       fails with the error <b>EINVAL</b>.

       The  retrieved  scheduling  attributes are placed in the fields of the <u>sched_attr</u> structure pointed to by
       <u>attr</u>.  The kernel sets <u>attr.size</u> to the size of its <u>sched_attr</u> structure.

       If the caller-provided <u>attr</u> buffer is larger than the kernel's <u>sched_attr</u> structure, the additional bytes
       in the user-space structure are not touched.  If the caller-provided structure is smaller than the kernel
       <u>sched_attr</u> structure, the kernel will silently not return any values which would be  stored  outside  the
       provided  space.   As  with  <b>sched_setattr</b>(),  these  semantics  allow  for  future  extensibility of the
       interface.

       The <u>flags</u> argument is provided  to  allow  for  future  extensions  to  the  interface;  in  the  current
       implementation it must be specified as 0.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  success, <b>sched_setattr</b>() and <b>sched_getattr</b>() return 0.  On error, -1 is returned, and <u>errno</u> is set to
       indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>sched_getattr</b>() and <b>sched_setattr</b>() can both fail for the following reasons:

       <b>EINVAL</b> <u>attr</u> is NULL; or <u>pid</u> is negative; or <u>flags</u> is not zero.

       <b>ESRCH</b>  The thread whose ID is <u>pid</u> could not be found.

       In addition, <b>sched_getattr</b>() can fail for the following reasons:

       <b>E2BIG</b>  The buffer specified by <u>size</u> and <u>attr</u> is too small.

       <b>EINVAL</b> <u>size</u> is invalid; that is, it is smaller than the initial version of the <u>sched_attr</u>  structure  (48
              bytes) or larger than the system page size.

       In addition, <b>sched_setattr</b>() can fail for the following reasons:

       <b>E2BIG</b>  The  buffer specified by <u>size</u> and <u>attr</u> is larger than the kernel structure, and one or more of the
              excess bytes is nonzero.

       <b>EBUSY</b>  <b>SCHED_DEADLINE</b> admission control failure, see <b><a href="../man7/sched.7.html">sched</a></b>(7).

       <b>EINVAL</b> <u>attr.sched_policy</u> is not one of the recognized policies.

       <b>EINVAL</b> <u>attr.sched_flags</u> contains a flag other than <b>SCHED_FLAG_RESET_ON_FORK</b>.

       <b>EINVAL</b> <u>attr.sched_priority</u> is invalid.

       <b>EINVAL</b> <u>attr.sched_policy</u> is <b>SCHED_DEADLINE</b>, and the deadline scheduling parameters in <u>attr</u> are invalid.

       <b>EINVAL</b> <u>attr.sched_flags</u>   contains   <b>SCHED_FLAG_UTIL_CLAMP_MIN</b>    or    <b>SCHED_FLAG_UTIL_CLAMP_MAX</b>,    and
              <u>attr.sched_util_min</u> or <u>attr.sched_util_max</u> are out of bounds.

       <b>EOPNOTSUPP</b>
              <b>SCHED_FLAG_UTIL_CLAMP</b> was provided, but the kernel was not built with <b>CONFIG_UCLAMP_TASK</b> support.

       <b>EPERM</b>  The caller does not have appropriate privileges.

       <b>EPERM</b>  The  CPU affinity mask of the thread specified by <u>pid</u> does not include all CPUs in the system (see
              <b><a href="../man2/sched_setaffinity.2.html">sched_setaffinity</a></b>(2)).

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 3.14.

</pre><h4><b>NOTES</b></h4><pre>
       glibc does not provide wrappers for these system calls; call them using <b><a href="../man2/syscall.2.html">syscall</a></b>(2).

       <b>sched_setattr</b>() provides a superset of the  functionality  of  <b><a href="../man2/sched_setscheduler.2.html">sched_setscheduler</a></b>(2),  <b><a href="../man2/sched_setparam.2.html">sched_setparam</a></b>(2),
       <b><a href="../man2/nice.2.html">nice</a></b>(2),  and  (other than the ability to set the priority of all processes belonging to a specified user
       or all processes in a specified group) <b><a href="../man2/setpriority.2.html">setpriority</a></b>(2).  Analogously, <b>sched_getattr</b>() provides a  superset
       of the functionality of <b><a href="../man2/sched_getscheduler.2.html">sched_getscheduler</a></b>(2), <b><a href="../man2/sched_getparam.2.html">sched_getparam</a></b>(2), and (partially) <b><a href="../man2/getpriority.2.html">getpriority</a></b>(2).

</pre><h4><b>BUGS</b></h4><pre>
       In  Linux versions up to 3.15, <b>sched_setattr</b>() failed with the error <b>EFAULT</b> instead of <b>E2BIG</b> for the case
       described in ERRORS.

       Up to Linux 5.3, <b>sched_getattr</b>() failed with the error <b>EFBIG</b> if the in-kernel  <u>sched_attr</u>  structure  was
       larger than the <u>size</u> passed by user space.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/chrt.1.html">chrt</a></b>(1), <b><a href="../man2/nice.2.html">nice</a></b>(2), <b><a href="../man2/sched_get_priority_max.2.html">sched_get_priority_max</a></b>(2), <b><a href="../man2/sched_get_priority_min.2.html">sched_get_priority_min</a></b>(2), <b><a href="../man2/sched_getaffinity.2.html">sched_getaffinity</a></b>(2),
       <b><a href="../man2/sched_getparam.2.html">sched_getparam</a></b>(2), <b><a href="../man2/sched_getscheduler.2.html">sched_getscheduler</a></b>(2), <b><a href="../man2/sched_rr_get_interval.2.html">sched_rr_get_interval</a></b>(2), <b><a href="../man2/sched_setaffinity.2.html">sched_setaffinity</a></b>(2),
       <b><a href="../man2/sched_setparam.2.html">sched_setparam</a></b>(2), <b><a href="../man2/sched_setscheduler.2.html">sched_setscheduler</a></b>(2), <b><a href="../man2/sched_yield.2.html">sched_yield</a></b>(2), <b><a href="../man2/setpriority.2.html">setpriority</a></b>(2), <b><a href="../man3/pthread_getschedparam.3.html">pthread_getschedparam</a></b>(3),
       <b><a href="../man3/pthread_setschedparam.3.html">pthread_setschedparam</a></b>(3), <b><a href="../man3/pthread_setschedprio.3.html">pthread_setschedprio</a></b>(3), <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7), <b><a href="../man7/cpuset.7.html">cpuset</a></b>(7), <b><a href="../man7/sched.7.html">sched</a></b>(7)

Linux man-pages 6.9.1                              2024-06-13                                   <u><a href="../man2/sched_setattr.2.html">sched_setattr</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>