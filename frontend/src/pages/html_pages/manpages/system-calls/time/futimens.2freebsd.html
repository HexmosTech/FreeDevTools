<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>futimens, utimensat — set file access and modification times</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       futimens, utimensat — set file access and modification times

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/stat.h&gt;</b>

       <u>int</u>
       <b>futimens</b>(<u>int</u> <u>fd</u>, <u>const</u> <u>struct</u> <u>timespec</u> <u>times[2]</u>);

       <u>int</u>
       <b>utimensat</b>(<u>int</u> <u>fd</u>, <u>const</u> <u>char</u> <u>*path</u>, <u>const</u> <u>struct</u> <u>timespec</u> <u>times[2]</u>, <u>int</u> <u>flag</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  access and modification times of the file named by <u>path</u> or referenced by <u>fd</u> are changed as specified
       by the argument <u>times</u>.  The inode-change-time of the file is set to the current time.

       If <u>path</u> specifies a relative path, it is relative to the current working directory if <u>fd</u> is AT_FDCWD  and
       otherwise relative to the directory associated with the file descriptor <u>fd</u>.

       The  <u>tv_nsec</u>  field  of a <u>timespec</u> structure can be set to the special value UTIME_NOW to set the current
       time, or to UTIME_OMIT to leave the time unchanged.  In either case, the <u>tv_sec</u> field is ignored.

       If <u>times</u> is non-NULL, it is assumed to point to an array of two timespec structures.  The access time  is
       set  to  the  value  of  the  first  element, and the modification time is set to the value of the second
       element.  For file systems that support file birth (creation) times (such as UFS2), the birth  time  will
       be  set  to  the  value of the second element if the second element is older than the currently set birth
       time.  To set both a birth time and a modification time, two calls are required; the  first  to  set  the
       birth  time  and  the  second to set the (presumably newer) modification time.  Ideally a new system call
       will be added that allows the setting of all three times at once.  If <u>times</u> is NULL, this  is  equivalent
       to passing a pointer to an array of two timespec structures with both <u>tv_nsec</u> fields set to UTIME_NOW.

       If  both <u>tv_nsec</u> fields are UTIME_OMIT, the timestamps remain unchanged and no permissions are needed for
       the file itself, although search permissions may be required for the path prefix.  The call  may  or  may
       not succeed if the named file does not exist.

       If  both <u>tv_nsec</u> fields are UTIME_NOW, the caller must be the owner of the file, have permission to write
       the file, or be the super-user.

       For all other values of the timestamps, the caller must be the owner of the file or be the super-user.

       The values for the <u>flag</u> argument of the <b>utimensat</b>() system call are constructed by a bitwise-inclusive OR
       of flags from the following list, defined in &lt;<u>fcntl.h</u>&gt;:

       AT_SYMLINK_NOFOLLOW
               If <u>path</u> names a symbolic link, the symbolic link's times are changed.   By  default,  <b>utimensat</b>()
               changes the times of the file referenced by the symbolic link.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Upon  successful  completion,  the value 0 is returned; otherwise the value -1 is returned and the global
       variable <u>errno</u> is set to indicate the error.

</pre><h4><b>COMPATIBILITY</b></h4><pre>
       If the running kernel does not support  this  system  call,  a  wrapper  emulates  it  using  <u><a href="../man2/fstatat.2.html">fstatat</a></u>(2),
       <u><a href="../man2/futimesat.2.html">futimesat</a></u>(2)  and  <u><a href="../man2/lutimes.2.html">lutimes</a></u>(2).   As a result, timestamps will be rounded down to the nearest microsecond,
       UTIME_OMIT is not atomic and AT_SYMLINK_NOFOLLOW is  not  available  with  a  path  relative  to  a  file
       descriptor.

</pre><h4><b>ERRORS</b></h4><pre>
       These system calls will fail if:

       [EACCES]           The  <u>times</u>  argument  is NULL, or both <u>tv_nsec</u> values are UTIME_NOW, and the effective
                          user ID of the process does not match the owner of the file, and  is  not  the  super-
                          user, and write access is denied.

       [EFAULT]           The <u>times</u> argument points outside the process's allocated address space.

       [EINVAL]           The  <u>tv_nsec</u>  component  of at least one of the values specified by the <u>times</u> argument
                          has a value less than 0 or greater than 999999999 and is not  equal  to  UTIME_NOW  or
                          UTIME_OMIT.

       [EIO]              An I/O error occurred while reading or writing the affected inode.

       [EINTEGRITY]       Corrupted data was detected while reading from the file system.

       [EPERM]            The  <u>times</u>  argument  is  not NULL nor are both <u>tv_nsec</u> values UTIME_NOW, nor are both
                          <u>tv_nsec</u> values UTIME_OMIT and the calling process's effective user ID does  not  match
                          the owner of the file and is not the super-user.

       [EPERM]            The  named  file  has its immutable or append-only flag set, see the <u><a href="../man2/chflags.2.html">chflags</a></u>(2) manual
                          page for more information.

       [EROFS]            The file system containing the file is mounted read-only.

       The <b>futimens</b>() system call will fail if:

       [EBADF]            The <u>fd</u> argument does not refer to a valid descriptor.

       The <b>utimensat</b>() system call will fail if:

       [EACCES]           Search permission is denied for a component of the path prefix.

       [EBADF]            The <u>path</u> argument does not specify an absolute path and the  <u>fd</u>  argument  is  neither
                          AT_FDCWD nor a valid file descriptor.

       [EFAULT]           The <u>path</u> argument points outside the process's allocated address space.

       [ELOOP]            Too many symbolic links were encountered in translating the pathname.

       [ENAMETOOLONG]     A  component  of  a  pathname  exceeded  NAME_MAX  characters,  or an entire path name
                          exceeded PATH_MAX characters.

       [ENOENT]           The named file does not exist.

       [ENOTDIR]          A component of the path prefix is not a directory.

       [ENOTDIR]          The <u>path</u> argument is not an absolute path and  <u>fd</u>  is  neither  AT_FDCWD  nor  a  file
                          descriptor associated with a directory.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/chflags.2.html">chflags</a></u>(2), <u><a href="../man2/stat.2.html">stat</a></u>(2), <u><a href="../man2/symlink.2.html">symlink</a></u>(2), <u><a href="../man2/utimes.2.html">utimes</a></u>(2), <u><a href="../man3/utime.3.html">utime</a></u>(3), <u><a href="../man7/symlink.7.html">symlink</a></u>(7)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>futimens</b>() and <b>utimensat</b>() system calls are expected to conform to IEEE Std 1003.1-2008 (“POSIX.1”).

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>futimens</b>() and <b>utimensat</b>() system calls appeared in FreeBSD 10.3.

Debian                                           March 30, 2020                                     <u><a href="../man2/UTIMENSAT.2.html">UTIMENSAT</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>