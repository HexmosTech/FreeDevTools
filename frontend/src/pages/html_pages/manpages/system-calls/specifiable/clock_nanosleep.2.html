<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clock_nanosleep - high-resolution sleep with specifiable clock</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       clock_nanosleep - high-resolution sleep with specifiable clock

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>), since glibc 2.17

       Before glibc 2.17, Real-time library (<u>librt</u>, <u>-lrt</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/time.h">time.h</a>&gt;</b>

       <b>int</b> <b>clock_nanosleep(clockid_t</b> <u>clockid</u><b>,</b> <b>int</b> <u>flags</u><b>,</b>
                           <b>const</b> <b>struct</b> <b>timespec</b> <b>*</b><u>t</u><b>,</b>
                           <b>struct</b> <b>timespec</b> <b>*_Nullable</b> <u>remain</u><b>);</b>

   Feature Test Macro Requirements for glibc (see <b><a href="../man7/feature_test_macros.7.html">feature_test_macros</a></b>(7)):

       <b>clock_nanosleep</b>():
           _POSIX_C_SOURCE &gt;= 200112L

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Like  <b><a href="../man2/nanosleep.2.html">nanosleep</a></b>(2),  <b>clock_nanosleep</b>()  allows the calling thread to sleep for an interval specified with
       nanosecond precision.  It differs in allowing the caller to select the  clock  against  which  the  sleep
       interval is to be measured, and in allowing the sleep interval to be specified as either an absolute or a
       relative value.

       The time values passed to and returned by this call are specified using <b><a href="../man3/timespec.3.html">timespec</a></b>(3) structures.

       The  <u>clockid</u>  argument  specifies  the  clock  against  which the sleep interval is to be measured.  This
       argument can have one of the following values:

       <b>CLOCK_REALTIME</b>
              A settable system-wide real-time clock.

       <b>CLOCK_TAI</b> (since Linux 3.10)
              A system-wide clock derived from wall-clock time but counting leap seconds.

       <b>CLOCK_MONOTONIC</b>
              A nonsettable, monotonically increasing clock that measures time since some unspecified  point  in
              the past that does not change after system startup.

       <b>CLOCK_BOOTTIME</b> (since Linux 2.6.39)
              Identical to <b>CLOCK_MONOTONIC</b>, except that it also includes any time that the system is suspended.

       <b>CLOCK_PROCESS_CPUTIME_ID</b>
              A settable per-process clock that measures CPU time consumed by all threads in the process.

       See  <b><a href="../man2/clock_getres.2.html">clock_getres</a></b>(2)  for  further  details  on these clocks.  In addition, the CPU clock IDs returned by
       <b><a href="../man3/clock_getcpuclockid.3.html">clock_getcpuclockid</a></b>(3) and <b><a href="../man3/pthread_getcpuclockid.3.html">pthread_getcpuclockid</a></b>(3) can also be passed in <u>clockid</u>.

       If <u>flags</u> is 0, then the value specified in <u>t</u> is interpreted as an interval relative to the current  value
       of the clock specified by <u>clockid</u>.

       If  <u>flags</u>  is <b>TIMER_ABSTIME</b>, then <u>t</u> is interpreted as an absolute time as measured by the clock, <u>clockid</u>.
       If <u>t</u> is less than or equal to the current value of the clock, then <b>clock_nanosleep</b>() returns  immediately
       without suspending the calling thread.

       <b>clock_nanosleep</b>()  suspends  the execution of the calling thread until either at least the time specified
       by <u>t</u> has elapsed, or a signal is delivered that causes a signal handler to be called or  that  terminates
       the process.

       If  the  call  is  interrupted  by  a  signal  handler, <b>clock_nanosleep</b>() fails with the error <b>EINTR</b>.  In
       addition, if <u>remain</u> is not NULL, and <u>flags</u> was not <b>TIMER_ABSTIME</b>, it returns the remaining  unslept  time
       in <u>remain</u>.  This value can then be used to call <b>clock_nanosleep</b>() again and complete a (relative) sleep.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  successfully  sleeping  for  the  requested  interval,  <b>clock_nanosleep</b>()  returns 0.  If the call is
       interrupted by a signal handler or encounters an error, then it returns one of the positive error  number
       listed in ERRORS.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EFAULT</b> <u>t</u> or <u>remain</u> specified an invalid address.

       <b>EINTR</b>  The sleep was interrupted by a signal handler; see <b><a href="../man7/signal.7.html">signal</a></b>(7).

       <b>EINVAL</b> The value in the <u>tv_nsec</u> field was not in the range [0, 999999999] or <u>tv_sec</u> was negative.

       <b>EINVAL</b> <u>clockid</u> was invalid.  (<b>CLOCK_THREAD_CPUTIME_ID</b> is not a permitted value for <u>clockid</u>.)

       <b>ENOTSUP</b>
              The kernel does not support sleeping against this <u>clockid</u>.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001.  Linux 2.6, glibc 2.1.

</pre><h4><b>NOTES</b></h4><pre>
       If  the  interval  specified  in  <u>t</u>  is  not  an  exact multiple of the granularity underlying clock (see
       <b><a href="../man7/time.7.html">time</a></b>(7)), then the interval will be rounded up to  the  next  multiple.   Furthermore,  after  the  sleep
       completes,  there  may  still  be  a  delay before the CPU becomes free to once again execute the calling
       thread.

       Using an absolute timer is  useful  for  preventing  timer  drift  problems  of  the  type  described  in
       <b><a href="../man2/nanosleep.2.html">nanosleep</a></b>(2).   (Such  problems  are exacerbated in programs that try to restart a relative sleep that is
       repeatedly interrupted by signals.)  To perform  a  relative  sleep  that  avoids  these  problems,  call
       <b><a href="../man2/clock_gettime.2.html">clock_gettime</a></b>(2)  for  the  desired  clock, add the desired interval to the returned time value, and then
       call <b>clock_nanosleep</b>() with the <b>TIMER_ABSTIME</b> flag.

       <b>clock_nanosleep</b>() is never restarted after being interrupted by a signal handler, regardless of  the  use
       of the <b><a href="../man2/sigaction.2.html">sigaction</a></b>(2) <b>SA_RESTART</b> flag.

       The  <u>remain</u>  argument is unused, and unnecessary, when <u>flags</u> is <b>TIMER_ABSTIME</b>.  (An absolute sleep can be
       restarted using the same <u>t</u> argument.)

       POSIX.1 specifies that <b>clock_nanosleep</b>() has no effect on signals dispositions or the signal mask.

       POSIX.1 specifies that after changing the value of the <b>CLOCK_REALTIME</b> clock via <b><a href="../man2/clock_settime.2.html">clock_settime</a></b>(2), the new
       clock  value  shall  be  used  to  determine  the  time  at  which  a  thread  blocked  on  an   absolute
       <b>clock_nanosleep</b>() will wake up; if the new clock value falls past the end of the sleep interval, then the
       <b>clock_nanosleep</b>() call will return immediately.

       POSIX.1  specifies that changing the value of the <b>CLOCK_REALTIME</b> clock via <b><a href="../man2/clock_settime.2.html">clock_settime</a></b>(2) shall have no
       effect on a thread that is blocked on a relative <b>clock_nanosleep</b>().

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/clock_getres.2.html">clock_getres</a></b>(2), <b><a href="../man2/nanosleep.2.html">nanosleep</a></b>(2), <b><a href="../man2/restart_syscall.2.html">restart_syscall</a></b>(2),  <b><a href="../man2/timer_create.2.html">timer_create</a></b>(2),  <b><a href="../man3/sleep.3.html">sleep</a></b>(3),  <b><a href="../man3/timespec.3.html">timespec</a></b>(3),  <b><a href="../man3/usleep.3.html">usleep</a></b>(3),
       <b><a href="../man7/time.7.html">time</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                 <u><a href="../man2/clock_nanosleep.2.html">clock_nanosleep</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>