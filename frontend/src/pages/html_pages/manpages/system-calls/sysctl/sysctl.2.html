<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sysctl - read/write system parameters</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sysctl - read/write system parameters

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/linux/sysctl.h">linux/sysctl.h</a>&gt;</b>

       <b>[[deprecated]]</b> <b>int</b> <b>_sysctl(struct</b> <b>__sysctl_args</b> <b>*</b><u>args</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>This</b> <b>system</b> <b>call</b> <b>no</b> <b>longer</b> <b>exists</b> <b>on</b> <b>current</b> <b>kernels!</b>  See NOTES.

       The  <b>_sysctl</b>()  call  reads  and/or  writes kernel parameters.  For example, the hostname, or the maximum
       number of open files.  The argument has the form

           struct __sysctl_args {
               int    *name;    /* integer vector describing variable */
               int     nlen;    /* length of this vector */
               void   *oldval;  /* 0 or address where to store old value */
               size_t *oldlenp; /* available room for old value,
                                   overwritten by actual size of old value */
               void   *newval;  /* 0 or address of new value */
               size_t  newlen;  /* size of new value */
           };

       This call does a search in a tree structure, possibly resembling a directory tree under <u><a href="file:/proc/sys">/proc/sys</a></u>, and if
       the requested item is found calls some appropriate routine to read or modify the value.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, <b>_sysctl</b>() returns 0.  Otherwise, a value of -1 is returned and <u>errno</u>  is  set
       to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EACCES</b>
       <b>EPERM</b>  No  search permission for one of the encountered "directories", or no read permission where <u>oldval</u>
              was nonzero, or no write permission where <u>newval</u> was nonzero.

       <b>EFAULT</b> The invocation asked for the previous value by setting <u>oldval</u> non-NULL, but allowed zero  room  in
              <u>oldlenp</u>.

       <b>ENOTDIR</b>
              <u>name</u> was not found.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 1.3.57.  Removed in Linux 5.5, glibc 2.32.

       It  originated  in  4.4BSD.   Only  Linux  has the <u><a href="file:/proc/sys">/proc/sys</a></u> mirror, and the object naming schemes differ
       between Linux and 4.4BSD, but the declaration of the <b>sysctl</b>() function is the same in both.

</pre><h4><b>NOTES</b></h4><pre>
       Use of this system call was long discouraged: since Linux 2.6.24, uses of  this  system  call  result  in
       warnings  in  the  kernel  log, and in Linux 5.5, the system call was finally removed.  Use the <u><a href="file:/proc/sys">/proc/sys</a></u>
       interface instead.

       Note that on older kernels where this system call still exists, it is available only if  the  kernel  was
       configured with the <b>CONFIG_SYSCTL_SYSCALL</b> option.  Furthermore, glibc does not provide a wrapper for this
       system call, necessitating the use of <b><a href="../man2/syscall.2.html">syscall</a></b>(2).

</pre><h4><b>BUGS</b></h4><pre>
       The object names vary between kernel versions, making this system call worthless for applications.

       Not all available objects are properly documented.

       It is not yet possible to change operating system by writing to <u><a href="file:/proc/sys/kernel/ostype">/proc/sys/kernel/ostype</a></u>.

</pre><h4><b>EXAMPLES</b></h4><pre>
       #define _GNU_SOURCE
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;<a href="file:/usr/include/string.h">string.h</a>&gt;
       #include &lt;sys/syscall.h&gt;
       #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;

       #include &lt;<a href="file:/usr/include/linux/sysctl.h">linux/sysctl.h</a>&gt;

       #define ARRAY_SIZE(arr)  (sizeof(arr) / sizeof((arr)[0]))

       int _sysctl(struct __sysctl_args *args);

       #define OSNAMESZ 100

       int
       main(void)
       {
           int                   name[] = { CTL_KERN, KERN_OSTYPE };
           char                  osname[OSNAMESZ];
           size_t                osnamelth;
           struct __sysctl_args  args;

           memset(&amp;args, 0, sizeof(args));
           args.name = name;
           args.nlen = ARRAY_SIZE(name);
           args.oldval = osname;
           args.oldlenp = &amp;osnamelth;

           osnamelth = sizeof(osname);

           if (syscall(SYS__sysctl, &amp;args) == -1) {
               perror("_sysctl");
               exit(EXIT_FAILURE);
           }
           printf("This machine is running %*s\n", (int) osnamelth, osname);
           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/proc.5.html">proc</a></b>(5)

Linux man-pages 6.9.1                              2024-06-15                                          <u><a href="../man2/sysctl.2.html">sysctl</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>