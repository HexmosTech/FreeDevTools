<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>msync - synchronize a file with a memory map</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       msync - synchronize a file with a memory map

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/mman.h&gt;</b>

       <b>int</b> <b>msync(void</b> <u>addr</u><b>[.</b><u>length</u><b>],</b> <b>size_t</b> <u>length</u><b>,</b> <b>int</b> <u>flags</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>msync</b>() flushes changes made to the in-core copy of a file that was mapped into memory using <b><a href="../man2/mmap.2.html">mmap</a></b>(2) back
       to  the filesystem.  Without use of this call, there is no guarantee that changes are written back before
       <b><a href="../man2/munmap.2.html">munmap</a></b>(2) is called.  To be more precise, the part of the  file  that  corresponds  to  the  memory  area
       starting at <u>addr</u> and having length <u>length</u> is updated.

       The  <u>flags</u>  argument should specify exactly one of <b>MS_ASYNC</b> and <b>MS_SYNC</b>, and may additionally include the
       <b>MS_INVALIDATE</b> bit.  These bits have the following meanings:

       <b>MS_ASYNC</b>
              Specifies that an update be scheduled, but the call returns immediately.

       <b>MS_SYNC</b>
              Requests an update and waits for it to complete.

       <b>MS_INVALIDATE</b>
              Asks to invalidate other mappings of the same file (so that they can be  updated  with  the  fresh
              values just written).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, zero is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EBUSY</b>  <b>MS_INVALIDATE</b> was specified in <u>flags</u>, and a memory lock exists for the specified address range.

       <b>EINVAL</b> <u>addr</u>  is  not  a multiple of PAGESIZE; or any bit other than <b>MS_ASYNC</b> | <b>MS_INVALIDATE</b> | <b>MS_SYNC</b> is
              set in <u>flags</u>; or both <b>MS_SYNC</b> and <b>MS_ASYNC</b> are set in <u>flags</u>.

       <b>ENOMEM</b> The indicated memory (or part of it) was not mapped.

</pre><h4><b>VERSIONS</b></h4><pre>
       According to POSIX, either <b>MS_SYNC</b> or <b>MS_ASYNC</b> must be specified in <u>flags</u>, and indeed failure to  include
       one  of these flags will cause <b>msync</b>() to fail on some systems.  However, Linux permits a call to <b>msync</b>()
       that specifies neither of these flags, with semantics  that  are  (currently)  equivalent  to  specifying
       <b>MS_ASYNC</b>.  (Since Linux 2.6.19, <b>MS_ASYNC</b> is in fact a no-op, since the kernel properly tracks dirty pages
       and  flushes  them  to storage as necessary.)  Notwithstanding the Linux behavior, portable, future-proof
       applications should ensure that they specify either <b>MS_SYNC</b> or <b>MS_ASYNC</b> in <u>flags</u>.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001.

       This call was introduced in Linux 1.3.21, and then used <b>EFAULT</b> instead of <b>ENOMEM</b>.  In Linux 2.4.19,  this
       was changed to the POSIX value <b>ENOMEM</b>.

       On  POSIX  systems on which <b>msync</b>() is available, both <b>_POSIX_MAPPED_FILES</b> and <b>_POSIX_SYNCHRONIZED_IO</b> are
       defined in <u>&lt;unistd.h&gt;</u> to a value greater than 0.  (See also <b><a href="../man3/sysconf.3.html">sysconf</a></b>(3).)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/mmap.2.html">mmap</a></b>(2)

       B.O. Gallmeister, POSIX.4, O'Reilly, pp. 128–129 and 389–391.

Linux man-pages 6.9.1                              2024-05-02                                           <u><a href="../man2/msync.2.html">msync</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>