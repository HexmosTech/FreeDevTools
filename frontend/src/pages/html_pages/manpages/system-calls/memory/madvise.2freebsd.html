<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>madvise, posix_madvise — give advice about use of memory</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       madvise, posix_madvise — give advice about use of memory

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/mman.h&gt;</b>

       <u>int</u>
       <b>madvise</b>(<u>void</u> <u>*addr</u>, <u>size_t</u> <u>len</u>, <u>int</u> <u>behav</u>);

       <u>int</u>
       <b>posix_madvise</b>(<u>void</u> <u>*addr</u>, <u>size_t</u> <u>len</u>, <u>int</u> <u>behav</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>madvise</b>()  system  call allows a process that has knowledge of its memory behavior to describe it to
       the system.  The <b>posix_madvise</b>() interface is identical, except it returns an error number on  error  and
       does not modify <u>errno</u>, and is provided for standards conformance.

       The known behaviors are:

       MADV_NORMAL      Tells the system to revert to the default paging behavior.

       MADV_RANDOM      Is  a  hint  that  pages  will  be  accessed  randomly,  and  prefetching  is likely not
                        advantageous.

       MADV_SEQUENTIAL  Causes the VM system to depress the priority of pages immediately preceding a given page
                        when it is faulted in.

       MADV_WILLNEED    Causes pages that are in a given  virtual  address  range  to  temporarily  have  higher
                        priority,  and  if  they  are  in  memory,  decrease the likelihood of them being freed.
                        Additionally, the pages that are already in memory will be immediately mapped  into  the
                        process, thereby eliminating unnecessary overhead of going through the entire process of
                        faulting the pages in.  This WILL NOT fault pages in from backing store, but quickly map
                        the pages already in memory into the calling process.

       MADV_DONTNEED    Allows  the  VM  system  to  decrease  the  in-memory priority of pages in the specified
                        address range.  Consequently, future references to this address range are more likely to
                        incur a page fault.

       MADV_FREE        Gives the VM system the freedom to free pages, and tells the system that information  in
                        the  specified  page range is no longer important.  This is an efficient way of allowing
                        <u><a href="../man3/malloc.3.html">malloc</a></u>(3) to free pages anywhere in the address space, while keeping the  address  space
                        valid.   The  next time that the page is referenced, the page might be demand zeroed, or
                        might contain the data that was there before the MADV_FREE  call.   References  made  to
                        that  address  space range will not make the VM system page the information back in from
                        backing store until the page is modified again.

       MADV_NOSYNC      Request that the system not flush the data associated with this map to physical  backing
                        store  unless  it  needs to.  Typically this prevents the file system update daemon from
                        gratuitously writing pages dirtied by the VM system to physical disk.  Note that VM/file
                        system coherency is always maintained, this feature simply ensures that the mapped  data
                        is only flush when it needs to be, usually by the system pager.

                        This  feature is typically used when you want to use a file-backed shared memory area to
                        communicate between processes (IPC) and do not particularly need the data  being  stored
                        in that area to be physically written to disk.  With this feature you get the equivalent
                        performance with mmap that you would expect to get with SysV shared memory calls, but in
                        a more controllable and less restrictive manner.  However, note that this feature is not
                        portable  across  UNIX  platforms  (though some may do the right thing by default).  For
                        more information see the MAP_NOSYNC section of <u><a href="../man2/mmap.2.html">mmap</a></u>(2)

       MADV_AUTOSYNC    Undoes the effects of MADV_NOSYNC for any future pages dirtied within the address range.
                        The effect on pages already dirtied is indeterminate - they may or may not be  reverted.
                        You can guarantee reversion by using the <u><a href="../man2/msync.2.html">msync</a></u>(2) or <u><a href="../man2/fsync.2.html">fsync</a></u>(2) system calls.

       MADV_NOCORE      Region is not included in a core file.

       MADV_CORE        Include region in a core file.

       MADV_PROTECT     Informs  the  VM  system  this  process  should  not  be  killed  when the swap space is
                        exhausted.  The process must have superuser privileges.  This should be used judiciously
                        in processes that must remain running for the system to properly function.

       Portable programs that call the <b>posix_madvise</b>()  interface  should  use  the  aliases  POSIX_MADV_NORMAL,
       POSIX_MADV_SEQUENTIAL,  POSIX_MADV_RANDOM,  POSIX_MADV_WILLNEED,  and POSIX_MADV_DONTNEED rather than the
       flags described above.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The <b>madvise</b>() function returns the value 0 if successful; otherwise the value  -1  is  returned  and  the
       global variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>madvise</b>() system call will fail if:

       [EINVAL]           The <u>behav</u> argument is not valid.

       [ENOMEM]           The virtual address range specified by the <u>addr</u> and <u>len</u> arguments is not valid.

       [EPERM]            MADV_PROTECT was specified and the process does not have superuser privileges.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/mincore.2.html">mincore</a></u>(2), <u><a href="../man2/mprotect.2.html">mprotect</a></u>(2), <u><a href="../man2/msync.2.html">msync</a></u>(2), <u><a href="../man2/munmap.2.html">munmap</a></u>(2), <u><a href="../man2/posix_fadvise.2.html">posix_fadvise</a></u>(2)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>posix_madvise</b>() interface conforms to IEEE Std 1003.1-2001 (“POSIX.1”).

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>madvise</b>() system call first appeared in 4.4BSD.

Debian                                            July 12, 2015                                       <u><a href="../man2/MADVISE.2.html">MADVISE</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>