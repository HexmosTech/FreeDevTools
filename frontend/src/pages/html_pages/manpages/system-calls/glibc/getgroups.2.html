<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getgroups, setgroups - get/set list of supplementary group IDs</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       getgroups, setgroups - get/set list of supplementary group IDs

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <b>int</b> <b>getgroups(int</b> <u>size</u><b>,</b> <b>gid_t</b> <u>list</u><b>[]);</b>

       <b>#include</b> <b>&lt;<a href="file:/usr/include/grp.h">grp.h</a>&gt;</b>

       <b>int</b> <b>setgroups(size_t</b> <u>size</u><b>,</b> <b>const</b> <b>gid_t</b> <b>*_Nullable</b> <u>list</u><b>);</b>

   Feature Test Macro Requirements for glibc (see <b><a href="../man7/feature_test_macros.7.html">feature_test_macros</a></b>(7)):

       <b>setgroups</b>():
           Since glibc 2.19:
               _DEFAULT_SOURCE
           glibc 2.19 and earlier:
               _BSD_SOURCE

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>getgroups</b>() returns the supplementary group IDs of the calling process in <u>list</u>.  The argument <u>size</u> should
       be  set  to  the  maximum  number  of  items that can be stored in the buffer pointed to by <u>list</u>.  If the
       calling process is a member of more than <u>size</u> supplementary groups, then an error results.

       It is unspecified whether the effective group ID of the calling process is included in the returned list.
       (Thus, an application should also call <b><a href="../man2/getegid.2.html">getegid</a></b>(2) and add or remove the resulting value.)

       If <u>size</u> is zero, <u>list</u> is not modified, but the total number of supplementary group IDs for the process is
       returned.  This allows the caller to determine the size of a dynamically allocated <u>list</u> to be used  in  a
       further call to <b>getgroups</b>().

       <b>setgroups</b>()  sets  the  supplementary  group  IDs  for  the  calling process.  Appropriate privileges are
       required (see the description of the <b>EPERM</b> error, below).  The <u>size</u>  argument  specifies  the  number  of
       supplementary  group  IDs  in the buffer pointed to by <u>list</u>.  A process can drop all of its supplementary
       groups with the call:

           setgroups(0, NULL);

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>getgroups</b>() returns the number of supplementary group IDs.  On error,  -1  is  returned,  and
       <u>errno</u> is set to indicate the error.

       On success, <b>setgroups</b>() returns 0.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EFAULT</b> <u>list</u> has an invalid address.

       <b>getgroups</b>() can additionally fail with the following error:

       <b>EINVAL</b> <u>size</u> is less than the number of supplementary group IDs, but is not zero.

       <b>setgroups</b>() can additionally fail with the following errors:

       <b>EINVAL</b> <u>size</u> is greater than <b>NGROUPS_MAX</b> (32 before Linux 2.6.4; 65536 since Linux 2.6.4).

       <b>ENOMEM</b> Out of memory.

       <b>EPERM</b>  The calling process has insufficient privilege (the caller does not have the <b>CAP_SETGID</b> capability
              in the user namespace in which it resides).

       <b>EPERM</b> (since Linux 3.19)
              The   use   of   <b>setgroups</b>()   is   denied  in  this  user  namespace.   See  the  description  of
              <u><a href="file:/proc/">/proc/</a></u>pid<u>/setgroups</u> in <b><a href="../man7/user_namespaces.7.html">user_namespaces</a></b>(7).

</pre><h4><b>VERSIONS</b></h4><pre>
   <b>C</b> <b>library/kernel</b> <b>differences</b>
       At the kernel level, user IDs and group IDs are a per-thread attribute.  However, POSIX requires that all
       threads in a process share the same credentials.  The NPTL threading  implementation  handles  the  POSIX
       requirements  by  providing  wrapper  functions for the various system calls that change process UIDs and
       GIDs.  These wrapper functions (including the one for <b>setgroups</b>()) employ  a  signal-based  technique  to
       ensure  that  when  one  thread  changes credentials, all of the other threads in the process also change
       their credentials.  For details, see <b><a href="../man7/nptl.7.html">nptl</a></b>(7).

</pre><h4><b>STANDARDS</b></h4><pre>
       <b>getgroups</b>()
              POSIX.1-2008.

       <b>setgroups</b>()
              None.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>getgroups</b>()
              SVr4, 4.3BSD, POSIX.1-2001.

       <b>setgroups</b>()
              SVr4, 4.3BSD.  Since <b>setgroups</b>() requires privilege, it is not covered by POSIX.1.

       The original Linux <b>getgroups</b>() system call supported only 16-bit  group  IDs.   Subsequently,  Linux  2.4
       added  <b>getgroups32</b>(),  supporting 32-bit IDs.  The glibc <b>getgroups</b>() wrapper function transparently deals
       with the variation across kernel versions.

</pre><h4><b>NOTES</b></h4><pre>
       A process can have up to <b>NGROUPS_MAX</b> supplementary group IDs in addition to the effective group ID.   The
       constant  <b>NGROUPS_MAX</b> is defined in <u>&lt;limits.h&gt;</u>.  The set of supplementary group IDs is inherited from the
       parent process, and preserved across an <b><a href="../man2/execve.2.html">execve</a></b>(2).

       The maximum number of supplementary group IDs can be found at run time using <b><a href="../man3/sysconf.3.html">sysconf</a></b>(3):

           long ngroups_max;
           ngroups_max = sysconf(_SC_NGROUPS_MAX);

       The maximum return value of <b>getgroups</b>() cannot be larger than one more  than  this  value.   Since  Linux
       2.6.4,  the  maximum  number  of supplementary group IDs is also exposed via the Linux-specific read-only
       file, <u><a href="file:/proc/sys/kernel/ngroups_max">/proc/sys/kernel/ngroups_max</a></u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/getgid.2.html">getgid</a></b>(2), <b><a href="../man2/setgid.2.html">setgid</a></b>(2), <b><a href="../man3/getgrouplist.3.html">getgrouplist</a></b>(3), <b><a href="../man3/group_member.3.html">group_member</a></b>(3), <b><a href="../man3/initgroups.3.html">initgroups</a></b>(3), <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7), <b><a href="../man7/credentials.7.html">credentials</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                       <u><a href="../man2/getgroups.2.html">getgroups</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>