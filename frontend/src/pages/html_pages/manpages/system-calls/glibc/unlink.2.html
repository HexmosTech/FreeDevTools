<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unlink, unlinkat - delete a name and possibly the file it refers to</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       unlink, unlinkat - delete a name and possibly the file it refers to

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <b>int</b> <b>unlink(const</b> <b>char</b> <b>*</b><u>pathname</u><b>);</b>

       <b>#include</b> <b>&lt;<a href="file:/usr/include/fcntl.h">fcntl.h</a>&gt;</b>           /* Definition of <b>AT_*</b> constants */
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <b>int</b> <b>unlinkat(int</b> <u>dirfd</u><b>,</b> <b>const</b> <b>char</b> <b>*</b><u>pathname</u><b>,</b> <b>int</b> <u>flags</u><b>);</b>

   Feature Test Macro Requirements for glibc (see <b><a href="../man7/feature_test_macros.7.html">feature_test_macros</a></b>(7)):

       <b>unlinkat</b>():
           Since glibc 2.10:
               _POSIX_C_SOURCE &gt;= 200809L
           Before glibc 2.10:
               _ATFILE_SOURCE

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>unlink</b>()  deletes  a name from the filesystem.  If that name was the last link to a file and no processes
       have the file open, the file is deleted and the space it was using is made available for reuse.

       If the name was the last link to a file but any processes still have the file open, the file will  remain
       in existence until the last file descriptor referring to it is closed.

       If the name referred to a symbolic link, the link is removed.

       If  the  name  referred to a socket, FIFO, or device, the name for it is removed but processes which have
       the object open may continue to use it.

   <b>unlinkat()</b>
       The <b>unlinkat</b>() system call operates in exactly the same way as either <b>unlink</b>() or <b><a href="../man2/rmdir.2.html">rmdir</a></b>(2) (depending  on
       whether or not <u>flags</u> includes the <b>AT_REMOVEDIR</b> flag) except for the differences described here.

       If  the pathname given in <u>pathname</u> is relative, then it is interpreted relative to the directory referred
       to by the file descriptor <u>dirfd</u> (rather than relative to the current working  directory  of  the  calling
       process, as is done by <b>unlink</b>() and <b><a href="../man2/rmdir.2.html">rmdir</a></b>(2) for a relative pathname).

       If  the  pathname given in <u>pathname</u> is relative and <u>dirfd</u> is the special value <b>AT_FDCWD</b>, then <u>pathname</u> is
       interpreted relative to the  current  working  directory  of  the  calling  process  (like  <b>unlink</b>()  and
       <b><a href="../man2/rmdir.2.html">rmdir</a></b>(2)).

       If the pathname given in <u>pathname</u> is absolute, then <u>dirfd</u> is ignored.

       <u>flags</u>  is a bit mask that can either be specified as 0, or by ORing together flag values that control the
       operation of <b>unlinkat</b>().  Currently, only one such flag is defined:

       <b>AT_REMOVEDIR</b>
              By default, <b>unlinkat</b>() performs the equivalent of <b>unlink</b>() on <u>pathname</u>.  If the <b>AT_REMOVEDIR</b>  flag
              is specified, it performs the equivalent of <b><a href="../man2/rmdir.2.html">rmdir</a></b>(2) on <u>pathname</u>.

       See <b><a href="../man2/openat.2.html">openat</a></b>(2) for an explanation of the need for <b>unlinkat</b>().

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, zero is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EACCES</b> Write  access to the directory containing <u>pathname</u> is not allowed for the process's effective UID,
              or  one  of  the  directories  in  <u>pathname</u>  did  not  allow   search   permission.    (See   also
              <b><a href="../man7/path_resolution.7.html">path_resolution</a></b>(7).)

       <b>EBUSY</b>  The  file  <u>pathname</u>  cannot be unlinked because it is being used by the system or another process;
              for example, it is a mount point or the NFS client software created it to represent an active  but
              otherwise nameless inode ("NFS silly renamed").

       <b>EFAULT</b> <u>pathname</u> points outside your accessible address space.

       <b>EIO</b>    An I/O error occurred.

       <b>EISDIR</b> <u>pathname</u> refers to a directory.  (This is the non-POSIX value returned since Linux 2.1.132.)

       <b>ELOOP</b>  Too many symbolic links were encountered in translating <u>pathname</u>.

       <b>ENAMETOOLONG</b>
              <u>pathname</u> was too long.

       <b>ENOENT</b> A component in <u>pathname</u> does not exist or is a dangling symbolic link, or <u>pathname</u> is empty.

       <b>ENOMEM</b> Insufficient kernel memory was available.

       <b>ENOTDIR</b>
              A component used as a directory in <u>pathname</u> is not, in fact, a directory.

       <b>EPERM</b>  The  system  does  not  allow  unlinking  of  directories,  or  unlinking  of directories requires
              privileges that the calling process doesn't have.  (This is the POSIX prescribed error return;  as
              noted above, Linux returns <b>EISDIR</b> for this case.)

       <b>EPERM</b> (Linux only)
              The filesystem does not allow unlinking of files.

       <b>EPERM</b> or <b>EACCES</b>
              The directory containing <u>pathname</u> has the sticky bit (<b>S_ISVTX</b>) set and the process's effective UID
              is  neither  the  UID  of  the file to be deleted nor that of the directory containing it, and the
              process is not privileged (Linux: does not have the <b>CAP_FOWNER</b> capability).

       <b>EPERM</b>  The file to be unlinked is marked immutable or append-only.  (See <b><a href="../man2const/FS_IOC_SETFLAGS.2const.html">FS_IOC_SETFLAGS</a></b>(2const).)

       <b>EROFS</b>  <u>pathname</u> refers to a file on a read-only filesystem.

       The same errors that occur for <b>unlink</b>() and <b><a href="../man2/rmdir.2.html">rmdir</a></b>(2)  can  also  occur  for  <b>unlinkat</b>().   The  following
       additional errors can occur for <b>unlinkat</b>():

       <b>EBADF</b>  <u>pathname</u> is relative but <u>dirfd</u> is neither <b>AT_FDCWD</b> nor a valid file descriptor.

       <b>EINVAL</b> An invalid flag value was specified in <u>flags</u>.

       <b>EISDIR</b> <u>pathname</u> refers to a directory, and <b>AT_REMOVEDIR</b> was not specified in <u>flags</u>.

       <b>ENOTDIR</b>
              <u>pathname</u> is relative and <u>dirfd</u> is a file descriptor referring to a file other than a directory.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       <b>unlink</b>()
              SVr4, 4.3BSD, POSIX.1-2001.

       <b>unlinkat</b>()
              POSIX.1-2008.  Linux 2.6.16, glibc 2.4.

   <b>glibc</b>
       On  older  kernels  where  <b>unlinkat</b>() is unavailable, the glibc wrapper function falls back to the use of
       <b>unlink</b>() or <b><a href="../man2/rmdir.2.html">rmdir</a></b>(2).  When <u>pathname</u> is a relative pathname, glibc constructs a  pathname  based  on  the
       symbolic link in <u><a href="file:/proc/self/fd">/proc/self/fd</a></u> that corresponds to the <u>dirfd</u> argument.

</pre><h4><b>BUGS</b></h4><pre>
       Infelicities  in  the  protocol  underlying NFS can cause the unexpected disappearance of files which are
       still being used.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/rm.1.html">rm</a></b>(1), <b><a href="../man1/unlink.1.html">unlink</a></b>(1), <b><a href="../man2/chmod.2.html">chmod</a></b>(2),  <b><a href="../man2/link.2.html">link</a></b>(2),  <b><a href="../man2/mknod.2.html">mknod</a></b>(2),  <b><a href="../man2/open.2.html">open</a></b>(2),  <b><a href="../man2/rename.2.html">rename</a></b>(2),  <b><a href="../man2/rmdir.2.html">rmdir</a></b>(2),  <b><a href="../man3/mkfifo.3.html">mkfifo</a></b>(3),  <b><a href="../man3/remove.3.html">remove</a></b>(3),
       <b><a href="../man7/path_resolution.7.html">path_resolution</a></b>(7), <b><a href="../man7/symlink.7.html">symlink</a></b>(7)

Linux man-pages 6.9.1                              2024-06-13                                          <u><a href="../man2/unlink.2.html">unlink</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>