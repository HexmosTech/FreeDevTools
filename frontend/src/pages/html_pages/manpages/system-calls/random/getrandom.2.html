<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getrandom - obtain a series of random bytes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       getrandom - obtain a series of random bytes

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/random.h&gt;</b>

       <b>ssize_t</b> <b>getrandom(void</b> <u>buf</u><b>[.</b><u>buflen</u><b>],</b> <b>size_t</b> <u>buflen</u><b>,</b> <b>unsigned</b> <b>int</b> <u>flags</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>getrandom</b>()  system  call  fills the buffer pointed to by <u>buf</u> with up to <u>buflen</u> random bytes.  These
       bytes can be used to seed user-space random number generators or for cryptographic purposes.

       By default, <b>getrandom</b>() draws entropy from the <u>urandom</u> source (i.e., the same source as the  <u>/dev/urandom</u>
       device).  This behavior can be changed via the <u>flags</u> argument.

       If  the <u>urandom</u> source has been initialized, reads of up to 256 bytes will always return as many bytes as
       requested and will not be interrupted by signals.  No such guarantees apply for larger buffer sizes.  For
       example, if the call is interrupted by a signal handler, it may return a partially filled buffer, or fail
       with the error <b>EINTR</b>.

       If the <u>urandom</u> source has not yet been initialized, then <b>getrandom</b>() will block, unless <b>GRND_NONBLOCK</b>  is
       specified in <u>flags</u>.

       The <u>flags</u> argument is a bit mask that can contain zero or more of the following values ORed together:

       <b>GRND_RANDOM</b>
              If  this  bit is set, then random bytes are drawn from the <u>random</u> source (i.e., the same source as
              the <u>/dev/random</u> device) instead of the <u>urandom</u> source.  The <u>random</u> source is limited based on  the
              entropy  that  can  be obtained from environmental noise.  If the number of available bytes in the
              <u>random</u> source is less than requested in <u>buflen</u>, the call returns just the available random  bytes.
              If  no  random  bytes  are available, the behavior depends on the presence of <b>GRND_NONBLOCK</b> in the
              <u>flags</u> argument.

       <b>GRND_NONBLOCK</b>
              By default, when reading from the <u>random</u>  source,  <b>getrandom</b>()  blocks  if  no  random  bytes  are
              available,  and  when  reading  from the <u>urandom</u> source, it blocks if the entropy pool has not yet
              been initialized.  If the <b>GRND_NONBLOCK</b> flag is set, then <b>getrandom</b>()  does  not  block  in  these
              cases, but instead immediately returns -1 with <u>errno</u> set to <b>EAGAIN</b>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>getrandom</b>() returns the number of bytes that were copied to the buffer <u>buf</u>.  This may be less
       than  the  number  of  bytes  requested  via  <u>buflen</u>  if  either  <b>GRND_RANDOM</b>  was specified in <u>flags</u> and
       insufficient entropy was present in the <u>random</u> source or the system call was interrupted by a signal.

       On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EAGAIN</b> The requested entropy was not available, and <b>getrandom</b>() would have blocked if  the  <b>GRND_NONBLOCK</b>
              flag was not set.

       <b>EFAULT</b> The address referred to by <u>buf</u> is outside the accessible address space.

       <b>EINTR</b>  The call was interrupted by a signal handler; see the description of how interrupted <b><a href="../man2/read.2.html">read</a></b>(2) calls
              on "slow" devices are handled with and without the <b>SA_RESTART</b> flag in the <b><a href="../man7/signal.7.html">signal</a></b>(7) man page.

       <b>EINVAL</b> An invalid flag was specified in <u>flags</u>.

       <b>ENOSYS</b> The  glibc  wrapper  function  for  <b>getrandom</b>()  determined  that  the  underlying kernel does not
              implement this system call.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 3.17, glibc 2.25.

</pre><h4><b>NOTES</b></h4><pre>
       For an overview and comparison of the various interfaces that can  be  used  to  obtain  randomness,  see
       <b><a href="../man7/random.7.html">random</a></b>(7).

       Unlike  <u>/dev/random</u>  and  <u>/dev/urandom</u>,  <b>getrandom</b>()  does  not  involve  the  use  of  pathnames or file
       descriptors.  Thus, <b>getrandom</b>() can be useful in cases where <b><a href="../man2/chroot.2.html">chroot</a></b>(2) makes  <u><a href="file:/dev">/dev</a></u>  pathnames  invisible,
       and where an application (e.g., a daemon during start-up) closes a file descriptor for one of these files
       that was opened by a library.

   <b>Maximum</b> <b>number</b> <b>of</b> <b>bytes</b> <b>returned</b>
       As of Linux 3.19 the following limits apply:

       •  When  reading  from  the  <u>urandom</u>  source,  a  maximum of 32Mi-1 bytes is returned by a single call to
          <b>getrandom</b>() on systems where <u>int</u> has a size of 32 bits.

       •  When reading from the <u>random</u> source, a maximum of 512 bytes is returned.

   <b>Interruption</b> <b>by</b> <b>a</b> <b>signal</b> <b>handler</b>
       When reading from the <u>urandom</u> source (<b>GRND_RANDOM</b> is not set), <b>getrandom</b>() will block until  the  entropy
       pool  has been initialized (unless the <b>GRND_NONBLOCK</b> flag was specified).  If a request is made to read a
       large number of bytes (more than 256), <b>getrandom</b>() will block until those bytes have been  generated  and
       transferred  from  kernel  memory  to  <u>buf</u>.   When  reading  from the <u>random</u> source (<b>GRND_RANDOM</b> is set),
       <b>getrandom</b>() will block until some random bytes  become  available  (unless  the  <b>GRND_NONBLOCK</b>  flag  was
       specified).

       The  behavior  when  a  call  to  <b>getrandom</b>()  that  is  blocked while reading from the <u>urandom</u> source is
       interrupted by a signal handler depends on the initialization state of the  entropy  buffer  and  on  the
       request  size,  <u>buflen</u>.  If the entropy is not yet initialized, then the call fails with the <b>EINTR</b> error.
       If the entropy pool has been initialized and the request size is large (<u>buflen</u> &gt; 256),  the  call  either
       succeeds,  returning  a  partially filled buffer, or fails with the error <b>EINTR</b>.  If the entropy pool has
       been initialized and the request size is small (<u>buflen</u> &lt;= 256),  then  <b>getrandom</b>()  will  not  fail  with
       <b>EINTR</b>.  Instead, it will return all of the bytes that have been requested.

       When reading from the <u>random</u> source, blocking requests of any size can be interrupted by a signal handler
       (the call fails with the error <b>EINTR</b>).

       Using  <b>getrandom</b>()  to read small buffers (&lt;= 256 bytes) from the <u>urandom</u> source is the preferred mode of
       usage.

       The special  treatment  of  small  values  of  <u>buflen</u>  was  designed  for  compatibility  with  OpenBSD's
       <b><a href="../man3/getentropy.3.html">getentropy</a></b>(3), which is nowadays supported by glibc.

       The user of <b>getrandom</b>() <u>must</u> always check the return value, to determine whether either an error occurred
       or  fewer  bytes than requested were returned.  In the case where <b>GRND_RANDOM</b> is not specified and <u>buflen</u>
       is less than or equal to 256, a return of fewer bytes than requested should never happen, but the careful
       programmer will check for this anyway!

</pre><h4><b>BUGS</b></h4><pre>
       As of Linux 3.19, the following bug exists:

       •  Depending on CPU load, <b>getrandom</b>() does not react to interrupts before reading all bytes requested.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man3/getentropy.3.html">getentropy</a></b>(3), <b><a href="../man4/random.4.html">random</a></b>(4), <b><a href="../man4/urandom.4.html">urandom</a></b>(4), <b><a href="../man7/random.7.html">random</a></b>(7), <b><a href="../man7/signal.7.html">signal</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                       <u><a href="../man2/getrandom.2.html">getrandom</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>