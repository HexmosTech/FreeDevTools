<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>minherit — control the inheritance of pages</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       minherit — control the inheritance of pages

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/mman.h&gt;</b>

       <u>int</u>
       <b>minherit</b>(<u>void</u> <u>*addr</u>, <u>size_t</u> <u>len</u>, <u>int</u> <u>inherit</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>minherit</b>()  system  call changes the specified pages to have the inheritance characteristic <u>inherit</u>.
       Not all implementations will guarantee that the inheritance characteristic can be set on  a  page  basis;
       the  granularity  of  changes  may  be  as  large  as  an entire region.  FreeBSD is capable of adjusting
       inheritance characteristics on a page basis.  Inheritance only effects children created  by  <b>fork</b>().   It
       has  no  effect on <b>exec</b>().  exec'd processes replace their address space entirely.  This system call also
       has no effect on the parent's address space (other than to potentially share the address space  with  its
       children).

       Inheritance  is  a  rather  esoteric  feature  largely  superseded  by  the MAP_SHARED feature of <b>mmap</b>().
       However, it is possible to use <b>minherit</b>() to share a block of memory between parent and  child  that  has
       been  mapped  MAP_PRIVATE.   That  is,  modifications made by parent or child are shared but the original
       underlying file is left untouched.

       INHERIT_SHARE  This option causes the address space in question to be shared between  parent  and  child.
                      It has no effect on how the original underlying backing store was mapped.

       INHERIT_NONE   This  option  prevents  the  address  space  in question from being inherited at all.  The
                      address space will be unmapped in the child.

       INHERIT_COPY   This option causes the child to inherit the address space as copy-on-write.   This  option
                      also has an unfortunate side effect of causing the parent address space to become copy-on-
                      write when the parent forks.  If the original mapping was MAP_SHARED, it will no longer be
                      shared  in  the  parent  after  the  parent  forks and there is no way to get the previous
                      shared-backing-store mapping without unmapping and remapping  the  address  space  in  the
                      parent.

       INHERIT_ZERO   This  option  causes  the  address  space in question to be mapped as new anonymous pages,
                      which would be initialized to all zero bytes, in the child process.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The <b>minherit</b>() function returns the value 0 if successful; otherwise the value -1  is  returned  and  the
       global variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>minherit</b>() system call will fail if:

       [EINVAL]           The virtual address range specified by the <u>addr</u> and <u>len</u> arguments is not valid.

       [EACCES]           The  flags specified by the <u>inherit</u> argument were not valid for the pages specified by
                          the <u>addr</u> and <u>len</u> arguments.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/fork.2.html">fork</a></u>(2), <u><a href="../man2/madvise.2.html">madvise</a></u>(2), <u><a href="../man2/mincore.2.html">mincore</a></u>(2), <u><a href="../man2/mprotect.2.html">mprotect</a></u>(2), <u><a href="../man2/msync.2.html">msync</a></u>(2), <u><a href="../man2/munmap.2.html">munmap</a></u>(2), <u><a href="../man2/rfork.2.html">rfork</a></u>(2)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>minherit</b>() system call first appeared in OpenBSD and then in FreeBSD 2.2.

       The INHERIT_ZERO support first appeared in OpenBSD 5.6 and then in FreeBSD 12.0.

</pre><h4><b>BUGS</b></h4><pre>
       Once you set inheritance to MAP_PRIVATE or MAP_SHARED, there is no way to recover the  original  copy-on-
       write semantics short of unmapping and remapping the area.

Debian                                           March 15, 2017                                      <u><a href="../man2/MINHERIT.2.html">MINHERIT</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>