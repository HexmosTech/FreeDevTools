<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tee - duplicating pipe content</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tee - duplicating pipe content

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#define</b> <b>_GNU_SOURCE</b>         /* See <a href="../man7/feature_test_macros.7.html">feature_test_macros</a>(7) */
       <b>#include</b> <b>&lt;<a href="file:/usr/include/fcntl.h">fcntl.h</a>&gt;</b>

       <b>ssize_t</b> <b>tee(int</b> <u>fd_in</u><b>,</b> <b>int</b> <u>fd_out</u><b>,</b> <b>size_t</b> <u>len</u><b>,</b> <b>unsigned</b> <b>int</b> <u>flags</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>tee</b>()  duplicates  up  to <u>len</u> bytes of data from the pipe referred to by the file descriptor <u>fd_in</u> to the
       pipe referred to by the file descriptor <u>fd_out</u>.  It does not consume the data  that  is  duplicated  from
       <u>fd_in</u>; therefore, that data can be copied by a subsequent <b><a href="../man2/splice.2.html">splice</a></b>(2).

       <u>flags</u> is a bit mask that is composed by ORing together zero or more of the following values:

       <b>SPLICE_F_MOVE</b>      Currently has no effect for <b>tee</b>(); see <b><a href="../man2/splice.2.html">splice</a></b>(2).

       <b>SPLICE_F_NONBLOCK</b>  Do not block on I/O; see <b><a href="../man2/splice.2.html">splice</a></b>(2) for further details.

       <b>SPLICE_F_MORE</b>      Currently  has  no  effect  for  <b>tee</b>(),  but  may  be  implemented  in the future; see
                          <b><a href="../man2/splice.2.html">splice</a></b>(2).

       <b>SPLICE_F_GIFT</b>      Unused for <b>tee</b>(); see <b><a href="../man2/vmsplice.2.html">vmsplice</a></b>(2).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Upon successful completion, <b>tee</b>() returns the number of bytes that were duplicated between the input  and
       output.   A  return  value  of 0 means that there was no data to transfer, and it would not make sense to
       block, because there are no writers connected to the write end of the pipe referred to by <u>fd_in</u>.

       On error, <b>tee</b>() returns -1 and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EAGAIN</b> <b>SPLICE_F_NONBLOCK</b> was specified in <u>flags</u> or one  of  the  file  descriptors  had  been  marked  as
              nonblocking (<b>O_NONBLOCK</b>)<b>,</b> and the operation would block.

       <b>EINVAL</b> <u>fd_in</u> or <u>fd_out</u> does not refer to a pipe; or <u>fd_in</u> and <u>fd_out</u> refer to the same pipe.

       <b>ENOMEM</b> Out of memory.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 2.6.17, glibc 2.5.

</pre><h4><b>NOTES</b></h4><pre>
       Conceptually,  <b>tee</b>()  copies the data between the two pipes.  In reality no real data copying takes place
       though: under the covers, <b>tee</b>() assigns data to the output by merely grabbing a reference to the input.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The example below implements a basic <b><a href="../man1/tee.1.html">tee</a></b>(1) program using the <b>tee</b>() system call.  Here is an  example  of
       its use:

           $ <b>date</b> <b>|</b> <b>./a.out</b> <b>out.log</b> <b>|</b> <b>cat</b>
           Tue Oct 28 10:06:00 CET 2014
           $ <b>cat</b> <b>out.log</b>
           Tue Oct 28 10:06:00 CET 2014

   <b>Program</b> <b>source</b>

       #define _GNU_SOURCE
       #include &lt;<a href="file:/usr/include/errno.h">errno.h</a>&gt;
       #include &lt;<a href="file:/usr/include/fcntl.h">fcntl.h</a>&gt;
       #include &lt;<a href="file:/usr/include/limits.h">limits.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdio.h">stdio.h</a>&gt;
       #include &lt;<a href="file:/usr/include/stdlib.h">stdlib.h</a>&gt;
       #include &lt;sys/types.h&gt;
       #include &lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;

       int
       main(int argc, char *argv[])
       {
           int      fd;
           ssize_t  len, slen;

           if (argc != 2) {
               fprintf(stderr, "Usage: %s &lt;file&gt;\n", argv[0]);
               exit(EXIT_FAILURE);
           }

           fd = open(argv[1], O_WRONLY | O_CREAT | O_TRUNC, 0644);
           if (fd == -1) {
               perror("open");
               exit(EXIT_FAILURE);
           }

           for (;;) {
               /*
                * tee stdin to stdout.
                */
               len = tee(STDIN_FILENO, STDOUT_FILENO,
                         INT_MAX, SPLICE_F_NONBLOCK);
               if (len &lt; 0) {
                   if (errno == EAGAIN)
                       continue;
                   perror("tee");
                   exit(EXIT_FAILURE);
               }
               if (len == 0)
                   break;

               /*
                * Consume stdin by splicing it to a file.
                */
               while (len &gt; 0) {
                   slen = splice(STDIN_FILENO, NULL, fd, NULL,
                                 len, SPLICE_F_MOVE);
                   if (slen &lt; 0) {
                       perror("splice");
                       exit(EXIT_FAILURE);
                   }
                   len -= slen;
               }
           }

           close(fd);
           exit(EXIT_SUCCESS);
       }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/splice.2.html">splice</a></b>(2), <b><a href="../man2/vmsplice.2.html">vmsplice</a></b>(2), <b><a href="../man7/pipe.7.html">pipe</a></b>(7)

Linux man-pages 6.9.1                              2024-06-15                                             <u><a href="../man2/tee.2.html">tee</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>