<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>process_madvise - give advice about use of memory to a process</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       process_madvise - give advice about use of memory to a process

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/mman.h&gt;</b>

       <b>ssize_t</b> <b>process_madvise(int</b> <u>pidfd</u><b>,</b> <b>const</b> <b>struct</b> <b>iovec</b> <u>iovec</u><b>[.</b><u>n</u><b>],</b>
                               <b>size_t</b> <u>n</u><b>,</b> <b>int</b> <u>advice</u><b>,</b> <b>unsigned</b> <b>int</b> <u>flags</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>process_madvise</b>()  system  call is used to give advice or directions to the kernel about the address
       ranges of another process or of the calling process.  It provides  the  advice  for  the  address  ranges
       described by <u>iovec</u> and <u>n</u>.  The goal of such advice is to improve system or application performance.

       The  <u>pidfd</u>  argument is a PID file descriptor (see <b><a href="../man2/pidfd_open.2.html">pidfd_open</a></b>(2)) that specifies the process to which the
       advice is to be applied.

       The pointer <u>iovec</u> points to an array of <u>iovec</u> structures, described in <b><a href="../man3type/iovec.3type.html">iovec</a></b>(3type).

       <u>n</u> specifies the number of elements in the array of <u>iovec</u> structures.  This value must  be  less  than  or
       equal to <b>IOV_MAX</b> (defined in <u>&lt;limits.h&gt;</u> or accessible via the call <u>sysconf(_SC_IOV_MAX)</u>).

       The <u>advice</u> argument is one of the following values:

       <b>MADV_COLD</b>
              See <b><a href="../man2/madvise.2.html">madvise</a></b>(2).

       <b>MADV_COLLAPSE</b>
              See <b><a href="../man2/madvise.2.html">madvise</a></b>(2).

       <b>MADV_PAGEOUT</b>
              See <b><a href="../man2/madvise.2.html">madvise</a></b>(2).

       <b>MADV_WILLNEED</b>
              See <b><a href="../man2/madvise.2.html">madvise</a></b>(2).

       The <u>flags</u> argument is reserved for future use; currently, this argument must be specified as 0.

       The  <u>n</u> and <u>iovec</u> arguments are checked before applying any advice.  If <u>n</u> is too big, or <u>iovec</u> is invalid,
       then an error will be returned immediately and no advice will be applied.

       The advice might be applied to only a part of <u>iovec</u> if one of its elements points to  an  invalid  memory
       region  in  the  remote  process.   No  further  elements  will be processed beyond that point.  (See the
       discussion regarding partial advice in RETURN VALUE.)

       Starting in Linux 5.12, permission to apply advice to another process is governed by ptrace  access  mode
       <b>PTRACE_MODE_READ_FSCREDS</b>  check  (see <b><a href="../man2/ptrace.2.html">ptrace</a></b>(2)); in addition, because of the performance implications of
       applying the advice, the caller must have the <b>CAP_SYS_NICE</b> capability (see <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7)).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, <b>process_madvise</b>() returns the number of bytes advised.  This return value may  be  less  than
       the  total  number  of  requested  bytes,  if  an  error  occurred after some <u>iovec</u> elements were already
       processed.  The caller should check the return value to determine whether a partial advice occurred.

       On error, -1 is returned and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EBADF</b>  <u>pidfd</u> is not a valid PID file descriptor.

       <b>EFAULT</b> The memory described by <u>iovec</u> is outside the accessible address space of the process  referred  to
              by <u>pidfd</u>.

       <b>EINVAL</b> <u>flags</u> is not 0.

       <b>EINVAL</b> The sum of the <u>iov_len</u> values of <u>iovec</u> overflows a <u>ssize_t</u> value.

       <b>EINVAL</b> <u>n</u> is too large.

       <b>ENOMEM</b> Could not allocate memory for internal copies of the <u>iovec</u> structures.

       <b>EPERM</b>  The caller does not have permission to access the address space of the process <u>pidfd</u>.

       <b>ESRCH</b>  The target process does not exist (i.e., it has terminated and been waited on).

       See <b><a href="../man2/madvise.2.html">madvise</a></b>(2) for <u>advice</u>-specific errors.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 5.10.  glibc 2.36.

       Support  for  this  system  call  is  optional,  depending  on  the setting of the <b>CONFIG_ADVISE_SYSCALLS</b>
       configuration option.

       When this system call first appeared in Linux 5.10, permission to apply advice  to  another  process  was
       entirely  governed  by  ptrace  access  mode  <b>PTRACE_MODE_ATTACH_FSCREDS</b>  check  (see  <b><a href="../man2/ptrace.2.html">ptrace</a></b>(2)).   This
       requirement was relaxed in Linux 5.12 so that the caller didn't require  full  control  over  the  target
       process.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/madvise.2.html">madvise</a></b>(2), <b><a href="../man2/pidfd_open.2.html">pidfd_open</a></b>(2), <b><a href="../man2/process_vm_readv.2.html">process_vm_readv</a></b>(2), <b><a href="../man2/process_vm_write.2.html">process_vm_write</a></b>(2)

Linux man-pages 6.9.1                              2024-05-02                                 <u><a href="../man2/process_madvise.2.html">process_madvise</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>