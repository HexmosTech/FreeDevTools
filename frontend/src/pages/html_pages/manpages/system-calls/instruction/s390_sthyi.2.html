<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>s390_sthyi - emulate STHYI instruction</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       s390_sthyi - emulate STHYI instruction

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;asm/sthyi.h&gt;</b>        /* Definition of <b>STHYI_*</b> constants */
       <b>#include</b> <b>&lt;sys/syscall.h&gt;</b>      /* Definition of <b>SYS_*</b> constants */
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <b>int</b> <b>syscall(SYS_s390_sthyi,</b> <b>unsigned</b> <b>long</b> <u>function_code</u><b>,</b>
                   <b>void</b> <b>*</b><u>resp_buffer</u><b>,</b> <b>uint64_t</b> <b>*</b><u>return_code</u><b>,</b>
                   <b>unsigned</b> <b>long</b> <u>flags</u><b>);</b>

       <u>Note</u>: glibc provides no wrapper for <b>s390_sthyi</b>(), necessitating the use of <b><a href="../man2/syscall.2.html">syscall</a></b>(2).

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>s390_sthyi</b>() system call emulates the STHYI (Store Hypervisor Information) instruction.  It provides
       hardware resource information for the machine and its virtualization levels.  This includes CPU type  and
       capacity, as well as the machine model and other metrics.

       The <u>function_code</u> argument indicates which function to perform.  The following code(s) are supported:

       <b>STHYI_FC_CP_IFL_CAP</b>
              Return CP (Central Processor) and IFL (Integrated Facility for Linux) capacity information.

       The  <u>resp_buffer</u>  argument  specifies  the  address  of  a  response  buffer.   When the <u>function_code</u> is
       <b>STHYI_FC_CP_IFL_CAP</b>, the buffer must be one page (4K) in  size.   If  the  system  call  returns  0,  the
       response  buffer  will be filled with CPU capacity information.  Otherwise, the response buffer's content
       is unchanged.

       The <u>return_code</u> argument stores the return code of the STHYI instruction,  using  one  of  the  following
       values:

       0      Success.

       4      Unsupported function code.

       For further details about <u>return_code</u>, <u>function_code</u>, and <u>resp_buffer</u>, see the reference given in NOTES.

       The <u>flags</u> argument is provided to allow for future extensions and currently must be set to 0.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success (that is: emulation succeeded), the return value of <b>s390_sthyi</b>() matches the condition code of
       the  STHYI  instructions,  which  is a value in the range [0..3].  A return value of 0 indicates that CPU
       capacity information is stored in <u>*resp_buffer</u>.  A return value  of  3  indicates  "unsupported  function
       code" and the content of <u>*resp_buffer</u> is unchanged.  The return values 1 and 2 are reserved.

       On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EFAULT</b> The value specified in <u>resp_buffer</u> or <u>return_code</u> is not a valid address.

       <b>EINVAL</b> The value specified in <u>flags</u> is nonzero.

       <b>ENOMEM</b> Allocating memory for handling the CPU capacity information failed.

       <b>EOPNOTSUPP</b>
              The value specified in <u>function_code</u> is not valid.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux on s390.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 4.15.

</pre><h4><b>NOTES</b></h4><pre>
       For details of the STHYI instruction, see the documentation page.

       When  the  system  call  interface  is  used,  the  response  buffer  doesn't  have  to fulfill alignment
       requirements described in the STHYI instruction definition.

       The kernel caches the response (for up to  one  second,  as  of  Linux  4.16).   Subsequent  system  call
       invocations may return the cached response.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/syscall.2.html">syscall</a></b>(2)

Linux man-pages 6.9.1                              2024-05-02                                      <u><a href="../man2/s390_sthyi.2.html">s390_sthyi</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>