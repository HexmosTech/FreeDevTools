<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pdfork, pdgetpid, pdkill — System calls to manage process descriptors</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       pdfork, pdgetpid, pdkill — System calls to manage process descriptors

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/procdesc.h&gt;</b>

       <u>pid_t</u>
       <b>pdfork</b>(<u>int</u> <u>*fdp</u>, <u>int</u> <u>flags</u>);

       <u>int</u>
       <b>pdgetpid</b>(<u>int</u> <u>fd</u>, <u>pid_t</u> <u>*pidp</u>);

       <u>int</u>
       <b>pdkill</b>(<u>int</u> <u>fd</u>, <u>int</u> <u>signum</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Process  descriptors  are  special  file  descriptors  that  represent  processes,  and are created using
       <b>pdfork</b>(), a variant of <u><a href="../man2/fork.2.html">fork</a></u>(2), which, if successful, returns a process descriptor in the integer pointed
       to by <u>fdp</u>.  Processes created via <b>pdfork</b>() will not cause SIGCHLD on termination.   <b>pdfork</b>()  can  accept
       the flags:

       PD_DAEMON  Instead  of  the  default  terminate-on-close behaviour, allow the process to live until it is
                  explicitly killed with <u><a href="../man2/kill.2.html">kill</a></u>(2).

                  This option is not permitted in <u><a href="../man4/capsicum.4.html">capsicum</a></u>(4) capability mode (see <u><a href="../man2/cap_enter.2.html">cap_enter</a></u>(2)).

       PD_CLOEXEC
                  Set close-on-exec on process descriptor.

       <b>pdgetpid</b>() queries the process ID (PID) in the process descriptor <u>fd</u>.

       <b>pdkill</b>() is functionally identical to <u><a href="../man2/kill.2.html">kill</a></u>(2), except that it accepts a process  descriptor,  <u>fd</u>,  rather
       than a PID.

       The following system calls also have effects specific to process descriptors:

       <u><a href="../man2/fstat.2.html">fstat</a></u>(2)  queries  status  of  a  process descriptor; currently only the <u>st_mode</u>, <u>st_birthtime</u>, <u>st_atime</u>,
       <u>st_ctime</u> and <u>st_mtime</u> fields are defined.  If the owner read, write, and execute bits are  set  then  the
       process represented by the process descriptor is still alive.

       <u><a href="../man2/poll.2.html">poll</a></u>(2) and <u><a href="../man2/select.2.html">select</a></u>(2) allow waiting for process state transitions; currently only POLLHUP is defined, and
       will  be  raised  when the process dies.  Process state transitions can also be monitored using <u><a href="../man2/kqueue.2.html">kqueue</a></u>(2)
       filter EVFILT_PROCDESC; currently only NOTE_EXIT is implemented.

       <u><a href="../man2/close.2.html">close</a></u>(2) will close the process descriptor unless PD_DAEMON is set; if the process  is  still  alive  and
       this  is  the  last  reference  to the process descriptor, the process will be terminated with the signal
       SIGKILL.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       <b>pdfork</b>() returns a PID, 0 or -1, as <u><a href="../man2/fork.2.html">fork</a></u>(2) does.

       <b>pdgetpid</b>() and <b>pdkill</b>() return 0 on success and -1 on failure.

</pre><h4><b>ERRORS</b></h4><pre>
       These functions may return the same error numbers as their  PID-based  equivalents  (e.g.   <b>pdfork</b>()  may
       return the same error numbers as <u><a href="../man2/fork.2.html">fork</a></u>(2)), with the following additions:

       [EINVAL]           The signal number given to <b>pdkill</b>() is invalid.

       [ENOTCAPABLE]      The process descriptor being operated on has insufficient rights (e.g.  CAP_PDKILL for
                          <b>pdkill</b>()).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/close.2.html">close</a></u>(2), <u><a href="../man2/fork.2.html">fork</a></u>(2), <u><a href="../man2/fstat.2.html">fstat</a></u>(2), <u><a href="../man2/kill.2.html">kill</a></u>(2), <u><a href="../man2/poll.2.html">poll</a></u>(2), <u><a href="../man2/kqueue.2.html">kqueue</a></u>(2), <u><a href="../man2/wait4.2.html">wait4</a></u>(2), <u><a href="../man4/capsicum.4.html">capsicum</a></u>(4), <u><a href="../man4/procdesc.4.html">procdesc</a></u>(4)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>pdfork</b>(), <b>pdgetpid</b>(), and <b>pdkill</b>() system calls first appeared in FreeBSD 9.0.

       Support for process descriptors mode was developed as part of the TrustedBSD Project.

</pre><h4><b>AUTHORS</b></h4><pre>
       These functions and the capability facility were created by Robert N. M. Watson &lt;<u><a href="mailto:rwatson@FreeBSD.org">rwatson@FreeBSD.org</a></u>&gt; and
       Jonathan  Anderson &lt;<u><a href="mailto:jonathan@FreeBSD.org">jonathan@FreeBSD.org</a></u>&gt; at the University of Cambridge Computer Laboratory with support
       from a grant from Google, Inc.

Debian                                          October 14, 2018                                       <u><a href="../man2/PDFORK.2.html">PDFORK</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>