<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PR_SET_TAGGED_ADDR_CTRL - control support for passing tagged user-space addresses to the kernel</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       PR_SET_TAGGED_ADDR_CTRL - control support for passing tagged user-space addresses to the kernel

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/linux/prctl.h">linux/prctl.h</a>&gt;</b>  /* Definition of <b>PR_*</b> constants */
       <b>#include</b> <b>&lt;sys/prctl.h&gt;</b>

       <b>int</b> <b>prctl(PR_SET_TAGGED_ADDR_CTRL,</b> <b>long</b> <u>mode</u><b>,</b> <b>0L,</b> <b>0L,</b> <b>0L);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Controls  support for passing tagged user-space addresses to the kernel (i.e., addresses where bits 56—63
       are not all zero).

       The level of support is selected by <u>support</u>, which can be one of the following:

       <b>0L</b>     Addresses that are passed for the purpose of being dereferenced by the kernel must be untagged.

       <b>PR_TAGGED_ADDR_ENABLE</b>
              Addresses that are passed for the purpose of being dereferenced by the kernel may be tagged,  with
              the exceptions summarized below.

       On success, the mode specified in <u>mode</u> is set for the calling thread.

       If  <u>prctl(PR_SET_TAGGED_ADDR_CTRL,</u>  <u>0L,</u>  <u>0L,</u>  <u>0L,</u> <u>0L)</u> fails with <b>EINVAL</b>, then all addresses passed to the
       kernel must be untagged.

       Irrespective of which mode is set, addresses passed to certain interfaces must always be untagged:

       •  <b><a href="../man2/brk.2.html">brk</a></b>(2), <b><a href="../man2/mmap.2.html">mmap</a></b>(2), <b><a href="../man2/shmat.2.html">shmat</a></b>(2), <b><a href="../man2/shmdt.2.html">shmdt</a></b>(2), and the <u>new_address</u> argument of <b><a href="../man2/mremap.2.html">mremap</a></b>(2).

          (Prior to Linux 5.6 these accepted tagged addresses, but the behaviour may not  be  what  you  expect.
          Don't rely on it.)

       •  ‘polymorphic’  interfaces  that  accept  pointers to arbitrary types cast to a <u>void</u> <u>*</u> or other generic
          type,  specifically  <b>prctl</b>(),  <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2),  and  in  general  <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2)   (only   certain   specific
          <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2) options allow tagged addresses).

       This  list of exclusions may shrink when moving from one kernel version to a later kernel version.  While
       the kernel may make some guarantees for backwards compatibility reasons, for the purposes of new software
       the effect of passing tagged addresses to these interfaces is unspecified.

       The mode set by this call is inherited across <b><a href="../man2/fork.2.html">fork</a></b>(2) and <b><a href="../man2/clone.2.html">clone</a></b>(2).  The mode is reset by <b><a href="../man2/execve.2.html">execve</a></b>(2) to  0
       (i.e., tagged addresses not permitted in the user/kernel ABI).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, 0 is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EINVAL</b> <u>mode</u> is invalid or unsupported.

       <b>EINVAL</b> This feature is disabled via <u>/proc/sys/abi/tagged_addr_disabled</u>.

</pre><h4><b>FILES</b></h4><pre>
       <u>/proc/sys/abi/tagged_addr_disabled</u>

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.  arm64 only.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 5.4 (arm64).

</pre><h4><b>CAVEATS</b></h4><pre>
       This   call   is   primarily   intended   for   use   by   the   run-time   environment.    A  successful
       <b>PR_SET_TAGGED_ADDR_CTRL</b> call elsewhere may crash the calling process.  The conditions for using it safely
       are complex and system-dependent.  Don't use it unless you know what you are doing.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/prctl.2.html">prctl</a></b>(2), <b><a href="../man2const/PR_SET_TAGGED_ADDR_CTRL.2const.html">PR_SET_TAGGED_ADDR_CTRL</a></b>(2const)

       For more information, see the kernel source file <u>Documentation/arm64/tagged-address-abi.rst</u>.

Linux man-pages 6.9.1                              2024-06-01                    <u><a href="../man2const/PR_SET_TAGGED_ADDR_CTRL.2const.html">PR_SET_TAGGED_ADDR_CTRL</a></u>(2const)
</pre>
 </div>
</div></section>
</div>
</body>
</html>