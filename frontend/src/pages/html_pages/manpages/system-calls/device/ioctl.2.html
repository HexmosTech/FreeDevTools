<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ioctl - control device</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ioctl - control device

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/ioctl.h&gt;</b>

       <b>int</b> <b>ioctl(int</b> <u>fd</u><b>,</b> <b>unsigned</b> <b>long</b> <u>op</u><b>,</b> <b>...);</b>  /* glibc, BSD */
       <b>int</b> <b>ioctl(int</b> <u>fd</u><b>,</b> <b>int</b> <u>op</u><b>,</b> <b>...);</b>            /* musl, other UNIX */

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>ioctl</b>()  system  call manipulates the underlying device parameters of special files.  In particular,
       many operating characteristics of character special  files  (e.g.,  terminals)  may  be  controlled  with
       <b>ioctl</b>() operations.  The argument <u>fd</u> must be an open file descriptor.

       The  second  argument  is a device-dependent operation code.  The third argument is an untyped pointer to
       memory.  It's traditionally <b>char</b> <b>*</b><u>argp</u> (from the days before <b>void</b> <b>*</b> was valid C), and will  be  so  named
       for this discussion.

       An <b>ioctl</b>() <u>op</u> has encoded in it whether the argument is an <u>in</u> parameter or <u>out</u> parameter, and the size of
       the  argument <u>argp</u> in bytes.  Macros and defines used in specifying an <b>ioctl</b>() <u>op</u> are located in the file
       <u>&lt;sys/ioctl.h&gt;</u>.  See NOTES.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       Usually, on success zero is returned.  A few <b>ioctl</b>()  operations  use  the  return  value  as  an  output
       parameter  and  return  a  nonnegative  value  on success.  On error, -1 is returned, and <u>errno</u> is set to
       indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EBADF</b>  <u>fd</u> is not a valid file descriptor.

       <b>EFAULT</b> <u>argp</u> references an inaccessible memory area.

       <b>EINVAL</b> <u>op</u> or <u>argp</u> is not valid.

       <b>ENOTTY</b> <u>fd</u> is not associated with a character special device.

       <b>ENOTTY</b> The specified operation does not apply  to  the  kind  of  object  that  the  file  descriptor  <u>fd</u>
              references.

</pre><h4><b>VERSIONS</b></h4><pre>
       Arguments, returns, and semantics of <b>ioctl</b>() vary according to the device driver in question (the call is
       used as a catch-all for operations that don't cleanly fit the UNIX stream I/O model).

</pre><h4><b>STANDARDS</b></h4><pre>
       None.

</pre><h4><b>HISTORY</b></h4><pre>
       Version 7 AT&amp;T UNIX has
           <b>ioctl(int</b> <u>fildes</u><b>,</b> <b>int</b> <u>op</u><b>,</b> <b>struct</b> <b>sgttyb</b> <b>*</b><u>argp</u><b>);</b>
       (where  <b>struct</b>  <b>sgttyb</b> has historically been used by <b><a href="../man2/stty.2.html">stty</a></b>(2) and <b><a href="../man2/gtty.2.html">gtty</a></b>(2), and is polymorphic by operation
       type (like a <b>void</b> <b>*</b> would be, if it had been available)).

       SysIII documents <u>arg</u> without a type at all.

       4.3BSD has
           <b>ioctl(int</b> <u>d</u><b>,</b> <b>unsigned</b> <b>long</b> <u>op</u><b>,</b> <b>char</b> <b>*</b><u>argp</u><b>);</b>
       (with <b>char</b> <b>*</b> similarly in for <b>void</b> <b>*</b>).

       SysVr4 has
           <b>int</b> <b>ioctl(int</b> <u>fildes</u><b>,</b> <b>int</b> <u>op</u><b>,</b> <b>...</b> <b>/*</b> <u>arg</u> <b>*/);</b>
</pre><h4><b>NOTES</b></h4><pre>
       In order to use this call, one needs an open file descriptor.  Often the <b><a href="../man2/open.2.html">open</a></b>(2) call has  unwanted  side
       effects, that can be avoided under Linux by giving it the <b>O_NONBLOCK</b> flag.

   <b>ioctl</b> <b>structure</b>
       Ioctl  <u>op</u> values are 32-bit constants.  In principle these constants are completely arbitrary, but people
       have tried to build some structure into them.

       The old Linux situation was that of mostly 16-bit constants, where the last byte is a serial number,  and
       the  preceding  byte(s) give a type indicating the driver.  Sometimes the major number was used: 0x03 for
       the <b>HDIO_*</b> ioctls, 0x06 for the <b>LP*</b> ioctls.  And sometimes one or more  ASCII  letters  were  used.   For
       example,  <b>TCGETS</b>  has  value 0x00005401, with 0x54 = 'T' indicating the terminal driver, and <b>CYGETTIMEOUT</b>
       has value 0x00435906, with 0x43 0x59 = 'C' 'Y' indicating the cyclades driver.

       Later (0.98p5) some more information was built into the number.  One has 2 direction bits (00: none,  01:
       write,  10: read, 11: read/write) followed by 14 size bits (giving the size of the argument), followed by
       an 8-bit type (collecting the ioctls in groups for a common purpose or a common  driver),  and  an  8-bit
       serial number.

       The   macros   describing   this   structure   live   in   <u>&lt;asm/ioctl.h&gt;</u>   and   are   <b>_IO(type,nr)</b>   and
       <b>{_IOR,_IOW,_IOWR}(type,nr,size)</b>.  They use <u>sizeof(size)</u> so that size  is  a  misnomer  here:  this  third
       argument is a data type.

       Note  that  the  size  bits are very unreliable: in lots of cases they are wrong, either because of buggy
       macros using <u>sizeof(sizeof(struct))</u>, or because of legacy values.

       Thus, it seems that the new structure only gave disadvantages: it does  not  help  in  checking,  but  it
       causes varying values for the various architectures.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/execve.2.html">execve</a></b>(2),   <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2),   <b><a href="../man2/ioctl_console.2.html">ioctl_console</a></b>(2),   <b><a href="../man2/ioctl_fat.2.html">ioctl_fat</a></b>(2),  <b><a href="../man2/ioctl_fs.2.html">ioctl_fs</a></b>(2),  <b><a href="../man2/ioctl_fsmap.2.html">ioctl_fsmap</a></b>(2),  <b><a href="../man2/ioctl_nsfs.2.html">ioctl_nsfs</a></b>(2),
       <b><a href="../man2/ioctl_tty.2.html">ioctl_tty</a></b>(2), <b><a href="../man2/ioctl_userfaultfd.2.html">ioctl_userfaultfd</a></b>(2), <b><a href="../man2/ioctl_eventpoll.2.html">ioctl_eventpoll</a></b>(2), <b><a href="../man2/open.2.html">open</a></b>(2), <b><a href="../man4/sd.4.html">sd</a></b>(4), <b><a href="../man4/tty.4.html">tty</a></b>(4)

Linux man-pages 6.9.1                              2024-06-13                                           <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>