<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>umask - set file mode creation mask</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       umask - set file mode creation mask

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/stat.h&gt;</b>

       <b>mode_t</b> <b>umask(mode_t</b> <u>mask</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>umask</b>()  sets  the  calling process's file mode creation mask (umask) to <u>mask</u> &amp; 0777 (i.e., only the file
       permission bits of <u>mask</u> are used), and returns the previous value of the mask.

       The umask is used by <b><a href="../man2/open.2.html">open</a></b>(2),  <b><a href="../man2/mkdir.2.html">mkdir</a></b>(2),  and  other  system  calls  that  create  files  to  modify  the
       permissions  placed  on  newly  created files or directories.  Specifically, permissions in the umask are
       turned off from the <u>mode</u> argument to <b><a href="../man2/open.2.html">open</a></b>(2) and <b><a href="../man2/mkdir.2.html">mkdir</a></b>(2).

       Alternatively, if the parent directory has a default ACL (see <b><a href="../man5/acl.5.html">acl</a></b>(5)), the umask is ignored, the  default
       ACL  is  inherited, the permission bits are set based on the inherited ACL, and permission bits absent in
       the <u>mode</u> argument are turned off.  For example, the following default ACL is equivalent  to  a  umask  of
       022:

           u::rwx,g::r-x,o::r-x

       Combining  the  effect  of  this default ACL with a <u>mode</u> argument of 0666 (rw-rw-rw-), the resulting file
       permissions would be 0644 (rw-r--r--).

       The constants that should be used to specify <u>mask</u> are described in <b><a href="../man7/inode.7.html">inode</a></b>(7).

       The typical default value for the process umask is <b>S_IWGRP</b> | <b>S_IWOTH</b> (octal  022).   In  the  usual  case
       where the <u>mode</u> argument to <b><a href="../man2/open.2.html">open</a></b>(2) is specified as:

           <b>S_IRUSR</b> | <b>S_IWUSR</b> | <b>S_IRGRP</b> | <b>S_IWGRP</b> | <b>S_IROTH</b> | <b>S_IWOTH</b>

       (octal 0666) when creating a new file, the permissions on the resulting file will be:

           <b>S_IRUSR</b> | <b>S_IWUSR</b> | <b>S_IRGRP</b> | <b>S_IROTH</b>

       (because 0666 &amp; ~022 = 0644; i.e. rw-r--r--).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       This system call always succeeds and the previous value of the mask is returned.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001, SVr4, 4.3BSD.

</pre><h4><b>NOTES</b></h4><pre>
       A  child  process  created  via  <b><a href="../man2/fork.2.html">fork</a></b>(2)  inherits  its  parent's  umask.  The umask is left unchanged by
       <b><a href="../man2/execve.2.html">execve</a></b>(2).

       It is impossible to use <b>umask</b>() to fetch a process's umask without at  the  same  time  changing  it.   A
       second  call  to  <b>umask</b>() would then be needed to restore the umask.  The nonatomicity of these two steps
       provides the potential for races in multithreaded programs.

       Since Linux 4.7, the umask of any process  can  be  viewed  via  the  <u>Umask</u>  field  of  <u><a href="file:/proc/">/proc/</a></u>pid<u>/status</u>.
       Inspecting  this  field  in  <u><a href="file:/proc/self/status">/proc/self/status</a></u> allows a process to retrieve its umask without at the same
       time changing it.

       The umask setting also affects the permissions assigned to POSIX IPC  objects  (<b><a href="../man3/mq_open.3.html">mq_open</a></b>(3),  <b><a href="../man3/sem_open.3.html">sem_open</a></b>(3),
       <b><a href="../man3/shm_open.3.html">shm_open</a></b>(3)),  FIFOs  (<b><a href="../man3/mkfifo.3.html">mkfifo</a></b>(3)),  and  UNIX domain sockets (<b><a href="../man7/unix.7.html">unix</a></b>(7)) created by the process.  The umask
       does not affect the permissions assigned to System V IPC objects created by the process (using <b><a href="../man2/msgget.2.html">msgget</a></b>(2),
       <b><a href="../man2/semget.2.html">semget</a></b>(2), <b><a href="../man2/shmget.2.html">shmget</a></b>(2)).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/chmod.2.html">chmod</a></b>(2), <b><a href="../man2/mkdir.2.html">mkdir</a></b>(2), <b><a href="../man2/open.2.html">open</a></b>(2), <b><a href="../man2/stat.2.html">stat</a></b>(2), <b><a href="../man5/acl.5.html">acl</a></b>(5)

Linux man-pages 6.9.1                              2024-05-02                                           <u><a href="../man2/umask.2.html">umask</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>