<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>write-array -  (array)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/golf">golf_601.4.41-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       write-array -  (array)

</pre><h4><b>PURPOSE</b></h4><pre>
       Store value into an array.

</pre><h4><b>SYNTAX</b></h4><pre>
           write-array &lt;array&gt; \
               key &lt;key&gt; \
               value &lt;value&gt; \
               [ old-value &lt;old value&gt; ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       write-array  will  store  a &lt;value&gt; (in "value" clause) under index &lt;key&gt; (in "key" clause) into &lt;array&gt;,
       which must be created with <b>new-array</b>. &lt;key&gt; is a number from 0 up to (excluding) the currently  allocated
       array  size  (see  <b>new-array</b>).  The  type  of  &lt;value&gt;  is determined when &lt;array&gt; is created (see "type"
       clause), and can be either a string, number or a boolean.

       &lt;key&gt; and &lt;value&gt; are collectively called an "element".

       The old value associated under index &lt;key&gt; is returned in &lt;old value&gt; (in "old-value" clause) and &lt;value&gt;
       will replace the old value.

       If an &lt;array&gt; was created with "process-scope" clause (see <b>new-array</b>), then the element &lt;value&gt; will  not
       be  freed  when  the  current request ends, rather it will persist while the process runs, unless deleted
       (see <b>read-array</b> with delete clause).

</pre><h4><b>EXAMPLES</b></h4><pre>
       Writing data to an array:

           new-array arr
           write-array arr key 100 value "some data"

       Writing new value with the same key index and obtaining the previous value (which is "some data"):

           write-array arr key 100 value "new data" old-value od
           @Previous value for this key index is &lt;&lt;print-out od&gt;&gt;

       The following is an array service, where a  process-scoped  array  is  created.  It  provides  inserting,
       deleting  and  querying  indexed  keys.  Maximum number of keys it holds is 10,000,000 (indexed from 0 to
       9,999,999). Such a service process can run indefinitely. Create file arrsrv.golf:

           %% /arrsrv public
               do-once
               new-array arr max-size 10000000 process-scope type string
               end-do-once

               // Get input parameters
               get-param op
               get-param key
               get-param data
               // Convert string keye to number
               string-number key to key_n

               if-true op equal "add" // Add data to array
                   write-array arr key key_n value data old-value old_data
                   delete-string old_data
                   @Added [&lt;&lt;print-out key&gt;&gt;]
               else-if op equal "delete" // Delete data and obtain the value deleted
                   read-array arr key key_n value val delete
                   @Deleted [&lt;&lt;print-out val&gt;&gt;]
                   delete-string val
               else-if op equal "query" // Query hash based on key value
                   read-array arr key key_n value val
                   @Value [&lt;&lt;print-out val&gt;&gt;]
               end-if
           %%

       Create and make the application, then run it as service:

           // Create application
           gg -k arr
           // Make application
           gg -q
           // Start application (single process key service)
           mgrg -w 1 arr

       Try it from a command line client (see <b>gg</b>):

           // Add data
           gg -r --req="/arrsrv/op=add/key=15/data=15" --service --app="/arr" --exec
           // Query data
           gg -r --req="/arrsrv/op=query/key=15" --service --app="/arr" --exec
           // Delete data
           gg -r --req="/arrsrv/op=delete/key=15" --service --app="/arr" --exec

       See <b>read-array</b> for more examples.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        Array

       <b>new-array</b> <b>purge-array</b> <b>read-array</b> <b>write-array</b> See all <b>documentation</b>

$DATE                                               $VERSION                                           <u><a href="../man2gg/GOLF.2gg.html">GOLF</a></u>(2gg)
</pre>
 </div>
</div></section>
</div>
</body>
</html>