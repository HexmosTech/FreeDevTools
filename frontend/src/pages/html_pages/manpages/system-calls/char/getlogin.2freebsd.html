<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getlogin, getlogin_r, setlogin — get/set login name</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       getlogin, getlogin_r, setlogin — get/set login name

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <u>char</u> <u>*</u>
       <b>getlogin</b>(<u>void</u>);

       <b>#include</b> <b>&lt;sys/param.h&gt;</b>

       <u>int</u>
       <b>getlogin_r</b>(<u>char</u> <u>*name</u>, <u>size_t</u> <u>len</u>);

       <u>int</u>
       <b>setlogin</b>(<u>const</u> <u>char</u> <u>*name</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>getlogin</b>()  routine  returns  the  login  name  of  the user associated with the current session, as
       previously set by <b>setlogin</b>().  The name is normally associated with a login shell at the time  a  session
       is created, and is inherited by all processes descended from the login shell.  (This is true even if some
       of those processes assume another user ID, for example when <u><a href="../man1/su.1.html">su</a></u>(1) is used).

       The  <b>getlogin_r</b>()  function  provides  the  same service as <b>getlogin</b>() except the caller must provide the
       buffer <u>name</u> with length <u>len</u> bytes to hold the result.  The buffer should be at least MAXLOGNAME bytes  in
       length.

       The  <b>setlogin</b>()  system call sets the login name of the user associated with the current session to <u>name</u>.
       This system call is restricted to the super-user, and is normally used only when a new session  is  being
       created on behalf of the named user (for example, at login time, or when a remote shell is invoked).

       <u>NOTE</u>: There is only one login name per session.

       It  is  <u>CRITICALLY</u>  important  to  ensure that <b>setlogin</b>() is only ever called after the process has taken
       adequate steps to ensure that it is detached from its parent's session.  Making a <b>setsid</b>() system call is
       the <u>ONLY</u> way to do this.  The <u><a href="../man3/daemon.3.html">daemon</a></u>(3) function calls <b>setsid</b>() which is an ideal way of detaching from a
       controlling terminal and forking into the background.

       In particular, doing a <b>ioctl</b>(<u>ttyfd</u>, <u>TIOCNOTTY</u>, <u>...</u>) or <b>setpgrp</b>(<u>...</u>) is <u>NOT</u> sufficient.

       Once a parent process does a <b>setsid</b>() system call, it is acceptable for some child  of  that  process  to
       then  do  a  <b>setlogin</b>()  even  though  it is not the session leader, but beware that ALL processes in the
       session will change their login name at the same time, even the parent.

       This is not the same as the traditional UNIX behavior of inheriting privilege.

       Since the <b>setlogin</b>() system call is restricted to the super-user, it is  assumed  that  (like  all  other
       privileged programs) the programmer has taken adequate precautions to prevent security violations.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       If a call to <b>getlogin</b>() succeeds, it returns a pointer to a null-terminated string in a static buffer, or
       NULL  if  the  name has not been set.  The <b>getlogin_r</b>() function returns zero if successful, or the error
       number upon failure.

       The <b>setlogin</b>() function returns the value 0 if successful; otherwise the value -1  is  returned  and  the
       global variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The following errors may be returned by these calls:

       [EFAULT]           The <u>name</u> argument gave an invalid address.

       [EINVAL]           The  <u>name</u>  argument pointed to a string that was too long.  Login names are limited to
                          MAXLOGNAME (from &lt;<u>sys/param.h</u>&gt;) characters, currently 33 including null.

       [EPERM]            The caller tried to set the login name and was not the super-user.

       [ERANGE]           The size of the buffer is smaller than the result to be returned.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/setsid.2.html">setsid</a></u>(2), <u><a href="../man3/daemon.3.html">daemon</a></u>(3)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>getlogin</b>() system call and the <b>getlogin_r</b>() function conform to ISO/IEC 9945-1:1996 (“POSIX.1”).

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>getlogin</b>() system call first appeared in 4.4BSD.  The return value of <b>getlogin_r</b>() was  changed  from
       earlier versions of FreeBSD to be conformant with ISO/IEC 9945-1:1996 (“POSIX.1”).

</pre><h4><b>BUGS</b></h4><pre>
       In  earlier  versions  of  the  system,  <b>getlogin</b>() failed unless the process was associated with a login
       terminal.  The current implementation (using <b>setlogin</b>()) allows getlogin to succeed even when the process
       has no controlling terminal.  In earlier versions of the system, the value returned by  <b>getlogin</b>()  could
       not be trusted without checking the user ID.  Portable programs should probably still make this check.

Debian                                          September 9, 2020                                    <u><a href="../man2/GETLOGIN.2.html">GETLOGIN</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>