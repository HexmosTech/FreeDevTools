<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>execve, fexecve — execute a file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       execve, fexecve — execute a file

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <u>int</u>
       <b>execve</b>(<u>const</u> <u>char</u> <u>*path</u>, <u>char</u> <u>*const</u> <u>argv[]</u>, <u>char</u> <u>*const</u> <u>envp[]</u>);

       <u>int</u>
       <b>fexecve</b>(<u>int</u> <u>fd</u>, <u>char</u> <u>*const</u> <u>argv[]</u>, <u>char</u> <u>*const</u> <u>envp[]</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>execve</b>()  system  call  transforms  the  calling  process  into  a  new process.  The new process is
       constructed from an ordinary file, whose name is pointed to by <u>path</u>, called the <u>new</u>  <u>process</u>  <u>file</u>.   The
       <b>fexecve</b>()  system call is equivalent to <b>execve</b>() except that the file to be executed is determined by the
       file descriptor <u>fd</u> instead of a <u>path</u>.  This file is either an executable object file, or a file  of  data
       for  an  interpreter.   An executable object file consists of an identifying header, followed by pages of
       data representing the initial program (text)  and  initialized  data  pages.   Additional  pages  may  be
       specified by the header to be initialized with zero data; see <u><a href="../man5/elf.5.html">elf</a></u>(5) and <u><a href="../man5/a.out.5.html">a.out</a></u>(5).

       An interpreter file begins with a line of the form:

             <b>#!</b> <u>interpreter</u> [<u>arg</u>]

       When  an  interpreter  file  is <b>execve</b>'d, the system actually <b>execve</b>'s the specified <u>interpreter</u>.  If the
       optional <u>arg</u> is specified, it becomes the first  argument  to  the  <u>interpreter</u>,  and  the  name  of  the
       originally <b>execve</b>'d file becomes the second argument; otherwise, the name of the originally <b>execve</b>'d file
       becomes  the first argument.  The original arguments are shifted over to become the subsequent arguments.
       The zeroth argument is set to the specified <u>interpreter</u>.

       The argument <u>argv</u> is a pointer to a  null-terminated  array  of  character  pointers  to  null-terminated
       character  strings.   These  strings construct the argument list to be made available to the new process.
       At least one argument must be present in the array; by custom, the first element should be  the  name  of
       the executed program (for example, the last component of <u>path</u>).

       The  argument  <u>envp</u> is also a pointer to a null-terminated array of character pointers to null-terminated
       strings.  A pointer to this array is normally stored in the global variable <u>environ</u>.  These strings  pass
       information to the new process that is not directly an argument to the command (see <u><a href="../man7/environ.7.html">environ</a></u>(7)).

       File descriptors open in the calling process image remain open in the new process image, except for those
       for  which  the  close-on-exec flag is set (see <u><a href="../man2/close.2.html">close</a></u>(2) and <u><a href="../man2/fcntl.2.html">fcntl</a></u>(2)).  Descriptors that remain open are
       unaffected by <b>execve</b>().  If any of the standard descriptors (0, 1, and/or  2)  are  closed  at  the  time
       <b>execve</b>()  is  called,  and  the  process  will  gain  privilege  as  a  result of set-id semantics, those
       descriptors will be re-opened automatically.  No programs, whether privileged or not, should assume  that
       these descriptors will remain closed across a call to <b>execve</b>().

       Signals set to be ignored in the calling process are set to be ignored in the new process.  Signals which
       are  set  to  be  caught in the calling process image are set to default action in the new process image.
       Blocked signals remain blocked regardless of changes to the signal action.  The signal stack is reset  to
       be undefined (see <u><a href="../man2/sigaction.2.html">sigaction</a></u>(2) for more information).

       If the set-user-ID mode bit of the new process image file is set (see <u><a href="../man2/chmod.2.html">chmod</a></u>(2)), the effective user ID of
       the new process image is set to the owner ID of the new process image file.  If the set-group-ID mode bit
       of the new process image file is set, the effective group ID of the new process image is set to the group
       ID  of the new process image file.  (The effective group ID is the first element of the group list.)  The
       real user ID, real group ID and other group IDs of the new process image remain the same as  the  calling
       process  image.   After any set-user-ID and set-group-ID processing, the effective user ID is recorded as
       the saved set-user-ID, and the effective group ID is recorded as the saved  set-group-ID.   These  values
       may be used in changing the effective IDs later (see <u><a href="../man2/setuid.2.html">setuid</a></u>(2)).

       The set-ID bits are not honored if the respective file system has the <b>nosuid</b> option enabled or if the new
       process file is an interpreter file.  Syscall tracing is disabled if effective IDs are changed.

       The new process also inherits the following attributes from the calling process:

             process ID           see <u><a href="../man2/getpid.2.html">getpid</a></u>(2)
             parent process ID    see <u><a href="../man2/getppid.2.html">getppid</a></u>(2)
             process group ID     see <u><a href="../man2/getpgrp.2.html">getpgrp</a></u>(2)
             access groups        see <u><a href="../man2/getgroups.2.html">getgroups</a></u>(2)
             working directory    see <u><a href="../man2/chdir.2.html">chdir</a></u>(2)
             root directory       see <u><a href="../man2/chroot.2.html">chroot</a></u>(2)
             control terminal     see <u><a href="../man4/termios.4.html">termios</a></u>(4)
             resource usages      see <u><a href="../man2/getrusage.2.html">getrusage</a></u>(2)
             interval timers      see <u><a href="../man2/getitimer.2.html">getitimer</a></u>(2)
             resource limits      see <u><a href="../man2/getrlimit.2.html">getrlimit</a></u>(2)
             file mode mask       see <u><a href="../man2/umask.2.html">umask</a></u>(2)
             signal mask          see <u><a href="../man2/sigaction.2.html">sigaction</a></u>(2), <u><a href="../man2/sigprocmask.2.html">sigprocmask</a></u>(2)

       When a program is executed as a result of an <b>execve</b>() system call, it is entered as follows:

             main(argc, argv, envp)
             int argc;
             char **argv, **envp;

       where  <u>argc</u>  is  the  number  of  elements  in  <u>argv</u>  (the ``arg count'') and <u>argv</u> points to the array of
       character pointers to the arguments themselves.

       The <b>fexecve</b>() ignores the file offset of <u>fd</u>.  Since execute permission is checked by <b>fexecve</b>(), the  file
       descriptor <u>fd</u> need not have been opened with the O_EXEC flag.  However, if the file to be executed denies
       read  permission for the process preparing to do the exec, the only way to provide the <u>fd</u> to <b>fexecve</b>() is
       to use the O_EXEC flag when opening <u>fd</u>.  Note that the file to be executed can not be open for writing.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       As the <b>execve</b>() system call overlays the current process image with a new process  image  the  successful
       call  has no process to return to.  If <b>execve</b>() does return to the calling process an error has occurred;
       the return value will be -1 and the global variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>execve</b>() system call will fail and return to the calling process if:

       [ENOTDIR]          A component of the path prefix is not a directory.

       [ENAMETOOLONG]     A component of a pathname exceeded 255 characters, or an  entire  path  name  exceeded
                          1023 characters.

       [ENOEXEC]          When invoking an interpreted script, the length of the first line, inclusive of the <b>#!</b>
                          prefix and terminating newline, exceeds MAXSHELLCMDLEN characters.

       [ENOENT]           The new process file does not exist.

       [ELOOP]            Too many symbolic links were encountered in translating the pathname.

       [EACCES]           Search permission is denied for a component of the path prefix.

       [EACCES]           The new process file is not an ordinary file.

       [EACCES]           The new process file mode denies execute permission.

       [ENOEXEC]          The  new  process file has the appropriate access permission, but has an invalid magic
                          number in its header.

       [ETXTBSY]          The new process file is a pure procedure (shared text) file that is currently open for
                          writing by some process.

       [ENOMEM]           The new process requires more virtual memory than is allowed by  the  imposed  maximum
                          (<u><a href="../man2/getrlimit.2.html">getrlimit</a></u>(2)).

       [E2BIG]            The  number  of  bytes  in  the  new process' argument list is larger than the system-
                          imposed limit.  This limit is specified by the <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3) MIB variable KERN_ARGMAX.

       [EFAULT]           The new process file is not as long as indicated by the size values in its header.

       [EFAULT]           The <u>path</u>, <u>argv</u>, or <u>envp</u> arguments point to an illegal address.

       [EIO]              An I/O error occurred while reading from the file system.

       [EINTEGRITY]       Corrupted data was detected while reading from the file system.

       In addition, the <b>fexecve</b>() will fail and return to the calling process if:

       [EBADF]            The <u>fd</u> argument is not a valid file descriptor open for executing.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/ktrace.1.html">ktrace</a></u>(1), <b>_</b><u><a href="../man2/exit.2.html">exit</a></u>(2), <u><a href="../man2/fork.2.html">fork</a></u>(2),  <u><a href="../man2/open.2.html">open</a></u>(2),  <u><a href="../man3/execl.3.html">execl</a></u>(3),  <u><a href="../man3/exit.3.html">exit</a></u>(3),  <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3),  <u><a href="../man5/a.out.5.html">a.out</a></u>(5),  <u><a href="../man5/elf.5.html">elf</a></u>(5),  <u><a href="../man5/fdescfs.5.html">fdescfs</a></u>(5),
       <u><a href="../man7/environ.7.html">environ</a></u>(7), <u><a href="../man8/mount.8.html">mount</a></u>(8)

</pre><h4><b>STANDARDS</b></h4><pre>
       The  <b>execve</b>()  system  call conforms to IEEE Std 1003.1-2001 (“POSIX.1”), with the exception of reopening
       descriptors 0, 1, and/or 2 in certain circumstances.  A future update of  the  Standard  is  expected  to
       require  this  behavior, and it may become the default for non-privileged processes as well.  The support
       for executing interpreted programs is an extension.  The <b>fexecve</b>() system call conforms to The Open Group
       Extended API Set 2 specification.

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>execve</b>() system call appeared in 4.2BSD.  The <b>fexecve</b>() system call appeared in FreeBSD 8.0.

</pre><h4><b>CAVEATS</b></h4><pre>
       If a program is <u>setuid</u> to a non-super-user, but is executed when the  real  <u>uid</u>  is  ``root'',  then  the
       program has some of the powers of a super-user as well.

       When  executing  an interpreted program through <b>fexecve</b>(), kernel supplies <u>/dev/fd/n</u> as a second argument
       to the interpreter, where <u>n</u> is the file descriptor passed in the <u>fd</u>  argument  to  <b>fexecve</b>().   For  this
       construction to work correctly, the <u><a href="../man5/fdescfs.5.html">fdescfs</a></u>(5) filesystem shall be mounted on <u><a href="file:/dev/fd">/dev/fd</a></u>.

Debian                                           March 30, 2020                                        <u><a href="../man2/EXECVE.2.html">EXECVE</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>