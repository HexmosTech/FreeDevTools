<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>listen - listen for connections on a socket</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       listen - listen for connections on a socket

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/socket.h&gt;</b>

       <b>int</b> <b>listen(int</b> <u>sockfd</u><b>,</b> <b>int</b> <u>backlog</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>listen</b>()  marks  the  socket referred to by <u>sockfd</u> as a passive socket, that is, as a socket that will be
       used to accept incoming connection requests using <b><a href="../man2/accept.2.html">accept</a></b>(2).

       The <u>sockfd</u> argument is a file descriptor that refers to a socket of type <b>SOCK_STREAM</b> or <b>SOCK_SEQPACKET</b>.

       The <u>backlog</u> argument defines the maximum length to which the queue of pending connections for <u>sockfd</u>  may
       grow.   If  a  connection request arrives when the queue is full, the client may receive an error with an
       indication of <b>ECONNREFUSED</b> or, if the underlying protocol supports retransmission,  the  request  may  be
       ignored so that a later reattempt at connection succeeds.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, zero is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EADDRINUSE</b>
              Another socket is already listening on the same port.

       <b>EADDRINUSE</b>
              (Internet  domain  sockets)  The  socket referred to by <u>sockfd</u> had not previously been bound to an
              address and, upon attempting to bind it to an ephemeral port, it  was  determined  that  all  port
              numbers   in   the   ephemeral   port   range  are  currently  in  use.   See  the  discussion  of
              <u><a href="file:/proc/sys/net/ipv4/ip_local_port_range">/proc/sys/net/ipv4/ip_local_port_range</a></u> in <b><a href="../man7/ip.7.html">ip</a></b>(7).

       <b>EBADF</b>  The argument <u>sockfd</u> is not a valid file descriptor.

       <b>ENOTSOCK</b>
              The file descriptor <u>sockfd</u> does not refer to a socket.

       <b>EOPNOTSUPP</b>
              The socket is not of a type that supports the <b>listen</b>() operation.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001, 4.4BSD (first appeared in 4.2BSD).

</pre><h4><b>NOTES</b></h4><pre>
       To accept connections, the following steps are performed:

           (1)  A socket is created with <b><a href="../man2/socket.2.html">socket</a></b>(2).

           (2)  The socket is bound to a local address using <b><a href="../man2/bind.2.html">bind</a></b>(2), so that other sockets may be  <b><a href="../man2/connect.2.html">connect</a></b>(2)ed
                to it.

           (3)  A  willingness  to  accept  incoming  connections and a queue limit for incoming connections are
                specified with <b>listen</b>().

           (4)  Connections are accepted with <b><a href="../man2/accept.2.html">accept</a></b>(2).

       The behavior of the <u>backlog</u> argument on TCP sockets changed with Linux 2.2.  Now it specifies  the  queue
       length  for  <u>completely</u>  established  sockets waiting to be accepted, instead of the number of incomplete
       connection requests.  The  maximum  length  of  the  queue  for  incomplete  sockets  can  be  set  using
       <u><a href="file:/proc/sys/net/ipv4/tcp_max_syn_backlog">/proc/sys/net/ipv4/tcp_max_syn_backlog</a></u>.   When  syncookies are enabled there is no logical maximum length
       and this setting is ignored.  See <b><a href="../man7/tcp.7.html">tcp</a></b>(7) for more information.

       If the <u>backlog</u> argument is greater than the value in <u><a href="file:/proc/sys/net/core/somaxconn">/proc/sys/net/core/somaxconn</a></u>, then  it  is  silently
       capped to that value.  Since Linux 5.4, the default in this file is 4096; in earlier kernels, the default
       value is 128.  Before Linux 2.4.25, this limit was a hard coded value, <b>SOMAXCONN</b>, with the value 128.

</pre><h4><b>EXAMPLES</b></h4><pre>
       See <b><a href="../man2/bind.2.html">bind</a></b>(2).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/accept.2.html">accept</a></b>(2), <b><a href="../man2/bind.2.html">bind</a></b>(2), <b><a href="../man2/connect.2.html">connect</a></b>(2), <b><a href="../man2/socket.2.html">socket</a></b>(2), <b><a href="../man7/socket.7.html">socket</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                          <u><a href="../man2/listen.2.html">listen</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>