<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cpuset_getdomain, cpuset_setdomain — manage memory domain policy</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cpuset_getdomain, cpuset_setdomain — manage memory domain policy

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/param.h&gt;</b>
       <b>#include</b> <b>&lt;sys/domainset.h&gt;</b>

       <u>int</u>
       <b>cpuset_getdomain</b>(<u>cpulevel_t</u>  <u>level</u>,  <u>cpuwhich_t</u>  <u>which</u>,  <u>id_t</u>  <u>id</u>,  <u>size_t</u>  <u>setsize</u>,  <u>domainset_t</u>  <u>*mask</u>,
           <u>int</u> <u>*policy</u>);

       <u>int</u>
       <b>cpuset_setdomain</b>(<u>cpulevel_t</u> <u>level</u>, <u>cpuwhich_t</u> <u>which</u>, <u>id_t</u> <u>id</u>, <u>size_t</u> <u>setsize</u>,  <u>const</u>  <u>domainset_t</u>  <u>*mask</u>,
           <u>int</u> <u>policy</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>cpuset_getdomain</b>() and <b>cpuset_setdomain</b>() allow the manipulation of sets of memory domains and allocation
       policy  available  to processes, threads, jails and other resources.  These functions may manipulate sets
       of memory domains that contain many processes or per-object anonymous masks that  affect  only  a  single
       object.

       The  valid values for the <u>level</u> and <u>which</u> arguments are documented in <u><a href="../man2/cpuset.2.html">cpuset</a></u>(2).  These arguments specify
       which object and which set of the object we are referring to.  Not all possible combinations  are  valid.
       For   example,   only  processes  may  belong  to  a  numbered  set  accessed  by  a  <u>level</u>  argument  of
       CPU_LEVEL_CPUSET.  All resources, however, have a mask which may be manipulated with CPU_LEVEL_WHICH.

       Masks of type <u>domainset_t</u> are composed using the DOMAINSET macros.  The kernel tolerates  large  sets  as
       long  as  all domains specified in the set exist.  Sets smaller than the kernel uses generate an error on
       calls to <b>cpuset_getdomain</b>() even if the result set would fit within the  user  supplied  set.   Calls  to
       <b>cpuset_setdomain</b>() tolerate small sets with no restrictions.

       The  supplied  mask  should  have  a  size  of  <u>setsize</u>  bytes.  This size is usually provided by calling
       <b><a href="../manmask/sizeof.mask.html">sizeof</a>(mask)</b>  which  is  ultimately  determined  by  the  value  of  DOMAINSET_SETSIZE  as   defined   in
       &lt;<u>sys/domainset.h</u>&gt;.

       <b>cpuset_getdomain</b>()  retrieves  the  mask  and policy from the object specified by <u>level</u>, <u>which</u> and <u>id</u> and
       stores it in the space provided by <u>mask</u> and <u>policy</u>.

       <b>cpuset_setdomain</b>() attempts to set the mask and policy for the object specified by <u>level</u>, <u>which</u> and <u>id</u> to
       the values in <u>mask</u> and <u>policy</u>.

</pre><h4><b>ALLOCATION</b> <b>POLICIES</b></h4><pre>
       Valid policy values are as follows:

       DOMAINSET_POLICY_ROUNDROBIN
            Memory is allocated on a round-robin basis by cycling through each domain in <u>mask</u>.

       DOMAINSET_POLICY_FIRSTTOUCH
            Memory is allocated on the domain local to the CPU the requesting thread is running on.  Failure  to
            allocate from this domain will fallback to round-robin.

       DOMAINSET_POLICY_PREFER
            Memory  is  allocated  preferentially  from  the  single domain specified in the mask.  If memory is
            unavailable the domains listed in the parent cpuset will be visited in a round-robin order.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Upon successful completion, the value 0 is returned; otherwise the value -1 is returned  and  the  global
       variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The following error codes may be set in <u>errno</u>:

       [EINVAL]           The <u>level</u> or <u>which</u> argument was not a valid value.

       [EINVAL]           The  <u>mask</u> <u>or</u> <u>policy</u> argument specified when calling <b>cpuset_setdomain</b>() was not a valid
                          value.

       [EDEADLK]          The <b>cpuset_setdomain</b>() call would leave a thread without a valid CPU to run on because
                          the set does not overlap with the thread's anonymous mask.

       [EFAULT]           The mask pointer passed was invalid.

       [ESRCH]            The object specified by the <u>id</u> and <u>which</u> arguments could not be found.

       [ERANGE]           The <u>domainsetsize</u> was either preposterously large or smaller than the kernel set size.

       [EPERM]            The calling process did not have the credentials required to complete the operation.

       [ECAPMODE]         The calling process attempted to  act  on  a  process  other  than  itself,  while  in
                          capability mode.  See <u><a href="../man4/capsicum.4.html">capsicum</a></u>(4).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man4/capsicum.4.html">capsicum</a></u>(4),    <u><a href="../man1/cpuset.1.html">cpuset</a></u>(1),    <u><a href="../man2/cpuset.2.html">cpuset</a></u>(2),    <u><a href="../man2/cpuset_getid.2.html">cpuset_getid</a></u>(2),    <u><a href="../man2/cpuset_setid.2.html">cpuset_setid</a></u>(2),   <u><a href="../man2/cpuset_getaffinity.2.html">cpuset_getaffinity</a></u>(2),
       <u><a href="../man2/cpuset_setaffinity.2.html">cpuset_setaffinity</a></u>(2), <u><a href="../man9/cpuset.9.html">cpuset</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>cpuset_getdomain</b> family of system calls first appeared in FreeBSD 12.0.

</pre><h4><b>AUTHORS</b></h4><pre>
       Jeffrey Roberson &lt;<u><a href="mailto:jeff@FreeBSD.org">jeff@FreeBSD.org</a></u>&gt;

Debian                                            June 18, 2020                              <u><a href="../man2/CPUSET_GETDOMAIN.2.html">CPUSET_GETDOMAIN</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>