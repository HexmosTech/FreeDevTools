<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>unlink, unlinkat — remove directory entry</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       unlink, unlinkat — remove directory entry

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <u>int</u>
       <b>unlink</b>(<u>const</u> <u>char</u> <u>*path</u>);

       <u>int</u>
       <b>unlinkat</b>(<u>int</u> <u>fd</u>, <u>const</u> <u>char</u> <u>*path</u>, <u>int</u> <u>flag</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>unlink</b>() system call removes the link named by <u>path</u> from its directory and decrements the link count
       of the file which was referenced by the link.  If that decrement reduces the link count of  the  file  to
       zero,  and  no  process has the file open, then all resources associated with the file are reclaimed.  If
       one or more process have the file open when the last link is  removed,  the  link  is  removed,  but  the
       removal of the file is delayed until all references to it have been closed.  The <u>path</u> argument may not be
       a directory.

       The <b>unlinkat</b>() system call is equivalent to <b>unlink</b>() or <b>rmdir</b>() except in the case where <u>path</u> specifies a
       relative  path.   In  this case the directory entry to be removed is determined relative to the directory
       associated with the file descriptor <u>fd</u> instead of the current working directory.

       The values for <u>flag</u> are constructed by a bitwise-inclusive OR of flags from the following  list,  defined
       in &lt;<u>fcntl.h</u>&gt;:

       AT_REMOVEDIR
               Remove the directory entry specified by <u>fd</u> and <u>path</u> as a directory, not a normal file.

       If  <b>unlinkat</b>() is passed the special value AT_FDCWD in the <u>fd</u> parameter, the current working directory is
       used and the behavior is identical to a call to <u>unlink</u> or <u>rmdir</u> respectively, depending on whether or not
       the AT_REMOVEDIR bit is set in flag.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The <b>unlink</b>() function returns the value 0 if successful; otherwise the  value  -1  is  returned  and  the
       global variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>unlink</b>() succeeds unless:

       [ENOTDIR]          A component of the path prefix is not a directory.

       [EISDIR]           The named file is a directory.

       [ENAMETOOLONG]     A  component  of  a  pathname exceeded 255 characters, or an entire path name exceeded
                          1023 characters.

       [ENOENT]           The named file does not exist.

       [EACCES]           Search permission is denied for a component of the path prefix.

       [EACCES]           Write permission is denied on the directory containing the link to be removed.

       [ELOOP]            Too many symbolic links were encountered in translating the pathname.

       [EPERM]            The named file is a directory.

       [EPERM]            The named file has its  immutable,  undeletable  or  append-only  flag  set,  see  the
                          <u><a href="../man2/chflags.2.html">chflags</a></u>(2) manual page for more information.

       [EPERM]            The parent directory of the named file has its immutable or append-only flag set.

       [EPERM]            The  directory  containing  the  file  is  marked  sticky,  and neither the containing
                          directory nor the file to be removed are owned by the effective user ID.

       [EIO]              An I/O error occurred while deleting the directory entry or deallocating the inode.

       [EINTEGRITY]       Corrupted data was detected while reading from the file system.

       [EROFS]            The named file resides on a read-only file system.

       [EFAULT]           The <u>path</u> argument points outside the process's allocated address space.

       [ENOSPC]           On file systems supporting copy-on-write or snapshots, there was not enough free space
                          to record metadata for the delete operation of the file.

       In addition to the errors returned by the <b>unlink</b>(), the <b>unlinkat</b>() may fail if:

       [EBADF]            The <u>path</u> argument does not specify an absolute path and the  <u>fd</u>  argument  is  neither
                          AT_FDCWD nor a valid file descriptor open for searching.

       [ENOTEMPTY]        The  <u>flag</u>  parameter  has  the  AT_REMOVEDIR  bit  set  and  the <u>path</u> argument names a
                          directory that is not an empty directory, or there are hard  links  to  the  directory
                          other than dot or a single entry in dot-dot.

       [ENOTDIR]          The <u>flag</u> parameter has the AT_REMOVEDIR bit set and <u>path</u> does not name a directory.

       [EINVAL]           The value of the <u>flag</u> argument is not valid.

       [ENOTDIR]          The  <u>path</u>  argument  is  not  an  absolute  path and <u>fd</u> is neither AT_FDCWD nor a file
                          descriptor associated with a directory.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/chflags.2.html">chflags</a></u>(2), <u><a href="../man2/close.2.html">close</a></u>(2), <u><a href="../man2/link.2.html">link</a></u>(2), <u><a href="../man2/rmdir.2.html">rmdir</a></u>(2), <u><a href="../man7/symlink.7.html">symlink</a></u>(7)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>unlinkat</b>() system call follows The Open Group Extended API Set 2 specification.

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>unlink</b>() function appeared  in  Version  1  AT&amp;T  UNIX.   The  <b>unlinkat</b>()  system  call  appeared  in
       FreeBSD 8.0.

       The  <b>unlink</b>()  system call traditionally allows the super-user to unlink directories which can damage the
       file system integrity.  This implementation no longer permits it.

Debian                                           March 30, 2020                                        <u><a href="../man2/UNLINK.2.html">UNLINK</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>