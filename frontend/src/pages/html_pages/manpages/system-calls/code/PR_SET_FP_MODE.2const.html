<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PR_SET_FP_MODE - set the floating point mode of the calling process</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       PR_SET_FP_MODE - set the floating point mode of the calling process

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/linux/prctl.h">linux/prctl.h</a>&gt;</b>  /* Definition of <b>PR_*</b> constants */
       <b>#include</b> <b>&lt;sys/prctl.h&gt;</b>

       <b>int</b> <b>prctl(PR_SET_FP_MODE,</b> <b>unsigned</b> <b>long</b> <u>mode</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       On  the MIPS architecture, user-space code can be built using an ABI which permits linking with code that
       has more restrictive floating-point (FP) requirements.  For example, user-space  code  may  be  built  to
       target  the  O32  FPXX ABI and linked with code built for either one of the more restrictive FP32 or FP64
       ABIs.  When more restrictive code is linked in, the overall requirement for the process  is  to  use  the
       more restrictive floating-point mode.

       Because  the  kernel has no means of knowing in advance which mode the process should be executed in, and
       because these restrictions can change over the lifetime of the process, the <b>PR_SET_FP_MODE</b>  operation  is
       provided to allow control of the floating-point mode from user space.

       The <u>mode</u> argument is a bit mask describing the floating-point mode used:

       <b>PR_FP_MODE_FR</b>
              When  this  bit is <u>unset</u> (so called <b>FR=0</b> or <b>FR0</b> mode), the 32 floating-point registers are 32 bits
              wide, and 64-bit registers are represented as a pair of registers (even- and odd-  numbered,  with
              the  even-numbered register containing the lower 32 bits, and the odd-numbered register containing
              the higher 32 bits).

              When this bit is <u>set</u> (on supported hardware), the 32 floating-point registers are 64 bits wide (so
              called <b>FR=1</b> or <b>FR1</b> mode).  Note that modern MIPS implementations (MIPS R6 and newer) support  <b>FR=1</b>
              mode only.

              Applications  that use the O32 FP32 ABI can operate only when this bit is <u>unset</u> (<b>FR=0</b>; or they can
              be used with FRE enabled, see below).  Applications that use the O32 FP64 ABI (and the  O32  FP64A
              ABI,  which  exists  to  provide  the  ability  to operate with existing FP32 code; see below) can
              operate only when this bit is <u>set</u> (<b>FR=1</b>).  Applications that use the O32 FPXX ABI can operate with
              either <b>FR=0</b> or <b>FR=1</b>.

       <b>PR_FP_MODE_FRE</b>
              Enable emulation of 32-bit floating-point mode.  When this mode is  enabled,  it  emulates  32-bit
              floating-point  operations  by  raising a reserved-instruction exception on every instruction that
              uses 32-bit formats and the kernel then handles the instruction in software.  (The problem lies in
              the discrepancy of handling odd-numbered registers which are the high 32 bits of 64-bit  registers
              with even numbers in <b>FR=0</b> mode and the lower 32-bit parts of odd-numbered 64-bit registers in <b>FR=1</b>
              mode.)   Enabling  this  bit is necessary when code with the O32 FP32 ABI should operate with code
              with compatible the O32 FPXX or O32 FP64A ABIs (which  require  <b>FR=1</b>  FPU  mode)  or  when  it  is
              executed  on newer hardware (MIPS R6 onwards) which lacks <b>FR=0</b> mode support when a binary with the
              FP32 ABI is used.

              Note that this mode makes sense only when the FPU is in 64-bit mode (<b>FR=1</b>).

              Note that the use of emulation inherently has a significant performance hit and should be  avoided
              if possible.

       In  the  N32/N64 ABI, 64-bit floating-point mode is always used, so FPU emulation is not required and the
       FPU always operates in <b>FR=1</b> mode.

       This operation is mainly intended for use by the dynamic linker (<b><a href="../man8/ld.so.8.html">ld.so</a></b>(8)).

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, 0 is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EOPNOTSUPP</b>
              <u>mode</u> has an invalid or unsupported value.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.  MIPS only.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 4.0 (MIPS).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/prctl.2.html">prctl</a></b>(2), <b><a href="../man2const/PR_GET_FP_MODE.2const.html">PR_GET_FP_MODE</a></b>(2const)

Linux man-pages 6.9.1                              2024-06-02                             <u><a href="../man2const/PR_SET_FP_MODE.2const.html">PR_SET_FP_MODE</a></u>(2const)
</pre>
 </div>
</div></section>
</div>
</body>
</html>