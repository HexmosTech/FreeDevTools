<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vfork — create a new process without copying the address space</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vfork — create a new process without copying the address space

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <u>pid_t</u>
       <b>vfork</b>(<u>void</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>Since</b>  <b>this</b>  <b>function</b>  <b>is</b>  <b>hard</b>  <b>to</b>  <b>use</b>  <b>correctly</b>  <b>from</b>  <b>application</b> <b>software,</b> <b>it</b> <b>is</b> <b>recommended</b> <b>to</b> <b>use</b>
       <u>posix_spawn</u>(<b>3</b>) <b>or</b> <u>fork</u>(<b>2</b>) <b>instead.</b>

       The <b>vfork</b>() system call can be used to create new processes without fully copying the  address  space  of
       the  old  process, which is inefficient in a paged environment.  It is useful when the purpose of <u><a href="../man2/fork.2.html">fork</a></u>(2)
       would have been to create a new system context for an <u><a href="../man2/execve.2.html">execve</a></u>(2).  The <b>vfork</b>() system  call  differs  from
       <u><a href="../man2/fork.2.html">fork</a></u>(2) in that the child borrows the parent process's address space and the calling thread's stack until
       a  call  to  <u><a href="../man2/execve.2.html">execve</a></u>(2)  or  an  exit (either by a call to <b>_</b><u><a href="../man2/exit.2.html">exit</a></u>(2) or abnormally).  The calling thread is
       suspended while the child is using its resources.  Other threads continue to run.

       The <b>vfork</b>() system call returns 0 in the child's context and (later) the pid of the child in the parent's
       context.

       Many problems can occur when replacing <u><a href="../man2/fork.2.html">fork</a></u>(2) with <b>vfork</b>().  For example, it does  not  work  to  return
       while  running  in  the  child's context from the procedure that called <b>vfork</b>() since the eventual return
       from <b>vfork</b>() would then return to a no longer existent stack frame.  Also, changing process  state  which
       is  partially  implemented in user space such as signal handlers with <u><a href="../man3/libthr.3.html">libthr</a></u>(3) will corrupt the parent's
       state.

       Be careful, also, to call <b>_</b><u><a href="../man2/exit.2.html">exit</a></u>(2) rather than <u><a href="../man3/exit.3.html">exit</a></u>(3) if you cannot <u><a href="../man2/execve.2.html">execve</a></u>(2), since <u><a href="../man3/exit.3.html">exit</a></u>(3) will  flush
       and  close  standard I/O channels, and thereby mess up the parent processes standard I/O data structures.
       (Even with <u><a href="../man2/fork.2.html">fork</a></u>(2) it is wrong to call <u><a href="../man3/exit.3.html">exit</a></u>(3) since buffered data would then be flushed twice.)

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Same as for <u><a href="../man2/fork.2.html">fork</a></u>(2).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>_</b><u><a href="../man2/exit.2.html">exit</a></u>(2), <u><a href="../man2/execve.2.html">execve</a></u>(2), <u><a href="../man2/fork.2.html">fork</a></u>(2), <u><a href="../man2/rfork.2.html">rfork</a></u>(2), <u><a href="../man2/sigaction.2.html">sigaction</a></u>(2), <u><a href="../man2/wait.2.html">wait</a></u>(2), <u><a href="../man3/exit.3.html">exit</a></u>(3), <u><a href="../man3/posix_spawn.3.html">posix_spawn</a></u>(3)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>vfork</b>() system call appeared in 3BSD.

</pre><h4><b>BUGS</b></h4><pre>
       To avoid a possible deadlock situation, processes that are children in the middle of a <b>vfork</b>() are  never
       sent  SIGTTOU  or SIGTTIN signals; rather, output or <u><a href="../man2/ioctl.2.html">ioctl</a></u>(2) calls are allowed and input attempts result
       in an end-of-file indication.

Debian                                            May 22, 2016                                          <u><a href="../man2/VFORK.2.html">VFORK</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>