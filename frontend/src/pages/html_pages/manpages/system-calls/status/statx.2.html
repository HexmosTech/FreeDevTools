<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>statx - get file status (extended)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       statx - get file status (extended)

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#define</b> <b>_GNU_SOURCE</b>          /* See <a href="../man7/feature_test_macros.7.html">feature_test_macros</a>(7) */
       <b>#include</b> <b>&lt;<a href="file:/usr/include/fcntl.h">fcntl.h</a>&gt;</b>           /* Definition of <b>AT_*</b> constants */
       <b>#include</b> <b>&lt;sys/stat.h&gt;</b>

       <b>int</b> <b>statx(int</b> <u>dirfd</u><b>,</b> <b>const</b> <b>char</b> <b>*restrict</b> <u>pathname</u><b>,</b> <b>int</b> <u>flags</u><b>,</b>
                 <b>unsigned</b> <b>int</b> <u>mask</u><b>,</b> <b>struct</b> <b>statx</b> <b>*restrict</b> <u>statxbuf</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This  function  returns  information  about a file, storing it in the buffer pointed to by <u>statxbuf</u>.  The
       returned buffer is a structure of the following type:

           struct statx {
               __u32 stx_mask;        /* Mask of bits indicating
                                         filled fields */
               __u32 stx_blksize;     /* Block size for filesystem I/O */
               __u64 stx_attributes;  /* Extra file attribute indicators */
               __u32 stx_nlink;       /* Number of hard links */
               __u32 stx_uid;         /* User ID of owner */
               __u32 stx_gid;         /* Group ID of owner */
               __u16 stx_mode;        /* File type and mode */
               __u64 stx_ino;         /* Inode number */
               __u64 stx_size;        /* Total size in bytes */
               __u64 stx_blocks;      /* Number of 512B blocks allocated */
               __u64 stx_attributes_mask;
                                      /* Mask to show what's supported
                                         in stx_attributes */

               /* The following fields are file timestamps */
               struct statx_timestamp stx_atime;  /* Last access */
               struct statx_timestamp stx_btime;  /* Creation */
               struct statx_timestamp stx_ctime;  /* Last status change */
               struct statx_timestamp stx_mtime;  /* Last modification */

               /* If this file represents a device, then the next two
                  fields contain the ID of the device */
               __u32 stx_rdev_major;  /* Major ID */
               __u32 stx_rdev_minor;  /* Minor ID */

               /* The next two fields contain the ID of the device
                  containing the filesystem where the file resides */
               __u32 stx_dev_major;   /* Major ID */
               __u32 stx_dev_minor;   /* Minor ID */

               __u64 stx_mnt_id;      /* Mount ID */

               /* Direct I/O alignment restrictions */
               __u32 stx_dio_mem_align;
               __u32 stx_dio_offset_align;
           };

       The file timestamps are structures of the following type:

           struct statx_timestamp {
               __s64 tv_sec;    /* Seconds since the Epoch (UNIX time) */
               __u32 tv_nsec;   /* Nanoseconds since tv_sec */
           };

       (Note that reserved space and padding is omitted.)

   <b>Invoking</b> <b>statx</b>():
       To access a file's status, no permissions are required on the file itself, but in  the  case  of  <b>statx</b>()
       with  a pathname, execute (search) permission is required on all of the directories in <u>pathname</u> that lead
       to the file.

       <b>statx</b>() uses <u>pathname</u>, <u>dirfd</u>, and <u>flags</u> to identify the target file in one of the following ways:

       An absolute pathname
              If <u>pathname</u> begins with a slash, then it is an absolute pathname that identifies the target  file.
              In this case, <u>dirfd</u> is ignored.

       A relative pathname
              If  <u>pathname</u>  is  a  string that begins with a character other than a slash and <u>dirfd</u> is <b>AT_FDCWD</b>,
              then <u>pathname</u> is a relative pathname that is interpreted relative to the process's current working
              directory.

       A directory-relative pathname
              If <u>pathname</u> is a string that begins with a character other than  a  slash  and  <u>dirfd</u>  is  a  file
              descriptor  that  refers  to a directory, then <u>pathname</u> is a relative pathname that is interpreted
              relative to the directory referred to by <u>dirfd</u>.  (See <b><a href="../man2/openat.2.html">openat</a></b>(2) for an explanation of why this  is
              useful.)

       By file descriptor
              If  <u>pathname</u> is an empty string and the <b>AT_EMPTY_PATH</b> flag is specified in <u>flags</u> (see below), then
              the target file is the one referred to by the file descriptor <u>dirfd</u>.

       <u>flags</u> can be used to influence a pathname-based lookup.  A  value  for  <u>flags</u>  is  constructed  by  ORing
       together zero or more of the following constants:

       <b>AT_EMPTY_PATH</b>
              If  <u>pathname</u>  is  an  empty  string, operate on the file referred to by <u>dirfd</u> (which may have been
              obtained using the <b><a href="../man2/open.2.html">open</a></b>(2) <b>O_PATH</b> flag).  In this case, <u>dirfd</u> can refer to any type of  file,  not
              just a directory.

              If <u>dirfd</u> is <b>AT_FDCWD</b>, the call operates on the current working directory.

       <b>AT_NO_AUTOMOUNT</b>
              Don't  automount  the  terminal ("basename") component of <u>pathname</u> if it is a directory that is an
              automount point.  This allows the caller to gather attributes of an automount point  (rather  than
              the location it would mount).  This flag has no effect if the mount point has already been mounted
              over.

              The  <b>AT_NO_AUTOMOUNT</b>  flag can be used in tools that scan directories to prevent mass-automounting
              of a directory of automount points.

              All of <b><a href="../man2/stat.2.html">stat</a></b>(2), <b><a href="../man2/lstat.2.html">lstat</a></b>(2), and <b><a href="../man2/fstatat.2.html">fstatat</a></b>(2) act as though <b>AT_NO_AUTOMOUNT</b> was set.

       <b>AT_SYMLINK_NOFOLLOW</b>
              If <u>pathname</u> is a symbolic link, do not dereference it: instead return information about  the  link
              itself, like <b><a href="../man2/lstat.2.html">lstat</a></b>(2).

       <u>flags</u> can also be used to control what sort of synchronization the kernel will do when querying a file on
       a remote filesystem.  This is done by ORing in one of the following values:

       <b>AT_STATX_SYNC_AS_STAT</b>
              Do whatever <b><a href="../man2/stat.2.html">stat</a></b>(2) does.  This is the default and is very much filesystem-specific.

       <b>AT_STATX_FORCE_SYNC</b>
              Force  the  attributes  to  be  synchronized  with  the  server.   This may require that a network
              filesystem perform a data writeback to get the timestamps correct.

       <b>AT_STATX_DONT_SYNC</b>
              Don't synchronize anything, but rather just take whatever the system has cached if possible.  This
              may mean that the information returned is approximate, but, on a network filesystem,  it  may  not
              involve a round trip to the server - even if no lease is held.

       The  <u>mask</u>  argument to <b>statx</b>() is used to tell the kernel which fields the caller is interested in.  <u>mask</u>
       is an ORed combination of the following constants:

           <b>STATX_TYPE</b>          Want stx_mode &amp; S_IFMT
           <b>STATX_MODE</b>          Want stx_mode &amp; ~S_IFMT
           <b>STATX_NLINK</b>         Want stx_nlink
           <b>STATX_UID</b>           Want stx_uid
           <b>STATX_GID</b>           Want stx_gid
           <b>STATX_ATIME</b>         Want stx_atime
           <b>STATX_MTIME</b>         Want stx_mtime
           <b>STATX_CTIME</b>         Want stx_ctime
           <b>STATX_INO</b>           Want stx_ino
           <b>STATX_SIZE</b>          Want stx_size
           <b>STATX_BLOCKS</b>        Want stx_blocks
           <b>STATX_BASIC_STATS</b>   [All of the above]
           <b>STATX_BTIME</b>         Want stx_btime
           <b>STATX_ALL</b>           The same as STATX_BASIC_STATS | STATX_BTIME.
                               It is deprecated and should not be used.
           <b>STATX_MNT_ID</b>        Want stx_mnt_id (since Linux 5.8)
           <b>STATX_DIOALIGN</b>      Want stx_dio_mem_align and stx_dio_offset_align
                               (since Linux 6.1; support varies by filesystem)

       Note that, in general, the kernel does <u>not</u>  reject  values  in  <u>mask</u>  other  than  the  above.   (For  an
       exception,  see  <b>EINVAL</b>  in errors.)  Instead, it simply informs the caller which values are supported by
       this kernel and filesystem via the <u>statx.stx_mask</u> field.  Therefore, <u>do</u> <u>not</u> simply set <u>mask</u>  to  <b>UINT_MAX</b>
       (all bits set), as one or more bits may, in the future, be used to specify an extension to the buffer.

   <b>The</b> <b>returned</b> <b>information</b>
       The  status  information  for  the target file is returned in the <u>statx</u> structure pointed to by <u>statxbuf</u>.
       Included in this is <u>stx_mask</u> which indicates what other information has been returned.  <u>stx_mask</u> has  the
       same format as the <u>mask</u> argument and bits are set in it to indicate which fields have been filled in.

       It should be noted that the kernel may return fields that weren't requested and may fail to return fields
       that  were  requested,  depending on what the backing filesystem supports.  (Fields that are given values
       despite being unrequested can just be ignored.)  In either case, <u>stx_mask</u> will not be equal <u>mask</u>.

       If a filesystem does not support a field or if it has an unrepresentable value (for instance, a file with
       an exotic type), then the mask bit corresponding to that field will be cleared in <u>stx_mask</u>  even  if  the
       user  asked  for  it  and  a dummy value will be filled in for compatibility purposes if one is available
       (e.g., a dummy UID and GID may be specified to mount under some circumstances).

       A filesystem may also fill in fields that the caller didn't ask for if it has values for  them  available
       and  the  information is available at no extra cost.  If this happens, the corresponding bits will be set
       in <u>stx_mask</u>.

       <u>Note</u>: for performance and simplicity reasons, different fields in the <u>statx</u> structure may  contain  state
       information  from different moments during the execution of the system call.  For example, if <u>stx_mode</u> or
       <u>stx_uid</u> is changed by another process by calling <b><a href="../man2/chmod.2.html">chmod</a></b>(2)  or  <b><a href="../man2/chown.2.html">chown</a></b>(2),  <b>stat</b>()  might  return  the  old
       <u>stx_mode</u> together with the new <u>stx_uid</u>, or the old <u>stx_uid</u> together with the new <u>stx_mode</u>.

       Apart from <u>stx_mask</u> (which is described above), the fields in the <u>statx</u> structure are:

       <u>stx_blksize</u>
              The "preferred" block size for efficient filesystem I/O.  (Writing to a file in smaller chunks may
              cause an inefficient read-modify-rewrite.)

       <u>stx_attributes</u>
              Further status information about the file (see below for more information).

       <u>stx_nlink</u>
              The number of hard links on a file.

       <u>stx_uid</u>
              This field contains the user ID of the owner of the file.

       <u>stx_gid</u>
              This field contains the ID of the group owner of the file.

       <u>stx_mode</u>
              The file type and mode.  See <b><a href="../man7/inode.7.html">inode</a></b>(7) for details.

       <u>stx_ino</u>
              The inode number of the file.

       <u>stx_size</u>
              The  size  of  the  file  (if  it  is  a regular file or a symbolic link) in bytes.  The size of a
              symbolic link is the length of the pathname it contains, without a terminating null byte.

       <u>stx_blocks</u>
              The number of blocks allocated to the file on the medium, in 512-byte units.  (This may be smaller
              than <u>stx_size</u>/512 when the file has holes.)

       <u>stx_attributes_mask</u>
              A mask indicating which bits in <u>stx_attributes</u> are supported by the VFS and the filesystem.

       <u>stx_atime</u>
              The file's last access timestamp.

       <u>stx_btime</u>
              The file's creation timestamp.

       <u>stx_ctime</u>
              The file's last status change timestamp.

       <u>stx_mtime</u>
              The file's last modification timestamp.

       <u>stx_dev_major</u> and <u>stx_dev_minor</u>
              The device on which this file (inode) resides.

       <u>stx_rdev_major</u> and <u>stx_rdev_minor</u>
              The device that this file (inode) represents if the file is of block or character device type.

       <u>stx_mnt_id</u>
              The  mount  ID  of  the  mount  containing  the  file.   This  is  the  same  number  reported  by
              <b><a href="../man2/name_to_handle_at.2.html">name_to_handle_at</a></b>(2)  and  corresponds  to  the number in the first field in one of the records in
              <u><a href="file:/proc/self/mountinfo">/proc/self/mountinfo</a></u>.

       <u>stx_dio_mem_align</u>
              The alignment (in bytes) required for user memory buffers for direct I/O (<b>O_DIRECT</b>) on this  file,
              or 0 if direct I/O is not supported on this file.

              <b>STATX_DIOALIGN</b>  (<u>stx_dio_mem_align</u>  and  <u>stx_dio_offset_align</u>) is supported on block devices since
              Linux 6.1.  The support on regular files varies by filesystem; it is supported by ext4, f2fs,  and
              xfs since Linux 6.1.

       <u>stx_dio_offset_align</u>
              The  alignment  (in  bytes)  required  for  file  offsets  and  I/O segment lengths for direct I/O
              (<b>O_DIRECT</b>) on this file, or 0 if direct I/O is not supported on this  file.   This  will  only  be
              nonzero if <u>stx_dio_mem_align</u> is nonzero, and vice versa.

       For further information on the above fields, see <b><a href="../man7/inode.7.html">inode</a></b>(7).

   <b>File</b> <b>attributes</b>
       The  <u>stx_attributes</u>  field  contains a set of ORed flags that indicate additional attributes of the file.
       Note that any attribute that is not indicated as supported by <u>stx_attributes_mask</u>  has  no  usable  value
       here.  The bits in <u>stx_attributes_mask</u> correspond bit-by-bit to <u>stx_attributes</u>.

       The flags are as follows:

       <b>STATX_ATTR_COMPRESSED</b>
              The file is compressed by the filesystem and may take extra resources to access.

       <b>STATX_ATTR_IMMUTABLE</b>
              The file cannot be modified: it cannot be deleted or renamed, no hard links can be created to this
              file and no data can be written to it.  See <b><a href="../man1/chattr.1.html">chattr</a></b>(1).

       <b>STATX_ATTR_APPEND</b>
              The  file  can only be opened in append mode for writing.  Random access writing is not permitted.
              See <b><a href="../man1/chattr.1.html">chattr</a></b>(1).

       <b>STATX_ATTR_NODUMP</b>
              File is not a candidate for backup when a backup program such as <b><a href="../man8/dump.8.html">dump</a></b>(8) is run.  See <b><a href="../man1/chattr.1.html">chattr</a></b>(1).

       <b>STATX_ATTR_ENCRYPTED</b>
              A key is required for the file to be encrypted by the filesystem.

       <b>STATX_ATTR_VERITY</b> (since Linux 5.5)
              The file has fs-verity enabled.  It cannot be written to, and all reads from it will  be  verified
              against a cryptographic hash that covers the entire file (e.g., via a Merkle tree).

       <b>STATX_ATTR_DAX</b> (since Linux 5.8)
              The  file  is in the DAX (cpu direct access) state.  DAX state attempts to minimize software cache
              effects for both I/O and memory mappings of this file.  It requires a file system which  has  been
              configured to support DAX.

              DAX  generally  assumes  all  accesses  are  via  CPU load / store instructions which can minimize
              overhead for small accesses, but may adversely affect CPU utilization for large transfers.

              File I/O is done directly to/from user-space buffers and memory mapped I/O may be  performed  with
              direct memory mappings that bypass the kernel page cache.

              While  the  DAX property tends to result in data being transferred synchronously, it does not give
              the same guarantees as the <b>O_SYNC</b> flag (see <b><a href="../man2/open.2.html">open</a></b>(2)), where data and the  necessary  metadata  are
              transferred together.

              A  DAX  file  may  support being mapped with the <b>MAP_SYNC</b> flag, which enables a program to use CPU
              cache flush instructions to persist CPU  store  operations  without  an  explicit  <b><a href="../man2/fsync.2.html">fsync</a></b>(2).   See
              <b><a href="../man2/mmap.2.html">mmap</a></b>(2) for more information.

       <b>STATX_ATTR_MOUNT_ROOT</b> (since Linux 5.8)
              The file is the root of a mount.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, zero is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EACCES</b> Search  permission is denied for one of the directories in the path prefix of <u>pathname</u>.  (See also
              <b><a href="../man7/path_resolution.7.html">path_resolution</a></b>(7).)

       <b>EBADF</b>  <u>pathname</u> is relative but <u>dirfd</u> is neither <b>AT_FDCWD</b> nor a valid file descriptor.

       <b>EFAULT</b> <u>pathname</u> or <u>statxbuf</u> is NULL or points to a location  outside  the  process's  accessible  address
              space.

       <b>EINVAL</b> Invalid flag specified in <u>flags</u>.

       <b>EINVAL</b> Reserved  flag  specified in <u>mask</u>.  (Currently, there is one such flag, designated by the constant
              <b>STATX__RESERVED</b>, with the value 0x80000000U.)

       <b>ELOOP</b>  Too many symbolic links encountered while traversing the pathname.

       <b>ENAMETOOLONG</b>
              <u>pathname</u> is too long.

       <b>ENOENT</b> A component of <u>pathname</u> does not exist, or <u>pathname</u> is an empty string and <b>AT_EMPTY_PATH</b>  was  not
              specified in <u>flags</u>.

       <b>ENOMEM</b> Out of memory (i.e., kernel memory).

       <b>ENOTDIR</b>
              A component of the path prefix of <u>pathname</u> is not a directory or <u>pathname</u> is relative and <u>dirfd</u> is
              a file descriptor referring to a file other than a directory.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 4.11, glibc 2.28.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/ls.1.html">ls</a></b>(1),  <b><a href="../man1/stat.1.html">stat</a></b>(1),  <b><a href="../man2/access.2.html">access</a></b>(2),  <b><a href="../man2/chmod.2.html">chmod</a></b>(2),  <b><a href="../man2/chown.2.html">chown</a></b>(2),  <b><a href="../man2/name_to_handle_at.2.html">name_to_handle_at</a></b>(2), <b><a href="../man2/readlink.2.html">readlink</a></b>(2), <b><a href="../man2/stat.2.html">stat</a></b>(2), <b><a href="../man2/utime.2.html">utime</a></b>(2),
       <b><a href="../man5/proc.5.html">proc</a></b>(5), <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7), <b><a href="../man7/inode.7.html">inode</a></b>(7), <b><a href="../man7/symlink.7.html">symlink</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                           <u><a href="../man2/statx.2.html">statx</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>