<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>wait, waitid, waitpid, wait3, wait4, wait6 — wait for processes to change status</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       wait, waitid, waitpid, wait3, wait4, wait6 — wait for processes to change status

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;sys/wait.h&gt;</b>

       <u>pid_t</u>
       <b>wait</b>(<u>int</u> <u>*status</u>);

       <u>pid_t</u>
       <b>waitpid</b>(<u>pid_t</u> <u>wpid</u>, <u>int</u> <u>*status</u>, <u>int</u> <u>options</u>);

       <b>#include</b> <b>&lt;<a href="file:/usr/include/signal.h">signal.h</a>&gt;</b>

       <u>int</u>
       <b>waitid</b>(<u>idtype_t</u> <u>idtype</u>, <u>id_t</u> <u>id</u>, <u>siginfo_t</u> <u>*info</u>, <u>int</u> <u>options</u>);

       <b>#include</b> <b>&lt;sys/time.h&gt;</b>
       <b>#include</b> <b>&lt;sys/resource.h&gt;</b>

       <u>pid_t</u>
       <b>wait3</b>(<u>int</u> <u>*status</u>, <u>int</u> <u>options</u>, <u>struct</u> <u>rusage</u> <u>*rusage</u>);

       <u>pid_t</u>
       <b>wait4</b>(<u>pid_t</u> <u>wpid</u>, <u>int</u> <u>*status</u>, <u>int</u> <u>options</u>, <u>struct</u> <u>rusage</u> <u>*rusage</u>);

       <u>pid_t</u>
       <b>wait6</b>(<u>idtype_t</u> <u>idtype</u>, <u>id_t</u> <u>id</u>, <u>int</u> <u>*status</u>, <u>int</u> <u>options</u>, <u>struct</u> <b>__</b><u>wrusage</u> <u>*wrusage</u>, <u>siginfo_t</u> <u>*infop</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>wait</b>() function suspends execution of its calling thread until <u>status</u> information is available for a
       child process or a signal is received.  On return from a successful <b>wait</b>() call, the <u>status</u> area contains
       information about the process that reported a status change as defined below.

       The <b>wait4</b>() and <b>wait6</b>() system calls provide a more general interface for programs that need to wait  for
       specific  child  processes,  that need resource utilization statistics accumulated by child processes, or
       that require options.  The other wait functions are implemented using either <b>wait4</b>() or <b>wait6</b>().

       The <b>wait6</b>() function is the most general function in this family and its distinct features are:

       All of the desired process statuses to be waited on must be explicitly specified in <u>options</u>.  The <b>wait</b>(),
       <b>waitpid</b>(), <b>wait3</b>(), and <b>wait4</b>() functions all implicitly wait for exited and trapped processes,  but  the
       <b>waitid</b>()  and  <b>wait6</b>()  functions  require  the corresponding WEXITED and WTRAPPED flags to be explicitly
       specified.  This allows waiting for processes which have experienced other status changes without  having
       to also handle the exit status from terminated processes.

       The <b>wait6</b>() function accepts a <u>wrusage</u> argument which points to a structure defined as:

       struct __wrusage {
               struct rusage   wru_self;
               struct rusage   wru_children;
       };

       This  allows  the calling process to collect resource usage statistics from both its own child process as
       well as from its grand children.  When no resource usage statistics are needed this pointer can be NULL.

       The last argument <u>infop</u> must be either NULL or a pointer to a  <u>siginfo_t</u>  structure.   If  non-NULL,  the
       structure is filled with the same data as for a SIGCHLD signal delivered when the process changed state.

       The  set  of  child  processes  to  be queried is specified by the arguments <u>idtype</u> and <u>id</u>.  The separate
       <u>idtype</u> and <u>id</u> arguments support many other types of identifiers in addition to process  IDs  and  process
       group IDs.

             <b>•</b>   If  <u>idtype</u> is P_PID, <b>waitid</b>() and <b>wait6</b>() wait for the child process with a process ID equal to
                 (pid_t)id.

             <b>•</b>   If <u>idtype</u> is P_PGID, <b>waitid</b>() and <b>wait6</b>() wait for the child process with a  process  group  ID
                 equal to (pid_t)id.

             <b>•</b>   If <u>idtype</u> is P_ALL, <b>waitid</b>() and <b>wait6</b>() wait for any child process and the id is ignored.

             <b>•</b>   If  <u>idtype</u>  is  P_PID  or  P_PGID  and  the id is zero, <b>waitid</b>() and <b>wait6</b>() wait for any child
                 process in the same process group as the caller.

       Non-standard identifier types supported by this implementation of <b>waitid</b>() and <b>wait6</b>() are:

       P_UID     Wait for processes whose effective user ID is equal to (uid_t) <u>id</u>.

       P_GID     Wait for processes whose effective group ID is equal to (gid_t) <u>id</u>.

       P_SID     Wait for processes whose session ID is equal to <u>id</u>.  If  the  child  process  started  its  own
                 session,  its  session  ID  will  be the same as its process ID.  Otherwise the session ID of a
                 child process will match the caller's session ID.

       P_JAILID  Waits for processes within a jail whose jail identifier is equal to <u>id</u>.

       For the <b>waitpid</b>() and <b>wait4</b>() functions, the single <u>wpid</u> argument specifies the set  of  child  processes
       for which to wait.

             <b>•</b>   If <u>wpid</u> is -1, the call waits for any child process.

             <b>•</b>   If <u>wpid</u> is 0, the call waits for any child process in the process group of the caller.

             <b>•</b>   If <u>wpid</u> is greater than zero, the call waits for the process with process ID <u>wpid</u>.

             <b>•</b>   If  <u>wpid</u>  is  less  than  -1,  the call waits for any process whose process group ID equals the
                 absolute value of <u>wpid</u>.

       The <u>status</u> argument is defined below.

       The <u>options</u> argument contains the bitwise OR of any of the following options.

       WCONTINUED  Report the status of selected processes that have  continued  from  a  job  control  stop  by
                   receiving a SIGCONT signal.

       WNOHANG     Do not block when there are no processes wishing to report status.

       WUNTRACED   Report the status of selected processes which are stopped due to a SIGTTIN, SIGTTOU, SIGTSTP,
                   or SIGSTOP signal.

       WSTOPPED    An alias for WUNTRACED.

       WTRAPPED    Report the status of selected processes which are being traced via <u><a href="../man2/ptrace.2.html">ptrace</a></u>(2) and have trapped
                   or  reached  a  breakpoint.  This flag is implicitly set for the functions <b>wait</b>(), <b>waitpid</b>(),
                   <b>wait3</b>(), and <b>wait4</b>().
                   For the <b>waitid</b>() and <b>wait6</b>() functions, the flag has to be explicitly included in <u>options</u>  if
                   status reports from trapped processes are expected.

       WEXITED     Report  the  status of selected processes which have terminated.  This flag is implicitly set
                   for the functions <b>wait</b>(), <b>waitpid</b>(), <b>wait3</b>(), and <b>wait4</b>().
                   For the <b>waitid</b>() and <b>wait6</b>() functions, the flag has to be explicitly included in <u>options</u>  if
                   status reports from terminated processes are expected.

       WNOWAIT     Keep the process whose status is returned in a waitable state.  The process may be waited for
                   again after this call completes.

       For  the  <b>waitid</b>()  and  <b>wait6</b>()  functions,  at  least  one of the options WEXITED, WUNTRACED, WSTOPPED,
       WTRAPPED, or WCONTINUED must be specified.  Otherwise there will be no events for the call to report.  To
       avoid hanging indefinitely in such a case these functions return -1 with errno set to EINVAL.

       If <u>rusage</u> is non-NULL, a summary of the resources used by the terminated process and all its children  is
       returned.

       If  <u>wrusage</u> is non-NULL, separate summaries are returned for the resources used by the terminated process
       and the resources used by all its children.

       If <u>infop</u> is non-NULL, a siginfo_t structure is returned with the <u>si_signo</u> field set to  SIGCHLD  and  the
       <u>si_pid</u>  field  set  to  the  process  ID  of  the  process reporting status.  For the exited process, the
       <u>si_status</u> field of the siginfo_t structure contains the full 32 bit exit status passed to  <b>_</b><u><a href="../man2/exit.2.html">exit</a></u>(2);  the
       <u>status</u> argument of other calls only returns 8 lowest bits of the exit status.

       When  the  WNOHANG option is specified and no processes wish to report status, <b>waitid</b>() sets the <u>si_signo</u>
       and <u>si_pid</u> fields in <u>infop</u> to zero.  Checking these fields is the only way to know if a status change was
       reported.

       When the WNOHANG option is specified and no processes wish to report status, <b>wait4</b>() and <b>wait6</b>() return a
       process id of 0.

       The <b>wait</b>() call is the same as <b>wait4</b>() with a <u>wpid</u> value of -1, with an <u>options</u>  value  of  zero,  and  a
       <u>rusage</u>  value of NULL.  The <b>waitpid</b>() function is identical to <b>wait4</b>() with an <u>rusage</u> value of NULL.  The
       older <b>wait3</b>() call is the same as <b>wait4</b>() with a <u>wpid</u> value of -1.  The <b>wait4</b>() function is identical  to
       <b>wait6</b>() with the flags WEXITED and WTRAPPED set in <u>options</u> and <u>infop</u> set to NULL.

       The following macros may be used to test the current status of the process.  Exactly one of the following
       four macros will evaluate to a non-zero (true) value:

       <b>WIFCONTINUED</b>(<u>status</u>)
               True  if  the process has not terminated, and has continued after a job control stop.  This macro
               can be true only if the wait call specified the WCONTINUED option.

       <b>WIFEXITED</b>(<u>status</u>)
               True if the process terminated normally by a call to <b>_</b><u><a href="../man2/exit.2.html">exit</a></u>(2) or <u><a href="../man3/exit.3.html">exit</a></u>(3).

       <b>WIFSIGNALED</b>(<u>status</u>)
               True if the process terminated due to receipt of a signal.

       <b>WIFSTOPPED</b>(<u>status</u>)
               True if the process has not terminated, but has stopped and can be restarted.  This macro can  be
               true only if the wait call specified the WUNTRACED option or if the child process is being traced
               (see <u><a href="../man2/ptrace.2.html">ptrace</a></u>(2)).

       Depending  on  the  values of those macros, the following macros produce the remaining status information
       about the child process:

       <b>WEXITSTATUS</b>(<u>status</u>)
               If <b>WIFEXITED</b>(<u>status</u>) is true, evaluates to the  low-order  8  bits  of  the  argument  passed  to
               <b>_</b><u><a href="../man2/exit.2.html">exit</a></u>(2) or <u><a href="../man3/exit.3.html">exit</a></u>(3) by the child.

       <b>WTERMSIG</b>(<u>status</u>)
               If <b>WIFSIGNALED</b>(<u>status</u>) is true, evaluates to the number of the signal that caused the termination
               of the process.

       <b>WCOREDUMP</b>(<u>status</u>)
               If  <b>WIFSIGNALED</b>(<u>status</u>)  is  true,  evaluates  as  true  if  the  termination  of the process was
               accompanied by the creation of a core file containing an image of the process when the signal was
               received.

       <b>WSTOPSIG</b>(<u>status</u>)
               If <b>WIFSTOPPED</b>(<u>status</u>) is true, evaluates to the number of the signal that caused the  process  to
               stop.

</pre><h4><b>NOTES</b></h4><pre>
       See <u><a href="../man2/sigaction.2.html">sigaction</a></u>(2) for a list of termination signals.  A status of 0 indicates normal termination.

       If a parent process terminates without waiting for all of its child processes to terminate, the remaining
       child  processes  are  re-assigned  to  the  reaper  of the exiting process as the parent, see <u><a href="../man2/procctl.2.html">procctl</a></u>(2)
       PROC_REAP_ACQUIRE.  If no specific reaper was assigned, the process with ID 1, the init process,  becomes
       the parent of the orphaned children by default.

       If a signal is caught while any of the <b>wait</b>() calls are pending, the call may be interrupted or restarted
       when  the  signal-catching  routine  returns,  depending  on  the  options  in effect for the signal; see
       discussion of SA_RESTART in <u><a href="../man2/sigaction.2.html">sigaction</a></u>(2).

       The implementation queues one SIGCHLD signal for each child process whose status has changed;  if  <b>wait</b>()
       returns  because  the  status of a child process is available, the pending SIGCHLD signal associated with
       the process ID of the child process will be discarded.  Any other pending SIGCHLD signals remain pending.

       If SIGCHLD is blocked and <b>wait</b>() returns because the status of a child process is available, the  pending
       SIGCHLD signal will be cleared unless another status of the child process is available.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       If  <b>wait</b>()  returns due to a stopped, continued, or terminated child process, the process ID of the child
       is returned to the calling process.  Otherwise, a value of -1 is returned and <u>errno</u> is  set  to  indicate
       the error.

       If  <b>wait6</b>(),  <b>wait4</b>(),  <b>wait3</b>(),  or  <b>waitpid</b>()  returns due to a stopped, continued, or terminated child
       process, the process ID of the child is returned to the calling process.  If there are  no  children  not
       previously  awaited,  -1  is  returned  with <u>errno</u> set to ECHILD.  Otherwise, if WNOHANG is specified and
       there are no stopped, continued or exited children, 0 is returned.  If an error is detected or  a  caught
       signal aborts the call, a value of -1 is returned and <u>errno</u> is set to indicate the error.

       If  <b>waitid</b>()  returns  because one or more processes have a state change to report, 0 is returned.  If an
       error is detected, a value of -1 is returned and <u>errno</u> is set to  indicate  the  error.   If  WNOHANG  is
       specified and there are no stopped, continued or exited children, 0 is returned.  The <u>si_signo</u> and <u>si_pid</u>
       fields of <u>infop</u> must be checked against zero to determine if a process reported status.

       The <b>wait</b>() family of functions will not return a child process created with <u><a href="../man2/pdfork.2.html">pdfork</a></u>(2) unless specifically
       directed to do so by specifying its process ID.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>wait</b>() function will fail and return immediately if:

       [ECHILD]           The calling process has no existing unwaited-for child processes.

       [ECHILD]           No  status  from the terminated child process is available because the calling process
                          has asked the system to discard such status by ignoring the signal SIGCHLD or  setting
                          the flag SA_NOCLDWAIT for that signal.

       [EFAULT]           The  <u>status</u>  or  <u>rusage</u>  argument  points to an illegal address.  (May not be detected
                          before exit of a child process.)

       [EINTR]            The call was interrupted by a caught signal, or the signal did not have the SA_RESTART
                          flag set.

       [EINVAL]           An invalid value was specified for <u>options</u>, or <u>idtype</u> and <u>id</u> do not  specify  a  valid
                          set of processes.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>_</b><u><a href="../man2/exit.2.html">exit</a></u>(2), <u><a href="../man2/procctl.2.html">procctl</a></u>(2), <u><a href="../man2/ptrace.2.html">ptrace</a></u>(2), <u><a href="../man2/sigaction.2.html">sigaction</a></u>(2), <u><a href="../man3/exit.3.html">exit</a></u>(3), <u><a href="../man3/siginfo.3.html">siginfo</a></u>(3)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>wait</b>(), <b>waitpid</b>(), and <b>waitid</b>() functions are defined by POSIX; <b>wait6</b>(), <b>wait4</b>(), and <b>wait3</b>() are not
       specified by POSIX.  The <b>WCOREDUMP</b>() macro is an extension to the POSIX interface.

       The  ability  to  use  the WNOWAIT flag with <b>waitpid</b>() is an extension; POSIX only permits this flag with
       <b>waitid</b>().

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>wait</b>() function appeared in Version 1 AT&amp;T UNIX.

Debian                                           August 11, 2019                                         <u><a href="../man2/WAIT.2.html">WAIT</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>