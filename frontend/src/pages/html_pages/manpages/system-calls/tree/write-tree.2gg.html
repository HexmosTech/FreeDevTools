<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>write-tree -  (tree)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/golf">golf_601.4.41-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       write-tree -  (tree)

</pre><h4><b>PURPOSE</b></h4><pre>
       Insert a key/value pair into a tree.

</pre><h4><b>SYNTAX</b></h4><pre>
           write-tree &lt;tree&gt; key &lt;key&gt; value &lt;value&gt; \
               [ status &lt;status&gt; ] \
               [ new-cursor &lt;cursor&gt; ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       write-tree inserts string &lt;key&gt; and associated string &lt;value&gt; into &lt;tree&gt; created by <b>new-tree</b>.

       If  &lt;key&gt;  already  exists  in  &lt;tree&gt;, &lt;status&gt; (in "status" clause) will be GG_ERR_EXIST and nothing is
       inserted into &lt;tree&gt;, otherwise it is GG_OKAY.

       If "new-cursor" clause is used, then a &lt;cursor&gt; will be positioned on a newly inserted tree node. You can
       use <b>use-cursor</b> to iterate to nodes with lesser and greater key values.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Insert key "k" with value "d" into "mytree", and obtain status in "st":

           write-tree mytree key k value d status st

       The following is an example of a process-scoped tree. Such a tree keeps its data across the requests, for
       as long as the process is alive.

       In a new directory, create file treesrv.golf and copy to it:

           %% /treesrv public
               do-once
               new-tree t process-scope
               end-do-once

               // Get input parameters
               get-param op
               get-param key
               get-param data

               if-true op equal "add" // Add data to tree
                   write-tree t key (key) value data status st
                   if-true st equal GG_OKAY
                       @Added [&lt;&lt;print-out key&gt;&gt;]
                   else-if
                       @Key exists
                   end-if
               else-if op equal "delete" // Delete data and obtain the value deleted
                   delete-tree t key (key) value val status st
                   if-true st equal GG_ERR_EXIST
                       @Not found [&lt;&lt;print-out key&gt;&gt;]
                   else-if
                       // If found, then delete key and value
                       @Deleted [&lt;&lt;print-out val&gt;&gt;]
                       delete-string val
                   end-if
               else-if op equal "query" // Query tree based on key value
                   read-tree t equal (key) value val status st
                   if-true st equal GG_ERR_EXIST
                       @Not found, queried [&lt;&lt;print-out key&gt;&gt;]
                   else-if
                       @Value [&lt;&lt;print-out val&gt;&gt;]
                   end-if
               end-if
           %%

       Create new application ("pt" for "process tree"):

           sudo mgrg -i -u $(whoami) pt

       Build application:

           gg -q

       Run the tree service:

           mgrg -w 1 pt

       Try it out, add key/value pairs, query, delete, query again:

           # Add key=1 and data=d1
           $ gg -r --req="/treesrv/op=add/key=1/data=d1" --service --exec --silent-header
           Added [1]

           # Add key=2 and data=d2
           $ gg -r --req="/treesrv/op=add/key=2/data=d2" --service --exec --silent-header
           Added [2]

           # Query key=1
           $ gg -r --req="/treesrv/op=query/key=1" --service --exec --silent-header
           Value [d1]

           # Query key=2
           i$ gg -r --req="/treesrv/op=query/key=2" --service --exec --silent-header
           Value [d2]

           # Delete key=2
           $ gg -r --req="/treesrv/op=delete/key=2" --service --exec --silent-header
           Deleted [d2]

           # Query key=2
           $ gg -r --req="/treesrv/op=query/key=2" --service --exec --silent-header
           Not found, queried [2]

       See <b>read-tree</b> for more examples.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        Tree

       <b>delete-tree</b> <b>get-tree</b> <b>new-tree</b> <b>purge-tree</b> <b>read-tree</b> <b>use-cursor</b> <b>write-tree</b> See all <b>documentation</b>

$DATE                                               $VERSION                                           <u><a href="../man2gg/GOLF.2gg.html">GOLF</a></u>(2gg)
</pre>
 </div>
</div></section>
</div>
</body>
</html>