<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xml-doc -  (XML-parsing)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/golf">golf_601.4.41-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       xml-doc -  (XML-parsing)

</pre><h4><b>PURPOSE</b></h4><pre>
       Parse XML text.

</pre><h4><b>SYNTAX</b></h4><pre>
           xml-doc &lt;text&gt; to &lt;xml&gt; \
               [ status &lt;status&gt; ] [ length &lt;length&gt; ] \
               [ error-text &lt;error text&gt; ] \
                   [ error-line &lt;line&gt; ] \
                   [ error-char &lt;char&gt; ]

           xml-doc delete &lt;xml&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       xml-doc will parse XML &lt;text&gt; into &lt;xml&gt; variable, which can be used with <b>read-xml</b> to get the data.

       The  length  of  &lt;text&gt; may be specified with "length" clause in &lt;length&gt; variable, or if not, it will be
       the string length of &lt;text&gt;.

       The "status" clause specifies the return &lt;status&gt; number, which is GG_OKAY if successful or GG_ERR_XML if
       there is an error in parsing, in which case &lt;error text&gt; in "error-text" clause is the error message. You
       can also obtain the error's line number (with number &lt;line&gt; in clause  "error-line")  and  the  character
       position within that line (with number &lt;char&gt; in clause "error-char").

       The  maximum  depth  of  nested  elements  in  XML document is 32, and the maximum length of a normalized
       element name is 500 (see <b>read-xml</b> for more on normalized names).

       An XML element that is comprised of multiple anonymous sub-elements is presented as a concatenated single
       element; this is likely how most applications expect to see such data. All data is trimmed for whitespace
       on left and right.

       Golf uses libxml2 library for XML parsing.

       <b>DELETING</b>

       To delete an XML variable, use "delete" clause with the &lt;xml&gt;. This will  delete  all  memory  associated
       with it, and the variable &lt;xml&gt; itself.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Parse  the  following  XML document and display all element names and values from it. You can use them as
       they come along, or store them into <b>new-hash</b> or <b>new-tree</b> for instance for searching of  large  documents.
       This also demonstrates usage of UTF characters:

           %% /xml public
               set-string xmld unquoted =&lt;?xml version="1.0" encoding="UTF-8"?&gt;\
           &lt;countries&gt;\
               &lt;country id='1'&gt;\
                   &lt;name&gt;USA&amp;amp;America&lt;/name&gt;\
                   &lt;state id='1'&gt;Arizona\
                       &lt;city id="1"&gt;\
                           &lt;name&gt;Phoenix&lt;/name&gt;\
                           &lt;population&gt;5000000&lt;/population&gt;\
                       &lt;/city&gt;\
                       &lt;city id="2"&gt;\
                           &lt;name&gt;Tuscon&lt;/name&gt;\
                           &lt;population&gt;1000000&lt;/population&gt;\
                       &lt;/city&gt;\
                   &lt;/state&gt;\
                   &lt;state id='2'&gt;California\
                       &lt;city id="1"&gt;\
                           &lt;name&gt;Los Angeles&lt;/name&gt;\
                           &lt;population&gt;19000000&lt;/population&gt;\
                       &lt;/city&gt;\
                       &lt;city id="2"&gt;\
                           &lt;name&gt;Irvine&lt;/name&gt;\
                       &lt;/city&gt;\
                   &lt;/state&gt;\
               &lt;/country&gt;\
               &lt;country id='2'&gt;\
                   &lt;name&gt;Mexico&lt;/name&gt;\
                   &lt;state id='1'&gt;Veracruz\
                       &lt;city id="1"&gt;\
                           &lt;name&gt;Xalapa-Enriquez&lt;/name&gt;\
                           &lt;population&gt;8000000&lt;/population&gt;\
                       &lt;/city&gt;\
                       &lt;city id="2"&gt;\
                           &lt;name&gt;C\u00F3rdoba&lt;/name&gt;\
                           &lt;population&gt;220000&lt;/population&gt;\
                       &lt;/city&gt;\
                   &lt;/state&gt;\
                   &lt;state id='2'&gt;Sinaloa\
                       &lt;city id="1"&gt;\
                           &lt;name&gt;Culiac\u00E1n Rosales&lt;/name&gt;\
                           &lt;population&gt;3000000&lt;/population&gt;\
                       &lt;/city&gt;\
                   &lt;/state&gt;\
               &lt;/country&gt;\
           &lt;/countries&gt;

               xml-doc xmld to x
               start-loop
                   read-xml x key k value v status s next
                   if-true s equal GG_ERR_EXIST
                       break-loop
                   end-if
                   text-utf v
                   @Key [&lt;&lt;print-out k&gt;&gt;] Value [&lt;&lt;print-out v&gt;&gt;]
               end-loop
               xml-doc delete x
           %%

       The output would be:

           Key [countries/country/id/@] Value [1]
           Key [countries/country/name/] Value [USA&amp;America]
           Key [countries/country/state/id/@] Value [1]
           Key [countries/country/state/city/id/@] Value [1]
           Key [countries/country/state/city/name/] Value [Phoenix]
           Key [countries/country/state/city/population/] Value [5000000]
           Key [countries/country/state/city/id/@] Value [2]
           Key [countries/country/state/city/name/] Value [Tuscon]
           Key [countries/country/state/city/population/] Value [1000000]
           Key [countries/country/state/] Value [Arizona]
           Key [countries/country/state/id/@] Value [2]
           Key [countries/country/state/city/id/@] Value [1]
           Key [countries/country/state/city/name/] Value [Los Angeles]
           Key [countries/country/state/city/population/] Value [19000000]
           Key [countries/country/state/city/id/@] Value [2]
           Key [countries/country/state/city/name/] Value [Irvine]
           Key [countries/country/state/] Value [California]
           Key [countries/country/id/@] Value [2]
           Key [countries/country/name/] Value [Mexico]
           Key [countries/country/state/id/@] Value [1]
           Key [countries/country/state/city/id/@] Value [1]
           Key [countries/country/state/city/name/] Value [Xalapa-Enriquez]
           Key [countries/country/state/city/population/] Value [8000000]
           Key [countries/country/state/city/id/@] Value [2]
           Key [countries/country/state/city/name/] Value [Córdoba]
           Key [countries/country/state/city/population/] Value [220000]
           Key [countries/country/state/] Value [Veracruz]
           Key [countries/country/state/id/@] Value [2]
           Key [countries/country/state/city/id/@] Value [1]
           Key [countries/country/state/city/name/] Value [Culiacán Rosales]
           Key [countries/country/state/city/population/] Value [3000000]
           Key [countries/country/state/] Value [Sinaloa]

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        XML parsing

       <b>read-xml</b> <b>xml-doc</b> See all <b>documentation</b>

$DATE                                               $VERSION                                           <u><a href="../man2gg/GOLF.2gg.html">GOLF</a></u>(2gg)
</pre>
 </div>
</div></section>
</div>
</body>
</html>