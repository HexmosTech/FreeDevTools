<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>json-doc -  (JSON-parsing)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/golf">golf_601.4.41-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       json-doc -  (JSON-parsing)

</pre><h4><b>PURPOSE</b></h4><pre>
       Parse JSON text.

</pre><h4><b>SYNTAX</b></h4><pre>
           json-doc &lt;text&gt; to &lt;json&gt; \
               [ status &lt;status&gt; ] [ length &lt;length&gt; ] [ noencode ] [ no-enum ] \
               [ error-text &lt;error text&gt; ] \
                   [ error-position &lt;error position&gt; ] \
                   [ error-line &lt;line&gt; ] \
                   [ error-char &lt;char&gt; ]

           json-doc  delete &lt;json&gt;

</pre><h4><b>DESCRIPTION</b></h4><pre>
       json-doc will parse JSON &lt;text&gt; into &lt;json&gt; variable, which can be used with <b>read-json</b> to get the data.

       The  length  of  &lt;text&gt; may be specified with "length" clause in &lt;length&gt; variable, or if not, it will be
       the string length of &lt;text&gt;.

       The "status" clause specifies the return &lt;status&gt; number, which is GG_OKAY if successful  or  GG_ERR_JSON
       if  there  is  an  error.  The number &lt;error position&gt; in "error-position" clause is the byte position in
       &lt;text&gt; where error was found (starting with "0"), in which case &lt;error text&gt; in  "error-text"  clause  is
       the  error  message.  You  can  also obtain the error's line number (with number &lt;line&gt; in clause "error-
       line") and the character position within that line (with number &lt;char&gt; in clause "error-char").

       "noencode" clause will not encode strings, i.e. convert from JSON Unicode strings to  UTF,  nor  will  it
       perform  any  validity  checks  on  strings.  This  may be useful as a performance boost or to pass along
       strings unencoded, however in most cases it is not needed.

       "no-enum" clause will not include indexing of arrays in normalized names (with  "[..]"),  see  <b>read-json</b>.
       This  is  useful  if  you want to check the path of each data element, and not worry about counting them;
       this happens often when using JSON in a structured way to transfer arrays when data elements repeat in  a
       predictable fashion. Parsing of JSON is also faster with "no-enum".

       The  maximum depth of nested structures in JSON document (i.e. objects and arrays) is 32, and the maximum
       length of normalized leaf node name is 1024 (see <b>read-json</b> for more on normalized  names).  There  is  no
       limit on document size.

       <b>DELETING</b>

       To  delete  a  JSON variable, use "delete" clause with the &lt;json&gt;. This will delete all memory associated
       with it, and the variable &lt;json&gt; itself.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Parse the following JSON document and display all keys and values from it. You can use them as they  come
       along,  or  store them into <b>new-hash</b> or <b>new-tree</b> for instance for searching of large documents. This also
       demonstrates usage of UTF8 characters:

           // JSON to parse
           set-string jd unquoted = {"menu":\
               {"id": "file",\
               "value": 23091,\
               "active": false,\
               "popup":\
                   {"menuitem":\
                       [{"value": "New", "onclick": "CreateNewDoc with\uD834\uDD1Emusic"},\
                       {"value": "Open", "onclick": "OpenDoc() with \uD834\uDD1E\uD834\uDD1E"},\
                       {"value": "Close", "onclick": "\uD834\uDD1ECloseDoc()"}\
                       ]\
                   }\
               }\
           }

           // Parse JSON
           json-doc jd status st error-text et error-position ep to nj

           // Check parsing okay, if not display error details
           if-true st not-equal GG_OKAY
               @Error [&lt;&lt;print-out et&gt;&gt;] at [&lt;&lt;print-out ep&gt;&gt;]
               exit-handler -1
           end-if

           // Display all data elements in order from top to bottom
           start-loop
               read-json nj key k value v type t next
               if-true t equal GG_JSON_TYPE_NONE
                   break-loop
               end-if
               @Key [&lt;&lt;print-out k&gt;&gt;]
               @Value [&lt;&lt;print-out v&gt;&gt;]
               @Type [&lt;&lt;print-out t&gt;&gt;]
               @--------
           end-loop
           @

           // Delete JSON document
           json-doc delete nj

       The output would be:

           Key ["menu"."id"]
           Value [file]
           Type [0]
           --------
           Key ["menu"."value"]
           Value [23091]
           Type [1]
           --------
           Key ["menu"."active"]
           Value [false]
           Type [3]
           --------
           Key ["menu"."popup"."menuitem"[0]."value"]
           Value [New]
           Type [0]
           --------
           Key ["menu"."popup"."menuitem"[0]."onclick"]
           Value [CreateNewDoc withùÑûmusic]
           Type [0]
           --------
           Key ["menu"."popup"."menuitem"[1]."value"]
           Value [Open]
           Type [0]
           --------
           Key ["menu"."popup"."menuitem"[1]."onclick"]
           Value [OpenDoc() with ùÑûùÑû]
           Type [0]
           --------
           Key ["menu"."popup"."menuitem"[2]."value"]
           Value [Close]
           Type [0]
           --------
           Key ["menu"."popup"."menuitem"[2]."onclick"]
           Value [ùÑûCloseDoc()]
           Type [0]
           --------

       Note that if "no-enum" were used in json-doc, then all keys  with  arrays  would  not  have  "[..]",  for
       instance  the  very  last  key above would be "menu"."popup"."menuitem"."onclick", i.e. there would be no
       indexing of arrays.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
        JSON parsing

       <b>json-doc</b> <b>read-json</b> See all <b>documentation</b>

$DATE                                               $VERSION                                           <u><a href="../man2gg/GOLF.2gg.html">GOLF</a></u>(2gg)
</pre>
 </div>
</div></section>
</div>
</body>
</html>