<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>getcpu - determine CPU and NUMA node on which the calling thread is running</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       getcpu - determine CPU and NUMA node on which the calling thread is running

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#define</b> <b>_GNU_SOURCE</b>             /* See <a href="../man7/feature_test_macros.7.html">feature_test_macros</a>(7) */
       <b>#include</b> <b>&lt;<a href="file:/usr/include/sched.h">sched.h</a>&gt;</b>

       <b>int</b> <b>getcpu(unsigned</b> <b>int</b> <b>*_Nullable</b> <u>cpu</u><b>,</b> <b>unsigned</b> <b>int</b> <b>*_Nullable</b> <u>node</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>getcpu</b>()  system  call  identifies  the processor and node on which the calling thread or process is
       currently running and writes them into the integers pointed to  by  the  <u>cpu</u>  and  <u>node</u>  arguments.   The
       processor is a unique small integer identifying a CPU.  The node is a unique small identifier identifying
       a NUMA node.  When either <u>cpu</u> or <u>node</u> is NULL nothing is written to the respective pointer.

       The  information  placed  in <u>cpu</u> is guaranteed to be current only at the time of the call: unless the CPU
       affinity has been fixed using <b><a href="../man2/sched_setaffinity.2.html">sched_setaffinity</a></b>(2),  the  kernel  might  change  the  CPU  at  any  time.
       (Normally  this  does  not  happen because the scheduler tries to minimize movements between CPUs to keep
       caches hot, but it is possible.)  The caller must allow for the possibility that the information returned
       in <u>cpu</u> and <u>node</u> is no longer current by the time the call returns.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, 0 is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EFAULT</b> Arguments point outside the calling process's address space.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 2.6.19 (x86-64 and i386), glibc 2.29.

   <b>C</b> <b>library/kernel</b> <b>differences</b>
       The kernel system call has a third argument:

           <b>int</b> <b>getcpu(unsigned</b> <b>int</b> <b>*</b><u>cpu</u><b>,</b> <b>unsigned</b> <b>int</b> <b>*</b><u>node</u><b>,</b>
                      <b>struct</b> <b>getcpu_cache</b> <b>*</b><u>tcache</u><b>);</b>

       The <u>tcache</u> argument is unused since Linux 2.6.24, and (when invoking the system call directly) should  be
       specified as NULL, unless portability to Linux 2.6.23 or earlier is required.

       In  Linux  2.6.23  and  earlier,  if  the  <u>tcache</u> argument was non-NULL, then it specified a pointer to a
       caller-allocated buffer in thread-local storage  that  was  used  to  provide  a  caching  mechanism  for
       <b>getcpu</b>().   Use  of  the cache could speed <b>getcpu</b>() calls, at the cost that there was a very small chance
       that the returned information would be out of date.   The  caching  mechanism  was  considered  to  cause
       problems when migrating threads between CPUs, and so the argument is now ignored.

</pre><h4><b>NOTES</b></h4><pre>
       Linux  makes  a  best effort to make this call as fast as possible.  (On some architectures, this is done
       via an implementation in the  <b><a href="../man7/vdso.7.html">vdso</a></b>(7).)   The  intention  of  <b>getcpu</b>()  is  to  allow  programs  to  make
       optimizations with per-CPU data or for NUMA optimization.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/mbind.2.html">mbind</a></b>(2), <b><a href="../man2/sched_setaffinity.2.html">sched_setaffinity</a></b>(2), <b><a href="../man2/set_mempolicy.2.html">set_mempolicy</a></b>(2), <b><a href="../man3/sched_getcpu.3.html">sched_getcpu</a></b>(3), <b><a href="../man7/cpuset.7.html">cpuset</a></b>(7), <b><a href="../man7/vdso.7.html">vdso</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                          <u><a href="../man2/getcpu.2.html">getcpu</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>