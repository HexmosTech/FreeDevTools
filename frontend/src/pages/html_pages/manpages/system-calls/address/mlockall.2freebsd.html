<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mlockall, munlockall — lock (unlock) the address space of a process</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mlockall, munlockall — lock (unlock) the address space of a process

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/mman.h&gt;</b>

       <u>int</u>
       <b>mlockall</b>(<u>int</u> <u>flags</u>);

       <u>int</u>
       <b>munlockall</b>(<u>void</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>mlockall</b>()  system  call locks into memory the physical pages associated with the address space of a
       process until the address space is unlocked, the process exits, or execs another program image.

       The following flags affect the behavior of <b>mlockall</b>():

       MCL_CURRENT  Lock all pages currently mapped into the process's address space.

       MCL_FUTURE   Lock all pages mapped into the process's address space  in  the  future,  at  the  time  the
                    mapping  is established.  Note that this may cause future mappings to fail if those mappings
                    cause resource limits to be exceeded.

       Since physical memory is a potentially scarce resource, processes are limited in how much they  can  lock
       down.   A  single process can lock the minimum of a system-wide “wired pages” limit <u>vm.max_user_wired</u> and
       the per-process RLIMIT_MEMLOCK resource limit.

       If <u>security.bsd.unprivileged_mlock</u> is set to 0 these calls are only  available  to  the  super-user.   If
       <u>vm.old_mlock</u> is set to 1 the per-process RLIMIT_MEMLOCK resource limit will not be applied for <b>mlockall</b>()
       calls.

       The <b>munlockall</b>() call unlocks any locked memory regions in the process address space.  Any regions mapped
       after an <b>munlockall</b>() call will not be locked.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       A  return value of 0 indicates that the call succeeded and all pages in the range have either been locked
       or unlocked.  A return value of -1 indicates an error occurred and the locked status of all pages in  the
       range remains unchanged.  In this case, the global location <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>mlockall</b>() will fail if:

       [EINVAL]           The <u>flags</u> argument is zero, or includes unimplemented flags.

       [ENOMEM]           Locking  the  indicated  range would exceed either the system or per-process limit for
                          locked memory.

       [EAGAIN]           Some or all of the memory mapped into the process's address space could not be  locked
                          when the call was made.

       [EPERM]            The  calling  process does not have the appropriate privilege to perform the requested
                          operation.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/mincore.2.html">mincore</a></u>(2), <u><a href="../man2/mlock.2.html">mlock</a></u>(2), <u><a href="../man2/mmap.2.html">mmap</a></u>(2), <u><a href="../man2/munmap.2.html">munmap</a></u>(2), <u><a href="../man2/setrlimit.2.html">setrlimit</a></u>(2)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>mlockall</b>() and <b>munlockall</b>() functions are believed to conform to IEEE Std 1003.1-2001 (“POSIX.1”).

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>mlockall</b>() and <b>munlockall</b>() functions first appeared in FreeBSD 5.1.

</pre><h4><b>BUGS</b></h4><pre>
       The per-process and system-wide resource limits of locked memory apply to the amount  of  virtual  memory
       locked, not the amount of locked physical pages.  Hence two distinct locked mappings of the same physical
       page  counts  as 2 pages aginst the system limit, and also against the per-process limit if both mappings
       belong to the same physical map.

Debian                                            May 13, 2019                                       <u><a href="../man2/MLOCKALL.2.html">MLOCKALL</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>