<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>msocket - create an endpoint for communication in a multi-stack environment</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/jammy/+package/umview">umview_0.8.2-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       msocket - create an endpoint for communication in a multi-stack environment

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>          /* See NOTES */
       <b>#include</b> <b>&lt;msocket.h&gt;</b>

       <b>int</b> <b>msocket(char</b> <b>*</b> <u>path</u><b>,</b> <b>int</b> <u>domain</u><b>,</b> <b>int</b> <u>type</u><b>,</b> <b>int</b> <u>protocol</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>msocket</b>()  creates an endpoint for communication and returns a descriptor in a multi-stack environment or
       defines the default stack.

       The <u>path</u> parameter selects the stack used for the call. The path must  refer  to  a  stack  special  file
       (S_IFSTACK).  When path is NULL, the default stack gets used. It is possible to specify a default network
       stack for each domain (see SOCK_DEFAULT below).

       The  <u>domain</u>  parameter  specifies  a communication domain; this selects the protocol family which will be
       used for communication.  These families are defined in <u>&lt;sys/socket.h&gt;</u>.  The currently understood  formats
       include:
       Name                Purpose                          Man page
       <b>PF_UNIX</b>, <b>PF_LOCAL</b>   Local communication              <b><a href="../man7/unix.7.html">unix</a></b>(7)
       <b>PF_INET</b>             IPv4 Internet protocols          <b><a href="../man7/ip.7.html">ip</a></b>(7)
       <b>PF_INET6</b>            IPv6 Internet protocols          <b><a href="../man7/ipv6.7.html">ipv6</a></b>(7)
       <b>PF_IPX</b>              IPX - Novell protocols
       <b>PF_NETLINK</b>          Kernel user interface device     <b><a href="../man7/netlink.7.html">netlink</a></b>(7)
       <b>PF_X25</b>              ITU-T X.25 / ISO-8208 protocol   <b><a href="../man7/x25.7.html">x25</a></b>(7)
       <b>PF_AX25</b>             Amateur radio AX.25 protocol
       <b>PF_ATMPVC</b>           Access to raw ATM PVCs
       <b>PF_APPLETALK</b>        Appletalk                        <b><a href="../man7/ddp.7.html">ddp</a></b>(7)
       <b>PF_PACKET</b>           Low level packet interface       <b><a href="../man7/packet.7.html">packet</a></b>(7)

       The  socket has the indicated <u>type</u>, which specifies the communication semantics or <b>SOCK_DEFAULT</b> to define
       the standard stack for the specified domain(s).  Currently defined types are:

       <b>SOCK_STREAM</b>
              Provides sequenced,  reliable,  two-way,  connection-based  byte  streams.   An  out-of-band  data
              transmission mechanism may be supported.

       <b>SOCK_DGRAM</b>
              Supports datagrams (connectionless, unreliable messages of a fixed maximum length).

       <b>SOCK_SEQPACKET</b>
              Provides  a  sequenced, reliable, two-way connection-based data transmission path for datagrams of
              fixed maximum length; a consumer is required to read an entire packet with each input system call.

       <b>SOCK_RAW</b>
              Provides raw network protocol access.

       <b>SOCK_RDM</b>
              Provides a reliable datagram layer that does not guarantee ordering.

       <b>SOCK_PACKET</b>
              Obsolete and should not be used in new programs; see <b><a href="../man7/packet.7.html">packet</a></b>(7).

       Some socket types may not be implemented by all protocol families; for  example,  <b>SOCK_SEQPACKET</b>  is  not
       implemented for <b>AF_INET</b>.

       When  <u>type</u>  is  <b>SOCK_DEFAULT</b>  msocket  does not define any communication endpoint, instead it defines the
       stack that will be used for the following msocket calls with NULL path, or  for  the  following  obsolete
       <b><a href="../man2/socket.2.html">socket</a></b>(2)  calls.  Default stacks get inherited through process creation <b><a href="../man2/fork.2.html">fork</a></b>(2) and execution <b><a href="../man2/execve.2.html">execve</a></b>(2).
       When <u>type</u> is <b>SOCK_DEFAULT</b> and <u>domain</u> is <b>PF_UNSPEC</b> the named stack becames the default stack for  all  the
       protocols it supports.

       The <u>protocol</u> specifies a particular protocol to be used with the socket.  Normally only a single protocol
       exists  to support a particular socket type within a given protocol family, in which case <u>protocol</u> can be
       specified as 0.  However, it is possible that many protocols  may  exist,  in  which  case  a  particular
       protocol  must be specified in this manner.  The protocol number to use is specific to the “communication
       domain” in which communication is to take place; see <b><a href="../man5/protocols.5.html">protocols</a></b>(5).  See  <b><a href="../man3/getprotoent.3.html">getprotoent</a></b>(3)  on  how  to  map
       protocol name strings to protocol numbers.

       Sockets  of type <b>SOCK_STREAM</b> are full-duplex byte streams, similar to pipes.  They do not preserve record
       boundaries.  A stream socket must be in a <u>connected</u> state before any data may be sent or received on  it.
       A  connection  to  another  socket  is  created  with  a  <b><a href="../man2/connect.2.html">connect</a></b>(2)  call.   Once connected, data may be
       transferred using <b><a href="../man2/read.2.html">read</a></b>(2) and <b><a href="../man2/write.2.html">write</a></b>(2) calls or some variant of the <b><a href="../man2/send.2.html">send</a></b>(2) and <b><a href="../man2/recv.2.html">recv</a></b>(2)  calls.   When  a
       session  has  been  completed  a  <b><a href="../man2/close.2.html">close</a></b>(2) may be performed.  Out-of-band data may also be transmitted as
       described in <b><a href="../man2/send.2.html">send</a></b>(2) and received as described in <b><a href="../man2/recv.2.html">recv</a></b>(2).

       The communications protocols which implement a <b>SOCK_STREAM</b> ensure that data is not  lost  or  duplicated.
       If a piece of data for which the peer protocol has buffer space cannot be successfully transmitted within
       a  reasonable length of time, then the connection is considered to be dead.  When <b>SO_KEEPALIVE</b> is enabled
       on the socket the protocol checks in a protocol-specific manner if the  other  end  is  still  alive.   A
       <b>SIGPIPE</b>  signal is raised if a process sends or receives on a broken stream; this causes naive processes,
       which do not handle the signal, to  exit.   <b>SOCK_SEQPACKET</b>  sockets  employ  the  same  system  calls  as
       <b>SOCK_STREAM</b>  sockets.   The  only  difference  is  that <b><a href="../man2/read.2.html">read</a></b>(2) calls will return only the amount of data
       requested, and any data remaining in the arriving packet will be discarded.  Also all message  boundaries
       in incoming datagrams are preserved.

       <b>SOCK_DGRAM</b>  and  <b>SOCK_RAW</b>  sockets allow sending of datagrams to correspondents named in <b><a href="../man2/sendto.2.html">sendto</a></b>(2) calls.
       Datagrams are generally received with <b><a href="../man2/recvfrom.2.html">recvfrom</a></b>(2), which returns the next datagram along with the address
       of its sender.

       <b>SOCK_PACKET</b> is an obsolete socket type to receive raw packets  directly  from  the  device  driver.   Use
       <b><a href="../man7/packet.7.html">packet</a></b>(7) instead.

       An  <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2)  <b>F_SETOWN</b>  operation  can  be used to specify a process or process group to receive a <b>SIGURG</b>
       signal when the out-of-band  data  arrives  or  <b>SIGPIPE</b>  signal  when  a  <b>SOCK_STREAM</b>  connection  breaks
       unexpectedly.   This operation may also be used to set the process or process group that receives the I/O
       and asynchronous notification of I/O events via <b>SIGIO</b>.  Using <b>F_SETOWN</b> is equivalent to an <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2)  call
       with the <b>FIOSETOWN</b> or <b>SIOCSPGRP</b> argument.

       When  the  network  signals an error condition to the protocol module (e.g., using a ICMP message for IP)
       the pending error flag is set for the socket.  The next operation on this socket will  return  the  error
       code  of  the  pending  error.   For  some protocols it is possible to enable a per-socket error queue to
       retrieve detailed information about the error; see <b>IP_RECVERR</b> in <b><a href="../man7/ip.7.html">ip</a></b>(7).

       The operation of  sockets  is  controlled  by  socket  level  <u>options</u>.   These  options  are  defined  in
       <u>&lt;sys/socket.h&gt;</u>.   The  functions  <b><a href="../man2/setsockopt.2.html">setsockopt</a></b>(2)  and  <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2)  are  used  to  set  and get options,
       respectively.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, a file descriptor for the new socket is returned except when <u>type</u> is <b>SOCK_DEFAULT.</b>   In  this
       latter case 0 is returned on success.  On error, -1 is returned, and <u>errno</u> is set appropriately.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EACCES</b> Permission to create a socket of the specified type and/or protocol is denied.

       <b>EAFNOSUPPORT</b>
              The implementation does not support the specified address family.

       <b>EINVAL</b> Unknown protocol, or protocol family not available.

       <b>EMFILE</b> Process file table overflow.

       <b>ENFILE</b> The system limit on the total number of open files has been reached.

       <b>ENOBUFS</b> or <b>ENOMEM</b>
              Insufficient  memory  is  available.   The socket cannot be created until sufficient resources are
              freed.

       <b>EPROTONOSUPPORT</b>
              The protocol type or the specified protocol is not supported within this domain.

       Other errors may be generated by the underlying protocol modules.

</pre><h4><b>CONFORMING</b> <b>TO</b></h4><pre>
       This is a system call defined for View-OS. It extends <b>socket</b>(), appeared  in  4.2BSD  and  conforming  to
       4.4BSD,  POSIX.1-2001.   System  providing  <b>msocket</b>()  do  provide  also  a  <b>socket</b>()  call  for backward
       compatibility.  In fact: <b>socket(domain,type,protocol)</b> is equivalent to <b>msocket(NULL,domain,type,protocol)</b>

       In this way it is generally portable to/from non-BSD systems supporting clones of the  BSD  socket  layer
       (including System V variants).

</pre><h4><b>NOTES</b></h4><pre>
       POSIX.1-2001  does  not  require  the inclusion of <u>&lt;sys/types.h&gt;</u>, and this header file is not required on
       Linux.   However,  some  historical  (BSD)  implementations  required  this  header  file,  and  portable
       applications are probably wise to include it.

       The manifest constants used under 4.x BSD for protocol families are <b>PF_UNIX</b>, <b>PF_INET</b>, etc., while <b>AF_UNIX</b>
       etc.  are  used  for  address families.  However, already the BSD man page promises: "The protocol family
       generally is the same as the address family", and subsequent standards use AF_* everywhere.

       The header file <u>&lt;sys/types.h&gt;</u> is only required for libc4 or earlier.   Some  packages,  like  util-linux,
       claim portability to all Linux versions and libraries.  They certainly need this header file.

</pre><h4><b>BUGS</b></h4><pre>
       <b>SOCK_UUCP</b> is not implemented yet.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/socket.2.html">socket</a></b>(2),  <b><a href="../man2/accept.2.html">accept</a></b>(2),  <b><a href="../man2/bind.2.html">bind</a></b>(2),  <b><a href="../man2/connect.2.html">connect</a></b>(2),  <b><a href="../man2/fcntl.2.html">fcntl</a></b>(2),  <b><a href="../man2/getpeername.2.html">getpeername</a></b>(2),  <b><a href="../man2/getsockname.2.html">getsockname</a></b>(2), <b><a href="../man2/getsockopt.2.html">getsockopt</a></b>(2),
       <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2),  <b><a href="../man2/listen.2.html">listen</a></b>(2),  <b><a href="../man2/read.2.html">read</a></b>(2),  <b><a href="../man2/recv.2.html">recv</a></b>(2),  <b><a href="../man2/select.2.html">select</a></b>(2),  <b><a href="../man2/send.2.html">send</a></b>(2),  <b><a href="../man2/shutdown.2.html">shutdown</a></b>(2),  <b><a href="../man2/socketpair.2.html">socketpair</a></b>(2),   <b><a href="../man2/write.2.html">write</a></b>(2),
       <b><a href="../man3/getprotoent.3.html">getprotoent</a></b>(3), <b><a href="../man7/ip.7.html">ip</a></b>(7), <b><a href="../man7/socket.7.html">socket</a></b>(7), <b><a href="../man7/tcp.7.html">tcp</a></b>(7), <b><a href="../man7/udp.7.html">udp</a></b>(7), <b><a href="../man7/unix.7.html">unix</a></b>(7)

</pre><h4><b>COLOPHON</b></h4><pre>
       This  page  has  been modified from <b><a href="../man2/socket.2.html">socket</a></b>(2) page of release 2.79 of the Linux. In fact <b><a href="../man2/msocket.2.html">msocket</a></b>(2) is an
       extension of this call.  <u>man-pages</u>  project.   A  description  of  the  project,  and  information  about
       reporting bugs, can be found at <a href="http://www.kernel.org/doc/man-pages/">http://www.kernel.org/doc/man-pages/</a>.

       View-OS  is  a  project  of the Computer Science Department, University of Bologna. Project Leader: Renzo
       Davoli.
       &lt;<a href="http://www.sourceforge.net/projects/view-os">http://www.sourceforge.net/projects/view-os</a>&gt;

       Howto's and further information can be found on the project wiki
       &lt;wiki.virtualsquare.org&gt;.

View-OS                                            2008-04-23                                   <u><a href="../man2VIEWOS/MSOCKET.2VIEWOS.html">MSOCKET</a></u>(2VIEWOS)
</pre>
 </div>
</div></section>
</div>
</body>
</html>