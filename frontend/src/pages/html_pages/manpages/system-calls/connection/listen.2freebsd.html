<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>listen — listen for connections on a socket</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       listen — listen for connections on a socket

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/socket.h&gt;</b>

       <u>int</u>
       <b>listen</b>(<u>int</u> <u>s</u>, <u>int</u> <u>backlog</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       To  accept  connections,  a  socket  is  first  created  with <u><a href="../man2/socket.2.html">socket</a></u>(2), a willingness to accept incoming
       connections and a queue limit for  incoming  connections  are  specified  with  <b>listen</b>(),  and  then  the
       connections  are  accepted  with  <u><a href="../man2/accept.2.html">accept</a></u>(2).   The  <b>listen</b>()  system call applies only to sockets of type
       SOCK_STREAM or SOCK_SEQPACKET.

       The <u>backlog</u> argument defines the maximum length the queue of pending connections may grow to.   The  real
       maximum  queue  length  will  be  1.5  times  more  than  the value specified in the <u>backlog</u> argument.  A
       subsequent <b>listen</b>() system call on the listening socket allows the caller to  change  the  maximum  queue
       length  using a new <u>backlog</u> argument.  If a connection request arrives with the queue full the client may
       receive an error with an indication of ECONNREFUSED, or, in the case  of  TCP,  the  connection  will  be
       silently dropped.

       Current queue lengths of listening sockets can be queried using <u><a href="../man1/netstat.1.html">netstat</a></u>(1) command.

       Note  that  before FreeBSD 4.5 and the introduction of the syncache, the <u>backlog</u> argument also determined
       the length of the incomplete connection queue, which held TCP sockets in the process of completing  TCP's
       3-way handshake.  These incomplete connections are now held entirely in the syncache, which is unaffected
       by  queue  lengths.   Inflated  <u>backlog</u>  values  to  help  handle denial of service attacks are no longer
       necessary.

       The <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3) MIB variable <u>kern.ipc.soacceptqueue</u> specifies a hard limit on <u>backlog</u>; if a  value  greater
       than   <u>kern.ipc.soacceptqueue</u>   or   less   than  zero  is  specified,  <u>backlog</u>  is  silently  forced  to
       <u>kern.ipc.soacceptqueue</u>.

</pre><h4><b>INTERACTION</b> <b>WITH</b> <b>ACCEPT</b> <b>FILTERS</b></h4><pre>
       When accept filtering is used on a socket, a second  queue  will  be  used  to  hold  sockets  that  have
       connected,  but  have not yet met their accept filtering criteria.  Once the criteria has been met, these
       sockets will be moved over into the completed connection queue to  be  <u><a href="../man2/accept.2.html">accept</a></u>(2)ed.   If  this  secondary
       queue  is  full  and a new connection comes in, the oldest socket which has not yet met its accept filter
       criteria will be terminated.

       This secondary queue, like the primary listen queue, is sized according to the <u>backlog</u> argument.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       The <b>listen</b>() function returns the value 0 if successful; otherwise the  value  -1  is  returned  and  the
       global variable <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>listen</b>() system call will fail if:

       [EBADF]            The argument <u>s</u> is not a valid descriptor.

       [EDESTADDRREQ]     The  socket  is  not  bound  to  a  local  address,  and the protocol does not support
                          listening on an unbound socket.

       [EINVAL]           The socket is already connected, or in the process of being connected.

       [ENOTSOCK]         The argument <u>s</u> is not a socket.

       [EOPNOTSUPP]       The socket is not of a type that supports the operation <b>listen</b>().

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/netstat.1.html">netstat</a></u>(1), <u><a href="../man2/accept.2.html">accept</a></u>(2), <u><a href="../man2/connect.2.html">connect</a></u>(2), <u><a href="../man2/socket.2.html">socket</a></u>(2), <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3), <u><a href="../man8/sysctl.8.html">sysctl</a></u>(8), <u><a href="../man9/accept_filter.9.html">accept_filter</a></u>(9)

</pre><h4><b>HISTORY</b></h4><pre>
       The <b>listen</b>() system call appeared in 4.2BSD.  The ability to configure the maximum <u>backlog</u>  at  run-time,
       and to use a negative <u>backlog</u> to request the maximum allowable value, was introduced in FreeBSD 2.2.  The
       <u>kern.ipc.somaxconn</u>  <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3)  has  been  replaced with <u>kern.ipc.soacceptqueue</u> in FreeBSD 10.0 to prevent
       confusion about its actual functionality.  The original <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3) <u>kern.ipc.somaxconn</u> is  still  available
       but hidden from a <u><a href="../man3/sysctl.3.html">sysctl</a></u>(3) -a output so that existing applications and scripts continue to work.

Debian                                           August 18, 2016                                       <u><a href="../man2/LISTEN.2.html">LISTEN</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>