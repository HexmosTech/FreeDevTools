<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mq_open — open a message queue (REALTIME)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mq_open — open a message queue (REALTIME)

</pre><h4><b>LIBRARY</b></h4><pre>
       POSIX Real-time Library (librt, -lrt)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/mqueue.h">mqueue.h</a>&gt;</b>

       <u>mqd_t</u>
       <b>mq_open</b>(<u>const</u> <u>char</u> <u>*name</u>, <u>int</u> <u>oflag</u>, <u>...</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>mq_open</b>() system call establishes the connection between a process and a message queue with a message
       queue  descriptor.   It creates an open message queue description that refers to the message queue, and a
       message queue descriptor that  refers  to  that  open  message  queue  description.   The  message  queue
       descriptor  is  used  by  other  functions to refer to that message queue.  The <u>name</u> argument points to a
       string naming a message queue.  The <u>name</u>  argument  should  conform  to  the  construction  rules  for  a
       pathname.  The <u>name</u> should begin with a slash character.  Processes calling <b>mq_open</b>() with the same value
       of  <u>name</u> refers to the same message queue object, as long as that name has not been removed.  If the <u>name</u>
       argument is not the name of an existing message queue and creation is not requested, <b>mq_open</b>() will  fail
       and return an error.

       The  <u>oflag</u>  argument requests the desired receive and/or send access to the message queue.  The requested
       access permission to receive messages or send messages would be granted if the calling process  would  be
       granted read or write access, respectively, to an equivalently protected file.

       The  value  of  <u>oflag</u> is the bitwise-inclusive OR of values from the following list.  Applications should
       specify exactly one of the first three values (access modes) below in the value of <u>oflag</u>:

       O_RDONLY    Open the message queue for receiving messages.  The process  can  use  the  returned  message
                   queue  descriptor with <b>mq_receive</b>(), but not <b>mq_send</b>().  A message queue may be open multiple
                   times in the same or different processes for receiving messages.

       O_WRONLY    Open the queue for sending  messages.   The  process  can  use  the  returned  message  queue
                   descriptor  with  <b>mq_send</b>() but not <b>mq_receive</b>().  A message queue may be open multiple times
                   in the same or different processes for sending messages.

       O_RDWR      Open the queue for both receiving and sending messages.  The  process  can  use  any  of  the
                   functions  allowed  for O_RDONLY and O_WRONLY.  A message queue may be open multiple times in
                   the same or different processes for sending messages.

       Any combination of the remaining flags may be specified in the value of <u>oflag</u>:

       O_CREAT     Create a message queue.  It requires two additional arguments: <u>mode</u>, which is of type <u>mode_t</u>,
                   and <u>attr</u>, which is a pointer to an <u>mq_attr</u> structure.  If the pathname <u>name</u> has already  been
                   used  to  create  a  message queue that still exists, then this flag has no effect, except as
                   noted under O_EXCL.  Otherwise, a message queue will be created without any messages  in  it.
                   The user ID of the message queue will be set to the effective user ID of the process, and the
                   group  ID  of  the  message  queue will be set to the effective group ID of the process.  The
                   permission bits of the message queue will be set to the value of the  <u>mode</u>  argument,  except
                   those  set  in  the file mode creation mask of the process.  When bits in <u>mode</u> other than the
                   file permission bits are specified, the effect is unspecified.  If <u>attr</u> is NULL, the  message
                   queue  is  created  with implementation-defined default message queue attributes.  If attr is
                   non-NULL and the calling process has the appropriate privilege on  name,  the  message  queue
                   <u>mq_maxmsg</u> and <u>mq_msgsize</u> attributes will be set to the values of the corresponding members in
                   the <u>mq_attr</u> structure referred to by <u>attr</u>.  If <u>attr</u> is non-NULL, but the calling process does
                   not  have  the  appropriate privilege on name, the <b>mq_open</b>() function will fail and return an
                   error without creating the message queue.

       O_EXCL      If O_EXCL and O_CREAT are set, <b>mq_open</b>() will fail if the message queue name exists.

       O_NONBLOCK  Determines whether an <b>mq_send</b>() or <b>mq_receive</b>() waits for resources or messages that are  not
                   currently  available, or fails with <u>errno</u> set to EAGAIN; see <u><a href="../man2/mq_send.2.html">mq_send</a></u>(2) and <u><a href="../man2/mq_receive.2.html">mq_receive</a></u>(2) for
                   details.

       The <b>mq_open</b>() system call does not add or remove messages from the queue.

</pre><h4><b>NOTES</b></h4><pre>
       FreeBSD implements message queue based on file descriptor.  The descriptor is inherited  by  child  after
       <u><a href="../man2/fork.2.html">fork</a></u>(2).   The  descriptor  is  closed  in a new image after <u><a href="../man3/exec.3.html">exec</a></u>(3).  The <u><a href="../man2/select.2.html">select</a></u>(2) and <u><a href="../man2/kevent.2.html">kevent</a></u>(2) system
       calls are supported for message queue descriptor.

       Please see the <u><a href="../man5/mqueuefs.5.html">mqueuefs</a></u>(5) man page for instructions on loading the module or compiling the service  into
       the kernel.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Upon  successful  completion,  the  function  returns a message queue descriptor; otherwise, the function
       returns (<u>mqd_t</u>)-1 and sets the global variable <u>errno</u> to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>mq_open</b>() system call will fail if:

       [EACCES]           The message queue exists and the permissions specified by <u>oflag</u>  are  denied,  or  the
                          message queue does not exist and permission to create the message queue is denied.

       [EEXIST]           O_CREAT and O_EXCL are set and the named message queue already exists.

       [EINTR]            The <b>mq_open</b>() function was interrupted by a signal.

       [EINVAL]           The <b>mq_open</b>() function is not supported for the given name.

       [EINVAL]           O_CREAT was specified in <u>oflag</u>, the value of <u>attr</u> is not NULL, and either <u>mq_maxmsg</u> or
                          <u>mq_msgsize</u> was less than or equal to zero.

       [EMFILE]           Too  many  message  queue descriptors or file descriptors are currently in use by this
                          process.

       [ENAMETOOLONG]     The length of the <u>name</u> argument exceeds {PATH_MAX} or a pathname component  is  longer
                          than {NAME_MAX}.

       [ENFILE]           Too many message queues are currently open in the system.

       [ENOENT]           O_CREAT is not set and the named message queue does not exist.

       [ENOSPC]           There is insufficient space for the creation of the new message queue.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/mq_close.2.html">mq_close</a></u>(2),     <u><a href="../man2/mq_getattr.2.html">mq_getattr</a></u>(2),    <u><a href="../man2/mq_receive.2.html">mq_receive</a></u>(2),    <u><a href="../man2/mq_send.2.html">mq_send</a></u>(2),    <u><a href="../man2/mq_setattr.2.html">mq_setattr</a></u>(2),    <u><a href="../man3/mq_timedreceive.3.html">mq_timedreceive</a></u>(3),
       <u><a href="../man3/mq_timedsend.3.html">mq_timedsend</a></u>(3), <u><a href="../man3/mq_unlink.3.html">mq_unlink</a></u>(3), <u><a href="../man5/mqueuefs.5.html">mqueuefs</a></u>(5)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>mq_open</b>() system call conforms to IEEE Std 1003.1-2004 (“POSIX.1”).

</pre><h4><b>HISTORY</b></h4><pre>
       Support for POSIX message queues first appeared in FreeBSD 7.0.

</pre><h4><b>BUGS</b></h4><pre>
       This implementation places strict requirements on the value of <u>name</u>: it must begin with a slash (‘/’) and
       contain no other slash characters.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2004 Edition,
       Standard for Information Technology -- Portable Operating System Interface (POSIX), The Open  Group  Base
       Specifications Issue 6, Copyright (C) 2001-2004 by the Institute of Electrical and Electronics Engineers,
       Inc  and  The Open Group.  In the event of any discrepancy between this version and the original IEEE and
       The Open Group Standard, the original IEEE and The Open Group Standard  is  the  referee  document.   The
       original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a>.

Debian                                         September 15, 2014                                     <u><a href="../man2/MQ_OPEN.2.html">MQ_OPEN</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>