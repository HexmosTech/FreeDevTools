<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>msgget - get a System V message queue identifier</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       msgget - get a System V message queue identifier

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/msg.h&gt;</b>

       <b>int</b> <b>msgget(key_t</b> <u>key</u><b>,</b> <b>int</b> <u>msgflg</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>msgget</b>()  system call returns the System V message queue identifier associated with the value of the
       <u>key</u> argument.  It may be used either to obtain the identifier of a previously created message queue (when
       <u>msgflg</u> is zero and <u>key</u> does not have the value <b>IPC_PRIVATE</b>), or to create a new set.

       A new message queue is created if <u>key</u> has the value <b>IPC_PRIVATE</b> or  <u>key</u>  isn't  <b>IPC_PRIVATE</b>,  no  message
       queue with the given key <u>key</u> exists, and <b>IPC_CREAT</b> is specified in <u>msgflg</u>.

       If <u>msgflg</u> specifies both <b>IPC_CREAT</b> and <b>IPC_EXCL</b> and a message queue already exists for <u>key</u>, then <b>msgget</b>()
       fails with <u>errno</u> set to <b>EEXIST</b>.  (This is analogous to the effect of the combination <b>O_CREAT</b> <b>|</b> <b>O_EXCL</b> for
       <b><a href="../man2/open.2.html">open</a></b>(2).)

       Upon  creation,  the  least significant bits of the argument <u>msgflg</u> define the permissions of the message
       queue.  These permission bits have the same format and semantics as the  permissions  specified  for  the
       <u>mode</u> argument of <b><a href="../man2/open.2.html">open</a></b>(2).  (The execute permissions are not used.)

       If  a  new  message  queue  is  created,  then  its associated data structure <u>msqid_ds</u> (see <b><a href="../man2/msgctl.2.html">msgctl</a></b>(2)) is
       initialized as follows:

       •  <u>msg_perm.cuid</u> and <u>msg_perm.uid</u> are set to the effective user ID of the calling process.

       •  <u>msg_perm.cgid</u> and <u>msg_perm.gid</u> are set to the effective group ID of the calling process.

       •  The least significant 9 bits of <u>msg_perm.mode</u> are set to the least significant 9 bits of <u>msgflg</u>.

       •  <u>msg_qnum</u>, <u>msg_lspid</u>, <u>msg_lrpid</u>, <u>msg_stime</u>, and <u>msg_rtime</u> are set to 0.

       •  <u>msg_ctime</u> is set to the current time.

       •  <u>msg_qbytes</u> is set to the system limit <b>MSGMNB</b>.

       If the message queue already exists the permissions are verified, and a check is made to  see  if  it  is
       marked for destruction.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  success,  <b>msgget</b>()  returns  the message queue identifier (a nonnegative integer).  On failure, -1 is
       returned, and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EACCES</b> A message queue exists for <u>key</u>, but the calling process does not have  permission  to  access  the
              queue,  and  does not have the <b>CAP_IPC_OWNER</b> capability in the user namespace that governs its IPC
              namespace.

       <b>EEXIST</b> <b>IPC_CREAT</b> and <b>IPC_EXCL</b> were specified in <u>msgflg</u>, but a message queue already exists for <u>key</u>.

       <b>ENOENT</b> No message queue exists for <u>key</u> and <u>msgflg</u> did not specify <b>IPC_CREAT</b>.

       <b>ENOMEM</b> A message queue has to be created but the system does not have enough  memory  for  the  new  data
              structure.

       <b>ENOSPC</b> A  message  queue  has to be created but the system limit for the maximum number of message queues
              (<b>MSGMNI</b>) would be exceeded.

</pre><h4><b>STANDARDS</b></h4><pre>
       POSIX.1-2008.

</pre><h4><b>HISTORY</b></h4><pre>
       POSIX.1-2001, SVr4.

   <b>Linux</b>
       Until Linux 2.3.20, Linux would return <b>EIDRM</b> for a <b>msgget</b>() on a message queue scheduled for deletion.

</pre><h4><b>NOTES</b></h4><pre>
       <b>IPC_PRIVATE</b> isn't a flag field but a <u>key_t</u> type.  If this special value is used for <u>key</u>, the system  call
       ignores  everything  but  the  least  significant  9  bits  of <u>msgflg</u> and creates a new message queue (on
       success).

       The following is a system limit on message queue resources affecting a <b>msgget</b>() call:

       <b>MSGMNI</b> System-wide limit on the number of message queues.  Before Linux 3.19, the default value for  this
              limit  was  calculated  using  a  formula based on available system memory.  Since Linux 3.19, the
              default  value  is  32,000.    On   Linux,   this   limit   can   be   read   and   modified   via
              <u><a href="file:/proc/sys/kernel/msgmni">/proc/sys/kernel/msgmni</a></u>.

</pre><h4><b>BUGS</b></h4><pre>
       The name choice <b>IPC_PRIVATE</b> was perhaps unfortunate, <b>IPC_NEW</b> would more clearly show its function.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/msgctl.2.html">msgctl</a></b>(2), <b><a href="../man2/msgrcv.2.html">msgrcv</a></b>(2), <b><a href="../man2/msgsnd.2.html">msgsnd</a></b>(2), <b><a href="../man3/ftok.3.html">ftok</a></b>(3), <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7), <b><a href="../man7/mq_overview.7.html">mq_overview</a></b>(7), <b><a href="../man7/sysvipc.7.html">sysvipc</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                          <u><a href="../man2/msgget.2.html">msgget</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>