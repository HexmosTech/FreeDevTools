<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>msgrcv — receive a message from a message queue</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       msgrcv — receive a message from a message queue

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C Library (libc, -lc)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/types.h&gt;</b>
       <b>#include</b> <b>&lt;sys/ipc.h&gt;</b>
       <b>#include</b> <b>&lt;sys/msg.h&gt;</b>

       <u>ssize_t</u>
       <b>msgrcv</b>(<u>int</u> <u>msqid</u>, <u>void</u> <u>*msgp</u>, <u>size_t</u> <u>msgsz</u>, <u>long</u> <u>msgtyp</u>, <u>int</u> <u>msgflg</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  <b>msgrcv</b>()  function  receives a message from the message queue specified in <u>msqid</u>, and places it into
       the structure pointed to by <u>msgp</u>.  This structure should consist of the following members:

           long mtype;    /* message type */
           char mtext[1]; /* body of message */

       <u>mtype</u> is an integer greater than 0 that can be used for selecting messages, <u>mtext</u> is an array  of  bytes,
       with a size up to that of the system limit (MSGMAX).

       The value of <u>msgtyp</u> has one of the following meanings:

       <b>•</b>   The <u>msgtyp</u> argument is greater than 0.  The first message of type <u>msgtyp</u> will be received.

       <b>•</b>   The <u>msgtyp</u> argument is equal to 0.  The first message on the queue will be received.

       <b>•</b>   The  <u>msgtyp</u>  argument is less than 0.  The first message of the lowest message type that is less than
           or equal to the absolute value of <u>msgtyp</u> will be received.

       The <u>msgsz</u> argument specifies the maximum length of the requested message.  If the received message has  a
       length  greater  than  <u>msgsz</u>  it  will  be  silently  truncated if the MSG_NOERROR flag is set in <u>msgflg</u>,
       otherwise an error will be returned.

       If no matching message is present on the message queue specified  by  <u>msqid</u>,  the  behavior  of  <b>msgrcv</b>()
       depends  on  whether  the  IPC_NOWAIT  flag is set in <u>msgflg</u> or not.  If IPC_NOWAIT is set, <b>msgrcv</b>() will
       immediately return a value of -1, and set <u>errno</u> to ENOMSG.  If IPC_NOWAIT is not set, the calling process
       will be blocked until:

       <b>•</b>   A message of the requested type becomes available on the message queue.

       <b>•</b>   The message queue is removed, in which case -1 will be returned, and <u>errno</u> set to EINVAL.

       <b>•</b>   A signal is received and caught.  -1 is returned, and <u>errno</u> set to EINTR.

       If a message is successfully received, the data structure associated with <u>msqid</u> is updated as follows:

       <b>•</b>   <u>msg_cbytes</u> is decremented by the size of the message.

       <b>•</b>   <u>msg_lrpid</u> is set to the pid of the caller.

       <b>•</b>   <u>msg_lrtime</u> is set to the current time.

       <b>•</b>   <u>msg_qnum</u> is decremented by 1.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Upon successful completion, <b>msgrcv</b>() returns the number of bytes received into the  <u>mtext</u>  field  of  the
       structure pointed to by <u>msgp</u>.  Otherwise, -1 is returned, and <u>errno</u> set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>msgrcv</b>() function will fail if:

       [EINVAL]           The <u>msqid</u> argument is not a valid message queue identifier.

                          The  message  queue  was  removed  while  <b>msgrcv</b>()  was  waiting  for a message of the
                          requested type to become available on it.

                          The <u>msgsz</u> argument is less than 0.

       [E2BIG]            A matching message was  received,  but  its  size  was  greater  than  <u>msgsz</u>  and  the
                          MSG_NOERROR flag was not set in <u>msgflg</u>.

       [EACCES]           The calling process does not have read access to the message queue.

       [EFAULT]           The <u>msgp</u> argument points to an invalid address.

       [EINTR]            The system call was interrupted by the delivery of a signal.

       [ENOMSG]           There  is  no  message  of  the  requested  type  available  on the message queue, and
                          IPC_NOWAIT is set in <u>msgflg</u>.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/msgctl.2.html">msgctl</a></u>(2), <u><a href="../man2/msgget.2.html">msgget</a></u>(2), <u><a href="../man2/msgsnd.2.html">msgsnd</a></u>(2)

</pre><h4><b>HISTORY</b></h4><pre>
       Message queues appeared in the first release of AT&amp;T System V UNIX.

Debian                                            July 28, 2016                                        <u><a href="../man2/MSGRCV.2.html">MSGRCV</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>