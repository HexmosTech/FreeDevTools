<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mq_send, mq_timedsend — send a message to message queue (REALTIME)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mq_send, mq_timedsend — send a message to message queue (REALTIME)

</pre><h4><b>LIBRARY</b></h4><pre>
       POSIX Real-time Library (librt, -lrt)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/mqueue.h">mqueue.h</a>&gt;</b>

       <u>int</u>
       <b>mq_send</b>(<u>mqd_t</u> <u>mqdes</u>, <u>const</u> <u>char</u> <u>*msg_ptr</u>, <u>size_t</u> <u>msg_len</u>, <u>unsigned</u> <u>msg_prio</u>);

       <u>int</u>
       <b>mq_timedsend</b>(<u>mqd_t</u> <u>mqdes</u>,         <u>const</u> <u>char</u> <u>*msg_ptr</u>,         <u>size_t</u> <u>msg_len</u>,         <u>unsigned</u> <u>msg_prio</u>,
           <u>const</u> <u>struct</u> <u>timespec</u> <u>*abs_timeout</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>mq_send</b>() system call adds the message pointed to by  the  argument  <u>msg_ptr</u>  to  the  message  queue
       specified  by  <u>mqdes</u>.   The <u>msg_len</u> argument specifies the length of the message, in bytes, pointed to by
       <u>msg_ptr</u>.  The value of <u>msg_len</u> should be less than or equal to the <u>mq_msgsize</u> attribute  of  the  message
       queue, or <b>mq_send</b>() will fail.

       If  the specified message queue is not full, <b>mq_send</b>() will behave as if the message is inserted into the
       message queue at the position indicated by the <u>msg_prio</u> argument.  A message with a larger numeric  value
       of  <u>msg_prio</u>  will be inserted before messages with lower values of <u>msg_prio</u>.  A message will be inserted
       after other messages in the queue, if any, with equal <u>msg_prio</u>.  The value of  <u>msg_prio</u>  should  be  less
       than {MQ_PRIO_MAX}.

       If  the  specified  message  queue  is  full  and  O_NONBLOCK is not set in the message queue description
       associated with <u>mqdes</u>, <b>mq_send</b>() will block until space becomes available  to  enqueue  the  message,  or
       until  <b>mq_send</b>()  is  interrupted  by  a  signal.   If more than one thread is waiting to send when space
       becomes available in the message queue and the Priority Scheduling option is supported, then  the  thread
       of  the  highest  priority  that  has  been  waiting  the  longest will be unblocked to send its message.
       Otherwise, it is unspecified which waiting thread is unblocked.  If the specified message queue  is  full
       and  O_NONBLOCK  is  set  in the message queue description associated with <u>mqdes</u>, the message will not be
       queued and <b>mq_send</b>() will return an error.

       The <b>mq_timedsend</b>() system call will add a message to the message queue specified by <u>mqdes</u> in  the  manner
       defined for the <b>mq_send</b>() system call.  However, if the specified message queue is full and O_NONBLOCK is
       not set in the message queue description associated with <u>mqdes</u>, the wait for sufficient room in the queue
       will  be  terminated  when  the  specified  timeout  expires.   If O_NONBLOCK is set in the message queue
       description, this system call is equivalent to <b>mq_send</b>().

       The timeout will expire when the absolute time specified by <u>abs_timeout</u> passes, as measured by the  clock
       on  which timeouts are based (that is, when the value of that clock equals or exceeds <u>abs_timeout</u>), or if
       the absolute time specified by <u>abs_timeout</u> has already been passed at the time of the call.

       The timeout is based on the CLOCK_REALTIME clock.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Upon successful completion, the <b>mq_send</b>() and  <b>mq_timedsend</b>()  system  calls  return  a  value  of  zero.
       Otherwise,  no message will be enqueued, the system calls return -1, and the global variable <u>errno</u> is set
       to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>mq_send</b>() and <b>mq_timedsend</b>() system calls will fail if:

       [EAGAIN]           The O_NONBLOCK flag is set in the message queue description associated with <u>mqdes</u>, and
                          the specified message queue is full.

       [EBADF]            The <u>mqdes</u> argument is not a valid message queue descriptor open for writing.

       [EINTR]            A signal interrupted the call to <b>mq_send</b>() or <b>mq_timedsend</b>().

       [EINVAL]           The value of <u>msg_prio</u> was outside the valid range.

       [EINVAL]           The process or thread would have blocked, and the <u>abs_timeout</u>  parameter  specified  a
                          nanoseconds field value less than zero or greater than or equal to 1000 million.

       [EMSGSIZE]         The  specified  message  length,  <u>msg_len</u>,  exceeds  the message size attribute of the
                          message queue.

       [ETIMEDOUT]        The O_NONBLOCK flag was not set when the message queue was  opened,  but  the  timeout
                          expired before the message could be added to the queue.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/mq_open.2.html">mq_open</a></u>(2), <u><a href="../man2/mq_receive.2.html">mq_receive</a></u>(2), <u><a href="../man2/mq_setattr.2.html">mq_setattr</a></u>(2), <u><a href="../man2/mq_timedreceive.2.html">mq_timedreceive</a></u>(2)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>mq_send</b>() and <b>mq_timedsend</b>() system calls conform to IEEE Std 1003.1-2004 (“POSIX.1”).

</pre><h4><b>HISTORY</b></h4><pre>
       Support for POSIX message queues first appeared in FreeBSD 7.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2004 Edition,
       Standard  for  Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base
       Specifications Issue 6, Copyright (C) 2001-2004 by the Institute of Electrical and Electronics Engineers,
       Inc and The Open Group.  In the event of any discrepancy between this version and the original  IEEE  and
       The  Open  Group  Standard,  the  original IEEE and The Open Group Standard is the referee document.  The
       original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a>.

Debian                                          November 29, 2005                                     <u><a href="../man2/MQ_SEND.2.html">MQ_SEND</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>