<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mq_receive, mq_timedreceive — receive a message from message queue (REALTIME)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/freebsd-manpages">freebsd-manpages_12.2-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       mq_receive, mq_timedreceive — receive a message from message queue (REALTIME)

</pre><h4><b>LIBRARY</b></h4><pre>
       POSIX Real-time Library (librt, -lrt)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/mqueue.h">mqueue.h</a>&gt;</b>

       <u>ssize_t</u>
       <b>mq_receive</b>(<u>mqd_t</u> <u>mqdes</u>, <u>char</u> <u>*msg_ptr</u>, <u>size_t</u> <u>msg_len</u>, <u>unsigned</u> <u>*msg_prio</u>);

       <u>ssize_t</u>
       <b>mq_timedreceive</b>(<u>mqd_t</u> <u>mqdes</u>,          <u>char</u> <u>*msg_ptr</u>,          <u>size_t</u> <u>msg_len</u>,         <u>unsigned</u> <u>*msg_prio</u>,
           <u>const</u> <u>struct</u> <u>timespec</u> <u>*abs_timeout</u>);

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b>mq_receive</b>() system call receives oldest of the highest priority message(s) from  the  message  queue
       specified  by <u>mqdes</u>.  If the size of the buffer in bytes, specified by the <u>msg_len</u> argument, is less than
       the <u>mq_msgsize</u> attribute of the message queue, the system call will fail and return an error.  Otherwise,
       the selected message will be removed from the queue and copied to the buffer pointed to  by  the  <u>msg_ptr</u>
       argument.

       If the argument <u>msg_prio</u> is not NULL, the priority of the selected message will be stored in the location
       referenced by <u>msg_prio</u>.  If the specified message queue is empty and O_NONBLOCK is not set in the message
       queue  description  associated  with  <u>mqdes</u>,  <b>mq_receive</b>()  will block until a message is enqueued on the
       message queue or until <b>mq_receive</b>() is interrupted by a signal.  If more than one thread  is  waiting  to
       receive  a  message  when  a  message  arrives  at  an  empty queue and the Priority Scheduling option is
       supported, then the thread of highest priority that has been waiting the  longest  will  be  selected  to
       receive  the  message.   Otherwise,  it is unspecified which waiting thread receives the message.  If the
       specified message queue is empty and O_NONBLOCK is set in the message queue description  associated  with
       <u>mqdes</u>, no message will be removed from the queue, and <b>mq_receive</b>() will return an error.

       The  <b>mq_timedreceive</b>()  system  call  will  receive  the oldest of the highest priority messages from the
       message queue specified by <u>mqdes</u> as described for the <b>mq_receive</b>() system call.  However,  if  O_NONBLOCK
       was  not specified when the message queue was opened via the <b>mq_open</b>() system call, and no message exists
       on the queue to satisfy the receive, the wait for such a message will be terminated  when  the  specified
       timeout expires.  If O_NONBLOCK is set, this system call is equivalent to <b>mq_receive</b>().

       The  timeout  expires when the absolute time specified by <u>abs_timeout</u> passes, as measured by the clock on
       which timeouts are based (that is, when the value of that clock equals or exceeds <u>abs_timeout</u>), or if the
       absolute time specified by <u>abs_timeout</u> has already been passed at the time of the call.

       The timeout is based on the CLOCK_REALTIME clock.

</pre><h4><b>RETURN</b> <b>VALUES</b></h4><pre>
       Upon successful completion, the <b>mq_receive</b>() and <b>mq_timedreceive</b>() system calls return the length of  the
       selected  message  in  bytes and the message is removed from the queue.  Otherwise, no message is removed
       from the queue, the system call returns a value of -1, and the global variable <u>errno</u> is set  to  indicate
       the error.

</pre><h4><b>ERRORS</b></h4><pre>
       The <b>mq_receive</b>() and <b>mq_timedreceive</b>() system calls will fail if:

       [EAGAIN]           O_NONBLOCK flag is set in the message queue description associated with <u>mqdes</u>, and the
                          specified message queue is empty.

       [EBADF]            The <u>mqdes</u> argument is not a valid message queue descriptor open for reading.

       [EMSGSIZE]         The specified message buffer size, <u>msg_len</u>, is less than the message size attribute of
                          the message queue.

       [EINTR]            The <b>mq_receive</b>() or <b>mq_timedreceive</b>() operation was interrupted by a signal.

       [EINVAL]           The  process  or  thread would have blocked, and the <u>abs_timeout</u> parameter specified a
                          nanoseconds field value less than zero or greater than or equal to 1000 million.

       [ETIMEDOUT]        The O_NONBLOCK flag was not set when the message queue  was  opened,  but  no  message
                          arrived on the queue before the specified timeout expired.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man2/mq_open.2.html">mq_open</a></u>(2), <u><a href="../man2/mq_send.2.html">mq_send</a></u>(2), <u><a href="../man2/mq_timedsend.2.html">mq_timedsend</a></u>(2)

</pre><h4><b>STANDARDS</b></h4><pre>
       The <b>mq_receive</b>() and <b>mq_timedreceive</b>() system calls conform to IEEE Std 1003.1-2004 (“POSIX.1”).

</pre><h4><b>HISTORY</b></h4><pre>
       Support for POSIX message queues first appeared in FreeBSD 7.0.

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Portions of this text are reprinted and reproduced in electronic form from IEEE Std 1003.1, 2004 Edition,
       Standard  for  Information Technology -- Portable Operating System Interface (POSIX), The Open Group Base
       Specifications Issue 6, Copyright (C) 2001-2004 by the Institute of Electrical and Electronics Engineers,
       Inc and The Open Group.  In the event of any discrepancy between this version and the original  IEEE  and
       The  Open  Group  Standard,  the  original IEEE and The Open Group Standard is the referee document.  The
       original Standard can be obtained online at <a href="http://www.opengroup.org/unix/online.html">http://www.opengroup.org/unix/online.html</a>.

Debian                                          November 29, 2005                                  <u><a href="../man2/MQ_RECEIVE.2.html">MQ_RECEIVE</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>