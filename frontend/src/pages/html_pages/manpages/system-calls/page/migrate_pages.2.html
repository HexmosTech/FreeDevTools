<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>migrate_pages - move all pages in a process to another set of nodes</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       migrate_pages - move all pages in a process to another set of nodes

</pre><h4><b>LIBRARY</b></h4><pre>
       NUMA (Non-Uniform Memory Access) policy library (<u>libnuma</u>, <u>-lnuma</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;numaif.h&gt;</b>

       <b>long</b> <b>migrate_pages(int</b> <u>pid</u><b>,</b> <b>unsigned</b> <b>long</b> <u>maxnode,</u>
                          <b>const</b> <b>unsigned</b> <b>long</b> <b>*</b><u>old_nodes,</u>
                          <b>const</b> <b>unsigned</b> <b>long</b> <b>*</b><u>new_nodes</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>migrate_pages</b>()  attempts  to move all pages of the process <u>pid</u> that are in memory nodes <u>old_nodes</u> to the
       memory nodes in <u>new_nodes</u>.  Pages not located in any node in <u>old_nodes</u> will not be migrated.  As  far  as
       possible,  the  kernel maintains the relative topology relationship inside <u>old_nodes</u> during the migration
       to <u>new_nodes</u>.

       The <u>old_nodes</u> and <u>new_nodes</u> arguments are pointers to bit masks of node numbers, with up to <u>maxnode</u>  bits
       in  each mask.  These masks are maintained as arrays of unsigned <u>long</u> integers (in the last <u>long</u> integer,
       the bits beyond those specified by <u>maxnode</u> are ignored).  The <u>maxnode</u> argument is the maximum node number
       in the bit mask plus one (this is the same as in <b><a href="../man2/mbind.2.html">mbind</a></b>(2), but different from <b><a href="../man2/select.2.html">select</a></b>(2)).

       The <u>pid</u> argument is the ID of the process whose pages are to be moved.  To move pages in another process,
       the caller must be privileged (<b>CAP_SYS_NICE</b>) or the real or effective user ID of the calling process must
       match the real or saved-set user ID of the target process.  If <u>pid</u> is 0, then <b>migrate_pages</b>() moves pages
       of the calling process.

       Pages shared with another process will be moved only if  the  initiating  process  has  the  <b>CAP_SYS_NICE</b>
       privilege.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On  success  <b>migrate_pages</b>()  returns the number of pages that could not be moved (i.e., a return of zero
       means that all pages were successfully moved).  On error, it returns -1, and sets <u>errno</u> to  indicate  the
       error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EFAULT</b> Part  or  all of the memory range specified by <u>old_nodes</u>/<u>new_nodes</u> and <u>maxnode</u> points outside your
              accessible address space.

       <b>EINVAL</b> The value specified by <u>maxnode</u>  exceeds  a  kernel-imposed  limit.   Or,  <u>old_nodes</u>  or  <u>new_nodes</u>
              specifies  one  or more node IDs that are greater than the maximum supported node ID.  Or, none of
              the node IDs specified by <u>new_nodes</u> are on-line  and  allowed  by  the  process's  current  cpuset
              context, or none of the specified nodes contain memory.

       <b>EPERM</b>  Insufficient  privilege  (<b>CAP_SYS_NICE</b>)  to  move  pages  of  the  process  specified  by  <u>pid</u>, or
              insufficient privilege (<b>CAP_SYS_NICE</b>) to access the specified target nodes.

       <b>ESRCH</b>  No process matching <u>pid</u> could be found.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 2.6.16.

</pre><h4><b>NOTES</b></h4><pre>
       For information on library support, see <b><a href="../man7/numa.7.html">numa</a></b>(7).

       Use <b><a href="../man2/get_mempolicy.2.html">get_mempolicy</a></b>(2) with the <b>MPOL_F_MEMS_ALLOWED</b> flag to obtain the set of nodes that are allowed by the
       calling process's cpuset.  Note that this information is subject to change  at  any  time  by  manual  or
       automatic reconfiguration of the cpuset.

       Use  of  <b>migrate_pages</b>() may result in pages whose location (node) violates the memory policy established
       for the specified addresses (see <b><a href="../man2/mbind.2.html">mbind</a></b>(2)) and/or the specified process (see <b><a href="../man2/set_mempolicy.2.html">set_mempolicy</a></b>(2)).  That is,
       memory policy does not constrain the destination nodes used by <b>migrate_pages</b>().

       The <u>&lt;numaif.h&gt;</u> header is not included with glibc, but requires  installing  <u>libnuma-devel</u>  or  a  similar
       package.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/get_mempolicy.2.html">get_mempolicy</a></b>(2), <b><a href="../man2/mbind.2.html">mbind</a></b>(2), <b><a href="../man2/set_mempolicy.2.html">set_mempolicy</a></b>(2), <b><a href="../man3/numa.3.html">numa</a></b>(3), <b><a href="../man5/numa_maps.5.html">numa_maps</a></b>(5), <b><a href="../man7/cpuset.7.html">cpuset</a></b>(7), <b><a href="../man7/numa.7.html">numa</a></b>(7), <b><a href="../man8/migratepages.8.html">migratepages</a></b>(8),
       <b><a href="../man8/numastat.8.html">numastat</a></b>(8)

       <u>Documentation/vm/page_migration.rst</u> in the Linux kernel source tree

Linux man-pages 6.9.1                              2024-05-02                                   <u><a href="../man2/migrate_pages.2.html">migrate_pages</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>