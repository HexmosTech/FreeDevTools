<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cacheflush - flush contents of instruction and/or data cache</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cacheflush - flush contents of instruction and/or data cache

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;sys/cachectl.h&gt;</b>

       <b>int</b> <b>cacheflush(void</b> <u>addr</u><b>[.</b><u>nbytes</u><b>],</b> <b>int</b> <u>nbytes</u><b>,</b> <b>int</b> <u>cache</u><b>);</b>

       <u>Note</u>: On some architectures, there is no glibc wrapper for this system call; see NOTES.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>cacheflush</b>()  flushes  the contents of the indicated cache(s) for the user addresses in the range <u>addr</u> to
       <u>(addr+nbytes-1)</u>.  <u>cache</u> may be one of:

       <b>ICACHE</b> Flush the instruction cache.

       <b>DCACHE</b> Write back to memory and invalidate the affected valid cache lines.

       <b>BCACHE</b> Same as <b>(ICACHE|DCACHE)</b>.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>cacheflush</b>() returns 0 on success.  On error, it returns -1 and sets <u>errno</u> to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EFAULT</b> Some or all of the address range <u>addr</u> to <u>(addr+nbytes-1)</u> is not accessible.

       <b>EINVAL</b> <u>cache</u> is not one of <b>ICACHE</b>, <b>DCACHE</b>, or <b>BCACHE</b> (but see BUGS).

</pre><h4><b>VERSIONS</b></h4><pre>
       <b>cacheflush</b>() should not be used in programs intended to be portable.  On Linux, this call first  appeared
       on  the  MIPS  architecture,  but  nowadays,  Linux  provides  a  <b>cacheflush</b>()  system call on some other
       architectures, but with different arguments.

   <b>Architecture-specific</b> <b>variants</b>
       glibc provides a wrapper for this system call, with the prototype shown in SYNOPSIS,  for  the  following
       architectures: ARC, CSKY, MIPS, and NIOS2.

       On some other architectures, Linux provides this system call, with different arguments:

       M68K:
              <b>int</b> <b>cacheflush(unsigned</b> <b>long</b> <u>addr</u><b>,</b> <b>int</b> <u>scope</u><b>,</b> <b>int</b> <u>cache</u><b>,</b>
                             <b>unsigned</b> <b>long</b> <u>len</u><b>);</b>

       SH:
              <b>int</b> <b>cacheflush(unsigned</b> <b>long</b> <u>addr</u><b>,</b> <b>unsigned</b> <b>long</b> <u>len</u><b>,</b> <b>int</b> <u>op</u><b>);</b>

       NDS32:
              <b>int</b> <b>cacheflush(unsigned</b> <b>int</b> <u>start</u><b>,</b> <b>unsigned</b> <b>int</b> <u>end</u><b>,</b> <b>int</b> <u>cache</u><b>);</b>

       On  the  above  architectures,  glibc  does  not  provide  a  wrapper for this system call; call it using
       <b><a href="../man2/syscall.2.html">syscall</a></b>(2).

   <b>GCC</b> <b>alternative</b>
       Unless you need the finer grained control that this system call provides, you probably want  to  use  the
       GCC  built-in  function  <b>__builtin___clear_cache</b>(),  which provides a portable interface across platforms
       supported by GCC and compatible compilers:

           <b>void</b> <b>__builtin___clear_cache(void</b> <b>*</b><u>begin</u><b>,</b> <b>void</b> <b>*</b><u>end</u><b>);</b>

       On platforms that don't require instruction cache flushes, <b>__builtin___clear_cache</b>() has no effect.

       <u>Note</u>: On some GCC-compatible compilers, the prototype for this built-in function uses <u>char</u> <u>*</u>  instead  of
       <u>void</u> <u>*</u> for the parameters.

</pre><h4><b>STANDARDS</b></h4><pre>
       Historically,  this  system call was available on all MIPS UNIX variants including RISC/os, IRIX, Ultrix,
       NetBSD, OpenBSD, and FreeBSD (and also on some non-UNIX MIPS operating systems), so that the existence of
       this call in MIPS operating systems is a de-facto standard.

</pre><h4><b>BUGS</b></h4><pre>
       Linux kernels older than Linux 2.6.11 ignore the <u>addr</u> and <u>nbytes</u> arguments, making this  function  fairly
       expensive.  Therefore, the whole cache is always flushed.

       This  function  always  behaves  as  if <b>BCACHE</b> has been passed for the <u>cache</u> argument and does not do any
       error checking on the <u>cache</u> argument.

Linux man-pages 6.9.1                              2024-05-02                                      <u><a href="../man2/cacheflush.2.html">cacheflush</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>