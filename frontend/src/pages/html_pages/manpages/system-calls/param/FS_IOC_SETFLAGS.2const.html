<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FS_IOC_GETFLAGS, FS_IOC_SETFLAGS - ioctl() operations for inode flags</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       FS_IOC_GETFLAGS, FS_IOC_SETFLAGS - ioctl() operations for inode flags

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/linux/fs.h">linux/fs.h</a>&gt;</b>  /* Definition of <b>FS_*</b> constants */
       <b>#include</b> <b>&lt;sys/ioctl.h&gt;</b>

       <b>int</b> <b>ioctl(int</b> <u>fd</u><b>,</b> <b>FS_IOC_GETFLAGS,</b> <b>int</b> <b>*</b><u>attr</u><b>);</b>
       <b>int</b> <b>ioctl(int</b> <u>fd</u><b>,</b> <b>FS_IOC_SETFLAGS,</b> <b>const</b> <b>int</b> <b>*</b><u>attr</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Various Linux filesystems support the notion of <u>inode</u> <u>flags</u>â€”attributes that modify the semantics of files
       and directories.  These flags can be retrieved and modified using two <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2) operations:

           int attr;
           fd = open("pathname", ...);

           ioctl(fd, FS_IOC_GETFLAGS, &amp;attr);  /* Place current flags
                                                  in 'attr' */
           attr |= FS_NOATIME_FL;              /* Tweak returned bit mask */
           ioctl(fd, FS_IOC_SETFLAGS, &amp;attr);  /* Update flags for inode
                                                  referred to by 'fd' */

       The <b><a href="../man1/lsattr.1.html">lsattr</a></b>(1) and <b><a href="../man1/chattr.1.html">chattr</a></b>(1) shell commands provide interfaces to these two operations, allowing a user to
       view and modify the inode flags associated with a file.

       The following flags are supported (shown along with the corresponding letter used to indicate the flag by
       <b><a href="../man1/lsattr.1.html">lsattr</a></b>(1) and <b><a href="../man1/chattr.1.html">chattr</a></b>(1)):

       <b>FS_APPEND_FL</b> 'a'
              The  file  can be opened only with the <b>O_APPEND</b> flag.  If applied to a directory, forbids removing
              files from the directory (via <b>unlink</b>(), <b>rename</b>(), and the like).  (This restriction  applies  even
              to  the  superuser.)   Only  a  privileged  process  (<b>CAP_LINUX_IMMUTABLE</b>)  can  set or clear this
              attribute.

       <b>FS_COMPR_FL</b> 'c'
              Store the file in a compressed format on disk.   This  flag  is  <u>not</u>  supported  by  most  of  the
              mainstream filesystem implementations; one exception is <b><a href="../man5/btrfs.5.html">btrfs</a></b>(5).

       <b>FS_DIRSYNC_FL</b> 'D' (since Linux 2.6.0)
              Write  directory  changes  synchronously  to disk.  This flag provides semantics equivalent to the
              <b><a href="../man2/mount.2.html">mount</a></b>(2) <b>MS_DIRSYNC</b> option, but on a per-directory basis.   This  flag  can  be  applied  only  to
              directories.

       <b>FS_IMMUTABLE_FL</b> 'i'
              The  file  is  immutable:  no changes are permitted to the file contents or metadata (permissions,
              timestamps, ownership, link count, and so on).  (This restriction applies even to the  superuser.)
              Only a privileged process (<b>CAP_LINUX_IMMUTABLE</b>) can set or clear this attribute.

       <b>FS_JOURNAL_DATA_FL</b> 'j'
              Enable  journaling  of  file  data  on  <b><a href="../man5/ext3.5.html">ext3</a></b>(5)  and <b><a href="../man5/ext4.5.html">ext4</a></b>(5) filesystems.  On a filesystem that is
              journaling in <u>ordered</u> or <u>writeback</u> mode, a privileged (<b>CAP_SYS_RESOURCE</b>) process can set this flag
              to enable journaling of data updates on a per-file basis.

       <b>FS_NOATIME_FL</b> 'A'
              Don't update the file last  access  time  when  the  file  is  accessed.   This  can  provide  I/O
              performance benefits for applications that do not care about the accuracy of this timestamp.  This
              flag provides functionality similar to the <b><a href="../man2/mount.2.html">mount</a></b>(2) <b>MS_NOATIME</b> flag, but on a per-file basis.

       <b>FS_NOCOW_FL</b> 'C' (since Linux 2.6.39)
              The  file  will  not  be  subject  to  copy-on-write  updates.   This  flag  has an effect only on
              filesystems that support copy-on-write semantics, such as Btrfs.  See <b><a href="../man1/chattr.1.html">chattr</a></b>(1) and <b><a href="../man5/btrfs.5.html">btrfs</a></b>(5).

       <b>FS_NODUMP_FL</b> 'd'
              Don't include this file in backups made using <b><a href="../man8/dump.8.html">dump</a></b>(8).

       <b>FS_NOTAIL_FL</b> 't'
              This flag is supported only on Reiserfs.  It disables the  Reiserfs  tail-packing  feature,  which
              tries to pack small files (and the final fragment of larger files) into the same disk block as the
              file metadata.

       <b>FS_PROJINHERIT_FL</b> 'P' (since Linux 4.5)
              Inherit  the  quota  project  ID.   Files  and  subdirectories  will inherit the project ID of the
              directory.  This flag can be applied only to directories.

       <b>FS_SECRM_FL</b> 's'
              Mark the file for secure deletion.  This feature is not implemented by any filesystem,  since  the
              task of securely erasing a file from a recording medium is surprisingly difficult.

       <b>FS_SYNC_FL</b> 'S'
              Make  file updates synchronous.  For files, this makes all writes synchronous (as though all opens
              of the file were with the <b>O_SYNC</b> flag).   For  directories,  this  has  the  same  effect  as  the
              <b>FS_DIRSYNC_FL</b> flag.

       <b>FS_TOPDIR_FL</b> 'T'
              Mark  a  directory for special treatment under the Orlov block-allocation strategy.  See <b><a href="../man1/chattr.1.html">chattr</a></b>(1)
              for details.  This flag can be applied only to directories and has an effect only for ext2,  ext3,
              and ext4.

       <b>FS_UNRM_FL</b> 'u'
              Allow  the  file  to  be  undeleted  if  it  is  deleted.   This feature is not implemented by any
              filesystem, since it is possible to implement file-recovery mechanisms outside the kernel.

       In most cases, when any of the above flags is set on a directory, the flag  is  inherited  by  files  and
       subdirectories created inside that directory.  Exceptions include <b>FS_TOPDIR_FL</b>, which is not inheritable,
       and <b>FS_DIRSYNC_FL</b>, which is inherited only by subdirectories.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>NOTES</b></h4><pre>
       In  order  to change the inode flags of a file using the <b>FS_IOC_SETFLAGS</b> operation, the effective user ID
       of the caller must match the owner of the file, or the caller must have the <b>CAP_FOWNER</b> capability.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2), <b><a href="../man1/chattr.1.html">chattr</a></b>(1), <b><a href="../man1/lsattr.1.html">lsattr</a></b>(1), <b><a href="../man2/mount.2.html">mount</a></b>(2), <b><a href="../man5/btrfs.5.html">btrfs</a></b>(5), <b><a href="../man5/ext4.5.html">ext4</a></b>(5), <b><a href="../man5/xfs.5.html">xfs</a></b>(5), <b><a href="../man7/xattr.7.html">xattr</a></b>(7), <b><a href="../man8/mount.8.html">mount</a></b>(8)

Linux man-pages 6.9.1                              2024-06-13                            <u><a href="../man2const/FS_IOC_SETFLAGS.2const.html">FS_IOC_SETFLAGS</a></u>(2const)
</pre>
 </div>
</div></section>
</div>
</body>
</html>