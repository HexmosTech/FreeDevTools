<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>perfmonctl - interface to IA-64 performance monitoring unit</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       perfmonctl - interface to IA-64 performance monitoring unit

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/syscall.h">syscall.h</a>&gt;</b>
       <b>#include</b> <b>&lt;perfmon.h&gt;</b>

       <b>long</b> <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>int</b> <u>cmd</u><b>,</b> <b>void</b> <u>arg</u><b>[.</b><u>narg</u><b>],</b> <b>int</b> <u>narg</u><b>);</b>

       <u>Note</u>: There is no glibc wrapper for this system call; see HISTORY.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  IA-64-specific  <b>perfmonctl</b>()  system  call  provides an interface to the PMU (performance monitoring
       unit).  The PMU consists of PMD (performance monitoring data) registers and PMC  (performance  monitoring
       control) registers, which gather hardware statistics.

       <b>perfmonctl</b>()  applies the operation <u>cmd</u> to the input arguments specified by <u>arg</u>.  The number of arguments
       is defined by <u>narg</u>.  The <u>fd</u> argument specifies the perfmon context to operate on.

       Supported values for <u>cmd</u> are:

       <b>PFM_CREATE_CONTEXT</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_CREATE_CONTEXT,</b> <b>pfarg_context_t</b> <b>*</b><u>ctxt</u><b>,</b> <b>1);</b>
              Set up a context.

              The <u>fd</u> parameter is ignored.  A new perfmon context is created as specified in <u>ctxt</u> and  its  file
              descriptor is returned in <u>ctxt-&gt;ctx_fd</u>.

              The  file descriptor can be used in subsequent calls to <b>perfmonctl</b>() and can be used to read event
              notifications (type <u>pfm_msg_t</u>) using <b><a href="../man2/read.2.html">read</a></b>(2).  The file descriptor is  pollable  using  <b><a href="../man2/select.2.html">select</a></b>(2),
              <b><a href="../man2/poll.2.html">poll</a></b>(2), and <b><a href="../man7/epoll.7.html">epoll</a></b>(7).

              The context can be destroyed by calling <b><a href="../man2/close.2.html">close</a></b>(2) on the file descriptor.

       <b>PFM_WRITE_PMCS</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_WRITE_PMCS,</b> <b>pfarg_reg_t</b> <b>*</b><u>pmcs</u><b>,</b> <b>n);</b>
              Set PMC registers.

       <b>PFM_WRITE_PMDS</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_WRITE_PMDS,</b> <b>pfarg_reg_t</b> <b>*</b><u>pmds</u><b>,</b> <b>n);</b>
              Set PMD registers.

       <b>PFM_READ_PMDS</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_READ_PMDS,</b> <b>pfarg_reg_t</b> <b>*</b><u>pmds</u><b>,</b> <b>n);</b>
              Read PMD registers.

       <b>PFM_START</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_START,</b> <b>NULL,</b> <b>0);</b>
              Start monitoring.

       <b>PFM_STOP</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_STOP,</b> <b>NULL,</b> <b>0);</b>
              Stop monitoring.

       <b>PFM_LOAD_CONTEXT</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_LOAD_CONTEXT,</b> <b>pfarg_load_t</b> <b>*</b><u>largs</u><b>,</b> <b>1);</b>
              Attach the context to a thread.

       <b>PFM_UNLOAD_CONTEXT</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_UNLOAD_CONTEXT,</b> <b>NULL,</b> <b>0);</b>
              Detach the context from a thread.

       <b>PFM_RESTART</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_RESTART,</b> <b>NULL,</b> <b>0);</b>
              Restart monitoring after receiving an overflow notification.

       <b>PFM_GET_FEATURES</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_GET_FEATURES,</b> <b>pfarg_features_t</b> <b>*</b><u>arg</u><b>,</b> <b>1);</b>

       <b>PFM_DEBUG</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_DEBUG,</b> <u>val</u><b>,</b> <b>0);</b>
              If <u>val</u> is nonzero, enable debugging mode, otherwise disable.

       <b>PFM_GET_PMC_RESET_VAL</b>
              <b>perfmonctl(int</b> <u>fd</u><b>,</b> <b>PFM_GET_PMC_RESET_VAL,</b> <b>pfarg_reg_t</b> <b>*</b><u>req</u><b>,</b> <b>n);</b>
              Reset PMC registers to default values.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       <b>perfmonctl</b>() returns zero when the operation is successful.  On error, -1 is returned and <u>errno</u> is set to
       indicate the error.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux on IA-64.

</pre><h4><b>HISTORY</b></h4><pre>
       Added in Linux 2.4; removed in Linux 5.10.

       This system call was broken for many years, and ultimately removed in Linux 5.10.

       glibc  does  not  provide  a  wrapper  for  this  system  call; on kernels where it exists, call it using
       <b><a href="../man2/syscall.2.html">syscall</a></b>(2).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/gprof.1.html">gprof</a></b>(1)

       The perfmon2 interface specification

Linux man-pages 6.9.1                              2024-05-02                                      <u><a href="../man2/perfmonctl.2.html">perfmonctl</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>