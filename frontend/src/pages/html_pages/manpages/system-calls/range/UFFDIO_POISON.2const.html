<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UFFDIO_POISON - mark an address range as "poisoned"</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       UFFDIO_POISON - mark an address range as "poisoned"

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#include</b> <b>&lt;<a href="file:/usr/include/linux/userfaultfd.h">linux/userfaultfd.h</a>&gt;</b>  /* Definition of <b>UFFD*</b> constants */
       <b>#include</b> <b>&lt;sys/ioctl.h&gt;</b>

       <b>int</b> <b>ioctl(int</b> <u>fd</u><b>,</b> <b>UFFDIO_POISON,</b> <b>...);</b>

       <b>#include</b> <b>&lt;<a href="file:/usr/include/linux/userfaultfd.h">linux/userfaultfd.h</a>&gt;</b>

       <b>struct</b> <b>uffdio_poison</b> <b>{</b>
            <b>struct</b> <b>uffdio_range</b>  <b>range;</b>
                              /* Range to install poison PTE markers in */
            <b>__u64</b>   <b>mode;</b>     /* Flags controlling the behavior of poison */
            <b>__s64</b>   <b>updated;</b>  /* Number of bytes poisoned, or negated error */
       <b>};</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Mark  an  address  range  as  "poisoned".  Future accesses to these addresses will raise a <b>SIGBUS</b> signal.
       Unlike <b>MADV_HWPOISON</b> this works by installing page table entries,  rather  than  "really"  poisoning  the
       underlying physical pages.  This means it only affects this particular address space.

       The following value may be bitwise ORed in <u>mode</u> to change the behavior of the <b>UFFDIO_POISON</b> operation:

       <b>UFFDIO_POISON_MODE_DONTWAKE</b>
              Do not wake up the thread that waits for page-fault resolution.

       The  <u>updated</u> field is used by the kernel to return the number of bytes that were actually poisoned, or an
       error in the same manner as <b>UFFDIO_COPY</b>.  If the value returned in the <u>updated</u> field  doesn't  match  the
       value  that  was specified in <u>range.len</u>, the operation fails with the error <b>EAGAIN</b>.  The <u>updated</u> field is
       output-only; it is not read by the <b>UFFDIO_POISON</b> operation.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, 0 is returned.  In this case, the entire area was poisoned.

       On error, -1 is returned and <u>errno</u> is set to indicate the error.

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EAGAIN</b> The number of bytes mapped (i.e., the value returned in the <u>updated</u>  field)  does  not  equal  the
              value that was specified in the <u>range.len</u> field.

       <b>EINVAL</b> Either <u>range.start</u> or <u>range.len</u> was not a multiple of the system page size; or <u>range.len</u> was zero;
              or the range specified was invalid.

       <b>EINVAL</b> An invalid bit was specified in the <u>mode</u> field.

       <b>EEXIST</b> One or more pages were already mapped in the given range.

       <b>ENOENT</b> The  faulting  process  has  changed  its virtual memory layout simultaneously with an outstanding
              <b>UFFDIO_POISON</b> operation.

       <b>ENOMEM</b> Allocating memory for page table entries failed.

       <b>ESRCH</b>  The faulting process has exited at the time of a <b>UFFDIO_POISON</b> operation.

</pre><h4><b>STANDARDS</b></h4><pre>
       Linux.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 6.6.

</pre><h4><b>EXAMPLES</b></h4><pre>
       See <b><a href="../man2/userfaultfd.2.html">userfaultfd</a></b>(2).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/ioctl.2.html">ioctl</a></b>(2), <b><a href="../man2/ioctl_userfaultfd.2.html">ioctl_userfaultfd</a></b>(2), <b><a href="../man2/userfaultfd.2.html">userfaultfd</a></b>(2)

       <u>linux.git/Documentation/admin-guide/mm/userfaultfd.rst</u>

Linux man-pages 6.9.1                              2024-06-17                              <u><a href="../man2const/UFFDIO_POISON.2const.html">UFFDIO_POISON</a></u>(2const)
</pre>
 </div>
</div></section>
</div>
</body>
</html>