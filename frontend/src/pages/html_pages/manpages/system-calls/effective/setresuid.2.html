<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>setresuid, setresgid - set real, effective, and saved user or group ID</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages-dev">manpages-dev_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       setresuid, setresgid - set real, effective, and saved user or group ID

</pre><h4><b>LIBRARY</b></h4><pre>
       Standard C library (<u>libc</u>, <u>-lc</u>)

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>#define</b> <b>_GNU_SOURCE</b>         /* See <a href="../man7/feature_test_macros.7.html">feature_test_macros</a>(7) */
       <b>#include</b> <b>&lt;<a href="file:/usr/include/unistd.h">unistd.h</a>&gt;</b>

       <b>int</b> <b>setresuid(uid_t</b> <u>ruid</u><b>,</b> <b>uid_t</b> <u>euid</u><b>,</b> <b>uid_t</b> <u>suid</u><b>);</b>
       <b>int</b> <b>setresgid(gid_t</b> <u>rgid</u><b>,</b> <b>gid_t</b> <u>egid</u><b>,</b> <b>gid_t</b> <u>sgid</u><b>);</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>setresuid</b>()  sets  the  real  user  ID,  the  effective user ID, and the saved set-user-ID of the calling
       process.

       An unprivileged process may change its real UID, effective UID, and saved set-user-ID, each  to  one  of:
       the current real UID, the current effective UID, or the current saved set-user-ID.

       A  privileged  process  (on  Linux, one having the <b>CAP_SETUID</b> capability) may set its real UID, effective
       UID, and saved set-user-ID to arbitrary values.

       If one of the arguments equals -1, the corresponding value is not changed.

       Regardless of what changes are made to the real UID, effective UID, and saved set-user-ID, the filesystem
       UID is always set to the same value as the (possibly new) effective UID.

       Completely analogously, <b>setresgid</b>() sets the real GID, effective  GID,  and  saved  set-group-ID  of  the
       calling  process  (and  always modifies the filesystem GID to be the same as the effective GID), with the
       same restrictions for unprivileged processes.

</pre><h4><b>RETURN</b> <b>VALUE</b></h4><pre>
       On success, zero is returned.  On error, -1 is returned, and <u>errno</u> is set to indicate the error.

       <u>Note</u>: there are cases where <b>setresuid</b>() can fail even when the caller is UID 0; it is  a  grave  security
       error to omit checking for a failure return from <b>setresuid</b>().

</pre><h4><b>ERRORS</b></h4><pre>
       <b>EAGAIN</b> The call would change the caller's real UID (i.e., <u>ruid</u> does not match the caller's real UID), but
              there was a temporary failure allocating the necessary kernel data structures.

       <b>EAGAIN</b> <u>ruid</u>  does  not  match  the  caller's  real  UID and this call would bring the number of processes
              belonging to the real user ID <u>ruid</u> over the caller's <b>RLIMIT_NPROC</b>  resource  limit.   Since  Linux
              3.1,  this  error case no longer occurs (but robust applications should check for this error); see
              the description of <b>EAGAIN</b> in <b><a href="../man2/execve.2.html">execve</a></b>(2).

       <b>EINVAL</b> One or more of the target user or group IDs is not valid in this user namespace.

       <b>EPERM</b>  The calling process is not  privileged  (did  not  have  the  necessary  capability  in  its  user
              namespace)  and  tried  to  change the IDs to values that are not permitted.  For <b>setresuid</b>(), the
              necessary capability is <b>CAP_SETUID</b>; for <b>setresgid</b>(), it is <b>CAP_SETGID</b>.

</pre><h4><b>VERSIONS</b></h4><pre>
   <b>C</b> <b>library/kernel</b> <b>differences</b>
       At the kernel level, user IDs and group IDs are a per-thread attribute.  However, POSIX requires that all
       threads in a process share the same credentials.  The NPTL threading  implementation  handles  the  POSIX
       requirements  by  providing  wrapper  functions for the various system calls that change process UIDs and
       GIDs.  These wrapper functions (including those for <b>setresuid</b>() and <b>setresgid</b>())  employ  a  signal-based
       technique  to  ensure  that  when one thread changes credentials, all of the other threads in the process
       also change their credentials.  For details, see <b><a href="../man7/nptl.7.html">nptl</a></b>(7).

</pre><h4><b>STANDARDS</b></h4><pre>
       None.

</pre><h4><b>HISTORY</b></h4><pre>
       Linux 2.1.44, glibc 2.3.2.  HP-UX, FreeBSD.

       The original Linux <b>setresuid</b>() and <b>setresgid</b>() system calls supported only 16-bit  user  and  group  IDs.
       Subsequently,  Linux  2.4  added  <b>setresuid32</b>()  and  <b>setresgid32</b>(),  supporting  32-bit  IDs.  The glibc
       <b>setresuid</b>() and <b>setresgid</b>() wrapper functions  transparently  deal  with  the  variations  across  kernel
       versions.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man2/getresuid.2.html">getresuid</a></b>(2),    <b><a href="../man2/getuid.2.html">getuid</a></b>(2),    <b><a href="../man2/setfsgid.2.html">setfsgid</a></b>(2),   <b><a href="../man2/setfsuid.2.html">setfsuid</a></b>(2),   <b><a href="../man2/setreuid.2.html">setreuid</a></b>(2),   <b><a href="../man2/setuid.2.html">setuid</a></b>(2),   <b><a href="../man7/capabilities.7.html">capabilities</a></b>(7),
       <b><a href="../man7/credentials.7.html">credentials</a></b>(7), <b><a href="../man7/user_namespaces.7.html">user_namespaces</a></b>(7)

Linux man-pages 6.9.1                              2024-05-02                                       <u><a href="../man2/setresuid.2.html">setresuid</a></u>(2)
</pre>
 </div>
</div></section>
</div>
</body>
</html>