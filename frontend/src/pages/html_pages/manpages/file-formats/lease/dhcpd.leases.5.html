<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dhcpd.leases - DHCP client lease database</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/isc-dhcp-server">isc-dhcp-server_4.4.3-P1-4ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dhcpd.leases - DHCP client lease database

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The  Internet  Systems Consortium DHCP Server keeps a persistent database of leases that it has assigned.
       This database is a free-form ASCII file containing a series of lease declarations.  Every time a lease is
       acquired, renewed or released, its new value is recorded at the end of the lease file.  So if  more  than
       one declaration appears for a given lease, the last one in the file is the current one.

       When  dhcpd  is  first  installed,  there  is  no  lease database.   However, dhcpd requires that a lease
       database be present before it will start.  To make the initial lease database, just create an empty  file
       called /var/lib/dhcp/dhcpd.leases.   You can do this with:

            touch /var/lib/dhcp/dhcpd.leases

       In  order  to  prevent  the lease database from growing without bound, the file is rewritten from time to
       time.   First, a temporary lease database is created and all known leases are dumped to it.    Then,  the
       old lease database is renamed /var/lib/dhcp/dhcpd.leases~.   Finally, the newly written lease database is
       moved into place.

       In  order  to  process both DHCPv4 and DHCPv6 messages you will need to run two separate instances of the
       dhcpd process.  Each of these instances will need it's own lease file.  You can use the <u>-lf</u> option on the
       server's command line to specify a different lease file name for one or both servers.

</pre><h4><b>FORMAT</b></h4><pre>
       Lease descriptions are stored in a format that is parsed by the same recursive  descent  parser  used  to
       read  the <b><a href="../man5/dhcpd.conf.5.html">dhcpd.conf</a>(5)</b> and <b><a href="../man5/dhclient.conf.5.html">dhclient.conf</a>(5)</b> files.  Lease files can contain lease declarations, and also
       group and subgroup declarations, host declarations and failover state declarations.  Group, subgroup  and
       host declarations are used to record objects created using the OMAPI protocol.

       The  lease  file  is  a  log-structured  file  - whenever a lease changes, the contents of that lease are
       written to the end of the file.   This means that it is entirely possible and quite reasonable for  there
       to  be two or more declarations of the same lease in the lease file at the same time.   In that case, the
       instance of that particular lease that appears last in the file is the one that is in effect.

       Group, subgroup and host declarations in the lease file are handled in the same manner,  except  that  if
       any  of  these  objects  are  deleted,  a  <u>rubout</u>  is  written to the lease file.   This is just the same
       declaration, with <b>{</b> <b>deleted;</b> <b>}</b> in the scope of the declaration.   When the lease file is  rewritten,  any
       such  rubouts  that  can  be  eliminated  are eliminated.   It is possible to delete a declaration in the
       <b>dhcpd.conf</b> file; in this case, the rubout can never be eliminated from the <b>dhcpd.leases</b> file.

</pre><h4><b>COMMON</b> <b>STATEMENTS</b> <b>FOR</b> <b>LEASE</b> <b>DECLARATIONS</b></h4><pre>
       While the lease file formats for DHCPv4 and DHCPv6 are different they share many  common  statements  and
       structures.   This  section  describes  the  common statements while the succeeding sections describe the
       protocol specific statements.

       <b>Dates</b>

       A <u>date</u> is specified in two ways, depending on the configuration value for the  <b>db-time-format</b>  parameter.
       If it was set to <u>default</u>, then the <u>date</u> fields appear as follows:

       <u>weekday</u> <u>year</u><b>/</b><u>month</u><b>/</b><u>day</u> <u>hour</u><b>:</b><u>minute</u><b>:</b><u>second</u>

       The  weekday  is  present  to make it easy for a human to tell when a lease expires - it's specified as a
       number from zero to six, with zero being Sunday.  The day of week is  ignored  on  input.   The  year  is
       specified  with  the  century,  so it should generally be four digits except for really long leases.  The
       month is specified as a number starting with 1 for January.  The day of the month is  likewise  specified
       starting  with  1.   The hour is a number between 0 and 23, the minute a number between 0 and 59, and the
       second also a number between 0 and 59.

       Lease times are specified in Universal Coordinated Time (UTC), not in the  local  time  zone.   There  is
       probably  nowhere  in  the  world  where  the times recorded on a lease are always the same as wall clock
       times.  On most unix machines, you can display the current time in UTC by typing <b>date</b> <b>-u</b>.

       If the <b>db-time-format</b> was configured to <u>local</u>, then the <u>date</u> fields appear as follows:

        <b>epoch</b> <u>&lt;seconds-since-epoch&gt;</u><b>;</b> <b>#</b> <u>&lt;day-name&gt;</u> <u>&lt;month-name&gt;</u> <u>&lt;day-number&gt;</u> <u>&lt;hours&gt;</u><b>:</b><u>&lt;minutes&gt;</u><b>:</b><u>&lt;seconds&gt;</u> <u>&lt;year&gt;</u>

       The <u>seconds-since-epoch</u> is as according to the system's local clock (often referred to as  "unix  time").
       The  <b>#</b>  symbol  supplies  a  comment that describes what actual time this is as according to the system's
       configured timezone, at the time the value was written.  It is provided only for human inspection.

       If a lease will never expire, <u>date</u> is <b>never</b> instead of an actual date.

       <b>General</b> <b>Variables</b>

       As part of the processing of a lease information may be attached to the lease structure, for example  the
       DDNS  information  or if you specify a variable in your configuration file.  Some of these, like the DDNS
       information, have specific descriptions below.  For others, such as any you might define, a generic  line
       of the following will be included.

       <b>set</b> <u>variable</u> <b>=</b> <u>value</u><b>;</b>

       The  <b>set</b>  statement sets the value of a variable on the lease.  For general information on variables, see
       the <b><a href="../man5/dhcp-eval.5.html">dhcp-eval</a>(5)</b> manual page.

       <b>DDNS</b> <b>Variables</b>

       <b>The</b> <u>ddns-text</u> <b>and</b> <u>ddns-dhcid</u> <b>variables</b>

       These variables are used to record the value of the client's identification
       record when the server has updated DNS for a particular lease.  The text
       record is used with the interim DDNS update style while the dhcid record
       is used for the standard DDNS update style.

       <b>The</b> <u>ddns-fwd-name</u> <b>variable</b>

       This variable records the value of the name used in
       updating the client's A record if a DDNS update has been successfully
       done by the server.   The server may also have used this name to
       update the client's PTR record.

       <b>The</b> <u>ddns-client-fqdn</u> <b>variable</b>

       If the server is configured both to use the interim or standard DDNS update
       style, and to allow clients to update their own FQDNs, then if the
       client did in fact update its own FQDN, the
       <u>ddns-client-fqdn</u> variable records the name that the client has
       indicated it is using.   This is the name that the server will have
       used to update the client's PTR record in this case.

       <b>The</b> <u>ddns-rev-name</u> <b>variable</b>

       If the server successfully updates the client's PTR record, this
       variable will record the name that the DHCP server used for the PTR
       record.   The name to which the PTR record points will be either the
       <u>ddns-fwd-name</u> or the <u>ddns-client-fqdn</u>.

       <b>Executable</b> <b>Statements</b>

       <b>on</b> <u>events</u> <b>{</b> <u>statements...</u> <b>}</b>
       The <b>on</b> statement records a list of statements to execute if a
       certain event occurs.   The possible events that can occur for an
       active lease are <b>release</b> and <b>expiry</b>.   More than one event
       can be specified - if so, the events are separated by '|' characters.

       The <u>authoring-byte-order</u> statement

         <b>authoring-byte-order</b> [ <u>big-endian</u> | <u>little-endian</u> ] <b>;</b>

         This statement is automatically added to the top of new lease files by
         the server. It indicates the internal byte order of the server.  This
         permits lease files generated on a server with one form of byte order
         to be read by a server with a different form.  Lease files which do not
         contain this entry are simply treated as having the same byte order as
         the server reading them.  If you are migrating lease files generated
         by a server that predates this statement and is of a different byte
         order than the your destination server, you can manually add this
         statement.  It must proceed any lease entries.  Valid values for this
         parameter are <u>little-endian</u> and <u>big-endian</u>.

</pre><h4><b>THE</b> <b>DHCPv4</b> <b>LEASE</b> <b>DECLARATION</b></h4><pre>
       <b>lease</b> <u>ip-address</u> <b>{</b> <u>statements...</u> <b>}</b>

       Each lease declaration includes the single  IP  address  that  has  been  leased  to  the  client.    The
       statements within the braces define the duration of the lease and to whom it is assigned.

       <b>starts</b> <u>date</u><b>;</b>
       <b>ends</b> <u>date</u><b>;</b>
       <b>tstp</b> <u>date</u><b>;</b>
       <b>tsfp</b> <u>date</u><b>;</b>
       <b>atsfp</b> <u>date</u><b>;</b>
       <b>cltt</b> <u>date</u><b>;</b>

       The start and end time of a lease are recorded using the <b>starts</b> and <b>ends</b> statements.   The <b>tstp</b> statement
       is  present  if  the  failover protocol is being used, and indicates what time the peer has been told the
       lease expires.   The <b>tsfp</b> statement is also present if the failover protocol is being used, and indicates
       the lease expiry time that the peer has acknowledged.  The <b>atsfp</b> statement is the actual time  sent  from
       the failover partner.  The <b>cltt</b> statement is the client's last transaction time.

       See the description of dates in the section on common structures.

       <b>hardware</b> <u>hardware-type</u> <u>mac-address</u><b>;</b>

       The  hardware statement records the MAC address of the network interface on which the lease will be used.
       It is specified as a series of hexadecimal octets, separated by colons.

       <b>uid</b> <u>client-identifier</u><b>;</b>

       The <b>uid</b> statement records the client identifier used by the client to acquire the  lease.    Clients  are
       not  required  to send client identifiers, and this statement only appears if the client did in fact send
       one.   Client identifiers are normally an ARP type (1 for ethernet) followed by  the  MAC  address,  just
       like in the <b>hardware</b> <u>statement,</u> <u>but</u> <u>this</u> <u>is</u> <u>not</u> <u>required.</u>

       The client identifier is recorded as a colon-separated hexadecimal list or as a quoted string.   If it is
       recorded  as  a  quoted string and it contains one or more non-printable characters, those characters are
       represented as octal escapes - a backslash character followed by three octal digits.  The format used  is
       determined by the lease-id-format parameter, which defaults to octal.

       <b>client-hostname</b> <u>hostname</u> <b>;</b>

       Most  DHCP  clients  will send their hostname in the <u>host-name</u> option.  If a client sends its hostname in
       this way, the hostname is recorded on the lease with a <b>client-hostname</b> statement.   This is not  required
       by the protocol, however, so many specialized DHCP clients do not send a host-name option.

       <b>binding</b> <b>state</b> <u>state</u><b>;</b>
       <b>next</b> <b>binding</b> <b>state</b> <u>state</u><b>;</b>

       The  <b>binding</b>  <b>state</b> statement declares the lease's binding state.  When the DHCP server is not configured
       to use the failover protocol, a lease's binding state may be <b>active</b>, <b>free</b>  or  <b>abandoned</b>.   The  failover
       protocol  adds some additional transitional states, as well as the <b>backup</b> state, which indicates that the
       lease is available for allocation by the failover secondary. Please see the <b><a href="../man5/dhcpd.conf.5.html">dhcpd.conf</a>(5)</b> manual page for
       more information about abandoned leases.

       The <b>next</b> <b>binding</b> <b>state</b> statement indicates what state the lease will  move  to  when  the  current  state
       expires.   The time when the current state expires is specified in the <u>ends</u> statement.

       <b>rewind</b> <b>binding</b> <b>state</b> <u>state</u><b>;</b>

       This  statement  is part of an optimization for use with failover.  This helps a server rewind a lease to
       the state most recently transmitted to its peer.

       <b>option</b> <b>agent.circuit-id</b> <u>string</u>;
       <b>option</b> <b>agent.remote-id</b> <u>string</u>;

       These statements are used to record the circuit ID and remote ID options sent by the relay agent, if  the
       relay  agent uses the <u>relay</u> <u>agent</u> <u>information</u> <u>option</u>.   This allows these options to be used consistently
       in conditional evaluations even when the client is contacting the server directly rather than through its
       relay agent.

       <b>The</b> <u>vendor-class-identifier</u> <b>variable</b>

       The server retains the client-supplied Vendor Class Identifier option for informational purposes, and  to
       render them in DHCPLEASEQUERY responses.

       <b>bootp;</b>
       <b>reserved;</b>

       If present, they indicate that the BOOTP and RESERVED failover flags (respectively) should be set.  BOOTP
       and  RESERVED dynamic leases are treated differently than normal dynamic leases, as they may only be used
       by the client to which they are currently allocated.

       <b>Other</b> Additional options or executable statements may be included, see the description  of  them  in  the
       section on common structures.

</pre><h4><b>THE</b> <b>DHCPv6</b> <b>LEASE</b> <b>(IA)</b> <b>DECLARATION</b></h4><pre>
       <b>ia_ta</b>  <u>IAID_DUID</u> <b>{</b> <u>statements...</u> <b>}</b>
       <b>ia_na</b>  <u>IAID_DUID</u> <b>{</b> <u>statements...</u> <b>}</b>
       <b>ia_pd</b>  <u>IAID_DUID</u> <b>{</b> <u>statements...</u> <b>}</b>

       Each  lease  declaration  starts  with  a  tag  indicating the type of the lease.  ia_ta is for temporary
       addresses, ia_na is for non-temporary addresses and ia_pd is for prefix delegation.  Following  this  tag
       is the combined IAID and DUID from the client for this lease.

       The  IAID_DUID  value is recorded as a colon-separated hexadecimal list or as a quoted string.   If it is
       recorded as a quoted string and it contains one or more non-printable characters,  those  characters  are
       represented  as octal escapes - a backslash character followed by three octal digits.  The format used is
       governed by the lease-id-format parameter, which defaults to octal.

       <b>cltt</b> <u>date</u><b>;</b>

       The <b>cltt</b> statement is the client's last transaction time.

       See the description of dates in the section on common structures.

       <b>iaaddr</b> <u>ipv6-address</u> <b>{</b> <u>statements...</u> <b>}</b>
       <b>iaprefix</b> <u>ipv6-address/prefix-length</u> <b>{</b> <u>statements...</u> <b>}</b>

       Within a given lease there can be multiple iaaddr and iaprefix statements.
       Each will have either an IPv6 address or an IPv6 prefix (an address and
       a prefix length indicating a CIDR style block of addresses).  The following
       statements may occur Within each iaaddr or iaprefix.

       <b>binding</b> <b>state</b> <u>state</u><b>;</b>

       The <b>binding</b> <b>state</b> statement declares the lease's binding state.
       In DHCPv6 you will normally see this as <u>active</u> or <u>expired</u>.

       <b>preferred-life</b> <u>lifetime</u><b>;</b>

       The IPv6 preferred lifetime associated with this address, in seconds.

       <b>max-life</b> <u>lifetime</u><b>;</b>

       The valid lifetime associated with this address, in seconds.

       <b>ends</b> <u>date</u><b>;</b>

       The end time of the lease.  See the description of dates in the section on
       common structures.

       Additional options or executable statements may be included.  See the description
       of them in the section on common structures.

</pre><h4><b>THE</b> <b>FAILOVER</b> <b>PEER</b> <b>STATE</b> <b>DECLARATION</b></h4><pre>
       The state of any failover peering arrangements is also recorded in the lease  file,  using  the  <b>failover</b>
       <b>peer</b> statement:

       <b>failover</b> <b>peer</b> <u>name</u> <b>state</b> <b>{</b>
       <b>my</b> <b>state</b> <u>state</u> <b>at</b> <u>date</u><b>;</b>
       <b>peer</b> <b>state</b> <u>state</u> <b>at</b> <u>date</u><b>;</b>
       <b>}</b>

       The  states  of  the peer named <u>name</u> is being recorded.   Both the state of the running server (<b>my</b> <b>state</b>)
       and the other failover partner (<u>peer</u> <u>state</u>) are recorded.   The following states are  possible:  <b>unknown-</b>
       <b>state</b>,  <b>partner-down</b>,  <b>normal</b>,  <b>communications-interrupted</b>,  <b>resolution-interrupted</b>,  <b>potential-conflict</b>,
       <b>recover</b>, <b>recover-done</b>, <b>shutdown</b>, <b>paused</b>, and <b>startup</b>.

</pre><h4><b>FILES</b></h4><pre>
       <b>/var/lib/dhcp/dhcpd.leases</b> <b>/var/lib/dhcp/dhcpd.leases~</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/dhcpd.8.html">dhcpd</a>(8), <a href="../man5/dhcp-options.5.html">dhcp-options</a>(5), <a href="../man5/dhcp-eval.5.html">dhcp-eval</a>(5), <a href="../man5/dhcpd.conf.5.html">dhcpd.conf</a>(5), RFC2132, RFC2131.

</pre><h4><b>AUTHOR</b></h4><pre>
       <b><a href="../man8/dhcpd.8.html">dhcpd</a>(8)</b> is maintained  by  ISC.   Information  about  Internet  Systems  Consortium  can  be  found  at:
       <b>https://www.isc.org/</b>

                                                                                                 <u><a href="../man5/dhcpd.leases.5.html">dhcpd.leases</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>