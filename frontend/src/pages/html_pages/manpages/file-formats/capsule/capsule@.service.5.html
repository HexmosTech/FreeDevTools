<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>capsule@.service - System unit for the capsule service manager</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd">systemd_257.7-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       capsule@.service - System unit for the capsule service manager

</pre><h4><b>SYNOPSIS</b></h4><pre>
       capsule@<u>NAME</u>.service

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Service managers for capsules run in capsule@<u>NAME</u>.service system units, with the capsule name as the
       instance identifier. Capsules are way to run additional instances of the service manager, under dynamic
       user IDs, i.e. UIDs that are allocated when the capsule service manager is started, and released when it
       is stopped.

       In many ways capsule@.service is similar to the per-user user@.service service manager, but there are a
       few important distinctions:

       •   The capsule service manager utilizes <u>DynamicUser=</u> (see <b><a href="../man5/systemd.exec.5.html">systemd.exec</a></b>(5)) to allocate a new UID
           dynamically on invocation. The user name is automatically generated from the capsule name, by
           prefixing "c-". The UID is released when the service is terminated. The user service manager on the
           other hand operates under a statically allocated user ID that must be pre-existing, before the user
           service manager is invoked.

       •   User service managers register themselves with <b><a href="../man8/pam.8.html">pam</a></b>(8), capsule service managers do not.

       •   User service managers typically read their configuration from a <u>$HOME</u> directory below <a href="file:/home/">/home/</a>, capsule
           service managers from a <u>$HOME</u> directory below /var/lib/capsules/.

       •   User service managers are collectively contained in the user.slice unit, capsule service managers in
           capsule.slice. Also see <b><a href="../man7/systemd.special.7.html">systemd.special</a></b>(7).

       •   User service managers start the user unit default.target initially. Capsule service managers invoke
           the user unit capsule@.target instead.

       The capsule service manager and the capsule's bus broker can be reached via the <b>--capsule=</b> switch to
       <b><a href="../man1/systemctl.1.html">systemctl</a></b>(1), <b><a href="../man1/systemd-run.1.html">systemd-run</a></b>(1) and <b><a href="../man1/busctl.1.html">busctl</a></b>(1).

       New capsules can be started via a simple <b>systemctl</b> <b>start</b> <b>capsule@</b><u>NAME</u><b>.service</b> command, and stopped via
       <b>systemctl</b> <b>stop</b> <b>capsule@</b><u>NAME</u><b>.service</b>. Starting a capsule will implicitly create a home directory
       /var/lib/capsules/<u>NAME</u>/, if missing. A runtime directory is created as /run/capsules/<u>NAME</u><a href="file:/.">/.</a> To remove
       these resources use <b>systemctl</b> <b>clean</b> <b>capsule@</b><u>NAME</u><b>.service</b>, for example with the <b>--what=all</b> switch.

       The capsule@.service unit invokes a <b>systemd</b> <b>--user</b> service manager process. This means unit files are
       looked for according to the sames rules as for regular user service managers, for example in
       /var/lib/capsules/<u>NAME</u>/.config/systemd/user/.

       Capsule names may be chosen freely by the user, however, they must be suitable as UNIX filenames (i.e.
       255 characters max, and contain no "/"), and when prefixed with "p-" be suitable as a user name matching
       strict POSIX rules, see <b>User/Group</b> <b>Name</b> <b>Syntax</b>[1] for details.

       Added in version 256.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>Example</b> <b>1.</b> <b>Create</b> <b>a</b> <b>new</b> <b>capsule,</b> <b>invoke</b> <b>two</b> <b>programs</b> <b>in</b> <b>it</b> <b>(one</b> <b>interactively),</b> <b>terminate</b> <b>it,</b> <b>and</b> <b>clean</b>
       <b>everything</b> <b>up</b>

           # systemctl start <a href="mailto:capsule@tatze.service">capsule@tatze.service</a>
           # systemd-run --capsule=tatze --unit=sleeptest.service sleep 999
           # systemctl --capsule=tatze status sleeptest.service
           # systemd-run -t --capsule=tatze bash
           # systemctl --capsule=tatze stop sleeptest.service
           # systemctl stop <a href="mailto:capsule@tatze.service">capsule@tatze.service</a>
           # systemctl clean --all <a href="mailto:capsule@tatze.service">capsule@tatze.service</a>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b>user@.<a href="../man5/service.5.html">service</a></b>(5), <b><a href="../man5/systemd.service.5.html">systemd.service</a></b>(5), <b><a href="../man5/systemd.slice.5.html">systemd.slice</a></b>(5), <b><a href="../man5/systemd.exec.5.html">systemd.exec</a></b>(5), <b><a href="../man7/systemd.special.7.html">systemd.special</a></b>(7),
       <b><a href="../man1/systemctl.1.html">systemctl</a></b>(1), <b><a href="../man1/systemd-run.1.html">systemd-run</a></b>(1), <b><a href="../man1/busctl.1.html">busctl</a></b>(1), <b><a href="../man8/pam.8.html">pam</a></b>(8)

</pre><h4><b>NOTES</b></h4><pre>
        1. User/Group Name Syntax
           https://systemd.io/USER_NAMES

systemd 257.7                                                                                <u>CAPSULE@.<a href="../man5/SERVICE.5.html">SERVICE</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>