<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>expire.ctl - Configuration file for article expiration</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/inn2">inn2_2.7.3-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       expire.ctl - Configuration file for article expiration

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The file <u>pathetc</u>/expire.ctl is the default configuration file for <b>expire</b> and <b>expireover</b>, which read it at
       start-up.  It serves two purposes: it defines how long history entries for expired or rejected articles
       are remembered, and it determines how long articles stored on the server are retained.

       Normally, if all of the storage methods used by the server are self-expiring (such as CNFS), all lines
       except the "/remember/" setting (described below) are ignored.  This can be changed with the <b>-N</b> option to
       <b>expire</b> or <b>expireover</b>.

       Blank lines and lines beginning with a number sign ("#") are ignored.  All other lines should be in one
       of two formats.  The order of the file is significant, and the last matching entry will be used.

       The first format specifies how long to keep history entries for articles that aren't present in the news
       spool.  These are articles that have either already expired, or articles which the server rejected (when
       <u>remembertrash</u> is set to true in <u>inn.conf</u>).  There should be one and only one line in this format, which
       looks like:

           /remember/:&lt;days&gt;

       where &lt;days&gt; is a decimal number that specifies the minimum number of days a history record for a given
       Message-ID is retained (from its original posting time), regardless of whether the article is present in
       the spool.  (History entries for articles still present in the spool are always retained.)  Setting it to
       "never" means history records will be retained forever, "0" means history records for articles not
       present in the spool will be purged when expiry programs run.  (This is notably useful in the case you
       need re-injecting articles no longer present in your news spool but considered as duplicate, because
       still present in history: you'll have to set "/remember/" to "0", run the <b>expire</b> process for instance via
       <b>news.daily</b> called with the same parameters as in crontab plus "notdaily", and undo the change in
       <u>expire.ctl</u>.  All previously rejected or removed articles will then not be considered as duplicate if
       their Message-ID is proposed.)

       The primary reason to retain a record of old articles is in case a peer offers old articles that were
       previously accepted but have already expired.  Without a history record for such articles, the server
       would accept the article again and readers would see duplicate articles.  Articles older than a certain
       number of days won't be accepted by the server at all (see <u>artcutoff</u> in <a href="../man5/inn.conf.5.html">inn.conf</a>(5) and the <b>-c</b> flag in
       <a href="../man8/innd.8.html">innd</a>(8)), and this setting should probably match that time period to ensure that the server never accepts
       duplicates.  As the default value for <u>artcutoff</u> is "10" days, it means that "/remember/" should be set to
       "11" days in order to take into account articles whose posting date is one day into the future.

       Most of the lines in this file will be in the second format, which consists of either four or five colon-
       separated fields:

           &lt;pattern&gt;:&lt;flag&gt;:&lt;min&gt;:&lt;default&gt;:&lt;max&gt;

       if <u>groupbaseexpiry</u> is true in <u>inn.conf</u> (the default), and otherwise:

           &lt;classnum&gt;:&lt;min&gt;:&lt;default&gt;:&lt;max&gt;

       All lines must be in the correct format given the current setting of <u>groupbaseexpiry</u>, and therefore the
       two formats cannot co-exist in the same file.

       Normally, a rule matches a newsgroup through the combination of the &lt;pattern&gt; and &lt;flag&gt; fields.
       &lt;pattern&gt; is a <u>uwildmat</u>-style pattern, specifying the newsgroups to which the line is applied.  Note that
       the last matching entry will be used, so general patterns (such as defaults for all groups where
       &lt;pattern&gt; is "*") should appear at the beginning of the file before more specific settings.

       The &lt;flag&gt; field can be used to further limit newsgroups to which the line applies, and should be chosen
       from the following set:

           M   Only moderated groups
           U   Only unmoderated groups
           A   All groups
           X   Remove the article from all groups it appears in

       One of "M", "U", or "A" must be specified.  "X" should be used in combination with one of the other
       letters, not by itself.

       An expiration policy is applied to every article in a newsgroup it matches.  There is no way to set an
       expiration policy for articles crossposted to groups you don't carry that's different than other articles
       in the same group.  Normally, articles are not completely deleted until they expire out of every group to
       which they were posted, but if an article is expired following a rule where &lt;flag&gt; contains "X", it is
       deleted out of all newsgroups to which it was posted immediately.  (If that behaviour is wanted for all
       rules, you may want to give the <b>-e</b> flag to <b>expireoverview</b>.)

       If <u>groupbaseexpiry</u> is instead set to false, there is no &lt;pattern&gt; and &lt;flag&gt; field and the above does not
       apply.  Instead, there is a single &lt;classnum&gt; field, which is either a number matching the storage class
       number specified in <u>storage.conf</u> or "*" to specify a default for all storage classes.  All articles
       stored in a storage class will be expired following the instructions in the line with a matching
       &lt;classnum&gt;, and when articles are expired, they're always removed from all groups to which they were
       posted.

       The remaining three fields are the same in either format, and are used to determine how long an article
       should be kept from its original arrival time (unless the <b>-p</b> flag is passed to <a href="../man8/expire.8.html">expire</a>(8) or
       <a href="../man8/expireover.8.html">expireover</a>(8), in which case its original posting time is used).  Each field should be either a decimal
       number of days (fractions like "8.5" are allowed, but remember that articles are only removed when <b>expire</b>
       or <b>expireover</b> is run, normally once a day by <b>news.daily</b>) or the word "never".

       The middle field, &lt;default&gt;, will be used as the expiration period for most articles.  The other two
       fields, &lt;min&gt; and &lt;max&gt;, only come into play if the article requests a particular expiration date with an
       Expires header field.  Articles with an Expires header field will be expired at the date given in that
       header field, subject to the constraints that they will be retained at least &lt;min&gt; days and no longer
       than &lt;max&gt; days.

       If &lt;min&gt; is set to "never", no article matching that line will ever be expired.  If &lt;default&gt; is set to
       "never", no article matching that line without an explicit Expires header field will ever be expired.  If
       &lt;max&gt; is set to "never", Expires header fields will be honored no matter how far into the future they
       are.

       One should think of the fields as a lower bound, the default, and an upper bound.  Since most articles do
       not have an Expires header field, the second field is the most important and most commonly applied.

       Articles that do not match any expiration rule will not be expired, but this is considered an error and
       will result in a warning.  There should always be a default line (a line with a &lt;pattern&gt; of "*" and
       &lt;flag&gt; of "A", or a line with a &lt;classnum&gt; of "*"), which can explicitly state that articles should never
       expire by default if that's the desired configuration.  The default line should generally be the first
       line of the file (except for "/remember/") so that other expiration rules can override it.

       It is often useful to honor the Expires header field in articles, especially those in moderated groups.
       To do this, set &lt;min&gt; to zero, &lt;default&gt; to whatever normal expiration you wish, and &lt;max&gt; to "never" or
       some large number, like "365" days for a maximum article life of a year.

       To ignore any Expires header field, set all three fields to the same value.

</pre><h4><b>EXAMPLES</b></h4><pre>
       When <u>groupbaseexpiry</u> is true (the default):

           # Keep expired article history for 11 days, matching artcutoff
           # plus one.
           /remember/:11

           # Most articles stay for two weeks, ignoring Expires header fields.
           *:A:14:14:14

           # Accept Expires header fields in moderated newsgroups for up to
           # a year, and retain moderated newsgroups for a bit longer.
           *:M:1:30:365

           # Keep local newsgroups for a long time and local project
           # newsgroups forever.
           example.*:A:1:90:90
           example.project.*:A:never:never:never

       When <u>groupbaseexpiry</u> is false, for class-based expiration:

           # Keep expired article history for 11 days, matching artcutoff
           # plus one.
           /remember/:11

           # Set a default expiration of seven days and honour Expires header
           # fields within reasonable limits.
           *:1:7:35

           # Class 0 is retained for two weeks and honor Expires header fields
           # within reasonable limits.
           0:1:14:65

</pre><h4><b>HISTORY</b></h4><pre>
       Written by Rich $alz &lt;<a href="mailto:rsalz@uunet.uu.net">rsalz@uunet.uu.net</a>&gt; for InterNetNews.  Converted to POD by Russ Allbery
       &lt;<a href="mailto:eagle@eyrie.org">eagle@eyrie.org</a>&gt;.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man8/expire.8.html">expire</a>(8), <a href="../man8/expireover.8.html">expireover</a>(8), <a href="../man5/inn.conf.5.html">inn.conf</a>(5), <a href="../man8/innd.8.html">innd</a>(8), <a href="../man3/libinn_uwildmat.3.html">libinn_uwildmat</a>(3), <a href="../man8/news.daily.8.html">news.daily</a>(8), <a href="../man5/storage.conf.5.html">storage.conf</a>(5).

INN 2.7.3                                          2025-05-19                                      <u><a href="../man5/EXPIRE.CTL.5.html">EXPIRE.CTL</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>