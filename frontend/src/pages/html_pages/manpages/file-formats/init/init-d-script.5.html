<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>init-d-script — interpreter for short and simple init.d scripts</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sysvinit-utils">sysvinit-utils_3.14-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       init-d-script — interpreter for short and simple init.d scripts

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Generic  init.d  script framework to reduce the redundant code in <u><a href="file:/etc/init.d/">/etc/init.d/</a></u>.  The goal is to create an
       init.d script that is Debian and LSB compliant.  When the Debian  policy  conflicts  with  the  LSB,  the
       Debian policy takes precedence.

       This  is  a  simple  example  on  how  init-d-script can be used to start and stop a daemon with PID file
       support:

             #!<a href="file:/bin/sh">/bin/sh</a> <a href="file:/lib/init/init-d-script">/lib/init/init-d-script</a>
             ### BEGIN INIT INFO
             # Provides:          atd
             # Required-Start:    $syslog $time $remote_fs
             # Required-Stop:     $syslog $time $remote_fs
             # Default-Start:     2 3 4 5
             # Default-Stop:      0 1 6
             # Short-Description: run at jobs
             # Description:       Debian init script to start the daemon
             #                    running at jobs.
             ### END INIT INFO
             DAEMON=/usr/sbin/atd

       The following variables affect behaviour of an init script:

       DAEMON         Path to daemon being started.  If the init script is not supposed to  start  any  kind  of
                      daemon,   it   should   be   set   to   “<b>none</b>”   and  the  functions  <b>do_start_override</b>(),
                      <b>do_stop_override</b>() and <b>do_status_override</b>() should be defined instead.

       DAEMON_ARGS    Additional arguments, passed to daemon during start.

       DESC           Full name or short description of the daemon, printed on screen.  If unset, this  variable
                      defaults to the “NAME” value.

       NAME           Additional  environment  variables  are sourced from <u><a href="file:/etc/default/">/etc/default/</a>${NAME}</u>.  If unset, this
                      variable defaults to the basename of the “DAEMON” value.

       COMMAND_NAME   If  this  variable  is  set,  it  is  used  as  argument   to   the   <b>--name</b>   option   of
                      <u><a href="../man8/start-stop-daemon.8.html">start-stop-daemon</a></u>(8).  It may be useful if the value of the “NAME” variable is longer than
                      the command name length supported by the running kernel.  If the value is verbatim “<b>none</b>”,
                      the  command  name  will  not  be  used  to  match the processes.  If unset, this variable
                      defaults to the “NAME” value.

       PIDFILE        Path to file where the process identifier of the started  daemon  will  be  stored  during
                      start.   If the value is verbatim “<b>none</b>”, the process identifier will not be stored in any
                      file.  If this variable is not set, it gets a sensible default  value,  so  it  is  rarely
                      necessary to set this variable explicitly.

       SETPRIV_ARGS   If   this   directive   is   set   and   <u><a href="../man1/setpriv.1.html">setpriv</a></u>(1)   is   available,  the  invocation  of
                      <u><a href="../man8/start-stop-daemon.8.html">start-stop-daemon</a></u>(8) is wrapped in a call to <u><a href="../man1/setpriv.1.html">setpriv</a></u>(1) with the specified arguments. Note
                      that the <b>--chuid</b> argument to <u><a href="../man8/start-stop-daemon.8.html">start-stop-daemon</a></u>(8) requires CAP_SETUID  and  CAP_SETGID  in
                      the bounding capabilities set.

       RELOAD_SIGNAL  Signal number or name (without the SIG prefix) that will be sent to the process on <b>reload</b>.
                      If  the daemon performs reload action upon receiving a SIGHUP signal, this variable should
                      be set to “<b>1</b>” or “<b>HUP</b>”.

       The  variables  RELOAD_ARGS,   START_ARGS   and   STOP_ARGS   are   additional   arguments,   passed   to
       <u><a href="../man8/start-stop-daemon.8.html">start-stop-daemon</a></u>(8) during reload, start and stop actions, to override the default options.

       Additionally,  it is possible to change the behaviour of the resulting shell script by overriding some of
       the internal functions.  To do so, define function  with  an  <b>_override</b>  suffix.   So,  for  example,  to
       override  the  <b>do_status</b>() function, one should define a <b>do_status_override</b>() function.  The <u>exception</u> to
       this rule is the <b>do_reload</b>() function, whose  override  should  be  defined  as-is,  <u>without</u>  the  above-
       mentioned suffix.

       Here is a control flow chart that explains what functions are called and when:

             /etc/init.d/script start
               do_start
                 do_start_prepare # no-op
                 do_start_cmd     # start-stop-daemon is called here
                 do_start_cleanup # no-op

             /etc/init.d/script stop
               do_stop
                 do_stop_prepare # no-op
                 do_stop_cmd     # start-stop-daemon is called here
                 do_stop_cleanup # no-op

             /etc/init.d/script status
               do_status

             /etc/init.d/script reload
               do_reload
                 do_usage
                 exit 3

             /etc/init.d/script force-reload
               do_force_reload
                 do_reload   # if overridden
                 do_restart
                   do_restart_prepare
                   do_stop_cmd
                   do_start_cmd
                   do_restart_cleanup

             /etc/init.d/script restart
               do_force_restart
             /etc/init.d/script try-restart
               if do_status; then
                 do_restart
                   do_restart_prepare
                   do_stop_cmd  # start-stop-daemon is called here
                   do_start_cmd # start-stop-daemon is called here
                   do_restart_cleanup

             /etc/init.d/script &lt;arg&gt;
               do_unknown &lt;arg&gt;
                 exit 3

             /etc/init.d/script
               do_usage

       As  can  be  seen, by default, the script does not support the <b>reload</b> action; it should be implemented by
       the script writer by defining a <b>do_reload</b>() function.

       If <b>do_reload</b>() is not defined but <b>do_reload_cmd</b>()  is,  the  latter  will  be  called  on  <b>reload</b>,  after
       <b>do_reload_prepare</b>() and before <b>do_reload_cleanup</b>().

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/inittab.8.html">inittab</a></u>(8), <u><a href="../man8/service.8.html">service</a></u>(8), <u><a href="../man1/setpriv.1.html">setpriv</a></u>(1), <u><a href="../man8/update-rc.d.8.html">update-rc.d</a></u>(8).

</pre><h4><b>AUTHORS</b></h4><pre>
       Petter Reinholdtsen &lt;<a href="mailto:pere@debian.org">pere@debian.org</a>&gt;

Debian                                          September 3, 2024                               <u><a href="../man5/INIT-D-SCRIPT.5.html">INIT-D-SCRIPT</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>