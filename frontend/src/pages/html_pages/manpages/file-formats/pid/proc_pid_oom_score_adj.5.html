<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>/proc/pid/oom_score_adj - OOM-killer score adjustment</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/manpages">manpages_6.9.1-1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       /proc/pid/oom_score_adj - OOM-killer score adjustment

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u><a href="file:/proc/">/proc/</a></u>pid<u>/oom_score_adj</u> (since Linux 2.6.36)
              This  file can be used to adjust the badness heuristic used to select which process gets killed in
              out-of-memory conditions.

              The badness heuristic assigns a value to each candidate task ranging from 0 (never kill)  to  1000
              (always  kill)  to  determine which process is targeted.  The units are roughly a proportion along
              that range of allowed memory the process may allocate from, based on an estimation of its  current
              memory  and  swap use.  For example, if a task is using all allowed memory, its badness score will
              be 1000.  If it is using half of its allowed memory, its score will be 500.

              There is an additional factor included in the badness score: root processes  are  given  3%  extra
              memory over other tasks.

              The  amount  of "allowed" memory depends on the context in which the OOM-killer was called.  If it
              is due to the memory assigned to the allocating task's cpuset being exhausted, the allowed  memory
              represents the set of mems assigned to that cpuset (see <b><a href="../man7/cpuset.7.html">cpuset</a></b>(7)).  If it is due to a mempolicy's
              node(s)  being  exhausted, the allowed memory represents the set of mempolicy nodes.  If it is due
              to a memory limit (or swap limit) being reached, the allowed  memory  is  that  configured  limit.
              Finally,  if it is due to the entire system being out of memory, the allowed memory represents all
              allocatable resources.

              The value of <u>oom_score_adj</u> is added to the badness score before it is used to determine which task
              to kill.  Acceptable values range from -1000  (OOM_SCORE_ADJ_MIN)  to  +1000  (OOM_SCORE_ADJ_MAX).
              This allows user space to control the preference for OOM-killing, ranging from always preferring a
              certain  task  or  completely disabling it from OOM-killing.  The lowest possible value, -1000, is
              equivalent to disabling OOM-killing entirely for that task, since it will always report a  badness
              score of 0.

              Consequently, it is very simple for user space to define the amount of memory to consider for each
              task.   Setting an <u>oom_score_adj</u> value of +500, for example, is roughly equivalent to allowing the
              remainder of tasks sharing the same system, cpuset, mempolicy, or memory controller  resources  to
              use  at least 50% more memory.  A value of -500, on the other hand, would be roughly equivalent to
              discounting 50% of the task's allowed memory from being considered as scoring against the task.

              For backward compatibility with previous kernels, <u><a href="file:/proc/">/proc/</a></u>pid<u>/oom_adj</u> can still be used to tune  the
              badness score.  Its value is scaled linearly with <u>oom_score_adj</u>.

              Writing  to  <u><a href="file:/proc/">/proc/</a></u>pid<u>/oom_score_adj</u>  or  <u><a href="file:/proc/">/proc/</a></u>pid<u>/oom_adj</u>  will change the other with its scaled
              value.

              The <b><a href="../man1/choom.1.html">choom</a></b>(1) program provides a command-line interface for adjusting the <u>oom_score_adj</u> value of  a
              running process or a newly executed command.

</pre><h4><b>HISTORY</b></h4><pre>
       <u><a href="file:/proc/">/proc/</a></u>pid<u>/oom_adj</u> (since Linux 2.6.11)
              This file can be used to adjust the score used to select which process should be killed in an out-
              of-memory  (OOM) situation.  The kernel uses this value for a bit-shift operation of the process's
              <u>oom_score</u> value: valid values are in the range -16 to +15,  plus  the  special  value  -17,  which
              disables  OOM-killing  altogether  for this process.  A positive score increases the likelihood of
              this process being killed by the OOM-killer; a negative score decreases the likelihood.

              The default value for this file is 0; a new process inherits  its  parent's  <u>oom_adj</u>  setting.   A
              process  must  be privileged (<b>CAP_SYS_RESOURCE</b>) to update this file, although a process can always
              increase its own <u>oom_adj</u> setting (since Linux 2.6.20).

              Since Linux 2.6.36, use of this file  is  deprecated  in  favor  of  <u><a href="file:/proc/">/proc/</a></u>pid<u>/oom_score_adj</u>,  and
              finally removed in Linux 3.7.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/proc.5.html">proc</a></b>(5), <b><a href="../man5/proc_pid_oom_score.5.html">proc_pid_oom_score</a></b>(5)

Linux man-pages 6.9.1                              2024-05-02                          <u><a href="../man5/proc_pid_oom_score_adj.5.html">proc_pid_oom_score_adj</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>