<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>names - Shorewall object names</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/shorewall">shorewall_5.2.8-6_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       names - Shorewall object names

</pre><h4><b>DESCRIPTION</b></h4><pre>
       When you define an object in Shorewall (<b>Zone</b>[1], Logical Interface, <b>ipsets</b>[2], <b>Actions</b>[3], etc., you give
       it a name. Shorewall names start with a letter and consist of letters, digits or underscores ("_").
       Except for Zone names, Shorewall does not impose a limit on name length.

       When an ipset is referenced, the name must be preceded by a plus sign ("+").

       The last character of an interface may also be a plus sign to indicate a wildcard name.

       Physical interface names match names shown by 'ip link ls'; if the name includes an at sign ("@"), do not
       include that character or any character that follows. For example, "sit1@NONE" is referred to as simply
       'sit1".

</pre><h4><b>ZONE</b> <b>AND</b> <b>CHAIN</b> <b>NAMES</b></h4><pre>
       For a pair of zones, Shorewall creates two Netfilter chains; one for connections in each direction. The
       names of these chains are formed by separating the names of the two zones by either "2" or "-".

       Example: Traffic from zone A to zone B would go through chain A2B (think "A to B") or "A-B".

       In Shorewall 4.6, the default separator is "-" but you can override that by setting ZONE_SEPARATOR="2" in
       <b>shorewall.conf</b>[4] (5).

           <b>Note</b>

           Prior to Shorewall 4.6, the default separator was "2".

       Zones themselves have names that begin with a letter and are composed of letters, numerals, and "_". The
       maximum length of a name is dependent on the setting of LOGFORMAT in <b>shorewall.conf</b>[4] (5). See
       <b>shorewall-zones</b>[1] (5) for details.

</pre><h4><b>USING</b> <b>DNS</b> <b>NAMES</b></h4><pre>
           <b>Caution</b>

           I personally recommend strongly against using DNS names in Shorewall configuration files. If you use
           DNS names and you are called out of bed at 2:00AM because Shorewall won't start as a result of DNS
           problems then don't say that you were not forewarned.

       Host addresses in Shorewall configuration files may be specified as either IP addresses or DNS Names.

       DNS names in iptables rules aren't nearly as useful as they first appear. When a DNS name appears in a
       rule, the iptables utility resolves the name to one or more IP addresses and inserts those addresses into
       the rule. So changes in the DNS-&gt;IP address relationship that occur after the firewall has started have
       absolutely no effect on the firewall's rule set.

       For some sites, using DNS names is very risky. Here's an example:

           teastep@ursa:~$ dig pop.gmail.com

           ; &lt;&lt;&gt;&gt; DiG 9.4.2-P1 &lt;&lt;&gt;&gt; pop.gmail.com
           ;; global options:  printcmd
           ;; Got answer:
           ;; -&gt;&gt;HEADER&lt;&lt;- opcode: QUERY, status: NOERROR, id: 1774
           ;; flags: qr rd ra; QUERY: 1, ANSWER: 3, AUTHORITY: 7, ADDITIONAL: 0

           ;; QUESTION SECTION:
           ;pop.gmail.com.               IN A

           ;; ANSWER SECTION:
           pop.gmail.com.          <b>300</b>   IN CNAME gmail-pop.l.google.com.
           gmail-pop.l.google.com. <b>300</b>   IN A     209.85.201.109
           gmail-pop.l.google.com. <b>300</b>   IN A     209.85.201.111

       Note that the TTL is 300 -- 300 seconds is only 5 minutes. So five minutes later, the answer may change!

       So this rule may work for five minutes then suddently stop working:

           #ACTION        SOURCE               DEST              PROTO             DPORT
           POP(ACCEPT)    loc                  net:pop.gmail.com

       There are two options in <b>shorewall[6].<a href="../man5/conf.5.html">conf</a>(5)</b>[4] that affect the use of DNS names in Shorewall[6] config
       files:

       •   DEFER_DNS_RESOLUTION - When set to No, DNS names are resolved at compile time; when set to Yes, DNS
           Names are resolved at runtime.

       •   AUTOMAKE - When set to Yes, <b>start</b>, <b>restart</b> and <b>reload</b> only result in compilation if one of the files
           on the CONFIG_PATH has changed since the the last compilation.

       So by setting AUTOMAKE=Yes, and DEFER_DNS_RESOLUTION=No, compilation will only take place at boot time if
       a change had been make to the config but no <b>restart</b> or <b>reload</b> had taken place. This is clearly spelled
       out in the shorewall.conf manpage. So with these settings, so long as a 'reload' or 'restart' takes place
       after the Shorewall configuration is changes, there should be no DNS-related problems at boot time.

           <b>Important</b>

           When DEFER_DNS_RESOLUTION=No and AUTOMAKE=Yes and a DNS change makes it necessary to recompile an
           existing firewall script, the <b>-c</b> option must be used with the <b>reload</b> or <b>restart</b> command to force
           recompilation.

       If your firewall rules include DNS names then, even if DEFER_DNS_RESOLUTION=No and AUTOMAKE=Yes:

       •   If your /etc/resolv.confis wrong then your firewall may not start.

       •   If your <a href="file:/etc/nsswitch.conf">/etc/nsswitch.conf</a> is wrong then your firewall may not start.

       •   If your Name Server(s) is(are) down then your firewall may not start.

       •   If your startup scripts try to start your firewall before starting your DNS server then your firewall
           may not start.

       •   Factors totally outside your control (your ISP's router is down for example), can prevent your
           firewall from starting.

       •   You must bring up your network interfaces prior to starting your firewall, or the firewall may not
           start.

       Each DNS name must be fully qualified and include a minimum of two periods (although one may be
       trailing). This restriction is imposed by Shorewall to insure backward compatibility with existing
       configuration files.

       <b>Example</b> <b>1.</b> <b>Valid</b> <b>DNS</b> <b>Names</b>

       •   mail.shorewall.net

       •   shorewall.net. (note the trailing period).

       <b>Example</b> <b>2.</b> <b>Invalid</b> <b>DNS</b> <b>Names</b>

       •   mail (not fully qualified)

       •   shorewall.net (only one period)

       DNS names may not be used as:

       •   The server address in a DNAT rule (/etc/shorewall/rules file)

       •   In the ADDRESS column of an entry in /etc/shorewall/masq.

       •

       •   In the /etc/shorewall/nat file.

       These restrictions are imposed by Netfilter and not by Shorewall.

</pre><h4><b>LOGICAL</b> <b>INTERFACE</b> <b>NAMES</b></h4><pre>
       When dealing with a complex configuration, it is often awkward to use physical interface names in the
       Shorewall configuration.

       •   You need to remember which interface is which.

       •   If you move the configuration to another firewall, the interface names might not be the same.

       Beginning with Shorewall 4.4.4, you can use logical interface names which are mapped to the actual
       interface using the <b>physical</b> option in <b>shorewall-interfaces</b>[5] (5).

       Here is an example:

           #ZONE  INTERFACE  OPTIONS
           net    <b>COM_IF</b>     dhcp,blacklist,tcpflags,optional,upnp,routefilter=0,nosmurfs,logmartians=0,<b>physical=eth0</b>
           net    <b>EXT_IF</b>     dhcp,blacklist,tcpflags,optional,routefilter=0,nosmurfs,logmartians=0,proxyarp=1,<b>physical=eth2</b>
           loc    <b>INT_IF</b>     dhcp,logmartians=1,routefilter=1,tcpflags,nets=172.20.1.0/24,<b>physical=eth1</b>
           dmz    <b>VPS_IF</b>     logmartians=1,routefilter=0,routeback,<b>physical=venet0</b>
           loc    <b>TUN_IF</b>     <b>physical=tun+</b>

       In this example, COM_IF is a logical interface name that refers to Ethernet interface eth0, EXT_IF is a
       logical interface name that refers to Ethernet interface eth2, and so on.

       Here are a couple of more files from the same configuration:

       <b>shorewall-masq</b>[6] (5):

           #INTERFACE SOURCE                    ADDRESS

           COMMENT Masquerade Local Network
           <b>COM_IF</b>     0.0.0.0/0
           <b>EXT_IF</b>     !206.124.146.0/24         206.124.146.179:persistent

       <b>shorewall-providers</b>[7] (5)

           #NAME   NUMBER   MARK    DUPLICATE  INTERFACE  GATEWAY         OPTIONS               COPY
           Avvanta 1        0x10000 main       <b>EXT_IF</b>     206.124.146.254 loose,fallback        <b>INT_IF,VPS_IF,TUN_IF</b>
           Comcast 2        0x20000 main       <b>COM_IF</b>     detect          balance               <b>INT_IF,VPS_IF,TUN_IF</b>

       Note in particular that Shorewall translates TUN_IF to tun* in the COPY column.

</pre><h4><b>NOTES</b></h4><pre>
        1. Zone
           https://shorewall.org/manpages/shorewall-zones.html

        2. ipsets
           https://shorewall.org/manpages/ipsets.html

        3. Actions
           https://shorewall.org/manpages/Actions.html

        4. shorewall.conf
           https://shorewall.org/manpages/shorewall.conf.html

        5. shorewall-interfaces
           https://shorewall.org/manpages/shorewall-interfaces.html

        6. shorewall-masq
           https://shorewall.org/manpages/shorewall-masq.html

        7. shorewall-providers
           https://shorewall.org/manpages/shorewall-providers.html

Configuration Files                                09/24/2020                                 <u><a href="../man5/SHOREWALL-NAMES.5.html">SHOREWALL-NAMES</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>