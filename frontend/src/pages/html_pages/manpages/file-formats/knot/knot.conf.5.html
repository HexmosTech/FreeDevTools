<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>knot.conf - Knot DNS configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/knot">knot_3.4.6-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       knot.conf - Knot DNS configuration file

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Configuration  files  for  Knot  DNS  use  simplified  YAML  format. Simplified means that not all of the
       features are supported.

       For the description of configuration items, we have to declare a meaning of the following symbols:

       • <b>INT</b> – Integer

       • <b>STR</b> – Textual string

       • <b>HEXSTR</b> – Hexadecimal string (with <b>0x</b> prefix)

       • <b>BOOL</b> – Boolean value (<b>on</b>/<b>off</b> or <b>true</b>/<b>false</b>)

       • <b>TIME</b> – Number of seconds, an integer with a possible time multiplier suffix (<b>s</b> ~ 1, <b>m</b> ~ 60, <b>h</b> ~ 3600, <b>d</b>
         ~ 24 * 3600, <b>w</b> ~ 7 * 24 * 3600, <b>M</b> ~ 30 * 24 * 3600, <b>y</b> ~ 365 * 24 * 3600)

       • <b>SIZE</b> – Number of bytes, an integer with a possible size multiplier suffix (<b>B</b> ~ 1, <b>K</b> ~ 1024, <b>M</b> ~  1024^2
         or <b>G</b> ~ 1024^3)

       • <b>BASE64</b> – Base64 encoded string

       • <b>ADDR</b> – IPv4 or IPv6 address

       • <b>DNAME</b> – Domain name

       • <b>...</b> – Multi-valued item, order of the values is preserved

       • <b>[</b> <b>]</b> – Optional value

       • <b>|</b> – Choice

       The  configuration  consists  of  several fixed sections and optional module sections. There are 17 fixed
       sections (<b>module</b>, <b>server</b>, <b>xdp</b>, <b>control</b>, <b>log</b>, <b>statistics</b>, <b>database</b>, <b>keystore</b>, <b>key</b>, <b>remote</b>,  <b>remotes</b>,  <b>acl</b>,
       <b>submission</b>,  <b>dnskey-sync</b>,  <b>policy</b>,  <b>template</b>,  <b>zone</b>).   Module sections are prefixed with the <b>mod-</b> prefix
       (e.g. <b>mod-stats</b>).

       Most of the sections (e.g. <b>zone</b>) are sequences of settings blocks. Each  settings  block  begins  with  a
       unique  identifier,  which  can  be  used  as a reference from other sections (such an identifier must be
       defined in advance).

       A multi-valued item can be specified either as a YAML sequence:

          address: [10.0.0.1, 10.0.0.2]

       or as more single-valued items each on an extra line:

          address: 10.0.0.1
          address: 10.0.0.2

       If an item value contains spaces or other special characters, it is necessary to  enclose  such  a  value
       within double quotes <b>"</b> <b>"</b>.

       If  not  specified otherwise, an item representing a file or a directory path may be defined either as an
       absolute path (starting with <b>/</b>), or a path relative to the same directory as the  default  value  of  the
       item.

</pre><h4><b>COMMENTS</b></h4><pre>
       A comment begins with a <b>#</b> character and is ignored during processing.  Also each configuration section or
       sequence block allows a permanent comment using the <b>comment</b> item which is stored in the server beside the
       configuration.

</pre><h4><b>INCLUDING</b> <b>CONFIGURATION</b></h4><pre>
       Another  configuration file or files, matching a pattern, can be included at the top level in the current
       file.

          include: STR

   <b>include</b>
       A path or a matching pattern specifying one or more files that are included at the place of  the  include
       option  position in the configuration.  If the path is not absolute, then it is considered to be relative
       to the current file. The pattern can be  an  arbitrary  string  meeting  POSIX  <u>glob</u>  requirements,  e.g.
       dir/*.conf. Matching files are processed in sorted order.

       <u>Default:</u> not set

</pre><h4><b>CLEARING</b> <b>CONFIGURATION</b> <b>SECTIONS</b></h4><pre>
       It's possible to clear specified configuration sections at given phases of the configuration parsing.

          clear: STR

   <b>clear</b>
       A  matching  pattern  specifying  configuration  sections that are cleared when this item is parsed. This
       allows overriding of existing configuration in the configuration database when including a  configuration
       file or ensures that some configuration wasn't specified in previous includes.

       <b>NOTE:</b>
          For  the  pattern  matching  the  POSIX  function  <u>fnmatch()</u>  is  used.  On  Linux,  the GNU extension
          <u>FNM_EXTMATCH</u> is enabled, which allows extended pattern matching.  Examples:

          • <b>clear:</b> <b>zone</b> – Clears the <b>zone</b> section.

          • <b>clear:</b> <b>mod-*</b> – Clears all module sections.

          • <b>clear:</b> <b>"[!z]*"</b> – Clears all sections not beginning with letter <b>z</b>.

          • <b>clear:</b> <b>!(zone)</b> – (GNU only) Clears all sections except the <b>zone</b> one.

          • <b>clear:</b> <b>@(zone|template)</b> – (GNU only) Clears the <b>zone</b> and <b>template</b> sections.

       <u>Default:</u> not set

</pre><h4><b>MODULE</b> <b>SECTION</b></h4><pre>
       Dynamic modules loading configuration.

       <b>NOTE:</b>
          If configured with non-empty <b>--with-moduledir=path</b> parameter, all shared  modules  in  this  directory
          will be automatically loaded.

          module:
            - id: STR
              file: STR

   <b>id</b>
       A module identifier in the form of the <b>mod-</b> prefix and module name suffix.

   <b>file</b>
       A path to a shared library file with the module implementation.

       <b>WARNING:</b>
          If  the path is not absolute, the library is searched in the set of system directories. See <b>man</b> <b>dlopen</b>
          for more details.

       <u>Default:</u> <b>${libdir}/knot/modules-${version}</b>/module_name.so (or <b>${path}</b>/module_name.so if  configured  with
       <b>--with-moduledir=path</b>)

</pre><h4><b>SERVER</b> <b>SECTION</b></h4><pre>
       General options related to the server.

          server:
              identity: [STR]
              version: [STR]
              nsid: [STR|HEXSTR]
              rundir: STR
              user: STR[:STR]
              pidfile: STR
              udp-workers: INT
              tcp-workers: INT
              background-workers: INT
              async-start: BOOL
              tcp-idle-timeout: TIME
              tcp-io-timeout: INT
              tcp-remote-io-timeout: INT
              tcp-max-clients: INT
              tcp-reuseport: BOOL
              tcp-fastopen: BOOL
              quic-max-clients: INT
              quic-outbuf-max-size: SIZE
              quic-idle-close-timeout: TIME
              remote-pool-limit: INT
              remote-pool-timeout: TIME
              remote-retry-delay: INT
              socket-affinity: BOOL
              udp-max-payload: SIZE
              udp-max-payload-ipv4: SIZE
              udp-max-payload-ipv6: SIZE
              key-file: STR
              cert-file: STR
              edns-client-subnet: BOOL
              answer-rotation: BOOL
              automatic-acl: BOOL
              proxy-allowlist: ADDR[/INT] | ADDR-ADDR ...
              dbus-event: none | running | zone-updated | ksk-submission | dnssec-invalid ...
              dbus-init-delay: TIME
              listen: ADDR[@INT] | STR ...
              listen-quic: ADDR[@INT] ...
              listen-tls: ADDR[@INT] ...

       <b>CAUTION:</b>
          When you change configuration parameters dynamically or via configuration file reload, some parameters
          in  the  Server  section require restarting the Knot server so that the changes take effect. See below
          for the details.

   <b>identity</b>
       An identity of the  server  returned  in  the  response  to  the  query  for  TXT  record  <b>id.server.</b>  or
       <b>hostname.bind.</b> in the CHAOS class (<u>RFC</u> <u>4892</u>).  Set to an empty value to disable.

       <u>Default:</u> FQDN hostname

   <b>version</b>
       A  version of the server software returned in the response to the query for TXT record <b>version.server.</b> or
       <b>version.bind.</b> in the CHAOS class (<u>RFC</u> <u>4892</u>). Set to an empty value to disable.

       <u>Default:</u> server version

   <b>nsid</b>
       A DNS name server identifier (<u>RFC</u> <u>5001</u>). Set to an empty value to disable.

       <u>Default:</u> FQDN hostname at the moment of the daemon start

   <b>rundir</b>
       A path for storing run-time data (PID file, unix sockets, etc.). A non-absolute path is relative  to  the
       <u>knotd</u> startup directory.

       Depending  on  the  usage  of  this  parameter, its change may require restart of the Knot server to take
       effect.

       <u>Default:</u> <b>${localstatedir}/run/knot</b> (configured with <b>--with-rundir=path</b>)

   <b>user</b>
       A system user with an optional system group (<b>user:group</b>) under which the server is run after starting and
       binding to interfaces. Linux capabilities are employed if supported.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>root:root</b>

   <b>pidfile</b>
       A PID file <u>location</u>.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <u>rundir</u><b>/knot.pid</b>

   <b>udp-workers</b>
       A number of UDP workers (threads) used to process incoming queries over UDP.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> equal to the number of online CPUs

   <b>tcp-workers</b>
       A number of TCP workers (threads) used to process incoming queries over TCP.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> equal to the number of online CPUs, default value is at least 10

   <b>background-workers</b>
       A number of workers (threads) used to execute background operations (zone loading, zone updates, etc.).

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> equal to the number of online CPUs, default value is at most 10

   <b>async-start</b>
       If enabled, server doesn't wait for the zones  to  be  loaded  and  starts  responding  immediately  with
       SERVFAIL answers until the zone loads.

       <u>Default:</u> <b>off</b>

   <b>tcp-idle-timeout</b>
       Maximum  idle  time  (in seconds) between requests on an inbound TCP connection.  It means if there is no
       activity on an inbound TCP connection during this limit, the connection is closed by the server.

       <u>Minimum:</u> <b>1</b>

       <u>Default:</u> <b>10</b>

   <b>tcp-io-timeout</b>
       Maximum time (in milliseconds) to receive or send one DNS message over  an  inbound  TCP  connection.  It
       means  this  limit applies to normal DNS queries and replies, incoming DDNS, and <b>outgoing</b> <b>zone</b> <b>transfers</b>.
       The timeout is measured since some data is already available for processing.  Set to 0 for infinity.

       <u>Default:</u> <b>500</b> (milliseconds)

       <b>CAUTION:</b>
          In order to reduce the risk of Slow Loris attacks, it's recommended  setting  this  limit  as  low  as
          possible on public servers.

   <b>tcp-remote-io-timeout</b>
       Maximum  time  (in milliseconds) to receive or send one DNS message over an outbound TCP connection which
       has already been established to a configured remote server.  It means this limit applies to incoming zone
       transfers, sending NOTIFY, DDNS forwarding, and DS check or push. This timeout includes the  time  needed
       for a network round-trip and for a query processing by the remote.  Set to 0 for infinity.

       <u>Default:</u> <b>5000</b> (milliseconds)

   <b>tcp-reuseport</b>
       If enabled, each TCP worker listens on its own socket and the OS kernel socket load balancing is employed
       using  SO_REUSEPORT (or SO_REUSEPORT_LB on FreeBSD). Due to the lack of one shared socket, the server can
       offer higher response rate processing over TCP. However, in the case  of  time-consuming  requests  (e.g.
       zone  transfers  of  a  TLD  zone), enabled reuseport may result in delayed or not being responded client
       requests. So it is advisable to use this option on secondary servers.

       <b>NOTE:</b>
          This option is ignored for UNIX sockets.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>off</b>

   <b>tcp-fastopen</b>
       If enabled, use TCP Fast Open for outbound TCP communication  (client  side):  incoming  zone  transfers,
       sending  NOTIFY,  and  DDNS  forwarding.  This  mode  simplifies  TCP  handshake and can result in better
       networking performance. TCP Fast Open for inbound TCP communication (server side) isn't affected by  this
       configuration as it's enabled automatically if supported by OS.

       <b>NOTE:</b>
          The TCP Fast Open support must also be enabled on the OS level:

          • Linux/macOS: ensure kernel parameter <b>net.ipv4.tcp_fastopen</b> is <b>2</b> or <b>3</b> for server side, and <b>1</b> or <b>3</b> for
            client side.

          • FreeBSD:  ensure  kernel  parameter  <b>net.inet.tcp.fastopen.server_enable</b>  is  <b>1</b> for server side, and
            <b>net.inet.tcp.fastopen.client_enable</b> is <b>1</b> for client side.

       <u>Default:</u> <b>off</b>

   <b>quic-max-clients</b>
       A maximum number of QUIC clients connected in parallel.

       See also <u>quic</u>.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Minimum:</u> <b>128</b>

       <u>Default:</u> <b>10000</b> (ten thousand)

   <b>quic-outbuf-max-size</b>
       Maximum cumulative size of memory used for buffers of unACKed sent messages. This limit is  per  one  UDP
       worker.

       <b>NOTE:</b>
          Set  low  if  little  memory  is  available (together with <u>quic-max-clients</u> since QUIC connections are
          memory-heavy). Set to high value if outgoing zone transfers of big zone over QUIC are expected.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Minimum:</u> <b>1M</b> (1 MiB)

       <u>Default:</u> <b>100M</b> (100 MiB)

   <b>quic-idle-close-timeout</b>
       Time in seconds, after which any idle QUIC connection is gracefully closed.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Minimum:</u> <b>1</b>

       <u>Default:</u> <b>4</b>

   <b>remote-pool-limit</b>
       If nonzero, the server will keep up to this number of outgoing TCP connections open for later  use.  This
       is an optimization to avoid frequent opening of TCP connections to the same remote.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>0</b>

   <b>remote-pool-timeout</b>
       The  timeout  in  seconds after which the unused kept-open outgoing TCP connections to remote servers are
       closed.

       <u>Default:</u> <b>5</b>

   <b>remote-retry-delay</b>
       When a connection attempt times out to some remote address,  this  information  will  be  kept  for  this
       specified  time  (in  milliseconds)  and  other  connections to the same address won't be attempted. This
       prevents repetitive waiting for timeout on an unreachable remote.

       <u>Default:</u> <b>0</b>

   <b>socket-affinity</b>
       If enabled and if SO_REUSEPORT is available on Linux, all configured network sockets are bound to UDP and
       TCP workers in order to increase the networking performance.  This  mode  isn't  recommended  for  setups
       where the number of network card queues is lower than the number of UDP or TCP workers.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>off</b>

   <b>tcp-max-clients</b>
       A  maximum number of TCP clients connected in parallel, set this below the file descriptor limit to avoid
       resource exhaustion.

       <b>NOTE:</b>
          It is advisable to adjust the maximum number of open  files  per  process  in  your  operating  system
          configuration.

       <u>Default:</u> one half of the file descriptor limit for the server process

   <b>udp-max-payload</b>
       Maximum EDNS0 UDP payload size default for both IPv4 and IPv6.

       <u>Default:</u> <b>1232</b>

   <b>udp-max-payload-ipv4</b>
       Maximum EDNS0 UDP payload size for IPv4.

       <u>Default:</u> <b>1232</b>

   <b>udp-max-payload-ipv6</b>
       Maximum EDNS0 UDP payload size for IPv6.

       <u>Default:</u> <b>1232</b>

   <b>key-file</b>
       Path  to a server key PEM file which is used for DNS over QUIC/TLS communication.  A non-absolute path of
       a user specified key file is relative to the <b>/usr/local/etc/knot</b> directory.

       <u>Default:</u> auto-generated key

   <b>cert-file</b>
       Path to a server certificate PEM file which is used for DNS over QUIC/TLS communication.  A  non-absolute
       path is relative to the <b>/usr/local/etc/knot</b> directory.

       <u>Default:</u> one-time in-memory certificate

   <b>edns-client-subnet</b>
       Enable or disable EDNS Client Subnet support. If enabled, responses to queries containing the EDNS Client
       Subnet option always contain a valid EDNS Client Subnet option according to <u>RFC</u> <u>7871</u>.

       <u>Default:</u> <b>off</b>

   <b>answer-rotation</b>
       Enable  or  disable sorted-rrset rotation in the answer section of normal replies.  The rotation shift is
       simply determined by a query ID.

       <u>Default:</u> <b>off</b>

   <b>automatic-acl</b>
       If enabled, <u>automatic</u> <u>ACL</u>  setting  of  configured  remotes  is  considered  when  evaluating  authorized
       operations.

       <u>Default:</u> <b>off</b>

   <b>proxy-allowlist</b>
       An ordered list of IP addresses, network subnets, or network ranges which are allowed as a source address
       of proxied DNS traffic over UDP.  The supported proxy protocol is <u>haproxy</u> <u>PROXY</u> <u>v2</u>.

       <b>NOTE:</b>
          TCP is not supported.

       <u>Default:</u> not set

   <b>dbus-event</b>
       Specification  of  server  or  zone  states  which emit a D-Bus signal on the system bus. The bus name is
       <b>cz.nic.knotd</b>, the object path is <b>/cz/nic/knotd</b>, and the interface name is <b>cz.nic.knotd.events</b>.

       Possible values:

       • <b>none</b> – No signal is emitted.

       • <b>running</b> – There are two possible signals emitted:

         • <b>started</b> when the server is started and all  configured  zones  (including  catalog  zones  and  their
           members) are loaded or successfully bootstrapped.

         • <b>stopped</b> when the server shutdown sequence is initiated.

       • <b>zone-updated</b>  –  The signal <b>zone_updated</b> is emitted when a zone has been updated; the signal parameters
         are <u>zone</u> <u>name</u> and <u>zone</u> <u>SOA</u> <u>serial</u>.

       • <b>keys-updated</b> - The signal <b>keys_updated</b> is emitted  when  a  DNSSEC  key  set  is  updated;  the  signal
         parameter is <u>zone</u> <u>name</u>.

       • <b>ksk-submission</b>  –  The  signal  <b>zone_ksk_submission</b> is emitted if there is a ready KSK present when the
         zone is signed; the signal parameters are <u>zone</u> <u>name</u>, <u>KSK</u> <u>keytag</u>, and <u>KSK</u> <u>KASP</u> <u>id</u>.

       • <b>dnssec-invalid</b> – The signal <b>zone_dnssec_invalid</b> is emitted when DNSSEC  validation  fails;  the  signal
         parameters are <u>zone</u> <u>name</u>, and <u>remaining</u> <u>seconds</u> until an RRSIG expires.

       <b>NOTE:</b>
          This function requires systemd version at least 221 or libdbus.

       <b>TIP:</b>
          A few sample script templates can be found in <u>the</u> <u>project</u> <u>repository</u>.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>none</b>

   <b>dbus-init-delay</b>
       Time  in  seconds which the server waits upon D-Bus initialization to ensure the D-Bus client is ready to
       receive signals.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Minimum:</u> <b>0</b>

       <u>Default:</u> <b>1</b>

   <b>listen</b>
       One or more IP addresses where the server listens for  incoming  queries.   Optional  port  specification
       (default  is  53)  can be appended to each address using <b>@</b> separator. Use <b>0.0.0.0</b> for all configured IPv4
       addresses or <b>::</b> for all configured IPv6 addresses. Filesystem path can  be  specified  for  listening  on
       local  unix  SOCK_STREAM  socket.  Non-absolute  path  (i.e.  not starting with <b>/</b>) is relative to <u>rundir</u>.
       Non-local address binding is automatically enabled if supported by the operating system.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> not set

   <b>listen-quic</b>
       One or more IP addresses (and optionally ports) where the server listens for incoming queries  over  QUIC
       protocol.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> not set

   <b>listen-tls</b>
       One  or  more  IP addresses (and optionally ports) where the server listens for incoming queries over TLS
       protocol (DoT).

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> not set

</pre><h4><b>XDP</b> <b>SECTION</b></h4><pre>
       Various options related to XDP listening, especially TCP.

          xdp:
              listen: STR[@INT] | ADDR[@INT] ...
              udp: BOOL
              tcp: BOOL
              quic: BOOL
              quic-port: INT
              tcp-max-clients: INT
              tcp-inbuf-max-size: SIZE
              tcp-outbuf-max-size: SIZE
              tcp-idle-close-timeout: TIME
              tcp-idle-reset-timeout: TIME
              tcp-resend-timeout: TIME
              route-check: BOOL
              ring-size: INT
              busypoll-budget: INT
              busypoll-timeout: INT

       <b>CAUTION:</b>
          When you change configuration parameters dynamically or via configuration file reload, some parameters
          in the XDP section require restarting the Knot server so that the changes take effect.

   <b>listen</b>
       One or more network device names (e.g. <b>ens786f0</b>) on which the <u>Mode</u> <u>XDP</u> is enabled. Alternatively,  an  IP
       address can be used instead of a device name, but the server will still listen on all addresses belonging
       to  the  same interface!  Optional port specification (default is 53) can be appended to each device name
       or address using <b>@</b> separator.

       Change of this parameter requires restart of the Knot server to take effect.

       <b>CAUTION:</b>
          If XDP workers only process regular DNS traffic over UDP, it is strongly recommended to also <u>listen</u> on
          the addresses which are intended to offer the DNS service, at least to fulfil the DNS requirement  for
          working TCP.

       <b>NOTE:</b>
          Incoming <u>DDNS</u> over XDP isn't supported.  The server always responds with SERVFAIL.

       <u>Default:</u> not set

   <b>udp</b>
       If enabled, DNS over UDP is processed with XDP workers.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>on</b>

   <b>tcp</b>
       If enabled, DNS over TCP traffic is processed with XDP workers.

       The TCP stack limitations:

          • Congestion control is not implemented.

          • Lost packets that do not contain TCP payload may not be resend.

          • Not optimized for transfers of non-trivial zones.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>off</b>

   <b>quic</b>
       If enabled, DNS over QUIC is processed with XDP workers.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>off</b>

   <b>quic-port</b>
       DNS  over  QUIC  will listen on the interfaces configured by <u>listen</u>, but on different port, configured by
       this option.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>853</b>

   <b>tcp-max-clients</b>
       A maximum number of TCP clients connected in parallel.

       <u>Minimum:</u> <b>1024</b>

       <u>Default:</u> <b>1000000</b> (one million)

   <b>tcp-inbuf-max-size</b>
       Maximum cumulative size of memory used for buffers of incompletely received messages.

       <u>Minimum:</u> <b>1M</b> (1 MiB)

       <u>Default:</u> <b>100M</b> (100 MiB)

   <b>tcp-outbuf-max-size</b>
       Maximum cumulative size of memory used for buffers of unACKed sent messages.

       <u>Minimum:</u> <b>1M</b> (1 MiB)

       <u>Default:</u> <b>100M</b> (100 MiB)

   <b>tcp-idle-close-timeout</b>
       Time in seconds, after which any idle connection is gracefully closed.

       <u>Minimum:</u> <b>1</b>

       <u>Default:</u> <b>10</b>

   <b>tcp-idle-reset-timeout</b>
       Time in seconds, after which any idle connection is forcibly closed.

       <u>Minimum:</u> <b>1</b>

       <u>Default:</u> <b>20</b>

   <b>tcp-resend-timeout</b>
       Resend outgoing data packets (with DNS response payload) if not ACKed before this timeout (in seconds).

       <u>Minimum:</u> <b>1</b>

       <u>Default:</u> <b>5</b>

   <b>route-check</b>
       If enabled, routing information from the operating system is considered when  processing  every  incoming
       DNS packet received over the XDP interface:

       • If  the  outgoing interface of the corresponding DNS response differs from the incoming one, the packet
         is processed normally by UDP/TCP workers (XDP isn't used).

       • If the destination address is blackholed, unreachable, or prohibited, the DNS packet is dropped without
         any response.

       • The destination MAC address and possible VLAN tag for the response are taken from the routing system.

       If disabled, symmetrical routing is applied. It means that the query source MAC  address  is  used  as  a
       response destination MAC address. Possible VLAN tag is preserved.

       Change of this parameter requires restart of the Knot server to take effect.

       <b>NOTE:</b>
          This    mode    requires    forwarding    enabled    on    the    loopback    interface   (<b>sysctl</b>   <b>-w</b>
          <b>net.ipv4.conf.lo.forwarding=1</b>  and  <b>sysctl</b>  <b>-w</b>  <b>net.ipv6.conf.lo.forwarding=1</b>).   If   forwarding   is
          disabled, all incoming DNS packets are dropped!

          Only VLAN 802.1Q is supported.

       <u>Default:</u> <b>off</b>

   <b>ring-size</b>
       Size of RX, FQ, TX, and CQ rings.

       Change of this parameter requires restart of the Knot server to take effect.

       <b>NOTE:</b>
          This value should be at least as high as the configured RX size of the network device in the XDP mode.

       <u>Default:</u> <b>2048</b>

   <b>busypoll-budget</b>
       If set to a positive value, preferred busy polling is enabled with the specified budget.

       Change of this parameter requires restart of the Knot server to take effect.

       <b>NOTE:</b>
          Preferred  busy  polling  also  requires  setting  <b>napi_defer_hard_irqs</b>  and <b>gro_flush_timeout</b> for the
          appropriate network interface. E.g.:

              echo 2 | sudo tee <a href="file:/sys/class/net/">/sys/class/net/</a>&lt;interface&gt;/napi_defer_hard_irqs
              echo 200000 | sudo tee <a href="file:/sys/class/net/">/sys/class/net/</a>&lt;interface&gt;/gro_flush_timeout

       <b>NOTE:</b>
          A recommended value is between 8 and 64.

       <u>Default:</u> <b>0</b> (disabled)

   <b>busypoll-timeout</b>
       Timeout in microseconds of preferrred busy polling if enabled by <u>busypoll-budget</u>.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>20</b> (20 microseconds)

</pre><h4><b>CONTROL</b> <b>SECTION</b></h4><pre>
       Configuration of the server control interface.

          control:
              listen: STR
              backlog: INT
              timeout: TIME

   <b>listen</b>
       A UNIX socket <u>path</u> where the server listens for control commands.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <u>rundir</u><b>/knot.sock</b>

   <b>backlog</b>
       The control UNIX socket listen backlog size.

       Change of this parameter requires restart of the Knot server to take effect.

       <u>Default:</u> <b>5</b>

   <b>timeout</b>
       Maximum time (in seconds) the control socket operations can take.  Set to 0 for infinity.

       <u>Default:</u> <b>5</b>

</pre><h4><b>LOG</b> <b>SECTION</b></h4><pre>
       Server can be configured to log to the standard output, standard error output, syslog (or systemd journal
       if systemd is enabled) or into an arbitrary file.

       There are 6 logging severity levels:

       • <b>critical</b> – Non-recoverable error resulting in server shutdown.

       • <b>error</b> – Recoverable error, action should be taken.

       • <b>warning</b> – Warning that might require user action.

       • <b>notice</b> – Server notice or hint.

       • <b>info</b> – Informational message.

       • <b>debug</b> – Debug or detailed message.

       In the case of a missing log section, <b>warning</b> or more serious messages will be logged  to  both  standard
       error output and syslog. The <b>info</b> and <b>notice</b> messages will be logged to standard output.

          log:
            - target: stdout | stderr | syslog | STR
              server: critical | error | warning | notice | info | debug
              control: critical | error | warning | notice | info | debug
              zone: critical | error | warning | notice | info | debug
              quic: critical | error | warning | notice | info | debug
              any: critical | error | warning | notice | info | debug

   <b>target</b>
       A logging output.

       Possible values:

       • <b>stdout</b> – Standard output.

       • <b>stderr</b> – Standard error output.

       • <b>syslog</b> – Syslog or systemd journal.

       • <u>file_name</u> – A specific file.

       With  <b>syslog</b>  target, syslog service is used. However, if Knot DNS has been compiled with systemd support
       and operating system has been booted with systemd, systemd journal is used for logging instead of syslog.

       A <u>file_name</u> may be specified as an absolute path or a path relative to the <u>knotd</u> startup directory.

   <b>server</b>
       Minimum severity level for messages related to general operation of the server to be logged.

       <u>Default:</u> not set

   <b>control</b>
       Minimum severity level for messages related to server control to be logged.

       <u>Default:</u> not set

   <b>zone</b>
       Minimum severity level for messages related to zones to be logged.

       <u>Default:</u> not set

   <b>quic</b>
       Minimum severity level for messages related to QUIC to be logged.

       <u>Default:</u> not set

   <b>any</b>
       Minimum severity level for all message types, except <b>quic</b>, to be logged.

       <u>Default:</u> not set

</pre><h4><b>STATISTICS</b> <b>SECTION</b></h4><pre>
       Periodic server statistics dumping.

          statistics:
              timer: TIME
              file: STR
              append: BOOL

   <b>timer</b>
       A period (in seconds) after which all available statistics metrics will by written to the <u>file</u>.

       <u>Default:</u> not set

   <b>file</b>
       A file <u>path</u> of statistics output in the YAML format.

       <u>Default:</u> <u>rundir</u><b>/stats.yaml</b>

   <b>append</b>
       If enabled, the output will be appended to the <u>file</u> instead of file replacement.

       <u>Default:</u> <b>off</b>

</pre><h4><b>DATABASE</b> <b>SECTION</b></h4><pre>
       Configuration of databases for zone contents, DNSSEC metadata, or event timers.

          database:
              storage: STR
              journal-db: STR
              journal-db-mode: robust | asynchronous
              journal-db-max-size: SIZE
              kasp-db: STR
              kasp-db-max-size: SIZE
              timer-db: STR
              timer-db-max-size: SIZE
              catalog-db: str
              catalog-db-max-size: SIZE

   <b>storage</b>
       A data directory for storing journal, KASP, and timer databases. A non-absolute path is relative  to  the
       <u>knotd</u> startup directory.

       <u>Default:</u> <b>${localstatedir}/lib/knot</b> (configured with <b>--with-storage=path</b>)

   <b>journal-db</b>
       An explicit <u>specification</u> of the persistent journal database directory.

       <u>Default:</u> <u>storage</u><b>/journal</b>

   <b>journal-db-mode</b>
       Specifies journal LMDB backend configuration, which influences performance and durability.

       Possible values:

       • <b>robust</b> – The journal database disk synchronization ensures database durability but is generally slower.

       • <b>asynchronous</b>  –  The  journal  database disk synchronization is optimized for better performance at the
         expense of lower database durability in the case of a crash. This  mode  is  recommended  on  secondary
         servers with many zones.

       <u>Default:</u> <b>robust</b>

   <b>journal-db-max-size</b>
       The  hard  limit  for  the journal database maximum size. There is no cleanup logic in journal to recover
       from reaching this limit. Journal simply starts refusing changes across all zones. Decreasing this  value
       has no effect if it is lower than the actual database file size.

       It  is  recommended  to  limit  <u>journal-max-usage</u>  per-zone instead of <u>journal-db-max-size</u> in most cases.
       Please keep this value larger than the sum of all zones' journal usage limits. See more details regarding
       <u>journal</u> <u>behaviour</u>.

       <b>NOTE:</b>
          This value also influences server's usage of virtual memory.

       <u>Default:</u> <b>20G</b> (20 GiB), or <b>512M</b> (512 MiB) for 32-bit

   <b>kasp-db</b>
       An explicit <u>specification</u> of the KASP database directory.

       <u>Default:</u> <u>storage</u><b>/keys</b>

   <b>kasp-db-max-size</b>
       The hard limit for the KASP database maximum size.

       <b>NOTE:</b>
          This value also influences server's usage of virtual memory.

       <u>Default:</u> <b>500M</b> (500 MiB)

   <b>timer-db</b>
       An explicit <u>specification</u> of the persistent timer database directory.

       <u>Default:</u> <u>storage</u><b>/timers</b>

   <b>timer-db-max-size</b>
       The hard limit for the timer database maximum size.

       <b>NOTE:</b>
          This value also influences server's usage of virtual memory.

       <u>Default:</u> <b>100M</b> (100 MiB)

   <b>catalog-db</b>
       An explicit <u>specification</u> of the zone catalog database  directory.  Only  useful  if  <u>Catalog</u>  <u>zones</u>  are
       enabled.

       <u>Default:</u> <u>storage</u><b>/catalog</b>

   <b>catalog-db-max-size</b>
       The hard limit for the catalog database maximum size.

       <b>NOTE:</b>
          This value also influences server's usage of virtual memory.

       <u>Default:</u> <b>20G</b> (20 GiB), or <b>512M</b> (512 MiB) for 32-bit

</pre><h4><b>KEYSTORE</b> <b>SECTION</b></h4><pre>
       DNSSEC keystore configuration.

          keystore:
            - id: STR
              backend: pem | pkcs11
              config: STR
              key-label: BOOL

   <b>id</b>
       A keystore identifier.

   <b>backend</b>
       A key storage backend type.

       Possible values:

       • <b>pem</b> – PEM files.

       • <b>pkcs11</b> – PKCS #11 storage.

       <u>Default:</u> <b>pem</b>

   <b>config</b>
       A  backend  specific  configuration.  A directory with PEM files (the path can be specified as a relative
       path to <u>kasp-db</u>) or a configuration string for PKCS #11 storage (<u>&lt;pkcs11-uri&gt;</u> <u>&lt;module-path&gt;</u>).   The  PKCS
       #11 URI Scheme is defined in <u>RFC</u> <u>7512</u>.

       <b>NOTE:</b>
          Example configuration string for PKCS #11:

              "pkcs11:token=knot;pin-value=1234 /usr/lib64/pkcs11/libsofthsm2.so"

       <u>Default:</u> <u>kasp-db</u><b>/keys</b>

   <b>key-label</b>
       If  enabled  in combination with the PKCS #11 <u>backend</u>, generated keys are labeled in the form <b>&lt;zone_name&gt;</b>
       <b>KSK|ZSK</b>.

       <u>Default:</u> <b>off</b>

</pre><h4><b>KEY</b> <b>SECTION</b></h4><pre>
       Shared TSIG keys used to authenticate communication with the server.

          key:
            - id: DNAME
              algorithm: hmac-md5 | hmac-sha1 | hmac-sha224 | hmac-sha256 | hmac-sha384 | hmac-sha512
              secret: BASE64

   <b>id</b>
       A key name identifier.

       <b>NOTE:</b>
          This value MUST be exactly the same as the name of the TSIG  key  on  the  opposite  primary/secondary
          server(s).

   <b>algorithm</b>
       A TSIG key algorithm. See <u>TSIG</u> <u>Algorithm</u> <u>Numbers</u>.

       Possible values:

       • <b>hmac-md5</b>

       • <b>hmac-sha1</b>

       • <b>hmac-sha224</b>

       • <b>hmac-sha256</b>

       • <b>hmac-sha384</b>

       • <b>hmac-sha512</b>

       <u>Default:</u> <b>hmac-sha256</b>

   <b>secret</b>
       Shared key secret.

       <u>Default:</u> not set

</pre><h4><b>REMOTE</b> <b>SECTION</b></h4><pre>
       Definitions  of  remote  servers  for  outgoing  connections  (source  of  a  zone transfer, target for a
       notification, etc.).

          remote:
            - id: STR
              address: ADDR[@INT] | STR ...
              via: ADDR[@INT] ...
              quic: BOOL
              tls: BOOL
              key: key_id
              cert-key: BASE64 ...
              block-notify-after-transfer: BOOL
              no-edns: BOOL
              automatic-acl: BOOL

   <b>id</b>
       A remote identifier.

   <b>address</b>
       An ordered list of destination IP addresses or UNIX socket paths which are used  for  communication  with
       the  remote  server.  Non-absolute  path  (i.e.  not  starting  with  <b>/</b>) is relative to <u>rundir</u>.  Optional
       destination port (default is 53 for UDP/TCP and 853 for QUIC) can be appended  to  the  address  using  <b>@</b>
       separator.  The addresses are tried in sequence until the remote is reached.

       <u>Default:</u> not set

       <b>NOTE:</b>
          If the remote is contacted and it refuses to perform requested action, no more addresses will be tried
          for this remote.

   <b>via</b>
       An  ordered  list  of  source  IP addresses which are used as source addresses for communication with the
       remote. For the N-th <u>remote</u> <u>address</u>, the last, but at most N-th, specified <u>via</u> <u>address</u> of the same family
       is used.  This option can help if the server listens on more addresses.  Optional source port (default is
       random) can be appended to the address using <b>@</b> separator.

       <u>Default:</u> not set

       <b>NOTE:</b>
          For the following configuration:

              remote:
                - id: example
                  address: [198.51.100.10, 2001:db8::10, 198.51.100.20, 2001:db8::20]
                  via: [198.51.100.1, 198.51.100.2, 2001:db8::1]

          the (<b>via</b> -&gt; <b>address</b>) mapping is:

          • <b>198.51.100.1</b> -&gt; <b>198.51.100.10</b>

          • <b>2001:db8::1</b> -&gt;  <b>2001:db8::10</b>

          • <b>198.51.100.2</b> -&gt; <b>198.51.100.20</b>

          • <b>2001:db8::1</b> -&gt; <b>2001:db8::20</b>

   <b>quic</b>
       If this option is set, the QUIC protocol will be used for outgoing communication with this remote.

       <b>NOTE:</b>
          One connection per each remote is opened; <u>remote-pool-limit</u> does not take effect  for  QUIC.  However,
          fast QUIC handshakes utilizing obtained session tickets are used for reopening connections to recently
          (up to 1 day) queried remotes.

       <u>Default:</u> <b>off</b>

   <b>tls</b>
       If this option is set, the TLS (DoT) protocol will be used for outgoing communication with this remote.

       <u>Default:</u> <b>off</b>

   <b>key</b>
       A <u>reference</u> to the TSIG key which is used to authenticate the communication with the remote server.

       <u>Default:</u> not set

   <b>cert-key</b>
       An  ordered  list of remote certificate public key PINs. If the list is non-empty, communication with the
       remote is possible only via QUIC protocol and a peer certificate is required. The  peer  certificate  key
       must match one of the specified PINs.

       A  PIN  is  a  unique  identifier  that  represents  the  public  key  of  the  peer certificate.  It's a
       base64-encoded SHA-256 hash of the public key. This identifier remains the same on a certificate renewal.

       <u>Default:</u> not set

   <b>block-notify-after-transfer</b>
       When incoming AXFR/IXFR from this remote (as a primary server), suppress sending NOTIFY messages  to  all
       configured secondary servers.

       <u>Default:</u> <b>off</b>

   <b>no-edns</b>
       If  enabled,  no  OPT  record (EDNS) is inserted to outgoing requests to this remote server. This mode is
       necessary for communication with some broken implementations (e.g. Windows Server 2016).

       <b>NOTE:</b>
          This option effectively disables <u>zone</u> <u>expire</u> timer updates via EDNS EXPIRE  option  specified  in  <u>RFC</u>
          <u>7314</u>.

       <u>Default:</u> <b>off</b>

   <b>automatic-acl</b>
       If enabled, some authorized operations for the remote are automatically allowed based on the context:

       • Incoming NOTIFY is allowed from the remote if it's configured as a <u>primary</u> <u>server</u> for the zone.

       • Outgoing zone transfer is allowed to the remote if it's configured as a <u>NOTIFY</u> <u>target</u> for the zone.

       Automatic ACL rules are evaluated before explicit <u>zone</u> <u>ACL</u> configuration.

       <b>NOTE:</b>
          This functionality requires global activation via <u>automatic-acl</u> in the server section.

       <u>Default:</u> <b>on</b>

</pre><h4><b>REMOTES</b> <b>SECTION</b></h4><pre>
       Definitions of groups of remote servers. Remote grouping can simplify the configuration.

          remotes:
            - id: STR
              remote: remote_id ...

   <b>id</b>
       A remote group identifier.

   <b>remote</b>
       An ordered list of <u>references</u> to remote server definitions.

       <u>Default:</u> not set

</pre><h4><b>ACL</b> <b>SECTION</b></h4><pre>
       Access  control  list  rule  definitions.  An ACL rule is a description of one or more authorized actions
       (zone transfer request, zone change notification, and  dynamic  DNS  update)  which  are  allowed  to  be
       processed or denied. Queries which don't require authorization are always allowed.

          acl:
            - id: STR
              address: ADDR[/INT] | ADDR-ADDR | STR ...
              key: key_id ...
              cert-key: BASE64 ...
              remote: remote_id | remotes_id ...
              action: query | notify | transfer | update ...
              protocol: udp | tcp | tls | quic ...
              deny: BOOL
              update-type: STR ...
              update-owner: key | zone | name
              update-owner-match: sub-or-equal | equal | sub | pattern
              update-owner-name: STR ...

   <b>id</b>
       An ACL rule identifier.

   <b>address</b>
       An  ordered  list  of  IP  addresses, absolute UNIX socket paths, network subnets, or network ranges. The
       query's source address must match one of them. If this item is not set, address match is not required.

       <u>Default:</u> not set

   <b>key</b>
       An ordered list of <u>reference</u>s to TSIG keys. The query must match one of them. If this item  is  not  set,
       transaction authentication is not used.

       <u>Default:</u> not set

   <b>cert-key</b>
       An  ordered  list of remote certificate public key PINs. If the list is non-empty, communication with the
       remote is possible only via QUIC protocol and a peer certificate is required. The  peer  certificate  key
       must match one of the specified PINs.

       A  PIN  is  a  unique  identifier  that  represents  the  public  key  of  the  peer certificate.  It's a
       base64-encoded SHA-256 hash of the public key. This identifier remains the same on a certificate renewal.

       <u>Default:</u> not set

   <b>remote</b>
       An ordered list of references <u>remote</u> and <u>remotes</u>. The query must match one of the remotes.  Specifically,
       one of the remote's addresses and remote's TSIG key if configured must match.

       <b>NOTE:</b>
          This option cannot be specified along with the <u>address</u>, <u>key</u>, or <u>protocol</u> option at one ACL item.

       <u>Default:</u> not set

   <b>action</b>
       An ordered list of allowed, or denied, actions (request types).

       Possible values:

       • <b>query</b>  –  Allow  regular DNS query. As normal queries are always allowed, this action is only useful in
         combination with <u>TSIG</u> <u>key</u>.

       • <b>notify</b> – Allow incoming notify (NOTIFY).

       • <b>transfer</b> – Allow zone transfer (AXFR, IXFR).

       • <b>update</b> – Allow zone updates (DDNS).

       <u>Default:</u> <b>query</b>

   <b>protocol</b>
       List of allowed protocols.

       Possible values:

       • <b>udp</b> – UDP protocol.

       • <b>tcp</b> – TCP protocol.

       • <b>tls</b> – TLS protocol.

       • <b>quic</b> – QUIC protocol.

       <u>Default:</u> not set (any)

   <b>deny</b>
       If enabled, instead of allowing, deny the matching combination of the specified items.

       <u>Default:</u> <b>off</b>

   <b>update-type</b>
       A list of allowed types of Resource Records in a zone update. Every record in an update must match one of
       the specified types.

       <u>Default:</u> not set

   <b>update-owner</b>
       This option restricts possible owners of Resource Records in a zone update by comparing  them  to  either
       the <u>TSIG</u> <u>key</u> identity, the current zone name, or to a list of domain names given by the <u>update-owner-name</u>
       option.  The comparison method is given by the <u>update-owner-match</u> option.

       Possible values:

       • <b>key</b> — The owner of each updated RR must match the identity of the TSIG key if used.

       • <b>name</b> — The owner of each updated RR must match at least one name in the <u>update-owner-name</u> list.

       • <b>zone</b> — The owner of each updated RR must match the current zone name.

       <u>Default:</u> not set

   <b>update-owner-match</b>
       This option defines how the owners of Resource Records in an update are matched to the domain name(s) set
       by the <u>update-owner</u> option.

       Possible values:

       • <b>sub-or-equal</b>  — The owner of each RR in an update must either be equal to or be a subdomain of at least
         one domain name set by <u>update-owner</u>.

       • <b>equal</b> — The owner of each updated RR must be equal to at least one domain name set by <u>update-owner</u>.

       • <b>sub</b> — The owner of each updated RR must be a subdomain of, but MUST NOT be equal to at least one domain
         name set by <u>update-owner</u>.

       • <b>pattern</b> — The owner of each updated RR must match a pattern specified by <u>update-owner</u>. The pattern  can
         be  an  arbitrary  FQDN  or non-FQDN domain name. If a label consists of one <b>*</b> (asterisk) character, it
         matches any label. More asterisk labels can be specified.

       <u>Default:</u> <b>sub-or-equal</b>

   <b>update-owner-name</b>
       A list of allowed owners of RRs in a zone update used with <u>update-owner</u> set to <b>name</b>. Every  listed  owner
       name which is not FQDN (i.e. it doesn't end in a dot) is considered as if it was appended with the target
       zone  name.   Such a relative owner name specification allows better ACL rule reusability across multiple
       zones.

       <u>Default:</u> not set

</pre><h4><b>SUBMISSION</b> <b>SECTION</b></h4><pre>
       Parameters of KSK submission checks.

          submission:
            - id: STR
              parent: remote_id | remotes_id ...
              check-interval: TIME
              timeout: TIME
              parent-delay: TIME

   <b>id</b>
       A submission identifier.

   <b>parent</b>
       A list of references <u>remote</u>  and  <u>remotes</u>  to  parent's  DNS  servers  to  be  checked  for  presence  of
       corresponding  DS records in the case of KSK submission. All of them must have a corresponding DS for the
       rollover to continue. If none is specified, the rollover must be pushed forward manually.

       <u>Default:</u> not set

       <b>TIP:</b>
          A DNSSEC-validating resolver can be set as a parent.

   <b>check-interval</b>
       Interval (in seconds) for periodic checks of DS presence on parent's DNS servers, in the case of the  KSK
       submission.

       <u>Default:</u> <b>1h</b> (1 hour)

   <b>timeout</b>
       After  this  time  period (in seconds) the KSK submission is automatically considered successful, even if
       all the checks were negative or no parents are configured.  Set to 0 for infinity.

       <u>Default:</u> <b>0</b>

   <b>parent-delay</b>
       After successful parent DS check, wait for this period  (in  seconds)  before  continuing  the  next  key
       roll-over step. This delay shall cover the propagation delay of update in the parent zone.

       <u>Default:</u> <b>0</b>

</pre><h4><b>DNSKEY-SYNC</b> <b>SECTION</b></h4><pre>
       Parameters of DNSKEY dynamic-update synchronization.

          dnskey-sync:
            - id: STR
              remote: remote_id | remotes_id ...
              check-interval: TIME

   <b>id</b>
       A dnskey-sync identifier.

   <b>remote</b>
       A  list  of  references <u>remote</u> and <u>remotes</u> to other signers or common master, which the DDNS updates with
       DNSKEY/CDNSKEY/CDS records shall be sent to.

       <u>Default:</u> not set

   <b>check-interval</b>
       If the last DNSKEY sync failed or resulted in any change, re-check the consistence  after  this  interval
       (in seconds) and re-try if needed.

       <u>Default:</u> <b>60</b> (1 minute)

</pre><h4><b>POLICY</b> <b>SECTION</b></h4><pre>
       DNSSEC policy configuration.

          policy:
            - id: STR
              keystore: keystore_id
              manual: BOOL
              single-type-signing: BOOL
              algorithm: rsasha1 | rsasha1-nsec3-sha1 | rsasha256 | rsasha512 | ecdsap256sha256 | ecdsap384sha384 | ed25519 | ed448
              ksk-size: SIZE
              zsk-size: SIZE
              ksk-shared: BOOL
              dnskey-ttl: TIME
              zone-max-ttl: TIME
              keytag-modulo: INT/INT
              ksk-lifetime: TIME
              zsk-lifetime: TIME
              delete-delay: TIME
              propagation-delay: TIME
              rrsig-lifetime: TIME
              rrsig-refresh: TIME
              rrsig-pre-refresh: TIME
              reproducible-signing: BOOL
              nsec3: BOOL
              nsec3-iterations: INT
              nsec3-opt-out: BOOL
              nsec3-salt-length: INT
              nsec3-salt-lifetime: TIME
              signing-threads: INT
              ksk-submission: submission_id
              ds-push: remote_id | remotes_id ...
              cds-cdnskey-publish: none | delete-dnssec | rollover | always | double-ds
              cds-digest-type: sha256 | sha384
              dnskey-management: full | incremental
              offline-ksk: BOOL
              unsafe-operation: none | no-check-keyset | no-update-dnskey | no-update-nsec | no-update-expired ...

   <b>id</b>
       A policy identifier.

   <b>keystore</b>
       A <u>reference</u> to a keystore holding private key material for zones.

       <u>Default:</u> an imaginary keystore with all default values

       <b>NOTE:</b>
          A configured keystore called "default" won't be used unless explicitly referenced.

   <b>manual</b>
       If enabled, automatic key management is not used.

       <u>Default:</u> <b>off</b>

   <b>single-type-signing</b>
       If enabled, Single-Type Signing Scheme is used in the automatic key management mode.

       <u>Default:</u> <b>off</b> (<u>module</u> <u>onlinesign</u> has default <b>on</b>)

   <b>algorithm</b>
       An algorithm of signing keys and issued signatures. See <u>DNSSEC</u> <u>Algorithm</u> <u>Numbers</u>.

       Possible values:

       • <b>rsasha1</b>

       • <b>rsasha1-nsec3-sha1</b>

       • <b>rsasha256</b>

       • <b>rsasha512</b>

       • <b>ecdsap256sha256</b>

       • <b>ecdsap384sha384</b>

       • <b>ed25519</b>

       • <b>ed448</b>

       <b>NOTE:</b>
          Ed448 algorithm is only available if compiled with GnuTLS 3.6.12+ and Nettle 3.6+.

       <u>Default:</u> <b>ecdsap256sha256</b>

   <b>ksk-size</b>
       A length of newly generated KSK or CSK keys.

       <u>Default:</u> <b>2048</b> (rsa*), <b>256</b> (ecdsap256), <b>384</b> (ecdsap384), <b>256</b> (ed25519), <b>456</b> (ed448)

   <b>zsk-size</b>
       A length of newly generated ZSK keys.

       <u>Default:</u> see default for <u>ksk-size</u>

   <b>ksk-shared</b>
       If  enabled,  all  zones  with this policy assigned will share one or more KSKs.  More KSKs can be shared
       during a KSK rollover.

       <b>WARNING:</b>
          As the shared KSK set is bound to the policy <u>id</u>, renaming the policy breaks this  connection  and  new
          shared KSK set is initiated when a new KSK is needed.

       <u>Default:</u> <b>off</b>

   <b>dnskey-ttl</b>
       A TTL value for DNSKEY records added into zone apex.

       <b>NOTE:</b>
          Has influence over ZSK key lifetime.

       <b>WARNING:</b>
          Ensure all DNSKEYs with updated TTL are propagated before any subsequent DNSKEY rollover starts.

       <u>Default:</u> zone SOA TTL

   <b>zone-max-ttl</b>
       Declare (override) maximal TTL value among all the records in zone.

       <b>NOTE:</b>
          It's generally recommended to override the maximal TTL computation by setting this explicitly whenever
          possible.  It's  required  for  <u>DNSSEC</u>  <u>Offline</u>  <u>KSK</u>  and really reasonable when records are generated
          dynamically (e.g. by a <u>module</u>).

       <u>Default:</u> computed after zone is loaded

   <b>keytag-modulo</b>
       Specifies that the keytags of any generated keys shall be congruent  by  specified  modulo.   The  option
       value must be a string in the format <b>R/M</b>, where <b>R</b> <b>&lt;</b> <b>M</b> <b>&lt;=</b> <b>256</b> are positive integers. Whenever a DNSSEC key
       is  generated, it is ensured that <b>keytag</b> <b>%</b> <b>M</b> <b>==</b> <b>R</b>. This prevents keytag conflict in <u>DNSSEC</u> <u>Offline</u> <u>KSK</u> or
       <u>DNSSEC</u> <u>multi-signer</u> (and possibly other) setups.

       <b>NOTE:</b>
          This only applies to newly generated keys when they are generated. Keys from before  this  option  and
          keys imported from elsewhere might not fulfill the policy.

       <u>Default:</u> <b>0/1</b>

   <b>ksk-lifetime</b>
       A period (in seconds) between KSK generation and the next rollover initiation.

       <b>NOTE:</b>
          KSK key lifetime is also influenced by propagation-delay, dnskey-ttl, and KSK submission delay.

          Zero (aka infinity) value causes no KSK rollover as a result.

          This applies for CSK lifetime if single-type-signing is enabled.

       <u>Default:</u> <b>0</b> (infinity)

   <b>zsk-lifetime</b>
       A period (in seconds) between ZSK activation and the next rollover initiation.

       <b>NOTE:</b>
          More exactly, this period is measured since a ZSK is activated, and after this, a new ZSK is generated
          to replace it within following roll-over.

          As a consequence, in normal operation, this results in the period of ZSK generation being <u>zsk-lifetime</u>
          <u>+</u> <u>propagation-delay</u> <u>+</u> <u>dnskey_ttl</u>.

          Zero (aka infinity) value causes no ZSK rollover as a result.

       <u>Default:</u> <b>30d</b> (30 days)

   <b>delete-delay</b>
       Once  a  key  (KSK  or ZSK) is rolled-over and removed from the zone, keep it in the KASP database for at
       least  this  period  (in  seconds)  before  deleting  it  completely.  This  might  be  useful  in   some
       troubleshooting cases when resurrection is needed.

       <u>Default:</u> <b>0</b>

   <b>propagation-delay</b>
       An  extra  delay added for each key rollover step. This value (in seconds) should be high enough to cover
       propagation of data from the primary server to all secondary servers, as well as the duration of  signing
       routine itself and possible outages in signing and propagation infrastructure. In other words, this delay
       should  ensure  that  within  this  period of time after planned change of the key set, all public-facing
       secondaries will already serve new DNSKEY RRSet for sure.

       <b>NOTE:</b>
          Has influence over ZSK key lifetime.

       <u>Default:</u> <b>1h</b> (1 hour)

   <b>rrsig-lifetime</b>
       A validity period (in seconds) of newly issued signatures.

       <b>NOTE:</b>
          The RRSIG's signature inception time is set to 90 minutes in the past. This time period is not counted
          to the signature lifetime.

       <u>Default:</u> <b>14d</b> (14 days)

   <b>rrsig-refresh</b>
       A period (in seconds) how long at least before a signature expiration the signature will be refreshed, in
       order to prevent expired RRSIGs on secondary servers or resolvers' caches.

       <u>Default:</u> 0.1 * <u>rrsig-lifetime</u> + <u>propagation-delay</u> + <u>zone-max-ttl</u>

       If <u>dnssec-validation</u> is enabled:

       <u>Default:</u> <b>1d</b> (1 day)

   <b>rrsig-pre-refresh</b>
       A period (in seconds) how long at most before a signature refresh time the signature might be  refreshed,
       in  order  to  refresh  RRSIGs  in  bigger  batches on a frequently updated zone (avoid re-sign event too
       often).

       <u>Default:</u> <b>1h</b> (1 hour)

   <b>reproducible-signing</b>
       For ECDSA algorithms, generate RRSIG signatures deterministically (<u>RFC</u> <u>6979</u>).  Besides better theoretical
       cryptographic security, this mode allows significant speed-up of loading  signed  (by  the  same  method)
       zones. However, the zone signing is a bit slower.

       <u>Default:</u> <b>off</b>

   <b>nsec3</b>
       Specifies if NSEC3 will be used instead of NSEC.

       <u>Default:</u> <b>off</b>

   <b>nsec3-iterations</b>
       A number of additional times the hashing is performed.

       <u>Default:</u> <b>0</b>

   <b>nsec3-opt-out</b>
       If  set,  NSEC3  records  won't be created for insecure delegations.  This speeds up the zone signing and
       reduces overall zone size.

       <b>WARNING:</b>
          NSEC3 with the Opt-Out bit set no longer works as a proof of non-existence in this zone.

       <u>Default:</u> <b>off</b>

   <b>nsec3-salt-length</b>
       A length of a salt field in octets, which is appended to the original owner name before hashing.

       <u>Default:</u> <b>8</b>

   <b>nsec3-salt-lifetime</b>
       A validity period (in seconds) of newly issued salt field.

       Zero value means infinity.

       Special value <u>-1</u> triggers re-salt every time when active ZSK changes.  This optimizes the number  of  big
       changes to the zone.

       <u>Default:</u> <b>30d</b> (30 days)

   <b>signing-threads</b>
       When signing zone or update, use this number of threads for parallel signing.

       Those are extra threads independent of <u>Background</u> <u>workers</u>.

       <b>NOTE:</b>
          Some steps of the DNSSEC signing operation are not parallelized.

       <u>Default:</u> <b>1</b> (no extra threads)

   <b>ksk-submission</b>
       A reference to <u>submission</u> section holding parameters of KSK submission checks.

       <u>Default:</u> not set

   <b>ds-push</b>
       Optional  references  <u>remote</u>  and  <u>remotes</u>  to  authoritative DNS server of the parent's zone. The remote
       server must be configured to accept DS record updates via DDNS. Whenever a CDS record in the  local  zone
       is  changed, the corresponding DS record is sent as a dynamic update (DDNS) to the parent DNS server. All
       previous DS records are deleted within the DDNS message.  It's possible to manage both child  and  parent
       zones by the same Knot DNS server.

       <b>NOTE:</b>
          This feature requires <u>cds-cdnskey-publish</u> not to be set to <b>none</b>.

       <b>NOTE:</b>
          The mentioned change to CDS record usually means that a KSK roll-over is running and the new key being
          rolled-in is in "ready" state already for the period of <u>propagation-delay</u>.

       <b>NOTE:</b>
          Module <u>Onlinesign</u> doesn't support DS push.

       <b>NOTE:</b>
          When  turning  this  feature on while a KSK roll-over is already running, it might not take effect for
          the already-running roll-over.

       <u>Default:</u> not set

   <b>dnskey-sync</b>
       A reference to <u>dnskey-sync</u> section holding parameters of DNSKEY synchronization.

       <u>Default:</u> not set

   <b>cds-cdnskey-publish</b>
       Controls if and how shall the CDS and CDNSKEY be published in the zone.

       Possible values:

       • <b>none</b> – Never publish any CDS or CDNSKEY records in the zone.

       • <b>delete-dnssec</b> – Publish special CDS and CDNSKEY records indicating turning off DNSSEC.

       • <b>rollover</b> – Publish CDS and CDNSKEY records for ready and not yet active KSK (submission  phase  of  KSK
         rollover).

       • <b>always</b> – Always publish one CDS and one CDNSKEY records for the current KSK.

       • <b>double-ds</b> – Always publish up to two CDS and two CDNSKEY records for ready and/or active KSKs.

       <b>NOTE:</b>
          If  the  zone keys are managed manually, the CDS and CDNSKEY rrsets may contain more records depending
          on the keys available.

       <b>WARNING:</b>
          The <b>double-ds</b> value does not trigger double-DS roll-over method. That method is  only  supported  when
          performed manually, with unset <u>ksk-submission</u>.

       <u>Default:</u> <b>rollover</b>

   <b>cds-digest-type</b>
       Specify digest type for published CDS records.

       Possible values:

       • <b>sha256</b>

       • <b>sha384</b>

       <u>Default:</u> <b>sha256</b>

   <b>dnskey-management</b>
       Specify how the DNSKEY, CDNSKEY, and CDS RRSets at the zone apex are handled when (re-)signing the zone.

       Possible values:

       • <b>full</b>  –  Upon  every  zone (re-)sign, delete all unknown DNSKEY, CDNSKEY, and CDS records and keep just
         those that are related to the zone keys stored in the KASP database.

       • <b>incremental</b> – Keep unknown DNSKEY, CDNSKEY, and CDS records in  the  zone,  and  modify  server-managed
         records incrementally by employing changes in the KASP database.

       <b>NOTE:</b>
          Prerequisites for <u>incremental</u>:

          • The <u>Offline</u> <u>KSK</u> isn't supported.

          • The <u>delete-delay</u> is long enough to cover possible daemon shutdown (e.g. due to server maintenance).

          • Avoided manual deletion of keys with <u>keymgr</u>.

          Otherwise there might remain some DNSKEY records in the zone, belonging to deleted keys.

       <u>Default:</u> <b>full</b>

   <b>offline-ksk</b>
       Specifies if <u>Offline</u> <u>KSK</u> feature is enabled.

       <u>Default:</u> <b>off</b>

   <b>unsafe-operation</b>
       Turn off some DNSSEC safety features.

       Possible values:

       • <b>none</b> – Nothing disabled.

       • <b>no-check-keyset</b>  –  Don't  check  active  keys in present algorithms. This may lead to violation of <u>RFC</u>
         <u>4035#section-2.2</u>.

       • <b>no-update-dnskey</b> – Don't maintain/update DNSKEY, CDNSKEY, and CDS records in the zone apex according to
         KASP database. Juste leave them as they are in the zone.

       • <b>no-update-nsec</b> – Don't maintain/update NSEC/NSEC3 chain. Leave all the records as they are in the zone.

       • <b>no-update-expired</b> – Don't update expired RRSIGs.

       Multiple values may be specified.

       <b>WARNING:</b>
          This mode is intended for DNSSEC experts who understand the corresponding consequences.

       <u>Default:</u> <b>none</b>

</pre><h4><b>TEMPLATE</b> <b>SECTION</b></h4><pre>
       A template is shareable zone settings, which can simplify configuration by reducing duplicates. A special
       default template (with the <u>default</u> identifier) can be  used  for  global  zone  configuration  or  as  an
       implicit configuration if a zone doesn't have another template specified.

          template:
            - id: STR
              global-module: STR/STR ...
              # All zone options (excluding 'template' item)

       <b>NOTE:</b>
          If  an  item  is  explicitly specified both in the referenced template and the zone, the template item
          value is overridden by the zone item value.

   <b>id</b>
       A template identifier.

   <b>global-module</b>
       An ordered list of references to query modules in the form of <u>module_name</u> or <u>module_name/module_id</u>. These
       modules apply to all queries.

       <b>NOTE:</b>
          This option is only available in the <u>default</u> template.

       <u>Default:</u> not set

</pre><h4><b>ZONE</b> <b>SECTION</b></h4><pre>
       Definition of zones served by the server.

          zone:
            - domain: DNAME
              template: template_id
              storage: STR
              file: STR
              master: remote_id | remotes_id ...
              ddns-master: remote_id
              notify: remote_id | remotes_id ...
              acl: acl_id ...
              master-pin-tolerance: TIME
              provide-ixfr: BOOL
              semantic-checks: BOOL | soft
              default-ttl: TIME
              zonefile-sync: TIME
              zonefile-load: none | difference | difference-no-serial | whole
              journal-content: none | changes | all
              journal-max-usage: SIZE
              journal-max-depth: INT
              ixfr-benevolent: BOOL
              ixfr-by-one: BOOL
              ixfr-from-axfr: BOOL
              zone-max-size : SIZE
              adjust-threads: INT
              dnssec-signing: BOOL
              dnssec-validation: BOOL
              dnssec-policy: policy_id
              ds-push: remote_id | remotes_id ...
              zonemd-verify: BOOL
              zonemd-generate: none | zonemd-sha384 | zonemd-sha512 | remove
              serial-policy: increment | unixtime | dateserial
              serial-modulo: INT/INT | +INT | -INT | INT/INT+INT | INT/INT-INT
              reverse-generate: DNAME ...
              refresh-min-interval: TIME
              refresh-max-interval: TIME
              retry-min-interval: TIME
              retry-max-interval: TIME
              expire-min-interval: TIME
              expire-max-interval: TIME
              catalog-role: none | interpret | generate | member
              catalog-template: template_id ...
              catalog-zone: DNAME
              catalog-group: STR
              module: STR/STR ...

   <b>domain</b>
       A zone name identifier.

   <b>template</b>
       A <u>reference</u> to a configuration template.

       <u>Default:</u> not set or <b>default</b> (if the template exists)

   <b>storage</b>
       A data directory for storing zone files. A non-absolute path is relative to the <u>knotd</u> startup directory.

       <u>Default:</u> <b>${localstatedir}/lib/knot</b> (configured with <b>--with-storage=path</b>)

   <b>file</b>
       A <u>path</u> to the zone file. It is also possible to use the following formatters:

       • <b>%c[</b><u>N</u><b>]</b> or <b>%c[</b><u>N</u><b>-</b><u>M</u><b>]</b> – Means the <u>N</u>th character or a sequence of  characters  beginning  from  the  <u>N</u>th  and
         ending  with  the  <u>M</u>th character of the textual zone name (see <b>%s</b>). The indexes are counted from 0 from
         the left. All dots (including the terminal one) are considered. If the character is not available,  the
         formatter has no effect.

       • <b>%l[</b><u>N</u><b>]</b>  –  Means  the  <u>N</u>th label of the textual zone name (see <b>%s</b>). The index is counted from 0 from the
         right (0 ~ TLD).  If the label is not available, the formatter has no effect.

       • <b>%s</b> – Means the current zone name in the textual representation.  The  zone  name  doesn't  include  the
         terminating dot (the result for the root zone is the empty string!).

       • <b>%%</b> – Means the <b>%</b> character.

       <b>WARNING:</b>
          Beware  of special characters which are escaped or encoded in the \DDD form where DDD is corresponding
          decimal ASCII code.

       <u>Default:</u> <u>storage</u><b>/%s.zone</b>

   <b>master</b>
       An ordered list of references <u>remote</u> and <u>remotes</u> to  zone  primary  servers  (formerly  known  as  master
       servers).  Empty value is allowed for template value overriding.

       <u>Default:</u> not set

   <b>ddns-master</b>
       A  <u>reference</u>  to  a zone primary master where DDNS messages should be forwarded to. If not specified, the
       first <u>master</u> server is used.

       If set to the empty value (""), incoming DDNS messages aren't forwarded but are applied to the local zone
       instead, no matter if it is a secondary server. This is only allowed in combination  with  <u>dnssec-signing</u>
       enabled.

       <u>Default:</u> not set

   <b>notify</b>
       An  ordered list of references <u>remote</u> and <u>remotes</u> to secondary servers to which notify message is sent if
       the zone changes.  Empty value is allowed for template value overriding.

       <u>Default:</u> not set

   <b>acl</b>
       An ordered list of <u>references</u> to ACL rules which  can  allow  or  disallow  zone  transfers,  updates  or
       incoming notifies.

       <u>Default:</u> not set

   <b>master-pin-tolerance</b>
       If  set  to  a  nonzero  value on a secondary, always request AXFR/IXFR from the same primary as the last
       time, effectively pinning one primary. Only when another primary is updated  and  the  current  one  lags
       behind  for  the  specified  amount  of  time  (defined by this option in seconds), change to the updated
       primary and force AXFR.

       This option is useful when multiple primaries may have different zone history in their  journals,  making
       it unsafe to combine interchanged IXFR from different primaries.

       <u>Default:</u> <b>0</b> (disabled)

   <b>provide-ixfr</b>
       If  disabled,  the  server is forced to respond with AXFR to IXFR queries.  If enabled, IXFR requests are
       responded normally.

       <u>Default:</u> <b>on</b>

   <b>semantic-checks</b>
       Selects if extra zone semantic checks are used or impacts of the mandatory checks.

       There are several mandatory checks which are always enabled and cannot be  turned  off.  An  error  in  a
       mandatory check causes the zone not to be loaded. Most of the mandatory checks can be weakened by setting
       <b>soft</b>, which allows the zone to be loaded even if the check fails.

       If enabled, extra checks are used. These checks don't prevent the zone from loading.

       The  mandatory  checks  are applied to zone files, zone transfers, and updates via control interface. The
       extra checks are applied to zone files only!

       Mandatory checks:

       • Missing SOA record at the zone apex (<u>RFC</u> <u>1034</u>) (*)

       • An extra record exists together with a CNAME record except for RRSIG and NSEC (<u>RFC</u> <u>1034</u>)

       • Multiple CNAME records with the same owner exist (<u>RFC</u> <u>1034</u>)

       • DNAME record having a record under it (<u>RFC</u> <u>6672</u>)

       • Multiple DNAME records with the same owner exist (<u>RFC</u> <u>6672</u>)

       • NS record exists together with a DNAME record (<u>RFC</u> <u>6672</u>)

       • DS record exists at the zone apex (<u>RFC</u> <u>3658</u>)

       (*) The marked check can't be weakened by the soft mode. All other mandatory checks are  subject  to  the
       optional soft mode.

       Extra checks:

       • Missing NS record at the zone apex

       • Missing glue A or AAAA record

       • Invalid DS or NSEC3PARAM record

       • CDS or CDNSKEY inconsistency

       • All other DNSSEC checks executed during <u>dnssec-validation</u>

       <b>NOTE:</b>
          The  soft  mode allows the refresh event to ignore a CNAME response to a SOA query (malformed message)
          and triggers a zone bootstrap instead.

       <u>Default:</u> <b>off</b>

   <b>default-ttl</b>
       The default TTL value if none  is  specified  in  a  zone  file  or  zone  insertion  using  the  dynamic
       configuration.

       <b>WARNING:</b>
          As  changing  this  value  can  result  in differently parsed zone file(s), the corresponding zone SOA
          serial(s) should be incremented before  reloading  or  committing  the  configuration.  Alternatively,
          setting <u>zonefile-load</u> to <b>difference-no-serial</b> ensures the resulting zone(s) update is correct.

       <u>Default:</u> <b>3600</b>

   <b>zonefile-sync</b>
       The  time  in  seconds after which the current zone in memory will be synced with a zone file on the disk
       (see <u>file</u>). The server will serve the latest zone even after a restart using zone journal, but  the  zone
       file  on  the disk will only be synced after <b>zonefile-sync</b> time has expired (or after manual zone flush).
       This is applicable when the zone is updated via IXFR, DDNS or  automatic  DNSSEC  signing.  In  order  to
       completely  disable  automatic  zone file synchronization, set the value to -1. In that case, it is still
       possible to force a manual zone flush using the <b>-f</b> option.

       <b>NOTE:</b>
          If you are serving large zones with frequent updates where the immediate sync with a zone file is  not
          desirable, increase the value.

       <u>Default:</u> <b>0</b> (immediate)

   <b>zonefile-load</b>
       Selects how the zone file contents are applied during zone load.

       Possible values:

       • <b>none</b> – The zone file is not used at all.

       • <b>difference</b>  –  If the zone contents are already available during server start or reload, the difference
         is computed between them and the contents of the  zone  file.  This  difference  is  then  checked  for
         semantic errors and applied to the current zone contents.

       • <b>difference-no-serial</b>  –  Same as <b>difference</b>, but the SOA serial in the zone file is ignored, the server
         takes care of incrementing the serial automatically.

       • <b>whole</b> – Zone contents are loaded from the zone file.

       When <b>difference</b> is configured and there are no zone contents yet (cold start and no zone contents in  the
       journal), it behaves the same way as <b>whole</b>.

       <u>Default:</u> <b>whole</b>

       <b>NOTE:</b>
          See  <u>Handling</u>  <u>zone</u>  <u>file,</u>  <u>journal,</u>  <u>changes,</u>  <u>serials</u>  for guidance on configuring these and related
          options to ensure reliable operation.

   <b>journal-content</b>
       Selects how the journal shall be used to store zone and its changes.

       Possible values:

       • <b>none</b> – The journal is not used at all.

       • <b>changes</b> – Zone changes history is stored in journal.

       • <b>all</b> – Zone contents and history is stored in journal.

       <u>Default:</u> <b>changes</b>

       <b>WARNING:</b>
          When this option is changed, the journal still contains data respective to the previous  setting.  For
          example,  changing  it  to <b>none</b> does not purge the journal. Also, changing it from <b>all</b> to <b>changes</b> does
          not cause the deletion of the zone-in-journal and the behaviour of the zone loading procedure might be
          different than expected. It is recommended to  consider  purging  the  journal  when  this  option  is
          changed.

   <b>journal-max-usage</b>
       Policy how much space in journal DB will the zone's journal occupy.

       <b>NOTE:</b>
          Journal  DB may grow far above the sum of journal-max-usage across all zones, because of DB free space
          fragmentation.

       <u>Default:</u> <b>100M</b> (100 MiB)

   <b>journal-max-depth</b>
       Maximum history length of the journal.

       <b>NOTE:</b>
          Zone-in-journal changeset isn't counted to the limit.

       <u>Minimum:</u> <b>2</b>

       <u>Default:</u> <b>20</b>

   <b>ixfr-benevolent</b>
       If enabled, incoming IXFR is applied even when it contains  removals  of  non-existing  or  additions  of
       existing records.

       <u>Default:</u> <b>off</b>

   <b>ixfr-by-one</b>
       Within  incoming  IXFR,  process only one changeset at a time, not multiple together.  This preserves the
       complete history in the journal and prevents the merging  of  changesets  when  multiple  changesets  are
       IXFRed  simultaneously. However, this does not prevent the merging (or deletion) of old changesets in the
       journal to save space, as described in <u>journal</u> <u>behaviour</u>.

       This option leads to increased server load when processing IXFR, including network traffic.

       <u>Default:</u> <b>off</b>

   <b>ixfr-from-axfr</b>
       If a primary sends AXFR-style-IXFR upon an IXFR request, compute the difference  and  process  it  as  an
       incremental zone update (e.g. by storing the changeset in the journal).

       <u>Default:</u> <b>off</b>

   <b>zone-max-size</b>
       Maximum  size  of  the  zone.  The  size  is  measured as size of the zone records in wire format without
       compression. The limit is enforced for incoming zone transfers and dynamic updates.

       For incremental transfers (IXFR), the effective limit for the total size of the records in  the  transfer
       is twice the configured value. However the final size of the zone must satisfy the configured value.

       <u>Default:</u> unlimited

   <b>adjust-threads</b>
       Parallelize  internal zone adjusting procedures by using specified number of threads. This is useful with
       huge zones with NSEC3. Speedup observable at server startup and while processing NSEC3 re-salt.

       <u>Default:</u> <b>1</b> (no extra threads)

   <b>dnssec-signing</b>
       If enabled, automatic DNSSEC signing for the zone is turned on.

       <u>Default:</u> <b>off</b>

   <b>dnssec-validation</b>
       If enabled, the zone contents are validated for being correctly signed (including NSEC/NSEC3 chain)  with
       DNSSEC signatures every time the zone is loaded or changed (including AXFR/IXFR).

       When  the validation fails, the zone being loaded or update being applied is cancelled with an error, and
       either none or previous zone state is published.

       List of DNSSEC checks:

       • Every zone RRSet is correctly signed by at least one present DNSKEY.

       • For every RRSIG there are at most 3 non-matching DNSKEYs with the same keytag.

       • DNSKEY RRSet is signed by KSK.

       • <a href="../man3/NSEC.3.html">NSEC</a>(3) RR exists for each name (unless opt-out) with correct bitmap.

       • Every <a href="../man3/NSEC.3.html">NSEC</a>(3) RR is linked to the lexicographically next one.

       The validation is not affected by <u>dnssec-policy</u> configuration, except for <u>signing-threads</u>  option,  which
       specifies the number of threads for parallel validation, and <u>rrsig-refresh</u>, which defines minimal allowed
       remaining RRSIG validity (otherwise a warning is logged).

       <b>NOTE:</b>
          Redundant or garbage NSEC3 records are ignored.

          This mode is not compatible with <u>dnssec-signing</u>.

       <u>Default:</u> not set

   <b>dnssec-policy</b>
       A <u>reference</u> to DNSSEC signing policy.

       <b>NOTE:</b>
          A configured policy called "default" won't be used unless explicitly referenced.

       <u>Default:</u> an imaginary policy with all default values

   <b>ds-push</b>
       Per  zone  configuration  of  <u>ds-push</u>.  This  option overrides possible per policy option. Empty value is
       allowed for template value overriding.

       <u>Default:</u> not set

   <b>zonemd-verify</b>
       On each zone load/update, verify that ZONEMD is present in the zone and valid.

       <b>NOTE:</b>
          Zone digest calculation may take much time and CPU on large zones.

       <u>Default:</u> <b>off</b>

   <b>zonemd-generate</b>
       On each zone update, calculate ZONEMD and put it into the zone.

       Possible values:

       • <b>none</b> – No action regarding ZONEMD.

       • <b>zonemd-sha384</b> – Generate ZONEMD using SHA384 algorithm.

       • <b>zonemd-sha512</b> – Generate ZONEMD using SHA512 algorithm.

       • <b>remove</b> – Remove any ZONEMD from the zone apex.

       <u>Default:</u> <b>none</b>

   <b>serial-policy</b>
       Specifies how the zone serial is updated after a dynamic update  or  automatic  DNSSEC  signing.  If  the
       serial is changed by the dynamic update, no change is made.

       Possible values:

       • <b>increment</b> – The serial is incremented according to serial number arithmetic.

       • <b>unixtime</b> – The serial is set to the current unix time.

       • <b>dateserial</b>  –  The  10-digit  serial  (YYYYMMDDnn) is incremented, the first 8 digits match the current
         iso-date.

       <b>NOTE:</b>
          If the resulting serial for <b>unixtime</b> or <b>dateserial</b> is lower than or equal to the current serial  (this
          happens e.g. when migrating from other policy or frequent updates), the serial is incremented instead.

          To  avoid  user  confusion, use <b>dateserial</b> only if you expect at most 100 updates per day per zone and
          <b>unixtime</b> only if you expect at most one update per second per zone.

          Generated catalog zones use <b>unixtime</b> only.

       <u>Default:</u> <b>increment</b> (<b>unixtime</b> for generated catalog zones)

   <b>serial-modulo</b>
       The option value is a string consisting of two parts (with no separator between them), each of  which  is
       optional.

       The  first part specifies that the zone serials must be congruent modulo the specified value.  The format
       is <b>R/M</b>, where <b>R</b> <b>&lt;</b> <b>M</b> <b>&lt;=</b> <b>256</b> are positive integers. Whenever the zone serial is incremented, it is  ensured
       that  <b>serial</b>  <b>%</b> <b>M</b> <b>==</b> <b>R</b>. This can be useful in the case of multiple inconsistent primaries, where distinct
       zone serial sequences prevent cross-master-IXFR by any secondary.

       <b>NOTE:</b>
          Because the zone serial effectively always increments by <b>M</b> instead of <b>1</b>, it is not recommended to  use
          <b>dateserial</b> or even <b>unixtime</b> <u>serial-policy</u> in the case of rapidly updated zone.

       The  second  part  specifies  a numeric shift for the generated zone serial.  The shift is formatted as a
       signed integer, including the sign (<b>+</b> or <b>-</b>).  It is mostly useful with <b>unixtime</b> <u>serial-policy</u>, where  the
       generated zone serial is shifted relative to the Unix time.

       <b>NOTE:</b>
          In  order  to ensure the congruent policy, this option is only allowed with <u>DNSSEC</u> <u>signing</u> <u>enabled</u> and
          <u>zonefile-load</u> to be either <b>difference-no-serial</b> or <b>none</b>.

       <u>Default:</u> <b>0/1+0</b>

   <b>reverse-generate</b>
       This option triggers the automatic generation of reverse PTR records  based  on  A/AAAA  records  in  the
       specified zones. The entire generated zone is automatically stored in the journal.

       Current limitations:

       • Is slow for large zones (even when changing a little).

       • Recomputes all reverse records upon any change in any of the reversed zones.

       <u>Default:</u> none

   <b>refresh-min-interval</b>
       Forced minimum zone refresh interval (in seconds) to avoid flooding primary server.

       <u>Minimum:</u> <b>2</b>

       <u>Default:</u> <b>2</b>

   <b>refresh-max-interval</b>
       Forced maximum zone refresh interval (in seconds).

       <u>Default:</u> not set

   <b>retry-min-interval</b>
       Forced minimum zone retry interval (in seconds) to avoid flooding primary server.

       <u>Minimum:</u> <b>1</b>

       <u>Default:</u> <b>1</b>

   <b>retry-max-interval</b>
       Forced maximum zone retry interval (in seconds).

       <u>Default:</u> not set

   <b>expire-min-interval</b>
       Forced minimum zone expire interval (in seconds) to avoid flooding primary server.

       <u>Minimum:</u> <b>3</b>

       <u>Default:</u> <b>3</b>

   <b>expire-max-interval</b>
       Forced maximum zone expire interval (in seconds).

       <u>Default:</u> not set

   <b>catalog-role</b>
       Trigger zone catalog feature. Possible values:

       • <b>none</b> – Not a catalog zone.

       • <b>interpret</b>  –  A  catalog  zone  which  is  loaded  from  a  zone file or XFR, and member zones shall be
         configured based on its contents.

       • <b>generate</b> – A catalog zone whose contents are generated according to assigned member zones.

       • <b>member</b> – A member zone that is assigned to one generated catalog zone.

       <b>NOTE:</b>
          If set to <b>generate</b>, the <u>zonefile-load</u> option has no effect since a zone file is never loaded.

       <u>Default:</u> <b>none</b>

   <b>catalog-template</b>
       For the catalog member zones, the specified configuration template will be applied.

       Multiple catalog templates may be defined. The first one is used unless the member  zone  has  the  <u>group</u>
       property defined, matching another catalog template.

       <b>NOTE:</b>
          This option must be set if and only if <u>catalog-role</u> is <u>interpret</u>.

          Nested  catalog  zones aren't supported. Therefore catalog templates can't contain <u>catalog-role</u> set to
          <b>interpret</b> or <b>generate</b>.

       <u>Default:</u> not set

   <b>catalog-zone</b>
       Assign this member zone to specified generated catalog zone.

       <b>NOTE:</b>
          This option must be set if and only if <u>catalog-role</u> is <u>member</u>.

          The referenced catalog zone must exist and have <u>catalog-role</u> set to <u>generate</u>.

       <u>Default:</u> not set

   <b>catalog-group</b>
       Assign this member zone to specified catalog group (configuration template).

       <b>NOTE:</b>
          This option has effect if and only if <u>catalog-role</u> is <u>member</u>.

       <u>Default:</u> not set

   <b>module</b>
       An ordered list of references to query modules in the form of <u>module_name</u> or <u>module_name/module_id</u>. These
       modules apply only to the current zone queries.

       <u>Default:</u> not set

</pre><h4><b>AUTHOR</b></h4><pre>
       CZ.NIC Labs &lt;https://www.knot-dns.cz&gt;

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2010–2025, CZ.NIC, z.s.p.o.

3.4.6                                              2025-04-10                                       <u><a href="../man5/KNOT.CONF.5.html">KNOT.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>