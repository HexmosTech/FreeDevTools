<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>/etc/dkim-rotate/instance.zone - dkim-rotate configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dkim-rotate">dkim-rotate_1.1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>/etc/dkim-rotate/</b><u>instance</u><b>.zone</b> - <b>dkim-rotate</b> configuration file

</pre><h4><b>INTRODUCTION</b></h4><pre>
       The config file for each instance is <b>/etc/dkim-rotate/</b><u>instance</u><b>.zone</b> for any <u>instance</u>.  (When scanning for
       instances, only ones matching <b>[a-z][-_0-9a-z]*</b> are considered.)

       Conventionally, the usual default instance is <b>/etc/dkim-rotate/dkim.conf</b>.

       Each configuration file is, broadly speaking, in DNS zonefile syntax.

       The config file should contain a <b>SOA</b>, suitable <b>NS</b> records, and any other records thought desirable.

       The  string  <b>;!SERIAL</b>  must  appear,  immediately  after some digits.  It should appear once, in the <b>SOA</b>.
       <b>dkim-rotate</b> will replace the digits with a suitable serial number.  The config file value is also used as
       the starting point for a new instance.

       dkim-rotate will make a DNS zone out of this file, adding an DKIM <b>TXT</b> RR for each selector.  (Directly in
       the zone, i.e., the generated zonefile will contain for example <b>f</b> <b>TXT</b> <b>...</b>).

       The zonefile’s prevailing TTL applies to the generated RRS, and can therefore be adjusted using the name‐
       server’s <b>$TTL</b> feature.

       The config file should <u>not</u> normally contain <b>MX</b> records, because the <b>dkim-rotate</b>-managed  zonefile  should
       usually  be  a different zone to your principal mail domain zone(s).  (See the Principles of Operation in
       <a href="../man7/dkim-rotate.7.html">dkim-rotate</a>(7).)

       <b>$ORIGIN</b> may be used to cause the <b>dkim-rotate</b>-generated RRs to appear as sub-labels of a sub-domain.

       The config file also contains some special directives, on lines starting with <b>!</b>, which contain  the  con‐
       figuration  for dkim-rotate.  These will be stripped out so that they don’t appear in the output zonefile
       gneerated by dkim-rotate.

       The parameters for an existing instance may safely be adjusted.  (Although,  reducing  <b>max_selector</b>  does
       not take full effect immediately.)

</pre><h4><b>IMPORTANT</b> <b>DIRECTIVES</b></h4><pre>
       <b>!</b> <b>pub_url</b> <u>url-string</u>
              URL  at  which our published private keys are available.  This should be a public URL at which the
              directory <u>instance_var_dir</u><b>/pub/</b> is accessible.

              This is used:

              • For a <b>n=</b> field in the generated DKIM TXT RRs.

              • For the <b>header_note</b> and various <b>url</b> outputs in the MTA config.

              • To check that a key we are trying to reveal is actually revealed.

              A warning will be generated if a supposedly-revealed key is found not to be accessible.

              <b>-</b> can be used to indicate “none”.  This will also suppress the corresponding note in the generated
              TXT RRs, and the informational outputs in the MTA configuration.

       <b>!</b> <b>mta_group</b> <u>identifier</u>

              Group that ought to be able to access DKIM private keys
              This should be a group which the MTA will have
              when it wishes to make a signature.

              For an Exim installation on Debian, `Debian-exim` is correct.

              This is used for the group ownership of
               `/var/lib/dkim-rotate/INSTANCE/priv`.

              The permissions `0750` will be used
              if dkim-rotate needs to create the directory.
              (Otherwise dkim-rotate will just check that the directory
              doesn't have global execute.)

              If `mta_group` is set to `-`,
              dkim-rotate will skip the chgrp,
              and (if it is creating the directory) create as `0700`.

              (Within the `priv/` directory,
              the files have a world-readable mode,
              so it is the directory permission which controls access.)

</pre><h4><b>TUNING</b> <b>DIRECTIVES</b></h4><pre>
       <b>!</b> <b>max_selector</b> <u>selector</u>
              Indicates number of <b>CNAME</b>s (selectors) to use.  <u>selector</u> should be a lowercase letter  (indicating
              that  <b>a</b> to <u>selector</u> inclusive can be used) or a positive integer (incidating that that many should
              be used).  (If this number is revised downwards after deployment, it may take a little  while  for
              the extra names to stop being used.)

              Default is <b>12</b> (or, equivalently, <b>l</b>).

              If  the  configuration for an existing instance is changed, to reduce <b>max_selector</b>, it will take a
              little while for <b>dkim-rotate</b> to stop using of the to-be-abolished selectors:

              While the number of selectors in use is more than configured,  <b>dkim-rotate</b>  will  print  warnings.
              <b>dkim-rotate</b>  <b>--status</b> can be used to verify whether old selectors are no longer in use, and there‐
              fore whether it is OK to remove associated DNS aliases etc.

       <b>!</b> <b>dns_lag</b> <u>duration</u>
              Time after successful installation of new zonefile, and nameserver reload, after which the new DNS
              entries are expected to be visible to all clients.

              <u>duration</u> is a number (possibly with decimal fraction) followed by one of the units <b>s</b> <b>m</b> <b>h</b> <b>d</b> <b>w</b>.

              Default is <b>4h</b>.

       <b>!</b> <b>email_lag</b> <u>duration</u>
              Time after successful installation of new MTA configuration, and config  reload,  after  which  we
              will  assume  that  all  messages signed with the key indicated by the previous configuration have
              been delivered, or bounced.

              Default is <b>88h</b>.

       <b>!</b> <b>instance_var_dir</b> <u>directory</u>
              Where to store statefiles, MTA configuration,  zone  files,  etc.   Default  is  <b>/var/lib/dkim-ro‐</b>
              <b>tate/</b><u>instance</u>.

              If <u>instance</u> specified on the command line as a pathname, there is no default for <b>instance_var_dir</b>:
              it must then be specified in the config file.

       <b>!</b> <b>dkim_txt</b> <u>tag</u> <u>list</u>

              The values for the `TXT` RR, in domainkeys tag-list format,
              not including the `p=`.
              (see [RFC6376](https://datatracker.ietf.org/doc/html/rfc6376#section-3.6.1)).

              dkim-rotate will append `; n=...; p=...` to this.
              Default is `v=DKIM1; h=sha256; s=email`.

       <b>!</b> <b>rsa_bits</b> <u>integer</u>

              Number of bits in generated RSA keys.
              (Currently, only RSA is supported.)
              Defaults to 2048.

       <b>!</b> <b>dns_reload</b> <u>shell</u> <u>command</u>

              Command to run to reload the nameserver,
              after the zonefile has been updated.
              Default: `rndc reload &gt;/dev/null`.

       <b>!</b> <b>mta_reload</b> <u>shell</u> <u>command</u>

              Command to run to reload the MTA,
              after the DKIM signing configuration has been updated.
              Default: `true` (meaning, nothing needs to be done).

</pre><h4><b>AUTHOR</b></h4><pre>
       Copyright 2022 Ian Jackson and contributors to dkim-rotate.
       There is NO WARRANTY.
       <b>SPDX-License-Identifier:</b> <b>GPL-3.0-or-later</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>/usr/share/doc/dkim-rotate/examples/example.zone</b>
              Very minimal example configuration.

       <b>/usr/share/doc/dkim-rotate/examples/crontab</b>
              Example configuration for cron.

       <a href="../man7/dkim-rotate.7.html">dkim-rotate</a>(7)
              Principles of Operation

       <a href="../man1/dkim-rotate.1.html">dkim-rotate</a>(1)
              Command line reference

       RFC6376
              DKIM Signatures

       BIND9 Zone File format
              &lt;https://downloads.isc.org/isc/bind9/9.18.5/doc/arm/html/chapter3.html#soa-rr&gt;

                                                                                                  <u><a href="../man5/dkim-rotate.5.html">dkim-rotate</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>