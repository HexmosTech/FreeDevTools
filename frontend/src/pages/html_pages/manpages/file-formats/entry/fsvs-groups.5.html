<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using grouping patterns -</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/fsvs">fsvs_1.2.12-1build2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Using grouping patterns -

       Patterns are used to define groups for new entries; a group can be used to ignore the given entries, or
       to automatically set properties when the entry is taken on the entry list.  Patterns are used to define
       groups for new entries; a group can be used to ignore the given entries, or to automatically set
       properties when the entry is taken on the entry list.

       So the auto-props are assigned when the entry gets put on the internal list; that happens for the <b>add</b>,
       <b>prop-set</b> or <b>prop-del</b>, and of course <b>commit</b> commands.
        To override the auto-props of some new entry just use the property commands.

</pre><h4><b>Overview</b></h4><pre>
       When FSVS walks through your working copy it tries to find <b>new</b> (ie. not yet versioned) entries. Every <b>new</b>
       entry gets tested against the defined grouping patterns (in the given order!); if a pattern matches, the
       corresponding group is assigned to the entry, and no further matching is done.

       See also <b>entry</b> <b>statii</b>.

   <b>Predefined</b> <b>group</b> <b>1:</b> <b>'ignore'</b>
       If an entry gets a group named 'ignore' assigned, it will not be considered for versioning.

       This is the only <b>really</b> special group name.

   <b>Predefined</b> <b>group</b> <b>2:</b> <b>'take'</b>
       This group mostly specifies that no further matching is to be done, so that later <b>ignore</b> patterns are not
       tested.

       Basically the 'take' group is an ordinary group like all others; it is just predefined, and available
       with a <b>short-hand</b> <b>notation</b>.

</pre><h4><b>Why</b> <b>should</b> <b>I</b> <b>ignore</b> <b>files?</b></h4><pre>
       Ignore patterns are used to ignore certain directory entries, where versioning makes no sense. If you're
       versioning the complete installation of a machine, you wouldn't care to store the contents of <a href="file:/proc">/proc</a> (see
       man 5 proc), or possibly because of security reasons you don't want <a href="file:/etc/shadow">/etc/shadow</a> , /etc/sshd/ssh_host_*key
       , and/or other password- or key-containing files.

       Ignore patterns allow you to define which directory entries (files, subdirectories, devices, symlinks
       etc.) should be taken, respectively ignored.

</pre><h4><b>Why</b> <b>should</b> <b>I</b> <b>assign</b> <b>groups?</b></h4><pre>
       The grouping patterns can be compared with the auto-props feature of subversion; it allows automatically
       defining properties for new entries, or ignoring them, depending on various criteria.

       For example you might want to use encryption for the files in your users' .ssh directory, to secure them
       against unauthorized access in the repository, and completely ignore the private key files:

       Grouping patterns:

           group:ignore,<a href="file:/home/">/home/</a>*/.ssh/id*
           group:encrypt,<a href="file:/home/">/home/</a>*/.ssh/**

        And the $FSVS_CONF/groups/encrypt file would have a definition for the fsvs:commit-pipe (see the <b>special</b>
       <b>properties</b>).

</pre><h4><b>Syntax</b> <b>of</b> <b>group</b> <b>files</b></h4><pre>
       A group definition file looks like this:

       • Whitespace on the beginning and the end of the line is ignored.
       • Empty lines, and lines with the first non-whitespace character being '#' (comments) are ignored.
       • It can have <b>either</b> the keywords ignore or take; if neither is specified, the group ignore has ignore as
         default (surprise, surprise!), and all others use take.
       • An arbitrary (small) number of lines with the syntax
          auto-prop  <u>property-name</u>  <u>property-value</u>  <u>can</u>  <u>be</u>  <u>given;</u> <u>property-name</u> <u>may</u> <u>not</u> <u>include</u> <u>whitespace,</u> <u>as</u>
         <u>there's</u> <u>no</u> <u>parsing</u> <u>of</u> <u>any</u> <u>quote</u> <u>characters</u> <u>yet.</u>
       An example:
          # This is a comment
            # This is another

          auto-props    fsvs:commit-pipe    gpg -er <a href="mailto:admin@my.net">admin@my.net</a>

          # End of definition

</pre><h4><b>Specification</b> <b>of</b> <b>groups</b> <b>and</b> <b>patterns</b></h4><pre>
       While an ignore pattern just needs the pattern itself (in one of  the  formats  below),  there  are  some
       modifiers that can be additionally specified:
          [group:{name},][dir-only,][insens|nocase,][take,][mode:A:C,]pattern

        These are listed in the section <b>Modifiers</b> below.
       These kinds of ignore patterns are available:
</pre><h4><b>Shell-like</b> <b>patterns</b></h4><pre>
       These  must  start  with ./, just like a base-directory-relative path. ? , * as well as character classes
       [a-z] have their usual meaning, and ** is a wildcard for directory levels.
       You can use a backslash \ outside of character classes to match some common special characters literally,
       eg. \* within a pattern will match a literal asterisk character within a file or directory  name.  Within
       character  classes  all characters except ] are treated literally. If a literal ] should be included in a
       character class, it can be placed as the first character or also be escaped using a backslash.
       Example for / as the base-directory
            ./[oa]pt
            .<a href="file:/sys">/sys</a>
            .<a href="file:/proc/">/proc/</a>*
            .<a href="file:/home/">/home/</a>**~

       This would ignore files and directories called apt or opt in the root directory (and files below, in  the
       case  of  a  directory),  the  directory  <a href="file:/sys">/sys</a>  and everything below, the contents of <a href="file:/proc">/proc</a> (but take the
       directory itself, so that upon restore it gets created as a mountpoint), and all entries matching  *~  in
       and below <a href="file:/home">/home</a> .
       <b>Note:</b>
           The  patterns are anchored at the beginning and the end. So a pattern .<a href="file:/sys">/sys</a> will match <b>only</b> a file or
           directory named sys. If you want to exclude a directories' files, but not the directory  itself,  use
           something like ./dir/* or ./dir/**
       If  you're  deep  within  your working copy and you'd like to ignore some files with a WC-relative ignore
       pattern, you might like to use the <b>rel-ignore</b> command.
   <b>Absolute</b> <b>shell</b> <b>patterns</b>
       There is another way to specify shell patterns - using absolute paths.
        The syntax is similar to normal shell patterns; but instead of the ./ prefix  the  full  path,  starting
       with /, is used.
                <a href="file:/etc/">/etc/</a>**.dpkg-old
                <a href="file:/etc/">/etc/</a>**.dpkg-bak
                /**.bak
                /**~
       The  advantage of using full paths is that a later dump and load in another working copy (eg. when moving
       from versioning <a href="file:/etc">/etc</a> to /) does simply work; the patterns don't have to be modified.
       Internally this simply tries to remove the working copy base directory at the start of the  patterns  (on
       loading); then they are processed as usual.
       If  a  pattern  does  <b>not</b>  match  the wc base, and neither has the wild-wildcard prefix /**, a <b>warning</b> is
       issued.
</pre><h4><b>PCRE-patterns</b></h4><pre>
       PCRE stands for Perl Compatible Regular Expressions; you can read about  them  with  man  pcre2  (if  the
       manpages are installed), and/or perldoc perlre (if perldoc is installed).
        If both fail for you, just google it.
       These patterns have the form PCRE:{pattern}, with PCRE in uppercase.
       An example:
            PCRE:.<a href="file:/home/.">/home/.</a>*~

        This one achieves exactly the same as .<a href="file:/home/">/home/</a>**~ .
       Another example:
            PCRE:.<a href="file:/home/">/home/</a>[a-s]

       This  would  match  /home/anthony  ,  /home/guest  ,  /home/somebody  and  so  on,  but  would  not match
       /home/theodore .
       One more:
            PCRE:.<a href="file:/.">/.</a>*(.(tmp|bak|sik|old|dpkg-120

       Note that the pathnames start with ./ , just like above, and  that  the  patterns  are  anchored  at  the
       beginning. To additionally anchor at the end you could use a $ at the end.
</pre><h4><b>Ignoring</b> <b>all</b> <b>files</b> <b>on</b> <b>a</b> <b>device</b></h4><pre>
       Another form to discern what is needed and what not is possible with DEVICE:[&lt;|&lt;=|&gt;|&gt;=]major[:minor].
       This takes advantage of the major and minor device numbers of inodes (see man 1 stat and man 2 stat).
       The rule is as follows:
       • Directories have their parent matched against the given string
       • All other entries have their own device matched.
       This  is  because  mount-points (ie. directories where other filesystems get attached) show the device of
       the mounted device, but should be versioned (as they are needed after  restore);  all  entries  (and  all
       binding mounts) below should not.
       The  possible  options &lt;= or &gt;= define a less-or-equal-than respective bigger-or-equal-than relationship,
       to ignore a set of device classes.
       Examples:
            tDEVICE:3
            ./*

        This patterns would define that all filesystems on IDE-devices (with major number 3) are <u>taken</u> , and all
       other files are ignored.
           DEVICE:0
        This would ignore all filesystems with major number 0 - in linux these are  the  <u>virtual</u>  filesystems  (
       proc , sysfs , devpts , etc.; see <a href="file:/proc/filesystems">/proc/filesystems</a> , the lines with nodev ).
       Mind NFS and smb-mounts, check if you're using <u>md</u> , <u>lvm</u> and/or <u>device-mapper</u> !
       Note:  The  values  are  parsed with strtoul() , so you can use decimal, hexadecimal (by prepending '0x',
       like '0x102') and octal ('0', like '0777') notation.
</pre><h4><b>Ignoring</b> <b>a</b> <b>single</b> <b>file,</b> <b>by</b> <b>inode</b></h4><pre>
       At last, another form to ignore entries is to specify them via the device they are on and their inode:
            INODE:major:minor:inode

        This can be used if a file can be hardlinked to many places, but only one copy should  be  stored.  Then
       one path can be marked as to <u>take</u> , and other instances can get ignored.
       <b>Note:</b>
           That's  probably  a  bad example. There should be a better mechanism for handling hardlinks, but that
           needs some help from subversion.
</pre><h4><b>Modifiers</b></h4><pre>
       All of these patterns can have one or more of these modifiers <b>before</b> them, with (currently) optional  ','
       as separators; not all combinations make sense.
       For  patterns with the m (mode match) or d (dironly) modifiers the filename pattern gets optional; so you
       don't have to give an all-match wildcard pattern (./**) for these cases.
   <b>'take':</b> <b>Take</b> <b>pattern</b>
       This modifier is just a short-hand for assigning the group <b>take</b>.
   <b>'ignore':</b> <b>Ignore</b> <b>pattern</b>
       This modifier is just a short-hand for assigning the group <b>ignore</b>.
   <b>'insens'</b> <b>or</b> <b>'nocase':</b> <b>Case</b> <b>insensitive</b>
       With this modifier you can force the match to be case-insensitive; this can be useful if  other  machines
       use eg. samba to access files, and you cannot be sure about them leaving '.BAK' or '.bak' behind.
   <b>'dironly':</b> <b>Match</b> <b>only</b> <b>directories</b>
       This is useful if you have a directory tree in which only certain files should be taken; see below.
   <b>'mode':</b> <b>Match</b> <b>entries'</b> <b>mode</b>
       This expects a specification of two octal values in the form m:<u>and_value</u>:<u>compare_value,</u> <u>like</u> <u>m:04:00;</u> <u>the</u>
       <u>bits</u> <u>set</u> <u>in</u> <u>and_value</u> <u>get</u> <u>isolated</u> <u>from</u> <u>the</u> <u>entries'</u> <u>mode,</u> <u>and</u> <u>compared</u> <u>against</u> <u>compare_value.</u>
       As an example: the file has mode 0750; a specification of

       • m:0700:0700 matches,
       • m:0700:0500 doesn't; and
       • m:0007:0000 matches, but
       • m:0007:0007 doesn't.
       A  real-world  example: m:0007:0000 would match all entries that have <b>no</b> right bits set for <u>'others'</u>, and
       could be used to exclude private files (like <a href="file:/etc/shadow">/etc/shadow</a>). (Alternatively, the <u>others-read</u> bit  could  be
       used: m:0004:0000.
       FSVS  will  reject  invalid  specifications,  ie.  when bits in compare_value are set that are cleared in
       and_value: these patterns can never match.
        An example would be m:0700:0007.
   <b>Examples</b>
            take,dironly,./var/vmail/**
            take,./var/vmail/**<a href="file:/.">/.</a>*.sieve
            ./var/vmail/**
        This would take all '.*.sieve'  files  (or  directories)  below  /var/vmail,  in  all  depths,  and  all
       directories there; but no other files.
       If  your  files  are  at  a  certain  depth, and you don't want all other directories taken, too, you can
       specify that exactly:
            take,dironly,./var/vmail/*
            take,dironly,./var/vmail/*/*
            take,./var/vmail/*/*<a href="file:/.">/.</a>*.sieve
            ./var/vmail/**

            mode:04:0
            take,.<a href="file:/etc/">/etc/</a>
            ./**
        This would take all files from <a href="file:/etc">/etc</a>, but ignoring the files that are not world-readable (other-read  bit
       cleared); this way only 'public' files would get taken.
</pre><h4><b>Author</b></h4><pre>
       Generated automatically by Doxygen for fsvs from the source code.

Version trunk:2424                                 11 Mar 2010                       <u>FSVS</u> <u>-</u> <u>Group</u> <u><a href="../man5/definitions.5.html">definitions</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>