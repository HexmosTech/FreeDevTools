<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ltsp.conf - client configuration file for LTSP</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ltsp">ltsp_23.02-3_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>ltsp.conf</b> - client configuration file for LTSP

</pre><h4><b>SYNOPSIS</b></h4><pre>
       The  LTSP  client  configuration  file  is  placed at <b>/etc/ltsp/ltsp.conf</b> and it loosely follows the .ini
       format. It is able to control various settings of the LTSP  server  and  clients.  After  each  ltsp.conf
       modification,  the  <b>ltsp</b>  <b>initrd</b> command needs to be run so that it's included in the additional ltsp.img
       initrd that is sent when the clients boot.

</pre><h4><b>CREATION</b></h4><pre>
       To create an initial ltsp.conf, run the following command:

       install -m 0660 -g sudo /usr/share/ltsp/common/ltsp/ltsp.conf /etc/ltsp/ltsp.conf

       The optional <b>-g</b> <b>sudo</b> parameter allows users in the sudo group to edit ltsp.conf  with  any  editor  (e.g.
       gedit) without running sudo.

</pre><h4><b>SYNTAX</b></h4><pre>
       Open  and  view the /etc/ltsp/ltsp.conf file that you just created, so that it's easier to understand its
       syntax.

       The configuration file is separated into sections:

              • The special [server] section is evaluated only by the ltsp server.

              • The special [common] section is evaluated by both the server and ltsp clients.

              • In the special [clients] section, parameters for all clients can  be  defined.   Most  ltsp.conf
                parameters should be placed there.

              • MAC address, IP address, or hostname sections can be used to apply settings to specific clients.
                Those support globs, for example [192.168.67.*].

              • It's  also  possible  to group parameters into named sections like [crt_monitor] in the example,
                and reference them from other sections with the INCLUDE= parameter.

              • Advanced users may also use [applet/host] sections, for example  [initrd-bottom/library*]  would
                be  evaluated by the <b>ltsp</b> <b>initrd-bottom</b> applet only for clients that have a hostname that starts
                with "library".

       The ltsp.conf configuration file is internally transformed into a shell script, so all the  shell  syntax
       rules apply, except for the sections headers which are transformed into functions.

       This  means  that  you must not use spaces around the "=" sign, and that you may write comments using the
       "#" character.

       The <b>ltsp</b> <b>initrd</b> command does a quick syntax check by running <b>sh</b> <b>-n</b> <b>/etc/ltsp/ltsp.conf</b> and aborts  if  it
       detects syntax errors.

</pre><h4><b>PARAMETERS</b></h4><pre>
       The following parameters are currently defined; an example is given in each case.

       <b>ADD_IMAGE_EXCLUDES</b>=<u>"/etc/ltsp/add-image.excludes"</u>

       <b>OMIT_IMAGE_EXCLUDES</b>=<u>"home/*"</u>
              Add  or  omit  items  to  the  <b>ltsp</b> <b>image</b> exclusion list.  Some files and directories shouldn't be
              included    in    the    generated    image.     The    initial     list     is     defined     in
              /usr/share/ltsp/server/image/image.excludes.    It   can  be  completely  overridden  by  creating
              /etc/ltsp/image.excludes.  ADD_IMAGE_EXCLUDES and OMIT_IMAGE_EXCLUDES can  finetune  the  list  by
              adding or removing lines to it. They can either be filenames or multiline text.

       <b>AUTOLOGIN</b>=<u>"user01"</u>

       <b>RELOGIN</b>=<u>0|1</u>

       <b>GDM3_CONF</b>=<u>"WaylandEnable=false"</u>

       <b>LIGHTDM_CONF</b>=<u>"greeter-hide-users=true"</u>

       <b>SDDM_CONF</b>=<u>"/etc/ltsp/sddm.conf"</u>
              Configure  the  display  manager  to  log  in  this  user  automatically.   If  SSHFS is used, the
              PASSWORDS_x parameter (see below) must also be provided.  AUTOLOGIN can be a simple username  like
              "user01", or it can be a partial regular expression that transforms a hostname to a username.  For
              example,  AUTOLOGIN="pc/guest"  means "automatically log in as guest01 in pc01, as guest02 in pc02
              etc".  Setting RELOGIN=0 will make AUTOLOGIN work only once.  Finally, the *_CONF  parameters  can
              be either filenames or direct text, and provide a way to write additional content to the generated
              display manager configuration.

       <b>CRONTAB_x</b>=<u>"30</u> <u>15</u>   <u>*</u> <u>*</u> <u>*</u>   <u>root</u>    <u>poweroff"</u>
              Add a line in crontab. The example powers off the clients at 15:30.

       <b>CUPS_SERVER</b>=<u>"$SERVER"</u>
              Set  the CUPS server in the client /etc/cups/client.conf. Defaults to $SERVER.  You're supposed to
              also enable printer sharing on the server by running <b>cupsctl</b> <b>_share_printers=1</b>  or  <b>system-config-</b>
              <b>printer</b> or by visiting <a href="http://localhost">http://localhost</a>:631.  Then all printers can be managed on the LTSP server.
              Other  possible  values  are  CUPS_SERVER="localhost", when a printer is connected to a client, or
              CUPS_SERVER="ignore", to skip CUPS server handling.

       <b>DEBUG_LOG</b>=<u>0|1</u>
              Write warnings and error messages to /run/ltsp/debug.log. Defaults to 0.

       <b>DEBUG_SHELL</b>=<u>0|1</u>
              Launch a debug shell when errors are detected. Defaults to 0.

       <b>DEFAULT_IMAGE</b>=<u>"x86_64"</u>

       <b>KERNEL_PARAMETERS</b>=<u>"nomodeset</u> <u>noapic"</u>

       <b>MENU_TIMEOUT</b>=<u>"5000"</u>
              These parameters can be defined under [mac:address] sections in ltsp.conf, and they  are  used  by
              <b>ltsp</b>  <b>ipxe</b>  to  generate the iPXE menu.  They control the default menu item, the additional kernel
              parameters and the menu timeout for each client. They can also be defined globally under [server].

       <b>DISABLE_SESSION_SERVICES</b>=<u>"evolution-addressbook-factory</u> <u>obex"</u>

       <b>DISABLE_SYSTEM_SERVICES</b>=<u>"anydesk</u> <u>teamviewerd"</u>

       <b>KEEP_SESSION_SERVICES</b>=<u>"at-spi-dbus-bus"</u>

       <b>KEEP_SYSTEM_SERVICES</b>=<u>"apparmor</u> <u>ssh"</u>

       <b>MASK_SESSION_SERVICES</b>=<u>"gnome-software-service</u> <u>update-notifier"</u>

       <b>MASK_SYSTEM_SERVICES</b>=<u>"apt-daily</u> <u>apt-daily-upgrade</u> <u>rsyslog"</u>
              Space separated lists of services to disable,  permit  or  mask  on  LTSP  clients.   They  mostly
              correspond  to  <b>systemctl</b>  <b>disable/mask</b>  <b>[--user]</b> invocations.  Setting these ltsp.conf parameters
              adds    or    omits    items    from    the    default    lists    that     are     defined     in
              <b>/usr/share/ltsp/client/init/56-services.sh</b>.   Disabled  services  can be started on demand by e.g.
              dbus or socket activation, while masked services need to be manually unmasked  first.   Currently,
              MASK_SESSION_SERVICES also deletes the non-systemd user services from /etc/xdg/autostart.

       <b>DNS_SERVER</b>=<u>"8.8.8.8</u> <u>208.67.222.222"</u>
              Specify the DNS servers for the clients.

       <b>FSTAB_x</b>=<u>"server:<a href="file:/home">/home</a></u> <u><a href="file:/home">/home</a></u> <u>nfs</u> <u>defaults,nolock</u> <u>0</u> <u>0"</u>
              All  parameters  that start with FSTAB_ are sorted and then their values are written to <a href="file:/etc/fstab">/etc/fstab</a>
              at the client init phase.

       <b>HOSTNAME</b>=<u>"pc01"</u>
              Specify  the  client  hostname.  Defaults  to  "ltsp%{IP}".   HOSTNAME  may  contain   the   %{IP}
              pseudovariable,  which  is a sequence number calculated from the client IP and the subnet mask, or
              the %{MAC} pseudovariable, which is the MAC address without the colons.

       <b>HOSTS_x</b>=<u>"192.168.67.10</u> <u>nfs-server"</u>
              All parameters that start with HOSTS_ are sorted and then their values are written  to  <a href="file:/etc/hosts">/etc/hosts</a>
              at the client init phase.

       <b>IMAGE_TO_RAM</b>=<u>0|1</u>
              Specifying  this  option  under  the [clients] section copies the rootfs image to RAM during boot.
              That makes clients less dependent on the server, but they must have sufficient memory to  fit  the
              image.

       <b>INCLUDE</b>=<u>"other-section"</u>
              Include another section in this section.

       <b>LOCAL_SWAP</b>=<u>0|1</u>
              Activate local swap partitions. Defaults to 1.

       <b>MULTISEAT</b>=<u>0|1</u>

       <b>UDEV_SEAT_n_x</b>=<u>"*/usb?/?-[2,4,6,8,10,12,14,16,18]/*"</u>
              MULTISEAT=1  tries  to  autodetect  if  an LTSP client has two graphics cards and to automatically
              split   them   along   with   the   USB   ports   into   two   seats.    Optional    lines    like
              <b>UDEV_SEAT_1_SOUND="*/sound/card1*"</b>  can  be used to finetune the udev rules that will be generated
              and placed in a file named /etc/udev/rules.d/72-ltsp-seats.rules.

       <b>NAT</b>=<u>0|1</u>
              Only use this under the [server] section. Normally, <b>ltsp</b> <b>service</b> runs when the  server  boots  and
              detects  if  a server IP is 192.168.67.1, in which case it automatically enables IP forwarding for
              the clients to be able to access the Internet in dual NIC setups. But if there's a chance that the
              IP isn't set yet (e.g. disconnected network cable), setting NAT=1 enforces that.

       <b>OMIT_FUNCTIONS</b>=<u>"pam_main</u> <u>mask_services_main"</u>
              A space separated list of function names that should be omitted.   The  functions  specified  here
              will not be executed when called.  This option can be specified in any [section].

       <b>PASSWORDS_x</b>=<u>"teacher/cXdlcjEyMzQK</u> <u>[a-z][-0-9]*/MTIzNAo=</u> <u>guest[^:]*/"</u>
              A  space  separated  list  of  regular  expressions  that  match  usernames, followed by slash and
              base64-encoded passwords. At boot, <b>ltsp</b> <b>init</b> writes those passwords  for  the  matching  users  in
              <a href="file:/etc/shadow">/etc/shadow</a>,  so  that then pamltsp can pass them to SSH/SSHFS. The end result is that those users
              are able to login either in the console or the display manager by just  pressing  [Enter]  at  the
              password prompt.
              Passwords  are  base64-encoded  to  prevent  over-the-shoulder  spying  and  to avoid the need for
              escaping special characters. To encode a password in base64, run <b>base64</b>, type a  single  password,
              and then Ctrl+D.
              In  the  example above, the teacher account will automatically use "qwer1234" as the password, the
              a1-01, b1-02 etc students will use "1234", and the guest01 etc accounts will be  able  to  use  an
              empty  password without even authenticating against the server; in this case, SSHFS can't be used,
              <a href="file:/home">/home</a> should be local or NFS.

       <b>POST_APPLET_x</b>=<u>"ln</u> <u>-s</u> <u>/etc/ltsp/xorg.conf</u> <u>/etc/X11/xorg.conf"</u>
              All parameters that start with POST_ and then have an ltsp client applet name are sorted and their
              values are executed after the main function of that applet. See  the  <a href="../man8/ltsp.8.html">ltsp</a>(8)  man  page  for  the
              available  applets.   The  usual  place  to  run client initialization commands that don't need to
              daemonize is POST_INIT_x.

       <b>PRE_APPLET_x</b>=<u>"debug_shell"</u>
              All parameters that start with PRE_ and then have an ltsp client applet name are sorted and  their
              values are executed before the main function of that applet.

       <b>PWMERGE_SUR</b>=, <b>PWMERGE_SGR</b>=, <b>PWMERGE_DGR</b>=, <b>PWMERGE_DUR</b>=
              Normally, all the server users are listed on the client login screens and are permitted to log in.
              To  exclude  some  of them, define one or more of those regular expressions. For more information,
              read /usr/share/ltsp/client/login/pwmerge. For example, if you name your clients pc01,  pc02  etc,
              and  your  users  a01, a02, b01, b02 etc, then the following line only shows/allows a01 and b01 to
              login to pc01: <b>PWMERGE_SUR=".*%{HOSTNAME#pc}"</b>

       <b>REMOTEAPPS</b>=<u>"users-admin</u> <u>mate-about-me"</u>
              Register the specified applications as remoteapps, so that they're executed on the LTSP server via
              <b>ssh</b> <b>-X</b> instead of on the clients. For more information, see <b><a href="../man8/ltsp-remoteapps.8.html">ltsp-remoteapps</a>(8)</b>.

       <b>RPI_IMAGE</b>=<u>"raspios"</u>
              Select this LTSP image to boot Raspberry Pis from.  This symlinks all  $BASE_DIR/$RPI_IMAGE/boot/*
              files  directly  under  $TFTP_DIR  when <b>ltsp</b> <b>kernel</b> <b>$RPI_IMAGE</b> is called.  See the Raspberry Pi OS
              documentation page ⟨https://ltsp.org/docs/installation/raspios⟩ for more information.

       <b>SEARCH_DOMAIN</b>=<u>"ioa.sch.gr"</u>
              A search domain to add to resolv.conf and to /etc/hosts. Usually provided by DHCP.

       <b>SERVER</b>=<u>"192.168.67.1"</u>
              The LTSP server is usually autodetected; it can be manually specified if there's need for it.

       <b>X_DRIVER</b>=<u>"vesa"</u>

       <b>X_HORIZSYNC</b>=<u>"28.0-87.0"</u>

       <b>X_MODELINE</b>=<u>'"1024x768_85.00"</u>   <u>94.50</u>  <u>1024</u> <u>1096</u> <u>1200</u> <u>1376</u>  <u>768</u> <u>771</u> <u>775</u> <u>809</u> <u>-hsync</u> <u>+vsync'</u>

       <b>X_MODES</b>=<u>'"1024x768"</u> <u>"800x600"</u> <u>"640x480"'</u>

       <b>X_PREFERREDMODE</b>=<u>"1024x768"</u>

       <b>X_VERTREFRESH</b>=<u>"43.0-87.0"</u>

       <b>X_VIRTUAL</b>=<u>"800</u> <u>600"</u>
              If any  of  these  parameters  are  set,  the  /usr/share/ltsp/client/init/xorg.conf  template  is
              installed  to  /etc/X11/xorg.conf,  while applying the parameters.  Read that template and consult
              <a href="../man5/xorg.conf.5.html">xorg.conf</a>(5) for more information.  The most widely supported method to set a  default  resolution
              is  X_MODES.   If  more  parameters  are  required,  create a custom xorg.conf as described in the
              EXAMPLES section.

</pre><h4><b>EXAMPLES</b></h4><pre>
       To specify a hostname and a user to autologin in a client:

       [3c:07:71:a2:02:e3]
       HOSTNAME=pc01
       AUTOLOGIN=user01
       PASSWORDS_PC01="user01/cGFzczAxCg=="

       The password above is "pass01" in base64 encoding. To calculate it, the  <b>base64</b>  command  was  run  in  a
       terminal:

       base64
       pass01
       &lt;press Ctrl+D at this point&gt;
       cGFzczAxCg==

       If  some clients need a custom xorg.conf file, create it in e.g.  <b>/etc/ltsp/xorg-nvidia.conf</b>, and put the
       following in ltsp.conf to dynamically symlink it for those clients at boot:

       [pc01]
       INCLUDE=nvidia

       [nvidia]
       POST_INIT_LN_XORG="ln -sf ../ltsp/xorg-nvidia.conf /etc/X11/xorg.conf"

       Since ltsp.conf is transformed into a shell script and sections into functions, it's possible to directly
       include code or to call sections at POST_APPLET_x hooks.

       [clients]
       # Allow local root logins by setting a password hash for the root user.
       # The hash contains $, making it hard to escape in POST_INIT_x="sed ...".
       # So put sed in a section and call it at POST_INIT like this:
       POST_INIT_SET_ROOT_HASH="section_set_root_hash"

       # This is the hash of "qwer1234"; cat <a href="file:/etc/shadow">/etc/shadow</a> to see your hash.
       [set_root_hash]
       sed 's|^root:[^:]*:|root:$6$VRfFL349App5$BfxBbLE.tYInJfeqyGTv2lbk6KOza3L2AMpQz7bMuCdb3ZsJacl9Nra7F/Zm7WZJbnK5kvK74Ik9WO2qGietM0:|' -i <a href="file:/etc/shadow">/etc/shadow</a>

</pre><h4><b>COPYRIGHT</b></h4><pre>
       Copyright 2019-2022 the LTSP team, see AUTHORS.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/ltsp.8.html">ltsp</a></b>(8), <b><a href="../man8/ltsp-dnsmasq.8.html">ltsp-dnsmasq</a></b>(8),  <b><a href="../man8/ltsp-image.8.html">ltsp-image</a></b>(8),  <b><a href="../man8/ltsp-info.8.html">ltsp-info</a></b>(8),  <b><a href="../man8/ltsp-initrd.8.html">ltsp-initrd</a></b>(8),  <b><a href="../man8/ltsp-ipxe.8.html">ltsp-ipxe</a></b>(8),  <b><a href="../man8/ltsp-kernel.8.html">ltsp-kernel</a></b>(8),
       <b><a href="../man8/ltsp-nfs.8.html">ltsp-nfs</a></b>(8), <b><a href="../man8/ltsp-remoteapps.8.html">ltsp-remoteapps</a></b>(8)

       Online documentation is available on https://ltsp.org

LTSP 23.02-3                                       2024-09-07                                       <u><a href="../man5/LTSP.CONF.5.html">LTSP.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>