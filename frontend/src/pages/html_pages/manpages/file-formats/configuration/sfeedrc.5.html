<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sfeedrc — sfeed_update(1) configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/sfeed">sfeed_2.2-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       sfeedrc — <a href="../man1/sfeed_update.1.html">sfeed_update</a>(1) configuration file

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>sfeedrc</b> is the configuration file for <u><a href="../man1/sfeed_update.1.html">sfeed_update</a></u>(1) and is evaluated as a shellscript.

</pre><h4><b>VARIABLES</b></h4><pre>
       <u>sfeedpath</u>
               can  be  set  for  the  directory  to  store  the  TAB-separated  feed  files.   The  default  is
               <u>$HOME/.sfeed/feeds</u>.

       <u>maxjobs</u>
               can be used to change the amount of concurrent <b>feed</b>() jobs.  The default is 16.

</pre><h4><b>FUNCTIONS</b></h4><pre>
       <b>feeds</b>()
               This function is the required "main" entry-point function called from <u><a href="../man1/sfeed_update.1.html">sfeed_update</a></u>(1).

       <b>feed</b>(<u>name</u>, <u>feedurl</u>, <u>basesiteurl</u>, <u>encoding</u>)
               Inside the <b>feeds</b>() function feeds can be defined by calling the <b>feed</b>() function.   Its  arguments
               are:

               <u>name</u>    Name of the feed, this is also used as the filename for the TAB-separated feed file.  The
                       feed  name  cannot contain the '/' character because it is a path separator, they will be
                       replaced with '_'.  Each <u>name</u> should be unique.

               <u>feedurl</u>
                       URL to fetch the RSS/Atom data from.  This is usually a HTTP or HTTPS URL.

               [<u>basesiteurl</u>]
                       Base URL of the feed links.  This argument allows fixing relative item links.

                       According to the RSS and Atom specification, feeds should always have absolute URLs,  but
                       this is not always the case in practice.

               [<u>encoding</u>]
                       Feeds  are  converted  from  this  <u>encoding</u>  to  UTF-8.   The <u>encoding</u> should be a usable
                       character-set name for the <u><a href="../man1/iconv.1.html">iconv</a></u>(1) tool.

</pre><h4><b>OVERRIDE</b> <b>FUNCTIONS</b></h4><pre>
       Because <u><a href="../man1/sfeed_update.1.html">sfeed_update</a></u>(1) is a shellscript each  function  can  be  overridden  to  change  its  behaviour.
       Notable functions are:

       <b>fetch</b>(<u>name</u>, <u>url</u>, <u>feedfile</u>)
               Fetch feed from URL and write the data to stdout.  Its arguments are:

               <u>name</u>    Feed name.

               <u>url</u>     URL to fetch.

               <u>feedfile</u>
                       Used feedfile (useful for comparing modification times).

               By default the tool <u><a href="../man1/curl.1.html">curl</a></u>(1) is used.

       <b>convertencoding</b>(<u>name</u>, <u>from</u>, <u>to</u>)
               Convert  data from stdin from one text-encoding to another and write it to stdout.  Its arguments
               are:

               <u>name</u>    Feed name.

               <u>from</u>    From text-encoding.

               <u>to</u>      To text-encoding.

               By default the tool <u><a href="../man1/iconv.1.html">iconv</a></u>(1) is used.

       <b>parse</b>(<u>name</u>, <u>feedurl</u>, <u>basesiteurl</u>)
               Read RSS/Atom XML data from stdin, convert  and  write  it  as  <u><a href="../man5/sfeed.5.html">sfeed</a></u>(5)  data  to  stdout.   Its
               arguments are:

               <u>name</u>    Feed name.

               <u>feedurl</u>
                       URL of the feed.

               <u>basesiteurl</u>
                       Base URL of the feed links.  This argument allows to fix relative item links.

       <b>filter</b>(<u>name</u>, <u>url</u>)
               Filter <u><a href="../man5/sfeed.5.html">sfeed</a></u>(5) data from stdin and write it to stdout.  Its arguments are:

               <u>name</u>    Feed name.

               <u>url</u>     URL of the feed.

       <b>merge</b>(<u>name</u>, <u>oldfile</u>, <u>newfile</u>)
               Merge <u><a href="../man5/sfeed.5.html">sfeed</a></u>(5) data of oldfile with newfile and write it to stdout.  Its arguments are:

               <u>name</u>    Feed name.

               <u>oldfile</u>
                       Old file.

               <u>newfile</u>
                       New file.

       <b>order</b>(<u>name</u>, <u>url</u>)
               Sort <u><a href="../man5/sfeed.5.html">sfeed</a></u>(5) data from stdin and write it to stdout.  Its arguments are:

               <u>name</u>    Feed name.

               <u>url</u>     URL of the feed.

</pre><h4><b>EXAMPLES</b></h4><pre>
       An example configuration file is included named sfeedrc.example and also shown below:

           #sfeedpath="$HOME/.sfeed/feeds"

           # list of feeds to fetch:
           feeds() {
                   # feed &lt;name&gt; &lt;feedurl&gt; [basesiteurl] [encoding]
                   feed "codemadness" "https://www.codemadness.org/atom_content.xml"
                   feed "explosm" "<a href="http://feeds.feedburner.com/Explosm">http://feeds.feedburner.com/Explosm</a>"
                   feed "golang github releases" "https://github.com/golang/go/releases.atom"
                   feed "linux kernel" "https://www.kernel.org/feeds/kdist.xml" "https://www.kernel.org"
                   feed "reddit openbsd" "https://old.reddit.com/r/openbsd/.rss"
                   feed "slashdot" "<a href="http://rss.slashdot.org/Slashdot/slashdot">http://rss.slashdot.org/Slashdot/slashdot</a>" "<a href="http://slashdot.org">http://slashdot.org</a>"
                   feed "tweakers" "<a href="http://feeds.feedburner.com/tweakers/mixed">http://feeds.feedburner.com/tweakers/mixed</a>" "<a href="http://tweakers.net">http://tweakers.net</a>" "iso-8859-1"
                   # get youtube Atom feed: curl -s -L 'https://www.youtube.com/user/gocoding/videos' | sfeed_web | cut -f 1
                   feed "youtube golang" "https://www.youtube.com/feeds/videos.xml?channel_id=UCO3LEtymiLrgvpb59cNsb8A"
                   feed "xkcd" "https://xkcd.com/atom.xml" "https://xkcd.com"
           }

       To  change  the default <u><a href="../man1/curl.1.html">curl</a></u>(1) options for fetching the data, the <b>fetch</b>() function can be overridden and
       added at the top of the <b>sfeedrc</b> file, for example:

           # fetch(name, url, feedfile)
           fetch() {
                   # allow for 1 redirect, set User-Agent, timeout is 15 seconds.
                   curl -L --max-redirs 1 -H "User-Agent: 007" -f -s -m 15 \
                           "$2" 2&gt;/dev/null
           }

       Caching, incremental data updates and bandwidth saving

       For HTTP servers that support it some bandwidth saving can be done by changing some of the  default  curl
       options.   These  options can come at a cost of some privacy, because it exposes additional metadata from
       the previous request.

       <b>•</b>   The curl ETag options (--etag-save and --etag-compare) can be used to store  and  send  the  previous
           ETag header value.  curl version 7.73+ is recommended for it to work properly.
       <b>•</b>   The  curl  -z option can be used to send the modification date of a local file as a HTTP If-Modified-
           Since request header.  The server can then respond if the data is modified or  not  or  respond  with
           only the incremental data.
       <b>•</b>   The  curl  --compressed  option  can  be used to indicate the client supports decompression.  Because
           RSS/Atom feeds are textual XML data this generally compresses very well.
       <b>•</b>   The example below also sets the User-Agent to sfeed, because some CDNs block HTTP  clients  based  on
           the User-Agent request header.

       Example:

           mkdir -p "$HOME/.sfeed/etags" "$HOME/.sfeed/lastmod"

           # fetch(name, url, feedfile)
           fetch() {
                   basename="$(basename "$3")"
                   etag="$HOME/.sfeed/etags/${basename}"
                   lastmod="$HOME/.sfeed/lastmod/${basename}"
                   output="${sfeedtmpdir}/feeds/${filename}.xml"

                   curl \
                           -f -s -m 15 \
                           -L --max-redirs 0 \
                           -H "User-Agent: sfeed" \
                           --compressed \
                           --etag-save "${etag}" --etag-compare "${etag}" \
                           -R -o "${output}" \
                           -z "${lastmod}" \
                           "$2" 2&gt;/dev/null || return 1

                   # succesful, but no file written: assume it is OK and Not Modified.
                   [ -e "${output}" ] || return 0

                   # use server timestamp from curl -R to set Last-Modified.
                   touch -r "${output}" "${lastmod}" 2&gt;/dev/null
                   cat "${output}" 2&gt;/dev/null
                   # use write output status, other errors are ignored here.
                   fetchstatus="$?"
                   rm -f "${output}" 2&gt;/dev/null
                   return "${fetchstatus}"
           }

       The README file has more examples.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man1/curl.1.html">curl</a></u>(1), <u><a href="../man1/iconv.1.html">iconv</a></u>(1), <u><a href="../man1/sfeed_update.1.html">sfeed_update</a></u>(1), <u><a href="../man1/sh.1.html">sh</a></u>(1)

</pre><h4><b>AUTHORS</b></h4><pre>
       Hiltjo Posthuma &lt;<u><a href="mailto:hiltjo@codemadness.org">hiltjo@codemadness.org</a></u>&gt;

Debian                                          February 9, 2025                                      <u><a href="../man5/SFEEDRC.5.html">SFEEDRC</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>