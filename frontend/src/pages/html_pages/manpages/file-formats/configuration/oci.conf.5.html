<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>oci.conf - Slurm configuration file for containers.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/slurm-client">slurm-client_24.11.5-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       oci.conf - Slurm configuration file for containers.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Slurm supports calling OCI compliant runtimes. <b>oci.conf</b> is an ASCII file which defines parameters used by
       OCI runtime interface.  The file will always be located in the same directory as the <b>slurm.conf</b>.

       Parameter names are case insensitive.  Any text following a "#" in the configuration file is treated as a
       comment  through  the  end  of  that line.  Changes to the configuration file take effect upon restart of
       Slurm daemons.

</pre><h4><b>PARAMETERS</b></h4><pre>
       The following oci.conf parameters are defined to control the behavior  of  the  <b>--container</b>  argument  of
       <b>salloc</b>, <b>srun</b>, and <b>sbatch</b>

       <b>ContainerPath</b>
              Override  path  pattern  for  placement  of  the generated OCI Container bundle directory. See the
              section <b>OCI</b> <b>Pattern</b> for details on pattern replacement.

              Default is unique directory generated in <b>SlurmdSpoolDir</b>.

       <b>CreateEnvFile=(null|newline|disabled)</b>
              Create environment file for container. File will have one environment variable per line  if  value
              is  "newline". File will have each environment variable terminated by a NUL (aka '\0') if value is
              "null". If value is "disabled", then the environment file will not be created.

              Value of "true" is treated as "null" for backwards compatibility.  Value of "false" is treated  as
              "disabled" for backwards compatibility.

              Note:  When CreateEnvFile=newline, any environment variables with a newline will be dropped before
              writing to the environment file.

              Default is "disabled".

       <b>DebugFlags</b>
              Override debug flags during container operations. See <b>debugflags</b> in <b>slurm.conf</b>.

              Default: (disabled)

       <b>DisableCleanup</b>
              Disable removal of the generated files handed to OCI runtime.

              Default: false

       <b>DisableHooks</b>
              Comma separated list of hook types to disable.

              Default: allow all hooks.

       <b>EnvExclude</b>
              Extended regular expression to filter environment before. This allows for excluding  variables  to
              avoid unwanted environment variables inside of containers.

              Example: <b>EnvExclude</b>="^(SLURM_CONF|SLURM_CONF_SERVER)="

              Default does not exclude any environment variables.

       <b>MountSpoolDir</b>
              Override  pattern for path inside of container to mount <b>ContainerPath</b>. See the section <b>OCI</b> <b>Pattern</b>
              for details on pattern replacement.

              Default: /var/run/slurm/

       <b>RunTimeEnvExclude</b>
              Extended regular expression to filter environment  before  calling  any  <b>RunTime*</b>  commands.  This
              allows for excluding variables to avoid unwanted inheritance inside of the OCI runtimes.

              Example: <b>RunTimeEnvExclude</b>="^(SLURM_CONF|SLURM_CONF_SERVER)="

              Default is not exclude any environment variables.

       <b>FileDebug</b>
              Override default file logging level during container operations. See <b>SlurmdDebug</b> in <b>slurm.conf</b>.

              Default: (disabled)

       <b>IgnoreFileConfigJson=(true|false)</b>
              Ignore  the  existence  of config.json in OCI bundle path and disable loading config.json if it is
              present.

              Default is false.

       <b>RunTimeCreate</b>
              Pattern for OCI runtime create operation. See the section  <b>OCI</b>  <b>Pattern</b>  for  details  on  pattern
              replacement.

              Default: (disabled)

       <b>RunTimeDelete</b>
              Pattern  for  OCI  runtime  delete  operation.  See the section <b>OCI</b> <b>Pattern</b> for details on pattern
              replacement.

              Default: (disabled)

       <b>RunTimeKill</b>
              Pattern for OCI runtime kill operation. See  the  section  <b>OCI</b>  <b>Pattern</b>  for  details  on  pattern
              replacement.

              Default: (disabled)

       <b>RunTimeQuery</b>
              Pattern  for  OCI  runtime  query operation (also known as state). See the section <b>OCI</b> <b>Pattern</b> for
              details on pattern replacement.

              Default: (disabled)

       <b>RunTimeRun</b>
              Pattern for OCI runtime run operation. This is not  provided  in  the  OCI  runtime  specification
              (&lt;=v1.0)  but  is  provided  by  multiple  OCI  runtimes  to  simplify execution of containers. If
              provided, it will be used in the place of create and start operations. It avoids the need to  poll
              state  of  the  container  resulting  in less monitoring overhead. See the section <b>OCI</b> <b>Pattern</b> for
              details on pattern replacement.

              Default: (disabled)

       <b>RunTimeStart</b>
              Pattern for OCI runtime start operation. See the  section  <b>OCI</b>  <b>Pattern</b>  for  details  on  pattern
              replacement.

              Default: (disabled)

       <b>SrunPath</b>
              Absolute path to srun executable.

              Default: (search PATH)

       <b>SrunArgs</b>
              Additional arguments to pass to srun. Add one <b>SrunArgs</b> entry per argument.

              Default: (disabled)

       <b>StdIODebug</b>
              Override default STDIO logging level during container operations. See <b>SlurmdDebug</b> in <b>slurm.conf</b>.

              Default: (disabled)

       <b>SyslogDebug</b>
              Override  default  syslog  logging  level  during  container  operations. See <b>SlurmdSyslogDebug</b> in
              <b>slurm.conf</b>.

              Default: (disabled)

</pre><h4><b>NOTES</b></h4><pre>
       OCI container support is disabled if oci.conf does not exist. If disabled, any user  passing  <b>--container</b>
       will be doing so in a purely advisor manner.

</pre><h4><b>OCI</b> <b>Pattern</b></h4><pre>
       All of the OCI patterns will replace the following characters:

       <b>Replacements</b>:

       <b>%%</b>     Replace as "%".

       <b>%@</b>     Replace  as  the  command  and  arguments.  Each  argument will be enclosed with single quotes and
              escaped.

       <b>%b</b>     Replace as OCI Bundle Path.

       <b>%e</b>     Replace as path to file containing environment if <b>CreateEnvFile=true</b>.

       <b>%j</b>     Replace as numeric job id.

       <b>%m</b>     Replace as spool directory of container as patterned by <b>ContainerPath</b>.  If  <b>ContainerPath</b>  is  not
              configured or <b>ContainerPath</b> contains <b>%m</b>, then replace with <b>SlurmdSpoolDir</b> from <b><a href="../man5/slurm.conf.5.html">slurm.conf</a></b>(5).

       <b>%n</b>     Replace as nodename.

       <b>%p</b>     Replace as PID of first processes forked off. Only for use in <b>RunTimeKill</b> or <b>RunTimeDelete</b>.

       <b>%r</b>     Replace as original path to rootfs.

       <b>%s</b>     Replace as numeric step id.

       <b>%t</b>     Replace as numeric step task id.

       <b>%u</b>     Replace as user name.

       <b>%U</b>     Replace as numeric user id.

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2021 SchedMD LLC.

       This    file    is    part    of    Slurm,   a   resource   management   program.    For   details,   see
       &lt;https://slurm.schedmd.com/&gt;.

       Slurm is free software; you can redistribute it and/or modify it under  the  terms  of  the  GNU  General
       Public License as published by the Free Software Foundation; either version 2 of the License, or (at your
       option) any later version.

       Slurm  is  distributed  in  the  hope  that it will be useful, but WITHOUT ANY WARRANTY; without even the
       implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR  PURPOSE.  See  the  GNU  General  Public
       License for more details.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/slurm.conf.5.html">slurm.conf</a></b>(5)

February 2024                               Slurm Configuration File                                 <u><a href="../man5/oci.conf.5.html">oci.conf</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>