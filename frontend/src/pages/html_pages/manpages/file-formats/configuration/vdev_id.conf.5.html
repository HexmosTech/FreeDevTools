<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vdev_id.conf — configuration file for vdev_id(8)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/zfsutils-linux">zfsutils-linux_2.3.2-1ubuntu3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       vdev_id.conf — configuration file for <a href="../man8/vdev_id.8.html">vdev_id</a>(8)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>vdev_id.conf</b>  is  the  configuration file for <u><a href="../man8/vdev_id.8.html">vdev_id</a></u>(8).  It controls the default behavior of <u><a href="../man8/vdev_id.8.html">vdev_id</a></u>(8)
       while it is mapping a disk device name to an alias.

       The <b>vdev_id.conf</b> file uses a simple format consisting of a keyword followed by one or more  values  on  a
       single line.  Any line not beginning with a recognized keyword is ignored.  Comments may optionally begin
       with a hash character.

       The following keywords and values are used.

       <b>alias</b> <u>name</u> <u>devlink</u>
           Maps  a device link in the <u><a href="file:/dev">/dev</a></u> directory hierarchy to a new device name.  The udev rule defining the
           device link must have run prior to <u><a href="../man8/vdev_id.8.html">vdev_id</a></u>(8).  A defined alias takes  precedence  over  a  topology-
           derived  name,  but the two naming methods can otherwise coexist.  For example, one might name drives
           in a JBOD with the <b>sas_direct</b> topology while naming an internal L2ARC device with an alias.

           <u>name</u> is the name of the link to the device that will by created under <u>/dev/disk/by-vdev</u>.

           <u>devlink</u> is the name of the device link that has already  been  defined  by  udev.   This  may  be  an
           absolute path or the base filename.

       <b>channel</b> [<u>pci_slot</u>] <u>port</u> <u>name</u>
           Maps a physical path to a channel name (typically representing a single disk enclosure).

       <b>enclosure_symlinks</b> <b>yes</b>|<b>no</b>
           Additionally  create  <u>/dev/by-enclosure</u>  symlinks  to  the disk enclosure <u>sg</u> devices using the naming
           scheme from <u>vdev_id.conf</u>.  <b>enclosure_symlinks</b> is only allowed for <b>sas_direct</b> mode.

       <b>enclosure_symlinks_prefix</b> <u>prefix</u>
           Specify the prefix for the enclosure symlinks in the form <u>/dev/by-enclosure/</u>⟨<u>prefix</u>⟩-⟨<u>channel</u>⟩⟨<u>num</u>⟩

           Defaults to “<u>enc</u>”.

       <b>slot</b> <u>prefix</u> <u>new</u> [<u>channel</u>]
           Maps a disk slot number as reported by the operating system to an alternative slot  number.   If  the
           <u>channel</u>  parameter  is  specified  then  the  mapping  is only applied to slots in the named channel,
           otherwise the mapping is applied to all channels.  The first-specified <u>slot</u> rule  that  can  match  a
           slot takes precedence.  Therefore a channel-specific mapping for a given slot should generally appear
           before  a  generic  mapping  for  the  same  slot.   In this way a custom mapping may be applied to a
           particular channel and a default mapping applied to the others.

       <b>zpad_slot</b> <u>digits</u>
           Pad slot numbers with zeros to make them <u>digits</u> long, which can help to make disk names a  consistent
           length and easier to sort.

       <b>multipath</b> <b>yes</b>|<b>no</b>
           Specifies  whether  <u><a href="../man8/vdev_id.8.html">vdev_id</a></u>(8)  will handle only dm-multipath devices.  If set to <b>yes</b> then <u><a href="../man8/vdev_id.8.html">vdev_id</a></u>(8)
           will examine the first running component disk of a dm-multipath device  as  provided  by  the  driver
           command to determine the physical path.

       <b>topology</b> <b>sas_direct</b>|<b>sas_switch</b>|<b>scsi</b>
           Identifies a physical topology that governs how physical paths are mapped to channels:
           <b>sas_direct</b> and <b>scsi</b>  channels are uniquely identified by a PCI slot and HBA port number
           <b>sas_switch</b>           channels are uniquely identified by a SAS switch port number

       <b>phys_per_port</b> <u>num</u>
           Specifies  the  number  of PHY devices associated with a SAS HBA port or SAS switch port.  <u><a href="../man8/vdev_id.8.html">vdev_id</a></u>(8)
           internally uses this value to determine which HBA or switch port  a  device  is  connected  to.   The
           default is <b>4</b>.

       <b>slot</b> <b>bay</b>|<b>phy</b>|<b>port</b>|<b>id</b>|<b>lun</b>|<b>bay_lun</b>|<b>ses</b>
           Specifies from which element of a SAS identifier the slot number is taken.  The default is <b>bay</b>:
           <b>bay</b>   read the slot number from the bay identifier.
           <b>phy</b>   read the slot number from the phy identifier.
           <b>port</b>  use the SAS port as the slot number.
           <b>id</b>    use the scsi id as the slot number.
           <b>lun</b>   use the scsi lun as the slot number.
           <b>bay_lun</b>
                 read  the  slot number from the bay identifier and append the lun number.  Useful for multi-lun
                 multi-actuator hard drives.
           <b>ses</b>   use the SCSI Enclosure Services (SES) enclosure device slot number, as reported  by  <u><a href="../man8/sg_ses.8.html">sg_ses</a></u>(8).
                 Intended  for  use  only  on  systems  where <b>bay</b> is unsupported, noting that <b>port</b> and <b>id</b> may be
                 unstable across disk replacement.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/zfs/vdev_id.conf</u>
             The configuration file for <u><a href="../man8/vdev_id.8.html">vdev_id</a></u>(8).

</pre><h4><b>EXAMPLES</b></h4><pre>
       A non-multipath configuration with direct-attached SAS enclosures and an arbitrary slot re-mapping:
             multipath     no
             topology      sas_direct
             phys_per_port 4
             slot          bay

             #       PCI_SLOT HBA PORT  CHANNEL NAME
             channel 85:00.0  1         A
             channel 85:00.0  0         B
             channel 86:00.0  1         C
             channel 86:00.0  0         D

             # Custom mapping for Channel A

             #    Linux      Mapped
             #    Slot       Slot      Channel
             slot 1          7         A
             slot 2          10        A
             slot 3          3         A
             slot 4          6         A

             # Default mapping for B, C, and D

             slot 1          4
             slot 2          2
             slot 3          1
             slot 4          3

       A SAS-switch topology.  Note, that the <u>channel</u> keyword takes only two arguments in this example:
             topology      sas_switch

             #       SWITCH PORT  CHANNEL NAME
             channel 1            A
             channel 2            B
             channel 3            C
             channel 4            D

       A multipath configuration.  Note that channel names have multiple definitions - one per physical path:
             multipath yes

             #       PCI_SLOT HBA PORT  CHANNEL NAME
             channel 85:00.0  1         A
             channel 85:00.0  0         B
             channel 86:00.0  1         A
             channel 86:00.0  0         B

       A configuration with enclosure_symlinks enabled:
             multipath yes
             enclosure_symlinks yes

             #          PCI_ID      HBA PORT     CHANNEL NAME
             channel    05:00.0     1            U
             channel    05:00.0     0            L
             channel    06:00.0     1            U
             channel    06:00.0     0            L
       In addition to the disks symlinks, this configuration will create:
             /dev/by-enclosure/enc-L0
             /dev/by-enclosure/enc-L1
             /dev/by-enclosure/enc-U0
             /dev/by-enclosure/enc-U1

       A configuration using device link aliases:
             #     by-vdev
             #     name     fully qualified or base name of device link
             alias d1       /dev/disk/by-id/wwn-0x5000c5002de3b9ca
             alias d2       wwn-0x5000c5002def789e

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man8/vdev_id.8.html">vdev_id</a></u>(8)

OpenZFS                                           May 26, 2021                                   <u><a href="../man5/VDEV_ID.CONF.5.html">VDEV_ID.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>