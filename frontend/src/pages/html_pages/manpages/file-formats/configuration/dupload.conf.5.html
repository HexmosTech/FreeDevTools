<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>dupload.conf - configuration file for dupload</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/dupload">dupload_2.13.2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       dupload.conf - configuration file for dupload

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The configuration file is rather straight forward Perl code as it is included by the <b>dupload</b> script via
       "do $config".  <u>The</u> <u>config</u> <u>file</u> <u>is</u> <u>read</u> <u>as</u> <u>Perl</u> <u>code!</u>

       Any <b>dupload.conf</b> must begin with "package config;" because "config" is the namespace expected by <b>dupload</b>.

       For examples of the configuration please refer to the global configuration file <u>/etc/dupload.conf</u>.

       It contains associative arrays, each indexed by the nickname (see <b>--to</b> option of <b>dupload</b>), for the
       following items:

       <b>fqdn</b> [required]
           The fully qualified domain name (FQDN) of the nickname.

           For the <b>copy</b> method, this option is ignored and the local FQDN will be used instead.

       <b>method</b> [optional]
           The transfer method. The available methods are:

           • <b>ftp</b> (default)

           • <b>http</b> (since 2.9.9)

           • <b>https</b> (since 2.9.9)

           • <b>scp</b> (since 1.8)

           • <b>scpb</b> (since 1.17)

           • <b>rsync</b> (over SSH; since 2.4.1)

           • <b>copy</b> (local filesystem; since 2.9.0)

           If  you  are  using  an  upload queue, use <b>ftp</b> because it is fast.  If you are using an authenticated
           host, <b>always</b> use <b>https</b>, or one of <b>scp</b> or <b>rsync</b> via SSH, because <b>ftp</b> transmits the password  in  clear
           text.

           For  <b>scp</b>  and  <b>rsync</b>  to  work  properly,  you have to setup the remote and local host to establish a
           ssh/slogin connection using <u>.shosts/.rhosts</u> or the files in <u><a href="file:~/.ssh/">~/.ssh/</a></u>. If you do not want or cannot  do
           that,  you  may  find  the  <b>scpb</b>  more  convenient  since it uploads in batch, reducing the number of
           password prompts.

           The only major caveat of the <b>rsync</b> and <b>scpb</b> options is that the files are processed in a batch  mode,
           i.e.  not  separately,  so  in  case of an error <b>dupload</b> will not be able to detect which part of the
           transfer failed, and just delete the <b>.upload</b> file completely.

       <b>login</b> [optional]
           The account name used to log into the remote host.  For <b>ftp</b> the default is  <b>anonymous</b>,  which  should
           work  with  firewall logins too.  For <b>scp</b>, <b>scpb</b> and <b>rsync</b> the default is delegated to SSH and its own
           configuration.  For <b>http</b> and <b>https</b> there is no default.

       <b>passwordcmd</b> [optional] (since 2.9.9)
           The command to retrieve a password.  It is expected to output the password on stdout.

           If this option has not been specified, and  the  <b>secret-tool</b>  program  is  installed,  the  following
           command  will  be  used  to  retrieve the password from a system secrets store via the Secret Service
           interface:

             <b>secret-tool</b> <b>lookup</b> <b>host</b> <u>host</u> <b>user</b> <u>user</u> <b>service</b> <b>dupload</b>

           If the command fails, then the password will be requested from a prompt.

       <b>password</b> [optional]
           The FTP password for anonymous logins.

       <b>filemode</b> [optional] (since 2.9.1)
           The destination files mode, in octal. If the value is <b>undef</b>, the  mode  will  not  be  modified.  The
           default is <b>0644</b>.

       <b>incoming</b> [required]
           Incoming directory, the directory we try to upload to.

       <b>queuedir</b> [optional]
           The  directory  we move the uploaded files to (after successful upload to <u>incoming</u>. Usually necessary
           only with some special upload queues.

       <b>keyrings</b> [optional] (since 2.12.0)
           The list of OpenPGP keyrings containing OpenPGP certificates  that  are  used  to  verify  signatures
           allowed for uploads to this host.  Used by the OpenPGP verification hook.

       <b>distallowlist</b> [optional] (since 2.9.6)
           The  regex  of  the  distributions allowed for this host. This check is done against the <b>Distribution</b>
           field in the <u>.changes</u> file.

       <b>distblocklist</b> [optional] (since 2.9.6)
           The regex of the distributions blocked for this host. This check is  done  against  the  <b>Distribution</b>
           field in the <u>.changes</u> file.

       <b>mail</b> [optional] (since 2.9.9)
           The  email  addresses  ("to"  and  "cc")  where  the  announcement  about  the upload for the "match"
           distribution should be sent.

           This is an array of hashes with the following keys:

           <b>match</b> [required]
               The regex of the distribution that needs to match to send an announcement.

           <b>to</b> [required]
               Email address where the announcement about the packages is sent.

           <b>cc</b> [optional]
               Email address where to send a copy address of the announcement.

       <b>fullname</b> [optional]
           Your full name, one that should appear in the announcement.

           If you leave this setting empty, the default will depend on your mail system. Usually the  full  name
           will be copied from the GCOS field in <u><a href="file:/etc/passwd">/etc/passwd</a></u>.

       <b>visibleuser</b> [optional]
           Your username that should appear in the announcement. Defaults to getlogin().

       <b>visiblename</b> [optional]
           The host/domain name that appears as the part to the right of the <b>@</b> character in the <u>from</u>-part of the
           announcement. Defaults to the value your local MTA likes.

       <b>passive</b> [optional] (since 2.0)
           Set the passive mode for FTP transfers. Since <b>dupload</b> uses Net::FTP, you can also use the environment
           variable <b>FTP_PASSIVE</b>.

       <b>options</b> [optional] (since 2.6.3.1)
           An  array  reference  containing  option  strings  (since 2.10.2), that will be added verbatim to the
           command line of any <b>scp</b> or <b>rsync</b> calls done.

           For backwards compatibility it can  also  be  specified  as  a  scalar  string,  but  this  usage  is
           discouraged and will be deprecated in the future.

       <b>dinstall_runs</b> [optional] (since 2.1)
           Tells  <b>dupload</b>  that  the  remote  host runs dinstall (or equivalent) so that <b>dupload</b> will not send a
           duplicate announcement mail.  The default is 0 (false), set it to 1 to enable it.

       <b>archive</b> [optional] (since 2.0)
           If set to 0 (false), adds a <b>X-No-Archive:</b> <b>yes</b> header in the announcement.  The default is 1 (true).

       The configuration files also contain the following global variables:

       <b>default_host</b> [optional] (since 2.1)
           The default host to upload to. The default value of this variable is set  depending  on  the  current
           vendor, but if there is no configuration for that vendor it will be left unset.

       <b>mta</b> [optional] (since 2.9.8)
           The  pathname  to a <b>sendmail</b> compatible <u>MTA</u>.  The MTA specified must support the <b>-f</b> option to set the
           envelope sender address, and  the  <b>-F</b>  option  to  set  the  sender's  full  name.   The  default  is
           <u>/usr/sbin/sendmail</u>.

       <b>no_parentheses_to_fullname</b> [optional] (since 2.1)
           Prevents <b>dupload</b> to add parentheses around the full name when making mail announcements. Default is 0
           (false), set it to 1 to enable it.

</pre><h4><b>HOOKS</b></h4><pre>
       Hooks are a powerful way to add actions which will be run before or after a dupload (like the preinst and
       postinst script of <b>dpkg</b>).

       You  have two sorts of hooks: pre-upload and post-upload. Both are simple shell commands (executed by "sh
       -c" so you can use any shell tricks).  Pre-uploads are always run (even in dry mode) and stop <b>dupload</b>  if
       they  fail (failure being measured by the hook's exit status). Post-uploads are only run when you are not
       in dry mode and only if the uploading succeeded.

       Hooks get information about themselves and the nickname acted on through the environment (since  2.10.0),
       with several matching the configuration options for the current nickname:

       DUPLOAD_HOOK
           The hook category.

       DUPLOAD_HOST
           The host nickname.

       DUPLOAD_METHOD
           Same as the <b>method</b> option.

       DUPLOAD_FQDN
           Same as the <b>fqdn</b> option.

       DUPLOAD_LOGIN
           Same as the <b>login</b> option.

       DUPLOAD_INCOMING
           Same as the <b>incomingdir</b> option.

       DUPLOAD_QUEUEDIR
           Same as the <b>queuedir</b> option.

       DUPLOAD_KEYRINGS
           Same as the <b>keyrings</b> option.

       DUPLOAD_SSH_OPTIONS
           Same as the <b>options</b> option.

       DUPLOAD_FTP_PASSIVE
           Same as the <b>queuedir</b> option.

       Both sorts of hooks are run for a given category: <b>changes</b>, <b>sourcepackage</b>, <b>package</b>, <b>file</b>, <b>deb</b> and <b>host</b>.

       changes
           This  hook  is  run  once per <u>changes</u> file (given as an argument to <b>dupload</b>) with the filename as its
           parameter.

       sourcepackage
           This hook is run once per <u>changes</u> file with the source package  name  and  its  version  as  its  two
           parameters.

       package
           This  hook  is  run once per binary package (a <u>deb</u> file) with the package name and its version as its
           two parameters.

       file
           This hook is run once per uploaded file, with the file name as its parameter.

       deb This hook is run once per binary package (a <u>deb</u> file) with the filename as its parameter.

       host (since 2.10.0)
           This hook is run once before any other pre hook and after any post hook, with the host  name  as  its
           parameter.

   <b>Syntax</b>
       Hooks  are  defined in two Perl hashes, %preupload and %postupload, each indexed by category. In addition
       to the global hashes, each host entry has two fields with the same names, for the host-specific hooks.

       Hooks are defined as array references with each item executed in sequence.

       The shell command will be substituted first: %1 will be replace by the first argument, etc.

   <b>Per-host</b> <b>or</b> <b>global</b> <b>hooks</b>
       Hooks can be global (for all the hosts) or can be for a specific host.  Host specific hooks override  the
       global ones for each category.

   <b>Examples</b>
       This  one runs <b>lintian</b> before uploading. It is global and guarantees that you will always upload lintian-
       clean packages (thanks to <b>lintian</b> return status).

            $preupload{'deb'} = [ 'lintian -v -i %1' ];

       This one just display the name and versions of successfully uploaded packages.

            $postupload{'package'} = [ 'echo PACKAGE %1 %2 uploaded' ];

       Unlike the two others, this one is specific to one host, <u>debian-ssh</u>, and  overrides  the  default  global
       hook in charge of checking the OpenPGP signatures:

            $cfg{'debian-ssh'}{preupload}{'changes'} = [ 'echo Uploading %1' ];

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/dupload.conf</u>
       <u><a href="file:~/.dupload.conf">~/.dupload.conf</a></u>
       <b>--configfile</b> <u>config-file</u>
           The configuration files are loaded if available in the order listed, overriding previous files.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       <b>FTP_FIREWALL</b>
       <b>FTP_PASSIVE</b>
           Those of Net::FTP for the <b>ftp</b> method.

       <b>http_proxy</b> or <b>HTTP_PROXY</b>
       <b>https_proxy</b> or <b>HTTPS_PROXY</b>
       <b>all_proxy</b> or <b>ALL_PROXY</b>
       <b>no_proxy</b>
       <b>REQUEST_METHOD</b>
           Those of HTTP::Tiny for the <b>http</b> and <b>https</b> methods.

2.13.2                                             2025-03-07                                    <u><a href="../man5/dupload.conf.5.html">dupload.conf</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>