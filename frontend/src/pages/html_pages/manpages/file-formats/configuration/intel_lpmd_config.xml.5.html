<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>intel_lpmd_config.xml - Configuration file for intel_lpmd</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/intel-lpmd">intel-lpmd_0.0.9-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       intel_lpmd_config.xml - Configuration file for intel_lpmd

</pre><h4><b>SYNOPSIS</b></h4><pre>
       $(TDCONFDIR)/etc/intel_lpmd/intel_lpmd_config.xml

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>intel_lpmd_config.xml</b>  is  a  configuration  file  for  the  Intel  Low Power Mode Daemon.  It is used to
       describe the lp_mode_cpus to use in Low Power Mode, as well as the way to restrict work to those CPUs. It
       also describes if and how the HFI monitor and utilization  monitor  works.  The  location  of  this  file
       depends on the configuration option used during build time.

       <b>lp_mode_cpus</b>  is  a  set of active CPUs when system is in Low Power Mode.  This usually equals a group of
       most power efficient CPUs on a platform to achieve best power saving. When not specified, intel_lpmd tool
       can detect this automatically. E.g. it uses an E-core Module on Intel Alderlake platform, and it uses the
       Low Power E-cores on SoC Die on Intel Meteorlake platform.

       <b>Mode</b> specifies the way to migrate the tasks to the lp_mode_cpus.

       • Mode 0: set cpuset to the lp_mode_cpus for systemd. All tasks created by systemd will run on these CPUs
         only. This is supported for cgroup v2 based systemd only.

       • Mode 1: Isolate the non-lp_mode_cpus so that tasks are scheduled to the lp_mode_cpus only.

       • Mode 2: Force idle injection to the non-lp_mode_cpus and leverage the scheduler to schedule  the  other
         tasks to the lp_mode_cpus.

       <b>PerformanceDef</b> specifies the default behavior when power setting is set to Performance.

       • -1 : Never enter Low Power Mode.

       • 0 : opportunistic Low Power Mode enter/exit based on HFI/Utilization request.

       • 1 : Always stay in Low Power Mode.

       <b>BalancedDef</b> specifies the default behavior when power setting is set to Balanced.

       <b>PowersaverDef</b> specifies the default behavior when power setting is set to Power saver.

       <b>HfiLpmEnable</b> specifies if the HFI monitor can capture the HFI hints for Low Power Mode.

       <b>HfiSuvEnable</b> specifies if the HFI monitor can capture the HFI hints for survivability mode.

       <b>WLTHintEnable</b> Enable use of hardware Workload type hints.

       <b>WLTProxyEnable</b> Enable use of Proxy Workload type hints.

       <b>util_entry_threshold</b>  specifies the system utilization threshold for entering Low Power Mode.  The system
       workload is considered to fit the lp_mode_cpus capacity when system utilization is under this  threshold.
       Setting to 0 or leaving this empty disables the utilization monitor.

       <b>util_exit_threshold</b>  specifies  the  CPU  utilization  threshold  for exiting Low Power Mode.  The system
       workload is considered to not  fit  the  lp_mode_cpus  capacity  when  the  utilization  of  the  busiest
       lp_mode_cpus  is  above  this  threshold.   Setting  to  0 or leaving this empty disables the utilization
       monitor.

       <b>EntryDelayMS</b> specifies the sample interval used by the utilization Monitor when system wants to enter Low
       Power Mode based on system utilization.  Setting to 0 or leaving this empty will  cause  the  utilization
       Monitor to use the default interval, 1000 milli seconds.

       <b>ExitDelayMS</b>  specifies  the sample interval used by the utilization Monitor when system wants to exit Low
       Power Mode based on CPU utilization.  Setting to 0 or leaving  this  empty  will  cause  the  utilization
       Monitor to use the adaptive value. The adaptive interval is based on CPU utilization.  The busier the CPU
       is, the shorter interval the utilization monitor uses.

       <b>EntryHystMS</b> specifies a hysteresis threshold when system is in Low Power Mode.  If set, when the previous
       average  time stayed in Low Power Mode is lower than this value, the current enter Low Power Mode request
       will be ignored because it is expected that the system will exit Low Power Mode soon.  Setting  to  0  or
       leaving this empty disables this hysteresis algorithm.

       <b>ExitHystMS</b>  specifies  a  hysteresis  threshold  when  system is not in Low Power Mode.  If set, when the
       previous average time stayed out of Low-Power-Mode is lower than this value, the current exit  Low  Power
       Mode  request  will  be  ignored  because  it is expected that the system will enter Low Power Mode soon.
       Setting to 0 or leaving this empty disables this hysteresis algorithm.

       <b>IgnoreITMT</b> Avoid changing scheduler ITMT flag. This means that during transition to low power mode,  ITMT
       flag is not changed. This reduces latency during switching. This flag is not used when configuration uses
       "State" based configuration, where this flag can be defined per state.

       <b>States</b>  Allows one to define per platform low power states. Each state defines has an entry condition and
       set of parameters to use.

</pre><h4><b>State</b> <b>Definition</b></h4><pre>
       There can be multiple State configuration can be present. Each configuration is valid for a  platform.  A
       State header defines parameters, which are used to match a platform.  <b>CPUFamily</b> CPU generation to match.

       <b>CPUModel</b> CPU model to match.

       <b>CPUConfig</b>  Define  a  configuration  of  CPUs and TDP to match different skews for the same CPU model and
       family. CPU configuration string format is: xPyEzL-tdpW. For example:  12P8E2L-28W,  defines  a  platform
       with  6  P-cores  with  hyper  threading  enabled,  8  E  cores,  2  LPE  cores and the TDP is 28W.  This
       configuration allows wildcard "*" to match any combination.

</pre><h4><b>Per</b> <b>State</b> <b>Definition</b></h4><pre>
       Each "State" defines entry criteria and parameters to use.  <b>ID</b> A unique ID for the state.

       <b>Name</b> A name for the state.

       <b>EntrySystemLoadThres</b> System Entry load threshold in percent. System utilization is different based on the
       number of CPUs are active in a configuration. This value is calculated from <a href="file:/proc/stat">/proc/stat</a>  sysfs.  To  enter
       into this state, the system utilization must be less or equal to this value.

       <b>EnterCPULoadThres</b>  CPU  Entry  load  threshold  in  percent.  Per  CPU  utilization is also obtained from
       /proc/stat. To enter into this state any active CPU utilization must be less  or  equal  to  this  value.
       EnterCPULoadThres is checked before EntrySystemLoadThres to match a state.

       <b>WLTType</b>  Workload  type  value  to enter into this state. If this value is defined then utilization based
       entry triggers are not used. To use this WLTHintEnable must be enabled, so  that  hardware  notifications
       are enabled.

       <b>ActiveCPUs</b>  Active  CPUs  in  this state. The list can be comma separated or use "-" for a range. This is
       optional to have active CPUs in a state.

       <b>EPP</b> EPP to apply for this state. -1 to ignore.

       <b>EPB</b> EPB to apply for this state. -1 to ignore.

       <b>ITMTState</b> Set the state of ITMT flag. -1 to ignore.

       <b>IRQMigrate</b> Migrate IRQs to the active CPUs in this state. -1 to ignore.

       <b>MinPollInterval</b> Minimum polling interval in milli seconds.

       <b>MaxPollInterval</b> Maximum polling interval in milli seconds. This is optional, if there is  no  maximum  is
       desired.

       <b>PollIntervalIncrement</b>  Polling  interval  increment  in  milli seconds. If this value is -1, then polling
       increment is adaptive based on the utilization.

</pre><h4><b>FILE</b> <b>FORMAT</b></h4><pre>
       The configuration file format conforms to XML specifications.

       &lt;Configuration&gt;
            &lt;!--
                 CPU format example: 1,2,4..6,8-10
            --&gt;
            &lt;lp_mode_cpus&gt;Example CPUs&lt;/lp_mode_cpus&gt;

            &lt;!--
                 Mode values
                 0: Cgroup v2
                 1: Cgroup v2 isolate
                 2: CPU idle injection
            --&gt;
            &lt;Mode&gt;0|1|2&lt;/Mode&gt;

            &lt;!--
                 Default behavior when Performance power setting is used
                 -1: force off. (Never enter Low Power Mode)
                  1: force on. (Always stay in Low Power Mode)
                  0: auto. (opportunistic Low Power Mode enter/exit)
            --&gt;
            &lt;PerformanceDef&gt;-1|0|1&lt;/PerformanceDef&gt;

            &lt;!--
                 Default behavior when Balanced power setting is used
                 -1: force off. (Never enter Low Power Mode)
                  1: force on. (Always stay in Low Power Mode)
                  0: auto. (opportunistic Low Power Mode enter/exit)
            --&gt;
            &lt;BalancedDef&gt;-1|0|1&lt;/BalancedDef&gt;

            &lt;!--
                 Default behavior when Power saver setting is used
                 -1: force off. (Never enter Low Power Mode)
                  1: force on. (Always stay in Low Power Mode)
                  0: auto. (opportunistic Low Power Mode enter/exit)
            --&gt;
            &lt;PowersaverDef&gt;-1|0|1&lt;/PowersaverDef&gt;

            &lt;!--
                 Use HFI LPM hints
                 0 : No
                 1 : Yes
            --&gt;
            &lt;HfiLpmEnable&gt;0|1&lt;/HfiLpmEnable&gt;

            &lt;!--
                 Use HFI SUV hints
                 0 : No
                 1 : Yes
            --&gt;
            &lt;HfiSuvEnable&gt;0|1&lt;/HfiSuvEnable&gt;

            &lt;!--
                 System utilization threshold to enter LP mode
                 from 0 - 100
            --&gt;
            &lt;util_entry_threshold&gt;Example threshold&lt;/util_entry_threshold&gt;

            &lt;!--
                 System utilization threshold to exit LP mode
                 from 0 - 100
            --&gt;
            &lt;util_exit_threshold&gt;Example threshold&lt;/util_exit_threshold&gt;

            &lt;!--
                 Entry delay. Minimum delay in non Low Power mode to
                 enter LPM mode.
            --&gt;
            &lt;EntryDelayMS&gt;Example delay&lt;/EntryDelayMS&gt;

            &lt;!--
                 Exit delay. Minimum delay in Low Power mode to
                 exit LPM mode.
            --&gt;
            &lt;ExitDelayMS&gt;Example delay&lt;/ExitDelayMS&gt;

            &lt;!--
                 Lowest hyst average in-LP-mode time in msec to enter LP mode
                 0: to disable hyst support
            --&gt;
            &lt;EntryHystMS&gt;Example hyst&lt;/EntryHystMS&gt;

            &lt;!--
                 Lowest hyst average out-of-LP-mode time in msec to exit LP mode
                 0: to disable hyst support
            --&gt;
            &lt;ExitHystMS&gt;Example hyst&lt;/ExitHystMS&gt;

            &lt;!--
                 EPP to use in Low Power Mode
                 0-255: Valid EPP value to use in Low Power Mode
                    -1: Don't change EPP in Low Power Mode
            --&gt;
            &lt;lp_mode_epp&gt;-1 | EPP value&lt;/lp_mode_epp&gt;

       &lt;/Configuration&gt;

</pre><h4><b>EXAMPLE</b> <b>CONFIGURATIONS</b></h4><pre>
       <b>Example</b> <b>1:</b> This is the minimum configuration.

       • lp_mode_cpus: not set. Detects the lp_mode_cpus automatically.

       • Mode: 0. Use cgroup-v2 systemd for task migration.

       • HfiLpmEnable: 0. Ignore HFI Low Power mode hints.

       • HfiSuvEnable: 0. Ignore HFI Survivability mode hints. With both HfiLpmEnable and HfiSuvEnable  cleared,
         the HFI monitor will be disabled.

       • util_entry_threshold: 0. Disable utilization monitor.

       • util_exit_threshold: 0. Disable utilization monitor.

       • EntryDelayMS: 0. Do not take effect when utilization monitor is disabled.

       • ExitDelayMS: 0. Do not take effect when utilization monitor is disabled.

       • EntryHystMS: 0. Do not take effect when utilization monitor is disabled.

       • ExitHystMS: 0. Do not take effect when utilization monitor is disabled.

       • lp_mode_epp: -1. Do not change EPP when entering Low Power Mode.

         &lt;?xml version="1.0"?&gt;
         &lt;Configuration&gt;
              &lt;lp_mode_cpus&gt;&lt;/lp_mode_cpus&gt;
              &lt;Mode&gt;0&lt;/Mode&gt;
              &lt;HfiLpmEnable&gt;0&lt;/HfiLpmEnable&gt;
              &lt;HfiSuvEnable&gt;0&lt;/HfiSuvEnable&gt;
              &lt;util_entry_threshold&gt;0&lt;/util_entry_threshold&gt;
              &lt;util_exit_threshold&gt;0&lt;/util_exit_threshold&gt;
              &lt;EntryDelayMS&gt;0&lt;/EntryDelayMS&gt;
              &lt;ExitDelayMS&gt;0&lt;/ExitDelayMS&gt;
              &lt;EntryHystMS&gt;0&lt;/EntryHystMS&gt;
              &lt;ExitHystMS&gt;0&lt;/ExitHystMS&gt;
              &lt;lp_mode_epp&gt;-1&lt;/lp_mode_epp&gt;
         &lt;/Configuration&gt;

       <b>Example</b> <b>2:</b>
       This is the typical configuration. The utilization thresholds and delays may be different based on requirement.

       • lp_mode_cpus: not set. Detects the lp_mode_cpus automatically.

       • Mode: 0. Use cgroup-v2 systemd for task migration.

       • HfiLpmEnable: 1. Enter/Exit Low Power Mode based on HFI hints.

       • HfiSuvEnable: 1. Enter/Exit Survivability mode based on HFI hints.

       • util_entry_threshold: 5. Enter Low Power Mode when system utilization is lower than 5%.

       • util_exit_threshold: 95. Exit Low Power Mode when the utilization of any of the lp_mode_cpus is higher than 95%.

       • EntryDelayMS: 0. Resample every 1000ms when system is out of Low Power Mode.

       • ExitDelayMS: 0. Resample adaptively based on the utilization of lp_mode_cpus when system is in Low Power Mode.

       • EntryHystMS: 2000. Ignore the current Enter Low Power Mode request when the previous average time stayed in Low Power Mode is lower than 2000ms.

       • ExitHystMS: 3000. Ignore the current Exit Low Power Mode request when the previous average time stayed out of Low Power Mode is lower than 3000ms.

       • lp_mode_epp: -1. Do not change EPP when entering Low Power Mode.

         &lt;?xml version="1.0"?&gt;
         &lt;Configuration&gt;
              &lt;lp_mode_cpus&gt;&lt;/lp_mode_cpus&gt;
              &lt;Mode&gt;0&lt;/Mode&gt;
              &lt;HfiLpmEnable&gt;1&lt;/HfiLpmEnable&gt;
              &lt;HfiSuvEnable&gt;1&lt;/HfiSuvEnable&gt;
              &lt;util_entry_threshold&gt;5&lt;/util_entry_threshold&gt;
              &lt;util_exit_threshold&gt;95&lt;/util_exit_threshold&gt;
              &lt;EntryDelayMS&gt;0&lt;/EntryDelayMS&gt;
              &lt;ExitDelayMS&gt;0&lt;/ExitDelayMS&gt;
              &lt;EntryHystMS&gt;2000&lt;/EntryHystMS&gt;
              &lt;ExitHystMS&gt;3000&lt;/ExitHystMS&gt;
              &lt;lp_mode_epp&gt;-1&lt;/lp_mode_epp&gt;
         &lt;/Configuration&gt;

                                                   1 Jun 2023                           <u><a href="../man5/intel_lpmd_config.xml.5.html">intel_lpmd_config.xml</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>