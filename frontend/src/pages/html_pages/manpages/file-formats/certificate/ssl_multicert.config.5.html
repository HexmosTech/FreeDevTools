<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ssl_multicert.config - Traffic Server SSL certificate configuration file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/trafficserver">trafficserver_9.2.5+ds-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ssl_multicert.config - Traffic Server SSL certificate configuration file

       The  <u>ssl_multicert.config</u>  file lets you configure Traffic Server to use multiple SSL server certificates
       to terminate the SSL sessions. If you have a Traffic Server system with more than one IP address assigned
       to it, then you can assign a different SSL certificate to be served when a client requests  a  particular
       IP address or host name.

       At configuration time, certificates are parsed to extract the certificate subject and all the DNS <u>subject</u>
       <u>alternative</u> <u>names</u>.  A certificate will be presented for connections requesting any of the hostnames found
       in  the  certificate. Wildcard names are supported, but only of the form <u>*.domain.com</u>, ie. where <u>*</u> is the
       leftmost domain component.

       Changes to <u>ssl_multicert.config</u> can be applied to a  running  Traffic  Server  using  <u>traffic_ctl</u>  <u>config</u>
       <u>reload</u>.

</pre><h4><b>FORMAT</b></h4><pre>
       Each <u>ssl_multicert.config</u> line consists of a sequence of <u>key=value</u> fields that specify how Traffic Server
       should use a particular SSL certificate.

       <b>ssl_cert_name=FILENAME[,FILENAME</b> <b>...]</b>
              The name of the file containing the TLS certificate. <u>FILENAME</u> is located relative to the directory
              specified  by  the  <u>proxy.config.ssl.server.cert.path</u> configuration variable.  It may also include
              the intermediate CA certificates, sorted from leaf to root.  At a minimum, the file must include a
              leaf certificate.

              When running with OpenSSL 1.0.2 or later, this directive can be used to configure the intermediate
              CA chain on a per-certificate basis.  Multiple chain files are separated by comma character.   For
              example,  it  is  possible able to configure a ECDSA certificate chain and a RSA certificate chain
              and serve them simultaneously, allowing OpenSSL to determine which certificate would be used  when
              the TLS session cipher suites are negotiated.  Note that the leaf certs in <u>FILENAME1</u> and <u>FILENAME2</u>
              must  have  the  same  subjects and alternate names. The first certificate is used to to match the
              client's SNI request.

              You can also configure multiple leaf certificates in a same chain with OpenSSL 1.0.1.

              This is the only field that is required to be present.

       <b>dest_ip=ADDRESS</b> <b>(optional)</b>
              The IP (v4 or v6) address that the certificate should be presented on. This is now only used as  a
              fallback  in  the case that the TLS ServerNameIndication extension is not supported. If <u>ADDRESS</u> is
              <u>*</u>, the corresponding certificate will be used as the global default fallback if no other match can
              be made. The address may contain a port specifier, in which  case  the  corresponding  certificate
              will  only  match for connections accepted on the specified port.  IPv6 addresses must be enclosed
              by square brackets if they have a port, eg, [::1]:80. Care should be taken to  make  each  ADDRESS
              unique.

       <b>ssl_key_name=FILENAME</b> <b>(optional)</b>
              The  name of the file containing the private key for this certificate.  If the key is contained in
              the certificate file, this field can be omitted, otherwise <u>FILENAME</u> is resolved  relative  to  the
              <u>proxy.config.ssl.server.private_key.path</u> configuration variable.

       <b>ssl_ca_name=FILENAME</b> <b>(optional)</b>
              If  the  certificate  is  issued  by  an authority that is not in the system CA bundle, additional
              certificates may be needed to validate the certificate chain. <u>FILENAME</u> is resolved relative to the
              <u>proxy.config.ssl.CA.cert.path</u> configuration variable.

       <b>ssl_ocsp_name=FILENAME</b> <b>(optional)</b>
              The name of the file containing the prefetched OCSP stapling response for this  certificate.  This
              field  can  be  omitted  to  let  trafficserver  fetch OCSP responses dynamically. Otherwise, when
              included, the administrator is responsible for updating the file's content. <u>FILENAME</u>  is  resolved
              relative to the <u>proxy.config.ssl.ocsp.response.path</u> configuration variable.

       <b>ssl_ticket_enabled=1|0</b> <b>(optional)</b>
              Enable  <u>RFC</u>  <u>5077</u>  stateless  TLS  session tickets. To support this, OpenSSL should be upgraded to
              version 0.9.8f or higher. This option must be set to <u>0</u> to disable session ticket support.

       <b>ssl_ticket_number=INTEGER</b> <b>(optional)</b>
              Specifies the number of TLSv1.3 session tickets that are issued.  This defaults to 2 (the  OpenSSL
              default)

       <b>ssl_key_dialog=builtin|"exec:/path/to/program</b> <b>[args]"</b> <b>(optional)</b>
              Method used to provide a pass phrase for encrypted private keys.  If the pass phrase is incorrect,
              SSL  negotiation  for  this dest_ip will fail for clients who attempt to connect.  Two options are
              supported: builtin and exec:

                 <b>builtin</b> <b>-</b> <b>Requests</b> <b>pass</b> <b>phrase</b> <b>via</b> <b>stdin/stdout.</b> <b>User</b> <b>will</b> <b>be</b>
                        provided the ssl_cert_name and be prompted for the pass phrase.  Useful for debugging.

                 <b>exec:</b> <b>-</b> <b>Executes</b> <b>program</b> <b>/path/to/program</b> <b>and</b> <b>passes</b> <b>args,</b> <b>if</b>
                        specified, to the program and reads the output from stdout for the pass phrase.  If args
                        are provided then the entire exec:  string  must  be  quoted  with  ""  (see  examples).
                        Arguments with white space are supported by single quoting (').  The intent is that this
                        program  runs  a  security  check  to  ensure  that  the system is not compromised by an
                        attacker before providing the pass phrase.

</pre><h4><b>CERTIFICATE</b> <b>SELECTION</b></h4><pre>
       Traffic Server attempts two certificate selections during SSL connection setup. An initial  selection  is
       made  when  a TCP connection is accepted. This selection examines the IP address and port that the client
       is connecting to and chooses the best certificate from the those that have a <b>dest_ip</b> specification. If no
       matching certificates are found, a default certificate is chosen.  The  final  certificate  selection  is
       made  during  the  SSL  handshake.  At this point, the client may use <u>Server</u> <u>Name</u> <u>Indication</u> to request a
       specific hostname. Traffic Server will use this request to select a certificate with a  matching  subject
       or subject alternative name.  Failing that, a wildcard certificate match is attempted. If no match can be
       made, the initial certificate selection remains in force.

       In  all  cases,  Traffic Server attempts to select the most specific match. An address specification that
       contains a port number will take precedence over a specification that does not contain a port  number.  A
       specific  certificate  subject  will take precedence over a wildcard certificate. In the case of multiple
       matching certificates the first match will be returned to non-SNI capable clients.

</pre><h4><b>EXAMPLES</b></h4><pre>
       The following example configures Traffic Server to use the SSL certificate <b>server.pem</b> for all requests to
       the IP address 111.11.11.1 and the SSL certificate  <b>server1.pem</b>  for  all  requests  to  the  IP  address
       11.1.1.1. Connections from all other IP addresses are terminated with the <b>default.pem</b> certificate.  Since
       the private key is included in the certificate files, no private key name is specified.

          dest_ip=111.11.11.1 ssl_cert_name=server.pem
          dest_ip=11.1.1.1 ssl_cert_name=server1.pem
          dest_ip=* ssl_cert_name=default.pem

       The  following  example  configures  Traffic  Server  to use the ECDSA certificate chain <b>ecdsa.pem</b> or RSA
       certificate chain <b>rsa.pem</b> for all requests.

          dest_ip=* ssl_cert_name=ecdsa.pem,rsa.pem

       The following example configures Traffic Server to use the  ECDSA  certificate  chain  <b>ecdsa.pem</b>  or  RSA
       certificate  chain  <b>rsa.pem</b>  for  all requests, the public key and private key are in separate PEM files.
       Note that the number of files in ssl_key_name must match the files in ssl_cert_name, and they  should  be
       presented in the same order.

          dest_ip=* ssl_cert_name=ecdsa_pub.pem,rsa_pub.pem ssl_key_name=ecdsa_private.pem,rsa_private.pem

       The following example configures Traffic Server to use the SSL certificate <b>server.pem</b> and the private key
       <b>serverKey.pem</b>  for  all  requests  to port 8443 on IP address 111.11.11.1. The <b>general.pem</b> certificate is
       used for server name matches.

          dest_ip=111.11.11.1:8443 ssl_cert_name=server.pem ssl_key_name=serverKey.pem ssl_cert_name=general.pem

       The following example configures Traffic Server to use the SSL certificate <b>server.pem</b> for all requests to
       the IP address 111.11.11.1. Session tickets are enabled with a persistent ticket key.

          dest_ip=111.11.11.1 ssl_cert_name=server.pem ssl_ticket_enabled=1 ticket_key_name=ticket.key

       The following example configures Traffic Server to use the SSL certificate <b>server.pem</b> and disable session
       tickets for all requests to the IP address 111.11.11.1.

          dest_ip=111.11.11.1 ssl_cert_name=server.pem ssl_ticket_enabled=0

       The following examples configure Traffic Server to use the SSL certificate <b>server.pem</b> which  includes  an
       encrypted private key.  The external program /usr/bin/mypass will be called on startup with one parameter
       (foo)  in  the first example, and with two parameters (foo) and (ba r) in the second example, the program
       (mypass) will return the pass phrase to decrypt the keys.

          ssl_cert_name=server1.pem ssl_key_dialog="exec:/usr/bin/mypass foo"
          ssl_cert_name=server2.pem ssl_key_dialog="exec:/usr/bin/mypass foo 'ba r'"

</pre><h4><b>COPYRIGHT</b></h4><pre>
       2025, <a href="mailto:dev@trafficserver.apache.org">dev@trafficserver.apache.org</a>

9.2                                               May 22, 2025                           <u><a href="../man5/SSL_MULTICERT.CONFIG.5.html">SSL_MULTICERT.CONFIG</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>