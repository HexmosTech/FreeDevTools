<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tunnels - Shorewall VPN definition file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/shorewall">shorewall_5.2.8-6_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       tunnels - Shorewall VPN definition file

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>/etc/shorewall[6]/tunnels</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The tunnels file is used to define rules for encapsulated (usually encrypted) traffic to pass between the
       Shorewall system and a remote gateway. Traffic flowing through the tunnel is handled using the normal
       zone/policy/rule mechanism. See <b>https://shorewall.org/VPNBasics.html</b>[1] for details.

       The columns in the file are as follows.

       <b>TYPE</b> -
       {<b>ipsec</b>[<b>:{noah</b>|ah}]|<b>ipsecnat</b>|<b>ipip</b>|<b>gre</b>|l2tp|<b>pptpclient</b>|<b>pptpserver</b>|?COMMENT|{<b>openvpn</b>|<b>openvpnclient</b>|<b>openvpnserver</b>}[:{<b>tcp</b>|<b>udp</b>}]<b>[</b>:<u>port</u>]|<b>generic:</b><u>protocol</u>[<b>:</b><u>port</u>]}
           Types are as follows:

                       <b>6to4</b> or <b>6in4</b>  - 6to4 or 6in4 tunnel. The <b>6in4</b> synonym was added in 4.4.24.
                       <b>ipsec</b>         - IPv4 IPSEC
                       <b>ipsecnat</b>      - IPv4 IPSEC with NAT Traversal (UDP port 4500 encapsulation)
                       <b>ipip</b>          - IPv4 encapsulated in IPv4 (Protocol 4)
                       <b>gre</b>           - Generalized Routing Encapsulation (Protocol 47)
                       <b>l2tp</b>          - Layer 2 Tunneling Protocol (UDP port 1701)
                       <b>pptpclient</b>    - PPTP Client runs on the firewall
                       <b>pptpserver</b>    - PPTP Server runs on the firewall
                       <b>openvpn</b>       - OpenVPN in point-to-point mode
                       <b>openvpnclient</b> - OpenVPN client runs on the firewall
                       <b>openvpnserver</b> - OpenVPN server runs on the firewall
                       <b>generic</b>       - Other tunnel type
                       <b>tinc</b>          - TINC (added in Shorewall 4.6.6)

           If the type is <b>ipsec</b>, it may be followed by <b>:ah</b> to indicate that the Authentication Headers protocol
           (51) is used by the tunnel (the default is <b>:noah</b> which means that protocol 51 is not used). NAT
           traversal is only supported with ESP (protocol 50) so <b>ipsecnat</b> tunnels don't allow the <b>ah</b> option
           (<b>ipsecnat:noah</b> may be specified but is redundant).

           If type is <b>openvpn</b>, <b>openvpnclient</b> or <b>openvpnserver</b> it may optionally be followed by ":" and <b>tcp</b> or
           <b>udp</b> to specify the protocol to be used. If not specified, <b>udp</b> is assumed.

           If type is <b>openvpn</b>, <b>openvpnclient</b> or <b>openvpnserver</b> it may optionally be followed by ":" and the port
           number used by the tunnel. if no ":" and port number are included, then the default port of 1194 will
           be used. . Where both the protocol and port are specified, the protocol must be given first (e.g.,
           openvpn:tcp:4444).

           If type is <b>generic</b>, it must be followed by ":" and a protocol name (from <a href="file:/etc/protocols">/etc/protocols</a>) or a
           protocol number. If the protocol is <b>tcp</b> or <b>udp</b> (6 or 17), then it may optionally be followed by ":"
           and a port number.

           Comments may be attached to Netfilter rules generated from entries in this file through the use of
           /COMMENT lines. These lines begin with ?COMMENT; the remainder of the line is treated as a comment
           which is attached to subsequent rules until another ?COMMENT line is found or until the end of the
           file is reached. To stop adding comments to rules, use a line containing only ?COMMENT.

               <b>Note</b>
               Beginning with Shorewall 4.5.11, ?COMMENT is a synonym for COMMENT and is preferred.

       <b>ZONE</b> - <u>zone</u>
           The <u>zone</u> of the physical interface through which tunnel traffic passes. This is normally your
           internet zone.

       <b>GATEWAY</b>(S) (gateway or gateways) - <u>address-or-range</u> <b>[</b> <b>,</b> <b>...</b> <b>]</b>
           The IP address of the remote tunnel gateway. If the remote gateway has no fixed address (Road
           Warrior) then specify the gateway as <b>0.0.0.0/0</b>. May be specified as a network address and if your
           kernel and iptables include iprange match support then IP address ranges are also allowed.

           Beginning with Shorewall 4.5.3, a list of addresses or ranges may be given. Exclusion
           (<b>shorewall-exclusion</b>[2] (5) ) is not supported.

       <b>GATEWAY</b> <b>ZONES</b> (gateway_zone or gateway_zones) - [<u>zone</u>[<b>,</b><u>zone</u>]...]
           Optional. If the gateway system specified in the third column is a standalone host then this column
           should contain a comma-separated list of the names of the zones that the host might be in. This
           column only applies to IPSEC tunnels where it enables ISAKMP traffic to flow through the tunnel to
           the remote gateway(s).

</pre><h4><b>EXAMPLE</b></h4><pre>
       IPv4 Example 1:
           IPSec tunnel.

           The remote gateway is 4.33.99.124 and the remote subnet is 192.168.9.0/24. The tunnel does not use
           the AH protocol

                       #TYPE           ZONE    GATEWAY
                       ipsec:noah      net     4.33.99.124

       IPv4 Example 2:
           Road Warrior (LapTop that may connect from anywhere) where the "gw" zone is used to represent the
           remote LapTop

                       #TYPE           ZONE    GATEWAY         GATEWAY ZONES
                       ipsec           net     0.0.0.0/0       gw

       IPv4 Example 3:
           Host 4.33.99.124 is a standalone system connected via an ipsec tunnel to the firewall system. The
           host is in zone gw.

                       #TYPE           ZONE    GATEWAY         GATEWAY ZONES
                       ipsec           net     4.33.99.124     gw

       IPv4 Example 4:
           Road Warriors that may belong to zones vpn1, vpn2 or vpn3. The FreeS/Wan _updown script will add the
           host to the appropriate zone using the <b>shorewall</b> <b>add</b> command on connect and will remove the host from
           the zone at disconnect time.

                       #TYPE           ZONE    GATEWAY         GATEWAY ZONES
                       ipsec           net     0.0.0.0/0       vpn1,vpn2,vpn3

       IPv4 Example 5:
           You run the Linux PPTP client on your firewall and connect to server 192.0.2.221.

                       #TYPE           ZONE    GATEWAY         GATEWAY ZONES
                       pptpclient      net     192.0.2.221

       IPv4 Example 6:
           You run a PPTP server on your firewall.

                       #TYPE           ZONE    GATEWAY         GATEWAY ZONES
                       pptpserver      net     0.0.0.0/0

       Example 7:
           OPENVPN tunnel. The remote gateway is 4.33.99.124 and openvpn uses port 7777.

                       #TYPE           ZONE    GATEWAY         GATEWAY ZONES
                       openvpn:7777    net     4.33.99.124

       IPv4 Example 8:
           You have a tunnel that is not one of the supported types. Your tunnel uses UDP port 4444. The other
           end of the tunnel is 4.3.99.124.

                       #TYPE            ZONE    GATEWAY         GATEWAY ZONES
                       generic:udp:4444 net     4.3.99.124

       IPv4 Example 9:
           TINC tunnel where the remote gateways are not specified. If you wish to specify a list of gateways,
           you can do so in the GATEWAY column.

                       #TYPE            ZONE    GATEWAY          GATEWAY ZONES
                       tinc             net     0.0.0.0/0

       IPv6 Example 1:
           IPSec tunnel.

           The remote gateway is 2001:cec792b4:1::44. The tunnel does not use the AH protocol

                       #TYPE           ZONE    GATEWAY
                       ipsec:noah      net     2002:cec792b4:1::44

       IPv6 Example 2:
           Road Warrior (LapTop that may connect from anywhere) where the "gw" zone is used to represent the
           remote LapTop

                       #TYPE           ZONE    GATEWAY                 GATEWAY ZONES
                       ipsec           net     ::/0                    gw

       IPv6 Example 3:
           Host 2001:cec792b4:1::44 is a standalone system connected via an ipsec tunnel to the firewall system.
           The host is in zone gw.

                       #TYPE           ZONE    GATEWAY                 GATEWAY ZONES
                       ipsec           net     2001:cec792b4:1::44     gw

       IPv6 Example 4:
           OPENVPN tunnel. The remote gateway is 2001:cec792b4:1::44 and openvpn uses port 7777.

                       #TYPE           ZONE    GATEWAY                 GATEWAY ZONES
                       openvpn:7777    net     2001:cec792b4:1::44

       IPv6 Example 8:
           You have a tunnel that is not one of the supported types. Your tunnel uses UDP port 4444. The other
           end of the tunnel is 2001:cec792b4:1::44.

                       #TYPE            ZONE    GATEWAY                GATEWAY ZONES
                       generic:udp:4444 net     2001:cec792b4:1::44

       IPv6 Example 9:
           TINC tunnel where the remote gateways are not specified. If you wish to specify a list of gateways,
           you can do so in the GATEWAY column.

                       #TYPE            ZONE    GATEWAY          GATEWAY ZONES
                       tinc             net     ::/0

</pre><h4><b>FILES</b></h4><pre>
       /etc/shorewall/tunnels

       /etc/shorewall6/tunnels

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>https://shorewall.org/configuration_file_basics.htm#Pairs</b>[3]

       <a href="../man8/shorewall.8.html">shorewall</a>(8)

</pre><h4><b>NOTES</b></h4><pre>
        1. https://shorewall.org/VPNBasics.html
           https://shorewall.org/VPNBasics.html

        2. shorewall-exclusion
           https://shorewall.org/manpages/shorewall-exclusion.html

        3. https://shorewall.org/configuration_file_basics.htm#Pairs
           https://shorewall.org/configuration_file_basics.htm#Pairs

Configuration Files                                09/24/2020                               <u><a href="../man5/SHOREWALL-TUNNELS.5.html">SHOREWALL-TUNNELS</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>