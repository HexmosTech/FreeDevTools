<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>amanda-command-file - Keep status of outgoing dle commands</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/amanda-common">amanda-common_3.5.4-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       amanda-command-file - Keep status of outgoing dle commands

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <u>command-file</u> file keep information of outgoing dumps commands, dumps to flush from holding disk to
       storage, dumps to copy (vault) from one storage to another, dumps with outgoing restore request.

       The file is in text. The first line is the version of the file, the second line is an id that increment
       on each new insertion in the file.

       Each following line start with an id followed by one the keywords:

       <b>FLUSH</b>
           Entry that list a holding file and a storage where it must be flushed.

       <b>COPY</b>
           Entry that list a dump from a storage and a storage where to copy it (vault).

       <b>RESTORE</b>
           Entry that list a dump from a storage that have a restore request. An entry is automatically removed
           24 hours after it is created.

       Amanda never overwrite a volume if one its dump have a command in the <u>command-file</u>.

</pre><h4><b>FLUSH</b> <b>LINE</b></h4><pre>
       id <b>FLUSH</b> config holding-file hostname diskname dump-timestamp dump-level storage WORKING:pid STATUS.fi

       id
           The id of the command.

       FLUSH
           The FLUSH keyword.

       config
           The config to which that command apply.

       holding-file
           The holding-file to flush.

       hostname
           The hostname of the dump.

       diskname
           The diskname of the dump.

       dump-timestamp
           The timestamp of the dump.

       dump-level
           The level of the dump.

       storage
           The storage where to flush the dump.

       WORKING:pid
           The pid of the process doing the flush, or 0.

       STATUS
           TODO or DONE.

</pre><h4><b>COPY</b> <b>LINE</b></h4><pre>
       id <b>COPY</b> config src-storage src-pool src-label src-fileno src-labels-str start-time hostname diskname dump-timestamp dump-level dest-storage WORKING:pid STATUS.fi

       id
           The id of the command.

       COPY
           The COPY keyword.

       config
           The config to which that command apply.

       src-srorage
           The storage where to find the dump.

       src-pool
           The pool where to find the dump.

       src-label
           The label of the first part of the dump

       src-fileno
           The fileno of the first part of the dump

       src-labels-str
           The list of all source labels required

       start-time
           When to start the copy

       hostname
           The hostname of the dump.

       diskname
           The diskname of the dump.

       dump-timestamp
           The timestamp of the dump.

       dump-level
           The level of the dump.

       dest-storage
           The storage where to copy the dump.

       WORKING:pid
           The pid of the process doing the copy, or 0.

       STATUS
           TODO or DONE.

</pre><h4><b>RESTORE</b> <b>LINE</b></h4><pre>
       To restore from a storage:

       id <b>RESTORE</b> config src-storage src-pool src-label    src-fileno expire hostname diskname dump-timestamp dump-level WORKING:pid STATUS.fi

       or to restore from a holding file:

       id <b>RESTORE</b> config HOLDING     HOLDING  holding-file 0          expire hostname diskname dump-timestamp dump-level WORKING:pid STATUS.fi

       id
           The id of the command.

       RESTORE
           The RESTORE keyword.

       config
           The config to which that command apply.

       src-srorage
           The storage where to find the dump.

       src-pool
           The pool where to find the dump.

       src-label
           The label of the first part of the dump.

       HOLDING
           The HOLDING keyword.

       holding-file
           The full path of the holding file.

       src-fileno
           The fileno of the first part of the dump

       expire
           When this command expire and can be automatically removed from the file.

       src-labels-str
           The list of all source labels required

       start-time
           When to start the copy

       hostname
           The hostname of the dump.

       diskname
           The diskname of the dump.

       dump-timestamp
           The timestamp of the dump.

       dump-level
           The level of the dump.

       WORKING:pid
           The pid of the process doing the copy, or 0.

       STATUS
           TODO or DONE.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/amanda.8.html">amanda</a></b>(8), <b><a href="../man5/amanda.conf.5.html">amanda.conf</a></b>(5)

       The Amanda Wiki: : <a href="http://wiki.zmanda.com/">http://wiki.zmanda.com/</a>

</pre><h4><b>AUTHOR</b></h4><pre>
       <b>Jean-Louis</b> <b>Martineau</b> &lt;<a href="mailto:martineau@zmanda.com">martineau@zmanda.com</a>&gt;
           Zmanda, Inc. (<a href="http://www.zmanda.com">http://www.zmanda.com</a>)

Amanda 3.5.4                                       01/25/2025                              <u><a href="../man5/AMANDA-COMMAND-FIL.5.html">AMANDA-COMMAND-FIL</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>