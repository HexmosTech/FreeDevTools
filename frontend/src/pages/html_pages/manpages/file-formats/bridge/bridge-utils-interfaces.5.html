<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>bridge-utils-interfaces - bridge-utils extensions for the interfaces(5) file format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/bridge-utils">bridge-utils_1.7.1-4ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       bridge-utils-interfaces - bridge-utils extensions for the <b><a href="../man5/interfaces.5.html">interfaces</a></b>(5) file format

</pre><h4><b>DESCRIPTION</b></h4><pre>
       /etc/network/interfaces  contains  network  interface  configuration  information  for  the  <b><a href="../man8/ifup.8.html">ifup</a></b>(8)  and
       <b><a href="../man8/ifdown.8.html">ifdown</a></b>(8) commands.  This manpage describes the bridge extensions  to  the  standard  <b><a href="../man5/interfaces.5.html">interfaces</a></b>(5)  file
       format.

       The  main  extension  is the bridge_ports option, with it you describe that the interface is a bridge and
       what ports does it have. These ports are the interfaces that are part of the bridge, and  they  shouldn't
       have  any  stanzas  defining  them  on the interfaces file. Other extensions allow you to tune the bridge
       options or change a bridge behaviour.

       We'll see this with an example:
       auto br0
       iface br0 inet static
           address 192.168.1.2
           network 192.168.1.0
           netmask 255.255.255.0
           broadcast 192.168.1.255
           gateway 192.168.1.1
           bridge_ports all
       Well, after setting this, an ifup br0, or the next reboot, should let you have a bridge up  and  running,
       after  waiting  for  the  ports to get to the forwarding status, of course. This bridge will be using all
       your ethX interfaces, as we have stated on the bridge_ports line.

       The Debian bridge setup scripts will wait for it to get ready to work. They do this by  trying  to  guess
       the  maximum  time  that  the bridge will need to get to the forwarding status, and by default, they will
       wait for the bridge to get there, or for the estimated maximum time to go by.  This is done so  that  the
       services  that  are loaded after the bridge setup have a working network interface and don't fail because
       the bridge is still not working. See bridge_maxwait if you want to change this behaviour.

       An example of how to setup a so called anonymous bridge (a bridge without an assigned IP) would look like
       this:
       iface br1 inet manual
            bridge_ports eth1 eth2
            bridge_maxwait 0
       Here we select the interfaces eth1 and eth2 to be added to the bridge interface br1,  which  will  be  an
       anonymous bridge, we also tell the scripts not to wait, as we won't be having any service running on that
       interface (it doesn't even have an IP).

       An example of a little more complex bridge setup could be:
       auto br0
       iface br0 inet static
           address 192.168.1.2
           network 192.168.1.0
           netmask 255.255.255.0
           broadcast 192.168.1.255
           bridge_ports all weird0
           bridge_bridgeprio 32767
           bridge_portprio eth0 129
           bridge_fd 5
           pre-up ip addr flush dev eth0
       In  this  example  we  select all the eth* devices plus a weird device to be added to the bridge, also we
       change the bridge default priority to a higher one so that this bridge becomes the root (if there are  no
       bridges  with  higher priority on the net, that is) and also we lower priority of port eth0 so that it is
       not used if there are other ports with higher priority to reach the same destination, at the end we lower
       the default forward delay and we add a pre-up command to remove all addresses on eth0 as  this  interface
       had an address set up before (needed only on weird/broken setups).

       If there is a need to set up any of the interfaces participating on the bridge and not the bridge itself,
       then  we  must add the commands to set up those settings in a "pre-up" or "up" statement. This means that
       if we have a wireless card that we want to add to a bridge and we want to set it to  master,  and  select
       the  essid,  instead  of  using  the  typical  wireless_*  commands we could add to the bridge definition
       something like this:
       pre-up iwconfig wlan0 mode master essid myESSID
       Be aware, however, that using wireless cards as part of a bridge is not a good idea if the card belonging
       to the bridge is in managed mode.  Trying to bridge packets coming out of our LAN through a wireless card
       that is set in managed mode (the card is a client of an AP) is bound to give problems,  as  the  AP  will
       probably  refuse  packets  with  source  MAC addresses which are not associated (this will be the case of
       other machines going through the wireless card of the bridge into the AP).

       Multiple stanzas of a bridge definition are currently not supported, so if you want to add a ipv6  and  a
       ipv4  to  a bridge do it all in one definition by using the "up" option. If however you still want to use
       multiple stanzas or would like to read more on this bug you can see it at <a href="http://bugs.debian.org/319832">http://bugs.debian.org/319832</a>

</pre><h4><b>IFACE</b> <b>OPTIONS</b></h4><pre>
       A little explanation on the new options that can be used on /etc/network/interfaces to setup the  bridge,
       so you don't have to go and look at the scripts...

       <b>bridge_ports</b> <u>interface</u> <u>specification</u>
              this option must exist for the scripts to setup the bridge, with it you specify the ports you want
              to add to your bridge, either using "none" if you want a bridge without any interfaces or you want
              to  add  them  later using brctl, or a list of the interfaces you want to add separated by spaces,
              for example:
              bridge_ports eth0 eth4
              You should not put any lines to configure the interfaces that will be used by the bridge, as  this
              will be setup automatically by the scripts when bringing the bridge up.

              If you need to specify the interfaces more flexibly, you can use the following syntax (most useful
              on a Xen dom0):
              bridge_ports regex (eth|vif).*
              This means to evaluate (as in <b><a href="../man1/egrep.1.html">egrep</a></b>(1)) the expressions that follow after "regex" until either the
              end  or a "noregex" statement is reached.  The regular expressions are evaluated against all local
              interfaces and those that match are added.

              Specifying "all" is short for "regex eth.* em.* p[0-9].* noregex" and will get all  the  ethX  and
              biosdevname-format (emX and pX) interfaces added to the bridge.

              Carrying this to the extremes, the following is valid syntax:
              bridge_ports all regex if.0 noregex ext0 regex vif.*
              This  will  add  all  ethX  interfaces,  the  ifX0  interfaces,  the  ext0  interface and all vifX
              interfaces.

       <b>bridge_ageing</b> <u>time</u>
              set ageing time, default is 300, can have a fractional part.

       <b>bridge_bridgeprio</b> <u>priority</u>
              set bridge priority, <u>priority</u> is between 0 and 65535, default is 32768, affects bridge id,  lowest
              priority bridge will be the root.

       <b>bridge_fd</b> <u>time</u>
              set bridge forward delay to <u>time</u> seconds, default is 15, can have a fractional part.

       <b>bridge_gcint</b> <u>time</u>
              set  garbage  collection  interval  to  <u>time</u>  seconds,  default  is 4, can have a fractional part.
              Available on Linux kernel versions &lt; 2.6.0.

       <b>bridge_hello</b> <u>time</u>
              set hello time to <u>time</u> seconds, default is 2, can have a fractional part.

       <b>bridge_hw</b> <u>MAC_address|interface</u>
              set the Ethernet MAC address of the bridge to the specified one or to the address of the specified
              interface.  There were some concerns of how this was done in the past but we are doing it on a new
              way now, it is currently not only considered safe but also necessary or recommended in  a  lot  of
              scenarios like IPv6, DHCP reservations, ... the ussage of bridge_hw setting if the recommended way
              of doing this.

       <b>bridge_maxage</b> <u>time</u>
              set max message age to <u>time</u> seconds, default is 20, can have a fractional part.

       <b>bridge_maxwait</b> <u>time</u>
              forces  to  <u>time</u>  seconds  the maximum time that the Debian bridge setup scripts will wait for the
              bridge ports to get to the forwarding status, doesn't allow factional part. If it is  equal  to  0
              then no waiting is done.

       <b>bridge_pathcost</b> <u>port</u> <u>cost</u>
              set  path  cost  for a port, from 1 to 65535, default is 100, <u>port</u> is the name of the interface to
              which this setting applies.

       <b>bridge_portprio</b> <u>port</u> <u>priority</u>
              set port priority, from 0 (max) to 63 (min), default is 32, affects port id, <u>port</u> is the  name  of
              the interface to which this setting applies.

       <b>bridge_stp</b> <u>state</u>
              turn  spanning tree protocol on/off, <u>state</u> values are on or yes to turn stp on and any other thing
              to set it off, default has changed to off for security reasons in latest kernels,  so  you  should
              specify  if  you  want  stp  on  or  off  with  this option, and not rely on your kernel's default
              behaviour.

       <b>bridge_token</b> <u>token</u>
              set IPv6 tokenized interface identifier for the bridge to token, see <b><a href="../man8/ip-token.8.html">ip-token</a></b>(8) for more info  on
              this.

       <b>bridge_vlan_aware</b> <u>yes/no</u>
              specify if the bridge is vlan aware an thus needs vlan filtering to be activated or not.

       <b>bridge_waitport</b> <u>time</u> <u>[ports]</u>
              wait  for  a  max  of  <u>time</u>  seconds  for the specified <u>ports</u> to become available, if no ports are
              specified then those specified on bridge_ports will be used here. Specifying no ports here  should
              not be used if we are using regex or "all" on bridge_ports, as it wouldn't work.

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/network/interfaces</u>
              definitions of network interfaces See <b><a href="../man5/interfaces.5.html">interfaces</a></b>(5) for more information.

       <b>KNOWN</b> <b>BUGS/LIMITATIONS</b>
              The  default  values shown here are current values as of this writing, but as they are not related
              to this package but to the bridge code itself, can change anytime.

</pre><h4><b>AUTHOR</b></h4><pre>
       This manpage was written by Santiago Garcia Mantinan &lt;<a href="mailto:manty@debian.org">manty@debian.org</a>&gt; based on <u><a href="../man5/interfaces.5.html">interfaces</a></u>(5).

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/brctl.8.html">brctl</a></b>(8), <b><a href="../man5/interfaces.5.html">interfaces</a></b>(5), <b><a href="../man8/ifup.8.html">ifup</a></b>(8), <b><a href="../man8/ip-token.8.html">ip-token</a></b>(8), <b><a href="../man8/iwconfig.8.html">iwconfig</a></b>(8), <b><a href="../man8/run-parts.8.html">run-parts</a></b>(8).

bridge-utils                                     January 13 2008                      <u><a href="../man5/BRIDGE-UTILS-INTERFACES.5.html">BRIDGE-UTILS-INTERFACES</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>