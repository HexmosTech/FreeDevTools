<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>coap-client, coap-client-gnutls, coap-client-mbedtls, coap-client-openssl, coap-client-notls - CoAP</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcoap3-bin">libcoap3-bin_4.3.4-1.1build4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       coap-client, coap-client-gnutls, coap-client-mbedtls, coap-client-openssl, coap-client-notls - CoAP
       Client based on libcoap

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>coap-client</b> [<b>-a</b> addr] [<b>-b</b> [num,]size] [<b>-e</b> text] [<b>-f</b> file] [<b>-l</b> loss] [<b>-m</b> method] [<b>-o</b> file] [<b>-p</b> port] [<b>-r</b>]
       [<b>-s</b> <b>duration</b>] [<b>-t</b> type] [<b>-v</b> num] [<b>-w</b>] [<b>-A</b> type] [<b>-B</b> seconds] [<b>-E</b> oscore_conf_file[,seq_file]] [<b>-G</b> count]
       [<b>-H</b> hoplimit] [<b>-K</b> interval] [<b>-L</b> value] [<b>-N</b>] [<b>-O</b> num,text] [<b>-P</b> scheme://addr[:port]] [<b>-T</b> token] [<b>-U</b>] [<b>-V</b>
       num] [<b>-X</b> size] [[<b>-h</b> match_hint_file] [<b>-k</b> key] [<b>-u</b> user]] [[<b>-c</b> certfile] [<b>-j</b> keyfile] [<b>-n</b>] [<b>-C</b> cafile] [<b>-J</b>
       pkcs11_pin] [<b>-M</b> rpk_file] [<b>-R</b> trust_casfile]] URI

       For <b>coap-client</b> versions that use libcoap compiled for different (D)TLS libraries, <b>coap-client-notls</b>,
       <b>coap-client-gnutls</b>, <b>coap-client-openssl</b>, <b>coap-client-mbedtls</b> or <b>coap-client-tinydtls</b> may be available.
       Otherwise, <b>coap-client</b> uses the default libcoap (D)TLS support.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>coap-client</b> is a CoAP client to communicate with 6LoWPAN devices via the protocol CoAP (RFC 7252) using
       the URI given as argument on the command line. The URI must have the scheme <u>coap</u>, <u>coap+tcp</u>, <u>coaps</u> or
       <u>coaps+tcp</u>.

       <u>coaps</u> and <u>coaps+tcp</u> are only supported when coap-client is built with support for secure (D)TLS
       communication.

       If <u>coaps</u> or <u>coaps+tcp</u> is being used, provided the CoAP server supports PKI and is configured with a
       certificate and private key, the coap-client does not need to have a Pre-Shared Key (-k) or certificate
       (-c) configured.

       The URIâ€™s host part may be a DNS name, a literal IP address or a Unix domain name. For Unix domain names,
       %2F is used as the / separator to differentiate between the host and patch definitions. For IPv6 address
       references, angle brackets are required (c.f. EXAMPLES) to delimit the host portion of the URI.

</pre><h4><b>OPTIONS</b> <b>-</b> <b>GENERAL</b></h4><pre>
       <b>-a</b> addr
           The local address of the interface that has to be used.

           Note: Do not use this option if the interface is likely to be transient - i.e. it is a tunnel
           interface that may come and go, as this is likely to cause "No such device" errors on transmission.

       <b>-b</b> [num,]size
           The block size to be used in GET/PUT/POST requests (value must be a multiple of 16 not larger than
           1024 as libcoap uses a fixed maximum PDU size of 1400 bytes). If <u>num</u> is present, the request chain
           will start at block <u>num</u>. When the server includes a Block2 option in its response to a GET request,
           coap-client will automatically retrieve the subsequent block from the server until there are no more
           outstanding blocks for the requested content.

       <b>-e</b> text
           Include text as payload (use percent-encoding for non-ASCII characters).

       <b>-f</b> file
           File to send with PUT/POST (use <u>-</u> for STDIN).

       <b>-l</b> list
           Fail to send some datagrams specified by a comma separated list of numbers or number ranges
           (debugging only).

       <b>-l</b> loss%
           Randomly failed to send datagrams with the specified probability - 100% all datagrams, 0% no
           datagrams (debugging only).

       <b>-m</b> method
           The request method for action (get|put|post|delete), default is <u>get</u>. (Note that the string passed to
           <b>-m</b> is compared case-insensitive.)

       <b>-o</b> file
           A filename to store data retrieved with GET.

       <b>-p</b> port
           The port to send from.

       <b>-r</b>
           Use reliable protocol (TCP or TLS).

       <b>-s</b> duration
           Subscribe to / observe the resource specified by URI for the given <u>duration</u> in seconds.

       <b>-t</b> type
           Content format for given resource for PUT/POST.  <u>type</u> must be either a numeric value reflecting a
           valid CoAP content format or a string describing a registered format. The following registered
           content format descriptors are supported, with alternative shortcuts given in parentheses:

               text/plain (plain)
               application/link-format (link, link-format)
               application/xml (xml)
               application/octet-stream (binary, octet-stream)
               application/exi (exi)
               application/json (json)
               application/cbor (cbor)

       <b>-v</b> num
           The verbosity level to use (default 4, maximum is 8) for general CoAP logging.

       <b>-w</b>
           Append a newline to received data.

       <b>-A</b> type
           Accepted media type.  <u>type</u> must be either a numeric value reflecting a valid CoAP content format or a
           string that specifies a registered format as described for option <b>-t</b>.

       <b>-B</b> seconds
           Break operation after waiting given seconds (default is 90).

       <b>-E</b> oscore_conf_file[,seq_file]
           <u>oscore_conf_file</u> contains OSCORE configuration. See <b><a href="../man5/coap-oscore-conf.5.html">coap-oscore-conf</a></b>(5) for definitions. Optional
           <u>seq_file</u> (which is created if needed) is used to save the current transmit sequence number, so on
           client restart sequence numbers continue to increase and are not reset to prevent anti-replay
           mechanisms being triggered.

       <b>-G</b> count
           Repeat the Request <u>count</u> times with a second delay between each one. Must have a value between 1 and
           255 inclusive. Default is <u>1</u>.

       <b>-H</b> hoplimit
           Set the Hop Limit count to hoplimit for proxies. Must have a value between 1 and 255 inclusive.
           Default is <u>16</u>.

       <b>-K</b> interval
           Send a ping after interval seconds of inactivity. If not specified (or 0), keep-alive is disabled
           (default).

       <b>-L</b> value
           Sum of one or more COAP_BLOCK_* flag values for different block handling methods. Default is 1
           (COAP_BLOCK_USE_LIBCOAP).

               COAP_BLOCK_USE_LIBCOAP         1
               COAP_BLOCK_SINGLE_BODY         2
               COAP_BLOCK_TRY_Q_BLOCK         4
               COAP_BLOCK_USE_M_Q_BLOCK       8
               COAP_BLOCK_NO_PREEMPTIVE_RTAG 16

       <b>-N</b>
           Send NON-confirmable message. If option <b>-N</b> is not specified, a confirmable message will be sent.

       <b>-O</b> num,text
           Add option <u>num</u> with contents of <u>text</u> to the request. If the text begins with 0x, then the hex text
           (two [0-9a-f] per byte) is converted to binary data.

       <b>-P</b> scheme://addr[:port]
           Scheme, address and optional port to define how to connect to a CoAP proxy (automatically adds
           Proxy-Uri option to request) to forward the request to. Scheme is one of coap, coaps, coap+tcp and
           coaps+tcp.

       <b>-T</b> token
           Define the initial starting <u>token</u> for the request (up to 24 characters).

       <b>-U</b>
           Never include Uri-Host or Uri-Port options.

       <b>-V</b> num
           The verbosity level to use (default 3, maximum is 7) for (D)TLS library logging.

       <b>-X</b> size
           Maximum message size to use for TCP based connections (default is 8388864). Maximum value of 2^32 -1.

</pre><h4><b>OPTIONS</b> <b>-</b> <b>PSK</b></h4><pre>
       (If supported by underlying (D)TLS library)

       <b>-h</b> match_hint_file
           This is a file that contains one or more lines of received Identity Hints to match to use different
           user identity and associated pre-shared key (PSK) (comma separated) instead of the <b>-k</b> <b>key</b> and <b>-u</b> <b>user</b>
           options. E.g., per line

           hint_to_match,use_user,with_key

           A line that starts with # is treated as a comment.

           Note: <b>-k</b> <b>key</b> and <b>-u</b> <b>user</b> still need to be defined for the default case in case there is no match.

       <b>-k</b> key
           Pre-shared key for the specified user identity (<b>-u</b> option also required).

       <b>-u</b> user
           User identity to send for pre-shared key mode (<b>-k</b> option also required).

</pre><h4><b>OPTIONS</b> <b>-</b> <b>PKI</b></h4><pre>
       (If supported by underlying (D)TLS library)

       <b>Note:</b> If any one of <b>certfile</b>, <b>keyfile</b> or <b>cafile</b> is in PKCS11 URI naming format (pkcs11: prefix), then any
       remaining non PKCS11 URI file definitions have to be in DER, not PEM, format. Otherwise all of <b>certfile</b>,
       <b>keyfile</b> or <b>cafile</b> are in PEM format.

       <b>-c</b> certfile
           PEM file or PKCS11 URI for the certificate. The private key can also be in the PEM file, or has the
           same PKCS11 URI. If not, the private key is defined by <b>-j</b> <b>keyfile</b>.

       <b>-j</b> keyfile
           PEM file or PKCS11 URI for the private key for the certificate in <b>-c</b> <b>certfile</b> if the parameter is
           different from certfile in <b>-c</b> <b>certfile</b>.

       <b>-n</b>
           Disable remote peer certificate checking.

       <b>-C</b> cafile
           PEM file or PKCS11 URI for the CA certificate that was used to sign the server certfile. Ideally the
           client certificate should be signed by the same CA so that mutual authentication can take place. The
           contents of cafile are added to the trusted store of root CAs. Using the <b>-C</b> or <b>-R</b> options will
           trigger the validation of the server certificate unless overridden by the <b>-n</b> option.

       <b>-J</b> pkcs11_pin
           The user pin to unlock access to the PKCS11 token.

       <b>-M</b> rpk_file
           Raw Public Key (RPK) PEM file or PKCS11 URI that contains both PUBLIC KEY and PRIVATE KEY or just EC
           PRIVATE KEY. (GnuTLS and TinyDTLS(PEM) support only).  <b>-C</b> <b>cafile</b> or <b>-R</b> <b>trust_casfile</b> are not
           required.

       <b>-R</b> trust_casfile
           PEM file containing the set of trusted root CAs that are to be used to validate the server
           certificate. Alternatively, this can point to a directory containing a set of CA PEM files. The <b>-C</b>
           <b>cafile</b> CA does not have to be in this list and is trusted for the validation. Using <b>-R</b> <b>trust_casfile</b>
           disables common CA mutual authentication which can only be done by using <b>-C</b> <b>cafile</b>. Using the <b>-C</b> or
           <b>-R</b> options will will trigger the validation of the server certificate unless overridden by the <b>-n</b>
           option.

</pre><h4><b>EXAMPLES</b></h4><pre>
       â€¢   Example

           coap-client coap://libcoap.net

       Query the resource <u>/</u> from server <u>libcoap.net</u> (using the GET method).

       â€¢   Example

           coap-client -m get coap://[::1]/

       Query the resource <u>/</u> on localhost using the <u>GET</u> method to get back the summary information.

       â€¢   Example

           coap-client -m get coap://%2Fsome%2Funix%2Fdomain%2Fpath/time

       Query the resource <u>/time</u> on server listening on datagram Unix domain <u>/some/unix/domain/path</u> using the <u>GET</u>
       method to get back the current time. The %2F is the hex encoding for / and indicates which is the <u>host</u>
       definition separator and the simple / is for the path definition separator.

       â€¢   Example

           coap-client -m get coap://[::1]/.well-known/core

       Query on the resource <u>.well-known/core</u> on localhost to get back a list of the known resources along with
       their attribute definitions.

       â€¢   Example

           echo -n "mode=on" | coap-client -m put \

           coap://[2001:db8:c001:f00d:221:2eff:ff00:2704]:5683/actuators/leds?color=r -f-
       Send text <u>mode=on</u> to resource <u>actuators/leds?color=r</u> on the endpoint with address
       <u>2001:db8:c001:f00d:221:2eff:ff00:2704</u> and port <u>5683</u>. Note that the port <u>5683</u> is the default port and
       isnâ€™t actually required in this instance.

       â€¢   Example

           coap-client -m put coap://[fec0::3]/ck -T 3a -t binary -f to_upload

       Put the contents of file <u>to_upload</u> with content type <u>binary</u> (i.e. application/octet-stream) into resource
       <u>ck</u> on <u>fec0::3</u> using a token of <u>3a</u> via the <u>PUT</u> method.

</pre><h4><b>FILES</b></h4><pre>
       There are no configuration files.

</pre><h4><b>EXIT</b> <b>STATUS</b></h4><pre>
       <b>0</b>
           Success

       <b>1</b>
           Failure (syntax or usage error; configuration error; document processing failure; unexpected error)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/coap-server.5.html">coap-server</a></b>(5) and <b><a href="../man5/coap-oscore-conf.5.html">coap-oscore-conf</a></b>(5)

</pre><h4><b>BUGS</b></h4><pre>
       Please report bugs on the mailing list for libcoap: <a href="mailto:libcoap-developers@lists.sourceforge.net">libcoap-developers@lists.sourceforge.net</a> or raise an
       issue on GitHub at https://github.com/obgm/libcoap/issues

</pre><h4><b>AUTHORS</b></h4><pre>
       The libcoap project &lt;<a href="mailto:libcoap-developers@lists.sourceforge.net">libcoap-developers@lists.sourceforge.net</a>&gt;

coap-client 4.3.4                                  04/15/2024                                     <u><a href="../man5/COAP-CLIENT.5.html">COAP-CLIENT</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>