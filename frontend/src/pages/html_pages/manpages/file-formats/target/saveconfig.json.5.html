<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>saveconfig.json - Saved configuration file for rtslib-fb and LIO kernel target</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/python3-rtslib-fb">python3-rtslib-fb_2.1.74-0ubuntu5_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>saveconfig.json</b> - Saved configuration file for rtslib-fb and LIO kernel target

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>/etc/rtslib-fb-target/saveconfig.json</b>  is the default location for storing the configuration of the Linux
       kernel target, also known as LIO. Since the target is in the kernel, tools like  <b>targetctl</b>  or  <b>targetcli</b>
       must be used to save and restore the configuration across reboots.

       Generating  or  modifying this file by hand, or with other tools, is also supported. This fills a gap for
       users whose needs are not met by the targetcli configuration shell, who  cannot  use  the  rtslib  Python
       library, and yet also wish to avoid directly manipulating LIO's configfs interface.

</pre><h4><b>OVERVIEW</b></h4><pre>
       The  configuration  file  is  in  the  "json" text format, which is both human- and machine-readable. Its
       format is very closely modeled on the layout and terminology that LIO uses.  Attributes  may  be  string,
       boolean, or numeric values. All sizes are expressed in bytes.

</pre><h4><b>LAYOUT</b></h4><pre>
   <b>TOP</b> <b>LEVEL</b> <b>SUMMARY</b>
       <b>storage_objects</b>  describes  mappings  of resources on the local machine that can be used to emulate block
       devices.

       <b>fabric_modules</b> describes settings for LIO fabrics -- the hardware or software  protocols  that  transport
       SCSI commands -- such as iSCSI or Fibre Channel over Ethernet (FCoE).

       <b>targets</b> describes the SCSI target endpoints that export storage objects over a fabric.

   <b>storage_objects</b>
       All storage objects must contain <u>name</u> and <u>plugin</u> values. Each name must be unique for all storage objects
       of its plugin type.

       <u>plugin</u> must be one of: <u>fileio</u>, <u>block</u>, <u>pscsi</u>, or <u>ramdisk</u>.

       Objects  with  plugin  value  of <u>fileio</u> must also contain <u>dev</u>, which is the full path to the file that is
       backing the storage object.  Optional <u>fileio</u> attributes are <u>wwn</u> (string), <u>write_back</u> (boolean), and  <u>size</u>
       (number).  If the file given in <u>dev</u> does not exist, then <u>size</u> must be present, and a backing file of that
       size will be created.

       Objects with plugin value of <u>block</u> must also contain <u>dev</u>, which is the full path to the block device that
       is  backing  the  storage  object.  Optional <u>block</u> attributes are <u>wwn</u> (string), <u>write_back</u> (boolean), and
       <u>readonly</u> (boolean).

       Objects with plugin value of <u>pscsi</u> must also contain <u>dev</u>, which is the full path to the SCSI device  that
       is backing the storage object.  There are no optional attributes.

       Objects  with  plugin value of <u>ramdisk</u> must also contain <u>size</u> (number), which is the size in bytes of the
       ramdisk.  Optional <u>ramdisk</u> attributes are <u>wwn</u> (string), and <u>nullio</u> (boolean).

       All storage object definitions may also contain an <u>attributes</u> object. This contains LIO attribute values,
       all of which are also optional. Please see LIO documentation for more information on these.

   <b>fabric_modules</b>
       This section is limited to  setting  discovery  authentication  settings  for  fabrics  that  support  it
       (currently just iscsi). Objects here should contain <u>name</u> (e.g. "iscsi"), <u>userid</u>, <u>password</u>, <u>mutual_userid</u>,
       and <u>mutual_password</u> string values.

   <b>targets</b>
       Target configuration is modeled on iSCSI, in which a named target can contain multiple sub-configurations
       called  Target  Port  Groups (TPGs). LIO follows this model for describing configuration even for fabrics
       that do not support TPGs.

       Objects in <u>targets</u> contain just three attributes: <u>wwn</u> is the world-wide name the target has  been  given.
       This may start with "iqn", or "naa", for example.  <u>fabric</u> is the name of the fabric module this target is
       exported  over. Allowed values for this depend on the system configuration, but examples include "iscsi",
       "loopback", and "tcm_fc".  <u>tpgs</u> is a list of objects describing 1 or more TPGs, described below.

   <b>tpgs</b>
       TPG object attributes are all optional. Values not supplied will be set to default values.  <u>tag</u>  (number)
       allows  the  tpg  tag  to  be specified.  <u>enable</u> (bool, default to true) allows the TPG to be disabled or
       enabled.  <u>luns</u>, <u>portals</u>, and <u>node_acls</u> contain  further  lists  of  objects,  descibed  below.   Finally,
       <u>userid</u>, <u>password</u>, <u>mutual_userid</u>, and <u>mutual_password</u> allow main-phase authentication values to be set for
       fabrics  (like  iSCSI) that support TPG-level authentication. (Please see <u><a href="../man8/targetcli.8.html">targetcli</a></u>(8) for details on TPG
       versus ACL-based authentication.) Finally, TPGs can  also  contain  optional  <u>attributes</u>  and  <u>parameters</u>
       lists, see LIO documentation for more information.

   <b>luns</b>
       This  list  of objects maps storage objects to the TPG.  <u>index</u> is a TPG-unique number for the assignment,
       which may be used as the LU number for fabrics that do not support ACL  mappings.   <u>storage_object</u>  is  a
       string  linking back to a storage object, of the format "/backstores/&lt;plugin&gt;/&lt;name&gt;", where &lt;plugin&gt; and
       &lt;name&gt; correspond to a storage object defined under <u>storage_objects</u>.

   <b>portals</b>
       Portals describe connection endpoints for iSCSI targets. Required values are <u>ip_address</u> (string) and <u>port</u>
       (number).  <u>iser</u> (boolean) is an optional value to enable iSER.  <u>offload</u> (boolean) is an optional value to
       enable hardware offload.

   <b>node_acls</b>
       This contains information about explicit initiator LUN mappings.   <u>node_wwn</u>  (string)  must  be  present.
       Authentication   may  also  be  set  on  a  per-ACL  basis  with  <u>userid</u>,  <u>password</u>,  <u>mutual_userid</u>,  and
       <u>mutual_password,</u> similar to TPGs.  <u>mapped_luns</u> is a list  of  mapped  luns,  described  below.   Finally,
       node_acls can contain an optional <u>attributes</u> list.

   <b>mapped_luns</b>
       Objects in <u>mapped_luns</u> contain three required attributes.  <u>write_protect</u> (boolean) sets the write-protect
       status  of  the  mapped  LUN.   <u>tpg_lun</u> (number) corresponds to an existing entry in the TPG's <u>luns</u> list.
       <u>index</u> is the LU number that the mapped LUN will claim.

</pre><h4><b>EXAMPLE</b> <b>CONFIGURATION</b></h4><pre>
       Since tools generate this file, one good way to understand its format is to use a tool like <b>targetcli</b>  to
       configure a target, then run <b>saveconfig,</b> and view the resulting json file.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man8/targetcli.8.html">targetcli</a></b>(8), <b><a href="../man8/targetctl.8.html">targetctl</a></b>(8)

</pre><h4><b>FILES</b></h4><pre>
       <b>/etc/rtslib-fb-target/saveconfig.json</b>

</pre><h4><b>AUTHOR</b></h4><pre>
       Man page written by Andy Grover &lt;<a href="mailto:agrover@redhat.com">agrover@redhat.com</a>&gt;.

</pre><h4><b>REPORTING</b> <b>BUGS</b></h4><pre>
       Report bugs via &lt;<a href="mailto:targetcli-fb-devel@lists.fedorahosted.org">targetcli-fb-devel@lists.fedorahosted.org</a>&gt;
       or &lt;https://github.com/open-iscsi/rtslib-fb/issues&gt;

                                                                                              <u><a href="../man5/saveconfig.json.5.html">saveconfig.json</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>