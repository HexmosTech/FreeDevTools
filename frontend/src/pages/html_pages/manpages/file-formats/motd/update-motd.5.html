<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>update-motd - dynamic MOTD generation</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libpam-runtime">libpam-runtime_1.7.0-5ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       update-motd - dynamic MOTD generation

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b><a href="file:/etc/update-motd.d/">/etc/update-motd.d/</a>*</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       UNIX/Linux  system  administrators often communicate important information to console and remote users by
       maintaining text in the file <u>/etc/motd</u>, which is displayed by the <b><a href="../man8/pam_motd.8.html">pam_motd</a></b>(8) module on interactive shell
       logins.

       Traditionally, this file is static text, typically installed by the  distribution  and  only  updated  on
       release upgrades, or overwritten by the local administrator with pertinent information.

       Ubuntu  introduced  the  <b>update-motd</b>  framework,  by  which  the  <b><a href="../man5/motd.5.html">motd</a></b>(5) is dynamically assembled from a
       collection of scripts at login.

       Executable scripts in <u><a href="file:/etc/update-motd.d/">/etc/update-motd.d/</a>*</u> are executed by <b><a href="../man8/pam_motd.8.html">pam_motd</a></b>(8) as the root user  at  each  login,
       and  this  information is concatenated in <u>/run/motd.dynamic</u>.  The order of script execution is determined
       by the <b><a href="../man8/run-parts.8.html">run-parts</a></b>(8) --lsbsysinit option (basically alphabetical order, with a few caveats).

       On Ubuntu systems, <u>/etc/motd</u> is typically a symbolic link to <u>/run/motd.dynamic</u>.

</pre><h4><b>BEST</b> <b>PRACTICES</b></h4><pre>
       MOTD fragments must be scripts in <u><a href="file:/etc/update-motd.d">/etc/update-motd.d</a></u>, must be executable, and must  emit  information  on
       standard out.

       Scripts  should  be named named NN-xxxxxx where NN is a two digit number indicating their position in the
       MOTD, and xxxxxx is an appropriate name for the script.

       Scripts must not have filename extensions, per <b><a href="../man8/run-parts.8.html">run-parts</a></b>(8) --lsbsysinit instructions.

       Packages should add scripts directly into <u><a href="file:/etc/update-motd.d">/etc/update-motd.d</a></u>, rather than symlinks to other scripts, such
       that administrators can modify or remove these scripts and upgrades will  not  wipe  the  local  changes.
       Consider using a simple shell script that simply calls <b>exec</b> on the external utility.

       Long  running  operations  (such as network calls) or resource intensive scripts should cache output, and
       only update that output if it is deemed expired.  For instance:

         /etc/update-motd.d/50-news
         #!<a href="file:/bin/sh">/bin/sh</a>
         out=/run/foo
         script="w3m -dump <a href="http://news.google.com/">http://news.google.com/</a>"
         if [ -f "$out" ]; then
           # Output exists, print it
           echo
           cat "$out"
           # See if it's expired, and background update
           lastrun=$(stat -c %Y "$out") || lastrun=0
           expiration=$(expr $lastrun + 86400)
           if [ $(date +%s) -ge $expiration ]; then
             $script &gt; "$out" &amp;
           fi
         else
           # No cache at all, so update in the background
           $script &gt; "$out" &amp;
         fi

       Scripts should emit a blank line before output, and end with a newline character.  For instance:

         /etc/update-motd/05-lsb-release
         #!<a href="file:/bin/sh">/bin/sh</a>
         echo
         lsb-release -a

</pre><h4><b>FILES</b></h4><pre>
       <u>/etc/motd</u>, <u>/run/motd.dynamic</u>, <u><a href="file:/etc/update-motd.d">/etc/update-motd.d</a></u>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/motd.5.html">motd</a></b>(5), <b><a href="../man8/pam_motd.8.html">pam_motd</a></b>(8), <b><a href="../man8/run-parts.8.html">run-parts</a></b>(8)

</pre><h4><b>AUTHOR</b></h4><pre>
       This manpage and the update-motd framework was written by Dustin  Kirkland  &lt;<a href="mailto:kirkland@canonical.com">kirkland@canonical.com</a>&gt;  for
       Ubuntu systems (but may be used by others).  Permission is granted to copy, distribute and/or modify this
       document  under  the  terms  of  the GNU General Public License, Version 3 published by the Free Software
       Foundation.

       On Debian systems, the complete text of the GNU General Public License can be found in /usr/share/common-
       licenses/GPL.

update-motd                                       13 April 2010                                   <u><a href="../man5/update-motd.5.html">update-motd</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>