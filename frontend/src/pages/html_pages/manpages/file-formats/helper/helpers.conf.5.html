<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>helpers.conf - Slurm configuration file for the helpers plugin.</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/slurm-client">slurm-client_24.11.5-4_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       helpers.conf - Slurm configuration file for the helpers plugin.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>helpers.conf</b>  is  an  ASCII  file which defines parameters used by Slurm's "helpers" node feature plugin.
       The file will always be located in the same directory as the <b>slurm.conf</b>.

</pre><h4><b>PARAMETERS</b></h4><pre>
       Parameter names are case insensitive.  Any text following a "#" in the configuration file is treated as a
       comment through the end of that line.  The size of each line in the file is limited to  1024  characters.
       Changes to the configuration file take effect upon restart of Slurm daemons, daemon receipt of the SIGHUP
       signal, or execution of the command "scontrol reconfigure" unless otherwise noted.

       <b>AllowUserBoot</b>=&lt;<u>user1</u>&gt;[,&lt;<u>user2</u>&gt;...]
              Controls which users are allowed to change the features with this plugin.  Default is to allow ALL
              users.

       <b>BootTime</b>=&lt;<u>time</u>&gt;
              Controls  how  much  time  a  node has to reboot before a timeout occurs and a failure is assumed.
              Default value is 300 seconds.

       <b>ExecTime</b>=&lt;<u>time</u>&gt;
              Controls how much time the Helper program can run  before  a  timeout  occurs  and  a  failure  is
              assumed. Default value is 10 seconds.

       <b>Feature</b>=&lt;<u>string</u>&gt; <b>Helper</b>=&lt;<u>file</u>&gt; &lt;<b>Flags</b>=&lt;<u>flags</u>&gt;
              Defines  <b>Feature(s)</b> and a corresponding <b>Helper</b> program that reports and modifies the status of the
              feature(s). Multiple  <b>Feature</b>  entries  are  allowed,  one  for  each  feature  and  corresponding
              program/script. A comma separated list of features can also be defined for one <b>Helper</b>.

              Features can be defined per node by creating a unique file for each node. The controller must have
              a <b>helpers.conf</b> that lists all possible helper features.

              Currently supported flags are:

              <b>rebootless</b>
                     Indicate  that  the feature doesn't require a node reboot. If set, feature activation won't
                     execute the <u>RebootProgram</u>, the node will just register that the node rebooted to  slurmctld
                     without an actual reboot.

              A  single  <b>helpers.conf</b>  can  be  created  that  defines features for specific nodes by prepending
              <u>NodeName=&lt;nodelist&gt;</u> to the front of the <b>Feature</b> line. A <b>Feature</b> not prepended with  <u>NodeName</u>  will
              apply to all nodes.

              # helpers.conf
              NodeName=n1_[1-10] Feature=a1,a2 Helper=/path/helper.sh
              NodeName=n2_[1-10] Feature=b1,b2 Helper=/path/helper.sh
              Feature=c1,c2 Helper=/path/helper.sh

              If  a  feature  is  defined  in  the  <b>helpers.conf</b>  and  is  not defined on a specific node in the
              <b>helpers.conf</b> but is defined for that node  in  the  slurm.conf,  that  feature  is  treated  as  a
              changeable/rebootable  feature  by  the  controller. For example, if feature <u>fa</u> is defined on node
              <u>node1</u> in the <b>slurm.conf</b> but is only listed on <u>node2</u> in the <b>helpers.conf</b>, the  feature  will  still
              trigger the node to be rebooted if not active.

              The  <b>Helper</b> is an arbitrary program or script that reports and modifies the feature set on a given
              node. The helpers are site-specific and are not included with  Slurm.  Features  modified  by  the
              helpers  require  a reboot of the node using the <b>RebootProgram</b>.  The <b>Helper</b> program/script must be
              executable by the <b>SlurmdUser</b>.  The same program/script can be used to control  multiple  features.
              slurmd will execute the <b>Helper</b> in one of two ways:

              1.  Execute with no arguments to query the status of node features. It must return an exit code of
              0 and either print a superset of the  features  expected  by  Slurm,  or  it  can  print  nothing.
              Otherwise, the node will be drained.

              2.  Execute  with a single argument of the feature to be activated on node reboot.  In the case of
              multiple features the script is called multiple times.

       <b>MutuallyExclusive</b>=&lt;<u>feature_list</u>&gt;
              Prevents certain  features  from  being  specified  for  the  same  job.  There  can  be  multiple
              <b>MutuallyExclusive</b>  entries, each with their own list of features that are mutually exclusive among
              themselves (i.e. features on one line are only mutually exclusive with other features on the  same
              line, but not mutually exclusive with features on other lines).

</pre><h4><b>EXAMPLE</b></h4><pre>
       <b>/etc/slurm/slurm.conf</b>:
              To enable the helpers plugin, the <b>slurm.conf</b> needs to have the following entry:

              NodeFeaturesPlugins=node_features/helpers

       <b>/etc/slurm/helpers.conf</b>:
              The  following  example  <b>helpers.conf</b>  demonstrates that multiple features can use the same Helper
              script and that there can be multiple lists of features that are mutually exclusive. For  example,
              with  the  following configuration a job cannot request both "nps1" and "nps2", nor can it request
              both "mig=on" and "mig=off". However, it could request "nps1" and "mig=on" at the same time.

              # helpers.conf
              Feature=nps1,nps2,nps4 Helper=/usr/local/bin/nps
              Feature=mig=on Helper=/usr/local/bin/mig
              Feature=mig=off Helper=/usr/local/bin/mig
              MutuallyExclusive=nps1,nps2,nps4
              MutuallyExclusive=mig=on,mig=off
              ExecTime=60
              BootTime=60
              AllowUserBoot=user1,user2

       <b>Example</b> <b>Helper</b> <b>script</b>:
              Helper scripts need to have the executable bit set and must exist on the nodes, where they will be
              executed by slurmd.  When the helper script is called with  no  arguments  it  should  return  the
              feature(s)  that  are  currently  active  for  the  node,  with  multiple  features being new-line
              delimited. When the helper script is called with a feature to be enabled for the node,  it  should
              configure the node in a way that the specified feature will be enabled when the node reboots. This
              example  script just writes the active feature name to a file but production scripts will probably
              be more complex.

              #!<a href="file:/bin/bash">/bin/bash</a>

              if [ "$1" = "nps1" ]; then
                  echo "$1" &gt; /etc/slurm/feature
              elif [ "$1" = "nps2" ]; then
                  echo "$1" &gt; /etc/slurm/feature
              elif [ "$1" = "nps4" ]; then
                  echo "$1" &gt; /etc/slurm/feature
              else
                  cat /etc/slurm/feature
              fi

</pre><h4><b>COPYING</b></h4><pre>
       Copyright (C) 2021 NVIDIA CORPORATION. All rights reserved.
       Copyright (C) 2021 SchedMD LLC.

       This   file   is   part   of   Slurm,   a   resource    management    program.     For    details,    see
       &lt;https://slurm.schedmd.com/&gt;.

       Slurm  is  free  software;  you  can  redistribute it and/or modify it under the terms of the GNU General
       Public License as published by the Free Software Foundation; either version 2 of the License, or (at your
       option) any later version.

       Slurm is distributed in the hope that it will be useful, but  WITHOUT  ANY  WARRANTY;  without  even  the
       implied  warranty  of  MERCHANTABILITY  or  FITNESS  FOR A PARTICULAR PURPOSE. See the GNU General Public
       License for more details.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/slurm.conf.5.html">slurm.conf</a></b>(5)

July 2024                                   Slurm Configuration File                             <u><a href="../man5/helpers.conf.5.html">helpers.conf</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>