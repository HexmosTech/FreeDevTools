<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YUV4MPEG2 - video stream format used by pipe-based MJPEGtools</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/mjpegtools">mjpegtools_2.1.0+debian-8.1build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       YUV4MPEG2 - video stream format used by pipe-based MJPEGtools

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Many  of  the  MJPEGtools  communicate via pipes and act as filters (or sources or sinks).  The format of
       video data used in the pipes is referred to as "YUV4MPEG", or, more precisely, "YUV4MPEG2".  (The  format
       was extended and codified during v1.5.x of the tools.)

       The  basic  structure  is  a  stream header followed by an unlimited number of frames.  Each frame itself
       consists of a header followed by video data.  The headers are vaguely human-readable ASCII, but the video
       data is simple byte-size binary.

       The MJPEGtools distribution has a C library (libmjpegutils) which  contains  functions  for  manipulating
       YUV4MPEG2 streams.  We recommend that you use this library rather than writing your own code if possible.
       See the header file "yuv4mpeg.h" for a description of these functions.

       Design Goals:

       o      Easy to parse both via C or sh.

       o      Extensible; easy to add new parameters while maintaining backwards compatibility.

       o      Simple upgrade from original "YUV4MPEG" format.

       Drawbacks:

       o      Frame headers do not have constant size, so streams are not seekable.

</pre><h4><b>GRAMMAR</b></h4><pre>
       The precise description of the the YUV4MPEG2 stream format is as follows:

       <u>STREAM</u> consists of

       -  one <u>STREAM-HEADER</u>

       -  unlimited number of <u>FRAME</u>s

       <u>STREAM-HEADER</u> consists of

       -  magic string "YUV4MPEG2"

       -  unlimited number of <u>TAGGED-FIELD</u>s, each preceeded by a ' ' (single space) separator

       -  single '\n' line terminator

       <u>FRAME</u> consists of

       -  one <u>FRAME-HEADER</u>

       -  "length" octets of planar YCbCr 4:2:0 image data (If the stream is interlaced, then the two fields per
          frame are interleaved, with proper spatial ordering.)

       <u>FRAME-HEADER</u> consists of

       -  magic string "FRAME"

       -  unlimited number of <u>TAGGED-FIELD</u>s, each preceeded by a ' ' (single space) separator

       -  single '\n' line terminator

       <u>TAGGED-FIELD</u> consists of

       -  single ASCII character tag

       -  <u>VALUE</u> (which does not contain whitespace)

       <u>VALUE</u> consists of

       -  <u>RATIO</u>, <b>or</b>

       -  integer (base 10 ASCII representation), <b>or</b>

       -  single ascii character, <b>or</b>

       -  string (multiple ASCII characters)

       <u>RATIO</u> consists of

       -  numerator (base 10 ASCII integer)

       -  ':' (a colon)

       -  denominator (base 10 ASCII integer)

       Header  tags  fall  into  three  categories:   <b>optional</b>,  <b>required</b>  and  <b>has-default</b>.   Optional tags are
       completely optional and may be omitted from a header.  Required tags must be present in a  header.   Has-
       Default  tags  have  a  default  value  which is implied if the tag is not present.  Independent of these
       categories, some tags allow an "unknown" value and some do not.

       The supported tags for the <u>STREAM-HEADER</u>:

              W[integer] - frame width in pixels, must be &gt; 0 (<b>required</b>)

              H[integer] - frame height in pixels, must be &gt; 0 (<b>required</b>)

              C[string] - chroma subsampling, image data format (<b>has</b> <b>default</b>)
                      420jpeg  - 4:2:0 with JPEG/MPEG-1 siting (default)
                      420mpeg2 - 4:2:0 with MPEG-2 siting
                      420paldv - 4:2:0 with PAL-DV siting
                      411      - 4:1:1, cosited
                      422      - 4:2:2, cosited
                      444      - 4:4:4 (no subsampling)
                      444alpha - 4:4:4 with an alpha channel
                      mono     - luma (Y') plane only

              I[char] - interlacing specification:  (<b>has</b> <b>default</b>)
                      ? - unknown (default)
                      p - progressive/none
                      t - top-field-first
                      b - bottom-field-first
                      m - mixed-mode: refer to 'I' tag in frame header

              F[ratio] - frame-rate (<b>has</b> <b>default</b> of 0:0 == unknown)

              A[ratio] - sample aspect ratio (<b>has</b> <b>default</b> of 0:0 == unknown)

              X[string] - 'metadata' (<b>optional</b>; unparsed, but passed around)

       The currently supported tags for the <u>FRAME-HEADER</u>:

              I[string] - framing and sampling (<b>required</b> <b>if-and-only-if</b> Im is present in stream header).   Value
                     is a string of three characters "xyz" which have the following meanings:
                      x: frame presentation
                         t - top-field-first
                         T - top-field-first and repeat
                         b - bottom-field-first
                         B - bottom-field-first and repeat
                         1 - single progressive frame
                         2 - double progressive frame (repeat)
                         3 - triple progressive frame (repeat)
                      y: frame temporal sampling
                         p - progressive (fields sampled at same time)
                         i - interlaced (fields sampled at different times)
                      z: frame chroma-subsampling
                         p - progressive (subsampling over whole frame)
                         i - interlaced (each field subsampled independently)
                         ? - unknown (allowed only for non-4:2:0 subsampling)

              X[string] - 'metadata' (<b>optional</b>; unparsed, but passed around)

       Note  that  a  filter  application  must  faithfully  forward all "X" tags from input pipe to output pipe
       (unless it uses one of those tags, of course).  The supplied library will do this  automatically  if  the
       functions y4m_copy_stream_info() and y4m_copy_frame_info() are used appropriately.

</pre><h4><b>NOTES</b> <b>ON</b> <b>IMAGE</b> <b>DATA</b></h4><pre>
       All  image  data is in the CCIR-601 Y'CbCr colorspace, presented plane-by-plane in row-major order.  Each
       sample within each plane is one  octet  (8-bits)  in  size.   When  all  planes  are  present,  they  are
       transmitted  in  the  order Y', Cb, Cr, potentially followed by an alpha/transparency mask plane (for the
       <b>444alpha</b> chroma format).  The alpha channel data is follows the same range as the Y' luma channel:   full
       transparency is at 16 and full opacity is at 235.

       All Y' and alpha planes consist of (height X width) octets.  The size of the chroma planes depends on the
       subsampling mode:

       -  4:4:4 - (height X width) octets

       -  4:2:2 - (height X width) / 2 octets

       -  4:1:1 - (height X width) / 4 octets

       -  4:2:0 - (height X width) / 4 octets

</pre><h4><b>NOTES</b> <b>ON</b> <b>FRAMING</b></h4><pre>
       (More to come here.)

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/mjpegtools.1.html">mjpegtools</a></b>(1), yuv4mpeg.h

</pre><h4><b>AUTHOR</b></h4><pre>
       This manual page Copyright 2004 Matthew J. Marjanovic.

MJPEG Tools Team                                25 November 2002                                     <u><a href="../man5/yuv4mpeg.5.html">yuv4mpeg</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>