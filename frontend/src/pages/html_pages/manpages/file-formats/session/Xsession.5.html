<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Xsession - initialize X session</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/x11-common">x11-common_7.7+24ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Xsession - initialize X session

</pre><h4><b>SYNOPSIS</b></h4><pre>
       Xsession [ <u>session-type</u> ]

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <u>/etc/X11/Xsession</u>  is a Bourne shell (<b><a href="../man1/sh.1.html">sh</a></b>(1)) script which is run when an X Window System session is begun
       by <b><a href="../man1/startx.1.html">startx</a></b>(1) or a display manager such as <b><a href="../man1/xdm.1.html">xdm</a></b>(1).  (Some  display  managers  only  invoke  <u>Xsession</u>  when
       specifically  directed  to  so  by  the  user; see the documentation for your display manager to find out
       more.)  Administrators unfamiliar  with  the  Bourne  shell  will  likely  find  the  <b><a href="../man5/Xsession.options.5.html">Xsession.options</a></b>(5)
       configuration file easier to deal with than <u>Xsession</u> itself.

       <u>Xsession</u> is not intended to be invoked directly by the user; to be effective it needs to run in a special
       environment  associated  with X server initialization.  <b>startx</b>, <b>xdm</b>, <b><a href="../man1/xinit.1.html">xinit</a></b>(1), and other similar programs
       handle this.

       By default on a Debian system, <u>Xsession</u> is used by both common methods of starting the X  Window  System,
       <b>xdm</b> (or another X display manager) and <b>startx</b>.  To change this for <b>xdm,</b> edit the ‘DisplayManager*session’
       resource  in  the <u>/etc/X11/xdm/xdm-config</u> file — for other display managers, consult their documentation.
       To stop <b>startx</b> from using <u>Xsession</u> by default, replace the contents of the <u>/etc/X11/xinit/xinitrc</u> file.

       The <u>Xsession</u> script is quite flexible, and extensive customization of the X startup procedure is possible
       without modifying the script itself.  See “CUSTOMIZING THE STARTUP PROCEDURE” below.

   <b>SESSION</b> <b>TYPES</b>
       <u>Xsession</u> may optionally be passed a single argument indicating the type of X session to be  started.   It
       is  up  to  the  display  manager to set the argument. To pass <u>Xsession</u> an argument from <b>startx</b> or <b>xinit</b>,
       <u>/etc/X11/Xsession</u> (or <u>/etc/X11/xinit/xinitrc</u>) must be  called  explicitly  with  a  path,  as  in  <b>startx</b>
       <b>/etc/X11/Xsession</b> <b>failsafe</b>.  By default, three different arguments are supported:

       <b>failsafe</b>
              invokes  a session consisting solely of an <b><a href="../man1/x-terminal-emulator.1.html">x-terminal-emulator</a></b>(1) (no window manager is launched).
              If the <b>x-terminal-emulator</b> <b>program</b> <b>cannot</b> be found, the session exits.  The ‘failsafe’ argument is
              ignored if there is no ‘allow-failsafe’ line in <u>Xsession.options</u>.

       <b>default</b>
              produces the same behavior as if no session type argument had been given at all.

       <u>program</u>
              starts <u>program</u> if it can be found in the $PATH.  This is usually  a  session  manager  or  a  very
              featureful window manager.  If <u>program</u> is not found, the <u>Xsession</u> script proceeds with its default
              behavior.  This argument is ignored if there is no ‘allow-user-xsession’ line in <u>Xsession.options</u>.
              (If the administrator does not want users writing their own <u>.xsession</u> files, it makes little sense
              to  permit them to specify the names of arbitrary programs to run.)  Note that the restriction may
              be easy to bypass, e.g. by using a <u>.gnomerc</u> file instead.

   <b>DEFAULT</b> <b>STARTUP</b> <b>PROCEDURE</b>
       Initially, <u>Xsession</u> performs some housekeeping.  It declares a set of built-in functions  (see  “BUILT-IN
       SHELL FUNCTIONS” below) and variables, then attempts to create a log file for the X session, or append to
       an  existing  one.   Historically  this is called an ‘error’ file, but it catches all sorts of diagnostic
       output from various X clients run in the user's session, not just error messages.  If it is impossible to
       write to an error file, the script (and thus the X session) aborts.  For convenience, once the error file
       is successfully opened, <u>Xsession</u> reports the fact that the session has started,  the  invoking  username,
       and  the  date  to the error file.  This makes it easier to discern which X session produced a particular
       line of output in the file.

       <u>Xsession</u> next confirms that its script directory, <u>Xsession.d</u>, exists.  If it does not, the script aborts.
       After the script directory is confirmed to be present, <u>Xsession</u> uses <b><a href="../man1/run-parts.1.html">run-parts</a></b>(1) to  identify  files  in
       that  directory  that  should  be  sourced  (executed) in the shell's environment.  Only files named in a
       certain way are sourced; see the <b>run-parts</b> manual page for a  description  of  valid  characters  in  the
       filename.   (This  restriction enables the administrator to move experimental or problematic files out of
       the way of the script but keep them in an obvious place, for instance by renaming  them  with  ‘.old’  or
       ‘.broken’ appended to the filename.)

   <b>SUPPLIED</b> <b>SCRIPTS</b>
       Five  shell  script  portions  are  supplied  by  default  to  handle  the details of the session startup
       procedure.

       <u>/etc/X11/Xsession.d/20x11-common_process-args</u>
              Arguments are processed as described in “SESSION TYPES” above.  The startup  program,  if  one  is
              identified at this point, is merely stored for later reference, and not immediately executed.

       <u>/etc/X11/Xsession.d/30x11-common_xresources</u>
              X  resources  are  merged.   <b>run-parts</b>  is  again  used,  this  time  to  identify  files  in  the
              <u>/etc/X11/Xresources</u> directory that should be processed with ‘xrdb  -merge’.   Next,  if  the  line
              ‘allow-user-resources’ is present in <u>Xsession.options</u>, the user's <u>$HOME/.Xresources</u> file is merged
              in the same way.

       <u>/etc/X11/Xsession.d/35x11-common_xhost-local</u>
              Give  access  to  the  X  server  to  the  same  user  on the local host.  If the <u>xhost</u> command is
              available, it will use it to allow any process of the same user  running  on  the  local  host  to
              access the X server.

       <u>/etc/X11/Xsession.d/40x11-common_xsessionrc</u>
              Source global environment variables.  This script will source anything in <u>$HOME/.xsessionrc</u> if the
              file  is  present.  This  allows the user to set global environment variables for their X session,
              such as locale information.

       <u>/etc/X11/Xsession.d/50x11-common_determine-startup</u>
              Determine startup program.  The X client to launch as the controlling process (the one that,  upon
              exiting,  causes  the  X  server  to  exit  as well) is determined next.  If a program or failsafe
              argument was given and is allowed (see above), it is used as the controlling process.   Otherwise,
              if the line ‘allow-user-xsession’ is present in <u>Xsession.options</u>, a user-specified session program
              or  script is used.  In the latter case, two historically popular names for user X session scripts
              are searched for: <u>$HOME/.xsession</u> and <u>$HOME/.Xsession</u> (note the difference in  case).   The  first
              one  found  is used.  If the script is not executable, it is marked to be executed with the Bourne
              shell interpreter, <b>sh</b>.  Finally, if none  of  the  above  succeeds,  the  following  programs  are
              searched        for:        <u>/usr/bin/x-session-manager</u>,       <u>/usr/bin/x-window-manager</u>,       and
              <u>/usr/bin/x-terminal-emulator</u>.  The first one found is used.  If none are  found,  <u>Xsession</u>  aborts
              with an error.

       <u>/etc/X11/Xsession.d/90x11-common_ssh-agent</u>
              Start <b><a href="../man1/ssh-agent.1.html">ssh-agent</a></b>(1), if needed.  If the line ‘use-ssh-agent’ is present in <u>Xsession.options</u>, and no
              SSH  agent  process  appears  to be running already, <b>ssh-agent</b> is marked to be used to execute the
              startup program determined previously.  <b>Note:</b> this functionality may move to the  ssh  package  in
              the future.

       <u>/etc/X11/Xsession.d/99x11-common_start</u>
              Start  the  X  session.   The  startup  program  is  executed,  inside a Bourne shell if it is not
              executable, and inside an ssh-agent if necessary.  The shell's <b>exec</b> command is  used  to  spare  a
              slot in the process table.

   <b>CUSTOMIZING</b> <b>THE</b> <b>STARTUP</b> <b>PROCEDURE</b>
       Of course, any of the existing files can be edited in place.

       Because the order in which the various scripts in <u><a href="file:/etc/X11/Xsession.d">/etc/X11/Xsession.d</a></u> are executed is important, files to
       be added to this directory should have a well-formed name.  The following format is recommended:

       * a two-digit number denoting sequence;

       * the name of the package providing the script (or ‘custom’ for locally-created scripts);

       * an underscore;

       * a description of the script's basic function, using only characters allowed by <b>run-parts</b>.

       Here is an example of how one might write a script, named <u>40custom_load-xmodmap</u>, to invoke <b><a href="../man1/xmodmap.1.html">xmodmap</a></b>(1):

       SYSMODMAP="/etc/X11/Xmodmap"
       USRMODMAP="$HOME/.Xmodmap"

       if [ -x /usr/bin/X11/xmodmap ]; then
           if [ -f "$SYSMODMAP" ]; then
               xmodmap "$SYSMODMAP"
           fi
       fi

       if [ -x /usr/bin/X11/xmodmap ]; then
           if [ -f "$USRMODMAP" ]; then
               xmodmap "$USRMODMAP"
           fi
       fi

       Those  writing  scripts  for <u>Xsession</u> to execute should avail themselves of its built-in shell functions,
       described below.

   <b>BUILT-IN</b> <b>SHELL</b> <b>FUNCTIONS</b>
       <b>message</b> is used for communicating with the user.  It is a wrapper for the <b><a href="../man1/echo.1.html">echo</a></b>(1) command and relies upon
       <b>echo</b> for its argument processing.  This function may be given an arbitrarily long message  string,  which
       is  formatted to the user's terminal width (breaking lines at whitespace) and sent to standard error.  If
       the <u>DISPLAY</u> environment variable is set and the <b><a href="../man1/xmessage.1.html">xmessage</a></b>(1) program is available, <b>xmessage</b> is  also  used
       to display the message.

       <b>message_nonl</b>  is  used for communicating with the user when a trailing newline is undesirable; it omits a
       trailing newline from the message text.  It otherwise works as <b>message</b>.

       <b>errormsg</b> is used for indicating an error condition and aborting the script.  It works as <b>message</b>,  above,
       except that after displaying the message, it will exit <u>Xsession</u> with status 1.

</pre><h4><b>ENVIRONMENT</b></h4><pre>
       The following environment variables affect the execution of <u>Xsession</u>:

       <b>HOME</b>   specifies the user's home directory; various files are searched for here.

       <b>TMPDIR</b> names  a  default  directory  for  temporary files; if the standard X session error file cannot be
              opened, this variable is used to locate a place for one.

       <b>COLUMNS</b>
              indicates the width of terminal device in character cells.  This  value  is  used  for  formatting
              diagnostic messages.

</pre><h4><b>INPUT</b> <b>FILES</b></h4><pre>
       <u><a href="file:/etc/X11/Xsession.d/">/etc/X11/Xsession.d/</a></u>
              is  a  directory  containing  Bourne  shell  scripts  to  be  executed by <u>Xsession</u>.  Files in this
              directory are matched using <b>run-parts</b> and are <b>source</b>d, not executed in a subshell.

       <u>/etc/X11/Xresources/</u>
              is a directory containing files corresponding to Debian package  names,  each  of  which  contains
              system-wide  X  resource  settings for X clients from the corresponding package.  The settings are
              loaded with <b>xrdb</b> <b>-merge</b>.  Files in this directory are matched using <b>run-parts</b>.

       <u>/etc/X11/Xsession.options</u>
              contains configuration options for the <u>/etc/X11/Xsession</u> script.  See <b><a href="../man5/Xsession.options.5.html">Xsession.options</a></b>(5) for more
              information.

       <u>$HOME/.Xresources</u>
              contains X resources specific to the invoking user's environment.  The settings  are  loaded  with
              <b>xrdb</b>  <b>-merge</b>.   Note  that  <u>$HOME/.Xdefaults</u> is a relic from X Version 10 (and X11R1) days, before
              app-defaults files were implemented.  It has been deprecated for over ten years  at  the  time  of
              this writing.  <u>.Xresources</u> should be used instead.

       <u>$HOME/.xsession</u>
              is  a  sequence  of  commands  invoking  X clients (or a session manager such as <b><a href="../man1/xsm.1.html">xsm</a></b>(1)).  See the
              manual page for <b>xinit</b> for tips on writing an <u>.xsession</u> file.

</pre><h4><b>OUTPUT</b> <b>FILES</b></h4><pre>
       <u>$HOME/.xsession-errors</u>
              is where standard output and standard error for <u>Xsession</u> script and all  X  client  processes  are
              directed by default.

       <u>$TMPDIR/filename</u>
              is  where  the  X  session  error  file is placed if <u>$HOME/.xsession-errors</u> cannot be opened.  For
              security reasons, the exact filename is randomly generated by <b><a href="../man1/tempfile.1.html">tempfile</a></b>(1).

</pre><h4><b>AUTHORS</b></h4><pre>
       Stephen Early, Mark Eichin, and Branden Robinson developed Debian's X session handling scripts.   Branden
       Robinson wrote this manual page.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man5/Xsession.options.5.html">Xsession.options</a></b>(5),  <b><a href="../man7/X.7.html">X</a></b>(7),  <b><a href="../man1/run-parts.1.html">run-parts</a></b>(1),  <b><a href="../man1/ssh-agent.1.html">ssh-agent</a></b>(1),  <b><a href="../man1/startx.1.html">startx</a></b>(1),  <b><a href="../man1/tempfile.1.html">tempfile</a></b>(1),  <b><a href="../man1/xdm.1.html">xdm</a></b>(1), <b><a href="../man1/xmessage.1.html">xmessage</a></b>(1),
       <b><a href="../man1/xmodmap.1.html">xmodmap</a></b>(1), <b><a href="../man1/xrdb.1.html">xrdb</a></b>(1), <b><a href="../man1/sh.1.html">sh</a></b>(1)

Debian Project                                     2004-11-04                                        <u><a href="../man5/Xsession.5.html">Xsession</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>