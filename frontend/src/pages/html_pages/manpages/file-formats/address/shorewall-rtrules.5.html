<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>rtrules - Shorewall Routing Rules file</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/shorewall">shorewall_5.2.8-6_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       rtrules - Shorewall Routing Rules file

</pre><h4><b>SYNOPSIS</b></h4><pre>

       <b>/etc/shorewall[6]/rtrules</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Entries in this file cause traffic to be routed to one of the providers listed in
       <b>shorewall-providers</b>[1](5).

       The columns in the file are as follows.

       <b>SOURCE</b> (Optional) - {<b>-</b>|[&amp;]<u>interface</u>|<u>address</u>|<u>interface</u>:<u>address</u>}
           An ip <u>address</u> (network or host) that matches the source IP address in a packet. May also be specified
           as an <u>interface</u> name optionally followed by ":" and an address. If the device <b>lo</b> is specified, the
           packet must originate from the firewall itself.

           Beginning with Shorewall 4.5.0, you may specify &amp;<u>interface</u> in this column to indicate that the source
           is the primary IP address of the named interface.

           Beginning with Shorewall 4.6.8, you may specify a comma-separated list of addresses in this column.

       <b>DEST</b> (Optional) - {<b>-</b>|<u>address</u>}
           An ip address (network or host) that matches the destination IP address in a packet.

           If you choose to omit either <b>SOURCE</b> or <b>DEST</b>, place "-" in that column. Note that you may not omit
           both <b>SOURCE</b> and <b>DEST</b>.

           Beginning with Shorewall 4.6.8, you may specify a comma-separated list of addresses in this column.

       <b>PROVIDER</b> - {<u>provider-name</u>|<u>provider-number</u>|<b>main</b>}
           The provider to route the traffic through. May be expressed either as the provider name or the
           provider number. May also be <b>main</b> or 254 for the main routing table. This can be used in combination
           with VPN tunnels, see example 2 below.

       <b>PRIORITY</b> - <u>priority</u><b>[!]</b>
           The rule's numeric <u>priority</u> which determines the order in which the rules are processed. Rules with
           equal priority are applied in the order in which they appear in the file.

           1000-1999
               Before Shorewall-generated 'MARK' rules

           11000-11999
               After 'MARK' rules but before Shorewall-generated rules for ISP interfaces.

           26000-26999
               After ISP interface rules but before 'default' rule.

           Beginning with Shorewall 5.0.2, the priority may be followed optionally by an exclaimation mark
           ("!"). This causes the rule to remain in place if the interface is disabled.

               <b>Caution</b>
               Be careful when using rules of the same PRIORITY as some unexpected behavior can occur when
               multiple rules have the same SOURCE. For example, in the following rules, the second rule
               overwrites the first unless the priority in the second is changed to 19001 or higher:

                   10.10.0.0/24    192.168.5.6 provider1 19000
                   10.10.0.0/24    -           provider2 19000

       <b>MARK</b> <b>-</b> <b>{-|</b><u>mark</u><b>[/</b><u>mask</u><b>]}</b>
           Optional -- added in Shorewall 4.4.25. For this rule to be applied to a packet, the packet's mark
           value must match the <u>mark</u> when logically anded with the <u>mask</u>. If a <u>mask</u> is not supplied, Shorewall
           supplies a suitable provider mask.

</pre><h4><b>EXAMPLES</b></h4><pre>
       Example 1:
           You want all traffic coming in on eth1 to be routed to the ISP1 provider.

                       #SOURCE                 DEST            PROVIDER        PRIORITY      MASK
                       eth1                    -               ISP1            1000

       IPv4 Example 2:
           You use OpenVPN (routed setup /tunX) in combination with multiple providers. In this case you have to
           set up a rule to ensure that the OpenVPN traffic is routed back through the tunX interface(s) rather
           than through any of the providers. 10.8.0.0/24 is the subnet chosen in your OpenVPN configuration
           (server 10.8.0.0 255.255.255.0).

                        #SOURCE                 DEST            PROVIDER        PRIORITY     MASK
                        -                       10.8.0.0/24     main            1000

</pre><h4><b>FILES</b></h4><pre>
       /etc/shorewall/rtrules

       /etc/shorewall6/rtrules

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b>https://shorewall.org/MultiISP.html</b>[2]

       <b>https://shorewall.org/configuration_file_basics.htm#Pairs</b>[3]

       <a href="../man8/shorewall.8.html">shorewall</a>(8)

</pre><h4><b>NOTES</b></h4><pre>
        1. shorewall-providers
           https://shorewall.org/manpages/shorewall-providers.html

        2. https://shorewall.org/MultiISP.html
           https://shorewall.org/MultiISP.html

        3. https://shorewall.org/configuration_file_basics.htm#Pairs
           https://shorewall.org/configuration_file_basics.htm#Pairs

Configuration Files                                09/24/2020                               <u><a href="../man5/SHOREWALL-RTRULES.5.html">SHOREWALL-RTRULES</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>