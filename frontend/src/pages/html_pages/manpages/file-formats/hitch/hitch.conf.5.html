<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hitch.conf - Configuration file for Hitch</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/hitch">hitch_1.8.0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       Hitch.conf - Configuration file for Hitch

</pre><h4><b>DESCRIPTION</b></h4><pre>
       hitch.conf  is  the  configuration  file  for  <u><a href="../man8/hitch.8.html">hitch</a>(8)</u>. The configuration file is loaded using the Hitch
       option --config=, and can thus have different names and can exist in different locations.

       Almost all options available in hitch.conf can be specified or overridden in the command line  of  Hitch,
       as described in <a href="../man8/hitch.8.html">hitch</a>(8).

       The  Hitch  configuration  file  consists  of  a  series  of option assignments.  Some options (pem-file,
       frontend) can be be set several times, and the effect is that multiple certificate files  and  "listening
       frontends" are defined. Other options can only be assigned once.

       The  hash  mark,  or  pound sign ("#"), is used as a "comment" character. You can use it to annotate your
       config file. All text after the comment character to the end of the line  is  ignored.  Empty  lines  are
       ignored.

</pre><h4><b>OPTIONS</b></h4><pre>
       Options  can  either  be  in the top level of the configuration file (global scope), or inside a <u>frontend</u>
       <u>block</u>. Options inside a frontend block only affect the frontend, while options  in  the  top  level  sets
       defaults for all frontends.

       Unless otherwise noted below, options can only be used in the top level.

   <b>alpn-protos</b> <b>=</b> <b>&lt;protocol-list&gt;</b>
       Comma  separated  list  of protocols supported by the backend in a quoted string. The list is used select
       protocols when the  client  supports  Next  Protocol  Negotiation  (NPN)  or  Application-Layer  Protocol
       Negotiation  (ALPN).  If Hitch is compiled against a OpenSSL version that does not support ALPN, only NPN
       will be used to select a protocol.

       The result of the NPN/ALPN negotiation will be communicated to the backend if and only if  write-proxy-v2
       or proxy-proxy is used. For HTTP/2 to work with modern browsers, ALPN negotiation is required.

   <b>backend</b> <b>=</b> <b>...</b>
       The endpoint Hitch connects to when receiving a connection. Only a single backend is supported.

       This is either specified as "[HOST]:port" for IPv4/IPv6 endpoints:

          backend = "[localhost]:8080"

       Or it can be specified as a path to a UNIX domain socket:

          backend = "/path/to/sock"

       If  the  <b>chroot</b> setting is in effect, the UNIX domain socket path will be at runtime resolved from within
       the chroot, and must be specified with the path it is accessible from  within  the  chroot.  I.e.  for  a
       <b>/run/hitch</b> chroot and a <b>/run/hitch/sock</b> UNIX domain socket, configure the backend argument as <b>/sock</b>.

   <b>backlog</b> <b>=</b> <b>&lt;number&gt;</b>
       Listen backlog size

   <b>chroot</b> <b>=</b> <b>&lt;string&gt;</b>
       Chroot directory

   <b>ciphers</b> <b>=</b> <b>...</b>
       List  of  ciphers  to  use in the secure communication. Refer to the OpenSSL documentation for a complete
       list of supported ciphers.

       Each cipher in the list must be separated by a colon (<b>:</b>), in order  of  preference.  See  <b><a href="../man1/ciphers.1.html">ciphers</a>(1)</b>  for
       further description of the format.

       If  not  specified,  OpenSSL  will  allow  all  ciphers. System administrators are advised to either only
       support strong ciphers (as in the example file below) or to pay close attention  to  security  advisories
       related OpenSSL's ciphers.

       This option applies to TLSv1.2 and below. For TLSv1.3, see <b>ciphersuites</b>.

       This option is also available in frontend blocks.

   <b>ciphersuites</b> <b>=</b> <b>&lt;string&gt;</b>
       Specifies  available ciphersuites for TLSv1.3. Similar to <b>ciphers</b>, entries must be separated by colon (<b>:</b>)
       and sorted in order of preference.

       This option is also available in frontend blocks.

   <b>client-verify</b> <b>=</b> <b>required|optional|none</b>
       Configures client certificate validation. The setting must be one of <b>none</b>, <b>required</b> or <b>optional</b>.

       The default setting is <b>client-verify</b> <b>=</b> <b>none</b>, in which case Hitch will not send a certificate  request  to
       the client.

       If  <b>client-verify</b>  <b>=</b>  <b>require</b>  is  configured,  Hitch  will  only permit connections that present a valid
       certificate. The certificate will be verified using the  certificate  provided  in  the  <b>client-verify-ca</b>
       parameter.

       If <b>optional</b>, Hitch will send certificate requests, but still permit connections that do not present one.

       For settings <b>optional</b> and <b>required</b>, we also require that the <b>client-verify-ca</b> is configured.

       This  option  is also available in <b>frontend</b> blocks and <b>pem-file</b> blocks. If specified in a <b>frontend</b> block,
       the client verification setting will only apply to the <b>pem-file</b> records  for  that  particular  frontend.
       This  can also be further refined by using the option in a <b>pem-file</b> block, which has the effect of having
       it only apply to that particular <b>pem-file</b> record.

   <b>client-verify-ca</b> <b>=</b> <b>&lt;string&gt;</b>
       Specifies a file containing the certificates of the CAs that will be used to verify a client certificate.

       For multiple CAs, this file can be a concatenation of multiple pem-files  for  the  relevant  certificate
       authorities.

       This option is also available in frontend blocks and in pem-file blocks.

   <b>daemon</b> <b>=</b> <b>on|off</b>
       Run as daemon. Default is off.

   <b>frontend</b> <b>=</b> <b>...</b>
       This  specifies  the  port  and  interface  (the  <u>listen</u> <u>endpoint</u>) that Hitch binds to when listening for
       connections. It is possible define several frontends, and Hitch will bind to several ports and/or several
       interfaces.

       If "*" is used as the host, then Hitch will bind on all interfaces for the given port.

       A frontend can be specified either in a single line:

          frontend = "[HOST]:PORT[+CERT]"

       Or in a <u>frontend</u> <u>block</u>:

          frontend = {
              host = "HOST"
              port = "PORT"
              &lt;other frontend options&gt;
          }

   <b>group</b> <b>=</b> <b>&lt;string&gt;</b>
       If given, Hitch will change to this group after binding to listen sockets.

   <b>keepalive</b> <b>=</b> <b>&lt;number&gt;</b>
       Number of seconds a TCP socket is kept alive

   <b>backend-refresh</b> <b>=</b> <b>&lt;number&gt;</b>
       Number of seconds between periodic backend IP lookups, 0 to disable.  Default is 0.

   <b>ocsp-dir</b> <b>=</b> <b>&lt;string&gt;</b>
       Directory where Hitch will store and read OCSP responses for stapling. Default is "/var/lib/hitch/".

       Directory must be readable and writable for  the  configured  Hitch  user,  or  automatic  retrieval  and
       updating of OCSP responses will not take place.

       If you have a manually pre-loaded OCSP staple, an alternative pem-file syntax can be used for stapling:

          pem-file = {
              cert = "mycert.pem"
              ocsp-resp-file = "ocsp-resp.der"
          }

   <b>ocsp-connect-tmo</b> <b>=</b> <b>&lt;number&gt;</b>
       OCSP fetch connect timeout.

       This does normally not need to be changed.

       Default is 4.0 seconds.

   <b>ocsp-resp-tmo</b> <b>=</b> <b>&lt;number&gt;</b>
       OCSP fetch response timeout.

       This does normally not need to be changed.

       Default is 10 seconds.

   <b>ocsp-refresh-interval</b> <b>=</b> <b>&lt;number&gt;</b>
       OCSP refresh interval.

       If the OCSP response does not carry any refresh information, use this as the interval for refreshing.

       Default is 1800 seconds.

   <b>ocsp-verify-staple</b> <b>=</b> <b>on|off</b>
       If set, OCSP responses will be verified against the certificate after retrieval.

       Default is off.

   <b>pem-file</b> <b>=</b> <b>&lt;string&gt;</b>
       Specify  a  SSL x509 certificate file. Server Name Indication (SNI) is supported by using one certificate
       file per SNI name.

       A file suitable for Hitch is a concatenation  of  a  private  key  and  a  corresponding  certificate  or
       certificate chain.

       At least one PEM file is needed for Hitch to start, but it can be supplied on the command line.

       Certificates  are  used in the order they are listed; the last certificate listed will be used if none of
       the others match.

       In the event that we have multiple certificates that provide the  same  SNI  string,  an  error  will  be
       logged. The last loaded certificate will in that case take precedence.

       For  partial  overlap  in  names,  e.g.  if  one  certificate  provides "www.example.com" and another one
       "*.example.com", the most specific match will always take precedence at SNI lookup.

       This option is also available in a frontend declaration, to make  a  certificate  only  available  for  a
       specific listen endpoint.

   <b>private-key</b> <b>=</b> <b>&lt;string&gt;</b>
       If set, the private key is read from specified location, not from the cert file.

          pem-file = {
              cert = "mycert.pem"
              private-key = "myprivate.key"
          }

   <b>pem-dir</b> <b>=</b> <b>&lt;string&gt;</b>
       Specify a directory for loading x509 certificates.

       A  fallback  certificate  for  non-SNI  clients  may  be  specified by also including a separate <b>pem-file</b>
       definition.

       The files are processed in lexicographic order. In the absence of any  <b>pem-file</b>  definitions,  the  first
       file entry will be used as the fallback default.

          pem-dir = "/etc/hitch/cert.d"

   <b>pem-dir-glob</b> <b>=</b> <b>&lt;string&gt;</b>
       Matching filter for filenames loaded from <b>pem-dir</b>.

       Default is none (match any).

          pem-dir-glob = "*.pem"

   <b>prefer-server-ciphers</b> <b>=</b> <b>on|off</b>
       Turns on or off enforcement of the cipher ordering set in Hitch.

       This option is also available in frontend blocks.

       Default is off.

   <b>proxy-proxy</b> <b>=</b> <b>on|off</b>
       Proxy  an  incoming  PROXY  protocol  header through to the backend. Supports both version 1 and 2 of the
       PROXY protocol.

       This option is mutually exclusive with option write-proxy-v2, write-ip and write-proxy-v1.

       Default is off.

   <b>log-level</b> <b>=</b> <b>&lt;num&gt;</b>
       Log chattiness. 0=silence, 1=errors, 2=info/debug.

       This setting can also be changed at run-time by editing the  configuration  file  followed  by  a  reload
       (SIGHUP).

       Default is 0.

   <b>quiet</b> <b>=</b> <b>on|off</b>
       If  quiet  is  turned  on,  only  error  messages  will  be shown. This setting is deprecated in favor of
       <b>log-level</b>.

   <b>tls-protos</b> <b>=</b> <b>...</b>
       The SSL/TLS protocols to be used. This is an  unquoted  list  of  tokens.  Available  tokens  are  SSLv3,
       TLSv1.0, TLSv1.1, TLSv1.2 and TLSv1.3.

       The default is TLSv1.2 and TLSv1.3.

       There  are  two  deprecated options, ssl= and tls=, that also select protocols. If "ssl=on" is used, then
       all protocols are selected. This is known to be insecure, and is strongly  discouraged.  If  "tls=on"  is
       used,  the  three  TLS  protocol versions will be used. Turning on SSLv3 and TLSv1.0 is not recommended -
       support for these protocols are only kept for backwards compatibility.

       The availability of protocol versions depend on OpenSSL version and system configuration.  In  particular
       for TLS 1.3, openssl 1.1.1 or later is required.

       For  supporting  legacy  protocol  versions  you  may also need to lower the <b>MinProtocol</b> property in your
       OpenSSL configuration (typically <b><a href="file:/etc/ssl/openssl.cnf">/etc/ssl/openssl.cnf</a></b>).

       This option is also available in frontend blocks.

   <b>ecdh-curve</b> <b>=</b> <b>&lt;string&gt;</b>
       Sets the list of supported TLS curves.  A  special  value  of  <b>auto</b>  will  leave  it  up  to  OpenSSL  to
       automatically pick the most appropriate curve for a client.

          ecdh-curve = "X25519:prime256v1:secp384r1"

   <b>sni-nomatch-abort</b> <b>=</b> <b>on|off</b>
       Abort handshake when the client submits an unrecognized SNI server name.

       This option is also available in a frontend declaration.

   <b>ssl-engine</b> <b>=</b> <b>&lt;string&gt;</b>
       Set  the  SSL  engine.  This  is used with SSL accelerator cards. See the OpenSSL documentation for legal
       values.

   <b>syslog</b> <b>=</b> <b>on|off</b>
       Send messages to syslog. Default is off.

   <b>syslog-facility</b> <b>=</b> <b>&lt;string&gt;</b>
       Set the syslog facility. Default is "daemon".

   <b>user</b> <b>=</b> <b>&lt;string&gt;</b>
       User to run as. If Hitch is started as root, it will insist on changing to a user with lower rights after
       binding to sockets.

   <b>workers</b> <b>=</b> <b>&lt;number&gt;|auto</b>
       Number of worker processes. One per CPU core is recommended.  Using auto value creates 1 worker  per  CPU
       core.

   <b>write-ip</b> <b>=</b> <b>on|off</b>
       Report the client ip to the backend by writing IP before sending data.

       This  option  is  mutually  exclusive  with  each  of  the  options  write-proxy-v2,  write-proxy-v1  and
       proxy-proxy.

       Default is off.

   <b>write-proxy-v1</b> <b>=</b> <b>on|off</b>
       Report client address using the PROXY protocol.

       This option is mutually exclusive with option write-proxy-v2, write-ip and proxy-proxy.

       Default is off.

   <b>write-proxy-v2</b> <b>=</b> <b>on|off</b>
       Report client address using PROXY v2 protocol.

       This option is mutually exclusive with option write-ip, write-proxy-v1 and proxy-proxy.

       Default is off.

   <b>proxy-tlv</b> <b>=</b> <b>on|off</b>
       Report extra information as part of the PROXYv2 header.

       Currently the following will be transmitted when proxy-tlv is enabled:

          • Cipher

          • Protocol version

          • Client certificate verification result

          • Whether   the   client   transmitted   a   certificate   as   part   of   this    connection/session
            (PP2_CLIENT_CERT_CONN, PP2_CLIENT_CERT_SESS)

       Default is on.

   <b>proxy-client-cert</b> <b>=</b> <b>on|off</b>
       Transmit the authenticated client certificate as part of the PROXYv2 header.

       The PEM-formatted client certificate will be transmitted as a TLV field of type 0xe0.

       This  is a custom application-specific type, requiring a a custom handler at the recipient end. Note that
       using this feature will inflate the size of the  PROXY  header  substantially,  possibly  also  requiring
       tweaking at the receiving end.

   <b>tcp-fastopen</b> <b>=</b> <b>on|off</b>
       Enable TCP Fast Open.

       Default is off.

   <b>backend-connect-timeout</b> <b>=</b> <b>&lt;number&gt;</b>
       Configures the backend connect timeout.

   <b>ssl-handshake-timeout</b> <b>=</b> <b>&lt;number&gt;</b>
       Configures the TLS handshake timeout.

</pre><h4><b>EXAMPLE</b></h4><pre>
       The following file shows the syntax needed to get started with:

          frontend = {
              host = "*"
              port = "443"
          }
          backend = "[127.0.0.1]:6086"    # 6086 is the default Varnish PROXY port.
          workers = auto                  # number of CPU cores

          # Enable to let clients negotiate HTTP/2 with ALPN. (default off)
          alpn-protos = "h2, http/1.1"

          # Load the TLS certificates+keys from *.pem files in this directory.
          pem-dir = "/etc/hitch/cert.d"

          # run Varnish as backend over PROXY; varnishd -a :80 -a localhost:6086,PROXY ..
          write-proxy-v2 = on             # Write PROXY header

</pre><h4><b>AUTHOR</b></h4><pre>
       This manual was written by Pål Hermunn Johansen &lt; &lt;<a href="mailto:hermunn@varnish-software.com">hermunn@varnish-software.com</a>&gt; &gt;

                                                                                                   <u><a href="../man5/HITCH.CONF.5.html">HITCH.CONF</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>