<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>flatpak-manifest - Information for building an application</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/flatpak-builder">flatpak-builder_1.4.4-2build1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       flatpak-manifest - Information for building an application

</pre><h4><b>DESCRIPTION</b></h4><pre>
       Flatpak uses manifest, or recipe, files in a json or yaml format to describe how an application and its
       bundled dependencies can be built from sources. The manifest gets used by flatpak-builder.

</pre><h4><b>FILE</b> <b>FORMAT</b></h4><pre>
       The top level of the manifest file describes global attributes of the application, how it can be built,
       and the list of modules that need to be built.

   <b>Toplevel</b> <b>properties</b>
       These are the properties that are accepted:

       <b>id</b> or <b>app-id</b> (string)
           A string defining the application id.

           Note, "app-id" is deprecated and preserved only for backwards compatibility.

       <b>branch</b> (string)
           The branch to use when exporting the application. If this is unset the defaults come from the
           default-branch option.

           This key overrides both the default-branch key, and the --default-branch commandline option. Unless
           you need a very specific branchname (like for a runtime or an extension) it is recommended to use the
           default-branch key instead, because you can then override the default using --default-branch when
           building for instance a test build.

       <b>default-branch</b> (string)
           The default branch to use when exporting the application. Defaults to master.

           This key can be overridden by the --default-branch commandline option.

       <b>collection-id</b> (string)
           The collection ID of the repository, defaults to being unset. Setting a globally unique collection ID
           allows the apps in the repository to be shared over peer to peer systems without needing further
           configuration. If building in an existing repository, the collection ID must match the existing
           configured collection ID for that repository.

       <b>extension-tag</b> (string)
           If building an extension, the tag for the extension point to use. Since flatpak 0.11.4 a runtime may
           define multiple locations for the same extension point with the intention that different branches for
           the extension are mounted at each location. When building an extension it is necessary to know what
           extension point to install the extension to. This option resolves any ambiguity in which extension
           point to choose. If not specified, the default choice is to install into either the only location for
           the extension point or into the location for the untagged extension point. If there are multiple
           locations for the same extension point defined with different tags then an error will occur.

       <b>token-type</b> (integer)
           The type of token needed to install this commit. Setting this to a value greater than 0 implies that
           authentication will be needed to install the flatpak.

       <b>runtime</b> (string)
           The name of the runtime that the application uses.

       <b>runtime-version</b> (string)
           The version of the runtime that the application uses, defaults to master.

       <b>sdk</b> (string)
           The name of the development runtime that the application builds with.

       <b>var</b> (string)
           Initialize the (otherwise empty) writable <a href="file:/var">/var</a> in the build with a copy of this runtime.

       <b>metadata</b> (string)
           Use this file as the base metadata file when finishing.

       <b>command</b> (string)
           The filename or path to the main binary of the application. Note that this is really just a single
           file, not a commandline. If you want to pass arguments, install a shell script wrapper and use that
           as the command.

           Also note that the command is used when the application is run via <b>flatpak</b> <b>run</b>, and does not affect
           what gets executed when the application is run in other ways, e.g. via the desktop file or D-Bus
           activation.

       <b>build-runtime</b> (boolean)
           Build a new runtime instead of an application.

       <b>build-extension</b> (boolean)
           Build an extension.

       <b>separate-locales</b> (boolean)
           Separate out locale files and translations to an extension runtime. Defaults to true.

       <b>id-platform</b> (string)
           When building a runtime sdk, also create a platform based on it with this id.

       <b>metadata-platform</b> (string)
           The metadata file to use for the platform we create.

       <b>writable-sdk</b> (boolean)
           If true, use a writable copy of the sdk for /usr. Defaults to true if build-runtime is specified.

       <b>appstream-compose</b> (boolean)
           Run <b>appstreamcli</b> <b>compose</b> during cleanup phase. Defaults to true.

       <b>sdk-extensions</b> (array of strings)
           Install these extra sdk extensions in /usr.

       <b>platform-extensions</b> (array of strings)
           Install these extra sdk extensions when creating the platform.

       <b>base</b> (string)
           Start with the files from the specified application. This can be used to create applications that
           extend another application.

       <b>base-version</b> (string)
           Use this specific version of the application specified in base. If unspecified, this uses the value
           specified in branch

       <b>base-extensions</b> (array of strings)
           Install these extra extensions from the base application when initializing the application directory.

       <b>inherit-extensions</b> (array of strings)
           Inherit these extra extension points from the base application or sdk when finishing the build.

       <b>inherit-sdk-extensions</b> (array of strings)
           Inherit these extra extension points from the base application or sdk when finishing the build, but
           do not inherit them into the platform.

       <b>tags</b> (array of strings)
           Add these tags to the metadata file.

       <b>build-options</b> (object)
           Object specifying the build environment. See below for details.

       <b>modules</b> (array of objects or strings)
           An array of objects specifying the modules to be built in order. String members in the array are
           interpreted as the name of a separate json or yaml file that contains a module. See below for
           details.

       <b>add-extensions</b> (objects)
           This is a dictionary of extension objects. The key is the name of the extension. See below for
           details.

       <b>add-build-extensions</b> (objects)
           This is a dictionary of extension objects similar to add-extensions. The main difference is that the
           extensions are added early and are available for use during the build.

       <b>cleanup</b> (array of strings)
           An array of file patterns that should be removed at the end. Patterns starting with / are taken to be
           full pathnames (without the <a href="file:/app">/app</a> prefix), otherwise they just match the basename.

       <b>cleanup-commands</b> (array of strings)
           An array of commandlines that are run during the cleanup phase.

       <b>cleanup-platform</b> (array of strings)
           Extra files to clean up in the platform.

       <b>cleanup-platform-commands</b> (array of strings)
           An array of commandlines that are run during the cleanup phase of the platform.

       <b>prepare-platform-commands</b> (array of strings)
           An array of commandlines that are run after importing the base platform, but before applying the new
           files from the sdk. This is a good place to e.g. delete things from the base that may conflict with
           the files added in the sdk.

       <b>finish-args</b> (array of strings)
           An array of arguments passed to the <b>flatpak</b> <b>build-finish</b> command.

       <b>rename-desktop-file</b> (string)
           Any desktop file with this name will be renamed to a name based on id during the cleanup phase. The
           appdata file launchable will be updated if needed.

       <b>rename-appdata-file</b> (string)
           Any appdata (metainfo) file with this name will be renamed to a name based on id during the cleanup
           phase. The id in the file will be updated as needed and the subsequent provides. (since 1.4.1)

       <b>rename-mime-file</b> (string)
           Any mimetypes file with this name will be renamed to a name based on id during the cleanup phase.
           (since 1.4.0)

       <b>rename-icon</b> (string)
           Any icon with this name will be renamed to a name based on id during the cleanup phase. Note that
           this is the icon name, not the full filename, so it should not include a filename extension.

       <b>rename-mime-icons</b> (array of string)
           Any mime icons with any of these names will be renamed to a name prefixed with id during the cleanup
           phase. Note that these are the icon names, not the full filenames, so they should not include a
           filename extension. (since 1.4.0)

       <b>appdata-license</b> (string)
           Replace the appdata (metainfo) project_license field with this string. This is useful as the upstream
           license is typically only about the application itself, whereas the bundled app can contain other
           licenses too.

       <b>copy-icon</b> (boolean)
           If rename-icon is set, keep a copy of the old icon file.

       <b>desktop-file-name-prefix</b> (string)
           This string will be prefixed to the Name key in the main application desktop file.

       <b>desktop-file-name-suffix</b> (string)
           This string will be suffixed to the Name key in the main application desktop file.

   <b>Build</b> <b>Options</b>
       Build options specify the build environment of a module, and can be specified globally as well as
       per-module. Options can also be specified on a per-architecture basis using the arch property.

       These are the properties that are accepted:

       <b>cflags</b> (string)
           This is set in the environment variable CFLAGS during the build. Multiple specifications of this (in
           e.g. per-arch area) are concatenated, separated by spaces.

       <b>cflags-override</b> (boolean)
           If this is true, clear cflags from previous build options before adding it from these options.

       <b>cppflags</b> (string)
           This is set in the environment variable CPPFLAGS during the build. Multiple specifications of this
           (in e.g. per-arch area) are concatenated, separated by spaces.

       <b>cppflags-override</b> (boolean)
           If this is true, clear cppflags from previous build options before adding it from these options.

       <b>cxxflags</b> (string)
           This is set in the environment variable CXXFLAGS during the build. Multiple specifications of this
           (in e.g. per-arch area) are concatenated, separated by spaces.

       <b>cxxflags-override</b> (boolean)
           If this is true, clear cxxflags from previous build options before adding it from these options.

       <b>ldflags</b> (string)
           This is set in the environment variable LDFLAGS during the build. Multiple specifications of this (in
           e.g. per-arch area) are concatenated, separated by spaces.

       <b>ldflags-override</b> (boolean)
           If this is true, clear ldflags from previous build options before adding it from these options.

       <b>prefix</b> (string)
           The build prefix for the modules (defaults to <a href="file:/app">/app</a> for applications and <a href="file:/usr">/usr</a> for runtimes).

       <b>libdir</b> (string)
           The build libdir for the modules (defaults to /app/lib for applications and <a href="file:/usr/lib">/usr/lib</a> for runtimes).

       <b>append-path</b> (string)
           This will get appended to PATH in the build environment (with an leading colon if needed).

       <b>prepend-path</b> (string)
           This will get prepended to PATH in the build environment (with an trailing colon if needed).

       <b>append-ld-library-path</b> (string)
           This will get appended to LD_LIBRARY_PATH in the build environment (with an leading colon if needed).

       <b>prepend-ld-library-path</b> (string)
           This will get prepended to LD_LIBRARY_PATH in the build environment (with an trailing colon if
           needed).

       <b>append-pkg-config-path</b> (string)
           This will get appended to PKG_CONFIG_PATH in the build environment (with an leading colon if needed).

       <b>prepend-pkg-config-path</b> (string)
           This will get prepended to PKG_CONFIG_PATH in the build environment (with an trailing colon if
           needed).

       <b>env</b> (object)
           This is a dictionary defining environment variables to be set during the build. Elements in this
           override the properties that set the environment, like cflags and ldflags. Keys with a null value
           unset the corresponding variable.

       <b>secret-env</b> (array of strings)
           This is a array defining which host environment variables is transfered to build-commands or
           post-install environment.

       <b>build-args</b> (array of strings)
           This is an array containing extra options to pass to flatpak build.

       <b>test-args</b> (array of strings)
           Similar to build-args but affects the tests, not the normal build.

       <b>config-opts</b> (array of strings)
           This is an array containing extra options passed to the build system during configuration.

       <b>secret-opts</b> (array of strings)
           This is an array of options that will be passed to configure, meant to be used to pass secrets
           through host environment variables. Put the option with an environment variables and will be resolved
           beforehand. '-DSECRET_ID=$CI_SECRET'

       <b>make-args</b> (array of strings)
           An array of extra arguments that will be passed to make

       <b>make-install-args</b> (array of strings)
           An array of extra arguments that will be passed to make install

       <b>strip</b> (boolean)
           If this is true (the default is false) then all ELF files will be stripped after install.

       <b>no-debuginfo</b> (boolean)
           By default (if strip is not true) flatpak-builder extracts all debug info in ELF files to a separate
           files and puts this in an extension. If you want to disable this, set no-debuginfo to true.

       <b>no-debuginfo-compression</b> (boolean)
           By default when extracting debuginfo we compress the debug sections. If you want to disable this, set
           no-debuginfo-compression to true.

       <b>arch</b> (object)
           This is a dictionary defining for each arch a separate build options object that override the main
           one.

   <b>Extension</b>
       Extension define extension points in the app/runtime that can be implemented by extensions, supplying
       extra files which are available during runtime..

       These are the properties that are accepted:

       <b>directory</b> (string)
           The directory where the extension is mounted. If the extension point is for an application, this path
           is relative to <a href="file:/app">/app</a>, otherwise it is relative to /usr.

       <b>bundle</b> (boolean)
           If this is true, then the data created in the extension directory is omitted from the result, and
           instead packaged in a separate extension.

       <b>remove-after-build</b> (boolean)
           If this is true, the extension is removed during when finishing. This is only interesting for
           extensions in the add-build-extensions property.

       Additionally the standard flatpak extension properties are supported, and put directly into the metadata
       file: autodelete, no-autodownload, subdirectories, add-ld-path, download-if, enable-if, autoprune-unless,
       merge-dirs, subdirectory-suffix, locale-subset, version, versions. See the flatpak metadata documentation
       for more information on these.

   <b>Module</b>
       Each module specifies a source that has to be separately built and installed. It contains the build
       options and a list of sources to download and extract before building.

       Modules can be nested, in order to turn related modules on and off with a single key.

       These are the properties that are accepted:

       <b>name</b> (string)
           The name of the module, used in e.g. build logs. The name is also used for constructing filenames and
           commandline arguments, therefore using spaces or '/' in this string is a bad idea.

       <b>disabled</b> (boolean)
           If true, skip this module

       <b>sources</b> (array of objects or strings)
           An array of objects defining sources that will be downloaded and extracted in order. String members
           in the array are interpreted as the name of a separate json or yaml file that contains sources. See
           below for details.

       <b>secret-env</b> (array of strings)
           An array defining which host environment variables is transfered to build-commands or post-install
           environment.

       <b>config-opts</b> (array of strings)
           An array of options that will be passed to configure

       <b>secret-opts</b> (array of strings)
           An array of options that will be passed to configure, meant to be used to pass secrets through host
           environment variables. Put the option with an environment variables and will be resolved beforehand.
           '-DSECRET_ID=$CI_SECRET'

       <b>make-args</b> (array of strings)
           An array of arguments that will be passed to make

       <b>make-install-args</b> (array of strings)
           An array of arguments that will be passed to make install

       <b>rm-configure</b> (boolean)
           If true, remove the configure script before starting build

       <b>no-autogen</b> (boolean)
           Ignore the existence of an autogen script

       <b>no-parallel-make</b> (boolean)
           Don't call make with arguments to build in parallel

       <b>install-rule</b> (string)
           Name of the rule passed to make for the install phase, default is install

       <b>no-make-install</b> (boolean)
           Don't run the make install (or equivalent) stage

       <b>no-python-timestamp-fix</b> (boolean)
           Don't fix up the *.py[oc] header timestamps for ostree use.

       <b>cmake</b> (boolean)
           Use cmake instead of configure (deprecated: use buildsystem instead)

       <b>buildsystem</b> (string)
           Build system to use: autotools, cmake, cmake-ninja, meson, simple, qmake

       <b>builddir</b> (boolean)
           Use a build directory that is separate from the source directory

       <b>subdir</b> (string)
           Build inside this subdirectory of the extracted sources

       <b>build-options</b> (object)
           A build options object that can override global options

       <b>build-commands</b> (array of strings)
           An array of commands to run during build (between make and make install if those are used). This is
           primarily useful when using the "simple" buildsystem. Each command is run in <a href="file:/bin/sh">/bin/sh</a> -c, so it can
           use standard POSIX shell syntax such as piping output. If any individual entry in the array fails,
           then the whole build process will fail, similar to commands in a <b><a href="../man1/make.1.html">make</a></b>(1) recipe.

       <b>post-install</b> (array of strings)
           An array of shell commands that are run after the install phase. Can for example clean up the install
           dir, or install extra files.

       <b>cleanup</b> (array of strings)
           An array of file patterns that should be removed at the end. Patterns starting with / are taken to be
           full pathnames (without the <a href="file:/app">/app</a> prefix), otherwise they just match the basename. Note that any
           patterns will only match files installed by this module.

       <b>ensure-writable</b> (array of strings)
           The way the builder works is that files in the install directory are hard-links to the cached files,
           so you're not allowed to modify them in-place. If you list a file in this then the hardlink will be
           broken and you can modify it. This is a workaround, ideally installing files should replace files,
           not modify existing ones.

       <b>only-arches</b> (array of strings)
           If non-empty, only build the module on the arches listed.

       <b>skip-arches</b> (array of strings)
           Don't build on any of the arches listed.

       <b>cleanup-platform</b> (array of strings)
           Extra files to clean up in the platform.

       <b>run-tests</b> (boolean)
           If true this will run the tests after installing.

       <b>test-rule</b> (string)
           The target to build when running the tests. Defaults to "check" for make and "test" for ninja. Set to
           empty to disable.

       <b>test-commands</b> (array of strings)
           Array of commands to run during the tests.

       <b>modules</b> (array of objects or strings)
           An array of objects specifying nested modules to be built before this one. String members in the
           array are interpreted as names of a separate json or yaml file that contains a module.

   <b>Sources</b>
       These contain a pointer to the source that will be extracted into the source directory before the build
       starts. They can be of several types, distinguished by the type property.

       Additionally, the sources list can contain a plain string, which is interpreted as the name of a separate
       json or yaml file that is read and inserted at this point. The file can contain a single source, or an
       array of sources.

       <b>All</b> <b>sources</b>

           <b>only-arches</b> (array of strings)
               If non-empty, only build the module on the arches listed.

           <b>skip-arches</b> (array of strings)
               Don't build on any of the arches listed.

           <b>dest</b> (string)
               Directory inside the source dir where this source will be extracted.

       <b>Archive</b> <b>sources</b> <b>(tar,</b> <b>zip)</b>

           <b>type</b>
               "archive"

           <b>path</b> (string)
               The path of the archive

           <b>url</b> (string)
               The URL of a remote archive that will be downloaded. This overrides path if both are specified.

           <b>mirror-urls</b> (array of strings)
               A list of alternative urls that are used if the main url fails.

           <b>referer</b> (string)
               Sets the HTTP "Referer" header when downloading the archive.

           <b>disable-http-decompression</b> (boolean)
               Disables decompression of downloads over HTTP for misconfigured servers.

           <b>git-init</b> (boolean)
               Whether to initialise the repository as a git repository.

           <b>archive-type</b> (string)
               The type of archive if it cannot be guessed from the path. Possible values are "rpm", "tar",
               "tar-gzip", "tar-compress", "tar-bzip2", "tar-lzip", "tar-lzma", "tar-lzop", "tar-xz", "tar-zst",
               "zip" and "7z".

           <b>md5</b> (string)
               The md5 checksum of the file, verified after download

               Note that md5 is no longer considered a safe checksum, we recommend you use at least sha256.

           <b>sha1</b> (string)
               The sha1 checksum of the file, verified after download

               Note that sha1 is no longer considered a safe checksum, we recommend you use at least sha256.

           <b>sha256</b> (string)
               The sha256 checksum of the file, verified after download

           <b>sha512</b> (string)
               The sha512 checksum of the file, verified after download

           <b>strip-components</b> (integer)
               The number of initial pathname components to strip during extraction. Defaults to 1.

           <b>dest-filename</b> (string)
               Filename to for the downloaded file, defaults to the basename of url.

       <b>Git</b> <b>sources</b>

           <b>type</b>
               "git"

           <b>path</b> (string)
               The path to a local checkout of the git repository. Due to how git-clone works, this will be much
               faster than specifying a URL of file:///...

           <b>url</b> (string)
               URL of the git repository. This overrides path if both are specified. When using git via SSH, the
               correct syntax is ssh://user@domain/path/to/repo.git.

           <b>branch</b> (string)
               The branch to use from the git repository. As of 1.2.3 this will try to auto-detect the upstream
               default branch. Previously this defaulted to master.

           <b>tag</b> (string)
               The tag to use from the git repository

           <b>commit</b> (string)
               The commit to use from the git repository. If branch is also specified, then it is verified that
               the branch/tag is at this specific commit. This is a readable way to document that you're using a
               particular tag, but verify that it does not change.

           <b>disable-fsckobjects</b> (boolean)
               Don't use transfer.fsckObjects=1 to mirror git repository. This may be needed for some (broken)
               repositories.

           <b>disable-shallow-clone</b> (boolean)
               Don't optimize by making a shallow clone when downloading the git repo.

           <b>disable-submodules</b> (boolean)
               Don't checkout the git submodules when cloning the repository.

       <b>Bzr</b> <b>sources</b>

           <b>type</b>
               "bzr"

           <b>url</b> (string)
               URL of the bzr repository

           <b>revision</b> (string)
               A specific revision to use in the branch

       <b>Svn</b> <b>sources</b>

           <b>type</b>
               "svn"

           <b>url</b> (string)
               URL of the svn repository, including branch/tag part

           <b>revision</b> (string)
               A specific revision number to use

       <b>Directory</b> <b>sources</b>

           <b>type</b>
               "dir"

           <b>path</b> (string)
               The path of a local directory whose content will be copied into the source dir. Note that
               directory sources don't currently support caching, so they will be rebuilt each time.

           <b>skip</b> (array of strings)
               Source files to ignore in the directory.

       <b>File</b> <b>sources</b>

           <b>type</b>
               "file"

           <b>path</b> (string)
               The path of a local file that will be copied into the source dir

           <b>url</b> (string)
               The URL of a remote file that will be downloaded and copied into the source dir. This overrides
               path if both are specified.

           <b>mirror-urls</b> (array of strings)
               A list of alternative urls that are used if the main url fails.

           <b>referer</b> (string)
               Sets the HTTP "Referer" header when downloading the file.

           <b>disable-http-decompression</b> (boolean)
               Disables decompression of downloads over HTTP for misconfigured servers.

           <b>md5</b> (string)
               The md5 checksum of the file, verified after download. This is optional for local files.

               Note that md5 is no longer considered a safe checksum, we recommend you use at least sha256.

           <b>sha1</b> (string)
               The sha1 checksum of the file, verified after download. This is optional for local files.

               Note that sha1 is no longer considered a safe checksum, we recommend you use at least sha256.

           <b>sha256</b> (string)
               The sha256 checksum of the file, verified after download. This is optional for local files.

           <b>sha512</b> (string)
               The sha512 checksum of the file, verified after download. This is optional for local files.

           <b>dest-filename</b> (string)
               Filename to use inside the source dir, default to the basename of path.

       <b>Script</b> <b>sources</b>

           This is a way to create a shell (<a href="file:/bin/sh">/bin/sh</a>) script from an inline set of commands.

           <b>type</b>
               "script"

           <b>commands</b> (array of strings)
               An array of shell commands that will be put in a shellscript file

           <b>dest-filename</b> (string)
               Filename to use inside the source dir, default to autogen.sh.

       <b>Inline</b> <b>data</b> <b>sources</b>

           This is a way to create a file with given contents.

           <b>type</b>
               "inline"

           <b>dest-filename</b> (string)
               Filename to use inside the source dir.

           <b>contents</b> (string)
               Text data that will be put in the file.

           <b>base64</b> (boolean)
               Whether content is base64-encoded.

       <b>Shell</b> <b>sources</b>

           This is a way to create/modify the sources by running shell commands.

           <b>type</b>
               "shell"

           <b>commands</b> (array of strings)
               An array of shell commands that will be run during source extraction

       <b>Patch</b> <b>sources</b>

           <b>type</b>
               "patch"

           <b>path</b> (string)
               The path of a patch file that will be applied in the source dir

           <b>paths</b> (array of strings)
               An list of paths to a patch files that will be applied in the source dir, in order

           <b>strip-components</b> (integer)
               The value of the -p argument to patch, defaults to 1.

           <b>use-git</b> (boolean)
               Whether to use "git apply" rather than "patch" to apply the patch, required when the patch file
               contains binary diffs.

           <b>use-git-am</b> (boolean)
               Whether to use "git am" rather than "patch" to apply the patch, required when the patch file
               contains binary diffs. You cannot use this at the same time as <b>use-git</b>.

           <b>options</b> (array of strings)
               Extra options to pass to the patch command.

       <b>Extra</b> <b>data</b> <b>sources</b>

           <b>type</b>
               "extra-data"

           <b>filename</b> (string)
               The name to use for the downloaded extra data

           <b>url</b> (string)
               The url to the extra data.

           <b>sha256</b> (string)
               The sha256 of the extra data.

           <b>size</b> (number)
               The size of the extra data in bytes.

           <b>installed-size</b> (string)
               The extra installed size this adds to the app (optional).

</pre><h4><b>BUILD</b> <b>ENVIRONMENT</b></h4><pre>
       When building the application each command is run in a separate sandbox with access to only the things
       required for it. This section describes the details of the sandbox. Any options here can be overridden
       globally or per-module with the <b>build-args</b> option (although such manifest will not work if you start
       flatpak-builder with <b>--sandbox</b>).

   <b>Filesystem</b>
       Each module is built in its own build directory, stored in a sub directory called
       build/$modulename-$count in the state dir (which is typically .flatpak-builder/). Additionally there is a
       symlink build/$modulename to the latest version. In order to generate reproducible builds this directory
       is also mounted as /run/build/$modulename in the sandbox (or /run/build-runtime/$modulename when building
       runtimes). This is used as current working directory for all build ops.

       The destination directory for installation is accessible for writing at the place it will seen at
       runtime. In the case of a regular application this will be /app. If building a runtime it will instead be
       <a href="file:/usr">/usr</a>, and when building an extension it will be at the extensionpoint directory somewhere below <a href="file:/app">/app</a> (for
       app extension) or <a href="file:/usr">/usr</a> (for runtime extensions).

       Additionally the there will be (as needed, depending on what is building) read-only mounts of the sdk at
       <a href="file:/usr">/usr</a>, sdk extensions below that, and the application at /app. No other filesystem access is available.

   <b>Environment</b>
       The environment can be modified in several ways in the manifest, but the default values are:

       FLATPAK_ID
           The id of the application currently building.

       FLATPAK_ARCH
           The architecture currently building.

       FLATPAK_DEST
           The path to where the current build should install into. This is <a href="file:/app">/app</a> for application builds.

       FLATPAK_BUILDER_N_JOBS
           The number of jobs that flatpak-builder would normally use for make -j. Defaults to ncpus unless the
           module disabled parallel make.

       FLATPAK_BUILDER_BUILDDIR
           The path to the build directory of the module currently building. This is normally
           /run/build/$MODULE.

       PATH
           <a href="file:/app/bin">/app/bin</a>:<a href="file:/usr/bin">/usr/bin</a>

       LD_LIBRARY_PATH
           /app/lib

       PKG_CONFIG_PATH
           /app/lib/pkgconfig:/app/share/pkgconfig:/usr/lib/pkgconfig:<a href="file:/usr/share/pkgconfig">/usr/share/pkgconfig</a>

       ACLOCAL_PATH
           /app/share/aclocal

       C_INCLUDE_PATH
           /app/include

       CPLUS_INCLUDE_PATH
           /app/include

       LDFLAGS
           -L/app/lib

       LC_ALL
           en_US.utf8

   <b>Permissions</b>
       Builds have the --allow=devel and --allow=multiarch permissions that regular flatpak runs don't have by
       default. This limits the syscall filtering that is normally done so development tools like debuggers
       work. Otherwise the build sandbox is very limited, for example there is no network access.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>$</b> <b>flatpak-builder</b> <b>my-app-dir</b> <b>manifest.json</b>

       Example manifest file:

           {
               "id": "org.test.TestApp",
               "runtime": "org.freedesktop.Platform",
               "runtime-version": "1.2",
               "sdk": "org.freedesktop.Sdk",
               "command": "test",
               "clean": [ "/include", "*.la" ],
               "build-options" : {
                   "cflags": "-O2 -g",
                   "cxxflags": "-O2 -g",
                   "env": {
                       "V": "1"
                   },
                   "arch": {
                       "x86_64": {
                           "cflags": "-O3 -g",
                       }
                   }
               },
               "modules": [
                   {
                       "name": "pygobject",
                       "config-opts": [ "--disable-introspection" ],
                       "sources": [
                           {
                               "type": "archive",
                               "url": "<a href="http://ftp.gnome.org/pub/GNOME/sources/pygobject/2.28/pygobject-2.28.6.tar.xz">http://ftp.gnome.org/pub/GNOME/sources/pygobject/2.28/pygobject-2.28.6.tar.xz</a>",
                               "sha256": "fb8a1d4f665130a125011659bd347c7339c944232163dbb9a34fd0686577adb8"
                           },
                           {
                               "type": "patch",
                               "path": "required-pygobject-fix.patch"
                           },
                           {
                               "type": "file",
                               "path": "pygobject-extra-file",
                               "dest-filename": "extra-file"
                           }
                       ]
                   },
                   {
                       "name": "babl",
                       "build-options" : { "cxxflags": "-O2 -g -std=c++11" },
                       "cleanup": [ "<a href="file:/bin">/bin</a>" ],
                       "sources": [
                           {
                               "type": "git",
                               "url": "https://gitlab.gnome.org/GNOME/babl.git"
                           }
                       ]
                   },
                   {
                       "name": "testapp",
                       "sources": [
                           {
                               "type": "bzr",
                               "url": "lp:testapp"
                           }
                       ]
                   }
               ]
           }

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/flatpak-builder.1.html">flatpak-builder</a></b>(1)

flatpak                                                                                      <u>FLATPAK</u> <u><a href="../man5/MANIFEST.5.html">MANIFEST</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>