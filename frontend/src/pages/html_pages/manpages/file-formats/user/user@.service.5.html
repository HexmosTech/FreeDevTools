<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>user@.service, user-runtime-dir@.service, systemd-user-runtime-dir - System units to start the user</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/systemd">systemd_257.7-1ubuntu1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       user@.service, user-runtime-dir@.service, systemd-user-runtime-dir - System units to start the user
       manager

</pre><h4><b>SYNOPSIS</b></h4><pre>
       user@<u>UID</u>.service

       user-runtime-dir@<u>UID</u>.service

       <a href="file:/usr/lib/systemd/systemd-user-runtime-dir">/usr/lib/systemd/systemd-user-runtime-dir</a>

       user-<u>UID</u>.slice

</pre><h4><b>DESCRIPTION</b></h4><pre>
       The <b><a href="../man1/systemd.1.html">systemd</a></b>(1) system manager (PID 1) starts user manager instances as user@<u>UID</u>.service, with the user's
       numerical UID used as the instance identifier. These instances use the same executable as the system
       manager, but running in a mode where it starts a different set of units. Each <b>systemd</b> <b>--user</b> instance
       manages a hierarchy of units specific to that user. See <b><a href="../man1/systemd.1.html">systemd</a></b>(1) for a discussion of units and
       <b><a href="../man7/systemd.special.7.html">systemd.special</a></b>(7) for a list of units that form the basis of the unit hierarchies of system and user
       units.

       user@<u>UID</u>.service is accompanied by the system unit user-runtime-dir@<u>UID</u>.service, which creates the user's
       runtime directory <a href="file:/run/user/">/run/user/</a><u>UID</u>, and then removes it when this unit is stopped.
       user-runtime-dir@<u>UID</u>.service executes the systemd-user-runtime-dir binary to do the actual work.

       User processes may be started by the user@.service instance, in which case they will be part of that unit
       in the system hierarchy. They may also be started elsewhere, for example by <b><a href="../man8/sshd.8.html">sshd</a></b>(8) or a display manager
       like <b>gdm</b>, in which case they form a .scope unit (see <b><a href="../man5/systemd.scope.5.html">systemd.scope</a></b>(5)). Both user@<u>UID</u>.service and the
       scope units are collected under the user-<u>UID</u>.slice.

       Individual user-<u>UID</u>.slice slices are collected under user.slice, see <b><a href="../man7/systemd.special.7.html">systemd.special</a></b>(7).

</pre><h4><b>CONTROLLING</b> <b>RESOURCES</b> <b>FOR</b> <b>LOGGED-IN</b> <b>USERS</b></h4><pre>
       Options that control resources available to logged-in users can be configured at a few different levels.
       As described in the previous section, user.slice contains processes of all users, so any resource limits
       on that slice apply to all users together. The usual way to configure them would be through drop-ins,
       e.g.  /etc/systemd/system/user.slice.d/resources.conf.

       The processes of a single user are collected under user-<u>UID</u>.slice. Resource limits for that user can be
       configured through drop-ins for that unit, e.g.  /etc/systemd/system/user-1000.slice.d/resources.conf. If
       the limits should apply to all users instead, they may be configured through drop-ins for the truncated
       unit name, user-.slice. For example, configuration in /etc/systemd/system/user-.slice.d/resources.conf is
       included in all user-<u>UID</u>.slice units, see <b><a href="../man5/systemd.unit.5.html">systemd.unit</a></b>(5) for a discussion of the drop-in mechanism.

       When a user logs in and a .scope unit is created for the session (see previous section), the creation of
       the scope may be managed through <b><a href="../man8/pam_systemd.8.html">pam_systemd</a></b>(8). This PAM module communicates with <b><a href="../man8/systemd-logind.8.html">systemd-logind</a></b>(8) to
       create the session scope and provide access to hardware resources. Resource limits for the scope may be
       configured through the PAM module configuration, see <b><a href="../man8/pam_systemd.8.html">pam_systemd</a></b>(8). Configuring them through the normal
       unit configuration is also possible, but since the name of the slice unit is generally unpredictable,
       this is less useful.

       In general any resources that apply to units may be set for user@<u>UID</u>.service and the slice units
       discussed above, see <b><a href="../man5/systemd.resource-control.5.html">systemd.resource-control</a></b>(5) for an overview.

</pre><h4><b>EXAMPLES</b></h4><pre>
       <b>Example</b> <b>1.</b> <b>Hierarchy</b> <b>of</b> <b>control</b> <b>groups</b> <b>with</b> <b>two</b> <b>logged</b> <b>in</b> <b>users</b>

           $ systemd-cgls
           Control group /:
           -.slice
           ├─user.slice
           │ ├─user-1000.slice
           │ │ ├─<a href="mailto:user@1000.service">user@1000.service</a>
           │ │ │ ├─pulseaudio.service
           │ │ │ │ └─2386 /usr/bin/pulseaudio --daemonize=no
           │ │ │ └─gnome-terminal-server.service
           │ │ │   └─init.scope
           │ │ │     ├─ 4127 /usr/libexec/gnome-terminal-server
           │ │ │     └─ 4198 zsh
           │ │ ...
           │ │ └─session-4.scope
           │ │   ├─ 1264 gdm-session-worker [pam/gdm-password]
           │ │   ├─ 2339 /usr/bin/gnome-shell
           │ │   ...
           │ │ ├─session-19.scope
           │ │   ├─6497 sshd: zbyszek [priv]
           │ │   ├─6502 sshd: zbyszek@pts/6
           │ │   ├─6509 -zsh
           │ │   └─6602 systemd-cgls --no-pager
           │ ...
           │ └─user-1001.slice
           │   ├─session-20.scope
           │   │ ├─6675 sshd: guest [priv]
           │   │ ├─6708 sshd: guest@pts/6
           │   │ └─6717 -bash
           │   └─<a href="mailto:user@1001.service">user@1001.service</a>
           │     ├─init.scope
           │     │ ├─6680 <a href="file:/usr/lib/systemd/systemd">/usr/lib/systemd/systemd</a> --user
           │     │ └─6688 (sd-pam)
           │     └─sleep.service
           │       └─6706 <a href="file:///usr/lib/w3m/cgi-bin/w3mman2html.cgi?sleep">/usr/bin/sleep</a> 30
           ...

       User with UID 1000 is logged in using <b>gdm</b> (session-4.scope) and <b><a href="../man1/ssh.1.html">ssh</a></b>(1) (session-19.scope), and also has a
       user manager instance running (<a href="mailto:user@1000.service">user@1000.service</a>). User with UID 1001 is logged in using <b>ssh</b>
       (session-20.scope) and also has a user manager instance running (<a href="mailto:user@1001.service">user@1001.service</a>). Those are all (leaf)
       system units, and form part of the slice hierarchy, with user-1000.slice and user-1001.slice below
       user.slice. User units are visible below the user@.service instances (pulseaudio.service,
       gnome-terminal-server.service, init.scope, sleep.service).

       <b>Example</b> <b>2.</b> <b>Default</b> <b>user</b> <b>resource</b> <b>limits</b>

           $ systemctl cat user-1000.slice
           # <a href="file:/usr/lib/systemd/system/user-.slice.d/10-defaults.conf">/usr/lib/systemd/system/user-.slice.d/10-defaults.conf</a>
           # ...
           [Unit]
           Description=User Slice of UID %j
           After=systemd-user-sessions.service

           [Slice]
           TasksMax=33%

       The user-<u>UID</u>.slice units by default do not have a unit file. The resource limits are set through a
       drop-in, which can be easily replaced or extended following standard drop-in mechanisms discussed in the
       first section.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/systemd.1.html">systemd</a></b>(1), <b><a href="../man5/systemd.service.5.html">systemd.service</a></b>(5), <b><a href="../man5/systemd.slice.5.html">systemd.slice</a></b>(5), <b><a href="../man5/systemd.resource-control.5.html">systemd.resource-control</a></b>(5), <b><a href="../man5/systemd.exec.5.html">systemd.exec</a></b>(5),
       <b><a href="../man7/systemd.special.7.html">systemd.special</a></b>(7), <b>capsule@.<a href="../man5/service.5.html">service</a></b>(5), <b><a href="../man8/pam.8.html">pam</a></b>(8)

systemd 257.7                                                                                   <u>USER@.<a href="../man5/SERVICE.5.html">SERVICE</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>