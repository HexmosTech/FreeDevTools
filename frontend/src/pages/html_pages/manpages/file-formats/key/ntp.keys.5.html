<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ntp.keys - NTP symmetric key file format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/ntpsec">ntpsec_1.2.3+dfsg1-3_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       ntp.keys - NTP symmetric key file format

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This document describes the format of an NTP symmetric key file. For a description of the use of this
       type of file, see the "Authentication Support" page of the Web documentation.

       <a href="../man8/ntpd.8.html">ntpd</a>(8) reads its keys from a file specified using the -k command line option or the <u>keys</u> statement in
       the configuration file. While key number 0 is fixed by the NTP standard (as 56 zero bits) and may not be
       changed, one or more keys numbered between 1 and 65535 may be arbitrarily set in the keys file.

       The key file uses the same comment conventions as the configuration file. Key entries use a fixed format
       of the form

           keyno type key

       where keyno is a positive integer (between 1 and 65535), type is the message digest or cipher algorithm,
       and key is the key itself.

       The file does not need to be sorted by keyno.

       type can be the name of any digest or cipher supported by your OpenSSL package. Digests or CMACs longer
       than 20 bytes will be truncated.

       You can get a list from openssl list -digest-algorithms or openssl list -cipher-algorithms. (As of Jan
       2018, they lie. Be sure to try it. <a href="../man8/ntpd.8.html">ntpd</a>(8) will print an error on startup if a selected type isn’t
       supported.)

       AES-128 is recommended by RFC 8573. Most modern CPUs have hardware support.

       Only the -CBC cipher modes are useful. The -CBC is appended to the type internally. Do not include it in
       type.

       AES is an alias for AES-128.

       SHA-1 is an alias for SHA1. (NIST uses SHA-1. OpenSSL uses SHA1.)

       Note that MD5 was deprecated by RFC 8573 in June of 2019. AES-128 is currently preferred. Most modern
       CPUs have hardware support. Our code still supports MD5 for backwards compatibility.

       FIPS 140-2, FIPS 180-4, and/or FIPS 202 may restrict your choices. If it matters to you, check with your
       lawyer. (Let us know if you find a good reference.) In particular, they don’t allow MD5.

       The key may be printable ASCII excluding "#" or hex encoded. Keys longer than 20 characters are assumed
       to be hex. The max length of a (de-hexified) key is 32 bytes. If you want to use an ASCII key longer than
       20 bytes, you must hexify it.

       Note that the keys used by the <a href="../man1/ntpq.1.html">ntpq</a>(1) programs are checked against passwords entered by hand, so it is
       generally appropriate to specify these keys in ASCII format. Or you can cut-paste a hex string from your
       password manager.

</pre><h4><b>USAGE</b></h4><pre>
       In order to use symmetric keys, the client side configuration file needs:

             keys &lt;path-to-client-keys-file&gt;
             trustedkey &lt;keyno&gt;
             server ... key &lt;keyno&gt;

       The server side needs:

             keys &lt;path-to-server-keys-file&gt;
             trustedkey &lt;keyno&gt;

       Note that the client and server key files must both contain identical copies of the line specified by
       keyno.

</pre><h4><b>FILES</b></h4><pre>
       /etc/ntpsec/ntp.keys
           is a common location for the keys file

       Reminder: You have to keep it secret.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man5/ntp.conf.5.html">ntp.conf</a>(5), <a href="../man8/ntpd.8.html">ntpd</a>(8), <a href="../man1/ntpq.1.html">ntpq</a>(1), <a href="../man8/ntpkeygen.8.html">ntpkeygen</a>(8), <a href="../man1/ntpdig.1.html">ntpdig</a>(1).

NTPsec                                             2024-05-07                                        <u><a href="../man5/NTP.KEYS.5.html">NTP.KEYS</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>