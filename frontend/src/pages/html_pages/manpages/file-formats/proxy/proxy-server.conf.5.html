<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>proxy-server.conf - configuration file for the OpenStack Swift proxy server</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/swift-proxy">swift-proxy_2.35.0-0ubuntu1_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       <b>proxy-server.conf</b> - configuration file for the OpenStack Swift proxy server

</pre><h4><b>SYNOPSIS</b></h4><pre>
       <b>proxy-server.conf</b>

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This is the configuration file used by the proxy server and other proxy middlewares.

       The  configuration  file  follows the python-pastedeploy syntax. The file is divided into sections, which
       are enclosed by square brackets. Each section will contain a certain number of key/value parameters which
       are described later.

       Any line that begins with a '#' symbol is ignored.

       You    can    find    more    information    about    python-pastedeploy    configuration    format    at
       <u>https://docs.pylonsproject.org/projects/pastedeploy/en/latest/#config-format</u>

</pre><h4><b>GLOBAL</b> <b>SECTION</b></h4><pre>
       This  is  indicated  by section named [DEFAULT]. Below are the parameters that are acceptable within this
       section.

       <b>bind_ip</b>
              IP address the proxy server should bind to. The default is 0.0.0.0 which will make it bind to  all
              available addresses.

       <b>bind_port</b>
              TCP port the proxy server should bind to. The default is 80.

       <b>keep_idle</b>
              Value to set for socket TCP_KEEPIDLE. The default value is 600.

       <b>bind_timeout</b>
              Timeout to bind socket. The default is 30.

       <b>backlog</b>
              TCP backlog.  Maximum number of allowed pending connections. The default value is 4096.

       <b>admin_key</b>
              Key to use for admin calls that are HMAC signed.  Default is empty, which will disable admin calls
              to /info.

       <b>disallowed_sections</b>
              Allows  the  ability  to  withhold sections from showing up in the public calls to /info.  You can
              withhold subsections by separating the dict level with a  ".".   The  following  would  cause  the
              sections  'container_quotas'  and 'tempurl' to not be listed, and the key max_failed_deletes would
              be removed from  bulk_delete.   Default  value  is  'swift.valid_api_versions'  which  allows  all
              registered features to be listed via HTTP GET /info except swift.valid_api_versions information

       <b>workers</b>
              The number of pre-forked processes that will accept connections.  Zero means no fork.  The default
              is  auto  which  will  make  the  server  try to match the number of effective cpu cores if python
              multiprocessing is available (included with most python distributions &gt;= 2.6) or fallback to  one.
              It's  worth  noting that individual workers will use many eventlet co-routines to service multiple
              concurrent requests.

       <b>max_clients</b>
              Maximum number of clients one worker can process simultaneously (it will actually  <a href="../man2/accept.2.html">accept</a>(2)  N  +
              1).  Setting  this  to  one  (1) will only handle one request at a time, without accepting another
              request concurrently.  The default is 1024.

       <b>user</b>   The system user that the proxy server will run as. The default is swift.

       <b>expose_info</b>
              Enables exposing configuration settings via HTTP GET /info. The default is true.

       <b>swift_dir</b>
              Swift configuration directory. The default is /etc/swift.

       <b>cert_file</b>
              Location of the SSL certificate file. The default path is /etc/swift/proxy.crt. This  is  disabled
              by default.

       <b>key_file</b>
              Location  of  the  SSL  certificate  key  file.  The default path is /etc/swift/proxy.key. This is
              disabled by default.

       <b>log_name</b>
              Label used when logging. The default is swift.

       <b>log_facility</b>
              Syslog log facility. The default is LOG_LOCAL0.

       <b>log_level</b>
              Logging level. The default is INFO.

       <b>log_address</b>
              Logging address. The default is /dev/log.

       <b>log_max_line_length</b>
              To cap the length of log lines to the value given. No limit if set to 0, the default.

       <b>log_headers</b>
              The default is false.

       <b>log_custom_handlers</b>
              Comma separated list of functions to call to setup custom log  handlers.   functions  get  passed:
              conf, name, log_to_console, log_route, fmt, logger, adapted_logger. The default is empty.

       <b>log_udp_host</b>
              If set, log_udp_host will override log_address.

       <b>log_udp_port</b>
              UDP log port, the default is 514.

       <b>log_statsd_host</b>
              StatsD  server. IPv4/IPv6 addresses and hostnames are supported. If a hostname resolves to an IPv4
              and IPv6 address, the IPv4 address will be used.

       <b>log_statsd_port</b>
              The default is 8125.

       <b>log_statsd_default_sample_rate</b>
              The default is 1.

       <b>log_statsd_sample_rate_factor</b>
              The default is 1.

       <b>log_statsd_metric_prefix</b>
              The default is empty.

       <b>client_timeout</b>
              Time to wait while receiving each chunk of data from a client or another backend node. The default
              is 60.

       <b>eventlet_debug</b>
              Debug mode for eventlet library. The default is false.

       <b>trans_id_suffix</b>
              This optional suffix (default is empty) that would be appended to the swift transaction id  allows
              one  to easily figure out from which cluster that X-Trans-Id belongs to.  This is very useful when
              one is managing more than one swift cluster.

       <b>cors_allow_origin</b>
              List of origin hosts that are allowed for CORS requests in addition to what the container has set.
              Use a comma separated list of full URL (<a href="http://foo.bar">http://foo.bar</a>:1234,https://foo.bar)

       <b>strict_cors_mode</b>
              If True (default) then CORS requests are only allowed if their Origin header  matches  an  allowed
              origin. Otherwise, any Origin is allowed.

       <b>cors_expose_headers</b>
              Comma  separated  list  of headers to expose through Access-Control-Expose-Headers, in addition to
              the defaults and any headers set in container metadata.

       <b>nice_priority</b>
              Modify scheduling priority of server processes. Niceness values range from -20 (most favorable  to
              the process) to 19 (least favorable to the process).  The default does not modify priority.

       <b>ionice_class</b>
              Modify  I/O  scheduling  class  of server processes. I/O niceness class values are IOPRIO_CLASS_RT
              (realtime), IOPRIO_CLASS_BE (best-effort) and IOPRIO_CLASS_IDLE  (idle).   The  default  does  not
              modify class and priority.  Work only with ionice_priority.

       <b>ionice_priority</b>
              Modify  I/O  scheduling priority of server processes. I/O niceness priority is a number which goes
              from 0 to 7. The higher the value, the lower the I/O priority  of  the  process.  Work  only  with
              ionice_class.  Ignored if IOPRIO_CLASS_IDLE is set.

</pre><h4><b>PIPELINE</b> <b>SECTION</b></h4><pre>
       This  is  indicated  by section name [pipeline:main]. Below are the parameters that are acceptable within
       this section.

       <b>pipeline</b>
              It is used when you need apply a number  of  filters.  It  is  a  list  of  filters  ended  by  an
              application.  The  normal  pipeline  is  "catch_errors  gatekeeper healthcheck proxy-logging cache
              container_sync  bulk  tempurl  ratelimit  tempauth   container-quotas   account-quotas   slo   dlo
              versioned_writes proxy-logging proxy-server".

              Note:  The  double  proxy-logging in the pipeline is not a mistake. The left-most proxy-logging is
              there to log requests that were handled in middleware and never made it through to the  right-most
              middleware  (and proxy server). Double logging is prevented for normal requests. See proxy-logging
              docs.

</pre><h4><b>FILTER</b> <b>SECTION</b></h4><pre>
       Any section that has its name prefixed by "filter:" indicates a filter  section.   Filters  are  used  to
       specify  configuration  parameters  for  specific swift middlewares.  Below are the filters available and
       respective acceptable parameters.

       <b>[filter:healthcheck]</b>

          <b>use</b>    Entry point for paste.deploy for the healthcheck middleware.  This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#healthcheck</b>.

          <b>disable_path</b>
                 An  optional  filesystem  path which, if present, will cause the healthcheck URL to return "503
                 Service Unavailable" with a body of "DISABLED BY FILE".

       <b>[filter:tempauth]</b>

          <b>use</b>    Entry point for paste.deploy for  the  tempauth  middleware.  This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#tempauth</b>.

          <b>set</b> <b>log_name</b>
                 Label used when logging. The default is tempauth.

          <b>set</b> <b>log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>set</b> <b>log_level</b>
                 Logging level. The default is INFO.

          <b>set</b> <b>log_address</b>
                 Logging address. The default is /dev/log.

          <b>set</b> <b>log_headers</b>
                 Enables the ability to log request headers. The default is False.

          <b>reseller_prefix</b>
                 The  reseller  prefix  will  verify  a  token begins with this prefix before even attempting to
                 validate it. Also, with authorization, only Swift storage accounts with  this  prefix  will  be
                 authorized  by  this  middleware.  Useful  if  multiple  auth  systems are in use for one Swift
                 cluster. The default is AUTH.

          <b>auth_prefix</b>
                 The auth prefix will cause requests beginning with  this  prefix  to  be  routed  to  the  auth
                 subsystem, for granting tokens, etc. The default is /auth/.

          <b>require_group</b>
                 The  require_group  parameter names a group that must be presented by either X-Auth-Token or X-
                 Service-Token. Usually this parameter is used  only  with  multiple  reseller  prefixes  (e.g.,
                 SERVICE_require_group=blah).  By default, no group is needed. Do not use .admin.

          <b>token_life</b>
                 This is the time in seconds before the token expires. The default is 86400.

          <b>allow_overrides</b>
                 This  allows  middleware  higher  in  the WSGI pipeline to override auth processing, useful for
                 middleware such as tempurl and formpost. If you know you're not going to  use  such  middleware
                 and you want a bit of extra security, you can set this to false. The default is true.

          <b>storage_url_scheme</b>
                 This  specifies what scheme to return with storage urls: http, https, or default (chooses based
                 on what the server is running as) This can be useful with an SSL load balancer in  front  of  a
                 non-SSL server.

          <b>user_&lt;account&gt;_&lt;user&gt;</b>
                 Lastly,   you   need   to   list   all  the  accounts/users  you  want  here.  The  format  is:
                 user_&lt;account&gt;_&lt;user&gt; = &lt;key&gt; [group] [group] [...] [storage_url] or if you want underscores in
                 &lt;account&gt; or &lt;user&gt;, you can base64 encode them (with no equal  signs)  and  use  this  format:
                 user64_&lt;account_b64&gt;_&lt;user_b64&gt; = &lt;key&gt; [group] [group] [...] [storage_url]

                 There  are  special groups of: <u>.reseller_admin</u> who can do anything to any account for this auth
                 and also <u>.admin</u> who can do anything within the account.

                 If neither of these groups are specified, the user can only access containers  that  have  been
                 explicitly  allowed for them by a <u>.admin</u> or <u>.reseller_admin</u>.  The trailing optional storage_url
                 allows you to specify an alternate URL to hand back to the user  upon  authentication.  If  not
                 specified,  this defaults to <u>http[s]://&lt;ip&gt;:&lt;port&gt;/v1/&lt;reseller_prefix&gt;_&lt;account&gt;</u> where http or
                 https depends on whether cert_file is specified in the [DEFAULT] section, &lt;ip&gt; and  &lt;port&gt;  are
                 based  on  the  [DEFAULT] section's bind_ip and bind_port (falling back to 127.0.0.1 and 8080),
                 &lt;reseller_prefix&gt; is from this section, and &lt;account&gt; is from the user_&lt;account&gt;_&lt;user&gt; name.

                 Here are example entries, required for running the tests:

                 user_admin_admin = admin .admin .reseller_admin
                 user_test_tester = testing .admin
                 user_test2_tester2 = testing2 .admin
                 user_test_tester3 = testing3

       <b>[filter:authtoken]</b>

       To enable Keystone authentication you need to have the auth token middleware first to be configured. Here
       is an example below, please refer to  the  keystone's  documentation  for  details  about  the  different
       settings.

       You'll  need  to  have  as  well the keystoneauth middleware enabled and have it in your main pipeline so
       instead of having tempauth in there you can change it to: authtoken keystoneauth

       The auth credentials ("project_domain_name", "user_domain_name", "username", "project_name",  "password")
       must  match  the  Keystone credentials for the Swift service. The example values shown here assume a user
       named "swift" with admin role on a project named "service", both being in the  Keystone  domain  with  id
       "default".         Refer         to         the         KeystoneMiddleware        documentation        at
       <b>https://docs.openstack.org/keystonemiddleware/latest/middlewarearchitecture.html#configuration</b> for  other
       examples.

                 paste.filter_factory = keystonemiddleware.auth_token:filter_factory
                 www_authenticate_uri = <a href="http://keystonehost">http://keystonehost</a>:5000
                 auth_url = <a href="http://keystonehost">http://keystonehost</a>:5000
                 auth_plugin = password
                 project_domain_id = default
                 user_domain_id = default
                 project_name = service
                 username = swift
                 password = password

                 # delay_auth_decision defaults to False, but leaving it as false will
                 # prevent other auth systems, staticweb, tempurl, formpost, and ACLs from
                 # working. This value must be explicitly set to True.
                 delay_auth_decision = False
                 cache = swift.cache
                 include_service_catalog = False

       <b>[filter:keystoneauth]</b>

       Keystone authentication middleware.

          <b>use</b>    Entry  point  for  paste.deploy  for  the keystoneauth middleware. This is the reference to the
                 installed python egg.  This is normally <b>egg:swift#keystoneauth</b>.

          <b>reseller_prefix</b>
                 The reseller_prefix option lists account namespaces that this middleware  is  responsible  for.
                 The  prefix  is  placed before the Keystone project id.  For example, for project 12345678, and
                 prefix AUTH, the account is named AUTH_12345678 (i.e., path is /v1/AUTH_12345678/...).  Several
                 prefixes are allowed by specifying a comma-separated  list  as  in:  "reseller_prefix  =  AUTH,
                 SERVICE".  The  empty  string  indicates  a  single  blank/empty  prefix. If an empty prefix is
                 required in a list of prefixes, a value  of  ''  (two  single  quote  characters)  indicates  a
                 blank/empty  prefix.  Except  for  the  blank/empty  prefix,  an  underscore ('_') character is
                 appended to the value unless already present.

          <b>operator_roles</b>
                 The user must have at least one role named by operator_roles on a project in order  to  create,
                 delete  and  modify containers and objects and to set and read privileged headers such as ACLs.
                 If there are several reseller prefix items, you can prefix the parameter so it applies only  to
                 those   accounts   (for   example   the   parameter   SERVICE_operator_roles   applies  to  the
                 /v1/SERVICE_&lt;project&gt; path). If you omit the prefix, the option applies to all reseller  prefix
                 items.  For  the blank/empty prefix, prefix with '' (do not put underscore after the two single
                 quote characters).

          <b>reseller_admin_role</b>
                 The reseller admin role has the ability to create and delete accounts.

          <b>allow_overrides</b>
                 This allows middleware higher in the WSGI pipeline to  override  auth  processing,  useful  for
                 middleware  such  as  tempurl and formpost. If you know you're not going to use such middleware
                 and you want a bit of extra security, you can set this to false.

          <b>service_roles</b>
                 If the service_roles parameter is present, an X-Service-Token must be present  in  the  request
                 that  when validated, grants at least one role listed in the parameter. The X-Service-Token may
                 be scoped to any project.  If there are several reseller  prefix  items,  you  can  prefix  the
                 parameter so it applies only to those accounts (for example the parameter SERVICE_service_roles
                 applies  to  the /v1/SERVICE_&lt;project&gt; path). If you omit the prefix, the option applies to all
                 reseller prefix items. For the blank/empty prefix, prefix with '' (do not put underscore  after
                 the two single quote characters).  By default, no service_roles are required.

          <b>default_domain_id</b>
                 For backwards compatibility, keystoneauth will match names in cross-tenant access control lists
                 (ACLs) when both the requesting user and the tenant are in the default domain i.e the domain to
                 which  existing tenants are migrated. The default_domain_id value configured here should be the
                 same as the value used during migration of tenants to keystone domains.

          <b>allow_names_in_acls</b>
                 For a new installation, or an installation in which keystone projects may move between domains,
                 you should disable backwards compatible name matching in ACLs by setting allow_names_in_acls to
                 false:

       <b>[filter:cache]</b>

       Caching middleware that manages caching in swift.

          <b>use</b>    Entry point for paste.deploy for  the  memcache  middleware.  This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#memcache</b>.

          <b>set</b> <b>log_name</b>
                 Label used when logging. The default is memcache.

          <b>set</b> <b>log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>set</b> <b>log_level</b>
                 Logging level. The default is INFO.

          <b>set</b> <b>log_address</b>
                 Logging address. The default is /dev/log.

          <b>set</b> <b>log_headers</b>
                 Enables the ability to log request headers. The default is False.

          <b>memcache_max_connections</b>
                 Sets the maximum number of connections to each memcached server per worker.

          <b>memcache_servers</b>
                 If  not  set  in  the  configuration  file,  the  value  for memcache_servers will be read from
                 /etc/swift/memcache.conf (see memcache.conf-sample) or lacking that file, it  will  default  to
                 127.0.0.1:11211.   You   can   specify   multiple   servers   separated  with  commas,  as  in:
                 10.1.2.3:11211,10.1.2.4:11211.   (IPv6  addresses  must  follow  rfc3986  section-3.2.2,   i.e.
                 [::1]:11211)

       <b>[filter:ratelimit]</b>

       Rate limits requests on both an Account and Container level.  Limits are configurable.

          <b>use</b>    Entry  point  for  paste.deploy  for  the  ratelimit  middleware.  This is the reference to the
                 installed python egg.  This is normally <b>egg:swift#ratelimit</b>.

          <b>set</b> <b>log_name</b>
                 Label used when logging. The default is ratelimit.

          <b>set</b> <b>log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>set</b> <b>log_level</b>
                 Logging level. The default is INFO.

          <b>set</b> <b>log_address</b>
                 Logging address. The default is /dev/log.

          <b>set</b> <b>log_headers</b>
                 Enables the ability to log request headers. The default is False.

          <b>clock_accuracy</b>
                 This should represent how accurate the proxy servers' system clocks are with each other.   1000
                 means  that  all  the  proxies'  clock  are  accurate  to  each other within 1 millisecond.  No
                 ratelimit should be higher than the clock accuracy. The default is 1000.

          <b>max_sleep_time_seconds</b>
                 App will immediately return a 498 response if the necessary sleep time ever exceeds  the  given
                 max_sleep_time_seconds. The default is 60 seconds.

          <b>log_sleep_time_seconds</b>
                 To  allow  visibility  into  rate  limiting  set this value &gt; 0 and all sleeps greater than the
                 number will be logged. If set to 0 means disabled. The default is 0.

          <b>rate_buffer_seconds</b>
                 Number of seconds the rate counter can drop and be allowed to catch up (at a faster than listed
                 rate). A larger number will result in larger spikes in rate but better  average  accuracy.  The
                 default is 5.

          <b>account_ratelimit</b>
                 If  set,  will  limit  PUT  and  DELETE  requests to /account_name/container_name. Number is in
                 requests per second. If set to 0 means disabled. The default is 0.

          <b>container_ratelimit_size</b>
                 When set with container_limit_x = r: for containers of size x, limit requests per second to  r.
                 Will limit PUT, DELETE, and POST requests to /a/c/o. The default is ''.

          <b>container_listing_ratelimit_size</b>
                 Similarly  to  the  above  container-level write limits, the following will limit container GET
                 (listing) requests.

       <b>[filter:domain_remap]</b>

       Middleware that translates container and account parts of a domain to  path  parameters  that  the  proxy
       server      understands.       The     container.account.storageurl/object     gets     translated     to
       container.account.storageurl/path_root/account/container/object                                       and
       account.storageurl/path_root/container/object               gets               translated              to
       account.storageurl/path_root/account/container/object

          <b>use</b>    Entry point for paste.deploy for the domain_remap middleware. This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#domain_remap</b>.

          <b>set</b> <b>log_name</b>
                 Label used when logging. The default is domain_remap.

          <b>set</b> <b>log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>set</b> <b>log_level</b>
                 Logging level. The default is INFO.

          <b>set</b> <b>log_address</b>
                 Logging address. The default is /dev/log.

          <b>set</b> <b>log_headers</b>
                 Enables the ability to log request headers. The default is False.

          <b>storage_domain</b>
                 The  domain  to  be  used  by  the middleware. Multiple domains can be specified separated by a
                 comma.

          <b>path_root</b>
                 The path root value for the storage URL. The default is v1.

          <b>reseller_prefixes</b>
                 Browsers can convert a host header to lowercase, so check that reseller prefix on  the  account
                 is the correct case. This is done by comparing the items in the reseller_prefixes config option
                 to  the  found  prefix.  If they match except for case, the item from reseller_prefixes will be
                 used instead of the found reseller prefix. When none match,  the  default  reseller  prefix  is
                 used.  When no default reseller prefix is configured, any request with an account prefix not in
                 that list will be ignored by this middleware.  Defaults to 'AUTH'.

          <b>default_reseller_prefix</b>
                 The default reseller prefix. This is used when none of the configured reseller_prefixes  match.
                 When not set, no reseller prefix is added.

       <b>[filter:catch_errors]</b>

          <b>use</b>    Entry  point  for  paste.deploy  for  the catch_errors middleware. This is the reference to the
                 installed python egg.  This is normally <b>egg:swift#catch_errors</b>.

          <b>set</b> <b>log_name</b>
                 Label used when logging. The default is catch_errors.

          <b>set</b> <b>log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>set</b> <b>log_level</b>
                 Logging level. The default is INFO.

          <b>set</b> <b>log_address</b>
                 Logging address. The default is /dev/log.

          <b>set</b> <b>log_headers</b>
                 Enables the ability to log request headers. The default is False.

       <b>[filter:cname_lookup]</b>

       Note: this middleware requires python-dnspython

          <b>use</b>    Entry point for paste.deploy for the cname_lookup middleware. This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#cname_lookup</b>.

          <b>set</b> <b>log_name</b>
                 Label used when logging. The default is cname_lookup.

          <b>set</b> <b>log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>set</b> <b>log_level</b>
                 Logging level. The default is INFO.

          <b>set</b> <b>log_address</b>
                 Logging address. The default is /dev/log.

          <b>set</b> <b>log_headers</b>
                 Enables the ability to log request headers. The default is False.

          <b>storage_domain</b>
                 The domain to be used by the middleware.

          <b>lookup_depth</b>
                 How deep in the CNAME chain to look for something that matches the storage domain.  The default
                 is 1.

          <b>nameservers</b>
                 Specify  the  nameservers to use to do the CNAME resolution. If unset, the system configuration
                 is used. Multiple nameservers can be specified separated by a comma.  Default is unset.

       <b>[filter:staticweb]</b>

       Note: Put staticweb just after your auth filter(s) in the pipeline

          <b>use</b>    Entry point for paste.deploy for the  staticweb  middleware.  This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#staticweb</b>.

          <b>set</b> <b>log_name</b>
                 Label used when logging. The default is staticweb.

          <b>set</b> <b>log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>set</b> <b>log_level</b>
                 Logging level. The default is INFO.

          <b>set</b> <b>log_address</b>
                 Logging address. The default is /dev/log.

          <b>set</b> <b>log_headers</b>
                 Enables the ability to log request headers. The default is False.

       <b>[filter:tempurl]</b>

       Note: Put tempurl before slo, dlo, and your auth filter(s) in the pipeline

          <b>use</b>    Entry point for paste.deploy for the tempurl middleware. This is the reference to the installed
                 python egg.  This is normally <b>egg:swift#tempurl</b>.

          <b>methods</b>
                 The methods allowed with Temp URLs. The default is 'GET HEAD PUT POST DELETE'.

          <b>incoming_remove_headers</b>
                 The  headers  to  remove  from  incoming requests. Simply a whitespace delimited list of header
                 names and names can optionally end with '*' to indicate a prefix match.  incoming_allow_headers
                 is a list of exceptions to these removals.

          <b>incoming_allow_headers</b>
                 The  headers  allowed  as  exceptions to incoming_remove_headers. Simply a whitespace delimited
                 list of header names and names can optionally end with '*' to indicate a prefix match.

          <b>outgoing_remove_headers</b>
                 The headers to remove from outgoing responses. Simply a whitespace  delimited  list  of  header
                 names  and names can optionally end with '*' to indicate a prefix match. outgoing_allow_headers
                 is a list of exceptions to these removals.

          <b>outgoing_allow_headers</b>
                 The headers allowed as exceptions to outgoing_remove_headers.  Simply  a  whitespace  delimited
                 list of header names and names can optionally end with '*' to indicate a prefix match.

       <b>[filter:formpost]</b>

       Note: Put formpost just before your auth filter(s) in the pipeline

          <b>use</b>    Entry  point  for  paste.deploy  for  the  formpost  middleware.  This  is the reference to the
                 installed python egg.  This is normally <b>egg:swift#formpost</b>.

       <b>[filter:name_check]</b>

       Note: Just needs to be placed before the proxy-server in the pipeline.

          <b>use</b>    Entry point for paste.deploy for the name_check  middleware.  This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#name_check</b>.

          <b>forbidden_chars</b>
                 Characters that will not be allowed in a name. The default is '"`&lt;&gt;.

          <b>maximum_length</b>
                 Maximum number of characters that can be in the name. The default is 255.

          <b>forbidden_regexp</b>
                 Python  regular  expressions  of  substrings that will not be allowed in a name. The default is
                 <a href="file:/./">/./</a>|<a href="file:/../">/../</a>|<a href="file:/.">/.</a>$|<a href="file:/..">/..</a>$.

       <b>[filter:list-endpoints]</b>

          <b>use</b>    Entry point for paste.deploy for the list_endpoints middleware. This is the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#list_endpoints</b>.

          <b>list_endpoints_path</b>
                 The default is '/endpoints/'.

       <b>[filter:proxy-logging]</b>

       Logging  for  the  proxy  server  now  lives  in this middleware.  If the access_* variables are not set,
       logging directives from [DEFAULT] without "access_" will be used.

          <b>use</b>    Entry point for paste.deploy for the proxy_logging middleware. This is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#proxy_logging</b>.

          <b>access_log_name</b>
                 Label used when logging. The default is proxy-server.

          <b>access_log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>access_log_level</b>
                 Logging level. The default is INFO.

          <b>access_log_address</b>
                 Default is /dev/log.

          <b>access_log_udp_host</b>
                 If set, access_log_udp_host will override access_log_address.  Default is unset.

          <b>access_log_udp_port</b>
                 Default is 514.

          <b>access_log_statsd_host</b>
                 You  can  use  log_statsd_*  from  [DEFAULT],  or override them here.  StatsD server. IPv4/IPv6
                 addresses and hostnames are supported. If a hostname resolves to an IPv4 and IPv6 address,  the
                 IPv4 address will be used.

          <b>access_log_statsd_port</b>
                 Default is 8125.

          <b>access_log_statsd_default_sample_rate</b>
                 Default is 1.

          <b>access_log_statsd_sample_rate_factor</b>
                 The default is 1.

          <b>access_log_statsd_metric_prefix</b>
                 Default is "" (empty-string)

          <b>access_log_headers</b>
                 Default is False.

          <b>access_log_headers_only</b>
                 If access_log_headers is True and access_log_headers_only is set only these headers are logged.
                 Multiple  headers  can  be defined as comma separated list like this: access_log_headers_only =
                 Host, X-Object-Meta-Mtime

          <b>reveal_sensitive_prefix</b>
                 By default, the X-Auth-Token is logged. To obscure the value,  set  reveal_sensitive_prefix  to
                 the  number  of  characters to log.  For example, if set to 12, only the first 12 characters of
                 the token appear in the log. An unauthorized access of the log file  won't  allow  unauthorized
                 usage  of  the  token.  However,  the  first  12 or so characters is unique enough that you can
                 trace/debug token usage. Set to 0 to suppress the token completely (replaced by  '...'  in  the
                 log).  The default is 16 chars.  Note: reveal_sensitive_prefix will not affect the value logged
                 with access_log_headers=True.

          <b>log_statsd_valid_http_methods</b>
                 What HTTP methods are allowed for StatsD logging (comma-sep); request methods not in this  list
                 will    have   "BAD_METHOD"   for   the   &lt;verb&gt;   portion   of   the   metric.    Default   is
                 "GET,HEAD,POST,PUT,DELETE,COPY,OPTIONS".

          <b>log_anonymization_method</b>
                 Hashing algorithm for anonymization. Must be one of algorithms supported by  Python's  hashlib.
                 Default is MD5.

          <b>log_anonymization_salt</b>
                 Salt added as prefix before hashing the value to anonymize. Default is empty (no salt).

          <b>log_msg_template</b>
                 Template used to format access logs. All words surrounded by curly brackets will be substituted
                 with the appropriate values.

                 Some keywords map to timestamps and can be converted to standard dates formats using the
                 matching transformers: 'datetime', 'asctime' or 'iso8601'.
                 Other transformers for timestamps are 's', 'ms', 'us' and 'ns' for seconds, milliseconds,
                 microseconds and nanoseconds.
                 Python's strftime directives can also be used as tranformers (a, A, b, B, c, d, H, I, j, m, M,
                 p, S, U, w, W, x, X, y, Y, Z).
                 Some keywords map to user data that could be anonymized by using the transformer 'anonymized'.
                 Keywords availables are:
                        client_ip              (anonymizable)
                        remote_addr            (anonymizable)
                        method                 (request method)
                        path                   (anonymizable)
                        protocol
                        status_int
                        referer                (anonymizable)
                        user_agent             (anonymizable)
                        auth_token
                        bytes_recvd            (number of bytes received)
                        bytes_sent             (number of bytes sent)
                        client_etag            (anonymizable)
                        transaction_id
                        headers                (anonymizable)
                        request_time           (difference between start and end timestamps)
                        source
                        log_info
                        start_time             (timestamp at the receiving, timestamp)
                        end_time               (timestamp at the end of the treatment, timestamp)
                        ttfb                   (duration between request and first bytes is sent)
                        policy_index
                        account                (account name, anonymizable)
                        container              (container name, anonymizable)
                        object                 (object name, anonymizable)
                        pid                    (PID of the process emitting the log line)

                 Example: '{client_ip.anonymized} {remote_addr.anonymized} {start_time.iso8601}
                 {end_time.H}:{end_time.M} {method} acc:{account} cnt:{container} obj:{object.anonymized}'

                 Default: '{client_ip} {remote_addr} {end_time.datetime} {method} {path} {protocol} {status_int}
                 {referer} {user_agent} {auth_token} {bytes_recvd} {bytes_sent} {client_etag} {transaction_id}
                 {headers} {request_time} {source} {log_info} {start_time} {end_time} {policy_index}'

                 Warning: A bad log message template will raise an error in initialization.

       <b>[filter:bulk]</b>

       Note: Put before both ratelimit and auth in the pipeline.

          <b>use</b>    Entry  point  for  paste.deploy for the bulk middleware. This is the reference to the installed
                 python egg.  This is normally <b>egg:swift#bulk</b>.

          <b>max_containers_per_extraction</b>
                 The default is 10000.

          <b>max_failed_extractions</b>
                 The default is 1000.

          <b>max_deletes_per_request</b>
                 The default is 10000.

          <b>max_failed_deletes</b>
                 The default is 1000.

                 In order to keep a connection active during a potentially long bulk request, Swift  may  return
                 whitespace  prepended to the actual response body. This whitespace will be yielded no more than
                 every yield_frequency seconds.  The default is 10.

          <b>yield_frequency</b>

          <b>delete_container_retry_count</b>
                 Note: This parameter is used during a bulk delete of objects and their  container.  This  would
                 frequently  fail because it is very likely that all replicated objects have not been deleted by
                 the time the middleware got a successful response. It can be configured the number of  retries.
                 And the number of seconds to wait between each retry will be 1.5**retry The default is 0.

       <b>[filter:slo]</b>

       Note: Put after auth and staticweb in the pipeline.

          <b>use</b>    Entry  point  for  paste.deploy  for the slo middleware. This is the reference to the installed
                 python egg.  This is normally <b>egg:swift#slo</b>.

          <b>max_manifest_segments</b>
                 The default is 1000.

          <b>max_manifest_size</b>
                 The default is 2097152.

          <b>min_segment_size</b>
                 The default is 1048576

          <b>rate_limit_after_segment</b>
                 Start rate-limiting object segments after the Nth segment of a segmented object. The default is
                 10 segments.

          <b>rate_limit_segments_per_sec</b>
                 Once segment rate-limiting kicks in for an object, limit segments served to N per  second.  The
                 default is 1.

          <b>max_get_time</b>
                 Time limit on GET requests (seconds). The default is 86400.

       <b>[filter:dlo]</b>

       Note:  Put  after  auth  and  staticweb in the pipeline.  If you don't put it in the pipeline, it will be
       inserted for you.

          <b>use</b>    Entry point for paste.deploy for the dlo middleware. This is the  reference  to  the  installed
                 python egg.  This is normally <b>egg:swift#dlo</b>.

          <b>rate_limit_after_segment</b>
                 Start rate-limiting object segments after the Nth segment of a segmented object. The default is
                 10 segments.

          <b>rate_limit_segments_per_sec</b>
                 Once  segment  rate-limiting kicks in for an object, limit segments served to N per second. The
                 default is 1.

          <b>max_get_time</b>
                 Time limit on GET requests (seconds). The default is 86400.

       <b>[filter:container-quotas]</b>

       Note: Put after auth in the pipeline.

          <b>use</b>    Entry point for paste.deploy for the container_quotas middleware. This is the reference to  the
                 installed python egg.  This is normally <b>egg:swift#container_quotas</b>.

       <b>[filter:account-quotas]</b>

       Note: Put after auth in the pipeline.

          <b>use</b>    Entry  point  for  paste.deploy for the account_quotas middleware. This is the reference to the
                 installed python egg.  This is normally <b>egg:swift#account_quotas</b>.

       <b>[filter:gatekeeper]</b>

       Note: this middleware requires python-dnspython

          <b>use</b>    Entry point for paste.deploy for the gatekeeper  middleware.  This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#gatekeeper</b>.

          <b>set</b> <b>log_name</b>
                 Label used when logging. The default is gatekeeper.

          <b>set</b> <b>log_facility</b>
                 Syslog log facility. The default is LOG_LOCAL0.

          <b>set</b> <b>log_level</b>
                 Logging level. The default is INFO.

          <b>set</b> <b>log_address</b>
                 Logging address. The default is /dev/log.

          <b>set</b> <b>log_headers</b>
                 Enables the ability to log request headers. The default is False.

       <b>[filter:container_sync]</b>

       Note: this middleware requires python-dnspython

          <b>use</b>    Entry  point  for  paste.deploy for the container_sync middleware. This is the reference to the
                 installed python egg.  This is normally <b>egg:swift#container_sync</b>.

          <b>allow_full_urls</b>
                 Set this to false if you want to disallow any full  URL  values  to  be  set  for  any  new  X-
                 Container-Sync-To  headers.  This  will keep any new full urls from coming in, but won't change
                 any existing values already in the cluster.  Updating those will have to be done  manually,  as
                 knowing what the true realm endpoint should be cannot always be guessed. The default is true.

          <b>current</b>
                 Set this to specify this clusters //realm/cluster as "current" in /info

       <b>[filter:xprofile]</b>

       Note:  Put  it  at  the  beginning of the pipeline to profile all middleware. But it is safer to put this
       after healthcheck.

          <b>use</b>    Entry point for paste.deploy for  the  xprofile  middleware.  This  is  the  reference  to  the
                 installed python egg.  This is normally <b>egg:swift#xprofile</b>.

          <b>profile_module</b>
                 This  option enable you to switch profilers which should inherit from python standard profiler.
                 Currently the supported value can be 'cProfile', 'eventlet.green.profile' etc.

          <b>log_filename_prefix</b>
                 This prefix will be used to combine process ID and timestamp to name  the  profile  data  file.
                 Make sure the executing user has permission to write into this path (missing path segments will
                 be  created,  if necessary).  If you enable profiling in more than one type of daemon, you must
                 override it with an unique value like, the default is /var/log/swift/profile/account.profile.

          <b>dump_interval</b>
                 The profile data will be dumped to local disk based on above naming rule in this interval.  The
                 default is 5.0.

          <b>dump_timestamp</b>
                 Be  careful,  this option will enable profiler to dump data into the file with time stamp which
                 means there will be lots of files piled up in the directory.  The default is false

          <b>path</b>   This is the path of the URL to access the mini web UI. The default is __profile__.

          <b>flush_at_shutdown</b>
                 Clear the data when the wsgi server shutdown. The default is false.

          <b>unwind</b> Unwind the iterator of applications. Default is false.

       <b>[filter:versioned_writes]</b>

       Note: Put after slo, dlo in the pipeline.  If you don't put it in  the  pipeline,  it  will  be  inserted
       automatically.

          <b>use</b>    Entry  point for paste.deploy for the versioned_writes middleware. This is the reference to the
                 installed python egg.  This is normally <b>egg:swift#versioned_writes</b>.

          <b>allow_versioned_writes</b>
                 Enables using versioned writes middleware and exposing  configuration  settings  via  HTTP  GET
                 /info.   WARNING:  Setting  this  option  bypasses the "allow_versions" option in the container
                 configuration file, which will be eventually deprecated. See documentation for more details.

</pre><h4><b>APP</b> <b>SECTION</b></h4><pre>
       This is indicated by section name [app:proxy-server]. Below are the parameters that are acceptable within
       this section.

       <b>use</b>    Entry point for paste.deploy for the proxy server. This is the reference to the  installed  python
              egg.  This is normally <b>egg:swift#proxy</b>.

       <b>set</b> <b>log_name</b>
              Label used when logging. The default is proxy-server.

       <b>set</b> <b>log_facility</b>
              Syslog log facility. The default is LOG_LOCAL0.

       <b>set</b> <b>log_level</b>
              Logging level. The default is INFO.

       <b>set</b> <b>log_address</b>
              Logging address. The default is /dev/log.

       <b>log_handoffs</b>
              Log when handoff locations are used.  Default is True.

       <b>recheck_account_existence</b>
              Cache timeout in seconds to send memcached for account existence. The default is 60 seconds.

       <b>recheck_container_existence</b>
              Cache timeout in seconds to send memcached for container existence. The default is 60 seconds.

       <b>object_chunk_size</b>
              Chunk size to read from object servers. The default is 65536.

       <b>client_chunk_size</b>
              Chunk size to read from clients. The default is 65536.

       <b>node_timeout</b>
              Request timeout to external services. The default is 10 seconds.

       <b>recoverable_node_timeout</b>
              How  long  the proxy server will wait for an initial response and to read a chunk of data from the
              object servers while serving GET / HEAD requests.  Timeouts from these requests can  be  recovered
              from  so  setting  this  to something lower than node_timeout would provide quicker error recovery
              while  allowing  for  a  longer  timeout  for  non-recoverable  requests  (PUTs).    Defaults   to
              node_timeout,  should  be  overridden  if  node_timeout  is set to a high number to prevent client
              timeouts from firing before the proxy server has a chance to retry.

       <b>conn_timeout</b>
              Connection timeout to external services. The default is 0.5 seconds.

       <b>post_quorum_timeout</b>
              How long to wait for requests to finish after a quorum has been established. The  default  is  0.5
              seconds.

       <b>error_suppression_interval</b>
              Time  in seconds that must elapse since the last error for a node to be considered no longer error
              limited. The default is 60 seconds.

       <b>error_suppression_limit</b>
              Error count to consider a node error limited. The default is 10.

       <b>allow_account_management</b>
              Whether account PUTs and DELETEs are even callable. If set  to  'true'  any  authorized  user  may
              create and delete accounts; if 'false' no one, even authorized, can. The default is false.

       <b>account_autocreate</b>
              If  set  to  'true'  authorized  accounts  that  do not yet exist within the Swift cluster will be
              automatically created. The default is set to false.

       <b>max_containers_per_account</b>
              If set to a positive value, trying to create a container when the account  already  has  at  least
              this  maximum  containers  will  result in a 403 Forbidden.  Note: This is a soft limit, meaning a
              user might exceed the cap for recheck_account_existence before the 403s kick in.

       <b>max_containers_whitelist</b>
              This is a comma separated list of account hashes that ignore the max_containers_per_account cap.

       <b>deny_host_headers</b>
              Comma separated list of Host headers to which the proxy will deny requests. The default is empty.

       <b>sorting_method</b>
              Storage nodes can be chosen at random (shuffle - default), by using timing measurements  (timing),
              or  by  using an explicit match (affinity).  Using timing measurements may allow for lower overall
              latency, while using affinity allows for finer control. In both the  timing  and  affinity  cases,
              equally-sorting   nodes  are  still  randomly  chosen  to  spread  load.   The  valid  values  for
              sorting_method are "affinity", "shuffle", and "timing".

       <b>timing_expiry</b>
              If the "timing" sorting_method is used, the timings will only be valid for the number  of  seconds
              configured by timing_expiry. The default is 300.

       <b>concurrent_gets</b>
              If  "on"  then  use replica count number of threads concurrently during a GET/HEAD and return with
              the first successful response. In the EC case, this parameter only affects an EC HEAD as an EC GET
              behaves differently. Default is "off".

       <b>concurrency_timeout</b>
              This parameter controls how long to wait before firing off the next concurrent_get thread. A value
              of 0 would we fully concurrent, any other number will stagger the  firing  of  the  threads.  This
              number should be between 0 and node_timeout. The default is the value of conn_timeout (0.5).

       <b>request_node_count</b>
              Set to the number of nodes to contact for a normal request. You can use '* replicas' at the end to
              have it use the number given times the number of replicas for the ring being used for the request.
              The default is '2 * replicas'.

       <b>read_affinity</b>
              Specifies  which  backend servers to prefer on reads. Format is a comma separated list of affinity
              descriptors of the form &lt;selection&gt;=&lt;priority&gt;.  The &lt;selection&gt; may be r&lt;N&gt; for  selecting  nodes
              in  region N or r&lt;N&gt;z&lt;M&gt; for selecting nodes in region N, zone M. The &lt;priority&gt; value should be a
              whole number that represents the priority to be given to the selection; lower numbers  are  higher
              priority. Default is empty, meaning no preference.

              Example:  first  read  from region 1 zone 1, then region 1 zone 2, then anything in region 2, then
              everything else:

                 read_affinity = r1z1=100, r1z2=200, r2=300

       <b>write_affinity</b>
              Specifies which backend servers to prefer on writes. Format is a comma separated list of  affinity
              descriptors  of  the form r&lt;N&gt; for region N or r&lt;N&gt;z&lt;M&gt; for region N, zone M. If this is set, then
              when handling an object PUT request, some number (see setting write_affinity_node_count) of  local
              backend servers will be tried before any nonlocal ones. Default is empty, meaning no preference.

              Example: try to write to regions 1 and 2 before writing to any other nodes:

                 write_affinity = r1, r2

       <b>write_affinity_node_count</b>
              The  number of local (as governed by the write_affinity setting) nodes to attempt to contact first
              on writes, before any non-local ones. The value should be an integer number, or use  '*  replicas'
              at  the  end  to have it use the number given times the number of replicas for the ring being used
              for the request. The default is '2 * replicas'.

       <b>swift_owner_headers</b>
              These are the headers whose values will only be shown to swift_owners. The exact definition  of  a
              swift_owner   is   up   to   the   auth  system  in  use,  but  usually  indicates  administrative
              responsibilities.  The default is 'x-container-read, x-container-write,  x-container-sync-key,  x-
              container-sync-to,  x-account-meta-temp-url-key,  x-account-meta-temp-url-key-2, x-container-meta-
              temp-url-key, x-container-meta-temp-url-key-2, x-account-access-control'.

       <b>rate_limit_after_segment</b>
              Start rate-limiting object segments after the Nth segment of a segmented object.  The  default  is
              10 segments.

       <b>rate_limit_segments_per_sec</b>
              Once  segment  rate-limiting  kicks  in for an object, limit segments served to N per second.  The
              default is 1.

       <b>nice_priority</b>
              Modify scheduling priority of server processes. Niceness values range from -20 (most favorable  to
              the process) to 19 (least favorable to the process).  The default does not modify priority.

       <b>ionice_class</b>
              Modify  I/O  scheduling  class  of server processes. I/O niceness class values are IOPRIO_CLASS_RT
              (realtime), IOPRIO_CLASS_BE (best-effort) and IOPRIO_CLASS_IDLE  (idle).   The  default  does  not
              modify class and priority.  Work only with ionice_priority.

       <b>ionice_priority</b>
              Modify  I/O  scheduling priority of server processes. I/O niceness priority is a number which goes
              from 0 to 7. The higher the value, the lower the I/O priority  of  the  process.  Work  only  with
              ionice_class.  Ignored if IOPRIO_CLASS_IDLE is set.

</pre><h4><b>DOCUMENTATION</b></h4><pre>
       More in depth documentation about the swift-proxy-server and also OpenStack Swift as a whole can be found
       at <b>https://docs.openstack.org/swift/latest/admin_guide.html</b> and <b>https://docs.openstack.org/swift/latest/</b>

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <b><a href="../man1/swift-proxy-server.1.html">swift-proxy-server</a>(1)</b>

Linux                                               8/26/2011                               <u><a href="../man5/proxy-server.conf.5.html">proxy-server.conf</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>