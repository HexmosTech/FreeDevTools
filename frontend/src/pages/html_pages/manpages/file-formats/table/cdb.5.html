<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>cdb - Constant DataBase file format</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/libcdb1">libcdb1_0.81-2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       cdb - Constant DataBase file format

</pre><h4><b>DESCRIPTION</b></h4><pre>
       A  <b>cdb</b>  database  is  a  single file used to map `keys' to `values', having records of (key,value) pairs.
       File consists of 3 parts: toc (table of contents), data and index (hash tables).

       Toc has fixed length of 2048 bytes, containing 256 pointers to hash tables inside index sections.   Every
       pointer  consists of position of a hash table in bytes from the beginning of a file, and a size of a hash
       table in entries, both are 4-bytes (32 bits) unsigned integers in little-endian form.  Hash table  length
       may have zero length, meaning that corresponding hash table is empty.

       Right  after  toc section, data section follows without any alingment.  It consists of series of records,
       each is a key length, value (data) length, key and  value.   Again,  key  and  value  length  are  4-byte
       unsigned integers.  Each next record follows previous without any special alignment.

       After  data section, index (hash tables) section follows.  It should be looked to in conjunction with toc
       section, where each of max 256 hash tables are defined.  Index section consists of series of hash tables,
       with starting position and length defined in toc section.  Every hash table is a sequence of records each
       holds two numbers: key's hash value and record position inside data section (bytes from the beginning  of
       a  file  to  first byte of key length starting data record).  If record position is zero, then this is an
       empty hash table slot, pointed to nowhere.

       CDB hash function is
         hv = ((hv &lt;&lt; 5) + hv) ^ <u>c</u>
       for every single <u>c</u> byte of a key, starting with hv = <u>5381</u>.

       Toc section indexed by (hv % 256), i.e. hash value modulo 256 (number of entries in toc section).

       In order to find a record, one should: first, compute the hash value (hv) of a key.  Second, look to hash
       table number hv modulo 256.  If it is empty, then there is no such key exists.  If it is not empty,  then
       third,  loop  by  slots  inside  that hash table, starting from slot with number hv divided by 256 modulo
       length of that table, or ((hv / 256) % htlen), searching for this hv in hash table.  Stop search on empty
       slot (if record position is zero) or when all slots was probed (note cyclic search, jumping from  end  to
       beginning  of a table).  When hash value in question is found in hash table, look to key of corresponding
       record, comparing it with key in question.  If them of the same length and equals  to  each  other,  then
       record is found, overwise, repeat with next hash table slot.  Note that there may be several records with
       the same key.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <a href="../man1/cdb.1.html">cdb</a>(1), <a href="../man3/cdb.3.html">cdb</a>(3).

</pre><h4><b>AUTHOR</b></h4><pre>
       The <b>tinycdb</b> package written by Michael Tokarev &lt;mjt+<a href="mailto:cdb@corpit.ru">cdb@corpit.ru</a>&gt;, based on ideas and shares file format
       with original cdb library by Dan Bernstein.

</pre><h4><b>LICENSE</b></h4><pre>
       Tinycdb is licensed under MIT license.

                                                    Apr, 2005                                             <u><a href="../man5/cdb.5.html">cdb</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>