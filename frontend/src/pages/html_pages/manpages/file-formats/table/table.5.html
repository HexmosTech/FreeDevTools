<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>table — format description for smtpd tables</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/opensmtpd">opensmtpd_7.7.0p0-1_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       table — format description for smtpd tables

</pre><h4><b>DESCRIPTION</b></h4><pre>
       This manual page documents the file format for the various tables used in the <u><a href="../man8/smtpd.8.html">smtpd</a></u>(8) mail daemon.

       The format described here applies to tables as defined in <u><a href="../man5/smtpd.conf.5.html">smtpd.conf</a></u>(5).

</pre><h4><b>TABLE</b> <b>TYPES</b></h4><pre>
       There  are  two  types  of  tables:  lists  and mappings.  A list consists of a series of values, while a
       mapping consists of a series of keys and their associated  values.   The  following  illustrates  how  to
       declare them as static tables:

             table mylist { value1, value2, value3 }
             table mymapping { key1 = value1, key2 = value2, key3 = value3 }

       When using a ‘file’ table, a list will be written with each value on a line by itself.

             value1
             value2
             value3

       A  mapping will be written with each key and value on a line, whitespace and an optional colon separating
       both columns:

             key1:   value1
             key2    value2
             key3    value3

       Blank lines, leading and trailing spaces and tabs are ignored.  Lines whose first non-space character  is
       a  hash  mark  (‘#’) are comments and are ignored.  To force the parsing of a file table as a list rather
       than a mapping, use this special comment:

             <b>#</b> <b>@list</b>

       A file table can be converted to a Berkeley database using the <u><a href="../man8/makemap.8.html">makemap</a></u>(8) utility with no syntax change.

       Tables using a ‘file’ or Berkeley DB backend will be referenced as follows:

             <b>table</b> <u>name</u> <b>file</b>:<u>/path/to/file</u>
             <b>table</b> <u>name</u> <b>db</b>:<u>/path/to/file.db</u>

   <b>Aliasing</b> <b>tables</b>
       Aliasing tables are mappings that associate a recipient to one or many destinations.  They can be used in
       two contexts: primary domain aliases and virtual domain mapping.

             <b>action</b> <u>name</u> <u>method</u> <b>alias</b> &lt;table&gt;
             <b>action</b> <u>name</u> <u>method</u> <b>virtual</b> &lt;table&gt;

       In a primary domain context, the key is the user part of the recipient address, whilst the value  is  one
       or many recipients as described in <u><a href="../man5/aliases.5.html">aliases</a></u>(5):

             user1   otheruser
             user2   otheruser1,otheruser2
             user3   <a href="mailto:otheruser@example.com">otheruser@example.com</a>

       In  a  virtual  domain  context,  the  key  is  either  a user part, a full email address or a catch-all,
       following selection rules described in <u><a href="../man5/smtpd.conf.5.html">smtpd.conf</a></u>(5),  and  the  value  is  one  or  many  recipients  as
       described in <u><a href="../man5/aliases.5.html">aliases</a></u>(5):

             user1                   otheruser
             <a href="mailto:user2@example.org">user2@example.org</a>       otheruser1,otheruser2
             @example.org            <a href="mailto:otheruser@example.com">otheruser@example.com</a>
             @                       <a href="mailto:catchall@example.com">catchall@example.com</a>

       The  following  directive  shares the same table format, but with a different meaning.  Here, the user is
       allowed to send mail from the listed addresses:

             <b>listen</b> <b>on</b> <u>interface</u> <b>auth</b> [<u>...</u>] <b>senders</b> &lt;<u>table</u>&gt;

   <b>Domain</b> <b>tables</b>
       Domain tables are simple lists of domains or hosts.

             <b>match</b> <b>for</b> <b>domain</b> &lt;table&gt; <b>action</b> <u>name</u>
             <b>match</b> <b>helo</b> &lt;table&gt; [<u>...</u>] <b>action</b> <u>name</u>

       In that context, the list of domains will be matched against the recipient domain  or  against  the  HELO
       name  advertised  by  the  sending  host,  respectively.   For ‘static’, ‘file’ and <u><a href="../man3/dbopen.3.html">dbopen</a></u>(3) backends, a
       wildcard may be used so the domain table may contain:

             example.org
             *.example.org

   <b>Credentials</b> <b>tables</b>
       Credentials tables are mappings of credentials.  They can be used in two contexts:

             <b>listen</b> <b>on</b> <u>interface</u> <b>tls</b> [<u>...</u>] <b>auth</b> &lt;<u>table</u>&gt;
             <b>action</b> <u>name</u> <b>relay</b> <b>host</b> <u>relay-url</u> <b>auth</b> &lt;<u>table</u>&gt;

       In a listener context, the credentials are a mapping of username and encrypted passwords:

             user1   $2b$10$hIJ4QfMcp.90nJwKqGbKM.MybArjHOTpEtoTV.DgLYAiThuoYmTSe
             user2   $2b$10$bwSmUOBGcZGamIfRuXGTvuTo3VLbPG9k5yeKNMBtULBhksV5KdGsK

       The passwords are to be encrypted using the <u><a href="../man8/smtpctl.8.html">smtpctl</a></u>(8) encrypt subcommand.

       In a relay context, the credentials are a mapping of labels and username:password pairs:

             label1  user:password

       The label must be unique and is used as a selector for the proper credentials when  multiple  credentials
       are  valid  for a single destination.  The password is not encrypted as it must be provided to the remote
       host.

   <b>Netaddr</b> <b>tables</b>
       Netaddr tables are lists of IPv4 and IPv6 network addresses.  They can only  be  used  in  the  following
       context:

             <b>match</b> <b>from</b> <b>src</b> &lt;<u>table</u>&gt; <b>action</b> <u>name</u>

       When  used  as a "from source", the address of a client is compared to the list of addresses in the table
       until a match is found.

       A netaddr table can contain exact addresses or netmasks, and looks as follow:

             192.168.1.1
             [::1]
             192.168.1.0/24

       IPv6 addresses must be enclosed in square brackets.

   <b>Userinfo</b> <b>tables</b>
       Userinfo tables are used in rule context to specify an alternate userbase, mapping virtual users to local
       system users by UID, GID and home directory.

             <b>action</b> <u>name</u> <u>method</u> <b>userbase</b> &lt;<u>table</u>&gt;

       A userinfo table looks as follows:

             joe     1000:100:/home/virtual/joe
             jack    1000:100:/home/virtual/jack

       In this example, both joe and jack are virtual users mapped to the local system user with  UID  1000  and
       GID  100,  but different home directories.  These directories may contain a <u><a href="../man5/forward.5.html">forward</a></u>(5) file.  This can be
       used in conjunction with an alias table that maps an email address or the  domain  part  to  the  desired
       virtual username.  For example:

             <a href="mailto:joe@example.org">joe@example.org</a>     joe
             <a href="mailto:jack@example.com">jack@example.com</a>    jack

   <b>Source</b> <b>tables</b>
       Source tables are lists of IPv4 and IPv6 addresses.  They can only be used in the following context:

             <b>action</b> <u>name</u> <b>relay</b> <b>src</b> &lt;<u>table</u>&gt;

       Successive queries to the source table will return the elements one by one.

       A source table looks as follow:

             192.168.1.2
             192.168.1.3
             [::1]
             [::2]

       IPv6 address must be enclosed in square brackets.

   <b>Mailaddr</b> <b>tables</b>
       Mailaddr tables are lists of email addresses.  They can be used in the following contexts:

             <b>match</b> <b>mail-from</b> &lt;<u>table</u>&gt; <b>action</b> <u>name</u>
             <b>match</b> <b>rcpt-to</b> &lt;<u>table</u>&gt; <b>action</b> <u>name</u>

       A  mailaddr entry is used to match an email address against a username, a domain or a full email address.
       A "*" wildcard may be used in part of the domain name.

       A mailaddr table looks as follow:

             user
             @domain
             user@domain
             user@*.domain

   <b>Addrname</b> <b>tables</b>
       Addrname tables are used to map IP addresses to hostnames.  They can be used in both listen  context  and
       relay context:

             <b>listen</b> <b>on</b> <u>interface</u> <b>hostnames</b> &lt;<u>table</u>&gt;
             <b>action</b> <u>name</u> <b>relay</b> <b>helo-src</b> &lt;<u>table</u>&gt;

       In  listen  context,  the  table  is  used to look up the server name to advertise depending on the local
       address of the socket on which a connection is  accepted.   In  relay  context,  the  table  is  used  to
       determine  the  hostname  for the HELO sequence of the SMTP protocol, depending on the local address used
       for the outgoing connection.

       The format is a mapping from inet4 or inet6 addresses to hostnames:

             [::1]           localhost
             127.0.0.1       localhost
             88.190.23.165   www.opensmtpd.org

       IPv6 addresses must be enclosed in square brackets.

</pre><h4><b>SEE</b> <b>ALSO</b></h4><pre>
       <u><a href="../man5/smtpd.conf.5.html">smtpd.conf</a></u>(5), <u><a href="../man8/makemap.8.html">makemap</a></u>(8), <u><a href="../man8/smtpd.8.html">smtpd</a></u>(8)

Debian                                             May 2, 2024                                          <u><a href="../man5/TABLE.5.html">TABLE</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>