<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>z.mk — library for writing featureful Makefiles</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/zmk-doc">zmk-doc_0.5.1-2_all</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       z.mk — library for writing featureful Makefiles

</pre><h4><b>SYNOPSIS</b></h4><pre>
       # Define name and version of the project.
       Project.Name=foo
       Project.Version=1.2

       # Include the configuration file generated by the configure script, if one
       # exists. This enables a multitude of configuration options to be used.
       -include config.foo.mk

       # Assume the source code is in the current directory. This variable is always
       # defined by the generated configuration file, enabling support for out-of-tree
       # builds.
       ZMK.SrcDir ?= .

       # Include z.mk by searching include directories. If zmk is not globally
       # installed then ZMK.Version expands to nothing. As a last resort, assume that
       # zmk was bundled into the release archive.
       include z.mk
       ifeq ($(value ZMK.Version),)
       include $(ZMK.SrcDir)/z.mk
       endif

       # ZMK is now ready. Import additional modules or expand templates as necessary.

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>z.mk,</b>  also  known  as <b>ZMK</b>, is a library of GNU-make compatible makefiles providing an opinionated module
       and template system. The library comes with a collection of modules for common C/C++  software  projects:
       compiling  programs,  creating  libraries,  installing  development headers, data files, testing, etc. In
       addition the library offers  specialized  modules  for  constructing  new  modules  that  reuse  specific
       behavior, such as participating in targets such as <b>all</b>, <b>clean</b>, <b>install</b> or <b>uninstall</b>.

   <b>Naming</b> <b>Convention</b>
       ZMK  comes  with  a convention for development of Make libraries. This is an informal convention aimed at
       reducing friction in a untyped language devoid of any encapsulation system, such as that of Make itself.

       Almost all variables and functions use a naming convention prefixing all  names  with  the  name  of  the
       module  followed  by  a  dot.  In  addition,  each  name is either public, meant to be used by others and
       offering some API stability guarantees, or private, being a  part  of  the  implementation  and  not  the
       interface  one  should  rely  on,  even  though  nothing  in  make itself prevents this. Public names are
       capitalized, private names start with a lower case character.

       For example <b>ZMK.Version</b> is a public symbol containing the version of the ZMK library while <b>ZMK.z.mk</b> is  a
       private symbol containing, at the time of this writing, the full path of the loaded z.mk library.

   <b>Modules</b>
       ZMK comes with a module system, which builds on the make include system. A module is a makefile installed
       to  a  zmk-specific  directory.  Typically  each  module  defines  some  variables, one of which can be a
       template. A module which defines a template is simply called a template and is discussed below. To import
       a module use the following expression:

       $(eval $(call ZMK.Import,ModuleName))
       Modules encapsulate a piece of functionality or knowledge. For example, there is a module  which  handles
       well-known  UNIX  directories.  Importing  that  module  defines  variables  expanding  to  each  of such
       directories. In addition, that module depends on a template handling creation of a  directory,  expanding
       that template many times, ensuring that make knows about all the directories, contains no duplicate rules
       and that conventions such as the DESTDIR variable are respected.

       Not  all modules contain literal make rules. As another example, the <b>Toolchain</b> module knows how to detect
       and interrogate the compiler toolchain, offering information useful for other modules. For a full listing
       of modules built into zmk see MODULES below.

</pre><h4><b>MODULES</b></h4><pre>
       ZMK provides the following importable modules.

   <b>AllClean</b>
       This template interacts with the common targets <b>all</b> and <b>clean.</b>

   <b>Configure</b>
       This module provides a configuration facility and access to interactive <u>configure</u> script.

   <b>Coverity</b>
       This unstable module provides support for the Coverity static analyzer.

   <b>Directories</b>
       This module provides rules for configurable directories such as <b>$(libdir)</b> or <b>$(bindir)</b>.

   <b>Directory</b>
       This template provides rules for creating a single directory. It's more involved than it seems.

   <b>GitVersion</b>
       This module allows augmenting project version with information from the Git version control system.

   <b>Header</b>
       This template provides targets for installation of public development headers.

   <b>InstallUninstall</b>
       This template provides rules for installing and uninstalling files.

   <b>Library.A</b>
       This template provides rules for preparing static libraries.

   <b>Library.DyLib</b>
       This template provides rules for preparing Mach-O dynamic libraries.

   <b>Library.So</b>
       This template provides rules for preparing ELF dynamic libraries.

   <b>ManPage</b>
       This template provides rules for checking and installing manual pages.

   <b>OS</b>
       This module provides information about the operating system.

   <b>ObjectGroup</b>
       This template provides rules for compiling a group of object files.

   <b>PVS</b>
       This module provides rules for working with the PVS static analyzer.

   <b>Program.Test</b>
       This template provides rules for compiling and executing test programs as  well  as  for  computing  code
       coverage analysis.

   <b>Program</b>
       This template provides rules for compiling, installing and uninstalling executable programs.

   <b>Script</b>
       This template provides rules checking, installing and uninstalling executable scripts.

   <b>Symlink</b>
       This template provides rules for creating symbolic links.

   <b>Tarball.Src</b>
       This  template provides rules for creating release archives. It offers utility targets such as <b>distcheck</b>,
       which performs a level of validation of the produced archive.

   <b>Tarball</b>
       This template provides rules for constructing arbitrary tarballs. It handles differences between GNU  and
       BSD tar utilities.

   <b>Toolchain</b>
       This  module  provides  information about the configured toolchain. ZMK offers support for gcc, clang and
       several less commonly used compilers.

</pre><h4><b>TARGETS</b></h4><pre>
       ZMK provides the following make goals.

   <b>all</b>
       This goal builds everything that can be compiled or otherwise built.

   <b>clean</b>
       This goal removes all the files that were built.

   <b>coverage</b>
       This goal provides information about test coverage.

   <b>fmt</b>
       This goal re-formats source code according to the selected standard.

   <b>static-check</b>
       This goal runs static check analysis programs.

   <b>check</b>
       This goal runs unit test programs.

   <b>install</b>
       This goal installs everything that is installable.

   <b>uninstall</b>
       This goal removes everything that is installable.

   <b>dist</b>
       This goal produces a release archive, or archives.

   <b>distclean</b>
       This goal is a superset of clean, removing some files that require a ZMK installation to recreate.

   <b>distcheck</b>
       This goal is a superset of dist which produces and tests the release archive.

</pre><h4><b>VARIABLES</b></h4><pre>
       ZMK provides several variables out of the box, even without importing any additional modules.  Those  are
       listed below.

   <b>Project.Name</b>
       Name of the software distribution project. This value is typically used for release archives but it shows
       up in several other places.

   <b>Project.Version</b>
       Version  of  the  project.  The value is sometimes interpolated into generated files. It is also used for
       release archives. It can be modified programmatically by the <b>GitVersion</b> module.

   <b>NAME</b>
       Compatibility alias for <b>Project.Name</b>

   <b>VERSION</b>
       Compatibility alias for <b>Project.Version</b>

   <b>ZMK.Version</b>
       Version of the included zmk library.

   <b>ZMK.Path</b>
       Path of the included zmk library. This is used to locate modules to import.

   <b>ZMK.DistFiles</b>
       List of files to place into release archives so that the recipient need not install zmk on  their  system
       to build the project from source.

   <b>ZMK.SrcDir</b>
       Location  of  the source tree, when building out-of-tree. This is rarely needed as out-of-tree builds are
       supported by all the modules bundled with zmk.

   <b>ZMK.IsOutOfTreeBuild</b>
       If building out-of-tree, a non-empty word indicating truth. This is rarely required but may be of use  in
       specific  circumstances.  One  such example is the makefile of zmk itself, where certain directories that
       are present in the version control system need to be created and removed when building out-of-tree.

   <b>ZMK.OutOfTreeSourcePath</b>
       When building out-of-tree, the full path, including the trailing slash, of the source directory. This may
       be a relative path.

   <b>ZMK.ImportedModules</b>
       The set of modules imported so far. This can be used for diagnostic purposes.  Please import  modules  by
       calling

   <b>ZMK.BugFixes</b>
       A  list  of bug identifiers representing the set of bugs that are resolved in zmk. Membership test can be
       used to conditionally enable hot-fixes that patch a part of ZMK in a given project,  when  upgrading  zmk
       itself is not feasible.  <b>ZMK.Import</b>.

   <b>VPATH</b>
       When  building  out-of-tree, ZMK sets <b>VPATH</b> to the out-of-tree source path. This allows make implicit and
       built-in rules to find the source code without modification.

</pre><h4><b>INTERNAL</b> <b>VARIABLES</b></h4><pre>
   <b>ZMK.z.mk</b>
       Path of the entry point of the zmk library.

   <b>ZMK.comma</b>
       Variable expanding to a comma.

   <b>ZMK.newline</b>
       Variable expanding to a newline.

   <b>ZMK.hash</b>
       Variable expanding to a hash-or-pound symbol.

</pre><h4><b>HISTORY</b></h4><pre>
       The primary interface of zmk was first documented zmk 0.4

</pre><h4><b>AUTHORS</b></h4><pre>
       Zygmunt Krynicki &lt;<u><a href="mailto:me@zygoon.pl">me@zygoon.pl</a></u>&gt;

zmk 0.5.1                                         Oct 26, 2020                                           <u><a href="../man5/z.mk.5.html">z.mk</a></u>(5)
</pre>
 </div>
</div></section>
</div>
</body>
</html>