<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>just-repository-config - The format of the repository config used by justbuild(1)</title>
    <style>
        body { font-family: monospace; margin: 20px; line-height: 1.4; }
        a { color: #0066cc; }
        pre { white-space: pre-wrap; }
    </style>
</head>
<body>
    <div id="main-content">
<section class="p-strip is-bordered">
<div class="row">
<div class="col-3 u-hide--small u-hide" id="toc">
</div>
<div id="tableWrapper">
<p id="distroAndSection"></p>

Provided by: <a href="https://launchpad.net/ubuntu/questing/+package/justbuild">justbuild_1.5.1-1ubuntu2_amd64</a> <br><br><pre>
</pre><h4><b>NAME</b></h4><pre>
       just-repository-config - The format of the repository config used by <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1)

</pre><h4><b>DESCRIPTION</b></h4><pre>
       <b>justbuild</b>’s  repository  configuration is read as JSON.  Any other serialization describing the same JSON
       object is equivalent.   We  assume,  that  in  JSON  objects,  each  key  occurs  at  most  once;  it  is
       implementation defined how repetitions of the same key are treated.

   <b>File</b> <b>root</b> <b>description</b>
       Each  repository  can  have multiple <u>file</u> <u>roots</u>.  Each file root is defined as a non-empty JSON list with
       its first element being a string, which determines the type and semantic of the subsequent elements:

       • <u>"file"</u> refers to a file root that is located in the file system.  The list has to be of  length  2  and
         the second argument contains the path to the file root.

       • <u>"git</u>  <u>tree"</u> refers to a file root that is available as part of a Git repository.  The list has to be of
         length 2 or 3 with the remaining two elements being:

         1. The <u>git</u> <u>tree</u> <u>hash</u>, which is sufficient to describe the content  of  an  entire  tree  including  its
            sub-trees and blobs.  The tree hash has to be specified in hex encoding.

         2. The path to a Git repository on the file system with the promise that it contains the aforementioned
            <u>git</u> <u>tree</u> <u>hash</u>; if this entry is missing, the root is considered absent and any target requiring this
            root has to come from a specified serve end point.

       • <u>"computed"</u>  refers  to a file root that is the result of evaluating an export target of a content-fixed
         repository.  The list has to have length 5  or  6,  with  the  remaining  arguments  being  the  global
         repository  name,  the  module  name, the target name, and the configuration, in that order, optionally
         followed by a pragma object.  If the pragma object contains the entry true for the key  "absent",  that
         root is considered absent, otherwise not.

       • <u>"tree</u> <u>structure"</u> refers to the directory structure of a file root.  The list has to have length 2 or 3.
         The  second  argument  contains  the  global name of the repository which workspace root gets taken for
         computation.  The third argument is an optional pragma object.  If the pragma object contains  the  key
         "absent", the entry must be a boolean.  If the entry is true, that root is considered absent, otherwise
         not.

   <b>Repository</b> <b>description</b>
       A  single  <u>repository</u> <u>description</u> is defined as a JSON object, which contains <u>file</u> <u>roots</u>, file names, and
       bindings to other repositories.  Specifically the following fields are supported:

       • <u>"workspace_root"</u> contains the <u>file</u> <u>root</u> where source files are located.  If this entry is  missing  for
         the  main  repository,  <b>justbuild</b>  will  perform the normal workspace root resolution starting from the
         current working directory.

       • <u>"target_root"</u> contains the <u>file</u> <u>root</u> where the target files are located.  If this entry is missing, the
         workspace root is taken.

       • <u>"target_file_name"</u> contains the file name of target files to  use.   If  this  entry  is  missing,  the
         default target file name <u>TARGETS</u> is used.

       • <u>"rule_root"</u>  contains  the  <u>file</u>  <u>root</u> where the rule files are located.  If this entry is missing, the
         target root is taken.

       • <u>"rule_file_name"</u> contains the file name of rule files to use.  If this entry is  missing,  the  default
         rule file name <u>RULES</u> is used.

       • <u>"expression_root"</u>  contains  the  <u>file</u>  <u>root</u>  where the expression files are located.  If this entry is
         missing, the rule root is taken.

       • <u>"expression_file_name"</u> contains the file name of expression files to use.  If this  entry  is  missing,
         the default expression file name <u>EXPRESSIONS</u> is used.

       • <u>"bindings"</u>  contains  a  JSON  object  that  defines  bindings  to  other repositories by mapping local
         repository names to global ones.  The object’s  key  is  local  name,  while  the  value  is  a  string
         representing the global name.

       Note  that  any  other  unsupported  field is accepted but ignored.  There are no guarantees that any yet
       unsupported field may not become meaningful in future versions.

   <b>Repository</b> <b>configuration</b> <b>format</b>
       The repository configuration format is a JSON object with the following keys:

       • <u>"main"</u> contains a string, which defines the repository name to consider by default  if  not  explicitly
         specified on the command line (i.e., via <b>--main</b>).  This entry is optional and if omitted <b>justbuild</b> will
         use the lexicographically first repository, as usual.

       • <u>"repositories"</u>  contains a JSON object that defines all repositories by mapping global repository names
         to <u>repository</u> <u>descriptions</u> documented above.  This entry is optional  and  if  omitted  an  empty  JSON
         object is used.

</pre><h4><b>NOTES</b></h4><pre>
       Although the repository configuration is human-readable and can be written by hand, in many cases it will
       be  generated  by  an  independent  tool.  <b><a href="../man1/just-mr.1.html">just-mr</a></b>(1) is one such tool that can be used for configuration
       generation, but not necessarily the only one.

</pre><h4><b>See</b> <b>also</b></h4><pre>
       <b><a href="../man1/justbuild.1.html">justbuild</a></b>(1), <b><a href="../man1/just-mr.1.html">just-mr</a></b>(1), <b><a href="../man5/just-mr-repository-config.5.html">just-mr-repository-config</a></b>(5)

                                                               <u>JUST</u> <u>REPOSITORY</u> <u><a href="../man5/CONFIG.5.html">CONFIG</a>(5)</u> <u>|</u> <u>File</u> <u>Formats</u> <u>Manual</u>()
</pre>
 </div>
</div></section>
</div>
</body>
</html>