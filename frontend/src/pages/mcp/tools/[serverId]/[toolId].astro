---
import Breadcrumb from '@/components/Breadcrumb';
import BaseLayout from '@/layouts/BaseLayout.astro';
import serversData from '../../data/servers.json';
import toolsData from '../../data/tools.json';
import McpToolDetail from '../_McpToolDetail';

export async function getStaticPaths() {
  // Generate static paths for all tools
  const paths = toolsData.tools.map((tool) => ({
    params: { 
      serverId: tool.serverId,
      toolId: tool.id
    },
    props: { 
      tool,
      server: serversData.servers.find(s => s.id === tool.serverId)
    }
  }));

  return paths;
}

const { tool, server } = Astro.props;

// Breadcrumb data
const breadcrumbItems = [
  { label: 'Free DevTools', href: '/freedevtools/' },
  { label: 'MCP Directory', href: '/freedevtools/mcp/' },
  { label: 'MCP Tools', href: '/freedevtools/mcp/tools/' },
  { label: tool.name }
];

// SEO Data
const title = `${tool.name} - MCP Tool from ${tool.serverName} | Free DevTools by Hexmos`;
const description = `${tool.description} Part of the ${tool.serverName} MCP server. ${tool.license} license.`;
const keywords = [
  'mcp tool',
  tool.name.toLowerCase(),
  tool.serverName.toLowerCase(),
  'model context protocol',
  'ai agent tool',
  'open source mcp',
  tool.license.toLowerCase(),
  tool.category.replace('-', ' ')
];

const canonical = `https://hexmos.com/freedevtools/mcp/tools/${tool.serverId}/${tool.id}/`;
---

<Breadcrumb items={breadcrumbItems} client:load />

<BaseLayout 
  name={tool.name}
  title={title}
  path={canonical}
  description={description}
  canonical={canonical}
  themeColor="#3b82f6"
  keywords={keywords}
  ogImage="https://hexmos.com/freedevtools/tool-banners/mcp-tool-banner.png"
  twitterImage="https://hexmos.com/freedevtools/tool-banners/mcp-tool-banner.png"
  datePublished="2025-01-30"
  softwareVersion="1.0.0"
  features={[
    `From ${tool.serverName}`,
    `${tool.license} license`,
    `Category: ${tool.category}`,
    'MCP compatible',
    'Open source'
  ]}
>
  <McpToolDetail 
    tool={tool}
    server={server}
    client:load 
  />
</BaseLayout>
