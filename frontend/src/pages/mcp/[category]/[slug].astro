---
import PaginationView from './_Pagination.astro';
import PageView from './_Page.astro';

export const prerender = false;

const { category, slug } = Astro.params;

// Early return if missing params
if (!category || !slug) {
  return new Response(null, { status: 404 });
}

const requestStartTime = Date.now();
console.log(`[${new Date().toISOString()}] Request reached server: /freedevtools/mcp/${category}/${slug}/`);

// Check if slug is numeric (pagination) or a string (repository)
const isNumericPage = /^\d+$/.test(slug);

console.log(`[${new Date().toISOString()}] Total request time for /freedevtools/mcp/${category}/${slug}/: ${Date.now() - requestStartTime}ms`);
---

{isNumericPage ? (
  <PaginationView category={category} page={slug} />
) : (
  <PageView category={category} slug={slug} />
)}
