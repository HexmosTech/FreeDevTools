---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AdBanner from '../../components/banner/AdBanner';
import { getAllEmojis, getEmojiCategories } from '../../lib/emojis';

const emojis = await getAllEmojis();

// Metadata-based categories
const categories = getEmojiCategories();
const emojisByCategory: Record<string, any[]> = {};
for (const cat of categories) {
  emojisByCategory[cat] = emojis.filter((e) => (e.fluentui_metadata?.group || e.emoji_net_data?.category || (e as any).given_category || 'Other') === cat);
}

// Sort categories and emojis within categories
const sortedCategories = Object.keys(emojisByCategory).sort();
for (const category of sortedCategories) {
  emojisByCategory[category].sort((a, b) => {
    const titleA = a.title || a.fluentui_metadata?.cldr || a.slug || '';
    const titleB = b.title || b.fluentui_metadata?.cldr || b.slug || '';
    return titleA.localeCompare(titleB);
  });
}

// Category icons mapping
const categoryIconMap: Record<string, string> = {
  "Smileys & Emotion": "üòÄ",
  "People & Body": "üë§",
  "Animals & Nature": "üê∂",
  "Food & Drink": "üçé",
  "Travel & Places": "‚úàÔ∏è",
  "Activities": "‚öΩ",
  "Objects": "üì±",
  "Symbols": "‚ù§Ô∏è",
  "Flags": "üèÅ",
  "Other": "‚ùì"
};
---

<BaseLayout 
  name="Emojis"
  path="/emojis/"
  title="Emojis - Free DevTools"
  description="Comprehensive emoji reference with categories, meanings, and copy functionality. Browse thousands of emojis organized by type and usage."
  canonical="https://hexmos.com/freedevtools/emojis/"
  themeColor="#1e40af"
  showSidebar={false}
  showHeader={true}
>
  <div class="max-w-6xl mx-auto px-2 md:px-6">
    <div class="mb-16 mt-[74px]">
      <AdBanner client:load />
    </div>
    <div class="mb-8">
      <nav class="text-sm text-slate-600 dark:text-slate-400 mb-4">
        <a href="/freedevtools/" class="hover:text-blue-600 dark:hover:text-blue-400">Free DevTools</a>
        <span class="mx-2">/</span>
        <span>Emojis</span>
      </nav>
      
      <h1 class="text-3xl font-bold text-slate-900 dark:text-slate-100 mb-4">
        Emojis
      </h1>
      <p class="text-lg text-slate-600 dark:text-slate-400 mb-6">
        Comprehensive emoji reference with categories, meanings, and copy functionality.
      </p>
    </div>

    

    <div id="emoji-categories" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 md:gap-4 lg:gap-8">
      {sortedCategories.map((category) => (
        <div class="category-card bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-900 rounded-xl p-4 md:p-4 lg:p-8 transition-all duration-300 ease-in-out shadow-sm hover:-translate-y-1 hover:shadow-xl hover:border-border" data-category={category.toLowerCase()}>
          <div class="flex items-center mb-4">
            <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 dark:from-blue-600 dark:to-blue-700 rounded-lg flex items-center justify-center mr-3 border border-slate-200 dark:border-slate-700 shadow-sm">
              <span class="text-2xl">
                {categoryIconMap[category] || "‚ùì"}
              </span>
            </div>
            <a 
              href={`/freedevtools/emojis/${category.toLowerCase().replace(/[^a-z0-9]+/g, '-')}`}
              class="text-xl font-semibold text-black dark:text-neon-light capitalize hover:text-blue-600 dark:hover:text-blue-400 transition-colors"
            >
              {category}
            </a>
          </div>
          
          <p class="text-sm text-slate-800 dark:text-slate-400 mb-4 m-0">
            {emojisByCategory[category].length} emojis available
          </p>
          
          <div class="space-y-2">
            {emojisByCategory[category].slice(0, 8).map((emoji) => {
              // const isSkinTone = emoji.slug.includes('-skin-tone') || emoji.slug.includes('light-skin-tone') || emoji.slug.includes('medium-skin-tone') || emoji.slug.includes('dark-skin-tone');
              const isSkinTone = false
              return (
                <a 
                  href={`/freedevtools/emojis/${emoji.slug}`}
                  class={`emoji-item flex items-center text-sm hover:text-black dark:hover:text-white hover:font-bold ${isSkinTone ? 'text-slate-500 dark:text-slate-500' : 'text-blue-600 dark:text-blue-400'}`}
                  data-name={(emoji.title || emoji.fluentui_metadata?.cldr || emoji.slug || '').toLowerCase()}
                  data-keywords={(emoji.fluentui_metadata?.keywords || emoji.emoji_net_data?.keywords || []).join(' ').toLowerCase()}
                >
                  <span class="text-lg mr-2">{emoji.code}</span>
                  <span class={isSkinTone ? 'text-xs' : ''}>{emoji.title || emoji.fluentui_metadata?.cldr || emoji.slug}</span>
                </a>
              );
            })}
            {emojisByCategory[category].length > 8 && (
              <p class="text-xs text-slate-500 dark:text-slate-500">
                +{emojisByCategory[category].length - 8} more emojis
              </p>
            )}
          </div>
          
          <div class="mt-4 pt-4 border-t border-slate-200 dark:border-slate-900">
            <a 
              href={`/freedevtools/emojis/${category.toLowerCase().replace(/[^a-z0-9]+/g, '-')}`}
              class="text-sm font-medium text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"
            >
              View all {category} emojis ‚Üí
            </a>
          </div>
        </div>
      ))}
    </div>
    
    <!-- Credits Section -->
    <div class="mt-10 pt-6 mb-8 border-t border-slate-200 dark:border-slate-700">
      <div class="flex flex-wrap gap-4">
        <a 
          href="/freedevtools/" 
          class="inline-flex items-center px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:text-blue-900/30 transition-colors"
        >
          ‚Üê  Back to Free DevTools
        </a>
        <a 
          href="/freedevtools/emojis/credits"
          class="inline-flex items-center px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-400 bg-slate-50 dark:bg-slate-800 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors"
        >
          Credits & Acknowledgments
        </a>
      </div>
    </div>
  </div>
</BaseLayout>


