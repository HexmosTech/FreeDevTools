---
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import PageSpeedAnalytics from './page-speed.tsx';

// Get all PageSpeed analytics data from content collection
const analyticsEntries = await getCollection('pageSpeedAnalytics');

// Transform the entries to match our interface
const jsonFiles = analyticsEntries
  .map(entry => {
    const filename = entry.id.split('/').pop() || entry.id;
    return {
      filename: filename,
      url: filename
        .replace(/_desktop_\d{8}_\d{6}\.json$/, '')
        .replace(/_/g, '/')
        .replace('freedevtools', 'https://hexmos.com/freedevtools'),
      timestamp: filename.match(/_(\d{8}_\d{6})\.json$/)?.[1] || 'unknown',
      data: entry.data
    };
  })
  .sort((a, b) => b.timestamp.localeCompare(a.timestamp));
---

<BaseLayout
name="MCP Directory"
title="data PageSpeed Analytics"
path="/freedevtools/mcp/1/"
description="data"
canonical="https://hexmos.com/freedevtools/mcp/1/"
themeColor="#3b82f6"
keywords={["PageSpeed", "Analytics", "Free DevTools"]}
ogImage="https://hexmos.com/freedevtools/tool-banners/mcp-directory-banner.png"
twitterImage="https://hexmos.com/freedevtools/tool-banners/mcp-directory-banner.png"
datePublished="2025-01-30"
softwareVersion="1.0.0"
features={[
  'Filter by category and license',
  'Search and sort functionality'
]}
>
<PageSpeedAnalytics jsonFiles={jsonFiles} client:load />
</BaseLayout>