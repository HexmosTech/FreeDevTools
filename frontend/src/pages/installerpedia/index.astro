---
import AdBanner from '@/components/banner/AdBanner.astro';
import CreditsButton from '@/components/buttons/CreditsButton';
import ToolContainer from '@/components/tool/ToolContainer';
import ToolHead from '@/components/tool/ToolHead';
import BaseLayout from '@/layouts/BaseLayout.astro';
import { getRepoCategories,getOverview } from 'db/installerpedia/installerpedia-utils';

// Get repo_type categories from database
const categories = getRepoCategories();

// Get total number of installation guides
const overview = getOverview();

const breadcrumbItems = [
  { label: 'Free DevTools', href: '/freedevtools/' },
  { label: 'Installerpedia' },
];
---

<BaseLayout
  name="Installerpedia"
  title="Installerpedia - Curated Installation Guides | Free DevTools by Hexmos"
  path="/freedevtools/installerpedia/"
  description="Browse and search curated installation guides for software, packages, and tools. Installerpedia provides verified commands and instructions to set up development environments efficiently."
  canonical="https://hexmos.com/freedevtools/installerpedia/"
  keywords={['installer guides', 'installation', 'setup', 'dev tools', 'software']}
  ogImage="https://hexmos.com/freedevtools/tool-banners/installerpedia-banner.png"
  twitterImage="https://hexmos.com/freedevtools/tool-banners/installerpedia-banner.png"
  datePublished="2025-01-30"
  softwareVersion="1.0.0"
  features={[
    'Curated installation guides',
    'Verified commands for packages and tools',
    'Interactive setup instructions',
    'Step-by-step environment setup',
  ]}
>
  <ToolContainer>
    <div class="mb-16 mt-[74px]">
      <AdBanner />
    </div>
    <ToolHead
      name="Installerpedia"
      description="Curated installation guides for software, packages, and tools with verified commands and step-by-step instructions."
      breadcrumbItems={breadcrumbItems}
    />

    <!-- Overview Stats -->
    <div class="text-center">
      <div class="grid grid-cols-2 gap-6 mt-8">
        <div class="text-center">
          <div class="text-3xl font-bold text-blue-600">
            {categories.length >= 1000 ? Math.round(categories.length / 1000) + 'k' : categories.length}
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Categories</div>
        </div>
        <div class="text-center">
          <div class="text-3xl font-bold text-green-600">
            {(overview?.total_count || 0) >= 1000 ? Math.round((overview?.total_count || 0) / 1000) + 'k' : (overview?.total_count || 0)}
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">Installation Guides</div>
        </div>
      </div>
    </div>

    <!-- Installerpedia Repo Type Grid -->
    <div class="mt-8">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        {categories.map((category) => (
          <a
            href={`/freedevtools/installerpedia/${category.name.toLowerCase()}/`}
            class="block bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-lg p-6 hover:shadow-lg transition-shadow"
          >
            <div class="flex items-start justify-between mb-3">
              <h3 class="text-lg font-semibold text-gray-900 dark:text-gray-100 capitalize">
                {category.name.replace('-', ' ')}
              </h3>
              <span class="text-xs font-mono bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400 px-2 py-1 rounded">
                {category.count >= 1000 ? Math.round(category.count / 1000) + 'k' : category.count} guides
              </span>
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-400 mb-4">
              {category.description || `All ${category.name} installation guides.`}
            </p>
          </a>
        ))}
      </div>
    </div>

    <!-- Credits Section -->
    <div class="mt-10 pt-6 mb-8 border-t border-slate-200 dark:border-slate-700">
      <div class="flex flex-wrap gap-4">
        <CreditsButton href="/freedevtools/installerpedia/credits/" />
      </div>
    </div>
  </ToolContainer>
</BaseLayout>
