---
import type { Tool } from '@/config/tools';
import { getToolByKey } from '@/config/tools';
import ToolDetailLayout from '@/components/tool/ToolDetailLayout.astro';
import JsonPrettifier from './_JsonPrettifier';

// âœ… Define JSON_KEYS inside the frontmatter block

// Dynamic routes: tell Astro all possible `tool` keys
export function getStaticPaths() {
  return [
    { params: { tool: "prettifier" }},
    { params: { tool: "validator" }},
    { params: { tool: "fixer" }},
    { params: { tool: "utilities" }},
  ];
}

// Use the param from route
const { tool } = Astro.params;

// Map short key to full tool key used in config
const toolKey = `json-${tool}`;

// Fetch the tool config; fallback to prettifier if invalid
const toolConfig = (getToolByKey(toolKey) as Tool) || getToolByKey('json-prettifier');
---

<ToolDetailLayout tool={toolConfig}>
  <JsonPrettifier client:load tool={toolKey} />
</ToolDetailLayout>
