---
import type { Tool } from '@/config/tools';
import { getToolByKey } from '@/config/tools';
import BaseLayout from '@/layouts/BaseLayout.astro';
import ZstdCompress from './_ZstdCompress';

// Tell Astro which pages to generate
export function getStaticPaths() {
  return [
    { params: { action: "compress" }},
    { params: { action: "decompress" }},
  ];
}

// Get the 'action' from the URL (e.g., 'compress' or 'decompress')
const { action } = Astro.params;

// Construct the full key to look up in the config
const toolKey = `zstd-${action}`;

// Fetch the tool's config, with a fallback to 'compress'
const tool = getToolByKey(toolKey) as Tool || getToolByKey('zstd-compress');
---

<BaseLayout
  name={tool.name}
  title={tool.title}
  path={tool.path}
  description={tool.description}
  canonical={tool.canonical}
  
  keywords={tool.keywords}
  ogImage={tool.ogImage}
  twitterImage={tool.twitterImage}
  datePublished={tool.datePublished}
  features={tool.features}
>
  {/* Pass the 'action' as a prop to the React component */}
  <ZstdCompress client:load />
</Base-Layout>