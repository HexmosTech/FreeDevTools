---
import CreditsButton from '@/components/buttons/CreditsButton';
import Pagination from '@/components/PaginationComponent.astro';
import ToolContainer from '@/components/tool/ToolContainer';
import ToolContentCardWrapper from '@/components/tool/ToolContentCardWrapper';
import ToolHead from '@/components/tool/ToolHead';
import { Card } from '@/components/ui/card';
import { Download, Filter, Star } from 'lucide-react';
import AdBanner from '../../components/banner/AdBanner.astro';

// Helper function to get platform emoji
const getPlatformEmoji = (platformName: string): string => {
  const emojiMap: Record<string, string> = {
    android: '📱',
    aws: '☁️',
    bash: '🐚',
    common: '🔧',
    git: '📦',
    linux: '🐧',
    macos: '🍎',
    node: '🟢',
    python: '🐍',
    windows: '🪟',
    docker: '🐳',
    kubernetes: '☸️',
    terraform: '🏗️',
    npm: '📦',
    yarn: '🧶',
    pnpm: '📦',
    go: '🐹',
    rust: '🦀',
    php: '🐘',
    ruby: '💎',
    java: '☕',
    csharp: '🔷',
    cpp: '⚡',
    c: '⚡',
    swift: '🦉',
    kotlin: '🟣',
    scala: '🔴',
    clojure: '🟢',
    haskell: '🔷',
    ocaml: '🟠',
    fsharp: '🔵',
    elixir: '💜',
    erlang: '🔴',
    lua: '🔵',
    perl: '🐪',
    r: '📊',
    matlab: '🧮',
    julia: '🔴',
    dart: '🎯',
    flutter: '🦋',
    react: '⚛️',
    vue: '💚',
    angular: '🅰️',
    svelte: '🧡',
    next: '▲',
    nuxt: '💚',
    gatsby: '🌐',
    webpack: '📦',
    vite: '⚡',
    rollup: '📦',
    parcel: '📦',
    babel: '🔧',
    typescript: '🔷',
    javascript: '🟨',
    html: '🌐',
    css: '🎨',
    sass: '💅',
    less: '🔷',
    stylus: '💄',
    postcss: '🔧',
    tailwind: '🎨',
    bootstrap: '🎨',
    material: '🎨',
    antd: '🎨',
    chakra: '🎨',
    mantine: '🎨',
    semantic: '🎨',
    bulma: '🎨',
    foundation: '🎨',
    pure: '🎨',
    skeleton: '🎨',
    milligram: '🎨',
    spectre: '🎨',
    uikit: '🎨',
    materialize: '🎨',
    vuetify: '🎨',
    quasar: '🎨',
    prime: '🎨',
    element: '🎨',
    iview: '🎨',
    naive: '🎨',
    arco: '🎨',
    tdesign: '🎨',
    nutui: '🎨',
    vant: '🎨',
    mint: '🎨',
    cube: '🎨',
    mand: '🎨',
    weui: '🎨',
    jquery: '🎨',
    lodash: '🔧',
    moment: '📅',
    dayjs: '📅',
    'date-fns': '📅',
    luxon: '📅',
    ramda: '🔧',
    underscore: '🔧',
    immutable: '🔧',
    mobx: '🔧',
    redux: '🔧',
    vuex: '🔧',
    pinia: '🔧',
    zustand: '🔧',
    jotai: '🔧',
    recoil: '🔧',
    swr: '🔧',
    'react-query': '🔧',
    apollo: '🔧',
    graphql: '🔧',
    prisma: '🔧',
    sequelize: '🔧',
    mongoose: '🔧',
    typeorm: '🔧',
    knex: '🔧',
    bookshelf: '🔧',
    waterline: '🔧',
    sails: '🔧',
    loopback: '🔧',
    feathers: '🔧',
    hapi: '🔧',
    fastify: '🔧',
    koa: '🔧',
    express: '🔧',
    connect: '🔧',
    restify: '🔧',
    polka: '🔧',
    micro: '🔧',
    vercel: '🔧',
    netlify: '🔧',
    heroku: '🔧',
    railway: '🔧',
    render: '🔧',
    fly: '🔧',
    digitalocean: '☁️',
    linode: '☁️',
    vultr: '☁️',
    azure: '☁️',
    gcp: '☁️',
    ibm: '☁️',
    oracle: '☁️',
    alibaba: '☁️',
    tencent: '☁️',
    baidu: '☁️',
    huawei: '☁️',
    rackspace: '☁️',
    joyent: '☁️',
    softlayer: '☁️',
    ovh: '☁️',
    scaleway: '☁️',
    hetzner: '☁️',
    contabo: '☁️',
  };

  return emojiMap[platformName.toLowerCase()] || '🔧';
};

// Helper function to render command card
function renderCommandCard(command: any): string {
  return `
    <a
      href="${command.url}"
      class="block bg-white dark:bg-slate-900 dark:border-slate-900 border border-slate-200 rounded-xl p-6 shadow-sm hover:shadow-md transition-all duration-200"
    >
      <div class="flex justify-between items-center mb-4">
        <h3 class="text-lg font-bold text-slate-900 dark:text-white">
          ${command.name}
        </h3>
        <span class="text-sm text-slate-500 font-medium">
          ${command.category || 'Command'}
        </span>
      </div>
      
      <p class="text-sm text-slate-600 dark:text-slate-400">
        ${command.description}
      </p>
    </a>
  `;
}

const {
  commands,
  currentPage,
  totalPages,
  totalCommands,
  platform,
  breadcrumbItems,
} = Astro.props;
---

<ToolContainer>
  <div class="mb-16 mt-[74px]">
    <AdBanner />
  </div>
  <ToolHead
    name={`${platform} Commands`}
    description={`Comprehensive documentation for ${platform} command-line tools. Learn ${platform} commands quickly with practical examples.`}
    breadcrumbItems={breadcrumbItems}
  />

  <!-- Pagination Info -->
  <div
    id="pagination-info"
    class="bg-slate-50 dark:bg-slate-800 rounded-lg p-4 mb-6 mt-6"
  >
    <div class="text-sm text-slate-600 dark:text-slate-400 text-center">
      Showing {commands.length} of {totalCommands} commands (Page {currentPage} of
      {totalPages})
    </div>
  </div>

  <!-- Commands Grid -->
  <div class="mt-10 mb-6">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
      {
        commands.map((command: any) => (
          <Fragment set:html={renderCommandCard(command)} />
        ))
      }
    </div>
  </div>

  <!-- Pagination -->
  <Pagination
    currentPage={currentPage}
    totalPages={totalPages}
    baseUrl={`/freedevtools/tldr/${platform}/`}
  />

  <!-- Features -->
  <div class="mb-10 mt-6">
    <ToolContentCardWrapper>
      <Card className="p-6">
        <h2 class="text-xl font-semibold mb-6 text-center">
          Why Use Our ${platform} Commands?
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="text-center space-y-2">
            <Download className="h-8 w-8 text-blue-600 mx-auto" />
            <h3 class="font-semibold">Quick Reference</h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Get ${platform} command examples and usage instantly without reading
              full documentation.
            </p>
          </div>
          <div class="text-center space-y-2">
            <Filter className="h-8 w-8 text-green-600 mx-auto" />
            <h3 class="font-semibold">Platform Specific</h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Commands organized specifically for ${platform} for easy navigation
              and learning.
            </p>
          </div>
          <div class="text-center space-y-2">
            <Star className="h-8 w-8 text-yellow-600 mx-auto" />
            <h3 class="font-semibold">Practical Examples</h3>
            <p class="text-sm text-gray-600 dark:text-gray-400">
              Real-world ${platform} examples that you can copy and use immediately.
            </p>
          </div>
        </div>
      </Card>
    </ToolContentCardWrapper>
  </div>

  <!-- Credits Section -->
  <div class="mt-10 pt-6 mb-8 border-t border-slate-200 dark:border-slate-700">
    <div class="flex flex-wrap gap-4">
      <a
        href="/freedevtools/tldr/"
        class="inline-flex items-center px-4 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors"
      >
        ← Back to TLDR
      </a>
      <CreditsButton href="/freedevtools/tldr/credits/" />
    </div>
  </div>
</ToolContainer>
