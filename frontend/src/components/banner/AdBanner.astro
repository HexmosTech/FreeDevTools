---
// Ad variations data
const adVariations = [
  {
    id: "variation-1",
    title: "Code Review In Seconds",
    description: "Self-Hosted AI Code Reviewer",
    backgroundColor: "bg-blue-200",
    textColor: "text-gray-800",
  },
  {
    id: "variation-2",
    title: "Reduce Production Outages",
    description: "Self-Hosted AI Code Reviewer",
    backgroundColor: "bg-blue-200",
    textColor: "text-gray-800",
  },
  {
    id: "variation-3",
    title: "Reduce costly production bugs",
    description: "Self-Hosted AI Code Reviewer",
    backgroundColor: "bg-blue-200",
    textColor: "text-gray-800",
  },
  {
    id: "variation-4",
    title: "Minimize downtime from code errors",
    description: "Self-Hosted AI Code Reviewer",
    backgroundColor: "bg-blue-200",
    textColor: "text-gray-800",
  },
  {
    id: "variation-5",
    title: "Avoid expensive production outages",
    description: "Self-Hosted AI Code Reviewer",
    backgroundColor: "bg-blue-200",
    textColor: "text-gray-800",
  },
  {
    id: "variation-6",
    title: "Reduce bottlenecks in code reviews",
    description: "Self-Hosted AI Code Reviewer",
    backgroundColor: "bg-blue-200",
    textColor: "text-gray-800",
  },
  {
    id: "variation-7",
    title: "Reduce context-switching for engineers",
    description: "Self-Hosted AI Code Reviewer",
    backgroundColor: "bg-blue-200",
    textColor: "text-gray-800",
  },
];

const link = "https://hexmos.com/livereview/";

// Randomly select a variation
const randomIndex = Math.floor(Math.random() * adVariations.length);
const currentAd = adVariations[randomIndex];
---

<div 
  id="ad-banner"
  class="w-full bg-yellow-100 hover:bg-yellow-200 border border-gray-200 shadow-sm rounded-md relative transition-colors duration-300
  /* Mobile layout (default) */
  mb-8 mt-6
  /* Tablet layout */
  md:mb-10 md:mt-6
  /* Desktop layout */
  xl:h-40 xl:mb-10 xl:mt-2 xl:flex xl:justify-center"
>
  <!-- Close Button -->
  <button
    id="close-banner"
    aria-label="Close"
    class="absolute top-2 right-2 flex items-center justify-center text-gray-600 hover:text-gray-800 hover:bg-yellow-200 rounded-full transition-colors duration-200 z-10 py-2 pr-2"
  >
    <svg
      class="w-4 h-4 xl:w-5 xl:h-5"
      fill="none"
      stroke="currentColor"
      viewBox="0 0 24 24"
    >
      <path
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        d="M6 18L18 6M6 6l12 12"
      />
    </svg>
  </button>

  <a
    href={`${link}?variation=${randomIndex}`}
    target="_blank"
    rel="noopener noreferrer"
    class="block h-full hover:bg-yellow transition-colors duration-300 rounded-lg
      xl:w-full xl:flex xl:justify-start"
  >
    <div class="px-4 py-2 h-full flex flex-col justify-center md:px-2 md:py-2 xl:px-6 xl:py-0 xl:w-full xl:min-w-96">
      <div class="text-left mb-4 xl:mb-0">
        <p class="text-red-700 mb-2 leading-tight tracking-wide font-semibold text-3xl md:text-5xl md:mb-3">
          {currentAd.title}
        </p>
        <p class="text-gray-800 leading-relaxed font-medium text-lg md:text-2xl xl:hidden">
          {currentAd.description}
        </p>
      </div>

      <!-- Mobile and Tablet button row -->
      <div class="flex flex-row items-center justify-between mb-2 xl:hidden">
        <!-- Learn More Button (Small) -->
        <button
          class="flex justify-between items-center cursor-pointer shadow-[1px_2px_0px_black] border border-black rounded-[6px] relative overflow-hidden z-100 transition-all duration-250 hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-[0px_1px_0px_black] active:brightness-75 group px-1 py-0.5 bg-yellow-100 hover:bg-yellow-600"
        >
          <div class="relative text-black flex justify-start items-center font-semibold text-[10px]">
            <span class="relative transition-all duration-250 mr-1">Learn</span>
            <span class="relative transition-all duration-250 mr-1">More</span>
          </div>
          <div class="border border-black rounded-full bg-red-200 group-hover:bg-red-600 relative overflow-hidden transition-all duration-250 group-hover:translate-x-[1px] group-active:translate-x-[2px] p-0.5 mr-0.5">
            <svg
              width="8"
              height="8"
              viewBox="0 0 45 38"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
              class="relative z-10"
            >
              <path
                d="M43.7678 20.7678C44.7441 19.7915 44.7441 18.2085 43.7678 17.2322L27.8579 1.32233C26.8816 0.34602 25.2986 0.34602 24.3223 1.32233C23.346 2.29864 23.346 3.88155 24.3223 4.85786L38.4645 19L24.3223 33.1421C23.346 34.1184 23.346 35.7014 24.3223 36.6777C25.2986 37.654 26.8816 37.654 27.8579 36.6777L43.7678 20.7678ZM0 21.5L42 21.5V16.5L0 16.5L0 21.5Z"
                fill="black"
              />
            </svg>
          </div>
        </button>

        <!-- LiveReview Brand (Small) -->
        <div class="flex flex-col items-center space-y-1 text-black">
          <div class="flex items-center space-x-1 flex-row lg:space-x-2 space-x-0 lg:space-y-0 space-y-1">
            <img
              src="/freedevtools/t/livereview_logo_32.webp"
              alt="LiveReview"
              class="w-6 h-6 mb-0 lg:mb-0"
            />
            <div class="text-left">
              <div class="text-xs font-semibold">
                <span>Live</span>
                <span class="text-blue-800">Review</span>
              </div>
              <div class="text-[10px] opacity-80 leading-tight">
                AI-Powered Code Review
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Desktop layout - description and buttons in a row -->
      <div class="hidden xl:flex xl:flex-row xl:justify-between xl:items-center xl:gap-24 xl:mt-0">
        <div class="flex flex-row justify-between items-center gap-12">
          <p class="text-gray-800 leading-relaxed text-3xl font-medium">
            {currentAd.description}
          </p>
          <!-- Learn More Button (Medium) -->
          <button
            class="flex justify-between items-center cursor-pointer shadow-[1px_2px_0px_black] border border-black rounded-[6px] relative overflow-hidden z-100 transition-all duration-250 hover:translate-x-[1px] hover:translate-y-[1px] hover:shadow-[0px_1px_0px_black] active:brightness-75 group px-1 py-1 bg-yellow-100 hover:bg-yellow-600"
          >
            <div class="relative text-black flex justify-start items-center font-semibold text-xs">
              <span class="relative transition-all duration-250 mr-1">Learn</span>
              <span class="relative transition-all duration-250 mr-1">More</span>
            </div>
            <div class="border border-black rounded-full bg-red-200 group-hover:bg-red-600 relative overflow-hidden transition-all duration-250 group-hover:translate-x-[1px] group-active:translate-x-[2px] p-1 mr-1">
              <svg
                width="12"
                height="12"
                viewBox="0 0 45 38"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
                class="relative z-10"
              >
                <path
                  d="M43.7678 20.7678C44.7441 19.7915 44.7441 18.2085 43.7678 17.2322L27.8579 1.32233C26.8816 0.34602 25.2986 0.34602 24.3223 1.32233C23.346 2.29864 23.346 3.88155 24.3223 4.85786L38.4645 19L24.3223 33.1421C23.346 34.1184 23.346 35.7014 24.3223 36.6777C25.2986 37.654 26.8816 37.654 27.8579 36.6777L43.7678 20.7678ZM0 21.5L42 21.5V16.5L0 16.5L0 21.5Z"
                  fill="black"
                />
              </svg>
            </div>
          </button>
        </div>
        <div class="flex items-center gap-4 mt-1">
          <!-- LiveReview Brand (Large) -->
          <div class="flex flex-col items-center space-y-1 text-black">
            <div class="flex items-center space-x-2 flex-row lg:space-x-2 space-x-0 lg:space-y-0 space-y-1">
              <img
                src="/freedevtools/t/livereview_logo_32.webp"
                alt="LiveReview"
                class="w-8 h-8 mb-0 lg:mb-0"
              />
              <div class="text-left">
                <div class="text-sm font-semibold">
                  <span>Live</span>
                  <span class="text-blue-800">Review</span>
                </div>
                <div class="text-[10px] opacity-80 leading-tight">
                  AI-Powered Code Review
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </a>
</div>

<script>
  // Handle close button functionality
  document.addEventListener('DOMContentLoaded', function() {
    const closeButton = document.getElementById('close-banner');
    const banner = document.getElementById('ad-banner');
    
    if (closeButton && banner) {
      closeButton.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        banner.style.display = 'none';
      });
    }
  });
</script>
