<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prometheus Host Alert Rules - Define and Manage Host Monitoring Alerts</title>
    <meta name="description" content="Configure and manage Prometheus host alert rules for effective monitoring. Learn to define alerts for node down, low disk space, and more with clear annotations and labels.">
    <meta name="keywords" content="prometheus, alert rules, host monitoring, node exporter, alertmanager, system alerts, disk space alert, node down alert, infrastructure monitoring, devops alerts">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://your-domain.com/loki/host_alert_rules.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-domain.com/loki/host_alert_rules.html">
    <meta property="og:title" content="Prometheus Host Alert Rules - Define and Manage Host Monitoring Alerts">
    <meta property="og:description" content="Configure and manage Prometheus host alert rules for effective monitoring. Learn to define alerts for node down, low disk space, and more with clear annotations and labels.">
    <meta property="og:image" content="https://your-domain.com/path/to/your/og-image.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://your-domain.com/loki/host_alert_rules.html">
    <meta name="twitter:title" content="Prometheus Host Alert Rules - Define and Manage Host Monitoring Alerts">
    <meta name="twitter:description" content="Configure and manage Prometheus host alert rules for effective monitoring. Learn to define alerts for node down, low disk space, and more with clear annotations and labels.">
    <meta name="twitter:image" content="https://your-domain.com/path/to/your/twitter-image.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.8em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
            margin-top: 24px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
        .tool-description {
            margin-bottom: 30px;
            font-size: 1.1em;
            color: #333;
        }
        .external-links {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        .external-links h3 {
            margin-top: 0;
            border-bottom: none;
        }
        .external-links ul {
            list-style: disc;
            padding-left: 20px;
        }
        .external-links li {
            margin-bottom: 8px;
        }
        .external-links a {
            color: #007bff;
            text-decoration: none;
        }
        .external-links a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Prometheus Host Alert Rules</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <p class="tool-description">
                    This document outlines example Prometheus alert rules for monitoring host systems, primarily using the node_exporter. These rules are designed to detect critical issues such as nodes being down or running critically low on disk space. By defining these alert rules, teams can proactively manage their infrastructure, ensuring high availability and performance. The configuration includes essential labels and annotations to provide context for alerts, aiding in faster diagnosis and resolution.
                </p>

                <h2>Node Down Alert Rule</h2>
                <p>
                    This rule triggers an alert when a node exporter instance is unreachable for a specified duration, indicating a potential host outage.
                </p>
                <pre><code class="language-yaml">  - alert: node_down
    expr: up{job="node-exporter"} == 0
    for: 1m
    labels:
      severity: warning
      environment: prod
      alert_target: "{{ $labels.host }}"
    annotations:
      summary: "Job {{ $labels.job }} is down on {{ $labels.instance }}"
      description: "Failed to scrape {{ $labels.job }} on {{ $labels.instance }} for more than 1 minute. Node might be down."
      impact: "Any metrics from {{ $labels.job }} on {{ $labels.instance }} will be missing"
      action: "Check on {{ $labels.instance }} if {{ $labels.job }} is running"
      dashboard: http://grafana.localdns.xyz/d/pjhLJOzmk/infrastructure-hosts-stats
      runbook: http://wiki.localdns.xyz
      priority: P2
</code></pre>

                <h2>Low Disk Space Alert Rule</h2>
                <p>
                    This rule detects when the available disk space on a host's root mount point falls below a critical threshold, signaling an impending storage issue.
                </p>
                <pre><code class="language-yaml">  - alert: debug_instance_hard_disk_low
    expr: (node_filesystem_avail_bytes{mountpoint="/"}  * 100) / node_filesystem_size_bytes{mountpoint="/"} &lt; 20
    for: 1m
    labels:
      severity: warning
      alert_channel: notifications
      environment: prod
      team: devops
      aws_region: eu-west-1
    annotations:
      title: "[TEST] Disk Usage is Low in {{ $labels.instance }}"
      description: "Instance {{ $labels.instance }} has less than {{ humanize $value}}% available on mount {{ $labels.mountpoint }} "
      summary: "Low Disk Space Available"
      dashboard: http://grafana.localdns.xyz/d/pjhLJOzmk/infrastructure-hosts-stats
      runbook: http://wiki.localdns.xyz
</code></pre>

                <div class="external-links">
                    <h3>Related Resources</h3>
                    <ul>
                        <li><a href="https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/" target="_blank" rel="noopener noreferrer">Prometheus Alerting Rules Documentation</a></li>
                        <li><a href="https://github.com/prometheus-community/node-exporter" target="_blank" rel="noopener noreferrer">Node Exporter GitHub Repository</a></li>
                        <li><a href="https://prometheus.io/docs/alerting/latest/configuration/" target="_blank" rel="noopener noreferrer">Alertmanager Configuration Guide</a></li>
                        <li><a href="https://awesome-prometheus-alerts.grep.to/" target="_blank" rel="noopener noreferrer">Awesome Prometheus Alerts</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>