<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elasticsearch Cheatsheet - Essential cURL Commands & API Usage</title>
    <meta name="description" content="Master Elasticsearch with this comprehensive cheatsheet. Learn essential cURL commands for cluster health, index management, data ingestion, search, reindexing, snapshots, and more.">
    <meta name="keywords" content="elasticsearch, cheatsheet, curl, api, cluster health, index management, data ingestion, search, reindex, snapshots, restore, tasks api, elasticsearch commands">
    <link rel="canonical" href="https://yourdomain.com/elasticsearch/elasticsearch.html">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="Elasticsearch Cheatsheet - Essential cURL Commands & API Usage">
    <meta property="og:description" content="Master Elasticsearch with this comprehensive cheatsheet. Learn essential cURL commands for cluster health, index management, data ingestion, search, reindexing, snapshots, and more.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://yourdomain.com/elasticsearch/elasticsearch.html">
    <meta property="og:image" content="https://yourdomain.com/path/to/elasticsearch-og-image.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Elasticsearch Cheatsheet - Essential cURL Commands & API Usage">
    <meta name="twitter:description" content="Master Elasticsearch with this comprehensive cheatsheet. Learn essential cURL commands for cluster health, index management, data ingestion, search, reindexing, snapshots, and more.">
    <meta name="twitter:image" content="https://yourdomain.com/path/to/elasticsearch-twitter-image.jpg">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Elasticsearch Cheatsheet</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <h2>Elasticsearch Cheatsheet</h2>
                <ul>
                    <li><a href="#using-curl">Using cURL</a></li>
                    <li><a href="#health-with-curl">Cluster Health</a></li>
                    <li><a href="#view-indices">View Indices</a></li>
                    <li><a href="#create-index">Create Index</a></li>
                    <li><a href="#ingest-data">Ingest Data</a></li>
                    <li><a href="#search">Search</a>
                        <ul>
                            <li><a href="#using-the-search-api">Using the Search API</a></li>
                        </ul>
                    </li>
                    <li><a href="#reindex-using-curl">Reindex</a></li>
                    <li><a href="#update-replicas-curl">Update Replica Shards</a></li>
                    <li><a href="#delete">Delete</a></li>
                    <li><a href="#snapshots-with-curl">Snapshots</a></li>
                    <li><a href="#restore-snapshots-with-curl">Restore Snapshots</a></li>
                    <li><a href="#tasks">Tasks API</a></li>
                    <li><a href="python-elasticsearch.md#python-library">Using Python</a></li>
                    <li><a href="python-elasticsearch.md#ingest-using-python">Ingest using Python</a></li>
                </ul>

                <h2>Using cURL</h2>

                <h3>Cluster Health</h3>
                <p>View the cluster health on a cluster level:</p>
                <pre><code class="language-bash">$ curl -s -XGET "http://127.0.0.1:9200/_cluster/health?pretty"</code></pre>

                <p>View the cluster health on an index level:</p>
                <pre><code class="language-bash">$ curl -XGET "http://127.0.0.1:9200/_cluster/health?level=indices&amp;pretty"</code></pre>

                <p>Check all indices in yellow status:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_cat/indices?v&amp;health=yellow'</code></pre>

                <p>View recovery process:</p>
                <pre><code class="language-bash">curl -s -XGET 'http://127.0.0.1:9200/_cat/recovery?detailed&amp;h=index,stage,time,bytes_percent'</code></pre>

                <h3>View Indices</h3>
                <p>View all your indices:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_cat/indices?v'</code></pre>

                <p>View all indices from 2019.05:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_cat/indices/*2019.05*?v'</code></pre>

                <p>View all your indices, sort by size:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_cat/indices?v&amp;s=pri.store.size'</code></pre>

                <p>View all indices, but return only the index.name value:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_cat/indices?v&amp;h=index'</code></pre>

                <h3>Create Index</h3>
                <p>Create an Index:</p>
                <pre><code class="language-bash">$ curl -XPOST -H "Content-Type: application/json" "http://localhost:9200/my-test-index"</code></pre>

                <p>Create an Index with 5 Primary Shards, 1 Replica Shard and Refresh Interval of 30 seconds:</p>
                <pre><code class="language-bash">$ curl -XPUT -H "Content-Type: application/json" \
  http://localhost:9200/my-foobar-index \
  -d '{&quot;index&quot;: {&quot;number_of_shards&quot;:&quot;5&quot;,&quot;number_of_replicas&quot;: 1, &quot;refresh_interval&quot;: &quot;30s&quot;}}'</code></pre>

                <p>If you want to manually refresh your index to see the data:</p>
                <pre><code class="language-bash">$ curl -XPOST -H "Content-Type: application/json" "http://localhost:9200/my-foobar-index/_refresh"</code></pre>

                <h3>Update Index Settings</h3>
                <p>Documentation:
                    - <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-update-settings.html">Update Settings API</a>
                </p>
                <p>View the index settings:</p>
                <pre><code class="language-bash">$ curl -XGET -H "Content-Type: application/json" "http://127.0.0.1:9200/my-foobar-index/_settings?pretty"</code></pre>

                <p>Update the settings, disable refresh for example:</p>
                <pre><code class="language-bash">$ curl -XPUT -H "Content-Type: application/json" "http://127.0.0.1:9200/my-foobar-index/_settings" -d '{&quot;index&quot;: {&quot;refresh_interval&quot;: &quot;-1&quot;}}'</code></pre>

                <h3>Ingest Data</h3>
                <p>Ingesting data is a fundamental operation in Elasticsearch. You can use the Bulk API for efficient ingestion of multiple documents. For single documents, the Index API is used.</p>

                <h3>Search</h3>
                <p><strong>Searching with query parameters:</strong></p>
                <p>Name = Kevin</p>
                <pre><code class="language-bash">curl -XGET 'http://localhost:9200/myfirstindex/_search?q=name:kevin&amp;pretty'</code></pre>

                <p>Age &lt; 30</p>
                <pre><code class="language-bash">curl -XGET 'http://localhost:9200/myfirstindex/_search?q=age:&lt;30&amp;pretty'</code></pre>

                <p>Name = Michelle AND age &lt; 30</p>
                <pre><code class="language-bash">curl -XGET 'http://localhost:9200/myfirstindex/_search?q=name:michelle%20AND%20age:&lt;30&amp;pretty'</code></pre>

                <h4>Using the Search API</h4>
                <p>Search for the latest ingested document</p>
                <pre><code class="language-bash">curl -H 'content-type: application/json' -XPOST http://localhost:9200/myfirstindex/_search?pretty -d '{&quot;size&quot;: 1, &quot;sort&quot;: { &quot;@timestamp&quot;: &quot;desc&quot;}, &quot;query&quot;: {&quot;match_all&quot;: {} }}'</code></pre>

                <h3>Reindex using cURL</h3>
                <p>Reindex source index to target index:</p>
                <pre><code class="language-bash">$ curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_reindex' -d '
                  {
                    "source": {
                      "index": ["my-metrics-2019.01.03"]
                    },
                    "dest": {
                      "index": "archived-metrics-2019.01.03"
                    }
                }'</code></pre>

                <p>Reindex multiple source indices to one target index:</p>
                <pre><code class="language-bash">$ curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_reindex' -d '
                  {
                    "source": {
                      "index": ["my-metrics-2019.01.03", "my-metrics-2019.01.04"]
                    },
                    "dest": {
                      "index": "archived-metrics-2019.01"
                    }
                }'</code></pre>

                <p>Reindex only missing documents from source to target index. You will receive conflicts for existing documents, but the proceed value will ignore the conflicts.</p>
                <pre><code class="language-bash">$ curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_reindex' -d '
                  {
                    "conflicts": "proceed",
                    "source": {
                      "index": ["my-metrics-2019.01.03"]
                    },
                    "dest": {
                      "index": "archived-metrics-2019.01.03",
                      "op_type": "create"
                    }
                }'</code></pre>

                <p>Reindex filtered data to a target index, by using a query:</p>
                <pre><code class="language-bash">$ curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_reindex' -d '
                  {
                    "source": {
                      "index": "my-metrics-2019.01.03",
                      "type": "log",
                      "query": {
                        "term": {
                          "status": "ERROR"
                        }
                      }
                    },
                    "dest": {
                      "index": "archived-error-metrics-2019.01.03"
                    }
                }'</code></pre>

                <p>Reindex the last 500 documents based on timestamp to a target index:</p>
                <pre><code class="language-bash">$ curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_reindex' -d '
                  {
                    "size": 500,
                    "source": {
                      "index": "my-metrics-2019.01.03",
                      "sort": {
                        "timestamp": "desc"
                      }
                    },
                    "dest": {
                      "index": "archived-last500-metrics-2019.01.03",
                      "op_type": "create"
                    }
                }'</code></pre>

                <p>Reindex only specific fields to a target index:</p>
                <pre><code class="language-bash">$ curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_reindex' -d '
                  {
                    "source": {
                      "index": "my-metrics-2019.01.03",
                      "_source": [
                        "response_code",
                        "request_method",
                        "referral"
                      ]
                    },
                    "dest": {
                      "index": "archived-subset-metrics-2019.01.03"
                    }
                }'</code></pre>

                <h3>Update Replicas Curl</h3>
                <p>Increase/Decrease the number of Replica Shards using the Settings API:</p>
                <pre><code class="language-bash">curl -XPUT -H 'Content-Type: application/json' 'http://127.0.0.1:9200/my-index-2018.12.31/_settings' \
  -d '{"index": {"number_of_replicas": 1, "refresh_interval": "30s"}}'</code></pre>

                <h3>Delete</h3>
                <p>References:</p>
                <ul>
                    <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete.html">Delete API</a></li>
                    <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.6/docs-delete-by-query.html">Delete by Query</a></li>
                </ul>

                <h3>Delete Index:</h3>
                <pre><code class="language-bash">$ curl -XDELETE http://127.0.0.1:9200/my-index-2018.12.31</code></pre>

                <h3>Delete Documents on Query:</h3>
                <p>We would like to delete all documents that has <code>"os_name": "Windows 10"</code></p>
                <pre><code class="language-bash">curl -XPOST 'http://elasticsearch:9200/weblogs/_delete_by_query?pretty' -d '
                {
                  "query": {
                    "match": {
                      "os_name": "Windows 10"
                    }
                  }
                }'</code></pre>

                <p>If routing is provided, then the routing is copied to the scroll query, limiting the process to the shards that match that routing value:</p>
                <pre><code class="language-bash">$ curl -XPOST 'http://elasticsearch:9200/people/_delete_by_query?routing=1
                {
                  "query": {
                    "range" : {
                        "age" : {
                           "gte" : 10
                        }
                    }
                  }
                }'</code></pre>

                <p>By default _delete_by_query uses scroll batches of 1000. You can change the batch size with the scroll_size URL parameter:</p>
                <pre><code class="language-bash">$ curl -XPOST 'http://elasticsearch:9200/weblogs/_delete_by_query?scroll_size=5000
                {
                  "query": {
                    "term": {
                      "category": "docker"
                    }
                  }
                }'</code></pre>

                <h3>Snapshots with cURL</h3>
                <p>View snapshot repositories:</p>
                <pre><code class="language-bash">curl -s -XGET 'http://127.0.0.1:9200/_snapshot?format=json'</code></pre>
                <p>Example output: <code>{"cs-automated":{"type":"s3"},"es-index-backups":{"type":"s3"...</code></p>

                <p>View snapshots under repository (table view):</p>
                <pre><code class="language-bash">curl -s -XGET 'http://127.0.0.1:9200/_cat/snapshots/index-backups?v'</code></pre>
                <p>Example output: <code>id, status, start_epoch, start_time, end_epoch, end_time, duration, indices, successful_shards, failed_shards, total_shards snapshot_2019.05.23 SUCCESS ..</code></p>

                <p>View snapshots under repository (json view):</p>
                <pre><code class="language-bash">curl -s -XGET 'http://127.0.0.1:9200/_cat/snapshots/es-index-backups?format=json'</code></pre>
                <p>Example output: <code>[{"id":"snapshot_2019.05.23","status":"SUCCESS"....</code></p>

                <p>Create a snapshot with all indices and wait for completion:</p>
                <pre><code class="language-bash">curl -XPUT -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_snapshot/index-backups/my-es-snapshot-latest?wait_for_completion=true'</code></pre>

                <p>View snapshot status:</p>
                <pre><code class="language-bash">curl -s -XGET 'http://127.0.0.1:9200/_cat/tasks?detailed'</code></pre>
                <p>Example output: <code>cluster:admin/snapshot/create ..</code></p>

                <p>View snapshot info:</p>
                <pre><code class="language-bash">curl -s 'http://127.0.0.1:9200/_snapshot/es-index-backups/my-es-snapshot-latest' | jq .</code></pre>

                <h3>Restore Snapshots with cURL</h3>
                <p>Restore with original names:</p>
                <pre><code class="language-bash">curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_snapshot/es-index-backups/test-snapshot-latest/_restore' -d '
                {
                  "indices": [
                    "kibana_sample_data_ecommerce", "kibana_sample_data_logs"
                  ],
                  "ignore_unavailable": false,
                  "include_global_state": false
                }'</code></pre>
                <p>Verify restored indices:</p>
                <pre><code class="language-bash">curl 'http://127.0.0.1:9200/_cat/indices/kibana_sample*?v'
                health status index
                green  open   kibana_sample_data_logs
                green  open   kibana_sample_data_ecommerce</code></pre>

                <p>Restore and rename:</p>
                <pre><code class="language-bash">curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_snapshot/es-index-backups/test-snapshot-latest/_restore' -d '
                {
                  "indices": [
                    "kibana_sample_data_ecommerce", "kibana_sample_data_logs"
                  ],
                  "ignore_unavailable": false,
                  "include_global_state": false,
                  "rename_pattern": "(.+)",
                  "rename_replacement": "restored_index_$1"
                }'</code></pre>
                <p>Verify renamed indices:</p>
                <pre><code class="language-bash">curl 'http://127.0.0.1:9200/_cat/indices/*restored*?v'
                health status index
                green  open   restored_index_kibana_sample_data_ecommerce
                green  open   restored_index_kibana_sample_data_logs</code></pre>

                <p>Restore and rename with a different name pattern:</p>
                <pre><code class="language-bash">curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_snapshot/es-index-backups/test-snapshot-latest/_restore' -d '
                {
                  "indices": [
                    "kibana_sample_data_ecommerce", "kibana_sample_data_logs"
                  ],
                  "ignore_unavailable": false,
                  "include_global_state": false,
                  "rename_pattern":
                  "kibana_sample_data_(.+)",
                  "rename_replacement": "restored_index_$1"
                }'</code></pre>
                <p>Verify renamed indices with new pattern:</p>
                <pre><code class="language-bash">curl 'http://127.0.0.1:9200/_cat/indices/*restored*?v'
                health status index
                green  open   restored_index_ecommerce
                green  open   restored_index_logs</code></pre>

                <h3>Tasks</h3>
                <p>View tasks in table format:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_cat/tasks?v&amp;detailed'</code></pre>
                <p>Example output: <code>action, task_id, parent_task_id, type, start_time, timestamp, running_time, ip, node, description cluster:monitor/nodes/stats, DzSOmlH3RRaLGA33QJl3Bg:137161492, -, transport, 1566542180463, 23:36:20, 1.1s, x.x.x.x, DzSOmlH, cluster:monitor/nodes/stats[n], C50akcLqScuJDwLx2nk9UA:95915234, DzSOmlH3RRaLGA33QJl3Bg:137161492, netty, 1566542180464, 23:36:20, 1.1s, x.x.x.x, C50akcL, indices:data/write/bulk, yZXq8fZWRjiurCvtO7tSpQ:92155276, -, transport, 1566542181565, 23:36:21, 23ms, x.x.x.x, yZXq8fZ, requests[83], indices[logstash-logs-2019.08]</code></p>

                <p>View tasks in json format:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_tasks?detailed&amp;format=json'</code></pre>
                <p>Example output: <code>{"nodes":{"xx":{"name":"xx","roles":["data","ingest"],"tasks":{"xx:xx":{"node":"xx","id":xx,"type":"transport","action":"cluster:monitor/nodes/stats"</code></p>

                <p>View tasks in json format and pretty print:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_tasks?detailed&amp;pretty&amp;format=json'</code></pre>
                <p>Example output: <code>{ "nodes" : { "xx" : { "name" : "xx", "roles" : [ "data", "ingest" ],</code></p>

                <p>View all tasks relating to snapshots being created:</p>
                <pre><code class="language-bash">$ curl -s -XGET 'http://127.0.0.1:9200/_tasks?detailed=true&amp;pretty&amp;actions=cluster:admin/snapshot/create'</code></pre>

                <p>View all tasks relating to write actions:</p>
                <pre><code class="language-bash">$ curl -s -XGET "http://127.0.0.1:9200/_tasks?detailed=true&amp;pretty&amp;actions=indices:*/write*"</code></pre>
                <p>Example output: <code>{ "nodes" : { "DzSOmlH3RRaLGA33QJl3Bg" : { "name" : "xx", "roles" : [ "data", "ingest" ], "tasks" : { "nodeX:idY" : { "node" : "nodeX", "id" : idY, "type" : "netty", "action" : "indices:data/write/bulk[s]", "status" : { "phase" : "waiting_on_primary" }, "description" : "requests[5], index[logstash-logs-2019.08]", "start_time_in_millis" : 1566542804806, "running_time_in_nanos" : 65730, "cancellable" : false, "parent_task_id" : "nodeA:idZ", "headers" : { } } } },</code></p>

                <p>Create a Task (e.g., asynchronous reindex):</p>
                <pre><code class="language-bash">$ curl -XPOST -H 'Content-Type: application/json' 'http://127.0.0.1:9200/_reindex?wait_for_completion=false' -d '{"source": {"index": "metricbeat-2019.*"}, "dest": {"index": "metricbeat-2019"}}'</code></pre>
                <p>Example output: <code>{"task":"-thJvCFgQlusd2vVFZGOfg:26962"}</code></p>

                <p>View Task Status by TaskId:</p>
                <pre><code class="language-bash">$ curl http://localhost:9200/_tasks/-thJvCFgQlusd2vVFZGOfg:26962?pretty</code></pre>
                <p>Example output: <code>{ "completed" : true, "task" : { "node" : "-thJvCFgQlusd2vVFZGOfg", "id" : 26962, "type" : "transport", "action" : "indices:data/write/reindex", ... } }</code></p>

                <p>Some of the other common actions include:</p>
                <ul>
                    <li><code>"action" : "cluster:monitor/tasks/lists"</code></li>
                    <li><code>"action" : "cluster:monitor/nodes/stats"</code></li>
                    <li><code>"action" : "cluster:admin/snapshot/create"</code></li>
                    <li><code>"action" : "internal:cluster/snapshot/update_snapshot_status"</code></li>
                    <li><code>"action" : "indices:data/read/search"</code> - (context of query)</li>
                    <li><code>"action" : "indices:data/read/msearch"</code></li>
                    <li><code>"action" : "indices:data/write/bulk"</code></li>
                </ul>

                <h3>External Resources</h3>
                <ul>
                    <li><a href="http://elasticsearch-cheatsheet.jolicode.com/">Elasticsearch Cheatsheet by Jolicode</a></li>
                    <li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html">Official Elasticsearch Documentation</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods">HTTP Methods Reference</a></li>
                </ul>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>