<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pvmove Command - LVM Physical Volume Move Utility</title>
    <meta name="description" content="Learn how to use the pvmove command to move physical extents between LVM physical volumes. This guide covers basic and advanced pvmove operations with examples.">
    <meta name="keywords" content="pvmove, LVM, Linux, physical volume, move extents, logical volume management, command line, sysadmin, devops, pvmove examples, pvmove command, LVM pvmove">
    <link rel="canonical" href="https://yourdomain.com/cmd/pvmove.html">
    <meta name="robots" content="index, follow">
    <meta property="og:title" content="pvmove Command - LVM Physical Volume Move Utility">
    <meta property="og:description" content="Learn how to use the pvmove command to move physical extents between LVM physical volumes. This guide covers basic and advanced pvmove operations with examples.">
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://yourdomain.com/cmd/pvmove.html">
    <meta property="og:image" content="https://yourdomain.com/images/pvmove-og.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="pvmove Command - LVM Physical Volume Move Utility">
    <meta name="twitter:description" content="Learn how to use the pvmove command to move physical extents between LVM physical volumes. This guide covers basic and advanced pvmove operations with examples.">
    <meta name="twitter:image" content="https://yourdomain.com/images/pvmove-twitter.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>pvmove Command - LVM Physical Volume Move Utility</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <p>The <code>pvmove</code> command is a powerful utility within the Logical Volume Manager (LVM) suite in Linux. Its primary function is to move physical extents (PEs) from one physical volume (PV) to another. This is crucial for tasks such as rebalancing storage, migrating data to new disks, or freeing up space on a specific physical volume without interrupting service.</p>

                <h2>Understanding pvmove Operations</h2>
                <p><code>pvmove</code> allows for flexible data migration. You can move all extents from a source PV to a destination PV, or selectively move extents associated with specific logical volumes. The command can also be used to redistribute data across available physical volumes in a volume group to optimize performance and utilization.</p>

                <h2>Key pvmove Command Examples</h2>
                <p>Here are some common use cases for the <code>pvmove</code> command:</p>

                <h3>Moving All Physical Extents</h3>
                <p>To move all physical extents from one physical volume (e.g., <code>/dev/sdX</code>) to another (e.g., <code>/dev/sdY</code>), you would use the following syntax:</p>
                <pre><code class="language-bash">pvmove /dev/sdX /dev/sdY</code></pre>

                <h3>Moving Specific Logical Volumes</h3>
                <p>You can specify which logical volumes' extents to move. The <code>--alloc anywhere</code> option ensures that extents are allocated anywhere on the destination PV if the exact location is not specified. This example moves extents for a logical volume named <code>vgname-lvname</code> from <code>/dev/sdX</code> to <code>/dev/sdY</code>:</p>
                <pre><code class="language-bash">pvmove --alloc anywhere /dev/sdX:/dev/sdY /dev/mapper/vgname-lvname</code></pre>

                <h3>Verbose Output for Monitoring</h3>
                <p>For detailed progress and information during the move operation, use the <code>-v</code> (verbose) flag:</p>
                <pre><code class="language-bash">pvmove -v /dev/sdX</code></pre>

                <h3>Handling Uninitialized Physical Volumes</h3>
                <p>In scenarios where you might be dealing with physical volumes that have not been fully initialized or have skipped cluster configurations, you can use the <code>--ignoreskippedcluster</code> option:</p>
                <pre><code class="language-bash">pvmove --ignoreskippedcluster /dev/sdX /dev/sdY</code></pre>

                <h3>Moving Extents from a Volume Group Device</h3>
                <p>You can also initiate a move operation for extents belonging to any device within a specific volume group to a designated device:</p>
                <pre><code class="language-bash">pvmove --alloc anywhere /dev/md0</code></pre>

                <h3>Atomic Moves and Specific Ranges</h3>
                <p>The <code>--atomic</code> option ensures that the move operation is performed atomically, meaning it either completes successfully or is rolled back, preventing data corruption. You can also specify particular physical volume names and their corresponding physical extent ranges:</p>
                <pre><code class="language-bash">pvmove --atomic pvname[:pe_ranges] [destpv[:pe_ranges] [movedevice[:pe_ranges]]]</code></pre>

                <h3>Aborting an In-Progress Operation</h3>
                <p>If you need to stop a <code>pvmove</code> operation that is currently running, you can use the <code>--abort</code> flag:</p>
                <pre><code class="language-bash">pvmove --abort</code></pre>

                <h2>Further Resources</h2>
                <ul>
                    <li><a href="https://man7.org/linux/man-pages/man8/pvmove.8.html" target="_blank" rel="noopener noreferrer">LVM pvmove Man Page</a></li>
                    <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/managing_logical_volume_management/index" target="_blank" rel="noopener noreferrer">Red Hat Enterprise Linux LVM Documentation</a></li>
                    <li><a href="https://www.kernel.org/doc/html/latest/admin-guide/devices.html" target="_blank" rel="noopener noreferrer">Linux Device Drivers</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>