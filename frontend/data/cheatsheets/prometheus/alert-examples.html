<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prometheus Alert Examples - HTTP Request Monitoring</title>
    <meta name="description" content="Explore Prometheus alert examples for monitoring HTTP requests, including 5xx error rates, total errors, and request latencies. Learn to track service performance and identify issues.">
    <meta name="keywords" content="prometheus, alerts, http requests, 5xx errors, request latency, monitoring, service monitoring, prometheus examples, promql, error rate">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://your-domain.com/prometheus/alert-examples.html">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://your-domain.com/prometheus/alert-examples.html">
    <meta property="og:title" content="Prometheus Alert Examples - HTTP Request Monitoring">
    <meta property="og:description" content="Explore Prometheus alert examples for monitoring HTTP requests, including 5xx error rates, total errors, and request latencies. Learn to track service performance and identify issues.">
    <meta property="og:image" content="https://your-domain.com/path/to/your/og-image.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://your-domain.com/prometheus/alert-examples.html">
    <meta name="twitter:title" content="Prometheus Alert Examples - HTTP Request Monitoring">
    <meta name="twitter:description" content="Explore Prometheus alert examples for monitoring HTTP requests, including 5xx error rates, total errors, and request latencies. Learn to track service performance and identify issues.">
    <meta name="twitter:image" content="https://your-domain.com/path/to/your/twitter-image.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Prometheus Alert Examples</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
                <h2>HTTP Request Monitoring Alerts</h2>
                <p>This section provides example Prometheus alerts for monitoring HTTP requests. Effective monitoring of HTTP traffic is crucial for understanding application performance, identifying errors, and ensuring a smooth user experience. These examples focus on key metrics like error rates and request latencies.</p>

                <h3>5xx Error Rate Alerts</h3>
                <p>Alerts for 5xx errors are vital for detecting server-side issues that prevent requests from being fulfilled. The following PromQL query calculates the average rate per second of 5xx errors during a minute, aggregated by service, pod, and URI. This helps pinpoint specific components experiencing failures.</p>
                <pre><code class="language-promql">sum(rate(http_server_requests_seconds_count{status=~"5[0-9][0-9]"}[1m])) by (service, pod, uri)</code></pre>

                <p>To understand the total volume of 5xx errors, you can multiply the rate by 60 to get the count per minute for each group:</p>
                <pre><code class="language-promql">sum(rate(http_server_requests_seconds_count{status=~"5[0-9][0-9]"}[1m])) by (service, pod, uri) * 60</code></pre>

                <h3>Request Latency Monitoring</h3>
                <p>Monitoring request latency is essential for assessing the responsiveness of your services. The following query calculates the average response time for HTTP requests across different status codes (2xx, 4xx, 5xx), grouped by service and URI. This helps identify performance bottlenecks.</p>
                <pre><code class="language-promql">sum by (service, uri) (
    rate(http_server_requests_seconds_sum{status=~"[2-5][0-9][0-9]", service=~".*"}[1m])
    /
    rate(http_server_requests_seconds_count{status=~"[2-5][0-9][0-9]", service=~".*"}[1m])
)</code></pre>

                <p>To get the total seconds spent on requests within the last minute, you can multiply the average response time by the total number of requests in that minute:</p>
                <pre><code class="language-promql">sum by (service, uri) (
    rate(http_server_requests_seconds_sum{status=~"[2-5][0-9][0-9]", service=~".*"}[1m])
    /
    rate(http_server_requests_seconds_count{status=~"[2-5][0-9][0-9]", service=~".*"}[1m])
) * 60</code></pre>

                <h3>Further Resources</h3>
                <ul>
                    <li><a href="https://prometheus.io/docs/introduction/overview/" target="_blank" rel="noopener noreferrer">Prometheus Official Documentation</a></li>
                    <li><a href="https://grafana.com/docs/grafana/latest/alerting/" target="_blank" rel="noopener noreferrer">Grafana Alerting Documentation</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status" target="_blank" rel="noopener noreferrer">MDN HTTP Status Codes</a></li>
                </ul>
            </div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>