<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bitcoin JSON-RPC with Curl - Interact with Bitcoin Node</title>
    <meta name="description" content="Learn how to use Bitcoin JSON-RPC with Curl to interact with your Bitcoin node. Get uptime, blockchain info, manage wallets, and more.">
    <meta name="keywords" content="Bitcoin, JSON-RPC, Curl, Bitcoin Node, Blockchain, Wallet, Transactions, API">
    <meta name="author" content="Hexmos">
    <link rel="canonical" href="https://example.com/bitcoin/curl.html">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://example.com/bitcoin/curl.html">
    <meta property="og:title" content="Bitcoin JSON-RPC with Curl - Interact with Bitcoin Node">
    <meta property="og:description" content="Learn how to use Bitcoin JSON-RPC with Curl to interact with your Bitcoin node. Get uptime, blockchain info, manage wallets, and more.">
    <meta property="og:image" content="https://example.com/images/bitcoin-curl-banner.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://example.com/bitcoin/curl.html">
    <meta property="twitter:title" content="Bitcoin JSON-RPC with Curl - Interact with Bitcoin Node">
    <meta property="twitter:description" content="Learn how to use Bitcoin JSON-RPC with Curl to interact with your Bitcoin node. Get uptime, blockchain info, manage wallets, and more.">
    <meta property="twitter:image" content="https://example.com/images/bitcoin-curl-banner.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Bitcoin JSON RPC Usage</h1>
        </div>
        <div class="content">
            <div class="markdown-content">
<h2>Understanding JSON RPC for Bitcoin</h2>
<p>This guide demonstrates how to use JSON-RPC with <code>curl</code> to interact with your Bitcoin node on the testnet chain. JSON-RPC is a powerful tool for querying and managing your Bitcoin node, allowing you to retrieve blockchain information, manage wallets, and send transactions.</p>

<h3>Pre-Checks</h3>
<p>If you installed the node with this <a href="#">script</a>, your config would be in <code>/etc/bitcoin/bitcoin.conf</code>. Retrieve your username and password using:</p>
<pre class="codehilite"><code>cat /etc/bitcoin/bitcoin.conf | grep -E '(rpcuser|rpcpassword)'
# rpcuser=rpcuser
# rpcpassword=9a4e9cfac082721e870575a7c66178c0421512032a6d62af
</code></pre>

<p>Set temporary environment variables for this guide:</p>
<pre class="codehilite"><code class="language-bash">export rpcuser=rpcuser
export rpcpass=9a4e9cfac082721e870575a7c66178c0421512032a6d62af
</code></pre>

<p>For other guides see:
- x</p>

<h3>Checking Node Uptime</h3>
<p>To check the uptime of your Bitcoin node in seconds:</p>
<pre class="codehilite"><code>$ curl -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "uptime", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/
{"result":60501,"error":null,"id":"curl"}
</code></pre>

<h3>Retrieving RPC Info</h3>
<p>The <a href="https://chainquery.com/bitcoin-cli/getrpcinfo">rpcinfo</a> RPC returns runtime details of the RPC server, including active commands and their running time.</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getrpcinfo", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/ | python -m json.tool
{
    "error": null,
    "id": "curl",
    "result": {
        "active_commands": [
            {
                "duration": 133,
                "method": "getrpcinfo"
            }
        ],
        "logpath": "/home/bitcoin/.bitcoin/testnet3/debug.log"
    }
}
</code></pre>

<h3>Getting Blockchain Info</h3>
<ul>
<li><code>getblockchaininfo</code></li>
</ul>
<p>The <a href="https://chainquery.com/bitcoin-cli/getblockchaininfo">getblockchaininfo</a> RPC provides information about the current state of the block chain.</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getblockchaininfo", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/ | python -m json.tool
{
    "error": null,
    "id": "curl",
    "result": {
        "automatic_pruning": true,
        "bestblockhash": "000000000000003b5744e67b7f2a30634b98077055a58ff6b2eb1c160eb44a9e",
        "blocks": 1383644,
        "chain": "test",
        "chainwork": "000000000000000000000000000000000000000000000096db9d07fd29e70db2",
        "difficulty": 48174374.44122773,
        "headers": 2006191,
        "initialblockdownload": true,
        "mediantime": 1534268709,
        "prune_target_size": 1048576000,
        "pruned": true,
        "pruneheight": 1382612,
        "size_on_disk": 911147899,
        "softforks": {
            "bip34": {
                "active": true,
                "height": 21111,
                "type": "buried"
            },
            "bip65": {
                "active": true,
                "height": 581885,
                "type": "buried"
            },
            "bip66": {
                "active": true,
                "height": 330776,
                "type": "buried"
            },
            "csv": {
                "active": true,
                "height": 770112,
                "type": "buried"
            },
            "segwit": {
                "active": true,
                "height": 834624,
                "type": "buried"
            },
            "taproot": {
                "active": false,
                "bip9": {
                    "min_activation_height": 0,
                    "since": 0,
                    "start_time": 1619222400,
                    "status": "defined",
                    "timeout": 1628640000
                },
                "type": "bip9"
            }
        },
        "verificationprogress": 0.508263107545056,
        "warnings": ""
    }
}
</code></pre>

<h3>Getting Block Count</h3>
<ul>
<li><code>getblockcount</code></li>
</ul>
<p>To get the number of blocks in the longest block chain:</p>
<pre class="codehilite"><code class="language-bash">curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getblockcount", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/ | python3 -m json.tool
{
    "result": 2391641,
    "error": null,
    "id": "curl"
}
</code></pre>

<h3>Getting Block Hash</h3>
<ul>
<li><code>getblockhash</code></li>
</ul>
<p>Return the hash of block in best-block-chain at (index x):</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getblockhash", "params": [2391641]}' -H 'content-type: text/plain;' http://127.0.0.1:18332/ | python3 -m json.tool
{
    "result": "eaaf8d4d27c5ce9b282e9ff870793382e14345436fac74ea40907320e50603db",
    "error": null,
    "id": "curl"
}
</code></pre>

<h3>Getting Block</h3>
<ul>
<li><code>getblock</code></li>
</ul>
<p>Returns information about the block with the given hash:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getblock", "params": ["eaaf8d4d27c5ce9b282e9ff870793382e14345436fac74ea40907320e50603db"]}' -H 'content-type: text/plain;' http://127.0.0.1:18332/ | python3 -m json.tool
{
    "result": {
        "hash": "eaaf8d4d27c5ce9b282e9ff870793382e14345436fac74ea40907320e50603db",
        "confirmations": 1,
        "strippedsize": 229,
        "size": 265,
        "weight": 952,
        "height": 2391641,
        "version": 536870912,
        "versionHex": "20000000",
        "merkleroot": "4e6a50298fb717f6356b53bf0f66fee77562c4c4d09dc0b454d0cf89168087bd",
        "tx": [
            "4e6a50298fb717f6356b53bf0f66fee77562c4c4d09dc0b454d0cf89168087bd"
        ],
        "time": 1673267350,
        "mediantime": 1673266113,
        "nonce": 32766,
        "bits": "1e0fffff",
        "difficulty": 0.0002441371325370145,
        "chainwork": "000000000000000000000000000000000000000000000000012191b962fdedf7",
        "nTx": 1,
        "previousblockhash": "9db4a06c9f7abbace253e3185eb6c65531a7b6bc520b8d52f11ea984dee8cc45"
    },
    "error": null,
    "id": "curl"
}
</code></pre>

<p>More info on these parameters:
- <a href="https://en.bitcoin.it/wiki/Original_Bitcoin_client/API_calls_list">Bitcoin API calls list</a></p>

<h3>Managing Logging</h3>
<ul>
<li><code>logging</code></li>
</ul>
<p>To view the status of logging:</p>
<pre class="codehilite"><code class="language-bash">curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "logging", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:8332/
</code></pre>

<p>To enable all logging categories:</p>
<pre class="codehilite"><code class="language-bash">curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "logging", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/
</code></pre>

<p>To enable categories, place it on the left side of the array, and to exclude on the right side of the array, to exclude only <code>libevent</code> for example:</p>
<pre class="codehilite"><code class="language-bash">curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "logging", "params": [["all"], ["libevent"]]}' -H 'content-type: text/plain;' http://127.0.0.1:18332/
</code></pre>

<p>To only enable only <code>net</code> and <code>rpc</code>:</p>
<pre class="codehilite"><code class="language-bash">curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "logging", "params": [["net", "rpc"], []]}' -H 'content-type: text/plain;' http://127.0.0.1:18332/
</code></pre>

<h3>Wallet Management</h3>
<ul>
<li><code>createwallet</code></li>
</ul>
<p>Create a wallet named <code>main</code>:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "createwallet", "params": ["main"]}' -H 'content-type: text/plain;' http://127.0.0.1:18332/
{"result":{"name":"main","warning":""},"error":null,"id":"curl"}
</code></pre>

<p>When we list our data directory we can see the files it created for the wallet:</p>
<pre class="codehilite"><code>sudo find /home/bitcoin/.bitcoin/ | grep main
/home/bitcoin/.bitcoin/testnet3/wallets/main
/home/bitcoin/.bitcoin/testnet3/wallets/main/wallet.dat
/home/bitcoin/.bitcoin/testnet3/wallets/main/db.log
/home/bitcoin/.bitcoin/testnet3/wallets/main/database
/home/bitcoin/.bitcoin/testnet3/wallets/main/database/log.0000000004
/home/bitcoin/.bitcoin/testnet3/wallets/main/database/log.0000000003
/home/bitcoin/.bitcoin/testnet3/wallets/main/.walletlock
</code></pre>

<h3>Listing Wallets</h3>
<ul>
<li><code>listwallets</code></li>
</ul>
<p>List our loaded wallets:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "listwallets", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/
{"result":["main"],"error":null,"id":"curl"}
</code></pre>

<h3>Getting New Address</h3>
<ul>
<li><code>getnewaddress</code></li>
</ul>
<p>Get a new address for our main wallet:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getnewaddress", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/wallet/main
{"result":"tb1qzxmefmcpq98z42v67a80gvug2fe979r5h768yv","error":null,"id":"curl"}
</code></pre>

<h3>Getting Addresses By Label</h3>
<ul>
<li><code>getaddressesbylabel</code></li>
</ul>
<p>List the wallet addresses for our wallet:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getaddressesbylabel", "params": [""]}' -H 'content-type: text/plain;' http://127.0.0.1:18332/wallet/main
{"result":{"tb1qzxmefmcpq98z42v67a80gvug2fe979r5h768yv":{"purpose":"receive"}},"error":null,"id":"curl"}
</code></pre>

<h3>Getting Address Info</h3>
<ul>
<li><code>getaddressinfo</code></li>
</ul>
<p>Get the address info for our wallet:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getaddressinfo", "params": ["tb1qzxmefmcpq98z42v67a80gvug2fe979r5h768yv"]}' -H 'content-type: text/plain;' http://127.0.0.1:18332/wallet/main | python -m json.tool
{
    "error": null,
    "id": "curl",
    "result": {
        "address": "tb1qzxmefmcpq98z42v67a80gvug2fe979r5h768yv",
        "desc": "wpkh([x/0'/0'/0']x)#k3fgqsxn",
        "hdkeypath": "m/0'/0'/0'",
        "hdmasterfingerprint": "x",
        "hdseedid": "x",
        "ischange": false,
        "ismine": true,
        "isscript": false,
        "iswatchonly": false,
        "iswitness": true,
        "labels": [
            ""
        ],
        "pubkey": "03a4xx",
        "scriptPubKey": "0014xx",
        "solvable": true,
        "timestamp": 1624551798,
        "witness_program": "11b7xx4",
        "witness_version": 0
    }
}
</code></pre>

<h3>Loading Wallets</h3>
<ul>
<li><code>loadwallet</code></li>
</ul>
<p>To load a unloaded wallet:</p>
<pre class="codehilite"><code class="language-bash">curl -s -u "${rpcuser}:${rpcpass}" --data-binary '{"jsonrpc": "1.0", "id": "curltest", "method": "loadwallet", "params": ["nonmain"]}' -H 'content-type: text/plain;' http://127.0.0.1:18332/
</code></pre>

<h3>Getting Wallet Info</h3>
<ul>
<li><code>getwalletinfo</code></li>
</ul>
<pre class="codehilite"><code class="language-bash">curl -u "bitcoinrpc:bitcoinpass" -d '{"jsonrpc": "1.0", "id": "curltest", "method": "getwalletinfo", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:8332/wallet/main
</code></pre>

<h3>Transaction Management</h3>
<p>If we list transactions for our wallet it should be empty:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "listtransactions", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/wallet/rpi01-main
{"result":[],"error":null,"id":"curl"}
</code></pre>

<p>Go to <a href="https://coinfaucet.eu/en/btc-testnet/">https://coinfaucet.eu/en/btc-testnet/</a> and send testnet btc to <code>tb1qzxmefmcpq98z42v67a80gvug2fe979r5h768yv</code>, once the transaction is submitted run the <code>listtransactions</code> method again.</p>
<p>Other faucets that you can try:
- <a href="https://testnet-faucet.mempool.co/">https://testnet-faucet.mempool.co/</a>
- <a href="https://coinfaucet.eu/en/btc-testnet/">https://coinfaucet.eu/en/btc-testnet/</a>
- <a href="https://bitcoinfaucet.uo1.net/">https://bitcoinfaucet.uo1.net/</a>
- <a href="https://onchain.io/bitcoin-testnet-faucet">https://onchain.io/bitcoin-testnet-faucet</a>
- <a href="https://testnet.qc.to/">https://testnet.qc.to/</a>
- <a href="https://tbtc.mocacinno.com/claim.php">https://tbtc.mocacinno.com/claim.php</a></p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "listtransactions", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/wallet/rpi01-main
{"result":[],"error":null,"id":"curl"}
</code></pre>

<p>As you can see theres still nothing, but to add at this moment in time, the IBD process is not completed yet:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getblockchaininfo", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/ | python -m json.tool | grep verificationprogress
        "verificationprogress": 0.57450649965558,
</code></pre>

<p>After some time we can look at the logs as one method to see how far the verification progress is:</p>
<pre class="codehilite"><code>journalctl -fu bitcoind
Jun 25 10:53:31 rpi-01 bitcoind[16198]: 2021-06-25T08:53:31Z UpdateTip: new best=00000000afb049b341ddf19d8080af6524a05f618abbf0ec51806dcef7bd5b9d height=2006268 version=0x20000000 log2_work=74.331879 tx=60315046 date='2021-06-25T08:55:11Z' progress=1.000000 cache=46.3MiB(298787txo)
</code></pre>

<p>And we can see its synced <code>progress=1.000000</code>, we can then also validate with:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getblockchaininfo", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/ | python -m json.tool | grep verificationprogress
        "verificationprogress": 0.9999985282659621,
</code></pre>

<p>Now we should be able to see our funds and we can run the <code>listtransactions</code> method:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "listtransactions", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/wallet/rpi01-main | python -m json.tool
{
    "error": null,
    "id": "curl",
    "result": [
        {
            "address": "tb1qzxmefmcpq98z42v67a80gvug2fe979r5h768yv",
            "amount": 0.01828492,
            "bip125-replaceable": "no",
            "blockhash": "0000000086003a9060e5743bfe0c7d81805a1948d6d5e326c5e3bb2f9ea83db7",
            "blockheight": 2006194,
            "blockindex": 8,
            "blocktime": 1624552612,
            "category": "receive",
            "confirmations": 75,
            "label": "",
            "time": 1624552612,
            "timereceived": 1624608999,
            "txid": "1635a05862e46a02306cfb9b5fd2f1f15a214a7227d29502550b40abdfe113d3",
            "vout": 1,
            "walletconflicts": []
        }
    ]
}
</code></pre>

<p>We can see the transaction, and because we are running a testnet chain, we need at least 1 confirmation, which we have 75 at the moment, so we should see the funds in our wallet:</p>
<pre class="codehilite"><code>curl -s -u "${rpcuser}:${rpcpass}" -d '{"jsonrpc": "1.0", "id": "curl", "method": "getbalance", "params": []}' -H 'content-type: text/plain;' http://127.0.0.1:18332/wallet/rpi01-main
{"result":0.01828492,"error":null,"id":"curl"}
</code></pre>

<p>We can also do a lookup on the <code>txid</code>, on a testnet blockchain explorer, like below:
- <a href="https://www.blockchain.com/btc-testnet/tx/1635a05862e46a02306cfb9b5fd2f1f15a214a7227d29502550b40abdfe113d3">https://www.blockchain.com/btc-testnet/tx/1635a05862e46a02306cfb9b5fd2f1f15a214a7227d29502550b40abdfe113d3</a></p>
<p>[WIP]</p>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>
