.PHONY: emoji-blob-to-files add-emoji-indexes verify-indexes optimize-order-by-indexes optimize-man-pages-indexes create_html_content drop_content_column categorize-urls add-see-also-column man-page-sub-category-extender insert-emojis

emoji-blob-to-files:
	@echo "ðŸ“¦ Extracting emoji images from database to public/emojis/..."
	@cd .. && python3 scripts/emojis/emoji_db_base64_to_files.py

add-emoji-indexes:
	@echo "ðŸ”§ Adding composite indexes for Apple and Discord images query optimization..."
	@cd .. && sqlite3 db/all_dbs/emoji-db-v4.db < scripts/emojis/add_apple_images_index.sql
	@echo "âœ… Indexes created!"

verify-indexes:
	@echo "ðŸ” Verifying and creating emoji indexes..."
	@cd .. && sqlite3 db/all_dbs/emoji-db-v4.db < scripts/emojis/verify_and_create_indexes.sql
	@echo "âœ… Index verification complete!"

optimize-order-by-indexes:
	@echo "ðŸ”§ Adding indexes to optimize ORDER BY performance..."
	@cd .. && sqlite3 db/all_dbs/emoji-db-v4.db < scripts/emojis/optimize_order_by_indexes.sql
	@echo "âœ… Order BY indexes created!"

optimize-man-pages-indexes:
	@echo "ðŸ”§ Adding indexes to optimize man pages queries..."
	@cd .. && sqlite3 db/all_dbs/man-pages-db-v4.db < scripts/man-pages/optimize_man_pages_indexes.sql
	@echo "âœ… Man pages indexes created!"

create_html_content:
	@echo "ðŸ”„ Creating HTML content column for man pages..."
	@cd .. && go run scripts/man-pages/create_html_content.go
	@echo "âœ… HTML content column created and populated!"

drop_content_column:
	@echo "ðŸ—‘ï¸  Dropping content column from man_pages table..."
	@cd .. && go run scripts/man-pages/drop_content_column.go
	@echo "âœ… Content column dropped!"

categorize-urls:
	@echo "ðŸ“Š Categorizing URLs from crawled_not_indexed.csv..."
	@cd .. && python3 scripts/categorize_urls.py

add-see-also-column:
	@echo "âž• Adding see_also column to all databases..."
	@cd .. && ./scripts/add_see_also_column.sh
	@echo "âœ… see_also columns added!"

man-page-sub-category-extender:
	@echo "ðŸ“ Extending man-pages subcategories from 404.txt..."
	@cd .. && python3 scripts/man-pages/sub_category_extender.py
	@echo "âœ… Subcategories extended!"

insert-emojis:
	@echo "âž• Inserting emojis from JSON into database..."
	@cd .. && python3 scripts/emojis/data_extender/insert_emojis.py
	@echo "âœ… Emojis inserted!"