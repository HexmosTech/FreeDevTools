<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kubernetes</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h1, .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Kubernetes</h1>
        </div>
        <div class="content">
            <div class="markdown-content"><h1>Kubernetes</h1>
<ul>
<li>PDF: https://sematext.com/kubernetes-cheat-sheet/</li>
<li>WEBSITE: https://kubernetes.io/</li>
<li>DOCUMENTATION: https://kubernetes.io/docs/home</li>
</ul>
<h2>Client Configuration</h2>
<ul>
<li>Setup autocomplete in bash; bash-completion package should be installed first</li>
</ul>
<pre class="codehilite"><code>source &lt;(kubectl completion bash)
</code></pre>

<ul>
<li>View Kubernetes config</li>
</ul>
<pre class="codehilite"><code>kubectl config view
</code></pre>

<ul>
<li>View specific config items by json path</li>
</ul>
<pre class="codehilite"><code>kubectl config view -o jsonpath='{.users[?(@.name == &quot;k8s&quot;)].user.password}'
</code></pre>

<ul>
<li>Set credentials for <code>foo.kuberntes.com</code></li>
</ul>
<pre class="codehilite"><code>kubectl config set-credentials kubeuser/foo.kubernetes.com --username=kubeuser --password=kubepassword
</code></pre>

<ul>
<li>Set active namespace</li>
</ul>
<pre class="codehilite"><code>kubectl config set-context --current --namespace=namespace_name
</code></pre>

<h2>Viewing, Finding resources</h2>
<ul>
<li>List all services in the namespace</li>
</ul>
<pre class="codehilite"><code>kubectl get services
</code></pre>

<ul>
<li>List all pods in all namespaces in wide format</li>
</ul>
<pre class="codehilite"><code>kubectl get pods -o wide --all-namespaces
</code></pre>

<ul>
<li>List all pods in json (or yaml) format</li>
</ul>
<pre class="codehilite"><code>kubectl get pods -o json
</code></pre>

<ul>
<li>Describe resource details (node, pod, svc)</li>
</ul>
<pre class="codehilite"><code>kubectl describe nodes my-node
</code></pre>

<ul>
<li>List services sorted by name</li>
</ul>
<pre class="codehilite"><code>kubectl get services --sort-by=.metadata.name
</code></pre>

<ul>
<li>List pods sorted by restart count</li>
</ul>
<pre class="codehilite"><code>kubectl get pods --sort-by='.status.containerStatuses[0].restartCount'
</code></pre>

<ul>
<li>Rolling update pods for frontend-v1</li>
</ul>
<pre class="codehilite"><code>kubectl rolling-update frontend-v1 -f frontend-v2.json
</code></pre>

<ul>
<li>Scale a replicaset named 'foo' to 3</li>
</ul>
<pre class="codehilite"><code>kubectl scale --replicas=3 rs/foo
</code></pre>

<ul>
<li>Scale a resource specified in "foo.yaml" to 3</li>
</ul>
<pre class="codehilite"><code>kubectl scale --replicas=3 -f foo.yaml
</code></pre>

<ul>
<li>Execute a command in every pod / replica</li>
</ul>
<pre class="codehilite"><code>for i in 0 1; do kubectl exec foo-$i -- sh -c 'echo $(hostname) &gt; /usr/share/nginx/html/index.html'; done
</code></pre>

<h2>Manage Resources</h2>
<ul>
<li>Get documentation for pod or service</li>
</ul>
<pre class="codehilite"><code>kubectl explain pods,svc
</code></pre>

<ul>
<li>Create resource(s) like pods, services or daemonsets</li>
</ul>
<pre class="codehilite"><code>kubectl create -f ./my-manifest.yaml
</code></pre>

<ul>
<li>Apply a configuration to a resource</li>
</ul>
<pre class="codehilite"><code>kubectl apply -f ./my-manifest.yaml
</code></pre>

<ul>
<li>Start a single instance of Nginx</li>
</ul>
<pre class="codehilite"><code>kubectl run nginx --image=nginx
</code></pre>

<ul>
<li>Create a secret with several keys</li>
</ul>
<pre class="codehilite"><code>cat &lt;&lt;EOF | kubectl create -f -
apiVersion: v1
kind: Secret
metadata:
 name: mysecret
type: Opaque
data:
 password: $(echo &quot;s33msi4&quot; | base64)
 username: $(echo &quot;jane&quot;| base64)
EOF
</code></pre>

<ul>
<li>Delete a resource</li>
</ul>
<pre class="codehilite"><code>kubectl delete -f ./my-manifest.yaml
</code></pre>

<h2>Monitoring &amp; Logging</h2>
<ul>
<li>Deploy Heapster from Github repository</li>
</ul>
<pre class="codehilite"><code>kubectl create -f deploy/kube-config/standalone/
</code></pre>

<ul>
<li>Show metrics for nodes</li>
</ul>
<pre class="codehilite"><code>kubectl top node
</code></pre>

<ul>
<li>Show metrics for pods</li>
</ul>
<pre class="codehilite"><code>kubectl top pod
</code></pre>

<ul>
<li>Show metrics for a given pod and its containers</li>
</ul>
<pre class="codehilite"><code>kubectl top pod pod_name --containers
</code></pre>

<ul>
<li>Dump pod logs (stdout)</li>
</ul>
<pre class="codehilite"><code>kubectl logs pod_name
</code></pre>

<ul>
<li>Stream pod container logs (stdout, multi-container case)</li>
</ul>
<pre class="codehilite"><code>kubectl logs -f pod_name -c my-container
</code></pre>

<h2>Interacting with running pods</h2>
<ul>
<li>Run command in pod</li>
</ul>
<pre class="codehilite"><code>kubectl exec pod_name -- command_name
</code></pre>

<ul>
<li>Run command in pod with multiple containers</li>
</ul>
<pre class="codehilite"><code>kubectl exec pod_name -c container_name -- command_name
</code></pre>

<ul>
<li>Get terminal of pod</li>
</ul>
<pre class="codehilite"><code>kubectl exec -it pod_name /bin/sh
</code></pre>

<ul>
<li>Get terminal of a container running in pod with multiple containers</li>
</ul>
<pre class="codehilite"><code>kubectl exec -it pod_name -c container_name /bin/sh
</code></pre></div>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>