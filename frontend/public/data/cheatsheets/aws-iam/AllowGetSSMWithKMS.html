<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IAM Policy: Allow SSM Get Parameters with KMS Decrypt</title>
    <meta name="description" content="IAM policy to allow getting SSM parameters by path and decrypting with KMS. Securely manage secrets in AWS.">
    <meta name="keywords" content="IAM policy, AWS, SSM, KMS, GetParametersByPath, Decrypt, security, permissions">
    <meta name="author" content="Hexmos">
    <link rel="canonical" href="https://example.com/aws-iam/AllowGetSSMWithKMS.html">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://example.com/aws-iam/AllowGetSSMWithKMS.html">
    <meta property="og:title" content="IAM Policy: Allow SSM Get Parameters with KMS Decrypt">
    <meta property="og:description" content="IAM policy to allow getting SSM parameters by path and decrypting with KMS. Securely manage secrets in AWS.">
    <meta property="og:image" content="https://example.com/aws-iam/images/AllowGetSSMWithKMS.png">

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://example.com/aws-iam/AllowGetSSMWithKMS.html">
    <meta property="twitter:title" content="IAM Policy: Allow SSM Get Parameters with KMS Decrypt">
    <meta property="twitter:description" content="IAM policy to allow getting SSM parameters by path and decrypting with KMS. Securely manage secrets in AWS.">
    <meta property="twitter:image" content="https://example.com/aws-iam/images/AllowGetSSMWithKMS.png">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-bottom: 1px solid #34495e;
        }
        .header h1 {
            margin: 0;
            font-size: 1.5em;
        }
        .content {
            padding: 20px;
        }
        pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
            margin: 0;
        }
        code {
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
        }
        .markdown-content {
            line-height: 1.7;
        }
        .markdown-content h2, .markdown-content h3 {
            color: #2c3e50;
            border-bottom: 1px solid #e9ecef;
            padding-bottom: 8px;
        }
        .markdown-content pre {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            padding: 16px;
            overflow-x: auto;
        }
        .markdown-content code {
            background: #f1f3f4;
            padding: 2px 4px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-content pre code {
            background: none;
            padding: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Allow SSM Get Parameters with KMS Decrypt</h1>
        </div>
        <div class="content">
            <p>This IAM policy allows getting SSM parameters by path and decrypting them using KMS. It's useful for applications that need to securely retrieve configuration data stored in AWS Systems Manager Parameter Store, encrypted with KMS.</p>
            <pre><code class="language-json">{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowSSM",
            "Effect": "Allow",
            "Action": [
                "ssm:GetParametersByPath",
                "ssm:GetParameters"
            ],
            "Resource": [
                "arn:aws:ssm:eu-west-1:xxxxxxxxxxxx:parameter/my-application/dev/DATABASE_*",
                "arn:aws:ssm:eu-west-1:xxxxxxxxxxxx:parameter/codebuild/dev/DOCKER_USER",
                "arn:aws:ssm:eu-west-1:xxxxxxxxxxxx:parameter/codebuild/dev/DOCKER_PASSWORD"
            ]
        },
        {
            "Sid": "AllowKMSDecrypt",
            "Effect": "Allow",
            "Action": [
                "kms:Decrypt",
                "kms:GenerateDataKey"
            ],
            "Resource": [
                "arn:aws:kms:eu-west-1:xxxxxxxxxxxx:key/*"
            ]
        }
    ]
}
</code></pre>
            <h2>Explanation</h2>
            <p>This policy consists of two main statements:</p>
            <h3>AllowSSM</h3>
            <p>This statement allows the <code>ssm:GetParametersByPath</code> and <code>ssm:GetParameters</code> actions. These actions are necessary to retrieve parameters from the AWS Systems Manager Parameter Store. The <code>Resource</code> element specifies the ARN patterns for the parameters that can be accessed.  In this example, it allows access to parameters under the <code>/my-application/dev/DATABASE_*</code>, <code>/codebuild/dev/DOCKER_USER</code>, and <code>/codebuild/dev/DOCKER_PASSWORD</code> paths.</p>
            <h3>AllowKMSDecrypt</h3>
            <p>This statement allows the <code>kms:Decrypt</code> and <code>kms:GenerateDataKey</code> actions. These actions are required to decrypt the parameters if they are encrypted using KMS. The <code>Resource</code> element specifies the ARN pattern for the KMS keys that can be used for decryption. In this example, it allows access to all keys in the <code>eu-west-1</code> region for the specified account.</p>

            <h2>Use Cases</h2>
            <ul>
                <li>Granting access to applications to retrieve database credentials stored in SSM Parameter Store.</li>
                <li>Allowing CI/CD pipelines to access encrypted secrets required for deployment.</li>
                <li>Providing secure access to configuration parameters for microservices.</li>
            </ul>

            <h2>Best Practices</h2>
            <ul>
                <li>Apply the principle of least privilege by granting only the necessary permissions.</li>
                <li>Use specific resource ARNs instead of wildcards to limit the scope of access.</li>
                <li>Regularly review and update IAM policies to ensure they are still appropriate.</li>
            </ul>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script>
        hljs.highlightAll();
    </script>
</body>
</html>
